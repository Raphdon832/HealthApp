function AG(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var y7e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var s3={exports:{}},Rg={},i3={exports:{}},yn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oC;function NG(){if(oC)return yn;oC=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function g(G){return G===null||typeof G!="object"?null:(G=p&&G[p]||G["@@iterator"],typeof G=="function"?G:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,w={};function _(G,P,U){this.props=G,this.context=P,this.refs=w,this.updater=U||m}_.prototype.isReactComponent={},_.prototype.setState=function(G,P){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,P,"setState")},_.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function S(){}S.prototype=_.prototype;function T(G,P,U){this.props=G,this.context=P,this.refs=w,this.updater=U||m}var I=T.prototype=new S;I.constructor=T,y(I,_.prototype),I.isPureReactComponent=!0;var M=Array.isArray,K=Object.prototype.hasOwnProperty,W={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function A(G,P,U){var X,J={},ie=null,ve=null;if(P!=null)for(X in P.ref!==void 0&&(ve=P.ref),P.key!==void 0&&(ie=""+P.key),P)K.call(P,X)&&!L.hasOwnProperty(X)&&(J[X]=P[X]);var ke=arguments.length-2;if(ke===1)J.children=U;else if(1<ke){for(var oe=Array(ke),Ee=0;Ee<ke;Ee++)oe[Ee]=arguments[Ee+2];J.children=oe}if(G&&G.defaultProps)for(X in ke=G.defaultProps,ke)J[X]===void 0&&(J[X]=ke[X]);return{$$typeof:t,type:G,key:ie,ref:ve,props:J,_owner:W.current}}function E(G,P){return{$$typeof:t,type:G.type,key:P,ref:G.ref,props:G.props,_owner:G._owner}}function D(G){return typeof G=="object"&&G!==null&&G.$$typeof===t}function R(G){var P={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(U){return P[U]})}var F=/\/+/g;function V(G,P){return typeof G=="object"&&G!==null&&G.key!=null?R(""+G.key):P.toString(36)}function Z(G,P,U,X,J){var ie=typeof G;(ie==="undefined"||ie==="boolean")&&(G=null);var ve=!1;if(G===null)ve=!0;else switch(ie){case"string":case"number":ve=!0;break;case"object":switch(G.$$typeof){case t:case e:ve=!0}}if(ve)return ve=G,J=J(ve),G=X===""?"."+V(ve,0):X,M(J)?(U="",G!=null&&(U=G.replace(F,"$&/")+"/"),Z(J,P,U,"",function(Ee){return Ee})):J!=null&&(D(J)&&(J=E(J,U+(!J.key||ve&&ve.key===J.key?"":(""+J.key).replace(F,"$&/")+"/")+G)),P.push(J)),1;if(ve=0,X=X===""?".":X+":",M(G))for(var ke=0;ke<G.length;ke++){ie=G[ke];var oe=X+V(ie,ke);ve+=Z(ie,P,U,oe,J)}else if(oe=g(G),typeof oe=="function")for(G=oe.call(G),ke=0;!(ie=G.next()).done;)ie=ie.value,oe=X+V(ie,ke++),ve+=Z(ie,P,U,oe,J);else if(ie==="object")throw P=String(G),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.");return ve}function fe(G,P,U){if(G==null)return G;var X=[],J=0;return Z(G,X,"","",function(ie){return P.call(U,ie,J++)}),X}function xe(G){if(G._status===-1){var P=G._result;P=P(),P.then(function(U){(G._status===0||G._status===-1)&&(G._status=1,G._result=U)},function(U){(G._status===0||G._status===-1)&&(G._status=2,G._result=U)}),G._status===-1&&(G._status=0,G._result=P)}if(G._status===1)return G._result.default;throw G._result}var he={current:null},ae={transition:null},H={ReactCurrentDispatcher:he,ReactCurrentBatchConfig:ae,ReactCurrentOwner:W};function te(){throw Error("act(...) is not supported in production builds of React.")}return yn.Children={map:fe,forEach:function(G,P,U){fe(G,function(){P.apply(this,arguments)},U)},count:function(G){var P=0;return fe(G,function(){P++}),P},toArray:function(G){return fe(G,function(P){return P})||[]},only:function(G){if(!D(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},yn.Component=_,yn.Fragment=r,yn.Profiler=s,yn.PureComponent=T,yn.StrictMode=n,yn.Suspense=l,yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,yn.act=te,yn.cloneElement=function(G,P,U){if(G==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+G+".");var X=y({},G.props),J=G.key,ie=G.ref,ve=G._owner;if(P!=null){if(P.ref!==void 0&&(ie=P.ref,ve=W.current),P.key!==void 0&&(J=""+P.key),G.type&&G.type.defaultProps)var ke=G.type.defaultProps;for(oe in P)K.call(P,oe)&&!L.hasOwnProperty(oe)&&(X[oe]=P[oe]===void 0&&ke!==void 0?ke[oe]:P[oe])}var oe=arguments.length-2;if(oe===1)X.children=U;else if(1<oe){ke=Array(oe);for(var Ee=0;Ee<oe;Ee++)ke[Ee]=arguments[Ee+2];X.children=ke}return{$$typeof:t,type:G.type,key:J,ref:ie,props:X,_owner:ve}},yn.createContext=function(G){return G={$$typeof:a,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},G.Provider={$$typeof:i,_context:G},G.Consumer=G},yn.createElement=A,yn.createFactory=function(G){var P=A.bind(null,G);return P.type=G,P},yn.createRef=function(){return{current:null}},yn.forwardRef=function(G){return{$$typeof:o,render:G}},yn.isValidElement=D,yn.lazy=function(G){return{$$typeof:d,_payload:{_status:-1,_result:G},_init:xe}},yn.memo=function(G,P){return{$$typeof:c,type:G,compare:P===void 0?null:P}},yn.startTransition=function(G){var P=ae.transition;ae.transition={};try{G()}finally{ae.transition=P}},yn.unstable_act=te,yn.useCallback=function(G,P){return he.current.useCallback(G,P)},yn.useContext=function(G){return he.current.useContext(G)},yn.useDebugValue=function(){},yn.useDeferredValue=function(G){return he.current.useDeferredValue(G)},yn.useEffect=function(G,P){return he.current.useEffect(G,P)},yn.useId=function(){return he.current.useId()},yn.useImperativeHandle=function(G,P,U){return he.current.useImperativeHandle(G,P,U)},yn.useInsertionEffect=function(G,P){return he.current.useInsertionEffect(G,P)},yn.useLayoutEffect=function(G,P){return he.current.useLayoutEffect(G,P)},yn.useMemo=function(G,P){return he.current.useMemo(G,P)},yn.useReducer=function(G,P,U){return he.current.useReducer(G,P,U)},yn.useRef=function(G){return he.current.useRef(G)},yn.useState=function(G){return he.current.useState(G)},yn.useSyncExternalStore=function(G,P,U){return he.current.useSyncExternalStore(G,P,U)},yn.useTransition=function(){return he.current.useTransition()},yn.version="18.3.1",yn}var lC;function s_(){return lC||(lC=1,i3.exports=NG()),i3.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cC;function TG(){if(cC)return Rg;cC=1;var t=s_(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,c){var d,p={},g=null,m=null;c!==void 0&&(g=""+c),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(m=l.ref);for(d in l)n.call(l,d)&&!i.hasOwnProperty(d)&&(p[d]=l[d]);if(o&&o.defaultProps)for(d in l=o.defaultProps,l)p[d]===void 0&&(p[d]=l[d]);return{$$typeof:e,type:o,key:g,ref:m,props:p,_owner:s.current}}return Rg.Fragment=r,Rg.jsx=a,Rg.jsxs=a,Rg}var uC;function IG(){return uC||(uC=1,s3.exports=TG()),s3.exports}var u=IG(),j=s_();const Is=mj(j),$w=AG({__proto__:null,default:Is},[j]);var ov={},a3={exports:{}},yl={},o3={exports:{}},l3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dC;function PG(){return dC||(dC=1,(function(t){function e(ae,H){var te=ae.length;ae.push(H);e:for(;0<te;){var G=te-1>>>1,P=ae[G];if(0<s(P,H))ae[G]=H,ae[te]=P,te=G;else break e}}function r(ae){return ae.length===0?null:ae[0]}function n(ae){if(ae.length===0)return null;var H=ae[0],te=ae.pop();if(te!==H){ae[0]=te;e:for(var G=0,P=ae.length,U=P>>>1;G<U;){var X=2*(G+1)-1,J=ae[X],ie=X+1,ve=ae[ie];if(0>s(J,te))ie<P&&0>s(ve,J)?(ae[G]=ve,ae[ie]=te,G=ie):(ae[G]=J,ae[X]=te,G=X);else if(ie<P&&0>s(ve,te))ae[G]=ve,ae[ie]=te,G=ie;else break e}}return H}function s(ae,H){var te=ae.sortIndex-H.sortIndex;return te!==0?te:ae.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,p=null,g=3,m=!1,y=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(ae){for(var H=r(c);H!==null;){if(H.callback===null)n(c);else if(H.startTime<=ae)n(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=r(c)}}function M(ae){if(w=!1,I(ae),!y)if(r(l)!==null)y=!0,xe(K);else{var H=r(c);H!==null&&he(M,H.startTime-ae)}}function K(ae,H){y=!1,w&&(w=!1,S(A),A=-1),m=!0;var te=g;try{for(I(H),p=r(l);p!==null&&(!(p.expirationTime>H)||ae&&!R());){var G=p.callback;if(typeof G=="function"){p.callback=null,g=p.priorityLevel;var P=G(p.expirationTime<=H);H=t.unstable_now(),typeof P=="function"?p.callback=P:p===r(l)&&n(l),I(H)}else n(l);p=r(l)}if(p!==null)var U=!0;else{var X=r(c);X!==null&&he(M,X.startTime-H),U=!1}return U}finally{p=null,g=te,m=!1}}var W=!1,L=null,A=-1,E=5,D=-1;function R(){return!(t.unstable_now()-D<E)}function F(){if(L!==null){var ae=t.unstable_now();D=ae;var H=!0;try{H=L(!0,ae)}finally{H?V():(W=!1,L=null)}}else W=!1}var V;if(typeof T=="function")V=function(){T(F)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,fe=Z.port2;Z.port1.onmessage=F,V=function(){fe.postMessage(null)}}else V=function(){_(F,0)};function xe(ae){L=ae,W||(W=!0,V())}function he(ae,H){A=_(function(){ae(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ae){ae.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,xe(K))},t.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<ae?Math.floor(1e3/ae):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(ae){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var te=g;g=H;try{return ae()}finally{g=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ae,H){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var te=g;g=ae;try{return H()}finally{g=te}},t.unstable_scheduleCallback=function(ae,H,te){var G=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?G+te:G):te=G,ae){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=te+P,ae={id:d++,callback:H,priorityLevel:ae,startTime:te,expirationTime:P,sortIndex:-1},te>G?(ae.sortIndex=te,e(c,ae),r(l)===null&&ae===r(c)&&(w?(S(A),A=-1):w=!0,he(M,te-G))):(ae.sortIndex=P,e(l,ae),y||m||(y=!0,xe(K))),ae},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(ae){var H=g;return function(){var te=g;g=H;try{return ae.apply(this,arguments)}finally{g=te}}}})(l3)),l3}var hC;function RG(){return hC||(hC=1,o3.exports=PG()),o3.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fC;function LG(){if(fC)return yl;fC=1;var t=s_(),e=RG();function r(h){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+h,x=1;x<arguments.length;x++)f+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(h,f){a(h,f),a(h+"Capture",f)}function a(h,f){for(s[h]=f,h=0;h<f.length;h++)n.add(f[h])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function g(h){return l.call(p,h)?!0:l.call(d,h)?!1:c.test(h)?p[h]=!0:(d[h]=!0,!1)}function m(h,f,x,C){if(x!==null&&x.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return C?!1:x!==null?!x.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function y(h,f,x,C){if(f===null||typeof f>"u"||m(h,f,x,C))return!0;if(C)return!1;if(x!==null)switch(x.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function w(h,f,x,C,O,Y,ue){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=C,this.attributeNamespace=O,this.mustUseProperty=x,this.propertyName=h,this.type=f,this.sanitizeURL=Y,this.removeEmptyString=ue}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){_[h]=new w(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var f=h[0];_[f]=new w(f,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){_[h]=new w(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){_[h]=new w(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){_[h]=new w(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){_[h]=new w(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){_[h]=new w(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){_[h]=new w(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){_[h]=new w(h,5,!1,h.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function T(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var f=h.replace(S,T);_[f]=new w(f,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var f=h.replace(S,T);_[f]=new w(f,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var f=h.replace(S,T);_[f]=new w(f,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){_[h]=new w(h,1,!1,h.toLowerCase(),null,!1,!1)}),_.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){_[h]=new w(h,1,!1,h.toLowerCase(),null,!0,!0)});function I(h,f,x,C){var O=_.hasOwnProperty(f)?_[f]:null;(O!==null?O.type!==0:C||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(y(f,x,O,C)&&(x=null),C||O===null?g(f)&&(x===null?h.removeAttribute(f):h.setAttribute(f,""+x)):O.mustUseProperty?h[O.propertyName]=x===null?O.type===3?!1:"":x:(f=O.attributeName,C=O.attributeNamespace,x===null?h.removeAttribute(f):(O=O.type,x=O===3||O===4&&x===!0?"":""+x,C?h.setAttributeNS(C,f,x):h.setAttribute(f,x))))}var M=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),W=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),R=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),xe=Symbol.for("react.lazy"),he=Symbol.for("react.offscreen"),ae=Symbol.iterator;function H(h){return h===null||typeof h!="object"?null:(h=ae&&h[ae]||h["@@iterator"],typeof h=="function"?h:null)}var te=Object.assign,G;function P(h){if(G===void 0)try{throw Error()}catch(x){var f=x.stack.trim().match(/\n( *(at )?)/);G=f&&f[1]||""}return`
`+G+h}var U=!1;function X(h,f){if(!h||U)return"";U=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(pt){var C=pt}Reflect.construct(h,[],f)}else{try{f.call()}catch(pt){C=pt}h.call(f.prototype)}else{try{throw Error()}catch(pt){C=pt}h()}}catch(pt){if(pt&&C&&typeof pt.stack=="string"){for(var O=pt.stack.split(`
`),Y=C.stack.split(`
`),ue=O.length-1,De=Y.length-1;1<=ue&&0<=De&&O[ue]!==Y[De];)De--;for(;1<=ue&&0<=De;ue--,De--)if(O[ue]!==Y[De]){if(ue!==1||De!==1)do if(ue--,De--,0>De||O[ue]!==Y[De]){var Ue=`
`+O[ue].replace(" at new "," at ");return h.displayName&&Ue.includes("<anonymous>")&&(Ue=Ue.replace("<anonymous>",h.displayName)),Ue}while(1<=ue&&0<=De);break}}}finally{U=!1,Error.prepareStackTrace=x}return(h=h?h.displayName||h.name:"")?P(h):""}function J(h){switch(h.tag){case 5:return P(h.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return h=X(h.type,!1),h;case 11:return h=X(h.type.render,!1),h;case 1:return h=X(h.type,!0),h;default:return""}}function ie(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case L:return"Fragment";case W:return"Portal";case E:return"Profiler";case A:return"StrictMode";case V:return"Suspense";case Z:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case R:return(h.displayName||"Context")+".Consumer";case D:return(h._context.displayName||"Context")+".Provider";case F:var f=h.render;return h=h.displayName,h||(h=f.displayName||f.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case fe:return f=h.displayName||null,f!==null?f:ie(h.type)||"Memo";case xe:f=h._payload,h=h._init;try{return ie(h(f))}catch{}}return null}function ve(h){var f=h.type;switch(h.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=f.render,h=h.displayName||h.name||"",f.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(f);case 8:return f===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function ke(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function oe(h){var f=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Ee(h){var f=oe(h)?"checked":"value",x=Object.getOwnPropertyDescriptor(h.constructor.prototype,f),C=""+h[f];if(!h.hasOwnProperty(f)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var O=x.get,Y=x.set;return Object.defineProperty(h,f,{configurable:!0,get:function(){return O.call(this)},set:function(ue){C=""+ue,Y.call(this,ue)}}),Object.defineProperty(h,f,{enumerable:x.enumerable}),{getValue:function(){return C},setValue:function(ue){C=""+ue},stopTracking:function(){h._valueTracker=null,delete h[f]}}}}function Oe(h){h._valueTracker||(h._valueTracker=Ee(h))}function ne(h){if(!h)return!1;var f=h._valueTracker;if(!f)return!0;var x=f.getValue(),C="";return h&&(C=oe(h)?h.checked?"true":"false":h.value),h=C,h!==x?(f.setValue(h),!0):!1}function we(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function Re(h,f){var x=f.checked;return te({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??h._wrapperState.initialChecked})}function pe(h,f){var x=f.defaultValue==null?"":f.defaultValue,C=f.checked!=null?f.checked:f.defaultChecked;x=ke(f.value!=null?f.value:x),h._wrapperState={initialChecked:C,initialValue:x,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function Ke(h,f){f=f.checked,f!=null&&I(h,"checked",f,!1)}function ze(h,f){Ke(h,f);var x=ke(f.value),C=f.type;if(x!=null)C==="number"?(x===0&&h.value===""||h.value!=x)&&(h.value=""+x):h.value!==""+x&&(h.value=""+x);else if(C==="submit"||C==="reset"){h.removeAttribute("value");return}f.hasOwnProperty("value")?Be(h,f.type,x):f.hasOwnProperty("defaultValue")&&Be(h,f.type,ke(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(h.defaultChecked=!!f.defaultChecked)}function ot(h,f,x){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var C=f.type;if(!(C!=="submit"&&C!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+h._wrapperState.initialValue,x||f===h.value||(h.value=f),h.defaultValue=f}x=h.name,x!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,x!==""&&(h.name=x)}function Be(h,f,x){(f!=="number"||we(h.ownerDocument)!==h)&&(x==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+x&&(h.defaultValue=""+x))}var He=Array.isArray;function ut(h,f,x,C){if(h=h.options,f){f={};for(var O=0;O<x.length;O++)f["$"+x[O]]=!0;for(x=0;x<h.length;x++)O=f.hasOwnProperty("$"+h[x].value),h[x].selected!==O&&(h[x].selected=O),O&&C&&(h[x].defaultSelected=!0)}else{for(x=""+ke(x),f=null,O=0;O<h.length;O++){if(h[O].value===x){h[O].selected=!0,C&&(h[O].defaultSelected=!0);return}f!==null||h[O].disabled||(f=h[O])}f!==null&&(f.selected=!0)}}function Ct(h,f){if(f.dangerouslySetInnerHTML!=null)throw Error(r(91));return te({},f,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function Et(h,f){var x=f.value;if(x==null){if(x=f.children,f=f.defaultValue,x!=null){if(f!=null)throw Error(r(92));if(He(x)){if(1<x.length)throw Error(r(93));x=x[0]}f=x}f==null&&(f=""),x=f}h._wrapperState={initialValue:ke(x)}}function Le(h,f){var x=ke(f.value),C=ke(f.defaultValue);x!=null&&(x=""+x,x!==h.value&&(h.value=x),f.defaultValue==null&&h.defaultValue!==x&&(h.defaultValue=x)),C!=null&&(h.defaultValue=""+C)}function Ye(h){var f=h.textContent;f===h._wrapperState.initialValue&&f!==""&&f!==null&&(h.value=f)}function Qe(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(h,f){return h==null||h==="http://www.w3.org/1999/xhtml"?Qe(f):h==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var je,We=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,x,C,O){MSApp.execUnsafeLocalFunction(function(){return h(f,x,C,O)})}:h})(function(h,f){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=f;else{for(je=je||document.createElement("div"),je.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=je.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;f.firstChild;)h.appendChild(f.firstChild)}});function lt(h,f){if(f){var x=h.firstChild;if(x&&x===h.lastChild&&x.nodeType===3){x.nodeValue=f;return}}h.textContent=f}var yt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$t=["Webkit","ms","Moz","O"];Object.keys(yt).forEach(function(h){$t.forEach(function(f){f=f+h.charAt(0).toUpperCase()+h.substring(1),yt[f]=yt[h]})});function Xt(h,f,x){return f==null||typeof f=="boolean"||f===""?"":x||typeof f!="number"||f===0||yt.hasOwnProperty(h)&&yt[h]?(""+f).trim():f+"px"}function At(h,f){h=h.style;for(var x in f)if(f.hasOwnProperty(x)){var C=x.indexOf("--")===0,O=Xt(x,f[x],C);x==="float"&&(x="cssFloat"),C?h.setProperty(x,O):h[x]=O}}var Vt=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Or(h,f){if(f){if(Vt[h]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(r(137,h));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(r(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(r(61))}if(f.style!=null&&typeof f.style!="object")throw Error(r(62))}}function rr(h,f){if(h.indexOf("-")===-1)return typeof f.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sr=null;function Cr(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Bn=null,bn=null,Yr=null;function hr(h){if(h=Ah(h)){if(typeof Bn!="function")throw Error(r(280));var f=h.stateNode;f&&(f=n0(f),Bn(h.stateNode,h.type,f))}}function Jr(h){bn?Yr?Yr.push(h):Yr=[h]:bn=h}function ha(){if(bn){var h=bn,f=Yr;if(Yr=bn=null,hr(h),f)for(h=0;h<f.length;h++)hr(f[h])}}function ms(h,f){return h(f)}function Pi(){}var gs=!1;function vr(h,f,x){if(gs)return h(f,x);gs=!0;try{return ms(h,f,x)}finally{gs=!1,(bn!==null||Yr!==null)&&(Pi(),ha())}}function Nn(h,f){var x=h.stateNode;if(x===null)return null;var C=n0(x);if(C===null)return null;x=C[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(h=h.type,C=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!C;break e;default:h=!1}if(h)return null;if(x&&typeof x!="function")throw Error(r(231,f,typeof x));return x}var Ri=!1;if(o)try{var Gn={};Object.defineProperty(Gn,"passive",{get:function(){Ri=!0}}),window.addEventListener("test",Gn,Gn),window.removeEventListener("test",Gn,Gn)}catch{Ri=!1}function ln(h,f,x,C,O,Y,ue,De,Ue){var pt=Array.prototype.slice.call(arguments,3);try{f.apply(x,pt)}catch(Ft){this.onError(Ft)}}var Ln=!1,ss=null,ce=!1,Te=null,be={onError:function(h){Ln=!0,ss=h}};function Se(h,f,x,C,O,Y,ue,De,Ue){Ln=!1,ss=null,ln.apply(be,arguments)}function Pe(h,f,x,C,O,Y,ue,De,Ue){if(Se.apply(this,arguments),Ln){if(Ln){var pt=ss;Ln=!1,ss=null}else throw Error(r(198));ce||(ce=!0,Te=pt)}}function Ie(h){var f=h,x=h;if(h.alternate)for(;f.return;)f=f.return;else{h=f;do f=h,(f.flags&4098)!==0&&(x=f.return),h=f.return;while(h)}return f.tag===3?x:null}function Xe(h){if(h.tag===13){var f=h.memoizedState;if(f===null&&(h=h.alternate,h!==null&&(f=h.memoizedState)),f!==null)return f.dehydrated}return null}function ft(h){if(Ie(h)!==h)throw Error(r(188))}function tt(h){var f=h.alternate;if(!f){if(f=Ie(h),f===null)throw Error(r(188));return f!==h?null:h}for(var x=h,C=f;;){var O=x.return;if(O===null)break;var Y=O.alternate;if(Y===null){if(C=O.return,C!==null){x=C;continue}break}if(O.child===Y.child){for(Y=O.child;Y;){if(Y===x)return ft(O),h;if(Y===C)return ft(O),f;Y=Y.sibling}throw Error(r(188))}if(x.return!==C.return)x=O,C=Y;else{for(var ue=!1,De=O.child;De;){if(De===x){ue=!0,x=O,C=Y;break}if(De===C){ue=!0,C=O,x=Y;break}De=De.sibling}if(!ue){for(De=Y.child;De;){if(De===x){ue=!0,x=Y,C=O;break}if(De===C){ue=!0,C=Y,x=O;break}De=De.sibling}if(!ue)throw Error(r(189))}}if(x.alternate!==C)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?h:f}function et(h){return h=tt(h),h!==null?at(h):null}function at(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var f=at(h);if(f!==null)return f;h=h.sibling}return null}var Tt=e.unstable_scheduleCallback,Ut=e.unstable_cancelCallback,Gt=e.unstable_shouldYield,Ot=e.unstable_requestPaint,Pt=e.unstable_now,Ar=e.unstable_getCurrentPriorityLevel,Xr=e.unstable_ImmediatePriority,Ur=e.unstable_UserBlockingPriority,kn=e.unstable_NormalPriority,Aa=e.unstable_LowPriority,Na=e.unstable_IdlePriority,Qi=null,Fe=null;function zt(h){if(Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(Qi,h,void 0,(h.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:sn,nr=Math.log,gr=Math.LN2;function sn(h){return h>>>=0,h===0?32:31-(nr(h)/gr|0)|0}var Es=64,Vn=4194304;function Sn(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function jn(h,f){var x=h.pendingLanes;if(x===0)return 0;var C=0,O=h.suspendedLanes,Y=h.pingedLanes,ue=x&268435455;if(ue!==0){var De=ue&~O;De!==0?C=Sn(De):(Y&=ue,Y!==0&&(C=Sn(Y)))}else ue=x&~O,ue!==0?C=Sn(ue):Y!==0&&(C=Sn(Y));if(C===0)return 0;if(f!==0&&f!==C&&(f&O)===0&&(O=C&-C,Y=f&-f,O>=Y||O===16&&(Y&4194240)!==0))return f;if((C&4)!==0&&(C|=x&16),f=h.entangledLanes,f!==0)for(h=h.entanglements,f&=C;0<f;)x=31-Qt(f),O=1<<x,C|=h[x],f&=~O;return C}function Hs(h,f){switch(h){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cn(h,f){for(var x=h.suspendedLanes,C=h.pingedLanes,O=h.expirationTimes,Y=h.pendingLanes;0<Y;){var ue=31-Qt(Y),De=1<<ue,Ue=O[ue];Ue===-1?((De&x)===0||(De&C)!==0)&&(O[ue]=Hs(De,f)):Ue<=f&&(h.expiredLanes|=De),Y&=~De}}function Ps(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function Ta(){var h=Es;return Es<<=1,(Es&4194240)===0&&(Es=64),h}function Ko(h){for(var f=[],x=0;31>x;x++)f.push(h);return f}function Yo(h,f,x){h.pendingLanes|=f,f!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,f=31-Qt(f),h[f]=x}function un(h,f){var x=h.pendingLanes&~f;h.pendingLanes=f,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=f,h.mutableReadLanes&=f,h.entangledLanes&=f,f=h.entanglements;var C=h.eventTimes;for(h=h.expirationTimes;0<x;){var O=31-Qt(x),Y=1<<O;f[O]=0,C[O]=-1,h[O]=-1,x&=~Y}}function Il(h,f){var x=h.entangledLanes|=f;for(h=h.entanglements;x;){var C=31-Qt(x),O=1<<C;O&f|h[C]&f&&(h[C]|=f),x&=~O}}var on=0;function Ka(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var wu,_u,ph,mh,bu,Pl=!1,fa=[],Li=null,pa=null,Ya=null,Pr=new Map,go=new Map,ll=[],Gf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gh(h,f){switch(h){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":Pr.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":go.delete(f.pointerId)}}function Ws(h,f,x,C,O,Y){return h===null||h.nativeEvent!==Y?(h={blockedOn:f,domEventName:x,eventSystemFlags:C,nativeEvent:Y,targetContainers:[O]},f!==null&&(f=Ah(f),f!==null&&_u(f)),h):(h.eventSystemFlags|=C,f=h.targetContainers,O!==null&&f.indexOf(O)===-1&&f.push(O),h)}function Rl(h,f,x,C,O){switch(f){case"focusin":return Li=Ws(Li,h,f,x,C,O),!0;case"dragenter":return pa=Ws(pa,h,f,x,C,O),!0;case"mouseover":return Ya=Ws(Ya,h,f,x,C,O),!0;case"pointerover":var Y=O.pointerId;return Pr.set(Y,Ws(Pr.get(Y)||null,h,f,x,C,O)),!0;case"gotpointercapture":return Y=O.pointerId,go.set(Y,Ws(go.get(Y)||null,h,f,x,C,O)),!0}return!1}function xh(h){var f=Iu(h.target);if(f!==null){var x=Ie(f);if(x!==null){if(f=x.tag,f===13){if(f=Xe(x),f!==null){h.blockedOn=f,bu(h.priority,function(){ph(x)});return}}else if(f===3&&x.stateNode.current.memoizedState.isDehydrated){h.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}h.blockedOn=null}function Ll(h){if(h.blockedOn!==null)return!1;for(var f=h.targetContainers;0<f.length;){var x=oc(h.domEventName,h.eventSystemFlags,f[0],h.nativeEvent);if(x===null){x=h.nativeEvent;var C=new x.constructor(x.type,x);Sr=C,x.target.dispatchEvent(C),Sr=null}else return f=Ah(x),f!==null&&_u(f),h.blockedOn=x,!1;f.shift()}return!0}function cl(h,f,x){Ll(h)&&x.delete(f)}function ku(){Pl=!1,Li!==null&&Ll(Li)&&(Li=null),pa!==null&&Ll(pa)&&(pa=null),Ya!==null&&Ll(Ya)&&(Ya=null),Pr.forEach(cl),go.forEach(cl)}function ma(h,f){h.blockedOn===f&&(h.blockedOn=null,Pl||(Pl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ku)))}function Ia(h){function f(O){return ma(O,h)}if(0<fa.length){ma(fa[0],h);for(var x=1;x<fa.length;x++){var C=fa[x];C.blockedOn===h&&(C.blockedOn=null)}}for(Li!==null&&ma(Li,h),pa!==null&&ma(pa,h),Ya!==null&&ma(Ya,h),Pr.forEach(f),go.forEach(f),x=0;x<ll.length;x++)C=ll[x],C.blockedOn===h&&(C.blockedOn=null);for(;0<ll.length&&(x=ll[0],x.blockedOn===null);)xh(x),x.blockedOn===null&&ll.shift()}var xo=M.ReactCurrentBatchConfig,ac=!0;function Zn(h,f,x,C){var O=on,Y=xo.transition;xo.transition=null;try{on=1,jl(h,f,x,C)}finally{on=O,xo.transition=Y}}function md(h,f,x,C){var O=on,Y=xo.transition;xo.transition=null;try{on=4,jl(h,f,x,C)}finally{on=O,xo.transition=Y}}function jl(h,f,x,C){if(ac){var O=oc(h,f,x,C);if(O===null)e0(h,f,C,Xo,x),gh(h,C);else if(Rl(O,h,f,x,C))C.stopPropagation();else if(gh(h,C),f&4&&-1<Gf.indexOf(h)){for(;O!==null;){var Y=Ah(O);if(Y!==null&&wu(Y),Y=oc(h,f,x,C),Y===null&&e0(h,f,C,Xo,x),Y===O)break;O=Y}O!==null&&C.stopPropagation()}else e0(h,f,C,null,x)}}var Xo=null;function oc(h,f,x,C){if(Xo=null,h=Cr(C),h=Iu(h),h!==null)if(f=Ie(h),f===null)h=null;else if(x=f.tag,x===13){if(h=Xe(f),h!==null)return h;h=null}else if(x===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;h=null}else f!==h&&(h=null);return Xo=h,null}function lc(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ar()){case Xr:return 1;case Ur:return 4;case kn:case Aa:return 16;case Na:return 536870912;default:return 16}default:return 16}}var ga=null,ul=null,Ji=null;function Uc(){if(Ji)return Ji;var h,f=ul,x=f.length,C,O="value"in ga?ga.value:ga.textContent,Y=O.length;for(h=0;h<x&&f[h]===O[h];h++);var ue=x-h;for(C=1;C<=ue&&f[x-C]===O[Y-C];C++);return Ji=O.slice(h,1<C?1-C:void 0)}function Zi(h){var f=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&f===13&&(h=13)):h=f,h===10&&(h=13),32<=h||h===13?h:0}function ji(){return!0}function B(){return!1}function re(h){function f(x,C,O,Y,ue){this._reactName=x,this._targetInst=O,this.type=C,this.nativeEvent=Y,this.target=ue,this.currentTarget=null;for(var De in h)h.hasOwnProperty(De)&&(x=h[De],this[De]=x?x(Y):Y[De]);return this.isDefaultPrevented=(Y.defaultPrevented!=null?Y.defaultPrevented:Y.returnValue===!1)?ji:B,this.isPropagationStopped=B,this}return te(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),f}var Ae={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Me=re(Ae),Ge=te({},Ae,{view:0,detail:0}),bt=re(Ge),Nt,tr,ar,Nr=te({},Ge,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xa,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==ar&&(ar&&h.type==="mousemove"?(Nt=h.screenX-ar.screenX,tr=h.screenY-ar.screenY):tr=Nt=0,ar=h),Nt)},movementY:function(h){return"movementY"in h?h.movementY:tr}}),Mr=re(Nr),En=te({},Nr,{dataTransfer:0}),xs=re(En),Cs=te({},Ge,{relatedTarget:0}),Fn=re(Cs),Gs=te({},Ae,{animationName:0,elapsedTime:0,pseudoElement:0}),es=re(Gs),xi=te({},Ae,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),dl=re(xi),Fl=te({},Ae,{data:0}),gd=re(Fl),zc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ii={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Su(h){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(h):(h=yo[h])?!!f[h]:!1}function Xa(){return Su}var k=te({},Ge,{key:function(h){if(h.key){var f=zc[h.key]||h.key;if(f!=="Unidentified")return f}return h.type==="keypress"?(h=Zi(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?ii[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xa,charCode:function(h){return h.type==="keypress"?Zi(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Zi(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),q=re(k),ee=te({},Nr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ye=re(ee),Je=te({},Ge,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xa}),gt=re(Je),Dt=te({},Ae,{propertyName:0,elapsedTime:0,pseudoElement:0}),On=re(Dt),Rs=te({},Nr,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),dn=re(Rs),gn=[9,13,27,32],Un=o&&"CompositionEvent"in window,Pa=null;o&&"documentMode"in document&&(Pa=document.documentMode);var xa=o&&"TextEvent"in window&&!Pa,vo=o&&(!Un||Pa&&8<Pa&&11>=Pa),Dl=" ",Qa=!1;function Ja(h,f){switch(h){case"keyup":return gn.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eu(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Za=!1;function Cu(h,f){switch(h){case"compositionend":return Eu(f);case"keypress":return f.which!==32?null:(Qa=!0,Dl);case"textInput":return h=f.data,h===Dl&&Qa?null:h;default:return null}}function Kf(h,f){if(Za)return h==="compositionend"||!Un&&Ja(h,f)?(h=Uc(),Ji=ul=ga=null,Za=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return vo&&f.locale!=="ko"?null:f.data;default:return null}}var Au={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ks(h){var f=h&&h.nodeName&&h.nodeName.toLowerCase();return f==="input"?!!Au[h.type]:f==="textarea"}function Op(h,f,x,C){Jr(C),f=$p(f,"onChange"),0<f.length&&(x=new Me("onChange","change",null,x,C),h.push({event:x,listeners:f}))}var wo=null,_o=null;function yh(h){Jf(h,0)}function Nu(h){var f=Sd(h);if(ne(f))return h}function vh(h,f){if(h==="change")return f}var xd=!1;if(o){var $c;if(o){var qc="oninput"in document;if(!qc){var cc=document.createElement("div");cc.setAttribute("oninput","return;"),qc=typeof cc.oninput=="function"}$c=qc}else $c=!1;xd=$c&&(!document.documentMode||9<document.documentMode)}function wh(){wo&&(wo.detachEvent("onpropertychange",bo),_o=wo=null)}function bo(h){if(h.propertyName==="value"&&Nu(_o)){var f=[];Op(f,_o,h,Cr(h)),vr(yh,f)}}function uc(h,f,x){h==="focusin"?(wh(),wo=f,_o=x,wo.attachEvent("onpropertychange",bo)):h==="focusout"&&wh()}function ys(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Nu(_o)}function vs(h,f){if(h==="click")return Nu(f)}function ai(h,f){if(h==="input"||h==="change")return Nu(f)}function oi(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var Fi=typeof Object.is=="function"?Object.is:oi;function dc(h,f){if(Fi(h,f))return!0;if(typeof h!="object"||h===null||typeof f!="object"||f===null)return!1;var x=Object.keys(h),C=Object.keys(f);if(x.length!==C.length)return!1;for(C=0;C<x.length;C++){var O=x[C];if(!l.call(f,O)||!Fi(h[O],f[O]))return!1}return!0}function Ol(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function _h(h,f){var x=Ol(h);h=0;for(var C;x;){if(x.nodeType===3){if(C=h+x.textContent.length,h<=f&&C>=f)return{node:x,offset:f-h};h=C}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Ol(x)}}function ag(h,f){return h&&f?h===f?!0:h&&h.nodeType===3?!1:f&&f.nodeType===3?ag(h,f.parentNode):"contains"in h?h.contains(f):h.compareDocumentPosition?!!(h.compareDocumentPosition(f)&16):!1:!1}function og(){for(var h=window,f=we();f instanceof h.HTMLIFrameElement;){try{var x=typeof f.contentWindow.location.href=="string"}catch{x=!1}if(x)h=f.contentWindow;else break;f=we(h.document)}return f}function Mp(h){var f=h&&h.nodeName&&h.nodeName.toLowerCase();return f&&(f==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||f==="textarea"||h.contentEditable==="true")}function Ey(h){var f=og(),x=h.focusedElem,C=h.selectionRange;if(f!==x&&x&&x.ownerDocument&&ag(x.ownerDocument.documentElement,x)){if(C!==null&&Mp(x)){if(f=C.start,h=C.end,h===void 0&&(h=f),"selectionStart"in x)x.selectionStart=f,x.selectionEnd=Math.min(h,x.value.length);else if(h=(f=x.ownerDocument||document)&&f.defaultView||window,h.getSelection){h=h.getSelection();var O=x.textContent.length,Y=Math.min(C.start,O);C=C.end===void 0?Y:Math.min(C.end,O),!h.extend&&Y>C&&(O=C,C=Y,Y=O),O=_h(x,Y);var ue=_h(x,C);O&&ue&&(h.rangeCount!==1||h.anchorNode!==O.node||h.anchorOffset!==O.offset||h.focusNode!==ue.node||h.focusOffset!==ue.offset)&&(f=f.createRange(),f.setStart(O.node,O.offset),h.removeAllRanges(),Y>C?(h.addRange(f),h.extend(ue.node,ue.offset)):(f.setEnd(ue.node,ue.offset),h.addRange(f)))}}for(f=[],h=x;h=h.parentNode;)h.nodeType===1&&f.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<f.length;x++)h=f[x],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var Cy=o&&"documentMode"in document&&11>=document.documentMode,yd=null,Bp=null,bh=null,Vp=!1;function lg(h,f,x){var C=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Vp||yd==null||yd!==we(C)||(C=yd,"selectionStart"in C&&Mp(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),bh&&dc(bh,C)||(bh=C,C=$p(Bp,"onSelect"),0<C.length&&(f=new Me("onSelect","select",null,f,x),h.push({event:f,listeners:C}),f.target=yd)))}function Yf(h,f){var x={};return x[h.toLowerCase()]=f.toLowerCase(),x["Webkit"+h]="webkit"+f,x["Moz"+h]="moz"+f,x}var vd={animationend:Yf("Animation","AnimationEnd"),animationiteration:Yf("Animation","AnimationIteration"),animationstart:Yf("Animation","AnimationStart"),transitionend:Yf("Transition","TransitionEnd")},wd={},cg={};o&&(cg=document.createElement("div").style,"AnimationEvent"in window||(delete vd.animationend.animation,delete vd.animationiteration.animation,delete vd.animationstart.animation),"TransitionEvent"in window||delete vd.transitionend.transition);function Xf(h){if(wd[h])return wd[h];if(!vd[h])return h;var f=vd[h],x;for(x in f)if(f.hasOwnProperty(x)&&x in cg)return wd[h]=f[x];return h}var ug=Xf("animationend"),dg=Xf("animationiteration"),hg=Xf("animationstart"),fg=Xf("transitionend"),pg=new Map,mg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hc(h,f){pg.set(h,f),i(f,[h])}for(var kh=0;kh<mg.length;kh++){var eo=mg[kh],hl=eo.toLowerCase(),Up=eo[0].toUpperCase()+eo.slice(1);hc(hl,"on"+Up)}hc(ug,"onAnimationEnd"),hc(dg,"onAnimationIteration"),hc(hg,"onAnimationStart"),hc("dblclick","onDoubleClick"),hc("focusin","onFocus"),hc("focusout","onBlur"),hc(fg,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ay=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tu));function Qf(h,f,x){var C=h.type||"unknown-event";h.currentTarget=x,Pe(C,f,void 0,h),h.currentTarget=null}function Jf(h,f){f=(f&4)!==0;for(var x=0;x<h.length;x++){var C=h[x],O=C.event;C=C.listeners;e:{var Y=void 0;if(f)for(var ue=C.length-1;0<=ue;ue--){var De=C[ue],Ue=De.instance,pt=De.currentTarget;if(De=De.listener,Ue!==Y&&O.isPropagationStopped())break e;Qf(O,De,pt),Y=Ue}else for(ue=0;ue<C.length;ue++){if(De=C[ue],Ue=De.instance,pt=De.currentTarget,De=De.listener,Ue!==Y&&O.isPropagationStopped())break e;Qf(O,De,pt),Y=Ue}}}if(ce)throw h=Te,ce=!1,Te=null,h}function is(h,f){var x=f[So];x===void 0&&(x=f[So]=new Set);var C=h+"__bubble";x.has(C)||(Zf(f,h,2,!1),x.add(C))}function zp(h,f,x){var C=0;f&&(C|=4),Zf(x,h,C,f)}var Sh="_reactListening"+Math.random().toString(36).slice(2);function _d(h){if(!h[Sh]){h[Sh]=!0,n.forEach(function(x){x!=="selectionchange"&&(Ay.has(x)||zp(x,!1,h),zp(x,!0,h))});var f=h.nodeType===9?h:h.ownerDocument;f===null||f[Sh]||(f[Sh]=!0,zp("selectionchange",!1,f))}}function Zf(h,f,x,C){switch(lc(f)){case 1:var O=Zn;break;case 4:O=md;break;default:O=jl}x=O.bind(null,f,x,h),O=void 0,!Ri||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(O=!0),C?O!==void 0?h.addEventListener(f,x,{capture:!0,passive:O}):h.addEventListener(f,x,!0):O!==void 0?h.addEventListener(f,x,{passive:O}):h.addEventListener(f,x,!1)}function e0(h,f,x,C,O){var Y=C;if((f&1)===0&&(f&2)===0&&C!==null)e:for(;;){if(C===null)return;var ue=C.tag;if(ue===3||ue===4){var De=C.stateNode.containerInfo;if(De===O||De.nodeType===8&&De.parentNode===O)break;if(ue===4)for(ue=C.return;ue!==null;){var Ue=ue.tag;if((Ue===3||Ue===4)&&(Ue=ue.stateNode.containerInfo,Ue===O||Ue.nodeType===8&&Ue.parentNode===O))return;ue=ue.return}for(;De!==null;){if(ue=Iu(De),ue===null)return;if(Ue=ue.tag,Ue===5||Ue===6){C=Y=ue;continue e}De=De.parentNode}}C=C.return}vr(function(){var pt=Y,Ft=Cr(x),Mt=[];e:{var jt=pg.get(h);if(jt!==void 0){var sr=Me,fr=h;switch(h){case"keypress":if(Zi(x)===0)break e;case"keydown":case"keyup":sr=q;break;case"focusin":fr="focus",sr=Fn;break;case"focusout":fr="blur",sr=Fn;break;case"beforeblur":case"afterblur":sr=Fn;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":sr=Mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":sr=xs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":sr=gt;break;case ug:case dg:case hg:sr=es;break;case fg:sr=On;break;case"scroll":sr=bt;break;case"wheel":sr=dn;break;case"copy":case"cut":case"paste":sr=dl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":sr=ye}var xr=(f&4)!==0,Mi=!xr&&h==="scroll",st=xr?jt!==null?jt+"Capture":null:jt;xr=[];for(var qe=pt,ct;qe!==null;){ct=qe;var qt=ct.stateNode;if(ct.tag===5&&qt!==null&&(ct=qt,st!==null&&(qt=Nn(qe,st),qt!=null&&xr.push(t0(qe,qt,ct)))),Mi)break;qe=qe.return}0<xr.length&&(jt=new sr(jt,fr,null,x,Ft),Mt.push({event:jt,listeners:xr}))}}if((f&7)===0){e:{if(jt=h==="mouseover"||h==="pointerover",sr=h==="mouseout"||h==="pointerout",jt&&x!==Sr&&(fr=x.relatedTarget||x.fromElement)&&(Iu(fr)||fr[Ra]))break e;if((sr||jt)&&(jt=Ft.window===Ft?Ft:(jt=Ft.ownerDocument)?jt.defaultView||jt.parentWindow:window,sr?(fr=x.relatedTarget||x.toElement,sr=pt,fr=fr?Iu(fr):null,fr!==null&&(Mi=Ie(fr),fr!==Mi||fr.tag!==5&&fr.tag!==6)&&(fr=null)):(sr=null,fr=pt),sr!==fr)){if(xr=Mr,qt="onMouseLeave",st="onMouseEnter",qe="mouse",(h==="pointerout"||h==="pointerover")&&(xr=ye,qt="onPointerLeave",st="onPointerEnter",qe="pointer"),Mi=sr==null?jt:Sd(sr),ct=fr==null?jt:Sd(fr),jt=new xr(qt,qe+"leave",sr,x,Ft),jt.target=Mi,jt.relatedTarget=ct,qt=null,Iu(Ft)===pt&&(xr=new xr(st,qe+"enter",fr,x,Ft),xr.target=ct,xr.relatedTarget=Mi,qt=xr),Mi=qt,sr&&fr)t:{for(xr=sr,st=fr,qe=0,ct=xr;ct;ct=bd(ct))qe++;for(ct=0,qt=st;qt;qt=bd(qt))ct++;for(;0<qe-ct;)xr=bd(xr),qe--;for(;0<ct-qe;)st=bd(st),ct--;for(;qe--;){if(xr===st||st!==null&&xr===st.alternate)break t;xr=bd(xr),st=bd(st)}xr=null}else xr=null;sr!==null&&Ny(Mt,jt,sr,xr,!1),fr!==null&&Mi!==null&&Ny(Mt,Mi,fr,xr,!0)}}e:{if(jt=pt?Sd(pt):window,sr=jt.nodeName&&jt.nodeName.toLowerCase(),sr==="select"||sr==="input"&&jt.type==="file")var wr=vh;else if(Ks(jt))if(xd)wr=ai;else{wr=ys;var Rr=uc}else(sr=jt.nodeName)&&sr.toLowerCase()==="input"&&(jt.type==="checkbox"||jt.type==="radio")&&(wr=vs);if(wr&&(wr=wr(h,pt))){Op(Mt,wr,x,Ft);break e}Rr&&Rr(h,jt,pt),h==="focusout"&&(Rr=jt._wrapperState)&&Rr.controlled&&jt.type==="number"&&Be(jt,"number",jt.value)}switch(Rr=pt?Sd(pt):window,h){case"focusin":(Ks(Rr)||Rr.contentEditable==="true")&&(yd=Rr,Bp=pt,bh=null);break;case"focusout":bh=Bp=yd=null;break;case"mousedown":Vp=!0;break;case"contextmenu":case"mouseup":case"dragend":Vp=!1,lg(Mt,x,Ft);break;case"selectionchange":if(Cy)break;case"keydown":case"keyup":lg(Mt,x,Ft)}var Lr;if(Un)e:{switch(h){case"compositionstart":var Wr="onCompositionStart";break e;case"compositionend":Wr="onCompositionEnd";break e;case"compositionupdate":Wr="onCompositionUpdate";break e}Wr=void 0}else Za?Ja(h,x)&&(Wr="onCompositionEnd"):h==="keydown"&&x.keyCode===229&&(Wr="onCompositionStart");Wr&&(vo&&x.locale!=="ko"&&(Za||Wr!=="onCompositionStart"?Wr==="onCompositionEnd"&&Za&&(Lr=Uc()):(ga=Ft,ul="value"in ga?ga.value:ga.textContent,Za=!0)),Rr=$p(pt,Wr),0<Rr.length&&(Wr=new gd(Wr,h,null,x,Ft),Mt.push({event:Wr,listeners:Rr}),Lr?Wr.data=Lr:(Lr=Eu(x),Lr!==null&&(Wr.data=Lr)))),(Lr=xa?Cu(h,x):Kf(h,x))&&(pt=$p(pt,"onBeforeInput"),0<pt.length&&(Ft=new gd("onBeforeInput","beforeinput",null,x,Ft),Mt.push({event:Ft,listeners:pt}),Ft.data=Lr))}Jf(Mt,f)})}function t0(h,f,x){return{instance:h,listener:f,currentTarget:x}}function $p(h,f){for(var x=f+"Capture",C=[];h!==null;){var O=h,Y=O.stateNode;O.tag===5&&Y!==null&&(O=Y,Y=Nn(h,x),Y!=null&&C.unshift(t0(h,Y,O)),Y=Nn(h,f),Y!=null&&C.push(t0(h,Y,O))),h=h.return}return C}function bd(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function Ny(h,f,x,C,O){for(var Y=f._reactName,ue=[];x!==null&&x!==C;){var De=x,Ue=De.alternate,pt=De.stateNode;if(Ue!==null&&Ue===C)break;De.tag===5&&pt!==null&&(De=pt,O?(Ue=Nn(x,Y),Ue!=null&&ue.unshift(t0(x,Ue,De))):O||(Ue=Nn(x,Y),Ue!=null&&ue.push(t0(x,Ue,De)))),x=x.return}ue.length!==0&&h.push({event:f,listeners:ue})}var y4=/\r\n?/g,v4=/\u0000|\uFFFD/g;function Ty(h){return(typeof h=="string"?h:""+h).replace(y4,`
`).replace(v4,"")}function qp(h,f,x){if(f=Ty(f),Ty(h)!==f&&x)throw Error(r(425))}function Eh(){}var r0=null,kd=null;function gg(h,f){return h==="textarea"||h==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var xg=typeof setTimeout=="function"?setTimeout:void 0,Iy=typeof clearTimeout=="function"?clearTimeout:void 0,Py=typeof Promise=="function"?Promise:void 0,w4=typeof queueMicrotask=="function"?queueMicrotask:typeof Py<"u"?function(h){return Py.resolve(null).then(h).catch(_4)}:xg;function _4(h){setTimeout(function(){throw h})}function yg(h,f){var x=f,C=0;do{var O=x.nextSibling;if(h.removeChild(x),O&&O.nodeType===8)if(x=O.data,x==="/$"){if(C===0){h.removeChild(O),Ia(f);return}C--}else x!=="$"&&x!=="$?"&&x!=="$!"||C++;x=O}while(x);Ia(f)}function to(h){for(;h!=null;h=h.nextSibling){var f=h.nodeType;if(f===1||f===3)break;if(f===8){if(f=h.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return h}function fl(h){h=h.previousSibling;for(var f=0;h;){if(h.nodeType===8){var x=h.data;if(x==="$"||x==="$!"||x==="$?"){if(f===0)return h;f--}else x==="/$"&&f++}h=h.previousSibling}return null}var ko=Math.random().toString(36).slice(2),fc="__reactFiber$"+ko,Ch="__reactProps$"+ko,Ra="__reactContainer$"+ko,So="__reactEvents$"+ko,b4="__reactListeners$"+ko,k4="__reactHandles$"+ko;function Iu(h){var f=h[fc];if(f)return f;for(var x=h.parentNode;x;){if(f=x[Ra]||x[fc]){if(x=f.alternate,f.child!==null||x!==null&&x.child!==null)for(h=fl(h);h!==null;){if(x=h[fc])return x;h=fl(h)}return f}h=x,x=h.parentNode}return null}function Ah(h){return h=h[fc]||h[Ra],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function Sd(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(r(33))}function n0(h){return h[Ch]||null}var vg=[],Hc=-1;function Ml(h){return{current:h}}function Xn(h){0>Hc||(h.current=vg[Hc],vg[Hc]=null,Hc--)}function ts(h,f){Hc++,vg[Hc]=h.current,h.current=f}var Pu={},ya=Ml(Pu),Eo=Ml(!1),Ed=Pu;function Nh(h,f){var x=h.type.contextTypes;if(!x)return Pu;var C=h.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===f)return C.__reactInternalMemoizedMaskedChildContext;var O={},Y;for(Y in x)O[Y]=f[Y];return C&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=f,h.__reactInternalMemoizedMaskedChildContext=O),O}function Co(h){return h=h.childContextTypes,h!=null}function Hp(){Xn(Eo),Xn(ya)}function Ry(h,f,x){if(ya.current!==Pu)throw Error(r(168));ts(ya,f),ts(Eo,x)}function wg(h,f,x){var C=h.stateNode;if(f=f.childContextTypes,typeof C.getChildContext!="function")return x;C=C.getChildContext();for(var O in C)if(!(O in f))throw Error(r(108,ve(h)||"Unknown",O));return te({},x,C)}function Cd(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Pu,Ed=ya.current,ts(ya,h),ts(Eo,Eo.current),!0}function Ly(h,f,x){var C=h.stateNode;if(!C)throw Error(r(169));x?(h=wg(h,f,Ed),C.__reactInternalMemoizedMergedChildContext=h,Xn(Eo),Xn(ya),ts(ya,h)):Xn(Eo),ts(Eo,x)}var Wc=null,s0=!1,b=!1;function N(h){Wc===null?Wc=[h]:Wc.push(h)}function z(h){s0=!0,N(h)}function Q(){if(!b&&Wc!==null){b=!0;var h=0,f=on;try{var x=Wc;for(on=1;h<x.length;h++){var C=x[h];do C=C(!0);while(C!==null)}Wc=null,s0=!1}catch(O){throw Wc!==null&&(Wc=Wc.slice(h+1)),Tt(Xr,Q),O}finally{on=f,b=!1}}return null}var se=[],de=0,me=null,ge=0,_e=[],Ce=0,Ve=null,nt=1,Ne="";function $e(h,f){se[de++]=ge,se[de++]=me,me=h,ge=f}function Ze(h,f,x){_e[Ce++]=nt,_e[Ce++]=Ne,_e[Ce++]=Ve,Ve=h;var C=nt;h=Ne;var O=32-Qt(C)-1;C&=~(1<<O),x+=1;var Y=32-Qt(f)+O;if(30<Y){var ue=O-O%5;Y=(C&(1<<ue)-1).toString(32),C>>=ue,O-=ue,nt=1<<32-Qt(f)+O|x<<O|C,Ne=Y+h}else nt=1<<Y|x<<O|C,Ne=h}function wt(h){h.return!==null&&($e(h,1),Ze(h,1,0))}function it(h){for(;h===me;)me=se[--de],se[de]=null,ge=se[--de],se[de]=null;for(;h===Ve;)Ve=_e[--Ce],_e[Ce]=null,Ne=_e[--Ce],_e[Ce]=null,nt=_e[--Ce],_e[Ce]=null}var xt=null,vt=null,kt=!1,St=null;function yr(h,f){var x=yc(5,null,null,0);x.elementType="DELETED",x.stateNode=f,x.return=h,f=h.deletions,f===null?(h.deletions=[x],h.flags|=16):f.push(x)}function or(h,f){switch(h.tag){case 5:var x=h.type;return f=f.nodeType!==1||x.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(h.stateNode=f,xt=h,vt=to(f.firstChild),!0):!1;case 6:return f=h.pendingProps===""||f.nodeType!==3?null:f,f!==null?(h.stateNode=f,xt=h,vt=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(x=Ve!==null?{id:nt,overflow:Ne}:null,h.memoizedState={dehydrated:f,treeContext:x,retryLane:1073741824},x=yc(18,null,null,0),x.stateNode=f,x.return=h,h.child=x,xt=h,vt=null,!0):!1;default:return!1}}function Qr(h){return(h.mode&1)!==0&&(h.flags&128)===0}function dr(h){if(kt){var f=vt;if(f){var x=f;if(!or(h,f)){if(Qr(h))throw Error(r(418));f=to(x.nextSibling);var C=xt;f&&or(h,f)?yr(C,x):(h.flags=h.flags&-4097|2,kt=!1,xt=h)}}else{if(Qr(h))throw Error(r(418));h.flags=h.flags&-4097|2,kt=!1,xt=h}}}function xn(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;xt=h}function Ys(h){if(h!==xt)return!1;if(!kt)return xn(h),kt=!0,!1;var f;if((f=h.tag!==3)&&!(f=h.tag!==5)&&(f=h.type,f=f!=="head"&&f!=="body"&&!gg(h.type,h.memoizedProps)),f&&(f=vt)){if(Qr(h))throw Zr(),Error(r(418));for(;f;)yr(h,f),f=to(f.nextSibling)}if(xn(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));e:{for(h=h.nextSibling,f=0;h;){if(h.nodeType===8){var x=h.data;if(x==="/$"){if(f===0){vt=to(h.nextSibling);break e}f--}else x!=="$"&&x!=="$!"&&x!=="$?"||f++}h=h.nextSibling}vt=null}}else vt=xt?to(h.stateNode.nextSibling):null;return!0}function Zr(){for(var h=vt;h;)h=to(h.nextSibling)}function lr(){vt=xt=null,kt=!1}function Kt(h){St===null?St=[h]:St.push(h)}var li=M.ReactCurrentBatchConfig;function Br(h,f,x){if(h=x.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(r(309));var C=x.stateNode}if(!C)throw Error(r(147,h));var O=C,Y=""+h;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===Y?f.ref:(f=function(ue){var De=O.refs;ue===null?delete De[Y]:De[Y]=ue},f._stringRef=Y,f)}if(typeof h!="string")throw Error(r(284));if(!x._owner)throw Error(r(290,h))}return h}function hn(h,f){throw h=Object.prototype.toString.call(f),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":h))}function ws(h){var f=h._init;return f(h._payload)}function ea(h){function f(st,qe){if(h){var ct=st.deletions;ct===null?(st.deletions=[qe],st.flags|=16):ct.push(qe)}}function x(st,qe){if(!h)return null;for(;qe!==null;)f(st,qe),qe=qe.sibling;return null}function C(st,qe){for(st=new Map;qe!==null;)qe.key!==null?st.set(qe.key,qe):st.set(qe.index,qe),qe=qe.sibling;return st}function O(st,qe){return st=Mh(st,qe),st.index=0,st.sibling=null,st}function Y(st,qe,ct){return st.index=ct,h?(ct=st.alternate,ct!==null?(ct=ct.index,ct<qe?(st.flags|=2,qe):ct):(st.flags|=2,qe)):(st.flags|=1048576,qe)}function ue(st){return h&&st.alternate===null&&(st.flags|=2),st}function De(st,qe,ct,qt){return qe===null||qe.tag!==6?(qe=J4(ct,st.mode,qt),qe.return=st,qe):(qe=O(qe,ct),qe.return=st,qe)}function Ue(st,qe,ct,qt){var wr=ct.type;return wr===L?Ft(st,qe,ct.props.children,qt,ct.key):qe!==null&&(qe.elementType===wr||typeof wr=="object"&&wr!==null&&wr.$$typeof===xe&&ws(wr)===qe.type)?(qt=O(qe,ct.props),qt.ref=Br(st,qe,ct),qt.return=st,qt):(qt=Zy(ct.type,ct.key,ct.props,null,st.mode,qt),qt.ref=Br(st,qe,ct),qt.return=st,qt)}function pt(st,qe,ct,qt){return qe===null||qe.tag!==4||qe.stateNode.containerInfo!==ct.containerInfo||qe.stateNode.implementation!==ct.implementation?(qe=Z4(ct,st.mode,qt),qe.return=st,qe):(qe=O(qe,ct.children||[]),qe.return=st,qe)}function Ft(st,qe,ct,qt,wr){return qe===null||qe.tag!==7?(qe=h0(ct,st.mode,qt,wr),qe.return=st,qe):(qe=O(qe,ct),qe.return=st,qe)}function Mt(st,qe,ct){if(typeof qe=="string"&&qe!==""||typeof qe=="number")return qe=J4(""+qe,st.mode,ct),qe.return=st,qe;if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case K:return ct=Zy(qe.type,qe.key,qe.props,null,st.mode,ct),ct.ref=Br(st,null,qe),ct.return=st,ct;case W:return qe=Z4(qe,st.mode,ct),qe.return=st,qe;case xe:var qt=qe._init;return Mt(st,qt(qe._payload),ct)}if(He(qe)||H(qe))return qe=h0(qe,st.mode,ct,null),qe.return=st,qe;hn(st,qe)}return null}function jt(st,qe,ct,qt){var wr=qe!==null?qe.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number")return wr!==null?null:De(st,qe,""+ct,qt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case K:return ct.key===wr?Ue(st,qe,ct,qt):null;case W:return ct.key===wr?pt(st,qe,ct,qt):null;case xe:return wr=ct._init,jt(st,qe,wr(ct._payload),qt)}if(He(ct)||H(ct))return wr!==null?null:Ft(st,qe,ct,qt,null);hn(st,ct)}return null}function sr(st,qe,ct,qt,wr){if(typeof qt=="string"&&qt!==""||typeof qt=="number")return st=st.get(ct)||null,De(qe,st,""+qt,wr);if(typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case K:return st=st.get(qt.key===null?ct:qt.key)||null,Ue(qe,st,qt,wr);case W:return st=st.get(qt.key===null?ct:qt.key)||null,pt(qe,st,qt,wr);case xe:var Rr=qt._init;return sr(st,qe,ct,Rr(qt._payload),wr)}if(He(qt)||H(qt))return st=st.get(ct)||null,Ft(qe,st,qt,wr,null);hn(qe,qt)}return null}function fr(st,qe,ct,qt){for(var wr=null,Rr=null,Lr=qe,Wr=qe=0,Oa=null;Lr!==null&&Wr<ct.length;Wr++){Lr.index>Wr?(Oa=Lr,Lr=null):Oa=Lr.sibling;var Kn=jt(st,Lr,ct[Wr],qt);if(Kn===null){Lr===null&&(Lr=Oa);break}h&&Lr&&Kn.alternate===null&&f(st,Lr),qe=Y(Kn,qe,Wr),Rr===null?wr=Kn:Rr.sibling=Kn,Rr=Kn,Lr=Oa}if(Wr===ct.length)return x(st,Lr),kt&&$e(st,Wr),wr;if(Lr===null){for(;Wr<ct.length;Wr++)Lr=Mt(st,ct[Wr],qt),Lr!==null&&(qe=Y(Lr,qe,Wr),Rr===null?wr=Lr:Rr.sibling=Lr,Rr=Lr);return kt&&$e(st,Wr),wr}for(Lr=C(st,Lr);Wr<ct.length;Wr++)Oa=sr(Lr,st,Wr,ct[Wr],qt),Oa!==null&&(h&&Oa.alternate!==null&&Lr.delete(Oa.key===null?Wr:Oa.key),qe=Y(Oa,qe,Wr),Rr===null?wr=Oa:Rr.sibling=Oa,Rr=Oa);return h&&Lr.forEach(function(Bh){return f(st,Bh)}),kt&&$e(st,Wr),wr}function xr(st,qe,ct,qt){var wr=H(ct);if(typeof wr!="function")throw Error(r(150));if(ct=wr.call(ct),ct==null)throw Error(r(151));for(var Rr=wr=null,Lr=qe,Wr=qe=0,Oa=null,Kn=ct.next();Lr!==null&&!Kn.done;Wr++,Kn=ct.next()){Lr.index>Wr?(Oa=Lr,Lr=null):Oa=Lr.sibling;var Bh=jt(st,Lr,Kn.value,qt);if(Bh===null){Lr===null&&(Lr=Oa);break}h&&Lr&&Bh.alternate===null&&f(st,Lr),qe=Y(Bh,qe,Wr),Rr===null?wr=Bh:Rr.sibling=Bh,Rr=Bh,Lr=Oa}if(Kn.done)return x(st,Lr),kt&&$e(st,Wr),wr;if(Lr===null){for(;!Kn.done;Wr++,Kn=ct.next())Kn=Mt(st,Kn.value,qt),Kn!==null&&(qe=Y(Kn,qe,Wr),Rr===null?wr=Kn:Rr.sibling=Kn,Rr=Kn);return kt&&$e(st,Wr),wr}for(Lr=C(st,Lr);!Kn.done;Wr++,Kn=ct.next())Kn=sr(Lr,st,Wr,Kn.value,qt),Kn!==null&&(h&&Kn.alternate!==null&&Lr.delete(Kn.key===null?Wr:Kn.key),qe=Y(Kn,qe,Wr),Rr===null?wr=Kn:Rr.sibling=Kn,Rr=Kn);return h&&Lr.forEach(function(CG){return f(st,CG)}),kt&&$e(st,Wr),wr}function Mi(st,qe,ct,qt){if(typeof ct=="object"&&ct!==null&&ct.type===L&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case K:e:{for(var wr=ct.key,Rr=qe;Rr!==null;){if(Rr.key===wr){if(wr=ct.type,wr===L){if(Rr.tag===7){x(st,Rr.sibling),qe=O(Rr,ct.props.children),qe.return=st,st=qe;break e}}else if(Rr.elementType===wr||typeof wr=="object"&&wr!==null&&wr.$$typeof===xe&&ws(wr)===Rr.type){x(st,Rr.sibling),qe=O(Rr,ct.props),qe.ref=Br(st,Rr,ct),qe.return=st,st=qe;break e}x(st,Rr);break}else f(st,Rr);Rr=Rr.sibling}ct.type===L?(qe=h0(ct.props.children,st.mode,qt,ct.key),qe.return=st,st=qe):(qt=Zy(ct.type,ct.key,ct.props,null,st.mode,qt),qt.ref=Br(st,qe,ct),qt.return=st,st=qt)}return ue(st);case W:e:{for(Rr=ct.key;qe!==null;){if(qe.key===Rr)if(qe.tag===4&&qe.stateNode.containerInfo===ct.containerInfo&&qe.stateNode.implementation===ct.implementation){x(st,qe.sibling),qe=O(qe,ct.children||[]),qe.return=st,st=qe;break e}else{x(st,qe);break}else f(st,qe);qe=qe.sibling}qe=Z4(ct,st.mode,qt),qe.return=st,st=qe}return ue(st);case xe:return Rr=ct._init,Mi(st,qe,Rr(ct._payload),qt)}if(He(ct))return fr(st,qe,ct,qt);if(H(ct))return xr(st,qe,ct,qt);hn(st,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"?(ct=""+ct,qe!==null&&qe.tag===6?(x(st,qe.sibling),qe=O(qe,ct),qe.return=st,st=qe):(x(st,qe),qe=J4(ct,st.mode,qt),qe.return=st,st=qe),ue(st)):x(st,qe)}return Mi}var yi=ea(!0),Os=ea(!1),Di=Ml(null),ta=null,Ls=null,Cn=null;function zn(){Cn=Ls=ta=null}function js(h){var f=Di.current;Xn(Di),h._currentValue=f}function $n(h,f,x){for(;h!==null;){var C=h.alternate;if((h.childLanes&f)!==f?(h.childLanes|=f,C!==null&&(C.childLanes|=f)):C!==null&&(C.childLanes&f)!==f&&(C.childLanes|=f),h===x)break;h=h.return}}function Xs(h,f){ta=h,Cn=Ls=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&f)!==0&&(ml=!0),h.firstContext=null)}function Qs(h){var f=h._currentValue;if(Cn!==h)if(h={context:h,memoizedValue:f,next:null},Ls===null){if(ta===null)throw Error(r(308));Ls=h,ta.dependencies={lanes:0,firstContext:h}}else Ls=Ls.next=h;return f}var as=null;function La(h){as===null?as=[h]:as.push(h)}function rs(h,f,x,C){var O=f.interleaved;return O===null?(x.next=x,La(f)):(x.next=O.next,O.next=x),f.interleaved=x,os(h,C)}function os(h,f){h.lanes|=f;var x=h.alternate;for(x!==null&&(x.lanes|=f),x=h,h=h.return;h!==null;)h.childLanes|=f,x=h.alternate,x!==null&&(x.childLanes|=f),x=h,h=h.return;return x.tag===3?x.stateNode:null}var vi=!1;function va(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ao(h,f){h=h.updateQueue,f.updateQueue===h&&(f.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function ci(h,f){return{eventTime:h,lane:f,tag:0,payload:null,callback:null,next:null}}function ui(h,f,x){var C=h.updateQueue;if(C===null)return null;if(C=C.shared,(qn&2)!==0){var O=C.pending;return O===null?f.next=f:(f.next=O.next,O.next=f),C.pending=f,os(h,x)}return O=C.interleaved,O===null?(f.next=f,La(C)):(f.next=O.next,O.next=f),C.interleaved=f,os(h,x)}function ja(h,f,x){if(f=f.updateQueue,f!==null&&(f=f.shared,(x&4194240)!==0)){var C=f.lanes;C&=h.pendingLanes,x|=C,f.lanes=x,Il(h,x)}}function ls(h,f){var x=h.updateQueue,C=h.alternate;if(C!==null&&(C=C.updateQueue,x===C)){var O=null,Y=null;if(x=x.firstBaseUpdate,x!==null){do{var ue={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};Y===null?O=Y=ue:Y=Y.next=ue,x=x.next}while(x!==null);Y===null?O=Y=f:Y=Y.next=f}else O=Y=f;x={baseState:C.baseState,firstBaseUpdate:O,lastBaseUpdate:Y,shared:C.shared,effects:C.effects},h.updateQueue=x;return}h=x.lastBaseUpdate,h===null?x.firstBaseUpdate=f:h.next=f,x.lastBaseUpdate=f}function Fa(h,f,x,C){var O=h.updateQueue;vi=!1;var Y=O.firstBaseUpdate,ue=O.lastBaseUpdate,De=O.shared.pending;if(De!==null){O.shared.pending=null;var Ue=De,pt=Ue.next;Ue.next=null,ue===null?Y=pt:ue.next=pt,ue=Ue;var Ft=h.alternate;Ft!==null&&(Ft=Ft.updateQueue,De=Ft.lastBaseUpdate,De!==ue&&(De===null?Ft.firstBaseUpdate=pt:De.next=pt,Ft.lastBaseUpdate=Ue))}if(Y!==null){var Mt=O.baseState;ue=0,Ft=pt=Ue=null,De=Y;do{var jt=De.lane,sr=De.eventTime;if((C&jt)===jt){Ft!==null&&(Ft=Ft.next={eventTime:sr,lane:0,tag:De.tag,payload:De.payload,callback:De.callback,next:null});e:{var fr=h,xr=De;switch(jt=f,sr=x,xr.tag){case 1:if(fr=xr.payload,typeof fr=="function"){Mt=fr.call(sr,Mt,jt);break e}Mt=fr;break e;case 3:fr.flags=fr.flags&-65537|128;case 0:if(fr=xr.payload,jt=typeof fr=="function"?fr.call(sr,Mt,jt):fr,jt==null)break e;Mt=te({},Mt,jt);break e;case 2:vi=!0}}De.callback!==null&&De.lane!==0&&(h.flags|=64,jt=O.effects,jt===null?O.effects=[De]:jt.push(De))}else sr={eventTime:sr,lane:jt,tag:De.tag,payload:De.payload,callback:De.callback,next:null},Ft===null?(pt=Ft=sr,Ue=Mt):Ft=Ft.next=sr,ue|=jt;if(De=De.next,De===null){if(De=O.shared.pending,De===null)break;jt=De,De=jt.next,jt.next=null,O.lastBaseUpdate=jt,O.shared.pending=null}}while(!0);if(Ft===null&&(Ue=Mt),O.baseState=Ue,O.firstBaseUpdate=pt,O.lastBaseUpdate=Ft,f=O.shared.interleaved,f!==null){O=f;do ue|=O.lane,O=O.next;while(O!==f)}else Y===null&&(O.shared.lanes=0);l0|=ue,h.lanes=ue,h.memoizedState=Mt}}function pl(h,f,x){if(h=f.effects,f.effects=null,h!==null)for(f=0;f<h.length;f++){var C=h[f],O=C.callback;if(O!==null){if(C.callback=null,C=x,typeof O!="function")throw Error(r(191,O));O.call(C)}}}var Bl={},ra=Ml(Bl),di=Ml(Bl),Ru=Ml(Bl);function Gc(h){if(h===Bl)throw Error(r(174));return h}function Th(h,f){switch(ts(Ru,f),ts(di,h),ts(ra,Bl),h=f.nodeType,h){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:le(null,"");break;default:h=h===8?f.parentNode:f,f=h.namespaceURI||null,h=h.tagName,f=le(f,h)}Xn(ra),ts(ra,f)}function pc(){Xn(ra),Xn(di),Xn(Ru)}function jy(h){Gc(Ru.current);var f=Gc(ra.current),x=le(f,h.type);f!==x&&(ts(di,h),ts(ra,x))}function _g(h){di.current===h&&(Xn(ra),Xn(di))}var As=Ml(0);function Vl(h){for(var f=h;f!==null;){if(f.tag===13){var x=f.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break;for(;f.sibling===null;){if(f.return===null||f.return===h)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var bg=[];function kg(){for(var h=0;h<bg.length;h++)bg[h]._workInProgressVersionPrimary=null;bg.length=0}var Wp=M.ReactCurrentDispatcher,Gp=M.ReactCurrentBatchConfig,mc=0,Fs=null,wi=null,hi=null,Ih=!1,Kc=!1,Ph=0,S4=0;function Oi(){throw Error(r(321))}function Kp(h,f){if(f===null)return!1;for(var x=0;x<f.length&&x<h.length;x++)if(!Fi(h[x],f[x]))return!1;return!0}function i0(h,f,x,C,O,Y){if(mc=Y,Fs=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Wp.current=h===null||h.memoizedState===null?JW:ZW,h=x(C,O),Kc){Y=0;do{if(Kc=!1,Ph=0,25<=Y)throw Error(r(301));Y+=1,hi=wi=null,f.updateQueue=null,Wp.current=eG,h=x(C,O)}while(Kc)}if(Wp.current=By,f=wi!==null&&wi.next!==null,mc=0,hi=wi=Fs=null,Ih=!1,f)throw Error(r(300));return h}function gc(){var h=Ph!==0;return Ph=0,h}function Ul(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?Fs.memoizedState=hi=h:hi=hi.next=h,hi}function Qo(){if(wi===null){var h=Fs.alternate;h=h!==null?h.memoizedState:null}else h=wi.next;var f=hi===null?Fs.memoizedState:hi.next;if(f!==null)hi=f,wi=h;else{if(h===null)throw Error(r(310));wi=h,h={memoizedState:wi.memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},hi===null?Fs.memoizedState=hi=h:hi=hi.next=h}return hi}function a0(h,f){return typeof f=="function"?f(h):f}function Yp(h){var f=Qo(),x=f.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=h;var C=wi,O=C.baseQueue,Y=x.pending;if(Y!==null){if(O!==null){var ue=O.next;O.next=Y.next,Y.next=ue}C.baseQueue=O=Y,x.pending=null}if(O!==null){Y=O.next,C=C.baseState;var De=ue=null,Ue=null,pt=Y;do{var Ft=pt.lane;if((mc&Ft)===Ft)Ue!==null&&(Ue=Ue.next={lane:0,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null}),C=pt.hasEagerState?pt.eagerState:h(C,pt.action);else{var Mt={lane:Ft,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null};Ue===null?(De=Ue=Mt,ue=C):Ue=Ue.next=Mt,Fs.lanes|=Ft,l0|=Ft}pt=pt.next}while(pt!==null&&pt!==Y);Ue===null?ue=C:Ue.next=De,Fi(C,f.memoizedState)||(ml=!0),f.memoizedState=C,f.baseState=ue,f.baseQueue=Ue,x.lastRenderedState=C}if(h=x.interleaved,h!==null){O=h;do Y=O.lane,Fs.lanes|=Y,l0|=Y,O=O.next;while(O!==h)}else O===null&&(x.lanes=0);return[f.memoizedState,x.dispatch]}function Lu(h){var f=Qo(),x=f.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=h;var C=x.dispatch,O=x.pending,Y=f.memoizedState;if(O!==null){x.pending=null;var ue=O=O.next;do Y=h(Y,ue.action),ue=ue.next;while(ue!==O);Fi(Y,f.memoizedState)||(ml=!0),f.memoizedState=Y,f.baseQueue===null&&(f.baseState=Y),x.lastRenderedState=Y}return[Y,C]}function Fy(){}function Sg(h,f){var x=Fs,C=Qo(),O=f(),Y=!Fi(C.memoizedState,O);if(Y&&(C.memoizedState=O,ml=!0),C=C.queue,Jp(Oy.bind(null,x,C,h),[h]),C.getSnapshot!==f||Y||hi!==null&&hi.memoizedState.tag&1){if(x.flags|=2048,Jo(9,Eg.bind(null,x,C,O,f),void 0,null),Da===null)throw Error(r(349));(mc&30)!==0||Dy(x,f,O)}return O}function Dy(h,f,x){h.flags|=16384,h={getSnapshot:f,value:x},f=Fs.updateQueue,f===null?(f={lastEffect:null,stores:null},Fs.updateQueue=f,f.stores=[h]):(x=f.stores,x===null?f.stores=[h]:x.push(h))}function Eg(h,f,x,C){f.value=x,f.getSnapshot=C,Rh(f)&&Xp(h)}function Oy(h,f,x){return x(function(){Rh(f)&&Xp(h)})}function Rh(h){var f=h.getSnapshot;h=h.value;try{var x=f();return!Fi(h,x)}catch{return!0}}function Xp(h){var f=os(h,1);f!==null&&Zc(f,h,1,-1)}function o0(h){var f=Ul();return typeof h=="function"&&(h=h()),f.memoizedState=f.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a0,lastRenderedState:h},f.queue=h,h=h.dispatch=QW.bind(null,Fs,h),[f.memoizedState,h]}function Jo(h,f,x,C){return h={tag:h,create:f,destroy:x,deps:C,next:null},f=Fs.updateQueue,f===null?(f={lastEffect:null,stores:null},Fs.updateQueue=f,f.lastEffect=h.next=h):(x=f.lastEffect,x===null?f.lastEffect=h.next=h:(C=x.next,x.next=h,h.next=C,f.lastEffect=h)),h}function Yc(){return Qo().memoizedState}function zl(h,f,x,C){var O=Ul();Fs.flags|=h,O.memoizedState=Jo(1|f,x,void 0,C===void 0?null:C)}function Ad(h,f,x,C){var O=Qo();C=C===void 0?null:C;var Y=void 0;if(wi!==null){var ue=wi.memoizedState;if(Y=ue.destroy,C!==null&&Kp(C,ue.deps)){O.memoizedState=Jo(f,x,Y,C);return}}Fs.flags|=h,O.memoizedState=Jo(1|f,x,Y,C)}function Qp(h,f){return zl(8390656,8,h,f)}function Jp(h,f){return Ad(2048,8,h,f)}function My(h,f){return Ad(4,2,h,f)}function Zp(h,f){return Ad(4,4,h,f)}function em(h,f){if(typeof f=="function")return h=h(),f(h),function(){f(null)};if(f!=null)return h=h(),f.current=h,function(){f.current=null}}function i9(h,f,x){return x=x!=null?x.concat([h]):null,Ad(4,4,em.bind(null,f,h),x)}function E4(){}function a9(h,f){var x=Qo();f=f===void 0?null:f;var C=x.memoizedState;return C!==null&&f!==null&&Kp(f,C[1])?C[0]:(x.memoizedState=[h,f],h)}function o9(h,f){var x=Qo();f=f===void 0?null:f;var C=x.memoizedState;return C!==null&&f!==null&&Kp(f,C[1])?C[0]:(h=h(),x.memoizedState=[h,f],h)}function l9(h,f,x){return(mc&21)===0?(h.baseState&&(h.baseState=!1,ml=!0),h.memoizedState=x):(Fi(x,f)||(x=Ta(),Fs.lanes|=x,l0|=x,h.baseState=!0),f)}function YW(h,f){var x=on;on=x!==0&&4>x?x:4,h(!0);var C=Gp.transition;Gp.transition={};try{h(!1),f()}finally{on=x,Gp.transition=C}}function c9(){return Qo().memoizedState}function XW(h,f,x){var C=Dh(h);if(x={lane:C,action:x,hasEagerState:!1,eagerState:null,next:null},u9(h))d9(f,x);else if(x=rs(h,f,x,C),x!==null){var O=el();Zc(x,h,C,O),h9(x,f,C)}}function QW(h,f,x){var C=Dh(h),O={lane:C,action:x,hasEagerState:!1,eagerState:null,next:null};if(u9(h))d9(f,O);else{var Y=h.alternate;if(h.lanes===0&&(Y===null||Y.lanes===0)&&(Y=f.lastRenderedReducer,Y!==null))try{var ue=f.lastRenderedState,De=Y(ue,x);if(O.hasEagerState=!0,O.eagerState=De,Fi(De,ue)){var Ue=f.interleaved;Ue===null?(O.next=O,La(f)):(O.next=Ue.next,Ue.next=O),f.interleaved=O;return}}catch{}finally{}x=rs(h,f,O,C),x!==null&&(O=el(),Zc(x,h,C,O),h9(x,f,C))}}function u9(h){var f=h.alternate;return h===Fs||f!==null&&f===Fs}function d9(h,f){Kc=Ih=!0;var x=h.pending;x===null?f.next=f:(f.next=x.next,x.next=f),h.pending=f}function h9(h,f,x){if((x&4194240)!==0){var C=f.lanes;C&=h.pendingLanes,x|=C,f.lanes=x,Il(h,x)}}var By={readContext:Qs,useCallback:Oi,useContext:Oi,useEffect:Oi,useImperativeHandle:Oi,useInsertionEffect:Oi,useLayoutEffect:Oi,useMemo:Oi,useReducer:Oi,useRef:Oi,useState:Oi,useDebugValue:Oi,useDeferredValue:Oi,useTransition:Oi,useMutableSource:Oi,useSyncExternalStore:Oi,useId:Oi,unstable_isNewReconciler:!1},JW={readContext:Qs,useCallback:function(h,f){return Ul().memoizedState=[h,f===void 0?null:f],h},useContext:Qs,useEffect:Qp,useImperativeHandle:function(h,f,x){return x=x!=null?x.concat([h]):null,zl(4194308,4,em.bind(null,f,h),x)},useLayoutEffect:function(h,f){return zl(4194308,4,h,f)},useInsertionEffect:function(h,f){return zl(4,2,h,f)},useMemo:function(h,f){var x=Ul();return f=f===void 0?null:f,h=h(),x.memoizedState=[h,f],h},useReducer:function(h,f,x){var C=Ul();return f=x!==void 0?x(f):f,C.memoizedState=C.baseState=f,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:f},C.queue=h,h=h.dispatch=XW.bind(null,Fs,h),[C.memoizedState,h]},useRef:function(h){var f=Ul();return h={current:h},f.memoizedState=h},useState:o0,useDebugValue:E4,useDeferredValue:function(h){return Ul().memoizedState=h},useTransition:function(){var h=o0(!1),f=h[0];return h=YW.bind(null,h[1]),Ul().memoizedState=h,[f,h]},useMutableSource:function(){},useSyncExternalStore:function(h,f,x){var C=Fs,O=Ul();if(kt){if(x===void 0)throw Error(r(407));x=x()}else{if(x=f(),Da===null)throw Error(r(349));(mc&30)!==0||Dy(C,f,x)}O.memoizedState=x;var Y={value:x,getSnapshot:f};return O.queue=Y,Qp(Oy.bind(null,C,Y,h),[h]),C.flags|=2048,Jo(9,Eg.bind(null,C,Y,x,f),void 0,null),x},useId:function(){var h=Ul(),f=Da.identifierPrefix;if(kt){var x=Ne,C=nt;x=(C&~(1<<32-Qt(C)-1)).toString(32)+x,f=":"+f+"R"+x,x=Ph++,0<x&&(f+="H"+x.toString(32)),f+=":"}else x=S4++,f=":"+f+"r"+x.toString(32)+":";return h.memoizedState=f},unstable_isNewReconciler:!1},ZW={readContext:Qs,useCallback:a9,useContext:Qs,useEffect:Jp,useImperativeHandle:i9,useInsertionEffect:My,useLayoutEffect:Zp,useMemo:o9,useReducer:Yp,useRef:Yc,useState:function(){return Yp(a0)},useDebugValue:E4,useDeferredValue:function(h){var f=Qo();return l9(f,wi.memoizedState,h)},useTransition:function(){var h=Yp(a0)[0],f=Qo().memoizedState;return[h,f]},useMutableSource:Fy,useSyncExternalStore:Sg,useId:c9,unstable_isNewReconciler:!1},eG={readContext:Qs,useCallback:a9,useContext:Qs,useEffect:Jp,useImperativeHandle:i9,useInsertionEffect:My,useLayoutEffect:Zp,useMemo:o9,useReducer:Lu,useRef:Yc,useState:function(){return Lu(a0)},useDebugValue:E4,useDeferredValue:function(h){var f=Qo();return wi===null?f.memoizedState=h:l9(f,wi.memoizedState,h)},useTransition:function(){var h=Lu(a0)[0],f=Qo().memoizedState;return[h,f]},useMutableSource:Fy,useSyncExternalStore:Sg,useId:c9,unstable_isNewReconciler:!1};function Xc(h,f){if(h&&h.defaultProps){f=te({},f),h=h.defaultProps;for(var x in h)f[x]===void 0&&(f[x]=h[x]);return f}return f}function C4(h,f,x,C){f=h.memoizedState,x=x(C,f),x=x==null?f:te({},f,x),h.memoizedState=x,h.lanes===0&&(h.updateQueue.baseState=x)}var Vy={isMounted:function(h){return(h=h._reactInternals)?Ie(h)===h:!1},enqueueSetState:function(h,f,x){h=h._reactInternals;var C=el(),O=Dh(h),Y=ci(C,O);Y.payload=f,x!=null&&(Y.callback=x),f=ui(h,Y,O),f!==null&&(Zc(f,h,O,C),ja(f,h,O))},enqueueReplaceState:function(h,f,x){h=h._reactInternals;var C=el(),O=Dh(h),Y=ci(C,O);Y.tag=1,Y.payload=f,x!=null&&(Y.callback=x),f=ui(h,Y,O),f!==null&&(Zc(f,h,O,C),ja(f,h,O))},enqueueForceUpdate:function(h,f){h=h._reactInternals;var x=el(),C=Dh(h),O=ci(x,C);O.tag=2,f!=null&&(O.callback=f),f=ui(h,O,C),f!==null&&(Zc(f,h,C,x),ja(f,h,C))}};function f9(h,f,x,C,O,Y,ue){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(C,Y,ue):f.prototype&&f.prototype.isPureReactComponent?!dc(x,C)||!dc(O,Y):!0}function p9(h,f,x){var C=!1,O=Pu,Y=f.contextType;return typeof Y=="object"&&Y!==null?Y=Qs(Y):(O=Co(f)?Ed:ya.current,C=f.contextTypes,Y=(C=C!=null)?Nh(h,O):Pu),f=new f(x,Y),h.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Vy,h.stateNode=f,f._reactInternals=h,C&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=O,h.__reactInternalMemoizedMaskedChildContext=Y),f}function m9(h,f,x,C){h=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(x,C),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(x,C),f.state!==h&&Vy.enqueueReplaceState(f,f.state,null)}function A4(h,f,x,C){var O=h.stateNode;O.props=x,O.state=h.memoizedState,O.refs={},va(h);var Y=f.contextType;typeof Y=="object"&&Y!==null?O.context=Qs(Y):(Y=Co(f)?Ed:ya.current,O.context=Nh(h,Y)),O.state=h.memoizedState,Y=f.getDerivedStateFromProps,typeof Y=="function"&&(C4(h,f,Y,x),O.state=h.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(f=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),f!==O.state&&Vy.enqueueReplaceState(O,O.state,null),Fa(h,x,O,C),O.state=h.memoizedState),typeof O.componentDidMount=="function"&&(h.flags|=4194308)}function tm(h,f){try{var x="",C=f;do x+=J(C),C=C.return;while(C);var O=x}catch(Y){O=`
Error generating stack: `+Y.message+`
`+Y.stack}return{value:h,source:f,stack:O,digest:null}}function N4(h,f,x){return{value:h,source:null,stack:x??null,digest:f??null}}function T4(h,f){try{console.error(f.value)}catch(x){setTimeout(function(){throw x})}}var tG=typeof WeakMap=="function"?WeakMap:Map;function g9(h,f,x){x=ci(-1,x),x.tag=3,x.payload={element:null};var C=f.value;return x.callback=function(){Gy||(Gy=!0,q4=C),T4(h,f)},x}function x9(h,f,x){x=ci(-1,x),x.tag=3;var C=h.type.getDerivedStateFromError;if(typeof C=="function"){var O=f.value;x.payload=function(){return C(O)},x.callback=function(){T4(h,f)}}var Y=h.stateNode;return Y!==null&&typeof Y.componentDidCatch=="function"&&(x.callback=function(){T4(h,f),typeof C!="function"&&(jh===null?jh=new Set([this]):jh.add(this));var ue=f.stack;this.componentDidCatch(f.value,{componentStack:ue!==null?ue:""})}),x}function y9(h,f,x){var C=h.pingCache;if(C===null){C=h.pingCache=new tG;var O=new Set;C.set(f,O)}else O=C.get(f),O===void 0&&(O=new Set,C.set(f,O));O.has(x)||(O.add(x),h=mG.bind(null,h,f,x),f.then(h,h))}function v9(h){do{var f;if((f=h.tag===13)&&(f=h.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return h;h=h.return}while(h!==null);return null}function w9(h,f,x,C,O){return(h.mode&1)===0?(h===f?h.flags|=65536:(h.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(f=ci(-1,1),f.tag=2,ui(x,f,1))),x.lanes|=1),h):(h.flags|=65536,h.lanes=O,h)}var rG=M.ReactCurrentOwner,ml=!1;function Zo(h,f,x,C){f.child=h===null?Os(f,null,x,C):yi(f,h.child,x,C)}function _9(h,f,x,C,O){x=x.render;var Y=f.ref;return Xs(f,O),C=i0(h,f,x,C,Y,O),x=gc(),h!==null&&!ml?(f.updateQueue=h.updateQueue,f.flags&=-2053,h.lanes&=~O,Nd(h,f,O)):(kt&&x&&wt(f),f.flags|=1,Zo(h,f,C,O),f.child)}function b9(h,f,x,C,O){if(h===null){var Y=x.type;return typeof Y=="function"&&!Q4(Y)&&Y.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(f.tag=15,f.type=Y,k9(h,f,Y,C,O)):(h=Zy(x.type,null,C,f,f.mode,O),h.ref=f.ref,h.return=f,f.child=h)}if(Y=h.child,(h.lanes&O)===0){var ue=Y.memoizedProps;if(x=x.compare,x=x!==null?x:dc,x(ue,C)&&h.ref===f.ref)return Nd(h,f,O)}return f.flags|=1,h=Mh(Y,C),h.ref=f.ref,h.return=f,f.child=h}function k9(h,f,x,C,O){if(h!==null){var Y=h.memoizedProps;if(dc(Y,C)&&h.ref===f.ref)if(ml=!1,f.pendingProps=C=Y,(h.lanes&O)!==0)(h.flags&131072)!==0&&(ml=!0);else return f.lanes=h.lanes,Nd(h,f,O)}return I4(h,f,x,C,O)}function S9(h,f,x){var C=f.pendingProps,O=C.children,Y=h!==null?h.memoizedState:null;if(C.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null,transitions:null},ts(nm,$l),$l|=x;else{if((x&1073741824)===0)return h=Y!==null?Y.baseLanes|x:x,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:h,cachePool:null,transitions:null},f.updateQueue=null,ts(nm,$l),$l|=h,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},C=Y!==null?Y.baseLanes:x,ts(nm,$l),$l|=C}else Y!==null?(C=Y.baseLanes|x,f.memoizedState=null):C=x,ts(nm,$l),$l|=C;return Zo(h,f,O,x),f.child}function E9(h,f){var x=f.ref;(h===null&&x!==null||h!==null&&h.ref!==x)&&(f.flags|=512,f.flags|=2097152)}function I4(h,f,x,C,O){var Y=Co(x)?Ed:ya.current;return Y=Nh(f,Y),Xs(f,O),x=i0(h,f,x,C,Y,O),C=gc(),h!==null&&!ml?(f.updateQueue=h.updateQueue,f.flags&=-2053,h.lanes&=~O,Nd(h,f,O)):(kt&&C&&wt(f),f.flags|=1,Zo(h,f,x,O),f.child)}function C9(h,f,x,C,O){if(Co(x)){var Y=!0;Cd(f)}else Y=!1;if(Xs(f,O),f.stateNode===null)zy(h,f),p9(f,x,C),A4(f,x,C,O),C=!0;else if(h===null){var ue=f.stateNode,De=f.memoizedProps;ue.props=De;var Ue=ue.context,pt=x.contextType;typeof pt=="object"&&pt!==null?pt=Qs(pt):(pt=Co(x)?Ed:ya.current,pt=Nh(f,pt));var Ft=x.getDerivedStateFromProps,Mt=typeof Ft=="function"||typeof ue.getSnapshotBeforeUpdate=="function";Mt||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(De!==C||Ue!==pt)&&m9(f,ue,C,pt),vi=!1;var jt=f.memoizedState;ue.state=jt,Fa(f,C,ue,O),Ue=f.memoizedState,De!==C||jt!==Ue||Eo.current||vi?(typeof Ft=="function"&&(C4(f,x,Ft,C),Ue=f.memoizedState),(De=vi||f9(f,x,De,C,jt,Ue,pt))?(Mt||typeof ue.UNSAFE_componentWillMount!="function"&&typeof ue.componentWillMount!="function"||(typeof ue.componentWillMount=="function"&&ue.componentWillMount(),typeof ue.UNSAFE_componentWillMount=="function"&&ue.UNSAFE_componentWillMount()),typeof ue.componentDidMount=="function"&&(f.flags|=4194308)):(typeof ue.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=C,f.memoizedState=Ue),ue.props=C,ue.state=Ue,ue.context=pt,C=De):(typeof ue.componentDidMount=="function"&&(f.flags|=4194308),C=!1)}else{ue=f.stateNode,Ao(h,f),De=f.memoizedProps,pt=f.type===f.elementType?De:Xc(f.type,De),ue.props=pt,Mt=f.pendingProps,jt=ue.context,Ue=x.contextType,typeof Ue=="object"&&Ue!==null?Ue=Qs(Ue):(Ue=Co(x)?Ed:ya.current,Ue=Nh(f,Ue));var sr=x.getDerivedStateFromProps;(Ft=typeof sr=="function"||typeof ue.getSnapshotBeforeUpdate=="function")||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(De!==Mt||jt!==Ue)&&m9(f,ue,C,Ue),vi=!1,jt=f.memoizedState,ue.state=jt,Fa(f,C,ue,O);var fr=f.memoizedState;De!==Mt||jt!==fr||Eo.current||vi?(typeof sr=="function"&&(C4(f,x,sr,C),fr=f.memoizedState),(pt=vi||f9(f,x,pt,C,jt,fr,Ue)||!1)?(Ft||typeof ue.UNSAFE_componentWillUpdate!="function"&&typeof ue.componentWillUpdate!="function"||(typeof ue.componentWillUpdate=="function"&&ue.componentWillUpdate(C,fr,Ue),typeof ue.UNSAFE_componentWillUpdate=="function"&&ue.UNSAFE_componentWillUpdate(C,fr,Ue)),typeof ue.componentDidUpdate=="function"&&(f.flags|=4),typeof ue.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof ue.componentDidUpdate!="function"||De===h.memoizedProps&&jt===h.memoizedState||(f.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||De===h.memoizedProps&&jt===h.memoizedState||(f.flags|=1024),f.memoizedProps=C,f.memoizedState=fr),ue.props=C,ue.state=fr,ue.context=Ue,C=pt):(typeof ue.componentDidUpdate!="function"||De===h.memoizedProps&&jt===h.memoizedState||(f.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||De===h.memoizedProps&&jt===h.memoizedState||(f.flags|=1024),C=!1)}return P4(h,f,x,C,Y,O)}function P4(h,f,x,C,O,Y){E9(h,f);var ue=(f.flags&128)!==0;if(!C&&!ue)return O&&Ly(f,x,!1),Nd(h,f,Y);C=f.stateNode,rG.current=f;var De=ue&&typeof x.getDerivedStateFromError!="function"?null:C.render();return f.flags|=1,h!==null&&ue?(f.child=yi(f,h.child,null,Y),f.child=yi(f,null,De,Y)):Zo(h,f,De,Y),f.memoizedState=C.state,O&&Ly(f,x,!0),f.child}function A9(h){var f=h.stateNode;f.pendingContext?Ry(h,f.pendingContext,f.pendingContext!==f.context):f.context&&Ry(h,f.context,!1),Th(h,f.containerInfo)}function N9(h,f,x,C,O){return lr(),Kt(O),f.flags|=256,Zo(h,f,x,C),f.child}var R4={dehydrated:null,treeContext:null,retryLane:0};function L4(h){return{baseLanes:h,cachePool:null,transitions:null}}function T9(h,f,x){var C=f.pendingProps,O=As.current,Y=!1,ue=(f.flags&128)!==0,De;if((De=ue)||(De=h!==null&&h.memoizedState===null?!1:(O&2)!==0),De?(Y=!0,f.flags&=-129):(h===null||h.memoizedState!==null)&&(O|=1),ts(As,O&1),h===null)return dr(f),h=f.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((f.mode&1)===0?f.lanes=1:h.data==="$!"?f.lanes=8:f.lanes=1073741824,null):(ue=C.children,h=C.fallback,Y?(C=f.mode,Y=f.child,ue={mode:"hidden",children:ue},(C&1)===0&&Y!==null?(Y.childLanes=0,Y.pendingProps=ue):Y=ev(ue,C,0,null),h=h0(h,C,x,null),Y.return=f,h.return=f,Y.sibling=h,f.child=Y,f.child.memoizedState=L4(x),f.memoizedState=R4,h):j4(f,ue));if(O=h.memoizedState,O!==null&&(De=O.dehydrated,De!==null))return nG(h,f,ue,C,De,O,x);if(Y){Y=C.fallback,ue=f.mode,O=h.child,De=O.sibling;var Ue={mode:"hidden",children:C.children};return(ue&1)===0&&f.child!==O?(C=f.child,C.childLanes=0,C.pendingProps=Ue,f.deletions=null):(C=Mh(O,Ue),C.subtreeFlags=O.subtreeFlags&14680064),De!==null?Y=Mh(De,Y):(Y=h0(Y,ue,x,null),Y.flags|=2),Y.return=f,C.return=f,C.sibling=Y,f.child=C,C=Y,Y=f.child,ue=h.child.memoizedState,ue=ue===null?L4(x):{baseLanes:ue.baseLanes|x,cachePool:null,transitions:ue.transitions},Y.memoizedState=ue,Y.childLanes=h.childLanes&~x,f.memoizedState=R4,C}return Y=h.child,h=Y.sibling,C=Mh(Y,{mode:"visible",children:C.children}),(f.mode&1)===0&&(C.lanes=x),C.return=f,C.sibling=null,h!==null&&(x=f.deletions,x===null?(f.deletions=[h],f.flags|=16):x.push(h)),f.child=C,f.memoizedState=null,C}function j4(h,f){return f=ev({mode:"visible",children:f},h.mode,0,null),f.return=h,h.child=f}function Uy(h,f,x,C){return C!==null&&Kt(C),yi(f,h.child,null,x),h=j4(f,f.pendingProps.children),h.flags|=2,f.memoizedState=null,h}function nG(h,f,x,C,O,Y,ue){if(x)return f.flags&256?(f.flags&=-257,C=N4(Error(r(422))),Uy(h,f,ue,C)):f.memoizedState!==null?(f.child=h.child,f.flags|=128,null):(Y=C.fallback,O=f.mode,C=ev({mode:"visible",children:C.children},O,0,null),Y=h0(Y,O,ue,null),Y.flags|=2,C.return=f,Y.return=f,C.sibling=Y,f.child=C,(f.mode&1)!==0&&yi(f,h.child,null,ue),f.child.memoizedState=L4(ue),f.memoizedState=R4,Y);if((f.mode&1)===0)return Uy(h,f,ue,null);if(O.data==="$!"){if(C=O.nextSibling&&O.nextSibling.dataset,C)var De=C.dgst;return C=De,Y=Error(r(419)),C=N4(Y,C,void 0),Uy(h,f,ue,C)}if(De=(ue&h.childLanes)!==0,ml||De){if(C=Da,C!==null){switch(ue&-ue){case 4:O=2;break;case 16:O=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:O=32;break;case 536870912:O=268435456;break;default:O=0}O=(O&(C.suspendedLanes|ue))!==0?0:O,O!==0&&O!==Y.retryLane&&(Y.retryLane=O,os(h,O),Zc(C,h,O,-1))}return X4(),C=N4(Error(r(421))),Uy(h,f,ue,C)}return O.data==="$?"?(f.flags|=128,f.child=h.child,f=gG.bind(null,h),O._reactRetry=f,null):(h=Y.treeContext,vt=to(O.nextSibling),xt=f,kt=!0,St=null,h!==null&&(_e[Ce++]=nt,_e[Ce++]=Ne,_e[Ce++]=Ve,nt=h.id,Ne=h.overflow,Ve=f),f=j4(f,C.children),f.flags|=4096,f)}function I9(h,f,x){h.lanes|=f;var C=h.alternate;C!==null&&(C.lanes|=f),$n(h.return,f,x)}function F4(h,f,x,C,O){var Y=h.memoizedState;Y===null?h.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:C,tail:x,tailMode:O}:(Y.isBackwards=f,Y.rendering=null,Y.renderingStartTime=0,Y.last=C,Y.tail=x,Y.tailMode=O)}function P9(h,f,x){var C=f.pendingProps,O=C.revealOrder,Y=C.tail;if(Zo(h,f,C.children,x),C=As.current,(C&2)!==0)C=C&1|2,f.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=f.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&I9(h,x,f);else if(h.tag===19)I9(h,x,f);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break e;for(;h.sibling===null;){if(h.return===null||h.return===f)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}C&=1}if(ts(As,C),(f.mode&1)===0)f.memoizedState=null;else switch(O){case"forwards":for(x=f.child,O=null;x!==null;)h=x.alternate,h!==null&&Vl(h)===null&&(O=x),x=x.sibling;x=O,x===null?(O=f.child,f.child=null):(O=x.sibling,x.sibling=null),F4(f,!1,O,x,Y);break;case"backwards":for(x=null,O=f.child,f.child=null;O!==null;){if(h=O.alternate,h!==null&&Vl(h)===null){f.child=O;break}h=O.sibling,O.sibling=x,x=O,O=h}F4(f,!0,x,null,Y);break;case"together":F4(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function zy(h,f){(f.mode&1)===0&&h!==null&&(h.alternate=null,f.alternate=null,f.flags|=2)}function Nd(h,f,x){if(h!==null&&(f.dependencies=h.dependencies),l0|=f.lanes,(x&f.childLanes)===0)return null;if(h!==null&&f.child!==h.child)throw Error(r(153));if(f.child!==null){for(h=f.child,x=Mh(h,h.pendingProps),f.child=x,x.return=f;h.sibling!==null;)h=h.sibling,x=x.sibling=Mh(h,h.pendingProps),x.return=f;x.sibling=null}return f.child}function sG(h,f,x){switch(f.tag){case 3:A9(f),lr();break;case 5:jy(f);break;case 1:Co(f.type)&&Cd(f);break;case 4:Th(f,f.stateNode.containerInfo);break;case 10:var C=f.type._context,O=f.memoizedProps.value;ts(Di,C._currentValue),C._currentValue=O;break;case 13:if(C=f.memoizedState,C!==null)return C.dehydrated!==null?(ts(As,As.current&1),f.flags|=128,null):(x&f.child.childLanes)!==0?T9(h,f,x):(ts(As,As.current&1),h=Nd(h,f,x),h!==null?h.sibling:null);ts(As,As.current&1);break;case 19:if(C=(x&f.childLanes)!==0,(h.flags&128)!==0){if(C)return P9(h,f,x);f.flags|=128}if(O=f.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),ts(As,As.current),C)break;return null;case 22:case 23:return f.lanes=0,S9(h,f,x)}return Nd(h,f,x)}var R9,D4,L9,j9;R9=function(h,f){for(var x=f.child;x!==null;){if(x.tag===5||x.tag===6)h.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},D4=function(){},L9=function(h,f,x,C){var O=h.memoizedProps;if(O!==C){h=f.stateNode,Gc(ra.current);var Y=null;switch(x){case"input":O=Re(h,O),C=Re(h,C),Y=[];break;case"select":O=te({},O,{value:void 0}),C=te({},C,{value:void 0}),Y=[];break;case"textarea":O=Ct(h,O),C=Ct(h,C),Y=[];break;default:typeof O.onClick!="function"&&typeof C.onClick=="function"&&(h.onclick=Eh)}Or(x,C);var ue;x=null;for(pt in O)if(!C.hasOwnProperty(pt)&&O.hasOwnProperty(pt)&&O[pt]!=null)if(pt==="style"){var De=O[pt];for(ue in De)De.hasOwnProperty(ue)&&(x||(x={}),x[ue]="")}else pt!=="dangerouslySetInnerHTML"&&pt!=="children"&&pt!=="suppressContentEditableWarning"&&pt!=="suppressHydrationWarning"&&pt!=="autoFocus"&&(s.hasOwnProperty(pt)?Y||(Y=[]):(Y=Y||[]).push(pt,null));for(pt in C){var Ue=C[pt];if(De=O?.[pt],C.hasOwnProperty(pt)&&Ue!==De&&(Ue!=null||De!=null))if(pt==="style")if(De){for(ue in De)!De.hasOwnProperty(ue)||Ue&&Ue.hasOwnProperty(ue)||(x||(x={}),x[ue]="");for(ue in Ue)Ue.hasOwnProperty(ue)&&De[ue]!==Ue[ue]&&(x||(x={}),x[ue]=Ue[ue])}else x||(Y||(Y=[]),Y.push(pt,x)),x=Ue;else pt==="dangerouslySetInnerHTML"?(Ue=Ue?Ue.__html:void 0,De=De?De.__html:void 0,Ue!=null&&De!==Ue&&(Y=Y||[]).push(pt,Ue)):pt==="children"?typeof Ue!="string"&&typeof Ue!="number"||(Y=Y||[]).push(pt,""+Ue):pt!=="suppressContentEditableWarning"&&pt!=="suppressHydrationWarning"&&(s.hasOwnProperty(pt)?(Ue!=null&&pt==="onScroll"&&is("scroll",h),Y||De===Ue||(Y=[])):(Y=Y||[]).push(pt,Ue))}x&&(Y=Y||[]).push("style",x);var pt=Y;(f.updateQueue=pt)&&(f.flags|=4)}},j9=function(h,f,x,C){x!==C&&(f.flags|=4)};function Cg(h,f){if(!kt)switch(h.tailMode){case"hidden":f=h.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?h.tail=null:x.sibling=null;break;case"collapsed":x=h.tail;for(var C=null;x!==null;)x.alternate!==null&&(C=x),x=x.sibling;C===null?f||h.tail===null?h.tail=null:h.tail.sibling=null:C.sibling=null}}function No(h){var f=h.alternate!==null&&h.alternate.child===h.child,x=0,C=0;if(f)for(var O=h.child;O!==null;)x|=O.lanes|O.childLanes,C|=O.subtreeFlags&14680064,C|=O.flags&14680064,O.return=h,O=O.sibling;else for(O=h.child;O!==null;)x|=O.lanes|O.childLanes,C|=O.subtreeFlags,C|=O.flags,O.return=h,O=O.sibling;return h.subtreeFlags|=C,h.childLanes=x,f}function iG(h,f,x){var C=f.pendingProps;switch(it(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return No(f),null;case 1:return Co(f.type)&&Hp(),No(f),null;case 3:return C=f.stateNode,pc(),Xn(Eo),Xn(ya),kg(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(h===null||h.child===null)&&(Ys(f)?f.flags|=4:h===null||h.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,St!==null&&(G4(St),St=null))),D4(h,f),No(f),null;case 5:_g(f);var O=Gc(Ru.current);if(x=f.type,h!==null&&f.stateNode!=null)L9(h,f,x,C,O),h.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!C){if(f.stateNode===null)throw Error(r(166));return No(f),null}if(h=Gc(ra.current),Ys(f)){C=f.stateNode,x=f.type;var Y=f.memoizedProps;switch(C[fc]=f,C[Ch]=Y,h=(f.mode&1)!==0,x){case"dialog":is("cancel",C),is("close",C);break;case"iframe":case"object":case"embed":is("load",C);break;case"video":case"audio":for(O=0;O<Tu.length;O++)is(Tu[O],C);break;case"source":is("error",C);break;case"img":case"image":case"link":is("error",C),is("load",C);break;case"details":is("toggle",C);break;case"input":pe(C,Y),is("invalid",C);break;case"select":C._wrapperState={wasMultiple:!!Y.multiple},is("invalid",C);break;case"textarea":Et(C,Y),is("invalid",C)}Or(x,Y),O=null;for(var ue in Y)if(Y.hasOwnProperty(ue)){var De=Y[ue];ue==="children"?typeof De=="string"?C.textContent!==De&&(Y.suppressHydrationWarning!==!0&&qp(C.textContent,De,h),O=["children",De]):typeof De=="number"&&C.textContent!==""+De&&(Y.suppressHydrationWarning!==!0&&qp(C.textContent,De,h),O=["children",""+De]):s.hasOwnProperty(ue)&&De!=null&&ue==="onScroll"&&is("scroll",C)}switch(x){case"input":Oe(C),ot(C,Y,!0);break;case"textarea":Oe(C),Ye(C);break;case"select":case"option":break;default:typeof Y.onClick=="function"&&(C.onclick=Eh)}C=O,f.updateQueue=C,C!==null&&(f.flags|=4)}else{ue=O.nodeType===9?O:O.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=Qe(x)),h==="http://www.w3.org/1999/xhtml"?x==="script"?(h=ue.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof C.is=="string"?h=ue.createElement(x,{is:C.is}):(h=ue.createElement(x),x==="select"&&(ue=h,C.multiple?ue.multiple=!0:C.size&&(ue.size=C.size))):h=ue.createElementNS(h,x),h[fc]=f,h[Ch]=C,R9(h,f,!1,!1),f.stateNode=h;e:{switch(ue=rr(x,C),x){case"dialog":is("cancel",h),is("close",h),O=C;break;case"iframe":case"object":case"embed":is("load",h),O=C;break;case"video":case"audio":for(O=0;O<Tu.length;O++)is(Tu[O],h);O=C;break;case"source":is("error",h),O=C;break;case"img":case"image":case"link":is("error",h),is("load",h),O=C;break;case"details":is("toggle",h),O=C;break;case"input":pe(h,C),O=Re(h,C),is("invalid",h);break;case"option":O=C;break;case"select":h._wrapperState={wasMultiple:!!C.multiple},O=te({},C,{value:void 0}),is("invalid",h);break;case"textarea":Et(h,C),O=Ct(h,C),is("invalid",h);break;default:O=C}Or(x,O),De=O;for(Y in De)if(De.hasOwnProperty(Y)){var Ue=De[Y];Y==="style"?At(h,Ue):Y==="dangerouslySetInnerHTML"?(Ue=Ue?Ue.__html:void 0,Ue!=null&&We(h,Ue)):Y==="children"?typeof Ue=="string"?(x!=="textarea"||Ue!=="")&&lt(h,Ue):typeof Ue=="number"&&lt(h,""+Ue):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?Ue!=null&&Y==="onScroll"&&is("scroll",h):Ue!=null&&I(h,Y,Ue,ue))}switch(x){case"input":Oe(h),ot(h,C,!1);break;case"textarea":Oe(h),Ye(h);break;case"option":C.value!=null&&h.setAttribute("value",""+ke(C.value));break;case"select":h.multiple=!!C.multiple,Y=C.value,Y!=null?ut(h,!!C.multiple,Y,!1):C.defaultValue!=null&&ut(h,!!C.multiple,C.defaultValue,!0);break;default:typeof O.onClick=="function"&&(h.onclick=Eh)}switch(x){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}}C&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return No(f),null;case 6:if(h&&f.stateNode!=null)j9(h,f,h.memoizedProps,C);else{if(typeof C!="string"&&f.stateNode===null)throw Error(r(166));if(x=Gc(Ru.current),Gc(ra.current),Ys(f)){if(C=f.stateNode,x=f.memoizedProps,C[fc]=f,(Y=C.nodeValue!==x)&&(h=xt,h!==null))switch(h.tag){case 3:qp(C.nodeValue,x,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&qp(C.nodeValue,x,(h.mode&1)!==0)}Y&&(f.flags|=4)}else C=(x.nodeType===9?x:x.ownerDocument).createTextNode(C),C[fc]=f,f.stateNode=C}return No(f),null;case 13:if(Xn(As),C=f.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(kt&&vt!==null&&(f.mode&1)!==0&&(f.flags&128)===0)Zr(),lr(),f.flags|=98560,Y=!1;else if(Y=Ys(f),C!==null&&C.dehydrated!==null){if(h===null){if(!Y)throw Error(r(318));if(Y=f.memoizedState,Y=Y!==null?Y.dehydrated:null,!Y)throw Error(r(317));Y[fc]=f}else lr(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;No(f),Y=!1}else St!==null&&(G4(St),St=null),Y=!0;if(!Y)return f.flags&65536?f:null}return(f.flags&128)!==0?(f.lanes=x,f):(C=C!==null,C!==(h!==null&&h.memoizedState!==null)&&C&&(f.child.flags|=8192,(f.mode&1)!==0&&(h===null||(As.current&1)!==0?wa===0&&(wa=3):X4())),f.updateQueue!==null&&(f.flags|=4),No(f),null);case 4:return pc(),D4(h,f),h===null&&_d(f.stateNode.containerInfo),No(f),null;case 10:return js(f.type._context),No(f),null;case 17:return Co(f.type)&&Hp(),No(f),null;case 19:if(Xn(As),Y=f.memoizedState,Y===null)return No(f),null;if(C=(f.flags&128)!==0,ue=Y.rendering,ue===null)if(C)Cg(Y,!1);else{if(wa!==0||h!==null&&(h.flags&128)!==0)for(h=f.child;h!==null;){if(ue=Vl(h),ue!==null){for(f.flags|=128,Cg(Y,!1),C=ue.updateQueue,C!==null&&(f.updateQueue=C,f.flags|=4),f.subtreeFlags=0,C=x,x=f.child;x!==null;)Y=x,h=C,Y.flags&=14680066,ue=Y.alternate,ue===null?(Y.childLanes=0,Y.lanes=h,Y.child=null,Y.subtreeFlags=0,Y.memoizedProps=null,Y.memoizedState=null,Y.updateQueue=null,Y.dependencies=null,Y.stateNode=null):(Y.childLanes=ue.childLanes,Y.lanes=ue.lanes,Y.child=ue.child,Y.subtreeFlags=0,Y.deletions=null,Y.memoizedProps=ue.memoizedProps,Y.memoizedState=ue.memoizedState,Y.updateQueue=ue.updateQueue,Y.type=ue.type,h=ue.dependencies,Y.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),x=x.sibling;return ts(As,As.current&1|2),f.child}h=h.sibling}Y.tail!==null&&Pt()>sm&&(f.flags|=128,C=!0,Cg(Y,!1),f.lanes=4194304)}else{if(!C)if(h=Vl(ue),h!==null){if(f.flags|=128,C=!0,x=h.updateQueue,x!==null&&(f.updateQueue=x,f.flags|=4),Cg(Y,!0),Y.tail===null&&Y.tailMode==="hidden"&&!ue.alternate&&!kt)return No(f),null}else 2*Pt()-Y.renderingStartTime>sm&&x!==1073741824&&(f.flags|=128,C=!0,Cg(Y,!1),f.lanes=4194304);Y.isBackwards?(ue.sibling=f.child,f.child=ue):(x=Y.last,x!==null?x.sibling=ue:f.child=ue,Y.last=ue)}return Y.tail!==null?(f=Y.tail,Y.rendering=f,Y.tail=f.sibling,Y.renderingStartTime=Pt(),f.sibling=null,x=As.current,ts(As,C?x&1|2:x&1),f):(No(f),null);case 22:case 23:return Y4(),C=f.memoizedState!==null,h!==null&&h.memoizedState!==null!==C&&(f.flags|=8192),C&&(f.mode&1)!==0?($l&1073741824)!==0&&(No(f),f.subtreeFlags&6&&(f.flags|=8192)):No(f),null;case 24:return null;case 25:return null}throw Error(r(156,f.tag))}function aG(h,f){switch(it(f),f.tag){case 1:return Co(f.type)&&Hp(),h=f.flags,h&65536?(f.flags=h&-65537|128,f):null;case 3:return pc(),Xn(Eo),Xn(ya),kg(),h=f.flags,(h&65536)!==0&&(h&128)===0?(f.flags=h&-65537|128,f):null;case 5:return _g(f),null;case 13:if(Xn(As),h=f.memoizedState,h!==null&&h.dehydrated!==null){if(f.alternate===null)throw Error(r(340));lr()}return h=f.flags,h&65536?(f.flags=h&-65537|128,f):null;case 19:return Xn(As),null;case 4:return pc(),null;case 10:return js(f.type._context),null;case 22:case 23:return Y4(),null;case 24:return null;default:return null}}var $y=!1,To=!1,oG=typeof WeakSet=="function"?WeakSet:Set,cr=null;function rm(h,f){var x=h.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(C){_i(h,f,C)}else x.current=null}function O4(h,f,x){try{x()}catch(C){_i(h,f,C)}}var F9=!1;function lG(h,f){if(r0=ac,h=og(),Mp(h)){if("selectionStart"in h)var x={start:h.selectionStart,end:h.selectionEnd};else e:{x=(x=h.ownerDocument)&&x.defaultView||window;var C=x.getSelection&&x.getSelection();if(C&&C.rangeCount!==0){x=C.anchorNode;var O=C.anchorOffset,Y=C.focusNode;C=C.focusOffset;try{x.nodeType,Y.nodeType}catch{x=null;break e}var ue=0,De=-1,Ue=-1,pt=0,Ft=0,Mt=h,jt=null;t:for(;;){for(var sr;Mt!==x||O!==0&&Mt.nodeType!==3||(De=ue+O),Mt!==Y||C!==0&&Mt.nodeType!==3||(Ue=ue+C),Mt.nodeType===3&&(ue+=Mt.nodeValue.length),(sr=Mt.firstChild)!==null;)jt=Mt,Mt=sr;for(;;){if(Mt===h)break t;if(jt===x&&++pt===O&&(De=ue),jt===Y&&++Ft===C&&(Ue=ue),(sr=Mt.nextSibling)!==null)break;Mt=jt,jt=Mt.parentNode}Mt=sr}x=De===-1||Ue===-1?null:{start:De,end:Ue}}else x=null}x=x||{start:0,end:0}}else x=null;for(kd={focusedElem:h,selectionRange:x},ac=!1,cr=f;cr!==null;)if(f=cr,h=f.child,(f.subtreeFlags&1028)!==0&&h!==null)h.return=f,cr=h;else for(;cr!==null;){f=cr;try{var fr=f.alternate;if((f.flags&1024)!==0)switch(f.tag){case 0:case 11:case 15:break;case 1:if(fr!==null){var xr=fr.memoizedProps,Mi=fr.memoizedState,st=f.stateNode,qe=st.getSnapshotBeforeUpdate(f.elementType===f.type?xr:Xc(f.type,xr),Mi);st.__reactInternalSnapshotBeforeUpdate=qe}break;case 3:var ct=f.stateNode.containerInfo;ct.nodeType===1?ct.textContent="":ct.nodeType===9&&ct.documentElement&&ct.removeChild(ct.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(qt){_i(f,f.return,qt)}if(h=f.sibling,h!==null){h.return=f.return,cr=h;break}cr=f.return}return fr=F9,F9=!1,fr}function Ag(h,f,x){var C=f.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var O=C=C.next;do{if((O.tag&h)===h){var Y=O.destroy;O.destroy=void 0,Y!==void 0&&O4(f,x,Y)}O=O.next}while(O!==C)}}function qy(h,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var x=f=f.next;do{if((x.tag&h)===h){var C=x.create;x.destroy=C()}x=x.next}while(x!==f)}}function M4(h){var f=h.ref;if(f!==null){var x=h.stateNode;switch(h.tag){case 5:h=x;break;default:h=x}typeof f=="function"?f(h):f.current=h}}function D9(h){var f=h.alternate;f!==null&&(h.alternate=null,D9(f)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(f=h.stateNode,f!==null&&(delete f[fc],delete f[Ch],delete f[So],delete f[b4],delete f[k4])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function O9(h){return h.tag===5||h.tag===3||h.tag===4}function M9(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||O9(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function B4(h,f,x){var C=h.tag;if(C===5||C===6)h=h.stateNode,f?x.nodeType===8?x.parentNode.insertBefore(h,f):x.insertBefore(h,f):(x.nodeType===8?(f=x.parentNode,f.insertBefore(h,x)):(f=x,f.appendChild(h)),x=x._reactRootContainer,x!=null||f.onclick!==null||(f.onclick=Eh));else if(C!==4&&(h=h.child,h!==null))for(B4(h,f,x),h=h.sibling;h!==null;)B4(h,f,x),h=h.sibling}function V4(h,f,x){var C=h.tag;if(C===5||C===6)h=h.stateNode,f?x.insertBefore(h,f):x.appendChild(h);else if(C!==4&&(h=h.child,h!==null))for(V4(h,f,x),h=h.sibling;h!==null;)V4(h,f,x),h=h.sibling}var ro=null,Qc=!1;function Lh(h,f,x){for(x=x.child;x!==null;)B9(h,f,x),x=x.sibling}function B9(h,f,x){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(Qi,x)}catch{}switch(x.tag){case 5:To||rm(x,f);case 6:var C=ro,O=Qc;ro=null,Lh(h,f,x),ro=C,Qc=O,ro!==null&&(Qc?(h=ro,x=x.stateNode,h.nodeType===8?h.parentNode.removeChild(x):h.removeChild(x)):ro.removeChild(x.stateNode));break;case 18:ro!==null&&(Qc?(h=ro,x=x.stateNode,h.nodeType===8?yg(h.parentNode,x):h.nodeType===1&&yg(h,x),Ia(h)):yg(ro,x.stateNode));break;case 4:C=ro,O=Qc,ro=x.stateNode.containerInfo,Qc=!0,Lh(h,f,x),ro=C,Qc=O;break;case 0:case 11:case 14:case 15:if(!To&&(C=x.updateQueue,C!==null&&(C=C.lastEffect,C!==null))){O=C=C.next;do{var Y=O,ue=Y.destroy;Y=Y.tag,ue!==void 0&&((Y&2)!==0||(Y&4)!==0)&&O4(x,f,ue),O=O.next}while(O!==C)}Lh(h,f,x);break;case 1:if(!To&&(rm(x,f),C=x.stateNode,typeof C.componentWillUnmount=="function"))try{C.props=x.memoizedProps,C.state=x.memoizedState,C.componentWillUnmount()}catch(De){_i(x,f,De)}Lh(h,f,x);break;case 21:Lh(h,f,x);break;case 22:x.mode&1?(To=(C=To)||x.memoizedState!==null,Lh(h,f,x),To=C):Lh(h,f,x);break;default:Lh(h,f,x)}}function V9(h){var f=h.updateQueue;if(f!==null){h.updateQueue=null;var x=h.stateNode;x===null&&(x=h.stateNode=new oG),f.forEach(function(C){var O=xG.bind(null,h,C);x.has(C)||(x.add(C),C.then(O,O))})}}function Jc(h,f){var x=f.deletions;if(x!==null)for(var C=0;C<x.length;C++){var O=x[C];try{var Y=h,ue=f,De=ue;e:for(;De!==null;){switch(De.tag){case 5:ro=De.stateNode,Qc=!1;break e;case 3:ro=De.stateNode.containerInfo,Qc=!0;break e;case 4:ro=De.stateNode.containerInfo,Qc=!0;break e}De=De.return}if(ro===null)throw Error(r(160));B9(Y,ue,O),ro=null,Qc=!1;var Ue=O.alternate;Ue!==null&&(Ue.return=null),O.return=null}catch(pt){_i(O,f,pt)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)U9(f,h),f=f.sibling}function U9(h,f){var x=h.alternate,C=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(Jc(f,h),ju(h),C&4){try{Ag(3,h,h.return),qy(3,h)}catch(xr){_i(h,h.return,xr)}try{Ag(5,h,h.return)}catch(xr){_i(h,h.return,xr)}}break;case 1:Jc(f,h),ju(h),C&512&&x!==null&&rm(x,x.return);break;case 5:if(Jc(f,h),ju(h),C&512&&x!==null&&rm(x,x.return),h.flags&32){var O=h.stateNode;try{lt(O,"")}catch(xr){_i(h,h.return,xr)}}if(C&4&&(O=h.stateNode,O!=null)){var Y=h.memoizedProps,ue=x!==null?x.memoizedProps:Y,De=h.type,Ue=h.updateQueue;if(h.updateQueue=null,Ue!==null)try{De==="input"&&Y.type==="radio"&&Y.name!=null&&Ke(O,Y),rr(De,ue);var pt=rr(De,Y);for(ue=0;ue<Ue.length;ue+=2){var Ft=Ue[ue],Mt=Ue[ue+1];Ft==="style"?At(O,Mt):Ft==="dangerouslySetInnerHTML"?We(O,Mt):Ft==="children"?lt(O,Mt):I(O,Ft,Mt,pt)}switch(De){case"input":ze(O,Y);break;case"textarea":Le(O,Y);break;case"select":var jt=O._wrapperState.wasMultiple;O._wrapperState.wasMultiple=!!Y.multiple;var sr=Y.value;sr!=null?ut(O,!!Y.multiple,sr,!1):jt!==!!Y.multiple&&(Y.defaultValue!=null?ut(O,!!Y.multiple,Y.defaultValue,!0):ut(O,!!Y.multiple,Y.multiple?[]:"",!1))}O[Ch]=Y}catch(xr){_i(h,h.return,xr)}}break;case 6:if(Jc(f,h),ju(h),C&4){if(h.stateNode===null)throw Error(r(162));O=h.stateNode,Y=h.memoizedProps;try{O.nodeValue=Y}catch(xr){_i(h,h.return,xr)}}break;case 3:if(Jc(f,h),ju(h),C&4&&x!==null&&x.memoizedState.isDehydrated)try{Ia(f.containerInfo)}catch(xr){_i(h,h.return,xr)}break;case 4:Jc(f,h),ju(h);break;case 13:Jc(f,h),ju(h),O=h.child,O.flags&8192&&(Y=O.memoizedState!==null,O.stateNode.isHidden=Y,!Y||O.alternate!==null&&O.alternate.memoizedState!==null||($4=Pt())),C&4&&V9(h);break;case 22:if(Ft=x!==null&&x.memoizedState!==null,h.mode&1?(To=(pt=To)||Ft,Jc(f,h),To=pt):Jc(f,h),ju(h),C&8192){if(pt=h.memoizedState!==null,(h.stateNode.isHidden=pt)&&!Ft&&(h.mode&1)!==0)for(cr=h,Ft=h.child;Ft!==null;){for(Mt=cr=Ft;cr!==null;){switch(jt=cr,sr=jt.child,jt.tag){case 0:case 11:case 14:case 15:Ag(4,jt,jt.return);break;case 1:rm(jt,jt.return);var fr=jt.stateNode;if(typeof fr.componentWillUnmount=="function"){C=jt,x=jt.return;try{f=C,fr.props=f.memoizedProps,fr.state=f.memoizedState,fr.componentWillUnmount()}catch(xr){_i(C,x,xr)}}break;case 5:rm(jt,jt.return);break;case 22:if(jt.memoizedState!==null){q9(Mt);continue}}sr!==null?(sr.return=jt,cr=sr):q9(Mt)}Ft=Ft.sibling}e:for(Ft=null,Mt=h;;){if(Mt.tag===5){if(Ft===null){Ft=Mt;try{O=Mt.stateNode,pt?(Y=O.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none"):(De=Mt.stateNode,Ue=Mt.memoizedProps.style,ue=Ue!=null&&Ue.hasOwnProperty("display")?Ue.display:null,De.style.display=Xt("display",ue))}catch(xr){_i(h,h.return,xr)}}}else if(Mt.tag===6){if(Ft===null)try{Mt.stateNode.nodeValue=pt?"":Mt.memoizedProps}catch(xr){_i(h,h.return,xr)}}else if((Mt.tag!==22&&Mt.tag!==23||Mt.memoizedState===null||Mt===h)&&Mt.child!==null){Mt.child.return=Mt,Mt=Mt.child;continue}if(Mt===h)break e;for(;Mt.sibling===null;){if(Mt.return===null||Mt.return===h)break e;Ft===Mt&&(Ft=null),Mt=Mt.return}Ft===Mt&&(Ft=null),Mt.sibling.return=Mt.return,Mt=Mt.sibling}}break;case 19:Jc(f,h),ju(h),C&4&&V9(h);break;case 21:break;default:Jc(f,h),ju(h)}}function ju(h){var f=h.flags;if(f&2){try{e:{for(var x=h.return;x!==null;){if(O9(x)){var C=x;break e}x=x.return}throw Error(r(160))}switch(C.tag){case 5:var O=C.stateNode;C.flags&32&&(lt(O,""),C.flags&=-33);var Y=M9(h);V4(h,Y,O);break;case 3:case 4:var ue=C.stateNode.containerInfo,De=M9(h);B4(h,De,ue);break;default:throw Error(r(161))}}catch(Ue){_i(h,h.return,Ue)}h.flags&=-3}f&4096&&(h.flags&=-4097)}function cG(h,f,x){cr=h,z9(h)}function z9(h,f,x){for(var C=(h.mode&1)!==0;cr!==null;){var O=cr,Y=O.child;if(O.tag===22&&C){var ue=O.memoizedState!==null||$y;if(!ue){var De=O.alternate,Ue=De!==null&&De.memoizedState!==null||To;De=$y;var pt=To;if($y=ue,(To=Ue)&&!pt)for(cr=O;cr!==null;)ue=cr,Ue=ue.child,ue.tag===22&&ue.memoizedState!==null?H9(O):Ue!==null?(Ue.return=ue,cr=Ue):H9(O);for(;Y!==null;)cr=Y,z9(Y),Y=Y.sibling;cr=O,$y=De,To=pt}$9(h)}else(O.subtreeFlags&8772)!==0&&Y!==null?(Y.return=O,cr=Y):$9(h)}}function $9(h){for(;cr!==null;){var f=cr;if((f.flags&8772)!==0){var x=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:To||qy(5,f);break;case 1:var C=f.stateNode;if(f.flags&4&&!To)if(x===null)C.componentDidMount();else{var O=f.elementType===f.type?x.memoizedProps:Xc(f.type,x.memoizedProps);C.componentDidUpdate(O,x.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var Y=f.updateQueue;Y!==null&&pl(f,Y,C);break;case 3:var ue=f.updateQueue;if(ue!==null){if(x=null,f.child!==null)switch(f.child.tag){case 5:x=f.child.stateNode;break;case 1:x=f.child.stateNode}pl(f,ue,x)}break;case 5:var De=f.stateNode;if(x===null&&f.flags&4){x=De;var Ue=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":Ue.autoFocus&&x.focus();break;case"img":Ue.src&&(x.src=Ue.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var pt=f.alternate;if(pt!==null){var Ft=pt.memoizedState;if(Ft!==null){var Mt=Ft.dehydrated;Mt!==null&&Ia(Mt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}To||f.flags&512&&M4(f)}catch(jt){_i(f,f.return,jt)}}if(f===h){cr=null;break}if(x=f.sibling,x!==null){x.return=f.return,cr=x;break}cr=f.return}}function q9(h){for(;cr!==null;){var f=cr;if(f===h){cr=null;break}var x=f.sibling;if(x!==null){x.return=f.return,cr=x;break}cr=f.return}}function H9(h){for(;cr!==null;){var f=cr;try{switch(f.tag){case 0:case 11:case 15:var x=f.return;try{qy(4,f)}catch(Ue){_i(f,x,Ue)}break;case 1:var C=f.stateNode;if(typeof C.componentDidMount=="function"){var O=f.return;try{C.componentDidMount()}catch(Ue){_i(f,O,Ue)}}var Y=f.return;try{M4(f)}catch(Ue){_i(f,Y,Ue)}break;case 5:var ue=f.return;try{M4(f)}catch(Ue){_i(f,ue,Ue)}}}catch(Ue){_i(f,f.return,Ue)}if(f===h){cr=null;break}var De=f.sibling;if(De!==null){De.return=f.return,cr=De;break}cr=f.return}}var uG=Math.ceil,Hy=M.ReactCurrentDispatcher,U4=M.ReactCurrentOwner,xc=M.ReactCurrentBatchConfig,qn=0,Da=null,na=null,no=0,$l=0,nm=Ml(0),wa=0,Ng=null,l0=0,Wy=0,z4=0,Tg=null,gl=null,$4=0,sm=1/0,Td=null,Gy=!1,q4=null,jh=null,Ky=!1,Fh=null,Yy=0,Ig=0,H4=null,Xy=-1,Qy=0;function el(){return(qn&6)!==0?Pt():Xy!==-1?Xy:Xy=Pt()}function Dh(h){return(h.mode&1)===0?1:(qn&2)!==0&&no!==0?no&-no:li.transition!==null?(Qy===0&&(Qy=Ta()),Qy):(h=on,h!==0||(h=window.event,h=h===void 0?16:lc(h.type)),h)}function Zc(h,f,x,C){if(50<Ig)throw Ig=0,H4=null,Error(r(185));Yo(h,x,C),((qn&2)===0||h!==Da)&&(h===Da&&((qn&2)===0&&(Wy|=x),wa===4&&Oh(h,no)),xl(h,C),x===1&&qn===0&&(f.mode&1)===0&&(sm=Pt()+500,s0&&Q()))}function xl(h,f){var x=h.callbackNode;cn(h,f);var C=jn(h,h===Da?no:0);if(C===0)x!==null&&Ut(x),h.callbackNode=null,h.callbackPriority=0;else if(f=C&-C,h.callbackPriority!==f){if(x!=null&&Ut(x),f===1)h.tag===0?z(G9.bind(null,h)):N(G9.bind(null,h)),w4(function(){(qn&6)===0&&Q()}),x=null;else{switch(Ka(C)){case 1:x=Xr;break;case 4:x=Ur;break;case 16:x=kn;break;case 536870912:x=Na;break;default:x=kn}x=tC(x,W9.bind(null,h))}h.callbackPriority=f,h.callbackNode=x}}function W9(h,f){if(Xy=-1,Qy=0,(qn&6)!==0)throw Error(r(327));var x=h.callbackNode;if(im()&&h.callbackNode!==x)return null;var C=jn(h,h===Da?no:0);if(C===0)return null;if((C&30)!==0||(C&h.expiredLanes)!==0||f)f=Jy(h,C);else{f=C;var O=qn;qn|=2;var Y=Y9();(Da!==h||no!==f)&&(Td=null,sm=Pt()+500,u0(h,f));do try{fG();break}catch(De){K9(h,De)}while(!0);zn(),Hy.current=Y,qn=O,na!==null?f=0:(Da=null,no=0,f=wa)}if(f!==0){if(f===2&&(O=Ps(h),O!==0&&(C=O,f=W4(h,O))),f===1)throw x=Ng,u0(h,0),Oh(h,C),xl(h,Pt()),x;if(f===6)Oh(h,C);else{if(O=h.current.alternate,(C&30)===0&&!dG(O)&&(f=Jy(h,C),f===2&&(Y=Ps(h),Y!==0&&(C=Y,f=W4(h,Y))),f===1))throw x=Ng,u0(h,0),Oh(h,C),xl(h,Pt()),x;switch(h.finishedWork=O,h.finishedLanes=C,f){case 0:case 1:throw Error(r(345));case 2:d0(h,gl,Td);break;case 3:if(Oh(h,C),(C&130023424)===C&&(f=$4+500-Pt(),10<f)){if(jn(h,0)!==0)break;if(O=h.suspendedLanes,(O&C)!==C){el(),h.pingedLanes|=h.suspendedLanes&O;break}h.timeoutHandle=xg(d0.bind(null,h,gl,Td),f);break}d0(h,gl,Td);break;case 4:if(Oh(h,C),(C&4194240)===C)break;for(f=h.eventTimes,O=-1;0<C;){var ue=31-Qt(C);Y=1<<ue,ue=f[ue],ue>O&&(O=ue),C&=~Y}if(C=O,C=Pt()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*uG(C/1960))-C,10<C){h.timeoutHandle=xg(d0.bind(null,h,gl,Td),C);break}d0(h,gl,Td);break;case 5:d0(h,gl,Td);break;default:throw Error(r(329))}}}return xl(h,Pt()),h.callbackNode===x?W9.bind(null,h):null}function W4(h,f){var x=Tg;return h.current.memoizedState.isDehydrated&&(u0(h,f).flags|=256),h=Jy(h,f),h!==2&&(f=gl,gl=x,f!==null&&G4(f)),h}function G4(h){gl===null?gl=h:gl.push.apply(gl,h)}function dG(h){for(var f=h;;){if(f.flags&16384){var x=f.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var C=0;C<x.length;C++){var O=x[C],Y=O.getSnapshot;O=O.value;try{if(!Fi(Y(),O))return!1}catch{return!1}}}if(x=f.child,f.subtreeFlags&16384&&x!==null)x.return=f,f=x;else{if(f===h)break;for(;f.sibling===null;){if(f.return===null||f.return===h)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Oh(h,f){for(f&=~z4,f&=~Wy,h.suspendedLanes|=f,h.pingedLanes&=~f,h=h.expirationTimes;0<f;){var x=31-Qt(f),C=1<<x;h[x]=-1,f&=~C}}function G9(h){if((qn&6)!==0)throw Error(r(327));im();var f=jn(h,0);if((f&1)===0)return xl(h,Pt()),null;var x=Jy(h,f);if(h.tag!==0&&x===2){var C=Ps(h);C!==0&&(f=C,x=W4(h,C))}if(x===1)throw x=Ng,u0(h,0),Oh(h,f),xl(h,Pt()),x;if(x===6)throw Error(r(345));return h.finishedWork=h.current.alternate,h.finishedLanes=f,d0(h,gl,Td),xl(h,Pt()),null}function K4(h,f){var x=qn;qn|=1;try{return h(f)}finally{qn=x,qn===0&&(sm=Pt()+500,s0&&Q())}}function c0(h){Fh!==null&&Fh.tag===0&&(qn&6)===0&&im();var f=qn;qn|=1;var x=xc.transition,C=on;try{if(xc.transition=null,on=1,h)return h()}finally{on=C,xc.transition=x,qn=f,(qn&6)===0&&Q()}}function Y4(){$l=nm.current,Xn(nm)}function u0(h,f){h.finishedWork=null,h.finishedLanes=0;var x=h.timeoutHandle;if(x!==-1&&(h.timeoutHandle=-1,Iy(x)),na!==null)for(x=na.return;x!==null;){var C=x;switch(it(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&Hp();break;case 3:pc(),Xn(Eo),Xn(ya),kg();break;case 5:_g(C);break;case 4:pc();break;case 13:Xn(As);break;case 19:Xn(As);break;case 10:js(C.type._context);break;case 22:case 23:Y4()}x=x.return}if(Da=h,na=h=Mh(h.current,null),no=$l=f,wa=0,Ng=null,z4=Wy=l0=0,gl=Tg=null,as!==null){for(f=0;f<as.length;f++)if(x=as[f],C=x.interleaved,C!==null){x.interleaved=null;var O=C.next,Y=x.pending;if(Y!==null){var ue=Y.next;Y.next=O,C.next=ue}x.pending=C}as=null}return h}function K9(h,f){do{var x=na;try{if(zn(),Wp.current=By,Ih){for(var C=Fs.memoizedState;C!==null;){var O=C.queue;O!==null&&(O.pending=null),C=C.next}Ih=!1}if(mc=0,hi=wi=Fs=null,Kc=!1,Ph=0,U4.current=null,x===null||x.return===null){wa=1,Ng=f,na=null;break}e:{var Y=h,ue=x.return,De=x,Ue=f;if(f=no,De.flags|=32768,Ue!==null&&typeof Ue=="object"&&typeof Ue.then=="function"){var pt=Ue,Ft=De,Mt=Ft.tag;if((Ft.mode&1)===0&&(Mt===0||Mt===11||Mt===15)){var jt=Ft.alternate;jt?(Ft.updateQueue=jt.updateQueue,Ft.memoizedState=jt.memoizedState,Ft.lanes=jt.lanes):(Ft.updateQueue=null,Ft.memoizedState=null)}var sr=v9(ue);if(sr!==null){sr.flags&=-257,w9(sr,ue,De,Y,f),sr.mode&1&&y9(Y,pt,f),f=sr,Ue=pt;var fr=f.updateQueue;if(fr===null){var xr=new Set;xr.add(Ue),f.updateQueue=xr}else fr.add(Ue);break e}else{if((f&1)===0){y9(Y,pt,f),X4();break e}Ue=Error(r(426))}}else if(kt&&De.mode&1){var Mi=v9(ue);if(Mi!==null){(Mi.flags&65536)===0&&(Mi.flags|=256),w9(Mi,ue,De,Y,f),Kt(tm(Ue,De));break e}}Y=Ue=tm(Ue,De),wa!==4&&(wa=2),Tg===null?Tg=[Y]:Tg.push(Y),Y=ue;do{switch(Y.tag){case 3:Y.flags|=65536,f&=-f,Y.lanes|=f;var st=g9(Y,Ue,f);ls(Y,st);break e;case 1:De=Ue;var qe=Y.type,ct=Y.stateNode;if((Y.flags&128)===0&&(typeof qe.getDerivedStateFromError=="function"||ct!==null&&typeof ct.componentDidCatch=="function"&&(jh===null||!jh.has(ct)))){Y.flags|=65536,f&=-f,Y.lanes|=f;var qt=x9(Y,De,f);ls(Y,qt);break e}}Y=Y.return}while(Y!==null)}Q9(x)}catch(wr){f=wr,na===x&&x!==null&&(na=x=x.return);continue}break}while(!0)}function Y9(){var h=Hy.current;return Hy.current=By,h===null?By:h}function X4(){(wa===0||wa===3||wa===2)&&(wa=4),Da===null||(l0&268435455)===0&&(Wy&268435455)===0||Oh(Da,no)}function Jy(h,f){var x=qn;qn|=2;var C=Y9();(Da!==h||no!==f)&&(Td=null,u0(h,f));do try{hG();break}catch(O){K9(h,O)}while(!0);if(zn(),qn=x,Hy.current=C,na!==null)throw Error(r(261));return Da=null,no=0,wa}function hG(){for(;na!==null;)X9(na)}function fG(){for(;na!==null&&!Gt();)X9(na)}function X9(h){var f=eC(h.alternate,h,$l);h.memoizedProps=h.pendingProps,f===null?Q9(h):na=f,U4.current=null}function Q9(h){var f=h;do{var x=f.alternate;if(h=f.return,(f.flags&32768)===0){if(x=iG(x,f,$l),x!==null){na=x;return}}else{if(x=aG(x,f),x!==null){x.flags&=32767,na=x;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{wa=6,na=null;return}}if(f=f.sibling,f!==null){na=f;return}na=f=h}while(f!==null);wa===0&&(wa=5)}function d0(h,f,x){var C=on,O=xc.transition;try{xc.transition=null,on=1,pG(h,f,x,C)}finally{xc.transition=O,on=C}return null}function pG(h,f,x,C){do im();while(Fh!==null);if((qn&6)!==0)throw Error(r(327));x=h.finishedWork;var O=h.finishedLanes;if(x===null)return null;if(h.finishedWork=null,h.finishedLanes=0,x===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0;var Y=x.lanes|x.childLanes;if(un(h,Y),h===Da&&(na=Da=null,no=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||Ky||(Ky=!0,tC(kn,function(){return im(),null})),Y=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||Y){Y=xc.transition,xc.transition=null;var ue=on;on=1;var De=qn;qn|=4,U4.current=null,lG(h,x),U9(x,h),Ey(kd),ac=!!r0,kd=r0=null,h.current=x,cG(x),Ot(),qn=De,on=ue,xc.transition=Y}else h.current=x;if(Ky&&(Ky=!1,Fh=h,Yy=O),Y=h.pendingLanes,Y===0&&(jh=null),zt(x.stateNode),xl(h,Pt()),f!==null)for(C=h.onRecoverableError,x=0;x<f.length;x++)O=f[x],C(O.value,{componentStack:O.stack,digest:O.digest});if(Gy)throw Gy=!1,h=q4,q4=null,h;return(Yy&1)!==0&&h.tag!==0&&im(),Y=h.pendingLanes,(Y&1)!==0?h===H4?Ig++:(Ig=0,H4=h):Ig=0,Q(),null}function im(){if(Fh!==null){var h=Ka(Yy),f=xc.transition,x=on;try{if(xc.transition=null,on=16>h?16:h,Fh===null)var C=!1;else{if(h=Fh,Fh=null,Yy=0,(qn&6)!==0)throw Error(r(331));var O=qn;for(qn|=4,cr=h.current;cr!==null;){var Y=cr,ue=Y.child;if((cr.flags&16)!==0){var De=Y.deletions;if(De!==null){for(var Ue=0;Ue<De.length;Ue++){var pt=De[Ue];for(cr=pt;cr!==null;){var Ft=cr;switch(Ft.tag){case 0:case 11:case 15:Ag(8,Ft,Y)}var Mt=Ft.child;if(Mt!==null)Mt.return=Ft,cr=Mt;else for(;cr!==null;){Ft=cr;var jt=Ft.sibling,sr=Ft.return;if(D9(Ft),Ft===pt){cr=null;break}if(jt!==null){jt.return=sr,cr=jt;break}cr=sr}}}var fr=Y.alternate;if(fr!==null){var xr=fr.child;if(xr!==null){fr.child=null;do{var Mi=xr.sibling;xr.sibling=null,xr=Mi}while(xr!==null)}}cr=Y}}if((Y.subtreeFlags&2064)!==0&&ue!==null)ue.return=Y,cr=ue;else e:for(;cr!==null;){if(Y=cr,(Y.flags&2048)!==0)switch(Y.tag){case 0:case 11:case 15:Ag(9,Y,Y.return)}var st=Y.sibling;if(st!==null){st.return=Y.return,cr=st;break e}cr=Y.return}}var qe=h.current;for(cr=qe;cr!==null;){ue=cr;var ct=ue.child;if((ue.subtreeFlags&2064)!==0&&ct!==null)ct.return=ue,cr=ct;else e:for(ue=qe;cr!==null;){if(De=cr,(De.flags&2048)!==0)try{switch(De.tag){case 0:case 11:case 15:qy(9,De)}}catch(wr){_i(De,De.return,wr)}if(De===ue){cr=null;break e}var qt=De.sibling;if(qt!==null){qt.return=De.return,cr=qt;break e}cr=De.return}}if(qn=O,Q(),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(Qi,h)}catch{}C=!0}return C}finally{on=x,xc.transition=f}}return!1}function J9(h,f,x){f=tm(x,f),f=g9(h,f,1),h=ui(h,f,1),f=el(),h!==null&&(Yo(h,1,f),xl(h,f))}function _i(h,f,x){if(h.tag===3)J9(h,h,x);else for(;f!==null;){if(f.tag===3){J9(f,h,x);break}else if(f.tag===1){var C=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(jh===null||!jh.has(C))){h=tm(x,h),h=x9(f,h,1),f=ui(f,h,1),h=el(),f!==null&&(Yo(f,1,h),xl(f,h));break}}f=f.return}}function mG(h,f,x){var C=h.pingCache;C!==null&&C.delete(f),f=el(),h.pingedLanes|=h.suspendedLanes&x,Da===h&&(no&x)===x&&(wa===4||wa===3&&(no&130023424)===no&&500>Pt()-$4?u0(h,0):z4|=x),xl(h,f)}function Z9(h,f){f===0&&((h.mode&1)===0?f=1:(f=Vn,Vn<<=1,(Vn&130023424)===0&&(Vn=4194304)));var x=el();h=os(h,f),h!==null&&(Yo(h,f,x),xl(h,x))}function gG(h){var f=h.memoizedState,x=0;f!==null&&(x=f.retryLane),Z9(h,x)}function xG(h,f){var x=0;switch(h.tag){case 13:var C=h.stateNode,O=h.memoizedState;O!==null&&(x=O.retryLane);break;case 19:C=h.stateNode;break;default:throw Error(r(314))}C!==null&&C.delete(f),Z9(h,x)}var eC;eC=function(h,f,x){if(h!==null)if(h.memoizedProps!==f.pendingProps||Eo.current)ml=!0;else{if((h.lanes&x)===0&&(f.flags&128)===0)return ml=!1,sG(h,f,x);ml=(h.flags&131072)!==0}else ml=!1,kt&&(f.flags&1048576)!==0&&Ze(f,ge,f.index);switch(f.lanes=0,f.tag){case 2:var C=f.type;zy(h,f),h=f.pendingProps;var O=Nh(f,ya.current);Xs(f,x),O=i0(null,f,C,h,O,x);var Y=gc();return f.flags|=1,typeof O=="object"&&O!==null&&typeof O.render=="function"&&O.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Co(C)?(Y=!0,Cd(f)):Y=!1,f.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,va(f),O.updater=Vy,f.stateNode=O,O._reactInternals=f,A4(f,C,h,x),f=P4(null,f,C,!0,Y,x)):(f.tag=0,kt&&Y&&wt(f),Zo(null,f,O,x),f=f.child),f;case 16:C=f.elementType;e:{switch(zy(h,f),h=f.pendingProps,O=C._init,C=O(C._payload),f.type=C,O=f.tag=vG(C),h=Xc(C,h),O){case 0:f=I4(null,f,C,h,x);break e;case 1:f=C9(null,f,C,h,x);break e;case 11:f=_9(null,f,C,h,x);break e;case 14:f=b9(null,f,C,Xc(C.type,h),x);break e}throw Error(r(306,C,""))}return f;case 0:return C=f.type,O=f.pendingProps,O=f.elementType===C?O:Xc(C,O),I4(h,f,C,O,x);case 1:return C=f.type,O=f.pendingProps,O=f.elementType===C?O:Xc(C,O),C9(h,f,C,O,x);case 3:e:{if(A9(f),h===null)throw Error(r(387));C=f.pendingProps,Y=f.memoizedState,O=Y.element,Ao(h,f),Fa(f,C,null,x);var ue=f.memoizedState;if(C=ue.element,Y.isDehydrated)if(Y={element:C,isDehydrated:!1,cache:ue.cache,pendingSuspenseBoundaries:ue.pendingSuspenseBoundaries,transitions:ue.transitions},f.updateQueue.baseState=Y,f.memoizedState=Y,f.flags&256){O=tm(Error(r(423)),f),f=N9(h,f,C,x,O);break e}else if(C!==O){O=tm(Error(r(424)),f),f=N9(h,f,C,x,O);break e}else for(vt=to(f.stateNode.containerInfo.firstChild),xt=f,kt=!0,St=null,x=Os(f,null,C,x),f.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(lr(),C===O){f=Nd(h,f,x);break e}Zo(h,f,C,x)}f=f.child}return f;case 5:return jy(f),h===null&&dr(f),C=f.type,O=f.pendingProps,Y=h!==null?h.memoizedProps:null,ue=O.children,gg(C,O)?ue=null:Y!==null&&gg(C,Y)&&(f.flags|=32),E9(h,f),Zo(h,f,ue,x),f.child;case 6:return h===null&&dr(f),null;case 13:return T9(h,f,x);case 4:return Th(f,f.stateNode.containerInfo),C=f.pendingProps,h===null?f.child=yi(f,null,C,x):Zo(h,f,C,x),f.child;case 11:return C=f.type,O=f.pendingProps,O=f.elementType===C?O:Xc(C,O),_9(h,f,C,O,x);case 7:return Zo(h,f,f.pendingProps,x),f.child;case 8:return Zo(h,f,f.pendingProps.children,x),f.child;case 12:return Zo(h,f,f.pendingProps.children,x),f.child;case 10:e:{if(C=f.type._context,O=f.pendingProps,Y=f.memoizedProps,ue=O.value,ts(Di,C._currentValue),C._currentValue=ue,Y!==null)if(Fi(Y.value,ue)){if(Y.children===O.children&&!Eo.current){f=Nd(h,f,x);break e}}else for(Y=f.child,Y!==null&&(Y.return=f);Y!==null;){var De=Y.dependencies;if(De!==null){ue=Y.child;for(var Ue=De.firstContext;Ue!==null;){if(Ue.context===C){if(Y.tag===1){Ue=ci(-1,x&-x),Ue.tag=2;var pt=Y.updateQueue;if(pt!==null){pt=pt.shared;var Ft=pt.pending;Ft===null?Ue.next=Ue:(Ue.next=Ft.next,Ft.next=Ue),pt.pending=Ue}}Y.lanes|=x,Ue=Y.alternate,Ue!==null&&(Ue.lanes|=x),$n(Y.return,x,f),De.lanes|=x;break}Ue=Ue.next}}else if(Y.tag===10)ue=Y.type===f.type?null:Y.child;else if(Y.tag===18){if(ue=Y.return,ue===null)throw Error(r(341));ue.lanes|=x,De=ue.alternate,De!==null&&(De.lanes|=x),$n(ue,x,f),ue=Y.sibling}else ue=Y.child;if(ue!==null)ue.return=Y;else for(ue=Y;ue!==null;){if(ue===f){ue=null;break}if(Y=ue.sibling,Y!==null){Y.return=ue.return,ue=Y;break}ue=ue.return}Y=ue}Zo(h,f,O.children,x),f=f.child}return f;case 9:return O=f.type,C=f.pendingProps.children,Xs(f,x),O=Qs(O),C=C(O),f.flags|=1,Zo(h,f,C,x),f.child;case 14:return C=f.type,O=Xc(C,f.pendingProps),O=Xc(C.type,O),b9(h,f,C,O,x);case 15:return k9(h,f,f.type,f.pendingProps,x);case 17:return C=f.type,O=f.pendingProps,O=f.elementType===C?O:Xc(C,O),zy(h,f),f.tag=1,Co(C)?(h=!0,Cd(f)):h=!1,Xs(f,x),p9(f,C,O),A4(f,C,O,x),P4(null,f,C,!0,h,x);case 19:return P9(h,f,x);case 22:return S9(h,f,x)}throw Error(r(156,f.tag))};function tC(h,f){return Tt(h,f)}function yG(h,f,x,C){this.tag=h,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yc(h,f,x,C){return new yG(h,f,x,C)}function Q4(h){return h=h.prototype,!(!h||!h.isReactComponent)}function vG(h){if(typeof h=="function")return Q4(h)?1:0;if(h!=null){if(h=h.$$typeof,h===F)return 11;if(h===fe)return 14}return 2}function Mh(h,f){var x=h.alternate;return x===null?(x=yc(h.tag,f,h.key,h.mode),x.elementType=h.elementType,x.type=h.type,x.stateNode=h.stateNode,x.alternate=h,h.alternate=x):(x.pendingProps=f,x.type=h.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=h.flags&14680064,x.childLanes=h.childLanes,x.lanes=h.lanes,x.child=h.child,x.memoizedProps=h.memoizedProps,x.memoizedState=h.memoizedState,x.updateQueue=h.updateQueue,f=h.dependencies,x.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},x.sibling=h.sibling,x.index=h.index,x.ref=h.ref,x}function Zy(h,f,x,C,O,Y){var ue=2;if(C=h,typeof h=="function")Q4(h)&&(ue=1);else if(typeof h=="string")ue=5;else e:switch(h){case L:return h0(x.children,O,Y,f);case A:ue=8,O|=8;break;case E:return h=yc(12,x,f,O|2),h.elementType=E,h.lanes=Y,h;case V:return h=yc(13,x,f,O),h.elementType=V,h.lanes=Y,h;case Z:return h=yc(19,x,f,O),h.elementType=Z,h.lanes=Y,h;case he:return ev(x,O,Y,f);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case D:ue=10;break e;case R:ue=9;break e;case F:ue=11;break e;case fe:ue=14;break e;case xe:ue=16,C=null;break e}throw Error(r(130,h==null?h:typeof h,""))}return f=yc(ue,x,f,O),f.elementType=h,f.type=C,f.lanes=Y,f}function h0(h,f,x,C){return h=yc(7,h,C,f),h.lanes=x,h}function ev(h,f,x,C){return h=yc(22,h,C,f),h.elementType=he,h.lanes=x,h.stateNode={isHidden:!1},h}function J4(h,f,x){return h=yc(6,h,null,f),h.lanes=x,h}function Z4(h,f,x){return f=yc(4,h.children!==null?h.children:[],h.key,f),f.lanes=x,f.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},f}function wG(h,f,x,C,O){this.tag=f,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ko(0),this.expirationTimes=Ko(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ko(0),this.identifierPrefix=C,this.onRecoverableError=O,this.mutableSourceEagerHydrationData=null}function e3(h,f,x,C,O,Y,ue,De,Ue){return h=new wG(h,f,x,De,Ue),f===1?(f=1,Y===!0&&(f|=8)):f=0,Y=yc(3,null,null,f),h.current=Y,Y.stateNode=h,Y.memoizedState={element:C,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},va(Y),h}function _G(h,f,x){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:C==null?null:""+C,children:h,containerInfo:f,implementation:x}}function rC(h){if(!h)return Pu;h=h._reactInternals;e:{if(Ie(h)!==h||h.tag!==1)throw Error(r(170));var f=h;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Co(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(r(171))}if(h.tag===1){var x=h.type;if(Co(x))return wg(h,x,f)}return f}function nC(h,f,x,C,O,Y,ue,De,Ue){return h=e3(x,C,!0,h,O,Y,ue,De,Ue),h.context=rC(null),x=h.current,C=el(),O=Dh(x),Y=ci(C,O),Y.callback=f??null,ui(x,Y,O),h.current.lanes=O,Yo(h,O,C),xl(h,C),h}function tv(h,f,x,C){var O=f.current,Y=el(),ue=Dh(O);return x=rC(x),f.context===null?f.context=x:f.pendingContext=x,f=ci(Y,ue),f.payload={element:h},C=C===void 0?null:C,C!==null&&(f.callback=C),h=ui(O,f,ue),h!==null&&(Zc(h,O,ue,Y),ja(h,O,ue)),ue}function rv(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function sC(h,f){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var x=h.retryLane;h.retryLane=x!==0&&x<f?x:f}}function t3(h,f){sC(h,f),(h=h.alternate)&&sC(h,f)}function bG(){return null}var iC=typeof reportError=="function"?reportError:function(h){console.error(h)};function r3(h){this._internalRoot=h}nv.prototype.render=r3.prototype.render=function(h){var f=this._internalRoot;if(f===null)throw Error(r(409));tv(h,f,null,null)},nv.prototype.unmount=r3.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var f=h.containerInfo;c0(function(){tv(null,h,null,null)}),f[Ra]=null}};function nv(h){this._internalRoot=h}nv.prototype.unstable_scheduleHydration=function(h){if(h){var f=mh();h={blockedOn:null,target:h,priority:f};for(var x=0;x<ll.length&&f!==0&&f<ll[x].priority;x++);ll.splice(x,0,h),x===0&&xh(h)}};function n3(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function sv(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function aC(){}function kG(h,f,x,C,O){if(O){if(typeof C=="function"){var Y=C;C=function(){var pt=rv(ue);Y.call(pt)}}var ue=nC(f,C,h,0,null,!1,!1,"",aC);return h._reactRootContainer=ue,h[Ra]=ue.current,_d(h.nodeType===8?h.parentNode:h),c0(),ue}for(;O=h.lastChild;)h.removeChild(O);if(typeof C=="function"){var De=C;C=function(){var pt=rv(Ue);De.call(pt)}}var Ue=e3(h,0,!1,null,null,!1,!1,"",aC);return h._reactRootContainer=Ue,h[Ra]=Ue.current,_d(h.nodeType===8?h.parentNode:h),c0(function(){tv(f,Ue,x,C)}),Ue}function iv(h,f,x,C,O){var Y=x._reactRootContainer;if(Y){var ue=Y;if(typeof O=="function"){var De=O;O=function(){var Ue=rv(ue);De.call(Ue)}}tv(f,ue,h,O)}else ue=kG(x,f,h,O,C);return rv(ue)}wu=function(h){switch(h.tag){case 3:var f=h.stateNode;if(f.current.memoizedState.isDehydrated){var x=Sn(f.pendingLanes);x!==0&&(Il(f,x|1),xl(f,Pt()),(qn&6)===0&&(sm=Pt()+500,Q()))}break;case 13:c0(function(){var C=os(h,1);if(C!==null){var O=el();Zc(C,h,1,O)}}),t3(h,1)}},_u=function(h){if(h.tag===13){var f=os(h,134217728);if(f!==null){var x=el();Zc(f,h,134217728,x)}t3(h,134217728)}},ph=function(h){if(h.tag===13){var f=Dh(h),x=os(h,f);if(x!==null){var C=el();Zc(x,h,f,C)}t3(h,f)}},mh=function(){return on},bu=function(h,f){var x=on;try{return on=h,f()}finally{on=x}},Bn=function(h,f,x){switch(f){case"input":if(ze(h,x),f=x.name,x.type==="radio"&&f!=null){for(x=h;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<x.length;f++){var C=x[f];if(C!==h&&C.form===h.form){var O=n0(C);if(!O)throw Error(r(90));ne(C),ze(C,O)}}}break;case"textarea":Le(h,x);break;case"select":f=x.value,f!=null&&ut(h,!!x.multiple,f,!1)}},ms=K4,Pi=c0;var SG={usingClientEntryPoint:!1,Events:[Ah,Sd,n0,Jr,ha,K4]},Pg={findFiberByHostInstance:Iu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EG={bundleType:Pg.bundleType,version:Pg.version,rendererPackageName:Pg.rendererPackageName,rendererConfig:Pg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=et(h),h===null?null:h.stateNode},findFiberByHostInstance:Pg.findFiberByHostInstance||bG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var av=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!av.isDisabled&&av.supportsFiber)try{Qi=av.inject(EG),Fe=av}catch{}}return yl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SG,yl.createPortal=function(h,f){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!n3(f))throw Error(r(200));return _G(h,f,null,x)},yl.createRoot=function(h,f){if(!n3(h))throw Error(r(299));var x=!1,C="",O=iC;return f!=null&&(f.unstable_strictMode===!0&&(x=!0),f.identifierPrefix!==void 0&&(C=f.identifierPrefix),f.onRecoverableError!==void 0&&(O=f.onRecoverableError)),f=e3(h,1,!1,null,null,x,!1,C,O),h[Ra]=f.current,_d(h.nodeType===8?h.parentNode:h),new r3(f)},yl.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var f=h._reactInternals;if(f===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=et(f),h=h===null?null:h.stateNode,h},yl.flushSync=function(h){return c0(h)},yl.hydrate=function(h,f,x){if(!sv(f))throw Error(r(200));return iv(null,h,f,!0,x)},yl.hydrateRoot=function(h,f,x){if(!n3(h))throw Error(r(405));var C=x!=null&&x.hydratedSources||null,O=!1,Y="",ue=iC;if(x!=null&&(x.unstable_strictMode===!0&&(O=!0),x.identifierPrefix!==void 0&&(Y=x.identifierPrefix),x.onRecoverableError!==void 0&&(ue=x.onRecoverableError)),f=nC(f,null,h,1,x??null,O,!1,Y,ue),h[Ra]=f.current,_d(h),C)for(h=0;h<C.length;h++)x=C[h],O=x._getVersion,O=O(x._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[x,O]:f.mutableSourceEagerHydrationData.push(x,O);return new nv(f)},yl.render=function(h,f,x){if(!sv(f))throw Error(r(200));return iv(null,h,f,!1,x)},yl.unmountComponentAtNode=function(h){if(!sv(h))throw Error(r(40));return h._reactRootContainer?(c0(function(){iv(null,null,h,!1,function(){h._reactRootContainer=null,h[Ra]=null})}),!0):!1},yl.unstable_batchedUpdates=K4,yl.unstable_renderSubtreeIntoContainer=function(h,f,x,C){if(!sv(x))throw Error(r(200));if(h==null||h._reactInternals===void 0)throw Error(r(38));return iv(h,f,x,!1,C)},yl.version="18.3.1-next-f1338f8080-20240426",yl}var pC;function gj(){if(pC)return a3.exports;pC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),a3.exports=LG(),a3.exports}var mC;function jG(){if(mC)return ov;mC=1;var t=gj();return ov.createRoot=t.createRoot,ov.hydrateRoot=t.hydrateRoot,ov}var FG=jG(),Ki=gj();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function W2(){return W2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},W2.apply(this,arguments)}var nf;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(nf||(nf={}));const gC="popstate";function DG(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:a,hash:o}=n.location;return s6("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:qw(s)}return MG(e,r,null,t)}function Hi(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xj(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OG(){return Math.random().toString(36).substr(2,8)}function xC(t,e){return{usr:t.state,key:t.key,idx:e}}function s6(t,e,r,n){return r===void 0&&(r=null),W2({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?I1(e):e,{state:r,key:e&&e.key||n||OG()})}function qw(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function I1(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function MG(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o=nf.Pop,l=null,c=d();c==null&&(c=0,a.replaceState(W2({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function p(){o=nf.Pop;let _=d(),S=_==null?null:_-c;c=_,l&&l({action:o,location:w.location,delta:S})}function g(_,S){o=nf.Push;let T=s6(w.location,_,S);c=d()+1;let I=xC(T,c),M=w.createHref(T);try{a.pushState(I,"",M)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;s.location.assign(M)}i&&l&&l({action:o,location:w.location,delta:1})}function m(_,S){o=nf.Replace;let T=s6(w.location,_,S);c=d();let I=xC(T,c),M=w.createHref(T);a.replaceState(I,"",M),i&&l&&l({action:o,location:w.location,delta:0})}function y(_){let S=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof _=="string"?_:qw(_);return T=T.replace(/ $/,"%20"),Hi(S,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,S)}let w={get action(){return o},get location(){return t(s,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(gC,p),l=_,()=>{s.removeEventListener(gC,p),l=null}},createHref(_){return e(s,_)},createURL:y,encodeLocation(_){let S=y(_);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:m,go(_){return a.go(_)}};return w}var yC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(yC||(yC={}));function BG(t,e,r){return r===void 0&&(r="/"),VG(t,e,r)}function VG(t,e,r,n){let s=typeof e=="string"?I1(e):e,i=m8(s.pathname||"/",r);if(i==null)return null;let a=yj(t);UG(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=ZG(i);o=XG(a[l],c)}return o}function yj(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(Hi(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=uf([n,l.relativePath]),d=r.concat(l);i.children&&i.children.length>0&&(Hi(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),yj(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:KG(c,i.index),routesMeta:d})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let l of vj(i.path))s(i,a,l)}),e}function vj(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=vj(n.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function UG(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:YG(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const zG=/^:[\w-]+$/,$G=3,qG=2,HG=1,WG=10,GG=-2,vC=t=>t==="*";function KG(t,e){let r=t.split("/"),n=r.length;return r.some(vC)&&(n+=GG),e&&(n+=qG),r.filter(s=>!vC(s)).reduce((s,i)=>s+(zG.test(i)?$G:i===""?HG:WG),n)}function YG(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function XG(t,e,r){let{routesMeta:n}=t,s={},i="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",p=QG({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),g=l.route;if(!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:uf([i,p.pathname]),pathnameBase:nK(uf([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=uf([i,p.pathnameBase]))}return a}function QG(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=JG(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((c,d,p)=>{let{paramName:g,isOptional:m}=d;if(g==="*"){let w=o[p]||"";a=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const y=o[p];return m&&!y?c[g]=void 0:c[g]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function JG(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),xj(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function ZG(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xj(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function m8(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function eK(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?I1(t):t;return{pathname:r?r.startsWith("/")?r:tK(r,e):e,search:sK(n),hash:iK(s)}}function tK(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function c3(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rK(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function g8(t,e){let r=rK(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function x8(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=I1(t):(s=W2({},t),Hi(!s.pathname||!s.pathname.includes("?"),c3("?","pathname","search",s)),Hi(!s.pathname||!s.pathname.includes("#"),c3("#","pathname","hash",s)),Hi(!s.search||!s.search.includes("#"),c3("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=r;else{let p=e.length-1;if(!n&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}o=p>=0?e[p]:"/"}let l=eK(s,o),c=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const uf=t=>t.join("/").replace(/\/\/+/g,"/"),nK=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),sK=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,iK=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function aK(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const wj=["post","put","patch","delete"];new Set(wj);const oK=["get",...wj];new Set(oK);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function G2(){return G2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},G2.apply(this,arguments)}const y8=j.createContext(null),lK=j.createContext(null),Lf=j.createContext(null),i_=j.createContext(null),ld=j.createContext({outlet:null,matches:[],isDataRoute:!1}),_j=j.createContext(null);function cK(t,e){let{relative:r}=e===void 0?{}:e;P1()||Hi(!1);let{basename:n,navigator:s}=j.useContext(Lf),{hash:i,pathname:a,search:o}=kj(t,{relative:r}),l=a;return n!=="/"&&(l=a==="/"?n:uf([n,a])),s.createHref({pathname:l,search:o,hash:i})}function P1(){return j.useContext(i_)!=null}function Nl(){return P1()||Hi(!1),j.useContext(i_).location}function bj(t){j.useContext(Lf).static||j.useLayoutEffect(t)}function Jn(){let{isDataRoute:t}=j.useContext(ld);return t?SK():uK()}function uK(){P1()||Hi(!1);let t=j.useContext(y8),{basename:e,future:r,navigator:n}=j.useContext(Lf),{matches:s}=j.useContext(ld),{pathname:i}=Nl(),a=JSON.stringify(g8(s,r.v7_relativeSplatPath)),o=j.useRef(!1);return bj(()=>{o.current=!0}),j.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let p=x8(c,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:uf([e,p.pathname])),(d.replace?n.replace:n.push)(p,d.state,d)},[e,n,a,i,t])}const dK=j.createContext(null);function hK(t){let e=j.useContext(ld).outlet;return e&&j.createElement(dK.Provider,{value:t},e)}function a_(){let{matches:t}=j.useContext(ld),e=t[t.length-1];return e?e.params:{}}function kj(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=j.useContext(Lf),{matches:s}=j.useContext(ld),{pathname:i}=Nl(),a=JSON.stringify(g8(s,n.v7_relativeSplatPath));return j.useMemo(()=>x8(t,JSON.parse(a),i,r==="path"),[t,a,i,r])}function fK(t,e){return pK(t,e)}function pK(t,e,r,n){P1()||Hi(!1);let{navigator:s}=j.useContext(Lf),{matches:i}=j.useContext(ld),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=Nl(),d;if(e){var p;let _=typeof e=="string"?I1(e):e;l==="/"||(p=_.pathname)!=null&&p.startsWith(l)||Hi(!1),d=_}else d=c;let g=d.pathname||"/",m=g;if(l!=="/"){let _=l.replace(/^\//,"").split("/");m="/"+g.replace(/^\//,"").split("/").slice(_.length).join("/")}let y=BG(t,{pathname:m}),w=vK(y&&y.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:uf([l,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:uf([l,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,r,n);return e&&w?j.createElement(i_.Provider,{value:{location:G2({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:nf.Pop}},w):w}function mK(){let t=kK(),e=aK(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),r?j.createElement("pre",{style:s},r):null,null)}const gK=j.createElement(mK,null);class xK extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?j.createElement(ld.Provider,{value:this.props.routeContext},j.createElement(_j.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yK(t){let{routeContext:e,match:r,children:n}=t,s=j.useContext(y8);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),j.createElement(ld.Provider,{value:e},n)}function vK(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=(s=r)==null?void 0:s.errors;if(o!=null){let d=a.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);d>=0||Hi(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let p=a[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:g,errors:m}=r,y=p.route.loader&&g[p.route.id]===void 0&&(!m||m[p.route.id]===void 0);if(p.route.lazy||y){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,p,g)=>{let m,y=!1,w=null,_=null;r&&(m=o&&p.route.id?o[p.route.id]:void 0,w=p.route.errorElement||gK,l&&(c<0&&g===0?(EK("route-fallback"),y=!0,_=null):c===g&&(y=!0,_=p.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,g+1)),T=()=>{let I;return m?I=w:y?I=_:p.route.Component?I=j.createElement(p.route.Component,null):p.route.element?I=p.route.element:I=d,j.createElement(yK,{match:p,routeContext:{outlet:d,matches:S,isDataRoute:r!=null},children:I})};return r&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?j.createElement(xK,{location:r.location,revalidation:r.revalidation,component:w,error:m,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):T()},null)}var Sj=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(Sj||{}),Ej=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(Ej||{});function wK(t){let e=j.useContext(y8);return e||Hi(!1),e}function _K(t){let e=j.useContext(lK);return e||Hi(!1),e}function bK(t){let e=j.useContext(ld);return e||Hi(!1),e}function Cj(t){let e=bK(),r=e.matches[e.matches.length-1];return r.route.id||Hi(!1),r.route.id}function kK(){var t;let e=j.useContext(_j),r=_K(),n=Cj();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function SK(){let{router:t}=wK(Sj.UseNavigateStable),e=Cj(Ej.UseNavigateStable),r=j.useRef(!1);return bj(()=>{r.current=!0}),j.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,G2({fromRouteId:e},i)))},[t,e])}const wC={};function EK(t,e,r){wC[t]||(wC[t]=!0)}function CK(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function _0(t){let{to:e,replace:r,state:n,relative:s}=t;P1()||Hi(!1);let{future:i,static:a}=j.useContext(Lf),{matches:o}=j.useContext(ld),{pathname:l}=Nl(),c=Jn(),d=x8(e,g8(o,i.v7_relativeSplatPath),l,s==="path"),p=JSON.stringify(d);return j.useEffect(()=>c(JSON.parse(p),{replace:r,state:n,relative:s}),[c,p,s,r,n]),null}function v8(t){return hK(t.context)}function Qn(t){Hi(!1)}function AK(t){let{basename:e="/",children:r=null,location:n,navigationType:s=nf.Pop,navigator:i,static:a=!1,future:o}=t;P1()&&Hi(!1);let l=e.replace(/^\/*/,"/"),c=j.useMemo(()=>({basename:l,navigator:i,static:a,future:G2({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof n=="string"&&(n=I1(n));let{pathname:d="/",search:p="",hash:g="",state:m=null,key:y="default"}=n,w=j.useMemo(()=>{let _=m8(d,l);return _==null?null:{location:{pathname:_,search:p,hash:g,state:m,key:y},navigationType:s}},[l,d,p,g,m,y,s]);return w==null?null:j.createElement(Lf.Provider,{value:c},j.createElement(i_.Provider,{children:r,value:w}))}function _C(t){let{children:e,location:r}=t;return fK(i6(e),r)}new Promise(()=>{});function i6(t,e){e===void 0&&(e=[]);let r=[];return j.Children.forEach(t,(n,s)=>{if(!j.isValidElement(n))return;let i=[...e,s];if(n.type===j.Fragment){r.push.apply(r,i6(n.props.children,i));return}n.type!==Qn&&Hi(!1),!n.props.index||!n.props.children||Hi(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=i6(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function a6(){return a6=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},a6.apply(this,arguments)}function NK(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function TK(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function IK(t,e){return t.button===0&&(!e||e==="_self")&&!TK(t)}function o6(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function PK(t,e){let r=o6(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(i=>{r.append(s,i)})}),r}const RK=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],LK="6";try{window.__reactRouterVersion=LK}catch{}const jK="startTransition",bC=$w[jK];function FK(t){let{basename:e,children:r,future:n,window:s}=t,i=j.useRef();i.current==null&&(i.current=DG({window:s,v5Compat:!0}));let a=i.current,[o,l]=j.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},d=j.useCallback(p=>{c&&bC?bC(()=>l(p)):l(p)},[l,c]);return j.useLayoutEffect(()=>a.listen(d),[a,d]),j.useEffect(()=>CK(n),[n]),j.createElement(AK,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:a,future:n})}const DK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y0=j.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:o,target:l,to:c,preventScrollReset:d,viewTransition:p}=e,g=NK(e,RK),{basename:m}=j.useContext(Lf),y,w=!1;if(typeof c=="string"&&OK.test(c)&&(y=c,DK))try{let I=new URL(window.location.href),M=c.startsWith("//")?new URL(I.protocol+c):new URL(c),K=m8(M.pathname,m);M.origin===I.origin&&K!=null?c=K+M.search+M.hash:w=!0}catch{}let _=cK(c,{relative:s}),S=MK(c,{replace:a,state:o,target:l,preventScrollReset:d,relative:s,viewTransition:p});function T(I){n&&n(I),I.defaultPrevented||S(I)}return j.createElement("a",a6({},g,{href:y||_,onClick:w||i?n:T,ref:r,target:l}))});var kC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(kC||(kC={}));var SC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(SC||(SC={}));function MK(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,l=Jn(),c=Nl(),d=kj(t,{relative:a});return j.useCallback(p=>{if(IK(p,r)){p.preventDefault();let g=n!==void 0?n:qw(c)===qw(d);l(t,{replace:g,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[c,l,d,n,s,r,t,i,a,o])}function BK(t){let e=j.useRef(o6(t)),r=j.useRef(!1),n=Nl(),s=j.useMemo(()=>PK(n.search,r.current?null:e.current),[n.search]),i=Jn(),a=j.useCallback((o,l)=>{const c=o6(typeof o=="function"?o(s):o);r.current=!0,i("?"+c,l)},[i,s]);return[s,a]}var EC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},VK=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Nj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,p=(i&3)<<4|o>>4;let g=(o&15)<<2|c>>6,m=c&63;l||(m=64,a||(g=64)),n.push(r[d],r[p],r[g],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Aj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VK(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const p=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||p==null)throw new UK;const g=i<<2|o>>4;if(n.push(g),c!==64){const m=o<<4&240|c>>2;if(n.push(m),p!==64){const y=c<<6&192|p;n.push(y)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UK extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zK=function(t){const e=Aj(t);return Nj.encodeByteArray(e,!0)},Hw=function(t){return zK(t).replace(/\./g,"")},Tj=function(t){try{return Nj.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $K(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qK=()=>$K().__FIREBASE_DEFAULTS__,HK=()=>{if(typeof process>"u"||typeof EC>"u")return;const t=EC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},WK=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Tj(t[1]);return e&&JSON.parse(e)},o_=()=>{try{return qK()||HK()||WK()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ij=t=>{var e,r;return(r=(e=o_())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},w8=t=>{const e=Ij(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Pj=()=>{var t;return(t=o_())===null||t===void 0?void 0:t.config},Rj=t=>{var e;return(e=o_())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GK{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Hw(JSON.stringify(r)),Hw(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KK(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sa())}function YK(){var t;const e=(t=o_())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XK(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QK(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function JK(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZK(){const t=Sa();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jj(){return!YK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fj(){try{return typeof indexedDB=="object"}catch{return!1}}function eY(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tY="FirebaseError";class xu extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=tY,Object.setPrototypeOf(this,xu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jx.prototype.create)}}class jx{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?rY(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new xu(s,o,n)}}function rY(t,e){return t.replace(nY,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const nY=/\{\$([^}]+)}/g;function sY(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ff(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(CC(i)&&CC(a)){if(!ff(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function CC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Wg(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Gg(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function iY(t,e){const r=new aY(t,e);return r.subscribe.bind(r)}class aY{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");oY(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=u3),s.error===void 0&&(s.error=u3),s.complete===void 0&&(s.complete=u3);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oY(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function u3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t){return t&&t._delegate?t._delegate:t}class Gd{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lY{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new GK;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e?.identifier),s=(r=e?.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uY(e))try{this.getOrInitializeService({instanceIdentifier:g0})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=g0){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=g0){return this.instances.has(e)}getOptions(e=g0){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:cY(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=g0){return this.component?this.component.multipleInstances?e:g0:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cY(t){return t===g0?void 0:t}function uY(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dY{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new lY(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Tn||(Tn={}));const hY={debug:Tn.DEBUG,verbose:Tn.VERBOSE,info:Tn.INFO,warn:Tn.WARN,error:Tn.ERROR,silent:Tn.SILENT},fY=Tn.INFO,pY={[Tn.DEBUG]:"log",[Tn.VERBOSE]:"log",[Tn.INFO]:"info",[Tn.WARN]:"warn",[Tn.ERROR]:"error"},mY=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=pY[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _8{constructor(e){this.name=e,this._logLevel=fY,this._logHandler=mY,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Tn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hY[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Tn.DEBUG,...e),this._logHandler(this,Tn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Tn.VERBOSE,...e),this._logHandler(this,Tn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Tn.INFO,...e),this._logHandler(this,Tn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Tn.WARN,...e),this._logHandler(this,Tn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Tn.ERROR,...e),this._logHandler(this,Tn.ERROR,...e)}}const gY=(t,e)=>e.some(r=>t instanceof r);let AC,NC;function xY(){return AC||(AC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yY(){return NC||(NC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dj=new WeakMap,l6=new WeakMap,Oj=new WeakMap,d3=new WeakMap,b8=new WeakMap;function vY(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(df(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&Dj.set(r,t)}).catch(()=>{}),b8.set(e,t),e}function wY(t){if(l6.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});l6.set(t,e)}let c6={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return l6.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Oj.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return df(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _Y(t){c6=t(c6)}function bY(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(h3(this),e,...r);return Oj.set(n,e.sort?e.sort():[e]),df(n)}:yY().includes(t)?function(...e){return t.apply(h3(this),e),df(Dj.get(this))}:function(...e){return df(t.apply(h3(this),e))}}function kY(t){return typeof t=="function"?bY(t):(t instanceof IDBTransaction&&wY(t),gY(t,xY())?new Proxy(t,c6):t)}function df(t){if(t instanceof IDBRequest)return vY(t);if(d3.has(t))return d3.get(t);const e=kY(t);return e!==t&&(d3.set(t,e),b8.set(e,t)),e}const h3=t=>b8.get(t);function SY(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=df(a);return n&&a.addEventListener("upgradeneeded",l=>{n(df(a.result),l.oldVersion,l.newVersion,df(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const EY=["get","getKey","getAll","getAllKeys","count"],CY=["put","add","delete","clear"],f3=new Map;function TC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(f3.get(e))return f3.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=CY.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||EY.includes(r)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&l.done]))[0]};return f3.set(e,i),i}_Y(t=>({...t,get:(e,r,n)=>TC(e,r)||t.get(e,r,n),has:(e,r)=>!!TC(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AY{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(NY(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function NY(t){const e=t.getComponent();return e?.type==="VERSION"}const u6="@firebase/app",IC="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd=new _8("@firebase/app"),TY="@firebase/app-compat",IY="@firebase/analytics-compat",PY="@firebase/analytics",RY="@firebase/app-check-compat",LY="@firebase/app-check",jY="@firebase/auth",FY="@firebase/auth-compat",DY="@firebase/database",OY="@firebase/data-connect",MY="@firebase/database-compat",BY="@firebase/functions",VY="@firebase/functions-compat",UY="@firebase/installations",zY="@firebase/installations-compat",$Y="@firebase/messaging",qY="@firebase/messaging-compat",HY="@firebase/performance",WY="@firebase/performance-compat",GY="@firebase/remote-config",KY="@firebase/remote-config-compat",YY="@firebase/storage",XY="@firebase/storage-compat",QY="@firebase/firestore",JY="@firebase/vertexai-preview",ZY="@firebase/firestore-compat",eX="firebase",tX="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="[DEFAULT]",rX={[u6]:"fire-core",[TY]:"fire-core-compat",[PY]:"fire-analytics",[IY]:"fire-analytics-compat",[LY]:"fire-app-check",[RY]:"fire-app-check-compat",[jY]:"fire-auth",[FY]:"fire-auth-compat",[DY]:"fire-rtdb",[OY]:"fire-data-connect",[MY]:"fire-rtdb-compat",[BY]:"fire-fn",[VY]:"fire-fn-compat",[UY]:"fire-iid",[zY]:"fire-iid-compat",[$Y]:"fire-fcm",[qY]:"fire-fcm-compat",[HY]:"fire-perf",[WY]:"fire-perf-compat",[GY]:"fire-rc",[KY]:"fire-rc-compat",[YY]:"fire-gcs",[XY]:"fire-gcs-compat",[QY]:"fire-fst",[ZY]:"fire-fst-compat",[JY]:"fire-vertex","fire-js":"fire-js",[eX]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=new Map,nX=new Map,d6=new Map;function PC(t,e){try{t.container.addComponent(e)}catch(r){Kd.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function pf(t){const e=t.name;if(d6.has(e))return Kd.debug(`There were multiple attempts to register component ${e}.`),!1;d6.set(e,t);for(const r of Gw.values())PC(r,t);for(const r of nX.values())PC(r,t);return!0}function bp(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function sX(t,e,r=Ww){bp(t,e).clearInstance(r)}function iu(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iX={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hf=new jx("app","Firebase",iX);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aX{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Gd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp=tX;function Mj(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Ww,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw hf.create("bad-app-name",{appName:String(s)});if(r||(r=Pj()),!r)throw hf.create("no-options");const i=Gw.get(s);if(i){if(ff(r,i.options)&&ff(n,i.config))return i;throw hf.create("duplicate-app",{appName:s})}const a=new dY(s);for(const l of d6.values())a.addComponent(l);const o=new aX(r,n,a);return Gw.set(s,o),o}function l_(t=Ww){const e=Gw.get(t);if(!e&&t===Ww&&Pj())return Mj();if(!e)throw hf.create("no-app",{appName:t});return e}function Pc(t,e,r){var n;let s=(n=rX[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kd.warn(o.join(" "));return}pf(new Gd(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oX="firebase-heartbeat-database",lX=1,K2="firebase-heartbeat-store";let p3=null;function Bj(){return p3||(p3=SY(oX,lX,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(K2)}catch(r){console.warn(r)}}}}).catch(t=>{throw hf.create("idb-open",{originalErrorMessage:t.message})})),p3}async function cX(t){try{const r=(await Bj()).transaction(K2),n=await r.objectStore(K2).get(Vj(t));return await r.done,n}catch(e){if(e instanceof xu)Kd.warn(e.message);else{const r=hf.create("idb-get",{originalErrorMessage:e?.message});Kd.warn(r.message)}}}async function RC(t,e){try{const n=(await Bj()).transaction(K2,"readwrite");await n.objectStore(K2).put(e,Vj(t)),await n.done}catch(r){if(r instanceof xu)Kd.warn(r.message);else{const n=hf.create("idb-set",{originalErrorMessage:r?.message});Kd.warn(n.message)}}}function Vj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uX=1024,dX=720*60*60*1e3;class hX{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new pX(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=LC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=dX}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Kd.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=LC(),{heartbeatsToSend:n,unsentEntries:s}=fX(this._heartbeatsCache.heartbeats),i=Hw(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Kd.warn(r),""}}}function LC(){return new Date().toISOString().substring(0,10)}function fX(t,e=uX){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),jC(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),jC(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class pX{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fj()?eY().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await cX(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return RC(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return RC(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function jC(t){return Hw(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mX(t){pf(new Gd("platform-logger",e=>new AY(e),"PRIVATE")),pf(new Gd("heartbeat",e=>new hX(e),"PRIVATE")),Pc(u6,IC,t),Pc(u6,IC,"esm2017"),Pc("fire-js","")}mX("");var FC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var B0,Uj;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,A){function E(){}E.prototype=A.prototype,L.D=A.prototype,L.prototype=new E,L.prototype.constructor=L,L.C=function(D,R,F){for(var V=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)V[Z-2]=arguments[Z];return A.prototype[R].apply(D,V)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(L,A,E){E||(E=0);var D=Array(16);if(typeof A=="string")for(var R=0;16>R;++R)D[R]=A.charCodeAt(E++)|A.charCodeAt(E++)<<8|A.charCodeAt(E++)<<16|A.charCodeAt(E++)<<24;else for(R=0;16>R;++R)D[R]=A[E++]|A[E++]<<8|A[E++]<<16|A[E++]<<24;A=L.g[0],E=L.g[1],R=L.g[2];var F=L.g[3],V=A+(F^E&(R^F))+D[0]+3614090360&4294967295;A=E+(V<<7&4294967295|V>>>25),V=F+(R^A&(E^R))+D[1]+3905402710&4294967295,F=A+(V<<12&4294967295|V>>>20),V=R+(E^F&(A^E))+D[2]+606105819&4294967295,R=F+(V<<17&4294967295|V>>>15),V=E+(A^R&(F^A))+D[3]+3250441966&4294967295,E=R+(V<<22&4294967295|V>>>10),V=A+(F^E&(R^F))+D[4]+4118548399&4294967295,A=E+(V<<7&4294967295|V>>>25),V=F+(R^A&(E^R))+D[5]+1200080426&4294967295,F=A+(V<<12&4294967295|V>>>20),V=R+(E^F&(A^E))+D[6]+2821735955&4294967295,R=F+(V<<17&4294967295|V>>>15),V=E+(A^R&(F^A))+D[7]+4249261313&4294967295,E=R+(V<<22&4294967295|V>>>10),V=A+(F^E&(R^F))+D[8]+1770035416&4294967295,A=E+(V<<7&4294967295|V>>>25),V=F+(R^A&(E^R))+D[9]+2336552879&4294967295,F=A+(V<<12&4294967295|V>>>20),V=R+(E^F&(A^E))+D[10]+4294925233&4294967295,R=F+(V<<17&4294967295|V>>>15),V=E+(A^R&(F^A))+D[11]+2304563134&4294967295,E=R+(V<<22&4294967295|V>>>10),V=A+(F^E&(R^F))+D[12]+1804603682&4294967295,A=E+(V<<7&4294967295|V>>>25),V=F+(R^A&(E^R))+D[13]+4254626195&4294967295,F=A+(V<<12&4294967295|V>>>20),V=R+(E^F&(A^E))+D[14]+2792965006&4294967295,R=F+(V<<17&4294967295|V>>>15),V=E+(A^R&(F^A))+D[15]+1236535329&4294967295,E=R+(V<<22&4294967295|V>>>10),V=A+(R^F&(E^R))+D[1]+4129170786&4294967295,A=E+(V<<5&4294967295|V>>>27),V=F+(E^R&(A^E))+D[6]+3225465664&4294967295,F=A+(V<<9&4294967295|V>>>23),V=R+(A^E&(F^A))+D[11]+643717713&4294967295,R=F+(V<<14&4294967295|V>>>18),V=E+(F^A&(R^F))+D[0]+3921069994&4294967295,E=R+(V<<20&4294967295|V>>>12),V=A+(R^F&(E^R))+D[5]+3593408605&4294967295,A=E+(V<<5&4294967295|V>>>27),V=F+(E^R&(A^E))+D[10]+38016083&4294967295,F=A+(V<<9&4294967295|V>>>23),V=R+(A^E&(F^A))+D[15]+3634488961&4294967295,R=F+(V<<14&4294967295|V>>>18),V=E+(F^A&(R^F))+D[4]+3889429448&4294967295,E=R+(V<<20&4294967295|V>>>12),V=A+(R^F&(E^R))+D[9]+568446438&4294967295,A=E+(V<<5&4294967295|V>>>27),V=F+(E^R&(A^E))+D[14]+3275163606&4294967295,F=A+(V<<9&4294967295|V>>>23),V=R+(A^E&(F^A))+D[3]+4107603335&4294967295,R=F+(V<<14&4294967295|V>>>18),V=E+(F^A&(R^F))+D[8]+1163531501&4294967295,E=R+(V<<20&4294967295|V>>>12),V=A+(R^F&(E^R))+D[13]+2850285829&4294967295,A=E+(V<<5&4294967295|V>>>27),V=F+(E^R&(A^E))+D[2]+4243563512&4294967295,F=A+(V<<9&4294967295|V>>>23),V=R+(A^E&(F^A))+D[7]+1735328473&4294967295,R=F+(V<<14&4294967295|V>>>18),V=E+(F^A&(R^F))+D[12]+2368359562&4294967295,E=R+(V<<20&4294967295|V>>>12),V=A+(E^R^F)+D[5]+4294588738&4294967295,A=E+(V<<4&4294967295|V>>>28),V=F+(A^E^R)+D[8]+2272392833&4294967295,F=A+(V<<11&4294967295|V>>>21),V=R+(F^A^E)+D[11]+1839030562&4294967295,R=F+(V<<16&4294967295|V>>>16),V=E+(R^F^A)+D[14]+4259657740&4294967295,E=R+(V<<23&4294967295|V>>>9),V=A+(E^R^F)+D[1]+2763975236&4294967295,A=E+(V<<4&4294967295|V>>>28),V=F+(A^E^R)+D[4]+1272893353&4294967295,F=A+(V<<11&4294967295|V>>>21),V=R+(F^A^E)+D[7]+4139469664&4294967295,R=F+(V<<16&4294967295|V>>>16),V=E+(R^F^A)+D[10]+3200236656&4294967295,E=R+(V<<23&4294967295|V>>>9),V=A+(E^R^F)+D[13]+681279174&4294967295,A=E+(V<<4&4294967295|V>>>28),V=F+(A^E^R)+D[0]+3936430074&4294967295,F=A+(V<<11&4294967295|V>>>21),V=R+(F^A^E)+D[3]+3572445317&4294967295,R=F+(V<<16&4294967295|V>>>16),V=E+(R^F^A)+D[6]+76029189&4294967295,E=R+(V<<23&4294967295|V>>>9),V=A+(E^R^F)+D[9]+3654602809&4294967295,A=E+(V<<4&4294967295|V>>>28),V=F+(A^E^R)+D[12]+3873151461&4294967295,F=A+(V<<11&4294967295|V>>>21),V=R+(F^A^E)+D[15]+530742520&4294967295,R=F+(V<<16&4294967295|V>>>16),V=E+(R^F^A)+D[2]+3299628645&4294967295,E=R+(V<<23&4294967295|V>>>9),V=A+(R^(E|~F))+D[0]+4096336452&4294967295,A=E+(V<<6&4294967295|V>>>26),V=F+(E^(A|~R))+D[7]+1126891415&4294967295,F=A+(V<<10&4294967295|V>>>22),V=R+(A^(F|~E))+D[14]+2878612391&4294967295,R=F+(V<<15&4294967295|V>>>17),V=E+(F^(R|~A))+D[5]+4237533241&4294967295,E=R+(V<<21&4294967295|V>>>11),V=A+(R^(E|~F))+D[12]+1700485571&4294967295,A=E+(V<<6&4294967295|V>>>26),V=F+(E^(A|~R))+D[3]+2399980690&4294967295,F=A+(V<<10&4294967295|V>>>22),V=R+(A^(F|~E))+D[10]+4293915773&4294967295,R=F+(V<<15&4294967295|V>>>17),V=E+(F^(R|~A))+D[1]+2240044497&4294967295,E=R+(V<<21&4294967295|V>>>11),V=A+(R^(E|~F))+D[8]+1873313359&4294967295,A=E+(V<<6&4294967295|V>>>26),V=F+(E^(A|~R))+D[15]+4264355552&4294967295,F=A+(V<<10&4294967295|V>>>22),V=R+(A^(F|~E))+D[6]+2734768916&4294967295,R=F+(V<<15&4294967295|V>>>17),V=E+(F^(R|~A))+D[13]+1309151649&4294967295,E=R+(V<<21&4294967295|V>>>11),V=A+(R^(E|~F))+D[4]+4149444226&4294967295,A=E+(V<<6&4294967295|V>>>26),V=F+(E^(A|~R))+D[11]+3174756917&4294967295,F=A+(V<<10&4294967295|V>>>22),V=R+(A^(F|~E))+D[2]+718787259&4294967295,R=F+(V<<15&4294967295|V>>>17),V=E+(F^(R|~A))+D[9]+3951481745&4294967295,L.g[0]=L.g[0]+A&4294967295,L.g[1]=L.g[1]+(R+(V<<21&4294967295|V>>>11))&4294967295,L.g[2]=L.g[2]+R&4294967295,L.g[3]=L.g[3]+F&4294967295}n.prototype.u=function(L,A){A===void 0&&(A=L.length);for(var E=A-this.blockSize,D=this.B,R=this.h,F=0;F<A;){if(R==0)for(;F<=E;)s(this,L,F),F+=this.blockSize;if(typeof L=="string"){for(;F<A;)if(D[R++]=L.charCodeAt(F++),R==this.blockSize){s(this,D),R=0;break}}else for(;F<A;)if(D[R++]=L[F++],R==this.blockSize){s(this,D),R=0;break}}this.h=R,this.o+=A},n.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var A=1;A<L.length-8;++A)L[A]=0;var E=8*this.o;for(A=L.length-8;A<L.length;++A)L[A]=E&255,E/=256;for(this.u(L),L=Array(16),A=E=0;4>A;++A)for(var D=0;32>D;D+=8)L[E++]=this.g[A]>>>D&255;return L};function i(L,A){var E=o;return Object.prototype.hasOwnProperty.call(E,L)?E[L]:E[L]=A(L)}function a(L,A){this.h=A;for(var E=[],D=!0,R=L.length-1;0<=R;R--){var F=L[R]|0;D&&F==A||(E[R]=F,D=!1)}this.g=E}var o={};function l(L){return-128<=L&&128>L?i(L,function(A){return new a([A|0],0>A?-1:0)}):new a([L|0],0>L?-1:0)}function c(L){if(isNaN(L)||!isFinite(L))return p;if(0>L)return _(c(-L));for(var A=[],E=1,D=0;L>=E;D++)A[D]=L/E|0,E*=4294967296;return new a(A,0)}function d(L,A){if(L.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(L.charAt(0)=="-")return _(d(L.substring(1),A));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(A,8)),D=p,R=0;R<L.length;R+=8){var F=Math.min(8,L.length-R),V=parseInt(L.substring(R,R+F),A);8>F?(F=c(Math.pow(A,F)),D=D.j(F).add(c(V))):(D=D.j(E),D=D.add(c(V)))}return D}var p=l(0),g=l(1),m=l(16777216);t=a.prototype,t.m=function(){if(w(this))return-_(this).m();for(var L=0,A=1,E=0;E<this.g.length;E++){var D=this.i(E);L+=(0<=D?D:4294967296+D)*A,A*=4294967296}return L},t.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(y(this))return"0";if(w(this))return"-"+_(this).toString(L);for(var A=c(Math.pow(L,6)),E=this,D="";;){var R=M(E,A).g;E=S(E,R.j(A));var F=((0<E.g.length?E.g[0]:E.h)>>>0).toString(L);if(E=R,y(E))return F+D;for(;6>F.length;)F="0"+F;D=F+D}},t.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function y(L){if(L.h!=0)return!1;for(var A=0;A<L.g.length;A++)if(L.g[A]!=0)return!1;return!0}function w(L){return L.h==-1}t.l=function(L){return L=S(this,L),w(L)?-1:y(L)?0:1};function _(L){for(var A=L.g.length,E=[],D=0;D<A;D++)E[D]=~L.g[D];return new a(E,~L.h).add(g)}t.abs=function(){return w(this)?_(this):this},t.add=function(L){for(var A=Math.max(this.g.length,L.g.length),E=[],D=0,R=0;R<=A;R++){var F=D+(this.i(R)&65535)+(L.i(R)&65535),V=(F>>>16)+(this.i(R)>>>16)+(L.i(R)>>>16);D=V>>>16,F&=65535,V&=65535,E[R]=V<<16|F}return new a(E,E[E.length-1]&-2147483648?-1:0)};function S(L,A){return L.add(_(A))}t.j=function(L){if(y(this)||y(L))return p;if(w(this))return w(L)?_(this).j(_(L)):_(_(this).j(L));if(w(L))return _(this.j(_(L)));if(0>this.l(m)&&0>L.l(m))return c(this.m()*L.m());for(var A=this.g.length+L.g.length,E=[],D=0;D<2*A;D++)E[D]=0;for(D=0;D<this.g.length;D++)for(var R=0;R<L.g.length;R++){var F=this.i(D)>>>16,V=this.i(D)&65535,Z=L.i(R)>>>16,fe=L.i(R)&65535;E[2*D+2*R]+=V*fe,T(E,2*D+2*R),E[2*D+2*R+1]+=F*fe,T(E,2*D+2*R+1),E[2*D+2*R+1]+=V*Z,T(E,2*D+2*R+1),E[2*D+2*R+2]+=F*Z,T(E,2*D+2*R+2)}for(D=0;D<A;D++)E[D]=E[2*D+1]<<16|E[2*D];for(D=A;D<2*A;D++)E[D]=0;return new a(E,0)};function T(L,A){for(;(L[A]&65535)!=L[A];)L[A+1]+=L[A]>>>16,L[A]&=65535,A++}function I(L,A){this.g=L,this.h=A}function M(L,A){if(y(A))throw Error("division by zero");if(y(L))return new I(p,p);if(w(L))return A=M(_(L),A),new I(_(A.g),_(A.h));if(w(A))return A=M(L,_(A)),new I(_(A.g),A.h);if(30<L.g.length){if(w(L)||w(A))throw Error("slowDivide_ only works with positive integers.");for(var E=g,D=A;0>=D.l(L);)E=K(E),D=K(D);var R=W(E,1),F=W(D,1);for(D=W(D,2),E=W(E,2);!y(D);){var V=F.add(D);0>=V.l(L)&&(R=R.add(E),F=V),D=W(D,1),E=W(E,1)}return A=S(L,R.j(A)),new I(R,A)}for(R=p;0<=L.l(A);){for(E=Math.max(1,Math.floor(L.m()/A.m())),D=Math.ceil(Math.log(E)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),F=c(E),V=F.j(A);w(V)||0<V.l(L);)E-=D,F=c(E),V=F.j(A);y(F)&&(F=g),R=R.add(F),L=S(L,V)}return new I(R,L)}t.A=function(L){return M(this,L).h},t.and=function(L){for(var A=Math.max(this.g.length,L.g.length),E=[],D=0;D<A;D++)E[D]=this.i(D)&L.i(D);return new a(E,this.h&L.h)},t.or=function(L){for(var A=Math.max(this.g.length,L.g.length),E=[],D=0;D<A;D++)E[D]=this.i(D)|L.i(D);return new a(E,this.h|L.h)},t.xor=function(L){for(var A=Math.max(this.g.length,L.g.length),E=[],D=0;D<A;D++)E[D]=this.i(D)^L.i(D);return new a(E,this.h^L.h)};function K(L){for(var A=L.g.length+1,E=[],D=0;D<A;D++)E[D]=L.i(D)<<1|L.i(D-1)>>>31;return new a(E,L.h)}function W(L,A){var E=A>>5;A%=32;for(var D=L.g.length-E,R=[],F=0;F<D;F++)R[F]=0<A?L.i(F+E)>>>A|L.i(F+E+1)<<32-A:L.i(F+E);return new a(R,L.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Uj=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=d,B0=a}).apply(typeof FC<"u"?FC:typeof self<"u"?self:typeof window<"u"?window:{});var lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zj,Kg,$j,iw,h6,qj,Hj,Wj;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(k,q,ee){return k==Array.prototype||k==Object.prototype||(k[q]=ee.value),k};function r(k){k=[typeof globalThis=="object"&&globalThis,k,typeof window=="object"&&window,typeof self=="object"&&self,typeof lv=="object"&&lv];for(var q=0;q<k.length;++q){var ee=k[q];if(ee&&ee.Math==Math)return ee}throw Error("Cannot find global object")}var n=r(this);function s(k,q){if(q)e:{var ee=n;k=k.split(".");for(var ye=0;ye<k.length-1;ye++){var Je=k[ye];if(!(Je in ee))break e;ee=ee[Je]}k=k[k.length-1],ye=ee[k],q=q(ye),q!=ye&&q!=null&&e(ee,k,{configurable:!0,writable:!0,value:q})}}function i(k,q){k instanceof String&&(k+="");var ee=0,ye=!1,Je={next:function(){if(!ye&&ee<k.length){var gt=ee++;return{value:q(gt,k[gt]),done:!1}}return ye=!0,{done:!0,value:void 0}}};return Je[Symbol.iterator]=function(){return Je},Je}s("Array.prototype.values",function(k){return k||function(){return i(this,function(q,ee){return ee})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(k){var q=typeof k;return q=q!="object"?q:k?Array.isArray(k)?"array":q:"null",q=="array"||q=="object"&&typeof k.length=="number"}function c(k){var q=typeof k;return q=="object"&&k!=null||q=="function"}function d(k,q,ee){return k.call.apply(k.bind,arguments)}function p(k,q,ee){if(!k)throw Error();if(2<arguments.length){var ye=Array.prototype.slice.call(arguments,2);return function(){var Je=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Je,ye),k.apply(q,Je)}}return function(){return k.apply(q,arguments)}}function g(k,q,ee){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function m(k,q){var ee=Array.prototype.slice.call(arguments,1);return function(){var ye=ee.slice();return ye.push.apply(ye,arguments),k.apply(this,ye)}}function y(k,q){function ee(){}ee.prototype=q.prototype,k.aa=q.prototype,k.prototype=new ee,k.prototype.constructor=k,k.Qb=function(ye,Je,gt){for(var Dt=Array(arguments.length-2),On=2;On<arguments.length;On++)Dt[On-2]=arguments[On];return q.prototype[Je].apply(ye,Dt)}}function w(k){const q=k.length;if(0<q){const ee=Array(q);for(let ye=0;ye<q;ye++)ee[ye]=k[ye];return ee}return[]}function _(k,q){for(let ee=1;ee<arguments.length;ee++){const ye=arguments[ee];if(l(ye)){const Je=k.length||0,gt=ye.length||0;k.length=Je+gt;for(let Dt=0;Dt<gt;Dt++)k[Je+Dt]=ye[Dt]}else k.push(ye)}}class S{constructor(q,ee){this.i=q,this.j=ee,this.h=0,this.g=null}get(){let q;return 0<this.h?(this.h--,q=this.g,this.g=q.next,q.next=null):q=this.i(),q}}function T(k){return/^[\s\xa0]*$/.test(k)}function I(){var k=o.navigator;return k&&(k=k.userAgent)?k:""}function M(k){return M[" "](k),k}M[" "]=function(){};var K=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function W(k,q,ee){for(const ye in k)q.call(ee,k[ye],ye,k)}function L(k,q){for(const ee in k)q.call(void 0,k[ee],ee,k)}function A(k){const q={};for(const ee in k)q[ee]=k[ee];return q}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(k,q){let ee,ye;for(let Je=1;Je<arguments.length;Je++){ye=arguments[Je];for(ee in ye)k[ee]=ye[ee];for(let gt=0;gt<E.length;gt++)ee=E[gt],Object.prototype.hasOwnProperty.call(ye,ee)&&(k[ee]=ye[ee])}}function R(k){var q=1;k=k.split(":");const ee=[];for(;0<q&&k.length;)ee.push(k.shift()),q--;return k.length&&ee.push(k.join(":")),ee}function F(k){o.setTimeout(()=>{throw k},0)}function V(){var k=H;let q=null;return k.g&&(q=k.g,k.g=k.g.next,k.g||(k.h=null),q.next=null),q}class Z{constructor(){this.h=this.g=null}add(q,ee){const ye=fe.get();ye.set(q,ee),this.h?this.h.next=ye:this.g=ye,this.h=ye}}var fe=new S(()=>new xe,k=>k.reset());class xe{constructor(){this.next=this.g=this.h=null}set(q,ee){this.h=q,this.g=ee,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ae=!1,H=new Z,te=()=>{const k=o.Promise.resolve(void 0);he=()=>{k.then(G)}};var G=()=>{for(var k;k=V();){try{k.h.call(k.g)}catch(ee){F(ee)}var q=fe;q.j(k),100>q.h&&(q.h++,k.next=q.g,q.g=k)}ae=!1};function P(){this.s=this.s,this.C=this.C}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(k,q){this.type=k,this.g=this.target=q,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var X=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var k=!1,q=Object.defineProperty({},"passive",{get:function(){k=!0}});try{const ee=()=>{};o.addEventListener("test",ee,q),o.removeEventListener("test",ee,q)}catch{}return k})();function J(k,q){if(U.call(this,k?k.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,k){var ee=this.type=k.type,ye=k.changedTouches&&k.changedTouches.length?k.changedTouches[0]:null;if(this.target=k.target||k.srcElement,this.g=q,q=k.relatedTarget){if(K){e:{try{M(q.nodeName);var Je=!0;break e}catch{}Je=!1}Je||(q=null)}}else ee=="mouseover"?q=k.fromElement:ee=="mouseout"&&(q=k.toElement);this.relatedTarget=q,ye?(this.clientX=ye.clientX!==void 0?ye.clientX:ye.pageX,this.clientY=ye.clientY!==void 0?ye.clientY:ye.pageY,this.screenX=ye.screenX||0,this.screenY=ye.screenY||0):(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0),this.button=k.button,this.key=k.key||"",this.ctrlKey=k.ctrlKey,this.altKey=k.altKey,this.shiftKey=k.shiftKey,this.metaKey=k.metaKey,this.pointerId=k.pointerId||0,this.pointerType=typeof k.pointerType=="string"?k.pointerType:ie[k.pointerType]||"",this.state=k.state,this.i=k,k.defaultPrevented&&J.aa.h.call(this)}}y(J,U);var ie={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var k=this.i;k.preventDefault?k.preventDefault():k.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),ke=0;function oe(k,q,ee,ye,Je){this.listener=k,this.proxy=null,this.src=q,this.type=ee,this.capture=!!ye,this.ha=Je,this.key=++ke,this.da=this.fa=!1}function Ee(k){k.da=!0,k.listener=null,k.proxy=null,k.src=null,k.ha=null}function Oe(k){this.src=k,this.g={},this.h=0}Oe.prototype.add=function(k,q,ee,ye,Je){var gt=k.toString();k=this.g[gt],k||(k=this.g[gt]=[],this.h++);var Dt=we(k,q,ye,Je);return-1<Dt?(q=k[Dt],ee||(q.fa=!1)):(q=new oe(q,this.src,gt,!!ye,Je),q.fa=ee,k.push(q)),q};function ne(k,q){var ee=q.type;if(ee in k.g){var ye=k.g[ee],Je=Array.prototype.indexOf.call(ye,q,void 0),gt;(gt=0<=Je)&&Array.prototype.splice.call(ye,Je,1),gt&&(Ee(q),k.g[ee].length==0&&(delete k.g[ee],k.h--))}}function we(k,q,ee,ye){for(var Je=0;Je<k.length;++Je){var gt=k[Je];if(!gt.da&&gt.listener==q&&gt.capture==!!ee&&gt.ha==ye)return Je}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),pe={};function Ke(k,q,ee,ye,Je){if(Array.isArray(q)){for(var gt=0;gt<q.length;gt++)Ke(k,q[gt],ee,ye,Je);return null}return ee=Ye(ee),k&&k[ve]?k.K(q,ee,c(ye)?!!ye.capture:!1,Je):ze(k,q,ee,!1,ye,Je)}function ze(k,q,ee,ye,Je,gt){if(!q)throw Error("Invalid event type");var Dt=c(Je)?!!Je.capture:!!Je,On=Et(k);if(On||(k[Re]=On=new Oe(k)),ee=On.add(q,ee,ye,Dt,gt),ee.proxy)return ee;if(ye=ot(),ee.proxy=ye,ye.src=k,ye.listener=ee,k.addEventListener)X||(Je=Dt),Je===void 0&&(Je=!1),k.addEventListener(q.toString(),ye,Je);else if(k.attachEvent)k.attachEvent(ut(q.toString()),ye);else if(k.addListener&&k.removeListener)k.addListener(ye);else throw Error("addEventListener and attachEvent are unavailable.");return ee}function ot(){function k(ee){return q.call(k.src,k.listener,ee)}const q=Ct;return k}function Be(k,q,ee,ye,Je){if(Array.isArray(q))for(var gt=0;gt<q.length;gt++)Be(k,q[gt],ee,ye,Je);else ye=c(ye)?!!ye.capture:!!ye,ee=Ye(ee),k&&k[ve]?(k=k.i,q=String(q).toString(),q in k.g&&(gt=k.g[q],ee=we(gt,ee,ye,Je),-1<ee&&(Ee(gt[ee]),Array.prototype.splice.call(gt,ee,1),gt.length==0&&(delete k.g[q],k.h--)))):k&&(k=Et(k))&&(q=k.g[q.toString()],k=-1,q&&(k=we(q,ee,ye,Je)),(ee=-1<k?q[k]:null)&&He(ee))}function He(k){if(typeof k!="number"&&k&&!k.da){var q=k.src;if(q&&q[ve])ne(q.i,k);else{var ee=k.type,ye=k.proxy;q.removeEventListener?q.removeEventListener(ee,ye,k.capture):q.detachEvent?q.detachEvent(ut(ee),ye):q.addListener&&q.removeListener&&q.removeListener(ye),(ee=Et(q))?(ne(ee,k),ee.h==0&&(ee.src=null,q[Re]=null)):Ee(k)}}}function ut(k){return k in pe?pe[k]:pe[k]="on"+k}function Ct(k,q){if(k.da)k=!0;else{q=new J(q,this);var ee=k.listener,ye=k.ha||k.src;k.fa&&He(k),k=ee.call(ye,q)}return k}function Et(k){return k=k[Re],k instanceof Oe?k:null}var Le="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ye(k){return typeof k=="function"?k:(k[Le]||(k[Le]=function(q){return k.handleEvent(q)}),k[Le])}function Qe(){P.call(this),this.i=new Oe(this),this.M=this,this.F=null}y(Qe,P),Qe.prototype[ve]=!0,Qe.prototype.removeEventListener=function(k,q,ee,ye){Be(this,k,q,ee,ye)};function le(k,q){var ee,ye=k.F;if(ye)for(ee=[];ye;ye=ye.F)ee.push(ye);if(k=k.M,ye=q.type||q,typeof q=="string")q=new U(q,k);else if(q instanceof U)q.target=q.target||k;else{var Je=q;q=new U(ye,k),D(q,Je)}if(Je=!0,ee)for(var gt=ee.length-1;0<=gt;gt--){var Dt=q.g=ee[gt];Je=je(Dt,ye,!0,q)&&Je}if(Dt=q.g=k,Je=je(Dt,ye,!0,q)&&Je,Je=je(Dt,ye,!1,q)&&Je,ee)for(gt=0;gt<ee.length;gt++)Dt=q.g=ee[gt],Je=je(Dt,ye,!1,q)&&Je}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var k=this.i,q;for(q in k.g){for(var ee=k.g[q],ye=0;ye<ee.length;ye++)Ee(ee[ye]);delete k.g[q],k.h--}}this.F=null},Qe.prototype.K=function(k,q,ee,ye){return this.i.add(String(k),q,!1,ee,ye)},Qe.prototype.L=function(k,q,ee,ye){return this.i.add(String(k),q,!0,ee,ye)};function je(k,q,ee,ye){if(q=k.i.g[String(q)],!q)return!0;q=q.concat();for(var Je=!0,gt=0;gt<q.length;++gt){var Dt=q[gt];if(Dt&&!Dt.da&&Dt.capture==ee){var On=Dt.listener,Rs=Dt.ha||Dt.src;Dt.fa&&ne(k.i,Dt),Je=On.call(Rs,ye)!==!1&&Je}}return Je&&!ye.defaultPrevented}function We(k,q,ee){if(typeof k=="function")ee&&(k=g(k,ee));else if(k&&typeof k.handleEvent=="function")k=g(k.handleEvent,k);else throw Error("Invalid listener argument");return 2147483647<Number(q)?-1:o.setTimeout(k,q||0)}function lt(k){k.g=We(()=>{k.g=null,k.i&&(k.i=!1,lt(k))},k.l);const q=k.h;k.h=null,k.m.apply(null,q)}class yt extends P{constructor(q,ee){super(),this.m=q,this.l=ee,this.h=null,this.i=!1,this.g=null}j(q){this.h=arguments,this.g?this.i=!0:lt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $t(k){P.call(this),this.h=k,this.g={}}y($t,P);var Xt=[];function At(k){W(k.g,function(q,ee){this.g.hasOwnProperty(ee)&&He(q)},k),k.g={}}$t.prototype.N=function(){$t.aa.N.call(this),At(this)},$t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vt=o.JSON.stringify,Or=o.JSON.parse,rr=class{stringify(k){return o.JSON.stringify(k,void 0)}parse(k){return o.JSON.parse(k,void 0)}};function Sr(){}Sr.prototype.h=null;function Cr(k){return k.h||(k.h=k.i())}function Bn(){}var bn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yr(){U.call(this,"d")}y(Yr,U);function hr(){U.call(this,"c")}y(hr,U);var Jr={},ha=null;function ms(){return ha=ha||new Qe}Jr.La="serverreachability";function Pi(k){U.call(this,Jr.La,k)}y(Pi,U);function gs(k){const q=ms();le(q,new Pi(q))}Jr.STAT_EVENT="statevent";function vr(k,q){U.call(this,Jr.STAT_EVENT,k),this.stat=q}y(vr,U);function Nn(k){const q=ms();le(q,new vr(q,k))}Jr.Ma="timingevent";function Ri(k,q){U.call(this,Jr.Ma,k),this.size=q}y(Ri,U);function Gn(k,q){if(typeof k!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){k()},q)}function ln(){this.g=!0}ln.prototype.xa=function(){this.g=!1};function Ln(k,q,ee,ye,Je,gt){k.info(function(){if(k.g)if(gt)for(var Dt="",On=gt.split("&"),Rs=0;Rs<On.length;Rs++){var dn=On[Rs].split("=");if(1<dn.length){var gn=dn[0];dn=dn[1];var Un=gn.split("_");Dt=2<=Un.length&&Un[1]=="type"?Dt+(gn+"="+dn+"&"):Dt+(gn+"=redacted&")}}else Dt=null;else Dt=gt;return"XMLHTTP REQ ("+ye+") [attempt "+Je+"]: "+q+`
`+ee+`
`+Dt})}function ss(k,q,ee,ye,Je,gt,Dt){k.info(function(){return"XMLHTTP RESP ("+ye+") [ attempt "+Je+"]: "+q+`
`+ee+`
`+gt+" "+Dt})}function ce(k,q,ee,ye){k.info(function(){return"XMLHTTP TEXT ("+q+"): "+be(k,ee)+(ye?" "+ye:"")})}function Te(k,q){k.info(function(){return"TIMEOUT: "+q})}ln.prototype.info=function(){};function be(k,q){if(!k.g)return q;if(!q)return null;try{var ee=JSON.parse(q);if(ee){for(k=0;k<ee.length;k++)if(Array.isArray(ee[k])){var ye=ee[k];if(!(2>ye.length)){var Je=ye[1];if(Array.isArray(Je)&&!(1>Je.length)){var gt=Je[0];if(gt!="noop"&&gt!="stop"&&gt!="close")for(var Dt=1;Dt<Je.length;Dt++)Je[Dt]=""}}}}return Vt(ee)}catch{return q}}var Se={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ie;function Xe(){}y(Xe,Sr),Xe.prototype.g=function(){return new XMLHttpRequest},Xe.prototype.i=function(){return{}},Ie=new Xe;function ft(k,q,ee,ye){this.j=k,this.i=q,this.l=ee,this.R=ye||1,this.U=new $t(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tt}function tt(){this.i=null,this.g="",this.h=!1}var et={},at={};function Tt(k,q,ee){k.L=1,k.v=Il(Ps(q)),k.m=ee,k.P=!0,Ut(k,null)}function Ut(k,q){k.F=Date.now(),Pt(k),k.A=Ps(k.v);var ee=k.A,ye=k.R;Array.isArray(ye)||(ye=[String(ye)]),Pr(ee.i,"t",ye),k.C=0,ee=k.j.J,k.h=new tt,k.g=Fl(k.j,ee?q:null,!k.m),0<k.O&&(k.M=new yt(g(k.Y,k,k.g),k.O)),q=k.U,ee=k.g,ye=k.ca;var Je="readystatechange";Array.isArray(Je)||(Je&&(Xt[0]=Je.toString()),Je=Xt);for(var gt=0;gt<Je.length;gt++){var Dt=Ke(ee,Je[gt],ye||q.handleEvent,!1,q.h||q);if(!Dt)break;q.g[Dt.key]=Dt}q=k.H?A(k.H):{},k.m?(k.u||(k.u="POST"),q["Content-Type"]="application/x-www-form-urlencoded",k.g.ea(k.A,k.u,k.m,q)):(k.u="GET",k.g.ea(k.A,k.u,null,q)),gs(),Ln(k.i,k.u,k.A,k.l,k.R,k.m)}ft.prototype.ca=function(k){k=k.target;const q=this.M;q&&Ji(k)==3?q.j():this.Y(k)},ft.prototype.Y=function(k){try{if(k==this.g)e:{const Un=Ji(this.g);var q=this.g.Ba();const Pa=this.g.Z();if(!(3>Un)&&(Un!=3||this.g&&(this.h.h||this.g.oa()||Uc(this.g)))){this.J||Un!=4||q==7||(q==8||0>=Pa?gs(3):gs(2)),Xr(this);var ee=this.g.Z();this.X=ee;t:if(Gt(this)){var ye=Uc(this.g);k="";var Je=ye.length,gt=Ji(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kn(this),Ur(this);var Dt="";break t}this.h.i=new o.TextDecoder}for(q=0;q<Je;q++)this.h.h=!0,k+=this.h.i.decode(ye[q],{stream:!(gt&&q==Je-1)});ye.length=0,this.h.g+=k,this.C=0,Dt=this.h.g}else Dt=this.g.oa();if(this.o=ee==200,ss(this.i,this.u,this.A,this.l,this.R,Un,ee),this.o){if(this.T&&!this.K){t:{if(this.g){var On,Rs=this.g;if((On=Rs.g?Rs.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(On)){var dn=On;break t}}dn=null}if(ee=dn)ce(this.i,this.l,ee,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Aa(this,ee);else{this.o=!1,this.s=3,Nn(12),kn(this),Ur(this);break e}}if(this.P){ee=!0;let xa;for(;!this.J&&this.C<Dt.length;)if(xa=Ot(this,Dt),xa==at){Un==4&&(this.s=4,Nn(14),ee=!1),ce(this.i,this.l,null,"[Incomplete Response]");break}else if(xa==et){this.s=4,Nn(15),ce(this.i,this.l,Dt,"[Invalid Chunk]"),ee=!1;break}else ce(this.i,this.l,xa,null),Aa(this,xa);if(Gt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Un!=4||Dt.length!=0||this.h.h||(this.s=1,Nn(16),ee=!1),this.o=this.o&&ee,!ee)ce(this.i,this.l,Dt,"[Invalid Chunked Response]"),kn(this),Ur(this);else if(0<Dt.length&&!this.W){this.W=!0;var gn=this.j;gn.g==this&&gn.ba&&!gn.M&&(gn.j.info("Great, no buffering proxy detected. Bytes received: "+Dt.length),En(gn),gn.M=!0,Nn(11))}}else ce(this.i,this.l,Dt,null),Aa(this,Dt);Un==4&&kn(this),this.o&&!this.J&&(Un==4?Fn(this.j,this):(this.o=!1,Pt(this)))}else Zi(this.g),ee==400&&0<Dt.indexOf("Unknown SID")?(this.s=3,Nn(12)):(this.s=0,Nn(13)),kn(this),Ur(this)}}}catch{}finally{}};function Gt(k){return k.g?k.u=="GET"&&k.L!=2&&k.j.Ca:!1}function Ot(k,q){var ee=k.C,ye=q.indexOf(`
`,ee);return ye==-1?at:(ee=Number(q.substring(ee,ye)),isNaN(ee)?et:(ye+=1,ye+ee>q.length?at:(q=q.slice(ye,ye+ee),k.C=ye+ee,q)))}ft.prototype.cancel=function(){this.J=!0,kn(this)};function Pt(k){k.S=Date.now()+k.I,Ar(k,k.I)}function Ar(k,q){if(k.B!=null)throw Error("WatchDog timer not null");k.B=Gn(g(k.ba,k),q)}function Xr(k){k.B&&(o.clearTimeout(k.B),k.B=null)}ft.prototype.ba=function(){this.B=null;const k=Date.now();0<=k-this.S?(Te(this.i,this.A),this.L!=2&&(gs(),Nn(17)),kn(this),this.s=2,Ur(this)):Ar(this,this.S-k)};function Ur(k){k.j.G==0||k.J||Fn(k.j,k)}function kn(k){Xr(k);var q=k.M;q&&typeof q.ma=="function"&&q.ma(),k.M=null,At(k.U),k.g&&(q=k.g,k.g=null,q.abort(),q.ma())}function Aa(k,q){try{var ee=k.j;if(ee.G!=0&&(ee.g==k||Qt(ee.h,k))){if(!k.K&&Qt(ee.h,k)&&ee.G==3){try{var ye=ee.Da.g.parse(q)}catch{ye=null}if(Array.isArray(ye)&&ye.length==3){var Je=ye;if(Je[0]==0){e:if(!ee.u){if(ee.g)if(ee.g.F+3e3<k.F)Cs(ee),Ae(ee);else break e;Mr(ee),Nn(18)}}else ee.za=Je[1],0<ee.za-ee.T&&37500>Je[2]&&ee.F&&ee.v==0&&!ee.C&&(ee.C=Gn(g(ee.Za,ee),6e3));if(1>=zt(ee.h)&&ee.ca){try{ee.ca()}catch{}ee.ca=void 0}}else es(ee,11)}else if((k.K||ee.g==k)&&Cs(ee),!T(q))for(Je=ee.Da.g.parse(q),q=0;q<Je.length;q++){let dn=Je[q];if(ee.T=dn[0],dn=dn[1],ee.G==2)if(dn[0]=="c"){ee.K=dn[1],ee.ia=dn[2];const gn=dn[3];gn!=null&&(ee.la=gn,ee.j.info("VER="+ee.la));const Un=dn[4];Un!=null&&(ee.Aa=Un,ee.j.info("SVER="+ee.Aa));const Pa=dn[5];Pa!=null&&typeof Pa=="number"&&0<Pa&&(ye=1.5*Pa,ee.L=ye,ee.j.info("backChannelRequestTimeoutMs_="+ye)),ye=ee;const xa=k.g;if(xa){const vo=xa.g?xa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vo){var gt=ye.h;gt.g||vo.indexOf("spdy")==-1&&vo.indexOf("quic")==-1&&vo.indexOf("h2")==-1||(gt.j=gt.l,gt.g=new Set,gt.h&&(nr(gt,gt.h),gt.h=null))}if(ye.D){const Dl=xa.g?xa.g.getResponseHeader("X-HTTP-Session-Id"):null;Dl&&(ye.ya=Dl,un(ye.I,ye.D,Dl))}}ee.G=3,ee.l&&ee.l.ua(),ee.ba&&(ee.R=Date.now()-k.F,ee.j.info("Handshake RTT: "+ee.R+"ms")),ye=ee;var Dt=k;if(ye.qa=dl(ye,ye.J?ye.ia:null,ye.W),Dt.K){gr(ye.h,Dt);var On=Dt,Rs=ye.L;Rs&&(On.I=Rs),On.B&&(Xr(On),Pt(On)),ye.g=Dt}else Nr(ye);0<ee.i.length&&Ge(ee)}else dn[0]!="stop"&&dn[0]!="close"||es(ee,7);else ee.G==3&&(dn[0]=="stop"||dn[0]=="close"?dn[0]=="stop"?es(ee,7):re(ee):dn[0]!="noop"&&ee.l&&ee.l.ta(dn),ee.v=0)}}gs(4)}catch{}}var Na=class{constructor(k,q){this.g=k,this.map=q}};function Qi(k){this.l=k||10,o.PerformanceNavigationTiming?(k=o.performance.getEntriesByType("navigation"),k=0<k.length&&(k[0].nextHopProtocol=="hq"||k[0].nextHopProtocol=="h2")):k=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=k?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fe(k){return k.h?!0:k.g?k.g.size>=k.j:!1}function zt(k){return k.h?1:k.g?k.g.size:0}function Qt(k,q){return k.h?k.h==q:k.g?k.g.has(q):!1}function nr(k,q){k.g?k.g.add(q):k.h=q}function gr(k,q){k.h&&k.h==q?k.h=null:k.g&&k.g.has(q)&&k.g.delete(q)}Qi.prototype.cancel=function(){if(this.i=sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const k of this.g.values())k.cancel();this.g.clear()}};function sn(k){if(k.h!=null)return k.i.concat(k.h.D);if(k.g!=null&&k.g.size!==0){let q=k.i;for(const ee of k.g.values())q=q.concat(ee.D);return q}return w(k.i)}function Es(k){if(k.V&&typeof k.V=="function")return k.V();if(typeof Map<"u"&&k instanceof Map||typeof Set<"u"&&k instanceof Set)return Array.from(k.values());if(typeof k=="string")return k.split("");if(l(k)){for(var q=[],ee=k.length,ye=0;ye<ee;ye++)q.push(k[ye]);return q}q=[],ee=0;for(ye in k)q[ee++]=k[ye];return q}function Vn(k){if(k.na&&typeof k.na=="function")return k.na();if(!k.V||typeof k.V!="function"){if(typeof Map<"u"&&k instanceof Map)return Array.from(k.keys());if(!(typeof Set<"u"&&k instanceof Set)){if(l(k)||typeof k=="string"){var q=[];k=k.length;for(var ee=0;ee<k;ee++)q.push(ee);return q}q=[],ee=0;for(const ye in k)q[ee++]=ye;return q}}}function Sn(k,q){if(k.forEach&&typeof k.forEach=="function")k.forEach(q,void 0);else if(l(k)||typeof k=="string")Array.prototype.forEach.call(k,q,void 0);else for(var ee=Vn(k),ye=Es(k),Je=ye.length,gt=0;gt<Je;gt++)q.call(void 0,ye[gt],ee&&ee[gt],k)}var jn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hs(k,q){if(k){k=k.split("&");for(var ee=0;ee<k.length;ee++){var ye=k[ee].indexOf("="),Je=null;if(0<=ye){var gt=k[ee].substring(0,ye);Je=k[ee].substring(ye+1)}else gt=k[ee];q(gt,Je?decodeURIComponent(Je.replace(/\+/g," ")):"")}}}function cn(k){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,k instanceof cn){this.h=k.h,Ta(this,k.j),this.o=k.o,this.g=k.g,Ko(this,k.s),this.l=k.l;var q=k.i,ee=new fa;ee.i=q.i,q.g&&(ee.g=new Map(q.g),ee.h=q.h),Yo(this,ee),this.m=k.m}else k&&(q=String(k).match(jn))?(this.h=!1,Ta(this,q[1]||"",!0),this.o=on(q[2]||""),this.g=on(q[3]||"",!0),Ko(this,q[4]),this.l=on(q[5]||"",!0),Yo(this,q[6]||"",!0),this.m=on(q[7]||"")):(this.h=!1,this.i=new fa(null,this.h))}cn.prototype.toString=function(){var k=[],q=this.j;q&&k.push(Ka(q,_u,!0),":");var ee=this.g;return(ee||q=="file")&&(k.push("//"),(q=this.o)&&k.push(Ka(q,_u,!0),"@"),k.push(encodeURIComponent(String(ee)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ee=this.s,ee!=null&&k.push(":",String(ee))),(ee=this.l)&&(this.g&&ee.charAt(0)!="/"&&k.push("/"),k.push(Ka(ee,ee.charAt(0)=="/"?mh:ph,!0))),(ee=this.i.toString())&&k.push("?",ee),(ee=this.m)&&k.push("#",Ka(ee,Pl)),k.join("")};function Ps(k){return new cn(k)}function Ta(k,q,ee){k.j=ee?on(q,!0):q,k.j&&(k.j=k.j.replace(/:$/,""))}function Ko(k,q){if(q){if(q=Number(q),isNaN(q)||0>q)throw Error("Bad port number "+q);k.s=q}else k.s=null}function Yo(k,q,ee){q instanceof fa?(k.i=q,ll(k.i,k.h)):(ee||(q=Ka(q,bu)),k.i=new fa(q,k.h))}function un(k,q,ee){k.i.set(q,ee)}function Il(k){return un(k,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),k}function on(k,q){return k?q?decodeURI(k.replace(/%25/g,"%2525")):decodeURIComponent(k):""}function Ka(k,q,ee){return typeof k=="string"?(k=encodeURI(k).replace(q,wu),ee&&(k=k.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k):null}function wu(k){return k=k.charCodeAt(0),"%"+(k>>4&15).toString(16)+(k&15).toString(16)}var _u=/[#\/\?@]/g,ph=/[#\?:]/g,mh=/[#\?]/g,bu=/[#\?@]/g,Pl=/#/g;function fa(k,q){this.h=this.g=null,this.i=k||null,this.j=!!q}function Li(k){k.g||(k.g=new Map,k.h=0,k.i&&Hs(k.i,function(q,ee){k.add(decodeURIComponent(q.replace(/\+/g," ")),ee)}))}t=fa.prototype,t.add=function(k,q){Li(this),this.i=null,k=go(this,k);var ee=this.g.get(k);return ee||this.g.set(k,ee=[]),ee.push(q),this.h+=1,this};function pa(k,q){Li(k),q=go(k,q),k.g.has(q)&&(k.i=null,k.h-=k.g.get(q).length,k.g.delete(q))}function Ya(k,q){return Li(k),q=go(k,q),k.g.has(q)}t.forEach=function(k,q){Li(this),this.g.forEach(function(ee,ye){ee.forEach(function(Je){k.call(q,Je,ye,this)},this)},this)},t.na=function(){Li(this);const k=Array.from(this.g.values()),q=Array.from(this.g.keys()),ee=[];for(let ye=0;ye<q.length;ye++){const Je=k[ye];for(let gt=0;gt<Je.length;gt++)ee.push(q[ye])}return ee},t.V=function(k){Li(this);let q=[];if(typeof k=="string")Ya(this,k)&&(q=q.concat(this.g.get(go(this,k))));else{k=Array.from(this.g.values());for(let ee=0;ee<k.length;ee++)q=q.concat(k[ee])}return q},t.set=function(k,q){return Li(this),this.i=null,k=go(this,k),Ya(this,k)&&(this.h-=this.g.get(k).length),this.g.set(k,[q]),this.h+=1,this},t.get=function(k,q){return k?(k=this.V(k),0<k.length?String(k[0]):q):q};function Pr(k,q,ee){pa(k,q),0<ee.length&&(k.i=null,k.g.set(go(k,q),w(ee)),k.h+=ee.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const k=[],q=Array.from(this.g.keys());for(var ee=0;ee<q.length;ee++){var ye=q[ee];const gt=encodeURIComponent(String(ye)),Dt=this.V(ye);for(ye=0;ye<Dt.length;ye++){var Je=gt;Dt[ye]!==""&&(Je+="="+encodeURIComponent(String(Dt[ye]))),k.push(Je)}}return this.i=k.join("&")};function go(k,q){return q=String(q),k.j&&(q=q.toLowerCase()),q}function ll(k,q){q&&!k.j&&(Li(k),k.i=null,k.g.forEach(function(ee,ye){var Je=ye.toLowerCase();ye!=Je&&(pa(this,ye),Pr(this,Je,ee))},k)),k.j=q}function Gf(k,q){const ee=new ln;if(o.Image){const ye=new Image;ye.onload=m(Ws,ee,"TestLoadImage: loaded",!0,q,ye),ye.onerror=m(Ws,ee,"TestLoadImage: error",!1,q,ye),ye.onabort=m(Ws,ee,"TestLoadImage: abort",!1,q,ye),ye.ontimeout=m(Ws,ee,"TestLoadImage: timeout",!1,q,ye),o.setTimeout(function(){ye.ontimeout&&ye.ontimeout()},1e4),ye.src=k}else q(!1)}function gh(k,q){const ee=new ln,ye=new AbortController,Je=setTimeout(()=>{ye.abort(),Ws(ee,"TestPingServer: timeout",!1,q)},1e4);fetch(k,{signal:ye.signal}).then(gt=>{clearTimeout(Je),gt.ok?Ws(ee,"TestPingServer: ok",!0,q):Ws(ee,"TestPingServer: server error",!1,q)}).catch(()=>{clearTimeout(Je),Ws(ee,"TestPingServer: error",!1,q)})}function Ws(k,q,ee,ye,Je){try{Je&&(Je.onload=null,Je.onerror=null,Je.onabort=null,Je.ontimeout=null),ye(ee)}catch{}}function Rl(){this.g=new rr}function xh(k,q,ee){const ye=ee||"";try{Sn(k,function(Je,gt){let Dt=Je;c(Je)&&(Dt=Vt(Je)),q.push(ye+gt+"="+encodeURIComponent(Dt))})}catch(Je){throw q.push(ye+"type="+encodeURIComponent("_badmap")),Je}}function Ll(k){this.l=k.Ub||null,this.j=k.eb||!1}y(Ll,Sr),Ll.prototype.g=function(){return new cl(this.l,this.j)},Ll.prototype.i=(function(k){return function(){return k}})({});function cl(k,q){Qe.call(this),this.D=k,this.o=q,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(cl,Qe),t=cl.prototype,t.open=function(k,q){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=k,this.A=q,this.readyState=1,Ia(this)},t.send=function(k){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const q={headers:this.u,method:this.B,credentials:this.m,cache:void 0};k&&(q.body=k),(this.D||o).fetch(new Request(this.A,q)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ma(this)),this.readyState=0},t.Sa=function(k){if(this.g&&(this.l=k,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=k.headers,this.readyState=2,Ia(this)),this.g&&(this.readyState=3,Ia(this),this.g)))if(this.responseType==="arraybuffer")k.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in k){if(this.j=k.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ku(this)}else k.text().then(this.Ra.bind(this),this.ga.bind(this))};function ku(k){k.j.read().then(k.Pa.bind(k)).catch(k.ga.bind(k))}t.Pa=function(k){if(this.g){if(this.o&&k.value)this.response.push(k.value);else if(!this.o){var q=k.value?k.value:new Uint8Array(0);(q=this.v.decode(q,{stream:!k.done}))&&(this.response=this.responseText+=q)}k.done?ma(this):Ia(this),this.readyState==3&&ku(this)}},t.Ra=function(k){this.g&&(this.response=this.responseText=k,ma(this))},t.Qa=function(k){this.g&&(this.response=k,ma(this))},t.ga=function(){this.g&&ma(this)};function ma(k){k.readyState=4,k.l=null,k.j=null,k.v=null,Ia(k)}t.setRequestHeader=function(k,q){this.u.append(k,q)},t.getResponseHeader=function(k){return this.h&&this.h.get(k.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const k=[],q=this.h.entries();for(var ee=q.next();!ee.done;)ee=ee.value,k.push(ee[0]+": "+ee[1]),ee=q.next();return k.join(`\r
`)};function Ia(k){k.onreadystatechange&&k.onreadystatechange.call(k)}Object.defineProperty(cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(k){this.m=k?"include":"same-origin"}});function xo(k){let q="";return W(k,function(ee,ye){q+=ye,q+=":",q+=ee,q+=`\r
`}),q}function ac(k,q,ee){e:{for(ye in ee){var ye=!1;break e}ye=!0}ye||(ee=xo(ee),typeof k=="string"?ee!=null&&encodeURIComponent(String(ee)):un(k,q,ee))}function Zn(k){Qe.call(this),this.headers=new Map,this.o=k||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Zn,Qe);var md=/^https?$/i,jl=["POST","PUT"];t=Zn.prototype,t.Ha=function(k){this.J=k},t.ea=function(k,q,ee,ye){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+k);q=q?q.toUpperCase():"GET",this.D=k,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ie.g(),this.v=this.o?Cr(this.o):Cr(Ie),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(q,String(k),!0),this.B=!1}catch(gt){Xo(this,gt);return}if(k=ee||"",ee=new Map(this.headers),ye)if(Object.getPrototypeOf(ye)===Object.prototype)for(var Je in ye)ee.set(Je,ye[Je]);else if(typeof ye.keys=="function"&&typeof ye.get=="function")for(const gt of ye.keys())ee.set(gt,ye.get(gt));else throw Error("Unknown input type for opt_headers: "+String(ye));ye=Array.from(ee.keys()).find(gt=>gt.toLowerCase()=="content-type"),Je=o.FormData&&k instanceof o.FormData,!(0<=Array.prototype.indexOf.call(jl,q,void 0))||ye||Je||ee.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[gt,Dt]of ee)this.g.setRequestHeader(gt,Dt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ul(this),this.u=!0,this.g.send(k),this.u=!1}catch(gt){Xo(this,gt)}};function Xo(k,q){k.h=!1,k.g&&(k.j=!0,k.g.abort(),k.j=!1),k.l=q,k.m=5,oc(k),ga(k)}function oc(k){k.A||(k.A=!0,le(k,"complete"),le(k,"error"))}t.abort=function(k){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=k||7,le(this,"complete"),le(this,"abort"),ga(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ga(this,!0)),Zn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?lc(this):this.bb())},t.bb=function(){lc(this)};function lc(k){if(k.h&&typeof a<"u"&&(!k.v[1]||Ji(k)!=4||k.Z()!=2)){if(k.u&&Ji(k)==4)We(k.Ea,0,k);else if(le(k,"readystatechange"),Ji(k)==4){k.h=!1;try{const Dt=k.Z();e:switch(Dt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var q=!0;break e;default:q=!1}var ee;if(!(ee=q)){var ye;if(ye=Dt===0){var Je=String(k.D).match(jn)[1]||null;!Je&&o.self&&o.self.location&&(Je=o.self.location.protocol.slice(0,-1)),ye=!md.test(Je?Je.toLowerCase():"")}ee=ye}if(ee)le(k,"complete"),le(k,"success");else{k.m=6;try{var gt=2<Ji(k)?k.g.statusText:""}catch{gt=""}k.l=gt+" ["+k.Z()+"]",oc(k)}}finally{ga(k)}}}}function ga(k,q){if(k.g){ul(k);const ee=k.g,ye=k.v[0]?()=>{}:null;k.g=null,k.v=null,q||le(k,"ready");try{ee.onreadystatechange=ye}catch{}}}function ul(k){k.I&&(o.clearTimeout(k.I),k.I=null)}t.isActive=function(){return!!this.g};function Ji(k){return k.g?k.g.readyState:0}t.Z=function(){try{return 2<Ji(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(k){if(this.g){var q=this.g.responseText;return k&&q.indexOf(k)==0&&(q=q.substring(k.length)),Or(q)}};function Uc(k){try{if(!k.g)return null;if("response"in k.g)return k.g.response;switch(k.H){case"":case"text":return k.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in k.g)return k.g.mozResponseArrayBuffer}return null}catch{return null}}function Zi(k){const q={};k=(k.g&&2<=Ji(k)&&k.g.getAllResponseHeaders()||"").split(`\r
`);for(let ye=0;ye<k.length;ye++){if(T(k[ye]))continue;var ee=R(k[ye]);const Je=ee[0];if(ee=ee[1],typeof ee!="string")continue;ee=ee.trim();const gt=q[Je]||[];q[Je]=gt,gt.push(ee)}L(q,function(ye){return ye.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ji(k,q,ee){return ee&&ee.internalChannelParams&&ee.internalChannelParams[k]||q}function B(k){this.Aa=0,this.i=[],this.j=new ln,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ji("failFast",!1,k),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ji("baseRetryDelayMs",5e3,k),this.cb=ji("retryDelaySeedMs",1e4,k),this.Wa=ji("forwardChannelMaxRetries",2,k),this.wa=ji("forwardChannelRequestTimeoutMs",2e4,k),this.pa=k&&k.xmlHttpFactory||void 0,this.Xa=k&&k.Tb||void 0,this.Ca=k&&k.useFetchStreams||!1,this.L=void 0,this.J=k&&k.supportsCrossDomainXhr||!1,this.K="",this.h=new Qi(k&&k.concurrentRequestLimit),this.Da=new Rl,this.P=k&&k.fastHandshake||!1,this.O=k&&k.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=k&&k.Rb||!1,k&&k.xa&&this.j.xa(),k&&k.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&k&&k.detectBufferingProxy||!1,this.ja=void 0,k&&k.longPollingTimeout&&0<k.longPollingTimeout&&(this.ja=k.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=B.prototype,t.la=8,t.G=1,t.connect=function(k,q,ee,ye){Nn(0),this.W=k,this.H=q||{},ee&&ye!==void 0&&(this.H.OSID=ee,this.H.OAID=ye),this.F=this.X,this.I=dl(this,null,this.W),Ge(this)};function re(k){if(Me(k),k.G==3){var q=k.U++,ee=Ps(k.I);if(un(ee,"SID",k.K),un(ee,"RID",q),un(ee,"TYPE","terminate"),tr(k,ee),q=new ft(k,k.j,q),q.L=2,q.v=Il(Ps(ee)),ee=!1,o.navigator&&o.navigator.sendBeacon)try{ee=o.navigator.sendBeacon(q.v.toString(),"")}catch{}!ee&&o.Image&&(new Image().src=q.v,ee=!0),ee||(q.g=Fl(q.j,null),q.g.ea(q.v)),q.F=Date.now(),Pt(q)}xi(k)}function Ae(k){k.g&&(En(k),k.g.cancel(),k.g=null)}function Me(k){Ae(k),k.u&&(o.clearTimeout(k.u),k.u=null),Cs(k),k.h.cancel(),k.s&&(typeof k.s=="number"&&o.clearTimeout(k.s),k.s=null)}function Ge(k){if(!Fe(k.h)&&!k.s){k.s=!0;var q=k.Ga;he||te(),ae||(he(),ae=!0),H.add(q,k),k.B=0}}function bt(k,q){return zt(k.h)>=k.h.j-(k.s?1:0)?!1:k.s?(k.i=q.D.concat(k.i),!0):k.G==1||k.G==2||k.B>=(k.Va?0:k.Wa)?!1:(k.s=Gn(g(k.Ga,k,q),Gs(k,k.B)),k.B++,!0)}t.Ga=function(k){if(this.s)if(this.s=null,this.G==1){if(!k){this.U=Math.floor(1e5*Math.random()),k=this.U++;const Je=new ft(this,this.j,k);let gt=this.o;if(this.S&&(gt?(gt=A(gt),D(gt,this.S)):gt=this.S),this.m!==null||this.O||(Je.H=gt,gt=null),this.P)e:{for(var q=0,ee=0;ee<this.i.length;ee++){t:{var ye=this.i[ee];if("__data__"in ye.map&&(ye=ye.map.__data__,typeof ye=="string")){ye=ye.length;break t}ye=void 0}if(ye===void 0)break;if(q+=ye,4096<q){q=ee;break e}if(q===4096||ee===this.i.length-1){q=ee+1;break e}}q=1e3}else q=1e3;q=ar(this,Je,q),ee=Ps(this.I),un(ee,"RID",k),un(ee,"CVER",22),this.D&&un(ee,"X-HTTP-Session-Id",this.D),tr(this,ee),gt&&(this.O?q="headers="+encodeURIComponent(String(xo(gt)))+"&"+q:this.m&&ac(ee,this.m,gt)),nr(this.h,Je),this.Ua&&un(ee,"TYPE","init"),this.P?(un(ee,"$req",q),un(ee,"SID","null"),Je.T=!0,Tt(Je,ee,null)):Tt(Je,ee,q),this.G=2}}else this.G==3&&(k?Nt(this,k):this.i.length==0||Fe(this.h)||Nt(this))};function Nt(k,q){var ee;q?ee=q.l:ee=k.U++;const ye=Ps(k.I);un(ye,"SID",k.K),un(ye,"RID",ee),un(ye,"AID",k.T),tr(k,ye),k.m&&k.o&&ac(ye,k.m,k.o),ee=new ft(k,k.j,ee,k.B+1),k.m===null&&(ee.H=k.o),q&&(k.i=q.D.concat(k.i)),q=ar(k,ee,1e3),ee.I=Math.round(.5*k.wa)+Math.round(.5*k.wa*Math.random()),nr(k.h,ee),Tt(ee,ye,q)}function tr(k,q){k.H&&W(k.H,function(ee,ye){un(q,ye,ee)}),k.l&&Sn({},function(ee,ye){un(q,ye,ee)})}function ar(k,q,ee){ee=Math.min(k.i.length,ee);var ye=k.l?g(k.l.Na,k.l,k):null;e:{var Je=k.i;let gt=-1;for(;;){const Dt=["count="+ee];gt==-1?0<ee?(gt=Je[0].g,Dt.push("ofs="+gt)):gt=0:Dt.push("ofs="+gt);let On=!0;for(let Rs=0;Rs<ee;Rs++){let dn=Je[Rs].g;const gn=Je[Rs].map;if(dn-=gt,0>dn)gt=Math.max(0,Je[Rs].g-100),On=!1;else try{xh(gn,Dt,"req"+dn+"_")}catch{ye&&ye(gn)}}if(On){ye=Dt.join("&");break e}}}return k=k.i.splice(0,ee),q.D=k,ye}function Nr(k){if(!k.g&&!k.u){k.Y=1;var q=k.Fa;he||te(),ae||(he(),ae=!0),H.add(q,k),k.v=0}}function Mr(k){return k.g||k.u||3<=k.v?!1:(k.Y++,k.u=Gn(g(k.Fa,k),Gs(k,k.v)),k.v++,!0)}t.Fa=function(){if(this.u=null,xs(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var k=2*this.R;this.j.info("BP detection timer enabled: "+k),this.A=Gn(g(this.ab,this),k)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Nn(10),Ae(this),xs(this))};function En(k){k.A!=null&&(o.clearTimeout(k.A),k.A=null)}function xs(k){k.g=new ft(k,k.j,"rpc",k.Y),k.m===null&&(k.g.H=k.o),k.g.O=0;var q=Ps(k.qa);un(q,"RID","rpc"),un(q,"SID",k.K),un(q,"AID",k.T),un(q,"CI",k.F?"0":"1"),!k.F&&k.ja&&un(q,"TO",k.ja),un(q,"TYPE","xmlhttp"),tr(k,q),k.m&&k.o&&ac(q,k.m,k.o),k.L&&(k.g.I=k.L);var ee=k.g;k=k.ia,ee.L=1,ee.v=Il(Ps(q)),ee.m=null,ee.P=!0,Ut(ee,k)}t.Za=function(){this.C!=null&&(this.C=null,Ae(this),Mr(this),Nn(19))};function Cs(k){k.C!=null&&(o.clearTimeout(k.C),k.C=null)}function Fn(k,q){var ee=null;if(k.g==q){Cs(k),En(k),k.g=null;var ye=2}else if(Qt(k.h,q))ee=q.D,gr(k.h,q),ye=1;else return;if(k.G!=0){if(q.o)if(ye==1){ee=q.m?q.m.length:0,q=Date.now()-q.F;var Je=k.B;ye=ms(),le(ye,new Ri(ye,ee)),Ge(k)}else Nr(k);else if(Je=q.s,Je==3||Je==0&&0<q.X||!(ye==1&&bt(k,q)||ye==2&&Mr(k)))switch(ee&&0<ee.length&&(q=k.h,q.i=q.i.concat(ee)),Je){case 1:es(k,5);break;case 4:es(k,10);break;case 3:es(k,6);break;default:es(k,2)}}}function Gs(k,q){let ee=k.Ta+Math.floor(Math.random()*k.cb);return k.isActive()||(ee*=2),ee*q}function es(k,q){if(k.j.info("Error code "+q),q==2){var ee=g(k.fb,k),ye=k.Xa;const Je=!ye;ye=new cn(ye||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ta(ye,"https"),Il(ye),Je?Gf(ye.toString(),ee):gh(ye.toString(),ee)}else Nn(2);k.G=0,k.l&&k.l.sa(q),xi(k),Me(k)}t.fb=function(k){k?(this.j.info("Successfully pinged google.com"),Nn(2)):(this.j.info("Failed to ping google.com"),Nn(1))};function xi(k){if(k.G=0,k.ka=[],k.l){const q=sn(k.h);(q.length!=0||k.i.length!=0)&&(_(k.ka,q),_(k.ka,k.i),k.h.i.length=0,w(k.i),k.i.length=0),k.l.ra()}}function dl(k,q,ee){var ye=ee instanceof cn?Ps(ee):new cn(ee);if(ye.g!="")q&&(ye.g=q+"."+ye.g),Ko(ye,ye.s);else{var Je=o.location;ye=Je.protocol,q=q?q+"."+Je.hostname:Je.hostname,Je=+Je.port;var gt=new cn(null);ye&&Ta(gt,ye),q&&(gt.g=q),Je&&Ko(gt,Je),ee&&(gt.l=ee),ye=gt}return ee=k.D,q=k.ya,ee&&q&&un(ye,ee,q),un(ye,"VER",k.la),tr(k,ye),ye}function Fl(k,q,ee){if(q&&!k.J)throw Error("Can't create secondary domain capable XhrIo object.");return q=k.Ca&&!k.pa?new Zn(new Ll({eb:ee})):new Zn(k.pa),q.Ha(k.J),q}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gd(){}t=gd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function zc(){}zc.prototype.g=function(k,q){return new ii(k,q)};function ii(k,q){Qe.call(this),this.g=new B(q),this.l=k,this.h=q&&q.messageUrlParams||null,k=q&&q.messageHeaders||null,q&&q.clientProtocolHeaderRequired&&(k?k["X-Client-Protocol"]="webchannel":k={"X-Client-Protocol":"webchannel"}),this.g.o=k,k=q&&q.initMessageHeaders||null,q&&q.messageContentType&&(k?k["X-WebChannel-Content-Type"]=q.messageContentType:k={"X-WebChannel-Content-Type":q.messageContentType}),q&&q.va&&(k?k["X-WebChannel-Client-Profile"]=q.va:k={"X-WebChannel-Client-Profile":q.va}),this.g.S=k,(k=q&&q.Sb)&&!T(k)&&(this.g.m=k),this.v=q&&q.supportsCrossDomainXhr||!1,this.u=q&&q.sendRawJson||!1,(q=q&&q.httpSessionIdParam)&&!T(q)&&(this.g.D=q,k=this.h,k!==null&&q in k&&(k=this.h,q in k&&delete k[q])),this.j=new Xa(this)}y(ii,Qe),ii.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ii.prototype.close=function(){re(this.g)},ii.prototype.o=function(k){var q=this.g;if(typeof k=="string"){var ee={};ee.__data__=k,k=ee}else this.u&&(ee={},ee.__data__=Vt(k),k=ee);q.i.push(new Na(q.Ya++,k)),q.G==3&&Ge(q)},ii.prototype.N=function(){this.g.l=null,delete this.j,re(this.g),delete this.g,ii.aa.N.call(this)};function yo(k){Yr.call(this),k.__headers__&&(this.headers=k.__headers__,this.statusCode=k.__status__,delete k.__headers__,delete k.__status__);var q=k.__sm__;if(q){e:{for(const ee in q){k=ee;break e}k=void 0}(this.i=k)&&(k=this.i,q=q!==null&&k in q?q[k]:void 0),this.data=q}else this.data=k}y(yo,Yr);function Su(){hr.call(this),this.status=1}y(Su,hr);function Xa(k){this.g=k}y(Xa,gd),Xa.prototype.ua=function(){le(this.g,"a")},Xa.prototype.ta=function(k){le(this.g,new yo(k))},Xa.prototype.sa=function(k){le(this.g,new Su)},Xa.prototype.ra=function(){le(this.g,"b")},zc.prototype.createWebChannel=zc.prototype.g,ii.prototype.send=ii.prototype.o,ii.prototype.open=ii.prototype.m,ii.prototype.close=ii.prototype.close,Wj=function(){return new zc},Hj=function(){return ms()},qj=Jr,h6={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,iw=Se,Pe.COMPLETE="complete",$j=Pe,Bn.EventType=bn,bn.OPEN="a",bn.CLOSE="b",bn.ERROR="c",bn.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,Kg=Bn,Zn.prototype.listenOnce=Zn.prototype.L,Zn.prototype.getLastError=Zn.prototype.Ka,Zn.prototype.getLastErrorCode=Zn.prototype.Ba,Zn.prototype.getStatus=Zn.prototype.Z,Zn.prototype.getResponseJson=Zn.prototype.Oa,Zn.prototype.getResponseText=Zn.prototype.oa,Zn.prototype.send=Zn.prototype.ea,Zn.prototype.setWithCredentials=Zn.prototype.Ha,zj=Zn}).apply(typeof lv<"u"?lv:typeof self<"u"?self:typeof window<"u"?window:{});const DC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let za=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};za.UNAUTHENTICATED=new za(null),za.GOOGLE_CREDENTIALS=new za("google-credentials-uid"),za.FIRST_PARTY=new za("first-party-uid"),za.MOCK_USER=new za("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R1="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=new _8("@firebase/firestore");function _m(){return mf.logLevel}function gX(t){mf.setLogLevel(t)}function Lt(t,...e){if(mf.logLevel<=Tn.DEBUG){const r=e.map(k8);mf.debug(`Firestore (${R1}): ${t}`,...r)}}function qi(t,...e){if(mf.logLevel<=Tn.ERROR){const r=e.map(k8);mf.error(`Firestore (${R1}): ${t}`,...r)}}function rc(t,...e){if(mf.logLevel<=Tn.WARN){const r=e.map(k8);mf.warn(`Firestore (${R1}): ${t}`,...r)}}function k8(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t="Unexpected state"){const e=`FIRESTORE (${R1}) INTERNAL ASSERTION FAILED: `+t;throw qi(e),new Error(e)}function mr(t,e){t||ir()}function xX(t,e){t||ir()}function Yt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rt extends xu{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(za.UNAUTHENTICATED)))}shutdown(){}}class yX{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class vX{constructor(e){this.t=e,this.currentUser=za.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){mr(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new Wa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Wa,e.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},o=l=>{Lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((l=>o(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Wa)}}),0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(Lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(mr(typeof n.accessToken=="string"),new Gj(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mr(e===null||typeof e=="string"),new za(e)}}class wX{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=za.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _X{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new wX(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(za.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Yj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bX{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){mr(this.o===void 0);const n=i=>{i.error!=null&&Lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Lt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const s=i=>{Lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(mr(typeof r.token=="string"),this.R=r.token,new Yj(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class kX{getToken(){return Promise.resolve(new Yj(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SX(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=SX(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function Kr(t,e){return t<e?-1:t>e?1:0}function o1(t,e,r){return t.length===e.length&&t.every(((n,s)=>r(n,e[s])))}function Xj(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Rt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Rt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Rt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Rt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ri.fromMillis(Date.now())}static fromDate(e){return ri.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new ri(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kr(this.nanoseconds,e.nanoseconds):Kr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.timestamp=e}static fromTimestamp(e){return new br(e)}static min(){return new br(new ri(0,0))}static max(){return new br(new ri(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,r,n){r===void 0?r=0:r>e.length&&ir(),n===void 0?n=e.length-r:n>e.length-r&&ir(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Y2.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Y2?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Pn extends Y2{construct(e,r,n){return new Pn(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Rt(mt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((s=>s.length>0)))}return new Pn(r)}static emptyPath(){return new Pn([])}}const EX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vs extends Y2{construct(e,r,n){return new Vs(e,r,n)}static isValidIdentifier(e){return EX.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vs.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vs(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new Rt(mt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new Rt(mt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Rt(mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new Rt(mt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vs(r)}static emptyPath(){return new Vs([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.path=e}static fromPath(e){return new Jt(Pn.fromString(e))}static fromName(e){return new Jt(Pn.fromString(e).popFirst(5))}static empty(){return new Jt(Pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Pn.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Jt(new Pn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function f6(t){return t.fields.find((e=>e.kind===2))}function x0(t){return t.fields.filter((e=>e.kind!==2))}function CX(t,e){let r=Kr(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=AX(t.fields[n],e.fields[n]),r!==0)return r;return Kr(t.fields.length,e.fields.length)}l1.UNKNOWN_ID=-1;class V0{constructor(e,r){this.fieldPath=e,this.kind=r}}function AX(t,e){const r=Vs.comparator(t.fieldPath,e.fieldPath);return r!==0?r:Kr(t.kind,e.kind)}class c1{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new c1(0,nc.min())}}function Qj(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=br.fromTimestamp(n===1e9?new ri(r+1,0):new ri(r,n));return new nc(s,Jt.empty(),e)}function Jj(t){return new nc(t.readTime,t.key,-1)}class nc{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new nc(br.min(),Jt.empty(),-1)}static max(){return new nc(br.max(),Jt.empty(),-1)}}function E8(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Jt.comparator(t.documentKey,e.documentKey),r!==0?r:Kr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jf(t){if(t.code!==mt.FAILED_PRECONDITION||t.message!==Zj)throw t;Lt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&ir(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new rt(((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof rt?r:rt.resolve(r)}catch(r){return rt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):rt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):rt.reject(r)}static resolve(e){return new rt(((r,n)=>{r(e)}))}static reject(e){return new rt(((r,n)=>{n(e)}))}static waitFor(e){return new rt(((r,n)=>{let s=0,i=0,a=!1;e.forEach((o=>{++s,o.next((()=>{++i,a&&i===s&&r()}),(l=>n(l)))})),a=!0,i===s&&r()}))}static or(e){let r=rt.resolve(!1);for(const n of e)r=r.next((s=>s?rt.resolve(s):n()));return r}static forEach(e,r){const n=[];return e.forEach(((s,i)=>{n.push(r.call(this,s,i))})),this.waitFor(n)}static mapArray(e,r){return new rt(((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;r(e[c]).next((d=>{a[c]=d,++o,o===i&&n(a)}),(d=>s(d)))}}))}static doWhile(e,r){return new rt(((n,s)=>{const i=()=>{e()===!0?r().next((()=>{i()}),s):n()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Wa,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new m2(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=C8(n.target.error);this.V.reject(new m2(e,s))}}static open(e,r,n,s){try{return new c_(r,e.transaction(s,n))}catch(i){throw new m2(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Lt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new TX(r)}}class Ju{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Ju.S(Sa())===12.2&&qi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Lt("SimpleDb","Removing database:",e),b0(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Fj())return!1;if(Ju.v())return!0;const e=Sa(),r=Ju.S(e),n=0<r&&r<10,s=tF(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Lt("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;r(a)},s.onblocked=()=>{n(new m2(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?n(new Rt(mt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new Rt(mt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new m2(e,a))},s.onupgradeneeded=i=>{Lt("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.p.O(a,s.transaction,i.oldVersion,this.version).next((()=>{Lt("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const i=r==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=c_.open(this.db,e,i?"readonly":"readwrite",n),l=s(o).next((c=>(o.g(),c))).catch((c=>(o.abort(c),rt.reject(c)))).toPromise();return l.catch((()=>{})),await o.m,l}catch(o){const l=o,c=l.name!=="FirebaseError"&&a<3;if(Lt("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function tF(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class NX{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return b0(this.B.delete())}}class m2 extends Rt{constructor(e,r){super(mt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Ff(t){return t.name==="IndexedDbTransactionError"}class TX{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Lt("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(Lt("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),b0(n)}add(e){return Lt("SimpleDb","ADD",this.store.name,e,e),b0(this.store.add(e))}get(e){return b0(this.store.get(e)).next((r=>(r===void 0&&(r=null),Lt("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return Lt("SimpleDb","DELETE",this.store.name,e),b0(this.store.delete(e))}count(){return Lt("SimpleDb","COUNT",this.store.name),b0(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(n.range);return new rt(((a,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{a(l.target.result)}}))}{const i=this.cursor(n),a=[];return this.W(i,((o,l)=>{a.push(l)})).next((()=>a))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new rt(((s,i)=>{n.onerror=a=>{i(a.target.error)},n.onsuccess=a=>{s(a.target.result)}}))}j(e,r){Lt("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,((i,a,o)=>o.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new rt(((n,s)=>{r.onerror=i=>{const a=C8(i.target.error);s(a)},r.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next((o=>{o?a.continue():n()})):n()}}))}W(e,r){const n=[];return new rt(((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void s();const l=new NX(o),c=r(o.primaryKey,o.value,l);if(c instanceof rt){const d=c.catch((p=>(l.done(),rt.reject(p))));n.push(d)}l.isDone?s():l.K===null?o.continue():o.continue(l.K)}})).next((()=>rt.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function b0(t){return new rt(((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=C8(n.target.error);r(s)}}))}let OC=!1;function C8(t){const e=Ju.S(Sa());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new Rt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return OC||(OC=!0,setTimeout((()=>{throw n}),0)),n}}return t}class IX{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Lt("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Lt("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Ff(r)?Lt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await jf(r)}await this.X(6e4)}))}}class PX{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let s=r,i=!0;return rt.doWhile((()=>i===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!n.has(a))return Lt("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,s).next((o=>{s-=o,n.add(a)}));i=!1})))).next((()=>r-s))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next((i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this.re(s,i))).next((o=>(Lt("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o)))).next((()=>a.size))}))))}re(e,r){let n=e;return r.changes.forEach(((s,i)=>{const a=Jj(i);E8(a,n)>0&&(n=a)})),new nc(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}bl.oe=-1;function Dx(t){return t==null}function X2(t){return t===0&&1/t==-1/0}function rF(t){return typeof t=="number"&&Number.isInteger(t)&&!X2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=MC(e)),e=RX(t.get(r),e);return MC(e)}function RX(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function MC(t){return t+""}function Hu(t){const e=t.length;if(mr(e>=2),e===2)return mr(t.charAt(0)===""&&t.charAt(1)===""),Pn.emptyPath();const r=e-2,n=[];let s="";for(let i=0;i<e;){const a=t.indexOf("",i);switch((a<0||a>r)&&ir(),t.charAt(a+1)){case"":const o=t.substring(i,a);let l;s.length===0?l=o:(s+=o,l=s,s=""),n.push(l);break;case"":s+=t.substring(i,a),s+="\0";break;case"":s+=t.substring(i,a+1);break;default:ir()}i=a+2}return new Pn(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t,e){return[t,$o(e)]}function nF(t,e,r){return[t,$o(e),r]}const LX={},jX=["prefixPath","collectionGroup","readTime","documentId"],FX=["prefixPath","collectionGroup","documentId"],DX=["collectionGroup","readTime","prefixPath","documentId"],OX=["canonicalId","targetId"],MX=["targetId","path"],BX=["path","targetId"],VX=["collectionId","parent"],UX=["indexId","uid"],zX=["uid","sequenceNumber"],$X=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qX=["indexId","uid","orderedDocumentKey"],HX=["userId","collectionPath","documentId"],WX=["userId","collectionPath","largestBatchId"],GX=["userId","collectionGroup","largestBatchId"],sF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],KX=[...sF,"documentOverlays"],iF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],aF=iF,A8=[...aF,"indexConfiguration","indexState","indexEntries"],YX=A8,XX=[...A8,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6 extends eF{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Ca(t,e){const r=Yt(t);return Ju.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Df(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function oF(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function lF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,r){this.comparator=e,this.root=r||co.EMPTY}insert(e,r){return new Ds(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,co.BLACK,null,null))}remove(e){return new Ds(this.comparator,this.root.remove(e,this.comparator).copy(null,null,co.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cv(this.root,e,this.comparator,!1)}getReverseIterator(){return new cv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cv(this.root,e,this.comparator,!0)}}class cv{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class co{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??co.RED,this.left=s??co.EMPTY,this.right=i??co.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new co(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return co.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return co.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,co.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,co.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ir();const e=this.left.check();if(e!==this.right.check())throw ir();return e+(this.isRed()?0:1)}}co.EMPTY=null,co.RED=!0,co.BLACK=!1;co.EMPTY=new class{constructor(){this.size=0}get key(){throw ir()}get value(){throw ir()}get color(){throw ir()}get left(){throw ir()}get right(){throw ir()}copy(e,r,n,s,i){return this}insert(e,r,n){return new co(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.comparator=e,this.data=new Ds(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new UC(this.data.getIterator())}getIteratorFrom(e){return new UC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof ks)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new ks(this.comparator);return r.data=e,r}}class UC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function am(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this.fields=e,e.sort(Vs.comparator)}static empty(){return new kl([])}unionWith(e){let r=new ks(Vs.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new kl(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return o1(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QX(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new cF("Invalid base64 string: "+i):i}})(e);return new gi(r)}static fromUint8Array(e){const r=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(e);return new gi(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gi.EMPTY_BYTE_STRING=new gi("");const JX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yd(t){if(mr(!!t),typeof t=="string"){let e=0;const r=JX.exec(t);if(mr(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Zs(t.seconds),nanos:Zs(t.nanos)}}function Zs(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xd(t){return typeof t=="string"?gi.fromBase64String(t):gi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(t){var e,r;return((r=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function d_(t){const e=t.mapValue.fields.__previous_value__;return u_(e)?d_(e):e}function Q2(t){const e=Yd(t.mapValue.fields.__local_write_time__.timestampValue);return new ri(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZX{constructor(e,r,n,s,i,a,o,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class gf{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new gf("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof gf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ow={nullValue:"NULL_VALUE"};function xf(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?u_(t)?4:uF(t)?9007199254740991:h_(t)?10:11:ir()}function ad(t,e){if(t===e)return!0;const r=xf(t);if(r!==xf(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Q2(t).isEqual(Q2(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Yd(s.timestampValue),o=Yd(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return Xd(s.bytesValue).isEqual(Xd(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return Zs(s.geoPointValue.latitude)===Zs(i.geoPointValue.latitude)&&Zs(s.geoPointValue.longitude)===Zs(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Zs(s.integerValue)===Zs(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Zs(s.doubleValue),o=Zs(i.doubleValue);return a===o?X2(a)===X2(o):isNaN(a)&&isNaN(o)}return!1})(t,e);case 9:return o1(t.arrayValue.values||[],e.arrayValue.values||[],ad);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(VC(a)!==VC(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!ad(a[l],o[l])))return!1;return!0})(t,e);default:return ir()}}function J2(t,e){return(t.values||[]).find((r=>ad(r,e)))!==void 0}function yf(t,e){if(t===e)return 0;const r=xf(t),n=xf(e);if(r!==n)return Kr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Kr(t.booleanValue,e.booleanValue);case 2:return(function(i,a){const o=Zs(i.integerValue||i.doubleValue),l=Zs(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1})(t,e);case 3:return zC(t.timestampValue,e.timestampValue);case 4:return zC(Q2(t),Q2(e));case 5:return Kr(t.stringValue,e.stringValue);case 6:return(function(i,a){const o=Xd(i),l=Xd(a);return o.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,a){const o=i.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const d=Kr(o[c],l[c]);if(d!==0)return d}return Kr(o.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,a){const o=Kr(Zs(i.latitude),Zs(a.latitude));return o!==0?o:Kr(Zs(i.longitude),Zs(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return $C(t.arrayValue,e.arrayValue);case 10:return(function(i,a){var o,l,c,d;const p=i.fields||{},g=a.fields||{},m=(o=p.value)===null||o===void 0?void 0:o.arrayValue,y=(l=g.value)===null||l===void 0?void 0:l.arrayValue,w=Kr(((c=m?.values)===null||c===void 0?void 0:c.length)||0,((d=y?.values)===null||d===void 0?void 0:d.length)||0);return w!==0?w:$C(m,y)})(t.mapValue,e.mapValue);case 11:return(function(i,a){if(i===sf.mapValue&&a===sf.mapValue)return 0;if(i===sf.mapValue)return 1;if(a===sf.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),c=a.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const g=Kr(l[p],d[p]);if(g!==0)return g;const m=yf(o[l[p]],c[d[p]]);if(m!==0)return m}return Kr(l.length,d.length)})(t.mapValue,e.mapValue);default:throw ir()}}function zC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Kr(t,e);const r=Yd(t),n=Yd(e),s=Kr(r.seconds,n.seconds);return s!==0?s:Kr(r.nanos,n.nanos)}function $C(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=yf(r[s],n[s]);if(i)return i}return Kr(r.length,n.length)}function u1(t){return m6(t)}function m6(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=Yd(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return Xd(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return Jt.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=m6(i);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${m6(r.fields[a])}`;return s+"}"})(t.mapValue):ir()}function lw(t){switch(xf(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=d_(t);return e?16+lw(e):16;case 5:return 2*t.stringValue.length;case 6:return Xd(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((s,i)=>s+lw(i)),0)})(t.arrayValue);case 10:case 11:return(function(n){let s=0;return Df(n.fields,((i,a)=>{s+=i.length+lw(a)})),s})(t.mapValue);default:throw ir()}}function X0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function g6(t){return!!t&&"integerValue"in t}function Z2(t){return!!t&&"arrayValue"in t}function qC(t){return!!t&&"nullValue"in t}function HC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cw(t){return!!t&&"mapValue"in t}function h_(t){var e,r;return((r=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function g2(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Df(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=g2(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=g2(t.arrayValue.values[r]);return e}return Object.assign({},t)}function uF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const dF={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function eQ(t){return"nullValue"in t?ow:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?X0(gf.empty(),Jt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?h_(t)?dF:{mapValue:{}}:ir()}function tQ(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?X0(gf.empty(),Jt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?dF:"mapValue"in t?h_(t)?{mapValue:{}}:sf:ir()}function WC(t,e){const r=yf(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function GC(t,e){const r=yf(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.value=e}static empty(){return new fo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!cw(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=g2(r)}setAll(e){let r=Vs.emptyPath(),n={},s=[];e.forEach(((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=g2(a):s.push(o.lastSegment())}));const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());cw(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ad(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];cw(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Df(r,((s,i)=>e[s]=i));for(const s of n)delete e[s]}clone(){return new fo(g2(this.value))}}function hF(t){const e=[];return Df(t.fields,((r,n)=>{const s=new Vs([r]);if(cw(n)){const i=hF(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)})),new kl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Bs(e,0,br.min(),br.min(),br.min(),fo.empty(),0)}static newFoundDocument(e,r,n,s){return new Bs(e,1,r,br.min(),n,s,0)}static newNoDocument(e,r){return new Bs(e,2,r,br.min(),br.min(),fo.empty(),0)}static newUnknownDocument(e,r){return new Bs(e,3,r,br.min(),br.min(),fo.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(br.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=br.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,r){this.position=e,this.inclusive=r}}function KC(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=Jt.comparator(Jt.fromName(a.referenceValue),r.key):n=yf(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function YC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!ad(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,r="asc"){this.field=e,this.dir=r}}function rQ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fF=class{};class Rn extends fF{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new nQ(e,r,n):r==="array-contains"?new aQ(e,n):r==="in"?new vF(e,n):r==="not-in"?new oQ(e,n):r==="array-contains-any"?new lQ(e,n):new Rn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new sQ(e,n):new iQ(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(yf(r,this.value)):r!==null&&xf(this.value)===xf(r)&&this.matchesComparison(yf(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ir()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fs extends fF{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new fs(e,r)}matches(e){return d1(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function d1(t){return t.op==="and"}function x6(t){return t.op==="or"}function N8(t){return pF(t)&&d1(t)}function pF(t){for(const e of t.filters)if(e instanceof fs)return!1;return!0}function y6(t){if(t instanceof Rn)return t.field.canonicalString()+t.op.toString()+u1(t.value);if(N8(t))return t.filters.map((e=>y6(e))).join(",");{const e=t.filters.map((r=>y6(r))).join(",");return`${t.op}(${e})`}}function mF(t,e){return t instanceof Rn?(function(n,s){return s instanceof Rn&&n.op===s.op&&n.field.isEqual(s.field)&&ad(n.value,s.value)})(t,e):t instanceof fs?(function(n,s){return s instanceof fs&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((i,a,o)=>i&&mF(a,s.filters[o])),!0):!1})(t,e):void ir()}function gF(t,e){const r=t.filters.concat(e);return fs.create(r,t.op)}function xF(t){return t instanceof Rn?(function(r){return`${r.field.canonicalString()} ${r.op} ${u1(r.value)}`})(t):t instanceof fs?(function(r){return r.op.toString()+" {"+r.getFilters().map(xF).join(" ,")+"}"})(t):"Filter"}class nQ extends Rn{constructor(e,r,n){super(e,r,n),this.key=Jt.fromName(n.referenceValue)}matches(e){const r=Jt.comparator(e.key,this.key);return this.matchesComparison(r)}}class sQ extends Rn{constructor(e,r){super(e,"in",r),this.keys=yF("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class iQ extends Rn{constructor(e,r){super(e,"not-in",r),this.keys=yF("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function yF(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>Jt.fromName(n.referenceValue)))}class aQ extends Rn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Z2(r)&&J2(r.arrayValue,this.value)}}class vF extends Rn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&J2(this.value.arrayValue,r)}}class oQ extends Rn{constructor(e,r){super(e,"not-in",r)}matches(e){if(J2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!J2(this.value.arrayValue,r)}}class lQ extends Rn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Z2(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>J2(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cQ{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function v6(t,e=null,r=[],n=[],s=null,i=null,a=null){return new cQ(t,e,r,n,s,i,a)}function Q0(t){const e=Yt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>y6(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),Dx(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>u1(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>u1(n))).join(",")),e.ue=r}return e.ue}function Ox(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!rQ(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!mF(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!YC(t.startAt,e.startAt)&&YC(t.endAt,e.endAt)}function Kw(t){return Jt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Yw(t,e){return t.filters.filter((r=>r instanceof Rn&&r.field.isEqual(e)))}function XC(t,e,r){let n=ow,s=!0;for(const i of Yw(t,e)){let a=ow,o=!0;switch(i.op){case"<":case"<=":a=eQ(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,o=!1;break;case"!=":case"not-in":a=ow}WC({value:n,inclusive:s},{value:a,inclusive:o})<0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];WC({value:n,inclusive:s},{value:a,inclusive:r.inclusive})<0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}function QC(t,e,r){let n=sf,s=!0;for(const i of Yw(t,e)){let a=sf,o=!0;switch(i.op){case">=":case">":a=tQ(i.value),o=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,o=!1;break;case"!=":case"not-in":a=sf}GC({value:n,inclusive:s},{value:a,inclusive:o})>0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];GC({value:n,inclusive:s},{value:a,inclusive:r.inclusive})>0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function wF(t,e,r,n,s,i,a,o){return new nh(t,e,r,n,s,i,a,o)}function L1(t){return new nh(t)}function JC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function T8(t){return t.collectionGroup!==null}function zm(t){const e=Yt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new ks(Vs.comparator);return a.filters.forEach((l=>{l.getFlattenedFilters().forEach((c=>{c.isInequality()&&(o=o.add(c.field))}))})),o})(e).forEach((i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ex(i,n))})),r.has(Vs.keyField().canonicalString())||e.ce.push(new ex(Vs.keyField(),n))}return e.ce}function qo(t){const e=Yt(t);return e.le||(e.le=bF(e,zm(t))),e.le}function _F(t){const e=Yt(t);return e.he||(e.he=bF(e,t.explicitOrderBy)),e.he}function bF(t,e){if(t.limitType==="F")return v6(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new ex(s.field,i)}));const r=t.endAt?new vf(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new vf(t.startAt.position,t.startAt.inclusive):null;return v6(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function w6(t,e){const r=t.filters.concat([e]);return new nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Xw(t,e,r){return new nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Mx(t,e){return Ox(qo(t),qo(e))&&t.limitType===e.limitType}function kF(t){return`${Q0(qo(t))}|lt:${t.limitType}`}function bm(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((s=>xF(s))).join(", ")}]`),Dx(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((s=>u1(s))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((s=>u1(s))).join(",")),`Target(${n})`})(qo(t))}; limitType=${t.limitType})`}function Bx(t,e){return e.isFoundDocument()&&(function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Jt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(t,e)&&(function(n,s){for(const i of zm(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(n,s){return!(n.startAt&&!(function(a,o,l){const c=KC(a,o,l);return a.inclusive?c<=0:c<0})(n.startAt,zm(n),s)||n.endAt&&!(function(a,o,l){const c=KC(a,o,l);return a.inclusive?c>=0:c>0})(n.endAt,zm(n),s))})(t,e)}function SF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function EF(t){return(e,r)=>{let n=!1;for(const s of zm(t)){const i=uQ(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function uQ(t,e,r){const n=t.field.isKeyField()?Jt.comparator(e.key,r.key):(function(i,a,o){const l=a.data.field(i),c=o.data.field(i);return l!==null&&c!==null?yf(l,c):ir()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return ir()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Df(this.inner,((r,n)=>{for(const[s,i]of n)e(s,i)}))}isEmpty(){return lF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dQ=new Ds(Jt.comparator);function Sl(){return dQ}const CF=new Ds(Jt.comparator);function Yg(...t){let e=CF;for(const r of t)e=e.insert(r.key,r);return e}function AF(t){let e=CF;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function Wu(){return x2()}function NF(){return x2()}function x2(){return new sh((t=>t.toString()),((t,e)=>t.isEqual(e)))}const hQ=new Ds(Jt.comparator),fQ=new ks(Jt.comparator);function rn(...t){let e=fQ;for(const r of t)e=e.add(r);return e}const pQ=new ks(Kr);function I8(){return pQ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:X2(e)?"-0":e}}function TF(t){return{integerValue:""+t}}function IF(t,e){return rF(e)?TF(e):P8(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this._=void 0}}function mQ(t,e,r){return t instanceof h1?(function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&u_(i)&&(i=d_(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}})(r,e):t instanceof J0?RF(t,e):t instanceof Z0?LF(t,e):(function(s,i){const a=PF(s,i),o=ZC(a)+ZC(s.Pe);return g6(a)&&g6(s.Pe)?TF(o):P8(s.serializer,o)})(t,e)}function gQ(t,e,r){return t instanceof J0?RF(t,e):t instanceof Z0?LF(t,e):r}function PF(t,e){return t instanceof f1?(function(n){return g6(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class h1 extends f_{}class J0 extends f_{constructor(e){super(),this.elements=e}}function RF(t,e){const r=jF(e);for(const n of t.elements)r.some((s=>ad(s,n)))||r.push(n);return{arrayValue:{values:r}}}class Z0 extends f_{constructor(e){super(),this.elements=e}}function LF(t,e){let r=jF(e);for(const n of t.elements)r=r.filter((s=>!ad(s,n)));return{arrayValue:{values:r}}}class f1 extends f_{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function ZC(t){return Zs(t.integerValue||t.doubleValue)}function jF(t){return Z2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,r){this.field=e,this.transform=r}}function xQ(t,e){return t.field.isEqual(e.field)&&(function(n,s){return n instanceof J0&&s instanceof J0||n instanceof Z0&&s instanceof Z0?o1(n.elements,s.elements,ad):n instanceof f1&&s instanceof f1?ad(n.Pe,s.Pe):n instanceof h1&&s instanceof h1})(t.transform,e.transform)}class yQ{constructor(e,r){this.version=e,this.transformResults=r}}class ei{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ei}static exists(e){return new ei(void 0,e)}static updateTime(e){return new ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uw(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class p_{}function FF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new F1(t.key,ei.none()):new j1(t.key,t.data,ei.none());{const r=t.data,n=fo.empty();let s=new ks(Vs.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new ih(t.key,n,new kl(s.toArray()),ei.none())}}function vQ(t,e,r){t instanceof j1?(function(s,i,a){const o=s.value.clone(),l=tA(s.fieldTransforms,i,a.transformResults);o.setAll(l),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(t,e,r):t instanceof ih?(function(s,i,a){if(!uw(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=tA(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(DF(s)),l.setAll(o),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(t,e,r):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,r)}function y2(t,e,r,n){return t instanceof j1?(function(i,a,o,l){if(!uw(i.precondition,a))return o;const c=i.value.clone(),d=rA(i.fieldTransforms,l,a);return c.setAll(d),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null})(t,e,r,n):t instanceof ih?(function(i,a,o,l){if(!uw(i.precondition,a))return o;const c=rA(i.fieldTransforms,l,a),d=a.data;return d.setAll(DF(i)),d.setAll(c),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,r,n):(function(i,a,o){return uw(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o})(t,e,r)}function wQ(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=PF(n.transform,s||null);i!=null&&(r===null&&(r=fo.empty()),r.set(n.field,i))}return r||null}function eA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&o1(n,s,((i,a)=>xQ(i,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class j1 extends p_{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ih extends p_{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function DF(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function tA(t,e,r){const n=new Map;mr(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,gQ(a,o,r[s]))}return n}function rA(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,mQ(i,a,e))}return n}class F1 extends p_{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class R8 extends p_{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&vQ(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=y2(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=y2(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=NF();return this.mutations.forEach((s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const l=FF(a,o);l!==null&&n.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(br.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),rn())}isEqual(e){return this.batchId===e.batchId&&o1(this.mutations,e.mutations,((r,n)=>eA(r,n)))&&o1(this.baseMutations,e.baseMutations,((r,n)=>eA(r,n)))}}class j8{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){mr(e.mutations.length===n.length);let s=(function(){return hQ})();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new j8(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Q{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ia,Mn;function MF(t){switch(t){default:return ir();case mt.CANCELLED:case mt.UNKNOWN:case mt.DEADLINE_EXCEEDED:case mt.RESOURCE_EXHAUSTED:case mt.INTERNAL:case mt.UNAVAILABLE:case mt.UNAUTHENTICATED:return!1;case mt.INVALID_ARGUMENT:case mt.NOT_FOUND:case mt.ALREADY_EXISTS:case mt.PERMISSION_DENIED:case mt.FAILED_PRECONDITION:case mt.ABORTED:case mt.OUT_OF_RANGE:case mt.UNIMPLEMENTED:case mt.DATA_LOSS:return!0}}function BF(t){if(t===void 0)return qi("GRPC error has no .code"),mt.UNKNOWN;switch(t){case ia.OK:return mt.OK;case ia.CANCELLED:return mt.CANCELLED;case ia.UNKNOWN:return mt.UNKNOWN;case ia.DEADLINE_EXCEEDED:return mt.DEADLINE_EXCEEDED;case ia.RESOURCE_EXHAUSTED:return mt.RESOURCE_EXHAUSTED;case ia.INTERNAL:return mt.INTERNAL;case ia.UNAVAILABLE:return mt.UNAVAILABLE;case ia.UNAUTHENTICATED:return mt.UNAUTHENTICATED;case ia.INVALID_ARGUMENT:return mt.INVALID_ARGUMENT;case ia.NOT_FOUND:return mt.NOT_FOUND;case ia.ALREADY_EXISTS:return mt.ALREADY_EXISTS;case ia.PERMISSION_DENIED:return mt.PERMISSION_DENIED;case ia.FAILED_PRECONDITION:return mt.FAILED_PRECONDITION;case ia.ABORTED:return mt.ABORTED;case ia.OUT_OF_RANGE:return mt.OUT_OF_RANGE;case ia.UNIMPLEMENTED:return mt.UNIMPLEMENTED;case ia.DATA_LOSS:return mt.DATA_LOSS;default:return ir()}}(Mn=ia||(ia={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qw=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bQ=new B0([4294967295,4294967295],0);function nA(t){const e=VF().encode(t),r=new Uj;return r.update(e),new Uint8Array(r.digest())}function sA(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new B0([r,n],0),new B0([s,i],0)]}class D8{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Xg(`Invalid padding: ${r}`);if(n<0)throw new Xg(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Xg(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Xg(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=B0.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(B0.fromNumber(n)));return s.compare(bQ)===1&&(s=new B0([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=nA(e),[n,s]=sA(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new D8(i,s,r);return n.forEach((o=>a.insert(o))),a}insert(e){if(this.Ie===0)return;const r=nA(e),[n,s]=sA(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Xg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,zx.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Ux(br.min(),s,new Ds(Kr),Sl(),rn())}}class zx{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new zx(n,r,rn(),rn(),rn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class UF{constructor(e,r){this.targetId=e,this.me=r}}class zF{constructor(e,r,n=gi.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class iA{constructor(){this.fe=0,this.ge=oA(),this.pe=gi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=rn(),r=rn(),n=rn();return this.ge.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:ir()}})),new zx(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=oA()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,mr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class kQ{constructor(e){this.Le=e,this.Be=new Map,this.ke=Sl(),this.qe=aA(),this.Qe=new Ds(Kr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:ir()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,s)=>{this.ze(s)&&r(s)}))}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(Kw(i))if(n===0){const a=new Jt(i.path);this.Ue(r,a,Bs.newNoDocument(a,br.min()))}else mr(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}Qw?.et((function(d,p,g,m,y){var w,_,S,T,I,M;const K={localCacheCount:d,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},W=p.unchangedNames;return W&&(K.bloomFilter={applied:y===0,hashCount:(w=W?.hashCount)!==null&&w!==void 0?w:0,bitmapLength:(T=(S=(_=W?.bits)===null||_===void 0?void 0:_.bitmap)===null||S===void 0?void 0:S.length)!==null&&T!==void 0?T:0,padding:(M=(I=W?.bits)===null||I===void 0?void 0:I.padding)!==null&&M!==void 0?M:0,mightContain:L=>{var A;return(A=m?.mightContain(L))!==null&&A!==void 0&&A}}),K})(a,e.me,this.Le.tt(),o,l))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=Xd(n).toUint8Array()}catch(l){if(l instanceof cF)return rc("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new D8(a,s,i)}catch(l){return rc(l instanceof Xg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach((i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)})),s}rt(e){const r=new Map;this.Be.forEach(((i,a)=>{const o=this.Je(a);if(o){if(i.current&&Kw(o.target)){const l=new Jt(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Bs.newNoDocument(l,e))}i.be&&(r.set(a,i.ve()),i.Ce())}}));let n=rn();this.qe.forEach(((i,a)=>{let o=!0;a.forEachWhile((l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(n=n.add(i))})),this.ke.forEach(((i,a)=>a.setReadTime(e)));const s=new Ux(e,r,this.Qe,this.ke,n);return this.ke=Sl(),this.qe=aA(),this.Qe=new Ds(Kr),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new iA,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new ks(Kr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Lt("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new iA),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function aA(){return new Ds(Jt.comparator)}function oA(){return new Ds(Jt.comparator)}const SQ={asc:"ASCENDING",desc:"DESCENDING"},EQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CQ={and:"AND",or:"OR"};class AQ{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function _6(t,e){return t.useProto3Json||Dx(e)?e:{value:e}}function p1(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $F(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function NQ(t,e){return p1(t,e.toTimestamp())}function Wi(t){return mr(!!t),br.fromTimestamp((function(r){const n=Yd(r);return new ri(n.seconds,n.nanos)})(t))}function O8(t,e){return b6(t,e).canonicalString()}function b6(t,e){const r=(function(s){return new Pn(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?r:r.child(e)}function qF(t){const e=Pn.fromString(t);return mr(eD(e)),e}function tx(t,e){return O8(t.databaseId,e.path)}function Zu(t,e){const r=qF(e);if(r.get(1)!==t.databaseId.projectId)throw new Rt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Rt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Jt(GF(r))}function HF(t,e){return O8(t.databaseId,e)}function WF(t){const e=qF(t);return e.length===4?Pn.emptyPath():GF(e)}function k6(t){return new Pn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GF(t){return mr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function lA(t,e,r){return{name:tx(t,e),fields:r.value.mapValue.fields}}function KF(t,e,r){const n=Zu(t,e.name),s=Wi(e.updateTime),i=e.createTime?Wi(e.createTime):br.min(),a=new fo({mapValue:{fields:e.fields}}),o=Bs.newFoundDocument(n,s,i,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function TQ(t,e){return"found"in e?(function(n,s){mr(!!s.found),s.found.name,s.found.updateTime;const i=Zu(n,s.found.name),a=Wi(s.found.updateTime),o=s.found.createTime?Wi(s.found.createTime):br.min(),l=new fo({mapValue:{fields:s.found.fields}});return Bs.newFoundDocument(i,a,o,l)})(t,e):"missing"in e?(function(n,s){mr(!!s.missing),mr(!!s.readTime);const i=Zu(n,s.missing),a=Wi(s.readTime);return Bs.newNoDocument(i,a)})(t,e):ir()}function IQ(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ir()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(c,d){return c.useProto3Json?(mr(d===void 0||typeof d=="string"),gi.fromBase64String(d||"")):(mr(d===void 0||d instanceof Buffer||d instanceof Uint8Array),gi.fromUint8Array(d||new Uint8Array))})(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&(function(c){const d=c.code===void 0?mt.UNKNOWN:BF(c.code);return new Rt(d,c.message||"")})(a);r=new zF(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Zu(t,n.document.name),i=Wi(n.document.updateTime),a=n.document.createTime?Wi(n.document.createTime):br.min(),o=new fo({mapValue:{fields:n.document.fields}}),l=Bs.newFoundDocument(s,i,a,o),c=n.targetIds||[],d=n.removedTargetIds||[];r=new dw(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Zu(t,n.document),i=n.readTime?Wi(n.readTime):br.min(),a=Bs.newNoDocument(s,i),o=n.removedTargetIds||[];r=new dw([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Zu(t,n.document),i=n.removedTargetIds||[];r=new dw([],i,s,null)}else{if(!("filter"in e))return ir();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new _Q(s,i),o=n.targetId;r=new UF(o,a)}}return r}function rx(t,e){let r;if(e instanceof j1)r={update:lA(t,e.key,e.value)};else if(e instanceof F1)r={delete:tx(t,e.key)};else if(e instanceof ih)r={update:lA(t,e.key,e.data),updateMask:DQ(e.fieldMask)};else{if(!(e instanceof R8))return ir();r={verify:tx(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(i,a){const o=a.transform;if(o instanceof h1)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof J0)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Z0)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof f1)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw ir()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:NQ(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ir()})(t,e.precondition)),r}function S6(t,e){const r=e.currentDocument?(function(i){return i.updateTime!==void 0?ei.updateTime(Wi(i.updateTime)):i.exists!==void 0?ei.exists(i.exists):ei.none()})(e.currentDocument):ei.none(),n=e.updateTransforms?e.updateTransforms.map((s=>(function(a,o){let l=null;if("setToServerValue"in o)mr(o.setToServerValue==="REQUEST_TIME"),l=new h1;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];l=new J0(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];l=new Z0(d)}else"increment"in o?l=new f1(a,o.increment):ir();const c=Vs.fromServerFormat(o.fieldPath);return new Vx(c,l)})(t,s))):[];if(e.update){e.update.name;const s=Zu(t,e.update.name),i=new fo({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(l){const c=l.fieldPaths||[];return new kl(c.map((d=>Vs.fromServerFormat(d))))})(e.updateMask);return new ih(s,i,a,r,n)}return new j1(s,i,r,n)}if(e.delete){const s=Zu(t,e.delete);return new F1(s,r)}if(e.verify){const s=Zu(t,e.verify);return new R8(s,r)}return ir()}function PQ(t,e){return t&&t.length>0?(mr(e!==void 0),t.map((r=>(function(s,i){let a=s.updateTime?Wi(s.updateTime):Wi(i);return a.isEqual(br.min())&&(a=Wi(i)),new yQ(a,s.transformResults||[])})(r,e)))):[]}function YF(t,e){return{documents:[HF(t,e.path)]}}function m_(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=HF(t,s);const i=(function(c){if(c.length!==0)return ZF(fs.create(c,"and"))})(e.filters);i&&(r.structuredQuery.where=i);const a=(function(c){if(c.length!==0)return c.map((d=>(function(g){return{field:Xh(g.field),direction:LQ(g.dir)}})(d)))})(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=_6(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{_t:r,parent:s}}function XF(t,e,r,n){const{_t:s,parent:i}=m_(t,e),a={},o=[];let l=0;return r.forEach((c=>{const d=n?c.alias:"aggregate_"+l++;a[d]=c.alias,c.aggregateType==="count"?o.push({alias:d,count:{}}):c.aggregateType==="avg"?o.push({alias:d,avg:{field:Xh(c.fieldPath)}}):c.aggregateType==="sum"&&o.push({alias:d,sum:{field:Xh(c.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:s.structuredQuery},parent:s.parent},ut:a,parent:i}}function QF(t){let e=WF(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){mr(n===1);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];r.where&&(i=(function(p){const g=JF(p);return g instanceof fs&&N8(g)?g.getFilters():[g]})(r.where));let a=[];r.orderBy&&(a=(function(p){return p.map((g=>(function(y){return new ex(km(y.field),(function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(y.direction))})(g)))})(r.orderBy));let o=null;r.limit&&(o=(function(p){let g;return g=typeof p=="object"?p.value:p,Dx(g)?null:g})(r.limit));let l=null;r.startAt&&(l=(function(p){const g=!!p.before,m=p.values||[];return new vf(m,g)})(r.startAt));let c=null;return r.endAt&&(c=(function(p){const g=!p.before,m=p.values||[];return new vf(m,g)})(r.endAt)),wF(e,s,a,i,o,"F",l,c)}function RQ(t,e){const r=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ir()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function JF(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=km(r.unaryFilter.field);return Rn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=km(r.unaryFilter.field);return Rn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=km(r.unaryFilter.field);return Rn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=km(r.unaryFilter.field);return Rn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ir()}})(t):t.fieldFilter!==void 0?(function(r){return Rn.create(km(r.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ir()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return fs.create(r.compositeFilter.filters.map((n=>JF(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ir()}})(r.compositeFilter.op))})(t):ir()}function LQ(t){return SQ[t]}function jQ(t){return EQ[t]}function FQ(t){return CQ[t]}function Xh(t){return{fieldPath:t.canonicalString()}}function km(t){return Vs.fromServerFormat(t.fieldPath)}function ZF(t){return t instanceof Rn?(function(r){if(r.op==="=="){if(HC(r.value))return{unaryFilter:{field:Xh(r.field),op:"IS_NAN"}};if(qC(r.value))return{unaryFilter:{field:Xh(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(HC(r.value))return{unaryFilter:{field:Xh(r.field),op:"IS_NOT_NAN"}};if(qC(r.value))return{unaryFilter:{field:Xh(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xh(r.field),op:jQ(r.op),value:r.value}}})(t):t instanceof fs?(function(r){const n=r.getFilters().map((s=>ZF(s)));return n.length===1?n[0]:{compositeFilter:{op:FQ(r.op),filters:n}}})(t):ir()}function DQ(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function eD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,r,n,s,i=br.min(),a=br.min(),o=gi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Fd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Fd(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.ct=e}}function OQ(t,e){let r;if(e.document)r=KF(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Jt.fromSegments(e.noDocument.path),s=tp(e.noDocument.readTime);r=Bs.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return ir();{const n=Jt.fromSegments(e.unknownDocument.path),s=tp(e.unknownDocument.version);r=Bs.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime((function(s){const i=new ri(s[0],s[1]);return br.fromTimestamp(i)})(e.readTime)),r}function cA(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Jw(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(i,a){return{name:tx(i,a.key),fields:a.data.value.mapValue.fields,updateTime:p1(i,a.version.toTimestamp()),createTime:p1(i,a.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:ep(e.version)};else{if(!e.isUnknownDocument())return ir();n.unknownDocument={path:r.path.toArray(),version:ep(e.version)}}return n}function Jw(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ep(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function tp(t){const e=new ri(t.seconds,t.nanoseconds);return br.fromTimestamp(e)}function k0(t,e){const r=(e.baseMutations||[]).map((i=>S6(t.ct,i)));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const o=e.mutations[i+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map((i=>S6(t.ct,i))),s=ri.fromMillis(e.localWriteTimeMs);return new L8(e.batchId,s,r,n)}function Qg(t){const e=tp(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?tp(t.lastLimboFreeSnapshotVersion):br.min();let n;return n=(function(i){return i.documents!==void 0})(t.query)?(function(i){return mr(i.documents.length===1),qo(L1(WF(i.documents[0])))})(t.query):(function(i){return qo(QF(i))})(t.query),new Fd(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,gi.fromBase64String(t.resumeToken))}function rD(t,e){const r=ep(e.snapshotVersion),n=ep(e.lastLimboFreeSnapshotVersion);let s;s=Kw(e.target)?YF(t.ct,e.target):m_(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Q0(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function M8(t){const e=QF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xw(e,e.limit,"L"):e}function m3(t,e){return new F8(e.largestBatchId,S6(t.ct,e.overlayMutation))}function uA(t,e){const r=e.path.lastSegment();return[t,$o(e.path.popLast()),r]}function dA(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:ep(n.readTime),documentKey:$o(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MQ{getBundleMetadata(e,r){return hA(e).get(r).next((n=>{if(n)return(function(i){return{id:i.bundleId,createTime:tp(i.createTime),version:i.version}})(n)}))}saveBundleMetadata(e,r){return hA(e).put((function(s){return{bundleId:s.id,createTime:ep(Wi(s.createTime)),version:s.version}})(r))}getNamedQuery(e,r){return fA(e).get(r).next((n=>{if(n)return(function(i){return{name:i.name,query:M8(i.bundledQuery),readTime:tp(i.readTime)}})(n)}))}saveNamedQuery(e,r){return fA(e).put((function(s){return{name:s.name,readTime:ep(Wi(s.readTime)),bundledQuery:s.bundledQuery}})(r))}}function hA(t){return Ca(t,"bundles")}function fA(t){return Ca(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new g_(e,n)}getOverlay(e,r){return Lg(e).get(uA(this.userId,r)).next((n=>n?m3(this.serializer,n):null))}getOverlays(e,r){const n=Wu();return rt.forEach(r,(s=>this.getOverlay(e,s).next((i=>{i!==null&&n.set(s,i)})))).next((()=>n))}saveOverlays(e,r,n){const s=[];return n.forEach(((i,a)=>{const o=new F8(r,a);s.push(this.ht(e,o))})),rt.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach((a=>s.add($o(a.getCollectionPath()))));const i=[];return s.forEach((a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);i.push(Lg(e).j("collectionPathOverlayIndex",o))})),rt.waitFor(i)}getOverlaysForCollection(e,r,n){const s=Wu(),i=$o(r),a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Lg(e).U("collectionPathOverlayIndex",a).next((o=>{for(const l of o){const c=m3(this.serializer,l);s.set(c.getKey(),c)}return s}))}getOverlaysForCollectionGroup(e,r,n,s){const i=Wu();let a;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Lg(e).J({index:"collectionGroupOverlayIndex",range:o},((l,c,d)=>{const p=m3(this.serializer,c);i.size()<s||p.largestBatchId===a?(i.set(p.getKey(),p),a=p.largestBatchId):d.done()})).next((()=>i))}ht(e,r){return Lg(e).put((function(s,i,a){const[o,l,c]=uA(i,a.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:rx(s.ct,a.mutation)}})(this.serializer,this.userId,r))}}function Lg(t){return Ca(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BQ{Pt(e){return Ca(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r?.value;return n?gi.fromUint8Array(n):gi.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Zs(e.integerValue));else if("doubleValue"in e){const n=Zs(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),X2(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=Yd(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Xd(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?uF(e)?this.dt(r,Number.MAX_SAFE_INTEGER):h_(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):ir()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const i=e.fields||{};this.dt(r,53);const a="value",o=((s=(n=i[a].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(Zs(o)),this.Vt(a,r),this.Tt(i[a],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),Jt.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}S0.vt=new S0;function VQ(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function pA(t){const e=64-(function(n){let s=0;for(let i=0;i<8;++i){const a=VQ(255&n[i]);if(s+=a,a!==8)break}return s})(t);return Math.ceil(e/8)}class UQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=pA(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=pA(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class zQ{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class $Q{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class jg{constructor(){this.jt=new UQ,this.Ht=new zQ(this.jt),this.Jt=new $Q(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new E0(this.indexId,this.documentKey,this.arrayValue,n)}}function Vh(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=mA(t.arrayValue,e.arrayValue),r!==0?r:(r=mA(t.directionalValue,e.directionalValue),r!==0?r:Jt.comparator(t.documentKey,e.documentKey)))}function mA(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.Xt=new ks(((r,n)=>Vs.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(mr(e.collectionGroup===this.collectionId),this.nn)return!1;const r=f6(e);if(r!==void 0&&!this.sn(r))return!1;const n=x0(e);let s=new Set,i=0,a=0;for(;i<n.length&&this.sn(n[i]);++i)s=s.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const l=n[i];if(!this.on(o,l)||!this._n(this.en[a++],l))return!1}++i}for(;i<n.length;++i){const o=n[i];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new ks(Vs.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new V0(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new V0(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new V0(n.field,n.dir==="asc"?0:1)));return new l1(l1.UNKNOWN_ID,this.collectionId,r,c1.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){var e,r;if(mr(t instanceof Rn||t instanceof fs),t instanceof Rn){if(t instanceof vF){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((i=>Rn.create(t.field,"==",i))))||[];return fs.create(s,"or")}return t}const n=t.filters.map((s=>nD(s)));return fs.create(n,t.op)}function qQ(t){if(t.getFilters().length===0)return[];const e=A6(nD(t));return mr(sD(e)),E6(e)||C6(e)?[e]:e.getFilters()}function E6(t){return t instanceof Rn}function C6(t){return t instanceof fs&&N8(t)}function sD(t){return E6(t)||C6(t)||(function(r){if(r instanceof fs&&x6(r)){for(const n of r.getFilters())if(!E6(n)&&!C6(n))return!1;return!0}return!1})(t)}function A6(t){if(mr(t instanceof Rn||t instanceof fs),t instanceof Rn)return t;if(t.filters.length===1)return A6(t.filters[0]);const e=t.filters.map((n=>A6(n)));let r=fs.create(e,t.op);return r=Zw(r),sD(r)?r:(mr(r instanceof fs),mr(d1(r)),mr(r.filters.length>1),r.filters.reduce(((n,s)=>B8(n,s))))}function B8(t,e){let r;return mr(t instanceof Rn||t instanceof fs),mr(e instanceof Rn||e instanceof fs),r=t instanceof Rn?e instanceof Rn?(function(s,i){return fs.create([s,i],"and")})(t,e):xA(t,e):e instanceof Rn?xA(e,t):(function(s,i){if(mr(s.filters.length>0&&i.filters.length>0),d1(s)&&d1(i))return gF(s,i.getFilters());const a=x6(s)?s:i,o=x6(s)?i:s,l=a.filters.map((c=>B8(c,o)));return fs.create(l,"or")})(t,e),Zw(r)}function xA(t,e){if(d1(e))return gF(e,t.getFilters());{const r=e.filters.map((n=>B8(t,n)));return fs.create(r,"or")}}function Zw(t){if(mr(t instanceof Rn||t instanceof fs),t instanceof Rn)return t;const e=t.getFilters();if(e.length===1)return Zw(e[0]);if(pF(t))return t;const r=e.map((s=>Zw(s))),n=[];return r.forEach((s=>{s instanceof Rn?n.push(s):s instanceof fs&&(s.op===t.op?n.push(...s.filters):n.push(s))})),n.length===1?n[0]:fs.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HQ{constructor(){this.un=new V8}addToCollectionParentIndex(e,r){return this.un.add(r),rt.resolve()}getCollectionParents(e,r){return rt.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return rt.resolve()}deleteFieldIndex(e,r){return rt.resolve()}deleteAllFieldIndexes(e){return rt.resolve()}createTargetIndexes(e,r){return rt.resolve()}getDocumentsMatchingTarget(e,r){return rt.resolve(null)}getIndexType(e,r){return rt.resolve(0)}getFieldIndexes(e,r){return rt.resolve([])}getNextCollectionGroupToUpdate(e){return rt.resolve(null)}getMinOffset(e,r){return rt.resolve(nc.min())}getMinOffsetFromCollectionGroup(e,r){return rt.resolve(nc.min())}updateCollectionGroup(e,r,n){return rt.resolve()}updateIndexEntries(e,r){return rt.resolve()}}class V8{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new ks(Pn.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new ks(Pn.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=new Uint8Array(0);class WQ{constructor(e,r){this.databaseId=r,this.cn=new V8,this.ln=new sh((n=>Q0(n)),((n,s)=>Ox(n,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const i={collectionId:n,parent:$o(s)};return yA(e).put(i)}return rt.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[Xj(r),""],!1,!0);return yA(e).U(s).next((i=>{for(const a of i){if(a.collectionId!==r)break;n.push(Hu(a.parent))}return n}))}addFieldIndex(e,r){const n=Fg(e),s=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(r);delete s.indexId;const i=n.add(s);if(r.indexState){const a=lm(e);return i.next((o=>{a.put(dA(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return i.next()}deleteFieldIndex(e,r){const n=Fg(e),s=lm(e),i=om(e);return n.delete(r.indexId).next((()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=Fg(e),n=om(e),s=lm(e);return r.j().next((()=>n.j())).next((()=>s.j()))}createTargetIndexes(e,r){return rt.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((s=>{if(s===0||s===1){const i=new gA(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,r){const n=om(e);let s=!0;const i=new Map;return rt.forEach(this.hn(r),(a=>this.Pn(e,a).next((o=>{s&&(s=!!o),i.set(a,o)})))).next((()=>{if(s){let a=rn();const o=[];return rt.forEach(i,((l,c)=>{Lt("IndexedDbIndexManager",`Using index ${(function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map((M=>`${M.fieldPath}:${M.kind}`)).join(",")}`})(l)} to execute ${Q0(r)}`);const d=(function(I,M){const K=f6(M);if(K===void 0)return null;for(const W of Yw(I,K.fieldPath))switch(W.op){case"array-contains-any":return W.value.arrayValue.values||[];case"array-contains":return[W.value]}return null})(c,l),p=(function(I,M){const K=new Map;for(const W of x0(M))for(const L of Yw(I,W.fieldPath))switch(L.op){case"==":case"in":K.set(W.fieldPath.canonicalString(),L.value);break;case"not-in":case"!=":return K.set(W.fieldPath.canonicalString(),L.value),Array.from(K.values())}return null})(c,l),g=(function(I,M){const K=[];let W=!0;for(const L of x0(M)){const A=L.kind===0?XC(I,L.fieldPath,I.startAt):QC(I,L.fieldPath,I.startAt);K.push(A.value),W&&(W=A.inclusive)}return new vf(K,W)})(c,l),m=(function(I,M){const K=[];let W=!0;for(const L of x0(M)){const A=L.kind===0?QC(I,L.fieldPath,I.endAt):XC(I,L.fieldPath,I.endAt);K.push(A.value),W&&(W=A.inclusive)}return new vf(K,W)})(c,l),y=this.In(l,c,g),w=this.In(l,c,m),_=this.Tn(l,c,p),S=this.En(l.indexId,d,y,g.inclusive,w,m.inclusive,_);return rt.forEach(S,(T=>n.G(T,r.limit).next((I=>{I.forEach((M=>{const K=Jt.fromSegments(M.documentKey);a.has(K)||(a=a.add(K),o.push(K))}))}))))})).next((()=>o))}return rt.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=qQ(fs.create(e.filters,"and")).map((n=>v6(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,s,i,a,o){const l=(r!=null?r.length:1)*Math.max(n.length,i.length),c=l/(r!=null?r.length:1),d=[];for(let p=0;p<l;++p){const g=r?this.dn(r[p/c]):uv,m=this.An(e,g,n[p%c],s),y=this.Rn(e,g,i[p%c],a),w=o.map((_=>this.An(e,g,_,!0)));d.push(...this.createRange(m,y,w))}return d}An(e,r,n,s){const i=new E0(e,Jt.empty(),r,n);return s?i:i.Zt()}Rn(e,r,n,s){const i=new E0(e,Jt.empty(),r,n);return s?i.Zt():i}Pn(e,r){const n=new gA(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next((i=>{let a=null;for(const o of i)n.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a}))}getIndexType(e,r){let n=2;const s=this.hn(r);return rt.forEach(s,(i=>this.Pn(e,i).next((a=>{a?n!==0&&a.fields.length<(function(l){let c=new ks(Vs.comparator),d=!1;for(const p of l.filters)for(const g of p.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:c=c.add(g.field));for(const p of l.orderBy)p.field.isKeyField()||(c=c.add(p.field));return c.size+(d?1:0)})(i)&&(n=1):n=0})))).next((()=>(function(a){return a.limit!==null})(r)&&s.length>1&&n===2?1:n))}Vn(e,r){const n=new jg;for(const s of x0(e)){const i=r.data.field(s.fieldPath);if(i==null)return null;const a=n.Yt(s.kind);S0.vt.It(i,a)}return n.zt()}dn(e){const r=new jg;return S0.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new jg;return S0.vt.It(X0(this.databaseId,r),n.Yt((function(i){const a=x0(i);return a.length===0?0:a[a.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new jg);let i=0;for(const a of x0(e)){const o=n[i++];for(const l of s)if(this.fn(r,a.fieldPath)&&Z2(o))s=this.gn(s,a,o);else{const c=l.Yt(a.kind);S0.vt.It(o,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],i=[];for(const a of n.arrayValue.values||[])for(const o of s){const l=new jg;l.seed(o.zt()),S0.vt.It(a,l.Yt(r.kind)),i.push(l)}return i}fn(e,r){return!!e.filters.find((n=>n instanceof Rn&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=Fg(e),s=lm(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((i=>{const a=[];return rt.forEach(i,(o=>s.get([o.indexId,this.uid]).next((l=>{a.push((function(d,p){const g=p?new c1(p.sequenceNumber,new nc(tp(p.readTime),new Jt(Hu(p.documentKey)),p.largestBatchId)):c1.empty(),m=d.fields.map((([y,w])=>new V0(Vs.fromServerFormat(y),w)));return new l1(d.indexId,d.collectionGroup,m,g)})(o,l))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,s)=>{const i=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Kr(n.collectionGroup,s.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const s=Fg(e),i=lm(e);return this.yn(e).next((a=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((o=>rt.forEach(o,(l=>i.put(dA(l.indexId,this.uid,a,n))))))))}updateIndexEntries(e,r){const n=new Map;return rt.forEach(r,((s,i)=>{const a=n.get(s.collectionGroup);return(a?rt.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next((o=>(n.set(s.collectionGroup,o),rt.forEach(o,(l=>this.wn(e,s,l).next((c=>{const d=this.Sn(i,l);return c.isEqual(d)?rt.resolve():this.bn(e,i,l,c,d)})))))))}))}Dn(e,r,n,s){return om(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return om(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=om(e);let i=new ks(Vh);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((a,o)=>{i=i.add(new E0(n.indexId,r,o.arrayValue,o.directionalValue))})).next((()=>i))}Sn(e,r){let n=new ks(Vh);const s=this.Vn(r,e);if(s==null)return n;const i=f6(r);if(i!=null){const a=e.data.field(i.fieldPath);if(Z2(a))for(const o of a.arrayValue.values||[])n=n.add(new E0(r.indexId,e.key,this.dn(o),s))}else n=n.add(new E0(r.indexId,e.key,uv,s));return n}bn(e,r,n,s,i){Lt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const a=[];return(function(l,c,d,p,g){const m=l.getIterator(),y=c.getIterator();let w=am(m),_=am(y);for(;w||_;){let S=!1,T=!1;if(w&&_){const I=d(w,_);I<0?T=!0:I>0&&(S=!0)}else w!=null?T=!0:S=!0;S?(p(_),_=am(y)):T?(g(w),w=am(m)):(w=am(m),_=am(y))}})(s,i,Vh,(o=>{a.push(this.Dn(e,r,n,o))}),(o=>{a.push(this.vn(e,r,n,o))})),rt.waitFor(a)}yn(e){let r=1;return lm(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,s,i)=>{i.done(),r=s.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((a,o)=>Vh(a,o))).filter(((a,o,l)=>!o||Vh(a,l[o-1])!==0));const s=[];s.push(e);for(const a of n){const o=Vh(a,e),l=Vh(a,r);if(o===0)s[0]=e.Zt();else if(o>0&&l<0)s.push(a),s.push(a.Zt());else if(l>0)break}s.push(r);const i=[];for(let a=0;a<s.length;a+=2){if(this.Cn(s[a],s[a+1]))return[];const o=[s[a].indexId,this.uid,s[a].arrayValue,s[a].directionalValue,uv,[]],l=[s[a+1].indexId,this.uid,s[a+1].arrayValue,s[a+1].directionalValue,uv,[]];i.push(IDBKeyRange.bound(o,l))}return i}Cn(e,r){return Vh(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(vA)}getMinOffset(e,r){return rt.mapArray(this.hn(r),(n=>this.Pn(e,n).next((s=>s||ir())))).next(vA)}}function yA(t){return Ca(t,"collectionParents")}function om(t){return Ca(t,"indexEntries")}function Fg(t){return Ca(t,"indexConfiguration")}function lm(t){return Ca(t,"indexState")}function vA(t){mr(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;E8(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new nc(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Do{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Do(e,Do.DEFAULT_COLLECTION_PERCENTILE,Do.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),i=[],a=IDBKeyRange.only(r.batchId);let o=0;const l=n.J({range:a},((d,p,g)=>(o++,g.delete())));i.push(l.next((()=>{mr(o===1)})));const c=[];for(const d of r.mutations){const p=nF(e,d.key.path,r.batchId);i.push(s.delete(p)),c.push(d.key)}return rt.waitFor(i).next((()=>c))}function e5(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ir();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Do.DEFAULT_COLLECTION_PERCENTILE=10,Do.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Do.DEFAULT=new Do(41943040,Do.DEFAULT_COLLECTION_PERCENTILE,Do.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Do.DISABLED=new Do(-1,0,0);class x_{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){mr(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new x_(i,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uh(e).J({index:"userMutationsIndex",range:n},((s,i,a)=>{r=!1,a.done()})).next((()=>r))}addMutationBatch(e,r,n,s){const i=Sm(e),a=Uh(e);return a.add({}).next((o=>{mr(typeof o=="number");const l=new L8(o,r,n,s),c=(function(m,y,w){const _=w.baseMutations.map((T=>rx(m.ct,T))),S=w.mutations.map((T=>rx(m.ct,T)));return{userId:y,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:_,mutations:S}})(this.serializer,this.userId,l),d=[];let p=new ks(((g,m)=>Kr(g.canonicalString(),m.canonicalString())));for(const g of s){const m=nF(this.userId,g.key.path,o);p=p.add(g.key.path.popLast()),d.push(a.put(c)),d.push(i.put(m,LX))}return p.forEach((g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Fn[o]=l.keys()})),rt.waitFor(d).next((()=>l))}))}lookupMutationBatch(e,r){return Uh(e).get(r).next((n=>n?(mr(n.userId===this.userId),k0(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?rt.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Uh(e).J({index:"userMutationsIndex",range:s},((a,o,l)=>{o.userId===this.userId&&(mr(o.batchId>=n),i=k0(this.serializer,o)),l.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Uh(e).J({index:"userMutationsIndex",range:r,reverse:!0},((s,i,a)=>{n=i.batchId,a.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uh(e).U("userMutationsIndex",r).next((n=>n.map((s=>k0(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=aw(this.userId,r.path),s=IDBKeyRange.lowerBound(n),i=[];return Sm(e).J({range:s},((a,o,l)=>{const[c,d,p]=a,g=Hu(d);if(c===this.userId&&r.path.isEqual(g))return Uh(e).get(p).next((m=>{if(!m)throw ir();mr(m.userId===this.userId),i.push(k0(this.serializer,m))}));l.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new ks(Kr);const s=[];return r.forEach((i=>{const a=aw(this.userId,i.path),o=IDBKeyRange.lowerBound(a),l=Sm(e).J({range:o},((c,d,p)=>{const[g,m,y]=c,w=Hu(m);g===this.userId&&i.path.isEqual(w)?n=n.add(y):p.done()}));s.push(l)})),rt.waitFor(s).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,i=aw(this.userId,n),a=IDBKeyRange.lowerBound(i);let o=new ks(Kr);return Sm(e).J({range:a},((l,c,d)=>{const[p,g,m]=l,y=Hu(g);p===this.userId&&n.isPrefixOf(y)?y.length===s&&(o=o.add(m)):d.done()})).next((()=>this.xn(e,o)))}xn(e,r){const n=[],s=[];return r.forEach((i=>{s.push(Uh(e).get(i).next((a=>{if(a===null)throw ir();mr(a.userId===this.userId),n.push(k0(this.serializer,a))})))})),rt.waitFor(s).next((()=>n))}removeMutationBatch(e,r){return iD(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),rt.forEach(n,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return rt.resolve();const n=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),s=[];return Sm(e).J({range:n},((i,a,o)=>{if(i[0]===this.userId){const l=Hu(i[1]);s.push(l)}else o.done()})).next((()=>{mr(s.length===0)}))}))}containsKey(e,r){return aD(e,this.userId,r)}Nn(e){return oD(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function aD(t,e,r){const n=aw(e,r.path),s=n[1],i=IDBKeyRange.lowerBound(n);let a=!1;return Sm(t).J({range:i,H:!0},((o,l,c)=>{const[d,p,g]=o;d===e&&p===s&&(a=!0),c.done()})).next((()=>a))}function Uh(t){return Ca(t,"mutations")}function Sm(t){return Ca(t,"documentMutations")}function oD(t){return Ca(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new rp(0)}static kn(){return new rp(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GQ{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new rp(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>br.fromTimestamp(new ri(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>cm(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(mr(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let s=0;const i=[];return cm(e).J(((a,o)=>{const l=Qg(o);l.sequenceNumber<=r&&n.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))})).next((()=>rt.waitFor(i))).next((()=>s))}forEachTarget(e,r){return cm(e).J(((n,s)=>{const i=Qg(s);r(i)}))}qn(e){return _A(e).get("targetGlobalKey").next((r=>(mr(r!==null),r)))}Qn(e,r){return _A(e).put("targetGlobalKey",r)}Kn(e,r){return cm(e).put(rD(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=Q0(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return cm(e).J({range:s,index:"queryTargetsIndex"},((a,o,l)=>{const c=Qg(o);Ox(r,c.target)&&(i=c,l.done())})).next((()=>i))}addMatchingKeys(e,r,n){const s=[],i=Qh(e);return r.forEach((a=>{const o=$o(a.path);s.push(i.put({targetId:n,path:o})),s.push(this.referenceDelegate.addReference(e,n,a))})),rt.waitFor(s)}removeMatchingKeys(e,r,n){const s=Qh(e);return rt.forEach(r,(i=>{const a=$o(i.path);return rt.waitFor([s.delete([n,a]),this.referenceDelegate.removeReference(e,n,i)])}))}removeMatchingKeysForTargetId(e,r){const n=Qh(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=Qh(e);let i=rn();return s.J({range:n,H:!0},((a,o,l)=>{const c=Hu(a[1]),d=new Jt(c);i=i.add(d)})).next((()=>i))}containsKey(e,r){const n=$o(r.path),s=IDBKeyRange.bound([n],[Xj(n)],!1,!0);let i=0;return Qh(e).J({index:"documentTargetsIndex",H:!0,range:s},(([a,o],l,c)=>{a!==0&&(i++,c.done())})).next((()=>i>0))}ot(e,r){return cm(e).get(r).next((n=>n?Qg(n):null))}}function cm(t){return Ca(t,"targets")}function _A(t){return Ca(t,"targetGlobal")}function Qh(t){return Ca(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA([t,e],[r,n]){const s=Kr(t,r);return s===0?Kr(e,n):s}class KQ{constructor(e){this.Un=e,this.buffer=new ks(bA),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();bA(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class lD{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Lt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Ff(r)?Lt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await jf(r)}await this.Hn(3e5)}))}}class YQ{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return rt.resolve(bl.oe);const n=new KQ(r);return this.Jn.forEachTarget(e,(s=>n.zn(s.sequenceNumber))).next((()=>this.Jn.Zn(e,(s=>n.zn(s))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Lt("LruGarbageCollector","Garbage collection skipped; disabled"),rt.resolve(wA)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Lt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wA):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,i,a,o,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Lt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(e,s)))).next((p=>(n=p,o=Date.now(),this.removeTargets(e,n,r)))).next((p=>(i=p,l=Date.now(),this.removeOrphanedDocuments(e,n)))).next((p=>(c=Date.now(),_m()<=Tn.DEBUG&&Lt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${i} targets in `+(l-o)+`ms
	Removed ${p} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),rt.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p}))))}}function cD(t,e){return new YQ(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XQ{constructor(e,r){this.db=e,this.garbageCollector=cD(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((s=>n+s))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,s)=>r(s)))}addReference(e,r,n){return dv(e,n)}removeReference(e,r,n){return dv(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return dv(e,r)}nr(e,r){return(function(s,i){let a=!1;return oD(s).Y((o=>aD(s,o,i).next((l=>(l&&(a=!0),rt.resolve(!l)))))).next((()=>a))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,((a,o)=>{if(o<=r){const l=this.nr(e,a).next((c=>{if(!c)return i++,n.getEntry(e,a).next((()=>(n.removeEntry(a,br.min()),Qh(e).delete((function(p){return[0,$o(p.path)]})(a)))))}));s.push(l)}})).next((()=>rt.waitFor(s))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return dv(e,r)}tr(e,r){const n=Qh(e);let s,i=bl.oe;return n.J({index:"documentTargetsIndex"},(([a,o],{path:l,sequenceNumber:c})=>{a===0?(i!==bl.oe&&r(new Jt(Hu(s)),i),i=c,s=l):i=bl.oe})).next((()=>{i!==bl.oe&&r(new Jt(Hu(s)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function dv(t,e){return Qh(t).put((function(n,s){return{targetId:0,path:$o(n.path),sequenceNumber:s}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(){this.changes=new sh((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Bs.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?rt.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QQ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return f0(e).put(n)}removeEntry(e,r,n){return f0(e).delete((function(i,a){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Jw(a),o[o.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=Bs.newInvalidDocument(r);return f0(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Dg(r))},((s,i)=>{n=this.ir(r,i)})).next((()=>n))}sr(e,r){let n={size:0,document:Bs.newInvalidDocument(r)};return f0(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Dg(r))},((s,i)=>{n={document:this.ir(r,i),size:e5(i)}})).next((()=>n))}getEntries(e,r){let n=Sl();return this._r(e,r,((s,i)=>{const a=this.ir(s,i);n=n.insert(s,a)})).next((()=>n))}ar(e,r){let n=Sl(),s=new Ds(Jt.comparator);return this._r(e,r,((i,a)=>{const o=this.ir(i,a);n=n.insert(i,o),s=s.insert(i,e5(a))})).next((()=>({documents:n,ur:s})))}_r(e,r,n){if(r.isEmpty())return rt.resolve();let s=new ks(EA);r.forEach((l=>s=s.add(l)));const i=IDBKeyRange.bound(Dg(s.first()),Dg(s.last())),a=s.getIterator();let o=a.getNext();return f0(e).J({index:"documentKeyIndex",range:i},((l,c,d)=>{const p=Jt.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&EA(o,p)<0;)n(o,null),o=a.getNext();o&&o.isEqual(p)&&(n(o,c),o=a.hasNext()?a.getNext():null),o?d.$(Dg(o)):d.done()})).next((()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,r,n,s,i){const a=r.path,o=[a.popLast().toArray(),a.lastSegment(),Jw(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return f0(e).U(IDBKeyRange.bound(o,l,!0)).next((c=>{i?.incrementDocumentReadCount(c.length);let d=Sl();for(const p of c){const g=this.ir(Jt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(Bx(r,g)||s.has(g.key))&&(d=d.insert(g.key,g))}return d}))}getAllFromCollectionGroup(e,r,n,s){let i=Sl();const a=SA(r,n),o=SA(r,nc.max());return f0(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},((l,c,d)=>{const p=this.ir(Jt.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(p.key,p),i.size===s&&d.done()})).next((()=>i))}newChangeBuffer(e){return new JQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return kA(e).get("remoteDocumentGlobalKey").next((r=>(mr(!!r),r)))}rr(e,r){return kA(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=OQ(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(br.min())))return n}return Bs.newInvalidDocument(e)}}function dD(t){return new QQ(t)}class JQ extends uD{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new sh((n=>n.toString()),((n,s)=>n.isEqual(s)))}applyChanges(e){const r=[];let n=0,s=new ks(((i,a)=>Kr(i.canonicalString(),a.canonicalString())));return this.changes.forEach(((i,a)=>{const o=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,o.readTime)),a.isValidDocument()){const l=cA(this.cr.serializer,a);s=s.add(i.path.popLast());const c=e5(l);n+=c-o.size,r.push(this.cr.addEntry(e,i,l))}else if(n-=o.size,this.trackRemovals){const l=cA(this.cr.serializer,a.convertToNoDocument(br.min()));r.push(this.cr.addEntry(e,i,l))}})),s.forEach((i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))})),r.push(this.cr.updateMetadata(e,n)),rt.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:s})=>(s.forEach(((i,a)=>{this.lr.set(i,{size:a,readTime:n.get(i).readTime})})),n)))}}function kA(t){return Ca(t,"remoteDocumentGlobal")}function f0(t){return Ca(t,"remoteDocumentsV14")}function Dg(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function SA(t,e){const r=e.documentKey.path.toArray();return[t,Jw(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function EA(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(s=Kr(r[i],n[i]),s)return s;return s=Kr(r.length,n.length),s||(s=Kr(r[r.length-2],n[n.length-2]),s||Kr(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQ{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,r)))).next((s=>(n!==null&&y2(n.mutation,s,kl.empty(),ri.now()),s)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,rn()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=rn()){const s=Wu();return this.populateOverlays(e,s,r).next((()=>this.computeViews(e,r,s,n).next((i=>{let a=Yg();return i.forEach(((o,l)=>{a=a.insert(o,l.overlayedDocument)})),a}))))}getOverlayedDocuments(e,r){const n=Wu();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,rn())))}populateOverlays(e,r,n){const s=[];return n.forEach((i=>{r.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((a,o)=>{r.set(a,o)}))}))}computeViews(e,r,n,s){let i=Sl();const a=x2(),o=(function(){return x2()})();return r.forEach(((l,c)=>{const d=n.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof ih)?i=i.insert(c.key,c):d!==void 0?(a.set(c.key,d.mutation.getFieldMask()),y2(d.mutation,c,d.mutation.getFieldMask(),ri.now())):a.set(c.key,kl.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((c,d)=>a.set(c,d))),r.forEach(((c,d)=>{var p;return o.set(c,new ZQ(d,(p=a.get(c))!==null&&p!==void 0?p:null))})),o)))}recalculateAndSaveOverlays(e,r){const n=x2();let s=new Ds(((a,o)=>a-o)),i=rn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((a=>{for(const o of a)o.keys().forEach((l=>{const c=r.get(l);if(c===null)return;let d=n.get(l)||kl.empty();d=o.applyToLocalView(c,d),n.set(l,d);const p=(s.get(o.batchId)||rn()).add(l);s=s.insert(o.batchId,p)}))})).next((()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,d=l.value,p=NF();d.forEach((g=>{if(!i.has(g)){const m=FF(r.get(g),n.get(g));m!==null&&p.set(g,m),i=i.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(e,c,p))}return rt.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,s){return(function(a){return Jt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):T8(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):rt.resolve(Wu());let o=-1,l=i;return a.next((c=>rt.forEach(c,((d,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),i.get(d)?rt.resolve():this.remoteDocumentCache.getEntry(e,d).next((g=>{l=l.insert(d,g)}))))).next((()=>this.populateOverlays(e,c,i))).next((()=>this.computeViews(e,l,c,rn()))).next((d=>({batchId:o,changes:AF(d)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Jt(r)).next((n=>{let s=Yg();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=Yg();return this.indexManager.getCollectionParents(e,i).next((o=>rt.forEach(o,(l=>{const c=(function(p,g){return new nh(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next((d=>{d.forEach(((p,g)=>{a=a.insert(p,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s)))).next((a=>{i.forEach(((l,c)=>{const d=c.getKey();a.get(d)===null&&(a=a.insert(d,Bs.newInvalidDocument(d)))}));let o=Yg();return a.forEach(((l,c)=>{const d=i.get(l);d!==void 0&&y2(d.mutation,c,kl.empty(),ri.now()),Bx(r,c)&&(o=o.insert(l,c))})),o}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eJ{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return rt.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(s){return{id:s.id,version:s.version,createTime:Wi(s.createTime)}})(r)),rt.resolve()}getNamedQuery(e,r){return rt.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(s){return{name:s.name,query:M8(s.bundledQuery),readTime:Wi(s.readTime)}})(r)),rt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tJ{constructor(){this.overlays=new Ds(Jt.comparator),this.Ir=new Map}getOverlay(e,r){return rt.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Wu();return rt.forEach(r,(s=>this.getOverlay(e,s).next((i=>{i!==null&&n.set(s,i)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((s,i)=>{this.ht(e,r,i)})),rt.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.Ir.delete(n)),rt.resolve()}getOverlaysForCollection(e,r,n){const s=Wu(),i=r.length+1,a=new Jt(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>n&&s.set(l.getKey(),l)}return rt.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Ds(((c,d)=>c-d));const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let d=i.get(c.largestBatchId);d===null&&(d=Wu(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=Wu(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,d)=>o.set(c,d))),!(o.size()>=s)););return rt.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new F8(r,n));let i=this.Ir.get(r);i===void 0&&(i=rn(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rJ{constructor(){this.sessionToken=gi.EMPTY_BYTE_STRING}getSessionToken(e){return rt.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,rt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(){this.Tr=new ks(Ba.Er),this.dr=new ks(Ba.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Ba(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new Ba(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new Jt(new Pn([])),n=new Ba(r,e),s=new Ba(r,e+1),i=[];return this.dr.forEachInRange([n,s],(a=>{this.Vr(a),i.push(a.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Jt(new Pn([])),n=new Ba(r,e),s=new Ba(r,e+1);let i=rn();return this.dr.forEachInRange([n,s],(a=>{i=i.add(a.key)})),i}containsKey(e){const r=new Ba(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Ba{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Jt.comparator(e.key,r.key)||Kr(e.wr,r.wr)}static Ar(e,r){return Kr(e.wr,r.wr)||Jt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nJ{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new ks(Ba.Er)}checkEmpty(e){return rt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new L8(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new Ba(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return rt.resolve(a)}lookupMutationBatch(e,r){return rt.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return rt.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Ba(r,0),s=new Ba(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],(a=>{const o=this.Dr(a.wr);i.push(o)})),rt.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new ks(Kr);return r.forEach((s=>{const i=new Ba(s,0),a=new Ba(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],(o=>{n=n.add(o.wr)}))})),rt.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;Jt.isDocumentKey(i)||(i=i.child(""));const a=new Ba(new Jt(i),0);let o=new ks(Kr);return this.br.forEachWhile((l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.wr)),!0)}),a),rt.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach((n=>{const s=this.Dr(n);s!==null&&r.push(s)})),r}removeMutationBatch(e,r){mr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return rt.forEach(r.mutations,(s=>{const i=new Ba(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new Ba(r,0),s=this.br.firstAfterOrEqual(n);return rt.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,rt.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sJ{constructor(e){this.Mr=e,this.docs=(function(){return new Ds(Jt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return rt.resolve(n?n.document.mutableCopy():Bs.newInvalidDocument(r))}getEntries(e,r){let n=Sl();return r.forEach((s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Bs.newInvalidDocument(s))})),rt.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Sl();const a=r.path,o=new Jt(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||E8(Jj(d),n)<=0||(s.has(d.key)||Bx(r,d))&&(i=i.insert(d.key,d.mutableCopy()))}return rt.resolve(i)}getAllFromCollectionGroup(e,r,n,s){ir()}Or(e,r){return rt.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new iJ(this)}getSize(e){return rt.resolve(this.size)}}class iJ extends uD{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)})),rt.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aJ{constructor(e){this.persistence=e,this.Nr=new sh((r=>Q0(r)),Ox),this.lastRemoteSnapshotVersion=br.min(),this.highestTargetId=0,this.Lr=0,this.Br=new U8,this.targetCount=0,this.kr=rp.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,s)=>r(s))),rt.resolve()}getLastRemoteSnapshotVersion(e){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return rt.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),rt.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new rp(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,rt.resolve()}updateTargetData(e,r){return this.Kn(r),rt.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,rt.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach(((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)})),rt.waitFor(i).next((()=>s))}getTargetCount(e){return rt.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return rt.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),rt.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach((a=>{i.push(s.markPotentiallyOrphaned(e,a))})),rt.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),rt.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return rt.resolve(n)}containsKey(e,r){return rt.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e,r){this.qr={},this.overlays={},this.Qr=new bl(0),this.Kr=!1,this.Kr=!0,this.$r=new rJ,this.referenceDelegate=e(this),this.Ur=new aJ(this),this.indexManager=new HQ,this.remoteDocumentCache=(function(s){return new sJ(s)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new tD(r),this.Gr=new eJ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new tJ,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new nJ(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Lt("MemoryPersistence","Starting transaction:",e);const s=new oJ(this.Qr.next());return this.referenceDelegate.zr(),n(s).next((i=>this.referenceDelegate.jr(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Hr(e,r){return rt.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class oJ extends eF{constructor(e){super(),this.currentSequenceNumber=e}}class y_{constructor(e){this.persistence=e,this.Jr=new U8,this.Yr=null}static Zr(e){return new y_(e)}get Xr(){if(this.Yr)return this.Yr;throw ir()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),rt.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),rt.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),rt.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((s=>this.Xr.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((s=>{s.forEach((i=>this.Xr.add(i.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.Xr,(n=>{const s=Jt.fromPath(n);return this.ei(e,s).next((i=>{i||r.removeEntry(s,br.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return rt.or([()=>rt.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class t5{constructor(e,r){this.persistence=e,this.ti=new sh((n=>$o(n.path)),((n,s)=>n.isEqual(s))),this.garbageCollector=cD(this,r)}static Zr(e,r){return new t5(e,r)}zr(){}jr(e){return rt.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Yn(e){const r=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>r.next((s=>n+s))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}Zn(e,r){return rt.forEach(this.ti,((n,s)=>this.nr(e,n,s).next((i=>i?rt.resolve():r(s)))))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Or(e,(a=>this.nr(e,a,r).next((o=>{o||(n++,i.removeEntry(a,br.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,r){return this.ti.set(r,e.currentSequenceNumber),rt.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),rt.resolve()}removeReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),rt.resolve()}updateLimboDocument(e,r){return this.ti.set(r,e.currentSequenceNumber),rt.resolve()}Wr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=lw(e.data.value)),r}nr(e,r,n){return rt.or([()=>this.persistence.Hr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.ti.get(r);return rt.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lJ{constructor(e){this.serializer=e}O(e,r,n,s){const i=new c_("createOrUpgrade",r);n<1&&s>=1&&((function(l){l.createObjectStore("owner")})(e),(function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BC,{unique:!0}),l.createObjectStore("documentMutations")})(e),CA(e),(function(l){l.createObjectStore("remoteDocuments")})(e));let a=rt.resolve();return n<3&&s>=3&&(n!==0&&((function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")})(e),CA(e)),a=a.next((()=>(function(l){const c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:br.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)})(i)))),n<4&&s>=4&&(n!==0&&(a=a.next((()=>(function(l,c){return c.store("mutations").U().next((d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BC,{unique:!0});const p=c.store("mutations"),g=d.map((m=>p.put(m)));return rt.waitFor(g)}))})(e,i)))),a=a.next((()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&s>=5&&(a=a.next((()=>this.ni(i)))),n<6&&s>=6&&(a=a.next((()=>((function(l){l.createObjectStore("remoteDocumentGlobal")})(e),this.ri(i))))),n<7&&s>=7&&(a=a.next((()=>this.ii(i)))),n<8&&s>=8&&(a=a.next((()=>this.si(e,i)))),n<9&&s>=9&&(a=a.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&s>=10&&(a=a.next((()=>this.oi(i)))),n<11&&s>=11&&(a=a.next((()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(l){l.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&s>=12&&(a=a.next((()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:HX});c.createIndex("collectionPathOverlayIndex",WX,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",GX,{unique:!1})})(e)}))),n<13&&s>=13&&(a=a.next((()=>(function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:jX});c.createIndex("documentKeyIndex",FX),c.createIndex("collectionGroupIndex",DX)})(e))).next((()=>this._i(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&s>=14&&(a=a.next((()=>this.ai(e,i)))),n<15&&s>=15&&(a=a.next((()=>(function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:UX}).createIndex("sequenceNumberIndex",zX,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:$X}).createIndex("documentKeyIndex",qX,{unique:!1})})(e)))),n<16&&s>=16&&(a=a.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&s>=17&&(a=a.next((()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)}))),a}ri(e){let r=0;return e.store("remoteDocuments").J(((n,s)=>{r+=e5(s)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((s=>rt.forEach(s,(i=>{const a=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",a).next((o=>rt.forEach(o,(l=>{mr(l.userId===i.userId);const c=k0(this.serializer,l);return iD(e,i.userId,c).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((s=>{const i=[];return n.J(((a,o)=>{const l=new Pn(a),c=(function(p){return[0,$o(p)]})(l);i.push(r.get(c).next((d=>d?rt.resolve():(p=>r.put({targetId:0,path:$o(p),sequenceNumber:s.highestListenSequenceNumber}))(l))))})).next((()=>rt.waitFor(i)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:VX});const n=r.store("collectionParents"),s=new V8,i=a=>{if(s.add(a)){const o=a.lastSegment(),l=a.popLast();return n.put({collectionId:o,parent:$o(l)})}};return r.store("remoteDocuments").J({H:!0},((a,o)=>{const l=new Pn(a);return i(l.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([a,o,l],c)=>{const d=Hu(o);return i(d.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,s)=>{const i=Qg(s),a=rD(this.serializer,i);return r.put(a)}))}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J(((i,a)=>{const o=r.store("remoteDocumentsV14"),l=(function(p){return p.document?new Jt(Pn.fromString(p.document.name).popFirst(5)):p.noDocument?Jt.fromSegments(p.noDocument.path):p.unknownDocument?Jt.fromSegments(p.unknownDocument.path):ir()})(a).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(o.put(c))})).next((()=>rt.waitFor(s)))}ai(e,r){const n=r.store("mutations"),s=dD(this.serializer),i=new z8(y_.Zr,this.serializer.ct);return n.U().next((a=>{const o=new Map;return a.forEach((l=>{var c;let d=(c=o.get(l.userId))!==null&&c!==void 0?c:rn();k0(this.serializer,l).keys().forEach((p=>d=d.add(p))),o.set(l.userId,d)})),rt.forEach(o,((l,c)=>{const d=new za(c),p=g_.lt(this.serializer,d),g=i.getIndexManager(d),m=x_.lt(d,this.serializer,g,i.referenceDelegate);return new hD(s,m,p,g).recalculateAndSaveOverlaysForDocumentKeys(new p6(r,bl.oe),l).next()}))}))}}function CA(t){t.createObjectStore("targetDocuments",{keyPath:MX}).createIndex("documentTargetsIndex",BX,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",OX,{unique:!0}),t.createObjectStore("targetGlobal")}const g3="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $8{constructor(e,r,n,s,i,a,o,l,c,d,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=a,this.document=o,this.ci=c,this.li=d,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!$8.D())throw new Rt(mt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new XQ(this,s),this.Ai=r+"main",this.serializer=new tD(l),this.Ri=new Ju(this.Ai,this.hi,new lJ(this.serializer)),this.$r=new BQ,this.Ur=new GQ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dD(this.serializer),this.Gr=new MQ,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&qi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Rt(mt.FAILED_PRECONDITION,g3);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new bl(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>hv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Ff(e))return Lt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Lt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return Og(e).get("owner").next((r=>rt.resolve(this.vi(r))))}Ci(e){return hv(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=Ca(r,"clientMetadata");return n.U().next((s=>{const i=this.xi(s,18e5),a=s.filter((o=>i.indexOf(o)===-1));return rt.forEach(a,(o=>n.delete(o.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?rt.resolve(!0):Og(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Rt(mt.FAILED_PRECONDITION,g3);return!1}}return!(!this.networkEnabled||!this.inForeground)||hv(e).U().next((n=>this.xi(n,5e3).find((s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(i||a&&o)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&Lt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new p6(e,bl.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>hv(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return x_.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new WQ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return g_.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){Lt("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",i=(function(l){return l===17?XX:l===16?YX:l===15?A8:l===14?aF:l===13?iF:l===12?KX:l===11?sF:void ir()})(this.hi);let a;return this.Ri.runTransaction(e,s,i,(o=>(a=new p6(o,this.Qr?this.Qr.next():bl.oe),r==="readwrite-primary"?this.wi(a).next((l=>!!l||this.Si(a))).next((l=>{if(!l)throw qi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new Rt(mt.FAILED_PRECONDITION,Zj);return n(a)})).next((l=>this.Di(a).next((()=>l)))):this.Ki(a).next((()=>n(a)))))).then((o=>(a.raiseOnCommittedEvent(),o)))}Ki(e){return Og(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Rt(mt.FAILED_PRECONDITION,g3)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Og(e).put("owner",r)}static D(){return Ju.D()}bi(e){const r=Og(e);return r.get("owner").next((n=>this.vi(n)?(Lt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):rt.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(qi(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;jj()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return Lt("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return qi("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){qi("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Og(t){return Ca(t,"owner")}function hv(t){return Ca(t,"clientMetadata")}function q8(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=rn(),s=rn();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new H8(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cJ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return jj()?8:tF(Sa())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.Zi(e,r,s,n).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new cJ;return this.Xi(e,r,a).next((o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)}))})).next((()=>i.result))}es(e,r,n,s){return n.documentReadCount<this.ji?(_m()<=Tn.DEBUG&&Lt("QueryEngine","SDK will not create cache indexes for query:",bm(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),rt.resolve()):(_m()<=Tn.DEBUG&&Lt("QueryEngine","Query:",bm(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(_m()<=Tn.DEBUG&&Lt("QueryEngine","The SDK decides to create cache indexes for query:",bm(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qo(r))):rt.resolve())}Yi(e,r){if(JC(r))return rt.resolve(null);let n=qo(r);return this.indexManager.getIndexType(e,n).next((s=>s===0?null:(r.limit!==null&&s===1&&(r=Xw(r,null,"F"),n=qo(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const a=rn(...i);return this.Ji.getDocuments(e,a).next((o=>this.indexManager.getMinOffset(e,n).next((l=>{const c=this.ts(r,o);return this.ns(r,c,a,l.readTime)?this.Yi(e,Xw(r,null,"F")):this.rs(e,c,r,l)}))))})))))}Zi(e,r,n,s){return JC(r)||s.isEqual(br.min())?rt.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?rt.resolve(null):(_m()<=Tn.DEBUG&&Lt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),bm(r)),this.rs(e,a,r,Qj(s,-1)).next((o=>o)))}))}ts(e,r){let n=new ks(EF(e));return r.forEach(((s,i)=>{Bx(e,i)&&(n=n.add(i))})),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return _m()<=Tn.DEBUG&&Lt("QueryEngine","Using full collection scan to execute query:",bm(r)),this.Ji.getDocumentsMatchingQuery(e,r,nc.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next((i=>(r.forEach((a=>{i=i.insert(a.key,a)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uJ{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Ds(Kr),this._s=new sh((i=>Q0(i)),Ox),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function pD(t,e,r,n){return new uJ(t,e,r,n)}async function mD(t,e){const r=Yt(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next((i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((i=>{const a=[],o=[];let l=rn();for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return r.localDocuments.getDocuments(n,l).next((c=>({hs:c,removedBatchIds:a,addedBatchIds:o})))}))}))}function dJ(t,e){const r=Yt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return(function(o,l,c,d){const p=c.batch,g=p.keys();let m=rt.resolve();return g.forEach((y=>{m=m.next((()=>d.getEntry(l,y))).next((w=>{const _=c.docVersions.get(y);mr(_!==null),w.version.compareTo(_)<0&&(p.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),d.addEntry(w)))}))})),m.next((()=>o.mutationQueue.removeMutationBatch(l,p)))})(r,n,e,i).next((()=>i.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(o){let l=rn();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l})(e)))).next((()=>r.localDocuments.getDocuments(n,s)))}))}function gD(t){const e=Yt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function hJ(t,e){const r=Yt(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach(((d,p)=>{const g=s.get(p);if(!g)return;o.push(r.Ur.removeMatchingKeys(i,d.removedDocuments,p).next((()=>r.Ur.addMatchingKeys(i,d.addedDocuments,p))));let m=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(gi.EMPTY_BYTE_STRING,br.min()).withLastLimboFreeSnapshotVersion(br.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),s=s.insert(p,m),(function(w,_,S){return w.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(g,m,d)&&o.push(r.Ur.updateTargetData(i,m))}));let l=Sl(),c=rn();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,d))})),o.push(xD(i,a,e.documentUpdates).next((d=>{l=d.Ps,c=d.Is}))),!n.isEqual(br.min())){const d=r.Ur.getLastRemoteSnapshotVersion(i).next((p=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n)));o.push(d)}return rt.waitFor(o).next((()=>a.apply(i))).next((()=>r.localDocuments.getLocalViewOfDocuments(i,l,c))).next((()=>l))})).then((i=>(r.os=s,i)))}function xD(t,e,r){let n=rn(),s=rn();return r.forEach((i=>n=n.add(i))),e.getEntries(t,n).next((i=>{let a=Sl();return r.forEach(((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(br.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Lt("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)})),{Ps:a,Is:s}}))}function fJ(t,e){const r=Yt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function m1(t,e){const r=Yt(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return r.Ur.getTargetData(n,e).next((i=>i?(s=i,rt.resolve(s)):r.Ur.allocateTargetId(n).next((a=>(s=new Fd(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function g1(t,e,r){const n=Yt(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,(a=>n.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!Ff(a))throw a;Lt("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function r5(t,e,r){const n=Yt(t);let s=br.min(),i=rn();return n.persistence.runTransaction("Execute query","readwrite",(a=>(function(l,c,d){const p=Yt(l),g=p._s.get(d);return g!==void 0?rt.resolve(p.os.get(g)):p.Ur.getTargetData(c,d)})(n,a,qo(e)).next((o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next((l=>{i=l}))})).next((()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:br.min(),r?i:rn()))).next((o=>(wD(n,SF(e),o),{documents:o,Ts:i})))))}function yD(t,e){const r=Yt(t),n=Yt(r.Ur),s=r.os.get(e);return s?Promise.resolve(s.target):r.persistence.runTransaction("Get target data","readonly",(i=>n.ot(i,e).next((a=>a?a.target:null))))}function vD(t,e){const r=Yt(t),n=r.us.get(e)||br.min();return r.persistence.runTransaction("Get new document changes","readonly",(s=>r.cs.getAllFromCollectionGroup(s,e,Qj(n,-1),Number.MAX_SAFE_INTEGER))).then((s=>(wD(r,e,s),s)))}function wD(t,e,r){let n=t.us.get(e)||br.min();r.forEach(((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),t.us.set(e,n)}async function pJ(t,e,r,n){const s=Yt(t);let i=rn(),a=Sl();for(const c of r){const d=e.Es(c.metadata.name);c.document&&(i=i.add(d));const p=e.ds(c);p.setReadTime(e.As(c.metadata.readTime)),a=a.insert(d,p)}const o=s.cs.newChangeBuffer({trackRemovals:!0}),l=await m1(s,(function(d){return qo(L1(Pn.fromString(`__bundle__/docs/${d}`)))})(n));return s.persistence.runTransaction("Apply bundle documents","readwrite",(c=>xD(c,o,a).next((d=>(o.apply(c),d))).next((d=>s.Ur.removeMatchingKeysForTargetId(c,l.targetId).next((()=>s.Ur.addMatchingKeys(c,i,l.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is))).next((()=>d.Ps))))))}async function mJ(t,e,r=rn()){const n=await m1(t,qo(M8(e.bundledQuery))),s=Yt(t);return s.persistence.runTransaction("Save named query","readwrite",(i=>{const a=Wi(e.readTime);if(n.snapshotVersion.compareTo(a)>=0)return s.Gr.saveNamedQuery(i,e);const o=n.withResumeToken(gi.EMPTY_BYTE_STRING,a);return s.os=s.os.insert(o.targetId,o),s.Ur.updateTargetData(i,o).next((()=>s.Ur.removeMatchingKeysForTargetId(i,n.targetId))).next((()=>s.Ur.addMatchingKeys(i,r,n.targetId))).next((()=>s.Gr.saveNamedQuery(i,e)))}))}function AA(t,e){return`firestore_clients_${t}_${e}`}function NA(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function x3(t,e){return`firestore_targets_${t}_${e}`}class n5{constructor(e,r,n,s){this.user=e,this.batchId=r,this.state=n,this.error=s}static Rs(e,r,n){const s=JSON.parse(n);let i,a=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return a&&s.error&&(a=typeof s.error.message=="string"&&typeof s.error.code=="string",a&&(i=new Rt(s.error.code,s.error.message))),a?new n5(e,r,s.state,i):(qi("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class v2{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let s,i=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return i&&n.error&&(i=typeof n.error.message=="string"&&typeof n.error.code=="string",i&&(s=new Rt(n.error.code,n.error.message))),i?new v2(e,n.state,s):(qi("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class s5{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let s=typeof n=="object"&&n.activeTargetIds instanceof Array,i=I8();for(let a=0;s&&a<n.activeTargetIds.length;++a)s=rF(n.activeTargetIds[a]),i=i.add(n.activeTargetIds[a]);return s?new s5(e,i):(qi("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class W8{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new W8(r.clientId,r.onlineState):(qi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class N6{constructor(){this.activeTargetIds=I8()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class y3{constructor(e,r,n,s,i){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ds(Kr),this.started=!1,this.bs=[];const a=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=AA(this.persistenceKey,this.ps),this.vs=(function(l){return`firestore_sequence_number_${l}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new N6),this.Cs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.xs=(function(l){return`firestore_online_state_${l}`})(this.persistenceKey),this.Os=(function(l){return`firestore_bundle_loaded_v2_${l}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const s=this.getItem(AA(this.persistenceKey,n));if(s){const i=s5.Rs(n,s);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,s)=>{s.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(x3(this.persistenceKey,e));if(s){const i=v2.Rs(e,s);i&&(n=i.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(x3(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((s=>{this.Qs(s)})),this.currentUser=e,n.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return Lt("SharedClientState","READ",e,r),r}setItem(e,r){Lt("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Lt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(Lt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void qi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(i){let a=bl.oe;if(i!=null)try{const o=JSON.parse(i);mr(typeof o=="number"),a=o}catch(o){qi("SharedClientState","Failed to read sequence number from WebStorage",o)}return a})(r.newValue);n!==bl.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((s=>this.syncEngine.eo(s))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const s=new n5(this.currentUser,e,r,n),i=NA(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Vs())}Qs(e){const r=NA(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const s=x3(this.persistenceKey,e),i=new v2(e,r,n);this.setItem(s,i.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return s5.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),s=Number(n[1]),i=n[2]!==void 0?n[2]:null;return n5.Rs(new za(i),s,r)}Ys(e,r){const n=this.Ms.exec(e),s=Number(n[1]);return v2.Rs(s,r)}Ls(e){return W8.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Lt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),s=this.ks(this.Ss),i=this.ks(n),a=[],o=[];return i.forEach((l=>{s.has(l)||a.push(l)})),s.forEach((l=>{i.has(l)||o.push(l)})),this.syncEngine.io(a,o).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=I8();return e.forEach(((n,s)=>{r=r.unionWith(s.activeTargetIds)})),r}}class _D{constructor(){this.so=new N6,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new N6,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gJ{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Lt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Lt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fv=null;function v3(){return fv===null?fv=(function(){return 268435456+Math.round(2147483648*Math.random())})():fv++,"0x"+fv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yJ{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="WebChannelConnection";class vJ extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=v3(),l=this.xo(r,n.toUriEncodedString());Lt("RestConnection",`Sending RPC '${r}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,l,c,s).then((d=>(Lt("RestConnection",`Received RPC '${r}' ${o}: `,d),d)),(d=>{throw rc("RestConnection",`RPC '${r}' ${o} failed with error: `,d,"url: ",l,"request:",s),d}))}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+R1})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>r[a]=i)),s&&s.headers.forEach(((i,a)=>r[a]=i))}xo(r,n){const s=xJ[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=v3();return new Promise(((a,o)=>{const l=new zj;l.setWithCredentials(!0),l.listenOnce($j.COMPLETE,(()=>{try{switch(l.getLastErrorCode()){case iw.NO_ERROR:const d=l.getResponseJson();Lt(Io,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),a(d);break;case iw.TIMEOUT:Lt(Io,`RPC '${e}' ${i} timed out`),o(new Rt(mt.DEADLINE_EXCEEDED,"Request time out"));break;case iw.HTTP_ERROR:const p=l.getStatus();if(Lt(Io,`RPC '${e}' ${i} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const m=g?.error;if(m&&m.status&&m.message){const y=(function(_){const S=_.toLowerCase().replace(/_/g,"-");return Object.values(mt).indexOf(S)>=0?S:mt.UNKNOWN})(m.status);o(new Rt(y,m.message))}else o(new Rt(mt.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new Rt(mt.UNAVAILABLE,"Connection failed."));break;default:ir()}}finally{Lt(Io,`RPC '${e}' ${i} completed.`)}}));const c=JSON.stringify(s);Lt(Io,`RPC '${e}' ${i} sending request:`,s),l.send(r,"POST",c,n,15)}))}Bo(e,r,n){const s=v3(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Wj(),o=Hj(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=i.join("");Lt(Io,`Creating RPC '${e}' stream ${s}: ${d}`,l);const p=a.createWebChannel(d,l);let g=!1,m=!1;const y=new yJ({Io:_=>{m?Lt(Io,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(g||(Lt(Io,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),Lt(Io,`RPC '${e}' stream ${s} sending:`,_),p.send(_))},To:()=>p.close()}),w=(_,S,T)=>{_.listen(S,(I=>{try{T(I)}catch(M){setTimeout((()=>{throw M}),0)}}))};return w(p,Kg.EventType.OPEN,(()=>{m||(Lt(Io,`RPC '${e}' stream ${s} transport opened.`),y.yo())})),w(p,Kg.EventType.CLOSE,(()=>{m||(m=!0,Lt(Io,`RPC '${e}' stream ${s} transport closed`),y.So())})),w(p,Kg.EventType.ERROR,(_=>{m||(m=!0,rc(Io,`RPC '${e}' stream ${s} transport errored:`,_),y.So(new Rt(mt.UNAVAILABLE,"The operation could not be completed")))})),w(p,Kg.EventType.MESSAGE,(_=>{var S;if(!m){const T=_.data[0];mr(!!T);const I=T,M=I.error||((S=I[0])===null||S===void 0?void 0:S.error);if(M){Lt(Io,`RPC '${e}' stream ${s} received error:`,M);const K=M.status;let W=(function(E){const D=ia[E];if(D!==void 0)return BF(D)})(K),L=M.message;W===void 0&&(W=mt.INTERNAL,L="Unknown error status: "+K+" with message "+M.message),m=!0,y.So(new Rt(W,L)),p.close()}else Lt(Io,`RPC '${e}' stream ${s} received:`,T),y.bo(T)}})),w(o,qj.STAT_EVENT,(_=>{_.stat===h6.PROXY?Lt(Io,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===h6.NOPROXY&&Lt(Io,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{y.wo()}),0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(){return typeof window<"u"?window:null}function hw(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t){return new AQ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&Lt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,r,n,s,i,a,o,l){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new G8(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===mt.RESOURCE_EXHAUSTED?(qi(r.toString()),qi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===mt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.Yo===r&&this.P_(n,s)}),(n=>{e((()=>{const s=new Rt(mt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{n((()=>this.I_(s)))})),this.stream.onMessage((s=>{n((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Lt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(Lt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wJ extends kD{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=IQ(this.serializer,e),n=(function(i){if(!("targetChange"in i))return br.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?br.min():a.readTime?Wi(a.readTime):br.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=k6(this.serializer),r.addTarget=(function(i,a){let o;const l=a.target;if(o=Kw(l)?{documents:YF(i,l)}:{query:m_(i,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=$F(i,a.resumeToken);const c=_6(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(br.min())>0){o.readTime=p1(i,a.snapshotVersion.toTimestamp());const c=_6(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o})(this.serializer,e);const n=RQ(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=k6(this.serializer),r.removeTarget=e,this.a_(r)}}class _J extends kD{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return mr(!!e.streamToken),this.lastStreamToken=e.streamToken,mr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){mr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=PQ(e.writeResults,e.commitTime),n=Wi(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=k6(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>rx(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bJ extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Rt(mt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Mo(e,b6(r,n),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Rt(mt.UNKNOWN,i.toString())}))}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Lo(e,b6(r,n),s,a,o,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Rt(mt.UNKNOWN,a.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class kJ{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(qi(r),this.D_=!1):Lt("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SJ{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((a=>{n.enqueueAndForget((async()=>{Of(this)&&(Lt("RemoteStore","Restarting streams for network reachability change."),await(async function(l){const c=Yt(l);c.L_.add(4),await D1(c),c.q_.set("Unknown"),c.L_.delete(4),await qx(c)})(this))}))})),this.q_=new kJ(n,s)}}async function qx(t){if(Of(t))for(const e of t.B_)await e(!0)}async function D1(t){for(const e of t.B_)await e(!1)}function v_(t,e){const r=Yt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),X8(r)?Y8(r):M1(r).r_()&&K8(r,e))}function x1(t,e){const r=Yt(t),n=M1(r);r.N_.delete(e),n.r_()&&SD(r,e),r.N_.size===0&&(n.r_()?n.o_():Of(r)&&r.q_.set("Unknown"))}function K8(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(br.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}M1(t).A_(e)}function SD(t,e){t.Q_.xe(e),M1(t).R_(e)}function Y8(t){t.Q_=new kQ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),M1(t).start(),t.q_.v_()}function X8(t){return Of(t)&&!M1(t).n_()&&t.N_.size>0}function Of(t){return Yt(t).L_.size===0}function ED(t){t.Q_=void 0}async function EJ(t){t.q_.set("Online")}async function CJ(t){t.N_.forEach(((e,r)=>{K8(t,e)}))}async function AJ(t,e){ED(t),X8(t)?(t.q_.M_(e),Y8(t)):t.q_.set("Unknown")}async function NJ(t,e,r){if(t.q_.set("Online"),e instanceof zF&&e.state===2&&e.cause)try{await(async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))})(t,e)}catch(n){Lt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await i5(t,n)}else if(e instanceof dw?t.Q_.Ke(e):e instanceof UF?t.Q_.He(e):t.Q_.We(e),!r.isEqual(br.min()))try{const n=await gD(t.localStore);r.compareTo(n)>=0&&await(function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach(((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(l.resumeToken,a))}})),o.targetMismatches.forEach(((l,c)=>{const d=i.N_.get(l);if(!d)return;i.N_.set(l,d.withResumeToken(gi.EMPTY_BYTE_STRING,d.snapshotVersion)),SD(i,l);const p=new Fd(d.target,l,c,d.sequenceNumber);K8(i,p)})),i.remoteSyncer.applyRemoteEvent(o)})(t,r)}catch(n){Lt("RemoteStore","Failed to raise snapshot:",n),await i5(t,n)}}async function i5(t,e,r){if(!Ff(e))throw e;t.L_.add(1),await D1(t),t.q_.set("Offline"),r||(r=()=>gD(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Lt("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await qx(t)}))}function CD(t,e){return e().catch((r=>i5(t,r,e)))}async function O1(t){const e=Yt(t),r=wf(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;TJ(e);)try{const s=await fJ(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,IJ(e,s)}catch(s){await i5(e,s)}AD(e)&&ND(e)}function TJ(t){return Of(t)&&t.O_.length<10}function IJ(t,e){t.O_.push(e);const r=wf(t);r.r_()&&r.V_&&r.m_(e.mutations)}function AD(t){return Of(t)&&!wf(t).n_()&&t.O_.length>0}function ND(t){wf(t).start()}async function PJ(t){wf(t).p_()}async function RJ(t){const e=wf(t);for(const r of t.O_)e.m_(r.mutations)}async function LJ(t,e,r){const n=t.O_.shift(),s=j8.from(n,e,r);await CD(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await O1(t)}async function jJ(t,e){e&&wf(t).V_&&await(async function(n,s){if((function(a){return MF(a)&&a!==mt.ABORTED})(s.code)){const i=n.O_.shift();wf(n).s_(),await CD(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s))),await O1(n)}})(t,e),AD(t)&&ND(t)}async function IA(t,e){const r=Yt(t);r.asyncQueue.verifyOperationInProgress(),Lt("RemoteStore","RemoteStore received new credentials");const n=Of(r);r.L_.add(3),await D1(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await qx(r)}async function T6(t,e){const r=Yt(t);e?(r.L_.delete(2),await qx(r)):e||(r.L_.add(2),await D1(r),r.q_.set("Unknown"))}function M1(t){return t.K_||(t.K_=(function(r,n,s){const i=Yt(r);return i.w_(),new wJ(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Eo:EJ.bind(null,t),Ro:CJ.bind(null,t),mo:AJ.bind(null,t),d_:NJ.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),X8(t)?Y8(t):t.q_.set("Unknown")):(await t.K_.stop(),ED(t))}))),t.K_}function wf(t){return t.U_||(t.U_=(function(r,n,s){const i=Yt(r);return i.w_(),new _J(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:PJ.bind(null,t),mo:jJ.bind(null,t),f_:RJ.bind(null,t),g_:LJ.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await O1(t)):(await t.U_.stop(),t.O_.length>0&&(Lt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Wa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new Q8(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Rt(mt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function B1(t,e){if(qi("AsyncQueue",`${e}: ${t}`),Ff(t))return new Rt(mt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Jt.comparator(r.key,n.key):(r,n)=>Jt.comparator(r.key,n.key),this.keyedMap=Yg(),this.sortedSet=new Ds(this.comparator)}static emptySet(e){return new $m(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof $m)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new $m;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(){this.W_=new Ds(Jt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):ir():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class y1{constructor(e,r,n,s,i,a,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach((o=>{a.push({type:0,doc:o})})),new y1(e,r,$m.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FJ{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class DJ{constructor(){this.queries=RA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Yt(r),i=s.queries;s.queries=RA(),i.forEach(((a,o)=>{for(const l of o.j_)l.onError(n)}))})(this,new Rt(mt.ABORTED,"Firestore shutting down"))}}function RA(){return new sh((t=>kF(t)),Mx)}async function J8(t,e){const r=Yt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new FJ,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=B1(a,`Initialization of query '${bm(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&eS(r)}async function Z8(t,e){const r=Yt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function OJ(t,e){const r=Yt(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&eS(r)}function MJ(t,e,r){const n=Yt(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function eS(t){t.Y_.forEach((e=>{e.next()}))}var I6,LA;(LA=I6||(I6={})).ea="default",LA.Cache="cache";class tS{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new y1(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=y1.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==I6.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BJ{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.serializer=e}Es(e){return Zu(this.serializer,e)}ds(e){return e.metadata.exists?KF(this.serializer,e.document,!1):Bs.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Wi(e)}}class VJ{constructor(e,r,n){this.ca=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=TD(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const n=Pn.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,n=new jA(this.serializer);for(const s of e)if(s.metadata.queries){const i=n.Es(s.metadata.name);for(const a of s.metadata.queries){const o=(r.get(a)||rn()).add(i);r.set(a,o)}}return r}async complete(){const e=await pJ(this.localStore,new jA(this.serializer),this.documents,this.ca.id),r=this.ha(this.documents);for(const n of this.queries)await mJ(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function TD(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.key=e}}class PD{constructor(e){this.key=e}}class RD{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=rn(),this.mutatedKeys=rn(),this.Aa=EF(e),this.Ra=new $m(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new PA,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((d,p)=>{const g=s.get(d),m=Bx(this.query,p)?p:null,y=!!g&&this.mutatedKeys.has(g.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;g&&m?g.data.isEqual(m.data)?y!==w&&(n.track({type:3,doc:m}),_=!0):this.ga(g,m)||(n.track({type:2,doc:m}),_=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(o=!0)):!g&&m?(n.track({type:0,doc:m}),_=!0):g&&!m&&(n.track({type:1,doc:g}),_=!0,(l||c)&&(o=!0)),_&&(m?(a=a.add(m),i=w?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),n.track({type:1,doc:d})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort(((d,p)=>(function(m,y){const w=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ir()}};return w(m)-w(y)})(d.type,p.type)||this.Aa(d.doc,p.doc))),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new y1(this.query,e.Ra,i,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new PA,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=rn(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new PD(n))})),this.da.forEach((n=>{e.has(n)||r.push(new ID(n))})),r}ba(e){this.Ta=e.Ts,this.da=rn();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return y1.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class UJ{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class zJ{constructor(e){this.key=e,this.va=!1}}class $J{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new sh((o=>kF(o)),Mx),this.Ma=new Map,this.xa=new Set,this.Oa=new Ds(Jt.comparator),this.Na=new Map,this.La=new U8,this.Ba={},this.ka=new Map,this.qa=rp.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function qJ(t,e,r=!0){const n=w_(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await LD(n,e,r,!0),s}async function HJ(t,e){const r=w_(t);await LD(r,e,!0,!1)}async function LD(t,e,r,n){const s=await m1(t.localStore,qo(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await rS(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&v_(t.remoteStore,s),o}async function rS(t,e,r,n,s){t.Ka=(p,g,m)=>(async function(w,_,S,T){let I=_.view.ma(S);I.ns&&(I=await r5(w.localStore,_.query,!1).then((({documents:L})=>_.view.ma(L,I))));const M=T&&T.targetChanges.get(_.targetId),K=T&&T.targetMismatches.get(_.targetId)!=null,W=_.view.applyChanges(I,w.isPrimaryClient,M,K);return P6(w,_.targetId,W.wa),W.snapshot})(t,p,g,m);const i=await r5(t.localStore,e,!0),a=new RD(e,i.Ts),o=a.ma(i.documents),l=zx.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,l);P6(t,r,c.wa);const d=new UJ(e,r,a);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function WJ(t,e,r){const n=Yt(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter((a=>!Mx(a,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await g1(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),r&&x1(n.remoteStore,s.targetId),v1(n,s.targetId)})).catch(jf)):(v1(n,s.targetId),await g1(n.localStore,s.targetId,!0))}async function GJ(t,e){const r=Yt(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),x1(r.remoteStore,n.targetId))}async function KJ(t,e,r){const n=aS(t);try{const s=await(function(a,o){const l=Yt(a),c=ri.now(),d=o.reduce(((m,y)=>m.add(y.key)),rn());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let y=Sl(),w=rn();return l.cs.getEntries(m,d).next((_=>{y=_,y.forEach(((S,T)=>{T.isValidDocument()||(w=w.add(S))}))})).next((()=>l.localDocuments.getOverlayedDocuments(m,y))).next((_=>{p=_;const S=[];for(const T of o){const I=wQ(T,p.get(T.key).overlayedDocument);I!=null&&S.push(new ih(T.key,I,hF(I.value.mapValue),ei.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,S,o)})).next((_=>{g=_;const S=_.applyToLocalDocumentSet(p,w);return l.documentOverlayCache.saveOverlays(m,_.batchId,S)}))})).then((()=>({batchId:g.batchId,changes:AF(p)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),(function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new Ds(Kr)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c})(n,s.batchId,r),await ah(n,s.changes),await O1(n.remoteStore)}catch(s){const i=B1(s,"Failed to persist write");r.reject(i)}}async function jD(t,e){const r=Yt(t);try{const n=await hJ(r.localStore,e);e.targetChanges.forEach(((s,i)=>{const a=r.Na.get(i);a&&(mr(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?mr(a.va):s.removedDocuments.size>0&&(mr(a.va),a.va=!1))})),await ah(r,n,e)}catch(n){await jf(n)}}function FA(t,e,r){const n=Yt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach(((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)})),(function(a,o){const l=Yt(a);l.onlineState=o;let c=!1;l.queries.forEach(((d,p)=>{for(const g of p.j_)g.Z_(o)&&(c=!0)})),c&&eS(l)})(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function YJ(t,e,r){const n=Yt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new Ds(Jt.comparator);a=a.insert(i,Bs.newNoDocument(i,br.min()));const o=rn().add(i),l=new Ux(br.min(),new Map,new Ds(Kr),a,o);await jD(n,l),n.Oa=n.Oa.remove(i),n.Na.delete(e),iS(n)}else await g1(n.localStore,e,!1).then((()=>v1(n,e,r))).catch(jf)}async function XJ(t,e){const r=Yt(t),n=e.batch.batchId;try{const s=await dJ(r.localStore,e);sS(r,n,null),nS(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await ah(r,s)}catch(s){await jf(s)}}async function QJ(t,e,r){const n=Yt(t);try{const s=await(function(a,o){const l=Yt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let d;return l.mutationQueue.lookupMutationBatch(c,o).next((p=>(mr(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(c,p)))).next((()=>l.mutationQueue.performConsistencyCheck(c))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,o))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d))).next((()=>l.localDocuments.getDocuments(c,d)))}))})(n.localStore,e);sS(n,e,r),nS(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await ah(n,s)}catch(s){await jf(s)}}async function JJ(t,e){const r=Yt(t);Of(r.remoteStore)||Lt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await(function(a){const o=Yt(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(l=>o.mutationQueue.getHighestUnacknowledgedBatchId(l)))})(r.localStore);if(n===-1)return void e.resolve();const s=r.ka.get(n)||[];s.push(e),r.ka.set(n,s)}catch(n){const s=B1(n,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function nS(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function sS(t,e,r){const n=Yt(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function v1(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||FD(t,n)}))}function FD(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(x1(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),iS(t))}function P6(t,e,r){for(const n of r)n instanceof ID?(t.La.addReference(n.key,e),ZJ(t,n)):n instanceof PD?(Lt("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||FD(t,n.key)):ir()}function ZJ(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Lt("SyncEngine","New document in limbo: "+r),t.xa.add(n),iS(t))}function iS(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Jt(Pn.fromString(e)),n=t.qa.next();t.Na.set(n,new zJ(r)),t.Oa=t.Oa.insert(r,n),v_(t.remoteStore,new Fd(qo(L1(r.path)),n,"TargetPurposeLimboResolution",bl.oe))}}async function ah(t,e,r){const n=Yt(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach(((o,l)=>{a.push(n.Ka(l,e,r).then((c=>{var d;if((c||r)&&n.isPrimaryClient){const p=c?!c.fromCache:(d=r?.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){s.push(c);const p=H8.Wi(l.targetId,c);i.push(p)}})))})),await Promise.all(a),n.Ca.d_(s),await(async function(l,c){const d=Yt(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>rt.forEach(c,(g=>rt.forEach(g.$i,(m=>d.persistence.referenceDelegate.addReference(p,g.targetId,m))).next((()=>rt.forEach(g.Ui,(m=>d.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))))))}catch(p){if(!Ff(p))throw p;Lt("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const m=d.os.get(g),y=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(y);d.os=d.os.insert(g,w)}}})(n.localStore,i))}async function eZ(t,e){const r=Yt(t);if(!r.currentUser.isEqual(e)){Lt("SyncEngine","User change. New user:",e.toKey());const n=await mD(r.localStore,e);r.currentUser=e,(function(i,a){i.ka.forEach((o=>{o.forEach((l=>{l.reject(new Rt(mt.CANCELLED,a))}))})),i.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await ah(r,n.hs)}}function tZ(t,e){const r=Yt(t),n=r.Na.get(e);if(n&&n.va)return rn().add(n.key);{let s=rn();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}async function rZ(t,e){const r=Yt(t),n=await r5(r.localStore,e.query,!0),s=e.view.ba(n);return r.isPrimaryClient&&P6(r,e.targetId,s.wa),s}async function nZ(t,e){const r=Yt(t);return vD(r.localStore,e).then((n=>ah(r,n)))}async function sZ(t,e,r,n){const s=Yt(t),i=await(function(o,l){const c=Yt(o),d=Yt(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",(p=>d.Mn(p,l).next((g=>g?c.localDocuments.getDocuments(p,g):rt.resolve(null)))))})(s.localStore,e);i!==null?(r==="pending"?await O1(s.remoteStore):r==="acknowledged"||r==="rejected"?(sS(s,e,n||null),nS(s,e),(function(o,l){Yt(Yt(o).mutationQueue).On(l)})(s.localStore,e)):ir(),await ah(s,i)):Lt("SyncEngine","Cannot apply mutation batch with id: "+e)}async function iZ(t,e){const r=Yt(t);if(w_(r),aS(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),s=await DA(r,n.toArray());r.Qa=!0,await T6(r.remoteStore,!0);for(const i of s)v_(r.remoteStore,i)}else if(e===!1&&r.Qa!==!1){const n=[];let s=Promise.resolve();r.Ma.forEach(((i,a)=>{r.sharedClientState.isLocalQueryTarget(a)?n.push(a):s=s.then((()=>(v1(r,a),g1(r.localStore,a,!0)))),x1(r.remoteStore,a)})),await s,await DA(r,n),(function(a){const o=Yt(a);o.Na.forEach(((l,c)=>{x1(o.remoteStore,c)})),o.La.pr(),o.Na=new Map,o.Oa=new Ds(Jt.comparator)})(r),r.Qa=!1,await T6(r.remoteStore,!1)}}async function DA(t,e,r){const n=Yt(t),s=[],i=[];for(const a of e){let o;const l=n.Ma.get(a);if(l&&l.length!==0){o=await m1(n.localStore,qo(l[0]));for(const c of l){const d=n.Fa.get(c),p=await rZ(n,d);p.snapshot&&i.push(p.snapshot)}}else{const c=await yD(n.localStore,a);o=await m1(n.localStore,c),await rS(n,DD(c),a,!1,o.resumeToken)}s.push(o)}return n.Ca.d_(i),s}function DD(t){return wF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function aZ(t){return(function(r){return Yt(Yt(r).persistence).Qi()})(Yt(t).localStore)}async function oZ(t,e,r,n){const s=Yt(t);if(s.Qa)return void Lt("SyncEngine","Ignoring unexpected query state notification.");const i=s.Ma.get(e);if(i&&i.length>0)switch(r){case"current":case"not-current":{const a=await vD(s.localStore,SF(i[0])),o=Ux.createSynthesizedRemoteEventForCurrentChange(e,r==="current",gi.EMPTY_BYTE_STRING);await ah(s,a,o);break}case"rejected":await g1(s.localStore,e,!0),v1(s,e,n);break;default:ir()}}async function lZ(t,e,r){const n=w_(t);if(n.Qa){for(const s of e){if(n.Ma.has(s)&&n.sharedClientState.isActiveQueryTarget(s)){Lt("SyncEngine","Adding an already active target "+s);continue}const i=await yD(n.localStore,s),a=await m1(n.localStore,i);await rS(n,DD(i),a.targetId,!1,a.resumeToken),v_(n.remoteStore,a)}for(const s of r)n.Ma.has(s)&&await g1(n.localStore,s,!1).then((()=>{x1(n.remoteStore,s),v1(n,s)})).catch(jf)}}function w_(t){const e=Yt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YJ.bind(null,e),e.Ca.d_=OJ.bind(null,e.eventManager),e.Ca.$a=MJ.bind(null,e.eventManager),e}function aS(t){const e=Yt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QJ.bind(null,e),e}function cZ(t,e,r){const n=Yt(t);(async function(i,a,o){try{const l=await a.getMetadata();if(await(function(m,y){const w=Yt(m),_=Wi(y.createTime);return w.persistence.runTransaction("hasNewerBundle","readonly",(S=>w.Gr.getBundleMetadata(S,y.id))).then((S=>!!S&&S.createTime.compareTo(_)>=0))})(i.localStore,l))return await a.close(),o._completeWith((function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}})(l)),Promise.resolve(new Set);o._updateProgress(TD(l));const c=new VJ(l,i.localStore,a.serializer);let d=await a.Ua();for(;d;){const g=await c.la(d);g&&o._updateProgress(g),d=await a.Ua()}const p=await c.complete();return await ah(i,p.Ia,void 0),await(function(m,y){const w=Yt(m);return w.persistence.runTransaction("Save bundle","readwrite",(_=>w.Gr.saveBundleMetadata(_,y)))})(i.localStore,l),o._completeWith(p.progress),Promise.resolve(p.Pa)}catch(l){return rc("SyncEngine",`Loading bundle failed with ${l}`),o._failWith(l),Promise.resolve(new Set)}})(n,e,r).then((s=>{n.sharedClientState.notifyBundleLoaded(s)}))}class _f{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$x(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return pD(this.persistence,new fD,e.initialUser,this.serializer)}Ga(e){return new z8(y_.Zr,this.serializer)}Wa(e){return new _D}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_f.provider={build:()=>new _f};class uZ extends _f{constructor(e){super(),this.cacheSizeBytes=e}ja(e,r){mr(this.persistence.referenceDelegate instanceof t5);const n=this.persistence.referenceDelegate.garbageCollector;return new lD(n,e.asyncQueue,r)}Ga(e){const r=this.cacheSizeBytes!==void 0?Do.withCacheSize(this.cacheSizeBytes):Do.DEFAULT;return new z8((n=>t5.Zr(n,r)),this.serializer)}}class oS extends _f{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await aS(this.Ja.syncEngine),await O1(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return pD(this.persistence,new fD,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new lD(n,e.asyncQueue,r)}Ha(e,r){const n=new PX(r,this.persistence);return new IX(e.asyncQueue,n)}Ga(e){const r=q8(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Do.withCacheSize(this.cacheSizeBytes):Do.DEFAULT;return new $8(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,bD(),hw(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new _D}}class OD extends oS{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof y3&&(this.sharedClientState.syncEngine={no:sZ.bind(null,r),ro:oZ.bind(null,r),io:lZ.bind(null,r),Qi:aZ.bind(null,r),eo:nZ.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await iZ(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=bD();if(!y3.D(r))throw new Rt(mt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=q8(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new y3(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class bf{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>FA(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=eZ.bind(null,this.syncEngine),await T6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new DJ})()}createDatastore(e){const r=$x(e.databaseInfo.databaseId),n=(function(i){return new vJ(i)})(e.databaseInfo);return(function(i,a,o,l){return new bJ(i,a,o,l)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,s,i,a,o){return new SJ(n,s,i,a,o)})(this.localStore,this.datastore,e.asyncQueue,(r=>FA(this.syncEngine,r,0)),(function(){return TA.D()?new TA:new gJ})())}createSyncEngine(e,r){return(function(s,i,a,o,l,c,d){const p=new $J(s,i,a,o,l,c);return d&&(p.Qa=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(s){const i=Yt(s);Lt("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await D1(i),i.k_.shutdown(),i.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}bf.provider={build:()=>new bf};function OA(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):qi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dZ{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Wa,this.buffer=new Uint8Array,this.eu=(function(){return new TextDecoder("utf-8")})(),this.tu().then((n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n?.aa)}`))}),(n=>this.metadata.reject(n)))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const r=this.eu.decode(e),n=Number(r);isNaN(n)&&this.ru(`length string (${r}) is not valid number`);const s=await this.iu(n);return new BJ(JSON.parse(s),e.length+n)}su(){return this.buffer.findIndex((e=>e===123))}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const r=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Rt(mt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(s,i){const a=Yt(s),o={documents:i.map((p=>tx(a.serializer,p)))},l=await a.Lo("BatchGetDocuments",a.serializer.databaseId,Pn.emptyPath(),o,i.length),c=new Map;l.forEach((p=>{const g=TQ(a.serializer,p);c.set(g.key.toString(),g)}));const d=[];return i.forEach((p=>{const g=c.get(p.toString());mr(!!g),d.push(g)})),d})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new F1(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const s=Jt.fromPath(n);this.mutations.push(new R8(s,this.precondition(s)))})),await(async function(n,s){const i=Yt(n),a={writes:s.map((o=>rx(i.serializer,o)))};await i.Mo("Commit",i.serializer.databaseId,Pn.emptyPath(),a)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw ir();r=br.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new Rt(mt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(br.min())?ei.exists(!1):ei.updateTime(r):ei.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(br.min()))throw new Rt(mt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ei.updateTime(r)}return ei.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ{constructor(e,r,n,s,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=i,this._u=n.maxAttempts,this.t_=new G8(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new hZ(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((s=>{this.lu(s)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!Dx(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!MF(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pZ{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=za.UNAUTHENTICATED,this.clientId=S8.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async a=>{Lt("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(n,(a=>(Lt("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=B1(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function w3(t,e){t.asyncQueue.verifyOperationInProgress(),Lt("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async s=>{n.isEqual(s)||(await mD(e.localStore,s),n=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function MA(t,e){t.asyncQueue.verifyOperationInProgress();const r=await lS(t);Lt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>IA(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,s)=>IA(e.remoteStore,s))),t._onlineComponents=e}async function lS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Lt("FirestoreClient","Using user provided OfflineComponentProvider");try{await w3(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(s){return s.name==="FirebaseError"?s.code===mt.FAILED_PRECONDITION||s.code===mt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(r))throw r;rc("Error using user provided cache. Falling back to memory cache: "+r),await w3(t,new _f)}}else Lt("FirestoreClient","Using default OfflineComponentProvider"),await w3(t,new _f);return t._offlineComponents}async function b_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Lt("FirestoreClient","Using user provided OnlineComponentProvider"),await MA(t,t._uninitializedComponentsProvider._online)):(Lt("FirestoreClient","Using default OnlineComponentProvider"),await MA(t,new bf))),t._onlineComponents}function MD(t){return lS(t).then((e=>e.persistence))}function V1(t){return lS(t).then((e=>e.localStore))}function BD(t){return b_(t).then((e=>e.remoteStore))}function cS(t){return b_(t).then((e=>e.syncEngine))}function VD(t){return b_(t).then((e=>e.datastore))}async function w1(t){const e=await b_(t),r=e.eventManager;return r.onListen=qJ.bind(null,e.syncEngine),r.onUnlisten=WJ.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=HJ.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=GJ.bind(null,e.syncEngine),r}function mZ(t){return t.asyncQueue.enqueue((async()=>{const e=await MD(t),r=await BD(t);return e.setNetworkEnabled(!0),(function(s){const i=Yt(s);return i.L_.delete(0),qx(i)})(r)}))}function gZ(t){return t.asyncQueue.enqueue((async()=>{const e=await MD(t),r=await BD(t);return e.setNetworkEnabled(!1),(async function(s){const i=Yt(s);i.L_.add(0),await D1(i),i.q_.set("Offline")})(r)}))}function xZ(t,e){const r=new Wa;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,i,a){try{const o=await(function(c,d){const p=Yt(c);return p.persistence.runTransaction("read document","readonly",(g=>p.localDocuments.getDocument(g,d)))})(s,i);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new Rt(mt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const l=B1(o,`Failed to get document '${i} from cache`);a.reject(l)}})(await V1(t),e,r))),r.promise}function UD(t,e,r={}){const n=new Wa;return t.asyncQueue.enqueueAndForget((async()=>(function(i,a,o,l,c){const d=new __({next:g=>{d.Za(),a.enqueueAndForget((()=>Z8(i,p)));const m=g.docs.has(o);!m&&g.fromCache?c.reject(new Rt(mt.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&l&&l.source==="server"?c.reject(new Rt(mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new tS(L1(o.path),d,{includeMetadataChanges:!0,_a:!0});return J8(i,p)})(await w1(t),t.asyncQueue,e,r,n))),n.promise}function yZ(t,e){const r=new Wa;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,i,a){try{const o=await r5(s,i,!0),l=new RD(i,o.Ts),c=l.ma(o.documents),d=l.applyChanges(c,!1);a.resolve(d.snapshot)}catch(o){const l=B1(o,`Failed to execute query '${i} against cache`);a.reject(l)}})(await V1(t),e,r))),r.promise}function zD(t,e,r={}){const n=new Wa;return t.asyncQueue.enqueueAndForget((async()=>(function(i,a,o,l,c){const d=new __({next:g=>{d.Za(),a.enqueueAndForget((()=>Z8(i,p))),g.fromCache&&l.source==="server"?c.reject(new Rt(mt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new tS(o,d,{includeMetadataChanges:!0,_a:!0});return J8(i,p)})(await w1(t),t.asyncQueue,e,r,n))),n.promise}function vZ(t,e,r){const n=new Wa;return t.asyncQueue.enqueueAndForget((async()=>{try{const s=await VD(t);n.resolve((async function(a,o,l){var c;const d=Yt(a),{request:p,ut:g,parent:m}=XF(d.serializer,_F(o),l);d.connection.Fo||delete p.parent;const y=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,m,p,1)).filter((_=>!!_.result));mr(y.length===1);const w=(c=y[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(w).reduce(((_,S)=>(_[g[S]]=w[S],_)),{})})(s,e,r))}catch(s){n.reject(s)}})),n.promise}function wZ(t,e){const r=new __(e);return t.asyncQueue.enqueueAndForget((async()=>(function(s,i){Yt(s).Y_.add(i),i.next()})(await w1(t),r))),()=>{r.Za(),t.asyncQueue.enqueueAndForget((async()=>(function(s,i){Yt(s).Y_.delete(i)})(await w1(t),r)))}}function _Z(t,e,r,n){const s=(function(a,o){let l;return l=typeof a=="string"?VF().encode(a):a,(function(d,p){return new dZ(d,p)})((function(d,p){if(d instanceof Uint8Array)return OA(d,p);if(d instanceof ArrayBuffer)return OA(new Uint8Array(d),p);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(l),o)})(r,$x(e));t.asyncQueue.enqueueAndForget((async()=>{cZ(await cS(t),s,n)}))}function bZ(t,e){return t.asyncQueue.enqueue((async()=>(function(n,s){const i=Yt(n);return i.persistence.runTransaction("Get named query","readonly",(a=>i.Gr.getNamedQuery(a,s)))})(await V1(t),e)))}function kZ(t,e){return t.asyncQueue.enqueue((async()=>(async function(n,s){const i=Yt(n),a=i.indexManager,o=[];return i.persistence.runTransaction("Configure indexes","readwrite",(l=>a.getFieldIndexes(l).next((c=>(function(p,g,m,y,w){p=[...p],g=[...g],p.sort(m),g.sort(m);const _=p.length,S=g.length;let T=0,I=0;for(;T<S&&I<_;){const M=m(p[I],g[T]);M<0?w(p[I++]):M>0?y(g[T++]):(T++,I++)}for(;T<S;)y(g[T++]);for(;I<_;)w(p[I++])})(c,s,CX,(d=>{o.push(a.addFieldIndex(l,d))}),(d=>{o.push(a.deleteFieldIndex(l,d))})))).next((()=>rt.waitFor(o)))))})(await V1(t),e)))}function SZ(t,e){return t.asyncQueue.enqueue((async()=>(function(n,s){Yt(n).ss.zi=s})(await V1(t),e)))}function EZ(t){return t.asyncQueue.enqueue((async()=>(function(r){const n=Yt(r),s=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",(i=>s.deleteAllFieldIndexes(i)))})(await V1(t))))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(t,e,r){if(!r)throw new Rt(mt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qD(t,e,r,n){if(e===!0&&n===!0)throw new Rt(mt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function VA(t){if(!Jt.isDocumentKey(t))throw new Rt(mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function UA(t){if(Jt.isDocumentKey(t))throw new Rt(mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function k_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ir()}function _n(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Rt(mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=k_(t);throw new Rt(mt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function HD(t,e){if(e<=0)throw new Rt(mt.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Rt(mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Rt(mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$D((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Rt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Rt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Rt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hx{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zA({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Rt(mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Rt(mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zA(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Kj;switch(n.type){case"firstParty":return new _X(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Rt(mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=BA.get(r);n&&(Lt("ComponentProvider","Removing Datastore"),BA.delete(r),n.terminate())})(this),Promise.resolve()}}function WD(t,e,r,n={}){var s;const i=(t=_n(t,Hx))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&rc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=za.MOCK_USER;else{o=Lj(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new Rt(mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new za(c)}t._authCredentials=new yX(new Gj(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ga(this.firestore,e,this._query)}}class Ci{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ci(this.firestore,e,this._key)}}class lu extends Ga{constructor(e,r,n){super(e,r,L1(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ci(this.firestore,null,new Jt(e))}withConverter(e){return new lu(this.firestore,e,this._path)}}function Zt(t,e,...r){if(t=An(t),uS("collection","path",e),t instanceof Hx){const n=Pn.fromString(e,...r);return UA(n),new lu(t,null,n)}{if(!(t instanceof Ci||t instanceof lu))throw new Rt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Pn.fromString(e,...r));return UA(n),new lu(t.firestore,null,n)}}function CZ(t,e){if(t=_n(t,Hx),uS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Rt(mt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ga(t,null,(function(n){return new nh(Pn.emptyPath(),n)})(e))}function er(t,e,...r){if(t=An(t),arguments.length===1&&(e=S8.newId()),uS("doc","path",e),t instanceof Hx){const n=Pn.fromString(e,...r);return VA(n),new Ci(t,null,new Jt(n))}{if(!(t instanceof Ci||t instanceof lu))throw new Rt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Pn.fromString(e,...r));return VA(n),new Ci(t.firestore,t instanceof lu?t.converter:null,new Jt(n))}}function AZ(t,e){return t=An(t),e=An(e),(t instanceof Ci||t instanceof lu)&&(e instanceof Ci||e instanceof lu)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function dS(t,e){return t=An(t),e=An(e),t instanceof Ga&&e instanceof Ga&&t.firestore===e.firestore&&Mx(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new G8(this,"async_queue_retry"),this.Vu=()=>{const n=hw();n&&Lt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=hw();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=hw();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new Wa;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ff(e))throw e;Lt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const s=(function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o})(n);throw qi("INTERNAL UNHANDLED ERROR: ",s),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=Q8.createAndSchedule(this,e,r,n,(i=>this.yu(i)));return this.Tu.push(s),s}fu(){this.Eu&&ir()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function R6(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1})(t,["next","error","complete"])}class GD{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wa,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NZ=-1;class Ss extends Hx{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new $A,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $A(e),this._firestoreClient=void 0,await e}}}function TZ(t,e,r){r||(r="(default)");const n=bp(t,"firestore");if(n.isInitialized(r)){const s=n.getImmediate({identifier:r}),i=n.getOptions(r);if(ff(i,e))return s;throw new Rt(mt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Rt(mt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Rt(mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function KD(t,e){const r=typeof t=="object"?t:l_(),n=typeof t=="string"?t:e||"(default)",s=bp(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=w8("firestore");i&&WD(s,...i)}return s}function si(t){if(t._terminated)throw new Rt(mt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||YD(t),t._firestoreClient}function YD(t){var e,r,n;const s=t._freezeSettings(),i=(function(o,l,c,d){return new ZX(o,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,$D(d.experimentalLongPollingOptions),d.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new pZ(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(t._componentsProvider))}function IZ(t,e){rc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return XD(t,bf.provider,{build:n=>new oS(n,r.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function PZ(t){rc("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();XD(t,bf.provider,{build:r=>new OD(r,e.cacheSizeBytes)})}function XD(t,e,r){if((t=_n(t,Ss))._firestoreClient||t._terminated)throw new Rt(mt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Rt(mt.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},YD(t)}function RZ(t){if(t._initialized&&!t._terminated)throw new Rt(mt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Wa;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(n){if(!Ju.D())return Promise.resolve();const s=n+"main";await Ju.delete(s)})(q8(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}})),e.promise}function LZ(t){return(function(r){const n=new Wa;return r.asyncQueue.enqueueAndForget((async()=>JJ(await cS(r),n))),n.promise})(si(t=_n(t,Ss)))}function jZ(t){return mZ(si(t=_n(t,Ss)))}function FZ(t){return gZ(si(t=_n(t,Ss)))}function DZ(t){return sX(t.app,"firestore",t._databaseId.database),t._delete()}function OZ(t,e){const r=si(t=_n(t,Ss)),n=new GD;return _Z(r,t._databaseId,e,n),n}function MZ(t,e){return bZ(si(t=_n(t,Ss)),e).then((r=>r?new Ga(t,null,r.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class QD{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kf(gi.fromBase64String(e))}catch(r){throw new Rt(mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new kf(gi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Rt(mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function BZ(){return new Mf("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Rt(mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Rt(mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kr(this._lat,e._lat)||Kr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VZ=/^__.*__$/;class UZ{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new ih(e,this.data,this.fieldMask,r,this.fieldTransforms):new j1(e,this.data,r,this.fieldTransforms)}}class JD{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new ih(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function ZD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ir()}}class E_{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new E_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return a5(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ZD(this.Cu)&&VZ.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class zZ{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||$x(e)}Qu(e,r,n,s=!1){return new E_({Cu:e,methodName:r,qu:n,path:Vs.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sp(t){const e=t._freezeSettings(),r=$x(t._databaseId);return new zZ(t._databaseId,!!e.ignoreUndefinedProperties,r)}function C_(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);yS("Data must be an object, but it was:",a,n);const o=rO(n,a);let l,c;if(i.merge)l=new kl(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const g=nx(e,p,r);if(!a.contains(g))throw new Rt(mt.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);sO(d,g)||d.push(g)}l=new kl(d),c=a.fieldTransforms.filter((p=>l.covers(p.field)))}else l=null,c=a.fieldTransforms;return new UZ(new fo(o),l,c)}class Gx extends Bf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gx}}function eO(t,e,r){return new E_({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hS extends Bf{_toFieldTransform(e){return new Vx(e.path,new h1)}isEqual(e){return e instanceof hS}}class fS extends Bf{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=eO(this,e,!0),n=this.Ku.map((i=>Ep(i,r))),s=new J0(n);return new Vx(e.path,s)}isEqual(e){return e instanceof fS&&ff(this.Ku,e.Ku)}}class pS extends Bf{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=eO(this,e,!0),n=this.Ku.map((i=>Ep(i,r))),s=new Z0(n);return new Vx(e.path,s)}isEqual(e){return e instanceof pS&&ff(this.Ku,e.Ku)}}class mS extends Bf{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new f1(e.serializer,IF(e.serializer,this.$u));return new Vx(e.path,r)}isEqual(e){return e instanceof mS&&this.$u===e.$u}}function gS(t,e,r,n){const s=t.Qu(1,e,r);yS("Data must be an object, but it was:",s,n);const i=[],a=fo.empty();Df(n,((l,c)=>{const d=A_(e,l,r);c=An(c);const p=s.Nu(d);if(c instanceof Gx)i.push(d);else{const g=Ep(c,p);g!=null&&(i.push(d),a.set(d,g))}}));const o=new kl(i);return new JD(a,o,s.fieldTransforms)}function xS(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[nx(e,n,r)],l=[s];if(i.length%2!=0)throw new Rt(mt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)o.push(nx(e,i[g])),l.push(i[g+1]);const c=[],d=fo.empty();for(let g=o.length-1;g>=0;--g)if(!sO(c,o[g])){const m=o[g];let y=l[g];y=An(y);const w=a.Nu(m);if(y instanceof Gx)c.push(m);else{const _=Ep(y,w);_!=null&&(c.push(m),d.set(m,_))}}const p=new kl(c);return new JD(d,p,a.fieldTransforms)}function tO(t,e,r,n=!1){return Ep(r,t.Qu(n?4:3,e))}function Ep(t,e){if(nO(t=An(t)))return yS("Unsupported field value:",e,t),rO(t,e);if(t instanceof Bf)return(function(n,s){if(!ZD(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,s){const i=[];let a=0;for(const o of n){let l=Ep(o,s.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}})(t,e)}return(function(n,s){if((n=An(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return IF(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=ri.fromDate(n);return{timestampValue:p1(s.serializer,i)}}if(n instanceof ri){const i=new ri(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:p1(s.serializer,i)}}if(n instanceof S_)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof kf)return{bytesValue:$F(s.serializer,n._byteString)};if(n instanceof Ci){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:O8(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Wx)return(function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map((l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return P8(o.serializer,l)}))}}}}}})(n,s);throw s.Bu(`Unsupported field value: ${k_(n)}`)})(t,e)}function rO(t,e){const r={};return lF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Df(t,((n,s)=>{const i=Ep(s,e.Mu(n));i!=null&&(r[n]=i)})),{mapValue:{fields:r}}}function nO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ri||t instanceof S_||t instanceof kf||t instanceof Ci||t instanceof Bf||t instanceof Wx)}function yS(t,e,r){if(!nO(r)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(r)){const n=k_(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function nx(t,e,r){if((e=An(e))instanceof Mf)return e._internalPath;if(typeof e=="string")return A_(t,e);throw a5("Field path arguments must be of type string or ",t,!1,void 0,r)}const $Z=new RegExp("[~\\*/\\[\\]]");function A_(t,e,r){if(e.search($Z)>=0)throw a5(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Mf(...e.split("."))._internalPath}catch{throw a5(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function a5(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${n}`),a&&(l+=` in document ${s}`),l+=")"),new Rt(mt.INVALID_ARGUMENT,o+t+l)}function sO(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ci(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(N_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class qZ extends sx{data(){return super.data()}}function N_(t,e){return typeof e=="string"?A_(t,e):e instanceof Mf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Rt(mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vS{}class U1 extends vS{}function _r(t,e,...r){let n=[];e instanceof vS&&n.push(e),n=n.concat(r),(function(i){const a=i.filter((l=>l instanceof Cp)).length,o=i.filter((l=>l instanceof z1)).length;if(a>1||a>0&&o>0)throw new Rt(mt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)t=s._apply(t);return t}class z1 extends U1{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new z1(e,r,n)}_apply(e){const r=this._parse(e);return oO(e._query,r),new Ga(e.firestore,e.converter,w6(e._query,r))}_parse(e){const r=Sp(e.firestore);return(function(i,a,o,l,c,d,p){let g;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Rt(mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){HA(p,d);const m=[];for(const y of p)m.push(qA(l,i,y));g={arrayValue:{values:m}}}else g=qA(l,i,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||HA(p,d),g=tO(o,a,p,d==="in"||d==="not-in");return Rn.create(c,d,g)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function jr(t,e,r){const n=e,s=N_("where",t);return z1._create(s,n,r)}class Cp extends vS{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Cp(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:fs.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(s,i){let a=s;const o=i.getFlattenedFilters();for(const l of o)oO(a,l),a=w6(a,l)})(e._query,r),new Ga(e.firestore,e.converter,w6(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function HZ(...t){return t.forEach((e=>lO("or",e))),Cp._create("or",t)}function WZ(...t){return t.forEach((e=>lO("and",e))),Cp._create("and",t)}class T_ extends U1{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new T_(e,r)}_apply(e){const r=(function(s,i,a){if(s.startAt!==null)throw new Rt(mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Rt(mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ex(i,a)})(e._query,this._field,this._direction);return new Ga(e.firestore,e.converter,(function(s,i){const a=s.explicitOrderBy.concat([i]);return new nh(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,r))}}function Yi(t,e="asc"){const r=e,n=N_("orderBy",t);return T_._create(n,r)}class Kx extends U1{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Kx(e,r,n)}_apply(e){return new Ga(e.firestore,e.converter,Xw(e._query,this._limit,this._limitType))}}function cd(t){return HD("limit",t),Kx._create("limit",t,"F")}function GZ(t){return HD("limitToLast",t),Kx._create("limitToLast",t,"L")}class Yx extends U1{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Yx(e,r,n)}_apply(e){const r=aO(e,this.type,this._docOrFields,this._inclusive);return new Ga(e.firestore,e.converter,(function(s,i){return new nh(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)})(e._query,r))}}function KZ(...t){return Yx._create("startAt",t,!0)}function YZ(...t){return Yx._create("startAfter",t,!1)}class Xx extends U1{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Xx(e,r,n)}_apply(e){const r=aO(e,this.type,this._docOrFields,this._inclusive);return new Ga(e.firestore,e.converter,(function(s,i){return new nh(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)})(e._query,r))}}function XZ(...t){return Xx._create("endBefore",t,!1)}function QZ(...t){return Xx._create("endAt",t,!0)}function aO(t,e,r,n){if(r[0]=An(r[0]),r[0]instanceof sx)return(function(i,a,o,l,c){if(!l)throw new Rt(mt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const p of zm(i))if(p.field.isKeyField())d.push(X0(a,l.key));else{const g=l.data.field(p.field);if(u_(g))throw new Rt(mt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const m=p.field.canonicalString();throw new Rt(mt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(g)}return new vf(d,c)})(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=Sp(t.firestore);return(function(a,o,l,c,d,p){const g=a.explicitOrderBy;if(d.length>g.length)throw new Rt(mt.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let y=0;y<d.length;y++){const w=d[y];if(g[y].field.isKeyField()){if(typeof w!="string")throw new Rt(mt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof w}`);if(!T8(a)&&w.indexOf("/")!==-1)throw new Rt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${w}' contains a slash.`);const _=a.path.child(Pn.fromString(w));if(!Jt.isDocumentKey(_))throw new Rt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const S=new Jt(_);m.push(X0(o,S))}else{const _=tO(l,c,w);m.push(_)}}return new vf(m,p)})(t._query,t.firestore._databaseId,s,e,r,n)}}function qA(t,e,r){if(typeof(r=An(r))=="string"){if(r==="")throw new Rt(mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!T8(e)&&r.indexOf("/")!==-1)throw new Rt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Pn.fromString(r));if(!Jt.isDocumentKey(n))throw new Rt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return X0(t,new Jt(n))}if(r instanceof Ci)return X0(t,r._key);throw new Rt(mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${k_(r)}.`)}function HA(t,e){if(!Array.isArray(t)||t.length===0)throw new Rt(mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oO(t,e){const r=(function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new Rt(mt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Rt(mt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function lO(t,e){if(!(e instanceof z1||e instanceof Cp))throw new Rt(mt.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class wS{convertValue(e,r="none"){switch(xf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Xd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw ir()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Df(e,((s,i)=>{n[s]=this.convertValue(i,r)})),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map((a=>Zs(a.doubleValue)));return new Wx(i)}convertGeoPoint(e){return new S_(Zs(e.latitude),Zs(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=d_(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Q2(e));default:return null}}convertTimestamp(e){const r=Yd(e);return new ri(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Pn.fromString(e);mr(eD(n));const s=new gf(n.get(1),n.get(3)),i=new Jt(n.popFirst(5));return s.isEqual(r)||qi(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class JZ extends wS{constructor(e){super(),this.firestore=e}convertBytes(e){return new kf(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ci(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZZ(t){return new _1("sum",nx("sum",t))}function eee(t){return new _1("avg",nx("average",t))}function cO(){return new _1("count")}function tee(t,e){var r,n;return t instanceof _1&&e instanceof _1&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())===((n=e._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())}function ree(t,e){return dS(t.query,e.query)&&ff(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class np extends sx{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new w2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(N_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class w2 extends np{data(e={}){return super.data(e)}}class sp{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new af(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new w2(this._firestore,this._userDataWriter,n.key,n,new af(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Rt(mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((o=>{const l=new w2(s._firestore,s._userDataWriter,o.doc.key,o.doc,new af(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((o=>i||o.type!==3)).map((o=>{const l=new w2(s._firestore,s._userDataWriter,o.doc.key,o.doc,new af(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:nee(o.type),doc:l,oldIndex:c,newIndex:d}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function nee(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ir()}}function see(t,e){return t instanceof np&&e instanceof np?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof sp&&e instanceof sp&&t._firestore===e._firestore&&dS(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(t){t=_n(t,Ci);const e=_n(t.firestore,Ss);return UD(si(e),t._key).then((r=>_S(e,t,r)))}class Vf extends wS{constructor(e){super(),this.firestore=e}convertBytes(e){return new kf(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ci(this.firestore,null,r)}}function iee(t){t=_n(t,Ci);const e=_n(t.firestore,Ss),r=si(e),n=new Vf(e);return xZ(r,t._key).then((s=>new np(e,n,t._key,s,new af(s!==null&&s.hasLocalMutations,!0),t.converter)))}function aee(t){t=_n(t,Ci);const e=_n(t.firestore,Ss);return UD(si(e),t._key,{source:"server"}).then((r=>_S(e,t,r)))}function wn(t){t=_n(t,Ga);const e=_n(t.firestore,Ss),r=si(e),n=new Vf(e);return iO(t._query),zD(r,t._query).then((s=>new sp(e,n,t,s)))}function oee(t){t=_n(t,Ga);const e=_n(t.firestore,Ss),r=si(e),n=new Vf(e);return yZ(r,t._query).then((s=>new sp(e,n,t,s)))}function lee(t){t=_n(t,Ga);const e=_n(t.firestore,Ss),r=si(e),n=new Vf(e);return zD(r,t._query,{source:"server"}).then((s=>new sp(e,n,t,s)))}function cu(t,e,r){t=_n(t,Ci);const n=_n(t.firestore,Ss),s=I_(t.converter,e,r);return $1(n,[C_(Sp(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,ei.none())])}function us(t,e,r,...n){t=_n(t,Ci);const s=_n(t.firestore,Ss),i=Sp(s);let a;return a=typeof(e=An(e))=="string"||e instanceof Mf?xS(i,"updateDoc",t._key,e,r,n):gS(i,"updateDoc",t._key,e),$1(s,[a.toMutation(t._key,ei.exists(!0))])}function Kl(t){return $1(_n(t.firestore,Ss),[new F1(t._key,ei.none())])}function Qd(t,e){const r=_n(t.firestore,Ss),n=er(t),s=I_(t.converter,e);return $1(r,[C_(Sp(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,ei.exists(!1))]).then((()=>n))}function In(t,...e){var r,n,s;t=An(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||R6(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(R6(e[a])){const p=e[a];e[a]=(r=p.next)===null||r===void 0?void 0:r.bind(p),e[a+1]=(n=p.error)===null||n===void 0?void 0:n.bind(p),e[a+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let l,c,d;if(t instanceof Ci)c=_n(t.firestore,Ss),d=L1(t._key.path),l={next:p=>{e[a]&&e[a](_S(c,t,p))},error:e[a+1],complete:e[a+2]};else{const p=_n(t,Ga);c=_n(p.firestore,Ss),d=p._query;const g=new Vf(c);l={next:m=>{e[a]&&e[a](new sp(c,g,p,m))},error:e[a+1],complete:e[a+2]},iO(t._query)}return(function(g,m,y,w){const _=new __(w),S=new tS(m,_,y);return g.asyncQueue.enqueueAndForget((async()=>J8(await w1(g),S))),()=>{_.Za(),g.asyncQueue.enqueueAndForget((async()=>Z8(await w1(g),S)))}})(si(c),d,o,l)}function cee(t,e){return wZ(si(t=_n(t,Ss)),R6(e)?e:{next:e})}function $1(t,e){return(function(n,s){const i=new Wa;return n.asyncQueue.enqueueAndForget((async()=>KJ(await cS(n),s,i))),i.promise})(si(t),e)}function _S(t,e,r){const n=r.docs.get(e._key),s=new Vf(t);return new np(t,s,e._key,n,new af(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uee(t){return uO(t,{count:cO()})}function uO(t,e){const r=_n(t.firestore,Ss),n=si(r),s=oF(e,((i,a)=>new OF(a,i.aggregateType,i._internalFieldPath)));return vZ(n,t._query,s).then((i=>(function(o,l,c){const d=new Vf(o);return new QD(l,d,c)})(r,t,i)))}class dee{constructor(e){this.kind="memory",this._onlineComponentProvider=bf.provider,e?.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=_f.provider}toJSON(){return{kind:this.kind}}}class hee{constructor(e){let r;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=dO(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class fee{constructor(){this.kind="memoryEager",this._offlineComponentProvider=_f.provider}toJSON(){return{kind:this.kind}}}class pee{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new uZ(e)}}toJSON(){return{kind:this.kind}}}function mee(){return new fee}function gee(t){return new pee(t?.cacheSizeBytes)}function xee(t){return new dee(t)}function yee(t){return new hee(t)}class vee{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=bf.provider,this._offlineComponentProvider={build:r=>new oS(r,e?.cacheSizeBytes,this.forceOwnership)}}}class wee{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=bf.provider,this._offlineComponentProvider={build:r=>new OD(r,e?.cacheSizeBytes)}}}function dO(t){return new vee(t?.forceOwnership)}function _ee(){return new wee}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bee={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Sp(e)}set(e,r,n){this._verifyNotCommitted();const s=Jh(e,this._firestore),i=I_(s.converter,r,n),a=C_(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,ei.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=Jh(e,this._firestore);let a;return a=typeof(r=An(r))=="string"||r instanceof Mf?xS(this._dataReader,"WriteBatch.update",i._key,r,n,s):gS(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,ei.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Jh(e,this._firestore);return this._mutations=this._mutations.concat(new F1(r._key,ei.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Rt(mt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jh(t,e){if((t=An(t)).firestore!==e)throw new Rt(mt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Sp(r)}get(r){const n=Jh(r,this._firestore),s=new JZ(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return ir();const a=i[0];if(a.isFoundDocument())return new sx(this._firestore,s,a.key,a,n.converter);if(a.isNoDocument())return new sx(this._firestore,s,n._key,null,n.converter);throw ir()}))}set(r,n,s){const i=Jh(r,this._firestore),a=I_(i.converter,n,s),o=C_(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,s);return this._transaction.set(i._key,o),this}update(r,n,s,...i){const a=Jh(r,this._firestore);let o;return o=typeof(n=An(n))=="string"||n instanceof Mf?xS(this._dataReader,"Transaction.update",a._key,n,s,i):gS(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,o),this}delete(r){const n=Jh(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Jh(e,this._firestore),n=new Vf(this._firestore);return super.get(e).then((s=>new np(this._firestore,n,r._key,s._document,new af(!1,!1),r.converter)))}}function kee(t,e,r){t=_n(t,Ss);const n=Object.assign(Object.assign({},bee),r);return(function(i){if(i.maxAttempts<1)throw new Rt(mt.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(i,a,o){const l=new Wa;return i.asyncQueue.enqueueAndForget((async()=>{const c=await VD(i);new fZ(i.asyncQueue,c,o,a,l).au()})),l.promise})(si(t),(s=>e(new fO(t,s))),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(){return new Gx("deleteField")}function _s(){return new hS("serverTimestamp")}function _2(...t){return new fS("arrayUnion",t)}function See(...t){return new pS("arrayRemove",t)}function o5(t){return new mS("increment",t)}function Eee(t){return new Wx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t){return si(t=_n(t,Ss)),new hO(t,(e=>$1(t,e)))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cee(t,e){const r=si(t=_n(t,Ss));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return rc("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=(function(i){const a=typeof i=="string"?(function(c){try{return JSON.parse(c)}catch(d){throw new Rt(mt.INVALID_ARGUMENT,"Failed to parse JSON: "+d?.message)}})(i):i,o=[];if(Array.isArray(a.indexes))for(const l of a.indexes){const c=WA(l,"collectionGroup"),d=[];if(Array.isArray(l.fields))for(const p of l.fields){const g=A_("setIndexConfiguration",WA(p,"fieldPath"));p.arrayConfig==="CONTAINS"?d.push(new V0(g,2)):p.order==="ASCENDING"?d.push(new V0(g,0)):p.order==="DESCENDING"&&d.push(new V0(g,1))}o.push(new l1(l1.UNKNOWN_ID,c,d,c1.empty()))}return o})(e);return kZ(r,n)}function WA(t,e){if(typeof t[e]!="string")throw new Rt(mt.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function Aee(t){var e;t=_n(t,Ss);const r=GA.get(t);if(r)return r;if(((e=si(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const n=new pO(t);return GA.set(t,n),n}function Nee(t){mO(t,!0)}function Tee(t){mO(t,!1)}function Iee(t){EZ(si(t._firestore)).then((e=>Lt("deleting all persistent cache indexes succeeded"))).catch((e=>rc("deleting all persistent cache indexes failed",e)))}function mO(t,e){SZ(si(t._firestore),e).then((r=>Lt(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((r=>rc(`setting persistent cache index auto creation isEnabled=${e} failed`,r)))}const GA=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pee(t){var e;const r=(e=si(_n(t.firestore,Ss))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return r===void 0?null:m_(r,qo(t._query))._t}function Ree(t,e){var r;const n=oF(e,((i,a)=>new OF(a,i.aggregateType,i._internalFieldPath))),s=(r=si(_n(t.firestore,Ss))._onlineComponents)===null||r===void 0?void 0:r.datastore.serializer;return s===void 0?null:XF(s,_F(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lee{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return kS.instance.onExistenceFilterMismatch(e)}}class kS{constructor(){this.Uu=new Map}static get instance(){return pv||(pv=new kS,(function(r){if(Qw)throw new Error("a TestingHooksSpi instance is already set");Qw=r})(pv)),pv}et(e){this.Uu.forEach((r=>r(e)))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Uu;return n.set(r,e),()=>n.delete(r)}}let pv=null;(function(e,r=!0){(function(s){R1=s})(kp),pf(new Gd("firestore",((n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new Ss(new vX(n.getProvider("auth-internal")),new bX(n.getProvider("app-check-internal")),(function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Rt(mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gf(c.options.projectId,d)})(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Pc(DC,"4.7.3",e),Pc(DC,"4.7.3","esm2017")})();const gO=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:wS,AggregateField:_1,AggregateQuerySnapshot:QD,Bytes:kf,CACHE_SIZE_UNLIMITED:NZ,CollectionReference:lu,DocumentReference:Ci,DocumentSnapshot:np,FieldPath:Mf,FieldValue:Bf,Firestore:Ss,FirestoreError:Rt,GeoPoint:S_,LoadBundleTask:GD,PersistentCacheIndexManager:pO,Query:Ga,QueryCompositeFilterConstraint:Cp,QueryConstraint:U1,QueryDocumentSnapshot:w2,QueryEndAtConstraint:Xx,QueryFieldFilterConstraint:z1,QueryLimitConstraint:Kx,QueryOrderByConstraint:T_,QuerySnapshot:sp,QueryStartAtConstraint:Yx,SnapshotMetadata:af,Timestamp:ri,Transaction:fO,VectorValue:Wx,WriteBatch:hO,_AutoId:S8,_ByteString:gi,_DatabaseId:gf,_DocumentKey:Jt,_EmptyAppCheckTokenProvider:kX,_EmptyAuthCredentialsProvider:Kj,_FieldPath:Vs,_TestingHooks:Lee,_cast:_n,_debugAssert:xX,_internalAggregationQueryToProtoRunAggregationQueryRequest:Ree,_internalQueryToProtoQueryTarget:Pee,_isBase64Available:QX,_logWarn:rc,_validateIsNotUsedTogether:qD,addDoc:Qd,aggregateFieldEqual:tee,aggregateQuerySnapshotEqual:ree,and:WZ,arrayRemove:See,arrayUnion:_2,average:eee,clearIndexedDbPersistence:RZ,collection:Zt,collectionGroup:CZ,connectFirestoreEmulator:WD,count:cO,deleteAllPersistentCacheIndexes:Iee,deleteDoc:Kl,deleteField:L6,disableNetwork:FZ,disablePersistentCacheIndexAutoCreation:Tee,doc:er,documentId:BZ,enableIndexedDbPersistence:IZ,enableMultiTabIndexedDbPersistence:PZ,enableNetwork:jZ,enablePersistentCacheIndexAutoCreation:Nee,endAt:QZ,endBefore:XZ,ensureFirestoreConfigured:si,executeWrite:$1,getAggregateFromServer:uO,getCountFromServer:uee,getDoc:ni,getDocFromCache:iee,getDocFromServer:aee,getDocs:wn,getDocsFromCache:oee,getDocsFromServer:lee,getFirestore:KD,getPersistentCacheIndexManager:Aee,increment:o5,initializeFirestore:TZ,limit:cd,limitToLast:GZ,loadBundle:OZ,memoryEagerGarbageCollector:mee,memoryLocalCache:xee,memoryLruGarbageCollector:gee,namedQuery:MZ,onSnapshot:In,onSnapshotsInSync:cee,or:HZ,orderBy:Yi,persistentLocalCache:yee,persistentMultipleTabManager:_ee,persistentSingleTabManager:dO,query:_r,queryEqual:dS,refEqual:AZ,runTransaction:kee,serverTimestamp:_s,setDoc:cu,setIndexConfiguration:Cee,setLogLevel:gX,snapshotEqual:see,startAfter:YZ,startAt:KZ,sum:ZZ,terminate:DZ,updateDoc:us,vector:Eee,waitForPendingWrites:LZ,where:jr,writeBatch:bS},Symbol.toStringTag,{value:"Module"}));var jee="firebase",Fee="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pc(jee,Fee,"app");function SS(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function xO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Dee=xO,yO=new jx("auth","Firebase",xO());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=new _8("@firebase/auth");function Oee(t,...e){l5.logLevel<=Tn.WARN&&l5.warn(`Auth (${kp}): ${t}`,...e)}function fw(t,...e){l5.logLevel<=Tn.ERROR&&l5.error(`Auth (${kp}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(t,...e){throw CS(t,...e)}function uu(t,...e){return CS(t,...e)}function ES(t,e,r){const n=Object.assign(Object.assign({},Dee()),{[e]:r});return new jx("auth","Firebase",n).create(e,{appName:t.name})}function zd(t){return ES(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mee(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&jc(t,"argument-error"),ES(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function CS(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return yO.create(t,...e)}function Hr(t,e,...r){if(!t)throw CS(e,...r)}function Dd(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fw(e),new Error(e)}function Jd(t,e){t||Dd(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Bee(){return KA()==="http:"||KA()==="https:"}function KA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vee(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Bee()||QK()||"connection"in navigator)?navigator.onLine:!0}function Uee(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,r){this.shortDelay=e,this.longDelay=r,Jd(r>e,"Short delay should be less than long delay!"),this.isMobile=KK()||JK()}get(){return Vee()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t,e){Jd(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dd("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dd("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dd("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ee=new Qx(3e4,6e4);function oh(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ud(t,e,r,n,s={}){return wO(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=Fx(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return XK()||(c.referrerPolicy="no-referrer"),vO.fetch()(_O(t,t.config.apiHost,r,o),c)})}async function wO(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},zee),e);try{const s=new Hee(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw mv(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw mv(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw mv(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw mv(t,"user-disabled",a);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ES(t,d,c);jc(t,d)}}catch(s){if(s instanceof xu)throw s;jc(t,"network-request-failed",{message:String(s)})}}async function Jx(t,e,r,n,s={}){const i=await ud(t,e,r,n,s);return"mfaPendingCredential"in i&&jc(t,"multi-factor-auth-required",{_serverResponse:i}),i}function _O(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?AS(t.config,s):`${t.config.apiScheme}://${s}`}function qee(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Hee{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(uu(this.auth,"network-request-failed")),$ee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mv(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=uu(t,e,n);return s.customData._tokenResponse=r,s}function YA(t){return t!==void 0&&t.enterprise!==void 0}class Wee{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return qee(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Gee(t,e){return ud(t,"GET","/v2/recaptchaConfig",oh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kee(t,e){return ud(t,"POST","/v1/accounts:delete",e)}async function bO(t,e){return ud(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Yee(t,e=!1){const r=An(t),n=await r.getIdToken(e),s=NS(n);Hr(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i?.sign_in_provider;return{claims:s,token:n,authTime:b2(_3(s.auth_time)),issuedAtTime:b2(_3(s.iat)),expirationTime:b2(_3(s.exp)),signInProvider:a||null,signInSecondFactor:i?.sign_in_second_factor||null}}function _3(t){return Number(t)*1e3}function NS(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return fw("JWT malformed, contained fewer than 3 sections"),null;try{const s=Tj(r);return s?JSON.parse(s):(fw("Failed to decode base64 JWT payload"),null)}catch(s){return fw("Caught error parsing JWT payload as JSON",s?.toString()),null}}function XA(t){const e=NS(t);return Hr(e,"internal-error"),Hr(typeof e.exp<"u","internal-error"),Hr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b1(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof xu&&Xee(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Xee({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=b2(this.lastLoginAt),this.creationTime=b2(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c5(t){var e;const r=t.auth,n=await t.getIdToken(),s=await b1(t,bO(r,{idToken:n}));Hr(s?.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?kO(i.providerUserInfo):[],o=Zee(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!o?.length,d=l?c:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new F6(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function Jee(t){const e=An(t);await c5(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Zee(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function kO(t){return t.map(e=>{var{providerId:r}=e,n=SS(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ete(t,e){const r=await wO(t,{},async()=>{const n=Fx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=_O(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",vO.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function tte(t,e){return ud(t,"POST","/v2/accounts:revokeToken",oh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Hr(e.idToken,"internal-error"),Hr(typeof e.idToken<"u","internal-error"),Hr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):XA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Hr(e.length!==0,"internal-error");const r=XA(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Hr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await ete(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new qm;return n&&(Hr(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Hr(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Hr(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qm,this.toJSON())}_performRefresh(){return Dd("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(t,e){Hr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Od{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=SS(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new F6(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await b1(this,this.stsTokenManager.getToken(this.auth,e));return Hr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return Yee(this,e)}reload(){return Jee(this)}_assign(e){this!==e&&(Hr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Od(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Hr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await c5(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(iu(this.auth.app))return Promise.reject(zd(this.auth));const e=await this.getIdToken();return await b1(this,Kee(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,l,c,d;const p=(n=r.displayName)!==null&&n!==void 0?n:void 0,g=(s=r.email)!==null&&s!==void 0?s:void 0,m=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,y=(a=r.photoURL)!==null&&a!==void 0?a:void 0,w=(o=r.tenantId)!==null&&o!==void 0?o:void 0,_=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,S=(c=r.createdAt)!==null&&c!==void 0?c:void 0,T=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:M,isAnonymous:K,providerData:W,stsTokenManager:L}=r;Hr(I&&L,e,"internal-error");const A=qm.fromJSON(this.name,L);Hr(typeof I=="string",e,"internal-error"),zh(p,e.name),zh(g,e.name),Hr(typeof M=="boolean",e,"internal-error"),Hr(typeof K=="boolean",e,"internal-error"),zh(m,e.name),zh(y,e.name),zh(w,e.name),zh(_,e.name),zh(S,e.name),zh(T,e.name);const E=new Od({uid:I,auth:e,email:g,emailVerified:M,displayName:p,isAnonymous:K,photoURL:y,phoneNumber:m,tenantId:w,stsTokenManager:A,createdAt:S,lastLoginAt:T});return W&&Array.isArray(W)&&(E.providerData=W.map(D=>Object.assign({},D))),_&&(E._redirectEventId=_),E}static async _fromIdTokenResponse(e,r,n=!1){const s=new qm;s.updateFromServerResponse(r);const i=new Od({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await c5(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Hr(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?kO(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!i?.length,o=new qm;o.updateFromIdToken(n);const l=new Od({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new F6(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=new Map;function Md(t){Jd(t instanceof Function,"Expected a class definition");let e=QA.get(t);return e?(Jd(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,QA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}SO.type="NONE";const JA=SO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t,e,r){return`firebase:${t}:${e}:${r}`}class Hm{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=pw(this.userKey,s.apiKey,i),this.fullPersistenceKey=pw("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Od._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Hm(Md(JA),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Md(JA);const a=pw(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const d=await c._get(a);if(d){const p=Od._fromJSON(e,d);c!==i&&(o=p),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Hm(i,e,n):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new Hm(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IO(e))return"Blackberry";if(PO(e))return"Webos";if(CO(e))return"Safari";if((e.includes("chrome/")||AO(e))&&!e.includes("edge/"))return"Chrome";if(TO(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if(n?.length===2)return n[1]}return"Other"}function EO(t=Sa()){return/firefox\//i.test(t)}function CO(t=Sa()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AO(t=Sa()){return/crios\//i.test(t)}function NO(t=Sa()){return/iemobile/i.test(t)}function TO(t=Sa()){return/android/i.test(t)}function IO(t=Sa()){return/blackberry/i.test(t)}function PO(t=Sa()){return/webos/i.test(t)}function TS(t=Sa()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rte(t=Sa()){var e;return TS(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nte(){return ZK()&&document.documentMode===10}function RO(t=Sa()){return TS(t)||TO(t)||PO(t)||IO(t)||/windows phone/i.test(t)||NO(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(t,e=[]){let r;switch(t){case"Browser":r=ZA(Sa());break;case"Worker":r=`${ZA(Sa())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${kp}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ste{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ite(t,e={}){return ud(t,"GET","/v2/passwordPolicy",oh(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ate=6;class ote{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:ate,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lte{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eN(this),this.idTokenSubscription=new eN(this),this.beforeStateQueue=new ste(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Md(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Hm.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await bO(this,{idToken:e}),n=await Od._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(iu(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s?._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&l?.user&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Hr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await c5(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Uee()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(iu(this.app))return Promise.reject(zd(this));const r=e?An(e):null;return r&&Hr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Hr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return iu(this.app)?Promise.reject(zd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return iu(this.app)?Promise.reject(zd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Md(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ite(this),r=new ote(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new jx("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await tte(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Md(e)||this._popupRedirectResolver;Hr(r,this,"argument-error"),this.redirectPersistenceManager=await Hm.create(this,[Md(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Hr(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Hr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r?.error&&Oee(`Error while retrieving App Check token: ${r.error}`),r?.token}}function lh(t){return An(t)}class eN{constructor(e){this.auth=e,this.observer=null,this.addObserver=iY(r=>this.observer=r)}get next(){return Hr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cte(t){P_=t}function jO(t){return P_.loadJS(t)}function ute(){return P_.recaptchaEnterpriseScript}function dte(){return P_.gapiScript}function hte(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const fte="recaptcha-enterprise",pte="NO_RECAPTCHA";class mte{constructor(e){this.type=fte,this.auth=lh(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{Gee(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new Wee(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function s(i,a,o){const l=window.grecaptcha;YA(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{a(c)}).catch(()=>{a(pte)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{n(this.auth).then(o=>{if(!r&&YA(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=ute();l.length!==0&&(l+=o),jO(l).then(()=>{s(o,i,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function tN(t,e,r,n=!1){const s=new mte(t);let i;try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function u5(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await tN(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await tN(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gte(t,e){const r=bp(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(ff(i,e??{}))return s;jc(s,"already-initialized")}return r.initialize({options:e})}function xte(t,e){const r=e?.persistence||[],n=(Array.isArray(r)?r:[r]).map(Md);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function yte(t,e,r){const n=lh(t);Hr(n._canInitEmulator,n,"emulator-config-failed"),Hr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=FO(e),{host:a,port:o}=vte(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),wte()}function FO(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vte(t){const e=FO(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:rN(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:rN(a)}}}function rN(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wte(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Dd("not implemented")}_getIdTokenResponse(e){return Dd("not implemented")}_linkToIdToken(e,r){return Dd("not implemented")}_getReauthenticationResolver(e){return Dd("not implemented")}}async function _te(t,e){return ud(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bte(t,e){return Jx(t,"POST","/v1/accounts:signInWithPassword",oh(t,e))}async function DO(t,e){return ud(t,"POST","/v1/accounts:sendOobCode",oh(t,e))}async function kte(t,e){return DO(t,e)}async function Ste(t,e){return DO(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ete(t,e){return Jx(t,"POST","/v1/accounts:signInWithEmailLink",oh(t,e))}async function Cte(t,e){return Jx(t,"POST","/v1/accounts:signInWithEmailLink",oh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix extends IS{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new ix(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new ix(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return u5(e,r,"signInWithPassword",bte);case"emailLink":return Ete(e,{email:this._email,oobCode:this._password});default:jc(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return u5(e,n,"signUpPassword",_te);case"emailLink":return Cte(e,{idToken:r,email:this._email,oobCode:this._password});default:jc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wm(t,e){return Jx(t,"POST","/v1/accounts:signInWithIdp",oh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ate="http://localhost";class ip extends IS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new ip(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):jc("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=SS(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new ip(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Wm(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Wm(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Wm(e,r)}buildRequest(){const e={requestUri:Ate,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Fx(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nte(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Tte(t){const e=Wg(Gg(t)).link,r=e?Wg(Gg(e)).deep_link_id:null,n=Wg(Gg(t)).deep_link_id;return(n?Wg(Gg(n)).link:null)||n||r||e||t}class PS{constructor(e){var r,n,s,i,a,o;const l=Wg(Gg(e)),c=(r=l.apiKey)!==null&&r!==void 0?r:null,d=(n=l.oobCode)!==null&&n!==void 0?n:null,p=Nte((s=l.mode)!==null&&s!==void 0?s:null);Hr(c&&d&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=Tte(e);try{return new PS(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(){this.providerId=Ap.PROVIDER_ID}static credential(e,r){return ix._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=PS.parseLink(r);return Hr(n,"argument-error"),ix._fromEmailAndCode(e,n.code,n.tenantId)}}Ap.PROVIDER_ID="password";Ap.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ap.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx extends RS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh extends Zx{constructor(){super("facebook.com")}static credential(e){return ip._fromParams({providerId:Zh.PROVIDER_ID,signInMethod:Zh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zh.credentialFromTaggedObject(e)}static credentialFromError(e){return Zh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zh.credential(e.oauthAccessToken)}catch{return null}}}Zh.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu extends Zx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return ip._fromParams({providerId:qu.PROVIDER_ID,signInMethod:qu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return qu.credentialFromTaggedObject(e)}static credentialFromError(e){return qu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return qu.credential(r,n)}catch{return null}}}qu.GOOGLE_SIGN_IN_METHOD="google.com";qu.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef extends Zx{constructor(){super("github.com")}static credential(e){return ip._fromParams({providerId:ef.PROVIDER_ID,signInMethod:ef.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ef.credentialFromTaggedObject(e)}static credentialFromError(e){return ef.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ef.credential(e.oauthAccessToken)}catch{return null}}}ef.GITHUB_SIGN_IN_METHOD="github.com";ef.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends Zx{constructor(){super("twitter.com")}static credential(e,r){return ip._fromParams({providerId:tf.PROVIDER_ID,signInMethod:tf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return tf.credentialFromTaggedObject(e)}static credentialFromError(e){return tf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return tf.credential(r,n)}catch{return null}}}tf.TWITTER_SIGN_IN_METHOD="twitter.com";tf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ite(t,e){return Jx(t,"POST","/v1/accounts:signUp",oh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Od._fromIdTokenResponse(e,n,s),a=nN(n);return new ap({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=nN(n);return new ap({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function nN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5 extends xu{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,d5.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new d5(e,r,n,s)}}function OO(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?d5._fromErrorAndOperation(t,i,e,n):i})}async function Pte(t,e,r=!1){const n=await b1(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return ap._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MO(t,e,r=!1){const{auth:n}=t;if(iu(n.app))return Promise.reject(zd(n));const s="reauthenticate";try{const i=await b1(t,OO(n,s,e,t),r);Hr(i.idToken,n,"internal-error");const a=NS(i.idToken);Hr(a,n,"internal-error");const{sub:o}=a;return Hr(t.uid===o,n,"user-mismatch"),ap._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&jc(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BO(t,e,r=!1){if(iu(t.app))return Promise.reject(zd(t));const n="signIn",s=await OO(t,n,e),i=await ap._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function Rte(t,e){return BO(lh(t),e)}async function Lte(t,e){return MO(An(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VO(t){const e=lh(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jte(t,e,r){const n=lh(t);await u5(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Ste)}async function UO(t,e,r){if(iu(t.app))return Promise.reject(zd(t));const n=lh(t),a=await u5(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ite).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&VO(t),l}),o=await ap._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function Fte(t,e,r){return iu(t.app)?Promise.reject(zd(t)):Rte(An(t),Ap.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&VO(t),n})}async function Dte(t,e){const r=An(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await kte(r.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ote(t,e){return ud(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zO(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=An(t),i={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},a=await b1(n,Ote(n.auth,i));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const o=n.providerData.find(({providerId:l})=>l==="password");o&&(o.displayName=n.displayName,o.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function Mte(t,e,r,n){return An(t).onIdTokenChanged(e,r,n)}function Bte(t,e,r){return An(t).beforeAuthStateChanged(e,r)}function Vte(t,e,r,n){return An(t).onAuthStateChanged(e,r,n)}function Ute(t){return An(t).signOut()}const h5="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(h5,"1"),this.storage.removeItem(h5),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zte=1e3,$te=10;class qO extends $O{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);nte()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,$te):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},zte)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}qO.type="LOCAL";const qte=qO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO extends $O{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}HO.type="SESSION";const WO=HO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hte(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new R_(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),l=await Hte(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}R_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wte{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,l)=>{const c=LS("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(g.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(){return window}function Gte(t){ed().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(){return typeof ed().WorkerGlobalScope<"u"&&typeof ed().importScripts=="function"}async function Kte(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Yte(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Xte(){return GO()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO="firebaseLocalStorageDb",Qte=1,f5="firebaseLocalStorage",YO="fbase_key";class ey{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function L_(t,e){return t.transaction([f5],e?"readwrite":"readonly").objectStore(f5)}function Jte(){const t=indexedDB.deleteDatabase(KO);return new ey(t).toPromise()}function D6(){const t=indexedDB.open(KO,Qte);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(f5,{keyPath:YO})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(f5)?e(n):(n.close(),await Jte(),e(await D6()))})})}async function sN(t,e,r){const n=L_(t,!0).put({[YO]:e,value:r});return new ey(n).toPromise()}async function Zte(t,e){const r=L_(t,!1).get(e),n=await new ey(r).toPromise();return n===void 0?null:n.value}function iN(t,e){const r=L_(t,!0).delete(e);return new ey(r).toPromise()}const ere=800,tre=3;class XO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await D6(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>tre)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GO()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=R_._getInstance(Xte()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Kte(),!this.activeServiceWorker)return;this.sender=new Wte(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Yte()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await D6();return await sN(e,h5,"1"),await iN(e,h5),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>sN(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Zte(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>iN(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=L_(s,!1).getAll();return new ey(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ere)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XO.type="LOCAL";const rre=XO;new Qx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t,e){return e?Md(e):(Hr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS extends IS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wm(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Wm(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Wm(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function nre(t){return BO(t.auth,new jS(t),t.bypassAuthState)}function sre(t){const{auth:e,user:r}=t;return Hr(r,e,"internal-error"),MO(r,new jS(t),t.bypassAuthState)}async function ire(t){const{auth:e,user:r}=t;return Hr(r,e,"internal-error"),Pte(r,new jS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nre;case"linkViaPopup":case"linkViaRedirect":return ire;case"reauthViaPopup":case"reauthViaRedirect":return sre;default:jc(this.auth,"internal-error")}}resolve(e){Jd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const are=new Qx(2e3,1e4);async function aN(t,e,r){if(iu(t.app))return Promise.reject(uu(t,"operation-not-supported-in-this-environment"));const n=lh(t);Mee(t,e,RS);const s=QO(n,r);return new T0(n,"signInViaPopup",e,s).executeNotNull()}class T0 extends JO{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,T0.currentPopupAction&&T0.currentPopupAction.cancel(),T0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Hr(e,this.auth,"internal-error"),e}async onExecution(){Jd(this.filter.length===1,"Popup operations only handle one event");const e=LS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(uu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(uu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(uu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,are.get())};e()}}T0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ore="pendingRedirect",mw=new Map;class lre extends JO{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=mw.get(this.auth._key());if(!e){try{const n=await cre(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}mw.set(this.auth._key(),e)}return this.bypassAuthState||mw.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cre(t,e){const r=hre(e),n=dre(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function ure(t,e){mw.set(t._key(),e)}function dre(t){return Md(t._redirectPersistence)}function hre(t){return pw(ore,t.config.apiKey,t.name)}async function fre(t,e,r=!1){if(iu(t.app))return Promise.reject(zd(t));const n=lh(t),s=QO(n,e),a=await new lre(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pre=600*1e3;class mre{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gre(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!ZO(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(uu(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pre&&this.cachedEventUids.clear(),this.cachedEventUids.has(oN(e))}saveEventToCache(e){this.cachedEventUids.add(oN(e)),this.lastProcessedEventTime=Date.now()}}function oN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ZO({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function gre(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZO(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xre(t,e={}){return ud(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yre=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vre=/^https?/;async function wre(t){if(t.config.emulator)return;const{authorizedDomains:e}=await xre(t);for(const r of e)try{if(_re(r))return}catch{}jc(t,"unauthorized-domain")}function _re(t){const e=j6(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!vre.test(r))return!1;if(yre.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bre=new Qx(3e4,6e4);function lN(){const t=ed().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function kre(t){return new Promise((e,r)=>{var n,s,i;function a(){lN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lN(),r(uu(t,"network-request-failed"))},timeout:bre.get()})}if(!((s=(n=ed().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ed().gapi)===null||i===void 0)&&i.load)a();else{const o=hte("iframefcb");return ed()[o]=()=>{gapi.load?a():r(uu(t,"network-request-failed"))},jO(`${dte()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw gw=null,e})}let gw=null;function Sre(t){return gw=gw||kre(t),gw}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ere=new Qx(5e3,15e3),Cre="__/auth/iframe",Are="emulator/auth/iframe",Nre={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tre=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ire(t){const e=t.config;Hr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?AS(e,Are):`https://${t.config.authDomain}/${Cre}`,n={apiKey:e.apiKey,appName:t.name,v:kp},s=Tre.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Fx(n).slice(1)}`}async function Pre(t){const e=await Sre(t),r=ed().gapi;return Hr(r,t,"internal-error"),e.open({where:document.body,url:Ire(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nre,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=uu(t,"network-request-failed"),o=ed().setTimeout(()=>{i(a)},Ere.get());function l(){ed().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rre={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Lre=500,jre=600,Fre="_blank",Dre="http://localhost";class cN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ore(t,e,r,n=Lre,s=jre){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Rre),{width:n.toString(),height:s.toString(),top:i,left:a}),c=Sa().toLowerCase();r&&(o=AO(c)?Fre:r),EO(c)&&(e=e||Dre,l.scrollbars="yes");const d=Object.entries(l).reduce((g,[m,y])=>`${g}${m}=${y},`,"");if(rte(c)&&o!=="_self")return Mre(e||"",o),new cN(null);const p=window.open(e||"",o,d);Hr(p,t,"popup-blocked");try{p.focus()}catch{}return new cN(p)}function Mre(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bre="__/auth/handler",Vre="emulator/auth/handler",Ure=encodeURIComponent("fac");async function uN(t,e,r,n,s,i){Hr(t.config.authDomain,t,"auth-domain-config-required"),Hr(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:kp,eventId:s};if(e instanceof RS){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",sY(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))a[d]=p}if(e instanceof Zx){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),c=l?`#${Ure}=${encodeURIComponent(l)}`:"";return`${zre(t)}?${Fx(o).slice(1)}${c}`}function zre({config:t}){return t.emulator?AS(t,Vre):`https://${t.authDomain}/${Bre}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3="webStorageSupport";class $re{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WO,this._completeRedirectFn=fre,this._overrideRedirectResult=ure}async _openPopup(e,r,n,s){var i;Jd((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await uN(e,r,n,j6(),s);return Ore(e,a,LS())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await uN(e,r,n,j6(),s);return Gte(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(Jd(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Pre(e),n=new mre(e);return r.register("authEvent",s=>(Hr(s?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(b3,{type:b3},s=>{var i;const a=(i=s?.[0])===null||i===void 0?void 0:i[b3];a!==void 0&&r(!!a),jc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=wre(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return RO()||CO()||TS()}}const qre=$re;var dN="@firebase/auth",hN="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hre{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Hr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wre(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Gre(t){pf(new Gd("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Hr(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LO(t)},c=new lte(n,s,i,l);return xte(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),pf(new Gd("auth-internal",e=>{const r=lh(e.getProvider("auth").getImmediate());return(n=>new Hre(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pc(dN,hN,Wre(t)),Pc(dN,hN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kre=300,Yre=Rj("authIdTokenMaxAge")||Kre;let fN=null;const Xre=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Yre)return;const s=r?.token;fN!==s&&(fN=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function eM(t=l_()){const e=bp(t,"auth");if(e.isInitialized())return e.getImmediate();const r=gte(t,{popupRedirectResolver:qre,persistence:[rre,qte,WO]}),n=Rj("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=Xre(i.toString());Bte(r,a,()=>a(r.currentUser)),Mte(r,o=>a(o))}}const s=Ij("auth");return s&&yte(r,`http://${s}`),r}function Qre(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cte({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=uu("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",Qre().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Gre("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM="firebasestorage.googleapis.com",rM="storageBucket",Jre=120*1e3,Zre=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends xu{constructor(e,r,n=0){super(k3(e),`Firebase Storage: ${r} (${k3(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ii.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return k3(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ni;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ni||(Ni={}));function k3(t){return"storage/"+t}function FS(){const t="An unknown error occurred, please check the error payload for server response.";return new Ii(Ni.UNKNOWN,t)}function ene(t){return new Ii(Ni.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function tne(t){return new Ii(Ni.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function rne(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ii(Ni.UNAUTHENTICATED,t)}function nne(){return new Ii(Ni.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function sne(t){return new Ii(Ni.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function ine(){return new Ii(Ni.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ane(){return new Ii(Ni.CANCELED,"User canceled the upload/download.")}function one(t){return new Ii(Ni.INVALID_URL,"Invalid URL '"+t+"'.")}function lne(t){return new Ii(Ni.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function cne(){return new Ii(Ni.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rM+"' property when initializing the app?")}function une(){return new Ii(Ni.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function dne(){return new Ii(Ni.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function hne(t){return new Ii(Ni.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function O6(t){return new Ii(Ni.INVALID_ARGUMENT,t)}function nM(){return new Ii(Ni.APP_DELETED,"The Firebase app was deleted.")}function fne(t){return new Ii(Ni.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function k2(t,e){return new Ii(Ni.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Mg(t){throw new Ii(Ni.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Zl.makeFromUrl(e,r)}catch{return new Zl(e,"")}if(n.path==="")return n;throw lne(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function c(M){M.path_=decodeURIComponent(M.path)}const d="v[A-Za-z0-9_]+",p=r.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",m=new RegExp(`^https?://${p}/${d}/b/${s}/o${g}`,"i"),y={bucket:1,path:3},w=r===tM?"(?:storage.googleapis.com|storage.cloud.google.com)":r,_="([^?#]*)",S=new RegExp(`^https?://${w}/${s}/${_}`,"i"),I=[{regex:o,indices:l,postModify:i},{regex:m,indices:y,postModify:c},{regex:S,indices:{bucket:1,path:2},postModify:c}];for(let M=0;M<I.length;M++){const K=I[M],W=K.regex.exec(e);if(W){const L=W[K.indices.bucket];let A=W[K.indices.path];A||(A=""),n=new Zl(L,A),K.postModify(n);break}}if(n==null)throw one(e);return n}}class pne{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mne(t,e,r){let n=1,s=null,i=null,a=!1,o=0;function l(){return o===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function p(_){s=setTimeout(()=>{s=null,t(m,l())},_)}function g(){i&&clearTimeout(i)}function m(_,...S){if(c){g();return}if(_){g(),d.call(null,_,...S);return}if(l()||a){g(),d.call(null,_,...S);return}n<64&&(n*=2);let I;o===1?(o=2,I=0):I=(n+Math.random())*1e3,p(I)}let y=!1;function w(_){y||(y=!0,g(),!c&&(s!==null?(_||(o=2),clearTimeout(s),p(0)):_||(o=1)))}return p(0),i=setTimeout(()=>{a=!0,w(!0)},r),w}function gne(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xne(t){return t!==void 0}function yne(t){return typeof t=="object"&&!Array.isArray(t)}function DS(t){return typeof t=="string"||t instanceof String}function pN(t){return OS()&&t instanceof Blob}function OS(){return typeof Blob<"u"}function mN(t,e,r,n){if(n<e)throw O6(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw O6(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function sM(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var U0;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(U0||(U0={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vne(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wne{constructor(e,r,n,s,i,a,o,l,c,d,p,g=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new gv(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const o=i.getErrorCode()===U0.NO_ERROR,l=i.getStatus();if(!o||vne(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===U0.ABORT;n(!1,new gv(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new gv(c,i))})},r=(n,s)=>{const i=this.resolve_,a=this.reject_,o=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());xne(l)?i(l):i()}catch(l){a(l)}else if(o!==null){const l=FS();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(s.canceled){const l=this.appDelete_?nM():ane();a(l)}else{const l=ine();a(l)}};this.canceled_?r(!1,new gv(!1,null,!0)):this.backoffId_=mne(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gne(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gv{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function _ne(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function bne(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kne(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Sne(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Ene(t,e,r,n,s,i,a=!0){const o=sM(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return kne(c,e),_ne(c,r),bne(c,i),Sne(c,n),new wne(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cne(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Ane(...t){const e=Cne();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(OS())return new Blob(t);throw new Ii(Ni.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Nne(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tne(t){if(typeof atob>"u")throw hne("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class S3{constructor(e,r){this.data=e,this.contentType=r||null}}function Ine(t,e){switch(t){case Gu.RAW:return new S3(iM(e));case Gu.BASE64:case Gu.BASE64URL:return new S3(aM(t,e));case Gu.DATA_URL:return new S3(Rne(e),Lne(e))}throw FS()}function iM(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,a=t.charCodeAt(++r);n=65536|(i&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function Pne(t){let e;try{e=decodeURIComponent(t)}catch{throw k2(Gu.DATA_URL,"Malformed data URL.")}return iM(e)}function aM(t,e){switch(t){case Gu.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw k2(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Gu.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw k2(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=Tne(e)}catch(s){throw s.message.includes("polyfill")?s:k2(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}class oM{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw k2(Gu.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=jne(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function Rne(t){const e=new oM(t);return e.base64?aM(Gu.BASE64,e.rest):Pne(e.rest)}function Lne(t){return new oM(t).contentType}function jne(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,r){let n=0,s="";pN(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,r){if(pN(this.data_)){const n=this.data_,s=Nne(n,e,r);return s===null?null:new rf(s)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new rf(n,!0)}}static getBlob(...e){if(OS()){const r=e.map(n=>n instanceof rf?n.data_:n);return new rf(Ane.apply(null,r))}else{const r=e.map(a=>DS(a)?Ine(Gu.RAW,a).data:a.data_);let n=0;r.forEach(a=>{n+=a.byteLength});const s=new Uint8Array(n);let i=0;return r.forEach(a=>{for(let o=0;o<a.length;o++)s[i++]=a[o]}),new rf(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(t){let e;try{e=JSON.parse(t)}catch{return null}return yne(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fne(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Dne(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function cM(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function One(t,e){return e}class tl{constructor(e,r,n,s){this.server=e,this.local=r||e,this.writable=!!n,this.xform=s||One}}let xv=null;function Mne(t){return!DS(t)||t.length<2?t:cM(t)}function uM(){if(xv)return xv;const t=[];t.push(new tl("bucket")),t.push(new tl("generation")),t.push(new tl("metageneration")),t.push(new tl("name","fullPath",!0));function e(i,a){return Mne(a)}const r=new tl("name");r.xform=e,t.push(r);function n(i,a){return a!==void 0?Number(a):a}const s=new tl("size");return s.xform=n,t.push(s),t.push(new tl("timeCreated")),t.push(new tl("updated")),t.push(new tl("md5Hash",null,!0)),t.push(new tl("cacheControl",null,!0)),t.push(new tl("contentDisposition",null,!0)),t.push(new tl("contentEncoding",null,!0)),t.push(new tl("contentLanguage",null,!0)),t.push(new tl("contentType",null,!0)),t.push(new tl("metadata","customMetadata",!0)),xv=t,xv}function Bne(t,e){function r(){const n=t.bucket,s=t.fullPath,i=new Zl(n,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function Vne(t,e,r){const n={};n.type="file";const s=r.length;for(let i=0;i<s;i++){const a=r[i];n[a.local]=a.xform(n,e[a.server])}return Bne(n,t),n}function dM(t,e,r){const n=lM(e);return n===null?null:Vne(t,n,r)}function Une(t,e,r,n){const s=lM(e);if(s===null||!DS(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,p=t.fullPath,g="/b/"+a(d)+"/o/"+a(p),m=MS(g,r,n),y=sM({alt:"media",token:c});return m+y})[0]}function zne(t,e){const r={},n=e.length;for(let s=0;s<n;s++){const i=e[s];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}class hM{constructor(e,r,n,s){this.url=e,this.method=r,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(t){if(!t)throw FS()}function $ne(t,e){function r(n,s){const i=dM(t,s,e);return fM(i!==null),i}return r}function qne(t,e){function r(n,s){const i=dM(t,s,e);return fM(i!==null),Une(i,s,t.host,t._protocol)}return r}function pM(t){function e(r,n){let s;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?s=nne():s=rne():r.getStatus()===402?s=tne(t.bucket):r.getStatus()===403?s=sne(t.path):s=n,s.status=r.getStatus(),s.serverResponse=n.serverResponse,s}return e}function Hne(t){const e=pM(t);function r(n,s){let i=e(n,s);return n.getStatus()===404&&(i=ene(t.path)),i.serverResponse=s.serverResponse,i}return r}function Wne(t,e,r){const n=e.fullServerUrl(),s=MS(n,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,o=new hM(s,i,qne(t,r),a);return o.errorHandler=Hne(e),o}function Gne(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Kne(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=Gne(null,e)),n}function Yne(t,e,r,n,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let I="";for(let M=0;M<2;M++)I=I+Math.random().toString().slice(2);return I}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=Kne(e,n,s),d=zne(c,r),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,g=`\r
--`+l+"--",m=rf.getBlob(p,n,g);if(m===null)throw une();const y={name:c.fullPath},w=MS(i,t.host,t._protocol),_="POST",S=t.maxUploadRetryTime,T=new hM(w,_,$ne(t,r),S);return T.urlParams=y,T.headers=a,T.body=m.uploadData(),T.errorHandler=pM(e),T}class Xne{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=U0.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=U0.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=U0.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,s){if(this.sent_)throw Mg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Mg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Mg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Mg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Mg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Qne extends Xne{initXhr(){this.xhr_.responseType="text"}}function mM(){return new Qne}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,r){this._service=e,r instanceof Zl?this._location=r:this._location=Zl.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new op(e,r)}get root(){const e=new Zl(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cM(this._location.path)}get storage(){return this._service}get parent(){const e=Fne(this._location.path);if(e===null)return null;const r=new Zl(this._location.bucket,e);return new op(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw fne(e)}}function Jne(t,e,r){t._throwIfRoot("uploadBytes");const n=Yne(t.storage,t._location,uM(),new rf(e,!0),r);return t.storage.makeRequestWithTokens(n,mM).then(s=>({metadata:s,ref:t}))}function Zne(t){t._throwIfRoot("getDownloadURL");const e=Wne(t.storage,t._location,uM());return t.storage.makeRequestWithTokens(e,mM).then(r=>{if(r===null)throw dne();return r})}function ese(t,e){const r=Dne(t._location.path,e),n=new Zl(t._location.bucket,r);return new op(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tse(t){return/^[A-Za-z]+:\/\//.test(t)}function rse(t,e){return new op(t,e)}function gM(t,e){if(t instanceof BS){const r=t;if(r._bucket==null)throw cne();const n=new op(r,r._bucket);return e!=null?gM(n,e):n}else return e!==void 0?ese(t,e):t}function nse(t,e){if(e&&tse(e)){if(t instanceof BS)return rse(t,e);throw O6("To use ref(service, url), the first argument must be a Storage instance.")}else return gM(t,e)}function gN(t,e){const r=e?.[rM];return r==null?null:Zl.makeFromBucketSpec(r,t)}function sse(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:Lj(s,t.app.options.projectId))}class BS{constructor(e,r,n,s,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=tM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Jre,this._maxUploadRetryTime=Zre,this._requests=new Set,s!=null?this._bucket=Zl.makeFromBucketSpec(s,this._host):this._bucket=gN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zl.makeFromBucketSpec(this._url,e):this._bucket=gN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new op(this,e)}_makeRequest(e,r,n,s,i=!0){if(this._deleted)return new pne(nM());{const a=Ene(e,this._appId,n,s,r,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const xN="@firebase/storage",yN="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM="storage";function ise(t,e,r){return t=An(t),Jne(t,e,r)}function ase(t){return t=An(t),Zne(t)}function ose(t,e){return t=An(t),nse(t,e)}function lse(t=l_(),e){t=An(t);const n=bp(t,xM).getImmediate({identifier:e}),s=w8("storage");return s&&cse(n,...s),n}function cse(t,e,r,n={}){sse(t,e,r,n)}function use(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new BS(r,n,s,e,kp)}function dse(){pf(new Gd(xM,use,"PUBLIC").setMultipleInstances(!0)),Pc(xN,yN,""),Pc(xN,yN,"esm2017")}dse();const hse={apiKey:"AIzaSyB1GNt6gatBiZyVDj9wZP4TSnefXsohCho",authDomain:"healthapp-f4173.firebaseapp.com",projectId:"healthapp-f4173",storageBucket:"healthapp-f4173.firebasestorage.app",messagingSenderId:"169032569236",appId:"1:169032569236:web:38585fcf19c35ba1737f81"},VS=Mj(hse),Yh=eM(VS),ht=KD(VS),fse=lse(VS);function M6(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function yM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bM(n.key),n)}}function vM(t,e,r){return e&&vN(t.prototype,e),r&&vN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function wM(t,e,r){return(e=bM(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),r.push.apply(r,n)}return r}function Ei(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wN(Object(r),!0).forEach((function(n){wM(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wN(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}function B6(t,e){if(t==null)return{};var r,n,s=(function(a,o){if(a==null)return{};var l={};for(var c in a)if({}.hasOwnProperty.call(a,c)){if(o.indexOf(c)!==-1)continue;l[c]=a[c]}return l})(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function pse(t,e){return(function(r){if(Array.isArray(r))return r})(t)||(function(r,n){var s=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(s!=null){var i,a,o,l,c=[],d=!0,p=!1;try{if(o=(s=s.call(r)).next,n!==0)for(;!(d=(i=o.call(s)).done)&&(c.push(i.value),c.length!==n);d=!0);}catch(g){p=!0,a=g}finally{try{if(!d&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(p)throw a}}return c}})(t,e)||kM(t,e)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function _M(t){return(function(e){if(Array.isArray(e))return M6(e)})(t)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(t)||kM(t)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function bM(t){var e=(function(r,n){if(typeof r!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var i=s.call(r,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)})(t,"string");return typeof e=="symbol"?e:e+""}function lp(t){return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lp(t)}function kM(t,e){if(t){if(typeof t=="string")return M6(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M6(t,e):void 0}}var US={cookieTestUrl:"https://legacy-staging.paystack.co/test-iframe/start.html",publishableKey:"uFmz/uE/SDT6GupOrSEXIZXGByjQ0zFkPyc9LqKHFqnTI0WPN3JS5kQPo/j9or0TOXlqMQj2lzHn/UGsQT4XeQ==",publicKey:`-----BEGIN PUBLIC KEY-----\r
MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBALhZs/7hP0g0+hrqTq0hFyGVxgco0NMx\r
ZD8nPS6ihxap0yNFjzdyUuZED6P4/aK9Ezl5ajEI9pcx5/1BrEE+F3kCAwEAAQ==\r
-----END PUBLIC KEY-----`,applePayVersion:6,applePayValidateSessionPath:"applepay/validate-session/",applePayChargePath:"applepay/charge"};Ei(Ei({},US),{},{checkoutUrl:"http://localhost:8081/",paymentBaseUrl:"https://legacy-staging.paystack.co/",paystackApiUrl:"https://studio-api.paystack.co/",siteUrl:"https://paystack.com",pusherKey:"1c7b262ee18455815893",pusherUrl:"http://localhost:8081/static/vendor/pusher.min.js"});var mse=Ei(Ei({},US),{},{checkoutUrl:"https://checkout-studio.paystack.com/",paymentBaseUrl:"https://legacy-staging.paystack.co/",paystackApiUrl:"https://studio-api.paystack.co/",siteUrl:"https://beta.paystack.com",pusherKey:"1c7b262ee18455815893",pusherUrl:"https://checkout-studio.paystack.com/static/vendor/pusher.min.js"}),wl={production:Ei(Ei({},US),{},{checkoutUrl:"https://checkout.paystack.com/",paymentBaseUrl:"https://standard.paystack.co/",paystackApiUrl:"https://api.paystack.co/",siteUrl:"https://paystack.com",pusherKey:"8e4b9b7ca3418bd5cdc8",pusherUrl:"https://checkout.paystack.com/static/vendor/pusher.min.js"})}.production||mse;function SM(t,e){var r=[];return Object.keys(t).forEach((function(n){var s=e?"".concat(e,"[").concat(n,"]"):n,i=t[s];r.push(i!==null&&(typeof v>"u"?"undefined":lp(v))==="object"?SM(i,s):"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(i)))})),r.join("&")}function Em(){return document.currentScript||(t=document.getElementsByTagName("script"))[t.length-1];var t}function _N(){var t=[],e=Em();if(e){var r=Array.prototype.slice.call(e.attributes);t=Object.keys(r).filter((function(n){var s=r[n].nodeName;return s&&s.indexOf("data")>-1})).map((function(n){return r[n].nodeName}))}return t}var EM=`
  <svg id="inline-button-wordmark--white" width="137" height="13" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M.037 5.095l1.075-.135c-.011-.774-.025-1.944-.013-2.149C1.19 1.364 2.38.134 3.81.013 3.9.006 3.99.002 4.077 0a2.947 2.947 0 0 1 2.046.76c.574.509.95 1.26 1.008 2.007.015.192.01 1.491.01 2.257l1.096.163L8.2 11.44 4.093 12 0 11.346l.037-6.251zm4.106-.514l1.724.256c-.007-.933-.05-2.295-.26-2.654-.319-.545-.846-.867-1.443-.88h-.063c-.607.008-1.138.322-1.458.864-.222.378-.266 1.66-.265 2.637l1.765-.223zM18.228 10.108c-.576 0-1.064-.072-1.464-.216a2.864 2.864 0 0 1-.972-.6 2.552 2.552 0 0 1-.588-.864 4.067 4.067 0 0 1-.252-1.044h1.008c.032.256.088.5.168.732.08.224.204.424.372.6.168.168.388.304.66.408.28.096.636.144 1.068.144.28 0 .536-.036.768-.108.24-.08.448-.192.624-.336.176-.144.312-.316.408-.516.104-.2.156-.42.156-.66 0-.24-.032-.448-.096-.624a1.02 1.02 0 0 0-.336-.468 1.885 1.885 0 0 0-.636-.324 6.4 6.4 0 0 0-1.008-.228 8.79 8.79 0 0 1-1.212-.276 3.246 3.246 0 0 1-.9-.432 1.982 1.982 0 0 1-.564-.672c-.128-.272-.192-.6-.192-.984 0-.328.068-.632.204-.912.136-.288.324-.536.564-.744.248-.208.54-.372.876-.492.336-.12.708-.18 1.116-.18.864 0 1.548.204 2.052.612.512.4.812.984.9 1.752h-.936c-.104-.544-.316-.932-.636-1.164-.32-.24-.78-.36-1.38-.36-.592 0-1.04.132-1.344.396a1.255 1.255 0 0 0-.444.996c0 .208.024.396.072.564.056.16.156.3.3.42.152.12.36.228.624.324a6.72 6.72 0 0 0 1.068.228c.48.072.9.168 1.26.288.36.12.664.276.912.468s.432.428.552.708c.128.28.192.624.192 1.032 0 .36-.076.696-.228 1.008a2.472 2.472 0 0 1-.612.804c-.264.224-.58.4-.948.528-.36.128-.752.192-1.176.192zM25.355 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM32.091 10.108c-.44 0-.848-.072-1.224-.216a3.054 3.054 0 0 1-.972-.636 3.12 3.12 0 0 1-.648-1.008 3.626 3.626 0 0 1-.228-1.32v-.096c0-.48.08-.916.24-1.308.16-.4.376-.74.648-1.02.28-.28.604-.496.972-.648.376-.16.772-.24 1.188-.24.328 0 .644.04.948.12.312.08.588.208.828.384.248.168.456.392.624.672.168.28.276.62.324 1.02h-.984c-.08-.496-.284-.848-.612-1.056-.32-.208-.696-.312-1.128-.312a1.93 1.93 0 0 0-.804.168c-.24.112-.452.272-.636.48a2.23 2.23 0 0 0-.42.744 2.991 2.991 0 0 0-.156.996v.096c0 .776.188 1.364.564 1.764.384.392.88.588 1.488.588.224 0 .436-.032.636-.096a1.651 1.651 0 0 0 .96-.768c.112-.192.18-.416.204-.672h.924a2.595 2.595 0 0 1-.276.948 2.386 2.386 0 0 1-.576.744c-.24.208-.52.372-.84.492-.32.12-.668.18-1.044.18zM38.335 10.108a2.83 2.83 0 0 1-.876-.132 1.724 1.724 0 0 1-.684-.42 2.145 2.145 0 0 1-.456-.756c-.112-.304-.168-.672-.168-1.104V3.724h.996v3.924c0 .552.116.956.348 1.212.24.256.608.384 1.104.384.224 0 .44-.036.648-.108.208-.072.392-.18.552-.324.16-.144.288-.324.384-.54.096-.216.144-.464.144-.744V3.724h.996V10h-.996v-.996c-.144.296-.388.556-.732.78-.336.216-.756.324-1.26.324zM43.216 3.724h.996v1.128c.2-.352.452-.64.756-.864.312-.232.748-.356 1.308-.372v.936a4.461 4.461 0 0 0-.852.12 1.647 1.647 0 0 0-.66.324 1.472 1.472 0 0 0-.408.612c-.096.248-.144.564-.144.948V10h-.996V3.724zM50 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM56.496 10.108c-.408 0-.788-.068-1.14-.204a2.683 2.683 0 0 1-.9-.612 3.01 3.01 0 0 1-.588-.984 4.01 4.01 0 0 1-.204-1.32v-.096c0-.48.072-.92.216-1.32.144-.4.344-.744.6-1.032.256-.296.564-.524.924-.684.36-.16.756-.24 1.188-.24.528 0 .956.112 1.284.336.328.216.584.476.768.78V.724h.996V10h-.996V8.92c-.088.152-.208.3-.36.444a2.792 2.792 0 0 1-.516.384 2.874 2.874 0 0 1-.6.252c-.216.072-.44.108-.672.108zm.108-.828c.288 0 .56-.048.816-.144.256-.096.476-.24.66-.432.184-.2.328-.448.432-.744.112-.304.168-.656.168-1.056v-.096c0-.808-.18-1.404-.54-1.788-.352-.384-.836-.576-1.452-.576-.624 0-1.112.208-1.464.624-.352.416-.528 1.008-.528 1.776v.096c0 .392.048.736.144 1.032.104.296.24.54.408.732.176.192.38.336.612.432.232.096.48.144.744.144zM67.712 10.108c-.512 0-.948-.112-1.308-.336a2.38 2.38 0 0 1-.816-.804V10h-.996V.724h.996V4.78a1.92 1.92 0 0 1 .348-.432c.152-.144.32-.268.504-.372.192-.112.396-.2.612-.264.216-.064.436-.096.66-.096.408 0 .788.072 1.14.216.352.144.652.352.9.624.256.272.456.604.6.996.144.392.216.832.216 1.32v.096c0 .48-.068.92-.204 1.32a3.103 3.103 0 0 1-.576 1.02 2.583 2.583 0 0 1-.9.672 2.937 2.937 0 0 1-1.176.228zm-.096-.828c.624 0 1.1-.2 1.428-.6.328-.408.492-.996.492-1.764V6.82c0-.4-.052-.748-.156-1.044a2.095 2.095 0 0 0-.42-.732 1.53 1.53 0 0 0-.612-.444 1.798 1.798 0 0 0-.744-.156c-.288 0-.56.048-.816.144a1.71 1.71 0 0 0-.648.444c-.184.192-.328.44-.432.744a3.152 3.152 0 0 0-.156 1.044v.096c0 .8.192 1.396.576 1.788.384.384.88.576 1.488.576zM73.63 9.352l-2.46-5.628h1.068l1.92 4.5 1.74-4.5h1.02l-3.468 8.46h-1.008l1.188-2.832zM87.127 3.669A3.138 3.138 0 0 0 86.1 2.95a3.09 3.09 0 0 0-1.228-.25c-.448 0-.848.086-1.187.26a2.199 2.199 0 0 0-.662.497v-.191a.387.387 0 0 0-.214-.348.323.323 0 0 0-.14-.03h-1.315a.314.314 0 0 0-.254.116.377.377 0 0 0-.1.262v8.97c0 .1.034.188.1.258a.34.34 0 0 0 .254.103h1.341a.342.342 0 0 0 .244-.103.336.336 0 0 0 .11-.259v-3.06c.178.202.417.357.702.464.35.134.72.203 1.093.203.43 0 .848-.082 1.242-.248a3.124 3.124 0 0 0 1.04-.724c.305-.326.545-.709.707-1.128a3.93 3.93 0 0 0 .263-1.477c0-.54-.086-1.037-.263-1.477a3.387 3.387 0 0 0-.706-1.12zm-1.204 3.24c-.073.19-.18.362-.315.51a1.415 1.415 0 0 1-1.065.466c-.2.001-.4-.04-.584-.12a1.484 1.484 0 0 1-.49-.346 1.593 1.593 0 0 1-.32-.51 1.738 1.738 0 0 1-.115-.63c0-.224.04-.435.115-.631a1.532 1.532 0 0 1 .804-.846c.185-.086.386-.13.59-.129.215 0 .414.044.593.13.177.083.338.199.474.341a1.622 1.622 0 0 1 .425 1.135c0 .225-.037.436-.112.63zM95.298 2.89h-1.33a.339.339 0 0 0-.246.11.384.384 0 0 0-.108.266v.166a1.856 1.856 0 0 0-.602-.472 2.525 2.525 0 0 0-1.166-.258 3.227 3.227 0 0 0-2.284.964 3.554 3.554 0 0 0-.734 1.123 3.827 3.827 0 0 0-.275 1.477c0 .54.092 1.037.275 1.477.184.434.427.817.728 1.128a3.146 3.146 0 0 0 2.277.973c.437 0 .834-.088 1.173-.259.25-.13.456-.287.608-.471v.177a.34.34 0 0 0 .11.259.341.341 0 0 0 .244.104h1.33a.324.324 0 0 0 .25-.105.349.349 0 0 0 .102-.258V3.267a.377.377 0 0 0-.1-.262.325.325 0 0 0-.252-.115zM93.502 6.9a1.55 1.55 0 0 1-.312.511c-.136.143-.296.26-.473.344-.178.085-.38.129-.596.129-.207 0-.407-.044-.59-.13a1.501 1.501 0 0 1-.791-.855 1.766 1.766 0 0 1-.112-.62c0-.225.038-.436.112-.632.075-.193.181-.364.314-.504.137-.143.3-.26.478-.342.182-.085.382-.129.59-.129.215 0 .417.044.595.13.178.085.338.2.473.341a1.623 1.623 0 0 1 .424 1.135c0 .215-.037.424-.112.622zM108.567 6.094a2.265 2.265 0 0 0-.654-.402c-.247-.101-.509-.181-.785-.235l-1.014-.204c-.26-.05-.441-.117-.543-.203a.328.328 0 0 1-.136-.264c0-.11.063-.2.189-.282.137-.086.329-.13.566-.13.26 0 .518.053.757.157.243.106.471.226.67.36.295.187.546.162.727-.053l.487-.57a.543.543 0 0 0 .152-.357c0-.128-.064-.245-.185-.351-.207-.184-.533-.378-.971-.568-.437-.192-.987-.29-1.637-.29-.427 0-.82.058-1.168.172-.35.116-.65.276-.893.474-.245.204-.438.44-.57.713a2 2 0 0 0-.198.875c0 .56.167 1.017.496 1.358.328.333.766.56 1.304.67l1.054.232c.3.062.528.132.675.21.129.067.19.163.19.297 0 .12-.061.227-.188.324-.133.104-.342.155-.622.155a1.83 1.83 0 0 1-.831-.19 3.056 3.056 0 0 1-.678-.458.995.995 0 0 0-.307-.17c-.126-.037-.268.003-.431.13l-.583.461c-.169.145-.24.32-.209.522.029.194.19.394.491.62.269.193.614.368 1.029.518.415.151.901.229 1.453.229.444 0 .854-.058 1.215-.172.362-.119.681-.278.941-.48a2.056 2.056 0 0 0 .819-1.663c0-.319-.053-.6-.165-.836a1.843 1.843 0 0 0-.447-.6zM114.383 7.73a.363.363 0 0 0-.295-.192.55.55 0 0 0-.343.113c-.095.062-.198.11-.306.141a.75.75 0 0 1-.426.013.43.43 0 0 1-.181-.093.554.554 0 0 1-.143-.204.92.92 0 0 1-.059-.362v-2.46h1.731c.099 0 .188-.04.266-.117a.368.368 0 0 0 .112-.26V3.268a.369.369 0 0 0-.115-.268.38.38 0 0 0-.263-.109h-1.732V1.216a.354.354 0 0 0-.108-.27.347.347 0 0 0-.243-.104h-1.344a.36.36 0 0 0-.34.226.371.371 0 0 0-.027.148V2.89h-.767a.324.324 0 0 0-.255.115.385.385 0 0 0-.098.262V4.31a.4.4 0 0 0 .212.346c.044.021.092.032.14.03h.768v2.925c0 .39.069.726.2 1.003.132.274.305.504.514.676.217.178.465.31.731.388.27.084.551.126.833.126.385 0 .75-.061 1.094-.18a2.13 2.13 0 0 0 .861-.552c.152-.181.17-.381.046-.581l-.463-.76zM121.672 2.89h-1.329a.339.339 0 0 0-.244.11.39.39 0 0 0-.08.122.394.394 0 0 0-.027.144v.166a1.906 1.906 0 0 0-.605-.472c-.335-.173-.726-.258-1.168-.258-.42 0-.834.083-1.226.249a3.24 3.24 0 0 0-1.055.715 3.528 3.528 0 0 0-.734 1.123 3.79 3.79 0 0 0-.276 1.477c0 .54.092 1.037.275 1.477.184.434.428.817.729 1.128a3.138 3.138 0 0 0 2.273.973 2.59 2.59 0 0 0 1.175-.259c.255-.13.457-.287.612-.471v.177a.34.34 0 0 0 .108.259.343.343 0 0 0 .243.104h1.329a.335.335 0 0 0 .252-.105.364.364 0 0 0 .102-.258V3.267a.38.38 0 0 0-.1-.262.332.332 0 0 0-.115-.087.311.311 0 0 0-.139-.028zM119.876 6.9a1.534 1.534 0 0 1-.786.855 1.362 1.362 0 0 1-.594.129c-.207 0-.405-.044-.588-.13a1.516 1.516 0 0 1-.792-.855 1.757 1.757 0 0 1-.113-.62c0-.225.037-.436.112-.632.073-.187.179-.358.314-.504.138-.143.3-.26.479-.342.184-.086.385-.13.588-.129.217 0 .415.044.594.13.181.085.34.2.472.341.134.143.24.313.314.504a1.73 1.73 0 0 1 0 1.253zM128.978 7.64l-.763-.593c-.146-.118-.284-.15-.404-.1a.742.742 0 0 0-.279.205 2.527 2.527 0 0 1-.583.535c-.192.122-.444.183-.742.183-.219 0-.42-.04-.6-.122a1.423 1.423 0 0 1-.469-.342 1.575 1.575 0 0 1-.308-.51 1.751 1.751 0 0 1-.106-.617c0-.228.034-.438.106-.632.07-.192.173-.363.308-.503.135-.144.295-.26.472-.342.187-.088.391-.132.597-.13.298 0 .547.064.742.187.198.126.396.306.584.534.078.092.17.16.278.206.122.048.259.016.401-.101l.762-.594a.53.53 0 0 0 .201-.269.437.437 0 0 0-.034-.365 3.329 3.329 0 0 0-1.18-1.127c-.504-.291-1.108-.441-1.784-.441a3.519 3.519 0 0 0-2.51 1.033c-.322.322-.576.71-.747 1.137a3.68 3.68 0 0 0-.273 1.407c0 .495.093.968.273 1.402.173.424.427.808.747 1.128a3.527 3.527 0 0 0 2.51 1.034c.676 0 1.28-.149 1.784-.444a3.286 3.286 0 0 0 1.182-1.13.411.411 0 0 0 .055-.173.415.415 0 0 0-.023-.182.624.624 0 0 0-.197-.273zM136.06 9.045l-2.104-3.143 1.801-2.415c.094-.139.119-.272.075-.397-.031-.09-.116-.2-.334-.2h-1.425a.52.52 0 0 0-.234.058.482.482 0 0 0-.209.205L132.191 5.2h-.349V.363a.37.37 0 0 0-.099-.26.352.352 0 0 0-.253-.103h-1.332a.37.37 0 0 0-.337.22.346.346 0 0 0-.027.143V9.29c0 .103.038.193.11.259a.353.353 0 0 0 .254.104h1.333a.328.328 0 0 0 .251-.105.346.346 0 0 0 .075-.119.333.333 0 0 0 .024-.14V6.927h.386l1.571 2.446c.112.187.267.281.46.281h1.491c.226 0 .32-.11.358-.202.054-.13.038-.262-.047-.406zM102.863 2.89h-1.489a.389.389 0 0 0-.298.122.544.544 0 0 0-.13.249l-1.099 4.167h-.268l-1.182-4.167a.66.66 0 0 0-.113-.247.329.329 0 0 0-.264-.124h-1.544c-.199 0-.325.066-.372.193a.588.588 0 0 0-.002.37l1.887 5.865c.03.093.08.17.145.232a.388.388 0 0 0 .281.104h.798l-.066.19-.19.547a.872.872 0 0 1-.29.426.7.7 0 0 1-.442.148.956.956 0 0 1-.4-.09 1.842 1.842 0 0 1-.35-.209.62.62 0 0 0-.335-.115h-.016c-.13 0-.243.074-.334.216l-.474.708c-.193.304-.086.504.039.615.234.224.528.399.875.524.344.125.723.186 1.126.186.682 0 1.252-.187 1.689-.565.435-.376.756-.887.952-1.524l2.188-7.258c.05-.155.05-.284.005-.389-.037-.08-.125-.174-.327-.174z" fill="#ffffff"/>
  </svg>
`,gse=`
<svg id="inline-button-wordmark--grey" width="166" height="16" viewBox="0 0 166 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path
  d="M0.564068 6.26985L1.86515 6.10375C1.85184 5.15143 1.83489 3.71187 1.84942 3.45964C1.95955 1.67927 3.39982 0.16589 5.13056 0.0170127C5.23949 0.00839996 5.34842 0.0034784 5.45371 0.00101762C6.36645 -0.0209585 7.25272 0.313716 7.93 0.936113C8.62472 1.56238 9.07979 2.4864 9.14999 3.4055C9.16815 3.64174 9.1621 5.24002 9.1621 6.18249L10.4886 6.38305L10.4438 14.0767L5.47308 14.7657L0.519287 13.961L0.564068 6.26985ZM5.53359 5.63743L7.62016 5.95241C7.61169 4.80446 7.55965 3.12867 7.30548 2.68696C6.91939 2.0164 6.28156 1.62021 5.55901 1.60421H5.48276C4.7481 1.61406 4.10543 2.0004 3.71813 2.66727C3.44944 3.13236 3.39619 4.70972 3.3974 5.91181L5.53359 5.63743ZM22.5808 12.4378C21.8836 12.4378 21.293 12.3492 20.8089 12.172C20.372 12.0088 19.9719 11.7577 19.6325 11.4338C19.3256 11.1331 19.0833 10.7712 18.9208 10.3707C18.7637 9.95815 18.6612 9.52621 18.6158 9.08621H19.8358C19.8745 9.40119 19.9423 9.70141 20.0391 9.98686C20.136 10.2625 20.286 10.5085 20.4894 10.7251C20.6927 10.9318 20.959 11.0991 21.2882 11.2271C21.6271 11.3452 22.0579 11.4043 22.5808 11.4043C22.9197 11.4043 23.2295 11.36 23.5103 11.2714C23.8008 11.173 24.0525 11.0351 24.2655 10.858C24.4785 10.6808 24.6431 10.4692 24.7593 10.2231C24.8852 9.97701 24.9481 9.70633 24.9481 9.41103C24.9481 9.11574 24.9094 8.85982 24.8319 8.64327C24.7536 8.41559 24.6125 8.21568 24.4253 8.06745C24.196 7.88594 23.9347 7.75064 23.6555 7.6688C23.257 7.54201 22.849 7.4482 22.4355 7.38828C21.9393 7.31041 21.4491 7.19693 20.9686 7.04869C20.5808 6.92967 20.2133 6.75038 19.8794 6.51716C19.5939 6.29685 19.3607 6.01432 19.1968 5.69034C19.0418 5.35567 18.9644 4.9521 18.9644 4.47963C18.9644 4.07607 19.0467 3.70203 19.2113 3.35752C19.3759 3.00317 19.6034 2.69803 19.8939 2.44211C20.194 2.18619 20.5475 1.98441 20.9541 1.83676C21.3608 1.68911 21.811 1.61529 22.3048 1.61529C23.3505 1.61529 24.1784 1.86629 24.7884 2.36829C25.4081 2.86044 25.7711 3.57899 25.8777 4.52393H24.7448C24.6189 3.8546 24.3624 3.37721 23.9751 3.09176C23.5878 2.79646 23.031 2.64882 22.3048 2.64882C21.5883 2.64882 21.0461 2.81123 20.6782 3.13605C20.5037 3.28606 20.3648 3.47417 20.2717 3.68635C20.1787 3.89853 20.1339 4.12931 20.1408 4.36152C20.1408 4.61744 20.1698 4.84875 20.2279 5.05546C20.2957 5.25232 20.4167 5.42457 20.591 5.57222C20.775 5.71987 21.0267 5.85275 21.3463 5.97087C21.7689 6.09987 22.2012 6.19369 22.6389 6.25139C23.2198 6.33998 23.7281 6.4581 24.1639 6.60575C24.5996 6.75339 24.9675 6.94533 25.2677 7.18157C25.5678 7.4178 25.7905 7.70818 25.9358 8.05268C26.0907 8.39719 26.1681 8.82045 26.1681 9.32245C26.1681 9.76539 26.0761 10.1788 25.8922 10.5627C25.7149 10.9408 25.4627 11.2775 25.1515 11.5519C24.8319 11.8275 24.4495 12.0441 24.0041 12.2016C23.5684 12.359 23.094 12.4378 22.5808 12.4378ZM31.2066 12.4378C30.6741 12.4378 30.1803 12.3443 29.7252 12.1573C29.2906 11.9775 28.8956 11.7115 28.5633 11.3747C28.2268 11.0185 27.965 10.5966 27.7936 10.1345C27.6136 9.61796 27.5251 9.07309 27.5321 8.52515V8.40704C27.5321 7.82629 27.6193 7.29476 27.7936 6.81245C27.9679 6.3203 28.2099 5.90196 28.5198 5.55746C28.8393 5.2031 29.2169 4.93242 29.6526 4.7454C30.0883 4.54854 30.5676 4.45011 31.0905 4.45011C31.5262 4.45011 31.9473 4.52393 32.354 4.67158C32.7704 4.80938 33.1383 5.03085 33.4578 5.33599C33.7773 5.64112 34.0291 6.03977 34.213 6.53192C34.4067 7.01424 34.5035 7.5999 34.5035 8.28892V8.68756H28.7812C28.8102 9.57345 29.0281 10.2526 29.4348 10.7251C29.8414 11.1877 30.4369 11.419 31.2212 11.419C32.4121 11.419 33.085 10.9712 33.24 10.0754H34.4454C34.3099 10.8531 33.9516 11.4436 33.3707 11.8472C32.7897 12.2409 32.0684 12.4378 31.2066 12.4378ZM33.269 7.69833C33.2109 6.90104 32.9882 6.33014 32.6009 5.98563C32.2233 5.64112 31.7198 5.46887 31.0905 5.46887C30.4708 5.46887 29.9624 5.67065 29.5655 6.07422C29.1782 6.46794 28.9313 7.00932 28.8248 7.69833H33.269ZM39.3593 12.4378C38.8267 12.4378 38.3329 12.3492 37.8779 12.172C37.4401 11.9901 37.0407 11.7245 36.7014 11.3895C36.3636 11.0315 36.0973 10.6103 35.9172 10.1493C35.7268 9.63002 35.6332 9.07925 35.6412 8.52515V8.40704C35.6412 7.81645 35.738 7.28 35.9317 6.79769C36.1253 6.30553 36.3868 5.8872 36.716 5.54269C37.0548 5.19818 37.447 4.93242 37.8924 4.7454C38.3475 4.54854 38.8267 4.45011 39.3302 4.45011C39.7272 4.45011 40.1097 4.49932 40.4776 4.59775C40.8552 4.69618 41.1893 4.85367 41.4797 5.07022C41.7799 5.27693 42.0316 5.55253 42.235 5.89704C42.4383 6.24155 42.569 6.65988 42.6271 7.15204H41.4362C41.3393 6.54177 41.0924 6.10867 40.6955 5.85275C40.3082 5.59683 39.8531 5.46887 39.3302 5.46887C38.995 5.46599 38.6632 5.53649 38.3571 5.67557C38.0667 5.81338 37.8101 6.01024 37.5874 6.26616C37.3615 6.53514 37.1889 6.84598 37.0791 7.18157C36.9484 7.57626 36.8845 7.99063 36.8902 8.40704V8.52515C36.8902 9.47994 37.1178 10.2034 37.5729 10.6956C38.0376 11.1779 38.6379 11.419 39.3738 11.419C39.6449 11.419 39.9015 11.3797 40.1436 11.3009C40.6361 11.1497 41.0523 10.8113 41.3055 10.356C41.441 10.1197 41.5233 9.84413 41.5524 9.52915H42.6707C42.6338 9.9361 42.5204 10.3321 42.3366 10.6956C42.1663 11.0447 41.9293 11.3559 41.6395 11.611C41.349 11.8669 41.0101 12.0687 40.6228 12.2163C40.2355 12.364 39.8144 12.4378 39.3593 12.4378ZM46.9164 12.4378C46.5568 12.4406 46.199 12.3858 45.8562 12.2754C45.5441 12.1717 45.2605 11.9947 45.0284 11.7586C44.7829 11.4908 44.595 11.1741 44.4765 10.8284C44.3409 10.4544 44.2731 10.0016 44.2731 9.47009V4.58299H45.4786V9.41103C45.4786 10.0902 45.619 10.5873 45.8998 10.9023C46.1903 11.2172 46.6356 11.3747 47.236 11.3747C47.5071 11.3747 47.7685 11.3304 48.0202 11.2419C48.272 11.1533 48.4947 11.0204 48.6883 10.8432C48.882 10.666 49.0369 10.4446 49.1531 10.1788C49.2693 9.91303 49.3274 9.6079 49.3274 9.26339V4.58299H50.5328V12.3049H49.3274V11.0794C49.1531 11.4436 48.8578 11.7635 48.4414 12.0391C48.0348 12.3049 47.5264 12.4378 46.9164 12.4378ZM52.8239 4.58299H54.0294V5.97087C54.2715 5.53777 54.5765 5.18342 54.9444 4.90781C55.322 4.62236 55.8497 4.46979 56.5275 4.45011V5.60175C56.1799 5.61707 55.8346 5.66652 55.4963 5.7494C55.2039 5.81939 54.9308 5.95567 54.6975 6.14804C54.4729 6.35252 54.303 6.6116 54.2037 6.90104C54.0875 7.20618 54.0294 7.59498 54.0294 8.06745V12.3049H52.8239V4.58299ZM61.0347 12.4378C60.5021 12.4378 60.0083 12.3443 59.5533 12.1573C59.1186 11.9775 58.7236 11.7115 58.3914 11.3747C58.0549 11.0185 57.793 10.5966 57.6216 10.1345C57.4416 9.61796 57.3531 9.07309 57.3602 8.52515V8.40704C57.3602 7.82629 57.4473 7.29476 57.6216 6.81245C57.7959 6.3203 58.038 5.90196 58.3478 5.55746C58.6673 5.2031 59.0449 4.93242 59.4806 4.7454C59.9164 4.54854 60.3956 4.45011 60.9185 4.45011C61.3542 4.45011 61.7754 4.52393 62.1821 4.67158C62.5984 4.80938 62.9663 5.03085 63.2859 5.33599C63.6054 5.64112 63.8571 6.03977 64.0411 6.53192C64.2347 7.01424 64.3316 7.5999 64.3316 8.28892V8.68756H58.6092C58.6383 9.57345 58.8561 10.2526 59.2628 10.7251C59.6695 11.1877 60.2649 11.419 61.0492 11.419C62.2401 11.419 62.9131 10.9712 63.068 10.0754H64.2735C64.1379 10.8531 63.7797 11.4436 63.1987 11.8472C62.6178 12.2409 61.8964 12.4378 61.0347 12.4378ZM63.097 7.69833C63.0389 6.90104 62.8162 6.33014 62.429 5.98563C62.0513 5.64112 61.5478 5.46887 60.9185 5.46887C60.2988 5.46887 59.7905 5.67065 59.3935 6.07422C59.0062 6.46794 58.7593 7.00932 58.6528 7.69833H63.097ZM68.8968 12.4378C68.403 12.4378 67.9431 12.3541 67.5171 12.1868C67.1072 12.0141 66.7365 11.7578 66.4278 11.4338C66.1165 11.0803 65.8749 10.6693 65.7161 10.2231C65.5451 9.69956 65.4617 9.15057 65.4692 8.59898V8.48086C65.4692 7.89027 65.5564 7.3489 65.7307 6.85675C65.905 6.36459 66.147 5.94134 66.4569 5.58698C66.7667 5.22279 67.1395 4.94226 67.5752 4.7454C68.0109 4.54854 68.4902 4.45011 69.013 4.45011C69.6521 4.45011 70.1701 4.58791 70.5671 4.86352C70.964 5.12928 71.2739 5.44918 71.4966 5.82322V0.891819H72.702V12.3049H71.4966V10.9761C71.3901 11.1631 71.2448 11.3452 71.0609 11.5224C70.8713 11.7038 70.6617 11.8623 70.4363 11.9949C70.2066 12.1258 69.963 12.2298 69.7102 12.3049C69.4487 12.3935 69.1776 12.4378 68.8968 12.4378ZM69.0275 11.419C69.3761 11.419 69.7053 11.36 70.0152 11.2419C70.325 11.1237 70.5913 10.9466 70.814 10.7103C71.0367 10.4642 71.2109 10.1591 71.3368 9.79492C71.4724 9.42088 71.5401 8.98778 71.5401 8.49562V8.37751C71.5401 7.38335 71.3223 6.65004 70.8866 6.17757C70.4606 5.7051 69.8748 5.46887 69.1292 5.46887C68.374 5.46887 67.7834 5.72479 67.3573 6.23663C66.9313 6.74847 66.7183 7.47686 66.7183 8.4218V8.53992C66.7183 9.02223 66.7764 9.44549 66.8926 9.80968C67.0184 10.1739 67.183 10.4741 67.3864 10.7103C67.5994 10.9466 67.8463 11.1237 68.1271 11.2419C68.4079 11.36 68.708 11.419 69.0275 11.419ZM82.4716 12.4378C81.852 12.4378 81.3243 12.3 80.8886 12.0244C80.485 11.7813 80.146 11.4417 79.901 11.0351V12.3049H78.6955V0.891819H79.901V5.88228C80.0153 5.68531 80.1572 5.50626 80.3221 5.35075C80.5061 5.17357 80.7094 5.02101 80.9321 4.89305C81.1645 4.75524 81.4114 4.64697 81.6729 4.56822C81.9343 4.48948 82.2005 4.45011 82.4716 4.45011C82.9655 4.45011 83.4254 4.53869 83.8514 4.71587C84.2774 4.89305 84.6405 5.14897 84.9407 5.48363C85.2505 5.8183 85.4926 6.22679 85.6669 6.7091C85.8411 7.19141 85.9283 7.73278 85.9283 8.33321V8.45133C85.9283 9.04192 85.846 9.58329 85.6814 10.0754C85.5295 10.535 85.2929 10.9609 84.9843 11.3304C84.6852 11.6839 84.3133 11.9662 83.895 12.1573C83.4445 12.3492 82.96 12.4447 82.4716 12.4378ZM82.3555 11.419C83.1107 11.419 83.6868 11.173 84.0838 10.6808C84.4808 10.1788 84.6793 9.45533 84.6793 8.51039V8.39227C84.6793 7.90012 84.6163 7.47194 84.4904 7.10775C84.3829 6.77559 84.2099 6.46915 83.9821 6.2071C83.7841 5.96487 83.5294 5.77704 83.2414 5.66081C82.9581 5.53232 82.6511 5.46687 82.3409 5.46887C81.9924 5.46887 81.6632 5.52793 81.3533 5.64604C81.0537 5.7638 80.7852 5.95084 80.569 6.19234C80.3464 6.42857 80.1721 6.73371 80.0462 7.10775C79.9127 7.52209 79.8488 7.95635 79.8574 8.39227V8.51039C79.8574 9.4947 80.0898 10.228 80.5545 10.7103C81.0193 11.1828 81.6196 11.419 82.3555 11.419ZM89.6342 11.5076L86.6569 4.58299H87.9495L90.2733 10.1197L92.3792 4.58299H93.6137L89.4164 14.9921H88.1964L89.6342 11.5076ZM105.97 4.51532C105.618 4.13844 105.195 3.83755 104.727 3.63067C104.257 3.42601 103.751 3.32132 103.241 3.32307C102.698 3.32307 102.214 3.42888 101.804 3.64297C101.501 3.7934 101.229 4.00091 101.003 4.25447V4.01947C101.003 3.93064 100.979 3.84347 100.933 3.76781C100.888 3.69214 100.822 3.631 100.744 3.59129C100.691 3.56626 100.633 3.55364 100.574 3.55438H98.9827C98.9241 3.55245 98.8658 3.56433 98.8125 3.58909C98.7592 3.61385 98.7122 3.65082 98.6753 3.69711C98.5956 3.78474 98.5523 3.90019 98.5542 4.01947V15.0561C98.5542 15.1791 98.5954 15.2874 98.6753 15.3735C98.715 15.4152 98.7629 15.4479 98.8158 15.4698C98.8688 15.4916 98.9256 15.502 98.9827 15.5002H100.606C100.661 15.5001 100.715 15.4889 100.766 15.4671C100.817 15.4453 100.863 15.4135 100.901 15.3735C100.945 15.3333 100.979 15.284 101.002 15.229C101.025 15.174 101.036 15.1146 101.034 15.0548V11.2898C101.25 11.5384 101.539 11.7291 101.884 11.8607C102.307 12.0256 102.755 12.1105 103.207 12.1105C103.727 12.1105 104.233 12.0096 104.71 11.8054C105.185 11.599 105.613 11.2958 105.969 10.9146C106.338 10.5135 106.628 10.0422 106.824 9.52669C107.044 8.94733 107.152 8.33033 107.143 7.70941C107.143 7.045 107.038 6.43349 106.824 5.89212C106.631 5.38011 106.341 4.91182 105.97 4.51409V4.51532ZM104.513 8.50178C104.424 8.73555 104.295 8.94718 104.131 9.12928C103.969 9.31219 103.77 9.45789 103.547 9.55674C103.325 9.65558 103.085 9.70531 102.842 9.70264C102.6 9.70387 102.358 9.65342 102.136 9.55499C101.911 9.4556 101.71 9.31074 101.542 9.12928C101.375 8.94704 101.244 8.73407 101.155 8.50178C101.062 8.25439 101.015 7.99155 101.016 7.72663C101.016 7.45102 101.064 7.19141 101.155 6.95026C101.332 6.48635 101.682 6.1122 102.128 5.90935C102.352 5.80353 102.595 5.7494 102.842 5.75063C103.103 5.75063 103.343 5.80476 103.56 5.91058C103.774 6.0127 103.969 6.15542 104.134 6.33014C104.476 6.71058 104.661 7.21105 104.648 7.72663C104.648 8.00347 104.603 8.26308 104.513 8.50178ZM115.859 3.55684H114.249C114.193 3.55751 114.138 3.56987 114.087 3.59315C114.036 3.61643 113.99 3.65013 113.952 3.69219C113.868 3.78 113.821 3.8973 113.821 4.01947V4.22371C113.62 3.9808 113.372 3.78302 113.092 3.64297C112.654 3.42397 112.17 3.31511 111.681 3.32553C111.166 3.32821 110.657 3.43439 110.183 3.63795C109.708 3.84151 109.278 4.13843 108.917 4.51162C108.537 4.91069 108.236 5.37962 108.029 5.89335C107.801 6.47081 107.687 7.08847 107.696 7.71064C107.696 8.37505 107.807 8.98655 108.029 9.52792C108.251 10.0619 108.545 10.5331 108.91 10.9158C109.265 11.2945 109.693 11.5958 110.167 11.8016C110.641 12.0074 111.15 12.1133 111.665 12.113C112.194 12.113 112.675 12.0047 113.085 11.7943C113.388 11.6343 113.637 11.4412 113.821 11.2148V11.4326C113.82 11.4923 113.831 11.5516 113.854 11.6066C113.877 11.6615 113.911 11.7109 113.954 11.7512C113.993 11.7915 114.038 11.8236 114.089 11.8456C114.14 11.8676 114.194 11.879 114.249 11.8792H115.859C115.916 11.8812 115.972 11.8706 116.024 11.8483C116.077 11.826 116.124 11.7925 116.162 11.75C116.203 11.7085 116.235 11.6589 116.256 11.6043C116.277 11.5497 116.287 11.4912 116.285 11.4326V4.0207C116.287 3.90142 116.244 3.78597 116.164 3.69834C116.127 3.65337 116.08 3.61736 116.027 3.5929C115.975 3.56844 115.917 3.55613 115.859 3.55684ZM113.685 8.4907C113.601 8.72324 113.473 8.9368 113.308 9.11943C113.143 9.29538 112.95 9.43933 112.735 9.54269C112.52 9.64727 112.275 9.70141 112.014 9.70141C111.764 9.70141 111.521 9.64727 111.3 9.54146C111.079 9.4398 110.881 9.29437 110.717 9.11372C110.552 8.93306 110.425 8.72082 110.343 8.48947C110.253 8.24551 110.207 7.98712 110.207 7.72663C110.207 7.44979 110.253 7.19018 110.343 6.94903C110.433 6.71156 110.562 6.50116 110.723 6.32891C110.888 6.15296 111.086 6.00901 111.301 5.90812C111.521 5.80353 111.764 5.7494 112.015 5.7494C112.275 5.7494 112.52 5.80353 112.735 5.90935C112.951 6.01393 113.144 6.15542 113.308 6.32891C113.65 6.70961 113.834 7.21001 113.821 7.7254C113.821 7.98993 113.776 8.24709 113.685 8.4907ZM131.919 7.49901C131.685 7.28955 131.417 7.12228 131.127 7.00439C130.828 6.88012 130.511 6.78169 130.177 6.71525L128.95 6.46425C128.635 6.40273 128.416 6.3203 128.293 6.21448C128.242 6.17732 128.201 6.12853 128.172 6.07209C128.144 6.01565 128.128 5.95315 128.128 5.88966C128.128 5.75432 128.204 5.64358 128.357 5.54269C128.523 5.43688 128.755 5.38274 129.042 5.38274C129.357 5.38274 129.669 5.44795 129.958 5.57591C130.252 5.70633 130.528 5.85398 130.769 6.01885C131.126 6.24893 131.43 6.21817 131.649 5.95364L132.238 5.25232C132.351 5.13393 132.416 4.97752 132.422 4.81307C132.422 4.65558 132.345 4.51162 132.198 4.3812C131.948 4.15481 131.553 3.91612 131.023 3.68234C130.494 3.44611 129.829 3.32553 129.042 3.32553C128.525 3.32553 128.049 3.39689 127.628 3.53716C127.205 3.67988 126.842 3.87674 126.547 4.12036C126.251 4.37136 126.017 4.66173 125.858 4.99763C125.699 5.33341 125.617 5.70154 125.618 6.07422C125.618 6.76324 125.82 7.32552 126.218 7.74509C126.615 8.15481 127.145 8.43411 127.796 8.56945L129.072 8.8549C129.435 8.93118 129.711 9.01731 129.889 9.11328C130.045 9.19572 130.119 9.31383 130.119 9.47871C130.119 9.62635 130.045 9.758 129.892 9.87735C129.731 10.0053 129.478 10.0681 129.139 10.0681C128.79 10.0717 128.445 9.99161 128.133 9.83429C127.836 9.68469 127.56 9.49515 127.312 9.27077C127.202 9.17922 127.076 9.1084 126.941 9.0616C126.788 9.01608 126.616 9.0653 126.419 9.22155L125.714 9.78876C125.509 9.96717 125.423 10.1825 125.461 10.431C125.496 10.6697 125.691 10.9158 126.055 11.1939C126.38 11.4313 126.798 11.6467 127.3 11.8312C127.803 12.017 128.391 12.113 129.059 12.113C129.596 12.113 130.092 12.0416 130.529 11.9013C130.967 11.7549 131.354 11.5593 131.668 11.3108C131.98 11.0724 132.231 10.7631 132.404 10.4077C132.576 10.0523 132.663 9.66076 132.659 9.26462C132.659 8.87212 132.595 8.52638 132.46 8.23601C132.331 7.95492 132.147 7.70366 131.919 7.49778V7.49901ZM138.958 9.51193C138.923 9.445 138.872 9.3882 138.809 9.34687C138.747 9.30555 138.675 9.28105 138.601 9.27569C138.451 9.27322 138.305 9.3222 138.186 9.41473C138.071 9.49101 137.946 9.55007 137.815 9.58821C137.649 9.64412 137.47 9.64967 137.3 9.60421C137.219 9.58443 137.144 9.54519 137.081 9.48978C137.005 9.42056 136.946 9.33472 136.908 9.23878C136.855 9.09669 136.83 8.94521 136.836 8.79338V5.76662H138.931C139.051 5.76662 139.159 5.71741 139.253 5.62267C139.295 5.58108 139.329 5.5314 139.352 5.4765C139.376 5.42159 139.388 5.36254 139.389 5.30276V4.02193C139.389 3.96024 139.377 3.89918 139.353 3.84249C139.329 3.78579 139.294 3.73465 139.25 3.69219C139.165 3.60724 139.05 3.55916 138.931 3.55807H136.835V1.49717C136.838 1.43555 136.827 1.37406 136.805 1.31679C136.782 1.25952 136.748 1.20777 136.704 1.16497C136.627 1.08454 136.521 1.03854 136.41 1.03701H134.784C134.695 1.03555 134.609 1.06135 134.535 1.11101C134.462 1.16066 134.405 1.23182 134.372 1.31507C134.349 1.37287 134.338 1.43484 134.339 1.49717V3.55684H133.411C133.353 3.55549 133.294 3.5675 133.241 3.59199C133.188 3.61647 133.14 3.65281 133.102 3.69834C133.025 3.78687 132.982 3.90193 132.984 4.0207V5.304C132.985 5.39177 133.01 5.47753 133.055 5.55238C133.1 5.62724 133.164 5.68846 133.24 5.72971C133.294 5.75555 133.352 5.76908 133.41 5.76662H134.339V9.36551C134.339 9.84536 134.423 10.2588 134.581 10.5996C134.741 10.9367 134.951 11.2197 135.204 11.4313C135.466 11.6503 135.766 11.8128 136.088 11.9087C136.415 12.0121 136.755 12.0638 137.096 12.0638C137.562 12.0638 138.004 11.9887 138.421 11.8423C138.817 11.7053 139.175 11.4722 139.463 11.1631C139.647 10.9404 139.668 10.6943 139.518 10.4483L138.958 9.51316V9.51193ZM147.78 3.55684H146.171C146.116 3.55785 146.061 3.57036 146.01 3.59363C145.959 3.6169 145.914 3.65043 145.876 3.69219C145.835 3.73558 145.802 3.78651 145.779 3.84229C145.758 3.89876 145.746 3.95885 145.747 4.01947V4.22371C145.544 3.98167 145.295 3.78409 145.014 3.64297C144.609 3.43011 144.136 3.32553 143.601 3.32553C143.092 3.32553 142.591 3.42765 142.117 3.6319C141.638 3.83631 141.204 4.13534 140.84 4.51162C140.46 4.9102 140.158 5.37925 139.952 5.89335C139.722 6.47038 139.608 7.08828 139.618 7.71064C139.618 8.37505 139.729 8.98655 139.95 9.52792C140.173 10.0619 140.468 10.5331 140.833 10.9158C141.188 11.2943 141.614 11.5956 142.087 11.8014C142.56 12.0072 143.069 12.1132 143.584 12.113C144.076 12.1217 144.563 12.0125 145.006 11.7943C145.314 11.6343 145.559 11.4412 145.747 11.2148V11.4326C145.745 11.4921 145.756 11.5513 145.778 11.6062C145.801 11.6612 145.834 11.7106 145.877 11.7512C145.916 11.7913 145.961 11.8232 146.012 11.8452C146.062 11.8671 146.116 11.8787 146.171 11.8792H147.78C147.837 11.8806 147.893 11.8699 147.946 11.8476C147.998 11.8254 148.046 11.7921 148.085 11.75C148.166 11.6649 148.21 11.5508 148.208 11.4326V4.0207C148.21 3.90149 148.167 3.78617 148.087 3.69834C148.049 3.65272 148.002 3.61618 147.948 3.59129C147.895 3.56679 147.838 3.555 147.78 3.55684ZM145.606 8.4907C145.437 8.95456 145.095 9.33232 144.655 9.54269C144.43 9.64997 144.184 9.70423 143.936 9.70141C143.685 9.70141 143.446 9.64727 143.224 9.54146C143.004 9.43906 142.806 9.2934 142.642 9.11285C142.477 8.9323 142.349 8.72044 142.266 8.48947C142.175 8.24565 142.129 7.98721 142.129 7.72663C142.129 7.44979 142.174 7.19018 142.264 6.94903C142.353 6.71894 142.481 6.50855 142.645 6.32891C142.812 6.15296 143.008 6.00901 143.224 5.90812C143.447 5.8023 143.69 5.74817 143.936 5.7494C144.199 5.7494 144.438 5.80353 144.655 5.90935C144.874 6.01393 145.066 6.15542 145.226 6.32891C145.388 6.50486 145.517 6.71402 145.606 6.94903C145.796 7.44486 145.796 7.99486 145.606 8.4907ZM156.622 9.40119L155.699 8.67157C155.522 8.52638 155.355 8.48701 155.21 8.54853C155.079 8.60436 154.964 8.69079 154.872 8.80076C154.673 9.05649 154.434 9.27863 154.167 9.45902C153.934 9.60913 153.629 9.68418 153.269 9.68418C153.004 9.68418 152.76 9.63496 152.542 9.53407C152.327 9.43495 152.134 9.2917 151.975 9.11328C151.812 8.93013 151.686 8.71715 151.602 8.48578C151.515 8.24262 151.471 7.98546 151.474 7.72663C151.474 7.4461 151.515 7.18772 151.602 6.94903C151.687 6.71279 151.811 6.50239 151.975 6.33014C152.138 6.15296 152.332 6.01024 152.546 5.90935C152.772 5.80107 153.019 5.74694 153.269 5.7494C153.629 5.7494 153.931 5.82814 154.167 5.97948C154.406 6.13451 154.646 6.35598 154.873 6.63651C154.968 6.7497 155.079 6.83337 155.21 6.88997C155.358 6.94903 155.523 6.90965 155.695 6.7657L156.618 6.03485C156.732 5.95424 156.817 5.83809 156.861 5.70387C156.886 5.63045 156.896 5.55227 156.889 5.47473C156.882 5.39719 156.858 5.32214 156.82 5.25478C156.464 4.67928 155.973 4.20275 155.391 3.86813C154.781 3.51009 154.05 3.32553 153.232 3.32553C152.668 3.32238 152.109 3.43311 151.588 3.65129C151.066 3.86947 150.593 4.19076 150.194 4.59652C149.805 4.99271 149.497 5.4701 149.29 5.99547C149.07 6.54494 148.957 7.13314 148.96 7.72663C148.96 8.33567 149.072 8.91765 149.29 9.45164C149.5 9.97332 149.807 10.4458 150.194 10.8395C150.593 11.2451 151.067 11.5663 151.588 11.7846C152.11 12.003 152.668 12.1142 153.232 12.1117C154.05 12.1117 154.781 11.9284 155.391 11.5654C155.976 11.232 156.468 10.7537 156.822 10.1751C156.86 10.1101 156.882 10.0374 156.889 9.96225C156.896 9.88643 156.886 9.80992 156.861 9.73832C156.813 9.60626 156.731 9.49007 156.622 9.40242V9.40119ZM165.194 11.1299L162.647 7.26277L164.827 4.29138C164.941 4.12036 164.971 3.95672 164.918 3.80292C164.88 3.69219 164.777 3.55684 164.514 3.55684H162.789C162.69 3.55775 162.593 3.58219 162.506 3.62821C162.398 3.68359 162.309 3.77173 162.253 3.88043L160.511 6.39904H160.089V0.447649C160.091 0.329229 160.048 0.214475 159.969 0.127748C159.929 0.0869473 159.881 0.0547186 159.828 0.0329554C159.776 0.0111921 159.719 0.000333517 159.663 0.00101762H158.051C157.964 0.00131009 157.88 0.0270233 157.807 0.0750545C157.735 0.123086 157.678 0.191382 157.643 0.271703C157.62 0.327334 157.608 0.387308 157.61 0.447649V11.4313C157.61 11.5581 157.656 11.6688 157.743 11.75C157.783 11.7911 157.831 11.8236 157.884 11.8456C157.937 11.8676 157.993 11.8786 158.051 11.878H159.664C159.721 11.8798 159.777 11.8692 159.83 11.8469C159.882 11.8246 159.929 11.7912 159.968 11.7488C160.007 11.7068 160.038 11.657 160.058 11.6024C160.08 11.5477 160.09 11.489 160.087 11.4301V8.52392H160.555L162.456 11.5335C162.592 11.7635 162.779 11.8792 163.013 11.8792H164.817C165.091 11.8792 165.205 11.7439 165.251 11.6307C165.316 11.4707 165.297 11.3083 165.194 11.1311V11.1299ZM125.015 3.55684H123.213C123.146 3.55424 123.079 3.56628 123.017 3.59218C122.954 3.61807 122.898 3.6572 122.852 3.70695C122.774 3.79331 122.72 3.89895 122.695 4.01332L121.365 9.14035H121.041L119.61 4.01332C119.586 3.90347 119.539 3.79998 119.473 3.70941C119.435 3.66072 119.386 3.62162 119.331 3.59516C119.276 3.5687 119.215 3.55559 119.154 3.55684H117.285C117.044 3.55684 116.892 3.63805 116.835 3.79431C116.786 3.94184 116.785 4.10149 116.832 4.24955L119.116 11.4658C119.152 11.5802 119.213 11.675 119.292 11.7512C119.337 11.7944 119.391 11.828 119.449 11.8499C119.507 11.8719 119.57 11.8818 119.632 11.8792H120.598L120.518 12.113L120.288 12.786C120.225 12.9927 120.103 13.1754 119.937 13.3101C119.784 13.4312 119.595 13.4954 119.402 13.4922C119.234 13.4914 119.069 13.4536 118.918 13.3815C118.768 13.312 118.625 13.2257 118.494 13.1243C118.375 13.0381 118.234 12.9889 118.089 12.9829H118.069C117.912 12.9829 117.775 13.0739 117.665 13.2486L117.091 14.1197C116.858 14.4938 116.987 14.7399 117.139 14.8764C117.422 15.152 117.778 15.3673 118.198 15.5211C118.614 15.6749 119.073 15.75 119.56 15.75C120.386 15.75 121.076 15.5199 121.605 15.0548C122.131 14.5922 122.52 13.9635 122.757 13.1797L125.405 4.24955C125.465 4.05884 125.465 3.90012 125.411 3.77093C125.366 3.6725 125.26 3.55684 125.015 3.55684Z"
  fill="#838383"
/>
</svg>
`,xse=`
  <button type="button" id="apple-pay-close-button">
    <svg width="10" height="9" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M5.572 4.033L8.89.71a.4.4 0 0 0-.566-.566L5.003 3.459 1.681.145a.4.4 0 0 0-.566.566L4.44 4.033
      1.115 7.354a.398.398 0 0 0 0 .566.4.4 0 0 0 .566 0l3.322-3.33 3.322 3.33a.4.4 0 0 0 .566-.566L5.57 4.033z"
        fill="white"
      />
    </svg>
  </button>
`,yse=`
<svg width="74" height="19" viewBox="0 0 74 19" fill="none" xmlns="http://www.w3.org/2000/svg" id="vault-logo">
  <g clip-path="url(#clip0_9910_9664)">
    <path
      d="M32.1273 15.8163H28.9432C28.6448 15.8163 28.4481 15.6622 28.3497 15.3507L25.1886 6.20188C25.1165 6.01825 25.1296 5.85101 25.2214 5.70345C25.3132 5.55589 25.451 5.48047 25.6346 5.48047H27.9693C28.2513 5.48047 28.435 5.63787 28.5202 5.94611L30.6648 12.9077L32.5536 5.94611C32.6388 5.63459 32.829 5.48047 33.1274 5.48047H35.4195C35.6031 5.48047 35.7441 5.55589 35.8425 5.70345C35.9409 5.85101 35.954 6.01825 35.8851 6.20188L32.7241 15.3507C32.6257 15.6622 32.4257 15.8163 32.1305 15.8163H32.1273Z"
      fill="#343C43" />
    <path
      d="M37.6361 14.5842C36.6097 13.5644 36.0981 12.2495 36.0981 10.6362C36.0981 9.02283 36.6097 7.71118 37.6361 6.69792C38.6624 5.68795 39.8757 5.17969 41.2759 5.17969C41.9416 5.17969 42.5384 5.31085 43.0696 5.57318C43.6008 5.83551 43.9943 6.16998 44.2468 6.57988V5.94373C44.2468 5.81584 44.2927 5.70763 44.3845 5.61581C44.4763 5.524 44.578 5.47809 44.6927 5.47809H46.8373C46.9652 5.47809 47.0701 5.524 47.1554 5.61581C47.2406 5.70763 47.2833 5.81584 47.2833 5.94373V15.3679C47.2833 15.4958 47.2406 15.6008 47.1554 15.686C47.0701 15.7713 46.9652 15.8139 46.8373 15.8139H44.6927C44.578 15.8139 44.4763 15.7713 44.3845 15.686C44.2927 15.6008 44.2468 15.4958 44.2468 15.3679V14.7088C43.991 15.1187 43.6008 15.4565 43.0696 15.7155C42.5384 15.9779 41.935 16.109 41.2562 16.109C39.8691 16.109 38.6624 15.6008 37.6361 14.581V14.5842ZM39.9151 8.79985C39.433 9.31795 39.1936 9.93443 39.1936 10.6558C39.1936 11.3772 39.433 11.997 39.9151 12.5118C40.3971 13.0299 40.9972 13.2857 41.7186 13.2857C42.44 13.2857 43.0401 13.0266 43.5221 12.5118C44.0041 11.997 44.2435 11.3772 44.2435 10.6558C44.2435 9.93443 44.0041 9.31467 43.5221 8.79985C43.0401 8.28502 42.44 8.02597 41.7186 8.02597C40.9972 8.02597 40.3938 8.28502 39.9151 8.79985Z"
      fill="#343C43" />
    <path
      d="M51.6315 5.9016V11.2302C51.6315 11.9385 51.8086 12.4959 52.1627 12.9058C52.5169 13.3157 53.0415 13.5223 53.7334 13.5223C54.4253 13.5223 54.9401 13.319 55.3139 12.9058C55.6878 12.4959 55.878 11.9516 55.878 11.2728V5.9016C55.878 5.78683 55.9239 5.68845 56.0157 5.60319C56.1075 5.51794 56.2092 5.47531 56.3239 5.47531H58.4685C58.6095 5.47531 58.7242 5.52122 58.8095 5.61303C58.8948 5.70485 58.9374 5.81306 58.9374 5.94094V15.3652C58.9374 15.4931 58.8948 15.598 58.8095 15.6832C58.7242 15.7685 58.6128 15.8111 58.4685 15.8111H56.3239C56.196 15.8111 56.0911 15.7718 56.0058 15.6931C55.9206 15.6144 55.878 15.5127 55.878 15.3848V14.7257C55.1139 15.6472 54.081 16.1062 52.7792 16.1062C51.4774 16.1062 50.4707 15.7062 49.7132 14.9061C48.9557 14.106 48.5786 13.0501 48.5786 11.7319V5.89504C48.5786 5.78027 48.6278 5.68189 48.7262 5.59664C48.8246 5.51138 48.9295 5.46875 49.0442 5.46875H51.1658C51.2937 5.46875 51.4019 5.51138 51.4938 5.59664C51.5856 5.68189 51.6315 5.78027 51.6315 5.89504V5.9016Z"
      fill="#343C43" />
    <path
      d="M62.9872 15.8148C62.0658 15.8148 61.387 15.582 60.9509 15.113C60.5115 14.6474 60.2917 14.0178 60.2917 13.2243V1.42267C60.2917 1.29478 60.3344 1.18657 60.4196 1.09475C60.5049 1.00294 60.6164 0.957031 60.7607 0.957031H62.8823C63.0233 0.957031 63.138 1.00294 63.2233 1.09475C63.3085 1.18657 63.3512 1.29478 63.3512 1.42267V12.6078C63.3512 12.8045 63.4069 12.9652 63.5217 13.0865C63.6332 13.2079 63.7906 13.2669 63.9873 13.2669H64.6464C64.9448 13.2669 65.0924 13.4144 65.0924 13.7129V15.2409C65.0924 15.6246 64.8956 15.8148 64.4989 15.8148H62.9905H62.9872Z"
      fill="#343C43" />
    <path
      d="M66.722 12.7378V8.04861H65.3644C65.2365 8.04861 65.1316 8.00271 65.0463 7.91089C64.9611 7.81907 64.9185 7.71086 64.9185 7.58298V5.94997C64.9185 5.82208 64.9611 5.71387 65.0463 5.62206C65.1316 5.53024 65.2365 5.48433 65.3644 5.48433H66.722V2.74626C66.722 2.60526 66.7679 2.49049 66.8597 2.40523C66.9515 2.31997 67.0597 2.27734 67.1876 2.27734H69.3518C69.4666 2.27734 69.5683 2.31997 69.6601 2.40523C69.7519 2.49049 69.7978 2.60198 69.7978 2.74626V5.48433H72.7064C72.8343 5.48433 72.9458 5.53024 73.0474 5.62206C73.1458 5.71387 73.195 5.82208 73.195 5.94997V7.58298C73.195 7.69775 73.1458 7.80268 73.0474 7.90105C72.949 7.99943 72.8343 8.04861 72.7064 8.04861H69.7978V12.0164C69.7978 12.4689 69.9027 12.7804 70.1159 12.9509C70.329 13.1214 70.5684 13.2067 70.8373 13.2067C71.1193 13.2067 71.4308 13.1083 71.7718 12.9083C72.1555 12.6689 72.4441 12.6951 72.6408 12.9935L73.3852 14.1806C73.5557 14.4495 73.5327 14.7052 73.3229 14.9446C72.6146 15.6792 71.5948 16.0497 70.2667 16.0497C69.2764 16.0497 68.437 15.7742 67.7516 15.2234C67.0663 14.6725 66.722 13.8428 66.722 12.741V12.7378Z"
      fill="#343C43" />
    <path
      d="M15.2266 0H4.43496C2.26089 0 0.5 1.76089 0.5 3.93496V14.7266C0.5 16.9006 2.26089 18.6615 4.43496 18.6615H15.2266C17.4006 18.6615 19.1615 16.9006 19.1615 14.7266V3.93496C19.1615 1.76089 17.4006 0 15.2266 0ZM15.079 12.2312L12.1442 14.6118C11.9114 14.8086 11.5507 14.6807 11.4949 14.379L10.8161 11.8934C10.7702 11.6934 10.8489 11.4868 11.0096 11.3589C11.4425 11.0113 11.7179 10.4801 11.7179 9.8833C11.7179 8.44048 10.098 7.37476 8.5765 8.40113C8.48468 8.46344 8.40598 8.54214 8.34368 8.63723C7.63539 9.68983 7.92723 10.7883 8.65192 11.3655C8.8126 11.4934 8.88474 11.6967 8.84211 11.8967L8.22891 14.3823C8.17317 14.6839 7.81246 14.8118 7.57964 14.6151L4.57924 12.2344C4.47431 12.1262 4.41856 11.9787 4.4284 11.8278L4.77271 6.69271C4.78582 6.49268 4.91371 6.31561 5.09734 6.23691L9.41924 4.03661C9.68157 3.9284 9.97341 3.9284 10.2357 4.03661L14.5576 6.23691C14.7445 6.31561 14.8691 6.49268 14.8855 6.69271L15.2299 11.8278C15.2397 11.9787 15.1839 12.1262 15.079 12.2344V12.2312Z"
      fill="#343C43" />
  </g>
  <defs>
    <clipPath id="clip0_9910_9664">
      <rect width="73" height="18.6615" fill="white" transform="translate(0.5)" />
    </clipPath>
  </defs>
</svg>
`,E3={height:"50px",width:"auto",borderRadius:"3px",padding:"10px",locale:"en",type:"pay"},bN=function(t){return t&&lp(t)==="object"?Object.keys(E3).reduce((function(e,r){return Ei(Ei({},e),{},wM({},r,t[r]||E3[r]))}),{}):E3},vse=`
  .pre-checkout-modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100vw;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.75);
    transition: all 0.2s ease;
  }

  .pre-checkout-modal.show {
    display: block;
  }

  .pre-checkout-modal__content {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    margin-left: auto;
    margin-right: auto;
    background-color: #fefefe;
    padding: 20px;
    padding-bottom: max(30px, env(safe-area-inset-bottom));
    width: 100%;
    border-radius: 6px 6px 0 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    max-width: 350px;

    box-sizing: border-box;
    transform: translateY(238px);
    transition: transform 0.3s cubic-bezier(.16,.81,.32,1);
  }

  .modal-wrapper {
    width: 100%;
  }

  .payment-info {
    position: relative;
    padding-bottom: 15px;
    border-bottom: solid 1px whitesmoke;
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    width: 100%;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu",
      "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
  }

  .customer-email {
    color: #737373;
    font-size: 13px;
    line-height: 16px;
  }

  .customer-info {
    flex: 1;
    text-align: right;
  }

  .merchant-logo {
    display: flex;
    align-items: center;
    height: 30px;
  }
  .transaction-amount {
    margin-top: 5px;
    font-size: 13px;
    line-height: 16px;
    color: #737373;
  }

  .amount {
    color: #29b263;
    font-weight: bold;
  }

  @media only screen and (min-width: 500px) {
    .pre-checkout-modal__content {
      bottom: 0;
      top: 0;
      margin: auto;
      border-radius: 6px;
      height: fit-content;
    }
  }

  .pre-checkout-modal__content.show {
    transform: translateY(0);
    margin: 0 auto;
    margin-top: 100px;
  }

  .pre-checkout-modal__content > * {
    margin-top: 0;
    margin-bottom: 40px;
  }
  .pre-checkout-modal__content > *:last-child {
    margin-bottom: 0;
  }

  .pre-checkout-modal__content svg {
    margin: auto;
    width: 100%;
  }

  #inline-button-wordmark--white {
    position: absolute;
    bottom: -50px;
    margin: auto;
    left: 0;
    right: 0;
    width: fit-content;
  }

  #inline-button-wordmark--grey {
    display: none;
  }

  .pre-checkout-modal__content #apple-pay-mark--light {
    margin-bottom: 16px;
  }

  .pre-checkout-modal p {
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu",
      "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
    color: #4E4E4E;
    line-height: 140%;
    font-size: 14px;
    font-weight: 500;
    margin: 0;
    padding: 0 20px;
    text-align: center;
    letter-spacing: -0.3px;
  }

  .pre-checkout-modal button {
    height: 42px;
    width: 100%;
    
    box-sizing: border-box;
    border-radius: 3px;
    font-size: 14px;
    line-height: 24px;
    cursor: pointer;
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu",
      "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
  }

  .pre-checkout-modal .open-paystack-pop-button {
    background: #FAFAFA;
    border: 1px solid #F2F3F3;
    color: #4E4E4E;
    font-weight: 500;
  }

  .pre-checkout-modal .open-paystack-pop-button:hover, 
  .pre-checkout-modal .open-paystack-pop-button:active, 
  .pre-checkout-modal .open-paystack-pop-button:focus {
    background: #F2F3F3;
  }

  .pre-checkout-modal .pay-with-vault-button {
    font-weight: 700;
    background: #44b669;
    background: linear-gradient(to bottom, #44b669 0%, #40ad57 100%);
    border: solid 1px #49a861;
    text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);
    outline: none;
    color: white;
    transition: all 300ms;
  }

  .pre-checkout-modal .vault-instruction {
    color: #2f3d4d;
    font-size: 14px;
    letter-spacing: normal;
    line-height: 1.4;
    margin: 0 auto 24px;
    padding: 0;
  }
  .vault-logo-container {
    width: 74px;
    height: 20px;
    margin: 0 auto 24px
  }
  .vault-logo-container img {
    height: 100%;
    width: 100%;
    border-radius: 8px;
  }
  .vault-divider {
    margin-bottom: 16px;
    margin-top: 24px;
    position: relative;
  }
  .vault-divider__container {
    align-items: center;
    bottom: 0;
    display: flex;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
  }
  .vault-divider__line {
    border: 1px dashed #ccced0;
    width: 100%;
  }
  .vault-divider__text-container {
    display: flex;
    justify-content: center;
    position: relative;
  }
  .vault-divider__text {
    background-color: #fff;
    color: #999da1;
    font-size: 14px;
    font-weight: 500;
    letter-spacing: -.3px;
    line-height: 19.6px;
    margin-bottom: 2px;
    padding: 0 8px;
  }

  #payment-request-button {
    width: 100%;
    height: fit-content;
    margin: 24px 0 16px 0;
  }

  #paystackpop-button {
    padding: 0 16px;
  }

  #apple-pay-close-button {
    position: absolute;
    text-align: center;
    top: 0;
    right: -26px;
    height: 16px;
    width: 16px;
    padding: 0;
    display: inline-block;
    z-index: 3;
    border-radius: 50%;
    background: transparent;
    transition: all 300ms;
    outline: none;
    cursor: pointer;
    border: none;
  }

  #apple-pay-close-button svg {
    width: initial;
  }
  
  #apple-pay-close-button:hover {
    background-color: #e22b28;
  }

  @media only screen and (max-width: 500px) {
    .pre-checkout-modal__content {
      max-width: 500px;
      border-radius: 0;
      padding-bottom: 0;
    }

    .modal-wrapper {
      padding: 0;
    }

    .vault-logo-container {
      width: 74px;
      height: 20px;
    }

    #inline-button-wordmark--white {
      display: none
    }
    
    #inline-button-wordmark--grey {
      display: block;
      width: 100%;
      margin: 16px 0;
      height: 13px;
    }

    #apple-pay-close-button {
      display: none;
    }
  }
`,kN=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return Number(parseFloat(t/100).toFixed(2))},SN={headers:{accept:"application/json, text/plain, */*","accept-language":"en-GB,en-US;q=0.9,en;q=0.8","content-type":"application/x-www-form-urlencoded","sec-ch-ua-mobile":"?0","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"cross-site"},referrerPolicy:"no-referrer-when-downgrade",method:"POST",mode:"cors",credentials:"omit"};function EN(t){return Object.keys(t).reduce((function(e,r){var n=encodeURIComponent(r),s=encodeURIComponent(t[r]),i="".concat(n,"=").concat(s);return[].concat(_M(e),[i])}),[]).join("&")}var wse=function(t){return{biannually:"BIANNUAL PLAN",annually:"ANNUAL PLAN"}[t]||"".concat(t.toUpperCase()," PLAN")},CM=function(){try{return window.location&&window.location.protocol==="https:"&&window.ApplePaySession&&window.ApplePaySession.supportsVersion(wl.applePayVersion)}catch{return!1}},V6=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return CM()&&t.includes("apple_pay")};function _se(){var t=0;return Array.from(document.querySelectorAll("body *")).forEach((function(e){var r=window.getComputedStyle(e),n=parseFloat(r.zIndex);!Number.isNaN(n)&&n>t&&(t=n)})),t}function C3(t){var e=document.createElement("iframe");return e.setAttribute("frameBorder","0"),e.setAttribute("allowtransparency","true"),e.id=t,e.style.display="none",e}function xw(t){return t.querySelector("apple-pay-button")||t.querySelector("#apple-pay-button")}function yv(t){return document.querySelector("#".concat(t))}function CN(t,e,r){var n=e.channels,s=n===void 0?[]:n,i=e.styles,a=i===void 0?{}:i,o={applePay:!1};return new Promise((function(l,c){if(t)if(V6(s)){if(xw(t))return o.applePay=!0,void l(o);(function(d,p){var g=p.container,m=p.integrity;return new Promise((function(y,w){var _=document.createElement("script");_.src=d,_.crossOrigin="anonymous",m&&(_.integrity=m),_.addEventListener("load",(function(){y(!0)})),_.addEventListener("error",(function(){_.remove(),w(!1)})),g?g.appendChild(_):document.head.appendChild(_)}))})("https://applepay.cdn-apple.com/jsapi/v1.1.0/apple-pay-sdk.js",{container:t,integrity:"sha384-z/6BVHCcSypLSykOVpaT1PQWHOOgU45uOOlMkgi/bElX4yFqmChNMb7qiv80wFav"}).then((function(){if(r&&r!==1077497&&window&&!Array.isArray(window.webpackJsonp))throw new Error("Incorrect data type for 'webpackJsonp', expected array, got ".concat(lp(window.webpackJsonp),". Switching to fallback apple pay button"));(function(d,p){var g,m,y,w,_,S=p.styles,T=p.theme,I=document.createElement("style"),M=(m=(g=S).height,y=g.width,w=g.borderRadius,_=g.padding,`
  apple-pay-button {
    --apple-pay-button-width: `.concat(y,`;
    --apple-pay-button-height: `).concat(m,`;
    --apple-pay-button-border-radius: `).concat(w,`;
    --apple-pay-button-padding: `).concat(_,`;
    --apple-pay-button-box-sizing: border-box;
    width: `).concat(y,`;
  }
`));I.type="text/css",I.styleSheet?I.styleSheet.cssText=M:I.appendChild(document.createTextNode(M)),d.appendChild(I);var K=document.createElement("apple-pay-button");K.setAttribute("buttonstyle",T==="light"?"white":"black"),K.setAttribute("type",S.type),K.setAttribute("locale",S.locale),d.appendChild(K)})(t,{styles:bN(a.applePay),theme:a.theme}),o.applePay=!0,l(o)})).catch((function(){(function(d,p){var g,m,y,w,_,S,T,I=p.styles,M=p.theme,K=document.createElement("style"),W=(m=(g=I).height,y=g.width,w=g.borderRadius,_=g.padding,S=g.type,T=g.locale,`
  @supports (-webkit-appearance: -apple-pay-button) { 
    .apple-pay-button {
        display: inline-block;
        -webkit-appearance: -apple-pay-button;
        width: `.concat(y,`;
        height: `).concat(m,`;
        border-radius: `).concat(w,`;
        padding: `).concat(_,`;
        -apple-pay-button-type: `).concat(S,`;
        -webkit-locale: `).concat(T,`;
    }
    .apple-pay-button-black {
        -apple-pay-button-style: black;
    }
    .apple-pay-button-white {
        -apple-pay-button-style: white;
    }
    .apple-pay-button-white-with-line {
        -apple-pay-button-style: white-outline;
    }
  }

  @supports not (-webkit-appearance: -apple-pay-button) {
    .apple-pay-button {
        display: inline-block;
        background-size: 100% 60%;
        background-repeat: no-repeat;
        background-position: 50% 50%;
        border-radius: 5px;
        padding: 0px;
        box-sizing: border-box;
        min-width: 200px;
        min-height: 32px;
        max-height: 64px;
    }
    .apple-pay-button-black {
        background-image: -webkit-named-image(apple-pay-logo-white);
        background-color: black;
    }
    .apple-pay-button-white {
        background-image: -webkit-named-image(apple-pay-logo-black);
        background-color: white;
    }
    .apple-pay-button-white-with-line {
        background-image: -webkit-named-image(apple-pay-logo-black);
        background-color: white;
        border: .5px solid black;
    }
  }
`));K.type="text/css",K.styleSheet?K.styleSheet.cssText=W:K.appendChild(document.createTextNode(W)),d.appendChild(K);var L=document.createElement("button");L.classList.add("apple-pay-button",M==="light"?"apple-pay-button-white":"apple-pay-button-black"),L.id="apple-pay-button";var A=document.createElement("span");A.classList.add("logo"),L.appendChild(A),d.appendChild(L)})(t,{styles:bN(a.applePay),theme:a.theme}),o.applePay=!0,l(o)}))}else c("No wallet payment method is available on this device");else c("Container to mount elements was not provided")}))}function bse(t){for(;t.firstChild;)t.removeChild(t.firstChild)}var AM="payment-request-button",NM="paystackpop-button",TM="pay-with-vault-button";function IM(t){var e=document.createElement("button");return e.id=NM,e.className="open-paystack-pop-button",e.innerText=t,e}function AN(t){return t.querySelector("#".concat(NM))}function PM(){var t=document.createElement("div");return t.id=AM,t}function A3(t){return t.querySelector("#".concat(AM))}function kse(){var t=document.createElement("button");return t.className="pay-with-vault-button",t.id=TM,t.innerText="Pay with Vault",t}function Sse(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=document.createElement("div");r.className="vault-logo-container",r.innerHTML=yse,t.appendChild(r);var n=document.createElement("p");n.id="instruction",n.className="vault-instruction",n.innerHTML="Access your saved cards and bank details for faster, more secure payments",t.appendChild(n);var s=kse();t.appendChild(s);var i=document.createElement("div");if(i.className="vault-divider",i.innerHTML='<div id="vault-divider" class="vault-divider__container"><div class="vault-divider__line"></div></div><div class="vault-divider__text-container"><span class="vault-divider__text">or</span></div>',t.appendChild(i),e.canPayWithApplePay){var a=PM();t.appendChild(a)}if(e.hasOtherPaymentMethods){var o=IM("Use other payment methods");t.appendChild(o)}}function Ese(t,e){var r=e.hasOtherPaymentMethods,n=document.createElement("div");n.innerHTML=`
  <svg width="51" height="32" viewBox="0 0 51 32" fill="none" xmlns="http://www.w3.org/2000/svg" id="apple-pay-mark--light">
    <g>
    <path d="M46.0162 0H4.98386C4.81297 0 4.64177 0 4.47118 0.000996555C4.32698 0.00202331 4.18311 0.00362383 4.03925 0.00754966C3.72548 0.0160355 3.40903 0.0345472 3.09919 0.0902335C2.7844 0.146886 2.49148 0.239294 2.20571 0.384791C1.92477 0.52766 1.66757 0.71453 1.44468 0.937516C1.22169 1.1605 1.03482 1.41728 0.891977 1.69852C0.74645 1.98429 0.653982 2.27731 0.597722 2.59234C0.541737 2.90227 0.523101 3.21866 0.514645 3.53209C0.51078 3.67596 0.509122 3.81982 0.508183 3.96366C0.507186 4.13461 0.507519 4.30545 0.507519 4.4767V27.5236C0.507519 27.6949 0.507186 27.8654 0.508183 28.0367C0.509122 28.1805 0.51078 28.3244 0.514645 28.4683C0.523101 28.7814 0.541737 29.0978 0.597722 29.4077C0.653982 29.7228 0.74645 30.0157 0.891977 30.3015C1.03482 30.5827 1.22169 30.8399 1.44468 31.0625C1.66757 31.2859 1.92477 31.4727 2.20571 31.6152C2.49148 31.7611 2.7844 31.8535 3.09919 31.9102C3.40903 31.9655 3.72548 31.9843 4.03925 31.9928C4.18311 31.9961 4.32698 31.998 4.47118 31.9987C4.64177 32 4.81297 32 4.98386 32H46.0162C46.1868 32 46.358 32 46.5286 31.9987C46.6724 31.998 46.8163 31.9961 46.9608 31.9928C47.2739 31.9843 47.5903 31.9655 47.9009 31.9102C48.2153 31.8535 48.5083 31.7611 48.7941 31.6152C49.0753 31.4727 49.3317 31.2859 49.5551 31.0625C49.7777 30.8399 49.9646 30.5827 50.1078 30.3015C50.2537 30.0157 50.346 29.7228 50.402 29.4077C50.458 29.0978 50.4762 28.7814 50.4847 28.4683C50.4886 28.3244 50.4906 28.1805 50.4912 28.0367C50.4925 27.8654 50.4926 27.6949 50.4926 27.5236V4.4767C50.4926 4.30545 50.4925 4.13461 50.4912 3.96366C50.4906 3.81982 50.4886 3.67596 50.4847 3.53209C50.4762 3.21866 50.458 2.90227 50.402 2.59234C50.346 2.27731 50.2537 1.98429 50.1078 1.69852C49.9646 1.41728 49.7777 1.1605 49.5551 0.937516C49.3317 0.71453 49.0753 0.52766 48.7941 0.384791C48.5083 0.239294 48.2153 0.146886 47.9009 0.0902335C47.5903 0.0345472 47.2739 0.0160355 46.9608 0.00754966C46.8163 0.00362383 46.6724 0.00202331 46.5286 0.000996555C46.358 0 46.1868 0 46.0162 0Z" fill="black"/>
    <path d="M46.0162 1.06662L46.521 1.06759C46.6577 1.06855 46.7945 1.07003 46.932 1.07378C47.1711 1.08024 47.4509 1.09319 47.7117 1.13994C47.9384 1.18077 48.1285 1.24286 48.311 1.33575C48.4911 1.42728 48.6562 1.54723 48.8003 1.69113C48.9449 1.83599 49.065 2.0013 49.1578 2.18343C49.2501 2.36447 49.3118 2.55369 49.3524 2.78205C49.3991 3.04001 49.412 3.32055 49.4185 3.56121C49.4222 3.69704 49.424 3.83287 49.4247 3.97194C49.426 4.14012 49.4259 4.3082 49.4259 4.47671V27.5236C49.4259 27.6921 49.426 27.8599 49.4246 28.0317C49.424 28.1675 49.4222 28.3033 49.4185 28.4394C49.4119 28.6797 49.3991 28.9601 49.3519 29.2211C49.3118 29.4463 49.2502 29.6356 49.1573 29.8175C49.0648 29.9992 48.9449 30.1643 48.8009 30.3083C48.656 30.4532 48.4915 30.5728 48.3092 30.6652C48.1281 30.7576 47.9383 30.8197 47.7138 30.8601C47.4477 30.9075 47.1562 30.9205 46.9367 30.9265C46.7986 30.9296 46.6611 30.9315 46.5203 30.9321C46.3525 30.9334 46.1841 30.9334 46.0162 30.9334H4.98386C4.98162 30.9334 4.97945 30.9334 4.97718 30.9334C4.81127 30.9334 4.64503 30.9334 4.4761 30.9321C4.33836 30.9315 4.20093 30.9296 4.06805 30.9266C3.8435 30.9205 3.55181 30.9075 3.2879 30.8604C3.06151 30.8197 2.87171 30.7576 2.68822 30.664C2.50766 30.5724 2.34329 30.453 2.19831 30.3077C2.05444 30.1641 1.93488 29.9995 1.84245 29.8176C1.74992 29.6358 1.68801 29.446 1.64731 29.218C1.60025 28.9576 1.58733 28.6783 1.58087 28.4396C1.57718 28.303 1.57564 28.1664 1.57476 28.0305L1.5741 27.6295L1.57413 27.5236V4.47671L1.5741 4.37083L1.57473 3.97067C1.57564 3.83402 1.57718 3.6974 1.58087 3.56088C1.58733 3.32197 1.60025 3.04258 1.64769 2.77991C1.68804 2.55405 1.74992 2.36422 1.84293 2.18155C1.93464 2.001 2.05441 1.83617 2.19903 1.69158C2.34308 1.54747 2.50799 1.42767 2.6897 1.33527C2.87122 1.24283 3.06138 1.18077 3.28778 1.14003C3.54864 1.09316 3.82861 1.08024 4.06839 1.07375C4.20507 1.07003 4.34174 1.06855 4.4774 1.06762L4.98386 1.06662H46.0162Z" fill="white"/>
    <path d="M14.1531 10.7629C14.5811 10.2276 14.8715 9.50886 14.7949 8.77435C14.1684 8.80551 13.4038 9.18768 12.9612 9.72342C12.5638 10.1822 12.212 10.9311 12.3037 11.6348C13.007 11.6958 13.7097 11.2832 14.1531 10.7629Z" fill="black"/>
    <path d="M14.7869 11.7722C13.7655 11.7114 12.8972 12.3519 12.4094 12.3519C11.9214 12.3519 11.1745 11.8029 10.3667 11.8177C9.31521 11.8331 8.33959 12.4276 7.80602 13.3731C6.70857 15.2646 7.51641 18.0704 8.58362 19.611C9.10188 20.3731 9.72648 21.2123 10.5495 21.1822C11.3271 21.1517 11.6319 20.6787 12.5771 20.6787C13.5216 20.6787 13.7961 21.1822 14.6192 21.1669C15.4729 21.1516 16.0065 20.4044 16.5248 19.6415C17.1193 18.7727 17.3627 17.9338 17.378 17.8877C17.3627 17.8725 15.732 17.2469 15.7169 15.3711C15.7015 13.8004 16.9972 13.0534 17.0581 13.007C16.3265 11.9249 15.1832 11.8029 14.7869 11.7722Z" fill="black"/>
    <path d="M23.68 9.64661C25.8999 9.64661 27.4457 11.1768 27.4457 13.4046C27.4457 15.6404 25.8681 17.1786 23.6244 17.1786H21.1665V21.0872H19.3907V9.64661H23.68V9.64661ZM21.1665 15.688H23.2041C24.7502 15.688 25.6302 14.8556 25.6302 13.4126C25.6302 11.9697 24.7502 11.1451 23.2121 11.1451H21.1665V15.688Z" fill="black"/>
    <path d="M27.9097 18.7167C27.9097 17.2578 29.0276 16.3619 31.0098 16.2509L33.293 16.1162V15.474C33.293 14.5464 32.6666 13.9914 31.6203 13.9914C30.629 13.9914 30.0106 14.467 29.8601 15.2124H28.2428C28.3379 13.7059 29.6222 12.5959 31.6836 12.5959C33.7053 12.5959 34.9976 13.6663 34.9976 15.3392V21.0872H33.3563V19.7156H33.3169C32.8333 20.6433 31.7787 21.2299 30.6847 21.2299C29.0514 21.2299 27.9097 20.2151 27.9097 18.7167ZM33.293 17.9635V17.3055L31.2395 17.4323C30.2167 17.5037 29.6381 17.9556 29.6381 18.6691C29.6381 19.3985 30.2406 19.8742 31.1603 19.8742C32.3574 19.8742 33.293 19.0496 33.293 17.9635Z" fill="black"/>
    <path d="M36.547 24.1556V22.768C36.6736 22.7997 36.959 22.7997 37.1018 22.7997C37.8946 22.7997 38.3228 22.4668 38.5843 21.6105C38.5843 21.5946 38.7351 21.1031 38.7351 21.0952L35.7224 12.7466H37.5774L39.6866 19.5333H39.7181L41.8273 12.7466H43.6349L40.5109 21.5232C39.7976 23.5451 38.973 24.1952 37.2447 24.1952C37.1018 24.1952 36.6736 24.1793 36.547 24.1556Z" fill="black"/>
    </g>
    <defs>
    <clipPath id="clip0">
    <rect width="49.9851" height="32" fill="white" transform="translate(0.507462)"/>
    </clipPath>
    </defs>
  </svg>
`,t.appendChild(n);var s=document.createElement("p");s.id="apple-pay-description",s.innerHTML="Pay with Apple Pay to complete your purchase without filling a form",t.appendChild(s);var i=PM();if(t.appendChild(i),r){var a=IM("More payment options");t.appendChild(a)}}function NN(t){return t.some((function(e){return e!=="apple_pay"}))}var vv=[{value:"key",required:!0,types:["string"]},{value:"amount",required:!0,or:["plan","planCode"],types:["string","number"]},{value:"currency",required:!1,types:["string"]},{value:"email",required:!0,or:["customerCode"],types:["string"]},{value:"label",required:!1,types:["string"]},{value:"firstName",required:!1,types:["string"]},{value:"lastName",required:!1,types:["string"]},{value:"reference",required:!1,types:["string"]},{value:"phone",required:!1,types:["string"]},{value:"customerCode",required:!1,override:"email",types:["string"]},{value:"channels",required:!1,types:["array"]},{value:"paymentRequest",required:!1,types:["string","number"]},{value:"paymentPage",required:!1,types:["string"]},{value:"hash",required:!1,types:["string"]},{value:"container",required:!1,types:["string"]},{value:"metadata",required:!1,types:["object"]},{value:"subaccountCode",required:!1,types:["string"]},{value:"bearer",required:!1,types:["string"]},{value:"transactionCharge",required:!1,types:["string","number"]},{value:"planCode",required:!1,override:"amount",types:["string"]},{value:"subscriptionCount",required:!1,types:["number"]},{value:"planInterval",required:!1,types:["string"]},{value:"subscriptionLimit",required:!1,types:["number"]},{value:"subscriptionStartDate",required:!1,types:["string"]},{value:"accessCode",required:!1,types:["string"]},{value:"onError",required:!1,types:["function"]},{value:"onLoad",required:!1,types:["function"]},{value:"onSuccess",required:!1,types:["function"]},{value:"onCancel",required:!1,types:["function"]},{value:"callback",required:!1,types:["function"]},{value:"onClose",required:!1,types:["function"]},{value:"onBankTransferConfirmationPending",required:!1,types:["function"]},{value:"firstname",required:!1,types:["string"]},{value:"lastname",required:!1,types:["string"]},{value:"customer_code",required:!1,types:["string"]},{value:"payment_request",required:!1,types:["string","number"]},{value:"subaccount",required:!1,types:["string"]},{value:"transaction_charge",required:!1,types:["number","string"]},{value:"plan",required:!1,types:["string"]},{value:"quantity",required:!1,types:["number"]},{value:"interval",required:!1,types:["string"]},{value:"invoice_limit",required:!1,types:["number","string"]},{value:"start_date",required:!1,types:["string"]},{value:"payment_page",required:!1,types:["number","string"]},{value:"order_id",required:!1,types:["number"]},{value:"ref",required:!1,types:["string"]},{value:"card",required:!1,types:["string"]},{value:"bank",required:!1,types:["string"]},{value:"split",required:!1,types:["object"]},{value:"split_code",required:!1,types:["string"]},{value:"transaction_type",required:!1,types:["string"]},{value:"subscription",required:!1,types:["number"]},{value:"language",required:!1,types:["string"]},{value:"connect_account",required:!1,types:["string"]},{value:"connect_split",required:!1,types:["array"]}];function Cse(t){return t?.length>500?t.split("?")[0]:t}function Ase(t){var e,r,n,s,i=Ei({},t);return i.metadata=t.metadata||{},i.metadata.referrer=(e=window.location,r=e.href,n=r===void 0?"":r,s=e.ancestorOrigins,[n].concat(_M(s===void 0?[]:s)).map(Cse).join(",")),i.metadata=JSON.stringify(i.metadata),i.mode="popup",t.split&&typeof t.split!="string"&&(i.split=JSON.stringify(i.split)),i.card!==void 0&&["false",!1].indexOf(i.card)>-1&&(i.channels=["bank"],delete i.card),i.bank!==void 0&&["false",!1].indexOf(i.bank)>-1&&(i.channels=["card"],delete i.bank),[{to:"firstname",from:"firstName"},{to:"lastname",from:"lastName"},{to:"customer_code",from:"customerCode"},{to:"payment_request",from:"paymentRequest"},{to:"subaccount",from:"subaccountCode"},{to:"transaction_charge",from:"transactionCharge"},{to:"plan",from:"planCode"},{to:"quantity",from:"subscriptionCount"},{to:"interval",from:"planInterval"},{to:"invoice_limit",from:"subscriptionLimit"},{to:"start_date",from:"subscriptionStartDate"},{to:"ref",from:"reference"}].forEach((function(a){i[a.from]&&(i[a.to]=i[a.from],delete i[a.from])})),Object.values(t).forEach((function(a,o){if(typeof a=="function"){var l=Object.keys(t)[o];delete i[l]}})),i}var Nse=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"],RM=window&&window.navigator&&(window.navigator.platform||window.navigator.userAgentData&&window.navigator.userAgentData.platform),LM=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.platform,r=t.userAgent,n=r===void 0?window&&window.navigator&&window.navigator.userAgent:r,s=e||RM;return Nse.includes(s)||n.includes("Mac")&&"ontouchend"in document},Tse=function(t,e,r){var n="".concat(wl.paystackApiUrl,"transaction/update_log/").concat(t),s={Authorization:"Bearer ".concat(e)};return fetch(n,{method:"POST",body:JSON.stringify({payload:JSON.stringify(r)}),headers:s})},Ise=function(t,e){var r="".concat(wl.paystackApiUrl,"transaction/set_ip/").concat(t),n={Authorization:"Bearer ".concat(e)};return fetch(r,{method:"POST",headers:n})},Pse={initializeLog:function(t){var e=t||{},r=e.attempts,n=e.authentication,s=e.errors,i=e.history;this.log={start_time:Math.round(Date.now()/1e3),time_spent:0,attempts:r||0,authentication:n,errors:s||0,success:!1,mobile:LM(),input:[],history:i||[]}},getTimeSpent:function(){var t=Math.round(Date.now()/1e3);return this.log.time_spent=t-this.log.start_time,this.log.time_spent},logAPIResponse:function(t,e){switch(t.status){case"success":return this.logApiSuccess(e);case"failed":return this.logApiError(t.message);default:return!1}},logValidationResponse:function(t){return this.log.history.push({type:"action",message:t,time:this.getTimeSpent()}),this.saveLog()},logAttempt:function(t){var e="Attempted to pay";return t&&(e+=" with ".concat(t)),this.log.attempts+=1,this.log.history.push({type:"action",message:e,time:this.getTimeSpent()}),this.saveLog()},logApiError:function(t){var e="Error";return t&&(e+=": ".concat(t)),this.log.errors+=1,this.log.history.push({type:"error",message:e,time:this.getTimeSpent()}),this.saveLog()},logApiSuccess:function(t){var e="Successfully paid";return t&&(e+=" with ".concat(t)),this.log.success=!0,this.log.history.push({type:"success",message:e,time:this.getTimeSpent()}),this.saveLog()},saveLog:function(){try{if(this.response)return Tse(this.id,this.response.merchant_key,this.log)}catch{}},saveIpAddress:function(){try{if(this.response)return Ise(this.id,this.response.merchant_key)}catch{}}},Rse=["language","connect_account"],Lse={requestInline:function(){var t=this,e=this.urlParameters,r=e.language,n=e.connect_account,s=B6(e,Rse),i=Ei({"Content-Type":"application/json"},r&&{"Accept-Language":r});return(this.accessCode?fetch(new URL("transaction/verify_access_code/".concat(this.accessCode),wl.paystackApiUrl).toString(),{headers:i}):fetch(new URL("/checkout/request_inline",wl.paystackApiUrl).toString(),{method:"POST",body:JSON.stringify(s),headers:Ei(Ei({},i),n&&{"x-connect-account":n})})).then((function(a){return a.json()})).then((function(a){if(a.status===!1)throw new Error(a.message);return t.response=a.data,t.id=a.data.id,t.status=a.data.transaction_status,t.accessCode=a.data.access_code,t.log=null,Object.assign(t,Pse),t.initializeLog(a.data.log),t.saveIpAddress(),a.data}))}},N3=(function(){function t(e){yM(this,t),(function(c){function d(y,w){this.message=y,this.issues=w||[]}if(!c||lp(c)!=="object")throw new d("Transaction parameters should be a non-empty object");var p=c;if("accessCode"in p)return{accessCode:p.accessCode};Object.keys(p).forEach((function(y){vv.find((function(w){return w.value===y}))!==void 0||delete p[y]}));var g=Object.keys(p),m=[];if(vv.filter((function(y){return y.required})).forEach((function(y){var w=!p[y.value],_=y.or?y.or.some((function(S){return p[S]})):null;w&&!_&&m.push({message:"Required parameter missing: ".concat(y.value)})})),g.forEach((function(y){var w=p[y],_=vv.find((function(T){return T.value===y})),S=lp(w);S==="object"&&Array.isArray(w)&&(S="array"),_.types.indexOf(S)<=-1&&m.push({message:"Invalid parameter type: ".concat(y),validTypes:_.types})})),g.forEach((function(y){var w=vv.find((function(_){return _.value===y}));w.override&&delete p[w.override]})),m.length)throw new d("Invalid transaction parameters",m)})(e),this.parameters=e,this.urlParameters=Ase(e),this.id=null,this.status=null,this.accessCode=e.accessCode||null,this.authorizationUrl=null,this.errors=[],this.response=null,this.isActive=!0;var r=e.onError,n=e.onLoad,s=e.onSuccess,i=e.onCancel,a=e.callback,o=e.onClose,l=e.onBankTransferConfirmationPending;this.callbacks={onError:r,onLoad:n,onSuccess:s,onCancel:i,onBankTransferConfirmationPending:l},this.deprecatedCallbacks={callback:a,onClose:o},Object.assign(this,Lse)}return vM(t,[{key:"onSetupError",value:function(e){this.logError(e),this.callbacks.onError&&this.callbacks.onError(e)}},{key:"onLoad",value:function(e){var r=e.id,n=e.customer,s=e.accessCode;Object.assign(this,{id:r,customer:n,accessCode:s}),this.authorizationUrl="".concat(wl.checkoutUrl).concat(s),this.callbacks.onLoad&&this.callbacks.onLoad({id:r,customer:n,accessCode:s})}},{key:"onSuccess",value:function(e){this.isActive=!1,this.response=e,this.status=e.status,this.callbacks.onSuccess&&this.callbacks.onSuccess(e),this.deprecatedCallbacks.callback&&this.deprecatedCallbacks.callback(e)}},{key:"setStatus",value:function(e){this.status=e}},{key:"onCancel",value:function(){this.callbacks.onCancel&&this.callbacks.onCancel(),this.deprecatedCallbacks.onClose&&this.deprecatedCallbacks.onClose()}},{key:"cancel",value:function(){this.isActive=!1,this.onCancel()}},{key:"onBankTransferConfirmationPending",value:function(){this.cancel(),this.callbacks.onBankTransferConfirmationPending&&this.callbacks.onBankTransferConfirmationPending()}},{key:"logError",value:function(e){this.errors.push(e)}}]),t})(),zS=console?console.warn||console.log:function(){};function TN(t,e,r){zS('"'.concat(t,'" has been deprecated, please use "').concat(e,'". ').concat(r))}var fn,jse=["preload","inlineTransaction","transactionData"],Fse=["container","styles","onElementsMount"];function T3(t,e){if(!t.length)return null;var r=t.filter((function(n){var s,i,a,o,l=!n.status||n.status==="abandoned",c=(s=n.parameters,i=e,a=Object.keys(s).sort().join("")===Object.keys(i).sort().join(""),o=Object.values(s).sort().join("")===Object.values(i).sort().join(""),a&&o);return l&&c}));return r.length?r[r.length-1]:null}function IN(t){var e=t.checkoutIframe,r=t.urlParameters;e&&r&&e.contentWindow.postMessage({type:"inline:url",path:"newTransaction",params:r},"*")}var Dse="trackCheckoutClosed",PN="trackPaymentError",Ose="trackPaymentAttempt",Mse="trackPaymentCompletion";function I3(t){throw zS(t),new Error(t)}var RN,LN,jM=(function(){function t(e){var r,n;yM(this,t),this.id=(function(){for(var s="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<5;a+=1)s+=i.charAt(Math.floor(Math.random()*i.length));return s})(),this.transactions=[],this.isOpen=!1,this.isLoaded=!1,this.isDeprecatedApi=e&&e.isDeprecatedApi,e&&e.isEmbed?this.isEmbed=!0:e&&e.isPaymentRequest&&(e.container&&yv(e.container)||I3("A container is required to mount the payment request button"),this.paymentRequestContainer=yv(e.container),this.paymentRequestTransaction=null),this.preCheckoutModal=null,this.backgroundIframe=(function(s){var i=C3("inline-background-".concat(s));i.style.cssText=`
  z-index: 999999999999999;
  background: transparent;
  background: rgba(0, 0, 0, 0.75);    
  border: 0px none transparent;
  overflow-x: hidden;
  overflow-y: hidden;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  transition: opacity 0.3s;
  -webkit-transition: opacity 0.3s;
  visibility: hidden;
  display: none;
`,document.body.appendChild(i);var a=i.contentWindow.document;return a.open(),a.write(`
  <!DOCTYPE html>
  <html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Paystack Popup Loader</title>
    <style>
      .app-loader {
        margin: 200px 0;
        text-align: center;
        color: white;
      }      
      @keyframes app-loader__spinner {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @-webkit-keyframes app-loader__spinner {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      .app-loader__spinner {
        position: relative;
        display: inline-block;
      }
      .app-loader__spinner div {
        left: 95px;
        top: 35px;
        position: absolute;
        -webkit-animation: app-loader__spinner linear 1s infinite;
        animation: app-loader__spinner linear 1s infinite;
        background: white;
        width: 10px;
        height: 30px;
        border-radius: 40%;
        -webkit-transform-origin: 5px 65px;
        transform-origin: 5px 65px;
      }
      .app-loader__spinner div:nth-child(1) {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
        -webkit-animation-delay: -0.916666666666667s;
        animation-delay: -0.916666666666667s;
      }
      .app-loader__spinner div:nth-child(2) {
        -webkit-transform: rotate(30deg);
        transform: rotate(30deg);
        -webkit-animation-delay: -0.833333333333333s;
        animation-delay: -0.833333333333333s;
      }
      .app-loader__spinner div:nth-child(3) {
        -webkit-transform: rotate(60deg);
        transform: rotate(60deg);
        -webkit-animation-delay: -0.75s;
        animation-delay: -0.75s;
      }
      .app-loader__spinner div:nth-child(4) {
        -webkit-transform: rotate(90deg);
        transform: rotate(90deg);
        -webkit-animation-delay: -0.666666666666667s;
        animation-delay: -0.666666666666667s;
      }
      .app-loader__spinner div:nth-child(5) {
        -webkit-transform: rotate(120deg);
        transform: rotate(120deg);
        -webkit-animation-delay: -0.583333333333333s;
        animation-delay: -0.583333333333333s;
      }
      .app-loader__spinner div:nth-child(6) {
        -webkit-transform: rotate(150deg);
        transform: rotate(150deg);
        -webkit-animation-delay: -0.5s;
        animation-delay: -0.5s;
      }
      .app-loader__spinner div:nth-child(7) {
        -webkit-transform: rotate(180deg);
        transform: rotate(180deg);
        -webkit-animation-delay: -0.416666666666667s;
        animation-delay: -0.416666666666667s;
      }
      .app-loader__spinner div:nth-child(8) {
        -webkit-transform: rotate(210deg);
        transform: rotate(210deg);
        -webkit-animation-delay: -0.333333333333333s;
        animation-delay: -0.333333333333333s;
      }
      .app-loader__spinner div:nth-child(9) {
        -webkit-transform: rotate(240deg);
        transform: rotate(240deg);
        -webkit-animation-delay: -0.25s;
        animation-delay: -0.25s;
      }
      .app-loader__spinner div:nth-child(10) {
        -webkit-transform: rotate(270deg);
        transform: rotate(270deg);
        -webkit-animation-delay: -0.166666666666667s;
        animation-delay: -0.166666666666667s;
      }
      .app-loader__spinner div:nth-child(11) {
        -webkit-transform: rotate(300deg);
        transform: rotate(300deg);
        -webkit-animation-delay: -0.083333333333333s;
        animation-delay: -0.083333333333333s;
      }
      .app-loader__spinner div:nth-child(12) {
        -webkit-transform: rotate(330deg);
        transform: rotate(330deg);
        -webkit-animation-delay: 0s;
        animation-delay: 0s;
      }
      .app-loader__spinner {
        width: 40px;
        height: 40px;
        -webkit-transform: translate(-20px, -20px) scale(0.2) translate(20px, 20px);
        transform: translate(-20px, -20px) scale(0.2) translate(20px, 20px);
      }
    </style>
  </head>

  <body>
    <div id="app-loader" class="app-loader">
      <div id="spinner" class="app-loader__spinner">
        <div></div><div></div><div></div><div></div><div></div><div></div><div>
        </div><div></div><div></div><div></div><div></div><div></div>
      </div>
    </div>
  </body>

  </html>
`),a.close(),i})(this.id),this.checkoutIframe=(r=this.id,(n=C3("inline-checkout-".concat(r))).src="".concat(wl.checkoutUrl,"popup"),n.style.cssText=`
  z-index: 999999999999999;
  background: transparent;
  border: 0px none transparent;
  overflow-x: hidden;
  overflow-y: hidden;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  visibility: hidden;
  display: none;
  height: 100%;
`,n.setAttribute("allowpaymentrequest","true"),n.setAttribute("allow","payment; clipboard-read; clipboard-write"),document.body.appendChild(n),n),this.registerListeners()}return vM(t,[{key:"registerListeners",value:function(){var e=this;window.addEventListener("message",(function(r){var n="".concat(r.origin,"/")===wl.checkoutUrl,s=e.checkoutIframe&&e.checkoutIframe.contentWindow===r.source,i=e.isEmbed;n||s?e.respondToEvent(r):i&&e.respondToEmbedEvents(r)}))}},{key:"sendAnalyticsEventToCheckout",value:function(e,r){this.checkoutIframe.contentWindow.postMessage({type:"analytics",action:e,params:r},"*")}},{key:"checkout",value:function(e){this.activeTransaction()&&this.activeTransaction().cancel(),fn=this;var r=T3(this.transactions,e)||new N3(e);return new Promise((function(n,s){r.requestInline().then((function(i){var a=(function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=l.platform,d=l.userAgent,p=d===void 0?window&&window.navigator&&window.navigator.userAgent:d,g=c||RM,m=p&&!!p.match(/Version\/[\d.]+.*Safari/),y=g&&/(Mac)/i.test(g);return LM()||y&&m})()&&V6(i.channels),o=(function(){var l,c,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return!((l=d.link_config)===null||l===void 0||!l.enabled||(c=d.link_config)===null||c===void 0||!c.has_payment_instruments)})(i);o||a?(fn.preloadTransaction({inlineTransaction:r,transactionData:i}),fn.preCheckoutModal=(function(l,c){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=document.querySelector("#pre-checkout-modal-".concat(l));if(p){if(AN(p)&&A3(p))return p;p.remove()}var g=document.createElement("div");g.classList.add("pre-checkout-modal"),g.id="pre-checkout-modal-".concat(l),g.style.zIndex=_se()+1;var m=document.createElement("div");m.classList.add("pre-checkout-modal__content"),g.appendChild(m);var y=c||{},w=y.merchant_logo,_=y.merchant_name,S=y.email,T=y.amount,I=y.currency,M=y.label,K=y.channels,W=new Intl.NumberFormat("en",{style:"currency",currency:I,currencyDisplay:"code",maximumFractionDigits:2,minimumFractionDigits:0}).format(T/100),L=document.createElement("div");L.classList.add("payment-info"),L.innerHTML='<img class="merchant-logo" src="'.concat(w,'" alt="').concat(_,` Logo">
    <div class="customer-info">
      <div class="customer-email">`).concat(M||S,`</div>
      <div class="transaction-amount">Pay <span class="amount">`).concat(W,`</span></div>
    </div>`),m.appendChild(L),m.innerHTML+=xse;var A=document.createElement("div");A.classList.add("modal-wrapper"),d.canPayWithVault?Sse(A,{canPayWithApplePay:d.canPayWithApplePay,hasOtherPaymentMethods:NN(K)}):Ese(A,{hasOtherPaymentMethods:NN(K)}),A.innerHTML=A.innerHTML+EM+gse,m.appendChild(A);var E=document.createElement("style");return E.textContent=vse,document.body.appendChild(E),document.body.appendChild(g),g})(fn.id,i,{canPayWithVault:o,canPayWithApplePay:a}),a?(fn.paymentRequestContainer=A3(fn.preCheckoutModal),CN(fn.paymentRequestContainer,{channels:i.channels,styles:{applePay:{width:"100%",type:"pay",height:"42px",padding:"15px",borderRadius:"5px"}}},i.merchant_id).then((function(){fn.registerPaymentRequestEventListeners()})).catch((function(){o?A3(fn.preCheckoutModal).remove():(fn.closePreCheckoutModal(),fn.animateCheckoutIn())})).finally((function(){n(r)}))):n(r)):(fn.newTransaction({inlineTransaction:r,transactionData:i}),n(r))})).catch((function(i){r.onSetupError({status:!1,message:i.message}),s(i)}))}))}},{key:"openPreCheckoutModal",value:function(){var e;this.registerPreCheckoutModalEventListeners(),e=this.preCheckoutModal,new Promise((function(r,n){try{var s=e.querySelector(".pre-checkout-modal__content");e.classList.add("show"),setTimeout((function(){s.classList.add("show"),r(!0)}),50)}catch(i){n(i)}}))}},{key:"registerPreCheckoutModalEventListeners",value:function(){var e,r=this,n=!1,s=this.activeTransaction();document.addEventListener("touchstart",(function(l){l.preventDefault(),n||(n=!0,e=setTimeout((function(){n=!1}),125))}),!0),document.addEventListener("touchend",(function(l){l.target&&l.target.isSameNode(fn.preCheckoutModal)&&n&&(clearTimeout(e),fn.closePreCheckoutModal(),s&&s.cancel()),n=!1}),!0);var i=AN(this.preCheckoutModal);i&&(i.onclick=function(){r.closePreCheckoutModal(),r.animateCheckoutIn()});var a=this.preCheckoutModal.querySelector("#".concat(TM));a&&(a.onclick=function(){r.closePreCheckoutModal(),r.animateCheckoutIn(),r.checkoutIframe.contentWindow.postMessage({type:"inline:pay-with-vault"},"*")});var o=(function(l){return l.querySelector("#apple-pay-close-button")})(this.preCheckoutModal);o.onclick=function(){r.sendAnalyticsEventToCheckout(Dse),r.closePreCheckoutModalAndCancelTransaction()}}},{key:"closePreCheckoutModal",value:function(e){var r;this.preCheckoutModal&&(e==="failed"?(r=this.preCheckoutModal)&&(r.querySelector("#apple-pay-mark--light").innerHTML=`<svg width="50" height="30" viewBox="0 0 21 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="error-icon">
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="error" fill-rule="nonzero">
            <path d="M9.14672,0.47855 L0.14829,15.47855 C-0.0403320234,15.7872042 -0.0475647902,16.1736607 0.129375884,16.4891566 C0.306316558,16.8046526 0.639843999,16.9999993 1.00157,17 L19.43546,17 C19.797186,16.9999993 20.1307134,16.8046526 20.3076541,16.4891566 C20.4845948,16.1736607 20.477362,15.7872042 20.28874,15.47855 L10.85328,0.47855 C10.671624,0.181297031 10.3483651,3.00996351e-06 10,3.00996351e-06 C9.6516349,3.00996351e-06 9.32837603,0.181297031 9.14672,0.47855 Z" id="Shape" fill="#FFAA22"></path>
            <rect id="Rectangle-path" fill="#FFFFFF" x="9" y="6" width="2" height="5"></rect>
            <rect id="Rectangle-path" fill="#FFFFFF" x="9" y="12" width="2" height="2"></rect>
        </g>
    </g>
</svg>`,r.querySelector("#apple-pay-description").textContent="An error occurred while paying with Apple Pay. Please try again or use another payment method."):((function(n){n&&(n.querySelector(".pre-checkout-modal__content").classList.remove("show"),n.classList.remove("show"))})(this.preCheckoutModal),this.preCheckoutModal.remove(),this.preCheckoutModal=null))}},{key:"closePreCheckoutModalAndCancelTransaction",value:function(){this.preCheckoutModal&&(this.cancelTransaction(),this.checkoutIframe&&this.checkoutIframe.contentWindow&&this.checkoutIframe.contentWindow.postMessage("close","*"),this.closePreCheckoutModal())}},{key:"newTransaction",value:function(e){var r=e.preload,n=e.inlineTransaction,s=e.transactionData,i=B6(e,jse),a=this.paymentRequestContainer&&xw(this.paymentRequestContainer);if(this.activeTransaction()&&!a&&this.activeTransaction().cancel(),n&&s)return this.transactions.push(n),this.isDeprecatedApi||this.open({accessCode:s.access_code,language:n.urlParameters.language},r),n;var o=T3(this.transactions,n?n.parameters:i);if(o)return o.isActive=!0,this.isDeprecatedApi||this.open({accessCode:o.accessCode,language:o.urlParameters.language},r),o;var l=n||new N3(i),c=l.accessCode?{accessCode:l.accessCode,language:l.urlParameters.language}:l.urlParameters;return this.transactions.push(l),this.isDeprecatedApi||this.open(c,r),l}},{key:"preloadTransaction",value:function(e){var r=this;return this.newTransaction(Ei(Ei({},e),{},{preload:!0})),function(){return r.animateCheckoutIn()}}},{key:"paymentRequest",value:function(e){var r=e.container,n=e.styles,s=e.onElementsMount,i=B6(e,Fse);return fn=this,new Promise((function(a,o){var l=document.querySelector("#".concat(e.loadPaystackCheckoutButton));if(CM()){fn.activeTransaction()&&fn.activeTransaction().cancel(),r&&yv(r)||I3("A container is required to mount the payment request button"),fn.paymentRequestContainer=yv(r);var c=T3(fn.transactions,i),d=c||new N3(i);d.requestInline().then((function(m){CN(fn.paymentRequestContainer,{channels:m.channels,styles:n},m.merchant_id).then((function(y){s&&s(y)})).catch((function(){s&&s(null)})).finally((function(){if(c?d.isActive=!0:fn.transactions.push(d),fn.registerPaymentRequestEventListeners(),l){var y=fn.preloadTransaction({inlineTransaction:d,transactionData:m});l.onclick=y}a(d)}))})).catch((function(m){d.onSetupError({status:!1,message:m.message}),o(m)}))}else{if(e&&e.loadPaystackCheckoutButton)if(l){var p=fn.preloadTransaction(i);l.onclick=p}else zS("This device does not support any payment request wallet options. Please consult our documentation at https://developers.paystack.co/docs/paystack-inline to see how to load alternative payment options using 'loadPaystackCheckoutButton'");s&&s(null);var g=fn.activeTransaction();a(g)}}))}},{key:"registerApplePayEventListener",value:function(){var e=this;xw(this.paymentRequestContainer).onclick=function(){return e.startApplePay()}}},{key:"registerPaymentRequestEventListeners",value:function(){var e=this.activeTransaction();e&&V6(e.response.channels)?this.registerApplePayEventListener():bse(this.paymentRequestContainer)}},{key:"startApplePay",value:function(){var e,r,n,s,i,a=this,o="apple pay",l=this.activeTransaction();if(l){var c={channel:"apple_pay",paymentMethod:o,currency:l.currency,amount:l.amount},d={channel:"apple_pay",currency:l.currency,amount:l.amount,timeSpent:l.getTimeSpent()};try{l.logAttempt(o),this.sendAnalyticsEventToCheckout(Ose,c);var p=(e={currency:l.response.currency,amount:l.response.amount,merchantName:l.response.merchant_name,interval:l.response.plan_details&&l.response.plan_details.interval},r=e.currency,n=e.amount,s=e.merchantName,i=e.interval,Ei({countryCode:"NG",currencyCode:r,merchantCapabilities:["supports3DS","supportsCredit","supportsDebit"],supportedNetworks:["visa","masterCard"],requiredBillingContactFields:["postalAddress","name","phone","email"],total:{label:"".concat(s," - Paystack"),type:"final",amount:String(kN(n))}},typeof i=="string"&&i.trim()!==""&&{lineItems:[{label:wse(i),amount:String(kN(n))}]})),g=new window.ApplePaySession(wl.applePayVersion,p);g.onvalidatemerchant=function(m){var y=(function(w){var _=w.transactionId,S=w.validationURL,T=w.merchantName,I=w.domainName,M=I===void 0?window&&window.location&&window.location.hostname:I,K="".concat(wl.paymentBaseUrl).concat(wl.applePayValidateSessionPath),W=EN({transaction:_,sessionUrl:S,displayName:T,domainName:M});return fetch(K,Ei(Ei({},SN),{},{body:W})).then((function(L){return L.json()}))})({validationURL:m.validationURL,transactionId:l.id,merchantName:l.response.merchant_name});y.then((function(w){w.status!=="success"?l.onSetupError(w):g.completeMerchantValidation(w.data),l.logValidationResponse(w.message)})).catch((function(w){l.onSetupError(w)}))},g.oncancel=function(){fn.preCheckoutModal||l.onCancel()},g.onpaymentauthorized=function(m){var y=m.payment,w=(function(_){var S=_.transactionId,T=_.payment,I="".concat(wl.paymentBaseUrl).concat(wl.applePayChargePath),M=EN({transaction:S,paymentObject:JSON.stringify(T)});return fetch(I,Ei(Ei({},SN),{},{body:M})).then((function(K){return K.json()}))})({transactionId:l.id,payment:y});w.then((function(_){l.logAPIResponse(_,o),_.status==="success"?(g.completePayment(g.STATUS_SUCCESS),l.onSuccess(_),a.sendAnalyticsEventToCheckout(Mse,d)):(g.completePayment(g.STATUS_FAILURE),l.onSetupError(_),a.sendAnalyticsEventToCheckout(PN,{channel:"apple_pay",message:_&&_.message||"Transaction attempt failed"})),fn.closePreCheckoutModal(_.status)})).catch((function(_){g.completePayment(g.STATUS_FAILURE),l.onSetupError(_),a.sendAnalyticsEventToCheckout(PN,{channel:"apple_pay",message:_&&_.message||"Error occurred"}),fn.closePreCheckoutModal("failed")}))},g.begin()}catch(m){l.onSetupError(m)}}else I3("Could not initiate apple pay transaction")}},{key:"resumeTransaction",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.onSuccess,s=r.onCancel,i=r.onLoad,a=r.onError;return this.newTransaction({accessCode:e,onSuccess:n,onCancel:s,onLoad:i,onError:a})}},{key:"activeTransaction",value:function(){var e=this.transactions.filter((function(n){return n.isActive})),r=e.length?e[e.length-1]:null;return r}},{key:"cancelTransaction",value:function(e){var r=this.transactions.find((function(n){return n.id===e}))||this.activeTransaction();r&&(r.cancel(),this.close())}},{key:"respondToEvent",value:function(e){if(e){var r,n,s=this.activeTransaction();try{var i=e.data||e.message,a=i.event,o=i.data;if(a)switch(a){case"loaded:checkout":if(this.isLoaded=!0,s){var l=this.checkoutIframe,c=s.urlParameters,d=s.response;IN({checkoutIframe:l,urlParameters:d?{accessCode:d.access_code,language:c?.language}:c})}break;case"loaded:transaction":r=this.backgroundIframe,(n=r.contentWindow.document)&&(n.getElementById("app-loader").style.display="none"),this.preCheckoutModal&&this.openPreCheckoutModal(),s.onLoad(o);break;case"error":o.type==="setup"?s.onSetupError(o):s.logError(o);break;case"cancel":case"close":this.close();var p=o&&o.status;p&&s.setStatus(p),!(this.paymentRequestContainer&&xw(this.paymentRequestContainer)&&!this.preCheckoutModal)&&(s.isActive=!1),s.onCancel();break;case"transfer:pending":this.close();var g=o&&o.status;g&&s.setStatus(g),s.onBankTransferConfirmationPending();break;case"success":this.close(),s.onSuccess(o)}}catch{}}}},{key:"respondToEmbedEvents",value:function(e){var r,n,s=this.activeTransaction(),i=e.data||e.message;if(i&&(typeof i=="string"||i instanceof String)){var a={action:n=(r=i)&&typeof r=="string"?r.split(" ")[0]:null,data:n?r.split(" ").slice(2).join(" "):null};a&&a.action==="PaystackClose"&&a.data&&s.onSuccess(i),a.action==="PaystackTLSClose"&&s.cancel()}}},{key:"animateCheckoutIn",value:function(){var e,r=this;if(!this.isOpen){var n=this.checkoutIframe,s=this.backgroundIframe;(e={checkoutIframe:n,backgroundIframe:s},new Promise((function(i,a){e||a("No dom element provided");var o=e.checkoutIframe,l=e.backgroundIframe;o&&l||a("No dom element provided"),o.style.display="",o.style.visibility="visible",l.style.display="",l.style.visibility="visible",i()}))).then((function(){r.checkoutIframe.contentWindow.postMessage("render","*")})),this.isOpen=!0}}},{key:"open",value:function(e,r){e&&(IN({checkoutIframe:this.checkoutIframe,urlParameters:e}),r||this.animateCheckoutIn())}},{key:"close",value:function(){var e=this;if(this.isOpen){var r,n=this.checkoutIframe,s=this.backgroundIframe;(r={checkoutIframe:n,backgroundIframe:s},new Promise((function(i,a){r||a("No dom element provided");var o=r.checkoutIframe,l=r.backgroundIframe;o&&l||a("No dom element provided"),l.style.opacity=0,o.style.display="none",o.style.visibility="hidden",setTimeout((function(){l.style.display="none",l.style.visibility="hidden",l.style.opacity=1,i()}),300)}))).then((function(){e.checkoutIframe.contentWindow.postMessage("close","*")})),this.isOpen=!1}}},{key:"isLoaded",value:function(){return this.isLoaded}}],[{key:"setup",value:function(e){var r=e&&e.container;fn||(fn=new t({isDeprecatedApi:!0,isEmbed:r})),TN("PaystackPop.setup()","new PaystackPop()","Please consult our documentation at https://developers.paystack.co/docs/paystack-inline");var n=fn.newTransaction(e,"deprecated"),s=n.urlParameters;if(r){var i="".concat(wl.siteUrl,"/assets/payment/production/inline.html?").concat(SM(s)),a=(function(o,l){var c=C3("embed-checkout-".concat(o));return c.style.cssText=`
  background: transparent;
  background: rgba(0,0,0,0);
  border: 0px none transparent;
  overflow-x: hidden;
  overflow-y: hidden;
  nmargin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  visibility: hidden;
  display: none;
`,c.src=l,c.id=o,c.name=o,c})(fn.id,i);(function(o,l){var c=document.getElementById(o);c.innerHTML="",c.removeAttribute("style"),c.className="paystack-embed-container",c.style.position="relative",c.style.width="100%",c.appendChild(l)})(e.container,a),a.onload=function(){var o;a.contentWindow.postMessage("PaystackOpen ".concat(fn.id),"*"),o=a,new Promise((function(l,c){o||c("No dom element provided"),o.style.display="",o.style.visibility="visible",l()}))}}else n.openIframe=function(){TN("openIframe","open","Please consult our documentation at https://developers.paystack.co/docs/paystack-inline"),fn.open(s)};return n}}]),t})();if(RN=_N().length>0,LN=Em()&&Em().parentElement.tagName==="FORM",RN&&LN){var P3,p0=(function(){var t={},e=Em();return _N().forEach((function(r){var n=e.getAttribute(r),s=r.split("data-")[1].replace(/-([a-z])/g,(function(i){return i[1].toUpperCase()}));t[s]=n})),(function(r){if(r.buttonId&&!document.getElementById(r.buttonId))throw new Error("Please make sure the buttonId is an element available in the DOM");var n=Ei({},r);n.buttonText=r.buttonText||"Pay",n.buttonVariant="normal",n.buttonWordmarkVariant="normal";var s=["normal","light"];return r.buttonVariant&&s.indexOf(r.buttonVariant)>-1&&(n.buttonVariant=r.buttonVariant),r.buttonWordmarkVariant&&s.indexOf(r.buttonWordmarkVariant)>-1&&(n.buttonWordmarkVariant=r.buttonWordmarkVariant),n})(t)})(),jN=Em().parentElement;fn||(fn=new jM),(function(t){var e;if(t.id)(e=document.getElementById(t.id)).setAttribute("data-inline-id",t.id);else{var r=document.createElement("div");r.id="inline-button-".concat(t.inlineId),r.innerHTML=(function(n){var s,i,a={normal:`
  <svg id="inline-button-wordmark" width="137" height="13" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M.037 5.095l1.075-.135c-.011-.774-.025-1.944-.013-2.149C1.19 1.364 2.38.134 3.81.013 3.9.006 3.99.002 4.077 0a2.947 2.947 0 0 1 2.046.76c.574.509.95 1.26 1.008 2.007.015.192.01 1.491.01 2.257l1.096.163L8.2 11.44 4.093 12 0 11.346l.037-6.251zm4.106-.514l1.724.256c-.007-.933-.05-2.295-.26-2.654-.319-.545-.846-.867-1.443-.88h-.063c-.607.008-1.138.322-1.458.864-.222.378-.266 1.66-.265 2.637l1.765-.223zM18.228 10.108c-.576 0-1.064-.072-1.464-.216a2.864 2.864 0 0 1-.972-.6 2.552 2.552 0 0 1-.588-.864 4.067 4.067 0 0 1-.252-1.044h1.008c.032.256.088.5.168.732.08.224.204.424.372.6.168.168.388.304.66.408.28.096.636.144 1.068.144.28 0 .536-.036.768-.108.24-.08.448-.192.624-.336.176-.144.312-.316.408-.516.104-.2.156-.42.156-.66 0-.24-.032-.448-.096-.624a1.02 1.02 0 0 0-.336-.468 1.885 1.885 0 0 0-.636-.324 6.4 6.4 0 0 0-1.008-.228 8.79 8.79 0 0 1-1.212-.276 3.246 3.246 0 0 1-.9-.432 1.982 1.982 0 0 1-.564-.672c-.128-.272-.192-.6-.192-.984 0-.328.068-.632.204-.912.136-.288.324-.536.564-.744.248-.208.54-.372.876-.492.336-.12.708-.18 1.116-.18.864 0 1.548.204 2.052.612.512.4.812.984.9 1.752h-.936c-.104-.544-.316-.932-.636-1.164-.32-.24-.78-.36-1.38-.36-.592 0-1.04.132-1.344.396a1.255 1.255 0 0 0-.444.996c0 .208.024.396.072.564.056.16.156.3.3.42.152.12.36.228.624.324a6.72 6.72 0 0 0 1.068.228c.48.072.9.168 1.26.288.36.12.664.276.912.468s.432.428.552.708c.128.28.192.624.192 1.032 0 .36-.076.696-.228 1.008a2.472 2.472 0 0 1-.612.804c-.264.224-.58.4-.948.528-.36.128-.752.192-1.176.192zM25.355 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM32.091 10.108c-.44 0-.848-.072-1.224-.216a3.054 3.054 0 0 1-.972-.636 3.12 3.12 0 0 1-.648-1.008 3.626 3.626 0 0 1-.228-1.32v-.096c0-.48.08-.916.24-1.308.16-.4.376-.74.648-1.02.28-.28.604-.496.972-.648.376-.16.772-.24 1.188-.24.328 0 .644.04.948.12.312.08.588.208.828.384.248.168.456.392.624.672.168.28.276.62.324 1.02h-.984c-.08-.496-.284-.848-.612-1.056-.32-.208-.696-.312-1.128-.312a1.93 1.93 0 0 0-.804.168c-.24.112-.452.272-.636.48a2.23 2.23 0 0 0-.42.744 2.991 2.991 0 0 0-.156.996v.096c0 .776.188 1.364.564 1.764.384.392.88.588 1.488.588.224 0 .436-.032.636-.096a1.651 1.651 0 0 0 .96-.768c.112-.192.18-.416.204-.672h.924a2.595 2.595 0 0 1-.276.948 2.386 2.386 0 0 1-.576.744c-.24.208-.52.372-.84.492-.32.12-.668.18-1.044.18zM38.335 10.108a2.83 2.83 0 0 1-.876-.132 1.724 1.724 0 0 1-.684-.42 2.145 2.145 0 0 1-.456-.756c-.112-.304-.168-.672-.168-1.104V3.724h.996v3.924c0 .552.116.956.348 1.212.24.256.608.384 1.104.384.224 0 .44-.036.648-.108.208-.072.392-.18.552-.324.16-.144.288-.324.384-.54.096-.216.144-.464.144-.744V3.724h.996V10h-.996v-.996c-.144.296-.388.556-.732.78-.336.216-.756.324-1.26.324zM43.216 3.724h.996v1.128c.2-.352.452-.64.756-.864.312-.232.748-.356 1.308-.372v.936a4.461 4.461 0 0 0-.852.12 1.647 1.647 0 0 0-.66.324 1.472 1.472 0 0 0-.408.612c-.096.248-.144.564-.144.948V10h-.996V3.724zM50 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM56.496 10.108c-.408 0-.788-.068-1.14-.204a2.683 2.683 0 0 1-.9-.612 3.01 3.01 0 0 1-.588-.984 4.01 4.01 0 0 1-.204-1.32v-.096c0-.48.072-.92.216-1.32.144-.4.344-.744.6-1.032.256-.296.564-.524.924-.684.36-.16.756-.24 1.188-.24.528 0 .956.112 1.284.336.328.216.584.476.768.78V.724h.996V10h-.996V8.92c-.088.152-.208.3-.36.444a2.792 2.792 0 0 1-.516.384 2.874 2.874 0 0 1-.6.252c-.216.072-.44.108-.672.108zm.108-.828c.288 0 .56-.048.816-.144.256-.096.476-.24.66-.432.184-.2.328-.448.432-.744.112-.304.168-.656.168-1.056v-.096c0-.808-.18-1.404-.54-1.788-.352-.384-.836-.576-1.452-.576-.624 0-1.112.208-1.464.624-.352.416-.528 1.008-.528 1.776v.096c0 .392.048.736.144 1.032.104.296.24.54.408.732.176.192.38.336.612.432.232.096.48.144.744.144zM67.712 10.108c-.512 0-.948-.112-1.308-.336a2.38 2.38 0 0 1-.816-.804V10h-.996V.724h.996V4.78a1.92 1.92 0 0 1 .348-.432c.152-.144.32-.268.504-.372.192-.112.396-.2.612-.264.216-.064.436-.096.66-.096.408 0 .788.072 1.14.216.352.144.652.352.9.624.256.272.456.604.6.996.144.392.216.832.216 1.32v.096c0 .48-.068.92-.204 1.32a3.103 3.103 0 0 1-.576 1.02 2.583 2.583 0 0 1-.9.672 2.937 2.937 0 0 1-1.176.228zm-.096-.828c.624 0 1.1-.2 1.428-.6.328-.408.492-.996.492-1.764V6.82c0-.4-.052-.748-.156-1.044a2.095 2.095 0 0 0-.42-.732 1.53 1.53 0 0 0-.612-.444 1.798 1.798 0 0 0-.744-.156c-.288 0-.56.048-.816.144a1.71 1.71 0 0 0-.648.444c-.184.192-.328.44-.432.744a3.152 3.152 0 0 0-.156 1.044v.096c0 .8.192 1.396.576 1.788.384.384.88.576 1.488.576zM73.63 9.352l-2.46-5.628h1.068l1.92 4.5 1.74-4.5h1.02l-3.468 8.46h-1.008l1.188-2.832zM87.127 3.669A3.138 3.138 0 0 0 86.1 2.95a3.09 3.09 0 0 0-1.228-.25c-.448 0-.848.086-1.187.26a2.199 2.199 0 0 0-.662.497v-.191a.387.387 0 0 0-.214-.348.323.323 0 0 0-.14-.03h-1.315a.314.314 0 0 0-.254.116.377.377 0 0 0-.1.262v8.97c0 .1.034.188.1.258a.34.34 0 0 0 .254.103h1.341a.342.342 0 0 0 .244-.103.336.336 0 0 0 .11-.259v-3.06c.178.202.417.357.702.464.35.134.72.203 1.093.203.43 0 .848-.082 1.242-.248a3.124 3.124 0 0 0 1.04-.724c.305-.326.545-.709.707-1.128a3.93 3.93 0 0 0 .263-1.477c0-.54-.086-1.037-.263-1.477a3.387 3.387 0 0 0-.706-1.12zm-1.204 3.24c-.073.19-.18.362-.315.51a1.415 1.415 0 0 1-1.065.466c-.2.001-.4-.04-.584-.12a1.484 1.484 0 0 1-.49-.346 1.593 1.593 0 0 1-.32-.51 1.738 1.738 0 0 1-.115-.63c0-.224.04-.435.115-.631a1.532 1.532 0 0 1 .804-.846c.185-.086.386-.13.59-.129.215 0 .414.044.593.13.177.083.338.199.474.341a1.622 1.622 0 0 1 .425 1.135c0 .225-.037.436-.112.63zM95.298 2.89h-1.33a.339.339 0 0 0-.246.11.384.384 0 0 0-.108.266v.166a1.856 1.856 0 0 0-.602-.472 2.525 2.525 0 0 0-1.166-.258 3.227 3.227 0 0 0-2.284.964 3.554 3.554 0 0 0-.734 1.123 3.827 3.827 0 0 0-.275 1.477c0 .54.092 1.037.275 1.477.184.434.427.817.728 1.128a3.146 3.146 0 0 0 2.277.973c.437 0 .834-.088 1.173-.259.25-.13.456-.287.608-.471v.177a.34.34 0 0 0 .11.259.341.341 0 0 0 .244.104h1.33a.324.324 0 0 0 .25-.105.349.349 0 0 0 .102-.258V3.267a.377.377 0 0 0-.1-.262.325.325 0 0 0-.252-.115zM93.502 6.9a1.55 1.55 0 0 1-.312.511c-.136.143-.296.26-.473.344-.178.085-.38.129-.596.129-.207 0-.407-.044-.59-.13a1.501 1.501 0 0 1-.791-.855 1.766 1.766 0 0 1-.112-.62c0-.225.038-.436.112-.632.075-.193.181-.364.314-.504.137-.143.3-.26.478-.342.182-.085.382-.129.59-.129.215 0 .417.044.595.13.178.085.338.2.473.341a1.623 1.623 0 0 1 .424 1.135c0 .215-.037.424-.112.622zM108.567 6.094a2.265 2.265 0 0 0-.654-.402c-.247-.101-.509-.181-.785-.235l-1.014-.204c-.26-.05-.441-.117-.543-.203a.328.328 0 0 1-.136-.264c0-.11.063-.2.189-.282.137-.086.329-.13.566-.13.26 0 .518.053.757.157.243.106.471.226.67.36.295.187.546.162.727-.053l.487-.57a.543.543 0 0 0 .152-.357c0-.128-.064-.245-.185-.351-.207-.184-.533-.378-.971-.568-.437-.192-.987-.29-1.637-.29-.427 0-.82.058-1.168.172-.35.116-.65.276-.893.474-.245.204-.438.44-.57.713a2 2 0 0 0-.198.875c0 .56.167 1.017.496 1.358.328.333.766.56 1.304.67l1.054.232c.3.062.528.132.675.21.129.067.19.163.19.297 0 .12-.061.227-.188.324-.133.104-.342.155-.622.155a1.83 1.83 0 0 1-.831-.19 3.056 3.056 0 0 1-.678-.458.995.995 0 0 0-.307-.17c-.126-.037-.268.003-.431.13l-.583.461c-.169.145-.24.32-.209.522.029.194.19.394.491.62.269.193.614.368 1.029.518.415.151.901.229 1.453.229.444 0 .854-.058 1.215-.172.362-.119.681-.278.941-.48a2.056 2.056 0 0 0 .819-1.663c0-.319-.053-.6-.165-.836a1.843 1.843 0 0 0-.447-.6zM114.383 7.73a.363.363 0 0 0-.295-.192.55.55 0 0 0-.343.113c-.095.062-.198.11-.306.141a.75.75 0 0 1-.426.013.43.43 0 0 1-.181-.093.554.554 0 0 1-.143-.204.92.92 0 0 1-.059-.362v-2.46h1.731c.099 0 .188-.04.266-.117a.368.368 0 0 0 .112-.26V3.268a.369.369 0 0 0-.115-.268.38.38 0 0 0-.263-.109h-1.732V1.216a.354.354 0 0 0-.108-.27.347.347 0 0 0-.243-.104h-1.344a.36.36 0 0 0-.34.226.371.371 0 0 0-.027.148V2.89h-.767a.324.324 0 0 0-.255.115.385.385 0 0 0-.098.262V4.31a.4.4 0 0 0 .212.346c.044.021.092.032.14.03h.768v2.925c0 .39.069.726.2 1.003.132.274.305.504.514.676.217.178.465.31.731.388.27.084.551.126.833.126.385 0 .75-.061 1.094-.18a2.13 2.13 0 0 0 .861-.552c.152-.181.17-.381.046-.581l-.463-.76zM121.672 2.89h-1.329a.339.339 0 0 0-.244.11.39.39 0 0 0-.08.122.394.394 0 0 0-.027.144v.166a1.906 1.906 0 0 0-.605-.472c-.335-.173-.726-.258-1.168-.258-.42 0-.834.083-1.226.249a3.24 3.24 0 0 0-1.055.715 3.528 3.528 0 0 0-.734 1.123 3.79 3.79 0 0 0-.276 1.477c0 .54.092 1.037.275 1.477.184.434.428.817.729 1.128a3.138 3.138 0 0 0 2.273.973 2.59 2.59 0 0 0 1.175-.259c.255-.13.457-.287.612-.471v.177a.34.34 0 0 0 .108.259.343.343 0 0 0 .243.104h1.329a.335.335 0 0 0 .252-.105.364.364 0 0 0 .102-.258V3.267a.38.38 0 0 0-.1-.262.332.332 0 0 0-.115-.087.311.311 0 0 0-.139-.028zM119.876 6.9a1.534 1.534 0 0 1-.786.855 1.362 1.362 0 0 1-.594.129c-.207 0-.405-.044-.588-.13a1.516 1.516 0 0 1-.792-.855 1.757 1.757 0 0 1-.113-.62c0-.225.037-.436.112-.632.073-.187.179-.358.314-.504.138-.143.3-.26.479-.342.184-.086.385-.13.588-.129.217 0 .415.044.594.13.181.085.34.2.472.341.134.143.24.313.314.504a1.73 1.73 0 0 1 0 1.253zM128.978 7.64l-.763-.593c-.146-.118-.284-.15-.404-.1a.742.742 0 0 0-.279.205 2.527 2.527 0 0 1-.583.535c-.192.122-.444.183-.742.183-.219 0-.42-.04-.6-.122a1.423 1.423 0 0 1-.469-.342 1.575 1.575 0 0 1-.308-.51 1.751 1.751 0 0 1-.106-.617c0-.228.034-.438.106-.632.07-.192.173-.363.308-.503.135-.144.295-.26.472-.342.187-.088.391-.132.597-.13.298 0 .547.064.742.187.198.126.396.306.584.534.078.092.17.16.278.206.122.048.259.016.401-.101l.762-.594a.53.53 0 0 0 .201-.269.437.437 0 0 0-.034-.365 3.329 3.329 0 0 0-1.18-1.127c-.504-.291-1.108-.441-1.784-.441a3.519 3.519 0 0 0-2.51 1.033c-.322.322-.576.71-.747 1.137a3.68 3.68 0 0 0-.273 1.407c0 .495.093.968.273 1.402.173.424.427.808.747 1.128a3.527 3.527 0 0 0 2.51 1.034c.676 0 1.28-.149 1.784-.444a3.286 3.286 0 0 0 1.182-1.13.411.411 0 0 0 .055-.173.415.415 0 0 0-.023-.182.624.624 0 0 0-.197-.273zM136.06 9.045l-2.104-3.143 1.801-2.415c.094-.139.119-.272.075-.397-.031-.09-.116-.2-.334-.2h-1.425a.52.52 0 0 0-.234.058.482.482 0 0 0-.209.205L132.191 5.2h-.349V.363a.37.37 0 0 0-.099-.26.352.352 0 0 0-.253-.103h-1.332a.37.37 0 0 0-.337.22.346.346 0 0 0-.027.143V9.29c0 .103.038.193.11.259a.353.353 0 0 0 .254.104h1.333a.328.328 0 0 0 .251-.105.346.346 0 0 0 .075-.119.333.333 0 0 0 .024-.14V6.927h.386l1.571 2.446c.112.187.267.281.46.281h1.491c.226 0 .32-.11.358-.202.054-.13.038-.262-.047-.406zM102.863 2.89h-1.489a.389.389 0 0 0-.298.122.544.544 0 0 0-.13.249l-1.099 4.167h-.268l-1.182-4.167a.66.66 0 0 0-.113-.247.329.329 0 0 0-.264-.124h-1.544c-.199 0-.325.066-.372.193a.588.588 0 0 0-.002.37l1.887 5.865c.03.093.08.17.145.232a.388.388 0 0 0 .281.104h.798l-.066.19-.19.547a.872.872 0 0 1-.29.426.7.7 0 0 1-.442.148.956.956 0 0 1-.4-.09 1.842 1.842 0 0 1-.35-.209.62.62 0 0 0-.335-.115h-.016c-.13 0-.243.074-.334.216l-.474.708c-.193.304-.086.504.039.615.234.224.528.399.875.524.344.125.723.186 1.126.186.682 0 1.252-.187 1.689-.565.435-.376.756-.887.952-1.524l2.188-7.258c.05-.155.05-.284.005-.389-.037-.08-.125-.174-.327-.174z" fill="#011B33"/>
    </svg>`,light:EM};return`
    <style>
      #inline-button-`.concat(n.inlineId,` {
        position: relative;
        text-align: center;
        display: inline-block;
      }
      #inline-button-`).concat(n.inlineId,`__trigger {
        `).concat((s=n.variant||"normal",i={normal:`
    background: linear-gradient(180deg,#44b669 0,#40ad57);
    text-shadow: 1px 1px 1px rgba(0,0,0,.1);
    color: #ffffff;
  `,light:`
    background: white;
    text-shadow: none;
    color: #011b33;
  `},"".concat(`
    box-sizing: border-box;
    display: inline-block;
    line-height: 1;
    white-space: nowrap;
    margin: 0 0 10px;
    text-align: center;
    -webkit-appearance: none;
    outline: none;
    font-size: 14px;
    font-weight: 600;
    border-radius: 6px;
    cursor: pointer;
    padding: 16px 24px;
    box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.15);
    transition: all .3s ease;
    border: none;
    min-width: 190px;
  `).concat(i[s])),`
      }
      #inline-button-`).concat(n.inlineId,`__trigger:hover {
        box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.2);
      }
      #inline-button-`).concat(n.inlineId,`__trigger:active {
        transform: translateY(3px);
      }
    </style>
    <button id="inline-button-`).concat(n.inlineId,'__trigger" data-inline-id="').concat(n.inlineId,'">').concat(n.text||"Pay"," ").concat(n.currency||"NGN"," ").concat(n.amount,`</button>
    <div id="inline-button-`).concat(n.inlineId,`__wordmark">
      `).concat(a[n.wordmarkVariant||"normal"],`
    </div>
  `)})(t),t.parent.parentNode.insertBefore(r,t.parent.nextSibling),e=pse(r.getElementsByTagName("button"),1)[0]}return e})({inlineId:fn.id,amount:p0.amount/100,currency:p0.currency,id:p0.buttonId,text:p0.buttonText,variant:p0.buttonVariant,wordmarkVariant:p0.buttonWordmarkVariant,parent:Em()}).addEventListener("click",(function(t){t.preventDefault(),P3?fn.resumeTransaction(P3.accessCode):P3=fn.newTransaction(Ei(Ei({},p0),{},{onSuccess:function(e){var r,n,s,i,a,o;r={type:"hidden",name:"reference",value:e.reference,parent:jN},n=r.type,s=r.value,i=r.name,a=r.parent,(o=document.createElement("input")).type=n,o.value=s,o.name=i,a.appendChild(o),jN.submit()}}))}))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bse="type.googleapis.com/google.protobuf.Int64Value",Vse="type.googleapis.com/google.protobuf.UInt64Value";function FM(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function U6(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>U6(e));if(typeof t=="function"||typeof t=="object")return FM(t,e=>U6(e));throw new Error("Data cannot be encoded in JSON: "+t)}function p5(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Bse:case Vse:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>p5(e)):typeof t=="function"||typeof t=="object"?FM(t,e=>p5(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Gm extends xu{constructor(e,r,n){super(`${$S}/${e}`,r||""),this.details=n}}function Use(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function zse(t,e){let r=Use(t),n=r,s;try{const i=e&&e.error;if(i){const a=i.status;if(typeof a=="string"){if(!FN[a])return new Gm("internal","internal");r=FN[a],n=a}const o=i.message;typeof o=="string"&&(n=o),s=i.details,s!==void 0&&(s=p5(s))}}catch{}return r==="ok"?null:new Gm(r,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $se{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||n.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6="us-central1";function qse(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new Gm("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Hse{constructor(e,r,n,s,i=z6,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new $se(r,n,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(i);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=z6}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function Wse(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function Gse(t,e,r){return(n=>Yse(t,e,n,{}))}async function Kse(t,e,r,n){r["Content-Type"]="application/json";let s;try{s=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function Yse(t,e,r,n){const s=t._url(e);return Xse(t,s,r,n)}async function Xse(t,e,r,n){r=U6(r);const s={data:r},i={},a=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);a.authToken&&(i.Authorization="Bearer "+a.authToken),a.messagingToken&&(i["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=a.appCheckToken);const o=n.timeout||7e4,l=qse(o),c=await Promise.race([Kse(e,s,i,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new Gm("cancelled","Firebase Functions instance was deleted.");const d=zse(c.status,c.json);if(d)throw d;if(!c.json)throw new Gm("internal","Response is not valid JSON object.");let p=c.json.data;if(typeof p>"u"&&(p=c.json.result),typeof p>"u")throw new Gm("internal","Response is missing data field.");return{data:p5(p)}}const DN="@firebase/functions",ON="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qse="auth-internal",Jse="app-check-internal",Zse="messaging-internal";function eie(t,e){const r=(n,{instanceIdentifier:s})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(Qse),o=n.getProvider(Zse),l=n.getProvider(Jse);return new Hse(i,a,o,l,s,t)};pf(new Gd($S,r,"PUBLIC").setMultipleInstances(!0)),Pc(DN,ON,e),Pc(DN,ON,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tie(t=l_(),e=z6){const n=bp(An(t),$S).getImmediate({identifier:e}),s=w8("functions");return s&&rie(n,...s),n}function rie(t,e,r){Wse(An(t),e,r)}function nie(t,e,r){return Gse(An(t),e)}eie(fetch.bind(self));const sie=tie();async function iie(t){const r=await nie(sie,"initOrder")({total:t}),{checkoutUrl:n,accessCode:s,orderId:i,paystackReference:a}=r.data;return new Promise((o,l)=>{new jM().resumeTransaction(s,{onSuccess:()=>{console.log("Payment successful"),o({status:!0,message:"Payment successful",data:{checkoutUrl:n,orderId:i,paystackReference:a}})},onCancel:()=>{console.log("User cancelled"),o({status:!1,message:"Payment cancelled"})},onError:()=>{console.log("Payment failed"),o({status:!1,message:"Payment cancelled"})},onLoad:()=>{console.log("Page is loaded")}})})}const m5=async()=>{const t=await wn(Zt(ht,"pharmacies"));return await Promise.all(t.docs.map(async r=>{const n={id:r.id,...r.data()};if(n.lat&&n.lon)n.coordinates={latitude:Number(n.lat),longitude:Number(n.lon)};else if(n.address)try{const i=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(n.address)}&limit=1`)).json();i&&i[0]&&(n.coordinates={latitude:Number(i[0].lat),longitude:Number(i[0].lon)})}catch{}return n}))},qS=async({vendorId:t,customerId:e,role:r})=>{const n=`${t}__${e}`,s=er(ht,"threads",n);if(!(await ni(s)).exists()){const[a,o]=await Promise.all([ni(er(ht,"pharmacies",t)),ni(er(ht,"users",e))]),l=a.exists()?a.data():{},c=o.exists()?o.data():{},d=l.name||"Pharmacy",p=l.address||"",g=!!l.isVerified,m=c.displayName||"Customer";await cu(s,{id:n,vendorId:t,customerId:e,vendorName:d,vendorAddress:p,vendorIsVerified:g,customerName:m,lastMessage:"",lastBy:null,lastAt:_s(),unread:{[t]:0,[e]:0},createdAt:_s()})}return n},$6=async(t,{senderId:e,to:r,text:n},s=null)=>{const i=Zt(ht,"threads",t,"messages"),a=await Qd(i,{senderId:e,to:r,text:n||"",createdAt:_s(),read:!1,status:"sent",deliveredAt:null,readAt:null,prescriptionId:s});return await us(er(ht,"threads",t),{lastMessage:n||"",lastBy:e,lastAt:_s(),[`unread.${r}`]:o5(1)}),setTimeout(async()=>{await us(a,{status:"delivered",deliveredAt:_s()})},1e3),a.id},g5=async(t,e)=>{await us(er(ht,"threads",t),{[`unread.${e}`]:0});const r=_r(Zt(ht,"threads",t,"messages"),jr("to","==",e),jr("read","==",!1),Yi("createdAt","desc"),cd(50)),n=await wn(r);if(!n.empty){const s=bS(ht),i=_s();n.docs.forEach(a=>{s.update(a.ref,{read:!0,status:"read",readAt:i})}),await s.commit()}},DM=async(t,e)=>{const r=er(ht,"threads",t,"messages",e);await us(r,{status:"delivered",deliveredAt:_s()})},OM=(t,e,r,n=50)=>{const s=_r(Zt(ht,"threads",t,"messages"),Yi("createdAt","desc"),cd(n));return In(s,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()})).reverse();e(a)},i=>r?.(i))},j_=(t,e,r,n={})=>{if(!t?.uid||!t?.role)return()=>{};const s=Zt(ht,"threads"),i=t.role==="customer"?_r(s,jr("customerId","==",t.uid)):_r(s,jr("vendorId","==",t.uid)),a=n.noSort?i:_r(i,Yi("lastAt","desc"));return In(a,o=>e(o.docs.map(l=>({id:l.id,...l.data()}))),o=>r?.(o))},F_=(t,e=null)=>{const r=Zt(ht,"products"),n=e?_r(r,jr("pharmacyId","==",e),Yi("createdAt","desc")):_r(r,Yi("createdAt","desc"));return In(n,s=>t(s.docs.map(i=>({id:i.id,...i.data()}))),s=>console.error("listenProducts error:",s))},MM=async t=>{const e=Zt(ht,"products");await Qd(e,{...t,createdAt:_s()})},BM=async(t,e)=>{const r=bS(ht);t.forEach(n=>{const s=er(Zt(ht,"products"));r.set(s,{...n,pharmacyId:e,price:Number(n.price),stock:Number(n.stock||0),createdAt:_s()})}),await r.commit()},Km=async(t,e,r=1)=>{const n=er(Zt(ht,"users",t,"cart"));await cu(n,{productId:e,qty:r})},yw=(t,e)=>Kl(er(ht,"users",t,"cart",e)),ax=async({customerId:t,pharmacyId:e,items:r,total:n,email:s,prescription:i=!1})=>{const a=await iie(n),{data:o,status:l}=a;return console.log("Data: ",o),console.log("Items: ",r),l&&cu(er(ht,"orders",o.orderId),{customerId:t,customerEmail:s,items:r.map(c=>({productId:c.productId,pharmacyId:c.pharmacyId,price:c.price,quantity:c.quantity||1,status:"pending",paid:!!i,transferReference:null,transferStatus:null})),total:n,paystackReference:o.paystackReference,status:"paid",prescriptionId:i||null,paidAt:_s(),createdAt:_s()}),l},VM=async(t=5,e)=>{if(!e)return[];const n=(await wn(_r(Zt(ht,"products"),jr("pharmacyId","==",e)))).docs.map(o=>({id:o.id,...o.data()}));if(n.length===0)return[];const s=await wn(_r(Zt(ht,"orders"),jr("pharmacyId","==",e))),i={};s.forEach(o=>{(o.data().items||[]).forEach(c=>{i[c.productId]||(i[c.productId]=0),i[c.productId]+=c.quantity||1})});const a=n.map(o=>({...o,sold:i[o.id]||0}));return a.sort((o,l)=>l.sold!==o.sold?l.sold-o.sold:(l.dateAdded?.toMillis?.()||0)-(o.dateAdded?.toMillis?.()||0)),a.slice(0,t).map(o=>({id:o.id,name:o.name,sold:o.sold,dateAdded:o.dateAdded}))};async function UM({pharmacyId:t,customerId:e,chatThreadId:r,drugs:n,startDate:s,duration:i,notes:a}){return await Qd(Zt(ht,"prescriptions"),{pharmacyId:t,customerId:e,chatThreadId:r,drugs:n,startDate:s,duration:i,notes:a,status:"active",createdAt:_s(),updatedAt:_s()})}async function zM(t){const e=_r(Zt(ht,"prescriptions"),jr("chatThreadId","==",t));return(await wn(e)).docs.map(n=>({id:n.id,...n.data()}))}async function $M({customerId:t}){const r=(await wn(_r(Zt(ht,"prescriptions"),jr("customerId","==",t),jr("requirePurchase","==",!0),jr("fulfilled","!=",!0)))).docs.map(i=>({id:i.id,...i.data()}));if(!r.length)return;const n=await wn(_r(Zt(ht,"orders"),jr("customerId","==",t),jr("status","==","fulfilled"))),s=[];n.forEach(i=>{(i.data().items||[]).forEach(o=>{s.push(o.productId)})});for(const i of r)i.drugs.every(o=>o.productId&&s.includes(o.productId))&&await us(er(ht,"prescriptions",i.id),{fulfilled:!0})}const qM=async(t,e,r)=>{const n=er(ht,"wishlists",`${t}_${e}`);await cu(n,{userId:t,productId:e,productData:r,createdAt:_s()})},HM=async(t,e)=>{const r=er(ht,"wishlists",`${t}_${e}`);await Kl(r)},WM=async(t,e)=>{const r=er(ht,"wishlists",`${t}_${e}`);return(await ni(r)).exists()},GM=(t,e,r=console.error)=>{const n=_r(Zt(ht,"wishlists"),jr("userId","==",t),Yi("createdAt","desc"));return In(n,s=>{const i=s.docs.map(a=>({id:a.id,...a.data()}));e(i)},r)},KM=async(t,e,r)=>{const n=er(ht,"vendorBookmarks",`${t}_${e}`);await cu(n,{userId:t,vendorId:e,vendorData:r,createdAt:_s()})},YM=async(t,e)=>{const r=er(ht,"vendorBookmarks",`${t}_${e}`);await Kl(r)},XM=async(t,e)=>{const r=er(ht,"vendorBookmarks",`${t}_${e}`);return(await ni(r)).exists()},QM=(t,e,r=console.error)=>{const n=_r(Zt(ht,"vendorBookmarks"),jr("userId","==",t),Yi("createdAt","desc"));return In(n,s=>{const i=s.docs.map(a=>({id:a.id,...a.data()}));e(i)},r)},aie=Object.freeze(Object.defineProperty({__proto__:null,addProduct:MM,addToCart:Km,addToWishlist:qM,addVendorBookmark:KM,bulkAddProducts:BM,createPrescription:UM,fulfillPrescriptionIfOrdered:$M,getAllPharmacies:m5,getBestSellingProducts:VM,getOrCreateThread:qS,getPrescriptionsForThread:zM,isInWishlist:WM,isVendorBookmarked:XM,listenProducts:F_,listenThreadMessagesPaginated:OM,listenUserBookmarkedVendors:QM,listenUserThreads:j_,listenUserWishlist:GM,markMessageDelivered:DM,markThreadRead:g5,placeOrder:ax,removeFromCart:yw,removeFromWishlist:HM,removeVendorBookmark:YM,sendChatMessage:$6},Symbol.toStringTag,{value:"Module"}));async function JM(t){t&&await Dte(t)}async function oie(t){await jte(Yh,t)}const ZM=j.createContext(),Dn=()=>j.useContext(ZM);function lie({children:t}){const[e,r]=j.useState(null),[n,s]=j.useState(null),[i,a]=j.useState(!0);j.useEffect(()=>{let g;const m=Vte(Yh,y=>{if(r(y),g&&(g(),g=void 0),y){const w=er(ht,"users",y.uid);g=In(w,_=>{_.exists()&&s(_.data())})}else s(null);a(!1)});return()=>{g&&g(),m()}},[]);const o=(g,m)=>Fte(Yh,g,m),l=async({email:g,password:m,displayName:y,role:w,address:_,lat:S,lon:T,phone:I})=>{const{user:M}=await UO(Yh,g,m);y&&await zO(M,{displayName:y});const K={uid:M.uid,email:g,displayName:y,role:w};return _&&(K.address=_),S&&(K.lat=S),T&&(K.lon=T),I&&(K.phoneNumber=I),await cu(er(ht,"users",M.uid),K),w==="pharmacy"&&await cu(er(ht,"pharmacies",M.uid),{id:M.uid,name:y||"Pharmacy",email:g,address:_||"",etaMins:30,phone:""}),await JM(M),{user:M,verificationSent:!0}},c=async()=>{const g=new qu;g.addScope("email"),g.addScope("profile"),g.setCustomParameters({prompt:"select_account"});try{console.log("Attempting Google sign-in...");const m=await aN(Yh,g);return console.log("Google sign-in successful:",m.user.email),m}catch(m){throw console.error("Google sign-in error:",m),m.code==="auth/popup-closed-by-user"?new Error("Sign-in was cancelled. Please try again."):m.code==="auth/popup-blocked"?new Error("Pop-up was blocked by your browser. Please allow pop-ups and try again."):m.code==="auth/network-request-failed"?new Error("Network error. Please check your connection and try again."):m.code==="auth/internal-error"?new Error("Google sign-in is not properly configured. Please contact support."):m.code==="auth/configuration-not-found"?new Error("Google sign-in configuration missing. Please contact support."):m}},d=async g=>{const m=new qu;m.addScope("email"),m.addScope("profile"),m.setCustomParameters({prompt:"select_account"});try{console.log("Attempting Google registration/sign-in...");const y=await aN(Yh,m),{user:w}=y;console.log("Google auth successful for:",w.email);const _=er(ht,"users",w.uid),S=await ni(_);if(S.exists()){if(console.log("Existing user found:",w.email),S.data().role!=="customer")throw new Error("This email is associated with a pharmacy account. Please use pharmacy sign-in instead.");return{user:w,verificationSent:!1,isNewUser:!1,existingCustomer:!0}}else{console.log("Creating new customer profile for:",w.email);const T={uid:w.uid,email:w.email,displayName:w.displayName||"Google User",role:"customer",address:g?.address||"Location not available",lat:g?.latitude,lon:g?.longitude,createdAt:new Date().toISOString(),authMethod:"google"};return await cu(_,T),console.log("New customer profile created successfully"),{user:w,verificationSent:!1,isNewUser:!0}}}catch(y){throw console.error("Google registration/sign-in error:",y),y.code==="auth/account-exists-with-different-credential"?new Error('An account with this email already exists. Please sign in with your email and password instead, or use the "Sign In with Google" option.'):y.code==="auth/popup-closed-by-user"?new Error("Sign-in was cancelled. Please try again."):y.code==="auth/popup-blocked"?new Error("Pop-up was blocked by your browser. Please allow pop-ups and try again."):y.code==="auth/network-request-failed"?new Error("Network error. Please check your connection and try again."):y.code==="auth/internal-error"?new Error("Google sign-in is not properly configured. Please contact support."):y.code==="auth/configuration-not-found"?new Error("Google sign-in configuration missing. Please contact support."):y}},p=()=>Ute(Yh);return u.jsx(ZM.Provider,{value:{user:e,profile:n,loading:i,signIn:o,signUp:l,signInWithGoogle:c,signUpWithGoogle:d,logout:p},children:t})}const cie="modulepreload",uie=function(t){return"/"+t},MN={},$d=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let l=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");s=l(r.map(c=>{if(c=uie(c),c in MN)return;MN[c]=!0;const d=c.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":cie,d||(g.as="script"),g.crossOrigin="",g.href=c,o&&g.setAttribute("nonce",o),document.head.appendChild(g),d)return new Promise((m,y)=>{g.addEventListener("load",m),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function BN(t){return u.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:u.jsx("path",{d:"M6.66683 0C8.34653 0 9.95744 0.66726 11.1452 1.85499C12.3329 3.04272 13.0002 4.65363 13.0002 6.33333C13.0002 8.01304 12.3329 9.62395 11.1452 10.8117C9.95744 11.9994 8.34653 12.6667 6.66683 12.6667C4.98712 12.6667 3.37622 11.9994 2.18849 10.8117C1.00076 9.62395 0.333496 8.01304 0.333496 6.33333C0.333496 4.65363 1.00076 3.04272 2.18849 1.85499C3.37622 0.66726 4.98712 0 6.66683 0ZM6.66683 0.666667C5.16394 0.666667 3.7226 1.26369 2.65989 2.3264C1.59719 3.3891 1.00016 4.83044 1.00016 6.33333C1.00016 7.83623 1.59719 9.27757 2.65989 10.3403C3.7226 11.403 5.16394 12 6.66683 12C7.41099 12 8.14786 11.8534 8.83537 11.5687C9.52288 11.2839 10.1476 10.8665 10.6738 10.3403C11.2 9.81407 11.6174 9.18939 11.9021 8.50187C12.1869 7.81436 12.3335 7.07749 12.3335 6.33333C12.3335 4.83044 11.7365 3.3891 10.6738 2.3264C9.61106 1.26369 8.16972 0.666667 6.66683 0.666667ZM6.3335 2.66667H7.00016V6.28L10.1335 8.08667L9.80016 8.66667L6.3335 6.66667V2.66667Z",fill:"#848484"})})}/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const die=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),eB=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hie={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fie=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:a,...o},l)=>j.createElement("svg",{ref:l,...hie,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:eB("lucide",s),...o},[...a.map(([c,d])=>j.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=(t,e)=>{const r=j.forwardRef(({className:n,...s},i)=>j.createElement(fie,{ref:i,iconNode:e,className:eB(`lucide-${die(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=tn("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pie=tn("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mie=tn("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=tn("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=tn("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=tn("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gie=tn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xie=tn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=tn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yie=tn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=tn("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=tn("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vie=tn("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=tn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=tn("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wie=tn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ie=tn("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=tn("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=tn("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bie=tn("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kie=tn("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=tn("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sie=tn("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=tn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=tn("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=tn("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=tn("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eie=tn("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cie=tn("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aie=tn("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=tn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=tn("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=tn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nie=tn("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=tn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=tn("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=tn("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tie=tn("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=tn("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iie=tn("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pie=tn("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=tn("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rie=tn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=tn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Lie({className:t="",children:e,...r}){return u.jsx("div",{className:`rounded-3xl border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-gray-800 ${t}`,...r,children:e})}function sc({name:t,image:e,category:r,size:n=64,className:s="",alt:i,style:a={},imgClassName:o="",roundedClass:l="rounded-xl"}){const[c,d]=j.useState(!1),p=(r||"")?.toString().toLowerCase().trim();let g=null;p&&(p.includes("prescription")?g="PrescriptionDrugs.svg":p.includes("over")?g="Over-the-counter Icon.svg":p.includes("syrup")?g="Syrup.svg":p.includes("therapeutic")?g="Therapeutic.svg":p.includes("control")?g="ControlledSubstances.svg":p.includes("target")&&(g="TargetSystem.svg"));const m="GeneralPill.svg",y=g||m,w={width:n,height:n,...a};return e&&!c?u.jsx("img",{src:e,alt:i||t||"Product image",className:`${l} object-cover ${o}`.trim(),style:w,onError:()=>d(!0)}):u.jsx("div",{className:`${s}`,style:w,children:u.jsx("img",{src:`/${encodeURIComponent(y)}`,alt:i||(r?`${r} icon`:"product icon"),className:`${l} object-contain w-full h-full`,onError:_=>{if(y!==m){_.currentTarget.src=`/${encodeURIComponent(m)}`;return}}})})}function L3({product:t,vendorName:e,vendorDistanceKm:r,vendorEtaMins:n,onOpen:s,onAdd:i,cardWidth:a="172px",cardHeight:o="199px",nameSize:l="15.54px",nameWeight:c="medium",priceSize:d="14.43px",priceColor:p="#BDBDBD",priceWeight:g="medium",addColor:m="#36A5FF",borderRadius:y}){const[w,_]=j.useState(!1),[S,T]=j.useState(!1),[I,M]=j.useState(!1),K=t?.image&&!w;return u.jsxs(Lie,{className:`p-3 cursor-pointer relative flex flex-col justify-between overflow-hidden card-interactive group transition-all duration-200 ${S?"scale-95":"hover:scale-105"}`,onClick:s,onMouseDown:()=>T(!0),onMouseUp:()=>T(!1),onMouseLeave:()=>T(!1),style:{width:a,height:o,borderRadius:y||"10px"},children:[u.jsx("div",{className:"overflow-hidden flex items-center justify-center bg-white dark:bg-gray-800 transition-all duration-200 group-hover:bg-gradient-to-br group-hover:from-blue-50 group-hover:to-sky-50 dark:group-hover:from-blue-900/20 dark:group-hover:to-sky-900/20",style:{height:`calc(${o} * 0.6)`,borderRadius:y||"3px"},children:K?u.jsx("img",{src:t.image,alt:t.name||"product image",className:"object-contain h-full w-full transition-transform duration-200 group-hover:scale-110",onError:()=>_(!0),style:{maxWidth:"100%"}}):u.jsx("div",{className:"flex items-center justify-center w-full h-full transition-transform duration-200 group-hover:scale-110",style:{padding:8},children:u.jsx(sc,{name:t.name,image:t.image,category:t.category,size:Math.min(30,Math.max(48,parseInt(o,10)/2))})})}),u.jsxs("div",{className:"mt-1 text-xs text-zinc-500 font-poppins font-light truncate flex items-center gap-2 transition-colors duration-200 group-hover:text-zinc-600",style:{fontSize:"10px",maxWidth:"100%"},children:[u.jsx("span",{className:"truncate",children:e}),(typeof r=="number"||typeof n=="number")&&u.jsxs("span",{className:"text-[9px] text-zinc-400 whitespace-nowrap transition-colors duration-200 group-hover:text-sky-500",children:[typeof r=="number"?`${r.toFixed(1)} km`:"",typeof r=="number"&&typeof n=="number"?"  ":"",typeof n=="number"?`${n} min`:""]})]}),u.jsx("div",{className:"mt-1 font-poppins transition-colors duration-200 group-hover:text-zinc-800 dark:group-hover:text-white",style:{fontSize:l,fontWeight:c,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:t.name,children:t.name}),u.jsxs("div",{className:"font-poppins transition-colors duration-200 group-hover:text-sky-600",style:{fontSize:d,color:p,fontWeight:g,overflow:"hidden"},children:["",Number(t.price).toLocaleString()]}),u.jsx("button",{onClick:W=>{W.stopPropagation(),M(!0),setTimeout(()=>M(!1),150),i()},className:`absolute bottom-3 right-3 h-8 w-8 flex items-center justify-center border border-solid btn-interactive transition-all duration-200 hover:scale-110 hover:shadow-lg ${I?"scale-90 shadow-inner":"active:scale-95"}`,style:{borderColor:m,borderRadius:y||"6px",background:I?m:"transparent",boxShadow:I?`inset 0 2px 4px rgba(0,0,0,0.2), 0 0 0 2px ${m}40`:void 0},onMouseEnter:W=>{I||(W.target.style.backgroundColor=m,W.target.querySelector("svg").style.color="white")},onMouseLeave:W=>{I||(W.target.style.backgroundColor="transparent",W.target.querySelector("svg").style.color=m)},children:u.jsx(Tie,{color:I?"white":m,size:16,className:`transition-all duration-200 ${I?"animate-pulse":""}`})}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",style:{borderRadius:y||"10px"}})]})}function cp({className:t="",style:e={},lines:r=3,desktopAlign:n="center"}){const s=n==="left"?"lg:justify-start lg:pl-12":"lg:justify-center";return u.jsxs("div",{className:`w-screen h-screen flex items-center justify-center ${s} bg-white dark:bg-gray-900 ${t}`,style:e,role:"status","aria-live":"polite",children:[u.jsx("div",{className:"animate-fadeInScale",children:u.jsxs("picture",{children:[u.jsx("source",{media:"(min-width: 1024px)",srcSet:"/DesktopLoading.svg"}),u.jsx("img",{src:"/Loading.svg",alt:"Loading",className:"w-full h-full object-contain lg:object-cover lg:w-screen lg:h-screen animate-pulse-gentle"})]})}),u.jsx("span",{className:"sr-only",children:"Loading"})]})}function Np(){const[t,e]=j.useState(null),[r,n]=j.useState("Fetching location..."),[s,i]=j.useState(null),[a,o]=j.useState(!0);return j.useEffect(()=>{if(!navigator.geolocation){n("Location not supported"),i("Geolocation is not supported by this browser"),o(!1);return}const l={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5};navigator.geolocation.getCurrentPosition(async c=>{const{latitude:d,longitude:p}=c.coords;e({latitude:d,longitude:p}),i(null);try{const m=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${d}&lon=${p}`,{timeout:5e3})).json();n(m.display_name||"Location unavailable")}catch(g){console.warn("Failed to fetch address:",g),n("Location detected")}finally{o(!1)}},c=>{switch(console.warn("Geolocation error:",c),i(c.message),o(!1),c.code){case c.PERMISSION_DENIED:n("Location permission denied");break;case c.POSITION_UNAVAILABLE:n("Location unavailable");break;case c.TIMEOUT:n("Location request timeout");break;default:n("Location error occurred");break}},l)},[]),{userCoords:t,location:r,locationError:s,isLoading:a}}function sB(t){if(!t)return null;if(t.coordinates&&typeof t.coordinates=="object"){if(t.coordinates.latitude&&t.coordinates.longitude)return{latitude:Number(t.coordinates.latitude),longitude:Number(t.coordinates.longitude)};if(t.coordinates.lat&&t.coordinates.lng)return{latitude:Number(t.coordinates.lat),longitude:Number(t.coordinates.lng)};if(t.coordinates.lat&&t.coordinates.lon)return{latitude:Number(t.coordinates.lat),longitude:Number(t.coordinates.lon)}}if(t.latitude&&t.longitude)return{latitude:Number(t.latitude),longitude:Number(t.longitude)};if(t.lat&&t.lng)return{latitude:Number(t.lat),longitude:Number(t.lng)};if(t.lat&&t.lon)return{latitude:Number(t.lat),longitude:Number(t.lon)};if(t.location&&typeof t.location=="object"){if(t.location.latitude&&t.location.longitude)return{latitude:Number(t.location.latitude),longitude:Number(t.location.longitude)};if(t.location.lat&&t.location.lng)return{latitude:Number(t.location.lat),longitude:Number(t.location.lng)}}if(t.coords&&typeof t.coords=="object"){if(t.coords.latitude&&t.coords.longitude)return{latitude:Number(t.coords.latitude),longitude:Number(t.coords.longitude)};if(t.coords.lat&&t.coords.lng)return{latitude:Number(t.coords.lat),longitude:Number(t.coords.lng)}}return null}function ry(t,e,r,n){const i=(r-t)*Math.PI/180,a=(n-e)*Math.PI/180,o=Math.sin(i/2)**2+Math.cos(t*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(a/2)**2;return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}function iB(t,e="driving"){if(!Number.isFinite(t)||t<=0)return null;const r={walking:5,cycling:15,driving:30},n=r[e]||r.driving,s=t/n,i=Math.round(s*60);let a;if(i<1)a="< 1 min";else if(i<60)a=`${i} min${i!==1?"s":""}`;else{const o=Math.floor(i/60),l=i%60;l===0?a=`${o} hr${o!==1?"s":""}`:a=`${o}h ${l}m`}return{minutes:i,formatted:a,distance:t,mode:e}}function jie(t,e,r="driving"){if(!t||t.length===0||!e)return null;let n=null,s=1/0,i=null;return t.forEach(a=>{const o=sB(a);if(o){const l=ry(e.latitude,e.longitude,o.latitude,o.longitude);l<s&&(s=l,n=a,i=iB(l,r))}}),n?{pharmacy:n,eta:i,distance:s}:null}function GS(t,e,r="driving"){const n=sB(t);if(!n||!e)return null;const s=ry(e.latitude,e.longitude,n.latitude,n.longitude);return iB(s,r)}const aB=j.createContext(),ny=()=>{const t=j.useContext(aB);if(!t)throw new Error("useSettings must be used within a SettingsProvider");return t},Fr={SWIPE_NAVIGATION:"swipe_navigation_enabled",THEME_MODE:"theme_mode",LANGUAGE:"language",FONT_SIZE:"font_size",BIOMETRIC_LOGIN:"biometric_login_enabled",AUTO_LOCK:"auto_lock_timeout",LOCATION_PRECISION:"location_precision",MESSAGE_READ_RECEIPTS:"message_read_receipts",ORDER_NOTIFICATIONS:"order_notifications_enabled",PRESCRIPTION_REMINDERS:"prescription_reminders_enabled",DATA_SAVER_MODE:"data_saver_mode_enabled",HIGH_CONTRAST:"high_contrast_enabled",REDUCE_MOTION:"reduce_motion_enabled"},j3={[Fr.SWIPE_NAVIGATION]:!1,[Fr.THEME_MODE]:"light",[Fr.LANGUAGE]:"en",[Fr.FONT_SIZE]:"small",[Fr.BIOMETRIC_LOGIN]:!1,[Fr.AUTO_LOCK]:"5min",[Fr.LOCATION_PRECISION]:"precise",[Fr.MESSAGE_READ_RECEIPTS]:!0,[Fr.ORDER_NOTIFICATIONS]:!0,[Fr.PRESCRIPTION_REMINDERS]:!0,[Fr.DATA_SAVER_MODE]:!1,[Fr.HIGH_CONTRAST]:!1,[Fr.REDUCE_MOTION]:!1},Fie=({children:t})=>{const[e,r]=j.useState(j3),[n,s]=j.useState(!0);j.useEffect(()=>{try{const c=localStorage.getItem("app_settings");if(c){const d=JSON.parse(c);r(p=>({...p,...d}))}}catch(c){console.error("Error loading settings:",c)}finally{s(!1)}},[]),j.useEffect(()=>{if(!n)try{localStorage.setItem("app_settings",JSON.stringify(e))}catch(c){console.error("Error saving settings:",c)}},[e,n]);const l={settings:e,updateSetting:(c,d)=>{r(p=>({...p,[c]:d}))},getSetting:c=>e[c]??j3[c],resetSettings:()=>{r(j3)},isLoading:n};return u.jsx(aB.Provider,{value:l,children:t})},Die=j.createContext(),qN={en:{home:"Home",cart:"Cart",messages:"Messages",orders:"Orders",settings:"Settings",notifications:"Notifications",search:"Search",back:"Back",continue:"Continue",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",loading:"Loading...",ai_chat:"AI Chat",welcome_to_pharmai:"Welcome to PharmAI!",ai_assistant_description:"I'm here to help with general health information, product questions, and pharmacy services. Remember, I'm not a substitute for professional medical advice.",typing:"Typing...",online:"Online",clear_chat:"Clear Chat",ai_error_message:"Sorry, I'm having trouble connecting. Please try again later.",ai_disclaimer:" PharmAI provides general information only. Not medical advice. Consult professionals for health concerns.",message:"Message",sent:"Sent",delivered:"Delivered",read:"Read",type_message:"Type a message...",send:"Send",add_to_cart:"Add to Cart",buy_now:"Buy Now",price:"Price",out_of_stock:"Out of Stock",in_stock:"In Stock",product_description:"Product Description",product_unavailable:"Product unavailable. Please try again.",hello:"Hello",friend:"Friend",search_placeholder:"Search drugs, pharmacies",new_arrivals:"New Arrivals",popular_products:"Popular Products",all_new_products:"All New Products",load_more:"Load more",new:"New",close:"Close",please_sign_in:"Please sign in",your_pharmacy_location:"Your pharmacy location",location_services:"Location services",calculating_eta:"Calculating ETA...",fetching_location:"Fetching location...",nearest_pharmacy:"nearest pharmacy",to:"to",welcome_message:"Welcome to PharmaSeA",find_medicines:"Find medicines near you",fast_delivery:"Fast & reliable delivery",learn_more:"Learn more",get_started:"Get started",shop_now:"Shop now",order_now:"Order now",browse_catalog:"Browse catalog",special_offer:"Special Offer",limited_time:"Limited time offer",orders:"Orders",all:"All",pending:"Pending",processing:"Processing",fulfilled:"Fulfilled",cancelled:"Cancelled",no_orders_yet:"No orders yet.",order_number:"Order #",customer:"Customer",items:"Items",total:"Total",status:"Status",see_more:"See more",more_items:"more",reveal_number:"Reveal Number",please_sign_in_continue:"Please sign in to continue",sign_in_sign_up:"Sign In / Sign Up",qty:"Qty",my_conversations:`My
Conversations`,search_chats:"Search chats",no_conversations_yet:"No conversations yet.",no_messages_yet:"No messages yet.",cart:"Cart",your_cart_is_empty:"Your cart is empty.",remove:"Remove",subtotal:"Subtotal",delivery_fee:"Delivery Fee",proceed_to_checkout:"Proceed to Checkout",order_summary:"Order Summary",items:"Items",delivery_details:"Delivery Details",delivery_address:"Delivery Address",phone_number:"Phone Number",email_optional:"Email (Optional)",enter_delivery_address:"Enter delivery address",enter_phone_number:"Enter phone number",enter_email_address:"Enter email address",use_current_location:"Use current location",continue_to_payment:"Continue to Payment",payment_method:"Payment Method",pay_on_delivery:"Pay on Delivery",pay_with_cash_delivery:"Pay with cash when order arrives",online_payment:"Online Payment",pay_with_card:"Pay with card, bank transfer, or USSD",pay_with_card_bank_ussd:"Pay with card, bank transfer, or USSD",pay_with_cash_on_delivery:"Pay with cash when order arrives",use_your_health_insurance:"Use your health insurance",pay_with_insurance:"Pay with Insurance",use_health_insurance:"Use your health insurance",coming_soon:"Coming Soon",total_amount:"Total Amount",pay_now:"Pay Now",place_order:"Place Order",decrease_quantity:"Decrease quantity",increase_quantity:"Increase quantity",order_placement_failed:"Order placement failed",order_placed_delivery:"Order placed successfully! You'll pay on delivery.",payment_successful:"Payment successful! Your order has been placed.",checkout_failed:"Checkout failed. Please try again.",my_profile:"My Profile",pharmacy_profile:"Pharmacy Profile",edit_profile:"Edit Profile",edit:"Edit",save:"Save",cancel:"Cancel",close:"Close",view:"View",open:"Open",name:"Name",phone_number_profile:"Phone Number",address_profile:"Address",password:"Password",items_in_cart:"Items in Cart",active_chats:"Active Chats",saved_items:"Saved Items",drugs_bought:"Drugs Bought",all_drugs_bought:"All Drugs Bought",my_saved_items:"My Saved Items",products:"Products",vendors:"Vendors",no_products_saved:"No products saved",start_adding_products:"Start adding products you like!",no_vendors_bookmarked:"No vendors bookmarked",bookmark_vendors:"Bookmark vendors you like!",log_out:"Log Out",search_placeholder_profile:"Search prescriptions, orders, drugs...",prescriptions:"Prescriptions",orders_profile:"Orders",drugs:"Drugs",all_results:"All",times:"times",bought:"bought",no_search_results:"No results found",try_different_search:"Try a different search term",add_product:"Add Product",bulk_upload:"Bulk Upload",download_report:"Download report",download_csv:"Download CSV",download_excel:"Download Excel",inventory:"Inventory",edit_product:"Edit Product",delete_product:"Delete Product",products_sold:"Products Sold",active_chats:"Active Chats",reviews:"Reviews",no_products_yet:"No products yet. Use the buttons above to add or bulkupload.",edit_product:"Edit Product",product_image:"Product Image",image_url_placeholder:"Image URL (or choose file below)",product_description:"Product Description",enter_product_description:"Enter product description",confirm_delete_product:"Are you sure you want to delete this item?",yes_delete:"Yes, Delete",delete:"Delete",log_out:"Log Out",customer_reviews:"Customer Reviews",no_reviews_yet:"No reviews yet. Be the first to review!",pharmacy_response:"{pharmacyName} Response",message_vendor:"Message Vendor",call_to_order:"Call to Order",your_name:"Your Name",your_review_optional:"Your review... (optional)",back:"Back",call_to_order:"Call to Order",get_directions:"Get Directions",category:"Category",add_to_cart:"Add to Cart",message_vendor:"Message Vendor",share_product:"Share Product",close:"Close",loading:"Loading",no_products_found:"No products found.",leave_a_review:"Leave a Review",your_name:"Your Name",your_review_optional:"Your review... (optional)",submit_review:"Submit Review",submitting:"Submitting",see_more:"See more",show_less:"Show less",products_in_category:'Products in "{category}"',eta_to_pharmacy:"{time} to {pharmacy}",calculating_eta:"Calculating ETA...",fetching_location:"Fetching location...",shareable_link_copied:"Shareable link copied to clipboard!",copy_this_link:"Copy this link:",please_sign_in_wishlist:"Please sign in to add items to your wishlist",failed_update_wishlist:"Failed to update wishlist. Please try again.",please_sign_in:"Please sign in",product_unavailable:"Product unavailable. Please try again.",failed_add_to_cart:"Failed to add to cart.",reviews_section:"Reviews",no_reviews_yet:"No reviews yet. Be the first to review!",helpful:"Helpful",vendor_profile:"Vendor Profile",products_by:"Products by",vendor:"Vendor",of:"of",no_products_found_search:"No products found matching your search.",no_products_yet:"No products yet.",customers_only_chat:"Only customers can start a chat with a pharmacy.",could_not_start_chat:"Could not start chat thread.",pharmacy_report:"Pharmacy Report",field:"Field",value:"Value",pharmacy:"Pharmacy",email:"Email",address:"Address",phone:"Phone",product_name:"Product Name",category:"Category",stock:"Stock",sku:"SKU",price:"Price",order_id:"Order ID",customer:"Customer",status:"Status",date:"Date",products:"Products",add_to_bookmarks:"Add to bookmarks",remove_from_bookmarks:"Remove from bookmarks",search_by_name_category_sku:"Search by name, category, or SKU...",view_results:"View Results",clear:"Clear",nearby_pharmacies:"Nearby Pharmacies",pharmacies_found_near_you:"{count} found near you",loading_location:"Loading location...",filter_pharmacies:"Filter pharmacies",pharmacies_found_near_you_detailed:"{count} pharmacies found near you",your_location:"Your location",getting_your_location:"Getting your location...",location_access_needed:"Location access needed",allow_location_access_etas:"Please allow location access for accurate ETAs",enable_location_services:"Enable location services to see nearby pharmacies",search_pharmacies:"Search pharmacies...",no_pharmacies_found:"No pharmacies found",try_different_search:"Try a different search term",name:"Name",address:"Address",keyboard_navigation_hint:"Use  arrow keys to navigate, Enter to select, Esc to close",distance:"Distance",all:"All",within_5km:"Within 5km",within_10km:"Within 10km",within_20km:"Within 20km",you_are_here:"You are here",pharmacy_locations:"Pharmacy Locations",pharmacies_sorted_by_distance:"{count} pharmacies  Sorted by distance",pharmacy:"Pharmacy",selected:"Selected",calculating:"Calculating...",closest:"Closest",get_directions:"Get Directions",call_pharmacy:"Call pharmacy",view_products:"View Products",search_results:"Search Results",all_pharmacies:"All Pharmacies",pharmacies_found_count:"{count} found",no_pharmacies_found_search:"No pharmacies found matching your search",no_pharmacies_found_general:"No pharmacies found",try_adjusting_search:"Try adjusting your search terms",try_adjusting_location:"Try adjusting your location or check back later",clear_search:"Clear search",today:"Today",yesterday:"Yesterday",sent:"Sent",delivered:"Delivered",read:"Read",customer:"Customer",pharmacy:"Pharmacy",prescription_created:"A new prescription has been created.",drug_inquiry:"I want to know more about this drug {productName}{priceText}.",call:"Call",call_pharmacy_title:"Call {pharmacy}",no_phone_number:"No phone number",actions:"Actions",create_prescription:"Create Prescription",view_prescription_history:"View Prescription History",load_more_messages:"Load {count} more messages",start_conversation:"Start your conversation",message_placeholder:"Message",attachments_coming_soon:"Attachments coming soon",my_dashboard:"My Dashboard",overview:"Overview",top_products:"Top Products",best_sellers:"Best Sellers",no_sales_data:"No sales data yet",start_selling_message:"Start selling products to see your top performers",units_sold:"{count} units sold",units:"units",total_products:"Total Products",total_orders:"Total Orders",total_revenue:"Total Revenue",active_customers:"Active Customers",this_month:"This Month",avg_order_value:"Avg Order Value",pending_orders:"Pending Orders",awaiting:"Awaiting",low_stock_items:"Low Stock Items",need_restock:"Need Restock",orders_this_month:"Orders This Month",no_comparison:"No comparison",pending_reviews:"Pending Reviews",need_response:"Need Response",recent_reviews:"Recent Reviews",last_24h:"Last 24h",low_stock_alert:"Low Stock Alert",items_need_restocking:"{count} item{plural} need restocking",inventory_tip:"Check your inventory to avoid running out of popular products",recent_messages:"Recent Messages",no_recent_messages:"No recent messages.",no_recent_reviews:"No recent reviews",new_reviews_appear_here:"New customer reviews will appear here",view_all:"View All",by_customer:"by {customerName}",needs_response:"Needs Response",view_more_reviews:"View {count} more review{plural}",revenue_analytics:"Revenue Analytics",by_month:"By Month",by_year:"By Year",month_number:"Month {number}",no_revenue_data:"No revenue data available",start_selling_revenue:"Start making sales to see your revenue analytics",best_performing_period:"Best Performing {period}",month_label:"Month",year_label:"Year",sales_trends:"Sales Trends",last_6_months:"Last 6 months",no_sales_trend_data:"No sales trend data.",orders_count:"{count} order{plural}",reviews_management:"Reviews Management",filters_sort:"Filters & Sort",total_reviews:"Total Reviews",responded:"Responded",avg_rating:"Avg Rating",positive_reviews:"Positive (4+ )",product:"Product",all_products:"All Products",sort_by:"Sort By",newest_first:"Newest First",oldest_first:"Oldest First",highest_rating:"Highest Rating",lowest_rating:"Lowest Rating",filter_by:"Filter By",all_reviews:"All Reviews",positive_4_stars:"Positive (4+ stars)",negative_1_2_stars:"Negative (1-2 stars)",no_reviews_found:"No reviews found",no_reviews_yet_message:"You don't have any reviews yet. Encourage customers to leave reviews by providing excellent service and follow-up communication!",no_reviews_match_filters:"No reviews match your current filters. Try adjusting your search criteria.",medicine:"Medicine",reviewed_by:"Reviewed by",verified:"Verified",people_found_helpful:"{count} people found this helpful",your_response:"Your Response",cancel_response:"Cancel Response",respond_to_review:"Respond to Review",write_thoughtful_response:"Write a thoughtful response to this review...",submit_response:"Submit Response",response_submitted_success:"Response submitted successfully!",response_submit_failed:"Failed to submit response. Please try again.",loading_reviews:"Loading your reviews...",loading_please_wait:"Please wait while we fetch your data",my_prescriptions:"My Prescriptions",add_to_calendar:"Add to Calendar",no_prescriptions_found:"No prescriptions found.",see_more_count:"See more ({count})",see_less:"See less",time_to_take_medicine:"Time to take {drugName}",take_medicine:"Take {drugName}",dosage_frequency:"Dosage: {dosage} ({frequency})",my_activity:"My Activity",active_chats:"Active Chats",storefront_preview:"Storefront Preview",inventory:"Inventory",products_sold:"Products Sold",general:"General",appearance:"Appearance",language_region:"Language & Region",privacy_security:"Privacy & Security",accessibility:"Accessibility",swipe_navigation:"Swipe Navigation",data_saver_mode:"Data Saver Mode",read_receipts:"Read Receipts",theme:"Theme",font_size:"Font Size",app_language:"App Language",add_product_title:"Add New Product",product_name:"Product Name",product_name_placeholder:"Enter product name",product_price:"Price",product_price_placeholder:"Enter price",product_category:"Category",select_category:"Select Category",prescription_drugs:"Prescription Drugs",over_counter:"Over-the-counter",general_pills:"General Pills",controlled_substances:"Controlled Substances",syrup_liquid:"Syrup/Liquid",therapeutic_drugs:"Therapeutic Drugs",supplements_vitamins:"Supplements & Vitamins",stock_quantity:"Stock Quantity",stock_placeholder:"Enter stock quantity",product_sku:"SKU",sku_placeholder:"Enter SKU (optional)",product_tags:"Tags",tags_placeholder:"Add tags separated by commas",product_image:"Product Image",upload_image:"Upload Image",image_url:"Image URL",image_url_placeholder:"Or enter image URL",product_description:"Description",description_placeholder:"Enter product description",uploading:"Uploading...",create_product:"Create Product",creating_product:"Creating Product...",product_created_success:"Product created successfully!",error_creating_product:"Error creating product. Please try again.",please_fill_required:"Please fill in all required fields",invalid_price:"Please enter a valid price"},yo:{home:"Ile",cart:"Agolo",messages:"Ifirane",orders:"Awn ibere",settings:"Eto",notifications:"Iwifun",search:"Wa",back:"Pada",continue:"Tsiwaju",save:"Tju",cancel:"Fagile",delete:"Pa r",edit:"atunk",loading:"N gbe...",profile:"Profaili",message:"Ifirane",sent:"Ti fi rane",delivered:"Ti gba",read:"Ti ka",type_message:"K ifirane...",send:"Fi rane",hello:"Bawo",friend:"Ore",search_placeholder:"Wa oogun, ile oogun",new_arrivals:"Awn tuntun",view_all:"wo gbogbo",popular_products:"Awn oogun olokiki",all_new_products:"Gbogbo oogun tuntun",load_more:"Gbe siwaju",new:"Tuntun",close:"Ti",please_sign_in:"Jw wle",your_pharmacy_location:"Ipo ile oogun r",location_services:"Awn i ipo",calculating_eta:"N e iiro akoko...",fetching_location:"N gba ipo...",nearest_pharmacy:"ile oogun to sunm",to:"si",welcome_message:"Kaabo si PharmaSeA",find_medicines:"Wa awn oogun to wa nitosi r",fast_delivery:"Ifiji to yara ati to gbkle",learn_more:"K siwaju si",get_started:"Br",shop_now:"Ra ni bayi",order_now:"Bere ni bayi",browse_catalog:"Wo awn oogun wa",special_offer:"Ipese Pataki",limited_time:"Ipese akoko die",orders:"Awn ibere",all:"Gbogbo",pending:"Ti nduro",processing:"N i",fulfilled:"Ti pari",cancelled:"Ti fagile",no_orders_yet:"Ko si ibere kankan sib.",order_number:"Ibere #",customer:"Onibara",items:"Awn nkan",total:"Lapap",status:"Ipo",see_more:"Wo siwaju si",see_less:"Wo di kere si",more_items:"siwaju si",reveal_number:"Fi nmba han",please_sign_in_continue:"Jw wle lati tsiwaju",sign_in_sign_up:"Wle / Foruksil",qty:"Iye",my_conversations:`Awn
Iforran Mi`,search_chats:"Wa awn iforran",no_conversations_yet:"Ko si iforran kankan sib.",no_messages_yet:"Ko si ifiran kankan sib.",cart:"Agolo",your_cart_is_empty:"Agolo r ko ni nkankan.",remove:"Yo kuro",subtotal:"Apap kekere",delivery_fee:"Owo ifiji",total:"Lapap",proceed_to_checkout:"Tsiwaju si isanwo",order_summary:"Akop ibere",items:"Awn nkan",delivery_details:"Awn alaye ifiji",delivery_address:"Adiresi ifiji",phone_number:"Nmba foonu",email_optional:"Imeeli (Ti o ba f)",enter_delivery_address:"T adiresi ifiji",enter_phone_number:"T nmba foonu",enter_email_address:"T adiresi imeeli",use_current_location:"Lo ipo oni bayi",continue_to_payment:"Tsiwaju si isanwo",payment_method:"Ona isanwo",pay_on_delivery:"San nigba ifiji",pay_with_cash_delivery:"San plu owo nigba ti ibere ba de",online_payment:"Isanwo ori ayelujara",pay_with_card:"San plu kaadi, gbigbe owo banki, tabi USSD",pay_with_card_bank_ussd:"San plu kaadi, gbigbe owo banki, tabi USSD",pay_with_cash_on_delivery:"San plu owo nigba ti ibere ba de",use_your_health_insurance:"Lo idaabobo ilera r",pay_with_insurance:"San plu idaabobo",use_health_insurance:"Lo idaabobo ilera r",coming_soon:"O nb laip",total_amount:"Iye lapap",pay_now:"San ni bayi",place_order:"Gbe ibere kal",decrease_quantity:"Din iye ku",increase_quantity:"P si iye",order_placement_failed:"Gbigbe ibere kal kuna",order_placed_delivery:"A ti gbe ibere kal ni aeyri! O ma san nigba ifiji.",payment_successful:"Isanwo aeyri! A ti gbe ibere r kal.",checkout_failed:"Isanwo kuna. Jw gbiyanju lkansi.",my_profile:"Profaili Mi",pharmacy_profile:"Profaili Ile-oogun",edit_profile:"atune Profaili",edit:"atune",save:"Fi pam",cancel:"Fagilee",close:"Ti",view:"Wo",open:"i",name:"Oruk",phone_number_profile:"Nmba Foonu",address_profile:"Adiresi",password:"r aina",items_in_cart:"Awn nkan ninu agolo",active_chats:"Awn ibaranisr ti ni",saved_items:"Awn nkan ti a fi pam",drugs_bought:"Awn oogun ti a ra",all_drugs_bought:"Gbogbo awn oogun ti a ra",my_saved_items:"Awn nkan ti mo fi pam",products:"Awn ja",vendors:"Awn olutaja",no_products_saved:"Ko si ja ti a fi pam",start_adding_products:"Br fifi awn ja ti o fran si!",no_vendors_bookmarked:"Ko si olutaja ti a aami",bookmark_vendors:"e aami awn olutaja ti o fran!",log_out:"Jade",search_placeholder_profile:"Wa awn atr, awn ibere, oogun...",prescriptions:"Awn atr",orders_profile:"Awn ibere",drugs:"Awn oogun",all_results:"Gbogbo",times:"igba",bought:"ti a ra",no_search_results:"Ko si abajade",try_different_search:"Gbiyanju r wiwa miiran",back:"Pada",call_to_order:"Pe lati gbe ibere",get_directions:"Gba itsna",category:"Isri",add_to_cart:"Fi si agolo",message_vendor:"Firan si olutaja",share_product:"Pin ja",close:"Ti",loading:"Ngbigba...",no_products_found:"Ko si ja ti a ri.",leave_a_review:"Fi atunywo sil",your_name:"Oruk r",your_review_optional:"Atunywo r... (ti o ba f)",submit_review:"Fi atunywo ran",submitting:"Nfiran...",see_more:"Wo siwaju si",show_less:"Fi di han",products_in_category:'Awn ja ninu "{category}"',eta_to_pharmacy:"{time} si {pharmacy}",calculating_eta:"Niro akoko...",fetching_location:"Ngba ipo...",shareable_link_copied:"A ti daak na asop pinpin si clipboard!",copy_this_link:"Daak na asop yii:",please_sign_in_wishlist:"Jw wle lati fi awn nkan si atok if r",failed_update_wishlist:"Kuna lati e imudojuiwn atok if. Jw gbiyanju lkansi.",please_sign_in:"Jw wle",product_unavailable:"ja ko si. Jw gbiyanju lkansi.",failed_add_to_cart:"Kuna lati fi si agolo.",reviews_section:"Awn atunywo",no_reviews_yet:"Ko si atunywo sib. J ni akk lati e atunywo!",helpful:"To wulo",vendor_profile:"Profaili Olutaja",products_by:"Awn ja nipas",vendor:"Olutaja",of:"ninu",no_products_found_search:"Ko si ja ti a ri ti o baamu wiwa r.",no_products_yet:"Ko si ja sib.",customers_only_chat:"Awn alabara nikan lo le br ibaranisr plu ile-oogun.",could_not_start_chat:"Ko le br okun ibaranisr.",pharmacy_report:"Ijab ile-oogun",field:"Aaye",value:"Iye",pharmacy:"Ile-oogun",email:"Imeeli",address:"Adiresi",phone:"Foonu",product_name:"Oruk ja",category:"Isri",stock:"Ipam",sku:"SKU",price:"Idiyele",order_id:"ID ibere",customer:"Alabara",status:"Ipo",date:"j",products:"Awn ja",add_to_bookmarks:"Fi si awn aami iwe",remove_from_bookmarks:"Yo kuro ninu awn aami iwe",search_by_name_category_sku:"Wa nipas oruk, isri, tabi SKU...",view_results:"Wo awn abajade",clear:"Nu",nearby_pharmacies:"Awn Ile-oogun Nitosi",pharmacies_found_near_you:"{count} ti a ri nitosi r",loading_location:"N gba ipo...",filter_pharmacies:"e aj awn ile-oogun",pharmacies_found_near_you_detailed:"Awn ile-oogun {count} ti a ri nitosi r",your_location:"Ipo r",getting_your_location:"N gba ipo r...",location_access_needed:"A nilo iwle si ipo",allow_location_access_etas:"Jw gba iwle si ipo fun awn akoko to peye",enable_location_services:"Mu awn i ipo i lati ri awn ile-oogun nitosi",search_pharmacies:"Wa awn ile-oogun...",no_pharmacies_found:"Ko ri ile-oogun kankan",try_different_search:"Gbiyanju r wiwa miiran",name:"Oruk",address:"Adiresi",keyboard_navigation_hint:"Lo awn btini  lati lil, Enter lati yan, Esc lati ti",distance:"Ijinna",all:"Gbogbo",within_5km:"Laarin 5km",within_10km:"Laarin 10km",within_20km:"Laarin 20km",you_are_here:"O wa nibi",pharmacy_locations:"Awn Ipo Ile-oogun",pharmacies_sorted_by_distance:"Awn ile-oogun {count}  Ti a to ni na ijinna",pharmacy:"Ile-oogun",selected:"Ti a yan",calculating:"N e iiro...",closest:"Ti o sunm jul",get_directions:"Gba Itsna",call:"Pe",call_pharmacy:"Pe ile-oogun",view_products:"Wo Awn ja",search_results:"Awn Abajade Wiwa",all_pharmacies:"Gbogbo Awn Ile-oogun",pharmacies_found_count:"{count} ti a ri",no_pharmacies_found_search:"Ko ri ile-oogun ti o baamu wiwa r",no_pharmacies_found_general:"Ko ri ile-oogun kankan",try_adjusting_search:"Gbiyanju e atune awn r wiwa r",try_adjusting_location:"Gbiyanju e atune ipo r tabi padanu nigbamii",clear_search:"Nu wiwa",today:"Oni",yesterday:"Ana",sent:"Ti fi ran",delivered:"Ti gba",read:"Ti ka",customer:"Alabara",pharmacy:"Ile-oogun",prescription_created:"A ti e iwe-a oogun tuntun.",drug_inquiry:"Mo f m di sii nipa oogun yii {productName}{priceText}.",call:"Pe",call_pharmacy_title:"Pe {pharmacy}",no_phone_number:"Ko si nmba foonu",actions:"Awn ie",create_prescription:"e Iwe-a Oogun",view_prescription_history:"Wo Itan Iwe-a Oogun",load_more_messages:"Gbe awn ifiran {count} sii",start_conversation:"Br ibaranisr r",message_placeholder:"Ifiran",attachments_coming_soon:"Awn aop n b laipe",my_dashboard:"Ptk Mi",overview:"Akop",top_products:"Awn ja Giga",best_sellers:"Awn Ti O Ta Jul",no_sales_data:"Ko si data tita sib",start_selling_message:"Br tita awn ja lati ri awn ti o e daradara",units_sold:"Awn ya {count} ti a ta",units:"awn ya",total_products:"Lapap Awn ja",total_orders:"Lapap Awn Ibere",total_revenue:"Lapap Owo Wiwle",active_customers:"Awn Alabara Ti Ni",this_month:"Ou Yii",avg_order_value:"Idiye Ibere Aarin",pending_orders:"Awn Ibere Ti Nduro",awaiting:"N duro",low_stock_items:"Awn ja Ti Ko To",need_restock:"Nilo e Ipam",orders_this_month:"Awn Ibere Ou Yii",no_comparison:"Ko si afiwe",pending_reviews:"Awn Atunywo Ti Nduro",need_response:"Nilo Idahun",recent_reviews:"Awn Atunywo Aip",last_24h:"Wakati 24 shin",low_stock_alert:"Ikil Ipam Kekere",items_need_restocking:"Awn nkan {count} nilo atunk ipam",inventory_tip:"aywo ipam r lati yago fun sisnu awn ja olokiki",recent_messages:"Awn Ifiran Aip",no_recent_messages:"Ko si awn ifiran aip.",no_recent_reviews:"Ko si awn atunywo aip",new_reviews_appear_here:"Awn atunywo alabara tuntun yoo han nibi",view_all:"Wo Gbogbo",by_customer:"nipas {customerName}",needs_response:"Nilo Idahun",view_more_reviews:"Wo awn atunywo {count} sii",revenue_analytics:"Itupal Owo Wiwle",total:"Lapap",by_month:"Nipas Ou",by_year:"Nipas dun",month_number:"Ou {number}",no_revenue_data:"Ko si data owo wiwle",start_selling_revenue:"Br tita lati ri itupal owo wiwle r",best_performing_period:"Asiko Ti O e Daradara Jul {period}",month_label:"Ou",year_label:"dun",sales_trends:"Awn Ilsiwaju Tita",last_6_months:"Ou 6 shin",no_sales_trend_data:"Ko si data ilsiwaju tita.",orders_count:"Awn ibere {count}",reviews_management:"Iakoso Awn Atunywo",filters_sort:"Awn  ati Tito",total_reviews:"Lapap Awn Atunywo",responded:"Ti Dahun",avg_rating:"Iwn Aarin",positive_reviews:"Rere (4+ )",product:"ja",all_products:"Gbogbo Awn ja",sort_by:"To Nipas",newest_first:"Tuntun Ni Akk",oldest_first:"Atij Ni Akk",highest_rating:"Iwn Giga Jul",lowest_rating:"Iwn Kekere Jul",filter_by:" Nipas",all_reviews:"Gbogbo Awn Atunywo",positive_4_stars:"Rere (4+ irawo)",negative_1_2_stars:"Buburu (1-2 irawo)",no_reviews_found:"Ko ri atunywo kankan",no_reviews_yet_message:"O ko ni awn atunywo sib. Gba awn alabara niyanju lati fi awn atunywo sil nipa ipese i to dara ati ibaranisr atle!",no_reviews_match_filters:"Ko si atunywo ti o baamu awn  r lwlw. Gbiyanju atune awn ami wiwa r.",medicine:"Oogun",reviewed_by:"Ti a e atunywo nipas",verified:"Ti a e Idaniloju",people_found_helpful:"Awn eniyan {count} ri eyi ni iranlw",your_response:"Idahun R",cancel_response:"Pa Idahun R",respond_to_review:"Dahun si Atunywo",write_thoughtful_response:"K idahun ti o ni ero si atunywo yii...",submit_response:"Fi Idahun Ran",response_submitted_success:"Idahun ti fi ran ni aeyri!",response_submit_failed:"Kuna lati fi idahun ran. Jw gbiyanju lkansi.",loading_reviews:"Ngba awn atunywo r...",loading_please_wait:"Jw duro nigba ti a n gba data r",my_prescriptions:"Awn Iwe-a Oogun Mi",add_to_calendar:"Fi si Kalenda",no_prescriptions_found:"Ko ri iwe-a oogun kankan.",see_more_count:"Wo sii ({count})",see_less:"Wo kere",time_to_take_medicine:"Akoko lati mu {drugName}",take_medicine:"Mu {drugName}",dosage_frequency:"Iwn: {dosage} ({frequency})",my_activity:"I Mi",active_chats:"Awn Ibaranisr Ti Ni",storefront_preview:"Iwoye Ile-itaja",inventory:"Ipam",products_sold:"Awn ja Ti A Ta",add_product:"Fi ja kun",bulk_upload:"Gbigbe plp",download_report:"Gba ijab",download_csv:"Gba CSV",download_excel:"Gba Excel",inventory:"Ibi ipam ja",edit_product:"atune ja",delete_product:"Pa ja r",products_sold:"Awn ja ti a ta",active_chats:"Awn ibaranisr ti ni",reviews:"Awn atunywo",no_products_yet:"Ko si ja sibsib. Lo awn btini ti o wa loke lati afikun tabi gb-gbe soke.",edit_product:"atune ja",product_image:"Aworan ja",image_url_placeholder:"URL aworan (tabi yan faili ti o wa nisal)",product_description:"Apejuwe ja",enter_product_description:"T apejuwe ja sii",confirm_delete_product:"e o da  loju pe o f pa nkan yii r?",customer_reviews:"Awn Atunywo Alabara",loading_reviews:"N gba awn atunywo",no_reviews_yet:"Ko si atunywo sib. J ki o j k akoko lati e atunywo!",pharmacy_response:"Idahun {pharmacyName}",message_vendor:"Ran si Olutasja",call_to_order:"Pe lati Br",your_name:"Oruko R",language_region:"Ede & Agbegbe",privacy_security:"Airi & Aabo",accessibility:"Iwle",swipe_navigation:"Lil plu fif",data_saver_mode:"Ipo itju data",read_receipts:"Iwe eriwo kika",theme:"Koko",font_size:"Iwn lta",app_language:"Ede ohun elo",add_product_title:"afikun ja Tuntun",product_name_placeholder:"T oruk ja",product_price:"Idiyele",product_price_placeholder:"T idiyele",product_category:"ka",select_category:"Yan ka",prescription_drugs:"Awn Oogun Iwe-a",over_counter:"Ti ko nilo iwe-a",general_pills:"Awn Oogun Gbogbogbo",controlled_substances:"Awn Oogun Iakoso",syrup_liquid:"Syrup/Omi",therapeutic_drugs:"Awn Oogun Iwosan",supplements_vitamins:"Afsunt & Vitamini",stock_quantity:"Iye Ipam",stock_placeholder:"T iye ipam",product_sku:"SKU",sku_placeholder:"T SKU (afoye)",product_tags:"Awn Aami",tags_placeholder:"afikun awn aami ti o ya nipas awn kma",upload_image:"Gbe Aworan Soke",image_url:"URL Aworan",description_placeholder:"T apejuwe ja",uploading:"N gbe soke...",create_product:"da ja",creating_product:"N da ja...",product_created_success:"ja ti da ni aeyri!",error_creating_product:"Aie ni ida ja. Jw gbiyanju lkansi.",please_fill_required:"Jw kun gbogbo awn aaye ti a nilo",invalid_price:"Jw t idiyele ti o t"},ha:{home:"Gida",cart:"Kaya",messages:"Saonni",orders:"Oda",settings:"Saiti",notifications:"Sanarwa",search:"Nema",back:"Baya",continue:"Ci gaba",save:"Ajiye",cancel:"Soke",delete:"Share",edit:"Gyara",loading:"Ana lodawa...",profile:"Bayanan martaba",add_to_cart:"Saka cikin kaya",buy_now:"Saya yanzu",price:"Farashi",out_of_stock:"Ba a kantin ba",in_stock:"A wanzu",product_description:"Bayanin kaya",product_unavailable:"Kaya ba ya samuwa. Ka sake gwadawa.",hello:"Sannu",friend:"Aboki",search_placeholder:"Nema magunguna, kantin magani",new_arrivals:"Sababbin abubuwa",view_all:"dubi duka",popular_products:"Shahararrun magunguna",all_new_products:"Dukan sababbin magunguna",load_more:"Dauko kari",new:"Sabon",close:"Rufe",please_sign_in:"Ka shigar da sunan",your_pharmacy_location:"Wurin kantin maganin ku",location_services:"Sabis na wuri",calculating_eta:"Ana lissafa lokaci...",fetching_location:"Ana samun wuri...",nearest_pharmacy:"kantin magani mafi kusa",to:"zuwa",welcome_message:"Barka da zuwa PharmaSeA",find_medicines:"Nemo magunguna a kusa da ku",fast_delivery:"Isar da sauri da aminci",learn_more:"Koyi karin bayani",get_started:"Fara",shop_now:"Sayi yanzu",order_now:"Yi oda yanzu",browse_catalog:"Duba magunguna",special_offer:"Tayin na musamman",limited_time:"Tayin na an lokaci",orders:"Oda",all:"Duka",pending:"Ana jira",processing:"Ana aiki",fulfilled:"An gama",cancelled:"An soke",no_orders_yet:"Babu oda tukuna.",order_number:"Oda #",customer:"Abokin ciniki",items:"Abubuwa",total:"Duka",status:"Matsayi",see_more:"Duba karin",see_less:"Duba kadan",more_items:"kari",reveal_number:"Nuna lambar",please_sign_in_continue:"Ka shigar da sunan don ci gaba",sign_in_sign_up:"Shiga / Yi rajista",qty:"Adadi",my_conversations:`Tattaunawa
Na`,search_chats:"Nemo tattaunawa",no_conversations_yet:"Babu tattaunawa tukuna.",no_messages_yet:"Babu saonni tukuna.",your_cart_is_empty:"Kayar ku babu komai.",remove:"Cire",subtotal:"aramin jimla",delivery_fee:"Kuin isar da kaya",proceed_to_checkout:"Ci gaba zuwa biyan kui",order_summary:"Taaitaccen oda",delivery_details:"Bayanan isar da kaya",delivery_address:"Adireshin isar da kaya",phone_number:"Lambar waya",email_optional:"Imel (Ba dole ba)",enter_delivery_address:"Shigar da adireshin isar da kaya",enter_phone_number:"Shigar da lambar waya",enter_email_address:"Shigar da adireshin imel",use_current_location:"Yi amfani da wurin yanzu",continue_to_payment:"Ci gaba zuwa biyan kui",payment_method:"Hanyar biyan kui",pay_on_delivery:"Biya lokacin isar da kaya",pay_with_cash_delivery:"Biya da kui lokacin da oda ya zo",online_payment:"Biyan kui a yanar gizo",pay_with_card:"Biya da kati, canja wurin banki, ko USSD",pay_with_card_bank_ussd:"Biya da kati, canja wurin banki, ko USSD",pay_with_cash_on_delivery:"Biya da kui lokacin da oda ya zo",use_your_health_insurance:"Yi amfani da inshorar lafiya",pay_with_insurance:"Biya da inshora",use_health_insurance:"Yi amfani da inshorar lafiya",coming_soon:"Yana zuwa nan ba da jimawa ba",total_amount:"Dukkanin adadin",pay_now:"Biya yanzu",place_order:"Yi oda",decrease_quantity:"Rage yawan",increase_quantity:"ara yawan",order_placement_failed:"Yin oda ya kasa",order_placed_delivery:"An yi oda cikin nasara! Za ku biya lokacin isar da kaya.",payment_successful:"Biyan kui ya yi nasara! An yi odar ku.",checkout_failed:"Biyan kui ya kasa. Da fatan za a sake gwadawa.",my_profile:"Bayanin Kaina",pharmacy_profile:"Bayanin Kantin Magani",edit_profile:"Gyara Bayanin",view:"Duba",open:"Bue",name:"Suna",phone_number_profile:"Lambar Waya",address_profile:"Adireshi",password:"Kalmar sirri",items_in_cart:"Abubuwa a cikin kaya",active_chats:"Tattaunawa masu aiki",saved_items:"Abubuwa da aka ajiye",drugs_bought:"Magungunan da aka saya",all_drugs_bought:"Dukan magungunan da aka saya",my_saved_items:"Abubuwan da na ajiye",products:"Kayayyaki",vendors:"Masu sayarwa",no_products_saved:"Babu kayayyaki da aka ajiye",start_adding_products:"Fara ara kayayyakin da kuke so!",no_vendors_bookmarked:"Babu masu sayarwa da aka yi alamar",bookmark_vendors:"Yi alamar masu sayarwan da kuke so!",log_out:"Fita",search_placeholder_profile:"Nemi takardar likita, oda, magunguna...",prescriptions:"Takardar likita",orders_profile:"Oda",drugs:"Magunguna",all_results:"Duka",times:"lokuta",bought:"da aka saya",no_search_results:"Babu sakamakon",try_different_search:"Gwada kalmar nema daban",general:"Gabaaya",appearance:"Bayyanar",language_region:"Harshe da Yanki",privacy_security:"Sirri da Tsaro",accessibility:"Samun dama",app_language:"Harshen app",vendor_profile:"Bayanin Mai sayarwa",products_by:"Kayayyaki da",vendor:"Mai sayarwa",of:"daga",no_products_found_search:"Babu kayayyakin da aka samu da suka dace da binciken ku.",no_products_yet:"Babu kayayyaki tukuna.",customers_only_chat:"Abokan ciniki ne kawai za su iya fara tattaunawa da kantin magani.",could_not_start_chat:"Ba za a iya fara zaren tattaunawa ba.",pharmacy_report:"Rahoton kantin magani",field:"Fili",value:"Kima",pharmacy:"Kantin magani",email:"Imel",address:"Adireshi",phone:"Waya",product_name:"Sunan kaya",category:"Nau'i",stock:"Ajiya",sku:"SKU",price:"Farashi",order_id:"ID oda",customer:"Abokin ciniki",status:"Matsayi",date:"Kwanan wata",products:"Kayayyaki",add_to_bookmarks:"Saka a cikin alamomi",remove_from_bookmarks:"Cire daga alamomi",search_by_name_category_sku:"Nema da suna, nau'i, ko SKU...",view_results:"Duba sakamakon",clear:"Share",nearby_pharmacies:"Kantunan Magani Kusa",pharmacies_found_near_you:"{count} an samu kusa da kai",loading_location:"Ana samun wuri...",filter_pharmacies:"Tace kantunan magani",pharmacies_found_near_you_detailed:"Kantunan magani {count} an samu kusa da kai",your_location:"Wurin ka",getting_your_location:"Ana samun wurin ka...",location_access_needed:"Ana bukatar samun dama ga wuri",allow_location_access_etas:"Ka ba da izinin samun wuri don daidaitaccen lokaci",enable_location_services:"Kunna sabis na wuri don ganin kantunan magani kusa",search_pharmacies:"Nemi kantunan magani...",no_pharmacies_found:"Ba a sami kantunan magani ba",keyboard_navigation_hint:"Yi amfani da  maballin tui, Enter don zaa, Esc don rufewa",distance:"Nisa",within_5km:"A cikin 5km",within_10km:"A cikin 10km",within_20km:"A cikin 20km",you_are_here:"Kana nan",pharmacy_locations:"Wuraren Kantunan Magani",pharmacies_sorted_by_distance:"Kantunan magani {count}  An jera bisa nisa",selected:"An zaa",calculating:"Ana lissafi...",closest:"Mafi kusa",get_directions:"Samu Jagora",call:"Kira",call_pharmacy:"Kira kantin magani",view_products:"Duba Kayayyaki",search_results:"Sakamakon Bincike",all_pharmacies:"Dukan Kantunan Magani",pharmacies_found_count:"{count} an samu",no_pharmacies_found_search:"Ba a sami kantunan magani da suka dace da binciken ku ba",no_pharmacies_found_general:"Ba a sami kantunan magani ba",try_adjusting_search:"Gwada gyara kalmomin binciken ku",try_adjusting_location:"Gwada gyara wurin ku ko ku sake dubawa daga baya",clear_search:"Share bincike",today:"Yau",yesterday:"Jiya",sent:"An aiko",delivered:"An kai",read:"An karanta",prescription_created:"An iriri sabon takardar magani.",drug_inquiry:"Ina son sanin arin game da wannan magani {productName}{priceText}.",call_pharmacy_title:"Kira {pharmacy}",no_phone_number:"Babu lambar waya",actions:"Ayyuka",create_prescription:"iriri Takardar Magani",view_prescription_history:"Duba Tarihin Takardar Magani",load_more_messages:"auko arin saonnin {count}",start_conversation:"Fara tattaunawar ku",message_placeholder:"Sao",attachments_coming_soon:"Abubuwan hai suna zuwa nan ba da jimawa ba",my_dashboard:"Dashboard Na",overview:"Taaitaccen Bayani",top_products:"Manyan Kayayyaki",best_sellers:"Mafi Sayarwa",no_sales_data:"Babu bayanan tallace-tallace har yanzu",start_selling_message:"Fara sayar da kayayyaki don ganin mafi kyawun ku",units_sold:"Raka'o {count} da aka sayar",units:"raka'o",total_products:"Jimillar Kayayyaki",total_orders:"Jimillar Oda",total_revenue:"Jimillar Kudaden Shiga",active_customers:"Abokan Ciniki Masu Aiki",this_month:"Wannan Wata",avg_order_value:"Matsakaicin Darajar Oda",pending_orders:"Oda Da Ake Jira",awaiting:"Ana jira",low_stock_items:"Kayayyakin Da Suka Rage",need_restock:"Bukata Sake Cikawa",orders_this_month:"Oda Na Wannan Wata",no_comparison:"Babu kwatance",pending_reviews:"Sharhi Da Ake Jira",need_response:"Bukatar Amsa",recent_reviews:"Sharhi Na Baya-bayan Nan",last_24h:"Sa'o 24 da suka gabata",low_stock_alert:"Sanarwar Karancin Kaya",items_need_restocking:"Kaya {count} na bukatar sake cikawa",inventory_tip:"Duba ajiyar ku don guje wa rashin shahararru kayayyaki",recent_messages:"Saonnin Baya-bayan Nan",no_recent_messages:"Babu saonnin baya-bayan nan.",no_recent_reviews:"Babu sharhi na baya-bayan nan",new_reviews_appear_here:"Sabbin sharhin abokan ciniki za su bayyana a nan",by_customer:"ta {customerName}",needs_response:"Bukatar Amsa",view_more_reviews:"Duba arin sharhi {count}",revenue_analytics:"Nazarin Kudaden Shiga",by_month:"Ta Wata",by_year:"Ta Shekara",month_number:"Wata {number}",no_revenue_data:"Babu bayanan kudaden shiga",start_selling_revenue:"Fara sayarwa don ganin nazarin kudaden shiga",best_performing_period:"Lokaci Mafi Kyau {period}",month_label:"Wata",year_label:"Shekara",sales_trends:"Hanyoyin Tallace-tallace",last_6_months:"Watannin 6 da suka gabata",no_sales_trend_data:"Babu bayanan hanyoyin tallace-tallace.",orders_count:"Oda {count}",reviews_management:"Gudanar da Sharhi",filters_sort:"Tacewa da Jeri",total_reviews:"Jimillar Sharhi",responded:"An Amsa",avg_rating:"Matsakaicin Daraja",positive_reviews:"Mai Kyau (4+ )",product:"Kaya",all_products:"Dukan Kayayyaki",sort_by:"Jera Ta",newest_first:"Sabo Da Farko",oldest_first:"Tsoho Da Farko",highest_rating:"Mafi Girman Daraja",lowest_rating:"Mafi arancin Daraja",filter_by:"Tacewa Ta",all_reviews:"Dukan Sharhi",positive_4_stars:"Mai Kyau (4+ tauraro)",negative_1_2_stars:"Marar Kyau (1-2 tauraro)",no_reviews_found:"Ba a sami sharhi ba",no_reviews_yet_message:"Har yanzu ba ku da sharhi. arfafa abokan ciniki su bar sharhi ta hanyar samar da kyakkyawan sabis da bin diddigin sadarwa!",no_reviews_match_filters:"Babu sharhi da ya dace da taushirinku na yanzu. Gwada daidaita ka'idodin binciken ku.",medicine:"Magani",reviewed_by:"An yi sharhi ta",verified:"An Tabbatar",people_found_helpful:"Mutane {count} sun sami wannan yana da amfani",your_response:"Amsarku",cancel_response:"Soke Amsa",respond_to_review:"Amsa ga Sharhi",write_thoughtful_response:"Rubuta amsa mai tunani ga wannan sharhi...",submit_response:"Tura Amsa",response_submitted_success:"An tura amsa cikin nasara!",response_submit_failed:"An kasa tura amsa. Da fatan za a sake gwadawa.",loading_reviews:"Ana aukar sharhinku...",loading_please_wait:"Da fatan ku jira yayin da muke aukar bayananku",my_prescriptions:"Takardun Magani Na",add_to_calendar:"Saka a Kalanda",no_prescriptions_found:"Ba a sami takardar magani ba.",see_more_count:"Duba ari ({count})",see_less:"Duba kaan",time_to_take_medicine:"Lokaci ya yi na shan {drugName}",take_medicine:"Sha {drugName}",dosage_frequency:"Adadin: {dosage} ({frequency})",my_activity:"Ayyukan Na",active_chats:"Tattaunawa Masu Aiki",storefront_preview:"Kallaren Kantin",inventory:"Ajiya",products_sold:"Kayayyaki Da Aka Sayar",no_products_yet:"Har yanzu babu kayayyaki. Yi amfani da maballin da ke sama don ara ko loda da yawa.",edit_product:"Gyara Kayayyaki",product_image:"Hoton Kayayyaki",image_url_placeholder:"URL hoto (ko zai fayil da ke asa)",product_description:"Bayanin Kayayyaki",enter_product_description:"Shigar da bayanin kayayyaki",confirm_delete_product:"Kana da tabbas kana son share wannan abu?",customer_reviews:"Sharhin Abokan Ciniki",loading_reviews:"Ana loda sharhi",no_reviews_yet:"Har yanzu babu sharhi. Ka zama na farko da ya ba da sharhi!",pharmacy_response:"Amsar {pharmacyName}",message_vendor:"Aika Sao zuwa Dillali",call_to_order:"Kira don Yin Oda",your_name:"Sunan Ka",swipe_navigation:"Kewayawa ta Shafawa",data_saver_mode:"Yanayin Adana Bayanai",read_receipts:"Takardar Karatu",theme:"Jigo",font_size:"Girman Rubutu",app_language:"Harshen Manhaja",add_product_title:"ara Sabon Kaya",product_name:"Sunan Kaya",product_name_placeholder:"Shigar da sunan kaya",product_price:"Farashi",product_price_placeholder:"Shigar da farashi",product_category:"Nau'i",select_category:"Zai Nau'i",prescription_drugs:"Magunguna na Takarda",over_counter:"Ba tare da takarda ba",general_pills:"Magungunan Gabaaya",controlled_substances:"Magungunan Da Aka Sarrafa",syrup_liquid:"Syrup/Ruwa",therapeutic_drugs:"Magunguna na Warkewa",supplements_vitamins:"ari da Bitamin",stock_quantity:"Adadin Ajiya",stock_placeholder:"Shigar da adadin ajiya",product_sku:"SKU",sku_placeholder:"Shigar da SKU (na zai)",product_tags:"Alamomi",tags_placeholder:"ara alamomi da rabu da waafi",product_image:"Hoton Kaya",upload_image:"Loda Hoto",image_url:"URL Hoto",image_url_placeholder:"Ko shigar da URL hoto",product_description:"Bayanin",description_placeholder:"Shigar da bayanin kaya",uploading:"Ana lodawa...",create_product:"iriri Kaya",creating_product:"Ana irirar Kaya...",product_created_success:"An iriri kaya cikin nasara!",error_creating_product:"Kuskure wajen irirar kaya. Biko sake gwadawa.",please_fill_required:"Biko cika duk filayen da ake bukata",invalid_price:"Biko shigar da farashi mai inganci"},ig:{home:"l",cart:"Ngwa aha",messages:"Ozi",orders:"t",settings:"Nhazi",notifications:"kwa",search:"Ch",back:"Laghachi az",continue:"Gaa n'ihu",save:"Chekwaa",cancel:"Kagbuo",delete:"Hichap",edit:"Dezie",loading:"Na-ebu...",profile:"Profaili",add_to_cart:"Tinye na ngwa aha",buy_now:"Z ugbu a",price:"n aha",out_of_stock:"Agwla",in_stock:"D n'l aha",product_description:"Nkwa ngwaaha",product_unavailable:"Ngwaaha adgh. Biko nwaa z.",hello:"Ndewo",friend:"Enyi",search_placeholder:"Ch gw, l gw",new_arrivals:"Nd hr",view_all:"lee niile",popular_products:"gw nd ama ama",all_new_products:"gw hr niile",load_more:"Buo kara",new:"hr",close:"Mechie",please_sign_in:"Biko banye",your_pharmacy_location:"nd l gw g",location_services:"r nd",calculating_eta:"Na-agbako oge...",fetching_location:"Na-eweta nd...",nearest_pharmacy:"l gw kacha nso",to:"gaa",welcome_message:"Nn na PharmaSeA",find_medicines:"Chta gw nd d g nso",fast_delivery:"Nnyefe s s na ntkwas obi",learn_more:"Mtakwuo ihe",get_started:"Malite",shop_now:"Z ugbu a",order_now:"Nye tt ugbu a",browse_catalog:"Lelee gw nd any nwere",special_offer:"Onyinye pr iche",limited_time:"Onyinye nwa oge",orders:"t",all:"Niile",pending:"Na-echere",processing:"Na-ar r",fulfilled:"Emezula",cancelled:"Akagbuola",no_orders_yet:"Enwebegh t  bla.",order_number:"t #",customer:"Onye aha",items:"Ihe nd",total:"Mkpokta",status:"nd",see_more:"Hkwuo",see_less:"H nke nta",more_items:"kara",reveal_number:"Gosi nmba",please_sign_in_continue:"Biko banye ga n'ihu",sign_in_sign_up:"Banye / Debanye aha",qty:"ngg",my_conversations:`Mkparta ka
M`,search_chats:"Ch mkparta ka",no_conversations_yet:"Enwebegh mkparta ka  bla.",no_messages_yet:"Enwebegh ozi  bla.",your_cart_is_empty:"Ngwa aha g adgh.",remove:"Wep",subtotal:"Obere mkpokta",delivery_fee:"Ego nnyefe",proceed_to_checkout:"Gaa n'kw gw",order_summary:"Nchkta t",delivery_details:"Nkwa nnyefe",delivery_address:"Adress nnyefe",phone_number:"Nmba ekwent",email_optional:"meel (Nhr)",enter_delivery_address:"Tinye adrees nnyefe",enter_phone_number:"Tinye nmba ekwent",enter_email_address:"Tinye adrees meel",use_current_location:"Jiri ebe d ugbu a",continue_to_payment:"Gaa n'kw gw",payment_method:"z kw gw",pay_on_delivery:"Kw mgbe nnyefe",pay_with_cash_delivery:"Kw ego mgbe t ruru",online_payment:"kw gw n'ntanet",pay_with_card:"Kw na kaad, mbufe ego banki, ma  b USSD",pay_with_card_bank_ussd:"Kw na kaad, mbufe ego banki, ma  b USSD",pay_with_cash_on_delivery:"Kw ego mgbe t ruru",use_your_health_insurance:"Jiri mkpuchi ah ike g",pay_with_insurance:"Kw na mkpuchi",use_health_insurance:"Jiri mkpuchi ah ike g",coming_soon:"Na-aba n'oge na-adgh anya",total_amount:"Mkpokta ego",pay_now:"Kw ugbu a",place_order:"Nye t",decrease_quantity:"Belata ngg",increase_quantity:"Mee ka ngg mbaa",order_placement_failed:"Inyefe t dara",order_placed_delivery:"Enyela t nke ma!  ga-akw gw mgbe nnyefe.",payment_successful:"kw gw gara nke ma! Enyela t g.",checkout_failed:"kw gw dara. Biko nwaa z.",my_profile:"Profal M",pharmacy_profile:"Profal l gw",edit_profile:"Dezie Profal",view:"Lee",open:"Meghe",phone_number_profile:"Nmba Ekwent",address_profile:"Adrees",password:"Okwu nzuzo",items_in_cart:"Ihe nd d na ngwa aha",active_chats:"Mkparta ka na-ar r",saved_items:"Ihe nd echekwala",drugs_bought:"gw nd aztala",all_drugs_bought:"gw niile ezutala",my_saved_items:"Ihe nd m chekwara",products:"Ngwaaha",vendors:"Nd na-ere",no_products_saved:"Enwegh ngwaaha echekwara",start_adding_products:"Malite itinye ngwaaha  hr n'anya!",no_vendors_bookmarked:"Enwegh nd na-ere akara akara",bookmark_vendors:"Kaa nd na-ere  hr n'anya akara!",search_placeholder_profile:"Ch gw, t, gw...",prescriptions:"gw",orders_profile:"t",drugs:"gw",all_results:"Niile",times:"ugboro",bought:"aztara",no_search_results:"Enwegh nsonaaz",app_language:"Ass ngwa",vendor_profile:"Profal Onye na-ere",products_by:"Ngwaaha site na",vendor:"Onye na-ere",of:"n'ime",no_products_found_search:"Achtagh ngwaaha  bla daktara na nchghar g.",no_products_yet:"Enwebegh ngwaaha  bla.",customers_only_chat:" b naan nd aha nwere ike malite mkparta ka na l gw.",could_not_start_chat:"Enwegh ike malite mkparta ka.",pharmacy_report:"Akk l gw",field:"Ogige",value:"Uru",pharmacy:"l gw",email:"Email",address:"Adrees",phone:"Ekwent",product_name:"Aha ngwaaha",category:"d",stock:"Nchekwa",sku:"SKU",order_id:"ID nyere",search_by_name_category_sku:"Ch site na aha, d, ma  b SKU...",view_results:"Lee nsonaaz",clear:"Hichap",nearby_pharmacies:"l gw Nd D Nso",pharmacies_found_near_you:"{count} achtara nso g",loading_location:"Na-ebu ebe...",filter_pharmacies:"Hr l gw",pharmacies_found_near_you_detailed:"l gw {count} achtara nso g",your_location:"Ebe g",getting_your_location:"Na-enweta ebe g...",location_access_needed:"A chr ohere ebe",allow_location_access_etas:"Biko kwere ka a nweta ebe maka oge ziri ezi",enable_location_services:"Mee ka r ebe r r ka  h l gw nd d nso",search_pharmacies:"Ch l gw...",no_pharmacies_found:"Achtagh l gw  bla",keyboard_navigation_hint:"Jiri  mkps aka ga ebe, Enter hr, Esc imechi",distance:"Anya",within_5km:"N'ime 5km",within_10km:"N'ime 10km",within_20km:"N'ime 20km",you_are_here:" n ebe a",pharmacy_locations:"Ebe l gw D",pharmacies_sorted_by_distance:"l gw {count}  Edobere site na anya",selected:"Ahrla",calculating:"Na-agbako...",closest:"Nke kacha nso",get_directions:"Nweta Nduzi",call_pharmacy:"Kp l gw",view_products:"Lee Ngwaaha",search_results:"Nsonaaz chch",all_pharmacies:"l gw Niile",pharmacies_found_count:"{count} achtara",no_pharmacies_found_search:"Achtagh l gw  bla daktara na chch g",no_pharmacies_found_general:"Achtagh l gw  bla",try_adjusting_search:"Gbala imezighar okwu chch g",try_adjusting_location:"Gbala imezighar ebe g ma  b lghachi az mgbe z",clear_search:"Hichap chch",today:"Taa",yesterday:"nyaah",sent:"Ezigala",delivered:"Enyela",read:"Agla",prescription_created:"Emeptala akwkw gw hr.",drug_inquiry:"Achr m mata kara gbasara gw a {productName}{priceText}.",call_pharmacy_title:"Kp {pharmacy}",no_phone_number:"Enwegh nmba ekwent",actions:"Omume",create_prescription:"Mepta Akwkw gw",view_prescription_history:"Lee Akk Akwkw gw",load_more_messages:"Bulie ozi {count} z",start_conversation:"Malite mkparta ka g",message_placeholder:"Ozi",attachments_coming_soon:"Ihe nd agbakwunyere na-aba ngwa ngwa",my_dashboard:"Dashboard M",overview:"Nchikta",top_products:"Ngwaaha Kachas Elu",best_sellers:"Nd Na-ere Kacha Mma",no_sales_data:"Enwebegh data ire ere",start_selling_message:"Malite ire ngwaaha iji h nd kacha ar r",units_sold:"Nkeji {count} erere",units:"nkeji",total_products:"Mkpokta Ngwaaha",total_orders:"Mkpokta rder",total_revenue:"Mkpokta Ego Mbata",active_customers:"Nd Aha Na-ar r",this_month:"nwa A",avg_order_value:"Uru rder Nkezi",pending_orders:"rder Na-echere",awaiting:"Na-echere",low_stock_items:"Ngwaaha D Ntakr",need_restock:"Kwesr Itinyeghachi",orders_this_month:"rder nwa A",no_comparison:"Enwegh ntnyere",pending_reviews:"Nyocha Na-echere",need_response:"Kwesr Nzaghachi",recent_reviews:"Nyocha Nso Nso A",last_24h:"Awa 24 gara aga",low_stock_alert:"kwa Ngwaaha D Ntakr",items_need_restocking:"Ihe {count} kwesr itinyeghachi",inventory_tip:"Lelee ngwaaha g iji zere gw ngwaaha nd a ma ama",recent_messages:"Ozi Nso Nso A",no_recent_messages:"Enwegh ozi nso nso a.",no_recent_reviews:"Enwegh nyocha nso nso a",new_reviews_appear_here:"Nyocha nd aha hr ga-apta ebe a",by_customer:"site n'aka {customerName}",needs_response:"Kwesr Nzaghachi",view_more_reviews:"Lee nyocha {count} z",revenue_analytics:"Nyocha Ego Mbata",by_month:"Site n'nwa",by_year:"Site n'Af",month_number:"nwa {number}",no_revenue_data:"Enwegh data ego mbata",start_selling_revenue:"Malite ire iji h nyocha ego mbata g",best_performing_period:"Oge Kacha Mma {period}",month_label:"nwa",year_label:"Af",sales_trends:"z Ire Aha",last_6_months:"nwa 6 gara aga",no_sales_trend_data:"Enwegh data z ire aha.",orders_count:"rder {count}",reviews_management:"Nlekta Nyocha",filters_sort:"Nzacha na Nhazi",total_reviews:"Mkpokta Nyocha",responded:"Azaghachila",avg_rating:"Nkezi Ogo",positive_reviews:"Nke ma (4+ )",product:"Ngwaaha",all_products:"Ngwaaha Niile",sort_by:"Hazie Site Na",newest_first:"hr Mb",oldest_first:"Ochie Mb",highest_rating:"Ogo Kacha Elu",lowest_rating:"Ogo Kacha Ala",filter_by:"Zpta Site Na",all_reviews:"Nyocha Niile",positive_4_stars:"Nke ma (4+ kpakpando)",negative_1_2_stars:"Nke j (1-2 kpakpando)",no_reviews_found:"Achtagh nyocha  bla",no_reviews_yet_message:"I nwebegh nyocha  bla. Gbaa nd aha ume ka ha hap nyocha site n'inye r magburu onwe ya na nkwurta okwu na-esote!",no_reviews_match_filters:"Enwegh nyocha dabara na nzacha g ugbu a. Gbala ime mgbanwe na njirisi chch g.",medicine:"gw",reviewed_by:"Nyochara site na",verified:"Enyochala",people_found_helpful:"Nd mmad {count} chptara na nke a bara uru",your_response:"Nzaghachi G",cancel_response:"Kagbuo Nzaghachi",respond_to_review:"Zaghachi na Nyocha",write_thoughtful_response:"Dee nzaghachi nwere uche na nyocha a...",submit_response:"Ziga Nzaghachi",response_submitted_success:"E zigara nzaghachi nke ma!",response_submit_failed:"E nwegh ike izipu nzaghachi. Biko nwaghachi z.",loading_reviews:"Na-ebu nyocha g...",loading_please_wait:"Biko chere ka any na-eweta data g",my_prescriptions:"Akwkw gw M",add_to_calendar:"Tinye na Kalenda",no_prescriptions_found:"Achtagh akwkw gw  bla.",see_more_count:"Lee z ({count})",see_less:"Lee ntakr",time_to_take_medicine:"Oge  {drugName}",take_medicine:" {drugName}",dosage_frequency:"ngg: {dosage} ({frequency})",my_activity:"r M",active_chats:"Mkparta ka Na-ar r",storefront_preview:"Nlele l Aha",inventory:"Nchekwa Ngwaaha",products_sold:"Ngwaaha E Rere",no_products_yet:"Enwebegh ngwaaha. Jiri btn nd d n'elu tinye ma  b bulite tt.",edit_product:"Dezie Ngwaaha",product_image:"Foto Ngwaaha",image_url_placeholder:"URL foto (ma  b hr fal n'okpuru)",product_description:"Nkwa Ngwaaha",enter_product_description:"Tinye nkwa ngwaaha",confirm_delete_product:" ji n'ezie ch ihichap ihe a?",customer_reviews:"Nyocha Nd Aha",loading_reviews:"Na-ebu nyocha",no_reviews_yet:"Enwebegh nyocha. Br onye mb nyochaa!",pharmacy_response:"Nzaghachi {pharmacyName}",message_vendor:"Zigara Onye Na-ere Aha Ozi",call_to_order:"Kp Maka z",your_name:"Aha G",swipe_navigation:"gaghar Site na Ifufe",data_saver_mode:"nd Nchekwa Data",read_receipts:"Akwkw Nnata gg",theme:"Isiokwu",font_size:"Nha Mkpredemede",app_language:"Ass Ngwa",add_product_title:"Tinye Ngwaaha hr",product_name:"Aha Ngwaaha",product_name_placeholder:"Tinye aha ngwaaha",product_price:"naha",product_price_placeholder:"Tinye naha",product_category:"d",select_category:"Hr d",prescription_drugs:"gw Akwkw gw",over_counter:"Na-enwegh akwkw gw",general_pills:"gw Izugbe",controlled_substances:"gw E Ji Achkwa",syrup_liquid:"Syrup/Mmiri",therapeutic_drugs:"gw gwgw",supplements_vitamins:"Mgbakwunye na Vitamin",stock_quantity:"ngg Nchekwa",stock_placeholder:"Tinye ngg nchekwa",product_sku:"SKU",sku_placeholder:"Tinye SKU (nhr)",product_tags:"Mkpado",tags_placeholder:"Tinye mkpado nkewa site na akara mkpak",product_image:"Foto Ngwaaha",upload_image:"Bulite Foto",image_url:"URL Foto",image_url_placeholder:"Ma  b tinye URL foto",product_description:"Nkwa",description_placeholder:"Tinye nkwa ngwaaha",uploading:"Na-ebuli...",create_product:"Mepta Ngwaaha",creating_product:"Na-emepta Ngwaaha...",product_created_success:"E meptala ngwaaha nke ma!",error_creating_product:"Njehie na imepta ngwaaha. Biko nwaa z.",please_fill_required:"Biko jupta oghere niile achr",invalid_price:"Biko tinye naha ziri ezi"},fr:{home:"Accueil",cart:"Panier",messages:"Messages",orders:"Commandes",settings:"Paramtres",notifications:"Notifications",search:"Rechercher",back:"Retour",continue:"Continuer",save:"Enregistrer",cancel:"Annuler",delete:"Supprimer",edit:"Modifier",loading:"Chargement...",profile:"Profil",add_to_cart:"Ajouter au panier",buy_now:"Acheter maintenant",price:"Prix",out_of_stock:"Rupture de stock",in_stock:"En stock",product_description:"Description du produit",product_unavailable:"Produit indisponible. Veuillez ressayer.",hello:"Bonjour",friend:"Ami",search_placeholder:"Rechercher mdicaments, pharmacies",new_arrivals:"Nouveauts",view_all:"voir tout",popular_products:"Produits populaires",all_new_products:"Tous les nouveaux produits",load_more:"Charger plus",new:"Nouveau",close:"Fermer",please_sign_in:"Veuillez vous connecter",your_pharmacy_location:"Emplacement de votre pharmacie",location_services:"Services de localisation",calculating_eta:"Calcul du temps...",fetching_location:"Obtention de la localisation...",nearest_pharmacy:"pharmacie la plus proche",to:"vers",welcome_message:"Bienvenue  PharmaSeA",find_medicines:"Trouvez des mdicaments prs de chez vous",fast_delivery:"Livraison rapide et fiable",learn_more:"En savoir plus",get_started:"Commencer",shop_now:"Acheter maintenant",order_now:"Commander maintenant",browse_catalog:"Parcourir le catalogue",special_offer:"Offre spciale",limited_time:"Offre  dure limite",orders:"Commandes",all:"Tout",pending:"En attente",processing:"En cours",fulfilled:"Livr",cancelled:"Annul",no_orders_yet:"Aucune commande pour le moment.",order_number:"Commande #",customer:"Client",items:"Articles",total:"Total",status:"Statut",see_more:"Voir plus",see_less:"Voir moins",more_items:"de plus",reveal_number:"Rvler le numro",please_sign_in_continue:"Veuillez vous connecter pour continuer",sign_in_sign_up:"Se connecter / S'inscrire",qty:"Qt",my_conversations:`Mes
Conversations`,search_chats:"Rechercher des conversations",no_conversations_yet:"Aucune conversation pour le moment.",no_messages_yet:"Aucun message pour le moment.",cart:"Panier",your_cart_is_empty:"Votre panier est vide.",remove:"Supprimer",subtotal:"Sous-total",delivery_fee:"Frais de livraison",total:"Total",proceed_to_checkout:"Procder au paiement",order_summary:"Rsum de commande",items:"Articles",delivery_details:"Dtails de livraison",delivery_address:"Adresse de livraison",phone_number:"Numro de tlphone",email_optional:"E-mail (Facultatif)",enter_delivery_address:"Entrer l'adresse de livraison",enter_phone_number:"Entrer le numro de tlphone",enter_email_address:"Entrer l'adresse e-mail",use_current_location:"Utiliser la localisation actuelle",continue_to_payment:"Continuer vers le paiement",payment_method:"Mode de paiement",pay_on_delivery:"Payer  la livraison",pay_with_cash_delivery:"Payer en espces  la livraison",online_payment:"Paiement en ligne",pay_with_card:"Payer par carte, virement bancaire, ou USSD",pay_with_card_bank_ussd:"Payer par carte, virement bancaire, ou USSD",pay_with_cash_on_delivery:"Payer en espces  la livraison",use_your_health_insurance:"Utiliser votre assurance sant",pay_with_insurance:"Payer avec l'assurance",use_health_insurance:"Utiliser votre assurance sant",coming_soon:"Bientt disponible",total_amount:"Montant total",pay_now:"Payer maintenant",place_order:"Passer commande",decrease_quantity:"Diminuer la quantit",increase_quantity:"Augmenter la quantit",order_placement_failed:"chec de la commande",order_placed_delivery:"Commande passe avec succs! Vous paierez  la livraison.",payment_successful:"Paiement russi! Votre commande a t passe.",checkout_failed:"Paiement chou. Veuillez ressayer.",my_profile:"Mon Profil",pharmacy_profile:"Profil de la Pharmacie",edit_profile:"Modifier le Profil",edit:"Modifier",save:"Enregistrer",cancel:"Annuler",close:"Fermer",view:"Voir",open:"Ouvrir",name:"Nom",phone_number_profile:"Numro de Tlphone",address_profile:"Adresse",password:"Mot de passe",items_in_cart:"Articles dans le panier",active_chats:"Conversations actives",saved_items:"Articles sauvegards",drugs_bought:"Mdicaments achets",all_drugs_bought:"Tous les mdicaments achets",my_saved_items:"Mes articles sauvegards",products:"Produits",vendors:"Vendeurs",no_products_saved:"Aucun produit sauvegard",start_adding_products:"Commencez  ajouter des produits que vous aimez!",no_vendors_bookmarked:"Aucun vendeur mis en signet",bookmark_vendors:"Mettez en signet les vendeurs que vous aimez!",log_out:"Dconnexion",search_placeholder_profile:"Rechercher prescriptions, commandes, mdicaments...",prescriptions:"Prescriptions",orders_profile:"Commandes",drugs:"Mdicaments",all_results:"Tous",times:"fois",bought:"achet",no_search_results:"Aucun rsultat trouv",try_different_search:"Essayez un terme de recherche diffrent",general:"Gnral",appearance:"Apparence",language_region:"Langue et Rgion",privacy_security:"Confidentialit et Scurit",accessibility:"Accessibilit",app_language:"Langue de l'application",vendor_profile:"Profil du Vendeur",products_by:"Produits par",vendor:"Vendeur",of:"sur",no_products_found_search:"Aucun produit trouv correspondant  votre recherche.",no_products_yet:"Aucun produit pour le moment.",customers_only_chat:"Seuls les clients peuvent entamer une conversation avec une pharmacie.",could_not_start_chat:"Impossible de dmarrer le fil de discussion.",pharmacy_report:"Rapport de pharmacie",field:"Champ",value:"Valeur",pharmacy:"Pharmacie",email:"Email",address:"Adresse",phone:"Tlphone",product_name:"Nom du produit",category:"Catgorie",stock:"Stock",sku:"SKU",price:"Prix",order_id:"ID commande",customer:"Client",status:"Statut",date:"Date",products:"Produits",add_to_bookmarks:"Ajouter aux favoris",remove_from_bookmarks:"Supprimer des favoris",search_by_name_category_sku:"Rechercher par nom, catgorie ou SKU...",view_results:"Voir les rsultats",clear:"Effacer",nearby_pharmacies:"Pharmacies  Proximit",pharmacies_found_near_you:"{count} trouves prs de vous",loading_location:"Chargement de la localisation...",filter_pharmacies:"Filtrer les pharmacies",pharmacies_found_near_you_detailed:"{count} pharmacies trouves prs de vous",your_location:"Votre localisation",getting_your_location:"Obtention de votre localisation...",location_access_needed:"Accs  la localisation ncessaire",allow_location_access_etas:"Veuillez autoriser l'accs  la localisation pour des horaires prcis",enable_location_services:"Activez les services de localisation pour voir les pharmacies  proximit",search_pharmacies:"Rechercher des pharmacies...",no_pharmacies_found:"Aucune pharmacie trouve",try_different_search:"Essayez un terme de recherche diffrent",name:"Nom",address:"Adresse",keyboard_navigation_hint:"Utilisez  pour naviguer, Entre pour slectionner, chap pour fermer",distance:"Distance",all:"Tout",within_5km:"Dans les 5km",within_10km:"Dans les 10km",within_20km:"Dans les 20km",you_are_here:"Vous tes ici",pharmacy_locations:"Emplacements des Pharmacies",pharmacies_sorted_by_distance:"{count} pharmacies  Tries par distance",pharmacy:"Pharmacie",selected:"Slectionn",calculating:"Calcul en cours...",closest:"Le plus proche",get_directions:"Obtenir un Itinraire",call:"Appeler",call_pharmacy:"Appeler la pharmacie",view_products:"Voir les Produits",search_results:"Rsultats de Recherche",all_pharmacies:"Toutes les Pharmacies",pharmacies_found_count:"{count} trouves",no_pharmacies_found_search:"Aucune pharmacie trouve correspondant  votre recherche",no_pharmacies_found_general:"Aucune pharmacie trouve",try_adjusting_search:"Essayez d'ajuster vos termes de recherche",try_adjusting_location:"Essayez d'ajuster votre localisation ou revenez plus tard",clear_search:"Effacer la recherche",today:"Aujourd'hui",yesterday:"Hier",sent:"Envoy",delivered:"Livr",read:"Lu",customer:"Client",pharmacy:"Pharmacie",prescription_created:"Une nouvelle ordonnance a t cre.",drug_inquiry:"Je souhaiterais en savoir plus sur ce mdicament {productName}{priceText}.",call:"Appeler",call_pharmacy_title:"Appeler {pharmacy}",no_phone_number:"Pas de numro de tlphone",actions:"Actions",create_prescription:"Crer une Ordonnance",view_prescription_history:"Voir l'Historique des Ordonnances",load_more_messages:"Charger {count} messages de plus",start_conversation:"Commencez votre conversation",message_placeholder:"Message",attachments_coming_soon:"Pices jointes bientt disponibles",my_dashboard:"Mon Tableau de Bord",overview:"Aperu",top_products:"Produits Populaires",best_sellers:"Meilleures Ventes",no_sales_data:"Aucune donne de vente pour le moment",start_selling_message:"Commencez  vendre des produits pour voir vos meilleures performances",units_sold:"{count} units vendues",units:"units",total_products:"Total Produits",total_orders:"Total Commandes",total_revenue:"Chiffre d'Affaires Total",active_customers:"Clients Actifs",this_month:"Ce Mois",avg_order_value:"Valeur Moyenne Commande",pending_orders:"Commandes En Attente",awaiting:"En attente",low_stock_items:"Articles En Rupture",need_restock:" Rapprovisionner",orders_this_month:"Commandes Ce Mois",no_comparison:"Pas de comparaison",pending_reviews:"Avis En Attente",need_response:"Ncessitent Rponse",recent_reviews:"Avis Rcents",last_24h:"Dernires 24h",low_stock_alert:"Alerte Stock Faible",items_need_restocking:"{count} article{plural} ncessitent un rapprovisionnement",inventory_tip:"Vrifiez votre inventaire pour viter les ruptures de produits populaires",recent_messages:"Messages Rcents",no_recent_messages:"Aucun message rcent.",no_recent_reviews:"Aucun avis rcent",new_reviews_appear_here:"Les nouveaux avis clients apparatront ici",view_all:"Voir Tout",by_customer:"par {customerName}",needs_response:"Ncessitent Rponse",view_more_reviews:"Voir {count} avis de plus",revenue_analytics:"Analyse des Revenus",total:"Total",by_month:"Par Mois",by_year:"Par Anne",month_number:"Mois {number}",no_revenue_data:"Aucune donne de revenus disponible",start_selling_revenue:"Commencez  vendre pour voir vos analyses de revenus",best_performing_period:"Meilleure Priode {period}",month_label:"Mois",year_label:"Anne",sales_trends:"Tendances des Ventes",last_6_months:"6 derniers mois",no_sales_trend_data:"Aucune donne de tendance des ventes.",orders_count:"{count} commande{plural}",reviews_management:"Gestion des Avis",filters_sort:"Filtres et Tri",total_reviews:"Total des Avis",responded:"Rpondu",avg_rating:"Note Moyenne",positive_reviews:"Positifs (4+ )",product:"Produit",all_products:"Tous les Produits",sort_by:"Trier par",newest_first:"Plus Rcents d'Abord",oldest_first:"Plus Anciens d'Abord",highest_rating:"Note la Plus Haute",lowest_rating:"Note la Plus Basse",filter_by:"Filtrer par",all_reviews:"Tous les Avis",positive_4_stars:"Positifs (4+ toiles)",negative_1_2_stars:"Ngatifs (1-2 toiles)",no_reviews_found:"Aucun avis trouv",no_reviews_yet_message:"Vous n'avez pas encore d'avis. Encouragez les clients  laisser des avis en fournissant un excellent service et une communication de suivi !",no_reviews_match_filters:"Aucun avis ne correspond  vos filtres actuels. Essayez d'ajuster vos critres de recherche.",medicine:"Mdicament",reviewed_by:"Avis par",verified:"Vrifi",people_found_helpful:"{count} personnes ont trouv cela utile",your_response:"Votre Rponse",cancel_response:"Annuler la Rponse",respond_to_review:"Rpondre  l'Avis",write_thoughtful_response:"Rdigez une rponse rflchie  cet avis...",submit_response:"Envoyer la Rponse",response_submitted_success:"Rponse envoye avec succs !",response_submit_failed:"chec de l'envoi de la rponse. Veuillez ressayer.",loading_reviews:"Chargement de vos avis...",loading_please_wait:"Veuillez patienter pendant que nous rcuprons vos donnes",my_prescriptions:"Mes Ordonnances",add_to_calendar:"Ajouter au Calendrier",no_prescriptions_found:"Aucune ordonnance trouve.",see_more_count:"Voir plus ({count})",see_less:"Voir moins",time_to_take_medicine:"Il est temps de prendre {drugName}",take_medicine:"Prendre {drugName}",dosage_frequency:"Dosage: {dosage} ({frequency})",my_activity:"Mon Activit",active_chats:"Chats Actifs",storefront_preview:"Aperu de la Vitrine",inventory:"Inventaire",products_sold:"Produits Vendus",no_products_yet:"Pas encore de produits. Utilisez les boutons ci-dessus pour ajouter ou tlcharger en masse.",edit_product:"Modifier le Produit",product_image:"Image du Produit",image_url_placeholder:"URL de l'image (ou choisissez un fichier ci-dessous)",product_description:"Description du Produit",enter_product_description:"Entrez la description du produit",confirm_delete_product:"tes-vous sr de vouloir supprimer cet lment ?",yes_delete:"Oui, Supprimer",log_out:"Se Dconnecter",customer_reviews:"Avis Clients",loading_reviews:"Chargement des avis",no_reviews_yet:"Pas encore d'avis. Soyez le premier  donner votre avis !",pharmacy_response:"Rponse de {pharmacyName}",message_vendor:"Contacter le Vendeur",call_to_order:"Appeler pour Commander",your_name:"Votre Nom",your_review_optional:"Votre avis... (optionnel)",general:"Gnral",appearance:"Apparence",language_region:"Langue et Rgion",privacy_security:"Confidentialit et Scurit",accessibility:"Accessibilit",swipe_navigation:"Navigation par Balayage",data_saver_mode:"Mode conomie de Donnes",read_receipts:"Accuss de Lecture",theme:"Thme",font_size:"Taille de Police",app_language:"Langue de l'Application",add_product_title:"Ajouter un Nouveau Produit",product_name:"Nom du Produit",product_name_placeholder:"Entrez le nom du produit",product_price:"Prix",product_price_placeholder:"Entrez le prix",product_category:"Catgorie",select_category:"Slectionnez une Catgorie",prescription_drugs:"Mdicaments sur Ordonnance",over_counter:"En Vente Libre",general_pills:"Pilules Gnrales",controlled_substances:"Substances Contrles",syrup_liquid:"Sirop/Liquide",therapeutic_drugs:"Mdicaments Thrapeutiques",supplements_vitamins:"Supplments et Vitamines",stock_quantity:"Quantit en Stock",stock_placeholder:"Entrez la quantit en stock",product_sku:"SKU",sku_placeholder:"Entrez le SKU (optionnel)",product_tags:"tiquettes",tags_placeholder:"Ajoutez des tiquettes spares par des virgules",product_image:"Image du Produit",upload_image:"Tlcharger une Image",image_url:"URL de l'Image",image_url_placeholder:"Ou entrez l'URL de l'image",product_description:"Description",description_placeholder:"Entrez la description du produit",uploading:"Tlchargement...",create_product:"Crer le Produit",creating_product:"Cration du Produit...",product_created_success:"Produit cr avec succs !",error_creating_product:"Erreur lors de la cration du produit. Veuillez ressayer.",please_fill_required:"Veuillez remplir tous les champs requis",invalid_price:"Veuillez entrer un prix valide"}},qs=()=>{const{getSetting:t}=ny(),e=t(Fr.LANGUAGE)||"en";return{t:j.useMemo(()=>(n,s=n,i={})=>{const a=qN[e]?.[n]||qN.en?.[n]||s;return!a||typeof a!="string"?a:a.replace(/\{(\w+)\}/g,(o,l)=>i&&Object.prototype.hasOwnProperty.call(i,l)?String(i[l]):`{${l}}`)},[e]),currentLanguage:e}},Oie=({children:t})=>{const{t:e,currentLanguage:r}=qs();return u.jsx(Die.Provider,{value:{t:e,currentLanguage:r},children:t})},Mie=({user:t,profile:e,location:r,navigate:n,etaInfo:s,closestPharmacy:i,vendors:a,userCoords:o,t:l})=>Ki.createPortal(u.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] w-full bg-white dark:bg-gray-900 border-b dark:border-gray-700 flex-shrink-0 px-2",children:u.jsx("div",{className:"w-full mx-auto pt-8 pb-4",children:u.jsx("div",{className:"pt-4 pb-2 w-full",children:u.jsxs("div",{className:"w-full mx-auto px-0",children:[u.jsxs("div",{className:"flex justify-between items-center w-full h-[14px] md:h-[14px] lg:h-[20px]",children:[u.jsxs("div",{className:"flex flex-col justify-center",children:[u.jsxs("div",{className:"text-[17px] md:text-[26px] lg:text-[20px] font-regular font-poppins text-gray-900 dark:text-white",children:[l("hello","Hello"),t?`, ${t.displayName?.split(" ")[0]||l("friend","Friend")}`:""]}),u.jsx("span",{className:"text-zinc-500 dark:text-zinc-400 text-[10px] md:text-[12px] lg:text-[14px] font-thin font-poppins truncate max-w-xs md:max-w-md lg:max-w-lg",title:r,children:r})]}),e?.role==="customer"?u.jsxs("button",{onClick:()=>n("/pharmacy-map"),className:"flex flex-col justify-center items-end hover:bg-blue-50 transition-colors rounded-lg p-2 -m-2 group",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(BN,{className:"h-4 w-4 md:h-5 md:w-5 lg:h-6 lg:w-6 mb-0.5 mt-0.5 text-sky-500"}),u.jsx(tB,{className:"h-4 w-4 md:h-3 md:w-3 lg:h-4 lg:w-4 text-sky-500 group-hover:text-blue-500 group-hover:translate-x-1 transition-all duration-300 animate-pulse"})]}),u.jsx("span",{className:"text-[10px] md:text-[12px] lg:text-[14px] font-poppins font-thin text-right leading-tight mt-1.5 group-hover:text-blue-600 transition-colors",children:s&&i?`${s.formatted} ${l("to","to")} ${a[i.vendorId]?.name||l("nearest_pharmacy","nearest pharmacy")}`:o?l("calculating_eta","Calculating ETA..."):l("fetching_location","Fetching location...")})]}):u.jsxs("div",{className:"flex flex-col justify-center items-end",children:[u.jsx("div",{className:"flex items-center gap-1",children:u.jsx(BN,{className:"h-3 w-3 md:h-5 md:w-5 lg:h-6 lg:w-6 mb-0.5 mt-0.5 text-sky-500"})}),u.jsx("span",{className:"text-[10px] md:text-[12px] lg:text-[14px] font-poppins font-thin text-right leading-tight mt-1.5 text-gray-800",children:e?.role==="pharmacy"?l("your_pharmacy_location","Your pharmacy location"):l("location_services","Location services")})]})]}),u.jsx("div",{className:"w-full"})]})})})}),document.body);function H6(){const[t,e]=j.useState([]),[r,n]=j.useState({}),[s,i]=j.useState([]),[a,o]=j.useState(!1),[l,c]=j.useState(-1),[d,p]=j.useState(null),[g,m]=j.useState(!1),[y,w]=j.useState(""),{user:_,profile:S}=Dn(),{t:T}=qs(),I=Jn(),{userCoords:M,location:K}=Np(),[W,L]=j.useState(null),[A,E]=j.useState(null),D=j.useRef(null),[R,F]=j.useState(!1),[V,Z]=j.useState(!1),[fe,xe]=j.useState("All"),[he,ae]=j.useState([]),H=j.useRef(null),[te,G]=j.useState(0),P=j.useRef([]),U=Le=>Ye=>{P.current[Le]=Ye||null},[X,J]=j.useState(1),[ie,ve]=j.useState(1),ke=j.useMemo(()=>{let Le=t;const Ye=y.trim().toLowerCase();Ye&&d?.products&&Array.isArray(d.products)&&(Le=d.products);let Qe=Le;return fe&&fe!=="All"&&(Qe=Le.filter(le=>{const je=le.category||"";return fe==="Over-the-counter"?je.toLowerCase().includes("over"):fe==="Controlled"?je.toLowerCase().includes("control"):je===fe})),Ye?Qe.filter(le=>{const je=(le.name||"").toLowerCase(),We=(le.category||"").toLowerCase(),lt=Array.isArray(le.tags)?le.tags.join(" ").toLowerCase():"",yt=le.vendorId?r[le.vendorId]||{}:{},$t=(yt.name||"").toLowerCase(),Xt=(yt.location||"").toLowerCase(),At=[le.price,le.mrp,le.cost,le.listPrice].map(Sr=>Sr==null?"":String(Sr)).join(" ").toLowerCase(),Vt=je.includes(Ye)||We.includes(Ye)||lt.includes(Ye)||$t.includes(Ye)||Xt.includes(Ye)||At.includes(Ye),Or=Ye.replace(/[^0-9.]/g,""),rr=Or&&(At.includes(Or)||le.price&&String(le.price).includes(Or));return Vt||!!rr}):Qe},[t,y,fe,r,d]),oe=j.useMemo(()=>{const Le=y.trim().toLowerCase();return Le?d?.pharmacies&&Array.isArray(d.pharmacies)?d.pharmacies.slice(0,6):s.filter(Ye=>{const Qe=(Ye.name||Ye.displayName||"").toLowerCase(),le=(Ye.address||Ye.city||Ye.location||"").toLowerCase();return Qe.includes(Le)||le.includes(Le)}).slice(0,6):[]},[s,y,d]);j.useEffect(()=>F_(e),[]),j.useEffect(()=>{async function Le(){if(!M)return;let Ye=s;if(Ye.length===0&&(Ye=await m5(),!Ye||Ye.length===0))return;const Qe=jie(Ye,M,"driving");Qe?(L(Qe.pharmacy),E(Qe.eta)):(L(null),E(null))}Le()},[M,s]),j.useEffect(()=>{if(!D.current)return;let Le,Ye;const Qe=()=>{F(!0),clearTimeout(Ye),Ye=setTimeout(()=>F(!1),2e3)},le=D.current;return le.addEventListener("scroll",Qe),Le=setInterval(()=>{!R&&le&&(le.scrollBy({left:120,behavior:"smooth"}),le.scrollLeft+le.offsetWidth>=le.scrollWidth-5&&le.scrollTo({left:0,behavior:"smooth"}))},2500),()=>{clearInterval(Le),le.removeEventListener("scroll",Qe),Ye&&clearTimeout(Ye)}},[R,ke.length]),j.useEffect(()=>{async function Le(){const Ye=Array.from(new Set(t.map(le=>le.vendorId).filter(Boolean))),Qe={};await Promise.all(Ye.map(async le=>{try{const je=await ni(er(ht,"pharmacies",le));if(je.exists()){const We=je.data()||{};Qe[le]={name:We.name||"Pharmacy",location:We.address||We.city||We.location||"",coords:We.coordinates||null}}}catch{}})),n(Qe)}t.length&&Le()},[t]),j.useEffect(()=>{let Le=!0;return(async()=>{try{const Ye=await m5();if(!Le)return;i(Array.isArray(Ye)?Ye:[])}catch{}})(),()=>{Le=!1}},[]),j.useEffect(()=>{const Le=y.trim();if(!Le){p(null),m(!1);return}const Ye=new AbortController,Qe=setTimeout(async()=>{m(!0);try{const le=await fetch(`/.netlify/functions/search?q=${encodeURIComponent(Le)}`,{signal:Ye.signal,headers:{Accept:"application/json"}});if(!le.ok)throw new Error("server search failed");const je=await le.json();p(je||null)}catch{p(null)}finally{m(!1)}},300);return()=>{Ye.abort(),clearTimeout(Qe)}},[y]),j.useEffect(()=>{const Le=In(Zt(ht,"infoCards"),Ye=>{ae(Ye.docs.map(Qe=>({id:Qe.id,...Qe.data()})))});return()=>Le()},[]);const Ee=j.useMemo(()=>[...ke].filter(Le=>Le.stock===void 0||Le.stock>0).sort((Le,Ye)=>(Ye.viewCount||0)+(Ye.sold||0)-((Le.viewCount||0)+(Le.sold||0))),[ke]),Oe=j.useMemo(()=>[...t].filter(Le=>Le.createdAt).sort((Le,Ye)=>(Ye.createdAt?.seconds||0)-(Le.createdAt?.seconds||0)).slice(0,12),[t]),ne=j.useMemo(()=>[...t].filter(Le=>Le.createdAt).sort((Le,Ye)=>(Ye.createdAt?.seconds||0)-(Le.createdAt?.seconds||0)),[t]),we=30,Re=Math.max(1,Math.ceil(Ee.length/we)),pe=Ee.slice(0,X*we),Ke=12,ze=Math.max(1,Math.ceil(ne.length/Ke)),ot=ne.slice(0,ie*Ke);j.useEffect(()=>J(1),[Ee.length]),j.useEffect(()=>ve(1),[ne.length]);const Be=Le=>{if(!Le)return Le;if(Le.startsWith("t:")){const Qe=Le.substring(2);return T(Qe,Le)}const Ye=Le.match(/^\{(.+)\}$/);return Ye?T(Ye[1],Le):Le},He=Le=>{if(!Le)return"";const Ye=String(Le).trim();return/^(https?:)?\/\//i.test(Ye)||/^mailto:/i.test(Ye)||/^tel:/i.test(Ye)||Ye.startsWith("/")?Ye:`https://${Ye}`},ut=Le=>Le?/^(https?:)?\/\//i.test(Le)||/^mailto:/i.test(Le)||/^tel:/i.test(Le):!1,Ct=async Le=>{I(`/product/${Le}`),e(Ye=>Ye.map(Qe=>Qe.id===Le?{...Qe,viewCount:(Qe.viewCount||0)+1}:Qe));try{const{doc:Ye,updateDoc:Qe,increment:le}=await $d(async()=>{const{doc:je,updateDoc:We,increment:lt}=await Promise.resolve().then(()=>gO);return{doc:je,updateDoc:We,increment:lt}},void 0);await Qe(Ye(ht,"products",Le),{viewCount:le(1)})}catch{}};j.useEffect(()=>{const Le=H.current;if(!Le)return;let Ye=0;const Qe=()=>{cancelAnimationFrame(Ye),Ye=requestAnimationFrame(()=>{const le=Le.scrollLeft+Le.clientWidth/2;let je=0,We=1/0;P.current.forEach((lt,yt)=>{if(!lt)return;const $t=lt.getBoundingClientRect(),Xt=Le.getBoundingClientRect(),At=$t.left-Xt.left+$t.width/2+Le.scrollLeft,Vt=Math.abs(At-le);Vt<We&&(We=Vt,je=yt)}),G(je)})};return Le.addEventListener("scroll",Qe,{passive:!0}),Qe(),()=>{Le.removeEventListener("scroll",Qe),cancelAnimationFrame(Ye)}},[he.length]),j.useEffect(()=>{const Le=H.current;if(!Le||P.current.length===0||window.matchMedia?.("(prefers-reduced-motion: reduce)").matches)return;let Ye=!1,Qe;const le=()=>{Ye=!0,clearTimeout(Qe),Qe=setTimeout(()=>{Ye=!1},1800)};Le.addEventListener("pointerdown",le),Le.addEventListener("wheel",le,{passive:!0}),Le.addEventListener("touchstart",le,{passive:!0});const je=setInterval(()=>{if(Ye)return;const We=(te+1)%P.current.length,lt=P.current[We];if(lt&&Le){const yt=lt.offsetLeft,$t=Math.max(0,Math.round(yt-(Le.clientWidth-lt.clientWidth)/2));Le.scrollTo({left:$t,behavior:"smooth"})}},3e3);return()=>{clearInterval(je),Le.removeEventListener("pointerdown",le),Le.removeEventListener("wheel",le),Le.removeEventListener("touchstart",le),clearTimeout(Qe)}},[te,he.length]),_&&_.role;const Et={Prescription:"PrescriptionDrugs.svg","Over-the-counter":"Over-the-counter Icon.svg",Syrup:"Syrup.svg",Therapeutic:"Therapeutic.svg",Controlled:"ControlledSubstances.svg","Target System":"TargetSystem.svg"};return t.length?u.jsxs(u.Fragment,{children:[u.jsx(Mie,{user:_,profile:S,location:K,navigate:I,etaInfo:A,closestPharmacy:W,vendors:r,userCoords:M,t:T}),u.jsx("div",{className:"min-h-screen w-full px-0 pb-20 pt-32 bg-white dark:bg-gray-900",children:u.jsxs("div",{className:"flex-1 overflow-y-auto w-full mx-auto flex flex-col pb-28 px-0",children:[u.jsxs("div",{className:"flex items-center gap-3 border-b border-zinc-300 dark:border-gray-600 dark:border-zinc-600 pb-2",children:[u.jsx(Uf,{className:"h-5 w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-zinc-400 dark:text-zinc-500"}),u.jsx("input",{value:y,onChange:Le=>{w(Le.target.value),o(!0),c(-1)},onKeyDown:Le=>{if(!(!a||oe.length===0))switch(Le.key){case"ArrowDown":Le.preventDefault(),c(Ye=>Ye<oe.length-1?Ye+1:0);break;case"ArrowUp":Le.preventDefault(),c(Ye=>Ye>0?Ye-1:oe.length-1);break;case"Enter":if(Le.preventDefault(),l>=0&&l<oe.length){const Ye=oe[l];w(Ye.name||Ye.displayName||""),o(!1);const Qe=Ye.id||Ye.vendorId;Qe&&I(`/vendor/${Qe}`)}break;case"Escape":o(!1),c(-1);break}},onBlur:()=>{setTimeout(()=>{o(!1),c(-1)},200)},placeholder:T("search_placeholder","Search drugs, pharmacies"),className:"w-full outline-none bg-transparent text-gray-900 dark:text-white placeholder:text-[12px] md:placeholder:text-[14px] lg:placeholder:text-[16px] placeholder:text-[#888888] dark:placeholder:text-[#aaaaaa] placeholder:font-light"})]}),a&&y.trim().length>0&&oe.length>0&&u.jsxs("div",{className:"mt-2 left-0 right-0 md:left-6 md:right-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg divide-y dark:divide-gray-700 max-h-56 overflow-auto animate-fade-in",children:[oe.map((Le,Ye)=>u.jsx("button",{onClick:()=>{w(Le.name||Le.displayName||""),o(!1);const Qe=Le.id||Le.vendorId;if(Qe)try{I(`/vendor/${Qe}`)}catch{window.location.href=`/vendor/${Qe}`}},onKeyDown:Qe=>{if(Qe.key==="Enter"||Qe.key===" "){Qe.preventDefault();const le=Le.id||Le.vendorId;le&&I(`/vendor/${le}`)}},className:`w-full text-left px-4 py-3 focus:outline-none transition-all duration-200 animate-fadeInUp border-b border-gray-100 last:border-b-0 ${Ye===l?"bg-blue-100 border-blue-200":"hover:bg-zinc-50 focus:bg-zinc-100"}`,style:{animationDelay:`${Ye*.05}s`},role:"option",tabIndex:0,children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-blue-100 flex-shrink-0",children:u.jsxs("svg",{className:"h-4 w-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-medium text-sm text-gray-900 truncate",children:y.trim()&&(Le.name||Le.displayName||"").toLowerCase().includes(y.toLowerCase())?u.jsx("span",{children:(Le.name||Le.displayName||"").split(new RegExp(`(${y})`,"gi")).map((Qe,le)=>Qe.toLowerCase()===y.toLowerCase()?u.jsx("span",{className:"bg-yellow-200 px-1 rounded",children:Qe},le):Qe)}):Le.name||Le.displayName}),u.jsx("div",{className:"text-xs text-gray-500 truncate mt-1",children:y.trim()&&(Le.address||Le.city||Le.location||"").toLowerCase().includes(y.toLowerCase())?u.jsx("span",{children:(Le.address||Le.city||Le.location||"").split(new RegExp(`(${y})`,"gi")).map((Qe,le)=>Qe.toLowerCase()===y.toLowerCase()?u.jsx("span",{className:"bg-yellow-200 px-1 rounded",children:Qe},le):Qe)}):Le.address||Le.city||Le.location||""})]}),u.jsx("div",{className:"text-xs text-blue-600 font-medium flex-shrink-0",children:"Pharmacy"})]})},Le.id||Le.vendorId||Le.name)),oe.length>0&&u.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 text-center bg-gray-50 border-t animate-fade-in",children:"Use  arrow keys to navigate, Enter to select, Esc to close"})]}),u.jsx("div",{className:"mt-3 mb-2 w-full overflow-x-auto scrollbar-hide",children:u.jsx("div",{className:"flex gap-3 min-w-max",children:["All","Prescription","Over-the-counter","Syrup","Therapeutic","Controlled","Target System"].map((Le,Ye)=>{const Qe=Et[Le],le=fe===Le;return u.jsx("button",{className:`flex items-center px-4 py-2 md:px-6 md:py-2.5 lg:px-8 lg:py-3 rounded-full text-[9px] md:text-[12px] lg:text-[14px] font-poppins font-light whitespace-nowrap border transition-all duration-200 btn-interactive animate-fadeInUp ${le?"bg-sky-100 dark:bg-sky-900 border-sky-400 dark:border-gray-600 dark:border-sky-500 text-sky-700 dark:text-sky-300 shadow-md scale-105":"bg-zinc-100 dark:bg-gray-700 text-zinc-700 dark:text-zinc-300 border-zinc-200 dark:border-gray-600 hover:bg-sky-50 dark:hover:bg-sky-800 hover:border-sky-300 dark:border-gray-600 dark:hover:border-sky-500 hover:shadow-sm"}`,style:{animationDelay:`${Ye*.1}s`},onClick:()=>xe(Le),children:Qe?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:`/${encodeURIComponent(Qe)}`,alt:`${Le} icon`,className:`h-4 w-4 md:h-5 md:w-5 mr-2 object-contain flex-shrink-0 transition-transform duration-200 dark:invert dark:brightness-0 dark:contrast-100 ${le?"scale-110":""}`}),u.jsx("span",{className:"truncate",children:Le})]}):u.jsx("span",{className:"truncate",children:Le})},Le)})})}),he.length>0&&u.jsx("div",{className:"w-full mt-6 mb-4 overflow-x-auto scrollbar-hide snap-x snap-mandatory scroll-smooth",ref:H,role:"region","aria-label":"Announcements",style:{height:140},children:u.jsx("div",{className:"flex gap-4 md:gap-6 min-w-max h-full",children:he.map((Le,Ye)=>{const Qe=Le.bgColor||"#3BA3FF",le=Le.headerColor||"#ffffff",je=Le.previewColor||(Le.headerColor?Le.headerColor+"cc":"#ffffffcc"),We=Le.linkColor||Le.linkTextColor||"#ffffff",lt=Le.headerFontSize||20,yt=Le.previewFontSize||13,$t=Le.linkTextFontSize||Le.linkFontSize||13;return u.jsxs("div",{ref:U(Ye),className:"relative flex-shrink-0 snap-center rounded-2xl overflow-hidden",style:{width:"90vw",maxWidth:700,minWidth:260,height:"100%",background:Qe,position:"relative"},children:[Le.fullImage&&u.jsx("img",{src:Le.fullImage,alt:Le.header||"Info",className:"w-full h-full object-cover",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover"}}),Le.image&&!Le.fullImage&&u.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center justify-end pointer-events-none",children:u.jsx("img",{src:Le.image,alt:"",className:"object-cover",style:{height:"100%",maxWidth:"100%",borderRadius:"0 16px 16px 0"}})}),u.jsx("div",{className:"absolute inset-y-0 right-0",style:{width:"55%",background:"linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.06) 60%, rgba(0,0,0,0.10) 100%)",pointerEvents:"none"}}),u.jsx("div",{className:"relative z-10 h-full flex items-center",children:u.jsxs("div",{className:"px-4 md:px-6 py-5 min-w-0 max-w-[65%] md:max-w-[60%] lg:max-w-[60%]",children:[u.jsx("div",{style:{color:le,fontSize:lt+"px",lineHeight:1,fontWeight:300,letterSpacing:"-0.02em"},children:Be(Le.header)||""}),Le.preview&&u.jsx("div",{style:{marginTop:8,color:je,fontSize:yt+"px",lineHeight:1.2},children:Be(Le.preview)}),Le.link&&Le.linkText&&(()=>{const Xt=He(Le.link),At=ut(Xt);return u.jsx("a",{href:Xt,onClick:Vt=>{if(!At){Vt.preventDefault();try{I(Xt)}catch{window.location.href=Xt}}},...At?{target:"_blank",rel:"noopener noreferrer"}:{},style:{display:"inline-block",marginTop:12,textDecoration:"underline",color:We,fontSize:$t+"px",fontWeight:500},children:Be(Le.linkText)})})()]})})]},Le.id)})})}),u.jsxs("div",{className:"mt-2",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("div",{className:"text-[15px] md:text-[18px] lg:text-[22px] font-medium font-poppins",children:T("new_arrivals","New Arrivals")}),u.jsx("button",{className:"text-[13px] md:text-[15px] lg:text-[17px] font-normal font-poppins text-sky-600",onClick:()=>Z(!0),children:T("view_all","view all")})]}),u.jsx("div",{ref:D,className:"w-full overflow-x-auto scrollbar-hide cursor-grab active:cursor-grabbing",style:{overflowX:"auto"},onMouseDown:Le=>{const Ye=D.current;if(!Ye)return;let Qe=Le.pageX-Ye.offsetLeft,le=Ye.scrollLeft;function je(lt){Ye.scrollLeft=le-(lt.pageX-Ye.offsetLeft-Qe)}function We(){window.removeEventListener("mousemove",je),window.removeEventListener("mouseup",We)}window.addEventListener("mousemove",je),window.addEventListener("mouseup",We)},children:u.jsx("div",{className:"flex gap-3 md:gap-4 lg:gap-6 min-w-max pb-2",children:Oe.map(Le=>u.jsxs("div",{className:"relative",children:[u.jsx(L3,{product:Le,onOpen:()=>Ct(Le.id),onAdd:()=>_?Km(_.uid,Le.id,1):alert(T("please_sign_in","Please sign in")),cardWidth:"110px",cardHeight:"128px",nameSize:"11px",nameWeight:"medium",nameTracking:"-0.5px",priceSize:"9px",priceColor:"#BDBDBD",priceWeight:"medium",addColor:"#36A5FF",addSize:"9px"}),u.jsx("span",{className:"absolute top-1 left-1 bg-sky-500 text-white text-[9px] font-semibold px-2 py-0.5 rounded-full shadow-sm select-none pointer-events-none",children:T("new","New")})]},Le.id||Le.sku))})})]}),V&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:u.jsxs("div",{className:"bg-white rounded-[20px] shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6 relative",children:[u.jsx("button",{className:"absolute top-2 right-2 text-zinc-500 hover:text-zinc-800 text-xl font-bold",onClick:()=>Z(!1),"aria-label":T("close","Close"),children:""}),u.jsx("div",{className:"text-[20px] md:text-[26px] font-light mb-4 font-poppins text-left",children:T("all_new_products","All New Products")}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 justify-items-center",children:ot.map(Le=>u.jsxs("div",{className:"relative flex flex-col items-center",children:[u.jsx(L3,{product:Le,onOpen:()=>Ct(Le.id),onAdd:()=>_?Km(_.uid,Le.id,1):alert(T(T("please_sign_in","please_sign_in","Please sign in"))),cardWidth:"110px",cardHeight:"128px",nameSize:"11px",nameWeight:"semi-bold",nameTracking:"-0.5px",priceSize:"9px",priceColor:"#BDBDBD",priceWeight:"medium",addColor:"#36A5FF",addSize:"9px"}),u.jsx("span",{className:"absolute top-1 left-1 bg-sky-500 text-white text-[9px] font-semibold px-2 py-0.5 rounded-full shadow-sm select-none pointer-events-none",children:T("new","New")})]},Le.id||Le.sku))}),ze>1&&ie<ze&&u.jsx("div",{className:"flex items-center justify-center gap-3 mt-4",children:u.jsx("button",{className:"px-4 py-2 rounded-full bg-sky-600 text-white hover:bg-sky-700",onClick:()=>ve(Le=>Math.min(ze,Le+1)),"aria-label":T("load_more","Load more")+" "+T("new_arrivals","new arrivals"),children:T("load_more","Load more")})})]})}),u.jsxs("div",{className:"mt-10",children:[u.jsx("div",{className:"text-[15px] md:text-[18px] lg:text-[22px] font-medium font-poppins mb-3",children:T("popular_products","Popular Products")}),u.jsx("div",{className:"grid grid-cols-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3 md:gap-6 lg:gap-8",children:pe.map(Le=>u.jsx("div",{className:"flex justify-center relative",children:u.jsx(L3,{product:Le,onOpen:()=>Ct(Le.id),onAdd:()=>_?Km(_.uid,Le.id,1):alert("Please sign in"),cardWidth:"128px",cardHeight:"120px",nameSize:"12px",nameWeight:"semi-bold",nameTracking:"-0.5px",nameLineHeight:"-1.1",priceSize:"11px",priceColor:"#BDBDBD",priceWeight:"medium",priceLineHeight:"1.1",addColor:"#36A5FF",addSize:"9px",borderRadius:"10px"},Le.id||Le.sku)},(Le.id||Le.sku)+"-wrapper"))}),Re>1&&X<Re&&u.jsx("div",{className:"flex items-center justify-center gap-4 mt-4",children:u.jsx("button",{className:"px-4 py-2 rounded-full bg-sky-600 text-white hover:bg-sky-700",onClick:()=>J(Le=>Math.min(Re,Le+1)),"aria-label":T("load_more","Load more")+" "+T("popular_products","popular products"),children:T("load_more","Load more")})})]})]})})]}):u.jsx(cp,{lines:6,className:"my-8"})}function M_({open:t,onClose:e,children:r}){const[n,s]=j.useState(!1),[i,a]=j.useState(!1);return j.useEffect(()=>{t?(a(!0),setTimeout(()=>s(!0),10)):(s(!1),setTimeout(()=>a(!1),300))},[t]),j.useEffect(()=>{if(!t)return;const o=l=>{(l.key==="Escape"||l.key==="Esc")&&typeof e=="function"&&e()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t,e]),i?u.jsx("div",{className:`fixed inset-0 z-50 flex items-center justify-center px-2 sm:px-4 transition-all duration-300 ${n?"bg-black/30 dark:bg-white/10":"bg-black/0"}`,onClick:()=>{typeof e=="function"&&e()},children:u.jsxs("div",{className:`bg-white dark:bg-gray-800 text-black dark:text-white rounded-2xl shadow-xl max-w-lg w-full p-6 relative max-h-[90vh] overflow-y-auto border transition-all duration-300 transform ${n?"scale-100 opacity-100 translate-y-0":"scale-95 opacity-0 translate-y-4"}`,style:{borderWidth:1,borderColor:"#36A5FF"},onClick:o=>o.stopPropagation(),children:[u.jsx("button",{type:"button",onClick:()=>{typeof e=="function"&&e()},className:"absolute top-3 right-3 text-zinc-400 dark:text-white hover:text-zinc-700 dark:hover:text-white text-xl font-bold focus:outline-none transition-all duration-200 hover:scale-110 hover:bg-zinc-100 dark:hover:bg-gray-700 rounded-full w-8 h-8 flex items-center justify-center","aria-label":"Close",children:""}),u.jsx("div",{className:"animate-fadeInUp",children:r})]})}):null}const HN=["pending","processing","fulfilled","cancelled"],Bie=({title:t,t:e})=>Ki.createPortal(u.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:u.jsx("div",{className:"w-full mx-auto",children:u.jsx("h1",{className:"mt-8 text-[28px] sm:text-[35px] md:text-[42px] lg:text-[48px] font-light font-poppins text-gray-900 dark:text-white",children:e("orders","Orders")})})}),document.body);function oB(){const{user:t,profile:e}=Dn(),{t:r}=qs(),[n,s]=j.useState([]),[i,a]=j.useState("all"),[o,l]=j.useState({}),[c,d]=j.useState({}),[p,g]=j.useState(null),[m,y]=j.useState([]),w=Jn(),_=Nl(),[S,T]=j.useState(null);j.useEffect(()=>{if(!t||!e)return;const L=e.uid||t.uid;let A;return e.role==="pharmacy"?A=_r(Zt(ht,"orders"),jr("pharmacyId","==",L),Yi("createdAt","desc")):A=_r(Zt(ht,"orders"),jr("customerId","==",L),Yi("createdAt","desc")),In(A,D=>{s(D.docs.map(R=>({id:R.id,...R.data()})))})},[t,e]),j.useEffect(()=>{const L=_?.state?.highlightOrderId,A=new URLSearchParams(_.search).get("highlight");L?T(L):A&&T(A)},[_]),j.useEffect(()=>{if(!S||n.length===0)return;const L=S,A=setTimeout(()=>{const D=document.getElementById(`order-${L}`);D&&D.scrollIntoView({behavior:"smooth",block:"center"})},250),E=setTimeout(()=>T(null),5e3);return w(_.pathname,{replace:!0,state:{}}),()=>{clearTimeout(A),clearTimeout(E)}},[S,n]);const I=async(L,A)=>{await us(er(ht,"orders",L),{status:A})},M=i==="all"?n:n.filter(L=>(L.status||"pending")===i),K=L=>{l(A=>({...A,[L]:!A[L]}))};j.useEffect(()=>{async function L(){if(!p||!p.items)return y([]);const E=p.items.map(R=>R.productId).map(R=>ni(er(ht,"products",R))),D=await Promise.all(E);y(D.map(R=>R.exists()?{id:R.id,...R.data()}:null))}L()},[p]);function W(L){const A={};return L.forEach(E=>{const D=E.productId;A[D]?A[D].qty+=Number(E.qty||E.quantity||1):A[D]={...E,qty:Number(E.qty||E.quantity||1)}}),Object.values(A)}return t?u.jsxs(u.Fragment,{children:[u.jsx(Bie,{title:"Orders",t:r}),u.jsxs("div",{className:"pt-10 pb-28 w-full mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-16 min-h-screen flex flex-col",children:[u.jsx("div",{className:"mt-8 -mx-4 sm:mx-0 sticky top-20 pt-8 sm:static z-40 bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm border-b border-gray-100 dark:border-gray-800",children:u.jsxs("div",{className:"flex gap-2 flex-nowrap px-4 sm:px-0 overflow-x-auto no-scrollbar py-2",children:[u.jsx("button",{className:`px-3 py-1 rounded-full border text-[10px] font-light ${i==="all"?"bg-sky-600 text-white border-sky-600 dark:border-gray-600":"border-zinc-300 dark:border-gray-600 text-zinc-600"}`,onClick:()=>a("all"),children:r("all","All")}),HN.map(L=>u.jsx("button",{className:`px-3 py-1 rounded-full border text-[10px] font-light ${i===L?"bg-sky-600 text-white border-sky-600 dark:border-gray-600":"border-zinc-300 dark:border-gray-600 text-zinc-600"}`,onClick:()=>a(L),children:r(L,L.charAt(0).toUpperCase()+L.slice(1))},L))]})}),u.jsx("div",{className:"mt-4 space-y-6",children:M.length===0?u.jsx("div",{className:"text-zinc-500 font-extralight text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] text-center py-12 animate-fadeInUp",children:r("no_orders_yet","No orders yet.")}):M.map((L,A)=>{const E=L.items||[],D=o[L.id],R=E.length>4,F=D?E:E.slice(0,4),V=L.customerPhone||L.customer_phone||L.phone||"",Z=c[L.id];return u.jsxs("div",{id:`order-${L.id}`,className:`relative -mx-4 sm:mx-0 rounded-[10px] sm:rounded-[10px] border border-gray-200 dark:border-gray-600 p-4 flex flex-col gap-2 group hover:bg-sky-50 dark:hover:bg-sky-900/20 transition-all duration-200 card-interactive animate-fadeInUp ${S===L.id?"ring-4 ring-sky-200 dark:ring-sky-800 bg-sky-50 dark:bg-sky-900/30 scale-102":""}`,style:{cursor:"pointer",animationDelay:`${A*.1}s`},onClick:fe=>{fe.target.closest(".order-see-more-btn")||e.role==="pharmacy"&&fe.target.closest(".order-status-dropdown")||g(L)},children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"font-light text-[14px] sm:text-[15px] md:text-[18px] lg:text-[22px]",children:[r("order_number","Order #"),L.id.slice(0,6)]}),u.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-[11px] sm:text-[12px] md:text-[14px] lg:text-[16px] font-light",children:L.createdAt?.toDate?.().toLocaleString?.()||""})]}),u.jsxs("div",{className:"text-[14px] sm:text-[15px] md:text-[18px] lg:text-[22px] font-medium",children:["",Number(L.total).toLocaleString()]})]}),e.role==="pharmacy"&&u.jsxs("div",{className:"mt-2",children:[u.jsxs("div",{className:"text-[13px] text-zinc-500 dark:text-zinc-400 font-light mb-1 flex items-center gap-2",children:[r("customer","Customer"),": ",L.customerName||L.customerId||L.customer_id||"N/A"]}),u.jsx("div",{className:"text-[12px] text-zinc-400 dark:text-zinc-500 font-light mb-2",children:L.customerEmail||""}),u.jsxs("div",{className:"text-[13px] text-zinc-700 dark:text-zinc-300 font-medium mb-1",children:[r("items","Items"),":"]}),u.jsx("ul",{className:"ml-2 list-disc text-[13px] text-zinc-700 dark:text-zinc-300",children:F.map((fe,xe)=>u.jsxs("li",{children:[u.jsx("span",{children:fe.name||fe.productId}),u.jsxs("span",{children:[" x",fe.qty||fe.quantity||1]})]},xe))}),R&&u.jsx("button",{className:"order-see-more-btn text-sky-600 text-xs mt-1 ml-2 font-medium hover:underline focus:outline-none",onClick:fe=>{fe.stopPropagation(),K(L.id)},children:D?r("see_less","See less"):`${r("see_more","See more")} (${E.length-4} ${r("more_items","more")})`}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsxs("span",{className:"text-[12px] text-zinc-500 dark:text-zinc-400",children:[r("status","Status"),":"]}),u.jsx("select",{className:"order-status-dropdown border rounded px-2 py-1 text-[12px]",value:L.status||"pending",onChange:fe=>I(L.id,fe.target.value),children:HN.map(fe=>u.jsx("option",{value:fe,children:r(fe,fe.charAt(0).toUpperCase()+fe.slice(1))},fe))}),V&&!Z&&u.jsx("button",{className:"ml-2 px-3 py-1 rounded-full bg-sky-600 text-white text-[12px] font-light",onClick:fe=>{fe.stopPropagation(),d(xe=>({...xe,[L.id]:!0}))},children:r("reveal_number","Reveal Number")}),V&&Z&&u.jsx("span",{className:"ml-2 text-[13px] text-zinc-700 dark:text-zinc-300 font-medium",children:V})]})]})]},L.id)})}),u.jsx(M_,{open:!!p,onClose:()=>g(null),children:p&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-lg font-medium mb-2",children:[r("order_number","Order #"),p.id.slice(0,6)]}),u.jsx("div",{className:"text-zinc-500 text-xs mb-4",children:p.createdAt?.toDate?.().toLocaleString?.()||""}),u.jsxs("div",{className:"mb-2 text-[15px] font-medium",children:[r("items","Items"),":"]}),u.jsx("ul",{className:"mb-4 space-y-2",children:W(p.items).map((L,A)=>{const E=m.find(D=>D&&D.id===L.productId);return u.jsxs("li",{className:"flex items-center gap-3",children:[E?u.jsx(sc,{name:E.name,image:E.image,category:E.category,size:40,roundedClass:"rounded-lg"}):null,u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-poppins font-medium text-[14px]",children:E?E.name:L.productId}),u.jsxs("div",{className:"text-zinc-500 text-xs",children:[r("qty","Qty"),": ",L.qty]})]}),u.jsxs("div",{className:"text-[14px] font-medium text-sky-600",children:["",Number(L.price||E?.price||0).toLocaleString()]})]},L.productId)})}),u.jsxs("div",{className:"flex justify-between items-center border-t pt-3 mt-2",children:[u.jsxs("div",{className:"text-[15px] font-medium",children:[r("total","Total"),":"]}),u.jsxs("div",{className:"text-[15px] font-bold text-sky-700",children:["",Number(p.total).toLocaleString()]})]}),u.jsxs("div",{className:"mt-2 text-xs text-zinc-400",children:[r("status","Status"),": ",r(p.status||"pending",p.status||"pending")]})]})})]})]}):u.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[u.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:r("please_sign_in_continue","Please sign in to continue")}),u.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>w("/auth/landing"),children:r("sign_in_sign_up","Sign In / Sign Up")})]})}function hu({name:t,isVerified:e,className:r="",nameClassName:n="",iconClassName:s="h-4 w-4 text-sky-500",label:i="Verified pharmacy"}){return t?u.jsxs("span",{className:`inline-flex items-center gap-1 ${r}`.trim(),title:e?i:void 0,children:[u.jsx("span",{className:n,children:t}),e&&u.jsx(pie,{"aria-label":i,role:"img",className:s})]}):null}const Vie=({title:t,t:e})=>Ki.createPortal(u.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:u.jsx("div",{className:"w-full mt-8 max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto",children:u.jsx("h1",{className:"text-[25px] font-light leading-none text-gray-900 dark:text-white whitespace-pre-line",children:e("my_conversations",`My
Conversations`)})})}),document.body);function lB(){const{user:t,profile:e}=Dn(),{t:r}=qs(),[n,s]=j.useState([]),[i,a]=j.useState(""),[o,l]=j.useState({});Nl();const c=Jn();j.useEffect(()=>{if(!(!t||!e?.role))return j_({uid:t.uid,role:e.role},s,T=>console.error("listenUserThreads error:",T))},[t?.uid,e?.role]);const d=T=>{const I=y(T),M={thread:T};e?.role==="customer"&&I?c(`/chat/${I}`,{state:M}):c(`/thread/${T.id}`,{state:M}),g5(T.id,t.uid).catch(K=>console.error("markThreadRead error:",K))};if(!t)return u.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[u.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:r("please_sign_in_continue","Please sign in to continue")}),u.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>c("/auth/landing"),children:r("sign_in_sign_up","Sign In / Sign Up")})]});const p=t?.uid,g=T=>T?.unread?.[p]||0,m=T=>(e?.role==="customer"?T.vendorName:T.customerName)||"",y=T=>T.vendorId||(T.id&&T.id.includes("__")?T.id.split("__")[0]:null),w=T=>{if(e?.role!=="customer")return!1;if(typeof T.vendorIsVerified=="boolean")return T.vendorIsVerified;if(typeof T.vendorVerificationStatus=="string")return T.vendorVerificationStatus==="approved";const I=y(T);return I?!!o[I]:!1},_=T=>T.lastAt?.seconds?new Date(T.lastAt.seconds*1e3):null,S=n.filter(T=>{const I=m(T).toLowerCase(),M=i.toLowerCase();return!M||I.includes(M)||(T.lastMessage||"").toLowerCase().includes(M)});return j.useEffect(()=>{if(e?.role!=="customer"||!n.length)return;const T={},I=new Set;n.forEach(L=>{const A=y(L);A&&(I.add(A),typeof L.vendorIsVerified=="boolean"?T[A]=L.vendorIsVerified:typeof L.vendorVerificationStatus=="string"&&(T[A]=L.vendorVerificationStatus==="approved"))}),Object.entries(T).some(([L,A])=>o[L]!==A)&&l(L=>({...L,...T}));const K=Array.from(I).filter(L=>T[L]===void 0&&o[L]===void 0);if(!K.length)return;let W=!1;return(async()=>{const L=await Promise.all(K.map(async A=>{try{const E=await ni(er(ht,"pharmacies",A));return[A,E.exists()?!!E.data()?.isVerified:!1]}catch(E){return console.error("[Messages] Failed to fetch pharmacy verification status",E),[A,!1]}}));W||l(A=>{const E={...A};return L.forEach(([D,R])=>{E[D]===void 0&&(E[D]=R)}),E})})(),()=>{W=!0}},[n,e?.role,o]),u.jsxs(u.Fragment,{children:[u.jsx(Vie,{title:"My Conversations",t:r}),u.jsxs("div",{className:"min-h-screen pt-24 w-full mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-16 pb-28",children:[u.jsxs("div",{className:"mt-14 flex items-center gap-3 border-b border-zinc-300 dark:border-gray-600 pb-2",children:[u.jsx(Uf,{className:"h-4 w-4 text-zinc-400"}),u.jsx("input",{placeholder:r("search_chats","Search chats"),value:i,onChange:T=>a(T.target.value),className:"w-full outline-none placeholder:text-zinc-400 bg-transparent placeholder:text-sm"})]}),u.jsxs("div",{className:"mt-8 space-y-4 w-full",children:[S.map((T,I)=>u.jsx("div",{className:"-mx-4 sm:mx-0",children:u.jsxs("button",{onClick:()=>d(T),className:"w-full rounded-[10px] sm:rounded-[10px] border border-gray-300 dark:border-gray-600 px-4 py-3 text-left h-[62px] flex items-center gap-3 bg-white hover:bg-zinc-50 transition-all duration-200 card-interactive animate-fadeInUp",style:{animationDelay:`${I*.1}s`},children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-zinc-200 flex items-center justify-center",children:u.jsx("span",{className:"text-zinc-500 text-xs font-semibold",children:(m(T)||"U")[0]})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx(hu,{name:m(T)||r("conversation_partner","Conversation"),isVerified:w(T),className:"text-sm truncate inline-flex items-center gap-1",nameClassName:"truncate",iconClassName:"h-3.5 w-3.5 text-sky-500"}),u.jsx("div",{className:"text-zinc-500 text-[10px] truncate",children:T.lastMessage||r("no_messages_yet","No messages yet.")})]}),u.jsxs("div",{className:"flex flex-col items-end justify-between h-full min-w-[48px]",children:[g(T)>0&&u.jsx("span",{className:"bg-sky-500 text-white text-[10px] font-semibold rounded-full px-2 py-0.5 mb-1",children:g(T)}),u.jsx("span",{className:"text-zinc-400 text-[10px]",children:_(T)?.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})||""})]})]})},T.id)),S.length===0&&u.jsx("div",{className:"text-zinc-500",children:r("no_conversations_yet","No conversations yet.")})]})]})]})}function Uie(t){return u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:u.jsxs("g",{children:[u.jsx("circle",{cx:"8",cy:"8",r:"8",fill:"#fd9292"}),u.jsx("path",{d:"M5.5 5.5L10.5 10.5M10.5 5.5L5.5 10.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round"})]})})}const zie=({title:t,itemCount:e,t:r})=>Ki.createPortal(u.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:u.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto",children:u.jsx("div",{className:"flex mt-8 items-center justify-between",children:u.jsx("h1",{className:"text-[28px] sm:text-[35px] md:text-[42px] lg:text-[48px] font-light font-poppins text-gray-900 dark:text-white",children:r("cart","Cart")})})})}),document.body);function cB(){const{user:t}=Dn(),{t:e}=qs(),r=Jn(),{userCoords:n,location:s}=Np(),[i,a]=j.useState([]),[o,l]=j.useState(!1),[c,d]=j.useState(!1),[p,g]=j.useState(""),[m,y]=j.useState(""),[w,_]=j.useState(""),[S,T]=j.useState([]),[I,M]=j.useState(!1),[K,W]=j.useState(""),[L,A]=j.useState(0);j.useEffect(()=>{if(!t)return;const H=_r(Zt(ht,"users",t.uid,"cart"));return In(H,async te=>{const G=await Promise.all(te.docs.map(async P=>{const U=P.data(),X=await ni(er(ht,"products",U.productId));return{id:P.id,...U,product:{id:X.id,...X.data()}}}));a(G)})},[t]),j.useEffect(()=>{t&&!p&&(_(t.email||""),y(t.phoneNumber||""),g(s||"Current location"))},[t,s,p]),j.useEffect(()=>{i.length>0&&n&&R()},[i,n]);const E=j.useMemo(()=>i.reduce((H,te)=>H+(te.product?.price+0||0)*te.qty,0),[i]),D=j.useMemo(()=>E+L,[E,L]),R=async()=>{if(!n||i.length===0){A(0);return}try{const H=[...new Set(i.map(P=>P.product?.pharmacyId).filter(Boolean))];let te=0;for(const P of H){const X=(await ni(er(ht,"pharmacies",P))).data();if(X){let J,ie;if(X.coordinates?.latitude&&X.coordinates?.longitude?(J=X.coordinates.latitude,ie=X.coordinates.longitude):X.lat&&X.lon?(J=X.lat,ie=X.lon):X.latitude&&X.longitude&&(J=X.latitude,ie=X.longitude),J&&ie){const ve=ry(n.latitude,n.longitude,J,ie);te+=ve}}}const G=Math.round(te*300);A(G)}catch(H){console.error("Error calculating delivery fee:",H),A(300)}},F=async H=>{if(H.length<3){T([]);return}M(!0);try{const G=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(H)}&limit=5&countrycodes=ng`)).json();T(G.map(P=>P.display_name))}catch(te){console.error("Error searching addresses:",te),T([])}M(!1)},V=()=>{s&&n&&(g(s),T([]))},Z=()=>{l(!0)},fe=()=>{l(!1),d(!0)},xe=async()=>{if(!(!t||!i.length||!K))try{const te=i[0].product?.pharmacyId,G=he(),P={customerId:t.uid,pharmacyId:te,items:G.map(X=>({productId:X.productId,quantity:X.qty,price:X.product.price,pharmacyId:X.product.pharmacyId})),total:D,subtotal:E,deliveryFee:L,deliveryAddress:p,customerPhone:m,customerEmail:w||t.email,paymentMethod:K};let U;if(K==="online"?U=await ax(P.customerId,P.pharmacyId,P.items,P.total,P.customerEmail):U=await ax({...P,paymentStatus:"pending",orderStatus:"confirmed"}),console.log(`OrderStatus: ${U}`),U===!1){alert(e("order_placement_failed","Order placement failed"));return}for(const X of i)await yw(t.uid,X.id);d(!1),l(!1),alert(K==="cash"?e("order_placed_delivery","Order placed successfully! You'll pay on delivery."):e("payment_successful","Payment successful! Your order has been placed.")),r("/customer/orders")}catch(H){console.error("Checkout error:",H),alert(e("checkout_failed","Checkout failed. Please try again."))}},he=()=>{const H=new Map;for(const te of i){const G=te.product?.id;if(G)if(H.has(G)){const P=H.get(G);H.set(G,{...P,qty:P.qty+te.qty,ids:[...P.ids||[P.id],te.id]})}else H.set(G,{...te,ids:[te.id]})}return Array.from(H.values())},ae=j.useMemo(()=>{const H=new Map;for(const te of i){const G=te.product?.id;if(G)if(H.has(G)){const P=H.get(G);H.set(G,{...P,qty:P.qty+te.qty,ids:[...P.ids||[P.id],te.id]})}else H.set(G,{...te,ids:[te.id]})}return Array.from(H.values())},[i]);return t?t&&i.length===0?u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:u.jsx("div",{className:"text-zinc-500 font-extralight text-[14px]",children:e("your_cart_is_empty","Your cart is empty.")})}):u.jsxs(u.Fragment,{children:[u.jsx(zie,{title:"Cart",itemCount:i.length,t:e}),u.jsxs("div",{className:"pt-24 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col",children:[u.jsxs("div",{className:"mt-10 grid grid-cols-2 gap-3",children:[ae.map((H,te)=>u.jsxs("div",{className:"relative rounded-xl border border-zinc-200 p-2 flex flex-col items-center gap-2 min-w-0 card-interactive animate-fadeInUp",style:{animationDelay:`${te*.1}s`},children:[u.jsx("button",{onClick:()=>H.ids.forEach(G=>yw(t.uid,G)),className:"absolute top-2 right-2 z-10 p-0.5 rounded-full hover:scale-110 transition-all duration-200 hover:bg-red-50 icon-interactive","aria-label":e("remove","Remove"),children:u.jsx(Uie,{className:"w-5 h-5 text-red-500"})}),u.jsx(sc,{name:H.product?.name,image:H.product?.image,category:H.product?.category,size:35,roundedClass:"rounded-xl"}),u.jsxs("div",{className:"flex-1 w-full text-center",children:[u.jsx("div",{className:"font-semibold text-[12px] sm:text-[13px] md:text-[14px] lg:text-[15px] truncate",children:H.product?.name}),u.jsxs("div",{className:"text-zinc-500 text-[10px] sm:text-[11px] md:text-[12px] lg:text-[13px]",children:["",Number(H.product?.price||0).toLocaleString()]})]}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("button",{className:"w-6 h-6 rounded-full border border-zinc-300 dark:border-gray-600 flex items-center justify-center text-[18px] font-light disabled:opacity-40 btn-interactive transition-all duration-200 hover:border-sky-500 hover:text-sky-600",onClick:async()=>{H.qty>1&&await yw(t.uid,H.ids[0])},disabled:H.qty<=1,"aria-label":e("decrease_quantity","Decrease quantity"),children:"-"}),u.jsx("span",{className:"text-[13px] font-poppins w-6 text-center font-medium",children:H.qty}),u.jsx("button",{className:"w-6 h-6 rounded-full border border-zinc-300 dark:border-gray-600 flex items-center justify-center text-[18px] font-light btn-interactive transition-all duration-200 hover:border-sky-500 hover:text-sky-600",onClick:async()=>{if(H.product?.id){const{addToCart:G}=await $d(async()=>{const{addToCart:P}=await Promise.resolve().then(()=>aie);return{addToCart:P}},void 0);await G(t.uid,H.product.id,1)}},"aria-label":e("increase_quantity","Increase quantity"),children:"+"})]})]},H.product?.id)),ae.length===0&&u.jsx("div",{className:"text-zinc-500 font-extralight text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] col-span-2",children:e("your_cart_is_empty","Your cart is empty.")})]}),ae.length>0&&u.jsxs("div",{className:"mt-6 rounded-xl border border-sky-400 dark:border-gray-600 p-3",children:[u.jsxs("div",{className:"flex flex-col gap-2 text-[13px] sm:text-[15px] md:text-[18px] lg:text-[22px] font-regular",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:e("subtotal","Subtotal")}),u.jsxs("span",{className:"font-semibold text-[12px] sm:text-[15px]",children:["",Number(E).toLocaleString()]})]}),L>0&&u.jsxs("div",{className:"flex items-center justify-between text-[11px] sm:text-[13px] text-gray-600",children:[u.jsx("span",{children:e("delivery_fee","Delivery Fee")}),u.jsxs("span",{children:["",Number(L).toLocaleString()]})]}),u.jsxs("div",{className:"flex items-center justify-between border-t pt-2 font-medium",children:[u.jsx("span",{children:e("total","Total")}),u.jsxs("span",{className:"font-semibold text-[12px] sm:text-[15px]",children:["",Number(D).toLocaleString()]})]})]}),u.jsx("button",{onClick:Z,className:"mt-4 w-full rounded-full border bg-sky-400 text-white py-2 text-[12px] sm:text-[14px] lg:text-[16px] font-light",children:e("proceed_to_checkout","Proceed to Checkout")})]})]}),o&&u.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 dark:bg-black/50 p-4",children:u.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-[20px] font-light font-poppins text-sky-600 dark:text-sky-400",children:e("order_summary","Order Summary")}),u.jsx("button",{onClick:()=>l(!1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:u.jsx(ox,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),u.jsxs("div",{className:"mb-6",children:[u.jsxs("h3",{className:"text-[16px] font-medium mb-3 text-gray-900 dark:text-white",children:[e("items","Items")," (",ae.length,")"]}),u.jsx("div",{className:"space-y-3",children:ae.map(H=>u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[u.jsx(sc,{name:H.product?.name,image:H.product?.image,category:H.product?.category,size:40,roundedClass:"rounded-lg"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"text-[14px] font-medium truncate text-gray-900 dark:text-white",children:H.product?.name}),u.jsxs("div",{className:"text-[12px] text-gray-600 dark:text-gray-300",children:[e("qty","Qty"),": ",H.qty]})]}),u.jsxs("div",{className:"text-[14px] font-medium text-sky-600 dark:text-sky-400",children:["",Number((H.product?.price||0)*H.qty).toLocaleString()]})]},H.product?.id))})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-[16px] font-medium mb-3 text-gray-900 dark:text-white",children:e("delivery_details","Delivery Details")}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-[14px] font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("delivery_address","Delivery Address")," *"]}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:p,onChange:H=>{g(H.target.value),F(H.target.value)},placeholder:e("enter_delivery_address","Enter delivery address"),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg text-[14px] pr-10"}),u.jsx("button",{onClick:V,className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 text-sky-600 hover:bg-sky-50 rounded-full transition-colors",title:e("use_current_location","Use current location"),children:u.jsx(y5,{className:"w-4 h-4"})})]}),S.length>0&&u.jsx("div",{className:"mt-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-40 overflow-y-auto relative z-[10000]",children:S.map((H,te)=>u.jsx("button",{onClick:()=>{g(H),T([])},className:"w-full text-left p-3 hover:bg-gray-50 dark:hover:bg-gray-600 text-[13px] border-b last:border-b-0 text-gray-900 dark:text-white",children:H},te))})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-[14px] font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("phone_number","Phone Number")," *"]}),u.jsx("input",{type:"tel",value:m,onChange:H=>y(H.target.value),placeholder:e("enter_phone_number","Enter phone number"),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg text-[14px]"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[14px] font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("email_optional","Email (Optional)")}),u.jsx("input",{type:"email",value:w,onChange:H=>_(H.target.value),placeholder:e("enter_email_address","Enter email address"),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg text-[14px]"})]})]})]})]}),u.jsxs("div",{className:"mb-6 p-4 bg-sky-50 dark:bg-gray-700 rounded-lg",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-[14px] text-gray-700 dark:text-gray-300",children:e("subtotal","Subtotal")}),u.jsxs("span",{className:"text-[14px] font-medium text-gray-900 dark:text-white",children:["",Number(E).toLocaleString()]})]}),L>0&&u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-[14px] text-gray-700 dark:text-gray-300",children:e("delivery_fee","Delivery Fee")}),u.jsxs("span",{className:"text-[14px] text-gray-900 dark:text-white",children:["",Number(L).toLocaleString()]})]}),u.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-sky-200 dark:border-gray-600",children:[u.jsx("span",{className:"text-[16px] font-medium text-gray-900 dark:text-white",children:e("total","Total")}),u.jsxs("span",{className:"text-[16px] font-bold text-sky-600 dark:text-sky-400",children:["",Number(D).toLocaleString()]})]})]}),u.jsx("button",{onClick:fe,disabled:!p.trim()||!m.trim(),className:"w-full bg-sky-600 text-white py-3 rounded-full text-[16px] font-medium hover:bg-sky-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:e("continue_to_payment","Continue to Payment")})]})})}),c&&u.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-4",children:u.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-[20px] font-light font-poppins text-sky-600 dark:text-white",children:e("payment_method","Payment Method")}),u.jsx("button",{onClick:()=>d(!1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:u.jsx(ox,{className:"w-5 h-5 text-gray-500"})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("button",{onClick:()=>W("cash"),className:`w-full p-4 rounded-lg border-2 transition-colors text-left ${K==="cash"?"border-sky-500 bg-sky-50 dark:bg-gray-700":"border-gray-200 dark:border-gray-600 hover:border-sky-300 dark:border-gray-600"}`,children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(nB,{className:"w-6 h-6 text-sky-600"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[16px] font-medium",children:e("pay_on_delivery","Pay on Delivery")}),u.jsx("div",{className:"text-[13px] text-gray-600 dark:text-gray-300",children:e("pay_with_cash_on_delivery","Pay with cash when order arrives")})]})]})}),u.jsx("button",{onClick:()=>W("online"),className:`w-full p-4 rounded-lg border-2 transition-colors text-left ${K==="online"?"border-sky-500 bg-sky-50 dark:bg-gray-700":"border-gray-200 dark:border-gray-600 hover:border-sky-300 dark:border-gray-600"}`,children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(rB,{className:"w-6 h-6 text-sky-600"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[16px] font-medium",children:e("online_payment","Online Payment")}),u.jsx("div",{className:"text-[13px] text-gray-600 dark:text-gray-300",children:e("pay_with_card_bank_ussd","Pay with card, bank transfer, or USSD")})]})]})}),u.jsx("button",{disabled:!0,className:"w-full p-4 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-700 text-left cursor-not-allowed opacity-60",children:u.jsxs("div",{className:"flex items-center gap-3 justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(WS,{className:"w-6 h-6 text-gray-400"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[16px] font-medium text-gray-500",children:e("pay_with_insurance","Pay with Insurance")}),u.jsx("div",{className:"text-[13px] text-gray-400",children:e("use_your_health_insurance","Use your health insurance")})]})]}),u.jsx("span",{className:"text-[12px] text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:e("coming_soon","Coming Soon")})]})})]}),u.jsx("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-[16px] font-medium",children:e("total_amount","Total Amount")}),u.jsxs("span",{className:"text-[18px] font-bold text-sky-600",children:["",Number(D).toLocaleString()]})]})}),u.jsx("button",{onClick:xe,disabled:!K,className:"w-full mt-6 bg-sky-600 text-white py-3 rounded-full text-[16px] font-medium hover:bg-sky-700 transition-colors disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed",children:K==="online"?e("pay_now","Pay Now"):e("place_order","Place Order")})]})})})]}):u.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[u.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:e("please_sign_in_continue","Please sign in to continue")}),u.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>r("/auth/landing"),children:e("sign_in_sign_up","Sign In / Sign Up")})]})}function uB({chatThreadId:t,prescriptions:e,userId:r}){const[n,s]=j.useState(e||[]),[i,a]=j.useState({});j.useEffect(()=>{if(e&&e.length>0){s(e);const d={};e.forEach(p=>{d[p.id]={},p.drugs.forEach((g,m)=>{d[p.id][m]=g.quantity})}),a(d);return}t&&zM(t).then(d=>{s(d);const p={};d.forEach(g=>{p[g.id]={},g.drugs.forEach((m,y)=>{p[g.id][y]=m.quantity})}),a(p)})},[t,e]);function o(d,p,g){const m=new Date(p.startDate),w=Math.floor((new Date-m)/(1e3*60*60*24)),_=Math.max(0,Number(d.duration||p.duration)-w),S=i[p.id]?.[g]??d.quantity;return{daysLeft:_,quantityLeft:S}}function l(d){if(!d)return 1;const p=d.match(/(\d+(?:\.\d+)?)/);return p?Number(p[1]):1}async function c(d,p){a(_=>{const S={..._},T=n.find(W=>W.id===d);if(!T)return _;const I=T.drugs[p],M=l(I.dosage),K=S[d]?.[p]??I.quantity;return S[d]={...S[d],[p]:Math.max(0,K-M)},S});const g=n.find(_=>_.id===d);if(!g)return;const m=g.drugs[p],y=l(m.dosage),w=g.drugs.map((_,S)=>S===p?{..._,quantity:Math.max(0,_.quantity-y)}:_);await us(er(ht,"prescriptions",d),{drugs:w}),s(_=>_.map(S=>S.id===d?{...S,drugs:w}:S))}return u.jsxs("div",{className:"mt-4",children:[u.jsx("div",{className:"text-lg font-light mb-2 text-black dark:text-white",children:"Prescriptions"}),n.length===0&&u.jsx("div",{className:"text-zinc-400 text-sm",children:"No prescriptions yet."}),n.map(d=>u.jsxs("div",{className:"mb-4 border rounded-2xl p-4 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600 shadow-sm relative",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"font-thin text-[14px] mb-1 text-black dark:text-white",children:["Created: ",new Date(d.startDate).toLocaleDateString()]}),u.jsxs("div",{className:"mb-1 text-xs text-zinc-500 font-light",children:["Status: ",d.status]})]}),u.jsx("div",{className:"flex flex-col gap-2",children:d.drugs.map((p,g)=>{const{quantityLeft:m}=o(p,d,g),y=d.requirePurchase&&!d.fulfilled||m<=0;return u.jsx("button",{className:"rounded-full bg-sky-600 text-white text-[10px] px-2 py-0.5 ml-auto disabled:opacity-40 mb-1 shadow-sm",style:{minWidth:70,height:24,lineHeight:"16px"},disabled:y,onClick:()=>c(d.id,g),children:"Mark Dose"},g)})})]}),u.jsx("ul",{className:"mb-2 text-[13px]",children:d.drugs.map((p,g)=>{const{daysLeft:m,quantityLeft:y}=o(p,d,g);return u.jsxs("li",{className:"mb-2 flex flex-col sm:flex-row sm:items-center sm:gap-2",children:[u.jsx("span",{className:"font-medium text-sky-700",children:p.name}),u.jsxs("span",{className:"text-zinc-500",children:["Qty: ",y]}),u.jsxs("span",{className:"text-zinc-500",children:["Dosage: ",p.dosage]}),u.jsxs("span",{className:"text-zinc-500",children:["Freq: ",p.frequency]}),u.jsxs("span",{className:m<=2?"text-red-500":"text-green-600",children:["Days left: ",m]}),u.jsxs("span",{className:y<=2?"text-red-500":"text-green-600",children:["Qty left: ",y]}),p.notes&&u.jsxs("span",{className:"block text-xs text-zinc-400",children:["Notes: ",p.notes]}),p.productId&&d.requirePurchase&&u.jsx("a",{href:`/product/${p.productId}`,className:"mt-1 inline-block text-xs text-sky-600 underline hover:text-sky-800 transition",children:"View & Buy"})]},g)})}),u.jsxs("div",{className:"text-xs text-zinc-400",children:["Duration: ",d.duration," days"]})]},d.id))]})}const $ie=Object.freeze(Object.defineProperty({__proto__:null,default:uB},Symbol.toStringTag,{value:"Module"}));function dB(t){if(!t)return 1;const e=t.match(/(\d+)x\s*\/\s*day/i);return e?Number(e[1]):1}function qie(t,e){if(!("Notification"in window)||Notification.permission!=="granted")return;const{drugs:r,startDate:n,duration:s}=t,i=new Date(n),a=new Date,o=Number(s)||1;r.forEach(l=>{const c=dB(l.frequency);for(let d=0;d<o;d++)for(let p=0;p<c;p++){const g=new Date(i.getTime()+d*24*60*60*1e3+p*(24/c)*60*60*1e3);if(g>a){const m=g.getTime()-a.getTime();setTimeout(()=>{new Notification(e("time_to_take_medicine",`Time to take ${l.name}`),{body:e("dosage_frequency",`Dosage: ${l.dosage||""} (${l.frequency||""})`,{dosage:l.dosage||"",frequency:l.frequency||""})})},m)}}})}function Hie(t,e){const{drugs:r,startDate:n,duration:s}=t,i=new Date(n),a=Number(s)||1;let o=`BEGIN:VCALENDAR
VERSION:2.0
`;r.forEach(p=>{const g=dB(p.frequency);for(let m=0;m<a;m++)for(let y=0;y<g;y++){const _=new Date(i.getTime()+m*24*60*60*1e3+y*(24/g)*60*60*1e3).toISOString().replace(/[-:]/g,"").replace(/\..+/,"");o+=`BEGIN:VEVENT
SUMMARY:${e("take_medicine","Take {drugName}",{drugName:p.name})}
DESCRIPTION:${e("dosage_frequency","Dosage: {dosage} ({frequency})",{dosage:p.dosage||"",frequency:p.frequency||""})}
DTSTART:${_}
DTEND:${_}
END:VEVENT
`}}),o+="END:VCALENDAR";const l=new Blob([o],{type:"text/calendar"}),c=URL.createObjectURL(l),d=document.createElement("a");d.href=c,d.download="prescription.ics",d.click(),URL.revokeObjectURL(c)}function Wie(t){if(localStorage.setItem("prescriptionAlarms",JSON.stringify(t)),"indexedDB"in window){const e=indexedDB.open("HealthAppDB",1);e.onupgradeneeded=r=>{const n=r.target.result;n.objectStoreNames.contains("alarms")||n.createObjectStore("alarms",{keyPath:"id"})},e.onsuccess=r=>{const i=r.target.result.transaction("alarms","readwrite").objectStore("alarms");t.forEach(a=>i.put(a))}}}function Gie(){const{user:t}=Dn(),{t:e}=qs(),[r,n]=j.useState([]),[s,i]=j.useState(!1);if(j.useEffect(()=>{if(!t)return;async function l(){await $M({customerId:t.uid});const c=_r(Zt(ht,"prescriptions"),jr("customerId","==",t.uid));let p=(await wn(c)).docs.map(g=>({id:g.id,...g.data()}));p=p.sort((g,m)=>new Date(m.startDate)-new Date(g.startDate)),n(p),Notification.permission==="granted"&&p.forEach(g=>qie(g,e)),Wie(p)}l()},[t]),j.useEffect(()=>{"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()},[]),!t)return null;const a=r.length,o=s?r:r.slice(0,1);return u.jsxs("div",{className:"w-full",children:[u.jsxs("div",{className:"mb-2 flex items-start justify-between",children:[u.jsx("div",{className:"text-[18px] font-light font-poppins text-black dark:text-white tracking-tight",children:e("my_prescriptions","My Prescriptions")}),r.length>0&&u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("button",{className:"px-3 py-1 rounded-full bg-green-100 text-green-700 text-xs font-normal dark:bg-green-900 dark:text-green-200",onClick:()=>r.forEach(l=>Hie(l,e)),children:e("add_to_calendar","Add to Calendar")})})]}),r.length===0?u.jsx("div",{className:"text-zinc-400 text-[12px] font-light",children:e("no_prescriptions_found","No prescriptions found.")}):u.jsxs(u.Fragment,{children:[u.jsx(uB,{prescriptions:o,userId:t.uid,chatThreadId:null}),a>1&&!s&&u.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-700 text-xs font-normal",onClick:()=>i(!0),children:e("see_more","See more")}),s&&a>1&&u.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-zinc-100 text-zinc-700 text-xs font-normal dark:text-black/90 dark:bg-black/50",onClick:()=>i(!1),children:e("see_less","See less")})]})]})}const Kie=({title:t,onSearchClick:e,onSettingsClick:r})=>{const{t:n}=qs();return Ki.createPortal(u.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:u.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto",children:u.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[u.jsx("h1",{className:"text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-light font-poppins leading-none text-gray-900 dark:text-white",children:n("my_profile",`My
Profile`).replace("\\n",`
`)}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:e,"aria-label":"Open search",className:"rounded-full p-2 hover:bg-sky-50 transition-all duration-200",children:u.jsx(Uf,{className:"h-5 w-5 text-sky-600"})}),u.jsx("button",{onClick:r,"aria-label":"Open settings",className:"rounded-full p-2 hover:bg-sky-50 transition-all duration-200",children:u.jsx(v5,{className:"h-5 w-5 text-sky-600"})})]})]})})}),document.body)};function hB(){const{user:t,logout:e}=Dn(),{t:r}=qs(),[n,s]=j.useState(!1),[i,a]=j.useState(""),[o,l]=j.useState(""),[c,d]=j.useState(""),[p,g]=j.useState(""),[m,y]=j.useState(!1),[w,_]=j.useState(0),[S,T]=j.useState(0),[I,M]=j.useState([]),[K,W]=j.useState(!1),[L,A]=j.useState([]),[E,D]=j.useState("products"),[R,F]=j.useState([]),[V,Z]=j.useState({displayName:t?.displayName||"Customer",address:"Kuje, Abuja, Nigeria",phone:t?.phoneNumber||"",email:t?.email||""}),[fe,xe]=j.useState(""),[he,ae]=j.useState(!1),[H,te]=j.useState("all"),[G,P]=j.useState([]),[U,X]=j.useState(null),[J,ie]=j.useState(null),ve=Jn();j.useEffect(()=>{if(!t)return;wn(Zt(ht,"users",t.uid,"cart")).then(we=>{_(we.size)}),wn(_r(Zt(ht,"threads"),jr("customerId","==",t.uid))).then(we=>{T(we.size)});const oe=GM(t.uid,we=>{M(we)}),Ee=QM(t.uid,we=>{A(we)});wn(_r(Zt(ht,"orders"),jr("customerId","==",t.uid))).then(async we=>{console.log("Orders fetched:",we.docs.length);const Re={};for(const Ke of we.docs){const ze=Ke.data();console.log("Processing order:",Ke.id,ze);for(const ot of ze.items||[]){console.log("Processing item:",ot);const Be=ot.productId;if(!Re[Be]){let ut=ot.name;if(!ut&&Be)try{const Ct=await ni(er(ht,"products",Be));ut=Ct.exists()?Ct.data().name:Be,console.log("Product name fetched:",ut)}catch(Ct){console.error("Error fetching product:",Ct),ut=Be}Re[Be]={id:Be,name:ut,count:0,date:ze.createdAt?.toDate?.()||null}}Re[Be].count+=Number(ot.qty||ot.quantity||1);const He=ze.createdAt?.toDate?.()||null;He&&(!Re[Be].date||He>Re[Be].date)&&(Re[Be].date=He)}}const pe=Object.values(Re).sort((Ke,ze)=>(ze.date||0)-(Ke.date||0));console.log("Drugs bought:",pe),F(pe)}).catch(we=>{console.error("Error fetching drugs bought:",we),F([])});const Oe=er(ht,"users",t.uid),ne=In(Oe,we=>{if(we&&we.exists()){const Re=we.data();Z(pe=>{let Ke=Re.phoneNumber??Re.phone??pe.phone??"";return typeof Ke=="string"&&Ke.includes("@")&&(Ke=pe.phone??""),{displayName:Re.displayName||t.displayName||pe.displayName,address:Re.address||pe.address||"",phone:Ke,email:Re.email||t.email||pe.email||""}})}},()=>{});return()=>{oe&&oe(),Ee&&Ee(),ne&&ne()}},[t]),j.useEffect(()=>{!n&&V&&(a(V.displayName||""),l(V.phone||""),d(V.address||"Kuje, Abuja, Nigeria"))},[V,n]);async function ke(){const oe=(fe||"").trim().toLowerCase();if(!oe){P([]);return}const Ee=[];if((H==="drugs"||H==="all")&&(R||[]).forEach(Oe=>{`${Oe.name||""}`.toLowerCase().includes(oe)&&Ee.push({type:"drug",title:Oe.name,subtitle:`Bought ${Oe.count||0} times`,item:Oe})}),H==="orders"||H==="all"){let Oe=U;Oe||(Oe=(await wn(_r(Zt(ht,"orders"),jr("customerId","==",t.uid)))).docs.map(we=>({id:we.id,...we.data()})),X(Oe)),(Oe||[]).forEach(ne=>{`${ne.id} ${(ne.items||[]).map(Re=>Re.name).join(" ")} ${ne.total||""}`.toLowerCase().includes(oe)&&Ee.push({type:"order",title:`Order ${ne.id}`,subtitle:`${ne.items?.length||0} items  ${Number(ne.total||0).toLocaleString()}`,item:ne})})}if(H==="prescriptions"||H==="all"){let Oe=J;Oe||(Oe=(await wn(_r(Zt(ht,"prescriptions"),jr("customerId","==",t.uid)))).docs.map(we=>({id:we.id,...we.data()})),ie(Oe)),(Oe||[]).forEach(ne=>{const we=(ne.medicines||[]).join(" ");`${ne.id} ${we} ${ne.note||""} ${ne.pharmacyName||""}`.toLowerCase().includes(oe)&&Ee.push({type:"prescription",title:`Prescription ${ne.id}`,subtitle:ne.note||"",item:ne})})}P(Ee)}return j.useEffect(()=>{if(!he)return;function oe(Ee){Ee.key==="Escape"&&(ae(!1),xe(""),P([]))}return window.addEventListener("keydown",oe),()=>window.removeEventListener("keydown",oe)},[he]),j.useEffect(()=>{if(!he)return;if(!(fe||"").trim()){P([]);return}const Ee=setTimeout(()=>{ke()},300);return()=>clearTimeout(Ee)},[fe,H,he]),t?u.jsxs(u.Fragment,{children:[u.jsx(Kie,{title:"My Profile",onSearchClick:()=>ae(!0),onSettingsClick:()=>ve("/settings")}),u.jsxs("div",{className:"pt-24 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen animate-fadeInUp",children:[he&&u.jsx("div",{onClick:()=>{ae(!1),xe(""),P([])},className:"fixed inset-0 z-50 flex items-start justify-center pt-24 bg-black/50 animate-fadeInScale",role:"dialog","aria-modal":"true","aria-label":"Search modal",children:u.jsxs("div",{onClick:oe=>oe.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-3xl w-[min(920px,95%)] p-4 shadow-xl border border-[#9ED3FF] dark:border-gray-600 max-h-[80vh] overflow-hidden modal-backdrop animate-bounceIn",children:[u.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[u.jsx("div",{className:"flex-1 min-w-0",children:u.jsxs("div",{className:"flex items-center bg-[#F0FAFF] dark:bg-gray-700 border border-[#9ED3FF] dark:border-gray-600 rounded-full px-3 py-2 w-full overflow-hidden input-interactive",children:[u.jsx(Uf,{className:"h-4 w-4 text-sky-600 mr-2 flex-shrink-0"}),u.jsx("input",{autoFocus:!0,value:fe,onChange:oe=>xe(oe.target.value),onKeyDown:oe=>{oe.key==="Enter"&&ke()},placeholder:r("search_placeholder_profile","Search prescriptions, orders, drugs..."),className:"flex-1 min-w-0 bg-transparent text-sm outline-none truncate dark:text-white dark:placeholder:text-gray-400","aria-label":"Search query"})]})}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsxs("select",{value:H,onChange:oe=>te(oe.target.value),className:"rounded-full border border-[#9ED3FF] dark:border-gray-600 px-3 py-2 text-sm bg-white dark:bg-gray-700 dark:text-white w-36 input-interactive",children:[u.jsx("option",{value:"prescriptions",children:r("prescriptions","Prescriptions")}),u.jsx("option",{value:"orders",children:r("orders_profile","Orders")}),u.jsx("option",{value:"drugs",children:r("drugs","Drugs")}),u.jsx("option",{value:"all",children:r("all_results","All")})]})})]}),u.jsx("div",{className:"border-t",style:{borderColor:"#E6F7FF"}}),u.jsx("div",{className:"mt-4 max-h-[60vh] overflow-auto px-1 py-2",children:G.length===0?u.jsx("div",{className:"text-zinc-500 dark:text-gray-300 p-4",children:"No results yet. Enter a query."}):u.jsx("ul",{className:"space-y-2",children:G.map((oe,Ee)=>u.jsxs("li",{className:"p-2 rounded-2xl border border-[#9ED3FF] dark:border-gray-600 bg-white dark:bg-gray-700 hover:bg-[#E3F3FF] dark:hover:bg-gray-600 transition-all duration-200 flex items-center gap-3 justify-between animate-fadeInUp card-interactive hover:shadow-md",style:{animationDelay:`${Ee*.05}s`},children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${oe.type==="order"?"bg-green-100":oe.type==="prescription"?"bg-blue-100":"bg-purple-100"}`,children:oe.type==="order"?u.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}):oe.type==="prescription"?u.jsx("svg",{className:"h-4 w-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}):u.jsx("svg",{className:"h-4 w-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("div",{className:"font-semibold text-sm text-black dark:text-white truncate",children:oe.title}),u.jsx("div",{className:"text-xs text-zinc-500 dark:text-gray-300 truncate",children:oe.subtitle})]})]}),u.jsx("div",{className:"flex-shrink-0 flex items-center gap-2",children:oe.type==="order"?u.jsx("button",{onClick:()=>{ve("/orders",{state:{highlightOrderId:oe.item.id}}),ae(!1),xe(""),P([])},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 dark:hover:bg-gray-600 btn-interactive transition-all duration-200",children:"Open"}):oe.type==="prescription"?u.jsx("button",{onClick:()=>{ve(`/prescriptions/${oe.item.id}`),ae(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 dark:hover:bg-gray-600 btn-interactive transition-all duration-200",children:"Open"}):u.jsx("button",{onClick:()=>{ae(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 dark:hover:bg-gray-600 btn-interactive transition-all duration-200",children:"View"})})]},Ee))})})]})}),u.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-6",children:[u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 flex flex-col items-start",children:[u.jsx("div",{className:"w-20 h-20 rounded-full bg-zinc-200 dark:bg-zinc-700 flex items-center justify-center mb-3 overflow-hidden",children:t?.photoURL?u.jsx("img",{src:t.photoURL,alt:"avatar",className:"w-full h-full object-cover rounded-full"}):u.jsx("span",{className:"text-3xl text-zinc-400 font-light",children:V.displayName&&V.displayName[0]||"C"})}),u.jsxs("div",{className:"w-full flex items-center justify-between mt-1",children:[u.jsx("div",{className:"text-[20px] font-medium text-sky-600 tracking-tighter",children:V.displayName||"Customer"}),u.jsxs("button",{className:"ml-2 px-3 py-1 rounded-full border border-sky-200 dark:border-gray-600 text-sky-600 text-xs flex items-center gap-1 hover:bg-sky-50",onClick:()=>s(!0),children:[u.jsx(Aie,{className:"h-4 w-4"})," ",r("edit","Edit")]})]}),n&&u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center animate-fadeInScale",role:"dialog","aria-modal":"true",children:[u.jsx("div",{onClick:()=>s(!1),className:"absolute inset-0 bg-black/30 dark:bg-black/90","aria-hidden":"true"}),u.jsxs("div",{onClick:oe=>oe.stopPropagation(),className:"relative bg-white dark:bg-gray-900 border border-[#36A5FF] dark:border-gray-600 rounded-3xl p-5 w-[90vw] max-w-sm shadow-xl modal-backdrop animate-bounceIn",children:[u.jsx("div",{className:"text-[22px] font-light font-poppins text-sky-600 mb-2 tracking-tight animate-slideInLeft",children:r("edit_profile","Edit Profile")}),u.jsxs("form",{className:"flex flex-col gap-4",onSubmit:async oe=>{if(oe.preventDefault(),i!==(V?.displayName||t?.displayName)||o!==(V?.phone||t?.phoneNumber)||c!==(V?.address||"Address missing")){if(!p){alert("Please enter your account password to save changes.");return}try{const Ee=Ap.credential(t.email,p);await Lte(t,Ee),await zO(t,{displayName:i}),await us(er(ht,"users",t.uid),{displayName:i,phoneNumber:o,address:c}),s(!1),window.location.reload()}catch(Ee){alert("Failed to update profile: "+Ee.message)}}else s(!1)},children:[u.jsx("label",{className:"text-[12px] text-zinc-500 font-light animate-fadeInUp",style:{animationDelay:"0.1s"}}),u.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 dark:border-gray-600 transition-all input-interactive animate-fadeInUp",style:{animationDelay:"0.2s",boxShadow:"none"},value:i,placeholder:"Name",onChange:oe=>a(oe.target.value)}),u.jsx("label",{className:"text-[12px] text-zinc-500 font-light"}),u.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 dark:border-gray-600 transition-all",value:o,placeholder:r("phone_number_profile","Phone Number"),onChange:oe=>l(oe.target.value),style:{boxShadow:"none"}}),u.jsx("label",{className:"text-[12px] text-zinc-500 font-light"}),u.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 dark:border-gray-600 transition-all",value:c,placeholder:r("address_profile","Address"),onChange:oe=>d(oe.target.value),style:{boxShadow:"none"}}),u.jsx("label",{className:"text-[12px] text-zinc-500 font-light"}),u.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 dark:border-gray-600 transition-all",type:"password",placeholder:r("password","Account Password (required to save)"),onChange:oe=>g(oe.target.value),required:!0,style:{boxShadow:"none"}}),u.jsxs("div",{className:"flex gap-2 mt-4",children:[u.jsx("button",{type:"button",className:"px-4 py-2 rounded-full bg-zinc-100 text-[12px] dark:text-white dark:bg-zinc-800 font-light",onClick:()=>s(!1),children:r("cancel","Cancel")}),u.jsx("button",{type:"submit",className:"px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light",children:r("save","Save")})]})]})]})]}),u.jsx("div",{className:"text-zinc-500 mt-1 text-[12px] font-light w-full pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:V.email}),u.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 mt-2 text-[12px] font-light w-full pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[u.jsx(Nc,{className:"h-2.5 w-2.5"})," ",V.address||"Kuje, Abuja, Nigeria"]}),u.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 mt-1 text-[12px] font-light w-full",children:[u.jsx(k1,{className:"h-2.5 w-2.5"})," ",V.phone||"phone number missing"]})]})}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 flex flex-col items-start",children:[u.jsx("div",{className:"text-[18px] font-light font-poppins text-black dark:text-white mb-2 tracking-tight",children:r("my_activity","My Activity")}),u.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[u.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:r("items_in_cart","Items in Cart")}),u.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:w??0})]}),u.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[u.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:r("active_chats","Active Chats")}),u.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:S??0})]}),u.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[u.jsx("span",{className:"text-[12px] text-sky-500 font-light",children:r("saved_items","Saved Items")}),u.jsx("button",{className:"text-[12px] text-sky-600 font-medium hover:underline",onClick:()=>W(!0),children:(I?.length??0)+(L?.length??0)})]}),u.jsxs("div",{className:"w-full flex items-center justify-between mt-3 mb-1",children:[u.jsx("span",{className:"text-[14px] font-light text-zinc-800 dark:text-zinc-200",children:r("drugs_bought","Drugs Bought")}),u.jsx("button",{className:"text-[12px] text-sky-600 font-light px-2 py-1 rounded-full hover:bg-sky-50",onClick:()=>y(!0),children:r("see_more","See more")})]}),u.jsx("div",{className:"w-full flex flex-col gap-2",children:R.length>0?R.slice(0,3).map((oe,Ee)=>u.jsxs("div",{className:"w-full flex items-center pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[u.jsx("span",{className:"text-[12px] text-zinc-500 font-light w-1/3 text-left",children:oe.name}),u.jsx("span",{className:"text-[12px] text-zinc-400 font-light w-1/3 flex justify-center",children:oe.date?oe.date.toLocaleDateString():"N/A"}),u.jsx("span",{className:"text-[12px] text-zinc-500 font-light w-1/3 text-right",children:oe.count??1})]},oe.id||Ee)):u.jsx("div",{className:"w-full text-center py-4",children:u.jsx("span",{className:"text-[12px] text-zinc-400 font-light",children:r("no_drugs_bought_yet","No drugs bought yet")})})}),m&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-[#36A5FF] dark:border-gray-600 rounded-3xl p-5 w-[90vw] max-w-sm shadow-xl",children:[u.jsx("div",{className:"text-[18px] font-light font-poppins text-sky-600 dark:text-white mb-2 tracking-tight",children:r("all_drugs_bought","All Drugs Bought")}),u.jsx("div",{className:"flex flex-col gap-2 max-h-[60vh] overflow-y-auto",children:R.length>0?R.map((oe,Ee)=>u.jsxs("div",{className:"w-full flex items-center pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[u.jsx("span",{className:"text-[12px] text-zinc-500 dark:text-gray-300 font-light w-1/3 text-left",children:oe.name}),u.jsx("span",{className:"text-[12px] text-zinc-400 dark:text-gray-400 font-light w-1/3 flex justify-center",children:oe.date?oe.date.toLocaleDateString():"N/A"}),u.jsx("span",{className:"text-[12px] text-zinc-500 dark:text-gray-300 font-light w-1/3 text-right",children:oe.count??1})]},oe.id||Ee)):u.jsx("div",{className:"w-full text-center py-8",children:u.jsx("span",{className:"text-[14px] text-zinc-400 dark:text-gray-400 font-light",children:r("no_drugs_bought_yet","No drugs bought yet")})})}),u.jsx("button",{className:"mt-4 px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light w-full hover:bg-sky-700 dark:hover:bg-gray-700 transition-colors",onClick:()=>y(!1),children:r("close","Close")})]})}),K&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-[#36A5FF] dark:border-gray-600 rounded-3xl p-5 w-[90vw] max-w-md shadow-xl",children:[u.jsx("div",{className:"text-[18px] font-light font-poppins text-sky-600 dark:text-sky-400 mb-4 tracking-tight",children:r("my_saved_items","My Saved Items")}),u.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-600 dark:border-gray-600 mb-4",children:[u.jsxs("button",{className:`px-4 py-2 text-[14px] font-medium transition-colors ${E==="products"?"text-sky-600 border-b-2 border-sky-600 dark:border-gray-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>D("products"),children:[r("products","Products")," (",I?.length??0,")"]}),u.jsxs("button",{className:`px-4 py-2 text-[14px] font-medium transition-colors ${E==="vendors"?"text-sky-600 border-b-2 border-sky-600 dark:border-gray-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>D("vendors"),children:[r("vendors","Vendors")," (",L?.length??0,")"]})]}),u.jsx("div",{className:"flex flex-col gap-2 max-h-[60vh] overflow-y-auto",children:E==="products"?I?.length>0?I.map(oe=>u.jsx("div",{className:"w-full flex items-center pb-3 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:u.jsxs("div",{className:"flex items-center gap-3 w-full",children:[u.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:oe.productData?.image?u.jsx("img",{src:oe.productData.image,alt:oe.productData?.name,className:"w-full h-full object-cover"}):u.jsx("span",{className:"text-gray-400 text-xs font-medium",children:oe.productData?.name?.[0]||"P"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-[13px] font-medium text-gray-800 truncate",children:oe.productData?.name||"Unknown Product"}),u.jsx("div",{className:"text-[11px] text-gray-500",children:oe.productData?.pharmacyName||"Unknown Pharmacy"}),u.jsxs("div",{className:"text-[12px] text-sky-600 font-medium",children:["",oe.productData?.price||"0"]})]}),u.jsx("button",{className:"px-3 py-1 bg-sky-100 text-sky-600 rounded-full text-[10px] font-medium hover:bg-sky-200 transition-colors",onClick:()=>{ve(`/product/${oe.productId}`),W(!1)},children:r("view","View")})]})},oe.id)):u.jsxs("div",{className:"text-center py-8 text-gray-500",children:[u.jsx("div",{className:"text-4xl mb-2",children:""}),u.jsx("div",{className:"text-[14px] font-light",children:r("no_products_saved","No products saved")}),u.jsx("div",{className:"text-[12px] text-gray-400 mt-1",children:r("start_adding_products","Start adding products you like!")})]}):L?.length>0?L.map(oe=>u.jsx("div",{className:"w-full flex items-center pb-3 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:u.jsxs("div",{className:"flex items-center gap-3 w-full",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-sky-100 flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-sky-600 text-lg font-medium",children:oe.vendorData?.name?.[0]||"V"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-[13px] font-medium text-gray-800 truncate",children:oe.vendorData?.name||"Unknown Vendor"}),u.jsx("div",{className:"text-[11px] text-gray-500 truncate",children:oe.vendorData?.address||"Address not available"}),u.jsx("div",{className:"text-[11px] text-gray-500",children:oe.vendorData?.phone||""})]}),u.jsx("button",{className:"px-3 py-1 bg-sky-100 text-sky-600 rounded-full text-[10px] font-medium hover:bg-sky-200 transition-colors",onClick:()=>{ve(`/vendor/${oe.vendorId}`),W(!1)},children:"Visit"})]})},oe.id)):u.jsxs("div",{className:"text-center py-8 text-gray-500",children:[u.jsx("div",{className:"text-4xl mb-2",children:""}),u.jsx("div",{className:"text-[14px] font-light",children:r("no_vendors_bookmarked","No vendors bookmarked")}),u.jsx("div",{className:"text-[12px] text-gray-400 mt-1",children:r("bookmark_vendors","Bookmark vendors you like!")})]})}),u.jsx("button",{className:"mt-4 px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light w-full",onClick:()=>{W(!1),D("products")},children:r("close","Close")})]})})]}),u.jsx("div",{className:"rounded-3xl border bg-[#F7F7F7] dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 flex flex-col items-start",children:u.jsx(Gie,{})})]})]}),u.jsx("div",{children:u.jsxs("button",{onClick:()=>{e(),window.location.href="/auth/onboarding"},className:"mt-10 rounded-full border border-red-300 dark:border-gray-600 text-red-600 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:[u.jsx(q6,{className:"h-4 w-4"})," ",r("log_out","Log Out")]})})]})]}):u.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white dark:bg-gray-900",children:[u.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:"Please sign in to continue"}),u.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>ve("/auth/landing"),children:"Sign In / Sign Up"})]})}var vw={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var Yie=vw.exports,WN;function Xie(){return WN||(WN=1,(function(t,e){((r,n)=>{t.exports=n()})(Yie,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,i=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},l=0,c={};function d(A){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(E){var D=K(E);D.chunkSize=parseInt(D.chunkSize),E.step||E.chunk||(D.chunkSize=null),this._handle=new w(D),(this._handle.streamer=this)._config=D}).call(this,A),this.parseChunk=function(E,D){var R=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<R){let V=this._config.newline;V||(F=this._config.quoteChar||'"',V=this._handle.guessLineEndings(E,F)),E=[...E.split(V).slice(R)].join(V)}this.isFirstChunk&&L(this._config.beforeFirstChunk)&&(F=this._config.beforeFirstChunk(E))!==void 0&&(E=F),this.isFirstChunk=!1,this._halted=!1;var R=this._partialLine+E,F=(this._partialLine="",this._handle.parse(R,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(E=F.meta.cursor,R=(this._finished||(this._partialLine=R.substring(E-this._baseIndex),this._baseIndex=E),F&&F.data&&(this._rowCount+=F.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)n.postMessage({results:F,workerId:c.WORKER_ID,finished:R});else if(L(this._config.chunk)&&!D){if(this._config.chunk(F,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=F=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(F.data),this._completeResults.errors=this._completeResults.errors.concat(F.errors),this._completeResults.meta=F.meta),this._completed||!R||!L(this._config.complete)||F&&F.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),R||F&&F.meta.paused||this._nextChunk(),F}this._halted=!0},this._sendError=function(E){L(this._config.error)?this._config.error(E):a&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:E,finished:!1})}}function p(A){var E;(A=A||{}).chunkSize||(A.chunkSize=c.RemoteChunkSize),d.call(this,A),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(D){this._input=D,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(E=new XMLHttpRequest,this._config.withCredentials&&(E.withCredentials=this._config.withCredentials),i||(E.onload=W(this._chunkLoaded,this),E.onerror=W(this._chunkError,this)),E.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var D,R=this._config.downloadRequestHeaders;for(D in R)E.setRequestHeader(D,R[D])}var F;this._config.chunkSize&&(F=this._start+this._config.chunkSize-1,E.setRequestHeader("Range","bytes="+this._start+"-"+F));try{E.send(this._config.downloadRequestBody)}catch(V){this._chunkError(V.message)}i&&E.status===0&&this._chunkError()}},this._chunkLoaded=function(){E.readyState===4&&(E.status<200||400<=E.status?this._chunkError():(this._start+=this._config.chunkSize||E.responseText.length,this._finished=!this._config.chunkSize||this._start>=(D=>(D=D.getResponseHeader("Content-Range"))!==null?parseInt(D.substring(D.lastIndexOf("/")+1)):-1)(E),this.parseChunk(E.responseText)))},this._chunkError=function(D){D=E.statusText||D,this._sendError(new Error(D))}}function g(A){(A=A||{}).chunkSize||(A.chunkSize=c.LocalChunkSize),d.call(this,A);var E,D,R=typeof FileReader<"u";this.stream=function(F){this._input=F,D=F.slice||F.webkitSlice||F.mozSlice,R?((E=new FileReader).onload=W(this._chunkLoaded,this),E.onerror=W(this._chunkError,this)):E=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var F=this._input,V=(this._config.chunkSize&&(V=Math.min(this._start+this._config.chunkSize,this._input.size),F=D.call(F,this._start,V)),E.readAsText(F,this._config.encoding));R||this._chunkLoaded({target:{result:V}})},this._chunkLoaded=function(F){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(F.target.result)},this._chunkError=function(){this._sendError(E.error)}}function m(A){var E;d.call(this,A=A||{}),this.stream=function(D){return E=D,this._nextChunk()},this._nextChunk=function(){var D,R;if(!this._finished)return D=this._config.chunkSize,E=D?(R=E.substring(0,D),E.substring(D)):(R=E,""),this._finished=!E,this.parseChunk(R)}}function y(A){d.call(this,A=A||{});var E=[],D=!0,R=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(F){this._input=F,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&E.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),E.length?this.parseChunk(E.shift()):D=!0},this._streamData=W(function(F){try{E.push(typeof F=="string"?F:F.toString(this._config.encoding)),D&&(D=!1,this._checkIsFinished(),this.parseChunk(E.shift()))}catch(V){this._streamError(V)}},this),this._streamError=W(function(F){this._streamCleanUp(),this._sendError(F)},this),this._streamEnd=W(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=W(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function w(A){var E,D,R,F,V=Math.pow(2,53),Z=-V,fe=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,xe=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,he=this,ae=0,H=0,te=!1,G=!1,P=[],U={data:[],errors:[],meta:{}};function X(ke){return A.skipEmptyLines==="greedy"?ke.join("").trim()==="":ke.length===1&&ke[0].length===0}function J(){if(U&&R&&(ve("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),R=!1),A.skipEmptyLines&&(U.data=U.data.filter(function(Oe){return!X(Oe)})),ie()){let Oe=function(ne,we){L(A.transformHeader)&&(ne=A.transformHeader(ne,we)),P.push(ne)};if(U)if(Array.isArray(U.data[0])){for(var ke=0;ie()&&ke<U.data.length;ke++)U.data[ke].forEach(Oe);U.data.splice(0,1)}else U.data.forEach(Oe)}function oe(Oe,ne){for(var we=A.header?{}:[],Re=0;Re<Oe.length;Re++){var pe=Re,Ke=Oe[Re],Ke=((ze,ot)=>(Be=>(A.dynamicTypingFunction&&A.dynamicTyping[Be]===void 0&&(A.dynamicTyping[Be]=A.dynamicTypingFunction(Be)),(A.dynamicTyping[Be]||A.dynamicTyping)===!0))(ze)?ot==="true"||ot==="TRUE"||ot!=="false"&&ot!=="FALSE"&&((Be=>{if(fe.test(Be)&&(Be=parseFloat(Be),Z<Be&&Be<V))return 1})(ot)?parseFloat(ot):xe.test(ot)?new Date(ot):ot===""?null:ot):ot)(pe=A.header?Re>=P.length?"__parsed_extra":P[Re]:pe,Ke=A.transform?A.transform(Ke,pe):Ke);pe==="__parsed_extra"?(we[pe]=we[pe]||[],we[pe].push(Ke)):we[pe]=Ke}return A.header&&(Re>P.length?ve("FieldMismatch","TooManyFields","Too many fields: expected "+P.length+" fields but parsed "+Re,H+ne):Re<P.length&&ve("FieldMismatch","TooFewFields","Too few fields: expected "+P.length+" fields but parsed "+Re,H+ne)),we}var Ee;U&&(A.header||A.dynamicTyping||A.transform)&&(Ee=1,!U.data.length||Array.isArray(U.data[0])?(U.data=U.data.map(oe),Ee=U.data.length):U.data=oe(U.data,0),A.header&&U.meta&&(U.meta.fields=P),H+=Ee)}function ie(){return A.header&&P.length===0}function ve(ke,oe,Ee,Oe){ke={type:ke,code:oe,message:Ee},Oe!==void 0&&(ke.row=Oe),U.errors.push(ke)}L(A.step)&&(F=A.step,A.step=function(ke){U=ke,ie()?J():(J(),U.data.length!==0&&(ae+=ke.data.length,A.preview&&ae>A.preview?D.abort():(U.data=U.data[0],F(U,he))))}),this.parse=function(ke,oe,Ee){var Oe=A.quoteChar||'"',Oe=(A.newline||(A.newline=this.guessLineEndings(ke,Oe)),R=!1,A.delimiter?L(A.delimiter)&&(A.delimiter=A.delimiter(ke),U.meta.delimiter=A.delimiter):((Oe=((ne,we,Re,pe,Ke)=>{var ze,ot,Be,He;Ke=Ke||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var ut=0;ut<Ke.length;ut++){for(var Ct,Et=Ke[ut],Le=0,Ye=0,Qe=0,le=(Be=void 0,new S({comments:pe,delimiter:Et,newline:we,preview:10}).parse(ne)),je=0;je<le.data.length;je++)Re&&X(le.data[je])?Qe++:(Ct=le.data[je].length,Ye+=Ct,Be===void 0?Be=Ct:0<Ct&&(Le+=Math.abs(Ct-Be),Be=Ct));0<le.data.length&&(Ye/=le.data.length-Qe),(ot===void 0||Le<=ot)&&(He===void 0||He<Ye)&&1.99<Ye&&(ot=Le,ze=Et,He=Ye)}return{successful:!!(A.delimiter=ze),bestDelimiter:ze}})(ke,A.newline,A.skipEmptyLines,A.comments,A.delimitersToGuess)).successful?A.delimiter=Oe.bestDelimiter:(R=!0,A.delimiter=c.DefaultDelimiter),U.meta.delimiter=A.delimiter),K(A));return A.preview&&A.header&&Oe.preview++,E=ke,D=new S(Oe),U=D.parse(E,oe,Ee),J(),te?{meta:{paused:!0}}:U||{meta:{paused:!1}}},this.paused=function(){return te},this.pause=function(){te=!0,D.abort(),E=L(A.chunk)?"":E.substring(D.getCharIndex())},this.resume=function(){he.streamer._halted?(te=!1,he.streamer.parseChunk(E,!0)):setTimeout(he.resume,3)},this.aborted=function(){return G},this.abort=function(){G=!0,D.abort(),U.meta.aborted=!0,L(A.complete)&&A.complete(U),E=""},this.guessLineEndings=function(ne,Oe){ne=ne.substring(0,1048576);var Oe=new RegExp(_(Oe)+"([^]*?)"+_(Oe),"gm"),Ee=(ne=ne.replace(Oe,"")).split("\r"),Oe=ne.split(`
`),ne=1<Oe.length&&Oe[0].length<Ee[0].length;if(Ee.length===1||ne)return`
`;for(var we=0,Re=0;Re<Ee.length;Re++)Ee[Re][0]===`
`&&we++;return we>=Ee.length/2?`\r
`:"\r"}}function _(A){return A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function S(A){var E=(A=A||{}).delimiter,D=A.newline,R=A.comments,F=A.step,V=A.preview,Z=A.fastMode,fe=null,xe=!1,he=A.quoteChar==null?'"':A.quoteChar,ae=he;if(A.escapeChar!==void 0&&(ae=A.escapeChar),(typeof E!="string"||-1<c.BAD_DELIMITERS.indexOf(E))&&(E=","),R===E)throw new Error("Comment character same as delimiter");R===!0?R="#":(typeof R!="string"||-1<c.BAD_DELIMITERS.indexOf(R))&&(R=!1),D!==`
`&&D!=="\r"&&D!==`\r
`&&(D=`
`);var H=0,te=!1;this.parse=function(G,P,U){if(typeof G!="string")throw new Error("Input must be a string");var X=G.length,J=E.length,ie=D.length,ve=R.length,ke=L(F),oe=[],Ee=[],Oe=[],ne=H=0;if(!G)return Le();if(Z||Z!==!1&&G.indexOf(he)===-1){for(var we=G.split(D),Re=0;Re<we.length;Re++){if(Oe=we[Re],H+=Oe.length,Re!==we.length-1)H+=D.length;else if(U)return Le();if(!R||Oe.substring(0,ve)!==R){if(ke){if(oe=[],He(Oe.split(E)),Ye(),te)return Le()}else He(Oe.split(E));if(V&&V<=Re)return oe=oe.slice(0,V),Le(!0)}}return Le()}for(var pe=G.indexOf(E,H),Ke=G.indexOf(D,H),ze=new RegExp(_(ae)+_(he),"g"),ot=G.indexOf(he,H);;)if(G[H]===he)for(ot=H,H++;;){if((ot=G.indexOf(he,ot+1))===-1)return U||Ee.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:oe.length,index:H}),Ct();if(ot===X-1)return Ct(G.substring(H,ot).replace(ze,he));if(he===ae&&G[ot+1]===ae)ot++;else if(he===ae||ot===0||G[ot-1]!==ae){pe!==-1&&pe<ot+1&&(pe=G.indexOf(E,ot+1));var Be=ut((Ke=Ke!==-1&&Ke<ot+1?G.indexOf(D,ot+1):Ke)===-1?pe:Math.min(pe,Ke));if(G.substr(ot+1+Be,J)===E){Oe.push(G.substring(H,ot).replace(ze,he)),G[H=ot+1+Be+J]!==he&&(ot=G.indexOf(he,H)),pe=G.indexOf(E,H),Ke=G.indexOf(D,H);break}if(Be=ut(Ke),G.substring(ot+1+Be,ot+1+Be+ie)===D){if(Oe.push(G.substring(H,ot).replace(ze,he)),Et(ot+1+Be+ie),pe=G.indexOf(E,H),ot=G.indexOf(he,H),ke&&(Ye(),te))return Le();if(V&&oe.length>=V)return Le(!0);break}Ee.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:oe.length,index:H}),ot++}}else if(R&&Oe.length===0&&G.substring(H,H+ve)===R){if(Ke===-1)return Le();H=Ke+ie,Ke=G.indexOf(D,H),pe=G.indexOf(E,H)}else if(pe!==-1&&(pe<Ke||Ke===-1))Oe.push(G.substring(H,pe)),H=pe+J,pe=G.indexOf(E,H);else{if(Ke===-1)break;if(Oe.push(G.substring(H,Ke)),Et(Ke+ie),ke&&(Ye(),te))return Le();if(V&&oe.length>=V)return Le(!0)}return Ct();function He(Qe){oe.push(Qe),ne=H}function ut(Qe){var le=0;return le=Qe!==-1&&(Qe=G.substring(ot+1,Qe))&&Qe.trim()===""?Qe.length:le}function Ct(Qe){return U||(Qe===void 0&&(Qe=G.substring(H)),Oe.push(Qe),H=X,He(Oe),ke&&Ye()),Le()}function Et(Qe){H=Qe,He(Oe),Oe=[],Ke=G.indexOf(D,H)}function Le(Qe){if(A.header&&!P&&oe.length&&!xe){var le=oe[0],je=Object.create(null),We=new Set(le);let lt=!1;for(let yt=0;yt<le.length;yt++){let $t=le[yt];if(je[$t=L(A.transformHeader)?A.transformHeader($t,yt):$t]){let Xt,At=je[$t];for(;Xt=$t+"_"+At,At++,We.has(Xt););We.add(Xt),le[yt]=Xt,je[$t]++,lt=!0,(fe=fe===null?{}:fe)[Xt]=$t}else je[$t]=1,le[yt]=$t;We.add($t)}lt&&console.warn("Duplicate headers found and renamed."),xe=!0}return{data:oe,errors:Ee,meta:{delimiter:E,linebreak:D,aborted:te,truncated:!!Qe,cursor:ne+(P||0),renamedHeaders:fe}}}function Ye(){F(Le()),oe=[],Ee=[]}},this.abort=function(){te=!0},this.getCharIndex=function(){return H}}function T(A){var E=A.data,D=o[E.workerId],R=!1;if(E.error)D.userError(E.error,E.file);else if(E.results&&E.results.data){var F={abort:function(){R=!0,I(E.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:M,resume:M};if(L(D.userStep)){for(var V=0;V<E.results.data.length&&(D.userStep({data:E.results.data[V],errors:E.results.errors,meta:E.results.meta},F),!R);V++);delete E.results}else L(D.userChunk)&&(D.userChunk(E.results,F,E.file),delete E.results)}E.finished&&!R&&I(E.workerId,E.results)}function I(A,E){var D=o[A];L(D.userComplete)&&D.userComplete(E),D.terminate(),delete o[A]}function M(){throw new Error("Not implemented.")}function K(A){if(typeof A!="object"||A===null)return A;var E,D=Array.isArray(A)?[]:{};for(E in A)D[E]=K(A[E]);return D}function W(A,E){return function(){A.apply(E,arguments)}}function L(A){return typeof A=="function"}return c.parse=function(A,E){var D=(E=E||{}).dynamicTyping||!1;if(L(D)&&(E.dynamicTypingFunction=D,D={}),E.dynamicTyping=D,E.transform=!!L(E.transform)&&E.transform,!E.worker||!c.WORKERS_SUPPORTED)return D=null,c.NODE_STREAM_INPUT,typeof A=="string"?(A=(R=>R.charCodeAt(0)!==65279?R:R.slice(1))(A),D=new(E.download?p:m)(E)):A.readable===!0&&L(A.read)&&L(A.on)?D=new y(E):(n.File&&A instanceof File||A instanceof Object)&&(D=new g(E)),D.stream(A);(D=(()=>{var R;return!!c.WORKERS_SUPPORTED&&(R=(()=>{var F=n.URL||n.webkitURL||null,V=r.toString();return c.BLOB_URL||(c.BLOB_URL=F.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",V,")();"],{type:"text/javascript"})))})(),(R=new n.Worker(R)).onmessage=T,R.id=l++,o[R.id]=R)})()).userStep=E.step,D.userChunk=E.chunk,D.userComplete=E.complete,D.userError=E.error,E.step=L(E.step),E.chunk=L(E.chunk),E.complete=L(E.complete),E.error=L(E.error),delete E.worker,D.postMessage({input:A,config:E,workerId:D.id})},c.unparse=function(A,E){var D=!1,R=!0,F=",",V=`\r
`,Z='"',fe=Z+Z,xe=!1,he=null,ae=!1,H=((()=>{if(typeof E=="object"){if(typeof E.delimiter!="string"||c.BAD_DELIMITERS.filter(function(P){return E.delimiter.indexOf(P)!==-1}).length||(F=E.delimiter),typeof E.quotes!="boolean"&&typeof E.quotes!="function"&&!Array.isArray(E.quotes)||(D=E.quotes),typeof E.skipEmptyLines!="boolean"&&typeof E.skipEmptyLines!="string"||(xe=E.skipEmptyLines),typeof E.newline=="string"&&(V=E.newline),typeof E.quoteChar=="string"&&(Z=E.quoteChar),typeof E.header=="boolean"&&(R=E.header),Array.isArray(E.columns)){if(E.columns.length===0)throw new Error("Option columns is empty");he=E.columns}E.escapeChar!==void 0&&(fe=E.escapeChar+Z),E.escapeFormulae instanceof RegExp?ae=E.escapeFormulae:typeof E.escapeFormulae=="boolean"&&E.escapeFormulae&&(ae=/^[=+\-@\t\r].*$/)}})(),new RegExp(_(Z),"g"));if(typeof A=="string"&&(A=JSON.parse(A)),Array.isArray(A)){if(!A.length||Array.isArray(A[0]))return te(null,A,xe);if(typeof A[0]=="object")return te(he||Object.keys(A[0]),A,xe)}else if(typeof A=="object")return typeof A.data=="string"&&(A.data=JSON.parse(A.data)),Array.isArray(A.data)&&(A.fields||(A.fields=A.meta&&A.meta.fields||he),A.fields||(A.fields=Array.isArray(A.data[0])?A.fields:typeof A.data[0]=="object"?Object.keys(A.data[0]):[]),Array.isArray(A.data[0])||typeof A.data[0]=="object"||(A.data=[A.data])),te(A.fields||[],A.data||[],xe);throw new Error("Unable to serialize unrecognized input");function te(P,U,X){var J="",ie=(typeof P=="string"&&(P=JSON.parse(P)),typeof U=="string"&&(U=JSON.parse(U)),Array.isArray(P)&&0<P.length),ve=!Array.isArray(U[0]);if(ie&&R){for(var ke=0;ke<P.length;ke++)0<ke&&(J+=F),J+=G(P[ke],ke);0<U.length&&(J+=V)}for(var oe=0;oe<U.length;oe++){var Ee=(ie?P:U[oe]).length,Oe=!1,ne=ie?Object.keys(U[oe]).length===0:U[oe].length===0;if(X&&!ie&&(Oe=X==="greedy"?U[oe].join("").trim()==="":U[oe].length===1&&U[oe][0].length===0),X==="greedy"&&ie){for(var we=[],Re=0;Re<Ee;Re++){var pe=ve?P[Re]:Re;we.push(U[oe][pe])}Oe=we.join("").trim()===""}if(!Oe){for(var Ke=0;Ke<Ee;Ke++){0<Ke&&!ne&&(J+=F);var ze=ie&&ve?P[Ke]:Ke;J+=G(U[oe][ze],Ke)}oe<U.length-1&&(!X||0<Ee&&!ne)&&(J+=V)}}return J}function G(P,U){var X,J;return P==null?"":P.constructor===Date?JSON.stringify(P).slice(1,25):(J=!1,ae&&typeof P=="string"&&ae.test(P)&&(P="'"+P,J=!0),X=P.toString().replace(H,fe),(J=J||D===!0||typeof D=="function"&&D(P,U)||Array.isArray(D)&&D[U]||((ie,ve)=>{for(var ke=0;ke<ve.length;ke++)if(-1<ie.indexOf(ve[ke]))return!0;return!1})(X,c.BAD_DELIMITERS)||-1<X.indexOf(F)||X.charAt(0)===" "||X.charAt(X.length-1)===" ")?Z+X+Z:X)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=S,c.ParserHandle=w,c.NetworkStreamer=p,c.FileStreamer=g,c.StringStreamer=m,c.ReadableStreamStreamer=y,n.jQuery&&((s=n.jQuery).fn.parse=function(A){var E=A.config||{},D=[];return this.each(function(V){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var Z=0;Z<this.files.length;Z++)D.push({file:this.files[Z],inputElem:this,instanceConfig:s.extend({},E)})}),R(),this;function R(){if(D.length===0)L(A.complete)&&A.complete();else{var V,Z,fe,xe,he=D[0];if(L(A.before)){var ae=A.before(he.file,he.inputElem);if(typeof ae=="object"){if(ae.action==="abort")return V="AbortError",Z=he.file,fe=he.inputElem,xe=ae.reason,void(L(A.error)&&A.error({name:V},Z,fe,xe));if(ae.action==="skip")return void F();typeof ae.config=="object"&&(he.instanceConfig=s.extend(he.instanceConfig,ae.config))}else if(ae==="skip")return void F()}var H=he.instanceConfig.complete;he.instanceConfig.complete=function(te){L(H)&&H(te,he.file,he.inputElem),F()},c.parse(he.file,he.instanceConfig)}}function F(){D.splice(0,1),R()}}),a&&(n.onmessage=function(A){A=A.data,c.WORKER_ID===void 0&&A&&(c.WORKER_ID=A.workerId),typeof A.input=="string"?n.postMessage({workerId:c.WORKER_ID,results:c.parse(A.input,A.config),finished:!0}):(n.File&&A.input instanceof File||A.input instanceof Object)&&(A=c.parse(A.input,A.config))&&n.postMessage({workerId:c.WORKER_ID,results:A,finished:!0})}),(p.prototype=Object.create(d.prototype)).constructor=p,(g.prototype=Object.create(d.prototype)).constructor=g,(m.prototype=Object.create(m.prototype)).constructor=m,(y.prototype=Object.create(d.prototype)).constructor=y,c})})(vw)),vw.exports}var Qie=Xie();const fB=mj(Qie);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var w5={};w5.version="0.18.5";var pB=1252,Jie=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],KS={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},YS=function(t){Jie.indexOf(t)!=-1&&(pB=KS[0]=t)};function Zie(){YS(1252)}var au=function(t){YS(t)};function XS(){au(1200),Zie()}function GN(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function eae(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function mB(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var Zg=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?eae(t.slice(2)):e==254&&r==255?mB(t.slice(2)):e==65279?t.slice(1):t},wv=function(e){return String.fromCharCode(e)},KN=function(e){return String.fromCharCode(e)},lx,of="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function cx(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0,c=0;c<t.length;)r=t.charCodeAt(c++),i=r>>2,n=t.charCodeAt(c++),a=(r&3)<<4|n>>4,s=t.charCodeAt(c++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),e+=of.charAt(i)+of.charAt(a)+of.charAt(o)+of.charAt(l);return e}function ic(t){var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)i=of.indexOf(t.charAt(c++)),a=of.indexOf(t.charAt(c++)),r=i<<2|a>>4,e+=String.fromCharCode(r),o=of.indexOf(t.charAt(c++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=of.indexOf(t.charAt(c++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var pn=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),ch=(function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function Sf(t){return pn?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function YN(t){return pn?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Ql=function(e){return pn?ch(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function B_(t){if(typeof ArrayBuffer>"u")return Ql(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function zf(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function tae(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function QS(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return QS(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var qa=pn?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:ch(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function rae(t){for(var e=[],r=0,n=t.length+250,s=Sf(t.length+255),i=0;i<t.length;++i){var a=t.charCodeAt(i);if(a<128)s[r++]=a;else if(a<2048)s[r++]=192|a>>6&31,s[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++i)&1023;s[r++]=240|a>>8&7,s[r++]=128|a>>2&63,s[r++]=128|o>>6&15|(a&3)<<4,s[r++]=128|o&63}else s[r++]=224|a>>12&15,s[r++]=128|a>>6&63,s[r++]=128|a&63;r>n&&(e.push(s.slice(0,r)),r=0,s=Sf(65535),n=65530)}return e.push(s.slice(0,r)),qa(e)}var ol=/\u0000/g,e2=/[\u0001-\u0006]/g;function Ym(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function ou(t,e){var r=""+t;return r.length>=e?r:Si("0",e-r.length)+r}function JS(t,e){var r=""+t;return r.length>=e?r:Si(" ",e-r.length)+r}function _5(t,e){var r=""+t;return r.length>=e?r:r+Si(" ",e-r.length)}function nae(t,e){var r=""+Math.round(t);return r.length>=e?r:Si("0",e-r.length)+r}function sae(t,e){var r=""+t;return r.length>=e?r:Si("0",e-r.length)+r}var XN=Math.pow(2,32);function dm(t,e){if(t>XN||t<-XN)return nae(t,e);var r=Math.round(t);return sae(r,e)}function b5(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var QN=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],F3=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function iae(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Dr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},JN={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},aae={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function k5(t,e,r){for(var n=t<0?-1:1,s=t*n,i=0,a=1,o=0,l=1,c=0,d=0,p=Math.floor(s);c<e&&(p=Math.floor(s),o=p*a+i,d=p*c+l,!(s-p<5e-8));)s=1/(s-p),i=a,a=o,l=c,c=d;if(d>e&&(c>e?(d=l,o=i):(d=c,o=a)),!r)return[0,n*o,d];var g=Math.floor(n*o/d);return[g,n*o-g*d,d]}function P0(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),i=0,a=[],o={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],i=l.getDay(),n<60&&(i=(i+6)%7),r&&(i=hae(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=i,o}var gB=new Date(1899,11,31,0,0,0),oae=gB.getTime(),lae=new Date(1900,2,1,0,0,0);function xB(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=lae&&(r+=1440*60*1e3),(r-(oae+(t.getTimezoneOffset()-gB.getTimezoneOffset())*6e4))/(1440*60*1e3)}function ZS(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function cae(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function uae(t){var e=t<0?12:11,r=ZS(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function dae(t){var e=ZS(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function ux(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=uae(t):e===10?r=t.toFixed(10).substr(0,12):r=dae(t),ZS(cae(r.toUpperCase()))}function up(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):ux(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Fc(14,xB(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function hae(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function fae(t,e,r,n){var s="",i=0,a=0,o=r.y,l,c=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,c=e.length;break;case 3:return F3[r.m-1][1];case 5:return F3[r.m-1][0];default:return F3[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,c=e.length;break;case 3:return QN[r.q][0];default:return QN[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?ou(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,i=Math.round(a*(r.S+r.u)),i>=60*a&&(i=0),e==="s"?i===0?"0":""+i/a:(s=ou(i,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var d=c>0?ou(l,c):"";return d}function lf(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var yB=/%/g;function pae(t,e,r){var n=e.replace(yB,""),s=e.length-n.length;return qd(t,n,r*Math.pow(10,2*s))+Si("%",s)}function mae(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return qd(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function vB(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+vB(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,d){return l+c+d.substr(0,(s+i)%s)+"."+d.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var wB=/# (\?+)( ?)\/( ?)(\d+)/;function gae(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),i=Math.floor(s/n),a=s-i*n,o=n;return r+(i===0?"":""+i)+" "+(a===0?Si(" ",t[1].length+1+t[4].length):JS(a,t[1].length)+t[2]+"/"+t[3]+ou(o,t[4].length))}function xae(t,e,r){return r+(e===0?"":""+e)+Si(" ",t[1].length+2+t[4].length)}var _B=/^#*0*\.([0#]+)/,bB=/\).*[0#]/,kB=/\(###\) ###\\?-####/;function nl(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function ZN(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function eT(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function yae(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function vae(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function bc(t,e,r){if(t.charCodeAt(0)===40&&!e.match(bB)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?bc("n",n,r):"("+bc("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return mae(t,e,r);if(e.indexOf("%")!==-1)return pae(t,e,r);if(e.indexOf("E")!==-1)return vB(e,r);if(e.charCodeAt(0)===36)return"$"+bc(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+dm(l,e.length);if(e.match(/^[#?]+$/))return s=dm(r,0),s==="0"&&(s=""),s.length>e.length?s:nl(e.substr(0,e.length-s.length))+s;if(i=e.match(wB))return gae(i,l,c);if(e.match(/^#+0+$/))return c+dm(l,e.length-e.indexOf("0"));if(i=e.match(_B))return s=ZN(r,i[1].length).replace(/^([^\.]+)$/,"$1."+nl(i[1])).replace(/\.$/,"."+nl(i[1])).replace(/\.(\d*)$/,function(y,w){return"."+w+Si("0",nl(i[1]).length-w.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+ZN(l,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+lf(dm(l,0));if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+bc(t,e,-r):lf(""+(Math.floor(r)+yae(r,i[1].length)))+"."+ou(eT(r,i[1].length),i[1].length);if(i=e.match(/^#,#*,#0/))return bc(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Ym(bc(t,e.replace(/[\\-]/g,""),r)),a=0,Ym(Ym(e.replace(/\\/g,"")).replace(/[0#]/g,function(y){return a<s.length?s.charAt(a++):y==="0"?"0":""}));if(e.match(kB))return s=bc(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=k5(l,Math.pow(10,a)-1,!1),s=""+c,d=qd("n",i[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+i[2]+"/"+i[3],d=_5(o[2],a),d.length<i[4].length&&(d=nl(i[4].substr(i[4].length-d.length))+d),s+=d,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=k5(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?JS(o[1],a)+i[2]+"/"+i[3]+_5(o[2],a):Si(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=dm(r,0),e.length<=s.length?s:nl(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var p=e.indexOf(".")-a,g=e.length-s.length-p;return nl(e.substr(0,p)+s+e.substr(e.length-g))}if(i=e.match(/^00,000\.([#0]*0)$/))return a=eT(r,i[1].length),r<0?"-"+bc(t,e,-r):lf(vae(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?ou(0,3-y.length):"")+y})+"."+ou(a,i[1].length);switch(e){case"###,##0.00":return bc(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=lf(dm(l,0));return m!=="0"?c+m:"";case"###,###.00":return bc(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return bc(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function wae(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return qd(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function _ae(t,e,r){var n=e.replace(yB,""),s=e.length-n.length;return qd(t,n,r*Math.pow(10,2*s))+Si("%",s)}function SB(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+SB(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,d){return l+c+d.substr(0,(s+i)%s)+"."+d.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Mu(t,e,r){if(t.charCodeAt(0)===40&&!e.match(bB)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Mu("n",n,r):"("+Mu("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return wae(t,e,r);if(e.indexOf("%")!==-1)return _ae(t,e,r);if(e.indexOf("E")!==-1)return SB(e,r);if(e.charCodeAt(0)===36)return"$"+Mu(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+ou(l,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:nl(e.substr(0,e.length-s.length))+s;if(i=e.match(wB))return xae(i,l,c);if(e.match(/^#+0+$/))return c+ou(l,e.length-e.indexOf("0"));if(i=e.match(_B))return s=(""+r).replace(/^([^\.]+)$/,"$1."+nl(i[1])).replace(/\.$/,"."+nl(i[1])),s=s.replace(/\.(\d*)$/,function(y,w){return"."+w+Si("0",nl(i[1]).length-w.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+lf(""+l);if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Mu(t,e,-r):lf(""+r)+"."+Si("0",i[1].length);if(i=e.match(/^#,#*,#0/))return Mu(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Ym(Mu(t,e.replace(/[\\-]/g,""),r)),a=0,Ym(Ym(e.replace(/\\/g,"")).replace(/[0#]/g,function(y){return a<s.length?s.charAt(a++):y==="0"?"0":""}));if(e.match(kB))return s=Mu(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=k5(l,Math.pow(10,a)-1,!1),s=""+c,d=qd("n",i[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+i[2]+"/"+i[3],d=_5(o[2],a),d.length<i[4].length&&(d=nl(i[4].substr(i[4].length-d.length))+d),s+=d,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=k5(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?JS(o[1],a)+i[2]+"/"+i[3]+_5(o[2],a):Si(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:nl(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var p=e.indexOf(".")-a,g=e.length-s.length-p;return nl(e.substr(0,p)+s+e.substr(e.length-g))}if(i=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Mu(t,e,-r):lf(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?ou(0,3-y.length):"")+y})+"."+ou(0,i[1].length);switch(e){case"###,###":case"##,###":case"#,###":var m=lf(""+l);return m!=="0"?c+m:"";default:if(e.match(/\.[0#?]*$/))return Mu(t,e.slice(0,e.lastIndexOf(".")),r)+nl(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function qd(t,e,r){return(r|0)===r?Mu(t,e,r):bc(t,e,r)}function bae(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var EB=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function q1(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":b5(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(EB))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function kae(t,e,r,n){for(var s=[],i="",a=0,o="",l="t",c,d,p,g="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!b5(t,a))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},a+=7;break;case'"':for(i="";(p=t.charCodeAt(++a))!==34&&a<t.length;)i+=String.fromCharCode(p);s[s.length]={t:"t",v:i},++a;break;case"\\":var m=t.charAt(++a),y=m==="("||m===")"?m:"t";s[s.length]={t:y,v:m},++a;break;case"_":s[s.length]={t:"t",v:" "},a+=2;break;case"@":s[s.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(c==null&&(c=P0(e,r,t.charAt(a+1)==="2"),c==null))return"";s[s.length]={t:"X",v:t.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=P0(e,r),c==null))return"";for(i=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)i+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=g),s[s.length]={t:o,v:i},l=o;break;case"A":case"a":case"":var w={t:o,v:o};if(c==null&&(c=P0(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(w.v=c.H>=12?"P":"A"),w.t="T",g="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(w.v=c.H>=12?"PM":"AM"),w.t="T",a+=5,g="h"):t.substr(a,5).toUpperCase()==="/"?(c!=null&&(w.v=c.H>=12?"":""),w.t="T",a+=5,g="h"):(w.t="t",++a),c==null&&w.t==="T")return"";s[s.length]=w,l=o;break;case"[":for(i=o;t.charAt(a++)!=="]"&&a<t.length;)i+=t.charAt(a);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(EB)){if(c==null&&(c=P0(e,r),c==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},l=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",q1(t)||(s[s.length]={t:"t",v:i}));break;case".":if(c!=null){for(i=o;++a<t.length&&(o=t.charAt(a))==="0";)i+=o;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)i+=o;s[s.length]={t:"n",v:i};break;case"?":for(i=o;t.charAt(++a)===o;)i+=o;s[s.length]={t:o,v:i},l=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)i+=t.charAt(a);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:o,v:o},++a;break;case"$":s[s.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++a;break}var _=0,S=0,T;for(a=s.length-1,l="t";a>=0;--a)switch(s[a].t){case"h":case"H":s[a].t=g,l="h",_<1&&(_=1);break;case"s":(T=s[a].v.match(/\.0+$/))&&(S=Math.max(S,T[0].length-1)),_<3&&(_=3);case"d":case"y":case"M":case"e":l=s[a].t;break;case"m":l==="s"&&(s[a].t="M",_<2&&(_=2));break;case"X":break;case"Z":_<1&&s[a].v.match(/[Hh]/)&&(_=1),_<2&&s[a].v.match(/[Mm]/)&&(_=2),_<3&&s[a].v.match(/[Ss]/)&&(_=3)}switch(_){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var I="",M;for(a=0;a<s.length;++a)switch(s[a].t){case"t":case"T":case" ":case"D":break;case"X":s[a].v="",s[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[a].v=fae(s[a].t.charCodeAt(0),s[a].v,c,S),s[a].t="t";break;case"n":case"?":for(M=a+1;s[M]!=null&&((o=s[M].t)==="?"||o==="D"||(o===" "||o==="t")&&s[M+1]!=null&&(s[M+1].t==="?"||s[M+1].t==="t"&&s[M+1].v==="/")||s[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[M].v==="/"||s[M].v===" "&&s[M+1]!=null&&s[M+1].t=="?"));)s[a].v+=s[M].v,s[M]={v:"",t:";"},++M;I+=s[a].v,a=M-1;break;case"G":s[a].t="t",s[a].v=up(e,r);break}var K="",W,L;if(I.length>0){I.charCodeAt(0)==40?(W=e<0&&I.charCodeAt(0)===45?-e:e,L=qd("n",I,W)):(W=e<0&&n>1?-e:e,L=qd("n",I,W),W<0&&s[0]&&s[0].t=="t"&&(L=L.substr(1),s[0].v="-"+s[0].v)),M=L.length-1;var A=s.length;for(a=0;a<s.length;++a)if(s[a]!=null&&s[a].t!="t"&&s[a].v.indexOf(".")>-1){A=a;break}var E=s.length;if(A===s.length&&L.indexOf("E")===-1){for(a=s.length-1;a>=0;--a)s[a]==null||"n?".indexOf(s[a].t)===-1||(M>=s[a].v.length-1?(M-=s[a].v.length,s[a].v=L.substr(M+1,s[a].v.length)):M<0?s[a].v="":(s[a].v=L.substr(0,M+1),M=-1),s[a].t="t",E=a);M>=0&&E<s.length&&(s[E].v=L.substr(0,M+1)+s[E].v)}else if(A!==s.length&&L.indexOf("E")===-1){for(M=L.indexOf(".")-1,a=A;a>=0;--a)if(!(s[a]==null||"n?".indexOf(s[a].t)===-1)){for(d=s[a].v.indexOf(".")>-1&&a===A?s[a].v.indexOf(".")-1:s[a].v.length-1,K=s[a].v.substr(d+1);d>=0;--d)M>=0&&(s[a].v.charAt(d)==="0"||s[a].v.charAt(d)==="#")&&(K=L.charAt(M--)+K);s[a].v=K,s[a].t="t",E=a}for(M>=0&&E<s.length&&(s[E].v=L.substr(0,M+1)+s[E].v),M=L.indexOf(".")+1,a=A;a<s.length;++a)if(!(s[a]==null||"n?(".indexOf(s[a].t)===-1&&a!==A)){for(d=s[a].v.indexOf(".")>-1&&a===A?s[a].v.indexOf(".")+1:0,K=s[a].v.substr(0,d);d<s[a].v.length;++d)M<L.length&&(K+=L.charAt(M++));s[a].v=K,s[a].t="t",E=a}}}for(a=0;a<s.length;++a)s[a]!=null&&"n?".indexOf(s[a].t)>-1&&(W=n>1&&e<0&&a>0&&s[a-1].v==="-"?-e:e,s[a].v=qd(s[a].t,s[a].v,W),s[a].t="t");var D="";for(a=0;a!==s.length;++a)s[a]!=null&&(D+=s[a].v);return D}var tT=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function rT(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function Sae(t,e){var r=bae(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(tT),o=r[1].match(tT);return rT(e,a)?[n,r[0]]:rT(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,i]}function Fc(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Dr)[t],n==null&&(n=r.table&&r.table[JN[t]]||Dr[JN[t]]),n==null&&(n=aae[t]||"General");break}if(b5(n,0))return up(e,r);e instanceof Date&&(e=xB(e,r.date1904));var s=Sae(n,e);if(b5(s[1]))return up(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return kae(s[1],e,r,s[0])}function Hd(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Dr[r]==null){e<0&&(e=r);continue}if(Dr[r]==t){e=r;break}}e<0&&(e=391)}return Dr[e]=t,e}function V_(t){for(var e=0;e!=392;++e)t[e]!==void 0&&Hd(t[e],e)}function H1(){Dr=iae()}var Eae={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},CB=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Cae(t){var e=typeof t=="number"?Dr[t]:t;return e=e.replace(CB,"(\\d+)"),new RegExp("^"+e+"$")}function Aae(t,e,r){var n=-1,s=-1,i=-1,a=-1,o=-1,l=-1;(e.match(CB)||[]).forEach(function(p,g){var m=parseInt(r[g+1],10);switch(p.toLowerCase().charAt(0)){case"y":n=m;break;case"d":i=m;break;case"h":a=m;break;case"s":l=m;break;case"m":a>=0?o=m:s=m;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var d=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:n==-1&&s==-1&&i==-1?d:c+"T"+d}var Nae=(function(){var t={};t.version="1.2.0";function e(){for(var L=0,A=new Array(256),E=0;E!=256;++E)L=E,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,A[E]=L;return typeof Int32Array<"u"?new Int32Array(A):A}var r=e();function n(L){var A=0,E=0,D=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(D=0;D!=256;++D)R[D]=L[D];for(D=0;D!=256;++D)for(E=L[D],A=256+D;A<4096;A+=256)E=R[A]=E>>>8^L[E&255];var F=[];for(D=1;D!=16;++D)F[D-1]=typeof Int32Array<"u"?R.subarray(D*256,D*256+256):R.slice(D*256,D*256+256);return F}var s=n(r),i=s[0],a=s[1],o=s[2],l=s[3],c=s[4],d=s[5],p=s[6],g=s[7],m=s[8],y=s[9],w=s[10],_=s[11],S=s[12],T=s[13],I=s[14];function M(L,A){for(var E=A^-1,D=0,R=L.length;D<R;)E=E>>>8^r[(E^L.charCodeAt(D++))&255];return~E}function K(L,A){for(var E=A^-1,D=L.length-15,R=0;R<D;)E=I[L[R++]^E&255]^T[L[R++]^E>>8&255]^S[L[R++]^E>>16&255]^_[L[R++]^E>>>24]^w[L[R++]]^y[L[R++]]^m[L[R++]]^g[L[R++]]^p[L[R++]]^d[L[R++]]^c[L[R++]]^l[L[R++]]^o[L[R++]]^a[L[R++]]^i[L[R++]]^r[L[R++]];for(D+=15;R<D;)E=E>>>8^r[(E^L[R++])&255];return~E}function W(L,A){for(var E=A^-1,D=0,R=L.length,F=0,V=0;D<R;)F=L.charCodeAt(D++),F<128?E=E>>>8^r[(E^F)&255]:F<2048?(E=E>>>8^r[(E^(192|F>>6&31))&255],E=E>>>8^r[(E^(128|F&63))&255]):F>=55296&&F<57344?(F=(F&1023)+64,V=L.charCodeAt(D++)&1023,E=E>>>8^r[(E^(240|F>>8&7))&255],E=E>>>8^r[(E^(128|F>>2&63))&255],E=E>>>8^r[(E^(128|V>>6&15|(F&3)<<4))&255],E=E>>>8^r[(E^(128|V&63))&255]):(E=E>>>8^r[(E^(224|F>>12&15))&255],E=E>>>8^r[(E^(128|F>>6&63))&255],E=E>>>8^r[(E^(128|F&63))&255]);return~E}return t.table=r,t.bstr=M,t.buf=K,t.str=W,t})(),Ir=(function(){var e={};e.version="1.2.1";function r(ce,Te){for(var be=ce.split("/"),Se=Te.split("/"),Pe=0,Ie=0,Xe=Math.min(be.length,Se.length);Pe<Xe;++Pe){if(Ie=be[Pe].length-Se[Pe].length)return Ie;if(be[Pe]!=Se[Pe])return be[Pe]<Se[Pe]?-1:1}return be.length-Se.length}function n(ce){if(ce.charAt(ce.length-1)=="/")return ce.slice(0,-1).indexOf("/")===-1?ce:n(ce.slice(0,-1));var Te=ce.lastIndexOf("/");return Te===-1?ce:ce.slice(0,Te+1)}function s(ce){if(ce.charAt(ce.length-1)=="/")return s(ce.slice(0,-1));var Te=ce.lastIndexOf("/");return Te===-1?ce:ce.slice(Te+1)}function i(ce,Te){typeof Te=="string"&&(Te=new Date(Te));var be=Te.getHours();be=be<<6|Te.getMinutes(),be=be<<5|Te.getSeconds()>>>1,ce.write_shift(2,be);var Se=Te.getFullYear()-1980;Se=Se<<4|Te.getMonth()+1,Se=Se<<5|Te.getDate(),ce.write_shift(2,Se)}function a(ce){var Te=ce.read_shift(2)&65535,be=ce.read_shift(2)&65535,Se=new Date,Pe=be&31;be>>>=5;var Ie=be&15;be>>>=4,Se.setMilliseconds(0),Se.setFullYear(be+1980),Se.setMonth(Ie-1),Se.setDate(Pe);var Xe=Te&31;Te>>>=5;var ft=Te&63;return Te>>>=6,Se.setHours(Te),Se.setMinutes(ft),Se.setSeconds(Xe<<1),Se}function o(ce){ho(ce,0);for(var Te={},be=0;ce.l<=ce.length-4;){var Se=ce.read_shift(2),Pe=ce.read_shift(2),Ie=ce.l+Pe,Xe={};switch(Se){case 21589:be=ce.read_shift(1),be&1&&(Xe.mtime=ce.read_shift(4)),Pe>5&&(be&2&&(Xe.atime=ce.read_shift(4)),be&4&&(Xe.ctime=ce.read_shift(4))),Xe.mtime&&(Xe.mt=new Date(Xe.mtime*1e3));break}ce.l=Ie,Te[Se]=Xe}return Te}var l;function c(){return l||(l={})}function d(ce,Te){if(ce[0]==80&&ce[1]==75)return Bn(ce,Te);if((ce[0]|32)==109&&(ce[1]|32)==105)return vr(ce,Te);if(ce.length<512)throw new Error("CFB file size "+ce.length+" < 512");var be=3,Se=512,Pe=0,Ie=0,Xe=0,ft=0,tt=0,et=[],at=ce.slice(0,512);ho(at,0);var Tt=p(at);switch(be=Tt[0],be){case 3:Se=512;break;case 4:Se=4096;break;case 0:if(Tt[1]==0)return Bn(ce,Te);default:throw new Error("Major Version: Expected 3 or 4 saw "+be)}Se!==512&&(at=ce.slice(0,Se),ho(at,28));var Ut=ce.slice(0,Se);g(at,be);var Gt=at.read_shift(4,"i");if(be===3&&Gt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Gt);at.l+=4,Xe=at.read_shift(4,"i"),at.l+=4,at.chk("00100000","Mini Stream Cutoff Size: "),ft=at.read_shift(4,"i"),Pe=at.read_shift(4,"i"),tt=at.read_shift(4,"i"),Ie=at.read_shift(4,"i");for(var Ot=-1,Pt=0;Pt<109&&(Ot=at.read_shift(4,"i"),!(Ot<0));++Pt)et[Pt]=Ot;var Ar=m(ce,Se);_(tt,Ie,Ar,Se,et);var Xr=T(Ar,Xe,et,Se);Xr[Xe].name="!Directory",Pe>0&&ft!==V&&(Xr[ft].name="!MiniFAT"),Xr[et[0]].name="!FAT",Xr.fat_addrs=et,Xr.ssz=Se;var Ur={},kn=[],Aa=[],Na=[];I(Xe,Xr,Ar,kn,Pe,Ur,Aa,ft),y(Aa,Na,kn),kn.shift();var Qi={FileIndex:Aa,FullPaths:Na};return Te&&Te.raw&&(Qi.raw={header:Ut,sectors:Ar}),Qi}function p(ce){if(ce[ce.l]==80&&ce[ce.l+1]==75)return[0,0];ce.chk(Z,"Header Signature: "),ce.l+=16;var Te=ce.read_shift(2,"u");return[ce.read_shift(2,"u"),Te]}function g(ce,Te){var be=9;switch(ce.l+=2,be=ce.read_shift(2)){case 9:if(Te!=3)throw new Error("Sector Shift: Expected 9 saw "+be);break;case 12:if(Te!=4)throw new Error("Sector Shift: Expected 12 saw "+be);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+be)}ce.chk("0600","Mini Sector Shift: "),ce.chk("000000000000","Reserved: ")}function m(ce,Te){for(var be=Math.ceil(ce.length/Te)-1,Se=[],Pe=1;Pe<be;++Pe)Se[Pe-1]=ce.slice(Pe*Te,(Pe+1)*Te);return Se[be-1]=ce.slice(be*Te),Se}function y(ce,Te,be){for(var Se=0,Pe=0,Ie=0,Xe=0,ft=0,tt=be.length,et=[],at=[];Se<tt;++Se)et[Se]=at[Se]=Se,Te[Se]=be[Se];for(;ft<at.length;++ft)Se=at[ft],Pe=ce[Se].L,Ie=ce[Se].R,Xe=ce[Se].C,et[Se]===Se&&(Pe!==-1&&et[Pe]!==Pe&&(et[Se]=et[Pe]),Ie!==-1&&et[Ie]!==Ie&&(et[Se]=et[Ie])),Xe!==-1&&(et[Xe]=Se),Pe!==-1&&Se!=et[Se]&&(et[Pe]=et[Se],at.lastIndexOf(Pe)<ft&&at.push(Pe)),Ie!==-1&&Se!=et[Se]&&(et[Ie]=et[Se],at.lastIndexOf(Ie)<ft&&at.push(Ie));for(Se=1;Se<tt;++Se)et[Se]===Se&&(Ie!==-1&&et[Ie]!==Ie?et[Se]=et[Ie]:Pe!==-1&&et[Pe]!==Pe&&(et[Se]=et[Pe]));for(Se=1;Se<tt;++Se)if(ce[Se].type!==0){if(ft=Se,ft!=et[ft])do ft=et[ft],Te[Se]=Te[ft]+"/"+Te[Se];while(ft!==0&&et[ft]!==-1&&ft!=et[ft]);et[Se]=-1}for(Te[0]+="/",Se=1;Se<tt;++Se)ce[Se].type!==2&&(Te[Se]+="/")}function w(ce,Te,be){for(var Se=ce.start,Pe=ce.size,Ie=[],Xe=Se;be&&Pe>0&&Xe>=0;)Ie.push(Te.slice(Xe*F,Xe*F+F)),Pe-=F,Xe=C0(be,Xe*4);return Ie.length===0?_t(0):qa(Ie).slice(0,ce.size)}function _(ce,Te,be,Se,Pe){var Ie=V;if(ce===V){if(Te!==0)throw new Error("DIFAT chain shorter than expected")}else if(ce!==-1){var Xe=be[ce],ft=(Se>>>2)-1;if(!Xe)return;for(var tt=0;tt<ft&&(Ie=C0(Xe,tt*4))!==V;++tt)Pe.push(Ie);_(C0(Xe,Se-4),Te-1,be,Se,Pe)}}function S(ce,Te,be,Se,Pe){var Ie=[],Xe=[];Pe||(Pe=[]);var ft=Se-1,tt=0,et=0;for(tt=Te;tt>=0;){Pe[tt]=!0,Ie[Ie.length]=tt,Xe.push(ce[tt]);var at=be[Math.floor(tt*4/Se)];if(et=tt*4&ft,Se<4+et)throw new Error("FAT boundary crossed: "+tt+" 4 "+Se);if(!ce[at])break;tt=C0(ce[at],et)}return{nodes:Ie,data:pT([Xe])}}function T(ce,Te,be,Se){var Pe=ce.length,Ie=[],Xe=[],ft=[],tt=[],et=Se-1,at=0,Tt=0,Ut=0,Gt=0;for(at=0;at<Pe;++at)if(ft=[],Ut=at+Te,Ut>=Pe&&(Ut-=Pe),!Xe[Ut]){tt=[];var Ot=[];for(Tt=Ut;Tt>=0;){Ot[Tt]=!0,Xe[Tt]=!0,ft[ft.length]=Tt,tt.push(ce[Tt]);var Pt=be[Math.floor(Tt*4/Se)];if(Gt=Tt*4&et,Se<4+Gt)throw new Error("FAT boundary crossed: "+Tt+" 4 "+Se);if(!ce[Pt]||(Tt=C0(ce[Pt],Gt),Ot[Tt]))break}Ie[Ut]={nodes:ft,data:pT([tt])}}return Ie}function I(ce,Te,be,Se,Pe,Ie,Xe,ft){for(var tt=0,et=Se.length?2:0,at=Te[ce].data,Tt=0,Ut=0,Gt;Tt<at.length;Tt+=128){var Ot=at.slice(Tt,Tt+128);ho(Ot,64),Ut=Ot.read_shift(2),Gt=a7(Ot,0,Ut-et),Se.push(Gt);var Pt={name:Gt,type:Ot.read_shift(1),color:Ot.read_shift(1),L:Ot.read_shift(4,"i"),R:Ot.read_shift(4,"i"),C:Ot.read_shift(4,"i"),clsid:Ot.read_shift(16),state:Ot.read_shift(4,"i"),start:0,size:0},Ar=Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2);Ar!==0&&(Pt.ct=M(Ot,Ot.l-8));var Xr=Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2);Xr!==0&&(Pt.mt=M(Ot,Ot.l-8)),Pt.start=Ot.read_shift(4,"i"),Pt.size=Ot.read_shift(4,"i"),Pt.size<0&&Pt.start<0&&(Pt.size=Pt.type=0,Pt.start=V,Pt.name=""),Pt.type===5?(tt=Pt.start,Pe>0&&tt!==V&&(Te[tt].name="!StreamData")):Pt.size>=4096?(Pt.storage="fat",Te[Pt.start]===void 0&&(Te[Pt.start]=S(be,Pt.start,Te.fat_addrs,Te.ssz)),Te[Pt.start].name=Pt.name,Pt.content=Te[Pt.start].data.slice(0,Pt.size)):(Pt.storage="minifat",Pt.size<0?Pt.size=0:tt!==V&&Pt.start!==V&&Te[tt]&&(Pt.content=w(Pt,Te[tt].data,(Te[ft]||{}).data))),Pt.content&&ho(Pt.content,0),Ie[Gt]=Pt,Xe.push(Pt)}}function M(ce,Te){return new Date((Xl(ce,Te+4)/1e7*Math.pow(2,32)+Xl(ce,Te)/1e7-11644473600)*1e3)}function K(ce,Te){return c(),d(l.readFileSync(ce),Te)}function W(ce,Te){var be=Te&&Te.type;switch(be||pn&&Buffer.isBuffer(ce)&&(be="buffer"),be||"base64"){case"file":return K(ce,Te);case"base64":return d(Ql(ic(ce)),Te);case"binary":return d(Ql(ce),Te)}return d(ce,Te)}function L(ce,Te){var be=Te||{},Se=be.root||"Root Entry";if(ce.FullPaths||(ce.FullPaths=[]),ce.FileIndex||(ce.FileIndex=[]),ce.FullPaths.length!==ce.FileIndex.length)throw new Error("inconsistent CFB structure");ce.FullPaths.length===0&&(ce.FullPaths[0]=Se+"/",ce.FileIndex[0]={name:Se,type:5}),be.CLSID&&(ce.FileIndex[0].clsid=be.CLSID),A(ce)}function A(ce){var Te="Sh33tJ5";if(!Ir.find(ce,"/"+Te)){var be=_t(4);be[0]=55,be[1]=be[3]=50,be[2]=54,ce.FileIndex.push({name:Te,type:2,content:be,size:4,L:69,R:69,C:69}),ce.FullPaths.push(ce.FullPaths[0]+Te),E(ce)}}function E(ce,Te){L(ce);for(var be=!1,Se=!1,Pe=ce.FullPaths.length-1;Pe>=0;--Pe){var Ie=ce.FileIndex[Pe];switch(Ie.type){case 0:Se?be=!0:(ce.FileIndex.pop(),ce.FullPaths.pop());break;case 1:case 2:case 5:Se=!0,isNaN(Ie.R*Ie.L*Ie.C)&&(be=!0),Ie.R>-1&&Ie.L>-1&&Ie.R==Ie.L&&(be=!0);break;default:be=!0;break}}if(!(!be&&!Te)){var Xe=new Date(1987,1,19),ft=0,tt=Object.create?Object.create(null):{},et=[];for(Pe=0;Pe<ce.FullPaths.length;++Pe)tt[ce.FullPaths[Pe]]=!0,ce.FileIndex[Pe].type!==0&&et.push([ce.FullPaths[Pe],ce.FileIndex[Pe]]);for(Pe=0;Pe<et.length;++Pe){var at=n(et[Pe][0]);Se=tt[at],Se||(et.push([at,{name:s(at).replace("/",""),type:1,clsid:xe,ct:Xe,mt:Xe,content:null}]),tt[at]=!0)}for(et.sort(function(Gt,Ot){return r(Gt[0],Ot[0])}),ce.FullPaths=[],ce.FileIndex=[],Pe=0;Pe<et.length;++Pe)ce.FullPaths[Pe]=et[Pe][0],ce.FileIndex[Pe]=et[Pe][1];for(Pe=0;Pe<et.length;++Pe){var Tt=ce.FileIndex[Pe],Ut=ce.FullPaths[Pe];if(Tt.name=s(Ut).replace("/",""),Tt.L=Tt.R=Tt.C=-(Tt.color=1),Tt.size=Tt.content?Tt.content.length:0,Tt.start=0,Tt.clsid=Tt.clsid||xe,Pe===0)Tt.C=et.length>1?1:-1,Tt.size=0,Tt.type=5;else if(Ut.slice(-1)=="/"){for(ft=Pe+1;ft<et.length&&n(ce.FullPaths[ft])!=Ut;++ft);for(Tt.C=ft>=et.length?-1:ft,ft=Pe+1;ft<et.length&&n(ce.FullPaths[ft])!=n(Ut);++ft);Tt.R=ft>=et.length?-1:ft,Tt.type=1}else n(ce.FullPaths[Pe+1]||"")==n(Ut)&&(Tt.R=Pe+1),Tt.type=2}}}function D(ce,Te){var be=Te||{};if(be.fileType=="mad")return Nn(ce,be);switch(E(ce),be.fileType){case"zip":return Yr(ce,be)}var Se=(function(Gt){for(var Ot=0,Pt=0,Ar=0;Ar<Gt.FileIndex.length;++Ar){var Xr=Gt.FileIndex[Ar];if(Xr.content){var Ur=Xr.content.length;Ur>0&&(Ur<4096?Ot+=Ur+63>>6:Pt+=Ur+511>>9)}}for(var kn=Gt.FullPaths.length+3>>2,Aa=Ot+7>>3,Na=Ot+127>>7,Qi=Aa+Pt+kn+Na,Fe=Qi+127>>7,zt=Fe<=109?0:Math.ceil((Fe-109)/127);Qi+Fe+zt+127>>7>Fe;)zt=++Fe<=109?0:Math.ceil((Fe-109)/127);var Qt=[1,zt,Fe,Na,kn,Pt,Ot,0];return Gt.FileIndex[0].size=Ot<<6,Qt[7]=(Gt.FileIndex[0].start=Qt[0]+Qt[1]+Qt[2]+Qt[3]+Qt[4]+Qt[5])+(Qt[6]+7>>3),Qt})(ce),Pe=_t(Se[7]<<9),Ie=0,Xe=0;{for(Ie=0;Ie<8;++Ie)Pe.write_shift(1,fe[Ie]);for(Ie=0;Ie<8;++Ie)Pe.write_shift(2,0);for(Pe.write_shift(2,62),Pe.write_shift(2,3),Pe.write_shift(2,65534),Pe.write_shift(2,9),Pe.write_shift(2,6),Ie=0;Ie<3;++Ie)Pe.write_shift(2,0);for(Pe.write_shift(4,0),Pe.write_shift(4,Se[2]),Pe.write_shift(4,Se[0]+Se[1]+Se[2]+Se[3]-1),Pe.write_shift(4,0),Pe.write_shift(4,4096),Pe.write_shift(4,Se[3]?Se[0]+Se[1]+Se[2]-1:V),Pe.write_shift(4,Se[3]),Pe.write_shift(-4,Se[1]?Se[0]-1:V),Pe.write_shift(4,Se[1]),Ie=0;Ie<109;++Ie)Pe.write_shift(-4,Ie<Se[2]?Se[1]+Ie:-1)}if(Se[1])for(Xe=0;Xe<Se[1];++Xe){for(;Ie<236+Xe*127;++Ie)Pe.write_shift(-4,Ie<Se[2]?Se[1]+Ie:-1);Pe.write_shift(-4,Xe===Se[1]-1?V:Xe+1)}var ft=function(Gt){for(Xe+=Gt;Ie<Xe-1;++Ie)Pe.write_shift(-4,Ie+1);Gt&&(++Ie,Pe.write_shift(-4,V))};for(Xe=Ie=0,Xe+=Se[1];Ie<Xe;++Ie)Pe.write_shift(-4,he.DIFSECT);for(Xe+=Se[2];Ie<Xe;++Ie)Pe.write_shift(-4,he.FATSECT);ft(Se[3]),ft(Se[4]);for(var tt=0,et=0,at=ce.FileIndex[0];tt<ce.FileIndex.length;++tt)at=ce.FileIndex[tt],at.content&&(et=at.content.length,!(et<4096)&&(at.start=Xe,ft(et+511>>9)));for(ft(Se[6]+7>>3);Pe.l&511;)Pe.write_shift(-4,he.ENDOFCHAIN);for(Xe=Ie=0,tt=0;tt<ce.FileIndex.length;++tt)at=ce.FileIndex[tt],at.content&&(et=at.content.length,!(!et||et>=4096)&&(at.start=Xe,ft(et+63>>6)));for(;Pe.l&511;)Pe.write_shift(-4,he.ENDOFCHAIN);for(Ie=0;Ie<Se[4]<<2;++Ie){var Tt=ce.FullPaths[Ie];if(!Tt||Tt.length===0){for(tt=0;tt<17;++tt)Pe.write_shift(4,0);for(tt=0;tt<3;++tt)Pe.write_shift(4,-1);for(tt=0;tt<12;++tt)Pe.write_shift(4,0);continue}at=ce.FileIndex[Ie],Ie===0&&(at.start=at.size?at.start-1:V);var Ut=Ie===0&&be.root||at.name;if(et=2*(Ut.length+1),Pe.write_shift(64,Ut,"utf16le"),Pe.write_shift(2,et),Pe.write_shift(1,at.type),Pe.write_shift(1,at.color),Pe.write_shift(-4,at.L),Pe.write_shift(-4,at.R),Pe.write_shift(-4,at.C),at.clsid)Pe.write_shift(16,at.clsid,"hex");else for(tt=0;tt<4;++tt)Pe.write_shift(4,0);Pe.write_shift(4,at.state||0),Pe.write_shift(4,0),Pe.write_shift(4,0),Pe.write_shift(4,0),Pe.write_shift(4,0),Pe.write_shift(4,at.start),Pe.write_shift(4,at.size),Pe.write_shift(4,0)}for(Ie=1;Ie<ce.FileIndex.length;++Ie)if(at=ce.FileIndex[Ie],at.size>=4096)if(Pe.l=at.start+1<<9,pn&&Buffer.isBuffer(at.content))at.content.copy(Pe,Pe.l,0,at.size),Pe.l+=at.size+511&-512;else{for(tt=0;tt<at.size;++tt)Pe.write_shift(1,at.content[tt]);for(;tt&511;++tt)Pe.write_shift(1,0)}for(Ie=1;Ie<ce.FileIndex.length;++Ie)if(at=ce.FileIndex[Ie],at.size>0&&at.size<4096)if(pn&&Buffer.isBuffer(at.content))at.content.copy(Pe,Pe.l,0,at.size),Pe.l+=at.size+63&-64;else{for(tt=0;tt<at.size;++tt)Pe.write_shift(1,at.content[tt]);for(;tt&63;++tt)Pe.write_shift(1,0)}if(pn)Pe.l=Pe.length;else for(;Pe.l<Pe.length;)Pe.write_shift(1,0);return Pe}function R(ce,Te){var be=ce.FullPaths.map(function(tt){return tt.toUpperCase()}),Se=be.map(function(tt){var et=tt.split("/");return et[et.length-(tt.slice(-1)=="/"?2:1)]}),Pe=!1;Te.charCodeAt(0)===47?(Pe=!0,Te=be[0].slice(0,-1)+Te):Pe=Te.indexOf("/")!==-1;var Ie=Te.toUpperCase(),Xe=Pe===!0?be.indexOf(Ie):Se.indexOf(Ie);if(Xe!==-1)return ce.FileIndex[Xe];var ft=!Ie.match(e2);for(Ie=Ie.replace(ol,""),ft&&(Ie=Ie.replace(e2,"!")),Xe=0;Xe<be.length;++Xe)if((ft?be[Xe].replace(e2,"!"):be[Xe]).replace(ol,"")==Ie||(ft?Se[Xe].replace(e2,"!"):Se[Xe]).replace(ol,"")==Ie)return ce.FileIndex[Xe];return null}var F=64,V=-2,Z="d0cf11e0a1b11ae1",fe=[208,207,17,224,161,177,26,225],xe="00000000000000000000000000000000",he={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:V,FREESECT:-1,HEADER_SIGNATURE:Z,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:xe,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ae(ce,Te,be){c();var Se=D(ce,be);l.writeFileSync(Te,Se)}function H(ce){for(var Te=new Array(ce.length),be=0;be<ce.length;++be)Te[be]=String.fromCharCode(ce[be]);return Te.join("")}function te(ce,Te){var be=D(ce,Te);switch(Te&&Te.type||"buffer"){case"file":return c(),l.writeFileSync(Te.filename,be),be;case"binary":return typeof be=="string"?be:H(be);case"base64":return cx(typeof be=="string"?be:H(be));case"buffer":if(pn)return Buffer.isBuffer(be)?be:ch(be);case"array":return typeof be=="string"?Ql(be):be}return be}var G;function P(ce){try{var Te=ce.InflateRaw,be=new Te;if(be._processChunk(new Uint8Array([3,0]),be._finishFlushFlag),be.bytesRead)G=ce;else throw new Error("zlib does not expose bytesRead")}catch(Se){console.error("cannot use native zlib: "+(Se.message||Se))}}function U(ce,Te){if(!G)return Sr(ce,Te);var be=G.InflateRaw,Se=new be,Pe=Se._processChunk(ce.slice(ce.l),Se._finishFlushFlag);return ce.l+=Se.bytesRead,Pe}function X(ce){return G?G.deflateRawSync(ce):lt(ce)}var J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ve=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ke(ce){var Te=(ce<<1|ce<<11)&139536|(ce<<5|ce<<15)&558144;return(Te>>16|Te>>8|Te)&255}for(var oe=typeof Uint8Array<"u",Ee=oe?new Uint8Array(256):[],Oe=0;Oe<256;++Oe)Ee[Oe]=ke(Oe);function ne(ce,Te){var be=Ee[ce&255];return Te<=8?be>>>8-Te:(be=be<<8|Ee[ce>>8&255],Te<=16?be>>>16-Te:(be=be<<8|Ee[ce>>16&255],be>>>24-Te))}function we(ce,Te){var be=Te&7,Se=Te>>>3;return(ce[Se]|(be<=6?0:ce[Se+1]<<8))>>>be&3}function Re(ce,Te){var be=Te&7,Se=Te>>>3;return(ce[Se]|(be<=5?0:ce[Se+1]<<8))>>>be&7}function pe(ce,Te){var be=Te&7,Se=Te>>>3;return(ce[Se]|(be<=4?0:ce[Se+1]<<8))>>>be&15}function Ke(ce,Te){var be=Te&7,Se=Te>>>3;return(ce[Se]|(be<=3?0:ce[Se+1]<<8))>>>be&31}function ze(ce,Te){var be=Te&7,Se=Te>>>3;return(ce[Se]|(be<=1?0:ce[Se+1]<<8))>>>be&127}function ot(ce,Te,be){var Se=Te&7,Pe=Te>>>3,Ie=(1<<be)-1,Xe=ce[Pe]>>>Se;return be<8-Se||(Xe|=ce[Pe+1]<<8-Se,be<16-Se)||(Xe|=ce[Pe+2]<<16-Se,be<24-Se)||(Xe|=ce[Pe+3]<<24-Se),Xe&Ie}function Be(ce,Te,be){var Se=Te&7,Pe=Te>>>3;return Se<=5?ce[Pe]|=(be&7)<<Se:(ce[Pe]|=be<<Se&255,ce[Pe+1]=(be&7)>>8-Se),Te+3}function He(ce,Te,be){var Se=Te&7,Pe=Te>>>3;return be=(be&1)<<Se,ce[Pe]|=be,Te+1}function ut(ce,Te,be){var Se=Te&7,Pe=Te>>>3;return be<<=Se,ce[Pe]|=be&255,be>>>=8,ce[Pe+1]=be,Te+8}function Ct(ce,Te,be){var Se=Te&7,Pe=Te>>>3;return be<<=Se,ce[Pe]|=be&255,be>>>=8,ce[Pe+1]=be&255,ce[Pe+2]=be>>>8,Te+16}function Et(ce,Te){var be=ce.length,Se=2*be>Te?2*be:Te+5,Pe=0;if(be>=Te)return ce;if(pn){var Ie=YN(Se);if(ce.copy)ce.copy(Ie);else for(;Pe<ce.length;++Pe)Ie[Pe]=ce[Pe];return Ie}else if(oe){var Xe=new Uint8Array(Se);if(Xe.set)Xe.set(ce);else for(;Pe<be;++Pe)Xe[Pe]=ce[Pe];return Xe}return ce.length=Se,ce}function Le(ce){for(var Te=new Array(ce),be=0;be<ce;++be)Te[be]=0;return Te}function Ye(ce,Te,be){var Se=1,Pe=0,Ie=0,Xe=0,ft=0,tt=ce.length,et=oe?new Uint16Array(32):Le(32);for(Ie=0;Ie<32;++Ie)et[Ie]=0;for(Ie=tt;Ie<be;++Ie)ce[Ie]=0;tt=ce.length;var at=oe?new Uint16Array(tt):Le(tt);for(Ie=0;Ie<tt;++Ie)et[Pe=ce[Ie]]++,Se<Pe&&(Se=Pe),at[Ie]=0;for(et[0]=0,Ie=1;Ie<=Se;++Ie)et[Ie+16]=ft=ft+et[Ie-1]<<1;for(Ie=0;Ie<tt;++Ie)ft=ce[Ie],ft!=0&&(at[Ie]=et[ft+16]++);var Tt=0;for(Ie=0;Ie<tt;++Ie)if(Tt=ce[Ie],Tt!=0)for(ft=ne(at[Ie],Se)>>Se-Tt,Xe=(1<<Se+4-Tt)-1;Xe>=0;--Xe)Te[ft|Xe<<Tt]=Tt&15|Ie<<4;return Se}var Qe=oe?new Uint16Array(512):Le(512),le=oe?new Uint16Array(32):Le(32);if(!oe){for(var je=0;je<512;++je)Qe[je]=0;for(je=0;je<32;++je)le[je]=0}(function(){for(var ce=[],Te=0;Te<32;Te++)ce.push(5);Ye(ce,le,32);var be=[];for(Te=0;Te<=143;Te++)be.push(8);for(;Te<=255;Te++)be.push(9);for(;Te<=279;Te++)be.push(7);for(;Te<=287;Te++)be.push(8);Ye(be,Qe,288)})();var We=(function(){for(var Te=oe?new Uint8Array(32768):[],be=0,Se=0;be<ve.length-1;++be)for(;Se<ve[be+1];++Se)Te[Se]=be;for(;Se<32768;++Se)Te[Se]=29;var Pe=oe?new Uint8Array(259):[];for(be=0,Se=0;be<ie.length-1;++be)for(;Se<ie[be+1];++Se)Pe[Se]=be;function Ie(ft,tt){for(var et=0;et<ft.length;){var at=Math.min(65535,ft.length-et),Tt=et+at==ft.length;for(tt.write_shift(1,+Tt),tt.write_shift(2,at),tt.write_shift(2,~at&65535);at-- >0;)tt[tt.l++]=ft[et++]}return tt.l}function Xe(ft,tt){for(var et=0,at=0,Tt=oe?new Uint16Array(32768):[];at<ft.length;){var Ut=Math.min(65535,ft.length-at);if(Ut<10){for(et=Be(tt,et,+(at+Ut==ft.length)),et&7&&(et+=8-(et&7)),tt.l=et/8|0,tt.write_shift(2,Ut),tt.write_shift(2,~Ut&65535);Ut-- >0;)tt[tt.l++]=ft[at++];et=tt.l*8;continue}et=Be(tt,et,+(at+Ut==ft.length)+2);for(var Gt=0;Ut-- >0;){var Ot=ft[at];Gt=(Gt<<5^Ot)&32767;var Pt=-1,Ar=0;if((Pt=Tt[Gt])&&(Pt|=at&-32768,Pt>at&&(Pt-=32768),Pt<at))for(;ft[Pt+Ar]==ft[at+Ar]&&Ar<250;)++Ar;if(Ar>2){Ot=Pe[Ar],Ot<=22?et=ut(tt,et,Ee[Ot+1]>>1)-1:(ut(tt,et,3),et+=5,ut(tt,et,Ee[Ot-23]>>5),et+=3);var Xr=Ot<8?0:Ot-4>>2;Xr>0&&(Ct(tt,et,Ar-ie[Ot]),et+=Xr),Ot=Te[at-Pt],et=ut(tt,et,Ee[Ot]>>3),et-=3;var Ur=Ot<4?0:Ot-2>>1;Ur>0&&(Ct(tt,et,at-Pt-ve[Ot]),et+=Ur);for(var kn=0;kn<Ar;++kn)Tt[Gt]=at&32767,Gt=(Gt<<5^ft[at])&32767,++at;Ut-=Ar-1}else Ot<=143?Ot=Ot+48:et=He(tt,et,1),et=ut(tt,et,Ee[Ot]),Tt[Gt]=at&32767,++at}et=ut(tt,et,0)-1}return tt.l=(et+7)/8|0,tt.l}return function(tt,et){return tt.length<8?Ie(tt,et):Xe(tt,et)}})();function lt(ce){var Te=_t(50+Math.floor(ce.length*1.1)),be=We(ce,Te);return Te.slice(0,be)}var yt=oe?new Uint16Array(32768):Le(32768),$t=oe?new Uint16Array(32768):Le(32768),Xt=oe?new Uint16Array(128):Le(128),At=1,Vt=1;function Or(ce,Te){var be=Ke(ce,Te)+257;Te+=5;var Se=Ke(ce,Te)+1;Te+=5;var Pe=pe(ce,Te)+4;Te+=4;for(var Ie=0,Xe=oe?new Uint8Array(19):Le(19),ft=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],tt=1,et=oe?new Uint8Array(8):Le(8),at=oe?new Uint8Array(8):Le(8),Tt=Xe.length,Ut=0;Ut<Pe;++Ut)Xe[J[Ut]]=Ie=Re(ce,Te),tt<Ie&&(tt=Ie),et[Ie]++,Te+=3;var Gt=0;for(et[0]=0,Ut=1;Ut<=tt;++Ut)at[Ut]=Gt=Gt+et[Ut-1]<<1;for(Ut=0;Ut<Tt;++Ut)(Gt=Xe[Ut])!=0&&(ft[Ut]=at[Gt]++);var Ot=0;for(Ut=0;Ut<Tt;++Ut)if(Ot=Xe[Ut],Ot!=0){Gt=Ee[ft[Ut]]>>8-Ot;for(var Pt=(1<<7-Ot)-1;Pt>=0;--Pt)Xt[Gt|Pt<<Ot]=Ot&7|Ut<<3}var Ar=[];for(tt=1;Ar.length<be+Se;)switch(Gt=Xt[ze(ce,Te)],Te+=Gt&7,Gt>>>=3){case 16:for(Ie=3+we(ce,Te),Te+=2,Gt=Ar[Ar.length-1];Ie-- >0;)Ar.push(Gt);break;case 17:for(Ie=3+Re(ce,Te),Te+=3;Ie-- >0;)Ar.push(0);break;case 18:for(Ie=11+ze(ce,Te),Te+=7;Ie-- >0;)Ar.push(0);break;default:Ar.push(Gt),tt<Gt&&(tt=Gt);break}var Xr=Ar.slice(0,be),Ur=Ar.slice(be);for(Ut=be;Ut<286;++Ut)Xr[Ut]=0;for(Ut=Se;Ut<30;++Ut)Ur[Ut]=0;return At=Ye(Xr,yt,286),Vt=Ye(Ur,$t,30),Te}function rr(ce,Te){if(ce[0]==3&&!(ce[1]&3))return[Sf(Te),2];for(var be=0,Se=0,Pe=YN(Te||1<<18),Ie=0,Xe=Pe.length>>>0,ft=0,tt=0;(Se&1)==0;){if(Se=Re(ce,be),be+=3,Se>>>1)Se>>1==1?(ft=9,tt=5):(be=Or(ce,be),ft=At,tt=Vt);else{be&7&&(be+=8-(be&7));var et=ce[be>>>3]|ce[(be>>>3)+1]<<8;if(be+=32,et>0)for(!Te&&Xe<Ie+et&&(Pe=Et(Pe,Ie+et),Xe=Pe.length);et-- >0;)Pe[Ie++]=ce[be>>>3],be+=8;continue}for(;;){!Te&&Xe<Ie+32767&&(Pe=Et(Pe,Ie+32767),Xe=Pe.length);var at=ot(ce,be,ft),Tt=Se>>>1==1?Qe[at]:yt[at];if(be+=Tt&15,Tt>>>=4,(Tt>>>8&255)===0)Pe[Ie++]=Tt;else{if(Tt==256)break;Tt-=257;var Ut=Tt<8?0:Tt-4>>2;Ut>5&&(Ut=0);var Gt=Ie+ie[Tt];Ut>0&&(Gt+=ot(ce,be,Ut),be+=Ut),at=ot(ce,be,tt),Tt=Se>>>1==1?le[at]:$t[at],be+=Tt&15,Tt>>>=4;var Ot=Tt<4?0:Tt-2>>1,Pt=ve[Tt];for(Ot>0&&(Pt+=ot(ce,be,Ot),be+=Ot),!Te&&Xe<Gt&&(Pe=Et(Pe,Gt+100),Xe=Pe.length);Ie<Gt;)Pe[Ie]=Pe[Ie-Pt],++Ie}}}return Te?[Pe,be+7>>>3]:[Pe.slice(0,Ie),be+7>>>3]}function Sr(ce,Te){var be=ce.slice(ce.l||0),Se=rr(be,Te);return ce.l+=Se[1],Se[0]}function Cr(ce,Te){if(ce)typeof console<"u"&&console.error(Te);else throw new Error(Te)}function Bn(ce,Te){var be=ce;ho(be,0);var Se=[],Pe=[],Ie={FileIndex:Se,FullPaths:Pe};L(Ie,{root:Te.root});for(var Xe=be.length-4;(be[Xe]!=80||be[Xe+1]!=75||be[Xe+2]!=5||be[Xe+3]!=6)&&Xe>=0;)--Xe;be.l=Xe+4,be.l+=4;var ft=be.read_shift(2);be.l+=6;var tt=be.read_shift(4);for(be.l=tt,Xe=0;Xe<ft;++Xe){be.l+=20;var et=be.read_shift(4),at=be.read_shift(4),Tt=be.read_shift(2),Ut=be.read_shift(2),Gt=be.read_shift(2);be.l+=8;var Ot=be.read_shift(4),Pt=o(be.slice(be.l+Tt,be.l+Tt+Ut));be.l+=Tt+Ut+Gt;var Ar=be.l;be.l=Ot+4,bn(be,et,at,Ie,Pt),be.l=Ar}return Ie}function bn(ce,Te,be,Se,Pe){ce.l+=2;var Ie=ce.read_shift(2),Xe=ce.read_shift(2),ft=a(ce);if(Ie&8257)throw new Error("Unsupported ZIP encryption");for(var tt=ce.read_shift(4),et=ce.read_shift(4),at=ce.read_shift(4),Tt=ce.read_shift(2),Ut=ce.read_shift(2),Gt="",Ot=0;Ot<Tt;++Ot)Gt+=String.fromCharCode(ce[ce.l++]);if(Ut){var Pt=o(ce.slice(ce.l,ce.l+Ut));(Pt[21589]||{}).mt&&(ft=Pt[21589].mt),((Pe||{})[21589]||{}).mt&&(ft=Pe[21589].mt)}ce.l+=Ut;var Ar=ce.slice(ce.l,ce.l+et);switch(Xe){case 8:Ar=U(ce,at);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Xe)}var Xr=!1;Ie&8&&(tt=ce.read_shift(4),tt==134695760&&(tt=ce.read_shift(4),Xr=!0),et=ce.read_shift(4),at=ce.read_shift(4)),et!=Te&&Cr(Xr,"Bad compressed size: "+Te+" != "+et),at!=be&&Cr(Xr,"Bad uncompressed size: "+be+" != "+at),Gn(Se,Gt,Ar,{unsafe:!0,mt:ft})}function Yr(ce,Te){var be=Te||{},Se=[],Pe=[],Ie=_t(1),Xe=be.compression?8:0,ft=0,tt=0,et=0,at=0,Tt=0,Ut=ce.FullPaths[0],Gt=Ut,Ot=ce.FileIndex[0],Pt=[],Ar=0;for(tt=1;tt<ce.FullPaths.length;++tt)if(Gt=ce.FullPaths[tt].slice(Ut.length),Ot=ce.FileIndex[tt],!(!Ot.size||!Ot.content||Gt=="Sh33tJ5")){var Xr=at,Ur=_t(Gt.length);for(et=0;et<Gt.length;++et)Ur.write_shift(1,Gt.charCodeAt(et)&127);Ur=Ur.slice(0,Ur.l),Pt[Tt]=Nae.buf(Ot.content,0);var kn=Ot.content;Xe==8&&(kn=X(kn)),Ie=_t(30),Ie.write_shift(4,67324752),Ie.write_shift(2,20),Ie.write_shift(2,ft),Ie.write_shift(2,Xe),Ot.mt?i(Ie,Ot.mt):Ie.write_shift(4,0),Ie.write_shift(-4,Pt[Tt]),Ie.write_shift(4,kn.length),Ie.write_shift(4,Ot.content.length),Ie.write_shift(2,Ur.length),Ie.write_shift(2,0),at+=Ie.length,Se.push(Ie),at+=Ur.length,Se.push(Ur),at+=kn.length,Se.push(kn),Ie=_t(46),Ie.write_shift(4,33639248),Ie.write_shift(2,0),Ie.write_shift(2,20),Ie.write_shift(2,ft),Ie.write_shift(2,Xe),Ie.write_shift(4,0),Ie.write_shift(-4,Pt[Tt]),Ie.write_shift(4,kn.length),Ie.write_shift(4,Ot.content.length),Ie.write_shift(2,Ur.length),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(4,0),Ie.write_shift(4,Xr),Ar+=Ie.l,Pe.push(Ie),Ar+=Ur.length,Pe.push(Ur),++Tt}return Ie=_t(22),Ie.write_shift(4,101010256),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,Tt),Ie.write_shift(2,Tt),Ie.write_shift(4,Ar),Ie.write_shift(4,at),Ie.write_shift(2,0),qa([qa(Se),qa(Pe),Ie])}var hr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Jr(ce,Te){if(ce.ctype)return ce.ctype;var be=ce.name||"",Se=be.match(/\.([^\.]+)$/);return Se&&hr[Se[1]]||Te&&(Se=(be=Te).match(/[\.\\]([^\.\\])+$/),Se&&hr[Se[1]])?hr[Se[1]]:"application/octet-stream"}function ha(ce){for(var Te=cx(ce),be=[],Se=0;Se<Te.length;Se+=76)be.push(Te.slice(Se,Se+76));return be.join(`\r
`)+`\r
`}function ms(ce){var Te=ce.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(et){var at=et.charCodeAt(0).toString(16).toUpperCase();return"="+(at.length==1?"0"+at:at)});Te=Te.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Te.charAt(0)==`
`&&(Te="=0D"+Te.slice(1)),Te=Te.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var be=[],Se=Te.split(`\r
`),Pe=0;Pe<Se.length;++Pe){var Ie=Se[Pe];if(Ie.length==0){be.push("");continue}for(var Xe=0;Xe<Ie.length;){var ft=76,tt=Ie.slice(Xe,Xe+ft);tt.charAt(ft-1)=="="?ft--:tt.charAt(ft-2)=="="?ft-=2:tt.charAt(ft-3)=="="&&(ft-=3),tt=Ie.slice(Xe,Xe+ft),Xe+=ft,Xe<Ie.length&&(tt+="="),be.push(tt)}}return be.join(`\r
`)}function Pi(ce){for(var Te=[],be=0;be<ce.length;++be){for(var Se=ce[be];be<=ce.length&&Se.charAt(Se.length-1)=="=";)Se=Se.slice(0,Se.length-1)+ce[++be];Te.push(Se)}for(var Pe=0;Pe<Te.length;++Pe)Te[Pe]=Te[Pe].replace(/[=][0-9A-Fa-f]{2}/g,function(Ie){return String.fromCharCode(parseInt(Ie.slice(1),16))});return Ql(Te.join(`\r
`))}function gs(ce,Te,be){for(var Se="",Pe="",Ie="",Xe,ft=0;ft<10;++ft){var tt=Te[ft];if(!tt||tt.match(/^\s*$/))break;var et=tt.match(/^(.*?):\s*([^\s].*)$/);if(et)switch(et[1].toLowerCase()){case"content-location":Se=et[2].trim();break;case"content-type":Ie=et[2].trim();break;case"content-transfer-encoding":Pe=et[2].trim();break}}switch(++ft,Pe.toLowerCase()){case"base64":Xe=Ql(ic(Te.slice(ft).join("")));break;case"quoted-printable":Xe=Pi(Te.slice(ft));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Pe)}var at=Gn(ce,Se.slice(be.length),Xe,{unsafe:!0});Ie&&(at.ctype=Ie)}function vr(ce,Te){if(H(ce.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var be=Te&&Te.root||"",Se=(pn&&Buffer.isBuffer(ce)?ce.toString("binary"):H(ce)).split(`\r
`),Pe=0,Ie="";for(Pe=0;Pe<Se.length;++Pe)if(Ie=Se[Pe],!!/^Content-Location:/i.test(Ie)&&(Ie=Ie.slice(Ie.indexOf("file")),be||(be=Ie.slice(0,Ie.lastIndexOf("/")+1)),Ie.slice(0,be.length)!=be))for(;be.length>0&&(be=be.slice(0,be.length-1),be=be.slice(0,be.lastIndexOf("/")+1),Ie.slice(0,be.length)!=be););var Xe=(Se[1]||"").match(/boundary="(.*?)"/);if(!Xe)throw new Error("MAD cannot find boundary");var ft="--"+(Xe[1]||""),tt=[],et=[],at={FileIndex:tt,FullPaths:et};L(at);var Tt,Ut=0;for(Pe=0;Pe<Se.length;++Pe){var Gt=Se[Pe];Gt!==ft&&Gt!==ft+"--"||(Ut++&&gs(at,Se.slice(Tt,Pe),be),Tt=Pe)}return at}function Nn(ce,Te){var be=Te||{},Se=be.boundary||"SheetJS";Se="------="+Se;for(var Pe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Se.slice(2)+'"',"","",""],Ie=ce.FullPaths[0],Xe=Ie,ft=ce.FileIndex[0],tt=1;tt<ce.FullPaths.length;++tt)if(Xe=ce.FullPaths[tt].slice(Ie.length),ft=ce.FileIndex[tt],!(!ft.size||!ft.content||Xe=="Sh33tJ5")){Xe=Xe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ar){return"_x"+Ar.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ar){return"_u"+Ar.charCodeAt(0).toString(16)+"_"});for(var et=ft.content,at=pn&&Buffer.isBuffer(et)?et.toString("binary"):H(et),Tt=0,Ut=Math.min(1024,at.length),Gt=0,Ot=0;Ot<=Ut;++Ot)(Gt=at.charCodeAt(Ot))>=32&&Gt<128&&++Tt;var Pt=Tt>=Ut*4/5;Pe.push(Se),Pe.push("Content-Location: "+(be.root||"file:///C:/SheetJS/")+Xe),Pe.push("Content-Transfer-Encoding: "+(Pt?"quoted-printable":"base64")),Pe.push("Content-Type: "+Jr(ft,Xe)),Pe.push(""),Pe.push(Pt?ms(at):ha(at))}return Pe.push(Se+`--\r
`),Pe.join(`\r
`)}function Ri(ce){var Te={};return L(Te,ce),Te}function Gn(ce,Te,be,Se){var Pe=Se&&Se.unsafe;Pe||L(ce);var Ie=!Pe&&Ir.find(ce,Te);if(!Ie){var Xe=ce.FullPaths[0];Te.slice(0,Xe.length)==Xe?Xe=Te:(Xe.slice(-1)!="/"&&(Xe+="/"),Xe=(Xe+Te).replace("//","/")),Ie={name:s(Te),type:2},ce.FileIndex.push(Ie),ce.FullPaths.push(Xe),Pe||Ir.utils.cfb_gc(ce)}return Ie.content=be,Ie.size=be?be.length:0,Se&&(Se.CLSID&&(Ie.clsid=Se.CLSID),Se.mt&&(Ie.mt=Se.mt),Se.ct&&(Ie.ct=Se.ct)),Ie}function ln(ce,Te){L(ce);var be=Ir.find(ce,Te);if(be){for(var Se=0;Se<ce.FileIndex.length;++Se)if(ce.FileIndex[Se]==be)return ce.FileIndex.splice(Se,1),ce.FullPaths.splice(Se,1),!0}return!1}function Ln(ce,Te,be){L(ce);var Se=Ir.find(ce,Te);if(Se){for(var Pe=0;Pe<ce.FileIndex.length;++Pe)if(ce.FileIndex[Pe]==Se)return ce.FileIndex[Pe].name=s(be),ce.FullPaths[Pe]=be,!0}return!1}function ss(ce){E(ce,!0)}return e.find=R,e.read=W,e.parse=d,e.write=te,e.writeFile=ae,e.utils={cfb_new:Ri,cfb_add:Gn,cfb_del:ln,cfb_mov:Ln,cfb_gc:ss,ReadShift:S2,CheckField:KB,prep_blob:ho,bconcat:qa,use_zlib:P,_deflateRaw:lt,_inflateRaw:Sr,consts:he},e})();function Tae(t){return typeof t=="string"?B_(t):Array.isArray(t)?tae(t):t}function sy(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=B_(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Ku(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var s=new Blob([Tae(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,t);if(typeof saveAs<"u")return saveAs(s,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:t,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=t,a.href=i,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=zf(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function Iae(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Ti(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function nT(t,e){for(var r=[],n=Ti(t),s=0;s!==n.length;++s)r[t[n[s]][e]]==null&&(r[t[n[s]][e]]=n[s]);return r}function U_(t){for(var e=[],r=Ti(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function z_(t){for(var e=[],r=Ti(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function Pae(t){for(var e=[],r=Ti(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var S5=new Date(1899,11,30,0,0,0);function Ea(t,e){var r=t.getTime(),n=S5.getTime()+(t.getTimezoneOffset()-S5.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var AB=new Date,Rae=S5.getTime()+(AB.getTimezoneOffset()-S5.getTimezoneOffset())*6e4,sT=AB.getTimezoneOffset();function $_(t){var e=new Date;return e.setTime(t*24*60*60*1e3+Rae),e.getTimezoneOffset()!==sT&&e.setTime(e.getTime()+(e.getTimezoneOffset()-sT)*6e4),e}function Lae(t){var e=0,r=0,n=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(s[i],10)}return e}var iT=new Date("2017-02-19T19:06:09.000Z"),NB=isNaN(iT.getFullYear())?new Date("2/19/17"):iT,jae=NB.getFullYear()==2017;function zs(t,e){var r=new Date(t);if(jae)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(NB.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function dp(t,e){if(pn&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Ku(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Ku(mB(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Ku(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Ku(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function $s(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=$s(t[r]));return e}function Si(t,e){for(var r="";r.length<e;)r+=t;return r}function fu(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(e=Number(n)))?e/r:e}var Fae=["january","february","march","april","may","june","july","august","september","october","november","december"];function S1(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),i=e.getDate();if(isNaN(i))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&Fae.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var Dae=(function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(t||typeof n=="string")return r.split(n);for(var i=r.split(n),a=[i[0]],o=1;o<i.length;++o)a.push(s),a.push(i[o]);return a}})();function TB(t){return t?t.content&&t.type?dp(t.content,!0):t.data?Zg(t.data):t.asNodeBuffer&&pn?Zg(t.asNodeBuffer().toString("binary")):t.asBinary?Zg(t.asBinary()):t._data&&t._data.getContent?Zg(dp(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function IB(t){if(!t)return null;if(t.data)return GN(t.data);if(t.asNodeBuffer&&pn)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?GN(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function Oae(t){return t&&t.name.slice(-4)===".bin"?IB(t):TB(t)}function Cc(t,e){for(var r=t.FullPaths||Ti(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var a=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==a||s==a)return t.files?t.files[r[i]]:t.FileIndex[i]}return null}function e7(t,e){var r=Cc(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function aa(t,e,r){if(!r)return Oae(e7(t,e));if(!e)return null;try{return aa(t,e)}catch{return null}}function Jl(t,e,r){if(!r)return TB(e7(t,e));if(!e)return null;try{return Jl(t,e)}catch{return null}}function Mae(t,e,r){return IB(e7(t,e))}function aT(t){for(var e=t.FullPaths||Ti(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function an(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return pn?n=ch(r):n=rae(r),Ir.utils.cfb_add(t,e,n)}Ir.utils.cfb_add(t,e,r)}else t.file(e,r)}function t7(){return Ir.utils.cfb_new()}function PB(t,e){switch(e.type){case"base64":return Ir.read(t,{type:"base64"});case"binary":return Ir.read(t,{type:"binary"});case"buffer":case"array":return Ir.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function t2(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var Xi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Bae=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,oT=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Vae=/<[^>]*>/g,Go=Xi.match(oT)?oT:Vae,Uae=/<\w*:/,zae=/<(\/?)\w+:/;function qr(t,e,r){for(var n={},s=0,i=0;s!==t.length&&!((i=t.charCodeAt(s))===32||i===10||i===13);++s);if(e||(n[0]=t.slice(0,s)),s===t.length)return n;var a=t.match(Bae),o=0,l="",c=0,d="",p="",g=1;if(a)for(c=0;c!=a.length;++c){for(p=a[c],i=0;i!=p.length&&p.charCodeAt(i)!==61;++i);for(d=p.slice(0,i).trim();p.charCodeAt(i+1)==32;)++i;for(g=(s=p.charCodeAt(i+1))==34||s==39?1:0,l=p.slice(i+1+g,p.length-g),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var m=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[m]&&d.slice(o-3,o)=="ext")continue;n[m]=l,n[m.toLowerCase()]=l}}return n}function dd(t){return t.replace(zae,"<$1")}var RB={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},r7=U_(RB),Hn=(function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(t,function(o,l){return RB[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var a=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,a)+r(s.slice(a+3))}})(),n7=/[&<>'"]/g,$ae=/[\u0000-\u0008\u000b-\u001f]/g;function ps(t){var e=t+"";return e.replace(n7,function(r){return r7[r]}).replace($ae,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function lT(t){return ps(t).replace(/ /g,"_x0020_")}var LB=/[\u0000-\u001f]/g;function s7(t){var e=t+"";return e.replace(n7,function(r){return r7[r]}).replace(/\n/g,"<br/>").replace(LB,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function qae(t){var e=t+"";return e.replace(n7,function(r){return r7[r]}).replace(LB,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var cT=(function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}})();function Hae(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ms(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function D3(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=s&63,e+=String.fromCharCode(a);continue}if(i=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function uT(t){var e=Sf(2*t.length),r,n,s=1,i=0,a=0,o;for(n=0;n<t.length;n+=s)s=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[i++]=a&255,e[i++]=a>>>8,a=0),e[i++]=r%256,e[i++]=r>>>8;return e.slice(0,i).toString("ucs2")}function dT(t){return ch(t,"binary").toString("utf8")}var _v="foo bar baz",bs=pn&&(dT(_v)==D3(_v)&&dT||uT(_v)==D3(_v)&&uT)||D3,Ku=pn?function(t){return ch(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},dx=(function(){var t={};return function(r,n){var s=r+"|"+(n||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),jB=(function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}})(),Wae=(function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),Gae=/<\/?(?:vt:)?variant>/g,Kae=/<(?:vt:)([^>]*)>([\s\S]*)</;function hT(t,e){var r=qr(t),n=t.match(Wae(r.baseType))||[],s=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var a=i.replace(Gae,"").match(Kae);a&&s.push({v:bs(a[2]),t:a[1]})}),s}var FB=/(^\s|\s$|\n)/;function po(t,e){return"<"+t+(e.match(FB)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function hx(t){return Ti(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Ht(t,e,r){return"<"+t+(r!=null?hx(r):"")+(e!=null?(e.match(FB)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function W6(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function Yae(t,e){switch(typeof t){case"string":var r=Ht("vt:lpwstr",ps(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Ht((t|0)==t?"vt:i4":"vt:r8",ps(String(t)));case"boolean":return Ht("vt:bool",t?"true":"false")}if(t instanceof Date)return Ht("vt:filetime",W6(t));throw new Error("Unable to serialize "+t)}function i7(t){if(pn&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return bs(zf(QS(t)));throw new Error("Bad input format: expected Buffer or string")}var fx=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,ka={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Tp=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Yl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Xae(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,i=5;i>=0;--i)s=s*256+t[e+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function Qae(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,i=0,a=n?-e:e;isFinite(a)?a==0?s=i=0:(s=Math.floor(Math.log(a)/Math.LN2),i=a*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(e)?26985:0);for(var o=0;o<=5;++o,i/=256)t[r+o]=i&255;t[r+6]=(s&15)<<4|i&15,t[r+7]=s>>4|n}var fT=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,i=t[0][n].length;s<i;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},pT=pn?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:ch(e)})):fT(t)}:fT,mT=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(Bd(t,s)));return n.join("").replace(ol,"")},a7=pn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(ol,""):mT(t,e,r)}:mT,gT=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},DB=pn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):gT(t,e,r)}:gT,xT=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(Cm(t,s)));return n.join("")},iy=pn?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):xT(e,r,n)}:xT,OB=function(t,e){var r=Xl(t,e);return r>0?iy(t,e+4,e+4+r-1):""},MB=OB,BB=function(t,e){var r=Xl(t,e);return r>0?iy(t,e+4,e+4+r-1):""},VB=BB,UB=function(t,e){var r=2*Xl(t,e);return r>0?iy(t,e+4,e+4+r-1):""},zB=UB,$B=function(e,r){var n=Xl(e,r);return n>0?a7(e,r+4,r+4+n):""},qB=$B,HB=function(t,e){var r=Xl(t,e);return r>0?iy(t,e+4,e+4+r):""},WB=HB,GB=function(t,e){return Xae(t,e)},E5=GB,o7=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};pn&&(MB=function(e,r){if(!Buffer.isBuffer(e))return OB(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},VB=function(e,r){if(!Buffer.isBuffer(e))return BB(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},zB=function(e,r){if(!Buffer.isBuffer(e))return UB(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},qB=function(e,r){if(!Buffer.isBuffer(e))return $B(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},WB=function(e,r){if(!Buffer.isBuffer(e))return HB(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},E5=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):GB(e,r)},o7=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Cm=function(t,e){return t[e]},Bd=function(t,e){return t[e+1]*256+t[e]},Jae=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},Xl=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},C0=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},Zae=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function S2(t,e){var r="",n,s,i=[],a,o,l,c;switch(e){case"dbcs":if(c=this.l,pn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(Bd(this,c)),c+=2;t*=2;break;case"utf8":r=iy(this,this.l,this.l+t);break;case"utf16le":t*=2,r=a7(this,this.l,this.l+t);break;case"wstr":return S2.call(this,t,"dbcs");case"lpstr-ansi":r=MB(this,this.l),t=4+Xl(this,this.l);break;case"lpstr-cp":r=VB(this,this.l),t=4+Xl(this,this.l);break;case"lpwstr":r=zB(this,this.l),t=4+2*Xl(this,this.l);break;case"lpp4":t=4+Xl(this,this.l),r=qB(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Xl(this,this.l),r=WB(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=Cm(this,this.l+t++))!==0;)i.push(wv(a));r=i.join("");break;case"_wstr":for(t=0,r="";(a=Bd(this,this.l+t))!==0;)i.push(wv(a)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Cm(this,c),this.l=c+1,o=S2.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(wv(Bd(this,c))),c+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Cm(this,c),this.l=c+1,o=S2.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(wv(Cm(this,c))),c+=1}r=i.join("");break;default:switch(t){case 1:return n=Cm(this,this.l),this.l++,n;case 2:return n=(e==="i"?Jae:Bd)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?C0:Zae)(this,this.l),this.l+=4,n):(s=Xl(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=E5(this,this.l):s=E5([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=DB(this,this.l,t);break}}return this.l+=t,r}var eoe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},toe=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},roe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function noe(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)roe(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var a=e.charCodeAt(s);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,eoe(this,e,this.l);break;case 8:if(n=8,r==="f"){Qae(this,e,this.l);break}case 16:break;case-4:n=4,toe(this,e,this.l);break}return this.l+=n,this}function KB(t,e){var r=DB(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function ho(t,e){t.l=e,t.read_shift=S2,t.chk=KB,t.write_shift=noe}function Wo(t,e){t.l+=e}function _t(t){var e=Sf(t);return ho(e,0),e}function uh(t,e,r){if(t){var n,s,i;ho(t,t.l||0);for(var a=t.length,o=0,l=0;t.l<a;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var c=vx[o]||vx[65535];for(n=t.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=t.read_shift(1))&127)<<7*s;l=t.l+i;var d=c.f&&c.f(t,i,r);if(t.l=l,e(d,c,o))return}}}function Cl(){var t=[],e=pn?256:2048,r=function(c){var d=_t(c);return ho(d,0),d},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},i=function(c){return n&&c<n.length-n.l?n:(s(),n=r(Math.max(c+1,e)))},a=function(){return s(),qa(t)},o=function(c){s(),n=c,n.l==null&&(n.l=n.length),i(e)};return{next:i,push:o,end:a,_bufs:t}}function It(t,e,r,n){var s=+e,i;if(!isNaN(s)){n||(n=vx[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var a=t.next(i);s<=127?a.write_shift(1,s):(a.write_shift(1,(s&127)+128),a.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(n>=128)a.write_shift(1,(n&127)+128),n>>=7;else{a.write_shift(1,n);break}n>0&&o7(r)&&t.push(r)}}function E2(t,e,r){var n=$s(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function yT(t,e,r){var n=$s(t);return n.s=E2(n.s,e.s,r),n.e=E2(n.e,e.s,r),n}function C2(t,e){if(t.cRel&&t.c<0)for(t=$s(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=$s(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Vr(t);return!t.cRel&&t.cRel!=null&&(r=aoe(r)),!t.rRel&&t.rRel!=null&&(r=soe(r)),r}function O3(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+pi(t.s.c)+":"+(t.e.cRel?"":"$")+pi(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Gi(t.s.r)+":"+(t.e.rRel?"":"$")+Gi(t.e.r):C2(t.s,e.biff)+":"+C2(t.e,e.biff)}function l7(t){return parseInt(ioe(t),10)-1}function Gi(t){return""+(t+1)}function soe(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function ioe(t){return t.replace(/\$(\d+)$/,"$1")}function c7(t){for(var e=ooe(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function pi(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function aoe(t){return t.replace(/^([A-Z])/,"$$$1")}function ooe(t){return t.replace(/^\$([A-Z])/,"$1")}function loe(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function mi(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function Vr(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Al(t){var e=t.indexOf(":");return e==-1?{s:mi(t),e:mi(t)}:{s:mi(t.slice(0,e)),e:mi(t.slice(e+1))}}function nn(t,e){return typeof e>"u"||typeof e=="number"?nn(t.s,t.e):(typeof t!="string"&&(t=Vr(t)),typeof e!="string"&&(e=Vr(e)),t==e?t:t+":"+e)}function Wn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=t.length;for(r=0;n<i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===i||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function vT(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Fc(t.z,r?Ea(e):e)}catch{}try{return t.w=Fc((t.XF||{}).numFmtId||(r?14:0),r?Ea(e):e)}catch{return""+e}}function Zd(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?dh[t.v]||t.v:e==null?vT(t,t.v):vT(t,e))}function $f(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function YB(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,i=t||(s?[]:{}),a=0,o=0;if(i&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?mi(n.origin):n.origin;a=l.r,o=l.c}i["!ref"]||(i["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var d=Wn(i["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),a==-1&&(c.e.r=a=d.e.r+1)}for(var p=0;p!=e.length;++p)if(e[p]){if(!Array.isArray(e[p]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=e[p].length;++g)if(!(typeof e[p][g]>"u")){var m={v:e[p][g]},y=a+p,w=o+g;if(c.s.r>y&&(c.s.r=y),c.s.c>w&&(c.s.c=w),c.e.r<y&&(c.e.r=y),c.e.c<w&&(c.e.c=w),e[p][g]&&typeof e[p][g]=="object"&&!Array.isArray(e[p][g])&&!(e[p][g]instanceof Date))m=e[p][g];else if(Array.isArray(m.v)&&(m.f=e[p][g][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Dr[14],n.cellDates?(m.t="d",m.w=Fc(m.z,Ea(m.v))):(m.t="n",m.v=Ea(m.v),m.w=Fc(m.z,m.v))):m.t="s";if(s)i[y]||(i[y]=[]),i[y][w]&&i[y][w].z&&(m.z=i[y][w].z),i[y][w]=m;else{var _=Vr({c:w,r:y});i[_]&&i[_].z&&(m.z=i[_].z),i[_]=m}}}return c.s.c<1e7&&(i["!ref"]=nn(c)),i}function W1(t,e){return YB(null,t,e)}function coe(t){return t.read_shift(4,"i")}function pu(t,e){return e||(e=_t(4)),e.write_shift(4,t),e}function Ho(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Ha(t,e){var r=!1;return e==null&&(r=!0,e=_t(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function uoe(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function doe(t,e){return e||(e=_t(4)),e.write_shift(2,0),e.write_shift(2,0),e}function u7(t,e){var r=t.l,n=t.read_shift(1),s=Ho(t),i=[],a={t:s,h:s};if((n&1)!==0){for(var o=t.read_shift(4),l=0;l!=o;++l)i.push(uoe(t));a.r=i}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}function hoe(t,e){var r=!1;return e==null&&(r=!0,e=_t(15+4*t.t.length)),e.write_shift(1,0),Ha(t.t,e),r?e.slice(0,e.l):e}var foe=u7;function poe(t,e){var r=!1;return e==null&&(r=!0,e=_t(23+4*t.t.length)),e.write_shift(1,1),Ha(t.t,e),e.write_shift(4,1),doe({},e),r?e.slice(0,e.l):e}function Oc(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Ip(t,e){return e==null&&(e=_t(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Pp(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Rp(t,e){return e==null&&(e=_t(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var moe=Ho,XB=Ha;function d7(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function C5(t,e){var r=!1;return e==null&&(r=!0,e=_t(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var goe=Ho,G6=d7,h7=C5;function f7(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?E5([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):C0(e,0)>>2;return r?s/100:s}function QB(t,e){e==null&&(e=_t(4));var r=0,n=0,s=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?s:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function JB(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function xoe(t,e){return e||(e=_t(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Lp=JB,G1=xoe;function Uo(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function hp(t,e){return(e||_t(8)).write_shift(8,t,"f")}function yoe(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),i=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var c=z0[s];c&&(e.rgb=mx(c));break;case 2:e.rgb=mx([a,o,l]);break;case 3:e.theme=s;break}return i!=0&&(e.tint=i>0?i/32767:i/32768),e}function A5(t,e){if(e||(e=_t(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function voe(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function woe(t,e){e||(e=_t(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function ZB(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function _oe(t){return ZB(t,1)}function boe(t){return ZB(t,2)}var p7=2,vl=3,bv=11,wT=12,N5=19,kv=64,koe=65,Soe=71,Eoe=4108,Coe=4126,Va=80,eV=81,Aoe=[Va,eV],K6={1:{n:"CodePage",t:p7},2:{n:"Category",t:Va},3:{n:"PresentationFormat",t:Va},4:{n:"ByteCount",t:vl},5:{n:"LineCount",t:vl},6:{n:"ParagraphCount",t:vl},7:{n:"SlideCount",t:vl},8:{n:"NoteCount",t:vl},9:{n:"HiddenCount",t:vl},10:{n:"MultimediaClipCount",t:vl},11:{n:"ScaleCrop",t:bv},12:{n:"HeadingPairs",t:Eoe},13:{n:"TitlesOfParts",t:Coe},14:{n:"Manager",t:Va},15:{n:"Company",t:Va},16:{n:"LinksUpToDate",t:bv},17:{n:"CharacterCount",t:vl},19:{n:"SharedDoc",t:bv},22:{n:"HyperlinksChanged",t:bv},23:{n:"AppVersion",t:vl,p:"version"},24:{n:"DigSig",t:koe},26:{n:"ContentType",t:Va},27:{n:"ContentStatus",t:Va},28:{n:"Language",t:Va},29:{n:"Version",t:Va},255:{},2147483648:{n:"Locale",t:N5},2147483651:{n:"Behavior",t:N5},1919054434:{}},Y6={1:{n:"CodePage",t:p7},2:{n:"Title",t:Va},3:{n:"Subject",t:Va},4:{n:"Author",t:Va},5:{n:"Keywords",t:Va},6:{n:"Comments",t:Va},7:{n:"Template",t:Va},8:{n:"LastAuthor",t:Va},9:{n:"RevNumber",t:Va},10:{n:"EditTime",t:kv},11:{n:"LastPrinted",t:kv},12:{n:"CreatedDate",t:kv},13:{n:"ModifiedDate",t:kv},14:{n:"PageCount",t:vl},15:{n:"WordCount",t:vl},16:{n:"CharCount",t:vl},17:{n:"Thumbnail",t:Soe},18:{n:"Application",t:Va},19:{n:"DocSecurity",t:vl},255:{},2147483648:{n:"Locale",t:N5},2147483651:{n:"Behavior",t:N5},1919054434:{}},_T={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Noe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Toe(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var Ioe=Toe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),z0=$s(Ioe),dh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},tV={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},X6={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Sv={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function m7(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Poe(t){var e=m7();if(!t||!t.match)return e;var r={};if((t.match(Go)||[]).forEach(function(n){var s=qr(n);switch(s[0].replace(Uae,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":e[X6[s.ContentType]]!==void 0&&e[X6[s.ContentType]].push(s.PartName);break}}),e.xmlns!==ka.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function rV(t,e){var r=Pae(X6),n=[],s;n[n.length]=Xi,n[n.length]=Ht("Types",null,{xmlns:ka.CT,"xmlns:xsd":ka.xsd,"xmlns:xsi":ka.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Ht("Default",null,{Extension:l[0],ContentType:l[1]})}));var i=function(l){t[l]&&t[l].length>0&&(s=t[l][0],n[n.length]=Ht("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Sv[l][e.bookType]||Sv[l].xlsx}))},a=function(l){(t[l]||[]).forEach(function(c){n[n.length]=Ht("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:Sv[l][e.bookType]||Sv[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(c){n[n.length]=Ht("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:r[l][0]})})};return i("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var vn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function px(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function A2(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Go)||[]).forEach(function(s){var i=qr(s);if(i[0]==="<Relationship"){var a={};a.Type=i.Type,a.Target=i.Target,a.Id=i.Id,i.TargetMode&&(a.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:t2(i.Target,e);r[o]=a,n[i.Id]=a}}),r["!id"]=n,r}function Xm(t){var e=[Xi,Ht("Relationships",null,{xmlns:ka.RELS})];return Ti(t["!id"]).forEach(function(r){e[e.length]=Ht("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function ds(t,e,r,n,s,i){if(s||(s={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,s.Id="rId"+e,s.Type=n,s.Target=r,[vn.HLINK,vn.XPATH,vn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),t["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][s.Id]=s,t[("/"+s.Target).replace("//","/")]=s,e}var Roe="application/vnd.oasis.opendocument.spreadsheet";function Loe(t,e){for(var r=i7(t),n,s;n=fx.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=qr(n[0],!1),s.path=="/"&&s.type!==Roe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function joe(t){var e=[Xi];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function bT(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function Foe(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function Doe(t){var e=[Xi];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(bT(t[r][0],t[r][1])),e.push(Foe("",t[r][0]));return e.push(bT("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function nV(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+w5.version+"</meta:generator></office:meta></office:document-meta>"}var Rc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Ooe=(function(){for(var t=new Array(Rc.length),e=0;e<Rc.length;++e){var r=Rc[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t})();function sV(t){var e={};t=bs(t);for(var r=0;r<Rc.length;++r){var n=Rc[r],s=t.match(Ooe[r]);s!=null&&s.length>0&&(e[n[1]]=Hn(s[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=zs(e[n[1]]))}return e}function M3(t,e,r,n,s){s[t]!=null||e==null||e===""||(s[t]=e,e=ps(e),n[n.length]=r?Ht(t,e,r):po(t,e))}function iV(t,e){var r=e||{},n=[Xi,Ht("cp:coreProperties",null,{"xmlns:cp":ka.CORE_PROPS,"xmlns:dc":ka.dc,"xmlns:dcterms":ka.dcterms,"xmlns:dcmitype":ka.dcmitype,"xmlns:xsi":ka.xsi})],s={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&M3("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:W6(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),t.ModifiedDate!=null&&M3("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:W6(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var i=0;i!=Rc.length;++i){var a=Rc[i],o=r.Props&&r.Props[a[1]]!=null?r.Props[a[1]]:t?t[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&M3(a[0],o,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var $0=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],aV=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function oV(t,e,r,n){var s=[];if(typeof t=="string")s=hT(t,n);else for(var i=0;i<t.length;++i)s=s.concat(t[i].map(function(d){return{v:d}}));var a=typeof e=="string"?hT(e,n).map(function(d){return d.v}):e,o=0,l=0;if(a.length>0)for(var c=0;c!==s.length;c+=2){switch(l=+s[c+1].v,s[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=a.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=a.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=a.slice(o,o+l);break}o+=l}}function Moe(t,e,r){var n={};return e||(e={}),t=bs(t),$0.forEach(function(s){var i=(t.match(dx(s[0]))||[])[1];switch(s[2]){case"string":i&&(e[s[1]]=Hn(i));break;case"bool":e[s[1]]=i==="true";break;case"raw":var a=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));a&&a.length>0&&(n[s[1]]=a[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&oV(n.HeadingPairs,n.TitlesOfParts,e,r),e}function lV(t){var e=[],r=Ht;return t||(t={}),t.Application="SheetJS",e[e.length]=Xi,e[e.length]=Ht("Properties",null,{xmlns:ka.EXT_PROPS,"xmlns:vt":ka.vt}),$0.forEach(function(n){if(t[n[1]]!==void 0){var s;switch(n[2]){case"string":s=ps(String(t[n[1]]));break;case"bool":s=t[n[1]]?"true":"false";break}s!==void 0&&(e[e.length]=r(n[0],s))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+ps(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Boe=/<[^>]+>[^<]*/g;function Voe(t,e){var r={},n="",s=t.match(Boe);if(s)for(var i=0;i!=s.length;++i){var a=s[i],o=qr(a);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Hn(o.name);break;case"</property>":n=null;break;default:if(a.indexOf("<vt:")===0){var l=a.split(">"),c=l[0].slice(4),d=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=Hn(d);break;case"bool":r[n]=Ms(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=zs(d);break;case"cy":case"error":r[n]=Hn(d);break;default:if(c.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",a,c,l)}}else if(a.slice(0,2)!=="</"){if(e.WTF)throw new Error(a)}}}return r}function cV(t){var e=[Xi,Ht("Properties",null,{xmlns:ka.CUST_PROPS,"xmlns:vt":ka.vt})];if(!t)return e.join("");var r=1;return Ti(t).forEach(function(s){++r,e[e.length]=Ht("property",Yae(t[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ps(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Q6={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},B3;function Uoe(t,e,r){B3||(B3=U_(Q6)),e=B3[e]||e,t[e]=r}function zoe(t,e){var r=[];return Ti(Q6).map(function(n){for(var s=0;s<Rc.length;++s)if(Rc[s][1]==n)return Rc[s];for(s=0;s<$0.length;++s)if($0[s][1]==n)return $0[s];throw n}).forEach(function(n){if(t[n[1]]!=null){var s=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(po(Q6[n[1]]||n[1],s))}}),Ht("DocumentProperties",r.join(""),{xmlns:Yl.o})}function $oe(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return t&&Ti(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)){for(var a=0;a<Rc.length;++a)if(i==Rc[a][1])return;for(a=0;a<$0.length;++a)if(i==$0[a][1])return;for(a=0;a<r.length;++a)if(i==r[a])return;var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),s.push(Ht(lT(i),o,{"dt:dt":l}))}}),e&&Ti(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)&&!(t&&Object.prototype.hasOwnProperty.call(t,i))){var a=e[i],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),s.push(Ht(lT(i),a,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Yl.o+'">'+s.join("")+"</"+n+">"}function g7(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function qoe(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),s+=i);var a=_t(8);return a.write_shift(4,n),a.write_shift(4,s),a}function uV(t,e,r){var n=t.l,s=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return s}function dV(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function hV(t,e,r){return e===31?dV(t):uV(t,e,r)}function J6(t,e,r){return hV(t,e,r===!1?0:4)}function Hoe(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return hV(t,e,0)}function Woe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var s=t.l;r[n]=t.read_shift(0,"lpwstr").replace(ol,""),t.l-s&2&&(t.l+=2)}return r}function Goe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(ol,"");return r}function Koe(t){var e=t.l,r=T5(t,eV);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=T5(t,vl);return[r,n]}function Yoe(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(Koe(t));return r}function kT(t,e){for(var r=t.read_shift(4),n={},s=0;s!=r;++s){var i=t.read_shift(4),a=t.read_shift(4);n[i]=t.read_shift(a,e===1200?"utf16le":"utf8").replace(ol,"").replace(e2,"!"),e===1200&&a%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function fV(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function Xoe(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function T5(t,e,r){var n=t.read_shift(2),s,i=r||{};if(t.l+=2,e!==wT&&n!==e&&Aoe.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===wT?n:e){case 2:return s=t.read_shift(2,"i"),i.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return uV(t,n,4).replace(ol,"");case 31:return dV(t);case 64:return g7(t);case 65:return fV(t);case 71:return Xoe(t);case 80:return J6(t,n,!i.raw).replace(ol,"");case 81:return Hoe(t,n).replace(ol,"");case 4108:return Yoe(t);case 4126:case 4127:return n==4127?Woe(t):Goe(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function ST(t,e){var r=_t(4),n=_t(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=_t(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=qoe(e);break;case 31:case 80:for(n=_t(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return qa([r,n])}function ET(t,e){var r=t.l,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0,o=0,l=-1,c={};for(a=0;a!=s;++a){var d=t.read_shift(4),p=t.read_shift(4);i[a]=[d,p+r]}i.sort(function(T,I){return T[1]-I[1]});var g={};for(a=0;a!=s;++a){if(t.l!==i[a][1]){var m=!0;if(a>0&&e)switch(e[i[a-1][0]].t){case 2:t.l+2===i[a][1]&&(t.l+=2,m=!1);break;case 80:t.l<=i[a][1]&&(t.l=i[a][1],m=!1);break;case 4108:t.l<=i[a][1]&&(t.l=i[a][1],m=!1);break}if((!e||a==0)&&t.l<=i[a][1]&&(m=!1,t.l=i[a][1]),m)throw new Error("Read Error: Expected address "+i[a][1]+" at "+t.l+" :"+a)}if(e){var y=e[i[a][0]];if(g[y.n]=T5(t,y.t,{raw:!0}),y.p==="version"&&(g[y.n]=String(g[y.n]>>16)+"."+("0000"+String(g[y.n]&65535)).slice(-4)),y.n=="CodePage")switch(g[y.n]){case 0:g[y.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:au(o=g[y.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+g[y.n])}}else if(i[a][0]===1){if(o=g.CodePage=T5(t,p7),au(o),l!==-1){var w=t.l;t.l=i[l][1],c=kT(t,o),t.l=w}}else if(i[a][0]===0){if(o===0){l=a,t.l=i[a+1][1];continue}c=kT(t,o)}else{var _=c[i[a][0]],S;switch(t[t.l]){case 65:t.l+=4,S=fV(t);break;case 30:t.l+=4,S=J6(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,S=J6(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,S=t.read_shift(4,"i");break;case 19:t.l+=4,S=t.read_shift(4);break;case 5:t.l+=4,S=t.read_shift(8,"f");break;case 11:t.l+=4,S=Bi(t,4);break;case 64:t.l+=4,S=zs(g7(t));break;default:throw new Error("unparsed value: "+t[t.l])}g[_]=S}}return t.l=r+n,g}var pV=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Qoe(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function CT(t,e,r){var n=_t(8),s=[],i=[],a=8,o=0,l=_t(8),c=_t(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),i.push(l),s.push(c),a+=8+l.length,!e){c=_t(8),c.write_shift(4,0),s.unshift(c);var d=[_t(4)];for(d[0].write_shift(4,t.length),o=0;o<t.length;++o){var p=t[o][0];for(l=_t(8+2*(p.length+1)+(p.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,p.length+1),l.write_shift(0,p,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=qa(d),i.unshift(l),a+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(pV.indexOf(t[o][0])>-1||aV.indexOf(t[o][0])>-1)&&t[o][1]!=null){var g=t[o][1],m=0;if(e){m=+e[t[o][0]];var y=r[m];if(y.p=="version"&&typeof g=="string"){var w=g.split(".");g=(+w[0]<<16)+(+w[1]||0)}l=ST(y.t,g)}else{var _=Qoe(g);_==-1&&(_=31,g=String(g)),l=ST(_,g)}i.push(l),c=_t(8),c.write_shift(4,e?m:2+o),s.push(c),a+=8+l.length}var S=8*(i.length+1);for(o=0;o<i.length;++o)s[o].write_shift(4,S),S+=i[o].length;return n.write_shift(4,a),n.write_shift(4,i.length),qa([n].concat(s).concat(i))}function AT(t,e,r){var n=t.content;if(!n)return{};ho(n,0);var s,i,a,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),d=n.read_shift(16);if(d!==Ir.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(a=n.read_shift(16),l=n.read_shift(4));var p=ET(n,e),g={SystemIdentifier:c};for(var m in p)g[m]=p[m];if(g.FMTID=i,s===1)return g;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var y;try{y=ET(n,null)}catch{}for(m in y)g[m]=y[m];return g.FMTID=[i,a],g}function NT(t,e,r,n,s,i){var a=_t(s?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,Ir.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,s?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,s?68:48);var l=CT(t,r,n);if(o.push(l),s){var c=CT(s,null,null);a.write_shift(16,i,"hex"),a.write_shift(4,68+l.length),o.push(c)}return qa(o)}function $h(t,e){return t.read_shift(e),null}function Joe(t,e){e||(e=_t(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function Zoe(t,e,r){for(var n=[],s=t.l+e;t.l<s;)n.push(r(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return n}function Bi(t,e){return t.read_shift(e)===1}function sl(t,e){return e||(e=_t(2)),e.write_shift(2,+!!t),e}function oa(t){return t.read_shift(2,"u")}function Ac(t,e){return e||(e=_t(2)),e.write_shift(2,t),e}function mV(t,e){return Zoe(t,e,oa)}function ele(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function gV(t,e,r){return r||(r=_t(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function ay(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var a=n?t.read_shift(n,s):"";return a}function tle(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,s=r&8,i=1+(r&1),a=0,o,l={};s&&(a=t.read_shift(2)),n&&(o=t.read_shift(4));var c=i==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,c);return s&&(t.l+=4*a),n&&(t.l+=o),l.t=d,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function rle(t){var e=t.t||"",r=_t(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=_t(2*e.length);n.write_shift(2*e.length,e,"utf16le");var s=[r,n];return qa(s)}function fp(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function oy(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):fp(t,n,r)}function jp(t,e,r){if(r.biff>5)return oy(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function xV(t,e,r){return r||(r=_t(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function nle(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function sle(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var s=t.read_shift((n?e-24:e)>>1,"utf16le").replace(ol,"");return n&&(t.l+=24),s}function ile(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=t.read_shift(i>>1,"utf16le").replace(ol,"");return r+a}function ale(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return sle(t);case"0303000000000000c000000000000046":return ile(t);default:throw new Error("Unsupported Moniker "+r)}}function Ev(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(ol,""):"";return r}function TT(t,e){e||(e=_t(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function ole(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=t.read_shift(2);t.l+=2;var i,a,o,l,c="",d,p;s&16&&(i=Ev(t,r-t.l)),s&128&&(a=Ev(t,r-t.l)),(s&257)===257&&(o=Ev(t,r-t.l)),(s&257)===1&&(l=ale(t,r-t.l)),s&8&&(c=Ev(t,r-t.l)),s&32&&(d=t.read_shift(16)),s&64&&(p=g7(t)),t.l=r;var g=a||o||l||"";g&&c&&(g+="#"+c),g||(g="#"+c),s&2&&g.charAt(0)=="/"&&g.charAt(1)!="/"&&(g="file://"+g);var m={Target:g};return d&&(m.guid=d),p&&(m.time=p),i&&(m.Tooltip=i),m}function lle(t){var e=_t(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),i=s>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}e.write_shift(4,2),e.write_shift(4,i);var a=[8,6815827,6619237,4849780,83];for(r=0;r<a.length;++r)e.write_shift(4,a[r]);if(i==28)n=n.slice(1),TT(n,e);else if(i&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));var o=s>-1?n.slice(0,s):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),i&8&&TT(s>-1?n.slice(s+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function yV(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),s=t.read_shift(1);return[e,r,n,s]}function vV(t,e){var r=yV(t);return r[3]=0,r}function hd(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function pp(t,e,r,n){return n||(n=_t(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function cle(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function ule(t,e,r){return e===0?"":jp(t,e,r)}function dle(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),i=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[s,i,a]}function wV(t){var e=t.read_shift(2),r=f7(t);return[e,r]}function hle(t,e,r){t.l+=4,e-=4;var n=t.l+e,s=ay(t,e,r),i=t.read_shift(2);if(n-=t.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return t.l+=i,s}function q_(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function _V(t,e){return e||(e=_t(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function bV(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),s=t.read_shift(1);return{s:{c:n,r:e},e:{c:s,r}}}var fle=bV;function kV(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function ple(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function mle(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Po(t){t.l+=2,t.l+=t.read_shift(2)}var gle={0:Po,4:Po,5:Po,6:Po,7:mle,8:Po,9:Po,10:Po,11:Po,12:Po,13:ple,14:Po,15:Po,16:Po,17:Po,18:Po,19:Po,20:Po,21:kV};function xle(t,e){for(var r=t.l+e,n=[];t.l<r;){var s=t.read_shift(2);t.l-=2;try{n.push(gle[s](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function Cv(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function x7(t,e,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=_t(s);return i.write_shift(2,n),i.write_shift(2,e),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function yle(t,e){return e===0||t.read_shift(2),1200}function vle(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,s=jp(t,0,r);return t.read_shift(e+n-t.l),s}function wle(t,e){var r=!e||e.biff==8,n=_t(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function _le(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function ble(t,e,r){var n=t.read_shift(4),s=t.read_shift(1)&3,i=t.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var a=ay(t,0,r);return a.length===0&&(a="Sheet1"),{pos:n,hs:s,dt:i,name:a}}function kle(t,e){var r=!e||e.biff>=8?2:1,n=_t(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function Sle(t,e){for(var r=t.l+e,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0;a!=s&&t.l<r;++a)i.push(tle(t));return i.Count=n,i.Unique=s,i}function Ele(t,e){var r=_t(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],s=0;s<t.length;++s)n[s]=rle(t[s]);var i=qa([r].concat(n));return i.parts=[r.length].concat(n.map(function(a){return a.length})),i}function Cle(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function Ale(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function Nle(t){var e=cle(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function Tle(t){return t.read_shift(2),t.read_shift(4)}function IT(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var s=t.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function Ile(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2);return{Pos:[e,r],Dim:[n,s],Flags:i,CurTab:a,FirstTab:o,Selected:l,TabRatio:c}}function Ple(){var t=_t(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function Rle(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function Lle(t){var e=_t(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function jle(){}function Fle(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=ay(t,0,r),n}function Dle(t,e){var r=t.name||"Arial",n=e&&e.biff==5,s=n?15+r.length:16+2*r.length,i=_t(s);return i.write_shift(2,t.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function Ole(t){var e=hd(t);return e.isst=t.read_shift(4),e}function Mle(t,e,r,n){var s=_t(10);return pp(t,e,n,s),s.write_shift(4,r),s}function Ble(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,s=hd(t);r.biff==2&&t.l++;var i=oy(t,n-t.l,r);return s.val=i,s}function Vle(t,e,r,n,s){var i=!s||s.biff==8,a=_t(8+ +i+(1+i)*r.length);return pp(t,e,n,a),a.write_shift(2,r.length),i&&a.write_shift(1,1),a.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),a}function Ule(t,e,r){var n=t.read_shift(2),s=jp(t,0,r);return[n,s]}function zle(t,e,r,n){var s=r&&r.biff==5;n||(n=_t(s?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(s?1:2,e.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}var $le=jp;function PT(t,e,r){var n=t.l+e,s=r.biff==8||!r.biff?4:2,i=t.read_shift(s),a=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:i,c:o},e:{r:a,c:l}}}function qle(t,e){var r=e.biff==8||!e.biff?4:2,n=_t(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function Hle(t){var e=t.read_shift(2),r=t.read_shift(2),n=wV(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function Wle(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(wV(t));if(t.l!==r)throw new Error("MulRK read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:a,rkrec:i}}function Gle(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:a,ixfe:i}}function Kle(t,e,r,n){var s={},i=t.read_shift(4),a=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=Noe[o>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=a&15,s.dgRight=a>>4&15,s.dgTop=a>>8&15,s.dgBottom=a>>12&15,s.icvLeft=a>>16&127,s.icvRight=a>>23&127,s.grbitDiag=a>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function Yle(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=Kle(t,e,n.fStyle,r),n}function RT(t,e,r,n){var s=r&&r.biff==5;n||(n=_t(s?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var i=0;return t.numFmtId>0&&s&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function Xle(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function Qle(t){var e=_t(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function LT(t,e,r){var n=hd(t);(r.biff==2||e==9)&&++t.l;var s=ele(t);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function Jle(t,e,r,n,s,i){var a=_t(8);return pp(t,e,n,a),gV(r,i,a),a}function Zle(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=hd(t),s=Uo(t);return n.val=s,n}function ece(t,e,r,n){var s=_t(14);return pp(t,e,n,s),hp(r,s),s}var jT=ule;function tce(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var a=fp(t,i),o=[];n>t.l;)o.push(oy(t));return[i,s,a,o]}function FT(t,e,r){var n=t.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=hle(t,e-2,r)),i.body=s||t.read_shift(e-2),typeof s=="string"&&(i.Name=s),i}var rce=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function DT(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(1),a=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var c=fp(t,a,r);s&32&&(c=rce[c.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var p=n==t.l||o===0||!(d>0)?[]:xfe(t,d,r,o);return{chKey:i,Name:c,itab:l,rgce:p}}function SV(t,e,r){if(r.biff<8)return nce(t,e,r);for(var n=[],s=t.l+e,i=t.read_shift(r.biff>8?4:2);i--!==0;)n.push(dle(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function nce(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=ay(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function sce(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),s=t.read_shift(2),i=fp(t,n,r),a=fp(t,s,r);return[i,a]}function ice(t,e,r){var n=bV(t);t.l++;var s=t.read_shift(1);return e-=8,[yfe(t,e,r),s,n]}function OT(t,e,r){var n=fle(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,mfe(t,e,r)]}function ace(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function oce(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=jp(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:s},o,a,i]}}function lce(t,e,r){return oce(t,e,r)}function cce(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(q_(t));return r}function uce(t){var e=_t(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)_V(t[r],e);return e}function dce(t,e,r){if(r&&r.biff<8)return fce(t,e,r);var n=kV(t),s=xle(t,e-22,n[1]);return{cmo:n,ft:s}}var hce={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=r,{fmt:n}}};function fce(t,e,r){t.l+=4;var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var a=[];return a.push((hce[n]||Wo)(t,e,r)),{cmo:[s,n,i],ft:a}}function pce(t,e,r){var n=t.l,s="";try{t.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(i)==-1?t.l+=6:a=nle(t,6,r);var o=t.read_shift(2);t.read_shift(2),oa(t,2);var l=t.read_shift(2);t.l+=l;for(var c=1;c<t.lens.length-1;++c){if(t.l-n!=t.lens[c])throw new Error("TxO: bad continue record");var d=t[t.l],p=fp(t,t.lens[c+1]-t.lens[c]-1);if(s+=p,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=n+e,{t:s}}catch{return t.l=n+e,{t:s}}}function mce(t,e){var r=q_(t);t.l+=16;var n=ole(t,e-24);return[r,n]}function gce(t){var e=_t(24),r=mi(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(n[s],16));return qa([e,lle(t[1])])}function xce(t,e){t.read_shift(2);var r=q_(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(ol,""),[r,n]}function yce(t){var e=t[1].Tooltip,r=_t(10+2*(e.length+1));r.write_shift(2,2048);var n=mi(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<e.length;++s)r.write_shift(2,e.charCodeAt(s));return r.write_shift(2,0),r}function vce(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=_T[r]||r,r=t.read_shift(2),e[1]=_T[r]||r,e}function wce(t){return t||(t=_t(4)),t.write_shift(2,1),t.write_shift(2,1),t}function _ce(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(vV(t));return r}function bce(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(vV(t));return r}function kce(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function EV(t,e,r){if(!r.cellStyles)return Wo(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),i=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var c={s,e:i,w:a,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function Sce(t,e){var r=_t(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function Ece(t,e){var r={};return e<32||(t.l+=16,r.header=Uo(t),r.footer=Uo(t),t.l+=2),r}function Cce(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var s=t.read_shift(1);return t.l+=3,s&16&&(n.area=!0),n}function Ace(t){for(var e=_t(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var Nce=hd,Tce=mV,Ice=oy;function Pce(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,s}function Rce(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=hd(t);++t.l;var s=jp(t,e-7,r);return n.t="str",n.val=s,n}function Lce(t){var e=hd(t);++t.l;var r=Uo(t);return e.t="n",e.val=r,e}function jce(t,e,r){var n=_t(15);return dy(n,t,e),n.write_shift(8,r,"f"),n}function Fce(t){var e=hd(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function Dce(t,e,r){var n=_t(9);return dy(n,t,e),n.write_shift(2,r),n}function Oce(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function Mce(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function Bce(t,e,r){var n=t.l+e,s=hd(t),i=t.read_shift(2),a=fp(t,i,r);return t.l=n,s.t="str",s.val=a,s}var Vce=[2,3,48,49,131,139,140,245],Z6=(function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=U_({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],d=Sf(1);switch(l.type){case"base64":d=Ql(ic(o));break;case"binary":d=Ql(o);break;case"buffer":case"array":d=o;break}ho(d,0);var p=d.read_shift(1),g=!!(p&136),m=!1,y=!1;switch(p){case 2:break;case 3:break;case 48:m=!0,g=!0;break;case 49:m=!0,g=!0;break;case 131:break;case 139:break;case 140:y=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+p.toString(16))}var w=0,_=521;p==2&&(w=d.read_shift(2)),d.l+=3,p!=2&&(w=d.read_shift(4)),w>1048576&&(w=1e6),p!=2&&(_=d.read_shift(2));var S=d.read_shift(2),T=l.codepage||1252;p!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(T=t[d[d.l]]),d.l+=1,d.l+=2),y&&(d.l+=36);for(var I=[],M={},K=Math.min(d.length,p==2?521:_-10-(m?264:0)),W=y?32:11;d.l<K&&d[d.l]!=13;)switch(M={},M.name=lx.utils.decode(T,d.slice(d.l,d.l+W)).replace(/[\u0000\r\n].*$/g,""),d.l+=W,M.type=String.fromCharCode(d.read_shift(1)),p!=2&&!y&&(M.offset=d.read_shift(4)),M.len=d.read_shift(1),p==2&&(M.offset=d.read_shift(2)),M.dec=d.read_shift(1),M.name.length&&I.push(M),p!=2&&(d.l+=y?13:14),M.type){case"B":(!m||M.len!=8)&&l.WTF&&console.log("Skipping "+M.name+":"+M.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+M.name+":"+M.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+M.type)}if(d[d.l]!==13&&(d.l=_-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=_;var L=0,A=0;for(c[0]=[],A=0;A!=I.length;++A)c[0][A]=I[A].name;for(;w-- >0;){if(d[d.l]===42){d.l+=S;continue}for(++d.l,c[++L]=[],A=0,A=0;A!=I.length;++A){var E=d.slice(d.l,d.l+I[A].len);d.l+=I[A].len,ho(E,0);var D=lx.utils.decode(T,E);switch(I[A].type){case"C":D.trim().length&&(c[L][A]=D.replace(/\s+$/,""));break;case"D":D.length===8?c[L][A]=new Date(+D.slice(0,4),+D.slice(4,6)-1,+D.slice(6,8)):c[L][A]=D;break;case"F":c[L][A]=parseFloat(D.trim());break;case"+":case"I":c[L][A]=y?E.read_shift(-4,"i")^2147483648:E.read_shift(4,"i");break;case"L":switch(D.trim().toUpperCase()){case"Y":case"T":c[L][A]=!0;break;case"N":case"F":c[L][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+D+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+p.toString(16));c[L][A]="##MEMO##"+(y?parseInt(D.trim(),10):E.read_shift(4));break;case"N":D=D.replace(/\u0000/g,"").trim(),D&&D!="."&&(c[L][A]=+D||0);break;case"@":c[L][A]=new Date(E.read_shift(-8,"f")-621356832e5);break;case"T":c[L][A]=new Date((E.read_shift(4)-2440588)*864e5+E.read_shift(4));break;case"Y":c[L][A]=E.read_shift(4,"i")/1e4+E.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[L][A]=-E.read_shift(-8,"f");break;case"B":if(m&&I[A].len==8){c[L][A]=E.read_shift(8,"f");break}case"G":case"P":E.l+=I[A].len;break;case"0":if(I[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+I[A].type)}}}if(p!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=I,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var d=W1(r(o,c),c);return d["!cols"]=c.DBF.map(function(p){return{wch:p.len,DBF:p}}),delete c.DBF,d}function s(o,l){try{return $f(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var c=l||{};if(+c.codepage>=0&&au(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var d=Cl(),p=R5(o,{header:1,raw:!0,cellDates:!0}),g=p[0],m=p.slice(1),y=o["!cols"]||[],w=0,_=0,S=0,T=1;for(w=0;w<g.length;++w){if(((y[w]||{}).DBF||{}).name){g[w]=y[w].DBF.name,++S;continue}if(g[w]!=null){if(++S,typeof g[w]=="number"&&(g[w]=g[w].toString(10)),typeof g[w]!="string")throw new Error("DBF Invalid column name "+g[w]+" |"+typeof g[w]+"|");if(g.indexOf(g[w])!==w){for(_=0;_<1024;++_)if(g.indexOf(g[w]+"_"+_)==-1){g[w]+="_"+_;break}}}}var I=Wn(o["!ref"]),M=[],K=[],W=[];for(w=0;w<=I.e.c-I.s.c;++w){var L="",A="",E=0,D=[];for(_=0;_<m.length;++_)m[_][w]!=null&&D.push(m[_][w]);if(D.length==0||g[w]==null){M[w]="?";continue}for(_=0;_<D.length;++_){switch(typeof D[_]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=D[_]instanceof Date?"D":"C";break;default:A="C"}E=Math.max(E,String(D[_]).length),L=L&&L!=A?"C":A}E>250&&(E=250),A=((y[w]||{}).DBF||{}).type,A=="C"&&y[w].DBF.len>E&&(E=y[w].DBF.len),L=="B"&&A=="N"&&(L="N",W[w]=y[w].DBF.dec,E=y[w].DBF.len),K[w]=L=="C"||A=="N"?E:i[L]||0,T+=K[w],M[w]=L}var R=d.next(32);for(R.write_shift(4,318902576),R.write_shift(4,m.length),R.write_shift(2,296+32*S),R.write_shift(2,T),w=0;w<4;++w)R.write_shift(4,0);for(R.write_shift(4,0|(+e[pB]||3)<<8),w=0,_=0;w<g.length;++w)if(g[w]!=null){var F=d.next(32),V=(g[w].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);F.write_shift(1,V,"sbcs"),F.write_shift(1,M[w]=="?"?"C":M[w],"sbcs"),F.write_shift(4,_),F.write_shift(1,K[w]||i[M[w]]||0),F.write_shift(1,W[w]||0),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(1,0),F.write_shift(4,0),F.write_shift(4,0),_+=K[w]||i[M[w]]||0}var Z=d.next(264);for(Z.write_shift(4,13),w=0;w<65;++w)Z.write_shift(4,0);for(w=0;w<m.length;++w){var fe=d.next(T);for(fe.write_shift(1,0),_=0;_<g.length;++_)if(g[_]!=null)switch(M[_]){case"L":fe.write_shift(1,m[w][_]==null?63:m[w][_]?84:70);break;case"B":fe.write_shift(8,m[w][_]||0,"f");break;case"N":var xe="0";for(typeof m[w][_]=="number"&&(xe=m[w][_].toFixed(W[_]||0)),S=0;S<K[_]-xe.length;++S)fe.write_shift(1,32);fe.write_shift(1,xe,"sbcs");break;case"D":m[w][_]?(fe.write_shift(4,("0000"+m[w][_].getFullYear()).slice(-4),"sbcs"),fe.write_shift(2,("00"+(m[w][_].getMonth()+1)).slice(-2),"sbcs"),fe.write_shift(2,("00"+m[w][_].getDate()).slice(-2),"sbcs")):fe.write_shift(8,"00000000","sbcs");break;case"C":var he=String(m[w][_]!=null?m[w][_]:"").slice(0,K[_]);for(fe.write_shift(1,he,"sbcs"),S=0;S<K[_]-he.length;++S)fe.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:n,from_sheet:a}})(),CV=(function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Ti(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(g,m){var y=t[m];return typeof y=="number"?KN(y):y},n=function(g,m,y){var w=m.charCodeAt(0)-32<<4|y.charCodeAt(0)-48;return w==59?g:KN(w)};t["|"]=254;function s(g,m){switch(m.type){case"base64":return i(ic(g),m);case"binary":return i(g,m);case"buffer":return i(pn&&Buffer.isBuffer(g)?g.toString("binary"):zf(g),m);case"array":return i(dp(g),m)}throw new Error("Unrecognized type "+m.type)}function i(g,m){var y=g.split(/[\n\r]+/),w=-1,_=-1,S=0,T=0,I=[],M=[],K=null,W={},L=[],A=[],E=[],D=0,R;for(+m.codepage>=0&&au(+m.codepage);S!==y.length;++S){D=0;var F=y[S].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),V=F.replace(/;;/g,"\0").split(";").map(function(J){return J.replace(/\u0000/g,";")}),Z=V[0],fe;if(F.length>0)switch(Z){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":V[1].charAt(0)=="P"&&M.push(F.slice(3).replace(/;;/g,";"));break;case"C":var xe=!1,he=!1,ae=!1,H=!1,te=-1,G=-1;for(T=1;T<V.length;++T)switch(V[T].charAt(0)){case"A":break;case"X":_=parseInt(V[T].slice(1))-1,he=!0;break;case"Y":for(w=parseInt(V[T].slice(1))-1,he||(_=0),R=I.length;R<=w;++R)I[R]=[];break;case"K":fe=V[T].slice(1),fe.charAt(0)==='"'?fe=fe.slice(1,fe.length-1):fe==="TRUE"?fe=!0:fe==="FALSE"?fe=!1:isNaN(fu(fe))?isNaN(S1(fe).getDate())||(fe=zs(fe)):(fe=fu(fe),K!==null&&q1(K)&&(fe=$_(fe))),xe=!0;break;case"E":H=!0;var P=Qm(V[T].slice(1),{r:w,c:_});I[w][_]=[I[w][_],P];break;case"S":ae=!0,I[w][_]=[I[w][_],"S5S"];break;case"G":break;case"R":te=parseInt(V[T].slice(1))-1;break;case"C":G=parseInt(V[T].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+F)}if(xe&&(I[w][_]&&I[w][_].length==2?I[w][_][0]=fe:I[w][_]=fe,K=null),ae){if(H)throw new Error("SYLK shared formula cannot have own formula");var U=te>-1&&I[te][G];if(!U||!U[1])throw new Error("SYLK shared formula cannot find base");I[w][_][1]=qV(U[1],{r:w-te,c:_-G})}break;case"F":var X=0;for(T=1;T<V.length;++T)switch(V[T].charAt(0)){case"X":_=parseInt(V[T].slice(1))-1,++X;break;case"Y":for(w=parseInt(V[T].slice(1))-1,R=I.length;R<=w;++R)I[R]=[];break;case"M":D=parseInt(V[T].slice(1))/20;break;case"F":break;case"G":break;case"P":K=M[parseInt(V[T].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(E=V[T].slice(1).split(" "),R=parseInt(E[0],10);R<=parseInt(E[1],10);++R)D=parseInt(E[2],10),A[R-1]=D===0?{hidden:!0}:{wch:D},Ef(A[R-1]);break;case"C":_=parseInt(V[T].slice(1))-1,A[_]||(A[_]={});break;case"R":w=parseInt(V[T].slice(1))-1,L[w]||(L[w]={}),D>0?(L[w].hpt=D,L[w].hpx=C1(D)):D===0&&(L[w].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+F)}X<1&&(K=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+F)}}return L.length>0&&(W["!rows"]=L),A.length>0&&(W["!cols"]=A),m&&m.sheetRows&&(I=I.slice(0,m.sheetRows)),[I,W]}function a(g,m){var y=s(g,m),w=y[0],_=y[1],S=W1(w,m);return Ti(_).forEach(function(T){S[T]=_[T]}),S}function o(g,m){return $f(a(g,m),m)}function l(g,m,y,w){var _="C;Y"+(y+1)+";X"+(w+1)+";K";switch(g.t){case"n":_+=g.v||0,g.f&&!g.F&&(_+=";E"+k7(g.f,{r:y,c:w}));break;case"b":_+=g.v?"TRUE":"FALSE";break;case"e":_+=g.w||g.v;break;case"d":_+='"'+(g.w||g.v)+'"';break;case"s":_+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return _}function c(g,m){m.forEach(function(y,w){var _="F;W"+(w+1)+" "+(w+1)+" ";y.hidden?_+="0":(typeof y.width=="number"&&!y.wpx&&(y.wpx=gx(y.width)),typeof y.wpx=="number"&&!y.wch&&(y.wch=xx(y.wpx)),typeof y.wch=="number"&&(_+=Math.round(y.wch))),_.charAt(_.length-1)!=" "&&g.push(_)})}function d(g,m){m.forEach(function(y,w){var _="F;";y.hidden?_+="M0;":y.hpt?_+="M"+20*y.hpt+";":y.hpx&&(_+="M"+20*yx(y.hpx)+";"),_.length>2&&g.push(_+"R"+(w+1))})}function p(g,m){var y=["ID;PWXL;N;E"],w=[],_=Wn(g["!ref"]),S,T=Array.isArray(g),I=`\r
`;y.push("P;PGeneral"),y.push("F;P0;DG0G8;M255"),g["!cols"]&&c(y,g["!cols"]),g["!rows"]&&d(y,g["!rows"]),y.push("B;Y"+(_.e.r-_.s.r+1)+";X"+(_.e.c-_.s.c+1)+";D"+[_.s.c,_.s.r,_.e.c,_.e.r].join(" "));for(var M=_.s.r;M<=_.e.r;++M)for(var K=_.s.c;K<=_.e.c;++K){var W=Vr({r:M,c:K});S=T?(g[M]||[])[K]:g[W],!(!S||S.v==null&&(!S.f||S.F))&&w.push(l(S,g,M,K))}return y.join(I)+I+w.join(I)+I+"E"+I}return{to_workbook:o,to_sheet:a,from_sheet:p}})(),AV=(function(){function t(i,a){switch(a.type){case"base64":return e(ic(i),a);case"binary":return e(i,a);case"buffer":return e(pn&&Buffer.isBuffer(i)?i.toString("binary"):zf(i),a);case"array":return e(dp(i),a)}throw new Error("Unrecognized type "+a.type)}function e(i,a){for(var o=i.split(`
`),l=-1,c=-1,d=0,p=[];d!==o.length;++d){if(o[d].trim()==="BOT"){p[++l]=[],c=0;continue}if(!(l<0)){var g=o[d].trim().split(","),m=g[0],y=g[1];++d;for(var w=o[d]||"";(w.match(/["]/g)||[]).length&1&&d<o.length-1;)w+=`
`+o[++d];switch(w=w.trim(),+m){case-1:if(w==="BOT"){p[++l]=[],c=0;continue}else if(w!=="EOD")throw new Error("Unrecognized DIF special command "+w);break;case 0:w==="TRUE"?p[l][c]=!0:w==="FALSE"?p[l][c]=!1:isNaN(fu(y))?isNaN(S1(y).getDate())?p[l][c]=y:p[l][c]=zs(y):p[l][c]=fu(y),++c;break;case 1:w=w.slice(1,w.length-1),w=w.replace(/""/g,'"'),w&&w.match(/^=".*"$/)&&(w=w.slice(2,-1)),p[l][c++]=w!==""?w:null;break}if(w==="EOD")break}}return a&&a.sheetRows&&(p=p.slice(0,a.sheetRows)),p}function r(i,a){return W1(t(i,a),a)}function n(i,a){return $f(r(i,a),a)}var s=(function(){var i=function(l,c,d,p,g){l.push(c),l.push(d+","+p),l.push('"'+g.replace(/"/g,'""')+'"')},a=function(l,c,d,p){l.push(c+","+d),l.push(c==1?'"'+p.replace(/"/g,'""')+'"':p)};return function(l){var c=[],d=Wn(l["!ref"]),p,g=Array.isArray(l);i(c,"TABLE",0,1,"sheetjs"),i(c,"VECTORS",0,d.e.r-d.s.r+1,""),i(c,"TUPLES",0,d.e.c-d.s.c+1,""),i(c,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){a(c,-1,0,"BOT");for(var y=d.s.c;y<=d.e.c;++y){var w=Vr({r:m,c:y});if(p=g?(l[m]||[])[y]:l[w],!p){a(c,1,0,"");continue}switch(p.t){case"n":var _=p.w;!_&&p.v!=null&&(_=p.v),_==null?p.f&&!p.F?a(c,1,0,"="+p.f):a(c,1,0,""):a(c,0,_,"V");break;case"b":a(c,0,p.v?1:0,p.v?"TRUE":"FALSE");break;case"s":a(c,1,0,isNaN(p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=Fc(p.z||Dr[14],Ea(zs(p.v)))),a(c,0,p.w,"V");break;default:a(c,1,0,"")}}}a(c,-1,0,"EOD");var S=`\r
`,T=c.join(S);return T}})();return{to_workbook:n,to_sheet:r,from_sheet:s}})(),NV=(function(){function t(p){return p.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(p){return p.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(p,g){for(var m=p.split(`
`),y=-1,w=-1,_=0,S=[];_!==m.length;++_){var T=m[_].trim().split(":");if(T[0]==="cell"){var I=mi(T[1]);if(S.length<=I.r)for(y=S.length;y<=I.r;++y)S[y]||(S[y]=[]);switch(y=I.r,w=I.c,T[2]){case"t":S[y][w]=t(T[3]);break;case"v":S[y][w]=+T[3];break;case"vtf":var M=T[T.length-1];case"vtc":switch(T[3]){case"nl":S[y][w]=!!+T[4];break;default:S[y][w]=+T[4];break}T[2]=="vtf"&&(S[y][w]=[S[y][w],M])}}}return g&&g.sheetRows&&(S=S.slice(0,g.sheetRows)),S}function n(p,g){return W1(r(p,g),g)}function s(p,g){return $f(n(p,g),g)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(p){if(!p||!p["!ref"])return"";for(var g=[],m=[],y,w="",_=Al(p["!ref"]),S=Array.isArray(p),T=_.s.r;T<=_.e.r;++T)for(var I=_.s.c;I<=_.e.c;++I)if(w=Vr({r:T,c:I}),y=S?(p[T]||[])[I]:p[w],!(!y||y.v==null||y.t==="z")){switch(m=["cell",w,"t"],y.t){case"s":case"str":m.push(e(y.v));break;case"n":y.f?(m[2]="vtf",m[3]="n",m[4]=y.v,m[5]=e(y.f)):(m[2]="v",m[3]=y.v);break;case"b":m[2]="vt"+(y.f?"f":"c"),m[3]="nl",m[4]=y.v?"1":"0",m[5]=e(y.f||(y.v?"TRUE":"FALSE"));break;case"d":var M=Ea(zs(y.v));m[2]="vtc",m[3]="nd",m[4]=""+M,m[5]=y.w||Fc(y.z||Dr[14],M);break;case"e":continue}g.push(m.join(":"))}return g.push("sheet:c:"+(_.e.c-_.s.c+1)+":r:"+(_.e.r-_.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function d(p){return[i,a,o,a,c(p),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:d}})(),E1=(function(){function t(d,p,g,m,y){y.raw?p[g][m]=d:d===""||(d==="TRUE"?p[g][m]=!0:d==="FALSE"?p[g][m]=!1:isNaN(fu(d))?isNaN(S1(d).getDate())?p[g][m]=d:p[g][m]=zs(d):p[g][m]=fu(d))}function e(d,p){var g=p||{},m=[];if(!d||d.length===0)return m;for(var y=d.split(/[\r\n]/),w=y.length-1;w>=0&&y[w].length===0;)--w;for(var _=10,S=0,T=0;T<=w;++T)S=y[T].indexOf(" "),S==-1?S=y[T].length:S++,_=Math.max(_,S);for(T=0;T<=w;++T){m[T]=[];var I=0;for(t(y[T].slice(0,_).trim(),m,T,I,g),I=1;I<=(y[T].length-_)/10+1;++I)t(y[T].slice(_+(I-1)*10,_+I*10).trim(),m,T,I,g)}return g.sheetRows&&(m=m.slice(0,g.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(d){for(var p={},g=!1,m=0,y=0;m<d.length;++m)(y=d.charCodeAt(m))==34?g=!g:!g&&y in r&&(p[y]=(p[y]||0)+1);y=[];for(m in p)Object.prototype.hasOwnProperty.call(p,m)&&y.push([p[m],m]);if(!y.length){p=n;for(m in p)Object.prototype.hasOwnProperty.call(p,m)&&y.push([p[m],m])}return y.sort(function(w,_){return w[0]-_[0]||n[w[1]]-n[_[1]]}),r[y.pop()[1]]||44}function i(d,p){var g=p||{},m="",y=g.dense?[]:{},w={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=s(d.slice(0,1024)):g&&g.FS?m=g.FS:m=s(d.slice(0,1024));var _=0,S=0,T=0,I=0,M=0,K=m.charCodeAt(0),W=!1,L=0,A=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var E=g.dateNF!=null?Cae(g.dateNF):null;function D(){var R=d.slice(I,M),F={};if(R.charAt(0)=='"'&&R.charAt(R.length-1)=='"'&&(R=R.slice(1,-1).replace(/""/g,'"')),R.length===0)F.t="z";else if(g.raw)F.t="s",F.v=R;else if(R.trim().length===0)F.t="s",F.v=R;else if(R.charCodeAt(0)==61)R.charCodeAt(1)==34&&R.charCodeAt(R.length-1)==34?(F.t="s",F.v=R.slice(2,-1).replace(/""/g,'"')):the(R)?(F.t="n",F.f=R.slice(1)):(F.t="s",F.v=R);else if(R=="TRUE")F.t="b",F.v=!0;else if(R=="FALSE")F.t="b",F.v=!1;else if(!isNaN(T=fu(R)))F.t="n",g.cellText!==!1&&(F.w=R),F.v=T;else if(!isNaN(S1(R).getDate())||E&&R.match(E)){F.z=g.dateNF||Dr[14];var V=0;E&&R.match(E)&&(R=Aae(R,g.dateNF,R.match(E)||[]),V=1),g.cellDates?(F.t="d",F.v=zs(R,V)):(F.t="n",F.v=Ea(zs(R,V))),g.cellText!==!1&&(F.w=Fc(F.z,F.v instanceof Date?Ea(F.v):F.v)),g.cellNF||delete F.z}else F.t="s",F.v=R;if(F.t=="z"||(g.dense?(y[_]||(y[_]=[]),y[_][S]=F):y[Vr({c:S,r:_})]=F),I=M+1,A=d.charCodeAt(I),w.e.c<S&&(w.e.c=S),w.e.r<_&&(w.e.r=_),L==K)++S;else if(S=0,++_,g.sheetRows&&g.sheetRows<=_)return!0}e:for(;M<d.length;++M)switch(L=d.charCodeAt(M)){case 34:A===34&&(W=!W);break;case K:case 10:case 13:if(!W&&D())break e;break}return M-I>0&&D(),y["!ref"]=nn(w),y}function a(d,p){return!(p&&p.PRN)||p.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?i(d,p):W1(e(d,p),p)}function o(d,p){var g="",m=p.type=="string"?[0,0,0,0]:P7(d,p);switch(p.type){case"base64":g=ic(d);break;case"binary":g=d;break;case"buffer":p.codepage==65001?g=d.toString("utf8"):p.codepage&&typeof lx<"u"||(g=pn&&Buffer.isBuffer(d)?d.toString("binary"):zf(d));break;case"array":g=dp(d);break;case"string":g=d;break;default:throw new Error("Unrecognized type "+p.type)}return m[0]==239&&m[1]==187&&m[2]==191?g=bs(g.slice(3)):p.type!="string"&&p.type!="buffer"&&p.codepage==65001?g=bs(g):p.type=="binary"&&typeof lx<"u",g.slice(0,19)=="socialcalc:version:"?NV.to_sheet(p.type=="string"?g:bs(g),p):a(g,p)}function l(d,p){return $f(o(d,p),p)}function c(d){for(var p=[],g=Wn(d["!ref"]),m,y=Array.isArray(d),w=g.s.r;w<=g.e.r;++w){for(var _=[],S=g.s.c;S<=g.e.c;++S){var T=Vr({r:w,c:S});if(m=y?(d[w]||[])[S]:d[T],!m||m.v==null){_.push("          ");continue}for(var I=(m.w||(Zd(m),m.w)||"").slice(0,10);I.length<10;)I+=" ";_.push(I+(S===0?" ":""))}p.push(_.join(""))}return p.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}})();function Uce(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var s=CV.to_workbook(t,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return E1.to_workbook(t,e)}}var q0=(function(){function t(P,U,X){if(P){ho(P,P.l||0);for(var J=X.Enum||te;P.l<P.length;){var ie=P.read_shift(2),ve=J[ie]||J[65535],ke=P.read_shift(2),oe=P.l+ke,Ee=ve.f&&ve.f(P,ke,X);if(P.l=oe,U(Ee,ve,ie))return}}}function e(P,U){switch(U.type){case"base64":return r(Ql(ic(P)),U);case"binary":return r(Ql(P),U);case"buffer":case"array":return r(P,U)}throw"Unsupported type "+U.type}function r(P,U){if(!P)return P;var X=U||{},J=X.dense?[]:{},ie="Sheet1",ve="",ke=0,oe={},Ee=[],Oe=[],ne={s:{r:0,c:0},e:{r:0,c:0}},we=X.sheetRows||0;if(P[2]==0&&(P[3]==8||P[3]==9)&&P.length>=16&&P[14]==5&&P[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(P[2]==2)X.Enum=te,t(P,function(ze,ot,Be){switch(Be){case 0:X.vers=ze,ze>=4096&&(X.qpro=!0);break;case 6:ne=ze;break;case 204:ze&&(ve=ze);break;case 222:ve=ze;break;case 15:case 51:X.qpro||(ze[1].v=ze[1].v.slice(1));case 13:case 14:case 16:Be==14&&(ze[2]&112)==112&&(ze[2]&15)>1&&(ze[2]&15)<15&&(ze[1].z=X.dateNF||Dr[14],X.cellDates&&(ze[1].t="d",ze[1].v=$_(ze[1].v))),X.qpro&&ze[3]>ke&&(J["!ref"]=nn(ne),oe[ie]=J,Ee.push(ie),J=X.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},ke=ze[3],ie=ve||"Sheet"+(ke+1),ve="");var He=X.dense?(J[ze[0].r]||[])[ze[0].c]:J[Vr(ze[0])];if(He){He.t=ze[1].t,He.v=ze[1].v,ze[1].z!=null&&(He.z=ze[1].z),ze[1].f!=null&&(He.f=ze[1].f);break}X.dense?(J[ze[0].r]||(J[ze[0].r]=[]),J[ze[0].r][ze[0].c]=ze[1]):J[Vr(ze[0])]=ze[1];break}},X);else if(P[2]==26||P[2]==14)X.Enum=G,P[2]==14&&(X.qpro=!0,P.l=0),t(P,function(ze,ot,Be){switch(Be){case 204:ie=ze;break;case 22:ze[1].v=ze[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ze[3]>ke&&(J["!ref"]=nn(ne),oe[ie]=J,Ee.push(ie),J=X.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},ke=ze[3],ie="Sheet"+(ke+1)),we>0&&ze[0].r>=we)break;X.dense?(J[ze[0].r]||(J[ze[0].r]=[]),J[ze[0].r][ze[0].c]=ze[1]):J[Vr(ze[0])]=ze[1],ne.e.c<ze[0].c&&(ne.e.c=ze[0].c),ne.e.r<ze[0].r&&(ne.e.r=ze[0].r);break;case 27:ze[14e3]&&(Oe[ze[14e3][0]]=ze[14e3][1]);break;case 1537:Oe[ze[0]]=ze[1],ze[0]==ke&&(ie=ze[1]);break}},X);else throw new Error("Unrecognized LOTUS BOF "+P[2]);if(J["!ref"]=nn(ne),oe[ve||ie]=J,Ee.push(ve||ie),!Oe.length)return{SheetNames:Ee,Sheets:oe};for(var Re={},pe=[],Ke=0;Ke<Oe.length;++Ke)oe[Ee[Ke]]?(pe.push(Oe[Ke]||Ee[Ke]),Re[Oe[Ke]]=oe[Oe[Ke]]||oe[Ee[Ke]]):(pe.push(Oe[Ke]),Re[Oe[Ke]]={"!ref":"A1"});return{SheetNames:pe,Sheets:Re}}function n(P,U){var X=U||{};if(+X.codepage>=0&&au(+X.codepage),X.type=="string")throw new Error("Cannot write WK1 to JS string");var J=Cl(),ie=Wn(P["!ref"]),ve=Array.isArray(P),ke=[];Wt(J,0,i(1030)),Wt(J,6,l(ie));for(var oe=Math.min(ie.e.r,8191),Ee=ie.s.r;Ee<=oe;++Ee)for(var Oe=Gi(Ee),ne=ie.s.c;ne<=ie.e.c;++ne){Ee===ie.s.r&&(ke[ne]=pi(ne));var we=ke[ne]+Oe,Re=ve?(P[Ee]||[])[ne]:P[we];if(!(!Re||Re.t=="z"))if(Re.t=="n")(Re.v|0)==Re.v&&Re.v>=-32768&&Re.v<=32767?Wt(J,13,m(Ee,ne,Re.v)):Wt(J,14,w(Ee,ne,Re.v));else{var pe=Zd(Re);Wt(J,15,p(Ee,ne,pe.slice(0,239)))}}return Wt(J,1),J.end()}function s(P,U){var X=U||{};if(+X.codepage>=0&&au(+X.codepage),X.type=="string")throw new Error("Cannot write WK3 to JS string");var J=Cl();Wt(J,0,a(P));for(var ie=0,ve=0;ie<P.SheetNames.length;++ie)(P.Sheets[P.SheetNames[ie]]||{})["!ref"]&&Wt(J,27,H(P.SheetNames[ie],ve++));var ke=0;for(ie=0;ie<P.SheetNames.length;++ie){var oe=P.Sheets[P.SheetNames[ie]];if(!(!oe||!oe["!ref"])){for(var Ee=Wn(oe["!ref"]),Oe=Array.isArray(oe),ne=[],we=Math.min(Ee.e.r,8191),Re=Ee.s.r;Re<=we;++Re)for(var pe=Gi(Re),Ke=Ee.s.c;Ke<=Ee.e.c;++Ke){Re===Ee.s.r&&(ne[Ke]=pi(Ke));var ze=ne[Ke]+pe,ot=Oe?(oe[Re]||[])[Ke]:oe[ze];if(!(!ot||ot.t=="z"))if(ot.t=="n")Wt(J,23,D(Re,Ke,ke,ot.v));else{var Be=Zd(ot);Wt(J,22,L(Re,Ke,ke,Be.slice(0,239)))}}++ke}}return Wt(J,1),J.end()}function i(P){var U=_t(2);return U.write_shift(2,P),U}function a(P){var U=_t(26);U.write_shift(2,4096),U.write_shift(2,4),U.write_shift(4,0);for(var X=0,J=0,ie=0,ve=0;ve<P.SheetNames.length;++ve){var ke=P.SheetNames[ve],oe=P.Sheets[ke];if(!(!oe||!oe["!ref"])){++ie;var Ee=Al(oe["!ref"]);X<Ee.e.r&&(X=Ee.e.r),J<Ee.e.c&&(J=Ee.e.c)}}return X>8191&&(X=8191),U.write_shift(2,X),U.write_shift(1,ie),U.write_shift(1,J),U.write_shift(2,0),U.write_shift(2,0),U.write_shift(1,1),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(4,0),U}function o(P,U,X){var J={s:{c:0,r:0},e:{c:0,r:0}};return U==8&&X.qpro?(J.s.c=P.read_shift(1),P.l++,J.s.r=P.read_shift(2),J.e.c=P.read_shift(1),P.l++,J.e.r=P.read_shift(2),J):(J.s.c=P.read_shift(2),J.s.r=P.read_shift(2),U==12&&X.qpro&&(P.l+=2),J.e.c=P.read_shift(2),J.e.r=P.read_shift(2),U==12&&X.qpro&&(P.l+=2),J.s.c==65535&&(J.s.c=J.e.c=J.s.r=J.e.r=0),J)}function l(P){var U=_t(8);return U.write_shift(2,P.s.c),U.write_shift(2,P.s.r),U.write_shift(2,P.e.c),U.write_shift(2,P.e.r),U}function c(P,U,X){var J=[{c:0,r:0},{t:"n",v:0},0,0];return X.qpro&&X.vers!=20768?(J[0].c=P.read_shift(1),J[3]=P.read_shift(1),J[0].r=P.read_shift(2),P.l+=2):(J[2]=P.read_shift(1),J[0].c=P.read_shift(2),J[0].r=P.read_shift(2)),J}function d(P,U,X){var J=P.l+U,ie=c(P,U,X);if(ie[1].t="s",X.vers==20768){P.l++;var ve=P.read_shift(1);return ie[1].v=P.read_shift(ve,"utf8"),ie}return X.qpro&&P.l++,ie[1].v=P.read_shift(J-P.l,"cstr"),ie}function p(P,U,X){var J=_t(7+X.length);J.write_shift(1,255),J.write_shift(2,U),J.write_shift(2,P),J.write_shift(1,39);for(var ie=0;ie<J.length;++ie){var ve=X.charCodeAt(ie);J.write_shift(1,ve>=128?95:ve)}return J.write_shift(1,0),J}function g(P,U,X){var J=c(P,U,X);return J[1].v=P.read_shift(2,"i"),J}function m(P,U,X){var J=_t(7);return J.write_shift(1,255),J.write_shift(2,U),J.write_shift(2,P),J.write_shift(2,X,"i"),J}function y(P,U,X){var J=c(P,U,X);return J[1].v=P.read_shift(8,"f"),J}function w(P,U,X){var J=_t(13);return J.write_shift(1,255),J.write_shift(2,U),J.write_shift(2,P),J.write_shift(8,X,"f"),J}function _(P,U,X){var J=P.l+U,ie=c(P,U,X);if(ie[1].v=P.read_shift(8,"f"),X.qpro)P.l=J;else{var ve=P.read_shift(2);M(P.slice(P.l,P.l+ve),ie),P.l+=ve}return ie}function S(P,U,X){var J=U&32768;return U&=-32769,U=(J?P:0)+(U>=8192?U-16384:U),(J?"":"$")+(X?pi(U):Gi(U))}var T={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},I=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function M(P,U){ho(P,0);for(var X=[],J=0,ie="",ve="",ke="",oe="";P.l<P.length;){var Ee=P[P.l++];switch(Ee){case 0:X.push(P.read_shift(8,"f"));break;case 1:ve=S(U[0].c,P.read_shift(2),!0),ie=S(U[0].r,P.read_shift(2),!1),X.push(ve+ie);break;case 2:{var Oe=S(U[0].c,P.read_shift(2),!0),ne=S(U[0].r,P.read_shift(2),!1);ve=S(U[0].c,P.read_shift(2),!0),ie=S(U[0].r,P.read_shift(2),!1),X.push(Oe+ne+":"+ve+ie)}break;case 3:if(P.l<P.length){console.error("WK1 premature formula end");return}break;case 4:X.push("("+X.pop()+")");break;case 5:X.push(P.read_shift(2));break;case 6:{for(var we="";Ee=P[P.l++];)we+=String.fromCharCode(Ee);X.push('"'+we.replace(/"/g,'""')+'"')}break;case 8:X.push("-"+X.pop());break;case 23:X.push("+"+X.pop());break;case 22:X.push("NOT("+X.pop()+")");break;case 20:case 21:oe=X.pop(),ke=X.pop(),X.push(["AND","OR"][Ee-20]+"("+ke+","+oe+")");break;default:if(Ee<32&&I[Ee])oe=X.pop(),ke=X.pop(),X.push(ke+I[Ee]+oe);else if(T[Ee]){if(J=T[Ee][1],J==69&&(J=P[P.l++]),J>X.length){console.error("WK1 bad formula parse 0x"+Ee.toString(16)+":|"+X.join("|")+"|");return}var Re=X.slice(-J);X.length-=J,X.push(T[Ee][0]+"("+Re.join(",")+")")}else return Ee<=7?console.error("WK1 invalid opcode "+Ee.toString(16)):Ee<=24?console.error("WK1 unsupported op "+Ee.toString(16)):Ee<=30?console.error("WK1 invalid opcode "+Ee.toString(16)):Ee<=115?console.error("WK1 unsupported function opcode "+Ee.toString(16)):console.error("WK1 unrecognized opcode "+Ee.toString(16))}}X.length==1?U[1].f=""+X[0]:console.error("WK1 bad formula parse |"+X.join("|")+"|")}function K(P){var U=[{c:0,r:0},{t:"n",v:0},0];return U[0].r=P.read_shift(2),U[3]=P[P.l++],U[0].c=P[P.l++],U}function W(P,U){var X=K(P);return X[1].t="s",X[1].v=P.read_shift(U-4,"cstr"),X}function L(P,U,X,J){var ie=_t(6+J.length);ie.write_shift(2,P),ie.write_shift(1,X),ie.write_shift(1,U),ie.write_shift(1,39);for(var ve=0;ve<J.length;++ve){var ke=J.charCodeAt(ve);ie.write_shift(1,ke>=128?95:ke)}return ie.write_shift(1,0),ie}function A(P,U){var X=K(P);X[1].v=P.read_shift(2);var J=X[1].v>>1;if(X[1].v&1)switch(J&7){case 0:J=(J>>3)*5e3;break;case 1:J=(J>>3)*500;break;case 2:J=(J>>3)/20;break;case 3:J=(J>>3)/200;break;case 4:J=(J>>3)/2e3;break;case 5:J=(J>>3)/2e4;break;case 6:J=(J>>3)/16;break;case 7:J=(J>>3)/64;break}return X[1].v=J,X}function E(P,U){var X=K(P),J=P.read_shift(4),ie=P.read_shift(4),ve=P.read_shift(2);if(ve==65535)return J===0&&ie===3221225472?(X[1].t="e",X[1].v=15):J===0&&ie===3489660928?(X[1].t="e",X[1].v=42):X[1].v=0,X;var ke=ve&32768;return ve=(ve&32767)-16446,X[1].v=(1-ke*2)*(ie*Math.pow(2,ve+32)+J*Math.pow(2,ve)),X}function D(P,U,X,J){var ie=_t(14);if(ie.write_shift(2,P),ie.write_shift(1,X),ie.write_shift(1,U),J==0)return ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(2,65535),ie;var ve=0,ke=0,oe=0,Ee=0;return J<0&&(ve=1,J=-J),ke=Math.log2(J)|0,J/=Math.pow(2,ke-31),Ee=J>>>0,(Ee&2147483648)==0&&(J/=2,++ke,Ee=J>>>0),J-=Ee,Ee|=2147483648,Ee>>>=0,J*=Math.pow(2,32),oe=J>>>0,ie.write_shift(4,oe),ie.write_shift(4,Ee),ke+=16383+(ve?32768:0),ie.write_shift(2,ke),ie}function R(P,U){var X=E(P);return P.l+=U-14,X}function F(P,U){var X=K(P),J=P.read_shift(4);return X[1].v=J>>6,X}function V(P,U){var X=K(P),J=P.read_shift(8,"f");return X[1].v=J,X}function Z(P,U){var X=V(P);return P.l+=U-10,X}function fe(P,U){return P[P.l+U-1]==0?P.read_shift(U,"cstr"):""}function xe(P,U){var X=P[P.l++];X>U-1&&(X=U-1);for(var J="";J.length<X;)J+=String.fromCharCode(P[P.l++]);return J}function he(P,U,X){if(!(!X.qpro||U<21)){var J=P.read_shift(1);P.l+=17,P.l+=1,P.l+=2;var ie=P.read_shift(U-21,"cstr");return[J,ie]}}function ae(P,U){for(var X={},J=P.l+U;P.l<J;){var ie=P.read_shift(2);if(ie==14e3){for(X[ie]=[0,""],X[ie][0]=P.read_shift(2);P[P.l];)X[ie][1]+=String.fromCharCode(P[P.l]),P.l++;P.l++}}return X}function H(P,U){var X=_t(5+P.length);X.write_shift(2,14e3),X.write_shift(2,U);for(var J=0;J<P.length;++J){var ie=P.charCodeAt(J);X[X.l++]=ie>127?95:ie}return X[X.l++]=0,X}var te={0:{n:"BOF",f:oa},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:y},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:_},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:fe},222:{n:"SHEETNAMELP",f:xe},65535:{n:""}},G={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:W},23:{n:"NUMBER17",f:E},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ae},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:F},38:{n:"??"},39:{n:"NUMBER27",f:V},40:{n:"FORMULA28",f:Z},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:fe},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:he},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}})();function zce(t){var e={},r=t.match(Go),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=qr(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;e.cp=KS[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=i.val;break;case"<sz":e.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":i.rgb&&(e.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return e}var $ce=(function(){var t=dx("t"),e=dx("rPr");function r(i){var a=i.match(t);if(!a)return{t:"s",v:""};var o={t:"s",v:Hn(a[1])},l=i.match(e);return l&&(o.s=zce(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(a){return a.replace(n,"").split(s).map(r).filter(function(o){return o.v})}})(),qce=(function(){var e=/(\r\n|\n)/g;function r(s,i,a){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),s.b&&(i.push("<b>"),a.push("</b>")),s.i&&(i.push("<i>"),a.push("</i>")),s.strike&&(i.push("<s>"),a.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(i.push("<"+l+">"),a.push("</"+l+">")),a.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(e,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}})(),Hce=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Wce=/<(?:\w+:)?r>/,Gce=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function y7(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Hn(bs(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=bs(t),r&&(n.h=s7(n.t))):t.match(Wce)&&(n.r=bs(t),n.t=Hn(bs((t.replace(Gce,"").match(Hce)||[]).join("").replace(Go,""))),r&&(n.h=qce($ce(n.r)))),n):{t:""}}var Kce=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Yce=/<(?:\w+:)?(?:si|sstItem)>/g,Xce=/<\/(?:\w+:)?(?:si|sstItem)>/;function Qce(t,e){var r=[],n="";if(!t)return r;var s=t.match(Kce);if(s){n=s[2].replace(Yce,"").split(Xce);for(var i=0;i!=n.length;++i){var a=y7(n[i].trim(),e);a!=null&&(r[r.length]=a)}s=qr(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var Jce=/^\s|\s$|[\t\n\r]/;function TV(t,e){if(!e.bookSST)return"";var r=[Xi];r[r.length]=Ht("sst",null,{xmlns:Tp[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var s=t[n],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(Jce)&&(i+=' xml:space="preserve"'),i+=">"+ps(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Zce(t){return[t.read_shift(4),t.read_shift(4)]}function eue(t,e){var r=[],n=!1;return uh(t,function(i,a,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(a.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function tue(t,e){return e||(e=_t(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var rue=hoe;function nue(t){var e=Cl();It(e,159,tue(t));for(var r=0;r<t.length;++r)It(e,19,rue(t[r]));return It(e,160),e.end()}function IV(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function Wd(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function sue(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=Wd(t,4),e.U=Wd(t,4),e.W=Wd(t,4),e}function iue(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},s=t.read_shift(4),i=[];s-- >0;)i.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=i,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function aue(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(iue(t));return e}function oue(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function lue(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=Wd(t,4),e.U=Wd(t,4),e.W=Wd(t,4),e}function cue(t){var e=lue(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function PV(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function RV(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function uue(t){var e=Wd(t);switch(e.Minor){case 2:return[e.Minor,due(t)];case 3:return[e.Minor,hue()];case 4:return[e.Minor,fue(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function due(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=PV(t,r),s=RV(t,t.length-t.l);return{t:"Std",h:n,v:s}}function hue(){throw new Error("File is password-protected: ECMA-376 Extensible")}function fue(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Go,function(i){var a=qr(i);switch(dd(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=a[o]});break;case"<dataIntegrity":n.encryptedHmacKey=a.encryptedHmacKey,n.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(a);break;default:throw a[0]}}),n}function pue(t,e){var r={},n=r.EncryptionVersionInfo=Wd(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,r.EncryptionHeader=PV(t,s),e-=s,r.EncryptionVerifier=RV(t,e),r}function mue(t){var e={},r=e.EncryptionVersionInfo=Wd(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function v7(t){var e=0,r,n=IV(t),s=n.length+1,i,a,o,l,c;for(r=Sf(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)a=r[i],o=(e&16384)===0?0:1,l=e<<1&32767,c=o|l,e=c^a;return e^52811}var LV=(function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(a){return(a/2|a*128)&255},s=function(a,o){return n(a^o)},i=function(a){for(var o=e[a.length-1],l=104,c=a.length-1;c>=0;--c)for(var d=a[c],p=0;p!=7;++p)d&64&&(o^=r[l]),d*=2,--l;return o};return function(a){for(var o=IV(a),l=i(o),c=o.length,d=Sf(16),p=0;p!=16;++p)d[p]=0;var g,m,y;for((c&1)===1&&(g=l>>8,d[c]=s(t[0],g),--c,g=l&255,m=o[o.length-1],d[c]=s(m,g));c>0;)--c,g=l>>8,d[c]=s(o[c],g),--c,g=l&255,d[c]=s(o[c],g);for(c=15,y=15-o.length;y>0;)g=l>>8,d[c]=s(t[y],g),--c,--y,g=l&255,d[c]=s(o[c],g),--c,--y;return d}})(),gue=function(t,e,r,n,s){s||(s=e),n||(n=LV(t));var i,a;for(i=0;i!=e.length;++i)a=e[i],a^=n[r],a=(a>>5|a<<3)&255,s[i]=a,++r;return[s,r,n]},xue=function(t){var e=0,r=LV(t);return function(n){var s=gue("",n,e,r);return e=s[1],s[0]}};function yue(t,e,r,n){var s={key:oa(t),verificationBytes:oa(t)};return r.password&&(s.verifier=v7(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=xue(r.password)),s}function vue(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=mue(t):n.Data=pue(t,e),n}function wue(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?vue(t,e-2,n):yue(t,r.biff>=8?e:e-2,r,n),n}var jV=(function(){function t(s,i){switch(i.type){case"base64":return e(ic(s),i);case"binary":return e(s,i);case"buffer":return e(pn&&Buffer.isBuffer(s)?s.toString("binary"):zf(s),i);case"array":return e(dp(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){var a=i||{},o=a.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,p){Array.isArray(o)&&(o[p]=[]);for(var g=/\\\w+\b/g,m=0,y,w=-1;y=g.exec(d);){switch(y[0]){case"\\cell":var _=d.slice(m,g.lastIndex-y[0].length);if(_[0]==" "&&(_=_.slice(1)),++w,_.length){var S={v:_,t:"s"};Array.isArray(o)?o[p][w]=S:o[Vr({r:p,c:w})]=S}break}m=g.lastIndex}w>c.e.c&&(c.e.c=w)}),o["!ref"]=nn(c),o}function r(s,i){return $f(t(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],a=Wn(s["!ref"]),o,l=Array.isArray(s),c=a.s.r;c<=a.e.r;++c){i.push("\\trowd\\trautofit1");for(var d=a.s.c;d<=a.e.c;++d)i.push("\\cellx"+(d+1));for(i.push("\\pard\\intbl"),d=a.s.c;d<=a.e.c;++d){var p=Vr({r:c,c:d});o=l?(s[c]||[])[d]:s[p],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(Zd(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}})();function _ue(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function mx(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function bue(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(e,r,n),i=Math.min(e,r,n),a=s-i;if(a===0)return[0,0,e];var o=0,l=0,c=s+i;switch(l=a/(c>1?2-c:c),s){case e:o=((r-n)/a+6)%6;break;case r:o=(n-e)/a+2;break;case n:o=(e-r)/a+4;break}return[o/6,l,c/2]}function kue(t){var e=t[0],r=t[1],n=t[2],s=r*2*(n<.5?n:1-n),i=n-s/2,a=[i,i,i],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,a[0]+=s,a[1]+=l;break;case 1:l=s*(2-o),a[0]+=l,a[1]+=s;break;case 2:l=s*(o-2),a[1]+=s,a[2]+=l;break;case 3:l=s*(4-o),a[1]+=l,a[2]+=s;break;case 4:l=s*(o-4),a[2]+=s,a[0]+=l;break;case 5:l=s*(6-o),a[2]+=l,a[0]+=s;break}for(var c=0;c!=3;++c)a[c]=Math.round(a[c]*255);return a}function I5(t,e){if(e===0)return t;var r=bue(_ue(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),mx(kue(r))}var FV=6,Sue=15,Eue=1,Bo=FV;function gx(t){return Math.floor((t+Math.round(128/Bo)/256)*Bo)}function xx(t){return Math.floor((t-5)/Bo*100+.5)/100}function P5(t){return Math.round((t*Bo+5)/Bo*256)/256}function V3(t){return P5(xx(gx(t)))}function w7(t){var e=Math.abs(t-V3(t)),r=Bo;if(e>.005)for(Bo=Eue;Bo<Sue;++Bo)Math.abs(t-V3(t))<=e&&(e=Math.abs(t-V3(t)),r=Bo);Bo=r}function Ef(t){t.width?(t.wpx=gx(t.width),t.wch=xx(t.wpx),t.MDW=Bo):t.wpx?(t.wch=xx(t.wpx),t.width=P5(t.wch),t.MDW=Bo):typeof t.wch=="number"&&(t.width=P5(t.wch),t.wpx=gx(t.width),t.MDW=Bo),t.customWidth&&delete t.customWidth}var Cue=96,DV=Cue;function yx(t){return t*96/DV}function C1(t){return t*DV/96}var Aue={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Nue(t,e,r,n){e.Borders=[];var s={},i=!1;(t[0].match(Go)||[]).forEach(function(a){var o=qr(a);switch(dd(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=Ms(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=Ms(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function Tue(t,e,r,n){e.Fills=[];var s={},i=!1;(t[0].match(Go)||[]).forEach(function(a){var o=qr(a);switch(dd(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function Iue(t,e,r,n){e.Fonts=[];var s={},i=!1;(t[0].match(Go)||[]).forEach(function(a){var o=qr(a);switch(dd(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=bs(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?Ms(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?Ms(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?Ms(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?Ms(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?Ms(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?Ms(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?Ms(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=KS[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=Ms(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=z0[s.color.index];s.color.index==81&&(l=z0[1]),l||(l=z0[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=I5(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Pue(t,e,r){e.NumberFmt=[];for(var n=Ti(Dr),s=0;s<n.length;++s)e.NumberFmt[n[s]]=Dr[n[s]];var i=t[0].match(Go);if(i)for(s=0;s<i.length;++s){var a=qr(i[s]);switch(dd(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Hn(bs(a.formatCode)),l=parseInt(a.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}Hd(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}function Rue(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Ht("numFmt",null,{numFmtId:n,formatCode:ps(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Ht("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Av=["numFmtId","fillId","fontId","borderId","xfId"],Nv=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Lue(t,e,r){e.CellXf=[];var n,s=!1;(t[0].match(Go)||[]).forEach(function(i){var a=qr(i),o=0;switch(dd(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=a,delete n[0],o=0;o<Av.length;++o)n[Av[o]]&&(n[Av[o]]=parseInt(n[Av[o]],10));for(o=0;o<Nv.length;++o)n[Nv[o]]&&(n[Nv[o]]=Ms(n[Nv[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};a.vertical&&(l.vertical=a.vertical),a.horizontal&&(l.horizontal=a.horizontal),a.textRotation!=null&&(l.textRotation=a.textRotation),a.indent&&(l.indent=a.indent),a.wrapText&&(l.wrapText=Ms(a.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}function jue(t){var e=[];return e[e.length]=Ht("cellXfs",null),t.forEach(function(r){e[e.length]=Ht("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Ht("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Fue=(function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var p;return(p=o.match(e))&&Pue(p,d,c),(p=o.match(s))&&Iue(p,d,l,c),(p=o.match(n))&&Tue(p,d,l,c),(p=o.match(i))&&Nue(p,d,l,c),(p=o.match(r))&&Lue(p,d,c),d}})();function OV(t,e){var r=[Xi,Ht("styleSheet",null,{xmlns:Tp[0],"xmlns:vt":ka.vt})],n;return t.SSF&&(n=Rue(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=jue(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Due(t,e){var r=t.read_shift(2),n=Ho(t);return[r,n]}function Oue(t,e,r){r||(r=_t(6+4*e.length)),r.write_shift(2,t),Ha(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Mue(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=voe(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=t.read_shift(2);switch(i===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=yoe(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Ho(t),n}function Bue(t,e){e||(e=_t(153)),e.write_shift(2,t.sz*20),woe(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),A5(t.color,e);var n=0;return n=2,e.write_shift(1,n),Ha(t.name,e),e.length>e.l?e.slice(0,e.l):e}var Vue=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],U3,Uue=Wo;function MT(t,e){e||(e=_t(84)),U3||(U3=U_(Vue));var r=U3[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(A5({auto:1},e),A5({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function zue(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}function MV(t,e,r){r||(r=_t(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Bg(t,e){return e||(e=_t(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var $ue=Wo;function que(t,e){return e||(e=_t(51)),e.write_shift(1,0),Bg(null,e),Bg(null,e),Bg(null,e),Bg(null,e),Bg(null,e),e.length>e.l?e.slice(0,e.l):e}function Hue(t,e){return e||(e=_t(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),C5(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function Wue(t,e,r){var n=_t(2052);return n.write_shift(4,t),C5(e,n),C5(r,n),n.length>n.l?n.slice(0,n.l):n}function Gue(t,e,r){var n={};n.NumberFmt=[];for(var s in Dr)n.NumberFmt[s]=Dr[s];n.CellXf=[],n.Fonts=[];var i=[],a=!1;return uh(t,function(l,c,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],Hd(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=I5(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:i.push(d),a=!0;break;case 38:i.pop(),a=!1;break;default:if(c.T>0)i.push(d);else if(c.T<0)i.pop();else if(!a||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function Kue(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&++r}),r!=0&&(It(t,615,pu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&It(t,44,Oue(s,e[s]))}),It(t,616))}}function Yue(t){var e=1;It(t,611,pu(e)),It(t,43,Bue({sz:12,color:{theme:1},name:"Calibri",family:2})),It(t,612)}function Xue(t){var e=2;It(t,603,pu(e)),It(t,45,MT({patternType:"none"})),It(t,45,MT({patternType:"gray125"})),It(t,604)}function Que(t){var e=1;It(t,613,pu(e)),It(t,46,que()),It(t,614)}function Jue(t){var e=1;It(t,626,pu(e)),It(t,47,MV({numFmtId:0},65535)),It(t,627)}function Zue(t,e){It(t,617,pu(e.length)),e.forEach(function(r){It(t,47,MV(r,0))}),It(t,618)}function ede(t){var e=1;It(t,619,pu(e)),It(t,48,Hue({xfId:0,name:"Normal"})),It(t,620)}function tde(t){var e=0;It(t,505,pu(e)),It(t,506)}function rde(t){var e=0;It(t,508,Wue(e,"TableStyleMedium9","PivotStyleMedium4")),It(t,509)}function nde(t,e){var r=Cl();return It(r,278),Kue(r,t.SSF),Yue(r),Xue(r),Que(r),Jue(r),Zue(r,e.cellXfs),ede(r),tde(r),rde(r),It(r,279),r.end()}var sde=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function ide(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Go)||[]).forEach(function(s){var i=qr(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(e.themeElements.clrScheme[sde.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function ade(){}function ode(){}var lde=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,cde=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,ude=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function dde(t,e,r){e.themeElements={};var n;[["clrScheme",lde,ide],["fontScheme",cde,ade],["fmtScheme",ude,ode]].forEach(function(s){if(!(n=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,e,r)})}var hde=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function BV(t,e){(!t||t.length===0)&&(t=_7());var r,n={};if(!(r=t.match(hde)))throw new Error("themeElements not found in theme");return dde(r[0],n,e),n.raw=t,n}function _7(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[Xi];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function fde(t,e,r){var n=t.l+e,s=t.read_shift(4);if(s!==124226){if(!r.cellStyles){t.l=n;return}var i=t.slice(t.l);t.l=n;var a;try{a=PB(i,{type:"array"})}catch{return}var o=Jl(a,"theme/theme/theme1.xml",!0);if(o)return BV(o,r)}}function pde(t){return t.read_shift(4)}function mde(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=gde(t,4);break;case 2:e.xclrValue=yV(t);break;case 3:e.xclrValue=pde(t);break;case 4:t.l+=4;break}return t.l+=8,e}function gde(t,e){return Wo(t,e)}function xde(t,e){return Wo(t,e)}function yde(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=mde(t);break;case 6:n[1]=xde(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function vde(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),i=[];s-- >0;)i.push(yde(t,r-t.l));return{ixfe:n,ext:i}}function wde(t,e){e.forEach(function(r){r[0]})}function _de(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Ho(t)}}function bde(t){var e=_t(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Ha(t.name,e),e.slice(0,e.l)}function kde(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function Sde(t){var e=_t(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function Ede(t,e){var r=_t(8+2*e.length);return r.write_shift(4,t),Ha(e,r),r.slice(0,r.l)}function Cde(t){return t.l+=4,t.read_shift(4)!=0}function Ade(t,e){var r=_t(8);return r.write_shift(4,t),r.write_shift(4,1),r}function Nde(t,e,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],a=!1,o=2;return uh(t,function(l,c,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(p){o==1?n.Cell.push({type:n.Types[p[0]-1].name,index:p[1]}):o==0&&n.Value.push({type:n.Types[p[0]-1].name,index:p[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:i.push(d),a=!0;break;case 36:i.pop(),a=!1;break;default:if(!c.T){if(!a||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function Tde(){var t=Cl();return It(t,332),It(t,334,pu(1)),It(t,335,bde({name:"XLDAPR",version:12e4,flags:3496657072})),It(t,336),It(t,339,Ede(1,"XLDAPR")),It(t,52),It(t,35,pu(514)),It(t,4096,pu(0)),It(t,4097,Ac(1)),It(t,36),It(t,53),It(t,340),It(t,337,Ade(1)),It(t,51,Sde([[1,0]])),It(t,338),It(t,333),t.end()}function Ide(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var s=!1,i=2,a;return t.replace(Go,function(o){var l=qr(o);switch(dd(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(a=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):i==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function VV(){var t=[Xi];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function Pde(t){var e=[];if(!t)return e;var r=1;return(t.match(Go)||[]).forEach(function(n){var s=qr(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,e.push(s);break}}),e}function Rde(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Vr(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function Lde(t,e,r){var n=[];return uh(t,function(i,a,o){switch(o){case 63:n.push(i);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function jde(t,e,r,n){if(!t)return t;var s=n||{},i=!1;uh(t,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!l.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},s)}function Fde(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var Rm=1024;function UV(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[Ht("xml",null,{"xmlns:v":Yl.v,"xmlns:o":Yl.o,"xmlns:x":Yl.x,"xmlns:mv":Yl.mv}).replace(/\/>/,">"),Ht("o:shapelayout",Ht("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Ht("v:shapetype",[Ht("v:stroke",null,{joinstyle:"miter"}),Ht("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Rm<t*1e3;)Rm+=1e3;return e.forEach(function(i){var a=mi(i[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Ht("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=Ht("v:fill",l,o),d={on:"t",obscured:"t"};++Rm,s=s.concat(["<v:shape"+hx({id:"_x0000_s"+Rm,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,Ht("v:shadow",null,d),Ht("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",po("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),po("x:AutoFill","False"),po("x:Row",String(a.r)),po("x:Column",String(a.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function BT(t,e,r,n){var s=Array.isArray(t),i;e.forEach(function(a){var o=mi(a.ref);if(s?(t[o.r]||(t[o.r]=[]),i=t[o.r][o.c]):i=t[a.ref],!i){i={t:"z"},s?t[o.r][o.c]=i:t[a.ref]=i;var l=Wn(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=nn(l);c!==t["!ref"]&&(t["!ref"]=c)}i.c||(i.c=[]);var d={a:a.author,t:a.t,r:a.r,T:r};a.h&&(d.h=a.h);for(var p=i.c.length-1;p>=0;--p){if(!r&&i.c[p].T)return;r&&!i.c[p].T&&i.c.splice(p,1)}if(r&&n){for(p=0;p<n.length;++p)if(d.a==n[p].id){d.a=n[p].name||d.a;break}}i.c.push(d)})}function Dde(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=qr(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=mi(l.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var p=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),g=!!p&&!!p[1]&&y7(p[1])||{r:"",t:"",h:""};c.r=g.r,g.r=="<t></t>"&&(g.t=g.h=""),c.t=(g.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(c.h=g.h),n.push(c)}}}}),n}function zV(t){var e=[Xi,Ht("comments",null,{xmlns:Tp[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(s){var i=ps(s.a);r.indexOf(i)==-1&&(r.push(i),e.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var s=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(s=r.indexOf(ps(l.a))),i.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),i.length<=1)e.push(po("t",ps(i[0]||"")));else{for(var a=`Comment:
    `+i[0]+`
`,o=1;o<i.length;++o)a+=`Reply:
    `+i[o]+`
`;e.push(po("t",ps(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function Ode(t,e){var r=[],n=!1,s={},i=0;return t.replace(Go,function(o,l){var c=qr(o);switch(dd(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=l+o.length;break;case"</text>":s.t=t.slice(i,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function Mde(t,e,r){var n=[Xi,Ht("ThreadedComments",null,{xmlns:ka.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(s){var i="";(s[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?i=l.id:l.parentId=i,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),n.push(Ht("threadedComment",po("text",a.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function Bde(t,e){var r=[],n=!1;return t.replace(Go,function(i){var a=qr(i);switch(dd(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return i}),r}function Vde(t){var e=[Xi,Ht("personList",null,{xmlns:ka.TCMNT,"xmlns:x":Tp[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Ht("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function Ude(t){var e={};e.iauthor=t.read_shift(4);var r=Lp(t);return e.rfx=r.s,e.ref=Vr(r.s),t.l+=16,e}function zde(t,e){return e==null&&(e=_t(36)),e.write_shift(4,t[1].iauthor),G1(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var $de=Ho;function qde(t){return Ha(t.slice(0,54))}function Hde(t,e){var r=[],n=[],s={},i=!1;return uh(t,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!i||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}function Wde(t){var e=Cl(),r=[];return It(e,628),It(e,630),t.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),It(e,632,qde(s.a)))})}),It(e,631),It(e,633),t.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:mi(n[0]),e:mi(n[0])};It(e,635,zde([i,s])),s.t&&s.t.length>0&&It(e,637,poe(s)),It(e,636),delete s.iauthor})}),It(e,634),It(e,629),e.end()}var Gde="application/vnd.ms-office.vbaProject";function Kde(t){var e=Ir.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Ir.utils.cfb_add(e,s,t.FileIndex[n].content)}}),Ir.write(e)}function Yde(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Ir.utils.cfb_add(t,s,e.FileIndex[n].content)}})}var $V=["xlsb","xlsm","xlam","biff8","xla"];function Xde(){return{"!type":"dialog"}}function Qde(){return{"!type":"dialog"}}function Jde(){return{"!type":"macro"}}function Zde(){return{"!type":"macro"}}var Qm=(function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,i,a){var o=!1,l=!1;i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=i.length>0?parseInt(i,10)|0:0,d=a.length>0?parseInt(a,10)|0:0;return o?d+=e.c:--d,l?c+=e.r:--c,s+(o?"":"$")+pi(d)+(l?"":"$")+Gi(c)}return function(s,i){return e=i,s.replace(t,r)}})(),b7=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,k7=(function(){return function(e,r){return e.replace(b7,function(n,s,i,a,o,l){var c=c7(a)-(i?0:r.c),d=l7(l)-(o?0:r.r),p=d==0?"":o?d+1:"["+d+"]",g=c==0?"":i?c+1:"["+c+"]";return s+"R"+p+"C"+g})}})();function qV(t,e){return t.replace(b7,function(r,n,s,i,a,o){return n+(s=="$"?s+i:pi(c7(i)+e.c))+(a=="$"?a+o:Gi(l7(o)+e.r))})}function ehe(t,e,r){var n=Al(e),s=n.s,i=mi(r),a={r:i.r-s.r,c:i.c-s.c};return qV(t,a)}function the(t){return t.length!=1}function VT(t){return t.replace(/_xlfn\./g,"")}function sa(t){t.l+=1}function Cf(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function HV(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return WV(t);r.biff==12&&(n=4)}var s=t.read_shift(n),i=t.read_shift(n),a=Cf(t),o=Cf(t);return{s:{r:s,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function WV(t){var e=Cf(t),r=Cf(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function rhe(t,e,r){if(r.biff<8)return WV(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),i=Cf(t),a=Cf(t);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function GV(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return nhe(t);var n=t.read_shift(r&&r.biff==12?4:2),s=Cf(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function nhe(t){var e=Cf(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function she(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function ihe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return ahe(t);var s=t.read_shift(n>=12?4:2),i=t.read_shift(2),a=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;s>524287;)s-=1048576;if(a==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:a,rRel:o}}function ahe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function ohe(t,e,r){var n=(t[t.l++]&96)>>5,s=HV(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function lhe(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var a=HV(t,i,r);return[n,s,a]}function che(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function uhe(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[n,s]}function dhe(t,e,r){var n=(t[t.l++]&96)>>5,s=rhe(t,e-1,r);return[n,s]}function hhe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function UT(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function fhe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function phe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function mhe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function ghe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function xhe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function KV(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function yhe(t){return t.read_shift(2),KV(t)}function vhe(t){return t.read_shift(2),KV(t)}function whe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=GV(t,0,r);return[n,s]}function _he(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=ihe(t,0,r);return[n,s]}function bhe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=GV(t,0,r);return[n,s,i]}function khe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[Cfe[s],QV[s],n]}function She(t,e,r){var n=t[t.l++],s=t.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:Ehe(t);return[s,(i[0]===0?QV:Efe)[i[1]]]}function Ehe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Che(t,e,r){t.l+=r&&r.biff==2?3:4}function Ahe(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Nhe(t){return t.l++,dh[t.read_shift(1)]}function The(t){return t.l++,t.read_shift(2)}function Ihe(t){return t.l++,t.read_shift(1)!==0}function Phe(t){return t.l++,Uo(t)}function Rhe(t,e,r){return t.l++,ay(t,e-1,r)}function Lhe(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Bi(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=dh[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Uo(t);break;case 2:r[1]=jp(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function jhe(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?Lp:q_)(t));return s}function Fhe(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,a=[];i!=n&&(a[i]=[]);++i)for(var o=0;o!=s;++o)a[i][o]=Lhe(t,r.biff);return a}function Dhe(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,i]}function Ohe(t,e,r){if(r.biff==5)return Mhe(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),i=t.read_shift(4);return[n,s,i]}function Mhe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function Bhe(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Vhe(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Uhe(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function zhe(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[n,s]}var $he=Wo,qhe=Wo,Hhe=Wo;function ly(t,e,r){return t.l+=2,[she(t)]}function S7(t){return t.l+=6,[]}var Whe=ly,Ghe=S7,Khe=S7,Yhe=ly;function YV(t){return t.l+=2,[oa(t),t.read_shift(2)&1]}var Xhe=ly,Qhe=YV,Jhe=S7,Zhe=ly,efe=ly,tfe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function rfe(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),i=t.read_shift(2),a=tfe[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:s,C:i}}function nfe(t){return t.l+=2,[t.read_shift(4)]}function sfe(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function ife(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function afe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function ofe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function lfe(t){return t.l+=4,[0,0]}var zT={1:{n:"PtgExp",f:Ahe},2:{n:"PtgTbl",f:Hhe},3:{n:"PtgAdd",f:sa},4:{n:"PtgSub",f:sa},5:{n:"PtgMul",f:sa},6:{n:"PtgDiv",f:sa},7:{n:"PtgPower",f:sa},8:{n:"PtgConcat",f:sa},9:{n:"PtgLt",f:sa},10:{n:"PtgLe",f:sa},11:{n:"PtgEq",f:sa},12:{n:"PtgGe",f:sa},13:{n:"PtgGt",f:sa},14:{n:"PtgNe",f:sa},15:{n:"PtgIsect",f:sa},16:{n:"PtgUnion",f:sa},17:{n:"PtgRange",f:sa},18:{n:"PtgUplus",f:sa},19:{n:"PtgUminus",f:sa},20:{n:"PtgPercent",f:sa},21:{n:"PtgParen",f:sa},22:{n:"PtgMissArg",f:sa},23:{n:"PtgStr",f:Rhe},26:{n:"PtgSheet",f:sfe},27:{n:"PtgEndSheet",f:ife},28:{n:"PtgErr",f:Nhe},29:{n:"PtgBool",f:Ihe},30:{n:"PtgInt",f:The},31:{n:"PtgNum",f:Phe},32:{n:"PtgArray",f:hhe},33:{n:"PtgFunc",f:khe},34:{n:"PtgFuncVar",f:She},35:{n:"PtgName",f:Dhe},36:{n:"PtgRef",f:whe},37:{n:"PtgArea",f:ohe},38:{n:"PtgMemArea",f:Bhe},39:{n:"PtgMemErr",f:$he},40:{n:"PtgMemNoMem",f:qhe},41:{n:"PtgMemFunc",f:Vhe},42:{n:"PtgRefErr",f:Uhe},43:{n:"PtgAreaErr",f:che},44:{n:"PtgRefN",f:_he},45:{n:"PtgAreaN",f:dhe},46:{n:"PtgMemAreaN",f:afe},47:{n:"PtgMemNoMemN",f:ofe},57:{n:"PtgNameX",f:Ohe},58:{n:"PtgRef3d",f:bhe},59:{n:"PtgArea3d",f:lhe},60:{n:"PtgRefErr3d",f:zhe},61:{n:"PtgAreaErr3d",f:uhe},255:{}},cfe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},ufe={1:{n:"PtgElfLel",f:YV},2:{n:"PtgElfRw",f:Zhe},3:{n:"PtgElfCol",f:Whe},6:{n:"PtgElfRwV",f:efe},7:{n:"PtgElfColV",f:Yhe},10:{n:"PtgElfRadical",f:Xhe},11:{n:"PtgElfRadicalS",f:Jhe},13:{n:"PtgElfColS",f:Ghe},15:{n:"PtgElfColSV",f:Khe},16:{n:"PtgElfRadicalLel",f:Qhe},25:{n:"PtgList",f:rfe},29:{n:"PtgSxName",f:nfe},255:{}},dfe={0:{n:"PtgAttrNoop",f:lfe},1:{n:"PtgAttrSemi",f:xhe},2:{n:"PtgAttrIf",f:mhe},4:{n:"PtgAttrChoose",f:fhe},8:{n:"PtgAttrGoto",f:phe},16:{n:"PtgAttrSum",f:Che},32:{n:"PtgAttrBaxcel",f:UT},33:{n:"PtgAttrBaxcel",f:UT},64:{n:"PtgAttrSpace",f:yhe},65:{n:"PtgAttrSpaceSemi",f:vhe},128:{n:"PtgAttrIfError",f:ghe},255:{}};function cy(t,e,r,n){if(n.biff<8)return Wo(t,e);for(var s=t.l+e,i=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=Fhe(t,0,n),i.push(r[a][1]);break;case"PtgMemArea":r[a][2]=jhe(t,r[a][1],n),i.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),i.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=s-t.l,e!==0&&i.push(Wo(t,e)),i}function uy(t,e,r){for(var n=t.l+e,s,i,a=[];n!=t.l;)e=n-t.l,i=t[t.l],s=zT[i]||zT[cfe[i]],(i===24||i===25)&&(s=(i===24?ufe:dfe)[t[t.l+1]]),!s||!s.f?Wo(t,e):a.push([s.n,s.f(t,e,r)]);return a}function hfe(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],i=0;i<n.length;++i){var a=n[i];if(a)switch(a[0]){case 2:s.push('"'+a[1].replace(/"/g,'""')+'"');break;default:s.push(a[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var ffe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function pfe(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function XV(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function $T(t,e,r){var n=XV(t,e,r);return n=="#REF"?n:pfe(n,r)}function Mo(t,e,r,n,s){var i=s&&s.biff||8,a={s:{c:0,r:0}},o=[],l,c,d,p=0,g=0,m,y="";if(!t[0]||!t[0][0])return"";for(var w=-1,_="",S=0,T=t[0].length;S<T;++S){var I=t[0][S];switch(I[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),w>=0){switch(t[0][w][1][0]){case 0:_=Si(" ",t[0][w][1][1]);break;case 1:_=Si("\r",t[0][w][1][1]);break;default:if(_="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][w][1][0])}c=c+_,w=-1}o.push(c+ffe[I[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=E2(I[1][1],a,s),o.push(C2(d,i));break;case"PtgRefN":d=r?E2(I[1][1],r,s):I[1][1],o.push(C2(d,i));break;case"PtgRef3d":p=I[1][1],d=E2(I[1][2],a,s),y=$T(n,p,s),o.push(y+"!"+C2(d,i));break;case"PtgFunc":case"PtgFuncVar":var M=I[1][0],K=I[1][1];M||(M=0),M&=127;var W=M==0?[]:o.slice(-M);o.length-=M,K==="User"&&(K=W.shift()),o.push(K+"("+W.join(",")+")");break;case"PtgBool":o.push(I[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(I[1]);break;case"PtgNum":o.push(String(I[1]));break;case"PtgStr":o.push('"'+I[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(I[1]);break;case"PtgAreaN":m=yT(I[1][1],r?{s:r}:a,s),o.push(O3(m,s));break;case"PtgArea":m=yT(I[1][1],a,s),o.push(O3(m,s));break;case"PtgArea3d":p=I[1][1],m=I[1][2],y=$T(n,p,s),o.push(y+"!"+O3(m,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=I[1][2];var L=(n.names||[])[g-1]||(n[0]||[])[g],A=L?L.Name:"SH33TJSNAME"+String(g);A&&A.slice(0,6)=="_xlfn."&&!s.xlfn&&(A=A.slice(6)),o.push(A);break;case"PtgNameX":var E=I[1][1];g=I[1][2];var D;if(s.biff<=5)E<0&&(E=-E),n[E]&&(D=n[E][g]);else{var R="";if(((n[E]||[])[0]||[])[0]==14849||(((n[E]||[])[0]||[])[0]==1025?n[E][g]&&n[E][g].itab>0&&(R=n.SheetNames[n[E][g].itab-1]+"!"):R=n.SheetNames[g-1]+"!"),n[E]&&n[E][g])R+=n[E][g].Name;else if(n[0]&&n[0][g])R+=n[0][g].Name;else{var F=(XV(n,E,s)||"").split(";;");F[g-1]?R=F[g-1]:R+="SH33TJSERRX"}o.push(R);break}D||(D={Name:"SH33TJSERRY"}),o.push(D.Name);break;case"PtgParen":var V="(",Z=")";if(w>=0){switch(_="",t[0][w][1][0]){case 2:V=Si(" ",t[0][w][1][1])+V;break;case 3:V=Si("\r",t[0][w][1][1])+V;break;case 4:Z=Si(" ",t[0][w][1][1])+Z;break;case 5:Z=Si("\r",t[0][w][1][1])+Z;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][w][1][0])}w=-1}o.push(V+o.pop()+Z);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:I[1][1],r:I[1][0]};var fe={c:r.c,r:r.r};if(n.sharedf[Vr(d)]){var xe=n.sharedf[Vr(d)];o.push(Mo(xe,a,fe,n,s))}else{var he=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(d.c<c[0].s.c||d.c>c[0].e.c)&&!(d.r<c[0].s.r||d.r>c[0].e.r)){o.push(Mo(c[1],a,fe,n,s)),he=!0;break}he||o.push(I[1])}break;case"PtgArray":o.push("{"+hfe(I[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":w=S;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+I[1].idx+"[#"+I[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(I));default:throw new Error("Unrecognized Formula Token: "+String(I))}var ae=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&w>=0&&ae.indexOf(t[0][S][0])==-1){I=t[0][w];var H=!0;switch(I[1][0]){case 4:H=!1;case 0:_=Si(" ",I[1][1]);break;case 5:H=!1;case 1:_=Si("\r",I[1][1]);break;default:if(_="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+I[1][0])}o.push((H?_:"")+o.pop()+(H?"":_)),w=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function mfe(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],Wo(t,e-2)];var o=uy(t,a,r);return e!==a+s&&(i=cy(t,e-a-s,o,r)),t.l=n,[o,i]}function gfe(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],Wo(t,e-2)];var o=uy(t,a,r);return e!==a+s&&(i=cy(t,e-a-s,o,r)),t.l=n,[o,i]}function xfe(t,e,r,n){var s=t.l+e,i=uy(t,n,r),a;return s!==t.l&&(a=cy(t,s-t.l,i,r)),[i,a]}function yfe(t,e,r){var n=t.l+e,s,i=t.read_shift(2),a=uy(t,i,r);return i==65535?[[],Wo(t,e-2)]:(e!==i+2&&(s=cy(t,n-i-2,a,r)),[a,s])}function vfe(t){var e;if(Bd(t,t.l+6)!==65535)return[Uo(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function wfe(t){if(t==null){var e=_t(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return hp(t);return hp(0)}function z3(t,e,r){var n=t.l+e,s=hd(t);r.biff==2&&++t.l;var i=vfe(t),a=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=gfe(t,n-t.l,r);return{cell:s,val:i[0],formula:o,shared:a>>3&1,tt:i[1]}}function _fe(t,e,r,n,s){var i=pp(e,r,s),a=wfe(t.v),o=_t(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var c=_t(t.bf.length),d=0;d<t.bf.length;++d)c[d]=t.bf[d];var p=qa([i,a,o,c]);return p}function H_(t,e,r){var n=t.read_shift(4),s=uy(t,n,r),i=t.read_shift(4),a=i>0?cy(t,i,s,r):null;return[s,a]}var bfe=H_,W_=H_,kfe=H_,Sfe=H_,Efe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},QV={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Cfe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function qT(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function Afe(t){var e="of:="+t.replace(b7,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function $3(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function Nfe(t){return t.replace(/\./,"!")}var N2={},Jm={},T2=typeof Map<"u";function E7(t,e,r){var n=0,s=t.length;if(r){if(T2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var i=T2?r.get(e):r[e];n<i.length;++n)if(t[i[n]].t===e)return t.Count++,i[n]}}else for(;n<s;++n)if(t[n].t===e)return t.Count++,n;return t[s]={t:e},t.Count++,t.Unique++,r&&(T2?(r.has(e)||r.set(e,[]),r.get(e).push(s)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(s))),s}function G_(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Bo=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=xx(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=P5(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function H0(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function qf(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],s=60,i=t.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){Hd(e.z,s),r.ssf[s]=e.z,r.revssf[e.z]=n=s;break}}for(s=0;s!=i;++s)if(t[s].numFmtId===n)return s;return t[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function JV(t,e,r,n,s,i){try{n.cellNF&&(t.z=Dr[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=zs(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Dr[e]==null&&Hd(Eae[e]||"General",e),t.t==="e")t.w=t.w||dh[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ux(t.v);else if(t.t==="d"){var a=Ea(t.v);(a|0)===a?t.w=a.toString(10):t.w=ux(a)}else{if(t.v===void 0)return"";t.w=up(t.v,Jm)}else t.t==="d"?t.w=Fc(e,Ea(t.v),Jm):t.w=Fc(e,t.v,Jm)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=i.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=I5(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=I5(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&i.Fills)throw o}}}function Tfe(t,e,r){if(t&&t["!ref"]){var n=Wn(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function Ife(t,e){var r=Wn(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=nn(r))}var Pfe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Rfe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Lfe=/<(?:\w:)?hyperlink [^>]*>/mg,jfe=/"(\w*:\w*)"/,Ffe=/<(?:\w:)?col\b[^>]*[\/]?>/g,Dfe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Ofe=/<(?:\w:)?pageMargins[^>]*\/>/g,ZV=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Mfe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Bfe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Vfe(t,e,r,n,s,i,a){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",d="",p=t.match(Rfe);p?(c=t.slice(0,p.index),d=t.slice(p.index+p[0].length)):c=d=t;var g=c.match(ZV);g?C7(g[0],o,s,r):(g=c.match(Mfe))&&zfe(g[0],g[1]||"",o,s,r);var m=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var y=c.slice(m,m+50).match(jfe);y&&Ife(o,y[1])}var w=c.match(Bfe);w&&w[1]&&t0e(w[1],s);var _=[];if(e.cellStyles){var S=c.match(Ffe);S&&Xfe(_,S)}p&&s0e(p[1],o,e,l,i,a);var T=d.match(Dfe);T&&(o["!autofilter"]=Jfe(T[0]));var I=[],M=d.match(Pfe);if(M)for(m=0;m!=M.length;++m)I[m]=Wn(M[m].slice(M[m].indexOf('"')+1));var K=d.match(Lfe);K&&Gfe(o,K,n);var W=d.match(Ofe);if(W&&(o["!margins"]=Kfe(qr(W[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=nn(l)),e.sheetRows>0&&o["!ref"]){var L=Wn(o["!ref"]);e.sheetRows<=+L.e.r&&(L.e.r=e.sheetRows-1,L.e.r>l.e.r&&(L.e.r=l.e.r),L.e.r<L.s.r&&(L.s.r=L.e.r),L.e.c>l.e.c&&(L.e.c=l.e.c),L.e.c<L.s.c&&(L.s.c=L.e.c),o["!fullref"]=o["!ref"],o["!ref"]=nn(L))}return _.length>0&&(o["!cols"]=_),I.length>0&&(o["!merges"]=I),o}function Ufe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+nn(t[r])+'"/>';return e+"</mergeCells>"}function C7(t,e,r,n){var s=qr(t);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=Hn(bs(s.codeName)))}function zfe(t,e,r,n,s){C7(t.slice(0,t.indexOf(">")),r,n,s)}function $fe(t,e,r,n,s){var i=!1,a={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}i=!0,a.codeName=Ku(ps(l))}if(t&&t["!outline"]){var c={summaryBelow:1,summaryRight:1};t["!outline"].above&&(c.summaryBelow=0),t["!outline"].left&&(c.summaryRight=0),o=(o||"")+Ht("outlinePr",null,c)}!i&&!o||(s[s.length]=Ht("sheetPr",o,a))}var qfe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Hfe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Wfe(t){var e={sheet:1};return qfe.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),Hfe.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=v7(t.password).toString(16).toUpperCase()),Ht("sheetProtection",null,e)}function Gfe(t,e,r){for(var n=Array.isArray(t),s=0;s!=e.length;++s){var i=qr(bs(e[s]),!0);if(!i.ref)return;var a=((r||{})["!id"]||[])[i.id];a?(i.Target=a.Target,i.location&&(i.Target+="#"+Hn(i.location))):(i.Target="#"+Hn(i.location),a={Target:i.Target,TargetMode:"Internal"}),i.Rel=a,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=Wn(i.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var d=Vr({c,r:l});n?(t[l]||(t[l]=[]),t[l][c]||(t[l][c]={t:"z",v:void 0}),t[l][c].l=i):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=i)}}}function Kfe(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function Yfe(t){return H0(t),Ht("pageMargins",null,t)}function Xfe(t,e){for(var r=!1,n=0;n!=e.length;++n){var s=qr(e[n],!0);s.hidden&&(s.hidden=Ms(s.hidden));var i=parseInt(s.min,10)-1,a=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,w7(s.width)),Ef(s);i<=a;)t[i++]=$s(s)}}function Qfe(t,e){for(var r=["<cols>"],n,s=0;s!=e.length;++s)(n=e[s])&&(r[r.length]=Ht("col",null,G_(s,n)));return r[r.length]="</cols>",r.join("")}function Jfe(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function Zfe(t,e,r,n){var s=typeof t.ref=="string"?t.ref:nn(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,a=Al(s);a.s.r==a.e.r&&(a.e.r=Al(e["!ref"]).e.r,s=nn(a));for(var o=0;o<i.length;++o){var l=i[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return o==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Ht("autoFilter",null,{ref:s})}var e0e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function t0e(t,e){e.Views||(e.Views=[{}]),(t.match(e0e)||[]).forEach(function(r,n){var s=qr(r);e.Views[n]||(e.Views[n]={}),+s.zoomScale&&(e.Views[n].zoom=+s.zoomScale),Ms(s.rightToLeft)&&(e.Views[n].RTL=!0)})}function r0e(t,e,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Ht("sheetViews",Ht("sheetView",null,s),{})}function n0e(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var s="",i=t.t,a=t.v;if(t.t!=="z")switch(t.t){case"b":s=t.v?"1":"0";break;case"n":s=""+t.v;break;case"e":s=dh[t.v];break;case"d":n&&n.cellDates?s=zs(t.v,-1).toISOString():(t=$s(t),t.t="n",s=""+(t.v=Ea(zs(t.v)))),typeof t.z>"u"&&(t.z=Dr[14]);break;default:s=t.v;break}var o=po("v",ps(s)),l={r:e},c=qf(n.cellXfs,t,n);switch(c!==0&&(l.s=c),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=po("v",""+E7(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=i&&(t.t=i,t.v=a),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Ht("f",ps(t.f),d)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),Ht("c",o,l)}var s0e=(function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=dx("v"),a=dx("f");return function(l,c,d,p,g,m){for(var y=0,w="",_=[],S=[],T=0,I=0,M=0,K="",W,L,A=0,E=0,D,R,F=0,V=0,Z=Array.isArray(m.CellXf),fe,xe=[],he=[],ae=Array.isArray(c),H=[],te={},G=!1,P=!!d.sheetStubs,U=l.split(e),X=0,J=U.length;X!=J;++X){w=U[X].trim();var ie=w.length;if(ie!==0){var ve=0;e:for(y=0;y<ie;++y)switch(w[y]){case">":if(w[y-1]!="/"){++y;break e}if(d&&d.cellStyles){if(L=qr(w.slice(ve,y),!0),A=L.r!=null?parseInt(L.r,10):A+1,E=-1,d.sheetRows&&d.sheetRows<A)continue;te={},G=!1,L.ht&&(G=!0,te.hpt=parseFloat(L.ht),te.hpx=C1(te.hpt)),L.hidden=="1"&&(G=!0,te.hidden=!0),L.outlineLevel!=null&&(G=!0,te.level=+L.outlineLevel),G&&(H[A-1]=te)}break;case"<":ve=y;break}if(ve>=y)break;if(L=qr(w.slice(ve,y),!0),A=L.r!=null?parseInt(L.r,10):A+1,E=-1,!(d.sheetRows&&d.sheetRows<A)){p.s.r>A-1&&(p.s.r=A-1),p.e.r<A-1&&(p.e.r=A-1),d&&d.cellStyles&&(te={},G=!1,L.ht&&(G=!0,te.hpt=parseFloat(L.ht),te.hpx=C1(te.hpt)),L.hidden=="1"&&(G=!0,te.hidden=!0),L.outlineLevel!=null&&(G=!0,te.level=+L.outlineLevel),G&&(H[A-1]=te)),_=w.slice(y).split(t);for(var ke=0;ke!=_.length&&_[ke].trim().charAt(0)=="<";++ke);for(_=_.slice(ke),y=0;y!=_.length;++y)if(w=_[y].trim(),w.length!==0){if(S=w.match(r),T=y,I=0,M=0,w="<c "+(w.slice(0,1)=="<"?">":"")+w,S!=null&&S.length===2){for(T=0,K=S[1],I=0;I!=K.length&&!((M=K.charCodeAt(I)-64)<1||M>26);++I)T=26*T+M;--T,E=T}else++E;for(I=0;I!=w.length&&w.charCodeAt(I)!==62;++I);if(++I,L=qr(w.slice(0,I),!0),L.r||(L.r=Vr({r:A-1,c:E})),K=w.slice(I),W={t:""},(S=K.match(i))!=null&&S[1]!==""&&(W.v=Hn(S[1])),d.cellFormula){if((S=K.match(a))!=null&&S[1]!==""){if(W.f=Hn(bs(S[1])).replace(/\r\n/g,`
`),d.xlfn||(W.f=VT(W.f)),S[0].indexOf('t="array"')>-1)W.F=(K.match(s)||[])[1],W.F.indexOf(":")>-1&&xe.push([Wn(W.F),W.F]);else if(S[0].indexOf('t="shared"')>-1){R=qr(S[0]);var oe=Hn(bs(S[1]));d.xlfn||(oe=VT(oe)),he[parseInt(R.si,10)]=[R,oe,L.r]}}else(S=K.match(/<f[^>]*\/>/))&&(R=qr(S[0]),he[R.si]&&(W.f=ehe(he[R.si][1],he[R.si][2],L.r)));var Ee=mi(L.r);for(I=0;I<xe.length;++I)Ee.r>=xe[I][0].s.r&&Ee.r<=xe[I][0].e.r&&Ee.c>=xe[I][0].s.c&&Ee.c<=xe[I][0].e.c&&(W.F=xe[I][1])}if(L.t==null&&W.v===void 0)if(W.f||W.F)W.v=0,W.t="n";else if(P)W.t="z";else continue;else W.t=L.t||"n";switch(p.s.c>E&&(p.s.c=E),p.e.c<E&&(p.e.c=E),W.t){case"n":if(W.v==""||W.v==null){if(!P)continue;W.t="z"}else W.v=parseFloat(W.v);break;case"s":if(typeof W.v>"u"){if(!P)continue;W.t="z"}else D=N2[parseInt(W.v,10)],W.v=D.t,W.r=D.r,d.cellHTML&&(W.h=D.h);break;case"str":W.t="s",W.v=W.v!=null?bs(W.v):"",d.cellHTML&&(W.h=s7(W.v));break;case"inlineStr":S=K.match(n),W.t="s",S!=null&&(D=y7(S[1]))?(W.v=D.t,d.cellHTML&&(W.h=D.h)):W.v="";break;case"b":W.v=Ms(W.v);break;case"d":d.cellDates?W.v=zs(W.v,1):(W.v=Ea(zs(W.v,1)),W.t="n");break;case"e":(!d||d.cellText!==!1)&&(W.w=W.v),W.v=tV[W.v];break}if(F=V=0,fe=null,Z&&L.s!==void 0&&(fe=m.CellXf[L.s],fe!=null&&(fe.numFmtId!=null&&(F=fe.numFmtId),d.cellStyles&&fe.fillId!=null&&(V=fe.fillId))),JV(W,F,V,d,g,m),d.cellDates&&Z&&W.t=="n"&&q1(Dr[F])&&(W.t="d",W.v=$_(W.v)),L.cm&&d.xlmeta){var Oe=(d.xlmeta.Cell||[])[+L.cm-1];Oe&&Oe.type=="XLDAPR"&&(W.D=!0)}if(ae){var ne=mi(L.r);c[ne.r]||(c[ne.r]=[]),c[ne.r][ne.c]=W}else c[L.r]=W}}}}H.length>0&&(c["!rows"]=H)}})();function i0e(t,e,r,n){var s=[],i=[],a=Wn(t["!ref"]),o="",l,c="",d=[],p=0,g=0,m=t["!rows"],y=Array.isArray(t),w={r:c},_,S=-1;for(g=a.s.c;g<=a.e.c;++g)d[g]=pi(g);for(p=a.s.r;p<=a.e.r;++p){for(i=[],c=Gi(p),g=a.s.c;g<=a.e.c;++g){l=d[g]+c;var T=y?(t[p]||[])[g]:t[l];T!==void 0&&(o=n0e(T,l,t,e))!=null&&i.push(o)}(i.length>0||m&&m[p])&&(w={r:c},m&&m[p]&&(_=m[p],_.hidden&&(w.hidden=1),S=-1,_.hpx?S=yx(_.hpx):_.hpt&&(S=_.hpt),S>-1&&(w.ht=S,w.customHeight=1),_.level&&(w.outlineLevel=_.level)),s[s.length]=Ht("row",i.join(""),w))}if(m)for(;p<m.length;++p)m&&m[p]&&(w={r:p+1},_=m[p],_.hidden&&(w.hidden=1),S=-1,_.hpx?S=yx(_.hpx):_.hpt&&(S=_.hpt),S>-1&&(w.ht=S,w.customHeight=1),_.level&&(w.outlineLevel=_.level),s[s.length]=Ht("row","",w));return s.join("")}function eU(t,e,r,n){var s=[Xi,Ht("worksheet",null,{xmlns:Tp[0],"xmlns:r":ka.r})],i=r.SheetNames[t],a=0,o="",l=r.Sheets[i];l==null&&(l={});var c=l["!ref"]||"A1",d=Wn(c);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),c=nn(d)}n||(n={}),l["!comments"]=[];var p=[];$fe(l,r,t,e,s),s[s.length]=Ht("dimension",null,{ref:c}),s[s.length]=r0e(l,e,t,r),e.sheetFormat&&(s[s.length]=Ht("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=Qfe(l,l["!cols"])),s[a=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=i0e(l,e),o.length>0&&(s[s.length]=o)),s.length>a+1&&(s[s.length]="</sheetData>",s[a]=s[a].replace("/>",">")),l["!protect"]&&(s[s.length]=Wfe(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=Zfe(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=Ufe(l["!merges"]));var g=-1,m,y=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(w){w[1].Target&&(m={ref:w[0]},w[1].Target.charAt(0)!="#"&&(y=ds(n,-1,ps(w[1].Target).replace(/#.*$/,""),vn.HLINK),m["r:id"]="rId"+y),(g=w[1].Target.indexOf("#"))>-1&&(m.location=ps(w[1].Target.slice(g+1))),w[1].Tooltip&&(m.tooltip=ps(w[1].Tooltip)),s[s.length]=Ht("hyperlink",null,m))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=Yfe(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=po("ignoredErrors",Ht("ignoredError",null,{numberStoredAsText:1,sqref:c}))),p.length>0&&(y=ds(n,-1,"../drawings/drawing"+(t+1)+".xml",vn.DRAW),s[s.length]=Ht("drawing",null,{"r:id":"rId"+y}),l["!drawing"]=p),l["!comments"].length>0&&(y=ds(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",vn.VML),s[s.length]=Ht("legacyDrawing",null,{"r:id":"rId"+y}),l["!legacy"]=y),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function a0e(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function o0e(t,e,r){var n=_t(145),s=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var i=320;s.hpx?i=yx(s.hpx)*20:s.hpt&&(i=s.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var a=0;s.level&&(a|=s.level),s.hidden&&(a|=16),(s.hpx||s.hpt)&&(a|=32),n.write_shift(1,a),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var c={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var p=-1,g=-1,m=d<<10;m<d+1<<10;++m){c.c=m;var y=Array.isArray(r)?(r[c.r]||[])[c.c]:r[Vr(c)];y&&(p<0&&(p=m),g=m)}p<0||(++o,n.write_shift(4,p),n.write_shift(4,g))}var w=n.l;return n.l=l,n.write_shift(4,o),n.l=w,n.length>n.l?n.slice(0,n.l):n}function l0e(t,e,r,n){var s=o0e(n,r,e);(s.length>17||(e["!rows"]||[])[n])&&It(t,0,s)}var c0e=Lp,u0e=G1;function d0e(){}function h0e(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=moe(t),r}function f0e(t,e,r){r==null&&(r=_t(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return A5({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),XB(t,r),r.slice(0,r.l)}function p0e(t){var e=Oc(t);return[e]}function m0e(t,e,r){return r==null&&(r=_t(8)),Ip(e,r)}function g0e(t){var e=Pp(t);return[e]}function x0e(t,e,r){return r==null&&(r=_t(4)),Rp(e,r)}function y0e(t){var e=Oc(t),r=t.read_shift(1);return[e,r,"b"]}function v0e(t,e,r){return r==null&&(r=_t(9)),Ip(e,r),r.write_shift(1,t.v?1:0),r}function w0e(t){var e=Pp(t),r=t.read_shift(1);return[e,r,"b"]}function _0e(t,e,r){return r==null&&(r=_t(5)),Rp(e,r),r.write_shift(1,t.v?1:0),r}function b0e(t){var e=Oc(t),r=t.read_shift(1);return[e,r,"e"]}function k0e(t,e,r){return r==null&&(r=_t(9)),Ip(e,r),r.write_shift(1,t.v),r}function S0e(t){var e=Pp(t),r=t.read_shift(1);return[e,r,"e"]}function E0e(t,e,r){return r==null&&(r=_t(8)),Rp(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function C0e(t){var e=Oc(t),r=t.read_shift(4);return[e,r,"s"]}function A0e(t,e,r){return r==null&&(r=_t(12)),Ip(e,r),r.write_shift(4,e.v),r}function N0e(t){var e=Pp(t),r=t.read_shift(4);return[e,r,"s"]}function T0e(t,e,r){return r==null&&(r=_t(8)),Rp(e,r),r.write_shift(4,e.v),r}function I0e(t){var e=Oc(t),r=Uo(t);return[e,r,"n"]}function P0e(t,e,r){return r==null&&(r=_t(16)),Ip(e,r),hp(t.v,r),r}function tU(t){var e=Pp(t),r=Uo(t);return[e,r,"n"]}function R0e(t,e,r){return r==null&&(r=_t(12)),Rp(e,r),hp(t.v,r),r}function L0e(t){var e=Oc(t),r=f7(t);return[e,r,"n"]}function j0e(t,e,r){return r==null&&(r=_t(12)),Ip(e,r),QB(t.v,r),r}function F0e(t){var e=Pp(t),r=f7(t);return[e,r,"n"]}function D0e(t,e,r){return r==null&&(r=_t(8)),Rp(e,r),QB(t.v,r),r}function O0e(t){var e=Oc(t),r=u7(t);return[e,r,"is"]}function M0e(t){var e=Oc(t),r=Ho(t);return[e,r,"str"]}function B0e(t,e,r){return r==null&&(r=_t(12+4*t.v.length)),Ip(e,r),Ha(t.v,r),r.length>r.l?r.slice(0,r.l):r}function V0e(t){var e=Pp(t),r=Ho(t);return[e,r,"str"]}function U0e(t,e,r){return r==null&&(r=_t(8+4*t.v.length)),Rp(e,r),Ha(t.v,r),r.length>r.l?r.slice(0,r.l):r}function z0e(t,e,r){var n=t.l+e,s=Oc(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"b"];if(r.cellFormula){t.l+=2;var o=W_(t,n-t.l,r);a[3]=Mo(o,null,s,r.supbooks,r)}else t.l=n;return a}function $0e(t,e,r){var n=t.l+e,s=Oc(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"e"];if(r.cellFormula){t.l+=2;var o=W_(t,n-t.l,r);a[3]=Mo(o,null,s,r.supbooks,r)}else t.l=n;return a}function q0e(t,e,r){var n=t.l+e,s=Oc(t);s.r=r["!row"];var i=Uo(t),a=[s,i,"n"];if(r.cellFormula){t.l+=2;var o=W_(t,n-t.l,r);a[3]=Mo(o,null,s,r.supbooks,r)}else t.l=n;return a}function H0e(t,e,r){var n=t.l+e,s=Oc(t);s.r=r["!row"];var i=Ho(t),a=[s,i,"str"];if(r.cellFormula){t.l+=2;var o=W_(t,n-t.l,r);a[3]=Mo(o,null,s,r.supbooks,r)}else t.l=n;return a}var W0e=Lp,G0e=G1;function K0e(t,e){return e==null&&(e=_t(4)),e.write_shift(4,t),e}function Y0e(t,e){var r=t.l+e,n=Lp(t),s=d7(t),i=Ho(t),a=Ho(t),o=Ho(t);t.l=r;var l={rfx:n,relId:s,loc:i,display:o};return a&&(l.Tooltip=a),l}function X0e(t,e){var r=_t(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));G1({s:mi(t[0]),e:mi(t[0])},r),h7("rId"+e,r);var n=t[1].Target.indexOf("#"),s=n==-1?"":t[1].Target.slice(n+1);return Ha(s||"",r),Ha(t[1].Tooltip||"",r),Ha("",r),r.slice(0,r.l)}function Q0e(){}function J0e(t,e,r){var n=t.l+e,s=JB(t),i=t.read_shift(1),a=[s];if(a[2]=i,r.cellFormula){var o=bfe(t,n-t.l,r);a[1]=o}else t.l=n;return a}function Z0e(t,e,r){var n=t.l+e,s=Lp(t),i=[s];if(r.cellFormula){var a=Sfe(t,n-t.l,r);i[1]=a,t.l=n}else t.l=n;return i}function epe(t,e,r){r==null&&(r=_t(18));var n=G_(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),r.write_shift(2,s),r}var rU=["left","right","top","bottom","header","footer"];function tpe(t){var e={};return rU.forEach(function(r){e[r]=Uo(t)}),e}function rpe(t,e){return e==null&&(e=_t(48)),H0(t),rU.forEach(function(r){hp(t[r],e)}),e}function npe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function spe(t,e,r){r==null&&(r=_t(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function ipe(t){var e=_t(24);return e.write_shift(4,4),e.write_shift(4,1),G1(t,e),e}function ape(t,e){return e==null&&(e=_t(66)),e.write_shift(2,t.password?v7(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function ope(){}function lpe(){}function cpe(t,e,r,n,s,i,a){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},p=!1,g=!1,m,y,w,_,S,T,I,M,K,W=[];o.biff=12,o["!row"]=0;var L=0,A=!1,E=[],D={},R=o.supbooks||s.supbooks||[[]];if(R.sharedf=D,R.arrayf=E,R.SheetNames=s.SheetNames||s.Sheets.map(function(ae){return ae.name}),!o.supbooks&&(o.supbooks=R,s.Names))for(var F=0;F<s.Names.length;++F)R[0][F+1]=s.Names[F];var V=[],Z=[],fe=!1;vx[16]={n:"BrtShortReal",f:tU};var xe;if(uh(t,function(H,te,G){if(!g)switch(G){case 148:c=H;break;case 0:m=H,o.sheetRows&&o.sheetRows<=m.r&&(g=!0),M=Gi(_=m.r),o["!row"]=m.r,(H.hidden||H.hpt||H.level!=null)&&(H.hpt&&(H.hpx=C1(H.hpt)),Z[H.r]=H);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(y={t:H[2]},H[2]){case"n":y.v=H[1];break;case"s":I=N2[H[1]],y.v=I.t,y.r=I.r;break;case"b":y.v=!!H[1];break;case"e":y.v=H[1],o.cellText!==!1&&(y.w=dh[y.v]);break;case"str":y.t="s",y.v=H[1];break;case"is":y.t="s",y.v=H[1].t;break}if((w=a.CellXf[H[0].iStyleRef])&&JV(y,w.numFmtId,null,o,i,a),S=H[0].c==-1?S+1:H[0].c,o.dense?(l[_]||(l[_]=[]),l[_][S]=y):l[pi(S)+M]=y,o.cellFormula){for(A=!1,L=0;L<E.length;++L){var P=E[L];m.r>=P[0].s.r&&m.r<=P[0].e.r&&S>=P[0].s.c&&S<=P[0].e.c&&(y.F=nn(P[0]),A=!0)}!A&&H.length>3&&(y.f=H[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>S&&(d.s.c=S),d.e.r<m.r&&(d.e.r=m.r),d.e.c<S&&(d.e.c=S),o.cellDates&&w&&y.t=="n"&&q1(Dr[w.numFmtId])){var U=P0(y.v);U&&(y.t="d",y.v=new Date(U.y,U.m-1,U.d,U.H,U.M,U.S,U.u))}xe&&(xe.type=="XLDAPR"&&(y.D=!0),xe=void 0);break;case 1:case 12:if(!o.sheetStubs||p)break;y={t:"z",v:void 0},S=H[0].c==-1?S+1:H[0].c,o.dense?(l[_]||(l[_]=[]),l[_][S]=y):l[pi(S)+M]=y,d.s.r>m.r&&(d.s.r=m.r),d.s.c>S&&(d.s.c=S),d.e.r<m.r&&(d.e.r=m.r),d.e.c<S&&(d.e.c=S),xe&&(xe.type=="XLDAPR"&&(y.D=!0),xe=void 0);break;case 176:W.push(H);break;case 49:xe=((o.xlmeta||{}).Cell||[])[H-1];break;case 494:var X=n["!id"][H.relId];for(X?(H.Target=X.Target,H.loc&&(H.Target+="#"+H.loc),H.Rel=X):H.relId==""&&(H.Target="#"+H.loc),_=H.rfx.s.r;_<=H.rfx.e.r;++_)for(S=H.rfx.s.c;S<=H.rfx.e.c;++S)o.dense?(l[_]||(l[_]=[]),l[_][S]||(l[_][S]={t:"z",v:void 0}),l[_][S].l=H):(T=Vr({c:S,r:_}),l[T]||(l[T]={t:"z",v:void 0}),l[T].l=H);break;case 426:if(!o.cellFormula)break;E.push(H),K=o.dense?l[_][S]:l[pi(S)+M],K.f=Mo(H[1],d,{r:m.r,c:S},R,o),K.F=nn(H[0]);break;case 427:if(!o.cellFormula)break;D[Vr(H[0].s)]=H[1],K=o.dense?l[_][S]:l[pi(S)+M],K.f=Mo(H[1],d,{r:m.r,c:S},R,o);break;case 60:if(!o.cellStyles)break;for(;H.e>=H.s;)V[H.e--]={width:H.w/256,hidden:!!(H.flags&1),level:H.level},fe||(fe=!0,w7(H.w/256)),Ef(V[H.e+1]);break;case 161:l["!autofilter"]={ref:nn(H)};break;case 476:l["!margins"]=H;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),H.name&&(s.Sheets[r].CodeName=H.name),(H.above||H.left)&&(l["!outline"]={above:H.above,left:H.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),H.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:p=!0;break;case 36:p=!1;break;case 37:p=!0;break;case 38:p=!1;break;default:if(!te.T){if(!p||o.WTF)throw new Error("Unexpected record 0x"+G.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=nn(c||d)),o.sheetRows&&l["!ref"]){var he=Wn(l["!ref"]);o.sheetRows<=+he.e.r&&(he.e.r=o.sheetRows-1,he.e.r>d.e.r&&(he.e.r=d.e.r),he.e.r<he.s.r&&(he.s.r=he.e.r),he.e.c>d.e.c&&(he.e.c=d.e.c),he.e.c<he.s.c&&(he.s.c=he.e.c),l["!fullref"]=l["!ref"],l["!ref"]=nn(he))}return W.length>0&&(l["!merges"]=W),V.length>0&&(l["!cols"]=V),Z.length>0&&(l["!rows"]=Z),l}function upe(t,e,r,n,s,i,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=$s(e),e.z=e.z||Dr[14],e.v=Ea(zs(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=qf(s.cellXfs,e,s),e.l&&i["!links"].push([Vr(l),e.l]),e.c&&i["!comments"].push([Vr(l),e.c]),e.t){case"s":case"str":return s.bookSST?(o=E7(s.Strings,e.v,s.revStrings),l.t="s",l.v=o,a?It(t,18,T0e(e,l)):It(t,7,A0e(e,l))):(l.t="str",a?It(t,17,U0e(e,l)):It(t,6,B0e(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?It(t,13,D0e(e,l)):It(t,2,j0e(e,l)):a?It(t,16,R0e(e,l)):It(t,5,P0e(e,l)),!0;case"b":return l.t="b",a?It(t,15,_0e(e,l)):It(t,4,v0e(e,l)),!0;case"e":return l.t="e",a?It(t,14,E0e(e,l)):It(t,3,k0e(e,l)),!0}return a?It(t,12,x0e(e,l)):It(t,1,m0e(e,l)),!0}function dpe(t,e,r,n){var s=Wn(e["!ref"]||"A1"),i,a="",o=[];It(t,145);var l=Array.isArray(e),c=s.e.r;e["!rows"]&&(c=Math.max(s.e.r,e["!rows"].length-1));for(var d=s.s.r;d<=c;++d){a=Gi(d),l0e(t,e,s,d);var p=!1;if(d<=s.e.r)for(var g=s.s.c;g<=s.e.c;++g){d===s.s.r&&(o[g]=pi(g)),i=o[g]+a;var m=l?(e[d]||[])[g]:e[i];if(!m){p=!1;continue}p=upe(t,m,d,g,n,e,p)}}It(t,146)}function hpe(t,e){!e||!e["!merges"]||(It(t,177,K0e(e["!merges"].length)),e["!merges"].forEach(function(r){It(t,176,G0e(r))}),It(t,178))}function fpe(t,e){!e||!e["!cols"]||(It(t,390),e["!cols"].forEach(function(r,n){r&&It(t,60,epe(n,r))}),It(t,391))}function ppe(t,e){!e||!e["!ref"]||(It(t,648),It(t,649,ipe(Wn(e["!ref"]))),It(t,650))}function mpe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var s=ds(r,-1,n[1].Target.replace(/#.*$/,""),vn.HLINK);It(t,494,X0e(n,s))}}),delete e["!links"]}function gpe(t,e,r,n){if(e["!comments"].length>0){var s=ds(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",vn.VML);It(t,551,h7("rId"+s)),e["!legacy"]=s}}function xpe(t,e,r,n){if(e["!autofilter"]){var s=e["!autofilter"],i=typeof s.ref=="string"?s.ref:nn(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,o=Al(i);o.s.r==o.e.r&&(o.e.r=Al(e["!ref"]).e.r,i=nn(o));for(var l=0;l<a.length;++l){var c=a[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+i;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),It(t,161,G1(Wn(i))),It(t,162)}}function ype(t,e,r){It(t,133),It(t,137,spe(e,r)),It(t,138),It(t,134)}function vpe(t,e){e["!protect"]&&It(t,535,ape(e["!protect"]))}function wpe(t,e,r,n){var s=Cl(),i=r.SheetNames[t],a=r.Sheets[i]||{},o=i;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=Wn(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],It(s,129),(r.vbaraw||a["!outline"])&&It(s,147,f0e(o,a["!outline"])),It(s,148,u0e(l)),ype(s,a,r.Workbook),fpe(s,a),dpe(s,a,t,e),vpe(s,a),xpe(s,a,r,t),hpe(s,a),mpe(s,a,n),a["!margins"]&&It(s,476,rpe(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&ppe(s,a),gpe(s,a,t,n),It(s,130),s.end()}function _pe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var a=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(e[+a[1]]=r?+a[2]:a[2])});var s=Hn((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[e,s,n]}function bpe(t,e,r,n,s,i){var a=i||{"!type":"chart"};if(!t)return i;var o=0,l=0,c="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(p){var g=_pe(p);d.s.r=d.s.c=0,d.e.c=o,c=pi(o),g[0].forEach(function(m,y){a[c+Gi(y)]={t:"n",v:m,z:g[1]},l=y}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(a["!ref"]=nn(d)),a}function kpe(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a,o=t.match(ZV);return o&&C7(o[0],i,s,r),(a=t.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=a[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function Spe(t,e){t.l+=10;var r=Ho(t);return{name:r}}function Epe(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a=!1;return uh(t,function(l,c,d){switch(d){case 550:i["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!a||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var A7=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Cpe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Ape=[],Npe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function HT(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],s=0;s!=e.length;++s){var i=e[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Ms(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function WT(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Ms(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function nU(t){WT(t.WBProps,A7),WT(t.CalcPr,Npe),HT(t.WBView,Cpe),HT(t.Sheets,Ape),Jm.date1904=Ms(t.WBProps.date1904)}function Tpe(t){return!t.Workbook||!t.Workbook.WBProps?"false":Ms(t.Workbook.WBProps.date1904)?"true":"false"}var Ipe="][*?/\\".split("");function sU(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Ipe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Ppe(t,e,r){t.forEach(function(n,s){sU(n);for(var i=0;i<s;++i)if(n==t[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var a=e&&e[s]&&e[s].CodeName||n;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function Rpe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];Ppe(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)Tfe(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var Lpe=/<\w+:workbook/;function jpe(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},a=0;if(t.replace(Go,function(l,c){var d=qr(l);switch(dd(d[0])){case"<?xml":break;case"<workbook":l.match(Lpe)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":A7.forEach(function(p){if(d[p[0]]!=null)switch(p[2]){case"bool":r.WBProps[p[0]]=Ms(d[p[0]]);break;case"int":r.WBProps[p[0]]=parseInt(d[p[0]],10);break;default:r.WBProps[p[0]]=d[p[0]]}}),d.codeName&&(r.WBProps.CodeName=bs(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Hn(bs(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=bs(d.name),d.comment&&(i.Comment=d.comment),d.localSheetId&&(i.Sheet=+d.localSheetId),Ms(d.hidden||"0")&&(i.Hidden=!0),a=c+l.length;break;case"</definedName>":i.Ref=Hn(bs(t.slice(a,c))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),Tp.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return nU(r),r}function iU(t){var e=[Xi];e[e.length]=Ht("workbook",null,{xmlns:Tp[0],"xmlns:r":ka.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(A7.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Ht("workbookPr",null,n);var s=t.Workbook&&t.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",i=0;i!=t.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==t.SheetNames.length&&(i=0),e[e.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",i=0;i!=t.SheetNames.length;++i){var a={name:ps(t.SheetNames[i].slice(0,31))};if(a.sheetId=""+(i+1),a["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=Ht("sheet",null,a)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Ht("definedName",ps(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function Fpe(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=G6(t),r.name=Ho(t),r}function Dpe(t,e){return e||(e=_t(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),h7(t.strRelID,e),Ha(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function Ope(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?Ho(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Mpe(t,e){e||(e=_t(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),XB(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Bpe(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function Vpe(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),i=goe(t),a=kfe(t,0,r),o=d7(t);t.l=n;var l={Name:i,Ptg:a};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function Upe(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;e||(e={}),e.biff=12;var i=[],a=[[]];return a.SheetNames=[],a.XTI=[],vx[16]={n:"BrtFRTArchID$",f:Bpe},uh(t,function(l,c,d){switch(d){case 156:a.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Mo(l.Ptg,null,null,a,e),delete e.SID,delete l.Ptg,i.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([d,l]):a[0]=[d,l],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(l),a.XTI=a.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(d),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!c.T){if(!s||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),nU(r),r.Names=i,r.supbooks=a,r}function zpe(t,e){It(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};It(t,156,Dpe(s))}It(t,144)}function $pe(t,e){e||(e=_t(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Ha("SheetJS",e),Ha(w5.version,e),Ha(w5.version,e),Ha("7262",e),e.length>e.l?e.slice(0,e.l):e}function qpe(t,e){e||(e=_t(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function Hpe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,s=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&i==-1&&(i=n);i>s||(It(t,135),It(t,158,qpe(s)),It(t,136))}}function Wpe(t,e){var r=Cl();return It(r,131),It(r,128,$pe()),It(r,153,Mpe(t.Workbook&&t.Workbook.WBProps||null)),Hpe(r,t),zpe(r,t),It(r,132),r.end()}function Gpe(t,e,r){return e.slice(-4)===".bin"?Upe(t,r):jpe(t,r)}function Kpe(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?cpe(t,n,r,s,i,a,o):Vfe(t,n,r,s,i,a,o)}function Ype(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?Epe(t,n,r,s,i):kpe(t,n,r,s,i)}function Xpe(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?Jde():Zde()}function Qpe(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?Xde():Qde()}function Jpe(t,e,r,n){return e.slice(-4)===".bin"?Gue(t,r,n):Fue(t,r,n)}function Zpe(t,e,r){return BV(t,r)}function eme(t,e,r){return e.slice(-4)===".bin"?eue(t,r):Qce(t,r)}function tme(t,e,r){return e.slice(-4)===".bin"?Hde(t,r):Dde(t,r)}function rme(t,e,r){return e.slice(-4)===".bin"?Lde(t):Pde(t)}function nme(t,e,r,n){return r.slice(-4)===".bin"?jde(t,e,r,n):void 0}function sme(t,e,r){return e.slice(-4)===".bin"?Nde(t,e,r):Ide(t,e,r)}function ime(t,e,r){return(e.slice(-4)===".bin"?Wpe:iU)(t)}function ame(t,e,r,n,s){return(e.slice(-4)===".bin"?wpe:eU)(t,r,n,s)}function ome(t,e,r){return(e.slice(-4)===".bin"?nde:OV)(t,r)}function lme(t,e,r){return(e.slice(-4)===".bin"?nue:TV)(t,r)}function cme(t,e,r){return(e.slice(-4)===".bin"?Wde:zV)(t)}function ume(t){return(t.slice(-4)===".bin"?Tde:VV)()}var aU=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,oU=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function eu(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=t.match(aU),i,a,o,l;if(s)for(l=0;l!=s.length;++l)i=s[l].match(oU),(a=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(a+1),n[o]=i[2].slice(1,i[2].length-1));return n}function dme(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(aU),s,i,a,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(oU),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?a="xmlns"+s[1].slice(6):a=s[1].slice(i+1),r[a]=s[2].slice(1,s[2].length-1));return r}var I2;function hme(t,e){var r=I2[t]||Hn(t);return r==="General"?up(e):Fc(r,e)}function fme(t,e,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Ms(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=zs(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[Hn(e)]=s}function pme(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||dh[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ux(t.v):t.w=up(t.v):t.w=hme(e||"General",t.v)}catch(i){if(r.WTF)throw i}try{var n=I2[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&q1(n)){var s=P0(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function mme(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=Aue[n.Pattern]||n.Pattern)}t[e.ID]=e}function gme(t,e,r,n,s,i,a,o,l,c){var d="General",p=n.StyleID,g={};c=c||{};var m=[],y=0;for(p===void 0&&o&&(p=o.StyleID),p===void 0&&a&&(p=a.StyleID);i[p]!==void 0&&(i[p].nf&&(d=i[p].nf),i[p].Interior&&m.push(i[p].Interior),!!i[p].Parent);)p=i[p].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ms(t);break;case"String":n.t="s",n.r=cT(Hn(t)),n.v=t.indexOf("<")>-1?Hn(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(zs(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Hn(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=tV[t],c.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=cT(e||t));break}if(pme(n,d,c),c.cellFormula!==!1)if(n.Formula){var w=Hn(n.Formula);w.charCodeAt(0)==61&&(w=w.slice(1)),n.f=Qm(w,s),delete n.Formula,n.ArrayRange=="RC"?n.F=Qm("RC:RC",s):n.ArrayRange&&(n.F=Qm(n.ArrayRange,s),l.push([Wn(n.F),n.F]))}else for(y=0;y<l.length;++y)s.r>=l[y][0].s.r&&s.r<=l[y][0].e.r&&s.c>=l[y][0].s.c&&s.c<=l[y][0].e.c&&(n.F=l[y][1]);c.cellStyles&&(m.forEach(function(_){!g.patternType&&_.patternType&&(g.patternType=_.patternType)}),n.s=g),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function xme(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function q3(t,e){var r=e||{};H1();var n=Zg(i7(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=bs(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var a=$s(r);return a.type="string",E1.to_workbook(n,a)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ot){s.indexOf("<"+ot)>=0&&(i=!0)}),i)return r1e(n,r);I2={"General Number":"General","General Date":Dr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Dr[15],"Short Date":Dr[14],"Long Time":Dr[19],"Medium Time":Dr[18],"Short Time":Dr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Dr[2],Standard:Dr[4],Percent:Dr[10],Scientific:Dr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,d={},p=[],g=r.dense?[]:{},m="",y={},w={},_=eu('<Data ss:Type="String">'),S=0,T=0,I=0,M={s:{r:2e6,c:2e6},e:{r:0,c:0}},K={},W={},L="",A=0,E=[],D={},R={},F=0,V=[],Z=[],fe={},xe=[],he,ae=!1,H=[],te=[],G={},P=0,U=0,X={Sheets:[],WBProps:{date1904:!1}},J={};fx.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ie="";o=fx.exec(n);)switch(o[3]=(ie=o[3]).toLowerCase()){case"data":if(ie=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?gme(n.slice(S,o.index),L,_,l[l.length-1][0]=="comment"?fe:y,{c:T,r:I},K,xe[T],w,H,r):(L="",_=eu(o[0]),S=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(Z.length>0&&(y.c=Z),(!r.sheetRows||r.sheetRows>I)&&y.v!==void 0&&(r.dense?(g[I]||(g[I]=[]),g[I][T]=y):g[pi(T)+Gi(I)]=y),y.HRef&&(y.l={Target:Hn(y.HRef)},y.HRefScreenTip&&(y.l.Tooltip=y.HRefScreenTip),delete y.HRef,delete y.HRefScreenTip),(y.MergeAcross||y.MergeDown)&&(P=T+(parseInt(y.MergeAcross,10)|0),U=I+(parseInt(y.MergeDown,10)|0),E.push({s:{c:T,r:I},e:{c:P,r:U}})),!r.sheetStubs)y.MergeAcross?T=P+1:++T;else if(y.MergeAcross||y.MergeDown){for(var ve=T;ve<=P;++ve)for(var ke=I;ke<=U;++ke)(ve>T||ke>I)&&(r.dense?(g[ke]||(g[ke]=[]),g[ke][ve]={t:"z"}):g[pi(ve)+Gi(ke)]={t:"z"});T=P+1}else++T;else y=dme(o[0]),y.Index&&(T=+y.Index-1),T<M.s.c&&(M.s.c=T),T>M.e.c&&(M.e.c=T),o[0].slice(-2)==="/>"&&++T,Z=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(I<M.s.r&&(M.s.r=I),I>M.e.r&&(M.e.r=I),o[0].slice(-2)==="/>"&&(w=eu(o[0]),w.Index&&(I=+w.Index-1)),T=0,++I):(w=eu(o[0]),w.Index&&(I=+w.Index-1),G={},(w.AutoFitHeight=="0"||w.Height)&&(G.hpx=parseInt(w.Height,10),G.hpt=yx(G.hpx),te[I]=G),w.Hidden=="1"&&(G.hidden=!0,te[I]=G));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));p.push(m),M.s.r<=M.e.r&&M.s.c<=M.e.c&&(g["!ref"]=nn(M),r.sheetRows&&r.sheetRows<=M.e.r&&(g["!fullref"]=g["!ref"],M.e.r=r.sheetRows-1,g["!ref"]=nn(M))),E.length&&(g["!merges"]=E),xe.length>0&&(g["!cols"]=xe),te.length>0&&(g["!rows"]=te),d[m]=g}else M={s:{r:2e6,c:2e6},e:{r:0,c:0}},I=T=0,l.push([o[3],!1]),c=eu(o[0]),m=Hn(c.Name),g=r.dense?[]:{},E=[],H=[],te=[],J={name:m,Hidden:0},X.Sheets.push(J);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),xe=[],ae=!1}break;case"style":o[1]==="/"?mme(K,W,r):W=eu(o[0]);break;case"numberformat":W.nf=Hn(eu(o[0]).Format||"General"),I2[W.nf]&&(W.nf=I2[W.nf]);for(var oe=0;oe!=392&&Dr[oe]!=W.nf;++oe);if(oe==392){for(oe=57;oe!=392;++oe)if(Dr[oe]==null){Hd(W.nf,oe);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(he=eu(o[0]),he.Hidden&&(he.hidden=!0,delete he.Hidden),he.Width&&(he.wpx=parseInt(he.Width,10)),!ae&&he.wpx>10){ae=!0,Bo=FV;for(var Ee=0;Ee<xe.length;++Ee)xe[Ee]&&Ef(xe[Ee])}ae&&Ef(he),xe[he.Index-1||xe.length]=he;for(var Oe=0;Oe<+he.Span;++Oe)xe[xe.length]=$s(he);break;case"namedrange":if(o[1]==="/")break;X.Names||(X.Names=[]);var ne=qr(o[0]),we={Name:ne.Name,Ref:Qm(ne.RefersTo.slice(1),{r:0,c:0})};X.Sheets.length>0&&(we.Sheet=X.Sheets.length-1),X.Names.push(we);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?L+=n.slice(A,o.index):A=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;W.Interior=eu(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Uoe(D,ie,n.slice(F,o.index)):F=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));xme(fe),Z.push(fe)}else l.push([o[3],!1]),c=eu(o[0]),fe={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Re=eu(o[0]);g["!autofilter"]={ref:Qm(Re.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return QT(n,r);var pe=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:pe=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:pe=!1}break;case"excelworkbook":switch(o[3]){case"date1904":X.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:pe=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:pe=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(F,o.index)){case"SheetHidden":J.Hidden=1;break;case"SheetVeryHidden":J.Hidden=2;break}else F=o.index+o[0].length;break;case"header":g["!margins"]||H0(g["!margins"]={},"xlml"),isNaN(+qr(o[0]).Margin)||(g["!margins"].header=+qr(o[0]).Margin);break;case"footer":g["!margins"]||H0(g["!margins"]={},"xlml"),isNaN(+qr(o[0]).Margin)||(g["!margins"].footer=+qr(o[0]).Margin);break;case"pagemargins":var Ke=qr(o[0]);g["!margins"]||H0(g["!margins"]={},"xlml"),isNaN(+Ke.Top)||(g["!margins"].top=+Ke.Top),isNaN(+Ke.Left)||(g["!margins"].left=+Ke.Left),isNaN(+Ke.Right)||(g["!margins"].right=+Ke.Right),isNaN(+Ke.Bottom)||(g["!margins"].bottom=+Ke.Bottom);break;case"displayrighttoleft":X.Views||(X.Views=[]),X.Views[0]||(X.Views[0]={}),X.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":g["!outline"]||(g["!outline"]={}),g["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":g["!outline"]||(g["!outline"]={}),g["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:pe=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:pe=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:pe=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:pe=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:pe=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:pe=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:pe=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:pe=!1}break;case"smarttags":break;default:pe=!1;break}if(pe||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?fme(R,ie,V,n.slice(F,o.index)):(V=o,F=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var ze={};return!r.bookSheets&&!r.bookProps&&(ze.Sheets=d),ze.SheetNames=p,ze.Workbook=X,ze.SSF=$s(Dr),ze.Props=D,ze.Custprops=R,ze}function ek(t,e){switch(T7(e=e||{}),e.type||"base64"){case"base64":return q3(ic(t),e);case"binary":case"buffer":case"file":return q3(t,e);case"array":return q3(zf(t),e)}}function yme(t,e){var r=[];return t.Props&&r.push(zoe(t.Props,e)),t.Custprops&&r.push($oe(t.Props,t.Custprops)),r.join("")}function vme(){return""}function wme(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,s){var i=[];i.push(Ht("NumberFormat",null,{"ss:Format":ps(Dr[n.numFmtId])}));var a={"ss:ID":"s"+(21+s)};r.push(Ht("Style",i.join(""),a))}),Ht("Styles",r.join(""))}function lU(t){return Ht("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+k7(t.Ref,{r:0,c:0})})}function _me(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var s=e[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(lU(s)))}return Ht("Names",r.join(""))}function bme(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,i=[],a=0;a<s.length;++a){var o=s[a];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||i.push(lU(o)))}return i.join("")}function kme(t,e,r,n){if(!t)return"";var s=[];if(t["!margins"]&&(s.push("<PageSetup>"),t["!margins"].header&&s.push(Ht("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&s.push(Ht("Footer",null,{"x:Margin":t["!margins"].footer})),s.push(Ht("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(Ht("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),t["!protect"]&&(s.push(po("ProtectContents","True")),t["!protect"].objects&&s.push(po("ProtectObjects","True")),t["!protect"].scenarios&&s.push(po("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?s.push(po("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&s.push(po("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){t["!protect"][a[0]]&&s.push("<"+a[1]+"/>")})),s.length==0?"":Ht("WorksheetOptions",s.join(""),{xmlns:Yl.x})}function Sme(t){return t.map(function(e){var r=Hae(e.t||""),n=Ht("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ht("Comment",n,{"ss:Author":e.a})}).join("")}function Eme(t,e,r,n,s,i,a){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+ps(k7(t.f,a))),t.F&&t.F.slice(0,e.length)==e){var l=mi(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=ps(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=ps(t.l.Tooltip))),r["!merges"])for(var c=r["!merges"],d=0;d!=c.length;++d)c[d].s.c!=a.c||c[d].s.r!=a.r||(c[d].e.c>c[d].s.c&&(o["ss:MergeAcross"]=c[d].e.c-c[d].s.c),c[d].e.r>c[d].s.r&&(o["ss:MergeDown"]=c[d].e.r-c[d].s.r));var p="",g="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":p="Number",g=String(t.v);break;case"b":p="Boolean",g=t.v?"1":"0";break;case"e":p="Error",g=dh[t.v];break;case"d":p="DateTime",g=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Dr[14]);break;case"s":p="String",g=qae(t.v||"");break}var m=qf(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+m),o["ss:Index"]=a.c+1;var y=t.v!=null?g:"",w=t.t=="z"?"":'<Data ss:Type="'+p+'">'+y+"</Data>";return(t.c||[]).length>0&&(w+=Sme(t.c)),Ht("Cell",w,o)}function Cme(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=C1(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Ame(t,e,r,n){if(!t["!ref"])return"";var s=Wn(t["!ref"]),i=t["!merges"]||[],a=0,o=[];t["!cols"]&&t["!cols"].forEach(function(_,S){Ef(_);var T=!!_.width,I=G_(S,_),M={"ss:Index":S+1};T&&(M["ss:Width"]=gx(I.width)),_.hidden&&(M["ss:Hidden"]="1"),o.push(Ht("Column",null,M))});for(var l=Array.isArray(t),c=s.s.r;c<=s.e.r;++c){for(var d=[Cme(c,(t["!rows"]||[])[c])],p=s.s.c;p<=s.e.c;++p){var g=!1;for(a=0;a!=i.length;++a)if(!(i[a].s.c>p)&&!(i[a].s.r>c)&&!(i[a].e.c<p)&&!(i[a].e.r<c)){(i[a].s.c!=p||i[a].s.r!=c)&&(g=!0);break}if(!g){var m={r:c,c:p},y=Vr(m),w=l?(t[c]||[])[p]:t[y];d.push(Eme(w,y,t,e,r,n,m))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function Nme(t,e,r){var n=[],s=r.SheetNames[t],i=r.Sheets[s],a=i?bme(i,e,t,r):"";return a.length>0&&n.push("<Names>"+a+"</Names>"),a=i?Ame(i,e,t,r):"",a.length>0&&n.push("<Table>"+a+"</Table>"),n.push(kme(i,e,t,r)),n.join("")}function Tme(t,e){e||(e={}),t.SSF||(t.SSF=$s(Dr)),t.SSF&&(H1(),V_(t.SSF),e.revssf=z_(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],qf(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(yme(t,e)),r.push(vme()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Ht("Worksheet",Nme(n,e,t),{"ss:Name":ps(t.SheetNames[n])}));return r[2]=wme(t,e),r[3]=_me(t),Xi+Ht("Workbook",r.join(""),{xmlns:Yl.ss,"xmlns:o":Yl.o,"xmlns:x":Yl.x,"xmlns:ss":Yl.ss,"xmlns:dt":Yl.dt,"xmlns:html":Yl.html})}function Ime(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=_oe(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=boe(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var Pme=[60,1084,2066,2165,2175];function Rme(t,e,r,n,s){var i=n,a=[],o=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}a.push(o),r.l+=i;for(var l=Bd(r,r.l),c=tk[l],d=0;c!=null&&Pme.indexOf(l)>-1;)i=Bd(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+i),a.push(o),r.l+=4+i,c=tk[l=Bd(r,r.l)];var p=qa(a);ho(p,0);var g=0;p.lens=[];for(var m=0;m<a.length;++m)p.lens.push(g),g+=a[m].length;if(p.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+p.length+" < "+n;return e.f(p,p.length,s)}function Fu(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Dr[n])}catch(i){if(e.WTF)throw i}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||dh[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ux(t.v):t.w=up(t.v):t.w=Fc(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(i){if(e.WTF)throw i}if(e.cellDates&&n&&t.t=="n"&&q1(Dr[n]||String(n))){var s=P0(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Tv(t,e,r){return{v:t,ixfe:e,t:r}}function Lme(t,e){var r={opts:{}},n={},s=e.dense?[]:{},i={},a={},o=null,l=[],c="",d={},p,g="",m,y,w,_,S={},T=[],I,M,K=[],W=[],L={Sheets:[],WBProps:{date1904:!1},Views:[{}]},A={},E=function(lt){return lt<8?z0[lt]:lt<64&&W[lt-8]||z0[lt]},D=function(lt,yt,$t){var Xt=yt.XF.data;if(!(!Xt||!Xt.patternType||!$t||!$t.cellStyles)){yt.s={},yt.s.patternType=Xt.patternType;var At;(At=mx(E(Xt.icvFore)))&&(yt.s.fgColor={rgb:At}),(At=mx(E(Xt.icvBack)))&&(yt.s.bgColor={rgb:At})}},R=function(lt,yt,$t){if(!(G>1)&&!($t.sheetRows&&lt.r>=$t.sheetRows)){if($t.cellStyles&&yt.XF&&yt.XF.data&&D(lt,yt,$t),delete yt.ixfe,delete yt.XF,p=lt,g=Vr(lt),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),lt.r<a.s.r&&(a.s.r=lt.r),lt.c<a.s.c&&(a.s.c=lt.c),lt.r+1>a.e.r&&(a.e.r=lt.r+1),lt.c+1>a.e.c&&(a.e.c=lt.c+1),$t.cellFormula&&yt.f){for(var Xt=0;Xt<T.length;++Xt)if(!(T[Xt][0].s.c>lt.c||T[Xt][0].s.r>lt.r)&&!(T[Xt][0].e.c<lt.c||T[Xt][0].e.r<lt.r)){yt.F=nn(T[Xt][0]),(T[Xt][0].s.c!=lt.c||T[Xt][0].s.r!=lt.r)&&delete yt.f,yt.f&&(yt.f=""+Mo(T[Xt][1],a,lt,H,F));break}}$t.dense?(s[lt.r]||(s[lt.r]=[]),s[lt.r][lt.c]=yt):s[g]=yt}},F={enc:!1,sbcch:0,snames:[],sharedf:S,arrayf:T,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(F.password=e.password);var V,Z=[],fe=[],xe=[],he=[],ae=!1,H=[];H.SheetNames=F.snames,H.sharedf=F.sharedf,H.arrayf=F.arrayf,H.names=[],H.XTI=[];var te=0,G=0,P=0,U=[],X=[],J;F.codepage=1200,au(1200);for(var ie=!1;t.l<t.length-1;){var ve=t.l,ke=t.read_shift(2);if(ke===0&&te===10)break;var oe=t.l===t.length?0:t.read_shift(2),Ee=tk[ke];if(Ee&&Ee.f){if(e.bookSheets&&te===133&&ke!==133)break;if(te=ke,Ee.r===2||Ee.r==12){var Oe=t.read_shift(2);if(oe-=2,!F.enc&&Oe!==ke&&((Oe&255)<<8|Oe>>8)!==ke)throw new Error("rt mismatch: "+Oe+"!="+ke);Ee.r==12&&(t.l+=10,oe-=10)}var ne={};if(ke===10?ne=Ee.f(t,oe,F):ne=Rme(ke,Ee,t,oe,F),G==0&&[9,521,1033,2057].indexOf(te)===-1)continue;switch(ke){case 34:r.opts.Date1904=L.WBProps.date1904=ne;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(F.enc||(t.l=0),F.enc=ne,!e.password)throw new Error("File is password-protected");if(ne.valid==null)throw new Error("Encryption scheme unsupported");if(!ne.valid)throw new Error("Password is incorrect");break;case 92:F.lastuser=ne;break;case 66:var we=Number(ne);switch(we){case 21010:we=1200;break;case 32768:we=1e4;break;case 32769:we=1252;break}au(F.codepage=we),ie=!0;break;case 317:F.rrtabid=ne;break;case 25:F.winlocked=ne;break;case 439:r.opts.RefreshAll=ne;break;case 12:r.opts.CalcCount=ne;break;case 16:r.opts.CalcDelta=ne;break;case 17:r.opts.CalcIter=ne;break;case 13:r.opts.CalcMode=ne;break;case 14:r.opts.CalcPrecision=ne;break;case 95:r.opts.CalcSaveRecalc=ne;break;case 15:F.CalcRefMode=ne;break;case 2211:r.opts.FullCalc=ne;break;case 129:ne.fDialog&&(s["!type"]="dialog"),ne.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),ne.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:K.push(ne);break;case 430:H.push([ne]),H[H.length-1].XTI=[];break;case 35:case 547:H[H.length-1].push(ne);break;case 24:case 536:J={Name:ne.Name,Ref:Mo(ne.rgce,a,null,H,F)},ne.itab>0&&(J.Sheet=ne.itab-1),H.names.push(J),H[0]||(H[0]=[],H[0].XTI=[]),H[H.length-1].push(ne),ne.Name=="_xlnm._FilterDatabase"&&ne.itab>0&&ne.rgce&&ne.rgce[0]&&ne.rgce[0][0]&&ne.rgce[0][0][0]=="PtgArea3d"&&(X[ne.itab-1]={ref:nn(ne.rgce[0][0][1][2])});break;case 22:F.ExternCount=ne;break;case 23:H.length==0&&(H[0]=[],H[0].XTI=[]),H[H.length-1].XTI=H[H.length-1].XTI.concat(ne),H.XTI=H.XTI.concat(ne);break;case 2196:if(F.biff<8)break;J!=null&&(J.Comment=ne[1]);break;case 18:s["!protect"]=ne;break;case 19:ne!==0&&F.WTF&&console.error("Password verifier: "+ne);break;case 133:i[ne.pos]=ne,F.snames.push(ne.name);break;case 10:{if(--G)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,s["!ref"]=nn(a),e.sheetRows&&e.sheetRows<=a.e.r){var Re=a.e.r;a.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=nn(a),a.e.r=Re}a.e.r++,a.e.c++}Z.length>0&&(s["!merges"]=Z),fe.length>0&&(s["!objects"]=fe),xe.length>0&&(s["!cols"]=xe),he.length>0&&(s["!rows"]=he),L.Sheets.push(A)}c===""?d=s:n[c]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(F.biff===8&&(F.biff={9:2,521:3,1033:4}[ke]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ne.BIFFVer]||8),F.biffguess=ne.BIFFVer==0,ne.BIFFVer==0&&ne.dt==4096&&(F.biff=5,ie=!0,au(F.codepage=28591)),F.biff==8&&ne.BIFFVer==0&&ne.dt==16&&(F.biff=2),G++)break;if(s=e.dense?[]:{},F.biff<8&&!ie&&(ie=!0,au(F.codepage=e.codepage||1252)),F.biff<5||ne.BIFFVer==0&&ne.dt==4096){c===""&&(c="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var pe={pos:t.l-oe,name:c};i[pe.pos]=pe,F.snames.push(c)}else c=(i[ve]||{name:""}).name;ne.dt==32&&(s["!type"]="chart"),ne.dt==64&&(s["!type"]="macro"),Z=[],fe=[],F.arrayf=T=[],xe=[],he=[],ae=!1,A={Hidden:(i[ve]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[ne.r]||[])[ne.c]:s[Vr({c:ne.c,r:ne.r})])&&++ne.c,I={ixfe:ne.ixfe,XF:K[ne.ixfe]||{},v:ne.val,t:"n"},P>0&&(I.z=U[I.ixfe>>8&63]),Fu(I,e,r.opts.Date1904),R({c:ne.c,r:ne.r},I,e);break;case 5:case 517:I={ixfe:ne.ixfe,XF:K[ne.ixfe],v:ne.val,t:ne.t},P>0&&(I.z=U[I.ixfe>>8&63]),Fu(I,e,r.opts.Date1904),R({c:ne.c,r:ne.r},I,e);break;case 638:I={ixfe:ne.ixfe,XF:K[ne.ixfe],v:ne.rknum,t:"n"},P>0&&(I.z=U[I.ixfe>>8&63]),Fu(I,e,r.opts.Date1904),R({c:ne.c,r:ne.r},I,e);break;case 189:for(var Ke=ne.c;Ke<=ne.C;++Ke){var ze=ne.rkrec[Ke-ne.c][0];I={ixfe:ze,XF:K[ze],v:ne.rkrec[Ke-ne.c][1],t:"n"},P>0&&(I.z=U[I.ixfe>>8&63]),Fu(I,e,r.opts.Date1904),R({c:Ke,r:ne.r},I,e)}break;case 6:case 518:case 1030:{if(ne.val=="String"){o=ne;break}if(I=Tv(ne.val,ne.cell.ixfe,ne.tt),I.XF=K[I.ixfe],e.cellFormula){var ot=ne.formula;if(ot&&ot[0]&&ot[0][0]&&ot[0][0][0]=="PtgExp"){var Be=ot[0][0][1][0],He=ot[0][0][1][1],ut=Vr({r:Be,c:He});S[ut]?I.f=""+Mo(ne.formula,a,ne.cell,H,F):I.F=((e.dense?(s[Be]||[])[He]:s[ut])||{}).F}else I.f=""+Mo(ne.formula,a,ne.cell,H,F)}P>0&&(I.z=U[I.ixfe>>8&63]),Fu(I,e,r.opts.Date1904),R(ne.cell,I,e),o=ne}break;case 7:case 519:if(o)o.val=ne,I=Tv(ne,o.cell.ixfe,"s"),I.XF=K[I.ixfe],e.cellFormula&&(I.f=""+Mo(o.formula,a,o.cell,H,F)),P>0&&(I.z=U[I.ixfe>>8&63]),Fu(I,e,r.opts.Date1904),R(o.cell,I,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{T.push(ne);var Ct=Vr(ne[0].s);if(m=e.dense?(s[ne[0].s.r]||[])[ne[0].s.c]:s[Ct],e.cellFormula&&m){if(!o||!Ct||!m)break;m.f=""+Mo(ne[1],a,ne[0],H,F),m.F=nn(ne[0])}}break;case 1212:{if(!e.cellFormula)break;if(g){if(!o)break;S[Vr(o.cell)]=ne[0],m=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[Vr(o.cell)],(m||{}).f=""+Mo(ne[0],a,p,H,F)}}break;case 253:I=Tv(l[ne.isst].t,ne.ixfe,"s"),l[ne.isst].h&&(I.h=l[ne.isst].h),I.XF=K[I.ixfe],P>0&&(I.z=U[I.ixfe>>8&63]),Fu(I,e,r.opts.Date1904),R({c:ne.c,r:ne.r},I,e);break;case 513:e.sheetStubs&&(I={ixfe:ne.ixfe,XF:K[ne.ixfe],t:"z"},P>0&&(I.z=U[I.ixfe>>8&63]),Fu(I,e,r.opts.Date1904),R({c:ne.c,r:ne.r},I,e));break;case 190:if(e.sheetStubs)for(var Et=ne.c;Et<=ne.C;++Et){var Le=ne.ixfe[Et-ne.c];I={ixfe:Le,XF:K[Le],t:"z"},P>0&&(I.z=U[I.ixfe>>8&63]),Fu(I,e,r.opts.Date1904),R({c:Et,r:ne.r},I,e)}break;case 214:case 516:case 4:I=Tv(ne.val,ne.ixfe,"s"),I.XF=K[I.ixfe],P>0&&(I.z=U[I.ixfe>>8&63]),Fu(I,e,r.opts.Date1904),R({c:ne.c,r:ne.r},I,e);break;case 0:case 512:G===1&&(a=ne);break;case 252:l=ne;break;case 1054:if(F.biff==4){U[P++]=ne[1];for(var Ye=0;Ye<P+163&&Dr[Ye]!=ne[1];++Ye);Ye>=163&&Hd(ne[1],P+163)}else Hd(ne[1],ne[0]);break;case 30:{U[P++]=ne;for(var Qe=0;Qe<P+163&&Dr[Qe]!=ne;++Qe);Qe>=163&&Hd(ne,P+163)}break;case 229:Z=Z.concat(ne);break;case 93:fe[ne.cmo[0]]=F.lastobj=ne;break;case 438:F.lastobj.TxO=ne;break;case 127:F.lastobj.ImData=ne;break;case 440:for(_=ne[0].s.r;_<=ne[0].e.r;++_)for(w=ne[0].s.c;w<=ne[0].e.c;++w)m=e.dense?(s[_]||[])[w]:s[Vr({c:w,r:_})],m&&(m.l=ne[1]);break;case 2048:for(_=ne[0].s.r;_<=ne[0].e.r;++_)for(w=ne[0].s.c;w<=ne[0].e.c;++w)m=e.dense?(s[_]||[])[w]:s[Vr({c:w,r:_})],m&&m.l&&(m.l.Tooltip=ne[1]);break;case 28:{if(F.biff<=5&&F.biff>=2)break;m=e.dense?(s[ne[0].r]||[])[ne[0].c]:s[Vr(ne[0])];var le=fe[ne[2]];m||(e.dense?(s[ne[0].r]||(s[ne[0].r]=[]),m=s[ne[0].r][ne[0].c]={t:"z"}):m=s[Vr(ne[0])]={t:"z"},a.e.r=Math.max(a.e.r,ne[0].r),a.s.r=Math.min(a.s.r,ne[0].r),a.e.c=Math.max(a.e.c,ne[0].c),a.s.c=Math.min(a.s.c,ne[0].c)),m.c||(m.c=[]),y={a:ne[1],t:le.TxO.t},m.c.push(y)}break;case 2173:wde(K[ne.ixfe],ne.ext);break;case 125:{if(!F.cellStyles)break;for(;ne.e>=ne.s;)xe[ne.e--]={width:ne.w/256,level:ne.level||0,hidden:!!(ne.flags&1)},ae||(ae=!0,w7(ne.w/256)),Ef(xe[ne.e+1])}break;case 520:{var je={};ne.level!=null&&(he[ne.r]=je,je.level=ne.level),ne.hidden&&(he[ne.r]=je,je.hidden=!0),ne.hpt&&(he[ne.r]=je,je.hpt=ne.hpt,je.hpx=C1(ne.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||H0(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ke]]=ne;break;case 161:s["!margins"]||H0(s["!margins"]={}),s["!margins"].header=ne.header,s["!margins"].footer=ne.footer;break;case 574:ne.RTL&&(L.Views[0].RTL=!0);break;case 146:W=ne;break;case 2198:V=ne;break;case 140:M=ne;break;case 442:c?A.CodeName=ne||A.name:L.WBProps.CodeName=ne||"ThisWorkbook";break}}else Ee||console.error("Missing Info for XLS Record 0x"+ke.toString(16)),t.l+=oe}return r.SheetNames=Ti(i).sort(function(We,lt){return Number(We)-Number(lt)}).map(function(We){return i[We].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&X.forEach(function(We,lt){r.Sheets[r.SheetNames[lt]]["!autofilter"]=We}),r.Strings=l,r.SSF=$s(Dr),F.enc&&(r.Encryption=F.enc),V&&(r.Themes=V),r.Metadata={},M!==void 0&&(r.Metadata.Country=M),H.names.length>0&&(L.Names=H.names),r.Workbook=L,r}var P2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function jme(t,e,r){var n=Ir.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=AT(n,K6,P2.DSI);for(var i in s)e[i]=s[i]}catch(c){if(r.WTF)throw c}var a=Ir.find(t,"/!SummaryInformation");if(a&&a.size>0)try{var o=AT(a,Y6,P2.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(c){if(r.WTF)throw c}e.HeadingPairs&&e.TitlesOfParts&&(oV(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function Fme(t,e){var r=[],n=[],s=[],i=0,a,o=nT(K6,"n"),l=nT(Y6,"n");if(t.Props)for(a=Ti(t.Props),i=0;i<a.length;++i)(Object.prototype.hasOwnProperty.call(o,a[i])?r:Object.prototype.hasOwnProperty.call(l,a[i])?n:s).push([a[i],t.Props[a[i]]]);if(t.Custprops)for(a=Ti(t.Custprops),i=0;i<a.length;++i)Object.prototype.hasOwnProperty.call(t.Props||{},a[i])||(Object.prototype.hasOwnProperty.call(o,a[i])?r:Object.prototype.hasOwnProperty.call(l,a[i])?n:s).push([a[i],t.Custprops[a[i]]]);var c=[];for(i=0;i<s.length;++i)pV.indexOf(s[i][0])>-1||aV.indexOf(s[i][0])>-1||s[i][1]!=null&&c.push(s[i]);n.length&&Ir.utils.cfb_add(e,"/SummaryInformation",NT(n,P2.SI,l,Y6)),(r.length||c.length)&&Ir.utils.cfb_add(e,"/DocumentSummaryInformation",NT(r,P2.DSI,o,K6,c.length?c:null,P2.UDI))}function cU(t,e){e||(e={}),T7(e),XS(),e.codepage&&YS(e.codepage);var r,n;if(t.FullPaths){if(Ir.find(t,"/encryption"))throw new Error("File is password-protected");r=Ir.find(t,"!CompObj"),n=Ir.find(t,"/Workbook")||Ir.find(t,"/Book")}else{switch(e.type){case"base64":t=Ql(ic(t));break;case"binary":t=Ql(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}ho(t,0),n={content:t}}var s,i;if(r&&Ime(r),e.bookProps&&!e.bookSheets)s={};else{var a=pn?"buffer":"array";if(n&&n.content)s=Lme(n.content,e);else if((i=Ir.find(t,"PerfectOffice_MAIN"))&&i.content)s=q0.to_workbook(i.content,(e.type=a,e));else if((i=Ir.find(t,"NativeContent_MAIN"))&&i.content)s=q0.to_workbook(i.content,(e.type=a,e));else throw(i=Ir.find(t,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&Ir.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=Kde(t))}var o={};return t.FullPaths&&jme(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}function Dme(t,e){var r=e||{},n=Ir.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Ir.utils.cfb_add(n,s,uU(t,r)),r.biff==8&&(t.Props||t.Custprops)&&Fme(t,n),r.biff==8&&t.vbaraw&&Yde(n,Ir.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var vx={0:{f:a0e},1:{f:p0e},2:{f:L0e},3:{f:b0e},4:{f:y0e},5:{f:I0e},6:{f:M0e},7:{f:C0e},8:{f:H0e},9:{f:q0e},10:{f:z0e},11:{f:$0e},12:{f:g0e},13:{f:F0e},14:{f:S0e},15:{f:w0e},16:{f:tU},17:{f:V0e},18:{f:N0e},19:{f:u7},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Vpe},40:{},42:{},43:{f:Mue},44:{f:Due},45:{f:Uue},46:{f:$ue},47:{f:zue},48:{},49:{f:coe},50:{},51:{f:kde},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:EV},62:{f:O0e},63:{f:Rde},64:{f:ope},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Wo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:npe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:h0e},148:{f:c0e,p:16},151:{f:Q0e},152:{},153:{f:Ope},154:{},155:{},156:{f:Fpe},157:{},158:{},159:{T:1,f:Zce},160:{T:-1},161:{T:1,f:Lp},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:W0e},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:_de},336:{T:-1},337:{f:Cde,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:G6},357:{},358:{},359:{},360:{T:1},361:{},362:{f:SV},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:J0e},427:{f:Z0e},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:tpe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:d0e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Y0e},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:G6},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:$de},633:{T:1},634:{T:-1},635:{T:1,f:Ude},636:{T:-1},637:{f:foe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Spe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:lpe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},tk={6:{f:z3},10:{f:$h},12:{f:oa},13:{f:oa},14:{f:Bi},15:{f:Bi},16:{f:Uo},17:{f:Bi},18:{f:Bi},19:{f:oa},20:{f:jT},21:{f:jT},23:{f:SV},24:{f:DT},25:{f:Bi},26:{},27:{},28:{f:lce},29:{},34:{f:Bi},35:{f:FT},38:{f:Uo},39:{f:Uo},40:{f:Uo},41:{f:Uo},42:{f:Bi},43:{f:Bi},47:{f:wue},49:{f:Fle},51:{f:oa},60:{},61:{f:Ile},64:{f:Bi},65:{f:jle},66:{f:oa},77:{},80:{},81:{},82:{},85:{f:oa},89:{},90:{},91:{},92:{f:vle},93:{f:dce},94:{},95:{f:Bi},96:{},97:{},99:{f:Bi},125:{f:EV},128:{f:Xle},129:{f:_le},130:{f:oa},131:{f:Bi},132:{f:Bi},133:{f:ble},134:{},140:{f:vce},141:{f:oa},144:{},146:{f:bce},151:{},152:{},153:{},154:{},155:{},156:{f:oa},157:{},158:{},160:{f:Tce},161:{f:Ece},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Wle},190:{f:Gle},193:{f:$h},197:{},198:{},199:{},200:{},201:{},202:{f:Bi},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:oa},220:{},221:{f:Bi},222:{},224:{f:Yle},225:{f:yle},226:{f:$h},227:{},229:{f:cce},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Sle},253:{f:Ole},255:{f:Cle},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:mV},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Bi},353:{f:$h},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:tce},431:{f:Bi},432:{},433:{},434:{},437:{},438:{f:pce},439:{f:Bi},440:{f:mce},441:{},442:{f:oy},443:{},444:{f:oa},445:{},446:{},448:{f:$h},449:{f:Tle,r:2},450:{f:$h},512:{f:PT},513:{f:Nce},515:{f:Zle},516:{f:Ble},517:{f:LT},519:{f:Ice},520:{f:Ale},523:{},545:{f:OT},549:{f:IT},566:{},574:{f:Rle},638:{f:Hle},659:{},1048:{},1054:{f:Ule},1084:{},1212:{f:ice},2048:{f:xce},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Cv},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:$h},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:kce,r:12},2173:{f:vde,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Bi,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:sce,r:12},2197:{},2198:{f:fde,r:12},2199:{},2200:{},2201:{},2202:{f:ace,r:12},2203:{f:$h},2204:{},2205:{},2206:{},2207:{},2211:{f:Nle},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:oa},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Cce},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:_ce},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:PT},1:{},2:{f:Fce},3:{f:Lce},4:{f:Rce},5:{f:LT},7:{f:Oce},8:{},9:{f:Cv},11:{},22:{f:oa},30:{f:$le},31:{},32:{},33:{f:OT},36:{},37:{f:IT},50:{f:Mce},62:{},52:{},67:{},68:{f:oa},69:{},86:{},126:{},127:{f:Pce},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Bce},223:{},234:{},354:{},421:{},518:{f:z3},521:{f:Cv},536:{f:DT},547:{f:FT},561:{},579:{},1030:{f:z3},1033:{f:Cv},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Wt(t,e,r,n){var s=e;if(!isNaN(s)){var i=n||(r||[]).length||0,a=t.next(4);a.write_shift(2,s),a.write_shift(2,i),i>0&&o7(r)&&t.push(r)}}function Ome(t,e,r,n){var s=(r||[]).length||0;if(s<=8224)return Wt(t,e,r,s);var i=e;if(!isNaN(i)){for(var a=r.parts||[],o=0,l=0,c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;var d=t.next(4);for(d.write_shift(2,i),d.write_shift(2,c),t.push(r.slice(l,l+c)),l+=c;l<s;){for(d=t.next(4),d.write_shift(2,60),c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;d.write_shift(2,c),t.push(r.slice(l,l+c)),l+=c}}}function dy(t,e,r){return t||(t=_t(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function Mme(t,e,r,n){var s=_t(9);return dy(s,t,e),gV(r,n||"b",s),s}function Bme(t,e,r){var n=_t(8+2*r.length);return dy(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Vme(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?Ea(zs(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?Wt(t,2,Dce(r,n,s)):Wt(t,3,jce(r,n,s));return;case"b":case"e":Wt(t,5,Mme(r,n,e.v,e.t));return;case"s":case"str":Wt(t,4,Bme(r,n,(e.v||"").slice(0,255)));return}Wt(t,1,dy(null,r,n))}function Ume(t,e,r,n){var s=Array.isArray(e),i=Wn(e["!ref"]||"A1"),a,o="",l=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),a=nn(i)}for(var c=i.s.r;c<=i.e.r;++c){o=Gi(c);for(var d=i.s.c;d<=i.e.c;++d){c===i.s.r&&(l[d]=pi(d)),a=l[d]+o;var p=s?(e[c]||[])[d]:e[a];p&&Vme(t,p,c,d)}}}function zme(t,e){for(var r=e||{},n=Cl(),s=0,i=0;i<t.SheetNames.length;++i)t.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Wt(n,r.biff==4?1033:r.biff==3?521:9,x7(t,16,r)),Ume(n,t.Sheets[t.SheetNames[s]],s,r),Wt(n,10),n.end()}function $me(t,e,r){Wt(t,49,Dle({sz:12,name:"Arial"},r))}function qme(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&Wt(t,1054,zle(s,e[s],r))})}function Hme(t,e){var r=_t(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Wt(t,2151,r),r=_t(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),_V(Wn(e["!ref"]||"A1"),r),r.write_shift(4,4),Wt(t,2152,r)}function Wme(t,e){for(var r=0;r<16;++r)Wt(t,224,RT({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Wt(t,224,RT(n,0,e))})}function Gme(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Wt(t,440,gce(n)),n[1].Tooltip&&Wt(t,2048,yce(n))}delete e["!links"]}function Kme(t,e){if(e){var r=0;e.forEach(function(n,s){++r<=256&&n&&Wt(t,125,Sce(G_(s,n),s))})}}function Yme(t,e,r,n,s){var i=16+qf(s.cellXfs,e,s);if(e.v==null&&!e.bf){Wt(t,513,pp(r,n,i));return}if(e.bf)Wt(t,6,_fe(e,r,n,s,i));else switch(e.t){case"d":case"n":var a=e.t=="d"?Ea(zs(e.v)):e.v;Wt(t,515,ece(r,n,a,i));break;case"b":case"e":Wt(t,517,Jle(r,n,e.v,i,s,e.t));break;case"s":case"str":if(s.bookSST){var o=E7(s.Strings,e.v,s.revStrings);Wt(t,253,Mle(r,n,o,i))}else Wt(t,516,Vle(r,n,(e.v||"").slice(0,255),i,s));break;default:Wt(t,513,pp(r,n,i))}}function Xme(t,e,r){var n=Cl(),s=r.SheetNames[t],i=r.Sheets[s]||{},a=(r||{}).Workbook||{},o=(a.Sheets||[])[t]||{},l=Array.isArray(i),c=e.biff==8,d,p="",g=[],m=Wn(i["!ref"]||"A1"),y=c?65536:16384;if(m.e.c>255||m.e.r>=y){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,y-1)}Wt(n,2057,x7(r,16,e)),Wt(n,13,Ac(1)),Wt(n,12,Ac(100)),Wt(n,15,sl(!0)),Wt(n,17,sl(!1)),Wt(n,16,hp(.001)),Wt(n,95,sl(!0)),Wt(n,42,sl(!1)),Wt(n,43,sl(!1)),Wt(n,130,Ac(1)),Wt(n,128,Qle()),Wt(n,131,sl(!1)),Wt(n,132,sl(!1)),c&&Kme(n,i["!cols"]),Wt(n,512,qle(m,e)),c&&(i["!links"]=[]);for(var w=m.s.r;w<=m.e.r;++w){p=Gi(w);for(var _=m.s.c;_<=m.e.c;++_){w===m.s.r&&(g[_]=pi(_)),d=g[_]+p;var S=l?(i[w]||[])[_]:i[d];S&&(Yme(n,S,w,_,e),c&&S.l&&i["!links"].push([d,S.l]))}}var T=o.CodeName||o.name||s;return c&&Wt(n,574,Lle((a.Views||[])[0])),c&&(i["!merges"]||[]).length&&Wt(n,229,uce(i["!merges"])),c&&Gme(n,i),Wt(n,442,xV(T)),c&&Hme(n,i),Wt(n,10),n.end()}function Qme(t,e,r){var n=Cl(),s=(t||{}).Workbook||{},i=s.Sheets||[],a=s.WBProps||{},o=r.biff==8,l=r.biff==5;if(Wt(n,2057,x7(t,5,r)),r.bookType=="xla"&&Wt(n,135),Wt(n,225,o?Ac(1200):null),Wt(n,193,Joe(2)),l&&Wt(n,191),l&&Wt(n,192),Wt(n,226),Wt(n,92,wle("SheetJS",r)),Wt(n,66,Ac(o?1200:1252)),o&&Wt(n,353,Ac(0)),o&&Wt(n,448),Wt(n,317,Ace(t.SheetNames.length)),o&&t.vbaraw&&Wt(n,211),o&&t.vbaraw){var c=a.CodeName||"ThisWorkbook";Wt(n,442,xV(c))}Wt(n,156,Ac(17)),Wt(n,25,sl(!1)),Wt(n,18,sl(!1)),Wt(n,19,Ac(0)),o&&Wt(n,431,sl(!1)),o&&Wt(n,444,Ac(0)),Wt(n,61,Ple()),Wt(n,64,sl(!1)),Wt(n,141,Ac(0)),Wt(n,34,sl(Tpe(t)=="true")),Wt(n,14,sl(!0)),o&&Wt(n,439,sl(!1)),Wt(n,218,Ac(0)),$me(n,t,r),qme(n,t.SSF,r),Wme(n,r),o&&Wt(n,352,sl(!1));var d=n.end(),p=Cl();o&&Wt(p,140,wce()),o&&r.Strings&&Ome(p,252,Ele(r.Strings)),Wt(p,10);var g=p.end(),m=Cl(),y=0,w=0;for(w=0;w<t.SheetNames.length;++w)y+=(o?12:11)+(o?2:1)*t.SheetNames[w].length;var _=d.length+y+g.length;for(w=0;w<t.SheetNames.length;++w){var S=i[w]||{};Wt(m,133,kle({pos:_,hs:S.Hidden||0,dt:0,name:t.SheetNames[w]},r)),_+=e[w].length}var T=m.end();if(y!=T.length)throw new Error("BS8 "+y+" != "+T.length);var I=[];return d.length&&I.push(d),T.length&&I.push(T),g.length&&I.push(g),qa(I)}function Jme(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=$s(Dr)),t&&t.SSF&&(H1(),V_(t.SSF),r.revssf=z_(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,I7(r),r.cellXfs=[],qf(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var s=0;s<t.SheetNames.length;++s)n[n.length]=Xme(s,r,t);return n.unshift(Qme(t,n,r)),qa(n)}function uU(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var s=Al(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=e||{};switch(i.biff||2){case 8:case 5:return Jme(t,e);case 4:case 3:case 2:return zme(t,e)}throw new Error("invalid type "+i.bookType+" for BIFF")}function GT(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=t.match(/<\/table/i),a=s.index,o=i&&i.index||t.length,l=Dae(t.slice(a,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,d=0,p=0,g=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},y=[];for(a=0;a<l.length;++a){var w=l[a].trim(),_=w.slice(0,3).toLowerCase();if(_=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}d=0;continue}if(!(_!="<td"&&_!="<th")){var S=w.split(/<\/t[dh]>/i);for(o=0;o<S.length;++o){var T=S[o].trim();if(T.match(/<t[dh]/i)){for(var I=T,M=0;I.charAt(0)=="<"&&(M=I.indexOf(">"))>-1;)I=I.slice(M+1);for(var K=0;K<y.length;++K){var W=y[K];W.s.c==d&&W.s.r<c&&c<=W.e.r&&(d=W.e.c+1,K=-1)}var L=qr(T.slice(0,T.indexOf(">")));g=L.colspan?+L.colspan:1,((p=+L.rowspan)>1||g>1)&&y.push({s:{r:c,c:d},e:{r:c+(p||1)-1,c:d+g-1}});var A=L.t||L["data-t"]||"";if(!I.length){d+=g;continue}if(I=jB(I),m.s.r>c&&(m.s.r=c),m.e.r<c&&(m.e.r=c),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!I.length){d+=g;continue}var E={t:"s",v:I};r.raw||!I.trim().length||A=="s"||(I==="TRUE"?E={t:"b",v:!0}:I==="FALSE"?E={t:"b",v:!1}:isNaN(fu(I))?isNaN(S1(I).getDate())||(E={t:"d",v:zs(I)},r.cellDates||(E={t:"n",v:Ea(E.v)}),E.z=r.dateNF||Dr[14]):E={t:"n",v:fu(I)}),r.dense?(n[c]||(n[c]=[]),n[c][d]=E):n[Vr({r:c,c:d})]=E,d+=g}}}}return n["!ref"]=nn(m),y.length&&(n["!merges"]=y),n}function Zme(t,e,r,n){for(var s=t["!merges"]||[],i=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>r||s[c].s.c>a)&&!(s[c].e.r<r||s[c].e.c<a)){if(s[c].s.r<r||s[c].s.c<a){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var d=Vr({r,c:a}),p=n.dense?(t[r]||[])[a]:t[d],g=p&&p.v!=null&&(p.h||s7(p.w||(Zd(p),p.w)||""))||"",m={};o>1&&(m.rowspan=o),l>1&&(m.colspan=l),n.editable?g='<span contenteditable="true">'+g+"</span>":p&&(m["data-t"]=p&&p.t||"z",p.v!=null&&(m["data-v"]=p.v),p.z!=null&&(m["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+p.l.Target+'">'+g+"</a>")),m.id=(n.id||"sjs")+"-"+d,i.push(Ht("td",g,m))}}var y="<tr>";return y+i.join("")+"</tr>"}var e1e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',t1e="</body></html>";function r1e(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return $f(GT(r[0],e),e);var n=L7();return r.forEach(function(s,i){j7(n,GT(s,e),"Sheet"+(i+1))}),n}function n1e(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function dU(t,e){var r=e||{},n=r.header!=null?r.header:e1e,s=r.footer!=null?r.footer:t1e,i=[n],a=Al(t["!ref"]);r.dense=Array.isArray(t),i.push(n1e(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)i.push(Zme(t,a,o,r));return i.push("</table>"+s),i.join("")}function hU(t,e,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var a=typeof n.origin=="string"?mi(n.origin):n.origin;s=a.r,i=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:i}};if(t["!ref"]){var d=Al(t["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),s==-1&&(c.e.r=s=d.e.r+1)}var p=[],g=0,m=t["!rows"]||(t["!rows"]=[]),y=0,w=0,_=0,S=0,T=0,I=0;for(t["!cols"]||(t["!cols"]=[]);y<o.length&&w<l;++y){var M=o[y];if(KT(M)){if(n.display)continue;m[w]={hidden:!0}}var K=M.children;for(_=S=0;_<K.length;++_){var W=K[_];if(!(n.display&&KT(W))){var L=W.hasAttribute("data-v")?W.getAttribute("data-v"):W.hasAttribute("v")?W.getAttribute("v"):jB(W.innerHTML),A=W.getAttribute("data-z")||W.getAttribute("z");for(g=0;g<p.length;++g){var E=p[g];E.s.c==S+i&&E.s.r<w+s&&w+s<=E.e.r&&(S=E.e.c+1-i,g=-1)}I=+W.getAttribute("colspan")||1,((T=+W.getAttribute("rowspan")||1)>1||I>1)&&p.push({s:{r:w+s,c:S+i},e:{r:w+s+(T||1)-1,c:S+i+(I||1)-1}});var D={t:"s",v:L},R=W.getAttribute("data-t")||W.getAttribute("t")||"";L!=null&&(L.length==0?D.t=R||"z":n.raw||L.trim().length==0||R=="s"||(L==="TRUE"?D={t:"b",v:!0}:L==="FALSE"?D={t:"b",v:!1}:isNaN(fu(L))?isNaN(S1(L).getDate())||(D={t:"d",v:zs(L)},n.cellDates||(D={t:"n",v:Ea(D.v)}),D.z=n.dateNF||Dr[14]):D={t:"n",v:fu(L)})),D.z===void 0&&A!=null&&(D.z=A);var F="",V=W.getElementsByTagName("A");if(V&&V.length)for(var Z=0;Z<V.length&&!(V[Z].hasAttribute("href")&&(F=V[Z].getAttribute("href"),F.charAt(0)!="#"));++Z);F&&F.charAt(0)!="#"&&(D.l={Target:F}),n.dense?(t[w+s]||(t[w+s]=[]),t[w+s][S+i]=D):t[Vr({c:S+i,r:w+s})]=D,c.e.c<S+i&&(c.e.c=S+i),S+=I}}++w}return p.length&&(t["!merges"]=(t["!merges"]||[]).concat(p)),c.e.r=Math.max(c.e.r,w-1+s),t["!ref"]=nn(c),w>=l&&(t["!fullref"]=nn((c.e.r=o.length-y+w-1+s,c))),t}function fU(t,e){var r=e||{},n=r.dense?[]:{};return hU(n,t,e)}function s1e(t,e){return $f(fU(t,e),e)}function KT(t){var e="",r=i1e(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function i1e(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function a1e(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Hn(e.replace(/<[^>]*>/g,""));return[r]}var YT={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function pU(t,e){var r=e||{},n=i7(t),s=[],i,a,o={name:""},l="",c=0,d,p,g={},m=[],y=r.dense?[]:{},w,_,S={value:""},T="",I=0,M=[],K=-1,W=-1,L={s:{r:1e6,c:1e7},e:{r:0,c:0}},A=0,E={},D=[],R={},F=0,V=0,Z=[],fe=1,xe=1,he=[],ae={Names:[]},H={},te=["",""],G=[],P={},U="",X=0,J=!1,ie=!1,ve=0;for(fx.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");w=fx.exec(n);)switch(w[3]=w[3].replace(/_.*$/,"")){case"table":case"":w[1]==="/"?(L.e.c>=L.s.c&&L.e.r>=L.s.r?y["!ref"]=nn(L):y["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=L.e.r&&(y["!fullref"]=y["!ref"],L.e.r=r.sheetRows-1,y["!ref"]=nn(L)),D.length&&(y["!merges"]=D),Z.length&&(y["!rows"]=Z),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),g[d.name]=y,ie=!1):w[0].charAt(w[0].length-2)!=="/"&&(d=qr(w[0],!1),K=W=-1,L.s.r=L.s.c=1e7,L.e.r=L.e.c=0,y=r.dense?[]:{},D=[],Z=[],ie=!0);break;case"table-row-group":w[1]==="/"?--A:++A;break;case"table-row":case"":if(w[1]==="/"){K+=fe,fe=1;break}if(p=qr(w[0],!1),p.?K=p.-1:K==-1&&(K=0),fe=+p["number-rows-repeated"]||1,fe<10)for(ve=0;ve<fe;++ve)A>0&&(Z[K+ve]={level:A});W=-1;break;case"covered-table-cell":w[1]!=="/"&&++W,r.sheetStubs&&(r.dense?(y[K]||(y[K]=[]),y[K][W]={t:"z"}):y[Vr({r:K,c:W})]={t:"z"}),T="",M=[];break;case"table-cell":case"":if(w[0].charAt(w[0].length-2)==="/")++W,S=qr(w[0],!1),xe=parseInt(S["number-columns-repeated"]||"1",10),_={t:"z",v:null},S.formula&&r.cellFormula!=!1&&(_.f=qT(Hn(S.formula))),(S.||S["value-type"])=="string"&&(_.t="s",_.v=Hn(S["string-value"]||""),r.dense?(y[K]||(y[K]=[]),y[K][W]=_):y[Vr({r:K,c:W})]=_),W+=xe-1;else if(w[1]!=="/"){++W,T="",I=0,M=[],xe=1;var ke=fe?K+fe-1:K;if(W>L.e.c&&(L.e.c=W),W<L.s.c&&(L.s.c=W),K<L.s.r&&(L.s.r=K),ke>L.e.r&&(L.e.r=ke),S=qr(w[0],!1),G=[],P={},_={t:S.||S["value-type"],v:null},r.cellFormula)if(S.formula&&(S.formula=Hn(S.formula)),S["number-matrix-columns-spanned"]&&S["number-matrix-rows-spanned"]&&(F=parseInt(S["number-matrix-rows-spanned"],10)||0,V=parseInt(S["number-matrix-columns-spanned"],10)||0,R={s:{r:K,c:W},e:{r:K+F-1,c:W+V-1}},_.F=nn(R),he.push([R,_.F])),S.formula)_.f=qT(S.formula);else for(ve=0;ve<he.length;++ve)K>=he[ve][0].s.r&&K<=he[ve][0].e.r&&W>=he[ve][0].s.c&&W<=he[ve][0].e.c&&(_.F=he[ve][1]);switch((S["number-columns-spanned"]||S["number-rows-spanned"])&&(F=parseInt(S["number-rows-spanned"],10)||0,V=parseInt(S["number-columns-spanned"],10)||0,R={s:{r:K,c:W},e:{r:K+F-1,c:W+V-1}},D.push(R)),S["number-columns-repeated"]&&(xe=parseInt(S["number-columns-repeated"],10)),_.t){case"boolean":_.t="b",_.v=Ms(S["boolean-value"]);break;case"float":_.t="n",_.v=parseFloat(S.value);break;case"percentage":_.t="n",_.v=parseFloat(S.value);break;case"currency":_.t="n",_.v=parseFloat(S.value);break;case"date":_.t="d",_.v=zs(S["date-value"]),r.cellDates||(_.t="n",_.v=Ea(_.v)),_.z="m/d/yy";break;case"time":_.t="n",_.v=Lae(S["time-value"])/86400,r.cellDates&&(_.t="d",_.v=$_(_.v)),_.z="HH:MM:SS";break;case"number":_.t="n",_.v=parseFloat(S.);break;default:if(_.t==="string"||_.t==="text"||!_.t)_.t="s",S["string-value"]!=null&&(T=Hn(S["string-value"]),M=[]);else throw new Error("Unsupported value type "+_.t)}}else{if(J=!1,_.t==="s"&&(_.v=T||"",M.length&&(_.R=M),J=I==0),H.Target&&(_.l=H),G.length>0&&(_.c=G,G=[]),T&&r.cellText!==!1&&(_.w=T),J&&(_.t="z",delete _.v),(!J||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=K))for(var oe=0;oe<fe;++oe){if(xe=parseInt(S["number-columns-repeated"]||"1",10),r.dense)for(y[K+oe]||(y[K+oe]=[]),y[K+oe][W]=oe==0?_:$s(_);--xe>0;)y[K+oe][W+xe]=$s(_);else for(y[Vr({r:K+oe,c:W})]=_;--xe>0;)y[Vr({r:K+oe,c:W+xe})]=$s(_);L.e.c<=W&&(L.e.c=W)}xe=parseInt(S["number-columns-repeated"]||"1",10),W+=xe-1,xe=0,_={},T="",M=[]}H={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(w[1]==="/"){if((i=s.pop())[0]!==w[3])throw"Bad state: "+i}else w[0].charAt(w[0].length-2)!=="/"&&s.push([w[3],!0]);break;case"annotation":if(w[1]==="/"){if((i=s.pop())[0]!==w[3])throw"Bad state: "+i;P.t=T,M.length&&(P.R=M),P.a=U,G.push(P)}else w[0].charAt(w[0].length-2)!=="/"&&s.push([w[3],!1]);U="",X=0,T="",I=0,M=[];break;case"creator":w[1]==="/"?U=n.slice(X,w.index):X=w.index+w[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(w[1]==="/"){if((i=s.pop())[0]!==w[3])throw"Bad state: "+i}else w[0].charAt(w[0].length-2)!=="/"&&s.push([w[3],!1]);T="",I=0,M=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(w[1]==="/"){if(E[o.name]=l,(i=s.pop())[0]!==w[3])throw"Bad state: "+i}else w[0].charAt(w[0].length-2)!=="/"&&(l="",o=qr(w[0],!1),s.push([w[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":a=qr(w[0],!1),l+=YT[w[3]][a.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":a=qr(w[0],!1),l+=YT[w[3]][a.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(w[0].slice(-2)==="/>")break;if(w[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,w.index);break}else c=w.index+w[0].length;break;case"named-range":a=qr(w[0],!1),te=$3(a["cell-range-address"]);var Ee={Name:a.name,Ref:te[0]+"!"+te[1]};ie&&(Ee.Sheet=m.length),ae.Names.push(Ee);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(w[1]==="/"&&(!S||!S["string-value"])){var Oe=a1e(n.slice(I,w.index));T=(T.length>0?T+`
`:"")+Oe[0]}else qr(w[0],!1),I=w.index+w[0].length;break;case"s":break;case"database-range":if(w[1]==="/")break;try{te=$3(qr(w[0])["target-range-address"]),g[te[0]]["!autofilter"]={ref:te[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(w[1]!=="/"){if(H=qr(w[0],!1),!H.href)break;H.Target=Hn(H.href),delete H.href,H.Target.charAt(0)=="#"&&H.Target.indexOf(".")>-1?(te=$3(H.Target.slice(1)),H.Target="#"+te[0]+"!"+te[1]):H.Target.match(/^\.\.[\\\/]/)&&(H.Target=H.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(w[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(w)}}var ne={Sheets:g,SheetNames:m,Workbook:ae};return r.bookSheets&&delete ne.Sheets,ne}function XT(t,e){e=e||{},Cc(t,"META-INF/manifest.xml")&&Loe(aa(t,"META-INF/manifest.xml"),e);var r=Jl(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=pU(bs(r),e);return Cc(t,"meta.xml")&&(n.Props=sV(aa(t,"meta.xml"))),n}function QT(t,e){return pU(t,e)}var o1e=(function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+hx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Xi+e}})(),JT=(function(){var t=function(i){return ps(i).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,a,o){var l=[];l.push('      <table:table table:name="'+ps(a.SheetNames[o])+`" table:style-name="ta1">
`);var c=0,d=0,p=Al(i["!ref"]||"A1"),g=i["!merges"]||[],m=0,y=Array.isArray(i);if(i["!cols"])for(d=0;d<=p.e.c;++d)l.push("        <table:table-column"+(i["!cols"][d]?' table:style-name="co'+i["!cols"][d].ods+'"':"")+`></table:table-column>
`);var w="",_=i["!rows"]||[];for(c=0;c<p.s.r;++c)w=_[c]?' table:style-name="ro'+_[c].ods+'"':"",l.push("        <table:table-row"+w+`></table:table-row>
`);for(;c<=p.e.r;++c){for(w=_[c]?' table:style-name="ro'+_[c].ods+'"':"",l.push("        <table:table-row"+w+`>
`),d=0;d<p.s.c;++d)l.push(e);for(;d<=p.e.c;++d){var S=!1,T={},I="";for(m=0;m!=g.length;++m)if(!(g[m].s.c>d)&&!(g[m].s.r>c)&&!(g[m].e.c<d)&&!(g[m].e.r<c)){(g[m].s.c!=d||g[m].s.r!=c)&&(S=!0),T["table:number-columns-spanned"]=g[m].e.c-g[m].s.c+1,T["table:number-rows-spanned"]=g[m].e.r-g[m].s.r+1;break}if(S){l.push(r);continue}var M=Vr({r:c,c:d}),K=y?(i[c]||[])[d]:i[M];if(K&&K.f&&(T["table:formula"]=ps(Afe(K.f)),K.F&&K.F.slice(0,M.length)==M)){var W=Al(K.F);T["table:number-matrix-columns-spanned"]=W.e.c-W.s.c+1,T["table:number-matrix-rows-spanned"]=W.e.r-W.s.r+1}if(!K){l.push(e);continue}switch(K.t){case"b":I=K.v?"TRUE":"FALSE",T["office:value-type"]="boolean",T["office:boolean-value"]=K.v?"true":"false";break;case"n":I=K.w||String(K.v||0),T["office:value-type"]="float",T["office:value"]=K.v||0;break;case"s":case"str":I=K.v==null?"":K.v,T["office:value-type"]="string";break;case"d":I=K.w||zs(K.v).toISOString(),T["office:value-type"]="date",T["office:date-value"]=zs(K.v).toISOString(),T["table:style-name"]="ce1";break;default:l.push(e);continue}var L=t(I);if(K.l&&K.l.Target){var A=K.l.Target;A=A.charAt(0)=="#"?"#"+Nfe(A.slice(1)):A,A.charAt(0)!="#"&&!A.match(/^\w+:/)&&(A="../"+A),L=Ht("text:a",L,{"xlink:href":A.replace(/&/g,"&amp;")})}l.push("          "+Ht("table:table-cell",Ht("text:p",L,{}),T)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(i,a){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(c){return a.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var d=0;d<c["!cols"].length;++d)if(c["!cols"][d]){var p=c["!cols"][d];if(p.width==null&&p.wpx==null&&p.wch==null)continue;Ef(p),p.ods=o;var g=c["!cols"][d].wpx+"px";i.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),i.push(`  </style:style>
`),++o}}});var l=0;a.SheetNames.map(function(c){return a.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var d=0;d<c["!rows"].length;++d)if(c["!rows"][d]){c["!rows"][d].ods=l;var p=c["!rows"][d].hpx+"px";i.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+p+`"/>
`),i.push(`  </style:style>
`),++l}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(a,o){var l=[Xi],c=hx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=hx({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+c+d+`>
`),l.push(nV().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),s(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var p=0;p!=a.SheetNames.length;++p)l.push(n(a.Sheets[a.SheetNames[p]],a,p));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function mU(t,e){if(e.bookType=="fods")return JT(t,e);var r=t7(),n="",s=[],i=[];return n="mimetype",an(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",an(r,n,JT(t,e)),s.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",an(r,n,o1e(t,e)),s.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",an(r,n,Xi+nV()),s.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",an(r,n,Doe(i)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",an(r,n,joe(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function mp(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function rk(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):bs(zf(t))}function l1e(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Ql(Ku(t))}function c1e(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function Af(t){var e=t.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function ZT(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function u1e(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,s=e+13;s>=e;--s)n=n*256+t[s];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function d1e(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var i=0;s>=1;++i,s/=256)t[e+i]=s&255;t[e+15]|=r>=0?0:128}function wx(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function cs(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Ai(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Yn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=wx(t,r),i=s&7;s=Math.floor(s/8);var a=0,o;if(s==0)break;switch(i){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:a=4,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=wx(t,r),o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var c={data:o,type:i};e[s]==null?e[s]=[c]:e[s].push(c)}return e}function so(t){var e=[];return t.forEach(function(r,n){r.forEach(function(s){s.data&&(e.push(cs(n*8+s.type)),s.type==2&&e.push(cs(s.data.length)),e.push(s.data))})}),Af(e)}function N7(t,e){return t?.map(function(r){return e(r.data)})||[]}function kc(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=wx(t,n),i=Yn(t.slice(n[0],n[0]+s));n[0]+=s;var a={id:Ai(i[1][0].data),messages:[]};i[2].forEach(function(o){var l=Yn(o.data),c=Ai(l[3][0].data);a.messages.push({meta:l,data:t.slice(n[0],n[0]+c)}),n[0]+=c}),(e=i[3])!=null&&e[0]&&(a.merge=Ai(i[3][0].data)>>>0>0),r.push(a)}return r}function hm(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:cs(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:cs(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(a){s.push(a.data),a.meta[3]=[{type:0,data:cs(a.data.length)}],n[2].push({data:so(a.meta),type:2})});var i=so(n);e.push(cs(i.length)),e.push(i),s.forEach(function(a){return e.push(a)})}),Af(e)}function h1e(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=wx(e,r),s=[];r[0]<e.length;){var i=e[r[0]]&3;if(i==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[r[0]],o>1&&(a|=e[r[0]+1]<<8),o>2&&(a|=e[r[0]+2]<<16),o>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}s.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var l=0,c=0;if(i==1?(c=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(c=(e[r[0]++]>>2)+1,i==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Af(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(s.push(s[0].slice(-l)),c-=l;c>=s[s.length-1].length;)s.push(s[s.length-1]),c-=s[s.length-1].length;s.push(s[0].slice(-l,-l+c))}}var d=Af(s);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Sc(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(h1e(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Af(e)}function fm(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),s=new Uint8Array(4);e.push(s);var i=cs(n),a=i.length;e.push(i),n<=60?(a++,e.push(new Uint8Array([n-1<<2]))):n<=256?(a+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(a+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(a+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(a+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),a+=n,s[0]=0,s[1]=a&255,s[2]=a>>8&255,s[3]=a>>16&255,r+=n}return Af(e)}function f1e(t,e,r,n){var s=mp(t),i=s.getUint32(4,!0),a=(n>1?12:8)+ZT(i&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,d=new Date(2001,0,1);i&512&&(o=s.getUint32(a,!0),a+=4),a+=ZT(i&(n>1?12288:4096))*4,i&16&&(l=s.getUint32(a,!0),a+=4),i&32&&(c=s.getFloat64(a,!0),a+=8),i&64&&(d.setTime(d.getTime()+s.getFloat64(a,!0)*1e3),a+=8);var p;switch(t[2]){case 0:break;case 2:p={t:"n",v:c};break;case 3:p={t:"s",v:e[l]};break;case 5:p={t:"d",v:d};break;case 6:p={t:"b",v:c>0};break;case 7:p={t:"n",v:c/86400};break;case 8:p={t:"e",v:0};break;case 9:if(o>-1)p={t:"s",v:r[o]};else if(l>-1)p={t:"s",v:e[l]};else if(!isNaN(c))p={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return p}function p1e(t,e,r){var n=mp(t),s=n.getUint32(8,!0),i=12,a=-1,o=-1,l=NaN,c=NaN,d=new Date(2001,0,1);s&1&&(l=u1e(t,i),i+=16),s&2&&(c=n.getFloat64(i,!0),i+=8),s&4&&(d.setTime(d.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(o=n.getUint32(i,!0),i+=4),s&16&&(a=n.getUint32(i,!0),i+=4);var p;switch(t[1]){case 0:break;case 2:p={t:"n",v:l};break;case 3:p={t:"s",v:e[o]};break;case 5:p={t:"d",v:d};break;case 6:p={t:"b",v:c>0};break;case 7:p={t:"n",v:c/86400};break;case 8:p={t:"e",v:0};break;case 9:if(a>-1)p={t:"s",v:r[a]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:p={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return p}function H3(t,e){var r=new Uint8Array(32),n=mp(r),s=12,i=0;switch(r[0]=5,t.t){case"n":r[1]=2,d1e(r,s,t.v),i|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,t.v?1:0,!0),i|=2,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(s,e.indexOf(t.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,i,!0),r.slice(0,s)}function W3(t,e){var r=new Uint8Array(32),n=mp(r),s=12,i=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(s,t.v,!0),i|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,t.v?1:0,!0),i|=32,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(s,e.indexOf(t.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,i,!0),r.slice(0,s)}function m1e(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return f1e(t,e,r,t[0]);case 5:return p1e(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Oo(t){var e=Yn(t);return wx(e[1][0].data)}function eI(t,e){var r=Yn(e.data),n=Ai(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(a){var o=Yn(a.data),l=Ai(o[1][0].data)>>>0;switch(n){case 1:i[l]=rk(o[3][0].data);break;case 8:{var c=t[Oo(o[9][0].data)][0],d=Yn(c.data),p=t[Oo(d[1][0].data)][0],g=Ai(p.meta[1][0].data);if(g!=2001)throw new Error("2000 unexpected reference to ".concat(g));var m=Yn(p.data);i[l]=m[3].map(function(y){return rk(y.data)}).join("")}break}}),i}function g1e(t,e){var r,n,s,i,a,o,l,c,d,p,g,m,y,w,_=Yn(t),S=Ai(_[1][0].data)>>>0,T=Ai(_[2][0].data)>>>0,I=((n=(r=_[8])==null?void 0:r[0])==null?void 0:n.data)&&Ai(_[8][0].data)>0||!1,M,K;if((i=(s=_[7])==null?void 0:s[0])!=null&&i.data&&e!=0)M=(o=(a=_[7])==null?void 0:a[0])==null?void 0:o.data,K=(c=(l=_[6])==null?void 0:l[0])==null?void 0:c.data;else if((p=(d=_[4])==null?void 0:d[0])!=null&&p.data&&e!=1)M=(m=(g=_[4])==null?void 0:g[0])==null?void 0:m.data,K=(w=(y=_[3])==null?void 0:y[0])==null?void 0:w.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var W=I?4:1,L=mp(M),A=[],E=0;E<M.length/2;++E){var D=L.getUint16(E*2,!0);D<65535&&A.push([E,D])}if(A.length!=T)throw"Expected ".concat(T," cells, found ").concat(A.length);var R=[];for(E=0;E<A.length-1;++E)R[A[E][0]]=K.subarray(A[E][1]*W,A[E+1][1]*W);return A.length>=1&&(R[A[A.length-1][0]]=K.subarray(A[A.length-1][1]*W)),{R:S,cells:R}}function x1e(t,e){var r,n=Yn(e.data),s=(r=n?.[7])!=null&&r[0]?Ai(n[7][0].data)>>>0>0?1:0:-1,i=N7(n[5],function(a){return g1e(a,s)});return{nrows:Ai(n[4][0].data)>>>0,data:i.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(l,c){if(a[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));a[o.R][c]=l}),a},[])}}function y1e(t,e,r){var n,s=Yn(e.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(Ai(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(Ai(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=nn(i);var a=Yn(s[4][0].data),o=eI(t,t[Oo(a[4][0].data)][0]),l=(n=a[17])!=null&&n[0]?eI(t,t[Oo(a[17][0].data)][0]):[],c=Yn(a[3][0].data),d=0;c[1].forEach(function(p){var g=Yn(p.data),m=t[Oo(g[2][0].data)][0],y=Ai(m.meta[1][0].data);if(y!=6002)throw new Error("6001 unexpected reference to ".concat(y));var w=x1e(t,m);w.data.forEach(function(_,S){_.forEach(function(T,I){var M=Vr({r:d+S,c:I}),K=m1e(T,o,l);K&&(r[M]=K)})}),d+=w.nrows})}function v1e(t,e){var r=Yn(e.data),n={"!ref":"A1"},s=t[Oo(r[2][0].data)],i=Ai(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return y1e(t,s[0],n),n}function w1e(t,e){var r,n=Yn(e.data),s={name:(r=n[1])!=null&&r[0]?rk(n[1][0].data):"",sheets:[]},i=N7(n[2],Oo);return i.forEach(function(a){t[a].forEach(function(o){var l=Ai(o.meta[1][0].data);l==6e3&&s.sheets.push(v1e(t,o))})}),s}function _1e(t,e){var r=L7(),n=Yn(e.data),s=N7(n[1],Oo);if(s.forEach(function(i){t[i].forEach(function(a){var o=Ai(a.meta[1][0].data);if(o==2){var l=w1e(t,a);l.sheets.forEach(function(c,d){j7(r,c,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function G3(t){var e,r,n,s,i={},a=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=Sc(l.content)}catch(p){return console.log("?? "+l.content.length+" "+(p.message||p))}var d;try{d=kc(c)}catch(p){return console.log("## "+(p.message||p))}d.forEach(function(p){i[p.id]=p.messages,a.push(p.id)})}}),!a.length)throw new Error("File has no messages");var o=((s=(n=(r=(e=i?.[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&Ai(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||a.forEach(function(l){i[l].forEach(function(c){var d=Ai(c.meta[1][0].data)>>>0;if(d==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return _1e(i,o)}function b1e(t,e,r){var n,s,i,a;if(!((n=t[6])!=null&&n[0])||!((s=t[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(i=t[8])==null?void 0:i[0])==null?void 0:a.data)&&Ai(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,c=mp(t[7][0].data),d=0,p=[],g=mp(t[4][0].data),m=0,y=[],w=0;w<e.length;++w){if(e[w]==null){c.setUint16(w*2,65535,!0),g.setUint16(w*2,65535);continue}c.setUint16(w*2,d,!0),g.setUint16(w*2,m,!0);var _,S;switch(typeof e[w]){case"string":_=H3({t:"s",v:e[w]},r),S=W3({t:"s",v:e[w]},r);break;case"number":_=H3({t:"n",v:e[w]},r),S=W3({t:"n",v:e[w]},r);break;case"boolean":_=H3({t:"b",v:e[w]},r),S=W3({t:"b",v:e[w]},r);break;default:throw new Error("Unsupported value "+e[w])}p.push(_),d+=_.length,y.push(S),m+=S.length,++l}for(t[2][0].data=cs(l);w<t[7][0].data.length/2;++w)c.setUint16(w*2,65535,!0),g.setUint16(w*2,65535,!0);return t[6][0].data=Af(p),t[3][0].data=Af(y),l}function k1e(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Al(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(nn(n)));var i=R5(r,{range:n,header:1}),a=["~Sh33tJ5~"];i.forEach(function(U){return U.forEach(function(X){typeof X=="string"&&a.push(X)})});var o={},l=[],c=Ir.read(e.numbers,{type:"base64"});c.FileIndex.map(function(U,X){return[U,c.FullPaths[X]]}).forEach(function(U){var X=U[0],J=U[1];if(X.type==2&&X.name.match(/\.iwa/)){var ie=X.content,ve=Sc(ie),ke=kc(ve);ke.forEach(function(oe){l.push(oe.id),o[oe.id]={deps:[],location:J,type:Ai(oe.messages[0].meta[1][0].data)}})}}),l.sort(function(U,X){return U-X});var d=l.filter(function(U){return U>1}).map(function(U){return[U,cs(U)]});c.FileIndex.map(function(U,X){return[U,c.FullPaths[X]]}).forEach(function(U){var X=U[0];if(U[1],!!X.name.match(/\.iwa/)){var J=kc(Sc(X.content));J.forEach(function(ie){ie.messages.forEach(function(ve){d.forEach(function(ke){ie.messages.some(function(oe){return Ai(oe.meta[1][0].data)!=11006&&c1e(oe.data,ke[1])})&&o[ke[0]].deps.push(ie.id)})})})}});for(var p=Ir.find(c,o[1].location),g=kc(Sc(p.content)),m,y=0;y<g.length;++y){var w=g[y];w.id==1&&(m=w)}var _=Oo(Yn(m.messages[0].data)[1][0].data);for(p=Ir.find(c,o[_].location),g=kc(Sc(p.content)),y=0;y<g.length;++y)w=g[y],w.id==_&&(m=w);for(_=Oo(Yn(m.messages[0].data)[2][0].data),p=Ir.find(c,o[_].location),g=kc(Sc(p.content)),y=0;y<g.length;++y)w=g[y],w.id==_&&(m=w);for(_=Oo(Yn(m.messages[0].data)[2][0].data),p=Ir.find(c,o[_].location),g=kc(Sc(p.content)),y=0;y<g.length;++y)w=g[y],w.id==_&&(m=w);var S=Yn(m.messages[0].data);{S[6][0].data=cs(n.e.r+1),S[7][0].data=cs(n.e.c+1);var T=Oo(S[46][0].data),I=Ir.find(c,o[T].location),M=kc(Sc(I.content));{for(var K=0;K<M.length&&M[K].id!=T;++K);if(M[K].id!=T)throw"Bad ColumnRowUIDMapArchive";var W=Yn(M[K].messages[0].data);W[1]=[],W[2]=[],W[3]=[];for(var L=0;L<=n.e.c;++L){var A=[];A[1]=A[2]=[{type:0,data:cs(L+420690)}],W[1].push({type:2,data:so(A)}),W[2].push({type:0,data:cs(L)}),W[3].push({type:0,data:cs(L)})}W[4]=[],W[5]=[],W[6]=[];for(var E=0;E<=n.e.r;++E)A=[],A[1]=A[2]=[{type:0,data:cs(E+726270)}],W[4].push({type:2,data:so(A)}),W[5].push({type:0,data:cs(E)}),W[6].push({type:0,data:cs(E)});M[K].messages[0].data=so(W)}I.content=fm(hm(M)),I.size=I.content.length,delete S[46];var D=Yn(S[4][0].data);{D[7][0].data=cs(n.e.r+1);var R=Yn(D[1][0].data),F=Oo(R[2][0].data);I=Ir.find(c,o[F].location),M=kc(Sc(I.content));{if(M[0].id!=F)throw"Bad HeaderStorageBucket";var V=Yn(M[0].messages[0].data);for(E=0;E<i.length;++E){var Z=Yn(V[2][0].data);Z[1][0].data=cs(E),Z[4][0].data=cs(i[E].length),V[2][E]={type:V[2][0].type,data:so(Z)}}M[0].messages[0].data=so(V)}I.content=fm(hm(M)),I.size=I.content.length;var fe=Oo(D[2][0].data);I=Ir.find(c,o[fe].location),M=kc(Sc(I.content));{if(M[0].id!=fe)throw"Bad HeaderStorageBucket";for(V=Yn(M[0].messages[0].data),L=0;L<=n.e.c;++L)Z=Yn(V[2][0].data),Z[1][0].data=cs(L),Z[4][0].data=cs(n.e.r+1),V[2][L]={type:V[2][0].type,data:so(Z)};M[0].messages[0].data=so(V)}I.content=fm(hm(M)),I.size=I.content.length;var xe=Oo(D[4][0].data);(function(){for(var U=Ir.find(c,o[xe].location),X=kc(Sc(U.content)),J,ie=0;ie<X.length;++ie){var ve=X[ie];ve.id==xe&&(J=ve)}var ke=Yn(J.messages[0].data);{ke[3]=[];var oe=[];a.forEach(function(ne,we){oe[1]=[{type:0,data:cs(we)}],oe[2]=[{type:0,data:cs(1)}],oe[3]=[{type:2,data:l1e(ne)}],ke[3].push({type:2,data:so(oe)})})}J.messages[0].data=so(ke);var Ee=hm(X),Oe=fm(Ee);U.content=Oe,U.size=U.content.length})();var he=Yn(D[3][0].data);{var ae=he[1][0];delete he[2];var H=Yn(ae.data);{var te=Oo(H[2][0].data);(function(){for(var U=Ir.find(c,o[te].location),X=kc(Sc(U.content)),J,ie=0;ie<X.length;++ie){var ve=X[ie];ve.id==te&&(J=ve)}var ke=Yn(J.messages[0].data);{delete ke[6],delete he[7];var oe=new Uint8Array(ke[5][0].data);ke[5]=[];for(var Ee=0,Oe=0;Oe<=n.e.r;++Oe){var ne=Yn(oe);Ee+=b1e(ne,i[Oe],a),ne[1][0].data=cs(Oe),ke[5].push({data:so(ne),type:2})}ke[1]=[{type:0,data:cs(n.e.c+1)}],ke[2]=[{type:0,data:cs(n.e.r+1)}],ke[3]=[{type:0,data:cs(Ee)}],ke[4]=[{type:0,data:cs(n.e.r+1)}]}J.messages[0].data=so(ke);var we=hm(X),Re=fm(we);U.content=Re,U.size=U.content.length})()}ae.data=so(H)}D[3][0].data=so(he)}S[4][0].data=so(D)}m.messages[0].data=so(S);var G=hm(g),P=fm(G);return p.content=P,p.size=p.content.length,c}function gU(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function T7(t){gU([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function I7(t){gU([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function S1e(t){return vn.WS.indexOf(t)>-1?"sheet":t==vn.CS?"chart":t==vn.DS?"dialog":t==vn.MS?"macro":t&&t.length?t:"sheet"}function E1e(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,S1e(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function C1e(t,e,r,n,s,i,a,o,l,c,d,p){try{i[n]=A2(Jl(t,r,!0),e);var g=aa(t,e),m;switch(o){case"sheet":m=Kpe(g,e,s,l,i[n],c,d,p);break;case"chart":if(m=Ype(g,e,s,l,i[n],c,d,p),!m||!m["!drawel"])break;var y=t2(m["!drawel"].Target,e),w=px(y),_=Fde(Jl(t,y,!0),A2(Jl(t,w,!0),y)),S=t2(_,y),T=px(S);m=bpe(Jl(t,S,!0),S,l,A2(Jl(t,T,!0),S),c,m);break;case"macro":m=Xpe(g,e,s,l,i[n],c,d,p);break;case"dialog":m=Qpe(g,e,s,l,i[n],c,d,p);break;default:throw new Error("Unrecognized sheet type "+o)}a[n]=m;var I=[];i&&i[n]&&Ti(i[n]).forEach(function(M){var K="";if(i[n][M].Type==vn.CMNT){K=t2(i[n][M].Target,e);var W=tme(aa(t,K,!0),K,l);if(!W||!W.length)return;BT(m,W,!1)}i[n][M].Type==vn.TCMNT&&(K=t2(i[n][M].Target,e),I=I.concat(Ode(aa(t,K,!0),l)))}),I&&I.length&&BT(m,I,!0,l.people||[])}catch(M){if(l.WTF)throw M}}function vc(t){return t.charAt(0)=="/"?t.slice(1):t}function A1e(t,e){if(H1(),e=e||{},T7(e),Cc(t,"META-INF/manifest.xml")||Cc(t,"objectdata.xml"))return XT(t,e);if(Cc(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof G3<"u"){if(t.FileIndex)return G3(t);var r=Ir.utils.cfb_new();return aT(t).forEach(function(Z){an(r,Z,Mae(t,Z))}),G3(r)}throw new Error("Unsupported NUMBERS file")}if(!Cc(t,"[Content_Types].xml"))throw Cc(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Cc(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=aT(t),s=Poe(Jl(t,"[Content_Types].xml")),i=!1,a,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",aa(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!aa(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var l={},c={};if(!e.bookSheets&&!e.bookProps){if(N2=[],s.sst)try{N2=eme(aa(t,vc(s.sst)),s.sst,e)}catch(Z){if(e.WTF)throw Z}e.cellStyles&&s.themes.length&&(l=Zpe(Jl(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(c=Jpe(aa(t,vc(s.style)),s.style,l,e))}s.links.map(function(Z){try{var fe=A2(Jl(t,px(vc(Z))),Z);return nme(aa(t,vc(Z)),fe,Z,e)}catch{}});var d=Gpe(aa(t,vc(s.workbooks[0])),s.workbooks[0],e),p={},g="";s.coreprops.length&&(g=aa(t,vc(s.coreprops[0]),!0),g&&(p=sV(g)),s.extprops.length!==0&&(g=aa(t,vc(s.extprops[0]),!0),g&&Moe(g,p,e)));var m={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(g=Jl(t,vc(s.custprops[0]),!0),g&&(m=Voe(g,e)));var y={};if((e.bookSheets||e.bookProps)&&(d.Sheets?a=d.Sheets.map(function(fe){return fe.name}):p.Worksheets&&p.SheetNames.length>0&&(a=p.SheetNames),e.bookProps&&(y.Props=p,y.Custprops=m),e.bookSheets&&typeof a<"u"&&(y.SheetNames=a),e.bookSheets?y.SheetNames:e.bookProps))return y;a={};var w={};e.bookDeps&&s.calcchain&&(w=rme(aa(t,vc(s.calcchain)),s.calcchain));var _=0,S={},T,I;{var M=d.Sheets;p.Worksheets=M.length,p.SheetNames=[];for(var K=0;K!=M.length;++K)p.SheetNames[K]=M[K].name}var W=i?"bin":"xml",L=s.workbooks[0].lastIndexOf("/"),A=(s.workbooks[0].slice(0,L+1)+"_rels/"+s.workbooks[0].slice(L+1)+".rels").replace(/^\//,"");Cc(t,A)||(A="xl/_rels/workbook."+W+".rels");var E=A2(Jl(t,A,!0),A.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=sme(aa(t,vc(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=Bde(aa(t,vc(s.people[0])),e)),E&&(E=E1e(E,d.Sheets));var D=aa(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(_=0;_!=p.Worksheets;++_){var R="sheet";if(E&&E[_]?(T="xl/"+E[_][1].replace(/[\/]?xl\//,""),Cc(t,T)||(T=E[_][1]),Cc(t,T)||(T=A.replace(/_rels\/.*$/,"")+E[_][1]),R=E[_][2]):(T="xl/worksheets/sheet"+(_+1-D)+"."+W,T=T.replace(/sheet0\./,"sheet.")),I=T.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(_!=e.sheets)continue e;break;case"string":if(p.SheetNames[_].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var F=!1,V=0;V!=e.sheets.length;++V)typeof e.sheets[V]=="number"&&e.sheets[V]==_&&(F=1),typeof e.sheets[V]=="string"&&e.sheets[V].toLowerCase()==p.SheetNames[_].toLowerCase()&&(F=1);if(!F)continue e}}C1e(t,T,I,p.SheetNames[_],_,S,a,R,e,d,l,c)}return y={Directory:s,Workbook:d,Props:p,Custprops:m,Deps:w,Sheets:a,SheetNames:p.SheetNames,Strings:N2,Styles:c,Themes:l,SSF:$s(Dr)},e&&e.bookFiles&&(t.files?(y.keys=n,y.files=t.files):(y.keys=[],y.files={},t.FullPaths.forEach(function(Z,fe){Z=Z.replace(/^Root Entry[\/]/,""),y.keys.push(Z),y.files[Z]=t.FileIndex[fe]}))),e&&e.bookVBA&&(s.vba.length>0?y.vbaraw=aa(t,vc(s.vba[0]),!0):s.defaults&&s.defaults.bin===Gde&&(y.vbaraw=aa(t,"xl/vbaProject.bin",!0))),y}function N1e(t,e){var r=e||{},n="Workbook",s=Ir.find(t,n);try{if(n="/!DataSpaces/Version",s=Ir.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(sue(s.content),n="/!DataSpaces/DataSpaceMap",s=Ir.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=aue(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Ir.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=oue(s.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Ir.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);cue(s.content)}catch{}if(n="/EncryptionInfo",s=Ir.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=uue(s.content);if(n="/EncryptedPackage",s=Ir.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function T1e(t,e){return e.bookType=="ods"?mU(t,e):e.bookType=="numbers"?k1e(t,e):e.bookType=="xlsb"?I1e(t,e):P1e(t,e)}function I1e(t,e){Rm=1024,t&&!t.SSF&&(t.SSF=$s(Dr)),t&&t.SSF&&(H1(),V_(t.SSF),e.revssf=z_(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,T2?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=$V.indexOf(e.bookType)>-1,s=m7();I7(e=e||{});var i=t7(),a="",o=0;if(e.cellXfs=[],qf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",an(i,a,iV(t.Props,e)),s.coreprops.push(a),ds(e.rels,2,a,vn.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,an(i,a,lV(t.Props)),s.extprops.push(a),ds(e.rels,3,a,vn.EXT_PROPS),t.Custprops!==t.Props&&Ti(t.Custprops||{}).length>0&&(a="docProps/custom.xml",an(i,a,cV(t.Custprops)),s.custprops.push(a),ds(e.rels,4,a,vn.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},p=t.Sheets[t.SheetNames[o-1]],g=(p||{})["!type"]||"sheet";switch(g){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,an(i,a,ame(o-1,a,e,t,d)),s.sheets.push(a),ds(e.wbrels,-1,"worksheets/sheet"+o+"."+r,vn.WS[0])}if(p){var m=p["!comments"],y=!1,w="";m&&m.length>0&&(w="xl/comments"+o+"."+r,an(i,w,cme(m,w)),s.comments.push(w),ds(d,-1,"../comments"+o+"."+r,vn.CMNT),y=!0),p["!legacy"]&&y&&an(i,"xl/drawings/vmlDrawing"+o+".vml",UV(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}d["!id"].rId1&&an(i,px(a),Xm(d))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,an(i,a,lme(e.Strings,a,e)),s.strs.push(a),ds(e.wbrels,-1,"sharedStrings."+r,vn.SST)),a="xl/workbook."+r,an(i,a,ime(t,a)),s.workbooks.push(a),ds(e.rels,1,a,vn.WB),a="xl/theme/theme1.xml",an(i,a,_7(t.Themes,e)),s.themes.push(a),ds(e.wbrels,-1,"theme/theme1.xml",vn.THEME),a="xl/styles."+r,an(i,a,ome(t,a,e)),s.styles.push(a),ds(e.wbrels,-1,"styles."+r,vn.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",an(i,a,t.vbaraw),s.vba.push(a),ds(e.wbrels,-1,"vbaProject.bin",vn.VBA)),a="xl/metadata."+r,an(i,a,ume(a)),s.metadata.push(a),ds(e.wbrels,-1,"metadata."+r,vn.XLMETA),an(i,"[Content_Types].xml",rV(s,e)),an(i,"_rels/.rels",Xm(e.rels)),an(i,"xl/_rels/workbook."+r+".rels",Xm(e.wbrels)),delete e.revssf,delete e.ssf,i}function P1e(t,e){Rm=1024,t&&!t.SSF&&(t.SSF=$s(Dr)),t&&t.SSF&&(H1(),V_(t.SSF),e.revssf=z_(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,T2?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=$V.indexOf(e.bookType)>-1,s=m7();I7(e=e||{});var i=t7(),a="",o=0;if(e.cellXfs=[],qf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",an(i,a,iV(t.Props,e)),s.coreprops.push(a),ds(e.rels,2,a,vn.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,an(i,a,lV(t.Props)),s.extprops.push(a),ds(e.rels,3,a,vn.EXT_PROPS),t.Custprops!==t.Props&&Ti(t.Custprops||{}).length>0&&(a="docProps/custom.xml",an(i,a,cV(t.Custprops)),s.custprops.push(a),ds(e.rels,4,a,vn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var p={"!id":{}},g=t.Sheets[t.SheetNames[o-1]],m=(g||{})["!type"]||"sheet";switch(m){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,an(i,a,eU(o-1,e,t,p)),s.sheets.push(a),ds(e.wbrels,-1,"worksheets/sheet"+o+"."+r,vn.WS[0])}if(g){var y=g["!comments"],w=!1,_="";if(y&&y.length>0){var S=!1;y.forEach(function(T){T[1].forEach(function(I){I.T==!0&&(S=!0)})}),S&&(_="xl/threadedComments/threadedComment"+o+"."+r,an(i,_,Mde(y,d,e)),s.threadedcomments.push(_),ds(p,-1,"../threadedComments/threadedComment"+o+"."+r,vn.TCMNT)),_="xl/comments"+o+"."+r,an(i,_,zV(y)),s.comments.push(_),ds(p,-1,"../comments"+o+"."+r,vn.CMNT),w=!0}g["!legacy"]&&w&&an(i,"xl/drawings/vmlDrawing"+o+".vml",UV(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}p["!id"].rId1&&an(i,px(a),Xm(p))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,an(i,a,TV(e.Strings,e)),s.strs.push(a),ds(e.wbrels,-1,"sharedStrings."+r,vn.SST)),a="xl/workbook."+r,an(i,a,iU(t)),s.workbooks.push(a),ds(e.rels,1,a,vn.WB),a="xl/theme/theme1.xml",an(i,a,_7(t.Themes,e)),s.themes.push(a),ds(e.wbrels,-1,"theme/theme1.xml",vn.THEME),a="xl/styles."+r,an(i,a,OV(t,e)),s.styles.push(a),ds(e.wbrels,-1,"styles."+r,vn.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",an(i,a,t.vbaraw),s.vba.push(a),ds(e.wbrels,-1,"vbaProject.bin",vn.VBA)),a="xl/metadata."+r,an(i,a,VV()),s.metadata.push(a),ds(e.wbrels,-1,"metadata."+r,vn.XLMETA),d.length>1&&(a="xl/persons/person.xml",an(i,a,Vde(d)),s.people.push(a),ds(e.wbrels,-1,"persons/person.xml",vn.PEOPLE)),an(i,"[Content_Types].xml",rV(s,e)),an(i,"_rels/.rels",Xm(e.rels)),an(i,"xl/_rels/workbook."+r+".rels",Xm(e.wbrels)),delete e.revssf,delete e.ssf,i}function P7(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=ic(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function R1e(t,e){return Ir.find(t,"EncryptedPackage")?N1e(t,e):cU(t,e)}function L1e(t,e){var r,n=t,s=e||{};return s.type||(s.type=pn&&Buffer.isBuffer(t)?"buffer":"base64"),r=PB(n,s),A1e(r,s)}function xU(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return ek(t.slice(r),e);default:break e}return E1.to_workbook(t,e)}function j1e(t,e){var r="",n=P7(t,e);switch(e.type){case"base64":r=ic(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=dp(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=bs(r)),e.type="binary",xU(r,e)}function F1e(t,e){var r=t;return e.type=="base64"&&(r=ic(r)),r=lx.utils.decode(1200,r.slice(2),"str"),e.type="binary",xU(r,e)}function D1e(t){return t.match(/[^\x00-\x7F]/)?Ku(t):t}function K3(t,e,r,n){return n?(r.type="string",E1.to_workbook(t,r)):E1.to_workbook(e,r)}function nk(t,e){XS();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return nk(new Uint8Array(t),(r=$s(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Jm={},r.dateNF&&(Jm.dateNF=r.dateNF),r.type||(r.type=pn&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=pn?"buffer":"binary",n=Iae(t),typeof Uint8Array<"u"&&!pn&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=D1e(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return r=$s(r),r.type="array",nk(QS(n),r)}switch((s=P7(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return R1e(Ir.read(n,r),r);break;case 9:if(s[1]<=8)return cU(n,r);break;case 60:return ek(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Uce(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return AV.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?L1e(n,r):K3(t,n,r,i);case 239:return s[3]===60?ek(n,r):K3(t,n,r,i);case 255:if(s[1]===254)return F1e(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return q0.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return q0.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return Z6.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return jV.to_workbook(n,r);break;case 10:case 13:case 32:return j1e(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Vce.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?Z6.to_workbook(n,r):K3(t,n,r,i)}function yU(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return sy(e.file,Ir.write(t,{type:pn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Ir.write(t,e)}function O1e(t,e){var r=$s(e||{}),n=T1e(t,r);return M1e(n,r)}function M1e(t,e){var r={},n=pn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var s=t.FullPaths?Ir.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(B_(s))}return e.password&&typeof encrypt_agile<"u"?yU(encrypt_agile(s,e.password),e):e.type==="file"?sy(e.file,s):e.type=="string"?bs(s):s}function B1e(t,e){var r=e||{},n=Dme(t,r);return yU(n,r)}function Bu(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return cx(Ku(n));case"binary":return Ku(n);case"string":return t;case"file":return sy(e.file,n,"utf8");case"buffer":return pn?ch(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Bu(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function V1e(t,e){switch(e.type){case"base64":return cx(t);case"binary":return t;case"string":return t;case"file":return sy(e.file,t,"binary");case"buffer":return pn?ch(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Iv(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?cx(r):e.type=="string"?bs(r):r;case"file":return sy(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function vU(t,e){XS(),Rpe(t);var r=$s(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=vU(t,r);return r.type="array",B_(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=t.SheetNames.indexOf(r.sheet),!t.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Bu(Tme(t,r),r);case"slk":case"sylk":return Bu(CV.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"htm":case"html":return Bu(dU(t.Sheets[t.SheetNames[s]],r),r);case"txt":return V1e(wU(t.Sheets[t.SheetNames[s]],r),r);case"csv":return Bu(R7(t.Sheets[t.SheetNames[s]],r),r,"\uFEFF");case"dif":return Bu(AV.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"dbf":return Iv(Z6.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"prn":return Bu(E1.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"rtf":return Bu(jV.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"eth":return Bu(NV.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"fods":return Bu(mU(t,r),r);case"wk1":return Iv(q0.sheet_to_wk1(t.Sheets[t.SheetNames[s]],r),r);case"wk3":return Iv(q0.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Iv(uU(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),B1e(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return O1e(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function U1e(t,e,r,n,s,i,a,o){var l=Gi(r),c=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),p=!0,g=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:r,enumerable:!1})}catch{g.__rowNum__=r}else g.__rowNum__=r;if(!a||t[r])for(var m=e.s.c;m<=e.e.c;++m){var y=a?t[r][m]:t[n[m]+l];if(y===void 0||y.t===void 0){if(c===void 0)continue;i[m]!=null&&(g[i[m]]=c);continue}var w=y.v;switch(y.t){case"z":if(w==null)break;continue;case"e":w=w==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+y.t)}if(i[m]!=null){if(w==null)if(y.t=="e"&&w===null)g[i[m]]=null;else if(c!==void 0)g[i[m]]=c;else if(d&&w===null)g[i[m]]=null;else continue;else g[i[m]]=d&&(y.t!=="n"||y.t==="n"&&o.rawNumbers!==!1)?w:Zd(y,w,o);w!=null&&(p=!1)}}return{row:g,isempty:p}}function R5(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},d=c.range!=null?c.range:t["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof d){case"string":l=Wn(d);break;case"number":l=Wn(t["!ref"]),l.s.r=d;break;default:l=d}n>0&&(s=0);var p=Gi(l.s.r),g=[],m=[],y=0,w=0,_=Array.isArray(t),S=l.s.r,T=0,I={};_&&!t[S]&&(t[S]=[]);var M=c.skipHidden&&t["!cols"]||[],K=c.skipHidden&&t["!rows"]||[];for(T=l.s.c;T<=l.e.c;++T)if(!(M[T]||{}).hidden)switch(g[T]=pi(T),r=_?t[S][T]:t[g[T]+p],n){case 1:i[T]=T-l.s.c;break;case 2:i[T]=g[T];break;case 3:i[T]=c.header[T-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=Zd(r,null,c),w=I[a]||0,!w)I[a]=1;else{do o=a+"_"+w++;while(I[o]);I[a]=w,I[o]=1}i[T]=o}for(S=l.s.r+s;S<=l.e.r;++S)if(!(K[S]||{}).hidden){var W=U1e(t,l,S,g,n,i,_,c);(W.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(m[y++]=W.row)}return m.length=y,m}var tI=/"/g;function z1e(t,e,r,n,s,i,a,o){for(var l=!0,c=[],d="",p=Gi(r),g=e.s.c;g<=e.e.c;++g)if(n[g]){var m=o.dense?(t[r]||[])[g]:t[n[g]+p];if(m==null)d="";else if(m.v!=null){l=!1,d=""+(o.rawNumbers&&m.t=="n"?m.v:Zd(m,null,o));for(var y=0,w=0;y!==d.length;++y)if((w=d.charCodeAt(y))===s||w===i||w===34||o.forceQuotes){d='"'+d.replace(tI,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(l=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(tI,'""')+'"')):d="";c.push(d)}return o.blankrows===!1&&l?null:c.join(a)}function R7(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=Wn(t["!ref"]),i=n.FS!==void 0?n.FS:",",a=i.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((i=="|"?"\\|":i)+"+$"),d="",p=[];n.dense=Array.isArray(t);for(var g=n.skipHidden&&t["!cols"]||[],m=n.skipHidden&&t["!rows"]||[],y=s.s.c;y<=s.e.c;++y)(g[y]||{}).hidden||(p[y]=pi(y));for(var w=0,_=s.s.r;_<=s.e.r;++_)(m[_]||{}).hidden||(d=z1e(t,s,_,p,a,l,i,n),d!=null&&(n.strip&&(d=d.replace(c,"")),(d||n.blankrows!==!1)&&r.push((w++?o:"")+d)));return delete n.dense,r.join("")}function wU(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=R7(t,e);return r}function $1e(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=Wn(t["!ref"]),i="",a=[],o,l=[],c=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)a[o]=pi(o);for(var d=s.s.r;d<=s.e.r;++d)for(i=Gi(d),o=s.s.c;o<=s.e.c;++o)if(e=a[o]+i,r=c?(t[d]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function _U(t,e,r){var n=r||{},s=+!n.skipHeader,i=t||{},a=0,o=0;if(i&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?mi(n.origin):n.origin;a=l.r,o=l.c}var c,d={s:{c:0,r:0},e:{c:o,r:a+e.length-1+s}};if(i["!ref"]){var p=Wn(i["!ref"]);d.e.c=Math.max(d.e.c,p.e.c),d.e.r=Math.max(d.e.r,p.e.r),a==-1&&(a=p.e.r+1,d.e.r=a+e.length-1+s)}else a==-1&&(a=0,d.e.r=e.length-1+s);var g=n.header||[],m=0;e.forEach(function(w,_){Ti(w).forEach(function(S){(m=g.indexOf(S))==-1&&(g[m=g.length]=S);var T=w[S],I="z",M="",K=Vr({c:o+m,r:a+_+s});c=_x(i,K),T&&typeof T=="object"&&!(T instanceof Date)?i[K]=T:(typeof T=="number"?I="n":typeof T=="boolean"?I="b":typeof T=="string"?I="s":T instanceof Date?(I="d",n.cellDates||(I="n",T=Ea(T)),M=n.dateNF||Dr[14]):T===null&&n.nullError&&(I="e",T=0),c?(c.t=I,c.v=T,delete c.w,delete c.R,M&&(c.z=M)):i[K]=c={t:I,v:T},M&&(c.z=M))})}),d.e.c=Math.max(d.e.c,o+g.length-1);var y=Gi(a);if(s)for(m=0;m<g.length;++m)i[pi(m+o)+y]={t:"s",v:g[m]};return i["!ref"]=nn(d),i}function q1e(t,e){return _U(null,t,e)}function _x(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=mi(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?_x(t,Vr(e)):_x(t,Vr({r:e,c:r||0}))}function H1e(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function L7(){return{SheetNames:[],Sheets:{}}}function j7(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var a=i&&i[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=a+s)!=-1;++s);}if(sU(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function W1e(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=H1e(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function G1e(t,e){return t.z=e,t}function bU(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function K1e(t,e,r){return bU(t,"#"+e,r)}function Y1e(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function X1e(t,e,r,n){for(var s=typeof e!="string"?e:Wn(e),i=typeof e=="string"?e:nn(e),a=s.s.r;a<=s.e.r;++a)for(var o=s.s.c;o<=s.e.c;++o){var l=_x(t,a,o);l.t="n",l.F=i,delete l.v,a==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return t}var ww={encode_col:pi,encode_row:Gi,encode_cell:Vr,encode_range:nn,decode_col:c7,decode_row:l7,split_cell:loe,decode_cell:mi,decode_range:Al,format_cell:Zd,sheet_add_aoa:YB,sheet_add_json:_U,sheet_add_dom:hU,aoa_to_sheet:W1,json_to_sheet:q1e,table_to_sheet:fU,table_to_book:s1e,sheet_to_csv:R7,sheet_to_txt:wU,sheet_to_json:R5,sheet_to_html:dU,sheet_to_formulae:$1e,sheet_to_row_object_array:R5,sheet_get_cell:_x,book_new:L7,book_append_sheet:j7,book_set_sheet_visibility:W1e,cell_set_number_format:G1e,cell_set_hyperlink:bU,cell_set_internal_link:K1e,cell_add_comment:Y1e,sheet_set_array_formula:X1e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Q1e=t=>new Promise((e,r)=>{fB.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>e(n.data),error:r})}),J1e=async t=>{const e=await t.arrayBuffer(),r=nk(e,{type:"array"}),n=r.Sheets[r.SheetNames[0]];return ww.sheet_to_json(n)};function kU({pharmacyId:t,onClose:e}){const[r,n]=j.useState("");j.useEffect(()=>{const{overflow:o}=document.body.style;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=o}},[]);const s=()=>{const o=[{name:"Paracetamol",price:800,description:"OTC analgesic",image:"https://...",category:"Over-the-Counter",stock:50,sku:"PAR-500"},{name:"Ibuprofen",price:1200,description:"NSAID",image:"https://...",category:"Over-the-Counter",stock:30,sku:"IBU-200"}],l=Object.keys(o[0]),c=[l.join(","),...o.map(m=>l.map(y=>m[y]).join(","))].join(`
`),d=new Blob([c],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(d),g=document.createElement("a");g.href=p,g.download="pharmasea_inventory_template.csv",g.click(),URL.revokeObjectURL(p)},i=async o=>{try{n("");const l=o?.[0];if(!l)return;let c=[];l.name.endsWith(".csv")?c=await Q1e(l):c=await J1e(l);const d=c.map(p=>({name:p.name,price:Number(p.price),description:p.description||"",image:p.image||"",category:p.category||"Over-the-Counter",stock:Number(p.stock||0),sku:p.sku||""})).filter(p=>p.name&&p.price);if(!d.length)throw new Error("No valid rows found. Expect headers: name, price, description, image, category, stock, sku");await BM(d,t),e()}catch(l){n(l.message||"Failed to parse file")}},a=u.jsx("div",{className:`\r
        fixed inset-0 z-[100]\r
        grid place-items-center\r
        bg-black/30 backdrop-blur-sm\r
        min-h-[100svh]\r
        animate-fade-in\r
      `,onClick:e,children:u.jsxs("div",{className:`\r
          bg-white rounded-3xl p-6 w-[92vw] max-w-sm\r
          shadow-xl border border-[#9ED3FF]\r
          max-h-[85svh] overflow-auto\r
          card-interactive hover:shadow-2xl transition-all duration-300\r
          animate-bounce-in\r
        `,onClick:o=>o.stopPropagation(),children:[u.jsx("div",{className:"text-lg font-light font-poppins mb-4 text-black animate-text-reveal",children:"Bulk Upload Products"}),u.jsx("div",{className:"space-y-3 animate-fade-in",style:{animationDelay:"0.1s"},children:u.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none focus:border-sky-500 dark:border-gray-600 transition-colors duration-200 hover:border-sky-400",placeholder:"CSV or XLSX File",type:"file",onChange:o=>i(o.target.files),accept:".csv,.xlsx"})}),u.jsxs("div",{className:"flex gap-2 mt-6 animate-fade-in-up",style:{animationDelay:"0.2s"},children:[u.jsx("button",{onClick:s,className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700 btn-interactive hover:scale-105 active:scale-95 transition-all duration-200",children:"Download CSV template"}),u.jsx("button",{className:"flex-1 rounded-full border border-zinc-300 text-zinc-500 text-[13px] font-light py-2 btn-interactive hover:border-zinc-400 hover:scale-105 active:scale-95 transition-all duration-200",onClick:e,children:"Cancel"})]}),r&&u.jsx("div",{className:"mt-3 text-red-600 text-sm animate-shake animate-fade-in",children:r})]})});return Ki.createPortal(a,document.body)}function hs(t){"@babel/helpers - typeof";return hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hs(t)}var mu=Uint8Array,ec=Uint16Array,F7=Int32Array,D7=new mu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),O7=new mu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rI=new mu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),SU=function(t,e){for(var r=new ec(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new F7(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},EU=SU(D7,2),Z1e=EU.b,sk=EU.r;Z1e[28]=258,sk[258]=28;var ege=SU(O7,0),nI=ege.r,ik=new ec(32768);for(var Us=0;Us<32768;++Us){var qh=(Us&43690)>>1|(Us&21845)<<1;qh=(qh&52428)>>2|(qh&13107)<<2,qh=(qh&61680)>>4|(qh&3855)<<4,ik[Us]=((qh&65280)>>8|(qh&255)<<8)>>1}var R2=(function(t,e,r){for(var n=t.length,s=0,i=new ec(e);s<n;++s)t[s]&&++i[t[s]-1];var a=new ec(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var o;if(r){o=new ec(1<<e);var l=15-e;for(s=0;s<n;++s)if(t[s])for(var c=s<<4|t[s],d=e-t[s],p=a[t[s]-1]++<<d,g=p|(1<<d)-1;p<=g;++p)o[ik[p]>>l]=c}else for(o=new ec(n),s=0;s<n;++s)t[s]&&(o[s]=ik[a[t[s]-1]++]>>15-t[s]);return o}),gp=new mu(288);for(var Us=0;Us<144;++Us)gp[Us]=8;for(var Us=144;Us<256;++Us)gp[Us]=9;for(var Us=256;Us<280;++Us)gp[Us]=7;for(var Us=280;Us<288;++Us)gp[Us]=8;var L5=new mu(32);for(var Us=0;Us<32;++Us)L5[Us]=5;var tge=R2(gp,9,0),rge=R2(L5,5,0),CU=function(t){return(t+7)/8|0},nge=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new mu(t.subarray(e,r))},Id=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Vg=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},Y3=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,i=r.slice();if(!s)return{t:NU,l:0};if(s==1){var a=new mu(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(K,W){return K.f-W.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],c=0,d=1,p=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=s-1;)o=r[r[c].f<r[p].f?c++:p++],l=r[c!=d&&r[c].f<r[p].f?c++:p++],r[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var g=i[0].s,n=1;n<s;++n)i[n].s>g&&(g=i[n].s);var m=new ec(g+1),y=ak(r[d-1],m,0);if(y>e){var n=0,w=0,_=y-e,S=1<<_;for(i.sort(function(W,L){return m[L.s]-m[W.s]||W.f-L.f});n<s;++n){var T=i[n].s;if(m[T]>e)w+=S-(1<<y-m[T]),m[T]=e;else break}for(w>>=_;w>0;){var I=i[n].s;m[I]<e?w-=1<<e-m[I]++-1:++n}for(;n>=0&&w;--n){var M=i[n].s;m[M]==e&&(--m[M],++w)}y=e}return{t:new mu(m),l:y}},ak=function(t,e,r){return t.s==-1?Math.max(ak(t.l,e,r+1),ak(t.r,e,r+1)):e[t.s]=r},sI=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new ec(++e),n=0,s=t[0],i=1,a=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==s&&o!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=t[o]}return{c:r.subarray(0,n),n:e}},Ug=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},AU=function(t,e,r){var n=r.length,s=CU(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<n;++i)t[s+i+4]=r[i];return(s+4+n)*8},iI=function(t,e,r,n,s,i,a,o,l,c,d){Id(e,d++,r),++s[256];for(var p=Y3(s,15),g=p.t,m=p.l,y=Y3(i,15),w=y.t,_=y.l,S=sI(g),T=S.c,I=S.n,M=sI(w),K=M.c,W=M.n,L=new ec(19),A=0;A<T.length;++A)++L[T[A]&31];for(var A=0;A<K.length;++A)++L[K[A]&31];for(var E=Y3(L,7),D=E.t,R=E.l,F=19;F>4&&!D[rI[F-1]];--F);var V=c+5<<3,Z=Ug(s,gp)+Ug(i,L5)+a,fe=Ug(s,g)+Ug(i,w)+a+14+3*F+Ug(L,D)+2*L[16]+3*L[17]+7*L[18];if(l>=0&&V<=Z&&V<=fe)return AU(e,d,t.subarray(l,l+c));var xe,he,ae,H;if(Id(e,d,1+(fe<Z)),d+=2,fe<Z){xe=R2(g,m,0),he=g,ae=R2(w,_,0),H=w;var te=R2(D,R,0);Id(e,d,I-257),Id(e,d+5,W-1),Id(e,d+10,F-4),d+=14;for(var A=0;A<F;++A)Id(e,d+3*A,D[rI[A]]);d+=3*F;for(var G=[T,K],P=0;P<2;++P)for(var U=G[P],A=0;A<U.length;++A){var X=U[A]&31;Id(e,d,te[X]),d+=D[X],X>15&&(Id(e,d,U[A]>>5&127),d+=U[A]>>12)}}else xe=tge,he=gp,ae=rge,H=L5;for(var A=0;A<o;++A){var J=n[A];if(J>255){var X=J>>18&31;Vg(e,d,xe[X+257]),d+=he[X+257],X>7&&(Id(e,d,J>>23&31),d+=D7[X]);var ie=J&31;Vg(e,d,ae[ie]),d+=H[ie],ie>3&&(Vg(e,d,J>>5&8191),d+=O7[ie])}else Vg(e,d,xe[J]),d+=he[J]}return Vg(e,d,xe[256]),d+he[256]},sge=new F7([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),NU=new mu(0),ige=function(t,e,r,n,s,i){var a=i.z||t.length,o=new mu(n+a+5*(1+Math.ceil(a/7e3))+s),l=o.subarray(n,o.length-s),c=i.l,d=(i.r||0)&7;if(e){d&&(l[0]=i.r>>3);for(var p=sge[e-1],g=p>>13,m=p&8191,y=(1<<r)-1,w=i.p||new ec(32768),_=i.h||new ec(y+1),S=Math.ceil(r/3),T=2*S,I=function(Re){return(t[Re]^t[Re+1]<<S^t[Re+2]<<T)&y},M=new F7(25e3),K=new ec(288),W=new ec(32),L=0,A=0,E=i.i||0,D=0,R=i.w||0,F=0;E+2<a;++E){var V=I(E),Z=E&32767,fe=_[V];if(w[Z]=fe,_[V]=Z,R<=E){var xe=a-E;if((L>7e3||D>24576)&&(xe>423||!c)){d=iI(t,l,0,M,K,W,A,D,F,E-F,d),D=L=A=0,F=E;for(var he=0;he<286;++he)K[he]=0;for(var he=0;he<30;++he)W[he]=0}var ae=2,H=0,te=m,G=Z-fe&32767;if(xe>2&&V==I(E-G))for(var P=Math.min(g,xe)-1,U=Math.min(32767,E),X=Math.min(258,xe);G<=U&&--te&&Z!=fe;){if(t[E+ae]==t[E+ae-G]){for(var J=0;J<X&&t[E+J]==t[E+J-G];++J);if(J>ae){if(ae=J,H=G,J>P)break;for(var ie=Math.min(G,J-2),ve=0,he=0;he<ie;++he){var ke=E-G+he&32767,oe=w[ke],Ee=ke-oe&32767;Ee>ve&&(ve=Ee,fe=ke)}}}Z=fe,fe=w[Z],G+=Z-fe&32767}if(H){M[D++]=268435456|sk[ae]<<18|nI[H];var Oe=sk[ae]&31,ne=nI[H]&31;A+=D7[Oe]+O7[ne],++K[257+Oe],++W[ne],R=E+ae,++L}else M[D++]=t[E],++K[t[E]]}}for(E=Math.max(E,R);E<a;++E)M[D++]=t[E],++K[t[E]];d=iI(t,l,c,M,K,W,A,D,F,E-F,d),c||(i.r=d&7|l[d/8|0]<<3,d-=7,i.h=_,i.p=w,i.i=E,i.w=R)}else{for(var E=i.w||0;E<a+c;E+=65535){var we=E+65535;we>=a&&(l[d/8|0]=c,we=a),d=AU(l,d+1,t.subarray(E,we))}i.i=a}return nge(o,0,n+CU(d)+s)},TU=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,i=r.length|0,a=0;a!=i;){for(var o=Math.min(a+2655,i);a<o;++a)s+=n+=r[a];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},age=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new mu(i.length+t.length);a.set(i),a.set(t,i.length),t=a,s.w=i.length}return ige(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},IU=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},oge=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=TU();s.p(e.dictionary),IU(t,2,s.d())}};function ok(t,e){e||(e={});var r=TU();r.p(t);var n=age(t,e,e.dictionary?6:2,4);return oge(n,e),IU(n,n.length-4,r.d()),n}var lge=typeof TextDecoder<"u"&&new TextDecoder,cge=0;try{lge.decode(NU,{stream:!0}),cge=1}catch{}function uge(t){if(Array.isArray(t))return t}function dge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,a,o=[],l=!0,c=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(l=(n=i.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}function aI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function hge(t,e){if(t){if(typeof t=="string")return aI(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?aI(t,e):void 0}}function fge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oI(t,e){return uge(t)||dge(t,e)||hge(t,e)||fge()}function lI(t,e="utf8"){return new TextDecoder(e).decode(t)}const pge=new TextEncoder;function mge(t){return pge.encode(t)}const gge=1024*8,xge=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),X3={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class M7{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=gge,r={}){let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const s=r.offset?r.offset>>>0:0,i=e.byteLength-s;let a=s;(ArrayBuffer.isView(e)||e instanceof M7)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+s),e=e.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,i),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,s=new Uint8Array(n);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=X3[r].BYTES_PER_ELEMENT*e,s=this.byteOffset+this.offset,i=this.buffer.slice(s,s+n);if(this.littleEndian===xge&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(s,s+n));o.reverse();const l=new X3[r](o.buffer);return this.offset+=n,l.reverse(),l}const a=new X3[r](i);return this.offset+=n,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return lI(this.readBytes(e))}decodeText(e=1,r="utf8"){return lI(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(mge(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function K1(t){let e=t.length;for(;--e>=0;)t[e]=0}const yge=3,vge=258,PU=29,wge=256,_ge=wge+1+PU,RU=30,bge=512,kge=new Array((_ge+2)*2);K1(kge);const Sge=new Array(RU*2);K1(Sge);const Ege=new Array(bge);K1(Ege);const Cge=new Array(vge-yge+1);K1(Cge);const Age=new Array(PU);K1(Age);const Nge=new Array(RU);K1(Nge);const Tge=(t,e,r,n)=>{let s=t&65535|0,i=t>>>16&65535|0,a=0;for(;r!==0;){a=r>2e3?2e3:r,r-=a;do s=s+e[n++]|0,i=i+s|0;while(--a);s%=65521,i%=65521}return s|i<<16|0};var lk=Tge;const Ige=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},Pge=new Uint32Array(Ige()),Rge=(t,e,r,n)=>{const s=Pge,i=n+r;t^=-1;for(let a=n;a<i;a++)t=t>>>8^s[(t^e[a])&255];return t^-1};var Du=Rge,ck={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},LU={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Lge=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var jge=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)Lge(r,n)&&(t[n]=r[n])}}return t},Fge=t=>{let e=0;for(let n=0,s=t.length;n<s;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,s=0,i=t.length;n<i;n++){let a=t[n];r.set(a,s),s+=a.length}return r},jU={assign:jge,flattenChunks:Fge};let FU=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{FU=!1}const bx=new Uint8Array(256);for(let t=0;t<256;t++)bx[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;bx[254]=bx[254]=1;var Dge=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,s,i,a=t.length,o=0;for(s=0;s<a;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<a&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),i=0,s=0;i<o;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<a&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?e[i++]=r:r<2048?(e[i++]=192|r>>>6,e[i++]=128|r&63):r<65536?(e[i++]=224|r>>>12,e[i++]=128|r>>>6&63,e[i++]=128|r&63):(e[i++]=240|r>>>18,e[i++]=128|r>>>12&63,e[i++]=128|r>>>6&63,e[i++]=128|r&63);return e};const Oge=(t,e)=>{if(e<65534&&t.subarray&&FU)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var Mge=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,s;const i=new Array(r*2);for(s=0,n=0;n<r;){let a=t[n++];if(a<128){i[s++]=a;continue}let o=bx[a];if(o>4){i[s++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<r;)a=a<<6|t[n++]&63,o--;if(o>1){i[s++]=65533;continue}a<65536?i[s++]=a:(a-=65536,i[s++]=55296|a>>10&1023,i[s++]=56320|a&1023)}return Oge(i,s)},Bge=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+bx[t[r]]>e?r:e},uk={string2buf:Dge,buf2string:Mge,utf8border:Bge};function Vge(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Uge=Vge;const Pv=16209,zge=16191;var $ge=function(e,r){let n,s,i,a,o,l,c,d,p,g,m,y,w,_,S,T,I,M,K,W,L,A,E,D;const R=e.state;n=e.next_in,E=e.input,s=n+(e.avail_in-5),i=e.next_out,D=e.output,a=i-(r-e.avail_out),o=i+(e.avail_out-257),l=R.dmax,c=R.wsize,d=R.whave,p=R.wnext,g=R.window,m=R.hold,y=R.bits,w=R.lencode,_=R.distcode,S=(1<<R.lenbits)-1,T=(1<<R.distbits)-1;e:do{y<15&&(m+=E[n++]<<y,y+=8,m+=E[n++]<<y,y+=8),I=w[m&S];t:for(;;){if(M=I>>>24,m>>>=M,y-=M,M=I>>>16&255,M===0)D[i++]=I&65535;else if(M&16){K=I&65535,M&=15,M&&(y<M&&(m+=E[n++]<<y,y+=8),K+=m&(1<<M)-1,m>>>=M,y-=M),y<15&&(m+=E[n++]<<y,y+=8,m+=E[n++]<<y,y+=8),I=_[m&T];r:for(;;){if(M=I>>>24,m>>>=M,y-=M,M=I>>>16&255,M&16){if(W=I&65535,M&=15,y<M&&(m+=E[n++]<<y,y+=8,y<M&&(m+=E[n++]<<y,y+=8)),W+=m&(1<<M)-1,W>l){e.msg="invalid distance too far back",R.mode=Pv;break e}if(m>>>=M,y-=M,M=i-a,W>M){if(M=W-M,M>d&&R.sane){e.msg="invalid distance too far back",R.mode=Pv;break e}if(L=0,A=g,p===0){if(L+=c-M,M<K){K-=M;do D[i++]=g[L++];while(--M);L=i-W,A=D}}else if(p<M){if(L+=c+p-M,M-=p,M<K){K-=M;do D[i++]=g[L++];while(--M);if(L=0,p<K){M=p,K-=M;do D[i++]=g[L++];while(--M);L=i-W,A=D}}}else if(L+=p-M,M<K){K-=M;do D[i++]=g[L++];while(--M);L=i-W,A=D}for(;K>2;)D[i++]=A[L++],D[i++]=A[L++],D[i++]=A[L++],K-=3;K&&(D[i++]=A[L++],K>1&&(D[i++]=A[L++]))}else{L=i-W;do D[i++]=D[L++],D[i++]=D[L++],D[i++]=D[L++],K-=3;while(K>2);K&&(D[i++]=D[L++],K>1&&(D[i++]=D[L++]))}}else if((M&64)===0){I=_[(I&65535)+(m&(1<<M)-1)];continue r}else{e.msg="invalid distance code",R.mode=Pv;break e}break}}else if((M&64)===0){I=w[(I&65535)+(m&(1<<M)-1)];continue t}else if(M&32){R.mode=zge;break e}else{e.msg="invalid literal/length code",R.mode=Pv;break e}break}}while(n<s&&i<o);K=y>>3,n-=K,y-=K<<3,m&=(1<<y)-1,e.next_in=n,e.next_out=i,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=i<o?257+(o-i):257-(i-o),R.hold=m,R.bits=y};const pm=15,cI=852,uI=592,dI=0,Q3=1,hI=2,qge=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Hge=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Wge=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Gge=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Kge=(t,e,r,n,s,i,a,o)=>{const l=o.bits;let c=0,d=0,p=0,g=0,m=0,y=0,w=0,_=0,S=0,T=0,I,M,K,W,L,A=null,E;const D=new Uint16Array(pm+1),R=new Uint16Array(pm+1);let F=null,V,Z,fe;for(c=0;c<=pm;c++)D[c]=0;for(d=0;d<n;d++)D[e[r+d]]++;for(m=l,g=pm;g>=1&&D[g]===0;g--);if(m>g&&(m=g),g===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,o.bits=1,0;for(p=1;p<g&&D[p]===0;p++);for(m<p&&(m=p),_=1,c=1;c<=pm;c++)if(_<<=1,_-=D[c],_<0)return-1;if(_>0&&(t===dI||g!==1))return-1;for(R[1]=0,c=1;c<pm;c++)R[c+1]=R[c]+D[c];for(d=0;d<n;d++)e[r+d]!==0&&(a[R[e[r+d]]++]=d);if(t===dI?(A=F=a,E=20):t===Q3?(A=qge,F=Hge,E=257):(A=Wge,F=Gge,E=0),T=0,d=0,c=p,L=i,y=m,w=0,K=-1,S=1<<m,W=S-1,t===Q3&&S>cI||t===hI&&S>uI)return 1;for(;;){V=c-w,a[d]+1<E?(Z=0,fe=a[d]):a[d]>=E?(Z=F[a[d]-E],fe=A[a[d]-E]):(Z=96,fe=0),I=1<<c-w,M=1<<y,p=M;do M-=I,s[L+(T>>w)+M]=V<<24|Z<<16|fe|0;while(M!==0);for(I=1<<c-1;T&I;)I>>=1;if(I!==0?(T&=I-1,T+=I):T=0,d++,--D[c]===0){if(c===g)break;c=e[r+a[d]]}if(c>m&&(T&W)!==K){for(w===0&&(w=m),L+=p,y=c-w,_=1<<y;y+w<g&&(_-=D[y+w],!(_<=0));)y++,_<<=1;if(S+=1<<y,t===Q3&&S>cI||t===hI&&S>uI)return 1;K=T&W,s[K]=m<<24|y<<16|L-i|0}}return T!==0&&(s[L+T]=c-w<<24|64<<16|0),o.bits=m,0};var L2=Kge;const Yge=0,DU=1,OU=2,{Z_FINISH:fI,Z_BLOCK:Xge,Z_TREES:Rv,Z_OK:xp,Z_STREAM_END:Qge,Z_NEED_DICT:Jge,Z_STREAM_ERROR:Dc,Z_DATA_ERROR:MU,Z_MEM_ERROR:BU,Z_BUF_ERROR:Zge,Z_DEFLATED:pI}=LU,K_=16180,mI=16181,gI=16182,xI=16183,yI=16184,vI=16185,wI=16186,_I=16187,bI=16188,kI=16189,j5=16190,Pd=16191,J3=16192,SI=16193,Z3=16194,EI=16195,CI=16196,AI=16197,NI=16198,Lv=16199,jv=16200,TI=16201,II=16202,PI=16203,RI=16204,LI=16205,eb=16206,jI=16207,FI=16208,Js=16209,VU=16210,UU=16211,e2e=852,t2e=592,r2e=15,n2e=r2e,DI=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function s2e(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Fp=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<K_||e.mode>UU?1:0},zU=t=>{if(Fp(t))return Dc;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=K_,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(e2e),e.distcode=e.distdyn=new Int32Array(t2e),e.sane=1,e.back=-1,xp},$U=t=>{if(Fp(t))return Dc;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,zU(t)},qU=(t,e)=>{let r;if(Fp(t))return Dc;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Dc:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,$U(t))},HU=(t,e)=>{if(!t)return Dc;const r=new s2e;t.state=r,r.strm=t,r.window=null,r.mode=K_;const n=qU(t,e);return n!==xp&&(t.state=null),n},i2e=t=>HU(t,n2e);let OI=!0,tb,rb;const a2e=t=>{if(OI){tb=new Int32Array(512),rb=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(L2(DU,t.lens,0,288,tb,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;L2(OU,t.lens,0,32,rb,0,t.work,{bits:5}),OI=!1}t.lencode=tb,t.lenbits=9,t.distcode=rb,t.distbits=5},WU=(t,e,r,n)=>{let s;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(e.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>n&&(s=n),i.window.set(e.subarray(r-n,r-n+s),i.wnext),n-=s,n?(i.window.set(e.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},o2e=(t,e)=>{let r,n,s,i,a,o,l,c,d,p,g,m,y,w,_=0,S,T,I,M,K,W,L,A;const E=new Uint8Array(4);let D,R;const F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Fp(t)||!t.output||!t.input&&t.avail_in!==0)return Dc;r=t.state,r.mode===Pd&&(r.mode=J3),a=t.next_out,s=t.output,l=t.avail_out,i=t.next_in,n=t.input,o=t.avail_in,c=r.hold,d=r.bits,p=o,g=l,A=xp;e:for(;;)switch(r.mode){case K_:if(r.wrap===0){r.mode=J3;break}for(;d<16;){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}if(r.wrap&2&&c===35615){r.wbits===0&&(r.wbits=15),r.check=0,E[0]=c&255,E[1]=c>>>8&255,r.check=Du(r.check,E,2,0),c=0,d=0,r.mode=mI;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=Js;break}if((c&15)!==pI){t.msg="unknown compression method",r.mode=Js;break}if(c>>>=4,d-=4,L=(c&15)+8,r.wbits===0&&(r.wbits=L),L>15||L>r.wbits){t.msg="invalid window size",r.mode=Js;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=c&512?kI:Pd,c=0,d=0;break;case mI:for(;d<16;){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}if(r.flags=c,(r.flags&255)!==pI){t.msg="unknown compression method",r.mode=Js;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Js;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&r.wrap&4&&(E[0]=c&255,E[1]=c>>>8&255,r.check=Du(r.check,E,2,0)),c=0,d=0,r.mode=gI;case gI:for(;d<32;){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}r.head&&(r.head.time=c),r.flags&512&&r.wrap&4&&(E[0]=c&255,E[1]=c>>>8&255,E[2]=c>>>16&255,E[3]=c>>>24&255,r.check=Du(r.check,E,4,0)),c=0,d=0,r.mode=xI;case xI:for(;d<16;){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&r.wrap&4&&(E[0]=c&255,E[1]=c>>>8&255,r.check=Du(r.check,E,2,0)),c=0,d=0,r.mode=yI;case yI:if(r.flags&1024){for(;d<16;){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&r.wrap&4&&(E[0]=c&255,E[1]=c>>>8&255,r.check=Du(r.check,E,2,0)),c=0,d=0}else r.head&&(r.head.extra=null);r.mode=vI;case vI:if(r.flags&1024&&(m=r.length,m>o&&(m=o),m&&(r.head&&(L=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+m),L)),r.flags&512&&r.wrap&4&&(r.check=Du(r.check,n,m,i)),o-=m,i+=m,r.length-=m),r.length))break e;r.length=0,r.mode=wI;case wI:if(r.flags&2048){if(o===0)break e;m=0;do L=n[i+m++],r.head&&L&&r.length<65536&&(r.head.name+=String.fromCharCode(L));while(L&&m<o);if(r.flags&512&&r.wrap&4&&(r.check=Du(r.check,n,m,i)),o-=m,i+=m,L)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=_I;case _I:if(r.flags&4096){if(o===0)break e;m=0;do L=n[i+m++],r.head&&L&&r.length<65536&&(r.head.comment+=String.fromCharCode(L));while(L&&m<o);if(r.flags&512&&r.wrap&4&&(r.check=Du(r.check,n,m,i)),o-=m,i+=m,L)break e}else r.head&&(r.head.comment=null);r.mode=bI;case bI:if(r.flags&512){for(;d<16;){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}if(r.wrap&4&&c!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Js;break}c=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Pd;break;case kI:for(;d<32;){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}t.adler=r.check=DI(c),c=0,d=0,r.mode=j5;case j5:if(r.havedict===0)return t.next_out=a,t.avail_out=l,t.next_in=i,t.avail_in=o,r.hold=c,r.bits=d,Jge;t.adler=r.check=1,r.mode=Pd;case Pd:if(e===Xge||e===Rv)break e;case J3:if(r.last){c>>>=d&7,d-=d&7,r.mode=eb;break}for(;d<3;){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}switch(r.last=c&1,c>>>=1,d-=1,c&3){case 0:r.mode=SI;break;case 1:if(a2e(r),r.mode=Lv,e===Rv){c>>>=2,d-=2;break e}break;case 2:r.mode=CI;break;case 3:t.msg="invalid block type",r.mode=Js}c>>>=2,d-=2;break;case SI:for(c>>>=d&7,d-=d&7;d<32;){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Js;break}if(r.length=c&65535,c=0,d=0,r.mode=Z3,e===Rv)break e;case Z3:r.mode=EI;case EI:if(m=r.length,m){if(m>o&&(m=o),m>l&&(m=l),m===0)break e;s.set(n.subarray(i,i+m),a),o-=m,i+=m,l-=m,a+=m,r.length-=m;break}r.mode=Pd;break;case CI:for(;d<14;){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}if(r.nlen=(c&31)+257,c>>>=5,d-=5,r.ndist=(c&31)+1,c>>>=5,d-=5,r.ncode=(c&15)+4,c>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Js;break}r.have=0,r.mode=AI;case AI:for(;r.have<r.ncode;){for(;d<3;){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}r.lens[F[r.have++]]=c&7,c>>>=3,d-=3}for(;r.have<19;)r.lens[F[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,D={bits:r.lenbits},A=L2(Yge,r.lens,0,19,r.lencode,0,r.work,D),r.lenbits=D.bits,A){t.msg="invalid code lengths set",r.mode=Js;break}r.have=0,r.mode=NI;case NI:for(;r.have<r.nlen+r.ndist;){for(;_=r.lencode[c&(1<<r.lenbits)-1],S=_>>>24,T=_>>>16&255,I=_&65535,!(S<=d);){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}if(I<16)c>>>=S,d-=S,r.lens[r.have++]=I;else{if(I===16){for(R=S+2;d<R;){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}if(c>>>=S,d-=S,r.have===0){t.msg="invalid bit length repeat",r.mode=Js;break}L=r.lens[r.have-1],m=3+(c&3),c>>>=2,d-=2}else if(I===17){for(R=S+3;d<R;){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}c>>>=S,d-=S,L=0,m=3+(c&7),c>>>=3,d-=3}else{for(R=S+7;d<R;){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}c>>>=S,d-=S,L=0,m=11+(c&127),c>>>=7,d-=7}if(r.have+m>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Js;break}for(;m--;)r.lens[r.have++]=L}}if(r.mode===Js)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Js;break}if(r.lenbits=9,D={bits:r.lenbits},A=L2(DU,r.lens,0,r.nlen,r.lencode,0,r.work,D),r.lenbits=D.bits,A){t.msg="invalid literal/lengths set",r.mode=Js;break}if(r.distbits=6,r.distcode=r.distdyn,D={bits:r.distbits},A=L2(OU,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,D),r.distbits=D.bits,A){t.msg="invalid distances set",r.mode=Js;break}if(r.mode=Lv,e===Rv)break e;case Lv:r.mode=jv;case jv:if(o>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=i,t.avail_in=o,r.hold=c,r.bits=d,$ge(t,g),a=t.next_out,s=t.output,l=t.avail_out,i=t.next_in,n=t.input,o=t.avail_in,c=r.hold,d=r.bits,r.mode===Pd&&(r.back=-1);break}for(r.back=0;_=r.lencode[c&(1<<r.lenbits)-1],S=_>>>24,T=_>>>16&255,I=_&65535,!(S<=d);){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}if(T&&(T&240)===0){for(M=S,K=T,W=I;_=r.lencode[W+((c&(1<<M+K)-1)>>M)],S=_>>>24,T=_>>>16&255,I=_&65535,!(M+S<=d);){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}c>>>=M,d-=M,r.back+=M}if(c>>>=S,d-=S,r.back+=S,r.length=I,T===0){r.mode=LI;break}if(T&32){r.back=-1,r.mode=Pd;break}if(T&64){t.msg="invalid literal/length code",r.mode=Js;break}r.extra=T&15,r.mode=TI;case TI:if(r.extra){for(R=r.extra;d<R;){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=II;case II:for(;_=r.distcode[c&(1<<r.distbits)-1],S=_>>>24,T=_>>>16&255,I=_&65535,!(S<=d);){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}if((T&240)===0){for(M=S,K=T,W=I;_=r.distcode[W+((c&(1<<M+K)-1)>>M)],S=_>>>24,T=_>>>16&255,I=_&65535,!(M+S<=d);){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}c>>>=M,d-=M,r.back+=M}if(c>>>=S,d-=S,r.back+=S,T&64){t.msg="invalid distance code",r.mode=Js;break}r.offset=I,r.extra=T&15,r.mode=PI;case PI:if(r.extra){for(R=r.extra;d<R;){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Js;break}r.mode=RI;case RI:if(l===0)break e;if(m=g-l,r.offset>m){if(m=r.offset-m,m>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Js;break}m>r.wnext?(m-=r.wnext,y=r.wsize-m):y=r.wnext-m,m>r.length&&(m=r.length),w=r.window}else w=s,y=a-r.offset,m=r.length;m>l&&(m=l),l-=m,r.length-=m;do s[a++]=w[y++];while(--m);r.length===0&&(r.mode=jv);break;case LI:if(l===0)break e;s[a++]=r.length,l--,r.mode=jv;break;case eb:if(r.wrap){for(;d<32;){if(o===0)break e;o--,c|=n[i++]<<d,d+=8}if(g-=l,t.total_out+=g,r.total+=g,r.wrap&4&&g&&(t.adler=r.check=r.flags?Du(r.check,s,g,a-g):lk(r.check,s,g,a-g)),g=l,r.wrap&4&&(r.flags?c:DI(c))!==r.check){t.msg="incorrect data check",r.mode=Js;break}c=0,d=0}r.mode=jI;case jI:if(r.wrap&&r.flags){for(;d<32;){if(o===0)break e;o--,c+=n[i++]<<d,d+=8}if(r.wrap&4&&c!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Js;break}c=0,d=0}r.mode=FI;case FI:A=Qge;break e;case Js:A=MU;break e;case VU:return BU;case UU:default:return Dc}return t.next_out=a,t.avail_out=l,t.next_in=i,t.avail_in=o,r.hold=c,r.bits=d,(r.wsize||g!==t.avail_out&&r.mode<Js&&(r.mode<eb||e!==fI))&&WU(t,t.output,t.next_out,g-t.avail_out),p-=t.avail_in,g-=t.avail_out,t.total_in+=p,t.total_out+=g,r.total+=g,r.wrap&4&&g&&(t.adler=r.check=r.flags?Du(r.check,s,g,t.next_out-g):lk(r.check,s,g,t.next_out-g)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Pd?128:0)+(r.mode===Lv||r.mode===Z3?256:0),(p===0&&g===0||e===fI)&&A===xp&&(A=Zge),A},l2e=t=>{if(Fp(t))return Dc;let e=t.state;return e.window&&(e.window=null),t.state=null,xp},c2e=(t,e)=>{if(Fp(t))return Dc;const r=t.state;return(r.wrap&2)===0?Dc:(r.head=e,e.done=!1,xp)},u2e=(t,e)=>{const r=e.length;let n,s,i;return Fp(t)||(n=t.state,n.wrap!==0&&n.mode!==j5)?Dc:n.mode===j5&&(s=1,s=lk(s,e,r,0),s!==n.check)?MU:(i=WU(t,e,r,r),i?(n.mode=VU,BU):(n.havedict=1,xp))};var d2e=$U,h2e=qU,f2e=zU,p2e=i2e,m2e=HU,g2e=o2e,x2e=l2e,y2e=c2e,v2e=u2e,w2e="pako inflate (from Nodeca project)",jd={inflateReset:d2e,inflateReset2:h2e,inflateResetKeep:f2e,inflateInit:p2e,inflateInit2:m2e,inflate:g2e,inflateEnd:x2e,inflateGetHeader:y2e,inflateSetDictionary:v2e,inflateInfo:w2e};function _2e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var b2e=_2e;const GU=Object.prototype.toString,{Z_NO_FLUSH:k2e,Z_FINISH:S2e,Z_OK:kx,Z_STREAM_END:nb,Z_NEED_DICT:sb,Z_STREAM_ERROR:E2e,Z_DATA_ERROR:MI,Z_MEM_ERROR:C2e}=LU;function hy(t){this.options=jU.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Uge,this.strm.avail_out=0;let r=jd.inflateInit2(this.strm,e.windowBits);if(r!==kx)throw new Error(ck[r]);if(this.header=new b2e,jd.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=uk.string2buf(e.dictionary):GU.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=jd.inflateSetDictionary(this.strm,e.dictionary),r!==kx)))throw new Error(ck[r])}hy.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let i,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?S2e:k2e,GU.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=jd.inflate(r,a),i===sb&&s&&(i=jd.inflateSetDictionary(r,s),i===kx?i=jd.inflate(r,a):i===MI&&(i=sb));r.avail_in>0&&i===nb&&r.state.wrap>0&&t[r.next_in]!==0;)jd.inflateReset(r),i=jd.inflate(r,a);switch(i){case E2e:case MI:case sb:case C2e:return this.onEnd(i),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||i===nb))if(this.options.to==="string"){let l=uk.utf8border(r.output,r.next_out),c=r.next_out-l,d=uk.buf2string(r.output,l);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(l,l+c),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===kx&&o===0)){if(i===nb)return i=jd.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};hy.prototype.onData=function(t){this.chunks.push(t)};hy.prototype.onEnd=function(t){t===kx&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=jU.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function A2e(t,e){const r=new hy(e);if(r.push(t),r.err)throw r.msg||ck[r.err];return r.result}var N2e=hy,T2e=A2e,I2e={Inflate:N2e,inflate:T2e};const{Inflate:P2e,inflate:R2e}=I2e;var BI=P2e,L2e=R2e;const KU=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;KU[t]=e}const VI=4294967295;function j2e(t,e,r){let n=t;for(let s=0;s<r;s++)n=KU[(n^e[s])&255]^n>>>8;return n}function F2e(t,e){return(j2e(VI,t,e)^VI)>>>0}function UI(t,e,r){const n=t.readUint32(),s=F2e(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(s!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${s}`)}function YU(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function XU(t,e,r,n){let s=0;for(;s<n;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-n]&255}function QU(t,e,r,n){let s=0;if(r.length===0)for(;s<n;s++)e[s]=t[s];else for(;s<n;s++)e[s]=t[s]+r[s]&255}function JU(t,e,r,n,s){let i=0;if(r.length===0){for(;i<s;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+(e[i-s]>>1)&255}else{for(;i<s;i++)e[i]=t[i]+(r[i]>>1)&255;for(;i<n;i++)e[i]=t[i]+(e[i-s]+r[i]>>1)&255}}function ZU(t,e,r,n,s){let i=0;if(r.length===0){for(;i<s;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-s]&255}else{for(;i<s;i++)e[i]=t[i]+r[i]&255;for(;i<n;i++)e[i]=t[i]+D2e(e[i-s],r[i],r[i-s])&255}}function D2e(t,e,r){const n=t+e-r,s=Math.abs(n-t),i=Math.abs(n-e),a=Math.abs(n-r);return s<=i&&s<=a?t:i<=a?e:r}function O2e(t,e,r,n,s,i){switch(t){case 0:YU(e,r,s);break;case 1:XU(e,r,s,i);break;case 2:QU(e,r,n,s);break;case 3:JU(e,r,n,s,i);break;case 4:ZU(e,r,n,s,i);break;default:throw new Error(`Unsupported filter: ${t}`)}}const M2e=new Uint16Array([255]),B2e=new Uint8Array(M2e.buffer),V2e=B2e[0]===255;function U2e(t){const{data:e,width:r,height:n,channels:s,depth:i}=t,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(i/8)*s,l=new Uint8Array(n*r*o);let c=0;for(let d=0;d<7;d++){const p=a[d],g=Math.ceil((r-p.x)/p.xStep),m=Math.ceil((n-p.y)/p.yStep);if(g<=0||m<=0)continue;const y=g*o,w=new Uint8Array(y);for(let _=0;_<m;_++){const S=e[c++],T=e.subarray(c,c+y);c+=y;const I=new Uint8Array(y);O2e(S,T,I,w,y,o),w.set(I);for(let M=0;M<g;M++){const K=p.x+M*p.xStep,W=p.y+_*p.yStep;if(!(K>=r||W>=n))for(let L=0;L<o;L++)l[(W*r+K)*o+L]=I[M*o+L]}}}if(i===16){const d=new Uint16Array(l.buffer);if(V2e)for(let p=0;p<d.length;p++)d[p]=z2e(d[p]);return d}else return l}function z2e(t){return(t&255)<<8|t>>8&255}const $2e=new Uint16Array([255]),q2e=new Uint8Array($2e.buffer),H2e=q2e[0]===255,W2e=new Uint8Array(0);function zI(t){const{data:e,width:r,height:n,channels:s,depth:i}=t,a=Math.ceil(i/8)*s,o=Math.ceil(i/8*s*r),l=new Uint8Array(n*o);let c=W2e,d=0,p,g;for(let m=0;m<n;m++){switch(p=e.subarray(d+1,d+1+o),g=l.subarray(m*o,(m+1)*o),e[d]){case 0:YU(p,g,o);break;case 1:XU(p,g,o,a);break;case 2:QU(p,g,c,o);break;case 3:JU(p,g,c,o,a);break;case 4:ZU(p,g,c,o,a);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}c=g,d+=o+1}if(i===16){const m=new Uint16Array(l.buffer);if(H2e)for(let y=0;y<m.length;y++)m[y]=G2e(m[y]);return m}else return l}function G2e(t){return(t&255)<<8|t>>8&255}const _w=Uint8Array.of(137,80,78,71,13,10,26,10);function $I(t){if(!K2e(t.readBytes(_w.length)))throw new Error("wrong PNG signature")}function K2e(t){if(t.length<_w.length)return!1;for(let e=0;e<_w.length;e++)if(t[e]!==_w[e])return!1;return!0}const Y2e="tEXt",X2e=0,ez=new TextDecoder("latin1");function Q2e(t){if(Z2e(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const J2e=/^[\u0000-\u00FF]*$/;function Z2e(t){if(!J2e.test(t))throw new Error("invalid latin1 text")}function exe(t,e,r){const n=tz(e);t[n]=txe(e,r-n.length-1)}function tz(t){for(t.mark();t.readByte()!==X2e;);const e=t.offset;t.reset();const r=ez.decode(t.readBytes(e-t.offset-1));return t.skip(1),Q2e(r),r}function txe(t,e){return ez.decode(t.readBytes(e))}const ql={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},ib={UNKNOWN:-1,DEFLATE:0},qI={UNKNOWN:-1,ADAPTIVE:0},ab={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Fv={NONE:0,BACKGROUND:1,PREVIOUS:2},ob={SOURCE:0,OVER:1};class rxe extends M7{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,r={}){super(e);const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new BI,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=ib.UNKNOWN,this._filterMethod=qI.UNKNOWN,this._interlaceMethod=ab.UNKNOWN,this._colorType=ql.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for($I(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeChunk(e,r)}return this.decodeImage(),this._png}decodeApng(){for($I(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(e,r)}return this.decodeApngImage(),this._apng}decodeChunk(e,r){const n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case Y2e:exe(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?UI(this,e+4,r):this.skip(4)}decodeApngChunk(e,r){const n=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,r),this.offset=n+e;break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?UI(this,e+4,r):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=nxe(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case ql.GREYSCALE:n=1;break;case ql.TRUECOLOUR:n=3;break;case ql.INDEXED_COLOUR:n=1;break;case ql.GREYSCALE_ALPHA:n=2;break;case ql.TRUECOLOUR_ALPHA:n=4;break;case ql.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==ib.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const r=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let s=0;s<r;s++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const r=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let r=e,n=this.offset+this.byteOffset;if(n+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case ql.GREYSCALE:case ql.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let r=0;r<e/2;r++)this._transparency[r]=this.readUint16();break}case ql.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let r=0;for(;r<e;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case ql.UNKNOWN:case ql.GREYSCALE_ALPHA:case ql.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const r=tz(this),n=this.readUint8();if(n!==ib.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const s=this.readBytes(e-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:L2e(s)}}decodepHYs(){const e=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:r,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const r={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=zI({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)r.data=n.data;else{const s=this._apng.frames.at(e-1);this.disposeFrame(n,s,r),this.addFrameDataToCanvas(r,n)}this._apng.frames.push(r)}}return this._apng}disposeFrame(e,r,n){switch(e.disposeOp){case Fv.NONE:break;case Fv.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let i=0;i<this._png.width;i++){const a=(s*e.width+i)*this._png.channels;for(let o=0;o<this._png.channels;o++)n.data[a+o]=0}break;case Fv.PREVIOUS:n.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,r){const n=1<<this._png.depth,s=(i,a)=>{const o=((i+r.yOffset)*this._png.width+r.xOffset+a)*this._png.channels,l=(i*r.width+a)*this._png.channels;return{index:o,frameIndex:l}};switch(r.blendOp){case ob.SOURCE:for(let i=0;i<r.height;i++)for(let a=0;a<r.width;a++){const{index:o,frameIndex:l}=s(i,a);for(let c=0;c<this._png.channels;c++)e.data[o+c]=r.data[l+c]}break;case ob.OVER:for(let i=0;i<r.height;i++)for(let a=0;a<r.width;a++){const{index:o,frameIndex:l}=s(i,a);for(let c=0;c<this._png.channels;c++){const d=r.data[l+this._png.channels-1]/n,p=c%(this._png.channels-1)===0?1:r.data[l+c],g=Math.floor(d*p+(1-d)*e.data[o+c]);e.data[o+c]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==qI.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===ab.NO_INTERLACE)this._png.data=zI({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===ab.ADAM7)this._png.data=U2e({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,r=this._frames.at(-1);r?r.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Fv.NONE,blendOp:ob.SOURCE,data:e}),this._inflator=new BI,this._writingDataChunks=!1}}function nxe(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var HI;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(HI||(HI={}));function sxe(t,e){return new rxe(t,e).decode()}var Gr=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function lb(){Gr.console&&typeof Gr.console.log=="function"&&Gr.console.log.apply(Gr.console,arguments)}var Ns={log:lb,warn:function(t){Gr.console&&(typeof Gr.console.warn=="function"?Gr.console.warn.apply(Gr.console,arguments):lb.call(null,arguments))},error:function(t){Gr.console&&(typeof Gr.console.error=="function"?Gr.console.error.apply(Gr.console,arguments):lb(t))}};function cb(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){y0(n.response,e,r)},n.onerror=function(){Ns.error("could not download file")},n.send()}function WI(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Dv(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var y0=Gr.saveAs||((typeof window>"u"?"undefined":hs(window))!=="object"||window!==Gr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Gr.URL||Gr.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?WI(s.href)?cb(t,e,r):Dv(s,s.target="_blank"):Dv(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){Dv(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(WI(t))cb(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){Dv(n)})}else navigator.msSaveOrOpenBlob((function(s,i){return i===void 0?i={autoBom:!1}:hs(i)!=="object"&&(Ns.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s})(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return cb(t,e,r);var s=t.type==="application/octet-stream",i=/constructor/i.test(Gr.HTMLElement)||Gr.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":hs(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=a?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(t)}else{var l=Gr.URL||Gr.webkitURL,c=l.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function rz(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,a=s.exec(t);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}var bw=Gr.atob.bind(Gr),GI=Gr.btoa.bind(Gr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function ub(t,e){var r=t[0],n=t[1],s=t[2],i=t[3];r=Ro(r,n,s,i,e[0],7,-680876936),i=Ro(i,r,n,s,e[1],12,-389564586),s=Ro(s,i,r,n,e[2],17,606105819),n=Ro(n,s,i,r,e[3],22,-1044525330),r=Ro(r,n,s,i,e[4],7,-176418897),i=Ro(i,r,n,s,e[5],12,1200080426),s=Ro(s,i,r,n,e[6],17,-1473231341),n=Ro(n,s,i,r,e[7],22,-45705983),r=Ro(r,n,s,i,e[8],7,1770035416),i=Ro(i,r,n,s,e[9],12,-1958414417),s=Ro(s,i,r,n,e[10],17,-42063),n=Ro(n,s,i,r,e[11],22,-1990404162),r=Ro(r,n,s,i,e[12],7,1804603682),i=Ro(i,r,n,s,e[13],12,-40341101),s=Ro(s,i,r,n,e[14],17,-1502002290),r=Lo(r,n=Ro(n,s,i,r,e[15],22,1236535329),s,i,e[1],5,-165796510),i=Lo(i,r,n,s,e[6],9,-1069501632),s=Lo(s,i,r,n,e[11],14,643717713),n=Lo(n,s,i,r,e[0],20,-373897302),r=Lo(r,n,s,i,e[5],5,-701558691),i=Lo(i,r,n,s,e[10],9,38016083),s=Lo(s,i,r,n,e[15],14,-660478335),n=Lo(n,s,i,r,e[4],20,-405537848),r=Lo(r,n,s,i,e[9],5,568446438),i=Lo(i,r,n,s,e[14],9,-1019803690),s=Lo(s,i,r,n,e[3],14,-187363961),n=Lo(n,s,i,r,e[8],20,1163531501),r=Lo(r,n,s,i,e[13],5,-1444681467),i=Lo(i,r,n,s,e[2],9,-51403784),s=Lo(s,i,r,n,e[7],14,1735328473),r=jo(r,n=Lo(n,s,i,r,e[12],20,-1926607734),s,i,e[5],4,-378558),i=jo(i,r,n,s,e[8],11,-2022574463),s=jo(s,i,r,n,e[11],16,1839030562),n=jo(n,s,i,r,e[14],23,-35309556),r=jo(r,n,s,i,e[1],4,-1530992060),i=jo(i,r,n,s,e[4],11,1272893353),s=jo(s,i,r,n,e[7],16,-155497632),n=jo(n,s,i,r,e[10],23,-1094730640),r=jo(r,n,s,i,e[13],4,681279174),i=jo(i,r,n,s,e[0],11,-358537222),s=jo(s,i,r,n,e[3],16,-722521979),n=jo(n,s,i,r,e[6],23,76029189),r=jo(r,n,s,i,e[9],4,-640364487),i=jo(i,r,n,s,e[12],11,-421815835),s=jo(s,i,r,n,e[15],16,530742520),r=Fo(r,n=jo(n,s,i,r,e[2],23,-995338651),s,i,e[0],6,-198630844),i=Fo(i,r,n,s,e[7],10,1126891415),s=Fo(s,i,r,n,e[14],15,-1416354905),n=Fo(n,s,i,r,e[5],21,-57434055),r=Fo(r,n,s,i,e[12],6,1700485571),i=Fo(i,r,n,s,e[3],10,-1894986606),s=Fo(s,i,r,n,e[10],15,-1051523),n=Fo(n,s,i,r,e[1],21,-2054922799),r=Fo(r,n,s,i,e[8],6,1873313359),i=Fo(i,r,n,s,e[15],10,-30611744),s=Fo(s,i,r,n,e[6],15,-1560198380),n=Fo(n,s,i,r,e[13],21,1309151649),r=Fo(r,n,s,i,e[4],6,-145523070),i=Fo(i,r,n,s,e[11],10,-1120210379),s=Fo(s,i,r,n,e[2],15,718787259),n=Fo(n,s,i,r,e[9],21,-343485551),t[0]=cf(r,t[0]),t[1]=cf(n,t[1]),t[2]=cf(s,t[2]),t[3]=cf(i,t[3])}function Y_(t,e,r,n,s,i){return e=cf(cf(e,t),cf(n,i)),cf(e<<s|e>>>32-s,r)}function Ro(t,e,r,n,s,i,a){return Y_(e&r|~e&n,t,e,s,i,a)}function Lo(t,e,r,n,s,i,a){return Y_(e&n|r&~n,t,e,s,i,a)}function jo(t,e,r,n,s,i,a){return Y_(e^r^n,t,e,s,i,a)}function Fo(t,e,r,n,s,i,a){return Y_(r^(e|~n),t,e,s,i,a)}function nz(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)ub(n,ixe(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(ub(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,ub(n,s),n}function ixe(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var KI="0123456789abcdef".split("");function axe(t){for(var e="",r=0;r<4;r++)e+=KI[t>>8*r+4&15]+KI[t>>8*r&15];return e}function oxe(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function dk(t){return nz(t).map(oxe).join("")}var lxe=(function(t){for(var e=0;e<t.length;e++)t[e]=axe(t[e]);return t.join("")})(nz("hello"))!="5d41402abc4b2a76b9719d911017c592";function cf(t,e){if(lxe){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function hk(t,e){var r,n,s,i;if(t!==r){for(var a=(s=t,i=1+(256/t.length|0),new Array(i+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+a.charCodeAt(l))%256,o[l]=o[c],o[c]=d}r=t,n=o}else o=n;var p=e.length,g=0,m=0,y="";for(l=0;l<p;l++)m=(m+(d=o[g=(g+1)%256]))%256,o[g]=o[m],o[m]=d,a=o[(o[g]+o[m])%256],y+=String.fromCharCode(e.charCodeAt(l)^a);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var YI={print:4,modify:8,copy:16,"annot-forms":32};function Am(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(YI.perm!==void 0)throw new Error("Invalid permission: "+o);s+=YI[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=dk(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=hk(this.encryptionKey,this.padding)}function Nm(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);e+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):t[n]}return e}function XI(t){if(hs(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var i=Math.random().toString(35);return e[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[r]){var a=e[r][i];try{a[0].apply(t,n)}catch(o){Gr.console&&Ns.error("jsPDF PubSub Error",o.message,o)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function F5(t){if(!(this instanceof F5))return new F5(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function sz(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function A0(t,e,r,n,s){if(!(this instanceof A0))return new A0(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,sz.call(this,n,s)}function Lm(t,e,r,n,s){if(!(this instanceof Lm))return new Lm(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,sz.call(this,n,s)}function kr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],a=[],o=1,l=16,c="S",d=null;hs(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,i=t.compress||t.compressPdf||i,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(i===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,g={},m={internal:{},__private__:{}};m.__private__.PubSub=XI;var y="1.3",w=m.__private__.getPdfVersion=function(){return y};m.__private__.setPdfVersion=function(B){y=B};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return _};var S=m.__private__.getPageFormat=function(B){return _[B]};s=s||"a4";var T="compat",I="advanced",M=T;function K(){this.saveGraphicsState(),pe(new vr(lt,0,0,-lt,0,Zi()*lt).toString()+" cm"),this.setFontSize(this.getFontSize()/lt),c="n",M=I}function W(){this.restoreGraphicsState(),c="S",M=T}var L=m.__private__.combineFontStyleAndFontWeight=function(B,re){if(B=="bold"&&re=="normal"||B=="bold"&&re==400||B=="normal"&&re=="italic"||B=="bold"&&re=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return re&&(B=re==400||re==="normal"?B==="italic"?"italic":"normal":re!=700&&re!=="bold"||B!=="normal"?(re==700?"bold":re)+""+B:"bold"),B};m.advancedAPI=function(B){var re=M===T;return re&&K.call(this),typeof B!="function"||(B(this),re&&W.call(this)),this},m.compatAPI=function(B){var re=M===I;return re&&W.call(this),typeof B!="function"||(B(this),re&&K.call(this)),this},m.isAdvancedAPI=function(){return M===I};var A,E=function(B){if(M!==I)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},D=m.roundToPrecision=m.__private__.roundToPrecision=function(B,re){var Ae=e||re;if(isNaN(B)||isNaN(Ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(Ae).replace(/0+$/,"")};A=m.hpf=m.__private__.hpf=typeof l=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return D(B,l)}:l==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return D(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return D(B,16)};var R=m.f2=m.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return D(B,2)},F=m.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return D(B,3)},V=m.scale=m.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return M===T?B*lt:M===I?B:void 0},Z=function(B){return V((function(re){return M===T?Zi()-re:M===I?re:void 0})(B))};m.__private__.setPrecision=m.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(e=parseInt(B,10))};var fe,xe="00000000000000000000000000000000",he=m.__private__.getFileId=function(){return xe},ae=m.__private__.setFileId=function(B){return xe=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():xe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(cn=new Am(d.userPermissions,d.userPassword,d.ownerPassword,xe)),xe};m.setFileId=function(B){return ae(B),this},m.getFileId=function(){return he()};var H=m.__private__.convertDateToPDFDate=function(B){var re=B.getTimezoneOffset(),Ae=re<0?"+":"-",Me=Math.floor(Math.abs(re/60)),Ge=Math.abs(re%60),bt=[Ae,X(Me),"'",X(Ge),"'"].join("");return["D:",B.getFullYear(),X(B.getMonth()+1),X(B.getDate()),X(B.getHours()),X(B.getMinutes()),X(B.getSeconds()),bt].join("")},te=m.__private__.convertPDFDateToDate=function(B){var re=parseInt(B.substr(2,4),10),Ae=parseInt(B.substr(6,2),10)-1,Me=parseInt(B.substr(8,2),10),Ge=parseInt(B.substr(10,2),10),bt=parseInt(B.substr(12,2),10),Nt=parseInt(B.substr(14,2),10);return new Date(re,Ae,Me,Ge,bt,Nt,0)},G=m.__private__.setCreationDate=function(B){var re;if(B===void 0&&(B=new Date),B instanceof Date)re=H(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");re=B}return fe=re},P=m.__private__.getCreationDate=function(B){var re=fe;return B==="jsDate"&&(re=te(fe)),re};m.setCreationDate=function(B){return G(B),this},m.getCreationDate=function(B){return P(B)};var U,X=m.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},J=m.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},ie=0,ve=[],ke=[],oe=0,Ee=[],Oe=[],ne=!1,we=ke;m.__private__.setCustomOutputDestination=function(B){ne=!0,we=B};var Re=function(B){ne||(we=B)};m.__private__.resetCustomOutputDestination=function(){ne=!1,we=ke};var pe=m.__private__.out=function(B){return B=B.toString(),oe+=B.length+1,we.push(B),we},Ke=m.__private__.write=function(B){return pe(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},ze=m.__private__.getArrayBuffer=function(B){for(var re=B.length,Ae=new ArrayBuffer(re),Me=new Uint8Array(Ae);re--;)Me[re]=B.charCodeAt(re);return Ae},ot=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return ot};var Be=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(B){return Be=M===I?B/lt:B,this};var He,ut=m.__private__.getFontSize=m.getFontSize=function(){return M===T?Be:Be*lt},Ct=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(B){return Ct=B,this},m.__private__.getR2L=m.getR2L=function(){return Ct};var Et,Le=m.__private__.setZoomMode=function(B){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))He=B;else if(isNaN(B)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');He=B}else He=parseInt(B,10)};m.__private__.getZoomMode=function(){return He};var Ye,Qe=m.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');Et=B};m.__private__.getPageMode=function(){return Et};var le=m.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');Ye=B};m.__private__.getLayoutMode=function(){return Ye},m.__private__.setDisplayMode=m.setDisplayMode=function(B,re,Ae){return Le(B),le(re),Qe(Ae),this};var je={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(B){if(Object.keys(je).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return je[B]},m.__private__.getDocumentProperties=function(){return je},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(B){for(var re in je)je.hasOwnProperty(re)&&B[re]&&(je[re]=B[re]);return this},m.__private__.setDocumentProperty=function(B,re){if(Object.keys(je).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return je[B]=re};var We,lt,yt,$t,Xt,At={},Vt={},Or=[],rr={},Sr={},Cr={},Bn={},bn=null,Yr=0,hr=[],Jr=new XI(m),ha=t.hotfixes||[],ms={},Pi={},gs=[],vr=function B(re,Ae,Me,Ge,bt,Nt){if(!(this instanceof B))return new B(re,Ae,Me,Ge,bt,Nt);isNaN(re)&&(re=1),isNaN(Ae)&&(Ae=0),isNaN(Me)&&(Me=0),isNaN(Ge)&&(Ge=1),isNaN(bt)&&(bt=0),isNaN(Nt)&&(Nt=0),this._matrix=[re,Ae,Me,Ge,bt,Nt]};Object.defineProperty(vr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(vr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(vr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(vr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(vr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(vr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(vr.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(vr.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(vr.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(vr.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(vr.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(vr.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(vr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vr.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(B)},vr.prototype.multiply=function(B){var re=B.sx*this.sx+B.shy*this.shx,Ae=B.sx*this.shy+B.shy*this.sy,Me=B.shx*this.sx+B.sy*this.shx,Ge=B.shx*this.shy+B.sy*this.sy,bt=B.tx*this.sx+B.ty*this.shx+this.tx,Nt=B.tx*this.shy+B.ty*this.sy+this.ty;return new vr(re,Ae,Me,Ge,bt,Nt)},vr.prototype.decompose=function(){var B=this.sx,re=this.shy,Ae=this.shx,Me=this.sy,Ge=this.tx,bt=this.ty,Nt=Math.sqrt(B*B+re*re),tr=(B/=Nt)*Ae+(re/=Nt)*Me;Ae-=B*tr,Me-=re*tr;var ar=Math.sqrt(Ae*Ae+Me*Me);return tr/=ar,B*(Me/=ar)<re*(Ae/=ar)&&(B=-B,re=-re,tr=-tr,Nt=-Nt),{scale:new vr(Nt,0,0,ar,0,0),translate:new vr(1,0,0,1,Ge,bt),rotate:new vr(B,re,-re,B,0,0),skew:new vr(1,0,tr,1,0,0)}},vr.prototype.toString=function(B){return this.join(" ")},vr.prototype.inversed=function(){var B=this.sx,re=this.shy,Ae=this.shx,Me=this.sy,Ge=this.tx,bt=this.ty,Nt=1/(B*Me-re*Ae),tr=Me*Nt,ar=-re*Nt,Nr=-Ae*Nt,Mr=B*Nt;return new vr(tr,ar,Nr,Mr,-tr*Ge-Nr*bt,-ar*Ge-Mr*bt)},vr.prototype.applyToPoint=function(B){var re=B.x*this.sx+B.y*this.shx+this.tx,Ae=B.x*this.shy+B.y*this.sy+this.ty;return new Xo(re,Ae)},vr.prototype.applyToRectangle=function(B){var re=this.applyToPoint(B),Ae=this.applyToPoint(new Xo(B.x+B.w,B.y+B.h));return new oc(re.x,re.y,Ae.x-re.x,Ae.y-re.y)},vr.prototype.clone=function(){var B=this.sx,re=this.shy,Ae=this.shx,Me=this.sy,Ge=this.tx,bt=this.ty;return new vr(B,re,Ae,Me,Ge,bt)},m.Matrix=vr;var Nn=m.matrixMult=function(B,re){return re.multiply(B)},Ri=new vr(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Ri;var Gn=function(B,re){if(!Sr[B]){var Ae=(re instanceof A0?"Sh":"P")+(Object.keys(rr).length+1).toString(10);re.id=Ae,Sr[B]=Ae,rr[Ae]=re,Jr.publish("addPattern",re)}};m.ShadingPattern=A0,m.TilingPattern=Lm,m.addShadingPattern=function(B,re){return E("addShadingPattern()"),Gn(B,re),this},m.beginTilingPattern=function(B){E("beginTilingPattern()"),ga(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},m.endTilingPattern=function(B,re){E("endTilingPattern()"),re.stream=Oe[U].join(`
`),Gn(B,re),Jr.publish("endTilingPattern",re),gs.pop().restore()};var ln,Ln=m.__private__.newObject=function(){var B=ss();return ce(B,!0),B},ss=m.__private__.newObjectDeferred=function(){return ie++,ve[ie]=function(){return oe},ie},ce=function(B,re){return re=typeof re=="boolean"&&re,ve[B]=oe,re&&pe(B+" 0 obj"),B},Te=m.__private__.newAdditionalObject=function(){var B={objId:ss(),content:""};return Ee.push(B),B},be=ss(),Se=ss(),Pe=m.__private__.decodeColorString=function(B){var re=B.split(" ");if(re.length!==2||re[1]!=="g"&&re[1]!=="G")re.length!==5||re[4]!=="k"&&re[4]!=="K"||(re=[(1-re[0])*(1-re[3]),(1-re[1])*(1-re[3]),(1-re[2])*(1-re[3]),"r"]);else{var Ae=parseFloat(re[0]);re=[Ae,Ae,Ae,"r"]}for(var Me="#",Ge=0;Ge<3;Ge++)Me+=("0"+Math.floor(255*parseFloat(re[Ge])).toString(16)).slice(-2);return Me},Ie=m.__private__.encodeColorString=function(B){var re;typeof B=="string"&&(B={ch1:B});var Ae=B.ch1,Me=B.ch2,Ge=B.ch3,bt=B.ch4,Nt=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ae=="string"&&Ae.charAt(0)!=="#"){var tr=new rz(Ae);if(tr.ok)Ae=tr.toHex();else if(!/^\d*\.?\d*$/.test(Ae))throw new Error('Invalid color "'+Ae+'" passed to jsPDF.encodeColorString.')}if(typeof Ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ae)&&(Ae="#"+Ae[1]+Ae[1]+Ae[2]+Ae[2]+Ae[3]+Ae[3]),typeof Ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ae)){var ar=parseInt(Ae.substr(1),16);Ae=ar>>16&255,Me=ar>>8&255,Ge=255&ar}if(Me===void 0||bt===void 0&&Ae===Me&&Me===Ge)re=typeof Ae=="string"?Ae+" "+Nt[0]:B.precision===2?R(Ae/255)+" "+Nt[0]:F(Ae/255)+" "+Nt[0];else if(bt===void 0||hs(bt)==="object"){if(bt&&!isNaN(bt.a)&&bt.a===0)return["1.","1.","1.",Nt[1]].join(" ");re=typeof Ae=="string"?[Ae,Me,Ge,Nt[1]].join(" "):B.precision===2?[R(Ae/255),R(Me/255),R(Ge/255),Nt[1]].join(" "):[F(Ae/255),F(Me/255),F(Ge/255),Nt[1]].join(" ")}else re=typeof Ae=="string"?[Ae,Me,Ge,bt,Nt[2]].join(" "):B.precision===2?[R(Ae),R(Me),R(Ge),R(bt),Nt[2]].join(" "):[F(Ae),F(Me),F(Ge),F(bt),Nt[2]].join(" ");return re},Xe=m.__private__.getFilters=function(){return a},ft=m.__private__.putStream=function(B){var re=(B=B||{}).data||"",Ae=B.filters||Xe(),Me=B.alreadyAppliedFilters||[],Ge=B.addLength1||!1,bt=re.length,Nt=B.objectId,tr=function(Gs){return Gs};if(d!==null&&Nt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(tr=cn.encryptor(Nt,0));var ar={};Ae===!0&&(Ae=["FlateEncode"]);var Nr=B.additionalKeyValues||[],Mr=(ar=kr.API.processDataByFilters!==void 0?kr.API.processDataByFilters(re,Ae):{data:re,reverseChain:[]}).reverseChain+(Array.isArray(Me)?Me.join(" "):Me.toString());if(ar.data.length!==0&&(Nr.push({key:"Length",value:ar.data.length}),Ge===!0&&Nr.push({key:"Length1",value:bt})),Mr.length!=0)if(Mr.split("/").length-1==1)Nr.push({key:"Filter",value:Mr});else{Nr.push({key:"Filter",value:"["+Mr+"]"});for(var En=0;En<Nr.length;En+=1)if(Nr[En].key==="DecodeParms"){for(var xs=[],Cs=0;Cs<ar.reverseChain.split("/").length-1;Cs+=1)xs.push("null");xs.push(Nr[En].value),Nr[En].value="["+xs.join(" ")+"]"}}pe("<<");for(var Fn=0;Fn<Nr.length;Fn++)pe("/"+Nr[Fn].key+" "+Nr[Fn].value);pe(">>"),ar.data.length!==0&&(pe("stream"),pe(tr(ar.data)),pe("endstream"))},tt=m.__private__.putPage=function(B){var re=B.number,Ae=B.data,Me=B.objId,Ge=B.contentsObjId;ce(Me,!0),pe("<</Type /Page"),pe("/Parent "+B.rootDictionaryObjId+" 0 R"),pe("/Resources "+B.resourceDictionaryObjId+" 0 R"),pe("/MediaBox ["+parseFloat(A(B.mediaBox.bottomLeftX))+" "+parseFloat(A(B.mediaBox.bottomLeftY))+" "+A(B.mediaBox.topRightX)+" "+A(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&pe("/CropBox ["+A(B.cropBox.bottomLeftX)+" "+A(B.cropBox.bottomLeftY)+" "+A(B.cropBox.topRightX)+" "+A(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&pe("/BleedBox ["+A(B.bleedBox.bottomLeftX)+" "+A(B.bleedBox.bottomLeftY)+" "+A(B.bleedBox.topRightX)+" "+A(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&pe("/TrimBox ["+A(B.trimBox.bottomLeftX)+" "+A(B.trimBox.bottomLeftY)+" "+A(B.trimBox.topRightX)+" "+A(B.trimBox.topRightY)+"]"),B.artBox!==null&&pe("/ArtBox ["+A(B.artBox.bottomLeftX)+" "+A(B.artBox.bottomLeftY)+" "+A(B.artBox.topRightX)+" "+A(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&pe("/UserUnit "+B.userUnit),Jr.publish("putPage",{objId:Me,pageContext:hr[re],pageNumber:re,page:Ae}),pe("/Contents "+Ge+" 0 R"),pe(">>"),pe("endobj");var bt=Ae.join(`
`);return M===I&&(bt+=`
Q`),ce(Ge,!0),ft({data:bt,filters:Xe(),objectId:Ge}),pe("endobj"),Me},et=m.__private__.putPages=function(){var B,re,Ae=[];for(B=1;B<=Yr;B++)hr[B].objId=ss(),hr[B].contentsObjId=ss();for(B=1;B<=Yr;B++)Ae.push(tt({number:B,data:Oe[B],objId:hr[B].objId,contentsObjId:hr[B].contentsObjId,mediaBox:hr[B].mediaBox,cropBox:hr[B].cropBox,bleedBox:hr[B].bleedBox,trimBox:hr[B].trimBox,artBox:hr[B].artBox,userUnit:hr[B].userUnit,rootDictionaryObjId:be,resourceDictionaryObjId:Se}));ce(be,!0),pe("<</Type /Pages");var Me="/Kids [";for(re=0;re<Yr;re++)Me+=Ae[re]+" 0 R ";pe(Me+"]"),pe("/Count "+Yr),pe(">>"),pe("endobj"),Jr.publish("postPutPages")},at=function(B){Jr.publish("putFont",{font:B,out:pe,newObject:Ln,putStream:ft}),B.isAlreadyPutted!==!0&&(B.objectNumber=Ln(),pe("<<"),pe("/Type /Font"),pe("/BaseFont /"+Nm(B.postScriptName)),pe("/Subtype /Type1"),typeof B.encoding=="string"&&pe("/Encoding /"+B.encoding),pe("/FirstChar 32"),pe("/LastChar 255"),pe(">>"),pe("endobj"))},Tt=function(B){B.objectNumber=Ln();var re=[];re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Form"}),re.push({key:"BBox",value:"["+[A(B.x),A(B.y),A(B.x+B.width),A(B.y+B.height)].join(" ")+"]"}),re.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var Ae=B.pages[1].join(`
`);ft({data:Ae,additionalKeyValues:re,objectId:B.objectNumber}),pe("endobj")},Ut=function(B,re){re||(re=21);var Ae=Ln(),Me=(function(Nt,tr){var ar,Nr=[],Mr=1/(tr-1);for(ar=0;ar<1;ar+=Mr)Nr.push(ar);if(Nr.push(1),Nt[0].offset!=0){var En={offset:0,color:Nt[0].color};Nt.unshift(En)}if(Nt[Nt.length-1].offset!=1){var xs={offset:1,color:Nt[Nt.length-1].color};Nt.push(xs)}for(var Cs="",Fn=0,Gs=0;Gs<Nr.length;Gs++){for(ar=Nr[Gs];ar>Nt[Fn+1].offset;)Fn++;var es=Nt[Fn].offset,xi=(ar-es)/(Nt[Fn+1].offset-es),dl=Nt[Fn].color,Fl=Nt[Fn+1].color;Cs+=J(Math.round((1-xi)*dl[0]+xi*Fl[0]).toString(16))+J(Math.round((1-xi)*dl[1]+xi*Fl[1]).toString(16))+J(Math.round((1-xi)*dl[2]+xi*Fl[2]).toString(16))}return Cs.trim()})(B.colors,re),Ge=[];Ge.push({key:"FunctionType",value:"0"}),Ge.push({key:"Domain",value:"[0.0 1.0]"}),Ge.push({key:"Size",value:"["+re+"]"}),Ge.push({key:"BitsPerSample",value:"8"}),Ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ft({data:Me,additionalKeyValues:Ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ae}),pe("endobj"),B.objectNumber=Ln(),pe("<< /ShadingType "+B.type),pe("/ColorSpace /DeviceRGB");var bt="/Coords ["+A(parseFloat(B.coords[0]))+" "+A(parseFloat(B.coords[1]))+" ";B.type===2?bt+=A(parseFloat(B.coords[2]))+" "+A(parseFloat(B.coords[3])):bt+=A(parseFloat(B.coords[2]))+" "+A(parseFloat(B.coords[3]))+" "+A(parseFloat(B.coords[4]))+" "+A(parseFloat(B.coords[5])),pe(bt+="]"),B.matrix&&pe("/Matrix ["+B.matrix.toString()+"]"),pe("/Function "+Ae+" 0 R"),pe("/Extend [true true]"),pe(">>"),pe("endobj")},Gt=function(B,re){var Ae=ss(),Me=Ln();re.push({resourcesOid:Ae,objectOid:Me}),B.objectNumber=Me;var Ge=[];Ge.push({key:"Type",value:"/Pattern"}),Ge.push({key:"PatternType",value:"1"}),Ge.push({key:"PaintType",value:"1"}),Ge.push({key:"TilingType",value:"1"}),Ge.push({key:"BBox",value:"["+B.boundingBox.map(A).join(" ")+"]"}),Ge.push({key:"XStep",value:A(B.xStep)}),Ge.push({key:"YStep",value:A(B.yStep)}),Ge.push({key:"Resources",value:Ae+" 0 R"}),B.matrix&&Ge.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),ft({data:B.stream,additionalKeyValues:Ge,objectId:B.objectNumber}),pe("endobj")},Ot=function(B){for(var re in B.objectNumber=Ln(),pe("<<"),B)switch(re){case"opacity":pe("/ca "+R(B[re]));break;case"stroke-opacity":pe("/CA "+R(B[re]))}pe(">>"),pe("endobj")},Pt=function(B){ce(B.resourcesOid,!0),pe("<<"),pe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var re in pe("/Font <<"),At)At.hasOwnProperty(re)&&(p===!1||p===!0&&g.hasOwnProperty(re))&&pe("/"+re+" "+At[re].objectNumber+" 0 R");pe(">>")})(),(function(){if(Object.keys(rr).length>0){for(var re in pe("/Shading <<"),rr)rr.hasOwnProperty(re)&&rr[re]instanceof A0&&rr[re].objectNumber>=0&&pe("/"+re+" "+rr[re].objectNumber+" 0 R");Jr.publish("putShadingPatternDict"),pe(">>")}})(),(function(re){if(Object.keys(rr).length>0){for(var Ae in pe("/Pattern <<"),rr)rr.hasOwnProperty(Ae)&&rr[Ae]instanceof m.TilingPattern&&rr[Ae].objectNumber>=0&&rr[Ae].objectNumber<re&&pe("/"+Ae+" "+rr[Ae].objectNumber+" 0 R");Jr.publish("putTilingPatternDict"),pe(">>")}})(B.objectOid),(function(){if(Object.keys(Cr).length>0){var re;for(re in pe("/ExtGState <<"),Cr)Cr.hasOwnProperty(re)&&Cr[re].objectNumber>=0&&pe("/"+re+" "+Cr[re].objectNumber+" 0 R");Jr.publish("putGStateDict"),pe(">>")}})(),(function(){for(var re in pe("/XObject <<"),ms)ms.hasOwnProperty(re)&&ms[re].objectNumber>=0&&pe("/"+re+" "+ms[re].objectNumber+" 0 R");Jr.publish("putXobjectDict"),pe(">>")})(),pe(">>"),pe("endobj")},Ar=function(B){Vt[B.fontName]=Vt[B.fontName]||{},Vt[B.fontName][B.fontStyle]=B.id},Xr=function(B,re,Ae,Me,Ge){var bt={id:"F"+(Object.keys(At).length+1).toString(10),postScriptName:B,fontName:re,fontStyle:Ae,encoding:Me,isStandardFont:Ge||!1,metadata:{}};return Jr.publish("addFont",{font:bt,instance:this}),At[bt.id]=bt,Ar(bt),bt.id},Ur=m.__private__.pdfEscape=m.pdfEscape=function(B,re){return(function(Ae,Me){var Ge,bt,Nt,tr,ar,Nr,Mr,En,xs;if(Nt=(Me=Me||{}).sourceEncoding||"Unicode",ar=Me.outputEncoding,(Me.autoencode||ar)&&At[We].metadata&&At[We].metadata[Nt]&&At[We].metadata[Nt].encoding&&(tr=At[We].metadata[Nt].encoding,!ar&&At[We].encoding&&(ar=At[We].encoding),!ar&&tr.codePages&&(ar=tr.codePages[0]),typeof ar=="string"&&(ar=tr[ar]),ar)){for(Mr=!1,Nr=[],Ge=0,bt=Ae.length;Ge<bt;Ge++)(En=ar[Ae.charCodeAt(Ge)])?Nr.push(String.fromCharCode(En)):Nr.push(Ae[Ge]),Nr[Ge].charCodeAt(0)>>8&&(Mr=!0);Ae=Nr.join("")}for(Ge=Ae.length;Mr===void 0&&Ge!==0;)Ae.charCodeAt(Ge-1)>>8&&(Mr=!0),Ge--;if(!Mr)return Ae;for(Nr=Me.noBOM?[]:[254,255],Ge=0,bt=Ae.length;Ge<bt;Ge++){if((xs=(En=Ae.charCodeAt(Ge))>>8)>>8)throw new Error("Character at position "+Ge+" of string '"+Ae+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Nr.push(xs),Nr.push(En-(xs<<8))}return String.fromCharCode.apply(void 0,Nr)})(B,re).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},kn=m.__private__.beginPage=function(B){Oe[++Yr]=[],hr[Yr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},Qi(Yr),Re(Oe[U])},Aa=function(B,re){var Ae,Me,Ge;switch(r=re||r,typeof B=="string"&&(Ae=S(B.toLowerCase()),Array.isArray(Ae)&&(Me=Ae[0],Ge=Ae[1])),Array.isArray(B)&&(Me=B[0]*lt,Ge=B[1]*lt),isNaN(Me)&&(Me=s[0],Ge=s[1]),(Me>14400||Ge>14400)&&(Ns.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Me=Math.min(14400,Me),Ge=Math.min(14400,Ge)),s=[Me,Ge],r.substr(0,1)){case"l":Ge>Me&&(s=[Ge,Me]);break;case"p":Me>Ge&&(s=[Ge,Me])}kn(s),go(Ya),pe(cl),Zn!==0&&pe(Zn+" J"),md!==0&&pe(md+" j"),Jr.publish("addPage",{pageNumber:Yr})},Na=function(B){B>0&&B<=Yr&&(Oe.splice(B,1),hr.splice(B,1),Yr--,U>Yr&&(U=Yr),this.setPage(U))},Qi=function(B){B>0&&B<=Yr&&(U=B)},Fe=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Oe.length-1},zt=function(B,re,Ae){var Me,Ge=void 0;return Ae=Ae||{},B=B!==void 0?B:At[We].fontName,re=re!==void 0?re:At[We].fontStyle,Me=B.toLowerCase(),Vt[Me]!==void 0&&Vt[Me][re]!==void 0?Ge=Vt[Me][re]:Vt[B]!==void 0&&Vt[B][re]!==void 0?Ge=Vt[B][re]:Ae.disableWarning===!1&&Ns.warn("Unable to look up font label for font '"+B+"', '"+re+"'. Refer to getFontList() for available fonts."),Ge||Ae.noFallback||(Ge=Vt.times[re])==null&&(Ge=Vt.times.normal),Ge},Qt=m.__private__.putInfo=function(){var B=Ln(),re=function(Me){return Me};for(var Ae in d!==null&&(re=cn.encryptor(B,0)),pe("<<"),pe("/Producer ("+Ur(re("jsPDF "+kr.version))+")"),je)je.hasOwnProperty(Ae)&&je[Ae]&&pe("/"+Ae.substr(0,1).toUpperCase()+Ae.substr(1)+" ("+Ur(re(je[Ae]))+")");pe("/CreationDate ("+Ur(re(fe))+")"),pe(">>"),pe("endobj")},nr=m.__private__.putCatalog=function(B){var re=(B=B||{}).rootDictionaryObjId||be;switch(Ln(),pe("<<"),pe("/Type /Catalog"),pe("/Pages "+re+" 0 R"),He||(He="fullwidth"),He){case"fullwidth":pe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":pe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":pe("/OpenAction [3 0 R /Fit]");break;case"original":pe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ae=""+He;Ae.substr(Ae.length-1)==="%"&&(He=parseInt(He)/100),typeof He=="number"&&pe("/OpenAction [3 0 R /XYZ null null "+R(He)+"]")}switch(Ye||(Ye="continuous"),Ye){case"continuous":pe("/PageLayout /OneColumn");break;case"single":pe("/PageLayout /SinglePage");break;case"two":case"twoleft":pe("/PageLayout /TwoColumnLeft");break;case"tworight":pe("/PageLayout /TwoColumnRight")}Et&&pe("/PageMode /"+Et),Jr.publish("putCatalog"),pe(">>"),pe("endobj")},gr=m.__private__.putTrailer=function(){pe("trailer"),pe("<<"),pe("/Size "+(ie+1)),pe("/Root "+ie+" 0 R"),pe("/Info "+(ie-1)+" 0 R"),d!==null&&pe("/Encrypt "+cn.oid+" 0 R"),pe("/ID [ <"+xe+"> <"+xe+"> ]"),pe(">>")},sn=m.__private__.putHeader=function(){pe("%PDF-"+y),pe("%")},Es=m.__private__.putXRef=function(){var B="0000000000";pe("xref"),pe("0 "+(ie+1)),pe("0000000000 65535 f ");for(var re=1;re<=ie;re++)typeof ve[re]=="function"?pe((B+ve[re]()).slice(-10)+" 00000 n "):ve[re]!==void 0?pe((B+ve[re]).slice(-10)+" 00000 n "):pe("0000000000 00000 n ")},Vn=m.__private__.buildDocument=function(){var B;ie=0,oe=0,ke=[],ve=[],Ee=[],be=ss(),Se=ss(),Re(ke),Jr.publish("buildDocument"),sn(),et(),(function(){Jr.publish("putAdditionalObjects");for(var Ae=0;Ae<Ee.length;Ae++){var Me=Ee[Ae];ce(Me.objId,!0),pe(Me.content),pe("endobj")}Jr.publish("postPutAdditionalObjects")})(),B=[],(function(){for(var Ae in At)At.hasOwnProperty(Ae)&&(p===!1||p===!0&&g.hasOwnProperty(Ae))&&at(At[Ae])})(),(function(){var Ae;for(Ae in Cr)Cr.hasOwnProperty(Ae)&&Ot(Cr[Ae])})(),(function(){for(var Ae in ms)ms.hasOwnProperty(Ae)&&Tt(ms[Ae])})(),(function(Ae){var Me;for(Me in rr)rr.hasOwnProperty(Me)&&(rr[Me]instanceof A0?Ut(rr[Me]):rr[Me]instanceof Lm&&Gt(rr[Me],Ae))})(B),Jr.publish("putResources"),B.forEach(Pt),Pt({resourcesOid:Se,objectOid:Number.MAX_SAFE_INTEGER}),Jr.publish("postPutResources"),d!==null&&(cn.oid=Ln(),pe("<<"),pe("/Filter /Standard"),pe("/V "+cn.v),pe("/R "+cn.r),pe("/U <"+cn.toHexString(cn.U)+">"),pe("/O <"+cn.toHexString(cn.O)+">"),pe("/P "+cn.P),pe(">>"),pe("endobj")),Qt(),nr();var re=oe;return Es(),gr(),pe("startxref"),pe(""+re),pe("%%EOF"),Re(Oe[U]),ke.join(`
`)},Sn=m.__private__.getBlob=function(B){return new Blob([ze(B)],{type:"application/pdf"})},jn=m.output=m.__private__.output=(ln=function(B,re){switch(typeof(re=re||{})=="string"?re={filename:re}:re.filename=re.filename||"generated.pdf",B){case void 0:return Vn();case"save":m.save(re.filename);break;case"arraybuffer":return ze(Vn());case"blob":return Sn(Vn());case"bloburi":case"bloburl":if(Gr.URL!==void 0&&typeof Gr.URL.createObjectURL=="function")return Gr.URL&&Gr.URL.createObjectURL(Sn(Vn()))||void 0;Ns.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ae="",Me=Vn();try{Ae=GI(Me)}catch{Ae=GI(unescape(encodeURIComponent(Me)))}return"data:application/pdf;filename="+re.filename+";base64,"+Ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Gr)==="[object Window]"){var Ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",bt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';re.pdfObjectUrl&&(Ge=re.pdfObjectUrl,bt="");var Nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ge+'"'+bt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(re)+");<\/script></body></html>",tr=Gr.open();return tr!==null&&tr.document.write(Nt),tr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Gr)==="[object Window]"){var ar='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(re.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+re.filename+'" width="500px" height="400px" /></body></html>',Nr=Gr.open();if(Nr!==null){Nr.document.write(ar);var Mr=this;Nr.document.documentElement.querySelector("#pdfViewer").onload=function(){Nr.document.title=re.filename,Nr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Mr.output("bloburl"))}}return Nr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Gr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var En='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",re)+'"></iframe></body></html>',xs=Gr.open();if(xs!==null&&(xs.document.write(En),xs.document.title=re.filename),xs||typeof safari>"u")return xs;break;case"datauri":case"dataurl":return Gr.document.location.href=this.output("datauristring",re);default:return null}},ln.foo=function(){try{return ln.apply(this,arguments)}catch(Ae){var B=Ae.stack||"";~B.indexOf(" at ")&&(B=B.split(" at ")[1]);var re="Error in function "+B.split(`
`)[0].split("<")[0]+": "+Ae.message;if(!Gr.console)throw new Error(re);Gr.console.error(re,Ae),Gr.alert&&alert(re)}},ln.foo.bar=ln,ln.foo),Hs=function(B){return Array.isArray(ha)===!0&&ha.indexOf(B)>-1};switch(n){case"pt":lt=1;break;case"mm":lt=72/25.4;break;case"cm":lt=72/2.54;break;case"in":lt=72;break;case"px":lt=Hs("px_scaling")==1?.75:96/72;break;case"pc":case"em":lt=12;break;case"ex":lt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);lt=n}var cn=null;G(),ae();var Ps=m.__private__.getPageInfo=m.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:hr[B].objId,pageNumber:B,pageContext:hr[B]}},Ta=m.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var re in hr)if(hr[re].objId===B)break;return Ps(re)},Ko=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:hr[U].objId,pageNumber:U,pageContext:hr[U]}};m.addPage=function(){return Aa.apply(this,arguments),this},m.setPage=function(){return Qi.apply(this,arguments),Re.call(this,Oe[U]),this},m.insertPage=function(B){return this.addPage(),this.movePage(U,B),this},m.movePage=function(B,re){var Ae,Me;if(B>re){Ae=Oe[B],Me=hr[B];for(var Ge=B;Ge>re;Ge--)Oe[Ge]=Oe[Ge-1],hr[Ge]=hr[Ge-1];Oe[re]=Ae,hr[re]=Me,this.setPage(re)}else if(B<re){Ae=Oe[B],Me=hr[B];for(var bt=B;bt<re;bt++)Oe[bt]=Oe[bt+1],hr[bt]=hr[bt+1];Oe[re]=Ae,hr[re]=Me,this.setPage(re)}return this},m.deletePage=function(){return Na.apply(this,arguments),this},m.__private__.text=m.text=function(B,re,Ae,Me,Ge){var bt,Nt,tr,ar,Nr,Mr,En,xs,Cs,Fn=(Me=Me||{}).scope||this;if(typeof B=="number"&&typeof re=="number"&&(typeof Ae=="string"||Array.isArray(Ae))){var Gs=Ae;Ae=re,re=B,B=Gs}if(arguments[3]instanceof vr==0?(tr=arguments[4],ar=arguments[5],hs(En=arguments[3])==="object"&&En!==null||(typeof tr=="string"&&(ar=tr,tr=null),typeof En=="string"&&(ar=En,En=null),typeof En=="number"&&(tr=En,En=null),Me={flags:En,angle:tr,align:ar})):(E("The transform parameter of text() with a Matrix value"),Cs=Ge),isNaN(re)||isNaN(Ae)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return Fn;var es,xi="",dl=typeof Me.lineHeightFactor=="number"?Me.lineHeightFactor:pa,Fl=Fn.internal.scaleFactor;function gd(ys){return ys=ys.split("	").join(Array(Me.TabLen||9).join(" ")),Ur(ys,En)}function zc(ys){for(var vs,ai=ys.concat(),oi=[],Fi=ai.length;Fi--;)typeof(vs=ai.shift())=="string"?oi.push(vs):Array.isArray(ys)&&(vs.length===1||vs[1]===void 0&&vs[2]===void 0)?oi.push(vs[0]):oi.push([vs[0],vs[1],vs[2]]);return oi}function ii(ys,vs){var ai;if(typeof ys=="string")ai=vs(ys)[0];else if(Array.isArray(ys)){for(var oi,Fi,dc=ys.concat(),Ol=[],_h=dc.length;_h--;)typeof(oi=dc.shift())=="string"?Ol.push(vs(oi)[0]):Array.isArray(oi)&&typeof oi[0]=="string"&&(Fi=vs(oi[0],oi[1],oi[2]),Ol.push([Fi[0],Fi[1],Fi[2]]));ai=Ol}return ai}var yo=!1,Su=!0;if(typeof B=="string")yo=!0;else if(Array.isArray(B)){var Xa=B.concat();Nt=[];for(var k,q=Xa.length;q--;)(typeof(k=Xa.shift())!="string"||Array.isArray(k)&&typeof k[0]!="string")&&(Su=!1);yo=Su}if(yo===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var ee=Be/Fn.internal.scaleFactor,ye=ee*(dl-1);switch(Me.baseline){case"bottom":Ae-=ye;break;case"top":Ae+=ee-ye;break;case"hanging":Ae+=ee-2*ye;break;case"middle":Ae+=ee/2-ye}if((Mr=Me.maxWidth||0)>0&&(typeof B=="string"?B=Fn.splitTextToSize(B,Mr):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(ys,vs){return ys.concat(Fn.splitTextToSize(vs,Mr))},[]))),bt={text:B,x:re,y:Ae,options:Me,mutex:{pdfEscape:Ur,activeFontKey:We,fonts:At,activeFontSize:Be}},Jr.publish("preProcessText",bt),B=bt.text,tr=(Me=bt.options).angle,Cs instanceof vr==0&&tr&&typeof tr=="number"){tr*=Math.PI/180,Me.rotationDirection===0&&(tr=-tr),M===I&&(tr=-tr);var Je=Math.cos(tr),gt=Math.sin(tr);Cs=new vr(Je,gt,-gt,Je,0,0)}else tr&&tr instanceof vr&&(Cs=tr);M!==I||Cs||(Cs=Ri),(Nr=Me.charSpace||xo)!==void 0&&(xi+=A(V(Nr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(xs=Me.horizontalScale)!==void 0&&(xi+=A(100*xs)+` Tz
`),Me.lang;var Dt=-1,On=Me.renderingMode!==void 0?Me.renderingMode:Me.stroke,Rs=Fn.internal.getCurrentPageInfo().pageContext;switch(On){case 0:case!1:case"fill":Dt=0;break;case 1:case!0:case"stroke":Dt=1;break;case 2:case"fillThenStroke":Dt=2;break;case 3:case"invisible":Dt=3;break;case 4:case"fillAndAddForClipping":Dt=4;break;case 5:case"strokeAndAddPathForClipping":Dt=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Dt=6;break;case 7:case"addToPathForClipping":Dt=7}var dn=Rs.usedRenderingMode!==void 0?Rs.usedRenderingMode:-1;Dt!==-1?xi+=Dt+` Tr
`:dn!==-1&&(xi+=`0 Tr
`),Dt!==-1&&(Rs.usedRenderingMode=Dt),ar=Me.align||"left";var gn,Un=Be*dl,Pa=Fn.internal.pageSize.getWidth(),xa=At[We];Nr=Me.charSpace||xo,Mr=Me.maxWidth||0,En=Object.assign({autoencode:!0,noBOM:!0},Me.flags);var vo=[],Dl=function(ys){return Fn.getStringUnitWidth(ys,{font:xa,charSpace:Nr,fontSize:Be,doKerning:!1})*Be/Fl};if(Object.prototype.toString.call(B)==="[object Array]"){var Qa;Nt=zc(B),ar!=="left"&&(gn=Nt.map(Dl));var Ja,Eu=0;if(ar==="right"){re-=gn[0],B=[],q=Nt.length;for(var Za=0;Za<q;Za++)Za===0?(Ja=Ws(re),Qa=Rl(Ae)):(Ja=V(Eu-gn[Za]),Qa=-Un),B.push([Nt[Za],Ja,Qa]),Eu=gn[Za]}else if(ar==="center"){re-=gn[0]/2,B=[],q=Nt.length;for(var Cu=0;Cu<q;Cu++)Cu===0?(Ja=Ws(re),Qa=Rl(Ae)):(Ja=V((Eu-gn[Cu])/2),Qa=-Un),B.push([Nt[Cu],Ja,Qa]),Eu=gn[Cu]}else if(ar==="left"){B=[],q=Nt.length;for(var Kf=0;Kf<q;Kf++)B.push(Nt[Kf])}else if(ar==="justify"&&xa.encoding==="Identity-H"){B=[],q=Nt.length,Mr=Mr!==0?Mr:Pa;for(var Au=0,Ks=0;Ks<q;Ks++)if(Qa=Ks===0?Rl(Ae):-Un,Ja=Ks===0?Ws(re):Au,Ks<q-1){var Op=V((Mr-gn[Ks])/(Nt[Ks].split(" ").length-1)),wo=Nt[Ks].split(" ");B.push([wo[0]+" ",Ja,Qa]),Au=0;for(var _o=1;_o<wo.length;_o++){var yh=(Dl(wo[_o-1]+" "+wo[_o])-Dl(wo[_o]))*Fl+Op;_o==wo.length-1?B.push([wo[_o],yh,0]):B.push([wo[_o]+" ",yh,0]),Au-=yh}}else B.push([Nt[Ks],Ja,Qa]);B.push(["",Au,0])}else{if(ar!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],q=Nt.length,Mr=Mr!==0?Mr:Pa,Ks=0;Ks<q;Ks++)Qa=Ks===0?Rl(Ae):-Un,Ja=Ks===0?Ws(re):0,Ks<q-1?vo.push(A(V((Mr-gn[Ks])/(Nt[Ks].split(" ").length-1)))):vo.push(0),B.push([Nt[Ks],Ja,Qa])}}(typeof Me.R2L=="boolean"?Me.R2L:Ct)===!0&&(B=ii(B,function(ys,vs,ai){return[ys.split("").reverse().join(""),vs,ai]})),bt={text:B,x:re,y:Ae,options:Me,mutex:{pdfEscape:Ur,activeFontKey:We,fonts:At,activeFontSize:Be}},Jr.publish("postProcessText",bt),B=bt.text,es=bt.mutex.isHex||!1;var Nu=At[We].encoding;Nu!=="WinAnsiEncoding"&&Nu!=="StandardEncoding"||(B=ii(B,function(ys,vs,ai){return[gd(ys),vs,ai]})),Nt=zc(B),B=[];for(var vh,xd,$c,qc=Array.isArray(Nt[0])?1:0,cc="",wh=function(ys,vs,ai){var oi="";return ai instanceof vr?(ai=typeof Me.angle=="number"?Nn(ai,new vr(1,0,0,1,ys,vs)):Nn(new vr(1,0,0,1,ys,vs),ai),M===I&&(ai=Nn(new vr(1,0,0,-1,0,0),ai)),oi=ai.join(" ")+` Tm
`):oi=A(ys)+" "+A(vs)+` Td
`,oi},bo=0;bo<Nt.length;bo++){switch(cc="",qc){case 1:$c=(es?"<":"(")+Nt[bo][0]+(es?">":")"),vh=parseFloat(Nt[bo][1]),xd=parseFloat(Nt[bo][2]);break;case 0:$c=(es?"<":"(")+Nt[bo]+(es?">":")"),vh=Ws(re),xd=Rl(Ae)}vo!==void 0&&vo[bo]!==void 0&&(cc=vo[bo]+` Tw
`),bo===0?B.push(cc+wh(vh,xd,Cs)+$c):qc===0?B.push(cc+$c):qc===1&&B.push(cc+wh(vh,xd,Cs)+$c)}B=qc===0?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var uc=`BT
/`;return uc+=We+" "+Be+` Tf
`,uc+=A(Be*dl)+` TL
`,uc+=ma+`
`,uc+=xi,uc+=B,pe(uc+="ET"),g[We]=!0,Fn};var Yo=m.__private__.clip=m.clip=function(B){return pe(B==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Yo("evenodd")},m.__private__.discardPath=m.discardPath=function(){return pe("n"),this};var un=m.__private__.isValidStyle=function(B){var re=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&(re=!0),re};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(B){return un(B)&&(c=B),this};var Il=m.__private__.getStyle=m.getStyle=function(B){var re=c;switch(B){case"D":case"S":re="S";break;case"F":re="f";break;case"FD":case"DF":re="B";break;case"f":case"f*":case"B":case"B*":re=B}return re},on=m.close=function(){return pe("h"),this};m.stroke=function(){return pe("S"),this},m.fill=function(B){return Ka("f",B),this},m.fillEvenOdd=function(B){return Ka("f*",B),this},m.fillStroke=function(B){return Ka("B",B),this},m.fillStrokeEvenOdd=function(B){return Ka("B*",B),this};var Ka=function(B,re){hs(re)==="object"?ph(re,B):pe(B)},wu=function(B){B===null||M===I&&B===void 0||(B=Il(B),pe(B))};function _u(B,re,Ae,Me,Ge){var bt=new Lm(re||this.boundingBox,Ae||this.xStep,Me||this.yStep,this.gState,Ge||this.matrix);bt.stream=this.stream;var Nt=B+"$$"+this.cloneIndex+++"$$";return Gn(Nt,bt),bt}var ph=function(B,re){var Ae=Sr[B.key],Me=rr[Ae];if(Me instanceof A0)pe("q"),pe(mh(re)),Me.gState&&m.setGState(Me.gState),pe(B.matrix.toString()+" cm"),pe("/"+Ae+" sh"),pe("Q");else if(Me instanceof Lm){var Ge=new vr(1,0,0,-1,0,Zi());B.matrix&&(Ge=Ge.multiply(B.matrix||Ri),Ae=_u.call(Me,B.key,B.boundingBox,B.xStep,B.yStep,Ge).id),pe("q"),pe("/Pattern cs"),pe("/"+Ae+" scn"),Me.gState&&m.setGState(Me.gState),pe(re),pe("Q")}},mh=function(B){switch(B){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},bu=m.moveTo=function(B,re){return pe(A(V(B))+" "+A(Z(re))+" m"),this},Pl=m.lineTo=function(B,re){return pe(A(V(B))+" "+A(Z(re))+" l"),this},fa=m.curveTo=function(B,re,Ae,Me,Ge,bt){return pe([A(V(B)),A(Z(re)),A(V(Ae)),A(Z(Me)),A(V(Ge)),A(Z(bt)),"c"].join(" ")),this};m.__private__.line=m.line=function(B,re,Ae,Me,Ge){if(isNaN(B)||isNaN(re)||isNaN(Ae)||isNaN(Me)||!un(Ge))throw new Error("Invalid arguments passed to jsPDF.line");return M===T?this.lines([[Ae-B,Me-re]],B,re,[1,1],Ge||"S"):this.lines([[Ae-B,Me-re]],B,re,[1,1]).stroke()},m.__private__.lines=m.lines=function(B,re,Ae,Me,Ge,bt){var Nt,tr,ar,Nr,Mr,En,xs,Cs,Fn,Gs,es,xi;if(typeof B=="number"&&(xi=Ae,Ae=re,re=B,B=xi),Me=Me||[1,1],bt=bt||!1,isNaN(re)||isNaN(Ae)||!Array.isArray(B)||!Array.isArray(Me)||!un(Ge)||typeof bt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(bu(re,Ae),Nt=Me[0],tr=Me[1],Nr=B.length,Gs=re,es=Ae,ar=0;ar<Nr;ar++)(Mr=B[ar]).length===2?(Gs=Mr[0]*Nt+Gs,es=Mr[1]*tr+es,Pl(Gs,es)):(En=Mr[0]*Nt+Gs,xs=Mr[1]*tr+es,Cs=Mr[2]*Nt+Gs,Fn=Mr[3]*tr+es,Gs=Mr[4]*Nt+Gs,es=Mr[5]*tr+es,fa(En,xs,Cs,Fn,Gs,es));return bt&&on(),wu(Ge),this},m.path=function(B){for(var re=0;re<B.length;re++){var Ae=B[re],Me=Ae.c;switch(Ae.op){case"m":bu(Me[0],Me[1]);break;case"l":Pl(Me[0],Me[1]);break;case"c":fa.apply(this,Me);break;case"h":on()}}return this},m.__private__.rect=m.rect=function(B,re,Ae,Me,Ge){if(isNaN(B)||isNaN(re)||isNaN(Ae)||isNaN(Me)||!un(Ge))throw new Error("Invalid arguments passed to jsPDF.rect");return M===T&&(Me=-Me),pe([A(V(B)),A(Z(re)),A(V(Ae)),A(V(Me)),"re"].join(" ")),wu(Ge),this},m.__private__.triangle=m.triangle=function(B,re,Ae,Me,Ge,bt,Nt){if(isNaN(B)||isNaN(re)||isNaN(Ae)||isNaN(Me)||isNaN(Ge)||isNaN(bt)||!un(Nt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ae-B,Me-re],[Ge-Ae,bt-Me],[B-Ge,re-bt]],B,re,[1,1],Nt,!0),this},m.__private__.roundedRect=m.roundedRect=function(B,re,Ae,Me,Ge,bt,Nt){if(isNaN(B)||isNaN(re)||isNaN(Ae)||isNaN(Me)||isNaN(Ge)||isNaN(bt)||!un(Nt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var tr=4/3*(Math.SQRT2-1);return Ge=Math.min(Ge,.5*Ae),bt=Math.min(bt,.5*Me),this.lines([[Ae-2*Ge,0],[Ge*tr,0,Ge,bt-bt*tr,Ge,bt],[0,Me-2*bt],[0,bt*tr,-Ge*tr,bt,-Ge,bt],[2*Ge-Ae,0],[-Ge*tr,0,-Ge,-bt*tr,-Ge,-bt],[0,2*bt-Me],[0,-bt*tr,Ge*tr,-bt,Ge,-bt]],B+Ge,re,[1,1],Nt,!0),this},m.__private__.ellipse=m.ellipse=function(B,re,Ae,Me,Ge){if(isNaN(B)||isNaN(re)||isNaN(Ae)||isNaN(Me)||!un(Ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var bt=4/3*(Math.SQRT2-1)*Ae,Nt=4/3*(Math.SQRT2-1)*Me;return bu(B+Ae,re),fa(B+Ae,re-Nt,B+bt,re-Me,B,re-Me),fa(B-bt,re-Me,B-Ae,re-Nt,B-Ae,re),fa(B-Ae,re+Nt,B-bt,re+Me,B,re+Me),fa(B+bt,re+Me,B+Ae,re+Nt,B+Ae,re),wu(Ge),this},m.__private__.circle=m.circle=function(B,re,Ae,Me){if(isNaN(B)||isNaN(re)||isNaN(Ae)||!un(Me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,re,Ae,Ae,Me)},m.setFont=function(B,re,Ae){return Ae&&(re=L(re,Ae)),We=zt(B,re,{disableWarning:!1}),this};var Li=m.__private__.getFont=m.getFont=function(){return At[zt.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var B,re,Ae={};for(B in Vt)if(Vt.hasOwnProperty(B))for(re in Ae[B]=[],Vt[B])Vt[B].hasOwnProperty(re)&&Ae[B].push(re);return Ae},m.addFont=function(B,re,Ae,Me,Ge){var bt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&bt.indexOf(arguments[3])!==-1?Ge=arguments[3]:arguments[3]&&bt.indexOf(arguments[3])==-1&&(Ae=L(Ae,Me)),Xr.call(this,B,re,Ae,Ge=Ge||"Identity-H")};var pa,Ya=t.lineWidth||.200025,Pr=m.__private__.getLineWidth=m.getLineWidth=function(){return Ya},go=m.__private__.setLineWidth=m.setLineWidth=function(B){return Ya=B,pe(A(V(B))+" w"),this};m.__private__.setLineDash=kr.API.setLineDash=kr.API.setLineDashPattern=function(B,re){if(B=B||[],re=re||0,isNaN(re)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(Ae){return A(V(Ae))}).join(" "),re=A(V(re)),pe("["+B+"] "+re+" d"),this};var ll=m.__private__.getLineHeight=m.getLineHeight=function(){return Be*pa};m.__private__.getLineHeight=m.getLineHeight=function(){return Be*pa};var Gf=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&(pa=B),this},gh=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return pa};Gf(t.lineHeight);var Ws=m.__private__.getHorizontalCoordinate=function(B){return V(B)},Rl=m.__private__.getVerticalCoordinate=function(B){return M===I?B:hr[U].mediaBox.topRightY-hr[U].mediaBox.bottomLeftY-V(B)},xh=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(B){return A(Ws(B))},Ll=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(B){return A(Rl(B))},cl=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Pe(cl)},m.__private__.setStrokeColor=m.setDrawColor=function(B,re,Ae,Me){return cl=Ie({ch1:B,ch2:re,ch3:Ae,ch4:Me,pdfColorType:"draw",precision:2}),pe(cl),this};var ku=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Pe(ku)},m.__private__.setFillColor=m.setFillColor=function(B,re,Ae,Me){return ku=Ie({ch1:B,ch2:re,ch3:Ae,ch4:Me,pdfColorType:"fill",precision:2}),pe(ku),this};var ma=t.textColor||"0 g",Ia=m.__private__.getTextColor=m.getTextColor=function(){return Pe(ma)};m.__private__.setTextColor=m.setTextColor=function(B,re,Ae,Me){return ma=Ie({ch1:B,ch2:re,ch3:Ae,ch4:Me,pdfColorType:"text",precision:3}),this};var xo=t.charSpace,ac=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(xo||0)};m.__private__.setCharSpace=m.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return xo=B,this};var Zn=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(B){var re=m.CapJoinStyles[B];if(re===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zn=re,pe(re+" J"),this};var md=0;m.__private__.setLineJoin=m.setLineJoin=function(B){var re=m.CapJoinStyles[B];if(re===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return md=re,pe(re+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return pe(A(V(B))+" M"),this},m.GState=F5,m.setGState=function(B){(B=typeof B=="string"?Cr[Bn[B]]:jl(null,B)).equals(bn)||(pe("/"+B.id+" gs"),bn=B)};var jl=function(B,re){if(!B||!Bn[B]){var Ae=!1;for(var Me in Cr)if(Cr.hasOwnProperty(Me)&&Cr[Me].equals(re)){Ae=!0;break}if(Ae)re=Cr[Me];else{var Ge="GS"+(Object.keys(Cr).length+1).toString(10);Cr[Ge]=re,re.id=Ge}return B&&(Bn[B]=re.id),Jr.publish("addGState",re),re}};m.addGState=function(B,re){return jl(B,re),this},m.saveGraphicsState=function(){return pe("q"),Or.push({key:We,size:Be,color:ma}),this},m.restoreGraphicsState=function(){pe("Q");var B=Or.pop();return We=B.key,Be=B.size,ma=B.color,bn=null,this},m.setCurrentTransformationMatrix=function(B){return pe(B.toString()+" cm"),this},m.comment=function(B){return pe("#"+B),this};var Xo=function(B,re){var Ae=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ae},set:function(bt){isNaN(bt)||(Ae=parseFloat(bt))}});var Me=re||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Me},set:function(bt){isNaN(bt)||(Me=parseFloat(bt))}});var Ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ge},set:function(bt){Ge=bt.toString()}}),this},oc=function(B,re,Ae,Me){Xo.call(this,B,re),this.type="rect";var Ge=Ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ge},set:function(Nt){isNaN(Nt)||(Ge=parseFloat(Nt))}});var bt=Me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return bt},set:function(Nt){isNaN(Nt)||(bt=parseFloat(Nt))}}),this},lc=function(){this.page=Yr,this.currentPage=U,this.pages=Oe.slice(0),this.pagesContext=hr.slice(0),this.x=yt,this.y=$t,this.matrix=Xt,this.width=Ji(U),this.height=Zi(U),this.outputDestination=we,this.id="",this.objectNumber=-1};lc.prototype.restore=function(){Yr=this.page,U=this.currentPage,hr=this.pagesContext,Oe=this.pages,yt=this.x,$t=this.y,Xt=this.matrix,Uc(U,this.width),ji(U,this.height),we=this.outputDestination};var ga=function(B,re,Ae,Me,Ge){gs.push(new lc),Yr=U=0,Oe=[],yt=B,$t=re,Xt=Ge,kn([Ae,Me])};for(var ul in m.beginFormObject=function(B,re,Ae,Me,Ge){return ga(B,re,Ae,Me,Ge),this},m.endFormObject=function(B){return(function(re){if(Pi[re])gs.pop().restore();else{var Ae=new lc,Me="Xo"+(Object.keys(ms).length+1).toString(10);Ae.id=Me,Pi[re]=Me,ms[Me]=Ae,Jr.publish("addFormObject",Ae),gs.pop().restore()}})(B),this},m.doFormObject=function(B,re){var Ae=ms[Pi[B]];return pe("q"),pe(re.toString()+" cm"),pe("/"+Ae.id+" Do"),pe("Q"),this},m.getFormObject=function(B){var re=ms[Pi[B]];return{x:re.x,y:re.y,width:re.width,height:re.height,matrix:re.matrix}},m.save=function(B,re){return B=B||"generated.pdf",(re=re||{}).returnPromise=re.returnPromise||!1,re.returnPromise===!1?(y0(Sn(Vn()),B),typeof y0.unload=="function"&&Gr.setTimeout&&setTimeout(y0.unload,911),this):new Promise(function(Ae,Me){try{var Ge=y0(Sn(Vn()),B);typeof y0.unload=="function"&&Gr.setTimeout&&setTimeout(y0.unload,911),Ae(Ge)}catch(bt){Me(bt.message)}})},kr.API)kr.API.hasOwnProperty(ul)&&(ul==="events"&&kr.API.events.length?(function(B,re){var Ae,Me,Ge;for(Ge=re.length-1;Ge!==-1;Ge--)Ae=re[Ge][0],Me=re[Ge][1],B.subscribe.apply(B,[Ae].concat(typeof Me=="function"?[Me]:Me))})(Jr,kr.API.events):m[ul]=kr.API[ul]);var Ji=m.getPageWidth=function(B){return(hr[B=B||U].mediaBox.topRightX-hr[B].mediaBox.bottomLeftX)/lt},Uc=m.setPageWidth=function(B,re){hr[B].mediaBox.topRightX=re*lt+hr[B].mediaBox.bottomLeftX},Zi=m.getPageHeight=function(B){return(hr[B=B||U].mediaBox.topRightY-hr[B].mediaBox.bottomLeftY)/lt},ji=m.setPageHeight=function(B,re){hr[B].mediaBox.topRightY=re*lt+hr[B].mediaBox.bottomLeftY};return m.internal={pdfEscape:Ur,getStyle:Il,getFont:Li,getFontSize:ut,getCharSpace:ac,getTextColor:Ia,getLineHeight:ll,getLineHeightFactor:gh,getLineWidth:Pr,write:Ke,getHorizontalCoordinate:Ws,getVerticalCoordinate:Rl,getCoordinateString:xh,getVerticalCoordinateString:Ll,collections:{},newObject:Ln,newAdditionalObject:Te,newObjectDeferred:ss,newObjectDeferredBegin:ce,getFilters:Xe,putStream:ft,events:Jr,scaleFactor:lt,pageSize:{getWidth:function(){return Ji(U)},setWidth:function(B){Uc(U,B)},getHeight:function(){return Zi(U)},setHeight:function(B){ji(U,B)}},encryptionOptions:d,encryption:cn,getEncryptor:function(B){return d!==null?cn.encryptor(B,0):function(re){return re}},output:jn,getNumberOfPages:Fe,pages:Oe,out:pe,f2:R,f3:F,getPageInfo:Ps,getPageInfoByObjId:Ta,getCurrentPageInfo:Ko,getPDFVersion:w,Point:Xo,Rectangle:oc,Matrix:vr,hasHotfix:Hs},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Ji(U)},set:function(B){Uc(U,B)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Zi(U)},set:function(B){ji(U,B)},enumerable:!0,configurable:!0}),(function(B){for(var re=0,Ae=ot.length;re<Ae;re++){var Me=Xr.call(this,B[re][0],B[re][1],B[re][2],ot[re][3],!0);p===!1&&(g[Me]=!0);var Ge=B[re][0].split("-");Ar({id:Me,fontName:Ge[0],fontStyle:Ge[1]||""})}Jr.publish("addFonts",{fonts:At,dictionary:Vt})}).call(m,ot),We="F1",Aa(s,r),Jr.publish("initialized"),m}Am.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Am.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Am.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Am.prototype.processOwnerPassword=function(t,e){return hk(dk(e).substr(0,5),t)},Am.prototype.encryptor=function(t,e){var r=dk(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return hk(r,n)}},F5.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||hs(t)!==hs(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},kr.API={events:[]},kr.version="3.0.2";var bi=kr.API,B7=1,Dp=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},mm=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},en=function(t){return t.toFixed(2)},Hh=function(t){return t.toFixed(5)};bi.__acroform__={};var Tl=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},QI=function(t){return t*B7},Vu=function(t){var e=new az,r=pr.internal.getHeight(t)||0,n=pr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(en(n)),Number(en(r))],e},cxe=bi.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},uxe=bi.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},dxe=bi.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Ui=bi.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return dxe(t,e-1)},zi=bi.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return cxe(t,e-1)},$i=bi.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return uxe(t,e-1)},hxe=bi.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],i=t[1],a=t[2],o=t[3],l={};return l.lowerLeft_X=r(s)||0,l.lowerLeft_Y=n(i+o)||0,l.upperRight_X=r(s+a)||0,l.upperRight_Y=n(i)||0,[Number(en(l.lowerLeft_X)),Number(en(l.lowerLeft_Y)),Number(en(l.upperRight_X)),Number(en(l.upperRight_Y))]},fxe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=fk(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+en(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=Vu(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},fk=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(R){return R.split(`
`)}):s.map(function(R){return[R]});var i=r,a=pr.internal.getHeight(t)||0;a=a<0?-a:a;var o=pr.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(R,F,V){if(R+1<s.length){var Z=F+" "+s[R+1][0];return Ov(Z,t,V).width<=o-4}return!1};i++;e:for(;i>0;){e="",i--;var c,d,p=Ov("3",t,i).height,g=t.multiline?a-i:(a-p)/2,m=g+=2,y=0,w=0,_=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+Ov(e,t,i=12).width+", FieldWidth:"+o+`
`;break}for(var S="",T=0,I=0;I<s.length;I++)if(s.hasOwnProperty(I)){var M=!1;if(s[I].length!==1&&_!==s[I].length-1){if((p+2)*(T+2)+2>a)continue e;S+=s[I][_],M=!0,w=I,I--}else{S=(S+=s[I][_]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var K=parseInt(I),W=l(K,S,i),L=I>=s.length-1;if(W&&!L){S+=" ",_=0;continue}if(W||L){if(L)w=K;else if(t.multiline&&(p+2)*(T+2)+2>a)continue e}else{if(!t.multiline||(p+2)*(T+2)+2>a)continue e;w=K}}for(var A="",E=y;E<=w;E++){var D=s[E];if(t.multiline){if(E===w){A+=D[_]+" ",_=(_+1)%D.length;continue}if(E===y){A+=D[D.length-1]+" ";continue}}A+=D[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,d=Ov(A,t,i).width,t.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;default:c=2}e+=en(c)+" "+en(m)+` Td
`,e+="("+Dp(A)+`) Tj
`,e+=-en(c)+` 0 Td
`,m=-(i+2),d=0,y=M?w:w+1,T++,S=""}break}return n.text=e,n.fontSize=i,n},Ov=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},pxe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},mxe=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},gxe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(yu.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(pxe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");B7=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new oz,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&mxe(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var a in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],l=[],c=o.Rect;if(o.Rect&&(o.Rect=hxe(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=pr.createDefaultAppearanceStream(o),hs(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=fxe(o);l.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var p="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var m=o.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var a in m)if(m.hasOwnProperty(a)){var y=m[a];typeof y=="function"&&(y=y.call(s,o)),p+="/"+a+" "+y+" ",s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y)}}else typeof(y=m)=="function"&&(y=y.call(s,o)),p+="/"+a+" "+y,s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}i&&(function(w,_){for(var S in w)if(w.hasOwnProperty(S)){var T=S,I=w[S];_.internal.newObjectDeferredBegin(I.objId,!0),hs(I)==="object"&&typeof I.putStream=="function"&&I.putStream(),delete w[T]}})(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},iz=bi.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),hs(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+Dp(n(t[i].toString()))+")"):s+=t[i].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},db=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+Dp(n(t))+")"},Yu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Yu.prototype.toString=function(){return this.objId+" 0 R"},Yu.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Yu.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:iz(s,this.objId,this.scope)}):s instanceof Yu?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var az=function(){Yu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Tl(az,Yu);var oz=function(){Yu.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Dp(r(t))+")"}},set:function(r){t=r}})};Tl(oz,Yu);var yu=function t(){Yu.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');e=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ui(e,3)},set:function(S){S?this.F=zi(e,3):this.F=$i(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');r=S}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(S){n=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(S){n[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(S){n[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(S){n[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(S){n[3]=S}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof D5)return;i="FieldObject"+t.FieldNum++}var S=function(T){return T};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+Dp(S(i))+")"},set:function(S){i=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(S){i=S}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(S){a=S}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(S){o=S}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(S){l=S}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/B7:c},set:function(S){c=S}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(S){d=S}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof D5||this instanceof W0))return db(p,this.objId,this.scope)},set:function(S){S=S.toString(),p=S}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof $a==0?db(g,this.objId,this.scope):g},set:function(S){S=S.toString(),g=this instanceof $a==0?S.substr(0,1)==="("?mm(S.substr(1,S.length-2)):mm(S):S}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof $a==1?mm(g.substr(1,g.length-1)):g},set:function(S){S=S.toString(),g=this instanceof $a==1?"/"+S:S}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof $a==0?db(m,this.objId,this.scope):m},set:function(S){S=S.toString(),m=this instanceof $a==0?S.substr(0,1)==="("?mm(S.substr(1,S.length-2)):mm(S):S}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof $a==1?mm(m.substr(1,m.length-1)):m},set:function(S){S=S.toString(),m=this instanceof $a==1?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(S){S=!!S,w=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(S){y=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,1)},set:function(S){S?this.Ff=zi(this.Ff,1):this.Ff=$i(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,2)},set:function(S){S?this.Ff=zi(this.Ff,2):this.Ff=$i(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,3)},set:function(S){S?this.Ff=zi(this.Ff,3):this.Ff=$i(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');_=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(_){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:_=2;break;case"center":case 1:_=1;break;default:_=0}}})};Tl(yu,Yu);var Zm=function(){yu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return iz(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=(function(i,a,o){o||(o=1);for(var l,c=[];l=a.exec(i);)c.push(l[o]);return c})(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,18)},set:function(r){r?this.Ff=zi(this.Ff,18):this.Ff=$i(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=zi(this.Ff,19):this.Ff=$i(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,20)},set:function(r){r?(this.Ff=zi(this.Ff,20),e.sort()):this.Ff=$i(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,22)},set:function(r){r?this.Ff=zi(this.Ff,22):this.Ff=$i(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,23)},set:function(r){r?this.Ff=zi(this.Ff,23):this.Ff=$i(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,27)},set:function(r){r?this.Ff=zi(this.Ff,27):this.Ff=$i(this.Ff,27)}}),this.hasAppearanceStream=!1};Tl(Zm,yu);var e1=function(){Zm.call(this),this.fontName="helvetica",this.combo=!1};Tl(e1,Zm);var t1=function(){e1.call(this),this.combo=!0};Tl(t1,e1);var kw=function(){t1.call(this),this.edit=!0};Tl(kw,t1);var $a=function(){yu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,15)},set:function(r){r?this.Ff=zi(this.Ff,15):this.Ff=$i(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,16)},set:function(r){r?this.Ff=zi(this.Ff,16):this.Ff=$i(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,17)},set:function(r){r?this.Ff=zi(this.Ff,17):this.Ff=$i(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,26)},set:function(r){r?this.Ff=zi(this.Ff,26):this.Ff=$i(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+Dp(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){hs(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Tl($a,yu);var Sw=function(){$a.call(this),this.pushButton=!0};Tl(Sw,$a);var r1=function(){$a.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Tl(r1,$a);var D5=function(){var t,e;yu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),n)a.push("/"+i+" ("+Dp(s(n[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){hs(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=pr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Tl(D5,yu),r1.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},r1.prototype.createOption=function(t){var e=new D5;return e.Parent=this,e.optionName=t,this.Kids.push(e),xxe.call(this.scope,e),e};var Ew=function(){$a.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=pr.CheckBox.createAppearanceStream()};Tl(Ew,$a);var W0=function(){yu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,13)},set:function(e){e?this.Ff=zi(this.Ff,13):this.Ff=$i(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,21)},set:function(e){e?this.Ff=zi(this.Ff,21):this.Ff=$i(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,23)},set:function(e){e?this.Ff=zi(this.Ff,23):this.Ff=$i(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,24)},set:function(e){e?this.Ff=zi(this.Ff,24):this.Ff=$i(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,25)},set:function(e){e?this.Ff=zi(this.Ff,25):this.Ff=$i(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,26)},set:function(e){e?this.Ff=zi(this.Ff,26):this.Ff=$i(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Tl(W0,yu);var Cw=function(){W0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,14)},set:function(t){t?this.Ff=zi(this.Ff,14):this.Ff=$i(this.Ff,14)}}),this.password=!0};Tl(Cw,W0);var pr={CheckBox:{createAppearanceStream:function(){return{N:{On:pr.CheckBox.YesNormal},D:{On:pr.CheckBox.YesPushDown,Off:pr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Vu(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=fk(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+en(pr.internal.getWidth(t))+" "+en(pr.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+en(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Vu(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],i=pr.internal.getHeight(t),a=pr.internal.getWidth(t),o=fk(t,t.caption);return s.push("1 g"),s.push("0 0 "+en(a)+" "+en(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+en(a-1)+" "+en(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+en(o.fontSize)+" Tf "+n),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=Vu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+en(pr.internal.getWidth(t))+" "+en(pr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:pr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=pr.RadioButton.Circle.YesNormal,e.D[t]=pr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Vu(t);e.scope=t.scope;var r=[],n=pr.internal.getWidth(t)<=pr.internal.getHeight(t)?pr.internal.getWidth(t)/4:pr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=pr.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Hh(pr.internal.getWidth(t)/2)+" "+Hh(pr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Vu(t);e.scope=t.scope;var r=[],n=pr.internal.getWidth(t)<=pr.internal.getHeight(t)?pr.internal.getWidth(t)/4:pr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*pr.internal.Bezier_C).toFixed(5)),a=Number((n*pr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Hh(pr.internal.getWidth(t)/2)+" "+Hh(pr.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Hh(pr.internal.getWidth(t)/2)+" "+Hh(pr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Vu(t);e.scope=t.scope;var r=[],n=pr.internal.getWidth(t)<=pr.internal.getHeight(t)?pr.internal.getWidth(t)/4:pr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*pr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Hh(pr.internal.getWidth(t)/2)+" "+Hh(pr.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:pr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=pr.RadioButton.Cross.YesNormal,e.D[t]=pr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Vu(t);e.scope=t.scope;var r=[],n=pr.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+en(pr.internal.getWidth(t)-2)+" "+en(pr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(en(n.x1.x)+" "+en(n.x1.y)+" m"),r.push(en(n.x2.x)+" "+en(n.x2.y)+" l"),r.push(en(n.x4.x)+" "+en(n.x4.y)+" m"),r.push(en(n.x3.x)+" "+en(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Vu(t);e.scope=t.scope;var r=pr.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+en(pr.internal.getWidth(t))+" "+en(pr.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+en(pr.internal.getWidth(t)-2)+" "+en(pr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(en(r.x1.x)+" "+en(r.x1.y)+" m"),n.push(en(r.x2.x)+" "+en(r.x2.y)+" l"),n.push(en(r.x4.x)+" "+en(r.x4.y)+" m"),n.push(en(r.x3.x)+" "+en(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Vu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+en(pr.internal.getWidth(t))+" "+en(pr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};pr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=pr.internal.getWidth(t),r=pr.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},pr.internal.getWidth=function(t){var e=0;return hs(t)==="object"&&(e=QI(t.Rect[2])),e},pr.internal.getHeight=function(t){var e=0;return hs(t)==="object"&&(e=QI(t.Rect[3])),e};var xxe=bi.addField=function(t){if(gxe(this,t),!(t instanceof yu))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};bi.AcroFormChoiceField=Zm,bi.AcroFormListBox=e1,bi.AcroFormComboBox=t1,bi.AcroFormEditBox=kw,bi.AcroFormButton=$a,bi.AcroFormPushButton=Sw,bi.AcroFormRadioButton=r1,bi.AcroFormCheckBox=Ew,bi.AcroFormTextField=W0,bi.AcroFormPasswordField=Cw,bi.AcroFormAppearance=pr,bi.AcroForm={ChoiceField:Zm,ListBox:e1,ComboBox:t1,EditBox:kw,Button:$a,PushButton:Sw,RadioButton:r1,CheckBox:Ew,TextField:W0,PasswordField:Cw,Appearance:pr},kr.AcroForm={ChoiceField:Zm,ListBox:e1,ComboBox:t1,EditBox:kw,Button:$a,PushButton:Sw,RadioButton:r1,CheckBox:Ew,TextField:W0,PasswordField:Cw,Appearance:pr};kr.AcroForm;function lz(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=t.__addimage__.getImageFileTypeByImageData=function(R,F){var V,Z,fe,xe,he,ae=r;if((F=F||r)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(W(R))for(he in n)for(fe=n[he],V=0;V<fe.length;V+=1){for(xe=!0,Z=0;Z<fe[V].length;Z+=1)if(fe[V][Z]!==void 0&&fe[V][Z]!==R[Z]){xe=!1;break}if(xe===!0){ae=he;break}}else for(he in n)for(fe=n[he],V=0;V<fe.length;V+=1){for(xe=!0,Z=0;Z<fe[V].length;Z+=1)if(fe[V][Z]!==void 0&&fe[V][Z]!==R.charCodeAt(Z)){xe=!1;break}if(xe===!0){ae=he;break}}return ae===r&&F!==r&&(ae=F),ae},i=function R(F){for(var V=this.internal.write,Z=this.internal.putStream,fe=(0,this.internal.getFilters)();fe.indexOf("FlateEncode")!==-1;)fe.splice(fe.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var xe=[];if(xe.push({key:"Type",value:"/XObject"}),xe.push({key:"Subtype",value:"/Image"}),xe.push({key:"Width",value:F.width}),xe.push({key:"Height",value:F.height}),F.colorSpace===S.INDEXED?xe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(xe.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===S.DEVICE_CMYK&&xe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),xe.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&xe.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)){for(var he="",ae=0,H=F.transparency.length;ae<H;ae++)he+=F.transparency[ae]+" "+F.transparency[ae]+" ";xe.push({key:"Mask",value:"["+he+"]"})}F.sMask!==void 0&&xe.push({key:"SMask",value:F.objectId+1+" 0 R"});var te=F.filter!==void 0?["/"+F.filter]:void 0;if(Z({data:F.data,additionalKeyValues:xe,alreadyAppliedFilters:te,objectId:F.objectId}),V("endobj"),"sMask"in F&&F.sMask!==void 0){var G=(F.predictor!=null?"/Predictor "+F.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+F.width,P={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:F.bitsPerComponent,decodeParameters:G,data:F.sMask};"filter"in F&&(P.filter=F.filter),R.call(this,P)}if(F.colorSpace===S.INDEXED){var U=this.internal.newObject();Z({data:A(new Uint8Array(F.palette)),objectId:U}),V("endobj")}},a=function(){var R=this.internal.collections[e+"images"];for(var F in R)i.call(this,R[F])},o=function(){var R,F=this.internal.collections[e+"images"],V=this.internal.write;for(var Z in F)V("/I"+(R=F[Z]).index,R.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var R=this.internal.collections[e+"images"];return l.call(this),R},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},p=function(R){return typeof t["process"+R.toUpperCase()]=="function"},g=function(R){return hs(R)==="object"&&R.nodeType===1},m=function(R,F){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var V=""+R.getAttribute("src");if(V.indexOf("data:image/")===0)return bw(unescape(V).split("base64,").pop());var Z=t.loadFile(V,!0);if(Z!==void 0)return Z}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var fe;switch(F){case"PNG":fe="image/png";break;case"WEBP":fe="image/webp";break;default:fe="image/jpeg"}return bw(R.toDataURL(fe,1).split("base64,").pop())}},y=function(R){var F=this.internal.collections[e+"images"];if(F){for(var V in F)if(R===F[V].alias)return F[V]}},w=function(R,F,V){return R||F||(R=-96,F=-96),R<0&&(R=-1*V.width*72/R/this.internal.scaleFactor),F<0&&(F=-1*V.height*72/F/this.internal.scaleFactor),R===0&&(R=F*V.width/V.height),F===0&&(F=R*V.height/V.width),[R,F]},_=function(R,F,V,Z,fe,xe){var he=w.call(this,V,Z,fe),ae=this.internal.getCoordinateString,H=this.internal.getVerticalCoordinateString,te=c.call(this);if(V=he[0],Z=he[1],te[fe.index]=fe,xe){xe*=Math.PI/180;var G=Math.cos(xe),P=Math.sin(xe),U=function(J){return J.toFixed(4)},X=[U(G),U(P),U(-1*P),U(G),0,0,"cm"]}this.internal.write("q"),xe?(this.internal.write([1,"0","0",1,ae(R),H(F+Z),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([ae(V),"0","0",ae(Z),"0","0","cm"].join(" "))):this.internal.write([ae(V),"0","0",ae(Z),ae(R),H(F+Z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+fe.index+" Do"),this.internal.write("Q")},S=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var T=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},I=t.__addimage__.sHashCode=function(R){var F,V,Z=0;if(typeof R=="string")for(V=R.length,F=0;F<V;F++)Z=(Z<<5)-Z+R.charCodeAt(F),Z|=0;else if(W(R))for(V=R.byteLength/2,F=0;F<V;F++)Z=(Z<<5)-Z+R[F],Z|=0;return Z},M=t.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var F=!0;return R.length===0&&(F=!1),R.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(F=!1),F},K=t.__addimage__.extractImageFromDataUrl=function(R){if(R==null||!(R=R.trim()).startsWith("data:"))return null;var F=R.indexOf(",");return F<0?null:R.substring(0,F).trim().endsWith("base64")?R.substring(F+1):null};t.__addimage__.isArrayBuffer=function(R){return R instanceof ArrayBuffer};var W=t.__addimage__.isArrayBufferView=function(R){return R instanceof Int8Array||R instanceof Uint8Array||R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array},L=t.__addimage__.binaryStringToUint8Array=function(R){for(var F=R.length,V=new Uint8Array(F),Z=0;Z<F;Z++)V[Z]=R.charCodeAt(Z);return V},A=t.__addimage__.arrayBufferToBinaryString=function(R){for(var F="",V=W(R)?R:new Uint8Array(R),Z=0;Z<V.length;Z+=8192)F+=String.fromCharCode.apply(null,V.subarray(Z,Z+8192));return F};t.addImage=function(){var R,F,V,Z,fe,xe,he,ae,H;if(typeof arguments[1]=="number"?(F=r,V=arguments[1],Z=arguments[2],fe=arguments[3],xe=arguments[4],he=arguments[5],ae=arguments[6],H=arguments[7]):(F=arguments[1],V=arguments[2],Z=arguments[3],fe=arguments[4],xe=arguments[5],he=arguments[6],ae=arguments[7],H=arguments[8]),hs(R=arguments[0])==="object"&&!g(R)&&"imageData"in R){var te=R;R=te.imageData,F=te.format||F||r,V=te.x||V||0,Z=te.y||Z||0,fe=te.w||te.width||fe,xe=te.h||te.height||xe,he=te.alias||he,ae=te.compression||ae,H=te.rotation||te.angle||H}var G=this.internal.getFilters();if(ae===void 0&&G.indexOf("FlateEncode")!==-1&&(ae="SLOW"),isNaN(V)||isNaN(Z))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var P=E.call(this,R,F,he,ae);return _.call(this,V,Z,fe,xe,P,H),this};var E=function(R,F,V,Z){var fe,xe,he;if(typeof R=="string"&&s(R)===r){R=unescape(R);var ae=D(R,!1);(ae!==""||(ae=t.loadFile(R,!0))!==void 0)&&(R=ae)}if(g(R)&&(R=m(R,F)),F=s(R,F),!p(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((he=V)==null||he.length===0)&&(V=(function(H){return typeof H=="string"||W(H)?I(H):W(H.data)?I(H.data):null})(R)),(fe=y.call(this,V))||(R instanceof Uint8Array||F==="RGBA"||(xe=R,R=L(R)),fe=this["process"+F.toUpperCase()](R,d.call(this),V,(function(H){return H&&typeof H=="string"&&(H=H.toUpperCase()),H in t.image_compression?H:T.NONE})(Z),xe)),!fe)throw new Error("An unknown error occurred whilst processing the image.");return fe},D=t.__addimage__.convertBase64ToBinaryString=function(R,F){F=typeof F!="boolean"||F;var V,Z="";if(typeof R=="string"){var fe;V=(fe=K(R))!==null&&fe!==void 0?fe:R;try{Z=bw(V)}catch(xe){if(F)throw M(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+xe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Z};t.getImageProperties=function(R){var F,V,Z="";if(g(R)&&(R=m(R)),typeof R=="string"&&s(R)===r&&((Z=D(R,!1))===""&&(Z=t.loadFile(R)||""),R=Z),V=s(R),!p(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(R instanceof Uint8Array||(R=L(R)),!(F=this["process"+V.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=V,F}})(kr.API),(function(t){var e=function(r){if(r!==void 0&&r!="")return!0};kr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,i,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,d=!1,p=0;p<c.length&&!d;p++)switch((n=c[p]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var g=0;g<c.length;g++){n=c[g];var m=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(w.objId),T=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+m(S(n.contents))+")",i+=" /Popup "+_.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+m(S(T))+") >>",w.content=i;var I=w.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+I,n.open&&(i+=" /Open true"),i+=" >>",_.content=i,this.internal.write(w.objId,"0 R",_.objId,"0 R");break;case"freetext":s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var M=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+m(y(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+M+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var K=this.annotations._nameMap[n.options.name];n.options.pageNumber=K.page,n.options.top=K.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+m(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var W=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+W+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,i,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:c(n),w:l(r+s),h:c(n+i)},options:a,type:"link"})},t.textWithLink=function(r,n,s,i){var a,o,l=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var d=this.splitTextToSize(r,o).length;a=Math.ceil(c*d)}else o=l,a=c;return this.text(r,n,s,i),s+=.2*c,i.align==="center"&&(n-=l/2),i.align==="right"&&(n-=l),this.link(n,s-c,o,a,i),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(kr.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},o=t.__arabicParser__.isArabicEndLetter=function(w){return a(w)&&i(w)&&e[w.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(w){return a(w)&&s.indexOf(w.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return a(w)&&i(w)&&e[w.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(w){return a(w)&&i(w)&&e[w.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(w){return a(w)&&i(w)&&e[w.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(w){return a(w)&&i(w)&&e[w.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(w){var _=0,S=r,T="",I=0;for(_=0;_<w.length;_+=1)S[w.charCodeAt(_)]!==void 0?(I++,typeof(S=S[w.charCodeAt(_)])=="number"&&(T+=String.fromCharCode(S),S=r,I=0),_===w.length-1&&(S=r,T+=w.charAt(_-(I-1)),_-=I-1,I=0)):(S=r,T+=w.charAt(_-I),_-=I,I=0);return T};t.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&n[w.charCodeAt(0)]!==void 0};var g=t.__arabicParser__.getCorrectForm=function(w,_,S){return a(w)?i(w)===!1?-1:!c(w)||!a(_)&&!a(S)||!a(S)&&o(_)||o(w)&&!a(_)||o(w)&&l(_)||o(w)&&o(_)?0:d(w)&&a(_)&&!o(_)&&a(S)&&c(S)?3:o(w)||!a(S)?1:2:-1},m=function(w){var _=0,S=0,T=0,I="",M="",K="",W=(w=w||"").split("\\s+"),L=[];for(_=0;_<W.length;_+=1){for(L.push(""),S=0;S<W[_].length;S+=1)I=W[_][S],M=W[_][S-1],K=W[_][S+1],a(I)?(T=g(I,M,K),L[_]+=T!==-1?String.fromCharCode(e[I.charCodeAt(0)][T]):I):L[_]+=I;L[_]=p(L[_])}return L.join(" ")},y=t.__arabicParser__.processArabic=t.processArabic=function(){var w,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(_)){var T=0;for(S=[],T=0;T<_.length;T+=1)Array.isArray(_[T])?S.push([m(_[T][0]),_[T][1],_[T][2]]):S.push([m(_[T])]);w=S}else w=m(_);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};t.events.push(["preProcessText",y])})(kr.API),kr.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(kr.API),(function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(w){y=w}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){n.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),g=c.scaleFactor||this.internal.scaleFactor,m=0,y=0,w=0,_=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var S=c.maxWidth;S>0?typeof l=="string"?l=this.splitTextToSize(l,S):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(I,M){return I.concat(_.splitTextToSize(M,S))},[])):l=Array.isArray(l)?l:[l];for(var T=0;T<l.length;T++)m<(w=this.getStringUnitWidth(l[T],{font:p})*d)&&(m=w);return m!==0&&(y=l.length),{w:m/=g,h:Math.max((y*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/g,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,m&&g&&(this.printHeaderRow(l.lineNumber,!0),l.y+=g[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,d,p,g){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,y,w,_,S=[],T=[],I=[],M={},K={},W=[],L=[],A=(g=g||{}).autoSize||!1,E=g.printHeaders!==!1,D=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,R=g.margins||Object.assign({width:this.getPageWidth()},e),F=typeof g.padding=="number"?g.padding:3,V=g.headerBackgroundColor||"#c8c8c8",Z=g.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=Z,this.setFontSize(D),p==null)T=S=Object.keys(d[0]),I=S.map(function(){return"left"});else if(Array.isArray(p)&&hs(p[0])==="object")for(S=p.map(function(te){return te.name}),T=p.map(function(te){return te.prompt||te.name||""}),I=p.map(function(te){return te.align||"left"}),m=0;m<p.length;m+=1)K[p[m].name]=.7499990551181103*p[m].width;else Array.isArray(p)&&typeof p[0]=="string"&&(T=S=p,I=S.map(function(){return"left"}));if(A||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<S.length;m+=1){for(M[_=S[m]]=d.map(function(te){return te[_]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(T[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=M[_],this.setFont(void 0,"normal"),w=0;w<y.length;w+=1)W.push(this.getTextDimensions(y[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);K[_]=Math.max.apply(null,W)+F+F,W=[]}if(E){var fe={};for(m=0;m<S.length;m+=1)fe[S[m]]={},fe[S[m]].text=T[m],fe[S[m]].align=I[m];var xe=o.call(this,fe,K);L=S.map(function(te){return new i(l,c,K[te],xe,fe[te].text,void 0,fe[te].align)}),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var he=p.reduce(function(te,G){return te[G.name]=G.align,te},{});for(m=0;m<d.length;m+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:m,data:d[m]},this);var ae=o.call(this,d[m],K);for(w=0;w<S.length;w+=1){var H=d[m][S[w]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:m,col:w,data:H},this),a.call(this,new i(l,c,K[S[w]],ae,H,m+2,he[S[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(l).map(function(m){var y=l[m];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,c[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/g+d+d},this).reduce(function(m,y){return Math.max(m,y)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,g.push(d)),d.lineNumber=l;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,d),this.setTextColor(y)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),r=!1}})(kr.API);var cz={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},uz=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],pk=lz(uz),dz=[100,200,300,400,500,600,700,800,900],yxe=lz(dz);function hb(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return cz[i=i||"normal"]?i:"normal"})(t.style),n=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(t.weight),s=(function(i){return typeof pk[i=i||"normal"]=="number"?i:"normal"})(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function JI(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var vxe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},ZI={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function eP(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function tP(t){return t.trimLeft()}function wxe(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function _xe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Mv,rP,nP,gm,Bv,sP,iP,aP,fb=["times"];function oP(t,e,r,n){var s=4,i=cP;switch(n){case kr.API.image_compression.FAST:s=1,i=lP;break;case kr.API.image_compression.MEDIUM:s=6,i=uP;break;case kr.API.image_compression.SLOW:s=9,i=dP}t=(function(o,l,c,d){for(var p,g=o.length/l,m=new Uint8Array(o.length+g),y=[bxe,lP,cP,uP,dP],w=0;w<g;w+=1){var _=w*l,S=o.subarray(_,_+l);if(d)m.set(d(S,c,p),_+w);else{for(var T=y.length,I=[],M=0;M<T;M+=1)I[M]=y[M](S,c,p);var K=Sxe(I.concat());m.set(I[K],_+w)}p=S}return m})(t,e,r,i);var a=ok(t,{level:s});return kr.API.__addimage__.arrayBufferToBinaryString(a)}function bxe(t){var e=Array.apply([],t);return e.unshift(0),e}function lP(t,e){var r=t.length,n=[];n[0]=1;for(var s=0;s<r;s+=1){var i=t[s-e]||0;n[s+1]=t[s]-i+256&255}return n}function cP(t,e,r){var n=t.length,s=[];s[0]=2;for(var i=0;i<n;i+=1){var a=r&&r[i]||0;s[i+1]=t[i]-a+256&255}return s}function uP(t,e,r){var n=t.length,s=[];s[0]=3;for(var i=0;i<n;i+=1){var a=t[i-e]||0,o=r&&r[i]||0;s[i+1]=t[i]+256-(a+o>>>1)&255}return s}function dP(t,e,r){var n=t.length,s=[];s[0]=4;for(var i=0;i<n;i+=1){var a=kxe(t[i-e]||0,r&&r[i]||0,r&&r[i-e]||0);s[i+1]=t[i]-a+256&255}return s}function kxe(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),s=Math.abs(t-r),i=Math.abs(t+e-r-r);return n<=s&&n<=i?t:s<=i?e:r}function Sxe(t){var e=t.map(function(r){return r.reduce(function(n,s){return n+Math.abs(s)},0)});return e.indexOf(Math.min.apply(null,e))}function pb(t,e,r){var n=e*r,s=Math.floor(n/8),i=16-(n-8*s+r),a=(1<<r)-1;return hz(t,s)>>i&a}function hP(t,e,r,n){var s=r*n,i=Math.floor(s/8),a=16-(s-8*i+n),o=(1<<n)-1,l=(e&o)<<a;(function(c,d,p){if(d+1<c.byteLength)c.setUint16(d,p,!1);else{var g=p>>8&255;c.setUint8(d,g)}})(t,i,hz(t,i)&~(o<<a)&65535|l)}function hz(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function Exe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,a=1<<1+(7&s);t[e++],t[e++];var o=null,l=null;i&&(o=e,l=a,e+=3*a);var c=!0,d=[],p=0,g=null,m=0,y=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,y=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=t[e++];p=t[e++]|t[e++]<<8,g=t[e++],1&w||(g=null),m=w>>2&7,e++;break;case 254:for(;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var _=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,T=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,M=t[e++],K=M>>6&1,W=1<<1+(7&M),L=o,A=l,E=!1;M>>7&&(E=!0,L=e,A=W,e+=3*W);var D=e;for(e++;;){var R;if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}d.push({x:_,y:S,width:T,height:I,has_local_palette:E,palette_offset:L,palette_size:A,data_offset:D,data_length:e-D,transparent_index:g,interlaced:!!K,delay:p,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return y},this.frameInfo=function(F){if(F<0||F>=d.length)throw new Error("Frame index out of range.");return d[F]},this.decodeAndBlitFrameBGRA=function(F,V){var Z=this.frameInfo(F),fe=Z.width*Z.height,xe=new Uint8Array(fe);fP(t,Z.data_offset,xe,fe);var he=Z.palette_offset,ae=Z.transparent_index;ae===null&&(ae=256);var H=Z.width,te=r-H,G=H,P=4*(Z.y*r+Z.x),U=4*((Z.y+Z.height)*r+Z.x),X=P,J=4*te;Z.interlaced===!0&&(J+=4*r*7);for(var ie=8,ve=0,ke=xe.length;ve<ke;++ve){var oe=xe[ve];if(G===0&&(G=H,(X+=J)>=U&&(J=4*te+4*r*(ie-1),X=P+(H+te)*(ie<<1),ie>>=1)),oe===ae)X+=4;else{var Ee=t[he+3*oe],Oe=t[he+3*oe+1],ne=t[he+3*oe+2];V[X++]=ne,V[X++]=Oe,V[X++]=Ee,V[X++]=255}--G}},this.decodeAndBlitFrameRGBA=function(F,V){var Z=this.frameInfo(F),fe=Z.width*Z.height,xe=new Uint8Array(fe);fP(t,Z.data_offset,xe,fe);var he=Z.palette_offset,ae=Z.transparent_index;ae===null&&(ae=256);var H=Z.width,te=r-H,G=H,P=4*(Z.y*r+Z.x),U=4*((Z.y+Z.height)*r+Z.x),X=P,J=4*te;Z.interlaced===!0&&(J+=4*r*7);for(var ie=8,ve=0,ke=xe.length;ve<ke;++ve){var oe=xe[ve];if(G===0&&(G=H,(X+=J)>=U&&(J=4*te+4*r*(ie-1),X=P+(H+te)*(ie<<1),ie>>=1)),oe===ae)X+=4;else{var Ee=t[he+3*oe],Oe=t[he+3*oe+1],ne=t[he+3*oe+2];V[X++]=Ee,V[X++]=Oe,V[X++]=ne,V[X++]=255}--G}}}function fP(t,e,r,n){for(var s=t[e++],i=1<<s,a=i+1,o=a+1,l=s+1,c=(1<<l)-1,d=0,p=0,g=0,m=t[e++],y=new Int32Array(4096),w=null;;){for(;d<16&&m!==0;)p|=t[e++]<<d,d+=8,m===1?m=t[e++]:--m;if(d<l)break;var _=p&c;if(p>>=l,d-=l,_!==i){if(_===a)break;for(var S=_<o?_:w,T=0,I=S;I>i;)I=y[I]>>8,++T;var M=I;if(g+T+(S!==_?1:0)>n)return void Ns.log("Warning, gif stream longer than expected.");r[g++]=M;var K=g+=T;for(S!==_&&(r[g++]=M),I=S;T--;)I=y[I],r[--K]=255&I,I>>=8;w!==null&&o<4096&&(y[o++]=w<<8|M,o>=c+1&&l<12&&(++l,c=c<<1|1)),w=_}else o=a+1,c=(1<<(l=s+1))-1,w=null}return g!==n&&Ns.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function mb(t){var e,r,n,s,i,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),p=new Array(65535),g=new Array(65535),m=new Array(64),y=new Array(64),w=[],_=0,S=7,T=new Array(64),I=new Array(64),M=new Array(64),K=new Array(256),W=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],fe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function xe(P,U){for(var X=0,J=0,ie=new Array,ve=1;ve<=16;ve++){for(var ke=1;ke<=P[ve];ke++)ie[U[J]]=[],ie[U[J]][0]=X,ie[U[J]][1]=ve,J++,X++;X*=2}return ie}function he(P){for(var U=P[0],X=P[1]-1;X>=0;)U&1<<X&&(_|=1<<S),X--,--S<0&&(_==255?(ae(255),ae(0)):ae(_),S=7,_=0)}function ae(P){w.push(P)}function H(P){ae(P>>8&255),ae(255&P)}function te(P,U,X,J,ie){for(var ve,ke=ie[0],oe=ie[240],Ee=(function(Be,He){var ut,Ct,Et,Le,Ye,Qe,le,je,We,lt,yt=0;for(We=0;We<8;++We){ut=Be[yt],Ct=Be[yt+1],Et=Be[yt+2],Le=Be[yt+3],Ye=Be[yt+4],Qe=Be[yt+5],le=Be[yt+6];var $t=ut+(je=Be[yt+7]),Xt=ut-je,At=Ct+le,Vt=Ct-le,Or=Et+Qe,rr=Et-Qe,Sr=Le+Ye,Cr=Le-Ye,Bn=$t+Sr,bn=$t-Sr,Yr=At+Or,hr=At-Or;Be[yt]=Bn+Yr,Be[yt+4]=Bn-Yr;var Jr=.707106781*(hr+bn);Be[yt+2]=bn+Jr,Be[yt+6]=bn-Jr;var ha=.382683433*((Bn=Cr+rr)-(hr=Vt+Xt)),ms=.5411961*Bn+ha,Pi=1.306562965*hr+ha,gs=.707106781*(Yr=rr+Vt),vr=Xt+gs,Nn=Xt-gs;Be[yt+5]=Nn+ms,Be[yt+3]=Nn-ms,Be[yt+1]=vr+Pi,Be[yt+7]=vr-Pi,yt+=8}for(yt=0,We=0;We<8;++We){ut=Be[yt],Ct=Be[yt+8],Et=Be[yt+16],Le=Be[yt+24],Ye=Be[yt+32],Qe=Be[yt+40],le=Be[yt+48];var Ri=ut+(je=Be[yt+56]),Gn=ut-je,ln=Ct+le,Ln=Ct-le,ss=Et+Qe,ce=Et-Qe,Te=Le+Ye,be=Le-Ye,Se=Ri+Te,Pe=Ri-Te,Ie=ln+ss,Xe=ln-ss;Be[yt]=Se+Ie,Be[yt+32]=Se-Ie;var ft=.707106781*(Xe+Pe);Be[yt+16]=Pe+ft,Be[yt+48]=Pe-ft;var tt=.382683433*((Se=be+ce)-(Xe=Ln+Gn)),et=.5411961*Se+tt,at=1.306562965*Xe+tt,Tt=.707106781*(Ie=ce+Ln),Ut=Gn+Tt,Gt=Gn-Tt;Be[yt+40]=Gt+et,Be[yt+24]=Gt-et,Be[yt+8]=Ut+at,Be[yt+56]=Ut-at,yt++}for(We=0;We<64;++We)lt=Be[We]*He[We],m[We]=lt>0?lt+.5|0:lt-.5|0;return m})(P,U),Oe=0;Oe<64;++Oe)y[L[Oe]]=Ee[Oe];var ne=y[0]-X;X=y[0],ne==0?he(J[0]):(he(J[g[ve=32767+ne]]),he(p[ve]));for(var we=63;we>0&&y[we]==0;)we--;if(we==0)return he(ke),X;for(var Re,pe=1;pe<=we;){for(var Ke=pe;y[pe]==0&&pe<=we;)++pe;var ze=pe-Ke;if(ze>=16){Re=ze>>4;for(var ot=1;ot<=Re;++ot)he(oe);ze&=15}ve=32767+y[pe],he(ie[(ze<<4)+g[ve]]),he(p[ve]),pe++}return we!=63&&he(ke),X}function G(P){P=Math.min(Math.max(P,1),100),i!=P&&((function(U){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var ie=a((X[J]*U+50)/100);ie=Math.min(Math.max(ie,1),255),o[L[J]]=ie}for(var ve=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ke=0;ke<64;ke++){var oe=a((ve[ke]*U+50)/100);oe=Math.min(Math.max(oe,1),255),l[L[ke]]=oe}for(var Ee=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Oe=0,ne=0;ne<8;ne++)for(var we=0;we<8;we++)c[Oe]=1/(o[L[Oe]]*Ee[ne]*Ee[we]*8),d[Oe]=1/(l[L[Oe]]*Ee[ne]*Ee[we]*8),Oe++})(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),i=P)}this.encode=function(P,U){U&&G(U),w=new Array,_=0,S=7,H(65496),H(65504),H(16),ae(74),ae(70),ae(73),ae(70),ae(0),ae(1),ae(1),ae(0),H(1),H(1),ae(0),ae(0),(function(){H(65499),H(132),ae(0);for(var Ct=0;Ct<64;Ct++)ae(o[Ct]);ae(1);for(var Et=0;Et<64;Et++)ae(l[Et])})(),(function(Ct,Et){H(65472),H(17),ae(8),H(Et),H(Ct),ae(3),ae(1),ae(17),ae(0),ae(2),ae(17),ae(1),ae(3),ae(17),ae(1)})(P.width,P.height),(function(){H(65476),H(418),ae(0);for(var Ct=0;Ct<16;Ct++)ae(A[Ct+1]);for(var Et=0;Et<=11;Et++)ae(E[Et]);ae(16);for(var Le=0;Le<16;Le++)ae(D[Le+1]);for(var Ye=0;Ye<=161;Ye++)ae(R[Ye]);ae(1);for(var Qe=0;Qe<16;Qe++)ae(F[Qe+1]);for(var le=0;le<=11;le++)ae(V[le]);ae(17);for(var je=0;je<16;je++)ae(Z[je+1]);for(var We=0;We<=161;We++)ae(fe[We])})(),H(65498),H(12),ae(3),ae(1),ae(0),ae(2),ae(17),ae(3),ae(17),ae(0),ae(63),ae(0);var X=0,J=0,ie=0;_=0,S=7,this.encode.displayName="_encode_";for(var ve,ke,oe,Ee,Oe,ne,we,Re,pe,Ke=P.data,ze=P.width,ot=P.height,Be=4*ze,He=0;He<ot;){for(ve=0;ve<Be;){for(Oe=Be*He+ve,we=-1,Re=0,pe=0;pe<64;pe++)ne=Oe+(Re=pe>>3)*Be+(we=4*(7&pe)),He+Re>=ot&&(ne-=Be*(He+1+Re-ot)),ve+we>=Be&&(ne-=ve+we-Be+4),ke=Ke[ne++],oe=Ke[ne++],Ee=Ke[ne++],T[pe]=(W[ke]+W[oe+256|0]+W[Ee+512|0]>>16)-128,I[pe]=(W[ke+768|0]+W[oe+1024|0]+W[Ee+1280|0]>>16)-128,M[pe]=(W[ke+1280|0]+W[oe+1536|0]+W[Ee+1792|0]>>16)-128;X=te(T,c,X,e,n),J=te(I,d,J,r,s),ie=te(M,d,ie,r,s),ve+=32}He+=8}if(S>=0){var ut=[];ut[1]=S+1,ut[0]=(1<<S+1)-1,he(ut)}return H(65497),new Uint8Array(w)},t=t||50,(function(){for(var P=String.fromCharCode,U=0;U<256;U++)K[U]=P(U)})(),e=xe(A,E),r=xe(F,V),n=xe(D,R),s=xe(Z,fe),(function(){for(var P=1,U=2,X=1;X<=15;X++){for(var J=P;J<U;J++)g[32767+J]=X,p[32767+J]=[],p[32767+J][1]=X,p[32767+J][0]=J;for(var ie=-(U-1);ie<=-P;ie++)g[32767+ie]=X,p[32767+ie]=[],p[32767+ie][1]=X,p[32767+ie][0]=U-1+ie;P<<=1,U<<=1}})(),(function(){for(var P=0;P<256;P++)W[P]=19595*P,W[P+256|0]=38470*P,W[P+512|0]=7471*P+32768,W[P+768|0]=-11059*P,W[P+1024|0]=-21709*P,W[P+1280|0]=32768*P+8421375,W[P+1536|0]=-27439*P,W[P+1792|0]=-5329*P})(),G(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function tu(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function pP(t){function e(E){if(!E)throw Error("assert :P")}function r(E,D,R){for(var F=0;4>F;F++)if(E[D+F]!=R.charCodeAt(F))return!0;return!1}function n(E,D,R,F,V){for(var Z=0;Z<V;Z++)E[D+Z]=R[F+Z]}function s(E,D,R,F){for(var V=0;V<F;V++)E[D+V]=R}function i(E){return new Int32Array(E)}function a(E,D){for(var R=[],F=0;F<E;F++)R.push(new D);return R}function o(E,D){var R=[];return(function F(V,Z,fe){for(var xe=fe[Z],he=0;he<xe&&(V.push(fe.length>Z+1?[]:new D),!(fe.length<Z+1));he++)F(V[he],Z+1,fe)})(R,0,E),R}var l=function(){var E=this;function D(b,N){for(var z=1<<N-1>>>0;b&z;)z>>>=1;return z?(b&z-1)+z:b}function R(b,N,z,Q,se){e(!(Q%z));do b[N+(Q-=z)]=se;while(0<Q)}function F(b,N,z,Q,se){if(e(2328>=se),512>=se)var de=i(512);else if((de=i(se))==null)return 0;return(function(me,ge,_e,Ce,Ve,nt){var Ne,$e,Ze=ge,wt=1<<_e,it=i(16),xt=i(16);for(e(Ve!=0),e(Ce!=null),e(me!=null),e(0<_e),$e=0;$e<Ve;++$e){if(15<Ce[$e])return 0;++it[Ce[$e]]}if(it[0]==Ve)return 0;for(xt[1]=0,Ne=1;15>Ne;++Ne){if(it[Ne]>1<<Ne)return 0;xt[Ne+1]=xt[Ne]+it[Ne]}for($e=0;$e<Ve;++$e)Ne=Ce[$e],0<Ce[$e]&&(nt[xt[Ne]++]=$e);if(xt[15]==1)return(Ce=new V).g=0,Ce.value=nt[0],R(me,Ze,1,wt,Ce),wt;var vt,kt=-1,St=wt-1,yr=0,or=1,Qr=1,dr=1<<_e;for($e=0,Ne=1,Ve=2;Ne<=_e;++Ne,Ve<<=1){if(or+=Qr<<=1,0>(Qr-=it[Ne]))return 0;for(;0<it[Ne];--it[Ne])(Ce=new V).g=Ne,Ce.value=nt[$e++],R(me,Ze+yr,Ve,dr,Ce),yr=D(yr,Ne)}for(Ne=_e+1,Ve=2;15>=Ne;++Ne,Ve<<=1){if(or+=Qr<<=1,0>(Qr-=it[Ne]))return 0;for(;0<it[Ne];--it[Ne]){if(Ce=new V,(yr&St)!=kt){for(Ze+=dr,vt=1<<(kt=Ne)-_e;15>kt&&!(0>=(vt-=it[kt]));)++kt,vt<<=1;wt+=dr=1<<(vt=kt-_e),me[ge+(kt=yr&St)].g=vt+_e,me[ge+kt].value=Ze-ge-kt}Ce.g=Ne-_e,Ce.value=nt[$e++],R(me,Ze+(yr>>_e),Ve,dr,Ce),yr=D(yr,Ne)}}return or!=2*xt[15]-1?0:wt})(b,N,z,Q,se,de)}function V(){this.value=this.g=0}function Z(){this.value=this.g=0}function fe(){this.G=a(5,V),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Za,Z)}function xe(b,N,z,Q){e(b!=null),e(N!=null),e(2147483648>Q),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=N,b.pa=z,b.Jd=N,b.Yc=z+Q,b.Zc=4<=Q?z+Q-4+1:z,ke(b)}function he(b,N){for(var z=0;0<N--;)z|=Ee(b,128)<<N;return z}function ae(b,N){var z=he(b,N);return oe(b)?-z:z}function H(b,N,z,Q){var se,de=0;for(e(b!=null),e(N!=null),e(4294967288>Q),b.Sb=Q,b.Ra=0,b.u=0,b.h=0,4<Q&&(Q=4),se=0;se<Q;++se)de+=N[z+se]<<8*se;b.Ra=de,b.bb=Q,b.oa=N,b.pa=z}function te(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<Au-8>>>0,++b.bb,b.u-=8;J(b)&&(b.h=1,b.u=0)}function G(b,N){if(e(0<=N),!b.h&&N<=Kf){var z=X(b)&Cu[N];return b.u+=N,te(b),z}return b.h=1,b.u=0}function P(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function U(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(b){return b.Ra>>>(b.u&Au-1)>>>0}function J(b){return e(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>Au}function ie(b,N){b.u=N,b.h=J(b)}function ve(b){b.u>=Ks&&(e(b.u>=Ks),te(b))}function ke(b){e(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(e(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function oe(b){return he(b,1)}function Ee(b,N){var z=b.Ca;0>b.b&&ke(b);var Q=b.b,se=z*N>>>8,de=(b.I>>>Q>se)+0;for(de?(z-=se,b.I-=se+1<<Q>>>0):z=se+1,Q=z,se=0;256<=Q;)se+=8,Q>>=8;return Q=7^se+Op[Q],b.b-=Q,b.Ca=(z<<Q)-1,de}function Oe(b,N,z){b[N+0]=z>>24&255,b[N+1]=z>>16&255,b[N+2]=z>>8&255,b[N+3]=255&z}function ne(b,N){return b[N+0]|b[N+1]<<8}function we(b,N){return ne(b,N)|b[N+2]<<16}function Re(b,N){return ne(b,N)|ne(b,N+2)<<16}function pe(b,N){var z=1<<N;return e(b!=null),e(0<N),b.X=i(z),b.X==null?0:(b.Mb=32-N,b.Xa=N,1)}function Ke(b,N){e(b!=null),e(N!=null),e(b.Xa==N.Xa),n(N.X,0,b.X,0,1<<N.Xa)}function ze(){this.X=[],this.Xa=this.Mb=0}function ot(b,N,z,Q){e(z!=null),e(Q!=null);var se=z[0],de=Q[0];return se==0&&(se=(b*de+N/2)/N),de==0&&(de=(N*se+b/2)/b),0>=se||0>=de?0:(z[0]=se,Q[0]=de,1)}function Be(b,N){return b+(1<<N)-1>>>N}function He(b,N){return((4278255360&b)+(4278255360&N)>>>0&4278255360)+((16711935&b)+(16711935&N)>>>0&16711935)>>>0}function ut(b,N){E[N]=function(z,Q,se,de,me,ge,_e){var Ce;for(Ce=0;Ce<me;++Ce){var Ve=E[b](ge[_e+Ce-1],se,de+Ce);ge[_e+Ce]=He(z[Q+Ce],Ve)}}}function Ct(){this.ud=this.hd=this.jd=0}function Et(b,N){return((4278124286&(b^N))>>>1)+(b&N)>>>0}function Le(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function Ye(b,N){return Le(b+(b-N+.5>>1))}function Qe(b,N,z){return Math.abs(N-z)-Math.abs(b-z)}function le(b,N,z,Q,se,de,me){for(Q=de[me-1],z=0;z<se;++z)de[me+z]=Q=He(b[N+z],Q)}function je(b,N,z,Q,se){var de;for(de=0;de<z;++de){var me=b[N+de],ge=me>>8&255,_e=16711935&(_e=(_e=16711935&me)+((ge<<16)+ge));Q[se+de]=(4278255360&me)+_e>>>0}}function We(b,N){N.jd=255&b,N.hd=b>>8&255,N.ud=b>>16&255}function lt(b,N,z,Q,se,de){var me;for(me=0;me<Q;++me){var ge=N[z+me],_e=ge>>>8,Ce=ge,Ve=255&(Ve=(Ve=ge>>>16)+((b.jd<<24>>24)*(_e<<24>>24)>>>5));Ce=255&(Ce=(Ce+=(b.hd<<24>>24)*(_e<<24>>24)>>>5)+((b.ud<<24>>24)*(Ve<<24>>24)>>>5)),se[de+me]=(4278255360&ge)+(Ve<<16)+Ce}}function yt(b,N,z,Q,se){E[N]=function(de,me,ge,_e,Ce,Ve,nt,Ne,$e){for(_e=nt;_e<Ne;++_e)for(nt=0;nt<$e;++nt)Ce[Ve++]=se(ge[Q(de[me++])])},E[b]=function(de,me,ge,_e,Ce,Ve,nt){var Ne=8>>de.b,$e=de.Ea,Ze=de.K[0],wt=de.w;if(8>Ne)for(de=(1<<de.b)-1,wt=(1<<Ne)-1;me<ge;++me){var it,xt=0;for(it=0;it<$e;++it)it&de||(xt=Q(_e[Ce++])),Ve[nt++]=se(Ze[xt&wt]),xt>>=Ne}else E["VP8LMapColor"+z](_e,Ce,Ze,wt,Ve,nt,me,ge,$e)}}function $t(b,N,z,Q,se){for(z=N+z;N<z;){var de=b[N++];Q[se++]=de>>16&255,Q[se++]=de>>8&255,Q[se++]=255&de}}function Xt(b,N,z,Q,se){for(z=N+z;N<z;){var de=b[N++];Q[se++]=de>>16&255,Q[se++]=de>>8&255,Q[se++]=255&de,Q[se++]=de>>24&255}}function At(b,N,z,Q,se){for(z=N+z;N<z;){var de=(me=b[N++])>>16&240|me>>12&15,me=240&me|me>>28&15;Q[se++]=de,Q[se++]=me}}function Vt(b,N,z,Q,se){for(z=N+z;N<z;){var de=(me=b[N++])>>16&248|me>>13&7,me=me>>5&224|me>>3&31;Q[se++]=de,Q[se++]=me}}function Or(b,N,z,Q,se){for(z=N+z;N<z;){var de=b[N++];Q[se++]=255&de,Q[se++]=de>>8&255,Q[se++]=de>>16&255}}function rr(b,N,z,Q,se,de){if(de==0)for(z=N+z;N<z;)Oe(Q,((de=b[N++])[0]>>24|de[1]>>8&65280|de[2]<<8&16711680|de[3]<<24)>>>0),se+=32;else n(Q,se,b,N,z)}function Sr(b,N){E[N][0]=E[b+"0"],E[N][1]=E[b+"1"],E[N][2]=E[b+"2"],E[N][3]=E[b+"3"],E[N][4]=E[b+"4"],E[N][5]=E[b+"5"],E[N][6]=E[b+"6"],E[N][7]=E[b+"7"],E[N][8]=E[b+"8"],E[N][9]=E[b+"9"],E[N][10]=E[b+"10"],E[N][11]=E[b+"11"],E[N][12]=E[b+"12"],E[N][13]=E[b+"13"],E[N][14]=E[b+"0"],E[N][15]=E[b+"0"]}function Cr(b){return b==Sh||b==_d||b==Zf||b==e0}function Bn(){this.eb=[],this.size=this.A=this.fb=0}function bn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Yr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Bn,this.f.kb=new bn,this.sd=null}function hr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Jr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ha(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function ms(b,N){var z=b.T,Q=N.ba.f.RGBA,se=Q.eb,de=Q.fb+b.ka*Q.A,me=So[N.ba.S],ge=b.y,_e=b.O,Ce=b.f,Ve=b.N,nt=b.ea,Ne=b.W,$e=N.cc,Ze=N.dc,wt=N.Mc,it=N.Nc,xt=b.ka,vt=b.ka+b.T,kt=b.U,St=kt+1>>1;for(xt==0?me(ge,_e,null,null,Ce,Ve,nt,Ne,Ce,Ve,nt,Ne,se,de,null,null,kt):(me(N.ec,N.fc,ge,_e,$e,Ze,wt,it,Ce,Ve,nt,Ne,se,de-Q.A,se,de,kt),++z);xt+2<vt;xt+=2)$e=Ce,Ze=Ve,wt=nt,it=Ne,Ve+=b.Rc,Ne+=b.Rc,de+=2*Q.A,me(ge,(_e+=2*b.fa)-b.fa,ge,_e,$e,Ze,wt,it,Ce,Ve,nt,Ne,se,de-Q.A,se,de,kt);return _e+=b.fa,b.j+vt<b.o?(n(N.ec,N.fc,ge,_e,kt),n(N.cc,N.dc,Ce,Ve,St),n(N.Mc,N.Nc,nt,Ne,St),z--):1&vt||me(ge,_e,null,null,Ce,Ve,nt,Ne,Ce,Ve,nt,Ne,se,de+Q.A,null,null,kt),z}function Pi(b,N,z){var Q=b.F,se=[b.J];if(Q!=null){var de=b.U,me=N.ba.S,ge=me==Jf||me==Zf;N=N.ba.f.RGBA;var _e=[0],Ce=b.ka;_e[0]=b.T,b.Kb&&(Ce==0?--_e[0]:(--Ce,se[0]-=b.width),b.j+b.ka+b.T==b.o&&(_e[0]=b.o-b.j-Ce));var Ve=N.eb;Ce=N.fb+Ce*N.A,b=Xf(Q,se[0],b.width,de,_e,Ve,Ce+(ge?0:3),N.A),e(z==_e),b&&Cr(me)&&wd(Ve,Ce,ge,de,_e,N.A)}return 0}function gs(b){var N=b.ma,z=N.ba.S,Q=11>z,se=z==Tu||z==Qf||z==Jf||z==is||z==12||Cr(z);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!Qa(N.Oa,b,se?11:12))return 0;if(se&&Cr(z)&&Su(),b.da)alert("todo:use_scaling");else{if(Q){if(N.Ib=ha,b.Kb){if(z=b.U+1>>1,N.memory=i(b.U+2*z),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+b.U,N.Mc=N.cc,N.Nc=N.dc+z,N.Ib=ms,Su()}}else alert("todo:EmitYUV");se&&(N.Jb=Pi,Q&&ii())}if(Q&&!ya){for(b=0;256>b;++b)Eo[b]=89858*(b-128)+Ml>>Hc,Co[b]=-22014*(b-128)+Ml,Nh[b]=-45773*(b-128),Ed[b]=113618*(b-128)+Ml>>Hc;for(b=Xn;b<ts;++b)N=76283*(b-16)+Ml>>Hc,Hp[b-Xn]=gn(N,255),Ry[b-Xn]=gn(N+8>>4,15);ya=1}return 1}function vr(b){var N=b.ma,z=b.U,Q=b.T;return e(!(1&b.ka)),0>=z||0>=Q?0:(z=N.Ib(b,N),N.Jb!=null&&N.Jb(b,N,z),N.Dc+=z,1)}function Nn(b){b.ma.memory=null}function Ri(b,N,z,Q){return G(b,8)!=47?0:(N[0]=G(b,14)+1,z[0]=G(b,14)+1,Q[0]=G(b,1),G(b,3)!=0?0:!b.h)}function Gn(b,N){if(4>b)return b+1;var z=b-2>>1;return(2+(1&b)<<z)+G(N,z)+1}function ln(b,N){return 120<N?N-120:1<=(z=((z=v4[N-1])>>4)*b+(8-(15&z)))?z:1;var z}function Ln(b,N,z){var Q=X(z),se=b[N+=255&Q].g-8;return 0<se&&(ie(z,z.u+8),Q=X(z),N+=b[N].value,N+=Q&(1<<se)-1),ie(z,z.u+b[N].g),b[N].value}function ss(b,N,z){return z.g+=b.g,z.value+=b.value<<N>>>0,e(8>=z.g),b.g}function ce(b,N,z){var Q=b.xc;return e((N=Q==0?0:b.vc[b.md*(z>>Q)+(N>>Q)])<b.Wb),b.Ya[N]}function Te(b,N,z,Q){var se=b.ab,de=b.c*N,me=b.C;N=me+N;var ge=z,_e=Q;for(Q=b.Ta,z=b.Ua;0<se--;){var Ce=b.gc[se],Ve=me,nt=N,Ne=ge,$e=_e,Ze=(_e=Q,ge=z,Ce.Ea);switch(e(Ve<nt),e(nt<=Ce.nc),Ce.hc){case 2:yh(Ne,$e,(nt-Ve)*Ze,_e,ge);break;case 0:var wt=Ve,it=nt,xt=_e,vt=ge,kt=(dr=Ce).Ea;wt==0&&(wo(Ne,$e,null,null,1,xt,vt),le(Ne,$e+1,0,0,kt-1,xt,vt+1),$e+=kt,vt+=kt,++wt);for(var St=1<<dr.b,yr=St-1,or=Be(kt,dr.b),Qr=dr.K,dr=dr.w+(wt>>dr.b)*or;wt<it;){var xn=Qr,Ys=dr,Zr=1;for(_o(Ne,$e,xt,vt-kt,1,xt,vt);Zr<kt;){var lr=(Zr&~yr)+St;lr>kt&&(lr=kt),(0,qc[xn[Ys++]>>8&15])(Ne,$e+ +Zr,xt,vt+Zr-kt,lr-Zr,xt,vt+Zr),Zr=lr}$e+=kt,vt+=kt,++wt&yr||(dr+=or)}nt!=Ce.nc&&n(_e,ge-Ze,_e,ge+(nt-Ve-1)*Ze,Ze);break;case 1:for(Ze=Ne,it=$e,kt=(Ne=Ce.Ea)-(vt=Ne&~(xt=($e=1<<Ce.b)-1)),wt=Be(Ne,Ce.b),St=Ce.K,Ce=Ce.w+(Ve>>Ce.b)*wt;Ve<nt;){for(yr=St,or=Ce,Qr=new Ct,dr=it+vt,xn=it+Ne;it<dr;)We(yr[or++],Qr),cc(Qr,Ze,it,$e,_e,ge),it+=$e,ge+=$e;it<xn&&(We(yr[or++],Qr),cc(Qr,Ze,it,kt,_e,ge),it+=kt,ge+=kt),++Ve&xt||(Ce+=wt)}break;case 3:if(Ne==_e&&$e==ge&&0<Ce.b){for(it=_e,Ne=Ze=ge+(nt-Ve)*Ze-(vt=(nt-Ve)*Be(Ce.Ea,Ce.b)),$e=_e,xt=ge,wt=[],vt=(kt=vt)-1;0<=vt;--vt)wt[vt]=$e[xt+vt];for(vt=kt-1;0<=vt;--vt)it[Ne+vt]=wt[vt];Nu(Ce,Ve,nt,_e,Ze,_e,ge)}else Nu(Ce,Ve,nt,Ne,$e,_e,ge)}ge=Q,_e=z}_e!=z&&n(Q,z,ge,_e,de)}function be(b,N){var z=b.V,Q=b.Ba+b.c*b.C,se=N-b.C;if(e(N<=b.l.o),e(16>=se),0<se){var de=b.l,me=b.Ta,ge=b.Ua,_e=de.width;if(Te(b,se,z,Q),se=ge=[ge],e((z=b.C)<(Q=N)),e(de.v<de.va),Q>de.o&&(Q=de.o),z<de.j){var Ce=de.j-z;z=de.j,se[0]+=Ce*_e}if(z>=Q?z=0:(se[0]+=4*de.v,de.ka=z-de.j,de.U=de.va-de.v,de.T=Q-z,z=1),z){if(ge=ge[0],11>(z=b.ca).S){var Ve=z.f.RGBA,nt=(Q=z.S,se=de.U,de=de.T,Ce=Ve.eb,Ve.A),Ne=de;for(Ve=Ve.fb+b.Ma*Ve.A;0<Ne--;){var $e=me,Ze=ge,wt=se,it=Ce,xt=Ve;switch(Q){case Up:wh($e,Ze,wt,it,xt);break;case Tu:bo($e,Ze,wt,it,xt);break;case Sh:bo($e,Ze,wt,it,xt),wd(it,xt,0,wt,1,0);break;case Ay:vs($e,Ze,wt,it,xt);break;case Qf:rr($e,Ze,wt,it,xt,1);break;case _d:rr($e,Ze,wt,it,xt,1),wd(it,xt,0,wt,1,0);break;case Jf:rr($e,Ze,wt,it,xt,0);break;case Zf:rr($e,Ze,wt,it,xt,0),wd(it,xt,1,wt,1,0);break;case is:uc($e,Ze,wt,it,xt);break;case e0:uc($e,Ze,wt,it,xt),cg(it,xt,wt,1,0);break;case zp:ys($e,Ze,wt,it,xt);break;default:e(0)}ge+=_e,Ve+=nt}b.Ma+=de}else alert("todo:EmitRescaledRowsYUVA");e(b.Ma<=z.height)}}b.C=N,e(b.C<=b.i)}function Se(b){var N;if(0<b.ua)return 0;for(N=0;N<b.Wb;++N){var z=b.Ya[N].G,Q=b.Ya[N].H;if(0<z[1][Q[1]+0].g||0<z[2][Q[2]+0].g||0<z[3][Q[3]+0].g)return 0}return 1}function Pe(b,N,z,Q,se,de){if(b.Z!=0){var me=b.qd,ge=b.rd;for(e(Ra[b.Z]!=null);N<z;++N)Ra[b.Z](me,ge,Q,se,Q,se,de),me=Q,ge=se,se+=de;b.qd=me,b.rd=ge}}function Ie(b,N){var z=b.l.ma,Q=z.Z==0||z.Z==1?b.l.j:b.C;if(Q=b.C<Q?Q:b.C,e(N<=b.l.o),N>Q){var se=b.l.width,de=z.ca,me=z.tb+se*Q,ge=b.V,_e=b.Ba+b.c*Q,Ce=b.gc;e(b.ab==1),e(Ce[0].hc==3),xd(Ce[0],Q,N,ge,_e,de,me),Pe(z,Q,N,de,me,se)}b.C=b.Ma=N}function Xe(b,N,z,Q,se,de,me){var ge=b.$/Q,_e=b.$%Q,Ce=b.m,Ve=b.s,nt=z+b.$,Ne=nt;se=z+Q*se;var $e=z+Q*de,Ze=280+Ve.ua,wt=b.Pb?ge:16777216,it=0<Ve.ua?Ve.Wa:null,xt=Ve.wc,vt=nt<$e?ce(Ve,_e,ge):null;e(b.C<de),e($e<=se);var kt=!1;e:for(;;){for(;kt||nt<$e;){var St=0;if(ge>=wt){var yr=nt-z;e((wt=b).Pb),wt.wd=wt.m,wt.xd=yr,0<wt.s.ua&&Ke(wt.s.Wa,wt.s.vb),wt=ge+qp}if(_e&xt||(vt=ce(Ve,_e,ge)),e(vt!=null),vt.Qb&&(N[nt]=vt.qb,kt=!0),!kt)if(ve(Ce),vt.jc){St=Ce,yr=N;var or=nt,Qr=vt.pd[X(St)&Za-1];e(vt.jc),256>Qr.g?(ie(St,St.u+Qr.g),yr[or]=Qr.value,St=0):(ie(St,St.u+Qr.g-256),e(256<=Qr.value),St=Qr.value),St==0&&(kt=!0)}else St=Ln(vt.G[0],vt.H[0],Ce);if(Ce.h)break;if(kt||256>St){if(!kt)if(vt.nd)N[nt]=(vt.qb|St<<8)>>>0;else{if(ve(Ce),kt=Ln(vt.G[1],vt.H[1],Ce),ve(Ce),yr=Ln(vt.G[2],vt.H[2],Ce),or=Ln(vt.G[3],vt.H[3],Ce),Ce.h)break;N[nt]=(or<<24|kt<<16|St<<8|yr)>>>0}if(kt=!1,++nt,++_e>=Q&&(_e=0,++ge,me!=null&&ge<=de&&!(ge%16)&&me(b,ge),it!=null))for(;Ne<nt;)St=N[Ne++],it.X[(506832829*St&4294967295)>>>it.Mb]=St}else if(280>St){if(St=Gn(St-256,Ce),yr=Ln(vt.G[4],vt.H[4],Ce),ve(Ce),yr=ln(Q,yr=Gn(yr,Ce)),Ce.h)break;if(nt-z<yr||se-nt<St)break e;for(or=0;or<St;++or)N[nt+or]=N[nt+or-yr];for(nt+=St,_e+=St;_e>=Q;)_e-=Q,++ge,me!=null&&ge<=de&&!(ge%16)&&me(b,ge);if(e(nt<=se),_e&xt&&(vt=ce(Ve,_e,ge)),it!=null)for(;Ne<nt;)St=N[Ne++],it.X[(506832829*St&4294967295)>>>it.Mb]=St}else{if(!(St<Ze))break e;for(kt=St-280,e(it!=null);Ne<nt;)St=N[Ne++],it.X[(506832829*St&4294967295)>>>it.Mb]=St;St=nt,e(!(kt>>>(yr=it).Xa)),N[St]=yr.X[kt],kt=!0}kt||e(Ce.h==J(Ce))}if(b.Pb&&Ce.h&&nt<se)e(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&Ke(b.s.vb,b.s.Wa);else{if(Ce.h)break e;me?.(b,ge>de?de:ge),b.a=0,b.$=nt-z}return 1}return b.a=3,0}function ft(b){e(b!=null),b.vc=null,b.yc=null,b.Ya=null;var N=b.Wa;N!=null&&(N.X=null),b.vb=null,e(b!=null)}function tt(){var b=new xs;return b==null?null:(b.a=0,b.xb=Ch,Sr("Predictor","VP8LPredictors"),Sr("Predictor","VP8LPredictors_C"),Sr("PredictorAdd","VP8LPredictorsAdd"),Sr("PredictorAdd","VP8LPredictorsAdd_C"),yh=je,cc=lt,wh=$t,bo=Xt,uc=At,ys=Vt,vs=Or,E.VP8LMapColor32b=vh,E.VP8LMapColor8b=$c,b)}function et(b,N,z,Q,se){var de=1,me=[b],ge=[N],_e=Q.m,Ce=Q.s,Ve=null,nt=0;e:for(;;){if(z)for(;de&&G(_e,1);){var Ne=me,$e=ge,Ze=Q,wt=1,it=Ze.m,xt=Ze.gc[Ze.ab],vt=G(it,2);if(Ze.Oc&1<<vt)de=0;else{switch(Ze.Oc|=1<<vt,xt.hc=vt,xt.Ea=Ne[0],xt.nc=$e[0],xt.K=[null],++Ze.ab,e(4>=Ze.ab),vt){case 0:case 1:xt.b=G(it,3)+2,wt=et(Be(xt.Ea,xt.b),Be(xt.nc,xt.b),0,Ze,xt.K),xt.K=xt.K[0];break;case 3:var kt,St=G(it,8)+1,yr=16<St?0:4<St?1:2<St?2:3;if(Ne[0]=Be(xt.Ea,yr),xt.b=yr,kt=wt=et(St,1,0,Ze,xt.K)){var or,Qr=St,dr=xt,xn=1<<(8>>dr.b),Ys=i(xn);if(Ys==null)kt=0;else{var Zr=dr.K[0],lr=dr.w;for(Ys[0]=dr.K[0][0],or=1;or<1*Qr;++or)Ys[or]=He(Zr[lr+or],Ys[or-1]);for(;or<4*xn;++or)Ys[or]=0;dr.K[0]=null,dr.K[0]=Ys,kt=1}}wt=kt;break;case 2:break;default:e(0)}de=wt}}if(me=me[0],ge=ge[0],de&&G(_e,1)&&!(de=1<=(nt=G(_e,4))&&11>=nt)){Q.a=3;break e}var Kt;if(Kt=de)t:{var li,Br,hn,ws=Q,ea=me,yi=ge,Os=nt,Di=z,ta=ws.m,Ls=ws.s,Cn=[null],zn=1,js=0,$n=Ty[Os];r:for(;;){if(Di&&G(ta,1)){var Xs=G(ta,3)+2,Qs=Be(ea,Xs),as=Be(yi,Xs),La=Qs*as;if(!et(Qs,as,0,ws,Cn))break r;for(Cn=Cn[0],Ls.xc=Xs,li=0;li<La;++li){var rs=Cn[li]>>8&65535;Cn[li]=rs,rs>=zn&&(zn=rs+1)}}if(ta.h)break r;for(Br=0;5>Br;++Br){var os=bd[Br];!Br&&0<Os&&(os+=1<<Os),js<os&&(js=os)}var vi=a(zn*$n,V),va=zn,Ao=a(va,fe);if(Ao==null)var ci=null;else e(65536>=va),ci=Ao;var ui=i(js);if(ci==null||ui==null||vi==null){ws.a=1;break r}var ja=vi;for(li=hn=0;li<zn;++li){var ls=ci[li],Fa=ls.G,pl=ls.H,Bl=0,ra=1,di=0;for(Br=0;5>Br;++Br){os=bd[Br],Fa[Br]=ja,pl[Br]=hn,!Br&&0<Os&&(os+=1<<Os);s:{var Ru,Gc=os,Th=ws,pc=ui,jy=ja,_g=hn,As=0,Vl=Th.m,bg=G(Vl,1);if(s(pc,0,0,Gc),bg){var kg=G(Vl,1)+1,Wp=G(Vl,1),Gp=G(Vl,Wp==0?1:8);pc[Gp]=1,kg==2&&(pc[Gp=G(Vl,8)]=1);var mc=1}else{var Fs=i(19),wi=G(Vl,4)+4;if(19<wi){Th.a=3;var hi=0;break s}for(Ru=0;Ru<wi;++Ru)Fs[y4[Ru]]=G(Vl,3);var Ih=void 0,Kc=void 0,Ph=Th,S4=Fs,Oi=Gc,Kp=pc,i0=0,gc=Ph.m,Ul=8,Qo=a(128,V);n:for(;F(Qo,0,7,S4,19);){if(G(gc,1)){var a0=2+2*G(gc,3);if((Ih=2+G(gc,a0))>Oi)break n}else Ih=Oi;for(Kc=0;Kc<Oi&&Ih--;){ve(gc);var Yp=Qo[0+(127&X(gc))];ie(gc,gc.u+Yp.g);var Lu=Yp.value;if(16>Lu)Kp[Kc++]=Lu,Lu!=0&&(Ul=Lu);else{var Fy=Lu==16,Sg=Lu-16,Dy=$p[Sg],Eg=G(gc,t0[Sg])+Dy;if(Kc+Eg>Oi)break n;for(var Oy=Fy?Ul:0;0<Eg--;)Kp[Kc++]=Oy}}i0=1;break n}i0||(Ph.a=3),mc=i0}(mc=mc&&!Vl.h)&&(As=F(jy,_g,8,pc,Gc)),mc&&As!=0?hi=As:(Th.a=3,hi=0)}if(hi==0)break r;if(ra&&Ny[Br]==1&&(ra=ja[hn].g==0),Bl+=ja[hn].g,hn+=hi,3>=Br){var Rh,Xp=ui[0];for(Rh=1;Rh<os;++Rh)ui[Rh]>Xp&&(Xp=ui[Rh]);di+=Xp}}if(ls.nd=ra,ls.Qb=0,ra&&(ls.qb=(Fa[3][pl[3]+0].value<<24|Fa[1][pl[1]+0].value<<16|Fa[2][pl[2]+0].value)>>>0,Bl==0&&256>Fa[0][pl[0]+0].value&&(ls.Qb=1,ls.qb+=Fa[0][pl[0]+0].value<<8)),ls.jc=!ls.Qb&&6>di,ls.jc){var o0,Jo=ls;for(o0=0;o0<Za;++o0){var Yc=o0,zl=Jo.pd[Yc],Ad=Jo.G[0][Jo.H[0]+Yc];256<=Ad.value?(zl.g=Ad.g+256,zl.value=Ad.value):(zl.g=0,zl.value=0,Yc>>=ss(Ad,8,zl),Yc>>=ss(Jo.G[1][Jo.H[1]+Yc],16,zl),Yc>>=ss(Jo.G[2][Jo.H[2]+Yc],0,zl),ss(Jo.G[3][Jo.H[3]+Yc],24,zl))}}}Ls.vc=Cn,Ls.Wb=zn,Ls.Ya=ci,Ls.yc=vi,Kt=1;break t}Kt=0}if(!(de=Kt)){Q.a=3;break e}if(0<nt){if(Ce.ua=1<<nt,!pe(Ce.Wa,nt)){Q.a=1,de=0;break e}}else Ce.ua=0;var Qp=Q,Jp=me,My=ge,Zp=Qp.s,em=Zp.xc;if(Qp.c=Jp,Qp.i=My,Zp.md=Be(Jp,em),Zp.wc=em==0?-1:(1<<em)-1,z){Q.xb=fc;break e}if((Ve=i(me*ge))==null){Q.a=1,de=0;break e}de=(de=Xe(Q,Ve,0,me,ge,ge,null))&&!_e.h;break e}return de?(se!=null?se[0]=Ve:(e(Ve==null),e(z)),Q.$=0,z||ft(Ce)):ft(Ce),de}function at(b,N){var z=b.c*b.i,Q=z+N+16*N;return e(b.c<=N),b.V=i(Q),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+z+N,1)}function Tt(b,N){var z=b.C,Q=N-z,se=b.V,de=b.Ba+b.c*z;for(e(N<=b.l.o);0<Q;){var me=16<Q?16:Q,ge=b.l.ma,_e=b.l.width,Ce=_e*me,Ve=ge.ca,nt=ge.tb+_e*z,Ne=b.Ta,$e=b.Ua;Te(b,me,se,de),ug(Ne,$e,Ve,nt,Ce),Pe(ge,z,z+me,Ve,nt,_e),Q-=me,se+=me*b.c,z+=me}e(z==N),b.C=b.Ma=N}function Ut(){this.ub=this.yd=this.td=this.Rb=0}function Gt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ot(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Pt(){this.Yb=(function(){var b=[];return(function N(z,Q,se){for(var de=se[Q],me=0;me<de&&(z.push(se.length>Q+1?[]:0),!(se.length<Q+1));me++)N(z[me],Q+1,se)})(b,0,[3,11]),b})()}function Ar(){this.jb=i(3),this.Wc=o([4,8],Pt),this.Xc=o([4,17],Pt)}function Xr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Ur(){this.ld=this.La=this.dd=this.tc=0}function kn(){this.Na=this.la=0}function Aa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Na(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Qi(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ur),this.Y=0,this.ya=Array(new Na),this.aa=0,this.l=new Qt}function Fe(){this.y=i(16),this.f=i(8),this.ea=i(8)}function zt(){this.cb=this.a=0,this.sc="",this.m=new P,this.Od=new Ut,this.Kc=new Gt,this.ed=new Xr,this.Qa=new Ot,this.Ic=this.$c=this.Aa=0,this.D=new Qi,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,P),this.ia=0,this.pb=a(4,Aa),this.Pa=new Ar,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Fe),this.Hd=0,this.rb=Array(new kn),this.sb=0,this.wa=Array(new Ur),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Na),this.L=this.aa=0,this.gd=o([4,2],Ur),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function nr(){var b=new zt;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,kd||(kd=Vn)),b}function gr(b,N,z){return b.a==0&&(b.a=N,b.sc=z,b.cb=0),0}function sn(b,N,z){return 3<=z&&b[N+0]==157&&b[N+1]==1&&b[N+2]==42}function Es(b,N){if(b==null)return 0;if(b.a=0,b.sc="OK",N==null)return gr(b,2,"null VP8Io passed to VP8GetHeaders()");var z=N.data,Q=N.w,se=N.ha;if(4>se)return gr(b,7,"Truncated header.");var de=z[Q+0]|z[Q+1]<<8|z[Q+2]<<16,me=b.Od;if(me.Rb=!(1&de),me.td=de>>1&7,me.yd=de>>4&1,me.ub=de>>5,3<me.td)return gr(b,3,"Incorrect keyframe parameters.");if(!me.yd)return gr(b,4,"Frame not displayable.");Q+=3,se-=3;var ge=b.Kc;if(me.Rb){if(7>se)return gr(b,7,"cannot parse picture header");if(!sn(z,Q,se))return gr(b,3,"Bad code word");ge.c=16383&(z[Q+4]<<8|z[Q+3]),ge.Td=z[Q+4]>>6,ge.i=16383&(z[Q+6]<<8|z[Q+5]),ge.Ud=z[Q+6]>>6,Q+=7,se-=7,b.za=ge.c+15>>4,b.Ub=ge.i+15>>4,N.width=ge.c,N.height=ge.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,s((de=b.Pa).jb,0,255,de.jb.length),e((de=b.Qa)!=null),de.Cb=0,de.Bb=0,de.Fb=1,s(de.Zb,0,0,de.Zb.length),s(de.Lb,0,0,de.Lb)}if(me.ub>se)return gr(b,7,"bad partition length");xe(de=b.m,z,Q,me.ub),Q+=me.ub,se-=me.ub,me.Rb&&(ge.Ld=oe(de),ge.Kd=oe(de)),ge=b.Qa;var _e,Ce=b.Pa;if(e(de!=null),e(ge!=null),ge.Cb=oe(de),ge.Cb){if(ge.Bb=oe(de),oe(de)){for(ge.Fb=oe(de),_e=0;4>_e;++_e)ge.Zb[_e]=oe(de)?ae(de,7):0;for(_e=0;4>_e;++_e)ge.Lb[_e]=oe(de)?ae(de,6):0}if(ge.Bb)for(_e=0;3>_e;++_e)Ce.jb[_e]=oe(de)?he(de,8):255}else ge.Bb=0;if(de.Ka)return gr(b,3,"cannot parse segment header");if((ge=b.ed).zd=oe(de),ge.Tb=he(de,6),ge.wb=he(de,3),ge.Pc=oe(de),ge.Pc&&oe(de)){for(Ce=0;4>Ce;++Ce)oe(de)&&(ge.vd[Ce]=ae(de,6));for(Ce=0;4>Ce;++Ce)oe(de)&&(ge.od[Ce]=ae(de,6))}if(b.L=ge.Tb==0?0:ge.zd?1:2,de.Ka)return gr(b,3,"cannot parse filter header");var Ve=se;if(se=_e=Q,Q=_e+Ve,ge=Ve,b.Xb=(1<<he(b.m,2))-1,Ve<3*(Ce=b.Xb))z=7;else{for(_e+=3*Ce,ge-=3*Ce,Ve=0;Ve<Ce;++Ve){var nt=z[se+0]|z[se+1]<<8|z[se+2]<<16;nt>ge&&(nt=ge),xe(b.Jc[+Ve],z,_e,nt),_e+=nt,ge-=nt,se+=3}xe(b.Jc[+Ce],z,_e,ge),z=_e<Q?0:5}if(z!=0)return gr(b,z,"cannot parse partitions");for(z=he(_e=b.m,7),se=oe(_e)?ae(_e,4):0,Q=oe(_e)?ae(_e,4):0,ge=oe(_e)?ae(_e,4):0,Ce=oe(_e)?ae(_e,4):0,_e=oe(_e)?ae(_e,4):0,Ve=b.Qa,nt=0;4>nt;++nt){if(Ve.Cb){var Ne=Ve.Zb[nt];Ve.Fb||(Ne+=z)}else{if(0<nt){b.pb[nt]=b.pb[0];continue}Ne=z}var $e=b.pb[nt];$e.Sc[0]=Eh[gn(Ne+se,127)],$e.Sc[1]=r0[gn(Ne+0,127)],$e.Eb[0]=2*Eh[gn(Ne+Q,127)],$e.Eb[1]=101581*r0[gn(Ne+ge,127)]>>16,8>$e.Eb[1]&&($e.Eb[1]=8),$e.Qc[0]=Eh[gn(Ne+Ce,117)],$e.Qc[1]=r0[gn(Ne+_e,127)],$e.lc=Ne+_e}if(!me.Rb)return gr(b,4,"Not a key frame.");for(oe(de),me=b.Pa,z=0;4>z;++z){for(se=0;8>se;++se)for(Q=0;3>Q;++Q)for(ge=0;11>ge;++ge)Ce=Ee(de,_4[z][se][Q][ge])?he(de,8):Py[z][se][Q][ge],me.Wc[z][se].Yb[Q][ge]=Ce;for(se=0;17>se;++se)me.Xc[z][se]=me.Wc[z][yg[se]]}return b.kc=oe(de),b.kc&&(b.Bd=he(de,8)),b.cb=1}function Vn(b,N,z,Q,se,de,me){var ge=N[se].Yb[z];for(z=0;16>se;++se){if(!Ee(b,ge[z+0]))return se;for(;!Ee(b,ge[z+1]);)if(ge=N[++se].Yb[0],z=0,se==16)return 16;var _e=N[se+1].Yb;if(Ee(b,ge[z+2])){var Ce=b,Ve=0;if(Ee(Ce,(Ne=ge)[(nt=z)+3]))if(Ee(Ce,Ne[nt+6])){for(ge=0,nt=2*(Ve=Ee(Ce,Ne[nt+8]))+(Ne=Ee(Ce,Ne[nt+9+Ve])),Ve=0,Ne=gg[nt];Ne[ge];++ge)Ve+=Ve+Ee(Ce,Ne[ge]);Ve+=3+(8<<nt)}else Ee(Ce,Ne[nt+7])?(Ve=7+2*Ee(Ce,165),Ve+=Ee(Ce,145)):Ve=5+Ee(Ce,159);else Ve=Ee(Ce,Ne[nt+4])?3+Ee(Ce,Ne[nt+5]):2;ge=_e[2]}else Ve=1,ge=_e[1];_e=me+xg[se],0>(Ce=b).b&&ke(Ce);var nt,Ne=Ce.b,$e=(nt=Ce.Ca>>1)-(Ce.I>>Ne)>>31;--Ce.b,Ce.Ca+=$e,Ce.Ca|=1,Ce.I-=(nt+1&$e)<<Ne,de[_e]=((Ve^$e)-$e)*Q[(0<se)+0]}return 16}function Sn(b){var N=b.rb[b.sb-1];N.la=0,N.Na=0,s(b.zc,0,0,b.zc.length),b.ja=0}function jn(b,N,z,Q,se){se=b[N+z+32*Q]+(se>>3),b[N+z+32*Q]=-256&se?0>se?0:255:se}function Hs(b,N,z,Q,se,de){jn(b,N,0,z,Q+se),jn(b,N,1,z,Q+de),jn(b,N,2,z,Q-de),jn(b,N,3,z,Q-se)}function cn(b){return(20091*b>>16)+b}function Ps(b,N,z,Q){var se,de=0,me=i(16);for(se=0;4>se;++se){var ge=b[N+0]+b[N+8],_e=b[N+0]-b[N+8],Ce=(35468*b[N+4]>>16)-cn(b[N+12]),Ve=cn(b[N+4])+(35468*b[N+12]>>16);me[de+0]=ge+Ve,me[de+1]=_e+Ce,me[de+2]=_e-Ce,me[de+3]=ge-Ve,de+=4,N++}for(se=de=0;4>se;++se)ge=(b=me[de+0]+4)+me[de+8],_e=b-me[de+8],Ce=(35468*me[de+4]>>16)-cn(me[de+12]),jn(z,Q,0,0,ge+(Ve=cn(me[de+4])+(35468*me[de+12]>>16))),jn(z,Q,1,0,_e+Ce),jn(z,Q,2,0,_e-Ce),jn(z,Q,3,0,ge-Ve),de++,Q+=32}function Ta(b,N,z,Q){var se=b[N+0]+4,de=35468*b[N+4]>>16,me=cn(b[N+4]),ge=35468*b[N+1]>>16;Hs(z,Q,0,se+me,b=cn(b[N+1]),ge),Hs(z,Q,1,se+de,b,ge),Hs(z,Q,2,se-de,b,ge),Hs(z,Q,3,se-me,b,ge)}function Ko(b,N,z,Q,se){Ps(b,N,z,Q),se&&Ps(b,N+16,z,Q+4)}function Yo(b,N,z,Q){oi(b,N+0,z,Q,1),oi(b,N+32,z,Q+128,1)}function un(b,N,z,Q){var se;for(b=b[N+0]+4,se=0;4>se;++se)for(N=0;4>N;++N)jn(z,Q,N,se,b)}function Il(b,N,z,Q){b[N+0]&&Ol(b,N+0,z,Q),b[N+16]&&Ol(b,N+16,z,Q+4),b[N+32]&&Ol(b,N+32,z,Q+128),b[N+48]&&Ol(b,N+48,z,Q+128+4)}function on(b,N,z,Q){var se,de=i(16);for(se=0;4>se;++se){var me=b[N+0+se]+b[N+12+se],ge=b[N+4+se]+b[N+8+se],_e=b[N+4+se]-b[N+8+se],Ce=b[N+0+se]-b[N+12+se];de[0+se]=me+ge,de[8+se]=me-ge,de[4+se]=Ce+_e,de[12+se]=Ce-_e}for(se=0;4>se;++se)me=(b=de[0+4*se]+3)+de[3+4*se],ge=de[1+4*se]+de[2+4*se],_e=de[1+4*se]-de[2+4*se],Ce=b-de[3+4*se],z[Q+0]=me+ge>>3,z[Q+16]=Ce+_e>>3,z[Q+32]=me-ge>>3,z[Q+48]=Ce-_e>>3,Q+=64}function Ka(b,N,z){var Q,se=N-32,de=eo,me=255-b[se-1];for(Q=0;Q<z;++Q){var ge,_e=de,Ce=me+b[N-1];for(ge=0;ge<z;++ge)b[N+ge]=_e[Ce+b[se+ge]];N+=32}}function wu(b,N){Ka(b,N,4)}function _u(b,N){Ka(b,N,8)}function ph(b,N){Ka(b,N,16)}function mh(b,N){var z;for(z=0;16>z;++z)n(b,N+32*z,b,N-32,16)}function bu(b,N){var z;for(z=16;0<z;--z)s(b,N,b[N-1],16),N+=32}function Pl(b,N,z){var Q;for(Q=0;16>Q;++Q)s(N,z+32*Q,b,16)}function fa(b,N){var z,Q=16;for(z=0;16>z;++z)Q+=b[N-1+32*z]+b[N+z-32];Pl(Q>>5,b,N)}function Li(b,N){var z,Q=8;for(z=0;16>z;++z)Q+=b[N-1+32*z];Pl(Q>>4,b,N)}function pa(b,N){var z,Q=8;for(z=0;16>z;++z)Q+=b[N+z-32];Pl(Q>>4,b,N)}function Ya(b,N){Pl(128,b,N)}function Pr(b,N,z){return b+2*N+z+2>>2}function go(b,N){var z,Q=N-32;for(Q=new Uint8Array([Pr(b[Q-1],b[Q+0],b[Q+1]),Pr(b[Q+0],b[Q+1],b[Q+2]),Pr(b[Q+1],b[Q+2],b[Q+3]),Pr(b[Q+2],b[Q+3],b[Q+4])]),z=0;4>z;++z)n(b,N+32*z,Q,0,Q.length)}function ll(b,N){var z=b[N-1],Q=b[N-1+32],se=b[N-1+64],de=b[N-1+96];Oe(b,N+0,16843009*Pr(b[N-1-32],z,Q)),Oe(b,N+32,16843009*Pr(z,Q,se)),Oe(b,N+64,16843009*Pr(Q,se,de)),Oe(b,N+96,16843009*Pr(se,de,de))}function Gf(b,N){var z,Q=4;for(z=0;4>z;++z)Q+=b[N+z-32]+b[N-1+32*z];for(Q>>=3,z=0;4>z;++z)s(b,N+32*z,Q,4)}function gh(b,N){var z=b[N-1+0],Q=b[N-1+32],se=b[N-1+64],de=b[N-1-32],me=b[N+0-32],ge=b[N+1-32],_e=b[N+2-32],Ce=b[N+3-32];b[N+0+96]=Pr(Q,se,b[N-1+96]),b[N+1+96]=b[N+0+64]=Pr(z,Q,se),b[N+2+96]=b[N+1+64]=b[N+0+32]=Pr(de,z,Q),b[N+3+96]=b[N+2+64]=b[N+1+32]=b[N+0+0]=Pr(me,de,z),b[N+3+64]=b[N+2+32]=b[N+1+0]=Pr(ge,me,de),b[N+3+32]=b[N+2+0]=Pr(_e,ge,me),b[N+3+0]=Pr(Ce,_e,ge)}function Ws(b,N){var z=b[N+1-32],Q=b[N+2-32],se=b[N+3-32],de=b[N+4-32],me=b[N+5-32],ge=b[N+6-32],_e=b[N+7-32];b[N+0+0]=Pr(b[N+0-32],z,Q),b[N+1+0]=b[N+0+32]=Pr(z,Q,se),b[N+2+0]=b[N+1+32]=b[N+0+64]=Pr(Q,se,de),b[N+3+0]=b[N+2+32]=b[N+1+64]=b[N+0+96]=Pr(se,de,me),b[N+3+32]=b[N+2+64]=b[N+1+96]=Pr(de,me,ge),b[N+3+64]=b[N+2+96]=Pr(me,ge,_e),b[N+3+96]=Pr(ge,_e,_e)}function Rl(b,N){var z=b[N-1+0],Q=b[N-1+32],se=b[N-1+64],de=b[N-1-32],me=b[N+0-32],ge=b[N+1-32],_e=b[N+2-32],Ce=b[N+3-32];b[N+0+0]=b[N+1+64]=de+me+1>>1,b[N+1+0]=b[N+2+64]=me+ge+1>>1,b[N+2+0]=b[N+3+64]=ge+_e+1>>1,b[N+3+0]=_e+Ce+1>>1,b[N+0+96]=Pr(se,Q,z),b[N+0+64]=Pr(Q,z,de),b[N+0+32]=b[N+1+96]=Pr(z,de,me),b[N+1+32]=b[N+2+96]=Pr(de,me,ge),b[N+2+32]=b[N+3+96]=Pr(me,ge,_e),b[N+3+32]=Pr(ge,_e,Ce)}function xh(b,N){var z=b[N+0-32],Q=b[N+1-32],se=b[N+2-32],de=b[N+3-32],me=b[N+4-32],ge=b[N+5-32],_e=b[N+6-32],Ce=b[N+7-32];b[N+0+0]=z+Q+1>>1,b[N+1+0]=b[N+0+64]=Q+se+1>>1,b[N+2+0]=b[N+1+64]=se+de+1>>1,b[N+3+0]=b[N+2+64]=de+me+1>>1,b[N+0+32]=Pr(z,Q,se),b[N+1+32]=b[N+0+96]=Pr(Q,se,de),b[N+2+32]=b[N+1+96]=Pr(se,de,me),b[N+3+32]=b[N+2+96]=Pr(de,me,ge),b[N+3+64]=Pr(me,ge,_e),b[N+3+96]=Pr(ge,_e,Ce)}function Ll(b,N){var z=b[N-1+0],Q=b[N-1+32],se=b[N-1+64],de=b[N-1+96];b[N+0+0]=z+Q+1>>1,b[N+2+0]=b[N+0+32]=Q+se+1>>1,b[N+2+32]=b[N+0+64]=se+de+1>>1,b[N+1+0]=Pr(z,Q,se),b[N+3+0]=b[N+1+32]=Pr(Q,se,de),b[N+3+32]=b[N+1+64]=Pr(se,de,de),b[N+3+64]=b[N+2+64]=b[N+0+96]=b[N+1+96]=b[N+2+96]=b[N+3+96]=de}function cl(b,N){var z=b[N-1+0],Q=b[N-1+32],se=b[N-1+64],de=b[N-1+96],me=b[N-1-32],ge=b[N+0-32],_e=b[N+1-32],Ce=b[N+2-32];b[N+0+0]=b[N+2+32]=z+me+1>>1,b[N+0+32]=b[N+2+64]=Q+z+1>>1,b[N+0+64]=b[N+2+96]=se+Q+1>>1,b[N+0+96]=de+se+1>>1,b[N+3+0]=Pr(ge,_e,Ce),b[N+2+0]=Pr(me,ge,_e),b[N+1+0]=b[N+3+32]=Pr(z,me,ge),b[N+1+32]=b[N+3+64]=Pr(Q,z,me),b[N+1+64]=b[N+3+96]=Pr(se,Q,z),b[N+1+96]=Pr(de,se,Q)}function ku(b,N){var z;for(z=0;8>z;++z)n(b,N+32*z,b,N-32,8)}function ma(b,N){var z;for(z=0;8>z;++z)s(b,N,b[N-1],8),N+=32}function Ia(b,N,z){var Q;for(Q=0;8>Q;++Q)s(N,z+32*Q,b,8)}function xo(b,N){var z,Q=8;for(z=0;8>z;++z)Q+=b[N+z-32]+b[N-1+32*z];Ia(Q>>4,b,N)}function ac(b,N){var z,Q=4;for(z=0;8>z;++z)Q+=b[N+z-32];Ia(Q>>3,b,N)}function Zn(b,N){var z,Q=4;for(z=0;8>z;++z)Q+=b[N-1+32*z];Ia(Q>>3,b,N)}function md(b,N){Ia(128,b,N)}function jl(b,N,z){var Q=b[N-z],se=b[N+0],de=3*(se-Q)+hc[1020+b[N-2*z]-b[N+z]],me=kh[112+(de+4>>3)];b[N-z]=eo[255+Q+kh[112+(de+3>>3)]],b[N+0]=eo[255+se-me]}function Xo(b,N,z,Q){var se=b[N+0],de=b[N+z];return hl[255+b[N-2*z]-b[N-z]]>Q||hl[255+de-se]>Q}function oc(b,N,z,Q){return 4*hl[255+b[N-z]-b[N+0]]+hl[255+b[N-2*z]-b[N+z]]<=Q}function lc(b,N,z,Q,se){var de=b[N-3*z],me=b[N-2*z],ge=b[N-z],_e=b[N+0],Ce=b[N+z],Ve=b[N+2*z],nt=b[N+3*z];return 4*hl[255+ge-_e]+hl[255+me-Ce]>Q?0:hl[255+b[N-4*z]-de]<=se&&hl[255+de-me]<=se&&hl[255+me-ge]<=se&&hl[255+nt-Ve]<=se&&hl[255+Ve-Ce]<=se&&hl[255+Ce-_e]<=se}function ga(b,N,z,Q){var se=2*Q+1;for(Q=0;16>Q;++Q)oc(b,N+Q,z,se)&&jl(b,N+Q,z)}function ul(b,N,z,Q){var se=2*Q+1;for(Q=0;16>Q;++Q)oc(b,N+Q*z,1,se)&&jl(b,N+Q*z,1)}function Ji(b,N,z,Q){var se;for(se=3;0<se;--se)ga(b,N+=4*z,z,Q)}function Uc(b,N,z,Q){var se;for(se=3;0<se;--se)ul(b,N+=4,z,Q)}function Zi(b,N,z,Q,se,de,me,ge){for(de=2*de+1;0<se--;){if(lc(b,N,z,de,me))if(Xo(b,N,z,ge))jl(b,N,z);else{var _e=b,Ce=N,Ve=z,nt=_e[Ce-2*Ve],Ne=_e[Ce-Ve],$e=_e[Ce+0],Ze=_e[Ce+Ve],wt=_e[Ce+2*Ve],it=27*(vt=hc[1020+3*($e-Ne)+hc[1020+nt-Ze]])+63>>7,xt=18*vt+63>>7,vt=9*vt+63>>7;_e[Ce-3*Ve]=eo[255+_e[Ce-3*Ve]+vt],_e[Ce-2*Ve]=eo[255+nt+xt],_e[Ce-Ve]=eo[255+Ne+it],_e[Ce+0]=eo[255+$e-it],_e[Ce+Ve]=eo[255+Ze-xt],_e[Ce+2*Ve]=eo[255+wt-vt]}N+=Q}}function ji(b,N,z,Q,se,de,me,ge){for(de=2*de+1;0<se--;){if(lc(b,N,z,de,me))if(Xo(b,N,z,ge))jl(b,N,z);else{var _e=b,Ce=N,Ve=z,nt=_e[Ce-Ve],Ne=_e[Ce+0],$e=_e[Ce+Ve],Ze=kh[112+(4+(wt=3*(Ne-nt))>>3)],wt=kh[112+(wt+3>>3)],it=Ze+1>>1;_e[Ce-2*Ve]=eo[255+_e[Ce-2*Ve]+it],_e[Ce-Ve]=eo[255+nt+wt],_e[Ce+0]=eo[255+Ne-Ze],_e[Ce+Ve]=eo[255+$e-it]}N+=Q}}function B(b,N,z,Q,se,de){Zi(b,N,z,1,16,Q,se,de)}function re(b,N,z,Q,se,de){Zi(b,N,1,z,16,Q,se,de)}function Ae(b,N,z,Q,se,de){var me;for(me=3;0<me;--me)ji(b,N+=4*z,z,1,16,Q,se,de)}function Me(b,N,z,Q,se,de){var me;for(me=3;0<me;--me)ji(b,N+=4,1,z,16,Q,se,de)}function Ge(b,N,z,Q,se,de,me,ge){Zi(b,N,se,1,8,de,me,ge),Zi(z,Q,se,1,8,de,me,ge)}function bt(b,N,z,Q,se,de,me,ge){Zi(b,N,1,se,8,de,me,ge),Zi(z,Q,1,se,8,de,me,ge)}function Nt(b,N,z,Q,se,de,me,ge){ji(b,N+4*se,se,1,8,de,me,ge),ji(z,Q+4*se,se,1,8,de,me,ge)}function tr(b,N,z,Q,se,de,me,ge){ji(b,N+4,1,se,8,de,me,ge),ji(z,Q+4,1,se,8,de,me,ge)}function ar(){this.ba=new Yr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Jr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Nr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Mr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function En(){this.ua=0,this.Wa=new ze,this.vb=new ze,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new fe,this.yc=new V}function xs(){this.xb=this.a=0,this.l=new Qt,this.ca=new Yr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new U,this.Pb=0,this.wd=new U,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new En,this.ab=0,this.gc=a(4,Mr),this.Oc=0}function Cs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Qt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Fn(b,N,z,Q,se,de,me){for(b=b==null?0:b[N+0],N=0;N<me;++N)se[de+N]=b+z[Q+N]&255,b=se[de+N]}function Gs(b,N,z,Q,se,de,me){var ge;if(b==null)Fn(null,null,z,Q,se,de,me);else for(ge=0;ge<me;++ge)se[de+ge]=b[N+ge]+z[Q+ge]&255}function es(b,N,z,Q,se,de,me){if(b==null)Fn(null,null,z,Q,se,de,me);else{var ge,_e=b[N+0],Ce=_e,Ve=_e;for(ge=0;ge<me;++ge)Ce=Ve+(_e=b[N+ge])-Ce,Ve=z[Q+ge]+(-256&Ce?0>Ce?0:255:Ce)&255,Ce=_e,se[de+ge]=Ve}}function xi(b,N,z,Q){var se=N.width,de=N.o;if(e(b!=null&&N!=null),0>z||0>=Q||z+Q>de)return null;if(!b.Cc){if(b.ga==null){var me;if(b.ga=new Cs,(me=b.ga==null)||(me=N.width*N.o,e(b.Gb.length==0),b.Gb=i(me),b.Uc=0,b.Gb==null?me=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,me=1),me=!me),!me){me=b.ga;var ge=b.Fa,_e=b.P,Ce=b.qc,Ve=b.mb,nt=b.nb,Ne=_e+1,$e=Ce-1,Ze=me.l;if(e(ge!=null&&Ve!=null&&N!=null),Ra[0]=null,Ra[1]=Fn,Ra[2]=Gs,Ra[3]=es,me.ca=Ve,me.tb=nt,me.c=N.width,me.i=N.height,e(0<me.c&&0<me.i),1>=Ce)N=0;else if(me.$a=3&ge[_e+0],me.Z=ge[_e+0]>>2&3,me.Lc=ge[_e+0]>>4&3,_e=ge[_e+0]>>6&3,0>me.$a||1<me.$a||4<=me.Z||1<me.Lc||_e)N=0;else if(Ze.put=vr,Ze.ac=gs,Ze.bc=Nn,Ze.ma=me,Ze.width=N.width,Ze.height=N.height,Ze.Da=N.Da,Ze.v=N.v,Ze.va=N.va,Ze.j=N.j,Ze.o=N.o,me.$a)e:{e(me.$a==1),N=tt();t:for(;;){if(N==null){N=0;break e}if(e(me!=null),me.mc=N,N.c=me.c,N.i=me.i,N.l=me.l,N.l.ma=me,N.l.width=me.c,N.l.height=me.i,N.a=0,H(N.m,ge,Ne,$e),!et(me.c,me.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&Se(N.s)?(me.ic=1,ge=N.c*N.i,N.Ta=null,N.Ua=0,N.V=i(ge),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(me.ic=0,N=at(N,me.c)),!N))break t;N=1;break e}me.mc=null,N=0}else N=$e>=me.c*me.i;me=!N}if(me)return null;b.ga.Lc!=1?b.Ga=0:Q=de-z}e(b.ga!=null),e(z+Q<=de);e:{if(N=(ge=b.ga).c,de=ge.l.o,ge.$a==0){if(Ne=b.rc,$e=b.Vc,Ze=b.Fa,_e=b.P+1+z*N,Ce=b.mb,Ve=b.nb+z*N,e(_e<=b.P+b.qc),ge.Z!=0)for(e(Ra[ge.Z]!=null),me=0;me<Q;++me)Ra[ge.Z](Ne,$e,Ze,_e,Ce,Ve,N),Ne=Ce,$e=Ve,Ve+=N,_e+=N;else for(me=0;me<Q;++me)n(Ce,Ve,Ze,_e,N),Ne=Ce,$e=Ve,Ve+=N,_e+=N;b.rc=Ne,b.Vc=$e}else{if(e(ge.mc!=null),N=z+Q,e((me=ge.mc)!=null),e(N<=me.i),me.C>=N)N=1;else if(ge.ic||ii(),ge.ic){ge=me.V,Ne=me.Ba,$e=me.c;var wt=me.i,it=(Ze=1,_e=me.$/$e,Ce=me.$%$e,Ve=me.m,nt=me.s,me.$),xt=$e*wt,vt=$e*N,kt=nt.wc,St=it<vt?ce(nt,Ce,_e):null;e(it<=xt),e(N<=wt),e(Se(nt));t:for(;;){for(;!Ve.h&&it<vt;){if(Ce&kt||(St=ce(nt,Ce,_e)),e(St!=null),ve(Ve),256>(wt=Ln(St.G[0],St.H[0],Ve)))ge[Ne+it]=wt,++it,++Ce>=$e&&(Ce=0,++_e<=N&&!(_e%16)&&Ie(me,_e));else{if(!(280>wt)){Ze=0;break t}wt=Gn(wt-256,Ve);var yr,or=Ln(St.G[4],St.H[4],Ve);if(ve(Ve),!(it>=(or=ln($e,or=Gn(or,Ve)))&&xt-it>=wt)){Ze=0;break t}for(yr=0;yr<wt;++yr)ge[Ne+it+yr]=ge[Ne+it+yr-or];for(it+=wt,Ce+=wt;Ce>=$e;)Ce-=$e,++_e<=N&&!(_e%16)&&Ie(me,_e);it<vt&&Ce&kt&&(St=ce(nt,Ce,_e))}e(Ve.h==J(Ve))}Ie(me,_e>N?N:_e);break t}!Ze||Ve.h&&it<xt?(Ze=0,me.a=Ve.h?5:3):me.$=it,N=Ze}else N=Xe(me,me.V,me.Ba,me.c,me.i,N,Tt);if(!N){Q=0;break e}}z+Q>=de&&(b.Cc=1),Q=1}if(!Q)return null;if(b.Cc&&((Q=b.ga)!=null&&(Q.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+z*se}function dl(b,N,z,Q,se,de){for(;0<se--;){var me,ge=b,_e=N+(z?1:0),Ce=b,Ve=N+(z?0:3);for(me=0;me<Q;++me){var nt=Ce[Ve+4*me];nt!=255&&(nt*=32897,ge[_e+4*me+0]=ge[_e+4*me+0]*nt>>23,ge[_e+4*me+1]=ge[_e+4*me+1]*nt>>23,ge[_e+4*me+2]=ge[_e+4*me+2]*nt>>23)}N+=de}}function Fl(b,N,z,Q,se){for(;0<Q--;){var de;for(de=0;de<z;++de){var me=b[N+2*de+0],ge=15&(Ce=b[N+2*de+1]),_e=4369*ge,Ce=(240&Ce|Ce>>4)*_e>>16;b[N+2*de+0]=(240&me|me>>4)*_e>>16&240|(15&me|me<<4)*_e>>16>>4&15,b[N+2*de+1]=240&Ce|ge}N+=se}}function gd(b,N,z,Q,se,de,me,ge){var _e,Ce,Ve=255;for(Ce=0;Ce<se;++Ce){for(_e=0;_e<Q;++_e){var nt=b[N+_e];de[me+4*_e]=nt,Ve&=nt}N+=z,me+=ge}return Ve!=255}function zc(b,N,z,Q,se){var de;for(de=0;de<se;++de)z[Q+de]=b[N+de]>>8}function ii(){wd=dl,cg=Fl,Xf=gd,ug=zc}function yo(b,N,z){E[b]=function(Q,se,de,me,ge,_e,Ce,Ve,nt,Ne,$e,Ze,wt,it,xt,vt,kt){var St,yr=kt-1>>1,or=ge[_e+0]|Ce[Ve+0]<<16,Qr=nt[Ne+0]|$e[Ze+0]<<16;e(Q!=null);var dr=3*or+Qr+131074>>2;for(N(Q[se+0],255&dr,dr>>16,wt,it),de!=null&&(dr=3*Qr+or+131074>>2,N(de[me+0],255&dr,dr>>16,xt,vt)),St=1;St<=yr;++St){var xn=ge[_e+St]|Ce[Ve+St]<<16,Ys=nt[Ne+St]|$e[Ze+St]<<16,Zr=or+xn+Qr+Ys+524296,lr=Zr+2*(xn+Qr)>>3;dr=lr+or>>1,or=(Zr=Zr+2*(or+Ys)>>3)+xn>>1,N(Q[se+2*St-1],255&dr,dr>>16,wt,it+(2*St-1)*z),N(Q[se+2*St-0],255&or,or>>16,wt,it+(2*St-0)*z),de!=null&&(dr=Zr+Qr>>1,or=lr+Ys>>1,N(de[me+2*St-1],255&dr,dr>>16,xt,vt+(2*St-1)*z),N(de[me+2*St+0],255&or,or>>16,xt,vt+(2*St+0)*z)),or=xn,Qr=Ys}1&kt||(dr=3*or+Qr+131074>>2,N(Q[se+kt-1],255&dr,dr>>16,wt,it+(kt-1)*z),de!=null&&(dr=3*Qr+or+131074>>2,N(de[me+kt-1],255&dr,dr>>16,xt,vt+(kt-1)*z)))}}function Su(){So[Up]=b4,So[Tu]=Iu,So[Ay]=k4,So[Qf]=Ah,So[Jf]=Sd,So[is]=n0,So[zp]=vg,So[Sh]=Iu,So[_d]=Ah,So[Zf]=Sd,So[e0]=n0}function Xa(b){return b&-16384?0>b?0:255:b>>Pu}function k(b,N){return Xa((19077*b>>8)+(26149*N>>8)-14234)}function q(b,N,z){return Xa((19077*b>>8)-(6419*N>>8)-(13320*z>>8)+8708)}function ee(b,N){return Xa((19077*b>>8)+(33050*N>>8)-17685)}function ye(b,N,z,Q,se){Q[se+0]=k(b,z),Q[se+1]=q(b,N,z),Q[se+2]=ee(b,N)}function Je(b,N,z,Q,se){Q[se+0]=ee(b,N),Q[se+1]=q(b,N,z),Q[se+2]=k(b,z)}function gt(b,N,z,Q,se){var de=q(b,N,z);N=de<<3&224|ee(b,N)>>3,Q[se+0]=248&k(b,z)|de>>5,Q[se+1]=N}function Dt(b,N,z,Q,se){var de=240&ee(b,N)|15;Q[se+0]=240&k(b,z)|q(b,N,z)>>4,Q[se+1]=de}function On(b,N,z,Q,se){Q[se+0]=255,ye(b,N,z,Q,se+1)}function Rs(b,N,z,Q,se){Je(b,N,z,Q,se),Q[se+3]=255}function dn(b,N,z,Q,se){ye(b,N,z,Q,se),Q[se+3]=255}function gn(b,N){return 0>b?0:b>N?N:b}function Un(b,N,z){E[b]=function(Q,se,de,me,ge,_e,Ce,Ve,nt){for(var Ne=Ve+(-2&nt)*z;Ve!=Ne;)N(Q[se+0],de[me+0],ge[_e+0],Ce,Ve),N(Q[se+1],de[me+0],ge[_e+0],Ce,Ve+z),se+=2,++me,++_e,Ve+=2*z;1&nt&&N(Q[se+0],de[me+0],ge[_e+0],Ce,Ve)}}function Pa(b,N,z){return z==0?b==0?N==0?6:5:N==0?4:0:z}function xa(b,N,z,Q,se){switch(b>>>30){case 3:oi(N,z,Q,se,0);break;case 2:Fi(N,z,Q,se);break;case 1:Ol(N,z,Q,se)}}function vo(b,N){var z,Q,se=N.M,de=N.Nb,me=b.oc,ge=b.pc+40,_e=b.oc,Ce=b.pc+584,Ve=b.oc,nt=b.pc+600;for(z=0;16>z;++z)me[ge+32*z-1]=129;for(z=0;8>z;++z)_e[Ce+32*z-1]=129,Ve[nt+32*z-1]=129;for(0<se?me[ge-1-32]=_e[Ce-1-32]=Ve[nt-1-32]=129:(s(me,ge-32-1,127,21),s(_e,Ce-32-1,127,9),s(Ve,nt-32-1,127,9)),Q=0;Q<b.za;++Q){var Ne=N.ya[N.aa+Q];if(0<Q){for(z=-1;16>z;++z)n(me,ge+32*z-4,me,ge+32*z+12,4);for(z=-1;8>z;++z)n(_e,Ce+32*z-4,_e,Ce+32*z+4,4),n(Ve,nt+32*z-4,Ve,nt+32*z+4,4)}var $e=b.Gd,Ze=b.Hd+Q,wt=Ne.ad,it=Ne.Hc;if(0<se&&(n(me,ge-32,$e[Ze].y,0,16),n(_e,Ce-32,$e[Ze].f,0,8),n(Ve,nt-32,$e[Ze].ea,0,8)),Ne.Za){var xt=me,vt=ge-32+16;for(0<se&&(Q>=b.za-1?s(xt,vt,$e[Ze].y[15],4):n(xt,vt,$e[Ze+1].y,0,4)),z=0;4>z;z++)xt[vt+128+z]=xt[vt+256+z]=xt[vt+384+z]=xt[vt+0+z];for(z=0;16>z;++z,it<<=2)xt=me,vt=ge+wg[z],fl[Ne.Ob[z]](xt,vt),xa(it,wt,16*+z,xt,vt)}else if(xt=Pa(Q,se,Ne.Ob[0]),to[xt](me,ge),it!=0)for(z=0;16>z;++z,it<<=2)xa(it,wt,16*+z,me,ge+wg[z]);for(z=Ne.Gc,xt=Pa(Q,se,Ne.Dd),ko[xt](_e,Ce),ko[xt](Ve,nt),it=wt,xt=_e,vt=Ce,255&(Ne=0|z)&&(170&Ne?dc(it,256,xt,vt):_h(it,256,xt,vt)),Ne=Ve,it=nt,255&(z>>=8)&&(170&z?dc(wt,320,Ne,it):_h(wt,320,Ne,it)),se<b.Ub-1&&(n($e[Ze].y,0,me,ge+480,16),n($e[Ze].f,0,_e,Ce+224,8),n($e[Ze].ea,0,Ve,nt+224,8)),z=8*de*b.B,$e=b.sa,Ze=b.ta+16*Q+16*de*b.R,wt=b.qa,Ne=b.ra+8*Q+z,it=b.Ha,xt=b.Ia+8*Q+z,z=0;16>z;++z)n($e,Ze+z*b.R,me,ge+32*z,16);for(z=0;8>z;++z)n(wt,Ne+z*b.B,_e,Ce+32*z,8),n(it,xt+z*b.B,Ve,nt+32*z,8)}}function Dl(b,N,z,Q,se,de,me,ge,_e){var Ce=[0],Ve=[0],nt=0,Ne=_e!=null?_e.kd:0,$e=_e??new Nr;if(b==null||12>z)return 7;$e.data=b,$e.w=N,$e.ha=z,N=[N],z=[z],$e.gb=[$e.gb];e:{var Ze=N,wt=z,it=$e.gb;if(e(b!=null),e(wt!=null),e(it!=null),it[0]=0,12<=wt[0]&&!r(b,Ze[0],"RIFF")){if(r(b,Ze[0]+8,"WEBP")){it=3;break e}var xt=Re(b,Ze[0]+4);if(12>xt||4294967286<xt){it=3;break e}if(Ne&&xt>wt[0]-8){it=7;break e}it[0]=xt,Ze[0]+=12,wt[0]-=12}it=0}if(it!=0)return it;for(xt=0<$e.gb[0],z=z[0];;){e:{var vt=b;wt=N,it=z;var kt=Ce,St=Ve,yr=Ze=[0];if((dr=nt=[nt])[0]=0,8>it[0])it=7;else{if(!r(vt,wt[0],"VP8X")){if(Re(vt,wt[0]+4)!=10){it=3;break e}if(18>it[0]){it=7;break e}var or=Re(vt,wt[0]+8),Qr=1+we(vt,wt[0]+12);if(2147483648<=Qr*(vt=1+we(vt,wt[0]+15))){it=3;break e}yr!=null&&(yr[0]=or),kt!=null&&(kt[0]=Qr),St!=null&&(St[0]=vt),wt[0]+=18,it[0]-=18,dr[0]=1}it=0}}if(nt=nt[0],Ze=Ze[0],it!=0)return it;if(wt=!!(2&Ze),!xt&&nt)return 3;if(de!=null&&(de[0]=!!(16&Ze)),me!=null&&(me[0]=wt),ge!=null&&(ge[0]=0),me=Ce[0],Ze=Ve[0],nt&&wt&&_e==null){it=0;break}if(4>z){it=7;break}if(xt&&nt||!xt&&!nt&&!r(b,N[0],"ALPH")){z=[z],$e.na=[$e.na],$e.P=[$e.P],$e.Sa=[$e.Sa];e:{or=b,it=N,xt=z;var dr=$e.gb;kt=$e.na,St=$e.P,yr=$e.Sa,Qr=22,e(or!=null),e(xt!=null),vt=it[0];var xn=xt[0];for(e(kt!=null),e(yr!=null),kt[0]=null,St[0]=null,yr[0]=0;;){if(it[0]=vt,xt[0]=xn,8>xn){it=7;break e}var Ys=Re(or,vt+4);if(4294967286<Ys){it=3;break e}var Zr=8+Ys+1&-2;if(Qr+=Zr,0<dr&&Qr>dr){it=3;break e}if(!r(or,vt,"VP8 ")||!r(or,vt,"VP8L")){it=0;break e}if(xn[0]<Zr){it=7;break e}r(or,vt,"ALPH")||(kt[0]=or,St[0]=vt+8,yr[0]=Ys),vt+=Zr,xn-=Zr}}if(z=z[0],$e.na=$e.na[0],$e.P=$e.P[0],$e.Sa=$e.Sa[0],it!=0)break}z=[z],$e.Ja=[$e.Ja],$e.xa=[$e.xa];e:if(dr=b,it=N,xt=z,kt=$e.gb[0],St=$e.Ja,yr=$e.xa,or=it[0],vt=!r(dr,or,"VP8 "),Qr=!r(dr,or,"VP8L"),e(dr!=null),e(xt!=null),e(St!=null),e(yr!=null),8>xt[0])it=7;else{if(vt||Qr){if(dr=Re(dr,or+4),12<=kt&&dr>kt-12){it=3;break e}if(Ne&&dr>xt[0]-8){it=7;break e}St[0]=dr,it[0]+=8,xt[0]-=8,yr[0]=Qr}else yr[0]=5<=xt[0]&&dr[or+0]==47&&!(dr[or+4]>>5),St[0]=xt[0];it=0}if(z=z[0],$e.Ja=$e.Ja[0],$e.xa=$e.xa[0],N=N[0],it!=0)break;if(4294967286<$e.Ja)return 3;if(ge==null||wt||(ge[0]=$e.xa?2:1),me=[me],Ze=[Ze],$e.xa){if(5>z){it=7;break}ge=me,Ne=Ze,wt=de,b==null||5>z?b=0:5<=z&&b[N+0]==47&&!(b[N+4]>>5)?(xt=[0],dr=[0],kt=[0],H(St=new U,b,N,z),Ri(St,xt,dr,kt)?(ge!=null&&(ge[0]=xt[0]),Ne!=null&&(Ne[0]=dr[0]),wt!=null&&(wt[0]=kt[0]),b=1):b=0):b=0}else{if(10>z){it=7;break}ge=Ze,b==null||10>z||!sn(b,N+3,z-3)?b=0:(Ne=b[N+0]|b[N+1]<<8|b[N+2]<<16,wt=16383&(b[N+7]<<8|b[N+6]),b=16383&(b[N+9]<<8|b[N+8]),1&Ne||3<(Ne>>1&7)||!(Ne>>4&1)||Ne>>5>=$e.Ja||!wt||!b?b=0:(me&&(me[0]=wt),ge&&(ge[0]=b),b=1))}if(!b||(me=me[0],Ze=Ze[0],nt&&(Ce[0]!=me||Ve[0]!=Ze)))return 3;_e!=null&&(_e[0]=$e,_e.offset=N-_e.w,e(4294967286>N-_e.w),e(_e.offset==_e.ha-z));break}return it==0||it==7&&nt&&_e==null?(de!=null&&(de[0]|=$e.na!=null&&0<$e.na.length),Q!=null&&(Q[0]=me),se!=null&&(se[0]=Ze),0):it}function Qa(b,N,z){var Q=N.width,se=N.height,de=0,me=0,ge=Q,_e=se;if(N.Da=b!=null&&0<b.Da,N.Da&&(ge=b.cd,_e=b.bd,de=b.v,me=b.j,11>z||(de&=-2,me&=-2),0>de||0>me||0>=ge||0>=_e||de+ge>Q||me+_e>se))return 0;if(N.v=de,N.j=me,N.va=de+ge,N.o=me+_e,N.U=ge,N.T=_e,N.da=b!=null&&0<b.da,N.da){if(!ot(ge,_e,z=[b.ib],de=[b.hb]))return 0;N.ib=z[0],N.hb=de[0]}return N.ob=b!=null&&b.ob,N.Kb=b==null||!b.Sd,N.da&&(N.ob=N.ib<3*Q/4&&N.hb<3*se/4,N.Kb=0),1}function Ja(b){if(b==null)return 2;if(11>b.S){var N=b.f.RGBA;N.fb+=(b.height-1)*N.A,N.A=-N.A}else N=b.f.kb,b=b.height,N.O+=(b-1)*N.fa,N.fa=-N.fa,N.N+=(b-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(b-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(b-1)*N.lb,N.lb=-N.lb);return 0}function Eu(b,N,z,Q){if(Q==null||0>=b||0>=N)return 2;if(z!=null){if(z.Da){var se=z.cd,de=z.bd,me=-2&z.v,ge=-2&z.j;if(0>me||0>ge||0>=se||0>=de||me+se>b||ge+de>N)return 2;b=se,N=de}if(z.da){if(!ot(b,N,se=[z.ib],de=[z.hb]))return 2;b=se[0],N=de[0]}}Q.width=b,Q.height=N;e:{var _e=Q.width,Ce=Q.height;if(b=Q.S,0>=_e||0>=Ce||!(b>=Up&&13>b))b=2;else{if(0>=Q.Rd&&Q.sd==null){me=de=se=N=0;var Ve=(ge=_e*s0[b])*Ce;if(11>b||(de=(Ce+1)/2*(N=(_e+1)/2),b==12&&(me=(se=_e)*Ce)),(Ce=i(Ve+2*de+me))==null){b=1;break e}Q.sd=Ce,11>b?((_e=Q.f.RGBA).eb=Ce,_e.fb=0,_e.A=ge,_e.size=Ve):((_e=Q.f.kb).y=Ce,_e.O=0,_e.fa=ge,_e.Fd=Ve,_e.f=Ce,_e.N=0+Ve,_e.Ab=N,_e.Cd=de,_e.ea=Ce,_e.W=0+Ve+de,_e.Db=N,_e.Ed=de,b==12&&(_e.F=Ce,_e.J=0+Ve+2*de),_e.Tc=me,_e.lb=se)}if(N=1,se=Q.S,de=Q.width,me=Q.height,se>=Up&&13>se)if(11>se)b=Q.f.RGBA,N&=(ge=Math.abs(b.A))*(me-1)+de<=b.size,N&=ge>=de*s0[se],N&=b.eb!=null;else{b=Q.f.kb,ge=(de+1)/2,Ve=(me+1)/2,_e=Math.abs(b.fa),Ce=Math.abs(b.Ab);var nt=Math.abs(b.Db),Ne=Math.abs(b.lb),$e=Ne*(me-1)+de;N&=_e*(me-1)+de<=b.Fd,N&=Ce*(Ve-1)+ge<=b.Cd,N=(N&=nt*(Ve-1)+ge<=b.Ed)&_e>=de&Ce>=ge&nt>=ge,N&=b.y!=null,N&=b.f!=null,N&=b.ea!=null,se==12&&(N&=Ne>=de,N&=$e<=b.Tc,N&=b.F!=null)}else N=0;b=N?0:2}}return b!=0||z!=null&&z.fd&&(b=Ja(Q)),b}var Za=64,Cu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Kf=24,Au=32,Ks=8,Op=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ut("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(b){return b},E.Predictor2=function(b,N,z){return N[z+0]},E.Predictor3=function(b,N,z){return N[z+1]},E.Predictor4=function(b,N,z){return N[z-1]},E.Predictor5=function(b,N,z){return Et(Et(b,N[z+1]),N[z+0])},E.Predictor6=function(b,N,z){return Et(b,N[z-1])},E.Predictor7=function(b,N,z){return Et(b,N[z+0])},E.Predictor8=function(b,N,z){return Et(N[z-1],N[z+0])},E.Predictor9=function(b,N,z){return Et(N[z+0],N[z+1])},E.Predictor10=function(b,N,z){return Et(Et(b,N[z-1]),Et(N[z+0],N[z+1]))},E.Predictor11=function(b,N,z){var Q=N[z+0];return 0>=Qe(Q>>24&255,b>>24&255,(N=N[z-1])>>24&255)+Qe(Q>>16&255,b>>16&255,N>>16&255)+Qe(Q>>8&255,b>>8&255,N>>8&255)+Qe(255&Q,255&b,255&N)?Q:b},E.Predictor12=function(b,N,z){var Q=N[z+0];return(Le((b>>24&255)+(Q>>24&255)-((N=N[z-1])>>24&255))<<24|Le((b>>16&255)+(Q>>16&255)-(N>>16&255))<<16|Le((b>>8&255)+(Q>>8&255)-(N>>8&255))<<8|Le((255&b)+(255&Q)-(255&N)))>>>0},E.Predictor13=function(b,N,z){var Q=N[z-1];return(Ye((b=Et(b,N[z+0]))>>24&255,Q>>24&255)<<24|Ye(b>>16&255,Q>>16&255)<<16|Ye(b>>8&255,Q>>8&255)<<8|Ye(255&b,255&Q))>>>0};var wo=E.PredictorAdd0;E.PredictorAdd1=le,ut("Predictor2","PredictorAdd2"),ut("Predictor3","PredictorAdd3"),ut("Predictor4","PredictorAdd4"),ut("Predictor5","PredictorAdd5"),ut("Predictor6","PredictorAdd6"),ut("Predictor7","PredictorAdd7"),ut("Predictor8","PredictorAdd8"),ut("Predictor9","PredictorAdd9"),ut("Predictor10","PredictorAdd10"),ut("Predictor11","PredictorAdd11"),ut("Predictor12","PredictorAdd12"),ut("Predictor13","PredictorAdd13");var _o=E.PredictorAdd2;yt("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),yt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var yh,Nu=E.ColorIndexInverseTransform,vh=E.MapARGB,xd=E.VP8LColorIndexInverseTransformAlpha,$c=E.MapAlpha,qc=E.VP8LPredictorsAdd=[];qc.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var cc,wh,bo,uc,ys,vs,ai,oi,Fi,dc,Ol,_h,ag,og,Mp,Ey,Cy,yd,Bp,bh,Vp,lg,Yf,vd,wd,cg,Xf,ug,dg=i(511),hg=i(2041),fg=i(225),pg=i(767),mg=0,hc=hg,kh=fg,eo=pg,hl=dg,Up=0,Tu=1,Ay=2,Qf=3,Jf=4,is=5,zp=6,Sh=7,_d=8,Zf=9,e0=10,t0=[2,3,7],$p=[3,3,11],bd=[280,256,256,256,40],Ny=[0,1,1,1,0],y4=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],v4=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ty=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],qp=8,Eh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],r0=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],kd=null,gg=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],xg=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Iy=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Py=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],w4=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],_4=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],yg=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],to=[],fl=[],ko=[],fc=1,Ch=2,Ra=[],So=[];yo("UpsampleRgbLinePair",ye,3),yo("UpsampleBgrLinePair",Je,3),yo("UpsampleRgbaLinePair",dn,4),yo("UpsampleBgraLinePair",Rs,4),yo("UpsampleArgbLinePair",On,4),yo("UpsampleRgba4444LinePair",Dt,2),yo("UpsampleRgb565LinePair",gt,2);var b4=E.UpsampleRgbLinePair,k4=E.UpsampleBgrLinePair,Iu=E.UpsampleRgbaLinePair,Ah=E.UpsampleBgraLinePair,Sd=E.UpsampleArgbLinePair,n0=E.UpsampleRgba4444LinePair,vg=E.UpsampleRgb565LinePair,Hc=16,Ml=1<<Hc-1,Xn=-227,ts=482,Pu=6,ya=0,Eo=i(256),Ed=i(256),Nh=i(256),Co=i(256),Hp=i(ts-Xn),Ry=i(ts-Xn);Un("YuvToRgbRow",ye,3),Un("YuvToBgrRow",Je,3),Un("YuvToRgbaRow",dn,4),Un("YuvToBgraRow",Rs,4),Un("YuvToArgbRow",On,4),Un("YuvToRgba4444Row",Dt,2),Un("YuvToRgb565Row",gt,2);var wg=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Cd=[0,2,8],Ly=[8,7,6,4,4,2,2,2,1,1,1,1],Wc=1;this.WebPDecodeRGBA=function(b,N,z,Q,se){var de=Tu,me=new ar,ge=new Yr;me.ba=ge,ge.S=de,ge.width=[ge.width],ge.height=[ge.height];var _e=ge.width,Ce=ge.height,Ve=new hr;if(Ve==null||b==null)var nt=2;else e(Ve!=null),nt=Dl(b,N,z,Ve.width,Ve.height,Ve.Pd,Ve.Qd,Ve.format,null);if(nt!=0?_e=0:(_e!=null&&(_e[0]=Ve.width[0]),Ce!=null&&(Ce[0]=Ve.height[0]),_e=1),_e){ge.width=ge.width[0],ge.height=ge.height[0],Q!=null&&(Q[0]=ge.width),se!=null&&(se[0]=ge.height);e:{if(Q=new Qt,(se=new Nr).data=b,se.w=N,se.ha=z,se.kd=1,N=[0],e(se!=null),((b=Dl(se.data,se.w,se.ha,null,null,null,N,null,se))==0||b==7)&&N[0]&&(b=4),(N=b)==0){if(e(me!=null),Q.data=se.data,Q.w=se.w+se.offset,Q.ha=se.ha-se.offset,Q.put=vr,Q.ac=gs,Q.bc=Nn,Q.ma=me,se.xa){if((b=tt())==null){me=1;break e}if((function(Ne,$e){var Ze=[0],wt=[0],it=[0];t:for(;;){if(Ne==null)return 0;if($e==null)return Ne.a=2,0;if(Ne.l=$e,Ne.a=0,H(Ne.m,$e.data,$e.w,$e.ha),!Ri(Ne.m,Ze,wt,it)){Ne.a=3;break t}if(Ne.xb=Ch,$e.width=Ze[0],$e.height=wt[0],!et(Ze[0],wt[0],1,Ne,null))break t;return 1}return e(Ne.a!=0),0})(b,Q)){if(Q=(N=Eu(Q.width,Q.height,me.Oa,me.ba))==0){t:{Q=b;r:for(;;){if(Q==null){Q=0;break t}if(e(Q.s.yc!=null),e(Q.s.Ya!=null),e(0<Q.s.Wb),e((z=Q.l)!=null),e((se=z.ma)!=null),Q.xb!=0){if(Q.ca=se.ba,Q.tb=se.tb,e(Q.ca!=null),!Qa(se.Oa,z,Qf)){Q.a=2;break r}if(!at(Q,z.width)||z.da)break r;if((z.da||Cr(Q.ca.S))&&ii(),11>Q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Q.ca.f.kb.F!=null&&ii()),Q.Pb&&0<Q.s.ua&&Q.s.vb.X==null&&!pe(Q.s.vb,Q.s.Wa.Xa)){Q.a=1;break r}Q.xb=0}if(!Xe(Q,Q.V,Q.Ba,Q.c,Q.i,z.o,be))break r;se.Dc=Q.Ma,Q=1;break t}e(Q.a!=0),Q=0}Q=!Q}Q&&(N=b.a)}else N=b.a}else{if((b=new nr)==null){me=1;break e}if(b.Fa=se.na,b.P=se.P,b.qc=se.Sa,Es(b,Q)){if((N=Eu(Q.width,Q.height,me.Oa,me.ba))==0){if(b.Aa=0,z=me.Oa,e((se=b)!=null),z!=null){if(0<(_e=0>(_e=z.Md)?0:100<_e?255:255*_e/100)){for(Ce=Ve=0;4>Ce;++Ce)12>(nt=se.pb[Ce]).lc&&(nt.ia=_e*Ly[0>nt.lc?0:nt.lc]>>3),Ve|=nt.ia;Ve&&(alert("todo:VP8InitRandom"),se.ia=1)}se.Ga=z.Id,100<se.Ga?se.Ga=100:0>se.Ga&&(se.Ga=0)}(function(Ne,$e){if(Ne==null)return 0;if($e==null)return gr(Ne,2,"NULL VP8Io parameter in VP8Decode().");if(!Ne.cb&&!Es(Ne,$e))return 0;if(e(Ne.cb),$e.ac==null||$e.ac($e)){$e.ob&&(Ne.L=0);var Ze=Cd[Ne.L];if(Ne.L==2?(Ne.yb=0,Ne.zb=0):(Ne.yb=$e.v-Ze>>4,Ne.zb=$e.j-Ze>>4,0>Ne.yb&&(Ne.yb=0),0>Ne.zb&&(Ne.zb=0)),Ne.Va=$e.o+15+Ze>>4,Ne.Hb=$e.va+15+Ze>>4,Ne.Hb>Ne.za&&(Ne.Hb=Ne.za),Ne.Va>Ne.Ub&&(Ne.Va=Ne.Ub),0<Ne.L){var wt=Ne.ed;for(Ze=0;4>Ze;++Ze){var it;if(Ne.Qa.Cb){var xt=Ne.Qa.Lb[Ze];Ne.Qa.Fb||(xt+=wt.Tb)}else xt=wt.Tb;for(it=0;1>=it;++it){var vt=Ne.gd[Ze][it],kt=xt;if(wt.Pc&&(kt+=wt.vd[0],it&&(kt+=wt.od[0])),0<(kt=0>kt?0:63<kt?63:kt)){var St=kt;0<wt.wb&&(St=4<wt.wb?St>>2:St>>1)>9-wt.wb&&(St=9-wt.wb),1>St&&(St=1),vt.dd=St,vt.tc=2*kt+St,vt.ld=40<=kt?2:15<=kt?1:0}else vt.tc=0;vt.La=it}}}Ze=0}else gr(Ne,6,"Frame setup failed"),Ze=Ne.a;if(Ze=Ze==0){if(Ze){Ne.$c=0,0<Ne.Aa||(Ne.Ic=Wc);t:{Ze=Ne.Ic,wt=4*(St=Ne.za);var yr=32*St,or=St+1,Qr=0<Ne.L?St*(0<Ne.Aa?2:1):0,dr=(Ne.Aa==2?2:1)*St;if((vt=wt+832+(it=3*(16*Ze+Cd[Ne.L])/2*yr)+(xt=Ne.Fa!=null&&0<Ne.Fa.length?Ne.Kc.c*Ne.Kc.i:0))!=vt)Ze=0;else{if(vt>Ne.Vb){if(Ne.Vb=0,Ne.Ec=i(vt),Ne.Fc=0,Ne.Ec==null){Ze=gr(Ne,1,"no memory during frame initialization.");break t}Ne.Vb=vt}vt=Ne.Ec,kt=Ne.Fc,Ne.Ac=vt,Ne.Bc=kt,kt+=wt,Ne.Gd=a(yr,Fe),Ne.Hd=0,Ne.rb=a(or+1,kn),Ne.sb=1,Ne.wa=Qr?a(Qr,Ur):null,Ne.Y=0,Ne.D.Nb=0,Ne.D.wa=Ne.wa,Ne.D.Y=Ne.Y,0<Ne.Aa&&(Ne.D.Y+=St),e(!0),Ne.oc=vt,Ne.pc=kt,kt+=832,Ne.ya=a(dr,Na),Ne.aa=0,Ne.D.ya=Ne.ya,Ne.D.aa=Ne.aa,Ne.Aa==2&&(Ne.D.aa+=St),Ne.R=16*St,Ne.B=8*St,St=(yr=Cd[Ne.L])*Ne.R,yr=yr/2*Ne.B,Ne.sa=vt,Ne.ta=kt+St,Ne.qa=Ne.sa,Ne.ra=Ne.ta+16*Ze*Ne.R+yr,Ne.Ha=Ne.qa,Ne.Ia=Ne.ra+8*Ze*Ne.B+yr,Ne.$c=0,kt+=it,Ne.mb=xt?vt:null,Ne.nb=xt?kt:null,e(kt+xt<=Ne.Fc+Ne.Vb),Sn(Ne),s(Ne.Ac,Ne.Bc,0,wt),Ze=1}}if(Ze){if($e.ka=0,$e.y=Ne.sa,$e.O=Ne.ta,$e.f=Ne.qa,$e.N=Ne.ra,$e.ea=Ne.Ha,$e.Vd=Ne.Ia,$e.fa=Ne.R,$e.Rc=Ne.B,$e.F=null,$e.J=0,!mg){for(Ze=-255;255>=Ze;++Ze)dg[255+Ze]=0>Ze?-Ze:Ze;for(Ze=-1020;1020>=Ze;++Ze)hg[1020+Ze]=-128>Ze?-128:127<Ze?127:Ze;for(Ze=-112;112>=Ze;++Ze)fg[112+Ze]=-16>Ze?-16:15<Ze?15:Ze;for(Ze=-255;510>=Ze;++Ze)pg[255+Ze]=0>Ze?0:255<Ze?255:Ze;mg=1}ai=on,oi=Ko,dc=Yo,Ol=un,_h=Il,Fi=Ta,ag=B,og=re,Mp=Ge,Ey=bt,Cy=Ae,yd=Me,Bp=Nt,bh=tr,Vp=ga,lg=ul,Yf=Ji,vd=Uc,fl[0]=Gf,fl[1]=wu,fl[2]=go,fl[3]=ll,fl[4]=gh,fl[5]=Rl,fl[6]=Ws,fl[7]=xh,fl[8]=cl,fl[9]=Ll,to[0]=fa,to[1]=ph,to[2]=mh,to[3]=bu,to[4]=Li,to[5]=pa,to[6]=Ya,ko[0]=xo,ko[1]=_u,ko[2]=ku,ko[3]=ma,ko[4]=Zn,ko[5]=ac,ko[6]=md,Ze=1}else Ze=0}Ze&&(Ze=(function(xn,Ys){for(xn.M=0;xn.M<xn.Va;++xn.M){var Zr,lr=xn.Jc[xn.M&xn.Xb],Kt=xn.m,li=xn;for(Zr=0;Zr<li.za;++Zr){var Br=Kt,hn=li,ws=hn.Ac,ea=hn.Bc+4*Zr,yi=hn.zc,Os=hn.ya[hn.aa+Zr];if(hn.Qa.Bb?Os.$b=Ee(Br,hn.Pa.jb[0])?2+Ee(Br,hn.Pa.jb[2]):Ee(Br,hn.Pa.jb[1]):Os.$b=0,hn.kc&&(Os.Ad=Ee(Br,hn.Bd)),Os.Za=!Ee(Br,145)+0,Os.Za){var Di=Os.Ob,ta=0;for(hn=0;4>hn;++hn){var Ls,Cn=yi[0+hn];for(Ls=0;4>Ls;++Ls){Cn=w4[ws[ea+Ls]][Cn];for(var zn=Iy[Ee(Br,Cn[0])];0<zn;)zn=Iy[2*zn+Ee(Br,Cn[zn])];Cn=-zn,ws[ea+Ls]=Cn}n(Di,ta,ws,ea,4),ta+=4,yi[0+hn]=Cn}}else Cn=Ee(Br,156)?Ee(Br,128)?1:3:Ee(Br,163)?2:0,Os.Ob[0]=Cn,s(ws,ea,Cn,4),s(yi,0,Cn,4);Os.Dd=Ee(Br,142)?Ee(Br,114)?Ee(Br,183)?1:3:2:0}if(li.m.Ka)return gr(xn,7,"Premature end-of-partition0 encountered.");for(;xn.ja<xn.za;++xn.ja){if(li=lr,Br=(Kt=xn).rb[Kt.sb-1],ws=Kt.rb[Kt.sb+Kt.ja],Zr=Kt.ya[Kt.aa+Kt.ja],ea=Kt.kc?Zr.Ad:0)Br.la=ws.la=0,Zr.Za||(Br.Na=ws.Na=0),Zr.Hc=0,Zr.Gc=0,Zr.ia=0;else{var js,$n;if(Br=ws,ws=li,ea=Kt.Pa.Xc,yi=Kt.ya[Kt.aa+Kt.ja],Os=Kt.pb[yi.$b],hn=yi.ad,Di=0,ta=Kt.rb[Kt.sb-1],Cn=Ls=0,s(hn,Di,0,384),yi.Za)var Xs=0,Qs=ea[3];else{zn=i(16);var as=Br.Na+ta.Na;if(as=kd(ws,ea[1],as,Os.Eb,0,zn,0),Br.Na=ta.Na=(0<as)+0,1<as)ai(zn,0,hn,Di);else{var La=zn[0]+3>>3;for(zn=0;256>zn;zn+=16)hn[Di+zn]=La}Xs=1,Qs=ea[0]}var rs=15&Br.la,os=15&ta.la;for(zn=0;4>zn;++zn){var vi=1&os;for(La=$n=0;4>La;++La)rs=rs>>1|(vi=(as=kd(ws,Qs,as=vi+(1&rs),Os.Sc,Xs,hn,Di))>Xs)<<7,$n=$n<<2|(3<as?3:1<as?2:hn[Di+0]!=0),Di+=16;rs>>=4,os=os>>1|vi<<7,Ls=(Ls<<8|$n)>>>0}for(Qs=rs,Xs=os>>4,js=0;4>js;js+=2){for($n=0,rs=Br.la>>4+js,os=ta.la>>4+js,zn=0;2>zn;++zn){for(vi=1&os,La=0;2>La;++La)as=vi+(1&rs),rs=rs>>1|(vi=0<(as=kd(ws,ea[2],as,Os.Qc,0,hn,Di)))<<3,$n=$n<<2|(3<as?3:1<as?2:hn[Di+0]!=0),Di+=16;rs>>=2,os=os>>1|vi<<5}Cn|=$n<<4*js,Qs|=rs<<4<<js,Xs|=(240&os)<<js}Br.la=Qs,ta.la=Xs,yi.Hc=Ls,yi.Gc=Cn,yi.ia=43690&Cn?0:Os.ia,ea=!(Ls|Cn)}if(0<Kt.L&&(Kt.wa[Kt.Y+Kt.ja]=Kt.gd[Zr.$b][Zr.Za],Kt.wa[Kt.Y+Kt.ja].La|=!ea),li.Ka)return gr(xn,7,"Premature end-of-file encountered.")}if(Sn(xn),Kt=Ys,li=1,Zr=(lr=xn).D,Br=0<lr.L&&lr.M>=lr.zb&&lr.M<=lr.Va,lr.Aa==0)t:{if(Zr.M=lr.M,Zr.uc=Br,vo(lr,Zr),li=1,Zr=($n=lr.D).Nb,Br=(Cn=Cd[lr.L])*lr.R,ws=Cn/2*lr.B,zn=16*Zr*lr.R,La=8*Zr*lr.B,ea=lr.sa,yi=lr.ta-Br+zn,Os=lr.qa,hn=lr.ra-ws+La,Di=lr.Ha,ta=lr.Ia-ws+La,os=(rs=$n.M)==0,Ls=rs>=lr.Va-1,lr.Aa==2&&vo(lr,$n),$n.uc)for(vi=(as=lr).D.M,e(as.D.uc),$n=as.yb;$n<as.Hb;++$n){Xs=$n,Qs=vi;var va=(Ao=(di=as).D).Nb;js=di.R;var Ao=Ao.wa[Ao.Y+Xs],ci=di.sa,ui=di.ta+16*va*js+16*Xs,ja=Ao.dd,ls=Ao.tc;if(ls!=0)if(e(3<=ls),di.L==1)0<Xs&&lg(ci,ui,js,ls+4),Ao.La&&vd(ci,ui,js,ls),0<Qs&&Vp(ci,ui,js,ls+4),Ao.La&&Yf(ci,ui,js,ls);else{var Fa=di.B,pl=di.qa,Bl=di.ra+8*va*Fa+8*Xs,ra=di.Ha,di=di.Ia+8*va*Fa+8*Xs;va=Ao.ld,0<Xs&&(og(ci,ui,js,ls+4,ja,va),Ey(pl,Bl,ra,di,Fa,ls+4,ja,va)),Ao.La&&(yd(ci,ui,js,ls,ja,va),bh(pl,Bl,ra,di,Fa,ls,ja,va)),0<Qs&&(ag(ci,ui,js,ls+4,ja,va),Mp(pl,Bl,ra,di,Fa,ls+4,ja,va)),Ao.La&&(Cy(ci,ui,js,ls,ja,va),Bp(pl,Bl,ra,di,Fa,ls,ja,va))}}if(lr.ia&&alert("todo:DitherRow"),Kt.put!=null){if($n=16*rs,rs=16*(rs+1),os?(Kt.y=lr.sa,Kt.O=lr.ta+zn,Kt.f=lr.qa,Kt.N=lr.ra+La,Kt.ea=lr.Ha,Kt.W=lr.Ia+La):($n-=Cn,Kt.y=ea,Kt.O=yi,Kt.f=Os,Kt.N=hn,Kt.ea=Di,Kt.W=ta),Ls||(rs-=Cn),rs>Kt.o&&(rs=Kt.o),Kt.F=null,Kt.J=null,lr.Fa!=null&&0<lr.Fa.length&&$n<rs&&(Kt.J=xi(lr,Kt,$n,rs-$n),Kt.F=lr.mb,Kt.F==null&&Kt.F.length==0)){li=gr(lr,3,"Could not decode alpha data.");break t}$n<Kt.j&&(Cn=Kt.j-$n,$n=Kt.j,e(!(1&Cn)),Kt.O+=lr.R*Cn,Kt.N+=lr.B*(Cn>>1),Kt.W+=lr.B*(Cn>>1),Kt.F!=null&&(Kt.J+=Kt.width*Cn)),$n<rs&&(Kt.O+=Kt.v,Kt.N+=Kt.v>>1,Kt.W+=Kt.v>>1,Kt.F!=null&&(Kt.J+=Kt.v),Kt.ka=$n-Kt.j,Kt.U=Kt.va-Kt.v,Kt.T=rs-$n,li=Kt.put(Kt))}Zr+1!=lr.Ic||Ls||(n(lr.sa,lr.ta-Br,ea,yi+16*lr.R,Br),n(lr.qa,lr.ra-ws,Os,hn+8*lr.B,ws),n(lr.Ha,lr.Ia-ws,Di,ta+8*lr.B,ws))}if(!li)return gr(xn,6,"Output aborted.")}return 1})(Ne,$e)),$e.bc!=null&&$e.bc($e),Ze&=1}return Ze?(Ne.cb=0,Ze):0})(b,Q)||(N=b.a)}}else N=b.a}N==0&&me.Oa!=null&&me.Oa.fd&&(N=Ja(me.ba))}me=N}de=me!=0?null:11>de?ge.f.RGBA.eb:ge.f.kb.y}else de=null;return de};var s0=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(E,D){for(var R="",F=0;F<4;F++)R+=String.fromCharCode(E[D++]);return R}function d(E,D){return E[D+0]|E[D+1]<<8}function p(E,D){return(E[D+0]|E[D+1]<<8|E[D+2]<<16)>>>0}function g(E,D){return(E[D+0]|E[D+1]<<8|E[D+2]<<16|E[D+3]<<24)>>>0}new l;var m=[0],y=[0],w=[],_=new l,S=t,T=(function(E,D){var R={},F=0,V=!1,Z=0,fe=0;if(R.frames=[],!(function(P,U){for(var X=0;X<4;X++)if(P[U+X]!="RIFF".charCodeAt(X))return!0;return!1})(E,D)){for(g(E,D+=4),D+=8;D<E.length;){var xe=c(E,D),he=g(E,D+=4);D+=4;var ae=he+(1&he);switch(xe){case"VP8 ":case"VP8L":R.frames[F]===void 0&&(R.frames[F]={}),(G=R.frames[F]).src_off=V?fe:D-8,G.src_size=Z+he+8,F++,V&&(V=!1,Z=0,fe=0);break;case"VP8X":(G=R.header={}).feature_flags=E[D];var H=D+4;G.canvas_width=1+p(E,H),H+=3,G.canvas_height=1+p(E,H),H+=3;break;case"ALPH":V=!0,Z=ae+8,fe=D-8;break;case"ANIM":(G=R.header).bgcolor=g(E,D),H=D+4,G.loop_count=d(E,H),H+=2;break;case"ANMF":var te,G;(G=R.frames[F]={}).offset_x=2*p(E,D),D+=3,G.offset_y=2*p(E,D),D+=3,G.width=1+p(E,D),D+=3,G.height=1+p(E,D),D+=3,G.duration=p(E,D),D+=3,te=E[D++],G.dispose=1&te,G.blend=te>>1&1}xe!="ANMF"&&(D+=ae)}return R}})(S,0);T.response=S,T.rgbaoutput=!0,T.dataurl=!1;var I=T.header?T.header:null,M=T.frames?T.frames:null;if(I){I.loop_counter=I.loop_count,m=[I.canvas_height],y=[I.canvas_width];for(var K=0;K<M.length&&M[K].blend!=0;K++);}var W=M[0],L=_.WebPDecodeRGBA(S,W.src_off,W.src_size,y,m);W.rgba=L,W.imgwidth=y[0],W.imgheight=m[0];for(var A=0;A<y[0]*m[0]*4;A++)w[A]=L[A];return this.width=y,this.height=m,this.data=w,this}(function(t){var e,r,n,s,i,a,o,l,c,d=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new l,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new a,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new a,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var p=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=P;Object.defineProperty(this,"pdf",{get:function(){return U}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Re){X=!!Re}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(Re){J=!!Re}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(Re){isNaN(Re)||(ie=Re)}});var ve=0;Object.defineProperty(this,"posY",{get:function(){return ve},set:function(Re){isNaN(Re)||(ve=Re)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Re){var pe;typeof Re=="number"?pe=[Re,Re,Re,Re]:((pe=new Array(4))[0]=Re[0],pe[1]=Re.length>=2?Re[1]:pe[0],pe[2]=Re.length>=3?Re[2]:pe[0],pe[3]=Re.length>=4?Re[3]:pe[1]),c.margin=pe}});var ke=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ke},set:function(Re){ke=Re}});var oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return oe},set:function(Re){oe=Re}});var Ee=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ee},set:function(Re){Ee=Re}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Re){Re instanceof d&&(c=Re)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Re){c.path=Re}});var Oe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Oe},set:function(Re){Oe=Re}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Re){var pe;pe=g(Re),this.ctx.fillStyle=pe.style,this.ctx.isFillTransparent=pe.a===0,this.ctx.fillOpacity=pe.a,this.pdf.setFillColor(pe.r,pe.g,pe.b,{a:pe.a}),this.pdf.setTextColor(pe.r,pe.g,pe.b,{a:pe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Re){var pe=g(Re);this.ctx.strokeStyle=pe.style,this.ctx.isStrokeTransparent=pe.a===0,this.ctx.strokeOpacity=pe.a,pe.a===0?this.pdf.setDrawColor(255,255,255):(pe.a,this.pdf.setDrawColor(pe.r,pe.g,pe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Re){["butt","round","square"].indexOf(Re)!==-1&&(this.ctx.lineCap=Re,this.pdf.setLineCap(Re))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Re){isNaN(Re)||(this.ctx.lineWidth=Re,this.pdf.setLineWidth(Re))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Re){["bevel","round","miter"].indexOf(Re)!==-1&&(this.ctx.lineJoin=Re,this.pdf.setLineJoin(Re))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Re){isNaN(Re)||(this.ctx.miterLimit=Re,this.pdf.setMiterLimit(Re))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Re){this.ctx.textBaseline=Re}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Re){["right","end","center","left","start"].indexOf(Re)!==-1&&(this.ctx.textAlign=Re)}});var ne=null,we=null;Object.defineProperty(this,"fontFaces",{get:function(){return we},set:function(Re){ne=null,we=Re}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Re){var pe;if(this.ctx.font=Re,(pe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Re))!==null){var Ke=pe[1];pe[2];var ze=pe[3],ot=pe[4];pe[5];var Be=pe[6],He=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ot)[2];ot=Math.floor(He==="px"?parseFloat(ot)*this.pdf.internal.scaleFactor:He==="em"?parseFloat(ot)*this.pdf.getFontSize():parseFloat(ot)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ot);var ut=(function(lt){var yt,$t,Xt=[],At=lt.trim();if(At==="")return fb;if(At in ZI)return[ZI[At]];for(;At!=="";){switch($t=null,yt=(At=tP(At)).charAt(0)){case'"':case"'":$t=wxe(At.substring(1),yt);break;default:$t=_xe(At)}if($t===null||(Xt.push($t[0]),(At=tP($t[1]))!==""&&At.charAt(0)!==","))return fb;At=At.replace(/^,/,"")}return Xt})(Be);if(this.fontFaces){var Ct=(function(lt,yt){if(ne===null){var $t=(function(Xt){var At=[];return Object.keys(Xt).forEach(function(Vt){Xt[Vt].forEach(function(Or){var rr=null;switch(Or){case"bold":rr={family:Vt,weight:"bold"};break;case"italic":rr={family:Vt,style:"italic"};break;case"bolditalic":rr={family:Vt,weight:"bold",style:"italic"};break;case"":case"normal":rr={family:Vt}}rr!==null&&(rr.ref={name:Vt,style:Or},At.push(rr))})}),At})(lt.getFontList());ne=(function(Xt){for(var At={},Vt=0;Vt<Xt.length;++Vt){var Or=hb(Xt[Vt]),rr=Or.family,Sr=Or.stretch,Cr=Or.style,Bn=Or.weight;At[rr]=At[rr]||{},At[rr][Sr]=At[rr][Sr]||{},At[rr][Sr][Cr]=At[rr][Sr][Cr]||{},At[rr][Sr][Cr][Bn]=Or}return At})($t.concat(yt))}return ne})(this.pdf,this.fontFaces),Et=ut.map(function(lt){return{family:lt,stretch:"normal",weight:ze,style:Ke}}),Le=(function(lt,yt,$t){for(var Xt=($t=$t||{}).defaultFontFamily||"times",At=Object.assign({},vxe,$t.genericFontFamilies||{}),Vt=null,Or=null,rr=0;rr<yt.length;++rr)if(At[(Vt=hb(yt[rr])).family]&&(Vt.family=At[Vt.family]),lt.hasOwnProperty(Vt.family)){Or=lt[Vt.family];break}if(!(Or=Or||lt[Xt]))throw new Error("Could not find a font-family for the rule '"+eP(Vt)+"' and default family '"+Xt+"'.");if(Or=(function(Sr,Cr){if(Cr[Sr])return Cr[Sr];var Bn=pk[Sr],bn=Bn<=pk.normal?-1:1,Yr=JI(Cr,uz,Bn,bn);if(!Yr)throw new Error("Could not find a matching font-stretch value for "+Sr);return Yr})(Vt.stretch,Or),Or=(function(Sr,Cr){if(Cr[Sr])return Cr[Sr];for(var Bn=cz[Sr],bn=0;bn<Bn.length;++bn)if(Cr[Bn[bn]])return Cr[Bn[bn]];throw new Error("Could not find a matching font-style for "+Sr)})(Vt.style,Or),!(Or=(function(Sr,Cr){if(Cr[Sr])return Cr[Sr];if(Sr===400&&Cr[500])return Cr[500];if(Sr===500&&Cr[400])return Cr[400];var Bn=yxe[Sr],bn=JI(Cr,dz,Bn,Sr<400?-1:1);if(!bn)throw new Error("Could not find a matching font-weight for value "+Sr);return bn})(Vt.weight,Or)))throw new Error("Failed to resolve a font for the rule '"+eP(Vt)+"'.");return Or})(Ct,Et);this.pdf.setFont(Le.ref.name,Le.ref.style)}else{var Ye="";(ze==="bold"||parseInt(ze,10)>=700||Ke==="bold")&&(Ye="bold"),Ke==="italic"&&(Ye+="italic"),Ye.length===0&&(Ye="normal");for(var Qe="",le={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},je=0;je<ut.length;je++){if(this.pdf.internal.getFont(ut[je],Ye,{noFallback:!0,disableWarning:!0})!==void 0){Qe=ut[je];break}if(Ye==="bolditalic"&&this.pdf.internal.getFont(ut[je],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Qe=ut[je],Ye="bold";else if(this.pdf.internal.getFont(ut[je],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Qe=ut[je],Ye="normal";break}}if(Qe===""){for(var We=0;We<ut.length;We++)if(le[ut[We]]){Qe=le[ut[We]];break}}Qe=Qe===""?"Times":Qe,this.pdf.setFont(Qe,Ye)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Re){this.ctx.globalCompositeOperation=Re}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Re){this.ctx.globalAlpha=Re}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Re){this.ctx.lineDashOffset=Re,G.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Re){this.ctx.lineDash=Re,G.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Re){this.ctx.ignoreClearRect=!!Re}})};p.prototype.setLineDash=function(P){this.lineDash=P},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){M.call(this,"fill",!1)},p.prototype.stroke=function(){M.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(P,U){if(isNaN(P)||isNaN(U))throw Ns.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new a(P,U));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new a(P,U)},p.prototype.closePath=function(){var P=new a(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&hs(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){P=new a(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(P.x,P.y)},p.prototype.lineTo=function(P,U){if(isNaN(P)||isNaN(U))throw Ns.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new a(P,U));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new a(X.x,X.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),M.call(this,null,!0)},p.prototype.quadraticCurveTo=function(P,U,X,J){if(isNaN(X)||isNaN(J)||isNaN(P)||isNaN(U))throw Ns.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new a(X,J)),ve=this.ctx.transform.applyToPoint(new a(P,U));this.path.push({type:"qct",x1:ve.x,y1:ve.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new a(ie.x,ie.y)},p.prototype.bezierCurveTo=function(P,U,X,J,ie,ve){if(isNaN(ie)||isNaN(ve)||isNaN(P)||isNaN(U)||isNaN(X)||isNaN(J))throw Ns.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ke=this.ctx.transform.applyToPoint(new a(ie,ve)),oe=this.ctx.transform.applyToPoint(new a(P,U)),Ee=this.ctx.transform.applyToPoint(new a(X,J));this.path.push({type:"bct",x1:oe.x,y1:oe.y,x2:Ee.x,y2:Ee.y,x:ke.x,y:ke.y}),this.ctx.lastPoint=new a(ke.x,ke.y)},p.prototype.arc=function(P,U,X,J,ie,ve){if(isNaN(P)||isNaN(U)||isNaN(X)||isNaN(J)||isNaN(ie))throw Ns.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ve=!!ve,!this.ctx.transform.isIdentity){var ke=this.ctx.transform.applyToPoint(new a(P,U));P=ke.x,U=ke.y;var oe=this.ctx.transform.applyToPoint(new a(0,X)),Ee=this.ctx.transform.applyToPoint(new a(0,0));X=Math.sqrt(Math.pow(oe.x-Ee.x,2)+Math.pow(oe.y-Ee.y,2))}Math.abs(ie-J)>=2*Math.PI&&(J=0,ie=2*Math.PI),this.path.push({type:"arc",x:P,y:U,radius:X,startAngle:J,endAngle:ie,counterclockwise:ve})},p.prototype.arcTo=function(P,U,X,J,ie){throw new Error("arcTo not implemented.")},p.prototype.rect=function(P,U,X,J){if(isNaN(P)||isNaN(U)||isNaN(X)||isNaN(J))throw Ns.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,U),this.lineTo(P+X,U),this.lineTo(P+X,U+J),this.lineTo(P,U+J),this.lineTo(P,U),this.lineTo(P+X,U),this.lineTo(P,U)},p.prototype.fillRect=function(P,U,X,J){if(isNaN(P)||isNaN(U)||isNaN(X)||isNaN(J))throw Ns.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,U,X,J),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},p.prototype.strokeRect=function(P,U,X,J){if(isNaN(P)||isNaN(U)||isNaN(X)||isNaN(J))throw Ns.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(P,U,X,J),this.stroke())},p.prototype.clearRect=function(P,U,X,J){if(isNaN(P)||isNaN(U)||isNaN(X)||isNaN(J))throw Ns.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,U,X,J))},p.prototype.save=function(P){P=typeof P!="boolean"||P;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},p.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(U),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(P){var U,X,J,ie;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))U=0,X=0,J=0,ie=0;else{var ve=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(ve!==null)U=parseInt(ve[1]),X=parseInt(ve[2]),J=parseInt(ve[3]),ie=1;else if((ve=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)U=parseInt(ve[1]),X=parseInt(ve[2]),J=parseInt(ve[3]),ie=parseFloat(ve[4]);else{if(ie=1,typeof P=="string"&&P.charAt(0)!=="#"){var ke=new rz(P);P=ke.ok?ke.toHex():"#000000"}P.length===4?(U=P.substring(1,2),U+=U,X=P.substring(2,3),X+=X,J=P.substring(3,4),J+=J):(U=P.substring(1,3),X=P.substring(3,5),J=P.substring(5,7)),U=parseInt(U,16),X=parseInt(X,16),J=parseInt(J,16)}}return{r:U,g:X,b:J,a:ie,style:P}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(P,U,X,J){if(isNaN(U)||isNaN(X)||typeof P!="string")throw Ns.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!m.call(this)){var ie=ae(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;F.call(this,{text:P,x:U,y:X,scale:ve,angle:ie,align:this.textAlign,maxWidth:J})}},p.prototype.strokeText=function(P,U,X,J){if(isNaN(U)||isNaN(X)||typeof P!="string")throw Ns.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){J=isNaN(J)?void 0:J;var ie=ae(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;F.call(this,{text:P,x:U,y:X,scale:ve,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:J})}},p.prototype.measureText=function(P){if(typeof P!="string")throw Ns.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,X=this.pdf.internal.scaleFactor,J=U.internal.getFontSize(),ie=U.getStringUnitWidth(P)*J/U.internal.scaleFactor;return new function(ve){var ke=(ve=ve||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ke}}),this}({width:ie*=Math.round(96*X/72*1e4)/1e4})},p.prototype.scale=function(P,U){if(isNaN(P)||isNaN(U))throw Ns.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new l(P,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},p.prototype.rotate=function(P){if(isNaN(P))throw Ns.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new l(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},p.prototype.translate=function(P,U){if(isNaN(P)||isNaN(U))throw Ns.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new l(1,0,0,1,P,U);this.ctx.transform=this.ctx.transform.multiply(X)},p.prototype.transform=function(P,U,X,J,ie,ve){if(isNaN(P)||isNaN(U)||isNaN(X)||isNaN(J)||isNaN(ie)||isNaN(ve))throw Ns.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ke=new l(P,U,X,J,ie,ve);this.ctx.transform=this.ctx.transform.multiply(ke)},p.prototype.setTransform=function(P,U,X,J,ie,ve){P=isNaN(P)?1:P,U=isNaN(U)?0:U,X=isNaN(X)?0:X,J=isNaN(J)?1:J,ie=isNaN(ie)?0:ie,ve=isNaN(ve)?0:ve,this.ctx.transform=new l(P,U,X,J,ie,ve)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(P,U,X,J,ie,ve,ke,oe,Ee){var Oe=this.pdf.getImageProperties(P),ne=1,we=1,Re=1,pe=1;J!==void 0&&oe!==void 0&&(Re=oe/J,pe=Ee/ie,ne=Oe.width/J*oe/J,we=Oe.height/ie*Ee/ie),ve===void 0&&(ve=U,ke=X,U=0,X=0),J!==void 0&&oe===void 0&&(oe=J,Ee=ie),J===void 0&&oe===void 0&&(oe=Oe.width,Ee=Oe.height);for(var Ke,ze=this.ctx.transform.decompose(),ot=ae(ze.rotate.shx),Be=new l,He=(Be=(Be=(Be=Be.multiply(ze.translate)).multiply(ze.skew)).multiply(ze.scale)).applyToRectangle(new o(ve-U*Re,ke-X*pe,J*ne,ie*we)),ut=_.call(this,He),Ct=[],Et=0;Et<ut.length;Et+=1)Ct.indexOf(ut[Et])===-1&&Ct.push(ut[Et]);if(I(Ct),this.autoPaging)for(var Le=Ct[0],Ye=Ct[Ct.length-1],Qe=Le;Qe<Ye+1;Qe++){this.pdf.setPage(Qe);var le=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],je=Qe===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],yt=Qe===1?0:We+(Qe-2)*lt;if(this.ctx.clip_path.length!==0){var $t=this.path;Ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(Ke,this.posX+this.margin[3],-yt+je+this.ctx.prevPageLastElemOffset),K.call(this,"fill",!0),this.path=$t}var Xt=JSON.parse(JSON.stringify(He));Xt=T([Xt],this.posX+this.margin[3],-yt+je+this.ctx.prevPageLastElemOffset)[0];var At=(Qe>Le||Qe<Ye)&&w.call(this);At&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],le,lt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",Xt.x,Xt.y,Xt.w,Xt.h,null,null,ot),At&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",He.x,He.y,He.w,He.h,null,null,ot)};var _=function(P,U,X){var J=[];U=U||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":J.push(Math.floor((P.y+ie)/X)+1);break;case"arc":J.push(Math.floor((P.y+ie-P.radius)/X)+1),J.push(Math.floor((P.y+ie+P.radius)/X)+1);break;case"qct":var ve=H(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);J.push(Math.floor((ve.y+ie)/X)+1),J.push(Math.floor((ve.y+ve.h+ie)/X)+1);break;case"bct":var ke=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);J.push(Math.floor((ke.y+ie)/X)+1),J.push(Math.floor((ke.y+ke.h+ie)/X)+1);break;case"rect":J.push(Math.floor((P.y+ie)/X)+1),J.push(Math.floor((P.y+P.h+ie)/X)+1)}for(var oe=0;oe<J.length;oe+=1)for(;this.pdf.internal.getNumberOfPages()<J[oe];)S.call(this);return J},S=function(){var P=this.fillStyle,U=this.strokeStyle,X=this.font,J=this.lineCap,ie=this.lineWidth,ve=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=U,this.font=X,this.lineCap=J,this.lineWidth=ie,this.lineJoin=ve},T=function(P,U,X){for(var J=0;J<P.length;J++)switch(P[J].type){case"bct":P[J].x2+=U,P[J].y2+=X;case"qct":P[J].x1+=U,P[J].y1+=X;default:P[J].x+=U,P[J].y+=X}return P},I=function(P){return P.sort(function(U,X){return U-X})},M=function(P,U){for(var X,J,ie=this.fillStyle,ve=this.strokeStyle,ke=this.lineCap,oe=this.lineWidth,Ee=Math.abs(oe*this.ctx.transform.scaleX),Oe=this.lineJoin,ne=JSON.parse(JSON.stringify(this.path)),we=JSON.parse(JSON.stringify(this.path)),Re=[],pe=0;pe<we.length;pe++)if(we[pe].x!==void 0)for(var Ke=_.call(this,we[pe]),ze=0;ze<Ke.length;ze+=1)Re.indexOf(Ke[ze])===-1&&Re.push(Ke[ze]);for(var ot=0;ot<Re.length;ot++)for(;this.pdf.internal.getNumberOfPages()<Re[ot];)S.call(this);if(I(Re),this.autoPaging)for(var Be=Re[0],He=Re[Re.length-1],ut=Be;ut<He+1;ut++){this.pdf.setPage(ut),this.fillStyle=ie,this.strokeStyle=ve,this.lineCap=ke,this.lineWidth=Ee,this.lineJoin=Oe;var Ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Et=ut===1?this.posY+this.margin[0]:this.margin[0],Le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ye=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qe=ut===1?0:Le+(ut-2)*Ye;if(this.ctx.clip_path.length!==0){var le=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(X,this.posX+this.margin[3],-Qe+Et+this.ctx.prevPageLastElemOffset),K.call(this,P,!0),this.path=le}if(J=JSON.parse(JSON.stringify(ne)),this.path=T(J,this.posX+this.margin[3],-Qe+Et+this.ctx.prevPageLastElemOffset),U===!1||ut===0){var je=(ut>Be||ut<He)&&w.call(this);je&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ct,Ye,null).clip().discardPath()),K.call(this,P,U),je&&this.pdf.restoreGraphicsState()}this.lineWidth=oe}else this.lineWidth=Ee,K.call(this,P,U),this.lineWidth=oe;this.path=ne},K=function(P,U){if((P!=="stroke"||U||!y.call(this))&&(P==="stroke"||U||!m.call(this))){for(var X,J,ie=[],ve=this.path,ke=0;ke<ve.length;ke++){var oe=ve[ke];switch(oe.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:oe,deltas:[],abs:[]});break;case"lt":var Ee=ie.length;if(ve[ke-1]&&!isNaN(ve[ke-1].x)&&(X=[oe.x-ve[ke-1].x,oe.y-ve[ke-1].y],Ee>0)){for(;Ee>=0;Ee--)if(ie[Ee-1].close!==!0&&ie[Ee-1].begin!==!0){ie[Ee-1].deltas.push(X),ie[Ee-1].abs.push(oe);break}}break;case"bct":X=[oe.x1-ve[ke-1].x,oe.y1-ve[ke-1].y,oe.x2-ve[ke-1].x,oe.y2-ve[ke-1].y,oe.x-ve[ke-1].x,oe.y-ve[ke-1].y],ie[ie.length-1].deltas.push(X);break;case"qct":var Oe=ve[ke-1].x+2/3*(oe.x1-ve[ke-1].x),ne=ve[ke-1].y+2/3*(oe.y1-ve[ke-1].y),we=oe.x+2/3*(oe.x1-oe.x),Re=oe.y+2/3*(oe.y1-oe.y),pe=oe.x,Ke=oe.y;X=[Oe-ve[ke-1].x,ne-ve[ke-1].y,we-ve[ke-1].x,Re-ve[ke-1].y,pe-ve[ke-1].x,Ke-ve[ke-1].y],ie[ie.length-1].deltas.push(X);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(oe)}}J=U?null:P==="stroke"?"stroke":"fill";for(var ze=!1,ot=0;ot<ie.length;ot++)if(ie[ot].arc)for(var Be=ie[ot].abs,He=0;He<Be.length;He++){var ut=Be[He];ut.type==="arc"?A.call(this,ut.x,ut.y,ut.radius,ut.startAngle,ut.endAngle,ut.counterclockwise,void 0,U,!ze):V.call(this,ut.x,ut.y),ze=!0}else if(ie[ot].close===!0)this.pdf.internal.out("h"),ze=!1;else if(ie[ot].begin!==!0){var Ct=ie[ot].start.x,Et=ie[ot].start.y;Z.call(this,ie[ot].deltas,Ct,Et),ze=!0}J&&E.call(this,J),U&&D.call(this)}},W=function(P){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-X;case"top":return P+U-X;case"hanging":return P+U-2*X;case"middle":return P+U/2-X;default:return P}},L=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(U,X){this.colorStops.push([U,X])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(P,U,X,J,ie,ve,ke,oe,Ee){for(var Oe=xe.call(this,X,J,ie,ve),ne=0;ne<Oe.length;ne++){var we=Oe[ne];ne===0&&(Ee?R.call(this,we.x1+P,we.y1+U):V.call(this,we.x1+P,we.y1+U)),fe.call(this,P,U,we.x2,we.y2,we.x3,we.y3,we.x4,we.y4)}oe?D.call(this):E.call(this,ke)},E=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(P,U){this.pdf.internal.out(r(P)+" "+n(U)+" m")},F=function(P){var U;switch(P.align){case"right":case"end":U="right";break;case"center":U="center";break;default:U="left"}var X=this.pdf.getTextDimensions(P.text),J=W.call(this,P.y),ie=L.call(this,J)-X.h,ve=this.ctx.transform.applyToPoint(new a(P.x,J)),ke=this.ctx.transform.decompose(),oe=new l;oe=(oe=(oe=oe.multiply(ke.translate)).multiply(ke.skew)).multiply(ke.scale);for(var Ee,Oe,ne,we=this.ctx.transform.applyToRectangle(new o(P.x,J,X.w,X.h)),Re=oe.applyToRectangle(new o(P.x,ie,X.w,X.h)),pe=_.call(this,Re),Ke=[],ze=0;ze<pe.length;ze+=1)Ke.indexOf(pe[ze])===-1&&Ke.push(pe[ze]);if(I(Ke),this.autoPaging)for(var ot=Ke[0],Be=Ke[Ke.length-1],He=ot;He<Be+1;He++){this.pdf.setPage(He);var ut=He===1?this.posY+this.margin[0]:this.margin[0],Ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Et=this.pdf.internal.pageSize.height-this.margin[2],Le=Et-this.margin[0],Ye=this.pdf.internal.pageSize.width-this.margin[1],Qe=Ye-this.margin[3],le=He===1?0:Ct+(He-2)*Le;if(this.ctx.clip_path.length!==0){var je=this.path;Ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(Ee,this.posX+this.margin[3],-1*le+ut),K.call(this,"fill",!0),this.path=je}var We=T([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-le+ut+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(Oe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Oe*P.scale),ne=this.lineWidth,this.lineWidth=ne*P.scale);var lt=this.autoPaging!=="text";if(lt||We.y+We.h<=Et){if(lt||We.y>=ut&&We.x<=Ye){var yt=lt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||Ye-We.x)[0],$t=T([JSON.parse(JSON.stringify(we))],this.posX+this.margin[3],-le+ut+this.ctx.prevPageLastElemOffset)[0],Xt=lt&&(He>ot||He<Be)&&w.call(this);Xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qe,Le,null).clip().discardPath()),this.pdf.text(yt,$t.x,$t.y,{angle:P.angle,align:U,renderingMode:P.renderingMode}),Xt&&this.pdf.restoreGraphicsState()}}else We.y<Et&&(this.ctx.prevPageLastElemOffset+=Et-We.y);P.scale>=.01&&(this.pdf.setFontSize(Oe),this.lineWidth=ne)}else P.scale>=.01&&(Oe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Oe*P.scale),ne=this.lineWidth,this.lineWidth=ne*P.scale),this.pdf.text(P.text,ve.x+this.posX,ve.y+this.posY,{angle:P.angle,align:U,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(Oe),this.lineWidth=ne)},V=function(P,U,X,J){X=X||0,J=J||0,this.pdf.internal.out(r(P+X)+" "+n(U+J)+" l")},Z=function(P,U,X){return this.pdf.lines(P,U,X,null,null)},fe=function(P,U,X,J,ie,ve,ke,oe){this.pdf.internal.out([e(s(X+P)),e(i(J+U)),e(s(ie+P)),e(i(ve+U)),e(s(ke+P)),e(i(oe+U)),"c"].join(" "))},xe=function(P,U,X,J){for(var ie=2*Math.PI,ve=Math.PI/2;U>X;)U-=ie;var ke=Math.abs(X-U);ke<ie&&J&&(ke=ie-ke);for(var oe=[],Ee=J?-1:1,Oe=U;ke>1e-5;){var ne=Oe+Ee*Math.min(ke,ve);oe.push(he.call(this,P,Oe,ne)),ke-=Math.abs(ne-Oe),Oe=ne}return oe},he=function(P,U,X){var J=(X-U)/2,ie=P*Math.cos(J),ve=P*Math.sin(J),ke=ie,oe=-ve,Ee=ke*ke+oe*oe,Oe=Ee+ke*ie+oe*ve,ne=4/3*(Math.sqrt(2*Ee*Oe)-Oe)/(ke*ve-oe*ie),we=ke-ne*oe,Re=oe+ne*ke,pe=we,Ke=-Re,ze=J+U,ot=Math.cos(ze),Be=Math.sin(ze);return{x1:P*Math.cos(U),y1:P*Math.sin(U),x2:we*ot-Re*Be,y2:we*Be+Re*ot,x3:pe*ot-Ke*Be,y3:pe*Be+Ke*ot,x4:P*Math.cos(X),y4:P*Math.sin(X)}},ae=function(P){return 180*P/Math.PI},H=function(P,U,X,J,ie,ve){var ke=P+.5*(X-P),oe=U+.5*(J-U),Ee=ie+.5*(X-ie),Oe=ve+.5*(J-ve),ne=Math.min(P,ie,ke,Ee),we=Math.max(P,ie,ke,Ee),Re=Math.min(U,ve,oe,Oe),pe=Math.max(U,ve,oe,Oe);return new o(ne,Re,we-ne,pe-Re)},te=function(P,U,X,J,ie,ve,ke,oe){var Ee,Oe,ne,we,Re,pe,Ke,ze,ot,Be,He,ut,Ct,Et,Le=X-P,Ye=J-U,Qe=ie-X,le=ve-J,je=ke-ie,We=oe-ve;for(Oe=0;Oe<41;Oe++)ot=(Ke=(ne=P+(Ee=Oe/40)*Le)+Ee*((Re=X+Ee*Qe)-ne))+Ee*(Re+Ee*(ie+Ee*je-Re)-Ke),Be=(ze=(we=U+Ee*Ye)+Ee*((pe=J+Ee*le)-we))+Ee*(pe+Ee*(ve+Ee*We-pe)-ze),Oe==0?(He=ot,ut=Be,Ct=ot,Et=Be):(He=Math.min(He,ot),ut=Math.min(ut,Be),Ct=Math.max(Ct,ot),Et=Math.max(Et,Be));return new o(Math.round(He),Math.round(ut),Math.round(Ct-He),Math.round(Et-ut))},G=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,U,X=(P=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:U}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(kr.API),(function(t){var e=function(a){var o,l,c,d,p,g,m,y,w,_;for(l=[],c=0,d=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;d>c;c+=4)(p=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(g=(p=((p=((p=((p=(p-(_=p%85))/85)-(w=p%85))/85)-(y=p%85))/85)-(m=p%85))/85)%85,l.push(g+33,m+33,y+33,w+33,_+33)):l.push(122);return(function(S,T){for(var I=T;I>0;I--)S.pop()})(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(a){var o,l,c,d,p,g=String,m="length",y=255,w="charCodeAt",_="slice",S="replace";for(a[_](-2),a=a[_](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),c=[],d=0,p=(a+=o="uuuuu"[_](a[m]%5||5))[m];p>d;d+=5)l=52200625*(a[w](d)-33)+614125*(a[w](d+1)-33)+7225*(a[w](d+2)-33)+85*(a[w](d+3)-33)+(a[w](d+4)-33),c.push(y&l>>24,y&l>>16,y&l>>8,y&l);return(function(T,I){for(var M=I;M>0;M--)T.pop()})(c,o[m]),g.fromCharCode.apply(g,c)},n=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var l="",c=0;c<a.length;c+=2)l+=String.fromCharCode("0x"+(a[c]+a[c+1]));return l},i=function(a){for(var o=new Uint8Array(a.length),l=a.length;l--;)o[l]=a.charCodeAt(l);return(o=ok(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};t.processDataByFilters=function(a,o){var l=0,c=a||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=s(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=n(c),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}})(kr.API),(function(t){t.loadFile=function(e,r,n){return(function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=(function(l,c,d){var p=new XMLHttpRequest,g=0,m=function(y){var w=y.length,_=[],S=String.fromCharCode;for(g=0;g<w;g+=1)_.push(S(255&y.charCodeAt(g)));return _.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?d(m(this.responseText)):d(void 0)}),p.send(null),c&&p.status===200)return m(p.responseText)})(s,i,a)}catch{}return o})(e,r,n)},t.loadImageFile=t.loadFile})(kr.API),(function(t){function e(){return(Gr.html2canvas?Promise.resolve(Gr.html2canvas):$d(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Gr.DOMPurify?Promise.resolve(Gr.DOMPurify):$d(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=hs(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l,c){for(var d=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),p=l.firstChild;p;p=p.nextSibling)c!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||d.appendChild(o(p,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(d.width=l.width,d.height=l.height,d.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(d.value=l.value),d.addEventListener("load",function(){d.scrollTop=l.scrollTop,d.scrollLeft=l.scrollLeft},!0)),d},a=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return(d=d.setProgress(1,o,1,[o])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,l){return o.__proto__=l||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,l){return this.then(function(){switch(l=l||(function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),l){case"string":return this.then(r).then(function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var m=0;m<d.length;++m){var y=d[m],w=y.src.find(function(_){return _.format==="truetype"});w&&c.addFont(w.url,y.ref.name,y.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,c.context2d.save(!0),l(this.prop.container,g)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},a.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(o,l){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||kr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},a.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,p){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(g){return c.updateProgress(null,d),g}).then(d,p).then(function(g){return c.updateProgress(1),g})})},a.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then;var d=this;o&&(o=o.bind(d)),l&&(l=l.bind(d));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:a.convert(Object.assign({},d),Promise.prototype),g=c.call(p,o,l);return a.convert(g,d.__proto__)},a.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},a.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},a.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return a.convert(l,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,kr.getPageSize=function(o,l,c){if(hs(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var p,g=(""+c).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var y,w=0,_=0;if(m.hasOwnProperty(g))w=m[g][1]/p,_=m[g][0]/p;else try{w=c[1],_=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",_>w&&(y=_,_=w,w=y);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",w>_&&(y=_,_=w,w=y)}return{width:_,height:w,unit:l,k:p,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(hb):null;var c=new a(l);return l.worker?c:c.from(o).doCallback()}})(kr.API),kr.API.addJS=function(t){return nP=t,this.internal.events.subscribe("postPutResources",function(){Mv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Mv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),rP=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+nP+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Mv!==void 0&&rP!==void 0&&this.internal.out("/Names <</JavaScript "+Mv+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],o=n.exec(a);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(i=0;i<c;i++){var p=r.internal.newObject();d.push(p);var g=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<d.length;i++)r.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var a={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var a=n.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])})(kr.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,i,a,o){var l,c=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,l=(function(p){for(var g,m=256*p.charCodeAt(4)+p.charCodeAt(5),y=p.length,w={width:0,height:0,numcomponents:1},_=4;_<y;_+=2){if(_+=m,e.indexOf(p.charCodeAt(_+1))!==-1){g=256*p.charCodeAt(_+5)+p.charCodeAt(_+6),w={width:256*p.charCodeAt(_+7)+p.charCodeAt(_+8),height:g,numcomponents:p.charCodeAt(_+9)};break}m=256*p.charCodeAt(_+2)+p.charCodeAt(_+3)}return w})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:s}}return d}})(kr.API),kr.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var s,i=sxe(t,{checkCrc:!0}),a=i.width,o=i.height,l=i.channels,c=i.palette,d=i.depth;s=c&&l===1?(function(L){for(var A=L.width,E=L.height,D=L.data,R=L.palette,F=L.depth,V=!1,Z=[],fe=[],xe=void 0,he=!1,ae=0,H=0;H<R.length;H++){var te=oI(R[H],4),G=te[0],P=te[1],U=te[2],X=te[3];Z.push(G,P,U),X!=null&&(X===0?(ae++,fe.length<1&&fe.push(H)):X<255&&(he=!0))}if(he||ae>1){V=!0,fe=void 0;var J=A*E;xe=new Uint8Array(J);for(var ie=new DataView(D.buffer),ve=0;ve<J;ve++){var ke=pb(ie,ve,F),oe=oI(R[ke],4)[3];xe[ve]=oe}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:D,alphaBytes:xe,needSMask:V,palette:Z,mask:fe}})(i):l===2||l===4?(function(L){for(var A=L.data,E=L.width,D=L.height,R=L.channels,F=L.depth,V=R===2?"DeviceGray":"DeviceRGB",Z=R-1,fe=E*D,xe=Z,he=fe*xe,ae=1*fe,H=Math.ceil(he*F/8),te=Math.ceil(ae*F/8),G=new Uint8Array(H),P=new Uint8Array(te),U=new DataView(A.buffer),X=new DataView(G.buffer),J=new DataView(P.buffer),ie=!1,ve=0;ve<fe;ve++){for(var ke=ve*R,oe=0;oe<xe;oe++)hP(X,pb(U,ke+oe,F),ve*xe+oe,F);var Ee=pb(U,ke+xe,F);Ee<(1<<F)-1&&(ie=!0),hP(J,Ee,1*ve,F)}return{colorSpace:V,colorsPerPixel:Z,colorBytes:G,alphaBytes:P,needSMask:ie}})(i):(function(L){var A=L.data,E=L.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:E,colorsPerPixel:E==="DeviceGray"?1:3,colorBytes:A instanceof Uint8Array?A:new Uint8Array(A.buffer),needSMask:!1}})(i);var p,g,m,y=s,w=y.colorSpace,_=y.colorsPerPixel,S=y.colorBytes,T=y.alphaBytes,I=y.needSMask,M=y.palette,K=y.mask,W=null;return n!==kr.API.image_compression.NONE&&typeof ok=="function"?(W=(function(L){var A;switch(L){case kr.API.image_compression.FAST:A=11;break;case kr.API.image_compression.MEDIUM:A=13;break;case kr.API.image_compression.SLOW:A=14;break;default:A=12}return A})(n),p=this.decode.FLATE_DECODE,g="/Predictor ".concat(W," "),t=oP(S,a*_,_,n),I&&(m=oP(T,a,1,n))):(p=void 0,g="",t=S,I&&(m=T)),g+="/Colors ".concat(_," /BitsPerComponent ").concat(d," /Columns ").concat(a),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:r,data:t,index:e,filter:p,decodeParameters:g,transparency:K,palette:M,sMask:m,predictor:W,width:a,height:o,bitsPerComponent:d,colorSpace:w}}},(function(t){t.processGIF89A=function(e,r,n,s){var i=new Exe(e),a=i.width,o=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},d=new mb(100).encode(c,100);return t.processJPEG.call(this,d,r,n,s)},t.processGIF87A=t.processGIF89A})(kr.API),tu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},tu.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Ns.log("bit decode error:"+r)}},tu.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[i>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}r!==0&&(this.pos+=4-r)}},tu.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*s*4,o=i>>4,l=15&i,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},tu.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},tu.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,o=(i>>5&e)/e*255|0,l=(i>>10&e)/e*255|0,c=i>>15?255:0,d=n*this.width*4+4*s;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=c}this.pos+=t}},tu.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&r)/r*255|0,c=(a>>11)/e*255|0,d=s*this.width*4+4*i;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},tu.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},tu.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=a}},tu.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,r,n,s){var i=new tu(e,!1),a=i.width,o=i.height,l={data:i.getData(),width:a,height:o},c=new mb(100).encode(l,100);return t.processJPEG.call(this,c,r,n,s)}})(kr.API),pP.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,r,n,s){var i=new pP(e),a=i.width,o=i.height,l={data:i.getData(),width:a,height:o},c=new mb(100).encode(l,100);return t.processJPEG.call(this,c,r,n,s)}})(kr.API),kr.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,l=0,c=0;c<s;c+=4){var d=n[c],p=n[c+1],g=n[c+2],m=n[c+3];i[o++]=d,i[o++]=p,i[o++]=g,a[l++]=m}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:y,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},kr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},gm=kr.API,Bv=gm.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,d=c.fof?c.fof:1,p=e.doKerning!==!1,g=0,m=t.length,y=0,w=o[0]||l,_=[];for(r=0;r<m;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?_.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+a*(1e3/i)||0)/1e3):(g=p&&hs(c[n])==="object"&&!isNaN(parseInt(c[n][y],10))?c[n][y]/d:0,_.push((o[n]||w)/l+g)),y=n;return _},sP=gm.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return gm.processArabic&&(t=gm.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:Bv.apply(this,arguments).reduce(function(i,a){return i+a},0)},iP=function(t,e,r,n){for(var s=[],i=0,a=t.length,o=0;i!==a&&o+e[i]<r;)o+=e[i],i++;s.push(t.slice(0,i));var l=i;for(o=0;i!==a;)o+e[i]>n&&(s.push(t.slice(l,i)),o=0,l=i),o+=e[i],i++;return l!==i&&s.push(t.slice(l,i)),s},aP=function(t,e,r){r||(r={});var n,s,i,a,o,l,c,d=[],p=[d],g=r.textIndent||0,m=0,y=0,w=t.split(" "),_=Bv.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?w[0].length+2:r.lineIndent||0){var S=Array(l).join(" "),T=[];w.map(function(M){(M=M.split(/\s*\n/)).length>1?T=T.concat(M.map(function(K,W){return(W&&K.length?`
`:"")+K})):T.push(M[0])}),w=T,l=sP.apply(this,[S,r])}for(i=0,a=w.length;i<a;i++){var I=0;if(n=w[i],l&&n[0]==`
`&&(n=n.substr(1),I=1),g+m+(y=(s=Bv.apply(this,[n,r])).reduce(function(M,K){return M+K},0))>e||I){if(y>e){for(o=iP.apply(this,[n,s,e-(g+m),e]),d.push(o.shift()),d=[o.pop()];o.length;)p.push([o.shift()]);y=s.slice(n.length-(d[0]?d[0].length:0)).reduce(function(M,K){return M+K},0)}else d=[n];p.push(d),g=y+l,m=_}else d.push(n),g+=m+y,m=_}return c=l?function(M,K){return(K?S:"")+M.join(" ")}:function(M){return M.join(" ")},p.map(c)},gm.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle),g="Unicode";return p.metadata[g]?{widths:p.metadata[g].widths||{0:1},kerning:p.metadata[g].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(aP.apply(this,[n[o],a,i]));return c},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},s={},i=0;i<16;i++)n[r[i]]=e[i],s[e[i]]=r[i];var a=function(g){return"0x"+parseInt(g,10).toString(16)},o=t.__fontmetrics__.compress=function(g){var m,y,w,_,S=["{"];for(var T in g){if(m=g[T],isNaN(parseInt(T,10))?y="'"+T+"'":(T=parseInt(T,10),y=(y=a(T).slice(2)).slice(0,-1)+s[y.slice(-1)]),typeof m=="number")m<0?(w=a(m).slice(3),_="-"):(w=a(m).slice(2),_=""),w=_+w.slice(0,-1)+s[w.slice(-1)];else{if(hs(m)!=="object")throw new Error("Don't know what to do with value type "+hs(m)+".");w=o(m)}S.push(y+w)}return S.push("}"),S.join("")},l=t.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,y,w,_,S={},T=1,I=S,M=[],K="",W="",L=g.length-1,A=1;A<L;A+=1)(_=g[A])=="'"?m?(w=m.join(""),m=void 0):m=[]:m?m.push(_):_=="{"?(M.push([I,w]),I={},w=void 0):_=="}"?((y=M.pop())[0][y[1]]=I,w=void 0,I=y[0]):_=="-"?T=-1:w===void 0?n.hasOwnProperty(_)?(K+=n[_],w=parseInt(K,16)*T,T=1,K=""):K+=_:n.hasOwnProperty(_)?(W+=n[_],I[w]=parseInt(W,16)*T,T=1,w=void 0,W=""):W+=_;return S},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(g){var m=g.font,y=p.Unicode[m.postScriptName];y&&(m.metadata.Unicode={},m.metadata.Unicode.widths=y.widths,m.metadata.Unicode.kerning=y.kerning);var w=d.Unicode[m.postScriptName];w&&(m.metadata.Unicode.encoding=w,m.encoding=w.codePages[0])}])})(kr.API),(function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(bw(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,n)}}])})(kr),kr.API.addSvgAsImage=function(t,e,r,n,s,i,a,o){if(isNaN(e)||isNaN(r))throw Ns.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(s))throw Ns.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=n,l.height=s;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(Gr.canvg?Promise.resolve(Gr.canvg):$d(()=>import("./index.es-C4iwTjuo.js"),[])).catch(function(g){return Promise.reject(new Error("Could not load canvg: "+g))}).then(function(g){return g.default?g.default:g}).then(function(g){return g.fromString(c,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(d)}).then(function(){p.addImage(l.toDataURL("image/jpeg",1),e,r,n,s,a,o)})},kr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},kr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,d=0,p=0;function g(y,w){var _,S=!1;for(_=0;_<y.length;_+=1)y[_]===w&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=o.length;for(p=0;p<m;p+=1)r[o[p]].value=r[o[p]].defaultValue,r[o[p]].explicitSet=!1}if(hs(t)==="object"){for(s in t)if(i=t[s],g(o,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&g(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(c=0;c<i.length;c+=1)if(n=!0,i[c].length===1&&typeof i[c][0]=="number")l.push(String(i[c]-1));else if(i[c].length>1){for(d=0;d<i[c].length;d+=1)typeof i[c][d]!="number"&&(n=!1);n===!0&&l.push([i[c][0]-1,i[c][1]-1].join(" "))}r[s].value="["+l.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,w=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?w.push("/"+y+" /"+r[y].value):w.push("/"+y+" "+r[y].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+a.length+o.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+i+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}})(kr.API),(function(t){var e=t.API,r=e.pdfEscape16=function(i,a){for(var o,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],p=0,g=i.length;p<g;++p){if(o=a.metadata.characterToGlyph(i.charCodeAt(p)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=i.charCodeAt(p),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(c[4-o.length],o)}return d.join("")},n=function(i){var a,o,l,c,d,p,g;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,g=(o=Object.keys(i).sort(function(m,y){return m-y})).length;p<g;p++)a=o[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(c=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var o=a.font,l=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var p=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),m="",y=0;y<g.length;y++)m+=String.fromCharCode(g[y]);var w=c();d({data:m,addLength1:!0,objectId:w}),l("endobj");var _=c();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:_}),l("endobj");var S=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Nm(o.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var T=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Nm(o.fontName)),l("/FontDescriptor "+S+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+_+" 0 R"),l("/BaseFont /"+Nm(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+T+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var o=a.font,l=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var p=o.metadata.rawData,g="",m=0;m<p.length;m++)g+=String.fromCharCode(p[m]);var y=c();d({data:g,addLength1:!0,objectId:y}),l("endobj");var w=c();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var _=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+y+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Nm(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var S=0;S<o.metadata.hmtx.widths.length;S++)o.metadata.hmtx.widths[S]=parseInt(o.metadata.hmtx.widths[S]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+Nm(o.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,o=i.text||"",l=i.x,c=i.y,d=i.options||{},p=i.mutex||{},g=p.pdfEscape,m=p.activeFontKey,y=p.fonts,w=m,_="",S=0,T="",I=y[w].encoding;if(y[w].encoding!=="Identity-H")return{text:o,x:l,y:c,options:d,mutex:p};for(T=o,w=m,Array.isArray(o)&&(T=o[0]),S=0;S<T.length;S+=1)y[w].metadata.hasOwnProperty("cmap")&&(a=y[w].metadata.cmap.unicode.codeMap[T[S].charCodeAt(0)]),a||T[S].charCodeAt(0)<256&&y[w].metadata.hasOwnProperty("Unicode")?_+=T[S]:_+="";var M="";return parseInt(w.slice(1))<14||I==="WinAnsiEncoding"?M=g(_,w).split("").map(function(K){return K.charCodeAt(0).toString(16)}).join(""):I==="Identity-H"&&(M=r(_,y[w])),p.isHex=!0,{text:M,x:l,y:c,options:d,mutex:p}};e.events.push(["postProcessText",function(i){var a=i.text||"",o=[],l={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([s(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(s(Object.assign({},l,{text:a[c]})).text);i.text=o}else i.text=s(Object.assign({},l,{text:a})).text}])})(kr),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(kr.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,i,a,o,l,c,d,p=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,I=0;this.__bidiEngine__={};var M=function(R){var F=R.charCodeAt(),V=F>>8,Z=w[V];return Z!==void 0?p[256*Z+(255&F)]:V===252||V===253?"AL":S.test(V)?"L":V===8?"R":"N"},K=function(R){for(var F,V=0;V<R.length;V++){if((F=M(R.charAt(V)))==="L")return!1;if(F==="R")return!0}return!1},W=function(R,F,V,Z){var fe,xe,he,ae,H=F[Z];switch(H){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"N":case"AN":break;case"EN":T&&(H="AN");break;case"AL":T=!0,H="R";break;case"WS":case"BN":H="N";break;case"CS":Z<1||Z+1>=F.length||(fe=V[Z-1])!=="EN"&&fe!=="AN"||(xe=F[Z+1])!=="EN"&&xe!=="AN"?H="N":T&&(xe="AN"),H=xe===fe?xe:"N";break;case"ES":H=(fe=Z>0?V[Z-1]:"B")==="EN"&&Z+1<F.length&&F[Z+1]==="EN"?"EN":"N";break;case"ET":if(Z>0&&V[Z-1]==="EN"){H="EN";break}if(T){H="N";break}for(he=Z+1,ae=F.length;he<ae&&F[he]==="ET";)he++;H=he<ae&&F[he]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(ae=F.length,he=Z+1;he<ae&&F[he]==="NSM";)he++;if(he<ae){var te=R[Z],G=te>=1425&&te<=2303||te===64286;if(fe=F[he],G&&(fe==="R"||fe==="AL")){H="R";break}}}H=Z<1||(fe=F[Z-1])==="B"?"N":V[Z-1];break;case"B":T=!1,s=!0,H=I;break;case"S":i=!0,H="N"}return H},L=function(R,F,V){var Z=R.split("");return V&&A(Z,V,{hiLevel:I}),Z.reverse(),F&&F.reverse(),Z.join("")},A=function(R,F,V){var Z,fe,xe,he,ae,H=-1,te=R.length,G=0,P=[],U=I?m:g,X=[];for(T=!1,s=!1,i=!1,fe=0;fe<te;fe++)X[fe]=M(R[fe]);for(xe=0;xe<te;xe++){if(ae=G,P[xe]=W(R,X,P,xe),Z=240&(G=U[ae][y[P[xe]]]),G&=15,F[xe]=he=U[G][5],Z>0)if(Z===16){for(fe=H;fe<xe;fe++)F[fe]=1;H=-1}else H=-1;if(U[G][6])H===-1&&(H=xe);else if(H>-1){for(fe=H;fe<xe;fe++)F[fe]=he;H=-1}X[xe]==="B"&&(F[xe]=0),V.hiLevel|=he}i&&(function(J,ie,ve){for(var ke=0;ke<ve;ke++)if(J[ke]==="S"){ie[ke]=I;for(var oe=ke-1;oe>=0&&J[oe]==="WS";oe--)ie[oe]=I}})(X,F,te)},E=function(R,F,V,Z,fe){if(!(fe.hiLevel<R)){if(R===1&&I===1&&!s)return F.reverse(),void(V&&V.reverse());for(var xe,he,ae,H,te=F.length,G=0;G<te;){if(Z[G]>=R){for(ae=G+1;ae<te&&Z[ae]>=R;)ae++;for(H=G,he=ae-1;H<he;H++,he--)xe=F[H],F[H]=F[he],F[he]=xe,V&&(xe=V[H],V[H]=V[he],V[he]=xe);G=ae}G++}}},D=function(R,F,V){var Z=R.split(""),fe={hiLevel:I};return V||(V=[]),A(Z,V,fe),(function(xe,he,ae){if(ae.hiLevel!==0&&d)for(var H,te=0;te<xe.length;te++)he[te]===1&&(H=_.indexOf(xe[te]))>=0&&(xe[te]=_[H+1])})(Z,V,fe),E(2,Z,F,V,fe),E(1,Z,F,V,fe),Z.join("")};return this.__bidiEngine__.doBidiReorder=function(R,F,V){if((function(fe,xe){if(xe)for(var he=0;he<fe.length;he++)xe[he]=he;o===void 0&&(o=K(fe)),c===void 0&&(c=K(fe))})(R,F),a||!l||c)if(a&&l&&o^c)I=o?1:0,R=L(R,F,V);else if(!a&&l&&c)I=o?1:0,R=D(R,F,V),R=L(R,F);else if(!a||o||l||c){if(a&&!l&&o^c)R=L(R,F),o?(I=0,R=D(R,F,V)):(I=1,R=D(R,F,V),R=L(R,F));else if(a&&o&&!l&&c)I=1,R=D(R,F,V),R=L(R,F);else if(!a&&!l&&o^c){var Z=d;o?(I=1,R=D(R,F,V),I=0,d=!1,R=D(R,F,V),d=Z):(I=0,R=D(R,F,V),R=L(R,F),I=1,d=!1,R=D(R,F,V),d=Z,R=L(R,F))}}else I=0,R=D(R,F,V);else I=o?1:0,R=D(R,F,V);return R},this.__bidiEngine__.setOptions=function(R){R&&(a=R.isInputVisual,l=R.isOutputVisual,o=R.isInputRtl,c=R.isOutputRtl,d=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var a=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(a=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?a.push([r.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):a.push([r.doBidiReorder(s[o])]);n.text=a}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])})(kr),kr.API.TTFFont=(function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Nf(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Vxe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Cxe(this.contents),this.head=new Nxe(this),this.name=new Lxe(this),this.cmap=new fz(this),this.toUnicode={},this.hhea=new Txe(this),this.maxp=new jxe(this),this.hmtx=new Fxe(this),this.post=new Pxe(this),this.os2=new Ixe(this),this.loca=new Bxe(this),this.glyf=new Dxe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,c;for(c=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,i,a,o;for(a=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t})();var vu,Nf=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,i,a,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*a+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,i;for(i=[],n=0,s=e.length;n<s;n++)r=e[n],i.push(this.writeByte(r));return i},t})(),Cxe=(function(){var t;function e(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,i,a,o,l,c,d,p,g,m,y,w;for(w in m=Object.keys(r).length,l=Math.log(2),p=16*Math.floor(Math.log(m)/l),a=Math.floor(p/l),d=16*m-p,(s=new Nf).writeInt(this.scalarType),s.writeShort(m),s.writeShort(p),s.writeShort(a),s.writeShort(d),i=16*m,c=s.pos+i,o=null,y=[],r)for(g=r[w],s.writeString(w),s.writeInt(t(g)),s.writeInt(c),s.writeInt(g.length),y=y.concat(g),w==="head"&&(o=c),c+=g.length;c%4;)y.push(0),c++;return s.write(y),n=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(n),s.data},t=function(r){var n,s,i,a;for(r=pz.call(r);r.length%4;)r.push(0);for(i=new Nf(r),s=0,n=0,a=r.length;n<a;n=n+=4)s+=i.readUInt32();return 4294967295&s},e})(),Axe={}.hasOwnProperty,fd=function(t,e){for(var r in e)Axe.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};vu=(function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var Nxe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fd(t,vu),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new Nf).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t})(),mP=(function(){function t(e,r){var n,s,i,a,o,l,c,d,p,g,m,y,w,_,S,T,I;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),g=m/2,e.pos+=6,i=(function(){var M,K;for(K=[],l=M=0;0<=g?M<g:M>g;l=0<=g?++M:--M)K.push(e.readUInt16());return K})(),e.pos+=2,w=(function(){var M,K;for(K=[],l=M=0;0<=g?M<g:M>g;l=0<=g?++M:--M)K.push(e.readUInt16());return K})(),c=(function(){var M,K;for(K=[],l=M=0;0<=g?M<g:M>g;l=0<=g?++M:--M)K.push(e.readUInt16());return K})(),d=(function(){var M,K;for(K=[],l=M=0;0<=g?M<g:M>g;l=0<=g?++M:--M)K.push(e.readUInt16());return K})(),s=(this.length-e.pos+this.offset)/2,o=(function(){var M,K;for(K=[],l=M=0;0<=s?M<s:M>s;l=0<=s?++M:--M)K.push(e.readUInt16());return K})(),l=S=0,I=i.length;S<I;l=++S)for(_=i[l],n=T=y=w[l];y<=_?T<=_:T>=_;n=y<=_?++T:--T)d[l]===0?a=n+c[l]:(a=o[d[l]/2+(n-y)-(g-l)]||0)!==0&&(a+=c[l]),this.codeMap[n]=65535&a}e.pos=p}return t.encode=function(e,r){var n,s,i,a,o,l,c,d,p,g,m,y,w,_,S,T,I,M,K,W,L,A,E,D,R,F,V,Z,fe,xe,he,ae,H,te,G,P,U,X,J,ie,ve,ke,oe,Ee,Oe,ne;switch(Z=new Nf,a=Object.keys(e).sort(function(we,Re){return we-Re}),r){case"macroman":for(w=0,_=(function(){var we=[];for(y=0;y<256;++y)we.push(0);return we})(),T={0:0},i={},fe=0,H=a.length;fe<H;fe++)T[oe=e[s=a[fe]]]==null&&(T[oe]=++w),i[s]={old:e[s],new:T[e[s]]},_[s]=T[e[s]];return Z.writeUInt16(1),Z.writeUInt16(0),Z.writeUInt32(12),Z.writeUInt16(0),Z.writeUInt16(262),Z.writeUInt16(0),Z.write(_),{charMap:i,subtable:Z.data,maxGlyphID:w+1};case"unicode":for(F=[],p=[],I=0,T={},n={},S=c=null,xe=0,te=a.length;xe<te;xe++)T[K=e[s=a[xe]]]==null&&(T[K]=++I),n[s]={old:K,new:T[K]},o=T[K]-s,S!=null&&o===c||(S&&p.push(S),F.push(s),c=o),S=s;for(S&&p.push(S),p.push(65535),F.push(65535),D=2*(E=F.length),A=2*Math.pow(Math.log(E)/Math.LN2,2),g=Math.log(A/2)/Math.LN2,L=2*E-A,l=[],W=[],m=[],y=he=0,G=F.length;he<G;y=++he){if(R=F[y],d=p[y],R===65535){l.push(0),W.push(0);break}if(R-(V=n[R].new)>=32768)for(l.push(0),W.push(2*(m.length+E-y)),s=ae=R;R<=d?ae<=d:ae>=d;s=R<=d?++ae:--ae)m.push(n[s].new);else l.push(V-R),W.push(0)}for(Z.writeUInt16(3),Z.writeUInt16(1),Z.writeUInt32(12),Z.writeUInt16(4),Z.writeUInt16(16+8*E+2*m.length),Z.writeUInt16(0),Z.writeUInt16(D),Z.writeUInt16(A),Z.writeUInt16(g),Z.writeUInt16(L),ve=0,P=p.length;ve<P;ve++)s=p[ve],Z.writeUInt16(s);for(Z.writeUInt16(0),ke=0,U=F.length;ke<U;ke++)s=F[ke],Z.writeUInt16(s);for(Ee=0,X=l.length;Ee<X;Ee++)o=l[Ee],Z.writeUInt16(o);for(Oe=0,J=W.length;Oe<J;Oe++)M=W[Oe],Z.writeUInt16(M);for(ne=0,ie=m.length;ne<ie;ne++)w=m[ne],Z.writeUInt16(w);return{charMap:n,subtable:Z.data,maxGlyphID:I+1}}},t})(),fz=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fd(t,vu),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)r=new mP(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,s;return r==null&&(r="macroman"),n=mP.encode(e,r),(s=new Nf).writeUInt16(0),s.writeUInt16(1),n.table=s.data.concat(n.subtable),n},t})(),Txe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fd(t,vu),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),Ixe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fd(t,vu),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),Pxe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fd(t,vu),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)r=e.readByte(),s.push(this.names.push(e.readString(r)));return s;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var a,o,l;for(l=[],i=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;i=0<=o?++a:--a)l.push(e.readUInt32());return l}).call(this)}},t})(),Rxe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Lxe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fd(t,vu),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,s,i,a,o,l,c,d,p,g;for(e.pos=this.offset,e.readShort(),r=e.readShort(),o=e.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(l={},i=d=0,p=n.length;d<p;i=++d)s=n[i],e.pos=s.offset,c=e.readString(s.length),a=new Rxe(c,s),l[g=s.nameID]==null&&(l[g]=[]),l[s.nameID].push(a);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t})(),jxe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fd(t,vu),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),Fxe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fd(t,vu),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,s,i,a,o,l;for(e.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var c,d;for(d=[],r=c=0;0<=s?c<s:c>s;r=0<=s?++c:--c)d.push(e.readInt16());return d})(),this.widths=(function(){var c,d,p,g;for(g=[],c=0,d=(p=this.metrics).length;c<d;c++)i=p[c],g.push(i.advance);return g}).call(this),n=this.widths[this.widths.length-1],l=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)l.push(this.widths.push(n));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),pz=[].slice,Dxe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fd(t,vu),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,s,i,a,o,l,c,d,p;return e in this.cache?this.cache[e]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(e),(s=i.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,a=(o=new Nf(r.read(s))).readShort(),c=o.readShort(),p=o.readShort(),l=o.readShort(),d=o.readShort(),this.cache[e]=a===-1?new Mxe(o,c,p,l,d):new Oxe(o,a,c,p,l,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var s,i,a,o,l;for(a=[],i=[],o=0,l=r.length;o<l;o++)s=e[r[o]],i.push(a.length),s&&(a=a.concat(s.encode(n)));return i.push(a.length),{table:a,offsets:i}},t})(),Oxe=(function(){function t(e,r,n,s,i,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),Mxe=(function(){function t(e,r,n,s,i){var a,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new Nf(pz.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t})(),Bxe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fd(t,vu),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,i;for(i=[],n=0,s=this.length;n<s;n+=2)i.push(2*e.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],n=0,s=this.length;n<s;n+=4)i.push(e.readUInt32());return i}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),s=0,i=0,a=0;a<n.length;++a)if(n[a]=s,i<r.length&&r[i]==a){++i,n[a]=s;var o=this.offsets[a],l=this.offsets[a+1]-o;l>0&&(s+=l)}for(var c=new Array(4*n.length),d=0;d<n.length;++d)c[4*d+3]=255&n[d],c[4*d+2]=(65280&n[d])>>8,c[4*d+1]=(16711680&n[d])>>16,c[4*d]=(4278190080&n[d])>>24;return c},t})(),Vxe=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,i,a,o,l;for(s={},a=0,o=e.length;a<o;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in l=this.glyphsFor(r))n=l[i],s[i]=n;return s},t.prototype.encode=function(e,r){var n,s,i,a,o,l,c,d,p,g,m,y,w,_,S;for(s in n=fz.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),m={0:0},S=n.charMap)m[(l=S[s]).old]=l.new;for(y in g=n.maxGlyphID,a)y in m||(m[y]=g++);return d=(function(T){var I,M;for(I in M={},T)M[T[I]]=I;return M})(m),p=Object.keys(d).sort(function(T,I){return T-I}),w=(function(){var T,I,M;for(M=[],T=0,I=p.length;T<I;T++)o=p[T],M.push(d[o]);return M})(),i=this.font.glyf.encode(a,w,m),c=this.font.loca.encode(i.offsets,w),_={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},t})();kr.API.PDFObject=(function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,i,a;if(Array.isArray(r))return"["+(function(){var o,l,c;for(c=[],o=0,l=r.length;o<l;o++)n=r[o],c.push(e.convert(n));return c})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)a=r[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+r},e})();function mz(t,e,r,n,s){n=n||{};var i=1.15,a=s.internal.scaleFactor,o=s.internal.getFontSize()/a,l=s.getLineHeightFactor?s.getLineHeightFactor():i,c=o*l,d=/\r\n|\r|\n/g,p="",g=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(p=typeof t=="string"?t.split(d):t,g=p.length||1),r+=o*(2-i),n.valign==="middle"?r-=g/2*c:n.valign==="bottom"&&(r-=g*c),n.halign==="center"||n.halign==="right"){var m=o;if(n.halign==="center"&&(m*=.5),p&&g>=1){for(var y=0;y<p.length;y++)s.text(p[y],e-s.getStringUnitWidth(p[y])*m,r),r+=c;return s}e-=s.getStringUnitWidth(t)*m}return n.halign==="justify"?s.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):s.text(t,e,r),s}var gP={},n1=(function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:gP=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,s,i;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,l=a.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(s=this.jsPDFDocument).setTextColor.apply(s,d),d=t.unifyColor(e.lineColor),d&&(i=this.jsPDFDocument).setDrawColor.apply(i,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,s,i){return this.jsPDFDocument.rect(e,r,n,s,i)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return gP||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t})(),mk=function(t,e){return mk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},mk(t,e)};function gz(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");mk(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var xz=(function(t){gz(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e})(Array);function Uxe(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function zxe(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function O5(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],s=n.map(function(i){return r.getTextWidth(i)}).reduce(function(i,a){return Math.max(i,a)},0);return s}function yz(t,e,r,n){var s=e.settings.tableLineWidth,i=e.settings.tableLineColor;t.applyStyles({lineWidth:s,lineColor:i});var a=vz(s,!1);a&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,a)}function vz(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function X_(t,e){var r,n,s,i;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(s=t.right)!==null&&s!==void 0?s:e,bottom:(i=t.bottom)!==null&&i!==void 0?i:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function wz(t,e){var r=X_(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function $xe(t,e,r,n,s){var i={},a=1.3333333333333333,o=gb(e,function(I){return s.getComputedStyle(I).backgroundColor});o!=null&&(i.fillColor=o);var l=gb(e,function(I){return s.getComputedStyle(I).color});l!=null&&(i.textColor=l);var c=Hxe(n,r);c&&(i.cellPadding=c);var d="borderTopColor",p=a*r,g=n.borderTopWidth;if(n.borderBottomWidth===g&&n.borderRightWidth===g&&n.borderLeftWidth===g){var m=(parseFloat(g)||0)/p;m&&(i.lineWidth=m)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/p,right:(parseFloat(n.borderRightWidth)||0)/p,bottom:(parseFloat(n.borderBottomWidth)||0)/p,left:(parseFloat(n.borderLeftWidth)||0)/p},i.lineWidth.top||(i.lineWidth.right?d="borderRightColor":i.lineWidth.bottom?d="borderBottomColor":i.lineWidth.left&&(d="borderLeftColor"));var y=gb(e,function(I){return s.getComputedStyle(I)[d]});y!=null&&(i.lineColor=y);var w=["left","right","center","justify"];w.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),w=["middle","bottom","top"],w.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var _=parseInt(n.fontSize||"");isNaN(_)||(i.fontSize=_/a);var S=qxe(n);S&&(i.fontStyle=S);var T=(n.fontFamily||"").toLowerCase();return t.indexOf(T)!==-1&&(i.font=T),i}function qxe(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function gb(t,e){var r=_z(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var s=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function _z(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:_z(t.parentElement,e):r}function Hxe(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),s=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,i=r.map(function(o){return parseInt(o||"0")/n}),a=X_(i,0);return s>a.top&&(a.top=s),s>a.bottom&&(a.bottom=s),a}function bz(t,e,r,n,s){var i,a;n===void 0&&(n=!1),s===void 0&&(s=!1);var o;typeof e=="string"?o=r.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),c=t.scaleFactor(),d=[],p=[],g=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:p,foot:g};for(var m=0;m<o.rows.length;m++){var y=o.rows[m],w=(a=(i=y?.parentElement)===null||i===void 0?void 0:i.tagName)===null||a===void 0?void 0:a.toLowerCase(),_=Wxe(l,c,r,y,n,s);_&&(w==="thead"?d.push(_):w==="tfoot"?g.push(_):p.push(_))}return{head:d,body:p,foot:g}}function Wxe(t,e,r,n,s,i){for(var a=new xz(n),o=0;o<n.cells.length;o++){var l=n.cells[o],c=r.getComputedStyle(l);if(s||c.display!=="none"){var d=void 0;i&&(d=$xe(t,l,e,c,r)),a.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:Gxe(l)})}}var p=r.getComputedStyle(n);if(a.length>0&&(s||p.display!=="none"))return a}function Gxe(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function Kxe(t,e,r){for(var n=0,s=[t,e,r];n<s.length;n++){var i=s[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function Vd(t,e,r,n,s){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])}return i}function kz(t,e){var r=new n1(t),n=r.getDocumentOptions(),s=r.getGlobalOptions();Kxe(s,n,e);var i=Vd({},s,n,e),a;typeof window<"u"&&(a=window);var o=Yxe(s,n,e),l=Xxe(s,n,e),c=Qxe(r,i),d=Zxe(r,i,a);return{id:e.tableId,content:d,hooks:l,styles:o,settings:c}}function Yxe(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(l){if(l==="columnStyles"){var c=t[l],d=e[l],p=r[l];n.columnStyles=Vd({},c,d,p)}else{var g=[t,e,r],m=g.map(function(y){return y[l]||{}});n[l]=Vd({},m[0],m[1],m[2])}},i=0,a=Object.keys(n);i<a.length;i++){var o=a[i];s(o)}return n}function Xxe(t,e,r){for(var n=[t,e,r],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,a=n;i<a.length;i++){var o=a[i];o.didParseCell&&s.didParseCell.push(o.didParseCell),o.willDrawCell&&s.willDrawCell.push(o.willDrawCell),o.didDrawCell&&s.didDrawCell.push(o.didDrawCell),o.willDrawPage&&s.willDrawPage.push(o.willDrawPage),o.didDrawPage&&s.didDrawPage.push(o.didDrawPage)}return s}function Qxe(t,e){var r,n,s,i,a,o,l,c,d,p,g,m,y=X_(e.margin,40/t.scaleFactor()),w=(r=Jxe(t,e.startY))!==null&&r!==void 0?r:y.top,_;e.showFoot===!0?_="everyPage":e.showFoot===!1?_="never":_=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var S;e.showHead===!0?S="everyPage":e.showHead===!1?S="never":S=(s=e.showHead)!==null&&s!==void 0?s:"everyPage";var T=(i=e.useCss)!==null&&i!==void 0?i:!1,I=e.theme||(T?"plain":"striped"),M=!!e.horizontalPageBreak,K=(a=e.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:T,theme:I,startY:w,margin:y,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=e.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:S,showFoot:_,tableLineWidth:(p=e.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(g=e.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:M,horizontalPageBreakRepeat:K,horizontalPageBreakBehaviour:(m=e.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function Jxe(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),s=t.pageNumber(),i=!1;if(r&&r.startPageNumber){var a=r.startPageNumber+r.pageNumber-1;i=a===s}return typeof e=="number"?e:(e==null||e===!1)&&i&&r?.finalY!=null?r.finalY+20/n:null}function Zxe(t,e,r){var n=e.head||[],s=e.body||[],i=e.foot||[];if(e.html){var a=e.includeHiddenHtml;if(r){var o=bz(t,e.html,r,a,e.useCss)||{};n=o.head||n,s=o.body||n,i=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||eye(n,s,i);return{columns:l,head:n,body:s,foot:i}}function eye(t,e,r){var n=t[0]||e[0]||r[0]||[],s=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var a=1,o;Array.isArray(n)?o=n[parseInt(i)]:o=n[i],typeof o=="object"&&!Array.isArray(o)&&(a=o?.colSpan||1);for(var l=0;l<a;l++){var c=void 0;Array.isArray(n)?c=s.length:c=i+(l>0?"_".concat(l):"");var d={dataKey:c};s.push(d)}}),s}var gk=(function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t})(),tye=(function(t){gz(e,t);function e(r,n,s,i,a,o){var l=t.call(this,r,n,o)||this;return l.cell=s,l.row=i,l.column=a,l.section=i.section,l}return e})(gk),rye=(function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,s,i,a){for(var o=0,l=r;o<l.length;o++){var c=l[o],d=new tye(e,this,n,s,i,a),p=c(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],p)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,s=this.hooks.didDrawPage;n<s.length;n++){var i=s[n];i(new gk(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,s=this.hooks.willDrawPage;n<s.length;n++){var i=s[n];i(new gk(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(s,i){return s+i.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t})(),Sz=(function(){function t(e,r,n,s,i){i===void 0&&(i=!1),this.height=0,this.raw=e,e instanceof xz&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=s,this.spansMultiplePages=i}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,s){var i;return Math.max(n,((i=r.cells[s.index])===null||i===void 0?void 0:i.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var s=r.cells[n.index];return s?s.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(s,i){var a=n.cells[i.index];if(!a)return 0;var o=r.getLineHeight(a.styles.fontSize),l=a.padding("vertical"),c=l+o;return c>s?c:s},0)},t})(),Ez=(function(){function t(e,r,n){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var i=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,i=(s=e.content)!==null&&s!==void 0?s:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var a=i!=null?""+i:"",o=/\r\n|\r|\n/g;this.text=a.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");n=this.x+s/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/e*r,i=n*s+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=X_(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t})(),nye=(function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,s=e.allRows();n<s.length;n++){var i=s[n],a=i.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(r=Math.max(r,a.styles.cellWidth))}return r},t})();function sye(t,e){iye(t,e);var r=[],n=0;e.columns.forEach(function(i){var a=i.getMaxCustomCellWidth(e);a?i.width=a:(i.width=i.wrappedWidth,r.push(i)),n+=i.width});var s=e.getWidth(t.pageSize().width)-n;s&&(s=xk(r,s,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),s&&(s=xk(r,s,function(i){return i.minWidth})),s=Math.abs(s),!e.settings.horizontalPageBreak&&s>.1/t.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),oye(e),lye(e,t),aye(e)}function iye(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,s=wz(t,e);e.allRows().forEach(function(i){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],c=i.cells[l.index];if(c){var d=e.hooks.didParseCell;e.callCellHooks(t,d,c,i,l,null);var p=c.padding("horizontal");c.contentWidth=O5(c.text,c.styles,t)+p;var g=O5(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,t);if(c.minReadableWidth=g+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||n===!0)c.contentWidth>s?(c.minWidth=s,c.wrappedWidth=s):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var m=10/r;c.minWidth=c.styles.minCellWidth||m,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),e.allRows().forEach(function(i){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],c=i.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},p=d.cellWidth||d.minCellWidth;p&&typeof p=="number"&&(l.minWidth=p,l.wrappedWidth=p)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function xk(t,e,r){for(var n=e,s=t.reduce(function(m,y){return m+y.wrappedWidth},0),i=0;i<t.length;i++){var a=t[i],o=a.wrappedWidth/s,l=n*o,c=a.width+l,d=r(a),p=c<d?d:c;e-=p-a.width,a.width=p}if(e=Math.round(e*1e10)/1e10,e){var g=t.filter(function(m){return e<0?m.width>r(m):!0});g.length&&(e=xk(g,e,r))}return e}function aye(t){for(var e={},r=1,n=t.allRows(),s=0;s<n.length;s++)for(var i=n[s],a=0,o=t.columns;a<o.length;a++){var l=o[a],c=e[l.index];if(r>1)r--,delete i.cells[l.index];else if(c)c.cell.height+=i.height,r=c.cell.colSpan,delete i.cells[l.index],c.left--,c.left<=1&&delete e[l.index];else{var d=i.cells[l.index];if(!d)continue;if(d.height=i.height,d.rowSpan>1){var p=n.length-s,g=d.rowSpan>p?p:d.rowSpan;e[l.index]={cell:d,left:g,row:i}}}}}function oye(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],s=null,i=0,a=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(a-=1,a>1&&t.columns[o+1])i+=l.width,delete n.cells[l.index];else if(s){var c=s;delete n.cells[l.index],s=null,c.width=l.width+i}else{var c=n.cells[l.index];if(!c)continue;if(a=c.colSpan,i=0,c.colSpan>1){s=c,i+=l.width;continue}c.width=l.width+i}}}function lye(t,e){for(var r={count:0,height:0},n=0,s=t.allRows();n<s.length;n++){for(var i=s[n],a=0,o=t.columns;a<o.length;a++){var l=o[a],c=i.cells[l.index];if(c){e.applyStyles(c.styles,!0);var d=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=e.splitTextToSize(c.text,d+1/e.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=xP(c.text,d,c.styles,e,"...");else if(c.styles.overflow==="hidden")c.text=xP(c.text,d,c.styles,e,"");else if(typeof c.styles.overflow=="function"){var p=c.styles.overflow(c.text,d);typeof p=="string"?c.text=[p]:c.text=p}c.contentHeight=c.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var g=c.contentHeight/c.rowSpan;c.rowSpan>1&&r.count*r.height<g*c.rowSpan?r={height:g,count:c.rowSpan}:r&&r.count>0&&r.height>g&&(g=r.height),g>i.height&&(i.height=g)}}r.count--}}function xP(t,e,r,n,s){return t.map(function(i){return cye(i,e,r,n,s)})}function cye(t,e,r,n,s){var i=1e4*n.scaleFactor();if(e=Math.ceil(e*i)/i,e>=O5(t,r,n))return t;for(;e<O5(t+s,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+s}function Cz(t,e){var r=new n1(t),n=uye(e,r.scaleFactor()),s=new rye(e,n);return sye(r,s),r.applyStyles(r.userStyles),s}function uye(t,e){var r=t.content,n=hye(r.columns);if(r.head.length===0){var s=yP(n,"head");s&&r.head.push(s)}if(r.foot.length===0){var s=yP(n,"foot");s&&r.foot.push(s)}var i=t.settings.theme,a=t.styles;return{columns:n,head:xb("head",r.head,n,a,i,e),body:xb("body",r.body,n,a,i,e),foot:xb("foot",r.foot,n,a,i,e)}}function xb(t,e,r,n,s,i){var a={},o=e.map(function(l,c){for(var d=0,p={},g=0,m=0,y=0,w=r;y<w.length;y++){var _=w[y];if(a[_.index]==null||a[_.index].left===0)if(m===0){var S=void 0;Array.isArray(l)?S=l[_.index-g-d]:S=l[_.dataKey];var T={};typeof S=="object"&&!Array.isArray(S)&&(T=S?.styles||{});var I=fye(t,_,c,s,n,i,T),M=new Ez(S,I,t);p[_.dataKey]=M,p[_.index]=M,m=M.colSpan-1,a[_.index]={left:M.rowSpan-1,times:m}}else m--,g++;else a[_.index].left--,m=a[_.index].times,d++}return new Sz(l,c,t,p)});return o}function yP(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var s=dye(e,n.raw);s!=null&&(r[n.dataKey]=s)}}),Object.keys(r).length>0?r:null}function dye(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function hye(t){return t.map(function(e,r){var n,s;return typeof e=="object"?s=(n=e.dataKey)!==null&&n!==void 0?n:r:s=r,new nye(s,e,r)})}function fye(t,e,r,n,s,i,a){var o=zxe(n),l;t==="head"?l=s.headStyles:t==="body"?l=s.bodyStyles:t==="foot"&&(l=s.footStyles);var c=Vd({},o.table,o[t],s.styles,l),d=s.columnStyles[e.dataKey]||s.columnStyles[e.index]||{},p=t==="body"?d:{},g=t==="body"&&r%2===0?Vd({},o.alternateRow,s.alternateRowStyles):{},m=Uxe(i),y=Vd({},m,c,g,p);return Vd(y,a)}function pye(t,e,r){var n;r===void 0&&(r={});var s=wz(t,e),i=new Map,a=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(g){var m=e.columns.find(function(y){return y.dataKey===g||y.index===g});m&&!i.has(m.index)&&(i.set(m.index,!0),a.push(m.index),o.push(e.columns[m.index]),s-=m.wrappedWidth)});for(var c=!0,d=(n=r?.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(i.has(d)){d++;continue}var p=e.columns[d].wrappedWidth;if(c||s>=p)c=!1,a.push(d),o.push(e.columns[d]),s-=p;else break;d++}return{colIndexes:a,columns:o,lastIndex:d-1}}function mye(t,e){for(var r=[],n=0;n<e.columns.length;n++){var s=pye(t,e,{start:n});s.columns.length&&(r.push(s),n=s.lastIndex)}return r}function Az(t,e){var r=e.settings,n=r.startY,s=r.margin,i={x:s.left,y:n},a=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+s.bottom+a;if(r.pageBreak==="avoid"){var l=e.body,c=l.reduce(function(g,m){return g+m.height},0);o+=c}var d=new n1(t);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(Tz(d),i.y=s.top),e.callWillDrawPageHooks(d,i);var p=Vd({},i);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?gye(d,e,p,i):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(g){return eh(d,e,g,i,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(g,m){var y=m===e.body.length-1;M5(d,e,g,y,p,i,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(g){return eh(d,e,g,i,e.columns)})),yz(d,e,p,i),e.callEndPageHooks(d,i),e.finalY=i.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function gye(t,e,r,n){var s=mye(t,e),i=e.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(c,d){t.applyStyles(t.userStyles),d>0?j2(t,e,r,n,c.columns,!0):vP(t,e,n,c.columns),xye(t,e,r,n,c.columns),yb(t,e,n,c.columns)});else for(var a=-1,o=s[0],l=function(){var c=a;if(o){t.applyStyles(t.userStyles);var d=o.columns;a>=0?j2(t,e,r,n,d,!0):vP(t,e,n,d),c=wP(t,e,a+1,n,d),yb(t,e,n,d)}var p=c-a;s.slice(1).forEach(function(g){t.applyStyles(t.userStyles),j2(t,e,r,n,g.columns,!0),wP(t,e,a+1,n,g.columns,p),yb(t,e,n,g.columns)}),a=c};a<e.body.length-1;)l()}function vP(t,e,r,n){var s=e.settings;t.applyStyles(t.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&e.head.forEach(function(i){return eh(t,e,i,r,n)})}function xye(t,e,r,n,s){t.applyStyles(t.userStyles),e.body.forEach(function(i,a){var o=a===e.body.length-1;M5(t,e,i,o,r,n,s)})}function wP(t,e,r,n,s,i){t.applyStyles(t.userStyles),i=i??e.body.length;var a=Math.min(r+i,e.body.length),o=-1;return e.body.slice(r,a).forEach(function(l,c){var d=r+c===e.body.length-1,p=Nz(t,e,d,n);l.canEntireRowFit(p,s)&&(eh(t,e,l,n,s),o=r+c)}),o}function yb(t,e,r,n){var s=e.settings;t.applyStyles(t.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&e.foot.forEach(function(i){return eh(t,e,i,r,n)})}function yye(t,e,r){var n=r.getLineHeight(t.styles.fontSize),s=t.padding("vertical"),i=Math.floor((e-s)/n);return Math.max(0,i)}function vye(t,e,r,n){var s={};t.spansMultiplePages=!0,t.height=0;for(var i=0,a=0,o=r.columns;a<o.length;a++){var l=o[a],c=t.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var d=new Ez(c.raw,c.styles,c.section);d=Vd(d,c),d.text=[];var p=yye(c,e,n);c.text.length>p&&(d.text=c.text.splice(p,c.text.length));var g=n.scaleFactor(),m=n.getLineHeightFactor();c.contentHeight=c.getContentHeight(g,m),c.contentHeight>=e&&(c.contentHeight=e,d.styles.minCellHeight-=e),c.contentHeight>t.height&&(t.height=c.contentHeight),d.contentHeight=d.getContentHeight(g,m),d.contentHeight>i&&(i=d.contentHeight),s[l.index]=d}}var y=new Sz(t.raw,-1,t.section,s,!0);y.height=i;for(var w=0,_=r.columns;w<_.length;w++){var l=_[w],d=y.cells[l.index];d&&(d.height=y.height);var c=t.cells[l.index];c&&(c.height=t.height)}return y}function wye(t,e,r,n){var s=t.pageSize().height,i=n.settings.margin,a=i.top+i.bottom,o=s-a;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,t),c=l<r;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var d=e.hasRowSpan(n.columns),p=e.getMaxCellHeight(n.columns)>o;return p?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function M5(t,e,r,n,s,i,a){var o=Nz(t,e,n,i);if(r.canEntireRowFit(o,a))eh(t,e,r,i,a);else if(wye(t,r,o,e)){var l=vye(r,o,e,t);eh(t,e,r,i,a),j2(t,e,s,i,a),M5(t,e,l,n,s,i,a)}else j2(t,e,s,i,a),M5(t,e,r,n,s,i,a)}function eh(t,e,r,n,s){n.x=e.settings.margin.left;for(var i=0,a=s;i<a.length;i++){var o=a[i],l=r.cells[o.index];if(!l){n.x+=o.width;continue}t.applyStyles(l.styles),l.x=n.x,l.y=n.y;var c=e.callCellHooks(t,e.hooks.willDrawCell,l,r,o,n);if(c===!1){n.x+=o.width;continue}_ye(t,l,n);var d=l.getTextPos();mz(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function _ye(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var s=vz(n.lineWidth,n.fillColor);s&&t.rect(e.x,r.y,e.width,e.height,s)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),bye(t,e,r,n.lineWidth))}function bye(t,e,r,n){var s,i,a,o;n.top&&(s=r.x,i=r.y,a=r.x+e.width,o=r.y,n.right&&(a+=.5*n.right),n.left&&(s-=.5*n.left),l(n.top,s,i,a,o)),n.bottom&&(s=r.x,i=r.y+e.height,a=r.x+e.width,o=r.y+e.height,n.right&&(a+=.5*n.right),n.left&&(s-=.5*n.left),l(n.bottom,s,i,a,o)),n.left&&(s=r.x,i=r.y,a=r.x,o=r.y+e.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,s,i,a,o)),n.right&&(s=r.x+e.width,i=r.y,a=r.x+e.width,o=r.y+e.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,s,i,a,o));function l(c,d,p,g,m){t.getDocument().setLineWidth(c),t.getDocument().line(d,p,g,m,"S")}}function Nz(t,e,r,n){var s=e.settings.margin.bottom,i=e.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(s+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-s}function j2(t,e,r,n,s,i){s===void 0&&(s=[]),i===void 0&&(i=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!i&&e.foot.forEach(function(o){return eh(t,e,o,n,s)}),e.callEndPageHooks(t,n);var a=e.settings.margin;yz(t,e,r,n),Tz(t),e.pageNumber++,n.x=a.left,n.y=a.top,r.y=a.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return eh(t,e,o,n,s)}),t.applyStyles(t.userStyles))}function Tz(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function kye(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],s=kz(this,n),i=Cz(this,s);return Az(this,i),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,s){mz(e,r,n,s,this)},t.API.autoTableSetDefaults=function(e){return n1.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){n1.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new n1(this),i=bz(s,e,window,r,!1),a=i.head,o=i.body,l=((n=a[0])===null||n===void 0?void 0:n.map(function(c){return c.content}))||[];return{columns:l,rows:o,data:o}}}var vb;function _P(t,e){var r=kz(t,e),n=Cz(t,r);Az(t,n)}try{if(typeof window<"u"&&window){var bP=window,kP=bP.jsPDF||((vb=bP.jspdf)===null||vb===void 0?void 0:vb.jsPDF);kP&&kye(kP)}}catch(t){console.error("Could not apply autoTable plugin",t)}async function Sye(t){const e=new kr;e.setFont("helvetica","normal"),e.setFontSize(16),e.text("Pharmacy Profile Report",20,20),e.setFontSize(12),e.text(`Name: ${t?.displayName||"Pharmacy"}`,20,35),e.text(`Email: ${t?.email||""}`,20,45);const r=await ni(doc(ht,"pharmacies",t.uid)),n=r.exists()?r.data():{};e.text(`Address: ${n.address||""}`,20,55),e.text(`Phone: ${n.phone||""}`,20,65);const i=(await wn(_r(Zt(ht,"products"),jr("pharmacyId","==",t.uid)))).docs.map(c=>({id:c.id,...c.data()}));_P(e,{startY:75,head:[["Product Name","Category","Stock","SKU","Price"]],body:i.map(c=>[c.name,c.category,c.stock,c.sku,`${Number(c.price).toLocaleString()}`]),theme:"striped",headStyles:{fillColor:[54,165,255]},styles:{fontSize:10}});const o=(await wn(_r(Zt(ht,"orders"),jr("pharmacyId","==",t.uid)))).docs.map(c=>({id:c.id,...c.data()}));let l=e.lastAutoTable?e.lastAutoTable.finalY+10:100;e.setFontSize(14),e.text("Orders",20,l),l+=6,_P(e,{startY:l,head:[["Order ID","Date","Total","Items"]],body:o.map(c=>[c.id.slice(0,8),c.createdAt?.toDate?.().toLocaleString?.()||"",`${Number(c.total).toLocaleString()}`,(c.items||[]).map(d=>`${d.name||d.productId} x${d.qty||d.quantity||1}`).join(", ")]),theme:"striped",headStyles:{fillColor:[54,165,255]},styles:{fontSize:9}}),e.save("pharmacy-profile-report.pdf")}const Eye=({title:t,searchValue:e,onSearchChange:r,onSearchSubmit:n,onSettingsClick:s})=>{const{t:i}=qs();return Ki.createPortal(u.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:u.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"mt-8 text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-light font-poppins leading-none text-gray-900 dark:text-white",children:i("pharmacy_profile",`Pharmacy
Profile`).replace("\\n",`
`)}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:n,"aria-label":"Search",className:"ml-2 rounded-full p-2 hover:bg-sky-50",children:u.jsx(Uf,{className:"h-5 w-5 text-sky-600 mt-8"})}),u.jsx("button",{onClick:s,"aria-label":"Open settings",className:"ml-2 rounded-full p-2 hover:bg-sky-50 transition-all duration-200",children:u.jsx(v5,{className:"h-5 w-5 text-sky-600 mt-8"})})]})]})})}),document.body)};function Iz({onSwitchToCustomer:t}){const{user:e,logout:r,profile:n}=Dn(),{t:s}=qs(),[i,a]=j.useState([]),[o,l]=j.useState(!1),[c,d]=j.useState(0),[p,g]=j.useState(0),[m,y]=j.useState(0),[w,_]=j.useState(null),[S,T]=j.useState(""),[I,M]=j.useState(""),[K,W]=j.useState(""),[L,A]=j.useState(""),[E,D]=j.useState(""),[R,F]=j.useState(""),[V,Z]=j.useState(null),[fe,xe]=j.useState(!1),[he,ae]=j.useState(!1),[H,te]=j.useState(!1),[G,P]=j.useState(new Set),[U,X]=j.useState({displayName:e?.displayName||"Pharmacy",address:"",phone:"",email:e?.email||"",isVerified:n?.isVerified??!1}),[J,ie]=j.useState(""),[ve,ke]=j.useState(""),[oe,Ee]=j.useState(!1),[Oe,ne]=j.useState("products"),[we,Re]=j.useState(null),[pe,Ke]=j.useState(!0),[ze,ot]=j.useState(!1),[Be,He]=j.useState({pharmacyName:"",contactName:"",contactEmail:"",contactPhone:"",addressLine1:"",city:"",state:"",postalCode:"",registrationNumber:"",taxId:"",licenseUrl:"",ownerIdUrl:"",website:"",ownerName:"",yearsInBusiness:"",additionalNotes:""}),[ut,Ct]=j.useState(""),[Et,Le]=j.useState(!1),[Ye,Qe]=j.useState(""),le={pending:{label:"Pending review",tone:"bg-amber-100 text-amber-700"},in_review:{label:"In review",tone:"bg-sky-100 text-sky-700"},approved:{label:"Verified",tone:"bg-emerald-100 text-emerald-700"},rejected:{label:"Rejected",tone:"bg-rose-100 text-rose-700"},needs_more_info:{label:"Action required",tone:"bg-amber-100 text-amber-700"}},[je,We]=j.useState(0),lt=[{key:"business",title:"Business details",description:"Introduce your pharmacy and primary point of contact."},{key:"compliance",title:"Compliance documents",description:"Share your registered address and regulatory identifiers."},{key:"extras",title:"Optional extras",description:"Add supporting context to speed up approval."}],yt={0:["pharmacyName","contactName","contactEmail","contactPhone"],1:["addressLine1","city","state","registrationNumber","licenseUrl"]},$t=lt.length,[Xt,At]=j.useState(!1),Vt=j.useRef(null),Or=j.useRef(Be),rr=j.useRef(je),Sr=j.useRef(null);j.useEffect(()=>{e&&e.role==="pharmacy"&&ne("all")},[e]),j.useEffect(()=>{if(!e?.uid){Re(null);return}Ke(!0);const Fe=_r(Zt(ht,"verificationQueue"),jr("submittedByUid","==",e.uid)),zt=In(Fe,Qt=>{const nr=Qt.docs[0];nr?(Sr.current=nr.id,Re({id:nr.id,...nr.data()})):(Sr.current=null,Re(null)),Ke(!1)},Qt=>{console.error("[ProfilePharmacy] verification listener error",Qt),Ke(!1)});return()=>zt()},[e?.uid]),j.useEffect(()=>{Or.current=Be},[Be]),j.useEffect(()=>{rr.current=je},[je]),j.useEffect(()=>()=>{Vt.current&&clearTimeout(Vt.current)},[]),j.useEffect(()=>{if(!ze)return;const Fe=vr();He(Fe),Or.current=Fe,Ct("");const zt=typeof we?.draftStep=="number"?Math.min(Math.max(0,we.draftStep),$t-1):0;We(zt),rr.current=zt},[ze,we,U,n,e]);const[Cr,Bn]=j.useState(null),[bn,Yr]=j.useState([]),[hr,Jr]=j.useState(null),[ha,ms]=j.useState(null),[Pi,gs]=j.useState(null),vr=()=>{const Fe=Array.isArray(we?.documents)?we.documents:[],zt=Qt=>{const nr=Qt.toLowerCase();return Fe.find(sn=>(sn?.name||"").toLowerCase()===nr)?.url};return{pharmacyName:we?.entityName||U.displayName||n?.businessName||"",contactName:we?.contactName||n?.ownerName||"",contactEmail:we?.contactEmail||U.email||e?.email||"",contactPhone:we?.contactPhone||U.phone||"",addressLine1:we?.location?.addressLine1||U.address||"",city:we?.location?.city||"",state:we?.location?.state||"",postalCode:we?.location?.postalCode||"",registrationNumber:we?.registrationNumber||n?.registrationNumber||"",taxId:we?.taxId||n?.taxId||"",licenseUrl:zt("pharmacy license")||zt("license")||Fe[0]?.url||"",ownerIdUrl:zt("owner id")||zt("owner identification")||"",website:we?.metadata?.website||n?.website||"",ownerName:we?.metadata?.ownerName||n?.ownerName||"",yearsInBusiness:we?.metadata?.yearsInBusiness||"",additionalNotes:we?.notes||""}},Nn=Fe=>{const zt=[Fe.licenseUrl?.trim()?{name:"Pharmacy License",url:Fe.licenseUrl.trim()}:null,Fe.ownerIdUrl?.trim()?{name:"Owner Identification",url:Fe.ownerIdUrl.trim()}:null].filter(Boolean),Qt={addressLine1:Fe.addressLine1?.trim()||"",city:Fe.city?.trim()||"",state:Fe.state?.trim()||"",postalCode:Fe.postalCode?.trim()||""},nr={website:Fe.website?.trim()||null,ownerName:Fe.ownerName?.trim()||null,yearsInBusiness:Fe.yearsInBusiness?.trim()||null};return{entityName:Fe.pharmacyName?.trim()||"",contactName:Fe.contactName?.trim()||"",contactEmail:Fe.contactEmail?.trim()||"",contactPhone:Fe.contactPhone?.trim()||"",registrationNumber:Fe.registrationNumber?.trim()||"",taxId:Fe.taxId?.trim()||"",documents:zt,location:Qt,metadata:nr,notes:Fe.additionalNotes?.trim()||""}},Ri=async(Fe,zt)=>{if(!e?.uid||Et||(Vt.current=null,!ze))return;const Qt=Fe||Or.current,nr=typeof zt=="number"?zt:rr.current,sn={...Nn(Qt),draftStep:nr,updatedAt:_s()};try{At(!0);const Es=we?.id||Sr.current;if(Es)await us(er(ht,"verificationQueue",Es),{...sn});else{const Vn=await Qd(Zt(ht,"verificationQueue"),{...sn,applicantType:"pharmacy",submittedBy:U.displayName||e?.displayName||e?.email||"Pharmacy",submittedByUid:e?.uid||"",priority:"medium",status:"draft",draft:!0,createdAt:_s()});Sr.current=Vn.id}}catch(Es){console.error("[ProfilePharmacy] verification autosave failed",Es)}finally{At(!1)}},Gn=(Fe,zt)=>{if(!ze||Et)return;Vt.current&&clearTimeout(Vt.current);const Qt=Fe||Or.current,nr=typeof zt=="number"?zt:rr.current;Vt.current=setTimeout(()=>{Ri(Qt,nr)},600)},ln=(Fe,zt)=>{He(Qt=>{const nr={...Qt,[Fe]:zt};return Or.current=nr,Gn(nr,rr.current),nr})},Ln=(Fe=je)=>(yt[Fe]||[]).filter(nr=>!String(Be[nr]||"").trim()).length?(Ct("Please fill in all required fields before continuing."),!1):(Ct(""),!0),ss=()=>{Ln(je)&&We(Fe=>{const zt=Math.min(Fe+1,$t-1);return rr.current=zt,Gn(Or.current,zt),zt})},ce=()=>{Ct(""),We(Fe=>{const zt=Math.max(Fe-1,0);return rr.current=zt,Gn(Or.current,zt),zt})},Te=(Fe,zt="pending")=>({actor:U.displayName||e?.displayName||e?.email||"Pharmacy",message:Fe,status:zt,timestamp:new Date}),be=Fe=>le[Fe]||{label:"Not submitted",tone:"bg-slate-200 text-slate-600"},Se=Fe=>{try{if(!Fe)return"";const zt=Fe.toDate?Fe.toDate():new Date(Fe);return!zt||Number.isNaN(zt.getTime())?"":zt.toLocaleString()}catch{return""}},Pe=async Fe=>{if(Fe?.preventDefault&&Fe.preventDefault(),Et||!Ln(je))return;if(["pharmacyName","contactName","contactEmail","contactPhone","addressLine1","city","state","registrationNumber","licenseUrl"].filter(nr=>!String(Be[nr]||"").trim()).length>0){Ct("Please fill in all required fields before submitting.");return}Le(!0),Ct("");try{const gr={...Nn(Be),status:"pending",draft:!1,draftStep:null,updatedAt:_s()};if(we?.id){const sn=er(ht,"verificationQueue",we.id);await us(sn,{...gr,auditTrail:_2(Te("Pharmacy updated verification submission","pending"))})}else{const sn=await Qd(Zt(ht,"verificationQueue"),{...gr,applicantType:"pharmacy",submittedBy:U.displayName||e?.displayName||e?.email||"Pharmacy",submittedByUid:e?.uid||"",priority:"medium",submittedAt:_s(),auditTrail:[Te("Pharmacy submitted verification request")],checklist:{licenseValidated:!1,addressVerified:!1,taxIdVerified:!1,phoneVerified:!1}});Sr.current=sn.id}Qe("Your verification documents have been sent for review."),Vt.current&&(clearTimeout(Vt.current),Vt.current=null),ot(!1),We(0),rr.current=0}catch(nr){console.error("[ProfilePharmacy] verification submission failed",nr),Ct(nr?.message||"Unable to submit verification right now. Please try again.")}finally{Le(!1)}},Ie=40;function Xe(Fe){if(!Fe)return null;if(Fe.latitude&&Fe.longitude)return{lat:Number(Fe.latitude),lng:Number(Fe.longitude)};if(Fe.lat&&Fe.lng)return{lat:Number(Fe.lat),lng:Number(Fe.lng)};if(Fe.lat&&Fe.lon)return{lat:Number(Fe.lat),lng:Number(Fe.lon)};if(Fe.location&&typeof Fe.location=="object"){if(Fe.location.lat&&Fe.location.lng)return{lat:Number(Fe.location.lat),lng:Number(Fe.location.lng)};if(Fe.location.latitude&&Fe.location.longitude)return{lat:Number(Fe.location.latitude),lng:Number(Fe.location.longitude)}}if(Fe.coords&&typeof Fe.coords=="object"){if(Fe.coords.latitude&&Fe.coords.longitude)return{lat:Number(Fe.coords.latitude),lng:Number(Fe.coords.longitude)};if(Fe.coords.lat&&Fe.coords.lng)return{lat:Number(Fe.coords.lat),lng:Number(Fe.coords.lng)}}return null}function ft(Fe,zt){if(!Fe||!zt)return null;const Qt=Ps=>Ps*Math.PI/180,nr=6371,gr=Qt(zt.lat-Fe.lat),sn=Qt(zt.lng-Fe.lng),Es=Qt(Fe.lat),Vn=Qt(zt.lat),Sn=Math.sin(gr/2),jn=Math.sin(sn/2),Hs=Sn*Sn+Math.cos(Es)*Math.cos(Vn)*jn*jn,cn=2*Math.atan2(Math.sqrt(Hs),Math.sqrt(1-Hs));return nr*cn}function tt(Fe,zt){if(Fe==null||zt==null||zt<=0)return null;const Qt=Fe/zt,nr=Math.round(Qt*60);if(nr<60)return`${nr} min`;const gr=Math.floor(nr/60),sn=nr%60;return`${gr}h ${sn}m`}j.useEffect(()=>{if(ha||!("geolocation"in navigator))return;let Fe=!0;return navigator.geolocation.getCurrentPosition(zt=>{Fe&&ms({lat:zt.coords.latitude,lng:zt.coords.longitude})},zt=>{console.debug("[ProfilePharmacy] geolocation error",zt)},{enableHighAccuracy:!1,timeout:1e4}),()=>{Fe=!1}},[]),j.useEffect(()=>{if(!hr)return gs(null);const Fe=Xe(hr.data);if(!Fe){gs(null);return}let zt=ha||null;if(!zt&&hr&&hr.source==="users"){const gr=Xe(hr.data);gr&&(zt=gr)}if(!zt){gs(null);return}const Qt=ft(zt,Fe);if(Qt==null){gs(null);return}const nr=tt(Qt,Ie);gs({distanceKm:Qt,eta:nr,speedKmh:Ie,pharmCoords:Fe,custCoords:zt})},[hr,ha]);const et=Jn();j.useEffect(()=>{const Fe=n?.uid||e?.uid;if(Fe)return F_(a,Fe)},[n,e]),j.useEffect(()=>{const Fe=n?.uid||e?.uid;if(!Fe)return;wn(_r(Zt(ht,"orders"),jr("pharmacyId","==",Fe))).then(Sn=>{let jn=0;Sn.forEach(Hs=>{const cn=Hs.data();jn+=(cn.items||[]).reduce((Ps,Ta)=>Ps+(Ta.count||Ta.qty||Ta.quantity||1),0)}),d(jn)}).catch(()=>{}),wn(_r(Zt(ht,"threads"),jr("vendorId","==",Fe))).then(Sn=>{g(Sn.size)}).catch(()=>{}),wn(_r(Zt(ht,"reviews"),jr("pharmacyId","==",Fe))).then(Sn=>{y(Sn.size)}).catch(()=>{});const zt=er(ht,"pharmacies",Fe),Qt=er(ht,"users",Fe);let nr=null,gr=null;const sn=()=>{const Sn=jn=>{if(!jn)return"";const Hs=String(jn).trim();return!Hs||Hs.includes("@")||Hs.replace(/\D/g,"").length<6?"":Hs};try{console.debug("[ProfilePharmacy] refreshProfile - pharmData:",nr,"userData:",gr)}catch{}X(jn=>{const Hs=nr&&nr.displayName||gr&&gr.displayName||e.displayName||jn.displayName,cn=nr&&nr.address||gr&&gr.address||jn.address||"",Ps=nr&&nr.phone||gr&&gr.phone||jn.phone||"",Ta=Sn(Ps),Ko=nr&&nr.email||gr&&gr.email||e.email||jn.email||"",Yo=(nr&&nr.isVerified)??(gr&&gr.isVerified)??jn.isVerified??!1;try{console.debug("[ProfilePharmacy] computed profile ->",{displayName:Hs,address:cn,rawPhone:Ps,phone:Ta,email:Ko,isVerified:Yo})}catch{}return{displayName:Hs,address:cn,phone:Ta,email:Ko,isVerified:Yo}})},Es=In(zt,Sn=>{nr=Sn&&Sn.exists?Sn.data():null,sn()},()=>{}),Vn=In(Qt,Sn=>{gr=Sn&&Sn.exists?Sn.data():null,sn()},()=>{});return sn(),()=>{try{Es&&Es()}catch{}try{Vn&&Vn()}catch{}}},[n,e]);async function at(){await Sye(n||e)}async function Tt(){if(!w)return;let Fe=R;await us(er(ht,"products",w.id),{name:S,category:I,stock:Number(K),sku:L,price:Number(E),image:Fe||w.image||"",description:J}),_(null)}function Ut(){_(null)}j.useEffect(()=>{w&&(T(w.name||""),M(w.category||""),W(w.stock||""),A(w.sku||""),D(w.price||""),F(w.image||""),Z(null),ie(w.description||""))},[w]);async function Gt(){const Fe=(ve||"").trim().toLowerCase();if(!Fe){Yr([]);return}const zt=[];if((Oe==="products"||Oe==="all")&&i.forEach(Qt=>{`${Qt.name||""} ${Qt.category||""} ${Qt.sku||""}`.toLowerCase().includes(Fe)&&zt.push({type:"product",title:Qt.name||"Untitled",subtitle:`${Qt.category||"Uncategorized"}  SKU: ${Qt.sku||""}`,item:Qt})}),Oe==="orders"||Oe==="all"){let Qt=Cr;Qt||(Qt=(await wn(_r(Zt(ht,"orders"),jr("pharmacyId","==",n?.uid||e?.uid)))).docs.map(gr=>({id:gr.id,...gr.data()})),Bn(Qt)),(Qt||[]).forEach(nr=>{`${nr.id} ${(nr.items||[]).map(sn=>sn.name).join(" ")} ${nr.customerName||""}`.toLowerCase().includes(Fe)&&zt.push({type:"order",title:`Order ${nr.id}`,subtitle:`${nr.items?.length||0} items  ${Number(nr.total||0).toLocaleString()}`,item:nr})})}Yr(zt)}j.useEffect(()=>{if(!oe)return;function Fe(zt){zt.key==="Escape"&&(Ee(!1),ke(""),Yr([]))}return window.addEventListener("keydown",Fe),()=>window.removeEventListener("keydown",Fe)},[oe]),j.useEffect(()=>{if(!oe)return;if(!(ve||"").trim()){Yr([]);return}const zt=setTimeout(()=>{Gt()},300);return()=>clearTimeout(zt)},[ve,Oe,oe]);function Ot(Fe){try{return Fe&&Fe.toDate?Fe.toDate().toISOString():Fe||""}catch{return""}}function Pt(){if(!i||i.length===0){alert("No products to export");return}const Fe=i.map(sn=>({id:sn.id,name:sn.name||"",category:sn.category||"",sku:sn.sku||"",price:Number(sn.price||0),stock:Number(sn.stock||0),description:sn.description||"",image:sn.image||"",createdAt:Ot(sn.createdAt)})),zt=fB.unparse(Fe),Qt=new Blob([zt],{type:"text/csv;charset=utf-8;"}),nr=URL.createObjectURL(Qt),gr=document.createElement("a");gr.href=nr,gr.download=`pharmacy-inventory-${e?.uid||"inventory"}.csv`,document.body.appendChild(gr),gr.click(),gr.remove(),URL.revokeObjectURL(nr)}function Ar(){if(!i||i.length===0){alert("No products to export");return}const Fe=i.map(Vn=>({id:Vn.id,name:Vn.name||"",category:Vn.category||"",sku:Vn.sku||"",price:Number(Vn.price||0),stock:Number(Vn.stock||0),description:Vn.description||"",image:Vn.image||"",createdAt:Ot(Vn.createdAt)})),zt=ww.json_to_sheet(Fe),Qt=ww.book_new();ww.book_append_sheet(Qt,zt,"Inventory");const nr=vU(Qt,{bookType:"xlsx",type:"array"}),gr=new Blob([nr],{type:"application/octet-stream"}),sn=URL.createObjectURL(gr),Es=document.createElement("a");Es.href=sn,Es.download=`pharmacy-inventory-${e?.uid||"inventory"}.xlsx`,document.body.appendChild(Es),Es.click(),Es.remove(),URL.revokeObjectURL(sn)}const Xr=(we?.status||"").toLowerCase(),Ur=be(Xr),kn=!we||["rejected","needs_more_info","draft",""].includes(Xr),Aa=we?Xr==="draft"?"Continue Verification":"Update Verification":"Verify my Account",Na=Xr==="approved"?"Verified":Xr==="in_review"?"In review":"Submission received";if(!e)return u.jsx(cp,{lines:4,className:"my-8"});function Qi({user:Fe}){return!Fe||Fe.role!=="superuser"?null:u.jsxs("div",{className:"mt-8 rounded-3xl border bg-yellow-50 dark:bg-gray-700 border-yellow-400 dark:border-gray-600 p-4 flex flex-col items-start relative",children:[u.jsx("div",{className:"text-[20px] font-bold text-yellow-700 dark:text-yellow-400 mb-2",children:"Superuser Dashboard"}),u.jsxs("ul",{className:"space-y-2 text-[15px] text-yellow-900",children:[u.jsx("li",{children:"Manage all users (view, edit, suspend, delete)"}),u.jsx("li",{children:"Product oversight (add, edit, remove, approve/reject)"}),u.jsx("li",{children:"Prescription management"}),u.jsx("li",{children:"Analytics & reports"}),u.jsx("li",{children:"Moderation (reviews, chats, reported content)"}),u.jsx("li",{children:"System settings"}),u.jsx("li",{children:"Bulk operations"}),u.jsx("li",{children:"Audit logs"}),u.jsx("li",{children:"Impersonate users"})]}),u.jsx("div",{className:"mt-4 text-[13px] text-yellow-700",children:"(Feature scaffolding: UI and logic for each capability can be expanded here.)"})]})}return u.jsxs(u.Fragment,{children:[u.jsx(Eye,{title:"Pharmacy Profile",searchValue:ve,onSearchChange:Fe=>ke(Fe.target.value),onSearchSubmit:()=>{Gt(),Ee(!0)},onSettingsClick:()=>et("/settings")}),u.jsxs("div",{className:"pt-28 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col animate-fadeInUp",children:[u.jsx(Qi,{user:e}),oe&&u.jsx("div",{onClick:()=>{Ee(!1),ke(""),Yr([])},className:"fixed inset-0 z-50 flex items-start justify-center pt-24 bg-black/50",role:"dialog","aria-modal":"true","aria-label":"Search modal",children:u.jsxs("div",{onClick:Fe=>Fe.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-3xl w-[min(920px,95%)] p-4 shadow-xl border border-[#9ED3FF] dark:border-gray-600 max-h-[80vh] overflow-hidden",children:[u.jsxs("div",{className:"mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3 w-full",children:[u.jsx("div",{className:"flex-1 min-w-0",children:u.jsxs("div",{className:"flex items-center bg-[#F0FAFF] dark:bg-gray-700 border border-[#9ED3FF] dark:border-gray-600 rounded-full px-3 py-2 w-full overflow-hidden",children:[u.jsx(Uf,{className:"h-4 w-4 text-sky-600 dark:text-sky-400 mr-2 flex-shrink-0"}),u.jsx("input",{autoFocus:!0,value:ve,onChange:Fe=>ke(Fe.target.value),onKeyDown:Fe=>{Fe.key==="Enter"&&Gt()},placeholder:"Search products, orders, customers...",className:"flex-1 min-w-0 bg-transparent text-sm outline-none truncate dark:text-white dark:placeholder:text-gray-400","aria-label":"Search query"})]})}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsxs("select",{value:Oe,onChange:Fe=>ne(Fe.target.value),className:"rounded-full border border-[#9ED3FF] dark:border-gray-600 px-3 py-2 text-sm bg-white dark:bg-gray-700 dark:text-white w-36",children:[u.jsx("option",{value:"products",children:"Products"}),u.jsx("option",{value:"orders",children:"Orders"}),u.jsx("option",{value:"all",children:"All"})]})})]}),u.jsx("div",{className:"w-full border-t mt-3",style:{borderColor:"#E6F7FF"}})]}),u.jsx("div",{className:"mt-4 max-h-[60vh] overflow-auto px-1 py-2",children:bn.length===0?u.jsx("div",{className:"text-zinc-500 dark:text-gray-300 p-4",children:"No results yet. Enter a query."}):u.jsx("ul",{className:"space-y-2",children:bn.map((Fe,zt)=>u.jsxs("li",{className:"p-2 rounded-2xl border border-[#9ED3FF] dark:border-gray-600 bg-white dark:bg-gray-700 hover:bg-[#E3F3FF] dark:hover:bg-gray-600 transition-all duration-200 flex items-center gap-3 justify-between animate-fadeInUp card-interactive hover:shadow-md",style:{animationDelay:`${zt*.05}s`},children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[u.jsx("div",{className:"flex-shrink-0",children:Fe.type==="product"?u.jsx(sc,{name:Fe.item?.name,image:Fe.item?.image,category:Fe.item?.category,size:48,className:"rounded-lg"}):u.jsx("div",{className:"h-12 w-12 rounded-lg bg-[#fff7ed] dark:bg-gray-600 flex items-center justify-center border border-[#ffd7a8] dark:border-gray-500 animate-pulse-gentle",children:u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",className:"text-orange-500 dark:text-orange-400",children:u.jsx("path",{d:"M3 7h18M3 12h18M3 17h18",stroke:"#f59e0b",strokeWidth:"1.5",strokeLinecap:"round"})})})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("div",{className:"font-semibold text-sm text-black dark:text-white truncate",children:Fe.title}),u.jsx("div",{className:"text-xs text-zinc-500 dark:text-gray-300 truncate",children:Fe.subtitle})]})]}),u.jsx("div",{className:"flex-shrink-0 flex items-center gap-2",children:Fe.type==="product"?u.jsx("button",{onClick:()=>{_(Fe.item),Ee(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 dark:hover:bg-gray-600 btn-interactive transition-all duration-200",children:"Edit"}):u.jsx("button",{onClick:()=>{et("/orders",{state:{highlightOrderId:Fe.item.id}}),Ee(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 dark:hover:bg-gray-600 btn-interactive transition-all duration-200",children:"Open"})})]},zt))})})]})}),u.jsxs("div",{className:"mt-8 w-full grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-6 items-start",children:[u.jsx("aside",{className:"min-w-0 lg:pr-2",children:u.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 flex flex-col items-start relative lg:sticky lg:top-24 overflow-hidden",children:[u.jsx("div",{className:"mb-2",children:e?.photoURL?u.jsx("img",{src:e.photoURL,alt:"Avatar",className:"h-16 w-16 rounded-full object-cover border border-[#9ED3FF] dark:border-gray-500 shadow"}):u.jsx("div",{className:"h-16 w-16 rounded-full bg-[#E3F3FF] dark:bg-gray-600 flex items-center justify-center border border-[#9ED3FF] dark:border-gray-500 shadow",children:u.jsx("span",{className:"text-sky-600 dark:text-sky-400 text-2xl font-light",children:U.displayName&&U.displayName.charAt?U.displayName.charAt(0):"P"})})}),u.jsx(hu,{name:U.displayName||"Pharmacy",isVerified:U.isVerified,className:"text-3xl font-light font-poppins text-sky-600 dark:text-sky-400 mb-1 tracking-tight truncate w-full",nameClassName:"truncate",iconClassName:"h-5 w-5 text-sky-500 dark:text-sky-400"}),u.jsx("div",{className:"w-full border-b dark:border-gray-600 mb-2",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"}}),u.jsx("div",{className:"text-[13px] text-zinc-500 font-light mb-1 truncate w-full",children:U.email||e?.email}),U.address&&u.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 flex items-center truncate w-full",children:[u.jsx(Nc,{className:"h-4 w-4 mr-1 flex-shrink-0"}),u.jsx("span",{className:"truncate",children:U.address})]}),U.phone&&u.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 flex items-center truncate w-full",children:[u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mr-1 flex-shrink-0",children:u.jsx("path",{d:"M2.41333 5.19333C3.37333 7.08 4.92 8.62667 6.80667 9.58667L8.27333 8.12C8.46 7.93333 8.72 7.88 8.95333 7.95333C9.7 8.2 10.5 8.33333 11.3333 8.33333C11.5101 8.33333 11.6797 8.40357 11.8047 8.5286C11.9298 8.65362 12 8.82319 12 9V11.3333C12 11.5101 11.9298 11.6797 11.8047 11.8047C11.6797 11.9298 11.5101 12 11.3333 12C8.32755 12 5.44487 10.806 3.31946 8.68054C1.19404 6.55513 0 3.67245 0 0.666667C0 0.489856 0.0702379 0.320286 0.195262 0.195262C0.320286 0.0702379 0.489856 0 0.666667 0H3C3.17681 0 3.34638 0.0702379 3.4714 0.195262C3.59643 0.320286 3.66667 0.489856 3.66667 0.666667C3.66667 1.5 3.8 2.3 4.04667 3.04667C4.12 3.28 4.06667 3.54 3.88 3.72667L2.41333 5.19333Z",fill:"#7D7D7D"})}),u.jsx("span",{className:"truncate",children:U.phone})]}),Pi&&u.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 w-full truncate",children:["ETA: ",u.jsx("span",{className:"text-sky-600 font-medium",children:Pi.eta}),"  ",Pi.distanceKm.toFixed(2)," km"]}),u.jsx("div",{className:"w-full mt-4 hidden lg:flex justify-start",children:u.jsxs("button",{onClick:async()=>{await r(),window.location.href="/auth/landing"},className:"rounded-full border border-red-300 dark:border-gray-600 text-red-600 dark:text-red-400 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:[u.jsx(q6,{className:"h-4 w-4"})," ",s("log_out","Log Out")]})})]})}),u.jsxs("section",{className:"min-w-0 space-y-6 lg:max-h-[calc(100vh-7rem)] lg:overflow-auto lg:pr-1",children:[u.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 flex flex-col gap-4 relative overflow-hidden",children:[u.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[u.jsxs("div",{className:"space-y-2 max-w-xl",children:[u.jsx("div",{className:"text-[18px] font-light font-poppins text-black dark:text-white tracking-tight",children:"Account Verification"}),pe?u.jsx(cp,{lines:2,className:"max-w-sm"}):u.jsx("p",{className:"text-[12px] text-zinc-500 dark:text-zinc-400 font-light leading-relaxed",children:we?"We'll notify you as soon as compliance completes the review of your documents.":"Submit your regulatory documents to unlock order fulfillment, payouts, and marketplace visibility."}),Ye&&u.jsx("p",{className:"text-[12px] text-emerald-600 dark:text-emerald-400 font-medium",children:Ye})]}),!pe&&u.jsx("span",{className:`self-start rounded-full px-3 py-1 text-[11px] font-semibold uppercase ${Ur.tone}`,children:Ur.label})]}),!pe&&Xr==="needs_more_info"&&u.jsx("p",{className:"text-[12px] text-amber-600 dark:text-amber-400",children:"Compliance requested additional information. Please update your submission below."}),!pe&&Xr==="rejected"&&u.jsx("p",{className:"text-[12px] text-rose-600 dark:text-rose-400",children:"Your previous submission was rejected. Review the notes and try again."}),!pe&&Xr==="approved"&&u.jsx("p",{className:"text-[12px] text-emerald-600 dark:text-emerald-400",children:"Your pharmacy is verified. Customers will now see a verification badge across Pharmasea."}),!pe&&we?.reviewerNote&&u.jsxs("p",{className:"text-[12px] text-slate-500 dark:text-slate-300",children:["Note from reviewer:",u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-100",children:we.reviewerNote})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[!pe&&kn?u.jsx("button",{type:"button",onClick:()=>{Qe(""),ot(!0)},className:"rounded-full bg-sky-600 text-white text-[12px] font-medium px-5 py-2 shadow hover:bg-sky-700 transition",children:Aa}):u.jsx("button",{type:"button",disabled:!0,className:"rounded-full bg-slate-200 text-slate-500 text-[12px] font-medium px-5 py-2 cursor-not-allowed",children:pe?"Checking status...":Na}),we?.updatedAt&&!pe&&u.jsxs("span",{className:"text-[12px] text-zinc-500 dark:text-zinc-400",children:["Last updated ",Se(we.updatedAt)]})]})]}),u.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 flex flex-col items-start relative overflow-hidden",children:[u.jsx("div",{className:"text-[18px] font-light font-poppins text-black dark:text-white mb-2 tracking-tight",children:s("storefront_preview","Storefront Preview")}),u.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b dark:border-gray-600",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[u.jsx("span",{className:"text-[12px] text-zinc-500 dark:text-zinc-400 font-light",children:s("inventory","Inventory")}),u.jsx("span",{className:"text-[12px] text-sky-600 dark:text-sky-400 font-medium",children:i.length})]}),u.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[u.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:s("products_sold","Products Sold")}),u.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:c})]}),u.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[u.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:s("active_chats","Active Chats")}),u.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:p})]}),u.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[u.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:s("reviews","Reviews")}),u.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:m})]}),u.jsx("div",{className:"w-full flex justify-end mt-4",children:u.jsxs("button",{className:"px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light flex items-center gap-1 shadow hover:bg-sky-700",onClick:at,children:[u.jsx(wie,{className:"h-4 w-4"})," ",s("download_report","Download report")]})})]}),u.jsxs("div",{className:"flex gap-2 w-full",children:[u.jsxs("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700",onClick:()=>et(`/add-product?pharmacyId=${n?.uid||e?.uid}`),children:["+ ",s("add_product","Add Product")]}),u.jsx("button",{className:"flex-1 rounded-full border border-sky-600 dark:border-gray-600 dark:border-gray-600 text-sky-600 dark:text-sky-400 text-[13px] font-light py-2 hover:bg-[#E3F3FF] dark:hover:bg-gray-700",onClick:()=>l(!0),children:s("bulk_upload","Bulk Upload")})]}),u.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 relative overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("div",{className:"text-[17px] font-light font-poppins text-black dark:text-white tracking-tight",children:s("products","Products")}),i.length>3&&u.jsx("button",{className:"text-sky-600 text-[13px] font-light px-3 py-1 rounded-full hover:bg-[#E3F3FF]",onClick:()=>te(Fe=>!Fe),children:H?s("see_less","See less"):s("see_more","See more")})]}),u.jsxs("div",{className:"space-y-3",children:[(H?i:i.slice(0,3)).map(Fe=>u.jsxs("button",{className:"w-full text-left rounded-2xl border border-[#9ED3FF] dark:border-gray-600 p-3 flex items-center gap-3 bg-white dark:bg-gray-700 hover:bg-[#E3F3FF] dark:hover:bg-gray-600 transition shadow-sm min-w-0 overflow-hidden",onClick:()=>_(Fe),type:"button",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx(sc,{name:Fe.name,image:Fe.image,category:Fe.category,size:30,className:"border border-[#9ED3FF] dark:border-gray-500",roundedClass:"rounded-xl"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-semibold text-[15px] text-black dark:text-white truncate",children:Fe.name}),u.jsxs("div",{className:"text-zinc-500 dark:text-zinc-400 text-[12px] font-light truncate",children:[Fe.category,"  Stock: ",Fe.stock,"  SKU: ",Fe.sku]})]}),u.jsxs("div",{className:"text-[15px] font-semibold text-sky-600 dark:text-sky-400 ml-3 flex-shrink-0 whitespace-nowrap",children:["",Number(Fe.price).toLocaleString()]})]},Fe.id)),i.length===0&&u.jsx("div",{className:"text-zinc-500",children:s("no_products_yet","No products yet. Use the buttons above to add or bulkupload.")})]}),u.jsxs("div",{className:"w-full flex justify-end mt-3",children:[u.jsx("button",{onClick:Pt,className:"mr-2 px-4 py-2 rounded-full border border-sky-600 dark:border-gray-600 dark:border-gray-600 text-sky-600 dark:text-sky-400 text-[13px] font-light hover:bg-[#E3F3FF] dark:hover:bg-gray-700",children:s("download_csv","Download CSV")}),u.jsx("button",{onClick:Ar,className:"px-4 py-2 rounded-full bg-sky-600 text-white text-[13px] font-light hover:bg-sky-700",children:s("download_excel","Download Excel")})]})]})]})]}),u.jsx(M_,{open:ze,onClose:()=>{Et||(ot(!1),We(0),Ct(""))},children:u.jsxs("form",{onSubmit:Pe,className:"flex flex-col gap-5",children:[u.jsxs("header",{className:"space-y-1",children:[u.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Pharmacy Verification"}),u.jsx("h3",{className:"text-2xl font-semibold text-slate-900 dark:text-white",children:we?"Update submission":"Verify your pharmacy"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-300",children:lt[je]?.description})]}),u.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 dark:text-slate-400",children:[u.jsxs("span",{className:"font-semibold",children:["Step ",je+1," of ",$t]}),u.jsx("div",{className:"flex flex-1 items-center gap-1",children:lt.map((Fe,zt)=>u.jsx("span",{className:`h-1.5 flex-1 rounded-full transition-all ${zt<=je?"bg-sky-500":"bg-slate-200 dark:bg-slate-700"}`},Fe.key))})]}),Xt?u.jsx("p",{className:"text-[11px] text-slate-400 italic",children:"Saving draft"}):we?.status==="draft"?u.jsx("p",{className:"text-[11px] text-slate-400",children:"Draft saved"}):null,ut&&u.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700 dark:border-rose-400/40 dark:bg-rose-500/10 dark:text-rose-200",children:ut}),je===0&&u.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[u.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300 sm:col-span-2",children:["Pharmacy name *",u.jsx("input",{type:"text",value:Be.pharmacyName,onChange:Fe=>ln("pharmacyName",Fe.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),u.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Primary contact *",u.jsx("input",{type:"text",value:Be.contactName,onChange:Fe=>ln("contactName",Fe.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),u.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Contact email *",u.jsx("input",{type:"email",value:Be.contactEmail,onChange:Fe=>ln("contactEmail",Fe.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),u.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Contact phone *",u.jsx("input",{type:"tel",value:Be.contactPhone,onChange:Fe=>ln("contactPhone",Fe.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]})]}),je===1&&u.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[u.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300 sm:col-span-2",children:["Street address *",u.jsx("input",{type:"text",value:Be.addressLine1,onChange:Fe=>ln("addressLine1",Fe.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),u.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["City *",u.jsx("input",{type:"text",value:Be.city,onChange:Fe=>ln("city",Fe.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),u.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["State / Region *",u.jsx("input",{type:"text",value:Be.state,onChange:Fe=>ln("state",Fe.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),u.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Postal code",u.jsx("input",{type:"text",value:Be.postalCode,onChange:Fe=>ln("postalCode",Fe.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),u.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Pharmacy registration number *",u.jsx("input",{type:"text",value:Be.registrationNumber,onChange:Fe=>ln("registrationNumber",Fe.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),u.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Tax ID",u.jsx("input",{type:"text",value:Be.taxId,onChange:Fe=>ln("taxId",Fe.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),u.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300 sm:col-span-2",children:["Pharmacy license URL *",u.jsx("input",{type:"url",placeholder:"https://...",value:Be.licenseUrl,onChange:Fe=>ln("licenseUrl",Fe.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),u.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300 sm:col-span-2",children:["Owner ID (URL)",u.jsx("input",{type:"url",placeholder:"https://...",value:Be.ownerIdUrl,onChange:Fe=>ln("ownerIdUrl",Fe.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]})]}),je===2&&u.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[u.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Website",u.jsx("input",{type:"url",placeholder:"https://",value:Be.website,onChange:Fe=>ln("website",Fe.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),u.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Owner name",u.jsx("input",{type:"text",value:Be.ownerName,onChange:Fe=>ln("ownerName",Fe.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),u.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Years in business",u.jsx("input",{type:"number",min:"0",value:Be.yearsInBusiness,onChange:Fe=>ln("yearsInBusiness",Fe.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),u.jsx("div",{className:"sm:col-span-2",children:u.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Additional notes for compliance",u.jsx("textarea",{rows:3,value:Be.additionalNotes,onChange:Fe=>ln("additionalNotes",Fe.target.value),className:"mt-1 rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"Add context such as delivery radius, cold-chain handling, etc."})]})})]}),u.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[u.jsx("button",{type:"button",onClick:async()=>{if(Et)return;const Fe=Vt.current||we?.id||Sr.current;Vt.current&&(clearTimeout(Vt.current),Vt.current=null),Fe&&await Ri(Or.current,rr.current),ot(!1),We(0),rr.current=0,Ct("")},className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:bg-slate-100 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800",children:"Cancel"}),u.jsxs("div",{className:"flex gap-2",children:[je>0&&u.jsx("button",{type:"button",onClick:ce,className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:bg-slate-100 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800",children:"Back"}),je<$t-1?u.jsx("button",{type:"button",onClick:ss,className:"rounded-full bg-sky-600 px-5 py-2 text-sm font-semibold text-white shadow hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-300 dark:bg-sky-500 dark:hover:bg-sky-400",children:"Next"}):u.jsx("button",{type:"submit",disabled:Et,className:"rounded-full border border-sky-500 px-4 py-2 text-sm font-semibold text-sky-600 transition hover:bg-sky-50 focus:outline-none focus:ring-2 focus:ring-sky-200 disabled:cursor-not-allowed disabled:opacity-60 dark:border-sky-400 dark:text-sky-300 dark:hover:bg-slate-800",children:Et?"Submitting...":we?"Save updates":"Submit for review"})]})]}),u.jsx("p",{className:"text-[11px] text-slate-400",children:"We review submissions within 1-3 business days. You can close this window after sending your documents."})]})}),o&&u.jsx(kU,{pharmacyId:n?.uid||e?.uid,onClose:()=>l(!1)}),w&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 w-[90vw] max-w-sm shadow-xl border border-[#9ED3FF] dark:border-gray-600 relative overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4 relative",children:[u.jsx("div",{className:"text-lg font-medium font-poppins text-black dark:text-white",children:s("edit_product","Edit Product")}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{className:"rounded-full border border-zinc-300 dark:border-gray-600 dark:border-gray-600 text-zinc-500 dark:text-zinc-400 py-2 flex items-center justify-center ml-2",style:{width:"36px",height:"36px"},onClick:Fe=>{Fe.stopPropagation(),xe(zt=>!zt)},children:u.jsx(_ie,{className:"h-4 w-4"})}),fe&&u.jsx("div",{className:"absolute right-0 top-full mt-2 bg-white dark:bg-gray-800 border border-[#9ED3FF] dark:border-gray-600 rounded-xl shadow p-2 z-10 overflow-hidden",onClick:Fe=>Fe.stopPropagation(),children:u.jsxs("button",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 text-[13px] font-light px-2 py-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",onClick:()=>{ae(!0),xe(!1)},children:[u.jsx(Pie,{className:"h-4 w-4"})," ",s("delete","Delete")]})})]})]}),u.jsxs("div",{className:"space-y-3",onClick:()=>fe&&xe(!1),children:[u.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:S,onChange:Fe=>T(Fe.target.value),placeholder:s("name","Name")}),u.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:I,onChange:Fe=>M(Fe.target.value),placeholder:s("category","Category")}),u.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:K,onChange:Fe=>W(Fe.target.value),placeholder:s("stock","Stock"),type:"number"}),u.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:L,onChange:Fe=>A(Fe.target.value),placeholder:"SKU"}),u.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:E,onChange:Fe=>D(Fe.target.value),placeholder:s("price","Price"),type:"number"}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-[12px] text-zinc-500 dark:text-zinc-400 font-light",children:s("product_image","Product Image")}),u.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:R,onChange:Fe=>{F(Fe.target.value),Z(null)},placeholder:s("image_url_placeholder","Image URL (or choose file below)"),type:"text"}),u.jsx("input",{type:"file",accept:"image/*",className:"mt-1",onChange:Fe=>{Fe.target.files&&Fe.target.files[0]&&(Z(Fe.target.files[0]),F(""))}}),(R||V)&&u.jsx("img",{src:V?URL.createObjectURL(V):R,alt:"Preview",className:"h-16 w-16 object-cover rounded-xl border mt-2"})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-[12px] text-zinc-500 font-light",children:s("product_description","Product Description")}),u.jsx("textarea",{className:"w-full border rounded p-2 text-sm",rows:4,value:J,onChange:Fe=>ie(Fe.target.value),placeholder:s("enter_product_description","Enter product description")})]})]}),u.jsxs("div",{className:"flex gap-2 mt-6 items-center",children:[u.jsx("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[12px] font-light py-2 shadow hover:bg-sky-700",onClick:Tt,children:s("save","Save")}),u.jsx("button",{className:"flex-1 rounded-full border border-zinc-300 dark:border-gray-600 text-zinc-500 text-[12px] font-light py-2",onClick:()=>_(null),children:s("cancel","Cancel")})]}),he&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 rounded-3xl",onClick:()=>ae(!1),children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-xl border border-[#9ED3FF] dark:border-gray-600 text-center overflow-hidden",onClick:Fe=>Fe.stopPropagation(),children:[u.jsx("div",{className:"text-[15px] font-light mb-4 dark:text-white",children:s("confirm_delete_product","Are you sure you want to delete this item?")}),u.jsxs("div",{className:"flex gap-2 justify-center",children:[u.jsx("button",{className:"rounded-full bg-red-600 text-white text-[12px] font-light px-4 py-2",onClick:Ut,children:s("yes_delete","Yes, Delete")}),u.jsx("button",{className:"rounded-full border border-zinc-300 dark:border-gray-600 dark:border-gray-600 text-zinc-500 dark:text-zinc-400 text-[12px] font-light px-4 py-2",onClick:()=>ae(!1),children:s("cancel","Cancel")})]})]})})]})}),u.jsx("div",{className:"mt-6 lg:hidden",children:u.jsxs("button",{onClick:async()=>{await r(),window.location.href="/auth/onboarding"},className:"rounded-full border border-red-300 dark:border-gray-600 text-red-600 dark:text-red-400 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:[u.jsx(q6,{className:"h-4 w-4"})," ",s("log_out","Log Out")]})})]})]})}const Cye=t=>Array.from(new Set(t.map(r=>r.label.includes("/")?r.label.split("/").pop():r.label))).sort(),Aye=(t,e)=>Array.from(new Set(t.filter(n=>n.label.endsWith("/"+e)).map(n=>n.label.split("/")[0]))).sort((n,s)=>Number(n)-Number(s));function Nye({data:t,filter:e,onFilterChange:r,topPeriod:n}){const{t:s}=qs(),[i,a]=j.useState(null),[o,l]=j.useState([]);j.useEffect(()=>{if(t.length>0){const m=Math.max(...t.map(y=>y.value))||1;l(t.map(y=>y.value/m*100))}},[t]);let c=Cye(t),d=e.type==="month"?Aye(t,e.year||c[0]):[];const p=Math.max(...t.map(m=>m.value))||1,g=t.reduce((m,y)=>m+y.value,0);return u.jsxs("div",{className:"bg-gradient-to-br from-[#F7F7F7] to-[#F0F8FF] dark:from-gray-800 dark:to-gray-900 rounded-2xl border border-sky-500 dark:border-gray-600 p-6 mt-8 overflow-hidden min-w-0 relative",role:"region","aria-label":"Revenue",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-sky-100/30 dark:from-sky-800/30 to-transparent rounded-full -translate-y-16 translate-x-16"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-blue-100/20 dark:from-blue-800/20 to-transparent rounded-full translate-y-12 -translate-x-12"}),u.jsxs("div",{className:"flex items-center justify-between mb-4 min-w-0 relative z-0",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-black dark:text-white font-light text-xl tracking-tight mb-1",children:s("revenue_analytics","Revenue Analytics")}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"text-2xl font-semibold text-sky-700 dark:text-sky-400",children:["",g.toLocaleString()]}),u.jsx("div",{className:"px-2 py-1 bg-sky-100 dark:bg-sky-800 rounded-full text-xs text-sky-700 dark:text-sky-300 font-medium",children:s("total","Total")})]})]}),u.jsx("div",{className:"flex flex-col gap-2",children:u.jsxs("select",{className:"rounded-xl border-2 border-sky-200 bg-white px-3 py-2 text-sm text-sky-700 focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md",value:e.type,onChange:m=>r({...e,type:m.target.value}),children:[u.jsxs("option",{value:"month",children:[" ",s("by_month","By Month")]}),u.jsxs("option",{value:"year",children:[" ",s("by_year","By Year")]})]})})]}),u.jsxs("div",{className:"flex gap-2 mb-6 min-w-0 relative z-0",children:[e.type==="year"&&u.jsx("select",{className:"rounded-lg border border-sky-200 px-3 py-2 text-sm text-sky-700 bg-white focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md min-w-0 max-w-[140px]",value:e.year||c[0]||"",onChange:m=>r({...e,year:m.target.value}),children:c.map(m=>u.jsx("option",{value:m,children:m},m))}),e.type==="month"&&u.jsxs(u.Fragment,{children:[u.jsx("select",{className:"rounded-lg border border-sky-200 px-3 py-2 text-sm text-sky-700 bg-white focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md min-w-0 max-w-[120px]",value:e.year||c[0]||"",onChange:m=>r({...e,year:m.target.value}),children:c.map(m=>u.jsx("option",{value:m,children:m},m))}),u.jsx("select",{className:"rounded-lg border border-sky-200 px-3 py-2 text-sm text-sky-700 bg-white focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md min-w-0 max-w-[120px]",value:e.month||d[0]||"",onChange:m=>r({...e,month:m.target.value}),children:d.map(m=>u.jsx("option",{value:m,children:s("month_number","Month {number}",{number:m})},m))})]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 flex flex-col justify-between opacity-20",children:[...Array(5)].map((m,y)=>u.jsx("div",{className:"border-t border-sky-300 border-dashed"},y))}),u.jsx("div",{className:"w-full h-32 flex items-end gap-3 mt-2 min-w-0 overflow-hidden relative z-0",children:t.length===0?u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-4xl mb-2",children:""}),u.jsx("div",{className:"text-zinc-400 text-sm",children:s("no_revenue_data","No revenue data available")}),u.jsx("div",{className:"text-xs text-zinc-400 mt-1",children:s("start_selling_revenue","Start making sales to see your revenue analytics")})]})}):t.map((m,y)=>u.jsxs("div",{className:"flex flex-col items-center flex-1 min-w-0 relative group",onMouseEnter:()=>a(y),onMouseLeave:()=>a(null),children:[i===y&&u.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-white border border-sky-200 rounded-lg px-3 py-2 shadow-lg z-20 whitespace-nowrap",children:[u.jsx("div",{className:"text-xs font-medium text-gray-700",children:m.label}),u.jsxs("div",{className:"text-sm font-semibold text-sky-600",children:["",m.value.toLocaleString()]}),u.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",children:u.jsx("div",{className:"w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-white"})})]}),u.jsxs("div",{className:"relative w-8 flex flex-col items-center",children:[u.jsxs("div",{className:"w-full h-32 bg-sky-100/50 rounded-t-lg relative overflow-hidden",children:[u.jsx("div",{className:`absolute bottom-0 w-full rounded-t-lg transition-all duration-1000 ease-out cursor-pointer transform ${i===y?"scale-105":"scale-100"}`,style:{height:`${o[y]||0}%`,background:i===y?"linear-gradient(135deg, #36A5FF 0%, #2563EB 50%, #1D4ED8 100%)":"linear-gradient(135deg, #36A5FF 0%, #3B82F6 100%)",boxShadow:i===y?"0 8px 25px rgba(54, 165, 255, 0.4), 0 4px 10px rgba(54, 165, 255, 0.3)":"0 4px 15px rgba(54, 165, 255, 0.2)"},children:u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-20 transform -skew-x-12 animate-pulse"})}),u.jsx("div",{className:"absolute w-full h-1 bg-white/40 rounded-full transition-all duration-1000",style:{bottom:`${o[y]||0}%`}})]}),i===y&&u.jsxs("div",{className:"absolute -top-6 bg-sky-600 text-white text-xs px-2 py-1 rounded font-medium",children:["",m.value.toLocaleString()]})]}),u.jsx("span",{className:`text-[11px] mt-2 truncate max-w-[40px] transition-colors duration-200 ${i===y?"text-sky-600 font-medium":"text-zinc-500"}`,children:m.label})]},y))}),t.length>0&&u.jsxs("div",{className:"absolute left-0 top-0 h-32 flex flex-col justify-between text-xs text-zinc-400 -ml-12",children:[u.jsxs("span",{children:["",p.toLocaleString()]}),u.jsxs("span",{children:["",Math.round(p*.75).toLocaleString()]}),u.jsxs("span",{children:["",Math.round(p*.5).toLocaleString()]}),u.jsxs("span",{children:["",Math.round(p*.25).toLocaleString()]}),u.jsx("span",{children:"0"})]})]}),n&&u.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-sky-50 to-blue-50 rounded-xl border border-sky-200 relative z-0",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-sky-400 to-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:""}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-sky-700",children:s("best_performing_period","Best Performing {period}",{period:e.type==="month"?s("month_label","Month"):s("year_label","Year")})}),u.jsxs("div",{className:"text-lg font-semibold text-sky-800",children:[n.label,"  ",n.value.toLocaleString()]})]})]})})]})}function Tye({cards:t}){return u.jsxs("div",{className:"w-full overflow-x-auto py-2",style:{overflowY:"hidden"},children:[u.jsx("div",{className:"flex gap-3",style:{minWidth:180,scrollbarWidth:"none",msOverflowStyle:"none"},children:t.map((e,r)=>u.jsx("div",{className:"min-w-[120px] max-w-[150px] h-[80px] bg-[#F7F7F7] dark:bg-gray-800 rounded-xl border border-sky-500 dark:border-gray-600 p-3 flex flex-col items-start justify-center shadow-sm",children:e},r))}),u.jsx("style",{children:`
        .w-full.overflow-x-auto::-webkit-scrollbar { display: none; }
      `})]})}function Iye({data:t}){const{t:e}=qs(),[r,n]=j.useState(null);if(!t||t.length===0)return u.jsx("div",{className:"bg-[#F7F7F7] dark:bg-gray-800 rounded-2xl border border-sky-500 dark:border-gray-600 p-5 mt-8 text-zinc-400 dark:text-zinc-500 text-sm text-center",children:e("no_sales_trend_data","No sales trend data.")});const s=Math.max(...t.map(g=>g.value))||1,i=25,a=280,o=120,l=[];for(let g=0;g<=4;g++){const m=i+g/4*(o-2*i);l.push(u.jsx("line",{x1:i,y1:m,x2:a-i,y2:m,stroke:"#E5F3FF",strokeWidth:"1",strokeDasharray:"3,3"},g))}const c=t.map((g,m)=>{const y=i+m/(t.length-1)*(a-2*i),w=o-i-g.value/s*(o-2*i);return{x:y,y:w,value:g.value,label:g.label}}),d=c.map((g,m)=>`${m===0?"M":"L"} ${g.x} ${g.y}`).join(" "),p=`${d} L ${c[c.length-1].x} ${o-i} L ${c[0].x} ${o-i} Z`;return u.jsxs("div",{className:"bg-[#F7F7F7] dark:bg-gray-800 rounded-2xl border border-sky-500 dark:border-gray-600 p-5 mt-8 relative overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-black dark:text-white font-light text-lg tracking-tight",children:e("sales_trends","Sales Trends")}),u.jsx("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:e("last_6_months","Last 6 months")})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("svg",{width:a,height:o,className:"block mx-auto overflow-visible",style:{filter:"drop-shadow(0 2px 4px rgba(54, 165, 255, 0.1))"},children:[u.jsxs("defs",{children:[u.jsxs("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[u.jsx("stop",{offset:"0%",stopColor:"#36A5FF",stopOpacity:"0.2"}),u.jsx("stop",{offset:"100%",stopColor:"#36A5FF",stopOpacity:"0.02"})]}),u.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[u.jsx("stop",{offset:"0%",stopColor:"#36A5FF"}),u.jsx("stop",{offset:"50%",stopColor:"#2563EB"}),u.jsx("stop",{offset:"100%",stopColor:"#1D4ED8"})]})]}),l,u.jsx("path",{d:p,fill:"url(#areaGradient)",className:"transition-all duration-300"}),u.jsx("path",{d,fill:"none",stroke:"url(#lineGradient)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-300",style:{filter:"drop-shadow(0 2px 4px rgba(54, 165, 255, 0.3))"}}),c.map((g,m)=>u.jsxs("g",{children:[u.jsx("circle",{cx:g.x,cy:g.y,r:r===m?"8":"6",fill:"rgba(54, 165, 255, 0.2)",className:"transition-all duration-200"}),u.jsx("circle",{cx:g.x,cy:g.y,r:r===m?"4":"3",fill:"#36A5FF",stroke:"white",strokeWidth:"2",className:"cursor-pointer transition-all duration-200 hover:r-4",onMouseEnter:()=>n(m),onMouseLeave:()=>n(null),style:{filter:r===m?"drop-shadow(0 4px 8px rgba(54, 165, 255, 0.4))":"drop-shadow(0 2px 4px rgba(54, 165, 255, 0.2))"}})]},m))]}),r!==null&&u.jsxs("div",{className:"absolute bg-white border border-sky-200 rounded-lg px-3 py-2 shadow-lg z-10 transition-all duration-200",style:{left:c[r].x-30,top:c[r].y-50,transform:"translateX(-50%)"},children:[u.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:t[r].label}),u.jsxs("div",{className:"text-sm font-semibold text-sky-600 dark:text-sky-400",children:[t[r].value.toLocaleString()," ",e("orders","Orders")]}),u.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full",children:u.jsx("div",{className:"w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-white"})})]})]}),u.jsx("div",{className:"flex justify-between mt-3 px-6",children:t.map((g,m)=>u.jsx("span",{className:`text-xs transition-colors duration-200 ${r===m?"text-sky-600 dark:text-sky-400 font-medium":"text-zinc-500 dark:text-zinc-400"}`,children:g.label},m))}),u.jsxs("div",{className:"absolute left-1 top-12 h-24 flex flex-col justify-between text-xs text-zinc-400 dark:text-zinc-500",children:[u.jsx("span",{children:s.toLocaleString()}),u.jsx("span",{children:Math.round(s*.75).toLocaleString()}),u.jsx("span",{children:Math.round(s*.5).toLocaleString()}),u.jsx("span",{children:Math.round(s*.25).toLocaleString()}),u.jsx("span",{children:"0"})]}),u.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -rotate-90 text-xs text-zinc-500 dark:text-zinc-400 font-medium",style:{left:"-40px"},children:e("orders","Orders")}),u.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-sky-100/50 to-transparent rounded-full -translate-y-10 translate-x-10"})]})}function Pye({threads:t,unreadCount:e,onThreadClick:r}){const n=Jn(),{t:s}=qs(),i=()=>{n("/messages")};return u.jsxs("div",{className:"relative bg-[#F7F7F7] dark:bg-gray-800 rounded-2xl border border-sky-500 dark:border-gray-600 p-5 mt-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2 cursor-pointer hover:bg-sky-50 dark:hover:bg-gray-700/50 -mx-2 px-2 py-1 rounded-lg transition-colors",onClick:i,children:[u.jsx("h2",{className:"text-black dark:text-white font-light text-lg tracking-tight",children:s("recent_messages","Recent Messages")}),e>0&&u.jsx("span",{className:"bg-sky-400 text-white text-xs rounded-full px-2 py-0.5 font-bold",children:e})]}),u.jsx("div",{children:t.length===0?u.jsx("div",{className:"text-zinc-400 dark:text-zinc-500 text-sm",children:s("no_recent_messages","No recent messages.")}):u.jsx("ul",{className:"divide-y divide-sky-100 dark:divide-gray-600",children:t.map(a=>u.jsxs("li",{className:"py-2 rounded-lg px-2 flex items-center cursor-pointer hover:bg-sky-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>r&&r(a),children:[u.jsx("span",{className:"font-light text-[13px] text-black dark:text-white flex-1 truncate",children:a.customerName||a.customerId}),a.unread>0&&u.jsx("span",{className:"ml-2 bg-sky-400 text-white text-xs rounded-full px-2 py-0.5 font-bold",children:a.unread})]},a.id))})})]})}const Rye=({reviews:t=[],onViewAllReviews:e})=>{const{t:r}=qs();if(!t.length)return u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600 p-6",children:[u.jsx("div",{className:"flex items-center justify-between mb-4",children:u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[u.jsx(I0,{className:"text-sky-500",size:20}),r("recent_reviews","Recent Reviews")]})}),u.jsxs("div",{className:"text-center py-8",children:[u.jsx(I0,{size:32,className:"text-gray-300 dark:text-gray-600 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r("no_recent_reviews","No recent reviews")}),u.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:r("new_reviews_appear_here","New customer reviews will appear here")})]})]});const n=s=>[...Array(5)].map((i,a)=>u.jsx(O_,{size:12,className:`${a<s?"text-yellow-400 fill-current":"text-gray-300"}`},a));return u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600 p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[u.jsx(I0,{className:"text-sky-500",size:20}),r("recent_reviews","Recent Reviews"),t.length>0&&u.jsx("span",{className:"bg-sky-100 dark:bg-sky-800 text-sky-700 dark:text-sky-300 text-xs px-2 py-1 rounded-full font-medium",children:t.length})]}),u.jsxs("button",{onClick:e,className:"text-sky-500 hover:text-sky-600 dark:text-sky-400 dark:hover:text-sky-300 text-sm font-medium flex items-center gap-1",children:[r("view_all","View All"),u.jsx(tB,{size:16})]})]}),u.jsx("div",{className:"space-y-3",children:t.slice(0,3).map(s=>u.jsx("div",{className:"flex gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer",onClick:e,children:u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[u.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:s.productName}),u.jsx("div",{className:"flex items-center gap-1",children:n(s.rating)})]}),u.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:r("by_customer","by {customerName}",{customerName:s.customerName})}),u.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 line-clamp-2",children:s.comment}),!s.pharmacyResponse&&u.jsx("div",{className:"mt-2",children:u.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",children:[u.jsx(I0,{size:12,className:"mr-1"}),r("needs_response","Needs Response")]})})]})},s.id))}),t.length>3&&u.jsx("button",{onClick:e,className:"w-full mt-4 py-2 text-sm text-sky-600 dark:text-sky-400 hover:text-sky-700 dark:hover:text-sky-300 font-medium transition-colors",children:r("view_more_reviews","View {count} more review{plural}",{count:t.length-3,plural:t.length-3>1?"s":""})})]})};function Lye(){const{t}=qs(),[e,r]=j.useState([]),[n,s]=j.useState({}),[i,a]=j.useState(!0),[o,l]=j.useState("all"),[c,d]=j.useState("newest"),[p,g]=j.useState("all"),[m,y]=j.useState({}),[w,_]=j.useState({}),[S,T]=j.useState(!1),[I,M]=j.useState(null),{user:K}=Dn();j.useEffect(()=>{W()},[K]);const W=async()=>{if(K?.uid)try{a(!0);const Z=_r(Zt(ht,"products"),jr("pharmacyId","==",K.uid)),fe=await wn(Z),xe={},he=[];fe.docs.forEach(H=>{const te={id:H.id,...H.data()};xe[H.id]=te,he.push(te)}),s(xe);const ae=[];for(const H of he){const te=_r(Zt(ht,"products",H.id,"reviews"),Yi("createdAt","desc"));(await wn(te)).docs.forEach(P=>{ae.push({id:P.id,productId:H.id,productName:H.name,...P.data()})})}r(ae)}catch(Z){console.error("Error fetching reviews:",Z)}finally{a(!1)}},L=async(Z,fe,xe)=>{if(xe.trim())try{const he=er(ht,"products",fe,"reviews",Z);await us(he,{pharmacyResponse:xe,responseDate:_s(),respondedBy:K.uid}),r(ae=>ae.map(H=>H.id===Z?{...H,pharmacyResponse:xe,responseDate:new Date}:H)),y(ae=>({...ae,[Z]:""})),alert(t("response_submitted_success","Response submitted successfully!"))}catch(he){console.error("Error submitting response:",he),alert(t("response_submit_failed","Failed to submit response. Please try again."))}},A=()=>{let Z=e;return o!=="all"&&(Z=Z.filter(fe=>fe.productId===o)),p!=="all"&&(p==="positive"?Z=Z.filter(fe=>fe.rating>=4):p==="negative"?Z=Z.filter(fe=>fe.rating<=2):p==="responded"?Z=Z.filter(fe=>fe.pharmacyResponse):p==="unresponded"&&(Z=Z.filter(fe=>!fe.pharmacyResponse))),Z.sort((fe,xe)=>c==="newest"?new Date(xe.createdAt?.seconds*1e3)-new Date(fe.createdAt?.seconds*1e3):c==="oldest"?new Date(fe.createdAt?.seconds*1e3)-new Date(xe.createdAt?.seconds*1e3):c==="highest"?xe.rating-fe.rating:c==="lowest"?fe.rating-xe.rating:0),Z},E=Z=>[...Array(5)].map((fe,xe)=>u.jsx(O_,{className:`h-4 w-4 ${xe<Z?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},xe)),D=()=>{const Z=e.length,fe=e.filter(ae=>ae.pharmacyResponse).length,xe=e.length>0?e.reduce((ae,H)=>ae+H.rating,0)/e.length:0,he=e.filter(ae=>ae.rating>=4).length;return{total:Z,responded:fe,avgRating:xe,positiveReviews:he}},R=Z=>{M(I===Z?null:Z)},F=D(),V=A();return i?u.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600 overflow-hidden",children:u.jsxs("div",{className:"text-center py-16",children:[u.jsxs("div",{className:"relative mx-auto w-12 h-12 mb-6",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 dark:border-gray-600"}),u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-sky-500 dark:border-sky-400 border-t-transparent absolute top-0 left-0"})]}),u.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:t("loading_reviews","Loading your reviews...")}),u.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm mt-1",children:t("loading_please_wait","Please wait while we fetch your data")})]})}):u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600 overflow-hidden",children:[u.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200 dark:border-gray-600 bg-gradient-to-r from-gray-50 to-white dark:from-gray-700 dark:to-gray-800",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:t("reviews_management","Reviews Management")}),u.jsxs("button",{onClick:()=>T(!S),className:"flex items-center justify-center gap-2 px-4 py-2 text-sm bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors shadow-sm",children:[u.jsx(bie,{className:"h-4 w-4"}),t("filters_sort","Filters & Sort"),S?u.jsx(yie,{className:"h-4 w-4"}):u.jsx(xie,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[u.jsxs("div",{className:"text-center p-3 sm:p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200 dark:border-gray-600 shadow-sm",children:[u.jsx("div",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:F.total}),u.jsx("div",{className:"text-xs sm:text-sm text-blue-600 font-medium",children:t("total_reviews","Total Reviews")})]}),u.jsxs("div",{className:"text-center p-3 sm:p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200 shadow-sm",children:[u.jsx("div",{className:"text-xl sm:text-2xl font-bold text-green-600",children:F.responded}),u.jsx("div",{className:"text-xs sm:text-sm text-green-600 font-medium",children:t("responded","Responded")})]}),u.jsxs("div",{className:"text-center p-3 sm:p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl border border-yellow-200 shadow-sm",children:[u.jsx("div",{className:"text-xl sm:text-2xl font-bold text-yellow-600",children:F.avgRating.toFixed(1)}),u.jsx("div",{className:"text-xs sm:text-sm text-yellow-600 font-medium",children:t("avg_rating","Avg Rating")})]}),u.jsxs("div",{className:"text-center p-3 sm:p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 shadow-sm",children:[u.jsx("div",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:F.positiveReviews}),u.jsx("div",{className:"text-xs sm:text-sm text-purple-600 font-medium",children:t("positive_reviews","Positive (4+ )")})]})]}),S&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("product","Product")}),u.jsxs("select",{value:o,onChange:Z=>l(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent",children:[u.jsx("option",{value:"all",children:t("all_products","All Products")}),Object.values(n).map(Z=>u.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("sort_by","Sort By")}),u.jsxs("select",{value:c,onChange:Z=>d(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent",children:[u.jsx("option",{value:"newest",children:t("newest_first","Newest First")}),u.jsx("option",{value:"oldest",children:t("oldest_first","Oldest First")}),u.jsx("option",{value:"highest",children:t("highest_rating","Highest Rating")}),u.jsx("option",{value:"lowest",children:t("lowest_rating","Lowest Rating")})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("filter_by","Filter By")}),u.jsxs("select",{value:p,onChange:Z=>g(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent",children:[u.jsx("option",{value:"all",children:t("all_reviews","All Reviews")}),u.jsx("option",{value:"positive",children:t("positive_4_stars","Positive (4+ stars)")}),u.jsx("option",{value:"negative",children:t("negative_1_2_stars","Negative (1-2 stars)")}),u.jsx("option",{value:"responded",children:t("responded","Responded")}),u.jsx("option",{value:"unresponded",children:t("needs_response","Needs Response")})]})]})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:V.length===0?u.jsxs("div",{className:"p-8 sm:p-12 text-center",children:[u.jsx("div",{className:"bg-gray-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:u.jsx(I0,{className:"h-10 w-10 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t("no_reviews_found","No reviews found")}),u.jsx("p",{className:"text-gray-600 text-sm max-w-md mx-auto",children:e.length===0?t("no_reviews_yet_message","You don't have any reviews yet. Encourage customers to leave reviews by providing excellent service and follow-up communication!"):t("no_reviews_match_filters","No reviews match your current filters. Try adjusting your search criteria.")})]}):V.map((Z,fe)=>u.jsx("div",{className:`p-4 sm:p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-all duration-200 animate-fade-in cursor-pointer ${I===Z.id?"ring-2 ring-sky-500 dark:ring-sky-400 bg-sky-50 dark:bg-sky-900/30 scale-102":""}`,style:{animationDelay:`${fe*.1}s`},onClick:()=>R(Z.id),children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full",children:Z.createdAt&&new Date(Z.createdAt.seconds*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}),!Z.pharmacyResponse&&u.jsx("span",{className:"text-orange-600 dark:text-orange-400 px-2 py-1 rounded-full font-normal text-[9px] bg-orange-100 dark:bg-orange-900/30",style:{fontSize:"9px !important"},children:t("needs_response","Needs Response")})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(sc,{name:Z.productName,image:n[Z.productId]?.image,category:n[Z.productId]?.category,size:40,className:"flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white line-clamp-1",style:{fontSize:"10px !important"},title:Z.productName,children:Z.productName}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:n[Z.productId]?.category||t("medicine","Medicine")})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"flex",children:E(Z.rating)}),u.jsxs("span",{className:"text-gray-600 dark:text-gray-300",style:{fontSize:"10px !important"},children:["(",Z.rating,"/5)"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-gray-600 dark:text-gray-300",style:{fontSize:"10px !important"},children:[t("reviewed_by","Reviewed by:"),":"]}),u.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",style:{fontSize:"10px !important"},children:Z.customerName||Z.name}),Z.verified&&u.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400 px-2 py-0.5 rounded-full font-medium",children:t("verified","Verified")})]}),u.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 sm:p-4",children:u.jsx("p",{className:"text-gray-800 dark:text-gray-200 leading-relaxed",style:{fontSize:"10px !important"},children:Z.comment})}),Z.helpful>0&&u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[u.jsx("span",{children:""}),u.jsx("span",{children:t("people_found_helpful","{count} people found this helpful",{count:Z.helpful})})]}),Z.pharmacyResponse&&u.jsxs("div",{className:"ml-0 sm:ml-4 bg-gradient-to-r from-blue-50 to-sky-50 dark:from-blue-900/20 dark:to-sky-900/20 rounded-lg p-3 sm:p-4 border-l-4 border-blue-400 dark:border-blue-500 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx($N,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 flex-shrink-0"}),u.jsx("span",{className:"text-sm font-semibold text-blue-900 dark:text-blue-300",children:t("your_response","Your Response")}),u.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 ml-auto",children:Z.pharmacyResponse.respondedAt&&new Date(Z.pharmacyResponse.respondedAt.seconds*1e3).toLocaleDateString()})]}),u.jsx("p",{className:"text-blue-900 dark:text-blue-200 text-sm leading-relaxed",children:Z.pharmacyResponse.message||Z.pharmacyResponse})]}),!Z.pharmacyResponse&&u.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[u.jsxs("button",{onClick:()=>_(xe=>({...xe,[Z.id]:!xe[Z.id]})),className:"flex items-center gap-2 text-sky-600 dark:text-sky-400 hover:text-sky-700 dark:hover:text-sky-300 font-normal text-[12px] transition-colors",style:{fontSize:"10px !important"},children:[u.jsx($N,{className:"h-4 w-4"}),w[Z.id]?t("cancel_response","Cancel Response"):t("respond_to_review","Respond to Review")]}),w[Z.id]&&u.jsxs("div",{className:"mt-3 space-y-3",children:[u.jsxs("div",{className:"relative",children:[u.jsx("textarea",{value:m[Z.id]||"",onChange:xe=>y(he=>({...he,[Z.id]:xe.target.value})),placeholder:t("write_thoughtful_response","Write a thoughtful response to this review..."),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 dark:focus:ring-sky-400 dark:focus:border-sky-400 resize-none text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",rows:4,maxLength:500}),u.jsxs("div",{className:"absolute bottom-2 right-2 text-xs text-gray-400 dark:text-gray-500",children:[(m[Z.id]||"").length,"/500"]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[u.jsx("button",{onClick:()=>L(Z.id,Z.productId,m[Z.id]||""),className:"flex-1 sm:flex-none px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors font-medium disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed",style:{fontSize:"10px !important"},disabled:!m[Z.id]?.trim(),children:t("submit_response","Submit Response")}),u.jsx("button",{onClick:()=>_(xe=>({...xe,[Z.id]:!1})),className:"flex-1 sm:flex-none px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors font-medium",style:{fontSize:"10px !important"},children:t("cancel","Cancel")})]})]})]})]})},Z.id))})]})}const jye=({review:t,onDismiss:e,onViewReview:r})=>{const[n,s]=j.useState(!1);j.useEffect(()=>{s(!0);const l=setTimeout(()=>{i()},5e3);return()=>clearTimeout(l)},[]);const i=()=>{s(!1),setTimeout(()=>{e()},300)},a=()=>{r(),i()},o=l=>[...Array(5)].map((c,d)=>u.jsx(O_,{size:12,className:`${d<l?"text-yellow-400 fill-current":"text-gray-300"}`},d));return u.jsx("div",{className:`fixed top-4 right-4 z-50 transform transition-all duration-300 ${n?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,children:u.jsxs("div",{className:"bg-white border-l-4 border-sky-500 dark:border-gray-600 dark:border-gray-600 rounded-lg shadow-lg p-4 max-w-sm",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(I0,{size:16,className:"text-sky-500"}),u.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"New Review"})]}),u.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 transition-colors",children:u.jsx(ox,{size:16})})]}),u.jsxs("div",{className:"mb-3",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.productName}),u.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[o(t.rating),u.jsxs("span",{className:"text-xs text-gray-600 ml-1",children:["by ",t.customerName]})]})]}),u.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:t.comment}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:i,className:"px-3 py-1 text-xs text-gray-600 hover:text-gray-800 transition-colors",children:"Dismiss"}),u.jsx("button",{onClick:a,className:"px-3 py-1 bg-sky-500 text-white text-xs rounded hover:bg-sky-600 transition-colors",children:"View & Respond"})]})]})})},Fye=({newReviews:t,onDismissReview:e,onViewReview:r})=>{const[n,s]=j.useState([]);j.useEffect(()=>{if(t.length>0){const o=t[0];n.some(c=>c.id===o.id)||s(c=>[o,...c.slice(0,2)])}},[t]);const i=o=>{s(l=>l.filter(c=>c.id!==o)),e(o)},a=o=>{s(l=>l.filter(c=>c.id!==o)),r(o)};return u.jsx(u.Fragment,{children:n.map((o,l)=>u.jsx("div",{style:{transform:`translateY(${l*80}px)`,zIndex:50-l},className:"absolute",children:u.jsx(jye,{review:o,onDismiss:()=>i(o.id),onViewReview:()=>a(o.id)})},o.id))})};function Dye(){const[t,e]=j.useState([]),[r,n]=j.useState(0),{user:s}=Dn();return j.useEffect(()=>{if(!s?.uid)return;const o=_r(Zt(ht,"products"),jr("pharmacyId","==",s.uid)),l=In(o,c=>{const d=[];return e([]),n(0),c.docs.forEach(p=>{const g={id:p.id,...p.data()},m=new Date;m.setDate(m.getDate()-7);const y=_r(Zt(ht,"products",p.id,"reviews"),jr("createdAt",">=",m),Yi("createdAt","desc"),cd(20)),w=In(y,_=>{const T=_.docs.map(I=>({id:I.id,productId:p.id,productName:g.name,productImage:g.image,...I.data(),createdAt:I.data().createdAt?.toDate()||new Date})).filter(I=>!I.pharmacyResponse);e(I=>{const K=[...I.filter(W=>W.productId!==p.id),...T].sort((W,L)=>L.createdAt-W.createdAt).slice(0,50);return n(K.length),K})});d.push(w)}),()=>{d.forEach(p=>p())}});return()=>l()},[s?.uid]),{newReviews:t,unreadReviewsCount:r,markReviewsAsRead:()=>{e([]),n(0)},markReviewAsResponded:o=>{e(l=>{const c=l.filter(d=>d.id!==o);return n(c.length),c})}}}const Oye=({className:t="w-6 h-6"})=>u.jsx("img",{src:"/PharmAI.svg",alt:"PharmAI",className:t});function Mye({onClick:t,disabled:e}){return Ki.createPortal(u.jsx("button",{className:`fixed bottom-[10rem] right-6 z-[100] bg-sky-500 text-white rounded-full shadow-lg\r
                 w-12 h-12 flex items-center justify-center disabled:opacity-0 disabled:cursor-not-allowed`,"aria-label":"Add Product",onClick:t,disabled:e,children:u.jsx(Oye,{className:"w-6 h-6"})}),document.body)}function Pz(){const[t,e]=j.useState([]),{profile:r,user:n}=Dn(),{t:s}=qs(),i=Jn(),[a,o]=j.useState(!1),[l,c]=j.useState([]),[d,p]=j.useState({type:"month",value:""}),[g,m]=j.useState(null),[y,w]=j.useState(0),[_,S]=j.useState(0),[T,I]=j.useState(0),[M,K]=j.useState([]),[W,L]=j.useState([]),[A,E]=j.useState([]),[D,R]=j.useState(0),[F,V]=j.useState(!1),[Z,fe]=j.useState("overview"),[xe,he]=j.useState(0),[ae,H]=j.useState(0),[te,G]=j.useState(0),[P,U]=j.useState(0),[X,J]=j.useState(0),[ie,ve]=j.useState(0),{newReviews:ke,unreadReviewsCount:oe,markReviewsAsRead:Ee}=Dye(),Oe=()=>u.jsxs("header",{className:"sm:hidden fixed top-0 left-0 right-0 z-[100] border-b border-gray-100/50 dark:border-gray-700/50 shadow-sm px-4 py-4 transition-all duration-200",style:{backgroundColor:document.documentElement.classList.contains("dark")?"rgba(17, 24, 39, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)"},children:[u.jsx("h1",{className:"mt-8 text-[25px] font-light text-black dark:text-white leading-none animate-slideInLeft mb-4",children:s("my_dashboard","My Dashboard").split(" ").map((ne,we)=>u.jsxs("span",{children:[ne,we===0?u.jsx("br",{}):""]},we))}),u.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[u.jsx("button",{onClick:()=>fe("overview"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${Z==="overview"?"bg-white dark:bg-gray-800 text-sky-600 dark:text-sky-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:s("overview","Overview")}),u.jsxs("button",{onClick:()=>{fe("reviews"),oe>0&&Ee()},className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors relative ${Z==="reviews"?"bg-white dark:bg-gray-800 text-sky-600 dark:text-sky-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[s("reviews","Reviews"),oe>0&&u.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-semibold",children:oe>9?"9+":oe})]})]})]});return j.useEffect(()=>{async function ne(){if(r&&r.role==="pharmacy"){const we=await VM(5,r.uid);e(we)}else e([])}ne()},[r]),j.useEffect(()=>{async function ne(){if(!r||r.role!=="pharmacy")return c([]);const we=_r(Zt(ht,"orders"),jr("pharmacyId","==",r.uid)),pe=(await wn(we)).docs.map(Be=>Be.data());let Ke={},ze=Be=>"";d.type==="date"?ze=Be=>{const He=Be.createdAt?.toDate?.()||new Date(Be.createdAt);return He?He.toLocaleDateString("en-GB"):""}:d.type==="month"?ze=Be=>{const He=Be.createdAt?.toDate?.()||new Date(Be.createdAt);return He?`${He.getMonth()+1}/${He.getFullYear()}`:""}:d.type==="year"&&(ze=Be=>{const He=Be.createdAt?.toDate?.()||new Date(Be.createdAt);return He?`${He.getFullYear()}`:""}),pe.forEach(Be=>{const He=ze(Be);He&&(d.value&&!He.startsWith(d.value)||(Ke[He]=(Ke[He]||0)+(Be.total||0)))});const ot=Object.entries(Ke).map(([Be,He])=>({label:Be,value:He}));if(ot.sort((Be,He)=>Be.label.localeCompare(He.label)),c(ot),ot.length>0){const Be=ot.reduce((He,ut)=>ut.value>He.value?ut:He,ot[0]);m(Be)}else m(null)}ne()},[r,d]),j.useEffect(()=>{async function ne(){if(!r||r.role!=="pharmacy")return;const we=r.uid||n?.uid;if(!we)return;const Re=await wn(_r(Zt(ht,"products"),jr("pharmacyId","==",we)));w(Re.size);const pe=Re.docs.filter(je=>{const We=je.data(),lt=We.stock||0,yt=We.lowStockThreshold||10;return lt<=yt});U(pe.length);const Ke=await wn(_r(Zt(ht,"orders"),jr("pharmacyId","==",we)));S(Ke.size);let ze=0,ot=[];const Be=new Date().getMonth(),He=new Date().getFullYear(),ut=Be===0?11:Be-1,Ct=Be===0?He-1:He;let Et=0,Le=0,Ye=0;const Qe=new Set,le=[];if(Ke.forEach(je=>{const We=je.data();ze+=We.total||0,ot.push({id:je.id,...We});const lt=We.createdAt?.toDate?.()||new Date(We.createdAt),yt=lt.getMonth(),$t=lt.getFullYear();yt===Be&&$t===He&&Et++,yt===ut&&$t===Ct&&Le++,(We.status==="pending"||We.status==="processing")&&Ye++,yt===Be&&$t===He&&We.customerId&&Qe.add(We.customerId),(We.status==="completed"||We.status==="delivered")&&le.push(We)}),I(ze),J(Et),ve(Le),G(Ye),he(Qe.size),le.length>0){const je=le.reduce((We,lt)=>We+(lt.total||0),0);H(je/le.length)}else H(0);ot.sort((je,We)=>(We.createdAt?.toMillis?.()||0)-(je.createdAt?.toMillis?.()||0)),K(ot.slice(0,3))}ne()},[r,n]),j.useEffect(()=>{async function ne(){if(!r||r.role!=="pharmacy"){L([]);return}const we=r.uid||n?.uid;if(!we)return;const Re=_r(Zt(ht,"orders"),jr("pharmacyId","==",we)),Ke=(await wn(Re)).docs.map(He=>He.data()),ze=new Date,ot=[];for(let He=5;He>=0;He--){const ut=new Date(ze.getFullYear(),ze.getMonth()-He,1);ot.push({label:ut.toLocaleString("default",{month:"short"}),year:ut.getFullYear(),month:ut.getMonth()+1})}const Be=ot.map(({label:He,year:ut,month:Ct})=>{const Et=Ke.filter(Le=>{const Ye=Le.createdAt?.toDate?.()||new Date(Le.createdAt);return Ye.getFullYear()===ut&&Ye.getMonth()+1===Ct}).length;return{label:He,value:Et}});L(Be)}ne()},[r,n]),j.useEffect(()=>{async function ne(){if(!r||r.role!=="pharmacy"){E([]),R(0);return}const we=r.uid||n?.uid;if(!we)return;const Re=_r(Zt(ht,"threads"),jr("vendorId","==",we),Yi("lastAt","desc"),cd(3)),Ke=(await wn(Re)).docs.map(ot=>({id:ot.id,...ot.data()}));E(Ke.map(ot=>({...ot,unread:ot.unread?.[we]||0})));const ze=Ke.reduce((ot,Be)=>ot+(Be.unread?.[we]||0),0);R(ze)}ne()},[r,n]),u.jsxs(u.Fragment,{children:[typeof window<"u"&&Ki.createPortal(u.jsx(Oe,{}),document.body),u.jsxs("div",{className:"pt-32 sm:pt-10 pb-32 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-0 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col animate-fadeInUp",children:[u.jsxs("header",{className:"hidden sm:block pb-2 pt-4",children:[u.jsx("h1",{className:"text-[25px] font-light text-black dark:text-white leading-none animate-slideInLeft mb-4",children:s("my_dashboard","My Dashboard").split(" ").map((ne,we)=>u.jsxs("span",{children:[ne,we===0?u.jsx("br",{}):""]},we))}),u.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1 mb-2",children:[u.jsx("button",{onClick:()=>fe("overview"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${Z==="overview"?"bg-white dark:bg-gray-800 text-sky-600 dark:text-sky-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:s("overview","Overview")}),u.jsxs("button",{onClick:()=>{fe("reviews"),oe>0&&Ee()},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors relative ${Z==="reviews"?"bg-white dark:bg-gray-800 text-sky-600 dark:text-sky-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[s("reviews","Reviews"),oe>0&&u.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-semibold",children:oe>9?"9+":oe})]})]})]}),u.jsx("main",{className:"flex-1 px-3 sm:px-4 py-2 sm:py-6 relative w-full mt-4",children:Z==="overview"?u.jsxs("div",{className:"w-full grid grid-cols-1 lg:grid-cols-[1fr_420px] gap-6 items-start pb-16 mt-10",children:[u.jsxs("div",{className:"flex flex-col gap-6",children:[u.jsxs("div",{className:"bg-gradient-to-br from-[#F7F7F7] to-[#F0F8FF] dark:from-gray-800 dark:to-gray-900 rounded-2xl border border-sky-500 dark:border-sky-400 p-6 relative overflow-hidden card-interactive animate-fadeInUp",style:{animationDelay:"0.1s"},children:[u.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-sky-100/40 dark:from-sky-800/40 to-transparent rounded-full -translate-y-10 translate-x-10"}),u.jsxs("div",{className:"relative z-10",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-black dark:text-white font-light text-xl tracking-tight animate-slideInLeft",style:{animationDelay:"0.2s"},children:s("top_products","Top Products")}),u.jsxs("div",{className:"px-3 py-1 bg-sky-100 dark:bg-sky-800 rounded-full text-xs text-sky-700 dark:text-sky-300 font-medium animate-bounceIn",style:{animationDelay:"0.3s"},children:[" ",s("best_sellers","Best Sellers")]})]}),t.length===0?u.jsxs("div",{className:"text-center py-8 animate-fadeInUp",style:{animationDelay:"0.4s"},children:[u.jsx("div",{className:"text-4xl mb-3",children:""}),u.jsx("div",{className:"text-zinc-400 dark:text-zinc-500 text-sm",children:s("no_sales_data","No sales data yet")}),u.jsx("div",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:s("start_selling_message","Start selling products to see your top performers")})]}):u.jsx("div",{className:"flex flex-col gap-4",children:t.map((ne,we)=>u.jsxs("div",{className:"group hover:bg-white/50 dark:hover:bg-gray-700/50 rounded-xl p-3 transition-all duration-200 relative",children:[u.jsx("div",{className:`absolute -left-2 -top-2 w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold ${we===0?"bg-gradient-to-br from-yellow-400 to-yellow-600":we===1?"bg-gradient-to-br from-gray-400 to-gray-600":we===2?"bg-gradient-to-br from-orange-400 to-orange-600":"bg-gradient-to-br from-sky-400 to-sky-600"}`,children:we+1}),u.jsxs("div",{className:"flex items-center justify-between ml-4",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-medium text-[14px] text-zinc-800 dark:text-zinc-200 truncate max-w-[140px] group-hover:text-sky-700 dark:group-hover:text-sky-400 transition-colors",children:ne.name}),u.jsx("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:s("units_sold","{count} units sold",{count:ne.sold})})]}),u.jsx("div",{className:"flex-1 mx-4 relative",children:u.jsxs("div",{className:"h-4 bg-gradient-to-r from-sky-100 to-blue-100 rounded-full relative overflow-hidden",children:[u.jsx("div",{className:`h-4 rounded-full transition-all duration-1000 ease-out relative ${we===0?"bg-gradient-to-r from-yellow-400 to-yellow-500":we===1?"bg-gradient-to-r from-gray-400 to-gray-500":we===2?"bg-gradient-to-r from-orange-400 to-orange-500":"bg-gradient-to-r from-sky-400 to-sky-500"}`,style:{width:`${Math.max(15,ne.sold/(t[0]?.sold||1)*100)}%`,boxShadow:"0 2px 8px rgba(54, 165, 255, 0.3)"},children:u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 transform -skew-x-12 animate-pulse"})}),u.jsxs("div",{className:"absolute top-0 right-2 h-4 flex items-center text-xs font-medium text-white",style:{left:`${Math.max(15,ne.sold/(t[0]?.sold||1)*100)}%`,transform:"translateX(-100%)"},children:[Math.round(ne.sold/(t[0]?.sold||1)*100),"%"]})]})}),u.jsxs("div",{className:"text-right min-w-[50px]",children:[u.jsx("span",{className:`font-bold text-lg ${we===0?"text-yellow-600 dark:text-yellow-400":we===1?"text-gray-600 dark:text-gray-400":we===2?"text-orange-600 dark:text-orange-400":"text-sky-600 dark:text-sky-400"}`,children:ne.sold}),u.jsx("div",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:s("units","units")})]})]}),u.jsx("div",{className:"absolute inset-0 rounded-xl border-2 border-transparent group-hover:border-sky-200 transition-all duration-200"})]},ne.id||we))})]})]}),u.jsxs("div",{className:"flex gap-2 w-full",children:[u.jsxs("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700",onClick:()=>i(`/add-product?pharmacyId=${r?.uid||n?.uid}`),children:["+ ",s("add_product","Add Product")]}),u.jsx("button",{className:"flex-1 rounded-full border border-sky-600 dark:border-sky-400 text-sky-600 dark:text-sky-400 text-[13px] font-light py-2 hover:bg-[#E3F3FF] dark:hover:bg-sky-900/30",onClick:()=>o(!0),children:s("bulk_upload","Bulk Upload")})]}),a&&u.jsx(kU,{pharmacyId:r?.uid||n?.uid,onClose:()=>o(!1)}),u.jsx("div",{children:u.jsx(Iye,{data:W})})]}),u.jsxs("div",{className:"flex flex-col gap-6 pb-8 relative z-0",children:[u.jsx("div",{className:"relative z-0",children:u.jsx(Nye,{data:l,filter:d,onFilterChange:p,topPeriod:g})}),u.jsx("div",{children:u.jsx(Tye,{cards:[u.jsxs("div",{children:[u.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:s("total_products","Total Products")}),u.jsx("div",{className:"text-[19px] font-semibold text-sky-700 dark:text-sky-400 tracking-tight",children:y})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:s("total_orders","Total Orders")}),u.jsx("div",{className:"text-[19px] font-semibold text-sky-700 dark:text-sky-400 tracking-tight",children:_})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:s("total_revenue","Total Revenue")}),u.jsxs("div",{className:"text-[19px] font-semibold text-sky-700 dark:text-sky-400 tracking-tight",children:["",T.toLocaleString()]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:s("active_customers","Active Customers")}),u.jsx("div",{className:"text-[19px] font-semibold text-emerald-600 dark:text-emerald-400 tracking-tight",children:xe}),u.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:s("this_month","This Month")})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:s("avg_order_value","Avg Order Value")}),u.jsxs("div",{className:"text-[19px] font-semibold text-purple-600 dark:text-purple-400 tracking-tight",children:["",ae.toLocaleString(void 0,{maximumFractionDigits:0})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:s("pending_orders","Pending Orders")}),u.jsx("div",{className:"text-[19px] font-semibold text-orange-600 dark:text-orange-400 tracking-tight",children:te}),u.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:s("awaiting","Awaiting")})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:s("low_stock_items","Low Stock Items")}),u.jsx("div",{className:"text-[19px] font-semibold text-red-600 dark:text-red-400 tracking-tight",children:P}),u.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:s("need_restock","Need Restock")})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:s("orders_this_month","Orders This Month")}),u.jsx("div",{className:"text-[19px] font-semibold text-blue-600 dark:text-blue-400 tracking-tight",children:X}),u.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:ie>0?X>=ie?u.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400",children:[" +",((X-ie)/ie*100).toFixed(0),"%"]}):u.jsxs("span",{className:"text-red-500 dark:text-red-400",children:[" -",((ie-X)/ie*100).toFixed(0),"%"]}):u.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:s("no_comparison","No comparison")})})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:s("pending_reviews","Pending Reviews")}),u.jsx("div",{className:"text-[19px] font-semibold text-yellow-600 dark:text-yellow-400 tracking-tight",children:oe}),u.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:s("need_response","Need Response")})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:s("recent_reviews","Recent Reviews")}),u.jsx("div",{className:"text-[19px] font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight",children:ke.length}),u.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:s("last_24h","Last 24h")})]})]})}),P>0&&u.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 border border-red-200 dark:border-red-700 rounded-2xl p-4",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-white text-sm font-bold",children:"!"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-red-700 dark:text-red-400 font-medium text-sm",children:s("low_stock_alert","Low Stock Alert")}),u.jsx("div",{className:"text-red-600 dark:text-red-500 text-xs",children:s("items_need_restocking","{count} item{plural} need restocking",{count:P,plural:P>1?"s":""})})]})]}),u.jsxs("div",{className:"text-xs text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30 rounded-lg px-3 py-2",children:[" ",s("inventory_tip","Check your inventory to avoid running out of popular products")]})]}),u.jsx("div",{children:u.jsx(Pye,{threads:A,unreadCount:D,onThreadClick:ne=>i(`/messages/${ne.id}`)})}),u.jsx("div",{children:u.jsx(Rye,{reviews:ke.slice(0,5),onViewAllReviews:()=>{fe("reviews"),Ee()}})})]})]}):u.jsx("div",{className:"pb-16 mt-10",children:u.jsx(Lye,{})})}),u.jsx(Mye,{onClick:()=>i(`/add-product?pharmacyId=${r?.uid||n?.uid}`)}),u.jsx(Fye,{newReviews:ke,onDismissReview:ne=>{},onViewReview:ne=>{fe("reviews"),Ee()}})]})]})}function Bye(){const[t,e]=j.useState(0),[r,n]=j.useState(null),[s,i]=j.useState(null),[a,o]=j.useState(!1),l=j.useRef(null),c=j.useRef(0),d=j.useRef(null),p=Jn(),g=Nl(),{profile:m}=Dn(),y=["/","/orders","/messages","/cart","/profile"],w=["/dashboard","/orders","/messages","/profile"],_=m?.role==="pharmacy"?w:y,S=_.indexOf(g.pathname),T=typeof window<"u"&&window.matchMedia&&window.matchMedia("(max-width: 1024px)").matches,I=E=>{switch(E){case"/":return u.jsx(H6,{});case"/orders":return u.jsx(oB,{});case"/messages":return u.jsx(lB,{});case"/cart":return u.jsx(cB,{});case"/profile":return m?.role==="pharmacy"?u.jsx(Iz,{}):u.jsx(hB,{});case"/dashboard":return u.jsx(Pz,{});default:return null}},M=E=>{if(!T)return;const R=E.touches[0].clientX,F=window.innerWidth,V=50,Z=R<V,fe=R>F-V;if(!Z&&!fe)return;l.current=R,c.current=R;let xe=null,he=-1;fe&&S<_.length-1?(xe="left",he=S+1):Z&&S>0&&(xe="right",he=S-1),xe&&he!==-1&&(n(xe),i(_[he]),o(!0))},K=E=>{if(!a||l.current===null)return;E.preventDefault();const R=E.touches[0].clientX,F=R-l.current,V=window.innerWidth;c.current=R,d.current&&cancelAnimationFrame(d.current),d.current=requestAnimationFrame(()=>{const Z=V*.7;let fe=Math.abs(F)/Z;const xe=fe<.5?2*fe*fe:-1+(4-2*fe)*fe;fe=Math.min(xe,1),r==="left"&&F<0||r==="right"&&F>0?(e(fe),fe>.25&&t<=.25&&"vibrate"in navigator&&navigator.vibrate(30)):Math.abs(F)>15&&W()})},W=()=>{if(!a)return;if(t>.25&&s)"vibrate"in navigator&&navigator.vibrate([50,50,100]),e(1),setTimeout(()=>{p(s,{state:{slide:r==="left"?"left":"right"}})},200);else{"vibrate"in navigator&&navigator.vibrate(25),(()=>{let F=t;const V=()=>{F*=.85,e(F),F>.01?requestAnimationFrame(V):(e(0),n(null),i(null),o(!1),l.current=null)};requestAnimationFrame(V)})();return}setTimeout(()=>{e(0),n(null),i(null),o(!1),l.current=null},250)};j.useEffect(()=>{if(!T)return;const E=document.body;return E.addEventListener("touchstart",M,{passive:!0}),E.addEventListener("touchmove",K,{passive:!1}),E.addEventListener("touchend",W,{passive:!0}),E.addEventListener("touchcancel",W,{passive:!0}),()=>{E.removeEventListener("touchstart",M),E.removeEventListener("touchmove",K),E.removeEventListener("touchend",W),E.removeEventListener("touchcancel",W),d.current&&cancelAnimationFrame(d.current)}},[T,a,t,r,S]);const L=()=>{if(!a||!r)return{};const E=t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,D=r==="left"?-E*100:E*100,R=1-E*.05,F=r==="left"?E*3:-E*3;return{transform:`translateX(${D}%) scale(${R}) rotateY(${F}deg)`,transformOrigin:r==="left"?"right center":"left center",transition:a?"none":"transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)",filter:`brightness(${1-E*.1})`}},A=()=>{if(!a||!r)return{display:"none"};const E=t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,D=r==="left"?100-E*100:-100+E*100,R=.95+E*.05,F=r==="left"?(1-E)*-5:(1-E)*5;return{transform:`translateX(${D}%) scale(${R}) rotateY(${F}deg)`,transformOrigin:r==="left"?"left center":"right center",transition:a?"none":"transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)",position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"white",zIndex:a?10:-1,boxShadow:r==="left"?`-10px 0 30px rgba(0,0,0,${.1*(1-E)})`:`10px 0 30px rgba(0,0,0,${.1*(1-E)})`,filter:`brightness(${.9+E*.1})`}};return u.jsxs("div",{className:"relative min-h-screen w-full overflow-hidden",children:[u.jsxs("div",{style:L(),className:"relative",children:[u.jsx(v8,{}),a&&u.jsx("div",{className:"absolute inset-0 bg-black pointer-events-none",style:{opacity:t*.2,zIndex:5,transition:"opacity 0.1s ease-out"}})]}),a&&s&&u.jsx("div",{style:A(),children:u.jsxs("div",{className:"h-full bg-white relative",children:[I(s),t<.6&&u.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/95 to-white/90 backdrop-blur-sm flex items-center justify-center pointer-events-none",style:{opacity:Math.max(0,1-t*2),transition:"opacity 0.15s ease-out"},children:u.jsxs("div",{className:"text-center space-y-3",children:[u.jsxs("div",{className:"relative w-14 h-14 mx-auto",children:[u.jsxs("svg",{className:"w-14 h-14 transform -rotate-90",viewBox:"0 0 100 100",children:[u.jsx("circle",{cx:"50",cy:"50",r:"30",fill:"none",stroke:"#e5e7eb",strokeWidth:"4"}),u.jsx("circle",{cx:"50",cy:"50",r:"30",fill:"none",stroke:"url(#progressGradient)",strokeWidth:"4",strokeDasharray:`${t*188.4} 188.4`,className:"transition-all duration-75 ease-out",strokeLinecap:"round"}),u.jsx("defs",{children:u.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[u.jsx("stop",{offset:"0%",stopColor:"#0ea5e9"}),u.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]})})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("span",{className:"text-xs font-semibold text-sky-600",children:[Math.round(t*100),"%"]})})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-xs font-medium text-gray-700 mb-0.5",children:t<.25?"Keep swiping...":"Almost there!"}),u.jsx("div",{className:"text-[10px] text-gray-500",children:t<.25?"Continue to preview":"Release to navigate"})]}),u.jsx("div",{className:"flex items-center justify-center space-x-1",children:[.1,.15,.2,.25].map((E,D)=>u.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all duration-200 ${t>E?"bg-gradient-to-r from-sky-500 to-cyan-500 scale-110":"bg-gray-300 scale-100"}`},D))})]})})]})})]})}const Vye=()=>{const{getSetting:t}=ny();j.useEffect(()=>{t(Fr.HIGH_CONTRAST)?document.documentElement.classList.add("high-contrast"):document.documentElement.classList.remove("high-contrast")},[t(Fr.HIGH_CONTRAST)]),j.useEffect(()=>{t(Fr.REDUCE_MOTION)?document.documentElement.classList.add("reduce-motion"):document.documentElement.classList.remove("reduce-motion")},[t(Fr.REDUCE_MOTION)]),j.useEffect(()=>{const e=t(Fr.THEME_MODE),r=document.documentElement;if(r.classList.remove("light","dark"),e==="system"){const n=window.matchMedia("(prefers-color-scheme: dark)").matches;r.classList.add(n?"dark":"light");const s=window.matchMedia("(prefers-color-scheme: dark)"),i=a=>{r.classList.remove("light","dark"),r.classList.add(a.matches?"dark":"light")};return s.addEventListener("change",i),()=>s.removeEventListener("change",i)}else r.classList.add(e)},[t(Fr.THEME_MODE)]),j.useEffect(()=>{const e=t(Fr.FONT_SIZE),r=document.documentElement;r.classList.remove("font-small","font-medium","font-large"),r.classList.add(`font-${e}`)},[t(Fr.FONT_SIZE)]),j.useEffect(()=>{const e=t(Fr.LANGUAGE);document.documentElement.lang=e},[t(Fr.LANGUAGE)])};function Uye({color:t="black",...e}){return u.jsx("svg",{width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:u.jsx("path",{d:"M1.38004 6.00487L0.919293 5.79263L0.919001 5.79327L1.38004 6.00487ZM3.22754 4.0549L2.89744 3.66972L2.89735 3.6698L3.22754 4.0549ZM4.24209 3.18542L3.91215 2.80011L3.91199 2.80024L4.24209 3.18542ZM12.1657 3.18441L12.4958 2.79923L12.4958 2.79918L12.1657 3.18441ZM13.1803 4.05388L13.5107 3.66894L13.5104 3.6687L13.1803 4.05388ZM15.0268 6.00385L14.5657 6.21545L14.566 6.21609L15.0268 6.00385ZM10.233 17.0371C10.233 17.3173 10.4601 17.5444 10.7403 17.5444C11.0205 17.5444 11.2476 17.3173 11.2476 17.0371H10.7403H10.233ZM5.16027 17.0371C5.16027 17.3173 5.38738 17.5444 5.66755 17.5444C5.94771 17.5444 6.17482 17.3173 6.17482 17.0371H5.66755H5.16027ZM1.10205 8.6772H1.60933C1.60933 7.2531 1.62014 6.69785 1.84108 6.21646L1.38004 6.00487L0.919001 5.79327C0.583964 6.52326 0.594774 7.34577 0.594774 8.6772H1.10205ZM1.38004 6.00487L1.84078 6.2171C2.06254 5.7357 2.4764 5.36715 3.55773 4.44L3.22754 4.0549L2.89735 3.6698C1.88667 4.53637 1.25554 5.06266 0.919294 5.79263L1.38004 6.00487ZM3.22754 4.0549L3.55764 4.44008L4.57219 3.5706L4.24209 3.18542L3.91199 2.80024L2.89744 3.66972L3.22754 4.0549ZM4.24209 3.18542L4.57204 3.57074C5.5283 2.75189 6.2094 2.16896 6.79004 1.78503C7.35875 1.40899 7.77821 1.26082 8.20392 1.26082V0.75354V0.246264C7.50348 0.246264 6.88809 0.503911 6.23046 0.938751C5.58476 1.3657 4.84802 1.99872 3.91215 2.80011L4.24209 3.18542ZM8.20392 0.75354V1.26082C8.62982 1.26082 9.04961 1.40889 9.61834 1.78463C10.199 2.16824 10.8801 2.7509 11.8357 3.56963L12.1657 3.18441L12.4958 2.79918C11.5603 1.99767 10.8235 1.3649 10.1776 0.938137C9.51974 0.503509 8.90417 0.246264 8.20392 0.246264V0.75354ZM12.1657 3.18441L11.8356 3.56959L12.8502 4.43906L13.1803 4.05388L13.5104 3.6687L12.4958 2.79923L12.1657 3.18441ZM13.1803 4.05388L12.8499 4.43882C13.9308 5.36653 14.345 5.73455 14.5657 6.21545L15.0268 6.00385L15.4878 5.79225C15.1526 5.06178 14.5197 4.53496 13.5107 3.66894L13.1803 4.05388ZM15.0268 6.00385L14.566 6.21609C14.7876 6.69715 14.7985 7.25196 14.7985 8.67618H15.3058H15.8131C15.8131 7.34488 15.8239 6.52193 15.4875 5.79162L15.0268 6.00385ZM15.3058 8.67618H14.7985V12.9789H15.3058H15.8131V8.67618H15.3058ZM15.3058 12.9789H14.7985C14.7985 13.95 14.7974 14.627 14.7287 15.1377C14.662 15.6338 14.5399 15.8965 14.3526 16.0839L14.7113 16.4426L15.07 16.8013C15.4771 16.3941 15.6523 15.8818 15.7342 15.273C15.8141 14.6789 15.8131 13.9213 15.8131 12.9789H15.3058ZM14.7113 16.4426L14.3526 16.0839C14.1652 16.2713 13.9024 16.3933 13.4064 16.46C12.8956 16.5288 12.2187 16.5298 11.2476 16.5298V17.0371V17.5444C12.1899 17.5444 12.9475 17.5455 13.5416 17.4655C14.1504 17.3836 14.6628 17.2084 15.07 16.8013L14.7113 16.4426ZM11.2476 17.0371V16.5298H5.16026V17.0371V17.5444H11.2476V17.0371ZM5.16026 17.0371V16.5298C4.18918 16.5298 3.5122 16.5288 3.00146 16.46C2.50541 16.3933 2.24265 16.2713 2.05528 16.0839L1.69658 16.4426L1.33788 16.8013C1.74503 17.2084 2.2574 17.3836 2.86619 17.4655C3.4603 17.5455 4.21789 17.5444 5.16026 17.5444V17.0371ZM1.69658 16.4426L2.05528 16.0839C1.8679 15.8965 1.74585 15.6338 1.67911 15.1377C1.61041 14.627 1.60933 13.95 1.60933 12.9789H1.10205H0.594774C0.594774 13.9213 0.593696 14.6789 0.673619 15.273C0.755519 15.8818 0.930728 16.3941 1.33788 16.8013L1.69658 16.4426ZM1.10205 12.9789H1.60933V8.6772H1.10205H0.594774V12.9789H1.10205ZM10.7403 17.0371H11.2476V11.9643H10.7403H10.233V17.0371H10.7403ZM10.7403 11.9643H11.2476C11.2476 11.5607 11.0872 11.1736 10.8019 10.8882L10.4432 11.2469L10.0845 11.6056C10.1796 11.7008 10.233 11.8298 10.233 11.9643H10.7403ZM10.4432 11.2469L10.8019 10.8882C10.5165 10.6029 10.1294 10.4425 9.72576 10.4425V10.9498V11.4571C9.86029 11.4571 9.98932 11.5105 10.0845 11.6056L10.4432 11.2469ZM9.72576 10.9498V10.4425H6.6821V10.9498V11.4571H9.72576V10.9498ZM6.6821 10.9498V10.4425C6.27848 10.4425 5.8914 10.6028 5.606 10.8882L5.9647 11.2469L6.3234 11.6056C6.41853 11.5105 6.54756 11.4571 6.6821 11.4571V10.9498ZM5.9647 11.2469L5.606 10.8882C5.3206 11.1736 5.16027 11.5607 5.16027 11.9643H5.66755H6.17482C6.17482 11.8298 6.22827 11.7008 6.3234 11.6056L5.9647 11.2469ZM5.66755 11.9643H5.16027V17.0371H5.66755H6.17482V11.9643H5.66755Z",fill:t})})}function zye({color:t="black",...e}){return u.jsx("svg",{width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:u.jsx("path",{d:"M5.12519 5.42678H10.9951M5.12519 9.27611H10.9951M5.12519 13.1254H9.03846M3.16855 0.615112H12.9517C14.0324 0.615112 14.9084 1.47681 14.9084 2.53978V15.0501C14.9084 16.1131 14.0324 16.9748 12.9517 16.9748H3.16855C2.08793 16.9748 1.21191 16.1131 1.21191 15.0501V2.53978C1.21191 1.47681 2.08793 0.615112 3.16855 0.615112Z",stroke:t,strokeWidth:"0.85113",strokeLinecap:"round"})})}const $ye=({color:t="black",...e})=>u.jsxs("svg",{width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[u.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.7145 1.04437C15.256 1.04437 15.7753 1.25948 16.1582 1.64236C16.5411 2.02525 16.7562 2.54455 16.7562 3.08604V13.2944C16.7562 13.8358 16.5411 14.3551 16.1582 14.738C15.7753 15.1209 15.256 15.336 14.7145 15.336L11.653 15.335L9.31123 17.6768C9.13545 17.8525 8.90158 17.9581 8.65349 17.9737C8.4054 17.9893 8.16015 17.9139 7.96374 17.7615L7.86778 17.6768L5.52599 15.335L2.46452 15.336C1.92303 15.336 1.40373 15.1209 1.02084 14.738C0.637955 14.3551 0.422852 13.8358 0.422852 13.2944V3.08604C0.422852 2.54455 0.637955 2.02525 1.02084 1.64236C1.40373 1.25948 1.92303 1.04437 2.46452 1.04437H14.7145Z",stroke:t,strokeWidth:"0.857499",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.58849 9.21104C9.09891 9.21104 9.60932 8.70062 9.60932 8.1902C9.60932 7.67979 9.09891 7.16937 8.58849 7.16937C8.07807 7.16937 7.56868 7.67979 7.56868 8.1902C7.56868 8.70062 8.07807 9.21104 8.58849 9.21104ZM4.50516 9.21104C5.01558 9.21104 5.52599 8.70062 5.52599 8.1902C5.52599 7.67979 5.01558 7.16937 4.50516 7.16937C3.99475 7.16937 3.48535 7.67979 3.48535 8.1902C3.48535 8.70062 3.99475 9.21104 4.50516 9.21104ZM12.6718 9.21104C13.1822 9.21104 13.6926 8.70062 13.6926 8.1902C13.6926 7.67979 13.1822 7.16937 12.6718 7.16937C12.1614 7.16937 11.652 7.67979 11.652 8.1902C11.652 8.70062 12.1614 9.21104 12.6718 9.21104Z",fill:t})]});function qye({color:t="black",...e}){return u.jsx("svg",{width:"19",height:"18",viewBox:"0 0 19 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:u.jsx("path",{d:"M14.463 13.865C14.9423 13.865 15.4019 14.0554 15.7408 14.3943C16.0797 14.7332 16.2701 15.1929 16.2701 15.6722C16.2701 16.1515 16.0797 16.6111 15.7408 16.95C15.4019 17.289 14.9423 17.4794 14.463 17.4794C13.9837 17.4794 13.524 17.289 13.1851 16.95C12.8462 16.6111 12.6558 16.1515 12.6558 15.6722C12.6558 15.1929 12.8462 14.7332 13.1851 14.3943C13.524 14.0554 13.9837 13.865 14.463 13.865ZM14.463 14.7686C14.2233 14.7686 13.9935 14.8638 13.824 15.0332C13.6546 15.2027 13.5594 15.4325 13.5594 15.6722C13.5594 15.9118 13.6546 16.1417 13.824 16.3111C13.9935 16.4806 14.2233 16.5758 14.463 16.5758C14.7026 16.5758 14.9324 16.4806 15.1019 16.3111C15.2714 16.1417 15.3666 15.9118 15.3666 15.6722C15.3666 15.4325 15.2714 15.2027 15.1019 15.0332C14.9324 14.8638 14.7026 14.7686 14.463 14.7686ZM6.3307 13.865C6.80999 13.865 7.26965 14.0554 7.60856 14.3943C7.94747 14.7332 8.13787 15.1929 8.13787 15.6722C8.13787 16.1515 7.94747 16.6111 7.60856 16.95C7.26965 17.289 6.80999 17.4794 6.3307 17.4794C5.8514 17.4794 5.39174 17.289 5.05283 16.95C4.71392 16.6111 4.52352 16.1515 4.52352 15.6722C4.52352 15.1929 4.71392 14.7332 5.05283 14.3943C5.39174 14.0554 5.8514 13.865 6.3307 13.865ZM6.3307 14.7686C6.09105 14.7686 5.86122 14.8638 5.69176 15.0332C5.52231 15.2027 5.42711 15.4325 5.42711 15.6722C5.42711 15.9118 5.52231 16.1417 5.69176 16.3111C5.86122 16.4806 6.09105 16.5758 6.3307 16.5758C6.57034 16.5758 6.80017 16.4806 6.96963 16.3111C7.13908 16.1417 7.23428 15.9118 7.23428 15.6722C7.23428 15.4325 7.13908 15.2027 6.96963 15.0332C6.80017 14.8638 6.57034 14.7686 6.3307 14.7686ZM16.2701 3.02198H3.86391L6.16805 8.44349H13.5594C13.8576 8.44349 14.1196 8.29892 14.2823 8.08206L16.993 4.46771C17.1105 4.3141 17.1737 4.12435 17.1737 3.92556C17.1737 3.68592 17.0785 3.45609 16.9091 3.28663C16.7396 3.11718 16.5098 3.02198 16.2701 3.02198ZM13.5594 9.34708H6.21323L5.51747 10.7567L5.42711 11.1543C5.42711 11.3939 5.52231 11.6237 5.69176 11.7932C5.86122 11.9626 6.09105 12.0578 6.3307 12.0578H16.2701V12.9614H6.3307C5.8514 12.9614 5.39174 12.771 5.05283 12.4321C4.71392 12.0932 4.52352 11.6335 4.52352 11.1543C4.52326 10.8477 4.60099 10.546 4.74942 10.2778L5.4 8.9495L2.11998 1.2148H0.90918V0.311218H2.71635L3.4844 2.11839H16.2701C16.7494 2.11839 17.2091 2.30879 17.548 2.6477C17.8869 2.98661 18.0773 3.44627 18.0773 3.92556C18.0773 4.37736 17.9237 4.75686 17.6707 5.06408L15.0413 8.57903C14.716 9.03986 14.1738 9.34708 13.5594 9.34708Z",fill:t})})}function Hye({color:t="black",...e}){return u.jsx("svg",{width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:u.jsx("path",{d:"M4.1359 15.3442C4.9803 14.7362 5.87636 14.2557 6.82408 13.9027C7.77114 13.5491 8.797 13.3722 9.90168 13.3722C11.0064 13.3722 12.0322 13.5491 12.9793 13.9027C13.9263 14.2564 14.8224 14.7365 15.6675 15.3432C16.3231 14.6643 16.8506 13.863 17.25 12.9391C17.6493 12.0139 17.849 10.9993 17.849 9.89528C17.849 7.6932 17.0751 5.81796 15.5274 4.26956C13.9797 2.72115 12.1044 1.94728 9.90168 1.94795C7.69895 1.94861 5.82371 2.72281 4.27597 4.27055C2.72823 5.81829 1.95435 7.6932 1.95435 9.89528C1.95435 10.9993 2.15403 12.0139 2.55339 12.9391C2.95274 13.8636 3.48024 14.665 4.1359 15.3432M9.90268 10.392C9.06556 10.392 8.35924 10.1046 7.78372 9.5297C7.2082 8.95484 6.92077 8.24918 6.92144 7.41273C6.9221 6.57627 7.20953 5.86995 7.78372 5.29377C8.35791 4.71759 9.0639 4.43016 9.90168 4.43149C10.7395 4.43281 11.4455 4.72024 12.0196 5.29377C12.5938 5.8673 12.8813 6.57329 12.8819 7.41173C12.8826 8.25018 12.5952 8.95617 12.0196 9.5297C11.4441 10.1032 10.7385 10.3907 9.90268 10.392ZM9.90168 18.836C8.65461 18.836 7.48735 18.6039 6.39989 18.1396C5.31243 17.6754 4.36604 17.0409 3.56071 16.2363C2.75538 15.4316 2.12092 14.4852 1.65732 13.3971C1.19373 12.3089 0.961601 11.1417 0.960939 9.89528C0.960277 8.64887 1.1924 7.4816 1.65732 6.39348C2.12224 5.30536 2.7567 4.35897 3.56071 3.5543C4.36604 2.74963 5.31243 2.11517 6.39989 1.65091C7.48735 1.18666 8.65461 0.954529 9.90168 0.954529C11.1488 0.954529 12.316 1.18666 13.4035 1.65091C14.4909 2.11517 15.4373 2.74963 16.2427 3.5543C17.048 4.35897 17.6824 5.30536 18.146 6.39348C18.6096 7.4816 18.8418 8.64887 18.8424 9.89528C18.8431 11.1417 18.611 12.3089 18.146 13.3971C17.6811 14.4852 17.0467 15.4316 16.2427 16.2363C15.4373 17.0409 14.4909 17.6754 13.4035 18.1396C12.316 18.6039 11.1488 18.836 9.90168 18.836ZM9.90168 17.8426C10.8176 17.8426 11.7186 17.6823 12.6048 17.3618C13.4909 17.0419 14.2568 16.6035 14.9025 16.0465C14.2575 15.5279 13.5108 15.1183 12.6624 14.8177C11.814 14.517 10.8938 14.3663 9.90168 14.3656C8.90959 14.365 7.98605 14.5123 7.13105 14.8077C6.27605 15.1031 5.53231 15.516 4.89983 16.0465C5.54555 16.6028 6.31181 17.0413 7.1986 17.3618C8.08539 17.6823 8.98642 17.8426 9.90168 17.8426ZM9.90168 9.39857C10.4593 9.39857 10.9299 9.20684 11.3133 8.82338C11.6968 8.43992 11.8885 7.96937 11.8885 7.41173C11.8885 6.8541 11.6968 6.38355 11.3133 6.00009C10.9299 5.61663 10.4593 5.4249 9.90168 5.4249C9.34405 5.4249 8.8735 5.61663 8.49004 6.00009C8.10658 6.38355 7.91485 6.8541 7.91485 7.41173C7.91485 7.96937 8.10658 8.43992 8.49004 8.82338C8.8735 9.20684 9.34405 9.39857 9.90168 9.39857Z",fill:t})})}function Wye({color:t="black",...e}){return u.jsxs("svg",{width:"18",height:"20",viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[u.jsx("path",{d:"M5.20469 12.8046H2.40469C1.98034 12.8046 1.57338 12.9731 1.27332 13.2732C0.973259 13.5733 0.804688 13.9802 0.804688 14.4046V17.2046C0.804688 17.6289 0.973259 18.0359 1.27332 18.3359C1.57338 18.636 1.98034 18.8046 2.40469 18.8046H5.20469C5.62903 18.8046 6.036 18.636 6.33606 18.3359C6.63612 18.0359 6.80469 17.6289 6.80469 17.2046V14.4046C6.80469 13.9802 6.63612 13.5733 6.33606 13.2732C6.036 12.9731 5.62903 12.8046 5.20469 12.8046ZM15.2047 0.804565H12.4047C11.9803 0.804565 11.5734 0.973136 11.2733 1.27319C10.9733 1.57325 10.8047 1.98022 10.8047 2.40457V5.20457C10.8047 5.62891 10.9733 6.03588 11.2733 6.33594C11.5734 6.63599 11.9803 6.80457 12.4047 6.80457H15.2047C15.629 6.80457 16.036 6.63599 16.3361 6.33594C16.6361 6.03588 16.8047 5.62891 16.8047 5.20457V2.40457C16.8047 1.98022 16.6361 1.57325 16.3361 1.27319C16.036 0.973136 15.629 0.804565 15.2047 0.804565Z",fill:t,fillOpacity:"0.16"}),u.jsx("path",{d:"M5.20469 0.804565H2.40469C1.98034 0.804565 1.57338 0.973136 1.27332 1.27319C0.973259 1.57325 0.804688 1.98022 0.804688 2.40457V7.20457C0.804688 7.41468 0.846073 7.62274 0.92648 7.81686C1.00689 8.01098 1.12474 8.18736 1.27332 8.33594C1.42189 8.48451 1.59827 8.60237 1.79239 8.68277C1.98652 8.76318 2.19457 8.80457 2.40469 8.80457H5.20469C5.4148 8.80457 5.62286 8.76318 5.81698 8.68277C6.0111 8.60237 6.18748 8.48451 6.33606 8.33594C6.48463 8.18736 6.60249 8.01098 6.68289 7.81686C6.7633 7.62274 6.80469 7.41468 6.80469 7.20457V2.40457C6.80469 1.98022 6.63612 1.57325 6.33606 1.27319C6.036 0.973136 5.62903 0.804565 5.20469 0.804565ZM5.20469 12.8046H2.40469C1.98034 12.8046 1.57338 12.9731 1.27332 13.2732C0.973259 13.5733 0.804688 13.9802 0.804688 14.4046V17.2046C0.804688 17.6289 0.973259 18.0359 1.27332 18.3359C1.57338 18.636 1.98034 18.8046 2.40469 18.8046H5.20469C5.62903 18.8046 6.036 18.636 6.33606 18.3359C6.63612 18.0359 6.80469 17.6289 6.80469 17.2046V14.4046C6.80469 13.9802 6.63612 13.5733 6.33606 13.2732C6.036 12.9731 5.62903 12.8046 5.20469 12.8046ZM15.2047 0.804565H12.4047C11.9803 0.804565 11.5734 0.973136 11.2733 1.27319C10.9733 1.57325 10.8047 1.98022 10.8047 2.40457V5.20457C10.8047 5.62891 10.9733 6.03588 11.2733 6.33594C11.5734 6.63599 11.9803 6.80457 12.4047 6.80457H15.2047C15.629 6.80457 16.036 6.63599 16.3361 6.33594C16.6361 6.03588 16.8047 5.62891 16.8047 5.20457V2.40457C16.8047 1.98022 16.6361 1.57325 16.3361 1.27319C16.036 0.973136 15.629 0.804565 15.2047 0.804565ZM15.2047 10.8046H12.4047C11.9803 10.8046 11.5734 10.9731 11.2733 11.2732C10.9733 11.5733 10.8047 11.9802 10.8047 12.4046V17.2046C10.8047 17.6289 10.9733 18.0359 11.2733 18.3359C11.5734 18.636 11.9803 18.8046 12.4047 18.8046H15.2047C15.629 18.8046 16.036 18.636 16.3361 18.3359C16.6361 18.0359 16.8047 17.6289 16.8047 17.2046V12.4046C16.8047 11.9802 16.6361 11.5733 16.3361 11.2732C16.036 10.9731 15.629 10.8046 15.2047 10.8046Z",stroke:t,strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinejoin:"round"})]})}function Gye({tab:t,setTab:e,cartCount:r=0,unreadMessages:n=0,ordersCount:s=0}){const{profile:i}=Dn(),{t:a}=qs(),o=i&&i.role==="pharmacy",[l,c]=j.useState({left:0,opacity:0}),d=j.useRef(null),p=j.useRef({}),g=[o?{key:"/",label:a("dashboard","Dashboard"),icon:Wye}:{key:"/",label:a("home","Home"),icon:Uye},{key:"/orders",label:a("orders","Orders"),icon:zye},{key:"/messages",label:a("messages","Messages"),icon:$ye},...o?[]:[{key:"/cart",label:a("cart","Cart"),icon:qye}],{key:"/profile",label:a("profile","Profile"),icon:Hye}],m=()=>{const _=g.findIndex(I=>I.key===t),S=p.current[t],T=d.current;if(S&&T&&_!==-1){const I=T.getBoundingClientRect(),M=S.getBoundingClientRect(),K=M.left-I.left+M.width/2-20;c({left:`${K}px`,opacity:1})}else c(I=>({...I,opacity:0}))},y=n>99?"99+":String(n||"");j.useEffect(()=>{requestAnimationFrame(()=>{m()})},[t,g]),j.useEffect(()=>{let _;const S=()=>{clearTimeout(_),_=setTimeout(()=>{requestAnimationFrame(m)},100)};return window.addEventListener("resize",S,{passive:!0}),()=>{window.removeEventListener("resize",S),clearTimeout(_)}},[]),j.useEffect(()=>{try{console.debug("[BottomNav] props",{tab:t,cartCount:r,unreadMessages:n,ordersCount:s,displayUnread:y,profile:i})}catch(_){console.error("[BottomNav] debug log failed",_)}},[t,r,n,s,y,i]);const w=typeof window<"u"&&new URLSearchParams(window.location.search).get("debugBottomNav")==="1";return u.jsxs("div",{className:"fixed bottom-3 left-0 right-0 flex justify-center z-50 px-3 sm:px-4","aria-hidden":!1,children:[u.jsxs("nav",{ref:d,role:"navigation","aria-label":"Bottom navigation",className:"liquid-bottom-nav max-w-[95vw] min-w-[280px] sm:max-w-md lg:max-w-lg px-6 sm:px-5 py-3 bg-white/95 dark:bg-gray-900/40 backdrop-blur-md border border-sky-300 dark:border-sky-300 relative",style:{WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",WebkitTransform:"translateZ(0)",transform:"translateZ(0)"},children:[u.jsx("div",{className:"absolute bottom-[5.8rem] w-10 h-2 bg-gradient-to-r from-sky-400 to-sky-600 rounded-full shadow-lg will-change-transform",style:{left:l.left,opacity:l.opacity,transition:"left 0.25s cubic-bezier(0.4, 0.0, 0.2, 1), opacity 0.15s ease-out",transform:`scale(${l.opacity})`,boxShadow:"0 2px 8px rgba(56, 165, 255, 0.4), 0 0 16px rgba(56, 165, 255, 0.2)"}}),u.jsx("div",{className:"flex items-center justify-center gap-[-1] px-2",children:g.map((_,S)=>{const T=t===_.key,I=_.icon,M={color:T?"#36A5FF":document.documentElement.classList.contains("dark")?"#ffffff":"#6b7280"},K=_.key==="/cart",W=_.key==="/messages",L=_.key==="/orders";return u.jsx("div",{className:"flex-none",children:u.jsxs("button",{ref:A=>p.current[_.key]=A,onClick:()=>e(_.key),"aria-label":_.label,"aria-pressed":T,className:`relative flex flex-col items-center text-xs min-w-[56px] sm:min-w-[64px] md:min-w-[72px] px-1 sm:px-2 py-3 focus:outline-none transition-all duration-150 ease-out will-change-transform ${T?"text-sky-600 dark:text-sky-400 transform scale-105":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:[u.jsx("div",{className:"relative z-10 transition-transform duration-150 ease-out will-change-transform hover:scale-110",children:u.jsx(I,{...M,className:`h-7 w-7 sm:h-7 sm:w-7 mb-2 sm:mb-2 transition-all duration-150 ease-out ${T?"drop-shadow-lg":""}`})}),K&&r>0&&u.jsx("span",{className:"absolute -top-0.5 -right-0.5 z-50 bg-sky-500 text-white text-[10px] min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1 font-bold border-2 border-white shadow animate-bounceIn transition-all duration-200 hover:scale-110",children:r}),L&&o&&s>0&&u.jsx("span",{className:"absolute -top-0.5 -right-0 z-50 bg-orange-500 text-white text-[10px] min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1 font-bold border-2 border-white shadow animate-bounceIn transition-all duration-200 hover:scale-110",children:s>99?"99+":s}),W&&n>0&&(()=>{try{return u.jsx("span",{role:"status","aria-live":"polite","aria-atomic":"true",className:"absolute top-0 right-2 z-50 bg-sky-500 text-white text-[10px] min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1 font-bold border-2 border-white shadow animate-bounceIn transition-all duration-200 hover:scale-110",children:y})}catch(A){return console.error("[BottomNav] Error rendering messages badge",A,{unreadMessages:n}),null}})(),u.jsx("span",{className:`truncate max-w-[56px] sm:max-w-[72px] block text-center text-[10px] sm:text-[12px] transition-all duration-150 ease-out ${T?"font-bold":"font-normal"}`,children:_.label})]})},_.key)})})]}),w&&u.jsxs("div",{className:"fixed bottom-20 right-4 z-60 bg-black/80 text-white text-xs px-3 py-1 rounded",children:["UnreadRaw: ",String(n)]})]})}function SP(t){return u.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:u.jsx("path",{d:"M4.87524 5.41667C4.73158 5.41667 4.59381 5.47373 4.49223 5.57532C4.39064 5.6769 4.33358 5.81467 4.33358 5.95833V8.125H5.41691V6.5H7.04191V7.85417L8.93774 5.95833L7.04191 4.0625V5.41667H4.87524ZM6.8832 0.75454L12.2457 6.11704C12.3472 6.21862 12.4043 6.35637 12.4043 6.5C12.4043 6.64363 12.3472 6.78138 12.2457 6.88296L6.8832 12.2455C6.78162 12.347 6.64387 12.404 6.50024 12.404C6.35661 12.404 6.21886 12.347 6.11728 12.2455L0.754784 6.88296C0.653237 6.78138 0.596191 6.64363 0.596191 6.5C0.596191 6.35637 0.653237 6.21862 0.754784 6.11704L6.11728 0.75454C6.21886 0.652993 6.35661 0.595947 6.50024 0.595947C6.64387 0.595947 6.78162 0.652993 6.8832 0.75454Z",fill:"currentColor"})})}function Kye({product:t,pharmacy:e}){const{user:r}=Dn(),{t:n}=qs(),s=Jn(),{userCoords:i}=Np();if(!t)return null;const a=Number(t.price||0),[o,l]=j.useState(!1),[c,d]=j.useState(!1),[p,g]=j.useState(null),[m,y]=j.useState(!1),[w,_]=j.useState(!1),[S,T]=j.useState(!1);j.useEffect(()=>{if(e&&i){const we=GS(e,i,"driving");g(we)}else g(null)},[e,i]),j.useEffect(()=>{(async()=>{if(r&&t)try{const Re=await WM(r.uid,t.id);_(Re)}catch(Re){console.error("Error checking wishlist status:",Re)}})()},[r,t]);const[I,M]=j.useState([]),[K,W]=j.useState(!1);async function L(we){if(!we)return M([]);try{W(!0);const Re=_r(Zt(ht,"products"),jr("category","==",we)),Ke=(await wn(Re)).docs.map(ze=>({id:ze.id,...ze.data()}));M(Ke),d(!0)}catch(Re){console.error("Failed to fetch category products",Re),M([]),d(!0)}finally{W(!1)}}const[A,E]=j.useState([]),[D,R]=j.useState(!0),[F,V]=j.useState({name:r?.displayName||"",rating:"",comment:""}),[Z,fe]=j.useState(!1),[xe,he]=j.useState(3),[ae,H]=j.useState(!1),[te,G]=j.useState({}),[P,U]=j.useState({});j.useEffect(()=>{async function we(){if(!t?.id)return E([]);R(!0);try{const Re=Zt(ht,"products",t.id,"reviews"),pe=_r(Re,Yi("createdAt","desc")),Ke=await wn(pe);E(Ke.docs.map(ze=>({id:ze.id,...ze.data()})))}catch{E([])}finally{R(!1)}}we()},[t?.id]),j.useEffect(()=>{async function we(){if(!r||!t?.id||A.length===0)return U({});const Re={};for(const pe of A){er(ht,"products",t.id,"reviews",pe.id,"likes",r.uid);try{const Ke=await wn(_r(Zt(ht,"products",t.id,"reviews",pe.id,"likes")));Re[pe.id]=Ke.docs.some(ze=>ze.id===r.uid)}catch{}}U(Re)}we()},[r,t?.id,A]);function X(we){const{name:Re,value:pe}=we.target;V(Ke=>({...Ke,[Re]:pe}))}async function J(we){if(we.preventDefault(),!(!F.rating&&!F.comment)){fe(!0);try{const Re=Zt(ht,"products",t.id,"reviews");await Qd(Re,{name:F.name,rating:F.rating?Number(F.rating):null,comment:F.comment||"",createdAt:_s(),userId:r?.uid||null}),V({name:r?.displayName||"",rating:"",comment:""});const pe=_r(Re,Yi("createdAt","desc")),Ke=await wn(pe);E(Ke.docs.map(ze=>({id:ze.id,...ze.data()})))}catch{}finally{fe(!1)}}}async function ie(we){G(Re=>({...Re,[we]:!0}));try{const Re=er(ht,"products",t.id,"reviews",we,"likes",r.uid),pe=er(ht,"products",t.id,"reviews",we);P[we]?(await Kl(Re),await us(pe,{likes:o5(-1)}),E(Ke=>Ke.map(ze=>ze.id===we?{...ze,likes:Math.max((ze.likes||1)-1,0)}:ze)),U(Ke=>({...Ke,[we]:!1}))):(await cu(Re,{likedAt:_s(),userId:r.uid}),await us(pe,{likes:o5(1)}),E(Ke=>Ke.map(ze=>ze.id===we?{...ze,likes:(ze.likes||0)+1}:ze)),U(Ke=>({...Ke,[we]:!0})))}catch{}finally{G(Re=>({...Re,[we]:!1}))}}if(!r)return u.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[u.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:"Please sign in to continue"}),u.jsx("button",{className:"rounded-full bg-sky-600 text-white px-6 py-2 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>s("/auth/landing"),children:"Sign In / Sign Up"})]});function ve({value:we,onChange:Re,disabled:pe}){return u.jsx("div",{className:"flex gap-1 mb-2",role:"radiogroup","aria-label":"Rating",children:[1,2,3,4,5].map(Ke=>u.jsx("button",{type:"button",onClick:()=>!pe&&Re(Ke),onKeyDown:ze=>{!pe&&(ze.key==="Enter"||ze.key===" ")&&Re(Ke)},tabIndex:0,"aria-label":`${Ke} Star${Ke>1?"s":""}`,"aria-checked":we===Ke,className:`transition-all duration-150 focus:outline-none ${we>=Ke?"text-amber-400 scale-110":"text-zinc-300"} hover:scale-125 active:scale-95`,children:u.jsx(O_,{className:"w-6 h-6",fill:we>=Ke?"#fbbf24":"none"})},Ke))})}const ke=`${window.location.origin}/product-preview/${t?.id}`;async function oe(){if(navigator.share){try{await navigator.share({title:t.name,text:`Check out this product: ${t.name}`,url:ke})}catch{}y(!1)}else if(navigator.clipboard){try{await navigator.clipboard.writeText(ke),alert(n("shareable_link_copied","Shareable link copied to clipboard!"))}catch{window.prompt(n("copy_this_link","Copy this link:"),ke)}y(!1)}else window.prompt(n("copy_this_link","Copy this link:"),ke),y(!1)}const Ee=async()=>{if(!r){alert(n("please_sign_in_wishlist","Please sign in to add items to your wishlist"));return}if(!S){T(!0);try{w?(await HM(r.uid,t.id),_(!1)):(await qM(r.uid,t.id,{name:t.name,price:t.price,image:t.image,category:t.category,pharmacyId:e?.id,pharmacyName:e?.name}),_(!0))}catch(we){console.error("Error toggling wishlist:",we),alert(n("failed_update_wishlist","Failed to update wishlist. Please try again."))}finally{T(!1)}}};function Oe(){const we=new URLSearchParams({productId:t?.id||"",productName:t?.name||"",productImage:t?.image||"",vendorName:e?.name||"",prefillMsg:"I want to know more about this drug"});s(`/chat/${e?.id}?${we.toString()}`),y(!1)}const ne=()=>u.jsx("div",{className:"md:hidden fixed top-0 left-0 right-0 z-[100] bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-700",children:u.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[u.jsxs("button",{onClick:()=>s(-1),className:"w-[70px] h-[24px] font-poppins font-extralight tracking-tight text-[12px] flex items-center justify-center rounded-full bg-white border border-zinc-300 dark:border-gray-600 hover:scale-105 hover:shadow-md transition-all duration-200 active:scale-95",children:[u.jsx(du,{className:"h-4 w-4 mr-1"})," ",n("back","Back")]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{type:"button",className:`p-2 rounded-full border border-zinc-200 bg-white hover:scale-110 active:scale-95 transition-all duration-200 ${w?"bg-red-50 hover:bg-red-100":"hover:bg-red-50"} ${S?"opacity-50 cursor-not-allowed":""}`,"aria-label":w?"Remove from wishlist":"Add to wishlist",onClick:Ee,disabled:S,children:u.jsx(zN,{className:`w-5 h-5 transition-colors ${w?"text-red-500 fill-current":"text-red-400"}`})}),u.jsx("button",{type:"button",className:"p-2 rounded-full border border-zinc-200 bg-white hover:bg-sky-50 hover:scale-110 active:scale-95 transition-all duration-200","aria-label":"Share product",onClick:()=>y(!0),children:u.jsx(R3,{className:"w-5 h-5 text-sky-600"})})]})]})});return u.jsxs(u.Fragment,{children:[Ki.createPortal(u.jsx(ne,{}),document.body),u.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 pt-24 md:pt-0",children:u.jsxs("div",{className:"w-full max-w-full md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-0 md:px-8 lg:px-12 xl:px-0",children:[u.jsxs("div",{className:"pt-6 sticky top-0 z-20 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md pb-2 animate-slide-down-fade items-center justify-between hidden md:flex",children:[u.jsxs("button",{onClick:()=>s(-1),className:"w-[70px] h-[24px] font-poppins font-extralight tracking-tight text-[12px] flex items-center justify-center rounded-full bg-white dark:bg-gray-800 border border-zinc-300 dark:border-gray-600 dark:border-gray-600 text-gray-900 dark:text-white hover:scale-105 hover:shadow-md transition-all duration-200 active:scale-95",children:[u.jsx(du,{className:"h-4 w-4 mr-1"})," ",n("back","Back")]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{type:"button",className:`p-2 rounded-full border border-zinc-200 dark:border-gray-600 bg-white dark:bg-gray-800 hover:scale-110 active:scale-95 transition-all duration-200 ${w?"bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30":"hover:bg-red-50 dark:hover:bg-red-900/20"} ${S?"opacity-50 cursor-not-allowed":""}`,"aria-label":w?"Remove from wishlist":"Add to wishlist",onClick:Ee,disabled:S,children:u.jsx(zN,{className:`w-5 h-5 transition-colors ${w?"text-red-500 fill-current":"text-red-400"}`})}),u.jsx("button",{type:"button",className:"p-2 rounded-full border border-zinc-200 dark:border-gray-600 bg-white dark:bg-gray-800 hover:bg-sky-50 dark:hover:bg-sky-900/20 hover:scale-110 active:scale-95 transition-all duration-200","aria-label":"Share product",onClick:()=>y(!0),children:u.jsx(R3,{className:"w-5 h-5 text-sky-600"})})]})]}),u.jsx("div",{className:"mt-1 md:border md:rounded-t-3xl md:max-w-4xl md:border-zinc-100 dark:md:border-gray-700 animate-fade-in-up",children:u.jsx("div",{className:"w-full max-w-full md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-0 md:px-8 lg:px-12 xl:px-0 pt-6 pb-36",children:u.jsx("div",{className:"mx-auto w-full",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[u.jsxs("div",{className:"md:rounded-2xl md:p-4 md:border flex flex-col items-center justify-center w-full card-interactive hover:shadow-lg transition-all duration-300 animate-fade-in-left",children:[t?.image&&!o?u.jsx("img",{src:t.image,alt:t.name,onError:()=>l(!0),className:"w-[68vw] h-[58vw] md:h-auto md:max-h-[160px] lg:max-h-[360px] object-cover md:object-contain hover:scale-105 transition-transform duration-300"}):u.jsx("div",{className:"h-[100px] lg:h-[200px] w-full flex items-center justify-center bg-zinc-100 dark:bg-gray-700 rounded-md text-3xl font-semibold text-zinc-800 dark:text-zinc-200 animate-bounce-gentle",children:u.jsx(sc,{name:t.name,image:t.image,category:t.category,size:48,"lg:size":80,roundedClass:"rounded-md"})}),u.jsxs("div",{className:"w-full mt-4 hidden lg:flex flex-col gap-3",children:[u.jsx("button",{onClick:async()=>{if(!r)return alert("Please sign in");if(!t.id)return alert(n("product_unavailable","Product unavailable. Please try again."));try{await Km(r.uid,t.id,1)}catch{alert(n("failed_add_to_cart","Failed to add to cart."))}},className:"w-full h-10 rounded-full bg-sky-600 text-white text-[14px] font-poppins font-light shadow-sm btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200","aria-label":n("add_to_cart","Add to Cart"),children:n("add_to_cart","Add to Cart")}),u.jsxs("a",{href:`tel:${e?.phone||""}`,className:"w-full h-10 rounded-full border border-zinc-400 dark:border-gray-600 text-[14px] font-poppins font-light flex items-center justify-center gap-2 text-zinc-800 dark:text-white bg-white dark:bg-gray-800 btn-interactive hover:border-zinc-500 dark:hover:border-gray-500 hover:scale-105 active:scale-95 transition-all duration-200","aria-label":n("call_to_order","Call to Order"),children:[u.jsx(k1,{className:"h-4 w-4 text-zinc-800 dark:text-white"})," ",n("call_to_order","Call to Order")]})]})]}),u.jsxs("div",{className:"flex flex-col animate-fade-in-right",children:[u.jsxs("div",{className:"mb-3 flex items-start justify-between animate-slide-up",style:{animationDelay:"0.1s"},children:[u.jsx("h1",{className:"text-[18px] lg:text-[20px] font-poppins font-medium tracking-tight leading-tight min-w-0 animate-text-reveal text-gray-900 dark:text-white",children:t.name}),u.jsxs("div",{className:"text-[18px] text-sky-600 dark:text-sky-400 font-poppins font-semibold lg:hidden animate-pulse-slow",children:["",a.toLocaleString()]})]}),u.jsx("div",{className:"mb-4 hidden lg:block animate-fade-in",style:{animationDelay:"0.2s"},children:u.jsxs("div",{className:"text-[20px] text-sky-600 dark:text-sky-400 font-poppins font-semibold animate-pulse-slow",children:["",a.toLocaleString()]})}),u.jsx("div",{className:"mb-2 animate-fade-in",style:{animationDelay:"0.3s"},children:u.jsx("button",{onClick:()=>s(`/vendor/${e?.id||t.pharmacyId}`),className:"text-sky-600 dark:text-sky-400 underline font-poppins text-[15px] font-light hover:text-sky-700 dark:hover:text-sky-300 transition-colors duration-200 hover:scale-105",children:u.jsx(hu,{name:e?.name||n("pharmacy","Pharmacy"),isVerified:e?.isVerified,className:"inline-flex items-center gap-1",nameClassName:"underline decoration-inherit underline-offset-2",iconClassName:"h-3.5 w-3.5 text-sky-500 dark:text-sky-400"})})}),u.jsxs("div",{className:"mb-1 flex items-center justify-between gap-2 text-zinc-600 dark:text-zinc-300 text-[13px] font-poppins font-light animate-fade-in",style:{animationDelay:"0.4s"},children:[u.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[u.jsx(Nc,{className:"h-4 w-4 flex-shrink-0"}),u.jsx("span",{className:"truncate",children:e?.address})]}),e?.address&&u.jsxs("button",{onClick:()=>{const we=encodeURIComponent(e.address);window.open(`https://www.google.com/maps/search/?api=1&query=${we}`,"_blank")},className:"text-sky-600 dark:text-sky-400 text-[13px] font-poppins font-light px-2 py-1 rounded-full hover:bg-sky-50 dark:hover:bg-sky-900/20 transition-all duration-200 lg:hidden hover:scale-105 active:scale-95","aria-label":"Get directions",children:[u.jsx(SP,{className:"h-4 w-4 inline-block mr-1"})," ",n("get_directions","Get Directions")]})]}),u.jsxs("div",{className:"mb-3 flex items-center gap-2 text-zinc-600 dark:text-zinc-300 text-[13px] font-poppins font-light animate-fade-in",style:{animationDelay:"0.5s"},children:[u.jsx(x5,{className:"h-4 w-4"}),p?n("eta_to_pharmacy","{time} to {pharmacy}").replace("{time}",p.formatted).replace("{pharmacy}",e?.name):i?n("calculating_eta","Calculating ETA..."):n("fetching_location","Fetching location...")]}),e?.address&&u.jsx("div",{className:"mb-4 hidden lg:block animate-fade-in",style:{animationDelay:"0.6s"},children:u.jsxs("button",{className:"flex items-center gap-2 text-sky-600 dark:text-sky-400 text-[13px] font-poppins font-light px-3 py-2 rounded-full hover:bg-sky-50 dark:hover:bg-sky-900/20 transition-all duration-200 hover:scale-105 active:scale-95",onClick:()=>{const we=encodeURIComponent(e.address);window.open(`https://www.google.com/maps/search/?api=1&query=${we}`,"_blank")},children:[u.jsx(SP,{className:"h-4 w-4 text-sky-600 dark:text-sky-400"})," Get Directions"]})}),u.jsxs("div",{className:"mt-2 animate-fade-in",style:{animationDelay:"0.7s"},children:[u.jsxs("div",{className:"hidden lg:block",children:[u.jsx("div",{className:"text-[15px] tracking-tight text-black font-poppins font-medium",children:n("category","Category")}),u.jsx("div",{className:"mt-0.5 mb-5",children:u.jsx("button",{type:"button",onClick:async we=>{we.stopPropagation(),await L(t.category||"General")},className:"text-[13px] text-[#fc7f26] font-poppins font-normal underline hover:text-amber-500 transition-colors duration-200 hover:scale-105",children:t.category||"General"})})]}),u.jsx("div",{className:"block lg:hidden",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-[15px] text-black font-poppins font-medium mb-2",children:n("category","Category")}),u.jsx("div",{children:u.jsx("button",{type:"button",onClick:async we=>{we.stopPropagation(),await L(t.category||"General")},className:"text-[13px] text-[#fc7f26] font-poppins font-normal underline hover:text-amber-500 transition-colors duration-200 hover:scale-105",children:t.category||"General"})})]})})]}),u.jsx("div",{className:"mt-4 border-b"}),u.jsxs("div",{className:"mt-6 animate-fade-in",style:{animationDelay:"0.8s"},children:[u.jsx("div",{className:"text-[15px] font-poppins font-medium tracking-tighter text-zinc-800 dark:text-white",children:n("product_description","Product Description")}),u.jsx("p",{className:"mt-2 text-zinc-600 dark:text-zinc-300 leading-6 font-poppins text-[14px] font-light",children:t.description})]}),u.jsx("div",{className:"mt-8 border-b"}),u.jsxs("div",{className:"mt-8 animate-fade-in-up",style:{animationDelay:"0.9s"},children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[15px] font-poppins font-medium tracking-tighter text-zinc-800 dark:text-white",children:n("customer_reviews","Customer Reviews")}),u.jsx("span",{className:"text-sky-400 font-semibold text-[13px]",children:A.length})]}),ae&&u.jsx("button",{className:"text-sky-400 text-[13px] font-poppins underline",onClick:()=>{H(!1),he(3)},children:n("see_less","See less")})]}),u.jsx("div",{className:"space-y-4 mb-6",children:D?u.jsx("div",{className:"p-4 text-center text-zinc-400 dark:text-zinc-500 animate-pulse",children:n("loading_reviews","Loading reviews")}):A.length===0?u.jsx("div",{className:"p-4 text-center text-zinc-400 dark:text-zinc-500 animate-fade-in text-[12px]",children:n("no_reviews_yet","No reviews yet. Be the first to review!")}):A.slice(0,xe).map((we,Re)=>{let pe="";if(we.createdAt){const Ke=we.createdAt.seconds?new Date(we.createdAt.seconds*1e3):new Date(we.createdAt);pe=Ke.toLocaleDateString()+" "+Ke.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}return u.jsxs("div",{className:"p-4 rounded-xl border border-sky-100 dark:border-gray-600 animate-slide-up transition-all duration-200",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"font-poppins font-semibold text-[14px] text-zinc-700 dark:text-zinc-200",children:we.name}),u.jsxs("span",{className:"flex gap-0.5 text-amber-400 text-[13px]",children:["".repeat(we.rating),"".repeat(5-we.rating)]})]}),u.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:u.jsxs("div",{className:"flex items-center justify-center",children:[we.likes>0&&u.jsx("span",{className:"text-sky-500 font-semibold text-[13px] mr-1",children:we.likes}),u.jsx("button",{className:`flex items-center justify-center px-2 py-1 rounded transition-all duration-200 ${te[we.id]?"opacity-50 pointer-events-none":""} ${P[we.id]?"bg-sky-50 text-sky-400":"text-zinc-400"}`,onClick:()=>ie(we.id),disabled:te[we.id],"aria-label":P[we.id]?"Unlike review":"Like review",style:{minHeight:"20px"},children:u.jsx(Iie,{className:"w-4 h-4",fill:P[we.id]?"#38bdf8":"none"})})]})})]}),u.jsx("div",{className:"text-zinc-600 dark:text-zinc-300 text-[13px] font-poppins font-light",children:we.comment}),pe&&u.jsx("div",{className:"text-[11px] text-zinc-400 dark:text-zinc-500 mt-1",children:pe}),we.pharmacyResponse&&u.jsxs("div",{className:"mt-3 p-3 bg-gradient-to-r from-sky-50 to-blue-50 dark:bg-gradient-to-r dark:from-gray-800 dark:to-gray-700 border border-sky-100 dark:border-gray-600 dark:border-gray-600 rounded-lg shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("div",{className:"w-2 h-2 bg-sky-500 dark:bg-sky-400 rounded-full"}),u.jsx("span",{className:"font-poppins font-semibold text-[13px] text-sky-700 dark:text-white",children:n("pharmacy_response","{pharmacyName} Response",{pharmacyName:e?.name||"Pharmacy"})}),(we.pharmacyResponse.respondedAt||we.responseDate)&&u.jsx("span",{className:"text-[10px] text-sky-500 dark:text-zinc-300 ml-auto",children:new Date((we.pharmacyResponse.respondedAt?.seconds||we.responseDate?.seconds||we.responseDate)*1e3).toLocaleDateString()})]}),u.jsxs("div",{className:"text-zinc-700 dark:text-white text-[13px] font-poppins leading-relaxed pl-4",children:['"',typeof we.pharmacyResponse=="string"?we.pharmacyResponse:we.pharmacyResponse.message||we.pharmacyResponse,'"']})]})]},we.id||Re)})}),A.length>xe&&u.jsx("div",{className:"flex justify-start",children:u.jsx("button",{className:"text-sky-400 text-[13px] font-poppins underline",onClick:()=>{he(we=>we+3),H(!0)},children:n("see_more","See more")})}),u.jsx("div",{className:"mt-4 border-b"}),u.jsxs("form",{className:"p-4 mt-6 rounded-xl border border-zinc-100 bg-white shadow-sm animate-bounce-in",style:{animationDelay:"1.0s"},onSubmit:J,children:[u.jsx("div",{className:"mb-2 font-poppins text-[14px] font-medium text-zinc-700 dark:text-zinc-300",children:n("leave_a_review","Leave a Review")}),u.jsx(ve,{value:Number(F.rating),onChange:we=>V(Re=>({...Re,rating:we})),disabled:Z}),u.jsx("input",{type:"text",name:"name",value:F.name,onChange:X,placeholder:n("your_name","Your Name"),className:"w-full mb-2 px-3 py-2 rounded-lg border-zinc-200 font-poppins text-[13px] focus:ring-2 focus:ring-sky-200 transition-all duration-20"}),u.jsx("textarea",{name:"comment",value:F.comment,onChange:X,placeholder:n("your_review_optional","Your review... (optional)"),className:"w-full mb-2 px-3 py-2 rounded-lg border border-zinc-200 font-poppins text-[13px] focus:ring-2 focus:ring-sky-200 transition-all duration-200",rows:3}),u.jsx("button",{type:"submit",disabled:Z||!F.rating&&!F.comment,className:"w-full h-10 rounded-full border border-sky-500 dark:border-gray-600 text-black text-[14px] font-poppins font-light shadow-sm btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200",children:Z?n("submitting","Submitting"):n("submit_review","Submit Review")})]})]})]})]})})})}),u.jsx("div",{className:"fixed left-0 right-0 bottom-[8rem] z-30 lg:hidden animate-slide-up-fade",children:u.jsx("div",{className:"w-full max-w-full md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-2 md:px-8 lg:px-12 xl:px-0",children:u.jsxs("div",{className:"flex flex-row gap-3 justify-center",children:[u.jsx("button",{onClick:async()=>{if(!r)return alert(n("please_sign_in","Please sign in"));if(!t.id)return alert(n("product_unavailable","Product unavailable. Please try again."));try{await Km(r.uid,t.id,1)}catch{alert(n("failed_add_to_cart","Failed to add to cart."))}},className:"flex-1 max-w-[140px] h-10 rounded-full bg-sky-600 text-white text-[13px] font-poppins font-light shadow-sm btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200",children:n("add_to_cart","Add to Cart")}),u.jsxs("a",{href:`tel:${e?.phone||""}`,className:"flex-1 max-w-[140px] h-10 rounded-full border border-zinc-400 dark:border-gray-600 text-[13px] font-poppins font-light flex items-center justify-center gap-2 text-zinc-800 dark:text-white bg-white dark:bg-gray-800 btn-interactive hover:border-zinc-500 dark:hover:border-gray-500 hover:scale-105 active:scale-95 transition-all duration-200",children:[u.jsx(k1,{className:"h-4 w-4 text-zinc-800 dark:text-white"})," ",n("call_to_order","Call to Order")]})]})})}),c&&u.jsx("div",{onClick:()=>d(!1),className:"fixed inset-0 z-50 flex items-start justify-center pt-24 bg-black/30 dark:bg-black/80 animate-fade-in",role:"dialog","aria-modal":"true",children:u.jsxs("div",{onClick:we=>we.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-2xl p-4 w-[90vw] max-w-md max-h-[80vh] overflow-y-auto animate-bounce-in shadow-xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("div",{className:"text-lg font-medium animate-text-reveal",children:n("products_in_category",'Products in "{category}"').replace("{category}",t.category||"General")}),u.jsx("button",{onClick:()=>d(!1),className:"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-300 transition-colors duration-200 hover:scale-110 active:scale-95",children:n("close","Close")})]}),K?u.jsx("div",{className:"p-4 text-center text-zinc-500 dark:text-zinc-400 animate-pulse",children:n("loading","Loading")}):I.length===0?u.jsx("div",{className:"p-4 text-zinc-500 dark:text-zinc-400 animate-fade-in",children:n("no_products_found","No products found.")}):u.jsx("div",{className:"space-y-2",children:I.map((we,Re)=>u.jsxs("button",{onClick:()=>{d(!1),s(`/product/${we.id}`)},className:"w-full text-left rounded-lg p-2 flex items-center gap-3 hover:bg-sky-50 transition-all duration-200 card-interactive animate-fadeInUp hover:scale-102",style:{animationDelay:`${Re*.1}s`},children:[u.jsx(sc,{name:we.name,image:we.image,category:we.category,size:48,className:"flex-shrink-0 animate-bounce-gentle",roundedClass:"rounded-md"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-medium text-sm truncate",children:we.name}),u.jsx("div",{className:"text-xs text-zinc-500 truncate",children:we.category})]})]},we.id))})]})}),m&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 dark:bg-black/30 animate-fade-in",role:"dialog","aria-modal":"true",children:u.jsxs("div",{className:"bg-white rounded-2xl p-6 w-[90vw] max-w-xs shadow-xl animate-bounce-in flex flex-col gap-4",children:[u.jsx("div",{className:"font-poppins font-medium text-[16px] mb-2 text-center",children:n("share_product","Share Product")}),u.jsxs("button",{className:"w-full flex items-center gap-2 px-4 py-2 rounded-lg border border-sky-200 dark:border-gray-600 bg-sky-50 text-sky-700 font-poppins font-medium hover:bg-sky-100 hover:scale-105 active:scale-95 transition-all duration-200",onClick:oe,children:[u.jsx(R3,{className:"w-4 h-4"})," ",n("share_product","Share Product")]}),u.jsxs("button",{className:"w-full flex items-center gap-2 px-4 py-2 rounded-lg border border-zinc-200 bg-zinc-50 text-zinc-700 dark:bg-gray-700 dark:text-white dark:border-gray-600 font-poppins font-medium hover:bg-zinc-100 dark:hover:bg-gray-600 hover:scale-105 active:scale-95 transition-all duration-200",onClick:Oe,children:[u.jsx("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-4 h-4",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 10h.01M12 10h.01M16 10h.01M21 12c0 4.418-4.03 8-9 8a9.77 9.77 0 01-4-.8l-4 1 1-4A8.96 8.96 0 013 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),n("message_vendor","Message Vendor")]}),u.jsx("button",{className:"mt-2 text-zinc-400 hover:text-zinc-700 text-[13px] font-poppins underline",onClick:()=>y(!1),children:n("cancel","Cancel")})]})})]})})]})}const Yye="data:image/svg+xml,%3csvg%20width='26'%20height='23'%20viewBox='0%200%2026%2023'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2.41667%2022.3281C1.93056%2022.5226%201.46875%2022.4798%201.03125%2022.1998C0.59375%2021.9198%200.375%2021.5129%200.375%2020.9792V14.4167L12.0417%2011.5L0.375%208.58333V2.02083C0.375%201.48611%200.59375%201.07923%201.03125%200.800203C1.46875%200.521176%201.93056%200.478397%202.41667%200.67187L24.875%2010.151C25.4826%2010.4184%2025.7865%2010.868%2025.7865%2011.5C25.7865%2012.1319%2025.4826%2012.5816%2024.875%2012.849L2.41667%2022.3281Z'%20fill='black'/%3e%3c/svg%3e";function Xye(t){return u.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:u.jsx("path",{d:"M2.68917 5.64292C3.70917 7.6475 5.3525 9.29083 7.35708 10.3108L8.91542 8.7525C9.11375 8.55417 9.39 8.4975 9.63792 8.57542C10.4312 8.8375 11.2812 8.97917 12.1667 8.97917C12.3545 8.97917 12.5347 9.05379 12.6675 9.18663C12.8004 9.31947 12.875 9.49964 12.875 9.6875V12.1667C12.875 12.3545 12.8004 12.5347 12.6675 12.6675C12.5347 12.8004 12.3545 12.875 12.1667 12.875C8.97302 12.875 5.91017 11.6063 3.65192 9.34808C1.39367 7.08983 0.125 4.02698 0.125 0.833333C0.125 0.645472 0.199628 0.465304 0.332466 0.332466C0.465304 0.199628 0.645472 0.125 0.833333 0.125H3.3125C3.50036 0.125 3.68053 0.199628 3.81337 0.332466C3.94621 0.465304 4.02083 0.645472 4.02083 0.833333C4.02083 1.71875 4.1625 2.56875 4.42458 3.36208C4.5025 3.61 4.44583 3.88625 4.2475 4.08458L2.68917 5.64292Z",fill:"black"})})}const Qye="/assets/message-tone-B30p1O1l.mp3",Rz=typeof document<"u"?Is.useLayoutEffect:()=>{};var wb;const Jye=(wb=Is.useInsertionEffect)!==null&&wb!==void 0?wb:Rz;function Zye(t){const e=j.useRef(null);return Jye(()=>{e.current=t},[t]),j.useCallback((...r)=>{const n=e.current;return n?.(...r)},[])}const Hf=t=>{var e;return(e=t?.ownerDocument)!==null&&e!==void 0?e:document},R0=t=>t&&"window"in t&&t.window===t?t:Hf(t).defaultView||window;function eve(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function tve(t){return eve(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let rve=!1;function V7(){return rve}function Lz(t,e){if(!V7())return e&&t?t.contains(e):!1;if(!t||!e)return!1;let r=e;for(;r!==null;){if(r===t)return!0;r.tagName==="SLOT"&&r.assignedSlot?r=r.assignedSlot.parentNode:tve(r)?r=r.host:r=r.parentNode}return!1}const yk=(t=document)=>{var e;if(!V7())return t.activeElement;let r=t.activeElement;for(;r&&"shadowRoot"in r&&(!((e=r.shadowRoot)===null||e===void 0)&&e.activeElement);)r=r.shadowRoot.activeElement;return r};function jz(t){return V7()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}function nve(t){var e;if(typeof window>"u"||window.navigator==null)return!1;let r=(e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands;return Array.isArray(r)&&r.some(n=>t.test(n.brand))||t.test(window.navigator.userAgent)}function sve(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function Fz(t){let e=null;return()=>(e==null&&(e=t()),e)}const ive=Fz(function(){return sve(/^Mac/i)}),ave=Fz(function(){return nve(/Android/i)});function Dz(){let t=j.useRef(new Map),e=j.useCallback((s,i,a,o)=>{let l=o?.once?(...c)=>{t.current.delete(a),a(...c)}:a;t.current.set(a,{type:i,eventTarget:s,fn:l,options:o}),s.addEventListener(i,l,o)},[]),r=j.useCallback((s,i,a,o)=>{var l;let c=((l=t.current.get(a))===null||l===void 0?void 0:l.fn)||a;s.removeEventListener(i,c,o),t.current.delete(a)},[]),n=j.useCallback(()=>{t.current.forEach((s,i)=>{r(s.eventTarget,s.type,i,s.options)})},[r]);return j.useEffect(()=>n,[n]),{addGlobalListener:e,removeGlobalListener:r,removeAllGlobalListeners:n}}function ove(t){return t.pointerType===""&&t.isTrusted?!0:ave()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function Oz(t){let e=t;return e.nativeEvent=t,e.isDefaultPrevented=()=>e.defaultPrevented,e.isPropagationStopped=()=>e.cancelBubble,e.persist=()=>{},e}function lve(t,e){Object.defineProperty(t,"target",{value:e}),Object.defineProperty(t,"currentTarget",{value:e})}function Mz(t){let e=j.useRef({isFocused:!1,observer:null});Rz(()=>{const n=e.current;return()=>{n.observer&&(n.observer.disconnect(),n.observer=null)}},[]);let r=Zye(n=>{t?.(n)});return j.useCallback(n=>{if(n.target instanceof HTMLButtonElement||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLSelectElement){e.current.isFocused=!0;let s=n.target,i=a=>{if(e.current.isFocused=!1,s.disabled){let o=Oz(a);r(o)}e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};s.addEventListener("focusout",i,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&s.disabled){var a;(a=e.current.observer)===null||a===void 0||a.disconnect();let o=s===document.activeElement?null:document.activeElement;s.dispatchEvent(new FocusEvent("blur",{relatedTarget:o})),s.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:o}))}}),e.current.observer.observe(s,{attributes:!0,attributeFilter:["disabled"]})}},[r])}let cve=!1,fy=null,vk=new Set,F2=new Map,yp=!1,wk=!1;const uve={Tab:!0,Escape:!0};function U7(t,e){for(let r of vk)r(t,e)}function dve(t){return!(t.metaKey||!ive()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function B5(t){yp=!0,dve(t)&&(fy="keyboard",U7("keyboard",t))}function s1(t){fy="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(yp=!0,U7("pointer",t))}function Bz(t){ove(t)&&(yp=!0,fy="virtual")}function Vz(t){t.target===window||t.target===document||cve||!t.isTrusted||(!yp&&!wk&&(fy="virtual",U7("virtual",t)),yp=!1,wk=!1)}function Uz(){yp=!1,wk=!0}function _k(t){if(typeof window>"u"||typeof document>"u"||F2.get(R0(t)))return;const e=R0(t),r=Hf(t);let n=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){yp=!0,n.apply(this,arguments)},r.addEventListener("keydown",B5,!0),r.addEventListener("keyup",B5,!0),r.addEventListener("click",Bz,!0),e.addEventListener("focus",Vz,!0),e.addEventListener("blur",Uz,!1),typeof PointerEvent<"u"&&(r.addEventListener("pointerdown",s1,!0),r.addEventListener("pointermove",s1,!0),r.addEventListener("pointerup",s1,!0)),e.addEventListener("beforeunload",()=>{zz(t)},{once:!0}),F2.set(e,{focus:n})}const zz=(t,e)=>{const r=R0(t),n=Hf(t);e&&n.removeEventListener("DOMContentLoaded",e),F2.has(r)&&(r.HTMLElement.prototype.focus=F2.get(r).focus,n.removeEventListener("keydown",B5,!0),n.removeEventListener("keyup",B5,!0),n.removeEventListener("click",Bz,!0),r.removeEventListener("focus",Vz,!0),r.removeEventListener("blur",Uz,!1),typeof PointerEvent<"u"&&(n.removeEventListener("pointerdown",s1,!0),n.removeEventListener("pointermove",s1,!0),n.removeEventListener("pointerup",s1,!0)),F2.delete(r))};function hve(t){const e=Hf(t);let r;return e.readyState!=="loading"?_k(t):(r=()=>{_k(t)},e.addEventListener("DOMContentLoaded",r)),()=>zz(t,r)}typeof document<"u"&&hve();function $z(){return fy!=="pointer"}const fve=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function pve(t,e,r){let n=Hf(r?.target);const s=typeof window<"u"?R0(r?.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?R0(r?.target).HTMLTextAreaElement:HTMLTextAreaElement,a=typeof window<"u"?R0(r?.target).HTMLElement:HTMLElement,o=typeof window<"u"?R0(r?.target).KeyboardEvent:KeyboardEvent;return t=t||n.activeElement instanceof s&&!fve.has(n.activeElement.type)||n.activeElement instanceof i||n.activeElement instanceof a&&n.activeElement.isContentEditable,!(t&&e==="keyboard"&&r instanceof o&&!uve[r.key])}function mve(t,e,r){_k(),j.useEffect(()=>{let n=(s,i)=>{pve(!!r?.isTextInput,s,i)&&t($z())};return vk.add(n),()=>{vk.delete(n)}},e)}function gve(t){let{isDisabled:e,onFocus:r,onBlur:n,onFocusChange:s}=t;const i=j.useCallback(l=>{if(l.target===l.currentTarget)return n&&n(l),s&&s(!1),!0},[n,s]),a=Mz(i),o=j.useCallback(l=>{const c=Hf(l.target),d=c?yk(c):yk();l.target===l.currentTarget&&d===jz(l.nativeEvent)&&(r&&r(l),s&&s(!0),a(l))},[s,r,a]);return{focusProps:{onFocus:!e&&(r||s||n)?o:void 0,onBlur:!e&&(n||s)?i:void 0}}}function xve(t){let{isDisabled:e,onBlurWithin:r,onFocusWithin:n,onFocusWithinChange:s}=t,i=j.useRef({isFocusWithin:!1}),{addGlobalListener:a,removeAllGlobalListeners:o}=Dz(),l=j.useCallback(p=>{p.currentTarget.contains(p.target)&&i.current.isFocusWithin&&!p.currentTarget.contains(p.relatedTarget)&&(i.current.isFocusWithin=!1,o(),r&&r(p),s&&s(!1))},[r,s,i,o]),c=Mz(l),d=j.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const g=Hf(p.target),m=yk(g);if(!i.current.isFocusWithin&&m===jz(p.nativeEvent)){n&&n(p),s&&s(!0),i.current.isFocusWithin=!0,c(p);let y=p.currentTarget;a(g,"focus",w=>{if(i.current.isFocusWithin&&!Lz(y,w.target)){let _=new g.defaultView.FocusEvent("blur",{relatedTarget:w.target});lve(_,y);let S=Oz(_);l(S)}},{capture:!0})}},[n,s,c,a,l]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:d,onBlur:l}}}let bk=!1,Vv=0;function yve(){bk=!0,setTimeout(()=>{bk=!1},50)}function EP(t){t.pointerType==="touch"&&yve()}function vve(){if(!(typeof document>"u"))return Vv===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",EP),Vv++,()=>{Vv--,!(Vv>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",EP)}}function wve(t){let{onHoverStart:e,onHoverChange:r,onHoverEnd:n,isDisabled:s}=t,[i,a]=j.useState(!1),o=j.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;j.useEffect(vve,[]);let{addGlobalListener:l,removeAllGlobalListeners:c}=Dz(),{hoverProps:d,triggerHoverEnd:p}=j.useMemo(()=>{let g=(w,_)=>{if(o.pointerType=_,s||_==="touch"||o.isHovered||!w.currentTarget.contains(w.target))return;o.isHovered=!0;let S=w.currentTarget;o.target=S,l(Hf(w.target),"pointerover",T=>{o.isHovered&&o.target&&!Lz(o.target,T.target)&&m(T,T.pointerType)},{capture:!0}),e&&e({type:"hoverstart",target:S,pointerType:_}),r&&r(!0),a(!0)},m=(w,_)=>{let S=o.target;o.pointerType="",o.target=null,!(_==="touch"||!o.isHovered||!S)&&(o.isHovered=!1,c(),n&&n({type:"hoverend",target:S,pointerType:_}),r&&r(!1),a(!1))},y={};return typeof PointerEvent<"u"&&(y.onPointerEnter=w=>{bk&&w.pointerType==="mouse"||g(w,w.pointerType)},y.onPointerLeave=w=>{!s&&w.currentTarget.contains(w.target)&&m(w,w.pointerType)}),{hoverProps:y,triggerHoverEnd:m}},[e,r,n,s,o,l,c]);return j.useEffect(()=>{s&&p({currentTarget:o.target},o.pointerType)},[s]),{hoverProps:d,isHovered:i}}function _ve(t={}){let{autoFocus:e=!1,isTextInput:r,within:n}=t,s=j.useRef({isFocused:!1,isFocusVisible:e||$z()}),[i,a]=j.useState(!1),[o,l]=j.useState(()=>s.current.isFocused&&s.current.isFocusVisible),c=j.useCallback(()=>l(s.current.isFocused&&s.current.isFocusVisible),[]),d=j.useCallback(m=>{s.current.isFocused=m,a(m),c()},[c]);mve(m=>{s.current.isFocusVisible=m,c()},[],{isTextInput:r});let{focusProps:p}=gve({isDisabled:n,onFocusChange:d}),{focusWithinProps:g}=xve({isDisabled:!n,onFocusWithinChange:d});return{isFocused:i,isFocusVisible:o,focusProps:n?g:p}}var bve=Object.defineProperty,kve=(t,e,r)=>e in t?bve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_b=(t,e,r)=>(kve(t,typeof e!="symbol"?e+"":e,r),r);let Sve=class{constructor(){_b(this,"current",this.detect()),_b(this,"handoffState","pending"),_b(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},td=new Sve;function Y1(t){var e,r;return td.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(r=(e=t.current)==null?void 0:e.ownerDocument)!=null?r:document:null:document}function qz(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Mc(){let t=[],e={addEventListener(r,n,s,i){return r.addEventListener(n,s,i),e.add(()=>r.removeEventListener(n,s,i))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return e.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return e.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return qz(()=>{n.current&&r[0]()}),e.add(()=>{n.current=!1})},style(r,n,s){let i=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:s}),this.add(()=>{Object.assign(r.style,{[n]:i})})},group(r){let n=Mc();return r(n),this.add(()=>n.dispose())},add(r){return t.includes(r)||t.push(r),()=>{let n=t.indexOf(r);if(n>=0)for(let s of t.splice(n,1))s()}},dispose(){for(let r of t.splice(0))r()}};return e}function Q_(){let[t]=j.useState(Mc);return j.useEffect(()=>()=>t.dispose(),[t]),t}let ua=(t,e)=>{td.isServer?j.useEffect(t,e):j.useLayoutEffect(t,e)};function py(t){let e=j.useRef(t);return ua(()=>{e.current=t},[t]),e}let ns=function(t){let e=py(t);return Is.useCallback((...r)=>e.current(...r),[e])};function Eve(t){let e=t.width/2,r=t.height/2;return{top:t.clientY-r,right:t.clientX+e,bottom:t.clientY+r,left:t.clientX-e}}function Cve(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function Ave({disabled:t=!1}={}){let e=j.useRef(null),[r,n]=j.useState(!1),s=Q_(),i=ns(()=>{e.current=null,n(!1),s.dispose()}),a=ns(o=>{if(s.dispose(),e.current===null){e.current=o.currentTarget,n(!0);{let l=Y1(o.currentTarget);s.addEventListener(l,"pointerup",i,!1),s.addEventListener(l,"pointermove",c=>{if(e.current){let d=Eve(c);n(Cve(d,e.current.getBoundingClientRect()))}},!1),s.addEventListener(l,"pointercancel",i,!1)}}});return{pressed:r,pressProps:t?{}:{onPointerDown:a,onPointerUp:i,onClick:i}}}let Nve=j.createContext(void 0);function Hz(){return j.useContext(Nve)}function CP(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function X1(t,e,...r){if(t in e){let s=e[t];return typeof s=="function"?s(...r):s}let n=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,X1),n}var kk=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(kk||{}),Tve=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Tve||{});function Bc(){let t=Pve();return j.useCallback(e=>Ive({mergeRefs:t,...e}),[t])}function Ive({ourProps:t,theirProps:e,slot:r,defaultTag:n,features:s,visible:i=!0,name:a,mergeRefs:o}){o=o??Rve;let l=Wz(e,t);if(i)return Uv(l,r,n,a,o);let c=s??0;if(c&2){let{static:d=!1,...p}=l;if(d)return Uv(p,r,n,a,o)}if(c&1){let{unmount:d=!0,...p}=l;return X1(d?0:1,{0(){return null},1(){return Uv({...p,hidden:!0,style:{display:"none"}},r,n,a,o)}})}return Uv(l,r,n,a,o)}function Uv(t,e={},r,n,s){let{as:i=r,children:a,refName:o="ref",...l}=bb(t,["unmount","static"]),c=t.ref!==void 0?{[o]:t.ref}:{},d=typeof a=="function"?a(e):a;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let p={};if(e){let g=!1,m=[];for(let[y,w]of Object.entries(e))typeof w=="boolean"&&(g=!0),w===!0&&m.push(y.replace(/([A-Z])/g,_=>`-${_.toLowerCase()}`));if(g){p["data-headlessui-state"]=m.join(" ");for(let y of m)p[`data-${y}`]=""}}if(i===j.Fragment&&(Object.keys(xm(l)).length>0||Object.keys(xm(p)).length>0))if(!j.isValidElement(d)||Array.isArray(d)&&d.length>1){if(Object.keys(xm(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(xm(l)).concat(Object.keys(xm(p))).map(g=>`  - ${g}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(g=>`  - ${g}`).join(`
`)].join(`
`))}else{let g=d.props,m=g?.className,y=typeof m=="function"?(...S)=>CP(m(...S),l.className):CP(m,l.className),w=y?{className:y}:{},_=Wz(d.props,xm(bb(l,["ref"])));for(let S in p)S in _&&delete p[S];return j.cloneElement(d,Object.assign({},_,p,c,{ref:s(Lve(d),c.ref)},w))}return j.createElement(i,Object.assign({},bb(l,["ref"]),i!==j.Fragment&&c,i!==j.Fragment&&p),d)}function Pve(){let t=j.useRef([]),e=j.useCallback(r=>{for(let n of t.current)n!=null&&(typeof n=="function"?n(r):n.current=r)},[]);return(...r)=>{if(!r.every(n=>n==null))return t.current=r,e}}function Rve(...t){return t.every(e=>e==null)?void 0:e=>{for(let r of t)r!=null&&(typeof r=="function"?r(e):r.current=e)}}function Wz(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let s in n)s.startsWith("on")&&typeof n[s]=="function"?(r[s]!=null||(r[s]=[]),r[s].push(n[s])):e[s]=n[s];if(e.disabled||e["aria-disabled"])for(let n in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(r[n]=[s=>{var i;return(i=s?.preventDefault)==null?void 0:i.call(s)}]);for(let n in r)Object.assign(e,{[n](s,...i){let a=r[n];for(let o of a){if((s instanceof Event||s?.nativeEvent instanceof Event)&&s.defaultPrevented)return;o(s,...i)}}});return e}function Gz(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let s in n)s.startsWith("on")&&typeof n[s]=="function"?(r[s]!=null||(r[s]=[]),r[s].push(n[s])):e[s]=n[s];for(let n in r)Object.assign(e,{[n](...s){let i=r[n];for(let a of i)a?.(...s)}});return e}function Vc(t){var e;return Object.assign(j.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function xm(t){let e=Object.assign({},t);for(let r in e)e[r]===void 0&&delete e[r];return e}function bb(t,e=[]){let r=Object.assign({},t);for(let n of e)n in r&&delete r[n];return r}function Lve(t){return Is.version.split(".")[0]>="19"?t.props.ref:t.ref}let jve=j.createContext(void 0);function Fve(){return j.useContext(jve)}function z7(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function J_(t){return z7(t)&&"tagName"in t}function hh(t){return J_(t)&&"accessKey"in t}function L0(t){return J_(t)&&"tabIndex"in t}function Dve(t){return J_(t)&&"style"in t}function Ove(t){return hh(t)&&t.nodeName==="IFRAME"}function Kz(t){return hh(t)&&t.nodeName==="INPUT"}function AP(t){return hh(t)&&t.nodeName==="LABEL"}function Mve(t){return hh(t)&&t.nodeName==="FIELDSET"}function Yz(t){return hh(t)&&t.nodeName==="LEGEND"}function Bve(t){return J_(t)?t.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}function Vve(t){let e=t.parentElement,r=null;for(;e&&!Mve(e);)Yz(e)&&(r=e),e=e.parentElement;let n=e?.getAttribute("disabled")==="";return n&&Uve(r)?!1:n}function Uve(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(Yz(e))return!1;e=e.previousElementSibling}return!0}let Xz=Symbol();function zve(t,e=!0){return Object.assign(t,{[Xz]:e})}function fh(...t){let e=j.useRef(t);j.useEffect(()=>{e.current=t},[t]);let r=ns(n=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(n):s.current=n)});return t.every(n=>n==null||n?.[Xz])?void 0:r}let $7=j.createContext(null);$7.displayName="DescriptionContext";function Qz(){let t=j.useContext($7);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Qz),e}return t}function $ve(){let[t,e]=j.useState([]);return[t.length>0?t.join(" "):void 0,j.useMemo(()=>function(r){let n=ns(i=>(e(a=>[...a,i]),()=>e(a=>{let o=a.slice(),l=o.indexOf(i);return l!==-1&&o.splice(l,1),o}))),s=j.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props,value:r.value}),[n,r.slot,r.name,r.props,r.value]);return Is.createElement($7.Provider,{value:s},r.children)},[e])]}let qve="p";function Hve(t,e){let r=j.useId(),n=Hz(),{id:s=`headlessui-description-${r}`,...i}=t,a=Qz(),o=fh(e);ua(()=>a.register(s),[s,a.register]);let l=n||!1,c=j.useMemo(()=>({...a.slot,disabled:l}),[a.slot,l]),d={ref:o,...a.props,id:s};return Bc()({ourProps:d,theirProps:i,slot:c,defaultTag:qve,name:a.name||"Description"})}let Wve=Vc(Hve);Object.assign(Wve,{});var io=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(io||{});let Z_=j.createContext(null);Z_.displayName="LabelContext";function q7(){let t=j.useContext(Z_);if(t===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,q7),e}return t}function Gve(t){var e,r,n;let s=(r=(e=j.useContext(Z_))==null?void 0:e.value)!=null?r:void 0;return((n=void 0)!=null?n:0)>0?[s,...t].filter(Boolean).join(" "):s}function Jz({inherit:t=!1}={}){let e=Gve(),[r,n]=j.useState([]),s=t?[e,...r].filter(Boolean):r;return[s.length>0?s.join(" "):void 0,j.useMemo(()=>function(i){let a=ns(l=>(n(c=>[...c,l]),()=>n(c=>{let d=c.slice(),p=d.indexOf(l);return p!==-1&&d.splice(p,1),d}))),o=j.useMemo(()=>({register:a,slot:i.slot,name:i.name,props:i.props,value:i.value}),[a,i.slot,i.name,i.props,i.value]);return Is.createElement(Z_.Provider,{value:o},i.children)},[n])]}let Kve="label";function Yve(t,e){var r;let n=j.useId(),s=q7(),i=Fve(),a=Hz(),{id:o=`headlessui-label-${n}`,htmlFor:l=i??((r=s.props)==null?void 0:r.htmlFor),passive:c=!1,...d}=t,p=fh(e);ua(()=>s.register(o),[o,s.register]);let g=ns(_=>{let S=_.currentTarget;if(!(_.target!==_.currentTarget&&Bve(_.target))&&(AP(S)&&_.preventDefault(),s.props&&"onClick"in s.props&&typeof s.props.onClick=="function"&&s.props.onClick(_),AP(S))){let T=document.getElementById(S.htmlFor);if(T){let I=T.getAttribute("disabled");if(I==="true"||I==="")return;let M=T.getAttribute("aria-disabled");if(M==="true"||M==="")return;(Kz(T)&&(T.type==="file"||T.type==="radio"||T.type==="checkbox")||T.role==="radio"||T.role==="checkbox"||T.role==="switch")&&T.click(),T.focus({preventScroll:!0})}}}),m=a||!1,y=j.useMemo(()=>({...s.slot,disabled:m}),[s.slot,m]),w={ref:p,...s.props,id:o,htmlFor:l,onClick:g};return c&&("onClick"in w&&(delete w.htmlFor,delete w.onClick),"onClick"in d&&delete d.onClick),Bc()({ourProps:w,theirProps:d,slot:y,defaultTag:l?Kve:"div",name:s.name||"Label"})}let Xve=Vc(Yve);Object.assign(Xve,{});function Qve(t){if(t===null)return{width:0,height:0};let{width:e,height:r}=t.getBoundingClientRect();return{width:e,height:r}}function Jve(t,e=!1){let[r,n]=j.useReducer(()=>({}),{}),s=j.useMemo(()=>Qve(t),[t,r]);return ua(()=>{if(!t)return;let i=new ResizeObserver(n);return i.observe(t),()=>{i.disconnect()}},[t]),e?{width:`${s.width}px`,height:`${s.height}px`}:s}let Zz=class extends Map{constructor(e){super(),this.factory=e}get(e){let r=super.get(e);return r===void 0&&(r=this.factory(e),this.set(e,r)),r}};var Zve=Object.defineProperty,ewe=(t,e,r)=>e in t?Zve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,twe=(t,e,r)=>(ewe(t,e+"",r),r),e$=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},wc=(t,e,r)=>(e$(t,e,"read from private field"),r?r.call(t):e.get(t)),kb=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},NP=(t,e,r,n)=>(e$(t,e,"write to private field"),e.set(t,r),r),Uu,r2,n2;let t$=class{constructor(e){kb(this,Uu,{}),kb(this,r2,new Zz(()=>new Set)),kb(this,n2,new Set),twe(this,"disposables",Mc()),NP(this,Uu,e),td.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return wc(this,Uu)}subscribe(e,r){if(td.isServer)return()=>{};let n={selector:e,callback:r,current:e(wc(this,Uu))};return wc(this,n2).add(n),this.disposables.add(()=>{wc(this,n2).delete(n)})}on(e,r){return td.isServer?()=>{}:(wc(this,r2).get(e).add(r),this.disposables.add(()=>{wc(this,r2).get(e).delete(r)}))}send(e){let r=this.reduce(wc(this,Uu),e);if(r!==wc(this,Uu)){NP(this,Uu,r);for(let n of wc(this,n2)){let s=n.selector(wc(this,Uu));r$(n.current,s)||(n.current=s,n.callback(s))}for(let n of wc(this,r2).get(e.type))n(wc(this,Uu),e)}}};Uu=new WeakMap,r2=new WeakMap,n2=new WeakMap;function r$(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null?!1:Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:Sb(t[Symbol.iterator](),e[Symbol.iterator]()):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?t.size!==e.size?!1:Sb(t.entries(),e.entries()):TP(t)&&TP(e)?Sb(Object.entries(t)[Symbol.iterator](),Object.entries(e)[Symbol.iterator]()):!1}function Sb(t,e){do{let r=t.next(),n=e.next();if(r.done&&n.done)return!0;if(r.done||n.done||!Object.is(r.value,n.value))return!1}while(!0)}function TP(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||Object.getPrototypeOf(e)===null}function IP(t){let[e,r]=t(),n=Mc();return(...s)=>{e(...s),n.dispose(),n.microTask(r)}}var rwe=Object.defineProperty,nwe=(t,e,r)=>e in t?rwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,PP=(t,e,r)=>(nwe(t,typeof e!="symbol"?e+"":e,r),r),n$=(t=>(t[t.Push=0]="Push",t[t.Pop=1]="Pop",t))(n$||{});let swe={0(t,e){let r=e.id,n=t.stack,s=t.stack.indexOf(r);if(s!==-1){let i=t.stack.slice();return i.splice(s,1),i.push(r),n=i,{...t,stack:n}}return{...t,stack:[...t.stack,r]}},1(t,e){let r=e.id,n=t.stack.indexOf(r);if(n===-1)return t;let s=t.stack.slice();return s.splice(n,1),{...t,stack:s}}},iwe=class s$ extends t${constructor(){super(...arguments),PP(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),PP(this,"selectors",{isTop:(e,r)=>e.stack[e.stack.length-1]===r,inStack:(e,r)=>e.stack.includes(r)})}static new(){return new s$({stack:[]})}reduce(e,r){return X1(r.type,swe,e,r)}};const H7=new Zz(()=>iwe.new());var Eb={exports:{}},Cb={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RP;function awe(){if(RP)return Cb;RP=1;var t=s_();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var r=typeof Object.is=="function"?Object.is:e,n=t.useSyncExternalStore,s=t.useRef,i=t.useEffect,a=t.useMemo,o=t.useDebugValue;return Cb.useSyncExternalStoreWithSelector=function(l,c,d,p,g){var m=s(null);if(m.current===null){var y={hasValue:!1,value:null};m.current=y}else y=m.current;m=a(function(){function _(K){if(!S){if(S=!0,T=K,K=p(K),g!==void 0&&y.hasValue){var W=y.value;if(g(W,K))return I=W}return I=K}if(W=I,r(T,K))return W;var L=p(K);return g!==void 0&&g(W,L)?(T=K,W):(T=K,I=L)}var S=!1,T,I,M=d===void 0?null:d;return[function(){return _(c())},M===null?void 0:function(){return _(M())}]},[c,d,p,g]);var w=n(l,m[0],m[1]);return i(function(){y.hasValue=!0,y.value=w},[w]),o(w),w},Cb}var LP;function owe(){return LP||(LP=1,Eb.exports=awe()),Eb.exports}var lwe=owe();function Xu(t,e,r=r$){return lwe.useSyncExternalStoreWithSelector(ns(n=>t.subscribe(cwe,n)),ns(()=>t.state),ns(()=>t.state),ns(e),r)}function cwe(t){return t}function i$(t,e){let r=j.useId(),n=H7.get(e),[s,i]=Xu(n,j.useCallback(a=>[n.selectors.isTop(a,r),n.selectors.inStack(a,r)],[n,r]));return ua(()=>{if(t)return n.actions.push(r),()=>n.actions.pop(r)},[n,t,r]),t?i?s:!0:!1}let Sk=new Map,D2=new Map;function jP(t){var e;let r=(e=D2.get(t))!=null?e:0;return D2.set(t,r+1),r!==0?()=>FP(t):(Sk.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>FP(t))}function FP(t){var e;let r=(e=D2.get(t))!=null?e:1;if(r===1?D2.delete(t):D2.set(t,r-1),r!==1)return;let n=Sk.get(t);n&&(n["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",n["aria-hidden"]),t.inert=n.inert,Sk.delete(t))}function uwe(t,{allowed:e,disallowed:r}={}){let n=i$(t,"inert-others");ua(()=>{var s,i;if(!n)return;let a=Mc();for(let l of(s=r?.())!=null?s:[])l&&a.add(jP(l));let o=(i=e?.())!=null?i:[];for(let l of o){if(!l)continue;let c=Y1(l);if(!c)continue;let d=l.parentElement;for(;d&&d!==c.body;){for(let p of d.children)o.some(g=>p.contains(g))||a.add(jP(p));d=d.parentElement}}return a.dispose},[n,e,r])}function dwe(t,e,r){let n=py(s=>{let i=s.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&r()});j.useEffect(()=>{if(!t)return;let s=e===null?null:hh(e)?e:e.current;if(!s)return;let i=Mc();if(typeof ResizeObserver<"u"){let a=new ResizeObserver(()=>n.current(s));a.observe(s),i.add(()=>a.disconnect())}if(typeof IntersectionObserver<"u"){let a=new IntersectionObserver(()=>n.current(s));a.observe(s),i.add(()=>a.disconnect())}return()=>i.dispose()},[e,n,t])}let Ek=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),hwe=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Ck=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(Ck||{}),fwe=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(fwe||{}),pwe=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(pwe||{});function a$(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Ek)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}function mwe(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(hwe)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var W7=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(W7||{});function G7(t,e=0){var r;return t===((r=Y1(t))==null?void 0:r.body)?!1:X1(e,{0(){return t.matches(Ek)},1(){let n=t;for(;n!==null;){if(n.matches(Ek))return!0;n=n.parentElement}return!1}})}function o$(t){let e=Y1(t);Mc().nextFrame(()=>{e&&L0(e.activeElement)&&!G7(e.activeElement,0)&&xwe(t)})}var gwe=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(gwe||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function xwe(t){t?.focus({preventScroll:!0})}let ywe=["textarea","input"].join(",");function vwe(t){var e,r;return(r=(e=t?.matches)==null?void 0:e.call(t,ywe))!=null?r:!1}function l$(t,e=r=>r){return t.slice().sort((r,n)=>{let s=e(r),i=e(n);if(s===null||i===null)return 0;let a=s.compareDocumentPosition(i);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function wwe(t,e){return _we(a$(),e,{relativeTo:t})}function _we(t,e,{sorted:r=!0,relativeTo:n=null,skipElements:s=[]}={}){let i=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,a=Array.isArray(t)?r?l$(t):t:e&64?mwe(t):a$(t);s.length>0&&a.length>1&&(a=a.filter(m=>!s.some(y=>y!=null&&"current"in y?y?.current===m:y===m))),n=n??i.activeElement;let o=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,a.indexOf(n))-1;if(e&4)return Math.max(0,a.indexOf(n))+1;if(e&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=e&32?{preventScroll:!0}:{},d=0,p=a.length,g;do{if(d>=p||d+p<=0)return 0;let m=l+d;if(e&16)m=(m+p)%p;else{if(m<0)return 3;if(m>=p)return 1}g=a[m],g?.focus(c),d+=o}while(g!==i.activeElement);return e&6&&vwe(g)&&g.select(),2}function c$(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function bwe(){return/Android/gi.test(window.navigator.userAgent)}function DP(){return c$()||bwe()}function jm(t,e,r,n){let s=py(r);j.useEffect(()=>{if(!t)return;function i(a){s.current(a)}return document.addEventListener(e,i,n),()=>document.removeEventListener(e,i,n)},[t,e,n])}function kwe(t,e,r,n){let s=py(r);j.useEffect(()=>{if(!t)return;function i(a){s.current(a)}return window.addEventListener(e,i,n),()=>window.removeEventListener(e,i,n)},[t,e,n])}const OP=30;function Swe(t,e,r){let n=py(r),s=j.useCallback(function(o,l){if(o.defaultPrevented)return;let c=l(o);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let d=(function p(g){return typeof g=="function"?p(g()):Array.isArray(g)||g instanceof Set?g:[g]})(e);for(let p of d)if(p!==null&&(p.contains(c)||o.composed&&o.composedPath().includes(p)))return;return!G7(c,W7.Loose)&&c.tabIndex!==-1&&o.preventDefault(),n.current(o,c)},[n,e]),i=j.useRef(null);jm(t,"pointerdown",o=>{var l,c;DP()||(i.current=((c=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:c[0])||o.target)},!0),jm(t,"pointerup",o=>{if(DP()||!i.current)return;let l=i.current;return i.current=null,s(o,()=>l)},!0);let a=j.useRef({x:0,y:0});jm(t,"touchstart",o=>{a.current.x=o.touches[0].clientX,a.current.y=o.touches[0].clientY},!0),jm(t,"touchend",o=>{let l={x:o.changedTouches[0].clientX,y:o.changedTouches[0].clientY};if(!(Math.abs(l.x-a.current.x)>=OP||Math.abs(l.y-a.current.y)>=OP))return s(o,()=>L0(o.target)?o.target:null)},!0),kwe(t,"blur",o=>s(o,()=>Ove(window.document.activeElement)?window.document.activeElement:null),!0)}function Ak(...t){return j.useMemo(()=>Y1(...t),[...t])}var Ewe=(t=>(t[t.Ignore=0]="Ignore",t[t.Select=1]="Select",t[t.Close=2]="Close",t))(Ewe||{});const zv={Ignore:{kind:0},Select:t=>({kind:1,target:t}),Close:{kind:2}},Cwe=200,MP=5;function Awe(t,{trigger:e,action:r,close:n,select:s}){let i=j.useRef(null),a=j.useRef(null),o=j.useRef(null);jm(t&&e!==null,"pointerdown",l=>{z7(l?.target)&&e!=null&&e.contains(l.target)&&(a.current=l.x,o.current=l.y,i.current=l.timeStamp)}),jm(t&&e!==null,"pointerup",l=>{var c,d;let p=i.current;if(p===null||(i.current=null,!L0(l.target))||Math.abs(l.x-((c=a.current)!=null?c:l.x))<MP&&Math.abs(l.y-((d=o.current)!=null?d:l.y))<MP)return;let g=r(l);switch(g.kind){case 0:return;case 1:{l.timeStamp-p>Cwe&&(s(g.target),n());break}case 2:{n();break}}},{capture:!0})}function Nwe(t,e){return j.useMemo(()=>{var r;if(t.type)return t.type;let n=(r=t.as)!=null?r:"button";if(typeof n=="string"&&n.toLowerCase()==="button"||e?.tagName==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}function Twe(t){return j.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}function Iwe(t,e){let r=t(),n=new Set;return{getSnapshot(){return r},subscribe(s){return n.add(s),()=>n.delete(s)},dispatch(s,...i){let a=e[s].call(r,...i);a&&(r=a,n.forEach(o=>o()))}}}function Pwe(){let t;return{before({doc:e}){var r;let n=e.documentElement,s=(r=e.defaultView)!=null?r:window;t=Math.max(0,s.innerWidth-n.clientWidth)},after({doc:e,d:r}){let n=e.documentElement,s=Math.max(0,n.clientWidth-n.offsetWidth),i=Math.max(0,t-s);r.style(n,"paddingRight",`${i}px`)}}}function Rwe(){return c$()?{before({doc:t,d:e,meta:r}){function n(s){return r.containers.flatMap(i=>i()).some(i=>i.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let o=Mc();o.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>o.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,a=null;e.addEventListener(t,"click",o=>{if(L0(o.target))try{let l=o.target.closest("a");if(!l)return;let{hash:c}=new URL(l.href),d=t.querySelector(c);L0(d)&&!n(d)&&(a=d)}catch{}},!0),e.addEventListener(t,"touchstart",o=>{if(L0(o.target)&&Dve(o.target))if(n(o.target)){let l=o.target;for(;l.parentElement&&n(l.parentElement);)l=l.parentElement;e.style(l,"overscrollBehavior","contain")}else e.style(o.target,"touchAction","none")}),e.addEventListener(t,"touchmove",o=>{if(L0(o.target)){if(Kz(o.target))return;if(n(o.target)){let l=o.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&o.preventDefault()}else o.preventDefault()}},{passive:!1}),e.add(()=>{var o;let l=(o=window.scrollY)!=null?o:window.pageYOffset;i!==l&&window.scrollTo(0,i),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function Lwe(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function jwe(t){let e={};for(let r of t)Object.assign(e,r(e));return e}let j0=Iwe(()=>new Map,{PUSH(t,e){var r;let n=(r=this.get(t))!=null?r:{doc:t,count:0,d:Mc(),meta:new Set};return n.count++,n.meta.add(e),this.set(t,n),this},POP(t,e){let r=this.get(t);return r&&(r.count--,r.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:r}){let n={doc:t,d:e,meta:jwe(r)},s=[Rwe(),Pwe(),Lwe()];s.forEach(({before:i})=>i?.(n)),s.forEach(({after:i})=>i?.(n))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});j0.subscribe(()=>{let t=j0.getSnapshot(),e=new Map;for(let[r]of t)e.set(r,r.documentElement.style.overflow);for(let r of t.values()){let n=e.get(r.doc)==="hidden",s=r.count!==0;(s&&!n||!s&&n)&&j0.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&j0.dispatch("TEARDOWN",r)}});function Fwe(t,e,r=()=>({containers:[]})){let n=Twe(j0),s=e?n.get(e):void 0,i=s?s.count>0:!1;return ua(()=>{if(!(!e||!t))return j0.dispatch("PUSH",e,r),()=>j0.dispatch("POP",e,r)},[t,e]),i}function Dwe(t,e,r=()=>[document.body]){let n=i$(t,"scroll-lock");Fwe(n,e,s=>{var i;return{containers:[...(i=s.containers)!=null?i:[],r]}})}function BP(t){return[t.screenX,t.screenY]}function Owe(){let t=j.useRef([-1,-1]);return{wasMoved(e){let r=BP(e);return t.current[0]===r[0]&&t.current[1]===r[1]?!1:(t.current=r,!0)},update(e){t.current=BP(e)}}}function Mwe(t=0){let[e,r]=j.useState(t),n=j.useCallback(l=>r(l),[e]),s=j.useCallback(l=>r(c=>c|l),[e]),i=j.useCallback(l=>(e&l)===l,[e]),a=j.useCallback(l=>r(c=>c&~l),[r]),o=j.useCallback(l=>r(c=>c^l),[r]);return{flags:e,setFlag:n,addFlag:s,hasFlag:i,removeFlag:a,toggleFlag:o}}var Bwe={},VP,UP;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((VP=process==null?void 0:Bwe)==null?void 0:VP.NODE_ENV)==="test"&&typeof((UP=Element?.prototype)==null?void 0:UP.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Vwe=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(Vwe||{});function Uwe(t){let e={};for(let r in t)t[r]===!0&&(e[`data-${r}`]="");return e}function zwe(t,e,r,n){let[s,i]=j.useState(r),{hasFlag:a,addFlag:o,removeFlag:l}=Mwe(t&&s?3:0),c=j.useRef(!1),d=j.useRef(!1),p=Q_();return ua(()=>{var g;if(t){if(r&&i(!0),!e){r&&o(3);return}return(g=void 0)==null||g.call(n,r),$we(e,{inFlight:c,prepare(){d.current?d.current=!1:d.current=c.current,c.current=!0,!d.current&&(r?(o(3),l(4)):(o(4),l(2)))},run(){d.current?r?(l(3),o(4)):(l(4),o(3)):r?l(1):o(1)},done(){var m;d.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(c.current=!1,l(7),r||i(!1),(m=void 0)==null||m.call(n,r))}})}},[t,r,e,p]),t?[s,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function $we(t,{prepare:e,run:r,done:n,inFlight:s}){let i=Mc();return Hwe(t,{prepare:e,inFlight:s}),i.nextFrame(()=>{r(),i.requestAnimationFrame(()=>{i.add(qwe(t,n))})}),i.dispose}function qwe(t,e){var r,n;let s=Mc();if(!t)return s.dispose;let i=!1;s.add(()=>{i=!0});let a=(n=(r=t.getAnimations)==null?void 0:r.call(t).filter(o=>o instanceof CSSTransition))!=null?n:[];return a.length===0?(e(),s.dispose):(Promise.allSettled(a.map(o=>o.finished)).then(()=>{i||e()}),s.dispose)}function Hwe(t,{inFlight:e,prepare:r}){if(e!=null&&e.current){r();return}let n=t.style.transition;t.style.transition="none",r(),t.offsetHeight,t.style.transition=n}function Wwe(t,{container:e,accept:r,walk:n}){let s=j.useRef(r),i=j.useRef(n);j.useEffect(()=>{s.current=r,i.current=n},[r,n]),ua(()=>{if(!e||!t)return;let a=Y1(e);if(!a)return;let o=s.current,l=i.current,c=Object.assign(p=>o(p),{acceptNode:o}),d=a.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,c,!1);for(;d.nextNode();)l(d.currentNode)},[e,t,s,i])}function e4(){return typeof window<"u"}function Q1(t){return u$(t)?(t.nodeName||"").toLowerCase():"#document"}function tc(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function pd(t){var e;return(e=(u$(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function u$(t){return e4()?t instanceof Node||t instanceof tc(t).Node:!1}function il(t){return e4()?t instanceof Element||t instanceof tc(t).Element:!1}function od(t){return e4()?t instanceof HTMLElement||t instanceof tc(t).HTMLElement:!1}function zP(t){return!e4()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof tc(t).ShadowRoot}const Gwe=new Set(["inline","contents"]);function my(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=gu(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!Gwe.has(s)}const Kwe=new Set(["table","td","th"]);function Ywe(t){return Kwe.has(Q1(t))}const Xwe=[":popover-open",":modal"];function t4(t){return Xwe.some(e=>{try{return t.matches(e)}catch{return!1}})}const Qwe=["transform","translate","scale","rotate","perspective"],Jwe=["transform","translate","scale","rotate","perspective","filter"],Zwe=["paint","layout","strict","content"];function K7(t){const e=Y7(),r=il(t)?gu(t):t;return Qwe.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||Jwe.some(n=>(r.willChange||"").includes(n))||Zwe.some(n=>(r.contain||"").includes(n))}function e5e(t){let e=Tf(t);for(;od(e)&&!A1(e);){if(K7(e))return e;if(t4(e))return null;e=Tf(e)}return null}function Y7(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const t5e=new Set(["html","body","#document"]);function A1(t){return t5e.has(Q1(t))}function gu(t){return tc(t).getComputedStyle(t)}function r4(t){return il(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Tf(t){if(Q1(t)==="html")return t;const e=t.assignedSlot||t.parentNode||zP(t)&&t.host||pd(t);return zP(e)?e.host:e}function d$(t){const e=Tf(t);return A1(e)?t.ownerDocument?t.ownerDocument.body:t.body:od(e)&&my(e)?e:d$(e)}function Sx(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=d$(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),a=tc(s);if(i){const o=Nk(a);return e.concat(a,a.visualViewport||[],my(s)?s:[],o&&r?Sx(o):[])}return e.concat(s,Sx(s,[],r))}function Nk(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function r5e(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:r,version:n}=e;return r+"/"+n}).join(" "):navigator.userAgent}const vp=Math.min,Vo=Math.max,Ex=Math.round,$v=Math.floor,rd=t=>({x:t,y:t}),n5e={left:"right",right:"left",bottom:"top",top:"bottom"},s5e={start:"end",end:"start"};function $P(t,e,r){return Vo(t,vp(e,r))}function J1(t,e){return typeof t=="function"?t(e):t}function If(t){return t.split("-")[0]}function gy(t){return t.split("-")[1]}function h$(t){return t==="x"?"y":"x"}function f$(t){return t==="y"?"height":"width"}const i5e=new Set(["top","bottom"]);function Ud(t){return i5e.has(If(t))?"y":"x"}function p$(t){return h$(Ud(t))}function a5e(t,e,r){r===void 0&&(r=!1);const n=gy(t),s=p$(t),i=f$(s);let a=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=V5(a)),[a,V5(a)]}function o5e(t){const e=V5(t);return[Tk(t),e,Tk(e)]}function Tk(t){return t.replace(/start|end/g,e=>s5e[e])}const qP=["left","right"],HP=["right","left"],l5e=["top","bottom"],c5e=["bottom","top"];function u5e(t,e,r){switch(t){case"top":case"bottom":return r?e?HP:qP:e?qP:HP;case"left":case"right":return e?l5e:c5e;default:return[]}}function d5e(t,e,r,n){const s=gy(t);let i=u5e(If(t),r==="start",n);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(Tk)))),i}function V5(t){return t.replace(/left|right|bottom|top/g,e=>n5e[e])}function h5e(t){return{top:0,right:0,bottom:0,left:0,...t}}function f5e(t){return typeof t!="number"?h5e(t):{top:t,right:t,bottom:t,left:t}}function U5(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function WP(t,e,r){let{reference:n,floating:s}=t;const i=Ud(e),a=p$(e),o=f$(a),l=If(e),c=i==="y",d=n.x+n.width/2-s.width/2,p=n.y+n.height/2-s.height/2,g=n[o]/2-s[o]/2;let m;switch(l){case"top":m={x:d,y:n.y-s.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:p};break;case"left":m={x:n.x-s.width,y:p};break;default:m={x:n.x,y:n.y}}switch(gy(e)){case"start":m[a]-=g*(r&&c?-1:1);break;case"end":m[a]+=g*(r&&c?-1:1);break}return m}const p5e=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:a}=r,o=i.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:p}=WP(c,n,l),g=n,m={},y=0;for(let w=0;w<o.length;w++){const{name:_,fn:S}=o[w],{x:T,y:I,data:M,reset:K}=await S({x:d,y:p,initialPlacement:n,placement:g,strategy:s,middlewareData:m,rects:c,platform:a,elements:{reference:t,floating:e}});d=T??d,p=I??p,m={...m,[_]:{...m[_],...M}},K&&y<=50&&(y++,typeof K=="object"&&(K.placement&&(g=K.placement),K.rects&&(c=K.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):K.rects),{x:d,y:p}=WP(c,g,l)),w=-1)}return{x:d,y:p,placement:g,strategy:s,middlewareData:m}};async function n4(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:a,elements:o,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:g=!1,padding:m=0}=J1(e,t),y=f5e(m),_=o[g?p==="floating"?"reference":"floating":p],S=U5(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(_)))==null||r?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),T=p==="floating"?{x:n,y:s,width:a.floating.width,height:a.floating.height}:a.reference,I=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),M=await(i.isElement==null?void 0:i.isElement(I))?await(i.getScale==null?void 0:i.getScale(I))||{x:1,y:1}:{x:1,y:1},K=U5(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:T,offsetParent:I,strategy:l}):T);return{top:(S.top-K.top+y.top)/M.y,bottom:(K.bottom-S.bottom+y.bottom)/M.y,left:(S.left-K.left+y.left)/M.x,right:(K.right-S.right+y.right)/M.x}}const m5e=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:i,rects:a,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:w=!0,..._}=J1(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const S=If(s),T=Ud(o),I=If(o)===o,M=await(l.isRTL==null?void 0:l.isRTL(c.floating)),K=g||(I||!w?[V5(o)]:o5e(o)),W=y!=="none";!g&&W&&K.push(...d5e(o,w,y,M));const L=[o,...K],A=await n4(e,_),E=[];let D=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&E.push(A[S]),p){const Z=a5e(s,a,M);E.push(A[Z[0]],A[Z[1]])}if(D=[...D,{placement:s,overflows:E}],!E.every(Z=>Z<=0)){var R,F;const Z=(((R=i.flip)==null?void 0:R.index)||0)+1,fe=L[Z];if(fe&&(!(p==="alignment"?T!==Ud(fe):!1)||D.every(ae=>Ud(ae.placement)===T?ae.overflows[0]>0:!0)))return{data:{index:Z,overflows:D},reset:{placement:fe}};let xe=(F=D.filter(he=>he.overflows[0]<=0).sort((he,ae)=>he.overflows[1]-ae.overflows[1])[0])==null?void 0:F.placement;if(!xe)switch(m){case"bestFit":{var V;const he=(V=D.filter(ae=>{if(W){const H=Ud(ae.placement);return H===T||H==="y"}return!0}).map(ae=>[ae.placement,ae.overflows.filter(H=>H>0).reduce((H,te)=>H+te,0)]).sort((ae,H)=>ae[1]-H[1])[0])==null?void 0:V[0];he&&(xe=he);break}case"initialPlacement":xe=o;break}if(s!==xe)return{reset:{placement:xe}}}return{}}}},g5e=new Set(["left","top"]);async function x5e(t,e){const{placement:r,platform:n,elements:s}=t,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),a=If(r),o=gy(r),l=Ud(r)==="y",c=g5e.has(a)?-1:1,d=i&&l?-1:1,p=J1(e,t);let{mainAxis:g,crossAxis:m,alignmentAxis:y}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return o&&typeof y=="number"&&(m=o==="end"?y*-1:y),l?{x:m*d,y:g*c}:{x:g*c,y:m*d}}const y5e=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:i,placement:a,middlewareData:o}=e,l=await x5e(e,t);return a===((r=o.offset)==null?void 0:r.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:a}}}}},v5e=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:o={fn:_=>{let{x:S,y:T}=_;return{x:S,y:T}}},...l}=J1(t,e),c={x:r,y:n},d=await n4(e,l),p=Ud(If(s)),g=h$(p);let m=c[g],y=c[p];if(i){const _=g==="y"?"top":"left",S=g==="y"?"bottom":"right",T=m+d[_],I=m-d[S];m=$P(T,m,I)}if(a){const _=p==="y"?"top":"left",S=p==="y"?"bottom":"right",T=y+d[_],I=y-d[S];y=$P(T,y,I)}const w=o.fn({...e,[g]:m,[p]:y});return{...w,data:{x:w.x-r,y:w.y-n,enabled:{[g]:i,[p]:a}}}}}},w5e=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:i,platform:a,elements:o}=e,{apply:l=()=>{},...c}=J1(t,e),d=await n4(e,c),p=If(s),g=gy(s),m=Ud(s)==="y",{width:y,height:w}=i.floating;let _,S;p==="top"||p==="bottom"?(_=p,S=g===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(S=p,_=g==="end"?"top":"bottom");const T=w-d.top-d.bottom,I=y-d.left-d.right,M=vp(w-d[_],T),K=vp(y-d[S],I),W=!e.middlewareData.shift;let L=M,A=K;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(A=I),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(L=T),W&&!g){const D=Vo(d.left,0),R=Vo(d.right,0),F=Vo(d.top,0),V=Vo(d.bottom,0);m?A=y-2*(D!==0||R!==0?D+R:Vo(d.left,d.right)):L=w-2*(F!==0||V!==0?F+V:Vo(d.top,d.bottom))}await l({...e,availableWidth:A,availableHeight:L});const E=await a.getDimensions(o.floating);return y!==E.width||w!==E.height?{reset:{rects:!0}}:{}}}};function m$(t){const e=gu(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=od(t),i=s?t.offsetWidth:r,a=s?t.offsetHeight:n,o=Ex(r)!==i||Ex(n)!==a;return o&&(r=i,n=a),{width:r,height:n,$:o}}function X7(t){return il(t)?t:t.contextElement}function i1(t){const e=X7(t);if(!od(e))return rd(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:i}=m$(e);let a=(i?Ex(r.width):r.width)/n,o=(i?Ex(r.height):r.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const _5e=rd(0);function g$(t){const e=tc(t);return!Y7()||!e.visualViewport?_5e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function b5e(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==tc(t)?!1:e}function wp(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),i=X7(t);let a=rd(1);e&&(n?il(n)&&(a=i1(n)):a=i1(t));const o=b5e(i,r,n)?g$(i):rd(0);let l=(s.left+o.x)/a.x,c=(s.top+o.y)/a.y,d=s.width/a.x,p=s.height/a.y;if(i){const g=tc(i),m=n&&il(n)?tc(n):n;let y=g,w=Nk(y);for(;w&&n&&m!==y;){const _=i1(w),S=w.getBoundingClientRect(),T=gu(w),I=S.left+(w.clientLeft+parseFloat(T.paddingLeft))*_.x,M=S.top+(w.clientTop+parseFloat(T.paddingTop))*_.y;l*=_.x,c*=_.y,d*=_.x,p*=_.y,l+=I,c+=M,y=tc(w),w=Nk(y)}}return U5({width:d,height:p,x:l,y:c})}function s4(t,e){const r=r4(t).scrollLeft;return e?e.left+r:wp(pd(t)).left+r}function x$(t,e){const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-s4(t,r),s=r.top+e.scrollTop;return{x:n,y:s}}function k5e(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const i=s==="fixed",a=pd(n),o=e?t4(e.floating):!1;if(n===a||o&&i)return r;let l={scrollLeft:0,scrollTop:0},c=rd(1);const d=rd(0),p=od(n);if((p||!p&&!i)&&((Q1(n)!=="body"||my(a))&&(l=r4(n)),od(n))){const m=wp(n);c=i1(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const g=a&&!p&&!i?x$(a,l):rd(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+d.x+g.x,y:r.y*c.y-l.scrollTop*c.y+d.y+g.y}}function S5e(t){return Array.from(t.getClientRects())}function E5e(t){const e=pd(t),r=r4(t),n=t.ownerDocument.body,s=Vo(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=Vo(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+s4(t);const o=-r.scrollTop;return gu(n).direction==="rtl"&&(a+=Vo(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:a,y:o}}const GP=25;function C5e(t,e){const r=tc(t),n=pd(t),s=r.visualViewport;let i=n.clientWidth,a=n.clientHeight,o=0,l=0;if(s){i=s.width,a=s.height;const d=Y7();(!d||d&&e==="fixed")&&(o=s.offsetLeft,l=s.offsetTop)}const c=s4(n);if(c<=0){const d=n.ownerDocument,p=d.body,g=getComputedStyle(p),m=d.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,y=Math.abs(n.clientWidth-p.clientWidth-m);y<=GP&&(i-=y)}else c<=GP&&(i+=c);return{width:i,height:a,x:o,y:l}}const A5e=new Set(["absolute","fixed"]);function N5e(t,e){const r=wp(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,i=od(t)?i1(t):rd(1),a=t.clientWidth*i.x,o=t.clientHeight*i.y,l=s*i.x,c=n*i.y;return{width:a,height:o,x:l,y:c}}function KP(t,e,r){let n;if(e==="viewport")n=C5e(t,r);else if(e==="document")n=E5e(pd(t));else if(il(e))n=N5e(e,r);else{const s=g$(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return U5(n)}function y$(t,e){const r=Tf(t);return r===e||!il(r)||A1(r)?!1:gu(r).position==="fixed"||y$(r,e)}function T5e(t,e){const r=e.get(t);if(r)return r;let n=Sx(t,[],!1).filter(o=>il(o)&&Q1(o)!=="body"),s=null;const i=gu(t).position==="fixed";let a=i?Tf(t):t;for(;il(a)&&!A1(a);){const o=gu(a),l=K7(a);!l&&o.position==="fixed"&&(s=null),(i?!l&&!s:!l&&o.position==="static"&&!!s&&A5e.has(s.position)||my(a)&&!l&&y$(t,a))?n=n.filter(d=>d!==a):s=o,a=Tf(a)}return e.set(t,n),n}function I5e(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const a=[...r==="clippingAncestors"?t4(e)?[]:T5e(e,this._c):[].concat(r),n],o=a[0],l=a.reduce((c,d)=>{const p=KP(e,d,s);return c.top=Vo(p.top,c.top),c.right=vp(p.right,c.right),c.bottom=vp(p.bottom,c.bottom),c.left=Vo(p.left,c.left),c},KP(e,o,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function P5e(t){const{width:e,height:r}=m$(t);return{width:e,height:r}}function R5e(t,e,r){const n=od(e),s=pd(e),i=r==="fixed",a=wp(t,!0,i,e);let o={scrollLeft:0,scrollTop:0};const l=rd(0);function c(){l.x=s4(s)}if(n||!n&&!i)if((Q1(e)!=="body"||my(s))&&(o=r4(e)),n){const m=wp(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&c();i&&!n&&s&&c();const d=s&&!n&&!i?x$(s,o):rd(0),p=a.left+o.scrollLeft-l.x-d.x,g=a.top+o.scrollTop-l.y-d.y;return{x:p,y:g,width:a.width,height:a.height}}function Ab(t){return gu(t).position==="static"}function YP(t,e){if(!od(t)||gu(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return pd(t)===r&&(r=r.ownerDocument.body),r}function v$(t,e){const r=tc(t);if(t4(t))return r;if(!od(t)){let s=Tf(t);for(;s&&!A1(s);){if(il(s)&&!Ab(s))return s;s=Tf(s)}return r}let n=YP(t,e);for(;n&&Ywe(n)&&Ab(n);)n=YP(n,e);return n&&A1(n)&&Ab(n)&&!K7(n)?r:n||e5e(t)||r}const L5e=async function(t){const e=this.getOffsetParent||v$,r=this.getDimensions,n=await r(t.floating);return{reference:R5e(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function j5e(t){return gu(t).direction==="rtl"}const F5e={convertOffsetParentRelativeRectToViewportRelativeRect:k5e,getDocumentElement:pd,getClippingRect:I5e,getOffsetParent:v$,getElementRects:L5e,getClientRects:S5e,getDimensions:P5e,getScale:i1,isElement:il,isRTL:j5e};function w$(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function D5e(t,e){let r=null,n;const s=pd(t);function i(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:p,width:g,height:m}=c;if(o||e(),!g||!m)return;const y=$v(p),w=$v(s.clientWidth-(d+g)),_=$v(s.clientHeight-(p+m)),S=$v(d),I={rootMargin:-y+"px "+-w+"px "+-_+"px "+-S+"px",threshold:Vo(0,vp(1,l))||1};let M=!0;function K(W){const L=W[0].intersectionRatio;if(L!==l){if(!M)return a();L?a(!1,L):n=setTimeout(()=>{a(!1,1e-7)},1e3)}L===1&&!w$(c,t.getBoundingClientRect())&&a(),M=!1}try{r=new IntersectionObserver(K,{...I,root:s.ownerDocument})}catch{r=new IntersectionObserver(K,I)}r.observe(t)}return a(!0),i}function O5e(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=X7(t),d=s||i?[...c?Sx(c):[],...Sx(e)]:[];d.forEach(S=>{s&&S.addEventListener("scroll",r,{passive:!0}),i&&S.addEventListener("resize",r)});const p=c&&o?D5e(c,r):null;let g=-1,m=null;a&&(m=new ResizeObserver(S=>{let[T]=S;T&&T.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var I;(I=m)==null||I.observe(e)})),r()}),c&&!l&&m.observe(c),m.observe(e));let y,w=l?wp(t):null;l&&_();function _(){const S=wp(t);w&&!w$(w,S)&&r(),w=S,y=requestAnimationFrame(_)}return r(),()=>{var S;d.forEach(T=>{s&&T.removeEventListener("scroll",r),i&&T.removeEventListener("resize",r)}),p?.(),(S=m)==null||S.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const Nb=n4,M5e=y5e,B5e=v5e,V5e=m5e,U5e=w5e,z5e=(t,e,r)=>{const n=new Map,s={platform:F5e,...r},i={...s.platform,_c:n};return p5e(t,e,{...s,platform:i})};var $5e=typeof document<"u",q5e=function(){},Aw=$5e?j.useLayoutEffect:q5e;function z5(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!z5(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&t.$$typeof)&&!z5(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function _$(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function XP(t,e){const r=_$(t);return Math.round(e*r)/r}function Tb(t){const e=j.useRef(t);return Aw(()=>{e.current=t}),e}function H5e(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=t,[d,p]=j.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[g,m]=j.useState(n);z5(g,n)||m(n);const[y,w]=j.useState(null),[_,S]=j.useState(null),T=j.useCallback(ae=>{ae!==W.current&&(W.current=ae,w(ae))},[]),I=j.useCallback(ae=>{ae!==L.current&&(L.current=ae,S(ae))},[]),M=i||y,K=a||_,W=j.useRef(null),L=j.useRef(null),A=j.useRef(d),E=l!=null,D=Tb(l),R=Tb(s),F=Tb(c),V=j.useCallback(()=>{if(!W.current||!L.current)return;const ae={placement:e,strategy:r,middleware:g};R.current&&(ae.platform=R.current),z5e(W.current,L.current,ae).then(H=>{const te={...H,isPositioned:F.current!==!1};Z.current&&!z5(A.current,te)&&(A.current=te,Ki.flushSync(()=>{p(te)}))})},[g,e,r,R,F]);Aw(()=>{c===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,p(ae=>({...ae,isPositioned:!1})))},[c]);const Z=j.useRef(!1);Aw(()=>(Z.current=!0,()=>{Z.current=!1}),[]),Aw(()=>{if(M&&(W.current=M),K&&(L.current=K),M&&K){if(D.current)return D.current(M,K,V);V()}},[M,K,V,D,E]);const fe=j.useMemo(()=>({reference:W,floating:L,setReference:T,setFloating:I}),[T,I]),xe=j.useMemo(()=>({reference:M,floating:K}),[M,K]),he=j.useMemo(()=>{const ae={position:r,left:0,top:0};if(!xe.floating)return ae;const H=XP(xe.floating,d.x),te=XP(xe.floating,d.y);return o?{...ae,transform:"translate("+H+"px, "+te+"px)",..._$(xe.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:H,top:te}},[r,o,xe.floating,d.x,d.y]);return j.useMemo(()=>({...d,update:V,refs:fe,elements:xe,floatingStyles:he}),[d,V,fe,xe,he])}const b$=(t,e)=>({...M5e(t),options:[t,e]}),W5e=(t,e)=>({...B5e(t),options:[t,e]}),G5e=(t,e)=>({...V5e(t),options:[t,e]}),K5e=(t,e)=>({...U5e(t),options:[t,e]}),k$={...$w},Y5e=k$.useInsertionEffect,X5e=Y5e||(t=>t());function S$(t){const e=j.useRef(()=>{});return X5e(()=>{e.current=t}),j.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e.current==null?void 0:e.current(...n)},[])}var Ik=typeof document<"u"?j.useLayoutEffect:j.useEffect;let QP=!1,Q5e=0;const JP=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Q5e++;function J5e(){const[t,e]=j.useState(()=>QP?JP():void 0);return Ik(()=>{t==null&&e(JP())},[]),j.useEffect(()=>{QP=!0},[]),t}const Z5e=k$.useId,e_e=Z5e||J5e;function t_e(){const t=new Map;return{emit(e,r){var n;(n=t.get(e))==null||n.forEach(s=>s(r))},on(e,r){t.set(e,[...t.get(e)||[],r])},off(e,r){var n;t.set(e,((n=t.get(e))==null?void 0:n.filter(s=>s!==r))||[])}}}const r_e=j.createContext(null),n_e=j.createContext(null),s_e=()=>{var t;return((t=j.useContext(r_e))==null?void 0:t.id)||null},i_e=()=>j.useContext(n_e),a_e="data-floating-ui-focusable";function o_e(t){const{open:e=!1,onOpenChange:r,elements:n}=t,s=e_e(),i=j.useRef({}),[a]=j.useState(()=>t_e()),o=s_e()!=null,[l,c]=j.useState(n.reference),d=S$((m,y,w)=>{i.current.openEvent=m?y:void 0,a.emit("openchange",{open:m,event:y,reason:w,nested:o}),r?.(m,y,w)}),p=j.useMemo(()=>({setPositionReference:c}),[]),g=j.useMemo(()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference}),[l,n.reference,n.floating]);return j.useMemo(()=>({dataRef:i,open:e,onOpenChange:d,elements:g,events:a,floatingId:s,refs:p}),[e,d,g,a,s,p])}function l_e(t){t===void 0&&(t={});const{nodeId:e}=t,r=o_e({...t,elements:{reference:null,floating:null,...t.elements}}),n=t.rootContext||r,s=n.elements,[i,a]=j.useState(null),[o,l]=j.useState(null),d=s?.domReference||i,p=j.useRef(null),g=i_e();Ik(()=>{d&&(p.current=d)},[d]);const m=H5e({...t,elements:{...s,...o&&{reference:o}}}),y=j.useCallback(I=>{const M=il(I)?{getBoundingClientRect:()=>I.getBoundingClientRect(),contextElement:I}:I;l(M),m.refs.setReference(M)},[m.refs]),w=j.useCallback(I=>{(il(I)||I===null)&&(p.current=I,a(I)),(il(m.refs.reference.current)||m.refs.reference.current===null||I!==null&&!il(I))&&m.refs.setReference(I)},[m.refs]),_=j.useMemo(()=>({...m.refs,setReference:w,setPositionReference:y,domReference:p}),[m.refs,w,y]),S=j.useMemo(()=>({...m.elements,domReference:d}),[m.elements,d]),T=j.useMemo(()=>({...m,...n,refs:_,elements:S,nodeId:e}),[m,_,S,e,n]);return Ik(()=>{n.dataRef.current.floatingContext=T;const I=g?.nodesRef.current.find(M=>M.id===e);I&&(I.context=T)}),j.useMemo(()=>({...m,context:T,refs:_,elements:S}),[m,_,S,T])}const ZP="active",eR="selected";function Ib(t,e,r){const n=new Map,s=r==="item";let i=t;if(s&&t){const{[ZP]:a,[eR]:o,...l}=t;i=l}return{...r==="floating"&&{tabIndex:-1,[a_e]:""},...i,...e.map(a=>{const o=a?a[r]:null;return typeof o=="function"?t?o(t):null:o}).concat(t).reduce((a,o)=>(o&&Object.entries(o).forEach(l=>{let[c,d]=l;if(!(s&&[ZP,eR].includes(c)))if(c.indexOf("on")===0){if(n.has(c)||n.set(c,[]),typeof d=="function"){var p;(p=n.get(c))==null||p.push(d),a[c]=function(){for(var g,m=arguments.length,y=new Array(m),w=0;w<m;w++)y[w]=arguments[w];return(g=n.get(c))==null?void 0:g.map(_=>_(...y)).find(_=>_!==void 0)}}}else a[c]=d}),a),{})}}function c_e(t){t===void 0&&(t=[]);const e=t.map(o=>o?.reference),r=t.map(o=>o?.floating),n=t.map(o=>o?.item),s=j.useCallback(o=>Ib(o,t,"reference"),e),i=j.useCallback(o=>Ib(o,t,"floating"),r),a=j.useCallback(o=>Ib(o,t,"item"),n);return j.useMemo(()=>({getReferenceProps:s,getFloatingProps:i,getItemProps:a}),[s,i,a])}function tR(t,e){return{...t,rects:{...t.rects,floating:{...t.rects.floating,height:e}}}}const u_e=t=>({name:"inner",options:t,async fn(e){const{listRef:r,overflowRef:n,onFallbackChange:s,offset:i=0,index:a=0,minItemsVisible:o=4,referenceOverflowThreshold:l=0,scrollRef:c,...d}=J1(t,e),{rects:p,elements:{floating:g}}=e,m=r.current[a],y=c?.current||g,w=g.clientTop||y.clientTop,_=g.clientTop!==0,S=y.clientTop!==0,T=g===y;if(!m)return{};const I={...e,...await b$(-m.offsetTop-g.clientTop-p.reference.height/2-m.offsetHeight/2-i).fn(e)},M=await Nb(tR(I,y.scrollHeight+w+g.clientTop),d),K=await Nb(I,{...d,elementContext:"reference"}),W=Vo(0,M.top),L=I.y+W,D=(y.scrollHeight>y.clientHeight?R=>R:Ex)(Vo(0,y.scrollHeight+(_&&T||S?w*2:0)-W-Vo(0,M.bottom)));if(y.style.maxHeight=D+"px",y.scrollTop=W,s){const R=y.offsetHeight<m.offsetHeight*vp(o,r.current.length)-1||K.top>=-l||K.bottom>=-l;Ki.flushSync(()=>s(R))}return n&&(n.current=await Nb(tR({...I,y:L},y.offsetHeight+w+g.clientTop),d)),{y:L}}});function d_e(t,e){const{open:r,elements:n}=t,{enabled:s=!0,overflowRef:i,scrollRef:a,onChange:o}=e,l=S$(o),c=j.useRef(!1),d=j.useRef(null),p=j.useRef(null);j.useEffect(()=>{if(!s)return;function m(w){if(w.ctrlKey||!y||i.current==null)return;const _=w.deltaY,S=i.current.top>=-.5,T=i.current.bottom>=-.5,I=y.scrollHeight-y.clientHeight,M=_<0?-1:1,K=_<0?"max":"min";y.scrollHeight<=y.clientHeight||(!S&&_>0||!T&&_<0?(w.preventDefault(),Ki.flushSync(()=>{l(W=>W+Math[K](_,I*M))})):/firefox/i.test(r5e())&&(y.scrollTop+=_))}const y=a?.current||n.floating;if(r&&y)return y.addEventListener("wheel",m),requestAnimationFrame(()=>{d.current=y.scrollTop,i.current!=null&&(p.current={...i.current})}),()=>{d.current=null,p.current=null,y.removeEventListener("wheel",m)}},[s,r,n.floating,i,a,l]);const g=j.useMemo(()=>({onKeyDown(){c.current=!0},onWheel(){c.current=!1},onPointerMove(){c.current=!1},onScroll(){const m=a?.current||n.floating;if(!(!i.current||!m||!c.current)){if(d.current!==null){const y=m.scrollTop-d.current;(i.current.bottom<-.5&&y<-1||i.current.top<-.5&&y>1)&&Ki.flushSync(()=>l(w=>w+y))}requestAnimationFrame(()=>{d.current=m.scrollTop})}}}),[n.floating,l,i,a]);return j.useMemo(()=>s?{floating:g}:{},[s,g])}let Z1=j.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});Z1.displayName="FloatingContext";let Q7=j.createContext(null);Q7.displayName="PlacementContext";function h_e(t){return j.useMemo(()=>t?typeof t=="string"?{to:t}:t:null,[t])}function f_e(){return j.useContext(Z1).setReference}function p_e(){return j.useContext(Z1).getReferenceProps}function m_e(){let{getFloatingProps:t,slot:e}=j.useContext(Z1);return j.useCallback((...r)=>Object.assign({},t(...r),{"data-anchor":e.anchor}),[t,e])}function g_e(t=null){t===!1&&(t=null),typeof t=="string"&&(t={to:t});let e=j.useContext(Q7),r=j.useMemo(()=>t,[JSON.stringify(t,(s,i)=>{var a;return(a=i?.outerHTML)!=null?a:i})]);ua(()=>{e?.(r??null)},[e,r]);let n=j.useContext(Z1);return j.useMemo(()=>[n.setFloating,t?n.styles:{}],[n.setFloating,t,n.styles])}let rR=4;function x_e({children:t,enabled:e=!0}){let[r,n]=j.useState(null),[s,i]=j.useState(0),a=j.useRef(null),[o,l]=j.useState(null);y_e(o);let c=e&&r!==null&&o!==null,{to:d="bottom",gap:p=0,offset:g=0,padding:m=0,inner:y}=v_e(r,o),[w,_="center"]=d.split(" ");ua(()=>{c&&i(0)},[c]);let{refs:S,floatingStyles:T,context:I}=l_e({open:c,placement:w==="selection"?_==="center"?"bottom":`bottom-${_}`:_==="center"?`${w}`:`${w}-${_}`,strategy:"absolute",transform:!1,middleware:[b$({mainAxis:w==="selection"?0:p,crossAxis:g}),W5e({padding:m}),w!=="selection"&&G5e({padding:m}),w==="selection"&&y?u_e({...y,padding:m,overflowRef:a,offset:s,minItemsVisible:rR,referenceOverflowThreshold:m,onFallbackChange(R){var F,V;if(!R)return;let Z=I.elements.floating;if(!Z)return;let fe=parseFloat(getComputedStyle(Z).scrollPaddingBottom)||0,xe=Math.min(rR,Z.childElementCount),he=0,ae=0;for(let H of(V=(F=I.elements.floating)==null?void 0:F.childNodes)!=null?V:[])if(hh(H)){let te=H.offsetTop,G=te+H.clientHeight+fe,P=Z.scrollTop,U=P+Z.clientHeight;if(te>=P&&G<=U)xe--;else{ae=Math.max(0,Math.min(G,U)-Math.max(te,P)),he=H.clientHeight;break}}xe>=1&&i(H=>{let te=he*xe-ae+fe;return H>=te?H:te})}}):null,K5e({padding:m,apply({availableWidth:R,availableHeight:F,elements:V}){Object.assign(V.floating.style,{overflow:"auto",maxWidth:`${R}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${F}px)`})}})].filter(Boolean),whileElementsMounted:O5e}),[M=w,K=_]=I.placement.split("-");w==="selection"&&(M="selection");let W=j.useMemo(()=>({anchor:[M,K].filter(Boolean).join(" ")}),[M,K]),L=d_e(I,{overflowRef:a,onChange:i}),{getReferenceProps:A,getFloatingProps:E}=c_e([L]),D=ns(R=>{l(R),S.setFloating(R)});return j.createElement(Q7.Provider,{value:n},j.createElement(Z1.Provider,{value:{setFloating:D,setReference:S.setReference,styles:T,getReferenceProps:A,getFloatingProps:E,slot:W}},t))}function y_e(t){ua(()=>{if(!t)return;let e=new MutationObserver(()=>{let r=window.getComputedStyle(t).maxHeight,n=parseFloat(r);if(isNaN(n))return;let s=parseInt(r);isNaN(s)||n!==s&&(t.style.maxHeight=`${Math.ceil(n)}px`)});return e.observe(t,{attributes:!0,attributeFilter:["style"]}),()=>{e.disconnect()}},[t])}function v_e(t,e){var r,n,s;let i=Pb((r=t?.gap)!=null?r:"var(--anchor-gap, 0)",e),a=Pb((n=t?.offset)!=null?n:"var(--anchor-offset, 0)",e),o=Pb((s=t?.padding)!=null?s:"var(--anchor-padding, 0)",e);return{...t,gap:i,offset:a,padding:o}}function Pb(t,e,r=void 0){let n=Q_(),s=ns((l,c)=>{if(l==null)return[r,null];if(typeof l=="number")return[l,null];if(typeof l=="string"){if(!c)return[r,null];let d=nR(l,c);return[d,p=>{let g=E$(l);{let m=g.map(y=>window.getComputedStyle(c).getPropertyValue(y));n.requestAnimationFrame(function y(){n.nextFrame(y);let w=!1;for(let[S,T]of g.entries()){let I=window.getComputedStyle(c).getPropertyValue(T);if(m[S]!==I){m[S]=I,w=!0;break}}if(!w)return;let _=nR(l,c);d!==_&&(p(_),d=_)})}return n.dispose}]}return[r,null]}),i=j.useMemo(()=>s(t,e)[0],[t,e]),[a=i,o]=j.useState();return ua(()=>{let[l,c]=s(t,e);if(o(l),!!c)return c(o)},[t,e]),a}function E$(t){let e=/var\((.*)\)/.exec(t);if(e){let r=e[1].indexOf(",");if(r===-1)return[e[1]];let n=e[1].slice(0,r).trim(),s=e[1].slice(r+1).trim();return s?[n,...E$(s)]:[n]}return[]}function nR(t,e){let r=document.createElement("div");e.appendChild(r),r.style.setProperty("margin-top","0px","important"),r.style.setProperty("margin-top",t,"important");let n=parseFloat(window.getComputedStyle(r).marginTop)||0;return e.removeChild(r),n}let J7=j.createContext(null);J7.displayName="OpenClosedContext";var Cx=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Cx||{});function w_e(){return j.useContext(J7)}function __e({value:t,children:e}){return Is.createElement(J7.Provider,{value:t},e)}function b_e(t){throw new Error("Unexpected object: "+t)}var ca=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(ca||{});function qv(t,e){let r=e.resolveItems();if(r.length<=0)return null;let n=e.resolveActiveIndex(),s=n??-1;switch(t.focus){case 0:{for(let i=0;i<r.length;++i)if(!e.resolveDisabled(r[i],i,r))return i;return n}case 1:{s===-1&&(s=r.length);for(let i=s-1;i>=0;--i)if(!e.resolveDisabled(r[i],i,r))return i;return n}case 2:{for(let i=s+1;i<r.length;++i)if(!e.resolveDisabled(r[i],i,r))return i;return n}case 3:{for(let i=r.length-1;i>=0;--i)if(!e.resolveDisabled(r[i],i,r))return i;return n}case 4:{for(let i=0;i<r.length;++i)if(e.resolveId(r[i],i,r)===t.id)return i;return n}case 5:return null;default:b_e(t)}}var C$=(t=>(t[t.Left=0]="Left",t[t.Right=2]="Right",t))(C$||{});function A$(t){let e=ns(t),r=j.useRef(!1);j.useEffect(()=>(r.current=!1,()=>{r.current=!0,qz(()=>{r.current&&e()})}),[e])}function k_e(){let t=typeof document>"u";return"useSyncExternalStore"in $w?(e=>e.useSyncExternalStore)($w)(()=>()=>{},()=>!1,()=>!t):!1}function S_e(){let t=k_e(),[e,r]=j.useState(td.isHandoffComplete);return e&&td.isHandoffComplete===!1&&r(!1),j.useEffect(()=>{e!==!0&&r(!0)},[e]),j.useEffect(()=>td.handoff(),[]),t?!1:e}let E_e=j.createContext(!1);function C_e(){return j.useContext(E_e)}function A_e(t){let e=C_e(),r=j.useContext(T$),[n,s]=j.useState(()=>{var i;if(!e&&r!==null)return(i=r.current)!=null?i:null;if(td.isServer)return null;let a=t?.getElementById("headlessui-portal-root");if(a)return a;if(t===null)return null;let o=t.createElement("div");return o.setAttribute("id","headlessui-portal-root"),t.body.appendChild(o)});return j.useEffect(()=>{n!==null&&(t!=null&&t.body.contains(n)||t==null||t.body.appendChild(n))},[n,t]),j.useEffect(()=>{e||r!==null&&s(r.current)},[r,s,e]),n}let N$=j.Fragment,N_e=Vc(function(t,e){let{ownerDocument:r=null,...n}=t,s=j.useRef(null),i=fh(zve(m=>{s.current=m}),e),a=Ak(s),o=r??a,l=A_e(o),[c]=j.useState(()=>{var m;return td.isServer?null:(m=o?.createElement("div"))!=null?m:null}),d=j.useContext(R_e),p=S_e();ua(()=>{!l||!c||l.contains(c)||(c.setAttribute("data-headlessui-portal",""),l.appendChild(c))},[l,c]),ua(()=>{if(c&&d)return d.register(c)},[d,c]),A$(()=>{var m;!l||!c||(z7(c)&&l.contains(c)&&l.removeChild(c),l.childNodes.length<=0&&((m=l.parentElement)==null||m.removeChild(l)))});let g=Bc();return p?!l||!c?null:Ki.createPortal(g({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:N$,name:"Portal"}),c):null});function T_e(t,e){let r=fh(e),{enabled:n=!0,ownerDocument:s,...i}=t,a=Bc();return n?Is.createElement(N_e,{...i,ownerDocument:s,ref:r}):a({ourProps:{ref:r},theirProps:i,slot:{},defaultTag:N$,name:"Portal"})}let I_e=j.Fragment,T$=j.createContext(null);function P_e(t,e){let{target:r,...n}=t,s={ref:fh(e)},i=Bc();return Is.createElement(T$.Provider,{value:r},i({ourProps:s,theirProps:n,defaultTag:I_e,name:"Popover.Group"}))}let R_e=j.createContext(null),L_e=Vc(T_e),j_e=Vc(P_e),F_e=Object.assign(L_e,{Group:j_e});function D_e(t,e){let r=j.useRef({left:0,top:0});if(ua(()=>{if(!e)return;let s=e.getBoundingClientRect();s&&(r.current=s)},[t,e]),e==null||!t||e===document.activeElement)return!1;let n=e.getBoundingClientRect();return n.top!==r.current.top||n.left!==r.current.left}let sR=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function iR(t){var e,r;let n=(e=t.innerText)!=null?e:"",s=t.cloneNode(!0);if(!hh(s))return n;let i=!1;for(let o of s.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))o.remove(),i=!0;let a=i?(r=s.innerText)!=null?r:"":n;return sR.test(a)&&(a=a.replace(sR,"")),a}function O_e(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let r=t.getAttribute("aria-labelledby");if(r){let n=r.split(" ").map(s=>{let i=document.getElementById(s);if(i){let a=i.getAttribute("aria-label");return typeof a=="string"?a.trim():iR(i).trim()}return null}).filter(Boolean);if(n.length>0)return n.join(", ")}return iR(t).trim()}function M_e(t){let e=j.useRef(""),r=j.useRef("");return ns(()=>{let n=t.current;if(!n)return"";let s=n.innerText;if(e.current===s)return r.current;let i=O_e(n).trim().toLowerCase();return e.current=s,r.current=i,i})}var B_e=Object.defineProperty,V_e=(t,e,r)=>e in t?B_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,aR=(t,e,r)=>(V_e(t,typeof e!="symbol"?e+"":e,r),r),uo=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(uo||{}),$5=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))($5||{}),Ts=(t=>(t[t.OpenMenu=0]="OpenMenu",t[t.CloseMenu=1]="CloseMenu",t[t.GoToItem=2]="GoToItem",t[t.Search=3]="Search",t[t.ClearSearch=4]="ClearSearch",t[t.RegisterItems=5]="RegisterItems",t[t.UnregisterItems=6]="UnregisterItems",t[t.SetButtonElement=7]="SetButtonElement",t[t.SetItemsElement=8]="SetItemsElement",t[t.SortItems=9]="SortItems",t))(Ts||{});function oR(t,e=r=>r){let r=t.activeItemIndex!==null?t.items[t.activeItemIndex]:null,n=l$(e(t.items.slice()),i=>i.dataRef.current.domRef.current),s=r?n.indexOf(r):null;return s===-1&&(s=null),{items:n,activeItemIndex:s}}let U_e={1(t){return t.menuState===1?t:{...t,activeItemIndex:null,pendingFocus:{focus:ca.Nothing},menuState:1}},0(t,e){return t.menuState===0?t:{...t,__demoMode:!1,pendingFocus:e.focus,menuState:0}},2:(t,e)=>{var r,n,s,i,a;if(t.menuState===1)return t;let o={...t,searchQuery:"",activationTrigger:(r=e.trigger)!=null?r:1,__demoMode:!1};if(e.focus===ca.Nothing)return{...o,activeItemIndex:null};if(e.focus===ca.Specific)return{...o,activeItemIndex:t.items.findIndex(d=>d.id===e.id)};if(e.focus===ca.Previous){let d=t.activeItemIndex;if(d!==null){let p=t.items[d].dataRef.current.domRef,g=qv(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});if(g!==null){let m=t.items[g].dataRef.current.domRef;if(((n=p.current)==null?void 0:n.previousElementSibling)===m.current||((s=m.current)==null?void 0:s.previousElementSibling)===null)return{...o,activeItemIndex:g}}}}else if(e.focus===ca.Next){let d=t.activeItemIndex;if(d!==null){let p=t.items[d].dataRef.current.domRef,g=qv(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});if(g!==null){let m=t.items[g].dataRef.current.domRef;if(((i=p.current)==null?void 0:i.nextElementSibling)===m.current||((a=m.current)==null?void 0:a.nextElementSibling)===null)return{...o,activeItemIndex:g}}}}let l=oR(t),c=qv(e,{resolveItems:()=>l.items,resolveActiveIndex:()=>l.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});return{...o,...l,activeItemIndex:c}},3:(t,e)=>{let r=t.searchQuery!==""?0:1,n=t.searchQuery+e.value.toLowerCase(),s=(t.activeItemIndex!==null?t.items.slice(t.activeItemIndex+r).concat(t.items.slice(0,t.activeItemIndex+r)):t.items).find(a=>{var o;return((o=a.dataRef.current.textValue)==null?void 0:o.startsWith(n))&&!a.dataRef.current.disabled}),i=s?t.items.indexOf(s):-1;return i===-1||i===t.activeItemIndex?{...t,searchQuery:n}:{...t,searchQuery:n,activeItemIndex:i,activationTrigger:1}},4(t){return t.searchQuery===""?t:{...t,searchQuery:"",searchActiveItemIndex:null}},5:(t,e)=>{let r=t.items.concat(e.items.map(s=>s)),n=t.activeItemIndex;return t.pendingFocus.focus!==ca.Nothing&&(n=qv(t.pendingFocus,{resolveItems:()=>r,resolveActiveIndex:()=>t.activeItemIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled})),{...t,items:r,activeItemIndex:n,pendingFocus:{focus:ca.Nothing},pendingShouldSort:!0}},6:(t,e)=>{let r=t.items,n=[],s=new Set(e.items);for(let[i,a]of r.entries())if(s.has(a.id)&&(n.push(i),s.delete(a.id),s.size===0))break;if(n.length>0){r=r.slice();for(let i of n.reverse())r.splice(i,1)}return{...t,items:r,activationTrigger:1}},7:(t,e)=>t.buttonElement===e.element?t:{...t,buttonElement:e.element},8:(t,e)=>t.itemsElement===e.element?t:{...t,itemsElement:e.element},9:t=>t.pendingShouldSort?{...t,...oR(t),pendingShouldSort:!1}:t};class Z7 extends t${constructor(e){super(e),aR(this,"actions",{registerItem:IP(()=>{let r=[],n=new Set;return[(s,i)=>{n.has(i)||(n.add(i),r.push({id:s,dataRef:i}))},()=>(n.clear(),this.send({type:5,items:r.splice(0)}))]}),unregisterItem:IP(()=>{let r=[];return[n=>r.push(n),()=>this.send({type:6,items:r.splice(0)})]})}),aR(this,"selectors",{activeDescendantId(r){var n;let s=r.activeItemIndex,i=r.items;return s===null||(n=i[s])==null?void 0:n.id},isActive(r,n){var s;let i=r.activeItemIndex,a=r.items;return i!==null?((s=a[i])==null?void 0:s.id)===n:!1},shouldScrollIntoView(r,n){return r.__demoMode||r.menuState!==0||r.activationTrigger===0?!1:this.isActive(r,n)}}),this.on(5,()=>{this.disposables.requestAnimationFrame(()=>{this.send({type:9})})});{let r=this.state.id,n=H7.get(null);this.disposables.add(n.on(n$.Push,s=>{!n.selectors.isTop(s,r)&&this.state.menuState===0&&this.send({type:1})})),this.on(0,()=>n.actions.push(r)),this.on(1,()=>n.actions.pop(r))}}static new({id:e,__demoMode:r=!1}){return new Z7({id:e,__demoMode:r,menuState:r?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1,pendingShouldSort:!1,pendingFocus:{focus:ca.Nothing}})}reduce(e,r){return X1(r.type,U_e,e,r)}}const I$=j.createContext(null);function eE(t){let e=j.useContext(I$);if(e===null){let r=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,P$),r}return e}function P$({id:t,__demoMode:e=!1}){let r=j.useMemo(()=>Z7.new({id:t,__demoMode:e}),[]);return A$(()=>r.dispose()),r}let z_e=j.Fragment;function $_e(t,e){let r=j.useId(),{__demoMode:n=!1,...s}=t,i=P$({id:r,__demoMode:n}),[a,o,l]=Xu(i,_=>[_.menuState,_.itemsElement,_.buttonElement]),c=fh(e),d=H7.get(null),p=Xu(d,j.useCallback(_=>d.selectors.isTop(_,r),[d,r]));Swe(p,[l,o],(_,S)=>{var T;i.send({type:Ts.CloseMenu}),G7(S,W7.Loose)||(_.preventDefault(),(T=i.state.buttonElement)==null||T.focus())});let g=ns(()=>{i.send({type:Ts.CloseMenu})}),m=j.useMemo(()=>({open:a===uo.Open,close:g}),[a,g]),y={ref:c},w=Bc();return Is.createElement(x_e,null,Is.createElement(I$.Provider,{value:i},Is.createElement(__e,{value:X1(a,{[uo.Open]:Cx.Open,[uo.Closed]:Cx.Closed})},w({ourProps:y,theirProps:s,slot:m,defaultTag:z_e,name:"Menu"}))))}let q_e="button";function H_e(t,e){let r=eE("Menu.Button"),n=j.useId(),{id:s=`headlessui-menu-button-${n}`,disabled:i=!1,autoFocus:a=!1,...o}=t,l=j.useRef(null),c=p_e(),d=fh(e,l,f_e(),ns(V=>r.send({type:Ts.SetButtonElement,element:V}))),p=ns(V=>{switch(V.key){case io.Space:case io.Enter:case io.ArrowDown:V.preventDefault(),V.stopPropagation(),r.send({type:Ts.OpenMenu,focus:{focus:ca.First}});break;case io.ArrowUp:V.preventDefault(),V.stopPropagation(),r.send({type:Ts.OpenMenu,focus:{focus:ca.Last}});break}}),g=ns(V=>{switch(V.key){case io.Space:V.preventDefault();break}}),[m,y,w]=Xu(r,V=>[V.menuState,V.buttonElement,V.itemsElement]),_=m===uo.Open;Awe(_,{trigger:y,action:j.useCallback(V=>{if(y!=null&&y.contains(V.target))return zv.Ignore;let Z=V.target.closest('[role="menuitem"]:not([data-disabled])');return hh(Z)?zv.Select(Z):w!=null&&w.contains(V.target)?zv.Ignore:zv.Close},[y,w]),close:j.useCallback(()=>r.send({type:Ts.CloseMenu}),[]),select:j.useCallback(V=>V.click(),[])});let S=ns(V=>{var Z;if(V.button===C$.Left){if(Vve(V.currentTarget))return V.preventDefault();i||(m===uo.Open?(Ki.flushSync(()=>r.send({type:Ts.CloseMenu})),(Z=l.current)==null||Z.focus({preventScroll:!0})):(V.preventDefault(),r.send({type:Ts.OpenMenu,focus:{focus:ca.Nothing},trigger:$5.Pointer})))}}),T=j.useRef(null),I=ns(V=>{T.current=V.pointerType,V.pointerType==="mouse"&&S(V)}),M=ns(V=>{T.current!=="mouse"&&S(V)}),{isFocusVisible:K,focusProps:W}=_ve({autoFocus:a}),{isHovered:L,hoverProps:A}=wve({isDisabled:i}),{pressed:E,pressProps:D}=Ave({disabled:i}),R=j.useMemo(()=>({open:m===uo.Open,active:E||m===uo.Open,disabled:i,hover:L,focus:K,autofocus:a}),[m,L,K,E,i,a]),F=Gz(c(),{ref:d,id:s,type:Nwe(t,l.current),"aria-haspopup":"menu","aria-controls":w?.id,"aria-expanded":m===uo.Open,disabled:i||void 0,autoFocus:a,onKeyDown:p,onKeyUp:g,onPointerDown:I,onClick:M},W,A,D);return Bc()({ourProps:F,theirProps:o,slot:R,defaultTag:q_e,name:"Menu.Button"})}let W_e="div",G_e=kk.RenderStrategy|kk.Static;function K_e(t,e){let r=j.useId(),{id:n=`headlessui-menu-items-${r}`,anchor:s,portal:i=!1,modal:a=!0,transition:o=!1,...l}=t,c=h_e(s),d=eE("Menu.Items"),[p,g]=g_e(c),m=m_e(),[y,w]=j.useState(null),_=fh(e,c?p:null,ns(H=>d.send({type:Ts.SetItemsElement,element:H})),w),[S,T]=Xu(d,H=>[H.menuState,H.buttonElement]),I=Ak(T),M=Ak(y);c&&(i=!0);let K=w_e(),[W,L]=zwe(o,y,K!==null?(K&Cx.Open)===Cx.Open:S===uo.Open);dwe(W,T,()=>{d.send({type:Ts.CloseMenu})});let A=Xu(d,H=>H.__demoMode),E=A?!1:a&&S===uo.Open;Dwe(E,M);let D=A?!1:a&&S===uo.Open;uwe(D,{allowed:j.useCallback(()=>[T,y],[T,y])});let R=S!==uo.Open,F=D_e(R,T)?!1:W;j.useEffect(()=>{let H=y;H&&S===uo.Open&&H!==M?.activeElement&&H.focus({preventScroll:!0})},[S,y,M]),Wwe(S===uo.Open,{container:y,accept(H){return H.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:H.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(H){H.setAttribute("role","none")}});let V=Q_(),Z=ns(H=>{var te,G,P;switch(V.dispose(),H.key){case io.Space:if(d.state.searchQuery!=="")return H.preventDefault(),H.stopPropagation(),d.send({type:Ts.Search,value:H.key});case io.Enter:if(H.preventDefault(),H.stopPropagation(),d.state.activeItemIndex!==null){let{dataRef:U}=d.state.items[d.state.activeItemIndex];(G=(te=U.current)==null?void 0:te.domRef.current)==null||G.click()}d.send({type:Ts.CloseMenu}),o$(d.state.buttonElement);break;case io.ArrowDown:return H.preventDefault(),H.stopPropagation(),d.send({type:Ts.GoToItem,focus:ca.Next});case io.ArrowUp:return H.preventDefault(),H.stopPropagation(),d.send({type:Ts.GoToItem,focus:ca.Previous});case io.Home:case io.PageUp:return H.preventDefault(),H.stopPropagation(),d.send({type:Ts.GoToItem,focus:ca.First});case io.End:case io.PageDown:return H.preventDefault(),H.stopPropagation(),d.send({type:Ts.GoToItem,focus:ca.Last});case io.Escape:H.preventDefault(),H.stopPropagation(),Ki.flushSync(()=>d.send({type:Ts.CloseMenu})),(P=d.state.buttonElement)==null||P.focus({preventScroll:!0});break;case io.Tab:H.preventDefault(),H.stopPropagation(),Ki.flushSync(()=>d.send({type:Ts.CloseMenu})),wwe(d.state.buttonElement,H.shiftKey?Ck.Previous:Ck.Next);break;default:H.key.length===1&&(d.send({type:Ts.Search,value:H.key}),V.setTimeout(()=>d.send({type:Ts.ClearSearch}),350));break}}),fe=ns(H=>{switch(H.key){case io.Space:H.preventDefault();break}}),xe=j.useMemo(()=>({open:S===uo.Open}),[S]),he=Gz(c?m():{},{"aria-activedescendant":Xu(d,d.selectors.activeDescendantId),"aria-labelledby":Xu(d,H=>{var te;return(te=H.buttonElement)==null?void 0:te.id}),id:n,onKeyDown:Z,onKeyUp:fe,role:"menu",tabIndex:S===uo.Open?0:void 0,ref:_,style:{...l.style,...g,"--button-width":Jve(T,!0).width},...Uwe(L)}),ae=Bc();return Is.createElement(F_e,{enabled:i?t.static||W:!1,ownerDocument:I},ae({ourProps:he,theirProps:l,slot:xe,defaultTag:W_e,features:G_e,visible:F,name:"Menu.Items"}))}let Y_e=j.Fragment;function X_e(t,e){let r=j.useId(),{id:n=`headlessui-menu-item-${r}`,disabled:s=!1,...i}=t,a=eE("Menu.Item"),o=Xu(a,R=>a.selectors.isActive(R,n)),l=j.useRef(null),c=fh(e,l),d=Xu(a,R=>a.selectors.shouldScrollIntoView(R,n));ua(()=>{if(d)return Mc().requestAnimationFrame(()=>{var R,F;(F=(R=l.current)==null?void 0:R.scrollIntoView)==null||F.call(R,{block:"nearest"})})},[d,l]);let p=M_e(l),g=j.useRef({disabled:s,domRef:l,get textValue(){return p()}});ua(()=>{g.current.disabled=s},[g,s]),ua(()=>(a.actions.registerItem(n,g),()=>a.actions.unregisterItem(n)),[g,n]);let m=ns(()=>{a.send({type:Ts.CloseMenu})}),y=ns(R=>{if(s)return R.preventDefault();a.send({type:Ts.CloseMenu}),o$(a.state.buttonElement)}),w=ns(()=>{if(s)return a.send({type:Ts.GoToItem,focus:ca.Nothing});a.send({type:Ts.GoToItem,focus:ca.Specific,id:n})}),_=Owe(),S=ns(R=>_.update(R)),T=ns(R=>{_.wasMoved(R)&&(s||o||a.send({type:Ts.GoToItem,focus:ca.Specific,id:n,trigger:$5.Pointer}))}),I=ns(R=>{_.wasMoved(R)&&(s||o&&a.state.activationTrigger===$5.Pointer&&a.send({type:Ts.GoToItem,focus:ca.Nothing}))}),[M,K]=Jz(),[W,L]=$ve(),A=j.useMemo(()=>({active:o,focus:o,disabled:s,close:m}),[o,s,m]),E={id:n,ref:c,role:"menuitem",tabIndex:s===!0?void 0:-1,"aria-disabled":s===!0?!0:void 0,"aria-labelledby":M,"aria-describedby":W,disabled:void 0,onClick:y,onFocus:w,onPointerEnter:S,onMouseEnter:S,onPointerMove:T,onMouseMove:T,onPointerLeave:I,onMouseLeave:I},D=Bc();return Is.createElement(K,null,Is.createElement(L,null,D({ourProps:E,theirProps:i,slot:A,defaultTag:Y_e,name:"Menu.Item"})))}let Q_e="div";function J_e(t,e){let[r,n]=Jz(),s=t,i={ref:e,"aria-labelledby":r,role:"group"},a=Bc();return Is.createElement(n,null,a({ourProps:i,theirProps:s,slot:{},defaultTag:Q_e,name:"Menu.Section"}))}let Z_e="header";function e4e(t,e){let r=j.useId(),{id:n=`headlessui-menu-heading-${r}`,...s}=t,i=q7();ua(()=>i.register(n),[n,i.register]);let a={id:n,ref:e,role:"presentation",...i.props};return Bc()({ourProps:a,theirProps:s,slot:{},defaultTag:Z_e,name:"Menu.Heading"})}let t4e="div";function r4e(t,e){let r=t,n={ref:e,role:"separator"};return Bc()({ourProps:n,theirProps:r,slot:{},defaultTag:t4e,name:"Menu.Separator"})}let n4e=Vc($_e),s4e=Vc(H_e),i4e=Vc(K_e),a4e=Vc(X_e),o4e=Vc(J_e),l4e=Vc(e4e),c4e=Vc(r4e),zg=Object.assign(n4e,{Button:s4e,Items:i4e,Item:a4e,Section:o4e,Heading:l4e,Separator:c4e});function u4e({items:t,total:e,onClose:r,prescription:n=!1}){const{user:s}=Dn(),{t:i}=qs(),a=Jn(),{userCoords:o,location:l}=Np(),[c,d]=j.useState(!0),[p,g]=j.useState(!1),[m,y]=j.useState(""),[w,_]=j.useState(""),[S,T]=j.useState(""),[I,M]=j.useState([]),[K,W]=j.useState(!1),[L,A]=j.useState(""),[E,D]=j.useState(0);j.useEffect(()=>{s&&!m&&(T(s.email||""),_(s.phoneNumber||""),y(l||"Current location"))},[s,l,m]),j.useEffect(()=>{t.length>0&&o&&F()},[t,o]);const R=j.useMemo(()=>e+E,[e,E]),F=async()=>{if(!o||t.length===0){D(0);return}try{const he=[...new Set(t.map(te=>te.product?.pharmacyId).filter(Boolean))];let ae=0;for(const te of he){const P=(await ni(er(ht,"pharmacies",te))).data();if(P){let U,X;if(P.coordinates?.latitude&&P.coordinates?.longitude?(U=P.coordinates.latitude,X=P.coordinates.longitude):P.lat&&P.lon?(U=P.lat,X=P.lon):P.latitude&&P.longitude&&(U=P.latitude,X=P.longitude),U&&X){const J=ry(o.latitude,o.longitude,U,X);ae+=J}}}const H=Math.round(ae*300);D(H)}catch(he){console.error("Error calculating delivery fee:",he),D(300)}},V=async he=>{if(he.length<3){M([]);return}W(!0);try{const H=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(he)}&limit=5&countrycodes=ng`)).json();M(H.map(te=>te.display_name))}catch(ae){console.error("Error searching addresses:",ae),M([])}W(!1)},Z=()=>{l&&o&&(y(l),M([]))},fe=()=>{d(!1),g(!0)},xe=async()=>{if(!(!s||!t.length||!L))try{const ae=t[0].product?.pharmacyId,H={customerId:s.uid,pharmacyId:ae,items:t.map(G=>({productId:G.id,quantity:G.qty,price:G.price,pharmacyId:G.pharmacyId})),total:R,subtotal:e,deliveryFee:E,deliveryAddress:m,customerPhone:w,customerEmail:S||s.email,paymentMethod:L};console.log(`Order: ${H.total}`),console.log(`Order Items: ${H.items}`);let te;if(L==="online"?te=await ax({customerId:H.customerId,items:H.items,total:e,email:H.customerEmail,prescription:n}):te=await ax({customerId:H.customerId,items:H.items,total:e,email:H.customerEmail,prescription:n}),console.log(`OrderStatus: ${te}`),te===!1){alert(i("order_placement_failed","Order placement failed"));return}g(!1),d(!1),alert(L==="cash"?i("order_placed_delivery","Order placed successfully! You'll pay on delivery."):i("payment_successful","Payment successful! Your order has been placed.")),a("/customer/orders")}catch(he){console.error("Checkout error:",he),alert(i("checkout_failed","Checkout failed. Please try again."))}};return u.jsxs("div",{children:[c&&u.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-50 p-4",children:u.jsx("div",{className:"bg-white rounded-3xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-[20px] font-light font-poppins text-sky-600",children:i("order_summary","Order Summary")}),u.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:u.jsx(ox,{className:"w-5 h-5 text-gray-500"})})]}),u.jsxs("div",{className:"mb-6",children:[u.jsxs("h3",{className:"text-[16px] font-medium mb-3",children:[i("items","Items")," (",t.length,")"]}),u.jsx("div",{className:"space-y-3",children:t.map((he,ae)=>u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[u.jsx(sc,{name:he.name,image:he.image,category:he.category,size:40,roundedClass:"rounded-lg"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"text-[14px] font-medium truncate blur-sm select-none",children:he.name}),u.jsxs("div",{className:"text-[12px] text-gray-600",children:[i("qty","Qty"),": ",he.qty]})]}),u.jsxs("div",{className:"text-[14px] font-medium text-sky-600",children:["",Number((he.price||0)*he.qty).toLocaleString()]})]},ae))})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-[16px] font-medium mb-3",children:i("delivery_details","Delivery Details")}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-[14px] font-medium text-gray-700 mb-2",children:[i("delivery_address","Delivery Address")," *"]}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:m,onChange:he=>{y(he.target.value),V(he.target.value)},placeholder:i("enter_delivery_address","Enter delivery address"),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg text-[14px] pr-10"}),u.jsx("button",{onClick:Z,className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 text-sky-600 hover:bg-sky-50 rounded-full transition-colors",title:i("use_current_location","Use current location"),children:u.jsx(y5,{className:"w-4 h-4"})})]}),I.length>0&&u.jsx("div",{className:"mt-2 bg-white border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-40 overflow-y-auto relative z-[10000]",children:I.map((he,ae)=>u.jsx("button",{onClick:()=>{y(he),M([])},className:"w-full text-left p-3 hover:bg-gray-50 text-[13px] border-b last:border-b-0",children:he},ae))})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-[14px] font-medium text-gray-700 mb-2",children:[i("phone_number","Phone Number")," *"]}),u.jsx("input",{type:"tel",value:w,onChange:he=>_(he.target.value),placeholder:i("enter_phone_number","Enter phone number"),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg text-[14px]"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[14px] font-medium text-gray-700 mb-2",children:i("email_optional","Email (Optional)")}),u.jsx("input",{type:"email",value:S,onChange:he=>T(he.target.value),placeholder:i("enter_email_address","Enter email address"),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg text-[14px]"})]})]})]})]}),u.jsxs("div",{className:"mb-6 p-4 bg-sky-50 rounded-lg",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-[14px]",children:i("subtotal","Subtotal")}),u.jsxs("span",{className:"text-[14px] font-medium",children:["",e]})]}),E>0&&u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-[14px]",children:i("delivery_fee","Delivery Fee")}),u.jsxs("span",{className:"text-[14px]",children:["",Number(E).toLocaleString()]})]}),u.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-sky-200",children:[u.jsx("span",{className:"text-[16px] font-medium",children:i("total","Total")}),u.jsxs("span",{className:"text-[16px] font-bold text-sky-600",children:["",Number(e).toLocaleString()]})]})]}),u.jsx("button",{onClick:fe,disabled:!m.trim()||!w.trim(),className:"w-full bg-sky-600 text-white py-3 rounded-full text-[16px] font-medium hover:bg-sky-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:i("continue_to_payment","Continue to Payment")})]})})}),p&&u.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-50 p-4",children:u.jsx("div",{className:"bg-white rounded-3xl w-full max-w-md",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-[20px] font-light font-poppins text-sky-600",children:i("payment_method","Payment Method")}),u.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:u.jsx(ox,{className:"w-5 h-5 text-gray-500"})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("button",{onClick:()=>A("cash"),className:`w-full p-4 rounded-lg border-2 transition-colors text-left ${L==="cash"?"border-sky-500 bg-sky-50":"border-gray-200 dark:border-gray-600 hover:border-sky-300 dark:border-gray-600"}`,children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(nB,{className:"w-6 h-6 text-sky-600"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[16px] font-medium",children:i("pay_on_delivery","Pay on Delivery")}),u.jsx("div",{className:"text-[13px] text-gray-600",children:i("pay_with_cash_on_delivery","Pay with cash when order arrives")})]})]})}),u.jsx("button",{onClick:()=>A("online"),className:`w-full p-4 rounded-lg border-2 transition-colors text-left ${L==="online"?"border-sky-500 bg-sky-50":"border-gray-200 dark:border-gray-600 hover:border-sky-300 dark:border-gray-600"}`,children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(rB,{className:"w-6 h-6 text-sky-600"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[16px] font-medium",children:i("online_payment","Online Payment")}),u.jsx("div",{className:"text-[13px] text-gray-600",children:i("pay_with_card_bank_ussd","Pay with card, bank transfer, or USSD")})]})]})}),u.jsx("button",{disabled:!0,className:"w-full p-4 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-gray-100 text-left cursor-not-allowed opacity-60",children:u.jsxs("div",{className:"flex items-center gap-3 justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(WS,{className:"w-6 h-6 text-gray-400"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[16px] font-medium text-gray-500",children:i("pay_with_insurance","Pay with Insurance")}),u.jsx("div",{className:"text-[13px] text-gray-400",children:i("use_your_health_insurance","Use your health insurance")})]})]}),u.jsx("span",{className:"text-[12px] text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:i("coming_soon","Coming Soon")})]})})]}),u.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-[16px] font-medium",children:i("total_amount","Total Amount")}),u.jsxs("span",{className:"text-[18px] font-bold text-sky-600",children:["",Number(e).toLocaleString()]})]})}),u.jsx("button",{onClick:xe,disabled:!L,className:"w-full mt-6 bg-sky-600 text-white py-3 rounded-full text-[16px] font-medium hover:bg-sky-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:L==="online"?i("pay_now","Pay Now"):i("place_order","Place Order")})]})})})]})}function d4e({prescriptionId:t}){const[e,r]=j.useState(null),[n,s]=j.useState(0),[i,a]=j.useState([]),[o,l]=j.useState(!1),[c,d]=j.useState(!1),p=g=>{a(m=>[...m,g])};return j.useEffect(()=>{(async()=>{const m=await ni(er(ht,"prescriptions",t));m.exists()&&r({id:m.id,...m.data()})})()},[t]),j.useEffect(()=>{(async()=>{if(!e||!e.drugs)return;const y=(await Promise.all(e.drugs?.map(async w=>{const _=await ni(er(ht,"products",w.productId));if(_.exists()){const S={id:_.id,..._.data()};if(!i.find(T=>T.id===S.id)){const T={...S,qty:w.dosage};p(T)}return w.dosage*S.price}return 0}))).reduce((w,_)=>w+_,0);s(y)})()},[e]),j.useEffect(()=>{const g=_r(Zt(ht,"orders"),jr("prescriptionId","==",t)),m=In(g,y=>{if(!y.empty){const _=!!y.docs[0].data().prescriptionId;d(_)}});return()=>m()},[]),e?u.jsxs("div",{className:"mt-1 px-3 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 text-xs text-gray-700 dark:text-gray-200 shadow-sm",children:[u.jsx("div",{className:"font-semibold text-sm",children:" Prescription"}),u.jsxs("div",{className:"mt-1",children:[u.jsx("span",{className:"font-medium",children:"Drugs:"})," ",e.drugs?.length>1?`${e.drugs[0].name}, others...`:"Only one drug prescribed"]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Duration:"})," ",e.duration," ","days"]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Notes:"})," ",e.notes||""]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"TotalPrice:"})," ",n||0]}),u.jsx("div",{className:"mt-2",children:c?u.jsx("button",{disabled:!0,className:"w-full px-3 py-1.5 text-sm font-medium text-white bg-green-600 rounded-md cursor-not-allowed",children:" Paid"}):u.jsx("button",{onClick:()=>{l(!0)},className:"w-full px-3 py-1.5 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors",children:" Order"})}),o&&u.jsx(u4e,{items:i,total:n,onClose:()=>l(!1),prescription:t})]}):u.jsx("div",{className:"text-xs text-gray-400 mt-1 italic",children:"Loading prescription..."})}const h4e=Is.lazy(()=>$d(()=>import("./CreatePrescriptionModal-DtB4wArN.js"),[])),f4e=Is.lazy(()=>$d(()=>Promise.resolve().then(()=>$ie),void 0)),p4e=Is.lazy(()=>$d(()=>import("./MessageWithLinks-Db-pideT.js"),[])),m4e="/ChatBg.svg";function g4e(t,e){const r=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=(new Date(r.getFullYear(),r.getMonth(),r.getDate())-n)/(1e3*60*60*24);return i===0?e("today","Today"):i===1?e("yesterday","Yesterday"):t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}const R$=Is.memo(({message:t,isMine:e,t:r})=>{if(!e)return null;const n=t.status||"sent",s=t.read||n==="read";return n==="sent"?u.jsx(gie,{className:"w-3 h-3 text-gray-400 ml-1 opacity-80",strokeWidth:2,title:r("sent","Sent")}):n==="delivered"?u.jsx(UN,{className:"w-3 h-3 text-gray-400 ml-1 opacity-80",strokeWidth:2,title:r("delivered","Delivered")}):n==="read"||s?u.jsx(UN,{className:"w-3 h-3 text-green-500 ml-1",strokeWidth:2,title:r("read","Read")}):null}),L$=Is.memo(({message:t,isMine:e,showReadReceipts:r,t:n})=>!e||!r?null:u.jsx(R$,{message:t,isMine:e,t:n}));R$.displayName="MessageStatus";L$.displayName="ConditionalMessageStatus";const Nw=Is.memo(()=>u.jsxs("div",{className:"flex flex-col items-start w-full mb-2 animate-pulse",children:[u.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-2xl h-10 w-48 mb-1"}),u.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-2xl h-6 w-32"})]}));Nw.displayName="MessageSkeleton";function lR(){const{user:t,profile:e}=Dn(),{getSetting:r}=ny(),{t:n}=qs(),s=Jn(),i=Nl(),a=a_(),l=j.useRef(i.state?.thread||null).current,c=a.vendorId,d=a.threadId,[p,g]=j.useState(d||l?.id||null),[m,y]=j.useState(""),[w,_]=j.useState(""),[S,T]=j.useState(!1),[I,M]=j.useState([]),[K,W]=j.useState(""),[L,A]=j.useState(""),[E,D]=j.useState(!0),[R,F]=j.useState(50),V=j.useRef(null),Z=j.useRef(null),[fe,xe]=j.useState(null),[he,ae]=j.useState(!0),H=j.useRef(null),[te,G]=j.useState(!1),[P,U]=j.useState([]),[X,J]=j.useState(!1),ie=new URLSearchParams(i.search),ve=ie.get("productId"),ke=ie.get("productName");ie.get("productImage"),ie.get("vendorName");const oe=ie.get("productPrice"),Ee=ie.get("prefillMsg");j.useEffect(()=>{if(l)if(e?.role==="customer"){y(l.vendorName||n("pharmacy","Pharmacy")),_(l.vendorAddress||l.vendorEmail||"");const He=typeof l.vendorIsVerified=="boolean"?l.vendorIsVerified:l.vendorVerificationStatus==="approved";T(He),l.vendorPhone&&A(l.vendorPhone)}else y(l.customerName||n("customer","Customer")),_(l.customerAddress||l.customerEmail||""),T(!1)},[l,e?.role,n]),j.useEffect(()=>{t&&(async()=>{if(d){g(d);return}if(l?.id){g(l.id);return}if(e?.role==="customer"&&c){const He=await qS({vendorId:c,customerId:t.uid,role:"customer"});g(He)}else if(e?.role==="vendor"&&!d){console.warn("Vendor tried to open chat without threadId in URL."),s("/messages");return}})().catch(console.error)},[t?.uid,e?.role,c,d,s,l]),j.useEffect(()=>{if(!p||!e?.role)return;const He=er(ht,"threads",p),ut=In(He,async Ct=>{if(!Ct.exists())return;const Et=Ct.data(),[Le,Ye]=p.split("__");if(e.role==="customer"){const Qe=async()=>{const lt=await ni(er(ht,"pharmacies",Le));return lt.exists()?lt.data():{}},le=Et.vendorName||"",je=Et.vendorAddress||"";let We=null;le?y(le):(We=await Qe(),y(We.name||Et("pharmacy","Pharmacy"))),je?_(je):(We||(We=await Qe()),_(We.address||We.email||"")),typeof Et.vendorIsVerified=="boolean"?T(Et.vendorIsVerified):(We||(We=await Qe()),T(!!We.isVerified)),We||(We=await Qe()),A(We.phone||"")}else{const Qe=Et.customerName||"",le=Et.customerAddress||Et.customerEmail||"";if(Qe)y(Qe),_(le);else{const je=await ni(er(ht,"users",Ye)),We=je.exists()?je.data():{};y(We.displayName||Et("customer","Customer")),_(We.email||"")}T(!1)}});return()=>ut()},[p,e?.role,n]),j.useEffect(()=>{if(!p||!t?.uid)return;D(!0);const He=OM(p,ut=>{M(ut),D(!1),ut.forEach(async Ct=>{if(Ct.senderId!==t.uid&&Ct.status==="sent")try{await DM(p,Ct.id)}catch(Et){console.error("Error marking message as delivered:",Et)}})},console.error,100);return g5(p,t.uid).catch(console.error),He},[p,t?.uid]);const Oe=j.useCallback((He=!1)=>{He?V.current?.scrollIntoView():V.current?.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},[]);j.useEffect(()=>{!E&&I.length>0&&requestAnimationFrame(()=>Oe(!1))},[I.length,E,Oe]);const ne=j.useMemo(()=>{let He=null;return ut=>{He||(He=setTimeout(()=>{ut.target.scrollTop<200&&R<I.length&&F(Le=>Math.min(Le+50,I.length)),He=null},100))}},[R,I.length]),we=j.useCallback(He=>{ne(He)},[ne]),Re=j.useMemo(()=>I.slice(-R),[I,R]),pe=r(Fr.MESSAGE_READ_RECEIPTS);r(Fr.DATA_SAVER_MODE),j.useEffect(()=>{const He=()=>{ae(!document.hidden),!document.hidden&&p&&t?.uid&&g5(p,t.uid).catch(console.error)};return document.addEventListener("visibilitychange",He),()=>document.removeEventListener("visibilitychange",He)},[p,t?.uid]);const Ke=j.useRef(null);j.useEffect(()=>{if(!I.length)return;const He=I[I.length-1];if(He.id!==Ke.current&&He.senderId!==t?.uid&&H.current){H.current.currentTime=0;const ut=H.current.play();ut&&ut.catch(()=>{})}Ke.current=He.id},[I,t?.uid]);const ze=j.useCallback(()=>{if(!p||!t)return null;const[He,ut]=p.split("__");return t.uid===He?ut:He},[p,t]),ot=j.useCallback(async()=>{const He=ze();if(!He||!K.trim()||!p)return;const ut=K.trim();W("");try{await $6(p,{senderId:t.uid,to:He,text:ut})}catch(Ct){W(ut),console.error("Failed to send message:",Ct)}},[p,K,t?.uid,ze]);j.useEffect(()=>{if(!te)return;let He=null;if(e?.role==="pharmacy"?He=t?.uid:p&&([He]=p.split("__")),!He)return;const ut=_r(Zt(ht,"products"),jr("pharmacyId","==",He)),Ct=In(ut,Et=>{U(Et.docs.map(Le=>({id:Le.id,...Le.data()})))});return()=>Ct&&Ct()},[te,e?.role,t?.uid,p]);const Be=async({drugs:He,startDate:ut,duration:Ct,notes:Et})=>{if(!p||!t)return;const[Le,Ye]=p.split("__"),{id:Qe}=await UM({pharmacyId:Le,customerId:Ye,chatThreadId:p,drugs:He,startDate:ut,duration:Ct,notes:Et});G(!1),await $6(p,{senderId:t.uid,to:Ye,text:n("prescription_created","A new prescription has been created.")},Qe)};return j.useEffect(()=>{if(ke&&ve){const He=oe||"";W(n("drug_inquiry","I want to know more about this drug {productName}{priceText}.",{productName:ke,priceText:He?", "+He:""}))}else Ee&&W(Ee)},[ke,oe,ve,Ee]),u.jsxs("div",{className:"h-screen w-full flex flex-col items-stretch overflow-visible bg-white dark:bg-gray-900",style:{position:"relative"},children:[u.jsx("div",{"aria-hidden":!0,style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",backgroundImage:`url(${m4e})`,backgroundRepeat:"repeat",backgroundPosition:"center center",backgroundSize:"200px 200px",pointerEvents:"none",zIndex:0,opacity:.3,willChange:"transform",backfaceVisibility:"hidden",transform:"translateZ(0)"}}),u.jsxs("div",{style:{position:"relative",zIndex:10},className:"flex-1 flex flex-col min-h-0",children:[u.jsx("style",{children:".hide-scrollbar::-webkit-scrollbar{display:none} .hide-scrollbar{-ms-overflow-style:none; scrollbar-width:none;}"}),u.jsx("audio",{ref:H,src:Qye,preload:"none"}),u.jsx("div",{className:"sticky top-0 z-20 bg-white/90 dark:bg-gray-900/90 pt-1 pb-1",style:{paddingTop:"env(safe-area-inset-top, 0)",width:"100vw",marginLeft:"calc(50% - 50vw)",paddingRight:"env(safe-area-inset-right, 0)"},children:u.jsxs("div",{className:"w-full px-4 sm:px-5 pt-6 pb-3 flex items-center gap-3 justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>{window.history.length>1?s(-1):s("/messages")},className:"rounded-full border border-gray-200 dark:border-gray-600 dark:border-gray-600 px-3 sm:px-4 py-1 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800",children:u.jsx(du,{className:"h-4 w-4"})}),e?.role==="customer"?u.jsx("button",{className:"min-w-0 font-light text-[15px] sm:text-[17px] truncate text-left hover:underline focus:outline-none text-gray-900 dark:text-white",onClick:()=>{if(p){const[He]=p.split("__");s(`/vendor/${He}`)}},title:m,children:u.jsx(hu,{name:m||"...",isVerified:S,className:"inline-flex items-center gap-1",iconClassName:"h-4 w-4 text-sky-500 dark:text-sky-400"})}):u.jsxs("div",{className:"min-w-0",children:[u.jsx("div",{className:"font-light text-[15px] sm:text-[17px] truncate text-gray-900 dark:text-white",children:u.jsx(hu,{name:m||"...",isVerified:S,className:"inline-flex items-center gap-1",iconClassName:"h-4 w-4 text-sky-500 dark:text-sky-400"})}),u.jsx("div",{className:"text-[9px] text-zinc-500 dark:text-zinc-400 truncate",children:w})]})]}),e?.role==="customer"&&u.jsxs("a",{href:L?`tel:${L}`:void 0,className:`flex items-center justify-center rounded-full border border-sky-500 text-sky-600 dark:text-sky-400 px-2 py-1 text-[11px] font-poppins font-light ${L?"hover:bg-sky-50 dark:hover:bg-sky-900/20":"opacity-40 cursor-not-allowed"}`,style:{minWidth:32},title:L?n("call_pharmacy_title","Call {pharmacy}",{pharmacy:m}):n("no_phone_number","No phone number"),tabIndex:L?0:-1,"aria-disabled":!L,children:[u.jsx(Xye,{className:"h-3 w-3 mr-1"})," ",n("call","Call")]}),e?.role==="pharmacy"&&p&&u.jsxs(zg,{as:"div",className:"relative inline-block text-left ml-2",children:[u.jsxs(zg.Button,{className:"px-3 py-1 rounded-full bg-sky-600 text-white text-xs font-medium",children:[n("actions","Actions")," "]}),u.jsx(zg.Items,{className:"absolute right-0 mt-2 w-48 origin-top-right bg-white dark:bg-gray-800 border border-sky-200 dark:border-gray-600 divide-y divide-gray-100 dark:divide-gray-700 rounded-[5px] shadow-lg focus:outline-none z-50",children:u.jsxs("div",{className:"py-1",children:[u.jsx(zg.Item,{children:({active:He})=>u.jsx("button",{className:`w-full text-left px-4 py-2 text-[12px] font-light ${He?"bg-sky-50":""}`,onClick:()=>G(!0),children:n("create_prescription","Create Prescription")})}),u.jsx(zg.Item,{children:({active:He})=>u.jsx("button",{className:`w-full text-left px-4 py-2 text-[12px] font-light ${He?"bg-sky-50":""}`,onClick:()=>J(!0),children:n("view_prescription_history","View Prescription History")})})]})})]})]})}),u.jsxs("div",{className:"w-full flex-1 flex flex-col min-h-0",children:[u.jsxs("div",{ref:Z,className:"flex-1 overflow-y-auto px-3 sm:px-4 pb-28 min-h-0 hide-scrollbar",style:{paddingTop:12},onScroll:we,children:[R<I.length&&u.jsx("div",{className:"flex justify-center py-4",children:u.jsx("button",{onClick:()=>F(He=>Math.min(He+50,I.length)),className:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 px-3 py-1 rounded-full transition-colors",children:n("load_more_messages","Load {count} more messages",{count:Math.min(50,I.length-R)})})}),E?u.jsxs("div",{className:"space-y-4",children:[u.jsx(Nw,{}),u.jsxs("div",{className:"flex flex-col items-end w-full mb-2 animate-pulse",children:[u.jsx("div",{className:"bg-blue-200 dark:bg-blue-700 rounded-2xl h-10 w-40 mb-1"}),u.jsx("div",{className:"bg-blue-200 dark:bg-blue-700 rounded-2xl h-6 w-24"})]}),u.jsx(Nw,{}),u.jsx("div",{className:"flex flex-col items-end w-full mb-2 animate-pulse",children:u.jsx("div",{className:"bg-blue-200 dark:bg-blue-700 rounded-2xl h-8 w-56 mb-1"})}),u.jsx(Nw,{})]}):Re.length===0?u.jsx("div",{className:"flex justify-center items-center py-12",children:u.jsxs("div",{className:"text-gray-400 dark:text-gray-500 text-sm text-center",children:[u.jsx("div",{className:"text-lg mb-2",children:""}),n("start_conversation","Start your conversation")]})}):(()=>{let He=null;return Re.map(ut=>{const Ct=ut.senderId===t?.uid,Et=ut.createdAt?.seconds?new Date(ut.createdAt.seconds*1e3):null;let Le=!1;if(Et){const Ye=Et.toDateString();He!==Ye&&(Le=!0,He=Ye)}return u.jsxs(Is.Fragment,{children:[Le&&Et&&u.jsx("div",{className:"flex justify-center my-4 mb-3",children:u.jsx("span",{className:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 text-[9px] font-light px-2 py-0.5 rounded-md opacity-80",children:g4e(Et,n)})}),u.jsxs("div",{className:`flex flex-col items-${Ct?"end":"start"} w-full mb-1.5`,children:[u.jsx("div",{className:`${Ct?"bg-blue-500 text-white ml-8":"bg-white dark:bg-gray-800 text-gray-900 dark:text-white mr-8 border border-gray-200 dark:border-gray-600 dark:border-gray-700"} px-2.5 py-1.5 max-w-[75%] sm:max-w-[65%] whitespace-pre-wrap break-words shadow-sm`,style:{borderRadius:Ct?"10px 10px 2px 10px":"10px 10px 10px 2px",fontSize:13,lineHeight:1.2},children:u.jsx(Is.Suspense,{fallback:u.jsx("span",{children:ut.text}),children:u.jsx(p4e,{text:ut.text,isMine:Ct})})}),ut.prescriptionId&&u.jsxs("div",{className:"mt-1",children:[u.jsx(d4e,{prescriptionId:ut.prescriptionId})," "]}),u.jsxs("div",{className:`flex items-center text-[9px] text-gray-400 dark:text-gray-500 mt-0.5 ${Ct?"mr-2 justify-end":"ml-2 justify-start"}`,children:[u.jsx("span",{children:Et?Et.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""}),u.jsx(L$,{message:ut,isMine:Ct,showReadReceipts:pe,t:n})]})]})]},ut.id)})})(),u.jsx("div",{ref:V})]}),u.jsx("div",{className:"w-full sticky bottom-0 z-20 bg-white/85 dark:bg-gray-900/85 backdrop-blur",style:{paddingBottom:"env(safe-area-inset-bottom, 0)",width:"100vw",marginLeft:"calc(50% - 50vw)",paddingLeft:"env(safe-area-inset-left, 0)",paddingRight:"env(safe-area-inset-right, 0)"},children:u.jsxs("div",{className:"w-full",children:[u.jsxs("form",{className:"mx-4 sm:mx-5 flex items-center gap-3 py-3",onSubmit:He=>{He.preventDefault(),ot()},children:[u.jsx("label",{className:"flex items-center cursor-not-allowed opacity-40",title:n("attachments_coming_soon","Attachments coming soon"),children:u.jsx(Cie,{className:"h-5 w-5 text-gray-400"})}),u.jsx("input",{value:K,onChange:He=>W(He.target.value),placeholder:n("message_placeholder","Message"),className:"flex-1 min-w-0 outline-none px-3 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 dark:border-gray-600 rounded-full placeholder:text-gray-400 dark:placeholder:text-gray-500 placeholder:text-[14px] focus:border-blue-400 dark:focus:border-blue-500 focus:ring-1 focus:ring-blue-200 dark:focus:ring-blue-800 transition-all duration-200",style:{fontSize:14}}),u.jsx("button",{type:"submit",className:`flex items-center justify-center w-8 h-8 rounded-full transition-all duration-200 ${K.trim()?"bg-blue-500 hover:bg-blue-600 active:scale-95":"bg-gray-300 cursor-not-allowed"}`,disabled:!K.trim(),children:u.jsx("img",{src:Yye,alt:"Send",className:"h-4 w-4"})})]}),u.jsx("div",{style:{height:8}})]})})]}),u.jsx(Is.Suspense,{fallback:null,children:u.jsx(h4e,{open:te,onClose:()=>G(!1),products:P,onSubmit:Be})}),u.jsx(M_,{open:X,onClose:()=>J(!1),children:u.jsx(Is.Suspense,{fallback:null,children:u.jsx(f4e,{chatThreadId:p,products:P,userId:t?.uid})})})]})]})}class x4e{constructor(){this.audio=null,this.permissionRequested=!1,this.notificationQueue=[],this.isProcessing=!1,this.initializeAudio(),this.requestPermissionOnUserInteraction()}initializeAudio(){try{this.audio=new Audio("/src/assets/message-tone.mp3"),this.audio.volume=.6,this.audio.preload="auto"}catch(e){console.warn("Notification audio not available:",e)}}requestPermissionOnUserInteraction(){if(!("Notification"in window)){console.warn("This browser does not support notifications");return}const e=()=>{!this.permissionRequested&&Notification.permission==="default"&&(this.permissionRequested=!0,Notification.requestPermission().then(r=>{console.log("Notification permission:",r)}))};document.addEventListener("click",e,{once:!0}),document.addEventListener("keydown",e,{once:!0}),document.addEventListener("touchstart",e,{once:!0})}playSound(){if(this.audio)try{this.audio.currentTime=0,this.audio.play().catch(e=>{console.warn("Could not play notification sound:",e)})}catch(e){console.warn("Audio playback error:",e)}}showNotification(e,r={}){if(!("Notification"in window)||Notification.permission!=="granted")return null;const n={icon:"/favicon.ico",badge:"/favicon.ico",requireInteraction:!1,silent:!1,...r};try{const s=new Notification(e,n);return n.requireInteraction||setTimeout(()=>{s&&s.close()},8e3),s.onclick=()=>{window.focus(),s.close(),r.onClick&&r.onClick()},s}catch(s){return console.error("Error showing notification:",s),null}}queueNotification(e){this.notificationQueue.push(e),this.processQueue()}async processQueue(){if(!(this.isProcessing||this.notificationQueue.length===0)){for(this.isProcessing=!0;this.notificationQueue.length>0;){const e=this.notificationQueue.shift();await this.processNotification(e),this.notificationQueue.length>0&&await new Promise(r=>setTimeout(r,1e3))}this.isProcessing=!1}}async processNotification(e){const{type:r,data:n,options:s={}}=e,i=document.hidden||s.force;switch(i&&this.playSound(),r){case"order_received":return this.handleOrderReceived(n,i);case"order_status_updated":return this.handleOrderStatusUpdated(n,i);case"message_received":return this.handleMessageReceived(n,i);case"prescription_ready":return this.handlePrescriptionReady(n,i);default:console.warn("Unknown notification type:",r)}}handleOrderReceived(e,r){const n=" New Order Received!",s=`Order #${e.id?.slice(-8)} - ${(e.total||0).toLocaleString()} from ${e.customerName||"Customer"}`;if(r)return this.showNotification(n,{body:s,tag:"order-received",icon:"/favicon.ico",onClick:()=>{window.location.hash="#/orders"}})}handleOrderStatusUpdated(e,r){const s={confirmed:" Order Confirmed",preparing:" Order Being Prepared",ready:" Order Ready for Pickup",completed:" Order Completed",cancelled:" Order Cancelled"}[e.status]||" Order Updated",i=`Order #${e.id?.slice(-8)} - ${e.pharmacyName||"Pharmacy"}`;if(r)return this.showNotification(s,{body:i,tag:"order-status",icon:"/favicon.ico",onClick:()=>{window.location.hash="#/orders"}})}handleMessageReceived(e,r){const n=` ${e.senderName||"New Message"}`,s=e.text?.slice(0,100)+(e.text?.length>100?"...":"")||"Sent an attachment";if(r)return this.showNotification(n,{body:s,tag:"message",icon:"/favicon.ico",onClick:()=>{window.location.hash="#/messages"}})}handlePrescriptionReady(e,r){const n=" Prescription Ready",s=`Your prescription is ready for pickup at ${e.pharmacyName}`;if(r)return this.showNotification(n,{body:s,tag:"prescription",icon:"/favicon.ico",requireInteraction:!0,onClick:()=>{window.location.hash="#/orders"}})}notifyOrderReceived(e){this.queueNotification({type:"order_received",data:e})}notifyOrderStatusUpdated(e){this.queueNotification({type:"order_status_updated",data:e})}notifyMessageReceived(e){this.queueNotification({type:"message_received",data:e})}notifyPrescriptionReady(e){this.queueNotification({type:"prescription_ready",data:e})}get isSupported(){return"Notification"in window}get isPermitted(){return this.isSupported&&Notification.permission==="granted"}get permissionStatus(){return this.isSupported?Notification.permission:"not-supported"}}const $u=new x4e;function y4e(){const[t,e]=j.useState($u.permissionStatus),[r,n]=j.useState(!1);j.useEffect(()=>{e($u.permissionStatus);const d=setInterval(()=>{e($u.permissionStatus)},1e3);return()=>clearInterval(d)},[]);const s=async()=>{if(!$u.isSupported){alert("Notifications are not supported in this browser");return}try{const c=await Notification.requestPermission();e(c)}catch(c){console.error("Error requesting notification permission:",c)}},i=()=>{if(!$u.isPermitted){alert("Please enable notifications first");return}$u.showNotification(" Test Notification",{body:"This is a test notification from PharmaSeaHealth",tag:"test",requireInteraction:!1}),n(!0),setTimeout(()=>n(!1),3e3)},a=()=>{switch(t){case"granted":return u.jsx(um,{className:"h-5 w-5 text-green-500"});case"denied":return u.jsx(mie,{className:"h-5 w-5 text-red-500"});case"default":return u.jsx(Jg,{className:"h-5 w-5 text-yellow-500"});default:return u.jsx(HS,{className:"h-5 w-5 text-gray-500"})}},o=()=>{switch(t){case"granted":return"Notifications enabled";case"denied":return"Notifications blocked";case"default":return"Permission not requested";case"not-supported":return"Not supported in this browser";default:return"Unknown status"}},l=()=>{switch(t){case"granted":return"You will receive notifications for new orders, messages, and order updates.";case"denied":return"Notifications are blocked. You can enable them in your browser settings.";case"default":return"Click the button below to enable notifications for orders and messages.";case"not-supported":return"Your browser does not support push notifications.";default:return"Unable to determine notification status."}};return u.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(Jg,{className:"h-6 w-6 text-blue-600"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notification Settings"})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a(),u.jsx("span",{className:"font-medium text-gray-900",children:o()})]}),u.jsx("p",{className:"text-sm text-gray-600",children:l()})]}),u.jsxs("div",{className:"space-y-3",children:[t==="default"&&u.jsxs("button",{onClick:s,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[u.jsx(Jg,{className:"h-4 w-4"}),"Enable Notifications"]}),t==="granted"&&u.jsx("button",{onClick:i,disabled:r,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 ${r?"bg-green-100 text-green-800 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:r?u.jsxs(u.Fragment,{children:[u.jsx(um,{className:"h-4 w-4"}),"Test Sent!"]}):u.jsxs(u.Fragment,{children:[u.jsx(Jg,{className:"h-4 w-4"}),"Send Test Notification"]})}),t==="denied"&&u.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Sie,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),u.jsxs("div",{className:"text-sm",children:[u.jsx("p",{className:"font-medium text-red-800 mb-1",children:"How to enable notifications:"}),u.jsxs("ol",{className:"text-red-700 space-y-1 list-decimal list-inside",children:[u.jsx("li",{children:"Click the lock icon in your browser's address bar"}),u.jsx("li",{children:'Select "Allow" for notifications'}),u.jsx("li",{children:"Refresh the page"})]})]})]})})]}),u.jsxs("div",{className:"mt-6 pt-6 border-t",children:[u.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"You'll be notified about:"}),u.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(um,{className:"h-4 w-4 text-green-500"}),u.jsx("span",{children:"New orders received (Pharmacies)"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(um,{className:"h-4 w-4 text-green-500"}),u.jsx("span",{children:"Order status updates (Customers)"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(um,{className:"h-4 w-4 text-green-500"}),u.jsx("span",{children:"New messages in chats"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(um,{className:"h-4 w-4 text-green-500"}),u.jsx("span",{children:"Prescription ready for pickup"})]})]})]})]})}const v4e=({title:t,onBackClick:e})=>Ki.createPortal(u.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:u.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:e,className:"rounded-full p-2 hover:bg-sky-50 transition-all duration-200","aria-label":"Go back",children:u.jsx(du,{className:"h-5 w-5 text-sky-600 mt-8"})}),u.jsx("h1",{className:"mt-8 text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-light font-poppins leading-none text-gray-900 dark:text-white",children:"Settings"})]})})}),document.body);function w4e(){const t=Jn(),{user:e}=Dn(),{getSetting:r,updateSetting:n,resetSettings:s}=ny(),[i,a]=j.useState({}),o=typeof window<"u"&&window.matchMedia&&window.matchMedia("(max-width: 1024px)").matches,l=c=>{n(Fr.SWIPE_NAVIGATION,c),console.log(c?"Swipe navigation enabled - swipe left/right to navigate between pages on mobile":"Swipe navigation disabled")};return u.jsxs(u.Fragment,{children:[u.jsx(v4e,{title:"Settings",onBackClick:()=>t(-1)}),u.jsx("div",{className:"pt-24 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen animate-fadeInUp",children:u.jsxs("div",{className:"mt-4 space-y-6",children:[u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"rounded-full bg-gray-100 p-2",children:u.jsx(v5,{className:"h-5 w-5 text-gray-600"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"General"}),u.jsx("p",{className:"text-sm text-gray-600",children:"App preferences and navigation settings"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between py-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Swipe Navigation"}),u.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Enable swipe gestures to navigate between pages on mobile devices",!o&&u.jsx("span",{className:" text-orange-500",children:" (Desktop - feature available on mobile only)"})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Fr.SWIPE_NAVIGATION),onChange:c=>l(c.target.checked)}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-600"})]})]}),r(Fr.SWIPE_NAVIGATION)&&o&&u.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mt-2",children:u.jsxs("p",{className:"text-xs text-gray-700",children:[u.jsx("span",{className:"font-medium",children:"How to use:"})," Swipe left or right anywhere on the screen to navigate between Home, Cart, Messages, and Orders pages."]})}),u.jsxs("div",{className:"flex items-center justify-between py-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Data Saver Mode"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Reduce bandwidth usage and optimize for slower connections"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Fr.DATA_SAVER_MODE),onChange:c=>n(Fr.DATA_SAVER_MODE,c.target.checked)}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-600"})]})]}),u.jsxs("div",{className:"flex items-center justify-between py-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Read Receipts"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Show when you've read messages in chats"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Fr.MESSAGE_READ_RECEIPTS),onChange:c=>n(Fr.MESSAGE_READ_RECEIPTS,c.target.checked)}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-600"})]})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.1s"},children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"rounded-full bg-orange-100 p-2",children:u.jsx(kie,{className:"h-5 w-5 text-orange-600"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"Language & Region"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Set your language and regional preferences"})]})]}),u.jsx("div",{className:"space-y-4",children:u.jsxs("div",{className:"flex items-center justify-between py-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"App Language"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose your preferred language"})]}),u.jsxs("select",{value:r(Fr.LANGUAGE),onChange:c=>n(Fr.LANGUAGE,c.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-orange-300",children:[u.jsx("option",{value:"en",children:"English"}),u.jsx("option",{value:"yo",children:"Yoruba"}),u.jsx("option",{value:"ha",children:"Hausa"}),u.jsx("option",{value:"ig",children:"Igbo"}),u.jsx("option",{value:"fr",children:"Franais"})]})]})})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.2s"},children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"rounded-full bg-purple-100 p-2",children:u.jsx(Eie,{className:"h-5 w-5 text-purple-600"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"Appearance"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Customize how the app looks and feels"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between py-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Theme"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose your preferred color scheme"})]}),u.jsxs("select",{value:r(Fr.THEME_MODE),onChange:c=>n(Fr.THEME_MODE,c.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-purple-300",children:[u.jsx("option",{value:"light",children:"Light"}),u.jsx("option",{value:"dark",children:"Dark"}),u.jsx("option",{value:"system",children:"System"})]})]}),u.jsxs("div",{className:"flex items-center justify-between py-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Font Size"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Adjust text size for better readability"})]}),u.jsxs("select",{value:r(Fr.FONT_SIZE),onChange:c=>n(Fr.FONT_SIZE,c.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-purple-300",children:[u.jsx("option",{value:"small",children:"Small"}),u.jsx("option",{value:"medium",children:"Medium"}),u.jsx("option",{value:"large",children:"Large"})]})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.3s"},children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"rounded-full bg-blue-100 p-2",children:u.jsx(ty,{className:"h-5 w-5 text-blue-600"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"Accessibility"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Make the app easier to use for everyone"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between py-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"High Contrast"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Increase contrast for better visibility"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Fr.HIGH_CONTRAST),onChange:c=>n(Fr.HIGH_CONTRAST,c.target.checked)}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),u.jsxs("div",{className:"flex items-center justify-between py-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Reduce Motion"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimize animations and transitions"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Fr.REDUCE_MOTION),onChange:c=>n(Fr.REDUCE_MOTION,c.target.checked)}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.4s"},children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"rounded-full bg-sky-100 p-2",children:u.jsx(Jg,{className:"h-5 w-5 text-sky-600"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"Notifications"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Manage your notification preferences"})]})]}),u.jsx("div",{className:"pl-0",children:u.jsx(y4e,{})})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.5s"},children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"rounded-full bg-green-100 p-2",children:u.jsx(WS,{className:"h-5 w-5 text-green-600"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"Privacy & Security"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Control your data and security settings"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between py-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Biometric Login"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use fingerprint or face recognition to unlock"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Fr.BIOMETRIC_LOGIN),onChange:c=>n(Fr.BIOMETRIC_LOGIN,c.target.checked)}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]})]}),u.jsxs("div",{className:"flex items-center justify-between py-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Auto Lock"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lock app after period of inactivity"})]}),u.jsxs("select",{value:r(Fr.AUTO_LOCK),onChange:c=>n(Fr.AUTO_LOCK,c.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-300",children:[u.jsx("option",{value:"1min",children:"1 minute"}),u.jsx("option",{value:"5min",children:"5 minutes"}),u.jsx("option",{value:"15min",children:"15 minutes"}),u.jsx("option",{value:"never",children:"Never"})]})]}),u.jsxs("div",{className:"flex items-center justify-between py-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Location Sharing"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose location accuracy for deliveries"})]}),u.jsxs("select",{value:r(Fr.LOCATION_PRECISION),onChange:c=>n(Fr.LOCATION_PRECISION,c.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-300",children:[u.jsx("option",{value:"precise",children:"Precise"}),u.jsx("option",{value:"approximate",children:"Approximate"}),u.jsx("option",{value:"off",children:"Off"})]})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-red-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.6s"},children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"rounded-full bg-red-100 p-2",children:u.jsx(v5,{className:"h-5 w-5 text-red-600"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-red-600 font-poppins",children:"Reset Settings"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Restore all settings to their default values"})]})]}),u.jsx("div",{className:"space-y-4",children:u.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[u.jsxs("p",{className:"text-sm text-red-700 mb-3",children:[u.jsx("span",{className:"font-medium",children:"Warning:"})," This will reset all your preferences including theme, language, navigation settings, and accessibility options. This action cannot be undone."]}),u.jsx("button",{onClick:()=>{confirm("Are you sure you want to reset all settings to default? This cannot be undone.")&&s()},className:"w-full px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors",children:"Reset All Settings"})]})})]})]})})]})}function ru({children:t}){const{user:e,loading:r}=Dn();return r?u.jsx("div",{className:"p-6",children:"Loading"}):e?t:u.jsx("div",{className:"p-6",children:"Please sign in to continue."})}function j$(){const{user:t,profile:e}=Dn(),r=Nl(),n=j.useRef({});return j.useEffect(()=>{if(!(!t?.uid||!e?.role))return j_({uid:t.uid,role:e.role},s=>{s.forEach(i=>{if(!i.id)return;const a=_r(Zt(ht,"threads",i.id,"messages"),Yi("createdAt","desc"),cd(1));In(a,o=>{if(o.empty)return;const l={id:o.docs[0].id,...o.docs[0].data()},c=l.senderId===t.uid;let d=!1;if(r.pathname.startsWith("/chat/")){const p=r.pathname.split("/chat/")[1]?.split("/")[0];e.role==="customer"?i.id===`${p}__${t.uid}`&&(d=!0):i.id.startsWith(`${t.uid}__`)&&(d=!0)}if(r.pathname==="/messages"){const g=new URLSearchParams(r.search).get("chat");g&&(e.role==="customer"?i.id===`${g}__${t.uid}`&&(d=!0):i.id===`${t.uid}__${g}`&&(d=!0))}if(!c&&n.current[i.id]!==l.id&&!d){const p=e.role==="customer"?i.pharmacyName||"Pharmacy":i.customerName||"Customer",g={...l,senderName:p,threadId:i.id};$u.notifyMessageReceived(g)}n.current[i.id]=l.id})})},s=>console.error("GlobalMessageNotifier error:",s))},[t?.uid,e?.role,r.pathname,r.search]),null}function _4e(){const{user:t,profile:e}=Dn(),r=j.useRef({}),n=j.useRef(!1);return j.useEffect(()=>{if(!t?.uid||!e||e.role!=="customer")return;const s=e.uid||t.uid,i=_r(Zt(ht,"orders"),jr("customerId","==",s),Yi("updatedAt","desc")),a=In(i,o=>{if(!n.current){o.docs.forEach(l=>{const c={id:l.id,...l.data()};r.current[c.id]=c.status}),n.current=!0;return}o.docChanges().forEach(l=>{if(l.type==="modified"){const c={id:l.doc.id,...l.doc.data()},d=r.current[c.id];d&&d!==c.status&&($u.notifyOrderStatusUpdated(c),c.status==="ready"&&c.type==="prescription"&&$u.notifyPrescriptionReady({...c,pharmacyName:c.pharmacyName||"Pharmacy"})),r.current[c.id]=c.status}if(l.type==="added"){const c={id:l.doc.id,...l.doc.data()};r.current[c.id]=c.status}})},o=>{console.error("Error listening for customer order notifications:",o)});return()=>a()},[t,e]),null}function b4e(){const{profile:t}=Dn();return u.jsxs(u.Fragment,{children:[u.jsx(j$,{}),t?.role==="customer"&&u.jsx(_4e,{})]})}function k4e({order:t,isOpen:e,onClose:r,onViewOrder:n}){const[s,i]=j.useState(!1),{profile:a}=Dn();j.useEffect(()=>{if(e){i(!0);const c=setTimeout(()=>{o()},1e4);return()=>clearTimeout(c)}else i(!1)},[e]);const o=()=>{i(!1),setTimeout(()=>r(),300)},l=()=>{n(t),o()};return!e||!t?null:u.jsx(u.Fragment,{children:u.jsx("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-300 ${s?"translate-y-0 opacity-100 scale-100":"-translate-y-4 opacity-0 scale-95"}`,children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-blue-200 dark:border-gray-600 mx-4 overflow-hidden card-interactive hover:shadow-3xl transition-all duration-300",style:{width:"393px"},children:[u.jsxs("div",{className:"bg-gradient-to-r from-sky-300 to-sky-600 px-6 py-4 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-white/10 animate-pulse"}),u.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center animate-bounce",children:u.jsx("span",{className:"text-white text-lg",children:""})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-white font-semibold text-lg animate-text-reveal",children:"New Order Received!"}),u.jsx("p",{className:"text-green-100 text-sm animate-fade-in",style:{animationDelay:"0.1s"},children:"You have a new customer order"})]})]})]}),u.jsxs("div",{className:"px-4 py-3 animate-fade-in-up",style:{animationDelay:"0.2s"},children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between items-start gap-3",children:[u.jsxs("div",{className:"flex-1 min-w-0 animate-slide-up",style:{animationDelay:"0.3s"},children:[u.jsx("p",{className:"text-gray-600 text-xs",children:"Order ID"}),u.jsxs("p",{className:"font-medium text-gray-900 text-sm truncate",children:["#",t.id?.slice(-8)||"N/A"]})]}),u.jsxs("div",{className:"flex-1 min-w-0 animate-slide-up",style:{animationDelay:"0.4s"},children:[u.jsx("p",{className:"text-gray-600 text-xs",children:"Customer"}),u.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:t.customerName||"Unknown Customer"})]}),u.jsxs("div",{className:"text-right flex-shrink-0 animate-slide-up",style:{animationDelay:"0.5s"},children:[u.jsx("p",{className:"text-gray-600 text-xs",children:"Total"}),u.jsxs("p",{className:"font-bold text-green-600 text-sm animate-pulse-slow",children:["",(t.total||0).toLocaleString()]})]})]}),t.items&&t.items.length>0||t.orderItems&&t.orderItems.length>0||t.products&&t.products.length>0?u.jsxs("div",{className:"border-t pt-3 animate-fade-in",style:{animationDelay:"0.6s"},children:[u.jsxs("p",{className:"text-gray-600 text-xs mb-2",children:["Items (",t.items?.length||t.orderItems?.length||t.products?.length||0,")"]}),u.jsxs("div",{className:"max-h-24 overflow-y-auto space-y-1",children:[(t.items||t.orderItems||t.products||[]).slice(0,3).map((c,d)=>u.jsxs("div",{className:"flex justify-between items-center text-xs gap-2 py-0.5 animate-fadeInUp",style:{animationDelay:`${.7+d*.1}s`},children:[u.jsx("span",{className:"text-gray-700 flex-1 leading-tight font-medium truncate",children:c.name||c.productName||c.title||c.itemName||`Item ${d+1}`}),u.jsxs("span",{className:"text-gray-600 text-right whitespace-nowrap font-semibold bg-gray-100 px-1.5 py-0.5 rounded text-xs flex-shrink-0 hover:bg-gray-200 transition-colors duration-200",children:["x",c.quantity||c.qty||c.amount||1]})]},d)),(t.items?.length||t.orderItems?.length||t.products?.length||0)>3&&u.jsxs("p",{className:"text-xs text-gray-500 italic mt-1 text-center bg-gray-50 py-0.5 rounded animate-fade-in",children:["+",(t.items?.length||t.orderItems?.length||t.products?.length||0)-3," more items"]})]})]}):u.jsxs("div",{className:"border-t pt-3 animate-fade-in",style:{animationDelay:"0.6s"},children:[u.jsx("p",{className:"text-gray-600 text-xs mb-2",children:"Items"}),u.jsx("p",{className:"text-gray-500 text-xs italic",children:"No items found"})]}),u.jsxs("div",{className:"border-t pt-2 flex justify-between items-center animate-fade-in",style:{animationDelay:"0.8s"},children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-600 text-xs",children:"Status"}),u.jsx("span",{className:"inline-block px-2 py-0.5 bg-orange-100 text-orange-700 text-xs rounded-full font-medium mt-0.5 animate-bounce-gentle",children:t.status||"Pending"})]}),u.jsx("div",{className:"text-right text-xs text-gray-500",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),u.jsxs("div",{className:"flex gap-2 mt-4 pt-3 border-t animate-fade-in-up",style:{animationDelay:"0.9s"},children:[u.jsx("button",{onClick:l,className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium text-xs transition-all duration-200 shadow-lg hover:shadow-xl btn-interactive hover:scale-105 active:scale-95",children:"View Details"}),u.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium text-xs transition-all duration-200 btn-interactive hover:scale-105 active:scale-95",children:"Dismiss"})]})]}),u.jsx("button",{onClick:o,className:"absolute top-3 right-3 w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center text-white transition-all duration-200 hover:scale-110 active:scale-95",children:u.jsx("span",{className:"text-lg",children:""})}),u.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-gray-200 w-full",children:u.jsx("div",{className:"h-full bg-green-500 transition-all duration-[10000ms] ease-linear animate-progress-bar",style:{width:s?"0%":"100%"}})})]})})})}function S4e(){const[t,e]=j.useState(null),[r,n]=j.useState(!1),{profile:s,user:i}=Dn(),a=j.useRef(null),o=j.useRef(!0);return j.useEffect(()=>{if(!s||s.role!=="pharmacy")return;const d=s.uid||i?.uid;if(!d)return;o.current&&(a.current=new Date,o.current=!1);const p=_r(Zt(ht,"orders"),jr("pharmacyId","==",d),Yi("createdAt","desc"),cd(1)),g=In(p,m=>{m.empty||m.docChanges().forEach(y=>{if(y.type==="added"){const w={id:y.doc.id,...y.doc.data()},_=w.createdAt?.toDate()||new Date;a.current&&_>a.current&&($u.notifyOrderReceived(w),e(w),n(!0))}})},m=>{console.error("Error listening for order notifications:",m)});return()=>g()},[s,i]),{newOrder:t,showNotification:r,clearNotification:()=>{n(!1),e(null)},viewOrder:d=>d}}const E4e=[{value:"all",label:"All"},{value:"draft",label:"Draft"},{value:"pending",label:"Pending"},{value:"in_review",label:"In Review"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"needs_more_info",label:"Needs Info"}],cR={draft:"Draft",pending:"Pending",in_review:"In Review",approved:"Approved",rejected:"Rejected",needs_more_info:"Needs Info"},uR={draft:"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300",pending:"bg-amber-100 text-amber-700",in_review:"bg-sky-100 text-sky-700",approved:"bg-emerald-100 text-emerald-700",rejected:"bg-rose-100 text-rose-700",needs_more_info:"bg-amber-100 text-amber-700"},dR={high:"bg-red-100 text-red-700",medium:"bg-amber-100 text-amber-700",low:"bg-emerald-100 text-emerald-700"};function Rb(t){if(!t)return"--";try{return(typeof t?.toDate=="function"?t.toDate():new Date(t)).toLocaleString()}catch(e){return console.warn("[VerificationQueue] Failed to format date",e),"--"}}function C4e({items:t,onUpdateStatus:e,onAssign:r,onAddAuditEntry:n}){const[s,i]=j.useState(""),[a,o]=j.useState("all"),[l,c]=j.useState(null),[d,p]=j.useState(""),g=j.useMemo(()=>{const _=s.trim().toLowerCase();return(t||[]).filter(S=>(a==="all"?!0:S?.status===a)?_?[S?.entityName,S?.contactEmail,S?.contactPhone,S?.submittedBy,S?.applicationId,S?.applicantType].filter(Boolean).join(" ").toLowerCase().includes(_):!0:!1)},[t,s,a]),m=_=>{!l||typeof e!="function"||(e(l,_,d||void 0),p(""))},y=_=>{!l||typeof r!="function"||r(l,_)},w=()=>{!l||!d?.trim()||typeof n!="function"||(n(l,d.trim()),p(""))};return u.jsxs("div",{className:"flex flex-col gap-6",children:[u.jsxs("header",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Verification Queue"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Track onboarding submissions, assign reviewers, and finalize approvals."})]}),u.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[u.jsx("input",{type:"search",placeholder:"Search applicant, email, or ID",value:s,onChange:_=>i(_.target.value),className:"w-full rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-700 shadow-sm outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:focus:ring-slate-700 sm:w-72"}),u.jsx("select",{value:a,onChange:_=>o(_.target.value),className:"rounded-full border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:focus:ring-slate-700",children:E4e.map(_=>u.jsx("option",{value:_.value,children:_.label},_.value))})]})]}),u.jsxs("section",{className:"overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[u.jsxs("div",{className:"hidden border-b border-slate-200 bg-slate-50 px-6 py-3 text-xs font-medium uppercase tracking-wide text-slate-500 dark:border-slate-800 dark:bg-slate-800/50 md:grid md:grid-cols-12",children:[u.jsx("span",{className:"col-span-3",children:"Applicant"}),u.jsx("span",{className:"col-span-2",children:"Submitted"}),u.jsx("span",{className:"col-span-2",children:"Status"}),u.jsx("span",{className:"col-span-2",children:"Reviewer"}),u.jsx("span",{className:"col-span-3 text-right",children:"Actions"})]}),g.length===0?u.jsx("div",{className:"px-6 py-16 text-center text-sm text-slate-500 dark:text-slate-400",children:"No submissions match your filters."}):u.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-800",children:g.map(_=>u.jsxs("li",{className:"grid gap-4 px-4 py-4 transition hover:bg-slate-50 dark:hover:bg-slate-800/30 md:grid-cols-12 md:items-center md:px-6",children:[u.jsxs("div",{className:"md:col-span-3",children:[u.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:_.entityName||_.submittedBy||"Unnamed Applicant"}),u.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[_.applicantType||"pharmacy"," |"," ",_.applicationId||_.id]}),_.priority&&u.jsxs("span",{className:`mt-2 inline-block rounded-full px-2 py-0.5 text-[11px] font-semibold uppercase ${dR[_.priority]||dR.low}`,children:[_.priority," priority"]})]}),u.jsx("div",{className:"md:col-span-2",children:u.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:Rb(_.submittedAt)})}),u.jsx("div",{className:"md:col-span-2",children:(()=>{const S=(_.status||"pending").toLowerCase(),T=cR[S]||S||"Pending",I=uR[S]||"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300";return u.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-medium capitalize ${I}`,children:T})})()}),u.jsx("div",{className:"md:col-span-2",children:u.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:_.assignedTo||"Unassigned"})}),u.jsx("div",{className:"flex items-center justify-end gap-2 md:col-span-3",children:u.jsx("button",{type:"button",onClick:()=>{c(_),p(_.reviewerNote||"")},className:"rounded-full border border-slate-200 px-4 py-2 text-xs font-medium text-slate-700 transition hover:border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800",children:"View"})})]},_.id))})]}),u.jsx(M_,{open:!!l,onClose:()=>{c(null),p("")},children:l&&u.jsxs("div",{className:"flex flex-col gap-6",children:[u.jsxs("header",{className:"space-y-2",children:[u.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:["Application #",l.applicationId||l.id]}),u.jsx("h3",{className:"mt-1 text-2xl font-semibold text-slate-900 dark:text-white",children:l.entityName||l.submittedBy||"Unnamed"}),(()=>{const _=(l.status||"pending").toLowerCase(),S=cR[_]||_||"Pending",T=uR[_]||"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300";return u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-wide ${T}`,children:S}),u.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-300",children:["Assigned to"," ",u.jsx("strong",{children:l.assignedTo||"Unassigned"})]})]})})(),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-300",children:[l.applicantType||"pharmacy"," | Submitted"," ",Rb(l.submittedAt)]})]}),u.jsxs("section",{className:"grid gap-4 rounded-2xl bg-slate-50 p-4 dark:bg-slate-900/50 sm:grid-cols-2",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-xs font-semibold uppercase text-slate-500",children:"Contact"}),u.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-slate-700 dark:text-slate-200",children:[u.jsx("li",{children:l.contactName}),u.jsx("li",{children:l.contactEmail}),u.jsx("li",{children:l.contactPhone})]})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-xs font-semibold uppercase text-slate-500",children:"Location"}),u.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-slate-700 dark:text-slate-200",children:[u.jsx("li",{children:l.location?.addressLine1}),u.jsx("li",{children:l.location?.city}),u.jsx("li",{children:l.location?.state})]})]})]}),Array.isArray(l.documents)&&l.documents.length>0&&u.jsxs("section",{children:[u.jsx("h4",{className:"text-xs font-semibold uppercase text-slate-500",children:"Submitted Documents"}),u.jsx("ul",{className:"mt-2 space-y-2",children:l.documents.map(_=>u.jsxs("li",{className:"flex items-center justify-between rounded-xl bg-white px-4 py-3 text-sm text-slate-700 shadow-sm dark:bg-slate-900 dark:text-slate-200",children:[u.jsx("span",{children:_.label||_.name}),_.url&&u.jsx("a",{href:_.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs font-semibold text-sky-500 hover:text-sky-600",children:"View"})]},_.url||_.name))})]}),l.checklist&&u.jsxs("section",{children:[u.jsx("h4",{className:"text-xs font-semibold uppercase text-slate-500",children:"Verification Checklist"}),u.jsx("div",{className:"mt-2 grid gap-2 sm:grid-cols-2",children:Object.entries(l.checklist).map(([_,S])=>u.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-700 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200",children:[u.jsx("span",{className:"capitalize",children:_.replace(/[_-]/g," ")}),u.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-semibold uppercase ${S===!0||S==="passed"?"bg-emerald-100 text-emerald-700":S===!1||S==="failed"?"bg-rose-100 text-rose-700":"bg-amber-100 text-amber-700"}`,children:typeof S=="boolean"?S?"passed":"failed":S})]},_))})]}),u.jsxs("section",{children:[u.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"Internal note"}),u.jsx("textarea",{rows:3,value:d,onChange:_=>p(_.target.value),placeholder:"Add reviewer notes or checklist findings",className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:focus:ring-slate-700"}),u.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-slate-400",children:[u.jsx("button",{type:"button",onClick:w,disabled:!d?.trim(),className:"rounded-full bg-slate-100 px-3 py-1 font-medium text-slate-600 transition hover:bg-slate-200 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-700",children:"Add to audit log"}),typeof r=="function"&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"|"}),u.jsx("button",{type:"button",onClick:()=>y("self"),className:"rounded-full bg-slate-100 px-3 py-1 font-medium text-slate-600 transition hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-700",children:"Assign to me"})]})]})]}),Array.isArray(l.auditTrail)&&l.auditTrail.length>0&&u.jsxs("section",{children:[u.jsx("h4",{className:"text-xs font-semibold uppercase text-slate-500",children:"Audit trail"}),u.jsx("ul",{className:"mt-2 space-y-3 text-sm text-slate-600 dark:text-slate-300",children:l.auditTrail.map((_,S)=>u.jsxs("li",{className:"rounded-xl bg-slate-50 px-4 py-3 dark:bg-slate-900/50",children:[u.jsxs("p",{className:"font-medium text-slate-700 dark:text-slate-100",children:[_.actor||"System"," ",u.jsx("span",{className:"text-xs font-normal text-slate-400",children:Rb(_.timestamp)})]}),u.jsx("p",{children:_.message}),_.status&&u.jsx("span",{className:"mt-1 inline-flex rounded-full bg-slate-200 px-2 py-0.5 text-[11px] font-semibold uppercase text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:_.status})]},_.timestamp||S))})]}),u.jsxs("footer",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between sm:gap-4",children:[u.jsx("button",{type:"button",onClick:()=>c(null),className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:bg-slate-100 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800",children:"Close"}),u.jsxs("div",{className:"flex flex-1 flex-wrap justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:()=>m("needs_more_info"),className:"rounded-full border border-amber-300 bg-amber-50 px-4 py-2 text-sm font-semibold text-amber-700 transition hover:bg-amber-100 dark:border-amber-500/50 dark:bg-amber-500/10 dark:text-amber-300",children:"Request Docs"}),u.jsx("button",{type:"button",onClick:()=>m("rejected"),className:"rounded-full border border-rose-300 bg-rose-50 px-4 py-2 text-sm font-semibold text-rose-700 transition hover:bg-rose-100 dark:border-rose-500/50 dark:bg-rose-500/10 dark:text-rose-300",children:"Reject"}),u.jsx("button",{type:"button",onClick:()=>m("approved"),className:"rounded-full bg-emerald-500 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-emerald-600 focus:outline-none focus:ring-2 focus:ring-emerald-300 dark:bg-emerald-600 dark:hover:bg-emerald-500",children:"Approve"})]})]})]})})]})}const Hv=[{key:"users",label:"Users"},{key:"products",label:"Products"},{key:"prescriptions",label:"Prescriptions"},{key:"orders",label:"Orders"},{key:"carts",label:"Carts"},{key:"analytics",label:"Analytics"},{key:"moderation",label:"Moderation"},{key:"verification",label:"Verification"},{key:"export",label:"Export"},{key:"infoCards",label:"Info Cards"}],$g=3;function A4e(){const{user:t,logout:e}=Dn(),[r,n]=j.useState([]),[s,i]=j.useState([]),[a,o]=j.useState([]),[l,c]=j.useState([]),[d,p]=j.useState([]),[g,m]=j.useState([]),[y,w]=j.useState([]),[_,S]=j.useState(!0),[T,I]=j.useState(!1),[M,K]=j.useState(!1),[W,L]=j.useState(null),[A,E]=j.useState(!1),[D,R]=j.useState(null),[F,V]=j.useState(null),[Z,fe]=j.useState(!1),[xe,he]=j.useState({displayName:"",email:"",address:"",phone:"",role:"",suspended:!1,password:""}),[ae,H]=j.useState({name:"",image:"",description:"",stock:"",price:"",sku:"",category:""}),[te,G]=j.useState({header:"",preview:"",link:"",linkText:"",image:"",fullImage:"",bgColor:"#f0f8ff"}),[P,U]=j.useState("users"),[X,J]=j.useState("profile"),[ie,ve]=j.useState([]),[ke,oe]=j.useState([]),[Ee,Oe]=j.useState([]),[ne,we]=j.useState([]),[Re,pe]=j.useState(0),[Ke,ze]=j.useState(""),[ot,Be]=j.useState(""),He=j.useRef(null);Jn();const ut=(le,je)=>{const We={actor:t?.displayName||t?.email||"System",message:le,timestamp:new Date};return je&&(We.status=je),We},Ct=async(le,je)=>{if(!le?.submittedByUid)return;const We=je==="approved",lt=_s(),yt={verificationStatus:je,verificationUpdatedAt:lt,isVerified:We,...We?{verifiedAt:lt}:{verifiedAt:L6()}};try{await Promise.all([us(er(ht,"pharmacies",le.submittedByUid),yt).catch($t=>console.error("[SuperuserDashboard] Failed to sync pharmacy verification status",$t)),us(er(ht,"users",le.submittedByUid),yt).catch($t=>console.error("[SuperuserDashboard] Failed to sync user verification status",$t))])}catch($t){console.error("[SuperuserDashboard] Verification sync failed",$t)}},Et=async(le,je)=>{if(le)try{const We=_r(Zt(ht,"threads"),jr("vendorId","==",le)),lt=await wn(We),yt=je==="approved";await Promise.all(lt.docs.map($t=>us($t.ref,{vendorIsVerified:yt,vendorVerificationStatus:je})))}catch(We){console.error("[SuperuserDashboard] Failed to update vendor thread verification flag",We)}},Le=async(le,je,We)=>{if(le?.id)try{const lt=er(ht,"verificationQueue",le.id),yt=We?.trim()||"",$t=_s(),Xt=je==="draft",At={status:je,updatedAt:$t,draft:Xt,draftStep:Xt?le?.draftStep??0:null,...yt?{reviewerNote:yt}:{},auditTrail:_2(ut(`Status changed to ${je}${yt?` - ${yt}`:""}`,je))};Xt||(At.submittedAt=le?.submittedAt||$t),je==="approved"?(At.approvedAt=$t,At.draft=!1,At.draftStep=null):je==="rejected"?(At.rejectedAt=$t,At.draft=!1,At.draftStep=null):(je==="needs_more_info"||je==="pending"||je==="in_review")&&(At.draft=!1,At.draftStep=null),!yt&&We!==void 0&&(At.reviewerNote=L6()),await us(lt,At),await Ct(le,je),await Et(le.submittedByUid,je)}catch(lt){console.error("[SuperuserDashboard] Failed to update verification status",lt)}},Ye=async(le,je)=>{if(!le?.id)return;const We=je==="self"?t?.displayName||t?.email||t?.uid:je;try{const lt=er(ht,"verificationQueue",le.id),yt=le.status==="pending"||le.status==="draft"?"in_review":le.status||"in_review";await us(lt,{assignedTo:We,status:yt,draft:!1,draftStep:null,auditTrail:_2(ut(`Assigned to ${We}`,"in_review")),updatedAt:_s()})}catch(lt){console.error("[SuperuserDashboard] Failed to assign verification",lt)}},Qe=async(le,je)=>{if(!(!le?.id||!je?.trim()))try{const We=er(ht,"verificationQueue",le.id);await us(We,{auditTrail:_2(ut(je.trim(),le.status||"pending")),updatedAt:_s()})}catch(We){console.error("[SuperuserDashboard] Failed to append verification audit entry",We)}};return j.useEffect(()=>{if(!t)return;S(!0);const le=In(Zt(ht,"users"),At=>{n(At.docs.map(Vt=>({id:Vt.id,...Vt.data()}))),S(!1)}),je=In(Zt(ht,"products"),At=>{i(At.docs.map(Vt=>({id:Vt.id,...Vt.data()})))}),We=In(Zt(ht,"prescriptions"),At=>{o(At.docs.map(Vt=>({id:Vt.id,...Vt.data()})))}),lt=In(Zt(ht,"orders"),At=>{c(At.docs.map(Vt=>({id:Vt.id,...Vt.data()})))}),yt=In(Zt(ht,"carts"),At=>{p(At.docs.map(Vt=>({id:Vt.id,...Vt.data()})))}),$t=In(Zt(ht,"infoCards"),At=>{m(At.docs.map(Vt=>({id:Vt.id,...Vt.data()})))}),Xt=In(Zt(ht,"verificationQueue"),At=>{w(At.docs.map(Vt=>({id:Vt.id,...Vt.data()})))});return()=>{le(),je(),We(),lt(),yt(),$t(),Xt()}},[t]),j.useEffect(()=>{let le=null,je=null,We=null;return W&&W.id?(he({displayName:W.displayName||"",email:W.email||"",address:W.address||"",phone:W.phone||"",role:W.role||"",suspended:W.role==="suspended",password:""}),le=In(_r(Zt(ht,"prescriptions"),jr("userId","==",W.id)),lt=>{ve(lt.docs.map(yt=>({id:yt.id,...yt.data()})))}),je=In(_r(Zt(ht,"orders"),jr("userId","==",W.id)),lt=>{oe(lt.docs.map(yt=>({id:yt.id,...yt.data()})))}),We=In(_r(Zt(ht,"carts"),jr("userId","==",W.id)),lt=>{Oe(lt.docs.map(yt=>({id:yt.id,...yt.data()})))})):(he({displayName:"",email:"",address:"",phone:"",role:"",suspended:!1,password:""}),ve([]),oe([]),Oe([])),()=>{le&&le(),je&&je(),We&&We()}},[W&&W.id]),j.useEffect(()=>{D&&H({name:D.name||"",image:D.image||"",description:D.description||"",stock:D.stock||"",price:D.price||"",sku:D.sku||"",category:D.category||""})},[D]),j.useEffect(()=>{F&&G({header:F.header||"",preview:F.preview||"",link:F.link||"",linkText:F.linkText||"",image:F.image||"",fullImage:F.fullImage||"",bgColor:F.bgColor||"#f0f8ff"})},[F]),j.useEffect(()=>{if(typeof F<"u"&&F&&G){G({header:F.header||"",preview:F.preview||"",link:F.link||"",linkText:F.linkText||"",image:F.image||"",fullImage:F.fullImage||"",bgColor:F.bgColor||"#f0f8ff",headerColor:F.headerColor||"#0ea5e9",previewColor:F.previewColor||"#475569",linkColor:F.linkColor||F.linkTextColor||"#0ea5e9",linkTextColor:F.linkTextColor||F.linkColor||"#0ea5e9",headerFontSize:F.headerFontSize||16,previewFontSize:F.previewFontSize||13,linkFontSize:F.linkFontSize||13,linkTextFontSize:F.linkTextFontSize||13});try{fe(!1)}catch{}}},[F]),j.useEffect(()=>{if(!He.current)return;const le=Hv.findIndex(We=>We.key===P),je=Math.floor(le/$g);pe(je),He.current.scrollTo({left:je*He.current.offsetWidth,behavior:"smooth"})},[P]),t?_?u.jsx(cp,{lines:8,className:"my-8"}):u.jsxs("div",{className:"pt-10 pb-28 w-full max-w-4xl mx-auto px-4 min-h-screen flex flex-col",children:[u.jsxs("div",{className:"relative mb-8 flex items-center justify-center",children:[u.jsx("button",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-white border border-sky-100 shadow text-sky-500 hover:bg-sky-100 transition absolute left-0 top-1/2 -translate-y-1/2",style:{display:Re>0?"flex":"none"},onClick:()=>pe(le=>Math.max(0,le-1)),"aria-label":"Previous tabs",children:u.jsx("span",{className:"text-lg",children:"<"})}),u.jsx("div",{className:"flex gap-2 px-8 w-full justify-center",children:Hv.slice(Re*$g,(Re+1)*$g).map(le=>u.jsx("button",{className:`min-w-[110px] px-3 py-2 font-semibold tracking-wide text-[13px] rounded-t-lg transition-colors duration-150
                ${P===le.key?"border-b-2 border-sky-500 text-sky-500 bg-sky-50":"text-zinc-400 bg-white hover:bg-sky-50"}`,onClick:()=>{U(le.key),we([])},children:le.label},le.key))}),u.jsx("button",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-white border border-sky-100 shadow text-sky-500 hover:bg-sky-100 transition absolute right-0 top-1/2 -translate-y-1/2",style:{display:Re<Math.ceil(Hv.length/$g)-1?"flex":"none"},onClick:()=>pe(le=>Math.min(Math.ceil(Hv.length/$g)-1,le+1)),"aria-label":"Next tabs",children:u.jsx("span",{className:"text-lg",children:">"})})]}),P==="users"&&u.jsxs("div",{className:"mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("div",{className:"text-[15px] font-semibold tracking-wide text-sky-500",children:"Users"}),u.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium shadow hover:bg-sky-600",onClick:()=>{he({displayName:"",email:"",address:"",phone:"",role:"customer",suspended:!1}),E(!0)},children:"Add User"})]}),u.jsx("div",{className:"space-y-2",children:(T?r:r.slice(0,3)).map(le=>u.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:ne.includes(le.id),onChange:je=>we(We=>je.target.checked?[...We,le.id]:We.filter(lt=>lt!==le.id))}),u.jsxs("div",{className:"flex-1",onClick:je=>{je.target.tagName!=="BUTTON"&&L(le)},children:[u.jsx("div",{className:"font-semibold text-[13px] text-sky-500",children:le.displayName||le.email}),u.jsx("div",{className:"text-[12px] text-zinc-500",children:le.email}),u.jsxs("div",{className:"text-[11px] text-zinc-400",children:["Role: ",le.role||"customer"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{className:"px-2 py-1 rounded bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:async je=>{je.stopPropagation(),await us(er(ht,"users",le.id),{role:"suspended"})},children:"Suspend"}),u.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-600 text-[12px] font-medium",onClick:async je=>{je.stopPropagation(),await Kl(er(ht,"users",le.id))},children:"Delete"})]})]},le.id))}),ne.length>0&&u.jsxs("div",{className:"flex gap-2 mt-2",children:[u.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-[12px] font-medium",onClick:async()=>{for(const le of ne)await Kl(er(ht,"users",le));we([])},children:"Delete Selected"}),u.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium",onClick:async()=>{for(const le of ne)await us(er(ht,"users",le),{role:"suspended"});we([])},children:"Suspend Selected"})]}),r.length>3&&!T&&u.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>I(!0),children:"See more"}),r.length>3&&T&&u.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>I(!1),children:"See less"})]}),P==="products"&&u.jsxs("div",{className:"mb-8",children:[u.jsx("div",{className:"text-xl font-semibold mb-2",children:"Products"}),u.jsx("div",{className:"space-y-2",children:(M?s:s.slice(0,3)).map(le=>u.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",onClick:je=>{je.target.tagName!=="BUTTON"&&R(le)},children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-bold",children:le.name}),u.jsx("div",{className:"text-sm text-zinc-500",children:le.category}),u.jsxs("div",{className:"text-xs text-zinc-400",children:["Vendor: ",le.vendorId]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{className:"px-2 py-1 rounded bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:async je=>{je.stopPropagation(),await us(er(ht,"products",le.id),{approved:!0}),i(s.map(We=>We.id===le.id?{...We,approved:!0}:We))},children:"Approve"}),u.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-600 text-[12px] font-medium",onClick:async je=>{je.stopPropagation(),await Kl(er(ht,"products",le.id)),i(s.filter(We=>We.id!==le.id))},children:"Delete"})]})]},le.id))}),s.length>3&&!M&&u.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>K(!0),children:"See more"}),s.length>3&&M&&u.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>K(!1),children:"See less"})]}),P==="prescriptions"&&u.jsxs("div",{className:"mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("div",{className:"text-xl font-semibold",children:"Prescriptions"}),u.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium shadow hover:bg-sky-600",onClick:()=>{},children:"Add Prescription"})]}),u.jsx("div",{className:"space-y-2",children:a.map(le=>u.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:ne.includes(le.id),onChange:je=>we(We=>je.target.checked?[...We,le.id]:We.filter(lt=>lt!==le.id))}),u.jsxs("div",{className:"flex-1",onClick:()=>{},children:[u.jsx("div",{className:"font-bold",children:le.title||le.id}),u.jsx("div",{className:"text-xs text-zinc-500",children:le.createdAt?new Date(le.createdAt.seconds*1e3).toLocaleString():""}),u.jsxs("div",{className:"text-xs text-zinc-400",children:["Drugs: ",Array.isArray(le.drugs)?le.drugs.join(", "):le.drugs]})]}),u.jsx("div",{className:"flex gap-2",children:u.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-700 text-xs",onClick:async je=>{je.stopPropagation(),await Kl(er(ht,"prescriptions",le.id))},children:"Delete"})})]},le.id))}),ne.length>0&&u.jsx("div",{className:"flex gap-2 mt-2",children:u.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const le of ne)await Kl(er(ht,"prescriptions",le));we([])},children:"Delete Selected"})})]}),P==="orders"&&u.jsxs("div",{className:"mb-8",children:[u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("div",{className:"text-xl font-semibold",children:"Orders"})}),u.jsx("div",{className:"space-y-2",children:l.map(le=>u.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:ne.includes(le.id),onChange:je=>we(We=>je.target.checked?[...We,le.id]:We.filter(lt=>lt!==le.id))}),u.jsxs("div",{className:"flex-1",onClick:()=>{},children:[u.jsxs("div",{className:"font-bold",children:["Order #",le.id]}),u.jsx("div",{className:"text-xs text-zinc-500",children:le.createdAt?new Date(le.createdAt.seconds*1e3).toLocaleString():""}),u.jsxs("div",{className:"text-xs text-zinc-400",children:["Products: ",Array.isArray(le.products)?le.products.map(je=>je.name).join(", "):""]})]}),u.jsx("div",{className:"flex gap-2",children:u.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-700 text-xs",onClick:async je=>{je.stopPropagation(),await Kl(er(ht,"orders",le.id))},children:"Delete"})})]},le.id))}),ne.length>0&&u.jsx("div",{className:"flex gap-2 mt-2",children:u.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const le of ne)await Kl(er(ht,"orders",le));we([])},children:"Delete Selected"})})]}),P==="carts"&&u.jsxs("div",{className:"mb-8",children:[u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("div",{className:"text-xl font-semibold",children:"Cart Items"})}),u.jsxs("div",{className:"space-y-2",children:[d.flatMap(le=>Array.isArray(le.products)?le.products.map((je,We)=>({...je,cartId:le.id,userId:le.userId,cartUpdatedAt:le.updatedAt})):[]).map((le,je)=>u.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-bold text-sm",children:le.name||"Unnamed Product"}),u.jsxs("div",{className:"text-xs text-zinc-500",children:["Quantity: ",le.quantity||1," | Cart: ",le.cartId?.slice(-8)||"Unknown"," | User: ",le.userId?.slice(-8)||"Unknown"]}),u.jsx("div",{className:"text-xs text-zinc-400",children:le.cartUpdatedAt?new Date(le.cartUpdatedAt.seconds*1e3).toLocaleString():""})]}),u.jsx("div",{className:"flex gap-2",children:u.jsxs("span",{className:"px-2 py-1 rounded bg-sky-100 text-sky-700 text-xs",children:["$",(le.price||0)*(le.quantity||1)]})})]},`${le.cartId}-${je}`)),d.flatMap(le=>Array.isArray(le.products)?le.products:[]).length===0&&u.jsx("div",{className:"text-center text-zinc-500 py-8",children:"No items in any carts"})]})]}),P==="analytics"&&u.jsxs("div",{className:"mb-8",children:[u.jsx("div",{className:"text-xl font-semibold mb-4",children:"Analytics"}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[u.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-bold",children:r.length}),u.jsx("div",{className:"text-xs text-zinc-600",children:"Users"})]}),u.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-bold",children:s.length}),u.jsx("div",{className:"text-xs text-zinc-600",children:"Products"})]}),u.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-bold",children:a.length}),u.jsx("div",{className:"text-xs text-zinc-600",children:"Prescriptions"})]}),u.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-bold",children:l.length}),u.jsx("div",{className:"text-xs text-zinc-600",children:"Orders"})]}),u.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-bold",children:d.reduce((le,je)=>le+(Array.isArray(je.products)?je.products.reduce((We,lt)=>We+(lt.quantity||1),0):0),0)}),u.jsx("div",{className:"text-xs text-zinc-600",children:"Cart Items"})]})]}),u.jsx("div",{className:"mt-4 text-zinc-500 text-xs",children:"Charts and advanced analytics coming soon."})]}),P==="moderation"&&u.jsxs("div",{className:"mb-8",children:[u.jsx("div",{className:"text-xl font-semibold mb-4",children:"Moderation"}),u.jsx("div",{className:"text-zinc-500 mb-4",children:"No flagged items yet. Moderation features coming soon."}),ne.length>0&&u.jsx("div",{className:"flex gap-2 mt-2",children:u.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const le of ne);we([])},children:"Delete Selected"})})]}),P==="verification"&&u.jsx("div",{className:"mb-8",children:u.jsx(C4e,{items:y,onUpdateStatus:Le,onAssign:Ye,onAddAuditEntry:Qe})}),P==="export"&&u.jsxs("div",{className:"mb-8",children:[u.jsx("div",{className:"text-xl font-semibold mb-4",children:"Export Data"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(r,"users"),children:"Export Users TSV"}),u.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(s,"products"),children:"Export Products TSV"}),u.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(a,"prescriptions"),children:"Export Prescriptions TSV"}),u.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(l,"orders"),children:"Export Orders TSV"}),u.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(d,"carts"),children:"Export Carts TSV"})]})]}),u.jsx("div",{className:"mt-6",children:u.jsx("button",{onClick:async()=>{await e(),window.location.href="/auth/landing"},className:"rounded-full border border-red-300 text-red-600 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:"Log Out"})}),(W||A)&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-2xl max-w-md w-full border border-sky-100",children:[u.jsx("div",{className:"text-[16px] font-semibold tracking-wide text-sky-500 mb-4",children:A?"Add User":"Edit User"}),Ke&&u.jsx("div",{className:"text-red-500 text-xs mb-2",children:Ke}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:xe.displayName,onChange:le=>he(je=>({...je,displayName:le.target.value})),placeholder:"Name"}),u.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:xe.email,onChange:le=>he(je=>({...je,email:le.target.value})),placeholder:"Email"}),A&&u.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",type:"password",value:xe.password,onChange:le=>he(je=>({...je,password:le.target.value})),placeholder:"Password"}),u.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:xe.address,onChange:le=>he(je=>({...je,address:le.target.value})),placeholder:"Address"}),u.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:xe.phone,onChange:le=>he(je=>({...je,phone:le.target.value})),placeholder:"Phone Number"}),u.jsxs("select",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:xe.role,onChange:le=>he(je=>({...je,role:le.target.value})),children:[u.jsx("option",{value:"customer",children:"Customer"}),u.jsx("option",{value:"pharmacy",children:"Pharmacy"}),u.jsx("option",{value:"superuser",children:"Superuser"}),u.jsx("option",{value:"suspended",children:"Suspended"})]}),u.jsxs("div",{className:"flex gap-2 mt-4",children:[u.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium text-[13px] shadow hover:bg-sky-600",onClick:async()=>{if(ze(""),A){const le=eM();try{const je=await UO(le,xe.email,xe.password),We={...xe};delete We.password;const lt=await $d(()=>Promise.resolve().then(()=>gO),void 0).then(yt=>yt.addDoc(Zt(ht,"users"),{...We,uid:je.user.uid}));n([...r,{id:lt.id,...We,uid:je.user.uid}]),E(!1)}catch(je){ze(je.message||"Failed to create user. Check email, password, and permissions.")}}else try{await us(er(ht,"users",W.id),{displayName:xe.displayName,email:xe.email,address:xe.address,phone:xe.phone,role:xe.role}),n(r.map(le=>le.id===W.id?{...le,...xe}:le)),L(null)}catch(le){ze(le.message||"Failed to update user.")}},children:A?"Add":"Save"}),!A&&(xe.role==="suspended"?u.jsx("button",{className:"px-4 py-2 rounded bg-green-500 text-white font-medium text-[13px] shadow hover:bg-green-600",onClick:async()=>{await us(er(ht,"users",W.id),{role:"customer"}),n(r.map(le=>le.id===W.id?{...le,role:"customer"}:le)),L(null)},children:"Lift Suspension"}):u.jsx("button",{className:"px-4 py-2 rounded bg-red-500 text-white font-medium text-[13px] shadow hover:bg-red-600",onClick:async()=>{await us(er(ht,"users",W.id),{role:"suspended"}),n(r.map(le=>le.id===W.id?{...le,role:"suspended"}:le)),L(null)},children:"Suspend"})),u.jsx("button",{className:"px-4 py-2 rounded bg-zinc-100 text-zinc-700 font-medium text-[13px] shadow hover:bg-zinc-200",onClick:()=>{L(null),E(!1),ze("")},children:"Cancel"})]})]})]})}),D&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl max-w-md w-full border border-sky-100",children:[u.jsx("div",{className:"text-[16px] font-semibold tracking-wide text-sky-500 mb-4",children:"Edit Product"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:ae.name,onChange:le=>H(je=>({...je,name:le.target.value})),placeholder:"Product Name"}),u.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:ae.sku,onChange:le=>H(je=>({...je,sku:le.target.value})),placeholder:"SKU"}),u.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:ae.price,onChange:le=>H(je=>({...je,price:le.target.value})),placeholder:"Price"}),u.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:ae.stock,onChange:le=>H(je=>({...je,stock:le.target.value})),placeholder:"Stock"}),u.jsx("textarea",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:ae.description,onChange:le=>H(je=>({...je,description:le.target.value})),placeholder:"Description",rows:"2"}),u.jsxs("div",{className:"flex gap-2 mt-4",children:[u.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium text-[13px] shadow hover:bg-sky-600",onClick:async()=>{await us(er(ht,"products",D.id),{name:ae.name,sku:ae.sku,price:ae.price,stock:ae.stock,description:ae.description}),i(s.map(le=>le.id===D.id?{...le,...ae}:le)),R(null)},children:"Save"}),u.jsx("button",{className:"px-4 py-2 rounded bg-zinc-100 text-zinc-700 font-medium text-[13px] shadow hover:bg-zinc-200",onClick:()=>R(null),children:"Cancel"})]})]})]})}),P==="infoCards"&&u.jsxs("div",{className:"mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("div",{className:"text-xl font-semibold text-sky-500",children:"Info Cards"}),u.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium shadow hover:bg-sky-600",onClick:()=>{try{V(null)}catch{}try{fe(!0)}catch{}try{G({header:"",preview:"",link:"",linkText:"",image:"",fullImage:"",bgColor:"#f0f8ff",headerColor:"#0ea5e9",previewColor:"#475569",linkColor:"#0ea5e9",linkTextColor:"#0ea5e9",headerFontSize:16,previewFontSize:13,linkFontSize:13,linkTextFontSize:13})}catch{}},children:"Add Info Card"})]}),u.jsx("div",{className:"space-y-4",children:g.map(le=>u.jsxs("div",{className:"border border-sky-100 rounded-lg p-4 flex items-center justify-between group hover:shadow-md transition cursor-pointer",style:{background:le.bgColor||"#ffffff"},children:[u.jsxs("div",{className:"flex-1",onClick:()=>{V(le),G({header:le.header||"",preview:le.preview||"",link:le.link||"",linkText:le.linkText||"",image:le.image||"",fullImage:le.fullImage||"",bgColor:le.bgColor||"#f0f8ff",headerColor:le.headerColor||"#0ea5e9",previewColor:le.previewColor||"#475569",linkColor:le.linkColor||le.linkTextColor||"#0ea5e9",linkTextColor:le.linkTextColor||le.linkColor||"#0ea5e9",headerFontSize:le.headerFontSize||16,previewFontSize:le.previewFontSize||13,linkFontSize:le.linkFontSize||13,linkTextFontSize:le.linkTextFontSize||13})},children:[u.jsx("div",{style:{color:le.headerColor||"#0ea5e9",fontSize:(le.headerFontSize||16)+"px",fontWeight:600},children:le.header}),u.jsx("div",{style:{color:le.previewColor||"#475569",fontSize:(le.previewFontSize||13)+"px"},className:"mt-1",children:le.preview}),le.link&&le.linkText&&u.jsx("a",{href:le.link,style:{color:le.linkColor||"#0ea5e9",fontSize:(le.linkFontSize||13)+"px"},className:"underline",target:"_blank",rel:"noopener noreferrer",children:le.linkText}),le.image&&u.jsx("img",{src:le.image,alt:"Info",className:"mt-2 rounded-lg",style:{maxWidth:"120px",maxHeight:"60px"}}),le.fullImage&&u.jsx("img",{src:le.fullImage,alt:"Full",className:"mt-2 rounded-lg",style:{maxWidth:"180px",maxHeight:"100px"}}),u.jsxs("div",{className:"text-[11px] text-zinc-400 mt-2",children:["BG: ",le.bgColor]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{className:"px-2 py-1 rounded bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:je=>{je.stopPropagation(),V(le),fe(!1),G({header:le.header||"",preview:le.preview||"",link:le.link||"",linkText:le.linkText||"",image:le.image||"",fullImage:le.fullImage||"",bgColor:le.bgColor||"#f0f8ff",headerColor:le.headerColor||"#0ea5e9",previewColor:le.previewColor||"#475569",linkColor:le.linkColor||le.linkTextColor||"#0ea5e9",linkTextColor:le.linkTextColor||le.linkColor||"#0ea5e9",headerFontSize:le.headerFontSize||16,previewFontSize:le.previewFontSize||13,linkFontSize:le.linkFontSize||13,linkTextFontSize:le.linkTextFontSize||13})},children:"Edit"}),u.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-600 text-[12px] font-medium",onClick:async je=>{je.stopPropagation(),await Kl(er(ht,"infoCards",le.id))},children:"Delete"})]})]},le.id))}),(F||Z)&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-2xl max-w-md w-full border border-sky-100",children:[u.jsx("div",{className:"text-[16px] font-semibold tracking-wide text-sky-500 mb-4",children:Z?"Add Info Card":"Edit Info Card"}),ot&&u.jsx("div",{className:"text-red-500 text-xs mb-2",children:ot}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:te.header,onChange:le=>G(je=>({...je,header:le.target.value})),placeholder:"Header"}),u.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:te.preview,onChange:le=>G(je=>({...je,preview:le.target.value})),placeholder:"Preview text"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{className:"flex-1 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:te.link,onChange:le=>G(je=>({...je,link:le.target.value})),placeholder:"Link (optional)"}),u.jsx("input",{className:"w-36 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:te.linkText,onChange:le=>G(je=>({...je,linkText:le.target.value})),placeholder:"Link Text"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{className:"flex-1 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:te.image,onChange:le=>G(je=>({...je,image:le.target.value})),placeholder:"Image URL (right side, optional)"}),u.jsx("input",{className:"w-36 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:te.fullImage,onChange:le=>G(je=>({...je,fullImage:le.target.value})),placeholder:"Full Image URL"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("label",{className:"text-xs text-zinc-500",children:["Header Color",u.jsx("input",{type:"color",value:te.headerColor||"#0ea5e9",onChange:le=>G(je=>({...je,headerColor:le.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),u.jsxs("label",{className:"text-xs text-zinc-500",children:["Header Size",u.jsx("input",{type:"range",min:"12",max:"28",value:te.headerFontSize||16,onChange:le=>G(je=>({...je,headerFontSize:parseInt(le.target.value)})),className:"w-full mt-1"})]}),u.jsxs("label",{className:"text-xs text-zinc-500",children:["Preview Color",u.jsx("input",{type:"color",value:te.previewColor||"#475569",onChange:le=>G(je=>({...je,previewColor:le.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),u.jsxs("label",{className:"text-xs text-zinc-500",children:["Preview Size",u.jsx("input",{type:"range",min:"10",max:"22",value:te.previewFontSize||13,onChange:le=>G(je=>({...je,previewFontSize:parseInt(le.target.value)})),className:"w-full mt-1"})]}),u.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Color",u.jsx("input",{type:"color",value:te.linkColor||"#0ea5e9",onChange:le=>G(je=>({...je,linkColor:le.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),u.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Size",u.jsx("input",{type:"range",min:"10",max:"22",value:te.linkFontSize||13,onChange:le=>G(je=>({...je,linkFontSize:parseInt(le.target.value)})),className:"w-full mt-1"})]}),u.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Text Color",u.jsx("input",{type:"color",value:te.linkTextColor||"#0ea5e9",onChange:le=>G(je=>({...je,linkTextColor:le.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),u.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Text Size",u.jsx("input",{type:"range",min:"10",max:"22",value:te.linkTextFontSize||13,onChange:le=>G(je=>({...je,linkTextFontSize:parseInt(le.target.value)})),className:"w-full mt-1"})]})]}),u.jsxs("div",{className:"mt-2",children:[u.jsx("label",{className:"text-xs text-zinc-500",children:"Background Color"}),u.jsx("input",{type:"color",value:te.bgColor||"#f0f8ff",onChange:le=>G(je=>({...je,bgColor:le.target.value})),className:"w-full h-10 mt-1 p-0 border-0"})]}),u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"text-xs text-zinc-500 mb-2",children:"Live preview"}),u.jsxs("div",{style:{background:te.bgColor||"#f8fafc",padding:12,borderRadius:10,display:"flex",gap:12,alignItems:"center"},children:[u.jsxs("div",{style:{flex:1},children:[u.jsx("div",{style:{color:te.headerColor||"#0ea5e9",fontSize:(te.headerFontSize||16)+"px",fontWeight:700},children:te.header||"Header"}),u.jsx("div",{style:{color:te.previewColor||"#475569",fontSize:(te.previewFontSize||13)+"px",marginTop:4},children:te.preview||"Preview text goes here"}),te.linkText&&u.jsx("div",{style:{marginTop:6},children:u.jsx("a",{style:{color:te.linkTextColor||te.linkColor||"#0ea5e9",fontSize:(te.linkTextFontSize||13)+"px"},href:te.link||"#",children:te.linkText})})]}),te.image&&u.jsx("img",{src:te.image,alt:"Preview",style:{width:80,height:60,objectFit:"cover",borderRadius:6}})]})]}),u.jsxs("div",{className:"flex gap-2 mt-4",children:[u.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium text-[13px] shadow hover:bg-sky-600",onClick:async()=>{if(Be(""),Z)try{await Qd(Zt(ht,"infoCards"),te),fe(!1)}catch(le){Be(le.message||"Failed to add info card.")}else if(F)try{await us(er(ht,"infoCards",F.id),te),V(null)}catch(le){Be(le.message||"Failed to save info card.")}},children:Z?"Add":"Save"}),u.jsx("button",{className:"px-4 py-2 rounded bg-zinc-100 text-zinc-700 font-medium text-[13px] shadow hover:bg-zinc-200",onClick:()=>{V(null),fe(!1),Be("")},children:"Cancel"})]})]})]})})]})]}):u.jsx(cp,{lines:4,className:"my-8"})}function hR({className:t="h-4 w-4",...e}){return u.jsxs("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...e,children:[u.jsx("path",{d:"M3 9V1M17 17V14M3 17V13M17 10V1M10 4V1M10 17V8",stroke:"currentColor",strokeLinecap:"round"}),u.jsx("path",{d:"M3 13C4.10457 13 5 12.1046 5 11C5 9.89543 4.10457 9 3 9C1.89543 9 1 9.89543 1 11C1 12.1046 1.89543 13 3 13Z",stroke:"currentColor",strokeLinecap:"round"}),u.jsx("path",{d:"M10 8C11.1046 8 12 7.10457 12 6C12 4.89543 11.1046 4 10 4C8.89543 4 8 4.89543 8 6C8 7.10457 8.89543 8 10 8Z",stroke:"currentColor",strokeLinecap:"round"}),u.jsx("path",{d:"M17 14C18.1046 14 19 13.1046 19 12C19 10.8954 18.1046 10 17 10C15.8954 10 15 10.8954 15 12C15 13.1046 15.8954 14 17 14Z",stroke:"currentColor",strokeLinecap:"round"})]})}function N4e(){const t=Jn(),{profile:e}=Dn(),{t:r}=qs(),{userCoords:n,location:s,isLoading:i}=Np(),[a,o]=j.useState([]),[l,c]=j.useState(!0),[d,p]=j.useState(null),[g,m]=j.useState([]),[y,w]=j.useState(""),[_,S]=j.useState(!1),[T,I]=j.useState("all"),[M,K]=j.useState(!1),[W,L]=j.useState([]),[A,E]=j.useState(-1);j.useEffect(()=>{e&&e.role!=="customer"&&t("/")},[e,t]),j.useEffect(()=>{async function G(){try{const P=await m5();o(P||[])}catch(P){console.error("Error loading pharmacies:",P)}finally{c(!1)}}G()},[]),j.useEffect(()=>{if(!n||a.length===0){m(a);return}let G=a.map(P=>{const U=GS(P,n,"driving"),X=D(P),J=X?ry(n.latitude,n.longitude,X.latitude,X.longitude):1/0;return{...P,distance:J,eta:U,coords:X}}).filter(P=>P.coords);if(T!=="all"){const P=parseInt(T);G=G.filter(U=>U.distance<=P)}if(y.trim()){const P=y.toLowerCase();G=G.filter(U=>U.name?.toLowerCase().includes(P)||U.address?.toLowerCase().includes(P))}G.sort((P,U)=>P.distance-U.distance),m(G),G.length>0&&(!d||!G.find(P=>P.id===d.id))&&p(G[0])},[n,a,d,y,T]),j.useEffect(()=>{if(!y.trim()||y.length<2){L([]),K(!1);return}const G=y.toLowerCase(),P=a.filter(U=>U.name?.toLowerCase().includes(G)||U.address?.toLowerCase().includes(G)).slice(0,5).map(U=>({id:U.id,name:U.name,address:U.address,type:U.name?.toLowerCase().includes(G)?"name":"address"}));L(P),K(P.length>0),E(-1)},[y,a]);function D(G){return G?G.coordinates?.latitude&&G.coordinates?.longitude?{latitude:Number(G.coordinates.latitude),longitude:Number(G.coordinates.longitude)}:G.latitude&&G.longitude?{latitude:Number(G.latitude),longitude:Number(G.longitude)}:G.lat&&G.lng?{latitude:Number(G.lat),longitude:Number(G.lng)}:null:null}const R=G=>{G.phone&&(window.location.href=`tel:${G.phone}`)},F=G=>{const P=D(G);if(P&&n){const U=`https://www.google.com/maps/dir/${n.latitude},${n.longitude}/${P.latitude},${P.longitude}`;window.open(U,"_blank")}},V=G=>{p(G)},Z=G=>{(G.vendorId||G.id)&&t(`/vendor/${G.vendorId||G.id}`)},fe=G=>{w(G),E(-1)},xe=G=>{w(G.name),K(!1),E(-1);const P=a.find(U=>U.id===G.id);P&&(p(P),setTimeout(()=>{const U=document.getElementById(`pharmacy-${P.id}`);U&&U.scrollIntoView({behavior:"smooth",block:"center"})},100))},he=()=>{W.length>0&&y.length>=2&&K(!0)},ae=()=>{setTimeout(()=>{K(!1),E(-1)},200)},H=G=>{if(!(!M||W.length===0))switch(G.key){case"ArrowDown":G.preventDefault(),E(P=>P<W.length-1?P+1:0);break;case"ArrowUp":G.preventDefault(),E(P=>P>0?P-1:W.length-1);break;case"Enter":G.preventDefault(),A>=0&&A<W.length&&xe(W[A]);break;case"Escape":K(!1),E(-1);break}};if(l||i)return u.jsx("div",{className:"min-h-screen bg-gray-50 w-full px-0 py-6",children:u.jsxs("div",{className:"w-full md:max-w-md md:mx-auto",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(du,{className:"h-5 w-5"})}),u.jsx("h1",{className:"text-[25px] font-light text-gray-900 dark:text-white",children:r("nearby_pharmacies","Nearby Pharmacies")})]}),u.jsx(cp,{lines:8,className:"space-y-4 justify-center"})]})});const te=()=>u.jsx("div",{className:"md:hidden fixed top-0 left-0 right-0 z-[100] bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-700",children:u.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[u.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(du,{className:"h-5 w-5"})}),u.jsxs("div",{className:"flex-1 text-left",children:[u.jsx("div",{className:"text-[18px] font-light tracking-tight",children:r("nearby_pharmacies","Nearby Pharmacies")}),u.jsx("div",{className:"text-[12px] text-gray-400",children:n?r("pharmacies_found_near_you","{count} found near you").replace("{count}",g.length):r("loading_location","Loading location...")})]}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("button",{onClick:()=>S(!_),className:"p-2 rounded-full border border-zinc-200 bg-white hover:bg-sky-50 hover:scale-110 active:scale-95 transition-all duration-200","aria-label":r("filter_pharmacies","Filter pharmacies"),children:u.jsx(hR,{className:"w-5 h-5 text-sky-600"})})})]})});return u.jsxs(u.Fragment,{children:[Ki.createPortal(u.jsx(te,{}),document.body),u.jsxs("div",{className:"min-h-screen bg-gray dark:bg-gray-900 pt-24 md:pt-0",children:[u.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-50 dark:border-gray-700 mx-auto px-4 py-4 sticky top-0 z-50 hidden md:block",children:u.jsx("div",{className:"max-w-md mx-auto",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:u.jsx(du,{className:"h-5 w-5 text-gray-900 dark:text-white"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-[20px] font-light tracking-tight text-gray-900 dark:text-white",children:r("nearby_pharmacies","Nearby Pharmacies")}),u.jsx("p",{className:"text-[12px] text-gray-400 dark:text-gray-500",children:n?r("pharmacies_found_near_you_detailed","{count} pharmacies found near you").replace("{count}",g.length):r("loading_location","Loading location...")})]})]})})}),u.jsxs("div",{className:"w-full px-0 py-6 md:max-w-md md:mx-auto md:px-4",children:[u.jsx("div",{className:"bg-gray dark:bg-transparent rounded-lg p-4 mb-4 border border-sky-300 dark:border-gray-600 dark:border-gray-600",children:u.jsx("div",{className:"flex items-center gap-3",children:n?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r("your_location","Your Location")}),u.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:s})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full animate-pulse"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:i?r("getting_your_location","Getting your location..."):r("location_access_needed","Location access needed")}),u.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:i?r("allow_location_access_etas","Please allow location access for accurate ETAs"):r("enable_location_services","Enable location services to see nearby pharmacies")})]})]})})}),u.jsxs("div",{className:"dark:bg-transparent rounded-lg p-4 border mb-4 border-sky-300 dark:border-gray-600 dark:border-gray-600",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"flex-1 relative bg-transparent",children:[u.jsx(Uf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),u.jsx("input",{type:"text",placeholder:r("search_pharmacies","Search pharmacies..."),value:y,onChange:G=>fe(G.target.value),onFocus:he,onBlur:ae,onKeyDown:H,className:"w-full pl-10 pr-4 py-2 border-b bg-transparent border-gray-300 dark:border-gray-600 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",autoComplete:"off"}),M&&y.length>=2&&u.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 dark:border-gray-600 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto animate-fade-in",children:[W.length>0?W.map((G,P)=>u.jsx("button",{onClick:()=>xe(G),className:`w-full text-left px-4 py-3 focus:outline-none transition-colors duration-200 border-b border-gray-100 dark:border-gray-700 last:border-b-0 animate-fadeInUp ${P===A?"bg-blue-100 dark:bg-blue-900/30 border-blue-200 dark:border-gray-600 dark:border-gray-600":"hover:bg-blue-50 dark:hover:bg-blue-900/20 focus:bg-blue-50 dark:focus:bg-blue-900/20"}`,style:{animationDelay:`${P*.05}s`},children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 transition-colors duration-200 ${P===A?"bg-blue-200 dark:bg-blue-800":"bg-blue-100 dark:bg-blue-900"}`,children:u.jsx(Nc,{className:`h-4 w-4 ${P===A?"text-blue-700 dark:text-blue-300":"text-blue-600 dark:text-blue-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:G.type==="name"?u.jsx("span",{children:G.name.split(new RegExp(`(${y})`,"gi")).map((U,X)=>U.toLowerCase()===y.toLowerCase()?u.jsx("span",{className:"bg-sky-200 px-1 rounded",children:U},X):U)}):G.name}),u.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate mt-1",children:G.type==="address"?u.jsx("span",{children:G.address.split(new RegExp(`(${y})`,"gi")).map((U,X)=>U.toLowerCase()===y.toLowerCase()?u.jsx("span",{className:"bg-yellow-200 dark:bg-yellow-800 px-1 rounded",children:U},X):U)}):G.address})]}),u.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium flex-shrink-0",children:G.type==="name"?r("name","Name"):r("address","Address")})]})},G.id)):u.jsxs("div",{className:"px-4 py-6 text-center text-gray-500 dark:text-gray-400 animate-fade-in",children:[u.jsx(Nc,{className:"h-8 w-8 text-gray-300 dark:text-gray-600 mx-auto mb-2"}),u.jsx("p",{className:"text-[12px]",children:r("no_pharmacies_found","No pharmacies found")}),u.jsx("p",{className:"text-[10px] mt-1",children:r("try_different_search","Try a different search term")})]}),W.length>0&&u.jsx("div",{className:"px-4 py-2 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-[12px] text-gray-400 dark:text-gray-500 text-center",children:r("keyboard_navigation_hint","Use  arrow keys to navigate, Enter to select, Esc to close")})]})]}),u.jsx("button",{onClick:()=>S(!_),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 ${_?"bg-blue-500 text-white border-blue-500 dark:border-gray-600":"text-gray-700 dark:text-gray-300"}`,children:u.jsx(hR,{className:"h-4 w-4"})})]}),_&&u.jsxs("div",{className:" pt-3",children:[u.jsx("p",{className:"text-[14px] font-medium text-gray-700 dark:text-gray-300 mb-2",children:r("distance","Distance")}),u.jsx("div",{className:"flex gap-2 flex-wrap",children:[{value:"all",label:"All"},{value:"5",label:"Within 5km"},{value:"10",label:"Within 10km"},{value:"20",label:"Within 20km"}].map(G=>u.jsx("button",{onClick:()=>I(G.value),className:`px-3 py-1 rounded-full text-[12px] transition-colors ${T===G.value?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:G.label},G.value))})]})]}),u.jsx("div",{className:"bg-white dark:bg-transparent rounded-lg mb-4 shadow-sm overflow-hidden",children:u.jsxs("div",{className:"h-80 bg-gradient-to-br from-green-50 via-blue-50 to-indigo-100 relative",children:[u.jsx("div",{className:"absolute inset-0 opacity-10",children:u.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("defs",{children:u.jsx("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:u.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"#6B7280",strokeWidth:"1"})})}),u.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),u.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 320",children:[u.jsx("path",{d:"M0 160 Q200 120 400 160",stroke:"#E5E7EB",strokeWidth:"8",fill:"none"}),u.jsx("path",{d:"M200 0 Q200 160 200 320",stroke:"#E5E7EB",strokeWidth:"6",fill:"none"}),u.jsx("path",{d:"M0 80 Q100 60 200 80",stroke:"#F3F4F6",strokeWidth:"4",fill:"none"}),u.jsx("path",{d:"M200 240 Q300 220 400 240",stroke:"#F3F4F6",strokeWidth:"4",fill:"none"})]}),n&&u.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-4 h-4 bg-black rounded-full border-2 border-white shadow-lg animate-pulse"}),u.jsx("div",{className:"absolute -inset-2 bg-blue-400 rounded-full opacity-30 animate-ping"})]}),u.jsx("span",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-xs bg-white px-2 py-1 rounded shadow-md whitespace-nowrap",children:r("you_are_here","You are here")})]}),g.slice(0,8).map((G,P)=>{const U=P*45*(Math.PI/180),X=80+P*10,J=50+Math.cos(U)*X/4,ie=50+Math.sin(U)*X/6;return u.jsx("div",{className:`absolute transform -translate-x-1/2 -translate-y-full cursor-pointer transition-all duration-200 hover:scale-125 z-20 ${d?.id===G.id?"scale-125 z-30":""}`,style:{left:`${Math.max(10,Math.min(90,J))}%`,top:`${Math.max(15,Math.min(85,ie))}%`},onClick:()=>V(G),children:u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold shadow-lg border-2 border-white transition-colors ${d?.id===G.id?"bg-red-500 shadow-red-200":"bg-blue-500 shadow-blue-200"}`,children:P+1}),u.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none",children:u.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 whitespace-nowrap shadow-lg",children:[u.jsx(hu,{name:G.name,isVerified:G.isVerified,className:"font-medium",iconClassName:"h-3.5 w-3.5 text-emerald-400"}),u.jsxs("div",{className:"text-gray-300",children:[G.eta?.formatted,"  ",G.distance?.toFixed(1),"km"]}),u.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900"})]})})]})},G.id||P)}),u.jsx("div",{className:"absolute top-4 left-4 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg p-3 shadow-sm",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Nc,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r("pharmacy_locations","Pharmacy Locations")}),u.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:r("pharmacies_sorted_by_distance","{count} pharmacies  Sorted by distance").replace("{count}",g.length)})]})]})}),u.jsx("div",{className:"absolute bottom-4 right-4 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg p-3 shadow-sm",children:u.jsxs("div",{className:"space-y-2 text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-3 h-3 bg-black rounded-full border border-white dark:border-gray-300 dark:border-gray-600"}),u.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r("your_location","Your location")})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full border border-white dark:border-gray-300 dark:border-gray-600"}),u.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r("pharmacy","Pharmacy")})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full border border-white dark:border-gray-300 dark:border-gray-600"}),u.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r("selected","Selected")})]})]})})]})}),d&&u.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-3 mb-4 shadow-sm border border-blue-200 dark:border-gray-600 dark:border-gray-600",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-bold shadow-lg flex-shrink-0",children:g.findIndex(G=>G.id===d.id)+1}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx(hu,{name:d.name,isVerified:d.isVerified,className:"font-semibold text-gray-900 dark:text-white text-sm truncate",iconClassName:"h-4 w-4 text-emerald-500"}),u.jsx("p",{className:"text-xs text-gray-600 mb-2 truncate",children:d.address}),u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 flex-wrap",children:[u.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-gray-700 rounded-full px-2 py-1",children:[u.jsx(x5,{className:"h-3 w-3 text-blue-500 flex-shrink-0"}),u.jsx("span",{className:"font-normal whitespace-nowrap",style:{fontSize:"10px !important"},children:d.eta?.formatted||r("calculating","Calculating...")})]}),u.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-gray-700 rounded-full px-2 py-1",children:[u.jsx(Nc,{className:"h-3 w-3 text-green-500 flex-shrink-0"}),u.jsxs("span",{className:"font-normal whitespace-nowrap",style:{fontSize:"10px !important"},children:[d.distance?.toFixed(1)||"0"," km"]})]}),d.phone&&u.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-gray-700 rounded-full px-2 py-1",children:[u.jsx(k1,{className:"h-3 w-3 text-purple-500 flex-shrink-0"}),u.jsx("span",{className:"font-normal truncate max-w-[80px]",style:{fontSize:"10px !important"},children:d.phone})]})]})]})]}),u.jsx("span",{className:"bg-blue-600 text-white text-xs px-1 py-1 rounded-full font-normal flex-shrink-0 ml-2",children:r("closest","Closest")})]}),u.jsxs("div",{className:"flex gap-1.5",children:[u.jsxs("button",{onClick:()=>F(d),className:"flex-1 bg-blue-600 text-white py-1 px-2 text-xs rounded-full font-normal hover:bg-blue-700 transition-all duration-200 flex items-center justify-center gap-1 btn-interactive",children:[u.jsx(y5,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",style:{fontSize:"10px !important"},children:r("get_directions","Get Directions")}),u.jsx("span",{className:"sm:hidden",style:{fontSize:"10px !important"},children:r("get_directions","Get Directions")})]}),d.phone&&u.jsxs("button",{onClick:()=>R(d),className:"bg-green-600 text-white py-2 px-3 rounded-full font-medium hover:bg-green-700 transition-all duration-200 flex items-center justify-center gap-1 btn-interactive",title:r("call_pharmacy","Call pharmacy"),children:[u.jsx(k1,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",style:{fontSize:"10px !important"},children:r("call","Call")})]}),u.jsxs("button",{onClick:()=>Z(d),className:"flex-1 bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 py-2 px-3 rounded-full font-normal text-xs hover:bg-blue-50 dark:hover:bg-gray-600 transition-all duration-200 border border-blue-200 dark:border-gray-600 btn-interactive",children:[u.jsx("span",{className:"hidden sm:inline",style:{fontSize:"10px !important"},children:r("view_products","View Products")}),u.jsx("span",{className:"sm:hidden",style:{fontSize:"10px !important"},children:r("view_products","View Products")})]})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-[18px] font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:y?u.jsxs(u.Fragment,{children:[u.jsx("span",{children:r("search_results","Search Results")}),u.jsxs("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 px-2 py-1 rounded-full animate-pulse-slow",children:['"',y,'"']})]}):r("all_pharmacies","All Pharmacies")}),u.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:r("pharmacies_found_count","{count} found").replace("{count}",g.length)})]}),g.length===0?u.jsxs("div",{className:"bg-white-10 rounded-lg p-8 text-center",children:[u.jsx(Nc,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:y?r("no_pharmacies_found_search","No pharmacies found matching your search"):r("no_pharmacies_found_general","No pharmacies found")}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:y?r("try_adjusting_search","Try adjusting your search terms"):r("try_adjusting_location","Try adjusting your location or check back later")}),y&&u.jsx("button",{onClick:()=>w(""),className:"mt-3 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-sm font-medium hover:scale-105 active:scale-95 transition-all duration-200 px-3 py-1 rounded-full hover:bg-blue-50 dark:hover:bg-blue-900/20",children:r("clear_search","Clear search")})]}):g.map((G,P)=>u.jsx("div",{id:`pharmacy-${G.id}`,className:`bg-white dark:bg-transparent rounded-lg p-3 border border-gray-200 dark:border-gray-600 dark:border-gray-600 cursor-pointer transition-all duration-200 card-interactive animate-fadeInUp ${d?.id===G.id?"border-sky-600 dark:border-sky-600 bg-blue-50 dark:bg-blue-900/30 scale-102":"border-gray-200 dark:border-gray-600 dark:border-gray-600 hover:border-gray-300 dark:border-gray-600 dark:hover:border-gray-500 hover:shadow-md"}`,style:{animationDelay:`${P*.1}s`},onClick:()=>V(G),children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[u.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-white text-[12px] font-bold shadow-sm flex-shrink-0 ${d?.id===G.id?"bg-blue-500":"bg-gray-400"}`,children:P+1}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx(hu,{name:G.name,isVerified:G.isVerified,className:"font-semibold text-gray-900 dark:text-white text-sm truncate",iconClassName:"h-3.5 w-3.5 text-emerald-500"}),P===0&&u.jsx("span",{className:"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 text-xs px-2 py-0.5 rounded-full font-normal flex-shrink-0",children:r("closest","Closest")})]}),u.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2 truncate",children:G.address}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-400",children:[u.jsx(x5,{className:"h-3 w-3 flex-shrink-0"}),u.jsx("span",{className:"font-normal whitespace-nowrap",style:{fontSize:"10px !important"},children:G.eta?.formatted||r("calculating","Calculating...")})]}),u.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[u.jsx(Nc,{className:"h-3 w-3 flex-shrink-0"}),u.jsxs("span",{className:"font-normal whitespace-nowrap",style:{fontSize:"10px !important"},children:[G.distance?.toFixed(1)||"0"," km"]})]})]})]})]}),u.jsx("button",{onClick:U=>{U.stopPropagation(),F(G)},className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors p-1.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-full flex-shrink-0 ml-2",title:r("get_directions","Get directions"),children:u.jsx(y5,{className:"h-4 w-4"})})]})},G.id||P))]}),M&&W.length>0&&u.jsx("div",{className:"absolute z-50 w-full max-w-md mx-auto mt-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600",children:u.jsx("div",{className:"flex flex-col divide-y divide-gray-200 dark:divide-gray-600",children:W.map(G=>u.jsxs("button",{onClick:()=>xe(G),className:"flex items-center justify-between w-full px-4 py-2 text-left text-gray-900 dark:text-white hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Nc,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),u.jsxs("div",{className:"flex flex-col text-sm",children:[u.jsx("span",{className:"font-medium",children:G.name}),u.jsx("span",{className:"text-gray-500 dark:text-gray-400 truncate",children:G.address})]})]}),u.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:g.findIndex(P=>P.id===G.id)+1})]},G.id))})})]})]})]})}function T4e(){return u.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-white dark:bg-gray-900",children:u.jsxs("div",{className:"flex flex-col items-center gap-4 text-gray-500 dark:text-gray-400",children:[u.jsx("img",{src:"/iconLoader.svg",alt:"Loading",className:"h-12 w-12 animate-spin"}),u.jsx("p",{className:"text-sm tracking-wide uppercase",children:"Preparing your experience"})]})})}const I4e=({className:t="w-8 h-8"})=>u.jsx("img",{src:"/PharmAI.svg",alt:"PharmAI",className:t});function P4e(){const t=Jn(),e=Nl(),{t:r}=qs(),n=j.useRef(null),[s,i]=j.useState(()=>window.innerWidth<=768),a={x:window.innerWidth-80,y:window.innerHeight-160},[o,l]=j.useState(a),[c,d]=j.useState(!1),[p,g]=j.useState({x:0,y:0}),m=j.useRef(!1);if(j.useEffect(()=>{const W="ai-chat-floating-animations";if(document.getElementById(W))return;const L=document.createElement("style");L.id=W,L.textContent=`
      @keyframes aiChatFloat {
        0%, 100% { transform: translate3d(0, 0, 0); }
        50% { transform: translate3d(0, -6px, 0); }
      }
      @keyframes aiChatPulseRing {
        0% { transform: scale(0.85); opacity: 0.28; }
        60% { transform: scale(1.25); opacity: 0; }
        100% { transform: scale(1.45); opacity: 0; }
      }
      @keyframes aiChatGlow {
        0%, 100% { opacity: 0.2; transform: scale(1); }
        50% { opacity: 0.4; transform: scale(1.08); }
      }
      .ai-chat-float {
        animation: aiChatFloat 6s ease-in-out infinite;
      }
      .ai-chat-soft-glow {
        animation: aiChatGlow 5.8s ease-in-out infinite;
      }
      .ai-chat-pulse-ring {
        animation: aiChatPulseRing 3.8s ease-out infinite;
      }
    `,document.head.appendChild(L)},[]),j.useEffect(()=>{const W=()=>{i(window.innerWidth<=768)};return window.addEventListener("resize",W),()=>window.removeEventListener("resize",W)},[]),j.useEffect(()=>{const W=localStorage.getItem("aiButtonPosition");if(W)try{const L=JSON.parse(W);l(L)}catch{console.warn("Failed to parse saved AI button position")}},[]),j.useEffect(()=>{localStorage.setItem("aiButtonPosition",JSON.stringify(o))},[o]),e.pathname==="/ai-chat")return null;const y=W=>{d(!0),m.current=!1,g({x:W.clientX-o.x,y:W.clientY-o.y}),W.preventDefault()},w=W=>{if(!c||!s)return;m.current=!0;const L=W.clientX-p.x,A=W.clientY-p.y,E=window.innerWidth-56,D=window.innerHeight-56;l({x:Math.max(0,Math.min(E,L)),y:Math.max(0,Math.min(D,A))})},_=()=>{d(!1)},S=W=>{m.current||t("/ai-chat")};j.useEffect(()=>{if(c&&s)return document.addEventListener("mousemove",w),document.addEventListener("mouseup",_),()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",_)}},[c,p,s]);const T=j.useRef(!1),I=W=>{if(!s)return;const L=W.touches[0];d(!0),T.current=!0,m.current=!1,g({x:L.clientX-o.x,y:L.clientY-o.y})},M=W=>{if(!c||!T.current||!s)return;const L=W.touches[0];m.current=!0;const A=L.clientX-p.x,E=L.clientY-p.y,D=window.innerWidth-56,R=window.innerHeight-56;l({x:Math.max(0,Math.min(D,A)),y:Math.max(0,Math.min(R,E))})},K=()=>{s&&(d(!1),T.current=!1)};return j.useEffect(()=>{if(c&&s)return document.addEventListener("touchmove",M,{passive:!1}),document.addEventListener("touchend",K),document.addEventListener("touchcancel",K),()=>{document.removeEventListener("touchmove",M),document.removeEventListener("touchend",K),document.removeEventListener("touchcancel",K)}},[c,p,s]),u.jsxs("button",{ref:n,onClick:S,onMouseDown:y,onTouchStart:I,className:`fixed z-50 w-14 h-14 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center group ${s?c?"cursor-grabbing scale-110":"cursor-grab":""}`,style:{left:o.x,top:o.y,userSelect:"none"},"aria-label":r("ai_chat","AI Chat"),children:[u.jsxs("div",{className:`relative flex items-center justify-center w-full h-full ${c?"":"ai-chat-float"}`,children:[u.jsx("span",{className:`absolute inset-0 rounded-full bg-sky-300/35 blur-xl pointer-events-none transition-opacity duration-500 ${c?"opacity-0":"opacity-70 group-hover:opacity-90 ai-chat-soft-glow"}`}),!c&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"ai-chat-pulse-ring absolute inset-0 rounded-full border border-sky-300/45 pointer-events-none"}),u.jsx("span",{className:"ai-chat-pulse-ring absolute inset-0 rounded-full border border-sky-300/25 pointer-events-none",style:{animationDelay:"1.6s"}})]}),u.jsx(I4e,{className:"w-10 h-10 relative z-10 transition-transform duration-300 group-hover:scale-110"})]}),u.jsx("div",{className:"absolute -top-12 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap",children:r("ai_chat","AI Chat")})]})}const tE=j.createContext({});function rE(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const nE=typeof window<"u",F$=nE?j.useLayoutEffect:j.useEffect,i4=j.createContext(null);function sE(t,e){t.indexOf(e)===-1&&t.push(e)}function iE(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const th=(t,e,r)=>r>e?e:r<t?t:r;let aE=()=>{};const rh={},D$=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function O$(t){return typeof t=="object"&&t!==null}const M$=t=>/^0[^.\s]+$/u.test(t);function oE(t){let e;return()=>(e===void 0&&(e=t()),e)}const Lc=t=>t,R4e=(t,e)=>r=>e(t(r)),xy=(...t)=>t.reduce(R4e),Ax=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n};class lE{constructor(){this.subscriptions=[]}add(e){return sE(this.subscriptions,e),()=>iE(this.subscriptions,e)}notify(e,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,r,n);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const nd=t=>t*1e3,sd=t=>t/1e3;function B$(t,e){return e?t*(1e3/e):0}const V$=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,L4e=1e-7,j4e=12;function F4e(t,e,r,n,s){let i,a,o=0;do a=e+(r-e)/2,i=V$(a,n,s)-t,i>0?r=a:e=a;while(Math.abs(i)>L4e&&++o<j4e);return a}function yy(t,e,r,n){if(t===e&&r===n)return Lc;const s=i=>F4e(i,0,1,t,r);return i=>i===0||i===1?i:V$(s(i),e,n)}const U$=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,z$=t=>e=>1-t(1-e),$$=yy(.33,1.53,.69,.99),cE=z$($$),q$=U$(cE),H$=t=>(t*=2)<1?.5*cE(t):.5*(2-Math.pow(2,-10*(t-1))),uE=t=>1-Math.sin(Math.acos(t)),W$=z$(uE),G$=U$(uE),D4e=yy(.42,0,1,1),O4e=yy(0,0,.58,1),K$=yy(.42,0,.58,1),M4e=t=>Array.isArray(t)&&typeof t[0]!="number",Y$=t=>Array.isArray(t)&&typeof t[0]=="number",B4e={linear:Lc,easeIn:D4e,easeInOut:K$,easeOut:O4e,circIn:uE,circInOut:G$,circOut:W$,backIn:cE,backInOut:q$,backOut:$$,anticipate:H$},V4e=t=>typeof t=="string",fR=t=>{if(Y$(t)){aE(t.length===4);const[e,r,n,s]=t;return yy(e,r,n,s)}else if(V4e(t))return B4e[t];return t},Wv=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function U4e(t,e){let r=new Set,n=new Set,s=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){a.has(d)&&(c.schedule(d),t()),d(o)}const c={schedule:(d,p=!1,g=!1)=>{const y=g&&s?r:n;return p&&a.add(d),y.has(d)||y.add(d),d},cancel:d=>{n.delete(d),a.delete(d)},process:d=>{if(o=d,s){i=!0;return}s=!0,[r,n]=[n,r],r.forEach(l),r.clear(),s=!1,i&&(i=!1,c.process(d))}};return c}const z4e=40;function X$(t,e){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,a=Wv.reduce((I,M)=>(I[M]=U4e(i),I),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:p,preRender:g,render:m,postRender:y}=a,w=()=>{const I=rh.useManualTiming?s.timestamp:performance.now();r=!1,rh.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(I-s.timestamp,z4e),1)),s.timestamp=I,s.isProcessing=!0,o.process(s),l.process(s),c.process(s),d.process(s),p.process(s),g.process(s),m.process(s),y.process(s),s.isProcessing=!1,r&&e&&(n=!1,t(w))},_=()=>{r=!0,n=!0,s.isProcessing||t(w)};return{schedule:Wv.reduce((I,M)=>{const K=a[M];return I[M]=(W,L=!1,A=!1)=>(r||_(),K.schedule(W,L,A)),I},{}),cancel:I=>{for(let M=0;M<Wv.length;M++)a[Wv[M]].cancel(I)},state:s,steps:a}}const{schedule:ti,cancel:Pf,state:ao,steps:Lb}=X$(typeof requestAnimationFrame<"u"?requestAnimationFrame:Lc,!0);let Tw;function $4e(){Tw=void 0}const El={now:()=>(Tw===void 0&&El.set(ao.isProcessing||rh.useManualTiming?ao.timestamp:performance.now()),Tw),set:t=>{Tw=t,queueMicrotask($4e)}},Q$=t=>e=>typeof e=="string"&&e.startsWith(t),dE=Q$("--"),q4e=Q$("var(--"),hE=t=>q4e(t)?H4e.test(t.split("/*")[0].trim()):!1,H4e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,eg={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Nx={...eg,transform:t=>th(0,1,t)},Gv={...eg,default:1},O2=t=>Math.round(t*1e5)/1e5,fE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function W4e(t){return t==null}const G4e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pE=(t,e)=>r=>!!(typeof r=="string"&&G4e.test(r)&&r.startsWith(t)||e&&!W4e(r)&&Object.prototype.hasOwnProperty.call(r,e)),J$=(t,e,r)=>n=>{if(typeof n!="string")return n;const[s,i,a,o]=n.match(fE);return{[t]:parseFloat(s),[e]:parseFloat(i),[r]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},K4e=t=>th(0,255,t),jb={...eg,transform:t=>Math.round(K4e(t))},F0={test:pE("rgb","red"),parse:J$("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+jb.transform(t)+", "+jb.transform(e)+", "+jb.transform(r)+", "+O2(Nx.transform(n))+")"};function Y4e(t){let e="",r="",n="",s="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),s=t.substring(4,5),e+=e,r+=r,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Pk={test:pE("#"),parse:Y4e,transform:F0.transform},vy=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Kh=vy("deg"),id=vy("%"),zr=vy("px"),X4e=vy("vh"),Q4e=vy("vw"),pR={...id,parse:t=>id.parse(t)/100,transform:t=>id.transform(t*100)},Fm={test:pE("hsl","hue"),parse:J$("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+id.transform(O2(e))+", "+id.transform(O2(r))+", "+O2(Nx.transform(n))+")"},la={test:t=>F0.test(t)||Pk.test(t)||Fm.test(t),parse:t=>F0.test(t)?F0.parse(t):Fm.test(t)?Fm.parse(t):Pk.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?F0.transform(t):Fm.transform(t),getAnimatableNone:t=>{const e=la.parse(t);return e.alpha=0,la.transform(e)}},J4e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Z4e(t){return isNaN(t)&&typeof t=="string"&&(t.match(fE)?.length||0)+(t.match(J4e)?.length||0)>0}const Z$="number",eq="color",e3e="var",t3e="var(",mR="${}",r3e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Tx(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const o=e.replace(r3e,l=>(la.test(l)?(n.color.push(i),s.push(eq),r.push(la.parse(l))):l.startsWith(t3e)?(n.var.push(i),s.push(e3e),r.push(l)):(n.number.push(i),s.push(Z$),r.push(parseFloat(l))),++i,mR)).split(mR);return{values:r,split:o,indexes:n,types:s}}function tq(t){return Tx(t).values}function rq(t){const{split:e,types:r}=Tx(t),n=e.length;return s=>{let i="";for(let a=0;a<n;a++)if(i+=e[a],s[a]!==void 0){const o=r[a];o===Z$?i+=O2(s[a]):o===eq?i+=la.transform(s[a]):i+=s[a]}return i}}const n3e=t=>typeof t=="number"?0:la.test(t)?la.getAnimatableNone(t):t;function s3e(t){const e=tq(t);return rq(t)(e.map(n3e))}const Rf={test:Z4e,parse:tq,createTransformer:rq,getAnimatableNone:s3e};function Fb(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function i3e({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let s=0,i=0,a=0;if(!e)s=i=a=r;else{const o=r<.5?r*(1+e):r+e-r*e,l=2*r-o;s=Fb(l,o,t+1/3),i=Fb(l,o,t),a=Fb(l,o,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:n}}function q5(t,e){return r=>r>0?e:t}const fi=(t,e,r)=>t+(e-t)*r,Db=(t,e,r)=>{const n=t*t,s=r*(e*e-n)+n;return s<0?0:Math.sqrt(s)},a3e=[Pk,F0,Fm],o3e=t=>a3e.find(e=>e.test(t));function gR(t){const e=o3e(t);if(!e)return!1;let r=e.parse(t);return e===Fm&&(r=i3e(r)),r}const xR=(t,e)=>{const r=gR(t),n=gR(e);if(!r||!n)return q5(t,e);const s={...r};return i=>(s.red=Db(r.red,n.red,i),s.green=Db(r.green,n.green,i),s.blue=Db(r.blue,n.blue,i),s.alpha=fi(r.alpha,n.alpha,i),F0.transform(s))},Rk=new Set(["none","hidden"]);function l3e(t,e){return Rk.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function c3e(t,e){return r=>fi(t,e,r)}function mE(t){return typeof t=="number"?c3e:typeof t=="string"?hE(t)?q5:la.test(t)?xR:h3e:Array.isArray(t)?nq:typeof t=="object"?la.test(t)?xR:u3e:q5}function nq(t,e){const r=[...t],n=r.length,s=t.map((i,a)=>mE(i)(i,e[a]));return i=>{for(let a=0;a<n;a++)r[a]=s[a](i);return r}}function u3e(t,e){const r={...t,...e},n={};for(const s in r)t[s]!==void 0&&e[s]!==void 0&&(n[s]=mE(t[s])(t[s],e[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function d3e(t,e){const r=[],n={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],a=t.indexes[i][n[i]],o=t.values[a]??0;r[s]=o,n[i]++}return r}const h3e=(t,e)=>{const r=Rf.createTransformer(e),n=Tx(t),s=Tx(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Rk.has(t)&&!s.values.length||Rk.has(e)&&!n.values.length?l3e(t,e):xy(nq(d3e(n,s),s.values),r):q5(t,e)};function sq(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?fi(t,e,r):mE(t)(t,e)}const f3e=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>ti.update(e,r),stop:()=>Pf(e),now:()=>ao.isProcessing?ao.timestamp:El.now()}},iq=(t,e,r=10)=>{let n="";const s=Math.max(Math.round(e/r),2);for(let i=0;i<s;i++)n+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},H5=2e4;function gE(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<H5;)e+=r,n=t.next(e);return e>=H5?1/0:e}function p3e(t,e=100,r){const n=r({...t,keyframes:[0,e]}),s=Math.min(gE(n),H5);return{type:"keyframes",ease:i=>n.next(s*i).value/e,duration:sd(s)}}const m3e=5;function aq(t,e,r){const n=Math.max(e-m3e,0);return B$(r-t(n),e-n)}const ki={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ob=.001;function g3e({duration:t=ki.duration,bounce:e=ki.bounce,velocity:r=ki.velocity,mass:n=ki.mass}){let s,i,a=1-e;a=th(ki.minDamping,ki.maxDamping,a),t=th(ki.minDuration,ki.maxDuration,sd(t)),a<1?(s=c=>{const d=c*a,p=d*t,g=d-r,m=Lk(c,a),y=Math.exp(-p);return Ob-g/m*y},i=c=>{const p=c*a*t,g=p*r+r,m=Math.pow(a,2)*Math.pow(c,2)*t,y=Math.exp(-p),w=Lk(Math.pow(c,2),a);return(-s(c)+Ob>0?-1:1)*((g-m)*y)/w}):(s=c=>{const d=Math.exp(-c*t),p=(c-r)*t+1;return-Ob+d*p},i=c=>{const d=Math.exp(-c*t),p=(r-c)*(t*t);return d*p});const o=5/t,l=y3e(s,i,o);if(t=nd(t),isNaN(l))return{stiffness:ki.stiffness,damping:ki.damping,duration:t};{const c=Math.pow(l,2)*n;return{stiffness:c,damping:a*2*Math.sqrt(n*c),duration:t}}}const x3e=12;function y3e(t,e,r){let n=r;for(let s=1;s<x3e;s++)n=n-t(n)/e(n);return n}function Lk(t,e){return t*Math.sqrt(1-e*e)}const v3e=["duration","bounce"],w3e=["stiffness","damping","mass"];function yR(t,e){return e.some(r=>t[r]!==void 0)}function _3e(t){let e={velocity:ki.velocity,stiffness:ki.stiffness,damping:ki.damping,mass:ki.mass,isResolvedFromDuration:!1,...t};if(!yR(t,w3e)&&yR(t,v3e))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*th(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:ki.mass,stiffness:s,damping:i}}else{const r=g3e(t);e={...e,...r,mass:ki.mass},e.isResolvedFromDuration=!0}return e}function W5(t=ki.visualDuration,e=ki.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],a=r.keyframes[r.keyframes.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:p,velocity:g,isResolvedFromDuration:m}=_3e({...r,velocity:-sd(r.velocity||0)}),y=g||0,w=c/(2*Math.sqrt(l*d)),_=a-i,S=sd(Math.sqrt(l/d)),T=Math.abs(_)<5;n||(n=T?ki.restSpeed.granular:ki.restSpeed.default),s||(s=T?ki.restDelta.granular:ki.restDelta.default);let I;if(w<1){const K=Lk(S,w);I=W=>{const L=Math.exp(-w*S*W);return a-L*((y+w*S*_)/K*Math.sin(K*W)+_*Math.cos(K*W))}}else if(w===1)I=K=>a-Math.exp(-S*K)*(_+(y+S*_)*K);else{const K=S*Math.sqrt(w*w-1);I=W=>{const L=Math.exp(-w*S*W),A=Math.min(K*W,300);return a-L*((y+w*S*_)*Math.sinh(A)+K*_*Math.cosh(A))/K}}const M={calculatedDuration:m&&p||null,next:K=>{const W=I(K);if(m)o.done=K>=p;else{let L=K===0?y:0;w<1&&(L=K===0?nd(y):aq(I,K,W));const A=Math.abs(L)<=n,E=Math.abs(a-W)<=s;o.done=A&&E}return o.value=o.done?a:W,o},toString:()=>{const K=Math.min(gE(M),H5),W=iq(L=>M.next(K*L).value,K,30);return K+"ms "+W},toTransition:()=>{}};return M}W5.applyToOptions=t=>{const e=p3e(t,100,W5);return t.ease=e.ease,t.duration=nd(e.duration),t.type="keyframes",t};function jk({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:d}){const p=t[0],g={done:!1,value:p},m=A=>o!==void 0&&A<o||l!==void 0&&A>l,y=A=>o===void 0?l:l===void 0||Math.abs(o-A)<Math.abs(l-A)?o:l;let w=r*e;const _=p+w,S=a===void 0?_:a(_);S!==_&&(w=S-p);const T=A=>-w*Math.exp(-A/n),I=A=>S+T(A),M=A=>{const E=T(A),D=I(A);g.done=Math.abs(E)<=c,g.value=g.done?S:D};let K,W;const L=A=>{m(g.value)&&(K=A,W=W5({keyframes:[g.value,y(g.value)],velocity:aq(I,A,g.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return L(0),{calculatedDuration:null,next:A=>{let E=!1;return!W&&K===void 0&&(E=!0,M(A),L(A)),K!==void 0&&A>=K?W.next(A-K):(!E&&M(A),g)}}}function b3e(t,e,r){const n=[],s=r||rh.mix||sq,i=t.length-1;for(let a=0;a<i;a++){let o=s(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Lc:e;o=xy(l,o)}n.push(o)}return n}function k3e(t,e,{clamp:r=!0,ease:n,mixer:s}={}){const i=t.length;if(aE(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=b3e(e,n,s),l=o.length,c=d=>{if(a&&d<t[0])return e[0];let p=0;if(l>1)for(;p<t.length-2&&!(d<t[p+1]);p++);const g=Ax(t[p],t[p+1],d);return o[p](g)};return r?d=>c(th(t[0],t[i-1],d)):c}function S3e(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const s=Ax(0,e,n);t.push(fi(r,1,s))}}function E3e(t){const e=[0];return S3e(e,t.length-1),e}function C3e(t,e){return t.map(r=>r*e)}function A3e(t,e){return t.map(()=>e||K$).splice(0,t.length-1)}function M2({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const s=M4e(n)?n.map(fR):fR(n),i={done:!1,value:e[0]},a=C3e(r&&r.length===e.length?r:E3e(e),t),o=k3e(a,e,{ease:Array.isArray(s)?s:A3e(e,s)});return{calculatedDuration:t,next:l=>(i.value=o(l),i.done=l>=t,i)}}const N3e=t=>t!==null;function xE(t,{repeat:e,repeatType:r="loop"},n,s=1){const i=t.filter(N3e),o=s<0||e&&r!=="loop"&&e%2===1?0:i.length-1;return!o||n===void 0?i[o]:n}const T3e={decay:jk,inertia:jk,tween:M2,keyframes:M2,spring:W5};function oq(t){typeof t.type=="string"&&(t.type=T3e[t.type])}class yE{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const I3e=t=>t/100;class vE extends yE{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==El.now()&&this.tick(El.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;oq(e);const{type:r=M2,repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:a=0}=e;let{keyframes:o}=e;const l=r||M2;l!==M2&&typeof o[0]!="number"&&(this.mixKeyframes=xy(I3e,sq(o[0],o[1])),o=[0,100]);const c=l({...e,keyframes:o});i==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=gE(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=c}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:n,totalDuration:s,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:c=0,keyframes:d,repeat:p,repeatType:g,repeatDelay:m,type:y,onUpdate:w,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const S=this.currentTime-c*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?S<0:S>s;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let I=this.currentTime,M=n;if(p){const A=Math.min(this.currentTime,s)/o;let E=Math.floor(A),D=A%1;!D&&A>=1&&(D=1),D===1&&E--,E=Math.min(E,p+1),!!(E%2)&&(g==="reverse"?(D=1-D,m&&(D-=m/o)):g==="mirror"&&(M=a)),I=th(0,1,D)*o}const K=T?{done:!1,value:d[0]}:M.next(I);i&&(K.value=i(K.value));let{done:W}=K;!T&&l!==null&&(W=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&W);return L&&y!==jk&&(K.value=xE(d,this.options,_,this.speed)),w&&w(K.value),L&&this.finish(),K}then(e,r){return this.finished.then(e,r)}get duration(){return sd(this.calculatedDuration)}get time(){return sd(this.currentTime)}set time(e){e=nd(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(El.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=sd(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=f3e,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(El.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function P3e(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const D0=t=>t*180/Math.PI,Fk=t=>{const e=D0(Math.atan2(t[1],t[0]));return Dk(e)},R3e={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Fk,rotateZ:Fk,skewX:t=>D0(Math.atan(t[1])),skewY:t=>D0(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Dk=t=>(t=t%360,t<0&&(t+=360),t),vR=Fk,wR=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),_R=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),L3e={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:wR,scaleY:_R,scale:t=>(wR(t)+_R(t))/2,rotateX:t=>Dk(D0(Math.atan2(t[6],t[5]))),rotateY:t=>Dk(D0(Math.atan2(-t[2],t[0]))),rotateZ:vR,rotate:vR,skewX:t=>D0(Math.atan(t[4])),skewY:t=>D0(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Ok(t){return t.includes("scale")?1:0}function Mk(t,e){if(!t||t==="none")return Ok(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=L3e,s=r;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=R3e,s=o}if(!s)return Ok(e);const i=n[e],a=s[1].split(",").map(F3e);return typeof i=="function"?i(a):a[i]}const j3e=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return Mk(r,e)};function F3e(t){return parseFloat(t.trim())}const tg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],rg=new Set(tg),bR=t=>t===eg||t===zr,D3e=new Set(["x","y","z"]),O3e=tg.filter(t=>!D3e.has(t));function M3e(t){const e=[];return O3e.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const G0={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Mk(e,"x"),y:(t,{transform:e})=>Mk(e,"y")};G0.translateX=G0.x;G0.translateY=G0.y;const K0=new Set;let Bk=!1,Vk=!1,Uk=!1;function lq(){if(Vk){const t=Array.from(K0).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const s=M3e(n);s.length&&(r.set(n,s),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,a])=>{n.getValue(i)?.set(a)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Vk=!1,Bk=!1,K0.forEach(t=>t.complete(Uk)),K0.clear()}function cq(){K0.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Vk=!0)})}function B3e(){Uk=!0,cq(),lq(),Uk=!1}class wE{constructor(e,r,n,s,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(K0.add(this),Bk||(Bk=!0,ti.read(cq),ti.resolveKeyframes(lq))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:s}=this;if(e[0]===null){const i=s?.get(),a=e[e.length-1];if(i!==void 0)e[0]=i;else if(n&&r){const o=n.readValue(r,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),s&&i===void 0&&s.set(e[0])}P3e(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),K0.delete(this)}cancel(){this.state==="scheduled"&&(K0.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const V3e=t=>t.startsWith("--");function U3e(t,e,r){V3e(e)?t.style.setProperty(e,r):t.style[e]=r}const z3e=oE(()=>window.ScrollTimeline!==void 0),$3e={};function q3e(t,e){const r=oE(t);return()=>$3e[e]??r()}const uq=q3e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),s2=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,kR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:s2([0,.65,.55,1]),circOut:s2([.55,0,1,.45]),backIn:s2([.31,.01,.66,-.59]),backOut:s2([.33,1.53,.69,.99])};function dq(t,e){if(t)return typeof t=="function"?uq()?iq(t,e):"ease-out":Y$(t)?s2(t):Array.isArray(t)?t.map(r=>dq(r,e)||kR.easeOut):kR[t]}function H3e(t,e,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:o="easeOut",times:l}={},c=void 0){const d={[e]:r};l&&(d.offset=l);const p=dq(o,s);Array.isArray(p)&&(d.easing=p);const g={delay:n,duration:s,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return c&&(g.pseudoElement=c),t.animate(d,g)}function hq(t){return typeof t=="function"&&"applyToOptions"in t}function W3e({type:t,...e}){return hq(t)&&uq()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class G3e extends yE{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:n,keyframes:s,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=e,aE(typeof e.type!="string");const c=W3e(e);this.animation=H3e(r,n,s,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=xE(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):U3e(r,n,d),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return sd(Number(e))}get time(){return sd(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=nd(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&z3e()?(this.animation.timeline=e,Lc):r(this)}}const fq={anticipate:H$,backInOut:q$,circInOut:G$};function K3e(t){return t in fq}function Y3e(t){typeof t.ease=="string"&&K3e(t.ease)&&(t.ease=fq[t.ease])}const SR=10;class X3e extends G3e{constructor(e){Y3e(e),oq(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:n,onComplete:s,element:i,...a}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const o=new vE({...a,autoplay:!1}),l=nd(this.finishedTime??this.time);r.setWithVelocity(o.sample(l-SR).value,o.sample(l).value,SR),o.stop()}}const ER=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Rf.test(t)||t==="0")&&!t.startsWith("url("));function Q3e(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function J3e(t,e,r,n){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],a=ER(s,e),o=ER(i,e);return!a||!o?!1:Q3e(t)||(r==="spring"||hq(r))&&n}function zk(t){t.duration=0,t.type}const Z3e=new Set(["opacity","clipPath","filter","transform"]),ebe=oE(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function tbe(t){const{motionValue:e,name:r,repeatDelay:n,repeatType:s,damping:i,type:a}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return ebe()&&r&&Z3e.has(r)&&(r!=="transform"||!c)&&!l&&!n&&s!=="mirror"&&i!==0&&a!=="inertia"}const rbe=40;class nbe extends yE{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",keyframes:o,name:l,motionValue:c,element:d,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=El.now();const g={autoplay:e,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:a,name:l,motionValue:c,element:d,...p},m=d?.KeyframeResolver||wE;this.keyframeResolver=new m(o,(y,w,_)=>this.onKeyframesResolved(y,w,g,!_),l,c,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,r,n,s){this.keyframeResolver=void 0;const{name:i,type:a,velocity:o,delay:l,isHandoff:c,onUpdate:d}=n;this.resolvedAt=El.now(),J3e(e,i,a,o)||((rh.instantAnimations||!l)&&d?.(xE(e,n,r)),e[0]=e[e.length-1],zk(n),n.repeat=0);const g={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>rbe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:e},m=!c&&tbe(g)?new X3e({...g,element:g.motionValue.owner.current}):new vE(g);m.finished.then(()=>this.notifyFinished()).catch(Lc),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),B3e()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const sbe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ibe(t){const e=sbe.exec(t);if(!e)return[,];const[,r,n,s]=e;return[`--${r??n}`,s]}function pq(t,e,r=1){const[n,s]=ibe(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const a=i.trim();return D$(a)?parseFloat(a):a}return hE(s)?pq(s,e,r+1):s}function _E(t,e){return t?.[e]??t?.default??t}const mq=new Set(["width","height","top","left","right","bottom",...tg]),abe={test:t=>t==="auto",parse:t=>t},gq=t=>e=>e.test(t),xq=[eg,zr,id,Kh,Q4e,X4e,abe],CR=t=>xq.find(gq(t));function obe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||M$(t):!0}const lbe=new Set(["brightness","contrast","saturate","opacity"]);function cbe(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(fE)||[];if(!n)return t;const s=r.replace(n,"");let i=lbe.has(e)?1:0;return n!==r&&(i*=100),e+"("+i+s+")"}const ube=/\b([a-z-]*)\(.*?\)/gu,$k={...Rf,getAnimatableNone:t=>{const e=t.match(ube);return e?e.map(cbe).join(" "):t}},AR={...eg,transform:Math.round},dbe={rotate:Kh,rotateX:Kh,rotateY:Kh,rotateZ:Kh,scale:Gv,scaleX:Gv,scaleY:Gv,scaleZ:Gv,skew:Kh,skewX:Kh,skewY:Kh,distance:zr,translateX:zr,translateY:zr,translateZ:zr,x:zr,y:zr,z:zr,perspective:zr,transformPerspective:zr,opacity:Nx,originX:pR,originY:pR,originZ:zr},bE={borderWidth:zr,borderTopWidth:zr,borderRightWidth:zr,borderBottomWidth:zr,borderLeftWidth:zr,borderRadius:zr,radius:zr,borderTopLeftRadius:zr,borderTopRightRadius:zr,borderBottomRightRadius:zr,borderBottomLeftRadius:zr,width:zr,maxWidth:zr,height:zr,maxHeight:zr,top:zr,right:zr,bottom:zr,left:zr,padding:zr,paddingTop:zr,paddingRight:zr,paddingBottom:zr,paddingLeft:zr,margin:zr,marginTop:zr,marginRight:zr,marginBottom:zr,marginLeft:zr,backgroundPositionX:zr,backgroundPositionY:zr,...dbe,zIndex:AR,fillOpacity:Nx,strokeOpacity:Nx,numOctaves:AR},hbe={...bE,color:la,backgroundColor:la,outlineColor:la,fill:la,stroke:la,borderColor:la,borderTopColor:la,borderRightColor:la,borderBottomColor:la,borderLeftColor:la,filter:$k,WebkitFilter:$k},yq=t=>hbe[t];function vq(t,e){let r=yq(t);return r!==$k&&(r=Rf),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const fbe=new Set(["auto","none","0"]);function pbe(t,e,r){let n=0,s;for(;n<t.length&&!s;){const i=t[n];typeof i=="string"&&!fbe.has(i)&&Tx(i).values.length&&(s=t[n]),n++}if(s&&r)for(const i of e)t[i]=vq(r,s)}class mbe extends wE{constructor(e,r,n,s,i){super(e,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),hE(c))){const d=pq(c,r.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!mq.has(n)||e.length!==2)return;const[s,i]=e,a=CR(s),o=CR(i);if(a!==o)if(bR(a)&&bR(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else G0[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let s=0;s<e.length;s++)(e[s]===null||obe(e[s]))&&n.push(s);n.length&&pbe(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=G0[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){const{element:e,name:r,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const s=e.getValue(r);s&&s.jump(this.measuredOrigin,!1);const i=n.length-1,a=n[i];n[i]=G0[r](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,l])=>{e.getValue(o).set(l)}),this.resolveNoneKeyframes()}}function gbe(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const s=r?.[t]??n.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const wq=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function _q(t){return O$(t)&&"offsetHeight"in t}const NR=30,xbe=t=>!isNaN(parseFloat(t));class ybe{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const s=El.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=El.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=xbe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new lE);const n=this.events[e].add(r);return e==="change"?()=>{n(),ti.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=El.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>NR)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,NR);return B$(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function N1(t,e){return new ybe(t,e)}const{schedule:kE}=X$(queueMicrotask,!1),nu={x:!1,y:!1};function bq(){return nu.x||nu.y}function vbe(t){return t==="x"||t==="y"?nu[t]?null:(nu[t]=!0,()=>{nu[t]=!1}):nu.x||nu.y?null:(nu.x=nu.y=!0,()=>{nu.x=nu.y=!1})}function kq(t,e){const r=gbe(t),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[r,s,()=>n.abort()]}function TR(t){return!(t.pointerType==="touch"||bq())}function wbe(t,e,r={}){const[n,s,i]=kq(t,r),a=o=>{if(!TR(o))return;const{target:l}=o,c=e(l,o);if(typeof c!="function"||!l)return;const d=p=>{TR(p)&&(c(p),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,s)};return n.forEach(o=>{o.addEventListener("pointerenter",a,s)}),i}const Sq=(t,e)=>e?t===e?!0:Sq(t,e.parentElement):!1,SE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,_be=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function bbe(t){return _be.has(t.tagName)||t.tabIndex!==-1}const Iw=new WeakSet;function IR(t){return e=>{e.key==="Enter"&&t(e)}}function Mb(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const kbe=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=IR(()=>{if(Iw.has(r))return;Mb(r,"down");const s=IR(()=>{Mb(r,"up")}),i=()=>Mb(r,"cancel");r.addEventListener("keyup",s,e),r.addEventListener("blur",i,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function PR(t){return SE(t)&&!bq()}function Sbe(t,e,r={}){const[n,s,i]=kq(t,r),a=o=>{const l=o.currentTarget;if(!PR(o))return;Iw.add(l);const c=e(l,o),d=(m,y)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),Iw.has(l)&&Iw.delete(l),PR(m)&&typeof c=="function"&&c(m,{success:y})},p=m=>{d(m,l===window||l===document||r.useGlobalTarget||Sq(l,m.target))},g=m=>{d(m,!1)};window.addEventListener("pointerup",p,s),window.addEventListener("pointercancel",g,s)};return n.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",a,s),_q(o)&&(o.addEventListener("focus",c=>kbe(c,s)),!bbe(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),i}function Eq(t){return O$(t)&&"ownerSVGElement"in t}function Ebe(t){return Eq(t)&&t.tagName==="svg"}const zo=t=>!!(t&&t.getVelocity),Cbe=[...xq,la,Rf],Abe=t=>Cbe.find(gq(t)),EE=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Nbe extends j.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=_q(n)&&n.offsetWidth||0,i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Tbe({children:t,isPresent:e,anchorX:r,root:n}){const s=j.useId(),i=j.useRef(null),a=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=j.useContext(EE);return j.useInsertionEffect(()=>{const{width:l,height:c,top:d,left:p,right:g}=a.current;if(e||!i.current||!l||!c)return;const m=r==="left"?`left: ${p}`:`right: ${g}`;i.current.dataset.motionPopId=s;const y=document.createElement("style");o&&(y.nonce=o);const w=n??document.head;return w.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            ${m}px !important;
            top: ${d}px !important;
          }
        `),()=>{w.contains(y)&&w.removeChild(y)}},[e]),u.jsx(Nbe,{isPresent:e,childRef:i,sizeRef:a,children:j.cloneElement(t,{ref:i})})}const Ibe=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:a,anchorX:o,root:l})=>{const c=rE(Pbe),d=j.useId();let p=!0,g=j.useMemo(()=>(p=!1,{id:d,initial:e,isPresent:r,custom:s,onExitComplete:m=>{c.set(m,!0);for(const y of c.values())if(!y)return;n&&n()},register:m=>(c.set(m,!1),()=>c.delete(m))}),[r,c,n]);return i&&p&&(g={...g}),j.useMemo(()=>{c.forEach((m,y)=>c.set(y,!1))},[r]),j.useEffect(()=>{!r&&!c.size&&n&&n()},[r]),a==="popLayout"&&(t=u.jsx(Tbe,{isPresent:r,anchorX:o,root:l,children:t})),u.jsx(i4.Provider,{value:g,children:t})};function Pbe(){return new Map}function Cq(t=!0){const e=j.useContext(i4);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=e,i=j.useId();j.useEffect(()=>{if(t)return s(i)},[t]);const a=j.useCallback(()=>t&&n&&n(i),[i,n,t]);return!r&&n?[!1,a]:[!0]}const Kv=t=>t.key||"";function RR(t){const e=[];return j.Children.forEach(t,r=>{j.isValidElement(r)&&e.push(r)}),e}const Rbe=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:a=!1,anchorX:o="left",root:l})=>{const[c,d]=Cq(a),p=j.useMemo(()=>RR(t),[t]),g=a&&!c?[]:p.map(Kv),m=j.useRef(!0),y=j.useRef(p),w=rE(()=>new Map),[_,S]=j.useState(p),[T,I]=j.useState(p);F$(()=>{m.current=!1,y.current=p;for(let W=0;W<T.length;W++){const L=Kv(T[W]);g.includes(L)?w.delete(L):w.get(L)!==!0&&w.set(L,!1)}},[T,g.length,g.join("-")]);const M=[];if(p!==_){let W=[...p];for(let L=0;L<T.length;L++){const A=T[L],E=Kv(A);g.includes(E)||(W.splice(L,0,A),M.push(A))}return i==="wait"&&M.length&&(W=M),I(RR(W)),S(p),null}const{forceRender:K}=j.useContext(tE);return u.jsx(u.Fragment,{children:T.map(W=>{const L=Kv(W),A=a&&!c?!1:p===T||g.includes(L),E=()=>{if(w.has(L))w.set(L,!0);else return;let D=!0;w.forEach(R=>{R||(D=!1)}),D&&(K?.(),I(y.current),a&&d?.(),n&&n())};return u.jsx(Ibe,{isPresent:A,initial:!m.current||r?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,root:l,onExitComplete:A?void 0:E,anchorX:o,children:W},L)})})},Aq=j.createContext({strict:!1}),LR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},T1={};for(const t in LR)T1[t]={isEnabled:e=>LR[t].some(r=>!!e[r])};function Lbe(t){for(const e in t)T1[e]={...T1[e],...t[e]}}const jbe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function G5(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||jbe.has(t)}let Nq=t=>!G5(t);function Fbe(t){typeof t=="function"&&(Nq=e=>e.startsWith("on")?!G5(e):t(e))}try{Fbe(require("@emotion/is-prop-valid").default)}catch{}function Dbe(t,e,r){const n={};for(const s in t)s==="values"&&typeof t.values=="object"||(Nq(s)||r===!0&&G5(s)||!e&&!G5(s)||t.draggable&&s.startsWith("onDrag"))&&(n[s]=t[s]);return n}const a4=j.createContext({});function o4(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ix(t){return typeof t=="string"||Array.isArray(t)}const CE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],AE=["initial",...CE];function l4(t){return o4(t.animate)||AE.some(e=>Ix(t[e]))}function Tq(t){return!!(l4(t)||t.variants)}function Obe(t,e){if(l4(t)){const{initial:r,animate:n}=t;return{initial:r===!1||Ix(r)?r:void 0,animate:Ix(n)?n:void 0}}return t.inherit!==!1?e:{}}function Mbe(t){const{initial:e,animate:r}=Obe(t,j.useContext(a4));return j.useMemo(()=>({initial:e,animate:r}),[jR(e),jR(r)])}function jR(t){return Array.isArray(t)?t.join(" "):t}const Px={};function Bbe(t){for(const e in t)Px[e]=t[e],dE(e)&&(Px[e].isCSSVariable=!0)}function Iq(t,{layout:e,layoutId:r}){return rg.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!Px[t]||t==="opacity")}const Vbe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ube=tg.length;function zbe(t,e,r){let n="",s=!0;for(let i=0;i<Ube;i++){const a=tg[i],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||r){const c=wq(o,bE[a]);if(!l){s=!1;const d=Vbe[a]||a;n+=`${d}(${c}) `}r&&(e[a]=c)}}return n=n.trim(),r?n=r(e,s?"":n):s&&(n="none"),n}function NE(t,e,r){const{style:n,vars:s,transformOrigin:i}=t;let a=!1,o=!1;for(const l in e){const c=e[l];if(rg.has(l)){a=!0;continue}else if(dE(l)){s[l]=c;continue}else{const d=wq(c,bE[l]);l.startsWith("origin")?(o=!0,i[l]=d):n[l]=d}}if(e.transform||(a||r?n.transform=zbe(e,t.transform,r):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:d=0}=i;n.transformOrigin=`${l} ${c} ${d}`}}const TE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Pq(t,e,r){for(const n in e)!zo(e[n])&&!Iq(n,r)&&(t[n]=e[n])}function $be({transformTemplate:t},e){return j.useMemo(()=>{const r=TE();return NE(r,e,t),Object.assign({},r.vars,r.style)},[e])}function qbe(t,e){const r=t.style||{},n={};return Pq(n,r,t),Object.assign(n,$be(t,e)),n}function Hbe(t,e){const r={},n=qbe(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const Wbe={offset:"stroke-dashoffset",array:"stroke-dasharray"},Gbe={offset:"strokeDashoffset",array:"strokeDasharray"};function Kbe(t,e,r=1,n=0,s=!0){t.pathLength=1;const i=s?Wbe:Gbe;t[i.offset]=zr.transform(-n);const a=zr.transform(e),o=zr.transform(r);t[i.array]=`${a} ${o}`}function Rq(t,{attrX:e,attrY:r,attrScale:n,pathLength:s,pathSpacing:i=1,pathOffset:a=0,...o},l,c,d){if(NE(t,o,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:g}=t;p.transform&&(g.transform=p.transform,delete p.transform),(g.transform||p.transformOrigin)&&(g.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),g.transform&&(g.transformBox=d?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),r!==void 0&&(p.y=r),n!==void 0&&(p.scale=n),s!==void 0&&Kbe(p,s,i,a,!1)}const Lq=()=>({...TE(),attrs:{}}),jq=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Ybe(t,e,r,n){const s=j.useMemo(()=>{const i=Lq();return Rq(i,e,jq(n),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};Pq(i,t.style,t),s.style={...i,...s.style}}return s}const Xbe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function IE(t){return typeof t!="string"||t.includes("-")?!1:!!(Xbe.indexOf(t)>-1||/[A-Z]/u.test(t))}function Qbe(t,e,r,{latestValues:n},s,i=!1){const o=(IE(t)?Ybe:Hbe)(e,n,s,t),l=Dbe(e,typeof t=="string",i),c=t!==j.Fragment?{...l,...o,ref:r}:{},{children:d}=e,p=j.useMemo(()=>zo(d)?d.get():d,[d]);return j.createElement(t,{...c,children:p})}function FR(t){const e=[{},{}];return t?.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function PE(t,e,r,n){if(typeof e=="function"){const[s,i]=FR(n);e=e(r!==void 0?r:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=FR(n);e=e(r!==void 0?r:t.custom,s,i)}return e}function Pw(t){return zo(t)?t.get():t}function Jbe({scrapeMotionValuesFromProps:t,createRenderState:e},r,n,s){return{latestValues:Zbe(r,n,s,t),renderState:e()}}function Zbe(t,e,r,n){const s={},i=n(t,{});for(const g in i)s[g]=Pw(i[g]);let{initial:a,animate:o}=t;const l=l4(t),c=Tq(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let d=r?r.initial===!1:!1;d=d||a===!1;const p=d?o:a;if(p&&typeof p!="boolean"&&!o4(p)){const g=Array.isArray(p)?p:[p];for(let m=0;m<g.length;m++){const y=PE(t,g[m]);if(y){const{transitionEnd:w,transition:_,...S}=y;for(const T in S){let I=S[T];if(Array.isArray(I)){const M=d?I.length-1:0;I=I[M]}I!==null&&(s[T]=I)}for(const T in w)s[T]=w[T]}}}return s}const Fq=t=>(e,r)=>{const n=j.useContext(a4),s=j.useContext(i4),i=()=>Jbe(t,e,n,s);return r?i():rE(i)};function RE(t,e,r){const{style:n}=t,s={};for(const i in n)(zo(n[i])||e.style&&zo(e.style[i])||Iq(i,t)||r?.getValue(i)?.liveStyle!==void 0)&&(s[i]=n[i]);return s}const e6e=Fq({scrapeMotionValuesFromProps:RE,createRenderState:TE});function Dq(t,e,r){const n=RE(t,e,r);for(const s in t)if(zo(t[s])||zo(e[s])){const i=tg.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=t[s]}return n}const t6e=Fq({scrapeMotionValuesFromProps:Dq,createRenderState:Lq}),r6e=Symbol.for("motionComponentSymbol");function Dm(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function n6e(t,e,r){return j.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):Dm(r)&&(r.current=n))},[e])}const LE=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),s6e="framerAppearId",Oq="data-"+LE(s6e),Mq=j.createContext({});function i6e(t,e,r,n,s){const{visualElement:i}=j.useContext(a4),a=j.useContext(Aq),o=j.useContext(i4),l=j.useContext(EE).reducedMotion,c=j.useRef(null);n=n||a.renderer,!c.current&&n&&(c.current=n(t,{visualState:e,parent:i,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=c.current,p=j.useContext(Mq);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&a6e(c.current,r,s,p);const g=j.useRef(!1);j.useInsertionEffect(()=>{d&&g.current&&d.update(r,o)});const m=r[Oq],y=j.useRef(!!m&&!window.MotionHandoffIsComplete?.(m)&&window.MotionHasOptimisedAnimation?.(m));return F$(()=>{d&&(g.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),y.current&&d.animationState&&d.animationState.animateChanges())}),j.useEffect(()=>{d&&(!y.current&&d.animationState&&d.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(m)}),y.current=!1),d.enteringChildren=void 0)}),d}function a6e(t,e,r,n){const{layoutId:s,layout:i,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:Bq(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!a||o&&Dm(o),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:l,layoutRoot:c})}function Bq(t){if(t)return t.options.allowProjection!==!1?t.projection:Bq(t.parent)}function Bb(t,{forwardMotionProps:e=!1}={},r,n){r&&Lbe(r);const s=IE(t)?t6e:e6e;function i(o,l){let c;const d={...j.useContext(EE),...o,layoutId:o6e(o)},{isStatic:p}=d,g=Mbe(o),m=s(o,p);if(!p&&nE){l6e();const y=c6e(d);c=y.MeasureLayout,g.visualElement=i6e(t,m,d,n,y.ProjectionNode)}return u.jsxs(a4.Provider,{value:g,children:[c&&g.visualElement?u.jsx(c,{visualElement:g.visualElement,...d}):null,Qbe(t,o,n6e(m,g.visualElement,l),m,p,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=j.forwardRef(i);return a[r6e]=t,a}function o6e({layoutId:t}){const e=j.useContext(tE).id;return e&&t!==void 0?e+"-"+t:t}function l6e(t,e){j.useContext(Aq).strict}function c6e(t){const{drag:e,layout:r}=T1;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e?.isEnabled(t)||r?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function u6e(t,e){if(typeof Proxy>"u")return Bb;const r=new Map,n=(i,a)=>Bb(i,a,t,e),s=(i,a)=>n(i,a);return new Proxy(s,{get:(i,a)=>a==="create"?n:(r.has(a)||r.set(a,Bb(a,void 0,t,e)),r.get(a))})}function Vq({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function d6e({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function h6e(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Vb(t){return t===void 0||t===1}function qk({scale:t,scaleX:e,scaleY:r}){return!Vb(t)||!Vb(e)||!Vb(r)}function v0(t){return qk(t)||Uq(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Uq(t){return DR(t.x)||DR(t.y)}function DR(t){return t&&t!=="0%"}function K5(t,e,r){const n=t-r,s=e*n;return r+s}function OR(t,e,r,n,s){return s!==void 0&&(t=K5(t,s,n)),K5(t,r,n)+e}function Hk(t,e=0,r=1,n,s){t.min=OR(t.min,e,r,n,s),t.max=OR(t.max,e,r,n,s)}function zq(t,{x:e,y:r}){Hk(t.x,e.translate,e.scale,e.originPoint),Hk(t.y,r.translate,r.scale,r.originPoint)}const MR=.999999999999,BR=1.0000000000001;function f6e(t,e,r,n=!1){const s=r.length;if(!s)return;e.x=e.y=1;let i,a;for(let o=0;o<s;o++){i=r[o],a=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Mm(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,zq(t,a)),n&&v0(i.latestValues)&&Mm(t,i.latestValues))}e.x<BR&&e.x>MR&&(e.x=1),e.y<BR&&e.y>MR&&(e.y=1)}function Om(t,e){t.min=t.min+e,t.max=t.max+e}function VR(t,e,r,n,s=.5){const i=fi(t.min,t.max,s);Hk(t,e,r,i,n)}function Mm(t,e){VR(t.x,e.x,e.scaleX,e.scale,e.originX),VR(t.y,e.y,e.scaleY,e.scale,e.originY)}function $q(t,e){return Vq(h6e(t.getBoundingClientRect(),e))}function p6e(t,e,r){const n=$q(t,r),{scroll:s}=e;return s&&(Om(n.x,s.offset.x),Om(n.y,s.offset.y)),n}const UR=()=>({translate:0,scale:1,origin:0,originPoint:0}),Bm=()=>({x:UR(),y:UR()}),zR=()=>({min:0,max:0}),Vi=()=>({x:zR(),y:zR()}),Wk={current:null},qq={current:!1};function m6e(){if(qq.current=!0,!!nE)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Wk.current=t.matches;t.addEventListener("change",e),e()}else Wk.current=!1}const g6e=new WeakMap;function x6e(t,e,r){for(const n in e){const s=e[n],i=r[n];if(zo(s))t.addValue(n,s);else if(zo(i))t.addValue(n,N1(s,{owner:t}));else if(i!==s)if(t.hasValue(n)){const a=t.getValue(n);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=t.getStaticValue(n);t.addValue(n,N1(a!==void 0?a:s,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const $R=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class y6e{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=El.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,ti.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=l4(r),this.isVariantNode=Tq(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...p}=this.scrapeMotionValuesFromProps(r,{},this);for(const g in p){const m=p[g];l[g]!==void 0&&zo(m)&&m.set(l[g])}}mount(e){this.current=e,g6e.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),qq.current||m6e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Wk.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Pf(this.notifyUpdate),Pf(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=rg.has(e);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&ti.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{s(),i&&i(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in T1){const r=T1[e];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Vi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<$R.length;n++){const s=$R[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,a=e[i];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=x6e(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=N1(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(D$(n)||M$(n))?n=parseFloat(n):!Abe(n)&&Rf.test(r)&&(n=vq(e,r)),this.setBaseTarget(e,zo(n)?n.get():n)),zo(n)?n.get():n}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const i=PE(this.props,r,this.presenceContext?.custom);i&&(n=i[e])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!zo(s)?s:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new lE),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){kE.render(this.render)}}class Hq extends y6e{constructor(){super(...arguments),this.KeyframeResolver=mbe}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;zo(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function Wq(t,{style:e,vars:r},n,s){const i=t.style;let a;for(a in e)i[a]=e[a];s?.applyProjectionStyles(i,n);for(a in r)i.setProperty(a,r[a])}function v6e(t){return window.getComputedStyle(t)}class w6e extends Hq{constructor(){super(...arguments),this.type="html",this.renderInstance=Wq}readValueFromInstance(e,r){if(rg.has(r))return this.projection?.isProjecting?Ok(r):j3e(e,r);{const n=v6e(e),s=(dE(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:r}){return $q(e,r)}build(e,r,n){NE(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return RE(e,r,n)}}const Gq=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _6e(t,e,r,n){Wq(t,e,void 0,n);for(const s in e.attrs)t.setAttribute(Gq.has(s)?s:LE(s),e.attrs[s])}class b6e extends Hq{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Vi}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(rg.has(r)){const n=yq(r);return n&&n.default||0}return r=Gq.has(r)?r:LE(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return Dq(e,r,n)}build(e,r,n){Rq(e,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,r,n,s){_6e(e,r,n,s)}mount(e){this.isSVGTag=jq(e.tagName),super.mount(e)}}const k6e=(t,e)=>IE(t)?new b6e(e):new w6e(e,{allowProjection:t!==j.Fragment});function a1(t,e,r){const n=t.getProps();return PE(n,e,r!==void 0?r:n.custom,t)}const Gk=t=>Array.isArray(t);function S6e(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,N1(r))}function E6e(t){return Gk(t)?t[t.length-1]||0:t}function C6e(t,e){const r=a1(t,e);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const a in i){const o=E6e(i[a]);S6e(t,a,o)}}function A6e(t){return!!(zo(t)&&t.add)}function Kk(t,e){const r=t.getValue("willChange");if(A6e(r))return r.add(e);if(!r&&rh.WillChange){const n=new rh.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function Kq(t){return t.props[Oq]}const N6e=t=>t!==null;function T6e(t,{repeat:e,repeatType:r="loop"},n){const s=t.filter(N6e),i=e&&r!=="loop"&&e%2===1?0:s.length-1;return s[i]}const I6e={type:"spring",stiffness:500,damping:25,restSpeed:10},P6e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),R6e={type:"keyframes",duration:.8},L6e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},j6e=(t,{keyframes:e})=>e.length>2?R6e:rg.has(t)?t.startsWith("scale")?P6e(e[1]):I6e:L6e;function F6e({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:o,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const jE=(t,e,r,n={},s,i)=>a=>{const o=_E(n,t)||{},l=o.delay||n.delay||0;let{elapsed:c=0}=n;c=c-nd(l);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:i?void 0:s};F6e(o)||Object.assign(d,j6e(t,d)),d.duration&&(d.duration=nd(d.duration)),d.repeatDelay&&(d.repeatDelay=nd(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(zk(d),d.delay===0&&(p=!0)),(rh.instantAnimations||rh.skipAnimations)&&(p=!0,zk(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,p&&!i&&e.get()!==void 0){const g=T6e(d.keyframes,o);if(g!==void 0){ti.update(()=>{d.onUpdate(g),d.onComplete()});return}}return o.isSync?new vE(d):new nbe(d)};function D6e({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function Yq(t,e,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:a,...o}=e;n&&(i=n);const l=[],c=s&&t.animationState&&t.animationState.getState()[s];for(const d in o){const p=t.getValue(d,t.latestValues[d]??null),g=o[d];if(g===void 0||c&&D6e(c,d))continue;const m={delay:r,..._E(i||{},d)},y=p.get();if(y!==void 0&&!p.isAnimating&&!Array.isArray(g)&&g===y&&!m.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const S=Kq(t);if(S){const T=window.MotionHandoffAnimation(S,d,ti);T!==null&&(m.startTime=T,w=!0)}}Kk(t,d),p.start(jE(d,p,g,t.shouldReduceMotion&&mq.has(d)?{type:!1}:m,t,w));const _=p.animation;_&&l.push(_)}return a&&Promise.all(l).then(()=>{ti.update(()=>{a&&C6e(t,a)})}),l}function Xq(t,e,r,n=0,s=1){const i=Array.from(t).sort((c,d)=>c.sortNodePosition(d)).indexOf(e),a=t.size,o=(a-1)*n;return typeof r=="function"?r(i,a):s===1?i*n:o-i*n}function Yk(t,e,r={}){const n=a1(t,e,r.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(Yq(t,n,r)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:p}=s;return O6e(t,e,l,c,d,p,r)}:()=>Promise.resolve(),{when:o}=s;if(o){const[l,c]=o==="beforeChildren"?[i,a]:[a,i];return l().then(()=>c())}else return Promise.all([i(),a(r.delay)])}function O6e(t,e,r=0,n=0,s=0,i=1,a){const o=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),o.push(Yk(l,e,{...a,delay:r+(typeof n=="function"?0:n)+Xq(t.variantChildren,l,n,s,i)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function M6e(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(i=>Yk(t,i,r));n=Promise.all(s)}else if(typeof e=="string")n=Yk(t,e,r);else{const s=typeof e=="function"?a1(t,e,r.custom):e;n=Promise.all(Yq(t,s,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}function Qq(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}const B6e=AE.length;function Jq(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?Jq(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<B6e;r++){const n=AE[r],s=t.props[n];(Ix(s)||s===!1)&&(e[n]=s)}return e}const V6e=[...CE].reverse(),U6e=CE.length;function z6e(t){return e=>Promise.all(e.map(({animation:r,options:n})=>M6e(t,r,n)))}function $6e(t){let e=z6e(t),r=qR(),n=!0;const s=l=>(c,d)=>{const p=a1(t,d,l==="exit"?t.presenceContext?.custom:void 0);if(p){const{transition:g,transitionEnd:m,...y}=p;c={...c,...y,...m}}return c};function i(l){e=l(t)}function a(l){const{props:c}=t,d=Jq(t.parent)||{},p=[],g=new Set;let m={},y=1/0;for(let _=0;_<U6e;_++){const S=V6e[_],T=r[S],I=c[S]!==void 0?c[S]:d[S],M=Ix(I),K=S===l?T.isActive:null;K===!1&&(y=_);let W=I===d[S]&&I!==c[S]&&M;if(W&&n&&t.manuallyAnimateOnMount&&(W=!1),T.protectedKeys={...m},!T.isActive&&K===null||!I&&!T.prevProp||o4(I)||typeof I=="boolean")continue;const L=q6e(T.prevProp,I);let A=L||S===l&&T.isActive&&!W&&M||_>y&&M,E=!1;const D=Array.isArray(I)?I:[I];let R=D.reduce(s(S),{});K===!1&&(R={});const{prevResolvedValues:F={}}=T,V={...F,...R},Z=he=>{A=!0,g.has(he)&&(E=!0,g.delete(he)),T.needsAnimating[he]=!0;const ae=t.getValue(he);ae&&(ae.liveStyle=!1)};for(const he in V){const ae=R[he],H=F[he];if(m.hasOwnProperty(he))continue;let te=!1;Gk(ae)&&Gk(H)?te=!Qq(ae,H):te=ae!==H,te?ae!=null?Z(he):g.add(he):ae!==void 0&&g.has(he)?Z(he):T.protectedKeys[he]=!0}T.prevProp=I,T.prevResolvedValues=R,T.isActive&&(m={...m,...R}),n&&t.blockInitialAnimation&&(A=!1);const fe=W&&L;A&&(!fe||E)&&p.push(...D.map(he=>{const ae={type:S};if(typeof he=="string"&&n&&!fe&&t.manuallyAnimateOnMount&&t.parent){const{parent:H}=t,te=a1(H,he);if(H.enteringChildren&&te){const{delayChildren:G}=te.transition||{};ae.delay=Xq(H.enteringChildren,t,G)}}return{animation:he,options:ae}}))}if(g.size){const _={};if(typeof c.initial!="boolean"){const S=a1(t,Array.isArray(c.initial)?c.initial[0]:c.initial);S&&S.transition&&(_.transition=S.transition)}g.forEach(S=>{const T=t.getBaseTarget(S),I=t.getValue(S);I&&(I.liveStyle=!0),_[S]=T??null}),p.push({animation:_})}let w=!!p.length;return n&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(w=!1),n=!1,w?e(p):Promise.resolve()}function o(l,c){if(r[l].isActive===c)return Promise.resolve();t.variantChildren?.forEach(p=>p.animationState?.setActive(l,c)),r[l].isActive=c;const d=a(l);for(const p in r)r[p].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:i,getState:()=>r,reset:()=>{r=qR(),n=!0}}}function q6e(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Qq(e,t):!1}function m0(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function qR(){return{animate:m0(!0),whileInView:m0(),whileHover:m0(),whileTap:m0(),whileDrag:m0(),whileFocus:m0(),exit:m0()}}class Wf{constructor(e){this.isMounted=!1,this.node=e}update(){}}class H6e extends Wf{constructor(e){super(e),e.animationState||(e.animationState=$6e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();o4(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let W6e=0;class G6e extends Wf{constructor(){super(...arguments),this.id=W6e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);r&&!e&&s.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const K6e={animation:{Feature:H6e},exit:{Feature:G6e}};function Rx(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function wy(t){return{point:{x:t.pageX,y:t.pageY}}}const Y6e=t=>e=>SE(e)&&t(e,wy(e));function B2(t,e,r,n){return Rx(t,e,Y6e(r),n)}const Zq=1e-4,X6e=1-Zq,Q6e=1+Zq,eH=.01,J6e=0-eH,Z6e=0+eH;function al(t){return t.max-t.min}function eke(t,e,r){return Math.abs(t-e)<=r}function HR(t,e,r,n=.5){t.origin=n,t.originPoint=fi(e.min,e.max,t.origin),t.scale=al(r)/al(e),t.translate=fi(r.min,r.max,t.origin)-t.originPoint,(t.scale>=X6e&&t.scale<=Q6e||isNaN(t.scale))&&(t.scale=1),(t.translate>=J6e&&t.translate<=Z6e||isNaN(t.translate))&&(t.translate=0)}function V2(t,e,r,n){HR(t.x,e.x,r.x,n?n.originX:void 0),HR(t.y,e.y,r.y,n?n.originY:void 0)}function WR(t,e,r){t.min=r.min+e.min,t.max=t.min+al(e)}function tke(t,e,r){WR(t.x,e.x,r.x),WR(t.y,e.y,r.y)}function GR(t,e,r){t.min=e.min-r.min,t.max=t.min+al(e)}function U2(t,e,r){GR(t.x,e.x,r.x),GR(t.y,e.y,r.y)}function Ec(t){return[t("x"),t("y")]}const tH=({current:t})=>t?t.ownerDocument.defaultView:null,KR=(t,e)=>Math.abs(t-e);function rke(t,e){const r=KR(t.x,e.x),n=KR(t.y,e.y);return Math.sqrt(r**2+n**2)}class rH{constructor(e,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=zb(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=rke(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!y)return;const{point:w}=g,{timestamp:_}=ao;this.history.push({...w,timestamp:_});const{onStart:S,onMove:T}=this.handlers;m||(S&&S(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,g)},this.handlePointerMove=(g,m)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Ub(m,this.transformPagePoint),ti.update(this.updatePoint,!0)},this.handlePointerUp=(g,m)=>{this.end();const{onEnd:y,onSessionEnd:w,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=zb(g.type==="pointercancel"?this.lastMoveEventInfo:Ub(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(g,S),w&&w(g,S)},!SE(e))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=a,this.contextWindow=s||window;const o=wy(e),l=Ub(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=ao;this.history=[{...c,timestamp:d}];const{onSessionStart:p}=r;p&&p(e,zb(l,this.history)),this.removeListeners=xy(B2(this.contextWindow,"pointermove",this.handlePointerMove),B2(this.contextWindow,"pointerup",this.handlePointerUp),B2(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Pf(this.updatePoint)}}function Ub(t,e){return e?{point:e(t.point)}:t}function YR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function zb({point:t},e){return{point:t,delta:YR(t,nH(e)),offset:YR(t,nke(e)),velocity:ske(e,.1)}}function nke(t){return t[0]}function nH(t){return t[t.length-1]}function ske(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const s=nH(t);for(;r>=0&&(n=t[r],!(s.timestamp-n.timestamp>nd(e)));)r--;if(!n)return{x:0,y:0};const i=sd(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function ike(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?fi(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?fi(r,t,n.max):Math.min(t,r)),t}function XR(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function ake(t,{top:e,left:r,bottom:n,right:s}){return{x:XR(t.x,r,s),y:XR(t.y,e,n)}}function QR(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function oke(t,e){return{x:QR(t.x,e.x),y:QR(t.y,e.y)}}function lke(t,e){let r=.5;const n=al(t),s=al(e);return s>n?r=Ax(e.min,e.max-n,t.min):n>s&&(r=Ax(t.min,t.max-s,e.min)),th(0,1,r)}function cke(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const Xk=.35;function uke(t=Xk){return t===!1?t=0:t===!0&&(t=Xk),{x:JR(t,"left","right"),y:JR(t,"top","bottom")}}function JR(t,e,r){return{min:ZR(t,e),max:ZR(t,r)}}function ZR(t,e){return typeof t=="number"?t:t[e]||0}const dke=new WeakMap;class hke{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Vi(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(wy(p).point)},a=(p,g)=>{const{drag:m,dragPropagation:y,onDragStart:w}=this.getProps();if(m&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=vbe(m),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ec(S=>{let T=this.getAxisMotionValue(S).get()||0;if(id.test(T)){const{projection:I}=this.visualElement;if(I&&I.layout){const M=I.layout.layoutBox[S];M&&(T=al(M)*(parseFloat(T)/100))}}this.originPoint[S]=T}),w&&ti.postRender(()=>w(p,g)),Kk(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g;const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:w,onDrag:_}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:S}=g;if(y&&this.currentDirection===null){this.currentDirection=fke(S),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",g.point,S),this.updateAxis("y",g.point,S),this.visualElement.render(),_&&_(p,g)},l=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g,this.stop(p,g),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Ec(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new rH(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:tH(this.visualElement)})}stop(e,r){const n=e||this.latestPointerEvent,s=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!n)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&ti.postRender(()=>o(n,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:s}=this.getProps();if(!n||!Yv(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=ike(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Dm(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=ake(n.layoutBox,e):this.constraints=!1,this.elastic=uke(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ec(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=cke(n.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Dm(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=p6e(n,s.root,this.visualElement.getTransformPagePoint());let a=oke(s.layout.layoutBox,i);if(r){const o=r(d6e(a));this.hasMutatedConstraints=!!o,o&&(a=Vq(o))}return a}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Ec(d=>{if(!Yv(d,r,this.currentDirection))return;let p=l&&l[d]||{};a&&(p={min:0,max:0});const g=s?200:1e6,m=s?40:1e7,y={type:"inertia",velocity:n?e[d]:0,bounceStiffness:g,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...p};return this.startAxisValueAnimation(d,y)});return Promise.all(c).then(o)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return Kk(this.visualElement,e),n.start(jE(e,n,0,r,this.visualElement,!1))}stopAnimation(){Ec(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ec(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ec(r=>{const{drag:n}=this.getProps();if(!Yv(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:a,max:o}=s.layout.layoutBox[r];i.set(e[r]-fi(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Dm(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ec(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();s[a]=lke({min:l,max:l},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ec(a=>{if(!Yv(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(fi(l,c,s[a]))})}addListeners(){if(!this.visualElement.current)return;dke.set(this.visualElement,this);const e=this.visualElement.current,r=B2(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();Dm(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ti.read(n);const a=Rx(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ec(d=>{const p=this.getAxisMotionValue(d);p&&(this.originPoint[d]+=l[d].translate,p.set(p.get()+l[d].translate))}),this.visualElement.render())}));return()=>{a(),r(),i(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=Xk,dragMomentum:o=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:o}}}function Yv(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function fke(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class pke extends Wf{constructor(e){super(e),this.removeGroupControls=Lc,this.removeListeners=Lc,this.controls=new hke(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Lc}unmount(){this.removeGroupControls(),this.removeListeners()}}const eL=t=>(e,r)=>{t&&ti.postRender(()=>t(e,r))};class mke extends Wf{constructor(){super(...arguments),this.removePointerDownListener=Lc}onPointerDown(e){this.session=new rH(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tH(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:eL(e),onStart:eL(r),onMove:n,onEnd:(i,a)=>{delete this.session,s&&ti.postRender(()=>s(i,a))}}}mount(){this.removePointerDownListener=B2(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Rw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function tL(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const qg={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(zr.test(t))t=parseFloat(t);else return t;const r=tL(t,e.target.x),n=tL(t,e.target.y);return`${r}% ${n}%`}},gke={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,s=Rf.parse(t);if(s.length>5)return n;const i=Rf.createTransformer(t),a=typeof s[0]!="number"?1:0,o=r.x.scale*e.x,l=r.y.scale*e.y;s[0+a]/=o,s[1+a]/=l;const c=fi(o,l,.5);return typeof s[2+a]=="number"&&(s[2+a]/=c),typeof s[3+a]=="number"&&(s[3+a]/=c),i(s)}};let $b=!1;class xke extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=e;Bbe(yke),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),$b&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Rw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,{projection:a}=n;return a&&(a.isPresent=i,$b=!0,s||e.layoutDependency!==r||r===void 0||e.isPresent!==i?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||ti.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),kE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=e;$b=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sH(t){const[e,r]=Cq(),n=j.useContext(tE);return u.jsx(xke,{...t,layoutGroup:n,switchLayoutGroup:j.useContext(Mq),isPresent:e,safeToRemove:r})}const yke={borderRadius:{...qg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qg,borderTopRightRadius:qg,borderBottomLeftRadius:qg,borderBottomRightRadius:qg,boxShadow:gke};function vke(t,e,r){const n=zo(t)?t:N1(t);return n.start(jE("",n,e,r)),n.animation}const wke=(t,e)=>t.depth-e.depth;class _ke{constructor(){this.children=[],this.isDirty=!1}add(e){sE(this.children,e),this.isDirty=!0}remove(e){iE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(wke),this.isDirty=!1,this.children.forEach(e)}}function bke(t,e){const r=El.now(),n=({timestamp:s})=>{const i=s-r;i>=e&&(Pf(n),t(i-e))};return ti.setup(n,!0),()=>Pf(n)}const iH=["TopLeft","TopRight","BottomLeft","BottomRight"],kke=iH.length,rL=t=>typeof t=="string"?parseFloat(t):t,nL=t=>typeof t=="number"||zr.test(t);function Ske(t,e,r,n,s,i){s?(t.opacity=fi(0,r.opacity??1,Eke(n)),t.opacityExit=fi(e.opacity??1,0,Cke(n))):i&&(t.opacity=fi(e.opacity??1,r.opacity??1,n));for(let a=0;a<kke;a++){const o=`border${iH[a]}Radius`;let l=sL(e,o),c=sL(r,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||nL(l)===nL(c)?(t[o]=Math.max(fi(rL(l),rL(c),n),0),(id.test(c)||id.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||r.rotate)&&(t.rotate=fi(e.rotate||0,r.rotate||0,n))}function sL(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Eke=aH(0,.5,W$),Cke=aH(.5,.95,Lc);function aH(t,e,r){return n=>n<t?0:n>e?1:r(Ax(t,e,n))}function iL(t,e){t.min=e.min,t.max=e.max}function _c(t,e){iL(t.x,e.x),iL(t.y,e.y)}function aL(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function oL(t,e,r,n,s){return t-=e,t=K5(t,1/r,n),s!==void 0&&(t=K5(t,1/s,n)),t}function Ake(t,e=0,r=1,n=.5,s,i=t,a=t){if(id.test(e)&&(e=parseFloat(e),e=fi(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=fi(i.min,i.max,n);t===i&&(o-=e),t.min=oL(t.min,e,r,o,s),t.max=oL(t.max,e,r,o,s)}function lL(t,e,[r,n,s],i,a){Ake(t,e[r],e[n],e[s],e.scale,i,a)}const Nke=["x","scaleX","originX"],Tke=["y","scaleY","originY"];function cL(t,e,r,n){lL(t.x,e,Nke,r?r.x:void 0,n?n.x:void 0),lL(t.y,e,Tke,r?r.y:void 0,n?n.y:void 0)}function uL(t){return t.translate===0&&t.scale===1}function oH(t){return uL(t.x)&&uL(t.y)}function dL(t,e){return t.min===e.min&&t.max===e.max}function Ike(t,e){return dL(t.x,e.x)&&dL(t.y,e.y)}function hL(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function lH(t,e){return hL(t.x,e.x)&&hL(t.y,e.y)}function fL(t){return al(t.x)/al(t.y)}function pL(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Pke{constructor(){this.members=[]}add(e){sE(this.members,e),e.scheduleRender()}remove(e){if(iE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(s=>e===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Rke(t,e,r){let n="";const s=t.x.translate/e.x,i=t.y.translate/e.y,a=r?.z||0;if((s||i||a)&&(n=`translate3d(${s}px, ${i}px, ${a}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:c,rotate:d,rotateX:p,rotateY:g,skewX:m,skewY:y}=r;c&&(n=`perspective(${c}px) ${n}`),d&&(n+=`rotate(${d}deg) `),p&&(n+=`rotateX(${p}deg) `),g&&(n+=`rotateY(${g}deg) `),m&&(n+=`skewX(${m}deg) `),y&&(n+=`skewY(${y}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const qb=["","X","Y","Z"],Lke=1e3;let jke=0;function Hb(t,e,r,n){const{latestValues:s}=e;s[t]&&(r[t]=s[t],e.setStaticValue(t,0),n&&(n[t]=0))}function cH(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=Kq(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",ti,!(s||i))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&cH(n)}function uH({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(a={},o=e?.()){this.id=jke++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Oke),this.nodes.forEach(Uke),this.nodes.forEach(zke),this.nodes.forEach(Mke)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new _ke)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new lE),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=Eq(a)&&!Ebe(a),this.instance=a;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let d,p=0;const g=()=>this.root.updateBlockedByResize=!1;ti.read(()=>{p=window.innerWidth}),t(a,()=>{const m=window.innerWidth;m!==p&&(p=m,this.root.updateBlockedByResize=!0,d&&d(),d=bke(g,250),Rw.hasAnimatedSinceResize&&(Rw.hasAnimatedSinceResize=!1,this.nodes.forEach(xL)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeLayoutChanged:g,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||Gke,{onLayoutAnimationStart:w,onLayoutAnimationComplete:_}=c.getProps(),S=!this.targetLayout||!lH(this.targetLayout,m),T=!p&&g;if(this.options.layoutRoot||this.resumeFrom||T||p&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={..._E(y,"layout"),onPlay:w,onComplete:_};(c.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(d,T)}else p||xL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Pf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($ke),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cH(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const p=this.path[d];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(mL);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(gL);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Vke),this.nodes.forEach(Fke),this.nodes.forEach(Dke)):this.nodes.forEach(gL),this.clearAllSnapshots();const o=El.now();ao.delta=th(0,1e3/60,o-ao.timestamp),ao.timestamp=o,ao.isProcessing=!0,Lb.update.process(ao),Lb.preRender.process(ao),Lb.render.process(ao),ao.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,kE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Bke),this.sharedNodes.forEach(qke)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ti.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ti.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!al(this.snapshot.measuredBox.x)&&!al(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Vi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!oH(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;a&&this.instance&&(o||v0(this.latestValues)||d)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),Kke(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Vi();const o=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Yke))){const{scroll:c}=this.root;c&&(Om(o.x,c.offset.x),Om(o.y,c.offset.y))}return o}removeElementScroll(a){const o=Vi();if(_c(o,a),this.scroll?.wasRoot)return o;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:d,options:p}=c;c!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&_c(o,a),Om(o.x,d.offset.x),Om(o.y,d.offset.y))}return o}applyTransform(a,o=!1){const l=Vi();_c(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Mm(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),v0(d.latestValues)&&Mm(l,d.latestValues)}return v0(this.latestValues)&&Mm(l,this.latestValues),l}removeTransform(a){const o=Vi();_c(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!v0(c.latestValues))continue;qk(c.latestValues)&&c.updateSnapshot();const d=Vi(),p=c.measurePageBox();_c(d,p),cL(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return v0(this.latestValues)&&cL(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ao.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=ao.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vi(),this.relativeTargetOrigin=Vi(),U2(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),_c(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Vi(),this.targetWithTransforms=Vi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tke(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_c(this.target,this.layout.layoutBox),zq(this.target,this.targetDelta)):_c(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vi(),this.relativeTargetOrigin=Vi(),U2(this.relativeTargetOrigin,this.target,g.target),_c(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||qk(this.parent.latestValues)||Uq(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ao.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;_c(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;f6e(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Vi());const{target:m}=a;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(aL(this.prevProjectionDelta.x,this.projectionDelta.x),aL(this.prevProjectionDelta.y,this.projectionDelta.y)),V2(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!pL(this.projectionDelta.x,this.prevProjectionDelta.x)||!pL(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Bm(),this.projectionDelta=Bm(),this.projectionDeltaWithTransform=Bm()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},p=Bm();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=Vi(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,w=m!==y,_=this.getStack(),S=!_||_.members.length<=1,T=!!(w&&!S&&this.options.crossfade===!0&&!this.path.some(Wke));this.animationProgress=0;let I;this.mixTargetDelta=M=>{const K=M/1e3;yL(p.x,a.x,K),yL(p.y,a.y,K),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(U2(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Hke(this.relativeTarget,this.relativeTargetOrigin,g,K),I&&Ike(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=Vi()),_c(I,this.relativeTarget)),w&&(this.animationValues=d,Ske(d,c,this.latestValues,K,T,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Pf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ti.update(()=>{Rw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=N1(0)),this.currentAnimation=vke(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Lke),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:d}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&dH(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Vi();const p=al(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+p;const g=al(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+g}_c(o,l),Mm(o,d),V2(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Pke),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&Hb("z",a,c,this.animationValues);for(let d=0;d<qb.length;d++)Hb(`rotate${qb[d]}`,a,c,this.animationValues),Hb(`skew${qb[d]}`,a,c,this.animationValues);a.render();for(const d in c)a.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=Pw(o?.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=Pw(o?.pointerEvents)||""),this.hasProjected&&!v0(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=c.animationValues||c.latestValues;this.applyTransformsToTarget();let p=Rke(this.projectionDeltaWithTransform,this.treeScale,d);l&&(p=l(d,p)),a.transform=p;const{x:g,y:m}=this.projectionDelta;a.transformOrigin=`${g.origin*100}% ${m.origin*100}% 0`,c.animationValues?a.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const y in Px){if(d[y]===void 0)continue;const{correct:w,applyTo:_,isCSSVariable:S}=Px[y],T=p==="none"?d[y]:w(d[y],c);if(_){const I=_.length;for(let M=0;M<I;M++)a[_[M]]=T}else S?this.options.visualElement.renderState.vars[y]=T:a[y]=T}this.options.layoutId&&(a.pointerEvents=c===this?Pw(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(mL),this.root.sharedNodes.clear()}}}function Fke(t){t.updateLayout()}function Dke(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=t.layout,{animationType:s}=t.options,i=e.source!==t.layout.source;s==="size"?Ec(d=>{const p=i?e.measuredBox[d]:e.layoutBox[d],g=al(p);p.min=r[d].min,p.max=p.min+g}):dH(s,e.layoutBox,r)&&Ec(d=>{const p=i?e.measuredBox[d]:e.layoutBox[d],g=al(r[d]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+g)});const a=Bm();V2(a,r,e.layoutBox);const o=Bm();i?V2(o,t.applyTransform(n,!0),e.measuredBox):V2(o,r,e.layoutBox);const l=!oH(a);let c=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:g}=d;if(p&&g){const m=Vi();U2(m,e.layoutBox,p.layoutBox);const y=Vi();U2(y,r,g.layoutBox),lH(m,y)||(c=!0),d.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=m,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Oke(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Mke(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Bke(t){t.clearSnapshot()}function mL(t){t.clearMeasurements()}function gL(t){t.isLayoutDirty=!1}function Vke(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function xL(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Uke(t){t.resolveTargetDelta()}function zke(t){t.calcProjection()}function $ke(t){t.resetSkewAndRotation()}function qke(t){t.removeLeadSnapshot()}function yL(t,e,r){t.translate=fi(e.translate,0,r),t.scale=fi(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function vL(t,e,r,n){t.min=fi(e.min,r.min,n),t.max=fi(e.max,r.max,n)}function Hke(t,e,r,n){vL(t.x,e.x,r.x,n),vL(t.y,e.y,r.y,n)}function Wke(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Gke={duration:.45,ease:[.4,0,.1,1]},wL=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),_L=wL("applewebkit/")&&!wL("chrome/")?Math.round:Lc;function bL(t){t.min=_L(t.min),t.max=_L(t.max)}function Kke(t){bL(t.x),bL(t.y)}function dH(t,e,r){return t==="position"||t==="preserve-aspect"&&!eke(fL(e),fL(r),.2)}function Yke(t){return t!==t.root&&t.scroll?.wasRoot}const Xke=uH({attachResizeListener:(t,e)=>Rx(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Wb={current:void 0},hH=uH({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Wb.current){const t=new Xke({});t.mount(window),t.setOptions({layoutScroll:!0}),Wb.current=t}return Wb.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Qke={pan:{Feature:mke},drag:{Feature:pke,ProjectionNode:hH,MeasureLayout:sH}};function kL(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&ti.postRender(()=>i(e,wy(e)))}class Jke extends Wf{mount(){const{current:e}=this.node;e&&(this.unmount=wbe(e,(r,n)=>(kL(this.node,n,"Start"),s=>kL(this.node,s,"End"))))}unmount(){}}class Zke extends Wf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xy(Rx(this.node.current,"focus",()=>this.onFocus()),Rx(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function SL(t,e,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&ti.postRender(()=>i(e,wy(e)))}class e8e extends Wf{mount(){const{current:e}=this.node;e&&(this.unmount=Sbe(e,(r,n)=>(SL(this.node,n,"Start"),(s,{success:i})=>SL(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Qk=new WeakMap,Gb=new WeakMap,t8e=t=>{const e=Qk.get(t.target);e&&e(t)},r8e=t=>{t.forEach(t8e)};function n8e({root:t,...e}){const r=t||document;Gb.has(r)||Gb.set(r,{});const n=Gb.get(r),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(r8e,{root:t,...e})),n[s]}function s8e(t,e,r){const n=n8e(e);return Qk.set(t,r),n.observe(t),()=>{Qk.delete(t),n.unobserve(t)}}const i8e={some:0,all:1};class a8e extends Wf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=e,a={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:i8e[s]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:p}=this.node.getProps(),g=c?d:p;g&&g(l)};return s8e(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(o8e(e,r))&&this.startObserver()}unmount(){}}function o8e({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const l8e={inView:{Feature:a8e},tap:{Feature:e8e},focus:{Feature:Zke},hover:{Feature:Jke}},c8e={layout:{ProjectionNode:hH,MeasureLayout:sH}},u8e={...K6e,...l8e,...Qke,...c8e},Ua=u6e(u8e,k6e),d8e="/assets/PharmaseaLogo-J4_RPPc9.png";function ng({children:t}){const[e,r]=j.useState(!1);return j.useEffect(()=>{const n=()=>{const i=document.documentElement.classList.contains("dark");r(i)};n();const s=new MutationObserver(n);return s.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>s.disconnect()},[]),u.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:u.jsxs("div",{className:"max-w-md mx-auto px-6 pt-14 pb-10",children:[u.jsxs("div",{className:"flex flex-col items-center mb-10",children:[u.jsx("img",{src:e?"/PharmLogoDark.png":d8e,alt:"Pharmasea",className:"w-40 h-15 object-contain transition-opacity duration-300"}),u.jsx("div",{className:"mt-3 text-zinc-600 dark:text-zinc-400 text-[13px]"})]}),t]})})}function h8e({className:t,stroke:e}){return u.jsx("svg",{viewBox:"0 0 91 152",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:u.jsx("path",{d:"M17.9558 53.3893L8.27792 64.6462C6.66938 66.5171 5.41493 68.6715 4.57719 71.0016L2.02085 78.1119C1.34548 79.9904 1 81.9738 1 83.9727V144.038C1 145.898 2.49116 147.406 4.33061 147.406M17.9558 53.3893V48.6425M17.9558 53.3893L34.6089 64.4141M53.3814 18.7837L54.3809 16.3407C55.821 12.8205 54.0914 8.79384 50.5647 7.4562L47.3257 6.2277L32.2398 1.3232C31.0192 0.92638 29.7113 0.894269 28.4731 1.23072L23.0885 2.69388C15.4164 4.77859 10.0835 11.8129 10.0835 19.8478V25.8211C10.0835 26.8331 10.3089 27.832 10.7429 28.7438L17.2964 42.5105C17.7304 43.4223 17.9558 44.4213 17.9558 45.4332V48.6425M53.3814 18.7837L44.7483 21.5411C42.9395 22.1189 41.5043 23.5227 40.873 25.3318L39.9367 28.0151C39.0833 30.4607 36.1645 31.416 34.0563 29.9399C32.1107 28.5775 29.4231 29.2739 28.3648 31.4147L27.1285 33.9155C26.5328 35.1206 26.7663 36.576 27.7082 37.5287C29.0866 38.9229 28.8627 41.2433 27.2438 42.3416L17.9558 48.6425M53.3814 18.7837V25.8478C53.3814 26.8426 53.5992 27.8251 54.0192 28.7247L57.1065 35.3372C57.8674 36.9669 57.0683 38.9047 55.3879 39.5045C54.1855 39.9338 53.3814 41.0833 53.3814 42.373V45.3402C53.3814 47.4234 52.4286 49.3894 50.8006 50.6655L49.8214 51.4331C48.2553 52.6607 46.1993 53.0475 44.3015 52.4717C40.9857 51.4656 37.5042 53.4323 36.6123 56.8154L34.6089 64.4141M34.6089 64.4141L45.9226 79.1266C46.832 80.3093 47.3257 81.7647 47.3257 83.263V112.494M47.3257 112.494L57.378 114.673C58.9322 115.01 60.0426 116.399 60.0426 118.007M47.3257 112.494L39.2526 111.134C36.4692 110.664 34.2802 108.472 33.7884 105.662L28.5532 75.7452M5.84452 90.4449L16.5969 122.799C17.4252 125.291 19.6115 127.069 22.1963 127.351L44.9035 129.829M44.9035 129.829L58.4183 131.304C59.2857 131.399 60.0426 130.712 60.0426 129.829M44.9035 129.829V144.344C44.9035 146.035 43.5479 147.406 41.8756 147.406M4.33061 147.406V152M4.33061 147.406H41.8756M41.8756 147.406V152M60.0426 118.007L74.9597 115.396C75.4962 115.302 76.0484 115.39 76.5296 115.648L77.5323 116.185C78.9238 116.93 78.8663 118.966 77.435 119.629C75.9577 120.314 75.9577 122.437 77.435 123.122L80.026 124.323C80.6177 124.597 81.2779 124.683 81.9188 124.569L89.2869 123.253C89.8746 123.149 90.2421 123.876 89.8139 124.296L83.029 130.688C81.8106 132.153 79.7275 132.829 77.6711 132.516L60.0426 129.829M60.0426 118.007V129.829",stroke:e,strokeWidth:"1"})})}function f8e({className:t,stroke:e}){return u.jsx("svg",{viewBox:"0 0 124 154",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:u.jsx("path",{d:"M91.0549 25.0462L73.1047 18.9491L69.7581 17.6418M91.0549 25.0462V15.9124C91.0549 12.2404 89.4035 8.76383 86.5593 6.44828L84.0113 4.37386C82.2516 2.94119 80.1275 2.02961 77.8784 1.74191L72.8466 1.09826C69.1654 0.627362 65.4709 1.86534 62.8128 4.46045L55.1546 11.9374M91.0549 25.0462L86.187 39.6793M55.1546 11.9374L42.0162 13.7096C40.4803 13.9168 39.3342 15.2303 39.3342 16.7831C39.3342 18.0841 40.1446 19.2469 41.3636 19.6948L45.7766 21.3161C47.53 21.9603 49.4304 22.0904 51.255 21.6911L53.3292 21.2372M55.1546 11.9374L69.7581 17.6418M69.7581 17.6418L53.3292 21.2372M86.187 39.6793L84.1073 37.9861C82.3434 36.55 81.3192 34.3938 81.3192 32.1164V29.8544C81.3192 28.0625 80.2099 26.4585 78.5355 25.8293C77.2288 25.3383 75.7654 25.5149 74.6123 26.3026L74.4142 26.438C71.9808 28.1005 68.6396 27.1674 67.4151 24.4834L66.8363 23.2147C65.6954 20.7139 62.9904 19.3251 60.2983 19.8579L53.3292 21.2372M86.187 39.6793V42.3816C86.187 47.066 83.509 51.3364 79.2968 53.3686L69.7581 57.9706M53.3292 29.619L50.776 32.8169C49.6344 34.2468 50.2196 36.3768 51.9308 37.0198C52.8004 37.3466 53.4399 38.1002 53.6221 39.0127L54.6658 44.2419C54.9838 45.8349 55.789 47.2892 56.9697 48.4027C59.0405 50.3557 62.0076 51.0253 64.7141 50.1505L65.0424 50.0443M65.0424 50.0443L69.7581 48.5201M65.0424 50.0443L69.7581 57.9706M69.7581 57.9706L58.4277 73.5484C57.2767 75.1309 56.523 76.9678 56.2302 78.9039L55.2919 85.1091C55.2005 85.7137 55.1546 86.3243 55.1546 86.9358V105.833M86.187 51.5686L94.7057 60.4094M94.7057 60.4094L97.2251 68.7403C97.5719 69.8869 97.7481 71.0785 97.7481 72.2767V117.417M94.7057 60.4094L86.5047 58.9153C83.1962 58.3125 79.7862 59.1084 77.0841 61.1141L76.4306 61.5991C74.274 63.1998 72.706 65.4699 71.9705 68.0562L66.3979 87.6526C65.643 90.3072 67.1319 93.082 69.7581 93.915M94.7057 60.4094C96.5984 57.3751 99.9175 55.5317 103.489 55.5317H110.691C116.582 55.5317 121.628 59.7609 122.669 65.5717L122.809 66.3525C122.936 67.0635 123 67.7844 123 68.5068V114.611C123 116.438 122.439 118.22 121.394 119.717C119.731 122.097 117.014 123.514 114.114 123.514H98.3397M97.7481 117.417L98.3397 123.514M97.7481 117.417L84.4731 103.089M56.6758 119.856V136.318C56.6758 138.33 58.3187 139.953 60.3267 139.925M56.6758 119.856L71.2748 118.208C75.606 117.719 79.3455 114.946 81.0785 110.939L84.4731 103.089M56.6758 119.856L51.8317 119.407C49.6266 119.202 47.4077 119.604 45.4139 120.57L41.0962 122.661C39.944 123.219 38.6602 123.447 37.3868 123.319L30.7529 122.655C29.0361 122.483 28.0373 120.626 28.8379 119.094M86.187 99.126L94.7057 79.9202M86.187 99.126L69.7581 93.915M86.187 99.126L84.4731 103.089M98.3397 123.514L99.3773 134.208C99.6467 136.986 97.4902 139.401 94.7057 139.44M55.1546 105.833L53.3508 106.408C50.2244 107.405 46.8289 107.094 43.934 105.547L39.3342 103.089M55.1546 105.833L60.1247 104.684C64.3874 103.698 67.7941 100.495 69.0476 96.2957L69.7581 93.915M39.3342 103.089H32.8489C32.3189 103.089 31.8032 103.261 31.3792 103.58C29.9657 104.642 30.1054 106.809 31.6436 107.68L31.8803 107.814M39.3342 103.089V85.7124C39.3342 82.5134 36.7461 79.9202 33.5536 79.9202M18.6459 113.759H29.0173C29.7889 113.759 30.5391 113.505 31.152 113.035L32.1866 112.242C33.6989 111.083 33.5377 108.753 31.8803 107.814M18.6459 113.759L20.9268 116.299C22.9188 118.516 25.8982 119.569 28.8379 119.094M18.6459 113.759H13.1696C6.44851 113.759 1 108.3 1 101.565V86.9318C1 83.0594 4.13289 79.9202 7.99751 79.9202M28.8379 119.094L33.5536 118.332M7.99751 79.9202L8.39241 78.1395C8.92777 75.7255 10.1829 73.5317 11.9914 71.849L13.4738 70.4696M7.99751 79.9202H33.5536M7.99751 79.9202V100.65M13.4738 70.4696H13.1696C10.9852 70.4696 9.21446 68.6953 9.21446 66.5065C9.21446 64.3178 10.9852 62.5434 13.1696 62.5434H28.0773C30.2617 62.5434 32.0324 64.3178 32.0324 66.5065V66.8114C32.0324 68.8318 30.3979 70.4696 28.3815 70.4696M13.4738 70.4696H28.3815M28.3815 70.4696L30.207 74.4328L33.5536 79.9202M33.5536 79.9202V88.4561C33.5536 95.1908 28.1051 100.65 21.384 100.65H7.99751M7.99751 100.65C7.99751 104.684 11.2741 107.946 15.2991 107.92L31.8803 107.814M60.3267 139.925V154M60.3267 139.925L94.7057 139.44M94.7057 139.44V154M20.7756 83.5784V89.9804M20.7756 89.9804V96.3824M20.7756 89.9804H26.5561M20.7756 89.9804H14.3865",stroke:e,strokeWidth:"1"})})}function p8e(){const[t,e]=j.useState("customer"),r=Jn(),n=()=>{r(t==="customer"?"/auth/customer/signin":"/auth/pharmacy/signin")};return u.jsx(ng,{children:u.jsxs(Ua.div,{initial:"hidden",animate:"show",exit:"hidden",variants:{hidden:{opacity:0,y:6},show:{opacity:1,y:0,transition:{staggerChildren:.08,when:"beforeChildren"}}},children:[u.jsxs(Ua.h1,{variants:{hidden:{opacity:0,y:8},show:{opacity:1,y:0,transition:{duration:.5}}},className:"mt-4 font-poppins text-[32px] sm:text-[38px] md:text-[42px] lg:text-[50px] font-thin tracking-tight leading-[109%] text-left lg:text-left lg:max-w-4xl",children:[u.jsx("span",{className:"block lg:inline",children:"HealthCare at"})," ",u.jsx("span",{className:"block lg:inline",children:"Your Doorstep"})]}),u.jsx(Ua.p,{variants:{hidden:{opacity:0,y:6},show:{opacity:1,y:0,transition:{duration:.45}}},className:"mt-1 text-black text-[13px] sm:text-[14px] md:text-[16px] tracking-tight font-thin leading-[154%] font-poppins text-left lg:text-left lg:max-w-2xl",children:"Pick up and deliver medical prescribed medications and, over-the-counter items from pharmacies to your doorstep."}),u.jsxs(Ua.div,{className:"mt-8 flex flex-row gap-4 w-full max-w-[350px] mx-0",variants:{hidden:{opacity:0,y:8},show:{opacity:1,y:0,transition:{duration:.45}}},children:[u.jsxs(Ua.button,{onClick:()=>e("customer"),whileHover:{scale:1.035},whileTap:{scale:.985},className:`relative rounded-3xl p-0 text-left font-poppins bg-[#F7F7F7]/10 w-[169px] h-[169px] ${t==="customer"?"border-[#36A5FF] border-[3px] ring-3 ring-[#36A5FF]":"border-[#36A5FF] border-[1px]"} card-interactive transition-all duration-200 shadow-sm group`,children:[u.jsxs("div",{className:"absolute left-[9px] md:top-[70px] top-[80px] text-[20px] sm:text-[25px] font-light tracking-tight leading-[109%] font-poppins group-hover:text-[#36A5FF] transition-colors duration-200",children:["Im a",u.jsx("br",{}),"customer"]}),u.jsx("div",{className:"absolute left-[9px] md:top-[127px] top-[127px] text-black text-[12px] sm:text-[13px] font-extralight tracking-tight leading-[109%] font-poppins group-hover:text-[#36A5FF] transition-colors duration-200",children:"Sign Up or Login as a customer"})]}),u.jsxs(Ua.button,{onClick:()=>e("pharmacy"),whileHover:{scale:1.035},whileTap:{scale:.985},className:`relative rounded-3xl p-0 text-left font-poppins bg-[#F7F7F7]/10 w-[169px] h-[169px] ${t==="pharmacy"?"border-[#36A5FF] border-[3px] ring-3 ring-[#36A5FF]":"border-[#36A5FF] border-[1px]"} card-interactive transition-all duration-200 shadow-sm group`,children:[u.jsxs("div",{className:"absolute left-[9px] md:top-[70px] top-[80px] text-[20px] sm:text-[25px] font-light tracking-tight leading-[109%] font-poppins group-hover:text-[#36A5FF] transition-colors duration-200",children:["Im a",u.jsx("br",{}),"pharmacy"]}),u.jsx("div",{className:"absolute left-[9px] md:top-[127px] top-[127px] text-black text-[12px] sm:text-[13px] font-extralight tracking-tight leading-[109%] font-poppins group-hover:text-[#36A5FF] transition-colors duration-200",children:"Sign Up or Login as a pharmacy"})]})]}),u.jsx(Ua.div,{className:"flex justify-start w-full max-w-[350px] mx-0",children:u.jsx(Ua.button,{onClick:n,disabled:!t,whileHover:t?{scale:1.02}:{},whileTap:t?{scale:.985}:{},className:`mt-8 w-full h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] font-light flex items-center justify-center btn-interactive transition-all duration-200 shadow-sm ${t?"border-[#36A5FF] text-[#36A5FF] cursor-pointer bg-white":"border-zinc-300 dark:border-gray-600 text-zinc-400 cursor-not-allowed bg-white"}`,children:"Continue"})}),u.jsx(Ua.div,{className:"pointer-events-none fixed bottom-0 left-0 right-0 z-10 md:hidden flex justify-center",variants:{hidden:{opacity:0,y:8},show:{opacity:1,y:0,transition:{duration:.5}}},children:u.jsxs("div",{className:"flex flex-row items-end gap-0 justify-center",children:[u.jsx(h8e,{className:"w-[22vw] max-w-[110px] h-auto",stroke:t==="customer"?"#36A5FF":"#9C9C9C"}),u.jsx(f8e,{className:"w-[28vw] max-w-[142px] h-auto -ml-4",stroke:t==="pharmacy"?"#36A5FF":"#989898"})]})})]})})}const m8e="Left",g8e="Right",x8e="Up",y8e="Down",Vm={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},Jk={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},EL="mousemove",CL="mouseup",v8e="touchend",w8e="touchmove",_8e="touchstart";function b8e(t,e,r,n){return t>e?r>0?g8e:m8e:n>0?y8e:x8e}function AL(t,e){if(e===0)return t;const r=Math.PI/180*e,n=t[0]*Math.cos(r)+t[1]*Math.sin(r),s=t[1]*Math.cos(r)-t[0]*Math.sin(r);return[n,s]}function k8e(t,e){const r=d=>{const p="touches"in d;p&&d.touches.length>1||t((g,m)=>{m.trackMouse&&!p&&(document.addEventListener(EL,n),document.addEventListener(CL,a));const{clientX:y,clientY:w}=p?d.touches[0]:d,_=AL([y,w],m.rotationAngle);return m.onTouchStartOrOnMouseDown&&m.onTouchStartOrOnMouseDown({event:d}),Object.assign(Object.assign(Object.assign({},g),Jk),{initial:_.slice(),xy:_,start:d.timeStamp||0})})},n=d=>{t((p,g)=>{const m="touches"in d;if(m&&d.touches.length>1)return p;if(d.timeStamp-p.start>g.swipeDuration)return p.swiping?Object.assign(Object.assign({},p),{swiping:!1}):p;const{clientX:y,clientY:w}=m?d.touches[0]:d,[_,S]=AL([y,w],g.rotationAngle),T=_-p.xy[0],I=S-p.xy[1],M=Math.abs(T),K=Math.abs(I),W=(d.timeStamp||0)-p.start,L=Math.sqrt(M*M+K*K)/(W||1),A=[T/(W||1),I/(W||1)],E=b8e(M,K,T,I),D=typeof g.delta=="number"?g.delta:g.delta[E.toLowerCase()]||Vm.delta;if(M<D&&K<D&&!p.swiping)return p;const R={absX:M,absY:K,deltaX:T,deltaY:I,dir:E,event:d,first:p.first,initial:p.initial,velocity:L,vxvy:A};R.first&&g.onSwipeStart&&g.onSwipeStart(R),g.onSwiping&&g.onSwiping(R);let F=!1;return(g.onSwiping||g.onSwiped||g[`onSwiped${E}`])&&(F=!0),F&&g.preventScrollOnSwipe&&g.trackTouch&&d.cancelable&&d.preventDefault(),Object.assign(Object.assign({},p),{first:!1,eventData:R,swiping:!0})})},s=d=>{t((p,g)=>{let m;if(p.swiping&&p.eventData){if(d.timeStamp-p.start<g.swipeDuration){m=Object.assign(Object.assign({},p.eventData),{event:d}),g.onSwiped&&g.onSwiped(m);const y=g[`onSwiped${m.dir}`];y&&y(m)}}else g.onTap&&g.onTap({event:d});return g.onTouchEndOrOnMouseUp&&g.onTouchEndOrOnMouseUp({event:d}),Object.assign(Object.assign(Object.assign({},p),Jk),{eventData:m})})},i=()=>{document.removeEventListener(EL,n),document.removeEventListener(CL,a)},a=d=>{i(),s(d)},o=(d,p)=>{let g=()=>{};if(d&&d.addEventListener){const m=Object.assign(Object.assign({},Vm.touchEventOptions),p.touchEventOptions),y=[[_8e,r,m],[w8e,n,Object.assign(Object.assign({},m),p.preventScrollOnSwipe?{passive:!1}:{})],[v8e,s,m]];y.forEach(([w,_,S])=>d.addEventListener(w,_,S)),g=()=>y.forEach(([w,_])=>d.removeEventListener(w,_))}return g},c={ref:d=>{d!==null&&t((p,g)=>{if(p.el===d)return p;const m={};return p.el&&p.el!==d&&p.cleanUpTouch&&(p.cleanUpTouch(),m.cleanUpTouch=void 0),g.trackTouch&&d&&(m.cleanUpTouch=o(d,g)),Object.assign(Object.assign(Object.assign({},p),{el:d}),m)})}};return e.trackMouse&&(c.onMouseDown=r),[c,o]}function S8e(t,e,r,n){return!e.trackTouch||!t.el?(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0})):t.cleanUpTouch?e.preventScrollOnSwipe!==r.preventScrollOnSwipe||e.touchEventOptions.passive!==r.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:n(t.el,e)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:n(t.el,e)})}function E8e(t){const{trackMouse:e}=t,r=j.useRef(Object.assign({},Jk)),n=j.useRef(Object.assign({},Vm)),s=j.useRef(Object.assign({},n.current));s.current=Object.assign({},n.current),n.current=Object.assign(Object.assign({},Vm),t);let i;for(i in Vm)n.current[i]===void 0&&(n.current[i]=Vm[i]);const[a,o]=j.useMemo(()=>k8e(l=>r.current=l(r.current,n.current),{trackMouse:e}),[e]);return r.current=S8e(r.current,n.current,s.current,o),a}const Kb=[{title:"Welcome to Pharmasea",description:"Your trusted digital pharmacy marketplace.",illustration:"/onboarding/Onboarding 1.png"},{title:"Find Verified Pharmacies",description:"Easily locate licensed pharmacies near you.",illustration:"/onboarding/Onboarding 2.png"},{title:"Order & Refill Medications",description:"Order prescriptions and over-the-counter drugs with ease.",illustration:"/onboarding/Onboarding 3.png"},{title:"Secure Payments & Fast Delivery",description:"Pay safely through integrated wallets and get doorstep delivery.",illustration:"/onboarding/Onboarding 4.png"},{title:"Pharmacy Dashboard (for Vendors)",description:"Manage your products, sales, and customers in one place.",illustration:"/onboarding/Onboarding 5.png"},{title:"Join the Pharmasea Community",description:"Connect with healthcare professionals and customers easily.",illustration:"/onboarding/Onboarding 6.png"}],C8e=["#D1FFF8","#FFDBDB","#D9FFE1","#FFF7CD","#EFE1FF","#E1F2FF"];function A8e(){const t=Jn(),[e,r]=j.useState(0),[n,s]=j.useState(!1),i=Kb.length,a=j.useMemo(()=>Kb[e],[e]),o=()=>t("/auth/landing",{replace:!0}),l=()=>{if(!n){if(e>=i-1){t("/auth/landing",{replace:!0});return}s(!0),r(y=>Math.min(y+1,i-1))}},c=()=>{n||e!==0&&(s(!0),r(y=>Math.max(y-1,0)))},d=j.useCallback(y=>{y.key==="ArrowRight"&&l(),y.key==="ArrowLeft"&&c(),y.key==="Escape"&&o()},[e,n]);j.useEffect(()=>(window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)),[d]);const p=E8e({onSwipedLeft:()=>l(),onSwipedRight:()=>c(),delta:50,preventDefaultTouchmoveEvent:!0,trackMouse:!0}),m={backgroundColor:C8e[e]||"#FFFFFF",width:"100vw",marginLeft:"calc(50% - 50vw)",marginRight:"calc(50% - 50vw)"};return u.jsxs("div",{className:"relative flex min-h-screen flex-col overflow-hidden transition-colors duration-300",style:m,children:[e!==i-1&&u.jsx("button",{type:"button",onClick:o,"aria-label":"Skip onboarding",className:"fixed right-4 top-4 z-50 pointer-events-auto text-sm font-normal text-sky-500 transition-colors hover:text-slate-700 focus:outline-none focus:ring-2 focus:ring-slate-400 dark:text-slate-400 dark:hover:text-white",style:{WebkitTapHighlightColor:"transparent"},children:"Skip"}),u.jsx("div",{className:"flex w-full max-w-none flex-1 flex-col items-start px-0 pb-28 sm:px-0 lg:px-0",style:{paddingTop:23},children:u.jsxs("div",{...p,className:"flex flex-col mr-auto self-start w-full",children:[u.jsxs("div",{className:"w-full max-w-xl pr-6 sm:pr-8 md:pr-56 lg:pr-64 lg:max-w-none",children:[u.jsx(Ua.div,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},transition:{duration:.4},className:"mb-4 mt-16 flex justify-center lg:justify-center",children:u.jsx("img",{src:"/PharmLogo.png",alt:"Pharmasea",className:"mx-auto h-8 sm:h-10 md:h-12 lg:h-16 object-contain"})}),u.jsxs(Rbe,{mode:"wait",children:[u.jsx(Ua.h1,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.45},className:"mt-8 text-left text-4xl font-light leading-tight sm:text-3xl md:text-4xl lg:text-6xl pl-4 sm:pl-6 lg:pl-6 pr-4 sm:pr-6 lg:pr-6",children:a.title.includes("(for Vendors)")?u.jsxs(u.Fragment,{children:[a.title.replace(" (for Vendors)",""),u.jsx("span",{className:"ml-2 align-left text-sm font-light text-slate-500 dark:text-slate-400",children:"(for Vendors)"})]}):a.title},a.title),u.jsx(Ua.p,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.45,delay:.04},className:"mt-4 max-w-xl lg:max-w-none text-left text-[17px] font-normal text-slate-500 dark:text-slate-300 sm:text-lg lg:text-[22px] pl-4 sm:pl-6 lg:pl-6 pr-4 sm:pr-6 lg:pr-6",children:a.description},a.description)]})]}),u.jsx("div",{className:"relative mt-8 flex w-full justify-end",style:{bottom:70},children:u.jsx("div",{className:"w-full max-w-[400px] sm:max-w-[440px] h-0","aria-hidden":!0})})]})}),u.jsxs(Ua.span,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},transition:{duration:.35},className:"fixed left-4 top-4 z-50 text-xs uppercase tracking-[0.25em] text-slate-400 dark:text-slate-500 pointer-events-none",children:["Step ",e+1," of ",i]}),u.jsx(Ua.img,{src:a.illustration,alt:"","aria-hidden":"true",loading:"lazy",initial:{opacity:0,y:24,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:24,scale:.98},transition:{type:"spring",stiffness:160,damping:20},onAnimationComplete:()=>s(!1),className:"fixed bottom-4 right-4 pointer-events-none z-10 w-[320px] max-w-[90vw] sm:w-[420px] md:w-[520px] object-contain will-change-transform",style:{maxWidth:"min(520px, 90vw)"}},a.illustration),u.jsx("div",{"aria-hidden":!0,className:"fixed inset-x-0 bottom-6 z-40 flex justify-center pointer-events-none",children:u.jsxs("div",{className:"w-full max-w-md pointer-events-auto relative flex items-center justify-between px-4",children:[u.jsx("button",{type:"button",onClick:c,disabled:e===0,"aria-label":"Go to previous",className:"z-20 text-sm font-normal text-slate-500 transition-colors hover:text-slate-700 focus:outline-none focus:ring-2 focus:ring-slate-400 disabled:pointer-events-none disabled:opacity-0 dark:text-slate-400 dark:hover:text-white bg-white/0 backdrop-blur rounded-md px-3 py-2",children:"back"}),e===i-1?u.jsx("div",{className:"w-0"}):u.jsx("div",{className:"flex items-center gap-2 z-10 pointer-events-auto",children:Kb.map((y,w)=>u.jsx(Ua.span,{layout:!0,initial:!1,animate:{scale:w===e?1.15:1,backgroundColor:w===e?"#0f172a":"#e6e9ee"},transition:{type:"spring",stiffness:300,damping:20},onClick:()=>{n||(s(!0),r(w))},className:"h-2 w-2 rounded-full cursor-pointer dark:cursor-pointer","aria-label":`Go to step ${w+1}`},w))}),u.jsx("div",{className:"relative w-full flex justify-end items-center z-20 pointer-events-auto px-4",children:u.jsx(Ua.div,{layoutId:"cta",layout:!0,transition:{layout:{type:"spring",stiffness:320,damping:28}},className:"flex items-center justify-end w-full",style:{display:"flex",justifyContent:"flex-end"},children:e===i-1?u.jsx(Ua.button,{type:"button",onClick:l,whileTap:{scale:.985},whileHover:{scale:1.02},className:"h-14 shadow-md bg-sky-600 text-lg font-medium text-white transition-colors hover:bg-sky-600/90 active:scale-[1] dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200 pointer-events-auto",style:{minWidth:220,borderRadius:999,zIndex:999},children:"Continue"},"continue-btn"):u.jsx(Ua.button,{type:"button",onClick:l,whileTap:{scale:.96},whileHover:{scale:1.02},className:"flex h-14 items-center justify-center shadow-md rounded-full bg-sky-600 text-lg font-normal text-white transition-colors dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200 pointer-events-auto",style:{width:56,height:56,borderRadius:999,zIndex:999},children:"Next"},"next-btn")})})]})})]})}function _y({to:t}){const e=Jn();return u.jsx("button",{onClick:()=>e(t||-1),className:"mb-5 w-[70px] h-[20px] font-poppins font-extralight tracking-tight text-[12px] flex items-center justify-center rounded-full bg-white dark:bg-gray-800 border border-zinc-300 dark:border-gray-600 dark:border-gray-600",children:" Back"})}function fH({email:t}){return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white dark:bg-gray-800",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 max-w-md w-full text-center",children:[u.jsxs("h2",{className:"text-xl font-thin mb-2",children:["Registration",u.jsx("br",{}),"Successful!"]}),u.jsxs("p",{className:"mb-4 text-zinc-600 text-[13px]",children:["A verification link has been sent to ",u.jsx("b",{children:t}),".",u.jsx("br",{}),"Please check your inbox and verify your email to continue."]}),u.jsx(Y0,{to:"/auth/customer/signin",className:"mt-4 inline-block px-4 py-2 bg-sky-600 text-white rounded-full",children:"Go to Sign In"})]})})}const N8e=()=>u.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[u.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),u.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),u.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),u.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]});function pH({onClick:t,loading:e=!1,children:r,className:n=""}){return u.jsxs("button",{type:"button",onClick:t,disabled:e,className:`w-full sm:w-[359px] h-[47px] rounded-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center justify-center gap-3 font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light text-gray-700 dark:text-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${n}`,children:[e?u.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):u.jsx(N8e,{}),u.jsx("span",{children:r})]})}const mH=()=>{if(typeof window>"u"||new URLSearchParams(window.location.search).get("debugGoogleAuth")!=="1")return;console.group(" Google Auth Configuration Diagnostic"),console.log("Firebase Config:"),console.log("- API Key:"," Present"),console.log("- Auth Domain:"," Present"),console.log("- Project ID:"," Present"),console.log("Environment:"," Production"),console.log("Host:",window.location.hostname),console.log("Protocol:",window.location.protocol),console.log("User Agent:",navigator.userAgent.includes("Chrome")?" Chrome":navigator.userAgent.includes("Safari")?" Safari (may have popup restrictions)":navigator.userAgent.includes("Firefox")?" Firefox (may have popup restrictions)":" Other"),console.groupEnd();const e=document.createElement("div");e.style.cssText=`
    position: fixed;
    top: 10px;
    right: 10px;
    background: rgba(0,0,0,0.9);
    color: white;
    padding: 10px;
    border-radius: 5px;
    font-size: 12px;
    z-index: 9999;
    max-width: 300px;
  `,e.innerHTML=`
    <strong> Google Auth Debug</strong><br>
    API Key: <br>
    Auth Domain: <br>
    Project ID: <br>
    Host: ${window.location.hostname}<br>
    <small>Add ?debugGoogleAuth=1 to see console logs</small>
  `,document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},1e4)};function T8e(){const{signUp:t,signUpWithGoogle:e}=Dn(),{userCoords:r,location:n,locationError:s}=Np(),[i,a]=j.useState({name:"",email:"",phone:"",password:"",address:""}),[o,l]=j.useState(!1),[c,d]=j.useState(!1),[p,g]=j.useState(null),[m,y]=j.useState([]),[w,_]=j.useState(null),S=j.useRef(),[T,I]=j.useState(!1),M=Jn();j.useEffect(()=>{mH()},[]);const K=async D=>{if(!D)return y([]);const F=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(D)}&addressdetails=1&limit=5`)).json();y(F)},W=D=>{const R=D.target.value;a({...i,address:R}),_(null),clearTimeout(S.current),S.current=setTimeout(()=>K(R),400)},L=D=>{a({...i,address:D.display_name}),_(D),y([])},A=async D=>{D.preventDefault(),l(!0);try{if(!i.address)throw new Error("Address is required");const R=await t({email:i.email,password:i.password,displayName:i.name,role:"customer",address:i.address,lat:w?.lat,lon:w?.lon,phone:i.phone});g(i.email)}catch(R){alert(R.message)}finally{l(!1)}},E=async()=>{d(!0);try{console.log("Starting Google registration process..."),console.log("User location:",{location:n,userCoords:r});const D={address:n,latitude:r?.latitude,longitude:r?.longitude},R=await e(D);console.log("Google registration result:",R),R.isNewUser?(console.log("New user created, showing success screen"),g(R.user.email)):R.existingCustomer?(console.log("Existing customer, navigating to home"),M("/")):(console.log("Existing user, navigating to home"),M("/"))}catch(D){console.error("Google registration failed:",D),D.message&&!D.message.includes("Firebase:")?alert(D.message):alert("Google registration failed. Please try again or contact support if the issue persists.")}finally{d(!1)}};return p?u.jsx(fH,{email:p}):u.jsxs(ng,{children:[u.jsx(_y,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),u.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left",children:["I'm a",u.jsx("br",{}),"Customer"]}),u.jsxs("form",{onSubmit:A,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[u.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Full Name",value:i.name,onChange:D=>a({...i,name:D.target.value})}),u.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:i.email,onChange:D=>a({...i,email:D.target.value})}),u.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Phone Number",value:i.phone,onChange:D=>a({...i,phone:D.target.value})}),u.jsxs("div",{className:"relative mb-4",children:[u.jsx("input",{className:"w-full px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Address (required)",value:i.address||"",onChange:W,required:!0,autoComplete:"off"}),m.length>0&&u.jsx("div",{className:"absolute left-0 right-0 bg-white dark:bg-gray-800 border border-zinc-200 rounded shadow z-10 max-h-40 overflow-y-auto",children:m.map(D=>u.jsx("div",{className:"px-4 py-2 hover:bg-sky-50 cursor-pointer text-[13px]",onClick:()=>L(D),children:D.display_name},D.place_id))})]}),u.jsxs("div",{className:"relative mb-4",children:[u.jsx("input",{type:T?"text":"password",className:"w-full mb-0 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Choose a password",value:i.password,onChange:D=>a({...i,password:D.target.value})}),u.jsx("button",{type:"button",onClick:()=>I(D=>!D),"aria-pressed":T,"aria-label":T?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500 dark:text-zinc-400",children:T?u.jsx(D_,{className:"h-5 w-5"}):u.jsx(ty,{className:"h-5 w-5"})})]}),u.jsx("div",{className:"flex justify-center w-full",children:u.jsx("button",{disabled:o,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] text-[#36A5FF] bg-white dark:bg-gray-800 mt-4 flex items-center justify-center",children:o?"Registering":"Register"})})]}),u.jsxs("div",{className:"mt-6 flex items-center justify-center",children:[u.jsx("div",{className:"border-t border-gray-300 dark:border-gray-600 flex-1"}),u.jsx("span",{className:"px-4 text-gray-500 dark:text-gray-400 text-sm",children:"or"}),u.jsx("div",{className:"border-t border-gray-300 dark:border-gray-600 flex-1"})]}),u.jsx("div",{className:"mt-6 flex justify-center",children:u.jsx(pH,{onClick:E,loading:c,children:"Register with Google"})}),!s&&r&&u.jsx("div",{className:"mt-3 text-center text-xs text-gray-500 dark:text-gray-400",children:"Google registration will use your current location as address"}),s&&u.jsx("div",{className:"mt-3 text-center text-xs text-red-500 dark:text-red-400",children:"Location access required for Google registration"}),u.jsxs("div",{className:"mt-6 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Already have an account? ",u.jsx(Y0,{to:"/auth/customer/signin",className:"text-sky-600 dark:text-sky-400 font-medium",children:"Sign In"})]})]})}const NL=t=>{const e=t.code||t.message;return e.includes("auth/invalid-credential")||e.includes("auth/wrong-password")||e.includes("auth/user-not-found")?"Invalid email or password. Please check your credentials and try again.":e.includes("auth/invalid-email")?"Please enter a valid email address.":e.includes("auth/too-many-requests")?"Too many failed attempts. Please try again later.":e.includes("auth/network-request-failed")?"Network error. Please check your connection and try again.":e.includes("auth/popup-closed-by-user")?"Google sign-in was cancelled. Please try again.":e.includes("auth/popup-blocked")?"Pop-up was blocked by your browser. Please allow pop-ups and try again.":e.includes("auth/account-exists-with-different-credential")?"An account with this email exists with a different sign-in method. Please use your email and password instead.":!e.includes("auth/")&&!e.includes("Firebase:")?t.message:"Sign in failed. Please try again."};function I8e(){const{signIn:t,signInWithGoogle:e}=Dn(),[r,n]=j.useState({email:"",password:""}),[s,i]=j.useState(!1),[a,o]=j.useState(!1),[l,c]=j.useState(null),[d,p]=j.useState(!1),g=Jn();j.useEffect(()=>{mH()},[]);const m=async w=>{w.preventDefault(),i(!0),c(null);try{await t(r.email,r.password),g("/")}catch(_){c(NL(_))}finally{i(!1)}},y=async()=>{o(!0),c(null);try{console.log("Starting Google sign-in process...");const w=await e();console.log("Google sign-in successful, navigating to home"),g("/")}catch(w){console.error("Google sign-in failed:",w),w.message&&!w.message.includes("Firebase:")?c(w.message):c(NL(w))}finally{o(!1)}};return u.jsxs(ng,{children:[u.jsx(_y,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),u.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left text-black dark:text-white",children:["I'm a",u.jsx("br",{}),"Customer"]}),l&&u.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2",children:[u.jsx(HS,{className:"h-4 w-4 text-red-500 dark:text-red-400 flex-shrink-0"}),u.jsx("span",{className:"text-red-700 dark:text-red-300 text-sm font-medium",children:l}),u.jsx("button",{onClick:()=>c(null),className:"ml-auto text-red-400 dark:text-red-500 hover:text-red-600 dark:hover:text-red-300","aria-label":"Dismiss error",children:""})]}),u.jsxs("form",{onSubmit:m,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[u.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:r.email,onChange:w=>n({...r,email:w.target.value})}),u.jsxs("div",{className:"relative mb-4",children:[u.jsx("input",{type:d?"text":"password",className:"w-full px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Password",value:r.password,onChange:w=>n({...r,password:w.target.value}),"aria-label":"Password"}),u.jsx("button",{type:"button",onClick:()=>p(w=>!w),"aria-pressed":d,"aria-label":d?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200",children:d?u.jsx(D_,{className:"h-5 w-5"}):u.jsx(ty,{className:"h-5 w-5"})})]}),u.jsx("div",{className:"flex justify-center w-full",children:u.jsx("button",{disabled:s,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] dark:border-sky-400 text-[#36A5FF] dark:text-sky-400 bg-white dark:bg-gray-800 mt-4 flex items-center justify-center hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Signing in":"Sign In"})})]}),u.jsxs("div",{className:"mt-6 flex items-center justify-center",children:[u.jsx("div",{className:"border-t border-gray-300 dark:border-gray-600 flex-1"}),u.jsx("span",{className:"px-4 text-gray-500 dark:text-gray-400 text-sm",children:"or"}),u.jsx("div",{className:"border-t border-gray-300 dark:border-gray-600 flex-1"})]}),u.jsx("div",{className:"mt-6 flex justify-center",children:u.jsx(pH,{onClick:y,loading:a,children:"Sign in with Google"})}),u.jsx("div",{className:"mt-6 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:u.jsx(Y0,{to:"/auth/forgot-password",className:"text-sky-600 dark:text-sky-400 font-medium hover:text-sky-700 dark:hover:text-sky-300",children:"Forgot password?"})}),u.jsxs("div",{className:"mt-2 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Don't have an account? ",u.jsx(Y0,{to:"/auth/customer/register",className:"text-sky-600 dark:text-sky-400 font-medium hover:text-sky-700 dark:hover:text-sky-300",children:"Register"})]})]})}function P8e(){const{signUp:t}=Dn(),[e,r]=j.useState({name:"",email:"",phone:"",address:"",password:""}),[n,s]=j.useState(!1),[i,a]=j.useState([]),[o,l]=j.useState(null),[c,d]=j.useState(null),p=j.useRef(),[g,m]=j.useState(!1);Jn();const y=async S=>{if(!S)return a([]);const I=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(S)}&addressdetails=1&limit=5`)).json();a(I)},w=S=>{const T=S.target.value;r({...e,address:T}),l(null),clearTimeout(p.current),p.current=setTimeout(()=>y(T),400)},_=async S=>{S.preventDefault(),s(!0);try{await t({email:e.email,password:e.password,displayName:e.name,role:"pharmacy"});const T=Yh.currentUser?.uid;T&&await cu(er(ht,"pharmacies",T),{id:T,name:e.name,email:e.email,address:e.address,lat:o?.lat||null,lon:o?.lon||null,etaMins:25,phone:e.phone}),d(e.email)}catch(T){alert(T.message)}finally{s(!1)}};return c?u.jsx(fH,{email:c}):u.jsxs(ng,{children:[u.jsx(_y,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),u.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left",children:["I'm a",u.jsx("br",{}),"Pharmacy"]}),u.jsxs("form",{onSubmit:_,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[u.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Pharmacy Name",value:e.name,onChange:S=>r({...e,name:S.target.value})}),u.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:e.email,onChange:S=>r({...e,email:S.target.value})}),u.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Phone Number",value:e.phone,onChange:S=>r({...e,phone:S.target.value})}),u.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Address",value:e.address,onChange:w}),u.jsxs("div",{className:"relative mb-4",children:[u.jsx("input",{type:g?"text":"password",className:"w-full mb-0 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Choose a password",value:e.password,onChange:S=>r({...e,password:S.target.value})}),u.jsx("button",{type:"button",onClick:()=>m(S=>!S),"aria-pressed":g,"aria-label":g?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500 dark:text-zinc-400",children:g?u.jsx(D_,{className:"h-5 w-5"}):u.jsx(ty,{className:"h-5 w-5"})})]}),u.jsx("div",{className:"flex justify-center w-full",children:u.jsx("button",{disabled:n,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] text-[#36A5FF] bg-white dark:bg-gray-800 mt-4 flex items-center justify-center",children:n?"Registering":"Register"})})]}),u.jsxs("div",{className:"mt-6 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Already have an account? ",u.jsx(Y0,{to:"/auth/pharmacy/signin",className:"text-sky-600 dark:text-sky-400 font-medium",children:"Sign In"})]})]})}const R8e=t=>{const e=t.code||t.message;return e.includes("auth/invalid-credential")||e.includes("auth/wrong-password")||e.includes("auth/user-not-found")?"Invalid email or password. Please check your credentials and try again.":e.includes("auth/invalid-email")?"Please enter a valid email address.":e.includes("auth/too-many-requests")?"Too many failed attempts. Please try again later.":e.includes("auth/network-request-failed")?"Network error. Please check your connection and try again.":"Sign in failed. Please try again."};function L8e(){const{signIn:t}=Dn(),[e,r]=j.useState({email:"",password:""}),[n,s]=j.useState(!1),[i,a]=j.useState(null),[o,l]=j.useState(!1),c=Jn(),d=async p=>{p.preventDefault(),s(!0),a(null);try{await t(e.email,e.password),c("/")}catch(g){a(R8e(g))}finally{s(!1)}};return u.jsxs(ng,{children:[u.jsx(_y,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),u.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left text-black dark:text-white",children:["I'm a",u.jsx("br",{}),"Pharmacy"]}),i&&u.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2",children:[u.jsx(HS,{className:"h-4 w-4 text-red-500 dark:text-red-400 flex-shrink-0"}),u.jsx("span",{className:"text-red-700 dark:text-red-300 text-sm font-medium",children:i}),u.jsx("button",{onClick:()=>a(null),className:"ml-auto text-red-400 dark:text-red-500 hover:text-red-600 dark:hover:text-red-300","aria-label":"Dismiss error",children:""})]}),u.jsxs("form",{onSubmit:d,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[u.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:e.email,onChange:p=>r({...e,email:p.target.value})}),u.jsxs("div",{className:"relative mb-4",children:[u.jsx("input",{type:o?"text":"password",className:"w-full px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Password",value:e.password,onChange:p=>r({...e,password:p.target.value}),"aria-label":"Password"}),u.jsx("button",{type:"button",onClick:()=>l(p=>!p),"aria-pressed":o,"aria-label":o?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500 dark:text-zinc-400",children:o?u.jsx(D_,{className:"h-5 w-5"}):u.jsx(ty,{className:"h-5 w-5"})})]}),u.jsx("div",{className:"flex justify-center w-full",children:u.jsx("button",{disabled:n,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] text-[#36A5FF] bg-white dark:bg-gray-800 mt-4 flex items-center justify-center",children:n?"Signing in":"Sign In"})})]}),u.jsx("div",{className:"mt-6 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:u.jsx(Y0,{to:"/auth/forgot-password",className:"text-sky-600 dark:text-sky-400 font-medium",children:"Forgot password?"})}),u.jsxs("div",{className:"mt-2 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Dont have an account? ",u.jsx(Y0,{to:"/auth/pharmacy/register",className:"text-sky-600 dark:text-sky-400 font-medium",children:"Register"})]})]})}function j8e(){const{user:t,logout:e}=Dn(),[r,n]=j.useState(!1),[s,i]=j.useState(!1),a=Jn();if(j.useEffect(()=>{t&&t.emailVerified},[t]),!t||t.emailVerified)return null;const o=async()=>{i(!0),await JM(t),n(!0),i(!1)},l=async()=>{try{await e()}catch{}window.history&&window.history.length>1?a(-1):a("/auth/landing")};return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:u.jsxs("div",{className:"bg-white p-8 max-w-md w-full text-center",children:[u.jsx("h2",{className:"text-xl font-light mb-2",children:"Verify your email"}),u.jsxs("p",{className:"mb-4 text-zinc-600 text-[14px] font-thin",children:["A verification link has been sent to ",u.jsx("b",{children:t.email}),".",u.jsx("br",{}),"Please check your inbox and click the link to activate your account."]}),u.jsx("button",{className:"px-4 py-2 bg-sky-600 text-white rounded-full text-[12px] font-light disabled:opacity-50",onClick:o,disabled:s||r,children:r?"Verification Sent!":s?"Sending...":"Resend Email"}),u.jsx("button",{className:"block mt-4 mx-auto text-sm text-zinc-500 underline",onClick:l,children:"Back"})]})})}function F8e(){const[t,e]=j.useState(""),[r,n]=j.useState(!1),[s,i]=j.useState(""),[a,o]=j.useState(!1),l=async c=>{c.preventDefault(),o(!0),i("");try{await oie(t),n(!0)}catch(d){i(d.message||"Failed to send reset email.")}o(!1)};return u.jsxs(ng,{children:[u.jsx(_y,{to:"/auth/landing"}),u.jsxs("div",{className:"w-full max-w-md text-center bg-white dark:bg-gray-800 rounded-2xl  p-8",children:[u.jsx("img",{src:"/ForgotPasswordIllustration.png",alt:"Forgot Password",className:"mx-auto mb-4 w-28 h-28 object-contain"}),u.jsx("h2",{className:"text-xl font-light mb-4",children:"Forgot Password?"}),r?u.jsx("p",{className:"text-green-600 font-thin text-[14px]",children:"A password reset link has been sent to your email."}):u.jsxs("form",{onSubmit:l,className:"space-y-4 text-left",children:[u.jsx("input",{type:"email",className:"w-full border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 text-[12px] mt-2 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-200 focus:border-sky-400 dark:border-gray-600",placeholder:"Enter your email",value:t,onChange:c=>e(c.target.value),required:!0}),s&&u.jsx("div",{className:"text-red-500 text-sm",children:s}),u.jsxs("button",{type:"submit",disabled:a,className:"w-full rounded-full bg-sky-600 text-white text-[13px] font-light py-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[a&&u.jsx("span",{className:"inline-block h-4 w-4 border-2 border-white/70 border-t-transparent rounded-full animate-spin"}),a?"Sending":"Send Reset Link"]})]})]})]})}function D8e(){const t=Jn(),[e]=BK(),{t:r}=qs(),n=e.get("pharmacyId"),[s,i]=j.useState({name:"",price:"",category:"Over-the-Counter",stock:0,sku:"",tags:"",image:"",description:""}),[a,o]=j.useState(null),[l,c]=j.useState(!1),[d,p]=j.useState(!1),g=()=>s.name.trim()?!s.price||isNaN(Number(s.price))||Number(s.price)<=0?(alert(r("invalid_price","Please enter a valid price")),!1):!0:(alert(r("please_fill_required","Please fill in all required fields")),!1),m=async()=>{if(g()){c(!0);try{let w=s.image;if(!w&&a){p(!0);const S=`products/${n}/${Date.now()}_${a.name}`,T=ose(fse,S);await ise(T,a),w=await ase(T),p(!1)}const _=(s.tags||"").split(",").map(S=>S.trim()).filter(Boolean);await MM({...s,image:w,price:Number(s.price),pharmacyId:n,tags:_}),alert(r("product_created_success","Product created successfully!")),t(-1)}catch(w){console.error("Error creating product:",w),alert(r("error_creating_product","Error creating product. Please try again."))}finally{c(!1),p(!1)}}},y=[{value:"Prescription",label:r("prescription_drugs","Prescription Drugs")},{value:"Over-the-Counter",label:r("over_counter","Over-the-counter")},{value:"General Pills",label:r("general_pills","General Pills")},{value:"Controlled",label:r("controlled_substances","Controlled Substances")},{value:"Syrup",label:r("syrup_liquid","Syrup/Liquid")},{value:"Therapeutic",label:r("therapeutic_drugs","Therapeutic Drugs")},{value:"Others",label:r("supplements_vitamins","Supplements & Vitamins")}];return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 to-blue-100 dark:from-gray-900 dark:to-gray-800 p-4 md:p-8",children:u.jsxs("div",{className:"max-w-lg md:max-w-2xl mx-auto bg-white dark:bg-gray-800 rounded-3xl shadow-xl border border-[#9ED3FF] dark:border-gray-700 overflow-hidden",children:[u.jsx("div",{className:"bg-gradient-to-r from-sky-500 to-blue-600 p-6 text-white",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-full bg-white/20 hover:bg-white/30 transition-colors duration-200",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),u.jsx("h1",{className:"text-xl font-light font-poppins",children:r("add_product_title","Add New Product")})]})}),u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[r("product_name","Product Name")," *"]}),u.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-3 outline-none focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:r("product_name_placeholder","Enter product name"),value:s.name,onChange:w=>i({...s,name:w.target.value})})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[r("product_price","Price")," *"]}),u.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-3 outline-none focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:r("product_price_placeholder","Enter price"),type:"number",value:s.price,onChange:w=>i({...s,price:w.target.value})})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[r("product_category","Category")," *"]}),u.jsxs("select",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-3 outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500",value:s.category,onChange:w=>i({...s,category:w.target.value}),children:[u.jsx("option",{value:"",disabled:!0,children:r("select_category","Select Category")}),y.map(w=>u.jsx("option",{value:w.value,children:w.label},w.value))]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r("stock_quantity","Stock Quantity")}),u.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-3 outline-none focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:r("stock_placeholder","Enter stock quantity"),type:"number",value:s.stock,onChange:w=>i({...s,stock:Number(w.target.value)})})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r("product_sku","SKU")}),u.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-3 outline-none focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:r("sku_placeholder","Enter SKU (optional)"),value:s.sku,onChange:w=>i({...s,sku:w.target.value})})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r("product_tags","Tags")}),u.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-3 outline-none focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:r("tags_placeholder","Add tags separated by commas"),value:s.tags,onChange:w=>i({...s,tags:w.target.value})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r("product_image","Product Image")}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"file",accept:"image/*",className:"w-full border border-[#9ED3FF] dark:border-gray-600 rounded-lg p-3 text-[13px] font-light focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:w=>o(w.target.files?.[0]||null)}),u.jsx("div",{className:"text-center text-xs text-gray-500 dark:text-gray-400",children:"or"}),u.jsx("input",{className:"w-full border border-[#9ED3FF] dark:border-gray-600 rounded-lg p-3 text-[13px] font-light outline-none focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:r("image_url_placeholder","Or enter image URL"),value:s.image,onChange:w=>i({...s,image:w.target.value})})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r("product_description","Description")}),u.jsx("textarea",{rows:4,placeholder:r("description_placeholder","Enter product description"),value:s.description,onChange:w=>i({...s,description:w.target.value}),className:"w-full border border-[#9ED3FF] dark:border-gray-600 rounded-lg p-3 text-[13px] font-light outline-none focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500 resize-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),u.jsx("div",{className:"p-6 pt-0",children:u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{className:"flex-1 rounded-full bg-gradient-to-r from-sky-500 to-blue-600 text-white text-sm font-medium py-3 shadow-lg hover:from-sky-600 hover:to-blue-700 disabled:from-gray-400 disabled:to-gray-500 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",disabled:l||d,onClick:m,children:d?r("uploading","Uploading..."):l?r("creating_product","Creating Product..."):r("create_product","Create Product")}),u.jsx("button",{className:"flex-1 rounded-full border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 text-sm font-medium py-3 hover:border-gray-400 dark:hover:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",onClick:()=>t(-1),disabled:l,children:r("cancel","Cancel")})]})})]})})}function O8e(){const{id:t}=a_(),{userCoords:e}=Np(),{t:r}=qs(),[n,s]=j.useState(null),[i,a]=j.useState([]),[o,l]=j.useState(!1),[c,d]=j.useState(null),[p,g]=j.useState(!1),[m,y]=j.useState(""),[w,_]=j.useState(!1),[S,T]=j.useState([]),[I,M]=j.useState([]),[K,W]=j.useState(!1),[L,A]=j.useState(-1),[E,D]=j.useState(!1);j.useEffect(()=>{if(typeof window>"u")return;const te=window.matchMedia("(orientation: portrait)"),G=P=>D(P.matches);return D(te.matches),te.addEventListener?te.addEventListener("change",G):te.addListener(G),()=>{te.removeEventListener?te.removeEventListener("change",G):te.removeListener(G)}},[]);const R=E,F=Jn(),{user:V,profile:Z}=Dn();j.useEffect(()=>{const te=er(ht,"pharmacies",t),G=In(te,U=>s(U.exists()?{id:U.id,...U.data()}:null)),P=F_(a,t);return()=>{G(),typeof P=="function"&&P()}},[t]),j.useEffect(()=>{async function te(){if(V?.uid&&t){const G=await XM(V.uid,t);g(G)}}te()},[V?.uid,t]);const fe=async()=>{if(!(!V?.uid||!n))try{p?(await YM(V.uid,t),g(!1)):(await KM(V.uid,t,{name:n.name,address:n.address,phone:n.phone,email:n.email,isVerified:!!n.isVerified}),g(!0))}catch(te){console.error("Error toggling bookmark:",te)}};j.useEffect(()=>{if(n&&e){const te=GS(n,e,"driving");d(te)}else d(null)},[n,e]),j.useEffect(()=>{if(!m.trim())T(i),M([]),W(!1),A(-1);else{const te=i.filter(P=>P.name?.toLowerCase().includes(m.toLowerCase())||P.category?.toLowerCase().includes(m.toLowerCase())||P.sku?.toLowerCase().includes(m.toLowerCase()));T(te);const G=te.slice(0,5);M(G),W(G.length>0&&m.length>0),A(-1)}},[i,m]);const xe=async()=>{if(!V||!V.uid){F("/auth/landing");return}if(Z?.role!=="customer"){alert(r("customers_only_chat","Only customers can start a chat with a pharmacy."));return}try{await qS({vendorId:t,customerId:V.uid,role:"customer"}),F(`/chat/${t}`)}catch(te){console.error(te),alert(r("could_not_start_chat","Could not start chat thread."))}},he=te=>{if(!(!K||I.length===0))switch(te.key){case"ArrowDown":te.preventDefault(),A(G=>G<I.length-1?G+1:0);break;case"ArrowUp":te.preventDefault(),A(G=>G>0?G-1:I.length-1);break;case"Enter":if(te.preventDefault(),L>=0&&L<I.length){const G=I[L];F(`/product/${G.id}`),_(!1),y(""),W(!1),A(-1)}break;case"Escape":W(!1),A(-1);break}},ae=(te,G)=>{if(!G||!te)return te;const P=new RegExp(`(${G.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return te.split(P).map((X,J)=>P.test(X)?u.jsx("span",{className:"bg-yellow-200 font-semibold",children:X},J):X)},H=()=>u.jsx("div",{className:"md:hidden fixed top-0 left-0 right-0 z-[100] bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-700",children:u.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[u.jsxs("button",{onClick:()=>F(-1),className:"w-[72px] h-[25px] font-poppins font-extralight tracking-tight text-[14px] flex items-center justify-center rounded-full bg-white border border-zinc-300 dark:border-gray-600 hover:scale-105 hover:shadow-md transition-all duration-200 active:scale-95",children:[u.jsx(du,{className:"h-3 w-3 mr-0"})," ",r("back","Back")]}),u.jsx("div",{className:"text-[18px] font-light font-poppins leading-none",children:r("vendor_profile","Vendor Profile")}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:fe,className:`p-2 rounded-full border border-zinc-200 bg-white hover:scale-110 active:scale-95 transition-all duration-200 ${p?"bg-sky-100 border-sky-300 dark:border-gray-600":"hover:bg-sky-50"}`,"aria-label":p?"Remove from bookmarks":"Add to bookmarks",children:u.jsx(VN,{className:`w-5 h-5 ${p?"text-sky-600 fill-sky-600":"text-sky-600"}`})}),u.jsx("button",{onClick:()=>_(!0),className:"p-2 rounded-full border border-zinc-200 bg-white hover:bg-sky-50 hover:scale-110 active:scale-95 transition-all duration-200","aria-label":r("search_products","Search products"),children:u.jsx(Uf,{className:"w-5 h-5 text-sky-600"})})]})]})});return u.jsxs(u.Fragment,{children:[Ki.createPortal(u.jsx(H,{}),document.body),u.jsxs("div",{className:"min-h-screen bg-white/80 dark:bg-gray-900/80 backdrop-blur-md w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 pt-24 md:pt-8 pb-28",children:[u.jsxs("div",{className:"sticky top-0 z-20 bg-white/90 dark:bg-gray-900/90 backdrop-blur-md pb-2 pt-4 -mx-4 sm:-mx-5 md:-mx-8 lg:-mx-12 xl:-mx-0 px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 items-center gap-3 animate-slide-down-fade hidden md:flex",children:[u.jsxs("button",{onClick:()=>F(-1),className:"w-[72px] h-[25px] font-poppins font-extralight tracking-tight text-[14px] flex items-center justify-center rounded-full bg-white dark:bg-gray-800 border border-zinc-300 dark:border-gray-600 dark:border-gray-600 text-gray-900 dark:text-white mr-1 hover:scale-105 hover:shadow-md transition-all duration-200 active:scale-95",children:[u.jsx(du,{className:"h-3 w-3 mr-0"})," ",r("back","Back")]}),u.jsx("div",{className:"-ml-1 text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-light font-poppins leading-none animate-text-reveal text-gray-900 dark:text-white",children:r("vendor_profile","Vendor Profile")}),u.jsx("div",{className:"ml-auto flex items-center gap-2",children:u.jsx("button",{onClick:fe,className:`p-2 rounded-full border border-zinc-200 dark:border-gray-600 bg-white dark:bg-gray-800 hover:scale-110 active:scale-95 transition-all duration-200 ${p?"bg-sky-100 dark:bg-sky-900 border-sky-300 dark:border-gray-600 dark:border-sky-600 dark:border-gray-600":"hover:bg-sky-50 dark:hover:bg-sky-900/20"}`,"aria-label":p?"Remove from bookmarks":"Add to bookmarks",children:u.jsx(VN,{className:`w-5 h-5 ${p?"text-sky-600 fill-sky-600":"text-sky-600"}`})})})]}),u.jsx("div",{className:"w-full mx-auto mt-6",children:u.jsxs("div",{className:`flex flex-col ${R?"":"md:grid md:grid-cols-3"} gap-6`,children:[u.jsxs("div",{className:`order-2 ${R?"":"md:order-2 md:col-span-2"} animate-fade-in-up`,children:[u.jsxs("div",{className:`border border-zinc-200 dark:border-gray-600 rounded-2xl bg-white dark:bg-gray-800 shadow-sm p-4 mb-4 flex items-center justify-between ${R?"":"md:sticky md:top-20 md:bg-white/90 md:dark:bg-gray-800/90 md:backdrop-blur-sm md:z-20"} animate-slide-down-fade`,children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-[18px] font-poppins font-medium text-gray-900 dark:text-white",children:[r("products_by","Products by"),u.jsx("br",{}),u.jsx(hu,{name:n?.name||r("vendor","Vendor"),isVerified:n?.isVerified,className:"inline-flex items-center gap-1",iconClassName:"h-4 w-4 text-sky-500 dark:text-sky-400"})]}),u.jsxs("div",{className:"text-zinc-500 dark:text-zinc-400 text-[13px] font-poppins font-light",children:[m?S.length:i.length," ",m&&S.length!==i.length?`${r("of","of")} ${i.length}`:""," ",r("items","items")]})]}),u.jsxs("div",{children:[S.length>3&&!o&&u.jsx("button",{className:"text-sky-600 dark:text-sky-400 text-[12px] font-poppins font-light px-3 py-1 rounded-full hover:bg-sky-50 dark:hover:bg-sky-900/20 transition-all duration-200 hover:scale-105 active:scale-95",onClick:()=>l(!0),children:r("see_more","See more")}),S.length>3&&o&&u.jsx("button",{className:"text-sky-600 dark:text-sky-400 text-[13px] font-poppins font-light px-3 py-1 rounded-full hover:bg-sky-50 dark:hover:bg-sky-900/20 transition-all duration-200 hover:scale-105 active:scale-95",onClick:()=>l(!1),children:r("see_less","See less")})]})]}),u.jsx("div",{className:`${R?"":"md:max-h-[calc(100vh-12rem)] md:overflow-y-auto md:pr-4"}`,children:u.jsxs("div",{className:"space-y-3 px-0",children:[(o?S:S.slice(0,3)).map((te,G)=>u.jsxs("div",{className:"rounded-2xl border border-zinc-200 dark:border-gray-600 p-3 flex items-center gap-3 bg-white dark:bg-gray-800 shadow-sm cursor-pointer hover:bg-sky-50 dark:hover:bg-sky-900/20 transition-all duration-200 overflow-hidden card-interactive animate-fadeInUp hover:scale-102 hover:shadow-lg",style:{animationDelay:`${G*.1}s`},onClick:()=>F(`/product/${te.id}`),children:[u.jsx("div",{className:"flex-shrink-0 animate-bounce-gentle",children:u.jsx(sc,{name:te.name,image:te.image,category:te.category,size:30})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-poppins font-medium text-[15px] tracking-tight mb-1 truncate text-gray-900 dark:text-white",title:te.name,children:te.name}),u.jsxs("div",{className:"text-zinc-500 dark:text-zinc-400 text-[12px] font-poppins font-light truncate",title:`${te.category}  ${r("stock","Stock")}: ${te.stock}  ${r("sku","SKU")}: ${te.sku}`,children:[te.category,"  ",r("stock","Stock"),": ",te.stock,"  ",r("sku","SKU"),": ",te.sku]})]}),u.jsxs("div",{className:"text-[15px] font-poppins font-medium text-sky-600 ml-3 flex-shrink-0 animate-pulse-slow",children:["",Number(te.price).toLocaleString()]})]},te.id)),S.length===0&&u.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-[13px] font-poppins font-light animate-fade-in",children:m?r("no_products_found_search","No products found matching your search."):r("no_products_yet","No products yet.")})]})})]}),u.jsxs("aside",{className:`order-1 ${R?"":"md:order-1 md:col-span-1 md:self-start md:sticky md:top-20"} animate-fade-in-left`,children:[u.jsxs("div",{className:"border border-zinc-200 dark:border-gray-600 rounded-2xl bg-white dark:bg-gray-800 shadow-sm p-5 mb-4 w-full flex flex-col items-start card-interactive hover:shadow-lg transition-all duration-300",children:[u.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-gray-700 flex items-center justify-center mb-2 animate-bounce-gentle hover:scale-110 transition-transform duration-200",children:u.jsx("span",{className:"text-[32px] font-poppins font-light text-sky-600 dark:text-sky-400",children:n?.name?.charAt(0)||"V"})}),u.jsx(hu,{name:n?.name||"Vendor",isVerified:n?.isVerified,className:"text-[22px] font-poppins font-medium tracking-tight text-sky-600 dark:text-sky-400 mb-1 animate-text-reveal",iconClassName:"h-4 w-4 text-sky-500 dark:text-sky-400"}),u.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-[13px] font-poppins font-light mb-1 animate-fade-in",style:{animationDelay:"0.1s"},children:n?.email||""}),u.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 dark:text-zinc-400 text-[13px] font-poppins font-light mb-1 animate-fade-in",style:{animationDelay:"0.2s"},children:[u.jsx(Nc,{className:"h-3 w-3"})," ",n?.address||""]}),u.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 dark:text-zinc-400 text-[13px] font-poppins font-light mb-1 animate-fade-in",style:{animationDelay:"0.3s"},children:[u.jsx(x5,{className:"h-3 w-3"}),c?r("eta_to_pharmacy","{time} to {pharmacy}").replace("{time}",c.formatted).replace("{pharmacy}",n?.name||r("vendor","vendor")):e?r("calculating_eta","Calculating ETA..."):r("fetching_location","Fetching location...")]}),u.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 dark:text-zinc-400 text-[13px] font-poppins font-light animate-fade-in",style:{animationDelay:"0.4s"},children:[u.jsx(k1,{className:"h-3 w-3"})," ",n?.phone||""]})]}),u.jsx("div",{className:"w-full mb-4 animate-fade-in-up",style:{animationDelay:"0.5s"},children:u.jsxs("button",{onClick:xe,className:"w-full rounded-full bg-sky-600 text-white h-[37px] text-[12px] font-poppins font-light flex items-center justify-center gap-2 btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200",children:[u.jsx(I0,{className:"h-4 w-4"})," ",r("message_vendor","Message Vendor")]})})]})]})}),w&&u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[200]",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-poppins font-medium text-gray-900 dark:text-white",children:r("search_products","Search Products")}),u.jsx("button",{onClick:()=>{_(!1),y(""),W(!1)},className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:""})]}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:r("search_by_name_category_sku","Search by name, category, or SKU..."),value:m,onChange:te=>y(te.target.value),onKeyDown:he,className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent font-poppins",autoFocus:!0}),K&&I.length>0&&u.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-200 dark:border-gray-600 rounded-xl shadow-lg max-h-60 overflow-y-auto z-10",children:I.map((te,G)=>u.jsx("button",{onClick:()=>{F(`/product/${te.id}`),_(!1),y(""),W(!1),A(-1)},onMouseEnter:()=>A(G),className:`w-full px-4 py-3 text-left transition-colors border-b border-gray-100 last:border-b-0 first:rounded-t-xl last:rounded-b-xl ${G===L?"bg-sky-50 border-sky-100":"hover:bg-gray-50"}`,children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx(sc,{name:te.name,image:te.image,category:te.category,size:24})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:`font-poppins font-medium text-sm truncate ${G===L?"text-sky-700":"text-gray-900"}`,children:ae(te.name,m)}),u.jsxs("div",{className:`text-xs truncate ${G===L?"text-sky-600":"text-gray-500"}`,children:[ae(te.category,m),"  ",Number(te.price||0).toLocaleString()]})]})]})},te.id))})]}),u.jsxs("div",{className:"flex gap-2 mt-4",children:[u.jsxs("button",{onClick:()=>{_(!1),W(!1)},className:"flex-1 px-4 py-2 bg-sky-600 text-white rounded-xl hover:bg-sky-700 transition-colors font-poppins font-medium",children:[r("view_results","View Results")," (",S.length,")"]}),u.jsx("button",{onClick:()=>{y(""),_(!1),W(!1)},className:"px-4 py-2 border border-gray-200 dark:border-gray-600 rounded-xl hover:bg-gray-50 transition-colors font-poppins",children:r("clear","Clear")})]})]})})]})]})}function M8e(){const{id:t}=a_(),[e,r]=j.useState(null),[n,s]=j.useState(null),[i,a]=j.useState([]),[o,l]=j.useState(!0);if(j.useEffect(()=>{async function d(){l(!0);try{const p=er(ht,"products",t),g=await ni(p);if(g.exists()){const m=g.data();if(r({id:t,...m}),m.pharmacyId){const S=er(ht,"pharmacies",m.pharmacyId),T=await ni(S);T.exists()&&s({id:m.pharmacyId,...T.data()})}const y=Zt(ht,"products",t,"reviews"),w=_r(y,Yi("createdAt","desc")),_=await wn(w);a(_.docs.map(S=>({id:S.id,...S.data()})))}}catch{}l(!1)}d()},[t]),o)return u.jsx("div",{className:"min-h-screen flex items-center justify-center text-zinc-400 font-poppins",children:"Loading"});if(!e)return u.jsx("div",{className:"min-h-screen flex items-center justify-center text-zinc-400 font-poppins",children:"Product not found."});const c=Number(e.price||0);return u.jsx("div",{className:"min-h-screen bg-white",children:u.jsxs("div",{className:"w-full max-w-full md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-2 md:px-8 lg:px-12 xl:px-0 pt-8 pb-36",children:[u.jsxs("div",{className:"mb-6 flex items-center gap-2",children:[u.jsx(du,{className:"h-5 w-5 text-zinc-500 cursor-pointer",onClick:()=>window.history.back()}),u.jsx("span",{className:"font-poppins text-[18px] font-medium",children:"Product Preview"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[u.jsxs("div",{className:"rounded-2xl p-4 border flex flex-col items-center justify-center w-full card-interactive",children:[e.image?u.jsx("img",{src:e.image,alt:e.name,className:"max-h-[360px] w-full object-contain"}):u.jsx("div",{className:"h-[200px] w-full flex items-center justify-center bg-zinc-100 rounded-md text-3xl font-semibold text-zinc-800",children:u.jsx(sc,{name:e.name,image:e.image,category:e.category,size:80,roundedClass:"rounded-md"})}),u.jsx("div",{className:"w-full mt-4 flex flex-col gap-3",children:u.jsx("div",{className:"w-full h-10 rounded-full bg-sky-100 text-sky-700 text-[14px] font-poppins font-light shadow-sm flex items-center justify-center",children:"Preview Only"})})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("div",{className:"mb-3 flex items-start justify-between",children:[u.jsx("h1",{className:"text-[20px] lg:text-[22px] font-poppins font-medium tracking-tight leading-tight min-w-0",children:e.name}),u.jsxs("div",{className:"text-[20px] text-sky-600 font-poppins font-semibold",children:["",c.toLocaleString()]})]}),u.jsx("div",{className:"mb-2",children:n?u.jsx(hu,{name:n.name,isVerified:n.isVerified,className:"text-sky-600 underline font-poppins text-[15px] font-light",iconClassName:"h-3.5 w-3.5 text-sky-500"}):u.jsx("span",{className:"text-zinc-400 font-poppins text-[15px] font-light",children:"Pharmacy info unavailable"})}),u.jsxs("div",{className:"mb-1 flex items-center gap-2 text-zinc-600 text-[13px] font-poppins font-light",children:[u.jsx(Nc,{className:"h-4 w-4 flex-shrink-0"}),u.jsx("span",{children:n?.address||"Address unavailable"})]}),u.jsxs("div",{className:"mt-2",children:[u.jsx("div",{className:"text-[15px] font-poppins font-medium tracking-tighter text-zinc-800",children:"Product Description"}),u.jsx("p",{className:"mt-2 text-zinc-600 leading-6 font-poppins text-[14px] font-light",children:e.description})]}),u.jsxs("div",{className:"mt-8",children:[u.jsx("div",{className:"text-[15px] font-poppins font-medium tracking-tighter text-zinc-800 mb-2",children:"Customer Reviews"}),u.jsx("div",{className:"space-y-4 mb-6",children:i.length===0?u.jsx("div",{className:"p-4 text-center text-zinc-400",children:"No reviews yet."}):i.map((d,p)=>u.jsxs("div",{className:"p-4 rounded-xl border border-sky-100",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"font-poppins font-semibold text-[14px] text-zinc-700",children:d.name}),u.jsxs("span",{className:"flex gap-0.5 text-amber-400 text-[13px]",children:["".repeat(d.rating),"".repeat(5-d.rating)]})]}),u.jsx("div",{className:"text-zinc-600 text-[13px] font-poppins font-light",children:d.comment})]},d.id||p))})]})]})]})]})})}function $r(t,e,r,n,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}function dt(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}let gH=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return gH=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),r=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^r()&15>>+n/4).toString(16))};function Zk(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const e8=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Tr extends Error{}class mo extends Tr{constructor(e,r,n,s){super(`${mo.makeMessage(e,r,n)}`),this.status=e,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=r;const i=r;this.code=i?.code,this.param=i?.param,this.type=i?.type}static makeMessage(e,r,n){const s=r?.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,r,n,s){if(!e||!s)return new c4({message:n,cause:e8(r)});const i=r?.error;return e===400?new xH(e,i,n,s):e===401?new yH(e,i,n,s):e===403?new vH(e,i,n,s):e===404?new wH(e,i,n,s):e===409?new _H(e,i,n,s):e===422?new bH(e,i,n,s):e===429?new kH(e,i,n,s):e>=500?new SH(e,i,n,s):new mo(e,i,n,s)}}class Ic extends mo{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class c4 extends mo{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}}class FE extends c4{constructor({message:e}={}){super({message:e??"Request timed out."})}}class xH extends mo{}class yH extends mo{}class vH extends mo{}class wH extends mo{}class _H extends mo{}class bH extends mo{}class kH extends mo{}class SH extends mo{}class EH extends Tr{constructor(){super("Could not parse response content as the length limit was reached")}}class CH extends Tr{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class i2 extends Error{constructor(e){super(e)}}const B8e=/^[a-z][a-z0-9+.-]*:/i,V8e=t=>B8e.test(t);let _l=t=>(_l=Array.isArray,_l(t)),TL=_l;function AH(t){return typeof t!="object"?{}:t??{}}function U8e(t){if(!t)return!0;for(const e in t)return!1;return!0}function z8e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Yb(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const $8e=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Tr(`${t} must be an integer`);if(e<0)throw new Tr(`${t} must be a positive integer`);return e},q8e=t=>{try{return JSON.parse(t)}catch{return}},by=t=>new Promise(e=>setTimeout(e,t)),Tm="6.3.0",H8e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function W8e(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const G8e=()=>{const t=W8e();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tm,"X-Stainless-OS":PL(Deno.build.os),"X-Stainless-Arch":IL(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tm,"X-Stainless-OS":PL(globalThis.process.platform??"unknown"),"X-Stainless-Arch":IL(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=K8e();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function K8e(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:r}of t){const n=r.exec(navigator.userAgent);if(n){const s=n[1]||0,i=n[2]||0,a=n[3]||0;return{browser:e,version:`${s}.${i}.${a}`}}}return null}const IL=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",PL=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let RL;const Y8e=()=>RL??(RL=G8e());function X8e(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function NH(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function TH(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return NH({start(){},async pull(r){const{done:n,value:s}=await e.next();n?r.close():r.enqueue(s)},async cancel(){await e.return?.()}})}function IH(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const r=await e.read();return r?.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){const r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Q8e(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),r=e.cancel();e.releaseLock(),await r}const J8e=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),PH="RFC3986",RH=t=>String(t),LL={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:RH},Z8e="RFC1738";let t8=(t,e)=>(t8=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),t8(t,e));const Ou=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Xb=1024,eSe=(t,e,r,n,s)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),r==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let a="";for(let o=0;o<i.length;o+=Xb){const l=i.length>=Xb?i.slice(o,o+Xb):i,c=[];for(let d=0;d<l.length;++d){let p=l.charCodeAt(d);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===Z8e&&(p===40||p===41)){c[c.length]=l.charAt(d);continue}if(p<128){c[c.length]=Ou[p];continue}if(p<2048){c[c.length]=Ou[192|p>>6]+Ou[128|p&63];continue}if(p<55296||p>=57344){c[c.length]=Ou[224|p>>12]+Ou[128|p>>6&63]+Ou[128|p&63];continue}d+=1,p=65536+((p&1023)<<10|l.charCodeAt(d)&1023),c[c.length]=Ou[240|p>>18]+Ou[128|p>>12&63]+Ou[128|p>>6&63]+Ou[128|p&63]}a+=c.join("")}return a};function tSe(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function jL(t,e){if(_l(t)){const r=[];for(let n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)}const LH={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},jH=function(t,e){Array.prototype.push.apply(t,_l(e)?e:[e])};let FL;const ba={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:eSe,encodeValuesOnly:!1,format:PH,formatter:RH,indices:!1,serializeDate(t){return(FL??(FL=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function rSe(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Qb={};function FH(t,e,r,n,s,i,a,o,l,c,d,p,g,m,y,w,_,S){let T=t,I=S,M=0,K=!1;for(;(I=I.get(Qb))!==void 0&&!K;){const D=I.get(t);if(M+=1,typeof D<"u"){if(D===M)throw new RangeError("Cyclic object value");K=!0}typeof I.get(Qb)>"u"&&(M=0)}if(typeof c=="function"?T=c(e,T):T instanceof Date?T=g?.(T):r==="comma"&&_l(T)&&(T=jL(T,function(D){return D instanceof Date?g?.(D):D})),T===null){if(i)return l&&!w?l(e,ba.encoder,_,"key",m):e;T=""}if(rSe(T)||tSe(T)){if(l){const D=w?e:l(e,ba.encoder,_,"key",m);return[y?.(D)+"="+y?.(l(T,ba.encoder,_,"value",m))]}return[y?.(e)+"="+y?.(String(T))]}const W=[];if(typeof T>"u")return W;let L;if(r==="comma"&&_l(T))w&&l&&(T=jL(T,l)),L=[{value:T.length>0?T.join(",")||null:void 0}];else if(_l(c))L=c;else{const D=Object.keys(T);L=d?D.sort(d):D}const A=o?String(e).replace(/\./g,"%2E"):String(e),E=n&&_l(T)&&T.length===1?A+"[]":A;if(s&&_l(T)&&T.length===0)return E+"[]";for(let D=0;D<L.length;++D){const R=L[D],F=typeof R=="object"&&typeof R.value<"u"?R.value:T[R];if(a&&F===null)continue;const V=p&&o?R.replace(/\./g,"%2E"):R,Z=_l(T)?typeof r=="function"?r(E,V):E:E+(p?"."+V:"["+V+"]");S.set(t,M);const fe=new WeakMap;fe.set(Qb,S),jH(W,FH(F,Z,r,n,s,i,a,o,r==="comma"&&w&&_l(T)?null:l,c,d,p,g,m,y,w,_,fe))}return W}function nSe(t=ba){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||ba.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=PH;if(typeof t.format<"u"){if(!t8(LL,t.format))throw new TypeError("Unknown format option provided.");r=t.format}const n=LL[r];let s=ba.filter;(typeof t.filter=="function"||_l(t.filter))&&(s=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in LH?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=ba.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:ba.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:ba.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:ba.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:ba.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?ba.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:ba.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:ba.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:ba.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:ba.encodeValuesOnly,filter:s,format:r,formatter:n,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:ba.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:ba.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:ba.strictNullHandling}}function sSe(t,e={}){let r=t;const n=nSe(e);let s,i;typeof n.filter=="function"?(i=n.filter,r=i("",r)):_l(n.filter)&&(i=n.filter,s=i);const a=[];if(typeof r!="object"||r===null)return"";const o=LH[n.arrayFormat],l=o==="comma"&&n.commaRoundTrip;s||(s=Object.keys(r)),n.sort&&s.sort(n.sort);const c=new WeakMap;for(let g=0;g<s.length;++g){const m=s[g];n.skipNulls&&r[m]===null||jH(a,FH(r[m],m,o,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,c))}const d=a.join(n.delimiter);let p=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),d.length>0?p+d:""}function iSe(t){let e=0;for(const s of t)e+=s.length;const r=new Uint8Array(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return r}let DL;function DE(t){let e;return(DL??(e=new globalThis.TextEncoder,DL=e.encode.bind(e)))(t)}let OL;function ML(t){let e;return(OL??(e=new globalThis.TextDecoder,OL=e.decode.bind(e)))(t)}var Hl,Wl;class u4{constructor(){Hl.set(this,void 0),Wl.set(this,void 0),$r(this,Hl,new Uint8Array),$r(this,Wl,null)}decode(e){if(e==null)return[];const r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?DE(e):e;$r(this,Hl,iSe([dt(this,Hl,"f"),r]));const n=[];let s;for(;(s=aSe(dt(this,Hl,"f"),dt(this,Wl,"f")))!=null;){if(s.carriage&&dt(this,Wl,"f")==null){$r(this,Wl,s.index);continue}if(dt(this,Wl,"f")!=null&&(s.index!==dt(this,Wl,"f")+1||s.carriage)){n.push(ML(dt(this,Hl,"f").subarray(0,dt(this,Wl,"f")-1))),$r(this,Hl,dt(this,Hl,"f").subarray(dt(this,Wl,"f"))),$r(this,Wl,null);continue}const i=dt(this,Wl,"f")!==null?s.preceding-1:s.preceding,a=ML(dt(this,Hl,"f").subarray(0,i));n.push(a),$r(this,Hl,dt(this,Hl,"f").subarray(s.index)),$r(this,Wl,null)}return n}flush(){return dt(this,Hl,"f").length?this.decode(`
`):[]}}Hl=new WeakMap,Wl=new WeakMap;u4.NEWLINE_CHARS=new Set([`
`,"\r"]);u4.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function aSe(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function oSe(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}const Y5={off:0,error:200,warn:300,info:400,debug:500},BL=(t,e,r)=>{if(t){if(z8e(Y5,t))return t;oo(r).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Y5))}`)}};function a2(){}function Xv(t,e,r){return!e||Y5[t]>Y5[r]?a2:e[t].bind(e)}const lSe={error:a2,warn:a2,info:a2,debug:a2};let VL=new WeakMap;function oo(t){const e=t.logger,r=t.logLevel??"off";if(!e)return lSe;const n=VL.get(e);if(n&&n[0]===r)return n[1];const s={error:Xv("error",e,r),warn:Xv("warn",e,r),info:Xv("info",e,r),debug:Xv("debug",e,r)};return VL.set(e,[r,s]),s}const w0=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,r])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Hg;class Qu{constructor(e,r,n){this.iterator=e,Hg.set(this,void 0),this.controller=r,$r(this,Hg,n)}static fromSSEResponse(e,r,n){let s=!1;const i=n?oo(n):console;async function*a(){if(s)throw new Tr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const l of cSe(e,r))if(!o){if(l.data.startsWith("[DONE]")){o=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let c;try{c=JSON.parse(l.data)}catch(d){throw i.error("Could not parse message into JSON:",l.data),i.error("From chunk:",l.raw),d}if(c&&c.error)throw new mo(void 0,c.error,void 0,e.headers);yield c}else{let c;try{c=JSON.parse(l.data)}catch(d){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),d}if(l.event=="error")throw new mo(void 0,c.error,c.message,void 0);yield{event:l.event,data:c}}}o=!0}catch(l){if(Zk(l))return;throw l}finally{o||r.abort()}}return new Qu(a,r,n)}static fromReadableStream(e,r,n){let s=!1;async function*i(){const o=new u4,l=IH(e);for await(const c of l)for(const d of o.decode(c))yield d;for(const c of o.flush())yield c}async function*a(){if(s)throw new Tr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const l of i())o||l&&(yield JSON.parse(l));o=!0}catch(l){if(Zk(l))return;throw l}finally{o||r.abort()}}return new Qu(a,r,n)}[(Hg=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],r=[],n=this.iterator(),s=i=>({next:()=>{if(i.length===0){const a=n.next();e.push(a),r.push(a)}return i.shift()}});return[new Qu(()=>s(e),this.controller,dt(this,Hg,"f")),new Qu(()=>s(r),this.controller,dt(this,Hg,"f"))]}toReadableStream(){const e=this;let r;return NH({async start(){r=e[Symbol.asyncIterator]()},async pull(n){try{const{value:s,done:i}=await r.next();if(i)return n.close();const a=DE(JSON.stringify(s)+`
`);n.enqueue(a)}catch(s){n.error(s)}},async cancel(){await r.return?.()}})}}async function*cSe(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Tr("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Tr("Attempted to iterate over a response with no body");const r=new dSe,n=new u4,s=IH(t.body);for await(const i of uSe(s))for(const a of n.decode(i)){const o=r.decode(a);o&&(yield o)}for(const i of n.flush()){const a=r.decode(i);a&&(yield a)}}async function*uSe(t){let e=new Uint8Array;for await(const r of t){if(r==null)continue;const n=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?DE(r):r;let s=new Uint8Array(e.length+n.length);s.set(e),s.set(n,e.length),e=s;let i;for(;(i=oSe(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class dSe{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,s]=hSe(e,":");return s.startsWith(" ")&&(s=s.substring(1)),r==="event"?this.event=s:r==="data"&&this.data.push(s),null}}function hSe(t,e){const r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}async function DH(t,e){const{response:r,requestLogID:n,retryOfRequestLogID:s,startTime:i}=e,a=await(async()=>{if(e.options.stream)return oo(t).debug("response",r.status,r.url,r.headers,r.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(r,e.controller,t):Qu.fromSSEResponse(r,e.controller,t);if(r.status===204)return null;if(e.options.__binaryResponse)return r;const l=r.headers.get("content-type")?.split(";")[0]?.trim();if(l?.includes("application/json")||l?.endsWith("+json")){const p=await r.json();return OH(p,r)}return await r.text()})();return oo(t).debug(`[${n}] response parsed`,w0({retryOfRequestLogID:s,url:r.url,status:r.status,body:a,durationMs:Date.now()-i})),a}function OH(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var o2;class d4 extends Promise{constructor(e,r,n=DH){super(s=>{s(null)}),this.responsePromise=r,this.parseResponse=n,o2.set(this,void 0),$r(this,o2,e)}_thenUnwrap(e){return new d4(dt(this,o2,"f"),this.responsePromise,async(r,n)=>OH(e(await this.parseResponse(r,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r,request_id:r.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(dt(this,o2,"f"),e))),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}o2=new WeakMap;var Qv;class OE{constructor(e,r,n,s){Qv.set(this,void 0),$r(this,Qv,e),this.options=s,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Tr("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await dt(this,Qv,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Qv=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const r of e.getPaginatedItems())yield r}}class fSe extends d4{constructor(e,r,n){super(e,r,async(s,i)=>new n(s,i.response,await DH(s,i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const r of e)yield r}}class h4 extends OE{constructor(e,r,n,s){super(e,r,n,s),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class da extends OE{constructor(e,r,n,s){super(e,r,n,s),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),r=e[e.length-1]?.id;return r?{...this.options,query:{...AH(this.options.query),after:r}}:null}}class X5 extends OE{constructor(e,r,n,s){super(e,r,n,s),this.data=n.data||[],this.has_more=n.has_more||!1,this.last_id=n.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...AH(this.options.query),after:e}}:null}}const MH=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function z2(t,e,r){return MH(),new File(t,e??"unknown_file",r)}function Lw(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const ME=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",r8=async(t,e)=>n8(t.body)?{...t,body:await BH(t.body,e)}:t,_p=async(t,e)=>({...t,body:await BH(t.body,e)}),UL=new WeakMap;function pSe(t){const e=typeof t=="function"?t:t.fetch,r=UL.get(e);if(r)return r;const n=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,i=new FormData;return i.toString()!==await new s(i).text()}catch{return!0}})();return UL.set(e,n),n}const BH=async(t,e)=>{if(!await pSe(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const r=new FormData;return await Promise.all(Object.entries(t||{}).map(([n,s])=>s8(r,n,s))),r},VH=t=>t instanceof Blob&&"name"in t,mSe=t=>typeof t=="object"&&t!==null&&(t instanceof Response||ME(t)||VH(t)),n8=t=>{if(mSe(t))return!0;if(Array.isArray(t))return t.some(n8);if(t&&typeof t=="object"){for(const e in t)if(n8(t[e]))return!0}return!1},s8=async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(r instanceof Response)t.append(e,z2([await r.blob()],Lw(r)));else if(ME(r))t.append(e,z2([await new Response(TH(r)).blob()],Lw(r)));else if(VH(r))t.append(e,r,Lw(r));else if(Array.isArray(r))await Promise.all(r.map(n=>s8(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,s])=>s8(t,`${e}[${n}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}},UH=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",gSe=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&UH(t),xSe=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function ySe(t,e,r){if(MH(),t=await t,gSe(t))return t instanceof File?t:z2([await t.arrayBuffer()],t.name);if(xSe(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),z2(await i8(s),e,r)}const n=await i8(t);if(e||(e=Lw(t)),!r?.type){const s=n.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(r={...r,type:s})}return z2(n,e,r)}async function i8(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(UH(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(ME(t))for await(const r of t)e.push(...await i8(r));else{const r=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${vSe(t)}`)}return e}function vSe(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}class Er{constructor(e){this._client=e}}function zH(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const zL=Object.freeze(Object.create(null)),wSe=(t=zH)=>function(r,...n){if(r.length===1)return r[0];let s=!1;const i=[],a=r.reduce((d,p,g)=>{/[?#]/.test(p)&&(s=!0);const m=n[g];let y=(s?encodeURIComponent:t)(""+m);return g!==n.length&&(m==null||typeof m=="object"&&m.toString===Object.getPrototypeOf(Object.getPrototypeOf(m.hasOwnProperty??zL)??zL)?.toString)&&(y=m+"",i.push({start:d.length+p.length,length:y.length,error:`Value of type ${Object.prototype.toString.call(m).slice(8,-1)} is not a valid path parameter`})),d+p+(g===n.length?"":y)},""),o=a.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(o))!==null;)i.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(i.sort((d,p)=>d.start-p.start),i.length>0){let d=0;const p=i.reduce((g,m)=>{const y=" ".repeat(m.start-d),w="^".repeat(m.length);return d=m.start+m.length,g+y+w},"");throw new Tr(`Path parameters result in path with invalid segments:
${i.map(g=>g.error).join(`
`)}
${a}
${p}`)}return a},Bt=wSe(zH);let $H=class extends Er{list(e,r={},n){return this._client.getAPIList(Bt`/chat/completions/${e}/messages`,da,{query:r,...n})}};function Q5(t){return t!==void 0&&"function"in t&&t.function!==void 0}function BE(t){return t?.$brand==="auto-parseable-response-format"}function ky(t){return t?.$brand==="auto-parseable-tool"}function _Se(t,e){return!e||!qH(e)?{...t,choices:t.choices.map(r=>(HH(r.message.tool_calls),{...r,message:{...r.message,parsed:null,...r.message.tool_calls?{tool_calls:r.message.tool_calls}:void 0}}))}:VE(t,e)}function VE(t,e){const r=t.choices.map(n=>{if(n.finish_reason==="length")throw new EH;if(n.finish_reason==="content_filter")throw new CH;return HH(n.message.tool_calls),{...n,message:{...n.message,...n.message.tool_calls?{tool_calls:n.message.tool_calls?.map(s=>kSe(e,s))??void 0}:void 0,parsed:n.message.content&&!n.message.refusal?bSe(e,n.message.content):null}}});return{...t,choices:r}}function bSe(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function kSe(t,e){const r=t.tools?.find(n=>Q5(n)&&n.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:ky(r)?r.$parseRaw(e.function.arguments):r?.function.strict?JSON.parse(e.function.arguments):null}}}function SSe(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const r=t.tools?.find(n=>Q5(n)&&n.function?.name===e.function.name);return Q5(r)&&(ky(r)||r?.function.strict||!1)}function qH(t){return BE(t.response_format)?!0:t.tools?.some(e=>ky(e)||e.type==="function"&&e.function.strict===!0)??!1}function HH(t){for(const e of t||[])if(e.type!=="function")throw new Tr(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function ESe(t){for(const e of t??[]){if(e.type!=="function")throw new Tr(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Tr(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const J5=t=>t?.role==="assistant",WH=t=>t?.role==="tool";var a8,jw,Fw,l2,c2,Dw,u2,Ld,d2,Z5,e_,Im,GH;class UE{constructor(){a8.add(this),this.controller=new AbortController,jw.set(this,void 0),Fw.set(this,()=>{}),l2.set(this,()=>{}),c2.set(this,void 0),Dw.set(this,()=>{}),u2.set(this,()=>{}),Ld.set(this,{}),d2.set(this,!1),Z5.set(this,!1),e_.set(this,!1),Im.set(this,!1),$r(this,jw,new Promise((e,r)=>{$r(this,Fw,e,"f"),$r(this,l2,r,"f")})),$r(this,c2,new Promise((e,r)=>{$r(this,Dw,e,"f"),$r(this,u2,r,"f")})),dt(this,jw,"f").catch(()=>{}),dt(this,c2,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},dt(this,a8,"m",GH).bind(this))},0)}_connected(){this.ended||(dt(this,Fw,"f").call(this),this._emit("connect"))}get ended(){return dt(this,d2,"f")}get errored(){return dt(this,Z5,"f")}get aborted(){return dt(this,e_,"f")}abort(){this.controller.abort()}on(e,r){return(dt(this,Ld,"f")[e]||(dt(this,Ld,"f")[e]=[])).push({listener:r}),this}off(e,r){const n=dt(this,Ld,"f")[e];if(!n)return this;const s=n.findIndex(i=>i.listener===r);return s>=0&&n.splice(s,1),this}once(e,r){return(dt(this,Ld,"f")[e]||(dt(this,Ld,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{$r(this,Im,!0),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){$r(this,Im,!0),await dt(this,c2,"f")}_emit(e,...r){if(dt(this,d2,"f"))return;e==="end"&&($r(this,d2,!0),dt(this,Dw,"f").call(this));const n=dt(this,Ld,"f")[e];if(n&&(dt(this,Ld,"f")[e]=n.filter(s=>!s.once),n.forEach(({listener:s})=>s(...r))),e==="abort"){const s=r[0];!dt(this,Im,"f")&&!n?.length&&Promise.reject(s),dt(this,l2,"f").call(this,s),dt(this,u2,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=r[0];!dt(this,Im,"f")&&!n?.length&&Promise.reject(s),dt(this,l2,"f").call(this,s),dt(this,u2,"f").call(this,s),this._emit("end")}}_emitFinal(){}}jw=new WeakMap,Fw=new WeakMap,l2=new WeakMap,c2=new WeakMap,Dw=new WeakMap,u2=new WeakMap,Ld=new WeakMap,d2=new WeakMap,Z5=new WeakMap,e_=new WeakMap,Im=new WeakMap,a8=new WeakSet,GH=function(e){if($r(this,Z5,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Ic),e instanceof Ic)return $r(this,e_,!0),this._emit("abort",e);if(e instanceof Tr)return this._emit("error",e);if(e instanceof Error){const r=new Tr(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new Tr(String(e)))};function CSe(t){return typeof t.parse=="function"}var rl,o8,t_,l8,c8,u8,KH,YH;const ASe=10;class XH extends UE{constructor(){super(...arguments),rl.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const r=e.choices[0]?.message;return r&&this._addMessage(r),e}_addMessage(e,r=!0){if("content"in e||(e.content=null),this.messages.push(e),r){if(this._emit("message",e),WH(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(J5(e)&&e.tool_calls)for(const n of e.tool_calls)n.type==="function"&&this._emit("functionToolCall",n.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Tr("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),dt(this,rl,"m",o8).call(this)}async finalMessage(){return await this.done(),dt(this,rl,"m",t_).call(this)}async finalFunctionToolCall(){return await this.done(),dt(this,rl,"m",l8).call(this)}async finalFunctionToolCallResult(){return await this.done(),dt(this,rl,"m",c8).call(this)}async totalUsage(){return await this.done(),dt(this,rl,"m",u8).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const r=dt(this,rl,"m",t_).call(this);r&&this._emit("finalMessage",r);const n=dt(this,rl,"m",o8).call(this);n&&this._emit("finalContent",n);const s=dt(this,rl,"m",l8).call(this);s&&this._emit("finalFunctionToolCall",s);const i=dt(this,rl,"m",c8).call(this);i!=null&&this._emit("finalFunctionToolCallResult",i),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",dt(this,rl,"m",u8).call(this))}async _createChatCompletion(e,r,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),dt(this,rl,"m",KH).call(this,r);const i=await e.chat.completions.create({...r,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(VE(i,r))}async _runChatCompletion(e,r,n){for(const s of r.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,r,n)}async _runTools(e,r,n){const s="tool",{tool_choice:i="auto",stream:a,...o}=r,l=typeof i!="string"&&i.type==="function"&&i?.function?.name,{maxChatCompletions:c=ASe}=n||{},d=r.tools.map(m=>{if(ky(m)){if(!m.$callback)throw new Tr("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:m.$callback,name:m.function.name,description:m.function.description||"",parameters:m.function.parameters,parse:m.$parseRaw,strict:!0}}}return m}),p={};for(const m of d)m.type==="function"&&(p[m.function.name||m.function.function.name]=m.function);const g="tools"in r?d.map(m=>m.type==="function"?{type:"function",function:{name:m.function.name||m.function.function.name,parameters:m.function.parameters,description:m.function.description,strict:m.function.strict}}:m):void 0;for(const m of r.messages)this._addMessage(m,!1);for(let m=0;m<c;++m){const w=(await this._createChatCompletion(e,{...o,tool_choice:i,tools:g,messages:[...this.messages]},n)).choices[0]?.message;if(!w)throw new Tr("missing message in ChatCompletion response");if(!w.tool_calls?.length)return;for(const _ of w.tool_calls){if(_.type!=="function")continue;const S=_.id,{name:T,arguments:I}=_.function,M=p[T];if(M){if(l&&l!==T){const A=`Invalid tool_call: ${JSON.stringify(T)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,tool_call_id:S,content:A});continue}}else{const A=`Invalid tool_call: ${JSON.stringify(T)}. Available options are: ${Object.keys(p).map(E=>JSON.stringify(E)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:S,content:A});continue}let K;try{K=CSe(M)?await M.parse(I):I}catch(A){const E=A instanceof Error?A.message:String(A);this._addMessage({role:s,tool_call_id:S,content:E});continue}const W=await M.function(K,this),L=dt(this,rl,"m",YH).call(this,W);if(this._addMessage({role:s,tool_call_id:S,content:L}),l)return}}}}rl=new WeakSet,o8=function(){return dt(this,rl,"m",t_).call(this).content??null},t_=function(){let e=this.messages.length;for(;e-- >0;){const r=this.messages[e];if(J5(r))return{...r,content:r.content??null,refusal:r.refusal??null}}throw new Tr("stream ended without producing a ChatCompletionMessage with role=assistant")},l8=function(){for(let e=this.messages.length-1;e>=0;e--){const r=this.messages[e];if(J5(r)&&r?.tool_calls?.length)return r.tool_calls.filter(n=>n.type==="function").at(-1)?.function}},c8=function(){for(let e=this.messages.length-1;e>=0;e--){const r=this.messages[e];if(WH(r)&&r.content!=null&&typeof r.content=="string"&&this.messages.some(n=>n.role==="assistant"&&n.tool_calls?.some(s=>s.type==="function"&&s.id===r.tool_call_id)))return r.content}},u8=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:r}of this._chatCompletions)r&&(e.completion_tokens+=r.completion_tokens,e.prompt_tokens+=r.prompt_tokens,e.total_tokens+=r.total_tokens);return e},KH=function(e){if(e.n!=null&&e.n>1)throw new Tr("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},YH=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class zE extends XH{static runTools(e,r,n){const s=new zE,i={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,r,i)),s}_addMessage(e,r=!0){super._addMessage(e,r),J5(e)&&e.content&&this._emit("content",e.content)}}const QH=1,JH=2,ZH=4,eW=8,tW=16,rW=32,nW=64,sW=128,iW=256,aW=sW|iW,oW=tW|rW|aW|nW,lW=QH|JH|oW,cW=ZH|eW,NSe=lW|cW,Ma={STR:QH,NUM:JH,ARR:ZH,OBJ:eW,NULL:tW,BOOL:rW,NAN:nW,INFINITY:sW,MINUS_INFINITY:iW,INF:aW,SPECIAL:oW,ATOM:lW,COLLECTION:cW,ALL:NSe};class TSe extends Error{}class ISe extends Error{}function PSe(t,e=Ma.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return RSe(t.trim(),e)}const RSe=(t,e)=>{const r=t.length;let n=0;const s=g=>{throw new TSe(`${g} at position ${n}`)},i=g=>{throw new ISe(`${g} at position ${n}`)},a=()=>(p(),n>=r&&s("Unexpected end of input"),t[n]==='"'?o():t[n]==="{"?l():t[n]==="["?c():t.substring(n,n+4)==="null"||Ma.NULL&e&&r-n<4&&"null".startsWith(t.substring(n))?(n+=4,null):t.substring(n,n+4)==="true"||Ma.BOOL&e&&r-n<4&&"true".startsWith(t.substring(n))?(n+=4,!0):t.substring(n,n+5)==="false"||Ma.BOOL&e&&r-n<5&&"false".startsWith(t.substring(n))?(n+=5,!1):t.substring(n,n+8)==="Infinity"||Ma.INFINITY&e&&r-n<8&&"Infinity".startsWith(t.substring(n))?(n+=8,1/0):t.substring(n,n+9)==="-Infinity"||Ma.MINUS_INFINITY&e&&1<r-n&&r-n<9&&"-Infinity".startsWith(t.substring(n))?(n+=9,-1/0):t.substring(n,n+3)==="NaN"||Ma.NAN&e&&r-n<3&&"NaN".startsWith(t.substring(n))?(n+=3,NaN):d()),o=()=>{const g=n;let m=!1;for(n++;n<r&&(t[n]!=='"'||m&&t[n-1]==="\\");)m=t[n]==="\\"?!m:!1,n++;if(t.charAt(n)=='"')try{return JSON.parse(t.substring(g,++n-Number(m)))}catch(y){i(String(y))}else if(Ma.STR&e)try{return JSON.parse(t.substring(g,n-Number(m))+'"')}catch{return JSON.parse(t.substring(g,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},l=()=>{n++,p();const g={};try{for(;t[n]!=="}";){if(p(),n>=r&&Ma.OBJ&e)return g;const m=o();p(),n++;try{const y=a();Object.defineProperty(g,m,{value:y,writable:!0,enumerable:!0,configurable:!0})}catch(y){if(Ma.OBJ&e)return g;throw y}p(),t[n]===","&&n++}}catch{if(Ma.OBJ&e)return g;s("Expected '}' at end of object")}return n++,g},c=()=>{n++;const g=[];try{for(;t[n]!=="]";)g.push(a()),p(),t[n]===","&&n++}catch{if(Ma.ARR&e)return g;s("Expected ']' at end of array")}return n++,g},d=()=>{if(n===0){t==="-"&&Ma.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(m){if(Ma.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(m))}}const g=n;for(t[n]==="-"&&n++;t[n]&&!",]}".includes(t[n]);)n++;n==r&&!(Ma.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(g,n))}catch{t.substring(g,n)==="-"&&Ma.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(g,t.lastIndexOf("e")))}catch(y){i(String(y))}}},p=()=>{for(;n<r&&` 
\r	`.includes(t[n]);)n++};return a()},$L=t=>PSe(t,Ma.ALL^Ma.NUM);var _a,Rd,ym,Wh,Jb,Jv,Zb,e6,t6,Zv,r6,qL;class Lx extends XH{constructor(e){super(),_a.add(this),Rd.set(this,void 0),ym.set(this,void 0),Wh.set(this,void 0),$r(this,Rd,e),$r(this,ym,[])}get currentChatCompletionSnapshot(){return dt(this,Wh,"f")}static fromReadableStream(e){const r=new Lx(null);return r._run(()=>r._fromReadableStream(e)),r}static createChatCompletion(e,r,n){const s=new Lx(r);return s._run(()=>s._runChatCompletion(e,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,r,n){super._createChatCompletion;const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),dt(this,_a,"m",Jb).call(this);const i=await e.chat.completions.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const a of i)dt(this,_a,"m",Zb).call(this,a);if(i.controller.signal?.aborted)throw new Ic;return this._addChatCompletion(dt(this,_a,"m",Zv).call(this))}async _fromReadableStream(e,r){const n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),dt(this,_a,"m",Jb).call(this),this._connected();const s=Qu.fromReadableStream(e,this.controller);let i;for await(const a of s)i&&i!==a.id&&this._addChatCompletion(dt(this,_a,"m",Zv).call(this)),dt(this,_a,"m",Zb).call(this,a),i=a.id;if(s.controller.signal?.aborted)throw new Ic;return this._addChatCompletion(dt(this,_a,"m",Zv).call(this))}[(Rd=new WeakMap,ym=new WeakMap,Wh=new WeakMap,_a=new WeakSet,Jb=function(){this.ended||$r(this,Wh,void 0)},Jv=function(r){let n=dt(this,ym,"f")[r.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},dt(this,ym,"f")[r.index]=n,n)},Zb=function(r){if(this.ended)return;const n=dt(this,_a,"m",qL).call(this,r);this._emit("chunk",r,n);for(const s of r.choices){const i=n.choices[s.index];s.delta.content!=null&&i.message?.role==="assistant"&&i.message?.content&&(this._emit("content",s.delta.content,i.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:i.message.content,parsed:i.message.parsed})),s.delta.refusal!=null&&i.message?.role==="assistant"&&i.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:i.message.refusal}),s.logprobs?.content!=null&&i.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:i.logprobs?.content??[]}),s.logprobs?.refusal!=null&&i.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:i.logprobs?.refusal??[]});const a=dt(this,_a,"m",Jv).call(this,i);i.finish_reason&&(dt(this,_a,"m",t6).call(this,i),a.current_tool_call_index!=null&&dt(this,_a,"m",e6).call(this,i,a.current_tool_call_index));for(const o of s.delta.tool_calls??[])a.current_tool_call_index!==o.index&&(dt(this,_a,"m",t6).call(this,i),a.current_tool_call_index!=null&&dt(this,_a,"m",e6).call(this,i,a.current_tool_call_index)),a.current_tool_call_index=o.index;for(const o of s.delta.tool_calls??[]){const l=i.message.tool_calls?.[o.index];l?.type&&(l?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:l.function?.name,index:o.index,arguments:l.function.arguments,parsed_arguments:l.function.parsed_arguments,arguments_delta:o.function?.arguments??""}):(l?.type,void 0))}}},e6=function(r,n){if(dt(this,_a,"m",Jv).call(this,r).done_tool_calls.has(n))return;const i=r.message.tool_calls?.[n];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const a=dt(this,Rd,"f")?.tools?.find(o=>Q5(o)&&o.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:n,arguments:i.function.arguments,parsed_arguments:ky(a)?a.$parseRaw(i.function.arguments):a?.function.strict?JSON.parse(i.function.arguments):null})}else i.type},t6=function(r){const n=dt(this,_a,"m",Jv).call(this,r);if(r.message.content&&!n.content_done){n.content_done=!0;const s=dt(this,_a,"m",r6).call(this);this._emit("content.done",{content:r.message.content,parsed:s?s.$parseRaw(r.message.content):null})}r.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:r.message.refusal})),r.logprobs?.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:r.logprobs.content})),r.logprobs?.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:r.logprobs.refusal}))},Zv=function(){if(this.ended)throw new Tr("stream has ended, this shouldn't happen");const r=dt(this,Wh,"f");if(!r)throw new Tr("request ended without sending any chunks");return $r(this,Wh,void 0),$r(this,ym,[]),LSe(r,dt(this,Rd,"f"))},r6=function(){const r=dt(this,Rd,"f")?.response_format;return BE(r)?r:null},qL=function(r){var n,s,i,a;let o=dt(this,Wh,"f");const{choices:l,...c}=r;o?Object.assign(o,c):o=$r(this,Wh,{...c,choices:[]});for(const{delta:d,finish_reason:p,index:g,logprobs:m=null,...y}of r.choices){let w=o.choices[g];if(w||(w=o.choices[g]={finish_reason:p,index:g,message:{},logprobs:m,...y}),m)if(!w.logprobs)w.logprobs=Object.assign({},m);else{const{content:W,refusal:L,...A}=m;Object.assign(w.logprobs,A),W&&((n=w.logprobs).content??(n.content=[]),w.logprobs.content.push(...W)),L&&((s=w.logprobs).refusal??(s.refusal=[]),w.logprobs.refusal.push(...L))}if(p&&(w.finish_reason=p,dt(this,Rd,"f")&&qH(dt(this,Rd,"f")))){if(p==="length")throw new EH;if(p==="content_filter")throw new CH}if(Object.assign(w,y),!d)continue;const{content:_,refusal:S,function_call:T,role:I,tool_calls:M,...K}=d;if(Object.assign(w.message,K),S&&(w.message.refusal=(w.message.refusal||"")+S),I&&(w.message.role=I),T&&(w.message.function_call?(T.name&&(w.message.function_call.name=T.name),T.arguments&&((i=w.message.function_call).arguments??(i.arguments=""),w.message.function_call.arguments+=T.arguments)):w.message.function_call=T),_&&(w.message.content=(w.message.content||"")+_,!w.message.refusal&&dt(this,_a,"m",r6).call(this)&&(w.message.parsed=$L(w.message.content))),M){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:W,id:L,type:A,function:E,...D}of M){const R=(a=w.message.tool_calls)[W]??(a[W]={});Object.assign(R,D),L&&(R.id=L),A&&(R.type=A),E&&(R.function??(R.function={name:E.name??"",arguments:""})),E?.name&&(R.function.name=E.name),E?.arguments&&(R.function.arguments+=E.arguments,SSe(dt(this,Rd,"f"),R)&&(R.function.parsed_arguments=$L(R.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("chunk",s=>{const i=r.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{n=!0;for(const i of r)i.reject(s);r.length=0}),this.on("error",s=>{n=!0;for(const i of r)i.reject(s);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((i,a)=>r.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Qu(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function LSe(t,e){const{id:r,choices:n,created:s,model:i,system_fingerprint:a,...o}=t,l={...o,id:r,choices:n.map(({message:c,finish_reason:d,index:p,logprobs:g,...m})=>{if(!d)throw new Tr(`missing finish_reason for choice ${p}`);const{content:y=null,function_call:w,tool_calls:_,...S}=c,T=c.role;if(!T)throw new Tr(`missing role for choice ${p}`);if(w){const{arguments:I,name:M}=w;if(I==null)throw new Tr(`missing function_call.arguments for choice ${p}`);if(!M)throw new Tr(`missing function_call.name for choice ${p}`);return{...m,message:{content:y,function_call:{arguments:I,name:M},role:T,refusal:c.refusal??null},finish_reason:d,index:p,logprobs:g}}return _?{...m,index:p,finish_reason:d,logprobs:g,message:{...S,role:T,content:y,refusal:c.refusal??null,tool_calls:_.map((I,M)=>{const{function:K,type:W,id:L,...A}=I,{arguments:E,name:D,...R}=K||{};if(L==null)throw new Tr(`missing choices[${p}].tool_calls[${M}].id
${ew(t)}`);if(W==null)throw new Tr(`missing choices[${p}].tool_calls[${M}].type
${ew(t)}`);if(D==null)throw new Tr(`missing choices[${p}].tool_calls[${M}].function.name
${ew(t)}`);if(E==null)throw new Tr(`missing choices[${p}].tool_calls[${M}].function.arguments
${ew(t)}`);return{...A,id:L,type:W,function:{...R,name:D,arguments:E}}})}}:{...m,message:{...S,content:y,role:T,refusal:c.refusal??null},finish_reason:d,index:p,logprobs:g}}),created:s,model:i,object:"chat.completion",...a?{system_fingerprint:a}:{}};return _Se(l,e)}function ew(t){return JSON.stringify(t)}class r_ extends Lx{static fromReadableStream(e){const r=new r_(null);return r._run(()=>r._fromReadableStream(e)),r}static runTools(e,r,n){const s=new r_(r),i={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,r,i)),s}}let $E=class extends Er{constructor(){super(...arguments),this.messages=new $H(this._client)}create(e,r){return this._client.post("/chat/completions",{body:e,...r,stream:e.stream??!1})}retrieve(e,r){return this._client.get(Bt`/chat/completions/${e}`,r)}update(e,r,n){return this._client.post(Bt`/chat/completions/${e}`,{body:r,...n})}list(e={},r){return this._client.getAPIList("/chat/completions",da,{query:e,...r})}delete(e,r){return this._client.delete(Bt`/chat/completions/${e}`,r)}parse(e,r){return ESe(e.tools),this._client.chat.completions.create(e,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(n=>VE(n,e))}runTools(e,r){return e.stream?r_.runTools(this._client,e,r):zE.runTools(this._client,e,r)}stream(e,r){return Lx.createChatCompletion(this._client,e,r)}};$E.Messages=$H;class qE extends Er{constructor(){super(...arguments),this.completions=new $E(this._client)}}qE.Completions=$E;const uW=Symbol("brand.privateNullableHeaders");function*jSe(t){if(!t)return;if(uW in t){const{values:n,nulls:s}=t;yield*n.entries();for(const i of s)yield[i,null];return}let e=!1,r;t instanceof Headers?r=t.entries():TL(t)?r=t:(e=!0,r=Object.entries(t??{}));for(let n of r){const s=n[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=TL(n[1])?n[1]:[n[1]];let a=!1;for(const o of i)o!==void 0&&(e&&!a&&(a=!0,yield[s,null]),yield[s,o])}}const ur=t=>{const e=new Headers,r=new Set;for(const n of t){const s=new Set;for(const[i,a]of jSe(n)){const o=i.toLowerCase();s.has(o)||(e.delete(i),s.add(o)),a===null?(e.delete(i),r.add(o)):(e.append(i,a),r.delete(o))}}return{[uW]:!0,values:e,nulls:r}};class dW extends Er{create(e,r){return this._client.post("/audio/speech",{body:e,...r,headers:ur([{Accept:"application/octet-stream"},r?.headers]),__binaryResponse:!0})}}class hW extends Er{create(e,r){return this._client.post("/audio/transcriptions",_p({body:e,...r,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class fW extends Er{create(e,r){return this._client.post("/audio/translations",_p({body:e,...r,__metadata:{model:e.model}},this._client))}}let Sy=class extends Er{constructor(){super(...arguments),this.transcriptions=new hW(this._client),this.translations=new fW(this._client),this.speech=new dW(this._client)}};Sy.Transcriptions=hW;Sy.Translations=fW;Sy.Speech=dW;class pW extends Er{create(e,r){return this._client.post("/batches",{body:e,...r})}retrieve(e,r){return this._client.get(Bt`/batches/${e}`,r)}list(e={},r){return this._client.getAPIList("/batches",da,{query:e,...r})}cancel(e,r){return this._client.post(Bt`/batches/${e}/cancel`,r)}}class mW extends Er{create(e,r){return this._client.post("/assistants",{body:e,...r,headers:ur([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,r){return this._client.get(Bt`/assistants/${e}`,{...r,headers:ur([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,r,n){return this._client.post(Bt`/assistants/${e}`,{body:r,...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e={},r){return this._client.getAPIList("/assistants",da,{query:e,...r,headers:ur([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,r){return this._client.delete(Bt`/assistants/${e}`,{...r,headers:ur([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}let gW=class extends Er{create(e,r){return this._client.post("/realtime/sessions",{body:e,...r,headers:ur([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}};class xW extends Er{create(e,r){return this._client.post("/realtime/transcription_sessions",{body:e,...r,headers:ur([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}let f4=class extends Er{constructor(){super(...arguments),this.sessions=new gW(this._client),this.transcriptionSessions=new xW(this._client)}};f4.Sessions=gW;f4.TranscriptionSessions=xW;class yW extends Er{create(e,r){return this._client.post("/chatkit/sessions",{body:e,...r,headers:ur([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}cancel(e,r){return this._client.post(Bt`/chatkit/sessions/${e}/cancel`,{...r,headers:ur([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}}let vW=class extends Er{retrieve(e,r){return this._client.get(Bt`/chatkit/threads/${e}`,{...r,headers:ur([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}list(e={},r){return this._client.getAPIList("/chatkit/threads",X5,{query:e,...r,headers:ur([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}delete(e,r){return this._client.delete(Bt`/chatkit/threads/${e}`,{...r,headers:ur([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}listItems(e,r={},n){return this._client.getAPIList(Bt`/chatkit/threads/${e}/items`,X5,{query:r,...n,headers:ur([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}};class p4 extends Er{constructor(){super(...arguments),this.sessions=new yW(this._client),this.threads=new vW(this._client)}uploadFile(e,r){return this._client.post("/chatkit/files",r8({body:e,...r,headers:ur([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])},this._client))}}p4.Sessions=yW;p4.Threads=vW;class wW extends Er{create(e,r,n){return this._client.post(Bt`/threads/${e}/messages`,{body:r,...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,r,n){const{thread_id:s}=r;return this._client.get(Bt`/threads/${s}/messages/${e}`,{...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,r,n){const{thread_id:s,...i}=r;return this._client.post(Bt`/threads/${s}/messages/${e}`,{body:i,...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,r={},n){return this._client.getAPIList(Bt`/threads/${e}/messages`,da,{query:r,...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,r,n){const{thread_id:s}=r;return this._client.delete(Bt`/threads/${s}/messages/${e}`,{...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}class _W extends Er{retrieve(e,r,n){const{thread_id:s,run_id:i,...a}=r;return this._client.get(Bt`/threads/${s}/runs/${i}/steps/${e}`,{query:a,...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,r,n){const{thread_id:s,...i}=r;return this._client.getAPIList(Bt`/threads/${s}/runs/${e}/steps`,da,{query:i,...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}const FSe=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),r=e.length,n=new Uint8Array(r);for(let s=0;s<r;s++)n[s]=e.charCodeAt(s);return Array.from(new Float32Array(n.buffer))}};var DSe={};const vm=t=>{if(typeof globalThis.process<"u")return DSe?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var lo,O0,d8,zu,Ow,su,M0,Um,N0,n_,Gl,Mw,Bw,$2,h2,f2,HL,WL,GL,KL,YL,XL,QL;class q2 extends UE{constructor(){super(...arguments),lo.add(this),d8.set(this,[]),zu.set(this,{}),Ow.set(this,{}),su.set(this,void 0),M0.set(this,void 0),Um.set(this,void 0),N0.set(this,void 0),n_.set(this,void 0),Gl.set(this,void 0),Mw.set(this,void 0),Bw.set(this,void 0),$2.set(this,void 0)}[(d8=new WeakMap,zu=new WeakMap,Ow=new WeakMap,su=new WeakMap,M0=new WeakMap,Um=new WeakMap,N0=new WeakMap,n_=new WeakMap,Gl=new WeakMap,Mw=new WeakMap,Bw=new WeakMap,$2=new WeakMap,lo=new WeakSet,Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("event",s=>{const i=r.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{n=!0;for(const i of r)i.reject(s);r.length=0}),this.on("error",s=>{n=!0;for(const i of r)i.reject(s);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((i,a)=>r.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const r=new O0;return r._run(()=>r._fromReadableStream(e)),r}async _fromReadableStream(e,r){const n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Qu.fromReadableStream(e,this.controller);for await(const i of s)dt(this,lo,"m",h2).call(this,i);if(s.controller.signal?.aborted)throw new Ic;return this._addRun(dt(this,lo,"m",f2).call(this))}toReadableStream(){return new Qu(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,r,n,s){const i=new O0;return i._run(()=>i._runToolAssistantStream(e,r,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,r,n,s){const i=s?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},o=await e.submitToolOutputs(r,a,{...s,signal:this.controller.signal});this._connected();for await(const l of o)dt(this,lo,"m",h2).call(this,l);if(o.controller.signal?.aborted)throw new Ic;return this._addRun(dt(this,lo,"m",f2).call(this))}static createThreadAssistantStream(e,r,n){const s=new O0;return s._run(()=>s._threadAssistantStream(e,r,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,r,n,s){const i=new O0;return i._run(()=>i._runAssistantStream(e,r,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return dt(this,Mw,"f")}currentRun(){return dt(this,Bw,"f")}currentMessageSnapshot(){return dt(this,su,"f")}currentRunStepSnapshot(){return dt(this,$2,"f")}async finalRunSteps(){return await this.done(),Object.values(dt(this,zu,"f"))}async finalMessages(){return await this.done(),Object.values(dt(this,Ow,"f"))}async finalRun(){if(await this.done(),!dt(this,M0,"f"))throw Error("Final run was not received.");return dt(this,M0,"f")}async _createThreadAssistantStream(e,r,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const i={...r,stream:!0},a=await e.createAndRun(i,{...n,signal:this.controller.signal});this._connected();for await(const o of a)dt(this,lo,"m",h2).call(this,o);if(a.controller.signal?.aborted)throw new Ic;return this._addRun(dt(this,lo,"m",f2).call(this))}async _createAssistantStream(e,r,n,s){const i=s?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},o=await e.create(r,a,{...s,signal:this.controller.signal});this._connected();for await(const l of o)dt(this,lo,"m",h2).call(this,l);if(o.controller.signal?.aborted)throw new Ic;return this._addRun(dt(this,lo,"m",f2).call(this))}static accumulateDelta(e,r){for(const[n,s]of Object.entries(r)){if(!e.hasOwnProperty(n)){e[n]=s;continue}let i=e[n];if(i==null){e[n]=s;continue}if(n==="index"||n==="type"){e[n]=s;continue}if(typeof i=="string"&&typeof s=="string")i+=s;else if(typeof i=="number"&&typeof s=="number")i+=s;else if(Yb(i)&&Yb(s))i=this.accumulateDelta(i,s);else if(Array.isArray(i)&&Array.isArray(s)){if(i.every(a=>typeof a=="string"||typeof a=="number")){i.push(...s);continue}for(const a of s){if(!Yb(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const o=a.index;if(o==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=i[o];l==null?i.push(a):i[o]=this.accumulateDelta(l,a)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${s}, accValue: ${i}`);e[n]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,r,n){return await this._createThreadAssistantStream(r,e,n)}async _runAssistantStream(e,r,n,s){return await this._createAssistantStream(r,e,n,s)}async _runToolAssistantStream(e,r,n,s){return await this._createToolAssistantStream(r,e,n,s)}}O0=q2,h2=function(e){if(!this.ended)switch($r(this,Mw,e),dt(this,lo,"m",GL).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":dt(this,lo,"m",QL).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":dt(this,lo,"m",WL).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":dt(this,lo,"m",HL).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},f2=function(){if(this.ended)throw new Tr("stream has ended, this shouldn't happen");if(!dt(this,M0,"f"))throw Error("Final run has not been received");return dt(this,M0,"f")},HL=function(e){const[r,n]=dt(this,lo,"m",YL).call(this,e,dt(this,su,"f"));$r(this,su,r),dt(this,Ow,"f")[r.id]=r;for(const s of n){const i=r.content[s.index];i?.type=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,r),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let i=s.text,a=r.content[s.index];if(a&&a.type=="text")this._emit("textDelta",i,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=dt(this,Um,"f")){if(dt(this,N0,"f"))switch(dt(this,N0,"f").type){case"text":this._emit("textDone",dt(this,N0,"f").text,dt(this,su,"f"));break;case"image_file":this._emit("imageFileDone",dt(this,N0,"f").image_file,dt(this,su,"f"));break}$r(this,Um,s.index)}$r(this,N0,r.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(dt(this,Um,"f")!==void 0){const s=e.data.content[dt(this,Um,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,dt(this,su,"f"));break;case"text":this._emit("textDone",s.text,dt(this,su,"f"));break}}dt(this,su,"f")&&this._emit("messageDone",e.data),$r(this,su,void 0)}},WL=function(e){const r=dt(this,lo,"m",KL).call(this,e);switch($r(this,$2,r),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&r.step_details.type=="tool_calls")for(const i of n.step_details.tool_calls)i.index==dt(this,n_,"f")?this._emit("toolCallDelta",i,r.step_details.tool_calls[i.index]):(dt(this,Gl,"f")&&this._emit("toolCallDone",dt(this,Gl,"f")),$r(this,n_,i.index),$r(this,Gl,r.step_details.tool_calls[i.index]),dt(this,Gl,"f")&&this._emit("toolCallCreated",dt(this,Gl,"f")));this._emit("runStepDelta",e.data.delta,r);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":$r(this,$2,void 0),e.data.step_details.type=="tool_calls"&&dt(this,Gl,"f")&&(this._emit("toolCallDone",dt(this,Gl,"f")),$r(this,Gl,void 0)),this._emit("runStepDone",e.data,r);break}},GL=function(e){dt(this,d8,"f").push(e),this._emit("event",e)},KL=function(e){switch(e.event){case"thread.run.step.created":return dt(this,zu,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let r=dt(this,zu,"f")[e.data.id];if(!r)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const s=O0.accumulateDelta(r,n.delta);dt(this,zu,"f")[e.data.id]=s}return dt(this,zu,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":dt(this,zu,"f")[e.data.id]=e.data;break}if(dt(this,zu,"f")[e.data.id])return dt(this,zu,"f")[e.data.id];throw new Error("No snapshot available")},YL=function(e,r){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!r)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const i of s.delta.content)if(i.index in r.content){let a=r.content[i.index];r.content[i.index]=dt(this,lo,"m",XL).call(this,i,a)}else r.content[i.index]=i,n.push(i);return[r,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(r)return[r,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},XL=function(e,r){return O0.accumulateDelta(r,e)},QL=function(e){switch($r(this,Bw,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":$r(this,M0,e.data),dt(this,Gl,"f")&&(this._emit("toolCallDone",dt(this,Gl,"f")),$r(this,Gl,void 0));break}};let HE=class extends Er{constructor(){super(...arguments),this.steps=new _W(this._client)}create(e,r,n){const{include:s,...i}=r;return this._client.post(Bt`/threads/${e}/runs`,{query:{include:s},body:i,...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:r.stream??!1})}retrieve(e,r,n){const{thread_id:s}=r;return this._client.get(Bt`/threads/${s}/runs/${e}`,{...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,r,n){const{thread_id:s,...i}=r;return this._client.post(Bt`/threads/${s}/runs/${e}`,{body:i,...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,r={},n){return this._client.getAPIList(Bt`/threads/${e}/runs`,da,{query:r,...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}cancel(e,r,n){const{thread_id:s}=r;return this._client.post(Bt`/threads/${s}/runs/${e}/cancel`,{...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,r,n){const s=await this.create(e,r,n);return await this.poll(s.id,{thread_id:e},n)}createAndStream(e,r,n){return q2.createAssistantStream(e,this._client.beta.threads.runs,r,n)}async poll(e,r,n){const s=ur([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:i,response:a}=await this.retrieve(e,r,{...n,headers:{...n?.headers,...s}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(n?.pollIntervalMs)o=n.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await by(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,r,n){return q2.createAssistantStream(e,this._client.beta.threads.runs,r,n)}submitToolOutputs(e,r,n){const{thread_id:s,...i}=r;return this._client.post(Bt`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:i,...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:r.stream??!1})}async submitToolOutputsAndPoll(e,r,n){const s=await this.submitToolOutputs(e,r,n);return await this.poll(s.id,r,n)}submitToolOutputsStream(e,r,n){return q2.createToolAssistantStream(e,this._client.beta.threads.runs,r,n)}};HE.Steps=_W;class m4 extends Er{constructor(){super(...arguments),this.runs=new HE(this._client),this.messages=new wW(this._client)}create(e={},r){return this._client.post("/threads",{body:e,...r,headers:ur([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,r){return this._client.get(Bt`/threads/${e}`,{...r,headers:ur([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,r,n){return this._client.post(Bt`/threads/${e}`,{body:r,...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,r){return this._client.delete(Bt`/threads/${e}`,{...r,headers:ur([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}createAndRun(e,r){return this._client.post("/threads/runs",{body:e,...r,headers:ur([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,r){const n=await this.createAndRun(e,r);return await this.runs.poll(n.id,{thread_id:n.thread_id},r)}createAndRunStream(e,r){return q2.createThreadAssistantStream(e,this._client.beta.threads,r)}}m4.Runs=HE;m4.Messages=wW;class sg extends Er{constructor(){super(...arguments),this.realtime=new f4(this._client),this.chatkit=new p4(this._client),this.assistants=new mW(this._client),this.threads=new m4(this._client)}}sg.Realtime=f4;sg.ChatKit=p4;sg.Assistants=mW;sg.Threads=m4;class bW extends Er{create(e,r){return this._client.post("/completions",{body:e,...r,stream:e.stream??!1})}}class kW extends Er{retrieve(e,r,n){const{container_id:s}=r;return this._client.get(Bt`/containers/${s}/files/${e}/content`,{...n,headers:ur([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}}let WE=class extends Er{constructor(){super(...arguments),this.content=new kW(this._client)}create(e,r,n){return this._client.post(Bt`/containers/${e}/files`,_p({body:r,...n},this._client))}retrieve(e,r,n){const{container_id:s}=r;return this._client.get(Bt`/containers/${s}/files/${e}`,n)}list(e,r={},n){return this._client.getAPIList(Bt`/containers/${e}/files`,da,{query:r,...n})}delete(e,r,n){const{container_id:s}=r;return this._client.delete(Bt`/containers/${s}/files/${e}`,{...n,headers:ur([{Accept:"*/*"},n?.headers])})}};WE.Content=kW;class GE extends Er{constructor(){super(...arguments),this.files=new WE(this._client)}create(e,r){return this._client.post("/containers",{body:e,...r})}retrieve(e,r){return this._client.get(Bt`/containers/${e}`,r)}list(e={},r){return this._client.getAPIList("/containers",da,{query:e,...r})}delete(e,r){return this._client.delete(Bt`/containers/${e}`,{...r,headers:ur([{Accept:"*/*"},r?.headers])})}}GE.Files=WE;class SW extends Er{create(e,r,n){const{include:s,...i}=r;return this._client.post(Bt`/conversations/${e}/items`,{query:{include:s},body:i,...n})}retrieve(e,r,n){const{conversation_id:s,...i}=r;return this._client.get(Bt`/conversations/${s}/items/${e}`,{query:i,...n})}list(e,r={},n){return this._client.getAPIList(Bt`/conversations/${e}/items`,X5,{query:r,...n})}delete(e,r,n){const{conversation_id:s}=r;return this._client.delete(Bt`/conversations/${s}/items/${e}`,n)}}class KE extends Er{constructor(){super(...arguments),this.items=new SW(this._client)}create(e={},r){return this._client.post("/conversations",{body:e,...r})}retrieve(e,r){return this._client.get(Bt`/conversations/${e}`,r)}update(e,r,n){return this._client.post(Bt`/conversations/${e}`,{body:r,...n})}delete(e,r){return this._client.delete(Bt`/conversations/${e}`,r)}}KE.Items=SW;class EW extends Er{create(e,r){const n=!!e.encoding_format;let s=n?e.encoding_format:"base64";n&&oo(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:s},...r});return n?i:(oo(this._client).debug("embeddings/decoding base64 embeddings from base64"),i._thenUnwrap(a=>(a&&a.data&&a.data.forEach(o=>{const l=o.embedding;o.embedding=FSe(l)}),a)))}}class CW extends Er{retrieve(e,r,n){const{eval_id:s,run_id:i}=r;return this._client.get(Bt`/evals/${s}/runs/${i}/output_items/${e}`,n)}list(e,r,n){const{eval_id:s,...i}=r;return this._client.getAPIList(Bt`/evals/${s}/runs/${e}/output_items`,da,{query:i,...n})}}class YE extends Er{constructor(){super(...arguments),this.outputItems=new CW(this._client)}create(e,r,n){return this._client.post(Bt`/evals/${e}/runs`,{body:r,...n})}retrieve(e,r,n){const{eval_id:s}=r;return this._client.get(Bt`/evals/${s}/runs/${e}`,n)}list(e,r={},n){return this._client.getAPIList(Bt`/evals/${e}/runs`,da,{query:r,...n})}delete(e,r,n){const{eval_id:s}=r;return this._client.delete(Bt`/evals/${s}/runs/${e}`,n)}cancel(e,r,n){const{eval_id:s}=r;return this._client.post(Bt`/evals/${s}/runs/${e}`,n)}}YE.OutputItems=CW;class XE extends Er{constructor(){super(...arguments),this.runs=new YE(this._client)}create(e,r){return this._client.post("/evals",{body:e,...r})}retrieve(e,r){return this._client.get(Bt`/evals/${e}`,r)}update(e,r,n){return this._client.post(Bt`/evals/${e}`,{body:r,...n})}list(e={},r){return this._client.getAPIList("/evals",da,{query:e,...r})}delete(e,r){return this._client.delete(Bt`/evals/${e}`,r)}}XE.Runs=YE;let AW=class extends Er{create(e,r){return this._client.post("/files",_p({body:e,...r},this._client))}retrieve(e,r){return this._client.get(Bt`/files/${e}`,r)}list(e={},r){return this._client.getAPIList("/files",da,{query:e,...r})}delete(e,r){return this._client.delete(Bt`/files/${e}`,r)}content(e,r){return this._client.get(Bt`/files/${e}/content`,{...r,headers:ur([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:r=5e3,maxWait:n=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),i=Date.now();let a=await this.retrieve(e);for(;!a.status||!s.has(a.status);)if(await by(r),a=await this.retrieve(e),Date.now()-i>n)throw new FE({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return a}};class NW extends Er{}let TW=class extends Er{run(e,r){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...r})}validate(e,r){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...r})}};class QE extends Er{constructor(){super(...arguments),this.graders=new TW(this._client)}}QE.Graders=TW;class IW extends Er{create(e,r,n){return this._client.getAPIList(Bt`/fine_tuning/checkpoints/${e}/permissions`,h4,{body:r,method:"post",...n})}retrieve(e,r={},n){return this._client.get(Bt`/fine_tuning/checkpoints/${e}/permissions`,{query:r,...n})}delete(e,r,n){const{fine_tuned_model_checkpoint:s}=r;return this._client.delete(Bt`/fine_tuning/checkpoints/${s}/permissions/${e}`,n)}}let JE=class extends Er{constructor(){super(...arguments),this.permissions=new IW(this._client)}};JE.Permissions=IW;class PW extends Er{list(e,r={},n){return this._client.getAPIList(Bt`/fine_tuning/jobs/${e}/checkpoints`,da,{query:r,...n})}}class ZE extends Er{constructor(){super(...arguments),this.checkpoints=new PW(this._client)}create(e,r){return this._client.post("/fine_tuning/jobs",{body:e,...r})}retrieve(e,r){return this._client.get(Bt`/fine_tuning/jobs/${e}`,r)}list(e={},r){return this._client.getAPIList("/fine_tuning/jobs",da,{query:e,...r})}cancel(e,r){return this._client.post(Bt`/fine_tuning/jobs/${e}/cancel`,r)}listEvents(e,r={},n){return this._client.getAPIList(Bt`/fine_tuning/jobs/${e}/events`,da,{query:r,...n})}pause(e,r){return this._client.post(Bt`/fine_tuning/jobs/${e}/pause`,r)}resume(e,r){return this._client.post(Bt`/fine_tuning/jobs/${e}/resume`,r)}}ZE.Checkpoints=PW;class ig extends Er{constructor(){super(...arguments),this.methods=new NW(this._client),this.jobs=new ZE(this._client),this.checkpoints=new JE(this._client),this.alpha=new QE(this._client)}}ig.Methods=NW;ig.Jobs=ZE;ig.Checkpoints=JE;ig.Alpha=QE;class RW extends Er{}class e9 extends Er{constructor(){super(...arguments),this.graderModels=new RW(this._client)}}e9.GraderModels=RW;class LW extends Er{createVariation(e,r){return this._client.post("/images/variations",_p({body:e,...r},this._client))}edit(e,r){return this._client.post("/images/edits",_p({body:e,...r,stream:e.stream??!1},this._client))}generate(e,r){return this._client.post("/images/generations",{body:e,...r,stream:e.stream??!1})}}class jW extends Er{retrieve(e,r){return this._client.get(Bt`/models/${e}`,r)}list(e){return this._client.getAPIList("/models",h4,e)}delete(e,r){return this._client.delete(Bt`/models/${e}`,r)}}class FW extends Er{create(e,r){return this._client.post("/moderations",{body:e,...r})}}class DW extends Er{accept(e,r,n){return this._client.post(Bt`/realtime/calls/${e}/accept`,{body:r,...n,headers:ur([{Accept:"*/*"},n?.headers])})}hangup(e,r){return this._client.post(Bt`/realtime/calls/${e}/hangup`,{...r,headers:ur([{Accept:"*/*"},r?.headers])})}refer(e,r,n){return this._client.post(Bt`/realtime/calls/${e}/refer`,{body:r,...n,headers:ur([{Accept:"*/*"},n?.headers])})}reject(e,r={},n){return this._client.post(Bt`/realtime/calls/${e}/reject`,{body:r,...n,headers:ur([{Accept:"*/*"},n?.headers])})}}class OW extends Er{create(e,r){return this._client.post("/realtime/client_secrets",{body:e,...r})}}class g4 extends Er{constructor(){super(...arguments),this.clientSecrets=new OW(this._client),this.calls=new DW(this._client)}}g4.ClientSecrets=OW;g4.Calls=DW;function OSe(t,e){return!e||!BSe(e)?{...t,output_parsed:null,output:t.output.map(r=>r.type==="function_call"?{...r,parsed_arguments:null}:r.type==="message"?{...r,content:r.content.map(n=>({...n,parsed:null}))}:r)}:MW(t,e)}function MW(t,e){const r=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:zSe(e,s)};if(s.type==="message"){const i=s.content.map(a=>a.type==="output_text"?{...a,parsed:MSe(e,a.text)}:a);return{...s,content:i}}return s}),n=Object.assign({},t,{output:r});return Object.getOwnPropertyDescriptor(t,"output_text")||h8(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(const s of n.output)if(s.type==="message"){for(const i of s.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),n}function MSe(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function BSe(t){return!!BE(t.text?.format)}function VSe(t){return t?.$brand==="auto-parseable-tool"}function USe(t,e){return t.find(r=>r.type==="function"&&r.name===e)}function zSe(t,e){const r=USe(t.tools??[],e.name);return{...e,...e,parsed_arguments:VSe(r)?r.$parseRaw(e.arguments):r?.strict?JSON.parse(e.arguments):null}}function h8(t){const e=[];for(const r of t.output)if(r.type==="message")for(const n of r.content)n.type==="output_text"&&e.push(n.text);t.output_text=e.join("")}var wm,tw,Gh,rw,JL,ZL,ej,tj;class t9 extends UE{constructor(e){super(),wm.add(this),tw.set(this,void 0),Gh.set(this,void 0),rw.set(this,void 0),$r(this,tw,e)}static createResponse(e,r,n){const s=new t9(r);return s._run(()=>s._createOrRetrieveResponse(e,r,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,r,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),dt(this,wm,"m",JL).call(this);let i,a=null;"response_id"in r?(i=await e.responses.retrieve(r.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),a=r.starting_after??null):i=await e.responses.create({...r,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(const o of i)dt(this,wm,"m",ZL).call(this,o,a);if(i.controller.signal?.aborted)throw new Ic;return dt(this,wm,"m",ej).call(this)}[(tw=new WeakMap,Gh=new WeakMap,rw=new WeakMap,wm=new WeakSet,JL=function(){this.ended||$r(this,Gh,void 0)},ZL=function(r,n){if(this.ended)return;const s=(a,o)=>{(n==null||o.sequence_number>n)&&this._emit(a,o)},i=dt(this,wm,"m",tj).call(this,r);switch(s("event",r),r.type){case"response.output_text.delta":{const a=i.output[r.output_index];if(!a)throw new Tr(`missing output at index ${r.output_index}`);if(a.type==="message"){const o=a.content[r.content_index];if(!o)throw new Tr(`missing content at index ${r.content_index}`);if(o.type!=="output_text")throw new Tr(`expected content to be 'output_text', got ${o.type}`);s("response.output_text.delta",{...r,snapshot:o.text})}break}case"response.function_call_arguments.delta":{const a=i.output[r.output_index];if(!a)throw new Tr(`missing output at index ${r.output_index}`);a.type==="function_call"&&s("response.function_call_arguments.delta",{...r,snapshot:a.arguments});break}default:s(r.type,r);break}},ej=function(){if(this.ended)throw new Tr("stream has ended, this shouldn't happen");const r=dt(this,Gh,"f");if(!r)throw new Tr("request ended without sending any events");$r(this,Gh,void 0);const n=$Se(r,dt(this,tw,"f"));return $r(this,rw,n),n},tj=function(r){let n=dt(this,Gh,"f");if(!n){if(r.type!=="response.created")throw new Tr(`When snapshot hasn't been set yet, expected 'response.created' event, got ${r.type}`);return n=$r(this,Gh,r.response),n}switch(r.type){case"response.output_item.added":{n.output.push(r.item);break}case"response.content_part.added":{const s=n.output[r.output_index];if(!s)throw new Tr(`missing output at index ${r.output_index}`);const i=s.type,a=r.part;i==="message"&&a.type!=="reasoning_text"?s.content.push(a):i==="reasoning"&&a.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(a));break}case"response.output_text.delta":{const s=n.output[r.output_index];if(!s)throw new Tr(`missing output at index ${r.output_index}`);if(s.type==="message"){const i=s.content[r.content_index];if(!i)throw new Tr(`missing content at index ${r.content_index}`);if(i.type!=="output_text")throw new Tr(`expected content to be 'output_text', got ${i.type}`);i.text+=r.delta}break}case"response.function_call_arguments.delta":{const s=n.output[r.output_index];if(!s)throw new Tr(`missing output at index ${r.output_index}`);s.type==="function_call"&&(s.arguments+=r.delta);break}case"response.reasoning_text.delta":{const s=n.output[r.output_index];if(!s)throw new Tr(`missing output at index ${r.output_index}`);if(s.type==="reasoning"){const i=s.content?.[r.content_index];if(!i)throw new Tr(`missing content at index ${r.content_index}`);if(i.type!=="reasoning_text")throw new Tr(`expected content to be 'reasoning_text', got ${i.type}`);i.text+=r.delta}break}case"response.completed":{$r(this,Gh,r.response);break}}return n},Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("event",s=>{const i=r.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{n=!0;for(const i of r)i.reject(s);r.length=0}),this.on("error",s=>{n=!0;for(const i of r)i.reject(s);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((i,a)=>r.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=dt(this,rw,"f");if(!e)throw new Tr("stream ended without producing a ChatCompletion");return e}}function $Se(t,e){return OSe(t,e)}class BW extends Er{list(e,r={},n){return this._client.getAPIList(Bt`/responses/${e}/input_items`,da,{query:r,...n})}}class r9 extends Er{constructor(){super(...arguments),this.inputItems=new BW(this._client)}create(e,r){return this._client.post("/responses",{body:e,...r,stream:e.stream??!1})._thenUnwrap(n=>("object"in n&&n.object==="response"&&h8(n),n))}retrieve(e,r={},n){return this._client.get(Bt`/responses/${e}`,{query:r,...n,stream:r?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&h8(s),s))}delete(e,r){return this._client.delete(Bt`/responses/${e}`,{...r,headers:ur([{Accept:"*/*"},r?.headers])})}parse(e,r){return this._client.responses.create(e,r)._thenUnwrap(n=>MW(n,e))}stream(e,r){return t9.createResponse(this._client,e,r)}cancel(e,r){return this._client.post(Bt`/responses/${e}/cancel`,r)}}r9.InputItems=BW;class VW extends Er{create(e,r,n){return this._client.post(Bt`/uploads/${e}/parts`,_p({body:r,...n},this._client))}}class n9 extends Er{constructor(){super(...arguments),this.parts=new VW(this._client)}create(e,r){return this._client.post("/uploads",{body:e,...r})}cancel(e,r){return this._client.post(Bt`/uploads/${e}/cancel`,r)}complete(e,r,n){return this._client.post(Bt`/uploads/${e}/complete`,{body:r,...n})}}n9.Parts=VW;const qSe=async t=>{const e=await Promise.allSettled(t),r=e.filter(s=>s.status==="rejected");if(r.length){for(const s of r)console.error(s.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}const n=[];for(const s of e)s.status==="fulfilled"&&n.push(s.value);return n};class UW extends Er{create(e,r,n){return this._client.post(Bt`/vector_stores/${e}/file_batches`,{body:r,...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,r,n){const{vector_store_id:s}=r;return this._client.get(Bt`/vector_stores/${s}/file_batches/${e}`,{...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}cancel(e,r,n){const{vector_store_id:s}=r;return this._client.post(Bt`/vector_stores/${s}/file_batches/${e}/cancel`,{...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,r,n){const s=await this.create(e,r);return await this.poll(e,s.id,n)}listFiles(e,r,n){const{vector_store_id:s,...i}=r;return this._client.getAPIList(Bt`/vector_stores/${s}/file_batches/${e}/files`,da,{query:i,...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async poll(e,r,n){const s=ur([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:i,response:a}=await this.retrieve(r,{vector_store_id:e},{...n,headers:s}).withResponse();switch(i.status){case"in_progress":let o=5e3;if(n?.pollIntervalMs)o=n.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await by(o);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:r,fileIds:n=[]},s){if(r==null||r.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=s?.maxConcurrency??5,a=Math.min(i,r.length),o=this._client,l=r.values(),c=[...n];async function d(g){for(let m of g){const y=await o.files.create({file:m,purpose:"assistants"},s);c.push(y.id)}}const p=Array(a).fill(l).map(d);return await qSe(p),await this.createAndPoll(e,{file_ids:c})}}class zW extends Er{create(e,r,n){return this._client.post(Bt`/vector_stores/${e}/files`,{body:r,...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,r,n){const{vector_store_id:s}=r;return this._client.get(Bt`/vector_stores/${s}/files/${e}`,{...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,r,n){const{vector_store_id:s,...i}=r;return this._client.post(Bt`/vector_stores/${s}/files/${e}`,{body:i,...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,r={},n){return this._client.getAPIList(Bt`/vector_stores/${e}/files`,da,{query:r,...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,r,n){const{vector_store_id:s}=r;return this._client.delete(Bt`/vector_stores/${s}/files/${e}`,{...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,r,n){const s=await this.create(e,r,n);return await this.poll(e,s.id,n)}async poll(e,r,n){const s=ur([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){const i=await this.retrieve(r,{vector_store_id:e},{...n,headers:s}).withResponse(),a=i.data;switch(a.status){case"in_progress":let o=5e3;if(n?.pollIntervalMs)o=n.pollIntervalMs;else{const l=i.response.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await by(o);break;case"failed":case"completed":return a}}}async upload(e,r,n){const s=await this._client.files.create({file:r,purpose:"assistants"},n);return this.create(e,{file_id:s.id},n)}async uploadAndPoll(e,r,n){const s=await this.upload(e,r,n);return await this.poll(e,s.id,n)}content(e,r,n){const{vector_store_id:s}=r;return this._client.getAPIList(Bt`/vector_stores/${s}/files/${e}/content`,h4,{...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}class x4 extends Er{constructor(){super(...arguments),this.files=new zW(this._client),this.fileBatches=new UW(this._client)}create(e,r){return this._client.post("/vector_stores",{body:e,...r,headers:ur([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,r){return this._client.get(Bt`/vector_stores/${e}`,{...r,headers:ur([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,r,n){return this._client.post(Bt`/vector_stores/${e}`,{body:r,...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e={},r){return this._client.getAPIList("/vector_stores",da,{query:e,...r,headers:ur([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,r){return this._client.delete(Bt`/vector_stores/${e}`,{...r,headers:ur([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}search(e,r,n){return this._client.getAPIList(Bt`/vector_stores/${e}/search`,h4,{body:r,method:"post",...n,headers:ur([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}x4.Files=zW;x4.FileBatches=UW;class $W extends Er{create(e,r){return this._client.post("/videos",r8({body:e,...r},this._client))}retrieve(e,r){return this._client.get(Bt`/videos/${e}`,r)}list(e={},r){return this._client.getAPIList("/videos",X5,{query:e,...r})}delete(e,r){return this._client.delete(Bt`/videos/${e}`,r)}downloadContent(e,r={},n){return this._client.get(Bt`/videos/${e}/content`,{query:r,...n,headers:ur([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}remix(e,r,n){return this._client.post(Bt`/videos/${e}/remix`,r8({body:r,...n},this._client))}}var Pm,qW,Vw;class HW extends Er{constructor(){super(...arguments),Pm.add(this)}async unwrap(e,r,n=this._client.webhookSecret,s=300){return await this.verifySignature(e,r,n,s),JSON.parse(e)}async verifySignature(e,r,n=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");dt(this,Pm,"m",qW).call(this,n);const i=ur([r]).values,a=dt(this,Pm,"m",Vw).call(this,i,"webhook-signature"),o=dt(this,Pm,"m",Vw).call(this,i,"webhook-timestamp"),l=dt(this,Pm,"m",Vw).call(this,i,"webhook-id"),c=parseInt(o,10);if(isNaN(c))throw new i2("Invalid webhook timestamp format");const d=Math.floor(Date.now()/1e3);if(d-c>s)throw new i2("Webhook timestamp is too old");if(c>d+s)throw new i2("Webhook timestamp is too new");const p=a.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),g=n.startsWith("whsec_")?Buffer.from(n.replace("whsec_",""),"base64"):Buffer.from(n,"utf-8"),m=l?`${l}.${o}.${e}`:`${o}.${e}`,y=await crypto.subtle.importKey("raw",g,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of p)try{const _=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",y,_,new TextEncoder().encode(m)))return}catch{continue}throw new i2("The given webhook signature does not match the expected signature")}}Pm=new WeakSet,qW=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Vw=function(e,r){if(!e)throw new Error("Headers are required");const n=e.get(r);if(n==null)throw new Error(`Missing required header: ${r}`);return n};var f8,s9,Uw,WW;class mn{constructor({baseURL:e=vm("OPENAI_BASE_URL"),apiKey:r=vm("OPENAI_API_KEY"),organization:n=vm("OPENAI_ORG_ID")??null,project:s=vm("OPENAI_PROJECT_ID")??null,webhookSecret:i=vm("OPENAI_WEBHOOK_SECRET")??null,...a}={}){if(f8.add(this),Uw.set(this,void 0),this.completions=new bW(this),this.chat=new qE(this),this.embeddings=new EW(this),this.files=new AW(this),this.images=new LW(this),this.audio=new Sy(this),this.moderations=new FW(this),this.models=new jW(this),this.fineTuning=new ig(this),this.graders=new e9(this),this.vectorStores=new x4(this),this.webhooks=new HW(this),this.beta=new sg(this),this.batches=new pW(this),this.uploads=new n9(this),this.responses=new r9(this),this.realtime=new g4(this),this.conversations=new KE(this),this.evals=new XE(this),this.containers=new GE(this),this.videos=new $W(this),r===void 0)throw new Tr("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const o={apiKey:r,organization:n,project:s,webhookSecret:i,...a,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&H8e())throw new Tr(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=o.baseURL,this.timeout=o.timeout??s9.DEFAULT_TIMEOUT,this.logger=o.logger??console;const l="warn";this.logLevel=l,this.logLevel=BL(o.logLevel,"ClientOptions.logLevel",this)??BL(vm("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??X8e(),$r(this,Uw,J8e),this._options=o,this.apiKey=typeof r=="string"?r:"Missing Key",this.organization=n,this.project=s,this.webhookSecret=i}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:r}){}async authHeaders(e){return ur([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return sSe(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Tm}`}defaultIdempotencyKey(){return`stainless-node-retry-${gH()}`}makeStatusError(e,r,n,s){return mo.generate(e,r,n,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let r;try{r=await e()}catch(n){throw n instanceof Tr?n:new Tr(`Failed to get token from 'apiKey' function: ${n.message}`,{cause:n})}if(typeof r!="string"||!r)throw new Tr(`Expected 'apiKey' function argument to return a string but it returned ${r}`);return this.apiKey=r,!0}buildURL(e,r,n){const s=!dt(this,f8,"m",WW).call(this)&&n||this.baseURL,i=V8e(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return U8e(a)||(r={...a,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(i.search=this.stringifyQuery(r)),i.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:r,options:n}){}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(s=>({method:e,path:r,...s})))}request(e,r=null){return new d4(this,this.makeRequest(e,r,void 0))}async makeRequest(e,r,n){const s=await e,i=s.maxRetries??this.maxRetries;r==null&&(r=i),await this.prepareOptions(s);const{req:a,url:o,timeout:l}=await this.buildRequest(s,{retryCount:i-r});await this.prepareRequest(a,{url:o,options:s});const c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=n===void 0?"":`, retryOf: ${n}`,p=Date.now();if(oo(this).debug(`[${c}] sending request`,w0({retryOfRequestLogID:n,method:s.method,url:o,options:s,headers:a.headers})),s.signal?.aborted)throw new Ic;const g=new AbortController,m=await this.fetchWithTimeout(o,a,l,g).catch(e8),y=Date.now();if(m instanceof globalThis.Error){const S=`retrying, ${r} attempts remaining`;if(s.signal?.aborted)throw new Ic;const T=Zk(m)||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(r)return oo(this).info(`[${c}] connection ${T?"timed out":"failed"} - ${S}`),oo(this).debug(`[${c}] connection ${T?"timed out":"failed"} (${S})`,w0({retryOfRequestLogID:n,url:o,durationMs:y-p,message:m.message})),this.retryRequest(s,r,n??c);throw oo(this).info(`[${c}] connection ${T?"timed out":"failed"} - error; no more retries left`),oo(this).debug(`[${c}] connection ${T?"timed out":"failed"} (error; no more retries left)`,w0({retryOfRequestLogID:n,url:o,durationMs:y-p,message:m.message})),T?new FE:new c4({cause:m})}const w=[...m.headers.entries()].filter(([S])=>S==="x-request-id").map(([S,T])=>", "+S+": "+JSON.stringify(T)).join(""),_=`[${c}${d}${w}] ${a.method} ${o} ${m.ok?"succeeded":"failed"} with status ${m.status} in ${y-p}ms`;if(!m.ok){const S=await this.shouldRetry(m);if(r&&S){const L=`retrying, ${r} attempts remaining`;return await Q8e(m.body),oo(this).info(`${_} - ${L}`),oo(this).debug(`[${c}] response error (${L})`,w0({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,durationMs:y-p})),this.retryRequest(s,r,n??c,m.headers)}const T=S?"error; no more retries left":"error; not retryable";oo(this).info(`${_} - ${T}`);const I=await m.text().catch(L=>e8(L).message),M=q8e(I),K=M?void 0:I;throw oo(this).debug(`[${c}] response error (${T})`,w0({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,message:K,durationMs:Date.now()-p})),this.makeStatusError(m.status,M,K,m.headers)}return oo(this).info(_),oo(this).debug(`[${c}] response start`,w0({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,durationMs:y-p})),{response:m,options:s,controller:g,requestLogID:c,retryOfRequestLogID:n,startTime:p}}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}requestAPIList(e,r){const n=this.makeRequest(r,null,void 0);return new fSe(this,n,e)}async fetchWithTimeout(e,r,n,s){const{signal:i,method:a,...o}=r||{};i&&i.addEventListener("abort",()=>s.abort());const l=setTimeout(()=>s.abort(),n),c=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||typeof o.body=="object"&&o.body!==null&&Symbol.asyncIterator in o.body,d={signal:s.signal,...c?{duplex:"half"}:{},method:"GET",...o};a&&(d.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(l)}}async shouldRetry(e){const r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n,s){let i;const a=s?.get("retry-after-ms");if(a){const l=parseFloat(a);Number.isNaN(l)||(i=l)}const o=s?.get("retry-after");if(o&&!i){const l=parseFloat(o);Number.isNaN(l)?i=Date.parse(o)-Date.now():i=l*1e3}if(!(i&&0<=i&&i<60*1e3)){const l=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(r,l)}return await by(i),this.makeRequest(e,r-1,n)}calculateDefaultRetryTimeoutMillis(e,r){const i=r-e,a=Math.min(.5*Math.pow(2,i),8),o=1-Math.random()*.25;return a*o*1e3}async buildRequest(e,{retryCount:r=0}={}){const n={...e},{method:s,path:i,query:a,defaultBaseURL:o}=n,l=this.buildURL(i,a,o);"timeout"in n&&$8e("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const{bodyHeaders:c,body:d}=this.buildBody({options:n}),p=await this.buildHeaders({options:e,method:s,bodyHeaders:c,retryCount:r});return{req:{method:s,headers:p,...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&d instanceof globalThis.ReadableStream&&{duplex:"half"},...d&&{body:d},...this.fetchOptions??{},...n.fetchOptions??{}},url:l,timeout:n.timeout}}async buildHeaders({options:e,method:r,bodyHeaders:n,retryCount:s}){let i={};this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const a=ur([i,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...Y8e(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,n,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:r}}){if(!e)return{bodyHeaders:void 0,body:void 0};const n=ur([r]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:TH(e)}:dt(this,Uw,"f").call(this,{body:e,headers:n})}}s9=mn,Uw=new WeakMap,f8=new WeakSet,WW=function(){return this.baseURL!=="https://api.openai.com/v1"};mn.OpenAI=s9;mn.DEFAULT_TIMEOUT=6e5;mn.OpenAIError=Tr;mn.APIError=mo;mn.APIConnectionError=c4;mn.APIConnectionTimeoutError=FE;mn.APIUserAbortError=Ic;mn.NotFoundError=wH;mn.ConflictError=_H;mn.RateLimitError=kH;mn.BadRequestError=xH;mn.AuthenticationError=yH;mn.InternalServerError=SH;mn.PermissionDeniedError=vH;mn.UnprocessableEntityError=bH;mn.InvalidWebhookSignatureError=i2;mn.toFile=ySe;mn.Completions=bW;mn.Chat=qE;mn.Embeddings=EW;mn.Files=AW;mn.Images=LW;mn.Audio=Sy;mn.Moderations=FW;mn.Models=jW;mn.FineTuning=ig;mn.Graders=e9;mn.VectorStores=x4;mn.Webhooks=HW;mn.Beta=sg;mn.Batches=pW;mn.Uploads=n9;mn.Responses=r9;mn.Realtime=g4;mn.Conversations=KE;mn.Evals=XE;mn.Containers=GE;mn.Videos=$W;var rj;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(rj||(rj={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nj;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(nj||(nj={}));var sj;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(sj||(sj={}));var ij;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(ij||(ij={}));var aj;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(aj||(aj={}));var oj;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(oj||(oj={}));var lj;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(lj||(lj={}));var H2;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(H2||(H2={}));var cj;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(cj||(cj={}));var uj;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(uj||(uj={}));var dj;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(dj||(dj={}));var hj;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(hj||(hj={}));H2.RECITATION,H2.SAFETY,H2.LANGUAGE;const fj="mistral";async function HSe(t=20){try{const e=_r(Zt(ht,"users"),jr("role","==","pharmacy"),cd(t)),r=await wn(e),n=[];return r.forEach(s=>{const i=s.data(),a=i?.lat??i?.latitude??i?.location?.lat??i?.location?.latitude??i?.coords?.lat??i?.coords?.latitude??i?.coordinates?.lat??i?.coordinates?.latitude,o=i?.lon??i?.lng??i?.longitude??i?.location?.lon??i?.location?.lng??i?.location?.longitude??i?.coords?.lon??i?.coords?.lng??i?.coords?.longitude??i?.coordinates?.lon??i?.coordinates?.lng??i?.coordinates?.longitude,l=typeof a=="number"?a:a!=null?Number(a):void 0,c=typeof o=="number"?o:o!=null?Number(o):void 0,d=i?.coordinates||i?.coords||(l!==void 0&&!Number.isNaN(l)&&c!==void 0&&!Number.isNaN(c)?{latitude:l,longitude:c}:void 0);n.push({id:s.id,name:i.displayName||i.name,email:i.email,location:i.location,phone:i.phone||i.phoneNumber,address:i.address,verified:i.verified||i.isVerified||!1,lat:l!==void 0&&!Number.isNaN(l)?l:void 0,lon:c!==void 0&&!Number.isNaN(c)?c:void 0,coordinates:d,services:i.services,url:`/vendor/${s.id}`})}),n}catch(e){return console.error("Error fetching pharmacies:",e),[]}}async function WSe(t=50){try{const e=_r(Zt(ht,"products"),Yi("createdAt","desc"),cd(t)),r=await wn(e),n=[];return r.forEach(s=>{const i=s.data();n.push({name:i.name,description:i.description,category:i.category,price:i.price,pharmacyName:i.pharmacyName,stock:i.stock,tags:i.tags||[],url:`/product/${s.id}`})}),n}catch(e){return console.error("Error fetching products:",e),[]}}async function GW(t=[]){const e=Array.from(new Set((t||[]).filter(Boolean).map(s=>typeof s=="string"?s.trim():s)));if(e.length===0)return{};const r=await Promise.all(e.map(s=>ni(er(ht,"products",s)))),n={};return r.forEach((s,i)=>{s.exists()&&(n[e[i]]={id:s.id,...s.data()})}),n}const p2=t=>{if(!t)return null;if(t instanceof Date)return Number.isNaN(t.getTime())?null:t;if(typeof t.toDate=="function"){const e=t.toDate();return e instanceof Date&&!Number.isNaN(e.getTime())?e:null}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return Number.isNaN(e.getTime())?null:e}if(typeof t.toISOString=="function"){const e=t.toISOString(),r=new Date(e);return Number.isNaN(r.getTime())?null:r}return null},p8=t=>{const e=p2(t);return e?e.toISOString():null};async function GSe(t,{limitItems:e=25}={}){if(!t)return[];try{let n=(await wn(Zt(ht,"users",t,"cart"))).docs.map(a=>({id:a.id,...a.data()}));if(n.length===0)return[];typeof e=="number"&&e>0&&(n=n.slice(0,e));const s=n.map(a=>a.productId).filter(Boolean),i=await GW(s);return n.map(a=>{const o=i[a.productId]||{};return{id:a.id,productId:a.productId||null,quantity:a.qty||a.quantity||1,productName:o.name,price:o.price,currency:o.currency||"NGN",pharmacyName:o.pharmacyName,stock:o.stock,productUrl:o.id?`/product/${o.id}`:null,cartUrl:"/cart"}})}catch(r){return console.error("Error fetching user cart for AI context:",r),[]}}async function KSe(t,{limitCount:e=10}={}){if(!t)return[];try{const r=_r(Zt(ht,"orders"),jr("customerId","==",t),Yi("createdAt","desc"),cd(e)),n=await wn(r);if(n.empty)return[];const s=[],i=new Set;n.forEach(o=>{const l=o.data();s.push({id:o.id,...l}),(l.items||[]).forEach(c=>{c?.productId&&i.add(c.productId)})});const a=await GW(Array.from(i));return s.map(o=>{const l=p8(o.createdAt),c=(o.items||[]).map(d=>{const p=a[d.productId]||{};return{productId:d.productId||null,productName:p.name,quantity:d.quantity||d.qty||1,price:d.price??p.price,productUrl:p.id?`/product/${p.id}`:null}});return{id:o.id,status:o.status||"pending",total:o.total,createdAt:l,pharmacyId:o.pharmacyId||null,orderUrl:`/orders?highlight=${o.id}`,items:c}})}catch(r){return console.error("Error fetching user orders for AI context:",r),[]}}async function YSe(t,{limitCount:e=15}={}){if(!t)return[];try{const r=_r(Zt(ht,"prescriptions"),jr("customerId","==",t)),n=await wn(r);if(n.empty)return[];const s=n.docs.map(a=>({id:a.id,...a.data()}));return s.sort((a,o)=>{const l=p2(a.startDate)||p2(a.createdAt)||new Date(0);return((p2(o.startDate)||p2(o.createdAt)||new Date(0))?.getTime?.()||0)-(l?.getTime?.()||0)}),(typeof e=="number"&&e>0?s.slice(0,e):s).map(a=>{const o=p8(a.startDate)||p8(a.createdAt);return{id:a.id,pharmacyId:a.pharmacyId||null,status:a.status||"active",startDate:o,duration:a.duration,notes:a.notes,drugs:(a.drugs||[]).map(l=>({name:l.name,dosage:l.dosage,frequency:l.frequency,instructions:l.instructions})),prescriptionUrl:"/profile",relatedChatThreadId:a.chatThreadId||null}})}catch(r){return console.error("Error fetching user prescriptions for AI context:",r),[]}}const XSe=()=>({apiKey:"066561f51f6241ed8b403f898592a34c",baseURL:"https://api.aimlapi.com/v1/chat/completions",model:"mistralai/Mistral-7B-Instruct-v0.3"}),QSe=`You are PharmAI, a helpful AI assistant for a pharmacy app called Pharmasea. You help users with:

1. GENERAL HEALTH INFORMATION - Provide general wellness tips, explain common health concepts, and answer basic health questions
2. PRODUCT INFORMATION - Help users understand medications, supplements, and health products available in our app
3. PHARMACY SERVICES - Explain how pharmacy services work, prescription processes, etc.
4. PHARMACY SEARCH - Help users find pharmacies in our network based on location, name, or services
5. PRODUCT SEARCH - Help users find specific medications, health products, or alternatives available in our app
6. WELLNESS ADVICE - Give general lifestyle and wellness recommendations

IMPORTANT CAPABILITIES:
- You have access to our pharmacy network and can search for pharmacies by location, name, or services
- You have access to our product catalog and can search for medications, supplements, and health products
- You can review the user's current cart items, recent orders, and prescriptions (when provided) to give contextual assistancenever invent entries that are not in the supplied data
- When users ask about specific drugs or pharmacies, search our database and provide accurate information
- When listing products, ALWAYS include the product URL so users can click directly to view details
- When listing pharmacies, ALWAYS include the pharmacy URL so users can click directly to view details
- You know the user's approximate location when provided and can highlight nearby pharmacies and their distance
- When searching for pharmacies, if no exact matches are found, suggest similar pharmacies that might be what the user is looking for
- Always mention that you can help search for pharmacies or products when relevant
- Only recommend pharmacies that exist in the provided pharmacy lists; never invent locations or references outside the supplied data
- Use any provided navigation URLs (e.g., cartUrl, orderUrl, productUrl, prescriptionUrl) so users can quickly open the relevant screen inside Pharmasea
- Always refer to our platform as "Pharmasea" (never shorten it to "Pharmacy" or any other name)

IMPORTANT SAFETY GUIDELINES:
- NEVER give medical advice, diagnoses, or treatment recommendations
- NEVER suggest specific medications or dosages
- ALWAYS include disclaimers when discussing health topics
- ALWAYS recommend consulting healthcare professionals for medical concerns
- When advising professional care, recommend at least one nearby pharmacy from the provided nearestPharmacies data (prioritize verified options and mention distance when available)
- If a user asks for medical advice, politely redirect them to speak with a doctor or pharmacist

RESPONSE STYLE:
- Be friendly, helpful, and professional
- Use clear, simple language
- Keep responses concise but informative
- NEVER include internal IDs, database keys, or technical identifiers in your responses
- When listing products, embed links in the product names using markdown format: [Product Name](URL) - Price - Description
- When mentioning pharmacies, embed links in pharmacy names using markdown format: [Pharmacy Name](URL)
- When mentioning nearby pharmacies, list them as bullet points with distance (e.g.,  [PharmCare Pharmacy](URL)  1.2 km away  Address)
- Use markdown link format [Name](URL) to make names clickable
- When suggesting pharmacies, mention if they are similar matches when exact searches don't work
- If no suitable pharmacy exists in the provided data, state that clearly instead of recommending an unknown location
- When referencing cart items, orders, or prescriptions, acknowledge their current state and include the relevant navigation link (cartUrl, orderUrl, prescriptionUrl) so the user can jump straight to that view
- When referencing the app or experience, call it "Pharmasea" to reinforce branding
- Always end medical/health related responses with appropriate disclaimers
- Be culturally sensitive and inclusive

If you don't know something, admit it and suggest consulting appropriate professionals.`;async function JSe(t,e={}){try{if(fj!=="gemini"){if(fj==="mistral")return await ZSe(t,e)}}catch(r){return console.error("AI response error:",r),"I'm sorry, I'm having trouble connecting right now. Please try again later or contact our support team."}}async function ZSe(t,e={}){const r=XSe(),n=[{role:"system",content:QSe},{role:"user",content:t}];e.userLocation&&n.splice(1,0,{role:"system",content:`User location: ${JSON.stringify(e.userLocation)}`}),e.userInfo&&n.splice(1,0,{role:"system",content:`User context: ${JSON.stringify(e.userInfo)}`}),e.nearestPharmacies&&n.splice(1,0,{role:"system",content:`Nearest pharmacies to the user: ${JSON.stringify(e.nearestPharmacies)}`}),e.productInfo&&n.splice(1,0,{role:"system",content:`Available products in our app: ${JSON.stringify(e.productInfo)}`}),e.pharmacyInfo&&n.splice(1,0,{role:"system",content:`Available pharmacies in our network: ${JSON.stringify(e.pharmacyInfo)}`});const s=await fetch(r.baseURL,{method:"POST",headers:{Authorization:`Bearer ${r.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:r.model,messages:n,max_tokens:500,temperature:.7})});if(!s.ok)throw new Error(`AIML API error: ${s.status} ${s.statusText}`);return(await s.json()).choices[0].message.content}function KW(t){const e=["diagnosis","diagnose","treatment","treat","cure","medicine","medication","prescription","prescribe","dosage","dose","symptoms","symptom","pain","ache","hurt","illness","disease","condition","sick","emergency","urgent","serious","severe","chronic","acute"],r=t.toLowerCase();return e.some(n=>r.includes(n))}function e7e(t,e={}){return t&&(KW(t)?t+`

 **Medical Disclaimer:** This is general information only and not medical advice. Please consult with a healthcare professional for personalized medical recommendations.`:t)}const t7e="/ChatBg.svg",nw=({className:t="w-5 h-5"})=>u.jsx("img",{src:"/PharmAI.svg",alt:"PharmAI",className:t}),r7e=(t="")=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n7e=t=>{const e=t?.name?.trim(),r=t?.url;if(!e||!r)return null;const n=r7e(e),i=/\w/.test(e[0])&&/\w/.test(e[e.length-1])?`\\b${n}\\b`:n;return{name:e,url:r,pattern:i}},s7e=(t,e,r,n)=>(Array.isArray(t)||(t=[t]),e?.length?t.flatMap(s=>typeof s!="string"?[s]:e.reduce((i,a)=>i.flatMap(o=>{if(typeof o!="string")return[o];const l=new RegExp(a.pattern,"gi");let c=0,d;const p=[];for(;(d=l.exec(o))!==null;){d.index>c&&p.push(o.slice(c,d.index));const g=d[0];p.push(u.jsx("span",{onClick:()=>r(a.url),className:"text-sky-600 hover:text-sky-800 underline font-normal cursor-pointer",children:g},n())),c=l.lastIndex}return p.length===0?[o]:(c<o.length&&p.push(o.slice(c)),p)}),[s])):t),Tc=t=>{if(t==null)return null;if(typeof t=="number"&&Number.isFinite(t))return t;const e=Number(t);return Number.isFinite(e)?e:null},i7e=["location","coordinates","coords"],a7e=["lat","latitude"],o7e=["lon","lng","longitude"],zw=(t,e=0)=>{if(!t||e>2)return null;for(const r of a7e)for(const n of o7e){const s=Tc(t[r]),i=Tc(t[n]);if(s!==null&&i!==null)return{lat:s,lon:i}}for(const r of i7e){if(!t[r])continue;const n=zw(t[r],e+1);if(n)return n}return null},sw=t=>t*Math.PI/180,l7e=6371,c7e=(t,e)=>{if(!t||!e)return null;const r=Tc(t.lat),n=Tc(t.lon),s=Tc(e.lat),i=Tc(e.lon);if(r===null||n===null||s===null||i===null)return null;const a=sw(s-r),o=sw(i-n),l=sw(r),c=sw(s),d=Math.sin(a/2)*Math.sin(a/2)+Math.sin(o/2)*Math.sin(o/2)*Math.cos(l)*Math.cos(c),p=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d));return l7e*p},pj=t=>{if(!t)return null;const e={id:t.id,name:t.name||t.displayName||"Pharmacy",address:t.address||t.location?.address||t.location,verified:!!t.verified,url:t.url};t.phone&&(e.phone=t.phone),t.location&&(e.location=t.location);const r=Tc(t.distanceKm);return r!==null&&(e.distanceKm=Number(r.toFixed(2))),e},u7e=(t,e,r=[])=>{if(!t)return null;const n=/\[([^\]]+)\]\(([^)]+)\)/g,s=[];let i=0,a,o=0;const l=()=>`ai-link-${o++}`;for(;(a=n.exec(t))!==null;){a.index>i&&s.push(t.slice(i,a.index));const p=a[1],g=a[2];s.push(u.jsx("span",{onClick:()=>e(g),className:"text-sky-600 hover:text-sky-800 underline font-normal cursor-pointer",children:p},l())),i=a.index+a[0].length}i<t.length&&s.push(t.slice(i));const c=s.length?s:[t],d=s7e(c,r,e,l);return d.length===1?d[0]:d};function d7e(){const{user:t,profile:e}=Dn(),{t:r}=qs(),n=Jn(),[s,i]=j.useState([]),[a,o]=j.useState(""),[l,c]=j.useState(!1),[d,p]=j.useState(!1),[g,m]=j.useState([]),[y,w]=j.useState([]),[_,S]=j.useState([]),[T,I]=j.useState([]),[M,K]=j.useState([]),W=j.useRef(null),L=j.useRef(null),A=j.useMemo(()=>(y||[]).map(n7e).filter(Boolean).sort((H,te)=>te.name.length-H.name.length),[y]),E=j.useMemo(()=>{if(!e&&!t)return null;const H=zw(e)||zw(t),te={};H&&(te.lat=H.lat,te.lon=H.lon);const G=e?.address||e?.location?.address||e?.coords?.address||e?.coordinates?.address;G&&(te.address=G);const P=e?.city||e?.location?.city||e?.coordinates?.city;P&&(te.city=P);const U=e?.state||e?.location?.state||e?.coordinates?.state;U&&(te.state=U);const X=e?.country||e?.location?.country||e?.coordinates?.country;X&&(te.country=X);const J=e?.postalCode||e?.location?.postalCode||e?.coordinates?.postalCode;J&&(te.postalCode=J);const ie=e?.displayName||t?.displayName||t?.email;return ie&&(te.displayName=ie),Object.keys(te).length?te:null},[e,t]),D=j.useMemo(()=>!Array.isArray(g)||g.length===0?[]:g.map(H=>{const te=zw(H),G=te&&E&&Tc(E?.lat)!==null&&Tc(E?.lon)!==null?c7e(te,E):null,P=G!==null&&Number.isFinite(G)?Number(G.toFixed(2)):null;return{...H,distanceKm:P}}),[g,E]),R=j.useMemo(()=>D.length?[...D].sort((H,te)=>{const G=typeof H.distanceKm=="number",P=typeof te.distanceKm=="number";return G&&P?H.distanceKm-te.distanceKm:G?-1:P?1:0}):[],[D]),F=j.useMemo(()=>R.length?R.slice(0,10).map(pj).filter(Boolean):[],[R]),V=j.useMemo(()=>R.length?R.slice(0,3).map(pj).filter(Boolean):[],[R]),Z=j.useMemo(()=>{if(!E)return null;const{lat:H,lon:te,address:G,city:P,state:U,country:X,postalCode:J}=E,ie={};return Tc(H)!==null&&(ie.lat=Number(H)),Tc(te)!==null&&(ie.lon=Number(te)),G&&(ie.address=G),P&&(ie.city=P),U&&(ie.state=U),X&&(ie.country=X),J&&(ie.postalCode=J),Object.keys(ie).length?ie:null},[E]);j.useEffect(()=>{if(!t?.uid)return;const H=_r(Zt(ht,"ai_conversations"),jr("userId","==",t.uid));return In(H,G=>{const P=[];G.forEach(U=>{const X=U.data();P.push({id:U.id,...X,timestamp:X.timestamp?.toDate()||new Date})}),P.sort((U,X)=>U.timestamp-X.timestamp),i(P)})},[t?.uid]),j.useEffect(()=>{W.current?.scrollIntoView({behavior:"smooth"})},[s]),j.useEffect(()=>{L.current?.focus()},[]),j.useEffect(()=>{(async()=>{try{const[te,G]=await Promise.all([HSe(20),WSe(50)]);m(te),w(G)}catch(te){console.error("Error loading app data for AI:",te)}})()},[]),j.useEffect(()=>{if(!t?.uid){S([]),I([]),K([]);return}let H=!0;return(async()=>{try{const[G,P,U]=await Promise.all([GSe(t.uid,{limitItems:25}),KSe(t.uid,{limitCount:10}),YSe(t.uid,{limitCount:15})]);if(!H)return;S(G),I(P),K(U)}catch(G){console.error("Error loading user data for AI context:",G)}})(),()=>{H=!1}},[t?.uid]);const fe=async H=>{try{await Qd(Zt(ht,"ai_conversations"),{...H,userId:t.uid,timestamp:_s()})}catch(te){console.error("Error saving message:",te)}},xe=async()=>{if(!a.trim()||l)return;const H=a.trim();o(""),c(!0),p(!0);const te={role:"user",content:H,timestamp:new Date};i(G=>[...G,te]);try{await fe(te);const G={userInfo:{role:e?.role,language:r("current_language","en"),platformName:"Pharmasea"},productInfo:y.slice(0,20),pharmacyInfo:F,nearestPharmacies:V,cartInfo:_,orderInfo:T,prescriptionInfo:M};(e?.displayName||t?.displayName)&&(G.userInfo.displayName=e?.displayName||t?.displayName),G.userInfo.cartItemCount=_.length,G.userInfo.orderCount=T.length,G.userInfo.prescriptionCount=M.length,Z&&(G.userInfo.location=Z,G.userLocation=Z);let P=await JSe(H,G);if(KW(P)){const X=r("pharmacy_verified_label","verified"),J=r("distance_nearby","nearby"),ie=r("distance_km_away","km away"),ve=r("nearby_pharmacies_heading","Nearby pharmacy options:"),oe=(V&&V.length>0?V:F.slice(0,3)).map(Ee=>{if(!Ee)return null;const Oe=Ee.name||r("pharmacy_generic_name","Pharmacy"),ne=Ee.url?`[${Oe}](${Ee.url})`:Oe,we=Tc(Ee.distanceKm),Re=we!==null?`${we.toFixed(1)} ${ie}`:J,pe=Ee.verified?` (${X})`:"",Ke=Ee.address?`  ${Ee.address}`:"";return` ${ne}${pe}  ${Re}${Ke}`}).filter(Boolean);oe.length>0&&(P+=`

${ve}
${oe.join(`
`)}`)}P=e7e(P,{nearestPharmacies:V});const U={role:"assistant",content:P,timestamp:new Date};i(X=>[...X,U]),await fe(U)}catch(G){console.error("Error getting AI response:",G);const P={role:"assistant",content:G.message.includes("API key")?"I'm not configured yet. Please ask your administrator to set up the OpenAI API key.":r("ai_error_message","Sorry, I'm having trouble connecting. Please try again later."),timestamp:new Date};i(U=>[...U,P])}finally{c(!1),p(!1)}},he=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),xe())},ae=async()=>{if(t?.uid)try{i([]),o(""),L.current?.focus()}catch(H){console.error("Error starting new chat:",H)}};return t?u.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[u.jsxs("div",{className:"bg-white border-b border-gray-100 px-4 py-4 flex items-center justify-between sticky top-0 z-10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>n(-1),className:"p-2 rounded-full hover:bg-gray-100 transition",children:u.jsx(du,{className:"w-5 h-5"})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-8 h-8 bg-sky-100 rounded-full flex items-center justify-center",children:u.jsx(nw,{className:"w-5 h-5 text-sky-600"})}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"font-semibold text-gray-900",children:"PharmAI"}),u.jsx(vie,{className:"w-4 h-4 text-sky-500","aria-hidden":"true"}),u.jsx("span",{className:"sr-only",children:r("verified_account","Verified account")})]}),u.jsx("div",{className:"text-xs text-gray-500",children:d?r("typing","Typing..."):r("online","Online")})]})]})]}),u.jsx("button",{onClick:ae,className:"text-xs text-gray-500 hover:text-gray-700 px-3 py-1 rounded-full border",children:r("new_chat","New Chat")})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-4 pb-32",style:{backgroundImage:`url(${t7e})`,backgroundSize:"contain",backgroundRepeat:"repeat",backgroundPosition:"center"},children:[s.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-sky-100 rounded-full flex items-center justify-center mb-4",children:u.jsx(nw,{className:"w-8 h-8 text-sky-600"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:r("welcome_to_pharmai","Welcome to PharmAI!")}),u.jsx("p",{className:"text-gray-600 max-w-sm",children:r("ai_assistant_description","I'm here to help with general health information, product questions, and pharmacy services. Remember, I'm not a substitute for professional medical advice.")})]}):u.jsxs("div",{className:"space-y-4",children:[s.map((H,te)=>u.jsx("div",{className:`flex ${H.role==="user"?"justify-end":"justify-start"} ${te===s.length-1?"pb-6":""}`,children:u.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-3 ${H.role==="user"?"bg-sky-500 text-white":"bg-white border border-gray-200 text-gray-900"}`,children:[u.jsxs("div",{className:"flex items-start gap-2",children:[H.role==="assistant"&&u.jsx(nw,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),H.role==="user"&&u.jsx(Rie,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),u.jsx("div",{className:"flex-1 whitespace-pre-wrap text-sm break-words overflow-hidden",children:u7e(H.content,n,A)})]}),u.jsx("div",{className:`text-xs mt-1 ${H.role==="user"?"text-sky-100":"text-gray-500"}`,children:H.timestamp?.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},H.id||te)),d&&u.jsx("div",{className:"flex justify-start",children:u.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl px-4 py-3 max-w-[80%]",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(nw,{className:"w-4 h-4"}),u.jsxs("div",{className:"flex space-x-1",children:[u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})})]}),u.jsx("div",{ref:W})]}),u.jsxs("div",{className:"fixed bottom-0 left-0 right-0 border-t border-gray-100 bg-white px-4 py-3 z-20",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"flex-1 relative",children:u.jsx("textarea",{ref:L,value:a,onChange:H=>o(H.target.value),onKeyPress:he,placeholder:r("type_message","Type your message..."),className:"w-full border border-gray-300 rounded-full px-4 py-3 pr-12 resize-none focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500",rows:1,style:{minHeight:"44px",maxHeight:"120px"},disabled:l})}),u.jsx("button",{onClick:xe,disabled:!a.trim()||l,className:"w-11 h-11 bg-sky-500 hover:bg-sky-600 disabled:bg-gray-300 rounded-full flex items-center justify-center transition",children:u.jsx(Nie,{className:"w-5 h-5 text-white"})})]}),u.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center",children:r("ai_disclaimer"," PharmAI provides general information only. Not medical advice. Consult professionals for health concerns.")})]})]}):u.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[u.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:r("please_sign_in_continue","Please sign in to continue")}),u.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>n("/auth/landing"),children:r("sign_in_sign_up","Sign In / Sign Up")})]})}function h7e(){const t=Nl(),e=Jn(),{user:r,profile:n,loading:s}=Dn(),{getSetting:i}=ny(),[a,o]=j.useState(t.pathname),[l,c]=j.useState(0),[d,p]=j.useState(0),[g,m]=j.useState(0),{newOrder:y,showNotification:w,clearNotification:_}=S4e();j.useEffect(()=>o(t.pathname),[t.pathname]),j.useEffect(()=>{if(!r||s||n&&n.role==="pharmacy")return c(0);const E=_r(Zt(ht,"users",r.uid,"cart"));return In(E,R=>c(R.size))},[r,n,s]),j.useEffect(()=>{if(!r||s||!n||n.role!=="pharmacy")return m(0);const E=n.uid||r.uid,D=_r(Zt(ht,"orders"),jr("pharmacyId","==",E));return In(D,F=>{const V=F.docs.filter(Z=>{const xe=Z.data().status?.toLowerCase()||"pending";return!["processing","shipped","fulfilled","cancelled"].includes(xe)});m(V.length)})},[r,n]),j.useEffect(()=>{if(!r||s||!n?.role)return p(0);const E=j_({uid:r.uid,role:n.role},D=>{try{const R=D.reduce((F,V)=>{const Z=V?.unread?.[r.uid];return F+(typeof Z=="number"?Z:0)},0);p(R),console.debug("[AppLayout] unread total from listenUserThreads",{sum:R,count:D.length})}catch(R){console.error("[AppLayout] error computing unread from threads",R)}},D=>console.error("[AppLayout] listenUserThreads error",D));return()=>E&&E()},[r,n?.role,s]);const T=!!new URLSearchParams(t.search).get("chat"),I=typeof window<"u"&&new URLSearchParams(window.location.search).get("debugBottomNav")==="1";j.useEffect(()=>{I&&console.debug("[AppLayout] render",{chatModalOpen:T,unreadMessages:d,tab:a,cartCount:l})},[I,T,d,a,l]);const M=E=>{e("/orders")},K=typeof window<"u"&&window.matchMedia&&window.matchMedia("(max-width: 1024px)").matches,W=i(Fr.SWIPE_NAVIGATION),L=K&&W,A=s||r&&n===void 0;return u.jsxs("div",{className:`min-h-screen bg-white w-full flex flex-col items-center px-2 md:px-8 lg:px-16 xl:px-32 ${T?"":"pb-24"}`,children:[u.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto flex-1 flex flex-col",children:L?u.jsx(Bye,{}):u.jsx(v8,{})}),!T&&!A&&u.jsxs(u.Fragment,{children:[u.jsx(Gye,{tab:a,setTab:E=>e(E),cartCount:l,unreadMessages:d,ordersCount:g}),u.jsx(P4e,{})]}),I&&u.jsxs("div",{className:"fixed bottom-24 right-4 z-60 bg-black/80 text-white text-xs px-3 py-1 rounded",children:["AppDebug: chatModalOpen=",String(T)," unread=",String(d)]}),u.jsx(k4e,{order:y,isOpen:w,onClose:_,onViewOrder:M})]})}function n6(){return u.jsx("div",{className:"min-h-screen bg-white w-full flex flex-col items-center px-2 md:px-8 lg:px-16 xl:px-32",children:u.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto flex-1 flex flex-col",children:u.jsx(v8,{})})})}function f7e(){const{id:t}=a_(),[e,r]=j.useState(null),[n,s]=j.useState(null);return j.useEffect(()=>{async function i(){const o=(await ni(er(ht,"products",t))).data();if(r(o?{id:t,...o}:null),o?.pharmacyId){const l=await ni(er(ht,"pharmacies",o.pharmacyId));s(l.data())}}i()},[t]),e?u.jsx(Kye,{product:e,pharmacy:n}):null}function p7e(){const{profile:t}=Dn();return t?t.role==="pharmacy"?u.jsx(Iz,{onSwitchToCustomer:()=>{}}):u.jsx(hB,{onSwitchToPharmacy:()=>{}}):null}function m7e(){const{user:t,profile:e,loading:r}=Dn();return r?u.jsx(T4e,{}):t?e?.role==="pharmacy"?u.jsx(Pz,{}):e?.role==="customer"?u.jsx(H6,{}):e?.role==="superuser"?u.jsx(_0,{to:"/superuser",replace:!0}):u.jsx(H6,{}):u.jsx(_0,{to:"/auth/onboarding",replace:!0})}function g7e(){const{user:t,profile:e}=Dn(),r=Nl(),n=new URLSearchParams(r.search);return n.get("scrollTo")&&parseInt(n.get("scrollTo"),10),t&&e===void 0?u.jsx(cp,{lines:4,className:"my-8"}):t&&!t.emailVerified?u.jsxs(_C,{children:[u.jsx(Qn,{path:"/verify-email",element:u.jsx(j8e,{})}),u.jsx(Qn,{path:"*",element:u.jsx(_0,{to:"/verify-email",replace:!0})})]}):e&&e.role==="superuser"&&r.pathname==="/"?u.jsx(_0,{to:"/superuser",replace:!0}):u.jsxs(_C,{children:[u.jsxs(Qn,{element:u.jsx(n6,{}),children:[u.jsx(Qn,{path:"/auth/onboarding",element:u.jsx(A8e,{})}),u.jsx(Qn,{path:"/auth/landing",element:u.jsx(p8e,{})}),u.jsx(Qn,{path:"/auth/customer/register",element:u.jsx(T8e,{})}),u.jsx(Qn,{path:"/auth/customer/signin",element:u.jsx(I8e,{})}),u.jsx(Qn,{path:"/auth/pharmacy/register",element:u.jsx(P8e,{})}),u.jsx(Qn,{path:"/auth/pharmacy/signin",element:u.jsx(L8e,{})}),u.jsx(Qn,{path:"/auth/forgot-password",element:u.jsx(F8e,{})}),u.jsx(Qn,{path:"/auth",element:u.jsx(_0,{to:"/auth/onboarding",replace:!0})}),u.jsx(Qn,{path:"/chat/:vendorId",element:u.jsx(ru,{children:u.jsx(lR,{})})}),u.jsx(Qn,{path:"/thread/:threadId",element:u.jsx(ru,{children:u.jsx(lR,{})})}),u.jsx(Qn,{path:"/ai-chat",element:u.jsx(ru,{children:u.jsx(d7e,{})})})]}),u.jsx(Qn,{element:u.jsx(n6,{}),children:u.jsx(Qn,{path:"/superuser",element:u.jsx(ru,{children:u.jsx(A4e,{})})})}),u.jsxs(Qn,{element:u.jsx(h7e,{}),children:[u.jsx(Qn,{path:"/",element:u.jsx(m7e,{})}),u.jsx(Qn,{path:"/vendor/:id",element:u.jsx(O8e,{})}),u.jsx(Qn,{path:"/product/:id",element:u.jsx(f7e,{})}),u.jsx(Qn,{path:"/pharmacy-map",element:u.jsx(ru,{children:u.jsx(N4e,{})})}),u.jsx(Qn,{path:"/add-product",element:u.jsx(ru,{children:u.jsx(D8e,{})})}),u.jsx(Qn,{path:"/messages",element:u.jsx(ru,{children:u.jsx(lB,{})})}),u.jsx(Qn,{path:"/cart",element:u.jsx(ru,{children:e&&e.role==="pharmacy"?u.jsx(_0,{to:"/"}):u.jsx(cB,{})})}),u.jsx(Qn,{path:"/orders",element:u.jsx(ru,{children:u.jsx(oB,{})})}),u.jsx(Qn,{path:"/profile",element:u.jsx(ru,{children:u.jsx(p7e,{})})}),u.jsx(Qn,{path:"/settings",element:u.jsx(ru,{children:u.jsx(w4e,{})})})]}),u.jsx(Qn,{element:u.jsx(n6,{}),children:u.jsx(Qn,{path:"/product-preview/:id",element:u.jsx(M8e,{})})}),u.jsx(Qn,{path:"*",element:u.jsx(_0,{to:"/",replace:!0})})]})}function x7e(){return Vye(),u.jsxs(lie,{children:[u.jsx(b4e,{}),u.jsx(g7e,{}),u.jsx(j$,{})]})}FG.createRoot(document.getElementById("root")).render(u.jsx(FK,{children:u.jsx(Fie,{children:u.jsx(Oie,{children:u.jsx(x7e,{})})})}));export{kie as G,M_ as M,hs as _,y7e as a,tn as c,mj as g,u as j,j as r};
