import{r as l,j as e,M as R}from"./index-Do_3GAo6.js";function I({open:y,onClose:g,products:m,onSubmit:f}){const[u,i]=l.useState([]),[b,v]=l.useState(()=>new Date().toISOString().slice(0,10)),[p,k]=l.useState(7),[x,j]=l.useState(""),[h,N]=l.useState(!1),D=()=>i([...u,{productId:"",name:"",quantity:1,dosage:"",frequency:"",duration:"",notes:"",times:[""]}]),o=(a,r,t)=>{i(s=>s.map((n,c)=>c===a?{...n,[r]:t}:n))},q=(a,r,t)=>{i(s=>s.map((n,c)=>c===a?{...n,times:n.times.map((d,T)=>T===r?t:d)}:n))},C=a=>{i(r=>r.map((t,s)=>s===a?{...t,times:[...t.times||[],""]}:t))},w=(a,r)=>{i(t=>t.map((s,n)=>n===a?{...s,times:s.times.filter((c,d)=>d!==r)}:s))},S=a=>i(r=>r.filter((t,s)=>s!==a)),P=a=>{if(a.preventDefault(),!u.length)return alert("Add at least one drug");f({drugs:u,startDate:b,duration:p,notes:x,requirePurchase:h})};return e.jsx(R,{open:y,onClose:g,children:e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsx("div",{className:"text-lg font-light mb-2 animate-text-reveal",children:"Create Prescription"}),e.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.1s"},children:[e.jsx("button",{type:"button",onClick:D,className:"mb-2 px-3 py-1 rounded-full text-[12px] bg-sky-600 text-white btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200",children:"+ Add Drug"}),u.map((a,r)=>e.jsxs("div",{className:"mb-2 p-2 border rounded-lg bg-zinc-50 card-interactive hover:shadow-md transition-all duration-200 animate-fadeInUp",style:{animationDelay:`${.1*r}s`},children:[e.jsxs("select",{className:"mb-1 w-full border-b p-1 text-[12px] focus:border-sky-500 dark:border-gray-600 transition-colors duration-200",value:a.productId,onChange:t=>{const s=m.find(n=>n.id===t.target.value);o(r,"productId",s?.id||""),o(r,"name",s?.name||"")},required:!0,children:[e.jsx("option",{value:"",children:"Select drug"}),m.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("input",{type:"number",min:"1",className:"mb-1 w-full border-b p-1 text-[12px] focus:border-sky-500 dark:border-gray-600 transition-colors duration-200",placeholder:"Quantity",value:a.quantity,onChange:t=>o(r,"quantity",t.target.value),required:!0}),e.jsx("input",{className:"mb-1 w-full border-b p-1 text-[12px] focus:border-sky-500 dark:border-gray-600 transition-colors duration-200",placeholder:"Dosage (e.g. 1 tablet)",value:a.dosage,onChange:t=>o(r,"dosage",t.target.value),required:!0}),e.jsx("input",{className:"mb-1 w-full border-b p-1 text-[12px] focus:border-sky-500 dark:border-gray-600 transition-colors duration-200",placeholder:"Frequency (e.g. 2x/day)",value:a.frequency,onChange:t=>o(r,"frequency",t.target.value),required:!0}),e.jsx("input",{type:"number",min:"1",className:"mb-1 w-full border-b p-1 text-[12px] focus:border-sky-500 dark:border-gray-600 transition-colors duration-200",placeholder:"Duration (days)",value:a.duration,onChange:t=>o(r,"duration",t.target.value),required:!0}),e.jsx("input",{className:"mb-1 w-full border-b p-1 text-[12px] focus:border-sky-500 dark:border-gray-600 transition-colors duration-200",placeholder:"Notes (optional)",value:a.notes,onChange:t=>o(r,"notes",t.target.value)}),e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{className:"block text-xs font-light mb-1",children:"Time(s) for this dosage (optional)"}),(a.times||[]).map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2 mb-1 animate-fade-in",children:[e.jsx("input",{type:"time",className:"border-b p-1 text-[12px] focus:border-sky-500 dark:border-gray-600 transition-colors duration-200",value:t,onChange:n=>q(r,s,n.target.value)}),e.jsx("button",{type:"button",className:"text-xs text-red-500 hover:text-red-600 transition-colors duration-200 hover:scale-110",onClick:()=>w(r,s),children:"Remove"})]},s)),e.jsx("button",{type:"button",className:"text-xs text-sky-600 underline hover:text-sky-700 transition-colors duration-200",onClick:()=>C(r),children:"+ Add Time"})]}),e.jsx("button",{type:"button",onClick:()=>S(r),className:"text-xs text-red-500 hover:text-red-600 transition-colors duration-200 hover:scale-110",children:"Remove"})]},r))]}),e.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.2s"},children:[e.jsx("label",{className:"block text-sm mb-1 font-light",children:"Start Date"}),e.jsx("input",{type:"date",className:"border-b p-1 w-full text-[12px] focus:border-sky-500 dark:border-gray-600 transition-colors duration-200",value:b,onChange:a=>v(a.target.value),required:!0})]}),e.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.3s"},children:[e.jsx("label",{className:"block text-sm mb-1 font-light",children:"Total Duration (days)"}),e.jsx("input",{type:"number",min:"1",className:"border-b p-1 w-full text-[12px] focus:border-sky-500 dark:border-gray-600 transition-colors duration-200",value:p,onChange:a=>k(a.target.value),required:!0})]}),e.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.4s"},children:[e.jsx("label",{className:"block text-sm mb-1 font-light",children:"Notes"}),e.jsx("textarea",{className:"border rounded p-1 w-full text-[12px] focus:border-sky-500 dark:border-gray-600 transition-colors duration-200",value:x,onChange:a=>j(a.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2 animate-fade-in",style:{animationDelay:"0.5s"},children:[e.jsx("input",{type:"checkbox",id:"requirePurchase",checked:h,onChange:a=>N(a.target.checked),className:"transition-transform duration-200 hover:scale-110"}),e.jsx("label",{htmlFor:"requirePurchase",className:"text-xs font-light",children:"Require customer to purchase before prescription starts"})]}),e.jsx("button",{type:"submit",className:"w-full rounded-full bg-sky-600 text-white py-2 font-light text-[12px] btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200 animate-fade-in-up",style:{animationDelay:"0.6s"},children:"Create Prescription"})]})})}export{I as default};
