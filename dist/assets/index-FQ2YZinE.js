function RL(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var bhe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function s8(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cw={exports:{}},L1={},uw={exports:{}},Zr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IE;function FL(){if(IE)return Zr;IE=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;function m(ee){return ee===null||typeof ee!="object"?null:(ee=d&&ee[d]||ee["@@iterator"],typeof ee=="function"?ee:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,w={};function b(ee,C,U){this.props=ee,this.context=C,this.refs=w,this.updater=U||p}b.prototype.isReactComponent={},b.prototype.setState=function(ee,C){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,C,"setState")},b.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function k(){}k.prototype=b.prototype;function F(ee,C,U){this.props=ee,this.context=C,this.refs=w,this.updater=U||p}var N=F.prototype=new k;N.constructor=F,_(N,b.prototype),N.isPureReactComponent=!0;var B=Array.isArray,X=Object.prototype.hasOwnProperty,G={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function A(ee,C,U){var W,Y={},ae=null,pe=null;if(C!=null)for(W in C.ref!==void 0&&(pe=C.ref),C.key!==void 0&&(ae=""+C.key),C)X.call(C,W)&&!P.hasOwnProperty(W)&&(Y[W]=C[W]);var he=arguments.length-2;if(he===1)Y.children=U;else if(1<he){for(var xe=Array(he),Ee=0;Ee<he;Ee++)xe[Ee]=arguments[Ee+2];Y.children=xe}if(ee&&ee.defaultProps)for(W in he=ee.defaultProps,he)Y[W]===void 0&&(Y[W]=he[W]);return{$$typeof:t,type:ee,key:ae,ref:pe,props:Y,_owner:G.current}}function T(ee,C){return{$$typeof:t,type:ee.type,key:C,ref:ee.ref,props:ee.props,_owner:ee._owner}}function O(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===t}function I(ee){var C={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(U){return C[U]})}var D=/\/+/g;function M(ee,C){return typeof ee=="object"&&ee!==null&&ee.key!=null?I(""+ee.key):C.toString(36)}function ie(ee,C,U,W,Y){var ae=typeof ee;(ae==="undefined"||ae==="boolean")&&(ee=null);var pe=!1;if(ee===null)pe=!0;else switch(ae){case"string":case"number":pe=!0;break;case"object":switch(ee.$$typeof){case t:case e:pe=!0}}if(pe)return pe=ee,Y=Y(pe),ee=W===""?"."+M(pe,0):W,B(Y)?(U="",ee!=null&&(U=ee.replace(D,"$&/")+"/"),ie(Y,C,U,"",function(Ee){return Ee})):Y!=null&&(O(Y)&&(Y=T(Y,U+(!Y.key||pe&&pe.key===Y.key?"":(""+Y.key).replace(D,"$&/")+"/")+ee)),C.push(Y)),1;if(pe=0,W=W===""?".":W+":",B(ee))for(var he=0;he<ee.length;he++){ae=ee[he];var xe=W+M(ae,he);pe+=ie(ae,C,U,xe,Y)}else if(xe=m(ee),typeof xe=="function")for(ee=xe.call(ee),he=0;!(ae=ee.next()).done;)ae=ae.value,xe=W+M(ae,he++),pe+=ie(ae,C,U,xe,Y);else if(ae==="object")throw C=String(ee),Error("Objects are not valid as a React child (found: "+(C==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.");return pe}function be(ee,C,U){if(ee==null)return ee;var W=[],Y=0;return ie(ee,W,"","",function(ae){return C.call(U,ae,Y++)}),W}function Ne(ee){if(ee._status===-1){var C=ee._result;C=C(),C.then(function(U){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=U)},function(U){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=U)}),ee._status===-1&&(ee._status=0,ee._result=C)}if(ee._status===1)return ee._result.default;throw ee._result}var we={current:null},le={transition:null},J={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:le,ReactCurrentOwner:G};function ue(){throw Error("act(...) is not supported in production builds of React.")}return Zr.Children={map:be,forEach:function(ee,C,U){be(ee,function(){C.apply(this,arguments)},U)},count:function(ee){var C=0;return be(ee,function(){C++}),C},toArray:function(ee){return be(ee,function(C){return C})||[]},only:function(ee){if(!O(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},Zr.Component=b,Zr.Fragment=r,Zr.Profiler=i,Zr.PureComponent=F,Zr.StrictMode=n,Zr.Suspense=l,Zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,Zr.act=ue,Zr.cloneElement=function(ee,C,U){if(ee==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ee+".");var W=_({},ee.props),Y=ee.key,ae=ee.ref,pe=ee._owner;if(C!=null){if(C.ref!==void 0&&(ae=C.ref,pe=G.current),C.key!==void 0&&(Y=""+C.key),ee.type&&ee.type.defaultProps)var he=ee.type.defaultProps;for(xe in C)X.call(C,xe)&&!P.hasOwnProperty(xe)&&(W[xe]=C[xe]===void 0&&he!==void 0?he[xe]:C[xe])}var xe=arguments.length-2;if(xe===1)W.children=U;else if(1<xe){he=Array(xe);for(var Ee=0;Ee<xe;Ee++)he[Ee]=arguments[Ee+2];W.children=he}return{$$typeof:t,type:ee.type,key:Y,ref:ae,props:W,_owner:pe}},Zr.createContext=function(ee){return ee={$$typeof:a,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ee.Provider={$$typeof:s,_context:ee},ee.Consumer=ee},Zr.createElement=A,Zr.createFactory=function(ee){var C=A.bind(null,ee);return C.type=ee,C},Zr.createRef=function(){return{current:null}},Zr.forwardRef=function(ee){return{$$typeof:o,render:ee}},Zr.isValidElement=O,Zr.lazy=function(ee){return{$$typeof:f,_payload:{_status:-1,_result:ee},_init:Ne}},Zr.memo=function(ee,C){return{$$typeof:c,type:ee,compare:C===void 0?null:C}},Zr.startTransition=function(ee){var C=le.transition;le.transition={};try{ee()}finally{le.transition=C}},Zr.unstable_act=ue,Zr.useCallback=function(ee,C){return we.current.useCallback(ee,C)},Zr.useContext=function(ee){return we.current.useContext(ee)},Zr.useDebugValue=function(){},Zr.useDeferredValue=function(ee){return we.current.useDeferredValue(ee)},Zr.useEffect=function(ee,C){return we.current.useEffect(ee,C)},Zr.useId=function(){return we.current.useId()},Zr.useImperativeHandle=function(ee,C,U){return we.current.useImperativeHandle(ee,C,U)},Zr.useInsertionEffect=function(ee,C){return we.current.useInsertionEffect(ee,C)},Zr.useLayoutEffect=function(ee,C){return we.current.useLayoutEffect(ee,C)},Zr.useMemo=function(ee,C){return we.current.useMemo(ee,C)},Zr.useReducer=function(ee,C,U){return we.current.useReducer(ee,C,U)},Zr.useRef=function(ee){return we.current.useRef(ee)},Zr.useState=function(ee){return we.current.useState(ee)},Zr.useSyncExternalStore=function(ee,C,U){return we.current.useSyncExternalStore(ee,C,U)},Zr.useTransition=function(){return we.current.useTransition()},Zr.version="18.3.1",Zr}var NE;function Sv(){return NE||(NE=1,uw.exports=FL()),uw.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE;function LL(){if(PE)return L1;PE=1;var t=Sv(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,c){var f,d={},m=null,p=null;c!==void 0&&(m=""+c),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(p=l.ref);for(f in l)n.call(l,f)&&!s.hasOwnProperty(f)&&(d[f]=l[f]);if(o&&o.defaultProps)for(f in l=o.defaultProps,l)d[f]===void 0&&(d[f]=l[f]);return{$$typeof:e,type:o,key:m,ref:p,props:d,_owner:i.current}}return L1.Fragment=r,L1.jsx=a,L1.jsxs=a,L1}var RE;function DL(){return RE||(RE=1,cw.exports=LL()),cw.exports}var x=DL(),H=Sv();const aa=s8(H),A2=RL({__proto__:null,default:aa},[H]);var bx={},fw={exports:{}},Po={},hw={exports:{}},dw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE;function OL(){return FE||(FE=1,(function(t){function e(le,J){var ue=le.length;le.push(J);e:for(;0<ue;){var ee=ue-1>>>1,C=le[ee];if(0<i(C,J))le[ee]=J,le[ue]=C,ue=ee;else break e}}function r(le){return le.length===0?null:le[0]}function n(le){if(le.length===0)return null;var J=le[0],ue=le.pop();if(ue!==J){le[0]=ue;e:for(var ee=0,C=le.length,U=C>>>1;ee<U;){var W=2*(ee+1)-1,Y=le[W],ae=W+1,pe=le[ae];if(0>i(Y,ue))ae<C&&0>i(pe,Y)?(le[ee]=pe,le[ae]=ue,ee=ae):(le[ee]=Y,le[W]=ue,ee=W);else if(ae<C&&0>i(pe,ue))le[ee]=pe,le[ae]=ue,ee=ae;else break e}}return J}function i(le,J){var ue=le.sortIndex-J.sortIndex;return ue!==0?ue:le.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],f=1,d=null,m=3,p=!1,_=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(le){for(var J=r(c);J!==null;){if(J.callback===null)n(c);else if(J.startTime<=le)n(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=r(c)}}function B(le){if(w=!1,N(le),!_)if(r(l)!==null)_=!0,Ne(X);else{var J=r(c);J!==null&&we(B,J.startTime-le)}}function X(le,J){_=!1,w&&(w=!1,k(A),A=-1),p=!0;var ue=m;try{for(N(J),d=r(l);d!==null&&(!(d.expirationTime>J)||le&&!I());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,m=d.priorityLevel;var C=ee(d.expirationTime<=J);J=t.unstable_now(),typeof C=="function"?d.callback=C:d===r(l)&&n(l),N(J)}else n(l);d=r(l)}if(d!==null)var U=!0;else{var W=r(c);W!==null&&we(B,W.startTime-J),U=!1}return U}finally{d=null,m=ue,p=!1}}var G=!1,P=null,A=-1,T=5,O=-1;function I(){return!(t.unstable_now()-O<T)}function D(){if(P!==null){var le=t.unstable_now();O=le;var J=!0;try{J=P(!0,le)}finally{J?M():(G=!1,P=null)}}else G=!1}var M;if(typeof F=="function")M=function(){F(D)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,be=ie.port2;ie.port1.onmessage=D,M=function(){be.postMessage(null)}}else M=function(){b(D,0)};function Ne(le){P=le,G||(G=!0,M())}function we(le,J){A=b(function(){le(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(le){le.callback=null},t.unstable_continueExecution=function(){_||p||(_=!0,Ne(X))},t.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<le?Math.floor(1e3/le):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(le){switch(m){case 1:case 2:case 3:var J=3;break;default:J=m}var ue=m;m=J;try{return le()}finally{m=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(le,J){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var ue=m;m=le;try{return J()}finally{m=ue}},t.unstable_scheduleCallback=function(le,J,ue){var ee=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ee+ue:ee):ue=ee,le){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=ue+C,le={id:f++,callback:J,priorityLevel:le,startTime:ue,expirationTime:C,sortIndex:-1},ue>ee?(le.sortIndex=ue,e(c,le),r(l)===null&&le===r(c)&&(w?(k(A),A=-1):w=!0,we(B,ue-ee))):(le.sortIndex=C,e(l,le),_||p||(_=!0,Ne(X))),le},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(le){var J=m;return function(){var ue=m;m=J;try{return le.apply(this,arguments)}finally{m=ue}}}})(dw)),dw}var LE;function ML(){return LE||(LE=1,hw.exports=OL()),hw.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE;function jL(){if(DE)return Po;DE=1;var t=Sv(),e=ML();function r(u){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+u,g=1;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(u,h){a(u,h),a(u+"Capture",h)}function a(u,h){for(i[u]=h,u=0;u<h.length;u++)n.add(h[u])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},d={};function m(u){return l.call(d,u)?!0:l.call(f,u)?!1:c.test(u)?d[u]=!0:(f[u]=!0,!1)}function p(u,h,g,E){if(g!==null&&g.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return E?!1:g!==null?!g.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function _(u,h,g,E){if(h===null||typeof h>"u"||p(u,h,g,E))return!0;if(E)return!1;if(g!==null)switch(g.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function w(u,h,g,E,R,z,ne){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=E,this.attributeNamespace=R,this.mustUseProperty=g,this.propertyName=u,this.type=h,this.sanitizeURL=z,this.removeEmptyString=ne}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){b[u]=new w(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var h=u[0];b[h]=new w(h,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){b[u]=new w(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){b[u]=new w(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){b[u]=new w(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){b[u]=new w(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){b[u]=new w(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){b[u]=new w(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){b[u]=new w(u,5,!1,u.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function F(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var h=u.replace(k,F);b[h]=new w(h,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var h=u.replace(k,F);b[h]=new w(h,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var h=u.replace(k,F);b[h]=new w(h,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){b[u]=new w(u,1,!1,u.toLowerCase(),null,!1,!1)}),b.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){b[u]=new w(u,1,!1,u.toLowerCase(),null,!0,!0)});function N(u,h,g,E){var R=b.hasOwnProperty(h)?b[h]:null;(R!==null?R.type!==0:E||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(_(h,g,R,E)&&(g=null),E||R===null?m(h)&&(g===null?u.removeAttribute(h):u.setAttribute(h,""+g)):R.mustUseProperty?u[R.propertyName]=g===null?R.type===3?!1:"":g:(h=R.attributeName,E=R.attributeNamespace,g===null?u.removeAttribute(h):(R=R.type,g=R===3||R===4&&g===!0?"":""+g,E?u.setAttributeNS(E,h,g):u.setAttribute(h,g))))}var B=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),G=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),I=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),le=Symbol.iterator;function J(u){return u===null||typeof u!="object"?null:(u=le&&u[le]||u["@@iterator"],typeof u=="function"?u:null)}var ue=Object.assign,ee;function C(u){if(ee===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);ee=h&&h[1]||""}return`
`+ee+u}var U=!1;function W(u,h){if(!u||U)return"";U=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(rt){var E=rt}Reflect.construct(u,[],h)}else{try{h.call()}catch(rt){E=rt}u.call(h.prototype)}else{try{throw Error()}catch(rt){E=rt}u()}}catch(rt){if(rt&&E&&typeof rt.stack=="string"){for(var R=rt.stack.split(`
`),z=E.stack.split(`
`),ne=R.length-1,Pe=z.length-1;1<=ne&&0<=Pe&&R[ne]!==z[Pe];)Pe--;for(;1<=ne&&0<=Pe;ne--,Pe--)if(R[ne]!==z[Pe]){if(ne!==1||Pe!==1)do if(ne--,Pe--,0>Pe||R[ne]!==z[Pe]){var Oe=`
`+R[ne].replace(" at new "," at ");return u.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",u.displayName)),Oe}while(1<=ne&&0<=Pe);break}}}finally{U=!1,Error.prepareStackTrace=g}return(u=u?u.displayName||u.name:"")?C(u):""}function Y(u){switch(u.tag){case 5:return C(u.type);case 16:return C("Lazy");case 13:return C("Suspense");case 19:return C("SuspenseList");case 0:case 2:case 15:return u=W(u.type,!1),u;case 11:return u=W(u.type.render,!1),u;case 1:return u=W(u.type,!0),u;default:return""}}function ae(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case P:return"Fragment";case G:return"Portal";case T:return"Profiler";case A:return"StrictMode";case M:return"Suspense";case ie:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case I:return(u.displayName||"Context")+".Consumer";case O:return(u._context.displayName||"Context")+".Provider";case D:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case be:return h=u.displayName||null,h!==null?h:ae(u.type)||"Memo";case Ne:h=u._payload,u=u._init;try{return ae(u(h))}catch{}}return null}function pe(u){var h=u.type;switch(u.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=h.render,u=u.displayName||u.name||"",h.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(h);case 8:return h===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function he(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function xe(u){var h=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Ee(u){var h=xe(u)?"checked":"value",g=Object.getOwnPropertyDescriptor(u.constructor.prototype,h),E=""+u[h];if(!u.hasOwnProperty(h)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var R=g.get,z=g.set;return Object.defineProperty(u,h,{configurable:!0,get:function(){return R.call(this)},set:function(ne){E=""+ne,z.call(this,ne)}}),Object.defineProperty(u,h,{enumerable:g.enumerable}),{getValue:function(){return E},setValue:function(ne){E=""+ne},stopTracking:function(){u._valueTracker=null,delete u[h]}}}}function Fe(u){u._valueTracker||(u._valueTracker=Ee(u))}function oe(u){if(!u)return!1;var h=u._valueTracker;if(!h)return!0;var g=h.getValue(),E="";return u&&(E=xe(u)?u.checked?"true":"false":u.value),u=E,u!==g?(h.setValue(u),!0):!1}function Je(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function Re(u,h){var g=h.checked;return ue({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??u._wrapperState.initialChecked})}function fe(u,h){var g=h.defaultValue==null?"":h.defaultValue,E=h.checked!=null?h.checked:h.defaultChecked;g=he(h.value!=null?h.value:g),u._wrapperState={initialChecked:E,initialValue:g,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function ot(u,h){h=h.checked,h!=null&&N(u,"checked",h,!1)}function et(u,h){ot(u,h);var g=he(h.value),E=h.type;if(g!=null)E==="number"?(g===0&&u.value===""||u.value!=g)&&(u.value=""+g):u.value!==""+g&&(u.value=""+g);else if(E==="submit"||E==="reset"){u.removeAttribute("value");return}h.hasOwnProperty("value")?K(u,h.type,g):h.hasOwnProperty("defaultValue")&&K(u,h.type,he(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(u.defaultChecked=!!h.defaultChecked)}function st(u,h,g){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var E=h.type;if(!(E!=="submit"&&E!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+u._wrapperState.initialValue,g||h===u.value||(u.value=h),u.defaultValue=h}g=u.name,g!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,g!==""&&(u.name=g)}function K(u,h,g){(h!=="number"||Je(u.ownerDocument)!==u)&&(g==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+g&&(u.defaultValue=""+g))}var Te=Array.isArray;function Ue(u,h,g,E){if(u=u.options,h){h={};for(var R=0;R<g.length;R++)h["$"+g[R]]=!0;for(g=0;g<u.length;g++)R=h.hasOwnProperty("$"+u[g].value),u[g].selected!==R&&(u[g].selected=R),R&&E&&(u[g].defaultSelected=!0)}else{for(g=""+he(g),h=null,R=0;R<u.length;R++){if(u[R].value===g){u[R].selected=!0,E&&(u[R].defaultSelected=!0);return}h!==null||u[R].disabled||(h=u[R])}h!==null&&(h.selected=!0)}}function ut(u,h){if(h.dangerouslySetInnerHTML!=null)throw Error(r(91));return ue({},h,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function pt(u,h){var g=h.value;if(g==null){if(g=h.children,h=h.defaultValue,g!=null){if(h!=null)throw Error(r(92));if(Te(g)){if(1<g.length)throw Error(r(93));g=g[0]}h=g}h==null&&(h=""),g=h}u._wrapperState={initialValue:he(g)}}function xt(u,h){var g=he(h.value),E=he(h.defaultValue);g!=null&&(g=""+g,g!==u.value&&(u.value=g),h.defaultValue==null&&u.defaultValue!==g&&(u.defaultValue=g)),E!=null&&(u.defaultValue=""+E)}function yt(u){var h=u.textContent;h===u._wrapperState.initialValue&&h!==""&&h!==null&&(u.value=h)}function ht(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mt(u,h){return u==null||u==="http://www.w3.org/1999/xhtml"?ht(h):u==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var Lt,Ot=(function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,g,E,R){MSApp.execUnsafeLocalFunction(function(){return u(h,g,E,R)})}:u})(function(u,h){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=h;else{for(Lt=Lt||document.createElement("div"),Lt.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=Lt.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;h.firstChild;)u.appendChild(h.firstChild)}});function wt(u,h){if(h){var g=u.firstChild;if(g&&g===u.lastChild&&g.nodeType===3){g.nodeValue=h;return}}u.textContent=h}var Nt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cr=["Webkit","ms","Moz","O"];Object.keys(Nt).forEach(function(u){cr.forEach(function(h){h=h+u.charAt(0).toUpperCase()+u.substring(1),Nt[h]=Nt[u]})});function er(u,h,g){return h==null||typeof h=="boolean"||h===""?"":g||typeof h!="number"||h===0||Nt.hasOwnProperty(u)&&Nt[u]?(""+h).trim():h+"px"}function qt(u,h){u=u.style;for(var g in h)if(h.hasOwnProperty(g)){var E=g.indexOf("--")===0,R=er(g,h[g],E);g==="float"&&(g="cssFloat"),E?u.setProperty(g,R):u[g]=R}}var wr=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rn(u,h){if(h){if(wr[u]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(r(137,u));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(r(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(r(61))}if(h.style!=null&&typeof h.style!="object")throw Error(r(62))}}function Me(u,h){if(u.indexOf("-")===-1)return typeof h.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jt=null;function Vt(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var tr=null,sr=null,ur=null;function Yt(u){if(u=mf(u)){if(typeof tr!="function")throw Error(r(280));var h=u.stateNode;h&&(h=Uh(h),tr(u.stateNode,u.type,h))}}function mr(u){sr?ur?ur.push(u):ur=[u]:sr=u}function an(){if(sr){var u=sr,h=ur;if(ur=sr=null,Yt(u),h)for(u=0;u<h.length;u++)Yt(h[u])}}function Ur(u,h){return u(h)}function Cn(){}var In=!1;function nr(u,h,g){if(In)return u(h,g);In=!0;try{return Ur(u,h,g)}finally{In=!1,(sr!==null||ur!==null)&&(Cn(),an())}}function Hr(u,h){var g=u.stateNode;if(g===null)return null;var E=Uh(g);if(E===null)return null;g=E[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(u=u.type,E=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!E;break e;default:u=!1}if(u)return null;if(g&&typeof g!="function")throw Error(r(231,h,typeof g));return g}var ns=!1;if(o)try{var Dn={};Object.defineProperty(Dn,"passive",{get:function(){ns=!0}}),window.addEventListener("test",Dn,Dn),window.removeEventListener("test",Dn,Dn)}catch{ns=!1}function $i(u,h,g,E,R,z,ne,Pe,Oe){var rt=Array.prototype.slice.call(arguments,3);try{h.apply(g,rt)}catch(Ct){this.onError(Ct)}}var bn=!1,Jn=null,re=!1,Ae=null,ve={onError:function(u){bn=!0,Jn=u}};function ye(u,h,g,E,R,z,ne,Pe,Oe){bn=!1,Jn=null,$i.apply(ve,arguments)}function Ce(u,h,g,E,R,z,ne,Pe,Oe){if(ye.apply(this,arguments),bn){if(bn){var rt=Jn;bn=!1,Jn=null}else throw Error(r(198));re||(re=!0,Ae=rt)}}function Ie(u){var h=u,g=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(g=h.return),u=h.return;while(u)}return h.tag===3?g:null}function He(u){if(u.tag===13){var h=u.memoizedState;if(h===null&&(u=u.alternate,u!==null&&(h=u.memoizedState)),h!==null)return h.dehydrated}return null}function tt(u){if(Ie(u)!==u)throw Error(r(188))}function Ge(u){var h=u.alternate;if(!h){if(h=Ie(u),h===null)throw Error(r(188));return h!==u?null:u}for(var g=u,E=h;;){var R=g.return;if(R===null)break;var z=R.alternate;if(z===null){if(E=R.return,E!==null){g=E;continue}break}if(R.child===z.child){for(z=R.child;z;){if(z===g)return tt(R),u;if(z===E)return tt(R),h;z=z.sibling}throw Error(r(188))}if(g.return!==E.return)g=R,E=z;else{for(var ne=!1,Pe=R.child;Pe;){if(Pe===g){ne=!0,g=R,E=z;break}if(Pe===E){ne=!0,E=R,g=z;break}Pe=Pe.sibling}if(!ne){for(Pe=z.child;Pe;){if(Pe===g){ne=!0,g=z,E=R;break}if(Pe===E){ne=!0,E=z,g=R;break}Pe=Pe.sibling}if(!ne)throw Error(r(189))}}if(g.alternate!==E)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?u:h}function Ke(u){return u=Ge(u),u!==null?Qe(u):null}function Qe(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var h=Qe(u);if(h!==null)return h;u=u.sibling}return null}var _t=e.unstable_scheduleCallback,Ft=e.unstable_cancelCallback,Ht=e.unstable_shouldYield,Rt=e.unstable_requestPaint,Tt=e.unstable_now,br=e.unstable_getCurrentPriorityLevel,on=e.unstable_ImmediatePriority,Dr=e.unstable_UserBlockingPriority,fn=e.unstable_NormalPriority,Aa=e.unstable_LowPriority,Ca=e.unstable_IdlePriority,Ws=null,ni=null;function Bo(u){if(ni&&typeof ni.onCommitFiberRoot=="function")try{ni.onCommitFiberRoot(Ws,u,void 0,(u.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:cu,lu=Math.log,ui=Math.LN2;function cu(u){return u>>>=0,u===0?32:31-(lu(u)/ui|0)|0}var Ul=64,Ia=4194304;function Na(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Ps(u,h){var g=u.pendingLanes;if(g===0)return 0;var E=0,R=u.suspendedLanes,z=u.pingedLanes,ne=g&268435455;if(ne!==0){var Pe=ne&~R;Pe!==0?E=Na(Pe):(z&=ne,z!==0&&(E=Na(z)))}else ne=g&~R,ne!==0?E=Na(ne):z!==0&&(E=Na(z));if(E===0)return 0;if(h!==0&&h!==E&&(h&R)===0&&(R=E&-E,z=h&-h,R>=z||R===16&&(z&4194240)!==0))return h;if((E&4)!==0&&(E|=g&16),h=u.entangledLanes,h!==0)for(u=u.entanglements,h&=E;0<h;)g=31-En(h),R=1<<g,E|=u[g],h&=~R;return E}function zl(u,h){switch(u){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tn(u,h){for(var g=u.suspendedLanes,E=u.pingedLanes,R=u.expirationTimes,z=u.pendingLanes;0<z;){var ne=31-En(z),Pe=1<<ne,Oe=R[ne];Oe===-1?((Pe&g)===0||(Pe&E)!==0)&&(R[ne]=zl(Pe,h)):Oe<=h&&(u.expiredLanes|=Pe),z&=~Pe}}function Rs(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function $l(){var u=Ul;return Ul<<=1,(Ul&4194240)===0&&(Ul=64),u}function fl(u){for(var h=[],g=0;31>g;g++)h.push(u);return h}function hl(u,h,g){u.pendingLanes|=h,h!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,h=31-En(h),u[h]=g}function Yr(u,h){var g=u.pendingLanes&~h;u.pendingLanes=h,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=h,u.mutableReadLanes&=h,u.entangledLanes&=h,h=u.entanglements;var E=u.eventTimes;for(u=u.expirationTimes;0<g;){var R=31-En(g),z=1<<R;h[R]=0,E[R]=-1,u[R]=-1,g&=~z}}function Vo(u,h){var g=u.entangledLanes|=h;for(u=u.entanglements;g;){var E=31-En(g),R=1<<E;R&h|u[E]&h&&(u[E]|=h),g&=~R}}var Wr=0;function ca(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var gc,xc,tf,rf,vc,Uo=!1,Fs=[],is=null,Ls=null,ua=null,_r=new Map,Pa=new Map,_o=[],Ph="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nf(u,h){switch(u){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":ua=null;break;case"pointerover":case"pointerout":_r.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pa.delete(h.pointerId)}}function yi(u,h,g,E,R,z){return u===null||u.nativeEvent!==z?(u={blockedOn:h,domEventName:g,eventSystemFlags:E,nativeEvent:z,targetContainers:[R]},h!==null&&(h=mf(h),h!==null&&xc(h)),u):(u.eventSystemFlags|=E,h=u.targetContainers,R!==null&&h.indexOf(R)===-1&&h.push(R),u)}function zo(u,h,g,E,R){switch(h){case"focusin":return is=yi(is,u,h,g,E,R),!0;case"dragenter":return Ls=yi(Ls,u,h,g,E,R),!0;case"mouseover":return ua=yi(ua,u,h,g,E,R),!0;case"pointerover":var z=R.pointerId;return _r.set(z,yi(_r.get(z)||null,u,h,g,E,R)),!0;case"gotpointercapture":return z=R.pointerId,Pa.set(z,yi(Pa.get(z)||null,u,h,g,E,R)),!0}return!1}function sf(u){var h=Tc(u.target);if(h!==null){var g=Ie(h);if(g!==null){if(h=g.tag,h===13){if(h=He(g),h!==null){u.blockedOn=h,vc(u.priority,function(){tf(g)});return}}else if(h===3&&g.stateNode.current.memoizedState.isDehydrated){u.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}u.blockedOn=null}function $o(u){if(u.blockedOn!==null)return!1;for(var h=u.targetContainers;0<h.length;){var g=pl(u.domEventName,u.eventSystemFlags,h[0],u.nativeEvent);if(g===null){g=u.nativeEvent;var E=new g.constructor(g.type,g);jt=E,g.target.dispatchEvent(E),jt=null}else return h=mf(g),h!==null&&xc(h),u.blockedOn=g,!1;h.shift()}return!0}function bo(u,h,g){$o(u)&&g.delete(h)}function yc(){Uo=!1,is!==null&&$o(is)&&(is=null),Ls!==null&&$o(Ls)&&(Ls=null),ua!==null&&$o(ua)&&(ua=null),_r.forEach(bo),Pa.forEach(bo)}function Ds(u,h){u.blockedOn===h&&(u.blockedOn=null,Uo||(Uo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,yc)))}function qs(u){function h(R){return Ds(R,u)}if(0<Fs.length){Ds(Fs[0],u);for(var g=1;g<Fs.length;g++){var E=Fs[g];E.blockedOn===u&&(E.blockedOn=null)}}for(is!==null&&Ds(is,u),Ls!==null&&Ds(Ls,u),ua!==null&&Ds(ua,u),_r.forEach(h),Pa.forEach(h),g=0;g<_o.length;g++)E=_o[g],E.blockedOn===u&&(E.blockedOn=null);for(;0<_o.length&&(g=_o[0],g.blockedOn===null);)sf(g),g.blockedOn===null&&_o.shift()}var Ra=B.ReactCurrentBatchConfig,dl=!0;function Nn(u,h,g,E){var R=Wr,z=Ra.transition;Ra.transition=null;try{Wr=1,Ho(u,h,g,E)}finally{Wr=R,Ra.transition=z}}function uu(u,h,g,E){var R=Wr,z=Ra.transition;Ra.transition=null;try{Wr=4,Ho(u,h,g,E)}finally{Wr=R,Ra.transition=z}}function Ho(u,h,g,E){if(dl){var R=pl(u,h,g,E);if(R===null)jh(u,h,E,co,g),nf(u,E);else if(zo(R,u,h,g,E))E.stopPropagation();else if(nf(u,E),h&4&&-1<Ph.indexOf(u)){for(;R!==null;){var z=mf(R);if(z!==null&&gc(z),z=pl(u,h,g,E),z===null&&jh(u,h,E,co,g),z===R)break;R=z}R!==null&&E.stopPropagation()}else jh(u,h,E,null,g)}}var co=null;function pl(u,h,g,E){if(co=null,u=Vt(E),u=Tc(u),u!==null)if(h=Ie(u),h===null)u=null;else if(g=h.tag,g===13){if(u=He(h),u!==null)return u;u=null}else if(g===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;u=null}else h!==u&&(u=null);return co=u,null}function ml(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(br()){case on:return 1;case Dr:return 4;case fn:case Aa:return 16;case Ca:return 536870912;default:return 16}default:return 16}}var Os=null,Eo=null,ys=null;function Hl(){if(ys)return ys;var u,h=Eo,g=h.length,E,R="value"in Os?Os.value:Os.textContent,z=R.length;for(u=0;u<g&&h[u]===R[u];u++);var ne=g-u;for(E=1;E<=ne&&h[g-E]===R[z-E];E++);return ys=R.slice(u,1<E?1-E:void 0)}function ws(u){var h=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&h===13&&(u=13)):u=h,u===10&&(u=13),32<=u||u===13?u:0}function ss(){return!0}function L(){return!1}function Z(u){function h(g,E,R,z,ne){this._reactName=g,this._targetInst=R,this.type=E,this.nativeEvent=z,this.target=ne,this.currentTarget=null;for(var Pe in u)u.hasOwnProperty(Pe)&&(g=u[Pe],this[Pe]=g?g(z):z[Pe]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?ss:L,this.isPropagationStopped=L,this}return ue(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),h}var Se={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Le=Z(Se),Ve=ue({},Se,{view:0,detail:0}),dt=Z(Ve),vt,Gt,Qt,xr=ue({},Ve,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fa,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Qt&&(Qt&&u.type==="mousemove"?(vt=u.screenX-Qt.screenX,Gt=u.screenY-Qt.screenY):Gt=vt=0,Qt=u),vt)},movementY:function(u){return"movementY"in u?u.movementY:Gt}}),Ar=Z(xr),nn=ue({},xr,{dataTransfer:0}),Wn=Z(nn),Zn=ue({},Ve,{relatedTarget:0}),hn=Z(Zn),wi=ue({},Se,{animationName:0,elapsedTime:0,pseudoElement:0}),Pn=Z(wi),Hi=ue({},Se,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),So=Z(Hi),Wo=ue({},Se,{data:0}),fu=Z(Wo),Wl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ri={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wc(u){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(u):(u=Fa[u])?!!h[u]:!1}function fa(){return wc}var y=ue({},Ve,{key:function(u){if(u.key){var h=Wl[u.key]||u.key;if(h!=="Unidentified")return h}return u.type==="keypress"?(u=ws(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Ri[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fa,charCode:function(u){return u.type==="keypress"?ws(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?ws(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),V=Z(y),Q=ue({},xr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),me=Z(Q),ze=ue({},Ve,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fa}),it=Z(ze),It=ue({},Se,{propertyName:0,elapsedTime:0,pseudoElement:0}),dn=Z(It),ii=ue({},xr,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),qr=Z(ii),Qr=[9,13,27,32],gn=o&&"CompositionEvent"in window,Gs=null;o&&"documentMode"in document&&(Gs=document.documentMode);var Ms=o&&"TextEvent"in window&&!Gs,La=o&&(!gn||Gs&&8<Gs&&11>=Gs),qo=" ",ha=!1;function da(u,h){switch(u){case"keyup":return Qr.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _c(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var pa=!1;function bc(u,h){switch(u){case"compositionend":return _c(h);case"keypress":return h.which!==32?null:(ha=!0,qo);case"textInput":return u=h.data,u===qo&&ha?null:u;default:return null}}function Rh(u,h){if(pa)return u==="compositionend"||!gn&&da(u,h)?(u=Hl(),ys=Eo=Os=null,pa=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return La&&h.locale!=="ko"?null:h.data;default:return null}}var Ec={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _i(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h==="input"?!!Ec[u.type]:h==="textarea"}function n0(u,h,g,E){mr(E),h=c0(h,"onChange"),0<h.length&&(g=new Le("onChange","change",null,g,E),u.push({event:g,listeners:h}))}var Da=null,Oa=null;function af(u){Oh(u,0)}function Sc(u){var h=yu(u);if(oe(h))return u}function of(u,h){if(u==="change")return h}var hu=!1;if(o){var ql;if(o){var Gl="oninput"in document;if(!Gl){var gl=document.createElement("div");gl.setAttribute("oninput","return;"),Gl=typeof gl.oninput=="function"}ql=Gl}else ql=!1;hu=ql&&(!document.documentMode||9<document.documentMode)}function lf(){Da&&(Da.detachEvent("onpropertychange",Ma),Oa=Da=null)}function Ma(u){if(u.propertyName==="value"&&Sc(Oa)){var h=[];n0(h,Oa,u,Vt(u)),nr(af,h)}}function xl(u,h,g){u==="focusin"?(lf(),Da=h,Oa=g,Da.attachEvent("onpropertychange",Ma)):u==="focusout"&&lf()}function qn(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Sc(Oa)}function Gn(u,h){if(u==="click")return Sc(h)}function Fi(u,h){if(u==="input"||u==="change")return Sc(h)}function Li(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var as=typeof Object.is=="function"?Object.is:Li;function vl(u,h){if(as(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var g=Object.keys(u),E=Object.keys(h);if(g.length!==E.length)return!1;for(E=0;E<g.length;E++){var R=g[E];if(!l.call(h,R)||!as(u[R],h[R]))return!1}return!0}function Go(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function cf(u,h){var g=Go(u);u=0;for(var E;g;){if(g.nodeType===3){if(E=u+g.textContent.length,u<=h&&E>=h)return{node:g,offset:h-u};u=E}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Go(g)}}function l1(u,h){return u&&h?u===h?!0:u&&u.nodeType===3?!1:h&&h.nodeType===3?l1(u,h.parentNode):"contains"in u?u.contains(h):u.compareDocumentPosition?!!(u.compareDocumentPosition(h)&16):!1:!1}function c1(){for(var u=window,h=Je();h instanceof u.HTMLIFrameElement;){try{var g=typeof h.contentWindow.location.href=="string"}catch{g=!1}if(g)u=h.contentWindow;else break;h=Je(u.document)}return h}function i0(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h&&(h==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||h==="textarea"||u.contentEditable==="true")}function Vg(u){var h=c1(),g=u.focusedElem,E=u.selectionRange;if(h!==g&&g&&g.ownerDocument&&l1(g.ownerDocument.documentElement,g)){if(E!==null&&i0(g)){if(h=E.start,u=E.end,u===void 0&&(u=h),"selectionStart"in g)g.selectionStart=h,g.selectionEnd=Math.min(u,g.value.length);else if(u=(h=g.ownerDocument||document)&&h.defaultView||window,u.getSelection){u=u.getSelection();var R=g.textContent.length,z=Math.min(E.start,R);E=E.end===void 0?z:Math.min(E.end,R),!u.extend&&z>E&&(R=E,E=z,z=R),R=cf(g,z);var ne=cf(g,E);R&&ne&&(u.rangeCount!==1||u.anchorNode!==R.node||u.anchorOffset!==R.offset||u.focusNode!==ne.node||u.focusOffset!==ne.offset)&&(h=h.createRange(),h.setStart(R.node,R.offset),u.removeAllRanges(),z>E?(u.addRange(h),u.extend(ne.node,ne.offset)):(h.setEnd(ne.node,ne.offset),u.addRange(h)))}}for(h=[],u=g;u=u.parentNode;)u.nodeType===1&&h.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<h.length;g++)u=h[g],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var Ug=o&&"documentMode"in document&&11>=document.documentMode,du=null,s0=null,uf=null,a0=!1;function u1(u,h,g){var E=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;a0||du==null||du!==Je(E)||(E=du,"selectionStart"in E&&i0(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),uf&&vl(uf,E)||(uf=E,E=c0(s0,"onSelect"),0<E.length&&(h=new Le("onSelect","select",null,h,g),u.push({event:h,listeners:E}),h.target=du)))}function Fh(u,h){var g={};return g[u.toLowerCase()]=h.toLowerCase(),g["Webkit"+u]="webkit"+h,g["Moz"+u]="moz"+h,g}var pu={animationend:Fh("Animation","AnimationEnd"),animationiteration:Fh("Animation","AnimationIteration"),animationstart:Fh("Animation","AnimationStart"),transitionend:Fh("Transition","TransitionEnd")},mu={},f1={};o&&(f1=document.createElement("div").style,"AnimationEvent"in window||(delete pu.animationend.animation,delete pu.animationiteration.animation,delete pu.animationstart.animation),"TransitionEvent"in window||delete pu.transitionend.transition);function Lh(u){if(mu[u])return mu[u];if(!pu[u])return u;var h=pu[u],g;for(g in h)if(h.hasOwnProperty(g)&&g in f1)return mu[u]=h[g];return u}var h1=Lh("animationend"),d1=Lh("animationiteration"),p1=Lh("animationstart"),m1=Lh("transitionend"),g1=new Map,x1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yl(u,h){g1.set(u,h),s(h,[u])}for(var ff=0;ff<x1.length;ff++){var ma=x1[ff],ko=ma.toLowerCase(),o0=ma[0].toUpperCase()+ma.slice(1);yl(ko,"on"+o0)}yl(h1,"onAnimationEnd"),yl(d1,"onAnimationIteration"),yl(p1,"onAnimationStart"),yl("dblclick","onDoubleClick"),yl("focusin","onFocus"),yl("focusout","onBlur"),yl(m1,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zg=new Set("cancel close invalid load scroll toggle".split(" ").concat(kc));function Dh(u,h,g){var E=u.type||"unknown-event";u.currentTarget=g,Ce(E,h,void 0,u),u.currentTarget=null}function Oh(u,h){h=(h&4)!==0;for(var g=0;g<u.length;g++){var E=u[g],R=E.event;E=E.listeners;e:{var z=void 0;if(h)for(var ne=E.length-1;0<=ne;ne--){var Pe=E[ne],Oe=Pe.instance,rt=Pe.currentTarget;if(Pe=Pe.listener,Oe!==z&&R.isPropagationStopped())break e;Dh(R,Pe,rt),z=Oe}else for(ne=0;ne<E.length;ne++){if(Pe=E[ne],Oe=Pe.instance,rt=Pe.currentTarget,Pe=Pe.listener,Oe!==z&&R.isPropagationStopped())break e;Dh(R,Pe,rt),z=Oe}}}if(re)throw u=Ae,re=!1,Ae=null,u}function On(u,h){var g=h[Ba];g===void 0&&(g=h[Ba]=new Set);var E=u+"__bubble";g.has(E)||(Mh(h,u,2,!1),g.add(E))}function l0(u,h,g){var E=0;h&&(E|=4),Mh(g,u,E,h)}var hf="_reactListening"+Math.random().toString(36).slice(2);function gu(u){if(!u[hf]){u[hf]=!0,n.forEach(function(g){g!=="selectionchange"&&(zg.has(g)||l0(g,!1,u),l0(g,!0,u))});var h=u.nodeType===9?u:u.ownerDocument;h===null||h[hf]||(h[hf]=!0,l0("selectionchange",!1,h))}}function Mh(u,h,g,E){switch(ml(h)){case 1:var R=Nn;break;case 4:R=uu;break;default:R=Ho}g=R.bind(null,h,g,u),R=void 0,!ns||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(R=!0),E?R!==void 0?u.addEventListener(h,g,{capture:!0,passive:R}):u.addEventListener(h,g,!0):R!==void 0?u.addEventListener(h,g,{passive:R}):u.addEventListener(h,g,!1)}function jh(u,h,g,E,R){var z=E;if((h&1)===0&&(h&2)===0&&E!==null)e:for(;;){if(E===null)return;var ne=E.tag;if(ne===3||ne===4){var Pe=E.stateNode.containerInfo;if(Pe===R||Pe.nodeType===8&&Pe.parentNode===R)break;if(ne===4)for(ne=E.return;ne!==null;){var Oe=ne.tag;if((Oe===3||Oe===4)&&(Oe=ne.stateNode.containerInfo,Oe===R||Oe.nodeType===8&&Oe.parentNode===R))return;ne=ne.return}for(;Pe!==null;){if(ne=Tc(Pe),ne===null)return;if(Oe=ne.tag,Oe===5||Oe===6){E=z=ne;continue e}Pe=Pe.parentNode}}E=E.return}nr(function(){var rt=z,Ct=Vt(g),Pt=[];e:{var At=g1.get(u);if(At!==void 0){var Kt=Le,ar=u;switch(u){case"keypress":if(ws(g)===0)break e;case"keydown":case"keyup":Kt=V;break;case"focusin":ar="focus",Kt=hn;break;case"focusout":ar="blur",Kt=hn;break;case"beforeblur":case"afterblur":Kt=hn;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Kt=Ar;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Kt=Wn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Kt=it;break;case h1:case d1:case p1:Kt=Pn;break;case m1:Kt=dn;break;case"scroll":Kt=dt;break;case"wheel":Kt=qr;break;case"copy":case"cut":case"paste":Kt=So;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Kt=me}var fr=(h&4)!==0,cs=!fr&&u==="scroll",Xe=fr?At!==null?At+"Capture":null:At;fr=[];for(var Be=rt,Ze;Be!==null;){Ze=Be;var Dt=Ze.stateNode;if(Ze.tag===5&&Dt!==null&&(Ze=Dt,Xe!==null&&(Dt=Hr(Be,Xe),Dt!=null&&fr.push(Bh(Be,Dt,Ze)))),cs)break;Be=Be.return}0<fr.length&&(At=new Kt(At,ar,null,g,Ct),Pt.push({event:At,listeners:fr}))}}if((h&7)===0){e:{if(At=u==="mouseover"||u==="pointerover",Kt=u==="mouseout"||u==="pointerout",At&&g!==jt&&(ar=g.relatedTarget||g.fromElement)&&(Tc(ar)||ar[Ks]))break e;if((Kt||At)&&(At=Ct.window===Ct?Ct:(At=Ct.ownerDocument)?At.defaultView||At.parentWindow:window,Kt?(ar=g.relatedTarget||g.toElement,Kt=rt,ar=ar?Tc(ar):null,ar!==null&&(cs=Ie(ar),ar!==cs||ar.tag!==5&&ar.tag!==6)&&(ar=null)):(Kt=null,ar=rt),Kt!==ar)){if(fr=Ar,Dt="onMouseLeave",Xe="onMouseEnter",Be="mouse",(u==="pointerout"||u==="pointerover")&&(fr=me,Dt="onPointerLeave",Xe="onPointerEnter",Be="pointer"),cs=Kt==null?At:yu(Kt),Ze=ar==null?At:yu(ar),At=new fr(Dt,Be+"leave",Kt,g,Ct),At.target=cs,At.relatedTarget=Ze,Dt=null,Tc(Ct)===rt&&(fr=new fr(Xe,Be+"enter",ar,g,Ct),fr.target=Ze,fr.relatedTarget=cs,Dt=fr),cs=Dt,Kt&&ar)t:{for(fr=Kt,Xe=ar,Be=0,Ze=fr;Ze;Ze=xu(Ze))Be++;for(Ze=0,Dt=Xe;Dt;Dt=xu(Dt))Ze++;for(;0<Be-Ze;)fr=xu(fr),Be--;for(;0<Ze-Be;)Xe=xu(Xe),Ze--;for(;Be--;){if(fr===Xe||Xe!==null&&fr===Xe.alternate)break t;fr=xu(fr),Xe=xu(Xe)}fr=null}else fr=null;Kt!==null&&$g(Pt,At,Kt,fr,!1),ar!==null&&cs!==null&&$g(Pt,cs,ar,fr,!0)}}e:{if(At=rt?yu(rt):window,Kt=At.nodeName&&At.nodeName.toLowerCase(),Kt==="select"||Kt==="input"&&At.type==="file")var dr=of;else if(_i(At))if(hu)dr=Fi;else{dr=qn;var Er=xl}else(Kt=At.nodeName)&&Kt.toLowerCase()==="input"&&(At.type==="checkbox"||At.type==="radio")&&(dr=Gn);if(dr&&(dr=dr(u,rt))){n0(Pt,dr,g,Ct);break e}Er&&Er(u,At,rt),u==="focusout"&&(Er=At._wrapperState)&&Er.controlled&&At.type==="number"&&K(At,"number",At.value)}switch(Er=rt?yu(rt):window,u){case"focusin":(_i(Er)||Er.contentEditable==="true")&&(du=Er,s0=rt,uf=null);break;case"focusout":uf=s0=du=null;break;case"mousedown":a0=!0;break;case"contextmenu":case"mouseup":case"dragend":a0=!1,u1(Pt,g,Ct);break;case"selectionchange":if(Ug)break;case"keydown":case"keyup":u1(Pt,g,Ct)}var Sr;if(gn)e:{switch(u){case"compositionstart":var Rr="onCompositionStart";break e;case"compositionend":Rr="onCompositionEnd";break e;case"compositionupdate":Rr="onCompositionUpdate";break e}Rr=void 0}else pa?da(u,g)&&(Rr="onCompositionEnd"):u==="keydown"&&g.keyCode===229&&(Rr="onCompositionStart");Rr&&(La&&g.locale!=="ko"&&(pa||Rr!=="onCompositionStart"?Rr==="onCompositionEnd"&&pa&&(Sr=Hl()):(Os=Ct,Eo="value"in Os?Os.value:Os.textContent,pa=!0)),Er=c0(rt,Rr),0<Er.length&&(Rr=new fu(Rr,u,null,g,Ct),Pt.push({event:Rr,listeners:Er}),Sr?Rr.data=Sr:(Sr=_c(g),Sr!==null&&(Rr.data=Sr)))),(Sr=Ms?bc(u,g):Rh(u,g))&&(rt=c0(rt,"onBeforeInput"),0<rt.length&&(Ct=new fu("onBeforeInput","beforeinput",null,g,Ct),Pt.push({event:Ct,listeners:rt}),Ct.data=Sr))}Oh(Pt,h)})}function Bh(u,h,g){return{instance:u,listener:h,currentTarget:g}}function c0(u,h){for(var g=h+"Capture",E=[];u!==null;){var R=u,z=R.stateNode;R.tag===5&&z!==null&&(R=z,z=Hr(u,g),z!=null&&E.unshift(Bh(u,z,R)),z=Hr(u,h),z!=null&&E.push(Bh(u,z,R))),u=u.return}return E}function xu(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function $g(u,h,g,E,R){for(var z=h._reactName,ne=[];g!==null&&g!==E;){var Pe=g,Oe=Pe.alternate,rt=Pe.stateNode;if(Oe!==null&&Oe===E)break;Pe.tag===5&&rt!==null&&(Pe=rt,R?(Oe=Hr(g,z),Oe!=null&&ne.unshift(Bh(g,Oe,Pe))):R||(Oe=Hr(g,z),Oe!=null&&ne.push(Bh(g,Oe,Pe)))),g=g.return}ne.length!==0&&u.push({event:h,listeners:ne})}var Ey=/\r\n?/g,Sy=/\u0000|\uFFFD/g;function Hg(u){return(typeof u=="string"?u:""+u).replace(Ey,`
`).replace(Sy,"")}function u0(u,h,g){if(h=Hg(h),Hg(u)!==h&&g)throw Error(r(425))}function df(){}var Vh=null,vu=null;function v1(u,h){return u==="textarea"||u==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var y1=typeof setTimeout=="function"?setTimeout:void 0,Wg=typeof clearTimeout=="function"?clearTimeout:void 0,qg=typeof Promise=="function"?Promise:void 0,ky=typeof queueMicrotask=="function"?queueMicrotask:typeof qg<"u"?function(u){return qg.resolve(null).then(u).catch(Ty)}:y1;function Ty(u){setTimeout(function(){throw u})}function w1(u,h){var g=h,E=0;do{var R=g.nextSibling;if(u.removeChild(g),R&&R.nodeType===8)if(g=R.data,g==="/$"){if(E===0){u.removeChild(R),qs(h);return}E--}else g!=="$"&&g!=="$?"&&g!=="$!"||E++;g=R}while(g);qs(h)}function ga(u){for(;u!=null;u=u.nextSibling){var h=u.nodeType;if(h===1||h===3)break;if(h===8){if(h=u.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return u}function To(u){u=u.previousSibling;for(var h=0;u;){if(u.nodeType===8){var g=u.data;if(g==="$"||g==="$!"||g==="$?"){if(h===0)return u;h--}else g==="/$"&&h++}u=u.previousSibling}return null}var ja=Math.random().toString(36).slice(2),wl="__reactFiber$"+ja,pf="__reactProps$"+ja,Ks="__reactContainer$"+ja,Ba="__reactEvents$"+ja,Ay="__reactListeners$"+ja,Cy="__reactHandles$"+ja;function Tc(u){var h=u[wl];if(h)return h;for(var g=u.parentNode;g;){if(h=g[Ks]||g[wl]){if(g=h.alternate,h.child!==null||g!==null&&g.child!==null)for(u=To(u);u!==null;){if(g=u[wl])return g;u=To(u)}return h}u=g,g=u.parentNode}return null}function mf(u){return u=u[wl]||u[Ks],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function yu(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(r(33))}function Uh(u){return u[pf]||null}var _1=[],Kl=-1;function Ko(u){return{current:u}}function An(u){0>Kl||(u.current=_1[Kl],_1[Kl]=null,Kl--)}function Rn(u,h){Kl++,_1[Kl]=u.current,u.current=h}var Ac={},js=Ko(Ac),Va=Ko(!1),wu=Ac;function gf(u,h){var g=u.type.contextTypes;if(!g)return Ac;var E=u.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===h)return E.__reactInternalMemoizedMaskedChildContext;var R={},z;for(z in g)R[z]=h[z];return E&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=h,u.__reactInternalMemoizedMaskedChildContext=R),R}function Ua(u){return u=u.childContextTypes,u!=null}function f0(){An(Va),An(js)}function Gg(u,h,g){if(js.current!==Ac)throw Error(r(168));Rn(js,h),Rn(Va,g)}function b1(u,h,g){var E=u.stateNode;if(h=h.childContextTypes,typeof E.getChildContext!="function")return g;E=E.getChildContext();for(var R in E)if(!(R in h))throw Error(r(108,pe(u)||"Unknown",R));return ue({},g,E)}function _u(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Ac,wu=js.current,Rn(js,u),Rn(Va,Va.current),!0}function Kg(u,h,g){var E=u.stateNode;if(!E)throw Error(r(169));g?(u=b1(u,h,wu),E.__reactInternalMemoizedMergedChildContext=u,An(Va),An(js),Rn(js,u)):An(Va),Rn(Va,g)}var Xl=null,zh=!1,v=!1;function S(u){Xl===null?Xl=[u]:Xl.push(u)}function j(u){zh=!0,S(u)}function q(){if(!v&&Xl!==null){v=!0;var u=0,h=Wr;try{var g=Xl;for(Wr=1;u<g.length;u++){var E=g[u];do E=E(!0);while(E!==null)}Xl=null,zh=!1}catch(R){throw Xl!==null&&(Xl=Xl.slice(u+1)),_t(on,q),R}finally{Wr=h,v=!1}}return null}var te=[],se=0,ce=null,de=0,ge=[],_e=0,De=null,qe=1,ke="";function je(u,h){te[se++]=de,te[se++]=ce,ce=u,de=h}function $e(u,h,g){ge[_e++]=qe,ge[_e++]=ke,ge[_e++]=De,De=u;var E=qe;u=ke;var R=32-En(E)-1;E&=~(1<<R),g+=1;var z=32-En(h)+R;if(30<z){var ne=R-R%5;z=(E&(1<<ne)-1).toString(32),E>>=ne,R-=ne,qe=1<<32-En(h)+R|g<<R|E,ke=z+u}else qe=1<<z|g<<R|E,ke=u}function ct(u){u.return!==null&&(je(u,1),$e(u,1,0))}function Ye(u){for(;u===ce;)ce=te[--se],te[se]=null,de=te[--se],te[se]=null;for(;u===De;)De=ge[--_e],ge[_e]=null,ke=ge[--_e],ge[_e]=null,qe=ge[--_e],ge[_e]=null}var at=null,lt=null,mt=!1,gt=null;function hr(u,h){var g=kl(5,null,null,0);g.elementType="DELETED",g.stateNode=h,g.return=u,h=u.deletions,h===null?(u.deletions=[g],u.flags|=16):h.push(g)}function Jt(u,h){switch(u.tag){case 5:var g=u.type;return h=h.nodeType!==1||g.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(u.stateNode=h,at=u,lt=ga(h.firstChild),!0):!1;case 6:return h=u.pendingProps===""||h.nodeType!==3?null:h,h!==null?(u.stateNode=h,at=u,lt=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(g=De!==null?{id:qe,overflow:ke}:null,u.memoizedState={dehydrated:h,treeContext:g,retryLane:1073741824},g=kl(18,null,null,0),g.stateNode=h,g.return=u,u.child=g,at=u,lt=null,!0):!1;default:return!1}}function Or(u){return(u.mode&1)!==0&&(u.flags&128)===0}function ir(u){if(mt){var h=lt;if(h){var g=h;if(!Jt(u,h)){if(Or(u))throw Error(r(418));h=ga(g.nextSibling);var E=at;h&&Jt(u,h)?hr(E,g):(u.flags=u.flags&-4097|2,mt=!1,at=u)}}else{if(Or(u))throw Error(r(418));u.flags=u.flags&-4097|2,mt=!1,at=u}}}function Jr(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;at=u}function bi(u){if(u!==at)return!1;if(!mt)return Jr(u),mt=!0,!1;var h;if((h=u.tag!==3)&&!(h=u.tag!==5)&&(h=u.type,h=h!=="head"&&h!=="body"&&!v1(u.type,u.memoizedProps)),h&&(h=lt)){if(Or(u))throw Mr(),Error(r(418));for(;h;)hr(u,h),h=ga(h.nextSibling)}if(Jr(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));e:{for(u=u.nextSibling,h=0;u;){if(u.nodeType===8){var g=u.data;if(g==="/$"){if(h===0){lt=ga(u.nextSibling);break e}h--}else g!=="$"&&g!=="$!"&&g!=="$?"||h++}u=u.nextSibling}lt=null}}else lt=at?ga(u.stateNode.nextSibling):null;return!0}function Mr(){for(var u=lt;u;)u=ga(u.nextSibling)}function Zt(){lt=at=null,mt=!1}function zt(u){gt===null?gt=[u]:gt.push(u)}var Di=B.ReactCurrentBatchConfig;function Cr(u,h,g){if(u=g.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(r(309));var E=g.stateNode}if(!E)throw Error(r(147,u));var R=E,z=""+u;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===z?h.ref:(h=function(ne){var Pe=R.refs;ne===null?delete Pe[z]:Pe[z]=ne},h._stringRef=z,h)}if(typeof u!="string")throw Error(r(284));if(!g._owner)throw Error(r(290,u))}return u}function Gr(u,h){throw u=Object.prototype.toString.call(h),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u))}function Kn(u){var h=u._init;return h(u._payload)}function _s(u){function h(Xe,Be){if(u){var Ze=Xe.deletions;Ze===null?(Xe.deletions=[Be],Xe.flags|=16):Ze.push(Be)}}function g(Xe,Be){if(!u)return null;for(;Be!==null;)h(Xe,Be),Be=Be.sibling;return null}function E(Xe,Be){for(Xe=new Map;Be!==null;)Be.key!==null?Xe.set(Be.key,Be):Xe.set(Be.index,Be),Be=Be.sibling;return Xe}function R(Xe,Be){return Xe=Tf(Xe,Be),Xe.index=0,Xe.sibling=null,Xe}function z(Xe,Be,Ze){return Xe.index=Ze,u?(Ze=Xe.alternate,Ze!==null?(Ze=Ze.index,Ze<Be?(Xe.flags|=2,Be):Ze):(Xe.flags|=2,Be)):(Xe.flags|=1048576,Be)}function ne(Xe){return u&&Xe.alternate===null&&(Xe.flags|=2),Xe}function Pe(Xe,Be,Ze,Dt){return Be===null||Be.tag!==6?(Be=nw(Ze,Xe.mode,Dt),Be.return=Xe,Be):(Be=R(Be,Ze),Be.return=Xe,Be)}function Oe(Xe,Be,Ze,Dt){var dr=Ze.type;return dr===P?Ct(Xe,Be,Ze.props.children,Dt,Ze.key):Be!==null&&(Be.elementType===dr||typeof dr=="object"&&dr!==null&&dr.$$typeof===Ne&&Kn(dr)===Be.type)?(Dt=R(Be,Ze.props),Dt.ref=Cr(Xe,Be,Ze),Dt.return=Xe,Dt):(Dt=px(Ze.type,Ze.key,Ze.props,null,Xe.mode,Dt),Dt.ref=Cr(Xe,Be,Ze),Dt.return=Xe,Dt)}function rt(Xe,Be,Ze,Dt){return Be===null||Be.tag!==4||Be.stateNode.containerInfo!==Ze.containerInfo||Be.stateNode.implementation!==Ze.implementation?(Be=iw(Ze,Xe.mode,Dt),Be.return=Xe,Be):(Be=R(Be,Ze.children||[]),Be.return=Xe,Be)}function Ct(Xe,Be,Ze,Dt,dr){return Be===null||Be.tag!==7?(Be=Yh(Ze,Xe.mode,Dt,dr),Be.return=Xe,Be):(Be=R(Be,Ze),Be.return=Xe,Be)}function Pt(Xe,Be,Ze){if(typeof Be=="string"&&Be!==""||typeof Be=="number")return Be=nw(""+Be,Xe.mode,Ze),Be.return=Xe,Be;if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case X:return Ze=px(Be.type,Be.key,Be.props,null,Xe.mode,Ze),Ze.ref=Cr(Xe,null,Be),Ze.return=Xe,Ze;case G:return Be=iw(Be,Xe.mode,Ze),Be.return=Xe,Be;case Ne:var Dt=Be._init;return Pt(Xe,Dt(Be._payload),Ze)}if(Te(Be)||J(Be))return Be=Yh(Be,Xe.mode,Ze,null),Be.return=Xe,Be;Gr(Xe,Be)}return null}function At(Xe,Be,Ze,Dt){var dr=Be!==null?Be.key:null;if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return dr!==null?null:Pe(Xe,Be,""+Ze,Dt);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case X:return Ze.key===dr?Oe(Xe,Be,Ze,Dt):null;case G:return Ze.key===dr?rt(Xe,Be,Ze,Dt):null;case Ne:return dr=Ze._init,At(Xe,Be,dr(Ze._payload),Dt)}if(Te(Ze)||J(Ze))return dr!==null?null:Ct(Xe,Be,Ze,Dt,null);Gr(Xe,Ze)}return null}function Kt(Xe,Be,Ze,Dt,dr){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number")return Xe=Xe.get(Ze)||null,Pe(Be,Xe,""+Dt,dr);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case X:return Xe=Xe.get(Dt.key===null?Ze:Dt.key)||null,Oe(Be,Xe,Dt,dr);case G:return Xe=Xe.get(Dt.key===null?Ze:Dt.key)||null,rt(Be,Xe,Dt,dr);case Ne:var Er=Dt._init;return Kt(Xe,Be,Ze,Er(Dt._payload),dr)}if(Te(Dt)||J(Dt))return Xe=Xe.get(Ze)||null,Ct(Be,Xe,Dt,dr,null);Gr(Be,Dt)}return null}function ar(Xe,Be,Ze,Dt){for(var dr=null,Er=null,Sr=Be,Rr=Be=0,Zs=null;Sr!==null&&Rr<Ze.length;Rr++){Sr.index>Rr?(Zs=Sr,Sr=null):Zs=Sr.sibling;var Sn=At(Xe,Sr,Ze[Rr],Dt);if(Sn===null){Sr===null&&(Sr=Zs);break}u&&Sr&&Sn.alternate===null&&h(Xe,Sr),Be=z(Sn,Be,Rr),Er===null?dr=Sn:Er.sibling=Sn,Er=Sn,Sr=Zs}if(Rr===Ze.length)return g(Xe,Sr),mt&&je(Xe,Rr),dr;if(Sr===null){for(;Rr<Ze.length;Rr++)Sr=Pt(Xe,Ze[Rr],Dt),Sr!==null&&(Be=z(Sr,Be,Rr),Er===null?dr=Sr:Er.sibling=Sr,Er=Sr);return mt&&je(Xe,Rr),dr}for(Sr=E(Xe,Sr);Rr<Ze.length;Rr++)Zs=Kt(Sr,Xe,Rr,Ze[Rr],Dt),Zs!==null&&(u&&Zs.alternate!==null&&Sr.delete(Zs.key===null?Rr:Zs.key),Be=z(Zs,Be,Rr),Er===null?dr=Zs:Er.sibling=Zs,Er=Zs);return u&&Sr.forEach(function(Af){return h(Xe,Af)}),mt&&je(Xe,Rr),dr}function fr(Xe,Be,Ze,Dt){var dr=J(Ze);if(typeof dr!="function")throw Error(r(150));if(Ze=dr.call(Ze),Ze==null)throw Error(r(151));for(var Er=dr=null,Sr=Be,Rr=Be=0,Zs=null,Sn=Ze.next();Sr!==null&&!Sn.done;Rr++,Sn=Ze.next()){Sr.index>Rr?(Zs=Sr,Sr=null):Zs=Sr.sibling;var Af=At(Xe,Sr,Sn.value,Dt);if(Af===null){Sr===null&&(Sr=Zs);break}u&&Sr&&Af.alternate===null&&h(Xe,Sr),Be=z(Af,Be,Rr),Er===null?dr=Af:Er.sibling=Af,Er=Af,Sr=Zs}if(Sn.done)return g(Xe,Sr),mt&&je(Xe,Rr),dr;if(Sr===null){for(;!Sn.done;Rr++,Sn=Ze.next())Sn=Pt(Xe,Sn.value,Dt),Sn!==null&&(Be=z(Sn,Be,Rr),Er===null?dr=Sn:Er.sibling=Sn,Er=Sn);return mt&&je(Xe,Rr),dr}for(Sr=E(Xe,Sr);!Sn.done;Rr++,Sn=Ze.next())Sn=Kt(Sr,Xe,Rr,Sn.value,Dt),Sn!==null&&(u&&Sn.alternate!==null&&Sr.delete(Sn.key===null?Rr:Sn.key),Be=z(Sn,Be,Rr),Er===null?dr=Sn:Er.sibling=Sn,Er=Sn);return u&&Sr.forEach(function(PL){return h(Xe,PL)}),mt&&je(Xe,Rr),dr}function cs(Xe,Be,Ze,Dt){if(typeof Ze=="object"&&Ze!==null&&Ze.type===P&&Ze.key===null&&(Ze=Ze.props.children),typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case X:e:{for(var dr=Ze.key,Er=Be;Er!==null;){if(Er.key===dr){if(dr=Ze.type,dr===P){if(Er.tag===7){g(Xe,Er.sibling),Be=R(Er,Ze.props.children),Be.return=Xe,Xe=Be;break e}}else if(Er.elementType===dr||typeof dr=="object"&&dr!==null&&dr.$$typeof===Ne&&Kn(dr)===Er.type){g(Xe,Er.sibling),Be=R(Er,Ze.props),Be.ref=Cr(Xe,Er,Ze),Be.return=Xe,Xe=Be;break e}g(Xe,Er);break}else h(Xe,Er);Er=Er.sibling}Ze.type===P?(Be=Yh(Ze.props.children,Xe.mode,Dt,Ze.key),Be.return=Xe,Xe=Be):(Dt=px(Ze.type,Ze.key,Ze.props,null,Xe.mode,Dt),Dt.ref=Cr(Xe,Be,Ze),Dt.return=Xe,Xe=Dt)}return ne(Xe);case G:e:{for(Er=Ze.key;Be!==null;){if(Be.key===Er)if(Be.tag===4&&Be.stateNode.containerInfo===Ze.containerInfo&&Be.stateNode.implementation===Ze.implementation){g(Xe,Be.sibling),Be=R(Be,Ze.children||[]),Be.return=Xe,Xe=Be;break e}else{g(Xe,Be);break}else h(Xe,Be);Be=Be.sibling}Be=iw(Ze,Xe.mode,Dt),Be.return=Xe,Xe=Be}return ne(Xe);case Ne:return Er=Ze._init,cs(Xe,Be,Er(Ze._payload),Dt)}if(Te(Ze))return ar(Xe,Be,Ze,Dt);if(J(Ze))return fr(Xe,Be,Ze,Dt);Gr(Xe,Ze)}return typeof Ze=="string"&&Ze!==""||typeof Ze=="number"?(Ze=""+Ze,Be!==null&&Be.tag===6?(g(Xe,Be.sibling),Be=R(Be,Ze),Be.return=Xe,Xe=Be):(g(Xe,Be),Be=nw(Ze,Xe.mode,Dt),Be.return=Xe,Xe=Be),ne(Xe)):g(Xe,Be)}return cs}var Wi=_s(!0),fi=_s(!1),os=Ko(null),bs=null,si=null,sn=null;function xn(){sn=si=bs=null}function ai(u){var h=os.current;An(os),u._currentValue=h}function vn(u,h,g){for(;u!==null;){var E=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,E!==null&&(E.childLanes|=h)):E!==null&&(E.childLanes&h)!==h&&(E.childLanes|=h),u===g)break;u=u.return}}function Ei(u,h){bs=u,sn=si=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&h)!==0&&(Co=!0),u.firstContext=null)}function Si(u){var h=u._currentValue;if(sn!==u)if(u={context:u,memoizedValue:h,next:null},si===null){if(bs===null)throw Error(r(308));si=u,bs.dependencies={lanes:0,firstContext:u}}else si=si.next=u;return h}var Mn=null;function Xs(u){Mn===null?Mn=[u]:Mn.push(u)}function Fn(u,h,g,E){var R=h.interleaved;return R===null?(g.next=g,Xs(h)):(g.next=R.next,R.next=g),h.interleaved=g,jn(u,E)}function jn(u,h){u.lanes|=h;var g=u.alternate;for(g!==null&&(g.lanes|=h),g=u,u=u.return;u!==null;)u.childLanes|=h,g=u.alternate,g!==null&&(g.childLanes|=h),g=u,u=u.return;return g.tag===3?g.stateNode:null}var qi=!1;function Bs(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function za(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Oi(u,h){return{eventTime:u,lane:h,tag:0,payload:null,callback:null,next:null}}function Mi(u,h,g){var E=u.updateQueue;if(E===null)return null;if(E=E.shared,(yn&2)!==0){var R=E.pending;return R===null?h.next=h:(h.next=R.next,R.next=h),E.pending=h,jn(u,g)}return R=E.interleaved,R===null?(h.next=h,Xs(E)):(h.next=R.next,R.next=h),E.interleaved=h,jn(u,g)}function Ys(u,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194240)!==0)){var E=h.lanes;E&=u.pendingLanes,g|=E,h.lanes=g,Vo(u,g)}}function Bn(u,h){var g=u.updateQueue,E=u.alternate;if(E!==null&&(E=E.updateQueue,g===E)){var R=null,z=null;if(g=g.firstBaseUpdate,g!==null){do{var ne={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};z===null?R=z=ne:z=z.next=ne,g=g.next}while(g!==null);z===null?R=z=h:z=z.next=h}else R=z=h;g={baseState:E.baseState,firstBaseUpdate:R,lastBaseUpdate:z,shared:E.shared,effects:E.effects},u.updateQueue=g;return}u=g.lastBaseUpdate,u===null?g.firstBaseUpdate=h:u.next=h,g.lastBaseUpdate=h}function Qs(u,h,g,E){var R=u.updateQueue;qi=!1;var z=R.firstBaseUpdate,ne=R.lastBaseUpdate,Pe=R.shared.pending;if(Pe!==null){R.shared.pending=null;var Oe=Pe,rt=Oe.next;Oe.next=null,ne===null?z=rt:ne.next=rt,ne=Oe;var Ct=u.alternate;Ct!==null&&(Ct=Ct.updateQueue,Pe=Ct.lastBaseUpdate,Pe!==ne&&(Pe===null?Ct.firstBaseUpdate=rt:Pe.next=rt,Ct.lastBaseUpdate=Oe))}if(z!==null){var Pt=R.baseState;ne=0,Ct=rt=Oe=null,Pe=z;do{var At=Pe.lane,Kt=Pe.eventTime;if((E&At)===At){Ct!==null&&(Ct=Ct.next={eventTime:Kt,lane:0,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null});e:{var ar=u,fr=Pe;switch(At=h,Kt=g,fr.tag){case 1:if(ar=fr.payload,typeof ar=="function"){Pt=ar.call(Kt,Pt,At);break e}Pt=ar;break e;case 3:ar.flags=ar.flags&-65537|128;case 0:if(ar=fr.payload,At=typeof ar=="function"?ar.call(Kt,Pt,At):ar,At==null)break e;Pt=ue({},Pt,At);break e;case 2:qi=!0}}Pe.callback!==null&&Pe.lane!==0&&(u.flags|=64,At=R.effects,At===null?R.effects=[Pe]:At.push(Pe))}else Kt={eventTime:Kt,lane:At,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null},Ct===null?(rt=Ct=Kt,Oe=Pt):Ct=Ct.next=Kt,ne|=At;if(Pe=Pe.next,Pe===null){if(Pe=R.shared.pending,Pe===null)break;At=Pe,Pe=At.next,At.next=null,R.lastBaseUpdate=At,R.shared.pending=null}}while(!0);if(Ct===null&&(Oe=Pt),R.baseState=Oe,R.firstBaseUpdate=rt,R.lastBaseUpdate=Ct,h=R.shared.interleaved,h!==null){R=h;do ne|=R.lane,R=R.next;while(R!==h)}else z===null&&(R.shared.lanes=0);qh|=ne,u.lanes=ne,u.memoizedState=Pt}}function Ao(u,h,g){if(u=h.effects,h.effects=null,u!==null)for(h=0;h<u.length;h++){var E=u[h],R=E.callback;if(R!==null){if(E.callback=null,E=g,typeof R!="function")throw Error(r(191,R));R.call(E)}}}var Xo={},Es=Ko(Xo),ji=Ko(Xo),Cc=Ko(Xo);function Yl(u){if(u===Xo)throw Error(r(174));return u}function xf(u,h){switch(Rn(Cc,h),Rn(ji,u),Rn(Es,Xo),u=h.nodeType,u){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:Mt(null,"");break;default:u=u===8?h.parentNode:h,h=u.namespaceURI||null,u=u.tagName,h=Mt(h,u)}An(Es),Rn(Es,h)}function _l(){An(Es),An(ji),An(Cc)}function Xg(u){Yl(Cc.current);var h=Yl(Es.current),g=Mt(h,u.type);h!==g&&(Rn(ji,u),Rn(Es,g))}function E1(u){ji.current===u&&(An(Es),An(ji))}var ei=Ko(0);function Yo(u){for(var h=u;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var S1=[];function k1(){for(var u=0;u<S1.length;u++)S1[u]._workInProgressVersionPrimary=null;S1.length=0}var h0=B.ReactCurrentDispatcher,d0=B.ReactCurrentBatchConfig,bl=0,oi=null,Gi=null,Bi=null,vf=!1,Ql=!1,yf=0,Iy=0;function ls(){throw Error(r(321))}function p0(u,h){if(h===null)return!1;for(var g=0;g<h.length&&g<u.length;g++)if(!as(u[g],h[g]))return!1;return!0}function $h(u,h,g,E,R,z){if(bl=z,oi=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,h0.current=u===null||u.memoizedState===null?nL:iL,u=g(E,R),Ql){z=0;do{if(Ql=!1,yf=0,25<=z)throw Error(r(301));z+=1,Bi=Gi=null,h.updateQueue=null,h0.current=sL,u=g(E,R)}while(Ql)}if(h0.current=ex,h=Gi!==null&&Gi.next!==null,bl=0,Bi=Gi=oi=null,vf=!1,h)throw Error(r(300));return u}function El(){var u=yf!==0;return yf=0,u}function Qo(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bi===null?oi.memoizedState=Bi=u:Bi=Bi.next=u,Bi}function uo(){if(Gi===null){var u=oi.alternate;u=u!==null?u.memoizedState:null}else u=Gi.next;var h=Bi===null?oi.memoizedState:Bi.next;if(h!==null)Bi=h,Gi=u;else{if(u===null)throw Error(r(310));Gi=u,u={memoizedState:Gi.memoizedState,baseState:Gi.baseState,baseQueue:Gi.baseQueue,queue:Gi.queue,next:null},Bi===null?oi.memoizedState=Bi=u:Bi=Bi.next=u}return Bi}function Hh(u,h){return typeof h=="function"?h(u):h}function m0(u){var h=uo(),g=h.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=u;var E=Gi,R=E.baseQueue,z=g.pending;if(z!==null){if(R!==null){var ne=R.next;R.next=z.next,z.next=ne}E.baseQueue=R=z,g.pending=null}if(R!==null){z=R.next,E=E.baseState;var Pe=ne=null,Oe=null,rt=z;do{var Ct=rt.lane;if((bl&Ct)===Ct)Oe!==null&&(Oe=Oe.next={lane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),E=rt.hasEagerState?rt.eagerState:u(E,rt.action);else{var Pt={lane:Ct,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null};Oe===null?(Pe=Oe=Pt,ne=E):Oe=Oe.next=Pt,oi.lanes|=Ct,qh|=Ct}rt=rt.next}while(rt!==null&&rt!==z);Oe===null?ne=E:Oe.next=Pe,as(E,h.memoizedState)||(Co=!0),h.memoizedState=E,h.baseState=ne,h.baseQueue=Oe,g.lastRenderedState=E}if(u=g.interleaved,u!==null){R=u;do z=R.lane,oi.lanes|=z,qh|=z,R=R.next;while(R!==u)}else R===null&&(g.lanes=0);return[h.memoizedState,g.dispatch]}function Ic(u){var h=uo(),g=h.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=u;var E=g.dispatch,R=g.pending,z=h.memoizedState;if(R!==null){g.pending=null;var ne=R=R.next;do z=u(z,ne.action),ne=ne.next;while(ne!==R);as(z,h.memoizedState)||(Co=!0),h.memoizedState=z,h.baseQueue===null&&(h.baseState=z),g.lastRenderedState=z}return[z,E]}function Yg(){}function T1(u,h){var g=oi,E=uo(),R=h(),z=!as(E.memoizedState,R);if(z&&(E.memoizedState=R,Co=!0),E=E.queue,v0(Jg.bind(null,g,E,u),[u]),E.getSnapshot!==h||z||Bi!==null&&Bi.memoizedState.tag&1){if(g.flags|=2048,fo(9,A1.bind(null,g,E,R,h),void 0,null),Js===null)throw Error(r(349));(bl&30)!==0||Qg(g,h,R)}return R}function Qg(u,h,g){u.flags|=16384,u={getSnapshot:h,value:g},h=oi.updateQueue,h===null?(h={lastEffect:null,stores:null},oi.updateQueue=h,h.stores=[u]):(g=h.stores,g===null?h.stores=[u]:g.push(u))}function A1(u,h,g,E){h.value=g,h.getSnapshot=E,wf(h)&&g0(u)}function Jg(u,h,g){return g(function(){wf(h)&&g0(u)})}function wf(u){var h=u.getSnapshot;u=u.value;try{var g=h();return!as(u,g)}catch{return!0}}function g0(u){var h=jn(u,1);h!==null&&rc(h,u,1,-1)}function Wh(u){var h=Qo();return typeof u=="function"&&(u=u()),h.memoizedState=h.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hh,lastRenderedState:u},h.queue=u,u=u.dispatch=rL.bind(null,oi,u),[h.memoizedState,u]}function fo(u,h,g,E){return u={tag:u,create:h,destroy:g,deps:E,next:null},h=oi.updateQueue,h===null?(h={lastEffect:null,stores:null},oi.updateQueue=h,h.lastEffect=u.next=u):(g=h.lastEffect,g===null?h.lastEffect=u.next=u:(E=g.next,g.next=u,u.next=E,h.lastEffect=u)),u}function Jl(){return uo().memoizedState}function Jo(u,h,g,E){var R=Qo();oi.flags|=u,R.memoizedState=fo(1|h,g,void 0,E===void 0?null:E)}function bu(u,h,g,E){var R=uo();E=E===void 0?null:E;var z=void 0;if(Gi!==null){var ne=Gi.memoizedState;if(z=ne.destroy,E!==null&&p0(E,ne.deps)){R.memoizedState=fo(h,g,z,E);return}}oi.flags|=u,R.memoizedState=fo(1|h,g,z,E)}function x0(u,h){return Jo(8390656,8,u,h)}function v0(u,h){return bu(2048,8,u,h)}function Zg(u,h){return bu(4,2,u,h)}function y0(u,h){return bu(4,4,u,h)}function w0(u,h){if(typeof h=="function")return u=u(),h(u),function(){h(null)};if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function A3(u,h,g){return g=g!=null?g.concat([u]):null,bu(4,4,w0.bind(null,h,u),g)}function Ny(){}function C3(u,h){var g=uo();h=h===void 0?null:h;var E=g.memoizedState;return E!==null&&h!==null&&p0(h,E[1])?E[0]:(g.memoizedState=[u,h],u)}function I3(u,h){var g=uo();h=h===void 0?null:h;var E=g.memoizedState;return E!==null&&h!==null&&p0(h,E[1])?E[0]:(u=u(),g.memoizedState=[u,h],u)}function N3(u,h,g){return(bl&21)===0?(u.baseState&&(u.baseState=!1,Co=!0),u.memoizedState=g):(as(g,h)||(g=$l(),oi.lanes|=g,qh|=g,u.baseState=!0),h)}function eL(u,h){var g=Wr;Wr=g!==0&&4>g?g:4,u(!0);var E=d0.transition;d0.transition={};try{u(!1),h()}finally{Wr=g,d0.transition=E}}function P3(){return uo().memoizedState}function tL(u,h,g){var E=Sf(u);if(g={lane:E,action:g,hasEagerState:!1,eagerState:null,next:null},R3(u))F3(h,g);else if(g=Fn(u,h,g,E),g!==null){var R=po();rc(g,u,E,R),L3(g,h,E)}}function rL(u,h,g){var E=Sf(u),R={lane:E,action:g,hasEagerState:!1,eagerState:null,next:null};if(R3(u))F3(h,R);else{var z=u.alternate;if(u.lanes===0&&(z===null||z.lanes===0)&&(z=h.lastRenderedReducer,z!==null))try{var ne=h.lastRenderedState,Pe=z(ne,g);if(R.hasEagerState=!0,R.eagerState=Pe,as(Pe,ne)){var Oe=h.interleaved;Oe===null?(R.next=R,Xs(h)):(R.next=Oe.next,Oe.next=R),h.interleaved=R;return}}catch{}finally{}g=Fn(u,h,R,E),g!==null&&(R=po(),rc(g,u,E,R),L3(g,h,E))}}function R3(u){var h=u.alternate;return u===oi||h!==null&&h===oi}function F3(u,h){Ql=vf=!0;var g=u.pending;g===null?h.next=h:(h.next=g.next,g.next=h),u.pending=h}function L3(u,h,g){if((g&4194240)!==0){var E=h.lanes;E&=u.pendingLanes,g|=E,h.lanes=g,Vo(u,g)}}var ex={readContext:Si,useCallback:ls,useContext:ls,useEffect:ls,useImperativeHandle:ls,useInsertionEffect:ls,useLayoutEffect:ls,useMemo:ls,useReducer:ls,useRef:ls,useState:ls,useDebugValue:ls,useDeferredValue:ls,useTransition:ls,useMutableSource:ls,useSyncExternalStore:ls,useId:ls,unstable_isNewReconciler:!1},nL={readContext:Si,useCallback:function(u,h){return Qo().memoizedState=[u,h===void 0?null:h],u},useContext:Si,useEffect:x0,useImperativeHandle:function(u,h,g){return g=g!=null?g.concat([u]):null,Jo(4194308,4,w0.bind(null,h,u),g)},useLayoutEffect:function(u,h){return Jo(4194308,4,u,h)},useInsertionEffect:function(u,h){return Jo(4,2,u,h)},useMemo:function(u,h){var g=Qo();return h=h===void 0?null:h,u=u(),g.memoizedState=[u,h],u},useReducer:function(u,h,g){var E=Qo();return h=g!==void 0?g(h):h,E.memoizedState=E.baseState=h,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:h},E.queue=u,u=u.dispatch=tL.bind(null,oi,u),[E.memoizedState,u]},useRef:function(u){var h=Qo();return u={current:u},h.memoizedState=u},useState:Wh,useDebugValue:Ny,useDeferredValue:function(u){return Qo().memoizedState=u},useTransition:function(){var u=Wh(!1),h=u[0];return u=eL.bind(null,u[1]),Qo().memoizedState=u,[h,u]},useMutableSource:function(){},useSyncExternalStore:function(u,h,g){var E=oi,R=Qo();if(mt){if(g===void 0)throw Error(r(407));g=g()}else{if(g=h(),Js===null)throw Error(r(349));(bl&30)!==0||Qg(E,h,g)}R.memoizedState=g;var z={value:g,getSnapshot:h};return R.queue=z,x0(Jg.bind(null,E,z,u),[u]),E.flags|=2048,fo(9,A1.bind(null,E,z,g,h),void 0,null),g},useId:function(){var u=Qo(),h=Js.identifierPrefix;if(mt){var g=ke,E=qe;g=(E&~(1<<32-En(E)-1)).toString(32)+g,h=":"+h+"R"+g,g=yf++,0<g&&(h+="H"+g.toString(32)),h+=":"}else g=Iy++,h=":"+h+"r"+g.toString(32)+":";return u.memoizedState=h},unstable_isNewReconciler:!1},iL={readContext:Si,useCallback:C3,useContext:Si,useEffect:v0,useImperativeHandle:A3,useInsertionEffect:Zg,useLayoutEffect:y0,useMemo:I3,useReducer:m0,useRef:Jl,useState:function(){return m0(Hh)},useDebugValue:Ny,useDeferredValue:function(u){var h=uo();return N3(h,Gi.memoizedState,u)},useTransition:function(){var u=m0(Hh)[0],h=uo().memoizedState;return[u,h]},useMutableSource:Yg,useSyncExternalStore:T1,useId:P3,unstable_isNewReconciler:!1},sL={readContext:Si,useCallback:C3,useContext:Si,useEffect:v0,useImperativeHandle:A3,useInsertionEffect:Zg,useLayoutEffect:y0,useMemo:I3,useReducer:Ic,useRef:Jl,useState:function(){return Ic(Hh)},useDebugValue:Ny,useDeferredValue:function(u){var h=uo();return Gi===null?h.memoizedState=u:N3(h,Gi.memoizedState,u)},useTransition:function(){var u=Ic(Hh)[0],h=uo().memoizedState;return[u,h]},useMutableSource:Yg,useSyncExternalStore:T1,useId:P3,unstable_isNewReconciler:!1};function Zl(u,h){if(u&&u.defaultProps){h=ue({},h),u=u.defaultProps;for(var g in u)h[g]===void 0&&(h[g]=u[g]);return h}return h}function Py(u,h,g,E){h=u.memoizedState,g=g(E,h),g=g==null?h:ue({},h,g),u.memoizedState=g,u.lanes===0&&(u.updateQueue.baseState=g)}var tx={isMounted:function(u){return(u=u._reactInternals)?Ie(u)===u:!1},enqueueSetState:function(u,h,g){u=u._reactInternals;var E=po(),R=Sf(u),z=Oi(E,R);z.payload=h,g!=null&&(z.callback=g),h=Mi(u,z,R),h!==null&&(rc(h,u,R,E),Ys(h,u,R))},enqueueReplaceState:function(u,h,g){u=u._reactInternals;var E=po(),R=Sf(u),z=Oi(E,R);z.tag=1,z.payload=h,g!=null&&(z.callback=g),h=Mi(u,z,R),h!==null&&(rc(h,u,R,E),Ys(h,u,R))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var g=po(),E=Sf(u),R=Oi(g,E);R.tag=2,h!=null&&(R.callback=h),h=Mi(u,R,E),h!==null&&(rc(h,u,E,g),Ys(h,u,E))}};function D3(u,h,g,E,R,z,ne){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(E,z,ne):h.prototype&&h.prototype.isPureReactComponent?!vl(g,E)||!vl(R,z):!0}function O3(u,h,g){var E=!1,R=Ac,z=h.contextType;return typeof z=="object"&&z!==null?z=Si(z):(R=Ua(h)?wu:js.current,E=h.contextTypes,z=(E=E!=null)?gf(u,R):Ac),h=new h(g,z),u.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=tx,u.stateNode=h,h._reactInternals=u,E&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=R,u.__reactInternalMemoizedMaskedChildContext=z),h}function M3(u,h,g,E){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,E),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,E),h.state!==u&&tx.enqueueReplaceState(h,h.state,null)}function Ry(u,h,g,E){var R=u.stateNode;R.props=g,R.state=u.memoizedState,R.refs={},Bs(u);var z=h.contextType;typeof z=="object"&&z!==null?R.context=Si(z):(z=Ua(h)?wu:js.current,R.context=gf(u,z)),R.state=u.memoizedState,z=h.getDerivedStateFromProps,typeof z=="function"&&(Py(u,h,z,g),R.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(h=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),h!==R.state&&tx.enqueueReplaceState(R,R.state,null),Qs(u,g,R,E),R.state=u.memoizedState),typeof R.componentDidMount=="function"&&(u.flags|=4194308)}function _0(u,h){try{var g="",E=h;do g+=Y(E),E=E.return;while(E);var R=g}catch(z){R=`
Error generating stack: `+z.message+`
`+z.stack}return{value:u,source:h,stack:R,digest:null}}function Fy(u,h,g){return{value:u,source:null,stack:g??null,digest:h??null}}function Ly(u,h){try{console.error(h.value)}catch(g){setTimeout(function(){throw g})}}var aL=typeof WeakMap=="function"?WeakMap:Map;function j3(u,h,g){g=Oi(-1,g),g.tag=3,g.payload={element:null};var E=h.value;return g.callback=function(){lx||(lx=!0,Xy=E),Ly(u,h)},g}function B3(u,h,g){g=Oi(-1,g),g.tag=3;var E=u.type.getDerivedStateFromError;if(typeof E=="function"){var R=h.value;g.payload=function(){return E(R)},g.callback=function(){Ly(u,h)}}var z=u.stateNode;return z!==null&&typeof z.componentDidCatch=="function"&&(g.callback=function(){Ly(u,h),typeof E!="function"&&(bf===null?bf=new Set([this]):bf.add(this));var ne=h.stack;this.componentDidCatch(h.value,{componentStack:ne!==null?ne:""})}),g}function V3(u,h,g){var E=u.pingCache;if(E===null){E=u.pingCache=new aL;var R=new Set;E.set(h,R)}else R=E.get(h),R===void 0&&(R=new Set,E.set(h,R));R.has(g)||(R.add(g),u=wL.bind(null,u,h,g),h.then(u,u))}function U3(u){do{var h;if((h=u.tag===13)&&(h=u.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return u;u=u.return}while(u!==null);return null}function z3(u,h,g,E,R){return(u.mode&1)===0?(u===h?u.flags|=65536:(u.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(h=Oi(-1,1),h.tag=2,Mi(g,h,1))),g.lanes|=1),u):(u.flags|=65536,u.lanes=R,u)}var oL=B.ReactCurrentOwner,Co=!1;function ho(u,h,g,E){h.child=u===null?fi(h,null,g,E):Wi(h,u.child,g,E)}function $3(u,h,g,E,R){g=g.render;var z=h.ref;return Ei(h,R),E=$h(u,h,g,E,z,R),g=El(),u!==null&&!Co?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~R,Eu(u,h,R)):(mt&&g&&ct(h),h.flags|=1,ho(u,h,E,R),h.child)}function H3(u,h,g,E,R){if(u===null){var z=g.type;return typeof z=="function"&&!rw(z)&&z.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(h.tag=15,h.type=z,W3(u,h,z,E,R)):(u=px(g.type,null,E,h,h.mode,R),u.ref=h.ref,u.return=h,h.child=u)}if(z=u.child,(u.lanes&R)===0){var ne=z.memoizedProps;if(g=g.compare,g=g!==null?g:vl,g(ne,E)&&u.ref===h.ref)return Eu(u,h,R)}return h.flags|=1,u=Tf(z,E),u.ref=h.ref,u.return=h,h.child=u}function W3(u,h,g,E,R){if(u!==null){var z=u.memoizedProps;if(vl(z,E)&&u.ref===h.ref)if(Co=!1,h.pendingProps=E=z,(u.lanes&R)!==0)(u.flags&131072)!==0&&(Co=!0);else return h.lanes=u.lanes,Eu(u,h,R)}return Dy(u,h,g,E,R)}function q3(u,h,g){var E=h.pendingProps,R=E.children,z=u!==null?u.memoizedState:null;if(E.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rn(E0,Zo),Zo|=g;else{if((g&1073741824)===0)return u=z!==null?z.baseLanes|g:g,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:u,cachePool:null,transitions:null},h.updateQueue=null,Rn(E0,Zo),Zo|=u,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=z!==null?z.baseLanes:g,Rn(E0,Zo),Zo|=E}else z!==null?(E=z.baseLanes|g,h.memoizedState=null):E=g,Rn(E0,Zo),Zo|=E;return ho(u,h,R,g),h.child}function G3(u,h){var g=h.ref;(u===null&&g!==null||u!==null&&u.ref!==g)&&(h.flags|=512,h.flags|=2097152)}function Dy(u,h,g,E,R){var z=Ua(g)?wu:js.current;return z=gf(h,z),Ei(h,R),g=$h(u,h,g,E,z,R),E=El(),u!==null&&!Co?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~R,Eu(u,h,R)):(mt&&E&&ct(h),h.flags|=1,ho(u,h,g,R),h.child)}function K3(u,h,g,E,R){if(Ua(g)){var z=!0;_u(h)}else z=!1;if(Ei(h,R),h.stateNode===null)nx(u,h),O3(h,g,E),Ry(h,g,E,R),E=!0;else if(u===null){var ne=h.stateNode,Pe=h.memoizedProps;ne.props=Pe;var Oe=ne.context,rt=g.contextType;typeof rt=="object"&&rt!==null?rt=Si(rt):(rt=Ua(g)?wu:js.current,rt=gf(h,rt));var Ct=g.getDerivedStateFromProps,Pt=typeof Ct=="function"||typeof ne.getSnapshotBeforeUpdate=="function";Pt||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(Pe!==E||Oe!==rt)&&M3(h,ne,E,rt),qi=!1;var At=h.memoizedState;ne.state=At,Qs(h,E,ne,R),Oe=h.memoizedState,Pe!==E||At!==Oe||Va.current||qi?(typeof Ct=="function"&&(Py(h,g,Ct,E),Oe=h.memoizedState),(Pe=qi||D3(h,g,Pe,E,At,Oe,rt))?(Pt||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount()),typeof ne.componentDidMount=="function"&&(h.flags|=4194308)):(typeof ne.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=E,h.memoizedState=Oe),ne.props=E,ne.state=Oe,ne.context=rt,E=Pe):(typeof ne.componentDidMount=="function"&&(h.flags|=4194308),E=!1)}else{ne=h.stateNode,za(u,h),Pe=h.memoizedProps,rt=h.type===h.elementType?Pe:Zl(h.type,Pe),ne.props=rt,Pt=h.pendingProps,At=ne.context,Oe=g.contextType,typeof Oe=="object"&&Oe!==null?Oe=Si(Oe):(Oe=Ua(g)?wu:js.current,Oe=gf(h,Oe));var Kt=g.getDerivedStateFromProps;(Ct=typeof Kt=="function"||typeof ne.getSnapshotBeforeUpdate=="function")||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(Pe!==Pt||At!==Oe)&&M3(h,ne,E,Oe),qi=!1,At=h.memoizedState,ne.state=At,Qs(h,E,ne,R);var ar=h.memoizedState;Pe!==Pt||At!==ar||Va.current||qi?(typeof Kt=="function"&&(Py(h,g,Kt,E),ar=h.memoizedState),(rt=qi||D3(h,g,rt,E,At,ar,Oe)||!1)?(Ct||typeof ne.UNSAFE_componentWillUpdate!="function"&&typeof ne.componentWillUpdate!="function"||(typeof ne.componentWillUpdate=="function"&&ne.componentWillUpdate(E,ar,Oe),typeof ne.UNSAFE_componentWillUpdate=="function"&&ne.UNSAFE_componentWillUpdate(E,ar,Oe)),typeof ne.componentDidUpdate=="function"&&(h.flags|=4),typeof ne.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof ne.componentDidUpdate!="function"||Pe===u.memoizedProps&&At===u.memoizedState||(h.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||Pe===u.memoizedProps&&At===u.memoizedState||(h.flags|=1024),h.memoizedProps=E,h.memoizedState=ar),ne.props=E,ne.state=ar,ne.context=Oe,E=rt):(typeof ne.componentDidUpdate!="function"||Pe===u.memoizedProps&&At===u.memoizedState||(h.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||Pe===u.memoizedProps&&At===u.memoizedState||(h.flags|=1024),E=!1)}return Oy(u,h,g,E,z,R)}function Oy(u,h,g,E,R,z){G3(u,h);var ne=(h.flags&128)!==0;if(!E&&!ne)return R&&Kg(h,g,!1),Eu(u,h,z);E=h.stateNode,oL.current=h;var Pe=ne&&typeof g.getDerivedStateFromError!="function"?null:E.render();return h.flags|=1,u!==null&&ne?(h.child=Wi(h,u.child,null,z),h.child=Wi(h,null,Pe,z)):ho(u,h,Pe,z),h.memoizedState=E.state,R&&Kg(h,g,!0),h.child}function X3(u){var h=u.stateNode;h.pendingContext?Gg(u,h.pendingContext,h.pendingContext!==h.context):h.context&&Gg(u,h.context,!1),xf(u,h.containerInfo)}function Y3(u,h,g,E,R){return Zt(),zt(R),h.flags|=256,ho(u,h,g,E),h.child}var My={dehydrated:null,treeContext:null,retryLane:0};function jy(u){return{baseLanes:u,cachePool:null,transitions:null}}function Q3(u,h,g){var E=h.pendingProps,R=ei.current,z=!1,ne=(h.flags&128)!==0,Pe;if((Pe=ne)||(Pe=u!==null&&u.memoizedState===null?!1:(R&2)!==0),Pe?(z=!0,h.flags&=-129):(u===null||u.memoizedState!==null)&&(R|=1),Rn(ei,R&1),u===null)return ir(h),u=h.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((h.mode&1)===0?h.lanes=1:u.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(ne=E.children,u=E.fallback,z?(E=h.mode,z=h.child,ne={mode:"hidden",children:ne},(E&1)===0&&z!==null?(z.childLanes=0,z.pendingProps=ne):z=mx(ne,E,0,null),u=Yh(u,E,g,null),z.return=h,u.return=h,z.sibling=u,h.child=z,h.child.memoizedState=jy(g),h.memoizedState=My,u):By(h,ne));if(R=u.memoizedState,R!==null&&(Pe=R.dehydrated,Pe!==null))return lL(u,h,ne,E,Pe,R,g);if(z){z=E.fallback,ne=h.mode,R=u.child,Pe=R.sibling;var Oe={mode:"hidden",children:E.children};return(ne&1)===0&&h.child!==R?(E=h.child,E.childLanes=0,E.pendingProps=Oe,h.deletions=null):(E=Tf(R,Oe),E.subtreeFlags=R.subtreeFlags&14680064),Pe!==null?z=Tf(Pe,z):(z=Yh(z,ne,g,null),z.flags|=2),z.return=h,E.return=h,E.sibling=z,h.child=E,E=z,z=h.child,ne=u.child.memoizedState,ne=ne===null?jy(g):{baseLanes:ne.baseLanes|g,cachePool:null,transitions:ne.transitions},z.memoizedState=ne,z.childLanes=u.childLanes&~g,h.memoizedState=My,E}return z=u.child,u=z.sibling,E=Tf(z,{mode:"visible",children:E.children}),(h.mode&1)===0&&(E.lanes=g),E.return=h,E.sibling=null,u!==null&&(g=h.deletions,g===null?(h.deletions=[u],h.flags|=16):g.push(u)),h.child=E,h.memoizedState=null,E}function By(u,h){return h=mx({mode:"visible",children:h},u.mode,0,null),h.return=u,u.child=h}function rx(u,h,g,E){return E!==null&&zt(E),Wi(h,u.child,null,g),u=By(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function lL(u,h,g,E,R,z,ne){if(g)return h.flags&256?(h.flags&=-257,E=Fy(Error(r(422))),rx(u,h,ne,E)):h.memoizedState!==null?(h.child=u.child,h.flags|=128,null):(z=E.fallback,R=h.mode,E=mx({mode:"visible",children:E.children},R,0,null),z=Yh(z,R,ne,null),z.flags|=2,E.return=h,z.return=h,E.sibling=z,h.child=E,(h.mode&1)!==0&&Wi(h,u.child,null,ne),h.child.memoizedState=jy(ne),h.memoizedState=My,z);if((h.mode&1)===0)return rx(u,h,ne,null);if(R.data==="$!"){if(E=R.nextSibling&&R.nextSibling.dataset,E)var Pe=E.dgst;return E=Pe,z=Error(r(419)),E=Fy(z,E,void 0),rx(u,h,ne,E)}if(Pe=(ne&u.childLanes)!==0,Co||Pe){if(E=Js,E!==null){switch(ne&-ne){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}R=(R&(E.suspendedLanes|ne))!==0?0:R,R!==0&&R!==z.retryLane&&(z.retryLane=R,jn(u,R),rc(E,u,R,-1))}return tw(),E=Fy(Error(r(421))),rx(u,h,ne,E)}return R.data==="$?"?(h.flags|=128,h.child=u.child,h=_L.bind(null,u),R._reactRetry=h,null):(u=z.treeContext,lt=ga(R.nextSibling),at=h,mt=!0,gt=null,u!==null&&(ge[_e++]=qe,ge[_e++]=ke,ge[_e++]=De,qe=u.id,ke=u.overflow,De=h),h=By(h,E.children),h.flags|=4096,h)}function J3(u,h,g){u.lanes|=h;var E=u.alternate;E!==null&&(E.lanes|=h),vn(u.return,h,g)}function Vy(u,h,g,E,R){var z=u.memoizedState;z===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:E,tail:g,tailMode:R}:(z.isBackwards=h,z.rendering=null,z.renderingStartTime=0,z.last=E,z.tail=g,z.tailMode=R)}function Z3(u,h,g){var E=h.pendingProps,R=E.revealOrder,z=E.tail;if(ho(u,h,E.children,g),E=ei.current,(E&2)!==0)E=E&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&J3(u,g,h);else if(u.tag===19)J3(u,g,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}E&=1}if(Rn(ei,E),(h.mode&1)===0)h.memoizedState=null;else switch(R){case"forwards":for(g=h.child,R=null;g!==null;)u=g.alternate,u!==null&&Yo(u)===null&&(R=g),g=g.sibling;g=R,g===null?(R=h.child,h.child=null):(R=g.sibling,g.sibling=null),Vy(h,!1,R,g,z);break;case"backwards":for(g=null,R=h.child,h.child=null;R!==null;){if(u=R.alternate,u!==null&&Yo(u)===null){h.child=R;break}u=R.sibling,R.sibling=g,g=R,R=u}Vy(h,!0,g,null,z);break;case"together":Vy(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function nx(u,h){(h.mode&1)===0&&u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2)}function Eu(u,h,g){if(u!==null&&(h.dependencies=u.dependencies),qh|=h.lanes,(g&h.childLanes)===0)return null;if(u!==null&&h.child!==u.child)throw Error(r(153));if(h.child!==null){for(u=h.child,g=Tf(u,u.pendingProps),h.child=g,g.return=h;u.sibling!==null;)u=u.sibling,g=g.sibling=Tf(u,u.pendingProps),g.return=h;g.sibling=null}return h.child}function cL(u,h,g){switch(h.tag){case 3:X3(h),Zt();break;case 5:Xg(h);break;case 1:Ua(h.type)&&_u(h);break;case 4:xf(h,h.stateNode.containerInfo);break;case 10:var E=h.type._context,R=h.memoizedProps.value;Rn(os,E._currentValue),E._currentValue=R;break;case 13:if(E=h.memoizedState,E!==null)return E.dehydrated!==null?(Rn(ei,ei.current&1),h.flags|=128,null):(g&h.child.childLanes)!==0?Q3(u,h,g):(Rn(ei,ei.current&1),u=Eu(u,h,g),u!==null?u.sibling:null);Rn(ei,ei.current&1);break;case 19:if(E=(g&h.childLanes)!==0,(u.flags&128)!==0){if(E)return Z3(u,h,g);h.flags|=128}if(R=h.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),Rn(ei,ei.current),E)break;return null;case 22:case 23:return h.lanes=0,q3(u,h,g)}return Eu(u,h,g)}var eE,Uy,tE,rE;eE=function(u,h){for(var g=h.child;g!==null;){if(g.tag===5||g.tag===6)u.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Uy=function(){},tE=function(u,h,g,E){var R=u.memoizedProps;if(R!==E){u=h.stateNode,Yl(Es.current);var z=null;switch(g){case"input":R=Re(u,R),E=Re(u,E),z=[];break;case"select":R=ue({},R,{value:void 0}),E=ue({},E,{value:void 0}),z=[];break;case"textarea":R=ut(u,R),E=ut(u,E),z=[];break;default:typeof R.onClick!="function"&&typeof E.onClick=="function"&&(u.onclick=df)}rn(g,E);var ne;g=null;for(rt in R)if(!E.hasOwnProperty(rt)&&R.hasOwnProperty(rt)&&R[rt]!=null)if(rt==="style"){var Pe=R[rt];for(ne in Pe)Pe.hasOwnProperty(ne)&&(g||(g={}),g[ne]="")}else rt!=="dangerouslySetInnerHTML"&&rt!=="children"&&rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&rt!=="autoFocus"&&(i.hasOwnProperty(rt)?z||(z=[]):(z=z||[]).push(rt,null));for(rt in E){var Oe=E[rt];if(Pe=R?.[rt],E.hasOwnProperty(rt)&&Oe!==Pe&&(Oe!=null||Pe!=null))if(rt==="style")if(Pe){for(ne in Pe)!Pe.hasOwnProperty(ne)||Oe&&Oe.hasOwnProperty(ne)||(g||(g={}),g[ne]="");for(ne in Oe)Oe.hasOwnProperty(ne)&&Pe[ne]!==Oe[ne]&&(g||(g={}),g[ne]=Oe[ne])}else g||(z||(z=[]),z.push(rt,g)),g=Oe;else rt==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Pe=Pe?Pe.__html:void 0,Oe!=null&&Pe!==Oe&&(z=z||[]).push(rt,Oe)):rt==="children"?typeof Oe!="string"&&typeof Oe!="number"||(z=z||[]).push(rt,""+Oe):rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&(i.hasOwnProperty(rt)?(Oe!=null&&rt==="onScroll"&&On("scroll",u),z||Pe===Oe||(z=[])):(z=z||[]).push(rt,Oe))}g&&(z=z||[]).push("style",g);var rt=z;(h.updateQueue=rt)&&(h.flags|=4)}},rE=function(u,h,g,E){g!==E&&(h.flags|=4)};function C1(u,h){if(!mt)switch(u.tailMode){case"hidden":h=u.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?u.tail=null:g.sibling=null;break;case"collapsed":g=u.tail;for(var E=null;g!==null;)g.alternate!==null&&(E=g),g=g.sibling;E===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:E.sibling=null}}function $a(u){var h=u.alternate!==null&&u.alternate.child===u.child,g=0,E=0;if(h)for(var R=u.child;R!==null;)g|=R.lanes|R.childLanes,E|=R.subtreeFlags&14680064,E|=R.flags&14680064,R.return=u,R=R.sibling;else for(R=u.child;R!==null;)g|=R.lanes|R.childLanes,E|=R.subtreeFlags,E|=R.flags,R.return=u,R=R.sibling;return u.subtreeFlags|=E,u.childLanes=g,h}function uL(u,h,g){var E=h.pendingProps;switch(Ye(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $a(h),null;case 1:return Ua(h.type)&&f0(),$a(h),null;case 3:return E=h.stateNode,_l(),An(Va),An(js),k1(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(u===null||u.child===null)&&(bi(h)?h.flags|=4:u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,gt!==null&&(Jy(gt),gt=null))),Uy(u,h),$a(h),null;case 5:E1(h);var R=Yl(Cc.current);if(g=h.type,u!==null&&h.stateNode!=null)tE(u,h,g,E,R),u.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!E){if(h.stateNode===null)throw Error(r(166));return $a(h),null}if(u=Yl(Es.current),bi(h)){E=h.stateNode,g=h.type;var z=h.memoizedProps;switch(E[wl]=h,E[pf]=z,u=(h.mode&1)!==0,g){case"dialog":On("cancel",E),On("close",E);break;case"iframe":case"object":case"embed":On("load",E);break;case"video":case"audio":for(R=0;R<kc.length;R++)On(kc[R],E);break;case"source":On("error",E);break;case"img":case"image":case"link":On("error",E),On("load",E);break;case"details":On("toggle",E);break;case"input":fe(E,z),On("invalid",E);break;case"select":E._wrapperState={wasMultiple:!!z.multiple},On("invalid",E);break;case"textarea":pt(E,z),On("invalid",E)}rn(g,z),R=null;for(var ne in z)if(z.hasOwnProperty(ne)){var Pe=z[ne];ne==="children"?typeof Pe=="string"?E.textContent!==Pe&&(z.suppressHydrationWarning!==!0&&u0(E.textContent,Pe,u),R=["children",Pe]):typeof Pe=="number"&&E.textContent!==""+Pe&&(z.suppressHydrationWarning!==!0&&u0(E.textContent,Pe,u),R=["children",""+Pe]):i.hasOwnProperty(ne)&&Pe!=null&&ne==="onScroll"&&On("scroll",E)}switch(g){case"input":Fe(E),st(E,z,!0);break;case"textarea":Fe(E),yt(E);break;case"select":case"option":break;default:typeof z.onClick=="function"&&(E.onclick=df)}E=R,h.updateQueue=E,E!==null&&(h.flags|=4)}else{ne=R.nodeType===9?R:R.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=ht(g)),u==="http://www.w3.org/1999/xhtml"?g==="script"?(u=ne.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof E.is=="string"?u=ne.createElement(g,{is:E.is}):(u=ne.createElement(g),g==="select"&&(ne=u,E.multiple?ne.multiple=!0:E.size&&(ne.size=E.size))):u=ne.createElementNS(u,g),u[wl]=h,u[pf]=E,eE(u,h,!1,!1),h.stateNode=u;e:{switch(ne=Me(g,E),g){case"dialog":On("cancel",u),On("close",u),R=E;break;case"iframe":case"object":case"embed":On("load",u),R=E;break;case"video":case"audio":for(R=0;R<kc.length;R++)On(kc[R],u);R=E;break;case"source":On("error",u),R=E;break;case"img":case"image":case"link":On("error",u),On("load",u),R=E;break;case"details":On("toggle",u),R=E;break;case"input":fe(u,E),R=Re(u,E),On("invalid",u);break;case"option":R=E;break;case"select":u._wrapperState={wasMultiple:!!E.multiple},R=ue({},E,{value:void 0}),On("invalid",u);break;case"textarea":pt(u,E),R=ut(u,E),On("invalid",u);break;default:R=E}rn(g,R),Pe=R;for(z in Pe)if(Pe.hasOwnProperty(z)){var Oe=Pe[z];z==="style"?qt(u,Oe):z==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Oe!=null&&Ot(u,Oe)):z==="children"?typeof Oe=="string"?(g!=="textarea"||Oe!=="")&&wt(u,Oe):typeof Oe=="number"&&wt(u,""+Oe):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(i.hasOwnProperty(z)?Oe!=null&&z==="onScroll"&&On("scroll",u):Oe!=null&&N(u,z,Oe,ne))}switch(g){case"input":Fe(u),st(u,E,!1);break;case"textarea":Fe(u),yt(u);break;case"option":E.value!=null&&u.setAttribute("value",""+he(E.value));break;case"select":u.multiple=!!E.multiple,z=E.value,z!=null?Ue(u,!!E.multiple,z,!1):E.defaultValue!=null&&Ue(u,!!E.multiple,E.defaultValue,!0);break;default:typeof R.onClick=="function"&&(u.onclick=df)}switch(g){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}}E&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return $a(h),null;case 6:if(u&&h.stateNode!=null)rE(u,h,u.memoizedProps,E);else{if(typeof E!="string"&&h.stateNode===null)throw Error(r(166));if(g=Yl(Cc.current),Yl(Es.current),bi(h)){if(E=h.stateNode,g=h.memoizedProps,E[wl]=h,(z=E.nodeValue!==g)&&(u=at,u!==null))switch(u.tag){case 3:u0(E.nodeValue,g,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&u0(E.nodeValue,g,(u.mode&1)!==0)}z&&(h.flags|=4)}else E=(g.nodeType===9?g:g.ownerDocument).createTextNode(E),E[wl]=h,h.stateNode=E}return $a(h),null;case 13:if(An(ei),E=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(mt&&lt!==null&&(h.mode&1)!==0&&(h.flags&128)===0)Mr(),Zt(),h.flags|=98560,z=!1;else if(z=bi(h),E!==null&&E.dehydrated!==null){if(u===null){if(!z)throw Error(r(318));if(z=h.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(r(317));z[wl]=h}else Zt(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;$a(h),z=!1}else gt!==null&&(Jy(gt),gt=null),z=!0;if(!z)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=g,h):(E=E!==null,E!==(u!==null&&u.memoizedState!==null)&&E&&(h.child.flags|=8192,(h.mode&1)!==0&&(u===null||(ei.current&1)!==0?Vs===0&&(Vs=3):tw())),h.updateQueue!==null&&(h.flags|=4),$a(h),null);case 4:return _l(),Uy(u,h),u===null&&gu(h.stateNode.containerInfo),$a(h),null;case 10:return ai(h.type._context),$a(h),null;case 17:return Ua(h.type)&&f0(),$a(h),null;case 19:if(An(ei),z=h.memoizedState,z===null)return $a(h),null;if(E=(h.flags&128)!==0,ne=z.rendering,ne===null)if(E)C1(z,!1);else{if(Vs!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(ne=Yo(u),ne!==null){for(h.flags|=128,C1(z,!1),E=ne.updateQueue,E!==null&&(h.updateQueue=E,h.flags|=4),h.subtreeFlags=0,E=g,g=h.child;g!==null;)z=g,u=E,z.flags&=14680066,ne=z.alternate,ne===null?(z.childLanes=0,z.lanes=u,z.child=null,z.subtreeFlags=0,z.memoizedProps=null,z.memoizedState=null,z.updateQueue=null,z.dependencies=null,z.stateNode=null):(z.childLanes=ne.childLanes,z.lanes=ne.lanes,z.child=ne.child,z.subtreeFlags=0,z.deletions=null,z.memoizedProps=ne.memoizedProps,z.memoizedState=ne.memoizedState,z.updateQueue=ne.updateQueue,z.type=ne.type,u=ne.dependencies,z.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),g=g.sibling;return Rn(ei,ei.current&1|2),h.child}u=u.sibling}z.tail!==null&&Tt()>S0&&(h.flags|=128,E=!0,C1(z,!1),h.lanes=4194304)}else{if(!E)if(u=Yo(ne),u!==null){if(h.flags|=128,E=!0,g=u.updateQueue,g!==null&&(h.updateQueue=g,h.flags|=4),C1(z,!0),z.tail===null&&z.tailMode==="hidden"&&!ne.alternate&&!mt)return $a(h),null}else 2*Tt()-z.renderingStartTime>S0&&g!==1073741824&&(h.flags|=128,E=!0,C1(z,!1),h.lanes=4194304);z.isBackwards?(ne.sibling=h.child,h.child=ne):(g=z.last,g!==null?g.sibling=ne:h.child=ne,z.last=ne)}return z.tail!==null?(h=z.tail,z.rendering=h,z.tail=h.sibling,z.renderingStartTime=Tt(),h.sibling=null,g=ei.current,Rn(ei,E?g&1|2:g&1),h):($a(h),null);case 22:case 23:return ew(),E=h.memoizedState!==null,u!==null&&u.memoizedState!==null!==E&&(h.flags|=8192),E&&(h.mode&1)!==0?(Zo&1073741824)!==0&&($a(h),h.subtreeFlags&6&&(h.flags|=8192)):$a(h),null;case 24:return null;case 25:return null}throw Error(r(156,h.tag))}function fL(u,h){switch(Ye(h),h.tag){case 1:return Ua(h.type)&&f0(),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return _l(),An(Va),An(js),k1(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 5:return E1(h),null;case 13:if(An(ei),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(r(340));Zt()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return An(ei),null;case 4:return _l(),null;case 10:return ai(h.type._context),null;case 22:case 23:return ew(),null;case 24:return null;default:return null}}var ix=!1,Ha=!1,hL=typeof WeakSet=="function"?WeakSet:Set,rr=null;function b0(u,h){var g=u.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(E){Ki(u,h,E)}else g.current=null}function zy(u,h,g){try{g()}catch(E){Ki(u,h,E)}}var nE=!1;function dL(u,h){if(Vh=dl,u=c1(),i0(u)){if("selectionStart"in u)var g={start:u.selectionStart,end:u.selectionEnd};else e:{g=(g=u.ownerDocument)&&g.defaultView||window;var E=g.getSelection&&g.getSelection();if(E&&E.rangeCount!==0){g=E.anchorNode;var R=E.anchorOffset,z=E.focusNode;E=E.focusOffset;try{g.nodeType,z.nodeType}catch{g=null;break e}var ne=0,Pe=-1,Oe=-1,rt=0,Ct=0,Pt=u,At=null;t:for(;;){for(var Kt;Pt!==g||R!==0&&Pt.nodeType!==3||(Pe=ne+R),Pt!==z||E!==0&&Pt.nodeType!==3||(Oe=ne+E),Pt.nodeType===3&&(ne+=Pt.nodeValue.length),(Kt=Pt.firstChild)!==null;)At=Pt,Pt=Kt;for(;;){if(Pt===u)break t;if(At===g&&++rt===R&&(Pe=ne),At===z&&++Ct===E&&(Oe=ne),(Kt=Pt.nextSibling)!==null)break;Pt=At,At=Pt.parentNode}Pt=Kt}g=Pe===-1||Oe===-1?null:{start:Pe,end:Oe}}else g=null}g=g||{start:0,end:0}}else g=null;for(vu={focusedElem:u,selectionRange:g},dl=!1,rr=h;rr!==null;)if(h=rr,u=h.child,(h.subtreeFlags&1028)!==0&&u!==null)u.return=h,rr=u;else for(;rr!==null;){h=rr;try{var ar=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(ar!==null){var fr=ar.memoizedProps,cs=ar.memoizedState,Xe=h.stateNode,Be=Xe.getSnapshotBeforeUpdate(h.elementType===h.type?fr:Zl(h.type,fr),cs);Xe.__reactInternalSnapshotBeforeUpdate=Be}break;case 3:var Ze=h.stateNode.containerInfo;Ze.nodeType===1?Ze.textContent="":Ze.nodeType===9&&Ze.documentElement&&Ze.removeChild(Ze.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Dt){Ki(h,h.return,Dt)}if(u=h.sibling,u!==null){u.return=h.return,rr=u;break}rr=h.return}return ar=nE,nE=!1,ar}function I1(u,h,g){var E=h.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var R=E=E.next;do{if((R.tag&u)===u){var z=R.destroy;R.destroy=void 0,z!==void 0&&zy(h,g,z)}R=R.next}while(R!==E)}}function sx(u,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&u)===u){var E=g.create;g.destroy=E()}g=g.next}while(g!==h)}}function $y(u){var h=u.ref;if(h!==null){var g=u.stateNode;switch(u.tag){case 5:u=g;break;default:u=g}typeof h=="function"?h(u):h.current=u}}function iE(u){var h=u.alternate;h!==null&&(u.alternate=null,iE(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&(delete h[wl],delete h[pf],delete h[Ba],delete h[Ay],delete h[Cy])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function sE(u){return u.tag===5||u.tag===3||u.tag===4}function aE(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||sE(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Hy(u,h,g){var E=u.tag;if(E===5||E===6)u=u.stateNode,h?g.nodeType===8?g.parentNode.insertBefore(u,h):g.insertBefore(u,h):(g.nodeType===8?(h=g.parentNode,h.insertBefore(u,g)):(h=g,h.appendChild(u)),g=g._reactRootContainer,g!=null||h.onclick!==null||(h.onclick=df));else if(E!==4&&(u=u.child,u!==null))for(Hy(u,h,g),u=u.sibling;u!==null;)Hy(u,h,g),u=u.sibling}function Wy(u,h,g){var E=u.tag;if(E===5||E===6)u=u.stateNode,h?g.insertBefore(u,h):g.appendChild(u);else if(E!==4&&(u=u.child,u!==null))for(Wy(u,h,g),u=u.sibling;u!==null;)Wy(u,h,g),u=u.sibling}var xa=null,ec=!1;function _f(u,h,g){for(g=g.child;g!==null;)oE(u,h,g),g=g.sibling}function oE(u,h,g){if(ni&&typeof ni.onCommitFiberUnmount=="function")try{ni.onCommitFiberUnmount(Ws,g)}catch{}switch(g.tag){case 5:Ha||b0(g,h);case 6:var E=xa,R=ec;xa=null,_f(u,h,g),xa=E,ec=R,xa!==null&&(ec?(u=xa,g=g.stateNode,u.nodeType===8?u.parentNode.removeChild(g):u.removeChild(g)):xa.removeChild(g.stateNode));break;case 18:xa!==null&&(ec?(u=xa,g=g.stateNode,u.nodeType===8?w1(u.parentNode,g):u.nodeType===1&&w1(u,g),qs(u)):w1(xa,g.stateNode));break;case 4:E=xa,R=ec,xa=g.stateNode.containerInfo,ec=!0,_f(u,h,g),xa=E,ec=R;break;case 0:case 11:case 14:case 15:if(!Ha&&(E=g.updateQueue,E!==null&&(E=E.lastEffect,E!==null))){R=E=E.next;do{var z=R,ne=z.destroy;z=z.tag,ne!==void 0&&((z&2)!==0||(z&4)!==0)&&zy(g,h,ne),R=R.next}while(R!==E)}_f(u,h,g);break;case 1:if(!Ha&&(b0(g,h),E=g.stateNode,typeof E.componentWillUnmount=="function"))try{E.props=g.memoizedProps,E.state=g.memoizedState,E.componentWillUnmount()}catch(Pe){Ki(g,h,Pe)}_f(u,h,g);break;case 21:_f(u,h,g);break;case 22:g.mode&1?(Ha=(E=Ha)||g.memoizedState!==null,_f(u,h,g),Ha=E):_f(u,h,g);break;default:_f(u,h,g)}}function lE(u){var h=u.updateQueue;if(h!==null){u.updateQueue=null;var g=u.stateNode;g===null&&(g=u.stateNode=new hL),h.forEach(function(E){var R=bL.bind(null,u,E);g.has(E)||(g.add(E),E.then(R,R))})}}function tc(u,h){var g=h.deletions;if(g!==null)for(var E=0;E<g.length;E++){var R=g[E];try{var z=u,ne=h,Pe=ne;e:for(;Pe!==null;){switch(Pe.tag){case 5:xa=Pe.stateNode,ec=!1;break e;case 3:xa=Pe.stateNode.containerInfo,ec=!0;break e;case 4:xa=Pe.stateNode.containerInfo,ec=!0;break e}Pe=Pe.return}if(xa===null)throw Error(r(160));oE(z,ne,R),xa=null,ec=!1;var Oe=R.alternate;Oe!==null&&(Oe.return=null),R.return=null}catch(rt){Ki(R,h,rt)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)cE(h,u),h=h.sibling}function cE(u,h){var g=u.alternate,E=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(tc(h,u),Nc(u),E&4){try{I1(3,u,u.return),sx(3,u)}catch(fr){Ki(u,u.return,fr)}try{I1(5,u,u.return)}catch(fr){Ki(u,u.return,fr)}}break;case 1:tc(h,u),Nc(u),E&512&&g!==null&&b0(g,g.return);break;case 5:if(tc(h,u),Nc(u),E&512&&g!==null&&b0(g,g.return),u.flags&32){var R=u.stateNode;try{wt(R,"")}catch(fr){Ki(u,u.return,fr)}}if(E&4&&(R=u.stateNode,R!=null)){var z=u.memoizedProps,ne=g!==null?g.memoizedProps:z,Pe=u.type,Oe=u.updateQueue;if(u.updateQueue=null,Oe!==null)try{Pe==="input"&&z.type==="radio"&&z.name!=null&&ot(R,z),Me(Pe,ne);var rt=Me(Pe,z);for(ne=0;ne<Oe.length;ne+=2){var Ct=Oe[ne],Pt=Oe[ne+1];Ct==="style"?qt(R,Pt):Ct==="dangerouslySetInnerHTML"?Ot(R,Pt):Ct==="children"?wt(R,Pt):N(R,Ct,Pt,rt)}switch(Pe){case"input":et(R,z);break;case"textarea":xt(R,z);break;case"select":var At=R._wrapperState.wasMultiple;R._wrapperState.wasMultiple=!!z.multiple;var Kt=z.value;Kt!=null?Ue(R,!!z.multiple,Kt,!1):At!==!!z.multiple&&(z.defaultValue!=null?Ue(R,!!z.multiple,z.defaultValue,!0):Ue(R,!!z.multiple,z.multiple?[]:"",!1))}R[pf]=z}catch(fr){Ki(u,u.return,fr)}}break;case 6:if(tc(h,u),Nc(u),E&4){if(u.stateNode===null)throw Error(r(162));R=u.stateNode,z=u.memoizedProps;try{R.nodeValue=z}catch(fr){Ki(u,u.return,fr)}}break;case 3:if(tc(h,u),Nc(u),E&4&&g!==null&&g.memoizedState.isDehydrated)try{qs(h.containerInfo)}catch(fr){Ki(u,u.return,fr)}break;case 4:tc(h,u),Nc(u);break;case 13:tc(h,u),Nc(u),R=u.child,R.flags&8192&&(z=R.memoizedState!==null,R.stateNode.isHidden=z,!z||R.alternate!==null&&R.alternate.memoizedState!==null||(Ky=Tt())),E&4&&lE(u);break;case 22:if(Ct=g!==null&&g.memoizedState!==null,u.mode&1?(Ha=(rt=Ha)||Ct,tc(h,u),Ha=rt):tc(h,u),Nc(u),E&8192){if(rt=u.memoizedState!==null,(u.stateNode.isHidden=rt)&&!Ct&&(u.mode&1)!==0)for(rr=u,Ct=u.child;Ct!==null;){for(Pt=rr=Ct;rr!==null;){switch(At=rr,Kt=At.child,At.tag){case 0:case 11:case 14:case 15:I1(4,At,At.return);break;case 1:b0(At,At.return);var ar=At.stateNode;if(typeof ar.componentWillUnmount=="function"){E=At,g=At.return;try{h=E,ar.props=h.memoizedProps,ar.state=h.memoizedState,ar.componentWillUnmount()}catch(fr){Ki(E,g,fr)}}break;case 5:b0(At,At.return);break;case 22:if(At.memoizedState!==null){hE(Pt);continue}}Kt!==null?(Kt.return=At,rr=Kt):hE(Pt)}Ct=Ct.sibling}e:for(Ct=null,Pt=u;;){if(Pt.tag===5){if(Ct===null){Ct=Pt;try{R=Pt.stateNode,rt?(z=R.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none"):(Pe=Pt.stateNode,Oe=Pt.memoizedProps.style,ne=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null,Pe.style.display=er("display",ne))}catch(fr){Ki(u,u.return,fr)}}}else if(Pt.tag===6){if(Ct===null)try{Pt.stateNode.nodeValue=rt?"":Pt.memoizedProps}catch(fr){Ki(u,u.return,fr)}}else if((Pt.tag!==22&&Pt.tag!==23||Pt.memoizedState===null||Pt===u)&&Pt.child!==null){Pt.child.return=Pt,Pt=Pt.child;continue}if(Pt===u)break e;for(;Pt.sibling===null;){if(Pt.return===null||Pt.return===u)break e;Ct===Pt&&(Ct=null),Pt=Pt.return}Ct===Pt&&(Ct=null),Pt.sibling.return=Pt.return,Pt=Pt.sibling}}break;case 19:tc(h,u),Nc(u),E&4&&lE(u);break;case 21:break;default:tc(h,u),Nc(u)}}function Nc(u){var h=u.flags;if(h&2){try{e:{for(var g=u.return;g!==null;){if(sE(g)){var E=g;break e}g=g.return}throw Error(r(160))}switch(E.tag){case 5:var R=E.stateNode;E.flags&32&&(wt(R,""),E.flags&=-33);var z=aE(u);Wy(u,z,R);break;case 3:case 4:var ne=E.stateNode.containerInfo,Pe=aE(u);Hy(u,Pe,ne);break;default:throw Error(r(161))}}catch(Oe){Ki(u,u.return,Oe)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function pL(u,h,g){rr=u,uE(u)}function uE(u,h,g){for(var E=(u.mode&1)!==0;rr!==null;){var R=rr,z=R.child;if(R.tag===22&&E){var ne=R.memoizedState!==null||ix;if(!ne){var Pe=R.alternate,Oe=Pe!==null&&Pe.memoizedState!==null||Ha;Pe=ix;var rt=Ha;if(ix=ne,(Ha=Oe)&&!rt)for(rr=R;rr!==null;)ne=rr,Oe=ne.child,ne.tag===22&&ne.memoizedState!==null?dE(R):Oe!==null?(Oe.return=ne,rr=Oe):dE(R);for(;z!==null;)rr=z,uE(z),z=z.sibling;rr=R,ix=Pe,Ha=rt}fE(u)}else(R.subtreeFlags&8772)!==0&&z!==null?(z.return=R,rr=z):fE(u)}}function fE(u){for(;rr!==null;){var h=rr;if((h.flags&8772)!==0){var g=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:Ha||sx(5,h);break;case 1:var E=h.stateNode;if(h.flags&4&&!Ha)if(g===null)E.componentDidMount();else{var R=h.elementType===h.type?g.memoizedProps:Zl(h.type,g.memoizedProps);E.componentDidUpdate(R,g.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var z=h.updateQueue;z!==null&&Ao(h,z,E);break;case 3:var ne=h.updateQueue;if(ne!==null){if(g=null,h.child!==null)switch(h.child.tag){case 5:g=h.child.stateNode;break;case 1:g=h.child.stateNode}Ao(h,ne,g)}break;case 5:var Pe=h.stateNode;if(g===null&&h.flags&4){g=Pe;var Oe=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":Oe.autoFocus&&g.focus();break;case"img":Oe.src&&(g.src=Oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var rt=h.alternate;if(rt!==null){var Ct=rt.memoizedState;if(Ct!==null){var Pt=Ct.dehydrated;Pt!==null&&qs(Pt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Ha||h.flags&512&&$y(h)}catch(At){Ki(h,h.return,At)}}if(h===u){rr=null;break}if(g=h.sibling,g!==null){g.return=h.return,rr=g;break}rr=h.return}}function hE(u){for(;rr!==null;){var h=rr;if(h===u){rr=null;break}var g=h.sibling;if(g!==null){g.return=h.return,rr=g;break}rr=h.return}}function dE(u){for(;rr!==null;){var h=rr;try{switch(h.tag){case 0:case 11:case 15:var g=h.return;try{sx(4,h)}catch(Oe){Ki(h,g,Oe)}break;case 1:var E=h.stateNode;if(typeof E.componentDidMount=="function"){var R=h.return;try{E.componentDidMount()}catch(Oe){Ki(h,R,Oe)}}var z=h.return;try{$y(h)}catch(Oe){Ki(h,z,Oe)}break;case 5:var ne=h.return;try{$y(h)}catch(Oe){Ki(h,ne,Oe)}}}catch(Oe){Ki(h,h.return,Oe)}if(h===u){rr=null;break}var Pe=h.sibling;if(Pe!==null){Pe.return=h.return,rr=Pe;break}rr=h.return}}var mL=Math.ceil,ax=B.ReactCurrentDispatcher,qy=B.ReactCurrentOwner,Sl=B.ReactCurrentBatchConfig,yn=0,Js=null,Ss=null,va=0,Zo=0,E0=Ko(0),Vs=0,N1=null,qh=0,ox=0,Gy=0,P1=null,Io=null,Ky=0,S0=1/0,Su=null,lx=!1,Xy=null,bf=null,cx=!1,Ef=null,ux=0,R1=0,Yy=null,fx=-1,hx=0;function po(){return(yn&6)!==0?Tt():fx!==-1?fx:fx=Tt()}function Sf(u){return(u.mode&1)===0?1:(yn&2)!==0&&va!==0?va&-va:Di.transition!==null?(hx===0&&(hx=$l()),hx):(u=Wr,u!==0||(u=window.event,u=u===void 0?16:ml(u.type)),u)}function rc(u,h,g,E){if(50<R1)throw R1=0,Yy=null,Error(r(185));hl(u,g,E),((yn&2)===0||u!==Js)&&(u===Js&&((yn&2)===0&&(ox|=g),Vs===4&&kf(u,va)),No(u,E),g===1&&yn===0&&(h.mode&1)===0&&(S0=Tt()+500,zh&&q()))}function No(u,h){var g=u.callbackNode;Tn(u,h);var E=Ps(u,u===Js?va:0);if(E===0)g!==null&&Ft(g),u.callbackNode=null,u.callbackPriority=0;else if(h=E&-E,u.callbackPriority!==h){if(g!=null&&Ft(g),h===1)u.tag===0?j(mE.bind(null,u)):S(mE.bind(null,u)),ky(function(){(yn&6)===0&&q()}),g=null;else{switch(ca(E)){case 1:g=on;break;case 4:g=Dr;break;case 16:g=fn;break;case 536870912:g=Ca;break;default:g=fn}g=EE(g,pE.bind(null,u))}u.callbackPriority=h,u.callbackNode=g}}function pE(u,h){if(fx=-1,hx=0,(yn&6)!==0)throw Error(r(327));var g=u.callbackNode;if(k0()&&u.callbackNode!==g)return null;var E=Ps(u,u===Js?va:0);if(E===0)return null;if((E&30)!==0||(E&u.expiredLanes)!==0||h)h=dx(u,E);else{h=E;var R=yn;yn|=2;var z=xE();(Js!==u||va!==h)&&(Su=null,S0=Tt()+500,Kh(u,h));do try{vL();break}catch(Pe){gE(u,Pe)}while(!0);xn(),ax.current=z,yn=R,Ss!==null?h=0:(Js=null,va=0,h=Vs)}if(h!==0){if(h===2&&(R=Rs(u),R!==0&&(E=R,h=Qy(u,R))),h===1)throw g=N1,Kh(u,0),kf(u,E),No(u,Tt()),g;if(h===6)kf(u,E);else{if(R=u.current.alternate,(E&30)===0&&!gL(R)&&(h=dx(u,E),h===2&&(z=Rs(u),z!==0&&(E=z,h=Qy(u,z))),h===1))throw g=N1,Kh(u,0),kf(u,E),No(u,Tt()),g;switch(u.finishedWork=R,u.finishedLanes=E,h){case 0:case 1:throw Error(r(345));case 2:Xh(u,Io,Su);break;case 3:if(kf(u,E),(E&130023424)===E&&(h=Ky+500-Tt(),10<h)){if(Ps(u,0)!==0)break;if(R=u.suspendedLanes,(R&E)!==E){po(),u.pingedLanes|=u.suspendedLanes&R;break}u.timeoutHandle=y1(Xh.bind(null,u,Io,Su),h);break}Xh(u,Io,Su);break;case 4:if(kf(u,E),(E&4194240)===E)break;for(h=u.eventTimes,R=-1;0<E;){var ne=31-En(E);z=1<<ne,ne=h[ne],ne>R&&(R=ne),E&=~z}if(E=R,E=Tt()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*mL(E/1960))-E,10<E){u.timeoutHandle=y1(Xh.bind(null,u,Io,Su),E);break}Xh(u,Io,Su);break;case 5:Xh(u,Io,Su);break;default:throw Error(r(329))}}}return No(u,Tt()),u.callbackNode===g?pE.bind(null,u):null}function Qy(u,h){var g=P1;return u.current.memoizedState.isDehydrated&&(Kh(u,h).flags|=256),u=dx(u,h),u!==2&&(h=Io,Io=g,h!==null&&Jy(h)),u}function Jy(u){Io===null?Io=u:Io.push.apply(Io,u)}function gL(u){for(var h=u;;){if(h.flags&16384){var g=h.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var E=0;E<g.length;E++){var R=g[E],z=R.getSnapshot;R=R.value;try{if(!as(z(),R))return!1}catch{return!1}}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function kf(u,h){for(h&=~Gy,h&=~ox,u.suspendedLanes|=h,u.pingedLanes&=~h,u=u.expirationTimes;0<h;){var g=31-En(h),E=1<<g;u[g]=-1,h&=~E}}function mE(u){if((yn&6)!==0)throw Error(r(327));k0();var h=Ps(u,0);if((h&1)===0)return No(u,Tt()),null;var g=dx(u,h);if(u.tag!==0&&g===2){var E=Rs(u);E!==0&&(h=E,g=Qy(u,E))}if(g===1)throw g=N1,Kh(u,0),kf(u,h),No(u,Tt()),g;if(g===6)throw Error(r(345));return u.finishedWork=u.current.alternate,u.finishedLanes=h,Xh(u,Io,Su),No(u,Tt()),null}function Zy(u,h){var g=yn;yn|=1;try{return u(h)}finally{yn=g,yn===0&&(S0=Tt()+500,zh&&q())}}function Gh(u){Ef!==null&&Ef.tag===0&&(yn&6)===0&&k0();var h=yn;yn|=1;var g=Sl.transition,E=Wr;try{if(Sl.transition=null,Wr=1,u)return u()}finally{Wr=E,Sl.transition=g,yn=h,(yn&6)===0&&q()}}function ew(){Zo=E0.current,An(E0)}function Kh(u,h){u.finishedWork=null,u.finishedLanes=0;var g=u.timeoutHandle;if(g!==-1&&(u.timeoutHandle=-1,Wg(g)),Ss!==null)for(g=Ss.return;g!==null;){var E=g;switch(Ye(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&f0();break;case 3:_l(),An(Va),An(js),k1();break;case 5:E1(E);break;case 4:_l();break;case 13:An(ei);break;case 19:An(ei);break;case 10:ai(E.type._context);break;case 22:case 23:ew()}g=g.return}if(Js=u,Ss=u=Tf(u.current,null),va=Zo=h,Vs=0,N1=null,Gy=ox=qh=0,Io=P1=null,Mn!==null){for(h=0;h<Mn.length;h++)if(g=Mn[h],E=g.interleaved,E!==null){g.interleaved=null;var R=E.next,z=g.pending;if(z!==null){var ne=z.next;z.next=R,E.next=ne}g.pending=E}Mn=null}return u}function gE(u,h){do{var g=Ss;try{if(xn(),h0.current=ex,vf){for(var E=oi.memoizedState;E!==null;){var R=E.queue;R!==null&&(R.pending=null),E=E.next}vf=!1}if(bl=0,Bi=Gi=oi=null,Ql=!1,yf=0,qy.current=null,g===null||g.return===null){Vs=1,N1=h,Ss=null;break}e:{var z=u,ne=g.return,Pe=g,Oe=h;if(h=va,Pe.flags|=32768,Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var rt=Oe,Ct=Pe,Pt=Ct.tag;if((Ct.mode&1)===0&&(Pt===0||Pt===11||Pt===15)){var At=Ct.alternate;At?(Ct.updateQueue=At.updateQueue,Ct.memoizedState=At.memoizedState,Ct.lanes=At.lanes):(Ct.updateQueue=null,Ct.memoizedState=null)}var Kt=U3(ne);if(Kt!==null){Kt.flags&=-257,z3(Kt,ne,Pe,z,h),Kt.mode&1&&V3(z,rt,h),h=Kt,Oe=rt;var ar=h.updateQueue;if(ar===null){var fr=new Set;fr.add(Oe),h.updateQueue=fr}else ar.add(Oe);break e}else{if((h&1)===0){V3(z,rt,h),tw();break e}Oe=Error(r(426))}}else if(mt&&Pe.mode&1){var cs=U3(ne);if(cs!==null){(cs.flags&65536)===0&&(cs.flags|=256),z3(cs,ne,Pe,z,h),zt(_0(Oe,Pe));break e}}z=Oe=_0(Oe,Pe),Vs!==4&&(Vs=2),P1===null?P1=[z]:P1.push(z),z=ne;do{switch(z.tag){case 3:z.flags|=65536,h&=-h,z.lanes|=h;var Xe=j3(z,Oe,h);Bn(z,Xe);break e;case 1:Pe=Oe;var Be=z.type,Ze=z.stateNode;if((z.flags&128)===0&&(typeof Be.getDerivedStateFromError=="function"||Ze!==null&&typeof Ze.componentDidCatch=="function"&&(bf===null||!bf.has(Ze)))){z.flags|=65536,h&=-h,z.lanes|=h;var Dt=B3(z,Pe,h);Bn(z,Dt);break e}}z=z.return}while(z!==null)}yE(g)}catch(dr){h=dr,Ss===g&&g!==null&&(Ss=g=g.return);continue}break}while(!0)}function xE(){var u=ax.current;return ax.current=ex,u===null?ex:u}function tw(){(Vs===0||Vs===3||Vs===2)&&(Vs=4),Js===null||(qh&268435455)===0&&(ox&268435455)===0||kf(Js,va)}function dx(u,h){var g=yn;yn|=2;var E=xE();(Js!==u||va!==h)&&(Su=null,Kh(u,h));do try{xL();break}catch(R){gE(u,R)}while(!0);if(xn(),yn=g,ax.current=E,Ss!==null)throw Error(r(261));return Js=null,va=0,Vs}function xL(){for(;Ss!==null;)vE(Ss)}function vL(){for(;Ss!==null&&!Ht();)vE(Ss)}function vE(u){var h=bE(u.alternate,u,Zo);u.memoizedProps=u.pendingProps,h===null?yE(u):Ss=h,qy.current=null}function yE(u){var h=u;do{var g=h.alternate;if(u=h.return,(h.flags&32768)===0){if(g=uL(g,h,Zo),g!==null){Ss=g;return}}else{if(g=fL(g,h),g!==null){g.flags&=32767,Ss=g;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Vs=6,Ss=null;return}}if(h=h.sibling,h!==null){Ss=h;return}Ss=h=u}while(h!==null);Vs===0&&(Vs=5)}function Xh(u,h,g){var E=Wr,R=Sl.transition;try{Sl.transition=null,Wr=1,yL(u,h,g,E)}finally{Sl.transition=R,Wr=E}return null}function yL(u,h,g,E){do k0();while(Ef!==null);if((yn&6)!==0)throw Error(r(327));g=u.finishedWork;var R=u.finishedLanes;if(g===null)return null;if(u.finishedWork=null,u.finishedLanes=0,g===u.current)throw Error(r(177));u.callbackNode=null,u.callbackPriority=0;var z=g.lanes|g.childLanes;if(Yr(u,z),u===Js&&(Ss=Js=null,va=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||cx||(cx=!0,EE(fn,function(){return k0(),null})),z=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||z){z=Sl.transition,Sl.transition=null;var ne=Wr;Wr=1;var Pe=yn;yn|=4,qy.current=null,dL(u,g),cE(g,u),Vg(vu),dl=!!Vh,vu=Vh=null,u.current=g,pL(g),Rt(),yn=Pe,Wr=ne,Sl.transition=z}else u.current=g;if(cx&&(cx=!1,Ef=u,ux=R),z=u.pendingLanes,z===0&&(bf=null),Bo(g.stateNode),No(u,Tt()),h!==null)for(E=u.onRecoverableError,g=0;g<h.length;g++)R=h[g],E(R.value,{componentStack:R.stack,digest:R.digest});if(lx)throw lx=!1,u=Xy,Xy=null,u;return(ux&1)!==0&&u.tag!==0&&k0(),z=u.pendingLanes,(z&1)!==0?u===Yy?R1++:(R1=0,Yy=u):R1=0,q(),null}function k0(){if(Ef!==null){var u=ca(ux),h=Sl.transition,g=Wr;try{if(Sl.transition=null,Wr=16>u?16:u,Ef===null)var E=!1;else{if(u=Ef,Ef=null,ux=0,(yn&6)!==0)throw Error(r(331));var R=yn;for(yn|=4,rr=u.current;rr!==null;){var z=rr,ne=z.child;if((rr.flags&16)!==0){var Pe=z.deletions;if(Pe!==null){for(var Oe=0;Oe<Pe.length;Oe++){var rt=Pe[Oe];for(rr=rt;rr!==null;){var Ct=rr;switch(Ct.tag){case 0:case 11:case 15:I1(8,Ct,z)}var Pt=Ct.child;if(Pt!==null)Pt.return=Ct,rr=Pt;else for(;rr!==null;){Ct=rr;var At=Ct.sibling,Kt=Ct.return;if(iE(Ct),Ct===rt){rr=null;break}if(At!==null){At.return=Kt,rr=At;break}rr=Kt}}}var ar=z.alternate;if(ar!==null){var fr=ar.child;if(fr!==null){ar.child=null;do{var cs=fr.sibling;fr.sibling=null,fr=cs}while(fr!==null)}}rr=z}}if((z.subtreeFlags&2064)!==0&&ne!==null)ne.return=z,rr=ne;else e:for(;rr!==null;){if(z=rr,(z.flags&2048)!==0)switch(z.tag){case 0:case 11:case 15:I1(9,z,z.return)}var Xe=z.sibling;if(Xe!==null){Xe.return=z.return,rr=Xe;break e}rr=z.return}}var Be=u.current;for(rr=Be;rr!==null;){ne=rr;var Ze=ne.child;if((ne.subtreeFlags&2064)!==0&&Ze!==null)Ze.return=ne,rr=Ze;else e:for(ne=Be;rr!==null;){if(Pe=rr,(Pe.flags&2048)!==0)try{switch(Pe.tag){case 0:case 11:case 15:sx(9,Pe)}}catch(dr){Ki(Pe,Pe.return,dr)}if(Pe===ne){rr=null;break e}var Dt=Pe.sibling;if(Dt!==null){Dt.return=Pe.return,rr=Dt;break e}rr=Pe.return}}if(yn=R,q(),ni&&typeof ni.onPostCommitFiberRoot=="function")try{ni.onPostCommitFiberRoot(Ws,u)}catch{}E=!0}return E}finally{Wr=g,Sl.transition=h}}return!1}function wE(u,h,g){h=_0(g,h),h=j3(u,h,1),u=Mi(u,h,1),h=po(),u!==null&&(hl(u,1,h),No(u,h))}function Ki(u,h,g){if(u.tag===3)wE(u,u,g);else for(;h!==null;){if(h.tag===3){wE(h,u,g);break}else if(h.tag===1){var E=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(bf===null||!bf.has(E))){u=_0(g,u),u=B3(h,u,1),h=Mi(h,u,1),u=po(),h!==null&&(hl(h,1,u),No(h,u));break}}h=h.return}}function wL(u,h,g){var E=u.pingCache;E!==null&&E.delete(h),h=po(),u.pingedLanes|=u.suspendedLanes&g,Js===u&&(va&g)===g&&(Vs===4||Vs===3&&(va&130023424)===va&&500>Tt()-Ky?Kh(u,0):Gy|=g),No(u,h)}function _E(u,h){h===0&&((u.mode&1)===0?h=1:(h=Ia,Ia<<=1,(Ia&130023424)===0&&(Ia=4194304)));var g=po();u=jn(u,h),u!==null&&(hl(u,h,g),No(u,g))}function _L(u){var h=u.memoizedState,g=0;h!==null&&(g=h.retryLane),_E(u,g)}function bL(u,h){var g=0;switch(u.tag){case 13:var E=u.stateNode,R=u.memoizedState;R!==null&&(g=R.retryLane);break;case 19:E=u.stateNode;break;default:throw Error(r(314))}E!==null&&E.delete(h),_E(u,g)}var bE;bE=function(u,h,g){if(u!==null)if(u.memoizedProps!==h.pendingProps||Va.current)Co=!0;else{if((u.lanes&g)===0&&(h.flags&128)===0)return Co=!1,cL(u,h,g);Co=(u.flags&131072)!==0}else Co=!1,mt&&(h.flags&1048576)!==0&&$e(h,de,h.index);switch(h.lanes=0,h.tag){case 2:var E=h.type;nx(u,h),u=h.pendingProps;var R=gf(h,js.current);Ei(h,g),R=$h(null,h,E,u,R,g);var z=El();return h.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Ua(E)?(z=!0,_u(h)):z=!1,h.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,Bs(h),R.updater=tx,h.stateNode=R,R._reactInternals=h,Ry(h,E,u,g),h=Oy(null,h,E,!0,z,g)):(h.tag=0,mt&&z&&ct(h),ho(null,h,R,g),h=h.child),h;case 16:E=h.elementType;e:{switch(nx(u,h),u=h.pendingProps,R=E._init,E=R(E._payload),h.type=E,R=h.tag=SL(E),u=Zl(E,u),R){case 0:h=Dy(null,h,E,u,g);break e;case 1:h=K3(null,h,E,u,g);break e;case 11:h=$3(null,h,E,u,g);break e;case 14:h=H3(null,h,E,Zl(E.type,u),g);break e}throw Error(r(306,E,""))}return h;case 0:return E=h.type,R=h.pendingProps,R=h.elementType===E?R:Zl(E,R),Dy(u,h,E,R,g);case 1:return E=h.type,R=h.pendingProps,R=h.elementType===E?R:Zl(E,R),K3(u,h,E,R,g);case 3:e:{if(X3(h),u===null)throw Error(r(387));E=h.pendingProps,z=h.memoizedState,R=z.element,za(u,h),Qs(h,E,null,g);var ne=h.memoizedState;if(E=ne.element,z.isDehydrated)if(z={element:E,isDehydrated:!1,cache:ne.cache,pendingSuspenseBoundaries:ne.pendingSuspenseBoundaries,transitions:ne.transitions},h.updateQueue.baseState=z,h.memoizedState=z,h.flags&256){R=_0(Error(r(423)),h),h=Y3(u,h,E,g,R);break e}else if(E!==R){R=_0(Error(r(424)),h),h=Y3(u,h,E,g,R);break e}else for(lt=ga(h.stateNode.containerInfo.firstChild),at=h,mt=!0,gt=null,g=fi(h,null,E,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Zt(),E===R){h=Eu(u,h,g);break e}ho(u,h,E,g)}h=h.child}return h;case 5:return Xg(h),u===null&&ir(h),E=h.type,R=h.pendingProps,z=u!==null?u.memoizedProps:null,ne=R.children,v1(E,R)?ne=null:z!==null&&v1(E,z)&&(h.flags|=32),G3(u,h),ho(u,h,ne,g),h.child;case 6:return u===null&&ir(h),null;case 13:return Q3(u,h,g);case 4:return xf(h,h.stateNode.containerInfo),E=h.pendingProps,u===null?h.child=Wi(h,null,E,g):ho(u,h,E,g),h.child;case 11:return E=h.type,R=h.pendingProps,R=h.elementType===E?R:Zl(E,R),$3(u,h,E,R,g);case 7:return ho(u,h,h.pendingProps,g),h.child;case 8:return ho(u,h,h.pendingProps.children,g),h.child;case 12:return ho(u,h,h.pendingProps.children,g),h.child;case 10:e:{if(E=h.type._context,R=h.pendingProps,z=h.memoizedProps,ne=R.value,Rn(os,E._currentValue),E._currentValue=ne,z!==null)if(as(z.value,ne)){if(z.children===R.children&&!Va.current){h=Eu(u,h,g);break e}}else for(z=h.child,z!==null&&(z.return=h);z!==null;){var Pe=z.dependencies;if(Pe!==null){ne=z.child;for(var Oe=Pe.firstContext;Oe!==null;){if(Oe.context===E){if(z.tag===1){Oe=Oi(-1,g&-g),Oe.tag=2;var rt=z.updateQueue;if(rt!==null){rt=rt.shared;var Ct=rt.pending;Ct===null?Oe.next=Oe:(Oe.next=Ct.next,Ct.next=Oe),rt.pending=Oe}}z.lanes|=g,Oe=z.alternate,Oe!==null&&(Oe.lanes|=g),vn(z.return,g,h),Pe.lanes|=g;break}Oe=Oe.next}}else if(z.tag===10)ne=z.type===h.type?null:z.child;else if(z.tag===18){if(ne=z.return,ne===null)throw Error(r(341));ne.lanes|=g,Pe=ne.alternate,Pe!==null&&(Pe.lanes|=g),vn(ne,g,h),ne=z.sibling}else ne=z.child;if(ne!==null)ne.return=z;else for(ne=z;ne!==null;){if(ne===h){ne=null;break}if(z=ne.sibling,z!==null){z.return=ne.return,ne=z;break}ne=ne.return}z=ne}ho(u,h,R.children,g),h=h.child}return h;case 9:return R=h.type,E=h.pendingProps.children,Ei(h,g),R=Si(R),E=E(R),h.flags|=1,ho(u,h,E,g),h.child;case 14:return E=h.type,R=Zl(E,h.pendingProps),R=Zl(E.type,R),H3(u,h,E,R,g);case 15:return W3(u,h,h.type,h.pendingProps,g);case 17:return E=h.type,R=h.pendingProps,R=h.elementType===E?R:Zl(E,R),nx(u,h),h.tag=1,Ua(E)?(u=!0,_u(h)):u=!1,Ei(h,g),O3(h,E,R),Ry(h,E,R,g),Oy(null,h,E,!0,u,g);case 19:return Z3(u,h,g);case 22:return q3(u,h,g)}throw Error(r(156,h.tag))};function EE(u,h){return _t(u,h)}function EL(u,h,g,E){this.tag=u,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kl(u,h,g,E){return new EL(u,h,g,E)}function rw(u){return u=u.prototype,!(!u||!u.isReactComponent)}function SL(u){if(typeof u=="function")return rw(u)?1:0;if(u!=null){if(u=u.$$typeof,u===D)return 11;if(u===be)return 14}return 2}function Tf(u,h){var g=u.alternate;return g===null?(g=kl(u.tag,h,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g.alternate=u,u.alternate=g):(g.pendingProps=h,g.type=u.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=u.flags&14680064,g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue,h=u.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g}function px(u,h,g,E,R,z){var ne=2;if(E=u,typeof u=="function")rw(u)&&(ne=1);else if(typeof u=="string")ne=5;else e:switch(u){case P:return Yh(g.children,R,z,h);case A:ne=8,R|=8;break;case T:return u=kl(12,g,h,R|2),u.elementType=T,u.lanes=z,u;case M:return u=kl(13,g,h,R),u.elementType=M,u.lanes=z,u;case ie:return u=kl(19,g,h,R),u.elementType=ie,u.lanes=z,u;case we:return mx(g,R,z,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case O:ne=10;break e;case I:ne=9;break e;case D:ne=11;break e;case be:ne=14;break e;case Ne:ne=16,E=null;break e}throw Error(r(130,u==null?u:typeof u,""))}return h=kl(ne,g,h,R),h.elementType=u,h.type=E,h.lanes=z,h}function Yh(u,h,g,E){return u=kl(7,u,E,h),u.lanes=g,u}function mx(u,h,g,E){return u=kl(22,u,E,h),u.elementType=we,u.lanes=g,u.stateNode={isHidden:!1},u}function nw(u,h,g){return u=kl(6,u,null,h),u.lanes=g,u}function iw(u,h,g){return h=kl(4,u.children!==null?u.children:[],u.key,h),h.lanes=g,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function kL(u,h,g,E,R){this.tag=h,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fl(0),this.expirationTimes=fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.identifierPrefix=E,this.onRecoverableError=R,this.mutableSourceEagerHydrationData=null}function sw(u,h,g,E,R,z,ne,Pe,Oe){return u=new kL(u,h,g,Pe,Oe),h===1?(h=1,z===!0&&(h|=8)):h=0,z=kl(3,null,null,h),u.current=z,z.stateNode=u,z.memoizedState={element:E,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bs(z),u}function TL(u,h,g){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:E==null?null:""+E,children:u,containerInfo:h,implementation:g}}function SE(u){if(!u)return Ac;u=u._reactInternals;e:{if(Ie(u)!==u||u.tag!==1)throw Error(r(170));var h=u;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Ua(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(r(171))}if(u.tag===1){var g=u.type;if(Ua(g))return b1(u,g,h)}return h}function kE(u,h,g,E,R,z,ne,Pe,Oe){return u=sw(g,E,!0,u,R,z,ne,Pe,Oe),u.context=SE(null),g=u.current,E=po(),R=Sf(g),z=Oi(E,R),z.callback=h??null,Mi(g,z,R),u.current.lanes=R,hl(u,R,E),No(u,E),u}function gx(u,h,g,E){var R=h.current,z=po(),ne=Sf(R);return g=SE(g),h.context===null?h.context=g:h.pendingContext=g,h=Oi(z,ne),h.payload={element:u},E=E===void 0?null:E,E!==null&&(h.callback=E),u=Mi(R,h,ne),u!==null&&(rc(u,R,ne,z),Ys(u,R,ne)),ne}function xx(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function TE(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var g=u.retryLane;u.retryLane=g!==0&&g<h?g:h}}function aw(u,h){TE(u,h),(u=u.alternate)&&TE(u,h)}function AL(){return null}var AE=typeof reportError=="function"?reportError:function(u){console.error(u)};function ow(u){this._internalRoot=u}vx.prototype.render=ow.prototype.render=function(u){var h=this._internalRoot;if(h===null)throw Error(r(409));gx(u,h,null,null)},vx.prototype.unmount=ow.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var h=u.containerInfo;Gh(function(){gx(null,u,null,null)}),h[Ks]=null}};function vx(u){this._internalRoot=u}vx.prototype.unstable_scheduleHydration=function(u){if(u){var h=rf();u={blockedOn:null,target:u,priority:h};for(var g=0;g<_o.length&&h!==0&&h<_o[g].priority;g++);_o.splice(g,0,u),g===0&&sf(u)}};function lw(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function yx(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function CE(){}function CL(u,h,g,E,R){if(R){if(typeof E=="function"){var z=E;E=function(){var rt=xx(ne);z.call(rt)}}var ne=kE(h,E,u,0,null,!1,!1,"",CE);return u._reactRootContainer=ne,u[Ks]=ne.current,gu(u.nodeType===8?u.parentNode:u),Gh(),ne}for(;R=u.lastChild;)u.removeChild(R);if(typeof E=="function"){var Pe=E;E=function(){var rt=xx(Oe);Pe.call(rt)}}var Oe=sw(u,0,!1,null,null,!1,!1,"",CE);return u._reactRootContainer=Oe,u[Ks]=Oe.current,gu(u.nodeType===8?u.parentNode:u),Gh(function(){gx(h,Oe,g,E)}),Oe}function wx(u,h,g,E,R){var z=g._reactRootContainer;if(z){var ne=z;if(typeof R=="function"){var Pe=R;R=function(){var Oe=xx(ne);Pe.call(Oe)}}gx(h,ne,u,R)}else ne=CL(g,h,u,R,E);return xx(ne)}gc=function(u){switch(u.tag){case 3:var h=u.stateNode;if(h.current.memoizedState.isDehydrated){var g=Na(h.pendingLanes);g!==0&&(Vo(h,g|1),No(h,Tt()),(yn&6)===0&&(S0=Tt()+500,q()))}break;case 13:Gh(function(){var E=jn(u,1);if(E!==null){var R=po();rc(E,u,1,R)}}),aw(u,1)}},xc=function(u){if(u.tag===13){var h=jn(u,134217728);if(h!==null){var g=po();rc(h,u,134217728,g)}aw(u,134217728)}},tf=function(u){if(u.tag===13){var h=Sf(u),g=jn(u,h);if(g!==null){var E=po();rc(g,u,h,E)}aw(u,h)}},rf=function(){return Wr},vc=function(u,h){var g=Wr;try{return Wr=u,h()}finally{Wr=g}},tr=function(u,h,g){switch(h){case"input":if(et(u,g),h=g.name,g.type==="radio"&&h!=null){for(g=u;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<g.length;h++){var E=g[h];if(E!==u&&E.form===u.form){var R=Uh(E);if(!R)throw Error(r(90));oe(E),et(E,R)}}}break;case"textarea":xt(u,g);break;case"select":h=g.value,h!=null&&Ue(u,!!g.multiple,h,!1)}},Ur=Zy,Cn=Gh;var IL={usingClientEntryPoint:!1,Events:[mf,yu,Uh,mr,an,Zy]},F1={findFiberByHostInstance:Tc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},NL={bundleType:F1.bundleType,version:F1.version,rendererPackageName:F1.rendererPackageName,rendererConfig:F1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=Ke(u),u===null?null:u.stateNode},findFiberByHostInstance:F1.findFiberByHostInstance||AL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _x=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_x.isDisabled&&_x.supportsFiber)try{Ws=_x.inject(NL),ni=_x}catch{}}return Po.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IL,Po.createPortal=function(u,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lw(h))throw Error(r(200));return TL(u,h,null,g)},Po.createRoot=function(u,h){if(!lw(u))throw Error(r(299));var g=!1,E="",R=AE;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(E=h.identifierPrefix),h.onRecoverableError!==void 0&&(R=h.onRecoverableError)),h=sw(u,1,!1,null,null,g,!1,E,R),u[Ks]=h.current,gu(u.nodeType===8?u.parentNode:u),new ow(h)},Po.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=Ke(h),u=u===null?null:u.stateNode,u},Po.flushSync=function(u){return Gh(u)},Po.hydrate=function(u,h,g){if(!yx(h))throw Error(r(200));return wx(null,u,h,!0,g)},Po.hydrateRoot=function(u,h,g){if(!lw(u))throw Error(r(405));var E=g!=null&&g.hydratedSources||null,R=!1,z="",ne=AE;if(g!=null&&(g.unstable_strictMode===!0&&(R=!0),g.identifierPrefix!==void 0&&(z=g.identifierPrefix),g.onRecoverableError!==void 0&&(ne=g.onRecoverableError)),h=kE(h,null,u,1,g??null,R,!1,z,ne),u[Ks]=h.current,gu(u),E)for(u=0;u<E.length;u++)g=E[u],R=g._getVersion,R=R(g._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[g,R]:h.mutableSourceEagerHydrationData.push(g,R);return new vx(h)},Po.render=function(u,h,g){if(!yx(h))throw Error(r(200));return wx(null,u,h,!1,g)},Po.unmountComponentAtNode=function(u){if(!yx(u))throw Error(r(40));return u._reactRootContainer?(Gh(function(){wx(null,null,u,!1,function(){u._reactRootContainer=null,u[Ks]=null})}),!0):!1},Po.unstable_batchedUpdates=Zy,Po.unstable_renderSubtreeIntoContainer=function(u,h,g,E){if(!yx(g))throw Error(r(200));if(u==null||u._reactInternals===void 0)throw Error(r(38));return wx(u,h,g,!1,E)},Po.version="18.3.1-next-f1338f8080-20240426",Po}var OE;function a8(){if(OE)return fw.exports;OE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),fw.exports=jL(),fw.exports}var ME;function BL(){if(ME)return bx;ME=1;var t=a8();return bx.createRoot=t.createRoot,bx.hydrateRoot=t.hydrateRoot,bx}var VL=BL(),Qf=a8();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function km(){return km=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},km.apply(this,arguments)}var zf;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(zf||(zf={}));const jE="popstate";function UL(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:a,hash:o}=n.location;return C_("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:C2(i)}return $L(e,r,null,t)}function ms(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function o8(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zL(){return Math.random().toString(36).substr(2,8)}function BE(t,e){return{usr:t.state,key:t.key,idx:e}}function C_(t,e,r,n){return r===void 0&&(r=null),km({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Dp(e):e,{state:r,key:e&&e.key||n||zL()})}function C2(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Dp(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function $L(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o=zf.Pop,l=null,c=f();c==null&&(c=0,a.replaceState(km({},a.state,{idx:c}),""));function f(){return(a.state||{idx:null}).idx}function d(){o=zf.Pop;let b=f(),k=b==null?null:b-c;c=b,l&&l({action:o,location:w.location,delta:k})}function m(b,k){o=zf.Push;let F=C_(w.location,b,k);c=f()+1;let N=BE(F,c),B=w.createHref(F);try{a.pushState(N,"",B)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;i.location.assign(B)}s&&l&&l({action:o,location:w.location,delta:1})}function p(b,k){o=zf.Replace;let F=C_(w.location,b,k);c=f();let N=BE(F,c),B=w.createHref(F);a.replaceState(N,"",B),s&&l&&l({action:o,location:w.location,delta:0})}function _(b){let k=i.location.origin!=="null"?i.location.origin:i.location.href,F=typeof b=="string"?b:C2(b);return F=F.replace(/ $/,"%20"),ms(k,"No window.location.(origin|href) available to create URL for href: "+F),new URL(F,k)}let w={get action(){return o},get location(){return t(i,a)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(jE,d),l=b,()=>{i.removeEventListener(jE,d),l=null}},createHref(b){return e(i,b)},createURL:_,encodeLocation(b){let k=_(b);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:m,replace:p,go(b){return a.go(b)}};return w}var VE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(VE||(VE={}));function HL(t,e,r){return r===void 0&&(r="/"),WL(t,e,r)}function WL(t,e,r,n){let i=typeof e=="string"?Dp(e):e,s=K5(i.pathname||"/",r);if(s==null)return null;let a=l8(t);qL(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=iD(s);o=tD(a[l],c)}return o}function l8(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(ms(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=Kf([n,l.relativePath]),f=r.concat(l);s.children&&s.children.length>0&&(ms(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),l8(s.children,e,f,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:ZL(c,s.index),routesMeta:f})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of c8(s.path))i(s,a,l)}),e}function c8(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=c8(n.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function qL(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:eD(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const GL=/^:[\w-]+$/,KL=3,XL=2,YL=1,QL=10,JL=-2,UE=t=>t==="*";function ZL(t,e){let r=t.split("/"),n=r.length;return r.some(UE)&&(n+=JL),e&&(n+=XL),r.filter(i=>!UE(i)).reduce((i,s)=>i+(GL.test(s)?KL:s===""?YL:QL),n)}function eD(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function tD(t,e,r){let{routesMeta:n}=t,i={},s="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,f=s==="/"?e:e.slice(s.length)||"/",d=rD({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},f),m=l.route;if(!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:Kf([s,d.pathname]),pathnameBase:lD(Kf([s,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(s=Kf([s,d.pathnameBase]))}return a}function rD(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=nD(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((c,f,d)=>{let{paramName:m,isOptional:p}=f;if(m==="*"){let w=o[d]||"";a=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const _=o[d];return p&&!_?c[m]=void 0:c[m]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function nD(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),o8(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function iD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return o8(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function K5(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function sD(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Dp(t):t;return{pathname:r?r.startsWith("/")?r:aD(r,e):e,search:cD(n),hash:uD(i)}}function aD(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function pw(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oD(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function X5(t,e){let r=oD(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Y5(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Dp(t):(i=km({},t),ms(!i.pathname||!i.pathname.includes("?"),pw("?","pathname","search",i)),ms(!i.pathname||!i.pathname.includes("#"),pw("#","pathname","hash",i)),ms(!i.search||!i.search.includes("#"),pw("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=r;else{let d=e.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),d-=1;i.pathname=m.join("/")}o=d>=0?e[d]:"/"}let l=sD(i,o),c=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||f)&&(l.pathname+="/"),l}const Kf=t=>t.join("/").replace(/\/\/+/g,"/"),lD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function fD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const u8=["post","put","patch","delete"];new Set(u8);const hD=["get",...u8];new Set(hD);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tm(){return Tm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tm.apply(this,arguments)}const Q5=H.createContext(null),dD=H.createContext(null),vh=H.createContext(null),kv=H.createContext(null),eu=H.createContext({outlet:null,matches:[],isDataRoute:!1}),f8=H.createContext(null);function pD(t,e){let{relative:r}=e===void 0?{}:e;Op()||ms(!1);let{basename:n,navigator:i}=H.useContext(vh),{hash:s,pathname:a,search:o}=p8(t,{relative:r}),l=a;return n!=="/"&&(l=a==="/"?n:Kf([n,a])),i.createHref({pathname:l,search:o,hash:s})}function Op(){return H.useContext(kv)!=null}function tu(){return Op()||ms(!1),H.useContext(kv).location}function h8(t){H.useContext(vh).static||H.useLayoutEffect(t)}function ts(){let{isDataRoute:t}=H.useContext(eu);return t?ID():mD()}function mD(){Op()||ms(!1);let t=H.useContext(Q5),{basename:e,future:r,navigator:n}=H.useContext(vh),{matches:i}=H.useContext(eu),{pathname:s}=tu(),a=JSON.stringify(X5(i,r.v7_relativeSplatPath)),o=H.useRef(!1);return h8(()=>{o.current=!0}),H.useCallback(function(c,f){if(f===void 0&&(f={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let d=Y5(c,JSON.parse(a),s,f.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Kf([e,d.pathname])),(f.replace?n.replace:n.push)(d,f.state,f)},[e,n,a,s,t])}const gD=H.createContext(null);function xD(t){let e=H.useContext(eu).outlet;return e&&H.createElement(gD.Provider,{value:t},e)}function d8(){let{matches:t}=H.useContext(eu),e=t[t.length-1];return e?e.params:{}}function p8(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=H.useContext(vh),{matches:i}=H.useContext(eu),{pathname:s}=tu(),a=JSON.stringify(X5(i,n.v7_relativeSplatPath));return H.useMemo(()=>Y5(t,JSON.parse(a),s,r==="path"),[t,a,s,r])}function vD(t,e){return yD(t,e)}function yD(t,e,r,n){Op()||ms(!1);let{navigator:i}=H.useContext(vh),{matches:s}=H.useContext(eu),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=tu(),f;if(e){var d;let b=typeof e=="string"?Dp(e):e;l==="/"||(d=b.pathname)!=null&&d.startsWith(l)||ms(!1),f=b}else f=c;let m=f.pathname||"/",p=m;if(l!=="/"){let b=l.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let _=HL(t,{pathname:p}),w=SD(_&&_.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:Kf([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:Kf([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,r,n);return e&&w?H.createElement(kv.Provider,{value:{location:Tm({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:zf.Pop}},w):w}function wD(){let t=CD(),e=fD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),r?H.createElement("pre",{style:i},r):null,null)}const _D=H.createElement(wD,null);class bD extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?H.createElement(eu.Provider,{value:this.props.routeContext},H.createElement(f8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ED(t){let{routeContext:e,match:r,children:n}=t,i=H.useContext(Q5);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),H.createElement(eu.Provider,{value:e},n)}function SD(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=(i=r)==null?void 0:i.errors;if(o!=null){let f=a.findIndex(d=>d.route.id&&o?.[d.route.id]!==void 0);f>=0||ms(!1),a=a.slice(0,Math.min(a.length,f+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<a.length;f++){let d=a[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=f),d.route.id){let{loaderData:m,errors:p}=r,_=d.route.loader&&m[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||_){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((f,d,m)=>{let p,_=!1,w=null,b=null;r&&(p=o&&d.route.id?o[d.route.id]:void 0,w=d.route.errorElement||_D,l&&(c<0&&m===0?(ND("route-fallback"),_=!0,b=null):c===m&&(_=!0,b=d.route.hydrateFallbackElement||null)));let k=e.concat(a.slice(0,m+1)),F=()=>{let N;return p?N=w:_?N=b:d.route.Component?N=H.createElement(d.route.Component,null):d.route.element?N=d.route.element:N=f,H.createElement(ED,{match:d,routeContext:{outlet:f,matches:k,isDataRoute:r!=null},children:N})};return r&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?H.createElement(bD,{location:r.location,revalidation:r.revalidation,component:w,error:p,children:F(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):F()},null)}var m8=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(m8||{}),g8=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(g8||{});function kD(t){let e=H.useContext(Q5);return e||ms(!1),e}function TD(t){let e=H.useContext(dD);return e||ms(!1),e}function AD(t){let e=H.useContext(eu);return e||ms(!1),e}function x8(t){let e=AD(),r=e.matches[e.matches.length-1];return r.route.id||ms(!1),r.route.id}function CD(){var t;let e=H.useContext(f8),r=TD(),n=x8();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function ID(){let{router:t}=kD(m8.UseNavigateStable),e=x8(g8.UseNavigateStable),r=H.useRef(!1);return h8(()=>{r.current=!0}),H.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Tm({fromRouteId:e},s)))},[t,e])}const zE={};function ND(t,e,r){zE[t]||(zE[t]=!0)}function PD(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function D1(t){let{to:e,replace:r,state:n,relative:i}=t;Op()||ms(!1);let{future:s,static:a}=H.useContext(vh),{matches:o}=H.useContext(eu),{pathname:l}=tu(),c=ts(),f=Y5(e,X5(o,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(f);return H.useEffect(()=>c(JSON.parse(d),{replace:r,state:n,relative:i}),[c,d,i,r,n]),null}function v8(t){return xD(t.context)}function Ti(t){ms(!1)}function RD(t){let{basename:e="/",children:r=null,location:n,navigationType:i=zf.Pop,navigator:s,static:a=!1,future:o}=t;Op()&&ms(!1);let l=e.replace(/^\/*/,"/"),c=H.useMemo(()=>({basename:l,navigator:s,static:a,future:Tm({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof n=="string"&&(n=Dp(n));let{pathname:f="/",search:d="",hash:m="",state:p=null,key:_="default"}=n,w=H.useMemo(()=>{let b=K5(f,l);return b==null?null:{location:{pathname:b,search:d,hash:m,state:p,key:_},navigationType:i}},[l,f,d,m,p,_,i]);return w==null?null:H.createElement(vh.Provider,{value:c},H.createElement(kv.Provider,{children:r,value:w}))}function $E(t){let{children:e,location:r}=t;return vD(I_(e),r)}new Promise(()=>{});function I_(t,e){e===void 0&&(e=[]);let r=[];return H.Children.forEach(t,(n,i)=>{if(!H.isValidElement(n))return;let s=[...e,i];if(n.type===H.Fragment){r.push.apply(r,I_(n.props.children,s));return}n.type!==Ti&&ms(!1),!n.props.index||!n.props.children||ms(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=I_(n.props.children,s)),r.push(a)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function N_(){return N_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},N_.apply(this,arguments)}function FD(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function LD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function DD(t,e){return t.button===0&&(!e||e==="_self")&&!LD(t)}const OD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],MD="6";try{window.__reactRouterVersion=MD}catch{}const jD="startTransition",HE=A2[jD];function BD(t){let{basename:e,children:r,future:n,window:i}=t,s=H.useRef();s.current==null&&(s.current=UL({window:i,v5Compat:!0}));let a=s.current,[o,l]=H.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},f=H.useCallback(d=>{c&&HE?HE(()=>l(d)):l(d)},[l,c]);return H.useLayoutEffect(()=>a.listen(f),[a,f]),H.useEffect(()=>PD(n),[n]),H.createElement(RD,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:a,future:n})}const VD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jf=H.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:f,viewTransition:d}=e,m=FD(e,OD),{basename:p}=H.useContext(vh),_,w=!1;if(typeof c=="string"&&UD.test(c)&&(_=c,VD))try{let N=new URL(window.location.href),B=c.startsWith("//")?new URL(N.protocol+c):new URL(c),X=K5(B.pathname,p);B.origin===N.origin&&X!=null?c=X+B.search+B.hash:w=!0}catch{}let b=pD(c,{relative:i}),k=zD(c,{replace:a,state:o,target:l,preventScrollReset:f,relative:i,viewTransition:d});function F(N){n&&n(N),N.defaultPrevented||k(N)}return H.createElement("a",N_({},m,{href:_||b,onClick:w||s?n:F,ref:r,target:l}))});var WE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(WE||(WE={}));var qE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(qE||(qE={}));function zD(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=ts(),c=tu(),f=p8(t,{relative:a});return H.useCallback(d=>{if(DD(d,r)){d.preventDefault();let m=n!==void 0?n:C2(c)===C2(f);l(t,{replace:m,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,f,n,i,r,t,s,a,o])}var GE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y8=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},$D=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[r++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[r++],a=t[r++],o=t[r++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const s=t[r++],a=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},w8={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,f=s>>2,d=(s&3)<<4|o>>4;let m=(o&15)<<2|c>>6,p=c&63;l||(p=64,a||(m=64)),n.push(r[f],r[d],r[m],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(y8(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$D(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const s=r[t.charAt(i++)],o=i<t.length?r[t.charAt(i)]:0;++i;const c=i<t.length?r[t.charAt(i)]:64;++i;const d=i<t.length?r[t.charAt(i)]:64;if(++i,s==null||o==null||c==null||d==null)throw new HD;const m=s<<2|o>>4;if(n.push(m),c!==64){const p=o<<4&240|c>>2;if(n.push(p),d!==64){const _=c<<6&192|d;n.push(_)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class HD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WD=function(t){const e=y8(t);return w8.encodeByteArray(e,!0)},I2=function(t){return WD(t).replace(/\./g,"")},_8=function(t){try{return w8.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=()=>qD().__FIREBASE_DEFAULTS__,KD=()=>{if(typeof process>"u"||typeof GE>"u")return;const t=GE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},XD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_8(t[1]);return e&&JSON.parse(e)},Tv=()=>{try{return GD()||KD()||XD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},b8=t=>{var e,r;return(r=(e=Tv())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},E8=t=>{const e=b8(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},S8=()=>{var t;return(t=Tv())===null||t===void 0?void 0:t.config},k8=t=>{var e;return(e=Tv())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[I2(JSON.stringify(r)),I2(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zs())}function JD(){var t;const e=(t=Tv())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rO(){const t=zs();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function A8(){return!JD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C8(){try{return typeof indexedDB=="object"}catch{return!1}}function nO(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="FirebaseError";class ru extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=iO,Object.setPrototypeOf(this,ru.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ig.prototype.create)}}class ig{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?sO(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new ru(i,o,n)}}function sO(t,e){return t.replace(aO,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const aO=/\{\$([^}]+)}/g;function oO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zf(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const s=t[i],a=e[i];if(KE(s)&&KE(a)){if(!Zf(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function KE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function G1(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function K1(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function lO(t,e){const r=new cO(t,e);return r.subscribe.bind(r)}class cO{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");uO(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=mw),i.error===void 0&&(i.error=mw),i.complete===void 0&&(i.complete=mw);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uO(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function mw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t){return t&&t._delegate?t._delegate:t}class eh{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new YD;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e?.identifier),i=(r=e?.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dO(e))try{this.getOrInitializeService({instanceIdentifier:Jh})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=Jh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jh){return this.instances.has(e)}getOptions(e=Jh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&a.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:hO(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Jh){return this.component?this.component.multipleInstances?e:Jh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hO(t){return t===Jh?void 0:t}function dO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new fO(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ln||(ln={}));const mO={debug:ln.DEBUG,verbose:ln.VERBOSE,info:ln.INFO,warn:ln.WARN,error:ln.ERROR,silent:ln.SILENT},gO=ln.INFO,xO={[ln.DEBUG]:"log",[ln.VERBOSE]:"log",[ln.INFO]:"info",[ln.WARN]:"warn",[ln.ERROR]:"error"},vO=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=xO[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class J5{constructor(e){this.name=e,this._logLevel=gO,this._logHandler=vO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ln))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ln.DEBUG,...e),this._logHandler(this,ln.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ln.VERBOSE,...e),this._logHandler(this,ln.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ln.INFO,...e),this._logHandler(this,ln.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ln.WARN,...e),this._logHandler(this,ln.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ln.ERROR,...e),this._logHandler(this,ln.ERROR,...e)}}const yO=(t,e)=>e.some(r=>t instanceof r);let XE,YE;function wO(){return XE||(XE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _O(){return YE||(YE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I8=new WeakMap,P_=new WeakMap,N8=new WeakMap,gw=new WeakMap,Z5=new WeakMap;function bO(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{r(Xf(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&I8.set(r,t)}).catch(()=>{}),Z5.set(e,t),e}function EO(t){if(P_.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{r(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});P_.set(t,e)}let R_={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return P_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||N8.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Xf(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SO(t){R_=t(R_)}function kO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(xw(this),e,...r);return N8.set(n,e.sort?e.sort():[e]),Xf(n)}:_O().includes(t)?function(...e){return t.apply(xw(this),e),Xf(I8.get(this))}:function(...e){return Xf(t.apply(xw(this),e))}}function TO(t){return typeof t=="function"?kO(t):(t instanceof IDBTransaction&&EO(t),yO(t,wO())?new Proxy(t,R_):t)}function Xf(t){if(t instanceof IDBRequest)return bO(t);if(gw.has(t))return gw.get(t);const e=TO(t);return e!==t&&(gw.set(t,e),Z5.set(e,t)),e}const xw=t=>Z5.get(t);function AO(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=Xf(a);return n&&a.addEventListener("upgradeneeded",l=>{n(Xf(a.result),l.oldVersion,l.newVersion,Xf(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const CO=["get","getKey","getAll","getAllKeys","count"],IO=["put","add","delete","clear"],vw=new Map;function QE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vw.get(e))return vw.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=IO.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||CO.includes(r)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),i&&l.done]))[0]};return vw.set(e,s),s}SO(t=>({...t,get:(e,r,n)=>QE(e,r)||t.get(e,r,n),has:(e,r)=>!!QE(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(PO(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function PO(t){const e=t.getComponent();return e?.type==="VERSION"}const F_="@firebase/app",JE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu=new J5("@firebase/app"),RO="@firebase/app-compat",FO="@firebase/analytics-compat",LO="@firebase/analytics",DO="@firebase/app-check-compat",OO="@firebase/app-check",MO="@firebase/auth",jO="@firebase/auth-compat",BO="@firebase/database",VO="@firebase/data-connect",UO="@firebase/database-compat",zO="@firebase/functions",$O="@firebase/functions-compat",HO="@firebase/installations",WO="@firebase/installations-compat",qO="@firebase/messaging",GO="@firebase/messaging-compat",KO="@firebase/performance",XO="@firebase/performance-compat",YO="@firebase/remote-config",QO="@firebase/remote-config-compat",JO="@firebase/storage",ZO="@firebase/storage-compat",eM="@firebase/firestore",tM="@firebase/vertexai-preview",rM="@firebase/firestore-compat",nM="firebase",iM="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="[DEFAULT]",sM={[F_]:"fire-core",[RO]:"fire-core-compat",[LO]:"fire-analytics",[FO]:"fire-analytics-compat",[OO]:"fire-app-check",[DO]:"fire-app-check-compat",[MO]:"fire-auth",[jO]:"fire-auth-compat",[BO]:"fire-rtdb",[VO]:"fire-data-connect",[UO]:"fire-rtdb-compat",[zO]:"fire-fn",[$O]:"fire-fn-compat",[HO]:"fire-iid",[WO]:"fire-iid-compat",[qO]:"fire-fcm",[GO]:"fire-fcm-compat",[KO]:"fire-perf",[XO]:"fire-perf-compat",[YO]:"fire-rc",[QO]:"fire-rc-compat",[JO]:"fire-gcs",[ZO]:"fire-gcs-compat",[eM]:"fire-fst",[rM]:"fire-fst-compat",[tM]:"fire-vertex","fire-js":"fire-js",[nM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=new Map,aM=new Map,L_=new Map;function ZE(t,e){try{t.container.addComponent(e)}catch(r){Bu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function wd(t){const e=t.name;if(L_.has(e))return Bu.debug(`There were multiple attempts to register component ${e}.`),!1;L_.set(e,t);for(const r of P2.values())ZE(r,t);for(const r of aM.values())ZE(r,t);return!0}function Mp(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function oM(t,e,r=N2){Mp(t,e).clearInstance(r)}function Mc(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yf=new ig("app","Firebase",lM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new eh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=iM;function P8(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:N2,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Yf.create("bad-app-name",{appName:String(i)});if(r||(r=S8()),!r)throw Yf.create("no-options");const s=P2.get(i);if(s){if(Zf(r,s.options)&&Zf(n,s.config))return s;throw Yf.create("duplicate-app",{appName:i})}const a=new pO(i);for(const l of L_.values())a.addComponent(l);const o=new cM(r,n,a);return P2.set(i,o),o}function e4(t=N2){const e=P2.get(t);if(!e&&t===N2&&S8())return P8();if(!e)throw Yf.create("no-app",{appName:t});return e}function Hc(t,e,r){var n;let i=(n=sM[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bu.warn(o.join(" "));return}wd(new eh(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM="firebase-heartbeat-database",fM=1,Am="firebase-heartbeat-store";let yw=null;function R8(){return yw||(yw=AO(uM,fM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Am)}catch(r){console.warn(r)}}}}).catch(t=>{throw Yf.create("idb-open",{originalErrorMessage:t.message})})),yw}async function hM(t){try{const r=(await R8()).transaction(Am),n=await r.objectStore(Am).get(F8(t));return await r.done,n}catch(e){if(e instanceof ru)Bu.warn(e.message);else{const r=Yf.create("idb-get",{originalErrorMessage:e?.message});Bu.warn(r.message)}}}async function e6(t,e){try{const n=(await R8()).transaction(Am,"readwrite");await n.objectStore(Am).put(e,F8(t)),await n.done}catch(r){if(r instanceof ru)Bu.warn(r.message);else{const n=Yf.create("idb-set",{originalErrorMessage:r?.message});Bu.warn(n.message)}}}function F8(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=1024,pM=720*60*60*1e3;class mM{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new xM(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=t6();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=pM}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Bu.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=t6(),{heartbeatsToSend:n,unsentEntries:i}=gM(this._heartbeatsCache.heartbeats),s=I2(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return Bu.warn(r),""}}}function t6(){return new Date().toISOString().substring(0,10)}function gM(t,e=dM){const r=[];let n=t.slice();for(const i of t){const s=r.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),r6(r)>e){s.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),r6(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class xM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return C8()?nO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await hM(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return e6(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return e6(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function r6(t){return I2(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t){wd(new eh("platform-logger",e=>new NO(e),"PRIVATE")),wd(new eh("heartbeat",e=>new mM(e),"PRIVATE")),Hc(F_,JE,t),Hc(F_,JE,"esm2017"),Hc("fire-js","")}vM("");var n6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fd,L8;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,A){function T(){}T.prototype=A.prototype,P.D=A.prototype,P.prototype=new T,P.prototype.constructor=P,P.C=function(O,I,D){for(var M=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)M[ie-2]=arguments[ie];return A.prototype[I].apply(O,M)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,A,T){T||(T=0);var O=Array(16);if(typeof A=="string")for(var I=0;16>I;++I)O[I]=A.charCodeAt(T++)|A.charCodeAt(T++)<<8|A.charCodeAt(T++)<<16|A.charCodeAt(T++)<<24;else for(I=0;16>I;++I)O[I]=A[T++]|A[T++]<<8|A[T++]<<16|A[T++]<<24;A=P.g[0],T=P.g[1],I=P.g[2];var D=P.g[3],M=A+(D^T&(I^D))+O[0]+3614090360&4294967295;A=T+(M<<7&4294967295|M>>>25),M=D+(I^A&(T^I))+O[1]+3905402710&4294967295,D=A+(M<<12&4294967295|M>>>20),M=I+(T^D&(A^T))+O[2]+606105819&4294967295,I=D+(M<<17&4294967295|M>>>15),M=T+(A^I&(D^A))+O[3]+3250441966&4294967295,T=I+(M<<22&4294967295|M>>>10),M=A+(D^T&(I^D))+O[4]+4118548399&4294967295,A=T+(M<<7&4294967295|M>>>25),M=D+(I^A&(T^I))+O[5]+1200080426&4294967295,D=A+(M<<12&4294967295|M>>>20),M=I+(T^D&(A^T))+O[6]+2821735955&4294967295,I=D+(M<<17&4294967295|M>>>15),M=T+(A^I&(D^A))+O[7]+4249261313&4294967295,T=I+(M<<22&4294967295|M>>>10),M=A+(D^T&(I^D))+O[8]+1770035416&4294967295,A=T+(M<<7&4294967295|M>>>25),M=D+(I^A&(T^I))+O[9]+2336552879&4294967295,D=A+(M<<12&4294967295|M>>>20),M=I+(T^D&(A^T))+O[10]+4294925233&4294967295,I=D+(M<<17&4294967295|M>>>15),M=T+(A^I&(D^A))+O[11]+2304563134&4294967295,T=I+(M<<22&4294967295|M>>>10),M=A+(D^T&(I^D))+O[12]+1804603682&4294967295,A=T+(M<<7&4294967295|M>>>25),M=D+(I^A&(T^I))+O[13]+4254626195&4294967295,D=A+(M<<12&4294967295|M>>>20),M=I+(T^D&(A^T))+O[14]+2792965006&4294967295,I=D+(M<<17&4294967295|M>>>15),M=T+(A^I&(D^A))+O[15]+1236535329&4294967295,T=I+(M<<22&4294967295|M>>>10),M=A+(I^D&(T^I))+O[1]+4129170786&4294967295,A=T+(M<<5&4294967295|M>>>27),M=D+(T^I&(A^T))+O[6]+3225465664&4294967295,D=A+(M<<9&4294967295|M>>>23),M=I+(A^T&(D^A))+O[11]+643717713&4294967295,I=D+(M<<14&4294967295|M>>>18),M=T+(D^A&(I^D))+O[0]+3921069994&4294967295,T=I+(M<<20&4294967295|M>>>12),M=A+(I^D&(T^I))+O[5]+3593408605&4294967295,A=T+(M<<5&4294967295|M>>>27),M=D+(T^I&(A^T))+O[10]+38016083&4294967295,D=A+(M<<9&4294967295|M>>>23),M=I+(A^T&(D^A))+O[15]+3634488961&4294967295,I=D+(M<<14&4294967295|M>>>18),M=T+(D^A&(I^D))+O[4]+3889429448&4294967295,T=I+(M<<20&4294967295|M>>>12),M=A+(I^D&(T^I))+O[9]+568446438&4294967295,A=T+(M<<5&4294967295|M>>>27),M=D+(T^I&(A^T))+O[14]+3275163606&4294967295,D=A+(M<<9&4294967295|M>>>23),M=I+(A^T&(D^A))+O[3]+4107603335&4294967295,I=D+(M<<14&4294967295|M>>>18),M=T+(D^A&(I^D))+O[8]+1163531501&4294967295,T=I+(M<<20&4294967295|M>>>12),M=A+(I^D&(T^I))+O[13]+2850285829&4294967295,A=T+(M<<5&4294967295|M>>>27),M=D+(T^I&(A^T))+O[2]+4243563512&4294967295,D=A+(M<<9&4294967295|M>>>23),M=I+(A^T&(D^A))+O[7]+1735328473&4294967295,I=D+(M<<14&4294967295|M>>>18),M=T+(D^A&(I^D))+O[12]+2368359562&4294967295,T=I+(M<<20&4294967295|M>>>12),M=A+(T^I^D)+O[5]+4294588738&4294967295,A=T+(M<<4&4294967295|M>>>28),M=D+(A^T^I)+O[8]+2272392833&4294967295,D=A+(M<<11&4294967295|M>>>21),M=I+(D^A^T)+O[11]+1839030562&4294967295,I=D+(M<<16&4294967295|M>>>16),M=T+(I^D^A)+O[14]+4259657740&4294967295,T=I+(M<<23&4294967295|M>>>9),M=A+(T^I^D)+O[1]+2763975236&4294967295,A=T+(M<<4&4294967295|M>>>28),M=D+(A^T^I)+O[4]+1272893353&4294967295,D=A+(M<<11&4294967295|M>>>21),M=I+(D^A^T)+O[7]+4139469664&4294967295,I=D+(M<<16&4294967295|M>>>16),M=T+(I^D^A)+O[10]+3200236656&4294967295,T=I+(M<<23&4294967295|M>>>9),M=A+(T^I^D)+O[13]+681279174&4294967295,A=T+(M<<4&4294967295|M>>>28),M=D+(A^T^I)+O[0]+3936430074&4294967295,D=A+(M<<11&4294967295|M>>>21),M=I+(D^A^T)+O[3]+3572445317&4294967295,I=D+(M<<16&4294967295|M>>>16),M=T+(I^D^A)+O[6]+76029189&4294967295,T=I+(M<<23&4294967295|M>>>9),M=A+(T^I^D)+O[9]+3654602809&4294967295,A=T+(M<<4&4294967295|M>>>28),M=D+(A^T^I)+O[12]+3873151461&4294967295,D=A+(M<<11&4294967295|M>>>21),M=I+(D^A^T)+O[15]+530742520&4294967295,I=D+(M<<16&4294967295|M>>>16),M=T+(I^D^A)+O[2]+3299628645&4294967295,T=I+(M<<23&4294967295|M>>>9),M=A+(I^(T|~D))+O[0]+4096336452&4294967295,A=T+(M<<6&4294967295|M>>>26),M=D+(T^(A|~I))+O[7]+1126891415&4294967295,D=A+(M<<10&4294967295|M>>>22),M=I+(A^(D|~T))+O[14]+2878612391&4294967295,I=D+(M<<15&4294967295|M>>>17),M=T+(D^(I|~A))+O[5]+4237533241&4294967295,T=I+(M<<21&4294967295|M>>>11),M=A+(I^(T|~D))+O[12]+1700485571&4294967295,A=T+(M<<6&4294967295|M>>>26),M=D+(T^(A|~I))+O[3]+2399980690&4294967295,D=A+(M<<10&4294967295|M>>>22),M=I+(A^(D|~T))+O[10]+4293915773&4294967295,I=D+(M<<15&4294967295|M>>>17),M=T+(D^(I|~A))+O[1]+2240044497&4294967295,T=I+(M<<21&4294967295|M>>>11),M=A+(I^(T|~D))+O[8]+1873313359&4294967295,A=T+(M<<6&4294967295|M>>>26),M=D+(T^(A|~I))+O[15]+4264355552&4294967295,D=A+(M<<10&4294967295|M>>>22),M=I+(A^(D|~T))+O[6]+2734768916&4294967295,I=D+(M<<15&4294967295|M>>>17),M=T+(D^(I|~A))+O[13]+1309151649&4294967295,T=I+(M<<21&4294967295|M>>>11),M=A+(I^(T|~D))+O[4]+4149444226&4294967295,A=T+(M<<6&4294967295|M>>>26),M=D+(T^(A|~I))+O[11]+3174756917&4294967295,D=A+(M<<10&4294967295|M>>>22),M=I+(A^(D|~T))+O[2]+718787259&4294967295,I=D+(M<<15&4294967295|M>>>17),M=T+(D^(I|~A))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+A&4294967295,P.g[1]=P.g[1]+(I+(M<<21&4294967295|M>>>11))&4294967295,P.g[2]=P.g[2]+I&4294967295,P.g[3]=P.g[3]+D&4294967295}n.prototype.u=function(P,A){A===void 0&&(A=P.length);for(var T=A-this.blockSize,O=this.B,I=this.h,D=0;D<A;){if(I==0)for(;D<=T;)i(this,P,D),D+=this.blockSize;if(typeof P=="string"){for(;D<A;)if(O[I++]=P.charCodeAt(D++),I==this.blockSize){i(this,O),I=0;break}}else for(;D<A;)if(O[I++]=P[D++],I==this.blockSize){i(this,O),I=0;break}}this.h=I,this.o+=A},n.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var A=1;A<P.length-8;++A)P[A]=0;var T=8*this.o;for(A=P.length-8;A<P.length;++A)P[A]=T&255,T/=256;for(this.u(P),P=Array(16),A=T=0;4>A;++A)for(var O=0;32>O;O+=8)P[T++]=this.g[A]>>>O&255;return P};function s(P,A){var T=o;return Object.prototype.hasOwnProperty.call(T,P)?T[P]:T[P]=A(P)}function a(P,A){this.h=A;for(var T=[],O=!0,I=P.length-1;0<=I;I--){var D=P[I]|0;O&&D==A||(T[I]=D,O=!1)}this.g=T}var o={};function l(P){return-128<=P&&128>P?s(P,function(A){return new a([A|0],0>A?-1:0)}):new a([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return d;if(0>P)return b(c(-P));for(var A=[],T=1,O=0;P>=T;O++)A[O]=P/T|0,T*=4294967296;return new a(A,0)}function f(P,A){if(P.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(P.charAt(0)=="-")return b(f(P.substring(1),A));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(A,8)),O=d,I=0;I<P.length;I+=8){var D=Math.min(8,P.length-I),M=parseInt(P.substring(I,I+D),A);8>D?(D=c(Math.pow(A,D)),O=O.j(D).add(c(M))):(O=O.j(T),O=O.add(c(M)))}return O}var d=l(0),m=l(1),p=l(16777216);t=a.prototype,t.m=function(){if(w(this))return-b(this).m();for(var P=0,A=1,T=0;T<this.g.length;T++){var O=this.i(T);P+=(0<=O?O:4294967296+O)*A,A*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(_(this))return"0";if(w(this))return"-"+b(this).toString(P);for(var A=c(Math.pow(P,6)),T=this,O="";;){var I=B(T,A).g;T=k(T,I.j(A));var D=((0<T.g.length?T.g[0]:T.h)>>>0).toString(P);if(T=I,_(T))return D+O;for(;6>D.length;)D="0"+D;O=D+O}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function _(P){if(P.h!=0)return!1;for(var A=0;A<P.g.length;A++)if(P.g[A]!=0)return!1;return!0}function w(P){return P.h==-1}t.l=function(P){return P=k(this,P),w(P)?-1:_(P)?0:1};function b(P){for(var A=P.g.length,T=[],O=0;O<A;O++)T[O]=~P.g[O];return new a(T,~P.h).add(m)}t.abs=function(){return w(this)?b(this):this},t.add=function(P){for(var A=Math.max(this.g.length,P.g.length),T=[],O=0,I=0;I<=A;I++){var D=O+(this.i(I)&65535)+(P.i(I)&65535),M=(D>>>16)+(this.i(I)>>>16)+(P.i(I)>>>16);O=M>>>16,D&=65535,M&=65535,T[I]=M<<16|D}return new a(T,T[T.length-1]&-2147483648?-1:0)};function k(P,A){return P.add(b(A))}t.j=function(P){if(_(this)||_(P))return d;if(w(this))return w(P)?b(this).j(b(P)):b(b(this).j(P));if(w(P))return b(this.j(b(P)));if(0>this.l(p)&&0>P.l(p))return c(this.m()*P.m());for(var A=this.g.length+P.g.length,T=[],O=0;O<2*A;O++)T[O]=0;for(O=0;O<this.g.length;O++)for(var I=0;I<P.g.length;I++){var D=this.i(O)>>>16,M=this.i(O)&65535,ie=P.i(I)>>>16,be=P.i(I)&65535;T[2*O+2*I]+=M*be,F(T,2*O+2*I),T[2*O+2*I+1]+=D*be,F(T,2*O+2*I+1),T[2*O+2*I+1]+=M*ie,F(T,2*O+2*I+1),T[2*O+2*I+2]+=D*ie,F(T,2*O+2*I+2)}for(O=0;O<A;O++)T[O]=T[2*O+1]<<16|T[2*O];for(O=A;O<2*A;O++)T[O]=0;return new a(T,0)};function F(P,A){for(;(P[A]&65535)!=P[A];)P[A+1]+=P[A]>>>16,P[A]&=65535,A++}function N(P,A){this.g=P,this.h=A}function B(P,A){if(_(A))throw Error("division by zero");if(_(P))return new N(d,d);if(w(P))return A=B(b(P),A),new N(b(A.g),b(A.h));if(w(A))return A=B(P,b(A)),new N(b(A.g),A.h);if(30<P.g.length){if(w(P)||w(A))throw Error("slowDivide_ only works with positive integers.");for(var T=m,O=A;0>=O.l(P);)T=X(T),O=X(O);var I=G(T,1),D=G(O,1);for(O=G(O,2),T=G(T,2);!_(O);){var M=D.add(O);0>=M.l(P)&&(I=I.add(T),D=M),O=G(O,1),T=G(T,1)}return A=k(P,I.j(A)),new N(I,A)}for(I=d;0<=P.l(A);){for(T=Math.max(1,Math.floor(P.m()/A.m())),O=Math.ceil(Math.log(T)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),D=c(T),M=D.j(A);w(M)||0<M.l(P);)T-=O,D=c(T),M=D.j(A);_(D)&&(D=m),I=I.add(D),P=k(P,M)}return new N(I,P)}t.A=function(P){return B(this,P).h},t.and=function(P){for(var A=Math.max(this.g.length,P.g.length),T=[],O=0;O<A;O++)T[O]=this.i(O)&P.i(O);return new a(T,this.h&P.h)},t.or=function(P){for(var A=Math.max(this.g.length,P.g.length),T=[],O=0;O<A;O++)T[O]=this.i(O)|P.i(O);return new a(T,this.h|P.h)},t.xor=function(P){for(var A=Math.max(this.g.length,P.g.length),T=[],O=0;O<A;O++)T[O]=this.i(O)^P.i(O);return new a(T,this.h^P.h)};function X(P){for(var A=P.g.length+1,T=[],O=0;O<A;O++)T[O]=P.i(O)<<1|P.i(O-1)>>>31;return new a(T,P.h)}function G(P,A){var T=A>>5;A%=32;for(var O=P.g.length-T,I=[],D=0;D<O;D++)I[D]=0<A?P.i(D+T)>>>A|P.i(D+T+1)<<32-A:P.i(D+T);return new a(I,P.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,L8=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=f,fd=a}).apply(typeof n6<"u"?n6:typeof self<"u"?self:typeof window<"u"?window:{});var Ex=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D8,X1,O8,s2,D_,M8,j8,B8;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,V,Q){return y==Array.prototype||y==Object.prototype||(y[V]=Q.value),y};function r(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ex=="object"&&Ex];for(var V=0;V<y.length;++V){var Q=y[V];if(Q&&Q.Math==Math)return Q}throw Error("Cannot find global object")}var n=r(this);function i(y,V){if(V)e:{var Q=n;y=y.split(".");for(var me=0;me<y.length-1;me++){var ze=y[me];if(!(ze in Q))break e;Q=Q[ze]}y=y[y.length-1],me=Q[y],V=V(me),V!=me&&V!=null&&e(Q,y,{configurable:!0,writable:!0,value:V})}}function s(y,V){y instanceof String&&(y+="");var Q=0,me=!1,ze={next:function(){if(!me&&Q<y.length){var it=Q++;return{value:V(it,y[it]),done:!1}}return me=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}i("Array.prototype.values",function(y){return y||function(){return s(this,function(V,Q){return Q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(y){var V=typeof y;return V=V!="object"?V:y?Array.isArray(y)?"array":V:"null",V=="array"||V=="object"&&typeof y.length=="number"}function c(y){var V=typeof y;return V=="object"&&y!=null||V=="function"}function f(y,V,Q){return y.call.apply(y.bind,arguments)}function d(y,V,Q){if(!y)throw Error();if(2<arguments.length){var me=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,me),y.apply(V,ze)}}return function(){return y.apply(V,arguments)}}function m(y,V,Q){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:d,m.apply(null,arguments)}function p(y,V){var Q=Array.prototype.slice.call(arguments,1);return function(){var me=Q.slice();return me.push.apply(me,arguments),y.apply(this,me)}}function _(y,V){function Q(){}Q.prototype=V.prototype,y.aa=V.prototype,y.prototype=new Q,y.prototype.constructor=y,y.Qb=function(me,ze,it){for(var It=Array(arguments.length-2),dn=2;dn<arguments.length;dn++)It[dn-2]=arguments[dn];return V.prototype[ze].apply(me,It)}}function w(y){const V=y.length;if(0<V){const Q=Array(V);for(let me=0;me<V;me++)Q[me]=y[me];return Q}return[]}function b(y,V){for(let Q=1;Q<arguments.length;Q++){const me=arguments[Q];if(l(me)){const ze=y.length||0,it=me.length||0;y.length=ze+it;for(let It=0;It<it;It++)y[ze+It]=me[It]}else y.push(me)}}class k{constructor(V,Q){this.i=V,this.j=Q,this.h=0,this.g=null}get(){let V;return 0<this.h?(this.h--,V=this.g,this.g=V.next,V.next=null):V=this.i(),V}}function F(y){return/^[\s\xa0]*$/.test(y)}function N(){var y=o.navigator;return y&&(y=y.userAgent)?y:""}function B(y){return B[" "](y),y}B[" "]=function(){};var X=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function G(y,V,Q){for(const me in y)V.call(Q,y[me],me,y)}function P(y,V){for(const Q in y)V.call(void 0,y[Q],Q,y)}function A(y){const V={};for(const Q in y)V[Q]=y[Q];return V}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(y,V){let Q,me;for(let ze=1;ze<arguments.length;ze++){me=arguments[ze];for(Q in me)y[Q]=me[Q];for(let it=0;it<T.length;it++)Q=T[it],Object.prototype.hasOwnProperty.call(me,Q)&&(y[Q]=me[Q])}}function I(y){var V=1;y=y.split(":");const Q=[];for(;0<V&&y.length;)Q.push(y.shift()),V--;return y.length&&Q.push(y.join(":")),Q}function D(y){o.setTimeout(()=>{throw y},0)}function M(){var y=J;let V=null;return y.g&&(V=y.g,y.g=y.g.next,y.g||(y.h=null),V.next=null),V}class ie{constructor(){this.h=this.g=null}add(V,Q){const me=be.get();me.set(V,Q),this.h?this.h.next=me:this.g=me,this.h=me}}var be=new k(()=>new Ne,y=>y.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(V,Q){this.h=V,this.g=Q,this.next=null}reset(){this.next=this.g=this.h=null}}let we,le=!1,J=new ie,ue=()=>{const y=o.Promise.resolve(void 0);we=()=>{y.then(ee)}};var ee=()=>{for(var y;y=M();){try{y.h.call(y.g)}catch(Q){D(Q)}var V=be;V.j(y),100>V.h&&(V.h++,y.next=V.g,V.g=y)}le=!1};function C(){this.s=this.s,this.C=this.C}C.prototype.s=!1,C.prototype.ma=function(){this.s||(this.s=!0,this.N())},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(y,V){this.type=y,this.g=this.target=V,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var W=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var y=!1,V=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const Q=()=>{};o.addEventListener("test",Q,V),o.removeEventListener("test",Q,V)}catch{}return y})();function Y(y,V){if(U.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var Q=this.type=y.type,me=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=V,V=y.relatedTarget){if(X){e:{try{B(V.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(V=null)}}else Q=="mouseover"?V=y.fromElement:Q=="mouseout"&&(V=y.toElement);this.relatedTarget=V,me?(this.clientX=me.clientX!==void 0?me.clientX:me.pageX,this.clientY=me.clientY!==void 0?me.clientY:me.pageY,this.screenX=me.screenX||0,this.screenY=me.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:ae[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&Y.aa.h.call(this)}}_(Y,U);var ae={2:"touch",3:"pen",4:"mouse"};Y.prototype.h=function(){Y.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),he=0;function xe(y,V,Q,me,ze){this.listener=y,this.proxy=null,this.src=V,this.type=Q,this.capture=!!me,this.ha=ze,this.key=++he,this.da=this.fa=!1}function Ee(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Fe(y){this.src=y,this.g={},this.h=0}Fe.prototype.add=function(y,V,Q,me,ze){var it=y.toString();y=this.g[it],y||(y=this.g[it]=[],this.h++);var It=Je(y,V,me,ze);return-1<It?(V=y[It],Q||(V.fa=!1)):(V=new xe(V,this.src,it,!!me,ze),V.fa=Q,y.push(V)),V};function oe(y,V){var Q=V.type;if(Q in y.g){var me=y.g[Q],ze=Array.prototype.indexOf.call(me,V,void 0),it;(it=0<=ze)&&Array.prototype.splice.call(me,ze,1),it&&(Ee(V),y.g[Q].length==0&&(delete y.g[Q],y.h--))}}function Je(y,V,Q,me){for(var ze=0;ze<y.length;++ze){var it=y[ze];if(!it.da&&it.listener==V&&it.capture==!!Q&&it.ha==me)return ze}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),fe={};function ot(y,V,Q,me,ze){if(Array.isArray(V)){for(var it=0;it<V.length;it++)ot(y,V[it],Q,me,ze);return null}return Q=yt(Q),y&&y[pe]?y.K(V,Q,c(me)?!!me.capture:!1,ze):et(y,V,Q,!1,me,ze)}function et(y,V,Q,me,ze,it){if(!V)throw Error("Invalid event type");var It=c(ze)?!!ze.capture:!!ze,dn=pt(y);if(dn||(y[Re]=dn=new Fe(y)),Q=dn.add(V,Q,me,It,it),Q.proxy)return Q;if(me=st(),Q.proxy=me,me.src=y,me.listener=Q,y.addEventListener)W||(ze=It),ze===void 0&&(ze=!1),y.addEventListener(V.toString(),me,ze);else if(y.attachEvent)y.attachEvent(Ue(V.toString()),me);else if(y.addListener&&y.removeListener)y.addListener(me);else throw Error("addEventListener and attachEvent are unavailable.");return Q}function st(){function y(Q){return V.call(y.src,y.listener,Q)}const V=ut;return y}function K(y,V,Q,me,ze){if(Array.isArray(V))for(var it=0;it<V.length;it++)K(y,V[it],Q,me,ze);else me=c(me)?!!me.capture:!!me,Q=yt(Q),y&&y[pe]?(y=y.i,V=String(V).toString(),V in y.g&&(it=y.g[V],Q=Je(it,Q,me,ze),-1<Q&&(Ee(it[Q]),Array.prototype.splice.call(it,Q,1),it.length==0&&(delete y.g[V],y.h--)))):y&&(y=pt(y))&&(V=y.g[V.toString()],y=-1,V&&(y=Je(V,Q,me,ze)),(Q=-1<y?V[y]:null)&&Te(Q))}function Te(y){if(typeof y!="number"&&y&&!y.da){var V=y.src;if(V&&V[pe])oe(V.i,y);else{var Q=y.type,me=y.proxy;V.removeEventListener?V.removeEventListener(Q,me,y.capture):V.detachEvent?V.detachEvent(Ue(Q),me):V.addListener&&V.removeListener&&V.removeListener(me),(Q=pt(V))?(oe(Q,y),Q.h==0&&(Q.src=null,V[Re]=null)):Ee(y)}}}function Ue(y){return y in fe?fe[y]:fe[y]="on"+y}function ut(y,V){if(y.da)y=!0;else{V=new Y(V,this);var Q=y.listener,me=y.ha||y.src;y.fa&&Te(y),y=Q.call(me,V)}return y}function pt(y){return y=y[Re],y instanceof Fe?y:null}var xt="__closure_events_fn_"+(1e9*Math.random()>>>0);function yt(y){return typeof y=="function"?y:(y[xt]||(y[xt]=function(V){return y.handleEvent(V)}),y[xt])}function ht(){C.call(this),this.i=new Fe(this),this.M=this,this.F=null}_(ht,C),ht.prototype[pe]=!0,ht.prototype.removeEventListener=function(y,V,Q,me){K(this,y,V,Q,me)};function Mt(y,V){var Q,me=y.F;if(me)for(Q=[];me;me=me.F)Q.push(me);if(y=y.M,me=V.type||V,typeof V=="string")V=new U(V,y);else if(V instanceof U)V.target=V.target||y;else{var ze=V;V=new U(me,y),O(V,ze)}if(ze=!0,Q)for(var it=Q.length-1;0<=it;it--){var It=V.g=Q[it];ze=Lt(It,me,!0,V)&&ze}if(It=V.g=y,ze=Lt(It,me,!0,V)&&ze,ze=Lt(It,me,!1,V)&&ze,Q)for(it=0;it<Q.length;it++)It=V.g=Q[it],ze=Lt(It,me,!1,V)&&ze}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var y=this.i,V;for(V in y.g){for(var Q=y.g[V],me=0;me<Q.length;me++)Ee(Q[me]);delete y.g[V],y.h--}}this.F=null},ht.prototype.K=function(y,V,Q,me){return this.i.add(String(y),V,!1,Q,me)},ht.prototype.L=function(y,V,Q,me){return this.i.add(String(y),V,!0,Q,me)};function Lt(y,V,Q,me){if(V=y.i.g[String(V)],!V)return!0;V=V.concat();for(var ze=!0,it=0;it<V.length;++it){var It=V[it];if(It&&!It.da&&It.capture==Q){var dn=It.listener,ii=It.ha||It.src;It.fa&&oe(y.i,It),ze=dn.call(ii,me)!==!1&&ze}}return ze&&!me.defaultPrevented}function Ot(y,V,Q){if(typeof y=="function")Q&&(y=m(y,Q));else if(y&&typeof y.handleEvent=="function")y=m(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(V)?-1:o.setTimeout(y,V||0)}function wt(y){y.g=Ot(()=>{y.g=null,y.i&&(y.i=!1,wt(y))},y.l);const V=y.h;y.h=null,y.m.apply(null,V)}class Nt extends C{constructor(V,Q){super(),this.m=V,this.l=Q,this.h=null,this.i=!1,this.g=null}j(V){this.h=arguments,this.g?this.i=!0:wt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cr(y){C.call(this),this.h=y,this.g={}}_(cr,C);var er=[];function qt(y){G(y.g,function(V,Q){this.g.hasOwnProperty(Q)&&Te(V)},y),y.g={}}cr.prototype.N=function(){cr.aa.N.call(this),qt(this)},cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wr=o.JSON.stringify,rn=o.JSON.parse,Me=class{stringify(y){return o.JSON.stringify(y,void 0)}parse(y){return o.JSON.parse(y,void 0)}};function jt(){}jt.prototype.h=null;function Vt(y){return y.h||(y.h=y.i())}function tr(){}var sr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ur(){U.call(this,"d")}_(ur,U);function Yt(){U.call(this,"c")}_(Yt,U);var mr={},an=null;function Ur(){return an=an||new ht}mr.La="serverreachability";function Cn(y){U.call(this,mr.La,y)}_(Cn,U);function In(y){const V=Ur();Mt(V,new Cn(V))}mr.STAT_EVENT="statevent";function nr(y,V){U.call(this,mr.STAT_EVENT,y),this.stat=V}_(nr,U);function Hr(y){const V=Ur();Mt(V,new nr(V,y))}mr.Ma="timingevent";function ns(y,V){U.call(this,mr.Ma,y),this.size=V}_(ns,U);function Dn(y,V){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){y()},V)}function $i(){this.g=!0}$i.prototype.xa=function(){this.g=!1};function bn(y,V,Q,me,ze,it){y.info(function(){if(y.g)if(it)for(var It="",dn=it.split("&"),ii=0;ii<dn.length;ii++){var qr=dn[ii].split("=");if(1<qr.length){var Qr=qr[0];qr=qr[1];var gn=Qr.split("_");It=2<=gn.length&&gn[1]=="type"?It+(Qr+"="+qr+"&"):It+(Qr+"=redacted&")}}else It=null;else It=it;return"XMLHTTP REQ ("+me+") [attempt "+ze+"]: "+V+`
`+Q+`
`+It})}function Jn(y,V,Q,me,ze,it,It){y.info(function(){return"XMLHTTP RESP ("+me+") [ attempt "+ze+"]: "+V+`
`+Q+`
`+it+" "+It})}function re(y,V,Q,me){y.info(function(){return"XMLHTTP TEXT ("+V+"): "+ve(y,Q)+(me?" "+me:"")})}function Ae(y,V){y.info(function(){return"TIMEOUT: "+V})}$i.prototype.info=function(){};function ve(y,V){if(!y.g)return V;if(!V)return null;try{var Q=JSON.parse(V);if(Q){for(y=0;y<Q.length;y++)if(Array.isArray(Q[y])){var me=Q[y];if(!(2>me.length)){var ze=me[1];if(Array.isArray(ze)&&!(1>ze.length)){var it=ze[0];if(it!="noop"&&it!="stop"&&it!="close")for(var It=1;It<ze.length;It++)ze[It]=""}}}}return wr(Q)}catch{return V}}var ye={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ce={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ie;function He(){}_(He,jt),He.prototype.g=function(){return new XMLHttpRequest},He.prototype.i=function(){return{}},Ie=new He;function tt(y,V,Q,me){this.j=y,this.i=V,this.l=Q,this.R=me||1,this.U=new cr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ge}function Ge(){this.i=null,this.g="",this.h=!1}var Ke={},Qe={};function _t(y,V,Q){y.L=1,y.v=Vo(Rs(V)),y.m=Q,y.P=!0,Ft(y,null)}function Ft(y,V){y.F=Date.now(),Tt(y),y.A=Rs(y.v);var Q=y.A,me=y.R;Array.isArray(me)||(me=[String(me)]),_r(Q.i,"t",me),y.C=0,Q=y.j.J,y.h=new Ge,y.g=Wo(y.j,Q?V:null,!y.m),0<y.O&&(y.M=new Nt(m(y.Y,y,y.g),y.O)),V=y.U,Q=y.g,me=y.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(er[0]=ze.toString()),ze=er);for(var it=0;it<ze.length;it++){var It=ot(Q,ze[it],me||V.handleEvent,!1,V.h||V);if(!It)break;V.g[It.key]=It}V=y.H?A(y.H):{},y.m?(y.u||(y.u="POST"),V["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,V)):(y.u="GET",y.g.ea(y.A,y.u,null,V)),In(),bn(y.i,y.u,y.A,y.l,y.R,y.m)}tt.prototype.ca=function(y){y=y.target;const V=this.M;V&&ys(y)==3?V.j():this.Y(y)},tt.prototype.Y=function(y){try{if(y==this.g)e:{const gn=ys(this.g);var V=this.g.Ba();const Gs=this.g.Z();if(!(3>gn)&&(gn!=3||this.g&&(this.h.h||this.g.oa()||Hl(this.g)))){this.J||gn!=4||V==7||(V==8||0>=Gs?In(3):In(2)),on(this);var Q=this.g.Z();this.X=Q;t:if(Ht(this)){var me=Hl(this.g);y="";var ze=me.length,it=ys(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),Dr(this);var It="";break t}this.h.i=new o.TextDecoder}for(V=0;V<ze;V++)this.h.h=!0,y+=this.h.i.decode(me[V],{stream:!(it&&V==ze-1)});me.length=0,this.h.g+=y,this.C=0,It=this.h.g}else It=this.g.oa();if(this.o=Q==200,Jn(this.i,this.u,this.A,this.l,this.R,gn,Q),this.o){if(this.T&&!this.K){t:{if(this.g){var dn,ii=this.g;if((dn=ii.g?ii.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(dn)){var qr=dn;break t}}qr=null}if(Q=qr)re(this.i,this.l,Q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Aa(this,Q);else{this.o=!1,this.s=3,Hr(12),fn(this),Dr(this);break e}}if(this.P){Q=!0;let Ms;for(;!this.J&&this.C<It.length;)if(Ms=Rt(this,It),Ms==Qe){gn==4&&(this.s=4,Hr(14),Q=!1),re(this.i,this.l,null,"[Incomplete Response]");break}else if(Ms==Ke){this.s=4,Hr(15),re(this.i,this.l,It,"[Invalid Chunk]"),Q=!1;break}else re(this.i,this.l,Ms,null),Aa(this,Ms);if(Ht(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gn!=4||It.length!=0||this.h.h||(this.s=1,Hr(16),Q=!1),this.o=this.o&&Q,!Q)re(this.i,this.l,It,"[Invalid Chunked Response]"),fn(this),Dr(this);else if(0<It.length&&!this.W){this.W=!0;var Qr=this.j;Qr.g==this&&Qr.ba&&!Qr.M&&(Qr.j.info("Great, no buffering proxy detected. Bytes received: "+It.length),nn(Qr),Qr.M=!0,Hr(11))}}else re(this.i,this.l,It,null),Aa(this,It);gn==4&&fn(this),this.o&&!this.J&&(gn==4?hn(this.j,this):(this.o=!1,Tt(this)))}else ws(this.g),Q==400&&0<It.indexOf("Unknown SID")?(this.s=3,Hr(12)):(this.s=0,Hr(13)),fn(this),Dr(this)}}}catch{}finally{}};function Ht(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function Rt(y,V){var Q=y.C,me=V.indexOf(`
`,Q);return me==-1?Qe:(Q=Number(V.substring(Q,me)),isNaN(Q)?Ke:(me+=1,me+Q>V.length?Qe:(V=V.slice(me,me+Q),y.C=me+Q,V)))}tt.prototype.cancel=function(){this.J=!0,fn(this)};function Tt(y){y.S=Date.now()+y.I,br(y,y.I)}function br(y,V){if(y.B!=null)throw Error("WatchDog timer not null");y.B=Dn(m(y.ba,y),V)}function on(y){y.B&&(o.clearTimeout(y.B),y.B=null)}tt.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(Ae(this.i,this.A),this.L!=2&&(In(),Hr(17)),fn(this),this.s=2,Dr(this)):br(this,this.S-y)};function Dr(y){y.j.G==0||y.J||hn(y.j,y)}function fn(y){on(y);var V=y.M;V&&typeof V.ma=="function"&&V.ma(),y.M=null,qt(y.U),y.g&&(V=y.g,y.g=null,V.abort(),V.ma())}function Aa(y,V){try{var Q=y.j;if(Q.G!=0&&(Q.g==y||En(Q.h,y))){if(!y.K&&En(Q.h,y)&&Q.G==3){try{var me=Q.Da.g.parse(V)}catch{me=null}if(Array.isArray(me)&&me.length==3){var ze=me;if(ze[0]==0){e:if(!Q.u){if(Q.g)if(Q.g.F+3e3<y.F)Zn(Q),Se(Q);else break e;Ar(Q),Hr(18)}}else Q.za=ze[1],0<Q.za-Q.T&&37500>ze[2]&&Q.F&&Q.v==0&&!Q.C&&(Q.C=Dn(m(Q.Za,Q),6e3));if(1>=Bo(Q.h)&&Q.ca){try{Q.ca()}catch{}Q.ca=void 0}}else Pn(Q,11)}else if((y.K||Q.g==y)&&Zn(Q),!F(V))for(ze=Q.Da.g.parse(V),V=0;V<ze.length;V++){let qr=ze[V];if(Q.T=qr[0],qr=qr[1],Q.G==2)if(qr[0]=="c"){Q.K=qr[1],Q.ia=qr[2];const Qr=qr[3];Qr!=null&&(Q.la=Qr,Q.j.info("VER="+Q.la));const gn=qr[4];gn!=null&&(Q.Aa=gn,Q.j.info("SVER="+Q.Aa));const Gs=qr[5];Gs!=null&&typeof Gs=="number"&&0<Gs&&(me=1.5*Gs,Q.L=me,Q.j.info("backChannelRequestTimeoutMs_="+me)),me=Q;const Ms=y.g;if(Ms){const La=Ms.g?Ms.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(La){var it=me.h;it.g||La.indexOf("spdy")==-1&&La.indexOf("quic")==-1&&La.indexOf("h2")==-1||(it.j=it.l,it.g=new Set,it.h&&(lu(it,it.h),it.h=null))}if(me.D){const qo=Ms.g?Ms.g.getResponseHeader("X-HTTP-Session-Id"):null;qo&&(me.ya=qo,Yr(me.I,me.D,qo))}}Q.G=3,Q.l&&Q.l.ua(),Q.ba&&(Q.R=Date.now()-y.F,Q.j.info("Handshake RTT: "+Q.R+"ms")),me=Q;var It=y;if(me.qa=So(me,me.J?me.ia:null,me.W),It.K){ui(me.h,It);var dn=It,ii=me.L;ii&&(dn.I=ii),dn.B&&(on(dn),Tt(dn)),me.g=It}else xr(me);0<Q.i.length&&Ve(Q)}else qr[0]!="stop"&&qr[0]!="close"||Pn(Q,7);else Q.G==3&&(qr[0]=="stop"||qr[0]=="close"?qr[0]=="stop"?Pn(Q,7):Z(Q):qr[0]!="noop"&&Q.l&&Q.l.ta(qr),Q.v=0)}}In(4)}catch{}}var Ca=class{constructor(y,V){this.g=y,this.map=V}};function Ws(y){this.l=y||10,o.PerformanceNavigationTiming?(y=o.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ni(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Bo(y){return y.h?1:y.g?y.g.size:0}function En(y,V){return y.h?y.h==V:y.g?y.g.has(V):!1}function lu(y,V){y.g?y.g.add(V):y.h=V}function ui(y,V){y.h&&y.h==V?y.h=null:y.g&&y.g.has(V)&&y.g.delete(V)}Ws.prototype.cancel=function(){if(this.i=cu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function cu(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let V=y.i;for(const Q of y.g.values())V=V.concat(Q.D);return V}return w(y.i)}function Ul(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(l(y)){for(var V=[],Q=y.length,me=0;me<Q;me++)V.push(y[me]);return V}V=[],Q=0;for(me in y)V[Q++]=y[me];return V}function Ia(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(l(y)||typeof y=="string"){var V=[];y=y.length;for(var Q=0;Q<y;Q++)V.push(Q);return V}V=[],Q=0;for(const me in y)V[Q++]=me;return V}}}function Na(y,V){if(y.forEach&&typeof y.forEach=="function")y.forEach(V,void 0);else if(l(y)||typeof y=="string")Array.prototype.forEach.call(y,V,void 0);else for(var Q=Ia(y),me=Ul(y),ze=me.length,it=0;it<ze;it++)V.call(void 0,me[it],Q&&Q[it],y)}var Ps=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zl(y,V){if(y){y=y.split("&");for(var Q=0;Q<y.length;Q++){var me=y[Q].indexOf("="),ze=null;if(0<=me){var it=y[Q].substring(0,me);ze=y[Q].substring(me+1)}else it=y[Q];V(it,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function Tn(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof Tn){this.h=y.h,$l(this,y.j),this.o=y.o,this.g=y.g,fl(this,y.s),this.l=y.l;var V=y.i,Q=new Fs;Q.i=V.i,V.g&&(Q.g=new Map(V.g),Q.h=V.h),hl(this,Q),this.m=y.m}else y&&(V=String(y).match(Ps))?(this.h=!1,$l(this,V[1]||"",!0),this.o=Wr(V[2]||""),this.g=Wr(V[3]||"",!0),fl(this,V[4]),this.l=Wr(V[5]||"",!0),hl(this,V[6]||"",!0),this.m=Wr(V[7]||"")):(this.h=!1,this.i=new Fs(null,this.h))}Tn.prototype.toString=function(){var y=[],V=this.j;V&&y.push(ca(V,xc,!0),":");var Q=this.g;return(Q||V=="file")&&(y.push("//"),(V=this.o)&&y.push(ca(V,xc,!0),"@"),y.push(encodeURIComponent(String(Q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Q=this.s,Q!=null&&y.push(":",String(Q))),(Q=this.l)&&(this.g&&Q.charAt(0)!="/"&&y.push("/"),y.push(ca(Q,Q.charAt(0)=="/"?rf:tf,!0))),(Q=this.i.toString())&&y.push("?",Q),(Q=this.m)&&y.push("#",ca(Q,Uo)),y.join("")};function Rs(y){return new Tn(y)}function $l(y,V,Q){y.j=Q?Wr(V,!0):V,y.j&&(y.j=y.j.replace(/:$/,""))}function fl(y,V){if(V){if(V=Number(V),isNaN(V)||0>V)throw Error("Bad port number "+V);y.s=V}else y.s=null}function hl(y,V,Q){V instanceof Fs?(y.i=V,_o(y.i,y.h)):(Q||(V=ca(V,vc)),y.i=new Fs(V,y.h))}function Yr(y,V,Q){y.i.set(V,Q)}function Vo(y){return Yr(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function Wr(y,V){return y?V?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function ca(y,V,Q){return typeof y=="string"?(y=encodeURI(y).replace(V,gc),Q&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function gc(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var xc=/[#\/\?@]/g,tf=/[#\?:]/g,rf=/[#\?]/g,vc=/[#\?@]/g,Uo=/#/g;function Fs(y,V){this.h=this.g=null,this.i=y||null,this.j=!!V}function is(y){y.g||(y.g=new Map,y.h=0,y.i&&zl(y.i,function(V,Q){y.add(decodeURIComponent(V.replace(/\+/g," ")),Q)}))}t=Fs.prototype,t.add=function(y,V){is(this),this.i=null,y=Pa(this,y);var Q=this.g.get(y);return Q||this.g.set(y,Q=[]),Q.push(V),this.h+=1,this};function Ls(y,V){is(y),V=Pa(y,V),y.g.has(V)&&(y.i=null,y.h-=y.g.get(V).length,y.g.delete(V))}function ua(y,V){return is(y),V=Pa(y,V),y.g.has(V)}t.forEach=function(y,V){is(this),this.g.forEach(function(Q,me){Q.forEach(function(ze){y.call(V,ze,me,this)},this)},this)},t.na=function(){is(this);const y=Array.from(this.g.values()),V=Array.from(this.g.keys()),Q=[];for(let me=0;me<V.length;me++){const ze=y[me];for(let it=0;it<ze.length;it++)Q.push(V[me])}return Q},t.V=function(y){is(this);let V=[];if(typeof y=="string")ua(this,y)&&(V=V.concat(this.g.get(Pa(this,y))));else{y=Array.from(this.g.values());for(let Q=0;Q<y.length;Q++)V=V.concat(y[Q])}return V},t.set=function(y,V){return is(this),this.i=null,y=Pa(this,y),ua(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[V]),this.h+=1,this},t.get=function(y,V){return y?(y=this.V(y),0<y.length?String(y[0]):V):V};function _r(y,V,Q){Ls(y,V),0<Q.length&&(y.i=null,y.g.set(Pa(y,V),w(Q)),y.h+=Q.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],V=Array.from(this.g.keys());for(var Q=0;Q<V.length;Q++){var me=V[Q];const it=encodeURIComponent(String(me)),It=this.V(me);for(me=0;me<It.length;me++){var ze=it;It[me]!==""&&(ze+="="+encodeURIComponent(String(It[me]))),y.push(ze)}}return this.i=y.join("&")};function Pa(y,V){return V=String(V),y.j&&(V=V.toLowerCase()),V}function _o(y,V){V&&!y.j&&(is(y),y.i=null,y.g.forEach(function(Q,me){var ze=me.toLowerCase();me!=ze&&(Ls(this,me),_r(this,ze,Q))},y)),y.j=V}function Ph(y,V){const Q=new $i;if(o.Image){const me=new Image;me.onload=p(yi,Q,"TestLoadImage: loaded",!0,V,me),me.onerror=p(yi,Q,"TestLoadImage: error",!1,V,me),me.onabort=p(yi,Q,"TestLoadImage: abort",!1,V,me),me.ontimeout=p(yi,Q,"TestLoadImage: timeout",!1,V,me),o.setTimeout(function(){me.ontimeout&&me.ontimeout()},1e4),me.src=y}else V(!1)}function nf(y,V){const Q=new $i,me=new AbortController,ze=setTimeout(()=>{me.abort(),yi(Q,"TestPingServer: timeout",!1,V)},1e4);fetch(y,{signal:me.signal}).then(it=>{clearTimeout(ze),it.ok?yi(Q,"TestPingServer: ok",!0,V):yi(Q,"TestPingServer: server error",!1,V)}).catch(()=>{clearTimeout(ze),yi(Q,"TestPingServer: error",!1,V)})}function yi(y,V,Q,me,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),me(Q)}catch{}}function zo(){this.g=new Me}function sf(y,V,Q){const me=Q||"";try{Na(y,function(ze,it){let It=ze;c(ze)&&(It=wr(ze)),V.push(me+it+"="+encodeURIComponent(It))})}catch(ze){throw V.push(me+"type="+encodeURIComponent("_badmap")),ze}}function $o(y){this.l=y.Ub||null,this.j=y.eb||!1}_($o,jt),$o.prototype.g=function(){return new bo(this.l,this.j)},$o.prototype.i=(function(y){return function(){return y}})({});function bo(y,V){ht.call(this),this.D=y,this.o=V,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(bo,ht),t=bo.prototype,t.open=function(y,V){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=V,this.readyState=1,qs(this)},t.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const V={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(V.body=y),(this.D||o).fetch(new Request(this.A,V)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},t.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,qs(this)),this.g&&(this.readyState=3,qs(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yc(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function yc(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}t.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var V=y.value?y.value:new Uint8Array(0);(V=this.v.decode(V,{stream:!y.done}))&&(this.response=this.responseText+=V)}y.done?Ds(this):qs(this),this.readyState==3&&yc(this)}},t.Ra=function(y){this.g&&(this.response=this.responseText=y,Ds(this))},t.Qa=function(y){this.g&&(this.response=y,Ds(this))},t.ga=function(){this.g&&Ds(this)};function Ds(y){y.readyState=4,y.l=null,y.j=null,y.v=null,qs(y)}t.setRequestHeader=function(y,V){this.u.append(y,V)},t.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],V=this.h.entries();for(var Q=V.next();!Q.done;)Q=Q.value,y.push(Q[0]+": "+Q[1]),Q=V.next();return y.join(`\r
`)};function qs(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function Ra(y){let V="";return G(y,function(Q,me){V+=me,V+=":",V+=Q,V+=`\r
`}),V}function dl(y,V,Q){e:{for(me in Q){var me=!1;break e}me=!0}me||(Q=Ra(Q),typeof y=="string"?Q!=null&&encodeURIComponent(String(Q)):Yr(y,V,Q))}function Nn(y){ht.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Nn,ht);var uu=/^https?$/i,Ho=["POST","PUT"];t=Nn.prototype,t.Ha=function(y){this.J=y},t.ea=function(y,V,Q,me){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);V=V?V.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ie.g(),this.v=this.o?Vt(this.o):Vt(Ie),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(V,String(y),!0),this.B=!1}catch(it){co(this,it);return}if(y=Q||"",Q=new Map(this.headers),me)if(Object.getPrototypeOf(me)===Object.prototype)for(var ze in me)Q.set(ze,me[ze]);else if(typeof me.keys=="function"&&typeof me.get=="function")for(const it of me.keys())Q.set(it,me.get(it));else throw Error("Unknown input type for opt_headers: "+String(me));me=Array.from(Q.keys()).find(it=>it.toLowerCase()=="content-type"),ze=o.FormData&&y instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Ho,V,void 0))||me||ze||Q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[it,It]of Q)this.g.setRequestHeader(it,It);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Eo(this),this.u=!0,this.g.send(y),this.u=!1}catch(it){co(this,it)}};function co(y,V){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=V,y.m=5,pl(y),Os(y)}function pl(y){y.A||(y.A=!0,Mt(y,"complete"),Mt(y,"error"))}t.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,Mt(this,"complete"),Mt(this,"abort"),Os(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Os(this,!0)),Nn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ml(this):this.bb())},t.bb=function(){ml(this)};function ml(y){if(y.h&&typeof a<"u"&&(!y.v[1]||ys(y)!=4||y.Z()!=2)){if(y.u&&ys(y)==4)Ot(y.Ea,0,y);else if(Mt(y,"readystatechange"),ys(y)==4){y.h=!1;try{const It=y.Z();e:switch(It){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var V=!0;break e;default:V=!1}var Q;if(!(Q=V)){var me;if(me=It===0){var ze=String(y.D).match(Ps)[1]||null;!ze&&o.self&&o.self.location&&(ze=o.self.location.protocol.slice(0,-1)),me=!uu.test(ze?ze.toLowerCase():"")}Q=me}if(Q)Mt(y,"complete"),Mt(y,"success");else{y.m=6;try{var it=2<ys(y)?y.g.statusText:""}catch{it=""}y.l=it+" ["+y.Z()+"]",pl(y)}}finally{Os(y)}}}}function Os(y,V){if(y.g){Eo(y);const Q=y.g,me=y.v[0]?()=>{}:null;y.g=null,y.v=null,V||Mt(y,"ready");try{Q.onreadystatechange=me}catch{}}}function Eo(y){y.I&&(o.clearTimeout(y.I),y.I=null)}t.isActive=function(){return!!this.g};function ys(y){return y.g?y.g.readyState:0}t.Z=function(){try{return 2<ys(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(y){if(this.g){var V=this.g.responseText;return y&&V.indexOf(y)==0&&(V=V.substring(y.length)),rn(V)}};function Hl(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function ws(y){const V={};y=(y.g&&2<=ys(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let me=0;me<y.length;me++){if(F(y[me]))continue;var Q=I(y[me]);const ze=Q[0];if(Q=Q[1],typeof Q!="string")continue;Q=Q.trim();const it=V[ze]||[];V[ze]=it,it.push(Q)}P(V,function(me){return me.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ss(y,V,Q){return Q&&Q.internalChannelParams&&Q.internalChannelParams[y]||V}function L(y){this.Aa=0,this.i=[],this.j=new $i,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ss("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ss("baseRetryDelayMs",5e3,y),this.cb=ss("retryDelaySeedMs",1e4,y),this.Wa=ss("forwardChannelMaxRetries",2,y),this.wa=ss("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new Ws(y&&y.concurrentRequestLimit),this.Da=new zo,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=L.prototype,t.la=8,t.G=1,t.connect=function(y,V,Q,me){Hr(0),this.W=y,this.H=V||{},Q&&me!==void 0&&(this.H.OSID=Q,this.H.OAID=me),this.F=this.X,this.I=So(this,null,this.W),Ve(this)};function Z(y){if(Le(y),y.G==3){var V=y.U++,Q=Rs(y.I);if(Yr(Q,"SID",y.K),Yr(Q,"RID",V),Yr(Q,"TYPE","terminate"),Gt(y,Q),V=new tt(y,y.j,V),V.L=2,V.v=Vo(Rs(Q)),Q=!1,o.navigator&&o.navigator.sendBeacon)try{Q=o.navigator.sendBeacon(V.v.toString(),"")}catch{}!Q&&o.Image&&(new Image().src=V.v,Q=!0),Q||(V.g=Wo(V.j,null),V.g.ea(V.v)),V.F=Date.now(),Tt(V)}Hi(y)}function Se(y){y.g&&(nn(y),y.g.cancel(),y.g=null)}function Le(y){Se(y),y.u&&(o.clearTimeout(y.u),y.u=null),Zn(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&o.clearTimeout(y.s),y.s=null)}function Ve(y){if(!ni(y.h)&&!y.s){y.s=!0;var V=y.Ga;we||ue(),le||(we(),le=!0),J.add(V,y),y.B=0}}function dt(y,V){return Bo(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=V.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=Dn(m(y.Ga,y,V),wi(y,y.B)),y.B++,!0)}t.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const ze=new tt(this,this.j,y);let it=this.o;if(this.S&&(it?(it=A(it),O(it,this.S)):it=this.S),this.m!==null||this.O||(ze.H=it,it=null),this.P)e:{for(var V=0,Q=0;Q<this.i.length;Q++){t:{var me=this.i[Q];if("__data__"in me.map&&(me=me.map.__data__,typeof me=="string")){me=me.length;break t}me=void 0}if(me===void 0)break;if(V+=me,4096<V){V=Q;break e}if(V===4096||Q===this.i.length-1){V=Q+1;break e}}V=1e3}else V=1e3;V=Qt(this,ze,V),Q=Rs(this.I),Yr(Q,"RID",y),Yr(Q,"CVER",22),this.D&&Yr(Q,"X-HTTP-Session-Id",this.D),Gt(this,Q),it&&(this.O?V="headers="+encodeURIComponent(String(Ra(it)))+"&"+V:this.m&&dl(Q,this.m,it)),lu(this.h,ze),this.Ua&&Yr(Q,"TYPE","init"),this.P?(Yr(Q,"$req",V),Yr(Q,"SID","null"),ze.T=!0,_t(ze,Q,null)):_t(ze,Q,V),this.G=2}}else this.G==3&&(y?vt(this,y):this.i.length==0||ni(this.h)||vt(this))};function vt(y,V){var Q;V?Q=V.l:Q=y.U++;const me=Rs(y.I);Yr(me,"SID",y.K),Yr(me,"RID",Q),Yr(me,"AID",y.T),Gt(y,me),y.m&&y.o&&dl(me,y.m,y.o),Q=new tt(y,y.j,Q,y.B+1),y.m===null&&(Q.H=y.o),V&&(y.i=V.D.concat(y.i)),V=Qt(y,Q,1e3),Q.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),lu(y.h,Q),_t(Q,me,V)}function Gt(y,V){y.H&&G(y.H,function(Q,me){Yr(V,me,Q)}),y.l&&Na({},function(Q,me){Yr(V,me,Q)})}function Qt(y,V,Q){Q=Math.min(y.i.length,Q);var me=y.l?m(y.l.Na,y.l,y):null;e:{var ze=y.i;let it=-1;for(;;){const It=["count="+Q];it==-1?0<Q?(it=ze[0].g,It.push("ofs="+it)):it=0:It.push("ofs="+it);let dn=!0;for(let ii=0;ii<Q;ii++){let qr=ze[ii].g;const Qr=ze[ii].map;if(qr-=it,0>qr)it=Math.max(0,ze[ii].g-100),dn=!1;else try{sf(Qr,It,"req"+qr+"_")}catch{me&&me(Qr)}}if(dn){me=It.join("&");break e}}}return y=y.i.splice(0,Q),V.D=y,me}function xr(y){if(!y.g&&!y.u){y.Y=1;var V=y.Fa;we||ue(),le||(we(),le=!0),J.add(V,y),y.v=0}}function Ar(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=Dn(m(y.Fa,y),wi(y,y.v)),y.v++,!0)}t.Fa=function(){if(this.u=null,Wn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Dn(m(this.ab,this),y)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Hr(10),Se(this),Wn(this))};function nn(y){y.A!=null&&(o.clearTimeout(y.A),y.A=null)}function Wn(y){y.g=new tt(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var V=Rs(y.qa);Yr(V,"RID","rpc"),Yr(V,"SID",y.K),Yr(V,"AID",y.T),Yr(V,"CI",y.F?"0":"1"),!y.F&&y.ja&&Yr(V,"TO",y.ja),Yr(V,"TYPE","xmlhttp"),Gt(y,V),y.m&&y.o&&dl(V,y.m,y.o),y.L&&(y.g.I=y.L);var Q=y.g;y=y.ia,Q.L=1,Q.v=Vo(Rs(V)),Q.m=null,Q.P=!0,Ft(Q,y)}t.Za=function(){this.C!=null&&(this.C=null,Se(this),Ar(this),Hr(19))};function Zn(y){y.C!=null&&(o.clearTimeout(y.C),y.C=null)}function hn(y,V){var Q=null;if(y.g==V){Zn(y),nn(y),y.g=null;var me=2}else if(En(y.h,V))Q=V.D,ui(y.h,V),me=1;else return;if(y.G!=0){if(V.o)if(me==1){Q=V.m?V.m.length:0,V=Date.now()-V.F;var ze=y.B;me=Ur(),Mt(me,new ns(me,Q)),Ve(y)}else xr(y);else if(ze=V.s,ze==3||ze==0&&0<V.X||!(me==1&&dt(y,V)||me==2&&Ar(y)))switch(Q&&0<Q.length&&(V=y.h,V.i=V.i.concat(Q)),ze){case 1:Pn(y,5);break;case 4:Pn(y,10);break;case 3:Pn(y,6);break;default:Pn(y,2)}}}function wi(y,V){let Q=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(Q*=2),Q*V}function Pn(y,V){if(y.j.info("Error code "+V),V==2){var Q=m(y.fb,y),me=y.Xa;const ze=!me;me=new Tn(me||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||$l(me,"https"),Vo(me),ze?Ph(me.toString(),Q):nf(me.toString(),Q)}else Hr(2);y.G=0,y.l&&y.l.sa(V),Hi(y),Le(y)}t.fb=function(y){y?(this.j.info("Successfully pinged google.com"),Hr(2)):(this.j.info("Failed to ping google.com"),Hr(1))};function Hi(y){if(y.G=0,y.ka=[],y.l){const V=cu(y.h);(V.length!=0||y.i.length!=0)&&(b(y.ka,V),b(y.ka,y.i),y.h.i.length=0,w(y.i),y.i.length=0),y.l.ra()}}function So(y,V,Q){var me=Q instanceof Tn?Rs(Q):new Tn(Q);if(me.g!="")V&&(me.g=V+"."+me.g),fl(me,me.s);else{var ze=o.location;me=ze.protocol,V=V?V+"."+ze.hostname:ze.hostname,ze=+ze.port;var it=new Tn(null);me&&$l(it,me),V&&(it.g=V),ze&&fl(it,ze),Q&&(it.l=Q),me=it}return Q=y.D,V=y.ya,Q&&V&&Yr(me,Q,V),Yr(me,"VER",y.la),Gt(y,me),me}function Wo(y,V,Q){if(V&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return V=y.Ca&&!y.pa?new Nn(new $o({eb:Q})):new Nn(y.pa),V.Ha(y.J),V}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fu(){}t=fu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Wl(){}Wl.prototype.g=function(y,V){return new Ri(y,V)};function Ri(y,V){ht.call(this),this.g=new L(V),this.l=y,this.h=V&&V.messageUrlParams||null,y=V&&V.messageHeaders||null,V&&V.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=V&&V.initMessageHeaders||null,V&&V.messageContentType&&(y?y["X-WebChannel-Content-Type"]=V.messageContentType:y={"X-WebChannel-Content-Type":V.messageContentType}),V&&V.va&&(y?y["X-WebChannel-Client-Profile"]=V.va:y={"X-WebChannel-Client-Profile":V.va}),this.g.S=y,(y=V&&V.Sb)&&!F(y)&&(this.g.m=y),this.v=V&&V.supportsCrossDomainXhr||!1,this.u=V&&V.sendRawJson||!1,(V=V&&V.httpSessionIdParam)&&!F(V)&&(this.g.D=V,y=this.h,y!==null&&V in y&&(y=this.h,V in y&&delete y[V])),this.j=new fa(this)}_(Ri,ht),Ri.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ri.prototype.close=function(){Z(this.g)},Ri.prototype.o=function(y){var V=this.g;if(typeof y=="string"){var Q={};Q.__data__=y,y=Q}else this.u&&(Q={},Q.__data__=wr(y),y=Q);V.i.push(new Ca(V.Ya++,y)),V.G==3&&Ve(V)},Ri.prototype.N=function(){this.g.l=null,delete this.j,Z(this.g),delete this.g,Ri.aa.N.call(this)};function Fa(y){ur.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var V=y.__sm__;if(V){e:{for(const Q in V){y=Q;break e}y=void 0}(this.i=y)&&(y=this.i,V=V!==null&&y in V?V[y]:void 0),this.data=V}else this.data=y}_(Fa,ur);function wc(){Yt.call(this),this.status=1}_(wc,Yt);function fa(y){this.g=y}_(fa,fu),fa.prototype.ua=function(){Mt(this.g,"a")},fa.prototype.ta=function(y){Mt(this.g,new Fa(y))},fa.prototype.sa=function(y){Mt(this.g,new wc)},fa.prototype.ra=function(){Mt(this.g,"b")},Wl.prototype.createWebChannel=Wl.prototype.g,Ri.prototype.send=Ri.prototype.o,Ri.prototype.open=Ri.prototype.m,Ri.prototype.close=Ri.prototype.close,B8=function(){return new Wl},j8=function(){return Ur()},M8=mr,D_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ye.NO_ERROR=0,ye.TIMEOUT=8,ye.HTTP_ERROR=6,s2=ye,Ce.COMPLETE="complete",O8=Ce,tr.EventType=sr,sr.OPEN="a",sr.CLOSE="b",sr.ERROR="c",sr.MESSAGE="d",ht.prototype.listen=ht.prototype.K,X1=tr,Nn.prototype.listenOnce=Nn.prototype.L,Nn.prototype.getLastError=Nn.prototype.Ka,Nn.prototype.getLastErrorCode=Nn.prototype.Ba,Nn.prototype.getStatus=Nn.prototype.Z,Nn.prototype.getResponseJson=Nn.prototype.Oa,Nn.prototype.getResponseText=Nn.prototype.oa,Nn.prototype.send=Nn.prototype.ea,Nn.prototype.setWithCredentials=Nn.prototype.Ha,D8=Nn}).apply(typeof Ex<"u"?Ex:typeof self<"u"?self:typeof window<"u"?window:{});const i6="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ra.UNAUTHENTICATED=new ra(null),ra.GOOGLE_CREDENTIALS=new ra("google-credentials-uid"),ra.FIRST_PARTY=new ra("first-party-uid"),ra.MOCK_USER=new ra("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jp="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new J5("@firebase/firestore");function j0(){return th.logLevel}function yM(t){th.setLogLevel(t)}function kt(t,...e){if(th.logLevel<=ln.DEBUG){const r=e.map(t4);th.debug(`Firestore (${jp}): ${t}`,...r)}}function ps(t,...e){if(th.logLevel<=ln.ERROR){const r=e.map(t4);th.error(`Firestore (${jp}): ${t}`,...r)}}function ll(t,...e){if(th.logLevel<=ln.WARN){const r=e.map(t4);th.warn(`Firestore (${jp}): ${t}`,...r)}}function t4(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t="Unexpected state"){const e=`FIRESTORE (${jp}) INTERNAL ASSERTION FAILED: `+t;throw ps(e),new Error(e)}function lr(t,e){t||Xt()}function wM(t,e){t||Xt()}function $t(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends ru{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class U8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(ra.UNAUTHENTICATED)))}shutdown(){}}class _M{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class bM{constructor(e){this.t=e,this.currentUser=ra.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){lr(this.o===void 0);let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let s=new oa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new oa,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},o=l=>{kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((l=>o(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new oa)}}),0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(lr(typeof n.accessToken=="string"),new V8(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lr(e===null||typeof e=="string"),new ra(e)}}class EM{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=ra.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class SM{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new EM(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(ra.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class z8{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){lr(this.o===void 0);const n=s=>{s.error!=null&&kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,kt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>n(s)))};const i=s=>{kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(lr(typeof r.token=="string"),this.R=r.token,new z8(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class TM{getToken(){return Promise.resolve(new z8(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=AM(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<r&&(n+=e.charAt(i[s]%e.length))}return n}}function Lr(t,e){return t<e?-1:t>e?1:0}function pp(t,e,r){return t.length===e.length&&t.every(((n,i)=>r(n,e[i])))}function $8(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Et(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Et(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Et(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Et(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ni.fromMillis(Date.now())}static fromDate(e){return Ni.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Ni(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lr(this.nanoseconds,e.nanoseconds):Lr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pr(e)}static min(){return new pr(new Ni(0,0))}static max(){return new pr(new Ni(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,r,n){r===void 0?r=0:r>e.length&&Xt(),n===void 0?n=e.length-r:n>e.length-r&&Xt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Cm.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Cm?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const s=e.get(i),a=r.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class cn extends Cm{construct(e,r,n){return new cn(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Et(nt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((i=>i.length>0)))}return new cn(r)}static emptyPath(){return new cn([])}}const CM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pi extends Cm{construct(e,r,n){return new pi(e,r,n)}static isValidIdentifier(e){return CM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new pi(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const s=()=>{if(n.length===0)throw new Et(nt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Et(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Et(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(n+=o,i++):(s(),i++)}if(s(),a)throw new Et(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pi(r)}static emptyPath(){return new pi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.path=e}static fromPath(e){return new Wt(cn.fromString(e))}static fromName(e){return new Wt(cn.fromString(e).popFirst(5))}static empty(){return new Wt(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return cn.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Wt(new cn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,r,n,i){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=i}}function O_(t){return t.fields.find((e=>e.kind===2))}function Zh(t){return t.fields.filter((e=>e.kind!==2))}function IM(t,e){let r=Lr(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=NM(t.fields[n],e.fields[n]),r!==0)return r;return Lr(t.fields.length,e.fields.length)}mp.UNKNOWN_ID=-1;class hd{constructor(e,r){this.fieldPath=e,this.kind=r}}function NM(t,e){const r=pi.comparator(t.fieldPath,e.fieldPath);return r!==0?r:Lr(t.kind,e.kind)}class gp{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new gp(0,cl.min())}}function H8(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=pr.fromTimestamp(n===1e9?new Ni(r+1,0):new Ni(r,n));return new cl(i,Wt.empty(),e)}function W8(t){return new cl(t.readTime,t.key,-1)}class cl{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new cl(pr.min(),Wt.empty(),-1)}static max(){return new cl(pr.max(),Wt.empty(),-1)}}function n4(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Wt.comparator(t.documentKey,e.documentKey),r!==0?r:Lr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class G8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yh(t){if(t.code!==nt.FAILED_PRECONDITION||t.message!==q8)throw t;kt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Xt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new We(((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,i)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof We?r:We.resolve(r)}catch(r){return We.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):We.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):We.reject(r)}static resolve(e){return new We(((r,n)=>{r(e)}))}static reject(e){return new We(((r,n)=>{n(e)}))}static waitFor(e){return new We(((r,n)=>{let i=0,s=0,a=!1;e.forEach((o=>{++i,o.next((()=>{++s,a&&s===i&&r()}),(l=>n(l)))})),a=!0,s===i&&r()}))}static or(e){let r=We.resolve(!1);for(const n of e)r=r.next((i=>i?We.resolve(i):n()));return r}static forEach(e,r){const n=[];return e.forEach(((i,s)=>{n.push(r.call(this,i,s))})),this.waitFor(n)}static mapArray(e,r){return new We(((n,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;r(e[c]).next((f=>{a[c]=f,++o,o===s&&n(a)}),(f=>i(f)))}}))}static doWhile(e,r){return new We(((n,i)=>{const s=()=>{e()===!0?r().next((()=>{s()}),i):n()};s()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new oa,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new im(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const i=i4(n.target.error);this.V.reject(new im(e,i))}}static open(e,r,n,i){try{return new Av(r,e.transaction(i,n))}catch(s){throw new im(r,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(kt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new RM(r)}}class Wc{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Wc.S(zs())===12.2&&ps("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return kt("SimpleDb","Removing database:",e),td(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!C8())return!1;if(Wc.v())return!0;const e=zs(),r=Wc.S(e),n=0<r&&r<10,i=K8(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(kt("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;r(a)},i.onblocked=()=>{n(new im(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?n(new Et(nt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new Et(nt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new im(e,a))},i.onupgradeneeded=s=>{kt("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.O(a,i.transaction,s.oldVersion,this.version).next((()=>{kt("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,i){const s=r==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=Av.open(this.db,e,s?"readonly":"readwrite",n),l=i(o).next((c=>(o.g(),c))).catch((c=>(o.abort(c),We.reject(c)))).toPromise();return l.catch((()=>{})),await o.m,l}catch(o){const l=o,c=l.name!=="FirebaseError"&&a<3;if(kt("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function K8(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class PM{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return td(this.B.delete())}}class im extends Et{constructor(e,r){super(nt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function wh(t){return t.name==="IndexedDbTransactionError"}class RM{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(kt("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(kt("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),td(n)}add(e){return kt("SimpleDb","ADD",this.store.name,e,e),td(this.store.add(e))}get(e){return td(this.store.get(e)).next((r=>(r===void 0&&(r=null),kt("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return kt("SimpleDb","DELETE",this.store.name,e),td(this.store.delete(e))}count(){return kt("SimpleDb","COUNT",this.store.name),td(this.store.count())}U(e,r){const n=this.options(e,r),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(n.range);return new We(((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}}))}{const s=this.cursor(n),a=[];return this.W(s,((o,l)=>{a.push(l)})).next((()=>a))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new We(((i,s)=>{n.onerror=a=>{s(a.target.error)},n.onsuccess=a=>{i(a.target.result)}}))}j(e,r){kt("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const i=this.cursor(n);return this.W(i,((s,a,o)=>o.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const i=this.cursor(n);return this.W(i,r)}Y(e){const r=this.cursor({});return new We(((n,i)=>{r.onerror=s=>{const a=i4(s.target.error);i(a)},r.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((o=>{o?a.continue():n()})):n()}}))}W(e,r){const n=[];return new We(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const l=new PM(o),c=r(o.primaryKey,o.value,l);if(c instanceof We){const f=c.catch((d=>(l.done(),We.reject(d))));n.push(f)}l.isDone?i():l.K===null?o.continue():o.continue(l.K)}})).next((()=>We.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function td(t){return new We(((e,r)=>{t.onsuccess=n=>{const i=n.target.result;e(i)},t.onerror=n=>{const i=i4(n.target.error);r(i)}}))}let s6=!1;function i4(t){const e=Wc.S(zs());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new Et("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return s6||(s6=!0,setTimeout((()=>{throw n}),0)),n}}return t}class FM{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){kt("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{kt("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){wh(r)?kt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await yh(r)}await this.X(6e4)}))}}class LM{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let i=r,s=!0;return We.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!n.has(a))return kt("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,i).next((o=>{i-=o,n.add(a)}));s=!1})))).next((()=>r-i))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((i=>this.localStore.localDocuments.getNextDocuments(e,r,i,n).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this.re(i,s))).next((o=>(kt("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o)))).next((()=>a.size))}))))}re(e,r){let n=e;return r.changes.forEach(((i,s)=>{const a=W8(s);n4(a,n)>0&&(n=a)})),new cl(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Fo.oe=-1;function ag(t){return t==null}function Im(t){return t===0&&1/t==-1/0}function X8(t){return typeof t=="number"&&Number.isInteger(t)&&!Im(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=a6(e)),e=DM(t.get(r),e);return a6(e)}function DM(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const s=t.charAt(i);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function a6(t){return t+""}function jc(t){const e=t.length;if(lr(e>=2),e===2)return lr(t.charAt(0)===""&&t.charAt(1)===""),cn.emptyPath();const r=e-2,n=[];let i="";for(let s=0;s<e;){const a=t.indexOf("",s);switch((a<0||a>r)&&Xt(),t.charAt(a+1)){case"":const o=t.substring(s,a);let l;i.length===0?l=o:(i+=o,l=i,i=""),n.push(l);break;case"":i+=t.substring(s,a),i+="\0";break;case"":i+=t.substring(s,a+1);break;default:Xt()}s=a+2}return new cn(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(t,e){return[t,io(e)]}function Y8(t,e,r){return[t,io(e),r]}const OM={},MM=["prefixPath","collectionGroup","readTime","documentId"],jM=["prefixPath","collectionGroup","documentId"],BM=["collectionGroup","readTime","prefixPath","documentId"],VM=["canonicalId","targetId"],UM=["targetId","path"],zM=["path","targetId"],$M=["collectionId","parent"],HM=["indexId","uid"],WM=["uid","sequenceNumber"],qM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],GM=["indexId","uid","orderedDocumentKey"],KM=["userId","collectionPath","documentId"],XM=["userId","collectionPath","largestBatchId"],YM=["userId","collectionGroup","largestBatchId"],Q8=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],QM=[...Q8,"documentOverlays"],J8=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Z8=J8,s4=[...Z8,"indexConfiguration","indexState","indexEntries"],JM=s4,ZM=[...s4,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_ extends G8{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Hs(t,e){const r=$t(t);return Wc.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function _h(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function eC(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function tC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,r){this.comparator=e,this.root=r||_a.EMPTY}insert(e,r){return new ci(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,_a.BLACK,null,null))}remove(e){return new ci(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_a.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sx(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sx(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sx(this.root,e,this.comparator,!0)}}class Sx{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _a{constructor(e,r,n,i,s){this.key=e,this.value=r,this.color=n??_a.RED,this.left=i??_a.EMPTY,this.right=s??_a.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,s){return new _a(e??this.key,r??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,r,n),null):s===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _a.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return _a.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_a.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_a.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xt();const e=this.left.check();if(e!==this.right.check())throw Xt();return e+(this.isRed()?0:1)}}_a.EMPTY=null,_a.RED=!0,_a.BLACK=!1;_a.EMPTY=new class{constructor(){this.size=0}get key(){throw Xt()}get value(){throw Xt()}get color(){throw Xt()}get left(){throw Xt()}get right(){throw Xt()}copy(e,r,n,i,s){return this}insert(e,r,n){return new _a(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.comparator=e,this.data=new ci(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new c6(this.data.getIterator())}getIteratorFrom(e){return new c6(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof Yn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new Yn(this.comparator);return r.data=e,r}}class c6{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function T0(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.fields=e,e.sort(pi.comparator)}static empty(){return new Lo([])}unionWith(e){let r=new Yn(pi.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Lo(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return pp(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new rC("Invalid base64 string: "+s):s}})(e);return new zi(r)}static fromUint8Array(e){const r=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new zi(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zi.EMPTY_BYTE_STRING=new zi("");const tj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vu(t){if(lr(!!t),typeof t=="string"){let e=0;const r=tj.exec(t);if(lr(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ci(t.seconds),nanos:Ci(t.nanos)}}function Ci(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Uu(t){return typeof t=="string"?zi.fromBase64String(t):zi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t){var e,r;return((r=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Iv(t){const e=t.mapValue.fields.__previous_value__;return Cv(e)?Iv(e):e}function Nm(t){const e=Vu(t.mapValue.fields.__local_write_time__.timestampValue);return new Ni(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,r,n,i,s,a,o,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class rh{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new rh("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof rh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},o2={nullValue:"NULL_VALUE"};function nh(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cv(t)?4:nC(t)?9007199254740991:Nv(t)?10:11:Xt()}function Qc(t,e){if(t===e)return!0;const r=nh(t);if(r!==nh(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nm(t).isEqual(Nm(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Vu(i.timestampValue),o=Vu(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return Uu(i.bytesValue).isEqual(Uu(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return Ci(i.geoPointValue.latitude)===Ci(s.geoPointValue.latitude)&&Ci(i.geoPointValue.longitude)===Ci(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Ci(i.integerValue)===Ci(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Ci(i.doubleValue),o=Ci(s.doubleValue);return a===o?Im(a)===Im(o):isNaN(a)&&isNaN(o)}return!1})(t,e);case 9:return pp(t.arrayValue.values||[],e.arrayValue.values||[],Qc);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(l6(a)!==l6(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Qc(a[l],o[l])))return!1;return!0})(t,e);default:return Xt()}}function Pm(t,e){return(t.values||[]).find((r=>Qc(r,e)))!==void 0}function ih(t,e){if(t===e)return 0;const r=nh(t),n=nh(e);if(r!==n)return Lr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Lr(t.booleanValue,e.booleanValue);case 2:return(function(s,a){const o=Ci(s.integerValue||s.doubleValue),l=Ci(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1})(t,e);case 3:return u6(t.timestampValue,e.timestampValue);case 4:return u6(Nm(t),Nm(e));case 5:return Lr(t.stringValue,e.stringValue);case 6:return(function(s,a){const o=Uu(s),l=Uu(a);return o.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const f=Lr(o[c],l[c]);if(f!==0)return f}return Lr(o.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,a){const o=Lr(Ci(s.latitude),Ci(a.latitude));return o!==0?o:Lr(Ci(s.longitude),Ci(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return f6(t.arrayValue,e.arrayValue);case 10:return(function(s,a){var o,l,c,f;const d=s.fields||{},m=a.fields||{},p=(o=d.value)===null||o===void 0?void 0:o.arrayValue,_=(l=m.value)===null||l===void 0?void 0:l.arrayValue,w=Lr(((c=p?.values)===null||c===void 0?void 0:c.length)||0,((f=_?.values)===null||f===void 0?void 0:f.length)||0);return w!==0?w:f6(p,_)})(t.mapValue,e.mapValue);case 11:return(function(s,a){if(s===$f.mapValue&&a===$f.mapValue)return 0;if(s===$f.mapValue)return 1;if(a===$f.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},f=Object.keys(c);l.sort(),f.sort();for(let d=0;d<l.length&&d<f.length;++d){const m=Lr(l[d],f[d]);if(m!==0)return m;const p=ih(o[l[d]],c[f[d]]);if(p!==0)return p}return Lr(l.length,f.length)})(t.mapValue,e.mapValue);default:throw Xt()}}function u6(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Lr(t,e);const r=Vu(t),n=Vu(e),i=Lr(r.seconds,n.seconds);return i!==0?i:Lr(r.nanos,n.nanos)}function f6(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const s=ih(r[i],n[i]);if(s)return s}return Lr(r.length,n.length)}function xp(t){return j_(t)}function j_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=Vu(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return Uu(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return Wt.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",i=!0;for(const s of r.values||[])i?i=!1:n+=",",n+=j_(s);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${j_(r.fields[a])}`;return i+"}"})(t.mapValue):Xt()}function l2(t){switch(nh(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Iv(t);return e?16+l2(e):16;case 5:return 2*t.stringValue.length;case 6:return Uu(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,s)=>i+l2(s)),0)})(t.arrayValue);case 10:case 11:return(function(n){let i=0;return _h(n.fields,((s,a)=>{i+=s.length+l2(a)})),i})(t.mapValue);default:throw Xt()}}function _d(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function B_(t){return!!t&&"integerValue"in t}function Rm(t){return!!t&&"arrayValue"in t}function h6(t){return!!t&&"nullValue"in t}function d6(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function c2(t){return!!t&&"mapValue"in t}function Nv(t){var e,r;return((r=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function sm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _h(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=sm(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=sm(t.arrayValue.values[r]);return e}return Object.assign({},t)}function nC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const iC={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function nj(t){return"nullValue"in t?o2:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?_d(rh.empty(),Wt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Nv(t)?iC:{mapValue:{}}:Xt()}function ij(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?_d(rh.empty(),Wt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?iC:"mapValue"in t?Nv(t)?{mapValue:{}}:$f:Xt()}function p6(t,e){const r=ih(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function m6(t,e){const r=ih(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.value=e}static empty(){return new Sa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!c2(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=sm(r)}setAll(e){let r=pi.emptyPath(),n={},i=[];e.forEach(((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=o.popLast()}a?n[o.lastSegment()]=sm(a):i.push(o.lastSegment())}));const s=this.getFieldsMap(r);this.applyChanges(s,n,i)}delete(e){const r=this.field(e.popLast());c2(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Qc(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];c2(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){_h(r,((i,s)=>e[i]=s));for(const i of n)delete e[i]}clone(){return new Sa(sm(this.value))}}function sC(t){const e=[];return _h(t.fields,((r,n)=>{const i=new pi([r]);if(c2(n)){const s=sC(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new Lo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,r,n,i,s,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new di(e,0,pr.min(),pr.min(),pr.min(),Sa.empty(),0)}static newFoundDocument(e,r,n,i){return new di(e,1,r,pr.min(),n,i,0)}static newNoDocument(e,r){return new di(e,2,r,pr.min(),pr.min(),Sa.empty(),0)}static newUnknownDocument(e,r){return new di(e,3,r,pr.min(),pr.min(),Sa.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(pr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof di&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new di(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,r){this.position=e,this.inclusive=r}}function g6(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?n=Wt.comparator(Wt.fromName(a.referenceValue),r.key):n=ih(a,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function x6(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Qc(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,r="asc"){this.field=e,this.dir=r}}function sj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{}class un extends aC{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new aj(e,r,n):r==="array-contains"?new cj(e,n):r==="in"?new hC(e,n):r==="not-in"?new uj(e,n):r==="array-contains-any"?new fj(e,n):new un(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new oj(e,n):new lj(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(ih(r,this.value)):r!==null&&nh(this.value)===nh(r)&&this.matchesComparison(ih(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends aC{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new $n(e,r)}matches(e){return vp(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function vp(t){return t.op==="and"}function V_(t){return t.op==="or"}function a4(t){return oC(t)&&vp(t)}function oC(t){for(const e of t.filters)if(e instanceof $n)return!1;return!0}function U_(t){if(t instanceof un)return t.field.canonicalString()+t.op.toString()+xp(t.value);if(a4(t))return t.filters.map((e=>U_(e))).join(",");{const e=t.filters.map((r=>U_(r))).join(",");return`${t.op}(${e})`}}function lC(t,e){return t instanceof un?(function(n,i){return i instanceof un&&n.op===i.op&&n.field.isEqual(i.field)&&Qc(n.value,i.value)})(t,e):t instanceof $n?(function(n,i){return i instanceof $n&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((s,a,o)=>s&&lC(a,i.filters[o])),!0):!1})(t,e):void Xt()}function cC(t,e){const r=t.filters.concat(e);return $n.create(r,t.op)}function uC(t){return t instanceof un?(function(r){return`${r.field.canonicalString()} ${r.op} ${xp(r.value)}`})(t):t instanceof $n?(function(r){return r.op.toString()+" {"+r.getFilters().map(uC).join(" ,")+"}"})(t):"Filter"}class aj extends un{constructor(e,r,n){super(e,r,n),this.key=Wt.fromName(n.referenceValue)}matches(e){const r=Wt.comparator(e.key,this.key);return this.matchesComparison(r)}}class oj extends un{constructor(e,r){super(e,"in",r),this.keys=fC("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class lj extends un{constructor(e,r){super(e,"not-in",r),this.keys=fC("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function fC(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>Wt.fromName(n.referenceValue)))}class cj extends un{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Rm(r)&&Pm(r.arrayValue,this.value)}}class hC extends un{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Pm(this.value.arrayValue,r)}}class uj extends un{constructor(e,r){super(e,"not-in",r)}matches(e){if(Pm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Pm(this.value.arrayValue,r)}}class fj extends un{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Rm(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>Pm(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,r=null,n=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.ue=null}}function z_(t,e=null,r=[],n=[],i=null,s=null,a=null){return new hj(t,e,r,n,i,s,a)}function bd(t){const e=$t(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>U_(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(s){return s.field.canonicalString()+s.dir})(n))).join(","),ag(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>xp(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>xp(n))).join(",")),e.ue=r}return e.ue}function og(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!sj(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!lC(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!x6(t.startAt,e.startAt)&&x6(t.endAt,e.endAt)}function R2(t){return Wt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function F2(t,e){return t.filters.filter((r=>r instanceof un&&r.field.isEqual(e)))}function v6(t,e,r){let n=o2,i=!0;for(const s of F2(t,e)){let a=o2,o=!0;switch(s.op){case"<":case"<=":a=nj(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=o2}p6({value:n,inclusive:i},{value:a,inclusive:o})<0&&(n=a,i=o)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=r.position[s];p6({value:n,inclusive:i},{value:a,inclusive:r.inclusive})<0&&(n=a,i=r.inclusive);break}}return{value:n,inclusive:i}}function y6(t,e,r){let n=$f,i=!0;for(const s of F2(t,e)){let a=$f,o=!0;switch(s.op){case">=":case">":a=ij(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=$f}m6({value:n,inclusive:i},{value:a,inclusive:o})>0&&(n=a,i=o)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=r.position[s];m6({value:n,inclusive:i},{value:a,inclusive:r.inclusive})>0&&(n=a,i=r.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,r=null,n=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function dC(t,e,r,n,i,s,a,o){return new Wu(t,e,r,n,i,s,a,o)}function Bp(t){return new Wu(t)}function w6(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function o4(t){return t.collectionGroup!==null}function Y0(t){const e=$t(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Yn(pi.comparator);return a.filters.forEach((l=>{l.getFlattenedFilters().forEach((c=>{c.isInequality()&&(o=o.add(c.field))}))})),o})(e).forEach((s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Fm(s,n))})),r.has(pi.keyField().canonicalString())||e.ce.push(new Fm(pi.keyField(),n))}return e.ce}function so(t){const e=$t(t);return e.le||(e.le=mC(e,Y0(t))),e.le}function pC(t){const e=$t(t);return e.he||(e.he=mC(e,t.explicitOrderBy)),e.he}function mC(t,e){if(t.limitType==="F")return z_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new Fm(i.field,s)}));const r=t.endAt?new sh(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new sh(t.startAt.position,t.startAt.inclusive):null;return z_(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function $_(t,e){const r=t.filters.concat([e]);return new Wu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function L2(t,e,r){return new Wu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function lg(t,e){return og(so(t),so(e))&&t.limitType===e.limitType}function gC(t){return`${bd(so(t))}|lt:${t.limitType}`}function B0(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((i=>uC(i))).join(", ")}]`),ag(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((i=>xp(i))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((i=>xp(i))).join(",")),`Target(${n})`})(so(t))}; limitType=${t.limitType})`}function cg(t,e){return e.isFoundDocument()&&(function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Wt.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)})(t,e)&&(function(n,i){for(const s of Y0(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(n,i){return!(n.startAt&&!(function(a,o,l){const c=g6(a,o,l);return a.inclusive?c<=0:c<0})(n.startAt,Y0(n),i)||n.endAt&&!(function(a,o,l){const c=g6(a,o,l);return a.inclusive?c>=0:c>0})(n.endAt,Y0(n),i))})(t,e)}function xC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vC(t){return(e,r)=>{let n=!1;for(const i of Y0(t)){const s=dj(i,e,r);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function dj(t,e,r){const n=t.field.isKeyField()?Wt.comparator(e.key,r.key):(function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?ih(l,c):Xt()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Xt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_h(this.inner,((r,n)=>{for(const[i,s]of n)e(i,s)}))}isEmpty(){return tC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj=new ci(Wt.comparator);function Do(){return pj}const yC=new ci(Wt.comparator);function Y1(...t){let e=yC;for(const r of t)e=e.insert(r.key,r);return e}function wC(t){let e=yC;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function Bc(){return am()}function _C(){return am()}function am(){return new qu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const mj=new ci(Wt.comparator),gj=new Yn(Wt.comparator);function Br(...t){let e=gj;for(const r of t)e=e.add(r);return e}const xj=new Yn(Lr);function l4(){return xj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Im(e)?"-0":e}}function bC(t){return{integerValue:""+t}}function EC(t,e){return X8(e)?bC(e):c4(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this._=void 0}}function vj(t,e,r){return t instanceof yp?(function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Cv(s)&&(s=Iv(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}})(r,e):t instanceof Ed?kC(t,e):t instanceof Sd?TC(t,e):(function(i,s){const a=SC(i,s),o=_6(a)+_6(i.Pe);return B_(a)&&B_(i.Pe)?bC(o):c4(i.serializer,o)})(t,e)}function yj(t,e,r){return t instanceof Ed?kC(t,e):t instanceof Sd?TC(t,e):r}function SC(t,e){return t instanceof wp?(function(n){return B_(n)||(function(s){return!!s&&"doubleValue"in s})(n)})(e)?e:{integerValue:0}:null}class yp extends Pv{}class Ed extends Pv{constructor(e){super(),this.elements=e}}function kC(t,e){const r=AC(e);for(const n of t.elements)r.some((i=>Qc(i,n)))||r.push(n);return{arrayValue:{values:r}}}class Sd extends Pv{constructor(e){super(),this.elements=e}}function TC(t,e){let r=AC(e);for(const n of t.elements)r=r.filter((i=>!Qc(i,n)));return{arrayValue:{values:r}}}class wp extends Pv{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function _6(t){return Ci(t.integerValue||t.doubleValue)}function AC(t){return Rm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,r){this.field=e,this.transform=r}}function wj(t,e){return t.field.isEqual(e.field)&&(function(n,i){return n instanceof Ed&&i instanceof Ed||n instanceof Sd&&i instanceof Sd?pp(n.elements,i.elements,Qc):n instanceof wp&&i instanceof wp?Qc(n.Pe,i.Pe):n instanceof yp&&i instanceof yp})(t.transform,e.transform)}class _j{constructor(e,r){this.version=e,this.transformResults=r}}class Ii{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Ii}static exists(e){return new Ii(void 0,e)}static updateTime(e){return new Ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function u2(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Rv{}function CC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Up(t.key,Ii.none()):new Vp(t.key,t.data,Ii.none());{const r=t.data,n=Sa.empty();let i=new Yn(pi.comparator);for(let s of e.fields)if(!i.has(s)){let a=r.field(s);a===null&&s.length>1&&(s=s.popLast(),a=r.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new Gu(t.key,n,new Lo(i.toArray()),Ii.none())}}function bj(t,e,r){t instanceof Vp?(function(i,s,a){const o=i.value.clone(),l=E6(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(t,e,r):t instanceof Gu?(function(i,s,a){if(!u2(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=E6(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(IC(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(t,e,r):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,r)}function om(t,e,r,n){return t instanceof Vp?(function(s,a,o,l){if(!u2(s.precondition,a))return o;const c=s.value.clone(),f=S6(s.fieldTransforms,l,a);return c.setAll(f),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null})(t,e,r,n):t instanceof Gu?(function(s,a,o,l){if(!u2(s.precondition,a))return o;const c=S6(s.fieldTransforms,l,a),f=a.data;return f.setAll(IC(s)),f.setAll(c),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((d=>d.field)))})(t,e,r,n):(function(s,a,o){return u2(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o})(t,e,r)}function Ej(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),s=SC(n.transform,i||null);s!=null&&(r===null&&(r=Sa.empty()),r.set(n.field,s))}return r||null}function b6(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&pp(n,i,((s,a)=>wj(s,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vp extends Rv{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Gu extends Rv{constructor(e,r,n,i,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function IC(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function E6(t,e,r){const n=new Map;lr(t.length===r.length);for(let i=0;i<r.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);n.set(s.field,yj(a,o,r[i]))}return n}function S6(t,e,r){const n=new Map;for(const i of t){const s=i.transform,a=r.data.field(i.field);n.set(i.field,vj(s,a,e))}return n}class Up extends Rv{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class u4 extends Rv{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&bj(s,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=om(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=om(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=_C();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=r.has(i.key)?null:o;const l=CC(a,o);l!==null&&n.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(pr.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),Br())}isEqual(e){return this.batchId===e.batchId&&pp(this.mutations,e.mutations,((r,n)=>b6(r,n)))&&pp(this.baseMutations,e.baseMutations,((r,n)=>b6(r,n)))}}class h4{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){lr(e.mutations.length===n.length);let i=(function(){return mj})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new h4(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ts,pn;function PC(t){switch(t){default:return Xt();case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0}}function RC(t){if(t===void 0)return ps("GRPC error has no .code"),nt.UNKNOWN;switch(t){case Ts.OK:return nt.OK;case Ts.CANCELLED:return nt.CANCELLED;case Ts.UNKNOWN:return nt.UNKNOWN;case Ts.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case Ts.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case Ts.INTERNAL:return nt.INTERNAL;case Ts.UNAVAILABLE:return nt.UNAVAILABLE;case Ts.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case Ts.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case Ts.NOT_FOUND:return nt.NOT_FOUND;case Ts.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case Ts.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case Ts.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case Ts.ABORTED:return nt.ABORTED;case Ts.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case Ts.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case Ts.DATA_LOSS:return nt.DATA_LOSS;default:return Xt()}}(pn=Ts||(Ts={}))[pn.OK=0]="OK",pn[pn.CANCELLED=1]="CANCELLED",pn[pn.UNKNOWN=2]="UNKNOWN",pn[pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pn[pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pn[pn.NOT_FOUND=5]="NOT_FOUND",pn[pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",pn[pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",pn[pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",pn[pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pn[pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pn[pn.ABORTED=10]="ABORTED",pn[pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",pn[pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",pn[pn.INTERNAL=13]="INTERNAL",pn[pn.UNAVAILABLE=14]="UNAVAILABLE",pn[pn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D2=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=new fd([4294967295,4294967295],0);function k6(t){const e=FC().encode(t),r=new L8;return r.update(e),new Uint8Array(r.digest())}function T6(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new fd([r,n],0),new fd([i,s],0)]}class p4{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Q1(`Invalid padding: ${r}`);if(n<0)throw new Q1(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Q1(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Q1(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=fd.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(fd.fromNumber(n)));return i.compare(kj)===1&&(i=new fd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=k6(e),[n,i]=T6(r);for(let s=0;s<this.hashCount;s++){const a=this.Ee(n,i,s);if(!this.de(a))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new p4(s,i,r);return n.forEach((o=>a.insert(o))),a}insert(e){if(this.Ie===0)return;const r=k6(e),[n,i]=T6(r);for(let s=0;s<this.hashCount;s++){const a=this.Ee(n,i,s);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Q1 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,r,n,i,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,hg.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new fg(pr.min(),i,new ci(Lr),Do(),Br())}}class hg{constructor(e,r,n,i,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new hg(n,r,Br(),Br(),Br())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class LC{constructor(e,r){this.targetId=e,this.me=r}}class DC{constructor(e,r,n=zi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class A6{constructor(){this.fe=0,this.ge=I6(),this.pe=zi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Br(),r=Br(),n=Br();return this.ge.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:Xt()}})),new hg(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=I6()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,lr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Tj{constructor(e){this.Le=e,this.Be=new Map,this.ke=Do(),this.qe=C6(),this.Qe=new ci(Lr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Xt()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,i)=>{this.ze(i)&&r(i)}))}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const s=i.target;if(R2(s))if(n===0){const a=new Wt(s.path);this.Ue(r,a,di.newNoDocument(a,pr.min()))}else lr(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}D2?.et((function(f,d,m,p,_){var w,b,k,F,N,B;const X={localCacheCount:f,existenceFilterCount:d.count,databaseId:m.database,projectId:m.projectId},G=d.unchangedNames;return G&&(X.bloomFilter={applied:_===0,hashCount:(w=G?.hashCount)!==null&&w!==void 0?w:0,bitmapLength:(F=(k=(b=G?.bits)===null||b===void 0?void 0:b.bitmap)===null||k===void 0?void 0:k.length)!==null&&F!==void 0?F:0,padding:(B=(N=G?.bits)===null||N===void 0?void 0:N.padding)!==null&&B!==void 0?B:0,mightContain:P=>{var A;return(A=p?.mightContain(P))!==null&&A!==void 0&&A}}),X})(a,e.me,this.Le.tt(),o,l))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=r;let a,o;try{a=Uu(n).toUint8Array()}catch(l){if(l instanceof rC)return ll("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new p4(a,i,s)}catch(l){return ll(l instanceof Q1?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach((s=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,s,null),i++)})),i}rt(e){const r=new Map;this.Be.forEach(((s,a)=>{const o=this.Je(a);if(o){if(s.current&&R2(o.target)){const l=new Wt(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,di.newNoDocument(l,e))}s.be&&(r.set(a,s.ve()),s.Ce())}}));let n=Br();this.qe.forEach(((s,a)=>{let o=!0;a.forEachWhile((l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(n=n.add(s))})),this.ke.forEach(((s,a)=>a.setReadTime(e)));const i=new fg(e,r,this.Qe,this.ke,n);return this.ke=Do(),this.qe=C6(),this.Qe=new ci(Lr),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new A6,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Yn(Lr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||kt("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new A6),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function C6(){return new ci(Wt.comparator)}function I6(){return new ci(Wt.comparator)}const Aj={asc:"ASCENDING",desc:"DESCENDING"},Cj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ij={and:"AND",or:"OR"};class Nj{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function H_(t,e){return t.useProto3Json||ag(e)?e:{value:e}}function _p(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Pj(t,e){return _p(t,e.toTimestamp())}function gs(t){return lr(!!t),pr.fromTimestamp((function(r){const n=Vu(r);return new Ni(n.seconds,n.nanos)})(t))}function m4(t,e){return W_(t,e).canonicalString()}function W_(t,e){const r=(function(i){return new cn(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?r:r.child(e)}function MC(t){const e=cn.fromString(t);return lr(GC(e)),e}function Lm(t,e){return m4(t.databaseId,e.path)}function qc(t,e){const r=MC(e);if(r.get(1)!==t.databaseId.projectId)throw new Et(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Et(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Wt(VC(r))}function jC(t,e){return m4(t.databaseId,e)}function BC(t){const e=MC(t);return e.length===4?cn.emptyPath():VC(e)}function q_(t){return new cn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VC(t){return lr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function N6(t,e,r){return{name:Lm(t,e),fields:r.value.mapValue.fields}}function UC(t,e,r){const n=qc(t,e.name),i=gs(e.updateTime),s=e.createTime?gs(e.createTime):pr.min(),a=new Sa({mapValue:{fields:e.fields}}),o=di.newFoundDocument(n,i,s,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function Rj(t,e){return"found"in e?(function(n,i){lr(!!i.found),i.found.name,i.found.updateTime;const s=qc(n,i.found.name),a=gs(i.found.updateTime),o=i.found.createTime?gs(i.found.createTime):pr.min(),l=new Sa({mapValue:{fields:i.found.fields}});return di.newFoundDocument(s,a,o,l)})(t,e):"missing"in e?(function(n,i){lr(!!i.missing),lr(!!i.readTime);const s=qc(n,i.missing),a=gs(i.readTime);return di.newNoDocument(s,a)})(t,e):Xt()}function Fj(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Xt()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(c,f){return c.useProto3Json?(lr(f===void 0||typeof f=="string"),zi.fromBase64String(f||"")):(lr(f===void 0||f instanceof Buffer||f instanceof Uint8Array),zi.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&(function(c){const f=c.code===void 0?nt.UNKNOWN:RC(c.code);return new Et(f,c.message||"")})(a);r=new DC(n,i,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=qc(t,n.document.name),s=gs(n.document.updateTime),a=n.document.createTime?gs(n.document.createTime):pr.min(),o=new Sa({mapValue:{fields:n.document.fields}}),l=di.newFoundDocument(i,s,a,o),c=n.targetIds||[],f=n.removedTargetIds||[];r=new f2(c,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=qc(t,n.document),s=n.readTime?gs(n.readTime):pr.min(),a=di.newNoDocument(i,s),o=n.removedTargetIds||[];r=new f2([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=qc(t,n.document),s=n.removedTargetIds||[];r=new f2([],s,i,null)}else{if(!("filter"in e))return Xt();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new Sj(i,s),o=n.targetId;r=new LC(o,a)}}return r}function Dm(t,e){let r;if(e instanceof Vp)r={update:N6(t,e.key,e.value)};else if(e instanceof Up)r={delete:Lm(t,e.key)};else if(e instanceof Gu)r={update:N6(t,e.key,e.data),updateMask:Bj(e.fieldMask)};else{if(!(e instanceof u4))return Xt();r={verify:Lm(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(s,a){const o=a.transform;if(o instanceof yp)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ed)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Sd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof wp)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw Xt()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:Pj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Xt()})(t,e.precondition)),r}function G_(t,e){const r=e.currentDocument?(function(s){return s.updateTime!==void 0?Ii.updateTime(gs(s.updateTime)):s.exists!==void 0?Ii.exists(s.exists):Ii.none()})(e.currentDocument):Ii.none(),n=e.updateTransforms?e.updateTransforms.map((i=>(function(a,o){let l=null;if("setToServerValue"in o)lr(o.setToServerValue==="REQUEST_TIME"),l=new yp;else if("appendMissingElements"in o){const f=o.appendMissingElements.values||[];l=new Ed(f)}else if("removeAllFromArray"in o){const f=o.removeAllFromArray.values||[];l=new Sd(f)}else"increment"in o?l=new wp(a,o.increment):Xt();const c=pi.fromServerFormat(o.fieldPath);return new ug(c,l)})(t,i))):[];if(e.update){e.update.name;const i=qc(t,e.update.name),s=new Sa({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(l){const c=l.fieldPaths||[];return new Lo(c.map((f=>pi.fromServerFormat(f))))})(e.updateMask);return new Gu(i,s,a,r,n)}return new Vp(i,s,r,n)}if(e.delete){const i=qc(t,e.delete);return new Up(i,r)}if(e.verify){const i=qc(t,e.verify);return new u4(i,r)}return Xt()}function Lj(t,e){return t&&t.length>0?(lr(e!==void 0),t.map((r=>(function(i,s){let a=i.updateTime?gs(i.updateTime):gs(s);return a.isEqual(pr.min())&&(a=gs(s)),new _j(a,i.transformResults||[])})(r,e)))):[]}function zC(t,e){return{documents:[jC(t,e.path)]}}function Fv(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=jC(t,i);const s=(function(c){if(c.length!==0)return qC($n.create(c,"and"))})(e.filters);s&&(r.structuredQuery.where=s);const a=(function(c){if(c.length!==0)return c.map((f=>(function(m){return{field:Lf(m.field),direction:Oj(m.dir)}})(f)))})(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=H_(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{_t:r,parent:i}}function $C(t,e,r,n){const{_t:i,parent:s}=Fv(t,e),a={},o=[];let l=0;return r.forEach((c=>{const f=n?c.alias:"aggregate_"+l++;a[f]=c.alias,c.aggregateType==="count"?o.push({alias:f,count:{}}):c.aggregateType==="avg"?o.push({alias:f,avg:{field:Lf(c.fieldPath)}}):c.aggregateType==="sum"&&o.push({alias:f,sum:{field:Lf(c.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:i.structuredQuery},parent:i.parent},ut:a,parent:s}}function HC(t){let e=BC(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){lr(n===1);const f=r.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];r.where&&(s=(function(d){const m=WC(d);return m instanceof $n&&a4(m)?m.getFilters():[m]})(r.where));let a=[];r.orderBy&&(a=(function(d){return d.map((m=>(function(_){return new Fm(V0(_.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(m)))})(r.orderBy));let o=null;r.limit&&(o=(function(d){let m;return m=typeof d=="object"?d.value:d,ag(m)?null:m})(r.limit));let l=null;r.startAt&&(l=(function(d){const m=!!d.before,p=d.values||[];return new sh(p,m)})(r.startAt));let c=null;return r.endAt&&(c=(function(d){const m=!d.before,p=d.values||[];return new sh(p,m)})(r.endAt)),dC(e,i,a,s,o,"F",l,c)}function Dj(t,e){const r=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xt()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function WC(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=V0(r.unaryFilter.field);return un.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=V0(r.unaryFilter.field);return un.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=V0(r.unaryFilter.field);return un.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=V0(r.unaryFilter.field);return un.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Xt()}})(t):t.fieldFilter!==void 0?(function(r){return un.create(V0(r.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xt()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return $n.create(r.compositeFilter.filters.map((n=>WC(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Xt()}})(r.compositeFilter.op))})(t):Xt()}function Oj(t){return Aj[t]}function Mj(t){return Cj[t]}function jj(t){return Ij[t]}function Lf(t){return{fieldPath:t.canonicalString()}}function V0(t){return pi.fromServerFormat(t.fieldPath)}function qC(t){return t instanceof un?(function(r){if(r.op==="=="){if(d6(r.value))return{unaryFilter:{field:Lf(r.field),op:"IS_NAN"}};if(h6(r.value))return{unaryFilter:{field:Lf(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(d6(r.value))return{unaryFilter:{field:Lf(r.field),op:"IS_NOT_NAN"}};if(h6(r.value))return{unaryFilter:{field:Lf(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lf(r.field),op:Mj(r.op),value:r.value}}})(t):t instanceof $n?(function(r){const n=r.getFilters().map((i=>qC(i)));return n.length===1?n[0]:{compositeFilter:{op:jj(r.op),filters:n}}})(t):Xt()}function Bj(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function GC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,r,n,i,s=pr.min(),a=pr.min(),o=zi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Cu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Cu(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.ct=e}}function Vj(t,e){let r;if(e.document)r=UC(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Wt.fromSegments(e.noDocument.path),i=Td(e.noDocument.readTime);r=di.newNoDocument(n,i),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xt();{const n=Wt.fromSegments(e.unknownDocument.path),i=Td(e.unknownDocument.version);r=di.newUnknownDocument(n,i)}}return e.readTime&&r.setReadTime((function(i){const s=new Ni(i[0],i[1]);return pr.fromTimestamp(s)})(e.readTime)),r}function P6(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:O2(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(s,a){return{name:Lm(s,a.key),fields:a.data.value.mapValue.fields,updateTime:_p(s,a.version.toTimestamp()),createTime:_p(s,a.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:kd(e.version)};else{if(!e.isUnknownDocument())return Xt();n.unknownDocument={path:r.path.toArray(),version:kd(e.version)}}return n}function O2(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function kd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Td(t){const e=new Ni(t.seconds,t.nanoseconds);return pr.fromTimestamp(e)}function rd(t,e){const r=(e.baseMutations||[]).map((s=>G_(t.ct,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map((s=>G_(t.ct,s))),i=Ni.fromMillis(e.localWriteTimeMs);return new f4(e.batchId,i,r,n)}function J1(t){const e=Td(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Td(t.lastLimboFreeSnapshotVersion):pr.min();let n;return n=(function(s){return s.documents!==void 0})(t.query)?(function(s){return lr(s.documents.length===1),so(Bp(BC(s.documents[0])))})(t.query):(function(s){return so(HC(s))})(t.query),new Cu(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,zi.fromBase64String(t.resumeToken))}function XC(t,e){const r=kd(e.snapshotVersion),n=kd(e.lastLimboFreeSnapshotVersion);let i;i=R2(e.target)?zC(t.ct,e.target):Fv(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:bd(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function g4(t){const e=HC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?L2(e,e.limit,"L"):e}function ww(t,e){return new d4(e.largestBatchId,G_(t.ct,e.overlayMutation))}function R6(t,e){const r=e.path.lastSegment();return[t,io(e.path.popLast()),r]}function F6(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:kd(n.readTime),documentKey:io(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{getBundleMetadata(e,r){return L6(e).get(r).next((n=>{if(n)return(function(s){return{id:s.bundleId,createTime:Td(s.createTime),version:s.version}})(n)}))}saveBundleMetadata(e,r){return L6(e).put((function(i){return{bundleId:i.id,createTime:kd(gs(i.createTime)),version:i.version}})(r))}getNamedQuery(e,r){return D6(e).get(r).next((n=>{if(n)return(function(s){return{name:s.name,query:g4(s.bundledQuery),readTime:Td(s.readTime)}})(n)}))}saveNamedQuery(e,r){return D6(e).put((function(i){return{name:i.name,readTime:kd(gs(i.readTime)),bundledQuery:i.bundledQuery}})(r))}}function L6(t){return Hs(t,"bundles")}function D6(t){return Hs(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Lv(e,n)}getOverlay(e,r){return O1(e).get(R6(this.userId,r)).next((n=>n?ww(this.serializer,n):null))}getOverlays(e,r){const n=Bc();return We.forEach(r,(i=>this.getOverlay(e,i).next((s=>{s!==null&&n.set(i,s)})))).next((()=>n))}saveOverlays(e,r,n){const i=[];return n.forEach(((s,a)=>{const o=new d4(r,a);i.push(this.ht(e,o))})),We.waitFor(i)}removeOverlaysForBatchId(e,r,n){const i=new Set;r.forEach((a=>i.add(io(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);s.push(O1(e).j("collectionPathOverlayIndex",o))})),We.waitFor(s)}getOverlaysForCollection(e,r,n){const i=Bc(),s=io(r),a=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return O1(e).U("collectionPathOverlayIndex",a).next((o=>{for(const l of o){const c=ww(this.serializer,l);i.set(c.getKey(),c)}return i}))}getOverlaysForCollectionGroup(e,r,n,i){const s=Bc();let a;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return O1(e).J({index:"collectionGroupOverlayIndex",range:o},((l,c,f)=>{const d=ww(this.serializer,c);s.size()<i||d.largestBatchId===a?(s.set(d.getKey(),d),a=d.largestBatchId):f.done()})).next((()=>s))}ht(e,r){return O1(e).put((function(i,s,a){const[o,l,c]=R6(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Dm(i.ct,a.mutation)}})(this.serializer,this.userId,r))}}function O1(t){return Hs(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{Pt(e){return Hs(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r?.value;return n?zi.fromUint8Array(n):zi.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Ci(e.integerValue));else if("doubleValue"in e){const n=Ci(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Im(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=Vu(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Uu(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?nC(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Nv(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Xt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const i of Object.keys(n))this.Vt(i,r),this.Tt(n[i],r)}wt(e,r){var n,i;const s=e.fields||{};this.dt(r,53);const a="value",o=((i=(n=s[a].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.length)||0;this.dt(r,15),r.At(Ci(o)),this.Vt(a,r),this.Tt(s[a],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const i of n)this.Tt(i,r)}yt(e,r){this.dt(r,37),Wt.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}nd.vt=new nd;function $j(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function O6(t){const e=64-(function(n){let i=0;for(let s=0;s<8;++s){const a=$j(255&n[s]);if(i+=a,a!==8)break}return i})(t);return Math.ceil(e/8)}class Hj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const i=r.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const i=r.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const r=this.qt(e),n=O6(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=255&r[i]}Kt(e){const r=this.qt(e),n=O6(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=~(255&r[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let i=1;i<r.length;++i)r[i]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class Wj{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class qj{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class M1{constructor(){this.jt=new Hj,this.Ht=new Wj(this.jt),this.Jt=new qj(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,r,n,i){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=i}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new id(this.indexId,this.documentKey,this.arrayValue,n)}}function Cf(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=M6(t.arrayValue,e.arrayValue),r!==0?r:(r=M6(t.directionalValue,e.directionalValue),r!==0?r:Wt.comparator(t.documentKey,e.documentKey)))}function M6(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e){this.Xt=new Yn(((r,n)=>pi.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(lr(e.collectionGroup===this.collectionId),this.nn)return!1;const r=O_(e);if(r!==void 0&&!this.sn(r))return!1;const n=Zh(e);let i=new Set,s=0,a=0;for(;s<n.length&&this.sn(n[s]);++s)i=i.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=n[s];if(!this.on(o,l)||!this._n(this.en[a++],l))return!1}++s}for(;s<n.length;++s){const o=n[s];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new Yn(pi.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new hd(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new hd(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new hd(n.field,n.dir==="asc"?0:1)));return new mp(mp.UNKNOWN_ID,this.collectionId,r,gp.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(t){var e,r;if(lr(t instanceof un||t instanceof $n),t instanceof un){if(t instanceof hC){const i=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((s=>un.create(t.field,"==",s))))||[];return $n.create(i,"or")}return t}const n=t.filters.map((i=>YC(i)));return $n.create(n,t.op)}function Gj(t){if(t.getFilters().length===0)return[];const e=Y_(YC(t));return lr(QC(e)),K_(e)||X_(e)?[e]:e.getFilters()}function K_(t){return t instanceof un}function X_(t){return t instanceof $n&&a4(t)}function QC(t){return K_(t)||X_(t)||(function(r){if(r instanceof $n&&V_(r)){for(const n of r.getFilters())if(!K_(n)&&!X_(n))return!1;return!0}return!1})(t)}function Y_(t){if(lr(t instanceof un||t instanceof $n),t instanceof un)return t;if(t.filters.length===1)return Y_(t.filters[0]);const e=t.filters.map((n=>Y_(n)));let r=$n.create(e,t.op);return r=M2(r),QC(r)?r:(lr(r instanceof $n),lr(vp(r)),lr(r.filters.length>1),r.filters.reduce(((n,i)=>x4(n,i))))}function x4(t,e){let r;return lr(t instanceof un||t instanceof $n),lr(e instanceof un||e instanceof $n),r=t instanceof un?e instanceof un?(function(i,s){return $n.create([i,s],"and")})(t,e):B6(t,e):e instanceof un?B6(e,t):(function(i,s){if(lr(i.filters.length>0&&s.filters.length>0),vp(i)&&vp(s))return cC(i,s.getFilters());const a=V_(i)?i:s,o=V_(i)?s:i,l=a.filters.map((c=>x4(c,o)));return $n.create(l,"or")})(t,e),M2(r)}function B6(t,e){if(vp(e))return cC(e,t.getFilters());{const r=e.filters.map((n=>x4(t,n)));return $n.create(r,"or")}}function M2(t){if(lr(t instanceof un||t instanceof $n),t instanceof un)return t;const e=t.getFilters();if(e.length===1)return M2(e[0]);if(oC(t))return t;const r=e.map((i=>M2(i))),n=[];return r.forEach((i=>{i instanceof un?n.push(i):i instanceof $n&&(i.op===t.op?n.push(...i.filters):n.push(i))})),n.length===1?n[0]:$n.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.un=new v4}addToCollectionParentIndex(e,r){return this.un.add(r),We.resolve()}getCollectionParents(e,r){return We.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return We.resolve()}deleteFieldIndex(e,r){return We.resolve()}deleteAllFieldIndexes(e){return We.resolve()}createTargetIndexes(e,r){return We.resolve()}getDocumentsMatchingTarget(e,r){return We.resolve(null)}getIndexType(e,r){return We.resolve(0)}getFieldIndexes(e,r){return We.resolve([])}getNextCollectionGroupToUpdate(e){return We.resolve(null)}getMinOffset(e,r){return We.resolve(cl.min())}getMinOffsetFromCollectionGroup(e,r){return We.resolve(cl.min())}updateCollectionGroup(e,r,n){return We.resolve()}updateIndexEntries(e,r){return We.resolve()}}class v4{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Yn(cn.comparator),s=!i.has(n);return this.index[r]=i.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Yn(cn.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=new Uint8Array(0);class Xj{constructor(e,r){this.databaseId=r,this.cn=new v4,this.ln=new qu((n=>bd(n)),((n,i)=>og(n,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),i=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const s={collectionId:n,parent:io(i)};return V6(e).put(s)}return We.resolve()}getCollectionParents(e,r){const n=[],i=IDBKeyRange.bound([r,""],[$8(r),""],!1,!0);return V6(e).U(i).next((s=>{for(const a of s){if(a.collectionId!==r)break;n.push(jc(a.parent))}return n}))}addFieldIndex(e,r){const n=j1(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(r);delete i.indexId;const s=n.add(i);if(r.indexState){const a=C0(e);return s.next((o=>{a.put(F6(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return s.next()}deleteFieldIndex(e,r){const n=j1(e),i=C0(e),s=A0(e);return n.delete(r.indexId).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=j1(e),n=A0(e),i=C0(e);return r.j().next((()=>n.j())).next((()=>i.j()))}createTargetIndexes(e,r){return We.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((i=>{if(i===0||i===1){const s=new j6(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,r){const n=A0(e);let i=!0;const s=new Map;return We.forEach(this.hn(r),(a=>this.Pn(e,a).next((o=>{i&&(i=!!o),s.set(a,o)})))).next((()=>{if(i){let a=Br();const o=[];return We.forEach(s,((l,c)=>{kt("IndexedDbIndexManager",`Using index ${(function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map((B=>`${B.fieldPath}:${B.kind}`)).join(",")}`})(l)} to execute ${bd(r)}`);const f=(function(N,B){const X=O_(B);if(X===void 0)return null;for(const G of F2(N,X.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null})(c,l),d=(function(N,B){const X=new Map;for(const G of Zh(B))for(const P of F2(N,G.fieldPath))switch(P.op){case"==":case"in":X.set(G.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return X.set(G.fieldPath.canonicalString(),P.value),Array.from(X.values())}return null})(c,l),m=(function(N,B){const X=[];let G=!0;for(const P of Zh(B)){const A=P.kind===0?v6(N,P.fieldPath,N.startAt):y6(N,P.fieldPath,N.startAt);X.push(A.value),G&&(G=A.inclusive)}return new sh(X,G)})(c,l),p=(function(N,B){const X=[];let G=!0;for(const P of Zh(B)){const A=P.kind===0?y6(N,P.fieldPath,N.endAt):v6(N,P.fieldPath,N.endAt);X.push(A.value),G&&(G=A.inclusive)}return new sh(X,G)})(c,l),_=this.In(l,c,m),w=this.In(l,c,p),b=this.Tn(l,c,d),k=this.En(l.indexId,f,_,m.inclusive,w,p.inclusive,b);return We.forEach(k,(F=>n.G(F,r.limit).next((N=>{N.forEach((B=>{const X=Wt.fromSegments(B.documentKey);a.has(X)||(a=a.add(X),o.push(X))}))}))))})).next((()=>o))}return We.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=Gj($n.create(e.filters,"and")).map((n=>z_(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,i,s,a,o){const l=(r!=null?r.length:1)*Math.max(n.length,s.length),c=l/(r!=null?r.length:1),f=[];for(let d=0;d<l;++d){const m=r?this.dn(r[d/c]):kx,p=this.An(e,m,n[d%c],i),_=this.Rn(e,m,s[d%c],a),w=o.map((b=>this.An(e,m,b,!0)));f.push(...this.createRange(p,_,w))}return f}An(e,r,n,i){const s=new id(e,Wt.empty(),r,n);return i?s:s.Zt()}Rn(e,r,n,i){const s=new id(e,Wt.empty(),r,n);return i?s.Zt():s}Pn(e,r){const n=new j6(r),i=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const o of s)n.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a}))}getIndexType(e,r){let n=2;const i=this.hn(r);return We.forEach(i,(s=>this.Pn(e,s).next((a=>{a?n!==0&&a.fields.length<(function(l){let c=new Yn(pi.comparator),f=!1;for(const d of l.filters)for(const m of d.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?f=!0:c=c.add(m.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(f?1:0)})(s)&&(n=1):n=0})))).next((()=>(function(a){return a.limit!==null})(r)&&i.length>1&&n===2?1:n))}Vn(e,r){const n=new M1;for(const i of Zh(e)){const s=r.data.field(i.fieldPath);if(s==null)return null;const a=n.Yt(i.kind);nd.vt.It(s,a)}return n.zt()}dn(e){const r=new M1;return nd.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new M1;return nd.vt.It(_d(this.databaseId,r),n.Yt((function(s){const a=Zh(s);return a.length===0?0:a[a.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let i=[];i.push(new M1);let s=0;for(const a of Zh(e)){const o=n[s++];for(const l of i)if(this.fn(r,a.fieldPath)&&Rm(o))i=this.gn(i,a,o);else{const c=l.Yt(a.kind);nd.vt.It(o,c)}}return this.pn(i)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const i=[...e],s=[];for(const a of n.arrayValue.values||[])for(const o of i){const l=new M1;l.seed(o.zt()),nd.vt.It(a,l.Yt(r.kind)),s.push(l)}return s}fn(e,r){return!!e.filters.find((n=>n instanceof un&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=j1(e),i=C0(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((s=>{const a=[];return We.forEach(s,(o=>i.get([o.indexId,this.uid]).next((l=>{a.push((function(f,d){const m=d?new gp(d.sequenceNumber,new cl(Td(d.readTime),new Wt(jc(d.documentKey)),d.largestBatchId)):gp.empty(),p=f.fields.map((([_,w])=>new hd(pi.fromServerFormat(_),w)));return new mp(f.indexId,f.collectionGroup,p,m)})(o,l))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,i)=>{const s=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Lr(n.collectionGroup,i.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const i=j1(e),s=C0(e);return this.yn(e).next((a=>i.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((o=>We.forEach(o,(l=>s.put(F6(l.indexId,this.uid,a,n))))))))}updateIndexEntries(e,r){const n=new Map;return We.forEach(r,((i,s)=>{const a=n.get(i.collectionGroup);return(a?We.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(n.set(i.collectionGroup,o),We.forEach(o,(l=>this.wn(e,i,l).next((c=>{const f=this.Sn(s,l);return c.isEqual(f)?We.resolve():this.bn(e,s,l,c,f)})))))))}))}Dn(e,r,n,i){return A0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,i){return A0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const i=A0(e);let s=new Yn(Cf);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((a,o)=>{s=s.add(new id(n.indexId,r,o.arrayValue,o.directionalValue))})).next((()=>s))}Sn(e,r){let n=new Yn(Cf);const i=this.Vn(r,e);if(i==null)return n;const s=O_(r);if(s!=null){const a=e.data.field(s.fieldPath);if(Rm(a))for(const o of a.arrayValue.values||[])n=n.add(new id(r.indexId,e.key,this.dn(o),i))}else n=n.add(new id(r.indexId,e.key,kx,i));return n}bn(e,r,n,i,s){kt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const a=[];return(function(l,c,f,d,m){const p=l.getIterator(),_=c.getIterator();let w=T0(p),b=T0(_);for(;w||b;){let k=!1,F=!1;if(w&&b){const N=f(w,b);N<0?F=!0:N>0&&(k=!0)}else w!=null?F=!0:k=!0;k?(d(b),b=T0(_)):F?(m(w),w=T0(p)):(w=T0(p),b=T0(_))}})(i,s,Cf,(o=>{a.push(this.Dn(e,r,n,o))}),(o=>{a.push(this.vn(e,r,n,o))})),We.waitFor(a)}yn(e){let r=1;return C0(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,i,s)=>{s.done(),r=i.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((a,o)=>Cf(a,o))).filter(((a,o,l)=>!o||Cf(a,l[o-1])!==0));const i=[];i.push(e);for(const a of n){const o=Cf(a,e),l=Cf(a,r);if(o===0)i[0]=e.Zt();else if(o>0&&l<0)i.push(a),i.push(a.Zt());else if(l>0)break}i.push(r);const s=[];for(let a=0;a<i.length;a+=2){if(this.Cn(i[a],i[a+1]))return[];const o=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,kx,[]],l=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,kx,[]];s.push(IDBKeyRange.bound(o,l))}return s}Cn(e,r){return Cf(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(U6)}getMinOffset(e,r){return We.mapArray(this.hn(r),(n=>this.Pn(e,n).next((i=>i||Xt())))).next(U6)}}function V6(t){return Hs(t,"collectionParents")}function A0(t){return Hs(t,"indexEntries")}function j1(t){return Hs(t,"indexConfiguration")}function C0(t){return Hs(t,"indexState")}function U6(t){lr(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const i=t[n].indexState.offset;n4(i,e)<0&&(e=i),r<i.largestBatchId&&(r=i.largestBatchId)}return new cl(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qa{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Qa(e,Qa.DEFAULT_COLLECTION_PERCENTILE,Qa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(t,e,r){const n=t.store("mutations"),i=t.store("documentMutations"),s=[],a=IDBKeyRange.only(r.batchId);let o=0;const l=n.J({range:a},((f,d,m)=>(o++,m.delete())));s.push(l.next((()=>{lr(o===1)})));const c=[];for(const f of r.mutations){const d=Y8(e,f.key.path,r.batchId);s.push(i.delete(d)),c.push(f.key)}return We.waitFor(s).next((()=>c))}function j2(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Xt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qa.DEFAULT_COLLECTION_PERCENTILE=10,Qa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qa.DEFAULT=new Qa(41943040,Qa.DEFAULT_COLLECTION_PERCENTILE,Qa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qa.DISABLED=new Qa(-1,0,0);class Dv{constructor(e,r,n,i){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=i,this.Fn={}}static lt(e,r,n,i){lr(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Dv(s,r,n,i)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return If(e).J({index:"userMutationsIndex",range:n},((i,s,a)=>{r=!1,a.done()})).next((()=>r))}addMutationBatch(e,r,n,i){const s=U0(e),a=If(e);return a.add({}).next((o=>{lr(typeof o=="number");const l=new f4(o,r,n,i),c=(function(p,_,w){const b=w.baseMutations.map((F=>Dm(p.ct,F))),k=w.mutations.map((F=>Dm(p.ct,F)));return{userId:_,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:b,mutations:k}})(this.serializer,this.userId,l),f=[];let d=new Yn(((m,p)=>Lr(m.canonicalString(),p.canonicalString())));for(const m of i){const p=Y8(this.userId,m.key.path,o);d=d.add(m.key.path.popLast()),f.push(a.put(c)),f.push(s.put(p,OM))}return d.forEach((m=>{f.push(this.indexManager.addToCollectionParentIndex(e,m))})),e.addOnCommittedListener((()=>{this.Fn[o]=l.keys()})),We.waitFor(f).next((()=>l))}))}lookupMutationBatch(e,r){return If(e).get(r).next((n=>n?(lr(n.userId===this.userId),rd(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?We.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const i=n.keys();return this.Fn[r]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return If(e).J({index:"userMutationsIndex",range:i},((a,o,l)=>{o.userId===this.userId&&(lr(o.batchId>=n),s=rd(this.serializer,o)),l.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return If(e).J({index:"userMutationsIndex",range:r,reverse:!0},((i,s,a)=>{n=s.batchId,a.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return If(e).U("userMutationsIndex",r).next((n=>n.map((i=>rd(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=a2(this.userId,r.path),i=IDBKeyRange.lowerBound(n),s=[];return U0(e).J({range:i},((a,o,l)=>{const[c,f,d]=a,m=jc(f);if(c===this.userId&&r.path.isEqual(m))return If(e).get(d).next((p=>{if(!p)throw Xt();lr(p.userId===this.userId),s.push(rd(this.serializer,p))}));l.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Yn(Lr);const i=[];return r.forEach((s=>{const a=a2(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=U0(e).J({range:o},((c,f,d)=>{const[m,p,_]=c,w=jc(p);m===this.userId&&s.path.isEqual(w)?n=n.add(_):d.done()}));i.push(l)})),We.waitFor(i).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1,s=a2(this.userId,n),a=IDBKeyRange.lowerBound(s);let o=new Yn(Lr);return U0(e).J({range:a},((l,c,f)=>{const[d,m,p]=l,_=jc(m);d===this.userId&&n.isPrefixOf(_)?_.length===i&&(o=o.add(p)):f.done()})).next((()=>this.xn(e,o)))}xn(e,r){const n=[],i=[];return r.forEach((s=>{i.push(If(e).get(s).next((a=>{if(a===null)throw Xt();lr(a.userId===this.userId),n.push(rd(this.serializer,a))})))})),We.waitFor(i).next((()=>n))}removeMutationBatch(e,r){return JC(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),We.forEach(n,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return We.resolve();const n=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return U0(e).J({range:n},((s,a,o)=>{if(s[0]===this.userId){const l=jc(s[1]);i.push(l)}else o.done()})).next((()=>{lr(i.length===0)}))}))}containsKey(e,r){return ZC(e,this.userId,r)}Nn(e){return eI(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function ZC(t,e,r){const n=a2(e,r.path),i=n[1],s=IDBKeyRange.lowerBound(n);let a=!1;return U0(t).J({range:s,H:!0},((o,l,c)=>{const[f,d,m]=o;f===e&&d===i&&(a=!0),c.done()})).next((()=>a))}function If(t){return Hs(t,"mutations")}function U0(t){return Hs(t,"documentMutations")}function eI(t){return Hs(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ad(0)}static kn(){return new Ad(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new Ad(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>pr.fromTimestamp(new Ni(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((i=>(i.highestListenSequenceNumber=r,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),r>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=r),this.Qn(e,i))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>I0(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(lr(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let i=0;const s=[];return I0(e).J(((a,o)=>{const l=J1(o);l.sequenceNumber<=r&&n.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))})).next((()=>We.waitFor(s))).next((()=>i))}forEachTarget(e,r){return I0(e).J(((n,i)=>{const s=J1(i);r(s)}))}qn(e){return $6(e).get("targetGlobalKey").next((r=>(lr(r!==null),r)))}Qn(e,r){return $6(e).put("targetGlobalKey",r)}Kn(e,r){return I0(e).put(XC(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=bd(r),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return I0(e).J({range:i,index:"queryTargetsIndex"},((a,o,l)=>{const c=J1(o);og(r,c.target)&&(s=c,l.done())})).next((()=>s))}addMatchingKeys(e,r,n){const i=[],s=Df(e);return r.forEach((a=>{const o=io(a.path);i.push(s.put({targetId:n,path:o})),i.push(this.referenceDelegate.addReference(e,n,a))})),We.waitFor(i)}removeMatchingKeys(e,r,n){const i=Df(e);return We.forEach(r,(s=>{const a=io(s.path);return We.waitFor([i.delete([n,a]),this.referenceDelegate.removeReference(e,n,s)])}))}removeMatchingKeysForTargetId(e,r){const n=Df(e),i=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),i=Df(e);let s=Br();return i.J({range:n,H:!0},((a,o,l)=>{const c=jc(a[1]),f=new Wt(c);s=s.add(f)})).next((()=>s))}containsKey(e,r){const n=io(r.path),i=IDBKeyRange.bound([n],[$8(n)],!1,!0);let s=0;return Df(e).J({index:"documentTargetsIndex",H:!0,range:i},(([a,o],l,c)=>{a!==0&&(s++,c.done())})).next((()=>s>0))}ot(e,r){return I0(e).get(r).next((n=>n?J1(n):null))}}function I0(t){return Hs(t,"targets")}function $6(t){return Hs(t,"targetGlobal")}function Df(t){return Hs(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6([t,e],[r,n]){const i=Lr(t,r);return i===0?Lr(e,n):i}class Qj{constructor(e){this.Un=e,this.buffer=new Yn(H6),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();H6(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class tI{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){kt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){wh(r)?kt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await yh(r)}await this.Hn(3e5)}))}}class Jj{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return We.resolve(Fo.oe);const n=new Qj(r);return this.Jn.forEachTarget(e,(i=>n.zn(i.sequenceNumber))).next((()=>this.Jn.Zn(e,(i=>n.zn(i))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(kt("LruGarbageCollector","Garbage collection skipped; disabled"),We.resolve(z6)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(kt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z6):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,i,s,a,o,l,c;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(kt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,a=Date.now(),this.nthSequenceNumber(e,i)))).next((d=>(n=d,o=Date.now(),this.removeTargets(e,n,r)))).next((d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,n)))).next((d=>(c=Date.now(),j0()<=ln.DEBUG&&kt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-f}ms`),We.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d}))))}}function rI(t,e){return new Jj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,r){this.db=e,this.garbageCollector=rI(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((i=>n+i))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,i)=>r(i)))}addReference(e,r,n){return Tx(e,n)}removeReference(e,r,n){return Tx(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Tx(e,r)}nr(e,r){return(function(i,s){let a=!1;return eI(i).Y((o=>ZC(i,o,s).next((l=>(l&&(a=!0),We.resolve(!l)))))).next((()=>a))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,((a,o)=>{if(o<=r){const l=this.nr(e,a).next((c=>{if(!c)return s++,n.getEntry(e,a).next((()=>(n.removeEntry(a,pr.min()),Df(e).delete((function(d){return[0,io(d.path)]})(a)))))}));i.push(l)}})).next((()=>We.waitFor(i))).next((()=>n.apply(e))).next((()=>s))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Tx(e,r)}tr(e,r){const n=Df(e);let i,s=Fo.oe;return n.J({index:"documentTargetsIndex"},(([a,o],{path:l,sequenceNumber:c})=>{a===0?(s!==Fo.oe&&r(new Wt(jc(i)),s),s=c,i=l):s=Fo.oe})).next((()=>{s!==Fo.oe&&r(new Wt(jc(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Tx(t,e){return Df(t).put((function(n,i){return{targetId:0,path:io(n.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.changes=new qu((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,di.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?We.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Qh(e).put(n)}removeEntry(e,r,n){return Qh(e).delete((function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],O2(a),o[o.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=di.newInvalidDocument(r);return Qh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(B1(r))},((i,s)=>{n=this.ir(r,s)})).next((()=>n))}sr(e,r){let n={size:0,document:di.newInvalidDocument(r)};return Qh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(B1(r))},((i,s)=>{n={document:this.ir(r,s),size:j2(s)}})).next((()=>n))}getEntries(e,r){let n=Do();return this._r(e,r,((i,s)=>{const a=this.ir(i,s);n=n.insert(i,a)})).next((()=>n))}ar(e,r){let n=Do(),i=new ci(Wt.comparator);return this._r(e,r,((s,a)=>{const o=this.ir(s,a);n=n.insert(s,o),i=i.insert(s,j2(a))})).next((()=>({documents:n,ur:i})))}_r(e,r,n){if(r.isEmpty())return We.resolve();let i=new Yn(G6);r.forEach((l=>i=i.add(l)));const s=IDBKeyRange.bound(B1(i.first()),B1(i.last())),a=i.getIterator();let o=a.getNext();return Qh(e).J({index:"documentKeyIndex",range:s},((l,c,f)=>{const d=Wt.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&G6(o,d)<0;)n(o,null),o=a.getNext();o&&o.isEqual(d)&&(n(o,c),o=a.hasNext()?a.getNext():null),o?f.$(B1(o)):f.done()})).next((()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,r,n,i,s){const a=r.path,o=[a.popLast().toArray(),a.lastSegment(),O2(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qh(e).U(IDBKeyRange.bound(o,l,!0)).next((c=>{s?.incrementDocumentReadCount(c.length);let f=Do();for(const d of c){const m=this.ir(Wt.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);m.isFoundDocument()&&(cg(r,m)||i.has(m.key))&&(f=f.insert(m.key,m))}return f}))}getAllFromCollectionGroup(e,r,n,i){let s=Do();const a=q6(r,n),o=q6(r,cl.max());return Qh(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},((l,c,f)=>{const d=this.ir(Wt.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&f.done()})).next((()=>s))}newChangeBuffer(e){return new tB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return W6(e).get("remoteDocumentGlobalKey").next((r=>(lr(!!r),r)))}rr(e,r){return W6(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=Vj(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(pr.min())))return n}return di.newInvalidDocument(e)}}function iI(t){return new eB(t)}class tB extends nI{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new qu((n=>n.toString()),((n,i)=>n.isEqual(i)))}applyChanges(e){const r=[];let n=0,i=new Yn(((s,a)=>Lr(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const o=this.lr.get(s);if(r.push(this.cr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=P6(this.cr.serializer,a);i=i.add(s.path.popLast());const c=j2(l);n+=c-o.size,r.push(this.cr.addEntry(e,s,l))}else if(n-=o.size,this.trackRemovals){const l=P6(this.cr.serializer,a.convertToNoDocument(pr.min()));r.push(this.cr.addEntry(e,s,l))}})),i.forEach((s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,s))})),r.push(this.cr.updateMetadata(e,n)),We.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:i})=>(i.forEach(((s,a)=>{this.lr.set(s,{size:a,readTime:n.get(s).readTime})})),n)))}}function W6(t){return Hs(t,"remoteDocumentGlobal")}function Qh(t){return Hs(t,"remoteDocumentsV14")}function B1(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function q6(t,e){const r=e.documentKey.path.toArray();return[t,O2(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function G6(t,e){const r=t.path.toArray(),n=e.path.toArray();let i=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(i=Lr(r[s],n[s]),i)return i;return i=Lr(r.length,n.length),i||(i=Lr(r[r.length-2],n[n.length-2]),i||Lr(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,r)))).next((i=>(n!==null&&om(n.mutation,i,Lo.empty(),Ni.now()),i)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,Br()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=Br()){const i=Bc();return this.populateOverlays(e,i,r).next((()=>this.computeViews(e,r,i,n).next((s=>{let a=Y1();return s.forEach(((o,l)=>{a=a.insert(o,l.overlayedDocument)})),a}))))}getOverlayedDocuments(e,r){const n=Bc();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,Br())))}populateOverlays(e,r,n){const i=[];return n.forEach((s=>{r.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,o)=>{r.set(a,o)}))}))}computeViews(e,r,n,i){let s=Do();const a=am(),o=(function(){return am()})();return r.forEach(((l,c)=>{const f=n.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof Gu)?s=s.insert(c.key,c):f!==void 0?(a.set(c.key,f.mutation.getFieldMask()),om(f.mutation,c,f.mutation.getFieldMask(),Ni.now())):a.set(c.key,Lo.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((c,f)=>a.set(c,f))),r.forEach(((c,f)=>{var d;return o.set(c,new rB(f,(d=a.get(c))!==null&&d!==void 0?d:null))})),o)))}recalculateAndSaveOverlays(e,r){const n=am();let i=new ci(((a,o)=>a-o)),s=Br();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((a=>{for(const o of a)o.keys().forEach((l=>{const c=r.get(l);if(c===null)return;let f=n.get(l)||Lo.empty();f=o.applyToLocalView(c,f),n.set(l,f);const d=(i.get(o.batchId)||Br()).add(l);i=i.insert(o.batchId,d)}))})).next((()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,f=l.value,d=_C();f.forEach((m=>{if(!s.has(m)){const p=CC(r.get(m),n.get(m));p!==null&&d.set(m,p),s=s.add(m)}})),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return We.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,i){return(function(a){return Wt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):o4(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-s.size):We.resolve(Bc());let o=-1,l=s;return a.next((c=>We.forEach(c,((f,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(f)?We.resolve():this.remoteDocumentCache.getEntry(e,f).next((m=>{l=l.insert(f,m)}))))).next((()=>this.populateOverlays(e,c,s))).next((()=>this.computeViews(e,l,c,Br()))).next((f=>({batchId:o,changes:wC(f)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Wt(r)).next((n=>{let i=Y1();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const s=r.collectionGroup;let a=Y1();return this.indexManager.getCollectionParents(e,s).next((o=>We.forEach(o,(l=>{const c=(function(d,m){return new Wu(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(r,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,n,i).next((f=>{f.forEach(((d,m)=>{a=a.insert(d,m)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,r,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,i)))).next((a=>{s.forEach(((l,c)=>{const f=c.getKey();a.get(f)===null&&(a=a.insert(f,di.newInvalidDocument(f)))}));let o=Y1();return a.forEach(((l,c)=>{const f=s.get(l);f!==void 0&&om(f.mutation,c,Lo.empty(),Ni.now()),cg(r,c)&&(o=o.insert(l,c))})),o}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return We.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(i){return{id:i.id,version:i.version,createTime:gs(i.createTime)}})(r)),We.resolve()}getNamedQuery(e,r){return We.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(i){return{name:i.name,query:g4(i.bundledQuery),readTime:gs(i.readTime)}})(r)),We.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(){this.overlays=new ci(Wt.comparator),this.Ir=new Map}getOverlay(e,r){return We.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Bc();return We.forEach(r,(i=>this.getOverlay(e,i).next((s=>{s!==null&&n.set(i,s)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((i,s)=>{this.ht(e,r,s)})),We.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.Ir.delete(n)),We.resolve()}getOverlaysForCollection(e,r,n){const i=Bc(),s=r.length+1,a=new Wt(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>n&&i.set(l.getKey(),l)}return We.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let s=new ci(((c,f)=>c-f));const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let f=s.get(c.largestBatchId);f===null&&(f=Bc(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const o=Bc(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,f)=>o.set(c,f))),!(o.size()>=i)););return We.resolve(o)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new d4(r,n));let s=this.Ir.get(r);s===void 0&&(s=Br(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(){this.sessionToken=zi.EMPTY_BYTE_STRING}getSessionToken(e){return We.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,We.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(){this.Tr=new Yn(ea.Er),this.dr=new Yn(ea.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new ea(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new ea(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new Wt(new cn([])),n=new ea(r,e),i=new ea(r,e+1),s=[];return this.dr.forEachInRange([n,i],(a=>{this.Vr(a),s.push(a.key)})),s}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Wt(new cn([])),n=new ea(r,e),i=new ea(r,e+1);let s=Br();return this.dr.forEachInRange([n,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const r=new ea(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class ea{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Wt.comparator(e.key,r.key)||Lr(e.wr,r.wr)}static Ar(e,r){return Lr(e.wr,r.wr)||Wt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Yn(ea.Er)}checkEmpty(e){return We.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new f4(s,r,n,i);this.mutationQueue.push(a);for(const o of i)this.br=this.br.add(new ea(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return We.resolve(a)}lookupMutationBatch(e,r){return We.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.vr(n),s=i<0?0:i;return We.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return We.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return We.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new ea(r,0),i=new ea(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,i],(a=>{const o=this.Dr(a.wr);s.push(o)})),We.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Yn(Lr);return r.forEach((i=>{const s=new ea(i,0),a=new ea(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],(o=>{n=n.add(o.wr)}))})),We.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let s=n;Wt.isDocumentKey(s)||(s=s.child(""));const a=new ea(new Wt(s),0);let o=new Yn(Lr);return this.br.forEachWhile((l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===i&&(o=o.add(l.wr)),!0)}),a),We.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach((n=>{const i=this.Dr(n);i!==null&&r.push(i)})),r}removeMutationBatch(e,r){lr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return We.forEach(r.mutations,(i=>{const s=new ea(i.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new ea(r,0),i=this.br.firstAfterOrEqual(n);return We.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,We.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(e){this.Mr=e,this.docs=(function(){return new ci(Wt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),s=i?i.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return We.resolve(n?n.document.mutableCopy():di.newInvalidDocument(r))}getEntries(e,r){let n=Do();return r.forEach((i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():di.newInvalidDocument(i))})),We.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let s=Do();const a=r.path,o=new Wt(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:f}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||n4(W8(f),n)<=0||(i.has(f.key)||cg(r,f))&&(s=s.insert(f.key,f.mutableCopy()))}return We.resolve(s)}getAllFromCollectionGroup(e,r,n,i){Xt()}Or(e,r){return We.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new lB(this)}getSize(e){return We.resolve(this.size)}}class lB extends nI{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)})),We.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(e){this.persistence=e,this.Nr=new qu((r=>bd(r)),og),this.lastRemoteSnapshotVersion=pr.min(),this.highestTargetId=0,this.Lr=0,this.Br=new y4,this.targetCount=0,this.kr=Ad.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,i)=>r(i))),We.resolve()}getLastRemoteSnapshotVersion(e){return We.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return We.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),We.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),We.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Ad(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,We.resolve()}updateTargetData(e,r){return this.Kn(r),We.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,We.resolve()}removeTargets(e,r,n){let i=0;const s=[];return this.Nr.forEach(((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),We.waitFor(s).next((()=>i))}getTargetCount(e){return We.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return We.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),We.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,s=[];return i&&r.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),We.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),We.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return We.resolve(n)}containsKey(e,r){return We.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Fo(0),this.Kr=!1,this.Kr=!0,this.$r=new sB,this.referenceDelegate=e(this),this.Ur=new cB(this),this.indexManager=new Kj,this.remoteDocumentCache=(function(i){return new oB(i)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new KC(r),this.Gr=new nB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new iB,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new aB(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){kt("MemoryPersistence","Starting transaction:",e);const i=new uB(this.Qr.next());return this.referenceDelegate.zr(),n(i).next((s=>this.referenceDelegate.jr(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Hr(e,r){return We.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class uB extends G8{constructor(e){super(),this.currentSequenceNumber=e}}class Ov{constructor(e){this.persistence=e,this.Jr=new y4,this.Yr=null}static Zr(e){return new Ov(e)}get Xr(){if(this.Yr)return this.Yr;throw Xt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),We.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),We.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),We.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((i=>this.Xr.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((i=>{i.forEach((s=>this.Xr.add(s.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return We.forEach(this.Xr,(n=>{const i=Wt.fromPath(n);return this.ei(e,i).next((s=>{s||r.removeEntry(i,pr.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return We.or([()=>We.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class B2{constructor(e,r){this.persistence=e,this.ti=new qu((n=>io(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=rI(this,r)}static Zr(e,r){return new B2(e,r)}zr(){}jr(e){return We.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Yn(e){const r=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>r.next((i=>n+i))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}Zn(e,r){return We.forEach(this.ti,((n,i)=>this.nr(e,n,i).next((s=>s?We.resolve():r(i)))))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Or(e,(a=>this.nr(e,a,r).next((o=>{o||(n++,s.removeEntry(a,pr.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,r){return this.ti.set(r,e.currentSequenceNumber),We.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),We.resolve()}removeReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),We.resolve()}updateLimboDocument(e,r){return this.ti.set(r,e.currentSequenceNumber),We.resolve()}Wr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=l2(e.data.value)),r}nr(e,r,n){return We.or([()=>this.persistence.Hr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.ti.get(r);return We.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e){this.serializer=e}O(e,r,n,i){const s=new Av("createOrUpgrade",r);n<1&&i>=1&&((function(l){l.createObjectStore("owner")})(e),(function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",o6,{unique:!0}),l.createObjectStore("documentMutations")})(e),K6(e),(function(l){l.createObjectStore("remoteDocuments")})(e));let a=We.resolve();return n<3&&i>=3&&(n!==0&&((function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")})(e),K6(e)),a=a.next((()=>(function(l){const c=l.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pr.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",f)})(s)))),n<4&&i>=4&&(n!==0&&(a=a.next((()=>(function(l,c){return c.store("mutations").U().next((f=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",o6,{unique:!0});const d=c.store("mutations"),m=f.map((p=>d.put(p)));return We.waitFor(m)}))})(e,s)))),a=a.next((()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&i>=5&&(a=a.next((()=>this.ni(s)))),n<6&&i>=6&&(a=a.next((()=>((function(l){l.createObjectStore("remoteDocumentGlobal")})(e),this.ri(s))))),n<7&&i>=7&&(a=a.next((()=>this.ii(s)))),n<8&&i>=8&&(a=a.next((()=>this.si(e,s)))),n<9&&i>=9&&(a=a.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&i>=10&&(a=a.next((()=>this.oi(s)))),n<11&&i>=11&&(a=a.next((()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(l){l.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&i>=12&&(a=a.next((()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:KM});c.createIndex("collectionPathOverlayIndex",XM,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",YM,{unique:!1})})(e)}))),n<13&&i>=13&&(a=a.next((()=>(function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:MM});c.createIndex("documentKeyIndex",jM),c.createIndex("collectionGroupIndex",BM)})(e))).next((()=>this._i(e,s))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&i>=14&&(a=a.next((()=>this.ai(e,s)))),n<15&&i>=15&&(a=a.next((()=>(function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:HM}).createIndex("sequenceNumberIndex",WM,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:qM}).createIndex("documentKeyIndex",GM,{unique:!1})})(e)))),n<16&&i>=16&&(a=a.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&i>=17&&(a=a.next((()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)}))),a}ri(e){let r=0;return e.store("remoteDocuments").J(((n,i)=>{r+=j2(i)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((i=>We.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",a).next((o=>We.forEach(o,(l=>{lr(l.userId===s.userId);const c=rd(this.serializer,l);return JC(e,s.userId,c).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((i=>{const s=[];return n.J(((a,o)=>{const l=new cn(a),c=(function(d){return[0,io(d)]})(l);s.push(r.get(c).next((f=>f?We.resolve():(d=>r.put({targetId:0,path:io(d),sequenceNumber:i.highestListenSequenceNumber}))(l))))})).next((()=>We.waitFor(s)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:$M});const n=r.store("collectionParents"),i=new v4,s=a=>{if(i.add(a)){const o=a.lastSegment(),l=a.popLast();return n.put({collectionId:o,parent:io(l)})}};return r.store("remoteDocuments").J({H:!0},((a,o)=>{const l=new cn(a);return s(l.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([a,o,l],c)=>{const f=jc(o);return s(f.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,i)=>{const s=J1(i),a=XC(this.serializer,s);return r.put(a)}))}_i(e,r){const n=r.store("remoteDocuments"),i=[];return n.J(((s,a)=>{const o=r.store("remoteDocumentsV14"),l=(function(d){return d.document?new Wt(cn.fromString(d.document.name).popFirst(5)):d.noDocument?Wt.fromSegments(d.noDocument.path):d.unknownDocument?Wt.fromSegments(d.unknownDocument.path):Xt()})(a).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(c))})).next((()=>We.waitFor(i)))}ai(e,r){const n=r.store("mutations"),i=iI(this.serializer),s=new w4(Ov.Zr,this.serializer.ct);return n.U().next((a=>{const o=new Map;return a.forEach((l=>{var c;let f=(c=o.get(l.userId))!==null&&c!==void 0?c:Br();rd(this.serializer,l).keys().forEach((d=>f=f.add(d))),o.set(l.userId,f)})),We.forEach(o,((l,c)=>{const f=new ra(c),d=Lv.lt(this.serializer,f),m=s.getIndexManager(f),p=Dv.lt(f,this.serializer,m,s.referenceDelegate);return new sI(i,p,d,m).recalculateAndSaveOverlaysForDocumentKeys(new M_(r,Fo.oe),l).next()}))}))}}function K6(t){t.createObjectStore("targetDocuments",{keyPath:UM}).createIndex("documentTargetsIndex",zM,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",VM,{unique:!0}),t.createObjectStore("targetGlobal")}const _w="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class _4{constructor(e,r,n,i,s,a,o,l,c,f,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=a,this.document=o,this.ci=c,this.li=f,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!_4.D())throw new Et(nt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Zj(this,i),this.Ai=r+"main",this.serializer=new KC(l),this.Ri=new Wc(this.Ai,this.hi,new fB(this.serializer)),this.$r=new zj,this.Ur=new Yj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iI(this.serializer),this.Gr=new Uj,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,f===!1&&ps("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Et(nt.FAILED_PRECONDITION,_w);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new Fo(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Ax(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(wh(e))return kt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return kt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return V1(e).get("owner").next((r=>We.resolve(this.vi(r))))}Ci(e){return Ax(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=Hs(r,"clientMetadata");return n.U().next((i=>{const s=this.xi(i,18e5),a=i.filter((o=>s.indexOf(o)===-1));return We.forEach(a,(o=>n.delete(o.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?We.resolve(!0):V1(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Et(nt.FAILED_PRECONDITION,_w);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ax(e).U().next((n=>this.xi(n,5e3).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&kt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new M_(e,Fo.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>Ax(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Dv.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Xj(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Lv.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){kt("IndexedDbPersistence","Starting transaction:",e);const i=r==="readonly"?"readonly":"readwrite",s=(function(l){return l===17?ZM:l===16?JM:l===15?s4:l===14?Z8:l===13?J8:l===12?QM:l===11?Q8:void Xt()})(this.hi);let a;return this.Ri.runTransaction(e,i,s,(o=>(a=new M_(o,this.Qr?this.Qr.next():Fo.oe),r==="readwrite-primary"?this.wi(a).next((l=>!!l||this.Si(a))).next((l=>{if(!l)throw ps(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new Et(nt.FAILED_PRECONDITION,q8);return n(a)})).next((l=>this.Di(a).next((()=>l)))):this.Ki(a).next((()=>n(a)))))).then((o=>(a.raiseOnCommittedEvent(),o)))}Ki(e){return V1(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Et(nt.FAILED_PRECONDITION,_w)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return V1(e).put("owner",r)}static D(){return Wc.D()}bi(e){const r=V1(e);return r.get("owner").next((n=>this.vi(n)?(kt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):We.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(ps(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;A8()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return kt("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ps("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ps("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function V1(t){return Hs(t,"owner")}function Ax(t){return Hs(t,"clientMetadata")}function b4(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(e,r){let n=Br(),i=Br();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new E4(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return A8()?8:K8(zs())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,i){const s={result:null};return this.Yi(e,r).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.Zi(e,r,i,n).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new hB;return this.Xi(e,r,a).next((o=>{if(s.result=o,this.zi)return this.es(e,r,a,o.size)}))})).next((()=>s.result))}es(e,r,n,i){return n.documentReadCount<this.ji?(j0()<=ln.DEBUG&&kt("QueryEngine","SDK will not create cache indexes for query:",B0(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),We.resolve()):(j0()<=ln.DEBUG&&kt("QueryEngine","Query:",B0(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(j0()<=ln.DEBUG&&kt("QueryEngine","The SDK decides to create cache indexes for query:",B0(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,so(r))):We.resolve())}Yi(e,r){if(w6(r))return We.resolve(null);let n=so(r);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(r.limit!==null&&i===1&&(r=L2(r,null,"F"),n=so(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((s=>{const a=Br(...s);return this.Ji.getDocuments(e,a).next((o=>this.indexManager.getMinOffset(e,n).next((l=>{const c=this.ts(r,o);return this.ns(r,c,a,l.readTime)?this.Yi(e,L2(r,null,"F")):this.rs(e,c,r,l)}))))})))))}Zi(e,r,n,i){return w6(r)||i.isEqual(pr.min())?We.resolve(null):this.Ji.getDocuments(e,n).next((s=>{const a=this.ts(r,s);return this.ns(r,a,n,i)?We.resolve(null):(j0()<=ln.DEBUG&&kt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),B0(r)),this.rs(e,a,r,H8(i,-1)).next((o=>o)))}))}ts(e,r){let n=new Yn(vC(e));return r.forEach(((i,s)=>{cg(e,s)&&(n=n.add(s))})),n}ns(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,r,n){return j0()<=ln.DEBUG&&kt("QueryEngine","Using full collection scan to execute query:",B0(r)),this.Ji.getDocumentsMatchingQuery(e,r,cl.min(),n)}rs(e,r,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next((s=>(r.forEach((a=>{s=s.insert(a.key,a)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e,r,n,i){this.persistence=e,this.ss=r,this.serializer=i,this.os=new ci(Lr),this._s=new qu((s=>bd(s)),og),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function oI(t,e,r,n){return new dB(t,e,r,n)}async function lI(t,e){const r=$t(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next((s=>(i=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((s=>{const a=[],o=[];let l=Br();for(const c of i){a.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}for(const c of s){o.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}return r.localDocuments.getDocuments(n,l).next((c=>({hs:c,removedBatchIds:a,addedBatchIds:o})))}))}))}function pB(t,e){const r=$t(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return(function(o,l,c,f){const d=c.batch,m=d.keys();let p=We.resolve();return m.forEach((_=>{p=p.next((()=>f.getEntry(l,_))).next((w=>{const b=c.docVersions.get(_);lr(b!==null),w.version.compareTo(b)<0&&(d.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),f.addEntry(w)))}))})),p.next((()=>o.mutationQueue.removeMutationBatch(l,d)))})(r,n,e,s).next((()=>s.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(o){let l=Br();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l})(e)))).next((()=>r.localDocuments.getDocuments(n,i)))}))}function cI(t){const e=$t(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function mB(t,e){const r=$t(t),n=e.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const o=[];e.targetChanges.forEach(((f,d)=>{const m=i.get(d);if(!m)return;o.push(r.Ur.removeMatchingKeys(s,f.removedDocuments,d).next((()=>r.Ur.addMatchingKeys(s,f.addedDocuments,d))));let p=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(zi.EMPTY_BYTE_STRING,pr.min()).withLastLimboFreeSnapshotVersion(pr.min()):f.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(f.resumeToken,n)),i=i.insert(d,p),(function(w,b,k){return w.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(m,p,f)&&o.push(r.Ur.updateTargetData(s,p))}));let l=Do(),c=Br();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,f))})),o.push(uI(s,a,e.documentUpdates).next((f=>{l=f.Ps,c=f.Is}))),!n.isEqual(pr.min())){const f=r.Ur.getLastRemoteSnapshotVersion(s).next((d=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n)));o.push(f)}return We.waitFor(o).next((()=>a.apply(s))).next((()=>r.localDocuments.getLocalViewOfDocuments(s,l,c))).next((()=>l))})).then((s=>(r.os=i,s)))}function uI(t,e,r){let n=Br(),i=Br();return r.forEach((s=>n=n.add(s))),e.getEntries(t,n).next((s=>{let a=Do();return r.forEach(((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(pr.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):kt("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)})),{Ps:a,Is:i}}))}function gB(t,e){const r=$t(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function bp(t,e){const r=$t(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return r.Ur.getTargetData(n,e).next((s=>s?(i=s,We.resolve(i)):r.Ur.allocateTargetId(n).next((a=>(i=new Cu(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=r.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function Ep(t,e,r){const n=$t(t),i=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,(a=>n.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!wh(a))throw a;kt("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function V2(t,e,r){const n=$t(t);let i=pr.min(),s=Br();return n.persistence.runTransaction("Execute query","readwrite",(a=>(function(l,c,f){const d=$t(l),m=d._s.get(f);return m!==void 0?We.resolve(d.os.get(m)):d.Ur.getTargetData(c,f)})(n,a,so(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next((l=>{s=l}))})).next((()=>n.ss.getDocumentsMatchingQuery(a,e,r?i:pr.min(),r?s:Br()))).next((o=>(dI(n,xC(e),o),{documents:o,Ts:s})))))}function fI(t,e){const r=$t(t),n=$t(r.Ur),i=r.os.get(e);return i?Promise.resolve(i.target):r.persistence.runTransaction("Get target data","readonly",(s=>n.ot(s,e).next((a=>a?a.target:null))))}function hI(t,e){const r=$t(t),n=r.us.get(e)||pr.min();return r.persistence.runTransaction("Get new document changes","readonly",(i=>r.cs.getAllFromCollectionGroup(i,e,H8(n,-1),Number.MAX_SAFE_INTEGER))).then((i=>(dI(r,e,i),i)))}function dI(t,e,r){let n=t.us.get(e)||pr.min();r.forEach(((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)})),t.us.set(e,n)}async function xB(t,e,r,n){const i=$t(t);let s=Br(),a=Do();for(const c of r){const f=e.Es(c.metadata.name);c.document&&(s=s.add(f));const d=e.ds(c);d.setReadTime(e.As(c.metadata.readTime)),a=a.insert(f,d)}const o=i.cs.newChangeBuffer({trackRemovals:!0}),l=await bp(i,(function(f){return so(Bp(cn.fromString(`__bundle__/docs/${f}`)))})(n));return i.persistence.runTransaction("Apply bundle documents","readwrite",(c=>uI(c,o,a).next((f=>(o.apply(c),f))).next((f=>i.Ur.removeMatchingKeysForTargetId(c,l.targetId).next((()=>i.Ur.addMatchingKeys(c,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(c,f.Ps,f.Is))).next((()=>f.Ps))))))}async function vB(t,e,r=Br()){const n=await bp(t,so(g4(e.bundledQuery))),i=$t(t);return i.persistence.runTransaction("Save named query","readwrite",(s=>{const a=gs(e.readTime);if(n.snapshotVersion.compareTo(a)>=0)return i.Gr.saveNamedQuery(s,e);const o=n.withResumeToken(zi.EMPTY_BYTE_STRING,a);return i.os=i.os.insert(o.targetId,o),i.Ur.updateTargetData(s,o).next((()=>i.Ur.removeMatchingKeysForTargetId(s,n.targetId))).next((()=>i.Ur.addMatchingKeys(s,r,n.targetId))).next((()=>i.Gr.saveNamedQuery(s,e)))}))}function X6(t,e){return`firestore_clients_${t}_${e}`}function Y6(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function bw(t,e){return`firestore_targets_${t}_${e}`}class U2{constructor(e,r,n,i){this.user=e,this.batchId=r,this.state=n,this.error=i}static Rs(e,r,n){const i=JSON.parse(n);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new Et(i.error.code,i.error.message))),a?new U2(e,r,i.state,s):(ps("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lm{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let i,s=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return s&&n.error&&(s=typeof n.error.message=="string"&&typeof n.error.code=="string",s&&(i=new Et(n.error.code,n.error.message))),s?new lm(e,n.state,i):(ps("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class z2{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let i=typeof n=="object"&&n.activeTargetIds instanceof Array,s=l4();for(let a=0;i&&a<n.activeTargetIds.length;++a)i=X8(n.activeTargetIds[a]),s=s.add(n.activeTargetIds[a]);return i?new z2(e,s):(ps("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class S4{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new S4(r.clientId,r.onlineState):(ps("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Q_{constructor(){this.activeTargetIds=l4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ew{constructor(e,r,n,i,s){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ci(Lr),this.started=!1,this.bs=[];const a=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=X6(this.persistenceKey,this.ps),this.vs=(function(l){return`firestore_sequence_number_${l}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Q_),this.Cs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.xs=(function(l){return`firestore_online_state_${l}`})(this.persistenceKey),this.Os=(function(l){return`firestore_bundle_loaded_v2_${l}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const i=this.getItem(X6(this.persistenceKey,n));if(i){const s=z2.Rs(n,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,i)=>{i.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(bw(this.persistenceKey,e));if(i){const s=lm.Rs(e,i);s&&(n=s.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(bw(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((i=>{this.Qs(i)})),this.currentUser=e,n.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return kt("SharedClientState","READ",e,r),r}setItem(e,r){kt("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){kt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(kt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void ps("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(s){let a=Fo.oe;if(s!=null)try{const o=JSON.parse(s);lr(typeof o=="number"),a=o}catch(o){ps("SharedClientState","Failed to read sequence number from WebStorage",o)}return a})(r.newValue);n!==Fo.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((i=>this.syncEngine.eo(i))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const i=new U2(this.currentUser,e,r,n),s=Y6(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const r=Y6(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const i=bw(this.persistenceKey,e),s=new lm(e,r,n);this.setItem(i,s.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return z2.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),i=Number(n[1]),s=n[2]!==void 0?n[2]:null;return U2.Rs(new ra(s),i,r)}Ys(e,r){const n=this.Ms.exec(e),i=Number(n[1]);return lm.Rs(i,r)}Ls(e){return S4.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);kt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(n),a=[],o=[];return s.forEach((l=>{i.has(l)||a.push(l)})),i.forEach((l=>{s.has(l)||o.push(l)})),this.syncEngine.io(a,o).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=l4();return e.forEach(((n,i)=>{r=r.unionWith(i.activeTargetIds)})),r}}class pI{constructor(){this.so=new Q_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Q_,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){kt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){kt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cx=null;function Sw(){return Cx===null?Cx=(function(){return 268435456+Math.round(2147483648*Math.random())})():Cx++,"0x"+Cx.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="WebChannelConnection";class bB extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(r,n,i,s,a){const o=Sw(),l=this.xo(r,n.toUriEncodedString());kt("RestConnection",`Sending RPC '${r}' ${o}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,a),this.No(r,l,c,i).then((f=>(kt("RestConnection",`Received RPC '${r}' ${o}: `,f),f)),(f=>{throw ll("RestConnection",`RPC '${r}' ${o} failed with error: `,f,"url: ",l,"request:",i),f}))}Lo(r,n,i,s,a,o){return this.Mo(r,n,i,s,a)}Oo(r,n,i){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+jp})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,a)=>r[a]=s)),i&&i.headers.forEach(((s,a)=>r[a]=s))}xo(r,n){const i=wB[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,i){const s=Sw();return new Promise(((a,o)=>{const l=new D8;l.setWithCredentials(!0),l.listenOnce(O8.COMPLETE,(()=>{try{switch(l.getLastErrorCode()){case s2.NO_ERROR:const f=l.getResponseJson();kt(Wa,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case s2.TIMEOUT:kt(Wa,`RPC '${e}' ${s} timed out`),o(new Et(nt.DEADLINE_EXCEEDED,"Request time out"));break;case s2.HTTP_ERROR:const d=l.getStatus();if(kt(Wa,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m?.error;if(p&&p.status&&p.message){const _=(function(b){const k=b.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(k)>=0?k:nt.UNKNOWN})(p.status);o(new Et(_,p.message))}else o(new Et(nt.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new Et(nt.UNAVAILABLE,"Connection failed."));break;default:Xt()}}finally{kt(Wa,`RPC '${e}' ${s} completed.`)}}));const c=JSON.stringify(i);kt(Wa,`RPC '${e}' ${s} sending request:`,i),l.send(r,"POST",c,n,15)}))}Bo(e,r,n){const i=Sw(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=B8(),o=j8(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const f=s.join("");kt(Wa,`Creating RPC '${e}' stream ${i}: ${f}`,l);const d=a.createWebChannel(f,l);let m=!1,p=!1;const _=new _B({Io:b=>{p?kt(Wa,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(m||(kt(Wa,`Opening RPC '${e}' stream ${i} transport.`),d.open(),m=!0),kt(Wa,`RPC '${e}' stream ${i} sending:`,b),d.send(b))},To:()=>d.close()}),w=(b,k,F)=>{b.listen(k,(N=>{try{F(N)}catch(B){setTimeout((()=>{throw B}),0)}}))};return w(d,X1.EventType.OPEN,(()=>{p||(kt(Wa,`RPC '${e}' stream ${i} transport opened.`),_.yo())})),w(d,X1.EventType.CLOSE,(()=>{p||(p=!0,kt(Wa,`RPC '${e}' stream ${i} transport closed`),_.So())})),w(d,X1.EventType.ERROR,(b=>{p||(p=!0,ll(Wa,`RPC '${e}' stream ${i} transport errored:`,b),_.So(new Et(nt.UNAVAILABLE,"The operation could not be completed")))})),w(d,X1.EventType.MESSAGE,(b=>{var k;if(!p){const F=b.data[0];lr(!!F);const N=F,B=N.error||((k=N[0])===null||k===void 0?void 0:k.error);if(B){kt(Wa,`RPC '${e}' stream ${i} received error:`,B);const X=B.status;let G=(function(T){const O=Ts[T];if(O!==void 0)return RC(O)})(X),P=B.message;G===void 0&&(G=nt.INTERNAL,P="Unknown error status: "+X+" with message "+B.message),p=!0,_.So(new Et(G,P)),d.close()}else kt(Wa,`RPC '${e}' stream ${i} received:`,F),_.bo(F)}})),w(o,M8.STAT_EVENT,(b=>{b.stat===D_.PROXY?kt(Wa,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===D_.NOPROXY&&kt(Wa,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.wo()}),0),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(){return typeof window<"u"?window:null}function h2(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(t){return new Nj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,r,n=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&kt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,r,n,i,s,a,o,l){this.ui=e,this.Ho=n,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new k4(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===nt.RESOURCE_EXHAUSTED?(ps(r.toString()),ps("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.Yo===r&&this.P_(n,i)}),(n=>{e((()=>{const i=new Et(nt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{n((()=>this.I_(i)))})),this.stream.onMessage((i=>{n((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return kt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(kt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class EB extends gI{constructor(e,r,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=Fj(this.serializer,e),n=(function(s){if(!("targetChange"in s))return pr.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?pr.min():a.readTime?gs(a.readTime):pr.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=q_(this.serializer),r.addTarget=(function(s,a){let o;const l=a.target;if(o=R2(l)?{documents:zC(s,l)}:{query:Fv(s,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=OC(s,a.resumeToken);const c=H_(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(pr.min())>0){o.readTime=_p(s,a.snapshotVersion.toTimestamp());const c=H_(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o})(this.serializer,e);const n=Dj(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=q_(this.serializer),r.removeTarget=e,this.a_(r)}}class SB extends gI{constructor(e,r,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return lr(!!e.streamToken),this.lastStreamToken=e.streamToken,lr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){lr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Lj(e.writeResults,e.commitTime),n=gs(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=q_(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>Dm(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Et(nt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Mo(e,W_(r,n),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Et(nt.UNKNOWN,s.toString())}))}Lo(e,r,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Lo(e,W_(r,n),i,a,o,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Et(nt.UNKNOWN,a.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class TB{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ps(r),this.D_=!1):kt("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(e,r,n,i,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o((a=>{n.enqueueAndForget((async()=>{bh(this)&&(kt("RemoteStore","Restarting streams for network reachability change."),await(async function(l){const c=$t(l);c.L_.add(4),await zp(c),c.q_.set("Unknown"),c.L_.delete(4),await pg(c)})(this))}))})),this.q_=new TB(n,i)}}async function pg(t){if(bh(t))for(const e of t.B_)await e(!0)}async function zp(t){for(const e of t.B_)await e(!1)}function Mv(t,e){const r=$t(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),C4(r)?A4(r):Hp(r).r_()&&T4(r,e))}function Sp(t,e){const r=$t(t),n=Hp(r);r.N_.delete(e),n.r_()&&xI(r,e),r.N_.size===0&&(n.r_()?n.o_():bh(r)&&r.q_.set("Unknown"))}function T4(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pr.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Hp(t).A_(e)}function xI(t,e){t.Q_.xe(e),Hp(t).R_(e)}function A4(t){t.Q_=new Tj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Hp(t).start(),t.q_.v_()}function C4(t){return bh(t)&&!Hp(t).n_()&&t.N_.size>0}function bh(t){return $t(t).L_.size===0}function vI(t){t.Q_=void 0}async function CB(t){t.q_.set("Online")}async function IB(t){t.N_.forEach(((e,r)=>{T4(t,e)}))}async function NB(t,e){vI(t),C4(t)?(t.q_.M_(e),A4(t)):t.q_.set("Unknown")}async function PB(t,e,r){if(t.q_.set("Online"),e instanceof DC&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const o of s.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.N_.delete(o),i.Q_.removeTarget(o))})(t,e)}catch(n){kt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await $2(t,n)}else if(e instanceof f2?t.Q_.Ke(e):e instanceof LC?t.Q_.He(e):t.Q_.We(e),!r.isEqual(pr.min()))try{const n=await cI(t.localStore);r.compareTo(n)>=0&&await(function(s,a){const o=s.Q_.rt(a);return o.targetChanges.forEach(((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.N_.get(c);f&&s.N_.set(c,f.withResumeToken(l.resumeToken,a))}})),o.targetMismatches.forEach(((l,c)=>{const f=s.N_.get(l);if(!f)return;s.N_.set(l,f.withResumeToken(zi.EMPTY_BYTE_STRING,f.snapshotVersion)),xI(s,l);const d=new Cu(f.target,l,c,f.sequenceNumber);T4(s,d)})),s.remoteSyncer.applyRemoteEvent(o)})(t,r)}catch(n){kt("RemoteStore","Failed to raise snapshot:",n),await $2(t,n)}}async function $2(t,e,r){if(!wh(e))throw e;t.L_.add(1),await zp(t),t.q_.set("Offline"),r||(r=()=>cI(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{kt("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await pg(t)}))}function yI(t,e){return e().catch((r=>$2(t,r,e)))}async function $p(t){const e=$t(t),r=ah(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;RB(e);)try{const i=await gB(e.localStore,n);if(i===null){e.O_.length===0&&r.o_();break}n=i.batchId,FB(e,i)}catch(i){await $2(e,i)}wI(e)&&_I(e)}function RB(t){return bh(t)&&t.O_.length<10}function FB(t,e){t.O_.push(e);const r=ah(t);r.r_()&&r.V_&&r.m_(e.mutations)}function wI(t){return bh(t)&&!ah(t).n_()&&t.O_.length>0}function _I(t){ah(t).start()}async function LB(t){ah(t).p_()}async function DB(t){const e=ah(t);for(const r of t.O_)e.m_(r.mutations)}async function OB(t,e,r){const n=t.O_.shift(),i=h4.from(n,e,r);await yI(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await $p(t)}async function MB(t,e){e&&ah(t).V_&&await(async function(n,i){if((function(a){return PC(a)&&a!==nt.ABORTED})(i.code)){const s=n.O_.shift();ah(n).s_(),await yI(n,(()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i))),await $p(n)}})(t,e),wI(t)&&_I(t)}async function J6(t,e){const r=$t(t);r.asyncQueue.verifyOperationInProgress(),kt("RemoteStore","RemoteStore received new credentials");const n=bh(r);r.L_.add(3),await zp(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await pg(r)}async function J_(t,e){const r=$t(t);e?(r.L_.delete(2),await pg(r)):e||(r.L_.add(2),await zp(r),r.q_.set("Unknown"))}function Hp(t){return t.K_||(t.K_=(function(r,n,i){const s=$t(r);return s.w_(),new EB(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Eo:CB.bind(null,t),Ro:IB.bind(null,t),mo:NB.bind(null,t),d_:PB.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),C4(t)?A4(t):t.q_.set("Unknown")):(await t.K_.stop(),vI(t))}))),t.K_}function ah(t){return t.U_||(t.U_=(function(r,n,i){const s=$t(r);return s.w_(),new SB(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:LB.bind(null,t),mo:MB.bind(null,t),f_:DB.bind(null,t),g_:OB.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await $p(t)):(await t.U_.stop(),t.O_.length>0&&(kt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,r,n,i,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new oa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,s){const a=Date.now()+n,o=new I4(e,r,a,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Et(nt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wp(t,e){if(ps("AsyncQueue",`${e}: ${t}`),wh(t))return new Et(nt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Wt.comparator(r.key,n.key):(r,n)=>Wt.comparator(r.key,n.key),this.keyedMap=Y1(),this.sortedSet=new ci(this.comparator)}static emptySet(e){return new Q0(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Q0)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Q0;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(){this.W_=new ci(Wt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Xt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class kp{constructor(e,r,n,i,s,a,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,i,s){const a=[];return r.forEach((o=>{a.push({type:0,doc:o})})),new kp(e,r,Q0.emptySet(r),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class BB{constructor(){this.queries=eS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=$t(r),s=i.queries;i.queries=eS(),s.forEach(((a,o)=>{for(const l of o.j_)l.onError(n)}))})(this,new Et(nt.ABORTED,"Firestore shutting down"))}}function eS(){return new qu((t=>gC(t)),lg)}async function N4(t,e){const r=$t(t);let n=3;const i=e.query;let s=r.queries.get(i);s?!s.H_()&&e.J_()&&(n=2):(s=new jB,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(i,!0);break;case 1:s.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(a){const o=Wp(a,`Initialization of query '${B0(e.query)}' failed`);return void e.onError(o)}r.queries.set(i,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&R4(r)}async function P4(t,e){const r=$t(t),n=e.query;let i=3;const s=r.queries.get(n);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function VB(t,e){const r=$t(t);let n=!1;for(const i of e){const s=i.query,a=r.queries.get(s);if(a){for(const o of a.j_)o.X_(i)&&(n=!0);a.z_=i}}n&&R4(r)}function UB(t,e,r){const n=$t(t),i=n.queries.get(e);if(i)for(const s of i.j_)s.onError(r);n.queries.delete(e)}function R4(t){t.Y_.forEach((e=>{e.next()}))}var Z_,tS;(tS=Z_||(Z_={})).ea="default",tS.Cache="cache";class F4{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new kp(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=kp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Z_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e){this.serializer=e}Es(e){return qc(this.serializer,e)}ds(e){return e.metadata.exists?UC(this.serializer,e.document,!1):di.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return gs(e)}}class $B{constructor(e,r,n){this.ca=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bI(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const n=cn.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,n=new rS(this.serializer);for(const i of e)if(i.metadata.queries){const s=n.Es(i.metadata.name);for(const a of i.metadata.queries){const o=(r.get(a)||Br()).add(s);r.set(a,o)}}return r}async complete(){const e=await xB(this.localStore,new rS(this.serializer),this.documents,this.ca.id),r=this.ha(this.documents);for(const n of this.queries)await vB(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function bI(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e){this.key=e}}class SI{constructor(e){this.key=e}}class kI{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Br(),this.mutatedKeys=Br(),this.Aa=vC(e),this.Ra=new Q0(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new Z6,i=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,d)=>{const m=i.get(f),p=cg(this.query,d)?d:null,_=!!m&&this.mutatedKeys.has(m.key),w=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;m&&p?m.data.isEqual(p.data)?_!==w&&(n.track({type:3,doc:p}),b=!0):this.ga(m,p)||(n.track({type:2,doc:p}),b=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(o=!0)):!m&&p?(n.track({type:0,doc:p}),b=!0):m&&!p&&(n.track({type:1,doc:m}),b=!0,(l||c)&&(o=!0)),b&&(p?(a=a.add(p),s=w?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),n.track({type:1,doc:f})}return{Ra:a,fa:n,ns:o,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort(((f,d)=>(function(p,_){const w=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xt()}};return w(p)-w(_)})(f.type,d.type)||this.Aa(f.doc,d.doc))),this.pa(n),i=i!=null&&i;const o=r&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new kp(this.query,e.Ra,s,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Z6,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Br(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new SI(n))})),this.da.forEach((n=>{e.has(n)||r.push(new EI(n))})),r}ba(e){this.Ta=e.Ts,this.da=Br();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return kp.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class HB{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class WB{constructor(e){this.key=e,this.va=!1}}class qB{constructor(e,r,n,i,s,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new qu((o=>gC(o)),lg),this.Ma=new Map,this.xa=new Set,this.Oa=new ci(Wt.comparator),this.Na=new Map,this.La=new y4,this.Ba={},this.ka=new Map,this.qa=Ad.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function GB(t,e,r=!0){const n=jv(t);let i;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await TI(n,e,r,!0),i}async function KB(t,e){const r=jv(t);await TI(r,e,!0,!1)}async function TI(t,e,r,n){const i=await bp(t.localStore,so(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await L4(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&r&&Mv(t.remoteStore,i),o}async function L4(t,e,r,n,i){t.Ka=(d,m,p)=>(async function(w,b,k,F){let N=b.view.ma(k);N.ns&&(N=await V2(w.localStore,b.query,!1).then((({documents:P})=>b.view.ma(P,N))));const B=F&&F.targetChanges.get(b.targetId),X=F&&F.targetMismatches.get(b.targetId)!=null,G=b.view.applyChanges(N,w.isPrimaryClient,B,X);return e5(w,b.targetId,G.wa),G.snapshot})(t,d,m,p);const s=await V2(t.localStore,e,!0),a=new kI(e,s.Ts),o=a.ma(s.documents),l=hg.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),c=a.applyChanges(o,t.isPrimaryClient,l);e5(t,r,c.wa);const f=new HB(e,r,a);return t.Fa.set(e,f),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function XB(t,e,r){const n=$t(t),i=n.Fa.get(e),s=n.Ma.get(i.targetId);if(s.length>1)return n.Ma.set(i.targetId,s.filter((a=>!lg(a,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Ep(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),r&&Sp(n.remoteStore,i.targetId),Tp(n,i.targetId)})).catch(yh)):(Tp(n,i.targetId),await Ep(n.localStore,i.targetId,!0))}async function YB(t,e){const r=$t(t),n=r.Fa.get(e),i=r.Ma.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Sp(r.remoteStore,n.targetId))}async function QB(t,e,r){const n=j4(t);try{const i=await(function(a,o){const l=$t(a),c=Ni.now(),f=o.reduce(((p,_)=>p.add(_.key)),Br());let d,m;return l.persistence.runTransaction("Locally write mutations","readwrite",(p=>{let _=Do(),w=Br();return l.cs.getEntries(p,f).next((b=>{_=b,_.forEach(((k,F)=>{F.isValidDocument()||(w=w.add(k))}))})).next((()=>l.localDocuments.getOverlayedDocuments(p,_))).next((b=>{d=b;const k=[];for(const F of o){const N=Ej(F,d.get(F.key).overlayedDocument);N!=null&&k.push(new Gu(F.key,N,sC(N.value.mapValue),Ii.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,k,o)})).next((b=>{m=b;const k=b.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(p,b.batchId,k)}))})).then((()=>({batchId:m.batchId,changes:wC(d)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new ci(Lr)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c})(n,i.batchId,r),await Ku(n,i.changes),await $p(n.remoteStore)}catch(i){const s=Wp(i,"Failed to persist write");r.reject(s)}}async function AI(t,e){const r=$t(t);try{const n=await mB(r.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=r.Na.get(s);a&&(lr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?lr(a.va):i.removedDocuments.size>0&&(lr(a.va),a.va=!1))})),await Ku(r,n,e)}catch(n){await yh(n)}}function nS(t,e,r){const n=$t(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach(((s,a)=>{const o=a.view.Z_(e);o.snapshot&&i.push(o.snapshot)})),(function(a,o){const l=$t(a);l.onlineState=o;let c=!1;l.queries.forEach(((f,d)=>{for(const m of d.j_)m.Z_(o)&&(c=!0)})),c&&R4(l)})(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function JB(t,e,r){const n=$t(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Na.get(e),s=i&&i.key;if(s){let a=new ci(Wt.comparator);a=a.insert(s,di.newNoDocument(s,pr.min()));const o=Br().add(s),l=new fg(pr.min(),new Map,new ci(Lr),a,o);await AI(n,l),n.Oa=n.Oa.remove(s),n.Na.delete(e),M4(n)}else await Ep(n.localStore,e,!1).then((()=>Tp(n,e,r))).catch(yh)}async function ZB(t,e){const r=$t(t),n=e.batch.batchId;try{const i=await pB(r.localStore,e);O4(r,n,null),D4(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Ku(r,i)}catch(i){await yh(i)}}async function eV(t,e,r){const n=$t(t);try{const i=await(function(a,o){const l=$t(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let f;return l.mutationQueue.lookupMutationBatch(c,o).next((d=>(lr(d!==null),f=d.keys(),l.mutationQueue.removeMutationBatch(c,d)))).next((()=>l.mutationQueue.performConsistencyCheck(c))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(c,f,o))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f))).next((()=>l.localDocuments.getDocuments(c,f)))}))})(n.localStore,e);O4(n,e,r),D4(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Ku(n,i)}catch(i){await yh(i)}}async function tV(t,e){const r=$t(t);bh(r.remoteStore)||kt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await(function(a){const o=$t(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(l=>o.mutationQueue.getHighestUnacknowledgedBatchId(l)))})(r.localStore);if(n===-1)return void e.resolve();const i=r.ka.get(n)||[];i.push(e),r.ka.set(n,i)}catch(n){const i=Wp(n,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function D4(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function O4(t,e,r){const n=$t(t);let i=n.Ba[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(r?s.reject(r):s.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function Tp(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||CI(t,n)}))}function CI(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Sp(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),M4(t))}function e5(t,e,r){for(const n of r)n instanceof EI?(t.La.addReference(n.key,e),rV(t,n)):n instanceof SI?(kt("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||CI(t,n.key)):Xt()}function rV(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(kt("SyncEngine","New document in limbo: "+r),t.xa.add(n),M4(t))}function M4(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Wt(cn.fromString(e)),n=t.qa.next();t.Na.set(n,new WB(r)),t.Oa=t.Oa.insert(r,n),Mv(t.remoteStore,new Cu(so(Bp(r.path)),n,"TargetPurposeLimboResolution",Fo.oe))}}async function Ku(t,e,r){const n=$t(t),i=[],s=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach(((o,l)=>{a.push(n.Ka(l,e,r).then((c=>{var f;if((c||r)&&n.isPrimaryClient){const d=c?!c.fromCache:(f=r?.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;n.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=E4.Wi(l.targetId,c);s.push(d)}})))})),await Promise.all(a),n.Ca.d_(i),await(async function(l,c){const f=$t(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>We.forEach(c,(m=>We.forEach(m.$i,(p=>f.persistence.referenceDelegate.addReference(d,m.targetId,p))).next((()=>We.forEach(m.Ui,(p=>f.persistence.referenceDelegate.removeReference(d,m.targetId,p)))))))))}catch(d){if(!wh(d))throw d;kt("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const m=d.targetId;if(!d.fromCache){const p=f.os.get(m),_=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(_);f.os=f.os.insert(m,w)}}})(n.localStore,s))}async function nV(t,e){const r=$t(t);if(!r.currentUser.isEqual(e)){kt("SyncEngine","User change. New user:",e.toKey());const n=await lI(r.localStore,e);r.currentUser=e,(function(s,a){s.ka.forEach((o=>{o.forEach((l=>{l.reject(new Et(nt.CANCELLED,a))}))})),s.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ku(r,n.hs)}}function iV(t,e){const r=$t(t),n=r.Na.get(e);if(n&&n.va)return Br().add(n.key);{let i=Br();const s=r.Ma.get(e);if(!s)return i;for(const a of s){const o=r.Fa.get(a);i=i.unionWith(o.view.Va)}return i}}async function sV(t,e){const r=$t(t),n=await V2(r.localStore,e.query,!0),i=e.view.ba(n);return r.isPrimaryClient&&e5(r,e.targetId,i.wa),i}async function aV(t,e){const r=$t(t);return hI(r.localStore,e).then((n=>Ku(r,n)))}async function oV(t,e,r,n){const i=$t(t),s=await(function(o,l){const c=$t(o),f=$t(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",(d=>f.Mn(d,l).next((m=>m?c.localDocuments.getDocuments(d,m):We.resolve(null)))))})(i.localStore,e);s!==null?(r==="pending"?await $p(i.remoteStore):r==="acknowledged"||r==="rejected"?(O4(i,e,n||null),D4(i,e),(function(o,l){$t($t(o).mutationQueue).On(l)})(i.localStore,e)):Xt(),await Ku(i,s)):kt("SyncEngine","Cannot apply mutation batch with id: "+e)}async function lV(t,e){const r=$t(t);if(jv(r),j4(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),i=await iS(r,n.toArray());r.Qa=!0,await J_(r.remoteStore,!0);for(const s of i)Mv(r.remoteStore,s)}else if(e===!1&&r.Qa!==!1){const n=[];let i=Promise.resolve();r.Ma.forEach(((s,a)=>{r.sharedClientState.isLocalQueryTarget(a)?n.push(a):i=i.then((()=>(Tp(r,a),Ep(r.localStore,a,!0)))),Sp(r.remoteStore,a)})),await i,await iS(r,n),(function(a){const o=$t(a);o.Na.forEach(((l,c)=>{Sp(o.remoteStore,c)})),o.La.pr(),o.Na=new Map,o.Oa=new ci(Wt.comparator)})(r),r.Qa=!1,await J_(r.remoteStore,!1)}}async function iS(t,e,r){const n=$t(t),i=[],s=[];for(const a of e){let o;const l=n.Ma.get(a);if(l&&l.length!==0){o=await bp(n.localStore,so(l[0]));for(const c of l){const f=n.Fa.get(c),d=await sV(n,f);d.snapshot&&s.push(d.snapshot)}}else{const c=await fI(n.localStore,a);o=await bp(n.localStore,c),await L4(n,II(c),a,!1,o.resumeToken)}i.push(o)}return n.Ca.d_(s),i}function II(t){return dC(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function cV(t){return(function(r){return $t($t(r).persistence).Qi()})($t(t).localStore)}async function uV(t,e,r,n){const i=$t(t);if(i.Qa)return void kt("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(r){case"current":case"not-current":{const a=await hI(i.localStore,xC(s[0])),o=fg.createSynthesizedRemoteEventForCurrentChange(e,r==="current",zi.EMPTY_BYTE_STRING);await Ku(i,a,o);break}case"rejected":await Ep(i.localStore,e,!0),Tp(i,e,n);break;default:Xt()}}async function fV(t,e,r){const n=jv(t);if(n.Qa){for(const i of e){if(n.Ma.has(i)&&n.sharedClientState.isActiveQueryTarget(i)){kt("SyncEngine","Adding an already active target "+i);continue}const s=await fI(n.localStore,i),a=await bp(n.localStore,s);await L4(n,II(s),a.targetId,!1,a.resumeToken),Mv(n.remoteStore,a)}for(const i of r)n.Ma.has(i)&&await Ep(n.localStore,i,!1).then((()=>{Sp(n.remoteStore,i),Tp(n,i)})).catch(yh)}}function jv(t){const e=$t(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JB.bind(null,e),e.Ca.d_=VB.bind(null,e.eventManager),e.Ca.$a=UB.bind(null,e.eventManager),e}function j4(t){const e=$t(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eV.bind(null,e),e}function hV(t,e,r){const n=$t(t);(async function(s,a,o){try{const l=await a.getMetadata();if(await(function(p,_){const w=$t(p),b=gs(_.createTime);return w.persistence.runTransaction("hasNewerBundle","readonly",(k=>w.Gr.getBundleMetadata(k,_.id))).then((k=>!!k&&k.createTime.compareTo(b)>=0))})(s.localStore,l))return await a.close(),o._completeWith((function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}})(l)),Promise.resolve(new Set);o._updateProgress(bI(l));const c=new $B(l,s.localStore,a.serializer);let f=await a.Ua();for(;f;){const m=await c.la(f);m&&o._updateProgress(m),f=await a.Ua()}const d=await c.complete();return await Ku(s,d.Ia,void 0),await(function(p,_){const w=$t(p);return w.persistence.runTransaction("Save bundle","readwrite",(b=>w.Gr.saveBundleMetadata(b,_)))})(s.localStore,l),o._completeWith(d.progress),Promise.resolve(d.Pa)}catch(l){return ll("SyncEngine",`Loading bundle failed with ${l}`),o._failWith(l),Promise.resolve(new Set)}})(n,e,r).then((i=>{n.sharedClientState.notifyBundleLoaded(i)}))}class oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dg(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return oI(this.persistence,new aI,e.initialUser,this.serializer)}Ga(e){return new w4(Ov.Zr,this.serializer)}Wa(e){return new pI}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oh.provider={build:()=>new oh};class dV extends oh{constructor(e){super(),this.cacheSizeBytes=e}ja(e,r){lr(this.persistence.referenceDelegate instanceof B2);const n=this.persistence.referenceDelegate.garbageCollector;return new tI(n,e.asyncQueue,r)}Ga(e){const r=this.cacheSizeBytes!==void 0?Qa.withCacheSize(this.cacheSizeBytes):Qa.DEFAULT;return new w4((n=>B2.Zr(n,r)),this.serializer)}}class B4 extends oh{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await j4(this.Ja.syncEngine),await $p(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return oI(this.persistence,new aI,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new tI(n,e.asyncQueue,r)}Ha(e,r){const n=new LM(r,this.persistence);return new FM(e.asyncQueue,n)}Ga(e){const r=b4(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Qa.withCacheSize(this.cacheSizeBytes):Qa.DEFAULT;return new _4(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,mI(),h2(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new pI}}class NI extends B4{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof Ew&&(this.sharedClientState.syncEngine={no:oV.bind(null,r),ro:uV.bind(null,r),io:fV.bind(null,r),Qi:cV.bind(null,r),eo:aV.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await lV(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=mI();if(!Ew.D(r))throw new Et(nt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=b4(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ew(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class lh{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>nS(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=nV.bind(null,this.syncEngine),await J_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new BB})()}createDatastore(e){const r=dg(e.databaseInfo.databaseId),n=(function(s){return new bB(s)})(e.databaseInfo);return(function(s,a,o,l){return new kB(s,a,o,l)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,i,s,a,o){return new AB(n,i,s,a,o)})(this.localStore,this.datastore,e.asyncQueue,(r=>nS(this.syncEngine,r,0)),(function(){return Q6.D()?new Q6:new yB})())}createSyncEngine(e,r){return(function(i,s,a,o,l,c,f){const d=new qB(i,s,a,o,l,c);return f&&(d.Qa=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(i){const s=$t(i);kt("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await zp(s),s.k_.shutdown(),s.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}lh.provider={build:()=>new lh};function sS(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ps("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new oa,this.buffer=new Uint8Array,this.eu=(function(){return new TextDecoder("utf-8")})(),this.tu().then((n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n?.aa)}`))}),(n=>this.metadata.reject(n)))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const r=this.eu.decode(e),n=Number(r);isNaN(n)&&this.ru(`length string (${r}) is not valid number`);const i=await this.iu(n);return new zB(JSON.parse(i),e.length+n)}su(){return this.buffer.findIndex((e=>e===123))}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const r=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Et(nt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(i,s){const a=$t(i),o={documents:s.map((d=>Lm(a.serializer,d)))},l=await a.Lo("BatchGetDocuments",a.serializer.databaseId,cn.emptyPath(),o,s.length),c=new Map;l.forEach((d=>{const m=Rj(a.serializer,d);c.set(m.key.toString(),m)}));const f=[];return s.forEach((d=>{const m=c.get(d.toString());lr(!!m),f.push(m)})),f})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Up(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const i=Wt.fromPath(n);this.mutations.push(new u4(i,this.precondition(i)))})),await(async function(n,i){const s=$t(n),a={writes:i.map((o=>Dm(s.serializer,o)))};await s.Mo("Commit",s.serializer.databaseId,cn.emptyPath(),a)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Xt();r=pr.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new Et(nt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(pr.min())?Ii.exists(!1):Ii.updateTime(r):Ii.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(pr.min()))throw new Et(nt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ii.updateTime(r)}return Ii.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,r,n,i,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=i,this.deferred=s,this._u=n.maxAttempts,this.t_=new k4(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new mV(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((i=>{this.lu(i)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!ag(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!PC(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e,r,n,i,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=ra.UNAUTHENTICATED,this.clientId=r4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async a=>{kt("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(n,(a=>(kt("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Wp(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function kw(t,e){t.asyncQueue.verifyOperationInProgress(),kt("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async i=>{n.isEqual(i)||(await lI(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function aS(t,e){t.asyncQueue.verifyOperationInProgress();const r=await V4(t);kt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>J6(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,i)=>J6(e.remoteStore,i))),t._onlineComponents=e}async function V4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){kt("FirestoreClient","Using user provided OfflineComponentProvider");try{await kw(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(i){return i.name==="FirebaseError"?i.code===nt.FAILED_PRECONDITION||i.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(r))throw r;ll("Error using user provided cache. Falling back to memory cache: "+r),await kw(t,new oh)}}else kt("FirestoreClient","Using default OfflineComponentProvider"),await kw(t,new oh);return t._offlineComponents}async function Vv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(kt("FirestoreClient","Using user provided OnlineComponentProvider"),await aS(t,t._uninitializedComponentsProvider._online)):(kt("FirestoreClient","Using default OnlineComponentProvider"),await aS(t,new lh))),t._onlineComponents}function PI(t){return V4(t).then((e=>e.persistence))}function qp(t){return V4(t).then((e=>e.localStore))}function RI(t){return Vv(t).then((e=>e.remoteStore))}function U4(t){return Vv(t).then((e=>e.syncEngine))}function FI(t){return Vv(t).then((e=>e.datastore))}async function Ap(t){const e=await Vv(t),r=e.eventManager;return r.onListen=GB.bind(null,e.syncEngine),r.onUnlisten=XB.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=KB.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=YB.bind(null,e.syncEngine),r}function vV(t){return t.asyncQueue.enqueue((async()=>{const e=await PI(t),r=await RI(t);return e.setNetworkEnabled(!0),(function(i){const s=$t(i);return s.L_.delete(0),pg(s)})(r)}))}function yV(t){return t.asyncQueue.enqueue((async()=>{const e=await PI(t),r=await RI(t);return e.setNetworkEnabled(!1),(async function(i){const s=$t(i);s.L_.add(0),await zp(s),s.q_.set("Offline")})(r)}))}function wV(t,e){const r=new oa;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,s,a){try{const o=await(function(c,f){const d=$t(c);return d.persistence.runTransaction("read document","readonly",(m=>d.localDocuments.getDocument(m,f)))})(i,s);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new Et(nt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const l=Wp(o,`Failed to get document '${s} from cache`);a.reject(l)}})(await qp(t),e,r))),r.promise}function LI(t,e,r={}){const n=new oa;return t.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,l,c){const f=new Bv({next:m=>{f.Za(),a.enqueueAndForget((()=>P4(s,d)));const p=m.docs.has(o);!p&&m.fromCache?c.reject(new Et(nt.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?c.reject(new Et(nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new F4(Bp(o.path),f,{includeMetadataChanges:!0,_a:!0});return N4(s,d)})(await Ap(t),t.asyncQueue,e,r,n))),n.promise}function _V(t,e){const r=new oa;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,s,a){try{const o=await V2(i,s,!0),l=new kI(s,o.Ts),c=l.ma(o.documents),f=l.applyChanges(c,!1);a.resolve(f.snapshot)}catch(o){const l=Wp(o,`Failed to execute query '${s} against cache`);a.reject(l)}})(await qp(t),e,r))),r.promise}function DI(t,e,r={}){const n=new oa;return t.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,l,c){const f=new Bv({next:m=>{f.Za(),a.enqueueAndForget((()=>P4(s,d))),m.fromCache&&l.source==="server"?c.reject(new Et(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new F4(o,f,{includeMetadataChanges:!0,_a:!0});return N4(s,d)})(await Ap(t),t.asyncQueue,e,r,n))),n.promise}function bV(t,e,r){const n=new oa;return t.asyncQueue.enqueueAndForget((async()=>{try{const i=await FI(t);n.resolve((async function(a,o,l){var c;const f=$t(a),{request:d,ut:m,parent:p}=$C(f.serializer,pC(o),l);f.connection.Fo||delete d.parent;const _=(await f.Lo("RunAggregationQuery",f.serializer.databaseId,p,d,1)).filter((b=>!!b.result));lr(_.length===1);const w=(c=_[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(w).reduce(((b,k)=>(b[m[k]]=w[k],b)),{})})(i,e,r))}catch(i){n.reject(i)}})),n.promise}function EV(t,e){const r=new Bv(e);return t.asyncQueue.enqueueAndForget((async()=>(function(i,s){$t(i).Y_.add(s),s.next()})(await Ap(t),r))),()=>{r.Za(),t.asyncQueue.enqueueAndForget((async()=>(function(i,s){$t(i).Y_.delete(s)})(await Ap(t),r)))}}function SV(t,e,r,n){const i=(function(a,o){let l;return l=typeof a=="string"?FC().encode(a):a,(function(f,d){return new pV(f,d)})((function(f,d){if(f instanceof Uint8Array)return sS(f,d);if(f instanceof ArrayBuffer)return sS(new Uint8Array(f),d);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(l),o)})(r,dg(e));t.asyncQueue.enqueueAndForget((async()=>{hV(await U4(t),i,n)}))}function kV(t,e){return t.asyncQueue.enqueue((async()=>(function(n,i){const s=$t(n);return s.persistence.runTransaction("Get named query","readonly",(a=>s.Gr.getNamedQuery(a,i)))})(await qp(t),e)))}function TV(t,e){return t.asyncQueue.enqueue((async()=>(async function(n,i){const s=$t(n),a=s.indexManager,o=[];return s.persistence.runTransaction("Configure indexes","readwrite",(l=>a.getFieldIndexes(l).next((c=>(function(d,m,p,_,w){d=[...d],m=[...m],d.sort(p),m.sort(p);const b=d.length,k=m.length;let F=0,N=0;for(;F<k&&N<b;){const B=p(d[N],m[F]);B<0?w(d[N++]):B>0?_(m[F++]):(F++,N++)}for(;F<k;)_(m[F++]);for(;N<b;)w(d[N++])})(c,i,IM,(f=>{o.push(a.addFieldIndex(l,f))}),(f=>{o.push(a.deleteFieldIndex(l,f))})))).next((()=>We.waitFor(o)))))})(await qp(t),e)))}function AV(t,e){return t.asyncQueue.enqueue((async()=>(function(n,i){$t(n).ss.zi=i})(await qp(t),e)))}function CV(t){return t.asyncQueue.enqueue((async()=>(function(r){const n=$t(r),i=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",(s=>i.deleteAllFieldIndexes(s)))})(await qp(t))))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(t,e,r){if(!r)throw new Et(nt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MI(t,e,r,n){if(e===!0&&n===!0)throw new Et(nt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function lS(t){if(!Wt.isDocumentKey(t))throw new Et(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function cS(t){if(Wt.isDocumentKey(t))throw new Et(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Uv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Xt()}function tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Et(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Uv(t);throw new Et(nt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function jI(t,e){if(e<=0)throw new Et(nt.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Et(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Et(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OI((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Et(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Et(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Et(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mg{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uS({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Et(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Et(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uS(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new U8;switch(n.type){case"firstParty":return new SM(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Et(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=oS.get(r);n&&(kt("ComponentProvider","Removing Datastore"),oS.delete(r),n.terminate())})(this),Promise.resolve()}}function BI(t,e,r,n={}){var i;const s=(t=tn(t,mg))._getSettings(),a=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&ll("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=ra.MOCK_USER;else{o=T8(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new Et(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ra(c)}t._authCredentials=new _M(new V8(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new la(this.firestore,e,this._query)}}class Qi{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qi(this.firestore,e,this._key)}}class oc extends la{constructor(e,r,n){super(e,r,Bp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qi(this.firestore,null,new Wt(e))}withConverter(e){return new oc(this.firestore,e,this._path)}}function vr(t,e,...r){if(t=mn(t),z4("collection","path",e),t instanceof mg){const n=cn.fromString(e,...r);return cS(n),new oc(t,null,n)}{if(!(t instanceof Qi||t instanceof oc))throw new Et(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(cn.fromString(e,...r));return cS(n),new oc(t.firestore,null,n)}}function IV(t,e){if(t=tn(t,mg),z4("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Et(nt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new la(t,null,(function(n){return new Wu(cn.emptyPath(),n)})(e))}function kr(t,e,...r){if(t=mn(t),arguments.length===1&&(e=r4.newId()),z4("doc","path",e),t instanceof mg){const n=cn.fromString(e,...r);return lS(n),new Qi(t,null,new Wt(n))}{if(!(t instanceof Qi||t instanceof oc))throw new Et(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(cn.fromString(e,...r));return lS(n),new Qi(t.firestore,t instanceof oc?t.converter:null,new Wt(n))}}function NV(t,e){return t=mn(t),e=mn(e),(t instanceof Qi||t instanceof oc)&&(e instanceof Qi||e instanceof oc)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function $4(t,e){return t=mn(t),e=mn(e),t instanceof la&&e instanceof la&&t.firestore===e.firestore&&lg(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new k4(this,"async_queue_retry"),this.Vu=()=>{const n=h2();n&&kt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=h2();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=h2();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new oa;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!wh(e))throw e;kt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const i=(function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o})(n);throw ps("INTERNAL UNHANDLED ERROR: ",i),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const i=I4.createAndSchedule(this,e,r,n,(s=>this.yu(s)));return this.Tu.push(i),i}fu(){this.Eu&&Xt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function t5(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1})(t,["next","error","complete"])}class VI{constructor(){this._progressObserver={},this._taskCompletionResolver=new oa,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV=-1;class Qn extends mg{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new fS,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fS(e),this._firestoreClient=void 0,await e}}}function RV(t,e,r){r||(r="(default)");const n=Mp(t,"firestore");if(n.isInitialized(r)){const i=n.getImmediate({identifier:r}),s=n.getOptions(r);if(Zf(s,e))return i;throw new Et(nt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Et(nt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Et(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function UI(t,e){const r=typeof t=="object"?t:e4(),n=typeof t=="string"?t:e||"(default)",i=Mp(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=E8("firestore");s&&BI(i,...s)}return i}function Pi(t){if(t._terminated)throw new Et(nt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zI(t),t._firestoreClient}function zI(t){var e,r,n;const i=t._freezeSettings(),s=(function(o,l,c,f){return new rj(o,l,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,OI(f.experimentalLongPollingOptions),f.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new xV(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(t._componentsProvider))}function FV(t,e){ll("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return $I(t,lh.provider,{build:n=>new B4(n,r.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function LV(t){ll("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();$I(t,lh.provider,{build:r=>new NI(r,e.cacheSizeBytes)})}function $I(t,e,r){if((t=tn(t,Qn))._firestoreClient||t._terminated)throw new Et(nt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Et(nt.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},zI(t)}function DV(t){if(t._initialized&&!t._terminated)throw new Et(nt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new oa;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(n){if(!Wc.D())return Promise.resolve();const i=n+"main";await Wc.delete(i)})(b4(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}})),e.promise}function OV(t){return(function(r){const n=new oa;return r.asyncQueue.enqueueAndForget((async()=>tV(await U4(r),n))),n.promise})(Pi(t=tn(t,Qn)))}function MV(t){return vV(Pi(t=tn(t,Qn)))}function jV(t){return yV(Pi(t=tn(t,Qn)))}function BV(t){return oM(t.app,"firestore",t._databaseId.database),t._delete()}function VV(t,e){const r=Pi(t=tn(t,Qn)),n=new VI;return SV(r,t._databaseId,e,n),n}function UV(t,e){return kV(Pi(t=tn(t,Qn)),e).then((r=>r?new la(t,null,r.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class HI{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ch(zi.fromBase64String(e))}catch(r){throw new Et(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ch(zi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Et(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function zV(){return new Eh("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Et(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Et(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lr(this._lat,e._lat)||Lr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=/^__.*__$/;class HV{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Gu(e,this.data,this.fieldMask,r,this.fieldTransforms):new Vp(e,this.data,r,this.fieldTransforms)}}class WI{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Gu(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function qI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xt()}}class $v{constructor(e,r,n,i,s,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new $v(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return H2(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(qI(this.Cu)&&$V.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class WV{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||dg(e)}Qu(e,r,n,i=!1){return new $v({Cu:e,methodName:r,qu:n,path:pi.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wd(t){const e=t._freezeSettings(),r=dg(t._databaseId);return new WV(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Hv(t,e,r,n,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,r,i);Y4("Data must be an object, but it was:",a,n);const o=XI(n,a);let l,c;if(s.merge)l=new Lo(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const d of s.mergeFields){const m=Om(e,d,r);if(!a.contains(m))throw new Et(nt.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);QI(f,m)||f.push(m)}l=new Lo(f),c=a.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,c=a.fieldTransforms;return new HV(new Sa(o),l,c)}class xg extends Sh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xg}}function GI(t,e,r){return new $v({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class H4 extends Sh{_toFieldTransform(e){return new ug(e.path,new yp)}isEqual(e){return e instanceof H4}}class W4 extends Sh{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=GI(this,e,!0),n=this.Ku.map((s=>qd(s,r))),i=new Ed(n);return new ug(e.path,i)}isEqual(e){return e instanceof W4&&Zf(this.Ku,e.Ku)}}class q4 extends Sh{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=GI(this,e,!0),n=this.Ku.map((s=>qd(s,r))),i=new Sd(n);return new ug(e.path,i)}isEqual(e){return e instanceof q4&&Zf(this.Ku,e.Ku)}}class G4 extends Sh{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new wp(e.serializer,EC(e.serializer,this.$u));return new ug(e.path,r)}isEqual(e){return e instanceof G4&&this.$u===e.$u}}function K4(t,e,r,n){const i=t.Qu(1,e,r);Y4("Data must be an object, but it was:",i,n);const s=[],a=Sa.empty();_h(n,((l,c)=>{const f=Wv(e,l,r);c=mn(c);const d=i.Nu(f);if(c instanceof xg)s.push(f);else{const m=qd(c,d);m!=null&&(s.push(f),a.set(f,m))}}));const o=new Lo(s);return new WI(a,o,i.fieldTransforms)}function X4(t,e,r,n,i,s){const a=t.Qu(1,e,r),o=[Om(e,n,r)],l=[i];if(s.length%2!=0)throw new Et(nt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)o.push(Om(e,s[m])),l.push(s[m+1]);const c=[],f=Sa.empty();for(let m=o.length-1;m>=0;--m)if(!QI(c,o[m])){const p=o[m];let _=l[m];_=mn(_);const w=a.Nu(p);if(_ instanceof xg)c.push(p);else{const b=qd(_,w);b!=null&&(c.push(p),f.set(p,b))}}const d=new Lo(c);return new WI(f,d,a.fieldTransforms)}function KI(t,e,r,n=!1){return qd(r,t.Qu(n?4:3,e))}function qd(t,e){if(YI(t=mn(t)))return Y4("Unsupported field value:",e,t),XI(t,e);if(t instanceof Sh)return(function(n,i){if(!qI(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,i){const s=[];let a=0;for(const o of n){let l=qd(o,i.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}})(t,e)}return(function(n,i){if((n=mn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return EC(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Ni.fromDate(n);return{timestampValue:_p(i.serializer,s)}}if(n instanceof Ni){const s=new Ni(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:_p(i.serializer,s)}}if(n instanceof zv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ch)return{bytesValue:OC(i.serializer,n._byteString)};if(n instanceof Qi){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:m4(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof gg)return(function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map((l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return c4(o.serializer,l)}))}}}}}})(n,i);throw i.Bu(`Unsupported field value: ${Uv(n)}`)})(t,e)}function XI(t,e){const r={};return tC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_h(t,((n,i)=>{const s=qd(i,e.Mu(n));s!=null&&(r[n]=s)})),{mapValue:{fields:r}}}function YI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ni||t instanceof zv||t instanceof ch||t instanceof Qi||t instanceof Sh||t instanceof gg)}function Y4(t,e,r){if(!YI(r)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(r)){const n=Uv(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Om(t,e,r){if((e=mn(e))instanceof Eh)return e._internalPath;if(typeof e=="string")return Wv(t,e);throw H2("Field path arguments must be of type string or ",t,!1,void 0,r)}const qV=new RegExp("[~\\*/\\[\\]]");function Wv(t,e,r){if(e.search(qV)>=0)throw H2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Eh(...e.split("."))._internalPath}catch{throw H2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function H2(t,e,r,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${n}`),a&&(l+=` in document ${i}`),l+=")"),new Et(nt.INVALID_ARGUMENT,o+t+l)}function QI(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,r,n,i,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(qv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class GV extends Mm{data(){return super.data()}}function qv(t,e){return typeof e=="string"?Wv(t,e):e instanceof Eh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Et(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Q4{}class Gp extends Q4{}function $r(t,e,...r){let n=[];e instanceof Q4&&n.push(e),n=n.concat(r),(function(s){const a=s.filter((l=>l instanceof Gd)).length,o=s.filter((l=>l instanceof Kp)).length;if(a>1||a>0&&o>0)throw new Et(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)t=i._apply(t);return t}class Kp extends Gp{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Kp(e,r,n)}_apply(e){const r=this._parse(e);return eN(e._query,r),new la(e.firestore,e.converter,$_(e._query,r))}_parse(e){const r=Wd(e.firestore);return(function(s,a,o,l,c,f,d){let m;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Et(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){dS(d,f);const p=[];for(const _ of d)p.push(hS(l,s,_));m={arrayValue:{values:p}}}else m=hS(l,s,d)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||dS(d,f),m=KI(o,a,d,f==="in"||f==="not-in");return un.create(c,f,m)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Xr(t,e,r){const n=e,i=qv("where",t);return Kp._create(i,n,r)}class Gd extends Q4{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Gd(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:$n.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)eN(a,l),a=$_(a,l)})(e._query,r),new la(e.firestore,e.converter,$_(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function KV(...t){return t.forEach((e=>tN("or",e))),Gd._create("or",t)}function XV(...t){return t.forEach((e=>tN("and",e))),Gd._create("and",t)}class Gv extends Gp{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Gv(e,r)}_apply(e){const r=(function(i,s,a){if(i.startAt!==null)throw new Et(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Et(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fm(s,a)})(e._query,this._field,this._direction);return new la(e.firestore,e.converter,(function(i,s){const a=i.explicitOrderBy.concat([s]);return new Wu(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,r))}}function uc(t,e="asc"){const r=e,n=qv("orderBy",t);return Gv._create(n,r)}class vg extends Gp{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new vg(e,r,n)}_apply(e){return new la(e.firestore,e.converter,L2(e._query,this._limit,this._limitType))}}function yg(t){return jI("limit",t),vg._create("limit",t,"F")}function YV(t){return jI("limitToLast",t),vg._create("limitToLast",t,"L")}class wg extends Gp{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new wg(e,r,n)}_apply(e){const r=ZI(e,this.type,this._docOrFields,this._inclusive);return new la(e.firestore,e.converter,(function(i,s){return new Wu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)})(e._query,r))}}function QV(...t){return wg._create("startAt",t,!0)}function JV(...t){return wg._create("startAfter",t,!1)}class _g extends Gp{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new _g(e,r,n)}_apply(e){const r=ZI(e,this.type,this._docOrFields,this._inclusive);return new la(e.firestore,e.converter,(function(i,s){return new Wu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)})(e._query,r))}}function ZV(...t){return _g._create("endBefore",t,!1)}function eU(...t){return _g._create("endAt",t,!0)}function ZI(t,e,r,n){if(r[0]=mn(r[0]),r[0]instanceof Mm)return(function(s,a,o,l,c){if(!l)throw new Et(nt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const f=[];for(const d of Y0(s))if(d.field.isKeyField())f.push(_d(a,l.key));else{const m=l.data.field(d.field);if(Cv(m))throw new Et(nt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const p=d.field.canonicalString();throw new Et(nt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}f.push(m)}return new sh(f,c)})(t._query,t.firestore._databaseId,e,r[0]._document,n);{const i=Wd(t.firestore);return(function(a,o,l,c,f,d){const m=a.explicitOrderBy;if(f.length>m.length)throw new Et(nt.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let _=0;_<f.length;_++){const w=f[_];if(m[_].field.isKeyField()){if(typeof w!="string")throw new Et(nt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof w}`);if(!o4(a)&&w.indexOf("/")!==-1)throw new Et(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${w}' contains a slash.`);const b=a.path.child(cn.fromString(w));if(!Wt.isDocumentKey(b))throw new Et(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const k=new Wt(b);p.push(_d(o,k))}else{const b=KI(l,c,w);p.push(b)}}return new sh(p,d)})(t._query,t.firestore._databaseId,i,e,r,n)}}function hS(t,e,r){if(typeof(r=mn(r))=="string"){if(r==="")throw new Et(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!o4(e)&&r.indexOf("/")!==-1)throw new Et(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(cn.fromString(r));if(!Wt.isDocumentKey(n))throw new Et(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return _d(t,new Wt(n))}if(r instanceof Qi)return _d(t,r._key);throw new Et(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uv(r)}.`)}function dS(t,e){if(!Array.isArray(t)||t.length===0)throw new Et(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eN(t,e){const r=(function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new Et(nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Et(nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function tN(t,e){if(!(e instanceof Kp||e instanceof Gd))throw new Et(nt.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class J4{convertValue(e,r="none"){switch(nh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ci(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Uu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Xt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return _h(e,((i,s)=>{n[i]=this.convertValue(s,r)})),n}convertVectorValue(e){var r,n,i;const s=(i=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map((a=>Ci(a.doubleValue)));return new gg(s)}convertGeoPoint(e){return new zv(Ci(e.latitude),Ci(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Iv(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Nm(e));default:return null}}convertTimestamp(e){const r=Vu(e);return new Ni(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=cn.fromString(e);lr(GC(n));const i=new rh(n.get(1),n.get(3)),s=new Wt(n.popFirst(5));return i.isEqual(r)||ps(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class tU extends J4{constructor(e){super(),this.firestore=e}convertBytes(e){return new ch(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Qi(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rU(t){return new Cp("sum",Om("sum",t))}function nU(t){return new Cp("avg",Om("average",t))}function rN(){return new Cp("count")}function iU(t,e){var r,n;return t instanceof Cp&&e instanceof Cp&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())===((n=e._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())}function sU(t,e){return $4(t.query,e.query)&&Zf(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cd extends Mm{constructor(e,r,n,i,s,a){super(e,r,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new cm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(qv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class cm extends Cd{data(e={}){return super.data(e)}}class Id{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Hf(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new cm(this._firestore,this._userDataWriter,n.key,n,new Hf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Et(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((o=>{const l=new cm(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Hf(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>s||o.type!==3)).map((o=>{const l=new cm(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Hf(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),f=a.indexOf(o.doc.key)),{type:aU(o.type),doc:l,oldIndex:c,newIndex:f}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function aU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xt()}}function oU(t,e){return t instanceof Cd&&e instanceof Cd?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Id&&e instanceof Id&&t._firestore===e._firestore&&$4(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(t){t=tn(t,Qi);const e=tn(t.firestore,Qn);return LI(Pi(e),t._key).then((r=>Z4(e,t,r)))}class kh extends J4{constructor(e){super(),this.firestore=e}convertBytes(e){return new ch(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Qi(this.firestore,null,r)}}function lU(t){t=tn(t,Qi);const e=tn(t.firestore,Qn),r=Pi(e),n=new kh(e);return wV(r,t._key).then((i=>new Cd(e,n,t._key,i,new Hf(i!==null&&i.hasLocalMutations,!0),t.converter)))}function cU(t){t=tn(t,Qi);const e=tn(t.firestore,Qn);return LI(Pi(e),t._key,{source:"server"}).then((r=>Z4(e,t,r)))}function li(t){t=tn(t,la);const e=tn(t.firestore,Qn),r=Pi(e),n=new kh(e);return JI(t._query),DI(r,t._query).then((i=>new Id(e,n,t,i)))}function uU(t){t=tn(t,la);const e=tn(t.firestore,Qn),r=Pi(e),n=new kh(e);return _V(r,t._query).then((i=>new Id(e,n,t,i)))}function fU(t){t=tn(t,la);const e=tn(t.firestore,Qn),r=Pi(e),n=new kh(e);return DI(r,t._query,{source:"server"}).then((i=>new Id(e,n,t,i)))}function Ip(t,e,r){t=tn(t,Qi);const n=tn(t.firestore,Qn),i=Kv(t.converter,e,r);return Yp(n,[Hv(Wd(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Ii.none())])}function Ja(t,e,r,...n){t=tn(t,Qi);const i=tn(t.firestore,Qn),s=Wd(i);let a;return a=typeof(e=mn(e))=="string"||e instanceof Eh?X4(s,"updateDoc",t._key,e,r,n):K4(s,"updateDoc",t._key,e),Yp(i,[a.toMutation(t._key,Ii.exists(!0))])}function Pl(t){return Yp(tn(t.firestore,Qn),[new Up(t._key,Ii.none())])}function Xp(t,e){const r=tn(t.firestore,Qn),n=kr(t),i=Kv(t.converter,e);return Yp(r,[Hv(Wd(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Ii.exists(!1))]).then((()=>n))}function Ai(t,...e){var r,n,i;t=mn(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||t5(e[a])||(s=e[a],a++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(t5(e[a])){const d=e[a];e[a]=(r=d.next)===null||r===void 0?void 0:r.bind(d),e[a+1]=(n=d.error)===null||n===void 0?void 0:n.bind(d),e[a+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,f;if(t instanceof Qi)c=tn(t.firestore,Qn),f=Bp(t._key.path),l={next:d=>{e[a]&&e[a](Z4(c,t,d))},error:e[a+1],complete:e[a+2]};else{const d=tn(t,la);c=tn(d.firestore,Qn),f=d._query;const m=new kh(c);l={next:p=>{e[a]&&e[a](new Id(c,m,d,p))},error:e[a+1],complete:e[a+2]},JI(t._query)}return(function(m,p,_,w){const b=new Bv(w),k=new F4(p,b,_);return m.asyncQueue.enqueueAndForget((async()=>N4(await Ap(m),k))),()=>{b.Za(),m.asyncQueue.enqueueAndForget((async()=>P4(await Ap(m),k)))}})(Pi(c),f,o,l)}function hU(t,e){return EV(Pi(t=tn(t,Qn)),t5(e)?e:{next:e})}function Yp(t,e){return(function(n,i){const s=new oa;return n.asyncQueue.enqueueAndForget((async()=>QB(await U4(n),i,s))),s.promise})(Pi(t),e)}function Z4(t,e,r){const n=r.docs.get(e._key),i=new kh(t);return new Cd(t,i,e._key,n,new Hf(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(t){return nN(t,{count:rN()})}function nN(t,e){const r=tn(t.firestore,Qn),n=Pi(r),i=eC(e,((s,a)=>new NC(a,s.aggregateType,s._internalFieldPath)));return bV(n,t._query,i).then((s=>(function(o,l,c){const f=new kh(o);return new HI(l,f,c)})(r,t,s)))}class pU{constructor(e){this.kind="memory",this._onlineComponentProvider=lh.provider,e?.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=oh.provider}toJSON(){return{kind:this.kind}}}class mU{constructor(e){let r;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=iN(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class gU{constructor(){this.kind="memoryEager",this._offlineComponentProvider=oh.provider}toJSON(){return{kind:this.kind}}}class xU{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new dV(e)}}toJSON(){return{kind:this.kind}}}function vU(){return new gU}function yU(t){return new xU(t?.cacheSizeBytes)}function wU(t){return new pU(t)}function _U(t){return new mU(t)}class bU{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=lh.provider,this._offlineComponentProvider={build:r=>new B4(r,e?.cacheSizeBytes,this.forceOwnership)}}}class EU{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=lh.provider,this._offlineComponentProvider={build:r=>new NI(r,e?.cacheSizeBytes)}}}function iN(t){return new bU(t?.forceOwnership)}function SU(){return new EU}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Wd(e)}set(e,r,n){this._verifyNotCommitted();const i=Of(e,this._firestore),s=Kv(i.converter,r,n),a=Hv(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,n);return this._mutations.push(a.toMutation(i._key,Ii.none())),this}update(e,r,n,...i){this._verifyNotCommitted();const s=Of(e,this._firestore);let a;return a=typeof(r=mn(r))=="string"||r instanceof Eh?X4(this._dataReader,"WriteBatch.update",s._key,r,n,i):K4(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(a.toMutation(s._key,Ii.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Of(e,this._firestore);return this._mutations=this._mutations.concat(new Up(r._key,Ii.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Et(nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Of(t,e){if((t=mn(t)).firestore!==e)throw new Et(nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Wd(r)}get(r){const n=Of(r,this._firestore),i=new tU(this._firestore);return this._transaction.lookup([n._key]).then((s=>{if(!s||s.length!==1)return Xt();const a=s[0];if(a.isFoundDocument())return new Mm(this._firestore,i,a.key,a,n.converter);if(a.isNoDocument())return new Mm(this._firestore,i,n._key,null,n.converter);throw Xt()}))}set(r,n,i){const s=Of(r,this._firestore),a=Kv(s.converter,n,i),o=Hv(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,i);return this._transaction.set(s._key,o),this}update(r,n,i,...s){const a=Of(r,this._firestore);let o;return o=typeof(n=mn(n))=="string"||n instanceof Eh?X4(this._dataReader,"Transaction.update",a._key,n,i,s):K4(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,o),this}delete(r){const n=Of(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Of(e,this._firestore),n=new kh(this._firestore);return super.get(e).then((i=>new Cd(this._firestore,n,r._key,i._document,new Hf(!1,!1),r.converter)))}}function TU(t,e,r){t=tn(t,Qn);const n=Object.assign(Object.assign({},kU),r);return(function(s){if(s.maxAttempts<1)throw new Et(nt.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(s,a,o){const l=new oa;return s.asyncQueue.enqueueAndForget((async()=>{const c=await FI(s);new gV(s.asyncQueue,c,o,a,l).au()})),l.promise})(Pi(t),(i=>e(new aN(t,i))),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(){return new xg("deleteField")}function Jc(){return new H4("serverTimestamp")}function CU(...t){return new W4("arrayUnion",t)}function IU(...t){return new q4("arrayRemove",t)}function oN(t){return new G4("increment",t)}function NU(t){return new gg(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t){return Pi(t=tn(t,Qn)),new sN(t,(e=>Yp(t,e)))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(t,e){const r=Pi(t=tn(t,Qn));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return ll("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=(function(s){const a=typeof s=="string"?(function(c){try{return JSON.parse(c)}catch(f){throw new Et(nt.INVALID_ARGUMENT,"Failed to parse JSON: "+f?.message)}})(s):s,o=[];if(Array.isArray(a.indexes))for(const l of a.indexes){const c=pS(l,"collectionGroup"),f=[];if(Array.isArray(l.fields))for(const d of l.fields){const m=Wv("setIndexConfiguration",pS(d,"fieldPath"));d.arrayConfig==="CONTAINS"?f.push(new hd(m,2)):d.order==="ASCENDING"?f.push(new hd(m,0)):d.order==="DESCENDING"&&f.push(new hd(m,1))}o.push(new mp(mp.UNKNOWN_ID,c,f,gp.empty()))}return o})(e);return TV(r,n)}function pS(t,e){if(typeof t[e]!="string")throw new Et(nt.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function RU(t){var e;t=tn(t,Qn);const r=mS.get(t);if(r)return r;if(((e=Pi(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const n=new lN(t);return mS.set(t,n),n}function FU(t){cN(t,!0)}function LU(t){cN(t,!1)}function DU(t){CV(Pi(t._firestore)).then((e=>kt("deleting all persistent cache indexes succeeded"))).catch((e=>ll("deleting all persistent cache indexes failed",e)))}function cN(t,e){AV(Pi(t._firestore),e).then((r=>kt(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((r=>ll(`setting persistent cache index auto creation isEnabled=${e} failed`,r)))}const mS=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(t){var e;const r=(e=Pi(tn(t.firestore,Qn))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return r===void 0?null:Fv(r,so(t._query))._t}function MU(t,e){var r;const n=eC(e,((s,a)=>new NC(a,s.aggregateType,s._internalFieldPath))),i=(r=Pi(tn(t.firestore,Qn))._onlineComponents)===null||r===void 0?void 0:r.datastore.serializer;return i===void 0?null:$C(i,pC(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return tb.instance.onExistenceFilterMismatch(e)}}class tb{constructor(){this.Uu=new Map}static get instance(){return Ix||(Ix=new tb,(function(r){if(D2)throw new Error("a TestingHooksSpi instance is already set");D2=r})(Ix)),Ix}et(e){this.Uu.forEach((r=>r(e)))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Uu;return n.set(r,e),()=>n.delete(r)}}let Ix=null;(function(e,r=!0){(function(i){jp=i})(Hd),wd(new eh("firestore",((n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),o=new Qn(new bM(n.getProvider("auth-internal")),new kM(n.getProvider("app-check-internal")),(function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Et(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rh(c.options.projectId,f)})(a,i),a);return s=Object.assign({useFetchStreams:r},s),o._setSettings(s),o}),"PUBLIC").setMultipleInstances(!0)),Hc(i6,"4.7.3",e),Hc(i6,"4.7.3","esm2017")})();const uN=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:J4,AggregateField:Cp,AggregateQuerySnapshot:HI,Bytes:ch,CACHE_SIZE_UNLIMITED:PV,CollectionReference:oc,DocumentReference:Qi,DocumentSnapshot:Cd,FieldPath:Eh,FieldValue:Sh,Firestore:Qn,FirestoreError:Et,GeoPoint:zv,LoadBundleTask:VI,PersistentCacheIndexManager:lN,Query:la,QueryCompositeFilterConstraint:Gd,QueryConstraint:Gp,QueryDocumentSnapshot:cm,QueryEndAtConstraint:_g,QueryFieldFilterConstraint:Kp,QueryLimitConstraint:vg,QueryOrderByConstraint:Gv,QuerySnapshot:Id,QueryStartAtConstraint:wg,SnapshotMetadata:Hf,Timestamp:Ni,Transaction:aN,VectorValue:gg,WriteBatch:sN,_AutoId:r4,_ByteString:zi,_DatabaseId:rh,_DocumentKey:Wt,_EmptyAppCheckTokenProvider:TM,_EmptyAuthCredentialsProvider:U8,_FieldPath:pi,_TestingHooks:jU,_cast:tn,_debugAssert:wM,_internalAggregationQueryToProtoRunAggregationQueryRequest:MU,_internalQueryToProtoQueryTarget:OU,_isBase64Available:ej,_logWarn:ll,_validateIsNotUsedTogether:MI,addDoc:Xp,aggregateFieldEqual:iU,aggregateQuerySnapshotEqual:sU,and:XV,arrayRemove:IU,arrayUnion:CU,average:nU,clearIndexedDbPersistence:DV,collection:vr,collectionGroup:IV,connectFirestoreEmulator:BI,count:rN,deleteAllPersistentCacheIndexes:DU,deleteDoc:Pl,deleteField:AU,disableNetwork:jV,disablePersistentCacheIndexAutoCreation:LU,doc:kr,documentId:zV,enableIndexedDbPersistence:FV,enableMultiTabIndexedDbPersistence:LV,enableNetwork:MV,enablePersistentCacheIndexAutoCreation:FU,endAt:eU,endBefore:ZV,ensureFirestoreConfigured:Pi,executeWrite:Yp,getAggregateFromServer:nN,getCountFromServer:dU,getDoc:Ta,getDocFromCache:lU,getDocFromServer:cU,getDocs:li,getDocsFromCache:uU,getDocsFromServer:fU,getFirestore:UI,getPersistentCacheIndexManager:RU,increment:oN,initializeFirestore:RV,limit:yg,limitToLast:YV,loadBundle:VV,memoryEagerGarbageCollector:vU,memoryLocalCache:wU,memoryLruGarbageCollector:yU,namedQuery:UV,onSnapshot:Ai,onSnapshotsInSync:hU,or:KV,orderBy:uc,persistentLocalCache:_U,persistentMultipleTabManager:SU,persistentSingleTabManager:iN,query:$r,queryEqual:$4,refEqual:NV,runTransaction:TU,serverTimestamp:Jc,setDoc:Ip,setIndexConfiguration:PU,setLogLevel:yM,snapshotEqual:oU,startAfter:JV,startAt:QV,sum:rU,terminate:BV,updateDoc:Ja,vector:NU,waitForPendingWrites:OV,where:Xr,writeBatch:eb},Symbol.toStringTag,{value:"Module"}));var BU="firebase",VU="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hc(BU,VU,"app");function rb(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function fN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UU=fN,hN=new ig("auth","Firebase",fN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=new J5("@firebase/auth");function zU(t,...e){W2.logLevel<=ln.WARN&&W2.warn(`Auth (${Hd}): ${t}`,...e)}function d2(t,...e){W2.logLevel<=ln.ERROR&&W2.error(`Auth (${Hd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t,...e){throw nb(t,...e)}function Gc(t,...e){return nb(t,...e)}function dN(t,e,r){const n=Object.assign(Object.assign({},UU()),{[e]:r});return new ig("auth","Firebase",n).create(e,{appName:t.name})}function Du(t){return dN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nb(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return hN.create(t,...e)}function Pr(t,e,...r){if(!t)throw nb(e,...r)}function Iu(t){const e="INTERNAL ASSERTION FAILED: "+t;throw d2(e),new Error(e)}function zu(t,e){t||Iu(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function $U(){return gS()==="http:"||gS()==="https:"}function gS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($U()||eO()||"connection"in navigator)?navigator.onLine:!0}function WU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,r){this.shortDelay=e,this.longDelay=r,zu(r>e,"Short delay should be less than long delay!"),this.isMobile=QD()||tO()}get(){return HU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t,e){zu(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Iu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Iu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Iu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU=new bg(3e4,6e4);function Xu(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function nu(t,e,r,n,i={}){return mN(t,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const o=sg(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return ZD()||(c.referrerPolicy="no-referrer"),pN.fetch()(gN(t,t.config.apiHost,r,o),c)})}async function mN(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},qU),e);try{const i=new XU(t),s=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Nx(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nx(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Nx(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Nx(t,"user-disabled",a);const f=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw dN(t,f,c);fc(t,f)}}catch(i){if(i instanceof ru)throw i;fc(t,"network-request-failed",{message:String(i)})}}async function Eg(t,e,r,n,i={}){const s=await nu(t,e,r,n,i);return"mfaPendingCredential"in s&&fc(t,"multi-factor-auth-required",{_serverResponse:s}),s}function gN(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?ib(t.config,i):`${t.config.apiScheme}://${i}`}function KU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Gc(this.auth,"network-request-failed")),GU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nx(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Gc(t,e,n);return i.customData._tokenResponse=r,i}function xS(t){return t!==void 0&&t.enterprise!==void 0}class YU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return KU(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function QU(t,e){return nu(t,"GET","/v2/recaptchaConfig",Xu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JU(t,e){return nu(t,"POST","/v1/accounts:delete",e)}async function xN(t,e){return nu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZU(t,e=!1){const r=mn(t),n=await r.getIdToken(e),i=sb(n);Pr(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:n,authTime:um(Tw(i.auth_time)),issuedAtTime:um(Tw(i.iat)),expirationTime:um(Tw(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Tw(t){return Number(t)*1e3}function sb(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return d2("JWT malformed, contained fewer than 3 sections"),null;try{const i=_8(r);return i?JSON.parse(i):(d2("Failed to decode base64 JWT payload"),null)}catch(i){return d2("Caught error parsing JWT payload as JSON",i?.toString()),null}}function vS(t){const e=sb(t);return Pr(e,"internal-error"),Pr(typeof e.exp<"u","internal-error"),Pr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Np(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof ru&&ez(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function ez({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=um(this.lastLoginAt),this.creationTime=um(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q2(t){var e;const r=t.auth,n=await t.getIdToken(),i=await Np(t,xN(r,{idToken:n}));Pr(i?.users.length,r,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?vN(s.providerUserInfo):[],o=nz(t.providerData,a),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!o?.length,f=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new n5(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,d)}async function rz(t){const e=mn(t);await q2(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nz(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function vN(t){return t.map(e=>{var{providerId:r}=e,n=rb(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iz(t,e){const r=await mN(t,{},async()=>{const n=sg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=gN(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",pN.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function sz(t,e){return nu(t,"POST","/v2/accounts:revokeToken",Xu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pr(e.idToken,"internal-error"),Pr(typeof e.idToken<"u","internal-error"),Pr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Pr(e.length!==0,"internal-error");const r=vS(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Pr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:s}=await iz(e,r);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:s}=r,a=new J0;return n&&(Pr(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(Pr(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Pr(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new J0,this.toJSON())}_performRefresh(){return Iu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(t,e){Pr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Nu{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,s=rb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new n5(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Np(this,this.stsTokenManager.getToken(this.auth,e));return Pr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return ZU(this,e)}reload(){return rz(this)}_assign(e){this!==e&&(Pr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Nu(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Pr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await q2(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mc(this.auth.app))return Promise.reject(Du(this.auth));const e=await this.getIdToken();return await Np(this,JU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,s,a,o,l,c,f;const d=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(i=r.email)!==null&&i!==void 0?i:void 0,p=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,_=(a=r.photoURL)!==null&&a!==void 0?a:void 0,w=(o=r.tenantId)!==null&&o!==void 0?o:void 0,b=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,k=(c=r.createdAt)!==null&&c!==void 0?c:void 0,F=(f=r.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:N,emailVerified:B,isAnonymous:X,providerData:G,stsTokenManager:P}=r;Pr(N&&P,e,"internal-error");const A=J0.fromJSON(this.name,P);Pr(typeof N=="string",e,"internal-error"),Nf(d,e.name),Nf(m,e.name),Pr(typeof B=="boolean",e,"internal-error"),Pr(typeof X=="boolean",e,"internal-error"),Nf(p,e.name),Nf(_,e.name),Nf(w,e.name),Nf(b,e.name),Nf(k,e.name),Nf(F,e.name);const T=new Nu({uid:N,auth:e,email:m,emailVerified:B,displayName:d,isAnonymous:X,photoURL:_,phoneNumber:p,tenantId:w,stsTokenManager:A,createdAt:k,lastLoginAt:F});return G&&Array.isArray(G)&&(T.providerData=G.map(O=>Object.assign({},O))),b&&(T._redirectEventId=b),T}static async _fromIdTokenResponse(e,r,n=!1){const i=new J0;i.updateFromServerResponse(r);const s=new Nu({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await q2(s),s}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];Pr(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?vN(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,o=new J0;o.updateFromIdToken(n);const l=new Nu({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new n5(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=new Map;function Pu(t){zu(t instanceof Function,"Expected a class definition");let e=yS.get(t);return e?(zu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,yS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}yN.type="NONE";const wS=yN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(t,e,r){return`firebase:${t}:${e}:${r}`}class Z0{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=p2(this.userKey,i.apiKey,s),this.fullPersistenceKey=p2("persistence",i.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Nu._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Z0(Pu(wS),e,n);const i=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Pu(wS);const a=p2(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const f=await c._get(a);if(f){const d=Nu._fromJSON(e,f);c!==s&&(o=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Z0(s,e,n):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new Z0(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kN(e))return"Blackberry";if(TN(e))return"Webos";if(_N(e))return"Safari";if((e.includes("chrome/")||bN(e))&&!e.includes("edge/"))return"Chrome";if(SN(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if(n?.length===2)return n[1]}return"Other"}function wN(t=zs()){return/firefox\//i.test(t)}function _N(t=zs()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bN(t=zs()){return/crios\//i.test(t)}function EN(t=zs()){return/iemobile/i.test(t)}function SN(t=zs()){return/android/i.test(t)}function kN(t=zs()){return/blackberry/i.test(t)}function TN(t=zs()){return/webos/i.test(t)}function ab(t=zs()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function az(t=zs()){var e;return ab(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oz(){return rO()&&document.documentMode===10}function AN(t=zs()){return ab(t)||SN(t)||TN(t)||kN(t)||/windows phone/i.test(t)||EN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t,e=[]){let r;switch(t){case"Browser":r=_S(zs());break;case"Worker":r=`${_S(zs())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Hd}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cz(t,e={}){return nu(t,"GET","/v2/passwordPolicy",Xu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz=6;class fz{constructor(e){var r,n,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:uz,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,s,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bS(this),this.idTokenSubscription=new bS(this),this.beforeStateQueue=new lz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Pu(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Z0.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await xN(this,{idToken:e}),n=await Nu._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Mc(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=i?._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await q2(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mc(this.app))return Promise.reject(Du(this));const r=e?mn(e):null;return r&&Pr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Pr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mc(this.app)?Promise.reject(Du(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mc(this.app)?Promise.reject(Du(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pu(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cz(this),r=new fz(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ig("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await sz(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Pu(e)||this._popupRedirectResolver;Pr(r,this,"argument-error"),this.redirectPersistenceManager=await Z0.create(this,[Pu(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pr(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,i);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r?.error&&zU(`Error while retrieving App Check token: ${r.error}`),r?.token}}function Th(t){return mn(t)}class bS{constructor(e){this.auth=e,this.observer=null,this.addObserver=lO(r=>this.observer=r)}get next(){return Pr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dz(t){Xv=t}function IN(t){return Xv.loadJS(t)}function pz(){return Xv.recaptchaEnterpriseScript}function mz(){return Xv.gapiScript}function gz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const xz="recaptcha-enterprise",vz="NO_RECAPTCHA";class yz{constructor(e){this.type=xz,this.auth=Th(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{QU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new YU(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;xS(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(vz)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{n(this.auth).then(o=>{if(!r&&xS(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=pz();l.length!==0&&(l+=o),IN(l).then(()=>{i(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function ES(t,e,r,n=!1){const i=new yz(t);let s;try{s=await i.verify(r)}catch{s=await i.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function G2(t,e,r,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await ES(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await ES(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wz(t,e){const r=Mp(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),s=r.getOptions();if(Zf(s,e??{}))return i;fc(i,"already-initialized")}return r.initialize({options:e})}function _z(t,e){const r=e?.persistence||[],n=(Array.isArray(r)?r:[r]).map(Pu);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function bz(t,e,r){const n=Th(t);Pr(n._canInitEmulator,n,"emulator-config-failed"),Pr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,s=NN(e),{host:a,port:o}=Ez(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${s}//${a}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Sz()}function NN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ez(t){const e=NN(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:SS(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:SS(a)}}}function SS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Sz(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Iu("not implemented")}_getIdTokenResponse(e){return Iu("not implemented")}_linkToIdToken(e,r){return Iu("not implemented")}_getReauthenticationResolver(e){return Iu("not implemented")}}async function kz(t,e){return nu(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tz(t,e){return Eg(t,"POST","/v1/accounts:signInWithPassword",Xu(t,e))}async function PN(t,e){return nu(t,"POST","/v1/accounts:sendOobCode",Xu(t,e))}async function Az(t,e){return PN(t,e)}async function Cz(t,e){return PN(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iz(t,e){return Eg(t,"POST","/v1/accounts:signInWithEmailLink",Xu(t,e))}async function Nz(t,e){return Eg(t,"POST","/v1/accounts:signInWithEmailLink",Xu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm extends ob{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new jm(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new jm(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return G2(e,r,"signInWithPassword",Tz);case"emailLink":return Iz(e,{email:this._email,oobCode:this._password});default:fc(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return G2(e,n,"signUpPassword",kz);case"emailLink":return Nz(e,{idToken:r,email:this._email,oobCode:this._password});default:fc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ep(t,e){return Eg(t,"POST","/v1/accounts:signInWithIdp",Xu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz="http://localhost";class Nd extends ob{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Nd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):fc("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,s=rb(r,["providerId","signInMethod"]);if(!n||!i)return null;const a=new Nd(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return ep(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,ep(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,ep(e,r)}buildRequest(){const e={requestUri:Pz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=sg(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rz(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Fz(t){const e=G1(K1(t)).link,r=e?G1(K1(e)).deep_link_id:null,n=G1(K1(t)).deep_link_id;return(n?G1(K1(n)).link:null)||n||r||e||t}class lb{constructor(e){var r,n,i,s,a,o;const l=G1(K1(e)),c=(r=l.apiKey)!==null&&r!==void 0?r:null,f=(n=l.oobCode)!==null&&n!==void 0?n:null,d=Rz((i=l.mode)!==null&&i!==void 0?i:null);Pr(c&&f&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=f,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=Fz(e);try{return new lb(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this.providerId=Kd.PROVIDER_ID}static credential(e,r){return jm._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=lb.parseLink(r);return Pr(n,"argument-error"),jm._fromEmailAndCode(e,n.code,n.tenantId)}}Kd.PROVIDER_ID="password";Kd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Kd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg extends RN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf extends Sg{constructor(){super("facebook.com")}static credential(e){return Nd._fromParams({providerId:Mf.PROVIDER_ID,signInMethod:Mf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mf.credentialFromTaggedObject(e)}static credentialFromError(e){return Mf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mf.credential(e.oauthAccessToken)}catch{return null}}}Mf.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf extends Sg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Nd._fromParams({providerId:jf.PROVIDER_ID,signInMethod:jf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return jf.credentialFromTaggedObject(e)}static credentialFromError(e){return jf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return jf.credential(r,n)}catch{return null}}}jf.GOOGLE_SIGN_IN_METHOD="google.com";jf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf extends Sg{constructor(){super("github.com")}static credential(e){return Nd._fromParams({providerId:Bf.PROVIDER_ID,signInMethod:Bf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bf.credentialFromTaggedObject(e)}static credentialFromError(e){return Bf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bf.credential(e.oauthAccessToken)}catch{return null}}}Bf.GITHUB_SIGN_IN_METHOD="github.com";Bf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends Sg{constructor(){super("twitter.com")}static credential(e,r){return Nd._fromParams({providerId:Vf.PROVIDER_ID,signInMethod:Vf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Vf.credentialFromTaggedObject(e)}static credentialFromError(e){return Vf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Vf.credential(r,n)}catch{return null}}}Vf.TWITTER_SIGN_IN_METHOD="twitter.com";Vf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lz(t,e){return Eg(t,"POST","/v1/accounts:signUp",Xu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const s=await Nu._fromIdTokenResponse(e,n,i),a=kS(n);return new Pd({user:s,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=kS(n);return new Pd({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function kS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2 extends ru{constructor(e,r,n,i){var s;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,K2.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new K2(e,r,n,i)}}function FN(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?K2._fromErrorAndOperation(t,s,e,n):s})}async function Dz(t,e,r=!1){const n=await Np(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Pd._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LN(t,e,r=!1){const{auth:n}=t;if(Mc(n.app))return Promise.reject(Du(n));const i="reauthenticate";try{const s=await Np(t,FN(n,i,e,t),r);Pr(s.idToken,n,"internal-error");const a=sb(s.idToken);Pr(a,n,"internal-error");const{sub:o}=a;return Pr(t.uid===o,n,"user-mismatch"),Pd._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&fc(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(t,e,r=!1){if(Mc(t.app))return Promise.reject(Du(t));const n="signIn",i=await FN(t,n,e),s=await Pd._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(s.user),s}async function Oz(t,e){return DN(Th(t),e)}async function Mz(t,e){return LN(mn(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t){const e=Th(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jz(t,e,r){const n=Th(t);await G2(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Cz)}async function MN(t,e,r){if(Mc(t.app))return Promise.reject(Du(t));const n=Th(t),a=await G2(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Lz).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&ON(t),l}),o=await Pd._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function Bz(t,e,r){return Mc(t.app)?Promise.reject(Du(t)):Oz(mn(t),Kd.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&ON(t),n})}async function Vz(t,e){const r=mn(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:s}=await Az(r.auth,i);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uz(t,e){return nu(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=mn(t),s={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},a=await Np(n,Uz(n.auth,s));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const o=n.providerData.find(({providerId:l})=>l==="password");o&&(o.displayName=n.displayName,o.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function zz(t,e,r,n){return mn(t).onIdTokenChanged(e,r,n)}function $z(t,e,r){return mn(t).beforeAuthStateChanged(e,r)}function Hz(t,e,r,n){return mn(t).onAuthStateChanged(e,r,n)}function Wz(t){return mn(t).signOut()}const X2="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(X2,"1"),this.storage.removeItem(X2),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz=1e3,Gz=10;class VN extends BN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);oz()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Gz):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},qz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}VN.type="LOCAL";const Kz=VN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN extends BN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}UN.type="SESSION";const zN=UN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xz(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new Yv(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:s}=r.data,a=this.handlersMap[i];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(a).map(async c=>c(r.origin,s)),l=await Xz(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=cb("",20);i.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(d){const m=d;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(){return window}function Qz(t){Kc().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(){return typeof Kc().WorkerGlobalScope<"u"&&typeof Kc().importScripts=="function"}async function Jz(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Zz(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function e$(){return $N()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="firebaseLocalStorageDb",t$=1,Y2="firebaseLocalStorage",WN="fbase_key";class kg{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Qv(t,e){return t.transaction([Y2],e?"readwrite":"readonly").objectStore(Y2)}function r$(){const t=indexedDB.deleteDatabase(HN);return new kg(t).toPromise()}function i5(){const t=indexedDB.open(HN,t$);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Y2,{keyPath:WN})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Y2)?e(n):(n.close(),await r$(),e(await i5()))})})}async function TS(t,e,r){const n=Qv(t,!0).put({[WN]:e,value:r});return new kg(n).toPromise()}async function n$(t,e){const r=Qv(t,!1).get(e),n=await new kg(r).toPromise();return n===void 0?null:n.value}function AS(t,e){const r=Qv(t,!0).delete(e);return new kg(r).toPromise()}const i$=800,s$=3;class qN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await i5(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>s$)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $N()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yv._getInstance(e$()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Jz(),!this.activeServiceWorker)return;this.sender=new Yz(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Zz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await i5();return await TS(e,X2,"1"),await AS(e,X2),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>TS(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>n$(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>AS(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Qv(i,!1).getAll();return new kg(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),i$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qN.type="LOCAL";const a$=qN;new bg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(t,e){return e?Pu(e):(Pr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub extends ob{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ep(e,this._buildIdpRequest())}_linkToIdToken(e,r){return ep(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return ep(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function l$(t){return DN(t.auth,new ub(t),t.bypassAuthState)}function c$(t){const{auth:e,user:r}=t;return Pr(r,e,"internal-error"),LN(r,new ub(t),t.bypassAuthState)}async function u$(t){const{auth:e,user:r}=t;return Pr(r,e,"internal-error"),Dz(r,new ub(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,r,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return l$;case"linkViaPopup":case"linkViaRedirect":return u$;case"reauthViaPopup":case"reauthViaRedirect":return c$;default:fc(this.auth,"internal-error")}}resolve(e){zu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f$=new bg(2e3,1e4);class W0 extends GN{constructor(e,r,n,i,s){super(e,r,i,s),this.provider=n,this.authWindow=null,this.pollId=null,W0.currentPopupAction&&W0.currentPopupAction.cancel(),W0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pr(e,this.auth,"internal-error"),e}async onExecution(){zu(this.filter.length===1,"Popup operations only handle one event");const e=cb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Gc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Gc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,W0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,f$.get())};e()}}W0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h$="pendingRedirect",m2=new Map;class d$ extends GN{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=m2.get(this.auth._key());if(!e){try{const n=await p$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}m2.set(this.auth._key(),e)}return this.bypassAuthState||m2.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function p$(t,e){const r=x$(e),n=g$(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function m$(t,e){m2.set(t._key(),e)}function g$(t){return Pu(t._redirectPersistence)}function x$(t){return p2(h$,t.config.apiKey,t.name)}async function v$(t,e,r=!1){if(Mc(t.app))return Promise.reject(Du(t));const n=Th(t),i=o$(n,e),a=await new d$(n,i,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=600*1e3;class w${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_$(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!KN(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Gc(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=y$&&this.cachedEventUids.clear(),this.cachedEventUids.has(CS(e))}saveEventToCache(e){this.cachedEventUids.add(CS(e)),this.lastProcessedEventTime=Date.now()}}function CS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function KN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function _$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b$(t,e={}){return nu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S$=/^https?/;async function k$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await b$(t);for(const r of e)try{if(T$(r))return}catch{}fc(t,"unauthorized-domain")}function T$(t){const e=r5(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!S$.test(r))return!1;if(E$.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A$=new bg(3e4,6e4);function IS(){const t=Kc().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function C$(t){return new Promise((e,r)=>{var n,i,s;function a(){IS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{IS(),r(Gc(t,"network-request-failed"))},timeout:A$.get()})}if(!((i=(n=Kc().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Kc().gapi)===null||s===void 0)&&s.load)a();else{const o=gz("iframefcb");return Kc()[o]=()=>{gapi.load?a():r(Gc(t,"network-request-failed"))},IN(`${mz()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw g2=null,e})}let g2=null;function I$(t){return g2=g2||C$(t),g2}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$=new bg(5e3,15e3),P$="__/auth/iframe",R$="emulator/auth/iframe",F$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function D$(t){const e=t.config;Pr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?ib(e,R$):`https://${t.config.authDomain}/${P$}`,n={apiKey:e.apiKey,appName:t.name,v:Hd},i=L$.get(t.config.apiHost);i&&(n.eid=i);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${sg(n).slice(1)}`}async function O$(t){const e=await I$(t),r=Kc().gapi;return Pr(r,t,"internal-error"),e.open({where:document.body,url:D$(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F$,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=Gc(t,"network-request-failed"),o=Kc().setTimeout(()=>{s(a)},N$.get());function l(){Kc().clearTimeout(o),i(n)}n.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j$=500,B$=600,V$="_blank",U$="http://localhost";class NS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function z$(t,e,r,n=j$,i=B$){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},M$),{width:n.toString(),height:i.toString(),top:s,left:a}),c=zs().toLowerCase();r&&(o=bN(c)?V$:r),wN(c)&&(e=e||U$,l.scrollbars="yes");const f=Object.entries(l).reduce((m,[p,_])=>`${m}${p}=${_},`,"");if(az(c)&&o!=="_self")return $$(e||"",o),new NS(null);const d=window.open(e||"",o,f);Pr(d,t,"popup-blocked");try{d.focus()}catch{}return new NS(d)}function $$(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$="__/auth/handler",W$="emulator/auth/handler",q$=encodeURIComponent("fac");async function PS(t,e,r,n,i,s){Pr(t.config.authDomain,t,"auth-domain-config-required"),Pr(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Hd,eventId:i};if(e instanceof RN){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",oO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,d]of Object.entries({}))a[f]=d}if(e instanceof Sg){const f=e.getScopes().filter(d=>d!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const l=await t._getAppCheckToken(),c=l?`#${q$}=${encodeURIComponent(l)}`:"";return`${G$(t)}?${sg(o).slice(1)}${c}`}function G$({config:t}){return t.emulator?ib(t,W$):`https://${t.authDomain}/${H$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="webStorageSupport";class K${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zN,this._completeRedirectFn=v$,this._overrideRedirectResult=m$}async _openPopup(e,r,n,i){var s;zu((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await PS(e,r,n,r5(),i);return z$(e,a,cb())}async _openRedirect(e,r,n,i){await this._originValidation(e);const s=await PS(e,r,n,r5(),i);return Qz(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:s}=this.eventManagers[r];return i?Promise.resolve(i):(zu(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await O$(e),n=new w$(e);return r.register("authEvent",i=>(Pr(i?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Aw,{type:Aw},i=>{var s;const a=(s=i?.[0])===null||s===void 0?void 0:s[Aw];a!==void 0&&r(!!a),fc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=k$(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return AN()||_N()||ab()}}const X$=K$;var RS="@firebase/auth",FS="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Pr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function J$(t){wd(new eh("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Pr(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CN(t)},c=new hz(n,i,s,l);return _z(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),wd(new eh("auth-internal",e=>{const r=Th(e.getProvider("auth").getImmediate());return(n=>new Y$(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hc(RS,FS,Q$(t)),Hc(RS,FS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z$=300,eH=k8("authIdTokenMaxAge")||Z$;let LS=null;const tH=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>eH)return;const i=r?.token;LS!==i&&(LS=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function XN(t=e4()){const e=Mp(t,"auth");if(e.isInitialized())return e.getImmediate();const r=wz(t,{popupRedirectResolver:X$,persistence:[a$,Kz,zN]}),n=k8("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const a=tH(s.toString());$z(r,a,()=>a(r.currentUser)),zz(r,o=>a(o))}}const i=b8("auth");return i&&bz(r,`http://${i}`),r}function rH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}dz({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const s=Gc("internal-error");s.customData=i,r(s)},n.type="text/javascript",n.charset="UTF-8",rH().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});J$("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="firebasestorage.googleapis.com",QN="storageBucket",nH=120*1e3,iH=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends ru{constructor(e,r,n=0){super(Cw(e),`Firebase Storage: ${r} (${Cw(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Cw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Zi;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Zi||(Zi={}));function Cw(t){return"storage/"+t}function fb(){const t="An unknown error occurred, please check the error payload for server response.";return new rs(Zi.UNKNOWN,t)}function sH(t){return new rs(Zi.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function aH(t){return new rs(Zi.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function oH(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new rs(Zi.UNAUTHENTICATED,t)}function lH(){return new rs(Zi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function cH(t){return new rs(Zi.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function uH(){return new rs(Zi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fH(){return new rs(Zi.CANCELED,"User canceled the upload/download.")}function hH(t){return new rs(Zi.INVALID_URL,"Invalid URL '"+t+"'.")}function dH(t){return new rs(Zi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function pH(){return new rs(Zi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+QN+"' property when initializing the app?")}function mH(){return new rs(Zi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gH(){return new rs(Zi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function xH(t){return new rs(Zi.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function s5(t){return new rs(Zi.INVALID_ARGUMENT,t)}function JN(){return new rs(Zi.APP_DELETED,"The Firebase app was deleted.")}function vH(t){return new rs(Zi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fm(t,e){return new rs(Zi.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function U1(t){throw new rs(Zi.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=sl.makeFromUrl(e,r)}catch{return new sl(e,"")}if(n.path==="")return n;throw dH(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function s(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function c(B){B.path_=decodeURIComponent(B.path)}const f="v[A-Za-z0-9_]+",d=r.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${f}/b/${i}/o${m}`,"i"),_={bucket:1,path:3},w=r===YN?"(?:storage.googleapis.com|storage.cloud.google.com)":r,b="([^?#]*)",k=new RegExp(`^https?://${w}/${i}/${b}`,"i"),N=[{regex:o,indices:l,postModify:s},{regex:p,indices:_,postModify:c},{regex:k,indices:{bucket:1,path:2},postModify:c}];for(let B=0;B<N.length;B++){const X=N[B],G=X.regex.exec(e);if(G){const P=G[X.indices.bucket];let A=G[X.indices.path];A||(A=""),n=new sl(P,A),X.postModify(n);break}}if(n==null)throw hH(e);return n}}class yH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wH(t,e,r){let n=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let c=!1;function f(...b){c||(c=!0,e.apply(null,b))}function d(b){i=setTimeout(()=>{i=null,t(p,l())},b)}function m(){s&&clearTimeout(s)}function p(b,...k){if(c){m();return}if(b){m(),f.call(null,b,...k);return}if(l()||a){m(),f.call(null,b,...k);return}n<64&&(n*=2);let N;o===1?(o=2,N=0):N=(n+Math.random())*1e3,d(N)}let _=!1;function w(b){_||(_=!0,m(),!c&&(i!==null?(b||(o=2),clearTimeout(i),d(0)):b||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,w(!0)},r),w}function _H(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bH(t){return t!==void 0}function EH(t){return typeof t=="object"&&!Array.isArray(t)}function hb(t){return typeof t=="string"||t instanceof String}function DS(t){return db()&&t instanceof Blob}function db(){return typeof Blob<"u"}function OS(t,e,r,n){if(n<e)throw s5(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw s5(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function ZN(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var dd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(dd||(dd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SH(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return r||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{constructor(e,r,n,i,s,a,o,l,c,f,d,m=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=d,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,_)=>{this.resolve_=p,this.reject_=_,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Px(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===dd.NO_ERROR,l=s.getStatus();if(!o||SH(l,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===dd.ABORT;n(!1,new Px(!1,null,f));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new Px(c,s))})},r=(n,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());bH(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=fb();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?JN():fH();a(l)}else{const l=uH();a(l)}};this.canceled_?r(!1,new Px(!1,null,!0)):this.backoffId_=wH(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_H(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Px{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function TH(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function AH(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function CH(t,e){e&&(t["X-Firebase-GMPID"]=e)}function IH(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function NH(t,e,r,n,i,s,a=!0){const o=ZN(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return CH(c,e),TH(c,r),AH(c,s),IH(c,n),new kH(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function RH(...t){const e=PH();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(db())return new Blob(t);throw new rs(Zi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function FH(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LH(t){if(typeof atob>"u")throw xH("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Iw{constructor(e,r){this.data=e,this.contentType=r||null}}function DH(t,e){switch(t){case Vc.RAW:return new Iw(e7(e));case Vc.BASE64:case Vc.BASE64URL:return new Iw(t7(t,e));case Vc.DATA_URL:return new Iw(MH(e),jH(e))}throw fb()}function e7(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const s=n,a=t.charCodeAt(++r);n=65536|(s&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function OH(t){let e;try{e=decodeURIComponent(t)}catch{throw fm(Vc.DATA_URL,"Malformed data URL.")}return e7(e)}function t7(t,e){switch(t){case Vc.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw fm(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Vc.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw fm(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=LH(e)}catch(i){throw i.message.includes("polyfill")?i:fm(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class r7{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw fm(Vc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=BH(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function MH(t){const e=new r7(t);return e.base64?t7(Vc.BASE64,e.rest):OH(e.rest)}function jH(t){return new r7(t).contentType}function BH(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,r){let n=0,i="";DS(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(DS(this.data_)){const n=this.data_,i=FH(n,e,r);return i===null?null:new Uf(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Uf(n,!0)}}static getBlob(...e){if(db()){const r=e.map(n=>n instanceof Uf?n.data_:n);return new Uf(RH.apply(null,r))}else{const r=e.map(a=>hb(a)?DH(Vc.RAW,a).data:a.data_);let n=0;r.forEach(a=>{n+=a.byteLength});const i=new Uint8Array(n);let s=0;return r.forEach(a=>{for(let o=0;o<a.length;o++)i[s++]=a[o]}),new Uf(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n7(t){let e;try{e=JSON.parse(t)}catch{return null}return EH(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VH(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function UH(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function i7(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zH(t,e){return e}class mo{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||zH}}let Rx=null;function $H(t){return!hb(t)||t.length<2?t:i7(t)}function s7(){if(Rx)return Rx;const t=[];t.push(new mo("bucket")),t.push(new mo("generation")),t.push(new mo("metageneration")),t.push(new mo("name","fullPath",!0));function e(s,a){return $H(a)}const r=new mo("name");r.xform=e,t.push(r);function n(s,a){return a!==void 0?Number(a):a}const i=new mo("size");return i.xform=n,t.push(i),t.push(new mo("timeCreated")),t.push(new mo("updated")),t.push(new mo("md5Hash",null,!0)),t.push(new mo("cacheControl",null,!0)),t.push(new mo("contentDisposition",null,!0)),t.push(new mo("contentEncoding",null,!0)),t.push(new mo("contentLanguage",null,!0)),t.push(new mo("contentType",null,!0)),t.push(new mo("metadata","customMetadata",!0)),Rx=t,Rx}function HH(t,e){function r(){const n=t.bucket,i=t.fullPath,s=new sl(n,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:r})}function WH(t,e,r){const n={};n.type="file";const i=r.length;for(let s=0;s<i;s++){const a=r[s];n[a.local]=a.xform(n,e[a.server])}return HH(n,t),n}function a7(t,e,r){const n=n7(e);return n===null?null:WH(t,n,r)}function qH(t,e,r,n){const i=n7(e);if(i===null||!hb(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(c=>{const f=t.bucket,d=t.fullPath,m="/b/"+a(f)+"/o/"+a(d),p=pb(m,r,n),_=ZN({alt:"media",token:c});return p+_})[0]}function GH(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const s=e[i];s.writable&&(r[s.server]=t[s.local])}return JSON.stringify(r)}class o7{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l7(t){if(!t)throw fb()}function KH(t,e){function r(n,i){const s=a7(t,i,e);return l7(s!==null),s}return r}function XH(t,e){function r(n,i){const s=a7(t,i,e);return l7(s!==null),qH(s,i,t.host,t._protocol)}return r}function c7(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=lH():i=oH():r.getStatus()===402?i=aH(t.bucket):r.getStatus()===403?i=cH(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function YH(t){const e=c7(t);function r(n,i){let s=e(n,i);return n.getStatus()===404&&(s=sH(t.path)),s.serverResponse=i.serverResponse,s}return r}function QH(t,e,r){const n=e.fullServerUrl(),i=pb(n,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new o7(i,s,XH(t,r),a);return o.errorHandler=YH(e),o}function JH(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function ZH(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=JH(null,e)),n}function eW(t,e,r,n,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let N="";for(let B=0;B<2;B++)N=N+Math.random().toString().slice(2);return N}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=ZH(e,n,i),f=GH(c,r),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",p=Uf.getBlob(d,n,m);if(p===null)throw mH();const _={name:c.fullPath},w=pb(s,t.host,t._protocol),b="POST",k=t.maxUploadRetryTime,F=new o7(w,b,KH(t,r),k);return F.urlParams=_,F.headers=a,F.body=p.uploadData(),F.errorHandler=c7(e),F}class tW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=dd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=dd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=dd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i){if(this.sent_)throw U1("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw U1("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw U1("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw U1("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw U1("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class rW extends tW{initXhr(){this.xhr_.responseType="text"}}function u7(){return new rW}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,r){this._service=e,r instanceof sl?this._location=r:this._location=sl.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Rd(e,r)}get root(){const e=new sl(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return i7(this._location.path)}get storage(){return this._service}get parent(){const e=VH(this._location.path);if(e===null)return null;const r=new sl(this._location.bucket,e);return new Rd(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw vH(e)}}function nW(t,e,r){t._throwIfRoot("uploadBytes");const n=eW(t.storage,t._location,s7(),new Uf(e,!0),r);return t.storage.makeRequestWithTokens(n,u7).then(i=>({metadata:i,ref:t}))}function iW(t){t._throwIfRoot("getDownloadURL");const e=QH(t.storage,t._location,s7());return t.storage.makeRequestWithTokens(e,u7).then(r=>{if(r===null)throw gH();return r})}function sW(t,e){const r=UH(t._location.path,e),n=new sl(t._location.bucket,r);return new Rd(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aW(t){return/^[A-Za-z]+:\/\//.test(t)}function oW(t,e){return new Rd(t,e)}function f7(t,e){if(t instanceof mb){const r=t;if(r._bucket==null)throw pH();const n=new Rd(r,r._bucket);return e!=null?f7(n,e):n}else return e!==void 0?sW(t,e):t}function lW(t,e){if(e&&aW(e)){if(t instanceof mb)return oW(t,e);throw s5("To use ref(service, url), the first argument must be a Storage instance.")}else return f7(t,e)}function MS(t,e){const r=e?.[QN];return r==null?null:sl.makeFromBucketSpec(r,t)}function cW(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:T8(i,t.app.options.projectId))}class mb{constructor(e,r,n,i,s){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=YN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nH,this._maxUploadRetryTime=iH,this._requests=new Set,i!=null?this._bucket=sl.makeFromBucketSpec(i,this._host):this._bucket=MS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=sl.makeFromBucketSpec(this._url,e):this._bucket=MS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){OS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){OS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Rd(this,e)}_makeRequest(e,r,n,i,s=!0){if(this._deleted)return new yH(JN());{const a=NH(e,this._appId,n,i,r,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const jS="@firebase/storage",BS="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7="storage";function uW(t,e,r){return t=mn(t),nW(t,e,r)}function fW(t){return t=mn(t),iW(t)}function hW(t,e){return t=mn(t),lW(t,e)}function dW(t=e4(),e){t=mn(t);const n=Mp(t,h7).getImmediate({identifier:e}),i=E8("storage");return i&&pW(n,...i),n}function pW(t,e,r,n={}){cW(t,e,r,n)}function mW(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new mb(r,n,i,e,Hd)}function gW(){wd(new eh(h7,mW,"PUBLIC").setMultipleInstances(!0)),Hc(jS,BS,""),Hc(jS,BS,"esm2017")}gW();const xW={apiKey:"AIzaSyB1GNt6gatBiZyVDj9wZP4TSnefXsohCho",authDomain:"healthapp-f4173.firebaseapp.com",projectId:"healthapp-f4173",storageBucket:"healthapp-f4173.firebasestorage.app",messagingSenderId:"169032569236",appId:"1:169032569236:web:38585fcf19c35ba1737f81"},gb=P8(xW),q0=XN(gb),St=UI(gb),vW=dW(gb),a5=async()=>{const t=await li(vr(St,"pharmacies"));return await Promise.all(t.docs.map(async r=>{const n={id:r.id,...r.data()};if(n.lat&&n.lon)n.coordinates={latitude:Number(n.lat),longitude:Number(n.lon)};else if(n.address)try{const s=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(n.address)}&limit=1`)).json();s&&s[0]&&(n.coordinates={latitude:Number(s[0].lat),longitude:Number(s[0].lon)})}catch{}return n}))},xb=async({vendorId:t,customerId:e,role:r})=>{const n=`${t}__${e}`,i=kr(St,"threads",n);if(!(await Ta(i)).exists()){const[a,o]=await Promise.all([Ta(kr(St,"pharmacies",t)),Ta(kr(St,"users",e))]),l=a.exists()?a.data().name:"Pharmacy",c=o.exists()?o.data().displayName:"Customer";await Ip(i,{id:n,vendorId:t,customerId:e,vendorName:l,customerName:c,lastMessage:"",lastBy:null,lastAt:Jc(),unread:{[t]:0,[e]:0},createdAt:Jc()})}return n},o5=async(t,{senderId:e,to:r,text:n})=>{const i=vr(St,"threads",t,"messages");await Xp(i,{senderId:e,to:r,text:n||"",createdAt:Jc(),read:!1}),await Ja(kr(St,"threads",t),{lastMessage:n||"",lastBy:e,lastAt:Jc(),[`unread.${r}`]:oN(1)})},Q2=async(t,e)=>{await Ja(kr(St,"threads",t),{[`unread.${e}`]:0});const r=$r(vr(St,"threads",t,"messages"),Xr("to","==",e),Xr("read","==",!1),uc("createdAt","desc"),yg(50)),n=await li(r);if(!n.empty){const i=eb(St);n.docs.forEach(s=>i.update(s.ref,{read:!0})),await i.commit()}},d7=(t,e,r)=>{const n=$r(vr(St,"threads",t,"messages"),uc("createdAt","asc"));return Ai(n,i=>e(i.docs.map(s=>({id:s.id,...s.data()}))),i=>r?.(i))},Jv=(t,e,r,n={})=>{if(!t?.uid||!t?.role)return()=>{};const i=vr(St,"threads"),s=t.role==="customer"?$r(i,Xr("customerId","==",t.uid)):$r(i,Xr("vendorId","==",t.uid)),a=n.noSort?s:$r(s,uc("lastAt","desc"));return Ai(a,o=>e(o.docs.map(l=>({id:l.id,...l.data()}))),o=>r?.(o))},Zv=(t,e=null)=>{const r=vr(St,"products"),n=e?$r(r,Xr("pharmacyId","==",e),uc("createdAt","desc")):$r(r,uc("createdAt","desc"));return Ai(n,i=>t(i.docs.map(s=>({id:s.id,...s.data()}))),i=>console.error("listenProducts error:",i))},p7=async t=>{const e=vr(St,"products");await Xp(e,{...t,createdAt:Jc()})},m7=async(t,e)=>{const r=eb(St);t.forEach(n=>{const i=kr(vr(St,"products"));r.set(i,{...n,pharmacyId:e,price:Number(n.price),stock:Number(n.stock||0),createdAt:Jc()})}),await r.commit()},tp=async(t,e,r=1)=>{const n=kr(vr(St,"users",t,"cart"));await Ip(n,{productId:e,qty:r})},x2=(t,e)=>Pl(kr(St,"users",t,"cart",e)),g7=async({customerId:t,pharmacyId:e,items:r,total:n})=>Xp(vr(St,"orders"),{customerId:t,pharmacyId:e,items:r,total:n,createdAt:Jc()}),x7=async(t=5,e)=>{if(!e)return[];const n=(await li($r(vr(St,"products"),Xr("pharmacyId","==",e)))).docs.map(o=>({id:o.id,...o.data()}));if(n.length===0)return[];const i=await li($r(vr(St,"orders"),Xr("pharmacyId","==",e))),s={};i.forEach(o=>{(o.data().items||[]).forEach(c=>{s[c.productId]||(s[c.productId]=0),s[c.productId]+=c.quantity||1})});const a=n.map(o=>({...o,sold:s[o.id]||0}));return a.sort((o,l)=>l.sold!==o.sold?l.sold-o.sold:(l.dateAdded?.toMillis?.()||0)-(o.dateAdded?.toMillis?.()||0)),a.slice(0,t).map(o=>({id:o.id,name:o.name,sold:o.sold,dateAdded:o.dateAdded}))};async function v7({pharmacyId:t,customerId:e,chatThreadId:r,drugs:n,startDate:i,duration:s,notes:a}){return await Xp(vr(St,"prescriptions"),{pharmacyId:t,customerId:e,chatThreadId:r,drugs:n,startDate:i,duration:s,notes:a,status:"active",createdAt:Jc(),updatedAt:Jc()})}async function y7(t){const e=$r(vr(St,"prescriptions"),Xr("chatThreadId","==",t));return(await li(e)).docs.map(n=>({id:n.id,...n.data()}))}async function w7({customerId:t}){const r=(await li($r(vr(St,"prescriptions"),Xr("customerId","==",t),Xr("requirePurchase","==",!0),Xr("fulfilled","!=",!0)))).docs.map(s=>({id:s.id,...s.data()}));if(!r.length)return;const n=await li($r(vr(St,"orders"),Xr("customerId","==",t),Xr("status","==","fulfilled"))),i=[];n.forEach(s=>{(s.data().items||[]).forEach(o=>{i.push(o.productId)})});for(const s of r)s.drugs.every(o=>o.productId&&i.includes(o.productId))&&await Ja(kr(St,"prescriptions",s.id),{fulfilled:!0})}const yW=Object.freeze(Object.defineProperty({__proto__:null,addProduct:p7,addToCart:tp,bulkAddProducts:m7,createPrescription:v7,fulfillPrescriptionIfOrdered:w7,getAllPharmacies:a5,getBestSellingProducts:x7,getOrCreateThread:xb,getPrescriptionsForThread:y7,listenProducts:Zv,listenThreadMessages:d7,listenUserThreads:Jv,markThreadRead:Q2,placeOrder:g7,removeFromCart:x2,sendChatMessage:o5},Symbol.toStringTag,{value:"Module"}));function wW({color:t="black",...e}){return x.jsx("svg",{width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:x.jsx("path",{d:"M1.38004 6.00487L0.919293 5.79263L0.919001 5.79327L1.38004 6.00487ZM3.22754 4.0549L2.89744 3.66972L2.89735 3.6698L3.22754 4.0549ZM4.24209 3.18542L3.91215 2.80011L3.91199 2.80024L4.24209 3.18542ZM12.1657 3.18441L12.4958 2.79923L12.4958 2.79918L12.1657 3.18441ZM13.1803 4.05388L13.5107 3.66894L13.5104 3.6687L13.1803 4.05388ZM15.0268 6.00385L14.5657 6.21545L14.566 6.21609L15.0268 6.00385ZM10.233 17.0371C10.233 17.3173 10.4601 17.5444 10.7403 17.5444C11.0205 17.5444 11.2476 17.3173 11.2476 17.0371H10.7403H10.233ZM5.16027 17.0371C5.16027 17.3173 5.38738 17.5444 5.66755 17.5444C5.94771 17.5444 6.17482 17.3173 6.17482 17.0371H5.66755H5.16027ZM1.10205 8.6772H1.60933C1.60933 7.2531 1.62014 6.69785 1.84108 6.21646L1.38004 6.00487L0.919001 5.79327C0.583964 6.52326 0.594774 7.34577 0.594774 8.6772H1.10205ZM1.38004 6.00487L1.84078 6.2171C2.06254 5.7357 2.4764 5.36715 3.55773 4.44L3.22754 4.0549L2.89735 3.6698C1.88667 4.53637 1.25554 5.06266 0.919294 5.79263L1.38004 6.00487ZM3.22754 4.0549L3.55764 4.44008L4.57219 3.5706L4.24209 3.18542L3.91199 2.80024L2.89744 3.66972L3.22754 4.0549ZM4.24209 3.18542L4.57204 3.57074C5.5283 2.75189 6.2094 2.16896 6.79004 1.78503C7.35875 1.40899 7.77821 1.26082 8.20392 1.26082V0.75354V0.246264C7.50348 0.246264 6.88809 0.503911 6.23046 0.938751C5.58476 1.3657 4.84802 1.99872 3.91215 2.80011L4.24209 3.18542ZM8.20392 0.75354V1.26082C8.62982 1.26082 9.04961 1.40889 9.61834 1.78463C10.199 2.16824 10.8801 2.7509 11.8357 3.56963L12.1657 3.18441L12.4958 2.79918C11.5603 1.99767 10.8235 1.3649 10.1776 0.938137C9.51974 0.503509 8.90417 0.246264 8.20392 0.246264V0.75354ZM12.1657 3.18441L11.8356 3.56959L12.8502 4.43906L13.1803 4.05388L13.5104 3.6687L12.4958 2.79923L12.1657 3.18441ZM13.1803 4.05388L12.8499 4.43882C13.9308 5.36653 14.345 5.73455 14.5657 6.21545L15.0268 6.00385L15.4878 5.79225C15.1526 5.06178 14.5197 4.53496 13.5107 3.66894L13.1803 4.05388ZM15.0268 6.00385L14.566 6.21609C14.7876 6.69715 14.7985 7.25196 14.7985 8.67618H15.3058H15.8131C15.8131 7.34488 15.8239 6.52193 15.4875 5.79162L15.0268 6.00385ZM15.3058 8.67618H14.7985V12.9789H15.3058H15.8131V8.67618H15.3058ZM15.3058 12.9789H14.7985C14.7985 13.95 14.7974 14.627 14.7287 15.1377C14.662 15.6338 14.5399 15.8965 14.3526 16.0839L14.7113 16.4426L15.07 16.8013C15.4771 16.3941 15.6523 15.8818 15.7342 15.273C15.8141 14.6789 15.8131 13.9213 15.8131 12.9789H15.3058ZM14.7113 16.4426L14.3526 16.0839C14.1652 16.2713 13.9024 16.3933 13.4064 16.46C12.8956 16.5288 12.2187 16.5298 11.2476 16.5298V17.0371V17.5444C12.1899 17.5444 12.9475 17.5455 13.5416 17.4655C14.1504 17.3836 14.6628 17.2084 15.07 16.8013L14.7113 16.4426ZM11.2476 17.0371V16.5298H5.16026V17.0371V17.5444H11.2476V17.0371ZM5.16026 17.0371V16.5298C4.18918 16.5298 3.5122 16.5288 3.00146 16.46C2.50541 16.3933 2.24265 16.2713 2.05528 16.0839L1.69658 16.4426L1.33788 16.8013C1.74503 17.2084 2.2574 17.3836 2.86619 17.4655C3.4603 17.5455 4.21789 17.5444 5.16026 17.5444V17.0371ZM1.69658 16.4426L2.05528 16.0839C1.8679 15.8965 1.74585 15.6338 1.67911 15.1377C1.61041 14.627 1.60933 13.95 1.60933 12.9789H1.10205H0.594774C0.594774 13.9213 0.593696 14.6789 0.673619 15.273C0.755519 15.8818 0.930728 16.3941 1.33788 16.8013L1.69658 16.4426ZM1.10205 12.9789H1.60933V8.6772H1.10205H0.594774V12.9789H1.10205ZM10.7403 17.0371H11.2476V11.9643H10.7403H10.233V17.0371H10.7403ZM10.7403 11.9643H11.2476C11.2476 11.5607 11.0872 11.1736 10.8019 10.8882L10.4432 11.2469L10.0845 11.6056C10.1796 11.7008 10.233 11.8298 10.233 11.9643H10.7403ZM10.4432 11.2469L10.8019 10.8882C10.5165 10.6029 10.1294 10.4425 9.72576 10.4425V10.9498V11.4571C9.86029 11.4571 9.98932 11.5105 10.0845 11.6056L10.4432 11.2469ZM9.72576 10.9498V10.4425H6.6821V10.9498V11.4571H9.72576V10.9498ZM6.6821 10.9498V10.4425C6.27848 10.4425 5.8914 10.6028 5.606 10.8882L5.9647 11.2469L6.3234 11.6056C6.41853 11.5105 6.54756 11.4571 6.6821 11.4571V10.9498ZM5.9647 11.2469L5.606 10.8882C5.3206 11.1736 5.16027 11.5607 5.16027 11.9643H5.66755H6.17482C6.17482 11.8298 6.22827 11.7008 6.3234 11.6056L5.9647 11.2469ZM5.66755 11.9643H5.16027V17.0371H5.66755H6.17482V11.9643H5.66755Z",fill:t})})}function _W({color:t="black",...e}){return x.jsx("svg",{width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:x.jsx("path",{d:"M5.12519 5.42678H10.9951M5.12519 9.27611H10.9951M5.12519 13.1254H9.03846M3.16855 0.615112H12.9517C14.0324 0.615112 14.9084 1.47681 14.9084 2.53978V15.0501C14.9084 16.1131 14.0324 16.9748 12.9517 16.9748H3.16855C2.08793 16.9748 1.21191 16.1131 1.21191 15.0501V2.53978C1.21191 1.47681 2.08793 0.615112 3.16855 0.615112Z",stroke:t,strokeWidth:"0.85113",strokeLinecap:"round"})})}const bW=({color:t="black",...e})=>x.jsxs("svg",{width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[x.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.7145 1.04437C15.256 1.04437 15.7753 1.25948 16.1582 1.64236C16.5411 2.02525 16.7562 2.54455 16.7562 3.08604V13.2944C16.7562 13.8358 16.5411 14.3551 16.1582 14.738C15.7753 15.1209 15.256 15.336 14.7145 15.336L11.653 15.335L9.31123 17.6768C9.13545 17.8525 8.90158 17.9581 8.65349 17.9737C8.4054 17.9893 8.16015 17.9139 7.96374 17.7615L7.86778 17.6768L5.52599 15.335L2.46452 15.336C1.92303 15.336 1.40373 15.1209 1.02084 14.738C0.637955 14.3551 0.422852 13.8358 0.422852 13.2944V3.08604C0.422852 2.54455 0.637955 2.02525 1.02084 1.64236C1.40373 1.25948 1.92303 1.04437 2.46452 1.04437H14.7145Z",stroke:t,strokeWidth:"0.857499",strokeLinecap:"round",strokeLinejoin:"round"}),x.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.58849 9.21104C9.09891 9.21104 9.60932 8.70062 9.60932 8.1902C9.60932 7.67979 9.09891 7.16937 8.58849 7.16937C8.07807 7.16937 7.56868 7.67979 7.56868 8.1902C7.56868 8.70062 8.07807 9.21104 8.58849 9.21104ZM4.50516 9.21104C5.01558 9.21104 5.52599 8.70062 5.52599 8.1902C5.52599 7.67979 5.01558 7.16937 4.50516 7.16937C3.99475 7.16937 3.48535 7.67979 3.48535 8.1902C3.48535 8.70062 3.99475 9.21104 4.50516 9.21104ZM12.6718 9.21104C13.1822 9.21104 13.6926 8.70062 13.6926 8.1902C13.6926 7.67979 13.1822 7.16937 12.6718 7.16937C12.1614 7.16937 11.652 7.67979 11.652 8.1902C11.652 8.70062 12.1614 9.21104 12.6718 9.21104Z",fill:t})]});function EW({color:t="black",...e}){return x.jsx("svg",{width:"19",height:"18",viewBox:"0 0 19 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:x.jsx("path",{d:"M14.463 13.865C14.9423 13.865 15.4019 14.0554 15.7408 14.3943C16.0797 14.7332 16.2701 15.1929 16.2701 15.6722C16.2701 16.1515 16.0797 16.6111 15.7408 16.95C15.4019 17.289 14.9423 17.4794 14.463 17.4794C13.9837 17.4794 13.524 17.289 13.1851 16.95C12.8462 16.6111 12.6558 16.1515 12.6558 15.6722C12.6558 15.1929 12.8462 14.7332 13.1851 14.3943C13.524 14.0554 13.9837 13.865 14.463 13.865ZM14.463 14.7686C14.2233 14.7686 13.9935 14.8638 13.824 15.0332C13.6546 15.2027 13.5594 15.4325 13.5594 15.6722C13.5594 15.9118 13.6546 16.1417 13.824 16.3111C13.9935 16.4806 14.2233 16.5758 14.463 16.5758C14.7026 16.5758 14.9324 16.4806 15.1019 16.3111C15.2714 16.1417 15.3666 15.9118 15.3666 15.6722C15.3666 15.4325 15.2714 15.2027 15.1019 15.0332C14.9324 14.8638 14.7026 14.7686 14.463 14.7686ZM6.3307 13.865C6.80999 13.865 7.26965 14.0554 7.60856 14.3943C7.94747 14.7332 8.13787 15.1929 8.13787 15.6722C8.13787 16.1515 7.94747 16.6111 7.60856 16.95C7.26965 17.289 6.80999 17.4794 6.3307 17.4794C5.8514 17.4794 5.39174 17.289 5.05283 16.95C4.71392 16.6111 4.52352 16.1515 4.52352 15.6722C4.52352 15.1929 4.71392 14.7332 5.05283 14.3943C5.39174 14.0554 5.8514 13.865 6.3307 13.865ZM6.3307 14.7686C6.09105 14.7686 5.86122 14.8638 5.69176 15.0332C5.52231 15.2027 5.42711 15.4325 5.42711 15.6722C5.42711 15.9118 5.52231 16.1417 5.69176 16.3111C5.86122 16.4806 6.09105 16.5758 6.3307 16.5758C6.57034 16.5758 6.80017 16.4806 6.96963 16.3111C7.13908 16.1417 7.23428 15.9118 7.23428 15.6722C7.23428 15.4325 7.13908 15.2027 6.96963 15.0332C6.80017 14.8638 6.57034 14.7686 6.3307 14.7686ZM16.2701 3.02198H3.86391L6.16805 8.44349H13.5594C13.8576 8.44349 14.1196 8.29892 14.2823 8.08206L16.993 4.46771C17.1105 4.3141 17.1737 4.12435 17.1737 3.92556C17.1737 3.68592 17.0785 3.45609 16.9091 3.28663C16.7396 3.11718 16.5098 3.02198 16.2701 3.02198ZM13.5594 9.34708H6.21323L5.51747 10.7567L5.42711 11.1543C5.42711 11.3939 5.52231 11.6237 5.69176 11.7932C5.86122 11.9626 6.09105 12.0578 6.3307 12.0578H16.2701V12.9614H6.3307C5.8514 12.9614 5.39174 12.771 5.05283 12.4321C4.71392 12.0932 4.52352 11.6335 4.52352 11.1543C4.52326 10.8477 4.60099 10.546 4.74942 10.2778L5.4 8.9495L2.11998 1.2148H0.90918V0.311218H2.71635L3.4844 2.11839H16.2701C16.7494 2.11839 17.2091 2.30879 17.548 2.6477C17.8869 2.98661 18.0773 3.44627 18.0773 3.92556C18.0773 4.37736 17.9237 4.75686 17.6707 5.06408L15.0413 8.57903C14.716 9.03986 14.1738 9.34708 13.5594 9.34708Z",fill:t})})}function SW({color:t="black",...e}){return x.jsx("svg",{width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:x.jsx("path",{d:"M4.1359 15.3442C4.9803 14.7362 5.87636 14.2557 6.82408 13.9027C7.77114 13.5491 8.797 13.3722 9.90168 13.3722C11.0064 13.3722 12.0322 13.5491 12.9793 13.9027C13.9263 14.2564 14.8224 14.7365 15.6675 15.3432C16.3231 14.6643 16.8506 13.863 17.25 12.9391C17.6493 12.0139 17.849 10.9993 17.849 9.89528C17.849 7.6932 17.0751 5.81796 15.5274 4.26956C13.9797 2.72115 12.1044 1.94728 9.90168 1.94795C7.69895 1.94861 5.82371 2.72281 4.27597 4.27055C2.72823 5.81829 1.95435 7.6932 1.95435 9.89528C1.95435 10.9993 2.15403 12.0139 2.55339 12.9391C2.95274 13.8636 3.48024 14.665 4.1359 15.3432M9.90268 10.392C9.06556 10.392 8.35924 10.1046 7.78372 9.5297C7.2082 8.95484 6.92077 8.24918 6.92144 7.41273C6.9221 6.57627 7.20953 5.86995 7.78372 5.29377C8.35791 4.71759 9.0639 4.43016 9.90168 4.43149C10.7395 4.43281 11.4455 4.72024 12.0196 5.29377C12.5938 5.8673 12.8813 6.57329 12.8819 7.41173C12.8826 8.25018 12.5952 8.95617 12.0196 9.5297C11.4441 10.1032 10.7385 10.3907 9.90268 10.392ZM9.90168 18.836C8.65461 18.836 7.48735 18.6039 6.39989 18.1396C5.31243 17.6754 4.36604 17.0409 3.56071 16.2363C2.75538 15.4316 2.12092 14.4852 1.65732 13.3971C1.19373 12.3089 0.961601 11.1417 0.960939 9.89528C0.960277 8.64887 1.1924 7.4816 1.65732 6.39348C2.12224 5.30536 2.7567 4.35897 3.56071 3.5543C4.36604 2.74963 5.31243 2.11517 6.39989 1.65091C7.48735 1.18666 8.65461 0.954529 9.90168 0.954529C11.1488 0.954529 12.316 1.18666 13.4035 1.65091C14.4909 2.11517 15.4373 2.74963 16.2427 3.5543C17.048 4.35897 17.6824 5.30536 18.146 6.39348C18.6096 7.4816 18.8418 8.64887 18.8424 9.89528C18.8431 11.1417 18.611 12.3089 18.146 13.3971C17.6811 14.4852 17.0467 15.4316 16.2427 16.2363C15.4373 17.0409 14.4909 17.6754 13.4035 18.1396C12.316 18.6039 11.1488 18.836 9.90168 18.836ZM9.90168 17.8426C10.8176 17.8426 11.7186 17.6823 12.6048 17.3618C13.4909 17.0419 14.2568 16.6035 14.9025 16.0465C14.2575 15.5279 13.5108 15.1183 12.6624 14.8177C11.814 14.517 10.8938 14.3663 9.90168 14.3656C8.90959 14.365 7.98605 14.5123 7.13105 14.8077C6.27605 15.1031 5.53231 15.516 4.89983 16.0465C5.54555 16.6028 6.31181 17.0413 7.1986 17.3618C8.08539 17.6823 8.98642 17.8426 9.90168 17.8426ZM9.90168 9.39857C10.4593 9.39857 10.9299 9.20684 11.3133 8.82338C11.6968 8.43992 11.8885 7.96937 11.8885 7.41173C11.8885 6.8541 11.6968 6.38355 11.3133 6.00009C10.9299 5.61663 10.4593 5.4249 9.90168 5.4249C9.34405 5.4249 8.8735 5.61663 8.49004 6.00009C8.10658 6.38355 7.91485 6.8541 7.91485 7.41173C7.91485 7.96937 8.10658 8.43992 8.49004 8.82338C8.8735 9.20684 9.34405 9.39857 9.90168 9.39857Z",fill:t})})}function kW({color:t="black",...e}){return x.jsxs("svg",{width:"18",height:"20",viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[x.jsx("path",{d:"M5.20469 12.8046H2.40469C1.98034 12.8046 1.57338 12.9731 1.27332 13.2732C0.973259 13.5733 0.804688 13.9802 0.804688 14.4046V17.2046C0.804688 17.6289 0.973259 18.0359 1.27332 18.3359C1.57338 18.636 1.98034 18.8046 2.40469 18.8046H5.20469C5.62903 18.8046 6.036 18.636 6.33606 18.3359C6.63612 18.0359 6.80469 17.6289 6.80469 17.2046V14.4046C6.80469 13.9802 6.63612 13.5733 6.33606 13.2732C6.036 12.9731 5.62903 12.8046 5.20469 12.8046ZM15.2047 0.804565H12.4047C11.9803 0.804565 11.5734 0.973136 11.2733 1.27319C10.9733 1.57325 10.8047 1.98022 10.8047 2.40457V5.20457C10.8047 5.62891 10.9733 6.03588 11.2733 6.33594C11.5734 6.63599 11.9803 6.80457 12.4047 6.80457H15.2047C15.629 6.80457 16.036 6.63599 16.3361 6.33594C16.6361 6.03588 16.8047 5.62891 16.8047 5.20457V2.40457C16.8047 1.98022 16.6361 1.57325 16.3361 1.27319C16.036 0.973136 15.629 0.804565 15.2047 0.804565Z",fill:t,fillOpacity:"0.16"}),x.jsx("path",{d:"M5.20469 0.804565H2.40469C1.98034 0.804565 1.57338 0.973136 1.27332 1.27319C0.973259 1.57325 0.804688 1.98022 0.804688 2.40457V7.20457C0.804688 7.41468 0.846073 7.62274 0.92648 7.81686C1.00689 8.01098 1.12474 8.18736 1.27332 8.33594C1.42189 8.48451 1.59827 8.60237 1.79239 8.68277C1.98652 8.76318 2.19457 8.80457 2.40469 8.80457H5.20469C5.4148 8.80457 5.62286 8.76318 5.81698 8.68277C6.0111 8.60237 6.18748 8.48451 6.33606 8.33594C6.48463 8.18736 6.60249 8.01098 6.68289 7.81686C6.7633 7.62274 6.80469 7.41468 6.80469 7.20457V2.40457C6.80469 1.98022 6.63612 1.57325 6.33606 1.27319C6.036 0.973136 5.62903 0.804565 5.20469 0.804565ZM5.20469 12.8046H2.40469C1.98034 12.8046 1.57338 12.9731 1.27332 13.2732C0.973259 13.5733 0.804688 13.9802 0.804688 14.4046V17.2046C0.804688 17.6289 0.973259 18.0359 1.27332 18.3359C1.57338 18.636 1.98034 18.8046 2.40469 18.8046H5.20469C5.62903 18.8046 6.036 18.636 6.33606 18.3359C6.63612 18.0359 6.80469 17.6289 6.80469 17.2046V14.4046C6.80469 13.9802 6.63612 13.5733 6.33606 13.2732C6.036 12.9731 5.62903 12.8046 5.20469 12.8046ZM15.2047 0.804565H12.4047C11.9803 0.804565 11.5734 0.973136 11.2733 1.27319C10.9733 1.57325 10.8047 1.98022 10.8047 2.40457V5.20457C10.8047 5.62891 10.9733 6.03588 11.2733 6.33594C11.5734 6.63599 11.9803 6.80457 12.4047 6.80457H15.2047C15.629 6.80457 16.036 6.63599 16.3361 6.33594C16.6361 6.03588 16.8047 5.62891 16.8047 5.20457V2.40457C16.8047 1.98022 16.6361 1.57325 16.3361 1.27319C16.036 0.973136 15.629 0.804565 15.2047 0.804565ZM15.2047 10.8046H12.4047C11.9803 10.8046 11.5734 10.9731 11.2733 11.2732C10.9733 11.5733 10.8047 11.9802 10.8047 12.4046V17.2046C10.8047 17.6289 10.9733 18.0359 11.2733 18.3359C11.5734 18.636 11.9803 18.8046 12.4047 18.8046H15.2047C15.629 18.8046 16.036 18.636 16.3361 18.3359C16.6361 18.0359 16.8047 17.6289 16.8047 17.2046V12.4046C16.8047 11.9802 16.6361 11.5733 16.3361 11.2732C16.036 10.9731 15.629 10.8046 15.2047 10.8046Z",stroke:t,strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinejoin:"round"})]})}async function _7(t){t&&await Vz(t)}async function TW(t){await jz(q0,t)}const b7=H.createContext(),vi=()=>H.useContext(b7);function AW({children:t}){const[e,r]=H.useState(null),[n,i]=H.useState(null),[s,a]=H.useState(!0);H.useEffect(()=>Hz(q0,async f=>{if(r(f),f){const d=kr(St,"users",f.uid),m=await Ta(d);m.exists()&&i(m.data())}else i(null);a(!1)}),[]);const o=(f,d)=>Bz(q0,f,d),l=async({email:f,password:d,displayName:m,role:p,address:_,lat:w,lon:b})=>{const{user:k}=await MN(q0,f,d);m&&await jN(k,{displayName:m});const F={uid:k.uid,email:f,displayName:m,role:p};return _&&(F.address=_),w&&(F.lat=w),b&&(F.lon=b),await Ip(kr(St,"users",k.uid),F),p==="pharmacy"&&await Ip(kr(St,"pharmacies",k.uid),{id:k.uid,name:m||"Pharmacy",email:f,address:_||"",etaMins:30,phone:""}),await _7(k),{user:k,verificationSent:!0}},c=()=>Wz(q0);return x.jsx(b7.Provider,{value:{user:e,profile:n,loading:s,signIn:o,signUp:l,logout:c},children:t})}function CW({tab:t,setTab:e,cartCount:r=0,unreadMessages:n=0,ordersCount:i=0}){const{profile:s}=vi(),a=s&&s.role==="pharmacy",o=[a?{key:"/",label:"Dashboard",icon:kW}:{key:"/",label:"Home",icon:wW},{key:"/orders",label:"Orders",icon:_W},{key:"/messages",label:"Messages",icon:bW},...a?[]:[{key:"/cart",label:"Cart",icon:EW}],{key:"/profile",label:"Profile",icon:SW}],l=n>99?"99+":String(n||"");H.useEffect(()=>{try{console.debug("[BottomNav] props",{tab:t,cartCount:r,unreadMessages:n,ordersCount:i,displayUnread:l,profile:s})}catch(f){console.error("[BottomNav] debug log failed",f)}},[t,r,n,i,l,s]);const c=typeof window<"u"&&new URLSearchParams(window.location.search).get("debugBottomNav")==="1";return x.jsxs("div",{className:"fixed bottom-3 left-0 right-0 flex justify-center z-50","aria-hidden":!1,children:[x.jsx("nav",{role:"navigation","aria-label":"Bottom navigation",className:"liquid-bottom-nav mx-auto max-w-md px-6 py-3",children:x.jsx("div",{className:"flex items-center justify-center gap-[-1] px-2",children:o.map(f=>{const d=t===f.key,m=f.icon,p={color:d?"#36A5FF":"black"},_=f.key==="/cart",w=f.key==="/messages",b=f.key==="/orders";return x.jsx("div",{className:"flex-none",children:x.jsxs("button",{onClick:()=>e(f.key),"aria-label":f.label,"aria-pressed":d,className:`relative flex flex-col items-center text-xs min-w-[64px] md:min-w-[72px] px-3 py-2 focus:outline-none ${d?"text-sky-600":"text-zinc-500"}`,children:[d&&x.jsx("div",{className:"absolute top-1 w-12 h-9 bg-sky-400 rounded-[10px] opacity-10"}),x.jsx(m,{...p,className:"h-6 w-6 mb-1 relative z-10"}),_&&r>0&&x.jsx("span",{className:"absolute -top-0.5 -right-0 z-50 bg-sky-500 text-white text-[10px] min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1 font-bold border-2 border-white shadow",children:r}),b&&a&&i>0&&x.jsx("span",{className:"absolute -top-0.5 -right-0 z-50 bg-orange-500 text-white text-[10px] min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1 font-bold border-2 border-white shadow",children:i>99?"99+":i}),w&&n>0&&(()=>{try{return x.jsx("span",{role:"status","aria-live":"polite","aria-atomic":"true",className:"absolute top-0 right-5 z-50 bg-sky-500 text-white text-[10px] min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1 font-bold border-2 border-white shadow",children:l})}catch(k){console.error("[BottomNav] Error rendering messages badge",k,{unreadMessages:n})}})(),x.jsx("span",{className:"font-medium truncate max-w-[72px] block text-center",children:f.label})]})},f.key)})})}),c&&x.jsxs("div",{className:"fixed bottom-20 right-4 z-60 bg-black/80 text-white text-xs px-3 py-1 rounded",children:["UnreadRaw: ",String(n)]})]})}const IW="modulepreload",NW=function(t){return"/"+t},VS={},rp=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){let l=function(c){return Promise.all(c.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");i=l(r.map(c=>{if(c=NW(c),c in VS)return;VS[c]=!0;const f=c.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":IW,f||(m.as="script"),m.crossOrigin="",m.href=c,o&&m.setAttribute("nonce",o),document.head.appendChild(m),f)return new Promise((p,_)=>{m.addEventListener("load",p),m.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function PW(t){return x.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:x.jsx("path",{d:"M6.66683 0C8.34653 0 9.95744 0.66726 11.1452 1.85499C12.3329 3.04272 13.0002 4.65363 13.0002 6.33333C13.0002 8.01304 12.3329 9.62395 11.1452 10.8117C9.95744 11.9994 8.34653 12.6667 6.66683 12.6667C4.98712 12.6667 3.37622 11.9994 2.18849 10.8117C1.00076 9.62395 0.333496 8.01304 0.333496 6.33333C0.333496 4.65363 1.00076 3.04272 2.18849 1.85499C3.37622 0.66726 4.98712 0 6.66683 0ZM6.66683 0.666667C5.16394 0.666667 3.7226 1.26369 2.65989 2.3264C1.59719 3.3891 1.00016 4.83044 1.00016 6.33333C1.00016 7.83623 1.59719 9.27757 2.65989 10.3403C3.7226 11.403 5.16394 12 6.66683 12C7.41099 12 8.14786 11.8534 8.83537 11.5687C9.52288 11.2839 10.1476 10.8665 10.6738 10.3403C11.2 9.81407 11.6174 9.18939 11.9021 8.50187C12.1869 7.81436 12.3335 7.07749 12.3335 6.33333C12.3335 4.83044 11.7365 3.3891 10.6738 2.3264C9.61106 1.26369 8.16972 0.666667 6.66683 0.666667ZM6.3335 2.66667H7.00016V6.28L10.1335 8.08667L9.80016 8.66667L6.3335 6.66667V2.66667Z",fill:"#848484"})})}/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),E7=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LW=H.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:a,...o},l)=>H.createElement("svg",{ref:l,...FW,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:E7("lucide",i),...o},[...a.map(([c,f])=>H.createElement(c,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=(t,e)=>{const r=H.forwardRef(({className:n,...i},s)=>H.createElement(LW,{ref:s,iconNode:e,className:E7(`lucide-${RW(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=wo("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=wo("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DW=wo("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OW=wo("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=wo("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=wo("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=wo("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=wo("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MW=wo("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jW=wo("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BW=wo("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=wo("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VW=wo("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=wo("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UW=wo("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);function zW({className:t="",children:e,...r}){return x.jsx("div",{className:`rounded-3xl border border-zinc-200 bg-white ${t}`,...r,children:e})}function uh({name:t,image:e,category:r,size:n=64,className:i="",alt:s,style:a={},imgClassName:o="",roundedClass:l="rounded-xl"}){const[c,f]=H.useState(!1),d=(r||"")?.toString().toLowerCase().trim();let m=null;d&&(d.includes("prescription")?m="PrescriptionDrugs.svg":d.includes("over")?m="Over-the-counter Icon.svg":d.includes("syrup")?m="Syrup.svg":d.includes("therapeutic")?m="Therapeutic.svg":d.includes("control")?m="ControlledSubstances.svg":d.includes("target")&&(m="TargetSystem.svg"));const p="GeneralPill.svg",_=m||p,w={width:n,height:n,...a};return e&&!c?x.jsx("img",{src:e,alt:s||t||"Product image",className:`${l} object-cover ${o}`.trim(),style:w,onError:()=>f(!0)}):x.jsx("div",{className:`${i}`,style:w,children:x.jsx("img",{src:`/${encodeURIComponent(_)}`,alt:s||(r?`${r} icon`:"product icon"),className:`${l} object-contain w-full h-full`,onError:b=>{if(_!==p){b.currentTarget.src=`/${encodeURIComponent(p)}`;return}}})})}function Nw({product:t,vendorName:e,vendorDistanceKm:r,vendorEtaMins:n,onOpen:i,onAdd:s,cardWidth:a="172px",cardHeight:o="199px",nameSize:l="15.54px",nameWeight:c="medium",priceSize:f="14.43px",priceColor:d="#BDBDBD",priceWeight:m="medium",addColor:p="#36A5FF",borderRadius:_}){const[w,b]=H.useState(!1),k=t?.image&&!w;return x.jsxs(zW,{className:"p-3 cursor-pointer relative flex flex-col justify-between overflow-hidden",onClick:i,style:{width:a,height:o,borderRadius:_||"10px"},children:[x.jsx("div",{className:"overflow-hidden flex items-center justify-center bg-white",style:{height:`calc(${o} * 0.6)`,borderRadius:_||"3px"},children:k?x.jsx("img",{src:t.image,alt:t.name||"product image",className:"object-contain h-full w-full",onError:()=>b(!0),style:{maxWidth:"100%"}}):x.jsx("div",{className:"flex items-center justify-center w-full h-full",style:{padding:8},children:x.jsx(uh,{name:t.name,image:t.image,category:t.category,size:Math.min(30,Math.max(48,parseInt(o,10)/2))})})}),x.jsxs("div",{className:"mt-1 text-xs text-zinc-500 font-poppins font-light truncate flex items-center gap-2",style:{fontSize:"10px",maxWidth:"100%"},children:[x.jsx("span",{className:"truncate",children:e}),(typeof r=="number"||typeof n=="number")&&x.jsxs("span",{className:"text-[9px] text-zinc-400 whitespace-nowrap",children:[typeof r=="number"?`${r.toFixed(1)} km`:"",typeof r=="number"&&typeof n=="number"?"  ":"",typeof n=="number"?`${n} min`:""]})]}),x.jsx("div",{className:"mt-1 font-poppins",style:{fontSize:l,fontWeight:c,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:t.name,children:t.name}),x.jsxs("div",{className:"font-poppins",style:{fontSize:f,color:d,fontWeight:m,overflow:"hidden"},children:["",Number(t.price).toLocaleString()]}),x.jsx("button",{onClick:F=>{F.stopPropagation(),s()},className:"absolute bottom-3 right-3 h-7 w-7 flex items-center justify-center border border-solid",style:{borderColor:p,borderRadius:_||"3px",background:"transparent"},children:x.jsx(VW,{color:p,size:18})})]})}function Z2({className:t="",style:e={},lines:r=3,desktopAlign:n="center"}){const i=n==="left"?"lg:justify-start lg:pl-12":"lg:justify-center";return x.jsxs("div",{className:`w-screen h-screen flex items-center justify-center ${i} bg-white ${t}`,style:e,role:"status","aria-live":"polite",children:[x.jsxs("picture",{children:[x.jsx("source",{media:"(min-width: 1024px)",srcSet:"/DesktopLoading.svg"}),x.jsx("img",{src:"/Loading.svg",alt:"Loading",className:"w-full h-full object-contain lg:object-cover lg:w-screen lg:h-screen"})]}),x.jsx("span",{className:"sr-only",children:"Loading"})]})}function yb(){const[t,e]=H.useState(null),[r,n]=H.useState("Fetching location..."),[i,s]=H.useState(null),[a,o]=H.useState(!0);return H.useEffect(()=>{if(!navigator.geolocation){n("Location not supported"),s("Geolocation is not supported by this browser"),o(!1);return}const l={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5};navigator.geolocation.getCurrentPosition(async c=>{const{latitude:f,longitude:d}=c.coords;e({latitude:f,longitude:d}),s(null);try{const p=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${f}&lon=${d}`,{timeout:5e3})).json();n(p.display_name||"Location unavailable")}catch(m){console.warn("Failed to fetch address:",m),n("Location detected")}finally{o(!1)}},c=>{switch(console.warn("Geolocation error:",c),s(c.message),o(!1),c.code){case c.PERMISSION_DENIED:n("Location permission denied");break;case c.POSITION_UNAVAILABLE:n("Location unavailable");break;case c.TIMEOUT:n("Location request timeout");break;default:n("Location error occurred");break}},l)},[]),{userCoords:t,location:r,locationError:i,isLoading:a}}function k7(t){if(!t)return null;if(t.coordinates&&typeof t.coordinates=="object"){if(t.coordinates.latitude&&t.coordinates.longitude)return{latitude:Number(t.coordinates.latitude),longitude:Number(t.coordinates.longitude)};if(t.coordinates.lat&&t.coordinates.lng)return{latitude:Number(t.coordinates.lat),longitude:Number(t.coordinates.lng)};if(t.coordinates.lat&&t.coordinates.lon)return{latitude:Number(t.coordinates.lat),longitude:Number(t.coordinates.lon)}}if(t.latitude&&t.longitude)return{latitude:Number(t.latitude),longitude:Number(t.longitude)};if(t.lat&&t.lng)return{latitude:Number(t.lat),longitude:Number(t.lng)};if(t.lat&&t.lon)return{latitude:Number(t.lat),longitude:Number(t.lon)};if(t.location&&typeof t.location=="object"){if(t.location.latitude&&t.location.longitude)return{latitude:Number(t.location.latitude),longitude:Number(t.location.longitude)};if(t.location.lat&&t.location.lng)return{latitude:Number(t.location.lat),longitude:Number(t.location.lng)}}if(t.coords&&typeof t.coords=="object"){if(t.coords.latitude&&t.coords.longitude)return{latitude:Number(t.coords.latitude),longitude:Number(t.coords.longitude)};if(t.coords.lat&&t.coords.lng)return{latitude:Number(t.coords.lat),longitude:Number(t.coords.lng)}}return null}function T7(t,e,r,n){const s=(r-t)*Math.PI/180,a=(n-e)*Math.PI/180,o=Math.sin(s/2)**2+Math.cos(t*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(a/2)**2;return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}function A7(t,e="driving"){if(!Number.isFinite(t)||t<=0)return null;const r={walking:5,cycling:15,driving:30},n=r[e]||r.driving,i=t/n,s=Math.round(i*60);let a;if(s<1)a="< 1 min";else if(s<60)a=`${s} min${s!==1?"s":""}`;else{const o=Math.floor(s/60),l=s%60;l===0?a=`${o} hr${o!==1?"s":""}`:a=`${o}h ${l}m`}return{minutes:s,formatted:a,distance:t,mode:e}}function $W(t,e,r="driving"){if(!t||t.length===0||!e)return null;let n=null,i=1/0,s=null;return t.forEach(a=>{const o=k7(a);if(o){const l=T7(e.latitude,e.longitude,o.latitude,o.longitude);l<i&&(i=l,n=a,s=A7(l,r))}}),n?{pharmacy:n,eta:s,distance:i}:null}function C7(t,e,r="driving"){const n=k7(t);if(!n||!e)return null;const i=T7(e.latitude,e.longitude,n.latitude,n.longitude);return A7(i,r)}function HW(){const[t,e]=H.useState([]),[r,n]=H.useState({}),[i,s]=H.useState([]),[a,o]=H.useState(!1),[l,c]=H.useState(null),[f,d]=H.useState(!1),[m,p]=H.useState(""),{user:_}=vi(),w=ts(),{userCoords:b,location:k}=yb(),[F,N]=H.useState(null),[B,X]=H.useState(null),G=H.useRef(null),[P,A]=H.useState(!1),[T,O]=H.useState(!1),[I,D]=H.useState("All"),[M,ie]=H.useState([]),be=H.useRef(null),[Ne,we]=H.useState(0),le=H.useRef([]),J=K=>Te=>{le.current[K]=Te||null},[ue,ee]=H.useState(1),[C,U]=H.useState(1),W=H.useMemo(()=>{const K=m.trim().toLowerCase();return K&&l?.products&&Array.isArray(l.products)?l.products:K?t.filter(Te=>{const Ue=(Te.name||"").toLowerCase(),ut=(Te.category||"").toLowerCase(),pt=Array.isArray(Te.tags)?Te.tags.join(" ").toLowerCase():"",xt=Te.vendorId?r[Te.vendorId]||{}:{},yt=(xt.name||"").toLowerCase(),ht=(xt.location||"").toLowerCase(),Mt=[Te.price,Te.mrp,Te.cost,Te.listPrice].map(Nt=>Nt==null?"":String(Nt)).join(" ").toLowerCase(),Lt=Ue.includes(K)||ut.includes(K)||pt.includes(K)||yt.includes(K)||ht.includes(K)||Mt.includes(K),Ot=K.replace(/[^0-9.]/g,""),wt=Ot&&(Mt.includes(Ot)||Te.price&&String(Te.price).includes(Ot));return Lt||!!wt}):t},[t,m,I,r,l]),Y=H.useMemo(()=>{const K=m.trim().toLowerCase();return K?l?.pharmacies&&Array.isArray(l.pharmacies)?l.pharmacies.slice(0,6):i.filter(Te=>{const Ue=(Te.name||Te.displayName||"").toLowerCase(),ut=(Te.address||Te.city||Te.location||"").toLowerCase();return Ue.includes(K)||ut.includes(K)}).slice(0,6):[]},[i,m,l]);H.useEffect(()=>Zv(e),[]),H.useEffect(()=>{async function K(){if(!b)return;let Te=i;if(Te.length===0&&(Te=await a5(),!Te||Te.length===0))return;const Ue=$W(Te,b,"driving");Ue?(N(Ue.pharmacy),X(Ue.eta)):(N(null),X(null))}K()},[b,i]),H.useEffect(()=>{if(!G.current)return;let K,Te;const Ue=()=>{A(!0),clearTimeout(Te),Te=setTimeout(()=>A(!1),2e3)},ut=G.current;return ut.addEventListener("scroll",Ue),K=setInterval(()=>{!P&&ut&&(ut.scrollBy({left:120,behavior:"smooth"}),ut.scrollLeft+ut.offsetWidth>=ut.scrollWidth-5&&ut.scrollTo({left:0,behavior:"smooth"}))},2500),()=>{clearInterval(K),ut.removeEventListener("scroll",Ue),Te&&clearTimeout(Te)}},[P,W.length]),H.useEffect(()=>{async function K(){const Te=Array.from(new Set(t.map(ut=>ut.vendorId).filter(Boolean))),Ue={};await Promise.all(Te.map(async ut=>{try{const pt=await Ta(kr(St,"pharmacies",ut));if(pt.exists()){const xt=pt.data()||{};Ue[ut]={name:xt.name||"Pharmacy",location:xt.address||xt.city||xt.location||"",coords:xt.coordinates||null}}}catch{}})),n(Ue)}t.length&&K()},[t]),H.useEffect(()=>{let K=!0;return(async()=>{try{const Te=await a5();if(!K)return;s(Array.isArray(Te)?Te:[])}catch{}})(),()=>{K=!1}},[]),H.useEffect(()=>{const K=m.trim();if(!K){c(null),d(!1);return}const Te=new AbortController,Ue=setTimeout(async()=>{d(!0);try{const ut=await fetch(`/.netlify/functions/search?q=${encodeURIComponent(K)}`,{signal:Te.signal,headers:{Accept:"application/json"}});if(!ut.ok)throw new Error("server search failed");const pt=await ut.json();c(pt||null)}catch{c(null)}finally{d(!1)}},300);return()=>{Te.abort(),clearTimeout(Ue)}},[m]),H.useEffect(()=>{const K=Ai(vr(St,"infoCards"),Te=>{ie(Te.docs.map(Ue=>({id:Ue.id,...Ue.data()})))});return()=>K()},[]);const ae=H.useMemo(()=>[...W].filter(K=>K.stock===void 0||K.stock>0).sort((K,Te)=>(Te.viewCount||0)+(Te.sold||0)-((K.viewCount||0)+(K.sold||0))),[W]),pe=H.useMemo(()=>[...t].filter(K=>K.createdAt).sort((K,Te)=>(Te.createdAt?.seconds||0)-(K.createdAt?.seconds||0)).slice(0,12),[t]),he=H.useMemo(()=>[...t].filter(K=>K.createdAt).sort((K,Te)=>(Te.createdAt?.seconds||0)-(K.createdAt?.seconds||0)),[t]),xe=30,Ee=Math.max(1,Math.ceil(ae.length/xe)),Fe=ae.slice(0,ue*xe),oe=12,Je=Math.max(1,Math.ceil(he.length/oe)),Re=he.slice(0,C*oe);H.useEffect(()=>ee(1),[ae.length]),H.useEffect(()=>U(1),[he.length]);const fe=K=>{if(!K)return"";const Te=String(K).trim();return/^(https?:)?\/\//i.test(Te)||/^mailto:/i.test(Te)||/^tel:/i.test(Te)||Te.startsWith("/")?Te:`https://${Te}`},ot=K=>K?/^(https?:)?\/\//i.test(K)||/^mailto:/i.test(K)||/^tel:/i.test(K):!1,et=async K=>{w(`/product/${K}`),e(Te=>Te.map(Ue=>Ue.id===K?{...Ue,viewCount:(Ue.viewCount||0)+1}:Ue));try{const{doc:Te,updateDoc:Ue,increment:ut}=await rp(async()=>{const{doc:pt,updateDoc:xt,increment:yt}=await Promise.resolve().then(()=>uN);return{doc:pt,updateDoc:xt,increment:yt}},void 0);await Ue(Te(St,"products",K),{viewCount:ut(1)})}catch{}};H.useEffect(()=>{const K=be.current;if(!K)return;let Te=0;const Ue=()=>{cancelAnimationFrame(Te),Te=requestAnimationFrame(()=>{const ut=K.scrollLeft+K.clientWidth/2;let pt=0,xt=1/0;le.current.forEach((yt,ht)=>{if(!yt)return;const Mt=yt.getBoundingClientRect(),Lt=K.getBoundingClientRect(),Ot=Mt.left-Lt.left+Mt.width/2+K.scrollLeft,wt=Math.abs(Ot-ut);wt<xt&&(xt=wt,pt=ht)}),we(pt)})};return K.addEventListener("scroll",Ue,{passive:!0}),Ue(),()=>{K.removeEventListener("scroll",Ue),cancelAnimationFrame(Te)}},[M.length]),H.useEffect(()=>{const K=be.current;if(!K||le.current.length===0||window.matchMedia?.("(prefers-reduced-motion: reduce)").matches)return;let Te=!1,Ue;const ut=()=>{Te=!0,clearTimeout(Ue),Ue=setTimeout(()=>{Te=!1},1800)};K.addEventListener("pointerdown",ut),K.addEventListener("wheel",ut,{passive:!0}),K.addEventListener("touchstart",ut,{passive:!0});const pt=setInterval(()=>{if(Te)return;const xt=(Ne+1)%le.current.length,yt=le.current[xt];if(yt&&K){const ht=yt.offsetLeft,Mt=Math.max(0,Math.round(ht-(K.clientWidth-yt.clientWidth)/2));K.scrollTo({left:Mt,behavior:"smooth"})}},3e3);return()=>{clearInterval(pt),K.removeEventListener("pointerdown",ut),K.removeEventListener("wheel",ut),K.removeEventListener("touchstart",ut),clearTimeout(Ue)}},[Ne,M.length]),_&&_.role;const st={Prescription:"PrescriptionDrugs.svg","Over-the-counter":"Over-the-counter Icon.svg",Syrup:"Syrup.svg",Therapeutic:"Therapeutic.svg",Controlled:"ControlledSubstances.svg","Target System":"TargetSystem.svg"};return t.length?x.jsxs("div",{className:"min-h-screen w-full px-0 pb-28",children:[x.jsx("div",{className:"sticky top-0 z-30 w-full bg-white border-b flex-shrink-0 px-2",children:x.jsx("div",{className:"w-full mx-auto pt-8 pb-4",children:x.jsx("div",{className:"pt-4 pb-2 w-full",children:x.jsxs("div",{className:"w-full mx-auto px-0",children:[x.jsxs("div",{className:"flex justify-between items-center w-full h-[14px] md:h-[14px] lg:h-[20px]",children:[x.jsxs("div",{className:"flex flex-col justify-center",children:[x.jsxs("div",{className:"text-[17px] md:text-[26px] lg:text-[20px] font-regular font-poppins",children:["Hello",_?`, ${_.displayName?.split(" ")[0]||"Friend"}`:""]}),x.jsx("span",{className:"text-zinc-500 text-[10px] md:text-[12px] lg:text-[14px] font-thin font-poppins truncate max-w-xs md:max-w-md lg:max-w-lg",title:k,children:k})]}),x.jsxs("div",{className:"flex flex-col justify-center items-end",children:[x.jsx(PW,{className:"h-3 w-3 md:h-5 md:w-5 lg:h-6 lg:w-6 mb-0.5 mt-0.5"}),x.jsx("span",{className:"text-[10px] md:text-[12px] lg:text-[14px] font-poppins font-thin text-right leading-tight mt-1.5",children:B&&F?`${B.formatted} to ${r[F.vendorId]||"your pharmacy"}`:b?"Calculating ETA...":"Fetching location..."})]})]}),x.jsx("div",{className:"w-full"})]})})})}),x.jsxs("div",{className:"flex-1 overflow-y-auto w-full mx-auto flex flex-col pt-1 pb-28 px-0",children:[x.jsxs("div",{className:"mt-6 flex items-center gap-3 border-b border-zinc-300 pb-2",children:[x.jsx(pd,{className:"h-5 w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-zinc-400"}),x.jsx("input",{value:m,onChange:K=>{p(K.target.value),o(!0)},placeholder:"Search drugs, pharmacies",className:"w-full outline-none placeholder:text-[12px] md:placeholder:text-[14px] lg:placeholder:text-[16px] placeholder:text-[#888888] placeholder:font-light"})]}),a&&m.trim().length>0&&Y.length>0&&x.jsx("div",{className:"mt-2 left-0 right-0 md:left-6 md:right-6 bg-white rounded-lg shadow-lg divide-y max-h-56 overflow-auto",children:Y.map(K=>x.jsxs("button",{onClick:()=>{p(K.name||K.displayName||""),o(!1);const Te=K.id||K.vendorId;if(Te)try{w(`/vendor/${Te}`)}catch{window.location.href=`/vendor/${Te}`}},onKeyDown:Te=>{if(Te.key==="Enter"||Te.key===" "){Te.preventDefault();const Ue=K.id||K.vendorId;Ue&&w(`/vendor/${Ue}`)}},className:"w-full text-left px-4 py-3 hover:bg-zinc-50",role:"option",tabIndex:0,children:[x.jsx("div",{className:"font-medium text-sm",children:K.name||K.displayName}),x.jsx("div",{className:"text-[12px] text-zinc-500",children:K.address||K.city||K.location||""})]},K.id||K.vendorId||K.name))}),x.jsx("div",{className:"mt-3 mb-2 w-full overflow-x-auto scrollbar-hide",children:x.jsx("div",{className:"flex gap-3 min-w-max",children:["All","Prescription","Over-the-counter","Syrup","Therapeutic","Controlled","Target System"].map(K=>{const Te=st[K];return x.jsx("button",{className:`flex items-center px-4 py-2 md:px-6 md:py-2.5 lg:px-8 lg:py-3 rounded-full bg-zinc-100 text-zinc-700 text-[9px] md:text-[12px] lg:text-[14px] font-poppins font-light whitespace-nowrap border border-zinc-200 hover:bg-sky-50 transition ${I===K?"bg-sky-100 border-sky-400 text-sky-700":""}`,onClick:()=>D(K),children:Te?x.jsxs(x.Fragment,{children:[x.jsx("img",{src:`/${encodeURIComponent(Te)}`,alt:`${K} icon`,className:"h-4 w-4 md:h-5 md:w-5 mr-2 object-contain flex-shrink-0"}),x.jsx("span",{className:"truncate",children:K})]}):x.jsx("span",{className:"truncate",children:K})},K)})})}),M.length>0&&x.jsx("div",{className:"w-full mt-6 mb-4 overflow-x-auto scrollbar-hide snap-x snap-mandatory scroll-smooth",ref:be,role:"region","aria-label":"Announcements",style:{height:140},children:x.jsx("div",{className:"flex gap-4 md:gap-6 min-w-max h-full",children:M.map((K,Te)=>{const Ue=K.bgColor||"#3BA3FF",ut=K.headerColor||"#ffffff",pt=K.previewColor||(K.headerColor?K.headerColor+"cc":"#ffffffcc"),xt=K.linkColor||K.linkTextColor||"#ffffff",yt=K.headerFontSize||20,ht=K.previewFontSize||13,Mt=K.linkTextFontSize||K.linkFontSize||13;return x.jsxs("div",{ref:J(Te),className:"relative flex-shrink-0 snap-center rounded-2xl overflow-hidden",style:{width:"90vw",maxWidth:700,minWidth:260,height:"100%",background:Ue,position:"relative"},children:[K.fullImage&&x.jsx("img",{src:K.fullImage,alt:K.header||"Info",className:"w-full h-full object-cover",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover"}}),K.image&&!K.fullImage&&x.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center justify-end pointer-events-none",children:x.jsx("img",{src:K.image,alt:"",className:"object-cover",style:{height:"100%",maxWidth:"100%",borderRadius:"0 16px 16px 0"}})}),x.jsx("div",{className:"absolute inset-y-0 right-0",style:{width:"55%",background:"linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.06) 60%, rgba(0,0,0,0.10) 100%)",pointerEvents:"none"}}),x.jsx("div",{className:"relative z-10 h-full flex items-center",children:x.jsxs("div",{className:"px-4 md:px-6 py-5 min-w-0 max-w-[65%] md:max-w-[60%] lg:max-w-[60%]",children:[x.jsx("div",{style:{color:ut,fontSize:yt+"px",lineHeight:1,fontWeight:300,letterSpacing:"-0.02em"},children:K.header||""}),K.preview&&x.jsx("div",{style:{marginTop:8,color:pt,fontSize:ht+"px",lineHeight:1.2},children:K.preview}),K.link&&K.linkText&&(()=>{const Lt=fe(K.link),Ot=ot(Lt);return x.jsx("a",{href:Lt,onClick:wt=>{if(!Ot){wt.preventDefault();try{w(Lt)}catch{window.location.href=Lt}}},...Ot?{target:"_blank",rel:"noopener noreferrer"}:{},style:{display:"inline-block",marginTop:12,textDecoration:"underline",color:xt,fontSize:Mt+"px",fontWeight:500},children:K.linkText})})()]})})]},K.id)})})}),x.jsxs("div",{className:"mt-2",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsx("div",{className:"text-[15px] md:text-[18px] lg:text-[22px] font-medium font-poppins",children:"New Arrivals"}),x.jsx("button",{className:"text-[13px] md:text-[15px] lg:text-[17px] font-normal font-poppins text-sky-600",onClick:()=>O(!0),children:"view all"})]}),x.jsx("div",{ref:G,className:"w-full overflow-x-auto scrollbar-hide cursor-grab active:cursor-grabbing",style:{overflowX:"auto"},onMouseDown:K=>{const Te=G.current;if(!Te)return;let Ue=K.pageX-Te.offsetLeft,ut=Te.scrollLeft;function pt(yt){Te.scrollLeft=ut-(yt.pageX-Te.offsetLeft-Ue)}function xt(){window.removeEventListener("mousemove",pt),window.removeEventListener("mouseup",xt)}window.addEventListener("mousemove",pt),window.addEventListener("mouseup",xt)},children:x.jsx("div",{className:"flex gap-3 md:gap-4 lg:gap-6 min-w-max pb-2",children:pe.map(K=>x.jsxs("div",{className:"relative",children:[x.jsx(Nw,{product:K,onOpen:()=>et(K.id),onAdd:()=>_?tp(_.uid,K.id,1):alert("Please sign in"),cardWidth:"110px",cardHeight:"128px",nameSize:"11px",nameWeight:"medium",nameTracking:"-0.5px",priceSize:"9px",priceColor:"#BDBDBD",priceWeight:"medium",addColor:"#36A5FF",addSize:"9px"}),x.jsx("span",{className:"absolute top-1 left-1 bg-sky-500 text-white text-[9px] font-semibold px-2 py-0.5 rounded-full shadow-sm select-none pointer-events-none",children:"New"})]},K.id||K.sku))})})]}),T&&x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:x.jsxs("div",{className:"bg-white rounded-[20px] shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6 relative",children:[x.jsx("button",{className:"absolute top-2 right-2 text-zinc-500 hover:text-zinc-800 text-xl font-bold",onClick:()=>O(!1),"aria-label":"Close",children:""}),x.jsx("div",{className:"text-[20px] md:text-[26px] font-light mb-4 font-poppins text-left",children:"All New Products"}),x.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 justify-items-center",children:Re.map(K=>x.jsxs("div",{className:"relative flex flex-col items-center",children:[x.jsx(Nw,{product:K,onOpen:()=>et(K.id),onAdd:()=>_?tp(_.uid,K.id,1):alert("Please sign in"),cardWidth:"110px",cardHeight:"128px",nameSize:"11px",nameWeight:"semi-bold",nameTracking:"-0.5px",priceSize:"9px",priceColor:"#BDBDBD",priceWeight:"medium",addColor:"#36A5FF",addSize:"9px"}),x.jsx("span",{className:"absolute top-1 left-1 bg-sky-500 text-white text-[9px] font-semibold px-2 py-0.5 rounded-full shadow-sm select-none pointer-events-none",children:"New"})]},K.id||K.sku))}),Je>1&&C<Je&&x.jsx("div",{className:"flex items-center justify-center gap-3 mt-4",children:x.jsx("button",{className:"px-4 py-2 rounded-full bg-sky-600 text-white hover:bg-sky-700",onClick:()=>U(K=>Math.min(Je,K+1)),"aria-label":"Load more new arrivals",children:"Load more"})})]})}),x.jsxs("div",{className:"mt-10",children:[x.jsx("div",{className:"text-[15px] md:text-[18px] lg:text-[22px] font-medium font-poppins mb-3",children:"Popular Products"}),x.jsx("div",{className:"grid grid-cols-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3 md:gap-6 lg:gap-8",children:Fe.map(K=>x.jsx("div",{className:"flex justify-center relative",children:x.jsx(Nw,{product:K,onOpen:()=>et(K.id),onAdd:()=>_?tp(_.uid,K.id,1):alert("Please sign in"),cardWidth:"128px",cardHeight:"120px",nameSize:"12px",nameWeight:"semi-bold",nameTracking:"-0.5px",nameLineHeight:"-1.1",priceSize:"11px",priceColor:"#BDBDBD",priceWeight:"medium",priceLineHeight:"1.1",addColor:"#36A5FF",addSize:"9px",borderRadius:"10px"},K.id||K.sku)},(K.id||K.sku)+"-wrapper"))}),Ee>1&&ue<Ee&&x.jsx("div",{className:"flex items-center justify-center gap-4 mt-4",children:x.jsx("button",{className:"px-4 py-2 rounded-full bg-sky-600 text-white hover:bg-sky-700",onClick:()=>ee(K=>Math.min(Ee,K+1)),"aria-label":"Load more popular products",children:"Load more"})})]})]})]}):x.jsx(Z2,{lines:6,className:"my-8"})}function US(t){return x.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:x.jsx("path",{d:"M4.87524 5.41667C4.73158 5.41667 4.59381 5.47373 4.49223 5.57532C4.39064 5.6769 4.33358 5.81467 4.33358 5.95833V8.125H5.41691V6.5H7.04191V7.85417L8.93774 5.95833L7.04191 4.0625V5.41667H4.87524ZM6.8832 0.75454L12.2457 6.11704C12.3472 6.21862 12.4043 6.35637 12.4043 6.5C12.4043 6.64363 12.3472 6.78138 12.2457 6.88296L6.8832 12.2455C6.78162 12.347 6.64387 12.404 6.50024 12.404C6.35661 12.404 6.21886 12.347 6.11728 12.2455L0.754784 6.88296C0.653237 6.78138 0.596191 6.64363 0.596191 6.5C0.596191 6.35637 0.653237 6.21862 0.754784 6.11704L6.11728 0.75454C6.21886 0.652993 6.35661 0.595947 6.50024 0.595947C6.64387 0.595947 6.78162 0.652993 6.8832 0.75454Z",fill:"currentColor"})})}function WW({product:t,pharmacy:e}){const{user:r}=vi(),n=ts(),{userCoords:i}=yb();if(!t)return null;const s=Number(t.price||0),[a,o]=H.useState(!1),[l,c]=H.useState(!1),[f,d]=H.useState(null);H.useEffect(()=>{if(e&&i){const k=C7(e,i,"driving");d(k)}else d(null)},[e,i]);const[m,p]=H.useState([]),[_,w]=H.useState(!1);async function b(k){if(!k)return p([]);try{w(!0);const F=$r(vr(St,"products"),Xr("category","==",k)),B=(await li(F)).docs.map(X=>({id:X.id,...X.data()}));p(B),c(!0)}catch(F){console.error("Failed to fetch category products",F),p([]),c(!0)}finally{w(!1)}}return r?x.jsx("div",{className:"min-h-screen bg-white",children:x.jsxs("div",{className:"w-full max-w-full md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-2 md:px-8 lg:px-12 xl:px-0",children:[x.jsx("div",{className:"pt-6 sticky top-0 z-20 bg-white/80 backdrop-blur-md pb-2",children:x.jsxs("button",{onClick:()=>n(-1),className:"w-[90px] h-[34px] font-poppins font-extralight tracking-tight text-[14px] flex items-center justify-center rounded-full bg-white border border-zinc-300",children:[x.jsx(vb,{className:"h-4 w-4 mr-1"})," Back"]})}),x.jsx("div",{className:"mt-8 md:border md:rounded-t-3xl md:max-w-4xl md:border-zinc-100",children:x.jsx("div",{className:"w-full max-w-full md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-2 md:px-8 lg:px-12 xl:px-0 pt-6 pb-36",children:x.jsx("div",{className:"mx-auto w-full",children:x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[x.jsxs("div",{className:" rounded-2xl p-4 border flex flex-col items-center justify-center w-full",children:[t?.image&&!a?x.jsx("img",{src:t.image,alt:t.name,onError:()=>o(!0),className:"max-h-[360px] w-full object-contain"}):x.jsx("div",{className:"h-[200px] w-full flex items-center justify-center bg-zinc-100 rounded-md text-3xl font-semibold text-zinc-800",children:x.jsx(uh,{name:t.name,image:t.image,category:t.category,size:80,roundedClass:"rounded-md"})}),x.jsxs("div",{className:"w-full mt-4 hidden lg:flex flex-col gap-3",children:[x.jsx("button",{onClick:async()=>{if(!r)return alert("Please sign in");if(!t.id)return alert("Product unavailable. Please try again.");try{await tp(r.uid,t.id,1)}catch{alert("Failed to add to cart.")}},className:"w-full h-10 rounded-full bg-sky-600 text-white text-[14px] font-poppins font-light shadow-sm","aria-label":"Add to cart",children:"Add to Cart"}),x.jsxs("a",{href:`tel:${e?.phone||""}`,className:"w-full h-10 rounded-full border border-zinc-400 text-[14px] font-poppins font-light flex items-center justify-center gap-2 text-zinc-800 bg-white","aria-label":"Call to order",children:[x.jsx(J2,{className:"h-4 w-4"})," Call to Order"]})]})]}),x.jsxs("div",{className:"flex flex-col",children:[x.jsxs("div",{className:"mb-3 flex items-start justify-between",children:[x.jsx("h1",{className:"text-[20px] lg:text-[22px] font-poppins font-medium tracking-tight leading-tight min-w-0",children:t.name}),x.jsxs("div",{className:"text-[20px] text-sky-600 font-poppins font-semibold lg:hidden",children:["",s.toLocaleString()]})]}),x.jsx("div",{className:"mb-4 hidden lg:block",children:x.jsxs("div",{className:"text-[20px] text-sky-600 font-poppins font-semibold",children:["",s.toLocaleString()]})}),x.jsx("div",{className:"mb-2",children:x.jsx("button",{onClick:()=>n(`/vendor/${e?.id||t.pharmacyId}`),className:"text-sky-600 underline font-poppins text-[15px] font-light",children:e?.name})}),x.jsxs("div",{className:"mb-1 flex items-center justify-between gap-2 text-zinc-600 text-[13px] font-poppins font-light",children:[x.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[x.jsx(ry,{className:"h-4 w-4 flex-shrink-0"}),x.jsx("span",{className:"truncate",children:e?.address})]}),e?.address&&x.jsxs("button",{onClick:()=>{const k=encodeURIComponent(e.address);window.open(`https://www.google.com/maps/search/?api=1&query=${k}`,"_blank")},className:"text-sky-600 text-[13px] font-poppins font-light px-2 py-1 rounded-full hover:bg-sky-50 transition lg:hidden","aria-label":"Get directions",children:[x.jsx(US,{className:"h-4 w-4 inline-block mr-1"})," Get Directions"]})]}),x.jsxs("div",{className:"mb-3 flex items-center gap-2 text-zinc-600 text-[13px] font-poppins font-light",children:[x.jsx(S7,{className:"h-4 w-4"}),f?`${f.formatted} to ${e?.name}`:i?"Calculating ETA...":"Fetching location..."]}),e?.address&&x.jsx("div",{className:"mb-4 hidden lg:block",children:x.jsxs("button",{className:"flex items-center gap-2 text-sky-600 text-[13px] font-poppins font-light px-3 py-2 rounded-full hover:bg-sky-50 transition",onClick:()=>{const k=encodeURIComponent(e.address);window.open(`https://www.google.com/maps/search/?api=1&query=${k}`,"_blank")},children:[x.jsx(US,{className:"h-4 w-4 text-sky-600"})," Get Directions"]})}),x.jsxs("div",{className:"mt-2",children:[x.jsxs("div",{className:"hidden lg:block",children:[x.jsx("div",{className:"text-[15px] tracking-tight text-black font-poppins font-medium",children:"Category"}),x.jsx("div",{className:"mt-0.5 mb-5",children:x.jsx("button",{type:"button",onClick:async k=>{k.stopPropagation(),await b(t.category||"General")},className:"text-[13px] text-[#fc7f26] font-poppins font-normal underline hover:text-amber-500",children:t.category||"General"})})]}),x.jsx("div",{className:"block lg:hidden",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("div",{className:"text-[15px] text-black font-poppins font-medium mb-2",children:"Category"}),x.jsx("div",{children:x.jsx("button",{type:"button",onClick:async k=>{k.stopPropagation(),await b(t.category||"General")},className:"text-[13px] text-[#fc7f26] font-poppins font-normal underline hover:text-amber-500",children:t.category||"General"})})]})})]}),x.jsxs("div",{className:"mt-2",children:[x.jsx("div",{className:"text-[15px] font-poppins font-medium tracking-tighter text-zinc-800",children:"Product Description"}),x.jsx("p",{className:"mt-2 text-zinc-600 leading-6 font-poppins text-[14px] font-light",children:t.description})]})]})]})})})}),x.jsx("div",{className:"fixed left-0 right-0 bottom-28 z-30 lg:hidden",children:x.jsx("div",{className:"w-full max-w-full md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-2 md:px-8 lg:px-12 xl:px-0",children:x.jsxs("div",{className:"flex flex-col gap-3",children:[x.jsx("button",{onClick:async()=>{if(!r)return alert("Please sign in");if(!t.id)return alert("Product unavailable. Please try again.");try{await tp(r.uid,t.id,1)}catch{alert("Failed to add to cart.")}},className:"w-full h-11 rounded-full bg-sky-600 text-white text-[14px] font-poppins font-light shadow-sm",children:"Add to Cart"}),x.jsxs("a",{href:`tel:${e?.phone||""}`,className:"w-full h-11 rounded-full border border-zinc-400 text-[14px] font-poppins font-light flex items-center justify-center gap-2 text-zinc-800 bg-white",children:[x.jsx(J2,{className:"h-4 w-4"})," Call to Order"]})]})})}),l&&x.jsx("div",{onClick:()=>c(!1),className:"fixed inset-0 z-50 flex items-start justify-center pt-24 bg-black bg-opacity-30",role:"dialog","aria-modal":"true",children:x.jsxs("div",{onClick:k=>k.stopPropagation(),className:"bg-white rounded-2xl p-4 w-[90vw] max-w-md max-h-[80vh] overflow-y-auto",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsxs("div",{className:"text-lg font-medium",children:['Products in "',t.category||"General",'"']}),x.jsx("button",{onClick:()=>c(!1),className:"text-zinc-500",children:"Close"})]}),_?x.jsx("div",{className:"p-4 text-center text-zinc-500",children:"Loading"}):m.length===0?x.jsx("div",{className:"p-4 text-zinc-500",children:"No products found."}):x.jsx("div",{className:"space-y-2",children:m.map(k=>x.jsxs("button",{onClick:()=>{c(!1),n(`/product/${k.id}`)},className:"w-full text-left rounded-lg p-2 flex items-center gap-3 hover:bg-sky-50",children:[x.jsx(uh,{name:k.name,image:k.image,category:k.category,size:48,className:"flex-shrink-0",roundedClass:"rounded-md"}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"font-medium text-sm truncate",children:k.name}),x.jsx("div",{className:"text-xs text-zinc-500 truncate",children:k.category})]})]},k.id))})]})})]})}):x.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[x.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:"Please sign in to continue"}),x.jsx("button",{className:"rounded-full bg-sky-600 text-white px-6 py-2 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>n("/auth/landing"),children:"Sign In / Sign Up"})]})}const qW="data:image/svg+xml,%3csvg%20width='26'%20height='23'%20viewBox='0%200%2026%2023'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2.41667%2022.3281C1.93056%2022.5226%201.46875%2022.4798%201.03125%2022.1998C0.59375%2021.9198%200.375%2021.5129%200.375%2020.9792V14.4167L12.0417%2011.5L0.375%208.58333V2.02083C0.375%201.48611%200.59375%201.07923%201.03125%200.800203C1.46875%200.521176%201.93056%200.478397%202.41667%200.67187L24.875%2010.151C25.4826%2010.4184%2025.7865%2010.868%2025.7865%2011.5C25.7865%2012.1319%2025.4826%2012.5816%2024.875%2012.849L2.41667%2022.3281Z'%20fill='black'/%3e%3c/svg%3e";function GW(t){return x.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:x.jsx("path",{d:"M2.68917 5.64292C3.70917 7.6475 5.3525 9.29083 7.35708 10.3108L8.91542 8.7525C9.11375 8.55417 9.39 8.4975 9.63792 8.57542C10.4312 8.8375 11.2812 8.97917 12.1667 8.97917C12.3545 8.97917 12.5347 9.05379 12.6675 9.18663C12.8004 9.31947 12.875 9.49964 12.875 9.6875V12.1667C12.875 12.3545 12.8004 12.5347 12.6675 12.6675C12.5347 12.8004 12.3545 12.875 12.1667 12.875C8.97302 12.875 5.91017 11.6063 3.65192 9.34808C1.39367 7.08983 0.125 4.02698 0.125 0.833333C0.125 0.645472 0.199628 0.465304 0.332466 0.332466C0.465304 0.199628 0.645472 0.125 0.833333 0.125H3.3125C3.50036 0.125 3.68053 0.199628 3.81337 0.332466C3.94621 0.465304 4.02083 0.645472 4.02083 0.833333C4.02083 1.71875 4.1625 2.56875 4.42458 3.36208C4.5025 3.61 4.44583 3.88625 4.2475 4.08458L2.68917 5.64292Z",fill:"black"})})}const I7="/assets/message-tone-B30p1O1l.mp3";function wb({open:t,onClose:e,children:r}){return t?x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 px-2 sm:px-4",children:x.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full p-6 relative animate-fadeInUp max-h-[90vh] overflow-y-auto border border-[#36A5FF]",style:{borderWidth:1},children:[x.jsx("button",{onClick:e,className:"absolute top-3 right-3 text-zinc-400 hover:text-zinc-700 text-xl font-bold focus:outline-none","aria-label":"Close",children:""}),r]})}):null}function KW({open:t,onClose:e,products:r,onSubmit:n}){const[i,s]=H.useState([]),[a,o]=H.useState(()=>new Date().toISOString().slice(0,10)),[l,c]=H.useState(7),[f,d]=H.useState(""),[m,p]=H.useState(!1),_=()=>s([...i,{productId:"",name:"",quantity:1,dosage:"",frequency:"",duration:"",notes:"",times:[""]}]),w=(X,G,P)=>{s(A=>A.map((T,O)=>O===X?{...T,[G]:P}:T))},b=(X,G,P)=>{s(A=>A.map((T,O)=>O===X?{...T,times:T.times.map((I,D)=>D===G?P:I)}:T))},k=X=>{s(G=>G.map((P,A)=>A===X?{...P,times:[...P.times||[],""]}:P))},F=(X,G)=>{s(P=>P.map((A,T)=>T===X?{...A,times:A.times.filter((O,I)=>I!==G)}:A))},N=X=>s(G=>G.filter((P,A)=>A!==X)),B=X=>{if(X.preventDefault(),!i.length)return alert("Add at least one drug");n({drugs:i,startDate:a,duration:l,notes:f,requirePurchase:m})};return x.jsx(wb,{open:t,onClose:e,children:x.jsxs("form",{onSubmit:B,className:"space-y-4",children:[x.jsx("div",{className:"text-lg font-light mb-2",children:"Create Prescription"}),x.jsxs("div",{children:[x.jsx("button",{type:"button",onClick:_,className:"mb-2 px-3 py-1 rounded-full text-[12px] bg-sky-600 text-white",children:"+ Add Drug"}),i.map((X,G)=>x.jsxs("div",{className:"mb-2 p-2 border rounded-lg bg-zinc-50",children:[x.jsxs("select",{className:"mb-1 w-full border-b p-1 text-[12px]",value:X.productId,onChange:P=>{const A=r.find(T=>T.id===P.target.value);w(G,"productId",A?.id||""),w(G,"name",A?.name||"")},required:!0,children:[x.jsx("option",{value:"",children:"Select drug"}),r.map(P=>x.jsx("option",{value:P.id,children:P.name},P.id))]}),x.jsx("input",{type:"number",min:"1",className:"mb-1 w-full border-b p-1 text-[12px]",placeholder:"Quantity",value:X.quantity,onChange:P=>w(G,"quantity",P.target.value),required:!0}),x.jsx("input",{className:"mb-1 w-full border-b p-1 text-[12px]",placeholder:"Dosage (e.g. 1 tablet)",value:X.dosage,onChange:P=>w(G,"dosage",P.target.value),required:!0}),x.jsx("input",{className:"mb-1 w-full border-b p-1 text-[12px]",placeholder:"Frequency (e.g. 2x/day)",value:X.frequency,onChange:P=>w(G,"frequency",P.target.value),required:!0}),x.jsx("input",{type:"number",min:"1",className:"mb-1 w-full border-b p-1 text-[12px]",placeholder:"Duration (days)",value:X.duration,onChange:P=>w(G,"duration",P.target.value),required:!0}),x.jsx("input",{className:"mb-1 w-full border-b p-1 text-[12px]",placeholder:"Notes (optional)",value:X.notes,onChange:P=>w(G,"notes",P.target.value)}),x.jsxs("div",{className:"mb-1",children:[x.jsx("label",{className:"block text-xs font-light mb-1",children:"Time(s) for this dosage (optional)"}),(X.times||[]).map((P,A)=>x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[x.jsx("input",{type:"time",className:"border-b p-1 text-[12px]",value:P,onChange:T=>b(G,A,T.target.value)}),x.jsx("button",{type:"button",className:"text-xs text-red-500",onClick:()=>F(G,A),children:"Remove"})]},A)),x.jsx("button",{type:"button",className:"text-xs text-sky-600 underline",onClick:()=>k(G),children:"+ Add Time"})]}),x.jsx("button",{type:"button",onClick:()=>N(G),className:"text-xs text-red-500",children:"Remove"})]},G))]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm mb-1 font-light",children:"Start Date"}),x.jsx("input",{type:"date",className:"border-b p-1 w-full text-[12px]",value:a,onChange:X=>o(X.target.value),required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm mb-1 font-light",children:"Total Duration (days)"}),x.jsx("input",{type:"number",min:"1",className:"border-b p-1 w-full text-[12px]",value:l,onChange:X=>c(X.target.value),required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm mb-1 font-light",children:"Notes"}),x.jsx("textarea",{className:"border rounded p-1 w-full text-[12px]",value:f,onChange:X=>d(X.target.value)})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"checkbox",id:"requirePurchase",checked:m,onChange:X=>p(X.target.checked)}),x.jsx("label",{htmlFor:"requirePurchase",className:"text-xs font-light",children:"Require customer to purchase before prescription starts"})]}),x.jsx("button",{type:"submit",className:"w-full rounded-full bg-sky-600 text-white py-2 font-light text-[12px]",children:"Create Prescription"})]})})}function N7({chatThreadId:t,prescriptions:e,userId:r}){const[n,i]=H.useState(e||[]),[s,a]=H.useState({});H.useEffect(()=>{if(e&&e.length>0){i(e);const f={};e.forEach(d=>{f[d.id]={},d.drugs.forEach((m,p)=>{f[d.id][p]=m.quantity})}),a(f);return}t&&y7(t).then(f=>{i(f);const d={};f.forEach(m=>{d[m.id]={},m.drugs.forEach((p,_)=>{d[m.id][_]=p.quantity})}),a(d)})},[t,e]);function o(f,d,m){const p=new Date(d.startDate),w=Math.floor((new Date-p)/(1e3*60*60*24)),b=Math.max(0,Number(f.duration||d.duration)-w),k=s[d.id]?.[m]??f.quantity;return{daysLeft:b,quantityLeft:k}}function l(f){if(!f)return 1;const d=f.match(/(\d+(?:\.\d+)?)/);return d?Number(d[1]):1}async function c(f,d){a(b=>{const k={...b},F=n.find(G=>G.id===f);if(!F)return b;const N=F.drugs[d],B=l(N.dosage),X=k[f]?.[d]??N.quantity;return k[f]={...k[f],[d]:Math.max(0,X-B)},k});const m=n.find(b=>b.id===f);if(!m)return;const p=m.drugs[d],_=l(p.dosage),w=m.drugs.map((b,k)=>k===d?{...b,quantity:Math.max(0,b.quantity-_)}:b);await Ja(kr(St,"prescriptions",f),{drugs:w}),i(b=>b.map(k=>k.id===f?{...k,drugs:w}:k))}return x.jsxs("div",{className:"mt-4",children:[x.jsx("div",{className:"text-lg font-light mb-2",children:"Prescriptions"}),n.length===0&&x.jsx("div",{className:"text-zinc-400 text-sm",children:"No prescriptions yet."}),n.map(f=>x.jsxs("div",{className:"mb-4 border rounded-2xl p-4 bg-white shadow-sm relative",children:[x.jsxs("div",{className:"flex items-start justify-between mb-2",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"font-thin text-[14px] mb-1",children:["Created: ",new Date(f.startDate).toLocaleDateString()]}),x.jsxs("div",{className:"mb-1 text-xs text-zinc-500 font-light",children:["Status: ",f.status]})]}),x.jsx("div",{className:"flex flex-col gap-2",children:f.drugs.map((d,m)=>{const{quantityLeft:p}=o(d,f,m),_=f.requirePurchase&&!f.fulfilled||p<=0;return x.jsx("button",{className:"rounded-full bg-sky-600 text-white text-[10px] px-2 py-0.5 ml-auto disabled:opacity-40 mb-1 shadow-sm",style:{minWidth:70,height:24,lineHeight:"16px"},disabled:_,onClick:()=>c(f.id,m),children:"Mark Dose"},m)})})]}),x.jsx("ul",{className:"mb-2 text-[13px]",children:f.drugs.map((d,m)=>{const{daysLeft:p,quantityLeft:_}=o(d,f,m);return x.jsxs("li",{className:"mb-2 flex flex-col sm:flex-row sm:items-center sm:gap-2",children:[x.jsx("span",{className:"font-medium text-sky-700",children:d.name}),x.jsxs("span",{className:"text-zinc-500",children:["Qty: ",_]}),x.jsxs("span",{className:"text-zinc-500",children:["Dosage: ",d.dosage]}),x.jsxs("span",{className:"text-zinc-500",children:["Freq: ",d.frequency]}),x.jsxs("span",{className:p<=2?"text-red-500":"text-green-600",children:["Days left: ",p]}),x.jsxs("span",{className:_<=2?"text-red-500":"text-green-600",children:["Qty left: ",_]}),d.notes&&x.jsxs("span",{className:"block text-xs text-zinc-400",children:["Notes: ",d.notes]}),d.productId&&f.requirePurchase&&x.jsx("a",{href:`/product/${d.productId}`,className:"mt-1 inline-block text-xs text-sky-600 underline hover:text-sky-800 transition",children:"View & Buy"})]},m)})}),x.jsxs("div",{className:"text-xs text-zinc-400",children:["Duration: ",f.duration," days"]})]},f.id))]})}const P7=typeof document<"u"?aa.useLayoutEffect:()=>{};var Pw;const XW=(Pw=aa.useInsertionEffect)!==null&&Pw!==void 0?Pw:P7;function YW(t){const e=H.useRef(null);return XW(()=>{e.current=t},[t]),H.useCallback((...r)=>{const n=e.current;return n?.(...r)},[])}const Ah=t=>{var e;return(e=t?.ownerDocument)!==null&&e!==void 0?e:document},od=t=>t&&"window"in t&&t.window===t?t:Ah(t).defaultView||window;function QW(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function JW(t){return QW(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let ZW=!1;function _b(){return ZW}function R7(t,e){if(!_b())return e&&t?t.contains(e):!1;if(!t||!e)return!1;let r=e;for(;r!==null;){if(r===t)return!0;r.tagName==="SLOT"&&r.assignedSlot?r=r.assignedSlot.parentNode:JW(r)?r=r.host:r=r.parentNode}return!1}const c5=(t=document)=>{var e;if(!_b())return t.activeElement;let r=t.activeElement;for(;r&&"shadowRoot"in r&&(!((e=r.shadowRoot)===null||e===void 0)&&e.activeElement);)r=r.shadowRoot.activeElement;return r};function F7(t){return _b()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}function eq(t){var e;if(typeof window>"u"||window.navigator==null)return!1;let r=(e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands;return Array.isArray(r)&&r.some(n=>t.test(n.brand))||t.test(window.navigator.userAgent)}function tq(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function L7(t){let e=null;return()=>(e==null&&(e=t()),e)}const rq=L7(function(){return tq(/^Mac/i)}),nq=L7(function(){return eq(/Android/i)});function D7(){let t=H.useRef(new Map),e=H.useCallback((i,s,a,o)=>{let l=o?.once?(...c)=>{t.current.delete(a),a(...c)}:a;t.current.set(a,{type:s,eventTarget:i,fn:l,options:o}),i.addEventListener(s,l,o)},[]),r=H.useCallback((i,s,a,o)=>{var l;let c=((l=t.current.get(a))===null||l===void 0?void 0:l.fn)||a;i.removeEventListener(s,c,o),t.current.delete(a)},[]),n=H.useCallback(()=>{t.current.forEach((i,s)=>{r(i.eventTarget,i.type,s,i.options)})},[r]);return H.useEffect(()=>n,[n]),{addGlobalListener:e,removeGlobalListener:r,removeAllGlobalListeners:n}}function iq(t){return t.pointerType===""&&t.isTrusted?!0:nq()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function O7(t){let e=t;return e.nativeEvent=t,e.isDefaultPrevented=()=>e.defaultPrevented,e.isPropagationStopped=()=>e.cancelBubble,e.persist=()=>{},e}function sq(t,e){Object.defineProperty(t,"target",{value:e}),Object.defineProperty(t,"currentTarget",{value:e})}function M7(t){let e=H.useRef({isFocused:!1,observer:null});P7(()=>{const n=e.current;return()=>{n.observer&&(n.observer.disconnect(),n.observer=null)}},[]);let r=YW(n=>{t?.(n)});return H.useCallback(n=>{if(n.target instanceof HTMLButtonElement||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=n.target,s=a=>{if(e.current.isFocused=!1,i.disabled){let o=O7(a);r(o)}e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",s,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&i.disabled){var a;(a=e.current.observer)===null||a===void 0||a.disconnect();let o=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:o})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:o}))}}),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[r])}let aq=!1,Tg=null,u5=new Set,hm=new Map,Fd=!1,f5=!1;const oq={Tab:!0,Escape:!0};function bb(t,e){for(let r of u5)r(t,e)}function lq(t){return!(t.metaKey||!rq()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function ev(t){Fd=!0,lq(t)&&(Tg="keyboard",bb("keyboard",t))}function np(t){Tg="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(Fd=!0,bb("pointer",t))}function j7(t){iq(t)&&(Fd=!0,Tg="virtual")}function B7(t){t.target===window||t.target===document||aq||!t.isTrusted||(!Fd&&!f5&&(Tg="virtual",bb("virtual",t)),Fd=!1,f5=!1)}function V7(){Fd=!1,f5=!0}function h5(t){if(typeof window>"u"||typeof document>"u"||hm.get(od(t)))return;const e=od(t),r=Ah(t);let n=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){Fd=!0,n.apply(this,arguments)},r.addEventListener("keydown",ev,!0),r.addEventListener("keyup",ev,!0),r.addEventListener("click",j7,!0),e.addEventListener("focus",B7,!0),e.addEventListener("blur",V7,!1),typeof PointerEvent<"u"&&(r.addEventListener("pointerdown",np,!0),r.addEventListener("pointermove",np,!0),r.addEventListener("pointerup",np,!0)),e.addEventListener("beforeunload",()=>{U7(t)},{once:!0}),hm.set(e,{focus:n})}const U7=(t,e)=>{const r=od(t),n=Ah(t);e&&n.removeEventListener("DOMContentLoaded",e),hm.has(r)&&(r.HTMLElement.prototype.focus=hm.get(r).focus,n.removeEventListener("keydown",ev,!0),n.removeEventListener("keyup",ev,!0),n.removeEventListener("click",j7,!0),r.removeEventListener("focus",B7,!0),r.removeEventListener("blur",V7,!1),typeof PointerEvent<"u"&&(n.removeEventListener("pointerdown",np,!0),n.removeEventListener("pointermove",np,!0),n.removeEventListener("pointerup",np,!0)),hm.delete(r))};function cq(t){const e=Ah(t);let r;return e.readyState!=="loading"?h5(t):(r=()=>{h5(t)},e.addEventListener("DOMContentLoaded",r)),()=>U7(t,r)}typeof document<"u"&&cq();function z7(){return Tg!=="pointer"}const uq=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function fq(t,e,r){let n=Ah(r?.target);const i=typeof window<"u"?od(r?.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?od(r?.target).HTMLTextAreaElement:HTMLTextAreaElement,a=typeof window<"u"?od(r?.target).HTMLElement:HTMLElement,o=typeof window<"u"?od(r?.target).KeyboardEvent:KeyboardEvent;return t=t||n.activeElement instanceof i&&!uq.has(n.activeElement.type)||n.activeElement instanceof s||n.activeElement instanceof a&&n.activeElement.isContentEditable,!(t&&e==="keyboard"&&r instanceof o&&!oq[r.key])}function hq(t,e,r){h5(),H.useEffect(()=>{let n=(i,s)=>{fq(!!r?.isTextInput,i,s)&&t(z7())};return u5.add(n),()=>{u5.delete(n)}},e)}function dq(t){let{isDisabled:e,onFocus:r,onBlur:n,onFocusChange:i}=t;const s=H.useCallback(l=>{if(l.target===l.currentTarget)return n&&n(l),i&&i(!1),!0},[n,i]),a=M7(s),o=H.useCallback(l=>{const c=Ah(l.target),f=c?c5(c):c5();l.target===l.currentTarget&&f===F7(l.nativeEvent)&&(r&&r(l),i&&i(!0),a(l))},[i,r,a]);return{focusProps:{onFocus:!e&&(r||i||n)?o:void 0,onBlur:!e&&(n||i)?s:void 0}}}function pq(t){let{isDisabled:e,onBlurWithin:r,onFocusWithin:n,onFocusWithinChange:i}=t,s=H.useRef({isFocusWithin:!1}),{addGlobalListener:a,removeAllGlobalListeners:o}=D7(),l=H.useCallback(d=>{d.currentTarget.contains(d.target)&&s.current.isFocusWithin&&!d.currentTarget.contains(d.relatedTarget)&&(s.current.isFocusWithin=!1,o(),r&&r(d),i&&i(!1))},[r,i,s,o]),c=M7(l),f=H.useCallback(d=>{if(!d.currentTarget.contains(d.target))return;const m=Ah(d.target),p=c5(m);if(!s.current.isFocusWithin&&p===F7(d.nativeEvent)){n&&n(d),i&&i(!0),s.current.isFocusWithin=!0,c(d);let _=d.currentTarget;a(m,"focus",w=>{if(s.current.isFocusWithin&&!R7(_,w.target)){let b=new m.defaultView.FocusEvent("blur",{relatedTarget:w.target});sq(b,_);let k=O7(b);l(k)}},{capture:!0})}},[n,i,c,a,l]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:f,onBlur:l}}}let d5=!1,Fx=0;function mq(){d5=!0,setTimeout(()=>{d5=!1},50)}function zS(t){t.pointerType==="touch"&&mq()}function gq(){if(!(typeof document>"u"))return Fx===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",zS),Fx++,()=>{Fx--,!(Fx>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",zS)}}function xq(t){let{onHoverStart:e,onHoverChange:r,onHoverEnd:n,isDisabled:i}=t,[s,a]=H.useState(!1),o=H.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;H.useEffect(gq,[]);let{addGlobalListener:l,removeAllGlobalListeners:c}=D7(),{hoverProps:f,triggerHoverEnd:d}=H.useMemo(()=>{let m=(w,b)=>{if(o.pointerType=b,i||b==="touch"||o.isHovered||!w.currentTarget.contains(w.target))return;o.isHovered=!0;let k=w.currentTarget;o.target=k,l(Ah(w.target),"pointerover",F=>{o.isHovered&&o.target&&!R7(o.target,F.target)&&p(F,F.pointerType)},{capture:!0}),e&&e({type:"hoverstart",target:k,pointerType:b}),r&&r(!0),a(!0)},p=(w,b)=>{let k=o.target;o.pointerType="",o.target=null,!(b==="touch"||!o.isHovered||!k)&&(o.isHovered=!1,c(),n&&n({type:"hoverend",target:k,pointerType:b}),r&&r(!1),a(!1))},_={};return typeof PointerEvent<"u"&&(_.onPointerEnter=w=>{d5&&w.pointerType==="mouse"||m(w,w.pointerType)},_.onPointerLeave=w=>{!i&&w.currentTarget.contains(w.target)&&p(w,w.pointerType)}),{hoverProps:_,triggerHoverEnd:p}},[e,r,n,i,o,l,c]);return H.useEffect(()=>{i&&d({currentTarget:o.target},o.pointerType)},[i]),{hoverProps:f,isHovered:s}}function vq(t={}){let{autoFocus:e=!1,isTextInput:r,within:n}=t,i=H.useRef({isFocused:!1,isFocusVisible:e||z7()}),[s,a]=H.useState(!1),[o,l]=H.useState(()=>i.current.isFocused&&i.current.isFocusVisible),c=H.useCallback(()=>l(i.current.isFocused&&i.current.isFocusVisible),[]),f=H.useCallback(p=>{i.current.isFocused=p,a(p),c()},[c]);hq(p=>{i.current.isFocusVisible=p,c()},[],{isTextInput:r});let{focusProps:d}=dq({isDisabled:n,onFocusChange:f}),{focusWithinProps:m}=pq({isDisabled:!n,onFocusWithinChange:f});return{isFocused:s,isFocusVisible:o,focusProps:n?m:d}}var yq=Object.defineProperty,wq=(t,e,r)=>e in t?yq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Rw=(t,e,r)=>(wq(t,typeof e!="symbol"?e+"":e,r),r);let _q=class{constructor(){Rw(this,"current",this.detect()),Rw(this,"handoffState","pending"),Rw(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Xc=new _q;function Qp(t){var e,r;return Xc.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(r=(e=t.current)==null?void 0:e.ownerDocument)!=null?r:document:null:document}function $7(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Ml(){let t=[],e={addEventListener(r,n,i,s){return r.addEventListener(n,i,s),e.add(()=>r.removeEventListener(n,i,s))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return e.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return e.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return $7(()=>{n.current&&r[0]()}),e.add(()=>{n.current=!1})},style(r,n,i){let s=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:i}),this.add(()=>{Object.assign(r.style,{[n]:s})})},group(r){let n=Ml();return r(n),this.add(()=>n.dispose())},add(r){return t.includes(r)||t.push(r),()=>{let n=t.indexOf(r);if(n>=0)for(let i of t.splice(n,1))i()}},dispose(){for(let r of t.splice(0))r()}};return e}function ny(){let[t]=H.useState(Ml);return H.useEffect(()=>()=>t.dispose(),[t]),t}let Ns=(t,e)=>{Xc.isServer?H.useEffect(t,e):H.useLayoutEffect(t,e)};function Ag(t){let e=H.useRef(t);return Ns(()=>{e.current=t},[t]),e}let Ln=function(t){let e=Ag(t);return aa.useCallback((...r)=>e.current(...r),[e])};function bq(t){let e=t.width/2,r=t.height/2;return{top:t.clientY-r,right:t.clientX+e,bottom:t.clientY+r,left:t.clientX-e}}function Eq(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function Sq({disabled:t=!1}={}){let e=H.useRef(null),[r,n]=H.useState(!1),i=ny(),s=Ln(()=>{e.current=null,n(!1),i.dispose()}),a=Ln(o=>{if(i.dispose(),e.current===null){e.current=o.currentTarget,n(!0);{let l=Qp(o.currentTarget);i.addEventListener(l,"pointerup",s,!1),i.addEventListener(l,"pointermove",c=>{if(e.current){let f=bq(c);n(Eq(f,e.current.getBoundingClientRect()))}},!1),i.addEventListener(l,"pointercancel",s,!1)}}});return{pressed:r,pressProps:t?{}:{onPointerDown:a,onPointerUp:s,onClick:s}}}let kq=H.createContext(void 0);function H7(){return H.useContext(kq)}function $S(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function Jp(t,e,...r){if(t in e){let i=e[t];return typeof i=="function"?i(...r):i}let n=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Jp),n}var p5=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(p5||{}),Tq=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Tq||{});function jl(){let t=Cq();return H.useCallback(e=>Aq({mergeRefs:t,...e}),[t])}function Aq({ourProps:t,theirProps:e,slot:r,defaultTag:n,features:i,visible:s=!0,name:a,mergeRefs:o}){o=o??Iq;let l=W7(e,t);if(s)return Lx(l,r,n,a,o);let c=i??0;if(c&2){let{static:f=!1,...d}=l;if(f)return Lx(d,r,n,a,o)}if(c&1){let{unmount:f=!0,...d}=l;return Jp(f?0:1,{0(){return null},1(){return Lx({...d,hidden:!0,style:{display:"none"}},r,n,a,o)}})}return Lx(l,r,n,a,o)}function Lx(t,e={},r,n,i){let{as:s=r,children:a,refName:o="ref",...l}=Fw(t,["unmount","static"]),c=t.ref!==void 0?{[o]:t.ref}:{},f=typeof a=="function"?a(e):a;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let d={};if(e){let m=!1,p=[];for(let[_,w]of Object.entries(e))typeof w=="boolean"&&(m=!0),w===!0&&p.push(_.replace(/([A-Z])/g,b=>`-${b.toLowerCase()}`));if(m){d["data-headlessui-state"]=p.join(" ");for(let _ of p)d[`data-${_}`]=""}}if(s===H.Fragment&&(Object.keys(N0(l)).length>0||Object.keys(N0(d)).length>0))if(!H.isValidElement(f)||Array.isArray(f)&&f.length>1){if(Object.keys(N0(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(N0(l)).concat(Object.keys(N0(d))).map(m=>`  - ${m}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(m=>`  - ${m}`).join(`
`)].join(`
`))}else{let m=f.props,p=m?.className,_=typeof p=="function"?(...k)=>$S(p(...k),l.className):$S(p,l.className),w=_?{className:_}:{},b=W7(f.props,N0(Fw(l,["ref"])));for(let k in d)k in b&&delete d[k];return H.cloneElement(f,Object.assign({},b,d,c,{ref:i(Nq(f),c.ref)},w))}return H.createElement(s,Object.assign({},Fw(l,["ref"]),s!==H.Fragment&&c,s!==H.Fragment&&d),f)}function Cq(){let t=H.useRef([]),e=H.useCallback(r=>{for(let n of t.current)n!=null&&(typeof n=="function"?n(r):n.current=r)},[]);return(...r)=>{if(!r.every(n=>n==null))return t.current=r,e}}function Iq(...t){return t.every(e=>e==null)?void 0:e=>{for(let r of t)r!=null&&(typeof r=="function"?r(e):r.current=e)}}function W7(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let i in n)i.startsWith("on")&&typeof n[i]=="function"?(r[i]!=null||(r[i]=[]),r[i].push(n[i])):e[i]=n[i];if(e.disabled||e["aria-disabled"])for(let n in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(r[n]=[i=>{var s;return(s=i?.preventDefault)==null?void 0:s.call(i)}]);for(let n in r)Object.assign(e,{[n](i,...s){let a=r[n];for(let o of a){if((i instanceof Event||i?.nativeEvent instanceof Event)&&i.defaultPrevented)return;o(i,...s)}}});return e}function q7(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let i in n)i.startsWith("on")&&typeof n[i]=="function"?(r[i]!=null||(r[i]=[]),r[i].push(n[i])):e[i]=n[i];for(let n in r)Object.assign(e,{[n](...i){let s=r[n];for(let a of s)a?.(...i)}});return e}function Bl(t){var e;return Object.assign(H.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function N0(t){let e=Object.assign({},t);for(let r in e)e[r]===void 0&&delete e[r];return e}function Fw(t,e=[]){let r=Object.assign({},t);for(let n of e)n in r&&delete r[n];return r}function Nq(t){return aa.version.split(".")[0]>="19"?t.props.ref:t.ref}let Pq=H.createContext(void 0);function Rq(){return H.useContext(Pq)}function Eb(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function iy(t){return Eb(t)&&"tagName"in t}function Yu(t){return iy(t)&&"accessKey"in t}function ld(t){return iy(t)&&"tabIndex"in t}function Fq(t){return iy(t)&&"style"in t}function Lq(t){return Yu(t)&&t.nodeName==="IFRAME"}function G7(t){return Yu(t)&&t.nodeName==="INPUT"}function HS(t){return Yu(t)&&t.nodeName==="LABEL"}function Dq(t){return Yu(t)&&t.nodeName==="FIELDSET"}function K7(t){return Yu(t)&&t.nodeName==="LEGEND"}function Oq(t){return iy(t)?t.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}function Mq(t){let e=t.parentElement,r=null;for(;e&&!Dq(e);)K7(e)&&(r=e),e=e.parentElement;let n=e?.getAttribute("disabled")==="";return n&&jq(r)?!1:n}function jq(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(K7(e))return!1;e=e.previousElementSibling}return!0}let X7=Symbol();function Bq(t,e=!0){return Object.assign(t,{[X7]:e})}function Qu(...t){let e=H.useRef(t);H.useEffect(()=>{e.current=t},[t]);let r=Ln(n=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(n):i.current=n)});return t.every(n=>n==null||n?.[X7])?void 0:r}let Sb=H.createContext(null);Sb.displayName="DescriptionContext";function Y7(){let t=H.useContext(Sb);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Y7),e}return t}function Vq(){let[t,e]=H.useState([]);return[t.length>0?t.join(" "):void 0,H.useMemo(()=>function(r){let n=Ln(s=>(e(a=>[...a,s]),()=>e(a=>{let o=a.slice(),l=o.indexOf(s);return l!==-1&&o.splice(l,1),o}))),i=H.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props,value:r.value}),[n,r.slot,r.name,r.props,r.value]);return aa.createElement(Sb.Provider,{value:i},r.children)},[e])]}let Uq="p";function zq(t,e){let r=H.useId(),n=H7(),{id:i=`headlessui-description-${r}`,...s}=t,a=Y7(),o=Qu(e);Ns(()=>a.register(i),[i,a.register]);let l=n||!1,c=H.useMemo(()=>({...a.slot,disabled:l}),[a.slot,l]),f={ref:o,...a.props,id:i};return jl()({ourProps:f,theirProps:s,slot:c,defaultTag:Uq,name:a.name||"Description"})}let $q=Bl(zq);Object.assign($q,{});var wa=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(wa||{});let sy=H.createContext(null);sy.displayName="LabelContext";function kb(){let t=H.useContext(sy);if(t===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,kb),e}return t}function Hq(t){var e,r,n;let i=(r=(e=H.useContext(sy))==null?void 0:e.value)!=null?r:void 0;return((n=void 0)!=null?n:0)>0?[i,...t].filter(Boolean).join(" "):i}function Q7({inherit:t=!1}={}){let e=Hq(),[r,n]=H.useState([]),i=t?[e,...r].filter(Boolean):r;return[i.length>0?i.join(" "):void 0,H.useMemo(()=>function(s){let a=Ln(l=>(n(c=>[...c,l]),()=>n(c=>{let f=c.slice(),d=f.indexOf(l);return d!==-1&&f.splice(d,1),f}))),o=H.useMemo(()=>({register:a,slot:s.slot,name:s.name,props:s.props,value:s.value}),[a,s.slot,s.name,s.props,s.value]);return aa.createElement(sy.Provider,{value:o},s.children)},[n])]}let Wq="label";function qq(t,e){var r;let n=H.useId(),i=kb(),s=Rq(),a=H7(),{id:o=`headlessui-label-${n}`,htmlFor:l=s??((r=i.props)==null?void 0:r.htmlFor),passive:c=!1,...f}=t,d=Qu(e);Ns(()=>i.register(o),[o,i.register]);let m=Ln(b=>{let k=b.currentTarget;if(!(b.target!==b.currentTarget&&Oq(b.target))&&(HS(k)&&b.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(b),HS(k))){let F=document.getElementById(k.htmlFor);if(F){let N=F.getAttribute("disabled");if(N==="true"||N==="")return;let B=F.getAttribute("aria-disabled");if(B==="true"||B==="")return;(G7(F)&&(F.type==="file"||F.type==="radio"||F.type==="checkbox")||F.role==="radio"||F.role==="checkbox"||F.role==="switch")&&F.click(),F.focus({preventScroll:!0})}}}),p=a||!1,_=H.useMemo(()=>({...i.slot,disabled:p}),[i.slot,p]),w={ref:d,...i.props,id:o,htmlFor:l,onClick:m};return c&&("onClick"in w&&(delete w.htmlFor,delete w.onClick),"onClick"in f&&delete f.onClick),jl()({ourProps:w,theirProps:f,slot:_,defaultTag:l?Wq:"div",name:i.name||"Label"})}let Gq=Bl(qq);Object.assign(Gq,{});function Kq(t){if(t===null)return{width:0,height:0};let{width:e,height:r}=t.getBoundingClientRect();return{width:e,height:r}}function Xq(t,e=!1){let[r,n]=H.useReducer(()=>({}),{}),i=H.useMemo(()=>Kq(t),[t,r]);return Ns(()=>{if(!t)return;let s=new ResizeObserver(n);return s.observe(t),()=>{s.disconnect()}},[t]),e?{width:`${i.width}px`,height:`${i.height}px`}:i}let J7=class extends Map{constructor(e){super(),this.factory=e}get(e){let r=super.get(e);return r===void 0&&(r=this.factory(e),this.set(e,r)),r}};var Yq=Object.defineProperty,Qq=(t,e,r)=>e in t?Yq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Jq=(t,e,r)=>(Qq(t,e+"",r),r),Z7=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Tl=(t,e,r)=>(Z7(t,e,"read from private field"),r?r.call(t):e.get(t)),Lw=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},WS=(t,e,r,n)=>(Z7(t,e,"write to private field"),e.set(t,r),r),Fc,Z1,em;let eP=class{constructor(e){Lw(this,Fc,{}),Lw(this,Z1,new J7(()=>new Set)),Lw(this,em,new Set),Jq(this,"disposables",Ml()),WS(this,Fc,e),Xc.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Tl(this,Fc)}subscribe(e,r){if(Xc.isServer)return()=>{};let n={selector:e,callback:r,current:e(Tl(this,Fc))};return Tl(this,em).add(n),this.disposables.add(()=>{Tl(this,em).delete(n)})}on(e,r){return Xc.isServer?()=>{}:(Tl(this,Z1).get(e).add(r),this.disposables.add(()=>{Tl(this,Z1).get(e).delete(r)}))}send(e){let r=this.reduce(Tl(this,Fc),e);if(r!==Tl(this,Fc)){WS(this,Fc,r);for(let n of Tl(this,em)){let i=n.selector(Tl(this,Fc));tP(n.current,i)||(n.current=i,n.callback(i))}for(let n of Tl(this,Z1).get(e.type))n(Tl(this,Fc),e)}}};Fc=new WeakMap,Z1=new WeakMap,em=new WeakMap;function tP(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null?!1:Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:Dw(t[Symbol.iterator](),e[Symbol.iterator]()):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?t.size!==e.size?!1:Dw(t.entries(),e.entries()):qS(t)&&qS(e)?Dw(Object.entries(t)[Symbol.iterator](),Object.entries(e)[Symbol.iterator]()):!1}function Dw(t,e){do{let r=t.next(),n=e.next();if(r.done&&n.done)return!0;if(r.done||n.done||!Object.is(r.value,n.value))return!1}while(!0)}function qS(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||Object.getPrototypeOf(e)===null}function GS(t){let[e,r]=t(),n=Ml();return(...i)=>{e(...i),n.dispose(),n.microTask(r)}}var Zq=Object.defineProperty,eG=(t,e,r)=>e in t?Zq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,KS=(t,e,r)=>(eG(t,typeof e!="symbol"?e+"":e,r),r),rP=(t=>(t[t.Push=0]="Push",t[t.Pop=1]="Pop",t))(rP||{});let tG={0(t,e){let r=e.id,n=t.stack,i=t.stack.indexOf(r);if(i!==-1){let s=t.stack.slice();return s.splice(i,1),s.push(r),n=s,{...t,stack:n}}return{...t,stack:[...t.stack,r]}},1(t,e){let r=e.id,n=t.stack.indexOf(r);if(n===-1)return t;let i=t.stack.slice();return i.splice(n,1),{...t,stack:i}}},rG=class nP extends eP{constructor(){super(...arguments),KS(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),KS(this,"selectors",{isTop:(e,r)=>e.stack[e.stack.length-1]===r,inStack:(e,r)=>e.stack.includes(r)})}static new(){return new nP({stack:[]})}reduce(e,r){return Jp(r.type,tG,e,r)}};const Tb=new J7(()=>rG.new());var Ow={exports:{}},Mw={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XS;function nG(){if(XS)return Mw;XS=1;var t=Sv();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var r=typeof Object.is=="function"?Object.is:e,n=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,a=t.useMemo,o=t.useDebugValue;return Mw.useSyncExternalStoreWithSelector=function(l,c,f,d,m){var p=i(null);if(p.current===null){var _={hasValue:!1,value:null};p.current=_}else _=p.current;p=a(function(){function b(X){if(!k){if(k=!0,F=X,X=d(X),m!==void 0&&_.hasValue){var G=_.value;if(m(G,X))return N=G}return N=X}if(G=N,r(F,X))return G;var P=d(X);return m!==void 0&&m(G,P)?(F=X,G):(F=X,N=P)}var k=!1,F,N,B=f===void 0?null:f;return[function(){return b(c())},B===null?void 0:function(){return b(B())}]},[c,f,d,m]);var w=n(l,p[0],p[1]);return s(function(){_.hasValue=!0,_.value=w},[w]),o(w),w},Mw}var YS;function iG(){return YS||(YS=1,Ow.exports=nG()),Ow.exports}var sG=iG();function Uc(t,e,r=tP){return sG.useSyncExternalStoreWithSelector(Ln(n=>t.subscribe(aG,n)),Ln(()=>t.state),Ln(()=>t.state),Ln(e),r)}function aG(t){return t}function iP(t,e){let r=H.useId(),n=Tb.get(e),[i,s]=Uc(n,H.useCallback(a=>[n.selectors.isTop(a,r),n.selectors.inStack(a,r)],[n,r]));return Ns(()=>{if(t)return n.actions.push(r),()=>n.actions.pop(r)},[n,t,r]),t?s?i:!0:!1}let m5=new Map,dm=new Map;function QS(t){var e;let r=(e=dm.get(t))!=null?e:0;return dm.set(t,r+1),r!==0?()=>JS(t):(m5.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>JS(t))}function JS(t){var e;let r=(e=dm.get(t))!=null?e:1;if(r===1?dm.delete(t):dm.set(t,r-1),r!==1)return;let n=m5.get(t);n&&(n["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",n["aria-hidden"]),t.inert=n.inert,m5.delete(t))}function oG(t,{allowed:e,disallowed:r}={}){let n=iP(t,"inert-others");Ns(()=>{var i,s;if(!n)return;let a=Ml();for(let l of(i=r?.())!=null?i:[])l&&a.add(QS(l));let o=(s=e?.())!=null?s:[];for(let l of o){if(!l)continue;let c=Qp(l);if(!c)continue;let f=l.parentElement;for(;f&&f!==c.body;){for(let d of f.children)o.some(m=>d.contains(m))||a.add(QS(d));f=f.parentElement}}return a.dispose},[n,e,r])}function lG(t,e,r){let n=Ag(i=>{let s=i.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&r()});H.useEffect(()=>{if(!t)return;let i=e===null?null:Yu(e)?e:e.current;if(!i)return;let s=Ml();if(typeof ResizeObserver<"u"){let a=new ResizeObserver(()=>n.current(i));a.observe(i),s.add(()=>a.disconnect())}if(typeof IntersectionObserver<"u"){let a=new IntersectionObserver(()=>n.current(i));a.observe(i),s.add(()=>a.disconnect())}return()=>s.dispose()},[e,n,t])}let g5=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),cG=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var x5=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(x5||{}),uG=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(uG||{}),fG=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(fG||{});function sP(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(g5)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}function hG(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(cG)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var Ab=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(Ab||{});function Cb(t,e=0){var r;return t===((r=Qp(t))==null?void 0:r.body)?!1:Jp(e,{0(){return t.matches(g5)},1(){let n=t;for(;n!==null;){if(n.matches(g5))return!0;n=n.parentElement}return!1}})}function aP(t){let e=Qp(t);Ml().nextFrame(()=>{e&&ld(e.activeElement)&&!Cb(e.activeElement,0)&&pG(t)})}var dG=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(dG||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function pG(t){t?.focus({preventScroll:!0})}let mG=["textarea","input"].join(",");function gG(t){var e,r;return(r=(e=t?.matches)==null?void 0:e.call(t,mG))!=null?r:!1}function oP(t,e=r=>r){return t.slice().sort((r,n)=>{let i=e(r),s=e(n);if(i===null||s===null)return 0;let a=i.compareDocumentPosition(s);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function xG(t,e){return vG(sP(),e,{relativeTo:t})}function vG(t,e,{sorted:r=!0,relativeTo:n=null,skipElements:i=[]}={}){let s=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,a=Array.isArray(t)?r?oP(t):t:e&64?hG(t):sP(t);i.length>0&&a.length>1&&(a=a.filter(p=>!i.some(_=>_!=null&&"current"in _?_?.current===p:_===p))),n=n??s.activeElement;let o=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,a.indexOf(n))-1;if(e&4)return Math.max(0,a.indexOf(n))+1;if(e&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=e&32?{preventScroll:!0}:{},f=0,d=a.length,m;do{if(f>=d||f+d<=0)return 0;let p=l+f;if(e&16)p=(p+d)%d;else{if(p<0)return 3;if(p>=d)return 1}m=a[p],m?.focus(c),f+=o}while(m!==s.activeElement);return e&6&&gG(m)&&m.select(),2}function lP(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function yG(){return/Android/gi.test(window.navigator.userAgent)}function ZS(){return lP()||yG()}function G0(t,e,r,n){let i=Ag(r);H.useEffect(()=>{if(!t)return;function s(a){i.current(a)}return document.addEventListener(e,s,n),()=>document.removeEventListener(e,s,n)},[t,e,n])}function wG(t,e,r,n){let i=Ag(r);H.useEffect(()=>{if(!t)return;function s(a){i.current(a)}return window.addEventListener(e,s,n),()=>window.removeEventListener(e,s,n)},[t,e,n])}const ek=30;function _G(t,e,r){let n=Ag(r),i=H.useCallback(function(o,l){if(o.defaultPrevented)return;let c=l(o);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let f=(function d(m){return typeof m=="function"?d(m()):Array.isArray(m)||m instanceof Set?m:[m]})(e);for(let d of f)if(d!==null&&(d.contains(c)||o.composed&&o.composedPath().includes(d)))return;return!Cb(c,Ab.Loose)&&c.tabIndex!==-1&&o.preventDefault(),n.current(o,c)},[n,e]),s=H.useRef(null);G0(t,"pointerdown",o=>{var l,c;ZS()||(s.current=((c=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:c[0])||o.target)},!0),G0(t,"pointerup",o=>{if(ZS()||!s.current)return;let l=s.current;return s.current=null,i(o,()=>l)},!0);let a=H.useRef({x:0,y:0});G0(t,"touchstart",o=>{a.current.x=o.touches[0].clientX,a.current.y=o.touches[0].clientY},!0),G0(t,"touchend",o=>{let l={x:o.changedTouches[0].clientX,y:o.changedTouches[0].clientY};if(!(Math.abs(l.x-a.current.x)>=ek||Math.abs(l.y-a.current.y)>=ek))return i(o,()=>ld(o.target)?o.target:null)},!0),wG(t,"blur",o=>i(o,()=>Lq(window.document.activeElement)?window.document.activeElement:null),!0)}function v5(...t){return H.useMemo(()=>Qp(...t),[...t])}var bG=(t=>(t[t.Ignore=0]="Ignore",t[t.Select=1]="Select",t[t.Close=2]="Close",t))(bG||{});const Dx={Ignore:{kind:0},Select:t=>({kind:1,target:t}),Close:{kind:2}},EG=200,tk=5;function SG(t,{trigger:e,action:r,close:n,select:i}){let s=H.useRef(null),a=H.useRef(null),o=H.useRef(null);G0(t&&e!==null,"pointerdown",l=>{Eb(l?.target)&&e!=null&&e.contains(l.target)&&(a.current=l.x,o.current=l.y,s.current=l.timeStamp)}),G0(t&&e!==null,"pointerup",l=>{var c,f;let d=s.current;if(d===null||(s.current=null,!ld(l.target))||Math.abs(l.x-((c=a.current)!=null?c:l.x))<tk&&Math.abs(l.y-((f=o.current)!=null?f:l.y))<tk)return;let m=r(l);switch(m.kind){case 0:return;case 1:{l.timeStamp-d>EG&&(i(m.target),n());break}case 2:{n();break}}},{capture:!0})}function kG(t,e){return H.useMemo(()=>{var r;if(t.type)return t.type;let n=(r=t.as)!=null?r:"button";if(typeof n=="string"&&n.toLowerCase()==="button"||e?.tagName==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}function TG(t){return H.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}function AG(t,e){let r=t(),n=new Set;return{getSnapshot(){return r},subscribe(i){return n.add(i),()=>n.delete(i)},dispatch(i,...s){let a=e[i].call(r,...s);a&&(r=a,n.forEach(o=>o()))}}}function CG(){let t;return{before({doc:e}){var r;let n=e.documentElement,i=(r=e.defaultView)!=null?r:window;t=Math.max(0,i.innerWidth-n.clientWidth)},after({doc:e,d:r}){let n=e.documentElement,i=Math.max(0,n.clientWidth-n.offsetWidth),s=Math.max(0,t-i);r.style(n,"paddingRight",`${s}px`)}}}function IG(){return lP()?{before({doc:t,d:e,meta:r}){function n(i){return r.containers.flatMap(s=>s()).some(s=>s.contains(i))}e.microTask(()=>{var i;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let o=Ml();o.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>o.dispose()))}let s=(i=window.scrollY)!=null?i:window.pageYOffset,a=null;e.addEventListener(t,"click",o=>{if(ld(o.target))try{let l=o.target.closest("a");if(!l)return;let{hash:c}=new URL(l.href),f=t.querySelector(c);ld(f)&&!n(f)&&(a=f)}catch{}},!0),e.addEventListener(t,"touchstart",o=>{if(ld(o.target)&&Fq(o.target))if(n(o.target)){let l=o.target;for(;l.parentElement&&n(l.parentElement);)l=l.parentElement;e.style(l,"overscrollBehavior","contain")}else e.style(o.target,"touchAction","none")}),e.addEventListener(t,"touchmove",o=>{if(ld(o.target)){if(G7(o.target))return;if(n(o.target)){let l=o.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&o.preventDefault()}else o.preventDefault()}},{passive:!1}),e.add(()=>{var o;let l=(o=window.scrollY)!=null?o:window.pageYOffset;s!==l&&window.scrollTo(0,s),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function NG(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function PG(t){let e={};for(let r of t)Object.assign(e,r(e));return e}let cd=AG(()=>new Map,{PUSH(t,e){var r;let n=(r=this.get(t))!=null?r:{doc:t,count:0,d:Ml(),meta:new Set};return n.count++,n.meta.add(e),this.set(t,n),this},POP(t,e){let r=this.get(t);return r&&(r.count--,r.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:r}){let n={doc:t,d:e,meta:PG(r)},i=[IG(),CG(),NG()];i.forEach(({before:s})=>s?.(n)),i.forEach(({after:s})=>s?.(n))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});cd.subscribe(()=>{let t=cd.getSnapshot(),e=new Map;for(let[r]of t)e.set(r,r.documentElement.style.overflow);for(let r of t.values()){let n=e.get(r.doc)==="hidden",i=r.count!==0;(i&&!n||!i&&n)&&cd.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&cd.dispatch("TEARDOWN",r)}});function RG(t,e,r=()=>({containers:[]})){let n=TG(cd),i=e?n.get(e):void 0,s=i?i.count>0:!1;return Ns(()=>{if(!(!e||!t))return cd.dispatch("PUSH",e,r),()=>cd.dispatch("POP",e,r)},[t,e]),s}function FG(t,e,r=()=>[document.body]){let n=iP(t,"scroll-lock");RG(n,e,i=>{var s;return{containers:[...(s=i.containers)!=null?s:[],r]}})}function rk(t){return[t.screenX,t.screenY]}function LG(){let t=H.useRef([-1,-1]);return{wasMoved(e){let r=rk(e);return t.current[0]===r[0]&&t.current[1]===r[1]?!1:(t.current=r,!0)},update(e){t.current=rk(e)}}}function DG(t=0){let[e,r]=H.useState(t),n=H.useCallback(l=>r(l),[e]),i=H.useCallback(l=>r(c=>c|l),[e]),s=H.useCallback(l=>(e&l)===l,[e]),a=H.useCallback(l=>r(c=>c&~l),[r]),o=H.useCallback(l=>r(c=>c^l),[r]);return{flags:e,setFlag:n,addFlag:i,hasFlag:s,removeFlag:a,toggleFlag:o}}var OG={},nk,ik;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((nk=process==null?void 0:OG)==null?void 0:nk.NODE_ENV)==="test"&&typeof((ik=Element?.prototype)==null?void 0:ik.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var MG=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(MG||{});function jG(t){let e={};for(let r in t)t[r]===!0&&(e[`data-${r}`]="");return e}function BG(t,e,r,n){let[i,s]=H.useState(r),{hasFlag:a,addFlag:o,removeFlag:l}=DG(t&&i?3:0),c=H.useRef(!1),f=H.useRef(!1),d=ny();return Ns(()=>{var m;if(t){if(r&&s(!0),!e){r&&o(3);return}return(m=void 0)==null||m.call(n,r),VG(e,{inFlight:c,prepare(){f.current?f.current=!1:f.current=c.current,c.current=!0,!f.current&&(r?(o(3),l(4)):(o(4),l(2)))},run(){f.current?r?(l(3),o(4)):(l(4),o(3)):r?l(1):o(1)},done(){var p;f.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(c.current=!1,l(7),r||s(!1),(p=void 0)==null||p.call(n,r))}})}},[t,r,e,d]),t?[i,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function VG(t,{prepare:e,run:r,done:n,inFlight:i}){let s=Ml();return zG(t,{prepare:e,inFlight:i}),s.nextFrame(()=>{r(),s.requestAnimationFrame(()=>{s.add(UG(t,n))})}),s.dispose}function UG(t,e){var r,n;let i=Ml();if(!t)return i.dispose;let s=!1;i.add(()=>{s=!0});let a=(n=(r=t.getAnimations)==null?void 0:r.call(t).filter(o=>o instanceof CSSTransition))!=null?n:[];return a.length===0?(e(),i.dispose):(Promise.allSettled(a.map(o=>o.finished)).then(()=>{s||e()}),i.dispose)}function zG(t,{inFlight:e,prepare:r}){if(e!=null&&e.current){r();return}let n=t.style.transition;t.style.transition="none",r(),t.offsetHeight,t.style.transition=n}function $G(t,{container:e,accept:r,walk:n}){let i=H.useRef(r),s=H.useRef(n);H.useEffect(()=>{i.current=r,s.current=n},[r,n]),Ns(()=>{if(!e||!t)return;let a=Qp(e);if(!a)return;let o=i.current,l=s.current,c=Object.assign(d=>o(d),{acceptNode:o}),f=a.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,c,!1);for(;f.nextNode();)l(f.currentNode)},[e,t,i,s])}function ay(){return typeof window<"u"}function Zp(t){return cP(t)?(t.nodeName||"").toLowerCase():"#document"}function ol(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function iu(t){var e;return(e=(cP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function cP(t){return ay()?t instanceof Node||t instanceof ol(t).Node:!1}function vo(t){return ay()?t instanceof Element||t instanceof ol(t).Element:!1}function Zc(t){return ay()?t instanceof HTMLElement||t instanceof ol(t).HTMLElement:!1}function sk(t){return!ay()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ol(t).ShadowRoot}const HG=new Set(["inline","contents"]);function Cg(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=hc(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!HG.has(i)}const WG=new Set(["table","td","th"]);function qG(t){return WG.has(Zp(t))}const GG=[":popover-open",":modal"];function oy(t){return GG.some(e=>{try{return t.matches(e)}catch{return!1}})}const KG=["transform","translate","scale","rotate","perspective"],XG=["transform","translate","scale","rotate","perspective","filter"],YG=["paint","layout","strict","content"];function Ib(t){const e=Nb(),r=vo(t)?hc(t):t;return KG.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||XG.some(n=>(r.willChange||"").includes(n))||YG.some(n=>(r.contain||"").includes(n))}function QG(t){let e=fh(t);for(;Zc(e)&&!Pp(e);){if(Ib(e))return e;if(oy(e))return null;e=fh(e)}return null}function Nb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const JG=new Set(["html","body","#document"]);function Pp(t){return JG.has(Zp(t))}function hc(t){return ol(t).getComputedStyle(t)}function ly(t){return vo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function fh(t){if(Zp(t)==="html")return t;const e=t.assignedSlot||t.parentNode||sk(t)&&t.host||iu(t);return sk(e)?e.host:e}function uP(t){const e=fh(t);return Pp(e)?t.ownerDocument?t.ownerDocument.body:t.body:Zc(e)&&Cg(e)?e:uP(e)}function Bm(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=uP(t),s=i===((n=t.ownerDocument)==null?void 0:n.body),a=ol(i);if(s){const o=y5(a);return e.concat(a,a.visualViewport||[],Cg(i)?i:[],o&&r?Bm(o):[])}return e.concat(i,Bm(i,[],r))}function y5(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ZG(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:r,version:n}=e;return r+"/"+n}).join(" "):navigator.userAgent}const Ld=Math.min,to=Math.max,Vm=Math.round,Ox=Math.floor,Yc=t=>({x:t,y:t}),eK={left:"right",right:"left",bottom:"top",top:"bottom"},tK={start:"end",end:"start"};function ak(t,e,r){return to(t,Ld(e,r))}function e1(t,e){return typeof t=="function"?t(e):t}function hh(t){return t.split("-")[0]}function Ig(t){return t.split("-")[1]}function fP(t){return t==="x"?"y":"x"}function hP(t){return t==="y"?"height":"width"}const rK=new Set(["top","bottom"]);function Ru(t){return rK.has(hh(t))?"y":"x"}function dP(t){return fP(Ru(t))}function nK(t,e,r){r===void 0&&(r=!1);const n=Ig(t),i=dP(t),s=hP(i);let a=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=tv(a)),[a,tv(a)]}function iK(t){const e=tv(t);return[w5(t),e,w5(e)]}function w5(t){return t.replace(/start|end/g,e=>tK[e])}const ok=["left","right"],lk=["right","left"],sK=["top","bottom"],aK=["bottom","top"];function oK(t,e,r){switch(t){case"top":case"bottom":return r?e?lk:ok:e?ok:lk;case"left":case"right":return e?sK:aK;default:return[]}}function lK(t,e,r,n){const i=Ig(t);let s=oK(hh(t),r==="start",n);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(w5)))),s}function tv(t){return t.replace(/left|right|bottom|top/g,e=>eK[e])}function cK(t){return{top:0,right:0,bottom:0,left:0,...t}}function uK(t){return typeof t!="number"?cK(t):{top:t,right:t,bottom:t,left:t}}function rv(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function ck(t,e,r){let{reference:n,floating:i}=t;const s=Ru(e),a=dP(e),o=hP(a),l=hh(e),c=s==="y",f=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,m=n[o]/2-i[o]/2;let p;switch(l){case"top":p={x:f,y:n.y-i.height};break;case"bottom":p={x:f,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:d};break;case"left":p={x:n.x-i.width,y:d};break;default:p={x:n.x,y:n.y}}switch(Ig(e)){case"start":p[a]-=m*(r&&c?-1:1);break;case"end":p[a]+=m*(r&&c?-1:1);break}return p}const fK=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:a}=r,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:f,y:d}=ck(c,n,l),m=n,p={},_=0;for(let w=0;w<o.length;w++){const{name:b,fn:k}=o[w],{x:F,y:N,data:B,reset:X}=await k({x:f,y:d,initialPlacement:n,placement:m,strategy:i,middlewareData:p,rects:c,platform:a,elements:{reference:t,floating:e}});f=F??f,d=N??d,p={...p,[b]:{...p[b],...B}},X&&_<=50&&(_++,typeof X=="object"&&(X.placement&&(m=X.placement),X.rects&&(c=X.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):X.rects),{x:f,y:d}=ck(c,m,l)),w=-1)}return{x:f,y:d,placement:m,strategy:i,middlewareData:p}};async function cy(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:a,elements:o,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:m=!1,padding:p=0}=e1(e,t),_=uK(p),b=o[m?d==="floating"?"reference":"floating":d],k=rv(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(b)))==null||r?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:f,strategy:l})),F=d==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,N=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),B=await(s.isElement==null?void 0:s.isElement(N))?await(s.getScale==null?void 0:s.getScale(N))||{x:1,y:1}:{x:1,y:1},X=rv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:F,offsetParent:N,strategy:l}):F);return{top:(k.top-X.top+_.top)/B.y,bottom:(X.bottom-k.bottom+_.bottom)/B.y,left:(k.left-X.left+_.left)/B.x,right:(X.right-k.right+_.right)/B.x}}const hK=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:w=!0,...b}=e1(t,e);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const k=hh(i),F=Ru(o),N=hh(o)===o,B=await(l.isRTL==null?void 0:l.isRTL(c.floating)),X=m||(N||!w?[tv(o)]:iK(o)),G=_!=="none";!m&&G&&X.push(...lK(o,w,_,B));const P=[o,...X],A=await cy(e,b),T=[];let O=((n=s.flip)==null?void 0:n.overflows)||[];if(f&&T.push(A[k]),d){const ie=nK(i,a,B);T.push(A[ie[0]],A[ie[1]])}if(O=[...O,{placement:i,overflows:T}],!T.every(ie=>ie<=0)){var I,D;const ie=(((I=s.flip)==null?void 0:I.index)||0)+1,be=P[ie];if(be&&(!(d==="alignment"?F!==Ru(be):!1)||O.every(le=>Ru(le.placement)===F?le.overflows[0]>0:!0)))return{data:{index:ie,overflows:O},reset:{placement:be}};let Ne=(D=O.filter(we=>we.overflows[0]<=0).sort((we,le)=>we.overflows[1]-le.overflows[1])[0])==null?void 0:D.placement;if(!Ne)switch(p){case"bestFit":{var M;const we=(M=O.filter(le=>{if(G){const J=Ru(le.placement);return J===F||J==="y"}return!0}).map(le=>[le.placement,le.overflows.filter(J=>J>0).reduce((J,ue)=>J+ue,0)]).sort((le,J)=>le[1]-J[1])[0])==null?void 0:M[0];we&&(Ne=we);break}case"initialPlacement":Ne=o;break}if(i!==Ne)return{reset:{placement:Ne}}}return{}}}},dK=new Set(["left","top"]);async function pK(t,e){const{placement:r,platform:n,elements:i}=t,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),a=hh(r),o=Ig(r),l=Ru(r)==="y",c=dK.has(a)?-1:1,f=s&&l?-1:1,d=e1(e,t);let{mainAxis:m,crossAxis:p,alignmentAxis:_}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof _=="number"&&(p=o==="end"?_*-1:_),l?{x:p*f,y:m*c}:{x:m*c,y:p*f}}const mK=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:s,placement:a,middlewareData:o}=e,l=await pK(e,t);return a===((r=o.offset)==null?void 0:r.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:a}}}}},gK=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:b=>{let{x:k,y:F}=b;return{x:k,y:F}}},...l}=e1(t,e),c={x:r,y:n},f=await cy(e,l),d=Ru(hh(i)),m=fP(d);let p=c[m],_=c[d];if(s){const b=m==="y"?"top":"left",k=m==="y"?"bottom":"right",F=p+f[b],N=p-f[k];p=ak(F,p,N)}if(a){const b=d==="y"?"top":"left",k=d==="y"?"bottom":"right",F=_+f[b],N=_-f[k];_=ak(F,_,N)}const w=o.fn({...e,[m]:p,[d]:_});return{...w,data:{x:w.x-r,y:w.y-n,enabled:{[m]:s,[d]:a}}}}}},xK=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:i,rects:s,platform:a,elements:o}=e,{apply:l=()=>{},...c}=e1(t,e),f=await cy(e,c),d=hh(i),m=Ig(i),p=Ru(i)==="y",{width:_,height:w}=s.floating;let b,k;d==="top"||d==="bottom"?(b=d,k=m===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(k=d,b=m==="end"?"top":"bottom");const F=w-f.top-f.bottom,N=_-f.left-f.right,B=Ld(w-f[b],F),X=Ld(_-f[k],N),G=!e.middlewareData.shift;let P=B,A=X;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(A=N),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(P=F),G&&!m){const O=to(f.left,0),I=to(f.right,0),D=to(f.top,0),M=to(f.bottom,0);p?A=_-2*(O!==0||I!==0?O+I:to(f.left,f.right)):P=w-2*(D!==0||M!==0?D+M:to(f.top,f.bottom))}await l({...e,availableWidth:A,availableHeight:P});const T=await a.getDimensions(o.floating);return _!==T.width||w!==T.height?{reset:{rects:!0}}:{}}}};function pP(t){const e=hc(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Zc(t),s=i?t.offsetWidth:r,a=i?t.offsetHeight:n,o=Vm(r)!==s||Vm(n)!==a;return o&&(r=s,n=a),{width:r,height:n,$:o}}function Pb(t){return vo(t)?t:t.contextElement}function ip(t){const e=Pb(t);if(!Zc(e))return Yc(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:s}=pP(e);let a=(s?Vm(r.width):r.width)/n,o=(s?Vm(r.height):r.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const vK=Yc(0);function mP(t){const e=ol(t);return!Nb()||!e.visualViewport?vK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function yK(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==ol(t)?!1:e}function Dd(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),s=Pb(t);let a=Yc(1);e&&(n?vo(n)&&(a=ip(n)):a=ip(t));const o=yK(s,r,n)?mP(s):Yc(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,f=i.width/a.x,d=i.height/a.y;if(s){const m=ol(s),p=n&&vo(n)?ol(n):n;let _=m,w=y5(_);for(;w&&n&&p!==_;){const b=ip(w),k=w.getBoundingClientRect(),F=hc(w),N=k.left+(w.clientLeft+parseFloat(F.paddingLeft))*b.x,B=k.top+(w.clientTop+parseFloat(F.paddingTop))*b.y;l*=b.x,c*=b.y,f*=b.x,d*=b.y,l+=N,c+=B,_=ol(w),w=y5(_)}}return rv({width:f,height:d,x:l,y:c})}function uy(t,e){const r=ly(t).scrollLeft;return e?e.left+r:Dd(iu(t)).left+r}function gP(t,e){const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-uy(t,r),i=r.top+e.scrollTop;return{x:n,y:i}}function wK(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const s=i==="fixed",a=iu(n),o=e?oy(e.floating):!1;if(n===a||o&&s)return r;let l={scrollLeft:0,scrollTop:0},c=Yc(1);const f=Yc(0),d=Zc(n);if((d||!d&&!s)&&((Zp(n)!=="body"||Cg(a))&&(l=ly(n)),Zc(n))){const p=Dd(n);c=ip(n),f.x=p.x+n.clientLeft,f.y=p.y+n.clientTop}const m=a&&!d&&!s?gP(a,l):Yc(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+f.x+m.x,y:r.y*c.y-l.scrollTop*c.y+f.y+m.y}}function _K(t){return Array.from(t.getClientRects())}function bK(t){const e=iu(t),r=ly(t),n=t.ownerDocument.body,i=to(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=to(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+uy(t);const o=-r.scrollTop;return hc(n).direction==="rtl"&&(a+=to(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:a,y:o}}const uk=25;function EK(t,e){const r=ol(t),n=iu(t),i=r.visualViewport;let s=n.clientWidth,a=n.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const f=Nb();(!f||f&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}const c=uy(n);if(c<=0){const f=n.ownerDocument,d=f.body,m=getComputedStyle(d),p=f.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,_=Math.abs(n.clientWidth-d.clientWidth-p);_<=uk&&(s-=_)}else c<=uk&&(s+=c);return{width:s,height:a,x:o,y:l}}const SK=new Set(["absolute","fixed"]);function kK(t,e){const r=Dd(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,s=Zc(t)?ip(t):Yc(1),a=t.clientWidth*s.x,o=t.clientHeight*s.y,l=i*s.x,c=n*s.y;return{width:a,height:o,x:l,y:c}}function fk(t,e,r){let n;if(e==="viewport")n=EK(t,r);else if(e==="document")n=bK(iu(t));else if(vo(e))n=kK(e,r);else{const i=mP(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return rv(n)}function xP(t,e){const r=fh(t);return r===e||!vo(r)||Pp(r)?!1:hc(r).position==="fixed"||xP(r,e)}function TK(t,e){const r=e.get(t);if(r)return r;let n=Bm(t,[],!1).filter(o=>vo(o)&&Zp(o)!=="body"),i=null;const s=hc(t).position==="fixed";let a=s?fh(t):t;for(;vo(a)&&!Pp(a);){const o=hc(a),l=Ib(a);!l&&o.position==="fixed"&&(i=null),(s?!l&&!i:!l&&o.position==="static"&&!!i&&SK.has(i.position)||Cg(a)&&!l&&xP(t,a))?n=n.filter(f=>f!==a):i=o,a=fh(a)}return e.set(t,n),n}function AK(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const a=[...r==="clippingAncestors"?oy(e)?[]:TK(e,this._c):[].concat(r),n],o=a[0],l=a.reduce((c,f)=>{const d=fk(e,f,i);return c.top=to(d.top,c.top),c.right=Ld(d.right,c.right),c.bottom=Ld(d.bottom,c.bottom),c.left=to(d.left,c.left),c},fk(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function CK(t){const{width:e,height:r}=pP(t);return{width:e,height:r}}function IK(t,e,r){const n=Zc(e),i=iu(e),s=r==="fixed",a=Dd(t,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=Yc(0);function c(){l.x=uy(i)}if(n||!n&&!s)if((Zp(e)!=="body"||Cg(i))&&(o=ly(e)),n){const p=Dd(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else i&&c();s&&!n&&i&&c();const f=i&&!n&&!s?gP(i,o):Yc(0),d=a.left+o.scrollLeft-l.x-f.x,m=a.top+o.scrollTop-l.y-f.y;return{x:d,y:m,width:a.width,height:a.height}}function jw(t){return hc(t).position==="static"}function hk(t,e){if(!Zc(t)||hc(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return iu(t)===r&&(r=r.ownerDocument.body),r}function vP(t,e){const r=ol(t);if(oy(t))return r;if(!Zc(t)){let i=fh(t);for(;i&&!Pp(i);){if(vo(i)&&!jw(i))return i;i=fh(i)}return r}let n=hk(t,e);for(;n&&qG(n)&&jw(n);)n=hk(n,e);return n&&Pp(n)&&jw(n)&&!Ib(n)?r:n||QG(t)||r}const NK=async function(t){const e=this.getOffsetParent||vP,r=this.getDimensions,n=await r(t.floating);return{reference:IK(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function PK(t){return hc(t).direction==="rtl"}const RK={convertOffsetParentRelativeRectToViewportRelativeRect:wK,getDocumentElement:iu,getClippingRect:AK,getOffsetParent:vP,getElementRects:NK,getClientRects:_K,getDimensions:CK,getScale:ip,isElement:vo,isRTL:PK};function yP(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function FK(t,e){let r=null,n;const i=iu(t);function s(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:f,top:d,width:m,height:p}=c;if(o||e(),!m||!p)return;const _=Ox(d),w=Ox(i.clientWidth-(f+m)),b=Ox(i.clientHeight-(d+p)),k=Ox(f),N={rootMargin:-_+"px "+-w+"px "+-b+"px "+-k+"px",threshold:to(0,Ld(1,l))||1};let B=!0;function X(G){const P=G[0].intersectionRatio;if(P!==l){if(!B)return a();P?a(!1,P):n=setTimeout(()=>{a(!1,1e-7)},1e3)}P===1&&!yP(c,t.getBoundingClientRect())&&a(),B=!1}try{r=new IntersectionObserver(X,{...N,root:i.ownerDocument})}catch{r=new IntersectionObserver(X,N)}r.observe(t)}return a(!0),s}function LK(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=Pb(t),f=i||s?[...c?Bm(c):[],...Bm(e)]:[];f.forEach(k=>{i&&k.addEventListener("scroll",r,{passive:!0}),s&&k.addEventListener("resize",r)});const d=c&&o?FK(c,r):null;let m=-1,p=null;a&&(p=new ResizeObserver(k=>{let[F]=k;F&&F.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var N;(N=p)==null||N.observe(e)})),r()}),c&&!l&&p.observe(c),p.observe(e));let _,w=l?Dd(t):null;l&&b();function b(){const k=Dd(t);w&&!yP(w,k)&&r(),w=k,_=requestAnimationFrame(b)}return r(),()=>{var k;f.forEach(F=>{i&&F.removeEventListener("scroll",r),s&&F.removeEventListener("resize",r)}),d?.(),(k=p)==null||k.disconnect(),p=null,l&&cancelAnimationFrame(_)}}const Bw=cy,DK=mK,OK=gK,MK=hK,jK=xK,BK=(t,e,r)=>{const n=new Map,i={platform:RK,...r},s={...i.platform,_c:n};return fK(t,e,{...i,platform:s})};var VK=typeof document<"u",UK=function(){},v2=VK?H.useLayoutEffect:UK;function nv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!nv(t[n],e[n]))return!1;return!0}if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){const s=i[n];if(!(s==="_owner"&&t.$$typeof)&&!nv(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function wP(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function dk(t,e){const r=wP(t);return Math.round(e*r)/r}function Vw(t){const e=H.useRef(t);return v2(()=>{e.current=t}),e}function zK(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=t,[f,d]=H.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=H.useState(n);nv(m,n)||p(n);const[_,w]=H.useState(null),[b,k]=H.useState(null),F=H.useCallback(le=>{le!==G.current&&(G.current=le,w(le))},[]),N=H.useCallback(le=>{le!==P.current&&(P.current=le,k(le))},[]),B=s||_,X=a||b,G=H.useRef(null),P=H.useRef(null),A=H.useRef(f),T=l!=null,O=Vw(l),I=Vw(i),D=Vw(c),M=H.useCallback(()=>{if(!G.current||!P.current)return;const le={placement:e,strategy:r,middleware:m};I.current&&(le.platform=I.current),BK(G.current,P.current,le).then(J=>{const ue={...J,isPositioned:D.current!==!1};ie.current&&!nv(A.current,ue)&&(A.current=ue,Qf.flushSync(()=>{d(ue)}))})},[m,e,r,I,D]);v2(()=>{c===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,d(le=>({...le,isPositioned:!1})))},[c]);const ie=H.useRef(!1);v2(()=>(ie.current=!0,()=>{ie.current=!1}),[]),v2(()=>{if(B&&(G.current=B),X&&(P.current=X),B&&X){if(O.current)return O.current(B,X,M);M()}},[B,X,M,O,T]);const be=H.useMemo(()=>({reference:G,floating:P,setReference:F,setFloating:N}),[F,N]),Ne=H.useMemo(()=>({reference:B,floating:X}),[B,X]),we=H.useMemo(()=>{const le={position:r,left:0,top:0};if(!Ne.floating)return le;const J=dk(Ne.floating,f.x),ue=dk(Ne.floating,f.y);return o?{...le,transform:"translate("+J+"px, "+ue+"px)",...wP(Ne.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:J,top:ue}},[r,o,Ne.floating,f.x,f.y]);return H.useMemo(()=>({...f,update:M,refs:be,elements:Ne,floatingStyles:we}),[f,M,be,Ne,we])}const _P=(t,e)=>({...DK(t),options:[t,e]}),$K=(t,e)=>({...OK(t),options:[t,e]}),HK=(t,e)=>({...MK(t),options:[t,e]}),WK=(t,e)=>({...jK(t),options:[t,e]}),bP={...A2},qK=bP.useInsertionEffect,GK=qK||(t=>t());function EP(t){const e=H.useRef(()=>{});return GK(()=>{e.current=t}),H.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e.current==null?void 0:e.current(...n)},[])}var _5=typeof document<"u"?H.useLayoutEffect:H.useEffect;let pk=!1,KK=0;const mk=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+KK++;function XK(){const[t,e]=H.useState(()=>pk?mk():void 0);return _5(()=>{t==null&&e(mk())},[]),H.useEffect(()=>{pk=!0},[]),t}const YK=bP.useId,QK=YK||XK;function JK(){const t=new Map;return{emit(e,r){var n;(n=t.get(e))==null||n.forEach(i=>i(r))},on(e,r){t.set(e,[...t.get(e)||[],r])},off(e,r){var n;t.set(e,((n=t.get(e))==null?void 0:n.filter(i=>i!==r))||[])}}}const ZK=H.createContext(null),eX=H.createContext(null),tX=()=>{var t;return((t=H.useContext(ZK))==null?void 0:t.id)||null},rX=()=>H.useContext(eX),nX="data-floating-ui-focusable";function iX(t){const{open:e=!1,onOpenChange:r,elements:n}=t,i=QK(),s=H.useRef({}),[a]=H.useState(()=>JK()),o=tX()!=null,[l,c]=H.useState(n.reference),f=EP((p,_,w)=>{s.current.openEvent=p?_:void 0,a.emit("openchange",{open:p,event:_,reason:w,nested:o}),r?.(p,_,w)}),d=H.useMemo(()=>({setPositionReference:c}),[]),m=H.useMemo(()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference}),[l,n.reference,n.floating]);return H.useMemo(()=>({dataRef:s,open:e,onOpenChange:f,elements:m,events:a,floatingId:i,refs:d}),[e,f,m,a,i,d])}function sX(t){t===void 0&&(t={});const{nodeId:e}=t,r=iX({...t,elements:{reference:null,floating:null,...t.elements}}),n=t.rootContext||r,i=n.elements,[s,a]=H.useState(null),[o,l]=H.useState(null),f=i?.domReference||s,d=H.useRef(null),m=rX();_5(()=>{f&&(d.current=f)},[f]);const p=zK({...t,elements:{...i,...o&&{reference:o}}}),_=H.useCallback(N=>{const B=vo(N)?{getBoundingClientRect:()=>N.getBoundingClientRect(),contextElement:N}:N;l(B),p.refs.setReference(B)},[p.refs]),w=H.useCallback(N=>{(vo(N)||N===null)&&(d.current=N,a(N)),(vo(p.refs.reference.current)||p.refs.reference.current===null||N!==null&&!vo(N))&&p.refs.setReference(N)},[p.refs]),b=H.useMemo(()=>({...p.refs,setReference:w,setPositionReference:_,domReference:d}),[p.refs,w,_]),k=H.useMemo(()=>({...p.elements,domReference:f}),[p.elements,f]),F=H.useMemo(()=>({...p,...n,refs:b,elements:k,nodeId:e}),[p,b,k,e,n]);return _5(()=>{n.dataRef.current.floatingContext=F;const N=m?.nodesRef.current.find(B=>B.id===e);N&&(N.context=F)}),H.useMemo(()=>({...p,context:F,refs:b,elements:k}),[p,b,k,F])}const gk="active",xk="selected";function Uw(t,e,r){const n=new Map,i=r==="item";let s=t;if(i&&t){const{[gk]:a,[xk]:o,...l}=t;s=l}return{...r==="floating"&&{tabIndex:-1,[nX]:""},...s,...e.map(a=>{const o=a?a[r]:null;return typeof o=="function"?t?o(t):null:o}).concat(t).reduce((a,o)=>(o&&Object.entries(o).forEach(l=>{let[c,f]=l;if(!(i&&[gk,xk].includes(c)))if(c.indexOf("on")===0){if(n.has(c)||n.set(c,[]),typeof f=="function"){var d;(d=n.get(c))==null||d.push(f),a[c]=function(){for(var m,p=arguments.length,_=new Array(p),w=0;w<p;w++)_[w]=arguments[w];return(m=n.get(c))==null?void 0:m.map(b=>b(..._)).find(b=>b!==void 0)}}}else a[c]=f}),a),{})}}function aX(t){t===void 0&&(t=[]);const e=t.map(o=>o?.reference),r=t.map(o=>o?.floating),n=t.map(o=>o?.item),i=H.useCallback(o=>Uw(o,t,"reference"),e),s=H.useCallback(o=>Uw(o,t,"floating"),r),a=H.useCallback(o=>Uw(o,t,"item"),n);return H.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:a}),[i,s,a])}function vk(t,e){return{...t,rects:{...t.rects,floating:{...t.rects.floating,height:e}}}}const oX=t=>({name:"inner",options:t,async fn(e){const{listRef:r,overflowRef:n,onFallbackChange:i,offset:s=0,index:a=0,minItemsVisible:o=4,referenceOverflowThreshold:l=0,scrollRef:c,...f}=e1(t,e),{rects:d,elements:{floating:m}}=e,p=r.current[a],_=c?.current||m,w=m.clientTop||_.clientTop,b=m.clientTop!==0,k=_.clientTop!==0,F=m===_;if(!p)return{};const N={...e,...await _P(-p.offsetTop-m.clientTop-d.reference.height/2-p.offsetHeight/2-s).fn(e)},B=await Bw(vk(N,_.scrollHeight+w+m.clientTop),f),X=await Bw(N,{...f,elementContext:"reference"}),G=to(0,B.top),P=N.y+G,O=(_.scrollHeight>_.clientHeight?I=>I:Vm)(to(0,_.scrollHeight+(b&&F||k?w*2:0)-G-to(0,B.bottom)));if(_.style.maxHeight=O+"px",_.scrollTop=G,i){const I=_.offsetHeight<p.offsetHeight*Ld(o,r.current.length)-1||X.top>=-l||X.bottom>=-l;Qf.flushSync(()=>i(I))}return n&&(n.current=await Bw(vk({...N,y:P},_.offsetHeight+w+m.clientTop),f)),{y:P}}});function lX(t,e){const{open:r,elements:n}=t,{enabled:i=!0,overflowRef:s,scrollRef:a,onChange:o}=e,l=EP(o),c=H.useRef(!1),f=H.useRef(null),d=H.useRef(null);H.useEffect(()=>{if(!i)return;function p(w){if(w.ctrlKey||!_||s.current==null)return;const b=w.deltaY,k=s.current.top>=-.5,F=s.current.bottom>=-.5,N=_.scrollHeight-_.clientHeight,B=b<0?-1:1,X=b<0?"max":"min";_.scrollHeight<=_.clientHeight||(!k&&b>0||!F&&b<0?(w.preventDefault(),Qf.flushSync(()=>{l(G=>G+Math[X](b,N*B))})):/firefox/i.test(ZG())&&(_.scrollTop+=b))}const _=a?.current||n.floating;if(r&&_)return _.addEventListener("wheel",p),requestAnimationFrame(()=>{f.current=_.scrollTop,s.current!=null&&(d.current={...s.current})}),()=>{f.current=null,d.current=null,_.removeEventListener("wheel",p)}},[i,r,n.floating,s,a,l]);const m=H.useMemo(()=>({onKeyDown(){c.current=!0},onWheel(){c.current=!1},onPointerMove(){c.current=!1},onScroll(){const p=a?.current||n.floating;if(!(!s.current||!p||!c.current)){if(f.current!==null){const _=p.scrollTop-f.current;(s.current.bottom<-.5&&_<-1||s.current.top<-.5&&_>1)&&Qf.flushSync(()=>l(w=>w+_))}requestAnimationFrame(()=>{f.current=p.scrollTop})}}}),[n.floating,l,s,a]);return H.useMemo(()=>i?{floating:m}:{},[i,m])}let t1=H.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});t1.displayName="FloatingContext";let Rb=H.createContext(null);Rb.displayName="PlacementContext";function cX(t){return H.useMemo(()=>t?typeof t=="string"?{to:t}:t:null,[t])}function uX(){return H.useContext(t1).setReference}function fX(){return H.useContext(t1).getReferenceProps}function hX(){let{getFloatingProps:t,slot:e}=H.useContext(t1);return H.useCallback((...r)=>Object.assign({},t(...r),{"data-anchor":e.anchor}),[t,e])}function dX(t=null){t===!1&&(t=null),typeof t=="string"&&(t={to:t});let e=H.useContext(Rb),r=H.useMemo(()=>t,[JSON.stringify(t,(i,s)=>{var a;return(a=s?.outerHTML)!=null?a:s})]);Ns(()=>{e?.(r??null)},[e,r]);let n=H.useContext(t1);return H.useMemo(()=>[n.setFloating,t?n.styles:{}],[n.setFloating,t,n.styles])}let yk=4;function pX({children:t,enabled:e=!0}){let[r,n]=H.useState(null),[i,s]=H.useState(0),a=H.useRef(null),[o,l]=H.useState(null);mX(o);let c=e&&r!==null&&o!==null,{to:f="bottom",gap:d=0,offset:m=0,padding:p=0,inner:_}=gX(r,o),[w,b="center"]=f.split(" ");Ns(()=>{c&&s(0)},[c]);let{refs:k,floatingStyles:F,context:N}=sX({open:c,placement:w==="selection"?b==="center"?"bottom":`bottom-${b}`:b==="center"?`${w}`:`${w}-${b}`,strategy:"absolute",transform:!1,middleware:[_P({mainAxis:w==="selection"?0:d,crossAxis:m}),$K({padding:p}),w!=="selection"&&HK({padding:p}),w==="selection"&&_?oX({..._,padding:p,overflowRef:a,offset:i,minItemsVisible:yk,referenceOverflowThreshold:p,onFallbackChange(I){var D,M;if(!I)return;let ie=N.elements.floating;if(!ie)return;let be=parseFloat(getComputedStyle(ie).scrollPaddingBottom)||0,Ne=Math.min(yk,ie.childElementCount),we=0,le=0;for(let J of(M=(D=N.elements.floating)==null?void 0:D.childNodes)!=null?M:[])if(Yu(J)){let ue=J.offsetTop,ee=ue+J.clientHeight+be,C=ie.scrollTop,U=C+ie.clientHeight;if(ue>=C&&ee<=U)Ne--;else{le=Math.max(0,Math.min(ee,U)-Math.max(ue,C)),we=J.clientHeight;break}}Ne>=1&&s(J=>{let ue=we*Ne-le+be;return J>=ue?J:ue})}}):null,WK({padding:p,apply({availableWidth:I,availableHeight:D,elements:M}){Object.assign(M.floating.style,{overflow:"auto",maxWidth:`${I}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${D}px)`})}})].filter(Boolean),whileElementsMounted:LK}),[B=w,X=b]=N.placement.split("-");w==="selection"&&(B="selection");let G=H.useMemo(()=>({anchor:[B,X].filter(Boolean).join(" ")}),[B,X]),P=lX(N,{overflowRef:a,onChange:s}),{getReferenceProps:A,getFloatingProps:T}=aX([P]),O=Ln(I=>{l(I),k.setFloating(I)});return H.createElement(Rb.Provider,{value:n},H.createElement(t1.Provider,{value:{setFloating:O,setReference:k.setReference,styles:F,getReferenceProps:A,getFloatingProps:T,slot:G}},t))}function mX(t){Ns(()=>{if(!t)return;let e=new MutationObserver(()=>{let r=window.getComputedStyle(t).maxHeight,n=parseFloat(r);if(isNaN(n))return;let i=parseInt(r);isNaN(i)||n!==i&&(t.style.maxHeight=`${Math.ceil(n)}px`)});return e.observe(t,{attributes:!0,attributeFilter:["style"]}),()=>{e.disconnect()}},[t])}function gX(t,e){var r,n,i;let s=zw((r=t?.gap)!=null?r:"var(--anchor-gap, 0)",e),a=zw((n=t?.offset)!=null?n:"var(--anchor-offset, 0)",e),o=zw((i=t?.padding)!=null?i:"var(--anchor-padding, 0)",e);return{...t,gap:s,offset:a,padding:o}}function zw(t,e,r=void 0){let n=ny(),i=Ln((l,c)=>{if(l==null)return[r,null];if(typeof l=="number")return[l,null];if(typeof l=="string"){if(!c)return[r,null];let f=wk(l,c);return[f,d=>{let m=SP(l);{let p=m.map(_=>window.getComputedStyle(c).getPropertyValue(_));n.requestAnimationFrame(function _(){n.nextFrame(_);let w=!1;for(let[k,F]of m.entries()){let N=window.getComputedStyle(c).getPropertyValue(F);if(p[k]!==N){p[k]=N,w=!0;break}}if(!w)return;let b=wk(l,c);f!==b&&(d(b),f=b)})}return n.dispose}]}return[r,null]}),s=H.useMemo(()=>i(t,e)[0],[t,e]),[a=s,o]=H.useState();return Ns(()=>{let[l,c]=i(t,e);if(o(l),!!c)return c(o)},[t,e]),a}function SP(t){let e=/var\((.*)\)/.exec(t);if(e){let r=e[1].indexOf(",");if(r===-1)return[e[1]];let n=e[1].slice(0,r).trim(),i=e[1].slice(r+1).trim();return i?[n,...SP(i)]:[n]}return[]}function wk(t,e){let r=document.createElement("div");e.appendChild(r),r.style.setProperty("margin-top","0px","important"),r.style.setProperty("margin-top",t,"important");let n=parseFloat(window.getComputedStyle(r).marginTop)||0;return e.removeChild(r),n}let Fb=H.createContext(null);Fb.displayName="OpenClosedContext";var Um=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Um||{});function xX(){return H.useContext(Fb)}function vX({value:t,children:e}){return aa.createElement(Fb.Provider,{value:t},e)}function yX(t){throw new Error("Unexpected object: "+t)}var Is=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(Is||{});function Mx(t,e){let r=e.resolveItems();if(r.length<=0)return null;let n=e.resolveActiveIndex(),i=n??-1;switch(t.focus){case 0:{for(let s=0;s<r.length;++s)if(!e.resolveDisabled(r[s],s,r))return s;return n}case 1:{i===-1&&(i=r.length);for(let s=i-1;s>=0;--s)if(!e.resolveDisabled(r[s],s,r))return s;return n}case 2:{for(let s=i+1;s<r.length;++s)if(!e.resolveDisabled(r[s],s,r))return s;return n}case 3:{for(let s=r.length-1;s>=0;--s)if(!e.resolveDisabled(r[s],s,r))return s;return n}case 4:{for(let s=0;s<r.length;++s)if(e.resolveId(r[s],s,r)===t.id)return s;return n}case 5:return null;default:yX(t)}}var kP=(t=>(t[t.Left=0]="Left",t[t.Right=2]="Right",t))(kP||{});function TP(t){let e=Ln(t),r=H.useRef(!1);H.useEffect(()=>(r.current=!1,()=>{r.current=!0,$7(()=>{r.current&&e()})}),[e])}function wX(){let t=typeof document>"u";return"useSyncExternalStore"in A2?(e=>e.useSyncExternalStore)(A2)(()=>()=>{},()=>!1,()=>!t):!1}function _X(){let t=wX(),[e,r]=H.useState(Xc.isHandoffComplete);return e&&Xc.isHandoffComplete===!1&&r(!1),H.useEffect(()=>{e!==!0&&r(!0)},[e]),H.useEffect(()=>Xc.handoff(),[]),t?!1:e}let bX=H.createContext(!1);function EX(){return H.useContext(bX)}function SX(t){let e=EX(),r=H.useContext(CP),[n,i]=H.useState(()=>{var s;if(!e&&r!==null)return(s=r.current)!=null?s:null;if(Xc.isServer)return null;let a=t?.getElementById("headlessui-portal-root");if(a)return a;if(t===null)return null;let o=t.createElement("div");return o.setAttribute("id","headlessui-portal-root"),t.body.appendChild(o)});return H.useEffect(()=>{n!==null&&(t!=null&&t.body.contains(n)||t==null||t.body.appendChild(n))},[n,t]),H.useEffect(()=>{e||r!==null&&i(r.current)},[r,i,e]),n}let AP=H.Fragment,kX=Bl(function(t,e){let{ownerDocument:r=null,...n}=t,i=H.useRef(null),s=Qu(Bq(p=>{i.current=p}),e),a=v5(i),o=r??a,l=SX(o),[c]=H.useState(()=>{var p;return Xc.isServer?null:(p=o?.createElement("div"))!=null?p:null}),f=H.useContext(IX),d=_X();Ns(()=>{!l||!c||l.contains(c)||(c.setAttribute("data-headlessui-portal",""),l.appendChild(c))},[l,c]),Ns(()=>{if(c&&f)return f.register(c)},[f,c]),TP(()=>{var p;!l||!c||(Eb(c)&&l.contains(c)&&l.removeChild(c),l.childNodes.length<=0&&((p=l.parentElement)==null||p.removeChild(l)))});let m=jl();return d?!l||!c?null:Qf.createPortal(m({ourProps:{ref:s},theirProps:n,slot:{},defaultTag:AP,name:"Portal"}),c):null});function TX(t,e){let r=Qu(e),{enabled:n=!0,ownerDocument:i,...s}=t,a=jl();return n?aa.createElement(kX,{...s,ownerDocument:i,ref:r}):a({ourProps:{ref:r},theirProps:s,slot:{},defaultTag:AP,name:"Portal"})}let AX=H.Fragment,CP=H.createContext(null);function CX(t,e){let{target:r,...n}=t,i={ref:Qu(e)},s=jl();return aa.createElement(CP.Provider,{value:r},s({ourProps:i,theirProps:n,defaultTag:AX,name:"Popover.Group"}))}let IX=H.createContext(null),NX=Bl(TX),PX=Bl(CX),RX=Object.assign(NX,{Group:PX});function FX(t,e){let r=H.useRef({left:0,top:0});if(Ns(()=>{if(!e)return;let i=e.getBoundingClientRect();i&&(r.current=i)},[t,e]),e==null||!t||e===document.activeElement)return!1;let n=e.getBoundingClientRect();return n.top!==r.current.top||n.left!==r.current.left}let _k=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function bk(t){var e,r;let n=(e=t.innerText)!=null?e:"",i=t.cloneNode(!0);if(!Yu(i))return n;let s=!1;for(let o of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))o.remove(),s=!0;let a=s?(r=i.innerText)!=null?r:"":n;return _k.test(a)&&(a=a.replace(_k,"")),a}function LX(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let r=t.getAttribute("aria-labelledby");if(r){let n=r.split(" ").map(i=>{let s=document.getElementById(i);if(s){let a=s.getAttribute("aria-label");return typeof a=="string"?a.trim():bk(s).trim()}return null}).filter(Boolean);if(n.length>0)return n.join(", ")}return bk(t).trim()}function DX(t){let e=H.useRef(""),r=H.useRef("");return Ln(()=>{let n=t.current;if(!n)return"";let i=n.innerText;if(e.current===i)return r.current;let s=LX(n).trim().toLowerCase();return e.current=i,r.current=s,s})}var OX=Object.defineProperty,MX=(t,e,r)=>e in t?OX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ek=(t,e,r)=>(MX(t,typeof e!="symbol"?e+"":e,r),r),ba=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(ba||{}),iv=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(iv||{}),ri=(t=>(t[t.OpenMenu=0]="OpenMenu",t[t.CloseMenu=1]="CloseMenu",t[t.GoToItem=2]="GoToItem",t[t.Search=3]="Search",t[t.ClearSearch=4]="ClearSearch",t[t.RegisterItems=5]="RegisterItems",t[t.UnregisterItems=6]="UnregisterItems",t[t.SetButtonElement=7]="SetButtonElement",t[t.SetItemsElement=8]="SetItemsElement",t[t.SortItems=9]="SortItems",t))(ri||{});function Sk(t,e=r=>r){let r=t.activeItemIndex!==null?t.items[t.activeItemIndex]:null,n=oP(e(t.items.slice()),s=>s.dataRef.current.domRef.current),i=r?n.indexOf(r):null;return i===-1&&(i=null),{items:n,activeItemIndex:i}}let jX={1(t){return t.menuState===1?t:{...t,activeItemIndex:null,pendingFocus:{focus:Is.Nothing},menuState:1}},0(t,e){return t.menuState===0?t:{...t,__demoMode:!1,pendingFocus:e.focus,menuState:0}},2:(t,e)=>{var r,n,i,s,a;if(t.menuState===1)return t;let o={...t,searchQuery:"",activationTrigger:(r=e.trigger)!=null?r:1,__demoMode:!1};if(e.focus===Is.Nothing)return{...o,activeItemIndex:null};if(e.focus===Is.Specific)return{...o,activeItemIndex:t.items.findIndex(f=>f.id===e.id)};if(e.focus===Is.Previous){let f=t.activeItemIndex;if(f!==null){let d=t.items[f].dataRef.current.domRef,m=Mx(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled});if(m!==null){let p=t.items[m].dataRef.current.domRef;if(((n=d.current)==null?void 0:n.previousElementSibling)===p.current||((i=p.current)==null?void 0:i.previousElementSibling)===null)return{...o,activeItemIndex:m}}}}else if(e.focus===Is.Next){let f=t.activeItemIndex;if(f!==null){let d=t.items[f].dataRef.current.domRef,m=Mx(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled});if(m!==null){let p=t.items[m].dataRef.current.domRef;if(((s=d.current)==null?void 0:s.nextElementSibling)===p.current||((a=p.current)==null?void 0:a.nextElementSibling)===null)return{...o,activeItemIndex:m}}}}let l=Sk(t),c=Mx(e,{resolveItems:()=>l.items,resolveActiveIndex:()=>l.activeItemIndex,resolveId:f=>f.id,resolveDisabled:f=>f.dataRef.current.disabled});return{...o,...l,activeItemIndex:c}},3:(t,e)=>{let r=t.searchQuery!==""?0:1,n=t.searchQuery+e.value.toLowerCase(),i=(t.activeItemIndex!==null?t.items.slice(t.activeItemIndex+r).concat(t.items.slice(0,t.activeItemIndex+r)):t.items).find(a=>{var o;return((o=a.dataRef.current.textValue)==null?void 0:o.startsWith(n))&&!a.dataRef.current.disabled}),s=i?t.items.indexOf(i):-1;return s===-1||s===t.activeItemIndex?{...t,searchQuery:n}:{...t,searchQuery:n,activeItemIndex:s,activationTrigger:1}},4(t){return t.searchQuery===""?t:{...t,searchQuery:"",searchActiveItemIndex:null}},5:(t,e)=>{let r=t.items.concat(e.items.map(i=>i)),n=t.activeItemIndex;return t.pendingFocus.focus!==Is.Nothing&&(n=Mx(t.pendingFocus,{resolveItems:()=>r,resolveActiveIndex:()=>t.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled})),{...t,items:r,activeItemIndex:n,pendingFocus:{focus:Is.Nothing},pendingShouldSort:!0}},6:(t,e)=>{let r=t.items,n=[],i=new Set(e.items);for(let[s,a]of r.entries())if(i.has(a.id)&&(n.push(s),i.delete(a.id),i.size===0))break;if(n.length>0){r=r.slice();for(let s of n.reverse())r.splice(s,1)}return{...t,items:r,activationTrigger:1}},7:(t,e)=>t.buttonElement===e.element?t:{...t,buttonElement:e.element},8:(t,e)=>t.itemsElement===e.element?t:{...t,itemsElement:e.element},9:t=>t.pendingShouldSort?{...t,...Sk(t),pendingShouldSort:!1}:t},BX=class IP extends eP{constructor(e){super(e),Ek(this,"actions",{registerItem:GS(()=>{let r=[],n=new Set;return[(i,s)=>{n.has(s)||(n.add(s),r.push({id:i,dataRef:s}))},()=>(n.clear(),this.send({type:5,items:r.splice(0)}))]}),unregisterItem:GS(()=>{let r=[];return[n=>r.push(n),()=>this.send({type:6,items:r.splice(0)})]})}),Ek(this,"selectors",{activeDescendantId(r){var n;let i=r.activeItemIndex,s=r.items;return i===null||(n=s[i])==null?void 0:n.id},isActive(r,n){var i;let s=r.activeItemIndex,a=r.items;return s!==null?((i=a[s])==null?void 0:i.id)===n:!1},shouldScrollIntoView(r,n){return r.__demoMode||r.menuState!==0||r.activationTrigger===0?!1:this.isActive(r,n)}}),this.on(5,()=>{this.disposables.requestAnimationFrame(()=>{this.send({type:9})})});{let r=this.state.id,n=Tb.get(null);this.disposables.add(n.on(rP.Push,i=>{!n.selectors.isTop(i,r)&&this.state.menuState===0&&this.send({type:1})})),this.on(0,()=>n.actions.push(r)),this.on(1,()=>n.actions.pop(r))}}static new({id:e,__demoMode:r=!1}){return new IP({id:e,__demoMode:r,menuState:r?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1,pendingShouldSort:!1,pendingFocus:{focus:Is.Nothing}})}reduce(e,r){return Jp(r.type,jX,e,r)}};const NP=H.createContext(null);function Lb(t){let e=H.useContext(NP);if(e===null){let r=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,PP),r}return e}function PP({id:t,__demoMode:e=!1}){let r=H.useMemo(()=>BX.new({id:t,__demoMode:e}),[]);return TP(()=>r.dispose()),r}let VX=H.Fragment;function UX(t,e){let r=H.useId(),{__demoMode:n=!1,...i}=t,s=PP({id:r,__demoMode:n}),[a,o,l]=Uc(s,b=>[b.menuState,b.itemsElement,b.buttonElement]),c=Qu(e),f=Tb.get(null),d=Uc(f,H.useCallback(b=>f.selectors.isTop(b,r),[f,r]));_G(d,[l,o],(b,k)=>{var F;s.send({type:ri.CloseMenu}),Cb(k,Ab.Loose)||(b.preventDefault(),(F=s.state.buttonElement)==null||F.focus())});let m=Ln(()=>{s.send({type:ri.CloseMenu})}),p=H.useMemo(()=>({open:a===ba.Open,close:m}),[a,m]),_={ref:c},w=jl();return aa.createElement(pX,null,aa.createElement(NP.Provider,{value:s},aa.createElement(vX,{value:Jp(a,{[ba.Open]:Um.Open,[ba.Closed]:Um.Closed})},w({ourProps:_,theirProps:i,slot:p,defaultTag:VX,name:"Menu"}))))}let zX="button";function $X(t,e){let r=Lb("Menu.Button"),n=H.useId(),{id:i=`headlessui-menu-button-${n}`,disabled:s=!1,autoFocus:a=!1,...o}=t,l=H.useRef(null),c=fX(),f=Qu(e,l,uX(),Ln(M=>r.send({type:ri.SetButtonElement,element:M}))),d=Ln(M=>{switch(M.key){case wa.Space:case wa.Enter:case wa.ArrowDown:M.preventDefault(),M.stopPropagation(),r.send({type:ri.OpenMenu,focus:{focus:Is.First}});break;case wa.ArrowUp:M.preventDefault(),M.stopPropagation(),r.send({type:ri.OpenMenu,focus:{focus:Is.Last}});break}}),m=Ln(M=>{switch(M.key){case wa.Space:M.preventDefault();break}}),[p,_,w]=Uc(r,M=>[M.menuState,M.buttonElement,M.itemsElement]),b=p===ba.Open;SG(b,{trigger:_,action:H.useCallback(M=>{if(_!=null&&_.contains(M.target))return Dx.Ignore;let ie=M.target.closest('[role="menuitem"]:not([data-disabled])');return Yu(ie)?Dx.Select(ie):w!=null&&w.contains(M.target)?Dx.Ignore:Dx.Close},[_,w]),close:H.useCallback(()=>r.send({type:ri.CloseMenu}),[]),select:H.useCallback(M=>M.click(),[])});let k=Ln(M=>{var ie;if(M.button===kP.Left){if(Mq(M.currentTarget))return M.preventDefault();s||(p===ba.Open?(Qf.flushSync(()=>r.send({type:ri.CloseMenu})),(ie=l.current)==null||ie.focus({preventScroll:!0})):(M.preventDefault(),r.send({type:ri.OpenMenu,focus:{focus:Is.Nothing},trigger:iv.Pointer})))}}),F=H.useRef(null),N=Ln(M=>{F.current=M.pointerType,M.pointerType==="mouse"&&k(M)}),B=Ln(M=>{F.current!=="mouse"&&k(M)}),{isFocusVisible:X,focusProps:G}=vq({autoFocus:a}),{isHovered:P,hoverProps:A}=xq({isDisabled:s}),{pressed:T,pressProps:O}=Sq({disabled:s}),I=H.useMemo(()=>({open:p===ba.Open,active:T||p===ba.Open,disabled:s,hover:P,focus:X,autofocus:a}),[p,P,X,T,s,a]),D=q7(c(),{ref:f,id:i,type:kG(t,l.current),"aria-haspopup":"menu","aria-controls":w?.id,"aria-expanded":p===ba.Open,disabled:s||void 0,autoFocus:a,onKeyDown:d,onKeyUp:m,onPointerDown:N,onClick:B},G,A,O);return jl()({ourProps:D,theirProps:o,slot:I,defaultTag:zX,name:"Menu.Button"})}let HX="div",WX=p5.RenderStrategy|p5.Static;function qX(t,e){let r=H.useId(),{id:n=`headlessui-menu-items-${r}`,anchor:i,portal:s=!1,modal:a=!0,transition:o=!1,...l}=t,c=cX(i),f=Lb("Menu.Items"),[d,m]=dX(c),p=hX(),[_,w]=H.useState(null),b=Qu(e,c?d:null,Ln(J=>f.send({type:ri.SetItemsElement,element:J})),w),[k,F]=Uc(f,J=>[J.menuState,J.buttonElement]),N=v5(F),B=v5(_);c&&(s=!0);let X=xX(),[G,P]=BG(o,_,X!==null?(X&Um.Open)===Um.Open:k===ba.Open);lG(G,F,()=>{f.send({type:ri.CloseMenu})});let A=Uc(f,J=>J.__demoMode),T=A?!1:a&&k===ba.Open;FG(T,B);let O=A?!1:a&&k===ba.Open;oG(O,{allowed:H.useCallback(()=>[F,_],[F,_])});let I=k!==ba.Open,D=FX(I,F)?!1:G;H.useEffect(()=>{let J=_;J&&k===ba.Open&&J!==B?.activeElement&&J.focus({preventScroll:!0})},[k,_,B]),$G(k===ba.Open,{container:_,accept(J){return J.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:J.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(J){J.setAttribute("role","none")}});let M=ny(),ie=Ln(J=>{var ue,ee,C;switch(M.dispose(),J.key){case wa.Space:if(f.state.searchQuery!=="")return J.preventDefault(),J.stopPropagation(),f.send({type:ri.Search,value:J.key});case wa.Enter:if(J.preventDefault(),J.stopPropagation(),f.state.activeItemIndex!==null){let{dataRef:U}=f.state.items[f.state.activeItemIndex];(ee=(ue=U.current)==null?void 0:ue.domRef.current)==null||ee.click()}f.send({type:ri.CloseMenu}),aP(f.state.buttonElement);break;case wa.ArrowDown:return J.preventDefault(),J.stopPropagation(),f.send({type:ri.GoToItem,focus:Is.Next});case wa.ArrowUp:return J.preventDefault(),J.stopPropagation(),f.send({type:ri.GoToItem,focus:Is.Previous});case wa.Home:case wa.PageUp:return J.preventDefault(),J.stopPropagation(),f.send({type:ri.GoToItem,focus:Is.First});case wa.End:case wa.PageDown:return J.preventDefault(),J.stopPropagation(),f.send({type:ri.GoToItem,focus:Is.Last});case wa.Escape:J.preventDefault(),J.stopPropagation(),Qf.flushSync(()=>f.send({type:ri.CloseMenu})),(C=f.state.buttonElement)==null||C.focus({preventScroll:!0});break;case wa.Tab:J.preventDefault(),J.stopPropagation(),Qf.flushSync(()=>f.send({type:ri.CloseMenu})),xG(f.state.buttonElement,J.shiftKey?x5.Previous:x5.Next);break;default:J.key.length===1&&(f.send({type:ri.Search,value:J.key}),M.setTimeout(()=>f.send({type:ri.ClearSearch}),350));break}}),be=Ln(J=>{switch(J.key){case wa.Space:J.preventDefault();break}}),Ne=H.useMemo(()=>({open:k===ba.Open}),[k]),we=q7(c?p():{},{"aria-activedescendant":Uc(f,f.selectors.activeDescendantId),"aria-labelledby":Uc(f,J=>{var ue;return(ue=J.buttonElement)==null?void 0:ue.id}),id:n,onKeyDown:ie,onKeyUp:be,role:"menu",tabIndex:k===ba.Open?0:void 0,ref:b,style:{...l.style,...m,"--button-width":Xq(F,!0).width},...jG(P)}),le=jl();return aa.createElement(RX,{enabled:s?t.static||G:!1,ownerDocument:N},le({ourProps:we,theirProps:l,slot:Ne,defaultTag:HX,features:WX,visible:D,name:"Menu.Items"}))}let GX=H.Fragment;function KX(t,e){let r=H.useId(),{id:n=`headlessui-menu-item-${r}`,disabled:i=!1,...s}=t,a=Lb("Menu.Item"),o=Uc(a,I=>a.selectors.isActive(I,n)),l=H.useRef(null),c=Qu(e,l),f=Uc(a,I=>a.selectors.shouldScrollIntoView(I,n));Ns(()=>{if(f)return Ml().requestAnimationFrame(()=>{var I,D;(D=(I=l.current)==null?void 0:I.scrollIntoView)==null||D.call(I,{block:"nearest"})})},[f,l]);let d=DX(l),m=H.useRef({disabled:i,domRef:l,get textValue(){return d()}});Ns(()=>{m.current.disabled=i},[m,i]),Ns(()=>(a.actions.registerItem(n,m),()=>a.actions.unregisterItem(n)),[m,n]);let p=Ln(()=>{a.send({type:ri.CloseMenu})}),_=Ln(I=>{if(i)return I.preventDefault();a.send({type:ri.CloseMenu}),aP(a.state.buttonElement)}),w=Ln(()=>{if(i)return a.send({type:ri.GoToItem,focus:Is.Nothing});a.send({type:ri.GoToItem,focus:Is.Specific,id:n})}),b=LG(),k=Ln(I=>b.update(I)),F=Ln(I=>{b.wasMoved(I)&&(i||o||a.send({type:ri.GoToItem,focus:Is.Specific,id:n,trigger:iv.Pointer}))}),N=Ln(I=>{b.wasMoved(I)&&(i||o&&a.state.activationTrigger===iv.Pointer&&a.send({type:ri.GoToItem,focus:Is.Nothing}))}),[B,X]=Q7(),[G,P]=Vq(),A=H.useMemo(()=>({active:o,focus:o,disabled:i,close:p}),[o,i,p]),T={id:n,ref:c,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-labelledby":B,"aria-describedby":G,disabled:void 0,onClick:_,onFocus:w,onPointerEnter:k,onMouseEnter:k,onPointerMove:F,onMouseMove:F,onPointerLeave:N,onMouseLeave:N},O=jl();return aa.createElement(X,null,aa.createElement(P,null,O({ourProps:T,theirProps:s,slot:A,defaultTag:GX,name:"Menu.Item"})))}let XX="div";function YX(t,e){let[r,n]=Q7(),i=t,s={ref:e,"aria-labelledby":r,role:"group"},a=jl();return aa.createElement(n,null,a({ourProps:s,theirProps:i,slot:{},defaultTag:XX,name:"Menu.Section"}))}let QX="header";function JX(t,e){let r=H.useId(),{id:n=`headlessui-menu-heading-${r}`,...i}=t,s=kb();Ns(()=>s.register(n),[n,s.register]);let a={id:n,ref:e,role:"presentation",...s.props};return jl()({ourProps:a,theirProps:i,slot:{},defaultTag:QX,name:"Menu.Heading"})}let ZX="div";function eY(t,e){let r=t,n={ref:e,role:"separator"};return jl()({ourProps:n,theirProps:r,slot:{},defaultTag:ZX,name:"Menu.Separator"})}let tY=Bl(UX),rY=Bl($X),nY=Bl(qX),iY=Bl(KX),sY=Bl(YX),aY=Bl(JX),oY=Bl(eY),z1=Object.assign(tY,{Button:rY,Items:nY,Item:iY,Section:sY,Heading:aY,Separator:oY});const lY="/ChatBg.svg";function cY(t){const e=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=(new Date(e.getFullYear(),e.getMonth(),e.getDate())-r)/(1e3*60*60*24);return i===0?"Today":i===1?"Yesterday":t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function RP({vendorId:t,threadId:e,onBackRoute:r,onClose:n,overlayOpacity:i=.3}){const{user:s,profile:a}=vi(),[o,l]=H.useState(e||null),[c,f]=H.useState(""),[d,m]=H.useState(""),[p,_]=H.useState([]),[w,b]=H.useState(""),[k,F]=H.useState(""),N=H.useRef(null),B=ts(),[X,G]=H.useState(null),[P,A]=H.useState(!0),T=H.useRef(null),[O,I]=H.useState(!1),[D,M]=H.useState([]),[ie,be]=H.useState(!1);H.useEffect(()=>{s&&(async()=>{if(a?.role==="customer"){if(!t)return;const ue=await xb({vendorId:t,customerId:s.uid,role:"customer"});l(ue)}else{if(!e){console.warn("Vendor tried to open chat without threadId. Navigate from Messages list.");return}l(e)}})().catch(console.error)},[s?.uid,a?.role,t,e]),H.useEffect(()=>{!o||!a?.role||(async()=>{const ue=await Ta(kr(St,"threads",o));if(!ue.exists())return;const ee=ue.data(),[C,U]=o.split("__");if(a.role==="customer"){const W=ee.vendorName||"",Y=ee.vendorAddress||"";if(W)f(W),m(Y);else{const he=await Ta(kr(St,"pharmacies",C)),xe=he.exists()?he.data():{};f(xe.name||"Pharmacy"),m(xe.address||xe.email||"")}const ae=await Ta(kr(St,"pharmacies",C)),pe=ae.exists()?ae.data():{};F(pe.phone||"")}else{const W=ee.customerName||"",Y=ee.customerAddress||ee.customerEmail||"";if(W)f(W),m(Y);else{const ae=await Ta(kr(St,"users",U)),pe=ae.exists()?ae.data():{};f(pe.displayName||"Customer"),m(pe.email||"")}}})().catch(console.error)},[o,a?.role]),H.useEffect(()=>{if(!o||!s?.uid)return;const ue=d7(o,_,console.error);return Q2(o,s.uid).catch(console.error),ue},[o,s?.uid]),H.useEffect(()=>{N.current?.scrollIntoView({behavior:"smooth"})},[p.length]),H.useEffect(()=>{const ue=()=>A(!document.hidden);return document.addEventListener("visibilitychange",ue),()=>document.removeEventListener("visibilitychange",ue)},[]);const Ne=H.useRef(null);H.useEffect(()=>{if(!p.length)return;const ue=p[p.length-1];if(ue.id!==Ne.current&&ue.senderId!==s?.uid&&T.current){T.current.currentTime=0;const ee=T.current.play();ee&&ee.catch(()=>{})}Ne.current=ue.id},[p,s?.uid]);const we=()=>{if(!o||!s)return null;const[ue,ee]=o.split("__");return s.uid===ue?ee:ue},le=async()=>{const ue=we();!ue||!w.trim()||!o||(await o5(o,{senderId:s.uid,to:ue,text:w.trim()}),b(""))};H.useEffect(()=>{if(!O)return;let ue=null;if(a?.role==="pharmacy"?ue=s?.uid:o&&([ue]=o.split("__")),!ue)return;const ee=$r(vr(St,"products"),Xr("pharmacyId","==",ue)),C=Ai(ee,U=>{M(U.docs.map(W=>({id:W.id,...W.data()})))});return()=>C&&C()},[O,a?.role,s?.uid,o]);const J=async({drugs:ue,startDate:ee,duration:C,notes:U})=>{if(!o||!s)return;const[W,Y]=o.split("__");await v7({pharmacyId:W,customerId:Y,chatThreadId:o,drugs:ue,startDate:ee,duration:C,notes:U}),I(!1),await o5(o,{senderId:s.uid,to:Y,text:"A new prescription has been created."})};return x.jsxs("div",{className:"h-screen w-full flex flex-col items-stretch overflow-visible",style:{position:"relative"},children:[x.jsx("div",{"aria-hidden":!0,style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",backgroundImage:`url(${lY})`,backgroundRepeat:"repeat",backgroundPosition:"center center",backgroundSize:"cover",pointerEvents:"none",zIndex:0}}),i>0&&x.jsx("div",{"aria-hidden":!0,style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",backgroundColor:`rgba(255,255,255, ${i})`,pointerEvents:"none",zIndex:5}}),x.jsxs("div",{style:{position:"relative",zIndex:10},className:"flex-1 flex flex-col min-h-0",children:[x.jsx("style",{children:".hide-scrollbar::-webkit-scrollbar{display:none} .hide-scrollbar{-ms-overflow-style:none; scrollbar-width:none;}"}),x.jsx("audio",{ref:T,src:I7,preload:"none"}),x.jsx("div",{className:"sticky top-0 z-20 bg-white/90 pt-1 pb-1",style:{paddingTop:"env(safe-area-inset-top, 0)",width:"100vw",marginLeft:"calc(50% - 50vw)",paddingRight:"env(safe-area-inset-right, 0)"},children:x.jsxs("div",{className:"w-full px-4 sm:px-5 pt-6 pb-3 flex items-center gap-3 justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("button",{onClick:()=>{n?.(),B(r||"/messages")},className:"rounded-full border px-3 sm:px-4 py-1",children:x.jsx(vb,{className:"h-4 w-4"})}),a?.role==="customer"?x.jsx("button",{className:"min-w-0 font-light text-[15px] sm:text-[17px] truncate text-left hover:underline focus:outline-none",onClick:()=>{if(o){const[ue]=o.split("__");B(`/vendor/${ue}`)}},title:c,children:c||"..."}):x.jsxs("div",{className:"min-w-0",children:[x.jsx("div",{className:"font-light text-[15px] sm:text-[17px] truncate",children:c||"..."}),x.jsx("div",{className:"text-[9px] text-zinc-500 truncate",children:d})]})]}),a?.role==="customer"&&x.jsxs("a",{href:k?`tel:${k}`:void 0,className:`flex items-center justify-center rounded-full border border-sky-500 text-sky-600 px-2 py-1 text-[11px] font-poppins font-light ${k?"hover:bg-sky-50":"opacity-40 cursor-not-allowed"}`,style:{minWidth:32},title:k?`Call ${c}`:"No phone number",tabIndex:k?0:-1,"aria-disabled":!k,children:[x.jsx(GW,{className:"h-3 w-3 mr-1"})," Call"]}),a?.role==="pharmacy"&&o&&x.jsxs(z1,{as:"div",className:"relative inline-block text-left ml-2",children:[x.jsx(z1.Button,{className:"px-3 py-1 rounded-full bg-sky-600 text-white text-xs font-medium",children:"Actions "}),x.jsx(z1.Items,{className:"absolute right-0 mt-2 w-48 origin-top-right bg-white border border-sky-200 divide-y divide-gray-100 rounded-[5px] shadow-lg focus:outline-none z-50",children:x.jsxs("div",{className:"py-1",children:[x.jsx(z1.Item,{children:({active:ue})=>x.jsx("button",{className:`w-full text-left px-4 py-2 text-[12px] font-light ${ue?"bg-sky-50":""}`,onClick:()=>I(!0),children:"Create Prescription"})}),x.jsx(z1.Item,{children:({active:ue})=>x.jsx("button",{className:`w-full text-left px-4 py-2 text-[12px] font-light ${ue?"bg-sky-50":""}`,onClick:()=>be(!0),children:"View Prescription History"})})]})})]})]})}),x.jsxs("div",{className:"w-full flex-1 flex flex-col min-h-0",children:[x.jsxs("div",{className:"flex-1 overflow-y-auto px-2 sm:px-3 pb-28 min-h-0 hide-scrollbar",style:{paddingTop:12},children:[(()=>{let ue=null;return p.map(ee=>{const C=ee.senderId===s?.uid,U=ee.createdAt?.seconds?new Date(ee.createdAt.seconds*1e3):null;let W=!1;if(U){const Y=U.toDateString();ue!==Y&&(W=!0,ue=Y)}return x.jsxs(aa.Fragment,{children:[W&&U&&x.jsx("div",{className:"flex justify-center my-6 mb-6",children:x.jsx("span",{className:"bg-zinc-200 text-zinc-600 text-[10px] px-3 py-1 rounded-full shadow-sm",children:cY(U)})}),x.jsxs("div",{className:`flex flex-col items-${C?"end":"start"} w-full mb-2`,children:[x.jsx("div",{className:`${C?"bg-sky-600 text-white":"bg-zinc-100 text-zinc-900"} px-3 py-2 rounded-2xl max-w-[90%] sm:max-w-[75%] whitespace-pre-wrap break-words shadow-sm`,style:{borderRadius:C?"16px 16px 4px 16px":"16px 16px 16px 4px",fontSize:13},children:ee.text}),x.jsx("div",{className:`text-[9px] sm:text-[10px] text-zinc-400 ${C?"mr-2":"ml-2"}`,children:U?U.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]})]},ee.id)})})(),x.jsx("div",{ref:N})]}),x.jsx("div",{className:"w-full sticky bottom-0 z-20 bg-white/85 backdrop-blur",style:{paddingBottom:"env(safe-area-inset-bottom, 0)",width:"100vw",marginLeft:"calc(50% - 50vw)",paddingLeft:"env(safe-area-inset-left, 0)",paddingRight:"env(safe-area-inset-right, 0)"},children:x.jsxs("div",{className:"w-full",children:[x.jsxs("form",{className:"mx-3 sm:mx-5 flex items-center gap-2 py-2",onSubmit:ue=>{ue.preventDefault(),le()},children:[x.jsx("label",{className:"flex items-center cursor-not-allowed mr-1 opacity-40",title:"Attachments coming soon",children:x.jsx(jW,{className:"h-5 w-5 text-zinc-400"})}),x.jsx("input",{value:w,onChange:ue=>b(ue.target.value),placeholder:"Type a message",className:"flex-1 min-w-0 outline-none px-3 bg-transparent border border-zinc-300 rounded-3xl placeholder:text-[11px] sm:placeholder:text-[12px]",style:{fontSize:13,height:34}}),x.jsx("button",{type:"submit",className:"ml-1 flex items-center justify-center disabled:opacity-50",disabled:!w.trim(),children:x.jsx("img",{src:qW,alt:"Send",className:"h-5 w-5"})})]}),x.jsx("div",{style:{height:6}})]})})]}),x.jsx(KW,{open:O,onClose:()=>I(!1),products:D,onSubmit:J}),x.jsx(wb,{open:ie,onClose:()=>be(!1),children:x.jsx(N7,{chatThreadId:o,products:D,userId:s?.uid})})]})]})}function uY(){const{user:t,profile:e}=vi(),[r,n]=H.useState([]),[i,s]=H.useState(""),[a,o]=H.useState(null),l=tu(),c=ts();H.useEffect(()=>{if(!(!t||!e?.role))return Jv({uid:t.uid,role:e.role},n,k=>console.error("listenUserThreads error:",k))},[t?.uid,e?.role]),H.useEffect(()=>{const F=new URLSearchParams(l.search).get("chat");if(!F||!r.length||a)return;const N=r.find(B=>B.vendorId===F)||r.find(B=>(B.id||"").split("__")[0]===F);N&&(o(N),t?.uid&&Q2(N.id,t.uid).catch(console.error))},[l.search,r,a,t?.uid]);const f=async k=>{o(k);try{await Q2(k.id,t.uid)}catch(N){console.error(N)}const F=k.vendorId||(k.id&&k.id.includes("__")?k.id.split("__")[0]:"");F&&c(`/messages?chat=${encodeURIComponent(F)}`,{replace:!1})},d=()=>{o(null),c("/messages",{replace:!0})};if(a){const k=e?.role==="customer"?{vendorId:a.vendorId}:{threadId:a.id,vendorId:a.vendorId};return x.jsx("div",{className:"bg-white min-h-screen",children:x.jsx(RP,{...k,onClose:d,onBackRoute:"/messages"})})}if(!t)return x.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[x.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:"Please sign in to continue"}),x.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>c("/auth/landing"),children:"Sign In / Sign Up"})]});const m=t?.uid,p=k=>k?.unread?.[m]||0,_=k=>(e?.role==="customer"?k.vendorName:k.customerName)||"",w=k=>k.lastAt?.seconds?new Date(k.lastAt.seconds*1e3):null,b=r.filter(k=>{const F=_(k).toLowerCase(),N=i.toLowerCase();return!N||F.includes(N)||(k.lastMessage||"").toLowerCase().includes(N)});return x.jsxs("div",{className:"min-h-screen pt-10 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 pb-28",children:[x.jsx("div",{className:"sticky top-0 z-10 bg-[#ffffff1d] pt-2 pb-2 backdrop-blur-md",children:x.jsxs("div",{className:"text-[25px] font-light leading-none",children:["My",x.jsx("br",{}),"Conversations"]})}),x.jsxs("div",{className:"mt-4 flex items-center gap-3 border-b border-zinc-300 pb-2",children:[x.jsx(pd,{className:"h-4 w-4 text-zinc-400"}),x.jsx("input",{placeholder:"Search chats",value:i,onChange:k=>s(k.target.value),className:"w-full outline-none placeholder:text-zinc-400 bg-transparent placeholder:text-sm"})]}),x.jsxs("div",{className:"mt-6 space-y-4 w-full",children:[b.map(k=>x.jsxs("button",{onClick:()=>f(k),className:"w-full rounded-[10px] border border-gray-300 px-4 py-3 text-left h-[62px] flex items-center gap-3 bg-white hover:bg-zinc-50 transition",children:[x.jsx("div",{className:"w-8 h-8 rounded-full bg-zinc-200 flex items-center justify-center",children:x.jsx("span",{className:"text-zinc-500 text-xs font-semibold",children:(_(k)||"U")[0]})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"text-sm truncate",children:_(k)}),x.jsx("div",{className:"text-zinc-500 text-[10px] truncate",children:k.lastMessage||"No messages yet."})]}),x.jsxs("div",{className:"flex flex-col items-end justify-between h-full min-w-[48px]",children:[p(k)>0&&x.jsx("span",{className:"bg-sky-500 text-white text-[10px] font-semibold rounded-full px-2 py-0.5 mb-1",children:p(k)}),x.jsx("span",{className:"text-zinc-400 text-[10px]",children:w(k)?.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})||""})]})]},k.id)),b.length===0&&x.jsx("div",{className:"text-zinc-500",children:"No conversations yet."})]})]})}function fY(t){return x.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:x.jsxs("g",{children:[x.jsx("circle",{cx:"8",cy:"8",r:"8",fill:"#fd9292"}),x.jsx("path",{d:"M5.5 5.5L10.5 10.5M10.5 5.5L5.5 10.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round"})]})})}function hY(){const{user:t}=vi(),e=ts(),[r,n]=H.useState([]);H.useEffect(()=>{if(!t)return;const o=$r(vr(St,"users",t.uid,"cart"));return Ai(o,async l=>{const c=await Promise.all(l.docs.map(async f=>{const d=f.data(),m=await Ta(kr(St,"products",d.productId));return{id:f.id,...d,product:{id:m.id,...m.data()}}}));n(c)})},[t]);const i=H.useMemo(()=>r.reduce((o,l)=>o+(l.product?.price||0)*l.qty,0),[r]),s=async()=>{if(!t||!r.length)return;const l=r[0].product?.pharmacyId;await g7({customerId:t.uid,pharmacyId:l,items:r.map(c=>({productId:c.productId,qty:c.qty})),total:i});for(const c of r)await x2(t.uid,c.id);alert("Checkout successful")},a=H.useMemo(()=>{const o=new Map;for(const l of r){const c=l.product?.id;if(c)if(o.has(c)){const f=o.get(c);o.set(c,{...f,qty:f.qty+l.qty,ids:[...f.ids||[f.id],l.id]})}else o.set(c,{...l,ids:[l.id]})}return Array.from(o.values())},[r]);return t?t&&r.length===0?x.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:x.jsx("div",{className:"text-zinc-500 font-extralight text-[14px]",children:"Your cart is empty."})}):x.jsxs("div",{className:"pt-10 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col",children:[x.jsx("div",{className:"sticky top-0 z-20 bg-white/90 backdrop-blur-md pb-2 pt-4 -mx-4 sm:-mx-5 md:-mx-8 lg:-mx-12 xl:-mx-0 px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0",children:x.jsx("div",{className:"text-[28px] sm:text-[35px] md:text-[42px] lg:text-[48px] font-light font-poppins",children:"Cart"})}),x.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[a.map(o=>x.jsxs("div",{className:"relative rounded-xl border border-zinc-200 p-2 flex flex-col items-center gap-2 min-w-0",children:[x.jsx("button",{onClick:()=>o.ids.forEach(l=>x2(t.uid,l)),className:"absolute top-2 right-2 z-10 p-0.5 rounded-full hover:scale-110 transition","aria-label":"Remove",children:x.jsx(fY,{className:"w-5 h-5"})}),x.jsx(uh,{name:o.product?.name,image:o.product?.image,category:o.product?.category,size:35,roundedClass:"rounded-xl"}),x.jsxs("div",{className:"flex-1 w-full text-center",children:[x.jsx("div",{className:"font-semibold text-[12px] sm:text-[13px] md:text-[14px] lg:text-[15px] truncate",children:o.product?.name}),x.jsxs("div",{className:"text-zinc-500 text-[10px] sm:text-[11px] md:text-[12px] lg:text-[13px]",children:["",Number(o.product?.price||0).toLocaleString()]})]}),x.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.jsx("button",{className:"w-6 h-6 rounded-full border border-zinc-300 flex items-center justify-center text-[18px] font-light disabled:opacity-40",onClick:async()=>{o.qty>1&&await x2(t.uid,o.ids[0])},disabled:o.qty<=1,"aria-label":"Decrease quantity",children:"-"}),x.jsx("span",{className:"text-[13px] font-poppins w-6 text-center",children:o.qty}),x.jsx("button",{className:"w-6 h-6 rounded-full border border-zinc-300 flex items-center justify-center text-[18px] font-light",onClick:async()=>{if(o.product?.id){const{addToCart:l}=await rp(async()=>{const{addToCart:c}=await Promise.resolve().then(()=>yW);return{addToCart:c}},void 0);await l(t.uid,o.product.id,1)}},"aria-label":"Increase quantity",children:"+"})]})]},o.product?.id)),a.length===0&&x.jsx("div",{className:"text-zinc-500 font-extralight text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] col-span-2",children:"Your cart is empty."})]}),a.length>0&&x.jsxs("div",{className:"mt-6 rounded-xl border border-sky-400 p-3",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between text-[13px] sm:text-[15px] md:text-[18px] lg:text-[22px] font-regular",children:[x.jsx("span",{children:"Total"}),x.jsxs("span",{className:"font-semibold text-[12px] sm:text-[15px]",children:["",Number(i).toLocaleString()]})]}),x.jsx("button",{onClick:s,className:"mt-4 w-full rounded-full border bg-sky-400 text-white py-2 text-[12px] sm:text-[14px] lg:text-[16px] font-light",children:"Proceed to Checkout"})]})]}):x.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[x.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:"Please sign in to continue"}),x.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>e("/auth/landing"),children:"Sign In / Sign Up"})]})}const kk=["pending","processing","fulfilled","cancelled"];function dY(){const{user:t,profile:e}=vi(),[r,n]=H.useState([]),[i,s]=H.useState("all"),[a,o]=H.useState({}),[l,c]=H.useState({}),[f,d]=H.useState(null),[m,p]=H.useState([]),_=ts(),w=tu(),[b,k]=H.useState(null);H.useEffect(()=>{if(!t||!e)return;const G=e.uid||t.uid;let P;return e.role==="pharmacy"?P=$r(vr(St,"orders"),Xr("pharmacyId","==",G),uc("createdAt","desc")):P=$r(vr(St,"orders"),Xr("customerId","==",G),uc("createdAt","desc")),Ai(P,T=>{n(T.docs.map(O=>({id:O.id,...O.data()})))})},[t,e]),H.useEffect(()=>{const G=w?.state?.highlightOrderId,P=new URLSearchParams(w.search).get("highlight");G?k(G):P&&k(P)},[w]),H.useEffect(()=>{if(!b||r.length===0)return;const G=b,P=setTimeout(()=>{const T=document.getElementById(`order-${G}`);T&&T.scrollIntoView({behavior:"smooth",block:"center"})},250),A=setTimeout(()=>k(null),5e3);return _(w.pathname,{replace:!0,state:{}}),()=>{clearTimeout(P),clearTimeout(A)}},[b,r]);const F=async(G,P)=>{await Ja(kr(St,"orders",G),{status:P})},N=i==="all"?r:r.filter(G=>(G.status||"pending")===i),B=G=>{o(P=>({...P,[G]:!P[G]}))};H.useEffect(()=>{async function G(){if(!f||!f.items)return p([]);const A=f.items.map(O=>O.productId).map(O=>Ta(kr(St,"products",O))),T=await Promise.all(A);p(T.map(O=>O.exists()?{id:O.id,...O.data()}:null))}G()},[f]);function X(G){const P={};return G.forEach(A=>{const T=A.productId;P[T]?P[T].qty+=Number(A.qty||A.quantity||1):P[T]={...A,qty:Number(A.qty||A.quantity||1)}}),Object.values(P)}return t?x.jsxs("div",{className:"pt-10 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col",children:[x.jsx("div",{className:"sticky top-0 z-20 bg-white/90 backdrop-blur-md pb-2 pt-4 -mx-4 sm:-mx-5 md:-mx-8 lg:-mx-12 xl:-mx-0 px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0",children:x.jsx("div",{className:"text-[28px] sm:text-[35px] md:text-[42px] lg:text-[48px] font-light font-poppins",children:"Orders"})}),x.jsxs("div",{className:"mt-4 flex gap-2 flex-wrap",children:[x.jsx("button",{className:`px-3 py-1 rounded-full border text-[12px] font-light ${i==="all"?"bg-sky-600 text-white border-sky-600":"border-zinc-300 text-zinc-600"}`,onClick:()=>s("all"),children:"All"}),kk.map(G=>x.jsx("button",{className:`px-3 py-1 rounded-full border text-[12px] font-light ${i===G?"bg-sky-600 text-white border-sky-600":"border-zinc-300 text-zinc-600"}`,onClick:()=>s(G),children:G.charAt(0).toUpperCase()+G.slice(1)},G))]}),x.jsx("div",{className:"mt-6 space-y-4",children:N.length===0?x.jsx("div",{className:"text-zinc-500 font-extralight text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px]",children:"No orders yet."}):N.map(G=>{const P=G.items||[],A=a[G.id],T=P.length>4,O=A?P:P.slice(0,4),I=G.customerPhone||G.customer_phone||G.phone||"",D=l[G.id];return x.jsxs("div",{id:`order-${G.id}`,className:`relative rounded-[10px] border border-gray-200 p-4 flex flex-col gap-2 group hover:bg-sky-50 transition ${b===G.id?"ring-4 ring-sky-200 bg-sky-50":""}`,style:{cursor:"pointer"},onClick:M=>{M.target.closest(".order-see-more-btn")||e.role==="pharmacy"&&M.target.closest(".order-status-dropdown")||d(G)},children:[x.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"font-light text-[14px] sm:text-[15px] md:text-[18px] lg:text-[22px]",children:["Order #",G.id.slice(0,6)]}),x.jsx("div",{className:"text-gray-500 text-[11px] sm:text-[12px] md:text-[14px] lg:text-[16px] font-light",children:G.createdAt?.toDate?.().toLocaleString?.()||""})]}),x.jsxs("div",{className:"text-[14px] sm:text-[15px] md:text-[18px] lg:text-[22px] font-medium",children:["",Number(G.total).toLocaleString()]})]}),e.role==="pharmacy"&&x.jsxs("div",{className:"mt-2",children:[x.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 flex items-center gap-2",children:["Customer: ",G.customerName||G.customerId||G.customer_id||"N/A"]}),x.jsx("div",{className:"text-[12px] text-zinc-400 font-light mb-2",children:G.customerEmail||""}),x.jsx("div",{className:"text-[13px] text-zinc-700 font-medium mb-1",children:"Items:"}),x.jsx("ul",{className:"ml-2 list-disc text-[13px] text-zinc-700",children:O.map((M,ie)=>x.jsxs("li",{children:[x.jsx("span",{children:M.name||M.productId}),x.jsxs("span",{children:[" x",M.qty||M.quantity||1]})]},ie))}),T&&x.jsx("button",{className:"order-see-more-btn text-sky-600 text-xs mt-1 ml-2 font-medium hover:underline focus:outline-none",onClick:M=>{M.stopPropagation(),B(G.id)},children:A?"See less":`See more (${P.length-4} more)`}),x.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[x.jsx("span",{className:"text-[12px] text-zinc-500",children:"Status:"}),x.jsx("select",{className:"order-status-dropdown border rounded px-2 py-1 text-[12px]",value:G.status||"pending",onChange:M=>F(G.id,M.target.value),children:kk.map(M=>x.jsx("option",{value:M,children:M.charAt(0).toUpperCase()+M.slice(1)},M))}),I&&!D&&x.jsx("button",{className:"ml-2 px-3 py-1 rounded-full bg-sky-600 text-white text-[12px] font-light",onClick:M=>{M.stopPropagation(),c(ie=>({...ie,[G.id]:!0}))},children:"Reveal Number"}),I&&D&&x.jsx("span",{className:"ml-2 text-[13px] text-zinc-700 font-medium",children:I})]})]})]},G.id)})}),x.jsx(wb,{open:!!f,onClose:()=>d(null),children:f&&x.jsxs("div",{children:[x.jsxs("div",{className:"text-lg font-medium mb-2",children:["Order #",f.id.slice(0,6)]}),x.jsx("div",{className:"text-zinc-500 text-xs mb-4",children:f.createdAt?.toDate?.().toLocaleString?.()||""}),x.jsx("div",{className:"mb-2 text-[15px] font-medium",children:"Items:"}),x.jsx("ul",{className:"mb-4 space-y-2",children:X(f.items).map((G,P)=>{const A=m.find(T=>T&&T.id===G.productId);return x.jsxs("li",{className:"flex items-center gap-3",children:[A?x.jsx(uh,{name:A.name,image:A.image,category:A.category,size:40,roundedClass:"rounded-lg"}):null,x.jsxs("div",{className:"flex-1",children:[x.jsx("div",{className:"font-poppins font-medium text-[14px]",children:A?A.name:G.productId}),x.jsxs("div",{className:"text-zinc-500 text-xs",children:["Qty: ",G.qty]})]}),x.jsxs("div",{className:"text-[14px] font-medium text-sky-600",children:["",Number(G.price||A?.price||0).toLocaleString()]})]},G.productId)})}),x.jsxs("div",{className:"flex justify-between items-center border-t pt-3 mt-2",children:[x.jsx("div",{className:"text-[15px] font-medium",children:"Total:"}),x.jsxs("div",{className:"text-[15px] font-bold text-sky-700",children:["",Number(f.total).toLocaleString()]})]}),x.jsxs("div",{className:"mt-2 text-xs text-zinc-400",children:["Status: ",f.status||"pending"]})]})})]}):x.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[x.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:"Please sign in to continue"}),x.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>_("/auth/landing"),children:"Sign In / Sign Up"})]})}function FP(t){if(!t)return 1;const e=t.match(/(\d+)x\s*\/\s*day/i);return e?Number(e[1]):1}function pY(t){if(!("Notification"in window)||Notification.permission!=="granted")return;const{drugs:e,startDate:r,duration:n}=t,i=new Date(r),s=new Date,a=Number(n)||1;e.forEach(o=>{const l=FP(o.frequency);for(let c=0;c<a;c++)for(let f=0;f<l;f++){const d=new Date(i.getTime()+c*24*60*60*1e3+f*(24/l)*60*60*1e3);if(d>s){const m=d.getTime()-s.getTime();setTimeout(()=>{new Notification(`Time to take ${o.name}`,{body:`Dosage: ${o.dosage||""} (${o.frequency||""})`})},m)}}})}function mY(t){const{drugs:e,startDate:r,duration:n}=t,i=new Date(r),s=Number(n)||1;let a=`BEGIN:VCALENDAR
VERSION:2.0
`;e.forEach(f=>{const d=FP(f.frequency);for(let m=0;m<s;m++)for(let p=0;p<d;p++){const w=new Date(i.getTime()+m*24*60*60*1e3+p*(24/d)*60*60*1e3).toISOString().replace(/[-:]/g,"").replace(/\..+/,"");a+=`BEGIN:VEVENT
SUMMARY:Take ${f.name}
DESCRIPTION:Dosage: ${f.dosage||""} (${f.frequency||""})
DTSTART:${w}
DTEND:${w}
END:VEVENT
`}}),a+="END:VCALENDAR";const o=new Blob([a],{type:"text/calendar"}),l=URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download="prescription.ics",c.click(),URL.revokeObjectURL(l)}function gY(t){if(localStorage.setItem("prescriptionAlarms",JSON.stringify(t)),"indexedDB"in window){const e=indexedDB.open("HealthAppDB",1);e.onupgradeneeded=r=>{const n=r.target.result;n.objectStoreNames.contains("alarms")||n.createObjectStore("alarms",{keyPath:"id"})},e.onsuccess=r=>{const s=r.target.result.transaction("alarms","readwrite").objectStore("alarms");t.forEach(a=>s.put(a))}}}function xY(){const{user:t}=vi(),[e,r]=H.useState([]),[n,i]=H.useState(!1);if(H.useEffect(()=>{if(!t)return;async function o(){await w7({customerId:t.uid});const l=$r(vr(St,"prescriptions"),Xr("customerId","==",t.uid));let f=(await li(l)).docs.map(d=>({id:d.id,...d.data()}));f=f.sort((d,m)=>new Date(m.startDate)-new Date(d.startDate)),r(f),Notification.permission==="granted"&&f.forEach(pY),gY(f)}o()},[t]),H.useEffect(()=>{"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()},[]),!t)return null;const s=e.length,a=n?e:e.slice(0,1);return x.jsxs("div",{className:"w-full",children:[x.jsxs("div",{className:"text-[18px] font-light font-poppins text-black mb-2 tracking-tight",children:["My Prescriptions",e.length>0&&x.jsx("button",{className:"ml-4 px-3 py-1 rounded-full bg-green-100 text-green-700 text-xs font-medium",onClick:()=>e.forEach(mY),children:"Add to Calendar"})]}),e.length===0?x.jsx("div",{className:"text-zinc-400 text-[12px] font-light",children:"No prescriptions found."}):x.jsxs(x.Fragment,{children:[x.jsx(N7,{prescriptions:a,userId:t.uid,chatThreadId:null}),s>1&&!n&&x.jsxs("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-700 text-xs font-medium",onClick:()=>i(!0),children:["See more (",s,")"]}),n&&s>1&&x.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-zinc-100 text-zinc-700 text-xs font-medium",onClick:()=>i(!1),children:"See less"})]})]})}function vY(){const{user:t,logout:e}=vi(),[r,n]=H.useState(!1),[i,s]=H.useState(""),[a,o]=H.useState(""),[l,c]=H.useState(""),[f,d]=H.useState(""),[m,p]=H.useState(!1),[_,w]=H.useState(0),[b,k]=H.useState(0),[F,N]=H.useState([]),[B,X]=H.useState({displayName:t?.displayName||"Customer",address:"Kuje, Abuja, Nigeria",phone:t?.phoneNumber||"",email:t?.email||""}),[G,P]=H.useState(""),[A,T]=H.useState(!1),[O,I]=H.useState("all"),[D,M]=H.useState([]),[ie,be]=H.useState(null),[Ne,we]=H.useState(null),le=ts();H.useEffect(()=>{if(!t)return;li(vr(St,"users",t.uid,"cart")).then(C=>{w(C.size)}),li($r(vr(St,"threads"),Xr("customerId","==",t.uid))).then(C=>{k(C.size)}),li($r(vr(St,"orders"),Xr("customerId","==",t.uid))).then(async C=>{const U={};for(const Y of C.docs){const ae=Y.data();for(const pe of ae.items||[]){const he=pe.productId;if(!U[he]){let Ee=pe.name;if(!Ee&&he){const Fe=await Ta(kr(St,"products",he));Ee=Fe.exists()?Fe.data().name:he}U[he]={name:Ee,count:0,lastDate:ae.createdAt?.toDate?.()||null}}U[he].count+=Number(pe.qty||pe.quantity||1);const xe=ae.createdAt?.toDate?.()||null;xe&&(!U[he].lastDate||xe>U[he].lastDate)&&(U[he].lastDate=xe)}}const W=Object.values(U).sort((Y,ae)=>(ae.lastDate||0)-(Y.lastDate||0));N(W)});const ue=kr(St,"users",t.uid),ee=Ai(ue,C=>{if(C&&C.exists()){const U=C.data();X(W=>{let Y=U.phoneNumber??U.phone??W.phone??"";return typeof Y=="string"&&Y.includes("@")&&(Y=W.phone??""),{displayName:U.displayName||t.displayName||W.displayName,address:U.address||W.address||"",phone:Y,email:U.email||t.email||W.email||""}})}},()=>{});return()=>ee&&ee()},[t]),H.useEffect(()=>{!r&&B&&(s(B.displayName||""),o(B.phone||""),c(B.address||"Kuje, Abuja, Nigeria"))},[B,r]);async function J(){const ue=(G||"").trim().toLowerCase();if(!ue){M([]);return}const ee=[];if((O==="drugs"||O==="all")&&(F||[]).forEach(C=>{`${C.name||""}`.toLowerCase().includes(ue)&&ee.push({type:"drug",title:C.name,subtitle:`Bought ${C.count||0} times`,item:C})}),O==="orders"||O==="all"){let C=ie;C||(C=(await li($r(vr(St,"orders"),Xr("customerId","==",t.uid)))).docs.map(W=>({id:W.id,...W.data()})),be(C)),(C||[]).forEach(U=>{`${U.id} ${(U.items||[]).map(Y=>Y.name).join(" ")} ${U.total||""}`.toLowerCase().includes(ue)&&ee.push({type:"order",title:`Order ${U.id}`,subtitle:`${U.items?.length||0} items  ${Number(U.total||0).toLocaleString()}`,item:U})})}if(O==="prescriptions"||O==="all"){let C=Ne;C||(C=(await li($r(vr(St,"prescriptions"),Xr("customerId","==",t.uid)))).docs.map(W=>({id:W.id,...W.data()})),we(C)),(C||[]).forEach(U=>{const W=(U.medicines||[]).join(" ");`${U.id} ${W} ${U.note||""} ${U.pharmacyName||""}`.toLowerCase().includes(ue)&&ee.push({type:"prescription",title:`Prescription ${U.id}`,subtitle:U.note||"",item:U})})}M(ee)}return H.useEffect(()=>{if(!A)return;function ue(ee){ee.key==="Escape"&&(T(!1),P(""),M([]))}return window.addEventListener("keydown",ue),()=>window.removeEventListener("keydown",ue)},[A]),H.useEffect(()=>{if(!A)return;if(!(G||"").trim()){M([]);return}const ee=setTimeout(()=>{J()},300);return()=>clearTimeout(ee)},[G,O,A]),t?x.jsxs("div",{className:"pt-10 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen",children:[x.jsx("div",{className:"sticky top-0 z-20 bg-white/90 backdrop-blur-md pb-2 pt-4 -mx-4 sm:-mx-5 md:-mx-8 lg:-mx-12 xl:-mx-0 px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0",children:x.jsxs("div",{className:"w-full flex items-center justify-between",children:[x.jsxs("div",{className:"text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-light font-poppins leading-none",children:["My",x.jsx("br",{}),"Profile"]}),x.jsx("div",{className:"flex items-center gap-2",children:x.jsx("button",{onClick:()=>T(!0),"aria-label":"Open search",className:"rounded-full p-2 hover:bg-sky-50",children:x.jsx(pd,{className:"h-5 w-5 text-sky-600"})})})]})}),A&&x.jsx("div",{onClick:()=>{T(!1),P(""),M([])},className:"fixed inset-0 z-50 flex items-start justify-center pt-24 bg-black bg-opacity-30",role:"dialog","aria-modal":"true","aria-label":"Search modal",children:x.jsxs("div",{onClick:ue=>ue.stopPropagation(),className:"bg-white rounded-3xl w-[min(920px,95%)] p-4 shadow-xl border border-[#9ED3FF] max-h-[80vh] overflow-hidden",children:[x.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[x.jsx("div",{className:"flex-1 min-w-0",children:x.jsxs("div",{className:"flex items-center bg-[#F0FAFF] border border-[#9ED3FF] rounded-full px-3 py-2 w-full overflow-hidden",children:[x.jsx(pd,{className:"h-4 w-4 text-sky-600 mr-2 flex-shrink-0"}),x.jsx("input",{autoFocus:!0,value:G,onChange:ue=>P(ue.target.value),onKeyDown:ue=>{ue.key==="Enter"&&J()},placeholder:"Search prescriptions, orders, drugs...",className:"flex-1 min-w-0 bg-transparent text-sm outline-none truncate","aria-label":"Search query"})]})}),x.jsx("div",{className:"flex items-center gap-2",children:x.jsxs("select",{value:O,onChange:ue=>I(ue.target.value),className:"rounded-full border border-[#9ED3FF] px-3 py-2 text-sm bg-white w-36",children:[x.jsx("option",{value:"prescriptions",children:"Prescriptions"}),x.jsx("option",{value:"orders",children:"Orders"}),x.jsx("option",{value:"drugs",children:"Drugs"}),x.jsx("option",{value:"all",children:"All"})]})})]}),x.jsx("div",{className:"border-t",style:{borderColor:"#E6F7FF"}}),x.jsx("div",{className:"mt-4 max-h-[60vh] overflow-auto px-1 py-2",children:D.length===0?x.jsx("div",{className:"text-zinc-500 p-4",children:"No results yet. Enter a query."}):x.jsx("ul",{className:"space-y-2",children:D.map((ue,ee)=>x.jsxs("li",{className:"p-2 rounded-2xl border border-[#9ED3FF] bg-white hover:bg-[#E3F3FF] transition-shadow flex items-center gap-3 justify-between",children:[x.jsx("div",{className:"flex items-center gap-3 min-w-0",children:x.jsxs("div",{className:"min-w-0",children:[x.jsx("div",{className:"font-semibold text-sm text-black truncate",children:ue.title}),x.jsx("div",{className:"text-xs text-zinc-500 truncate",children:ue.subtitle})]})}),x.jsx("div",{className:"flex-shrink-0 flex items-center gap-2",children:ue.type==="order"?x.jsx("button",{onClick:()=>{le("/orders",{state:{highlightOrderId:ue.item.id}}),T(!1),P(""),M([])},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50",children:"Open"}):ue.type==="prescription"?x.jsx("button",{onClick:()=>{le(`/prescriptions/${ue.item.id}`),T(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50",children:"Open"}):x.jsx("button",{onClick:()=>{T(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50",children:"View"})})]},ee))})})]})}),x.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-6",children:[x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] border-[#36A5FF] p-4 flex flex-col items-start",children:[x.jsx("div",{className:"w-20 h-20 rounded-full bg-zinc-200 flex items-center justify-center mb-3 overflow-hidden",children:t?.photoURL?x.jsx("img",{src:t.photoURL,alt:"avatar",className:"w-full h-full object-cover rounded-full"}):x.jsx("span",{className:"text-3xl text-zinc-400 font-light",children:B.displayName&&B.displayName[0]||"C"})}),x.jsxs("div",{className:"w-full flex items-center justify-between mt-1",children:[x.jsx("div",{className:"text-[20px] font-medium text-sky-600 tracking-tighter",children:B.displayName||"Customer"}),x.jsxs("button",{className:"ml-2 px-3 py-1 rounded-full border border-sky-200 text-sky-600 text-xs flex items-center gap-1 hover:bg-sky-50",onClick:()=>n(!0),children:[x.jsx(BW,{className:"h-4 w-4"})," Edit"]})]}),r&&x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:x.jsxs("div",{className:"bg-white border border-[#36A5FF] rounded-3xl p-5 w-[90vw] max-w-sm shadow-xl",children:[x.jsx("div",{className:"text-[22px] font-light font-poppins text-sky-600 mb-2 tracking-tight",children:"Edit Profile"}),x.jsxs("form",{className:"flex flex-col gap-4",onSubmit:async ue=>{if(ue.preventDefault(),i!==(B?.displayName||t?.displayName)||a!==(B?.phone||t?.phoneNumber)||l!==(B?.address||"Address missing")){if(!f){alert("Please enter your account password to save changes.");return}try{const ee=Kd.credential(t.email,f);await Mz(t,ee),await jN(t,{displayName:i}),await Ja(kr(St,"users",t.uid),{displayName:i,phoneNumber:a,address:l}),n(!1),window.location.reload()}catch(ee){alert("Failed to update profile: "+ee.message)}}else n(!1)},children:[x.jsx("label",{className:"text-[12px] text-zinc-500 font-light"}),x.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 transition-all",value:i,placeholder:"Name",onChange:ue=>s(ue.target.value),style:{boxShadow:"none"}}),x.jsx("label",{className:"text-[12px] text-zinc-500 font-light"}),x.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 transition-all",value:a,placeholder:"Phone Number",onChange:ue=>o(ue.target.value),style:{boxShadow:"none"}}),x.jsx("label",{className:"text-[12px] text-zinc-500 font-light"}),x.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 transition-all",value:l,placeholder:"Address",onChange:ue=>c(ue.target.value),style:{boxShadow:"none"}}),x.jsx("label",{className:"text-[12px] text-zinc-500 font-light"}),x.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 transition-all",type:"password",placeholder:"Account Password (required to save)",onChange:ue=>d(ue.target.value),required:!0,style:{boxShadow:"none"}}),x.jsxs("div",{className:"flex gap-2 mt-4",children:[x.jsx("button",{type:"button",className:"px-4 py-2 rounded-full bg-zinc-100 text-[12px] font-light",onClick:()=>n(!1),children:"Cancel"}),x.jsx("button",{type:"submit",className:"px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light",children:"Save"})]})]})]})}),x.jsx("div",{className:"text-zinc-500 mt-1 text-[12px] font-light w-full pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:B.email}),x.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 mt-2 text-[12px] font-light w-full pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[x.jsx(ry,{className:"h-2.5 w-2.5"})," ",B.address||"Kuje, Abuja, Nigeria"]}),x.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 mt-1 text-[12px] font-light w-full",children:[x.jsx(J2,{className:"h-2.5 w-2.5"})," ",B.phone||"phone number missing"]})]}),x.jsx("div",{children:x.jsxs("button",{onClick:()=>{e(),window.location.href="/auth/landing"},className:"rounded-full border border-red-300 text-red-600 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:[x.jsx(l5,{className:"h-4 w-4"})," Log Out"]})})]}),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] border-[#36A5FF] p-4 flex flex-col items-start",children:[x.jsx("div",{className:"text-[18px] font-light font-poppins text-black mb-2 tracking-tight",children:"My Activity"}),x.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[x.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:"Items in Cart"}),x.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:_??0})]}),x.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[x.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:"Active Chats"}),x.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:b??0})]}),x.jsxs("div",{className:"w-full flex items-center justify-between mt-3 mb-1",children:[x.jsx("span",{className:"text-[14px] font-light text-zinc-800",children:"Drugs Bought"}),x.jsx("button",{className:"text-[12px] text-sky-600 font-light px-2 py-1 rounded-full hover:bg-sky-50",onClick:()=>p(!0),children:"See more"})]}),x.jsx("div",{className:"w-full flex flex-col gap-2",children:F.slice(0,3).map((ue,ee)=>x.jsxs("div",{className:"w-full flex items-center pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[x.jsx("span",{className:"text-[12px] text-zinc-500 font-light w-1/3 text-left",children:ue.name}),x.jsx("span",{className:"text-[12px] text-zinc-400 font-light w-1/3 flex justify-center",children:ue.date}),x.jsx("span",{className:"text-[12px] text-zinc-500 font-light w-1/3 text-right",children:ue.count??1})]},ue.id||ee))}),m&&x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:x.jsxs("div",{className:"bg-white border border-[#36A5FF] rounded-3xl p-5 w-[90vw] max-w-sm shadow-xl",children:[x.jsx("div",{className:"text-[18px] font-light font-poppins text-sky-600 mb-2 tracking-tight",children:"All Drugs Bought"}),x.jsx("div",{className:"flex flex-col gap-2 max-h-[60vh] overflow-y-auto",children:F.map((ue,ee)=>x.jsxs("div",{className:"w-full flex items-center pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[x.jsx("span",{className:"text-[12px] text-zinc-500 font-light w-1/3 text-left",children:ue.name}),x.jsx("span",{className:"text-[12px] text-zinc-400 font-light w-1/3 flex justify-center",children:ue.date}),x.jsx("span",{className:"text-[12px] text-zinc-500 font-light w-1/3 text-right",children:ue.count??1})]},ue.id||ee))}),x.jsx("button",{className:"mt-4 px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light w-full",onClick:()=>p(!1),children:"Close"})]})})]}),x.jsx("div",{className:"rounded-3xl border bg-[#F7F7F7] border-[#36A5FF] p-4 flex flex-col items-start",children:x.jsx(xY,{})})]})]})]}):x.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[x.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:"Please sign in to continue"}),x.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>le("/auth/landing"),children:"Sign In / Sign Up"})]})}function yY({className:t="",...e}){return x.jsx("textarea",{className:`w-full rounded-2xl border px-3 py-2 outline-none ${t}`,...e})}function LP({pharmacyId:t,onClose:e}){const[r,n]=H.useState({name:"",price:"",category:"OvertheCounter",stock:0,sku:"",image:"",description:""}),[i,s]=H.useState(null),[a,o]=H.useState(!1),l=async()=>{if(!r.name||!r.price)return alert("Name and price required");o(!0);try{let c=r.image;if(!c&&i){const d=`products/${t}/${Date.now()}_${i.name}`,m=hW(vW,d);await uW(m,i),c=await fW(m)}const f=(r.tags||"").split(",").map(d=>d.trim()).filter(Boolean);await p7({...r,image:c,price:Number(r.price),pharmacyId:t,tags:f}),e()}catch(c){alert(c.message)}finally{o(!1)}};return x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 backdrop-blur-sm",children:x.jsxs("div",{className:"bg-white rounded-3xl p-6 w-[90vw] max-w-sm shadow-xl border border-[#9ED3FF]",children:[x.jsx("div",{className:"text-lg font-light font-poppins mb-4 text-black",children:"Add Product"}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",placeholder:"Name",value:r.name,onChange:c=>n({...r,name:c.target.value})}),x.jsxs("select",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none bg-white",value:r.category,onChange:c=>n({...r,category:c.target.value}),children:[x.jsx("option",{value:"Prescription",children:"Prescription"}),x.jsx("option",{value:"Over-the-counter",children:"Over-the-counter"}),x.jsx("option",{value:"Syrup",children:"Syrup"}),x.jsx("option",{value:"Therapeutic",children:"Therapeutic"}),x.jsx("option",{value:"Controlled",children:"Controlled"}),x.jsx("option",{value:"Target System",children:"Target System"}),x.jsx("option",{value:"Others",children:"Others"})]}),x.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",placeholder:"Stock",type:"number",value:r.stock,onChange:c=>n({...r,stock:c.target.value})}),x.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",placeholder:"SKU",value:r.sku,onChange:c=>n({...r,sku:c.target.value})}),x.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",placeholder:"Price",type:"number",value:r.price,onChange:c=>n({...r,price:c.target.value})}),x.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",placeholder:"Tags (comma separated, e.g. pain relief, children)",value:r.tags||"",onChange:c=>n({...r,tags:c.target.value})}),x.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[x.jsx("label",{className:"text-[13px] font-light text-zinc-500",children:"Product Image"}),x.jsx("input",{type:"file",accept:"image/*",className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2",onChange:c=>s(c.target.files?.[0]||null)}),x.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",placeholder:"Or paste image link here",value:r.image,onChange:c=>n({...r,image:c.target.value})})]})]}),x.jsx("div",{className:"mt-3",children:x.jsx(yY,{rows:3,placeholder:"Description",value:r.description,onChange:c=>n({...r,description:c.target.value})})}),x.jsxs("div",{className:"flex gap-2 mt-6",children:[x.jsx("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700",disabled:a,onClick:l,children:a?"Uploading":"Add"}),x.jsx("button",{className:"flex-1 rounded-full border border-zinc-300 text-zinc-500 text-[13px] font-light py-2",onClick:e,children:"Cancel"})]})]})})}var y2={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var wY=y2.exports,Tk;function _Y(){return Tk||(Tk=1,(function(t,e){((r,n)=>{t.exports=n()})(wY,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},i,s=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},l=0,c={};function f(A){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(T){var O=X(T);O.chunkSize=parseInt(O.chunkSize),T.step||T.chunk||(O.chunkSize=null),this._handle=new w(O),(this._handle.streamer=this)._config=O}).call(this,A),this.parseChunk=function(T,O){var I=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<I){let M=this._config.newline;M||(D=this._config.quoteChar||'"',M=this._handle.guessLineEndings(T,D)),T=[...T.split(M).slice(I)].join(M)}this.isFirstChunk&&P(this._config.beforeFirstChunk)&&(D=this._config.beforeFirstChunk(T))!==void 0&&(T=D),this.isFirstChunk=!1,this._halted=!1;var I=this._partialLine+T,D=(this._partialLine="",this._handle.parse(I,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(T=D.meta.cursor,I=(this._finished||(this._partialLine=I.substring(T-this._baseIndex),this._baseIndex=T),D&&D.data&&(this._rowCount+=D.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)n.postMessage({results:D,workerId:c.WORKER_ID,finished:I});else if(P(this._config.chunk)&&!O){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=D=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!I||!P(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),I||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(T){P(this._config.error)?this._config.error(T):a&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:T,finished:!1})}}function d(A){var T;(A=A||{}).chunkSize||(A.chunkSize=c.RemoteChunkSize),f.call(this,A),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(O){this._input=O,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(T=new XMLHttpRequest,this._config.withCredentials&&(T.withCredentials=this._config.withCredentials),s||(T.onload=G(this._chunkLoaded,this),T.onerror=G(this._chunkError,this)),T.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var O,I=this._config.downloadRequestHeaders;for(O in I)T.setRequestHeader(O,I[O])}var D;this._config.chunkSize&&(D=this._start+this._config.chunkSize-1,T.setRequestHeader("Range","bytes="+this._start+"-"+D));try{T.send(this._config.downloadRequestBody)}catch(M){this._chunkError(M.message)}s&&T.status===0&&this._chunkError()}},this._chunkLoaded=function(){T.readyState===4&&(T.status<200||400<=T.status?this._chunkError():(this._start+=this._config.chunkSize||T.responseText.length,this._finished=!this._config.chunkSize||this._start>=(O=>(O=O.getResponseHeader("Content-Range"))!==null?parseInt(O.substring(O.lastIndexOf("/")+1)):-1)(T),this.parseChunk(T.responseText)))},this._chunkError=function(O){O=T.statusText||O,this._sendError(new Error(O))}}function m(A){(A=A||{}).chunkSize||(A.chunkSize=c.LocalChunkSize),f.call(this,A);var T,O,I=typeof FileReader<"u";this.stream=function(D){this._input=D,O=D.slice||D.webkitSlice||D.mozSlice,I?((T=new FileReader).onload=G(this._chunkLoaded,this),T.onerror=G(this._chunkError,this)):T=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var D=this._input,M=(this._config.chunkSize&&(M=Math.min(this._start+this._config.chunkSize,this._input.size),D=O.call(D,this._start,M)),T.readAsText(D,this._config.encoding));I||this._chunkLoaded({target:{result:M}})},this._chunkLoaded=function(D){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(D.target.result)},this._chunkError=function(){this._sendError(T.error)}}function p(A){var T;f.call(this,A=A||{}),this.stream=function(O){return T=O,this._nextChunk()},this._nextChunk=function(){var O,I;if(!this._finished)return O=this._config.chunkSize,T=O?(I=T.substring(0,O),T.substring(O)):(I=T,""),this._finished=!T,this.parseChunk(I)}}function _(A){f.call(this,A=A||{});var T=[],O=!0,I=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(D){this._input=D,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){I&&T.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),T.length?this.parseChunk(T.shift()):O=!0},this._streamData=G(function(D){try{T.push(typeof D=="string"?D:D.toString(this._config.encoding)),O&&(O=!1,this._checkIsFinished(),this.parseChunk(T.shift()))}catch(M){this._streamError(M)}},this),this._streamError=G(function(D){this._streamCleanUp(),this._sendError(D)},this),this._streamEnd=G(function(){this._streamCleanUp(),I=!0,this._streamData("")},this),this._streamCleanUp=G(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function w(A){var T,O,I,D,M=Math.pow(2,53),ie=-M,be=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Ne=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,we=this,le=0,J=0,ue=!1,ee=!1,C=[],U={data:[],errors:[],meta:{}};function W(he){return A.skipEmptyLines==="greedy"?he.join("").trim()==="":he.length===1&&he[0].length===0}function Y(){if(U&&I&&(pe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),I=!1),A.skipEmptyLines&&(U.data=U.data.filter(function(Fe){return!W(Fe)})),ae()){let Fe=function(oe,Je){P(A.transformHeader)&&(oe=A.transformHeader(oe,Je)),C.push(oe)};if(U)if(Array.isArray(U.data[0])){for(var he=0;ae()&&he<U.data.length;he++)U.data[he].forEach(Fe);U.data.splice(0,1)}else U.data.forEach(Fe)}function xe(Fe,oe){for(var Je=A.header?{}:[],Re=0;Re<Fe.length;Re++){var fe=Re,ot=Fe[Re],ot=((et,st)=>(K=>(A.dynamicTypingFunction&&A.dynamicTyping[K]===void 0&&(A.dynamicTyping[K]=A.dynamicTypingFunction(K)),(A.dynamicTyping[K]||A.dynamicTyping)===!0))(et)?st==="true"||st==="TRUE"||st!=="false"&&st!=="FALSE"&&((K=>{if(be.test(K)&&(K=parseFloat(K),ie<K&&K<M))return 1})(st)?parseFloat(st):Ne.test(st)?new Date(st):st===""?null:st):st)(fe=A.header?Re>=C.length?"__parsed_extra":C[Re]:fe,ot=A.transform?A.transform(ot,fe):ot);fe==="__parsed_extra"?(Je[fe]=Je[fe]||[],Je[fe].push(ot)):Je[fe]=ot}return A.header&&(Re>C.length?pe("FieldMismatch","TooManyFields","Too many fields: expected "+C.length+" fields but parsed "+Re,J+oe):Re<C.length&&pe("FieldMismatch","TooFewFields","Too few fields: expected "+C.length+" fields but parsed "+Re,J+oe)),Je}var Ee;U&&(A.header||A.dynamicTyping||A.transform)&&(Ee=1,!U.data.length||Array.isArray(U.data[0])?(U.data=U.data.map(xe),Ee=U.data.length):U.data=xe(U.data,0),A.header&&U.meta&&(U.meta.fields=C),J+=Ee)}function ae(){return A.header&&C.length===0}function pe(he,xe,Ee,Fe){he={type:he,code:xe,message:Ee},Fe!==void 0&&(he.row=Fe),U.errors.push(he)}P(A.step)&&(D=A.step,A.step=function(he){U=he,ae()?Y():(Y(),U.data.length!==0&&(le+=he.data.length,A.preview&&le>A.preview?O.abort():(U.data=U.data[0],D(U,we))))}),this.parse=function(he,xe,Ee){var Fe=A.quoteChar||'"',Fe=(A.newline||(A.newline=this.guessLineEndings(he,Fe)),I=!1,A.delimiter?P(A.delimiter)&&(A.delimiter=A.delimiter(he),U.meta.delimiter=A.delimiter):((Fe=((oe,Je,Re,fe,ot)=>{var et,st,K,Te;ot=ot||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Ue=0;Ue<ot.length;Ue++){for(var ut,pt=ot[Ue],xt=0,yt=0,ht=0,Mt=(K=void 0,new k({comments:fe,delimiter:pt,newline:Je,preview:10}).parse(oe)),Lt=0;Lt<Mt.data.length;Lt++)Re&&W(Mt.data[Lt])?ht++:(ut=Mt.data[Lt].length,yt+=ut,K===void 0?K=ut:0<ut&&(xt+=Math.abs(ut-K),K=ut));0<Mt.data.length&&(yt/=Mt.data.length-ht),(st===void 0||xt<=st)&&(Te===void 0||Te<yt)&&1.99<yt&&(st=xt,et=pt,Te=yt)}return{successful:!!(A.delimiter=et),bestDelimiter:et}})(he,A.newline,A.skipEmptyLines,A.comments,A.delimitersToGuess)).successful?A.delimiter=Fe.bestDelimiter:(I=!0,A.delimiter=c.DefaultDelimiter),U.meta.delimiter=A.delimiter),X(A));return A.preview&&A.header&&Fe.preview++,T=he,O=new k(Fe),U=O.parse(T,xe,Ee),Y(),ue?{meta:{paused:!0}}:U||{meta:{paused:!1}}},this.paused=function(){return ue},this.pause=function(){ue=!0,O.abort(),T=P(A.chunk)?"":T.substring(O.getCharIndex())},this.resume=function(){we.streamer._halted?(ue=!1,we.streamer.parseChunk(T,!0)):setTimeout(we.resume,3)},this.aborted=function(){return ee},this.abort=function(){ee=!0,O.abort(),U.meta.aborted=!0,P(A.complete)&&A.complete(U),T=""},this.guessLineEndings=function(oe,Fe){oe=oe.substring(0,1048576);var Fe=new RegExp(b(Fe)+"([^]*?)"+b(Fe),"gm"),Ee=(oe=oe.replace(Fe,"")).split("\r"),Fe=oe.split(`
`),oe=1<Fe.length&&Fe[0].length<Ee[0].length;if(Ee.length===1||oe)return`
`;for(var Je=0,Re=0;Re<Ee.length;Re++)Ee[Re][0]===`
`&&Je++;return Je>=Ee.length/2?`\r
`:"\r"}}function b(A){return A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function k(A){var T=(A=A||{}).delimiter,O=A.newline,I=A.comments,D=A.step,M=A.preview,ie=A.fastMode,be=null,Ne=!1,we=A.quoteChar==null?'"':A.quoteChar,le=we;if(A.escapeChar!==void 0&&(le=A.escapeChar),(typeof T!="string"||-1<c.BAD_DELIMITERS.indexOf(T))&&(T=","),I===T)throw new Error("Comment character same as delimiter");I===!0?I="#":(typeof I!="string"||-1<c.BAD_DELIMITERS.indexOf(I))&&(I=!1),O!==`
`&&O!=="\r"&&O!==`\r
`&&(O=`
`);var J=0,ue=!1;this.parse=function(ee,C,U){if(typeof ee!="string")throw new Error("Input must be a string");var W=ee.length,Y=T.length,ae=O.length,pe=I.length,he=P(D),xe=[],Ee=[],Fe=[],oe=J=0;if(!ee)return xt();if(ie||ie!==!1&&ee.indexOf(we)===-1){for(var Je=ee.split(O),Re=0;Re<Je.length;Re++){if(Fe=Je[Re],J+=Fe.length,Re!==Je.length-1)J+=O.length;else if(U)return xt();if(!I||Fe.substring(0,pe)!==I){if(he){if(xe=[],Te(Fe.split(T)),yt(),ue)return xt()}else Te(Fe.split(T));if(M&&M<=Re)return xe=xe.slice(0,M),xt(!0)}}return xt()}for(var fe=ee.indexOf(T,J),ot=ee.indexOf(O,J),et=new RegExp(b(le)+b(we),"g"),st=ee.indexOf(we,J);;)if(ee[J]===we)for(st=J,J++;;){if((st=ee.indexOf(we,st+1))===-1)return U||Ee.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:xe.length,index:J}),ut();if(st===W-1)return ut(ee.substring(J,st).replace(et,we));if(we===le&&ee[st+1]===le)st++;else if(we===le||st===0||ee[st-1]!==le){fe!==-1&&fe<st+1&&(fe=ee.indexOf(T,st+1));var K=Ue((ot=ot!==-1&&ot<st+1?ee.indexOf(O,st+1):ot)===-1?fe:Math.min(fe,ot));if(ee.substr(st+1+K,Y)===T){Fe.push(ee.substring(J,st).replace(et,we)),ee[J=st+1+K+Y]!==we&&(st=ee.indexOf(we,J)),fe=ee.indexOf(T,J),ot=ee.indexOf(O,J);break}if(K=Ue(ot),ee.substring(st+1+K,st+1+K+ae)===O){if(Fe.push(ee.substring(J,st).replace(et,we)),pt(st+1+K+ae),fe=ee.indexOf(T,J),st=ee.indexOf(we,J),he&&(yt(),ue))return xt();if(M&&xe.length>=M)return xt(!0);break}Ee.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:xe.length,index:J}),st++}}else if(I&&Fe.length===0&&ee.substring(J,J+pe)===I){if(ot===-1)return xt();J=ot+ae,ot=ee.indexOf(O,J),fe=ee.indexOf(T,J)}else if(fe!==-1&&(fe<ot||ot===-1))Fe.push(ee.substring(J,fe)),J=fe+Y,fe=ee.indexOf(T,J);else{if(ot===-1)break;if(Fe.push(ee.substring(J,ot)),pt(ot+ae),he&&(yt(),ue))return xt();if(M&&xe.length>=M)return xt(!0)}return ut();function Te(ht){xe.push(ht),oe=J}function Ue(ht){var Mt=0;return Mt=ht!==-1&&(ht=ee.substring(st+1,ht))&&ht.trim()===""?ht.length:Mt}function ut(ht){return U||(ht===void 0&&(ht=ee.substring(J)),Fe.push(ht),J=W,Te(Fe),he&&yt()),xt()}function pt(ht){J=ht,Te(Fe),Fe=[],ot=ee.indexOf(O,J)}function xt(ht){if(A.header&&!C&&xe.length&&!Ne){var Mt=xe[0],Lt=Object.create(null),Ot=new Set(Mt);let wt=!1;for(let Nt=0;Nt<Mt.length;Nt++){let cr=Mt[Nt];if(Lt[cr=P(A.transformHeader)?A.transformHeader(cr,Nt):cr]){let er,qt=Lt[cr];for(;er=cr+"_"+qt,qt++,Ot.has(er););Ot.add(er),Mt[Nt]=er,Lt[cr]++,wt=!0,(be=be===null?{}:be)[er]=cr}else Lt[cr]=1,Mt[Nt]=cr;Ot.add(cr)}wt&&console.warn("Duplicate headers found and renamed."),Ne=!0}return{data:xe,errors:Ee,meta:{delimiter:T,linebreak:O,aborted:ue,truncated:!!ht,cursor:oe+(C||0),renamedHeaders:be}}}function yt(){D(xt()),xe=[],Ee=[]}},this.abort=function(){ue=!0},this.getCharIndex=function(){return J}}function F(A){var T=A.data,O=o[T.workerId],I=!1;if(T.error)O.userError(T.error,T.file);else if(T.results&&T.results.data){var D={abort:function(){I=!0,N(T.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:B,resume:B};if(P(O.userStep)){for(var M=0;M<T.results.data.length&&(O.userStep({data:T.results.data[M],errors:T.results.errors,meta:T.results.meta},D),!I);M++);delete T.results}else P(O.userChunk)&&(O.userChunk(T.results,D,T.file),delete T.results)}T.finished&&!I&&N(T.workerId,T.results)}function N(A,T){var O=o[A];P(O.userComplete)&&O.userComplete(T),O.terminate(),delete o[A]}function B(){throw new Error("Not implemented.")}function X(A){if(typeof A!="object"||A===null)return A;var T,O=Array.isArray(A)?[]:{};for(T in A)O[T]=X(A[T]);return O}function G(A,T){return function(){A.apply(T,arguments)}}function P(A){return typeof A=="function"}return c.parse=function(A,T){var O=(T=T||{}).dynamicTyping||!1;if(P(O)&&(T.dynamicTypingFunction=O,O={}),T.dynamicTyping=O,T.transform=!!P(T.transform)&&T.transform,!T.worker||!c.WORKERS_SUPPORTED)return O=null,c.NODE_STREAM_INPUT,typeof A=="string"?(A=(I=>I.charCodeAt(0)!==65279?I:I.slice(1))(A),O=new(T.download?d:p)(T)):A.readable===!0&&P(A.read)&&P(A.on)?O=new _(T):(n.File&&A instanceof File||A instanceof Object)&&(O=new m(T)),O.stream(A);(O=(()=>{var I;return!!c.WORKERS_SUPPORTED&&(I=(()=>{var D=n.URL||n.webkitURL||null,M=r.toString();return c.BLOB_URL||(c.BLOB_URL=D.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",M,")();"],{type:"text/javascript"})))})(),(I=new n.Worker(I)).onmessage=F,I.id=l++,o[I.id]=I)})()).userStep=T.step,O.userChunk=T.chunk,O.userComplete=T.complete,O.userError=T.error,T.step=P(T.step),T.chunk=P(T.chunk),T.complete=P(T.complete),T.error=P(T.error),delete T.worker,O.postMessage({input:A,config:T,workerId:O.id})},c.unparse=function(A,T){var O=!1,I=!0,D=",",M=`\r
`,ie='"',be=ie+ie,Ne=!1,we=null,le=!1,J=((()=>{if(typeof T=="object"){if(typeof T.delimiter!="string"||c.BAD_DELIMITERS.filter(function(C){return T.delimiter.indexOf(C)!==-1}).length||(D=T.delimiter),typeof T.quotes!="boolean"&&typeof T.quotes!="function"&&!Array.isArray(T.quotes)||(O=T.quotes),typeof T.skipEmptyLines!="boolean"&&typeof T.skipEmptyLines!="string"||(Ne=T.skipEmptyLines),typeof T.newline=="string"&&(M=T.newline),typeof T.quoteChar=="string"&&(ie=T.quoteChar),typeof T.header=="boolean"&&(I=T.header),Array.isArray(T.columns)){if(T.columns.length===0)throw new Error("Option columns is empty");we=T.columns}T.escapeChar!==void 0&&(be=T.escapeChar+ie),T.escapeFormulae instanceof RegExp?le=T.escapeFormulae:typeof T.escapeFormulae=="boolean"&&T.escapeFormulae&&(le=/^[=+\-@\t\r].*$/)}})(),new RegExp(b(ie),"g"));if(typeof A=="string"&&(A=JSON.parse(A)),Array.isArray(A)){if(!A.length||Array.isArray(A[0]))return ue(null,A,Ne);if(typeof A[0]=="object")return ue(we||Object.keys(A[0]),A,Ne)}else if(typeof A=="object")return typeof A.data=="string"&&(A.data=JSON.parse(A.data)),Array.isArray(A.data)&&(A.fields||(A.fields=A.meta&&A.meta.fields||we),A.fields||(A.fields=Array.isArray(A.data[0])?A.fields:typeof A.data[0]=="object"?Object.keys(A.data[0]):[]),Array.isArray(A.data[0])||typeof A.data[0]=="object"||(A.data=[A.data])),ue(A.fields||[],A.data||[],Ne);throw new Error("Unable to serialize unrecognized input");function ue(C,U,W){var Y="",ae=(typeof C=="string"&&(C=JSON.parse(C)),typeof U=="string"&&(U=JSON.parse(U)),Array.isArray(C)&&0<C.length),pe=!Array.isArray(U[0]);if(ae&&I){for(var he=0;he<C.length;he++)0<he&&(Y+=D),Y+=ee(C[he],he);0<U.length&&(Y+=M)}for(var xe=0;xe<U.length;xe++){var Ee=(ae?C:U[xe]).length,Fe=!1,oe=ae?Object.keys(U[xe]).length===0:U[xe].length===0;if(W&&!ae&&(Fe=W==="greedy"?U[xe].join("").trim()==="":U[xe].length===1&&U[xe][0].length===0),W==="greedy"&&ae){for(var Je=[],Re=0;Re<Ee;Re++){var fe=pe?C[Re]:Re;Je.push(U[xe][fe])}Fe=Je.join("").trim()===""}if(!Fe){for(var ot=0;ot<Ee;ot++){0<ot&&!oe&&(Y+=D);var et=ae&&pe?C[ot]:ot;Y+=ee(U[xe][et],ot)}xe<U.length-1&&(!W||0<Ee&&!oe)&&(Y+=M)}}return Y}function ee(C,U){var W,Y;return C==null?"":C.constructor===Date?JSON.stringify(C).slice(1,25):(Y=!1,le&&typeof C=="string"&&le.test(C)&&(C="'"+C,Y=!0),W=C.toString().replace(J,be),(Y=Y||O===!0||typeof O=="function"&&O(C,U)||Array.isArray(O)&&O[U]||((ae,pe)=>{for(var he=0;he<pe.length;he++)if(-1<ae.indexOf(pe[he]))return!0;return!1})(W,c.BAD_DELIMITERS)||-1<W.indexOf(D)||W.charAt(0)===" "||W.charAt(W.length-1)===" ")?ie+W+ie:W)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!s&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=k,c.ParserHandle=w,c.NetworkStreamer=d,c.FileStreamer=m,c.StringStreamer=p,c.ReadableStreamStreamer=_,n.jQuery&&((i=n.jQuery).fn.parse=function(A){var T=A.config||{},O=[];return this.each(function(M){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var ie=0;ie<this.files.length;ie++)O.push({file:this.files[ie],inputElem:this,instanceConfig:i.extend({},T)})}),I(),this;function I(){if(O.length===0)P(A.complete)&&A.complete();else{var M,ie,be,Ne,we=O[0];if(P(A.before)){var le=A.before(we.file,we.inputElem);if(typeof le=="object"){if(le.action==="abort")return M="AbortError",ie=we.file,be=we.inputElem,Ne=le.reason,void(P(A.error)&&A.error({name:M},ie,be,Ne));if(le.action==="skip")return void D();typeof le.config=="object"&&(we.instanceConfig=i.extend(we.instanceConfig,le.config))}else if(le==="skip")return void D()}var J=we.instanceConfig.complete;we.instanceConfig.complete=function(ue){P(J)&&J(ue,we.file,we.inputElem),D()},c.parse(we.file,we.instanceConfig)}}function D(){O.splice(0,1),I()}}),a&&(n.onmessage=function(A){A=A.data,c.WORKER_ID===void 0&&A&&(c.WORKER_ID=A.workerId),typeof A.input=="string"?n.postMessage({workerId:c.WORKER_ID,results:c.parse(A.input,A.config),finished:!0}):(n.File&&A.input instanceof File||A.input instanceof Object)&&(A=c.parse(A.input,A.config))&&n.postMessage({workerId:c.WORKER_ID,results:A,finished:!0})}),(d.prototype=Object.create(f.prototype)).constructor=d,(m.prototype=Object.create(f.prototype)).constructor=m,(p.prototype=Object.create(p.prototype)).constructor=p,(_.prototype=Object.create(f.prototype)).constructor=_,c})})(y2)),y2.exports}var bY=_Y();const DP=s8(bY);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var sv={};sv.version="0.18.5";var OP=1252,EY=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Db={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Ob=function(t){EY.indexOf(t)!=-1&&(OP=Db[0]=t)};function SY(){Ob(1252)}var sc=function(t){Ob(t)};function Mb(){sc(1200),SY()}function Ak(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function kY(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function MP(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var tm=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?kY(t.slice(2)):e==254&&r==255?MP(t.slice(2)):e==65279?t.slice(1):t},jx=function(e){return String.fromCharCode(e)},Ck=function(e){return String.fromCharCode(e)},zm,Wf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function $m(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0,l=0,c=0;c<t.length;)r=t.charCodeAt(c++),s=r>>2,n=t.charCodeAt(c++),a=(r&3)<<4|n>>4,i=t.charCodeAt(c++),o=(n&15)<<2|i>>6,l=i&63,isNaN(n)?o=l=64:isNaN(i)&&(l=64),e+=Wf.charAt(s)+Wf.charAt(a)+Wf.charAt(o)+Wf.charAt(l);return e}function ul(t){var e="",r=0,n=0,i=0,s=0,a=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)s=Wf.indexOf(t.charAt(c++)),a=Wf.indexOf(t.charAt(c++)),r=s<<2|a>>4,e+=String.fromCharCode(r),o=Wf.indexOf(t.charAt(c++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=Wf.indexOf(t.charAt(c++)),i=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var Kr=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Ju=(function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function dh(t){return Kr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function Ik(t){return Kr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var nl=function(e){return Kr?Ju(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function fy(t){if(typeof ArrayBuffer>"u")return nl(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function Ch(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function TY(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function jb(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return jb(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var ia=Kr?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Ju(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),i=0;for(e=0,r=0;e<t.length;r+=i,++e)if(i=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function AY(t){for(var e=[],r=0,n=t.length+250,i=dh(t.length+255),s=0;s<t.length;++s){var a=t.charCodeAt(s);if(a<128)i[r++]=a;else if(a<2048)i[r++]=192|a>>6&31,i[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++s)&1023;i[r++]=240|a>>8&7,i[r++]=128|a>>2&63,i[r++]=128|o>>6&15|(a&3)<<4,i[r++]=128|o&63}else i[r++]=224|a>>12&15,i[r++]=128|a>>6&63,i[r++]=128|a&63;r>n&&(e.push(i.slice(0,r)),r=0,i=dh(65535),n=65530)}return e.push(i.slice(0,r)),ia(e)}var yo=/\u0000/g,rm=/[\u0001-\u0006]/g;function sp(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function ac(t,e){var r=""+t;return r.length>=e?r:Yi("0",e-r.length)+r}function Bb(t,e){var r=""+t;return r.length>=e?r:Yi(" ",e-r.length)+r}function av(t,e){var r=""+t;return r.length>=e?r:r+Yi(" ",e-r.length)}function CY(t,e){var r=""+Math.round(t);return r.length>=e?r:Yi("0",e-r.length)+r}function IY(t,e){var r=""+t;return r.length>=e?r:Yi("0",e-r.length)+r}var Nk=Math.pow(2,32);function P0(t,e){if(t>Nk||t<-Nk)return CY(t,e);var r=Math.round(t);return IY(r,e)}function ov(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var Pk=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],$w=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function NY(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Tr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Rk={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},PY={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function lv(t,e,r){for(var n=t<0?-1:1,i=t*n,s=0,a=1,o=0,l=1,c=0,f=0,d=Math.floor(i);c<e&&(d=Math.floor(i),o=d*a+s,f=d*c+l,!(i-d<5e-8));)i=1/(i-d),s=a,a=o,l=c,c=f;if(f>e&&(c>e?(f=l,o=s):(f=c,o=a)),!r)return[0,n*o,f];var m=Math.floor(n*o/f);return[m,n*o-m*f,f]}function ud(t,e,r){if(t>2958465||t<0)return null;var n=t|0,i=Math.floor(86400*(t-n)),s=0,a=[],o={D:n,T:i,u:86400*(t-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=MY(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var jP=new Date(1899,11,31,0,0,0),RY=jP.getTime(),FY=new Date(1900,2,1,0,0,0);function BP(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=FY&&(r+=1440*60*1e3),(r-(RY+(t.getTimezoneOffset()-jP.getTimezoneOffset())*6e4))/(1440*60*1e3)}function Vb(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function LY(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function DY(t){var e=t<0?12:11,r=Vb(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function OY(t){var e=Vb(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function Hm(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=DY(t):e===10?r=t.toFixed(10).substr(0,12):r=OY(t),Vb(LY(r.toUpperCase()))}function Od(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Hm(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Dl(14,BP(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function MY(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function jY(t,e,r,n){var i="",s=0,a=0,o=r.y,l,c=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,c=e.length;break;case 3:return $w[r.m-1][1];case 5:return $w[r.m-1][0];default:return $w[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,c=e.length;break;case 3:return Pk[r.q][0];default:return Pk[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?ac(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,s=Math.round(a*(r.S+r.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=ac(s,2+n),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var f=c>0?ac(l,c):"";return f}function qf(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var VP=/%/g;function BY(t,e,r){var n=e.replace(VP,""),i=e.length-n.length;return Ou(t,n,r*Math.pow(10,2*i))+Yi("%",i)}function VY(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Ou(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function UP(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+UP(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,f){return l+c+f.substr(0,(i+s)%i)+"."+f.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var zP=/# (\?+)( ?)\/( ?)(\d+)/;function UY(t,e,r){var n=parseInt(t[4],10),i=Math.round(e*n),s=Math.floor(i/n),a=i-s*n,o=n;return r+(s===0?"":""+s)+" "+(a===0?Yi(" ",t[1].length+1+t[4].length):Bb(a,t[1].length)+t[2]+"/"+t[3]+ac(o,t[4].length))}function zY(t,e,r){return r+(e===0?"":""+e)+Yi(" ",t[1].length+2+t[4].length)}var $P=/^#*0*\.([0#]+)/,HP=/\).*[0#]/,WP=/\(###\) ###\\?-####/;function go(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function Fk(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function Lk(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function $Y(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function HY(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Cl(t,e,r){if(t.charCodeAt(0)===40&&!e.match(HP)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Cl("n",n,r):"("+Cl("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return VY(t,e,r);if(e.indexOf("%")!==-1)return BY(t,e,r);if(e.indexOf("E")!==-1)return UP(e,r);if(e.charCodeAt(0)===36)return"$"+Cl(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+P0(l,e.length);if(e.match(/^[#?]+$/))return i=P0(r,0),i==="0"&&(i=""),i.length>e.length?i:go(e.substr(0,e.length-i.length))+i;if(s=e.match(zP))return UY(s,l,c);if(e.match(/^#+0+$/))return c+P0(l,e.length-e.indexOf("0"));if(s=e.match($P))return i=Fk(r,s[1].length).replace(/^([^\.]+)$/,"$1."+go(s[1])).replace(/\.$/,"."+go(s[1])).replace(/\.(\d*)$/,function(_,w){return"."+w+Yi("0",go(s[1]).length-w.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+Fk(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+qf(P0(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Cl(t,e,-r):qf(""+(Math.floor(r)+$Y(r,s[1].length)))+"."+ac(Lk(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Cl(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=sp(Cl(t,e.replace(/[\\-]/g,""),r)),a=0,sp(sp(e.replace(/\\/g,"")).replace(/[0#]/g,function(_){return a<i.length?i.charAt(a++):_==="0"?"0":""}));if(e.match(WP))return i=Cl(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var f="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=lv(l,Math.pow(10,a)-1,!1),i=""+c,f=Ou("n",s[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),i+=f+s[2]+"/"+s[3],f=av(o[2],a),f.length<s[4].length&&(f=go(s[4].substr(s[4].length-f.length))+f),i+=f,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=lv(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Bb(o[1],a)+s[2]+"/"+s[3]+av(o[2],a):Yi(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=P0(r,0),e.length<=i.length?i:go(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,m=e.length-i.length-d;return go(e.substr(0,d)+i+e.substr(e.length-m))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=Lk(r,s[1].length),r<0?"-"+Cl(t,e,-r):qf(HY(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(_){return"00,"+(_.length<3?ac(0,3-_.length):"")+_})+"."+ac(a,s[1].length);switch(e){case"###,##0.00":return Cl(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=qf(P0(l,0));return p!=="0"?c+p:"";case"###,###.00":return Cl(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Cl(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function WY(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Ou(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function qY(t,e,r){var n=e.replace(VP,""),i=e.length-n.length;return Ou(t,n,r*Math.pow(10,2*i))+Yi("%",i)}function qP(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+qP(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,f){return l+c+f.substr(0,(i+s)%i)+"."+f.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Lc(t,e,r){if(t.charCodeAt(0)===40&&!e.match(HP)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Lc("n",n,r):"("+Lc("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return WY(t,e,r);if(e.indexOf("%")!==-1)return qY(t,e,r);if(e.indexOf("E")!==-1)return qP(e,r);if(e.charCodeAt(0)===36)return"$"+Lc(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+ac(l,e.length);if(e.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>e.length?i:go(e.substr(0,e.length-i.length))+i;if(s=e.match(zP))return zY(s,l,c);if(e.match(/^#+0+$/))return c+ac(l,e.length-e.indexOf("0"));if(s=e.match($P))return i=(""+r).replace(/^([^\.]+)$/,"$1."+go(s[1])).replace(/\.$/,"."+go(s[1])),i=i.replace(/\.(\d*)$/,function(_,w){return"."+w+Yi("0",go(s[1]).length-w.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+qf(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Lc(t,e,-r):qf(""+r)+"."+Yi("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Lc(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=sp(Lc(t,e.replace(/[\\-]/g,""),r)),a=0,sp(sp(e.replace(/\\/g,"")).replace(/[0#]/g,function(_){return a<i.length?i.charAt(a++):_==="0"?"0":""}));if(e.match(WP))return i=Lc(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var f="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=lv(l,Math.pow(10,a)-1,!1),i=""+c,f=Ou("n",s[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),i+=f+s[2]+"/"+s[3],f=av(o[2],a),f.length<s[4].length&&(f=go(s[4].substr(s[4].length-f.length))+f),i+=f,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=lv(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Bb(o[1],a)+s[2]+"/"+s[3]+av(o[2],a):Yi(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+r,e.length<=i.length?i:go(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,m=e.length-i.length-d;return go(e.substr(0,d)+i+e.substr(e.length-m))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Lc(t,e,-r):qf(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(_){return"00,"+(_.length<3?ac(0,3-_.length):"")+_})+"."+ac(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=qf(""+l);return p!=="0"?c+p:"";default:if(e.match(/\.[0#?]*$/))return Lc(t,e.slice(0,e.lastIndexOf(".")),r)+go(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Ou(t,e,r){return(r|0)===r?Lc(t,e,r):Cl(t,e,r)}function GY(t){for(var e=[],r=!1,n=0,i=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(i,n-i),i=n+1}if(e[e.length]=t.substr(i),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var GP=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function r1(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":ov(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(GP))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function KY(t,e,r,n){for(var i=[],s="",a=0,o="",l="t",c,f,d,m="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!ov(t,a))throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(d=t.charCodeAt(++a))!==34&&a<t.length;)s+=String.fromCharCode(d);i[i.length]={t:"t",v:s},++a;break;case"\\":var p=t.charAt(++a),_=p==="("||p===")"?p:"t";i[i.length]={t:_,v:p},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(c==null&&(c=ud(e,r,t.charAt(a+1)==="2"),c==null))return"";i[i.length]={t:"X",v:t.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=ud(e,r),c==null))return"";for(s=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=m),i[i.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var w={t:o,v:o};if(c==null&&(c=ud(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(w.v=c.H>=12?"P":"A"),w.t="T",m="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(w.v=c.H>=12?"PM":"AM"),w.t="T",a+=5,m="h"):t.substr(a,5).toUpperCase()==="/"?(c!=null&&(w.v=c.H>=12?"":""),w.t="T",a+=5,m="h"):(w.t="t",++a),c==null&&w.t==="T")return"";i[i.length]=w,l=o;break;case"[":for(s=o;t.charAt(a++)!=="]"&&a<t.length;)s+=t.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(GP)){if(c==null&&(c=ud(e,r),c==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",r1(t)||(i[i.length]={t:"t",v:s}));break;case".":if(c!=null){for(s=o;++a<t.length&&(o=t.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;t.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},l=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)s+=t.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"t",v:o},++a;break}var b=0,k=0,F;for(a=i.length-1,l="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=m,l="h",b<1&&(b=1);break;case"s":(F=i[a].v.match(/\.0+$/))&&(k=Math.max(k,F[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":l=i[a].t;break;case"m":l==="s"&&(i[a].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&i[a].v.match(/[Hh]/)&&(b=1),b<2&&i[a].v.match(/[Mm]/)&&(b=2),b<3&&i[a].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var N="",B;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=jY(i[a].t.charCodeAt(0),i[a].v,c,k),i[a].t="t";break;case"n":case"?":for(B=a+1;i[B]!=null&&((o=i[B].t)==="?"||o==="D"||(o===" "||o==="t")&&i[B+1]!=null&&(i[B+1].t==="?"||i[B+1].t==="t"&&i[B+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[B].v==="/"||i[B].v===" "&&i[B+1]!=null&&i[B+1].t=="?"));)i[a].v+=i[B].v,i[B]={v:"",t:";"},++B;N+=i[a].v,a=B-1;break;case"G":i[a].t="t",i[a].v=Od(e,r);break}var X="",G,P;if(N.length>0){N.charCodeAt(0)==40?(G=e<0&&N.charCodeAt(0)===45?-e:e,P=Ou("n",N,G)):(G=e<0&&n>1?-e:e,P=Ou("n",N,G),G<0&&i[0]&&i[0].t=="t"&&(P=P.substr(1),i[0].v="-"+i[0].v)),B=P.length-1;var A=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){A=a;break}var T=i.length;if(A===i.length&&P.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(B>=i[a].v.length-1?(B-=i[a].v.length,i[a].v=P.substr(B+1,i[a].v.length)):B<0?i[a].v="":(i[a].v=P.substr(0,B+1),B=-1),i[a].t="t",T=a);B>=0&&T<i.length&&(i[T].v=P.substr(0,B+1)+i[T].v)}else if(A!==i.length&&P.indexOf("E")===-1){for(B=P.indexOf(".")-1,a=A;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(f=i[a].v.indexOf(".")>-1&&a===A?i[a].v.indexOf(".")-1:i[a].v.length-1,X=i[a].v.substr(f+1);f>=0;--f)B>=0&&(i[a].v.charAt(f)==="0"||i[a].v.charAt(f)==="#")&&(X=P.charAt(B--)+X);i[a].v=X,i[a].t="t",T=a}for(B>=0&&T<i.length&&(i[T].v=P.substr(0,B+1)+i[T].v),B=P.indexOf(".")+1,a=A;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==A)){for(f=i[a].v.indexOf(".")>-1&&a===A?i[a].v.indexOf(".")+1:0,X=i[a].v.substr(0,f);f<i[a].v.length;++f)B<P.length&&(X+=P.charAt(B++));i[a].v=X,i[a].t="t",T=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(G=n>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Ou(i[a].t,i[a].v,G),i[a].t="t");var O="";for(a=0;a!==i.length;++a)i[a]!=null&&(O+=i[a].v);return O}var Dk=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Ok(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function XY(t,e){var r=GY(t),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(Dk),o=r[1].match(Dk);return Ok(e,a)?[n,r[0]]:Ok(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,s]}function Dl(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Tr)[t],n==null&&(n=r.table&&r.table[Rk[t]]||Tr[Rk[t]]),n==null&&(n=PY[t]||"General");break}if(ov(n,0))return Od(e,r);e instanceof Date&&(e=BP(e,r.date1904));var i=XY(n,e);if(ov(i[1]))return Od(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return KY(i[1],e,r,i[0])}function Mu(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Tr[r]==null){e<0&&(e=r);continue}if(Tr[r]==t){e=r;break}}e<0&&(e=391)}return Tr[e]=t,e}function hy(t){for(var e=0;e!=392;++e)t[e]!==void 0&&Mu(t[e],e)}function n1(){Tr=NY()}var YY={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},KP=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function QY(t){var e=typeof t=="number"?Tr[t]:t;return e=e.replace(KP,"(\\d+)"),new RegExp("^"+e+"$")}function JY(t,e,r){var n=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(e.match(KP)||[]).forEach(function(d,m){var p=parseInt(r[m+1],10);switch(d.toLowerCase().charAt(0)){case"y":n=p;break;case"d":s=p;break;case"h":a=p;break;case"s":l=p;break;case"m":a>=0?o=p:i=p;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var f=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:n==-1&&i==-1&&s==-1?f:c+"T"+f}var ZY=(function(){var t={};t.version="1.2.0";function e(){for(var P=0,A=new Array(256),T=0;T!=256;++T)P=T,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,A[T]=P;return typeof Int32Array<"u"?new Int32Array(A):A}var r=e();function n(P){var A=0,T=0,O=0,I=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(O=0;O!=256;++O)I[O]=P[O];for(O=0;O!=256;++O)for(T=P[O],A=256+O;A<4096;A+=256)T=I[A]=T>>>8^P[T&255];var D=[];for(O=1;O!=16;++O)D[O-1]=typeof Int32Array<"u"?I.subarray(O*256,O*256+256):I.slice(O*256,O*256+256);return D}var i=n(r),s=i[0],a=i[1],o=i[2],l=i[3],c=i[4],f=i[5],d=i[6],m=i[7],p=i[8],_=i[9],w=i[10],b=i[11],k=i[12],F=i[13],N=i[14];function B(P,A){for(var T=A^-1,O=0,I=P.length;O<I;)T=T>>>8^r[(T^P.charCodeAt(O++))&255];return~T}function X(P,A){for(var T=A^-1,O=P.length-15,I=0;I<O;)T=N[P[I++]^T&255]^F[P[I++]^T>>8&255]^k[P[I++]^T>>16&255]^b[P[I++]^T>>>24]^w[P[I++]]^_[P[I++]]^p[P[I++]]^m[P[I++]]^d[P[I++]]^f[P[I++]]^c[P[I++]]^l[P[I++]]^o[P[I++]]^a[P[I++]]^s[P[I++]]^r[P[I++]];for(O+=15;I<O;)T=T>>>8^r[(T^P[I++])&255];return~T}function G(P,A){for(var T=A^-1,O=0,I=P.length,D=0,M=0;O<I;)D=P.charCodeAt(O++),D<128?T=T>>>8^r[(T^D)&255]:D<2048?(T=T>>>8^r[(T^(192|D>>6&31))&255],T=T>>>8^r[(T^(128|D&63))&255]):D>=55296&&D<57344?(D=(D&1023)+64,M=P.charCodeAt(O++)&1023,T=T>>>8^r[(T^(240|D>>8&7))&255],T=T>>>8^r[(T^(128|D>>2&63))&255],T=T>>>8^r[(T^(128|M>>6&15|(D&3)<<4))&255],T=T>>>8^r[(T^(128|M&63))&255]):(T=T>>>8^r[(T^(224|D>>12&15))&255],T=T>>>8^r[(T^(128|D>>6&63))&255],T=T>>>8^r[(T^(128|D&63))&255]);return~T}return t.table=r,t.bstr=B,t.buf=X,t.str=G,t})(),yr=(function(){var e={};e.version="1.2.1";function r(re,Ae){for(var ve=re.split("/"),ye=Ae.split("/"),Ce=0,Ie=0,He=Math.min(ve.length,ye.length);Ce<He;++Ce){if(Ie=ve[Ce].length-ye[Ce].length)return Ie;if(ve[Ce]!=ye[Ce])return ve[Ce]<ye[Ce]?-1:1}return ve.length-ye.length}function n(re){if(re.charAt(re.length-1)=="/")return re.slice(0,-1).indexOf("/")===-1?re:n(re.slice(0,-1));var Ae=re.lastIndexOf("/");return Ae===-1?re:re.slice(0,Ae+1)}function i(re){if(re.charAt(re.length-1)=="/")return i(re.slice(0,-1));var Ae=re.lastIndexOf("/");return Ae===-1?re:re.slice(Ae+1)}function s(re,Ae){typeof Ae=="string"&&(Ae=new Date(Ae));var ve=Ae.getHours();ve=ve<<6|Ae.getMinutes(),ve=ve<<5|Ae.getSeconds()>>>1,re.write_shift(2,ve);var ye=Ae.getFullYear()-1980;ye=ye<<4|Ae.getMonth()+1,ye=ye<<5|Ae.getDate(),re.write_shift(2,ye)}function a(re){var Ae=re.read_shift(2)&65535,ve=re.read_shift(2)&65535,ye=new Date,Ce=ve&31;ve>>>=5;var Ie=ve&15;ve>>>=4,ye.setMilliseconds(0),ye.setFullYear(ve+1980),ye.setMonth(Ie-1),ye.setDate(Ce);var He=Ae&31;Ae>>>=5;var tt=Ae&63;return Ae>>>=6,ye.setHours(Ae),ye.setMinutes(tt),ye.setSeconds(He<<1),ye}function o(re){Ea(re,0);for(var Ae={},ve=0;re.l<=re.length-4;){var ye=re.read_shift(2),Ce=re.read_shift(2),Ie=re.l+Ce,He={};switch(ye){case 21589:ve=re.read_shift(1),ve&1&&(He.mtime=re.read_shift(4)),Ce>5&&(ve&2&&(He.atime=re.read_shift(4)),ve&4&&(He.ctime=re.read_shift(4))),He.mtime&&(He.mt=new Date(He.mtime*1e3));break}re.l=Ie,Ae[ye]=He}return Ae}var l;function c(){return l||(l={})}function f(re,Ae){if(re[0]==80&&re[1]==75)return tr(re,Ae);if((re[0]|32)==109&&(re[1]|32)==105)return nr(re,Ae);if(re.length<512)throw new Error("CFB file size "+re.length+" < 512");var ve=3,ye=512,Ce=0,Ie=0,He=0,tt=0,Ge=0,Ke=[],Qe=re.slice(0,512);Ea(Qe,0);var _t=d(Qe);switch(ve=_t[0],ve){case 3:ye=512;break;case 4:ye=4096;break;case 0:if(_t[1]==0)return tr(re,Ae);default:throw new Error("Major Version: Expected 3 or 4 saw "+ve)}ye!==512&&(Qe=re.slice(0,ye),Ea(Qe,28));var Ft=re.slice(0,ye);m(Qe,ve);var Ht=Qe.read_shift(4,"i");if(ve===3&&Ht!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ht);Qe.l+=4,He=Qe.read_shift(4,"i"),Qe.l+=4,Qe.chk("00100000","Mini Stream Cutoff Size: "),tt=Qe.read_shift(4,"i"),Ce=Qe.read_shift(4,"i"),Ge=Qe.read_shift(4,"i"),Ie=Qe.read_shift(4,"i");for(var Rt=-1,Tt=0;Tt<109&&(Rt=Qe.read_shift(4,"i"),!(Rt<0));++Tt)Ke[Tt]=Rt;var br=p(re,ye);b(Ge,Ie,br,ye,Ke);var on=F(br,He,Ke,ye);on[He].name="!Directory",Ce>0&&tt!==M&&(on[tt].name="!MiniFAT"),on[Ke[0]].name="!FAT",on.fat_addrs=Ke,on.ssz=ye;var Dr={},fn=[],Aa=[],Ca=[];N(He,on,br,fn,Ce,Dr,Aa,tt),_(Aa,Ca,fn),fn.shift();var Ws={FileIndex:Aa,FullPaths:Ca};return Ae&&Ae.raw&&(Ws.raw={header:Ft,sectors:br}),Ws}function d(re){if(re[re.l]==80&&re[re.l+1]==75)return[0,0];re.chk(ie,"Header Signature: "),re.l+=16;var Ae=re.read_shift(2,"u");return[re.read_shift(2,"u"),Ae]}function m(re,Ae){var ve=9;switch(re.l+=2,ve=re.read_shift(2)){case 9:if(Ae!=3)throw new Error("Sector Shift: Expected 9 saw "+ve);break;case 12:if(Ae!=4)throw new Error("Sector Shift: Expected 12 saw "+ve);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ve)}re.chk("0600","Mini Sector Shift: "),re.chk("000000000000","Reserved: ")}function p(re,Ae){for(var ve=Math.ceil(re.length/Ae)-1,ye=[],Ce=1;Ce<ve;++Ce)ye[Ce-1]=re.slice(Ce*Ae,(Ce+1)*Ae);return ye[ve-1]=re.slice(ve*Ae),ye}function _(re,Ae,ve){for(var ye=0,Ce=0,Ie=0,He=0,tt=0,Ge=ve.length,Ke=[],Qe=[];ye<Ge;++ye)Ke[ye]=Qe[ye]=ye,Ae[ye]=ve[ye];for(;tt<Qe.length;++tt)ye=Qe[tt],Ce=re[ye].L,Ie=re[ye].R,He=re[ye].C,Ke[ye]===ye&&(Ce!==-1&&Ke[Ce]!==Ce&&(Ke[ye]=Ke[Ce]),Ie!==-1&&Ke[Ie]!==Ie&&(Ke[ye]=Ke[Ie])),He!==-1&&(Ke[He]=ye),Ce!==-1&&ye!=Ke[ye]&&(Ke[Ce]=Ke[ye],Qe.lastIndexOf(Ce)<tt&&Qe.push(Ce)),Ie!==-1&&ye!=Ke[ye]&&(Ke[Ie]=Ke[ye],Qe.lastIndexOf(Ie)<tt&&Qe.push(Ie));for(ye=1;ye<Ge;++ye)Ke[ye]===ye&&(Ie!==-1&&Ke[Ie]!==Ie?Ke[ye]=Ke[Ie]:Ce!==-1&&Ke[Ce]!==Ce&&(Ke[ye]=Ke[Ce]));for(ye=1;ye<Ge;++ye)if(re[ye].type!==0){if(tt=ye,tt!=Ke[tt])do tt=Ke[tt],Ae[ye]=Ae[tt]+"/"+Ae[ye];while(tt!==0&&Ke[tt]!==-1&&tt!=Ke[tt]);Ke[ye]=-1}for(Ae[0]+="/",ye=1;ye<Ge;++ye)re[ye].type!==2&&(Ae[ye]+="/")}function w(re,Ae,ve){for(var ye=re.start,Ce=re.size,Ie=[],He=ye;ve&&Ce>0&&He>=0;)Ie.push(Ae.slice(He*D,He*D+D)),Ce-=D,He=sd(ve,He*4);return Ie.length===0?ft(0):ia(Ie).slice(0,re.size)}function b(re,Ae,ve,ye,Ce){var Ie=M;if(re===M){if(Ae!==0)throw new Error("DIFAT chain shorter than expected")}else if(re!==-1){var He=ve[re],tt=(ye>>>2)-1;if(!He)return;for(var Ge=0;Ge<tt&&(Ie=sd(He,Ge*4))!==M;++Ge)Ce.push(Ie);b(sd(He,ye-4),Ae-1,ve,ye,Ce)}}function k(re,Ae,ve,ye,Ce){var Ie=[],He=[];Ce||(Ce=[]);var tt=ye-1,Ge=0,Ke=0;for(Ge=Ae;Ge>=0;){Ce[Ge]=!0,Ie[Ie.length]=Ge,He.push(re[Ge]);var Qe=ve[Math.floor(Ge*4/ye)];if(Ke=Ge*4&tt,ye<4+Ke)throw new Error("FAT boundary crossed: "+Ge+" 4 "+ye);if(!re[Qe])break;Ge=sd(re[Qe],Ke)}return{nodes:Ie,data:Kk([He])}}function F(re,Ae,ve,ye){var Ce=re.length,Ie=[],He=[],tt=[],Ge=[],Ke=ye-1,Qe=0,_t=0,Ft=0,Ht=0;for(Qe=0;Qe<Ce;++Qe)if(tt=[],Ft=Qe+Ae,Ft>=Ce&&(Ft-=Ce),!He[Ft]){Ge=[];var Rt=[];for(_t=Ft;_t>=0;){Rt[_t]=!0,He[_t]=!0,tt[tt.length]=_t,Ge.push(re[_t]);var Tt=ve[Math.floor(_t*4/ye)];if(Ht=_t*4&Ke,ye<4+Ht)throw new Error("FAT boundary crossed: "+_t+" 4 "+ye);if(!re[Tt]||(_t=sd(re[Tt],Ht),Rt[_t]))break}Ie[Ft]={nodes:tt,data:Kk([Ge])}}return Ie}function N(re,Ae,ve,ye,Ce,Ie,He,tt){for(var Ge=0,Ke=ye.length?2:0,Qe=Ae[re].data,_t=0,Ft=0,Ht;_t<Qe.length;_t+=128){var Rt=Qe.slice(_t,_t+128);Ea(Rt,64),Ft=Rt.read_shift(2),Ht=Gb(Rt,0,Ft-Ke),ye.push(Ht);var Tt={name:Ht,type:Rt.read_shift(1),color:Rt.read_shift(1),L:Rt.read_shift(4,"i"),R:Rt.read_shift(4,"i"),C:Rt.read_shift(4,"i"),clsid:Rt.read_shift(16),state:Rt.read_shift(4,"i"),start:0,size:0},br=Rt.read_shift(2)+Rt.read_shift(2)+Rt.read_shift(2)+Rt.read_shift(2);br!==0&&(Tt.ct=B(Rt,Rt.l-8));var on=Rt.read_shift(2)+Rt.read_shift(2)+Rt.read_shift(2)+Rt.read_shift(2);on!==0&&(Tt.mt=B(Rt,Rt.l-8)),Tt.start=Rt.read_shift(4,"i"),Tt.size=Rt.read_shift(4,"i"),Tt.size<0&&Tt.start<0&&(Tt.size=Tt.type=0,Tt.start=M,Tt.name=""),Tt.type===5?(Ge=Tt.start,Ce>0&&Ge!==M&&(Ae[Ge].name="!StreamData")):Tt.size>=4096?(Tt.storage="fat",Ae[Tt.start]===void 0&&(Ae[Tt.start]=k(ve,Tt.start,Ae.fat_addrs,Ae.ssz)),Ae[Tt.start].name=Tt.name,Tt.content=Ae[Tt.start].data.slice(0,Tt.size)):(Tt.storage="minifat",Tt.size<0?Tt.size=0:Ge!==M&&Tt.start!==M&&Ae[Ge]&&(Tt.content=w(Tt,Ae[Ge].data,(Ae[tt]||{}).data))),Tt.content&&Ea(Tt.content,0),Ie[Ht]=Tt,He.push(Tt)}}function B(re,Ae){return new Date((rl(re,Ae+4)/1e7*Math.pow(2,32)+rl(re,Ae)/1e7-11644473600)*1e3)}function X(re,Ae){return c(),f(l.readFileSync(re),Ae)}function G(re,Ae){var ve=Ae&&Ae.type;switch(ve||Kr&&Buffer.isBuffer(re)&&(ve="buffer"),ve||"base64"){case"file":return X(re,Ae);case"base64":return f(nl(ul(re)),Ae);case"binary":return f(nl(re),Ae)}return f(re,Ae)}function P(re,Ae){var ve=Ae||{},ye=ve.root||"Root Entry";if(re.FullPaths||(re.FullPaths=[]),re.FileIndex||(re.FileIndex=[]),re.FullPaths.length!==re.FileIndex.length)throw new Error("inconsistent CFB structure");re.FullPaths.length===0&&(re.FullPaths[0]=ye+"/",re.FileIndex[0]={name:ye,type:5}),ve.CLSID&&(re.FileIndex[0].clsid=ve.CLSID),A(re)}function A(re){var Ae="Sh33tJ5";if(!yr.find(re,"/"+Ae)){var ve=ft(4);ve[0]=55,ve[1]=ve[3]=50,ve[2]=54,re.FileIndex.push({name:Ae,type:2,content:ve,size:4,L:69,R:69,C:69}),re.FullPaths.push(re.FullPaths[0]+Ae),T(re)}}function T(re,Ae){P(re);for(var ve=!1,ye=!1,Ce=re.FullPaths.length-1;Ce>=0;--Ce){var Ie=re.FileIndex[Ce];switch(Ie.type){case 0:ye?ve=!0:(re.FileIndex.pop(),re.FullPaths.pop());break;case 1:case 2:case 5:ye=!0,isNaN(Ie.R*Ie.L*Ie.C)&&(ve=!0),Ie.R>-1&&Ie.L>-1&&Ie.R==Ie.L&&(ve=!0);break;default:ve=!0;break}}if(!(!ve&&!Ae)){var He=new Date(1987,1,19),tt=0,Ge=Object.create?Object.create(null):{},Ke=[];for(Ce=0;Ce<re.FullPaths.length;++Ce)Ge[re.FullPaths[Ce]]=!0,re.FileIndex[Ce].type!==0&&Ke.push([re.FullPaths[Ce],re.FileIndex[Ce]]);for(Ce=0;Ce<Ke.length;++Ce){var Qe=n(Ke[Ce][0]);ye=Ge[Qe],ye||(Ke.push([Qe,{name:i(Qe).replace("/",""),type:1,clsid:Ne,ct:He,mt:He,content:null}]),Ge[Qe]=!0)}for(Ke.sort(function(Ht,Rt){return r(Ht[0],Rt[0])}),re.FullPaths=[],re.FileIndex=[],Ce=0;Ce<Ke.length;++Ce)re.FullPaths[Ce]=Ke[Ce][0],re.FileIndex[Ce]=Ke[Ce][1];for(Ce=0;Ce<Ke.length;++Ce){var _t=re.FileIndex[Ce],Ft=re.FullPaths[Ce];if(_t.name=i(Ft).replace("/",""),_t.L=_t.R=_t.C=-(_t.color=1),_t.size=_t.content?_t.content.length:0,_t.start=0,_t.clsid=_t.clsid||Ne,Ce===0)_t.C=Ke.length>1?1:-1,_t.size=0,_t.type=5;else if(Ft.slice(-1)=="/"){for(tt=Ce+1;tt<Ke.length&&n(re.FullPaths[tt])!=Ft;++tt);for(_t.C=tt>=Ke.length?-1:tt,tt=Ce+1;tt<Ke.length&&n(re.FullPaths[tt])!=n(Ft);++tt);_t.R=tt>=Ke.length?-1:tt,_t.type=1}else n(re.FullPaths[Ce+1]||"")==n(Ft)&&(_t.R=Ce+1),_t.type=2}}}function O(re,Ae){var ve=Ae||{};if(ve.fileType=="mad")return Hr(re,ve);switch(T(re),ve.fileType){case"zip":return ur(re,ve)}var ye=(function(Ht){for(var Rt=0,Tt=0,br=0;br<Ht.FileIndex.length;++br){var on=Ht.FileIndex[br];if(on.content){var Dr=on.content.length;Dr>0&&(Dr<4096?Rt+=Dr+63>>6:Tt+=Dr+511>>9)}}for(var fn=Ht.FullPaths.length+3>>2,Aa=Rt+7>>3,Ca=Rt+127>>7,Ws=Aa+Tt+fn+Ca,ni=Ws+127>>7,Bo=ni<=109?0:Math.ceil((ni-109)/127);Ws+ni+Bo+127>>7>ni;)Bo=++ni<=109?0:Math.ceil((ni-109)/127);var En=[1,Bo,ni,Ca,fn,Tt,Rt,0];return Ht.FileIndex[0].size=Rt<<6,En[7]=(Ht.FileIndex[0].start=En[0]+En[1]+En[2]+En[3]+En[4]+En[5])+(En[6]+7>>3),En})(re),Ce=ft(ye[7]<<9),Ie=0,He=0;{for(Ie=0;Ie<8;++Ie)Ce.write_shift(1,be[Ie]);for(Ie=0;Ie<8;++Ie)Ce.write_shift(2,0);for(Ce.write_shift(2,62),Ce.write_shift(2,3),Ce.write_shift(2,65534),Ce.write_shift(2,9),Ce.write_shift(2,6),Ie=0;Ie<3;++Ie)Ce.write_shift(2,0);for(Ce.write_shift(4,0),Ce.write_shift(4,ye[2]),Ce.write_shift(4,ye[0]+ye[1]+ye[2]+ye[3]-1),Ce.write_shift(4,0),Ce.write_shift(4,4096),Ce.write_shift(4,ye[3]?ye[0]+ye[1]+ye[2]-1:M),Ce.write_shift(4,ye[3]),Ce.write_shift(-4,ye[1]?ye[0]-1:M),Ce.write_shift(4,ye[1]),Ie=0;Ie<109;++Ie)Ce.write_shift(-4,Ie<ye[2]?ye[1]+Ie:-1)}if(ye[1])for(He=0;He<ye[1];++He){for(;Ie<236+He*127;++Ie)Ce.write_shift(-4,Ie<ye[2]?ye[1]+Ie:-1);Ce.write_shift(-4,He===ye[1]-1?M:He+1)}var tt=function(Ht){for(He+=Ht;Ie<He-1;++Ie)Ce.write_shift(-4,Ie+1);Ht&&(++Ie,Ce.write_shift(-4,M))};for(He=Ie=0,He+=ye[1];Ie<He;++Ie)Ce.write_shift(-4,we.DIFSECT);for(He+=ye[2];Ie<He;++Ie)Ce.write_shift(-4,we.FATSECT);tt(ye[3]),tt(ye[4]);for(var Ge=0,Ke=0,Qe=re.FileIndex[0];Ge<re.FileIndex.length;++Ge)Qe=re.FileIndex[Ge],Qe.content&&(Ke=Qe.content.length,!(Ke<4096)&&(Qe.start=He,tt(Ke+511>>9)));for(tt(ye[6]+7>>3);Ce.l&511;)Ce.write_shift(-4,we.ENDOFCHAIN);for(He=Ie=0,Ge=0;Ge<re.FileIndex.length;++Ge)Qe=re.FileIndex[Ge],Qe.content&&(Ke=Qe.content.length,!(!Ke||Ke>=4096)&&(Qe.start=He,tt(Ke+63>>6)));for(;Ce.l&511;)Ce.write_shift(-4,we.ENDOFCHAIN);for(Ie=0;Ie<ye[4]<<2;++Ie){var _t=re.FullPaths[Ie];if(!_t||_t.length===0){for(Ge=0;Ge<17;++Ge)Ce.write_shift(4,0);for(Ge=0;Ge<3;++Ge)Ce.write_shift(4,-1);for(Ge=0;Ge<12;++Ge)Ce.write_shift(4,0);continue}Qe=re.FileIndex[Ie],Ie===0&&(Qe.start=Qe.size?Qe.start-1:M);var Ft=Ie===0&&ve.root||Qe.name;if(Ke=2*(Ft.length+1),Ce.write_shift(64,Ft,"utf16le"),Ce.write_shift(2,Ke),Ce.write_shift(1,Qe.type),Ce.write_shift(1,Qe.color),Ce.write_shift(-4,Qe.L),Ce.write_shift(-4,Qe.R),Ce.write_shift(-4,Qe.C),Qe.clsid)Ce.write_shift(16,Qe.clsid,"hex");else for(Ge=0;Ge<4;++Ge)Ce.write_shift(4,0);Ce.write_shift(4,Qe.state||0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,Qe.start),Ce.write_shift(4,Qe.size),Ce.write_shift(4,0)}for(Ie=1;Ie<re.FileIndex.length;++Ie)if(Qe=re.FileIndex[Ie],Qe.size>=4096)if(Ce.l=Qe.start+1<<9,Kr&&Buffer.isBuffer(Qe.content))Qe.content.copy(Ce,Ce.l,0,Qe.size),Ce.l+=Qe.size+511&-512;else{for(Ge=0;Ge<Qe.size;++Ge)Ce.write_shift(1,Qe.content[Ge]);for(;Ge&511;++Ge)Ce.write_shift(1,0)}for(Ie=1;Ie<re.FileIndex.length;++Ie)if(Qe=re.FileIndex[Ie],Qe.size>0&&Qe.size<4096)if(Kr&&Buffer.isBuffer(Qe.content))Qe.content.copy(Ce,Ce.l,0,Qe.size),Ce.l+=Qe.size+63&-64;else{for(Ge=0;Ge<Qe.size;++Ge)Ce.write_shift(1,Qe.content[Ge]);for(;Ge&63;++Ge)Ce.write_shift(1,0)}if(Kr)Ce.l=Ce.length;else for(;Ce.l<Ce.length;)Ce.write_shift(1,0);return Ce}function I(re,Ae){var ve=re.FullPaths.map(function(Ge){return Ge.toUpperCase()}),ye=ve.map(function(Ge){var Ke=Ge.split("/");return Ke[Ke.length-(Ge.slice(-1)=="/"?2:1)]}),Ce=!1;Ae.charCodeAt(0)===47?(Ce=!0,Ae=ve[0].slice(0,-1)+Ae):Ce=Ae.indexOf("/")!==-1;var Ie=Ae.toUpperCase(),He=Ce===!0?ve.indexOf(Ie):ye.indexOf(Ie);if(He!==-1)return re.FileIndex[He];var tt=!Ie.match(rm);for(Ie=Ie.replace(yo,""),tt&&(Ie=Ie.replace(rm,"!")),He=0;He<ve.length;++He)if((tt?ve[He].replace(rm,"!"):ve[He]).replace(yo,"")==Ie||(tt?ye[He].replace(rm,"!"):ye[He]).replace(yo,"")==Ie)return re.FileIndex[He];return null}var D=64,M=-2,ie="d0cf11e0a1b11ae1",be=[208,207,17,224,161,177,26,225],Ne="00000000000000000000000000000000",we={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:M,FREESECT:-1,HEADER_SIGNATURE:ie,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Ne,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function le(re,Ae,ve){c();var ye=O(re,ve);l.writeFileSync(Ae,ye)}function J(re){for(var Ae=new Array(re.length),ve=0;ve<re.length;++ve)Ae[ve]=String.fromCharCode(re[ve]);return Ae.join("")}function ue(re,Ae){var ve=O(re,Ae);switch(Ae&&Ae.type||"buffer"){case"file":return c(),l.writeFileSync(Ae.filename,ve),ve;case"binary":return typeof ve=="string"?ve:J(ve);case"base64":return $m(typeof ve=="string"?ve:J(ve));case"buffer":if(Kr)return Buffer.isBuffer(ve)?ve:Ju(ve);case"array":return typeof ve=="string"?nl(ve):ve}return ve}var ee;function C(re){try{var Ae=re.InflateRaw,ve=new Ae;if(ve._processChunk(new Uint8Array([3,0]),ve._finishFlushFlag),ve.bytesRead)ee=re;else throw new Error("zlib does not expose bytesRead")}catch(ye){console.error("cannot use native zlib: "+(ye.message||ye))}}function U(re,Ae){if(!ee)return jt(re,Ae);var ve=ee.InflateRaw,ye=new ve,Ce=ye._processChunk(re.slice(re.l),ye._finishFlushFlag);return re.l+=ye.bytesRead,Ce}function W(re){return ee?ee.deflateRawSync(re):wt(re)}var Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],pe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function he(re){var Ae=(re<<1|re<<11)&139536|(re<<5|re<<15)&558144;return(Ae>>16|Ae>>8|Ae)&255}for(var xe=typeof Uint8Array<"u",Ee=xe?new Uint8Array(256):[],Fe=0;Fe<256;++Fe)Ee[Fe]=he(Fe);function oe(re,Ae){var ve=Ee[re&255];return Ae<=8?ve>>>8-Ae:(ve=ve<<8|Ee[re>>8&255],Ae<=16?ve>>>16-Ae:(ve=ve<<8|Ee[re>>16&255],ve>>>24-Ae))}function Je(re,Ae){var ve=Ae&7,ye=Ae>>>3;return(re[ye]|(ve<=6?0:re[ye+1]<<8))>>>ve&3}function Re(re,Ae){var ve=Ae&7,ye=Ae>>>3;return(re[ye]|(ve<=5?0:re[ye+1]<<8))>>>ve&7}function fe(re,Ae){var ve=Ae&7,ye=Ae>>>3;return(re[ye]|(ve<=4?0:re[ye+1]<<8))>>>ve&15}function ot(re,Ae){var ve=Ae&7,ye=Ae>>>3;return(re[ye]|(ve<=3?0:re[ye+1]<<8))>>>ve&31}function et(re,Ae){var ve=Ae&7,ye=Ae>>>3;return(re[ye]|(ve<=1?0:re[ye+1]<<8))>>>ve&127}function st(re,Ae,ve){var ye=Ae&7,Ce=Ae>>>3,Ie=(1<<ve)-1,He=re[Ce]>>>ye;return ve<8-ye||(He|=re[Ce+1]<<8-ye,ve<16-ye)||(He|=re[Ce+2]<<16-ye,ve<24-ye)||(He|=re[Ce+3]<<24-ye),He&Ie}function K(re,Ae,ve){var ye=Ae&7,Ce=Ae>>>3;return ye<=5?re[Ce]|=(ve&7)<<ye:(re[Ce]|=ve<<ye&255,re[Ce+1]=(ve&7)>>8-ye),Ae+3}function Te(re,Ae,ve){var ye=Ae&7,Ce=Ae>>>3;return ve=(ve&1)<<ye,re[Ce]|=ve,Ae+1}function Ue(re,Ae,ve){var ye=Ae&7,Ce=Ae>>>3;return ve<<=ye,re[Ce]|=ve&255,ve>>>=8,re[Ce+1]=ve,Ae+8}function ut(re,Ae,ve){var ye=Ae&7,Ce=Ae>>>3;return ve<<=ye,re[Ce]|=ve&255,ve>>>=8,re[Ce+1]=ve&255,re[Ce+2]=ve>>>8,Ae+16}function pt(re,Ae){var ve=re.length,ye=2*ve>Ae?2*ve:Ae+5,Ce=0;if(ve>=Ae)return re;if(Kr){var Ie=Ik(ye);if(re.copy)re.copy(Ie);else for(;Ce<re.length;++Ce)Ie[Ce]=re[Ce];return Ie}else if(xe){var He=new Uint8Array(ye);if(He.set)He.set(re);else for(;Ce<ve;++Ce)He[Ce]=re[Ce];return He}return re.length=ye,re}function xt(re){for(var Ae=new Array(re),ve=0;ve<re;++ve)Ae[ve]=0;return Ae}function yt(re,Ae,ve){var ye=1,Ce=0,Ie=0,He=0,tt=0,Ge=re.length,Ke=xe?new Uint16Array(32):xt(32);for(Ie=0;Ie<32;++Ie)Ke[Ie]=0;for(Ie=Ge;Ie<ve;++Ie)re[Ie]=0;Ge=re.length;var Qe=xe?new Uint16Array(Ge):xt(Ge);for(Ie=0;Ie<Ge;++Ie)Ke[Ce=re[Ie]]++,ye<Ce&&(ye=Ce),Qe[Ie]=0;for(Ke[0]=0,Ie=1;Ie<=ye;++Ie)Ke[Ie+16]=tt=tt+Ke[Ie-1]<<1;for(Ie=0;Ie<Ge;++Ie)tt=re[Ie],tt!=0&&(Qe[Ie]=Ke[tt+16]++);var _t=0;for(Ie=0;Ie<Ge;++Ie)if(_t=re[Ie],_t!=0)for(tt=oe(Qe[Ie],ye)>>ye-_t,He=(1<<ye+4-_t)-1;He>=0;--He)Ae[tt|He<<_t]=_t&15|Ie<<4;return ye}var ht=xe?new Uint16Array(512):xt(512),Mt=xe?new Uint16Array(32):xt(32);if(!xe){for(var Lt=0;Lt<512;++Lt)ht[Lt]=0;for(Lt=0;Lt<32;++Lt)Mt[Lt]=0}(function(){for(var re=[],Ae=0;Ae<32;Ae++)re.push(5);yt(re,Mt,32);var ve=[];for(Ae=0;Ae<=143;Ae++)ve.push(8);for(;Ae<=255;Ae++)ve.push(9);for(;Ae<=279;Ae++)ve.push(7);for(;Ae<=287;Ae++)ve.push(8);yt(ve,ht,288)})();var Ot=(function(){for(var Ae=xe?new Uint8Array(32768):[],ve=0,ye=0;ve<pe.length-1;++ve)for(;ye<pe[ve+1];++ye)Ae[ye]=ve;for(;ye<32768;++ye)Ae[ye]=29;var Ce=xe?new Uint8Array(259):[];for(ve=0,ye=0;ve<ae.length-1;++ve)for(;ye<ae[ve+1];++ye)Ce[ye]=ve;function Ie(tt,Ge){for(var Ke=0;Ke<tt.length;){var Qe=Math.min(65535,tt.length-Ke),_t=Ke+Qe==tt.length;for(Ge.write_shift(1,+_t),Ge.write_shift(2,Qe),Ge.write_shift(2,~Qe&65535);Qe-- >0;)Ge[Ge.l++]=tt[Ke++]}return Ge.l}function He(tt,Ge){for(var Ke=0,Qe=0,_t=xe?new Uint16Array(32768):[];Qe<tt.length;){var Ft=Math.min(65535,tt.length-Qe);if(Ft<10){for(Ke=K(Ge,Ke,+(Qe+Ft==tt.length)),Ke&7&&(Ke+=8-(Ke&7)),Ge.l=Ke/8|0,Ge.write_shift(2,Ft),Ge.write_shift(2,~Ft&65535);Ft-- >0;)Ge[Ge.l++]=tt[Qe++];Ke=Ge.l*8;continue}Ke=K(Ge,Ke,+(Qe+Ft==tt.length)+2);for(var Ht=0;Ft-- >0;){var Rt=tt[Qe];Ht=(Ht<<5^Rt)&32767;var Tt=-1,br=0;if((Tt=_t[Ht])&&(Tt|=Qe&-32768,Tt>Qe&&(Tt-=32768),Tt<Qe))for(;tt[Tt+br]==tt[Qe+br]&&br<250;)++br;if(br>2){Rt=Ce[br],Rt<=22?Ke=Ue(Ge,Ke,Ee[Rt+1]>>1)-1:(Ue(Ge,Ke,3),Ke+=5,Ue(Ge,Ke,Ee[Rt-23]>>5),Ke+=3);var on=Rt<8?0:Rt-4>>2;on>0&&(ut(Ge,Ke,br-ae[Rt]),Ke+=on),Rt=Ae[Qe-Tt],Ke=Ue(Ge,Ke,Ee[Rt]>>3),Ke-=3;var Dr=Rt<4?0:Rt-2>>1;Dr>0&&(ut(Ge,Ke,Qe-Tt-pe[Rt]),Ke+=Dr);for(var fn=0;fn<br;++fn)_t[Ht]=Qe&32767,Ht=(Ht<<5^tt[Qe])&32767,++Qe;Ft-=br-1}else Rt<=143?Rt=Rt+48:Ke=Te(Ge,Ke,1),Ke=Ue(Ge,Ke,Ee[Rt]),_t[Ht]=Qe&32767,++Qe}Ke=Ue(Ge,Ke,0)-1}return Ge.l=(Ke+7)/8|0,Ge.l}return function(Ge,Ke){return Ge.length<8?Ie(Ge,Ke):He(Ge,Ke)}})();function wt(re){var Ae=ft(50+Math.floor(re.length*1.1)),ve=Ot(re,Ae);return Ae.slice(0,ve)}var Nt=xe?new Uint16Array(32768):xt(32768),cr=xe?new Uint16Array(32768):xt(32768),er=xe?new Uint16Array(128):xt(128),qt=1,wr=1;function rn(re,Ae){var ve=ot(re,Ae)+257;Ae+=5;var ye=ot(re,Ae)+1;Ae+=5;var Ce=fe(re,Ae)+4;Ae+=4;for(var Ie=0,He=xe?new Uint8Array(19):xt(19),tt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ge=1,Ke=xe?new Uint8Array(8):xt(8),Qe=xe?new Uint8Array(8):xt(8),_t=He.length,Ft=0;Ft<Ce;++Ft)He[Y[Ft]]=Ie=Re(re,Ae),Ge<Ie&&(Ge=Ie),Ke[Ie]++,Ae+=3;var Ht=0;for(Ke[0]=0,Ft=1;Ft<=Ge;++Ft)Qe[Ft]=Ht=Ht+Ke[Ft-1]<<1;for(Ft=0;Ft<_t;++Ft)(Ht=He[Ft])!=0&&(tt[Ft]=Qe[Ht]++);var Rt=0;for(Ft=0;Ft<_t;++Ft)if(Rt=He[Ft],Rt!=0){Ht=Ee[tt[Ft]]>>8-Rt;for(var Tt=(1<<7-Rt)-1;Tt>=0;--Tt)er[Ht|Tt<<Rt]=Rt&7|Ft<<3}var br=[];for(Ge=1;br.length<ve+ye;)switch(Ht=er[et(re,Ae)],Ae+=Ht&7,Ht>>>=3){case 16:for(Ie=3+Je(re,Ae),Ae+=2,Ht=br[br.length-1];Ie-- >0;)br.push(Ht);break;case 17:for(Ie=3+Re(re,Ae),Ae+=3;Ie-- >0;)br.push(0);break;case 18:for(Ie=11+et(re,Ae),Ae+=7;Ie-- >0;)br.push(0);break;default:br.push(Ht),Ge<Ht&&(Ge=Ht);break}var on=br.slice(0,ve),Dr=br.slice(ve);for(Ft=ve;Ft<286;++Ft)on[Ft]=0;for(Ft=ye;Ft<30;++Ft)Dr[Ft]=0;return qt=yt(on,Nt,286),wr=yt(Dr,cr,30),Ae}function Me(re,Ae){if(re[0]==3&&!(re[1]&3))return[dh(Ae),2];for(var ve=0,ye=0,Ce=Ik(Ae||1<<18),Ie=0,He=Ce.length>>>0,tt=0,Ge=0;(ye&1)==0;){if(ye=Re(re,ve),ve+=3,ye>>>1)ye>>1==1?(tt=9,Ge=5):(ve=rn(re,ve),tt=qt,Ge=wr);else{ve&7&&(ve+=8-(ve&7));var Ke=re[ve>>>3]|re[(ve>>>3)+1]<<8;if(ve+=32,Ke>0)for(!Ae&&He<Ie+Ke&&(Ce=pt(Ce,Ie+Ke),He=Ce.length);Ke-- >0;)Ce[Ie++]=re[ve>>>3],ve+=8;continue}for(;;){!Ae&&He<Ie+32767&&(Ce=pt(Ce,Ie+32767),He=Ce.length);var Qe=st(re,ve,tt),_t=ye>>>1==1?ht[Qe]:Nt[Qe];if(ve+=_t&15,_t>>>=4,(_t>>>8&255)===0)Ce[Ie++]=_t;else{if(_t==256)break;_t-=257;var Ft=_t<8?0:_t-4>>2;Ft>5&&(Ft=0);var Ht=Ie+ae[_t];Ft>0&&(Ht+=st(re,ve,Ft),ve+=Ft),Qe=st(re,ve,Ge),_t=ye>>>1==1?Mt[Qe]:cr[Qe],ve+=_t&15,_t>>>=4;var Rt=_t<4?0:_t-2>>1,Tt=pe[_t];for(Rt>0&&(Tt+=st(re,ve,Rt),ve+=Rt),!Ae&&He<Ht&&(Ce=pt(Ce,Ht+100),He=Ce.length);Ie<Ht;)Ce[Ie]=Ce[Ie-Tt],++Ie}}}return Ae?[Ce,ve+7>>>3]:[Ce.slice(0,Ie),ve+7>>>3]}function jt(re,Ae){var ve=re.slice(re.l||0),ye=Me(ve,Ae);return re.l+=ye[1],ye[0]}function Vt(re,Ae){if(re)typeof console<"u"&&console.error(Ae);else throw new Error(Ae)}function tr(re,Ae){var ve=re;Ea(ve,0);var ye=[],Ce=[],Ie={FileIndex:ye,FullPaths:Ce};P(Ie,{root:Ae.root});for(var He=ve.length-4;(ve[He]!=80||ve[He+1]!=75||ve[He+2]!=5||ve[He+3]!=6)&&He>=0;)--He;ve.l=He+4,ve.l+=4;var tt=ve.read_shift(2);ve.l+=6;var Ge=ve.read_shift(4);for(ve.l=Ge,He=0;He<tt;++He){ve.l+=20;var Ke=ve.read_shift(4),Qe=ve.read_shift(4),_t=ve.read_shift(2),Ft=ve.read_shift(2),Ht=ve.read_shift(2);ve.l+=8;var Rt=ve.read_shift(4),Tt=o(ve.slice(ve.l+_t,ve.l+_t+Ft));ve.l+=_t+Ft+Ht;var br=ve.l;ve.l=Rt+4,sr(ve,Ke,Qe,Ie,Tt),ve.l=br}return Ie}function sr(re,Ae,ve,ye,Ce){re.l+=2;var Ie=re.read_shift(2),He=re.read_shift(2),tt=a(re);if(Ie&8257)throw new Error("Unsupported ZIP encryption");for(var Ge=re.read_shift(4),Ke=re.read_shift(4),Qe=re.read_shift(4),_t=re.read_shift(2),Ft=re.read_shift(2),Ht="",Rt=0;Rt<_t;++Rt)Ht+=String.fromCharCode(re[re.l++]);if(Ft){var Tt=o(re.slice(re.l,re.l+Ft));(Tt[21589]||{}).mt&&(tt=Tt[21589].mt),((Ce||{})[21589]||{}).mt&&(tt=Ce[21589].mt)}re.l+=Ft;var br=re.slice(re.l,re.l+Ke);switch(He){case 8:br=U(re,Qe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+He)}var on=!1;Ie&8&&(Ge=re.read_shift(4),Ge==134695760&&(Ge=re.read_shift(4),on=!0),Ke=re.read_shift(4),Qe=re.read_shift(4)),Ke!=Ae&&Vt(on,"Bad compressed size: "+Ae+" != "+Ke),Qe!=ve&&Vt(on,"Bad uncompressed size: "+ve+" != "+Qe),Dn(ye,Ht,br,{unsafe:!0,mt:tt})}function ur(re,Ae){var ve=Ae||{},ye=[],Ce=[],Ie=ft(1),He=ve.compression?8:0,tt=0,Ge=0,Ke=0,Qe=0,_t=0,Ft=re.FullPaths[0],Ht=Ft,Rt=re.FileIndex[0],Tt=[],br=0;for(Ge=1;Ge<re.FullPaths.length;++Ge)if(Ht=re.FullPaths[Ge].slice(Ft.length),Rt=re.FileIndex[Ge],!(!Rt.size||!Rt.content||Ht=="Sh33tJ5")){var on=Qe,Dr=ft(Ht.length);for(Ke=0;Ke<Ht.length;++Ke)Dr.write_shift(1,Ht.charCodeAt(Ke)&127);Dr=Dr.slice(0,Dr.l),Tt[_t]=ZY.buf(Rt.content,0);var fn=Rt.content;He==8&&(fn=W(fn)),Ie=ft(30),Ie.write_shift(4,67324752),Ie.write_shift(2,20),Ie.write_shift(2,tt),Ie.write_shift(2,He),Rt.mt?s(Ie,Rt.mt):Ie.write_shift(4,0),Ie.write_shift(-4,Tt[_t]),Ie.write_shift(4,fn.length),Ie.write_shift(4,Rt.content.length),Ie.write_shift(2,Dr.length),Ie.write_shift(2,0),Qe+=Ie.length,ye.push(Ie),Qe+=Dr.length,ye.push(Dr),Qe+=fn.length,ye.push(fn),Ie=ft(46),Ie.write_shift(4,33639248),Ie.write_shift(2,0),Ie.write_shift(2,20),Ie.write_shift(2,tt),Ie.write_shift(2,He),Ie.write_shift(4,0),Ie.write_shift(-4,Tt[_t]),Ie.write_shift(4,fn.length),Ie.write_shift(4,Rt.content.length),Ie.write_shift(2,Dr.length),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(4,0),Ie.write_shift(4,on),br+=Ie.l,Ce.push(Ie),br+=Dr.length,Ce.push(Dr),++_t}return Ie=ft(22),Ie.write_shift(4,101010256),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,_t),Ie.write_shift(2,_t),Ie.write_shift(4,br),Ie.write_shift(4,Qe),Ie.write_shift(2,0),ia([ia(ye),ia(Ce),Ie])}var Yt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function mr(re,Ae){if(re.ctype)return re.ctype;var ve=re.name||"",ye=ve.match(/\.([^\.]+)$/);return ye&&Yt[ye[1]]||Ae&&(ye=(ve=Ae).match(/[\.\\]([^\.\\])+$/),ye&&Yt[ye[1]])?Yt[ye[1]]:"application/octet-stream"}function an(re){for(var Ae=$m(re),ve=[],ye=0;ye<Ae.length;ye+=76)ve.push(Ae.slice(ye,ye+76));return ve.join(`\r
`)+`\r
`}function Ur(re){var Ae=re.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ke){var Qe=Ke.charCodeAt(0).toString(16).toUpperCase();return"="+(Qe.length==1?"0"+Qe:Qe)});Ae=Ae.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ae.charAt(0)==`
`&&(Ae="=0D"+Ae.slice(1)),Ae=Ae.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ve=[],ye=Ae.split(`\r
`),Ce=0;Ce<ye.length;++Ce){var Ie=ye[Ce];if(Ie.length==0){ve.push("");continue}for(var He=0;He<Ie.length;){var tt=76,Ge=Ie.slice(He,He+tt);Ge.charAt(tt-1)=="="?tt--:Ge.charAt(tt-2)=="="?tt-=2:Ge.charAt(tt-3)=="="&&(tt-=3),Ge=Ie.slice(He,He+tt),He+=tt,He<Ie.length&&(Ge+="="),ve.push(Ge)}}return ve.join(`\r
`)}function Cn(re){for(var Ae=[],ve=0;ve<re.length;++ve){for(var ye=re[ve];ve<=re.length&&ye.charAt(ye.length-1)=="=";)ye=ye.slice(0,ye.length-1)+re[++ve];Ae.push(ye)}for(var Ce=0;Ce<Ae.length;++Ce)Ae[Ce]=Ae[Ce].replace(/[=][0-9A-Fa-f]{2}/g,function(Ie){return String.fromCharCode(parseInt(Ie.slice(1),16))});return nl(Ae.join(`\r
`))}function In(re,Ae,ve){for(var ye="",Ce="",Ie="",He,tt=0;tt<10;++tt){var Ge=Ae[tt];if(!Ge||Ge.match(/^\s*$/))break;var Ke=Ge.match(/^(.*?):\s*([^\s].*)$/);if(Ke)switch(Ke[1].toLowerCase()){case"content-location":ye=Ke[2].trim();break;case"content-type":Ie=Ke[2].trim();break;case"content-transfer-encoding":Ce=Ke[2].trim();break}}switch(++tt,Ce.toLowerCase()){case"base64":He=nl(ul(Ae.slice(tt).join("")));break;case"quoted-printable":He=Cn(Ae.slice(tt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ce)}var Qe=Dn(re,ye.slice(ve.length),He,{unsafe:!0});Ie&&(Qe.ctype=Ie)}function nr(re,Ae){if(J(re.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ve=Ae&&Ae.root||"",ye=(Kr&&Buffer.isBuffer(re)?re.toString("binary"):J(re)).split(`\r
`),Ce=0,Ie="";for(Ce=0;Ce<ye.length;++Ce)if(Ie=ye[Ce],!!/^Content-Location:/i.test(Ie)&&(Ie=Ie.slice(Ie.indexOf("file")),ve||(ve=Ie.slice(0,Ie.lastIndexOf("/")+1)),Ie.slice(0,ve.length)!=ve))for(;ve.length>0&&(ve=ve.slice(0,ve.length-1),ve=ve.slice(0,ve.lastIndexOf("/")+1),Ie.slice(0,ve.length)!=ve););var He=(ye[1]||"").match(/boundary="(.*?)"/);if(!He)throw new Error("MAD cannot find boundary");var tt="--"+(He[1]||""),Ge=[],Ke=[],Qe={FileIndex:Ge,FullPaths:Ke};P(Qe);var _t,Ft=0;for(Ce=0;Ce<ye.length;++Ce){var Ht=ye[Ce];Ht!==tt&&Ht!==tt+"--"||(Ft++&&In(Qe,ye.slice(_t,Ce),ve),_t=Ce)}return Qe}function Hr(re,Ae){var ve=Ae||{},ye=ve.boundary||"SheetJS";ye="------="+ye;for(var Ce=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ye.slice(2)+'"',"","",""],Ie=re.FullPaths[0],He=Ie,tt=re.FileIndex[0],Ge=1;Ge<re.FullPaths.length;++Ge)if(He=re.FullPaths[Ge].slice(Ie.length),tt=re.FileIndex[Ge],!(!tt.size||!tt.content||He=="Sh33tJ5")){He=He.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(br){return"_x"+br.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(br){return"_u"+br.charCodeAt(0).toString(16)+"_"});for(var Ke=tt.content,Qe=Kr&&Buffer.isBuffer(Ke)?Ke.toString("binary"):J(Ke),_t=0,Ft=Math.min(1024,Qe.length),Ht=0,Rt=0;Rt<=Ft;++Rt)(Ht=Qe.charCodeAt(Rt))>=32&&Ht<128&&++_t;var Tt=_t>=Ft*4/5;Ce.push(ye),Ce.push("Content-Location: "+(ve.root||"file:///C:/SheetJS/")+He),Ce.push("Content-Transfer-Encoding: "+(Tt?"quoted-printable":"base64")),Ce.push("Content-Type: "+mr(tt,He)),Ce.push(""),Ce.push(Tt?Ur(Qe):an(Qe))}return Ce.push(ye+`--\r
`),Ce.join(`\r
`)}function ns(re){var Ae={};return P(Ae,re),Ae}function Dn(re,Ae,ve,ye){var Ce=ye&&ye.unsafe;Ce||P(re);var Ie=!Ce&&yr.find(re,Ae);if(!Ie){var He=re.FullPaths[0];Ae.slice(0,He.length)==He?He=Ae:(He.slice(-1)!="/"&&(He+="/"),He=(He+Ae).replace("//","/")),Ie={name:i(Ae),type:2},re.FileIndex.push(Ie),re.FullPaths.push(He),Ce||yr.utils.cfb_gc(re)}return Ie.content=ve,Ie.size=ve?ve.length:0,ye&&(ye.CLSID&&(Ie.clsid=ye.CLSID),ye.mt&&(Ie.mt=ye.mt),ye.ct&&(Ie.ct=ye.ct)),Ie}function $i(re,Ae){P(re);var ve=yr.find(re,Ae);if(ve){for(var ye=0;ye<re.FileIndex.length;++ye)if(re.FileIndex[ye]==ve)return re.FileIndex.splice(ye,1),re.FullPaths.splice(ye,1),!0}return!1}function bn(re,Ae,ve){P(re);var ye=yr.find(re,Ae);if(ye){for(var Ce=0;Ce<re.FileIndex.length;++Ce)if(re.FileIndex[Ce]==ye)return re.FileIndex[Ce].name=i(ve),re.FullPaths[Ce]=ve,!0}return!1}function Jn(re){T(re,!0)}return e.find=I,e.read=G,e.parse=f,e.write=ue,e.writeFile=le,e.utils={cfb_new:ns,cfb_add:Dn,cfb_del:$i,cfb_mov:bn,cfb_gc:Jn,ReadShift:pm,CheckField:gR,prep_blob:Ea,bconcat:ia,use_zlib:C,_deflateRaw:wt,_inflateRaw:jt,consts:we},e})();function eQ(t){return typeof t=="string"?fy(t):Array.isArray(t)?TY(t):t}function Ng(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=fy(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?zc(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var i=new Blob([eQ(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=t,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Ch(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function tQ(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function es(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function Mk(t,e){for(var r=[],n=es(t),i=0;i!==n.length;++i)r[t[n[i]][e]]==null&&(r[t[n[i]][e]]=n[i]);return r}function dy(t){for(var e=[],r=es(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function py(t){for(var e=[],r=es(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function rQ(t){for(var e=[],r=es(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var cv=new Date(1899,11,30,0,0,0);function $s(t,e){var r=t.getTime(),n=cv.getTime()+(t.getTimezoneOffset()-cv.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var XP=new Date,nQ=cv.getTime()+(XP.getTimezoneOffset()-cv.getTimezoneOffset())*6e4,jk=XP.getTimezoneOffset();function my(t){var e=new Date;return e.setTime(t*24*60*60*1e3+nQ),e.getTimezoneOffset()!==jk&&e.setTime(e.getTime()+(e.getTimezoneOffset()-jk)*6e4),e}function iQ(t){var e=0,r=0,n=!1,i=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=i.length;++s)if(i[s]){switch(r=1,s>3&&(n=!0),i[s].slice(i[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[s].slice(i[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(i[s],10)}return e}var Bk=new Date("2017-02-19T19:06:09.000Z"),YP=isNaN(Bk.getFullYear())?new Date("2/19/17"):Bk,sQ=YP.getFullYear()==2017;function gi(t,e){var r=new Date(t);if(sQ)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(YP.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Md(t,e){if(Kr&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return zc(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return zc(MP(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return zc(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return zc(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],i=0;i!=t.length;++i)n.push(String.fromCharCode(t[i]));return n.join("")}function xi(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=xi(t[r]));return e}function Yi(t,e){for(var r="";r.length<e;)r+=t;return r}function lc(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var aQ=["january","february","march","april","may","june","july","august","september","october","november","december"];function Rp(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&aQ.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return n<0||n>8099?r:(i>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var oQ=(function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,i){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),a=[s[0]],o=1;o<s.length;++o)a.push(i),a.push(s[o]);return a}})();function QP(t){return t?t.content&&t.type?Md(t.content,!0):t.data?tm(t.data):t.asNodeBuffer&&Kr?tm(t.asNodeBuffer().toString("binary")):t.asBinary?tm(t.asBinary()):t._data&&t._data.getContent?tm(Md(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function JP(t){if(!t)return null;if(t.data)return Ak(t.data);if(t.asNodeBuffer&&Kr)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?Ak(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function lQ(t){return t&&t.name.slice(-4)===".bin"?JP(t):QP(t)}function Rl(t,e){for(var r=t.FullPaths||es(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),i=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var a=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==a||i==a)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function Ub(t,e){var r=Rl(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function As(t,e,r){if(!r)return lQ(Ub(t,e));if(!e)return null;try{return As(t,e)}catch{return null}}function il(t,e,r){if(!r)return QP(Ub(t,e));if(!e)return null;try{return il(t,e)}catch{return null}}function cQ(t,e,r){return JP(Ub(t,e))}function Vk(t){for(var e=t.FullPaths||es(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function zr(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Kr?n=Ju(r):n=AY(r),yr.utils.cfb_add(t,e,n)}yr.utils.cfb_add(t,e,r)}else t.file(e,r)}function zb(){return yr.utils.cfb_new()}function ZP(t,e){switch(e.type){case"base64":return yr.read(t,{type:"base64"});case"binary":return yr.read(t,{type:"binary"});case"buffer":case"array":return yr.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function nm(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var i=n.shift();i===".."?r.pop():i!=="."&&r.push(i)}return r.join("/")}var vs=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,uQ=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,Uk=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,fQ=/<[^>]*>/g,lo=vs.match(Uk)?Uk:fQ,hQ=/<\w*:/,dQ=/<(\/?)\w+:/;function Nr(t,e,r){for(var n={},i=0,s=0;i!==t.length&&!((s=t.charCodeAt(i))===32||s===10||s===13);++i);if(e||(n[0]=t.slice(0,i)),i===t.length)return n;var a=t.match(uQ),o=0,l="",c=0,f="",d="",m=1;if(a)for(c=0;c!=a.length;++c){for(d=a[c],s=0;s!=d.length&&d.charCodeAt(s)!==61;++s);for(f=d.slice(0,s).trim();d.charCodeAt(s+1)==32;)++s;for(m=(i=d.charCodeAt(s+1))==34||i==39?1:0,l=d.slice(s+1+m,d.length-m),o=0;o!=f.length&&f.charCodeAt(o)!==58;++o);if(o===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),n[f]=l,n[f.toLowerCase()]=l;else{var p=(o===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(o+1);if(n[p]&&f.slice(o-3,o)=="ext")continue;n[p]=l,n[p.toLowerCase()]=l}}return n}function su(t){return t.replace(dQ,"<$1")}var eR={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},$b=dy(eR),wn=(function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var i=n+"",s=i.indexOf("<![CDATA[");if(s==-1)return i.replace(t,function(o,l){return eR[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var a=i.indexOf("]]>");return r(i.slice(0,s))+i.slice(s+9,a)+r(i.slice(a+3))}})(),Hb=/[&<>'"]/g,pQ=/[\u0000-\u0008\u000b-\u001f]/g;function Hn(t){var e=t+"";return e.replace(Hb,function(r){return $b[r]}).replace(pQ,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function zk(t){return Hn(t).replace(/ /g,"_x0020_")}var tR=/[\u0000-\u001f]/g;function Wb(t){var e=t+"";return e.replace(Hb,function(r){return $b[r]}).replace(/\n/g,"<br/>").replace(tR,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function mQ(t){var e=t+"";return e.replace(Hb,function(r){return $b[r]}).replace(tR,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var $k=(function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}})();function gQ(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function hi(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Hw(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(i=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(i&63)<<6|s&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function Hk(t){var e=dh(2*t.length),r,n,i=1,s=0,a=0,o;for(n=0;n<t.length;n+=i)i=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),i=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),i=3):(i=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function Wk(t){return Ju(t,"binary").toString("utf8")}var Bx="foo bar baz",Xn=Kr&&(Wk(Bx)==Hw(Bx)&&Wk||Hk(Bx)==Hw(Bx)&&Hk)||Hw,zc=Kr?function(t){return Ju(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,i=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},Wm=(function(){var t={};return function(r,n){var i=r+"|"+(n||"");return t[i]?t[i]:t[i]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),rR=(function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)n=n.replace(t[i][0],t[i][1]);return n}})(),xQ=(function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),vQ=/<\/?(?:vt:)?variant>/g,yQ=/<(?:vt:)([^>]*)>([\s\S]*)</;function qk(t,e){var r=Nr(t),n=t.match(xQ(r.baseType))||[],i=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return i}return n.forEach(function(s){var a=s.replace(vQ,"").match(yQ);a&&i.push({v:Xn(a[2]),t:a[1]})}),i}var nR=/(^\s|\s$|\n)/;function ka(t,e){return"<"+t+(e.match(nR)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function qm(t){return es(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Bt(t,e,r){return"<"+t+(r!=null?qm(r):"")+(e!=null?(e.match(nR)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function b5(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function wQ(t,e){switch(typeof t){case"string":var r=Bt("vt:lpwstr",Hn(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Bt((t|0)==t?"vt:i4":"vt:r8",Hn(String(t)));case"boolean":return Bt("vt:bool",t?"true":"false")}if(t instanceof Date)return Bt("vt:filetime",b5(t));throw new Error("Unable to serialize "+t)}function qb(t){if(Kr&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Xn(Ch(jb(t)));throw new Error("Bad input format: expected Buffer or string")}var Gm=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Us={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Xd=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],tl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function _Q(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,s=5;s>=0;--s)i=i*256+t[e+s];return n==2047?i==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}function bQ(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=n?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)t[r+o]=s&255;t[r+6]=(i&15)<<4|s&15,t[r+7]=i>>4|n}var Gk=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var i=0,s=t[0][n].length;i<s;i+=r)e.push.apply(e,t[0][n].slice(i,i+r));return e},Kk=Kr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Ju(e)})):Gk(t)}:Gk,Xk=function(t,e,r){for(var n=[],i=e;i<r;i+=2)n.push(String.fromCharCode(Fu(t,i)));return n.join("").replace(yo,"")},Gb=Kr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(yo,""):Xk(t,e,r)}:Xk,Yk=function(t,e,r){for(var n=[],i=e;i<e+r;++i)n.push(("0"+t[i].toString(16)).slice(-2));return n.join("")},iR=Kr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):Yk(t,e,r)}:Yk,Qk=function(t,e,r){for(var n=[],i=e;i<r;i++)n.push(String.fromCharCode(z0(t,i)));return n.join("")},Pg=Kr?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):Qk(e,r,n)}:Qk,sR=function(t,e){var r=rl(t,e);return r>0?Pg(t,e+4,e+4+r-1):""},aR=sR,oR=function(t,e){var r=rl(t,e);return r>0?Pg(t,e+4,e+4+r-1):""},lR=oR,cR=function(t,e){var r=2*rl(t,e);return r>0?Pg(t,e+4,e+4+r-1):""},uR=cR,fR=function(e,r){var n=rl(e,r);return n>0?Gb(e,r+4,r+4+n):""},hR=fR,dR=function(t,e){var r=rl(t,e);return r>0?Pg(t,e+4,e+4+r):""},pR=dR,mR=function(t,e){return _Q(t,e)},uv=mR,Kb=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Kr&&(aR=function(e,r){if(!Buffer.isBuffer(e))return sR(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},lR=function(e,r){if(!Buffer.isBuffer(e))return oR(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},uR=function(e,r){if(!Buffer.isBuffer(e))return cR(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},hR=function(e,r){if(!Buffer.isBuffer(e))return fR(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},pR=function(e,r){if(!Buffer.isBuffer(e))return dR(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},uv=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):mR(e,r)},Kb=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var z0=function(t,e){return t[e]},Fu=function(t,e){return t[e+1]*256+t[e]},EQ=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},rl=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},sd=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},SQ=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function pm(t,e){var r="",n,i,s=[],a,o,l,c;switch(e){case"dbcs":if(c=this.l,Kr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(Fu(this,c)),c+=2;t*=2;break;case"utf8":r=Pg(this,this.l,this.l+t);break;case"utf16le":t*=2,r=Gb(this,this.l,this.l+t);break;case"wstr":return pm.call(this,t,"dbcs");case"lpstr-ansi":r=aR(this,this.l),t=4+rl(this,this.l);break;case"lpstr-cp":r=lR(this,this.l),t=4+rl(this,this.l);break;case"lpwstr":r=uR(this,this.l),t=4+2*rl(this,this.l);break;case"lpp4":t=4+rl(this,this.l),r=hR(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+rl(this,this.l),r=pR(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=z0(this,this.l+t++))!==0;)s.push(jx(a));r=s.join("");break;case"_wstr":for(t=0,r="";(a=Fu(this,this.l+t))!==0;)s.push(jx(a)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=z0(this,c),this.l=c+1,o=pm.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(jx(Fu(this,c))),c+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=z0(this,c),this.l=c+1,o=pm.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(jx(z0(this,c))),c+=1}r=s.join("");break;default:switch(t){case 1:return n=z0(this,this.l),this.l++,n;case 2:return n=(e==="i"?EQ:Fu)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?sd:SQ)(this,this.l),this.l+=4,n):(i=rl(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=uv(this,this.l):i=uv([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:r=iR(this,this.l,t);break}}return this.l+=t,r}var kQ=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},TQ=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},AQ=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function CQ(t,e,r){var n=0,i=0;if(r==="dbcs"){for(i=0;i!=e.length;++i)AQ(this,e.charCodeAt(i),this.l+2*i);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;n=e.length}else if(r==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,kQ(this,e,this.l);break;case 8:if(n=8,r==="f"){bQ(this,e,this.l);break}case 16:break;case-4:n=4,TQ(this,e,this.l);break}return this.l+=n,this}function gR(t,e){var r=iR(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Ea(t,e){t.l=e,t.read_shift=pm,t.chk=gR,t.write_shift=CQ}function oo(t,e){t.l+=e}function ft(t){var e=dh(t);return Ea(e,0),e}function Zu(t,e,r){if(t){var n,i,s;Ea(t,t.l||0);for(var a=t.length,o=0,l=0;t.l<a;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var c=Zm[o]||Zm[65535];for(n=t.read_shift(1),s=n&127,i=1;i<4&&n&128;++i)s+=((n=t.read_shift(1))&127)<<7*i;l=t.l+s;var f=c.f&&c.f(t,s,r);if(t.l=l,e(f,c,o))return}}}function Oo(){var t=[],e=Kr?256:2048,r=function(c){var f=ft(c);return Ea(f,0),f},n=r(e),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(c){return n&&c<n.length-n.l?n:(i(),n=r(Math.max(c+1,e)))},a=function(){return i(),ia(t)},o=function(c){i(),n=c,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:o,end:a,_bufs:t}}function bt(t,e,r,n){var i=+e,s;if(!isNaN(i)){n||(n=Zm[i].p||(r||[]).length||0),s=1+(i>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var a=t.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(n>=128)a.write_shift(1,(n&127)+128),n>>=7;else{a.write_shift(1,n);break}n>0&&Kb(r)&&t.push(r)}}function mm(t,e,r){var n=xi(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function Jk(t,e,r){var n=xi(t);return n.s=mm(n.s,e.s,r),n.e=mm(n.e,e.s,r),n}function gm(t,e){if(t.cRel&&t.c<0)for(t=xi(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=xi(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Ir(t);return!t.cRel&&t.cRel!=null&&(r=PQ(r)),!t.rRel&&t.rRel!=null&&(r=IQ(r)),r}function Ww(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Vi(t.s.c)+":"+(t.e.cRel?"":"$")+Vi(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+xs(t.s.r)+":"+(t.e.rRel?"":"$")+xs(t.e.r):gm(t.s,e.biff)+":"+gm(t.e,e.biff)}function Xb(t){return parseInt(NQ(t),10)-1}function xs(t){return""+(t+1)}function IQ(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function NQ(t){return t.replace(/\$(\d+)$/,"$1")}function Yb(t){for(var e=RQ(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Vi(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function PQ(t){return t.replace(/^([A-Z])/,"$$$1")}function RQ(t){return t.replace(/^\$([A-Z])/,"$1")}function FQ(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ui(t){for(var e=0,r=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:e-1}}function Ir(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Mo(t){var e=t.indexOf(":");return e==-1?{s:Ui(t),e:Ui(t)}:{s:Ui(t.slice(0,e)),e:Ui(t.slice(e+1))}}function Vr(t,e){return typeof e>"u"||typeof e=="number"?Vr(t.s,t.e):(typeof t!="string"&&(t=Ir(t)),typeof e!="string"&&(e=Ir(e)),t==e?t:t+":"+e)}function _n(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,s=t.length;for(r=0;n<s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.s.c=--r,r=0;n<s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(e.s.r=--r,n===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.e.c=--r,r=0;n!=s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return e.e.r=--r,e}function Zk(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Dl(t.z,r?$s(e):e)}catch{}try{return t.w=Dl((t.XF||{}).numFmtId||(r?14:0),r?$s(e):e)}catch{return""+e}}function $u(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?ef[t.v]||t.v:e==null?Zk(t,t.v):Zk(t,e))}function Ih(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function xR(t,e,r){var n=r||{},i=t?Array.isArray(t):n.dense,s=t||(i?[]:{}),a=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?Ui(n.origin):n.origin;a=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var f=_n(s["!ref"]);c.s.c=f.s.c,c.s.r=f.s.r,c.e.c=Math.max(c.e.c,f.e.c),c.e.r=Math.max(c.e.r,f.e.r),a==-1&&(c.e.r=a=f.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=e[d].length;++m)if(!(typeof e[d][m]>"u")){var p={v:e[d][m]},_=a+d,w=o+m;if(c.s.r>_&&(c.s.r=_),c.s.c>w&&(c.s.c=w),c.e.r<_&&(c.e.r=_),c.e.c<w&&(c.e.c=w),e[d][m]&&typeof e[d][m]=="object"&&!Array.isArray(e[d][m])&&!(e[d][m]instanceof Date))p=e[d][m];else if(Array.isArray(p.v)&&(p.f=e[d][m][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Tr[14],n.cellDates?(p.t="d",p.w=Dl(p.z,$s(p.v))):(p.t="n",p.v=$s(p.v),p.w=Dl(p.z,p.v))):p.t="s";if(i)s[_]||(s[_]=[]),s[_][w]&&s[_][w].z&&(p.z=s[_][w].z),s[_][w]=p;else{var b=Ir({c:w,r:_});s[b]&&s[b].z&&(p.z=s[b].z),s[b]=p}}}return c.s.c<1e7&&(s["!ref"]=Vr(c)),s}function i1(t,e){return xR(null,t,e)}function LQ(t){return t.read_shift(4,"i")}function cc(t,e){return e||(e=ft(4)),e.write_shift(4,t),e}function ao(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function sa(t,e){var r=!1;return e==null&&(r=!0,e=ft(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function DQ(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function OQ(t,e){return e||(e=ft(4)),e.write_shift(2,0),e.write_shift(2,0),e}function Qb(t,e){var r=t.l,n=t.read_shift(1),i=ao(t),s=[],a={t:i,h:i};if((n&1)!==0){for(var o=t.read_shift(4),l=0;l!=o;++l)s.push(DQ(t));a.r=s}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}function MQ(t,e){var r=!1;return e==null&&(r=!0,e=ft(15+4*t.t.length)),e.write_shift(1,0),sa(t.t,e),r?e.slice(0,e.l):e}var jQ=Qb;function BQ(t,e){var r=!1;return e==null&&(r=!0,e=ft(23+4*t.t.length)),e.write_shift(1,1),sa(t.t,e),e.write_shift(4,1),OQ({},e),r?e.slice(0,e.l):e}function Vl(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Yd(t,e){return e==null&&(e=ft(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Qd(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Jd(t,e){return e==null&&(e=ft(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var VQ=ao,vR=sa;function Jb(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function fv(t,e){var r=!1;return e==null&&(r=!0,e=ft(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var UQ=ao,E5=Jb,Zb=fv;function e3(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var i=n===0?uv([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):sd(e,0)>>2;return r?i/100:i}function yR(t,e){e==null&&(e=ft(4));var r=0,n=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?i:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function wR(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function zQ(t,e){return e||(e=ft(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Zd=wR,s1=zQ;function no(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function jd(t,e){return(e||ft(8)).write_shift(8,t,"f")}function $Q(t){var e={},r=t.read_shift(1),n=r>>>1,i=t.read_shift(1),s=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=i;var c=md[i];c&&(e.rgb=Xm(c));break;case 2:e.rgb=Xm([a,o,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function hv(t,e){if(e||(e=ft(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function HQ(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function WQ(t,e){e||(e=ft(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function _R(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function qQ(t){return _R(t,1)}function GQ(t){return _R(t,2)}var t3=2,Ro=3,Vx=11,eT=12,dv=19,Ux=64,KQ=65,XQ=71,YQ=4108,QQ=4126,ta=80,bR=81,JQ=[ta,bR],S5={1:{n:"CodePage",t:t3},2:{n:"Category",t:ta},3:{n:"PresentationFormat",t:ta},4:{n:"ByteCount",t:Ro},5:{n:"LineCount",t:Ro},6:{n:"ParagraphCount",t:Ro},7:{n:"SlideCount",t:Ro},8:{n:"NoteCount",t:Ro},9:{n:"HiddenCount",t:Ro},10:{n:"MultimediaClipCount",t:Ro},11:{n:"ScaleCrop",t:Vx},12:{n:"HeadingPairs",t:YQ},13:{n:"TitlesOfParts",t:QQ},14:{n:"Manager",t:ta},15:{n:"Company",t:ta},16:{n:"LinksUpToDate",t:Vx},17:{n:"CharacterCount",t:Ro},19:{n:"SharedDoc",t:Vx},22:{n:"HyperlinksChanged",t:Vx},23:{n:"AppVersion",t:Ro,p:"version"},24:{n:"DigSig",t:KQ},26:{n:"ContentType",t:ta},27:{n:"ContentStatus",t:ta},28:{n:"Language",t:ta},29:{n:"Version",t:ta},255:{},2147483648:{n:"Locale",t:dv},2147483651:{n:"Behavior",t:dv},1919054434:{}},k5={1:{n:"CodePage",t:t3},2:{n:"Title",t:ta},3:{n:"Subject",t:ta},4:{n:"Author",t:ta},5:{n:"Keywords",t:ta},6:{n:"Comments",t:ta},7:{n:"Template",t:ta},8:{n:"LastAuthor",t:ta},9:{n:"RevNumber",t:ta},10:{n:"EditTime",t:Ux},11:{n:"LastPrinted",t:Ux},12:{n:"CreatedDate",t:Ux},13:{n:"ModifiedDate",t:Ux},14:{n:"PageCount",t:Ro},15:{n:"WordCount",t:Ro},16:{n:"CharCount",t:Ro},17:{n:"Thumbnail",t:XQ},18:{n:"Application",t:ta},19:{n:"DocSecurity",t:Ro},255:{},2147483648:{n:"Locale",t:dv},2147483651:{n:"Behavior",t:dv},1919054434:{}},tT={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},ZQ=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function eJ(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var tJ=eJ([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),md=xi(tJ),ef={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},ER={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},T5={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},zx={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function r3(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function rJ(t){var e=r3();if(!t||!t.match)return e;var r={};if((t.match(lo)||[]).forEach(function(n){var i=Nr(n);switch(i[0].replace(hQ,"<")){case"<?xml":break;case"<Types":e.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[i.Extension]=i.ContentType;break;case"<Override":e[T5[i.ContentType]]!==void 0&&e[T5[i.ContentType]].push(i.PartName);break}}),e.xmlns!==Us.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function SR(t,e){var r=rQ(T5),n=[],i;n[n.length]=vs,n[n.length]=Bt("Types",null,{xmlns:Us.CT,"xmlns:xsd":Us.xsd,"xmlns:xsi":Us.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Bt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){t[l]&&t[l].length>0&&(i=t[l][0],n[n.length]=Bt("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:zx[l][e.bookType]||zx[l].xlsx}))},a=function(l){(t[l]||[]).forEach(function(c){n[n.length]=Bt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:zx[l][e.bookType]||zx[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(c){n[n.length]=Bt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:r[l][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var en={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Km(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function xm(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(lo)||[]).forEach(function(i){var s=Nr(i);if(s[0]==="<Relationship"){var a={};a.Type=s.Type,a.Target=s.Target,a.Id=s.Id,s.TargetMode&&(a.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:nm(s.Target,e);r[o]=a,n[s.Id]=a}}),r["!id"]=n,r}function ap(t){var e=[vs,Bt("Relationships",null,{xmlns:Us.RELS})];return es(t["!id"]).forEach(function(r){e[e.length]=Bt("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Un(t,e,r,n,i,s){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=n,i.Target=r,[en.HLINK,en.XPATH,en.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}var nJ="application/vnd.oasis.opendocument.spreadsheet";function iJ(t,e){for(var r=qb(t),n,i;n=Gm.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(i=Nr(n[0],!1),i.path=="/"&&i.type!==nJ)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function sJ(t){var e=[vs];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function rT(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function aJ(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function oJ(t){var e=[vs];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(rT(t[r][0],t[r][1])),e.push(aJ("",t[r][0]));return e.push(rT("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function kR(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+sv.version+"</meta:generator></office:meta></office:document-meta>"}var Ll=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],lJ=(function(){for(var t=new Array(Ll.length),e=0;e<Ll.length;++e){var r=Ll[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t})();function TR(t){var e={};t=Xn(t);for(var r=0;r<Ll.length;++r){var n=Ll[r],i=t.match(lJ[r]);i!=null&&i.length>0&&(e[n[1]]=wn(i[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=gi(e[n[1]]))}return e}function qw(t,e,r,n,i){i[t]!=null||e==null||e===""||(i[t]=e,e=Hn(e),n[n.length]=r?Bt(t,e,r):ka(t,e))}function AR(t,e){var r=e||{},n=[vs,Bt("cp:coreProperties",null,{"xmlns:cp":Us.CORE_PROPS,"xmlns:dc":Us.dc,"xmlns:dcterms":Us.dcterms,"xmlns:dcmitype":Us.dcmitype,"xmlns:xsi":Us.xsi})],i={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&qw("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:b5(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),t.ModifiedDate!=null&&qw("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:b5(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var s=0;s!=Ll.length;++s){var a=Ll[s],o=r.Props&&r.Props[a[1]]!=null?r.Props[a[1]]:t?t[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&qw(a[0],o,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var gd=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],CR=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function IR(t,e,r,n){var i=[];if(typeof t=="string")i=qk(t,n);else for(var s=0;s<t.length;++s)i=i.concat(t[s].map(function(f){return{v:f}}));var a=typeof e=="string"?qk(e,n).map(function(f){return f.v}):e,o=0,l=0;if(a.length>0)for(var c=0;c!==i.length;c+=2){switch(l=+i[c+1].v,i[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=a.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=a.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=a.slice(o,o+l);break}o+=l}}function cJ(t,e,r){var n={};return e||(e={}),t=Xn(t),gd.forEach(function(i){var s=(t.match(Wm(i[0]))||[])[1];switch(i[2]){case"string":s&&(e[i[1]]=wn(s));break;case"bool":e[i[1]]=s==="true";break;case"raw":var a=t.match(new RegExp("<"+i[0]+"[^>]*>([\\s\\S]*?)</"+i[0]+">"));a&&a.length>0&&(n[i[1]]=a[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&IR(n.HeadingPairs,n.TitlesOfParts,e,r),e}function NR(t){var e=[],r=Bt;return t||(t={}),t.Application="SheetJS",e[e.length]=vs,e[e.length]=Bt("Properties",null,{xmlns:Us.EXT_PROPS,"xmlns:vt":Us.vt}),gd.forEach(function(n){if(t[n[1]]!==void 0){var i;switch(n[2]){case"string":i=Hn(String(t[n[1]]));break;case"bool":i=t[n[1]]?"true":"false";break}i!==void 0&&(e[e.length]=r(n[0],i))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+Hn(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var uJ=/<[^>]+>[^<]*/g;function fJ(t,e){var r={},n="",i=t.match(uJ);if(i)for(var s=0;s!=i.length;++s){var a=i[s],o=Nr(a);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=wn(o.name);break;case"</property>":n=null;break;default:if(a.indexOf("<vt:")===0){var l=a.split(">"),c=l[0].slice(4),f=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=wn(f);break;case"bool":r[n]=hi(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(f);break;case"filetime":case"date":r[n]=gi(f);break;case"cy":case"error":r[n]=wn(f);break;default:if(c.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",a,c,l)}}else if(a.slice(0,2)!=="</"){if(e.WTF)throw new Error(a)}}}return r}function PR(t){var e=[vs,Bt("Properties",null,{xmlns:Us.CUST_PROPS,"xmlns:vt":Us.vt})];if(!t)return e.join("");var r=1;return es(t).forEach(function(i){++r,e[e.length]=Bt("property",wQ(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Hn(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var A5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Gw;function hJ(t,e,r){Gw||(Gw=dy(A5)),e=Gw[e]||e,t[e]=r}function dJ(t,e){var r=[];return es(A5).map(function(n){for(var i=0;i<Ll.length;++i)if(Ll[i][1]==n)return Ll[i];for(i=0;i<gd.length;++i)if(gd[i][1]==n)return gd[i];throw n}).forEach(function(n){if(t[n[1]]!=null){var i=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push(ka(A5[n[1]]||n[1],i))}}),Bt("DocumentProperties",r.join(""),{xmlns:tl.o})}function pJ(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return t&&es(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var a=0;a<Ll.length;++a)if(s==Ll[a][1])return;for(a=0;a<gd.length;++a)if(s==gd[a][1])return;for(a=0;a<r.length;++a)if(s==r[a])return;var o=t[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(Bt(zk(s),o,{"dt:dt":l}))}}),e&&es(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(Bt(zk(s),a,{"dt:dt":o}))}}),"<"+n+' xmlns="'+tl.o+'">'+i.join("")+"</"+n+">"}function n3(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function mJ(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),i=(r-n)/Math.pow(2,32);n*=1e7,i*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),i+=s);var a=ft(8);return a.write_shift(4,n),a.write_shift(4,i),a}function RR(t,e,r){var n=t.l,i=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return i}function FR(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function LR(t,e,r){return e===31?FR(t):RR(t,e,r)}function C5(t,e,r){return LR(t,e,r===!1?0:4)}function gJ(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return LR(t,e,0)}function xJ(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var i=t.l;r[n]=t.read_shift(0,"lpwstr").replace(yo,""),t.l-i&2&&(t.l+=2)}return r}function vJ(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(yo,"");return r}function yJ(t){var e=t.l,r=pv(t,bR);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=pv(t,Ro);return[r,n]}function wJ(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(yJ(t));return r}function nT(t,e){for(var r=t.read_shift(4),n={},i=0;i!=r;++i){var s=t.read_shift(4),a=t.read_shift(4);n[s]=t.read_shift(a,e===1200?"utf16le":"utf8").replace(yo,"").replace(rm,"!"),e===1200&&a%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function DR(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function _J(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function pv(t,e,r){var n=t.read_shift(2),i,s=r||{};if(t.l+=2,e!==eT&&n!==e&&JQ.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===eT?n:e){case 2:return i=t.read_shift(2,"i"),s.raw||(t.l+=2),i;case 3:return i=t.read_shift(4,"i"),i;case 11:return t.read_shift(4)!==0;case 19:return i=t.read_shift(4),i;case 30:return RR(t,n,4).replace(yo,"");case 31:return FR(t);case 64:return n3(t);case 65:return DR(t);case 71:return _J(t);case 80:return C5(t,n,!s.raw).replace(yo,"");case 81:return gJ(t,n).replace(yo,"");case 4108:return wJ(t);case 4126:case 4127:return n==4127?xJ(t):vJ(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function iT(t,e){var r=ft(4),n=ft(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=ft(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=mJ(e);break;case 31:case 80:for(n=ft(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return ia([r,n])}function sT(t,e){var r=t.l,n=t.read_shift(4),i=t.read_shift(4),s=[],a=0,o=0,l=-1,c={};for(a=0;a!=i;++a){var f=t.read_shift(4),d=t.read_shift(4);s[a]=[f,d+r]}s.sort(function(F,N){return F[1]-N[1]});var m={};for(a=0;a!=i;++a){if(t.l!==s[a][1]){var p=!0;if(a>0&&e)switch(e[s[a-1][0]].t){case 2:t.l+2===s[a][1]&&(t.l+=2,p=!1);break;case 80:t.l<=s[a][1]&&(t.l=s[a][1],p=!1);break;case 4108:t.l<=s[a][1]&&(t.l=s[a][1],p=!1);break}if((!e||a==0)&&t.l<=s[a][1]&&(p=!1,t.l=s[a][1]),p)throw new Error("Read Error: Expected address "+s[a][1]+" at "+t.l+" :"+a)}if(e){var _=e[s[a][0]];if(m[_.n]=pv(t,_.t,{raw:!0}),_.p==="version"&&(m[_.n]=String(m[_.n]>>16)+"."+("0000"+String(m[_.n]&65535)).slice(-4)),_.n=="CodePage")switch(m[_.n]){case 0:m[_.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:sc(o=m[_.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[_.n])}}else if(s[a][0]===1){if(o=m.CodePage=pv(t,t3),sc(o),l!==-1){var w=t.l;t.l=s[l][1],c=nT(t,o),t.l=w}}else if(s[a][0]===0){if(o===0){l=a,t.l=s[a+1][1];continue}c=nT(t,o)}else{var b=c[s[a][0]],k;switch(t[t.l]){case 65:t.l+=4,k=DR(t);break;case 30:t.l+=4,k=C5(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,k=C5(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,k=t.read_shift(4,"i");break;case 19:t.l+=4,k=t.read_shift(4);break;case 5:t.l+=4,k=t.read_shift(8,"f");break;case 11:t.l+=4,k=us(t,4);break;case 64:t.l+=4,k=gi(n3(t));break;default:throw new Error("unparsed value: "+t[t.l])}m[b]=k}}return t.l=r+n,m}var OR=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function bJ(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function aT(t,e,r){var n=ft(8),i=[],s=[],a=8,o=0,l=ft(8),c=ft(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),i.push(c),a+=8+l.length,!e){c=ft(8),c.write_shift(4,0),i.unshift(c);var f=[ft(4)];for(f[0].write_shift(4,t.length),o=0;o<t.length;++o){var d=t[o][0];for(l=ft(8+2*(d.length+1)+(d.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);f.push(l)}l=ia(f),s.unshift(l),a+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(OR.indexOf(t[o][0])>-1||CR.indexOf(t[o][0])>-1)&&t[o][1]!=null){var m=t[o][1],p=0;if(e){p=+e[t[o][0]];var _=r[p];if(_.p=="version"&&typeof m=="string"){var w=m.split(".");m=(+w[0]<<16)+(+w[1]||0)}l=iT(_.t,m)}else{var b=bJ(m);b==-1&&(b=31,m=String(m)),l=iT(b,m)}s.push(l),c=ft(8),c.write_shift(4,e?p:2+o),i.push(c),a+=8+l.length}var k=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,k),k+=s[o].length;return n.write_shift(4,a),n.write_shift(4,s.length),ia([n].concat(i).concat(s))}function oT(t,e,r){var n=t.content;if(!n)return{};Ea(n,0);var i,s,a,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),f=n.read_shift(16);if(f!==yr.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(i=n.read_shift(4),i!==1&&i!==2)throw new Error("Unrecognized #Sets: "+i);if(s=n.read_shift(16),o=n.read_shift(4),i===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);i===2&&(a=n.read_shift(16),l=n.read_shift(4));var d=sT(n,e),m={SystemIdentifier:c};for(var p in d)m[p]=d[p];if(m.FMTID=s,i===1)return m;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var _;try{_=sT(n,null)}catch{}for(p in _)m[p]=_[p];return m.FMTID=[s,a],m}function lT(t,e,r,n,i,s){var a=ft(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,yr.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var l=aT(t,r,n);if(o.push(l),i){var c=aT(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+l.length),o.push(c)}return ia(o)}function Pf(t,e){return t.read_shift(e),null}function EJ(t,e){e||(e=ft(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function SJ(t,e,r){for(var n=[],i=t.l+e;t.l<i;)n.push(r(t,i-t.l));if(i!==t.l)throw new Error("Slurp error");return n}function us(t,e){return t.read_shift(e)===1}function xo(t,e){return e||(e=ft(2)),e.write_shift(2,+!!t),e}function Cs(t){return t.read_shift(2,"u")}function Fl(t,e){return e||(e=ft(2)),e.write_shift(2,t),e}function MR(t,e){return SJ(t,e,Cs)}function kJ(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function jR(t,e,r){return r||(r=ft(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function Rg(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var a=n?t.read_shift(n,i):"";return a}function TJ(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,i=r&8,s=1+(r&1),a=0,o,l={};i&&(a=t.read_shift(2)),n&&(o=t.read_shift(4));var c=s==2?"dbcs-cont":"sbcs-cont",f=e===0?"":t.read_shift(e,c);return i&&(t.l+=4*a),n&&(t.l+=o),l.t=f,i||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function AJ(t){var e=t.t||"",r=ft(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=ft(2*e.length);n.write_shift(2*e.length,e,"utf16le");var i=[r,n];return ia(i)}function Bd(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Fg(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Bd(t,n,r)}function e0(t,e,r){if(r.biff>5)return Fg(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function BR(t,e,r){return r||(r=ft(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function CJ(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function IJ(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var i=t.read_shift((n?e-24:e)>>1,"utf16le").replace(yo,"");return n&&(t.l+=24),i}function NJ(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var i=t.read_shift(4);if(i===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=t.read_shift(s>>1,"utf16le").replace(yo,"");return r+a}function PJ(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return IJ(t);case"0303000000000000c000000000000046":return NJ(t);default:throw new Error("Unsupported Moniker "+r)}}function $x(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(yo,""):"";return r}function cT(t,e){e||(e=ft(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function RJ(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var i=t.read_shift(2);t.l+=2;var s,a,o,l,c="",f,d;i&16&&(s=$x(t,r-t.l)),i&128&&(a=$x(t,r-t.l)),(i&257)===257&&(o=$x(t,r-t.l)),(i&257)===1&&(l=PJ(t,r-t.l)),i&8&&(c=$x(t,r-t.l)),i&32&&(f=t.read_shift(16)),i&64&&(d=n3(t)),t.l=r;var m=a||o||l||"";m&&c&&(m+="#"+c),m||(m="#"+c),i&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var p={Target:m};return f&&(p.guid=f),d&&(p.time=d),s&&(p.Tooltip=s),p}function FJ(t){var e=ft(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),s=i>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(r=0;r<a.length;++r)e.write_shift(4,a[r]);if(s==28)n=n.slice(1),cT(n,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));var o=i>-1?n.slice(0,i):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),s&8&&cT(i>-1?n.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function VR(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),i=t.read_shift(1);return[e,r,n,i]}function UR(t,e){var r=VR(t);return r[3]=0,r}function au(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function Vd(t,e,r,n){return n||(n=ft(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function LJ(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function DJ(t,e,r){return e===0?"":e0(t,e,r)}function OJ(t,e,r){var n=r.biff>8?4:2,i=t.read_shift(n),s=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[i,s,a]}function zR(t){var e=t.read_shift(2),r=e3(t);return[e,r]}function MJ(t,e,r){t.l+=4,e-=4;var n=t.l+e,i=Rg(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,i}function gy(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);return{s:{c:n,r:e},e:{c:i,r}}}function $R(t,e){return e||(e=ft(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function HR(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),i=t.read_shift(1);return{s:{c:n,r:e},e:{c:i,r}}}var jJ=HR;function WR(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function BJ(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function VJ(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function qa(t){t.l+=2,t.l+=t.read_shift(2)}var UJ={0:qa,4:qa,5:qa,6:qa,7:VJ,8:qa,9:qa,10:qa,11:qa,12:qa,13:BJ,14:qa,15:qa,16:qa,17:qa,18:qa,19:qa,20:qa,21:WR};function zJ(t,e){for(var r=t.l+e,n=[];t.l<r;){var i=t.read_shift(2);t.l-=2;try{n.push(UJ[i](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function Hx(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function i3(t,e,r){var n=1536,i=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=ft(i);return s.write_shift(2,n),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function $J(t,e){return e===0||t.read_shift(2),1200}function HJ(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,i=e0(t,0,r);return t.read_shift(e+n-t.l),i}function WJ(t,e){var r=!e||e.biff==8,n=ft(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function qJ(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function GJ(t,e,r){var n=t.read_shift(4),i=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var a=Rg(t,0,r);return a.length===0&&(a="Sheet1"),{pos:n,hs:i,dt:s,name:a}}function KJ(t,e){var r=!e||e.biff>=8?2:1,n=ft(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function XJ(t,e){for(var r=t.l+e,n=t.read_shift(4),i=t.read_shift(4),s=[],a=0;a!=i&&t.l<r;++a)s.push(TJ(t));return s.Count=n,s.Unique=i,s}function YJ(t,e){var r=ft(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],i=0;i<t.length;++i)n[i]=AJ(t[i]);var s=ia([r].concat(n));return s.parts=[r.length].concat(n.map(function(a){return a.length})),s}function QJ(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function JJ(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function ZJ(t){var e=LJ(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function eZ(t){return t.read_shift(2),t.read_shift(4)}function uT(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var i=t.read_shift(2);r&&r.biff==2&&(n=1-(i>>15),i&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,i]}function tZ(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2);return{Pos:[e,r],Dim:[n,i],Flags:s,CurTab:a,FirstTab:o,Selected:l,TabRatio:c}}function rZ(){var t=ft(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function nZ(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function iZ(t){var e=ft(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function sZ(){}function aZ(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Rg(t,0,r),n}function oZ(t,e){var r=t.name||"Arial",n=e&&e.biff==5,i=n?15+r.length:16+2*r.length,s=ft(i);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function lZ(t){var e=au(t);return e.isst=t.read_shift(4),e}function cZ(t,e,r,n){var i=ft(10);return Vd(t,e,n,i),i.write_shift(4,r),i}function uZ(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,i=au(t);r.biff==2&&t.l++;var s=Fg(t,n-t.l,r);return i.val=s,i}function fZ(t,e,r,n,i){var s=!i||i.biff==8,a=ft(8+ +s+(1+s)*r.length);return Vd(t,e,n,a),a.write_shift(2,r.length),s&&a.write_shift(1,1),a.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),a}function hZ(t,e,r){var n=t.read_shift(2),i=e0(t,0,r);return[n,i]}function dZ(t,e,r,n){var i=r&&r.biff==5;n||(n=ft(i?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(i?1:2,e.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var pZ=e0;function fT(t,e,r){var n=t.l+e,i=r.biff==8||!r.biff?4:2,s=t.read_shift(i),a=t.read_shift(i),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:s,c:o},e:{r:a,c:l}}}function mZ(t,e){var r=e.biff==8||!e.biff?4:2,n=ft(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function gZ(t){var e=t.read_shift(2),r=t.read_shift(2),n=zR(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function xZ(t,e){for(var r=t.l+e-2,n=t.read_shift(2),i=t.read_shift(2),s=[];t.l<r;)s.push(zR(t));if(t.l!==r)throw new Error("MulRK read error");var a=t.read_shift(2);if(s.length!=a-i+1)throw new Error("MulRK length mismatch");return{r:n,c:i,C:a,rkrec:s}}function vZ(t,e){for(var r=t.l+e-2,n=t.read_shift(2),i=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var a=t.read_shift(2);if(s.length!=a-i+1)throw new Error("MulBlank length mismatch");return{r:n,c:i,C:a,ixfe:s}}function yZ(t,e,r,n){var i={},s=t.read_shift(4),a=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return i.patternType=ZQ[o>>26],n.cellStyles&&(i.alc=s&7,i.fWrap=s>>3&1,i.alcV=s>>4&7,i.fJustLast=s>>7&1,i.trot=s>>8&255,i.cIndent=s>>16&15,i.fShrinkToFit=s>>20&1,i.iReadOrder=s>>22&2,i.fAtrNum=s>>26&1,i.fAtrFnt=s>>27&1,i.fAtrAlc=s>>28&1,i.fAtrBdr=s>>29&1,i.fAtrPat=s>>30&1,i.fAtrProt=s>>31&1,i.dgLeft=a&15,i.dgRight=a>>4&15,i.dgTop=a>>8&15,i.dgBottom=a>>12&15,i.icvLeft=a>>16&127,i.icvRight=a>>23&127,i.grbitDiag=a>>30&3,i.icvTop=o&127,i.icvBottom=o>>7&127,i.icvDiag=o>>14&127,i.dgDiag=o>>21&15,i.icvFore=l&127,i.icvBack=l>>7&127,i.fsxButton=l>>14&1),i}function wZ(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=yZ(t,e,n.fStyle,r),n}function hT(t,e,r,n){var i=r&&r.biff==5;n||(n=ft(i?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&i&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function _Z(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function bZ(t){var e=ft(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function dT(t,e,r){var n=au(t);(r.biff==2||e==9)&&++t.l;var i=kJ(t);return n.val=i,n.t=i===!0||i===!1?"b":"e",n}function EZ(t,e,r,n,i,s){var a=ft(8);return Vd(t,e,n,a),jR(r,s,a),a}function SZ(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=au(t),i=no(t);return n.val=i,n}function kZ(t,e,r,n){var i=ft(14);return Vd(t,e,n,i),jd(r,i),i}var pT=DJ;function TZ(t,e,r){var n=t.l+e,i=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,i];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var a=Bd(t,s),o=[];n>t.l;)o.push(Fg(t));return[s,i,a,o]}function mT(t,e,r){var n=t.read_shift(2),i,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(i=MJ(t,e-2,r)),s.body=i||t.read_shift(e-2),typeof i=="string"&&(s.Name=i),s}var AZ=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function gT(t,e,r){var n=t.l+e,i=t.read_shift(2),s=t.read_shift(1),a=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var c=Bd(t,a,r);i&32&&(c=AZ[c.charCodeAt(0)]);var f=n-t.l;r&&r.biff==2&&--f;var d=n==t.l||o===0||!(f>0)?[]:zne(t,f,r,o);return{chKey:s,Name:c,itab:l,rgce:d}}function qR(t,e,r){if(r.biff<8)return CZ(t,e,r);for(var n=[],i=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(OJ(t,r.biff>8?12:6,r));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return n}function CZ(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Rg(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function IZ(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),i=t.read_shift(2),s=Bd(t,n,r),a=Bd(t,i,r);return[s,a]}function NZ(t,e,r){var n=HR(t);t.l++;var i=t.read_shift(1);return e-=8,[$ne(t,e,r),i,n]}function xT(t,e,r){var n=jJ(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,Vne(t,e,r)]}function PZ(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function RZ(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),o=e0(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:i},o,a,s]}}function FZ(t,e,r){return RZ(t,e,r)}function LZ(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(gy(t));return r}function DZ(t){var e=ft(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)$R(t[r],e);return e}function OZ(t,e,r){if(r&&r.biff<8)return jZ(t,e,r);var n=WR(t),i=zJ(t,e-22,n[1]);return{cmo:n,ft:i}}var MZ={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var i=t.read_shift(1);return t.l+=i,t.l=r,{fmt:n}}};function jZ(t,e,r){t.l+=4;var n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var a=[];return a.push((MZ[n]||oo)(t,e,r)),{cmo:[i,n,s],ft:a}}function BZ(t,e,r){var n=t.l,i="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:a=CJ(t,6,r);var o=t.read_shift(2);t.read_shift(2),Cs(t,2);var l=t.read_shift(2);t.l+=l;for(var c=1;c<t.lens.length-1;++c){if(t.l-n!=t.lens[c])throw new Error("TxO: bad continue record");var f=t[t.l],d=Bd(t,t.lens[c+1]-t.lens[c]-1);if(i+=d,i.length>=(f?o:2*o))break}if(i.length!==o&&i.length!==o*2)throw new Error("cchText: "+o+" != "+i.length);return t.l=n+e,{t:i}}catch{return t.l=n+e,{t:i}}}function VZ(t,e){var r=gy(t);t.l+=16;var n=RJ(t,e-24);return[r,n]}function UZ(t){var e=ft(24),r=Ui(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(n[i],16));return ia([e,FJ(t[1])])}function zZ(t,e){t.read_shift(2);var r=gy(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(yo,""),[r,n]}function $Z(t){var e=t[1].Tooltip,r=ft(10+2*(e.length+1));r.write_shift(2,2048);var n=Ui(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var i=0;i<e.length;++i)r.write_shift(2,e.charCodeAt(i));return r.write_shift(2,0),r}function HZ(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=tT[r]||r,r=t.read_shift(2),e[1]=tT[r]||r,e}function WZ(t){return t||(t=ft(4)),t.write_shift(2,1),t.write_shift(2,1),t}function qZ(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(UR(t));return r}function GZ(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(UR(t));return r}function KZ(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function GR(t,e,r){if(!r.cellStyles)return oo(t,e);var n=r&&r.biff>=12?4:2,i=t.read_shift(n),s=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var c={s:i,e:s,w:a,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function XZ(t,e){var r=ft(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function YZ(t,e){var r={};return e<32||(t.l+=16,r.header=no(t),r.footer=no(t),t.l+=2),r}function QZ(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var i=t.read_shift(1);return t.l+=3,i&16&&(n.area=!0),n}function JZ(t){for(var e=ft(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var ZZ=au,eee=MR,tee=Fg;function ree(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,i}function nee(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=au(t);++t.l;var i=e0(t,e-7,r);return n.t="str",n.val=i,n}function iee(t){var e=au(t);++t.l;var r=no(t);return e.t="n",e.val=r,e}function see(t,e,r){var n=ft(15);return Mg(n,t,e),n.write_shift(8,r,"f"),n}function aee(t){var e=au(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function oee(t,e,r){var n=ft(9);return Mg(n,t,e),n.write_shift(2,r),n}function lee(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function cee(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function uee(t,e,r){var n=t.l+e,i=au(t),s=t.read_shift(2),a=Bd(t,s,r);return t.l=n,i.t="str",i.val=a,i}var fee=[2,3,48,49,131,139,140,245],I5=(function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=dy({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],f=dh(1);switch(l.type){case"base64":f=nl(ul(o));break;case"binary":f=nl(o);break;case"buffer":case"array":f=o;break}Ea(f,0);var d=f.read_shift(1),m=!!(d&136),p=!1,_=!1;switch(d){case 2:break;case 3:break;case 48:p=!0,m=!0;break;case 49:p=!0,m=!0;break;case 131:break;case 139:break;case 140:_=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var w=0,b=521;d==2&&(w=f.read_shift(2)),f.l+=3,d!=2&&(w=f.read_shift(4)),w>1048576&&(w=1e6),d!=2&&(b=f.read_shift(2));var k=f.read_shift(2),F=l.codepage||1252;d!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(F=t[f[f.l]]),f.l+=1,f.l+=2),_&&(f.l+=36);for(var N=[],B={},X=Math.min(f.length,d==2?521:b-10-(p?264:0)),G=_?32:11;f.l<X&&f[f.l]!=13;)switch(B={},B.name=zm.utils.decode(F,f.slice(f.l,f.l+G)).replace(/[\u0000\r\n].*$/g,""),f.l+=G,B.type=String.fromCharCode(f.read_shift(1)),d!=2&&!_&&(B.offset=f.read_shift(4)),B.len=f.read_shift(1),d==2&&(B.offset=f.read_shift(2)),B.dec=f.read_shift(1),B.name.length&&N.push(B),d!=2&&(f.l+=_?13:14),B.type){case"B":(!p||B.len!=8)&&l.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+B.type)}if(f[f.l]!==13&&(f.l=b-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=b;var P=0,A=0;for(c[0]=[],A=0;A!=N.length;++A)c[0][A]=N[A].name;for(;w-- >0;){if(f[f.l]===42){f.l+=k;continue}for(++f.l,c[++P]=[],A=0,A=0;A!=N.length;++A){var T=f.slice(f.l,f.l+N[A].len);f.l+=N[A].len,Ea(T,0);var O=zm.utils.decode(F,T);switch(N[A].type){case"C":O.trim().length&&(c[P][A]=O.replace(/\s+$/,""));break;case"D":O.length===8?c[P][A]=new Date(+O.slice(0,4),+O.slice(4,6)-1,+O.slice(6,8)):c[P][A]=O;break;case"F":c[P][A]=parseFloat(O.trim());break;case"+":case"I":c[P][A]=_?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(O.trim().toUpperCase()){case"Y":case"T":c[P][A]=!0;break;case"N":case"F":c[P][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+O+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));c[P][A]="##MEMO##"+(_?parseInt(O.trim(),10):T.read_shift(4));break;case"N":O=O.replace(/\u0000/g,"").trim(),O&&O!="."&&(c[P][A]=+O||0);break;case"@":c[P][A]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":c[P][A]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":c[P][A]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[P][A]=-T.read_shift(-8,"f");break;case"B":if(p&&N[A].len==8){c[P][A]=T.read_shift(8,"f");break}case"G":case"P":T.l+=N[A].len;break;case"0":if(N[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+N[A].type)}}}if(d!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=N,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var f=i1(r(o,c),c);return f["!cols"]=c.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete c.DBF,f}function i(o,l){try{return Ih(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var c=l||{};if(+c.codepage>=0&&sc(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var f=Oo(),d=xv(o,{header:1,raw:!0,cellDates:!0}),m=d[0],p=d.slice(1),_=o["!cols"]||[],w=0,b=0,k=0,F=1;for(w=0;w<m.length;++w){if(((_[w]||{}).DBF||{}).name){m[w]=_[w].DBF.name,++k;continue}if(m[w]!=null){if(++k,typeof m[w]=="number"&&(m[w]=m[w].toString(10)),typeof m[w]!="string")throw new Error("DBF Invalid column name "+m[w]+" |"+typeof m[w]+"|");if(m.indexOf(m[w])!==w){for(b=0;b<1024;++b)if(m.indexOf(m[w]+"_"+b)==-1){m[w]+="_"+b;break}}}}var N=_n(o["!ref"]),B=[],X=[],G=[];for(w=0;w<=N.e.c-N.s.c;++w){var P="",A="",T=0,O=[];for(b=0;b<p.length;++b)p[b][w]!=null&&O.push(p[b][w]);if(O.length==0||m[w]==null){B[w]="?";continue}for(b=0;b<O.length;++b){switch(typeof O[b]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=O[b]instanceof Date?"D":"C";break;default:A="C"}T=Math.max(T,String(O[b]).length),P=P&&P!=A?"C":A}T>250&&(T=250),A=((_[w]||{}).DBF||{}).type,A=="C"&&_[w].DBF.len>T&&(T=_[w].DBF.len),P=="B"&&A=="N"&&(P="N",G[w]=_[w].DBF.dec,T=_[w].DBF.len),X[w]=P=="C"||A=="N"?T:s[P]||0,F+=X[w],B[w]=P}var I=f.next(32);for(I.write_shift(4,318902576),I.write_shift(4,p.length),I.write_shift(2,296+32*k),I.write_shift(2,F),w=0;w<4;++w)I.write_shift(4,0);for(I.write_shift(4,0|(+e[OP]||3)<<8),w=0,b=0;w<m.length;++w)if(m[w]!=null){var D=f.next(32),M=(m[w].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);D.write_shift(1,M,"sbcs"),D.write_shift(1,B[w]=="?"?"C":B[w],"sbcs"),D.write_shift(4,b),D.write_shift(1,X[w]||s[B[w]]||0),D.write_shift(1,G[w]||0),D.write_shift(1,2),D.write_shift(4,0),D.write_shift(1,0),D.write_shift(4,0),D.write_shift(4,0),b+=X[w]||s[B[w]]||0}var ie=f.next(264);for(ie.write_shift(4,13),w=0;w<65;++w)ie.write_shift(4,0);for(w=0;w<p.length;++w){var be=f.next(F);for(be.write_shift(1,0),b=0;b<m.length;++b)if(m[b]!=null)switch(B[b]){case"L":be.write_shift(1,p[w][b]==null?63:p[w][b]?84:70);break;case"B":be.write_shift(8,p[w][b]||0,"f");break;case"N":var Ne="0";for(typeof p[w][b]=="number"&&(Ne=p[w][b].toFixed(G[b]||0)),k=0;k<X[b]-Ne.length;++k)be.write_shift(1,32);be.write_shift(1,Ne,"sbcs");break;case"D":p[w][b]?(be.write_shift(4,("0000"+p[w][b].getFullYear()).slice(-4),"sbcs"),be.write_shift(2,("00"+(p[w][b].getMonth()+1)).slice(-2),"sbcs"),be.write_shift(2,("00"+p[w][b].getDate()).slice(-2),"sbcs")):be.write_shift(8,"00000000","sbcs");break;case"C":var we=String(p[w][b]!=null?p[w][b]:"").slice(0,X[b]);for(be.write_shift(1,we,"sbcs"),k=0;k<X[b]-we.length;++k)be.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:i,to_sheet:n,from_sheet:a}})(),KR=(function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+es(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,p){var _=t[p];return typeof _=="number"?Ck(_):_},n=function(m,p,_){var w=p.charCodeAt(0)-32<<4|_.charCodeAt(0)-48;return w==59?m:Ck(w)};t["|"]=254;function i(m,p){switch(p.type){case"base64":return s(ul(m),p);case"binary":return s(m,p);case"buffer":return s(Kr&&Buffer.isBuffer(m)?m.toString("binary"):Ch(m),p);case"array":return s(Md(m),p)}throw new Error("Unrecognized type "+p.type)}function s(m,p){var _=m.split(/[\n\r]+/),w=-1,b=-1,k=0,F=0,N=[],B=[],X=null,G={},P=[],A=[],T=[],O=0,I;for(+p.codepage>=0&&sc(+p.codepage);k!==_.length;++k){O=0;var D=_[k].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),M=D.replace(/;;/g,"\0").split(";").map(function(Y){return Y.replace(/\u0000/g,";")}),ie=M[0],be;if(D.length>0)switch(ie){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":M[1].charAt(0)=="P"&&B.push(D.slice(3).replace(/;;/g,";"));break;case"C":var Ne=!1,we=!1,le=!1,J=!1,ue=-1,ee=-1;for(F=1;F<M.length;++F)switch(M[F].charAt(0)){case"A":break;case"X":b=parseInt(M[F].slice(1))-1,we=!0;break;case"Y":for(w=parseInt(M[F].slice(1))-1,we||(b=0),I=N.length;I<=w;++I)N[I]=[];break;case"K":be=M[F].slice(1),be.charAt(0)==='"'?be=be.slice(1,be.length-1):be==="TRUE"?be=!0:be==="FALSE"?be=!1:isNaN(lc(be))?isNaN(Rp(be).getDate())||(be=gi(be)):(be=lc(be),X!==null&&r1(X)&&(be=my(be))),Ne=!0;break;case"E":J=!0;var C=op(M[F].slice(1),{r:w,c:b});N[w][b]=[N[w][b],C];break;case"S":le=!0,N[w][b]=[N[w][b],"S5S"];break;case"G":break;case"R":ue=parseInt(M[F].slice(1))-1;break;case"C":ee=parseInt(M[F].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+D)}if(Ne&&(N[w][b]&&N[w][b].length==2?N[w][b][0]=be:N[w][b]=be,X=null),le){if(J)throw new Error("SYLK shared formula cannot have own formula");var U=ue>-1&&N[ue][ee];if(!U||!U[1])throw new Error("SYLK shared formula cannot find base");N[w][b][1]=hF(U[1],{r:w-ue,c:b-ee})}break;case"F":var W=0;for(F=1;F<M.length;++F)switch(M[F].charAt(0)){case"X":b=parseInt(M[F].slice(1))-1,++W;break;case"Y":for(w=parseInt(M[F].slice(1))-1,I=N.length;I<=w;++I)N[I]=[];break;case"M":O=parseInt(M[F].slice(1))/20;break;case"F":break;case"G":break;case"P":X=B[parseInt(M[F].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=M[F].slice(1).split(" "),I=parseInt(T[0],10);I<=parseInt(T[1],10);++I)O=parseInt(T[2],10),A[I-1]=O===0?{hidden:!0}:{wch:O},ph(A[I-1]);break;case"C":b=parseInt(M[F].slice(1))-1,A[b]||(A[b]={});break;case"R":w=parseInt(M[F].slice(1))-1,P[w]||(P[w]={}),O>0?(P[w].hpt=O,P[w].hpx=Lp(O)):O===0&&(P[w].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+D)}W<1&&(X=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+D)}}return P.length>0&&(G["!rows"]=P),A.length>0&&(G["!cols"]=A),p&&p.sheetRows&&(N=N.slice(0,p.sheetRows)),[N,G]}function a(m,p){var _=i(m,p),w=_[0],b=_[1],k=i1(w,p);return es(b).forEach(function(F){k[F]=b[F]}),k}function o(m,p){return Ih(a(m,p),p)}function l(m,p,_,w){var b="C;Y"+(_+1)+";X"+(w+1)+";K";switch(m.t){case"n":b+=m.v||0,m.f&&!m.F&&(b+=";E"+u3(m.f,{r:_,c:w}));break;case"b":b+=m.v?"TRUE":"FALSE";break;case"e":b+=m.w||m.v;break;case"d":b+='"'+(m.w||m.v)+'"';break;case"s":b+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function c(m,p){p.forEach(function(_,w){var b="F;W"+(w+1)+" "+(w+1)+" ";_.hidden?b+="0":(typeof _.width=="number"&&!_.wpx&&(_.wpx=Ym(_.width)),typeof _.wpx=="number"&&!_.wch&&(_.wch=Qm(_.wpx)),typeof _.wch=="number"&&(b+=Math.round(_.wch))),b.charAt(b.length-1)!=" "&&m.push(b)})}function f(m,p){p.forEach(function(_,w){var b="F;";_.hidden?b+="M0;":_.hpt?b+="M"+20*_.hpt+";":_.hpx&&(b+="M"+20*Jm(_.hpx)+";"),b.length>2&&m.push(b+"R"+(w+1))})}function d(m,p){var _=["ID;PWXL;N;E"],w=[],b=_n(m["!ref"]),k,F=Array.isArray(m),N=`\r
`;_.push("P;PGeneral"),_.push("F;P0;DG0G8;M255"),m["!cols"]&&c(_,m["!cols"]),m["!rows"]&&f(_,m["!rows"]),_.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var B=b.s.r;B<=b.e.r;++B)for(var X=b.s.c;X<=b.e.c;++X){var G=Ir({r:B,c:X});k=F?(m[B]||[])[X]:m[G],!(!k||k.v==null&&(!k.f||k.F))&&w.push(l(k,m,B,X))}return _.join(N)+N+w.join(N)+N+"E"+N}return{to_workbook:o,to_sheet:a,from_sheet:d}})(),XR=(function(){function t(s,a){switch(a.type){case"base64":return e(ul(s),a);case"binary":return e(s,a);case"buffer":return e(Kr&&Buffer.isBuffer(s)?s.toString("binary"):Ch(s),a);case"array":return e(Md(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),l=-1,c=-1,f=0,d=[];f!==o.length;++f){if(o[f].trim()==="BOT"){d[++l]=[],c=0;continue}if(!(l<0)){var m=o[f].trim().split(","),p=m[0],_=m[1];++f;for(var w=o[f]||"";(w.match(/["]/g)||[]).length&1&&f<o.length-1;)w+=`
`+o[++f];switch(w=w.trim(),+p){case-1:if(w==="BOT"){d[++l]=[],c=0;continue}else if(w!=="EOD")throw new Error("Unrecognized DIF special command "+w);break;case 0:w==="TRUE"?d[l][c]=!0:w==="FALSE"?d[l][c]=!1:isNaN(lc(_))?isNaN(Rp(_).getDate())?d[l][c]=_:d[l][c]=gi(_):d[l][c]=lc(_),++c;break;case 1:w=w.slice(1,w.length-1),w=w.replace(/""/g,'"'),w&&w.match(/^=".*"$/)&&(w=w.slice(2,-1)),d[l][c++]=w!==""?w:null;break}if(w==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function r(s,a){return i1(t(s,a),a)}function n(s,a){return Ih(r(s,a),a)}var i=(function(){var s=function(l,c,f,d,m){l.push(c),l.push(f+","+d),l.push('"'+m.replace(/"/g,'""')+'"')},a=function(l,c,f,d){l.push(c+","+f),l.push(c==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var c=[],f=_n(l["!ref"]),d,m=Array.isArray(l);s(c,"TABLE",0,1,"sheetjs"),s(c,"VECTORS",0,f.e.r-f.s.r+1,""),s(c,"TUPLES",0,f.e.c-f.s.c+1,""),s(c,"DATA",0,0,"");for(var p=f.s.r;p<=f.e.r;++p){a(c,-1,0,"BOT");for(var _=f.s.c;_<=f.e.c;++_){var w=Ir({r:p,c:_});if(d=m?(l[p]||[])[_]:l[w],!d){a(c,1,0,"");continue}switch(d.t){case"n":var b=d.w;!b&&d.v!=null&&(b=d.v),b==null?d.f&&!d.F?a(c,1,0,"="+d.f):a(c,1,0,""):a(c,0,b,"V");break;case"b":a(c,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(c,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=Dl(d.z||Tr[14],$s(gi(d.v)))),a(c,0,d.w,"V");break;default:a(c,1,0,"")}}}a(c,-1,0,"EOD");var k=`\r
`,F=c.join(k);return F}})();return{to_workbook:n,to_sheet:r,from_sheet:i}})(),YR=(function(){function t(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(d,m){for(var p=d.split(`
`),_=-1,w=-1,b=0,k=[];b!==p.length;++b){var F=p[b].trim().split(":");if(F[0]==="cell"){var N=Ui(F[1]);if(k.length<=N.r)for(_=k.length;_<=N.r;++_)k[_]||(k[_]=[]);switch(_=N.r,w=N.c,F[2]){case"t":k[_][w]=t(F[3]);break;case"v":k[_][w]=+F[3];break;case"vtf":var B=F[F.length-1];case"vtc":switch(F[3]){case"nl":k[_][w]=!!+F[4];break;default:k[_][w]=+F[4];break}F[2]=="vtf"&&(k[_][w]=[k[_][w],B])}}}return m&&m.sheetRows&&(k=k.slice(0,m.sheetRows)),k}function n(d,m){return i1(r(d,m),m)}function i(d,m){return Ih(n(d,m),m)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(d){if(!d||!d["!ref"])return"";for(var m=[],p=[],_,w="",b=Mo(d["!ref"]),k=Array.isArray(d),F=b.s.r;F<=b.e.r;++F)for(var N=b.s.c;N<=b.e.c;++N)if(w=Ir({r:F,c:N}),_=k?(d[F]||[])[N]:d[w],!(!_||_.v==null||_.t==="z")){switch(p=["cell",w,"t"],_.t){case"s":case"str":p.push(e(_.v));break;case"n":_.f?(p[2]="vtf",p[3]="n",p[4]=_.v,p[5]=e(_.f)):(p[2]="v",p[3]=_.v);break;case"b":p[2]="vt"+(_.f?"f":"c"),p[3]="nl",p[4]=_.v?"1":"0",p[5]=e(_.f||(_.v?"TRUE":"FALSE"));break;case"d":var B=$s(gi(_.v));p[2]="vtc",p[3]="nd",p[4]=""+B,p[5]=_.w||Dl(_.z||Tr[14],B);break;case"e":continue}m.push(p.join(":"))}return m.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function f(d){return[s,a,o,a,c(d),l].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:f}})(),Fp=(function(){function t(f,d,m,p,_){_.raw?d[m][p]=f:f===""||(f==="TRUE"?d[m][p]=!0:f==="FALSE"?d[m][p]=!1:isNaN(lc(f))?isNaN(Rp(f).getDate())?d[m][p]=f:d[m][p]=gi(f):d[m][p]=lc(f))}function e(f,d){var m=d||{},p=[];if(!f||f.length===0)return p;for(var _=f.split(/[\r\n]/),w=_.length-1;w>=0&&_[w].length===0;)--w;for(var b=10,k=0,F=0;F<=w;++F)k=_[F].indexOf(" "),k==-1?k=_[F].length:k++,b=Math.max(b,k);for(F=0;F<=w;++F){p[F]=[];var N=0;for(t(_[F].slice(0,b).trim(),p,F,N,m),N=1;N<=(_[F].length-b)/10+1;++N)t(_[F].slice(b+(N-1)*10,b+N*10).trim(),p,F,N,m)}return m.sheetRows&&(p=p.slice(0,m.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(f){for(var d={},m=!1,p=0,_=0;p<f.length;++p)(_=f.charCodeAt(p))==34?m=!m:!m&&_ in r&&(d[_]=(d[_]||0)+1);_=[];for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&_.push([d[p],p]);if(!_.length){d=n;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&_.push([d[p],p])}return _.sort(function(w,b){return w[0]-b[0]||n[w[1]]-n[b[1]]}),r[_.pop()[1]]||44}function s(f,d){var m=d||{},p="",_=m.dense?[]:{},w={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(p=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(p=f.charAt(4),f=f.slice(6)):p=i(f.slice(0,1024)):m&&m.FS?p=m.FS:p=i(f.slice(0,1024));var b=0,k=0,F=0,N=0,B=0,X=p.charCodeAt(0),G=!1,P=0,A=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var T=m.dateNF!=null?QY(m.dateNF):null;function O(){var I=f.slice(N,B),D={};if(I.charAt(0)=='"'&&I.charAt(I.length-1)=='"'&&(I=I.slice(1,-1).replace(/""/g,'"')),I.length===0)D.t="z";else if(m.raw)D.t="s",D.v=I;else if(I.trim().length===0)D.t="s",D.v=I;else if(I.charCodeAt(0)==61)I.charCodeAt(1)==34&&I.charCodeAt(I.length-1)==34?(D.t="s",D.v=I.slice(2,-1).replace(/""/g,'"')):Tre(I)?(D.t="n",D.f=I.slice(1)):(D.t="s",D.v=I);else if(I=="TRUE")D.t="b",D.v=!0;else if(I=="FALSE")D.t="b",D.v=!1;else if(!isNaN(F=lc(I)))D.t="n",m.cellText!==!1&&(D.w=I),D.v=F;else if(!isNaN(Rp(I).getDate())||T&&I.match(T)){D.z=m.dateNF||Tr[14];var M=0;T&&I.match(T)&&(I=JY(I,m.dateNF,I.match(T)||[]),M=1),m.cellDates?(D.t="d",D.v=gi(I,M)):(D.t="n",D.v=$s(gi(I,M))),m.cellText!==!1&&(D.w=Dl(D.z,D.v instanceof Date?$s(D.v):D.v)),m.cellNF||delete D.z}else D.t="s",D.v=I;if(D.t=="z"||(m.dense?(_[b]||(_[b]=[]),_[b][k]=D):_[Ir({c:k,r:b})]=D),N=B+1,A=f.charCodeAt(N),w.e.c<k&&(w.e.c=k),w.e.r<b&&(w.e.r=b),P==X)++k;else if(k=0,++b,m.sheetRows&&m.sheetRows<=b)return!0}e:for(;B<f.length;++B)switch(P=f.charCodeAt(B)){case 34:A===34&&(G=!G);break;case X:case 10:case 13:if(!G&&O())break e;break}return B-N>0&&O(),_["!ref"]=Vr(w),_}function a(f,d){return!(d&&d.PRN)||d.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?s(f,d):i1(e(f,d),d)}function o(f,d){var m="",p=d.type=="string"?[0,0,0,0]:v3(f,d);switch(d.type){case"base64":m=ul(f);break;case"binary":m=f;break;case"buffer":d.codepage==65001?m=f.toString("utf8"):d.codepage&&typeof zm<"u"||(m=Kr&&Buffer.isBuffer(f)?f.toString("binary"):Ch(f));break;case"array":m=Md(f);break;case"string":m=f;break;default:throw new Error("Unrecognized type "+d.type)}return p[0]==239&&p[1]==187&&p[2]==191?m=Xn(m.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?m=Xn(m):d.type=="binary"&&typeof zm<"u",m.slice(0,19)=="socialcalc:version:"?YR.to_sheet(d.type=="string"?m:Xn(m),d):a(m,d)}function l(f,d){return Ih(o(f,d),d)}function c(f){for(var d=[],m=_n(f["!ref"]),p,_=Array.isArray(f),w=m.s.r;w<=m.e.r;++w){for(var b=[],k=m.s.c;k<=m.e.c;++k){var F=Ir({r:w,c:k});if(p=_?(f[w]||[])[k]:f[F],!p||p.v==null){b.push("          ");continue}for(var N=(p.w||($u(p),p.w)||"").slice(0,10);N.length<10;)N+=" ";b.push(N+(k===0?" ":""))}d.push(b.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}})();function hee(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var i=KR.to_workbook(t,r);return r.WTF=n,i}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return Fp.to_workbook(t,e)}}var xd=(function(){function t(C,U,W){if(C){Ea(C,C.l||0);for(var Y=W.Enum||ue;C.l<C.length;){var ae=C.read_shift(2),pe=Y[ae]||Y[65535],he=C.read_shift(2),xe=C.l+he,Ee=pe.f&&pe.f(C,he,W);if(C.l=xe,U(Ee,pe,ae))return}}}function e(C,U){switch(U.type){case"base64":return r(nl(ul(C)),U);case"binary":return r(nl(C),U);case"buffer":case"array":return r(C,U)}throw"Unsupported type "+U.type}function r(C,U){if(!C)return C;var W=U||{},Y=W.dense?[]:{},ae="Sheet1",pe="",he=0,xe={},Ee=[],Fe=[],oe={s:{r:0,c:0},e:{r:0,c:0}},Je=W.sheetRows||0;if(C[2]==0&&(C[3]==8||C[3]==9)&&C.length>=16&&C[14]==5&&C[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(C[2]==2)W.Enum=ue,t(C,function(et,st,K){switch(K){case 0:W.vers=et,et>=4096&&(W.qpro=!0);break;case 6:oe=et;break;case 204:et&&(pe=et);break;case 222:pe=et;break;case 15:case 51:W.qpro||(et[1].v=et[1].v.slice(1));case 13:case 14:case 16:K==14&&(et[2]&112)==112&&(et[2]&15)>1&&(et[2]&15)<15&&(et[1].z=W.dateNF||Tr[14],W.cellDates&&(et[1].t="d",et[1].v=my(et[1].v))),W.qpro&&et[3]>he&&(Y["!ref"]=Vr(oe),xe[ae]=Y,Ee.push(ae),Y=W.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},he=et[3],ae=pe||"Sheet"+(he+1),pe="");var Te=W.dense?(Y[et[0].r]||[])[et[0].c]:Y[Ir(et[0])];if(Te){Te.t=et[1].t,Te.v=et[1].v,et[1].z!=null&&(Te.z=et[1].z),et[1].f!=null&&(Te.f=et[1].f);break}W.dense?(Y[et[0].r]||(Y[et[0].r]=[]),Y[et[0].r][et[0].c]=et[1]):Y[Ir(et[0])]=et[1];break}},W);else if(C[2]==26||C[2]==14)W.Enum=ee,C[2]==14&&(W.qpro=!0,C.l=0),t(C,function(et,st,K){switch(K){case 204:ae=et;break;case 22:et[1].v=et[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(et[3]>he&&(Y["!ref"]=Vr(oe),xe[ae]=Y,Ee.push(ae),Y=W.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},he=et[3],ae="Sheet"+(he+1)),Je>0&&et[0].r>=Je)break;W.dense?(Y[et[0].r]||(Y[et[0].r]=[]),Y[et[0].r][et[0].c]=et[1]):Y[Ir(et[0])]=et[1],oe.e.c<et[0].c&&(oe.e.c=et[0].c),oe.e.r<et[0].r&&(oe.e.r=et[0].r);break;case 27:et[14e3]&&(Fe[et[14e3][0]]=et[14e3][1]);break;case 1537:Fe[et[0]]=et[1],et[0]==he&&(ae=et[1]);break}},W);else throw new Error("Unrecognized LOTUS BOF "+C[2]);if(Y["!ref"]=Vr(oe),xe[pe||ae]=Y,Ee.push(pe||ae),!Fe.length)return{SheetNames:Ee,Sheets:xe};for(var Re={},fe=[],ot=0;ot<Fe.length;++ot)xe[Ee[ot]]?(fe.push(Fe[ot]||Ee[ot]),Re[Fe[ot]]=xe[Fe[ot]]||xe[Ee[ot]]):(fe.push(Fe[ot]),Re[Fe[ot]]={"!ref":"A1"});return{SheetNames:fe,Sheets:Re}}function n(C,U){var W=U||{};if(+W.codepage>=0&&sc(+W.codepage),W.type=="string")throw new Error("Cannot write WK1 to JS string");var Y=Oo(),ae=_n(C["!ref"]),pe=Array.isArray(C),he=[];Ut(Y,0,s(1030)),Ut(Y,6,l(ae));for(var xe=Math.min(ae.e.r,8191),Ee=ae.s.r;Ee<=xe;++Ee)for(var Fe=xs(Ee),oe=ae.s.c;oe<=ae.e.c;++oe){Ee===ae.s.r&&(he[oe]=Vi(oe));var Je=he[oe]+Fe,Re=pe?(C[Ee]||[])[oe]:C[Je];if(!(!Re||Re.t=="z"))if(Re.t=="n")(Re.v|0)==Re.v&&Re.v>=-32768&&Re.v<=32767?Ut(Y,13,p(Ee,oe,Re.v)):Ut(Y,14,w(Ee,oe,Re.v));else{var fe=$u(Re);Ut(Y,15,d(Ee,oe,fe.slice(0,239)))}}return Ut(Y,1),Y.end()}function i(C,U){var W=U||{};if(+W.codepage>=0&&sc(+W.codepage),W.type=="string")throw new Error("Cannot write WK3 to JS string");var Y=Oo();Ut(Y,0,a(C));for(var ae=0,pe=0;ae<C.SheetNames.length;++ae)(C.Sheets[C.SheetNames[ae]]||{})["!ref"]&&Ut(Y,27,J(C.SheetNames[ae],pe++));var he=0;for(ae=0;ae<C.SheetNames.length;++ae){var xe=C.Sheets[C.SheetNames[ae]];if(!(!xe||!xe["!ref"])){for(var Ee=_n(xe["!ref"]),Fe=Array.isArray(xe),oe=[],Je=Math.min(Ee.e.r,8191),Re=Ee.s.r;Re<=Je;++Re)for(var fe=xs(Re),ot=Ee.s.c;ot<=Ee.e.c;++ot){Re===Ee.s.r&&(oe[ot]=Vi(ot));var et=oe[ot]+fe,st=Fe?(xe[Re]||[])[ot]:xe[et];if(!(!st||st.t=="z"))if(st.t=="n")Ut(Y,23,O(Re,ot,he,st.v));else{var K=$u(st);Ut(Y,22,P(Re,ot,he,K.slice(0,239)))}}++he}}return Ut(Y,1),Y.end()}function s(C){var U=ft(2);return U.write_shift(2,C),U}function a(C){var U=ft(26);U.write_shift(2,4096),U.write_shift(2,4),U.write_shift(4,0);for(var W=0,Y=0,ae=0,pe=0;pe<C.SheetNames.length;++pe){var he=C.SheetNames[pe],xe=C.Sheets[he];if(!(!xe||!xe["!ref"])){++ae;var Ee=Mo(xe["!ref"]);W<Ee.e.r&&(W=Ee.e.r),Y<Ee.e.c&&(Y=Ee.e.c)}}return W>8191&&(W=8191),U.write_shift(2,W),U.write_shift(1,ae),U.write_shift(1,Y),U.write_shift(2,0),U.write_shift(2,0),U.write_shift(1,1),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(4,0),U}function o(C,U,W){var Y={s:{c:0,r:0},e:{c:0,r:0}};return U==8&&W.qpro?(Y.s.c=C.read_shift(1),C.l++,Y.s.r=C.read_shift(2),Y.e.c=C.read_shift(1),C.l++,Y.e.r=C.read_shift(2),Y):(Y.s.c=C.read_shift(2),Y.s.r=C.read_shift(2),U==12&&W.qpro&&(C.l+=2),Y.e.c=C.read_shift(2),Y.e.r=C.read_shift(2),U==12&&W.qpro&&(C.l+=2),Y.s.c==65535&&(Y.s.c=Y.e.c=Y.s.r=Y.e.r=0),Y)}function l(C){var U=ft(8);return U.write_shift(2,C.s.c),U.write_shift(2,C.s.r),U.write_shift(2,C.e.c),U.write_shift(2,C.e.r),U}function c(C,U,W){var Y=[{c:0,r:0},{t:"n",v:0},0,0];return W.qpro&&W.vers!=20768?(Y[0].c=C.read_shift(1),Y[3]=C.read_shift(1),Y[0].r=C.read_shift(2),C.l+=2):(Y[2]=C.read_shift(1),Y[0].c=C.read_shift(2),Y[0].r=C.read_shift(2)),Y}function f(C,U,W){var Y=C.l+U,ae=c(C,U,W);if(ae[1].t="s",W.vers==20768){C.l++;var pe=C.read_shift(1);return ae[1].v=C.read_shift(pe,"utf8"),ae}return W.qpro&&C.l++,ae[1].v=C.read_shift(Y-C.l,"cstr"),ae}function d(C,U,W){var Y=ft(7+W.length);Y.write_shift(1,255),Y.write_shift(2,U),Y.write_shift(2,C),Y.write_shift(1,39);for(var ae=0;ae<Y.length;++ae){var pe=W.charCodeAt(ae);Y.write_shift(1,pe>=128?95:pe)}return Y.write_shift(1,0),Y}function m(C,U,W){var Y=c(C,U,W);return Y[1].v=C.read_shift(2,"i"),Y}function p(C,U,W){var Y=ft(7);return Y.write_shift(1,255),Y.write_shift(2,U),Y.write_shift(2,C),Y.write_shift(2,W,"i"),Y}function _(C,U,W){var Y=c(C,U,W);return Y[1].v=C.read_shift(8,"f"),Y}function w(C,U,W){var Y=ft(13);return Y.write_shift(1,255),Y.write_shift(2,U),Y.write_shift(2,C),Y.write_shift(8,W,"f"),Y}function b(C,U,W){var Y=C.l+U,ae=c(C,U,W);if(ae[1].v=C.read_shift(8,"f"),W.qpro)C.l=Y;else{var pe=C.read_shift(2);B(C.slice(C.l,C.l+pe),ae),C.l+=pe}return ae}function k(C,U,W){var Y=U&32768;return U&=-32769,U=(Y?C:0)+(U>=8192?U-16384:U),(Y?"":"$")+(W?Vi(U):xs(U))}var F={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},N=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function B(C,U){Ea(C,0);for(var W=[],Y=0,ae="",pe="",he="",xe="";C.l<C.length;){var Ee=C[C.l++];switch(Ee){case 0:W.push(C.read_shift(8,"f"));break;case 1:pe=k(U[0].c,C.read_shift(2),!0),ae=k(U[0].r,C.read_shift(2),!1),W.push(pe+ae);break;case 2:{var Fe=k(U[0].c,C.read_shift(2),!0),oe=k(U[0].r,C.read_shift(2),!1);pe=k(U[0].c,C.read_shift(2),!0),ae=k(U[0].r,C.read_shift(2),!1),W.push(Fe+oe+":"+pe+ae)}break;case 3:if(C.l<C.length){console.error("WK1 premature formula end");return}break;case 4:W.push("("+W.pop()+")");break;case 5:W.push(C.read_shift(2));break;case 6:{for(var Je="";Ee=C[C.l++];)Je+=String.fromCharCode(Ee);W.push('"'+Je.replace(/"/g,'""')+'"')}break;case 8:W.push("-"+W.pop());break;case 23:W.push("+"+W.pop());break;case 22:W.push("NOT("+W.pop()+")");break;case 20:case 21:xe=W.pop(),he=W.pop(),W.push(["AND","OR"][Ee-20]+"("+he+","+xe+")");break;default:if(Ee<32&&N[Ee])xe=W.pop(),he=W.pop(),W.push(he+N[Ee]+xe);else if(F[Ee]){if(Y=F[Ee][1],Y==69&&(Y=C[C.l++]),Y>W.length){console.error("WK1 bad formula parse 0x"+Ee.toString(16)+":|"+W.join("|")+"|");return}var Re=W.slice(-Y);W.length-=Y,W.push(F[Ee][0]+"("+Re.join(",")+")")}else return Ee<=7?console.error("WK1 invalid opcode "+Ee.toString(16)):Ee<=24?console.error("WK1 unsupported op "+Ee.toString(16)):Ee<=30?console.error("WK1 invalid opcode "+Ee.toString(16)):Ee<=115?console.error("WK1 unsupported function opcode "+Ee.toString(16)):console.error("WK1 unrecognized opcode "+Ee.toString(16))}}W.length==1?U[1].f=""+W[0]:console.error("WK1 bad formula parse |"+W.join("|")+"|")}function X(C){var U=[{c:0,r:0},{t:"n",v:0},0];return U[0].r=C.read_shift(2),U[3]=C[C.l++],U[0].c=C[C.l++],U}function G(C,U){var W=X(C);return W[1].t="s",W[1].v=C.read_shift(U-4,"cstr"),W}function P(C,U,W,Y){var ae=ft(6+Y.length);ae.write_shift(2,C),ae.write_shift(1,W),ae.write_shift(1,U),ae.write_shift(1,39);for(var pe=0;pe<Y.length;++pe){var he=Y.charCodeAt(pe);ae.write_shift(1,he>=128?95:he)}return ae.write_shift(1,0),ae}function A(C,U){var W=X(C);W[1].v=C.read_shift(2);var Y=W[1].v>>1;if(W[1].v&1)switch(Y&7){case 0:Y=(Y>>3)*5e3;break;case 1:Y=(Y>>3)*500;break;case 2:Y=(Y>>3)/20;break;case 3:Y=(Y>>3)/200;break;case 4:Y=(Y>>3)/2e3;break;case 5:Y=(Y>>3)/2e4;break;case 6:Y=(Y>>3)/16;break;case 7:Y=(Y>>3)/64;break}return W[1].v=Y,W}function T(C,U){var W=X(C),Y=C.read_shift(4),ae=C.read_shift(4),pe=C.read_shift(2);if(pe==65535)return Y===0&&ae===3221225472?(W[1].t="e",W[1].v=15):Y===0&&ae===3489660928?(W[1].t="e",W[1].v=42):W[1].v=0,W;var he=pe&32768;return pe=(pe&32767)-16446,W[1].v=(1-he*2)*(ae*Math.pow(2,pe+32)+Y*Math.pow(2,pe)),W}function O(C,U,W,Y){var ae=ft(14);if(ae.write_shift(2,C),ae.write_shift(1,W),ae.write_shift(1,U),Y==0)return ae.write_shift(4,0),ae.write_shift(4,0),ae.write_shift(2,65535),ae;var pe=0,he=0,xe=0,Ee=0;return Y<0&&(pe=1,Y=-Y),he=Math.log2(Y)|0,Y/=Math.pow(2,he-31),Ee=Y>>>0,(Ee&2147483648)==0&&(Y/=2,++he,Ee=Y>>>0),Y-=Ee,Ee|=2147483648,Ee>>>=0,Y*=Math.pow(2,32),xe=Y>>>0,ae.write_shift(4,xe),ae.write_shift(4,Ee),he+=16383+(pe?32768:0),ae.write_shift(2,he),ae}function I(C,U){var W=T(C);return C.l+=U-14,W}function D(C,U){var W=X(C),Y=C.read_shift(4);return W[1].v=Y>>6,W}function M(C,U){var W=X(C),Y=C.read_shift(8,"f");return W[1].v=Y,W}function ie(C,U){var W=M(C);return C.l+=U-10,W}function be(C,U){return C[C.l+U-1]==0?C.read_shift(U,"cstr"):""}function Ne(C,U){var W=C[C.l++];W>U-1&&(W=U-1);for(var Y="";Y.length<W;)Y+=String.fromCharCode(C[C.l++]);return Y}function we(C,U,W){if(!(!W.qpro||U<21)){var Y=C.read_shift(1);C.l+=17,C.l+=1,C.l+=2;var ae=C.read_shift(U-21,"cstr");return[Y,ae]}}function le(C,U){for(var W={},Y=C.l+U;C.l<Y;){var ae=C.read_shift(2);if(ae==14e3){for(W[ae]=[0,""],W[ae][0]=C.read_shift(2);C[C.l];)W[ae][1]+=String.fromCharCode(C[C.l]),C.l++;C.l++}}return W}function J(C,U){var W=ft(5+C.length);W.write_shift(2,14e3),W.write_shift(2,U);for(var Y=0;Y<C.length;++Y){var ae=C.charCodeAt(Y);W[W.l++]=ae>127?95:ae}return W[W.l++]=0,W}var ue={0:{n:"BOF",f:Cs},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:_},15:{n:"LABEL",f},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:be},222:{n:"SHEETNAMELP",f:Ne},65535:{n:""}},ee={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:G},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:I},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:le},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:D},38:{n:"??"},39:{n:"NUMBER27",f:M},40:{n:"FORMULA28",f:ie},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:be},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:we},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:e}})();function dee(t){var e={},r=t.match(lo),n=0,i=!1;if(r)for(;n!=r.length;++n){var s=Nr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=Db[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s[0].charCodeAt(1)!==47&&!i)throw new Error("Unrecognized rich format "+s[0])}}return e}var pee=(function(){var t=Wm("t"),e=Wm("rPr");function r(s){var a=s.match(t);if(!a)return{t:"s",v:""};var o={t:"s",v:wn(a[1])},l=s.match(e);return l&&(o.s=dee(l[1])),o}var n=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(a){return a.replace(n,"").split(i).map(r).filter(function(o){return o.v})}})(),mee=(function(){var e=/(\r\n|\n)/g;function r(i,s,a){var o=[];i.u&&o.push("text-decoration: underline;"),i.uval&&o.push("text-underline-style:"+i.uval+";"),i.sz&&o.push("font-size:"+i.sz+"pt;"),i.outline&&o.push("text-effect: outline;"),i.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),i.b&&(s.push("<b>"),a.push("</b>")),i.i&&(s.push("<i>"),a.push("</i>")),i.strike&&(s.push("<s>"),a.push("</s>"));var l=i.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(s.push("<"+l+">"),a.push("</"+l+">")),a.push("</span>"),i}function n(i){var s=[[],i.v,[]];return i.v?(i.s&&r(i.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}})(),gee=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,xee=/<(?:\w+:)?r>/,vee=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function s3(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=wn(Xn(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Xn(t),r&&(n.h=Wb(n.t))):t.match(xee)&&(n.r=Xn(t),n.t=wn(Xn((t.replace(vee,"").match(gee)||[]).join("").replace(lo,""))),r&&(n.h=mee(pee(n.r)))),n):{t:""}}var yee=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,wee=/<(?:\w+:)?(?:si|sstItem)>/g,_ee=/<\/(?:\w+:)?(?:si|sstItem)>/;function bee(t,e){var r=[],n="";if(!t)return r;var i=t.match(yee);if(i){n=i[2].replace(wee,"").split(_ee);for(var s=0;s!=n.length;++s){var a=s3(n[s].trim(),e);a!=null&&(r[r.length]=a)}i=Nr(i[1]),r.Count=i.count,r.Unique=i.uniqueCount}return r}var Eee=/^\s|\s$|[\t\n\r]/;function QR(t,e){if(!e.bookSST)return"";var r=[vs];r[r.length]=Bt("sst",null,{xmlns:Xd[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var i=t[n],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(Eee)&&(s+=' xml:space="preserve"'),s+=">"+Hn(i.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function See(t){return[t.read_shift(4),t.read_shift(4)]}function kee(t,e){var r=[],n=!1;return Zu(t,function(s,a,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(a.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Tee(t,e){return e||(e=ft(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var Aee=MQ;function Cee(t){var e=Oo();bt(e,159,Tee(t));for(var r=0;r<t.length;++r)bt(e,19,Aee(t[r]));return bt(e,160),e.end()}function JR(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function ju(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function Iee(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=ju(t,4),e.U=ju(t,4),e.W=ju(t,4),e}function Nee(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},i=t.read_shift(4),s=[];i-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function Pee(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(Nee(t));return e}function Ree(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function Fee(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=ju(t,4),e.U=ju(t,4),e.W=ju(t,4),e}function Lee(t){var e=Fee(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function ZR(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var i=!1;switch(n.AlgID){case 26126:case 26127:case 26128:i=n.Flags==36;break;case 26625:i=n.Flags==4;break;case 0:i=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function eF(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function Dee(t){var e=ju(t);switch(e.Minor){case 2:return[e.Minor,Oee(t)];case 3:return[e.Minor,Mee()];case 4:return[e.Minor,jee(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function Oee(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=ZR(t,r),i=eF(t,t.length-t.l);return{t:"Std",h:n,v:i}}function Mee(){throw new Error("File is password-protected: ECMA-376 Extensible")}function jee(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(lo,function(s){var a=Nr(s);switch(su(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=a[o]});break;case"<dataIntegrity":n.encryptedHmacKey=a.encryptedHmacKey,n.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(a);break;default:throw a[0]}}),n}function Bee(t,e){var r={},n=r.EncryptionVersionInfo=ju(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var i=t.read_shift(4);return e-=4,r.EncryptionHeader=ZR(t,i),e-=i,r.EncryptionVerifier=eF(t,e),r}function Vee(t){var e={},r=e.EncryptionVersionInfo=ju(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function a3(t){var e=0,r,n=JR(t),i=n.length+1,s,a,o,l,c;for(r=dh(i),r[0]=n.length,s=1;s!=i;++s)r[s]=n[s-1];for(s=i-1;s>=0;--s)a=r[s],o=(e&16384)===0?0:1,l=e<<1&32767,c=o|l,e=c^a;return e^52811}var tF=(function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(a){return(a/2|a*128)&255},i=function(a,o){return n(a^o)},s=function(a){for(var o=e[a.length-1],l=104,c=a.length-1;c>=0;--c)for(var f=a[c],d=0;d!=7;++d)f&64&&(o^=r[l]),f*=2,--l;return o};return function(a){for(var o=JR(a),l=s(o),c=o.length,f=dh(16),d=0;d!=16;++d)f[d]=0;var m,p,_;for((c&1)===1&&(m=l>>8,f[c]=i(t[0],m),--c,m=l&255,p=o[o.length-1],f[c]=i(p,m));c>0;)--c,m=l>>8,f[c]=i(o[c],m),--c,m=l&255,f[c]=i(o[c],m);for(c=15,_=15-o.length;_>0;)m=l>>8,f[c]=i(t[_],m),--c,--_,m=l&255,f[c]=i(o[c],m),--c,--_;return f}})(),Uee=function(t,e,r,n,i){i||(i=e),n||(n=tF(t));var s,a;for(s=0;s!=e.length;++s)a=e[s],a^=n[r],a=(a>>5|a<<3)&255,i[s]=a,++r;return[i,r,n]},zee=function(t){var e=0,r=tF(t);return function(n){var i=Uee("",n,e,r);return e=i[1],i[0]}};function $ee(t,e,r,n){var i={key:Cs(t),verificationBytes:Cs(t)};return r.password&&(i.verifier=a3(r.password)),n.valid=i.verificationBytes===i.verifier,n.valid&&(n.insitu=zee(r.password)),i}function Hee(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=Vee(t):n.Data=Bee(t,e),n}function Wee(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?Hee(t,e-2,n):$ee(t,r.biff>=8?e:e-2,r,n),n}var rF=(function(){function t(i,s){switch(s.type){case"base64":return e(ul(i),s);case"binary":return e(i,s);case"buffer":return e(Kr&&Buffer.isBuffer(i)?i.toString("binary"):Ch(i),s);case"array":return e(Md(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(f,d){Array.isArray(o)&&(o[d]=[]);for(var m=/\\\w+\b/g,p=0,_,w=-1;_=m.exec(f);){switch(_[0]){case"\\cell":var b=f.slice(p,m.lastIndex-_[0].length);if(b[0]==" "&&(b=b.slice(1)),++w,b.length){var k={v:b,t:"s"};Array.isArray(o)?o[d][w]=k:o[Ir({r:d,c:w})]=k}break}p=m.lastIndex}w>c.e.c&&(c.e.c=w)}),o["!ref"]=Vr(c),o}function r(i,s){return Ih(t(i,s),s)}function n(i){for(var s=["{\\rtf1\\ansi"],a=_n(i["!ref"]),o,l=Array.isArray(i),c=a.s.r;c<=a.e.r;++c){s.push("\\trowd\\trautofit1");for(var f=a.s.c;f<=a.e.c;++f)s.push("\\cellx"+(f+1));for(s.push("\\pard\\intbl"),f=a.s.c;f<=a.e.c;++f){var d=Ir({r:c,c:f});o=l?(i[c]||[])[f]:i[d],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||($u(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}})();function qee(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function Xm(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function Gee(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(e,r,n),s=Math.min(e,r,n),a=i-s;if(a===0)return[0,0,e];var o=0,l=0,c=i+s;switch(l=a/(c>1?2-c:c),i){case e:o=((r-n)/a+6)%6;break;case r:o=(n-e)/a+2;break;case n:o=(e-r)/a+4;break}return[o/6,l,c/2]}function Kee(t){var e=t[0],r=t[1],n=t[2],i=r*2*(n<.5?n:1-n),s=n-i/2,a=[s,s,s],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=i*o,a[0]+=i,a[1]+=l;break;case 1:l=i*(2-o),a[0]+=l,a[1]+=i;break;case 2:l=i*(o-2),a[1]+=i,a[2]+=l;break;case 3:l=i*(4-o),a[1]+=l,a[2]+=i;break;case 4:l=i*(o-4),a[2]+=i,a[0]+=l;break;case 5:l=i*(6-o),a[2]+=l,a[0]+=i;break}for(var c=0;c!=3;++c)a[c]=Math.round(a[c]*255);return a}function mv(t,e){if(e===0)return t;var r=Gee(qee(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),Xm(Kee(r))}var nF=6,Xee=15,Yee=1,ro=nF;function Ym(t){return Math.floor((t+Math.round(128/ro)/256)*ro)}function Qm(t){return Math.floor((t-5)/ro*100+.5)/100}function gv(t){return Math.round((t*ro+5)/ro*256)/256}function Kw(t){return gv(Qm(Ym(t)))}function o3(t){var e=Math.abs(t-Kw(t)),r=ro;if(e>.005)for(ro=Yee;ro<Xee;++ro)Math.abs(t-Kw(t))<=e&&(e=Math.abs(t-Kw(t)),r=ro);ro=r}function ph(t){t.width?(t.wpx=Ym(t.width),t.wch=Qm(t.wpx),t.MDW=ro):t.wpx?(t.wch=Qm(t.wpx),t.width=gv(t.wch),t.MDW=ro):typeof t.wch=="number"&&(t.width=gv(t.wch),t.wpx=Ym(t.width),t.MDW=ro),t.customWidth&&delete t.customWidth}var Qee=96,iF=Qee;function Jm(t){return t*96/iF}function Lp(t){return t*iF/96}var Jee={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Zee(t,e,r,n){e.Borders=[];var i={},s=!1;(t[0].match(lo)||[]).forEach(function(a){var o=Nr(a);switch(su(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":i={},o.diagonalUp&&(i.diagonalUp=hi(o.diagonalUp)),o.diagonalDown&&(i.diagonalDown=hi(o.diagonalDown)),e.Borders.push(i);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function ete(t,e,r,n){e.Fills=[];var i={},s=!1;(t[0].match(lo)||[]).forEach(function(a){var o=Nr(a);switch(su(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":i={},e.Fills.push(i);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":o.patternType&&(i.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":i.bgColor||(i.bgColor={}),o.indexed&&(i.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(i.bgColor.theme=parseInt(o.theme,10)),o.tint&&(i.bgColor.tint=parseFloat(o.tint)),o.rgb&&(i.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":i.fgColor||(i.fgColor={}),o.theme&&(i.fgColor.theme=parseInt(o.theme,10)),o.tint&&(i.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(i.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function tte(t,e,r,n){e.Fonts=[];var i={},s=!1;(t[0].match(lo)||[]).forEach(function(a){var o=Nr(a);switch(su(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(i),i={};break;case"<name":o.val&&(i.name=Xn(o.val));break;case"<name/>":case"</name>":break;case"<b":i.bold=o.val?hi(o.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=o.val?hi(o.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(o.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34;break}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=o.val?hi(o.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=o.val?hi(o.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=o.val?hi(o.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=o.val?hi(o.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=o.val?hi(o.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":o.val&&(i.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(i.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(i.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(i.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=Db[parseInt(o.val,10)];break;case"<color":if(i.color||(i.color={}),o.auto&&(i.color.auto=hi(o.auto)),o.rgb)i.color.rgb=o.rgb.slice(-6);else if(o.indexed){i.color.index=parseInt(o.indexed,10);var l=md[i.color.index];i.color.index==81&&(l=md[1]),l||(l=md[1]),i.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(i.color.theme=parseInt(o.theme,10),o.tint&&(i.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(i.color.rgb=mv(r.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function rte(t,e,r){e.NumberFmt=[];for(var n=es(Tr),i=0;i<n.length;++i)e.NumberFmt[n[i]]=Tr[n[i]];var s=t[0].match(lo);if(s)for(i=0;i<s.length;++i){var a=Nr(s[i]);switch(su(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=wn(Xn(a.formatCode)),l=parseInt(a.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}Mu(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}function nte(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Bt("numFmt",null,{numFmtId:n,formatCode:Hn(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Bt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Wx=["numFmtId","fillId","fontId","borderId","xfId"],qx=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function ite(t,e,r){e.CellXf=[];var n,i=!1;(t[0].match(lo)||[]).forEach(function(s){var a=Nr(s),o=0;switch(su(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=a,delete n[0],o=0;o<Wx.length;++o)n[Wx[o]]&&(n[Wx[o]]=parseInt(n[Wx[o]],10));for(o=0;o<qx.length;++o)n[qx[o]]&&(n[qx[o]]=hi(n[qx[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};a.vertical&&(l.vertical=a.vertical),a.horizontal&&(l.horizontal=a.horizontal),a.textRotation!=null&&(l.textRotation=a.textRotation),a.indent&&(l.indent=a.indent),a.wrapText&&(l.wrapText=hi(a.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}function ste(t){var e=[];return e[e.length]=Bt("cellXfs",null),t.forEach(function(r){e[e.length]=Bt("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Bt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var ate=(function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,i=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var f={};if(!o)return f;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var d;return(d=o.match(e))&&rte(d,f,c),(d=o.match(i))&&tte(d,f,l,c),(d=o.match(n))&&ete(d,f,l,c),(d=o.match(s))&&Zee(d,f,l,c),(d=o.match(r))&&ite(d,f,c),f}})();function sF(t,e){var r=[vs,Bt("styleSheet",null,{xmlns:Xd[0],"xmlns:vt":Us.vt})],n;return t.SSF&&(n=nte(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=ste(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function ote(t,e){var r=t.read_shift(2),n=ao(t);return[r,n]}function lte(t,e,r){r||(r=ft(6+4*e.length)),r.write_shift(2,t),sa(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function cte(t,e,r){var n={};n.sz=t.read_shift(2)/20;var i=HQ(t);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=$Q(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=ao(t),n}function ute(t,e){e||(e=ft(153)),e.write_shift(2,t.sz*20),WQ(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),hv(t.color,e);var n=0;return n=2,e.write_shift(1,n),sa(t.name,e),e.length>e.l?e.slice(0,e.l):e}var fte=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Xw,hte=oo;function vT(t,e){e||(e=ft(84)),Xw||(Xw=dy(fte));var r=Xw[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(hv({auto:1},e),hv({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function dte(t,e){var r=t.l+e,n=t.read_shift(2),i=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:i}}function aF(t,e,r){r||(r=ft(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function $1(t,e){return e||(e=ft(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var pte=oo;function mte(t,e){return e||(e=ft(51)),e.write_shift(1,0),$1(null,e),$1(null,e),$1(null,e),$1(null,e),$1(null,e),e.length>e.l?e.slice(0,e.l):e}function gte(t,e){return e||(e=ft(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),fv(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function xte(t,e,r){var n=ft(2052);return n.write_shift(4,t),fv(e,n),fv(r,n),n.length>n.l?n.slice(0,n.l):n}function vte(t,e,r){var n={};n.NumberFmt=[];for(var i in Tr)n.NumberFmt[i]=Tr[i];n.CellXf=[],n.Fonts=[];var s=[],a=!1;return Zu(t,function(l,c,f){switch(f){case 44:n.NumberFmt[l[0]]=l[1],Mu(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=mv(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:s.push(f),a=!0;break;case 38:s.pop(),a=!1;break;default:if(c.T>0)s.push(f);else if(c.T<0)s.pop();else if(!a||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),n}function yte(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&++r}),r!=0&&(bt(t,615,cc(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&bt(t,44,lte(i,e[i]))}),bt(t,616))}}function wte(t){var e=1;bt(t,611,cc(e)),bt(t,43,ute({sz:12,color:{theme:1},name:"Calibri",family:2})),bt(t,612)}function _te(t){var e=2;bt(t,603,cc(e)),bt(t,45,vT({patternType:"none"})),bt(t,45,vT({patternType:"gray125"})),bt(t,604)}function bte(t){var e=1;bt(t,613,cc(e)),bt(t,46,mte()),bt(t,614)}function Ete(t){var e=1;bt(t,626,cc(e)),bt(t,47,aF({numFmtId:0},65535)),bt(t,627)}function Ste(t,e){bt(t,617,cc(e.length)),e.forEach(function(r){bt(t,47,aF(r,0))}),bt(t,618)}function kte(t){var e=1;bt(t,619,cc(e)),bt(t,48,gte({xfId:0,name:"Normal"})),bt(t,620)}function Tte(t){var e=0;bt(t,505,cc(e)),bt(t,506)}function Ate(t){var e=0;bt(t,508,xte(e,"TableStyleMedium9","PivotStyleMedium4")),bt(t,509)}function Cte(t,e){var r=Oo();return bt(r,278),yte(r,t.SSF),wte(r),_te(r),bte(r),Ete(r),Ste(r,e.cellXfs),kte(r),Tte(r),Ate(r),bt(r,279),r.end()}var Ite=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Nte(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(lo)||[]).forEach(function(i){var s=Nr(i);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[Ite.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function Pte(){}function Rte(){}var Fte=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Lte=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Dte=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Ote(t,e,r){e.themeElements={};var n;[["clrScheme",Fte,Nte],["fontScheme",Lte,Pte],["fmtScheme",Dte,Rte]].forEach(function(i){if(!(n=t.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](n,e,r)})}var Mte=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function oF(t,e){(!t||t.length===0)&&(t=l3());var r,n={};if(!(r=t.match(Mte)))throw new Error("themeElements not found in theme");return Ote(r[0],n,e),n.raw=t,n}function l3(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[vs];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function jte(t,e,r){var n=t.l+e,i=t.read_shift(4);if(i!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var a;try{a=ZP(s,{type:"array"})}catch{return}var o=il(a,"theme/theme/theme1.xml",!0);if(o)return oF(o,r)}}function Bte(t){return t.read_shift(4)}function Vte(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=Ute(t,4);break;case 2:e.xclrValue=VR(t);break;case 3:e.xclrValue=Bte(t);break;case 4:t.l+=4;break}return t.l+=8,e}function Ute(t,e){return oo(t,e)}function zte(t,e){return oo(t,e)}function $te(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Vte(t);break;case 6:n[1]=zte(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function Hte(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var i=t.read_shift(2),s=[];i-- >0;)s.push($te(t,r-t.l));return{ixfe:n,ext:s}}function Wte(t,e){e.forEach(function(r){r[0]})}function qte(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:ao(t)}}function Gte(t){var e=ft(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),sa(t.name,e),e.slice(0,e.l)}function Kte(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function Xte(t){var e=ft(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function Yte(t,e){var r=ft(8+2*e.length);return r.write_shift(4,t),sa(e,r),r.slice(0,r.l)}function Qte(t){return t.l+=4,t.read_shift(4)!=0}function Jte(t,e){var r=ft(8);return r.write_shift(4,t),r.write_shift(4,1),r}function Zte(t,e,r){var n={Types:[],Cell:[],Value:[]},i=r||{},s=[],a=!1,o=2;return Zu(t,function(l,c,f){switch(f){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(d){o==1?n.Cell.push({type:n.Types[d[0]-1].name,index:d[1]}):o==0&&n.Value.push({type:n.Types[d[0]-1].name,index:d[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:s.push(f),a=!0;break;case 36:s.pop(),a=!1;break;default:if(!c.T){if(!a||i.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),n}function ere(){var t=Oo();return bt(t,332),bt(t,334,cc(1)),bt(t,335,Gte({name:"XLDAPR",version:12e4,flags:3496657072})),bt(t,336),bt(t,339,Yte(1,"XLDAPR")),bt(t,52),bt(t,35,cc(514)),bt(t,4096,cc(0)),bt(t,4097,Fl(1)),bt(t,36),bt(t,53),bt(t,340),bt(t,337,Jte(1)),bt(t,51,Xte([[1,0]])),bt(t,338),bt(t,333),t.end()}function tre(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var i=!1,s=2,a;return t.replace(lo,function(o){var l=Nr(o);switch(su(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(a=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):s==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+l.i);break;default:if(!i&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function lF(){var t=[vs];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function rre(t){var e=[];if(!t)return e;var r=1;return(t.match(lo)||[]).forEach(function(n){var i=Nr(n);switch(i[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?r=i.i:i.i=r,e.push(i);break}}),e}function nre(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Ir(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function ire(t,e,r){var n=[];return Zu(t,function(s,a,o){switch(o){case 63:n.push(s);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function sre(t,e,r,n){if(!t)return t;var i=n||{},s=!1;Zu(t,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!l.T){if(!s||i.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},i)}function are(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var K0=1024;function cF(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[Bt("xml",null,{"xmlns:v":tl.v,"xmlns:o":tl.o,"xmlns:x":tl.x,"xmlns:mv":tl.mv}).replace(/\/>/,">"),Bt("o:shapelayout",Bt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Bt("v:shapetype",[Bt("v:stroke",null,{joinstyle:"miter"}),Bt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];K0<t*1e3;)K0+=1e3;return e.forEach(function(s){var a=Ui(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Bt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=Bt("v:fill",l,o),f={on:"t",obscured:"t"};++K0,i=i.concat(["<v:shape"+qm({id:"_x0000_s"+K0,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,Bt("v:shadow",null,f),Bt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ka("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),ka("x:AutoFill","False"),ka("x:Row",String(a.r)),ka("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function yT(t,e,r,n){var i=Array.isArray(t),s;e.forEach(function(a){var o=Ui(a.ref);if(i?(t[o.r]||(t[o.r]=[]),s=t[o.r][o.c]):s=t[a.ref],!s){s={t:"z"},i?t[o.r][o.c]=s:t[a.ref]=s;var l=_n(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=Vr(l);c!==t["!ref"]&&(t["!ref"]=c)}s.c||(s.c=[]);var f={a:a.author,t:a.t,r:a.r,T:r};a.h&&(f.h=a.h);for(var d=s.c.length-1;d>=0;--d){if(!r&&s.c[d].T)return;r&&!s.c[d].T&&s.c.splice(d,1)}if(r&&n){for(d=0;d<n.length;++d)if(f.a==n[d].id){f.a=n[d].name||f.a;break}}s.c.push(f)})}function ore(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],i=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Nr(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},f=Ui(l.ref);if(!(e.sheetRows&&e.sheetRows<=f.r)){var d=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!d&&!!d[1]&&s3(d[1])||{r:"",t:"",h:""};c.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),c.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(c.h=m.h),n.push(c)}}}}),n}function uF(t){var e=[vs,Bt("comments",null,{xmlns:Xd[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(i){var s=Hn(i.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&r.indexOf("tc="+i.ID)==-1&&(r.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var i=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?i=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(i=r.indexOf(Hn(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(ka("t",Hn(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(ka("t",Hn(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function lre(t,e){var r=[],n=!1,i={},s=0;return t.replace(lo,function(o,l){var c=Nr(o);switch(su(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":i={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":i.t!=null&&r.push(i);break;case"<text>":case"<text":s=l+o.length;break;case"</text>":i.t=t.slice(s,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function cre(t,e,r){var n=[vs,Bt("ThreadedComments",null,{xmlns:Us.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),n.push(Bt("threadedComment",ka("text",a.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function ure(t,e){var r=[],n=!1;return t.replace(lo,function(s){var a=Nr(s);switch(su(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return s}),r}function fre(t){var e=[vs,Bt("personList",null,{xmlns:Us.TCMNT,"xmlns:x":Xd[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Bt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function hre(t){var e={};e.iauthor=t.read_shift(4);var r=Zd(t);return e.rfx=r.s,e.ref=Ir(r.s),t.l+=16,e}function dre(t,e){return e==null&&(e=ft(36)),e.write_shift(4,t[1].iauthor),s1(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var pre=ao;function mre(t){return sa(t.slice(0,54))}function gre(t,e){var r=[],n=[],i={},s=!1;return Zu(t,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:i=o;break;case 637:i.t=o.t,i.h=o.h,i.r=o.r;break;case 636:if(i.author=n[i.iauthor],delete i.iauthor,e.sheetRows&&i.rfx&&e.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,r.push(i);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}function xre(t){var e=Oo(),r=[];return bt(e,628),bt(e,630),t.forEach(function(n){n[1].forEach(function(i){r.indexOf(i.a)>-1||(r.push(i.a.slice(0,54)),bt(e,632,mre(i.a)))})}),bt(e,631),bt(e,633),t.forEach(function(n){n[1].forEach(function(i){i.iauthor=r.indexOf(i.a);var s={s:Ui(n[0]),e:Ui(n[0])};bt(e,635,dre([s,i])),i.t&&i.t.length>0&&bt(e,637,BQ(i)),bt(e,636),delete i.iauthor})}),bt(e,634),bt(e,629),e.end()}var vre="application/vnd.ms-office.vbaProject";function yre(t){var e=yr.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var i=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");yr.utils.cfb_add(e,i,t.FileIndex[n].content)}}),yr.write(e)}function wre(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&yr.utils.cfb_add(t,i,e.FileIndex[n].content)}})}var fF=["xlsb","xlsm","xlam","biff8","xla"];function _re(){return{"!type":"dialog"}}function bre(){return{"!type":"dialog"}}function Ere(){return{"!type":"macro"}}function Sre(){return{"!type":"macro"}}var op=(function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,i,s,a){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=s.length>0?parseInt(s,10)|0:0,f=a.length>0?parseInt(a,10)|0:0;return o?f+=e.c:--f,l?c+=e.r:--c,i+(o?"":"$")+Vi(f)+(l?"":"$")+xs(c)}return function(i,s){return e=s,i.replace(t,r)}})(),c3=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,u3=(function(){return function(e,r){return e.replace(c3,function(n,i,s,a,o,l){var c=Yb(a)-(s?0:r.c),f=Xb(l)-(o?0:r.r),d=f==0?"":o?f+1:"["+f+"]",m=c==0?"":s?c+1:"["+c+"]";return i+"R"+d+"C"+m})}})();function hF(t,e){return t.replace(c3,function(r,n,i,s,a,o){return n+(i=="$"?i+s:Vi(Yb(s)+e.c))+(a=="$"?a+o:xs(Xb(o)+e.r))})}function kre(t,e,r){var n=Mo(e),i=n.s,s=Ui(r),a={r:s.r-i.r,c:s.c-i.c};return hF(t,a)}function Tre(t){return t.length!=1}function wT(t){return t.replace(/_xlfn\./g,"")}function ks(t){t.l+=1}function mh(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function dF(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return pF(t);r.biff==12&&(n=4)}var i=t.read_shift(n),s=t.read_shift(n),a=mh(t),o=mh(t);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function pF(t){var e=mh(t),r=mh(t),n=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function Are(t,e,r){if(r.biff<8)return pF(t);var n=t.read_shift(r.biff==12?4:2),i=t.read_shift(r.biff==12?4:2),s=mh(t),a=mh(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function mF(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return Cre(t);var n=t.read_shift(r&&r.biff==12?4:2),i=mh(t);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function Cre(t){var e=mh(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function Ire(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Nre(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Pre(t);var i=t.read_shift(n>=12?4:2),s=t.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function Pre(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),i==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:i,rRel:n}}function Rre(t,e,r){var n=(t[t.l++]&96)>>5,i=dF(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,i]}function Fre(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var a=dF(t,s,r);return[n,i,a]}function Lre(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Dre(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,i]}function Ore(t,e,r){var n=(t[t.l++]&96)>>5,i=Are(t,e-1,r);return[n,i]}function Mre(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function _T(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function jre(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),i=[],s=0;s<=n;++s)i.push(t.read_shift(r&&r.biff==2?1:2));return i}function Bre(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Vre(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Ure(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function zre(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function gF(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function $re(t){return t.read_shift(2),gF(t)}function Hre(t){return t.read_shift(2),gF(t)}function Wre(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=mF(t,0,r);return[n,i]}function qre(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=Nre(t,0,r);return[n,i]}function Gre(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=mF(t,0,r);return[n,i,s]}function Kre(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(r&&r.biff<=3?1:2);return[Qne[i],yF[i],n]}function Xre(t,e,r){var n=t[t.l++],i=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:Yre(t);return[i,(s[0]===0?yF:Yne)[s[1]]]}function Yre(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Qre(t,e,r){t.l+=r&&r.biff==2?3:4}function Jre(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function Zre(t){return t.l++,ef[t.read_shift(1)]}function ene(t){return t.l++,t.read_shift(2)}function tne(t){return t.l++,t.read_shift(1)!==0}function rne(t){return t.l++,no(t)}function nne(t,e,r){return t.l++,Rg(t,e-1,r)}function ine(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=us(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=ef[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=no(t);break;case 2:r[1]=e0(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function sne(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),i=[],s=0;s!=n;++s)i.push((r.biff==12?Zd:gy)(t));return i}function ane(t,e,r){var n=0,i=0;r.biff==12?(n=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--i==0&&(i=256));for(var s=0,a=[];s!=n&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=ine(t,r.biff);return a}function one(t,e,r){var n=t.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,s=t.read_shift(i);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function lne(t,e,r){if(r.biff==5)return cne(t);var n=t.read_shift(1)>>>5&3,i=t.read_shift(2),s=t.read_shift(4);return[n,i,s]}function cne(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function une(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function fne(t,e,r){var n=t.read_shift(1)>>>5&3,i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function hne(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function dne(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,i]}var pne=oo,mne=oo,gne=oo;function Lg(t,e,r){return t.l+=2,[Ire(t)]}function f3(t){return t.l+=6,[]}var xne=Lg,vne=f3,yne=f3,wne=Lg;function xF(t){return t.l+=2,[Cs(t),t.read_shift(2)&1]}var _ne=Lg,bne=xF,Ene=f3,Sne=Lg,kne=Lg,Tne=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Ane(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i=t.read_shift(2),s=t.read_shift(2),a=Tne[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:i,C:s}}function Cne(t){return t.l+=2,[t.read_shift(4)]}function Ine(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function Nne(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Pne(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function Rne(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function Fne(t){return t.l+=4,[0,0]}var bT={1:{n:"PtgExp",f:Jre},2:{n:"PtgTbl",f:gne},3:{n:"PtgAdd",f:ks},4:{n:"PtgSub",f:ks},5:{n:"PtgMul",f:ks},6:{n:"PtgDiv",f:ks},7:{n:"PtgPower",f:ks},8:{n:"PtgConcat",f:ks},9:{n:"PtgLt",f:ks},10:{n:"PtgLe",f:ks},11:{n:"PtgEq",f:ks},12:{n:"PtgGe",f:ks},13:{n:"PtgGt",f:ks},14:{n:"PtgNe",f:ks},15:{n:"PtgIsect",f:ks},16:{n:"PtgUnion",f:ks},17:{n:"PtgRange",f:ks},18:{n:"PtgUplus",f:ks},19:{n:"PtgUminus",f:ks},20:{n:"PtgPercent",f:ks},21:{n:"PtgParen",f:ks},22:{n:"PtgMissArg",f:ks},23:{n:"PtgStr",f:nne},26:{n:"PtgSheet",f:Ine},27:{n:"PtgEndSheet",f:Nne},28:{n:"PtgErr",f:Zre},29:{n:"PtgBool",f:tne},30:{n:"PtgInt",f:ene},31:{n:"PtgNum",f:rne},32:{n:"PtgArray",f:Mre},33:{n:"PtgFunc",f:Kre},34:{n:"PtgFuncVar",f:Xre},35:{n:"PtgName",f:one},36:{n:"PtgRef",f:Wre},37:{n:"PtgArea",f:Rre},38:{n:"PtgMemArea",f:une},39:{n:"PtgMemErr",f:pne},40:{n:"PtgMemNoMem",f:mne},41:{n:"PtgMemFunc",f:fne},42:{n:"PtgRefErr",f:hne},43:{n:"PtgAreaErr",f:Lre},44:{n:"PtgRefN",f:qre},45:{n:"PtgAreaN",f:Ore},46:{n:"PtgMemAreaN",f:Pne},47:{n:"PtgMemNoMemN",f:Rne},57:{n:"PtgNameX",f:lne},58:{n:"PtgRef3d",f:Gre},59:{n:"PtgArea3d",f:Fre},60:{n:"PtgRefErr3d",f:dne},61:{n:"PtgAreaErr3d",f:Dre},255:{}},Lne={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Dne={1:{n:"PtgElfLel",f:xF},2:{n:"PtgElfRw",f:Sne},3:{n:"PtgElfCol",f:xne},6:{n:"PtgElfRwV",f:kne},7:{n:"PtgElfColV",f:wne},10:{n:"PtgElfRadical",f:_ne},11:{n:"PtgElfRadicalS",f:Ene},13:{n:"PtgElfColS",f:vne},15:{n:"PtgElfColSV",f:yne},16:{n:"PtgElfRadicalLel",f:bne},25:{n:"PtgList",f:Ane},29:{n:"PtgSxName",f:Cne},255:{}},One={0:{n:"PtgAttrNoop",f:Fne},1:{n:"PtgAttrSemi",f:zre},2:{n:"PtgAttrIf",f:Vre},4:{n:"PtgAttrChoose",f:jre},8:{n:"PtgAttrGoto",f:Bre},16:{n:"PtgAttrSum",f:Qre},32:{n:"PtgAttrBaxcel",f:_T},33:{n:"PtgAttrBaxcel",f:_T},64:{n:"PtgAttrSpace",f:$re},65:{n:"PtgAttrSpaceSemi",f:Hre},128:{n:"PtgAttrIfError",f:Ure},255:{}};function Dg(t,e,r,n){if(n.biff<8)return oo(t,e);for(var i=t.l+e,s=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=ane(t,0,n),s.push(r[a][1]);break;case"PtgMemArea":r[a][2]=sne(t,r[a][1],n),s.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),s.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=i-t.l,e!==0&&s.push(oo(t,e)),s}function Og(t,e,r){for(var n=t.l+e,i,s,a=[];n!=t.l;)e=n-t.l,s=t[t.l],i=bT[s]||bT[Lne[s]],(s===24||s===25)&&(i=(s===24?Dne:One)[t[t.l+1]]),!i||!i.f?oo(t,e):a.push([i.n,i.f(t,e,r)]);return a}function Mne(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],i=[],s=0;s<n.length;++s){var a=n[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var jne={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Bne(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function vF(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(t[n[0]][0]){case 357:return i=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(i=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function ET(t,e,r){var n=vF(t,e,r);return n=="#REF"?n:Bne(n,r)}function eo(t,e,r,n,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],l,c,f,d=0,m=0,p,_="";if(!t[0]||!t[0][0])return"";for(var w=-1,b="",k=0,F=t[0].length;k<F;++k){var N=t[0][k];switch(N[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),w>=0){switch(t[0][w][1][0]){case 0:b=Yi(" ",t[0][w][1][1]);break;case 1:b=Yi("\r",t[0][w][1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][w][1][0])}c=c+b,w=-1}o.push(c+jne[N[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=mm(N[1][1],a,i),o.push(gm(f,s));break;case"PtgRefN":f=r?mm(N[1][1],r,i):N[1][1],o.push(gm(f,s));break;case"PtgRef3d":d=N[1][1],f=mm(N[1][2],a,i),_=ET(n,d,i),o.push(_+"!"+gm(f,s));break;case"PtgFunc":case"PtgFuncVar":var B=N[1][0],X=N[1][1];B||(B=0),B&=127;var G=B==0?[]:o.slice(-B);o.length-=B,X==="User"&&(X=G.shift()),o.push(X+"("+G.join(",")+")");break;case"PtgBool":o.push(N[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(N[1]);break;case"PtgNum":o.push(String(N[1]));break;case"PtgStr":o.push('"'+N[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(N[1]);break;case"PtgAreaN":p=Jk(N[1][1],r?{s:r}:a,i),o.push(Ww(p,i));break;case"PtgArea":p=Jk(N[1][1],a,i),o.push(Ww(p,i));break;case"PtgArea3d":d=N[1][1],p=N[1][2],_=ET(n,d,i),o.push(_+"!"+Ww(p,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=N[1][2];var P=(n.names||[])[m-1]||(n[0]||[])[m],A=P?P.Name:"SH33TJSNAME"+String(m);A&&A.slice(0,6)=="_xlfn."&&!i.xlfn&&(A=A.slice(6)),o.push(A);break;case"PtgNameX":var T=N[1][1];m=N[1][2];var O;if(i.biff<=5)T<0&&(T=-T),n[T]&&(O=n[T][m]);else{var I="";if(((n[T]||[])[0]||[])[0]==14849||(((n[T]||[])[0]||[])[0]==1025?n[T][m]&&n[T][m].itab>0&&(I=n.SheetNames[n[T][m].itab-1]+"!"):I=n.SheetNames[m-1]+"!"),n[T]&&n[T][m])I+=n[T][m].Name;else if(n[0]&&n[0][m])I+=n[0][m].Name;else{var D=(vF(n,T,i)||"").split(";;");D[m-1]?I=D[m-1]:I+="SH33TJSERRX"}o.push(I);break}O||(O={Name:"SH33TJSERRY"}),o.push(O.Name);break;case"PtgParen":var M="(",ie=")";if(w>=0){switch(b="",t[0][w][1][0]){case 2:M=Yi(" ",t[0][w][1][1])+M;break;case 3:M=Yi("\r",t[0][w][1][1])+M;break;case 4:ie=Yi(" ",t[0][w][1][1])+ie;break;case 5:ie=Yi("\r",t[0][w][1][1])+ie;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][w][1][0])}w=-1}o.push(M+o.pop()+ie);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":f={c:N[1][1],r:N[1][0]};var be={c:r.c,r:r.r};if(n.sharedf[Ir(f)]){var Ne=n.sharedf[Ir(f)];o.push(eo(Ne,a,be,n,i))}else{var we=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(f.c<c[0].s.c||f.c>c[0].e.c)&&!(f.r<c[0].s.r||f.r>c[0].e.r)){o.push(eo(c[1],a,be,n,i)),we=!0;break}we||o.push(N[1])}break;case"PtgArray":o.push("{"+Mne(N[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":w=k;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+N[1].idx+"[#"+N[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(N));default:throw new Error("Unrecognized Formula Token: "+String(N))}var le=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&w>=0&&le.indexOf(t[0][k][0])==-1){N=t[0][w];var J=!0;switch(N[1][0]){case 4:J=!1;case 0:b=Yi(" ",N[1][1]);break;case 5:J=!1;case 1:b=Yi("\r",N[1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+N[1][0])}o.push((J?b:"")+o.pop()+(J?"":b)),w=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function Vne(t,e,r){var n=t.l+e,i=r.biff==2?1:2,s,a=t.read_shift(i);if(a==65535)return[[],oo(t,e-2)];var o=Og(t,a,r);return e!==a+i&&(s=Dg(t,e-a-i,o,r)),t.l=n,[o,s]}function Une(t,e,r){var n=t.l+e,i=r.biff==2?1:2,s,a=t.read_shift(i);if(a==65535)return[[],oo(t,e-2)];var o=Og(t,a,r);return e!==a+i&&(s=Dg(t,e-a-i,o,r)),t.l=n,[o,s]}function zne(t,e,r,n){var i=t.l+e,s=Og(t,n,r),a;return i!==t.l&&(a=Dg(t,i-t.l,s,r)),[s,a]}function $ne(t,e,r){var n=t.l+e,i,s=t.read_shift(2),a=Og(t,s,r);return s==65535?[[],oo(t,e-2)]:(e!==s+2&&(i=Dg(t,n-s-2,a,r)),[a,i])}function Hne(t){var e;if(Fu(t,t.l+6)!==65535)return[no(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function Wne(t){if(t==null){var e=ft(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return jd(t);return jd(0)}function Yw(t,e,r){var n=t.l+e,i=au(t);r.biff==2&&++t.l;var s=Hne(t),a=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=Une(t,n-t.l,r);return{cell:i,val:s[0],formula:o,shared:a>>3&1,tt:s[1]}}function qne(t,e,r,n,i){var s=Vd(e,r,i),a=Wne(t.v),o=ft(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var c=ft(t.bf.length),f=0;f<t.bf.length;++f)c[f]=t.bf[f];var d=ia([s,a,o,c]);return d}function xy(t,e,r){var n=t.read_shift(4),i=Og(t,n,r),s=t.read_shift(4),a=s>0?Dg(t,s,i,r):null;return[i,a]}var Gne=xy,vy=xy,Kne=xy,Xne=xy,Yne={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},yF={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Qne={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function ST(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function Jne(t){var e="of:="+t.replace(c3,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function Qw(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function Zne(t){return t.replace(/\./,"!")}var vm={},lp={},ym=typeof Map<"u";function h3(t,e,r){var n=0,i=t.length;if(r){if(ym?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=ym?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<i;++n)if(t[n].t===e)return t.Count++,n;return t[i]={t:e},t.Count++,t.Unique++,r&&(ym?(r.has(e)||r.set(e,[]),r.get(e).push(i)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(i))),i}function yy(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(ro=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=Qm(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=gv(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function vd(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Nh(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],i=60,s=t.length;if(n==null&&r.ssf){for(;i<392;++i)if(r.ssf[i]==null){Mu(e.z,i),r.ssf[i]=e.z,r.revssf[e.z]=n=i;break}}for(i=0;i!=s;++i)if(t[i].numFmtId===n)return i;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function wF(t,e,r,n,i,s){try{n.cellNF&&(t.z=Tr[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=gi(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Tr[e]==null&&Mu(YY[e]||"General",e),t.t==="e")t.w=t.w||ef[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Hm(t.v);else if(t.t==="d"){var a=$s(t.v);(a|0)===a?t.w=a.toString(10):t.w=Hm(a)}else{if(t.v===void 0)return"";t.w=Od(t.v,lp)}else t.t==="d"?t.w=Dl(e,$s(t.v),lp):t.w=Dl(e,t.v,lp)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=mv(i.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=i.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=mv(i.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=i.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function eie(t,e,r){if(t&&t["!ref"]){var n=_n(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function tie(t,e){var r=_n(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Vr(r))}var rie=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,nie=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,iie=/<(?:\w:)?hyperlink [^>]*>/mg,sie=/"(\w*:\w*)"/,aie=/<(?:\w:)?col\b[^>]*[\/]?>/g,oie=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,lie=/<(?:\w:)?pageMargins[^>]*\/>/g,_F=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,cie=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,uie=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function fie(t,e,r,n,i,s,a){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",f="",d=t.match(nie);d?(c=t.slice(0,d.index),f=t.slice(d.index+d[0].length)):c=f=t;var m=c.match(_F);m?d3(m[0],o,i,r):(m=c.match(cie))&&die(m[0],m[1]||"",o,i,r);var p=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var _=c.slice(p,p+50).match(sie);_&&tie(o,_[1])}var w=c.match(uie);w&&w[1]&&Tie(w[1],i);var b=[];if(e.cellStyles){var k=c.match(aie);k&&_ie(b,k)}d&&Iie(d[1],o,e,l,s,a);var F=f.match(oie);F&&(o["!autofilter"]=Eie(F[0]));var N=[],B=f.match(rie);if(B)for(p=0;p!=B.length;++p)N[p]=_n(B[p].slice(B[p].indexOf('"')+1));var X=f.match(iie);X&&vie(o,X,n);var G=f.match(lie);if(G&&(o["!margins"]=yie(Nr(G[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Vr(l)),e.sheetRows>0&&o["!ref"]){var P=_n(o["!ref"]);e.sheetRows<=+P.e.r&&(P.e.r=e.sheetRows-1,P.e.r>l.e.r&&(P.e.r=l.e.r),P.e.r<P.s.r&&(P.s.r=P.e.r),P.e.c>l.e.c&&(P.e.c=l.e.c),P.e.c<P.s.c&&(P.s.c=P.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Vr(P))}return b.length>0&&(o["!cols"]=b),N.length>0&&(o["!merges"]=N),o}function hie(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Vr(t[r])+'"/>';return e+"</mergeCells>"}function d3(t,e,r,n){var i=Nr(t);r.Sheets[n]||(r.Sheets[n]={}),i.codeName&&(r.Sheets[n].CodeName=wn(Xn(i.codeName)))}function die(t,e,r,n,i){d3(t.slice(0,t.indexOf(">")),r,n,i)}function pie(t,e,r,n,i){var s=!1,a={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}s=!0,a.codeName=zc(Hn(l))}if(t&&t["!outline"]){var c={summaryBelow:1,summaryRight:1};t["!outline"].above&&(c.summaryBelow=0),t["!outline"].left&&(c.summaryRight=0),o=(o||"")+Bt("outlinePr",null,c)}!s&&!o||(i[i.length]=Bt("sheetPr",o,a))}var mie=["objects","scenarios","selectLockedCells","selectUnlockedCells"],gie=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function xie(t){var e={sheet:1};return mie.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),gie.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=a3(t.password).toString(16).toUpperCase()),Bt("sheetProtection",null,e)}function vie(t,e,r){for(var n=Array.isArray(t),i=0;i!=e.length;++i){var s=Nr(Xn(e[i]),!0);if(!s.ref)return;var a=((r||{})["!id"]||[])[s.id];a?(s.Target=a.Target,s.location&&(s.Target+="#"+wn(s.location))):(s.Target="#"+wn(s.location),a={Target:s.Target,TargetMode:"Internal"}),s.Rel=a,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=_n(s.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var f=Ir({c,r:l});n?(t[l]||(t[l]=[]),t[l][c]||(t[l][c]={t:"z",v:void 0}),t[l][c].l=s):(t[f]||(t[f]={t:"z",v:void 0}),t[f].l=s)}}}function yie(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function wie(t){return vd(t),Bt("pageMargins",null,t)}function _ie(t,e){for(var r=!1,n=0;n!=e.length;++n){var i=Nr(e[n],!0);i.hidden&&(i.hidden=hi(i.hidden));var s=parseInt(i.min,10)-1,a=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!r&&i.width&&(r=!0,o3(i.width)),ph(i);s<=a;)t[s++]=xi(i)}}function bie(t,e){for(var r=["<cols>"],n,i=0;i!=e.length;++i)(n=e[i])&&(r[r.length]=Bt("col",null,yy(i,n)));return r[r.length]="</cols>",r.join("")}function Eie(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function Sie(t,e,r,n){var i=typeof t.ref=="string"?t.ref:Vr(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,a=Mo(i);a.s.r==a.e.r&&(a.e.r=Mo(e["!ref"]).e.r,i=Vr(a));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Bt("autoFilter",null,{ref:i})}var kie=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Tie(t,e){e.Views||(e.Views=[{}]),(t.match(kie)||[]).forEach(function(r,n){var i=Nr(r);e.Views[n]||(e.Views[n]={}),+i.zoomScale&&(e.Views[n].zoom=+i.zoomScale),hi(i.rightToLeft)&&(e.Views[n].RTL=!0)})}function Aie(t,e,r,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Bt("sheetViews",Bt("sheetView",null,i),{})}function Cie(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",s=t.t,a=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=ef[t.v];break;case"d":n&&n.cellDates?i=gi(t.v,-1).toISOString():(t=xi(t),t.t="n",i=""+(t.v=$s(gi(t.v)))),typeof t.z>"u"&&(t.z=Tr[14]);break;default:i=t.v;break}var o=ka("v",Hn(i)),l={r:e},c=Nh(n.cellXfs,t,n);switch(c!==0&&(l.s=c),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=ka("v",""+h3(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=s&&(t.t=s,t.v=a),typeof t.f=="string"&&t.f){var f=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Bt("f",Hn(t.f),f)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),Bt("c",o,l)}var Iie=(function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,s=Wm("v"),a=Wm("f");return function(l,c,f,d,m,p){for(var _=0,w="",b=[],k=[],F=0,N=0,B=0,X="",G,P,A=0,T=0,O,I,D=0,M=0,ie=Array.isArray(p.CellXf),be,Ne=[],we=[],le=Array.isArray(c),J=[],ue={},ee=!1,C=!!f.sheetStubs,U=l.split(e),W=0,Y=U.length;W!=Y;++W){w=U[W].trim();var ae=w.length;if(ae!==0){var pe=0;e:for(_=0;_<ae;++_)switch(w[_]){case">":if(w[_-1]!="/"){++_;break e}if(f&&f.cellStyles){if(P=Nr(w.slice(pe,_),!0),A=P.r!=null?parseInt(P.r,10):A+1,T=-1,f.sheetRows&&f.sheetRows<A)continue;ue={},ee=!1,P.ht&&(ee=!0,ue.hpt=parseFloat(P.ht),ue.hpx=Lp(ue.hpt)),P.hidden=="1"&&(ee=!0,ue.hidden=!0),P.outlineLevel!=null&&(ee=!0,ue.level=+P.outlineLevel),ee&&(J[A-1]=ue)}break;case"<":pe=_;break}if(pe>=_)break;if(P=Nr(w.slice(pe,_),!0),A=P.r!=null?parseInt(P.r,10):A+1,T=-1,!(f.sheetRows&&f.sheetRows<A)){d.s.r>A-1&&(d.s.r=A-1),d.e.r<A-1&&(d.e.r=A-1),f&&f.cellStyles&&(ue={},ee=!1,P.ht&&(ee=!0,ue.hpt=parseFloat(P.ht),ue.hpx=Lp(ue.hpt)),P.hidden=="1"&&(ee=!0,ue.hidden=!0),P.outlineLevel!=null&&(ee=!0,ue.level=+P.outlineLevel),ee&&(J[A-1]=ue)),b=w.slice(_).split(t);for(var he=0;he!=b.length&&b[he].trim().charAt(0)=="<";++he);for(b=b.slice(he),_=0;_!=b.length;++_)if(w=b[_].trim(),w.length!==0){if(k=w.match(r),F=_,N=0,B=0,w="<c "+(w.slice(0,1)=="<"?">":"")+w,k!=null&&k.length===2){for(F=0,X=k[1],N=0;N!=X.length&&!((B=X.charCodeAt(N)-64)<1||B>26);++N)F=26*F+B;--F,T=F}else++T;for(N=0;N!=w.length&&w.charCodeAt(N)!==62;++N);if(++N,P=Nr(w.slice(0,N),!0),P.r||(P.r=Ir({r:A-1,c:T})),X=w.slice(N),G={t:""},(k=X.match(s))!=null&&k[1]!==""&&(G.v=wn(k[1])),f.cellFormula){if((k=X.match(a))!=null&&k[1]!==""){if(G.f=wn(Xn(k[1])).replace(/\r\n/g,`
`),f.xlfn||(G.f=wT(G.f)),k[0].indexOf('t="array"')>-1)G.F=(X.match(i)||[])[1],G.F.indexOf(":")>-1&&Ne.push([_n(G.F),G.F]);else if(k[0].indexOf('t="shared"')>-1){I=Nr(k[0]);var xe=wn(Xn(k[1]));f.xlfn||(xe=wT(xe)),we[parseInt(I.si,10)]=[I,xe,P.r]}}else(k=X.match(/<f[^>]*\/>/))&&(I=Nr(k[0]),we[I.si]&&(G.f=kre(we[I.si][1],we[I.si][2],P.r)));var Ee=Ui(P.r);for(N=0;N<Ne.length;++N)Ee.r>=Ne[N][0].s.r&&Ee.r<=Ne[N][0].e.r&&Ee.c>=Ne[N][0].s.c&&Ee.c<=Ne[N][0].e.c&&(G.F=Ne[N][1])}if(P.t==null&&G.v===void 0)if(G.f||G.F)G.v=0,G.t="n";else if(C)G.t="z";else continue;else G.t=P.t||"n";switch(d.s.c>T&&(d.s.c=T),d.e.c<T&&(d.e.c=T),G.t){case"n":if(G.v==""||G.v==null){if(!C)continue;G.t="z"}else G.v=parseFloat(G.v);break;case"s":if(typeof G.v>"u"){if(!C)continue;G.t="z"}else O=vm[parseInt(G.v,10)],G.v=O.t,G.r=O.r,f.cellHTML&&(G.h=O.h);break;case"str":G.t="s",G.v=G.v!=null?Xn(G.v):"",f.cellHTML&&(G.h=Wb(G.v));break;case"inlineStr":k=X.match(n),G.t="s",k!=null&&(O=s3(k[1]))?(G.v=O.t,f.cellHTML&&(G.h=O.h)):G.v="";break;case"b":G.v=hi(G.v);break;case"d":f.cellDates?G.v=gi(G.v,1):(G.v=$s(gi(G.v,1)),G.t="n");break;case"e":(!f||f.cellText!==!1)&&(G.w=G.v),G.v=ER[G.v];break}if(D=M=0,be=null,ie&&P.s!==void 0&&(be=p.CellXf[P.s],be!=null&&(be.numFmtId!=null&&(D=be.numFmtId),f.cellStyles&&be.fillId!=null&&(M=be.fillId))),wF(G,D,M,f,m,p),f.cellDates&&ie&&G.t=="n"&&r1(Tr[D])&&(G.t="d",G.v=my(G.v)),P.cm&&f.xlmeta){var Fe=(f.xlmeta.Cell||[])[+P.cm-1];Fe&&Fe.type=="XLDAPR"&&(G.D=!0)}if(le){var oe=Ui(P.r);c[oe.r]||(c[oe.r]=[]),c[oe.r][oe.c]=G}else c[P.r]=G}}}}J.length>0&&(c["!rows"]=J)}})();function Nie(t,e,r,n){var i=[],s=[],a=_n(t["!ref"]),o="",l,c="",f=[],d=0,m=0,p=t["!rows"],_=Array.isArray(t),w={r:c},b,k=-1;for(m=a.s.c;m<=a.e.c;++m)f[m]=Vi(m);for(d=a.s.r;d<=a.e.r;++d){for(s=[],c=xs(d),m=a.s.c;m<=a.e.c;++m){l=f[m]+c;var F=_?(t[d]||[])[m]:t[l];F!==void 0&&(o=Cie(F,l,t,e))!=null&&s.push(o)}(s.length>0||p&&p[d])&&(w={r:c},p&&p[d]&&(b=p[d],b.hidden&&(w.hidden=1),k=-1,b.hpx?k=Jm(b.hpx):b.hpt&&(k=b.hpt),k>-1&&(w.ht=k,w.customHeight=1),b.level&&(w.outlineLevel=b.level)),i[i.length]=Bt("row",s.join(""),w))}if(p)for(;d<p.length;++d)p&&p[d]&&(w={r:d+1},b=p[d],b.hidden&&(w.hidden=1),k=-1,b.hpx?k=Jm(b.hpx):b.hpt&&(k=b.hpt),k>-1&&(w.ht=k,w.customHeight=1),b.level&&(w.outlineLevel=b.level),i[i.length]=Bt("row","",w));return i.join("")}function bF(t,e,r,n){var i=[vs,Bt("worksheet",null,{xmlns:Xd[0],"xmlns:r":Us.r})],s=r.SheetNames[t],a=0,o="",l=r.Sheets[s];l==null&&(l={});var c=l["!ref"]||"A1",f=_n(c);if(f.e.c>16383||f.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),c=Vr(f)}n||(n={}),l["!comments"]=[];var d=[];pie(l,r,t,e,i),i[i.length]=Bt("dimension",null,{ref:c}),i[i.length]=Aie(l,e,t,r),e.sheetFormat&&(i[i.length]=Bt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=bie(l,l["!cols"])),i[a=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=Nie(l,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),l["!protect"]&&(i[i.length]=xie(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=Sie(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=hie(l["!merges"]));var m=-1,p,_=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(w){w[1].Target&&(p={ref:w[0]},w[1].Target.charAt(0)!="#"&&(_=Un(n,-1,Hn(w[1].Target).replace(/#.*$/,""),en.HLINK),p["r:id"]="rId"+_),(m=w[1].Target.indexOf("#"))>-1&&(p.location=Hn(w[1].Target.slice(m+1))),w[1].Tooltip&&(p.tooltip=Hn(w[1].Tooltip)),i[i.length]=Bt("hyperlink",null,p))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=wie(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=ka("ignoredErrors",Bt("ignoredError",null,{numberStoredAsText:1,sqref:c}))),d.length>0&&(_=Un(n,-1,"../drawings/drawing"+(t+1)+".xml",en.DRAW),i[i.length]=Bt("drawing",null,{"r:id":"rId"+_}),l["!drawing"]=d),l["!comments"].length>0&&(_=Un(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",en.VML),i[i.length]=Bt("legacyDrawing",null,{"r:id":"rId"+_}),l["!legacy"]=_),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function Pie(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=i/20),r}function Rie(t,e,r){var n=ft(145),i=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;i.hpx?s=Jm(i.hpx)*20:i.hpt&&(s=i.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),n.write_shift(1,a),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var c={r:t,c:0},f=0;f<16;++f)if(!(e.s.c>f+1<<10||e.e.c<f<<10)){for(var d=-1,m=-1,p=f<<10;p<f+1<<10;++p){c.c=p;var _=Array.isArray(r)?(r[c.r]||[])[c.c]:r[Ir(c)];_&&(d<0&&(d=p),m=p)}d<0||(++o,n.write_shift(4,d),n.write_shift(4,m))}var w=n.l;return n.l=l,n.write_shift(4,o),n.l=w,n.length>n.l?n.slice(0,n.l):n}function Fie(t,e,r,n){var i=Rie(n,r,e);(i.length>17||(e["!rows"]||[])[n])&&bt(t,0,i)}var Lie=Zd,Die=s1;function Oie(){}function Mie(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=VQ(t),r}function jie(t,e,r){r==null&&(r=ft(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var i=1;i<3;++i)r.write_shift(1,0);return hv({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),vR(t,r),r.slice(0,r.l)}function Bie(t){var e=Vl(t);return[e]}function Vie(t,e,r){return r==null&&(r=ft(8)),Yd(e,r)}function Uie(t){var e=Qd(t);return[e]}function zie(t,e,r){return r==null&&(r=ft(4)),Jd(e,r)}function $ie(t){var e=Vl(t),r=t.read_shift(1);return[e,r,"b"]}function Hie(t,e,r){return r==null&&(r=ft(9)),Yd(e,r),r.write_shift(1,t.v?1:0),r}function Wie(t){var e=Qd(t),r=t.read_shift(1);return[e,r,"b"]}function qie(t,e,r){return r==null&&(r=ft(5)),Jd(e,r),r.write_shift(1,t.v?1:0),r}function Gie(t){var e=Vl(t),r=t.read_shift(1);return[e,r,"e"]}function Kie(t,e,r){return r==null&&(r=ft(9)),Yd(e,r),r.write_shift(1,t.v),r}function Xie(t){var e=Qd(t),r=t.read_shift(1);return[e,r,"e"]}function Yie(t,e,r){return r==null&&(r=ft(8)),Jd(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function Qie(t){var e=Vl(t),r=t.read_shift(4);return[e,r,"s"]}function Jie(t,e,r){return r==null&&(r=ft(12)),Yd(e,r),r.write_shift(4,e.v),r}function Zie(t){var e=Qd(t),r=t.read_shift(4);return[e,r,"s"]}function ese(t,e,r){return r==null&&(r=ft(8)),Jd(e,r),r.write_shift(4,e.v),r}function tse(t){var e=Vl(t),r=no(t);return[e,r,"n"]}function rse(t,e,r){return r==null&&(r=ft(16)),Yd(e,r),jd(t.v,r),r}function EF(t){var e=Qd(t),r=no(t);return[e,r,"n"]}function nse(t,e,r){return r==null&&(r=ft(12)),Jd(e,r),jd(t.v,r),r}function ise(t){var e=Vl(t),r=e3(t);return[e,r,"n"]}function sse(t,e,r){return r==null&&(r=ft(12)),Yd(e,r),yR(t.v,r),r}function ase(t){var e=Qd(t),r=e3(t);return[e,r,"n"]}function ose(t,e,r){return r==null&&(r=ft(8)),Jd(e,r),yR(t.v,r),r}function lse(t){var e=Vl(t),r=Qb(t);return[e,r,"is"]}function cse(t){var e=Vl(t),r=ao(t);return[e,r,"str"]}function use(t,e,r){return r==null&&(r=ft(12+4*t.v.length)),Yd(e,r),sa(t.v,r),r.length>r.l?r.slice(0,r.l):r}function fse(t){var e=Qd(t),r=ao(t);return[e,r,"str"]}function hse(t,e,r){return r==null&&(r=ft(8+4*t.v.length)),Jd(e,r),sa(t.v,r),r.length>r.l?r.slice(0,r.l):r}function dse(t,e,r){var n=t.l+e,i=Vl(t);i.r=r["!row"];var s=t.read_shift(1),a=[i,s,"b"];if(r.cellFormula){t.l+=2;var o=vy(t,n-t.l,r);a[3]=eo(o,null,i,r.supbooks,r)}else t.l=n;return a}function pse(t,e,r){var n=t.l+e,i=Vl(t);i.r=r["!row"];var s=t.read_shift(1),a=[i,s,"e"];if(r.cellFormula){t.l+=2;var o=vy(t,n-t.l,r);a[3]=eo(o,null,i,r.supbooks,r)}else t.l=n;return a}function mse(t,e,r){var n=t.l+e,i=Vl(t);i.r=r["!row"];var s=no(t),a=[i,s,"n"];if(r.cellFormula){t.l+=2;var o=vy(t,n-t.l,r);a[3]=eo(o,null,i,r.supbooks,r)}else t.l=n;return a}function gse(t,e,r){var n=t.l+e,i=Vl(t);i.r=r["!row"];var s=ao(t),a=[i,s,"str"];if(r.cellFormula){t.l+=2;var o=vy(t,n-t.l,r);a[3]=eo(o,null,i,r.supbooks,r)}else t.l=n;return a}var xse=Zd,vse=s1;function yse(t,e){return e==null&&(e=ft(4)),e.write_shift(4,t),e}function wse(t,e){var r=t.l+e,n=Zd(t),i=Jb(t),s=ao(t),a=ao(t),o=ao(t);t.l=r;var l={rfx:n,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}function _se(t,e){var r=ft(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));s1({s:Ui(t[0]),e:Ui(t[0])},r),Zb("rId"+e,r);var n=t[1].Target.indexOf("#"),i=n==-1?"":t[1].Target.slice(n+1);return sa(i||"",r),sa(t[1].Tooltip||"",r),sa("",r),r.slice(0,r.l)}function bse(){}function Ese(t,e,r){var n=t.l+e,i=wR(t),s=t.read_shift(1),a=[i];if(a[2]=s,r.cellFormula){var o=Gne(t,n-t.l,r);a[1]=o}else t.l=n;return a}function Sse(t,e,r){var n=t.l+e,i=Zd(t),s=[i];if(r.cellFormula){var a=Xne(t,n-t.l,r);s[1]=a,t.l=n}else t.l=n;return s}function kse(t,e,r){r==null&&(r=ft(18));var n=yy(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),r.write_shift(2,i),r}var SF=["left","right","top","bottom","header","footer"];function Tse(t){var e={};return SF.forEach(function(r){e[r]=no(t)}),e}function Ase(t,e){return e==null&&(e=ft(48)),vd(t),SF.forEach(function(r){jd(t[r],e)}),e}function Cse(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Ise(t,e,r){r==null&&(r=ft(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Nse(t){var e=ft(24);return e.write_shift(4,4),e.write_shift(4,1),s1(t,e),e}function Pse(t,e){return e==null&&(e=ft(66)),e.write_shift(2,t.password?a3(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function Rse(){}function Fse(){}function Lse(t,e,r,n,i,s,a){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},d=!1,m=!1,p,_,w,b,k,F,N,B,X,G=[];o.biff=12,o["!row"]=0;var P=0,A=!1,T=[],O={},I=o.supbooks||i.supbooks||[[]];if(I.sharedf=O,I.arrayf=T,I.SheetNames=i.SheetNames||i.Sheets.map(function(le){return le.name}),!o.supbooks&&(o.supbooks=I,i.Names))for(var D=0;D<i.Names.length;++D)I[0][D+1]=i.Names[D];var M=[],ie=[],be=!1;Zm[16]={n:"BrtShortReal",f:EF};var Ne;if(Zu(t,function(J,ue,ee){if(!m)switch(ee){case 148:c=J;break;case 0:p=J,o.sheetRows&&o.sheetRows<=p.r&&(m=!0),B=xs(b=p.r),o["!row"]=p.r,(J.hidden||J.hpt||J.level!=null)&&(J.hpt&&(J.hpx=Lp(J.hpt)),ie[J.r]=J);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(_={t:J[2]},J[2]){case"n":_.v=J[1];break;case"s":N=vm[J[1]],_.v=N.t,_.r=N.r;break;case"b":_.v=!!J[1];break;case"e":_.v=J[1],o.cellText!==!1&&(_.w=ef[_.v]);break;case"str":_.t="s",_.v=J[1];break;case"is":_.t="s",_.v=J[1].t;break}if((w=a.CellXf[J[0].iStyleRef])&&wF(_,w.numFmtId,null,o,s,a),k=J[0].c==-1?k+1:J[0].c,o.dense?(l[b]||(l[b]=[]),l[b][k]=_):l[Vi(k)+B]=_,o.cellFormula){for(A=!1,P=0;P<T.length;++P){var C=T[P];p.r>=C[0].s.r&&p.r<=C[0].e.r&&k>=C[0].s.c&&k<=C[0].e.c&&(_.F=Vr(C[0]),A=!0)}!A&&J.length>3&&(_.f=J[3])}if(f.s.r>p.r&&(f.s.r=p.r),f.s.c>k&&(f.s.c=k),f.e.r<p.r&&(f.e.r=p.r),f.e.c<k&&(f.e.c=k),o.cellDates&&w&&_.t=="n"&&r1(Tr[w.numFmtId])){var U=ud(_.v);U&&(_.t="d",_.v=new Date(U.y,U.m-1,U.d,U.H,U.M,U.S,U.u))}Ne&&(Ne.type=="XLDAPR"&&(_.D=!0),Ne=void 0);break;case 1:case 12:if(!o.sheetStubs||d)break;_={t:"z",v:void 0},k=J[0].c==-1?k+1:J[0].c,o.dense?(l[b]||(l[b]=[]),l[b][k]=_):l[Vi(k)+B]=_,f.s.r>p.r&&(f.s.r=p.r),f.s.c>k&&(f.s.c=k),f.e.r<p.r&&(f.e.r=p.r),f.e.c<k&&(f.e.c=k),Ne&&(Ne.type=="XLDAPR"&&(_.D=!0),Ne=void 0);break;case 176:G.push(J);break;case 49:Ne=((o.xlmeta||{}).Cell||[])[J-1];break;case 494:var W=n["!id"][J.relId];for(W?(J.Target=W.Target,J.loc&&(J.Target+="#"+J.loc),J.Rel=W):J.relId==""&&(J.Target="#"+J.loc),b=J.rfx.s.r;b<=J.rfx.e.r;++b)for(k=J.rfx.s.c;k<=J.rfx.e.c;++k)o.dense?(l[b]||(l[b]=[]),l[b][k]||(l[b][k]={t:"z",v:void 0}),l[b][k].l=J):(F=Ir({c:k,r:b}),l[F]||(l[F]={t:"z",v:void 0}),l[F].l=J);break;case 426:if(!o.cellFormula)break;T.push(J),X=o.dense?l[b][k]:l[Vi(k)+B],X.f=eo(J[1],f,{r:p.r,c:k},I,o),X.F=Vr(J[0]);break;case 427:if(!o.cellFormula)break;O[Ir(J[0].s)]=J[1],X=o.dense?l[b][k]:l[Vi(k)+B],X.f=eo(J[1],f,{r:p.r,c:k},I,o);break;case 60:if(!o.cellStyles)break;for(;J.e>=J.s;)M[J.e--]={width:J.w/256,hidden:!!(J.flags&1),level:J.level},be||(be=!0,o3(J.w/256)),ph(M[J.e+1]);break;case 161:l["!autofilter"]={ref:Vr(J)};break;case 476:l["!margins"]=J;break;case 147:i.Sheets[r]||(i.Sheets[r]={}),J.name&&(i.Sheets[r].CodeName=J.name),(J.above||J.left)&&(l["!outline"]={above:J.above,left:J.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),J.RTL&&(i.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:d=!0;break;case 36:d=!1;break;case 37:d=!0;break;case 38:d=!1;break;default:if(!ue.T){if(!d||o.WTF)throw new Error("Unexpected record 0x"+ee.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(f.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=Vr(c||f)),o.sheetRows&&l["!ref"]){var we=_n(l["!ref"]);o.sheetRows<=+we.e.r&&(we.e.r=o.sheetRows-1,we.e.r>f.e.r&&(we.e.r=f.e.r),we.e.r<we.s.r&&(we.s.r=we.e.r),we.e.c>f.e.c&&(we.e.c=f.e.c),we.e.c<we.s.c&&(we.s.c=we.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Vr(we))}return G.length>0&&(l["!merges"]=G),M.length>0&&(l["!cols"]=M),ie.length>0&&(l["!rows"]=ie),l}function Dse(t,e,r,n,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=xi(e),e.z=e.z||Tr[14],e.v=$s(gi(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=Nh(i.cellXfs,e,i),e.l&&s["!links"].push([Ir(l),e.l]),e.c&&s["!comments"].push([Ir(l),e.c]),e.t){case"s":case"str":return i.bookSST?(o=h3(i.Strings,e.v,i.revStrings),l.t="s",l.v=o,a?bt(t,18,ese(e,l)):bt(t,7,Jie(e,l))):(l.t="str",a?bt(t,17,hse(e,l)):bt(t,6,use(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?bt(t,13,ose(e,l)):bt(t,2,sse(e,l)):a?bt(t,16,nse(e,l)):bt(t,5,rse(e,l)),!0;case"b":return l.t="b",a?bt(t,15,qie(e,l)):bt(t,4,Hie(e,l)),!0;case"e":return l.t="e",a?bt(t,14,Yie(e,l)):bt(t,3,Kie(e,l)),!0}return a?bt(t,12,zie(e,l)):bt(t,1,Vie(e,l)),!0}function Ose(t,e,r,n){var i=_n(e["!ref"]||"A1"),s,a="",o=[];bt(t,145);var l=Array.isArray(e),c=i.e.r;e["!rows"]&&(c=Math.max(i.e.r,e["!rows"].length-1));for(var f=i.s.r;f<=c;++f){a=xs(f),Fie(t,e,i,f);var d=!1;if(f<=i.e.r)for(var m=i.s.c;m<=i.e.c;++m){f===i.s.r&&(o[m]=Vi(m)),s=o[m]+a;var p=l?(e[f]||[])[m]:e[s];if(!p){d=!1;continue}d=Dse(t,p,f,m,n,e,d)}}bt(t,146)}function Mse(t,e){!e||!e["!merges"]||(bt(t,177,yse(e["!merges"].length)),e["!merges"].forEach(function(r){bt(t,176,vse(r))}),bt(t,178))}function jse(t,e){!e||!e["!cols"]||(bt(t,390),e["!cols"].forEach(function(r,n){r&&bt(t,60,kse(n,r))}),bt(t,391))}function Bse(t,e){!e||!e["!ref"]||(bt(t,648),bt(t,649,Nse(_n(e["!ref"]))),bt(t,650))}function Vse(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var i=Un(r,-1,n[1].Target.replace(/#.*$/,""),en.HLINK);bt(t,494,_se(n,i))}}),delete e["!links"]}function Use(t,e,r,n){if(e["!comments"].length>0){var i=Un(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",en.VML);bt(t,551,Zb("rId"+i)),e["!legacy"]=i}}function zse(t,e,r,n){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Vr(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,o=Mo(s);o.s.r==o.e.r&&(o.e.r=Mo(e["!ref"]).e.r,s=Vr(o));for(var l=0;l<a.length;++l){var c=a[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),bt(t,161,s1(_n(s))),bt(t,162)}}function $se(t,e,r){bt(t,133),bt(t,137,Ise(e,r)),bt(t,138),bt(t,134)}function Hse(t,e){e["!protect"]&&bt(t,535,Pse(e["!protect"]))}function Wse(t,e,r,n){var i=Oo(),s=r.SheetNames[t],a=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=_n(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],bt(i,129),(r.vbaraw||a["!outline"])&&bt(i,147,jie(o,a["!outline"])),bt(i,148,Die(l)),$se(i,a,r.Workbook),jse(i,a),Ose(i,a,t,e),Hse(i,a),zse(i,a,r,t),Mse(i,a),Vse(i,a,n),a["!margins"]&&bt(i,476,Ase(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Bse(i,a),Use(i,a,t,n),bt(i,130),i.end()}function qse(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var a=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(e[+a[1]]=r?+a[2]:a[2])});var i=wn((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,i,n]}function Gse(t,e,r,n,i,s){var a=s||{"!type":"chart"};if(!t)return s;var o=0,l=0,c="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(d){var m=qse(d);f.s.r=f.s.c=0,f.e.c=o,c=Vi(o),m[0].forEach(function(p,_){a[c+xs(_)]={t:"n",v:p,z:m[1]},l=_}),f.e.r<l&&(f.e.r=l),++o}),o>0&&(a["!ref"]=Vr(f)),a}function Kse(t,e,r,n,i){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a,o=t.match(_F);return o&&d3(o[0],s,i,r),(a=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=a[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function Xse(t,e){t.l+=10;var r=ao(t);return{name:r}}function Yse(t,e,r,n,i){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a=!1;return Zu(t,function(l,c,f){switch(f){case 550:s["!rel"]=l;break;case 651:i.Sheets[r]||(i.Sheets[r]={}),l.name&&(i.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!a||e.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var p3=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Qse=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Jse=[],Zse=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function kT(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],i=0;i!=e.length;++i){var s=e[i];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=hi(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function TT(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=hi(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function kF(t){TT(t.WBProps,p3),TT(t.CalcPr,Zse),kT(t.WBView,Qse),kT(t.Sheets,Jse),lp.date1904=hi(t.WBProps.date1904)}function eae(t){return!t.Workbook||!t.Workbook.WBProps?"false":hi(t.Workbook.WBProps.date1904)?"true":"false"}var tae="][*?/\\".split("");function TF(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return tae.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function rae(t,e,r){t.forEach(function(n,i){TF(n);for(var s=0;s<i;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var a=e&&e[i]&&e[i].CodeName||n;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function nae(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];rae(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)eie(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var iae=/<\w+:workbook/;function sae(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,i="xmlns",s={},a=0;if(t.replace(lo,function(l,c){var f=Nr(l);switch(su(f[0])){case"<?xml":break;case"<workbook":l.match(iae)&&(i="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=f[i];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":p3.forEach(function(d){if(f[d[0]]!=null)switch(d[2]){case"bool":r.WBProps[d[0]]=hi(f[d[0]]);break;case"int":r.WBProps[d[0]]=parseInt(f[d[0]],10);break;default:r.WBProps[d[0]]=f[d[0]]}}),f.codeName&&(r.WBProps.CodeName=Xn(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=wn(Xn(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Xn(f.name),f.comment&&(s.Comment=f.comment),f.localSheetId&&(s.Sheet=+f.localSheetId),hi(f.hidden||"0")&&(s.Hidden=!0),a=c+l.length;break;case"</definedName>":s.Ref=wn(Xn(t.slice(a,c))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return l}),Xd.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return kF(r),r}function AF(t){var e=[vs];e[e.length]=Bt("workbook",null,{xmlns:Xd[0],"xmlns:r":Us.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(p3.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Bt("workbookPr",null,n);var i=t.Workbook&&t.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var a={name:Hn(t.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=Bt("sheet",null,a)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Bt("definedName",Hn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function aae(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=E5(t),r.name=ao(t),r}function oae(t,e){return e||(e=ft(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),Zb(t.strRelID,e),sa(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function lae(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var i=e>8?ao(t):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function cae(t,e){e||(e=ft(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),vR(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function uae(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function fae(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var i=t.read_shift(4),s=UQ(t),a=Kne(t,0,r),o=Jb(t);t.l=n;var l={Name:s,Ptg:a};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function hae(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],i=!1;e||(e={}),e.biff=12;var s=[],a=[[]];return a.SheetNames=[],a.XTI=[],Zm[16]={n:"BrtFRTArchID$",f:uae},Zu(t,function(l,c,f){switch(f){case 156:a.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=eo(l.Ptg,null,null,a,e),delete e.SID,delete l.Ptg,s.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([f,l]):a[0]=[f,l],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(l),a.XTI=a.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(f),i=!0;break;case 36:n.pop(),i=!1;break;case 37:n.push(f),i=!0;break;case 38:n.pop(),i=!1;break;case 16:break;default:if(!c.T){if(!i||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},e),kF(r),r.Names=s,r.supbooks=a,r}function dae(t,e){bt(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,i={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};bt(t,156,oae(i))}bt(t,144)}function pae(t,e){e||(e=ft(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return sa("SheetJS",e),sa(sv.version,e),sa(sv.version,e),sa("7262",e),e.length>e.l?e.slice(0,e.l):e}function mae(t,e){e||(e=ft(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function gae(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,i=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&i==-1?i=n:r[n].Hidden==1&&s==-1&&(s=n);s>i||(bt(t,135),bt(t,158,mae(i)),bt(t,136))}}function xae(t,e){var r=Oo();return bt(r,131),bt(r,128,pae()),bt(r,153,cae(t.Workbook&&t.Workbook.WBProps||null)),gae(r,t),dae(r,t),bt(r,132),r.end()}function vae(t,e,r){return e.slice(-4)===".bin"?hae(t,r):sae(t,r)}function yae(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?Lse(t,n,r,i,s,a,o):fie(t,n,r,i,s,a,o)}function wae(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?Yse(t,n,r,i,s):Kse(t,n,r,i,s)}function _ae(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?Ere():Sre()}function bae(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?_re():bre()}function Eae(t,e,r,n){return e.slice(-4)===".bin"?vte(t,r,n):ate(t,r,n)}function Sae(t,e,r){return oF(t,r)}function kae(t,e,r){return e.slice(-4)===".bin"?kee(t,r):bee(t,r)}function Tae(t,e,r){return e.slice(-4)===".bin"?gre(t,r):ore(t,r)}function Aae(t,e,r){return e.slice(-4)===".bin"?ire(t):rre(t)}function Cae(t,e,r,n){return r.slice(-4)===".bin"?sre(t,e,r,n):void 0}function Iae(t,e,r){return e.slice(-4)===".bin"?Zte(t,e,r):tre(t,e,r)}function Nae(t,e,r){return(e.slice(-4)===".bin"?xae:AF)(t)}function Pae(t,e,r,n,i){return(e.slice(-4)===".bin"?Wse:bF)(t,r,n,i)}function Rae(t,e,r){return(e.slice(-4)===".bin"?Cte:sF)(t,r)}function Fae(t,e,r){return(e.slice(-4)===".bin"?Cee:QR)(t,r)}function Lae(t,e,r){return(e.slice(-4)===".bin"?xre:uF)(t)}function Dae(t){return(t.slice(-4)===".bin"?ere:lF)()}var CF=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,IF=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function nc(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var i=t.match(CF),s,a,o,l;if(i)for(l=0;l!=i.length;++l)s=i[l].match(IF),(a=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(a+1),n[o]=s[2].slice(1,s[2].length-1));return n}function Oae(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(CF),i,s,a,o;if(n)for(o=0;o!=n.length;++o)i=n[o].match(IF),(s=i[1].indexOf(":"))===-1?r[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?a="xmlns"+i[1].slice(6):a=i[1].slice(s+1),r[a]=i[2].slice(1,i[2].length-1));return r}var wm;function Mae(t,e){var r=wm[t]||wn(t);return r==="General"?Od(e):Dl(r,e)}function jae(t,e,r,n){var i=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=hi(n);break;case"i2":case"int":i=parseInt(n,10);break;case"r4":case"float":i=parseFloat(n);break;case"date":case"dateTime.tz":i=gi(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[wn(e)]=i}function Bae(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||ef[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Hm(t.v):t.w=Od(t.v):t.w=Mae(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=wm[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&r1(n)){var i=ud(t.v);i&&(t.t="d",t.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(s){if(r.WTF)throw s}}}function Vae(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=Jee[n.Pattern]||n.Pattern)}t[e.ID]=e}function Uae(t,e,r,n,i,s,a,o,l,c){var f="General",d=n.StyleID,m={};c=c||{};var p=[],_=0;for(d===void 0&&o&&(d=o.StyleID),d===void 0&&a&&(d=a.StyleID);s[d]!==void 0&&(s[d].nf&&(f=s[d].nf),s[d].Interior&&p.push(s[d].Interior),!!s[d].Parent);)d=s[d].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=hi(t);break;case"String":n.t="s",n.r=$k(wn(t)),n.v=t.indexOf("<")>-1?wn(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(gi(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=wn(t):n.v<60&&(n.v=n.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=ER[t],c.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=$k(e||t));break}if(Bae(n,f,c),c.cellFormula!==!1)if(n.Formula){var w=wn(n.Formula);w.charCodeAt(0)==61&&(w=w.slice(1)),n.f=op(w,i),delete n.Formula,n.ArrayRange=="RC"?n.F=op("RC:RC",i):n.ArrayRange&&(n.F=op(n.ArrayRange,i),l.push([_n(n.F),n.F]))}else for(_=0;_<l.length;++_)i.r>=l[_][0].s.r&&i.r<=l[_][0].e.r&&i.c>=l[_][0].s.c&&i.c<=l[_][0].e.c&&(n.F=l[_][1]);c.cellStyles&&(p.forEach(function(b){!m.patternType&&b.patternType&&(m.patternType=b.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function zae(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function Jw(t,e){var r=e||{};n1();var n=tm(qb(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Xn(n));var i=n.slice(0,1024).toLowerCase(),s=!1;if(i=i.replace(/".*?"/g,""),(i.indexOf(">")&1023)>Math.min(i.indexOf(",")&1023,i.indexOf(";")&1023)){var a=xi(r);return a.type="string",Fp.to_workbook(n,a)}if(i.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(st){i.indexOf("<"+st)>=0&&(s=!0)}),s)return Aoe(n,r);wm={"General Number":"General","General Date":Tr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Tr[15],"Short Date":Tr[14],"Long Time":Tr[19],"Medium Time":Tr[18],"Short Time":Tr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Tr[2],Standard:Tr[4],Percent:Tr[10],Scientific:Tr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,f={},d=[],m=r.dense?[]:{},p="",_={},w={},b=nc('<Data ss:Type="String">'),k=0,F=0,N=0,B={s:{r:2e6,c:2e6},e:{r:0,c:0}},X={},G={},P="",A=0,T=[],O={},I={},D=0,M=[],ie=[],be={},Ne=[],we,le=!1,J=[],ue=[],ee={},C=0,U=0,W={Sheets:[],WBProps:{date1904:!1}},Y={};Gm.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ae="";o=Gm.exec(n);)switch(o[3]=(ae=o[3]).toLowerCase()){case"data":if(ae=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?Uae(n.slice(k,o.index),P,b,l[l.length-1][0]=="comment"?be:_,{c:F,r:N},X,Ne[F],w,J,r):(P="",b=nc(o[0]),k=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(ie.length>0&&(_.c=ie),(!r.sheetRows||r.sheetRows>N)&&_.v!==void 0&&(r.dense?(m[N]||(m[N]=[]),m[N][F]=_):m[Vi(F)+xs(N)]=_),_.HRef&&(_.l={Target:wn(_.HRef)},_.HRefScreenTip&&(_.l.Tooltip=_.HRefScreenTip),delete _.HRef,delete _.HRefScreenTip),(_.MergeAcross||_.MergeDown)&&(C=F+(parseInt(_.MergeAcross,10)|0),U=N+(parseInt(_.MergeDown,10)|0),T.push({s:{c:F,r:N},e:{c:C,r:U}})),!r.sheetStubs)_.MergeAcross?F=C+1:++F;else if(_.MergeAcross||_.MergeDown){for(var pe=F;pe<=C;++pe)for(var he=N;he<=U;++he)(pe>F||he>N)&&(r.dense?(m[he]||(m[he]=[]),m[he][pe]={t:"z"}):m[Vi(pe)+xs(he)]={t:"z"});F=C+1}else++F;else _=Oae(o[0]),_.Index&&(F=+_.Index-1),F<B.s.c&&(B.s.c=F),F>B.e.c&&(B.e.c=F),o[0].slice(-2)==="/>"&&++F,ie=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(N<B.s.r&&(B.s.r=N),N>B.e.r&&(B.e.r=N),o[0].slice(-2)==="/>"&&(w=nc(o[0]),w.Index&&(N=+w.Index-1)),F=0,++N):(w=nc(o[0]),w.Index&&(N=+w.Index-1),ee={},(w.AutoFitHeight=="0"||w.Height)&&(ee.hpx=parseInt(w.Height,10),ee.hpt=Jm(ee.hpx),ue[N]=ee),w.Hidden=="1"&&(ee.hidden=!0,ue[N]=ee));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));d.push(p),B.s.r<=B.e.r&&B.s.c<=B.e.c&&(m["!ref"]=Vr(B),r.sheetRows&&r.sheetRows<=B.e.r&&(m["!fullref"]=m["!ref"],B.e.r=r.sheetRows-1,m["!ref"]=Vr(B))),T.length&&(m["!merges"]=T),Ne.length>0&&(m["!cols"]=Ne),ue.length>0&&(m["!rows"]=ue),f[p]=m}else B={s:{r:2e6,c:2e6},e:{r:0,c:0}},N=F=0,l.push([o[3],!1]),c=nc(o[0]),p=wn(c.Name),m=r.dense?[]:{},T=[],J=[],ue=[],Y={name:p,Hidden:0},W.Sheets.push(Y);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),Ne=[],le=!1}break;case"style":o[1]==="/"?Vae(X,G,r):G=nc(o[0]);break;case"numberformat":G.nf=wn(nc(o[0]).Format||"General"),wm[G.nf]&&(G.nf=wm[G.nf]);for(var xe=0;xe!=392&&Tr[xe]!=G.nf;++xe);if(xe==392){for(xe=57;xe!=392;++xe)if(Tr[xe]==null){Mu(G.nf,xe);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(we=nc(o[0]),we.Hidden&&(we.hidden=!0,delete we.Hidden),we.Width&&(we.wpx=parseInt(we.Width,10)),!le&&we.wpx>10){le=!0,ro=nF;for(var Ee=0;Ee<Ne.length;++Ee)Ne[Ee]&&ph(Ne[Ee])}le&&ph(we),Ne[we.Index-1||Ne.length]=we;for(var Fe=0;Fe<+we.Span;++Fe)Ne[Ne.length]=xi(we);break;case"namedrange":if(o[1]==="/")break;W.Names||(W.Names=[]);var oe=Nr(o[0]),Je={Name:oe.Name,Ref:op(oe.RefersTo.slice(1),{r:0,c:0})};W.Sheets.length>0&&(Je.Sheet=W.Sheets.length-1),W.Names.push(Je);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?P+=n.slice(A,o.index):A=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;G.Interior=nc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?hJ(O,ae,n.slice(D,o.index)):D=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));zae(be),ie.push(be)}else l.push([o[3],!1]),c=nc(o[0]),be={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Re=nc(o[0]);m["!autofilter"]={ref:op(Re.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return PT(n,r);var fe=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:fe=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:fe=!1}break;case"excelworkbook":switch(o[3]){case"date1904":W.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:fe=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:fe=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(D,o.index)){case"SheetHidden":Y.Hidden=1;break;case"SheetVeryHidden":Y.Hidden=2;break}else D=o.index+o[0].length;break;case"header":m["!margins"]||vd(m["!margins"]={},"xlml"),isNaN(+Nr(o[0]).Margin)||(m["!margins"].header=+Nr(o[0]).Margin);break;case"footer":m["!margins"]||vd(m["!margins"]={},"xlml"),isNaN(+Nr(o[0]).Margin)||(m["!margins"].footer=+Nr(o[0]).Margin);break;case"pagemargins":var ot=Nr(o[0]);m["!margins"]||vd(m["!margins"]={},"xlml"),isNaN(+ot.Top)||(m["!margins"].top=+ot.Top),isNaN(+ot.Left)||(m["!margins"].left=+ot.Left),isNaN(+ot.Right)||(m["!margins"].right=+ot.Right),isNaN(+ot.Bottom)||(m["!margins"].bottom=+ot.Bottom);break;case"displayrighttoleft":W.Views||(W.Views=[]),W.Views[0]||(W.Views[0]={}),W.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:fe=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:fe=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:fe=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:fe=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:fe=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:fe=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:fe=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:fe=!1}break;case"smarttags":break;default:fe=!1;break}if(fe||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?jae(I,ae,M,n.slice(D,o.index)):(M=o,D=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var et={};return!r.bookSheets&&!r.bookProps&&(et.Sheets=f),et.SheetNames=d,et.Workbook=W,et.SSF=xi(Tr),et.Props=O,et.Custprops=I,et}function N5(t,e){switch(g3(e=e||{}),e.type||"base64"){case"base64":return Jw(ul(t),e);case"binary":case"buffer":case"file":return Jw(t,e);case"array":return Jw(Ch(t),e)}}function $ae(t,e){var r=[];return t.Props&&r.push(dJ(t.Props,e)),t.Custprops&&r.push(pJ(t.Props,t.Custprops)),r.join("")}function Hae(){return""}function Wae(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,i){var s=[];s.push(Bt("NumberFormat",null,{"ss:Format":Hn(Tr[n.numFmtId])}));var a={"ss:ID":"s"+(21+i)};r.push(Bt("Style",s.join(""),a))}),Bt("Styles",r.join(""))}function NF(t){return Bt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+u3(t.Ref,{r:0,c:0})})}function qae(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var i=e[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||r.push(NF(i)))}return Bt("Names",r.join(""))}function Gae(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(NF(o)))}return s.join("")}function Kae(t,e,r,n){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(Bt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(Bt("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(Bt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)i.push(Bt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(ka("ProtectContents","True")),t["!protect"].objects&&i.push(ka("ProtectObjects","True")),t["!protect"].scenarios&&i.push(ka("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(ka("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(ka("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){t["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":Bt("WorksheetOptions",i.join(""),{xmlns:tl.x})}function Xae(t){return t.map(function(e){var r=gQ(e.t||""),n=Bt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Bt("Comment",n,{"ss:Author":e.a})}).join("")}function Yae(t,e,r,n,i,s,a){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+Hn(u3(t.f,a))),t.F&&t.F.slice(0,e.length)==e){var l=Ui(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=Hn(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=Hn(t.l.Tooltip))),r["!merges"])for(var c=r["!merges"],f=0;f!=c.length;++f)c[f].s.c!=a.c||c[f].s.r!=a.r||(c[f].e.c>c[f].s.c&&(o["ss:MergeAcross"]=c[f].e.c-c[f].s.c),c[f].e.r>c[f].s.r&&(o["ss:MergeDown"]=c[f].e.r-c[f].s.r));var d="",m="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":d="Number",m=String(t.v);break;case"b":d="Boolean",m=t.v?"1":"0";break;case"e":d="Error",m=ef[t.v];break;case"d":d="DateTime",m=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Tr[14]);break;case"s":d="String",m=mQ(t.v||"");break}var p=Nh(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=a.c+1;var _=t.v!=null?m:"",w=t.t=="z"?"":'<Data ss:Type="'+d+'">'+_+"</Data>";return(t.c||[]).length>0&&(w+=Xae(t.c)),Bt("Cell",w,o)}function Qae(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Lp(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Jae(t,e,r,n){if(!t["!ref"])return"";var i=_n(t["!ref"]),s=t["!merges"]||[],a=0,o=[];t["!cols"]&&t["!cols"].forEach(function(b,k){ph(b);var F=!!b.width,N=yy(k,b),B={"ss:Index":k+1};F&&(B["ss:Width"]=Ym(N.width)),b.hidden&&(B["ss:Hidden"]="1"),o.push(Bt("Column",null,B))});for(var l=Array.isArray(t),c=i.s.r;c<=i.e.r;++c){for(var f=[Qae(c,(t["!rows"]||[])[c])],d=i.s.c;d<=i.e.c;++d){var m=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>d)&&!(s[a].s.r>c)&&!(s[a].e.c<d)&&!(s[a].e.r<c)){(s[a].s.c!=d||s[a].s.r!=c)&&(m=!0);break}if(!m){var p={r:c,c:d},_=Ir(p),w=l?(t[c]||[])[d]:t[_];f.push(Yae(w,_,t,e,r,n,p))}}f.push("</Row>"),f.length>2&&o.push(f.join(""))}return o.join("")}function Zae(t,e,r){var n=[],i=r.SheetNames[t],s=r.Sheets[i],a=s?Gae(s,e,t,r):"";return a.length>0&&n.push("<Names>"+a+"</Names>"),a=s?Jae(s,e,t,r):"",a.length>0&&n.push("<Table>"+a+"</Table>"),n.push(Kae(s,e,t,r)),n.join("")}function eoe(t,e){e||(e={}),t.SSF||(t.SSF=xi(Tr)),t.SSF&&(n1(),hy(t.SSF),e.revssf=py(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Nh(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push($ae(t,e)),r.push(Hae()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Bt("Worksheet",Zae(n,e,t),{"ss:Name":Hn(t.SheetNames[n])}));return r[2]=Wae(t,e),r[3]=qae(t),vs+Bt("Workbook",r.join(""),{xmlns:tl.ss,"xmlns:o":tl.o,"xmlns:x":tl.x,"xmlns:ss":tl.ss,"xmlns:dt":tl.dt,"xmlns:html":tl.html})}function toe(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=qQ(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=GQ(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var roe=[60,1084,2066,2165,2175];function noe(t,e,r,n,i){var s=n,a=[],o=r.slice(r.l,r.l+s);if(i&&i.enc&&i.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:i.enc.insitu(o)}a.push(o),r.l+=s;for(var l=Fu(r,r.l),c=P5[l],f=0;c!=null&&roe.indexOf(l)>-1;)s=Fu(r,r.l+2),f=r.l+4,l==2066?f+=4:(l==2165||l==2175)&&(f+=12),o=r.slice(f,r.l+4+s),a.push(o),r.l+=4+s,c=P5[l=Fu(r,r.l)];var d=ia(a);Ea(d,0);var m=0;d.lens=[];for(var p=0;p<a.length;++p)d.lens.push(m),m+=a[p].length;if(d.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+d.length+" < "+n;return e.f(d,d.length,i)}function Pc(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Tr[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||ef[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Hm(t.v):t.w=Od(t.v):t.w=Dl(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&r1(Tr[n]||String(n))){var i=ud(t.v);i&&(t.t="d",t.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function Gx(t,e,r){return{v:t,ixfe:e,t:r}}function ioe(t,e){var r={opts:{}},n={},i=e.dense?[]:{},s={},a={},o=null,l=[],c="",f={},d,m="",p,_,w,b,k={},F=[],N,B,X=[],G=[],P={Sheets:[],WBProps:{date1904:!1},Views:[{}]},A={},T=function(wt){return wt<8?md[wt]:wt<64&&G[wt-8]||md[wt]},O=function(wt,Nt,cr){var er=Nt.XF.data;if(!(!er||!er.patternType||!cr||!cr.cellStyles)){Nt.s={},Nt.s.patternType=er.patternType;var qt;(qt=Xm(T(er.icvFore)))&&(Nt.s.fgColor={rgb:qt}),(qt=Xm(T(er.icvBack)))&&(Nt.s.bgColor={rgb:qt})}},I=function(wt,Nt,cr){if(!(ee>1)&&!(cr.sheetRows&&wt.r>=cr.sheetRows)){if(cr.cellStyles&&Nt.XF&&Nt.XF.data&&O(wt,Nt,cr),delete Nt.ixfe,delete Nt.XF,d=wt,m=Ir(wt),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),wt.r<a.s.r&&(a.s.r=wt.r),wt.c<a.s.c&&(a.s.c=wt.c),wt.r+1>a.e.r&&(a.e.r=wt.r+1),wt.c+1>a.e.c&&(a.e.c=wt.c+1),cr.cellFormula&&Nt.f){for(var er=0;er<F.length;++er)if(!(F[er][0].s.c>wt.c||F[er][0].s.r>wt.r)&&!(F[er][0].e.c<wt.c||F[er][0].e.r<wt.r)){Nt.F=Vr(F[er][0]),(F[er][0].s.c!=wt.c||F[er][0].s.r!=wt.r)&&delete Nt.f,Nt.f&&(Nt.f=""+eo(F[er][1],a,wt,J,D));break}}cr.dense?(i[wt.r]||(i[wt.r]=[]),i[wt.r][wt.c]=Nt):i[m]=Nt}},D={enc:!1,sbcch:0,snames:[],sharedf:k,arrayf:F,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(D.password=e.password);var M,ie=[],be=[],Ne=[],we=[],le=!1,J=[];J.SheetNames=D.snames,J.sharedf=D.sharedf,J.arrayf=D.arrayf,J.names=[],J.XTI=[];var ue=0,ee=0,C=0,U=[],W=[],Y;D.codepage=1200,sc(1200);for(var ae=!1;t.l<t.length-1;){var pe=t.l,he=t.read_shift(2);if(he===0&&ue===10)break;var xe=t.l===t.length?0:t.read_shift(2),Ee=P5[he];if(Ee&&Ee.f){if(e.bookSheets&&ue===133&&he!==133)break;if(ue=he,Ee.r===2||Ee.r==12){var Fe=t.read_shift(2);if(xe-=2,!D.enc&&Fe!==he&&((Fe&255)<<8|Fe>>8)!==he)throw new Error("rt mismatch: "+Fe+"!="+he);Ee.r==12&&(t.l+=10,xe-=10)}var oe={};if(he===10?oe=Ee.f(t,xe,D):oe=noe(he,Ee,t,xe,D),ee==0&&[9,521,1033,2057].indexOf(ue)===-1)continue;switch(he){case 34:r.opts.Date1904=P.WBProps.date1904=oe;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(D.enc||(t.l=0),D.enc=oe,!e.password)throw new Error("File is password-protected");if(oe.valid==null)throw new Error("Encryption scheme unsupported");if(!oe.valid)throw new Error("Password is incorrect");break;case 92:D.lastuser=oe;break;case 66:var Je=Number(oe);switch(Je){case 21010:Je=1200;break;case 32768:Je=1e4;break;case 32769:Je=1252;break}sc(D.codepage=Je),ae=!0;break;case 317:D.rrtabid=oe;break;case 25:D.winlocked=oe;break;case 439:r.opts.RefreshAll=oe;break;case 12:r.opts.CalcCount=oe;break;case 16:r.opts.CalcDelta=oe;break;case 17:r.opts.CalcIter=oe;break;case 13:r.opts.CalcMode=oe;break;case 14:r.opts.CalcPrecision=oe;break;case 95:r.opts.CalcSaveRecalc=oe;break;case 15:D.CalcRefMode=oe;break;case 2211:r.opts.FullCalc=oe;break;case 129:oe.fDialog&&(i["!type"]="dialog"),oe.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),oe.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 224:X.push(oe);break;case 430:J.push([oe]),J[J.length-1].XTI=[];break;case 35:case 547:J[J.length-1].push(oe);break;case 24:case 536:Y={Name:oe.Name,Ref:eo(oe.rgce,a,null,J,D)},oe.itab>0&&(Y.Sheet=oe.itab-1),J.names.push(Y),J[0]||(J[0]=[],J[0].XTI=[]),J[J.length-1].push(oe),oe.Name=="_xlnm._FilterDatabase"&&oe.itab>0&&oe.rgce&&oe.rgce[0]&&oe.rgce[0][0]&&oe.rgce[0][0][0]=="PtgArea3d"&&(W[oe.itab-1]={ref:Vr(oe.rgce[0][0][1][2])});break;case 22:D.ExternCount=oe;break;case 23:J.length==0&&(J[0]=[],J[0].XTI=[]),J[J.length-1].XTI=J[J.length-1].XTI.concat(oe),J.XTI=J.XTI.concat(oe);break;case 2196:if(D.biff<8)break;Y!=null&&(Y.Comment=oe[1]);break;case 18:i["!protect"]=oe;break;case 19:oe!==0&&D.WTF&&console.error("Password verifier: "+oe);break;case 133:s[oe.pos]=oe,D.snames.push(oe.name);break;case 10:{if(--ee)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,i["!ref"]=Vr(a),e.sheetRows&&e.sheetRows<=a.e.r){var Re=a.e.r;a.e.r=e.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=Vr(a),a.e.r=Re}a.e.r++,a.e.c++}ie.length>0&&(i["!merges"]=ie),be.length>0&&(i["!objects"]=be),Ne.length>0&&(i["!cols"]=Ne),we.length>0&&(i["!rows"]=we),P.Sheets.push(A)}c===""?f=i:n[c]=i,i=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(D.biff===8&&(D.biff={9:2,521:3,1033:4}[he]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[oe.BIFFVer]||8),D.biffguess=oe.BIFFVer==0,oe.BIFFVer==0&&oe.dt==4096&&(D.biff=5,ae=!0,sc(D.codepage=28591)),D.biff==8&&oe.BIFFVer==0&&oe.dt==16&&(D.biff=2),ee++)break;if(i=e.dense?[]:{},D.biff<8&&!ae&&(ae=!0,sc(D.codepage=e.codepage||1252)),D.biff<5||oe.BIFFVer==0&&oe.dt==4096){c===""&&(c="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var fe={pos:t.l-xe,name:c};s[fe.pos]=fe,D.snames.push(c)}else c=(s[pe]||{name:""}).name;oe.dt==32&&(i["!type"]="chart"),oe.dt==64&&(i["!type"]="macro"),ie=[],be=[],D.arrayf=F=[],Ne=[],we=[],le=!1,A={Hidden:(s[pe]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:i["!type"]=="chart"&&(e.dense?(i[oe.r]||[])[oe.c]:i[Ir({c:oe.c,r:oe.r})])&&++oe.c,N={ixfe:oe.ixfe,XF:X[oe.ixfe]||{},v:oe.val,t:"n"},C>0&&(N.z=U[N.ixfe>>8&63]),Pc(N,e,r.opts.Date1904),I({c:oe.c,r:oe.r},N,e);break;case 5:case 517:N={ixfe:oe.ixfe,XF:X[oe.ixfe],v:oe.val,t:oe.t},C>0&&(N.z=U[N.ixfe>>8&63]),Pc(N,e,r.opts.Date1904),I({c:oe.c,r:oe.r},N,e);break;case 638:N={ixfe:oe.ixfe,XF:X[oe.ixfe],v:oe.rknum,t:"n"},C>0&&(N.z=U[N.ixfe>>8&63]),Pc(N,e,r.opts.Date1904),I({c:oe.c,r:oe.r},N,e);break;case 189:for(var ot=oe.c;ot<=oe.C;++ot){var et=oe.rkrec[ot-oe.c][0];N={ixfe:et,XF:X[et],v:oe.rkrec[ot-oe.c][1],t:"n"},C>0&&(N.z=U[N.ixfe>>8&63]),Pc(N,e,r.opts.Date1904),I({c:ot,r:oe.r},N,e)}break;case 6:case 518:case 1030:{if(oe.val=="String"){o=oe;break}if(N=Gx(oe.val,oe.cell.ixfe,oe.tt),N.XF=X[N.ixfe],e.cellFormula){var st=oe.formula;if(st&&st[0]&&st[0][0]&&st[0][0][0]=="PtgExp"){var K=st[0][0][1][0],Te=st[0][0][1][1],Ue=Ir({r:K,c:Te});k[Ue]?N.f=""+eo(oe.formula,a,oe.cell,J,D):N.F=((e.dense?(i[K]||[])[Te]:i[Ue])||{}).F}else N.f=""+eo(oe.formula,a,oe.cell,J,D)}C>0&&(N.z=U[N.ixfe>>8&63]),Pc(N,e,r.opts.Date1904),I(oe.cell,N,e),o=oe}break;case 7:case 519:if(o)o.val=oe,N=Gx(oe,o.cell.ixfe,"s"),N.XF=X[N.ixfe],e.cellFormula&&(N.f=""+eo(o.formula,a,o.cell,J,D)),C>0&&(N.z=U[N.ixfe>>8&63]),Pc(N,e,r.opts.Date1904),I(o.cell,N,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{F.push(oe);var ut=Ir(oe[0].s);if(p=e.dense?(i[oe[0].s.r]||[])[oe[0].s.c]:i[ut],e.cellFormula&&p){if(!o||!ut||!p)break;p.f=""+eo(oe[1],a,oe[0],J,D),p.F=Vr(oe[0])}}break;case 1212:{if(!e.cellFormula)break;if(m){if(!o)break;k[Ir(o.cell)]=oe[0],p=e.dense?(i[o.cell.r]||[])[o.cell.c]:i[Ir(o.cell)],(p||{}).f=""+eo(oe[0],a,d,J,D)}}break;case 253:N=Gx(l[oe.isst].t,oe.ixfe,"s"),l[oe.isst].h&&(N.h=l[oe.isst].h),N.XF=X[N.ixfe],C>0&&(N.z=U[N.ixfe>>8&63]),Pc(N,e,r.opts.Date1904),I({c:oe.c,r:oe.r},N,e);break;case 513:e.sheetStubs&&(N={ixfe:oe.ixfe,XF:X[oe.ixfe],t:"z"},C>0&&(N.z=U[N.ixfe>>8&63]),Pc(N,e,r.opts.Date1904),I({c:oe.c,r:oe.r},N,e));break;case 190:if(e.sheetStubs)for(var pt=oe.c;pt<=oe.C;++pt){var xt=oe.ixfe[pt-oe.c];N={ixfe:xt,XF:X[xt],t:"z"},C>0&&(N.z=U[N.ixfe>>8&63]),Pc(N,e,r.opts.Date1904),I({c:pt,r:oe.r},N,e)}break;case 214:case 516:case 4:N=Gx(oe.val,oe.ixfe,"s"),N.XF=X[N.ixfe],C>0&&(N.z=U[N.ixfe>>8&63]),Pc(N,e,r.opts.Date1904),I({c:oe.c,r:oe.r},N,e);break;case 0:case 512:ee===1&&(a=oe);break;case 252:l=oe;break;case 1054:if(D.biff==4){U[C++]=oe[1];for(var yt=0;yt<C+163&&Tr[yt]!=oe[1];++yt);yt>=163&&Mu(oe[1],C+163)}else Mu(oe[1],oe[0]);break;case 30:{U[C++]=oe;for(var ht=0;ht<C+163&&Tr[ht]!=oe;++ht);ht>=163&&Mu(oe,C+163)}break;case 229:ie=ie.concat(oe);break;case 93:be[oe.cmo[0]]=D.lastobj=oe;break;case 438:D.lastobj.TxO=oe;break;case 127:D.lastobj.ImData=oe;break;case 440:for(b=oe[0].s.r;b<=oe[0].e.r;++b)for(w=oe[0].s.c;w<=oe[0].e.c;++w)p=e.dense?(i[b]||[])[w]:i[Ir({c:w,r:b})],p&&(p.l=oe[1]);break;case 2048:for(b=oe[0].s.r;b<=oe[0].e.r;++b)for(w=oe[0].s.c;w<=oe[0].e.c;++w)p=e.dense?(i[b]||[])[w]:i[Ir({c:w,r:b})],p&&p.l&&(p.l.Tooltip=oe[1]);break;case 28:{if(D.biff<=5&&D.biff>=2)break;p=e.dense?(i[oe[0].r]||[])[oe[0].c]:i[Ir(oe[0])];var Mt=be[oe[2]];p||(e.dense?(i[oe[0].r]||(i[oe[0].r]=[]),p=i[oe[0].r][oe[0].c]={t:"z"}):p=i[Ir(oe[0])]={t:"z"},a.e.r=Math.max(a.e.r,oe[0].r),a.s.r=Math.min(a.s.r,oe[0].r),a.e.c=Math.max(a.e.c,oe[0].c),a.s.c=Math.min(a.s.c,oe[0].c)),p.c||(p.c=[]),_={a:oe[1],t:Mt.TxO.t},p.c.push(_)}break;case 2173:Wte(X[oe.ixfe],oe.ext);break;case 125:{if(!D.cellStyles)break;for(;oe.e>=oe.s;)Ne[oe.e--]={width:oe.w/256,level:oe.level||0,hidden:!!(oe.flags&1)},le||(le=!0,o3(oe.w/256)),ph(Ne[oe.e+1])}break;case 520:{var Lt={};oe.level!=null&&(we[oe.r]=Lt,Lt.level=oe.level),oe.hidden&&(we[oe.r]=Lt,Lt.hidden=!0),oe.hpt&&(we[oe.r]=Lt,Lt.hpt=oe.hpt,Lt.hpx=Lp(oe.hpt))}break;case 38:case 39:case 40:case 41:i["!margins"]||vd(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[he]]=oe;break;case 161:i["!margins"]||vd(i["!margins"]={}),i["!margins"].header=oe.header,i["!margins"].footer=oe.footer;break;case 574:oe.RTL&&(P.Views[0].RTL=!0);break;case 146:G=oe;break;case 2198:M=oe;break;case 140:B=oe;break;case 442:c?A.CodeName=oe||A.name:P.WBProps.CodeName=oe||"ThisWorkbook";break}}else Ee||console.error("Missing Info for XLS Record 0x"+he.toString(16)),t.l+=xe}return r.SheetNames=es(s).sort(function(Ot,wt){return Number(Ot)-Number(wt)}).map(function(Ot){return s[Ot].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&W.forEach(function(Ot,wt){r.Sheets[r.SheetNames[wt]]["!autofilter"]=Ot}),r.Strings=l,r.SSF=xi(Tr),D.enc&&(r.Encryption=D.enc),M&&(r.Themes=M),r.Metadata={},B!==void 0&&(r.Metadata.Country=B),J.names.length>0&&(P.Names=J.names),r.Workbook=P,r}var _m={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function soe(t,e,r){var n=yr.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var i=oT(n,S5,_m.DSI);for(var s in i)e[s]=i[s]}catch(c){if(r.WTF)throw c}var a=yr.find(t,"/!SummaryInformation");if(a&&a.size>0)try{var o=oT(a,k5,_m.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(c){if(r.WTF)throw c}e.HeadingPairs&&e.TitlesOfParts&&(IR(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function aoe(t,e){var r=[],n=[],i=[],s=0,a,o=Mk(S5,"n"),l=Mk(k5,"n");if(t.Props)for(a=es(t.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(l,a[s])?n:i).push([a[s],t.Props[a[s]]]);if(t.Custprops)for(a=es(t.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(l,a[s])?n:i).push([a[s],t.Custprops[a[s]]]);var c=[];for(s=0;s<i.length;++s)OR.indexOf(i[s][0])>-1||CR.indexOf(i[s][0])>-1||i[s][1]!=null&&c.push(i[s]);n.length&&yr.utils.cfb_add(e,"/SummaryInformation",lT(n,_m.SI,l,k5)),(r.length||c.length)&&yr.utils.cfb_add(e,"/DocumentSummaryInformation",lT(r,_m.DSI,o,S5,c.length?c:null,_m.UDI))}function PF(t,e){e||(e={}),g3(e),Mb(),e.codepage&&Ob(e.codepage);var r,n;if(t.FullPaths){if(yr.find(t,"/encryption"))throw new Error("File is password-protected");r=yr.find(t,"!CompObj"),n=yr.find(t,"/Workbook")||yr.find(t,"/Book")}else{switch(e.type){case"base64":t=nl(ul(t));break;case"binary":t=nl(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Ea(t,0),n={content:t}}var i,s;if(r&&toe(r),e.bookProps&&!e.bookSheets)i={};else{var a=Kr?"buffer":"array";if(n&&n.content)i=ioe(n.content,e);else if((s=yr.find(t,"PerfectOffice_MAIN"))&&s.content)i=xd.to_workbook(s.content,(e.type=a,e));else if((s=yr.find(t,"NativeContent_MAIN"))&&s.content)i=xd.to_workbook(s.content,(e.type=a,e));else throw(s=yr.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&yr.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=yre(t))}var o={};return t.FullPaths&&soe(t,o,e),i.Props=i.Custprops=o,e.bookFiles&&(i.cfb=t),i}function ooe(t,e){var r=e||{},n=yr.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return yr.utils.cfb_add(n,i,RF(t,r)),r.biff==8&&(t.Props||t.Custprops)&&aoe(t,n),r.biff==8&&t.vbaraw&&wre(n,yr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var Zm={0:{f:Pie},1:{f:Bie},2:{f:ise},3:{f:Gie},4:{f:$ie},5:{f:tse},6:{f:cse},7:{f:Qie},8:{f:gse},9:{f:mse},10:{f:dse},11:{f:pse},12:{f:Uie},13:{f:ase},14:{f:Xie},15:{f:Wie},16:{f:EF},17:{f:fse},18:{f:Zie},19:{f:Qb},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:fae},40:{},42:{},43:{f:cte},44:{f:ote},45:{f:hte},46:{f:pte},47:{f:dte},48:{},49:{f:LQ},50:{},51:{f:Kte},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:GR},62:{f:lse},63:{f:nre},64:{f:Rse},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:oo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Cse},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Mie},148:{f:Lie,p:16},151:{f:bse},152:{},153:{f:lae},154:{},155:{},156:{f:aae},157:{},158:{},159:{T:1,f:See},160:{T:-1},161:{T:1,f:Zd},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:xse},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:qte},336:{T:-1},337:{f:Qte,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:E5},357:{},358:{},359:{},360:{T:1},361:{},362:{f:qR},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Ese},427:{f:Sse},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Tse},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Oie},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:wse},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:E5},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:pre},633:{T:1},634:{T:-1},635:{T:1,f:hre},636:{T:-1},637:{f:jQ},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Xse},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Fse},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},P5={6:{f:Yw},10:{f:Pf},12:{f:Cs},13:{f:Cs},14:{f:us},15:{f:us},16:{f:no},17:{f:us},18:{f:us},19:{f:Cs},20:{f:pT},21:{f:pT},23:{f:qR},24:{f:gT},25:{f:us},26:{},27:{},28:{f:FZ},29:{},34:{f:us},35:{f:mT},38:{f:no},39:{f:no},40:{f:no},41:{f:no},42:{f:us},43:{f:us},47:{f:Wee},49:{f:aZ},51:{f:Cs},60:{},61:{f:tZ},64:{f:us},65:{f:sZ},66:{f:Cs},77:{},80:{},81:{},82:{},85:{f:Cs},89:{},90:{},91:{},92:{f:HJ},93:{f:OZ},94:{},95:{f:us},96:{},97:{},99:{f:us},125:{f:GR},128:{f:_Z},129:{f:qJ},130:{f:Cs},131:{f:us},132:{f:us},133:{f:GJ},134:{},140:{f:HZ},141:{f:Cs},144:{},146:{f:GZ},151:{},152:{},153:{},154:{},155:{},156:{f:Cs},157:{},158:{},160:{f:eee},161:{f:YZ},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:xZ},190:{f:vZ},193:{f:Pf},197:{},198:{},199:{},200:{},201:{},202:{f:us},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Cs},220:{},221:{f:us},222:{},224:{f:wZ},225:{f:$J},226:{f:Pf},227:{},229:{f:LZ},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:XJ},253:{f:lZ},255:{f:QJ},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:MR},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:us},353:{f:Pf},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:TZ},431:{f:us},432:{},433:{},434:{},437:{},438:{f:BZ},439:{f:us},440:{f:VZ},441:{},442:{f:Fg},443:{},444:{f:Cs},445:{},446:{},448:{f:Pf},449:{f:eZ,r:2},450:{f:Pf},512:{f:fT},513:{f:ZZ},515:{f:SZ},516:{f:uZ},517:{f:dT},519:{f:tee},520:{f:JJ},523:{},545:{f:xT},549:{f:uT},566:{},574:{f:nZ},638:{f:gZ},659:{},1048:{},1054:{f:hZ},1084:{},1212:{f:NZ},2048:{f:zZ},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Hx},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Pf},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:KZ,r:12},2173:{f:Hte,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:us,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:IZ,r:12},2197:{},2198:{f:jte,r:12},2199:{},2200:{},2201:{},2202:{f:PZ,r:12},2203:{f:Pf},2204:{},2205:{},2206:{},2207:{},2211:{f:ZJ},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Cs},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:QZ},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:qZ},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:fT},1:{},2:{f:aee},3:{f:iee},4:{f:nee},5:{f:dT},7:{f:lee},8:{},9:{f:Hx},11:{},22:{f:Cs},30:{f:pZ},31:{},32:{},33:{f:xT},36:{},37:{f:uT},50:{f:cee},62:{},52:{},67:{},68:{f:Cs},69:{},86:{},126:{},127:{f:ree},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:uee},223:{},234:{},354:{},421:{},518:{f:Yw},521:{f:Hx},536:{f:gT},547:{f:mT},561:{},579:{},1030:{f:Yw},1033:{f:Hx},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Ut(t,e,r,n){var i=e;if(!isNaN(i)){var s=n||(r||[]).length||0,a=t.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&Kb(r)&&t.push(r)}}function loe(t,e,r,n){var i=(r||[]).length||0;if(i<=8224)return Ut(t,e,r,i);var s=e;if(!isNaN(s)){for(var a=r.parts||[],o=0,l=0,c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;var f=t.next(4);for(f.write_shift(2,s),f.write_shift(2,c),t.push(r.slice(l,l+c)),l+=c;l<i;){for(f=t.next(4),f.write_shift(2,60),c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;f.write_shift(2,c),t.push(r.slice(l,l+c)),l+=c}}}function Mg(t,e,r){return t||(t=ft(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function coe(t,e,r,n){var i=ft(9);return Mg(i,t,e),jR(r,n||"b",i),i}function uoe(t,e,r){var n=ft(8+2*r.length);return Mg(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function foe(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?$s(gi(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?Ut(t,2,oee(r,n,i)):Ut(t,3,see(r,n,i));return;case"b":case"e":Ut(t,5,coe(r,n,e.v,e.t));return;case"s":case"str":Ut(t,4,uoe(r,n,(e.v||"").slice(0,255)));return}Ut(t,1,Mg(null,r,n))}function hoe(t,e,r,n){var i=Array.isArray(e),s=_n(e["!ref"]||"A1"),a,o="",l=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=Vr(s)}for(var c=s.s.r;c<=s.e.r;++c){o=xs(c);for(var f=s.s.c;f<=s.e.c;++f){c===s.s.r&&(l[f]=Vi(f)),a=l[f]+o;var d=i?(e[c]||[])[f]:e[a];d&&foe(t,d,c,f)}}}function doe(t,e){for(var r=e||{},n=Oo(),i=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(i=s);if(i==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Ut(n,r.biff==4?1033:r.biff==3?521:9,i3(t,16,r)),hoe(n,t.Sheets[t.SheetNames[i]],i,r),Ut(n,10),n.end()}function poe(t,e,r){Ut(t,49,oZ({sz:12,name:"Arial"},r))}function moe(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&Ut(t,1054,dZ(i,e[i],r))})}function goe(t,e){var r=ft(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Ut(t,2151,r),r=ft(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),$R(_n(e["!ref"]||"A1"),r),r.write_shift(4,4),Ut(t,2152,r)}function xoe(t,e){for(var r=0;r<16;++r)Ut(t,224,hT({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Ut(t,224,hT(n,0,e))})}function voe(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Ut(t,440,UZ(n)),n[1].Tooltip&&Ut(t,2048,$Z(n))}delete e["!links"]}function yoe(t,e){if(e){var r=0;e.forEach(function(n,i){++r<=256&&n&&Ut(t,125,XZ(yy(i,n),i))})}}function woe(t,e,r,n,i){var s=16+Nh(i.cellXfs,e,i);if(e.v==null&&!e.bf){Ut(t,513,Vd(r,n,s));return}if(e.bf)Ut(t,6,qne(e,r,n,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?$s(gi(e.v)):e.v;Ut(t,515,kZ(r,n,a,s));break;case"b":case"e":Ut(t,517,EZ(r,n,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=h3(i.Strings,e.v,i.revStrings);Ut(t,253,cZ(r,n,o,s))}else Ut(t,516,fZ(r,n,(e.v||"").slice(0,255),s,i));break;default:Ut(t,513,Vd(r,n,s))}}function _oe(t,e,r){var n=Oo(),i=r.SheetNames[t],s=r.Sheets[i]||{},a=(r||{}).Workbook||{},o=(a.Sheets||[])[t]||{},l=Array.isArray(s),c=e.biff==8,f,d="",m=[],p=_n(s["!ref"]||"A1"),_=c?65536:16384;if(p.e.c>255||p.e.r>=_){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,_-1)}Ut(n,2057,i3(r,16,e)),Ut(n,13,Fl(1)),Ut(n,12,Fl(100)),Ut(n,15,xo(!0)),Ut(n,17,xo(!1)),Ut(n,16,jd(.001)),Ut(n,95,xo(!0)),Ut(n,42,xo(!1)),Ut(n,43,xo(!1)),Ut(n,130,Fl(1)),Ut(n,128,bZ()),Ut(n,131,xo(!1)),Ut(n,132,xo(!1)),c&&yoe(n,s["!cols"]),Ut(n,512,mZ(p,e)),c&&(s["!links"]=[]);for(var w=p.s.r;w<=p.e.r;++w){d=xs(w);for(var b=p.s.c;b<=p.e.c;++b){w===p.s.r&&(m[b]=Vi(b)),f=m[b]+d;var k=l?(s[w]||[])[b]:s[f];k&&(woe(n,k,w,b,e),c&&k.l&&s["!links"].push([f,k.l]))}}var F=o.CodeName||o.name||i;return c&&Ut(n,574,iZ((a.Views||[])[0])),c&&(s["!merges"]||[]).length&&Ut(n,229,DZ(s["!merges"])),c&&voe(n,s),Ut(n,442,BR(F)),c&&goe(n,s),Ut(n,10),n.end()}function boe(t,e,r){var n=Oo(),i=(t||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=r.biff==8,l=r.biff==5;if(Ut(n,2057,i3(t,5,r)),r.bookType=="xla"&&Ut(n,135),Ut(n,225,o?Fl(1200):null),Ut(n,193,EJ(2)),l&&Ut(n,191),l&&Ut(n,192),Ut(n,226),Ut(n,92,WJ("SheetJS",r)),Ut(n,66,Fl(o?1200:1252)),o&&Ut(n,353,Fl(0)),o&&Ut(n,448),Ut(n,317,JZ(t.SheetNames.length)),o&&t.vbaraw&&Ut(n,211),o&&t.vbaraw){var c=a.CodeName||"ThisWorkbook";Ut(n,442,BR(c))}Ut(n,156,Fl(17)),Ut(n,25,xo(!1)),Ut(n,18,xo(!1)),Ut(n,19,Fl(0)),o&&Ut(n,431,xo(!1)),o&&Ut(n,444,Fl(0)),Ut(n,61,rZ()),Ut(n,64,xo(!1)),Ut(n,141,Fl(0)),Ut(n,34,xo(eae(t)=="true")),Ut(n,14,xo(!0)),o&&Ut(n,439,xo(!1)),Ut(n,218,Fl(0)),poe(n,t,r),moe(n,t.SSF,r),xoe(n,r),o&&Ut(n,352,xo(!1));var f=n.end(),d=Oo();o&&Ut(d,140,WZ()),o&&r.Strings&&loe(d,252,YJ(r.Strings)),Ut(d,10);var m=d.end(),p=Oo(),_=0,w=0;for(w=0;w<t.SheetNames.length;++w)_+=(o?12:11)+(o?2:1)*t.SheetNames[w].length;var b=f.length+_+m.length;for(w=0;w<t.SheetNames.length;++w){var k=s[w]||{};Ut(p,133,KJ({pos:b,hs:k.Hidden||0,dt:0,name:t.SheetNames[w]},r)),b+=e[w].length}var F=p.end();if(_!=F.length)throw new Error("BS8 "+_+" != "+F.length);var N=[];return f.length&&N.push(f),F.length&&N.push(F),m.length&&N.push(m),ia(N)}function Eoe(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=xi(Tr)),t&&t.SSF&&(n1(),hy(t.SSF),r.revssf=py(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,x3(r),r.cellXfs=[],Nh(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)n[n.length]=_oe(i,r,t);return n.unshift(boe(t,n,r)),ia(n)}function RF(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var i=Mo(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return Eoe(t,e);case 4:case 3:case 2:return doe(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function AT(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var i=t.match(/<table/i);if(!i)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),a=i.index,o=s&&s.index||t.length,l=oQ(t.slice(a,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,f=0,d=0,m=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},_=[];for(a=0;a<l.length;++a){var w=l[a].trim(),b=w.slice(0,3).toLowerCase();if(b=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}f=0;continue}if(!(b!="<td"&&b!="<th")){var k=w.split(/<\/t[dh]>/i);for(o=0;o<k.length;++o){var F=k[o].trim();if(F.match(/<t[dh]/i)){for(var N=F,B=0;N.charAt(0)=="<"&&(B=N.indexOf(">"))>-1;)N=N.slice(B+1);for(var X=0;X<_.length;++X){var G=_[X];G.s.c==f&&G.s.r<c&&c<=G.e.r&&(f=G.e.c+1,X=-1)}var P=Nr(F.slice(0,F.indexOf(">")));m=P.colspan?+P.colspan:1,((d=+P.rowspan)>1||m>1)&&_.push({s:{r:c,c:f},e:{r:c+(d||1)-1,c:f+m-1}});var A=P.t||P["data-t"]||"";if(!N.length){f+=m;continue}if(N=rR(N),p.s.r>c&&(p.s.r=c),p.e.r<c&&(p.e.r=c),p.s.c>f&&(p.s.c=f),p.e.c<f&&(p.e.c=f),!N.length){f+=m;continue}var T={t:"s",v:N};r.raw||!N.trim().length||A=="s"||(N==="TRUE"?T={t:"b",v:!0}:N==="FALSE"?T={t:"b",v:!1}:isNaN(lc(N))?isNaN(Rp(N).getDate())||(T={t:"d",v:gi(N)},r.cellDates||(T={t:"n",v:$s(T.v)}),T.z=r.dateNF||Tr[14]):T={t:"n",v:lc(N)}),r.dense?(n[c]||(n[c]=[]),n[c][f]=T):n[Ir({r:c,c:f})]=T,f+=m}}}}return n["!ref"]=Vr(p),_.length&&(n["!merges"]=_),n}function Soe(t,e,r,n){for(var i=t["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>r||i[c].s.c>a)&&!(i[c].e.r<r||i[c].e.c<a)){if(i[c].s.r<r||i[c].s.c<a){o=-1;break}o=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(o<0)){var f=Ir({r,c:a}),d=n.dense?(t[r]||[])[a]:t[f],m=d&&d.v!=null&&(d.h||Wb(d.w||($u(d),d.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),n.editable?m='<span contenteditable="true">'+m+"</span>":d&&(p["data-t"]=d&&d.t||"z",d.v!=null&&(p["data-v"]=d.v),d.z!=null&&(p["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+d.l.Target+'">'+m+"</a>")),p.id=(n.id||"sjs")+"-"+f,s.push(Bt("td",m,p))}}var _="<tr>";return _+s.join("")+"</tr>"}var koe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Toe="</body></html>";function Aoe(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Ih(AT(r[0],e),e);var n=w3();return r.forEach(function(i,s){_3(n,AT(i,e),"Sheet"+(s+1))}),n}function Coe(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function FF(t,e){var r=e||{},n=r.header!=null?r.header:koe,i=r.footer!=null?r.footer:Toe,s=[n],a=Mo(t["!ref"]);r.dense=Array.isArray(t),s.push(Coe(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)s.push(Soe(t,a,o,r));return s.push("</table>"+i),s.join("")}function LF(t,e,r){var n=r||{},i=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var a=typeof n.origin=="string"?Ui(n.origin):n.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:i,c:s}};if(t["!ref"]){var f=Mo(t["!ref"]);c.s.r=Math.min(c.s.r,f.s.r),c.s.c=Math.min(c.s.c,f.s.c),c.e.r=Math.max(c.e.r,f.e.r),c.e.c=Math.max(c.e.c,f.e.c),i==-1&&(c.e.r=i=f.e.r+1)}var d=[],m=0,p=t["!rows"]||(t["!rows"]=[]),_=0,w=0,b=0,k=0,F=0,N=0;for(t["!cols"]||(t["!cols"]=[]);_<o.length&&w<l;++_){var B=o[_];if(CT(B)){if(n.display)continue;p[w]={hidden:!0}}var X=B.children;for(b=k=0;b<X.length;++b){var G=X[b];if(!(n.display&&CT(G))){var P=G.hasAttribute("data-v")?G.getAttribute("data-v"):G.hasAttribute("v")?G.getAttribute("v"):rR(G.innerHTML),A=G.getAttribute("data-z")||G.getAttribute("z");for(m=0;m<d.length;++m){var T=d[m];T.s.c==k+s&&T.s.r<w+i&&w+i<=T.e.r&&(k=T.e.c+1-s,m=-1)}N=+G.getAttribute("colspan")||1,((F=+G.getAttribute("rowspan")||1)>1||N>1)&&d.push({s:{r:w+i,c:k+s},e:{r:w+i+(F||1)-1,c:k+s+(N||1)-1}});var O={t:"s",v:P},I=G.getAttribute("data-t")||G.getAttribute("t")||"";P!=null&&(P.length==0?O.t=I||"z":n.raw||P.trim().length==0||I=="s"||(P==="TRUE"?O={t:"b",v:!0}:P==="FALSE"?O={t:"b",v:!1}:isNaN(lc(P))?isNaN(Rp(P).getDate())||(O={t:"d",v:gi(P)},n.cellDates||(O={t:"n",v:$s(O.v)}),O.z=n.dateNF||Tr[14]):O={t:"n",v:lc(P)})),O.z===void 0&&A!=null&&(O.z=A);var D="",M=G.getElementsByTagName("A");if(M&&M.length)for(var ie=0;ie<M.length&&!(M[ie].hasAttribute("href")&&(D=M[ie].getAttribute("href"),D.charAt(0)!="#"));++ie);D&&D.charAt(0)!="#"&&(O.l={Target:D}),n.dense?(t[w+i]||(t[w+i]=[]),t[w+i][k+s]=O):t[Ir({c:k+s,r:w+i})]=O,c.e.c<k+s&&(c.e.c=k+s),k+=N}}++w}return d.length&&(t["!merges"]=(t["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,w-1+i),t["!ref"]=Vr(c),w>=l&&(t["!fullref"]=Vr((c.e.r=o.length-_+w-1+i,c))),t}function DF(t,e){var r=e||{},n=r.dense?[]:{};return LF(n,t,e)}function Ioe(t,e){return Ih(DF(t,e),e)}function CT(t){var e="",r=Noe(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function Noe(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Poe(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,i){return Array(parseInt(i,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=wn(e.replace(/<[^>]*>/g,""));return[r]}var IT={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function OF(t,e){var r=e||{},n=qb(t),i=[],s,a,o={name:""},l="",c=0,f,d,m={},p=[],_=r.dense?[]:{},w,b,k={value:""},F="",N=0,B=[],X=-1,G=-1,P={s:{r:1e6,c:1e7},e:{r:0,c:0}},A=0,T={},O=[],I={},D=0,M=0,ie=[],be=1,Ne=1,we=[],le={Names:[]},J={},ue=["",""],ee=[],C={},U="",W=0,Y=!1,ae=!1,pe=0;for(Gm.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");w=Gm.exec(n);)switch(w[3]=w[3].replace(/_.*$/,"")){case"table":case"":w[1]==="/"?(P.e.c>=P.s.c&&P.e.r>=P.s.r?_["!ref"]=Vr(P):_["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=P.e.r&&(_["!fullref"]=_["!ref"],P.e.r=r.sheetRows-1,_["!ref"]=Vr(P)),O.length&&(_["!merges"]=O),ie.length&&(_["!rows"]=ie),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),p.push(f.name),m[f.name]=_,ae=!1):w[0].charAt(w[0].length-2)!=="/"&&(f=Nr(w[0],!1),X=G=-1,P.s.r=P.s.c=1e7,P.e.r=P.e.c=0,_=r.dense?[]:{},O=[],ie=[],ae=!0);break;case"table-row-group":w[1]==="/"?--A:++A;break;case"table-row":case"":if(w[1]==="/"){X+=be,be=1;break}if(d=Nr(w[0],!1),d.?X=d.-1:X==-1&&(X=0),be=+d["number-rows-repeated"]||1,be<10)for(pe=0;pe<be;++pe)A>0&&(ie[X+pe]={level:A});G=-1;break;case"covered-table-cell":w[1]!=="/"&&++G,r.sheetStubs&&(r.dense?(_[X]||(_[X]=[]),_[X][G]={t:"z"}):_[Ir({r:X,c:G})]={t:"z"}),F="",B=[];break;case"table-cell":case"":if(w[0].charAt(w[0].length-2)==="/")++G,k=Nr(w[0],!1),Ne=parseInt(k["number-columns-repeated"]||"1",10),b={t:"z",v:null},k.formula&&r.cellFormula!=!1&&(b.f=ST(wn(k.formula))),(k.||k["value-type"])=="string"&&(b.t="s",b.v=wn(k["string-value"]||""),r.dense?(_[X]||(_[X]=[]),_[X][G]=b):_[Ir({r:X,c:G})]=b),G+=Ne-1;else if(w[1]!=="/"){++G,F="",N=0,B=[],Ne=1;var he=be?X+be-1:X;if(G>P.e.c&&(P.e.c=G),G<P.s.c&&(P.s.c=G),X<P.s.r&&(P.s.r=X),he>P.e.r&&(P.e.r=he),k=Nr(w[0],!1),ee=[],C={},b={t:k.||k["value-type"],v:null},r.cellFormula)if(k.formula&&(k.formula=wn(k.formula)),k["number-matrix-columns-spanned"]&&k["number-matrix-rows-spanned"]&&(D=parseInt(k["number-matrix-rows-spanned"],10)||0,M=parseInt(k["number-matrix-columns-spanned"],10)||0,I={s:{r:X,c:G},e:{r:X+D-1,c:G+M-1}},b.F=Vr(I),we.push([I,b.F])),k.formula)b.f=ST(k.formula);else for(pe=0;pe<we.length;++pe)X>=we[pe][0].s.r&&X<=we[pe][0].e.r&&G>=we[pe][0].s.c&&G<=we[pe][0].e.c&&(b.F=we[pe][1]);switch((k["number-columns-spanned"]||k["number-rows-spanned"])&&(D=parseInt(k["number-rows-spanned"],10)||0,M=parseInt(k["number-columns-spanned"],10)||0,I={s:{r:X,c:G},e:{r:X+D-1,c:G+M-1}},O.push(I)),k["number-columns-repeated"]&&(Ne=parseInt(k["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=hi(k["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(k.value);break;case"percentage":b.t="n",b.v=parseFloat(k.value);break;case"currency":b.t="n",b.v=parseFloat(k.value);break;case"date":b.t="d",b.v=gi(k["date-value"]),r.cellDates||(b.t="n",b.v=$s(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=iQ(k["time-value"])/86400,r.cellDates&&(b.t="d",b.v=my(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(k.);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",k["string-value"]!=null&&(F=wn(k["string-value"]),B=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(Y=!1,b.t==="s"&&(b.v=F||"",B.length&&(b.R=B),Y=N==0),J.Target&&(b.l=J),ee.length>0&&(b.c=ee,ee=[]),F&&r.cellText!==!1&&(b.w=F),Y&&(b.t="z",delete b.v),(!Y||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=X))for(var xe=0;xe<be;++xe){if(Ne=parseInt(k["number-columns-repeated"]||"1",10),r.dense)for(_[X+xe]||(_[X+xe]=[]),_[X+xe][G]=xe==0?b:xi(b);--Ne>0;)_[X+xe][G+Ne]=xi(b);else for(_[Ir({r:X+xe,c:G})]=b;--Ne>0;)_[Ir({r:X+xe,c:G+Ne})]=xi(b);P.e.c<=G&&(P.e.c=G)}Ne=parseInt(k["number-columns-repeated"]||"1",10),G+=Ne-1,Ne=0,b={},F="",B=[]}J={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(w[1]==="/"){if((s=i.pop())[0]!==w[3])throw"Bad state: "+s}else w[0].charAt(w[0].length-2)!=="/"&&i.push([w[3],!0]);break;case"annotation":if(w[1]==="/"){if((s=i.pop())[0]!==w[3])throw"Bad state: "+s;C.t=F,B.length&&(C.R=B),C.a=U,ee.push(C)}else w[0].charAt(w[0].length-2)!=="/"&&i.push([w[3],!1]);U="",W=0,F="",N=0,B=[];break;case"creator":w[1]==="/"?U=n.slice(W,w.index):W=w.index+w[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(w[1]==="/"){if((s=i.pop())[0]!==w[3])throw"Bad state: "+s}else w[0].charAt(w[0].length-2)!=="/"&&i.push([w[3],!1]);F="",N=0,B=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(w[1]==="/"){if(T[o.name]=l,(s=i.pop())[0]!==w[3])throw"Bad state: "+s}else w[0].charAt(w[0].length-2)!=="/"&&(l="",o=Nr(w[0],!1),i.push([w[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(i[i.length-1][0]){case"time-style":case"date-style":a=Nr(w[0],!1),l+=IT[w[3]][a.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(i[i.length-1][0]){case"time-style":case"date-style":a=Nr(w[0],!1),l+=IT[w[3]][a.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(w[0].slice(-2)==="/>")break;if(w[1]==="/")switch(i[i.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,w.index);break}else c=w.index+w[0].length;break;case"named-range":a=Nr(w[0],!1),ue=Qw(a["cell-range-address"]);var Ee={Name:a.name,Ref:ue[0]+"!"+ue[1]};ae&&(Ee.Sheet=p.length),le.Names.push(Ee);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(i[i.length-1][0])>-1)break;if(w[1]==="/"&&(!k||!k["string-value"])){var Fe=Poe(n.slice(N,w.index));F=(F.length>0?F+`
`:"")+Fe[0]}else Nr(w[0],!1),N=w.index+w[0].length;break;case"s":break;case"database-range":if(w[1]==="/")break;try{ue=Qw(Nr(w[0])["target-range-address"]),m[ue[0]]["!autofilter"]={ref:ue[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(w[1]!=="/"){if(J=Nr(w[0],!1),!J.href)break;J.Target=wn(J.href),delete J.href,J.Target.charAt(0)=="#"&&J.Target.indexOf(".")>-1?(ue=Qw(J.Target.slice(1)),J.Target="#"+ue[0]+"!"+ue[1]):J.Target.match(/^\.\.[\\\/]/)&&(J.Target=J.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(w[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(w)}}var oe={Sheets:m,SheetNames:p,Workbook:le};return r.bookSheets&&delete oe.Sheets,oe}function NT(t,e){e=e||{},Rl(t,"META-INF/manifest.xml")&&iJ(As(t,"META-INF/manifest.xml"),e);var r=il(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=OF(Xn(r),e);return Rl(t,"meta.xml")&&(n.Props=TR(As(t,"meta.xml"))),n}function PT(t,e){return OF(t,e)}var Roe=(function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+qm({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return vs+e}})(),RT=(function(){var t=function(s){return Hn(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,a,o){var l=[];l.push('      <table:table table:name="'+Hn(a.SheetNames[o])+`" table:style-name="ta1">
`);var c=0,f=0,d=Mo(s["!ref"]||"A1"),m=s["!merges"]||[],p=0,_=Array.isArray(s);if(s["!cols"])for(f=0;f<=d.e.c;++f)l.push("        <table:table-column"+(s["!cols"][f]?' table:style-name="co'+s["!cols"][f].ods+'"':"")+`></table:table-column>
`);var w="",b=s["!rows"]||[];for(c=0;c<d.s.r;++c)w=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+w+`></table:table-row>
`);for(;c<=d.e.r;++c){for(w=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+w+`>
`),f=0;f<d.s.c;++f)l.push(e);for(;f<=d.e.c;++f){var k=!1,F={},N="";for(p=0;p!=m.length;++p)if(!(m[p].s.c>f)&&!(m[p].s.r>c)&&!(m[p].e.c<f)&&!(m[p].e.r<c)){(m[p].s.c!=f||m[p].s.r!=c)&&(k=!0),F["table:number-columns-spanned"]=m[p].e.c-m[p].s.c+1,F["table:number-rows-spanned"]=m[p].e.r-m[p].s.r+1;break}if(k){l.push(r);continue}var B=Ir({r:c,c:f}),X=_?(s[c]||[])[f]:s[B];if(X&&X.f&&(F["table:formula"]=Hn(Jne(X.f)),X.F&&X.F.slice(0,B.length)==B)){var G=Mo(X.F);F["table:number-matrix-columns-spanned"]=G.e.c-G.s.c+1,F["table:number-matrix-rows-spanned"]=G.e.r-G.s.r+1}if(!X){l.push(e);continue}switch(X.t){case"b":N=X.v?"TRUE":"FALSE",F["office:value-type"]="boolean",F["office:boolean-value"]=X.v?"true":"false";break;case"n":N=X.w||String(X.v||0),F["office:value-type"]="float",F["office:value"]=X.v||0;break;case"s":case"str":N=X.v==null?"":X.v,F["office:value-type"]="string";break;case"d":N=X.w||gi(X.v).toISOString(),F["office:value-type"]="date",F["office:date-value"]=gi(X.v).toISOString(),F["table:style-name"]="ce1";break;default:l.push(e);continue}var P=t(N);if(X.l&&X.l.Target){var A=X.l.Target;A=A.charAt(0)=="#"?"#"+Zne(A.slice(1)):A,A.charAt(0)!="#"&&!A.match(/^\w+:/)&&(A="../"+A),P=Bt("text:a",P,{"xlink:href":A.replace(/&/g,"&amp;")})}l.push("          "+Bt("table:table-cell",Bt("text:p",P,{}),F)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(c){return a.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var f=0;f<c["!cols"].length;++f)if(c["!cols"][f]){var d=c["!cols"][f];if(d.width==null&&d.wpx==null&&d.wch==null)continue;ph(d),d.ods=o;var m=c["!cols"][f].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;a.SheetNames.map(function(c){return a.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var f=0;f<c["!rows"].length;++f)if(c["!rows"][f]){c["!rows"][f].ods=l;var d=c["!rows"][f].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var l=[vs],c=qm({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=qm({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+c+f+`>
`),l.push(kR().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),i(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var d=0;d!=a.SheetNames.length;++d)l.push(n(a.Sheets[a.SheetNames[d]],a,d));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function MF(t,e){if(e.bookType=="fods")return RT(t,e);var r=zb(),n="",i=[],s=[];return n="mimetype",zr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",zr(r,n,RT(t,e)),i.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",zr(r,n,Roe(t,e)),i.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",zr(r,n,vs+kR()),i.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",zr(r,n,oJ(s)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",zr(r,n,sJ(i)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Ud(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function R5(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Xn(Ch(t))}function Foe(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):nl(zc(t))}function Loe(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function gh(t){var e=t.reduce(function(i,s){return i+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(i){r.set(i,n),n+=i.length}),r}function FT(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function Doe(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,i=e+13;i>=e;--i)n=n*256+t[i];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function Ooe(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,i=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;i>=1;++s,i/=256)t[e+s]=i&255;t[e+15]|=r>=0?0:128}function eg(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function Vn(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Ji(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function kn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],i=eg(t,r),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:a=4,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=eg(t,r),o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(n))}var c={data:o,type:s};e[i]==null?e[i]=[c]:e[i].push(c)}return e}function ya(t){var e=[];return t.forEach(function(r,n){r.forEach(function(i){i.data&&(e.push(Vn(n*8+i.type)),i.type==2&&e.push(Vn(i.data.length)),e.push(i.data))})}),gh(e)}function m3(t,e){return t?.map(function(r){return e(r.data)})||[]}function Il(t){for(var e,r=[],n=[0];n[0]<t.length;){var i=eg(t,n),s=kn(t.slice(n[0],n[0]+i));n[0]+=i;var a={id:Ji(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=kn(o.data),c=Ji(l[3][0].data);a.messages.push({meta:l,data:t.slice(n[0],n[0]+c)}),n[0]+=c}),(e=s[3])!=null&&e[0]&&(a.merge=Ji(s[3][0].data)>>>0>0),r.push(a)}return r}function R0(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:Vn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Vn(+!!r.merge),type:0}]);var i=[];r.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:Vn(a.data.length)}],n[2].push({data:ya(a.meta),type:2})});var s=ya(n);e.push(Vn(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),gh(e)}function Moe(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=eg(e,r),i=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[r[0]],o>1&&(a|=e[r[0]+1]<<8),o>2&&(a|=e[r[0]+2]<<16),o>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}i.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var l=0,c=0;if(s==1?(c=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(c=(e[r[0]++]>>2)+1,s==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),i=[gh(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(i.push(i[0].slice(-l)),c-=l;c>=i[i.length-1].length;)i.push(i[i.length-1]),c-=i[i.length-1].length;i.push(i[0].slice(-l,-l+c))}}var f=gh(i);if(f.length!=n)throw new Error("Unexpected length: ".concat(f.length," != ").concat(n));return f}function Nl(t){for(var e=[],r=0;r<t.length;){var n=t[r++],i=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(Moe(n,t.slice(r,r+i))),r+=i}if(r!==t.length)throw new Error("data is not a valid framed stream!");return gh(e)}function F0(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),i=new Uint8Array(4);e.push(i);var s=Vn(n),a=s.length;e.push(s),n<=60?(a++,e.push(new Uint8Array([n-1<<2]))):n<=256?(a+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(a+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(a+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(a+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),a+=n,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,r+=n}return gh(e)}function joe(t,e,r,n){var i=Ud(t),s=i.getUint32(4,!0),a=(n>1?12:8)+FT(s&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,f=new Date(2001,0,1);s&512&&(o=i.getUint32(a,!0),a+=4),a+=FT(s&(n>1?12288:4096))*4,s&16&&(l=i.getUint32(a,!0),a+=4),s&32&&(c=i.getFloat64(a,!0),a+=8),s&64&&(f.setTime(f.getTime()+i.getFloat64(a,!0)*1e3),a+=8);var d;switch(t[2]){case 0:break;case 2:d={t:"n",v:c};break;case 3:d={t:"s",v:e[l]};break;case 5:d={t:"d",v:f};break;case 6:d={t:"b",v:c>0};break;case 7:d={t:"n",v:c/86400};break;case 8:d={t:"e",v:0};break;case 9:if(o>-1)d={t:"s",v:r[o]};else if(l>-1)d={t:"s",v:e[l]};else if(!isNaN(c))d={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return d}function Boe(t,e,r){var n=Ud(t),i=n.getUint32(8,!0),s=12,a=-1,o=-1,l=NaN,c=NaN,f=new Date(2001,0,1);i&1&&(l=Doe(t,s),s+=16),i&2&&(c=n.getFloat64(s,!0),s+=8),i&4&&(f.setTime(f.getTime()+n.getFloat64(s,!0)*1e3),s+=8),i&8&&(o=n.getUint32(s,!0),s+=4),i&16&&(a=n.getUint32(s,!0),s+=4);var d;switch(t[1]){case 0:break;case 2:d={t:"n",v:l};break;case 3:d={t:"s",v:e[o]};break;case 5:d={t:"d",v:f};break;case 6:d={t:"b",v:c>0};break;case 7:d={t:"n",v:c/86400};break;case 8:d={t:"e",v:0};break;case 9:if(a>-1)d={t:"s",v:r[a]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(i&31," : ").concat(t.slice(0,4)));break;case 10:d={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(i&31," : ").concat(t.slice(0,4)))}return d}function Zw(t,e){var r=new Uint8Array(32),n=Ud(r),i=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,Ooe(r,i,t.v),s|=1,i+=16;break;case"b":r[1]=6,n.setFloat64(i,t.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(i,e.indexOf(t.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,i)}function e_(t,e){var r=new Uint8Array(32),n=Ud(r),i=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(i,t.v,!0),s|=32,i+=8;break;case"b":r[2]=6,n.setFloat64(i,t.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(i,e.indexOf(t.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,i)}function Voe(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return joe(t,e,r,t[0]);case 5:return Boe(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Za(t){var e=kn(t);return eg(e[1][0].data)}function LT(t,e){var r=kn(e.data),n=Ji(r[1][0].data),i=r[3],s=[];return(i||[]).forEach(function(a){var o=kn(a.data),l=Ji(o[1][0].data)>>>0;switch(n){case 1:s[l]=R5(o[3][0].data);break;case 8:{var c=t[Za(o[9][0].data)][0],f=kn(c.data),d=t[Za(f[1][0].data)][0],m=Ji(d.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var p=kn(d.data);s[l]=p[3].map(function(_){return R5(_.data)}).join("")}break}}),s}function Uoe(t,e){var r,n,i,s,a,o,l,c,f,d,m,p,_,w,b=kn(t),k=Ji(b[1][0].data)>>>0,F=Ji(b[2][0].data)>>>0,N=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&Ji(b[8][0].data)>0||!1,B,X;if((s=(i=b[7])==null?void 0:i[0])!=null&&s.data&&e!=0)B=(o=(a=b[7])==null?void 0:a[0])==null?void 0:o.data,X=(c=(l=b[6])==null?void 0:l[0])==null?void 0:c.data;else if((d=(f=b[4])==null?void 0:f[0])!=null&&d.data&&e!=1)B=(p=(m=b[4])==null?void 0:m[0])==null?void 0:p.data,X=(w=(_=b[3])==null?void 0:_[0])==null?void 0:w.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var G=N?4:1,P=Ud(B),A=[],T=0;T<B.length/2;++T){var O=P.getUint16(T*2,!0);O<65535&&A.push([T,O])}if(A.length!=F)throw"Expected ".concat(F," cells, found ").concat(A.length);var I=[];for(T=0;T<A.length-1;++T)I[A[T][0]]=X.subarray(A[T][1]*G,A[T+1][1]*G);return A.length>=1&&(I[A[A.length-1][0]]=X.subarray(A[A.length-1][1]*G)),{R:k,cells:I}}function zoe(t,e){var r,n=kn(e.data),i=(r=n?.[7])!=null&&r[0]?Ji(n[7][0].data)>>>0>0?1:0:-1,s=m3(n[5],function(a){return Uoe(a,i)});return{nrows:Ji(n[4][0].data)>>>0,data:s.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(l,c){if(a[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));a[o.R][c]=l}),a},[])}}function $oe(t,e,r){var n,i=kn(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Ji(i[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(i[6][0].data));if(s.e.c=(Ji(i[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(i[7][0].data));r["!ref"]=Vr(s);var a=kn(i[4][0].data),o=LT(t,t[Za(a[4][0].data)][0]),l=(n=a[17])!=null&&n[0]?LT(t,t[Za(a[17][0].data)][0]):[],c=kn(a[3][0].data),f=0;c[1].forEach(function(d){var m=kn(d.data),p=t[Za(m[2][0].data)][0],_=Ji(p.meta[1][0].data);if(_!=6002)throw new Error("6001 unexpected reference to ".concat(_));var w=zoe(t,p);w.data.forEach(function(b,k){b.forEach(function(F,N){var B=Ir({r:f+k,c:N}),X=Voe(F,o,l);X&&(r[B]=X)})}),f+=w.nrows})}function Hoe(t,e){var r=kn(e.data),n={"!ref":"A1"},i=t[Za(r[2][0].data)],s=Ji(i[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return $oe(t,i[0],n),n}function Woe(t,e){var r,n=kn(e.data),i={name:(r=n[1])!=null&&r[0]?R5(n[1][0].data):"",sheets:[]},s=m3(n[2],Za);return s.forEach(function(a){t[a].forEach(function(o){var l=Ji(o.meta[1][0].data);l==6e3&&i.sheets.push(Hoe(t,o))})}),i}function qoe(t,e){var r=w3(),n=kn(e.data),i=m3(n[1],Za);if(i.forEach(function(s){t[s].forEach(function(a){var o=Ji(a.meta[1][0].data);if(o==2){var l=Woe(t,a);l.sheets.forEach(function(c,f){_3(r,c,f==0?l.name:l.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function t_(t){var e,r,n,i,s={},a=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=Nl(l.content)}catch(d){return console.log("?? "+l.content.length+" "+(d.message||d))}var f;try{f=Il(c)}catch(d){return console.log("## "+(d.message||d))}f.forEach(function(d){s[d.id]=d.messages,a.push(d.id)})}}),!a.length)throw new Error("File has no messages");var o=((i=(n=(r=(e=s?.[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:i[0].data)&&Ji(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||a.forEach(function(l){s[l].forEach(function(c){var f=Ji(c.meta[1][0].data)>>>0;if(f==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return qoe(s,o)}function Goe(t,e,r){var n,i,s,a;if(!((n=t[6])!=null&&n[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=t[8])==null?void 0:s[0])==null?void 0:a.data)&&Ji(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,c=Ud(t[7][0].data),f=0,d=[],m=Ud(t[4][0].data),p=0,_=[],w=0;w<e.length;++w){if(e[w]==null){c.setUint16(w*2,65535,!0),m.setUint16(w*2,65535);continue}c.setUint16(w*2,f,!0),m.setUint16(w*2,p,!0);var b,k;switch(typeof e[w]){case"string":b=Zw({t:"s",v:e[w]},r),k=e_({t:"s",v:e[w]},r);break;case"number":b=Zw({t:"n",v:e[w]},r),k=e_({t:"n",v:e[w]},r);break;case"boolean":b=Zw({t:"b",v:e[w]},r),k=e_({t:"b",v:e[w]},r);break;default:throw new Error("Unsupported value "+e[w])}d.push(b),f+=b.length,_.push(k),p+=k.length,++l}for(t[2][0].data=Vn(l);w<t[7][0].data.length/2;++w)c.setUint16(w*2,65535,!0),m.setUint16(w*2,65535,!0);return t[6][0].data=gh(d),t[3][0].data=gh(_),l}function Koe(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Mo(r["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Vr(n)));var s=xv(r,{range:n,header:1}),a=["~Sh33tJ5~"];s.forEach(function(U){return U.forEach(function(W){typeof W=="string"&&a.push(W)})});var o={},l=[],c=yr.read(e.numbers,{type:"base64"});c.FileIndex.map(function(U,W){return[U,c.FullPaths[W]]}).forEach(function(U){var W=U[0],Y=U[1];if(W.type==2&&W.name.match(/\.iwa/)){var ae=W.content,pe=Nl(ae),he=Il(pe);he.forEach(function(xe){l.push(xe.id),o[xe.id]={deps:[],location:Y,type:Ji(xe.messages[0].meta[1][0].data)}})}}),l.sort(function(U,W){return U-W});var f=l.filter(function(U){return U>1}).map(function(U){return[U,Vn(U)]});c.FileIndex.map(function(U,W){return[U,c.FullPaths[W]]}).forEach(function(U){var W=U[0];if(U[1],!!W.name.match(/\.iwa/)){var Y=Il(Nl(W.content));Y.forEach(function(ae){ae.messages.forEach(function(pe){f.forEach(function(he){ae.messages.some(function(xe){return Ji(xe.meta[1][0].data)!=11006&&Loe(xe.data,he[1])})&&o[he[0]].deps.push(ae.id)})})})}});for(var d=yr.find(c,o[1].location),m=Il(Nl(d.content)),p,_=0;_<m.length;++_){var w=m[_];w.id==1&&(p=w)}var b=Za(kn(p.messages[0].data)[1][0].data);for(d=yr.find(c,o[b].location),m=Il(Nl(d.content)),_=0;_<m.length;++_)w=m[_],w.id==b&&(p=w);for(b=Za(kn(p.messages[0].data)[2][0].data),d=yr.find(c,o[b].location),m=Il(Nl(d.content)),_=0;_<m.length;++_)w=m[_],w.id==b&&(p=w);for(b=Za(kn(p.messages[0].data)[2][0].data),d=yr.find(c,o[b].location),m=Il(Nl(d.content)),_=0;_<m.length;++_)w=m[_],w.id==b&&(p=w);var k=kn(p.messages[0].data);{k[6][0].data=Vn(n.e.r+1),k[7][0].data=Vn(n.e.c+1);var F=Za(k[46][0].data),N=yr.find(c,o[F].location),B=Il(Nl(N.content));{for(var X=0;X<B.length&&B[X].id!=F;++X);if(B[X].id!=F)throw"Bad ColumnRowUIDMapArchive";var G=kn(B[X].messages[0].data);G[1]=[],G[2]=[],G[3]=[];for(var P=0;P<=n.e.c;++P){var A=[];A[1]=A[2]=[{type:0,data:Vn(P+420690)}],G[1].push({type:2,data:ya(A)}),G[2].push({type:0,data:Vn(P)}),G[3].push({type:0,data:Vn(P)})}G[4]=[],G[5]=[],G[6]=[];for(var T=0;T<=n.e.r;++T)A=[],A[1]=A[2]=[{type:0,data:Vn(T+726270)}],G[4].push({type:2,data:ya(A)}),G[5].push({type:0,data:Vn(T)}),G[6].push({type:0,data:Vn(T)});B[X].messages[0].data=ya(G)}N.content=F0(R0(B)),N.size=N.content.length,delete k[46];var O=kn(k[4][0].data);{O[7][0].data=Vn(n.e.r+1);var I=kn(O[1][0].data),D=Za(I[2][0].data);N=yr.find(c,o[D].location),B=Il(Nl(N.content));{if(B[0].id!=D)throw"Bad HeaderStorageBucket";var M=kn(B[0].messages[0].data);for(T=0;T<s.length;++T){var ie=kn(M[2][0].data);ie[1][0].data=Vn(T),ie[4][0].data=Vn(s[T].length),M[2][T]={type:M[2][0].type,data:ya(ie)}}B[0].messages[0].data=ya(M)}N.content=F0(R0(B)),N.size=N.content.length;var be=Za(O[2][0].data);N=yr.find(c,o[be].location),B=Il(Nl(N.content));{if(B[0].id!=be)throw"Bad HeaderStorageBucket";for(M=kn(B[0].messages[0].data),P=0;P<=n.e.c;++P)ie=kn(M[2][0].data),ie[1][0].data=Vn(P),ie[4][0].data=Vn(n.e.r+1),M[2][P]={type:M[2][0].type,data:ya(ie)};B[0].messages[0].data=ya(M)}N.content=F0(R0(B)),N.size=N.content.length;var Ne=Za(O[4][0].data);(function(){for(var U=yr.find(c,o[Ne].location),W=Il(Nl(U.content)),Y,ae=0;ae<W.length;++ae){var pe=W[ae];pe.id==Ne&&(Y=pe)}var he=kn(Y.messages[0].data);{he[3]=[];var xe=[];a.forEach(function(oe,Je){xe[1]=[{type:0,data:Vn(Je)}],xe[2]=[{type:0,data:Vn(1)}],xe[3]=[{type:2,data:Foe(oe)}],he[3].push({type:2,data:ya(xe)})})}Y.messages[0].data=ya(he);var Ee=R0(W),Fe=F0(Ee);U.content=Fe,U.size=U.content.length})();var we=kn(O[3][0].data);{var le=we[1][0];delete we[2];var J=kn(le.data);{var ue=Za(J[2][0].data);(function(){for(var U=yr.find(c,o[ue].location),W=Il(Nl(U.content)),Y,ae=0;ae<W.length;++ae){var pe=W[ae];pe.id==ue&&(Y=pe)}var he=kn(Y.messages[0].data);{delete he[6],delete we[7];var xe=new Uint8Array(he[5][0].data);he[5]=[];for(var Ee=0,Fe=0;Fe<=n.e.r;++Fe){var oe=kn(xe);Ee+=Goe(oe,s[Fe],a),oe[1][0].data=Vn(Fe),he[5].push({data:ya(oe),type:2})}he[1]=[{type:0,data:Vn(n.e.c+1)}],he[2]=[{type:0,data:Vn(n.e.r+1)}],he[3]=[{type:0,data:Vn(Ee)}],he[4]=[{type:0,data:Vn(n.e.r+1)}]}Y.messages[0].data=ya(he);var Je=R0(W),Re=F0(Je);U.content=Re,U.size=U.content.length})()}le.data=ya(J)}O[3][0].data=ya(we)}k[4][0].data=ya(O)}p.messages[0].data=ya(k);var ee=R0(m),C=F0(ee);return d.content=C,d.size=d.content.length,c}function jF(t){return function(r){for(var n=0;n!=t.length;++n){var i=t[n];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function g3(t){jF([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function x3(t){jF([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function Xoe(t){return en.WS.indexOf(t)>-1?"sheet":t==en.CS?"chart":t==en.DS?"dialog":t==en.MS?"macro":t&&t.length?t:"sheet"}function Yoe(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,Xoe(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function Qoe(t,e,r,n,i,s,a,o,l,c,f,d){try{s[n]=xm(il(t,r,!0),e);var m=As(t,e),p;switch(o){case"sheet":p=yae(m,e,i,l,s[n],c,f,d);break;case"chart":if(p=wae(m,e,i,l,s[n],c,f,d),!p||!p["!drawel"])break;var _=nm(p["!drawel"].Target,e),w=Km(_),b=are(il(t,_,!0),xm(il(t,w,!0),_)),k=nm(b,_),F=Km(k);p=Gse(il(t,k,!0),k,l,xm(il(t,F,!0),k),c,p);break;case"macro":p=_ae(m,e,i,l,s[n],c,f,d);break;case"dialog":p=bae(m,e,i,l,s[n],c,f,d);break;default:throw new Error("Unrecognized sheet type "+o)}a[n]=p;var N=[];s&&s[n]&&es(s[n]).forEach(function(B){var X="";if(s[n][B].Type==en.CMNT){X=nm(s[n][B].Target,e);var G=Tae(As(t,X,!0),X,l);if(!G||!G.length)return;yT(p,G,!1)}s[n][B].Type==en.TCMNT&&(X=nm(s[n][B].Target,e),N=N.concat(lre(As(t,X,!0),l)))}),N&&N.length&&yT(p,N,!0,l.people||[])}catch(B){if(l.WTF)throw B}}function Al(t){return t.charAt(0)=="/"?t.slice(1):t}function Joe(t,e){if(n1(),e=e||{},g3(e),Rl(t,"META-INF/manifest.xml")||Rl(t,"objectdata.xml"))return NT(t,e);if(Rl(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof t_<"u"){if(t.FileIndex)return t_(t);var r=yr.utils.cfb_new();return Vk(t).forEach(function(ie){zr(r,ie,cQ(t,ie))}),t_(r)}throw new Error("Unsupported NUMBERS file")}if(!Rl(t,"[Content_Types].xml"))throw Rl(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Rl(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=Vk(t),i=rJ(il(t,"[Content_Types].xml")),s=!1,a,o;if(i.workbooks.length===0&&(o="xl/workbook.xml",As(t,o,!0)&&i.workbooks.push(o)),i.workbooks.length===0){if(o="xl/workbook.bin",!As(t,o,!0))throw new Error("Could not find workbook");i.workbooks.push(o),s=!0}i.workbooks[0].slice(-3)=="bin"&&(s=!0);var l={},c={};if(!e.bookSheets&&!e.bookProps){if(vm=[],i.sst)try{vm=kae(As(t,Al(i.sst)),i.sst,e)}catch(ie){if(e.WTF)throw ie}e.cellStyles&&i.themes.length&&(l=Sae(il(t,i.themes[0].replace(/^\//,""),!0)||"",i.themes[0],e)),i.style&&(c=Eae(As(t,Al(i.style)),i.style,l,e))}i.links.map(function(ie){try{var be=xm(il(t,Km(Al(ie))),ie);return Cae(As(t,Al(ie)),be,ie,e)}catch{}});var f=vae(As(t,Al(i.workbooks[0])),i.workbooks[0],e),d={},m="";i.coreprops.length&&(m=As(t,Al(i.coreprops[0]),!0),m&&(d=TR(m)),i.extprops.length!==0&&(m=As(t,Al(i.extprops[0]),!0),m&&cJ(m,d,e)));var p={};(!e.bookSheets||e.bookProps)&&i.custprops.length!==0&&(m=il(t,Al(i.custprops[0]),!0),m&&(p=fJ(m,e)));var _={};if((e.bookSheets||e.bookProps)&&(f.Sheets?a=f.Sheets.map(function(be){return be.name}):d.Worksheets&&d.SheetNames.length>0&&(a=d.SheetNames),e.bookProps&&(_.Props=d,_.Custprops=p),e.bookSheets&&typeof a<"u"&&(_.SheetNames=a),e.bookSheets?_.SheetNames:e.bookProps))return _;a={};var w={};e.bookDeps&&i.calcchain&&(w=Aae(As(t,Al(i.calcchain)),i.calcchain));var b=0,k={},F,N;{var B=f.Sheets;d.Worksheets=B.length,d.SheetNames=[];for(var X=0;X!=B.length;++X)d.SheetNames[X]=B[X].name}var G=s?"bin":"xml",P=i.workbooks[0].lastIndexOf("/"),A=(i.workbooks[0].slice(0,P+1)+"_rels/"+i.workbooks[0].slice(P+1)+".rels").replace(/^\//,"");Rl(t,A)||(A="xl/_rels/workbook."+G+".rels");var T=xm(il(t,A,!0),A.replace(/_rels.*/,"s5s"));(i.metadata||[]).length>=1&&(e.xlmeta=Iae(As(t,Al(i.metadata[0])),i.metadata[0],e)),(i.people||[]).length>=1&&(e.people=ure(As(t,Al(i.people[0])),e)),T&&(T=Yoe(T,f.Sheets));var O=As(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=d.Worksheets;++b){var I="sheet";if(T&&T[b]?(F="xl/"+T[b][1].replace(/[\/]?xl\//,""),Rl(t,F)||(F=T[b][1]),Rl(t,F)||(F=A.replace(/_rels\/.*$/,"")+T[b][1]),I=T[b][2]):(F="xl/worksheets/sheet"+(b+1-O)+"."+G,F=F.replace(/sheet0\./,"sheet.")),N=F.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(b!=e.sheets)continue e;break;case"string":if(d.SheetNames[b].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var D=!1,M=0;M!=e.sheets.length;++M)typeof e.sheets[M]=="number"&&e.sheets[M]==b&&(D=1),typeof e.sheets[M]=="string"&&e.sheets[M].toLowerCase()==d.SheetNames[b].toLowerCase()&&(D=1);if(!D)continue e}}Qoe(t,F,N,d.SheetNames[b],b,k,a,I,e,f,l,c)}return _={Directory:i,Workbook:f,Props:d,Custprops:p,Deps:w,Sheets:a,SheetNames:d.SheetNames,Strings:vm,Styles:c,Themes:l,SSF:xi(Tr)},e&&e.bookFiles&&(t.files?(_.keys=n,_.files=t.files):(_.keys=[],_.files={},t.FullPaths.forEach(function(ie,be){ie=ie.replace(/^Root Entry[\/]/,""),_.keys.push(ie),_.files[ie]=t.FileIndex[be]}))),e&&e.bookVBA&&(i.vba.length>0?_.vbaraw=As(t,Al(i.vba[0]),!0):i.defaults&&i.defaults.bin===vre&&(_.vbaraw=As(t,"xl/vbaProject.bin",!0))),_}function Zoe(t,e){var r=e||{},n="Workbook",i=yr.find(t,n);try{if(n="/!DataSpaces/Version",i=yr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Iee(i.content),n="/!DataSpaces/DataSpaceMap",i=yr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=Pee(i.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",i=yr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=Ree(i.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",i=yr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);Lee(i.content)}catch{}if(n="/EncryptionInfo",i=yr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=Dee(i.content);if(n="/EncryptedPackage",i=yr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],i.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],i.content,r.password||"",r);throw new Error("File is password-protected")}function ele(t,e){return e.bookType=="ods"?MF(t,e):e.bookType=="numbers"?Koe(t,e):e.bookType=="xlsb"?tle(t,e):rle(t,e)}function tle(t,e){K0=1024,t&&!t.SSF&&(t.SSF=xi(Tr)),t&&t.SSF&&(n1(),hy(t.SSF),e.revssf=py(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,ym?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=fF.indexOf(e.bookType)>-1,i=r3();x3(e=e||{});var s=zb(),a="",o=0;if(e.cellXfs=[],Nh(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",zr(s,a,AR(t.Props,e)),i.coreprops.push(a),Un(e.rels,2,a,en.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,zr(s,a,NR(t.Props)),i.extprops.push(a),Un(e.rels,3,a,en.EXT_PROPS),t.Custprops!==t.Props&&es(t.Custprops||{}).length>0&&(a="docProps/custom.xml",zr(s,a,PR(t.Custprops)),i.custprops.push(a),Un(e.rels,4,a,en.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var f={"!id":{}},d=t.Sheets[t.SheetNames[o-1]],m=(d||{})["!type"]||"sheet";switch(m){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,zr(s,a,Pae(o-1,a,e,t,f)),i.sheets.push(a),Un(e.wbrels,-1,"worksheets/sheet"+o+"."+r,en.WS[0])}if(d){var p=d["!comments"],_=!1,w="";p&&p.length>0&&(w="xl/comments"+o+"."+r,zr(s,w,Lae(p,w)),i.comments.push(w),Un(f,-1,"../comments"+o+"."+r,en.CMNT),_=!0),d["!legacy"]&&_&&zr(s,"xl/drawings/vmlDrawing"+o+".vml",cF(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}f["!id"].rId1&&zr(s,Km(a),ap(f))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,zr(s,a,Fae(e.Strings,a,e)),i.strs.push(a),Un(e.wbrels,-1,"sharedStrings."+r,en.SST)),a="xl/workbook."+r,zr(s,a,Nae(t,a)),i.workbooks.push(a),Un(e.rels,1,a,en.WB),a="xl/theme/theme1.xml",zr(s,a,l3(t.Themes,e)),i.themes.push(a),Un(e.wbrels,-1,"theme/theme1.xml",en.THEME),a="xl/styles."+r,zr(s,a,Rae(t,a,e)),i.styles.push(a),Un(e.wbrels,-1,"styles."+r,en.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",zr(s,a,t.vbaraw),i.vba.push(a),Un(e.wbrels,-1,"vbaProject.bin",en.VBA)),a="xl/metadata."+r,zr(s,a,Dae(a)),i.metadata.push(a),Un(e.wbrels,-1,"metadata."+r,en.XLMETA),zr(s,"[Content_Types].xml",SR(i,e)),zr(s,"_rels/.rels",ap(e.rels)),zr(s,"xl/_rels/workbook."+r+".rels",ap(e.wbrels)),delete e.revssf,delete e.ssf,s}function rle(t,e){K0=1024,t&&!t.SSF&&(t.SSF=xi(Tr)),t&&t.SSF&&(n1(),hy(t.SSF),e.revssf=py(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,ym?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=fF.indexOf(e.bookType)>-1,i=r3();x3(e=e||{});var s=zb(),a="",o=0;if(e.cellXfs=[],Nh(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",zr(s,a,AR(t.Props,e)),i.coreprops.push(a),Un(e.rels,2,a,en.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,zr(s,a,NR(t.Props)),i.extprops.push(a),Un(e.rels,3,a,en.EXT_PROPS),t.Custprops!==t.Props&&es(t.Custprops||{}).length>0&&(a="docProps/custom.xml",zr(s,a,PR(t.Custprops)),i.custprops.push(a),Un(e.rels,4,a,en.CUST_PROPS));var f=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},m=t.Sheets[t.SheetNames[o-1]],p=(m||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,zr(s,a,bF(o-1,e,t,d)),i.sheets.push(a),Un(e.wbrels,-1,"worksheets/sheet"+o+"."+r,en.WS[0])}if(m){var _=m["!comments"],w=!1,b="";if(_&&_.length>0){var k=!1;_.forEach(function(F){F[1].forEach(function(N){N.T==!0&&(k=!0)})}),k&&(b="xl/threadedComments/threadedComment"+o+"."+r,zr(s,b,cre(_,f,e)),i.threadedcomments.push(b),Un(d,-1,"../threadedComments/threadedComment"+o+"."+r,en.TCMNT)),b="xl/comments"+o+"."+r,zr(s,b,uF(_)),i.comments.push(b),Un(d,-1,"../comments"+o+"."+r,en.CMNT),w=!0}m["!legacy"]&&w&&zr(s,"xl/drawings/vmlDrawing"+o+".vml",cF(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}d["!id"].rId1&&zr(s,Km(a),ap(d))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,zr(s,a,QR(e.Strings,e)),i.strs.push(a),Un(e.wbrels,-1,"sharedStrings."+r,en.SST)),a="xl/workbook."+r,zr(s,a,AF(t)),i.workbooks.push(a),Un(e.rels,1,a,en.WB),a="xl/theme/theme1.xml",zr(s,a,l3(t.Themes,e)),i.themes.push(a),Un(e.wbrels,-1,"theme/theme1.xml",en.THEME),a="xl/styles."+r,zr(s,a,sF(t,e)),i.styles.push(a),Un(e.wbrels,-1,"styles."+r,en.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",zr(s,a,t.vbaraw),i.vba.push(a),Un(e.wbrels,-1,"vbaProject.bin",en.VBA)),a="xl/metadata."+r,zr(s,a,lF()),i.metadata.push(a),Un(e.wbrels,-1,"metadata."+r,en.XLMETA),f.length>1&&(a="xl/persons/person.xml",zr(s,a,fre(f)),i.people.push(a),Un(e.wbrels,-1,"persons/person.xml",en.PEOPLE)),zr(s,"[Content_Types].xml",SR(i,e)),zr(s,"_rels/.rels",ap(e.rels)),zr(s,"xl/_rels/workbook."+r+".rels",ap(e.wbrels)),delete e.revssf,delete e.ssf,s}function v3(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=ul(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function nle(t,e){return yr.find(t,"EncryptedPackage")?Zoe(t,e):PF(t,e)}function ile(t,e){var r,n=t,i=e||{};return i.type||(i.type=Kr&&Buffer.isBuffer(t)?"buffer":"base64"),r=ZP(n,i),Joe(r,i)}function BF(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return N5(t.slice(r),e);default:break e}return Fp.to_workbook(t,e)}function sle(t,e){var r="",n=v3(t,e);switch(e.type){case"base64":r=ul(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Md(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Xn(r)),e.type="binary",BF(r,e)}function ale(t,e){var r=t;return e.type=="base64"&&(r=ul(r)),r=zm.utils.decode(1200,r.slice(2),"str"),e.type="binary",BF(r,e)}function ole(t){return t.match(/[^\x00-\x7F]/)?zc(t):t}function r_(t,e,r,n){return n?(r.type="string",Fp.to_workbook(t,r)):Fp.to_workbook(e,r)}function F5(t,e){Mb();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return F5(new Uint8Array(t),(r=xi(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,i=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),lp={},r.dateNF&&(lp.dateNF=r.dateNF),r.type||(r.type=Kr&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Kr?"buffer":"binary",n=tQ(t),typeof Uint8Array<"u"&&!Kr&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=ole(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return r=xi(r),r.type="array",F5(jb(n),r)}switch((i=v3(n,r))[0]){case 208:if(i[1]===207&&i[2]===17&&i[3]===224&&i[4]===161&&i[5]===177&&i[6]===26&&i[7]===225)return nle(yr.read(n,r),r);break;case 9:if(i[1]<=8)return PF(n,r);break;case 60:return N5(n,r);case 73:if(i[1]===73&&i[2]===42&&i[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(i[1]===68)return hee(n,r);break;case 84:if(i[1]===65&&i[2]===66&&i[3]===76)return XR.to_workbook(n,r);break;case 80:return i[1]===75&&i[2]<9&&i[3]<9?ile(n,r):r_(t,n,r,s);case 239:return i[3]===60?N5(n,r):r_(t,n,r,s);case 255:if(i[1]===254)return ale(n,r);if(i[1]===0&&i[2]===2&&i[3]===0)return xd.to_workbook(n,r);break;case 0:if(i[1]===0&&(i[2]>=2&&i[3]===0||i[2]===0&&(i[3]===8||i[3]===9)))return xd.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return I5.to_workbook(n,r);case 123:if(i[1]===92&&i[2]===114&&i[3]===116)return rF.to_workbook(n,r);break;case 10:case 13:case 32:return sle(n,r);case 137:if(i[1]===80&&i[2]===78&&i[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return fee.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?I5.to_workbook(n,r):r_(t,n,r,s)}function VF(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Ng(e.file,yr.write(t,{type:Kr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return yr.write(t,e)}function lle(t,e){var r=xi(e||{}),n=ele(t,r);return cle(n,r)}function cle(t,e){var r={},n=Kr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?yr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(fy(i))}return e.password&&typeof encrypt_agile<"u"?VF(encrypt_agile(i,e.password),e):e.type==="file"?Ng(e.file,i):e.type=="string"?Xn(i):i}function ule(t,e){var r=e||{},n=ooe(t,r);return VF(n,r)}function Dc(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return $m(zc(n));case"binary":return zc(n);case"string":return t;case"file":return Ng(e.file,n,"utf8");case"buffer":return Kr?Ju(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Dc(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function fle(t,e){switch(e.type){case"base64":return $m(t);case"binary":return t;case"string":return t;case"file":return Ng(e.file,t,"binary");case"buffer":return Kr?Ju(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Kx(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?$m(r):e.type=="string"?Xn(r):r;case"file":return Ng(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function UF(t,e){Mb(),nae(t);var r=xi(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=UF(t,r);return r.type="array",fy(n)}var i=0;if(r.sheet&&(typeof r.sheet=="number"?i=r.sheet:i=t.SheetNames.indexOf(r.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Dc(eoe(t,r),r);case"slk":case"sylk":return Dc(KR.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"htm":case"html":return Dc(FF(t.Sheets[t.SheetNames[i]],r),r);case"txt":return fle(zF(t.Sheets[t.SheetNames[i]],r),r);case"csv":return Dc(y3(t.Sheets[t.SheetNames[i]],r),r,"\uFEFF");case"dif":return Dc(XR.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"dbf":return Kx(I5.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"prn":return Dc(Fp.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"rtf":return Dc(rF.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"eth":return Dc(YR.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"fods":return Dc(MF(t,r),r);case"wk1":return Kx(xd.sheet_to_wk1(t.Sheets[t.SheetNames[i]],r),r);case"wk3":return Kx(xd.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Kx(RF(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),ule(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return lle(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function hle(t,e,r,n,i,s,a,o){var l=xs(r),c=o.defval,f=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,m=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!a||t[r])for(var p=e.s.c;p<=e.e.c;++p){var _=a?t[r][p]:t[n[p]+l];if(_===void 0||_.t===void 0){if(c===void 0)continue;s[p]!=null&&(m[s[p]]=c);continue}var w=_.v;switch(_.t){case"z":if(w==null)break;continue;case"e":w=w==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+_.t)}if(s[p]!=null){if(w==null)if(_.t=="e"&&w===null)m[s[p]]=null;else if(c!==void 0)m[s[p]]=c;else if(f&&w===null)m[s[p]]=null;else continue;else m[s[p]]=f&&(_.t!=="n"||_.t==="n"&&o.rawNumbers!==!1)?w:$u(_,w,o);w!=null&&(d=!1)}}return{row:m,isempty:d}}function xv(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},f=c.range!=null?c.range:t["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof f){case"string":l=_n(f);break;case"number":l=_n(t["!ref"]),l.s.r=f;break;default:l=f}n>0&&(i=0);var d=xs(l.s.r),m=[],p=[],_=0,w=0,b=Array.isArray(t),k=l.s.r,F=0,N={};b&&!t[k]&&(t[k]=[]);var B=c.skipHidden&&t["!cols"]||[],X=c.skipHidden&&t["!rows"]||[];for(F=l.s.c;F<=l.e.c;++F)if(!(B[F]||{}).hidden)switch(m[F]=Vi(F),r=b?t[k][F]:t[m[F]+d],n){case 1:s[F]=F-l.s.c;break;case 2:s[F]=m[F];break;case 3:s[F]=c.header[F-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=$u(r,null,c),w=N[a]||0,!w)N[a]=1;else{do o=a+"_"+w++;while(N[o]);N[a]=w,N[o]=1}s[F]=o}for(k=l.s.r+i;k<=l.e.r;++k)if(!(X[k]||{}).hidden){var G=hle(t,l,k,m,n,s,b,c);(G.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(p[_++]=G.row)}return p.length=_,p}var DT=/"/g;function dle(t,e,r,n,i,s,a,o){for(var l=!0,c=[],f="",d=xs(r),m=e.s.c;m<=e.e.c;++m)if(n[m]){var p=o.dense?(t[r]||[])[m]:t[n[m]+d];if(p==null)f="";else if(p.v!=null){l=!1,f=""+(o.rawNumbers&&p.t=="n"?p.v:$u(p,null,o));for(var _=0,w=0;_!==f.length;++_)if((w=f.charCodeAt(_))===i||w===s||w===34||o.forceQuotes){f='"'+f.replace(DT,'""')+'"';break}f=="ID"&&(f='"ID"')}else p.f!=null&&!p.F?(l=!1,f="="+p.f,f.indexOf(",")>=0&&(f='"'+f.replace(DT,'""')+'"')):f="";c.push(f)}return o.blankrows===!1&&l?null:c.join(a)}function y3(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var i=_n(t["!ref"]),s=n.FS!==void 0?n.FS:",",a=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((s=="|"?"\\|":s)+"+$"),f="",d=[];n.dense=Array.isArray(t);for(var m=n.skipHidden&&t["!cols"]||[],p=n.skipHidden&&t["!rows"]||[],_=i.s.c;_<=i.e.c;++_)(m[_]||{}).hidden||(d[_]=Vi(_));for(var w=0,b=i.s.r;b<=i.e.r;++b)(p[b]||{}).hidden||(f=dle(t,i,b,d,a,l,s,n),f!=null&&(n.strip&&(f=f.replace(c,"")),(f||n.blankrows!==!1)&&r.push((w++?o:"")+f)));return delete n.dense,r.join("")}function zF(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=y3(t,e);return r}function ple(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var i=_n(t["!ref"]),s="",a=[],o,l=[],c=Array.isArray(t);for(o=i.s.c;o<=i.e.c;++o)a[o]=Vi(o);for(var f=i.s.r;f<=i.e.r;++f)for(s=xs(f),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,r=c?(t[f]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function $F(t,e,r){var n=r||{},i=+!n.skipHeader,s=t||{},a=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?Ui(n.origin):n.origin;a=l.r,o=l.c}var c,f={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var d=_n(s["!ref"]);f.e.c=Math.max(f.e.c,d.e.c),f.e.r=Math.max(f.e.r,d.e.r),a==-1&&(a=d.e.r+1,f.e.r=a+e.length-1+i)}else a==-1&&(a=0,f.e.r=e.length-1+i);var m=n.header||[],p=0;e.forEach(function(w,b){es(w).forEach(function(k){(p=m.indexOf(k))==-1&&(m[p=m.length]=k);var F=w[k],N="z",B="",X=Ir({c:o+p,r:a+b+i});c=tg(s,X),F&&typeof F=="object"&&!(F instanceof Date)?s[X]=F:(typeof F=="number"?N="n":typeof F=="boolean"?N="b":typeof F=="string"?N="s":F instanceof Date?(N="d",n.cellDates||(N="n",F=$s(F)),B=n.dateNF||Tr[14]):F===null&&n.nullError&&(N="e",F=0),c?(c.t=N,c.v=F,delete c.w,delete c.R,B&&(c.z=B)):s[X]=c={t:N,v:F},B&&(c.z=B))})}),f.e.c=Math.max(f.e.c,o+m.length-1);var _=xs(a);if(i)for(p=0;p<m.length;++p)s[Vi(p+o)+_]={t:"s",v:m[p]};return s["!ref"]=Vr(f),s}function mle(t,e){return $F(null,t,e)}function tg(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Ui(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?tg(t,Ir(e)):tg(t,Ir({r:e,c:r||0}))}function gle(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function w3(){return{SheetNames:[],Sheets:{}}}function _3(t,e,r,n){var i=1;if(!r)for(;i<=65535&&t.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||r;for(++i;i<=65535&&t.SheetNames.indexOf(r=a+i)!=-1;++i);}if(TF(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function xle(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=gle(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function vle(t,e){return t.z=e,t}function HF(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function yle(t,e,r){return HF(t,"#"+e,r)}function wle(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function _le(t,e,r,n){for(var i=typeof e!="string"?e:_n(e),s=typeof e=="string"?e:Vr(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=tg(t,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=r,n&&(l.D=!0))}return t}var w2={encode_col:Vi,encode_row:xs,encode_cell:Ir,encode_range:Vr,decode_col:Yb,decode_row:Xb,split_cell:FQ,decode_cell:Ui,decode_range:Mo,format_cell:$u,sheet_add_aoa:xR,sheet_add_json:$F,sheet_add_dom:LF,aoa_to_sheet:i1,json_to_sheet:mle,table_to_sheet:DF,table_to_book:Ioe,sheet_to_csv:y3,sheet_to_txt:zF,sheet_to_json:xv,sheet_to_html:FF,sheet_to_formulae:ple,sheet_to_row_object_array:xv,sheet_get_cell:tg,book_new:w3,book_append_sheet:_3,book_set_sheet_visibility:xle,cell_set_number_format:vle,cell_set_hyperlink:HF,cell_set_internal_link:yle,cell_add_comment:wle,sheet_set_array_formula:_le,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const ble=t=>new Promise((e,r)=>{DP.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>e(n.data),error:r})}),Ele=async t=>{const e=await t.arrayBuffer(),r=F5(e,{type:"array"}),n=r.Sheets[r.SheetNames[0]];return w2.sheet_to_json(n)};function WF({pharmacyId:t,onClose:e}){const[r,n]=H.useState(""),i=()=>{const a=[{name:"Paracetamol",price:800,description:"OTC analgesic",image:"https://...",category:"OvertheCounter",stock:50,sku:"PAR-500"},{name:"Ibuprofen",price:1200,description:"NSAID",image:"https://...",category:"OvertheCounter",stock:30,sku:"IBU-200"}],o=Object.keys(a[0]),l=[o.join(","),...a.map(m=>o.map(p=>m[p]).join(","))].join(`
`),c=new Blob([l],{type:"text/csv;charset=utf-8;"}),f=URL.createObjectURL(c),d=document.createElement("a");d.href=f,d.download="pharmasea_inventory_template.csv",d.click(),URL.revokeObjectURL(f)},s=async a=>{try{n("");const o=a?.[0];if(!o)return;let l=[];o.name.endsWith(".csv")?l=await ble(o):l=await Ele(o);const c=l.map(f=>({name:f.name,price:Number(f.price),description:f.description||"",image:f.image||"",category:f.category||"OvertheCounter",stock:Number(f.stock||0),sku:f.sku||""})).filter(f=>f.name&&f.price);if(!c.length)throw new Error("No valid rows found. Expect headers: name, price, description, image, category, stock, sku");await m7(c,t),e()}catch(o){n(o.message||"Failed to parse file")}};return x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 backdrop-blur-sm",children:x.jsxs("div",{className:"bg-white rounded-3xl p-6 w-[90vw] max-w-sm shadow-xl border border-[#9ED3FF]",children:[x.jsx("div",{className:"text-lg font-light font-poppins mb-4 text-black",children:"Bulk Upload Products"}),x.jsx("div",{className:"space-y-3",children:x.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",placeholder:"CSV File",type:"file",onChange:a=>s(a.target.files),accept:".csv,.xlsx"})}),x.jsxs("div",{className:"flex gap-2 mt-6",children:[x.jsx("button",{onClick:i,className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700",children:"Download CSV template"}),x.jsx("button",{className:"flex-1 rounded-full border border-zinc-300 text-zinc-500 text-[13px] font-light py-2",onClick:e,children:"Cancel"})]}),r&&x.jsx("div",{className:"mt-3 text-red-600 text-sm",children:r})]})})}function zn(t){"@babel/helpers - typeof";return zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zn(t)}var dc=Uint8Array,al=Uint16Array,b3=Int32Array,E3=new dc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),S3=new dc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),OT=new dc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qF=function(t,e){for(var r=new al(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new b3(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)i[s]=s-r[n]<<5|n;return{b:r,r:i}},GF=qF(E3,2),Sle=GF.b,L5=GF.r;Sle[28]=258,L5[258]=28;var kle=qF(S3,0),MT=kle.r,D5=new al(32768);for(var mi=0;mi<32768;++mi){var Rf=(mi&43690)>>1|(mi&21845)<<1;Rf=(Rf&52428)>>2|(Rf&13107)<<2,Rf=(Rf&61680)>>4|(Rf&3855)<<4,D5[mi]=((Rf&65280)>>8|(Rf&255)<<8)>>1}var bm=(function(t,e,r){for(var n=t.length,i=0,s=new al(e);i<n;++i)t[i]&&++s[t[i]-1];var a=new al(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(r){o=new al(1<<e);var l=15-e;for(i=0;i<n;++i)if(t[i])for(var c=i<<4|t[i],f=e-t[i],d=a[t[i]-1]++<<f,m=d|(1<<f)-1;d<=m;++d)o[D5[d]>>l]=c}else for(o=new al(n),i=0;i<n;++i)t[i]&&(o[i]=D5[a[t[i]-1]++]>>15-t[i]);return o}),zd=new dc(288);for(var mi=0;mi<144;++mi)zd[mi]=8;for(var mi=144;mi<256;++mi)zd[mi]=9;for(var mi=256;mi<280;++mi)zd[mi]=7;for(var mi=280;mi<288;++mi)zd[mi]=8;var vv=new dc(32);for(var mi=0;mi<32;++mi)vv[mi]=5;var Tle=bm(zd,9,0),Ale=bm(vv,5,0),KF=function(t){return(t+7)/8|0},Cle=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new dc(t.subarray(e,r))},ku=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},H1=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},n_=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,s=r.slice();if(!i)return{t:YF,l:0};if(i==1){var a=new dc(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(X,G){return X.f-G.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],c=0,f=1,d=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};f!=i-1;)o=r[r[c].f<r[d].f?c++:d++],l=r[c!=f&&r[c].f<r[d].f?c++:d++],r[f++]={s:-1,f:o.f+l.f,l:o,r:l};for(var m=s[0].s,n=1;n<i;++n)s[n].s>m&&(m=s[n].s);var p=new al(m+1),_=O5(r[f-1],p,0);if(_>e){var n=0,w=0,b=_-e,k=1<<b;for(s.sort(function(G,P){return p[P.s]-p[G.s]||G.f-P.f});n<i;++n){var F=s[n].s;if(p[F]>e)w+=k-(1<<_-p[F]),p[F]=e;else break}for(w>>=b;w>0;){var N=s[n].s;p[N]<e?w-=1<<e-p[N]++-1:++n}for(;n>=0&&w;--n){var B=s[n].s;p[B]==e&&(--p[B],++w)}_=e}return{t:new dc(p),l:_}},O5=function(t,e,r){return t.s==-1?Math.max(O5(t.l,e,r+1),O5(t.r,e,r+1)):e[t.s]=r},jT=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new al(++e),n=0,i=t[0],s=1,a=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=t[o]}return{c:r.subarray(0,n),n:e}},W1=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},XF=function(t,e,r){var n=r.length,i=KF(e+2);t[i]=n&255,t[i+1]=n>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<n;++s)t[i+s+4]=r[s];return(i+4+n)*8},BT=function(t,e,r,n,i,s,a,o,l,c,f){ku(e,f++,r),++i[256];for(var d=n_(i,15),m=d.t,p=d.l,_=n_(s,15),w=_.t,b=_.l,k=jT(m),F=k.c,N=k.n,B=jT(w),X=B.c,G=B.n,P=new al(19),A=0;A<F.length;++A)++P[F[A]&31];for(var A=0;A<X.length;++A)++P[X[A]&31];for(var T=n_(P,7),O=T.t,I=T.l,D=19;D>4&&!O[OT[D-1]];--D);var M=c+5<<3,ie=W1(i,zd)+W1(s,vv)+a,be=W1(i,m)+W1(s,w)+a+14+3*D+W1(P,O)+2*P[16]+3*P[17]+7*P[18];if(l>=0&&M<=ie&&M<=be)return XF(e,f,t.subarray(l,l+c));var Ne,we,le,J;if(ku(e,f,1+(be<ie)),f+=2,be<ie){Ne=bm(m,p,0),we=m,le=bm(w,b,0),J=w;var ue=bm(O,I,0);ku(e,f,N-257),ku(e,f+5,G-1),ku(e,f+10,D-4),f+=14;for(var A=0;A<D;++A)ku(e,f+3*A,O[OT[A]]);f+=3*D;for(var ee=[F,X],C=0;C<2;++C)for(var U=ee[C],A=0;A<U.length;++A){var W=U[A]&31;ku(e,f,ue[W]),f+=O[W],W>15&&(ku(e,f,U[A]>>5&127),f+=U[A]>>12)}}else Ne=Tle,we=zd,le=Ale,J=vv;for(var A=0;A<o;++A){var Y=n[A];if(Y>255){var W=Y>>18&31;H1(e,f,Ne[W+257]),f+=we[W+257],W>7&&(ku(e,f,Y>>23&31),f+=E3[W]);var ae=Y&31;H1(e,f,le[ae]),f+=J[ae],ae>3&&(H1(e,f,Y>>5&8191),f+=S3[ae])}else H1(e,f,Ne[Y]),f+=we[Y]}return H1(e,f,Ne[256]),f+we[256]},Ile=new b3([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),YF=new dc(0),Nle=function(t,e,r,n,i,s){var a=s.z||t.length,o=new dc(n+a+5*(1+Math.ceil(a/7e3))+i),l=o.subarray(n,o.length-i),c=s.l,f=(s.r||0)&7;if(e){f&&(l[0]=s.r>>3);for(var d=Ile[e-1],m=d>>13,p=d&8191,_=(1<<r)-1,w=s.p||new al(32768),b=s.h||new al(_+1),k=Math.ceil(r/3),F=2*k,N=function(Re){return(t[Re]^t[Re+1]<<k^t[Re+2]<<F)&_},B=new b3(25e3),X=new al(288),G=new al(32),P=0,A=0,T=s.i||0,O=0,I=s.w||0,D=0;T+2<a;++T){var M=N(T),ie=T&32767,be=b[M];if(w[ie]=be,b[M]=ie,I<=T){var Ne=a-T;if((P>7e3||O>24576)&&(Ne>423||!c)){f=BT(t,l,0,B,X,G,A,O,D,T-D,f),O=P=A=0,D=T;for(var we=0;we<286;++we)X[we]=0;for(var we=0;we<30;++we)G[we]=0}var le=2,J=0,ue=p,ee=ie-be&32767;if(Ne>2&&M==N(T-ee))for(var C=Math.min(m,Ne)-1,U=Math.min(32767,T),W=Math.min(258,Ne);ee<=U&&--ue&&ie!=be;){if(t[T+le]==t[T+le-ee]){for(var Y=0;Y<W&&t[T+Y]==t[T+Y-ee];++Y);if(Y>le){if(le=Y,J=ee,Y>C)break;for(var ae=Math.min(ee,Y-2),pe=0,we=0;we<ae;++we){var he=T-ee+we&32767,xe=w[he],Ee=he-xe&32767;Ee>pe&&(pe=Ee,be=he)}}}ie=be,be=w[ie],ee+=ie-be&32767}if(J){B[O++]=268435456|L5[le]<<18|MT[J];var Fe=L5[le]&31,oe=MT[J]&31;A+=E3[Fe]+S3[oe],++X[257+Fe],++G[oe],I=T+le,++P}else B[O++]=t[T],++X[t[T]]}}for(T=Math.max(T,I);T<a;++T)B[O++]=t[T],++X[t[T]];f=BT(t,l,c,B,X,G,A,O,D,T-D,f),c||(s.r=f&7|l[f/8|0]<<3,f-=7,s.h=b,s.p=w,s.i=T,s.w=I)}else{for(var T=s.w||0;T<a+c;T+=65535){var Je=T+65535;Je>=a&&(l[f/8|0]=c,Je=a),f=XF(l,f+1,t.subarray(T,Je))}s.i=a}return Cle(o,0,n+KF(f)+i)},QF=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,s=r.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=n+=r[a];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}t=n,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Ple=function(t,e,r,n,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new dc(s.length+t.length);a.set(s),a.set(t,s.length),t=a,i.w=s.length}return Nle(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,i)},JF=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},Rle=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=QF();i.p(e.dictionary),JF(t,2,i.d())}};function M5(t,e){e||(e={});var r=QF();r.p(t);var n=Ple(t,e,e.dictionary?6:2,4);return Rle(n,e),JF(n,n.length-4,r.d()),n}var Fle=typeof TextDecoder<"u"&&new TextDecoder,Lle=0;try{Fle.decode(YF,{stream:!0}),Lle=1}catch{}function Dle(t){if(Array.isArray(t))return t}function Ole(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function VT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Mle(t,e){if(t){if(typeof t=="string")return VT(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?VT(t,e):void 0}}function jle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UT(t,e){return Dle(t)||Ole(t,e)||Mle(t,e)||jle()}function zT(t,e="utf8"){return new TextDecoder(e).decode(t)}const Ble=new TextEncoder;function Vle(t){return Ble.encode(t)}const Ule=1024*8,zle=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),i_={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class k3{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=Ule,r={}){let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=r.offset?r.offset>>>0:0,s=e.byteLength-i;let a=i;(ArrayBuffer.isView(e)||e instanceof k3)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=i_[r].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+n);if(this.littleEndian===zle&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+n));o.reverse();const l=new i_[r](o.buffer);return this.offset+=n,l.reverse(),l}const a=new i_[r](s);return this.offset+=n,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return zT(this.readBytes(e))}decodeText(e=1,r="utf8"){return zT(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(Vle(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function a1(t){let e=t.length;for(;--e>=0;)t[e]=0}const $le=3,Hle=258,ZF=29,Wle=256,qle=Wle+1+ZF,e9=30,Gle=512,Kle=new Array((qle+2)*2);a1(Kle);const Xle=new Array(e9*2);a1(Xle);const Yle=new Array(Gle);a1(Yle);const Qle=new Array(Hle-$le+1);a1(Qle);const Jle=new Array(ZF);a1(Jle);const Zle=new Array(e9);a1(Zle);const ece=(t,e,r,n)=>{let i=t&65535|0,s=t>>>16&65535|0,a=0;for(;r!==0;){a=r>2e3?2e3:r,r-=a;do i=i+e[n++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0};var j5=ece;const tce=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},rce=new Uint32Array(tce()),nce=(t,e,r,n)=>{const i=rce,s=n+r;t^=-1;for(let a=n;a<s;a++)t=t>>>8^i[(t^e[a])&255];return t^-1};var Rc=nce,B5={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},t9={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const ice=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var sce=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)ice(r,n)&&(t[n]=r[n])}}return t},ace=t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,i=0,s=t.length;n<s;n++){let a=t[n];r.set(a,i),i+=a.length}return r},r9={assign:sce,flattenChunks:ace};let n9=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n9=!1}const rg=new Uint8Array(256);for(let t=0;t<256;t++)rg[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;rg[254]=rg[254]=1;var oce=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,i,s,a=t.length,o=0;for(i=0;i<a;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),s=0,i=0;s<o;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const lce=(t,e)=>{if(e<65534&&t.subarray&&n9)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var cce=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,i;const s=new Array(r*2);for(i=0,n=0;n<r;){let a=t[n++];if(a<128){s[i++]=a;continue}let o=rg[a];if(o>4){s[i++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<r;)a=a<<6|t[n++]&63,o--;if(o>1){s[i++]=65533;continue}a<65536?s[i++]=a:(a-=65536,s[i++]=55296|a>>10&1023,s[i++]=56320|a&1023)}return lce(s,i)},uce=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+rg[t[r]]>e?r:e},V5={string2buf:oce,buf2string:cce,utf8border:uce};function fce(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var hce=fce;const Xx=16209,dce=16191;var pce=function(e,r){let n,i,s,a,o,l,c,f,d,m,p,_,w,b,k,F,N,B,X,G,P,A,T,O;const I=e.state;n=e.next_in,T=e.input,i=n+(e.avail_in-5),s=e.next_out,O=e.output,a=s-(r-e.avail_out),o=s+(e.avail_out-257),l=I.dmax,c=I.wsize,f=I.whave,d=I.wnext,m=I.window,p=I.hold,_=I.bits,w=I.lencode,b=I.distcode,k=(1<<I.lenbits)-1,F=(1<<I.distbits)-1;e:do{_<15&&(p+=T[n++]<<_,_+=8,p+=T[n++]<<_,_+=8),N=w[p&k];t:for(;;){if(B=N>>>24,p>>>=B,_-=B,B=N>>>16&255,B===0)O[s++]=N&65535;else if(B&16){X=N&65535,B&=15,B&&(_<B&&(p+=T[n++]<<_,_+=8),X+=p&(1<<B)-1,p>>>=B,_-=B),_<15&&(p+=T[n++]<<_,_+=8,p+=T[n++]<<_,_+=8),N=b[p&F];r:for(;;){if(B=N>>>24,p>>>=B,_-=B,B=N>>>16&255,B&16){if(G=N&65535,B&=15,_<B&&(p+=T[n++]<<_,_+=8,_<B&&(p+=T[n++]<<_,_+=8)),G+=p&(1<<B)-1,G>l){e.msg="invalid distance too far back",I.mode=Xx;break e}if(p>>>=B,_-=B,B=s-a,G>B){if(B=G-B,B>f&&I.sane){e.msg="invalid distance too far back",I.mode=Xx;break e}if(P=0,A=m,d===0){if(P+=c-B,B<X){X-=B;do O[s++]=m[P++];while(--B);P=s-G,A=O}}else if(d<B){if(P+=c+d-B,B-=d,B<X){X-=B;do O[s++]=m[P++];while(--B);if(P=0,d<X){B=d,X-=B;do O[s++]=m[P++];while(--B);P=s-G,A=O}}}else if(P+=d-B,B<X){X-=B;do O[s++]=m[P++];while(--B);P=s-G,A=O}for(;X>2;)O[s++]=A[P++],O[s++]=A[P++],O[s++]=A[P++],X-=3;X&&(O[s++]=A[P++],X>1&&(O[s++]=A[P++]))}else{P=s-G;do O[s++]=O[P++],O[s++]=O[P++],O[s++]=O[P++],X-=3;while(X>2);X&&(O[s++]=O[P++],X>1&&(O[s++]=O[P++]))}}else if((B&64)===0){N=b[(N&65535)+(p&(1<<B)-1)];continue r}else{e.msg="invalid distance code",I.mode=Xx;break e}break}}else if((B&64)===0){N=w[(N&65535)+(p&(1<<B)-1)];continue t}else if(B&32){I.mode=dce;break e}else{e.msg="invalid literal/length code",I.mode=Xx;break e}break}}while(n<i&&s<o);X=_>>3,n-=X,_-=X<<3,p&=(1<<_)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=s<o?257+(o-s):257-(s-o),I.hold=p,I.bits=_};const L0=15,$T=852,HT=592,WT=0,s_=1,qT=2,mce=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),gce=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),xce=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),vce=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),yce=(t,e,r,n,i,s,a,o)=>{const l=o.bits;let c=0,f=0,d=0,m=0,p=0,_=0,w=0,b=0,k=0,F=0,N,B,X,G,P,A=null,T;const O=new Uint16Array(L0+1),I=new Uint16Array(L0+1);let D=null,M,ie,be;for(c=0;c<=L0;c++)O[c]=0;for(f=0;f<n;f++)O[e[r+f]]++;for(p=l,m=L0;m>=1&&O[m]===0;m--);if(p>m&&(p=m),m===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,o.bits=1,0;for(d=1;d<m&&O[d]===0;d++);for(p<d&&(p=d),b=1,c=1;c<=L0;c++)if(b<<=1,b-=O[c],b<0)return-1;if(b>0&&(t===WT||m!==1))return-1;for(I[1]=0,c=1;c<L0;c++)I[c+1]=I[c]+O[c];for(f=0;f<n;f++)e[r+f]!==0&&(a[I[e[r+f]]++]=f);if(t===WT?(A=D=a,T=20):t===s_?(A=mce,D=gce,T=257):(A=xce,D=vce,T=0),F=0,f=0,c=d,P=s,_=p,w=0,X=-1,k=1<<p,G=k-1,t===s_&&k>$T||t===qT&&k>HT)return 1;for(;;){M=c-w,a[f]+1<T?(ie=0,be=a[f]):a[f]>=T?(ie=D[a[f]-T],be=A[a[f]-T]):(ie=96,be=0),N=1<<c-w,B=1<<_,d=B;do B-=N,i[P+(F>>w)+B]=M<<24|ie<<16|be|0;while(B!==0);for(N=1<<c-1;F&N;)N>>=1;if(N!==0?(F&=N-1,F+=N):F=0,f++,--O[c]===0){if(c===m)break;c=e[r+a[f]]}if(c>p&&(F&G)!==X){for(w===0&&(w=p),P+=d,_=c-w,b=1<<_;_+w<m&&(b-=O[_+w],!(b<=0));)_++,b<<=1;if(k+=1<<_,t===s_&&k>$T||t===qT&&k>HT)return 1;X=F&G,i[X]=p<<24|_<<16|P-s|0}}return F!==0&&(i[P+F]=c-w<<24|64<<16|0),o.bits=p,0};var Em=yce;const wce=0,i9=1,s9=2,{Z_FINISH:GT,Z_BLOCK:_ce,Z_TREES:Yx,Z_OK:$d,Z_STREAM_END:bce,Z_NEED_DICT:Ece,Z_STREAM_ERROR:Ol,Z_DATA_ERROR:a9,Z_MEM_ERROR:o9,Z_BUF_ERROR:Sce,Z_DEFLATED:KT}=t9,wy=16180,XT=16181,YT=16182,QT=16183,JT=16184,ZT=16185,eA=16186,tA=16187,rA=16188,nA=16189,yv=16190,Tu=16191,a_=16192,iA=16193,o_=16194,sA=16195,aA=16196,oA=16197,lA=16198,Qx=16199,Jx=16200,cA=16201,uA=16202,fA=16203,hA=16204,dA=16205,l_=16206,pA=16207,mA=16208,ki=16209,l9=16210,c9=16211,kce=852,Tce=592,Ace=15,Cce=Ace,gA=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function Ice(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const t0=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<wy||e.mode>c9?1:0},u9=t=>{if(t0(t))return Ol;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=wy,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(kce),e.distcode=e.distdyn=new Int32Array(Tce),e.sane=1,e.back=-1,$d},f9=t=>{if(t0(t))return Ol;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,u9(t)},h9=(t,e)=>{let r;if(t0(t))return Ol;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ol:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,f9(t))},d9=(t,e)=>{if(!t)return Ol;const r=new Ice;t.state=r,r.strm=t,r.window=null,r.mode=wy;const n=h9(t,e);return n!==$d&&(t.state=null),n},Nce=t=>d9(t,Cce);let xA=!0,c_,u_;const Pce=t=>{if(xA){c_=new Int32Array(512),u_=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Em(i9,t.lens,0,288,c_,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Em(s9,t.lens,0,32,u_,0,t.work,{bits:5}),xA=!1}t.lencode=c_,t.lenbits=9,t.distcode=u_,t.distbits=5},p9=(t,e,r,n)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(e.subarray(r-n,r-n+i),s.wnext),n-=i,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},Rce=(t,e)=>{let r,n,i,s,a,o,l,c,f,d,m,p,_,w,b=0,k,F,N,B,X,G,P,A;const T=new Uint8Array(4);let O,I;const D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(t0(t)||!t.output||!t.input&&t.avail_in!==0)return Ol;r=t.state,r.mode===Tu&&(r.mode=a_),a=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,c=r.hold,f=r.bits,d=o,m=l,A=$d;e:for(;;)switch(r.mode){case wy:if(r.wrap===0){r.mode=a_;break}for(;f<16;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if(r.wrap&2&&c===35615){r.wbits===0&&(r.wbits=15),r.check=0,T[0]=c&255,T[1]=c>>>8&255,r.check=Rc(r.check,T,2,0),c=0,f=0,r.mode=XT;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=ki;break}if((c&15)!==KT){t.msg="unknown compression method",r.mode=ki;break}if(c>>>=4,f-=4,P=(c&15)+8,r.wbits===0&&(r.wbits=P),P>15||P>r.wbits){t.msg="invalid window size",r.mode=ki;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=c&512?nA:Tu,c=0,f=0;break;case XT:for(;f<16;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if(r.flags=c,(r.flags&255)!==KT){t.msg="unknown compression method",r.mode=ki;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=ki;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&r.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,r.check=Rc(r.check,T,2,0)),c=0,f=0,r.mode=YT;case YT:for(;f<32;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}r.head&&(r.head.time=c),r.flags&512&&r.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,r.check=Rc(r.check,T,4,0)),c=0,f=0,r.mode=QT;case QT:for(;f<16;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&r.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,r.check=Rc(r.check,T,2,0)),c=0,f=0,r.mode=JT;case JT:if(r.flags&1024){for(;f<16;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&r.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,r.check=Rc(r.check,T,2,0)),c=0,f=0}else r.head&&(r.head.extra=null);r.mode=ZT;case ZT:if(r.flags&1024&&(p=r.length,p>o&&(p=o),p&&(r.head&&(P=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+p),P)),r.flags&512&&r.wrap&4&&(r.check=Rc(r.check,n,p,s)),o-=p,s+=p,r.length-=p),r.length))break e;r.length=0,r.mode=eA;case eA:if(r.flags&2048){if(o===0)break e;p=0;do P=n[s+p++],r.head&&P&&r.length<65536&&(r.head.name+=String.fromCharCode(P));while(P&&p<o);if(r.flags&512&&r.wrap&4&&(r.check=Rc(r.check,n,p,s)),o-=p,s+=p,P)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=tA;case tA:if(r.flags&4096){if(o===0)break e;p=0;do P=n[s+p++],r.head&&P&&r.length<65536&&(r.head.comment+=String.fromCharCode(P));while(P&&p<o);if(r.flags&512&&r.wrap&4&&(r.check=Rc(r.check,n,p,s)),o-=p,s+=p,P)break e}else r.head&&(r.head.comment=null);r.mode=rA;case rA:if(r.flags&512){for(;f<16;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if(r.wrap&4&&c!==(r.check&65535)){t.msg="header crc mismatch",r.mode=ki;break}c=0,f=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Tu;break;case nA:for(;f<32;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}t.adler=r.check=gA(c),c=0,f=0,r.mode=yv;case yv:if(r.havedict===0)return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=c,r.bits=f,Ece;t.adler=r.check=1,r.mode=Tu;case Tu:if(e===_ce||e===Yx)break e;case a_:if(r.last){c>>>=f&7,f-=f&7,r.mode=l_;break}for(;f<3;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}switch(r.last=c&1,c>>>=1,f-=1,c&3){case 0:r.mode=iA;break;case 1:if(Pce(r),r.mode=Qx,e===Yx){c>>>=2,f-=2;break e}break;case 2:r.mode=aA;break;case 3:t.msg="invalid block type",r.mode=ki}c>>>=2,f-=2;break;case iA:for(c>>>=f&7,f-=f&7;f<32;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=ki;break}if(r.length=c&65535,c=0,f=0,r.mode=o_,e===Yx)break e;case o_:r.mode=sA;case sA:if(p=r.length,p){if(p>o&&(p=o),p>l&&(p=l),p===0)break e;i.set(n.subarray(s,s+p),a),o-=p,s+=p,l-=p,a+=p,r.length-=p;break}r.mode=Tu;break;case aA:for(;f<14;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if(r.nlen=(c&31)+257,c>>>=5,f-=5,r.ndist=(c&31)+1,c>>>=5,f-=5,r.ncode=(c&15)+4,c>>>=4,f-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=ki;break}r.have=0,r.mode=oA;case oA:for(;r.have<r.ncode;){for(;f<3;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}r.lens[D[r.have++]]=c&7,c>>>=3,f-=3}for(;r.have<19;)r.lens[D[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,O={bits:r.lenbits},A=Em(wce,r.lens,0,19,r.lencode,0,r.work,O),r.lenbits=O.bits,A){t.msg="invalid code lengths set",r.mode=ki;break}r.have=0,r.mode=lA;case lA:for(;r.have<r.nlen+r.ndist;){for(;b=r.lencode[c&(1<<r.lenbits)-1],k=b>>>24,F=b>>>16&255,N=b&65535,!(k<=f);){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if(N<16)c>>>=k,f-=k,r.lens[r.have++]=N;else{if(N===16){for(I=k+2;f<I;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if(c>>>=k,f-=k,r.have===0){t.msg="invalid bit length repeat",r.mode=ki;break}P=r.lens[r.have-1],p=3+(c&3),c>>>=2,f-=2}else if(N===17){for(I=k+3;f<I;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}c>>>=k,f-=k,P=0,p=3+(c&7),c>>>=3,f-=3}else{for(I=k+7;f<I;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}c>>>=k,f-=k,P=0,p=11+(c&127),c>>>=7,f-=7}if(r.have+p>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=ki;break}for(;p--;)r.lens[r.have++]=P}}if(r.mode===ki)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=ki;break}if(r.lenbits=9,O={bits:r.lenbits},A=Em(i9,r.lens,0,r.nlen,r.lencode,0,r.work,O),r.lenbits=O.bits,A){t.msg="invalid literal/lengths set",r.mode=ki;break}if(r.distbits=6,r.distcode=r.distdyn,O={bits:r.distbits},A=Em(s9,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,O),r.distbits=O.bits,A){t.msg="invalid distances set",r.mode=ki;break}if(r.mode=Qx,e===Yx)break e;case Qx:r.mode=Jx;case Jx:if(o>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=c,r.bits=f,pce(t,m),a=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,c=r.hold,f=r.bits,r.mode===Tu&&(r.back=-1);break}for(r.back=0;b=r.lencode[c&(1<<r.lenbits)-1],k=b>>>24,F=b>>>16&255,N=b&65535,!(k<=f);){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if(F&&(F&240)===0){for(B=k,X=F,G=N;b=r.lencode[G+((c&(1<<B+X)-1)>>B)],k=b>>>24,F=b>>>16&255,N=b&65535,!(B+k<=f);){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}c>>>=B,f-=B,r.back+=B}if(c>>>=k,f-=k,r.back+=k,r.length=N,F===0){r.mode=dA;break}if(F&32){r.back=-1,r.mode=Tu;break}if(F&64){t.msg="invalid literal/length code",r.mode=ki;break}r.extra=F&15,r.mode=cA;case cA:if(r.extra){for(I=r.extra;f<I;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=uA;case uA:for(;b=r.distcode[c&(1<<r.distbits)-1],k=b>>>24,F=b>>>16&255,N=b&65535,!(k<=f);){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if((F&240)===0){for(B=k,X=F,G=N;b=r.distcode[G+((c&(1<<B+X)-1)>>B)],k=b>>>24,F=b>>>16&255,N=b&65535,!(B+k<=f);){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}c>>>=B,f-=B,r.back+=B}if(c>>>=k,f-=k,r.back+=k,F&64){t.msg="invalid distance code",r.mode=ki;break}r.offset=N,r.extra=F&15,r.mode=fA;case fA:if(r.extra){for(I=r.extra;f<I;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=ki;break}r.mode=hA;case hA:if(l===0)break e;if(p=m-l,r.offset>p){if(p=r.offset-p,p>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=ki;break}p>r.wnext?(p-=r.wnext,_=r.wsize-p):_=r.wnext-p,p>r.length&&(p=r.length),w=r.window}else w=i,_=a-r.offset,p=r.length;p>l&&(p=l),l-=p,r.length-=p;do i[a++]=w[_++];while(--p);r.length===0&&(r.mode=Jx);break;case dA:if(l===0)break e;i[a++]=r.length,l--,r.mode=Jx;break;case l_:if(r.wrap){for(;f<32;){if(o===0)break e;o--,c|=n[s++]<<f,f+=8}if(m-=l,t.total_out+=m,r.total+=m,r.wrap&4&&m&&(t.adler=r.check=r.flags?Rc(r.check,i,m,a-m):j5(r.check,i,m,a-m)),m=l,r.wrap&4&&(r.flags?c:gA(c))!==r.check){t.msg="incorrect data check",r.mode=ki;break}c=0,f=0}r.mode=pA;case pA:if(r.wrap&&r.flags){for(;f<32;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if(r.wrap&4&&c!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=ki;break}c=0,f=0}r.mode=mA;case mA:A=bce;break e;case ki:A=a9;break e;case l9:return o9;case c9:default:return Ol}return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=c,r.bits=f,(r.wsize||m!==t.avail_out&&r.mode<ki&&(r.mode<l_||e!==GT))&&p9(t,t.output,t.next_out,m-t.avail_out),d-=t.avail_in,m-=t.avail_out,t.total_in+=d,t.total_out+=m,r.total+=m,r.wrap&4&&m&&(t.adler=r.check=r.flags?Rc(r.check,i,m,t.next_out-m):j5(r.check,i,m,t.next_out-m)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Tu?128:0)+(r.mode===Qx||r.mode===o_?256:0),(d===0&&m===0||e===GT)&&A===$d&&(A=Sce),A},Fce=t=>{if(t0(t))return Ol;let e=t.state;return e.window&&(e.window=null),t.state=null,$d},Lce=(t,e)=>{if(t0(t))return Ol;const r=t.state;return(r.wrap&2)===0?Ol:(r.head=e,e.done=!1,$d)},Dce=(t,e)=>{const r=e.length;let n,i,s;return t0(t)||(n=t.state,n.wrap!==0&&n.mode!==yv)?Ol:n.mode===yv&&(i=1,i=j5(i,e,r,0),i!==n.check)?a9:(s=p9(t,e,r,r),s?(n.mode=l9,o9):(n.havedict=1,$d))};var Oce=f9,Mce=h9,jce=u9,Bce=Nce,Vce=d9,Uce=Rce,zce=Fce,$ce=Lce,Hce=Dce,Wce="pako inflate (from Nodeca project)",Au={inflateReset:Oce,inflateReset2:Mce,inflateResetKeep:jce,inflateInit:Bce,inflateInit2:Vce,inflate:Uce,inflateEnd:zce,inflateGetHeader:$ce,inflateSetDictionary:Hce,inflateInfo:Wce};function qce(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Gce=qce;const m9=Object.prototype.toString,{Z_NO_FLUSH:Kce,Z_FINISH:Xce,Z_OK:ng,Z_STREAM_END:f_,Z_NEED_DICT:h_,Z_STREAM_ERROR:Yce,Z_DATA_ERROR:vA,Z_MEM_ERROR:Qce}=t9;function jg(t){this.options=r9.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new hce,this.strm.avail_out=0;let r=Au.inflateInit2(this.strm,e.windowBits);if(r!==ng)throw new Error(B5[r]);if(this.header=new Gce,Au.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=V5.string2buf(e.dictionary):m9.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Au.inflateSetDictionary(this.strm,e.dictionary),r!==ng)))throw new Error(B5[r])}jg.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?Xce:Kce,m9.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=Au.inflate(r,a),s===h_&&i&&(s=Au.inflateSetDictionary(r,i),s===ng?s=Au.inflate(r,a):s===vA&&(s=h_));r.avail_in>0&&s===f_&&r.state.wrap>0&&t[r.next_in]!==0;)Au.inflateReset(r),s=Au.inflate(r,a);switch(s){case Yce:case vA:case h_:case Qce:return this.onEnd(s),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||s===f_))if(this.options.to==="string"){let l=V5.utf8border(r.output,r.next_out),c=r.next_out-l,f=V5.buf2string(r.output,l);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(l,l+c),0),this.onData(f)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===ng&&o===0)){if(s===f_)return s=Au.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};jg.prototype.onData=function(t){this.chunks.push(t)};jg.prototype.onEnd=function(t){t===ng&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r9.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Jce(t,e){const r=new jg(e);if(r.push(t),r.err)throw r.msg||B5[r.err];return r.result}var Zce=jg,eue=Jce,tue={Inflate:Zce,inflate:eue};const{Inflate:rue,inflate:nue}=tue;var yA=rue,iue=nue;const g9=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;g9[t]=e}const wA=4294967295;function sue(t,e,r){let n=t;for(let i=0;i<r;i++)n=g9[(n^e[i])&255]^n>>>8;return n}function aue(t,e){return(sue(wA,t,e)^wA)>>>0}function _A(t,e,r){const n=t.readUint32(),i=aue(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function x9(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function v9(t,e,r,n){let i=0;for(;i<n;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+e[i-n]&255}function y9(t,e,r,n){let i=0;if(r.length===0)for(;i<n;i++)e[i]=t[i];else for(;i<n;i++)e[i]=t[i]+r[i]&255}function w9(t,e,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-i]+r[s]>>1)&255}}function _9(t,e,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+oue(e[s-i],r[s],r[s-i])&255}}function oue(t,e,r){const n=t+e-r,i=Math.abs(n-t),s=Math.abs(n-e),a=Math.abs(n-r);return i<=s&&i<=a?t:s<=a?e:r}function lue(t,e,r,n,i,s){switch(t){case 0:x9(e,r,i);break;case 1:v9(e,r,i,s);break;case 2:y9(e,r,n,i);break;case 3:w9(e,r,n,i,s);break;case 4:_9(e,r,n,i,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const cue=new Uint16Array([255]),uue=new Uint8Array(cue.buffer),fue=uue[0]===255;function hue(t){const{data:e,width:r,height:n,channels:i,depth:s}=t,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*i,l=new Uint8Array(n*r*o);let c=0;for(let f=0;f<7;f++){const d=a[f],m=Math.ceil((r-d.x)/d.xStep),p=Math.ceil((n-d.y)/d.yStep);if(m<=0||p<=0)continue;const _=m*o,w=new Uint8Array(_);for(let b=0;b<p;b++){const k=e[c++],F=e.subarray(c,c+_);c+=_;const N=new Uint8Array(_);lue(k,F,N,w,_,o),w.set(N);for(let B=0;B<m;B++){const X=d.x+B*d.xStep,G=d.y+b*d.yStep;if(!(X>=r||G>=n))for(let P=0;P<o;P++)l[(G*r+X)*o+P]=N[B*o+P]}}}if(s===16){const f=new Uint16Array(l.buffer);if(fue)for(let d=0;d<f.length;d++)f[d]=due(f[d]);return f}else return l}function due(t){return(t&255)<<8|t>>8&255}const pue=new Uint16Array([255]),mue=new Uint8Array(pue.buffer),gue=mue[0]===255,xue=new Uint8Array(0);function bA(t){const{data:e,width:r,height:n,channels:i,depth:s}=t,a=Math.ceil(s/8)*i,o=Math.ceil(s/8*i*r),l=new Uint8Array(n*o);let c=xue,f=0,d,m;for(let p=0;p<n;p++){switch(d=e.subarray(f+1,f+1+o),m=l.subarray(p*o,(p+1)*o),e[f]){case 0:x9(d,m,o);break;case 1:v9(d,m,o,a);break;case 2:y9(d,m,c,o);break;case 3:w9(d,m,c,o,a);break;case 4:_9(d,m,c,o,a);break;default:throw new Error(`Unsupported filter: ${e[f]}`)}c=m,f+=o+1}if(s===16){const p=new Uint16Array(l.buffer);if(gue)for(let _=0;_<p.length;_++)p[_]=vue(p[_]);return p}else return l}function vue(t){return(t&255)<<8|t>>8&255}const _2=Uint8Array.of(137,80,78,71,13,10,26,10);function EA(t){if(!yue(t.readBytes(_2.length)))throw new Error("wrong PNG signature")}function yue(t){if(t.length<_2.length)return!1;for(let e=0;e<_2.length;e++)if(t[e]!==_2[e])return!1;return!0}const wue="tEXt",_ue=0,b9=new TextDecoder("latin1");function bue(t){if(Sue(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const Eue=/^[\u0000-\u00FF]*$/;function Sue(t){if(!Eue.test(t))throw new Error("invalid latin1 text")}function kue(t,e,r){const n=E9(e);t[n]=Tue(e,r-n.length-1)}function E9(t){for(t.mark();t.readByte()!==_ue;);const e=t.offset;t.reset();const r=b9.decode(t.readBytes(e-t.offset-1));return t.skip(1),bue(r),r}function Tue(t,e){return b9.decode(t.readBytes(e))}const el={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},d_={UNKNOWN:-1,DEFLATE:0},SA={UNKNOWN:-1,ADAPTIVE:0},p_={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Zx={NONE:0,BACKGROUND:1,PREVIOUS:2},m_={SOURCE:0,OVER:1};class Aue extends k3{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,r={}){super(e);const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new yA,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=d_.UNKNOWN,this._filterMethod=SA.UNKNOWN,this._interlaceMethod=p_.UNKNOWN,this._colorType=el.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(EA(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeChunk(e,r)}return this.decodeImage(),this._png}decodeApng(){for(EA(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(e,r)}return this.decodeApngImage(),this._apng}decodeChunk(e,r){const n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case wue:kue(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?_A(this,e+4,r):this.skip(4)}decodeApngChunk(e,r){const n=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,r),this.offset=n+e;break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?_A(this,e+4,r):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Cue(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case el.GREYSCALE:n=1;break;case el.TRUECOLOUR:n=3;break;case el.INDEXED_COLOUR:n=1;break;case el.GREYSCALE_ALPHA:n=2;break;case el.TRUECOLOUR_ALPHA:n=4;break;case el.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==d_.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const r=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let i=0;i<r;i++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const r=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let r=e,n=this.offset+this.byteOffset;if(n+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case el.GREYSCALE:case el.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let r=0;r<e/2;r++)this._transparency[r]=this.readUint16();break}case el.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let r=0;for(;r<e;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case el.UNKNOWN:case el.GREYSCALE_ALPHA:case el.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const r=E9(this),n=this.readUint8();if(n!==d_.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const i=this.readBytes(e-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:iue(i)}}decodepHYs(){const e=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:r,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const r={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=bA({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)r.data=n.data;else{const i=this._apng.frames.at(e-1);this.disposeFrame(n,i,r),this.addFrameDataToCanvas(r,n)}this._apng.frames.push(r)}}return this._apng}disposeFrame(e,r,n){switch(e.disposeOp){case Zx.NONE:break;case Zx.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let s=0;s<this._png.width;s++){const a=(i*e.width+s)*this._png.channels;for(let o=0;o<this._png.channels;o++)n.data[a+o]=0}break;case Zx.PREVIOUS:n.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,r){const n=1<<this._png.depth,i=(s,a)=>{const o=((s+r.yOffset)*this._png.width+r.xOffset+a)*this._png.channels,l=(s*r.width+a)*this._png.channels;return{index:o,frameIndex:l}};switch(r.blendOp){case m_.SOURCE:for(let s=0;s<r.height;s++)for(let a=0;a<r.width;a++){const{index:o,frameIndex:l}=i(s,a);for(let c=0;c<this._png.channels;c++)e.data[o+c]=r.data[l+c]}break;case m_.OVER:for(let s=0;s<r.height;s++)for(let a=0;a<r.width;a++){const{index:o,frameIndex:l}=i(s,a);for(let c=0;c<this._png.channels;c++){const f=r.data[l+this._png.channels-1]/n,d=c%(this._png.channels-1)===0?1:r.data[l+c],m=Math.floor(f*d+(1-f)*e.data[o+c]);e.data[o+c]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==SA.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===p_.NO_INTERLACE)this._png.data=bA({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===p_.ADAM7)this._png.data=hue({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,r=this._frames.at(-1);r?r.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Zx.NONE,blendOp:m_.SOURCE,data:e}),this._inflator=new yA,this._writingDataChunks=!1}}function Cue(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var kA;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(kA||(kA={}));function Iue(t,e){return new Aue(t,e).decode()}var Fr=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function g_(){Fr.console&&typeof Fr.console.log=="function"&&Fr.console.log.apply(Fr.console,arguments)}var ti={log:g_,warn:function(t){Fr.console&&(typeof Fr.console.warn=="function"?Fr.console.warn.apply(Fr.console,arguments):g_.call(null,arguments))},error:function(t){Fr.console&&(typeof Fr.console.error=="function"?Fr.console.error.apply(Fr.console,arguments):g_(t))}};function x_(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){ed(n.response,e,r)},n.onerror=function(){ti.error("could not download file")},n.send()}function TA(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function e2(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var ed=Fr.saveAs||((typeof window>"u"?"undefined":zn(window))!=="object"||window!==Fr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Fr.URL||Fr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?TA(i.href)?x_(t,e,r):e2(i,i.target="_blank"):e2(i)):(i.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){e2(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(TA(t))x_(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){e2(n)})}else navigator.msSaveOrOpenBlob((function(i,s){return s===void 0?s={autoBom:!1}:zn(s)!=="object"&&(ti.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return x_(t,e,r);var i=t.type==="application/octet-stream",s=/constructor/i.test(Fr.HTMLElement)||Fr.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":zn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var f=o.result;f=a?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},o.readAsDataURL(t)}else{var l=Fr.URL||Fr.webkitURL,c=l.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function S9(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,s=r[n].process,a=i.exec(t);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}var b2=Fr.atob.bind(Fr),AA=Fr.btoa.bind(Fr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function v_(t,e){var r=t[0],n=t[1],i=t[2],s=t[3];r=Ga(r,n,i,s,e[0],7,-680876936),s=Ga(s,r,n,i,e[1],12,-389564586),i=Ga(i,s,r,n,e[2],17,606105819),n=Ga(n,i,s,r,e[3],22,-1044525330),r=Ga(r,n,i,s,e[4],7,-176418897),s=Ga(s,r,n,i,e[5],12,1200080426),i=Ga(i,s,r,n,e[6],17,-1473231341),n=Ga(n,i,s,r,e[7],22,-45705983),r=Ga(r,n,i,s,e[8],7,1770035416),s=Ga(s,r,n,i,e[9],12,-1958414417),i=Ga(i,s,r,n,e[10],17,-42063),n=Ga(n,i,s,r,e[11],22,-1990404162),r=Ga(r,n,i,s,e[12],7,1804603682),s=Ga(s,r,n,i,e[13],12,-40341101),i=Ga(i,s,r,n,e[14],17,-1502002290),r=Ka(r,n=Ga(n,i,s,r,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Ka(s,r,n,i,e[6],9,-1069501632),i=Ka(i,s,r,n,e[11],14,643717713),n=Ka(n,i,s,r,e[0],20,-373897302),r=Ka(r,n,i,s,e[5],5,-701558691),s=Ka(s,r,n,i,e[10],9,38016083),i=Ka(i,s,r,n,e[15],14,-660478335),n=Ka(n,i,s,r,e[4],20,-405537848),r=Ka(r,n,i,s,e[9],5,568446438),s=Ka(s,r,n,i,e[14],9,-1019803690),i=Ka(i,s,r,n,e[3],14,-187363961),n=Ka(n,i,s,r,e[8],20,1163531501),r=Ka(r,n,i,s,e[13],5,-1444681467),s=Ka(s,r,n,i,e[2],9,-51403784),i=Ka(i,s,r,n,e[7],14,1735328473),r=Xa(r,n=Ka(n,i,s,r,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Xa(s,r,n,i,e[8],11,-2022574463),i=Xa(i,s,r,n,e[11],16,1839030562),n=Xa(n,i,s,r,e[14],23,-35309556),r=Xa(r,n,i,s,e[1],4,-1530992060),s=Xa(s,r,n,i,e[4],11,1272893353),i=Xa(i,s,r,n,e[7],16,-155497632),n=Xa(n,i,s,r,e[10],23,-1094730640),r=Xa(r,n,i,s,e[13],4,681279174),s=Xa(s,r,n,i,e[0],11,-358537222),i=Xa(i,s,r,n,e[3],16,-722521979),n=Xa(n,i,s,r,e[6],23,76029189),r=Xa(r,n,i,s,e[9],4,-640364487),s=Xa(s,r,n,i,e[12],11,-421815835),i=Xa(i,s,r,n,e[15],16,530742520),r=Ya(r,n=Xa(n,i,s,r,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Ya(s,r,n,i,e[7],10,1126891415),i=Ya(i,s,r,n,e[14],15,-1416354905),n=Ya(n,i,s,r,e[5],21,-57434055),r=Ya(r,n,i,s,e[12],6,1700485571),s=Ya(s,r,n,i,e[3],10,-1894986606),i=Ya(i,s,r,n,e[10],15,-1051523),n=Ya(n,i,s,r,e[1],21,-2054922799),r=Ya(r,n,i,s,e[8],6,1873313359),s=Ya(s,r,n,i,e[15],10,-30611744),i=Ya(i,s,r,n,e[6],15,-1560198380),n=Ya(n,i,s,r,e[13],21,1309151649),r=Ya(r,n,i,s,e[4],6,-145523070),s=Ya(s,r,n,i,e[11],10,-1120210379),i=Ya(i,s,r,n,e[2],15,718787259),n=Ya(n,i,s,r,e[9],21,-343485551),t[0]=Gf(r,t[0]),t[1]=Gf(n,t[1]),t[2]=Gf(i,t[2]),t[3]=Gf(s,t[3])}function _y(t,e,r,n,i,s){return e=Gf(Gf(e,t),Gf(n,s)),Gf(e<<i|e>>>32-i,r)}function Ga(t,e,r,n,i,s,a){return _y(e&r|~e&n,t,e,i,s,a)}function Ka(t,e,r,n,i,s,a){return _y(e&n|r&~n,t,e,i,s,a)}function Xa(t,e,r,n,i,s,a){return _y(e^r^n,t,e,i,s,a)}function Ya(t,e,r,n,i,s,a){return _y(r^(e|~n),t,e,i,s,a)}function k9(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)v_(n,Nue(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(v_(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*r,v_(n,i),n}function Nue(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var CA="0123456789abcdef".split("");function Pue(t){for(var e="",r=0;r<4;r++)e+=CA[t>>8*r+4&15]+CA[t>>8*r&15];return e}function Rue(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function U5(t){return k9(t).map(Rue).join("")}var Fue=(function(t){for(var e=0;e<t.length;e++)t[e]=Pue(t[e]);return t.join("")})(k9("hello"))!="5d41402abc4b2a76b9719d911017c592";function Gf(t,e){if(Fue){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function z5(t,e){var r,n,i,s;if(t!==r){for(var a=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var f=o[l];c=(c+f+a.charCodeAt(l))%256,o[l]=o[c],o[c]=f}r=t,n=o}else o=n;var d=e.length,m=0,p=0,_="";for(l=0;l<d;l++)p=(p+(f=o[m=(m+1)%256]))%256,o[m]=o[p],o[p]=f,a=o[(o[m]+o[p])%256],_+=String.fromCharCode(e.charCodeAt(l)^a);return _}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var IA={print:4,modify:8,copy:16,"annot-forms":32};function $0(t,e,r,n){this.v=1,this.r=2;var i=192;t.forEach(function(o){if(IA.perm!==void 0)throw new Error("Invalid permission: "+o);i+=IA[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=U5(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=z5(this.encryptionKey,this.padding)}function H0(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var i=t.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[n]}return e}function NA(t){if(zn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!i],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[r]){var a=e[r][s];try{a[0].apply(t,n)}catch(o){Fr.console&&ti.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function wv(t){if(!(this instanceof wv))return new wv(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function T9(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function ad(t,e,r,n,i){if(!(this instanceof ad))return new ad(t,e,r,n,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,T9.call(this,n,i)}function X0(t,e,r,n,i){if(!(this instanceof X0))return new X0(t,e,r,n,i);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,T9.call(this,n,i)}function gr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,l=16,c="S",f=null;zn(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,i=t.format||i,s=t.compress||t.compressPdf||s,(f=t.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(s===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=NA;var _="1.3",w=p.__private__.getPdfVersion=function(){return _};p.__private__.setPdfVersion=function(L){_=L};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var k=p.__private__.getPageFormat=function(L){return b[L]};i=i||"a4";var F="compat",N="advanced",B=F;function X(){this.saveGraphicsState(),fe(new nr(wt,0,0,-wt,0,ws()*wt).toString()+" cm"),this.setFontSize(this.getFontSize()/wt),c="n",B=N}function G(){this.restoreGraphicsState(),c="S",B=F}var P=p.__private__.combineFontStyleAndFontWeight=function(L,Z){if(L=="bold"&&Z=="normal"||L=="bold"&&Z==400||L=="normal"&&Z=="italic"||L=="bold"&&Z=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Z&&(L=Z==400||Z==="normal"?L==="italic"?"italic":"normal":Z!=700&&Z!=="bold"||L!=="normal"?(Z==700?"bold":Z)+""+L:"bold"),L};p.advancedAPI=function(L){var Z=B===F;return Z&&X.call(this),typeof L!="function"||(L(this),Z&&G.call(this)),this},p.compatAPI=function(L){var Z=B===N;return Z&&G.call(this),typeof L!="function"||(L(this),Z&&X.call(this)),this},p.isAdvancedAPI=function(){return B===N};var A,T=function(L){if(B!==N)throw new Error(L+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=p.roundToPrecision=p.__private__.roundToPrecision=function(L,Z){var Se=e||Z;if(isNaN(L)||isNaN(Se))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return L.toFixed(Se).replace(/0+$/,"")};A=p.hpf=p.__private__.hpf=typeof l=="number"?function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.hpf");return O(L,l)}:l==="smart"?function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.hpf");return O(L,L>-1&&L<1?16:5)}:function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.hpf");return O(L,16)};var I=p.f2=p.__private__.f2=function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.f2");return O(L,2)},D=p.__private__.f3=function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.f3");return O(L,3)},M=p.scale=p.__private__.scale=function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.scale");return B===F?L*wt:B===N?L:void 0},ie=function(L){return M((function(Z){return B===F?ws()-Z:B===N?Z:void 0})(L))};p.__private__.setPrecision=p.setPrecision=function(L){typeof parseInt(L,10)=="number"&&(e=parseInt(L,10))};var be,Ne="00000000000000000000000000000000",we=p.__private__.getFileId=function(){return Ne},le=p.__private__.setFileId=function(L){return Ne=L!==void 0&&/^[a-fA-F0-9]{32}$/.test(L)?L.toUpperCase():Ne.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Tn=new $0(f.userPermissions,f.userPassword,f.ownerPassword,Ne)),Ne};p.setFileId=function(L){return le(L),this},p.getFileId=function(){return we()};var J=p.__private__.convertDateToPDFDate=function(L){var Z=L.getTimezoneOffset(),Se=Z<0?"+":"-",Le=Math.floor(Math.abs(Z/60)),Ve=Math.abs(Z%60),dt=[Se,W(Le),"'",W(Ve),"'"].join("");return["D:",L.getFullYear(),W(L.getMonth()+1),W(L.getDate()),W(L.getHours()),W(L.getMinutes()),W(L.getSeconds()),dt].join("")},ue=p.__private__.convertPDFDateToDate=function(L){var Z=parseInt(L.substr(2,4),10),Se=parseInt(L.substr(6,2),10)-1,Le=parseInt(L.substr(8,2),10),Ve=parseInt(L.substr(10,2),10),dt=parseInt(L.substr(12,2),10),vt=parseInt(L.substr(14,2),10);return new Date(Z,Se,Le,Ve,dt,vt,0)},ee=p.__private__.setCreationDate=function(L){var Z;if(L===void 0&&(L=new Date),L instanceof Date)Z=J(L);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(L))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Z=L}return be=Z},C=p.__private__.getCreationDate=function(L){var Z=be;return L==="jsDate"&&(Z=ue(be)),Z};p.setCreationDate=function(L){return ee(L),this},p.getCreationDate=function(L){return C(L)};var U,W=p.__private__.padd2=function(L){return("0"+parseInt(L)).slice(-2)},Y=p.__private__.padd2Hex=function(L){return("00"+(L=L.toString())).substr(L.length)},ae=0,pe=[],he=[],xe=0,Ee=[],Fe=[],oe=!1,Je=he;p.__private__.setCustomOutputDestination=function(L){oe=!0,Je=L};var Re=function(L){oe||(Je=L)};p.__private__.resetCustomOutputDestination=function(){oe=!1,Je=he};var fe=p.__private__.out=function(L){return L=L.toString(),xe+=L.length+1,Je.push(L),Je},ot=p.__private__.write=function(L){return fe(arguments.length===1?L.toString():Array.prototype.join.call(arguments," "))},et=p.__private__.getArrayBuffer=function(L){for(var Z=L.length,Se=new ArrayBuffer(Z),Le=new Uint8Array(Se);Z--;)Le[Z]=L.charCodeAt(Z);return Se},st=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return st};var K=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(L){return K=B===N?L/wt:L,this};var Te,Ue=p.__private__.getFontSize=p.getFontSize=function(){return B===F?K:K*wt},ut=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(L){return ut=L,this},p.__private__.getR2L=p.getR2L=function(){return ut};var pt,xt=p.__private__.setZoomMode=function(L){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(L))Te=L;else if(isNaN(L)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(L)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+L+'" is not recognized.');Te=L}else Te=parseInt(L,10)};p.__private__.getZoomMode=function(){return Te};var yt,ht=p.__private__.setPageMode=function(L){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(L)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+L+'" is not recognized.');pt=L};p.__private__.getPageMode=function(){return pt};var Mt=p.__private__.setLayoutMode=function(L){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(L)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+L+'" is not recognized.');yt=L};p.__private__.getLayoutMode=function(){return yt},p.__private__.setDisplayMode=p.setDisplayMode=function(L,Z,Se){return xt(L),Mt(Z),ht(Se),this};var Lt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(L){if(Object.keys(Lt).indexOf(L)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Lt[L]},p.__private__.getDocumentProperties=function(){return Lt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(L){for(var Z in Lt)Lt.hasOwnProperty(Z)&&L[Z]&&(Lt[Z]=L[Z]);return this},p.__private__.setDocumentProperty=function(L,Z){if(Object.keys(Lt).indexOf(L)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Lt[L]=Z};var Ot,wt,Nt,cr,er,qt={},wr={},rn=[],Me={},jt={},Vt={},tr={},sr=null,ur=0,Yt=[],mr=new NA(p),an=t.hotfixes||[],Ur={},Cn={},In=[],nr=function L(Z,Se,Le,Ve,dt,vt){if(!(this instanceof L))return new L(Z,Se,Le,Ve,dt,vt);isNaN(Z)&&(Z=1),isNaN(Se)&&(Se=0),isNaN(Le)&&(Le=0),isNaN(Ve)&&(Ve=1),isNaN(dt)&&(dt=0),isNaN(vt)&&(vt=0),this._matrix=[Z,Se,Le,Ve,dt,vt]};Object.defineProperty(nr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(L){this._matrix[0]=L}}),Object.defineProperty(nr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(L){this._matrix[1]=L}}),Object.defineProperty(nr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(L){this._matrix[2]=L}}),Object.defineProperty(nr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(L){this._matrix[3]=L}}),Object.defineProperty(nr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(L){this._matrix[4]=L}}),Object.defineProperty(nr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(L){this._matrix[5]=L}}),Object.defineProperty(nr.prototype,"a",{get:function(){return this._matrix[0]},set:function(L){this._matrix[0]=L}}),Object.defineProperty(nr.prototype,"b",{get:function(){return this._matrix[1]},set:function(L){this._matrix[1]=L}}),Object.defineProperty(nr.prototype,"c",{get:function(){return this._matrix[2]},set:function(L){this._matrix[2]=L}}),Object.defineProperty(nr.prototype,"d",{get:function(){return this._matrix[3]},set:function(L){this._matrix[3]=L}}),Object.defineProperty(nr.prototype,"e",{get:function(){return this._matrix[4]},set:function(L){this._matrix[4]=L}}),Object.defineProperty(nr.prototype,"f",{get:function(){return this._matrix[5]},set:function(L){this._matrix[5]=L}}),Object.defineProperty(nr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nr.prototype.join=function(L){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(L)},nr.prototype.multiply=function(L){var Z=L.sx*this.sx+L.shy*this.shx,Se=L.sx*this.shy+L.shy*this.sy,Le=L.shx*this.sx+L.sy*this.shx,Ve=L.shx*this.shy+L.sy*this.sy,dt=L.tx*this.sx+L.ty*this.shx+this.tx,vt=L.tx*this.shy+L.ty*this.sy+this.ty;return new nr(Z,Se,Le,Ve,dt,vt)},nr.prototype.decompose=function(){var L=this.sx,Z=this.shy,Se=this.shx,Le=this.sy,Ve=this.tx,dt=this.ty,vt=Math.sqrt(L*L+Z*Z),Gt=(L/=vt)*Se+(Z/=vt)*Le;Se-=L*Gt,Le-=Z*Gt;var Qt=Math.sqrt(Se*Se+Le*Le);return Gt/=Qt,L*(Le/=Qt)<Z*(Se/=Qt)&&(L=-L,Z=-Z,Gt=-Gt,vt=-vt),{scale:new nr(vt,0,0,Qt,0,0),translate:new nr(1,0,0,1,Ve,dt),rotate:new nr(L,Z,-Z,L,0,0),skew:new nr(1,0,Gt,1,0,0)}},nr.prototype.toString=function(L){return this.join(" ")},nr.prototype.inversed=function(){var L=this.sx,Z=this.shy,Se=this.shx,Le=this.sy,Ve=this.tx,dt=this.ty,vt=1/(L*Le-Z*Se),Gt=Le*vt,Qt=-Z*vt,xr=-Se*vt,Ar=L*vt;return new nr(Gt,Qt,xr,Ar,-Gt*Ve-xr*dt,-Qt*Ve-Ar*dt)},nr.prototype.applyToPoint=function(L){var Z=L.x*this.sx+L.y*this.shx+this.tx,Se=L.x*this.shy+L.y*this.sy+this.ty;return new co(Z,Se)},nr.prototype.applyToRectangle=function(L){var Z=this.applyToPoint(L),Se=this.applyToPoint(new co(L.x+L.w,L.y+L.h));return new pl(Z.x,Z.y,Se.x-Z.x,Se.y-Z.y)},nr.prototype.clone=function(){var L=this.sx,Z=this.shy,Se=this.shx,Le=this.sy,Ve=this.tx,dt=this.ty;return new nr(L,Z,Se,Le,Ve,dt)},p.Matrix=nr;var Hr=p.matrixMult=function(L,Z){return Z.multiply(L)},ns=new nr(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=ns;var Dn=function(L,Z){if(!jt[L]){var Se=(Z instanceof ad?"Sh":"P")+(Object.keys(Me).length+1).toString(10);Z.id=Se,jt[L]=Se,Me[Se]=Z,mr.publish("addPattern",Z)}};p.ShadingPattern=ad,p.TilingPattern=X0,p.addShadingPattern=function(L,Z){return T("addShadingPattern()"),Dn(L,Z),this},p.beginTilingPattern=function(L){T("beginTilingPattern()"),Os(L.boundingBox[0],L.boundingBox[1],L.boundingBox[2]-L.boundingBox[0],L.boundingBox[3]-L.boundingBox[1],L.matrix)},p.endTilingPattern=function(L,Z){T("endTilingPattern()"),Z.stream=Fe[U].join(`
`),Dn(L,Z),mr.publish("endTilingPattern",Z),In.pop().restore()};var $i,bn=p.__private__.newObject=function(){var L=Jn();return re(L,!0),L},Jn=p.__private__.newObjectDeferred=function(){return ae++,pe[ae]=function(){return xe},ae},re=function(L,Z){return Z=typeof Z=="boolean"&&Z,pe[L]=xe,Z&&fe(L+" 0 obj"),L},Ae=p.__private__.newAdditionalObject=function(){var L={objId:Jn(),content:""};return Ee.push(L),L},ve=Jn(),ye=Jn(),Ce=p.__private__.decodeColorString=function(L){var Z=L.split(" ");if(Z.length!==2||Z[1]!=="g"&&Z[1]!=="G")Z.length!==5||Z[4]!=="k"&&Z[4]!=="K"||(Z=[(1-Z[0])*(1-Z[3]),(1-Z[1])*(1-Z[3]),(1-Z[2])*(1-Z[3]),"r"]);else{var Se=parseFloat(Z[0]);Z=[Se,Se,Se,"r"]}for(var Le="#",Ve=0;Ve<3;Ve++)Le+=("0"+Math.floor(255*parseFloat(Z[Ve])).toString(16)).slice(-2);return Le},Ie=p.__private__.encodeColorString=function(L){var Z;typeof L=="string"&&(L={ch1:L});var Se=L.ch1,Le=L.ch2,Ve=L.ch3,dt=L.ch4,vt=L.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Se=="string"&&Se.charAt(0)!=="#"){var Gt=new S9(Se);if(Gt.ok)Se=Gt.toHex();else if(!/^\d*\.?\d*$/.test(Se))throw new Error('Invalid color "'+Se+'" passed to jsPDF.encodeColorString.')}if(typeof Se=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Se)&&(Se="#"+Se[1]+Se[1]+Se[2]+Se[2]+Se[3]+Se[3]),typeof Se=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Se)){var Qt=parseInt(Se.substr(1),16);Se=Qt>>16&255,Le=Qt>>8&255,Ve=255&Qt}if(Le===void 0||dt===void 0&&Se===Le&&Le===Ve)Z=typeof Se=="string"?Se+" "+vt[0]:L.precision===2?I(Se/255)+" "+vt[0]:D(Se/255)+" "+vt[0];else if(dt===void 0||zn(dt)==="object"){if(dt&&!isNaN(dt.a)&&dt.a===0)return["1.","1.","1.",vt[1]].join(" ");Z=typeof Se=="string"?[Se,Le,Ve,vt[1]].join(" "):L.precision===2?[I(Se/255),I(Le/255),I(Ve/255),vt[1]].join(" "):[D(Se/255),D(Le/255),D(Ve/255),vt[1]].join(" ")}else Z=typeof Se=="string"?[Se,Le,Ve,dt,vt[2]].join(" "):L.precision===2?[I(Se),I(Le),I(Ve),I(dt),vt[2]].join(" "):[D(Se),D(Le),D(Ve),D(dt),vt[2]].join(" ");return Z},He=p.__private__.getFilters=function(){return a},tt=p.__private__.putStream=function(L){var Z=(L=L||{}).data||"",Se=L.filters||He(),Le=L.alreadyAppliedFilters||[],Ve=L.addLength1||!1,dt=Z.length,vt=L.objectId,Gt=function(wi){return wi};if(f!==null&&vt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(Gt=Tn.encryptor(vt,0));var Qt={};Se===!0&&(Se=["FlateEncode"]);var xr=L.additionalKeyValues||[],Ar=(Qt=gr.API.processDataByFilters!==void 0?gr.API.processDataByFilters(Z,Se):{data:Z,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(Qt.data.length!==0&&(xr.push({key:"Length",value:Qt.data.length}),Ve===!0&&xr.push({key:"Length1",value:dt})),Ar.length!=0)if(Ar.split("/").length-1==1)xr.push({key:"Filter",value:Ar});else{xr.push({key:"Filter",value:"["+Ar+"]"});for(var nn=0;nn<xr.length;nn+=1)if(xr[nn].key==="DecodeParms"){for(var Wn=[],Zn=0;Zn<Qt.reverseChain.split("/").length-1;Zn+=1)Wn.push("null");Wn.push(xr[nn].value),xr[nn].value="["+Wn.join(" ")+"]"}}fe("<<");for(var hn=0;hn<xr.length;hn++)fe("/"+xr[hn].key+" "+xr[hn].value);fe(">>"),Qt.data.length!==0&&(fe("stream"),fe(Gt(Qt.data)),fe("endstream"))},Ge=p.__private__.putPage=function(L){var Z=L.number,Se=L.data,Le=L.objId,Ve=L.contentsObjId;re(Le,!0),fe("<</Type /Page"),fe("/Parent "+L.rootDictionaryObjId+" 0 R"),fe("/Resources "+L.resourceDictionaryObjId+" 0 R"),fe("/MediaBox ["+parseFloat(A(L.mediaBox.bottomLeftX))+" "+parseFloat(A(L.mediaBox.bottomLeftY))+" "+A(L.mediaBox.topRightX)+" "+A(L.mediaBox.topRightY)+"]"),L.cropBox!==null&&fe("/CropBox ["+A(L.cropBox.bottomLeftX)+" "+A(L.cropBox.bottomLeftY)+" "+A(L.cropBox.topRightX)+" "+A(L.cropBox.topRightY)+"]"),L.bleedBox!==null&&fe("/BleedBox ["+A(L.bleedBox.bottomLeftX)+" "+A(L.bleedBox.bottomLeftY)+" "+A(L.bleedBox.topRightX)+" "+A(L.bleedBox.topRightY)+"]"),L.trimBox!==null&&fe("/TrimBox ["+A(L.trimBox.bottomLeftX)+" "+A(L.trimBox.bottomLeftY)+" "+A(L.trimBox.topRightX)+" "+A(L.trimBox.topRightY)+"]"),L.artBox!==null&&fe("/ArtBox ["+A(L.artBox.bottomLeftX)+" "+A(L.artBox.bottomLeftY)+" "+A(L.artBox.topRightX)+" "+A(L.artBox.topRightY)+"]"),typeof L.userUnit=="number"&&L.userUnit!==1&&fe("/UserUnit "+L.userUnit),mr.publish("putPage",{objId:Le,pageContext:Yt[Z],pageNumber:Z,page:Se}),fe("/Contents "+Ve+" 0 R"),fe(">>"),fe("endobj");var dt=Se.join(`
`);return B===N&&(dt+=`
Q`),re(Ve,!0),tt({data:dt,filters:He(),objectId:Ve}),fe("endobj"),Le},Ke=p.__private__.putPages=function(){var L,Z,Se=[];for(L=1;L<=ur;L++)Yt[L].objId=Jn(),Yt[L].contentsObjId=Jn();for(L=1;L<=ur;L++)Se.push(Ge({number:L,data:Fe[L],objId:Yt[L].objId,contentsObjId:Yt[L].contentsObjId,mediaBox:Yt[L].mediaBox,cropBox:Yt[L].cropBox,bleedBox:Yt[L].bleedBox,trimBox:Yt[L].trimBox,artBox:Yt[L].artBox,userUnit:Yt[L].userUnit,rootDictionaryObjId:ve,resourceDictionaryObjId:ye}));re(ve,!0),fe("<</Type /Pages");var Le="/Kids [";for(Z=0;Z<ur;Z++)Le+=Se[Z]+" 0 R ";fe(Le+"]"),fe("/Count "+ur),fe(">>"),fe("endobj"),mr.publish("postPutPages")},Qe=function(L){mr.publish("putFont",{font:L,out:fe,newObject:bn,putStream:tt}),L.isAlreadyPutted!==!0&&(L.objectNumber=bn(),fe("<<"),fe("/Type /Font"),fe("/BaseFont /"+H0(L.postScriptName)),fe("/Subtype /Type1"),typeof L.encoding=="string"&&fe("/Encoding /"+L.encoding),fe("/FirstChar 32"),fe("/LastChar 255"),fe(">>"),fe("endobj"))},_t=function(L){L.objectNumber=bn();var Z=[];Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Form"}),Z.push({key:"BBox",value:"["+[A(L.x),A(L.y),A(L.x+L.width),A(L.y+L.height)].join(" ")+"]"}),Z.push({key:"Matrix",value:"["+L.matrix.toString()+"]"});var Se=L.pages[1].join(`
`);tt({data:Se,additionalKeyValues:Z,objectId:L.objectNumber}),fe("endobj")},Ft=function(L,Z){Z||(Z=21);var Se=bn(),Le=(function(vt,Gt){var Qt,xr=[],Ar=1/(Gt-1);for(Qt=0;Qt<1;Qt+=Ar)xr.push(Qt);if(xr.push(1),vt[0].offset!=0){var nn={offset:0,color:vt[0].color};vt.unshift(nn)}if(vt[vt.length-1].offset!=1){var Wn={offset:1,color:vt[vt.length-1].color};vt.push(Wn)}for(var Zn="",hn=0,wi=0;wi<xr.length;wi++){for(Qt=xr[wi];Qt>vt[hn+1].offset;)hn++;var Pn=vt[hn].offset,Hi=(Qt-Pn)/(vt[hn+1].offset-Pn),So=vt[hn].color,Wo=vt[hn+1].color;Zn+=Y(Math.round((1-Hi)*So[0]+Hi*Wo[0]).toString(16))+Y(Math.round((1-Hi)*So[1]+Hi*Wo[1]).toString(16))+Y(Math.round((1-Hi)*So[2]+Hi*Wo[2]).toString(16))}return Zn.trim()})(L.colors,Z),Ve=[];Ve.push({key:"FunctionType",value:"0"}),Ve.push({key:"Domain",value:"[0.0 1.0]"}),Ve.push({key:"Size",value:"["+Z+"]"}),Ve.push({key:"BitsPerSample",value:"8"}),Ve.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ve.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),tt({data:Le,additionalKeyValues:Ve,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Se}),fe("endobj"),L.objectNumber=bn(),fe("<< /ShadingType "+L.type),fe("/ColorSpace /DeviceRGB");var dt="/Coords ["+A(parseFloat(L.coords[0]))+" "+A(parseFloat(L.coords[1]))+" ";L.type===2?dt+=A(parseFloat(L.coords[2]))+" "+A(parseFloat(L.coords[3])):dt+=A(parseFloat(L.coords[2]))+" "+A(parseFloat(L.coords[3]))+" "+A(parseFloat(L.coords[4]))+" "+A(parseFloat(L.coords[5])),fe(dt+="]"),L.matrix&&fe("/Matrix ["+L.matrix.toString()+"]"),fe("/Function "+Se+" 0 R"),fe("/Extend [true true]"),fe(">>"),fe("endobj")},Ht=function(L,Z){var Se=Jn(),Le=bn();Z.push({resourcesOid:Se,objectOid:Le}),L.objectNumber=Le;var Ve=[];Ve.push({key:"Type",value:"/Pattern"}),Ve.push({key:"PatternType",value:"1"}),Ve.push({key:"PaintType",value:"1"}),Ve.push({key:"TilingType",value:"1"}),Ve.push({key:"BBox",value:"["+L.boundingBox.map(A).join(" ")+"]"}),Ve.push({key:"XStep",value:A(L.xStep)}),Ve.push({key:"YStep",value:A(L.yStep)}),Ve.push({key:"Resources",value:Se+" 0 R"}),L.matrix&&Ve.push({key:"Matrix",value:"["+L.matrix.toString()+"]"}),tt({data:L.stream,additionalKeyValues:Ve,objectId:L.objectNumber}),fe("endobj")},Rt=function(L){for(var Z in L.objectNumber=bn(),fe("<<"),L)switch(Z){case"opacity":fe("/ca "+I(L[Z]));break;case"stroke-opacity":fe("/CA "+I(L[Z]))}fe(">>"),fe("endobj")},Tt=function(L){re(L.resourcesOid,!0),fe("<<"),fe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var Z in fe("/Font <<"),qt)qt.hasOwnProperty(Z)&&(d===!1||d===!0&&m.hasOwnProperty(Z))&&fe("/"+Z+" "+qt[Z].objectNumber+" 0 R");fe(">>")})(),(function(){if(Object.keys(Me).length>0){for(var Z in fe("/Shading <<"),Me)Me.hasOwnProperty(Z)&&Me[Z]instanceof ad&&Me[Z].objectNumber>=0&&fe("/"+Z+" "+Me[Z].objectNumber+" 0 R");mr.publish("putShadingPatternDict"),fe(">>")}})(),(function(Z){if(Object.keys(Me).length>0){for(var Se in fe("/Pattern <<"),Me)Me.hasOwnProperty(Se)&&Me[Se]instanceof p.TilingPattern&&Me[Se].objectNumber>=0&&Me[Se].objectNumber<Z&&fe("/"+Se+" "+Me[Se].objectNumber+" 0 R");mr.publish("putTilingPatternDict"),fe(">>")}})(L.objectOid),(function(){if(Object.keys(Vt).length>0){var Z;for(Z in fe("/ExtGState <<"),Vt)Vt.hasOwnProperty(Z)&&Vt[Z].objectNumber>=0&&fe("/"+Z+" "+Vt[Z].objectNumber+" 0 R");mr.publish("putGStateDict"),fe(">>")}})(),(function(){for(var Z in fe("/XObject <<"),Ur)Ur.hasOwnProperty(Z)&&Ur[Z].objectNumber>=0&&fe("/"+Z+" "+Ur[Z].objectNumber+" 0 R");mr.publish("putXobjectDict"),fe(">>")})(),fe(">>"),fe("endobj")},br=function(L){wr[L.fontName]=wr[L.fontName]||{},wr[L.fontName][L.fontStyle]=L.id},on=function(L,Z,Se,Le,Ve){var dt={id:"F"+(Object.keys(qt).length+1).toString(10),postScriptName:L,fontName:Z,fontStyle:Se,encoding:Le,isStandardFont:Ve||!1,metadata:{}};return mr.publish("addFont",{font:dt,instance:this}),qt[dt.id]=dt,br(dt),dt.id},Dr=p.__private__.pdfEscape=p.pdfEscape=function(L,Z){return(function(Se,Le){var Ve,dt,vt,Gt,Qt,xr,Ar,nn,Wn;if(vt=(Le=Le||{}).sourceEncoding||"Unicode",Qt=Le.outputEncoding,(Le.autoencode||Qt)&&qt[Ot].metadata&&qt[Ot].metadata[vt]&&qt[Ot].metadata[vt].encoding&&(Gt=qt[Ot].metadata[vt].encoding,!Qt&&qt[Ot].encoding&&(Qt=qt[Ot].encoding),!Qt&&Gt.codePages&&(Qt=Gt.codePages[0]),typeof Qt=="string"&&(Qt=Gt[Qt]),Qt)){for(Ar=!1,xr=[],Ve=0,dt=Se.length;Ve<dt;Ve++)(nn=Qt[Se.charCodeAt(Ve)])?xr.push(String.fromCharCode(nn)):xr.push(Se[Ve]),xr[Ve].charCodeAt(0)>>8&&(Ar=!0);Se=xr.join("")}for(Ve=Se.length;Ar===void 0&&Ve!==0;)Se.charCodeAt(Ve-1)>>8&&(Ar=!0),Ve--;if(!Ar)return Se;for(xr=Le.noBOM?[]:[254,255],Ve=0,dt=Se.length;Ve<dt;Ve++){if((Wn=(nn=Se.charCodeAt(Ve))>>8)>>8)throw new Error("Character at position "+Ve+" of string '"+Se+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");xr.push(Wn),xr.push(nn-(Wn<<8))}return String.fromCharCode.apply(void 0,xr)})(L,Z).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},fn=p.__private__.beginPage=function(L){Fe[++ur]=[],Yt[ur]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(L[0]),topRightY:Number(L[1])}},Ws(ur),Re(Fe[U])},Aa=function(L,Z){var Se,Le,Ve;switch(r=Z||r,typeof L=="string"&&(Se=k(L.toLowerCase()),Array.isArray(Se)&&(Le=Se[0],Ve=Se[1])),Array.isArray(L)&&(Le=L[0]*wt,Ve=L[1]*wt),isNaN(Le)&&(Le=i[0],Ve=i[1]),(Le>14400||Ve>14400)&&(ti.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),Ve=Math.min(14400,Ve)),i=[Le,Ve],r.substr(0,1)){case"l":Ve>Le&&(i=[Ve,Le]);break;case"p":Le>Ve&&(i=[Ve,Le])}fn(i),Pa(ua),fe(bo),Nn!==0&&fe(Nn+" J"),uu!==0&&fe(uu+" j"),mr.publish("addPage",{pageNumber:ur})},Ca=function(L){L>0&&L<=ur&&(Fe.splice(L,1),Yt.splice(L,1),ur--,U>ur&&(U=ur),this.setPage(U))},Ws=function(L){L>0&&L<=ur&&(U=L)},ni=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Fe.length-1},Bo=function(L,Z,Se){var Le,Ve=void 0;return Se=Se||{},L=L!==void 0?L:qt[Ot].fontName,Z=Z!==void 0?Z:qt[Ot].fontStyle,Le=L.toLowerCase(),wr[Le]!==void 0&&wr[Le][Z]!==void 0?Ve=wr[Le][Z]:wr[L]!==void 0&&wr[L][Z]!==void 0?Ve=wr[L][Z]:Se.disableWarning===!1&&ti.warn("Unable to look up font label for font '"+L+"', '"+Z+"'. Refer to getFontList() for available fonts."),Ve||Se.noFallback||(Ve=wr.times[Z])==null&&(Ve=wr.times.normal),Ve},En=p.__private__.putInfo=function(){var L=bn(),Z=function(Le){return Le};for(var Se in f!==null&&(Z=Tn.encryptor(L,0)),fe("<<"),fe("/Producer ("+Dr(Z("jsPDF "+gr.version))+")"),Lt)Lt.hasOwnProperty(Se)&&Lt[Se]&&fe("/"+Se.substr(0,1).toUpperCase()+Se.substr(1)+" ("+Dr(Z(Lt[Se]))+")");fe("/CreationDate ("+Dr(Z(be))+")"),fe(">>"),fe("endobj")},lu=p.__private__.putCatalog=function(L){var Z=(L=L||{}).rootDictionaryObjId||ve;switch(bn(),fe("<<"),fe("/Type /Catalog"),fe("/Pages "+Z+" 0 R"),Te||(Te="fullwidth"),Te){case"fullwidth":fe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":fe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":fe("/OpenAction [3 0 R /Fit]");break;case"original":fe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Se=""+Te;Se.substr(Se.length-1)==="%"&&(Te=parseInt(Te)/100),typeof Te=="number"&&fe("/OpenAction [3 0 R /XYZ null null "+I(Te)+"]")}switch(yt||(yt="continuous"),yt){case"continuous":fe("/PageLayout /OneColumn");break;case"single":fe("/PageLayout /SinglePage");break;case"two":case"twoleft":fe("/PageLayout /TwoColumnLeft");break;case"tworight":fe("/PageLayout /TwoColumnRight")}pt&&fe("/PageMode /"+pt),mr.publish("putCatalog"),fe(">>"),fe("endobj")},ui=p.__private__.putTrailer=function(){fe("trailer"),fe("<<"),fe("/Size "+(ae+1)),fe("/Root "+ae+" 0 R"),fe("/Info "+(ae-1)+" 0 R"),f!==null&&fe("/Encrypt "+Tn.oid+" 0 R"),fe("/ID [ <"+Ne+"> <"+Ne+"> ]"),fe(">>")},cu=p.__private__.putHeader=function(){fe("%PDF-"+_),fe("%")},Ul=p.__private__.putXRef=function(){var L="0000000000";fe("xref"),fe("0 "+(ae+1)),fe("0000000000 65535 f ");for(var Z=1;Z<=ae;Z++)typeof pe[Z]=="function"?fe((L+pe[Z]()).slice(-10)+" 00000 n "):pe[Z]!==void 0?fe((L+pe[Z]).slice(-10)+" 00000 n "):fe("0000000000 00000 n ")},Ia=p.__private__.buildDocument=function(){var L;ae=0,xe=0,he=[],pe=[],Ee=[],ve=Jn(),ye=Jn(),Re(he),mr.publish("buildDocument"),cu(),Ke(),(function(){mr.publish("putAdditionalObjects");for(var Se=0;Se<Ee.length;Se++){var Le=Ee[Se];re(Le.objId,!0),fe(Le.content),fe("endobj")}mr.publish("postPutAdditionalObjects")})(),L=[],(function(){for(var Se in qt)qt.hasOwnProperty(Se)&&(d===!1||d===!0&&m.hasOwnProperty(Se))&&Qe(qt[Se])})(),(function(){var Se;for(Se in Vt)Vt.hasOwnProperty(Se)&&Rt(Vt[Se])})(),(function(){for(var Se in Ur)Ur.hasOwnProperty(Se)&&_t(Ur[Se])})(),(function(Se){var Le;for(Le in Me)Me.hasOwnProperty(Le)&&(Me[Le]instanceof ad?Ft(Me[Le]):Me[Le]instanceof X0&&Ht(Me[Le],Se))})(L),mr.publish("putResources"),L.forEach(Tt),Tt({resourcesOid:ye,objectOid:Number.MAX_SAFE_INTEGER}),mr.publish("postPutResources"),f!==null&&(Tn.oid=bn(),fe("<<"),fe("/Filter /Standard"),fe("/V "+Tn.v),fe("/R "+Tn.r),fe("/U <"+Tn.toHexString(Tn.U)+">"),fe("/O <"+Tn.toHexString(Tn.O)+">"),fe("/P "+Tn.P),fe(">>"),fe("endobj")),En(),lu();var Z=xe;return Ul(),ui(),fe("startxref"),fe(""+Z),fe("%%EOF"),Re(Fe[U]),he.join(`
`)},Na=p.__private__.getBlob=function(L){return new Blob([et(L)],{type:"application/pdf"})},Ps=p.output=p.__private__.output=($i=function(L,Z){switch(typeof(Z=Z||{})=="string"?Z={filename:Z}:Z.filename=Z.filename||"generated.pdf",L){case void 0:return Ia();case"save":p.save(Z.filename);break;case"arraybuffer":return et(Ia());case"blob":return Na(Ia());case"bloburi":case"bloburl":if(Fr.URL!==void 0&&typeof Fr.URL.createObjectURL=="function")return Fr.URL&&Fr.URL.createObjectURL(Na(Ia()))||void 0;ti.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Se="",Le=Ia();try{Se=AA(Le)}catch{Se=AA(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+Z.filename+";base64,"+Se;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Fr)==="[object Window]"){var Ve="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",dt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Z.pdfObjectUrl&&(Ve=Z.pdfObjectUrl,dt="");var vt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ve+'"'+dt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Z)+");<\/script></body></html>",Gt=Fr.open();return Gt!==null&&Gt.document.write(vt),Gt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Fr)==="[object Window]"){var Qt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Z.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Z.filename+'" width="500px" height="400px" /></body></html>',xr=Fr.open();if(xr!==null){xr.document.write(Qt);var Ar=this;xr.document.documentElement.querySelector("#pdfViewer").onload=function(){xr.document.title=Z.filename,xr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ar.output("bloburl"))}}return xr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Fr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var nn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Z)+'"></iframe></body></html>',Wn=Fr.open();if(Wn!==null&&(Wn.document.write(nn),Wn.document.title=Z.filename),Wn||typeof safari>"u")return Wn;break;case"datauri":case"dataurl":return Fr.document.location.href=this.output("datauristring",Z);default:return null}},$i.foo=function(){try{return $i.apply(this,arguments)}catch(Se){var L=Se.stack||"";~L.indexOf(" at ")&&(L=L.split(" at ")[1]);var Z="Error in function "+L.split(`
`)[0].split("<")[0]+": "+Se.message;if(!Fr.console)throw new Error(Z);Fr.console.error(Z,Se),Fr.alert&&alert(Z)}},$i.foo.bar=$i,$i.foo),zl=function(L){return Array.isArray(an)===!0&&an.indexOf(L)>-1};switch(n){case"pt":wt=1;break;case"mm":wt=72/25.4;break;case"cm":wt=72/2.54;break;case"in":wt=72;break;case"px":wt=zl("px_scaling")==1?.75:96/72;break;case"pc":case"em":wt=12;break;case"ex":wt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);wt=n}var Tn=null;ee(),le();var Rs=p.__private__.getPageInfo=p.getPageInfo=function(L){if(isNaN(L)||L%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Yt[L].objId,pageNumber:L,pageContext:Yt[L]}},$l=p.__private__.getPageInfoByObjId=function(L){if(isNaN(L)||L%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Z in Yt)if(Yt[Z].objId===L)break;return Rs(Z)},fl=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Yt[U].objId,pageNumber:U,pageContext:Yt[U]}};p.addPage=function(){return Aa.apply(this,arguments),this},p.setPage=function(){return Ws.apply(this,arguments),Re.call(this,Fe[U]),this},p.insertPage=function(L){return this.addPage(),this.movePage(U,L),this},p.movePage=function(L,Z){var Se,Le;if(L>Z){Se=Fe[L],Le=Yt[L];for(var Ve=L;Ve>Z;Ve--)Fe[Ve]=Fe[Ve-1],Yt[Ve]=Yt[Ve-1];Fe[Z]=Se,Yt[Z]=Le,this.setPage(Z)}else if(L<Z){Se=Fe[L],Le=Yt[L];for(var dt=L;dt<Z;dt++)Fe[dt]=Fe[dt+1],Yt[dt]=Yt[dt+1];Fe[Z]=Se,Yt[Z]=Le,this.setPage(Z)}return this},p.deletePage=function(){return Ca.apply(this,arguments),this},p.__private__.text=p.text=function(L,Z,Se,Le,Ve){var dt,vt,Gt,Qt,xr,Ar,nn,Wn,Zn,hn=(Le=Le||{}).scope||this;if(typeof L=="number"&&typeof Z=="number"&&(typeof Se=="string"||Array.isArray(Se))){var wi=Se;Se=Z,Z=L,L=wi}if(arguments[3]instanceof nr==0?(Gt=arguments[4],Qt=arguments[5],zn(nn=arguments[3])==="object"&&nn!==null||(typeof Gt=="string"&&(Qt=Gt,Gt=null),typeof nn=="string"&&(Qt=nn,nn=null),typeof nn=="number"&&(Gt=nn,nn=null),Le={flags:nn,angle:Gt,align:Qt})):(T("The transform parameter of text() with a Matrix value"),Zn=Ve),isNaN(Z)||isNaN(Se)||L==null)throw new Error("Invalid arguments passed to jsPDF.text");if(L.length===0)return hn;var Pn,Hi="",So=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:Ls,Wo=hn.internal.scaleFactor;function fu(qn){return qn=qn.split("	").join(Array(Le.TabLen||9).join(" ")),Dr(qn,nn)}function Wl(qn){for(var Gn,Fi=qn.concat(),Li=[],as=Fi.length;as--;)typeof(Gn=Fi.shift())=="string"?Li.push(Gn):Array.isArray(qn)&&(Gn.length===1||Gn[1]===void 0&&Gn[2]===void 0)?Li.push(Gn[0]):Li.push([Gn[0],Gn[1],Gn[2]]);return Li}function Ri(qn,Gn){var Fi;if(typeof qn=="string")Fi=Gn(qn)[0];else if(Array.isArray(qn)){for(var Li,as,vl=qn.concat(),Go=[],cf=vl.length;cf--;)typeof(Li=vl.shift())=="string"?Go.push(Gn(Li)[0]):Array.isArray(Li)&&typeof Li[0]=="string"&&(as=Gn(Li[0],Li[1],Li[2]),Go.push([as[0],as[1],as[2]]));Fi=Go}return Fi}var Fa=!1,wc=!0;if(typeof L=="string")Fa=!0;else if(Array.isArray(L)){var fa=L.concat();vt=[];for(var y,V=fa.length;V--;)(typeof(y=fa.shift())!="string"||Array.isArray(y)&&typeof y[0]!="string")&&(wc=!1);Fa=wc}if(Fa===!1)throw new Error('Type of text must be string or Array. "'+L+'" is not recognized.');typeof L=="string"&&(L=L.match(/[\r?\n]/)?L.split(/\r\n|\r|\n/g):[L]);var Q=K/hn.internal.scaleFactor,me=Q*(So-1);switch(Le.baseline){case"bottom":Se-=me;break;case"top":Se+=Q-me;break;case"hanging":Se+=Q-2*me;break;case"middle":Se+=Q/2-me}if((Ar=Le.maxWidth||0)>0&&(typeof L=="string"?L=hn.splitTextToSize(L,Ar):Object.prototype.toString.call(L)==="[object Array]"&&(L=L.reduce(function(qn,Gn){return qn.concat(hn.splitTextToSize(Gn,Ar))},[]))),dt={text:L,x:Z,y:Se,options:Le,mutex:{pdfEscape:Dr,activeFontKey:Ot,fonts:qt,activeFontSize:K}},mr.publish("preProcessText",dt),L=dt.text,Gt=(Le=dt.options).angle,Zn instanceof nr==0&&Gt&&typeof Gt=="number"){Gt*=Math.PI/180,Le.rotationDirection===0&&(Gt=-Gt),B===N&&(Gt=-Gt);var ze=Math.cos(Gt),it=Math.sin(Gt);Zn=new nr(ze,it,-it,ze,0,0)}else Gt&&Gt instanceof nr&&(Zn=Gt);B!==N||Zn||(Zn=ns),(xr=Le.charSpace||Ra)!==void 0&&(Hi+=A(M(xr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Wn=Le.horizontalScale)!==void 0&&(Hi+=A(100*Wn)+` Tz
`),Le.lang;var It=-1,dn=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,ii=hn.internal.getCurrentPageInfo().pageContext;switch(dn){case 0:case!1:case"fill":It=0;break;case 1:case!0:case"stroke":It=1;break;case 2:case"fillThenStroke":It=2;break;case 3:case"invisible":It=3;break;case 4:case"fillAndAddForClipping":It=4;break;case 5:case"strokeAndAddPathForClipping":It=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":It=6;break;case 7:case"addToPathForClipping":It=7}var qr=ii.usedRenderingMode!==void 0?ii.usedRenderingMode:-1;It!==-1?Hi+=It+` Tr
`:qr!==-1&&(Hi+=`0 Tr
`),It!==-1&&(ii.usedRenderingMode=It),Qt=Le.align||"left";var Qr,gn=K*So,Gs=hn.internal.pageSize.getWidth(),Ms=qt[Ot];xr=Le.charSpace||Ra,Ar=Le.maxWidth||0,nn=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var La=[],qo=function(qn){return hn.getStringUnitWidth(qn,{font:Ms,charSpace:xr,fontSize:K,doKerning:!1})*K/Wo};if(Object.prototype.toString.call(L)==="[object Array]"){var ha;vt=Wl(L),Qt!=="left"&&(Qr=vt.map(qo));var da,_c=0;if(Qt==="right"){Z-=Qr[0],L=[],V=vt.length;for(var pa=0;pa<V;pa++)pa===0?(da=yi(Z),ha=zo(Se)):(da=M(_c-Qr[pa]),ha=-gn),L.push([vt[pa],da,ha]),_c=Qr[pa]}else if(Qt==="center"){Z-=Qr[0]/2,L=[],V=vt.length;for(var bc=0;bc<V;bc++)bc===0?(da=yi(Z),ha=zo(Se)):(da=M((_c-Qr[bc])/2),ha=-gn),L.push([vt[bc],da,ha]),_c=Qr[bc]}else if(Qt==="left"){L=[],V=vt.length;for(var Rh=0;Rh<V;Rh++)L.push(vt[Rh])}else if(Qt==="justify"&&Ms.encoding==="Identity-H"){L=[],V=vt.length,Ar=Ar!==0?Ar:Gs;for(var Ec=0,_i=0;_i<V;_i++)if(ha=_i===0?zo(Se):-gn,da=_i===0?yi(Z):Ec,_i<V-1){var n0=M((Ar-Qr[_i])/(vt[_i].split(" ").length-1)),Da=vt[_i].split(" ");L.push([Da[0]+" ",da,ha]),Ec=0;for(var Oa=1;Oa<Da.length;Oa++){var af=(qo(Da[Oa-1]+" "+Da[Oa])-qo(Da[Oa]))*Wo+n0;Oa==Da.length-1?L.push([Da[Oa],af,0]):L.push([Da[Oa]+" ",af,0]),Ec-=af}}else L.push([vt[_i],da,ha]);L.push(["",Ec,0])}else{if(Qt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(L=[],V=vt.length,Ar=Ar!==0?Ar:Gs,_i=0;_i<V;_i++)ha=_i===0?zo(Se):-gn,da=_i===0?yi(Z):0,_i<V-1?La.push(A(M((Ar-Qr[_i])/(vt[_i].split(" ").length-1)))):La.push(0),L.push([vt[_i],da,ha])}}(typeof Le.R2L=="boolean"?Le.R2L:ut)===!0&&(L=Ri(L,function(qn,Gn,Fi){return[qn.split("").reverse().join(""),Gn,Fi]})),dt={text:L,x:Z,y:Se,options:Le,mutex:{pdfEscape:Dr,activeFontKey:Ot,fonts:qt,activeFontSize:K}},mr.publish("postProcessText",dt),L=dt.text,Pn=dt.mutex.isHex||!1;var Sc=qt[Ot].encoding;Sc!=="WinAnsiEncoding"&&Sc!=="StandardEncoding"||(L=Ri(L,function(qn,Gn,Fi){return[fu(qn),Gn,Fi]})),vt=Wl(L),L=[];for(var of,hu,ql,Gl=Array.isArray(vt[0])?1:0,gl="",lf=function(qn,Gn,Fi){var Li="";return Fi instanceof nr?(Fi=typeof Le.angle=="number"?Hr(Fi,new nr(1,0,0,1,qn,Gn)):Hr(new nr(1,0,0,1,qn,Gn),Fi),B===N&&(Fi=Hr(new nr(1,0,0,-1,0,0),Fi)),Li=Fi.join(" ")+` Tm
`):Li=A(qn)+" "+A(Gn)+` Td
`,Li},Ma=0;Ma<vt.length;Ma++){switch(gl="",Gl){case 1:ql=(Pn?"<":"(")+vt[Ma][0]+(Pn?">":")"),of=parseFloat(vt[Ma][1]),hu=parseFloat(vt[Ma][2]);break;case 0:ql=(Pn?"<":"(")+vt[Ma]+(Pn?">":")"),of=yi(Z),hu=zo(Se)}La!==void 0&&La[Ma]!==void 0&&(gl=La[Ma]+` Tw
`),Ma===0?L.push(gl+lf(of,hu,Zn)+ql):Gl===0?L.push(gl+ql):Gl===1&&L.push(gl+lf(of,hu,Zn)+ql)}L=Gl===0?L.join(` Tj
T* `):L.join(` Tj
`),L+=` Tj
`;var xl=`BT
/`;return xl+=Ot+" "+K+` Tf
`,xl+=A(K*So)+` TL
`,xl+=Ds+`
`,xl+=Hi,xl+=L,fe(xl+="ET"),m[Ot]=!0,hn};var hl=p.__private__.clip=p.clip=function(L){return fe(L==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return hl("evenodd")},p.__private__.discardPath=p.discardPath=function(){return fe("n"),this};var Yr=p.__private__.isValidStyle=function(L){var Z=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(L)!==-1&&(Z=!0),Z};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(L){return Yr(L)&&(c=L),this};var Vo=p.__private__.getStyle=p.getStyle=function(L){var Z=c;switch(L){case"D":case"S":Z="S";break;case"F":Z="f";break;case"FD":case"DF":Z="B";break;case"f":case"f*":case"B":case"B*":Z=L}return Z},Wr=p.close=function(){return fe("h"),this};p.stroke=function(){return fe("S"),this},p.fill=function(L){return ca("f",L),this},p.fillEvenOdd=function(L){return ca("f*",L),this},p.fillStroke=function(L){return ca("B",L),this},p.fillStrokeEvenOdd=function(L){return ca("B*",L),this};var ca=function(L,Z){zn(Z)==="object"?tf(Z,L):fe(L)},gc=function(L){L===null||B===N&&L===void 0||(L=Vo(L),fe(L))};function xc(L,Z,Se,Le,Ve){var dt=new X0(Z||this.boundingBox,Se||this.xStep,Le||this.yStep,this.gState,Ve||this.matrix);dt.stream=this.stream;var vt=L+"$$"+this.cloneIndex+++"$$";return Dn(vt,dt),dt}var tf=function(L,Z){var Se=jt[L.key],Le=Me[Se];if(Le instanceof ad)fe("q"),fe(rf(Z)),Le.gState&&p.setGState(Le.gState),fe(L.matrix.toString()+" cm"),fe("/"+Se+" sh"),fe("Q");else if(Le instanceof X0){var Ve=new nr(1,0,0,-1,0,ws());L.matrix&&(Ve=Ve.multiply(L.matrix||ns),Se=xc.call(Le,L.key,L.boundingBox,L.xStep,L.yStep,Ve).id),fe("q"),fe("/Pattern cs"),fe("/"+Se+" scn"),Le.gState&&p.setGState(Le.gState),fe(Z),fe("Q")}},rf=function(L){switch(L){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},vc=p.moveTo=function(L,Z){return fe(A(M(L))+" "+A(ie(Z))+" m"),this},Uo=p.lineTo=function(L,Z){return fe(A(M(L))+" "+A(ie(Z))+" l"),this},Fs=p.curveTo=function(L,Z,Se,Le,Ve,dt){return fe([A(M(L)),A(ie(Z)),A(M(Se)),A(ie(Le)),A(M(Ve)),A(ie(dt)),"c"].join(" ")),this};p.__private__.line=p.line=function(L,Z,Se,Le,Ve){if(isNaN(L)||isNaN(Z)||isNaN(Se)||isNaN(Le)||!Yr(Ve))throw new Error("Invalid arguments passed to jsPDF.line");return B===F?this.lines([[Se-L,Le-Z]],L,Z,[1,1],Ve||"S"):this.lines([[Se-L,Le-Z]],L,Z,[1,1]).stroke()},p.__private__.lines=p.lines=function(L,Z,Se,Le,Ve,dt){var vt,Gt,Qt,xr,Ar,nn,Wn,Zn,hn,wi,Pn,Hi;if(typeof L=="number"&&(Hi=Se,Se=Z,Z=L,L=Hi),Le=Le||[1,1],dt=dt||!1,isNaN(Z)||isNaN(Se)||!Array.isArray(L)||!Array.isArray(Le)||!Yr(Ve)||typeof dt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(vc(Z,Se),vt=Le[0],Gt=Le[1],xr=L.length,wi=Z,Pn=Se,Qt=0;Qt<xr;Qt++)(Ar=L[Qt]).length===2?(wi=Ar[0]*vt+wi,Pn=Ar[1]*Gt+Pn,Uo(wi,Pn)):(nn=Ar[0]*vt+wi,Wn=Ar[1]*Gt+Pn,Zn=Ar[2]*vt+wi,hn=Ar[3]*Gt+Pn,wi=Ar[4]*vt+wi,Pn=Ar[5]*Gt+Pn,Fs(nn,Wn,Zn,hn,wi,Pn));return dt&&Wr(),gc(Ve),this},p.path=function(L){for(var Z=0;Z<L.length;Z++){var Se=L[Z],Le=Se.c;switch(Se.op){case"m":vc(Le[0],Le[1]);break;case"l":Uo(Le[0],Le[1]);break;case"c":Fs.apply(this,Le);break;case"h":Wr()}}return this},p.__private__.rect=p.rect=function(L,Z,Se,Le,Ve){if(isNaN(L)||isNaN(Z)||isNaN(Se)||isNaN(Le)||!Yr(Ve))throw new Error("Invalid arguments passed to jsPDF.rect");return B===F&&(Le=-Le),fe([A(M(L)),A(ie(Z)),A(M(Se)),A(M(Le)),"re"].join(" ")),gc(Ve),this},p.__private__.triangle=p.triangle=function(L,Z,Se,Le,Ve,dt,vt){if(isNaN(L)||isNaN(Z)||isNaN(Se)||isNaN(Le)||isNaN(Ve)||isNaN(dt)||!Yr(vt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Se-L,Le-Z],[Ve-Se,dt-Le],[L-Ve,Z-dt]],L,Z,[1,1],vt,!0),this},p.__private__.roundedRect=p.roundedRect=function(L,Z,Se,Le,Ve,dt,vt){if(isNaN(L)||isNaN(Z)||isNaN(Se)||isNaN(Le)||isNaN(Ve)||isNaN(dt)||!Yr(vt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Gt=4/3*(Math.SQRT2-1);return Ve=Math.min(Ve,.5*Se),dt=Math.min(dt,.5*Le),this.lines([[Se-2*Ve,0],[Ve*Gt,0,Ve,dt-dt*Gt,Ve,dt],[0,Le-2*dt],[0,dt*Gt,-Ve*Gt,dt,-Ve,dt],[2*Ve-Se,0],[-Ve*Gt,0,-Ve,-dt*Gt,-Ve,-dt],[0,2*dt-Le],[0,-dt*Gt,Ve*Gt,-dt,Ve,-dt]],L+Ve,Z,[1,1],vt,!0),this},p.__private__.ellipse=p.ellipse=function(L,Z,Se,Le,Ve){if(isNaN(L)||isNaN(Z)||isNaN(Se)||isNaN(Le)||!Yr(Ve))throw new Error("Invalid arguments passed to jsPDF.ellipse");var dt=4/3*(Math.SQRT2-1)*Se,vt=4/3*(Math.SQRT2-1)*Le;return vc(L+Se,Z),Fs(L+Se,Z-vt,L+dt,Z-Le,L,Z-Le),Fs(L-dt,Z-Le,L-Se,Z-vt,L-Se,Z),Fs(L-Se,Z+vt,L-dt,Z+Le,L,Z+Le),Fs(L+dt,Z+Le,L+Se,Z+vt,L+Se,Z),gc(Ve),this},p.__private__.circle=p.circle=function(L,Z,Se,Le){if(isNaN(L)||isNaN(Z)||isNaN(Se)||!Yr(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(L,Z,Se,Se,Le)},p.setFont=function(L,Z,Se){return Se&&(Z=P(Z,Se)),Ot=Bo(L,Z,{disableWarning:!1}),this};var is=p.__private__.getFont=p.getFont=function(){return qt[Bo.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var L,Z,Se={};for(L in wr)if(wr.hasOwnProperty(L))for(Z in Se[L]=[],wr[L])wr[L].hasOwnProperty(Z)&&Se[L].push(Z);return Se},p.addFont=function(L,Z,Se,Le,Ve){var dt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&dt.indexOf(arguments[3])!==-1?Ve=arguments[3]:arguments[3]&&dt.indexOf(arguments[3])==-1&&(Se=P(Se,Le)),on.call(this,L,Z,Se,Ve=Ve||"Identity-H")};var Ls,ua=t.lineWidth||.200025,_r=p.__private__.getLineWidth=p.getLineWidth=function(){return ua},Pa=p.__private__.setLineWidth=p.setLineWidth=function(L){return ua=L,fe(A(M(L))+" w"),this};p.__private__.setLineDash=gr.API.setLineDash=gr.API.setLineDashPattern=function(L,Z){if(L=L||[],Z=Z||0,isNaN(Z)||!Array.isArray(L))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return L=L.map(function(Se){return A(M(Se))}).join(" "),Z=A(M(Z)),fe("["+L+"] "+Z+" d"),this};var _o=p.__private__.getLineHeight=p.getLineHeight=function(){return K*Ls};p.__private__.getLineHeight=p.getLineHeight=function(){return K*Ls};var Ph=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(L){return typeof(L=L||1.15)=="number"&&(Ls=L),this},nf=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Ls};Ph(t.lineHeight);var yi=p.__private__.getHorizontalCoordinate=function(L){return M(L)},zo=p.__private__.getVerticalCoordinate=function(L){return B===N?L:Yt[U].mediaBox.topRightY-Yt[U].mediaBox.bottomLeftY-M(L)},sf=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(L){return A(yi(L))},$o=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(L){return A(zo(L))},bo=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Ce(bo)},p.__private__.setStrokeColor=p.setDrawColor=function(L,Z,Se,Le){return bo=Ie({ch1:L,ch2:Z,ch3:Se,ch4:Le,pdfColorType:"draw",precision:2}),fe(bo),this};var yc=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Ce(yc)},p.__private__.setFillColor=p.setFillColor=function(L,Z,Se,Le){return yc=Ie({ch1:L,ch2:Z,ch3:Se,ch4:Le,pdfColorType:"fill",precision:2}),fe(yc),this};var Ds=t.textColor||"0 g",qs=p.__private__.getTextColor=p.getTextColor=function(){return Ce(Ds)};p.__private__.setTextColor=p.setTextColor=function(L,Z,Se,Le){return Ds=Ie({ch1:L,ch2:Z,ch3:Se,ch4:Le,pdfColorType:"text",precision:3}),this};var Ra=t.charSpace,dl=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Ra||0)};p.__private__.setCharSpace=p.setCharSpace=function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ra=L,this};var Nn=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(L){var Z=p.CapJoinStyles[L];if(Z===void 0)throw new Error("Line cap style of '"+L+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nn=Z,fe(Z+" J"),this};var uu=0;p.__private__.setLineJoin=p.setLineJoin=function(L){var Z=p.CapJoinStyles[L];if(Z===void 0)throw new Error("Line join style of '"+L+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return uu=Z,fe(Z+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(L){if(L=L||0,isNaN(L))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return fe(A(M(L))+" M"),this},p.GState=wv,p.setGState=function(L){(L=typeof L=="string"?Vt[tr[L]]:Ho(null,L)).equals(sr)||(fe("/"+L.id+" gs"),sr=L)};var Ho=function(L,Z){if(!L||!tr[L]){var Se=!1;for(var Le in Vt)if(Vt.hasOwnProperty(Le)&&Vt[Le].equals(Z)){Se=!0;break}if(Se)Z=Vt[Le];else{var Ve="GS"+(Object.keys(Vt).length+1).toString(10);Vt[Ve]=Z,Z.id=Ve}return L&&(tr[L]=Z.id),mr.publish("addGState",Z),Z}};p.addGState=function(L,Z){return Ho(L,Z),this},p.saveGraphicsState=function(){return fe("q"),rn.push({key:Ot,size:K,color:Ds}),this},p.restoreGraphicsState=function(){fe("Q");var L=rn.pop();return Ot=L.key,K=L.size,Ds=L.color,sr=null,this},p.setCurrentTransformationMatrix=function(L){return fe(L.toString()+" cm"),this},p.comment=function(L){return fe("#"+L),this};var co=function(L,Z){var Se=L||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Se},set:function(dt){isNaN(dt)||(Se=parseFloat(dt))}});var Le=Z||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(dt){isNaN(dt)||(Le=parseFloat(dt))}});var Ve="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ve},set:function(dt){Ve=dt.toString()}}),this},pl=function(L,Z,Se,Le){co.call(this,L,Z),this.type="rect";var Ve=Se||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ve},set:function(vt){isNaN(vt)||(Ve=parseFloat(vt))}});var dt=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return dt},set:function(vt){isNaN(vt)||(dt=parseFloat(vt))}}),this},ml=function(){this.page=ur,this.currentPage=U,this.pages=Fe.slice(0),this.pagesContext=Yt.slice(0),this.x=Nt,this.y=cr,this.matrix=er,this.width=ys(U),this.height=ws(U),this.outputDestination=Je,this.id="",this.objectNumber=-1};ml.prototype.restore=function(){ur=this.page,U=this.currentPage,Yt=this.pagesContext,Fe=this.pages,Nt=this.x,cr=this.y,er=this.matrix,Hl(U,this.width),ss(U,this.height),Je=this.outputDestination};var Os=function(L,Z,Se,Le,Ve){In.push(new ml),ur=U=0,Fe=[],Nt=L,cr=Z,er=Ve,fn([Se,Le])};for(var Eo in p.beginFormObject=function(L,Z,Se,Le,Ve){return Os(L,Z,Se,Le,Ve),this},p.endFormObject=function(L){return(function(Z){if(Cn[Z])In.pop().restore();else{var Se=new ml,Le="Xo"+(Object.keys(Ur).length+1).toString(10);Se.id=Le,Cn[Z]=Le,Ur[Le]=Se,mr.publish("addFormObject",Se),In.pop().restore()}})(L),this},p.doFormObject=function(L,Z){var Se=Ur[Cn[L]];return fe("q"),fe(Z.toString()+" cm"),fe("/"+Se.id+" Do"),fe("Q"),this},p.getFormObject=function(L){var Z=Ur[Cn[L]];return{x:Z.x,y:Z.y,width:Z.width,height:Z.height,matrix:Z.matrix}},p.save=function(L,Z){return L=L||"generated.pdf",(Z=Z||{}).returnPromise=Z.returnPromise||!1,Z.returnPromise===!1?(ed(Na(Ia()),L),typeof ed.unload=="function"&&Fr.setTimeout&&setTimeout(ed.unload,911),this):new Promise(function(Se,Le){try{var Ve=ed(Na(Ia()),L);typeof ed.unload=="function"&&Fr.setTimeout&&setTimeout(ed.unload,911),Se(Ve)}catch(dt){Le(dt.message)}})},gr.API)gr.API.hasOwnProperty(Eo)&&(Eo==="events"&&gr.API.events.length?(function(L,Z){var Se,Le,Ve;for(Ve=Z.length-1;Ve!==-1;Ve--)Se=Z[Ve][0],Le=Z[Ve][1],L.subscribe.apply(L,[Se].concat(typeof Le=="function"?[Le]:Le))})(mr,gr.API.events):p[Eo]=gr.API[Eo]);var ys=p.getPageWidth=function(L){return(Yt[L=L||U].mediaBox.topRightX-Yt[L].mediaBox.bottomLeftX)/wt},Hl=p.setPageWidth=function(L,Z){Yt[L].mediaBox.topRightX=Z*wt+Yt[L].mediaBox.bottomLeftX},ws=p.getPageHeight=function(L){return(Yt[L=L||U].mediaBox.topRightY-Yt[L].mediaBox.bottomLeftY)/wt},ss=p.setPageHeight=function(L,Z){Yt[L].mediaBox.topRightY=Z*wt+Yt[L].mediaBox.bottomLeftY};return p.internal={pdfEscape:Dr,getStyle:Vo,getFont:is,getFontSize:Ue,getCharSpace:dl,getTextColor:qs,getLineHeight:_o,getLineHeightFactor:nf,getLineWidth:_r,write:ot,getHorizontalCoordinate:yi,getVerticalCoordinate:zo,getCoordinateString:sf,getVerticalCoordinateString:$o,collections:{},newObject:bn,newAdditionalObject:Ae,newObjectDeferred:Jn,newObjectDeferredBegin:re,getFilters:He,putStream:tt,events:mr,scaleFactor:wt,pageSize:{getWidth:function(){return ys(U)},setWidth:function(L){Hl(U,L)},getHeight:function(){return ws(U)},setHeight:function(L){ss(U,L)}},encryptionOptions:f,encryption:Tn,getEncryptor:function(L){return f!==null?Tn.encryptor(L,0):function(Z){return Z}},output:Ps,getNumberOfPages:ni,pages:Fe,out:fe,f2:I,f3:D,getPageInfo:Rs,getPageInfoByObjId:$l,getCurrentPageInfo:fl,getPDFVersion:w,Point:co,Rectangle:pl,Matrix:nr,hasHotfix:zl},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return ys(U)},set:function(L){Hl(U,L)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return ws(U)},set:function(L){ss(U,L)},enumerable:!0,configurable:!0}),(function(L){for(var Z=0,Se=st.length;Z<Se;Z++){var Le=on.call(this,L[Z][0],L[Z][1],L[Z][2],st[Z][3],!0);d===!1&&(m[Le]=!0);var Ve=L[Z][0].split("-");br({id:Le,fontName:Ve[0],fontStyle:Ve[1]||""})}mr.publish("addFonts",{fonts:qt,dictionary:wr})}).call(p,st),Ot="F1",Aa(i,r),mr.publish("initialized"),p}$0.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},$0.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},$0.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},$0.prototype.processOwnerPassword=function(t,e){return z5(U5(e).substr(0,5),t)},$0.prototype.encryptor=function(t,e){var r=U5(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return z5(r,n)}},wv.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||zn(t)!==zn(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},gr.API={events:[]},gr.version="3.0.2";var Xi=gr.API,T3=1,r0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},D0=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},jr=function(t){return t.toFixed(2)},Ff=function(t){return t.toFixed(5)};Xi.__acroform__={};var jo=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},PA=function(t){return t*T3},Oc=function(t){var e=new C9,r=or.internal.getHeight(t)||0,n=or.internal.getWidth(t)||0;return e.BBox=[0,0,Number(jr(n)),Number(jr(r))],e},Lue=Xi.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},Due=Xi.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},Oue=Xi.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},fs=Xi.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Oue(t,e-1)},hs=Xi.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Lue(t,e-1)},ds=Xi.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Due(t,e-1)},Mue=Xi.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=t[0],s=t[1],a=t[2],o=t[3],l={};return l.lowerLeft_X=r(i)||0,l.lowerLeft_Y=n(s+o)||0,l.upperRight_X=r(i+a)||0,l.upperRight_Y=n(s)||0,[Number(jr(l.lowerLeft_X)),Number(jr(l.lowerLeft_Y)),Number(jr(l.upperRight_X)),Number(jr(l.upperRight_Y))]},jue=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=$5(t,r),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+jr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Oc(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},$5=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(I){return I.split(`
`)}):i.map(function(I){return[I]});var s=r,a=or.internal.getHeight(t)||0;a=a<0?-a:a;var o=or.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(I,D,M){if(I+1<i.length){var ie=D+" "+i[I+1][0];return t2(ie,t,M).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var c,f,d=t2("3",t,s).height,m=t.multiline?a-s:(a-d)/2,p=m+=2,_=0,w=0,b=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+t2(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var k="",F=0,N=0;N<i.length;N++)if(i.hasOwnProperty(N)){var B=!1;if(i[N].length!==1&&b!==i[N].length-1){if((d+2)*(F+2)+2>a)continue e;k+=i[N][b],B=!0,w=N,N--}else{k=(k+=i[N][b]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var X=parseInt(N),G=l(X,k,s),P=N>=i.length-1;if(G&&!P){k+=" ",b=0;continue}if(G||P){if(P)w=X;else if(t.multiline&&(d+2)*(F+2)+2>a)continue e}else{if(!t.multiline||(d+2)*(F+2)+2>a)continue e;w=X}}for(var A="",T=_;T<=w;T++){var O=i[T];if(t.multiline){if(T===w){A+=O[b]+" ",b=(b+1)%O.length;continue}if(T===_){A+=O[O.length-1]+" ";continue}}A+=O[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,f=t2(A,t,s).width,t.textAlign){case"right":c=o-f-2;break;case"center":c=(o-f)/2;break;default:c=2}e+=jr(c)+" "+jr(p)+` Td
`,e+="("+r0(A)+`) Tj
`,e+=-jr(c)+` 0 Td
`,p=-(s+2),f=0,_=B?w:w+1,F++,k=""}break}return n.text=e,n.fontSize=s,n},t2=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},Bue={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Vue=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Uue=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(pc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Bue)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");T3=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new I9,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.objId=void 0,s.hasAnnotation&&Vue(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,i){var s=!n;for(var a in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],l=[],c=o.Rect;if(o.Rect&&(o.Rect=Mue(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=or.createDefaultAppearanceStream(o),zn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var f=jue(o);l.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(o.appearanceStreamContent){var d="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var p=o.appearanceStreamContent[m];if(d+="/"+m+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var _=p[a];typeof _=="function"&&(_=_.call(i,o)),d+="/"+a+" "+_+" ",i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_)}}else typeof(_=p)=="function"&&(_=_.call(i,o)),d+="/"+a+" "+_,i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}s&&(function(w,b){for(var k in w)if(w.hasOwnProperty(k)){var F=k,N=w[k];b.internal.newObjectDeferredBegin(N.objId,!0),zn(N)==="object"&&typeof N.putStream=="function"&&N.putStream(),delete w[F]}})(i.internal.acroformPlugin.xForms,i)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},A9=Xi.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),zn(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),i+="("+r0(n(t[s].toString()))+")"):i+=t[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},y_=function(t,e,r){var n=function(i){return i};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+r0(n(t))+")"},$c=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};$c.prototype.toString=function(){return this.objId+" 0 R"},$c.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},$c.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],i=this[n];i&&(Array.isArray(i)?t.push({key:n,value:A9(i,this.objId,this.scope)}):i instanceof $c?(i.scope=this.scope,t.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:n,value:i}))}return t};var C9=function(){$c.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};jo(C9,$c);var I9=function(){$c.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+r0(r(t))+")"}},set:function(r){t=r}})};jo(I9,$c);var pc=function t(){$c.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');e=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!fs(e,3)},set:function(k){k?this.F=hs(e,3):this.F=ds(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');r=k}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(k){n=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(k){n[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(k){n[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(k){n[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(k){n[3]=k}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof _v)return;s="FieldObject"+t.FieldNum++}var k=function(F){return F};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+r0(k(s))+")"},set:function(k){s=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(k){s=k}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(k){a=k}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(k){o=k}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(k){l=k}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/T3:c},set:function(k){c=k}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(k){f=k}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof _v||this instanceof yd))return y_(d,this.objId,this.scope)},set:function(k){k=k.toString(),d=k}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof na==0?y_(m,this.objId,this.scope):m},set:function(k){k=k.toString(),m=this instanceof na==0?k.substr(0,1)==="("?D0(k.substr(1,k.length-2)):D0(k):k}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof na==1?D0(m.substr(1,m.length-1)):m},set:function(k){k=k.toString(),m=this instanceof na==1?"/"+k:k}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof na==0?y_(p,this.objId,this.scope):p},set:function(k){k=k.toString(),p=this instanceof na==0?k.substr(0,1)==="("?D0(k.substr(1,k.length-2)):D0(k):k}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof na==1?D0(p.substr(1,p.length-1)):p},set:function(k){k=k.toString(),p=this instanceof na==1?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(k){k=!!k,w=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(k){_=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,1)},set:function(k){k?this.Ff=hs(this.Ff,1):this.Ff=ds(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,2)},set:function(k){k?this.Ff=hs(this.Ff,2):this.Ff=ds(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,3)},set:function(k){k?this.Ff=hs(this.Ff,3):this.Ff=ds(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');b=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(b){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:b=2;break;case"center":case 1:b=1;break;default:b=0}}})};jo(pc,$c);var cp=function(){pc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return A9(e,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=(function(s,a,o){o||(o=1);for(var l,c=[];l=a.exec(s);)c.push(l[o]);return c})(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,18)},set:function(r){r?this.Ff=hs(this.Ff,18):this.Ff=ds(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=hs(this.Ff,19):this.Ff=ds(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,20)},set:function(r){r?(this.Ff=hs(this.Ff,20),e.sort()):this.Ff=ds(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,22)},set:function(r){r?this.Ff=hs(this.Ff,22):this.Ff=ds(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,23)},set:function(r){r?this.Ff=hs(this.Ff,23):this.Ff=ds(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,27)},set:function(r){r?this.Ff=hs(this.Ff,27):this.Ff=ds(this.Ff,27)}}),this.hasAppearanceStream=!1};jo(cp,pc);var up=function(){cp.call(this),this.fontName="helvetica",this.combo=!1};jo(up,cp);var fp=function(){up.call(this),this.combo=!0};jo(fp,up);var E2=function(){fp.call(this),this.edit=!0};jo(E2,fp);var na=function(){pc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,15)},set:function(r){r?this.Ff=hs(this.Ff,15):this.Ff=ds(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,16)},set:function(r){r?this.Ff=hs(this.Ff,16):this.Ff=ds(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,17)},set:function(r){r?this.Ff=hs(this.Ff,17):this.Ff=ds(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,26)},set:function(r){r?this.Ff=hs(this.Ff,26):this.Ff=ds(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+r0(r(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){zn(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};jo(na,pc);var S2=function(){na.call(this),this.pushButton=!0};jo(S2,na);var hp=function(){na.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};jo(hp,na);var _v=function(){var t,e;pc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),n)a.push("/"+s+" ("+r0(i(n[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){zn(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=or.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};jo(_v,pc),hp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},hp.prototype.createOption=function(t){var e=new _v;return e.Parent=this,e.optionName=t,this.Kids.push(e),zue.call(this.scope,e),e};var k2=function(){na.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=or.CheckBox.createAppearanceStream()};jo(k2,na);var yd=function(){pc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,13)},set:function(e){e?this.Ff=hs(this.Ff,13):this.Ff=ds(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,21)},set:function(e){e?this.Ff=hs(this.Ff,21):this.Ff=ds(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,23)},set:function(e){e?this.Ff=hs(this.Ff,23):this.Ff=ds(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,24)},set:function(e){e?this.Ff=hs(this.Ff,24):this.Ff=ds(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,25)},set:function(e){e?this.Ff=hs(this.Ff,25):this.Ff=ds(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,26)},set:function(e){e?this.Ff=hs(this.Ff,26):this.Ff=ds(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};jo(yd,pc);var T2=function(){yd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!fs(this.Ff,14)},set:function(t){t?this.Ff=hs(this.Ff,14):this.Ff=ds(this.Ff,14)}}),this.password=!0};jo(T2,yd);var or={CheckBox:{createAppearanceStream:function(){return{N:{On:or.CheckBox.YesNormal},D:{On:or.CheckBox.YesPushDown,Off:or.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Oc(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=$5(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+jr(or.internal.getWidth(t))+" "+jr(or.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+jr(s.fontSize)+" Tf "+i),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Oc(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=[],s=or.internal.getHeight(t),a=or.internal.getWidth(t),o=$5(t,t.caption);return i.push("1 g"),i.push("0 0 "+jr(a)+" "+jr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+jr(a-1)+" "+jr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+jr(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Oc(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+jr(or.internal.getWidth(t))+" "+jr(or.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:or.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=or.RadioButton.Circle.YesNormal,e.D[t]=or.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Oc(t);e.scope=t.scope;var r=[],n=or.internal.getWidth(t)<=or.internal.getHeight(t)?or.internal.getWidth(t)/4:or.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=or.internal.Bezier_C,s=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ff(or.internal.getWidth(t)/2)+" "+Ff(or.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Oc(t);e.scope=t.scope;var r=[],n=or.internal.getWidth(t)<=or.internal.getHeight(t)?or.internal.getWidth(t)/4:or.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*or.internal.Bezier_C).toFixed(5)),a=Number((n*or.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ff(or.internal.getWidth(t)/2)+" "+Ff(or.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ff(or.internal.getWidth(t)/2)+" "+Ff(or.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Oc(t);e.scope=t.scope;var r=[],n=or.internal.getWidth(t)<=or.internal.getHeight(t)?or.internal.getWidth(t)/4:or.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*or.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ff(or.internal.getWidth(t)/2)+" "+Ff(or.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:or.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=or.RadioButton.Cross.YesNormal,e.D[t]=or.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Oc(t);e.scope=t.scope;var r=[],n=or.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+jr(or.internal.getWidth(t)-2)+" "+jr(or.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(jr(n.x1.x)+" "+jr(n.x1.y)+" m"),r.push(jr(n.x2.x)+" "+jr(n.x2.y)+" l"),r.push(jr(n.x4.x)+" "+jr(n.x4.y)+" m"),r.push(jr(n.x3.x)+" "+jr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Oc(t);e.scope=t.scope;var r=or.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+jr(or.internal.getWidth(t))+" "+jr(or.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+jr(or.internal.getWidth(t)-2)+" "+jr(or.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(jr(r.x1.x)+" "+jr(r.x1.y)+" m"),n.push(jr(r.x2.x)+" "+jr(r.x2.y)+" l"),n.push(jr(r.x4.x)+" "+jr(r.x4.y)+" m"),n.push(jr(r.x3.x)+" "+jr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Oc(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+jr(or.internal.getWidth(t))+" "+jr(or.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};or.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=or.internal.getWidth(t),r=or.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},or.internal.getWidth=function(t){var e=0;return zn(t)==="object"&&(e=PA(t.Rect[2])),e},or.internal.getHeight=function(t){var e=0;return zn(t)==="object"&&(e=PA(t.Rect[3])),e};var zue=Xi.addField=function(t){if(Uue(this,t),!(t instanceof pc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Xi.AcroFormChoiceField=cp,Xi.AcroFormListBox=up,Xi.AcroFormComboBox=fp,Xi.AcroFormEditBox=E2,Xi.AcroFormButton=na,Xi.AcroFormPushButton=S2,Xi.AcroFormRadioButton=hp,Xi.AcroFormCheckBox=k2,Xi.AcroFormTextField=yd,Xi.AcroFormPasswordField=T2,Xi.AcroFormAppearance=or,Xi.AcroForm={ChoiceField:cp,ListBox:up,ComboBox:fp,EditBox:E2,Button:na,PushButton:S2,RadioButton:hp,CheckBox:k2,TextField:yd,PasswordField:T2,Appearance:or},gr.AcroForm={ChoiceField:cp,ListBox:up,ComboBox:fp,EditBox:E2,Button:na,PushButton:S2,RadioButton:hp,CheckBox:k2,TextField:yd,PasswordField:T2,Appearance:or};gr.AcroForm;function N9(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(I,D){var M,ie,be,Ne,we,le=r;if((D=D||r)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(G(I))for(we in n)for(be=n[we],M=0;M<be.length;M+=1){for(Ne=!0,ie=0;ie<be[M].length;ie+=1)if(be[M][ie]!==void 0&&be[M][ie]!==I[ie]){Ne=!1;break}if(Ne===!0){le=we;break}}else for(we in n)for(be=n[we],M=0;M<be.length;M+=1){for(Ne=!0,ie=0;ie<be[M].length;ie+=1)if(be[M][ie]!==void 0&&be[M][ie]!==I.charCodeAt(ie)){Ne=!1;break}if(Ne===!0){le=we;break}}return le===r&&D!==r&&(le=D),le},s=function I(D){for(var M=this.internal.write,ie=this.internal.putStream,be=(0,this.internal.getFilters)();be.indexOf("FlateEncode")!==-1;)be.splice(be.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var Ne=[];if(Ne.push({key:"Type",value:"/XObject"}),Ne.push({key:"Subtype",value:"/Image"}),Ne.push({key:"Width",value:D.width}),Ne.push({key:"Height",value:D.height}),D.colorSpace===k.INDEXED?Ne.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(Ne.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===k.DEVICE_CMYK&&Ne.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ne.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&Ne.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)){for(var we="",le=0,J=D.transparency.length;le<J;le++)we+=D.transparency[le]+" "+D.transparency[le]+" ";Ne.push({key:"Mask",value:"["+we+"]"})}D.sMask!==void 0&&Ne.push({key:"SMask",value:D.objectId+1+" 0 R"});var ue=D.filter!==void 0?["/"+D.filter]:void 0;if(ie({data:D.data,additionalKeyValues:Ne,alreadyAppliedFilters:ue,objectId:D.objectId}),M("endobj"),"sMask"in D&&D.sMask!==void 0){var ee=(D.predictor!=null?"/Predictor "+D.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+D.width,C={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:D.bitsPerComponent,decodeParameters:ee,data:D.sMask};"filter"in D&&(C.filter=D.filter),I.call(this,C)}if(D.colorSpace===k.INDEXED){var U=this.internal.newObject();ie({data:A(new Uint8Array(D.palette)),objectId:U}),M("endobj")}},a=function(){var I=this.internal.collections[e+"images"];for(var D in I)s.call(this,I[D])},o=function(){var I,D=this.internal.collections[e+"images"],M=this.internal.write;for(var ie in D)M("/I"+(I=D[ie]).index,I.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var I=this.internal.collections[e+"images"];return l.call(this),I},f=function(){return Object.keys(this.internal.collections[e+"images"]).length},d=function(I){return typeof t["process"+I.toUpperCase()]=="function"},m=function(I){return zn(I)==="object"&&I.nodeType===1},p=function(I,D){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var M=""+I.getAttribute("src");if(M.indexOf("data:image/")===0)return b2(unescape(M).split("base64,").pop());var ie=t.loadFile(M,!0);if(ie!==void 0)return ie}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var be;switch(D){case"PNG":be="image/png";break;case"WEBP":be="image/webp";break;default:be="image/jpeg"}return b2(I.toDataURL(be,1).split("base64,").pop())}},_=function(I){var D=this.internal.collections[e+"images"];if(D){for(var M in D)if(I===D[M].alias)return D[M]}},w=function(I,D,M){return I||D||(I=-96,D=-96),I<0&&(I=-1*M.width*72/I/this.internal.scaleFactor),D<0&&(D=-1*M.height*72/D/this.internal.scaleFactor),I===0&&(I=D*M.width/M.height),D===0&&(D=I*M.height/M.width),[I,D]},b=function(I,D,M,ie,be,Ne){var we=w.call(this,M,ie,be),le=this.internal.getCoordinateString,J=this.internal.getVerticalCoordinateString,ue=c.call(this);if(M=we[0],ie=we[1],ue[be.index]=be,Ne){Ne*=Math.PI/180;var ee=Math.cos(Ne),C=Math.sin(Ne),U=function(Y){return Y.toFixed(4)},W=[U(ee),U(C),U(-1*C),U(ee),0,0,"cm"]}this.internal.write("q"),Ne?(this.internal.write([1,"0","0",1,le(I),J(D+ie),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([le(M),"0","0",le(ie),"0","0","cm"].join(" "))):this.internal.write([le(M),"0","0",le(ie),le(I),J(D+ie),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+be.index+" Do"),this.internal.write("Q")},k=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var F=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=t.__addimage__.sHashCode=function(I){var D,M,ie=0;if(typeof I=="string")for(M=I.length,D=0;D<M;D++)ie=(ie<<5)-ie+I.charCodeAt(D),ie|=0;else if(G(I))for(M=I.byteLength/2,D=0;D<M;D++)ie=(ie<<5)-ie+I[D],ie|=0;return ie},B=t.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var D=!0;return I.length===0&&(D=!1),I.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(D=!1),D},X=t.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var D=I.indexOf(",");return D<0?null:I.substring(0,D).trim().endsWith("base64")?I.substring(D+1):null};t.__addimage__.isArrayBuffer=function(I){return I instanceof ArrayBuffer};var G=t.__addimage__.isArrayBufferView=function(I){return I instanceof Int8Array||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array},P=t.__addimage__.binaryStringToUint8Array=function(I){for(var D=I.length,M=new Uint8Array(D),ie=0;ie<D;ie++)M[ie]=I.charCodeAt(ie);return M},A=t.__addimage__.arrayBufferToBinaryString=function(I){for(var D="",M=G(I)?I:new Uint8Array(I),ie=0;ie<M.length;ie+=8192)D+=String.fromCharCode.apply(null,M.subarray(ie,ie+8192));return D};t.addImage=function(){var I,D,M,ie,be,Ne,we,le,J;if(typeof arguments[1]=="number"?(D=r,M=arguments[1],ie=arguments[2],be=arguments[3],Ne=arguments[4],we=arguments[5],le=arguments[6],J=arguments[7]):(D=arguments[1],M=arguments[2],ie=arguments[3],be=arguments[4],Ne=arguments[5],we=arguments[6],le=arguments[7],J=arguments[8]),zn(I=arguments[0])==="object"&&!m(I)&&"imageData"in I){var ue=I;I=ue.imageData,D=ue.format||D||r,M=ue.x||M||0,ie=ue.y||ie||0,be=ue.w||ue.width||be,Ne=ue.h||ue.height||Ne,we=ue.alias||we,le=ue.compression||le,J=ue.rotation||ue.angle||J}var ee=this.internal.getFilters();if(le===void 0&&ee.indexOf("FlateEncode")!==-1&&(le="SLOW"),isNaN(M)||isNaN(ie))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var C=T.call(this,I,D,we,le);return b.call(this,M,ie,be,Ne,C,J),this};var T=function(I,D,M,ie){var be,Ne,we;if(typeof I=="string"&&i(I)===r){I=unescape(I);var le=O(I,!1);(le!==""||(le=t.loadFile(I,!0))!==void 0)&&(I=le)}if(m(I)&&(I=p(I,D)),D=i(I,D),!d(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(((we=M)==null||we.length===0)&&(M=(function(J){return typeof J=="string"||G(J)?N(J):G(J.data)?N(J.data):null})(I)),(be=_.call(this,M))||(I instanceof Uint8Array||D==="RGBA"||(Ne=I,I=P(I)),be=this["process"+D.toUpperCase()](I,f.call(this),M,(function(J){return J&&typeof J=="string"&&(J=J.toUpperCase()),J in t.image_compression?J:F.NONE})(ie),Ne)),!be)throw new Error("An unknown error occurred whilst processing the image.");return be},O=t.__addimage__.convertBase64ToBinaryString=function(I,D){D=typeof D!="boolean"||D;var M,ie="";if(typeof I=="string"){var be;M=(be=X(I))!==null&&be!==void 0?be:I;try{ie=b2(M)}catch(Ne){if(D)throw B(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ne.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ie};t.getImageProperties=function(I){var D,M,ie="";if(m(I)&&(I=p(I)),typeof I=="string"&&i(I)===r&&((ie=O(I,!1))===""&&(ie=t.loadFile(I)||""),I=ie),M=i(I),!d(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(I instanceof Uint8Array||(I=P(I)),!(D=this["process"+M.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=M,D}})(gr.API),(function(t){var e=function(r){if(r!==void 0&&r!="")return!0};gr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,f=!1,d=0;d<c.length&&!f;d++)switch((n=c[d]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var m=0;m<c.length;m++){n=c[m];var p=this.internal.pdfEscape,_=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(w.objId),F=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(k(n.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(k(F))+") >>",w.content=s;var N=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(w.objId,"0 R",b.objId,"0 R");break;case"freetext":i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var B=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(_(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+B+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var X=this.annotations._nameMap[n.options.name];n.options.pageNumber=X.page,n.options.top=X.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(_(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var G=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+G+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,i,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:c(n),w:l(r+i),h:c(n+s)},options:a,type:"link"})},t.textWithLink=function(r,n,i,s){var a,o,l=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var f=this.splitTextToSize(r,o).length;a=Math.ceil(c*f)}else o=l,a=c;return this.text(r,n,i,s),i+=.2*c,s.align==="center"&&(n-=l/2),s.align==="right"&&(n-=l),this.link(n,i-c,o,a,s),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(gr.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},o=t.__arabicParser__.isArabicEndLetter=function(w){return a(w)&&s(w)&&e[w.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(w){return a(w)&&i.indexOf(w.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return a(w)&&s(w)&&e[w.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(w){return a(w)&&s(w)&&e[w.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(w){return a(w)&&s(w)&&e[w.charCodeAt(0)].length>=3};var f=t.__arabicParser__.arabicLetterHasMedialForm=function(w){return a(w)&&s(w)&&e[w.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(w){var b=0,k=r,F="",N=0;for(b=0;b<w.length;b+=1)k[w.charCodeAt(b)]!==void 0?(N++,typeof(k=k[w.charCodeAt(b)])=="number"&&(F+=String.fromCharCode(k),k=r,N=0),b===w.length-1&&(k=r,F+=w.charAt(b-(N-1)),b-=N-1,N=0)):(k=r,F+=w.charAt(b-N),b-=N,N=0);return F};t.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&n[w.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(w,b,k){return a(w)?s(w)===!1?-1:!c(w)||!a(b)&&!a(k)||!a(k)&&o(b)||o(w)&&!a(b)||o(w)&&l(b)||o(w)&&o(b)?0:f(w)&&a(b)&&!o(b)&&a(k)&&c(k)?3:o(w)||!a(k)?1:2:-1},p=function(w){var b=0,k=0,F=0,N="",B="",X="",G=(w=w||"").split("\\s+"),P=[];for(b=0;b<G.length;b+=1){for(P.push(""),k=0;k<G[b].length;k+=1)N=G[b][k],B=G[b][k-1],X=G[b][k+1],a(N)?(F=m(N,B,X),P[b]+=F!==-1?String.fromCharCode(e[N.charCodeAt(0)][F]):N):P[b]+=N;P[b]=d(P[b])}return P.join(" ")},_=t.__arabicParser__.processArabic=t.processArabic=function(){var w,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(b)){var F=0;for(k=[],F=0;F<b.length;F+=1)Array.isArray(b[F])?k.push([p(b[F][0]),b[F][1],b[F][2]]):k.push([p(b[F])]);w=k}else w=p(b);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};t.events.push(["preProcessText",_])})(gr.API),gr.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(gr.API),(function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(w){_=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){n.call(this);var f=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),m=c.scaleFactor||this.internal.scaleFactor,p=0,_=0,w=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var k=c.maxWidth;k>0?typeof l=="string"?l=this.splitTextToSize(l,k):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(N,B){return N.concat(b.splitTextToSize(B,k))},[])):l=Array.isArray(l)?l:[l];for(var F=0;F<l.length;F++)p<(w=this.getStringUnitWidth(l[F],{font:d})*f)&&(p=w);return p!==0&&(_=l.length),{w:p/=m,h:Math.max((_*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,p&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-f,l.y+f,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+f,{align:"center",baseline:"top",maxWidth:l.width-f-f}):this.text(l.text,l.x+f,l.y+f,{align:"left",baseline:"top",maxWidth:l.width-f-f})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,f,d,m){if(n.call(this),!f)throw new Error("No data for PDF table.");var p,_,w,b,k=[],F=[],N=[],B={},X={},G=[],P=[],A=(m=m||{}).autoSize||!1,T=m.printHeaders!==!1,O=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,I=m.margins||Object.assign({width:this.getPageWidth()},e),D=typeof m.padding=="number"?m.padding:3,M=m.headerBackgroundColor||"#c8c8c8",ie=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=ie,this.setFontSize(O),d==null)F=k=Object.keys(f[0]),N=k.map(function(){return"left"});else if(Array.isArray(d)&&zn(d[0])==="object")for(k=d.map(function(ue){return ue.name}),F=d.map(function(ue){return ue.prompt||ue.name||""}),N=d.map(function(ue){return ue.align||"left"}),p=0;p<d.length;p+=1)X[d[p].name]=.7499990551181103*d[p].width;else Array.isArray(d)&&typeof d[0]=="string"&&(F=k=d,N=k.map(function(){return"left"}));if(A||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<k.length;p+=1){for(B[b=k[p]]=f.map(function(ue){return ue[b]}),this.setFont(void 0,"bold"),G.push(this.getTextDimensions(F[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=B[b],this.setFont(void 0,"normal"),w=0;w<_.length;w+=1)G.push(this.getTextDimensions(_[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);X[b]=Math.max.apply(null,G)+D+D,G=[]}if(T){var be={};for(p=0;p<k.length;p+=1)be[k[p]]={},be[k[p]].text=F[p],be[k[p]].align=N[p];var Ne=o.call(this,be,X);P=k.map(function(ue){return new s(l,c,X[ue],Ne,be[ue].text,void 0,be[ue].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var we=d.reduce(function(ue,ee){return ue[ee.name]=ee.align,ue},{});for(p=0;p<f.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:f[p]},this);var le=o.call(this,f[p],X);for(w=0;w<k.length;w+=1){var J=f[p][k[w]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:w,data:J},this),a.call(this,new s(l,c,X[k[w]],le,J,p+2,we[k[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var f=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(p){var _=l[p];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,c[p]-f-f)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/m+f+f},this).reduce(function(p,_){return Math.max(p,_)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){f=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(f.y=this.internal.__cell__.margins.top||0,m.push(f)),f.lineNumber=l;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,f),this.setTextColor(_)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}})(gr.API);var P9={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},R9=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],H5=N9(R9),F9=[100,200,300,400,500,600,700,800,900],$ue=N9(F9);function w_(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=(function(s){return P9[s=s||"normal"]?s:"normal"})(t.style),n=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(t.weight),i=(function(s){return typeof H5[s=s||"normal"]=="number"?s:"normal"})(t.stretch);return{family:e,style:r,weight:n,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,n].join(" ")}}}function RA(t,e,r,n){var i;for(i=r;i>=0&&i<e.length;i+=n)if(t[e[i]])return t[e[i]];for(i=r;i>=0&&i<e.length;i-=n)if(t[e[i]])return t[e[i]]}var Hue={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},FA={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function LA(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function DA(t){return t.trimLeft()}function Wue(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function que(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var r2,OA,MA,O0,n2,jA,BA,VA,__=["times"];function UA(t,e,r,n){var i=4,s=$A;switch(n){case gr.API.image_compression.FAST:i=1,s=zA;break;case gr.API.image_compression.MEDIUM:i=6,s=HA;break;case gr.API.image_compression.SLOW:i=9,s=WA}t=(function(o,l,c,f){for(var d,m=o.length/l,p=new Uint8Array(o.length+m),_=[Gue,zA,$A,HA,WA],w=0;w<m;w+=1){var b=w*l,k=o.subarray(b,b+l);if(f)p.set(f(k,c,d),b+w);else{for(var F=_.length,N=[],B=0;B<F;B+=1)N[B]=_[B](k,c,d);var X=Xue(N.concat());p.set(N[X],b+w)}d=k}return p})(t,e,r,s);var a=M5(t,{level:i});return gr.API.__addimage__.arrayBufferToBinaryString(a)}function Gue(t){var e=Array.apply([],t);return e.unshift(0),e}function zA(t,e){var r=t.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var s=t[i-e]||0;n[i+1]=t[i]-s+256&255}return n}function $A(t,e,r){var n=t.length,i=[];i[0]=2;for(var s=0;s<n;s+=1){var a=r&&r[s]||0;i[s+1]=t[s]-a+256&255}return i}function HA(t,e,r){var n=t.length,i=[];i[0]=3;for(var s=0;s<n;s+=1){var a=t[s-e]||0,o=r&&r[s]||0;i[s+1]=t[s]+256-(a+o>>>1)&255}return i}function WA(t,e,r){var n=t.length,i=[];i[0]=4;for(var s=0;s<n;s+=1){var a=Kue(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);i[s+1]=t[s]-a+256&255}return i}function Kue(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),i=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=i&&n<=s?t:i<=s?e:r}function Xue(t){var e=t.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function b_(t,e,r){var n=e*r,i=Math.floor(n/8),s=16-(n-8*i+r),a=(1<<r)-1;return L9(t,i)>>s&a}function qA(t,e,r,n){var i=r*n,s=Math.floor(i/8),a=16-(i-8*s+n),o=(1<<n)-1,l=(e&o)<<a;(function(c,f,d){if(f+1<c.byteLength)c.setUint16(f,d,!1);else{var m=d>>8&255;c.setUint8(f,m)}})(t,s,L9(t,s)&~(o<<a)&65535|l)}function L9(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function Yue(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,a=1<<1+(7&i);t[e++],t[e++];var o=null,l=null;s&&(o=e,l=a,e+=3*a);var c=!0,f=[],d=0,m=null,p=0,_=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,_=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=t[e++];d=t[e++]|t[e++]<<8,m=t[e++],1&w||(m=null),p=w>>2&7,e++;break;case 254:for(;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var b=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,F=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,B=t[e++],X=B>>6&1,G=1<<1+(7&B),P=o,A=l,T=!1;B>>7&&(T=!0,P=e,A=G,e+=3*G);var O=e;for(e++;;){var I;if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}f.push({x:b,y:k,width:F,height:N,has_local_palette:T,palette_offset:P,palette_size:A,data_offset:O,data_length:e-O,transparent_index:m,interlaced:!!X,delay:d,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return _},this.frameInfo=function(D){if(D<0||D>=f.length)throw new Error("Frame index out of range.");return f[D]},this.decodeAndBlitFrameBGRA=function(D,M){var ie=this.frameInfo(D),be=ie.width*ie.height,Ne=new Uint8Array(be);GA(t,ie.data_offset,Ne,be);var we=ie.palette_offset,le=ie.transparent_index;le===null&&(le=256);var J=ie.width,ue=r-J,ee=J,C=4*(ie.y*r+ie.x),U=4*((ie.y+ie.height)*r+ie.x),W=C,Y=4*ue;ie.interlaced===!0&&(Y+=4*r*7);for(var ae=8,pe=0,he=Ne.length;pe<he;++pe){var xe=Ne[pe];if(ee===0&&(ee=J,(W+=Y)>=U&&(Y=4*ue+4*r*(ae-1),W=C+(J+ue)*(ae<<1),ae>>=1)),xe===le)W+=4;else{var Ee=t[we+3*xe],Fe=t[we+3*xe+1],oe=t[we+3*xe+2];M[W++]=oe,M[W++]=Fe,M[W++]=Ee,M[W++]=255}--ee}},this.decodeAndBlitFrameRGBA=function(D,M){var ie=this.frameInfo(D),be=ie.width*ie.height,Ne=new Uint8Array(be);GA(t,ie.data_offset,Ne,be);var we=ie.palette_offset,le=ie.transparent_index;le===null&&(le=256);var J=ie.width,ue=r-J,ee=J,C=4*(ie.y*r+ie.x),U=4*((ie.y+ie.height)*r+ie.x),W=C,Y=4*ue;ie.interlaced===!0&&(Y+=4*r*7);for(var ae=8,pe=0,he=Ne.length;pe<he;++pe){var xe=Ne[pe];if(ee===0&&(ee=J,(W+=Y)>=U&&(Y=4*ue+4*r*(ae-1),W=C+(J+ue)*(ae<<1),ae>>=1)),xe===le)W+=4;else{var Ee=t[we+3*xe],Fe=t[we+3*xe+1],oe=t[we+3*xe+2];M[W++]=Ee,M[W++]=Fe,M[W++]=oe,M[W++]=255}--ee}}}function GA(t,e,r,n){for(var i=t[e++],s=1<<i,a=s+1,o=a+1,l=i+1,c=(1<<l)-1,f=0,d=0,m=0,p=t[e++],_=new Int32Array(4096),w=null;;){for(;f<16&&p!==0;)d|=t[e++]<<f,f+=8,p===1?p=t[e++]:--p;if(f<l)break;var b=d&c;if(d>>=l,f-=l,b!==s){if(b===a)break;for(var k=b<o?b:w,F=0,N=k;N>s;)N=_[N]>>8,++F;var B=N;if(m+F+(k!==b?1:0)>n)return void ti.log("Warning, gif stream longer than expected.");r[m++]=B;var X=m+=F;for(k!==b&&(r[m++]=B),N=k;F--;)N=_[N],r[--X]=255&N,N>>=8;w!==null&&o<4096&&(_[o++]=w<<8|B,o>=c+1&&l<12&&(++l,c=c<<1|1)),w=b}else o=a+1,c=(1<<(l=i+1))-1,w=null}return m!==n&&ti.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function E_(t){var e,r,n,i,s,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),f=new Array(64),d=new Array(65535),m=new Array(65535),p=new Array(64),_=new Array(64),w=[],b=0,k=7,F=new Array(64),N=new Array(64),B=new Array(64),X=new Array(256),G=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],ie=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],be=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ne(C,U){for(var W=0,Y=0,ae=new Array,pe=1;pe<=16;pe++){for(var he=1;he<=C[pe];he++)ae[U[Y]]=[],ae[U[Y]][0]=W,ae[U[Y]][1]=pe,Y++,W++;W*=2}return ae}function we(C){for(var U=C[0],W=C[1]-1;W>=0;)U&1<<W&&(b|=1<<k),W--,--k<0&&(b==255?(le(255),le(0)):le(b),k=7,b=0)}function le(C){w.push(C)}function J(C){le(C>>8&255),le(255&C)}function ue(C,U,W,Y,ae){for(var pe,he=ae[0],xe=ae[240],Ee=(function(K,Te){var Ue,ut,pt,xt,yt,ht,Mt,Lt,Ot,wt,Nt=0;for(Ot=0;Ot<8;++Ot){Ue=K[Nt],ut=K[Nt+1],pt=K[Nt+2],xt=K[Nt+3],yt=K[Nt+4],ht=K[Nt+5],Mt=K[Nt+6];var cr=Ue+(Lt=K[Nt+7]),er=Ue-Lt,qt=ut+Mt,wr=ut-Mt,rn=pt+ht,Me=pt-ht,jt=xt+yt,Vt=xt-yt,tr=cr+jt,sr=cr-jt,ur=qt+rn,Yt=qt-rn;K[Nt]=tr+ur,K[Nt+4]=tr-ur;var mr=.707106781*(Yt+sr);K[Nt+2]=sr+mr,K[Nt+6]=sr-mr;var an=.382683433*((tr=Vt+Me)-(Yt=wr+er)),Ur=.5411961*tr+an,Cn=1.306562965*Yt+an,In=.707106781*(ur=Me+wr),nr=er+In,Hr=er-In;K[Nt+5]=Hr+Ur,K[Nt+3]=Hr-Ur,K[Nt+1]=nr+Cn,K[Nt+7]=nr-Cn,Nt+=8}for(Nt=0,Ot=0;Ot<8;++Ot){Ue=K[Nt],ut=K[Nt+8],pt=K[Nt+16],xt=K[Nt+24],yt=K[Nt+32],ht=K[Nt+40],Mt=K[Nt+48];var ns=Ue+(Lt=K[Nt+56]),Dn=Ue-Lt,$i=ut+Mt,bn=ut-Mt,Jn=pt+ht,re=pt-ht,Ae=xt+yt,ve=xt-yt,ye=ns+Ae,Ce=ns-Ae,Ie=$i+Jn,He=$i-Jn;K[Nt]=ye+Ie,K[Nt+32]=ye-Ie;var tt=.707106781*(He+Ce);K[Nt+16]=Ce+tt,K[Nt+48]=Ce-tt;var Ge=.382683433*((ye=ve+re)-(He=bn+Dn)),Ke=.5411961*ye+Ge,Qe=1.306562965*He+Ge,_t=.707106781*(Ie=re+bn),Ft=Dn+_t,Ht=Dn-_t;K[Nt+40]=Ht+Ke,K[Nt+24]=Ht-Ke,K[Nt+8]=Ft+Qe,K[Nt+56]=Ft-Qe,Nt++}for(Ot=0;Ot<64;++Ot)wt=K[Ot]*Te[Ot],p[Ot]=wt>0?wt+.5|0:wt-.5|0;return p})(C,U),Fe=0;Fe<64;++Fe)_[P[Fe]]=Ee[Fe];var oe=_[0]-W;W=_[0],oe==0?we(Y[0]):(we(Y[m[pe=32767+oe]]),we(d[pe]));for(var Je=63;Je>0&&_[Je]==0;)Je--;if(Je==0)return we(he),W;for(var Re,fe=1;fe<=Je;){for(var ot=fe;_[fe]==0&&fe<=Je;)++fe;var et=fe-ot;if(et>=16){Re=et>>4;for(var st=1;st<=Re;++st)we(xe);et&=15}pe=32767+_[fe],we(ae[(et<<4)+m[pe]]),we(d[pe]),fe++}return Je!=63&&we(he),W}function ee(C){C=Math.min(Math.max(C,1),100),s!=C&&((function(U){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Y=0;Y<64;Y++){var ae=a((W[Y]*U+50)/100);ae=Math.min(Math.max(ae,1),255),o[P[Y]]=ae}for(var pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var xe=a((pe[he]*U+50)/100);xe=Math.min(Math.max(xe,1),255),l[P[he]]=xe}for(var Ee=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Fe=0,oe=0;oe<8;oe++)for(var Je=0;Je<8;Je++)c[Fe]=1/(o[P[Fe]]*Ee[oe]*Ee[Je]*8),f[Fe]=1/(l[P[Fe]]*Ee[oe]*Ee[Je]*8),Fe++})(C<50?Math.floor(5e3/C):Math.floor(200-2*C)),s=C)}this.encode=function(C,U){U&&ee(U),w=new Array,b=0,k=7,J(65496),J(65504),J(16),le(74),le(70),le(73),le(70),le(0),le(1),le(1),le(0),J(1),J(1),le(0),le(0),(function(){J(65499),J(132),le(0);for(var ut=0;ut<64;ut++)le(o[ut]);le(1);for(var pt=0;pt<64;pt++)le(l[pt])})(),(function(ut,pt){J(65472),J(17),le(8),J(pt),J(ut),le(3),le(1),le(17),le(0),le(2),le(17),le(1),le(3),le(17),le(1)})(C.width,C.height),(function(){J(65476),J(418),le(0);for(var ut=0;ut<16;ut++)le(A[ut+1]);for(var pt=0;pt<=11;pt++)le(T[pt]);le(16);for(var xt=0;xt<16;xt++)le(O[xt+1]);for(var yt=0;yt<=161;yt++)le(I[yt]);le(1);for(var ht=0;ht<16;ht++)le(D[ht+1]);for(var Mt=0;Mt<=11;Mt++)le(M[Mt]);le(17);for(var Lt=0;Lt<16;Lt++)le(ie[Lt+1]);for(var Ot=0;Ot<=161;Ot++)le(be[Ot])})(),J(65498),J(12),le(3),le(1),le(0),le(2),le(17),le(3),le(17),le(0),le(63),le(0);var W=0,Y=0,ae=0;b=0,k=7,this.encode.displayName="_encode_";for(var pe,he,xe,Ee,Fe,oe,Je,Re,fe,ot=C.data,et=C.width,st=C.height,K=4*et,Te=0;Te<st;){for(pe=0;pe<K;){for(Fe=K*Te+pe,Je=-1,Re=0,fe=0;fe<64;fe++)oe=Fe+(Re=fe>>3)*K+(Je=4*(7&fe)),Te+Re>=st&&(oe-=K*(Te+1+Re-st)),pe+Je>=K&&(oe-=pe+Je-K+4),he=ot[oe++],xe=ot[oe++],Ee=ot[oe++],F[fe]=(G[he]+G[xe+256|0]+G[Ee+512|0]>>16)-128,N[fe]=(G[he+768|0]+G[xe+1024|0]+G[Ee+1280|0]>>16)-128,B[fe]=(G[he+1280|0]+G[xe+1536|0]+G[Ee+1792|0]>>16)-128;W=ue(F,c,W,e,n),Y=ue(N,f,Y,r,i),ae=ue(B,f,ae,r,i),pe+=32}Te+=8}if(k>=0){var Ue=[];Ue[1]=k+1,Ue[0]=(1<<k+1)-1,we(Ue)}return J(65497),new Uint8Array(w)},t=t||50,(function(){for(var C=String.fromCharCode,U=0;U<256;U++)X[U]=C(U)})(),e=Ne(A,T),r=Ne(D,M),n=Ne(O,I),i=Ne(ie,be),(function(){for(var C=1,U=2,W=1;W<=15;W++){for(var Y=C;Y<U;Y++)m[32767+Y]=W,d[32767+Y]=[],d[32767+Y][1]=W,d[32767+Y][0]=Y;for(var ae=-(U-1);ae<=-C;ae++)m[32767+ae]=W,d[32767+ae]=[],d[32767+ae][1]=W,d[32767+ae][0]=U-1+ae;C<<=1,U<<=1}})(),(function(){for(var C=0;C<256;C++)G[C]=19595*C,G[C+256|0]=38470*C,G[C+512|0]=7471*C+32768,G[C+768|0]=-11059*C,G[C+1024|0]=-21709*C,G[C+1280|0]=32768*C+8421375,G[C+1536|0]=-27439*C,G[C+1792|0]=-5329*C})(),ee(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ic(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function KA(t){function e(T){if(!T)throw Error("assert :P")}function r(T,O,I){for(var D=0;4>D;D++)if(T[O+D]!=I.charCodeAt(D))return!0;return!1}function n(T,O,I,D,M){for(var ie=0;ie<M;ie++)T[O+ie]=I[D+ie]}function i(T,O,I,D){for(var M=0;M<D;M++)T[O+M]=I}function s(T){return new Int32Array(T)}function a(T,O){for(var I=[],D=0;D<T;D++)I.push(new O);return I}function o(T,O){var I=[];return(function D(M,ie,be){for(var Ne=be[ie],we=0;we<Ne&&(M.push(be.length>ie+1?[]:new O),!(be.length<ie+1));we++)D(M[we],ie+1,be)})(I,0,T),I}var l=function(){var T=this;function O(v,S){for(var j=1<<S-1>>>0;v&j;)j>>>=1;return j?(v&j-1)+j:v}function I(v,S,j,q,te){e(!(q%j));do v[S+(q-=j)]=te;while(0<q)}function D(v,S,j,q,te){if(e(2328>=te),512>=te)var se=s(512);else if((se=s(te))==null)return 0;return(function(ce,de,ge,_e,De,qe){var ke,je,$e=de,ct=1<<ge,Ye=s(16),at=s(16);for(e(De!=0),e(_e!=null),e(ce!=null),e(0<ge),je=0;je<De;++je){if(15<_e[je])return 0;++Ye[_e[je]]}if(Ye[0]==De)return 0;for(at[1]=0,ke=1;15>ke;++ke){if(Ye[ke]>1<<ke)return 0;at[ke+1]=at[ke]+Ye[ke]}for(je=0;je<De;++je)ke=_e[je],0<_e[je]&&(qe[at[ke]++]=je);if(at[15]==1)return(_e=new M).g=0,_e.value=qe[0],I(ce,$e,1,ct,_e),ct;var lt,mt=-1,gt=ct-1,hr=0,Jt=1,Or=1,ir=1<<ge;for(je=0,ke=1,De=2;ke<=ge;++ke,De<<=1){if(Jt+=Or<<=1,0>(Or-=Ye[ke]))return 0;for(;0<Ye[ke];--Ye[ke])(_e=new M).g=ke,_e.value=qe[je++],I(ce,$e+hr,De,ir,_e),hr=O(hr,ke)}for(ke=ge+1,De=2;15>=ke;++ke,De<<=1){if(Jt+=Or<<=1,0>(Or-=Ye[ke]))return 0;for(;0<Ye[ke];--Ye[ke]){if(_e=new M,(hr&gt)!=mt){for($e+=ir,lt=1<<(mt=ke)-ge;15>mt&&!(0>=(lt-=Ye[mt]));)++mt,lt<<=1;ct+=ir=1<<(lt=mt-ge),ce[de+(mt=hr&gt)].g=lt+ge,ce[de+mt].value=$e-de-mt}_e.g=ke-ge,_e.value=qe[je++],I(ce,$e+(hr>>ge),De,ir,_e),hr=O(hr,ke)}}return Jt!=2*at[15]-1?0:ct})(v,S,j,q,te,se)}function M(){this.value=this.g=0}function ie(){this.value=this.g=0}function be(){this.G=a(5,M),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(pa,ie)}function Ne(v,S,j,q){e(v!=null),e(S!=null),e(2147483648>q),v.Ca=254,v.I=0,v.b=-8,v.Ka=0,v.oa=S,v.pa=j,v.Jd=S,v.Yc=j+q,v.Zc=4<=q?j+q-4+1:j,he(v)}function we(v,S){for(var j=0;0<S--;)j|=Ee(v,128)<<S;return j}function le(v,S){var j=we(v,S);return xe(v)?-j:j}function J(v,S,j,q){var te,se=0;for(e(v!=null),e(S!=null),e(4294967288>q),v.Sb=q,v.Ra=0,v.u=0,v.h=0,4<q&&(q=4),te=0;te<q;++te)se+=S[j+te]<<8*te;v.Ra=se,v.bb=q,v.oa=S,v.pa=j}function ue(v){for(;8<=v.u&&v.bb<v.Sb;)v.Ra>>>=8,v.Ra+=v.oa[v.pa+v.bb]<<Ec-8>>>0,++v.bb,v.u-=8;Y(v)&&(v.h=1,v.u=0)}function ee(v,S){if(e(0<=S),!v.h&&S<=Rh){var j=W(v)&bc[S];return v.u+=S,ue(v),j}return v.h=1,v.u=0}function C(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function U(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(v){return v.Ra>>>(v.u&Ec-1)>>>0}function Y(v){return e(v.bb<=v.Sb),v.h||v.bb==v.Sb&&v.u>Ec}function ae(v,S){v.u=S,v.h=Y(v)}function pe(v){v.u>=_i&&(e(v.u>=_i),ue(v))}function he(v){e(v!=null&&v.oa!=null),v.pa<v.Zc?(v.I=(v.oa[v.pa++]|v.I<<8)>>>0,v.b+=8):(e(v!=null&&v.oa!=null),v.pa<v.Yc?(v.b+=8,v.I=v.oa[v.pa++]|v.I<<8):v.Ka?v.b=0:(v.I<<=8,v.b+=8,v.Ka=1))}function xe(v){return we(v,1)}function Ee(v,S){var j=v.Ca;0>v.b&&he(v);var q=v.b,te=j*S>>>8,se=(v.I>>>q>te)+0;for(se?(j-=te,v.I-=te+1<<q>>>0):j=te+1,q=j,te=0;256<=q;)te+=8,q>>=8;return q=7^te+n0[q],v.b-=q,v.Ca=(j<<q)-1,se}function Fe(v,S,j){v[S+0]=j>>24&255,v[S+1]=j>>16&255,v[S+2]=j>>8&255,v[S+3]=255&j}function oe(v,S){return v[S+0]|v[S+1]<<8}function Je(v,S){return oe(v,S)|v[S+2]<<16}function Re(v,S){return oe(v,S)|oe(v,S+2)<<16}function fe(v,S){var j=1<<S;return e(v!=null),e(0<S),v.X=s(j),v.X==null?0:(v.Mb=32-S,v.Xa=S,1)}function ot(v,S){e(v!=null),e(S!=null),e(v.Xa==S.Xa),n(S.X,0,v.X,0,1<<S.Xa)}function et(){this.X=[],this.Xa=this.Mb=0}function st(v,S,j,q){e(j!=null),e(q!=null);var te=j[0],se=q[0];return te==0&&(te=(v*se+S/2)/S),se==0&&(se=(S*te+v/2)/v),0>=te||0>=se?0:(j[0]=te,q[0]=se,1)}function K(v,S){return v+(1<<S)-1>>>S}function Te(v,S){return((4278255360&v)+(4278255360&S)>>>0&4278255360)+((16711935&v)+(16711935&S)>>>0&16711935)>>>0}function Ue(v,S){T[S]=function(j,q,te,se,ce,de,ge){var _e;for(_e=0;_e<ce;++_e){var De=T[v](de[ge+_e-1],te,se+_e);de[ge+_e]=Te(j[q+_e],De)}}}function ut(){this.ud=this.hd=this.jd=0}function pt(v,S){return((4278124286&(v^S))>>>1)+(v&S)>>>0}function xt(v){return 0<=v&&256>v?v:0>v?0:255<v?255:void 0}function yt(v,S){return xt(v+(v-S+.5>>1))}function ht(v,S,j){return Math.abs(S-j)-Math.abs(v-j)}function Mt(v,S,j,q,te,se,ce){for(q=se[ce-1],j=0;j<te;++j)se[ce+j]=q=Te(v[S+j],q)}function Lt(v,S,j,q,te){var se;for(se=0;se<j;++se){var ce=v[S+se],de=ce>>8&255,ge=16711935&(ge=(ge=16711935&ce)+((de<<16)+de));q[te+se]=(4278255360&ce)+ge>>>0}}function Ot(v,S){S.jd=255&v,S.hd=v>>8&255,S.ud=v>>16&255}function wt(v,S,j,q,te,se){var ce;for(ce=0;ce<q;++ce){var de=S[j+ce],ge=de>>>8,_e=de,De=255&(De=(De=de>>>16)+((v.jd<<24>>24)*(ge<<24>>24)>>>5));_e=255&(_e=(_e+=(v.hd<<24>>24)*(ge<<24>>24)>>>5)+((v.ud<<24>>24)*(De<<24>>24)>>>5)),te[se+ce]=(4278255360&de)+(De<<16)+_e}}function Nt(v,S,j,q,te){T[S]=function(se,ce,de,ge,_e,De,qe,ke,je){for(ge=qe;ge<ke;++ge)for(qe=0;qe<je;++qe)_e[De++]=te(de[q(se[ce++])])},T[v]=function(se,ce,de,ge,_e,De,qe){var ke=8>>se.b,je=se.Ea,$e=se.K[0],ct=se.w;if(8>ke)for(se=(1<<se.b)-1,ct=(1<<ke)-1;ce<de;++ce){var Ye,at=0;for(Ye=0;Ye<je;++Ye)Ye&se||(at=q(ge[_e++])),De[qe++]=te($e[at&ct]),at>>=ke}else T["VP8LMapColor"+j](ge,_e,$e,ct,De,qe,ce,de,je)}}function cr(v,S,j,q,te){for(j=S+j;S<j;){var se=v[S++];q[te++]=se>>16&255,q[te++]=se>>8&255,q[te++]=255&se}}function er(v,S,j,q,te){for(j=S+j;S<j;){var se=v[S++];q[te++]=se>>16&255,q[te++]=se>>8&255,q[te++]=255&se,q[te++]=se>>24&255}}function qt(v,S,j,q,te){for(j=S+j;S<j;){var se=(ce=v[S++])>>16&240|ce>>12&15,ce=240&ce|ce>>28&15;q[te++]=se,q[te++]=ce}}function wr(v,S,j,q,te){for(j=S+j;S<j;){var se=(ce=v[S++])>>16&248|ce>>13&7,ce=ce>>5&224|ce>>3&31;q[te++]=se,q[te++]=ce}}function rn(v,S,j,q,te){for(j=S+j;S<j;){var se=v[S++];q[te++]=255&se,q[te++]=se>>8&255,q[te++]=se>>16&255}}function Me(v,S,j,q,te,se){if(se==0)for(j=S+j;S<j;)Fe(q,((se=v[S++])[0]>>24|se[1]>>8&65280|se[2]<<8&16711680|se[3]<<24)>>>0),te+=32;else n(q,te,v,S,j)}function jt(v,S){T[S][0]=T[v+"0"],T[S][1]=T[v+"1"],T[S][2]=T[v+"2"],T[S][3]=T[v+"3"],T[S][4]=T[v+"4"],T[S][5]=T[v+"5"],T[S][6]=T[v+"6"],T[S][7]=T[v+"7"],T[S][8]=T[v+"8"],T[S][9]=T[v+"9"],T[S][10]=T[v+"10"],T[S][11]=T[v+"11"],T[S][12]=T[v+"12"],T[S][13]=T[v+"13"],T[S][14]=T[v+"0"],T[S][15]=T[v+"0"]}function Vt(v){return v==hf||v==gu||v==Mh||v==jh}function tr(){this.eb=[],this.size=this.A=this.fb=0}function sr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ur(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new tr,this.f.kb=new sr,this.sd=null}function Yt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function mr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function an(v){return alert("todo:WebPSamplerProcessPlane"),v.T}function Ur(v,S){var j=v.T,q=S.ba.f.RGBA,te=q.eb,se=q.fb+v.ka*q.A,ce=Ba[S.ba.S],de=v.y,ge=v.O,_e=v.f,De=v.N,qe=v.ea,ke=v.W,je=S.cc,$e=S.dc,ct=S.Mc,Ye=S.Nc,at=v.ka,lt=v.ka+v.T,mt=v.U,gt=mt+1>>1;for(at==0?ce(de,ge,null,null,_e,De,qe,ke,_e,De,qe,ke,te,se,null,null,mt):(ce(S.ec,S.fc,de,ge,je,$e,ct,Ye,_e,De,qe,ke,te,se-q.A,te,se,mt),++j);at+2<lt;at+=2)je=_e,$e=De,ct=qe,Ye=ke,De+=v.Rc,ke+=v.Rc,se+=2*q.A,ce(de,(ge+=2*v.fa)-v.fa,de,ge,je,$e,ct,Ye,_e,De,qe,ke,te,se-q.A,te,se,mt);return ge+=v.fa,v.j+lt<v.o?(n(S.ec,S.fc,de,ge,mt),n(S.cc,S.dc,_e,De,gt),n(S.Mc,S.Nc,qe,ke,gt),j--):1&lt||ce(de,ge,null,null,_e,De,qe,ke,_e,De,qe,ke,te,se+q.A,null,null,mt),j}function Cn(v,S,j){var q=v.F,te=[v.J];if(q!=null){var se=v.U,ce=S.ba.S,de=ce==Oh||ce==Mh;S=S.ba.f.RGBA;var ge=[0],_e=v.ka;ge[0]=v.T,v.Kb&&(_e==0?--ge[0]:(--_e,te[0]-=v.width),v.j+v.ka+v.T==v.o&&(ge[0]=v.o-v.j-_e));var De=S.eb;_e=S.fb+_e*S.A,v=Lh(q,te[0],v.width,se,ge,De,_e+(de?0:3),S.A),e(j==ge),v&&Vt(ce)&&mu(De,_e,de,se,ge,S.A)}return 0}function In(v){var S=v.ma,j=S.ba.S,q=11>j,te=j==kc||j==Dh||j==Oh||j==On||j==12||Vt(j);if(S.memory=null,S.Ib=null,S.Jb=null,S.Nd=null,!ha(S.Oa,v,te?11:12))return 0;if(te&&Vt(j)&&wc(),v.da)alert("todo:use_scaling");else{if(q){if(S.Ib=an,v.Kb){if(j=v.U+1>>1,S.memory=s(v.U+2*j),S.memory==null)return 0;S.ec=S.memory,S.fc=0,S.cc=S.ec,S.dc=S.fc+v.U,S.Mc=S.cc,S.Nc=S.dc+j,S.Ib=Ur,wc()}}else alert("todo:EmitYUV");te&&(S.Jb=Cn,q&&Ri())}if(q&&!js){for(v=0;256>v;++v)Va[v]=89858*(v-128)+Ko>>Kl,Ua[v]=-22014*(v-128)+Ko,gf[v]=-45773*(v-128),wu[v]=113618*(v-128)+Ko>>Kl;for(v=An;v<Rn;++v)S=76283*(v-16)+Ko>>Kl,f0[v-An]=Qr(S,255),Gg[v-An]=Qr(S+8>>4,15);js=1}return 1}function nr(v){var S=v.ma,j=v.U,q=v.T;return e(!(1&v.ka)),0>=j||0>=q?0:(j=S.Ib(v,S),S.Jb!=null&&S.Jb(v,S,j),S.Dc+=j,1)}function Hr(v){v.ma.memory=null}function ns(v,S,j,q){return ee(v,8)!=47?0:(S[0]=ee(v,14)+1,j[0]=ee(v,14)+1,q[0]=ee(v,1),ee(v,3)!=0?0:!v.h)}function Dn(v,S){if(4>v)return v+1;var j=v-2>>1;return(2+(1&v)<<j)+ee(S,j)+1}function $i(v,S){return 120<S?S-120:1<=(j=((j=Sy[S-1])>>4)*v+(8-(15&j)))?j:1;var j}function bn(v,S,j){var q=W(j),te=v[S+=255&q].g-8;return 0<te&&(ae(j,j.u+8),q=W(j),S+=v[S].value,S+=q&(1<<te)-1),ae(j,j.u+v[S].g),v[S].value}function Jn(v,S,j){return j.g+=v.g,j.value+=v.value<<S>>>0,e(8>=j.g),v.g}function re(v,S,j){var q=v.xc;return e((S=q==0?0:v.vc[v.md*(j>>q)+(S>>q)])<v.Wb),v.Ya[S]}function Ae(v,S,j,q){var te=v.ab,se=v.c*S,ce=v.C;S=ce+S;var de=j,ge=q;for(q=v.Ta,j=v.Ua;0<te--;){var _e=v.gc[te],De=ce,qe=S,ke=de,je=ge,$e=(ge=q,de=j,_e.Ea);switch(e(De<qe),e(qe<=_e.nc),_e.hc){case 2:af(ke,je,(qe-De)*$e,ge,de);break;case 0:var ct=De,Ye=qe,at=ge,lt=de,mt=(ir=_e).Ea;ct==0&&(Da(ke,je,null,null,1,at,lt),Mt(ke,je+1,0,0,mt-1,at,lt+1),je+=mt,lt+=mt,++ct);for(var gt=1<<ir.b,hr=gt-1,Jt=K(mt,ir.b),Or=ir.K,ir=ir.w+(ct>>ir.b)*Jt;ct<Ye;){var Jr=Or,bi=ir,Mr=1;for(Oa(ke,je,at,lt-mt,1,at,lt);Mr<mt;){var Zt=(Mr&~hr)+gt;Zt>mt&&(Zt=mt),(0,Gl[Jr[bi++]>>8&15])(ke,je+ +Mr,at,lt+Mr-mt,Zt-Mr,at,lt+Mr),Mr=Zt}je+=mt,lt+=mt,++ct&hr||(ir+=Jt)}qe!=_e.nc&&n(ge,de-$e,ge,de+(qe-De-1)*$e,$e);break;case 1:for($e=ke,Ye=je,mt=(ke=_e.Ea)-(lt=ke&~(at=(je=1<<_e.b)-1)),ct=K(ke,_e.b),gt=_e.K,_e=_e.w+(De>>_e.b)*ct;De<qe;){for(hr=gt,Jt=_e,Or=new ut,ir=Ye+lt,Jr=Ye+ke;Ye<ir;)Ot(hr[Jt++],Or),gl(Or,$e,Ye,je,ge,de),Ye+=je,de+=je;Ye<Jr&&(Ot(hr[Jt++],Or),gl(Or,$e,Ye,mt,ge,de),Ye+=mt,de+=mt),++De&at||(_e+=ct)}break;case 3:if(ke==ge&&je==de&&0<_e.b){for(Ye=ge,ke=$e=de+(qe-De)*$e-(lt=(qe-De)*K(_e.Ea,_e.b)),je=ge,at=de,ct=[],lt=(mt=lt)-1;0<=lt;--lt)ct[lt]=je[at+lt];for(lt=mt-1;0<=lt;--lt)Ye[ke+lt]=ct[lt];Sc(_e,De,qe,ge,$e,ge,de)}else Sc(_e,De,qe,ke,je,ge,de)}de=q,ge=j}ge!=j&&n(q,j,de,ge,se)}function ve(v,S){var j=v.V,q=v.Ba+v.c*v.C,te=S-v.C;if(e(S<=v.l.o),e(16>=te),0<te){var se=v.l,ce=v.Ta,de=v.Ua,ge=se.width;if(Ae(v,te,j,q),te=de=[de],e((j=v.C)<(q=S)),e(se.v<se.va),q>se.o&&(q=se.o),j<se.j){var _e=se.j-j;j=se.j,te[0]+=_e*ge}if(j>=q?j=0:(te[0]+=4*se.v,se.ka=j-se.j,se.U=se.va-se.v,se.T=q-j,j=1),j){if(de=de[0],11>(j=v.ca).S){var De=j.f.RGBA,qe=(q=j.S,te=se.U,se=se.T,_e=De.eb,De.A),ke=se;for(De=De.fb+v.Ma*De.A;0<ke--;){var je=ce,$e=de,ct=te,Ye=_e,at=De;switch(q){case o0:lf(je,$e,ct,Ye,at);break;case kc:Ma(je,$e,ct,Ye,at);break;case hf:Ma(je,$e,ct,Ye,at),mu(Ye,at,0,ct,1,0);break;case zg:Gn(je,$e,ct,Ye,at);break;case Dh:Me(je,$e,ct,Ye,at,1);break;case gu:Me(je,$e,ct,Ye,at,1),mu(Ye,at,0,ct,1,0);break;case Oh:Me(je,$e,ct,Ye,at,0);break;case Mh:Me(je,$e,ct,Ye,at,0),mu(Ye,at,1,ct,1,0);break;case On:xl(je,$e,ct,Ye,at);break;case jh:xl(je,$e,ct,Ye,at),f1(Ye,at,ct,1,0);break;case l0:qn(je,$e,ct,Ye,at);break;default:e(0)}de+=ge,De+=qe}v.Ma+=se}else alert("todo:EmitRescaledRowsYUVA");e(v.Ma<=j.height)}}v.C=S,e(v.C<=v.i)}function ye(v){var S;if(0<v.ua)return 0;for(S=0;S<v.Wb;++S){var j=v.Ya[S].G,q=v.Ya[S].H;if(0<j[1][q[1]+0].g||0<j[2][q[2]+0].g||0<j[3][q[3]+0].g)return 0}return 1}function Ce(v,S,j,q,te,se){if(v.Z!=0){var ce=v.qd,de=v.rd;for(e(Ks[v.Z]!=null);S<j;++S)Ks[v.Z](ce,de,q,te,q,te,se),ce=q,de=te,te+=se;v.qd=ce,v.rd=de}}function Ie(v,S){var j=v.l.ma,q=j.Z==0||j.Z==1?v.l.j:v.C;if(q=v.C<q?q:v.C,e(S<=v.l.o),S>q){var te=v.l.width,se=j.ca,ce=j.tb+te*q,de=v.V,ge=v.Ba+v.c*q,_e=v.gc;e(v.ab==1),e(_e[0].hc==3),hu(_e[0],q,S,de,ge,se,ce),Ce(j,q,S,se,ce,te)}v.C=v.Ma=S}function He(v,S,j,q,te,se,ce){var de=v.$/q,ge=v.$%q,_e=v.m,De=v.s,qe=j+v.$,ke=qe;te=j+q*te;var je=j+q*se,$e=280+De.ua,ct=v.Pb?de:16777216,Ye=0<De.ua?De.Wa:null,at=De.wc,lt=qe<je?re(De,ge,de):null;e(v.C<se),e(je<=te);var mt=!1;e:for(;;){for(;mt||qe<je;){var gt=0;if(de>=ct){var hr=qe-j;e((ct=v).Pb),ct.wd=ct.m,ct.xd=hr,0<ct.s.ua&&ot(ct.s.Wa,ct.s.vb),ct=de+u0}if(ge&at||(lt=re(De,ge,de)),e(lt!=null),lt.Qb&&(S[qe]=lt.qb,mt=!0),!mt)if(pe(_e),lt.jc){gt=_e,hr=S;var Jt=qe,Or=lt.pd[W(gt)&pa-1];e(lt.jc),256>Or.g?(ae(gt,gt.u+Or.g),hr[Jt]=Or.value,gt=0):(ae(gt,gt.u+Or.g-256),e(256<=Or.value),gt=Or.value),gt==0&&(mt=!0)}else gt=bn(lt.G[0],lt.H[0],_e);if(_e.h)break;if(mt||256>gt){if(!mt)if(lt.nd)S[qe]=(lt.qb|gt<<8)>>>0;else{if(pe(_e),mt=bn(lt.G[1],lt.H[1],_e),pe(_e),hr=bn(lt.G[2],lt.H[2],_e),Jt=bn(lt.G[3],lt.H[3],_e),_e.h)break;S[qe]=(Jt<<24|mt<<16|gt<<8|hr)>>>0}if(mt=!1,++qe,++ge>=q&&(ge=0,++de,ce!=null&&de<=se&&!(de%16)&&ce(v,de),Ye!=null))for(;ke<qe;)gt=S[ke++],Ye.X[(506832829*gt&4294967295)>>>Ye.Mb]=gt}else if(280>gt){if(gt=Dn(gt-256,_e),hr=bn(lt.G[4],lt.H[4],_e),pe(_e),hr=$i(q,hr=Dn(hr,_e)),_e.h)break;if(qe-j<hr||te-qe<gt)break e;for(Jt=0;Jt<gt;++Jt)S[qe+Jt]=S[qe+Jt-hr];for(qe+=gt,ge+=gt;ge>=q;)ge-=q,++de,ce!=null&&de<=se&&!(de%16)&&ce(v,de);if(e(qe<=te),ge&at&&(lt=re(De,ge,de)),Ye!=null)for(;ke<qe;)gt=S[ke++],Ye.X[(506832829*gt&4294967295)>>>Ye.Mb]=gt}else{if(!(gt<$e))break e;for(mt=gt-280,e(Ye!=null);ke<qe;)gt=S[ke++],Ye.X[(506832829*gt&4294967295)>>>Ye.Mb]=gt;gt=qe,e(!(mt>>>(hr=Ye).Xa)),S[gt]=hr.X[mt],mt=!0}mt||e(_e.h==Y(_e))}if(v.Pb&&_e.h&&qe<te)e(v.m.h),v.a=5,v.m=v.wd,v.$=v.xd,0<v.s.ua&&ot(v.s.vb,v.s.Wa);else{if(_e.h)break e;ce?.(v,de>se?se:de),v.a=0,v.$=qe-j}return 1}return v.a=3,0}function tt(v){e(v!=null),v.vc=null,v.yc=null,v.Ya=null;var S=v.Wa;S!=null&&(S.X=null),v.vb=null,e(v!=null)}function Ge(){var v=new Wn;return v==null?null:(v.a=0,v.xb=pf,jt("Predictor","VP8LPredictors"),jt("Predictor","VP8LPredictors_C"),jt("PredictorAdd","VP8LPredictorsAdd"),jt("PredictorAdd","VP8LPredictorsAdd_C"),af=Lt,gl=wt,lf=cr,Ma=er,xl=qt,qn=wr,Gn=rn,T.VP8LMapColor32b=of,T.VP8LMapColor8b=ql,v)}function Ke(v,S,j,q,te){var se=1,ce=[v],de=[S],ge=q.m,_e=q.s,De=null,qe=0;e:for(;;){if(j)for(;se&&ee(ge,1);){var ke=ce,je=de,$e=q,ct=1,Ye=$e.m,at=$e.gc[$e.ab],lt=ee(Ye,2);if($e.Oc&1<<lt)se=0;else{switch($e.Oc|=1<<lt,at.hc=lt,at.Ea=ke[0],at.nc=je[0],at.K=[null],++$e.ab,e(4>=$e.ab),lt){case 0:case 1:at.b=ee(Ye,3)+2,ct=Ke(K(at.Ea,at.b),K(at.nc,at.b),0,$e,at.K),at.K=at.K[0];break;case 3:var mt,gt=ee(Ye,8)+1,hr=16<gt?0:4<gt?1:2<gt?2:3;if(ke[0]=K(at.Ea,hr),at.b=hr,mt=ct=Ke(gt,1,0,$e,at.K)){var Jt,Or=gt,ir=at,Jr=1<<(8>>ir.b),bi=s(Jr);if(bi==null)mt=0;else{var Mr=ir.K[0],Zt=ir.w;for(bi[0]=ir.K[0][0],Jt=1;Jt<1*Or;++Jt)bi[Jt]=Te(Mr[Zt+Jt],bi[Jt-1]);for(;Jt<4*Jr;++Jt)bi[Jt]=0;ir.K[0]=null,ir.K[0]=bi,mt=1}}ct=mt;break;case 2:break;default:e(0)}se=ct}}if(ce=ce[0],de=de[0],se&&ee(ge,1)&&!(se=1<=(qe=ee(ge,4))&&11>=qe)){q.a=3;break e}var zt;if(zt=se)t:{var Di,Cr,Gr,Kn=q,_s=ce,Wi=de,fi=qe,os=j,bs=Kn.m,si=Kn.s,sn=[null],xn=1,ai=0,vn=Hg[fi];r:for(;;){if(os&&ee(bs,1)){var Ei=ee(bs,3)+2,Si=K(_s,Ei),Mn=K(Wi,Ei),Xs=Si*Mn;if(!Ke(Si,Mn,0,Kn,sn))break r;for(sn=sn[0],si.xc=Ei,Di=0;Di<Xs;++Di){var Fn=sn[Di]>>8&65535;sn[Di]=Fn,Fn>=xn&&(xn=Fn+1)}}if(bs.h)break r;for(Cr=0;5>Cr;++Cr){var jn=xu[Cr];!Cr&&0<fi&&(jn+=1<<fi),ai<jn&&(ai=jn)}var qi=a(xn*vn,M),Bs=xn,za=a(Bs,be);if(za==null)var Oi=null;else e(65536>=Bs),Oi=za;var Mi=s(ai);if(Oi==null||Mi==null||qi==null){Kn.a=1;break r}var Ys=qi;for(Di=Gr=0;Di<xn;++Di){var Bn=Oi[Di],Qs=Bn.G,Ao=Bn.H,Xo=0,Es=1,ji=0;for(Cr=0;5>Cr;++Cr){jn=xu[Cr],Qs[Cr]=Ys,Ao[Cr]=Gr,!Cr&&0<fi&&(jn+=1<<fi);i:{var Cc,Yl=jn,xf=Kn,_l=Mi,Xg=Ys,E1=Gr,ei=0,Yo=xf.m,S1=ee(Yo,1);if(i(_l,0,0,Yl),S1){var k1=ee(Yo,1)+1,h0=ee(Yo,1),d0=ee(Yo,h0==0?1:8);_l[d0]=1,k1==2&&(_l[d0=ee(Yo,8)]=1);var bl=1}else{var oi=s(19),Gi=ee(Yo,4)+4;if(19<Gi){xf.a=3;var Bi=0;break i}for(Cc=0;Cc<Gi;++Cc)oi[Ey[Cc]]=ee(Yo,3);var vf=void 0,Ql=void 0,yf=xf,Iy=oi,ls=Yl,p0=_l,$h=0,El=yf.m,Qo=8,uo=a(128,M);n:for(;D(uo,0,7,Iy,19);){if(ee(El,1)){var Hh=2+2*ee(El,3);if((vf=2+ee(El,Hh))>ls)break n}else vf=ls;for(Ql=0;Ql<ls&&vf--;){pe(El);var m0=uo[0+(127&W(El))];ae(El,El.u+m0.g);var Ic=m0.value;if(16>Ic)p0[Ql++]=Ic,Ic!=0&&(Qo=Ic);else{var Yg=Ic==16,T1=Ic-16,Qg=c0[T1],A1=ee(El,Bh[T1])+Qg;if(Ql+A1>ls)break n;for(var Jg=Yg?Qo:0;0<A1--;)p0[Ql++]=Jg}}$h=1;break n}$h||(yf.a=3),bl=$h}(bl=bl&&!Yo.h)&&(ei=D(Xg,E1,8,_l,Yl)),bl&&ei!=0?Bi=ei:(xf.a=3,Bi=0)}if(Bi==0)break r;if(Es&&$g[Cr]==1&&(Es=Ys[Gr].g==0),Xo+=Ys[Gr].g,Gr+=Bi,3>=Cr){var wf,g0=Mi[0];for(wf=1;wf<jn;++wf)Mi[wf]>g0&&(g0=Mi[wf]);ji+=g0}}if(Bn.nd=Es,Bn.Qb=0,Es&&(Bn.qb=(Qs[3][Ao[3]+0].value<<24|Qs[1][Ao[1]+0].value<<16|Qs[2][Ao[2]+0].value)>>>0,Xo==0&&256>Qs[0][Ao[0]+0].value&&(Bn.Qb=1,Bn.qb+=Qs[0][Ao[0]+0].value<<8)),Bn.jc=!Bn.Qb&&6>ji,Bn.jc){var Wh,fo=Bn;for(Wh=0;Wh<pa;++Wh){var Jl=Wh,Jo=fo.pd[Jl],bu=fo.G[0][fo.H[0]+Jl];256<=bu.value?(Jo.g=bu.g+256,Jo.value=bu.value):(Jo.g=0,Jo.value=0,Jl>>=Jn(bu,8,Jo),Jl>>=Jn(fo.G[1][fo.H[1]+Jl],16,Jo),Jl>>=Jn(fo.G[2][fo.H[2]+Jl],0,Jo),Jn(fo.G[3][fo.H[3]+Jl],24,Jo))}}}si.vc=sn,si.Wb=xn,si.Ya=Oi,si.yc=qi,zt=1;break t}zt=0}if(!(se=zt)){q.a=3;break e}if(0<qe){if(_e.ua=1<<qe,!fe(_e.Wa,qe)){q.a=1,se=0;break e}}else _e.ua=0;var x0=q,v0=ce,Zg=de,y0=x0.s,w0=y0.xc;if(x0.c=v0,x0.i=Zg,y0.md=K(v0,w0),y0.wc=w0==0?-1:(1<<w0)-1,j){q.xb=wl;break e}if((De=s(ce*de))==null){q.a=1,se=0;break e}se=(se=He(q,De,0,ce,de,de,null))&&!ge.h;break e}return se?(te!=null?te[0]=De:(e(De==null),e(j)),q.$=0,j||tt(_e)):tt(_e),se}function Qe(v,S){var j=v.c*v.i,q=j+S+16*S;return e(v.c<=S),v.V=s(q),v.V==null?(v.Ta=null,v.Ua=0,v.a=1,0):(v.Ta=v.V,v.Ua=v.Ba+j+S,1)}function _t(v,S){var j=v.C,q=S-j,te=v.V,se=v.Ba+v.c*j;for(e(S<=v.l.o);0<q;){var ce=16<q?16:q,de=v.l.ma,ge=v.l.width,_e=ge*ce,De=de.ca,qe=de.tb+ge*j,ke=v.Ta,je=v.Ua;Ae(v,ce,te,se),h1(ke,je,De,qe,_e),Ce(de,j,j+ce,De,qe,ge),q-=ce,te+=ce*v.c,j+=ce}e(j==S),v.C=v.Ma=S}function Ft(){this.ub=this.yd=this.td=this.Rb=0}function Ht(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Rt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Tt(){this.Yb=(function(){var v=[];return(function S(j,q,te){for(var se=te[q],ce=0;ce<se&&(j.push(te.length>q+1?[]:0),!(te.length<q+1));ce++)S(j[ce],q+1,te)})(v,0,[3,11]),v})()}function br(){this.jb=s(3),this.Wc=o([4,8],Tt),this.Xc=o([4,17],Tt)}function on(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Dr(){this.ld=this.La=this.dd=this.tc=0}function fn(){this.Na=this.la=0}function Aa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ca(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ws(){this.uc=this.M=this.Nb=0,this.wa=Array(new Dr),this.Y=0,this.ya=Array(new Ca),this.aa=0,this.l=new En}function ni(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Bo(){this.cb=this.a=0,this.sc="",this.m=new C,this.Od=new Ft,this.Kc=new Ht,this.ed=new on,this.Qa=new Rt,this.Ic=this.$c=this.Aa=0,this.D=new Ws,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,C),this.ia=0,this.pb=a(4,Aa),this.Pa=new br,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ni),this.Hd=0,this.rb=Array(new fn),this.sb=0,this.wa=Array(new Dr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ca),this.L=this.aa=0,this.gd=o([4,2],Dr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function En(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function lu(){var v=new Bo;return v!=null&&(v.a=0,v.sc="OK",v.cb=0,v.Xb=0,vu||(vu=Ia)),v}function ui(v,S,j){return v.a==0&&(v.a=S,v.sc=j,v.cb=0),0}function cu(v,S,j){return 3<=j&&v[S+0]==157&&v[S+1]==1&&v[S+2]==42}function Ul(v,S){if(v==null)return 0;if(v.a=0,v.sc="OK",S==null)return ui(v,2,"null VP8Io passed to VP8GetHeaders()");var j=S.data,q=S.w,te=S.ha;if(4>te)return ui(v,7,"Truncated header.");var se=j[q+0]|j[q+1]<<8|j[q+2]<<16,ce=v.Od;if(ce.Rb=!(1&se),ce.td=se>>1&7,ce.yd=se>>4&1,ce.ub=se>>5,3<ce.td)return ui(v,3,"Incorrect keyframe parameters.");if(!ce.yd)return ui(v,4,"Frame not displayable.");q+=3,te-=3;var de=v.Kc;if(ce.Rb){if(7>te)return ui(v,7,"cannot parse picture header");if(!cu(j,q,te))return ui(v,3,"Bad code word");de.c=16383&(j[q+4]<<8|j[q+3]),de.Td=j[q+4]>>6,de.i=16383&(j[q+6]<<8|j[q+5]),de.Ud=j[q+6]>>6,q+=7,te-=7,v.za=de.c+15>>4,v.Ub=de.i+15>>4,S.width=de.c,S.height=de.i,S.Da=0,S.j=0,S.v=0,S.va=S.width,S.o=S.height,S.da=0,S.ib=S.width,S.hb=S.height,S.U=S.width,S.T=S.height,i((se=v.Pa).jb,0,255,se.jb.length),e((se=v.Qa)!=null),se.Cb=0,se.Bb=0,se.Fb=1,i(se.Zb,0,0,se.Zb.length),i(se.Lb,0,0,se.Lb)}if(ce.ub>te)return ui(v,7,"bad partition length");Ne(se=v.m,j,q,ce.ub),q+=ce.ub,te-=ce.ub,ce.Rb&&(de.Ld=xe(se),de.Kd=xe(se)),de=v.Qa;var ge,_e=v.Pa;if(e(se!=null),e(de!=null),de.Cb=xe(se),de.Cb){if(de.Bb=xe(se),xe(se)){for(de.Fb=xe(se),ge=0;4>ge;++ge)de.Zb[ge]=xe(se)?le(se,7):0;for(ge=0;4>ge;++ge)de.Lb[ge]=xe(se)?le(se,6):0}if(de.Bb)for(ge=0;3>ge;++ge)_e.jb[ge]=xe(se)?we(se,8):255}else de.Bb=0;if(se.Ka)return ui(v,3,"cannot parse segment header");if((de=v.ed).zd=xe(se),de.Tb=we(se,6),de.wb=we(se,3),de.Pc=xe(se),de.Pc&&xe(se)){for(_e=0;4>_e;++_e)xe(se)&&(de.vd[_e]=le(se,6));for(_e=0;4>_e;++_e)xe(se)&&(de.od[_e]=le(se,6))}if(v.L=de.Tb==0?0:de.zd?1:2,se.Ka)return ui(v,3,"cannot parse filter header");var De=te;if(te=ge=q,q=ge+De,de=De,v.Xb=(1<<we(v.m,2))-1,De<3*(_e=v.Xb))j=7;else{for(ge+=3*_e,de-=3*_e,De=0;De<_e;++De){var qe=j[te+0]|j[te+1]<<8|j[te+2]<<16;qe>de&&(qe=de),Ne(v.Jc[+De],j,ge,qe),ge+=qe,de-=qe,te+=3}Ne(v.Jc[+_e],j,ge,de),j=ge<q?0:5}if(j!=0)return ui(v,j,"cannot parse partitions");for(j=we(ge=v.m,7),te=xe(ge)?le(ge,4):0,q=xe(ge)?le(ge,4):0,de=xe(ge)?le(ge,4):0,_e=xe(ge)?le(ge,4):0,ge=xe(ge)?le(ge,4):0,De=v.Qa,qe=0;4>qe;++qe){if(De.Cb){var ke=De.Zb[qe];De.Fb||(ke+=j)}else{if(0<qe){v.pb[qe]=v.pb[0];continue}ke=j}var je=v.pb[qe];je.Sc[0]=df[Qr(ke+te,127)],je.Sc[1]=Vh[Qr(ke+0,127)],je.Eb[0]=2*df[Qr(ke+q,127)],je.Eb[1]=101581*Vh[Qr(ke+de,127)]>>16,8>je.Eb[1]&&(je.Eb[1]=8),je.Qc[0]=df[Qr(ke+_e,117)],je.Qc[1]=Vh[Qr(ke+ge,127)],je.lc=ke+ge}if(!ce.Rb)return ui(v,4,"Not a key frame.");for(xe(se),ce=v.Pa,j=0;4>j;++j){for(te=0;8>te;++te)for(q=0;3>q;++q)for(de=0;11>de;++de)_e=Ee(se,Ty[j][te][q][de])?we(se,8):qg[j][te][q][de],ce.Wc[j][te].Yb[q][de]=_e;for(te=0;17>te;++te)ce.Xc[j][te]=ce.Wc[j][w1[te]]}return v.kc=xe(se),v.kc&&(v.Bd=we(se,8)),v.cb=1}function Ia(v,S,j,q,te,se,ce){var de=S[te].Yb[j];for(j=0;16>te;++te){if(!Ee(v,de[j+0]))return te;for(;!Ee(v,de[j+1]);)if(de=S[++te].Yb[0],j=0,te==16)return 16;var ge=S[te+1].Yb;if(Ee(v,de[j+2])){var _e=v,De=0;if(Ee(_e,(ke=de)[(qe=j)+3]))if(Ee(_e,ke[qe+6])){for(de=0,qe=2*(De=Ee(_e,ke[qe+8]))+(ke=Ee(_e,ke[qe+9+De])),De=0,ke=v1[qe];ke[de];++de)De+=De+Ee(_e,ke[de]);De+=3+(8<<qe)}else Ee(_e,ke[qe+7])?(De=7+2*Ee(_e,165),De+=Ee(_e,145)):De=5+Ee(_e,159);else De=Ee(_e,ke[qe+4])?3+Ee(_e,ke[qe+5]):2;de=ge[2]}else De=1,de=ge[1];ge=ce+y1[te],0>(_e=v).b&&he(_e);var qe,ke=_e.b,je=(qe=_e.Ca>>1)-(_e.I>>ke)>>31;--_e.b,_e.Ca+=je,_e.Ca|=1,_e.I-=(qe+1&je)<<ke,se[ge]=((De^je)-je)*q[(0<te)+0]}return 16}function Na(v){var S=v.rb[v.sb-1];S.la=0,S.Na=0,i(v.zc,0,0,v.zc.length),v.ja=0}function Ps(v,S,j,q,te){te=v[S+j+32*q]+(te>>3),v[S+j+32*q]=-256&te?0>te?0:255:te}function zl(v,S,j,q,te,se){Ps(v,S,0,j,q+te),Ps(v,S,1,j,q+se),Ps(v,S,2,j,q-se),Ps(v,S,3,j,q-te)}function Tn(v){return(20091*v>>16)+v}function Rs(v,S,j,q){var te,se=0,ce=s(16);for(te=0;4>te;++te){var de=v[S+0]+v[S+8],ge=v[S+0]-v[S+8],_e=(35468*v[S+4]>>16)-Tn(v[S+12]),De=Tn(v[S+4])+(35468*v[S+12]>>16);ce[se+0]=de+De,ce[se+1]=ge+_e,ce[se+2]=ge-_e,ce[se+3]=de-De,se+=4,S++}for(te=se=0;4>te;++te)de=(v=ce[se+0]+4)+ce[se+8],ge=v-ce[se+8],_e=(35468*ce[se+4]>>16)-Tn(ce[se+12]),Ps(j,q,0,0,de+(De=Tn(ce[se+4])+(35468*ce[se+12]>>16))),Ps(j,q,1,0,ge+_e),Ps(j,q,2,0,ge-_e),Ps(j,q,3,0,de-De),se++,q+=32}function $l(v,S,j,q){var te=v[S+0]+4,se=35468*v[S+4]>>16,ce=Tn(v[S+4]),de=35468*v[S+1]>>16;zl(j,q,0,te+ce,v=Tn(v[S+1]),de),zl(j,q,1,te+se,v,de),zl(j,q,2,te-se,v,de),zl(j,q,3,te-ce,v,de)}function fl(v,S,j,q,te){Rs(v,S,j,q),te&&Rs(v,S+16,j,q+4)}function hl(v,S,j,q){Li(v,S+0,j,q,1),Li(v,S+32,j,q+128,1)}function Yr(v,S,j,q){var te;for(v=v[S+0]+4,te=0;4>te;++te)for(S=0;4>S;++S)Ps(j,q,S,te,v)}function Vo(v,S,j,q){v[S+0]&&Go(v,S+0,j,q),v[S+16]&&Go(v,S+16,j,q+4),v[S+32]&&Go(v,S+32,j,q+128),v[S+48]&&Go(v,S+48,j,q+128+4)}function Wr(v,S,j,q){var te,se=s(16);for(te=0;4>te;++te){var ce=v[S+0+te]+v[S+12+te],de=v[S+4+te]+v[S+8+te],ge=v[S+4+te]-v[S+8+te],_e=v[S+0+te]-v[S+12+te];se[0+te]=ce+de,se[8+te]=ce-de,se[4+te]=_e+ge,se[12+te]=_e-ge}for(te=0;4>te;++te)ce=(v=se[0+4*te]+3)+se[3+4*te],de=se[1+4*te]+se[2+4*te],ge=se[1+4*te]-se[2+4*te],_e=v-se[3+4*te],j[q+0]=ce+de>>3,j[q+16]=_e+ge>>3,j[q+32]=ce-de>>3,j[q+48]=_e-ge>>3,q+=64}function ca(v,S,j){var q,te=S-32,se=ma,ce=255-v[te-1];for(q=0;q<j;++q){var de,ge=se,_e=ce+v[S-1];for(de=0;de<j;++de)v[S+de]=ge[_e+v[te+de]];S+=32}}function gc(v,S){ca(v,S,4)}function xc(v,S){ca(v,S,8)}function tf(v,S){ca(v,S,16)}function rf(v,S){var j;for(j=0;16>j;++j)n(v,S+32*j,v,S-32,16)}function vc(v,S){var j;for(j=16;0<j;--j)i(v,S,v[S-1],16),S+=32}function Uo(v,S,j){var q;for(q=0;16>q;++q)i(S,j+32*q,v,16)}function Fs(v,S){var j,q=16;for(j=0;16>j;++j)q+=v[S-1+32*j]+v[S+j-32];Uo(q>>5,v,S)}function is(v,S){var j,q=8;for(j=0;16>j;++j)q+=v[S-1+32*j];Uo(q>>4,v,S)}function Ls(v,S){var j,q=8;for(j=0;16>j;++j)q+=v[S+j-32];Uo(q>>4,v,S)}function ua(v,S){Uo(128,v,S)}function _r(v,S,j){return v+2*S+j+2>>2}function Pa(v,S){var j,q=S-32;for(q=new Uint8Array([_r(v[q-1],v[q+0],v[q+1]),_r(v[q+0],v[q+1],v[q+2]),_r(v[q+1],v[q+2],v[q+3]),_r(v[q+2],v[q+3],v[q+4])]),j=0;4>j;++j)n(v,S+32*j,q,0,q.length)}function _o(v,S){var j=v[S-1],q=v[S-1+32],te=v[S-1+64],se=v[S-1+96];Fe(v,S+0,16843009*_r(v[S-1-32],j,q)),Fe(v,S+32,16843009*_r(j,q,te)),Fe(v,S+64,16843009*_r(q,te,se)),Fe(v,S+96,16843009*_r(te,se,se))}function Ph(v,S){var j,q=4;for(j=0;4>j;++j)q+=v[S+j-32]+v[S-1+32*j];for(q>>=3,j=0;4>j;++j)i(v,S+32*j,q,4)}function nf(v,S){var j=v[S-1+0],q=v[S-1+32],te=v[S-1+64],se=v[S-1-32],ce=v[S+0-32],de=v[S+1-32],ge=v[S+2-32],_e=v[S+3-32];v[S+0+96]=_r(q,te,v[S-1+96]),v[S+1+96]=v[S+0+64]=_r(j,q,te),v[S+2+96]=v[S+1+64]=v[S+0+32]=_r(se,j,q),v[S+3+96]=v[S+2+64]=v[S+1+32]=v[S+0+0]=_r(ce,se,j),v[S+3+64]=v[S+2+32]=v[S+1+0]=_r(de,ce,se),v[S+3+32]=v[S+2+0]=_r(ge,de,ce),v[S+3+0]=_r(_e,ge,de)}function yi(v,S){var j=v[S+1-32],q=v[S+2-32],te=v[S+3-32],se=v[S+4-32],ce=v[S+5-32],de=v[S+6-32],ge=v[S+7-32];v[S+0+0]=_r(v[S+0-32],j,q),v[S+1+0]=v[S+0+32]=_r(j,q,te),v[S+2+0]=v[S+1+32]=v[S+0+64]=_r(q,te,se),v[S+3+0]=v[S+2+32]=v[S+1+64]=v[S+0+96]=_r(te,se,ce),v[S+3+32]=v[S+2+64]=v[S+1+96]=_r(se,ce,de),v[S+3+64]=v[S+2+96]=_r(ce,de,ge),v[S+3+96]=_r(de,ge,ge)}function zo(v,S){var j=v[S-1+0],q=v[S-1+32],te=v[S-1+64],se=v[S-1-32],ce=v[S+0-32],de=v[S+1-32],ge=v[S+2-32],_e=v[S+3-32];v[S+0+0]=v[S+1+64]=se+ce+1>>1,v[S+1+0]=v[S+2+64]=ce+de+1>>1,v[S+2+0]=v[S+3+64]=de+ge+1>>1,v[S+3+0]=ge+_e+1>>1,v[S+0+96]=_r(te,q,j),v[S+0+64]=_r(q,j,se),v[S+0+32]=v[S+1+96]=_r(j,se,ce),v[S+1+32]=v[S+2+96]=_r(se,ce,de),v[S+2+32]=v[S+3+96]=_r(ce,de,ge),v[S+3+32]=_r(de,ge,_e)}function sf(v,S){var j=v[S+0-32],q=v[S+1-32],te=v[S+2-32],se=v[S+3-32],ce=v[S+4-32],de=v[S+5-32],ge=v[S+6-32],_e=v[S+7-32];v[S+0+0]=j+q+1>>1,v[S+1+0]=v[S+0+64]=q+te+1>>1,v[S+2+0]=v[S+1+64]=te+se+1>>1,v[S+3+0]=v[S+2+64]=se+ce+1>>1,v[S+0+32]=_r(j,q,te),v[S+1+32]=v[S+0+96]=_r(q,te,se),v[S+2+32]=v[S+1+96]=_r(te,se,ce),v[S+3+32]=v[S+2+96]=_r(se,ce,de),v[S+3+64]=_r(ce,de,ge),v[S+3+96]=_r(de,ge,_e)}function $o(v,S){var j=v[S-1+0],q=v[S-1+32],te=v[S-1+64],se=v[S-1+96];v[S+0+0]=j+q+1>>1,v[S+2+0]=v[S+0+32]=q+te+1>>1,v[S+2+32]=v[S+0+64]=te+se+1>>1,v[S+1+0]=_r(j,q,te),v[S+3+0]=v[S+1+32]=_r(q,te,se),v[S+3+32]=v[S+1+64]=_r(te,se,se),v[S+3+64]=v[S+2+64]=v[S+0+96]=v[S+1+96]=v[S+2+96]=v[S+3+96]=se}function bo(v,S){var j=v[S-1+0],q=v[S-1+32],te=v[S-1+64],se=v[S-1+96],ce=v[S-1-32],de=v[S+0-32],ge=v[S+1-32],_e=v[S+2-32];v[S+0+0]=v[S+2+32]=j+ce+1>>1,v[S+0+32]=v[S+2+64]=q+j+1>>1,v[S+0+64]=v[S+2+96]=te+q+1>>1,v[S+0+96]=se+te+1>>1,v[S+3+0]=_r(de,ge,_e),v[S+2+0]=_r(ce,de,ge),v[S+1+0]=v[S+3+32]=_r(j,ce,de),v[S+1+32]=v[S+3+64]=_r(q,j,ce),v[S+1+64]=v[S+3+96]=_r(te,q,j),v[S+1+96]=_r(se,te,q)}function yc(v,S){var j;for(j=0;8>j;++j)n(v,S+32*j,v,S-32,8)}function Ds(v,S){var j;for(j=0;8>j;++j)i(v,S,v[S-1],8),S+=32}function qs(v,S,j){var q;for(q=0;8>q;++q)i(S,j+32*q,v,8)}function Ra(v,S){var j,q=8;for(j=0;8>j;++j)q+=v[S+j-32]+v[S-1+32*j];qs(q>>4,v,S)}function dl(v,S){var j,q=4;for(j=0;8>j;++j)q+=v[S+j-32];qs(q>>3,v,S)}function Nn(v,S){var j,q=4;for(j=0;8>j;++j)q+=v[S-1+32*j];qs(q>>3,v,S)}function uu(v,S){qs(128,v,S)}function Ho(v,S,j){var q=v[S-j],te=v[S+0],se=3*(te-q)+yl[1020+v[S-2*j]-v[S+j]],ce=ff[112+(se+4>>3)];v[S-j]=ma[255+q+ff[112+(se+3>>3)]],v[S+0]=ma[255+te-ce]}function co(v,S,j,q){var te=v[S+0],se=v[S+j];return ko[255+v[S-2*j]-v[S-j]]>q||ko[255+se-te]>q}function pl(v,S,j,q){return 4*ko[255+v[S-j]-v[S+0]]+ko[255+v[S-2*j]-v[S+j]]<=q}function ml(v,S,j,q,te){var se=v[S-3*j],ce=v[S-2*j],de=v[S-j],ge=v[S+0],_e=v[S+j],De=v[S+2*j],qe=v[S+3*j];return 4*ko[255+de-ge]+ko[255+ce-_e]>q?0:ko[255+v[S-4*j]-se]<=te&&ko[255+se-ce]<=te&&ko[255+ce-de]<=te&&ko[255+qe-De]<=te&&ko[255+De-_e]<=te&&ko[255+_e-ge]<=te}function Os(v,S,j,q){var te=2*q+1;for(q=0;16>q;++q)pl(v,S+q,j,te)&&Ho(v,S+q,j)}function Eo(v,S,j,q){var te=2*q+1;for(q=0;16>q;++q)pl(v,S+q*j,1,te)&&Ho(v,S+q*j,1)}function ys(v,S,j,q){var te;for(te=3;0<te;--te)Os(v,S+=4*j,j,q)}function Hl(v,S,j,q){var te;for(te=3;0<te;--te)Eo(v,S+=4,j,q)}function ws(v,S,j,q,te,se,ce,de){for(se=2*se+1;0<te--;){if(ml(v,S,j,se,ce))if(co(v,S,j,de))Ho(v,S,j);else{var ge=v,_e=S,De=j,qe=ge[_e-2*De],ke=ge[_e-De],je=ge[_e+0],$e=ge[_e+De],ct=ge[_e+2*De],Ye=27*(lt=yl[1020+3*(je-ke)+yl[1020+qe-$e]])+63>>7,at=18*lt+63>>7,lt=9*lt+63>>7;ge[_e-3*De]=ma[255+ge[_e-3*De]+lt],ge[_e-2*De]=ma[255+qe+at],ge[_e-De]=ma[255+ke+Ye],ge[_e+0]=ma[255+je-Ye],ge[_e+De]=ma[255+$e-at],ge[_e+2*De]=ma[255+ct-lt]}S+=q}}function ss(v,S,j,q,te,se,ce,de){for(se=2*se+1;0<te--;){if(ml(v,S,j,se,ce))if(co(v,S,j,de))Ho(v,S,j);else{var ge=v,_e=S,De=j,qe=ge[_e-De],ke=ge[_e+0],je=ge[_e+De],$e=ff[112+(4+(ct=3*(ke-qe))>>3)],ct=ff[112+(ct+3>>3)],Ye=$e+1>>1;ge[_e-2*De]=ma[255+ge[_e-2*De]+Ye],ge[_e-De]=ma[255+qe+ct],ge[_e+0]=ma[255+ke-$e],ge[_e+De]=ma[255+je-Ye]}S+=q}}function L(v,S,j,q,te,se){ws(v,S,j,1,16,q,te,se)}function Z(v,S,j,q,te,se){ws(v,S,1,j,16,q,te,se)}function Se(v,S,j,q,te,se){var ce;for(ce=3;0<ce;--ce)ss(v,S+=4*j,j,1,16,q,te,se)}function Le(v,S,j,q,te,se){var ce;for(ce=3;0<ce;--ce)ss(v,S+=4,1,j,16,q,te,se)}function Ve(v,S,j,q,te,se,ce,de){ws(v,S,te,1,8,se,ce,de),ws(j,q,te,1,8,se,ce,de)}function dt(v,S,j,q,te,se,ce,de){ws(v,S,1,te,8,se,ce,de),ws(j,q,1,te,8,se,ce,de)}function vt(v,S,j,q,te,se,ce,de){ss(v,S+4*te,te,1,8,se,ce,de),ss(j,q+4*te,te,1,8,se,ce,de)}function Gt(v,S,j,q,te,se,ce,de){ss(v,S+4,1,te,8,se,ce,de),ss(j,q+4,1,te,8,se,ce,de)}function Qt(){this.ba=new ur,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new mr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function xr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ar(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function nn(){this.ua=0,this.Wa=new et,this.vb=new et,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new be,this.yc=new M}function Wn(){this.xb=this.a=0,this.l=new En,this.ca=new ur,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new U,this.Pb=0,this.wd=new U,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new nn,this.ab=0,this.gc=a(4,Ar),this.Oc=0}function Zn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new En,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function hn(v,S,j,q,te,se,ce){for(v=v==null?0:v[S+0],S=0;S<ce;++S)te[se+S]=v+j[q+S]&255,v=te[se+S]}function wi(v,S,j,q,te,se,ce){var de;if(v==null)hn(null,null,j,q,te,se,ce);else for(de=0;de<ce;++de)te[se+de]=v[S+de]+j[q+de]&255}function Pn(v,S,j,q,te,se,ce){if(v==null)hn(null,null,j,q,te,se,ce);else{var de,ge=v[S+0],_e=ge,De=ge;for(de=0;de<ce;++de)_e=De+(ge=v[S+de])-_e,De=j[q+de]+(-256&_e?0>_e?0:255:_e)&255,_e=ge,te[se+de]=De}}function Hi(v,S,j,q){var te=S.width,se=S.o;if(e(v!=null&&S!=null),0>j||0>=q||j+q>se)return null;if(!v.Cc){if(v.ga==null){var ce;if(v.ga=new Zn,(ce=v.ga==null)||(ce=S.width*S.o,e(v.Gb.length==0),v.Gb=s(ce),v.Uc=0,v.Gb==null?ce=0:(v.mb=v.Gb,v.nb=v.Uc,v.rc=null,ce=1),ce=!ce),!ce){ce=v.ga;var de=v.Fa,ge=v.P,_e=v.qc,De=v.mb,qe=v.nb,ke=ge+1,je=_e-1,$e=ce.l;if(e(de!=null&&De!=null&&S!=null),Ks[0]=null,Ks[1]=hn,Ks[2]=wi,Ks[3]=Pn,ce.ca=De,ce.tb=qe,ce.c=S.width,ce.i=S.height,e(0<ce.c&&0<ce.i),1>=_e)S=0;else if(ce.$a=3&de[ge+0],ce.Z=de[ge+0]>>2&3,ce.Lc=de[ge+0]>>4&3,ge=de[ge+0]>>6&3,0>ce.$a||1<ce.$a||4<=ce.Z||1<ce.Lc||ge)S=0;else if($e.put=nr,$e.ac=In,$e.bc=Hr,$e.ma=ce,$e.width=S.width,$e.height=S.height,$e.Da=S.Da,$e.v=S.v,$e.va=S.va,$e.j=S.j,$e.o=S.o,ce.$a)e:{e(ce.$a==1),S=Ge();t:for(;;){if(S==null){S=0;break e}if(e(ce!=null),ce.mc=S,S.c=ce.c,S.i=ce.i,S.l=ce.l,S.l.ma=ce,S.l.width=ce.c,S.l.height=ce.i,S.a=0,J(S.m,de,ke,je),!Ke(ce.c,ce.i,1,S,null)||(S.ab==1&&S.gc[0].hc==3&&ye(S.s)?(ce.ic=1,de=S.c*S.i,S.Ta=null,S.Ua=0,S.V=s(de),S.Ba=0,S.V==null?(S.a=1,S=0):S=1):(ce.ic=0,S=Qe(S,ce.c)),!S))break t;S=1;break e}ce.mc=null,S=0}else S=je>=ce.c*ce.i;ce=!S}if(ce)return null;v.ga.Lc!=1?v.Ga=0:q=se-j}e(v.ga!=null),e(j+q<=se);e:{if(S=(de=v.ga).c,se=de.l.o,de.$a==0){if(ke=v.rc,je=v.Vc,$e=v.Fa,ge=v.P+1+j*S,_e=v.mb,De=v.nb+j*S,e(ge<=v.P+v.qc),de.Z!=0)for(e(Ks[de.Z]!=null),ce=0;ce<q;++ce)Ks[de.Z](ke,je,$e,ge,_e,De,S),ke=_e,je=De,De+=S,ge+=S;else for(ce=0;ce<q;++ce)n(_e,De,$e,ge,S),ke=_e,je=De,De+=S,ge+=S;v.rc=ke,v.Vc=je}else{if(e(de.mc!=null),S=j+q,e((ce=de.mc)!=null),e(S<=ce.i),ce.C>=S)S=1;else if(de.ic||Ri(),de.ic){de=ce.V,ke=ce.Ba,je=ce.c;var ct=ce.i,Ye=($e=1,ge=ce.$/je,_e=ce.$%je,De=ce.m,qe=ce.s,ce.$),at=je*ct,lt=je*S,mt=qe.wc,gt=Ye<lt?re(qe,_e,ge):null;e(Ye<=at),e(S<=ct),e(ye(qe));t:for(;;){for(;!De.h&&Ye<lt;){if(_e&mt||(gt=re(qe,_e,ge)),e(gt!=null),pe(De),256>(ct=bn(gt.G[0],gt.H[0],De)))de[ke+Ye]=ct,++Ye,++_e>=je&&(_e=0,++ge<=S&&!(ge%16)&&Ie(ce,ge));else{if(!(280>ct)){$e=0;break t}ct=Dn(ct-256,De);var hr,Jt=bn(gt.G[4],gt.H[4],De);if(pe(De),!(Ye>=(Jt=$i(je,Jt=Dn(Jt,De)))&&at-Ye>=ct)){$e=0;break t}for(hr=0;hr<ct;++hr)de[ke+Ye+hr]=de[ke+Ye+hr-Jt];for(Ye+=ct,_e+=ct;_e>=je;)_e-=je,++ge<=S&&!(ge%16)&&Ie(ce,ge);Ye<lt&&_e&mt&&(gt=re(qe,_e,ge))}e(De.h==Y(De))}Ie(ce,ge>S?S:ge);break t}!$e||De.h&&Ye<at?($e=0,ce.a=De.h?5:3):ce.$=Ye,S=$e}else S=He(ce,ce.V,ce.Ba,ce.c,ce.i,S,_t);if(!S){q=0;break e}}j+q>=se&&(v.Cc=1),q=1}if(!q)return null;if(v.Cc&&((q=v.ga)!=null&&(q.mc=null),v.ga=null,0<v.Ga))return alert("todo:WebPDequantizeLevels"),null}return v.nb+j*te}function So(v,S,j,q,te,se){for(;0<te--;){var ce,de=v,ge=S+(j?1:0),_e=v,De=S+(j?0:3);for(ce=0;ce<q;++ce){var qe=_e[De+4*ce];qe!=255&&(qe*=32897,de[ge+4*ce+0]=de[ge+4*ce+0]*qe>>23,de[ge+4*ce+1]=de[ge+4*ce+1]*qe>>23,de[ge+4*ce+2]=de[ge+4*ce+2]*qe>>23)}S+=se}}function Wo(v,S,j,q,te){for(;0<q--;){var se;for(se=0;se<j;++se){var ce=v[S+2*se+0],de=15&(_e=v[S+2*se+1]),ge=4369*de,_e=(240&_e|_e>>4)*ge>>16;v[S+2*se+0]=(240&ce|ce>>4)*ge>>16&240|(15&ce|ce<<4)*ge>>16>>4&15,v[S+2*se+1]=240&_e|de}S+=te}}function fu(v,S,j,q,te,se,ce,de){var ge,_e,De=255;for(_e=0;_e<te;++_e){for(ge=0;ge<q;++ge){var qe=v[S+ge];se[ce+4*ge]=qe,De&=qe}S+=j,ce+=de}return De!=255}function Wl(v,S,j,q,te){var se;for(se=0;se<te;++se)j[q+se]=v[S+se]>>8}function Ri(){mu=So,f1=Wo,Lh=fu,h1=Wl}function Fa(v,S,j){T[v]=function(q,te,se,ce,de,ge,_e,De,qe,ke,je,$e,ct,Ye,at,lt,mt){var gt,hr=mt-1>>1,Jt=de[ge+0]|_e[De+0]<<16,Or=qe[ke+0]|je[$e+0]<<16;e(q!=null);var ir=3*Jt+Or+131074>>2;for(S(q[te+0],255&ir,ir>>16,ct,Ye),se!=null&&(ir=3*Or+Jt+131074>>2,S(se[ce+0],255&ir,ir>>16,at,lt)),gt=1;gt<=hr;++gt){var Jr=de[ge+gt]|_e[De+gt]<<16,bi=qe[ke+gt]|je[$e+gt]<<16,Mr=Jt+Jr+Or+bi+524296,Zt=Mr+2*(Jr+Or)>>3;ir=Zt+Jt>>1,Jt=(Mr=Mr+2*(Jt+bi)>>3)+Jr>>1,S(q[te+2*gt-1],255&ir,ir>>16,ct,Ye+(2*gt-1)*j),S(q[te+2*gt-0],255&Jt,Jt>>16,ct,Ye+(2*gt-0)*j),se!=null&&(ir=Mr+Or>>1,Jt=Zt+bi>>1,S(se[ce+2*gt-1],255&ir,ir>>16,at,lt+(2*gt-1)*j),S(se[ce+2*gt+0],255&Jt,Jt>>16,at,lt+(2*gt+0)*j)),Jt=Jr,Or=bi}1&mt||(ir=3*Jt+Or+131074>>2,S(q[te+mt-1],255&ir,ir>>16,ct,Ye+(mt-1)*j),se!=null&&(ir=3*Or+Jt+131074>>2,S(se[ce+mt-1],255&ir,ir>>16,at,lt+(mt-1)*j)))}}function wc(){Ba[o0]=Ay,Ba[kc]=Tc,Ba[zg]=Cy,Ba[Dh]=mf,Ba[Oh]=yu,Ba[On]=Uh,Ba[l0]=_1,Ba[hf]=Tc,Ba[gu]=mf,Ba[Mh]=yu,Ba[jh]=Uh}function fa(v){return v&-16384?0>v?0:255:v>>Ac}function y(v,S){return fa((19077*v>>8)+(26149*S>>8)-14234)}function V(v,S,j){return fa((19077*v>>8)-(6419*S>>8)-(13320*j>>8)+8708)}function Q(v,S){return fa((19077*v>>8)+(33050*S>>8)-17685)}function me(v,S,j,q,te){q[te+0]=y(v,j),q[te+1]=V(v,S,j),q[te+2]=Q(v,S)}function ze(v,S,j,q,te){q[te+0]=Q(v,S),q[te+1]=V(v,S,j),q[te+2]=y(v,j)}function it(v,S,j,q,te){var se=V(v,S,j);S=se<<3&224|Q(v,S)>>3,q[te+0]=248&y(v,j)|se>>5,q[te+1]=S}function It(v,S,j,q,te){var se=240&Q(v,S)|15;q[te+0]=240&y(v,j)|V(v,S,j)>>4,q[te+1]=se}function dn(v,S,j,q,te){q[te+0]=255,me(v,S,j,q,te+1)}function ii(v,S,j,q,te){ze(v,S,j,q,te),q[te+3]=255}function qr(v,S,j,q,te){me(v,S,j,q,te),q[te+3]=255}function Qr(v,S){return 0>v?0:v>S?S:v}function gn(v,S,j){T[v]=function(q,te,se,ce,de,ge,_e,De,qe){for(var ke=De+(-2&qe)*j;De!=ke;)S(q[te+0],se[ce+0],de[ge+0],_e,De),S(q[te+1],se[ce+0],de[ge+0],_e,De+j),te+=2,++ce,++ge,De+=2*j;1&qe&&S(q[te+0],se[ce+0],de[ge+0],_e,De)}}function Gs(v,S,j){return j==0?v==0?S==0?6:5:S==0?4:0:j}function Ms(v,S,j,q,te){switch(v>>>30){case 3:Li(S,j,q,te,0);break;case 2:as(S,j,q,te);break;case 1:Go(S,j,q,te)}}function La(v,S){var j,q,te=S.M,se=S.Nb,ce=v.oc,de=v.pc+40,ge=v.oc,_e=v.pc+584,De=v.oc,qe=v.pc+600;for(j=0;16>j;++j)ce[de+32*j-1]=129;for(j=0;8>j;++j)ge[_e+32*j-1]=129,De[qe+32*j-1]=129;for(0<te?ce[de-1-32]=ge[_e-1-32]=De[qe-1-32]=129:(i(ce,de-32-1,127,21),i(ge,_e-32-1,127,9),i(De,qe-32-1,127,9)),q=0;q<v.za;++q){var ke=S.ya[S.aa+q];if(0<q){for(j=-1;16>j;++j)n(ce,de+32*j-4,ce,de+32*j+12,4);for(j=-1;8>j;++j)n(ge,_e+32*j-4,ge,_e+32*j+4,4),n(De,qe+32*j-4,De,qe+32*j+4,4)}var je=v.Gd,$e=v.Hd+q,ct=ke.ad,Ye=ke.Hc;if(0<te&&(n(ce,de-32,je[$e].y,0,16),n(ge,_e-32,je[$e].f,0,8),n(De,qe-32,je[$e].ea,0,8)),ke.Za){var at=ce,lt=de-32+16;for(0<te&&(q>=v.za-1?i(at,lt,je[$e].y[15],4):n(at,lt,je[$e+1].y,0,4)),j=0;4>j;j++)at[lt+128+j]=at[lt+256+j]=at[lt+384+j]=at[lt+0+j];for(j=0;16>j;++j,Ye<<=2)at=ce,lt=de+b1[j],To[ke.Ob[j]](at,lt),Ms(Ye,ct,16*+j,at,lt)}else if(at=Gs(q,te,ke.Ob[0]),ga[at](ce,de),Ye!=0)for(j=0;16>j;++j,Ye<<=2)Ms(Ye,ct,16*+j,ce,de+b1[j]);for(j=ke.Gc,at=Gs(q,te,ke.Dd),ja[at](ge,_e),ja[at](De,qe),Ye=ct,at=ge,lt=_e,255&(ke=0|j)&&(170&ke?vl(Ye,256,at,lt):cf(Ye,256,at,lt)),ke=De,Ye=qe,255&(j>>=8)&&(170&j?vl(ct,320,ke,Ye):cf(ct,320,ke,Ye)),te<v.Ub-1&&(n(je[$e].y,0,ce,de+480,16),n(je[$e].f,0,ge,_e+224,8),n(je[$e].ea,0,De,qe+224,8)),j=8*se*v.B,je=v.sa,$e=v.ta+16*q+16*se*v.R,ct=v.qa,ke=v.ra+8*q+j,Ye=v.Ha,at=v.Ia+8*q+j,j=0;16>j;++j)n(je,$e+j*v.R,ce,de+32*j,16);for(j=0;8>j;++j)n(ct,ke+j*v.B,ge,_e+32*j,8),n(Ye,at+j*v.B,De,qe+32*j,8)}}function qo(v,S,j,q,te,se,ce,de,ge){var _e=[0],De=[0],qe=0,ke=ge!=null?ge.kd:0,je=ge??new xr;if(v==null||12>j)return 7;je.data=v,je.w=S,je.ha=j,S=[S],j=[j],je.gb=[je.gb];e:{var $e=S,ct=j,Ye=je.gb;if(e(v!=null),e(ct!=null),e(Ye!=null),Ye[0]=0,12<=ct[0]&&!r(v,$e[0],"RIFF")){if(r(v,$e[0]+8,"WEBP")){Ye=3;break e}var at=Re(v,$e[0]+4);if(12>at||4294967286<at){Ye=3;break e}if(ke&&at>ct[0]-8){Ye=7;break e}Ye[0]=at,$e[0]+=12,ct[0]-=12}Ye=0}if(Ye!=0)return Ye;for(at=0<je.gb[0],j=j[0];;){e:{var lt=v;ct=S,Ye=j;var mt=_e,gt=De,hr=$e=[0];if((ir=qe=[qe])[0]=0,8>Ye[0])Ye=7;else{if(!r(lt,ct[0],"VP8X")){if(Re(lt,ct[0]+4)!=10){Ye=3;break e}if(18>Ye[0]){Ye=7;break e}var Jt=Re(lt,ct[0]+8),Or=1+Je(lt,ct[0]+12);if(2147483648<=Or*(lt=1+Je(lt,ct[0]+15))){Ye=3;break e}hr!=null&&(hr[0]=Jt),mt!=null&&(mt[0]=Or),gt!=null&&(gt[0]=lt),ct[0]+=18,Ye[0]-=18,ir[0]=1}Ye=0}}if(qe=qe[0],$e=$e[0],Ye!=0)return Ye;if(ct=!!(2&$e),!at&&qe)return 3;if(se!=null&&(se[0]=!!(16&$e)),ce!=null&&(ce[0]=ct),de!=null&&(de[0]=0),ce=_e[0],$e=De[0],qe&&ct&&ge==null){Ye=0;break}if(4>j){Ye=7;break}if(at&&qe||!at&&!qe&&!r(v,S[0],"ALPH")){j=[j],je.na=[je.na],je.P=[je.P],je.Sa=[je.Sa];e:{Jt=v,Ye=S,at=j;var ir=je.gb;mt=je.na,gt=je.P,hr=je.Sa,Or=22,e(Jt!=null),e(at!=null),lt=Ye[0];var Jr=at[0];for(e(mt!=null),e(hr!=null),mt[0]=null,gt[0]=null,hr[0]=0;;){if(Ye[0]=lt,at[0]=Jr,8>Jr){Ye=7;break e}var bi=Re(Jt,lt+4);if(4294967286<bi){Ye=3;break e}var Mr=8+bi+1&-2;if(Or+=Mr,0<ir&&Or>ir){Ye=3;break e}if(!r(Jt,lt,"VP8 ")||!r(Jt,lt,"VP8L")){Ye=0;break e}if(Jr[0]<Mr){Ye=7;break e}r(Jt,lt,"ALPH")||(mt[0]=Jt,gt[0]=lt+8,hr[0]=bi),lt+=Mr,Jr-=Mr}}if(j=j[0],je.na=je.na[0],je.P=je.P[0],je.Sa=je.Sa[0],Ye!=0)break}j=[j],je.Ja=[je.Ja],je.xa=[je.xa];e:if(ir=v,Ye=S,at=j,mt=je.gb[0],gt=je.Ja,hr=je.xa,Jt=Ye[0],lt=!r(ir,Jt,"VP8 "),Or=!r(ir,Jt,"VP8L"),e(ir!=null),e(at!=null),e(gt!=null),e(hr!=null),8>at[0])Ye=7;else{if(lt||Or){if(ir=Re(ir,Jt+4),12<=mt&&ir>mt-12){Ye=3;break e}if(ke&&ir>at[0]-8){Ye=7;break e}gt[0]=ir,Ye[0]+=8,at[0]-=8,hr[0]=Or}else hr[0]=5<=at[0]&&ir[Jt+0]==47&&!(ir[Jt+4]>>5),gt[0]=at[0];Ye=0}if(j=j[0],je.Ja=je.Ja[0],je.xa=je.xa[0],S=S[0],Ye!=0)break;if(4294967286<je.Ja)return 3;if(de==null||ct||(de[0]=je.xa?2:1),ce=[ce],$e=[$e],je.xa){if(5>j){Ye=7;break}de=ce,ke=$e,ct=se,v==null||5>j?v=0:5<=j&&v[S+0]==47&&!(v[S+4]>>5)?(at=[0],ir=[0],mt=[0],J(gt=new U,v,S,j),ns(gt,at,ir,mt)?(de!=null&&(de[0]=at[0]),ke!=null&&(ke[0]=ir[0]),ct!=null&&(ct[0]=mt[0]),v=1):v=0):v=0}else{if(10>j){Ye=7;break}de=$e,v==null||10>j||!cu(v,S+3,j-3)?v=0:(ke=v[S+0]|v[S+1]<<8|v[S+2]<<16,ct=16383&(v[S+7]<<8|v[S+6]),v=16383&(v[S+9]<<8|v[S+8]),1&ke||3<(ke>>1&7)||!(ke>>4&1)||ke>>5>=je.Ja||!ct||!v?v=0:(ce&&(ce[0]=ct),de&&(de[0]=v),v=1))}if(!v||(ce=ce[0],$e=$e[0],qe&&(_e[0]!=ce||De[0]!=$e)))return 3;ge!=null&&(ge[0]=je,ge.offset=S-ge.w,e(4294967286>S-ge.w),e(ge.offset==ge.ha-j));break}return Ye==0||Ye==7&&qe&&ge==null?(se!=null&&(se[0]|=je.na!=null&&0<je.na.length),q!=null&&(q[0]=ce),te!=null&&(te[0]=$e),0):Ye}function ha(v,S,j){var q=S.width,te=S.height,se=0,ce=0,de=q,ge=te;if(S.Da=v!=null&&0<v.Da,S.Da&&(de=v.cd,ge=v.bd,se=v.v,ce=v.j,11>j||(se&=-2,ce&=-2),0>se||0>ce||0>=de||0>=ge||se+de>q||ce+ge>te))return 0;if(S.v=se,S.j=ce,S.va=se+de,S.o=ce+ge,S.U=de,S.T=ge,S.da=v!=null&&0<v.da,S.da){if(!st(de,ge,j=[v.ib],se=[v.hb]))return 0;S.ib=j[0],S.hb=se[0]}return S.ob=v!=null&&v.ob,S.Kb=v==null||!v.Sd,S.da&&(S.ob=S.ib<3*q/4&&S.hb<3*te/4,S.Kb=0),1}function da(v){if(v==null)return 2;if(11>v.S){var S=v.f.RGBA;S.fb+=(v.height-1)*S.A,S.A=-S.A}else S=v.f.kb,v=v.height,S.O+=(v-1)*S.fa,S.fa=-S.fa,S.N+=(v-1>>1)*S.Ab,S.Ab=-S.Ab,S.W+=(v-1>>1)*S.Db,S.Db=-S.Db,S.F!=null&&(S.J+=(v-1)*S.lb,S.lb=-S.lb);return 0}function _c(v,S,j,q){if(q==null||0>=v||0>=S)return 2;if(j!=null){if(j.Da){var te=j.cd,se=j.bd,ce=-2&j.v,de=-2&j.j;if(0>ce||0>de||0>=te||0>=se||ce+te>v||de+se>S)return 2;v=te,S=se}if(j.da){if(!st(v,S,te=[j.ib],se=[j.hb]))return 2;v=te[0],S=se[0]}}q.width=v,q.height=S;e:{var ge=q.width,_e=q.height;if(v=q.S,0>=ge||0>=_e||!(v>=o0&&13>v))v=2;else{if(0>=q.Rd&&q.sd==null){ce=se=te=S=0;var De=(de=ge*zh[v])*_e;if(11>v||(se=(_e+1)/2*(S=(ge+1)/2),v==12&&(ce=(te=ge)*_e)),(_e=s(De+2*se+ce))==null){v=1;break e}q.sd=_e,11>v?((ge=q.f.RGBA).eb=_e,ge.fb=0,ge.A=de,ge.size=De):((ge=q.f.kb).y=_e,ge.O=0,ge.fa=de,ge.Fd=De,ge.f=_e,ge.N=0+De,ge.Ab=S,ge.Cd=se,ge.ea=_e,ge.W=0+De+se,ge.Db=S,ge.Ed=se,v==12&&(ge.F=_e,ge.J=0+De+2*se),ge.Tc=ce,ge.lb=te)}if(S=1,te=q.S,se=q.width,ce=q.height,te>=o0&&13>te)if(11>te)v=q.f.RGBA,S&=(de=Math.abs(v.A))*(ce-1)+se<=v.size,S&=de>=se*zh[te],S&=v.eb!=null;else{v=q.f.kb,de=(se+1)/2,De=(ce+1)/2,ge=Math.abs(v.fa),_e=Math.abs(v.Ab);var qe=Math.abs(v.Db),ke=Math.abs(v.lb),je=ke*(ce-1)+se;S&=ge*(ce-1)+se<=v.Fd,S&=_e*(De-1)+de<=v.Cd,S=(S&=qe*(De-1)+de<=v.Ed)&ge>=se&_e>=de&qe>=de,S&=v.y!=null,S&=v.f!=null,S&=v.ea!=null,te==12&&(S&=ke>=se,S&=je<=v.Tc,S&=v.F!=null)}else S=0;v=S?0:2}}return v!=0||j!=null&&j.fd&&(v=da(q)),v}var pa=64,bc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Rh=24,Ec=32,_i=8,n0=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ue("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(v){return v},T.Predictor2=function(v,S,j){return S[j+0]},T.Predictor3=function(v,S,j){return S[j+1]},T.Predictor4=function(v,S,j){return S[j-1]},T.Predictor5=function(v,S,j){return pt(pt(v,S[j+1]),S[j+0])},T.Predictor6=function(v,S,j){return pt(v,S[j-1])},T.Predictor7=function(v,S,j){return pt(v,S[j+0])},T.Predictor8=function(v,S,j){return pt(S[j-1],S[j+0])},T.Predictor9=function(v,S,j){return pt(S[j+0],S[j+1])},T.Predictor10=function(v,S,j){return pt(pt(v,S[j-1]),pt(S[j+0],S[j+1]))},T.Predictor11=function(v,S,j){var q=S[j+0];return 0>=ht(q>>24&255,v>>24&255,(S=S[j-1])>>24&255)+ht(q>>16&255,v>>16&255,S>>16&255)+ht(q>>8&255,v>>8&255,S>>8&255)+ht(255&q,255&v,255&S)?q:v},T.Predictor12=function(v,S,j){var q=S[j+0];return(xt((v>>24&255)+(q>>24&255)-((S=S[j-1])>>24&255))<<24|xt((v>>16&255)+(q>>16&255)-(S>>16&255))<<16|xt((v>>8&255)+(q>>8&255)-(S>>8&255))<<8|xt((255&v)+(255&q)-(255&S)))>>>0},T.Predictor13=function(v,S,j){var q=S[j-1];return(yt((v=pt(v,S[j+0]))>>24&255,q>>24&255)<<24|yt(v>>16&255,q>>16&255)<<16|yt(v>>8&255,q>>8&255)<<8|yt(255&v,255&q))>>>0};var Da=T.PredictorAdd0;T.PredictorAdd1=Mt,Ue("Predictor2","PredictorAdd2"),Ue("Predictor3","PredictorAdd3"),Ue("Predictor4","PredictorAdd4"),Ue("Predictor5","PredictorAdd5"),Ue("Predictor6","PredictorAdd6"),Ue("Predictor7","PredictorAdd7"),Ue("Predictor8","PredictorAdd8"),Ue("Predictor9","PredictorAdd9"),Ue("Predictor10","PredictorAdd10"),Ue("Predictor11","PredictorAdd11"),Ue("Predictor12","PredictorAdd12"),Ue("Predictor13","PredictorAdd13");var Oa=T.PredictorAdd2;Nt("ColorIndexInverseTransform","MapARGB","32b",function(v){return v>>8&255},function(v){return v}),Nt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(v){return v},function(v){return v>>8&255});var af,Sc=T.ColorIndexInverseTransform,of=T.MapARGB,hu=T.VP8LColorIndexInverseTransformAlpha,ql=T.MapAlpha,Gl=T.VP8LPredictorsAdd=[];Gl.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var gl,lf,Ma,xl,qn,Gn,Fi,Li,as,vl,Go,cf,l1,c1,i0,Vg,Ug,du,s0,uf,a0,u1,Fh,pu,mu,f1,Lh,h1,d1=s(511),p1=s(2041),m1=s(225),g1=s(767),x1=0,yl=p1,ff=m1,ma=g1,ko=d1,o0=0,kc=1,zg=2,Dh=3,Oh=4,On=5,l0=6,hf=7,gu=8,Mh=9,jh=10,Bh=[2,3,7],c0=[3,3,11],xu=[280,256,256,256,40],$g=[0,1,1,1,0],Ey=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Sy=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Hg=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],u0=8,df=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Vh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],vu=null,v1=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],y1=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Wg=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],qg=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ky=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ty=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],w1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ga=[],To=[],ja=[],wl=1,pf=2,Ks=[],Ba=[];Fa("UpsampleRgbLinePair",me,3),Fa("UpsampleBgrLinePair",ze,3),Fa("UpsampleRgbaLinePair",qr,4),Fa("UpsampleBgraLinePair",ii,4),Fa("UpsampleArgbLinePair",dn,4),Fa("UpsampleRgba4444LinePair",It,2),Fa("UpsampleRgb565LinePair",it,2);var Ay=T.UpsampleRgbLinePair,Cy=T.UpsampleBgrLinePair,Tc=T.UpsampleRgbaLinePair,mf=T.UpsampleBgraLinePair,yu=T.UpsampleArgbLinePair,Uh=T.UpsampleRgba4444LinePair,_1=T.UpsampleRgb565LinePair,Kl=16,Ko=1<<Kl-1,An=-227,Rn=482,Ac=6,js=0,Va=s(256),wu=s(256),gf=s(256),Ua=s(256),f0=s(Rn-An),Gg=s(Rn-An);gn("YuvToRgbRow",me,3),gn("YuvToBgrRow",ze,3),gn("YuvToRgbaRow",qr,4),gn("YuvToBgraRow",ii,4),gn("YuvToArgbRow",dn,4),gn("YuvToRgba4444Row",It,2),gn("YuvToRgb565Row",it,2);var b1=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],_u=[0,2,8],Kg=[8,7,6,4,4,2,2,2,1,1,1,1],Xl=1;this.WebPDecodeRGBA=function(v,S,j,q,te){var se=kc,ce=new Qt,de=new ur;ce.ba=de,de.S=se,de.width=[de.width],de.height=[de.height];var ge=de.width,_e=de.height,De=new Yt;if(De==null||v==null)var qe=2;else e(De!=null),qe=qo(v,S,j,De.width,De.height,De.Pd,De.Qd,De.format,null);if(qe!=0?ge=0:(ge!=null&&(ge[0]=De.width[0]),_e!=null&&(_e[0]=De.height[0]),ge=1),ge){de.width=de.width[0],de.height=de.height[0],q!=null&&(q[0]=de.width),te!=null&&(te[0]=de.height);e:{if(q=new En,(te=new xr).data=v,te.w=S,te.ha=j,te.kd=1,S=[0],e(te!=null),((v=qo(te.data,te.w,te.ha,null,null,null,S,null,te))==0||v==7)&&S[0]&&(v=4),(S=v)==0){if(e(ce!=null),q.data=te.data,q.w=te.w+te.offset,q.ha=te.ha-te.offset,q.put=nr,q.ac=In,q.bc=Hr,q.ma=ce,te.xa){if((v=Ge())==null){ce=1;break e}if((function(ke,je){var $e=[0],ct=[0],Ye=[0];t:for(;;){if(ke==null)return 0;if(je==null)return ke.a=2,0;if(ke.l=je,ke.a=0,J(ke.m,je.data,je.w,je.ha),!ns(ke.m,$e,ct,Ye)){ke.a=3;break t}if(ke.xb=pf,je.width=$e[0],je.height=ct[0],!Ke($e[0],ct[0],1,ke,null))break t;return 1}return e(ke.a!=0),0})(v,q)){if(q=(S=_c(q.width,q.height,ce.Oa,ce.ba))==0){t:{q=v;r:for(;;){if(q==null){q=0;break t}if(e(q.s.yc!=null),e(q.s.Ya!=null),e(0<q.s.Wb),e((j=q.l)!=null),e((te=j.ma)!=null),q.xb!=0){if(q.ca=te.ba,q.tb=te.tb,e(q.ca!=null),!ha(te.Oa,j,Dh)){q.a=2;break r}if(!Qe(q,j.width)||j.da)break r;if((j.da||Vt(q.ca.S))&&Ri(),11>q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),q.ca.f.kb.F!=null&&Ri()),q.Pb&&0<q.s.ua&&q.s.vb.X==null&&!fe(q.s.vb,q.s.Wa.Xa)){q.a=1;break r}q.xb=0}if(!He(q,q.V,q.Ba,q.c,q.i,j.o,ve))break r;te.Dc=q.Ma,q=1;break t}e(q.a!=0),q=0}q=!q}q&&(S=v.a)}else S=v.a}else{if((v=new lu)==null){ce=1;break e}if(v.Fa=te.na,v.P=te.P,v.qc=te.Sa,Ul(v,q)){if((S=_c(q.width,q.height,ce.Oa,ce.ba))==0){if(v.Aa=0,j=ce.Oa,e((te=v)!=null),j!=null){if(0<(ge=0>(ge=j.Md)?0:100<ge?255:255*ge/100)){for(_e=De=0;4>_e;++_e)12>(qe=te.pb[_e]).lc&&(qe.ia=ge*Kg[0>qe.lc?0:qe.lc]>>3),De|=qe.ia;De&&(alert("todo:VP8InitRandom"),te.ia=1)}te.Ga=j.Id,100<te.Ga?te.Ga=100:0>te.Ga&&(te.Ga=0)}(function(ke,je){if(ke==null)return 0;if(je==null)return ui(ke,2,"NULL VP8Io parameter in VP8Decode().");if(!ke.cb&&!Ul(ke,je))return 0;if(e(ke.cb),je.ac==null||je.ac(je)){je.ob&&(ke.L=0);var $e=_u[ke.L];if(ke.L==2?(ke.yb=0,ke.zb=0):(ke.yb=je.v-$e>>4,ke.zb=je.j-$e>>4,0>ke.yb&&(ke.yb=0),0>ke.zb&&(ke.zb=0)),ke.Va=je.o+15+$e>>4,ke.Hb=je.va+15+$e>>4,ke.Hb>ke.za&&(ke.Hb=ke.za),ke.Va>ke.Ub&&(ke.Va=ke.Ub),0<ke.L){var ct=ke.ed;for($e=0;4>$e;++$e){var Ye;if(ke.Qa.Cb){var at=ke.Qa.Lb[$e];ke.Qa.Fb||(at+=ct.Tb)}else at=ct.Tb;for(Ye=0;1>=Ye;++Ye){var lt=ke.gd[$e][Ye],mt=at;if(ct.Pc&&(mt+=ct.vd[0],Ye&&(mt+=ct.od[0])),0<(mt=0>mt?0:63<mt?63:mt)){var gt=mt;0<ct.wb&&(gt=4<ct.wb?gt>>2:gt>>1)>9-ct.wb&&(gt=9-ct.wb),1>gt&&(gt=1),lt.dd=gt,lt.tc=2*mt+gt,lt.ld=40<=mt?2:15<=mt?1:0}else lt.tc=0;lt.La=Ye}}}$e=0}else ui(ke,6,"Frame setup failed"),$e=ke.a;if($e=$e==0){if($e){ke.$c=0,0<ke.Aa||(ke.Ic=Xl);t:{$e=ke.Ic,ct=4*(gt=ke.za);var hr=32*gt,Jt=gt+1,Or=0<ke.L?gt*(0<ke.Aa?2:1):0,ir=(ke.Aa==2?2:1)*gt;if((lt=ct+832+(Ye=3*(16*$e+_u[ke.L])/2*hr)+(at=ke.Fa!=null&&0<ke.Fa.length?ke.Kc.c*ke.Kc.i:0))!=lt)$e=0;else{if(lt>ke.Vb){if(ke.Vb=0,ke.Ec=s(lt),ke.Fc=0,ke.Ec==null){$e=ui(ke,1,"no memory during frame initialization.");break t}ke.Vb=lt}lt=ke.Ec,mt=ke.Fc,ke.Ac=lt,ke.Bc=mt,mt+=ct,ke.Gd=a(hr,ni),ke.Hd=0,ke.rb=a(Jt+1,fn),ke.sb=1,ke.wa=Or?a(Or,Dr):null,ke.Y=0,ke.D.Nb=0,ke.D.wa=ke.wa,ke.D.Y=ke.Y,0<ke.Aa&&(ke.D.Y+=gt),e(!0),ke.oc=lt,ke.pc=mt,mt+=832,ke.ya=a(ir,Ca),ke.aa=0,ke.D.ya=ke.ya,ke.D.aa=ke.aa,ke.Aa==2&&(ke.D.aa+=gt),ke.R=16*gt,ke.B=8*gt,gt=(hr=_u[ke.L])*ke.R,hr=hr/2*ke.B,ke.sa=lt,ke.ta=mt+gt,ke.qa=ke.sa,ke.ra=ke.ta+16*$e*ke.R+hr,ke.Ha=ke.qa,ke.Ia=ke.ra+8*$e*ke.B+hr,ke.$c=0,mt+=Ye,ke.mb=at?lt:null,ke.nb=at?mt:null,e(mt+at<=ke.Fc+ke.Vb),Na(ke),i(ke.Ac,ke.Bc,0,ct),$e=1}}if($e){if(je.ka=0,je.y=ke.sa,je.O=ke.ta,je.f=ke.qa,je.N=ke.ra,je.ea=ke.Ha,je.Vd=ke.Ia,je.fa=ke.R,je.Rc=ke.B,je.F=null,je.J=0,!x1){for($e=-255;255>=$e;++$e)d1[255+$e]=0>$e?-$e:$e;for($e=-1020;1020>=$e;++$e)p1[1020+$e]=-128>$e?-128:127<$e?127:$e;for($e=-112;112>=$e;++$e)m1[112+$e]=-16>$e?-16:15<$e?15:$e;for($e=-255;510>=$e;++$e)g1[255+$e]=0>$e?0:255<$e?255:$e;x1=1}Fi=Wr,Li=fl,vl=hl,Go=Yr,cf=Vo,as=$l,l1=L,c1=Z,i0=Ve,Vg=dt,Ug=Se,du=Le,s0=vt,uf=Gt,a0=Os,u1=Eo,Fh=ys,pu=Hl,To[0]=Ph,To[1]=gc,To[2]=Pa,To[3]=_o,To[4]=nf,To[5]=zo,To[6]=yi,To[7]=sf,To[8]=bo,To[9]=$o,ga[0]=Fs,ga[1]=tf,ga[2]=rf,ga[3]=vc,ga[4]=is,ga[5]=Ls,ga[6]=ua,ja[0]=Ra,ja[1]=xc,ja[2]=yc,ja[3]=Ds,ja[4]=Nn,ja[5]=dl,ja[6]=uu,$e=1}else $e=0}$e&&($e=(function(Jr,bi){for(Jr.M=0;Jr.M<Jr.Va;++Jr.M){var Mr,Zt=Jr.Jc[Jr.M&Jr.Xb],zt=Jr.m,Di=Jr;for(Mr=0;Mr<Di.za;++Mr){var Cr=zt,Gr=Di,Kn=Gr.Ac,_s=Gr.Bc+4*Mr,Wi=Gr.zc,fi=Gr.ya[Gr.aa+Mr];if(Gr.Qa.Bb?fi.$b=Ee(Cr,Gr.Pa.jb[0])?2+Ee(Cr,Gr.Pa.jb[2]):Ee(Cr,Gr.Pa.jb[1]):fi.$b=0,Gr.kc&&(fi.Ad=Ee(Cr,Gr.Bd)),fi.Za=!Ee(Cr,145)+0,fi.Za){var os=fi.Ob,bs=0;for(Gr=0;4>Gr;++Gr){var si,sn=Wi[0+Gr];for(si=0;4>si;++si){sn=ky[Kn[_s+si]][sn];for(var xn=Wg[Ee(Cr,sn[0])];0<xn;)xn=Wg[2*xn+Ee(Cr,sn[xn])];sn=-xn,Kn[_s+si]=sn}n(os,bs,Kn,_s,4),bs+=4,Wi[0+Gr]=sn}}else sn=Ee(Cr,156)?Ee(Cr,128)?1:3:Ee(Cr,163)?2:0,fi.Ob[0]=sn,i(Kn,_s,sn,4),i(Wi,0,sn,4);fi.Dd=Ee(Cr,142)?Ee(Cr,114)?Ee(Cr,183)?1:3:2:0}if(Di.m.Ka)return ui(Jr,7,"Premature end-of-partition0 encountered.");for(;Jr.ja<Jr.za;++Jr.ja){if(Di=Zt,Cr=(zt=Jr).rb[zt.sb-1],Kn=zt.rb[zt.sb+zt.ja],Mr=zt.ya[zt.aa+zt.ja],_s=zt.kc?Mr.Ad:0)Cr.la=Kn.la=0,Mr.Za||(Cr.Na=Kn.Na=0),Mr.Hc=0,Mr.Gc=0,Mr.ia=0;else{var ai,vn;if(Cr=Kn,Kn=Di,_s=zt.Pa.Xc,Wi=zt.ya[zt.aa+zt.ja],fi=zt.pb[Wi.$b],Gr=Wi.ad,os=0,bs=zt.rb[zt.sb-1],sn=si=0,i(Gr,os,0,384),Wi.Za)var Ei=0,Si=_s[3];else{xn=s(16);var Mn=Cr.Na+bs.Na;if(Mn=vu(Kn,_s[1],Mn,fi.Eb,0,xn,0),Cr.Na=bs.Na=(0<Mn)+0,1<Mn)Fi(xn,0,Gr,os);else{var Xs=xn[0]+3>>3;for(xn=0;256>xn;xn+=16)Gr[os+xn]=Xs}Ei=1,Si=_s[0]}var Fn=15&Cr.la,jn=15&bs.la;for(xn=0;4>xn;++xn){var qi=1&jn;for(Xs=vn=0;4>Xs;++Xs)Fn=Fn>>1|(qi=(Mn=vu(Kn,Si,Mn=qi+(1&Fn),fi.Sc,Ei,Gr,os))>Ei)<<7,vn=vn<<2|(3<Mn?3:1<Mn?2:Gr[os+0]!=0),os+=16;Fn>>=4,jn=jn>>1|qi<<7,si=(si<<8|vn)>>>0}for(Si=Fn,Ei=jn>>4,ai=0;4>ai;ai+=2){for(vn=0,Fn=Cr.la>>4+ai,jn=bs.la>>4+ai,xn=0;2>xn;++xn){for(qi=1&jn,Xs=0;2>Xs;++Xs)Mn=qi+(1&Fn),Fn=Fn>>1|(qi=0<(Mn=vu(Kn,_s[2],Mn,fi.Qc,0,Gr,os)))<<3,vn=vn<<2|(3<Mn?3:1<Mn?2:Gr[os+0]!=0),os+=16;Fn>>=2,jn=jn>>1|qi<<5}sn|=vn<<4*ai,Si|=Fn<<4<<ai,Ei|=(240&jn)<<ai}Cr.la=Si,bs.la=Ei,Wi.Hc=si,Wi.Gc=sn,Wi.ia=43690&sn?0:fi.ia,_s=!(si|sn)}if(0<zt.L&&(zt.wa[zt.Y+zt.ja]=zt.gd[Mr.$b][Mr.Za],zt.wa[zt.Y+zt.ja].La|=!_s),Di.Ka)return ui(Jr,7,"Premature end-of-file encountered.")}if(Na(Jr),zt=bi,Di=1,Mr=(Zt=Jr).D,Cr=0<Zt.L&&Zt.M>=Zt.zb&&Zt.M<=Zt.Va,Zt.Aa==0)t:{if(Mr.M=Zt.M,Mr.uc=Cr,La(Zt,Mr),Di=1,Mr=(vn=Zt.D).Nb,Cr=(sn=_u[Zt.L])*Zt.R,Kn=sn/2*Zt.B,xn=16*Mr*Zt.R,Xs=8*Mr*Zt.B,_s=Zt.sa,Wi=Zt.ta-Cr+xn,fi=Zt.qa,Gr=Zt.ra-Kn+Xs,os=Zt.Ha,bs=Zt.Ia-Kn+Xs,jn=(Fn=vn.M)==0,si=Fn>=Zt.Va-1,Zt.Aa==2&&La(Zt,vn),vn.uc)for(qi=(Mn=Zt).D.M,e(Mn.D.uc),vn=Mn.yb;vn<Mn.Hb;++vn){Ei=vn,Si=qi;var Bs=(za=(ji=Mn).D).Nb;ai=ji.R;var za=za.wa[za.Y+Ei],Oi=ji.sa,Mi=ji.ta+16*Bs*ai+16*Ei,Ys=za.dd,Bn=za.tc;if(Bn!=0)if(e(3<=Bn),ji.L==1)0<Ei&&u1(Oi,Mi,ai,Bn+4),za.La&&pu(Oi,Mi,ai,Bn),0<Si&&a0(Oi,Mi,ai,Bn+4),za.La&&Fh(Oi,Mi,ai,Bn);else{var Qs=ji.B,Ao=ji.qa,Xo=ji.ra+8*Bs*Qs+8*Ei,Es=ji.Ha,ji=ji.Ia+8*Bs*Qs+8*Ei;Bs=za.ld,0<Ei&&(c1(Oi,Mi,ai,Bn+4,Ys,Bs),Vg(Ao,Xo,Es,ji,Qs,Bn+4,Ys,Bs)),za.La&&(du(Oi,Mi,ai,Bn,Ys,Bs),uf(Ao,Xo,Es,ji,Qs,Bn,Ys,Bs)),0<Si&&(l1(Oi,Mi,ai,Bn+4,Ys,Bs),i0(Ao,Xo,Es,ji,Qs,Bn+4,Ys,Bs)),za.La&&(Ug(Oi,Mi,ai,Bn,Ys,Bs),s0(Ao,Xo,Es,ji,Qs,Bn,Ys,Bs))}}if(Zt.ia&&alert("todo:DitherRow"),zt.put!=null){if(vn=16*Fn,Fn=16*(Fn+1),jn?(zt.y=Zt.sa,zt.O=Zt.ta+xn,zt.f=Zt.qa,zt.N=Zt.ra+Xs,zt.ea=Zt.Ha,zt.W=Zt.Ia+Xs):(vn-=sn,zt.y=_s,zt.O=Wi,zt.f=fi,zt.N=Gr,zt.ea=os,zt.W=bs),si||(Fn-=sn),Fn>zt.o&&(Fn=zt.o),zt.F=null,zt.J=null,Zt.Fa!=null&&0<Zt.Fa.length&&vn<Fn&&(zt.J=Hi(Zt,zt,vn,Fn-vn),zt.F=Zt.mb,zt.F==null&&zt.F.length==0)){Di=ui(Zt,3,"Could not decode alpha data.");break t}vn<zt.j&&(sn=zt.j-vn,vn=zt.j,e(!(1&sn)),zt.O+=Zt.R*sn,zt.N+=Zt.B*(sn>>1),zt.W+=Zt.B*(sn>>1),zt.F!=null&&(zt.J+=zt.width*sn)),vn<Fn&&(zt.O+=zt.v,zt.N+=zt.v>>1,zt.W+=zt.v>>1,zt.F!=null&&(zt.J+=zt.v),zt.ka=vn-zt.j,zt.U=zt.va-zt.v,zt.T=Fn-vn,Di=zt.put(zt))}Mr+1!=Zt.Ic||si||(n(Zt.sa,Zt.ta-Cr,_s,Wi+16*Zt.R,Cr),n(Zt.qa,Zt.ra-Kn,fi,Gr+8*Zt.B,Kn),n(Zt.Ha,Zt.Ia-Kn,os,bs+8*Zt.B,Kn))}if(!Di)return ui(Jr,6,"Output aborted.")}return 1})(ke,je)),je.bc!=null&&je.bc(je),$e&=1}return $e?(ke.cb=0,$e):0})(v,q)||(S=v.a)}}else S=v.a}S==0&&ce.Oa!=null&&ce.Oa.fd&&(S=da(ce.ba))}ce=S}se=ce!=0?null:11>se?de.f.RGBA.eb:de.f.kb.y}else se=null;return se};var zh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(T,O){for(var I="",D=0;D<4;D++)I+=String.fromCharCode(T[O++]);return I}function f(T,O){return T[O+0]|T[O+1]<<8}function d(T,O){return(T[O+0]|T[O+1]<<8|T[O+2]<<16)>>>0}function m(T,O){return(T[O+0]|T[O+1]<<8|T[O+2]<<16|T[O+3]<<24)>>>0}new l;var p=[0],_=[0],w=[],b=new l,k=t,F=(function(T,O){var I={},D=0,M=!1,ie=0,be=0;if(I.frames=[],!(function(C,U){for(var W=0;W<4;W++)if(C[U+W]!="RIFF".charCodeAt(W))return!0;return!1})(T,O)){for(m(T,O+=4),O+=8;O<T.length;){var Ne=c(T,O),we=m(T,O+=4);O+=4;var le=we+(1&we);switch(Ne){case"VP8 ":case"VP8L":I.frames[D]===void 0&&(I.frames[D]={}),(ee=I.frames[D]).src_off=M?be:O-8,ee.src_size=ie+we+8,D++,M&&(M=!1,ie=0,be=0);break;case"VP8X":(ee=I.header={}).feature_flags=T[O];var J=O+4;ee.canvas_width=1+d(T,J),J+=3,ee.canvas_height=1+d(T,J),J+=3;break;case"ALPH":M=!0,ie=le+8,be=O-8;break;case"ANIM":(ee=I.header).bgcolor=m(T,O),J=O+4,ee.loop_count=f(T,J),J+=2;break;case"ANMF":var ue,ee;(ee=I.frames[D]={}).offset_x=2*d(T,O),O+=3,ee.offset_y=2*d(T,O),O+=3,ee.width=1+d(T,O),O+=3,ee.height=1+d(T,O),O+=3,ee.duration=d(T,O),O+=3,ue=T[O++],ee.dispose=1&ue,ee.blend=ue>>1&1}Ne!="ANMF"&&(O+=le)}return I}})(k,0);F.response=k,F.rgbaoutput=!0,F.dataurl=!1;var N=F.header?F.header:null,B=F.frames?F.frames:null;if(N){N.loop_counter=N.loop_count,p=[N.canvas_height],_=[N.canvas_width];for(var X=0;X<B.length&&B[X].blend!=0;X++);}var G=B[0],P=b.WebPDecodeRGBA(k,G.src_off,G.src_size,_,p);G.rgba=P,G.imgwidth=_[0],G.imgheight=p[0];for(var A=0;A<_[0]*p[0]*4;A++)w[A]=P[A];return this.width=_,this.height=p,this.data=w,this}(function(t){var e,r,n,i,s,a,o,l,c,f=function(C){return C=C||{},this.isStrokeTransparent=C.isStrokeTransparent||!1,this.strokeOpacity=C.strokeOpacity||1,this.strokeStyle=C.strokeStyle||"#000000",this.fillStyle=C.fillStyle||"#000000",this.isFillTransparent=C.isFillTransparent||!1,this.fillOpacity=C.fillOpacity||1,this.font=C.font||"10px sans-serif",this.textBaseline=C.textBaseline||"alphabetic",this.textAlign=C.textAlign||"left",this.lineWidth=C.lineWidth||1,this.lineJoin=C.lineJoin||"miter",this.lineCap=C.lineCap||"butt",this.path=C.path||[],this.transform=C.transform!==void 0?C.transform.clone():new l,this.globalCompositeOperation=C.globalCompositeOperation||"normal",this.globalAlpha=C.globalAlpha||1,this.clip_path=C.clip_path||[],this.currentPoint=C.currentPoint||new a,this.miterLimit=C.miterLimit||10,this.lastPoint=C.lastPoint||new a,this.lineDashOffset=C.lineDashOffset||0,this.lineDash=C.lineDash||[],this.margin=C.margin||[0,0,0,0],this.prevPageLastElemOffset=C.prevPageLastElemOffset||0,this.ignoreClearRect=typeof C.ignoreClearRect!="boolean"||C.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new f}]);var d=function(C){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=C;Object.defineProperty(this,"pdf",{get:function(){return U}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(Re){W=!!Re}});var Y=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Y},set:function(Re){Y=!!Re}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(Re){isNaN(Re)||(ae=Re)}});var pe=0;Object.defineProperty(this,"posY",{get:function(){return pe},set:function(Re){isNaN(Re)||(pe=Re)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Re){var fe;typeof Re=="number"?fe=[Re,Re,Re,Re]:((fe=new Array(4))[0]=Re[0],fe[1]=Re.length>=2?Re[1]:fe[0],fe[2]=Re.length>=3?Re[2]:fe[0],fe[3]=Re.length>=4?Re[3]:fe[1]),c.margin=fe}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(Re){he=Re}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(Re){xe=Re}});var Ee=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ee},set:function(Re){Ee=Re}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Re){Re instanceof f&&(c=Re)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Re){c.path=Re}});var Fe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Fe},set:function(Re){Fe=Re}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Re){var fe;fe=m(Re),this.ctx.fillStyle=fe.style,this.ctx.isFillTransparent=fe.a===0,this.ctx.fillOpacity=fe.a,this.pdf.setFillColor(fe.r,fe.g,fe.b,{a:fe.a}),this.pdf.setTextColor(fe.r,fe.g,fe.b,{a:fe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Re){var fe=m(Re);this.ctx.strokeStyle=fe.style,this.ctx.isStrokeTransparent=fe.a===0,this.ctx.strokeOpacity=fe.a,fe.a===0?this.pdf.setDrawColor(255,255,255):(fe.a,this.pdf.setDrawColor(fe.r,fe.g,fe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Re){["butt","round","square"].indexOf(Re)!==-1&&(this.ctx.lineCap=Re,this.pdf.setLineCap(Re))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Re){isNaN(Re)||(this.ctx.lineWidth=Re,this.pdf.setLineWidth(Re))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Re){["bevel","round","miter"].indexOf(Re)!==-1&&(this.ctx.lineJoin=Re,this.pdf.setLineJoin(Re))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Re){isNaN(Re)||(this.ctx.miterLimit=Re,this.pdf.setMiterLimit(Re))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Re){this.ctx.textBaseline=Re}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Re){["right","end","center","left","start"].indexOf(Re)!==-1&&(this.ctx.textAlign=Re)}});var oe=null,Je=null;Object.defineProperty(this,"fontFaces",{get:function(){return Je},set:function(Re){oe=null,Je=Re}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Re){var fe;if(this.ctx.font=Re,(fe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Re))!==null){var ot=fe[1];fe[2];var et=fe[3],st=fe[4];fe[5];var K=fe[6],Te=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(st)[2];st=Math.floor(Te==="px"?parseFloat(st)*this.pdf.internal.scaleFactor:Te==="em"?parseFloat(st)*this.pdf.getFontSize():parseFloat(st)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(st);var Ue=(function(wt){var Nt,cr,er=[],qt=wt.trim();if(qt==="")return __;if(qt in FA)return[FA[qt]];for(;qt!=="";){switch(cr=null,Nt=(qt=DA(qt)).charAt(0)){case'"':case"'":cr=Wue(qt.substring(1),Nt);break;default:cr=que(qt)}if(cr===null||(er.push(cr[0]),(qt=DA(cr[1]))!==""&&qt.charAt(0)!==","))return __;qt=qt.replace(/^,/,"")}return er})(K);if(this.fontFaces){var ut=(function(wt,Nt){if(oe===null){var cr=(function(er){var qt=[];return Object.keys(er).forEach(function(wr){er[wr].forEach(function(rn){var Me=null;switch(rn){case"bold":Me={family:wr,weight:"bold"};break;case"italic":Me={family:wr,style:"italic"};break;case"bolditalic":Me={family:wr,weight:"bold",style:"italic"};break;case"":case"normal":Me={family:wr}}Me!==null&&(Me.ref={name:wr,style:rn},qt.push(Me))})}),qt})(wt.getFontList());oe=(function(er){for(var qt={},wr=0;wr<er.length;++wr){var rn=w_(er[wr]),Me=rn.family,jt=rn.stretch,Vt=rn.style,tr=rn.weight;qt[Me]=qt[Me]||{},qt[Me][jt]=qt[Me][jt]||{},qt[Me][jt][Vt]=qt[Me][jt][Vt]||{},qt[Me][jt][Vt][tr]=rn}return qt})(cr.concat(Nt))}return oe})(this.pdf,this.fontFaces),pt=Ue.map(function(wt){return{family:wt,stretch:"normal",weight:et,style:ot}}),xt=(function(wt,Nt,cr){for(var er=(cr=cr||{}).defaultFontFamily||"times",qt=Object.assign({},Hue,cr.genericFontFamilies||{}),wr=null,rn=null,Me=0;Me<Nt.length;++Me)if(qt[(wr=w_(Nt[Me])).family]&&(wr.family=qt[wr.family]),wt.hasOwnProperty(wr.family)){rn=wt[wr.family];break}if(!(rn=rn||wt[er]))throw new Error("Could not find a font-family for the rule '"+LA(wr)+"' and default family '"+er+"'.");if(rn=(function(jt,Vt){if(Vt[jt])return Vt[jt];var tr=H5[jt],sr=tr<=H5.normal?-1:1,ur=RA(Vt,R9,tr,sr);if(!ur)throw new Error("Could not find a matching font-stretch value for "+jt);return ur})(wr.stretch,rn),rn=(function(jt,Vt){if(Vt[jt])return Vt[jt];for(var tr=P9[jt],sr=0;sr<tr.length;++sr)if(Vt[tr[sr]])return Vt[tr[sr]];throw new Error("Could not find a matching font-style for "+jt)})(wr.style,rn),!(rn=(function(jt,Vt){if(Vt[jt])return Vt[jt];if(jt===400&&Vt[500])return Vt[500];if(jt===500&&Vt[400])return Vt[400];var tr=$ue[jt],sr=RA(Vt,F9,tr,jt<400?-1:1);if(!sr)throw new Error("Could not find a matching font-weight for value "+jt);return sr})(wr.weight,rn)))throw new Error("Failed to resolve a font for the rule '"+LA(wr)+"'.");return rn})(ut,pt);this.pdf.setFont(xt.ref.name,xt.ref.style)}else{var yt="";(et==="bold"||parseInt(et,10)>=700||ot==="bold")&&(yt="bold"),ot==="italic"&&(yt+="italic"),yt.length===0&&(yt="normal");for(var ht="",Mt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Lt=0;Lt<Ue.length;Lt++){if(this.pdf.internal.getFont(Ue[Lt],yt,{noFallback:!0,disableWarning:!0})!==void 0){ht=Ue[Lt];break}if(yt==="bolditalic"&&this.pdf.internal.getFont(Ue[Lt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ht=Ue[Lt],yt="bold";else if(this.pdf.internal.getFont(Ue[Lt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ht=Ue[Lt],yt="normal";break}}if(ht===""){for(var Ot=0;Ot<Ue.length;Ot++)if(Mt[Ue[Ot]]){ht=Mt[Ue[Ot]];break}}ht=ht===""?"Times":ht,this.pdf.setFont(ht,yt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Re){this.ctx.globalCompositeOperation=Re}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Re){this.ctx.globalAlpha=Re}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Re){this.ctx.lineDashOffset=Re,ee.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Re){this.ctx.lineDash=Re,ee.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Re){this.ctx.ignoreClearRect=!!Re}})};d.prototype.setLineDash=function(C){this.lineDash=C},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){B.call(this,"fill",!1)},d.prototype.stroke=function(){B.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(C,U){if(isNaN(C)||isNaN(U))throw ti.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new a(C,U));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new a(C,U)},d.prototype.closePath=function(){var C=new a(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&zn(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){C=new a(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(C.x,C.y)},d.prototype.lineTo=function(C,U){if(isNaN(C)||isNaN(U))throw ti.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new a(C,U));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new a(W.x,W.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),B.call(this,null,!0)},d.prototype.quadraticCurveTo=function(C,U,W,Y){if(isNaN(W)||isNaN(Y)||isNaN(C)||isNaN(U))throw ti.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new a(W,Y)),pe=this.ctx.transform.applyToPoint(new a(C,U));this.path.push({type:"qct",x1:pe.x,y1:pe.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new a(ae.x,ae.y)},d.prototype.bezierCurveTo=function(C,U,W,Y,ae,pe){if(isNaN(ae)||isNaN(pe)||isNaN(C)||isNaN(U)||isNaN(W)||isNaN(Y))throw ti.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new a(ae,pe)),xe=this.ctx.transform.applyToPoint(new a(C,U)),Ee=this.ctx.transform.applyToPoint(new a(W,Y));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:Ee.x,y2:Ee.y,x:he.x,y:he.y}),this.ctx.lastPoint=new a(he.x,he.y)},d.prototype.arc=function(C,U,W,Y,ae,pe){if(isNaN(C)||isNaN(U)||isNaN(W)||isNaN(Y)||isNaN(ae))throw ti.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pe=!!pe,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new a(C,U));C=he.x,U=he.y;var xe=this.ctx.transform.applyToPoint(new a(0,W)),Ee=this.ctx.transform.applyToPoint(new a(0,0));W=Math.sqrt(Math.pow(xe.x-Ee.x,2)+Math.pow(xe.y-Ee.y,2))}Math.abs(ae-Y)>=2*Math.PI&&(Y=0,ae=2*Math.PI),this.path.push({type:"arc",x:C,y:U,radius:W,startAngle:Y,endAngle:ae,counterclockwise:pe})},d.prototype.arcTo=function(C,U,W,Y,ae){throw new Error("arcTo not implemented.")},d.prototype.rect=function(C,U,W,Y){if(isNaN(C)||isNaN(U)||isNaN(W)||isNaN(Y))throw ti.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(C,U),this.lineTo(C+W,U),this.lineTo(C+W,U+Y),this.lineTo(C,U+Y),this.lineTo(C,U),this.lineTo(C+W,U),this.lineTo(C,U)},d.prototype.fillRect=function(C,U,W,Y){if(isNaN(C)||isNaN(U)||isNaN(W)||isNaN(Y))throw ti.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(C,U,W,Y),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},d.prototype.strokeRect=function(C,U,W,Y){if(isNaN(C)||isNaN(U)||isNaN(W)||isNaN(Y))throw ti.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(C,U,W,Y),this.stroke())},d.prototype.clearRect=function(C,U,W,Y){if(isNaN(C)||isNaN(U)||isNaN(W)||isNaN(Y))throw ti.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(C,U,W,Y))},d.prototype.save=function(C){C=typeof C!="boolean"||C;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),C){this.ctx.fontSize=this.pdf.internal.getFontSize();var Y=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Y}},d.prototype.restore=function(C){C=typeof C!="boolean"||C;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(U),C&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(C){var U,W,Y,ae;if(C.isCanvasGradient===!0&&(C=C.getColor()),!C)return{r:0,g:0,b:0,a:0,style:C};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(C))U=0,W=0,Y=0,ae=0;else{var pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(C);if(pe!==null)U=parseInt(pe[1]),W=parseInt(pe[2]),Y=parseInt(pe[3]),ae=1;else if((pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(C))!==null)U=parseInt(pe[1]),W=parseInt(pe[2]),Y=parseInt(pe[3]),ae=parseFloat(pe[4]);else{if(ae=1,typeof C=="string"&&C.charAt(0)!=="#"){var he=new S9(C);C=he.ok?he.toHex():"#000000"}C.length===4?(U=C.substring(1,2),U+=U,W=C.substring(2,3),W+=W,Y=C.substring(3,4),Y+=Y):(U=C.substring(1,3),W=C.substring(3,5),Y=C.substring(5,7)),U=parseInt(U,16),W=parseInt(W,16),Y=parseInt(Y,16)}}return{r:U,g:W,b:Y,a:ae,style:C}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},_=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(C,U,W,Y){if(isNaN(U)||isNaN(W)||typeof C!="string")throw ti.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Y=isNaN(Y)?void 0:Y,!p.call(this)){var ae=le(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;D.call(this,{text:C,x:U,y:W,scale:pe,angle:ae,align:this.textAlign,maxWidth:Y})}},d.prototype.strokeText=function(C,U,W,Y){if(isNaN(U)||isNaN(W)||typeof C!="string")throw ti.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){Y=isNaN(Y)?void 0:Y;var ae=le(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;D.call(this,{text:C,x:U,y:W,scale:pe,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:Y})}},d.prototype.measureText=function(C){if(typeof C!="string")throw ti.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,W=this.pdf.internal.scaleFactor,Y=U.internal.getFontSize(),ae=U.getStringUnitWidth(C)*Y/U.internal.scaleFactor;return new function(pe){var he=(pe=pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this}({width:ae*=Math.round(96*W/72*1e4)/1e4})},d.prototype.scale=function(C,U){if(isNaN(C)||isNaN(U))throw ti.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new l(C,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},d.prototype.rotate=function(C){if(isNaN(C))throw ti.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new l(Math.cos(C),Math.sin(C),-Math.sin(C),Math.cos(C),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},d.prototype.translate=function(C,U){if(isNaN(C)||isNaN(U))throw ti.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new l(1,0,0,1,C,U);this.ctx.transform=this.ctx.transform.multiply(W)},d.prototype.transform=function(C,U,W,Y,ae,pe){if(isNaN(C)||isNaN(U)||isNaN(W)||isNaN(Y)||isNaN(ae)||isNaN(pe))throw ti.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new l(C,U,W,Y,ae,pe);this.ctx.transform=this.ctx.transform.multiply(he)},d.prototype.setTransform=function(C,U,W,Y,ae,pe){C=isNaN(C)?1:C,U=isNaN(U)?0:U,W=isNaN(W)?0:W,Y=isNaN(Y)?1:Y,ae=isNaN(ae)?0:ae,pe=isNaN(pe)?0:pe,this.ctx.transform=new l(C,U,W,Y,ae,pe)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(C,U,W,Y,ae,pe,he,xe,Ee){var Fe=this.pdf.getImageProperties(C),oe=1,Je=1,Re=1,fe=1;Y!==void 0&&xe!==void 0&&(Re=xe/Y,fe=Ee/ae,oe=Fe.width/Y*xe/Y,Je=Fe.height/ae*Ee/ae),pe===void 0&&(pe=U,he=W,U=0,W=0),Y!==void 0&&xe===void 0&&(xe=Y,Ee=ae),Y===void 0&&xe===void 0&&(xe=Fe.width,Ee=Fe.height);for(var ot,et=this.ctx.transform.decompose(),st=le(et.rotate.shx),K=new l,Te=(K=(K=(K=K.multiply(et.translate)).multiply(et.skew)).multiply(et.scale)).applyToRectangle(new o(pe-U*Re,he-W*fe,Y*oe,ae*Je)),Ue=b.call(this,Te),ut=[],pt=0;pt<Ue.length;pt+=1)ut.indexOf(Ue[pt])===-1&&ut.push(Ue[pt]);if(N(ut),this.autoPaging)for(var xt=ut[0],yt=ut[ut.length-1],ht=xt;ht<yt+1;ht++){this.pdf.setPage(ht);var Mt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Lt=ht===1?this.posY+this.margin[0]:this.margin[0],Ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Nt=ht===1?0:Ot+(ht-2)*wt;if(this.ctx.clip_path.length!==0){var cr=this.path;ot=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(ot,this.posX+this.margin[3],-Nt+Lt+this.ctx.prevPageLastElemOffset),X.call(this,"fill",!0),this.path=cr}var er=JSON.parse(JSON.stringify(Te));er=F([er],this.posX+this.margin[3],-Nt+Lt+this.ctx.prevPageLastElemOffset)[0];var qt=(ht>xt||ht<yt)&&w.call(this);qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mt,wt,null).clip().discardPath()),this.pdf.addImage(C,"JPEG",er.x,er.y,er.w,er.h,null,null,st),qt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(C,"JPEG",Te.x,Te.y,Te.w,Te.h,null,null,st)};var b=function(C,U,W){var Y=[];U=U||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(C.type){default:case"mt":case"lt":Y.push(Math.floor((C.y+ae)/W)+1);break;case"arc":Y.push(Math.floor((C.y+ae-C.radius)/W)+1),Y.push(Math.floor((C.y+ae+C.radius)/W)+1);break;case"qct":var pe=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x,C.y);Y.push(Math.floor((pe.y+ae)/W)+1),Y.push(Math.floor((pe.y+pe.h+ae)/W)+1);break;case"bct":var he=ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x2,C.y2,C.x,C.y);Y.push(Math.floor((he.y+ae)/W)+1),Y.push(Math.floor((he.y+he.h+ae)/W)+1);break;case"rect":Y.push(Math.floor((C.y+ae)/W)+1),Y.push(Math.floor((C.y+C.h+ae)/W)+1)}for(var xe=0;xe<Y.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<Y[xe];)k.call(this);return Y},k=function(){var C=this.fillStyle,U=this.strokeStyle,W=this.font,Y=this.lineCap,ae=this.lineWidth,pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=C,this.strokeStyle=U,this.font=W,this.lineCap=Y,this.lineWidth=ae,this.lineJoin=pe},F=function(C,U,W){for(var Y=0;Y<C.length;Y++)switch(C[Y].type){case"bct":C[Y].x2+=U,C[Y].y2+=W;case"qct":C[Y].x1+=U,C[Y].y1+=W;default:C[Y].x+=U,C[Y].y+=W}return C},N=function(C){return C.sort(function(U,W){return U-W})},B=function(C,U){for(var W,Y,ae=this.fillStyle,pe=this.strokeStyle,he=this.lineCap,xe=this.lineWidth,Ee=Math.abs(xe*this.ctx.transform.scaleX),Fe=this.lineJoin,oe=JSON.parse(JSON.stringify(this.path)),Je=JSON.parse(JSON.stringify(this.path)),Re=[],fe=0;fe<Je.length;fe++)if(Je[fe].x!==void 0)for(var ot=b.call(this,Je[fe]),et=0;et<ot.length;et+=1)Re.indexOf(ot[et])===-1&&Re.push(ot[et]);for(var st=0;st<Re.length;st++)for(;this.pdf.internal.getNumberOfPages()<Re[st];)k.call(this);if(N(Re),this.autoPaging)for(var K=Re[0],Te=Re[Re.length-1],Ue=K;Ue<Te+1;Ue++){this.pdf.setPage(Ue),this.fillStyle=ae,this.strokeStyle=pe,this.lineCap=he,this.lineWidth=Ee,this.lineJoin=Fe;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pt=Ue===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ht=Ue===1?0:xt+(Ue-2)*yt;if(this.ctx.clip_path.length!==0){var Mt=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(W,this.posX+this.margin[3],-ht+pt+this.ctx.prevPageLastElemOffset),X.call(this,C,!0),this.path=Mt}if(Y=JSON.parse(JSON.stringify(oe)),this.path=F(Y,this.posX+this.margin[3],-ht+pt+this.ctx.prevPageLastElemOffset),U===!1||Ue===0){var Lt=(Ue>K||Ue<Te)&&w.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,yt,null).clip().discardPath()),X.call(this,C,U),Lt&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=Ee,X.call(this,C,U),this.lineWidth=xe;this.path=oe},X=function(C,U){if((C!=="stroke"||U||!_.call(this))&&(C==="stroke"||U||!p.call(this))){for(var W,Y,ae=[],pe=this.path,he=0;he<pe.length;he++){var xe=pe[he];switch(xe.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:xe,deltas:[],abs:[]});break;case"lt":var Ee=ae.length;if(pe[he-1]&&!isNaN(pe[he-1].x)&&(W=[xe.x-pe[he-1].x,xe.y-pe[he-1].y],Ee>0)){for(;Ee>=0;Ee--)if(ae[Ee-1].close!==!0&&ae[Ee-1].begin!==!0){ae[Ee-1].deltas.push(W),ae[Ee-1].abs.push(xe);break}}break;case"bct":W=[xe.x1-pe[he-1].x,xe.y1-pe[he-1].y,xe.x2-pe[he-1].x,xe.y2-pe[he-1].y,xe.x-pe[he-1].x,xe.y-pe[he-1].y],ae[ae.length-1].deltas.push(W);break;case"qct":var Fe=pe[he-1].x+2/3*(xe.x1-pe[he-1].x),oe=pe[he-1].y+2/3*(xe.y1-pe[he-1].y),Je=xe.x+2/3*(xe.x1-xe.x),Re=xe.y+2/3*(xe.y1-xe.y),fe=xe.x,ot=xe.y;W=[Fe-pe[he-1].x,oe-pe[he-1].y,Je-pe[he-1].x,Re-pe[he-1].y,fe-pe[he-1].x,ot-pe[he-1].y],ae[ae.length-1].deltas.push(W);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(xe)}}Y=U?null:C==="stroke"?"stroke":"fill";for(var et=!1,st=0;st<ae.length;st++)if(ae[st].arc)for(var K=ae[st].abs,Te=0;Te<K.length;Te++){var Ue=K[Te];Ue.type==="arc"?A.call(this,Ue.x,Ue.y,Ue.radius,Ue.startAngle,Ue.endAngle,Ue.counterclockwise,void 0,U,!et):M.call(this,Ue.x,Ue.y),et=!0}else if(ae[st].close===!0)this.pdf.internal.out("h"),et=!1;else if(ae[st].begin!==!0){var ut=ae[st].start.x,pt=ae[st].start.y;ie.call(this,ae[st].deltas,ut,pt),et=!0}Y&&T.call(this,Y),U&&O.call(this)}},G=function(C){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return C-W;case"top":return C+U-W;case"hanging":return C+U-2*W;case"middle":return C+U/2-W;default:return C}},P=function(C){return C+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var C=function(){};return C.colorStops=[],C.addColorStop=function(U,W){this.colorStops.push([U,W])},C.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},C.isCanvasGradient=!0,C},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(C,U,W,Y,ae,pe,he,xe,Ee){for(var Fe=Ne.call(this,W,Y,ae,pe),oe=0;oe<Fe.length;oe++){var Je=Fe[oe];oe===0&&(Ee?I.call(this,Je.x1+C,Je.y1+U):M.call(this,Je.x1+C,Je.y1+U)),be.call(this,C,U,Je.x2,Je.y2,Je.x3,Je.y3,Je.x4,Je.y4)}xe?O.call(this):T.call(this,he)},T=function(C){switch(C){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(C,U){this.pdf.internal.out(r(C)+" "+n(U)+" m")},D=function(C){var U;switch(C.align){case"right":case"end":U="right";break;case"center":U="center";break;default:U="left"}var W=this.pdf.getTextDimensions(C.text),Y=G.call(this,C.y),ae=P.call(this,Y)-W.h,pe=this.ctx.transform.applyToPoint(new a(C.x,Y)),he=this.ctx.transform.decompose(),xe=new l;xe=(xe=(xe=xe.multiply(he.translate)).multiply(he.skew)).multiply(he.scale);for(var Ee,Fe,oe,Je=this.ctx.transform.applyToRectangle(new o(C.x,Y,W.w,W.h)),Re=xe.applyToRectangle(new o(C.x,ae,W.w,W.h)),fe=b.call(this,Re),ot=[],et=0;et<fe.length;et+=1)ot.indexOf(fe[et])===-1&&ot.push(fe[et]);if(N(ot),this.autoPaging)for(var st=ot[0],K=ot[ot.length-1],Te=st;Te<K+1;Te++){this.pdf.setPage(Te);var Ue=Te===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pt=this.pdf.internal.pageSize.height-this.margin[2],xt=pt-this.margin[0],yt=this.pdf.internal.pageSize.width-this.margin[1],ht=yt-this.margin[3],Mt=Te===1?0:ut+(Te-2)*xt;if(this.ctx.clip_path.length!==0){var Lt=this.path;Ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(Ee,this.posX+this.margin[3],-1*Mt+Ue),X.call(this,"fill",!0),this.path=Lt}var Ot=F([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-Mt+Ue+this.ctx.prevPageLastElemOffset)[0];C.scale>=.01&&(Fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Fe*C.scale),oe=this.lineWidth,this.lineWidth=oe*C.scale);var wt=this.autoPaging!=="text";if(wt||Ot.y+Ot.h<=pt){if(wt||Ot.y>=Ue&&Ot.x<=yt){var Nt=wt?C.text:this.pdf.splitTextToSize(C.text,C.maxWidth||yt-Ot.x)[0],cr=F([JSON.parse(JSON.stringify(Je))],this.posX+this.margin[3],-Mt+Ue+this.ctx.prevPageLastElemOffset)[0],er=wt&&(Te>st||Te<K)&&w.call(this);er&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ht,xt,null).clip().discardPath()),this.pdf.text(Nt,cr.x,cr.y,{angle:C.angle,align:U,renderingMode:C.renderingMode}),er&&this.pdf.restoreGraphicsState()}}else Ot.y<pt&&(this.ctx.prevPageLastElemOffset+=pt-Ot.y);C.scale>=.01&&(this.pdf.setFontSize(Fe),this.lineWidth=oe)}else C.scale>=.01&&(Fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Fe*C.scale),oe=this.lineWidth,this.lineWidth=oe*C.scale),this.pdf.text(C.text,pe.x+this.posX,pe.y+this.posY,{angle:C.angle,align:U,renderingMode:C.renderingMode,maxWidth:C.maxWidth}),C.scale>=.01&&(this.pdf.setFontSize(Fe),this.lineWidth=oe)},M=function(C,U,W,Y){W=W||0,Y=Y||0,this.pdf.internal.out(r(C+W)+" "+n(U+Y)+" l")},ie=function(C,U,W){return this.pdf.lines(C,U,W,null,null)},be=function(C,U,W,Y,ae,pe,he,xe){this.pdf.internal.out([e(i(W+C)),e(s(Y+U)),e(i(ae+C)),e(s(pe+U)),e(i(he+C)),e(s(xe+U)),"c"].join(" "))},Ne=function(C,U,W,Y){for(var ae=2*Math.PI,pe=Math.PI/2;U>W;)U-=ae;var he=Math.abs(W-U);he<ae&&Y&&(he=ae-he);for(var xe=[],Ee=Y?-1:1,Fe=U;he>1e-5;){var oe=Fe+Ee*Math.min(he,pe);xe.push(we.call(this,C,Fe,oe)),he-=Math.abs(oe-Fe),Fe=oe}return xe},we=function(C,U,W){var Y=(W-U)/2,ae=C*Math.cos(Y),pe=C*Math.sin(Y),he=ae,xe=-pe,Ee=he*he+xe*xe,Fe=Ee+he*ae+xe*pe,oe=4/3*(Math.sqrt(2*Ee*Fe)-Fe)/(he*pe-xe*ae),Je=he-oe*xe,Re=xe+oe*he,fe=Je,ot=-Re,et=Y+U,st=Math.cos(et),K=Math.sin(et);return{x1:C*Math.cos(U),y1:C*Math.sin(U),x2:Je*st-Re*K,y2:Je*K+Re*st,x3:fe*st-ot*K,y3:fe*K+ot*st,x4:C*Math.cos(W),y4:C*Math.sin(W)}},le=function(C){return 180*C/Math.PI},J=function(C,U,W,Y,ae,pe){var he=C+.5*(W-C),xe=U+.5*(Y-U),Ee=ae+.5*(W-ae),Fe=pe+.5*(Y-pe),oe=Math.min(C,ae,he,Ee),Je=Math.max(C,ae,he,Ee),Re=Math.min(U,pe,xe,Fe),fe=Math.max(U,pe,xe,Fe);return new o(oe,Re,Je-oe,fe-Re)},ue=function(C,U,W,Y,ae,pe,he,xe){var Ee,Fe,oe,Je,Re,fe,ot,et,st,K,Te,Ue,ut,pt,xt=W-C,yt=Y-U,ht=ae-W,Mt=pe-Y,Lt=he-ae,Ot=xe-pe;for(Fe=0;Fe<41;Fe++)st=(ot=(oe=C+(Ee=Fe/40)*xt)+Ee*((Re=W+Ee*ht)-oe))+Ee*(Re+Ee*(ae+Ee*Lt-Re)-ot),K=(et=(Je=U+Ee*yt)+Ee*((fe=Y+Ee*Mt)-Je))+Ee*(fe+Ee*(pe+Ee*Ot-fe)-et),Fe==0?(Te=st,Ue=K,ut=st,pt=K):(Te=Math.min(Te,st),Ue=Math.min(Ue,K),ut=Math.max(ut,st),pt=Math.max(pt,K));return new o(Math.round(Te),Math.round(Ue),Math.round(ut-Te),Math.round(pt-Ue))},ee=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var C,U,W=(C=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:C,lineDashOffset:U}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(gr.API),(function(t){var e=function(a){var o,l,c,f,d,m,p,_,w,b;for(l=[],c=0,f=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;f>c;c+=4)(d=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(m=(d=((d=((d=((d=(d-(b=d%85))/85)-(w=d%85))/85)-(_=d%85))/85)-(p=d%85))/85)%85,l.push(m+33,p+33,_+33,w+33,b+33)):l.push(122);return(function(k,F){for(var N=F;N>0;N--)k.pop()})(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(a){var o,l,c,f,d,m=String,p="length",_=255,w="charCodeAt",b="slice",k="replace";for(a[b](-2),a=a[b](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),c=[],f=0,d=(a+=o="uuuuu"[b](a[p]%5||5))[p];d>f;f+=5)l=52200625*(a[w](f)-33)+614125*(a[w](f+1)-33)+7225*(a[w](f+2)-33)+85*(a[w](f+3)-33)+(a[w](f+4)-33),c.push(_&l>>24,_&l>>16,_&l>>8,_&l);return(function(F,N){for(var B=N;B>0;B--)F.pop()})(c,o[p]),m.fromCharCode.apply(m,c)},n=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var l="",c=0;c<a.length;c+=2)l+=String.fromCharCode("0x"+(a[c]+a[c+1]));return l},s=function(a){for(var o=new Uint8Array(a.length),l=a.length;l--;)o[l]=a.charCodeAt(l);return(o=M5(o)).reduce(function(c,f){return c+String.fromCharCode(f)},"")};t.processDataByFilters=function(a,o){var l=0,c=a||"",f=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=n(c),f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:f.reverse().join(" ")}}})(gr.API),(function(t){t.loadFile=function(e,r,n){return(function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=(function(l,c,f){var d=new XMLHttpRequest,m=0,p=function(_){var w=_.length,b=[],k=String.fromCharCode;for(m=0;m<w;m+=1)b.push(k(255&_.charCodeAt(m)));return b.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?f(p(this.responseText)):f(void 0)}),d.send(null),c&&d.status===200)return p(d.responseText)})(i,s,a)}catch{}return o})(e,r,n)},t.loadImageFile=t.loadFile})(gr.API),(function(t){function e(){return(Fr.html2canvas?Promise.resolve(Fr.html2canvas):rp(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Fr.DOMPurify?Promise.resolve(Fr.DOMPurify):rp(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=zn(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var c=document.createElement(o);for(var f in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[f]=l.style[f];return c},s=function o(l,c){for(var f=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),d=l.firstChild;d;d=d.nextSibling)c!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||f.appendChild(o(d,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(f.width=l.width,f.height=l.height,f.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(f.value=l.value),f.addEventListener("load",function(){f.scrollTop=l.scrollTop,f.scrollLeft=l.scrollLeft},!0)),f},a=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),f=o.convert(Promise.resolve(),c);return(f=f.setProgress(1,o,1,[o])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,l){return o.__proto__=l||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,l){return this.then(function(){switch(l=l||(function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),l){case"string":return this.then(r).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=this.opt.jsPDF,f=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=f,f)for(var p=0;p<f.length;++p){var _=f[p],w=_.src.find(function(b){return b.format==="truetype"});w&&c.addFont(w.url,_.ref.name,_.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,c.context2d.save(!0),l(this.prop.container,m)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},a.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(o,l){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function l(c,f){return Math.floor(c*f/72*96)}return this.then(function(){(o=o||gr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,l,c,f){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,l,c,f){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,f?this.progress.stack.concat(f):null)},a.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(f,d){return c.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(m){return c.updateProgress(null,f),m}).then(f,d).then(function(m){return c.updateProgress(1),m})})},a.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then;var f=this;o&&(o=o.bind(f)),l&&(l=l.bind(f));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?f:a.convert(Object.assign({},f),Promise.prototype),m=c.call(d,o,l);return a.convert(m,f.__proto__)},a.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},a.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},a.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return a.convert(l,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,gr.getPageSize=function(o,l,c){if(zn(o)==="object"){var f=o;o=f.orientation,l=f.unit||l,c=f.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var d,m=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var _,w=0,b=0;if(p.hasOwnProperty(m))w=p[m][1]/d,b=p[m][0]/d;else try{w=c[1],b=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",b>w&&(_=b,b=w,w=_);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",w>b&&(_=b,b=w,w=_)}return{width:b,height:w,unit:l,k:d,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(w_):null;var c=new a(l);return l.worker?c:c.from(o).doCallback()}})(gr.API),gr.API.addJS=function(t){return MA=t,this.internal.events.subscribe("postPutResources",function(){r2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(r2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),OA=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+MA+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){r2!==void 0&&OA!==void 0&&this.internal.out("/Names <</JavaScript "+r2+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=n.exec(a);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,f=[];for(s=0;s<c;s++){var d=r.internal.newObject();f.push(d);var m=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<f.length;s++)r.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,s){var a={title:i,options:s,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var a=n.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var s=0;s<i.children.length;s++)n.count++,this.count_r(n,i.children[s]);return n.count}}])})(gr.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,i,s,a,o){var l,c=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,l=(function(d){for(var m,p=256*d.charCodeAt(4)+d.charCodeAt(5),_=d.length,w={width:0,height:0,numcomponents:1},b=4;b<_;b+=2){if(b+=p,e.indexOf(d.charCodeAt(b+1))!==-1){m=256*d.charCodeAt(b+5)+d.charCodeAt(b+6),w={width:256*d.charCodeAt(b+7)+d.charCodeAt(b+8),height:m,numcomponents:d.charCodeAt(b+9)};break}p=256*d.charCodeAt(b+2)+d.charCodeAt(b+3)}return w})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}f={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:i}}return f}})(gr.API),gr.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,s=Iue(t,{checkCrc:!0}),a=s.width,o=s.height,l=s.channels,c=s.palette,f=s.depth;i=c&&l===1?(function(P){for(var A=P.width,T=P.height,O=P.data,I=P.palette,D=P.depth,M=!1,ie=[],be=[],Ne=void 0,we=!1,le=0,J=0;J<I.length;J++){var ue=UT(I[J],4),ee=ue[0],C=ue[1],U=ue[2],W=ue[3];ie.push(ee,C,U),W!=null&&(W===0?(le++,be.length<1&&be.push(J)):W<255&&(we=!0))}if(we||le>1){M=!0,be=void 0;var Y=A*T;Ne=new Uint8Array(Y);for(var ae=new DataView(O.buffer),pe=0;pe<Y;pe++){var he=b_(ae,pe,D),xe=UT(I[he],4)[3];Ne[pe]=xe}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:O,alphaBytes:Ne,needSMask:M,palette:ie,mask:be}})(s):l===2||l===4?(function(P){for(var A=P.data,T=P.width,O=P.height,I=P.channels,D=P.depth,M=I===2?"DeviceGray":"DeviceRGB",ie=I-1,be=T*O,Ne=ie,we=be*Ne,le=1*be,J=Math.ceil(we*D/8),ue=Math.ceil(le*D/8),ee=new Uint8Array(J),C=new Uint8Array(ue),U=new DataView(A.buffer),W=new DataView(ee.buffer),Y=new DataView(C.buffer),ae=!1,pe=0;pe<be;pe++){for(var he=pe*I,xe=0;xe<Ne;xe++)qA(W,b_(U,he+xe,D),pe*Ne+xe,D);var Ee=b_(U,he+Ne,D);Ee<(1<<D)-1&&(ae=!0),qA(Y,Ee,1*pe,D)}return{colorSpace:M,colorsPerPixel:ie,colorBytes:ee,alphaBytes:C,needSMask:ae}})(s):(function(P){var A=P.data,T=P.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:T,colorsPerPixel:T==="DeviceGray"?1:3,colorBytes:A instanceof Uint8Array?A:new Uint8Array(A.buffer),needSMask:!1}})(s);var d,m,p,_=i,w=_.colorSpace,b=_.colorsPerPixel,k=_.colorBytes,F=_.alphaBytes,N=_.needSMask,B=_.palette,X=_.mask,G=null;return n!==gr.API.image_compression.NONE&&typeof M5=="function"?(G=(function(P){var A;switch(P){case gr.API.image_compression.FAST:A=11;break;case gr.API.image_compression.MEDIUM:A=13;break;case gr.API.image_compression.SLOW:A=14;break;default:A=12}return A})(n),d=this.decode.FLATE_DECODE,m="/Predictor ".concat(G," "),t=UA(k,a*b,b,n),N&&(p=UA(F,a,1,n))):(d=void 0,m="",t=k,N&&(p=F)),m+="/Colors ".concat(b," /BitsPerComponent ").concat(f," /Columns ").concat(a),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:r,data:t,index:e,filter:d,decodeParameters:m,transparency:X,palette:B,sMask:p,predictor:G,width:a,height:o,bitsPerComponent:f,colorSpace:w}}},(function(t){t.processGIF89A=function(e,r,n,i){var s=new Yue(e),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},f=new E_(100).encode(c,100);return t.processJPEG.call(this,f,r,n,i)},t.processGIF87A=t.processGIF89A})(gr.API),ic.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ic.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){ti.log("bit decode error:"+r)}},ic.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}r!==0&&(this.pos+=4-r)}},ic.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*i*4,o=s>>4,l=15&s,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},ic.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},ic.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,f=n*this.width*4+4*i;this.data[f]=l,this.data[f+1]=o,this.data[f+2]=a,this.data[f+3]=c}this.pos+=t}},ic.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&r)/r*255|0,c=(a>>11)/e*255|0,f=i*this.width*4+4*s;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=o,this.data[f+3]=255}this.pos+=t}},ic.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},ic.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=a}},ic.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,r,n,i){var s=new ic(e,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new E_(100).encode(l,100);return t.processJPEG.call(this,c,r,n,i)}})(gr.API),KA.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,r,n,i){var s=new KA(e),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new E_(100).encode(l,100);return t.processJPEG.call(this,c,r,n,i)}})(gr.API),gr.API.processRGBA=function(t,e,r){for(var n=t.data,i=n.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,l=0,c=0;c<i;c+=4){var f=n[c],d=n[c+1],m=n[c+2],p=n[c+3];s[o++]=f,s[o++]=d,s[o++]=m,a[l++]=p}var _=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:_,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},gr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},O0=gr.API,n2=O0.getCharWidthsArray=function(t,e){var r,n,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,f=c.fof?c.fof:1,d=e.doKerning!==!1,m=0,p=t.length,_=0,w=o[0]||l,b=[];for(r=0;r<p;r++)n=t.charCodeAt(r),typeof i.metadata.widthOfString=="function"?b.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+a*(1e3/s)||0)/1e3):(m=d&&zn(c[n])==="object"&&!isNaN(parseInt(c[n][_],10))?c[n][_]/f:0,b.push((o[n]||w)/l+m)),_=n;return b},jA=O0.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return O0.processArabic&&(t=O0.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,i)/r:n2.apply(this,arguments).reduce(function(s,a){return s+a},0)},BA=function(t,e,r,n){for(var i=[],s=0,a=t.length,o=0;s!==a&&o+e[s]<r;)o+=e[s],s++;i.push(t.slice(0,s));var l=s;for(o=0;s!==a;)o+e[s]>n&&(i.push(t.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},VA=function(t,e,r){r||(r={});var n,i,s,a,o,l,c,f=[],d=[f],m=r.textIndent||0,p=0,_=0,w=t.split(" "),b=n2.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?w[0].length+2:r.lineIndent||0){var k=Array(l).join(" "),F=[];w.map(function(B){(B=B.split(/\s*\n/)).length>1?F=F.concat(B.map(function(X,G){return(G&&X.length?`
`:"")+X})):F.push(B[0])}),w=F,l=jA.apply(this,[k,r])}for(s=0,a=w.length;s<a;s++){var N=0;if(n=w[s],l&&n[0]==`
`&&(n=n.substr(1),N=1),m+p+(_=(i=n2.apply(this,[n,r])).reduce(function(B,X){return B+X},0))>e||N){if(_>e){for(o=BA.apply(this,[n,i,e-(m+p),e]),f.push(o.shift()),f=[o.pop()];o.length;)d.push([o.shift()]);_=i.slice(n.length-(f[0]?f[0].length:0)).reduce(function(B,X){return B+X},0)}else f=[n];d.push(f),m=_+l,p=b}else f.push(n),m+=p+_,p=b}return c=l?function(B,X){return(X?k:"")+B.join(" ")}:function(B){return B.join(" ")},d.map(c)},O0.splitTextToSize=function(t,e,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var d=this.internal.getFont(f.fontName,f.fontStyle),m="Unicode";return d.metadata[m]?{widths:d.metadata[m].widths||{0:1},kerning:d.metadata[m].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=r.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(VA.apply(this,[n[o],a,s]));return c},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},s=0;s<16;s++)n[r[s]]=e[s],i[e[s]]=r[s];var a=function(m){return"0x"+parseInt(m,10).toString(16)},o=t.__fontmetrics__.compress=function(m){var p,_,w,b,k=["{"];for(var F in m){if(p=m[F],isNaN(parseInt(F,10))?_="'"+F+"'":(F=parseInt(F,10),_=(_=a(F).slice(2)).slice(0,-1)+i[_.slice(-1)]),typeof p=="number")p<0?(w=a(p).slice(3),b="-"):(w=a(p).slice(2),b=""),w=b+w.slice(0,-1)+i[w.slice(-1)];else{if(zn(p)!=="object")throw new Error("Don't know what to do with value type "+zn(p)+".");w=o(p)}k.push(_+w)}return k.push("}"),k.join("")},l=t.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,_,w,b,k={},F=1,N=k,B=[],X="",G="",P=m.length-1,A=1;A<P;A+=1)(b=m[A])=="'"?p?(w=p.join(""),p=void 0):p=[]:p?p.push(b):b=="{"?(B.push([N,w]),N={},w=void 0):b=="}"?((_=B.pop())[0][_[1]]=N,w=void 0,N=_[0]):b=="-"?F=-1:w===void 0?n.hasOwnProperty(b)?(X+=n[b],w=parseInt(X,16)*F,F=1,X=""):X+=b:n.hasOwnProperty(b)?(G+=n[b],N[w]=parseInt(G,16)*F,F=1,w=void 0,G=""):G+=b;return k},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(m){var p=m.font,_=d.Unicode[p.postScriptName];_&&(p.metadata.Unicode={},p.metadata.Unicode.widths=_.widths,p.metadata.Unicode.kerning=_.kerning);var w=f.Unicode[p.postScriptName];w&&(p.metadata.Unicode.encoding=w,p.encoding=w.codePages[0])}])})(gr.API),(function(t){var e=function(r){for(var n=r.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=r.charCodeAt(s);return i};t.API.events.push(["addFont",function(r){var n=void 0,i=r.font,s=r.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(b2(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,n)}}])})(gr),gr.API.addSvgAsImage=function(t,e,r,n,i,s,a,o){if(isNaN(e)||isNaN(r))throw ti.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw ti.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=n,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(Fr.canvg?Promise.resolve(Fr.canvg):rp(()=>import("./index.es-CDdUjdW8.js"),[])).catch(function(m){return Promise.reject(new Error("Could not load canvg: "+m))}).then(function(m){return m.default?m.default:m}).then(function(m){return m.fromString(c,t,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(f)}).then(function(){d.addImage(l.toDataURL("image/jpeg",1),e,r,n,i,a,o)})},gr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,r);return this},gr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,f=0,d=0;function m(_,w){var b,k=!1;for(b=0;b<_.length;b+=1)_[b]===w&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=o.length;for(d=0;d<p;d+=1)r[o[d]].value=r[o[d]].defaultValue,r[o[d]].explicitSet=!1}if(zn(t)==="object"){for(i in t)if(s=t[i],m(o,i)&&s!==void 0){if(r[i].type==="boolean"&&typeof s=="boolean")r[i].value=s;else if(r[i].type==="name"&&m(r[i].valueSet,s))r[i].value=s;else if(r[i].type==="integer"&&Number.isInteger(s))r[i].value=s;else if(r[i].type==="array"){for(c=0;c<s.length;c+=1)if(n=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(f=0;f<s[c].length;f+=1)typeof s[c][f]!="number"&&(n=!1);n===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}r[i].value="["+l.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var _,w=[];for(_ in r)r[_].explicitSet===!0&&(r[_].type==="name"?w.push("/"+_+" /"+r[_].value):w.push("/"+_+" "+r[_].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+a.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}})(gr.API),(function(t){var e=t.API,r=e.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],f=[""],d=0,m=s.length;d<m;++d){if(o=a.metadata.characterToGlyph(s.charCodeAt(d)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(d),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return f.join("");o=o.toString(16),f.push(c[4-o.length],o)}return f.join("")},n=function(s){var a,o,l,c,f,d,m;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,m=(o=Object.keys(s).sort(function(p,_){return p-_})).length;d<m;d++)a=o[d],l.length>=100&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(c=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),f+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,f=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var d=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",_=0;_<m.length;_++)p+=String.fromCharCode(m[_]);var w=c();f({data:p,addLength1:!0,objectId:w}),l("endobj");var b=c();f({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var k=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+H0(o.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var F=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+H0(o.fontName)),l("/FontDescriptor "+k+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+H0(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+F+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,f=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var d=o.metadata.rawData,m="",p=0;p<d.length;p++)m+=String.fromCharCode(d[p]);var _=c();f({data:m,addLength1:!0,objectId:_}),l("endobj");var w=c();f({data:n(o.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var b=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+_+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+H0(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var k=0;k<o.metadata.hmtx.widths.length;k++)o.metadata.hmtx.widths[k]=parseInt(o.metadata.hmtx.widths[k]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+H0(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",l=s.x,c=s.y,f=s.options||{},d=s.mutex||{},m=d.pdfEscape,p=d.activeFontKey,_=d.fonts,w=p,b="",k=0,F="",N=_[w].encoding;if(_[w].encoding!=="Identity-H")return{text:o,x:l,y:c,options:f,mutex:d};for(F=o,w=p,Array.isArray(o)&&(F=o[0]),k=0;k<F.length;k+=1)_[w].metadata.hasOwnProperty("cmap")&&(a=_[w].metadata.cmap.unicode.codeMap[F[k].charCodeAt(0)]),a||F[k].charCodeAt(0)<256&&_[w].metadata.hasOwnProperty("Unicode")?b+=F[k]:b+="";var B="";return parseInt(w.slice(1))<14||N==="WinAnsiEncoding"?B=m(b,w).split("").map(function(X){return X.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(B=r(b,_[w])),d.isHex=!0,{text:B,x:l,y:c,options:f,mutex:d}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([i(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(i(Object.assign({},l,{text:a[c]})).text);s.text=o}else s.text=i(Object.assign({},l,{text:a})).text}])})(gr),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(gr.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var i,s,a,o,l,c,f,d=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),F=!1,N=0;this.__bidiEngine__={};var B=function(I){var D=I.charCodeAt(),M=D>>8,ie=w[M];return ie!==void 0?d[256*ie+(255&D)]:M===252||M===253?"AL":k.test(M)?"L":M===8?"R":"N"},X=function(I){for(var D,M=0;M<I.length;M++){if((D=B(I.charAt(M)))==="L")return!1;if(D==="R")return!0}return!1},G=function(I,D,M,ie){var be,Ne,we,le,J=D[ie];switch(J){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":F=!1;break;case"N":case"AN":break;case"EN":F&&(J="AN");break;case"AL":F=!0,J="R";break;case"WS":case"BN":J="N";break;case"CS":ie<1||ie+1>=D.length||(be=M[ie-1])!=="EN"&&be!=="AN"||(Ne=D[ie+1])!=="EN"&&Ne!=="AN"?J="N":F&&(Ne="AN"),J=Ne===be?Ne:"N";break;case"ES":J=(be=ie>0?M[ie-1]:"B")==="EN"&&ie+1<D.length&&D[ie+1]==="EN"?"EN":"N";break;case"ET":if(ie>0&&M[ie-1]==="EN"){J="EN";break}if(F){J="N";break}for(we=ie+1,le=D.length;we<le&&D[we]==="ET";)we++;J=we<le&&D[we]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(le=D.length,we=ie+1;we<le&&D[we]==="NSM";)we++;if(we<le){var ue=I[ie],ee=ue>=1425&&ue<=2303||ue===64286;if(be=D[we],ee&&(be==="R"||be==="AL")){J="R";break}}}J=ie<1||(be=D[ie-1])==="B"?"N":M[ie-1];break;case"B":F=!1,i=!0,J=N;break;case"S":s=!0,J="N"}return J},P=function(I,D,M){var ie=I.split("");return M&&A(ie,M,{hiLevel:N}),ie.reverse(),D&&D.reverse(),ie.join("")},A=function(I,D,M){var ie,be,Ne,we,le,J=-1,ue=I.length,ee=0,C=[],U=N?p:m,W=[];for(F=!1,i=!1,s=!1,be=0;be<ue;be++)W[be]=B(I[be]);for(Ne=0;Ne<ue;Ne++){if(le=ee,C[Ne]=G(I,W,C,Ne),ie=240&(ee=U[le][_[C[Ne]]]),ee&=15,D[Ne]=we=U[ee][5],ie>0)if(ie===16){for(be=J;be<Ne;be++)D[be]=1;J=-1}else J=-1;if(U[ee][6])J===-1&&(J=Ne);else if(J>-1){for(be=J;be<Ne;be++)D[be]=we;J=-1}W[Ne]==="B"&&(D[Ne]=0),M.hiLevel|=we}s&&(function(Y,ae,pe){for(var he=0;he<pe;he++)if(Y[he]==="S"){ae[he]=N;for(var xe=he-1;xe>=0&&Y[xe]==="WS";xe--)ae[xe]=N}})(W,D,ue)},T=function(I,D,M,ie,be){if(!(be.hiLevel<I)){if(I===1&&N===1&&!i)return D.reverse(),void(M&&M.reverse());for(var Ne,we,le,J,ue=D.length,ee=0;ee<ue;){if(ie[ee]>=I){for(le=ee+1;le<ue&&ie[le]>=I;)le++;for(J=ee,we=le-1;J<we;J++,we--)Ne=D[J],D[J]=D[we],D[we]=Ne,M&&(Ne=M[J],M[J]=M[we],M[we]=Ne);ee=le}ee++}}},O=function(I,D,M){var ie=I.split(""),be={hiLevel:N};return M||(M=[]),A(ie,M,be),(function(Ne,we,le){if(le.hiLevel!==0&&f)for(var J,ue=0;ue<Ne.length;ue++)we[ue]===1&&(J=b.indexOf(Ne[ue]))>=0&&(Ne[ue]=b[J+1])})(ie,M,be),T(2,ie,D,M,be),T(1,ie,D,M,be),ie.join("")};return this.__bidiEngine__.doBidiReorder=function(I,D,M){if((function(be,Ne){if(Ne)for(var we=0;we<be.length;we++)Ne[we]=we;o===void 0&&(o=X(be)),c===void 0&&(c=X(be))})(I,D),a||!l||c)if(a&&l&&o^c)N=o?1:0,I=P(I,D,M);else if(!a&&l&&c)N=o?1:0,I=O(I,D,M),I=P(I,D);else if(!a||o||l||c){if(a&&!l&&o^c)I=P(I,D),o?(N=0,I=O(I,D,M)):(N=1,I=O(I,D,M),I=P(I,D));else if(a&&o&&!l&&c)N=1,I=O(I,D,M),I=P(I,D);else if(!a&&!l&&o^c){var ie=f;o?(N=1,I=O(I,D,M),N=0,f=!1,I=O(I,D,M),f=ie):(N=0,I=O(I,D,M),I=P(I,D),N=1,f=!1,I=O(I,D,M),f=ie,I=P(I,D))}}else N=0,I=O(I,D,M);else N=o?1:0,I=O(I,D,M);return I},this.__bidiEngine__.setOptions=function(I){I&&(a=I.isInputVisual,l=I.isOutputVisual,o=I.isInputRtl,c=I.isOutputRtl,f=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([r.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([r.doBidiReorder(i[o])]);n.text=a}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])})(gr),gr.API.TTFFont=(function(){function t(e){var r;if(this.rawData=e,r=this.contents=new xh(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new ffe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Que(this.contents),this.head=new Zue(this),this.name=new ife(this),this.cmap=new D9(this),this.toUnicode={},this.hhea=new efe(this),this.maxp=new sfe(this),this.hmtx=new afe(this),this.post=new rfe(this),this.os2=new tfe(this),this.loca=new ufe(this),this.glyf=new ofe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,c;for(c=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t})();var mc,xh=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,i;for(i=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(e.charCodeAt(r)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,i,s,a,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*i+16777216*s+65536*a+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,i,s;for(s=[],n=0,i=e.length;n<i;n++)r=e[n],s.push(this.writeByte(r));return s},t})(),Que=(function(){var t;function e(r){var n,i,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,i,s,a,o,l,c,f,d,m,p,_,w;for(w in p=Object.keys(r).length,l=Math.log(2),d=16*Math.floor(Math.log(p)/l),a=Math.floor(d/l),f=16*p-d,(i=new xh).writeInt(this.scalarType),i.writeShort(p),i.writeShort(d),i.writeShort(a),i.writeShort(f),s=16*p,c=i.pos+s,o=null,_=[],r)for(m=r[w],i.writeString(w),i.writeInt(t(m)),i.writeInt(c),i.writeInt(m.length),_=_.concat(m),w==="head"&&(o=c),c+=m.length;c%4;)_.push(0),c++;return i.write(_),n=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(n),i.data},t=function(r){var n,i,s,a;for(r=O9.call(r);r.length%4;)r.push(0);for(s=new xh(r),i=0,n=0,a=r.length;n<a;n=n+=4)i+=s.readUInt32();return 4294967295&i},e})(),Jue={}.hasOwnProperty,ou=function(t,e){for(var r in e)Jue.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};mc=(function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var Zue=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ou(t,mc),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new xh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t})(),XA=(function(){function t(e,r){var n,i,s,a,o,l,c,f,d,m,p,_,w,b,k,F,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),m=p/2,e.pos+=6,s=(function(){var B,X;for(X=[],l=B=0;0<=m?B<m:B>m;l=0<=m?++B:--B)X.push(e.readUInt16());return X})(),e.pos+=2,w=(function(){var B,X;for(X=[],l=B=0;0<=m?B<m:B>m;l=0<=m?++B:--B)X.push(e.readUInt16());return X})(),c=(function(){var B,X;for(X=[],l=B=0;0<=m?B<m:B>m;l=0<=m?++B:--B)X.push(e.readUInt16());return X})(),f=(function(){var B,X;for(X=[],l=B=0;0<=m?B<m:B>m;l=0<=m?++B:--B)X.push(e.readUInt16());return X})(),i=(this.length-e.pos+this.offset)/2,o=(function(){var B,X;for(X=[],l=B=0;0<=i?B<i:B>i;l=0<=i?++B:--B)X.push(e.readUInt16());return X})(),l=k=0,N=s.length;k<N;l=++k)for(b=s[l],n=F=_=w[l];_<=b?F<=b:F>=b;n=_<=b?++F:--F)f[l]===0?a=n+c[l]:(a=o[f[l]/2+(n-_)-(m-l)]||0)!==0&&(a+=c[l]),this.codeMap[n]=65535&a}e.pos=d}return t.encode=function(e,r){var n,i,s,a,o,l,c,f,d,m,p,_,w,b,k,F,N,B,X,G,P,A,T,O,I,D,M,ie,be,Ne,we,le,J,ue,ee,C,U,W,Y,ae,pe,he,xe,Ee,Fe,oe;switch(ie=new xh,a=Object.keys(e).sort(function(Je,Re){return Je-Re}),r){case"macroman":for(w=0,b=(function(){var Je=[];for(_=0;_<256;++_)Je.push(0);return Je})(),F={0:0},s={},be=0,J=a.length;be<J;be++)F[xe=e[i=a[be]]]==null&&(F[xe]=++w),s[i]={old:e[i],new:F[e[i]]},b[i]=F[e[i]];return ie.writeUInt16(1),ie.writeUInt16(0),ie.writeUInt32(12),ie.writeUInt16(0),ie.writeUInt16(262),ie.writeUInt16(0),ie.write(b),{charMap:s,subtable:ie.data,maxGlyphID:w+1};case"unicode":for(D=[],d=[],N=0,F={},n={},k=c=null,Ne=0,ue=a.length;Ne<ue;Ne++)F[X=e[i=a[Ne]]]==null&&(F[X]=++N),n[i]={old:X,new:F[X]},o=F[X]-i,k!=null&&o===c||(k&&d.push(k),D.push(i),c=o),k=i;for(k&&d.push(k),d.push(65535),D.push(65535),O=2*(T=D.length),A=2*Math.pow(Math.log(T)/Math.LN2,2),m=Math.log(A/2)/Math.LN2,P=2*T-A,l=[],G=[],p=[],_=we=0,ee=D.length;we<ee;_=++we){if(I=D[_],f=d[_],I===65535){l.push(0),G.push(0);break}if(I-(M=n[I].new)>=32768)for(l.push(0),G.push(2*(p.length+T-_)),i=le=I;I<=f?le<=f:le>=f;i=I<=f?++le:--le)p.push(n[i].new);else l.push(M-I),G.push(0)}for(ie.writeUInt16(3),ie.writeUInt16(1),ie.writeUInt32(12),ie.writeUInt16(4),ie.writeUInt16(16+8*T+2*p.length),ie.writeUInt16(0),ie.writeUInt16(O),ie.writeUInt16(A),ie.writeUInt16(m),ie.writeUInt16(P),pe=0,C=d.length;pe<C;pe++)i=d[pe],ie.writeUInt16(i);for(ie.writeUInt16(0),he=0,U=D.length;he<U;he++)i=D[he],ie.writeUInt16(i);for(Ee=0,W=l.length;Ee<W;Ee++)o=l[Ee],ie.writeUInt16(o);for(Fe=0,Y=G.length;Fe<Y;Fe++)B=G[Fe],ie.writeUInt16(B);for(oe=0,ae=p.length;oe<ae;oe++)w=p[oe],ie.writeUInt16(w);return{charMap:n,subtable:ie.data,maxGlyphID:N+1}}},t})(),D9=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ou(t,mc),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new XA(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,i;return r==null&&(r="macroman"),n=XA.encode(e,r),(i=new xh).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t})(),efe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ou(t,mc),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),tfe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ou(t,mc),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),rfe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ou(t,mc),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)r=e.readByte(),i.push(this.names.push(e.readString(r)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var a,o,l;for(l=[],s=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;s=0<=o?++a:--a)l.push(e.readUInt32());return l}).call(this)}},t})(),nfe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},ife=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ou(t,mc),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,i,s,a,o,l,c,f,d,m;for(e.pos=this.offset,e.readShort(),r=e.readShort(),o=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(l={},s=f=0,d=n.length;f<d;s=++f)i=n[s],e.pos=i.offset,c=e.readString(i.length),a=new nfe(c,i),l[m=i.nameID]==null&&(l[m]=[]),l[i.nameID].push(a);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t})(),sfe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ou(t,mc),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),afe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ou(t,mc),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,i,s,a,o,l;for(e.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var c,f;for(f=[],r=c=0;0<=i?c<i:c>i;r=0<=i?++c:--c)f.push(e.readInt16());return f})(),this.widths=(function(){var c,f,d,m;for(m=[],c=0,f=(d=this.metrics).length;c<f;c++)s=d[c],m.push(s.advance);return m}).call(this),n=this.widths[this.widths.length-1],l=[],r=a=0;0<=i?a<i:a>i;r=0<=i?++a:--a)l.push(this.widths.push(n));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),O9=[].slice,ofe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ou(t,mc),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,i,s,a,o,l,c,f,d;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,a=(o=new xh(r.read(i))).readShort(),c=o.readShort(),d=o.readShort(),l=o.readShort(),f=o.readShort(),this.cache[e]=a===-1?new cfe(o,c,d,l,f):new lfe(o,a,c,d,l,f),this.cache[e]))},t.prototype.encode=function(e,r,n){var i,s,a,o,l;for(a=[],s=[],o=0,l=r.length;o<l;o++)i=e[r[o]],s.push(a.length),i&&(a=a.concat(i.encode(n)));return s.push(a.length),{table:a,offsets:s}},t})(),lfe=(function(){function t(e,r,n,i,s,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),cfe=(function(){function t(e,r,n,i,s){var a,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new xh(O9.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t})(),ufe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ou(t,mc),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),i=0,s=0,a=0;a<n.length;++a)if(n[a]=i,s<r.length&&r[s]==a){++s,n[a]=i;var o=this.offsets[a],l=this.offsets[a+1]-o;l>0&&(i+=l)}for(var c=new Array(4*n.length),f=0;f<n.length;++f)c[4*f+3]=255&n[f],c[4*f+2]=(65280&n[f])>>8,c[4*f+1]=(16711680&n[f])>>16,c[4*f]=(4278190080&n[f])>>24;return c},t})(),ffe=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,i,s;for(r in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=i[n];return e},t.prototype.glyphsFor=function(e){var r,n,i,s,a,o,l;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in r=[],i)(n=i[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in l=this.glyphsFor(r))n=l[s],i[s]=n;return i},t.prototype.encode=function(e,r){var n,i,s,a,o,l,c,f,d,m,p,_,w,b,k;for(i in n=D9.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),p={0:0},k=n.charMap)p[(l=k[i]).old]=l.new;for(_ in m=n.maxGlyphID,a)_ in p||(p[_]=m++);return f=(function(F){var N,B;for(N in B={},F)B[F[N]]=N;return B})(p),d=Object.keys(f).sort(function(F,N){return F-N}),w=(function(){var F,N,B;for(B=[],F=0,N=d.length;F<N;F++)o=d[F],B.push(f[o]);return B})(),s=this.font.glyf.encode(a,w,p),c=this.font.loca.encode(s.offsets,w),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},t})();gr.API.PDFObject=(function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,i,s,a;if(Array.isArray(r))return"["+(function(){var o,l,c;for(c=[],o=0,l=r.length;o<l;o++)n=r[o],c.push(e.convert(n));return c})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in s=["<<"],r)a=r[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+r},e})();function M9(t,e,r,n,i){n=n||{};var s=1.15,a=i.internal.scaleFactor,o=i.internal.getFontSize()/a,l=i.getLineHeightFactor?i.getLineHeightFactor():s,c=o*l,f=/\r\n|\r|\n/g,d="",m=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(d=typeof t=="string"?t.split(f):t,m=d.length||1),r+=o*(2-s),n.valign==="middle"?r-=m/2*c:n.valign==="bottom"&&(r-=m*c),n.halign==="center"||n.halign==="right"){var p=o;if(n.halign==="center"&&(p*=.5),d&&m>=1){for(var _=0;_<d.length;_++)i.text(d[_],e-i.getStringUnitWidth(d[_])*p,r),r+=c;return i}e-=i.getStringUnitWidth(t)*p}return n.halign==="justify"?i.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(t,e,r),i}var YA={},dp=(function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:YA=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,i,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,l=a.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var f=t.unifyColor(e.fillColor);f&&(n=this.jsPDFDocument).setFillColor.apply(n,f),f=t.unifyColor(e.textColor),f&&(i=this.jsPDFDocument).setTextColor.apply(i,f),f=t.unifyColor(e.lineColor),f&&(s=this.jsPDFDocument).setDrawColor.apply(s,f),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,i,s){return this.jsPDFDocument.rect(e,r,n,i,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return YA||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t})(),W5=function(t,e){return W5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},W5(t,e)};function j9(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");W5(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var B9=(function(t){j9(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e})(Array);function hfe(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function dfe(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function bv(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],i=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,a){return Math.max(s,a)},0);return i}function V9(t,e,r,n){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:s});var a=U9(i,!1);a&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,a)}function U9(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function by(t,e){var r,n,i,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function z9(t,e){var r=by(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function pfe(t,e,r,n,i){var s={},a=1.3333333333333333,o=S_(e,function(N){return i.getComputedStyle(N).backgroundColor});o!=null&&(s.fillColor=o);var l=S_(e,function(N){return i.getComputedStyle(N).color});l!=null&&(s.textColor=l);var c=gfe(n,r);c&&(s.cellPadding=c);var f="borderTopColor",d=a*r,m=n.borderTopWidth;if(n.borderBottomWidth===m&&n.borderRightWidth===m&&n.borderLeftWidth===m){var p=(parseFloat(m)||0)/d;p&&(s.lineWidth=p)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/d,right:(parseFloat(n.borderRightWidth)||0)/d,bottom:(parseFloat(n.borderBottomWidth)||0)/d,left:(parseFloat(n.borderLeftWidth)||0)/d},s.lineWidth.top||(s.lineWidth.right?f="borderRightColor":s.lineWidth.bottom?f="borderBottomColor":s.lineWidth.left&&(f="borderLeftColor"));var _=S_(e,function(N){return i.getComputedStyle(N)[f]});_!=null&&(s.lineColor=_);var w=["left","right","center","justify"];w.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),w=["middle","bottom","top"],w.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var b=parseInt(n.fontSize||"");isNaN(b)||(s.fontSize=b/a);var k=mfe(n);k&&(s.fontStyle=k);var F=(n.fontFamily||"").toLowerCase();return t.indexOf(F)!==-1&&(s.font=F),s}function mfe(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function S_(t,e){var r=$9(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function $9(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:$9(t.parentElement,e):r}function gfe(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(o){return parseInt(o||"0")/n}),a=by(s,0);return i>a.top&&(a.top=i),i>a.bottom&&(a.bottom=i),a}function H9(t,e,r,n,i){var s,a;n===void 0&&(n=!1),i===void 0&&(i=!1);var o;typeof e=="string"?o=r.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),c=t.scaleFactor(),f=[],d=[],m=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:f,body:d,foot:m};for(var p=0;p<o.rows.length;p++){var _=o.rows[p],w=(a=(s=_?.parentElement)===null||s===void 0?void 0:s.tagName)===null||a===void 0?void 0:a.toLowerCase(),b=xfe(l,c,r,_,n,i);b&&(w==="thead"?f.push(b):w==="tfoot"?m.push(b):d.push(b))}return{head:f,body:d,foot:m}}function xfe(t,e,r,n,i,s){for(var a=new B9(n),o=0;o<n.cells.length;o++){var l=n.cells[o],c=r.getComputedStyle(l);if(i||c.display!=="none"){var f=void 0;s&&(f=pfe(t,l,e,c,r)),a.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:f,_element:l,content:vfe(l)})}}var d=r.getComputedStyle(n);if(a.length>0&&(i||d.display!=="none"))return a}function vfe(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function yfe(t,e,r){for(var n=0,i=[t,e,r];n<i.length;n++){var s=i[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Lu(t,e,r,n,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}function W9(t,e){var r=new dp(t),n=r.getDocumentOptions(),i=r.getGlobalOptions();yfe(i,n,e);var s=Lu({},i,n,e),a;typeof window<"u"&&(a=window);var o=wfe(i,n,e),l=_fe(i,n,e),c=bfe(r,s),f=Sfe(r,s,a);return{id:e.tableId,content:f,hooks:l,styles:o,settings:c}}function wfe(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var c=t[l],f=e[l],d=r[l];n.columnStyles=Lu({},c,f,d)}else{var m=[t,e,r],p=m.map(function(_){return _[l]||{}});n[l]=Lu({},p[0],p[1],p[2])}},s=0,a=Object.keys(n);s<a.length;s++){var o=a[s];i(o)}return n}function _fe(t,e,r){for(var n=[t,e,r],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,a=n;s<a.length;s++){var o=a[s];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function bfe(t,e){var r,n,i,s,a,o,l,c,f,d,m,p,_=by(e.margin,40/t.scaleFactor()),w=(r=Efe(t,e.startY))!==null&&r!==void 0?r:_.top,b;e.showFoot===!0?b="everyPage":e.showFoot===!1?b="never":b=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var k;e.showHead===!0?k="everyPage":e.showHead===!1?k="never":k=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var F=(s=e.useCss)!==null&&s!==void 0?s:!1,N=e.theme||(F?"plain":"striped"),B=!!e.horizontalPageBreak,X=(a=e.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:F,theme:N,startY:w,margin:_,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=e.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(f=e.tableWidth)!==null&&f!==void 0?f:"auto",showHead:k,showFoot:b,tableLineWidth:(d=e.tableLineWidth)!==null&&d!==void 0?d:0,tableLineColor:(m=e.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:B,horizontalPageBreakRepeat:X,horizontalPageBreakBehaviour:(p=e.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function Efe(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),i=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var a=r.startPageNumber+r.pageNumber-1;s=a===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&r?.finalY!=null?r.finalY+20/n:null}function Sfe(t,e,r){var n=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var a=e.includeHiddenHtml;if(r){var o=H9(t,e.html,r,a,e.useCss)||{};n=o.head||n,i=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||kfe(n,i,s);return{columns:l,head:n,body:i,foot:s}}function kfe(t,e,r){var n=t[0]||e[0]||r[0]||[],i=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var a=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(a=o?.colSpan||1);for(var l=0;l<a;l++){var c=void 0;Array.isArray(n)?c=i.length:c=s+(l>0?"_".concat(l):"");var f={dataKey:c};i.push(f)}}),i}var q5=(function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t})(),Tfe=(function(t){j9(e,t);function e(r,n,i,s,a,o){var l=t.call(this,r,n,o)||this;return l.cell=i,l.row=s,l.column=a,l.section=s.section,l}return e})(q5),Afe=(function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,i,s,a){for(var o=0,l=r;o<l.length;o++){var c=l[o],f=new Tfe(e,this,n,i,s,a),d=c(f)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],d)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var s=i[n];s(new q5(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var s=i[n];s(new q5(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t})(),q9=(function(){function t(e,r,n,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof B9&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=i,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,i){var s;return Math.max(n,((s=r.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var i=r.cells[n.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(i,s){var a=n.cells[s.index];if(!a)return 0;var o=r.getLineHeight(a.styles.fontSize),l=a.padding("vertical"),c=l+o;return c>i?c:i},0)},t})(),G9=(function(){function t(e,r,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var a=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=a.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*r,s=n*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=by(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t})(),Cfe=(function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,i=e.allRows();n<i.length;n++){var s=i[n],a=s.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(r=Math.max(r,a.styles.cellWidth))}return r},t})();function Ife(t,e){Nfe(t,e);var r=[],n=0;e.columns.forEach(function(s){var a=s.getMaxCustomCellWidth(e);a?s.width=a:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var i=e.getWidth(t.pageSize().width)-n;i&&(i=G5(r,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=G5(r,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Rfe(e),Ffe(e,t),Pfe(e)}function Nfe(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,i=z9(t,e);e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],c=s.cells[l.index];if(c){var f=e.hooks.didParseCell;e.callCellHooks(t,f,c,s,l,null);var d=c.padding("horizontal");c.contentWidth=bv(c.text,c.styles,t)+d;var m=bv(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,t);if(c.minReadableWidth=m+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||n===!0)c.contentWidth>i?(c.minWidth=i,c.wrappedWidth=i):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var p=10/r;c.minWidth=c.styles.minCellWidth||p,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],c=s.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var f=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},d=f.cellWidth||f.minCellWidth;d&&typeof d=="number"&&(l.minWidth=d,l.wrappedWidth=d)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function G5(t,e,r){for(var n=e,i=t.reduce(function(p,_){return p+_.wrappedWidth},0),s=0;s<t.length;s++){var a=t[s],o=a.wrappedWidth/i,l=n*o,c=a.width+l,f=r(a),d=c<f?f:c;e-=d-a.width,a.width=d}if(e=Math.round(e*1e10)/1e10,e){var m=t.filter(function(p){return e<0?p.width>r(p):!0});m.length&&(e=G5(m,e,r))}return e}function Pfe(t){for(var e={},r=1,n=t.allRows(),i=0;i<n.length;i++)for(var s=n[i],a=0,o=t.columns;a<o.length;a++){var l=o[a],c=e[l.index];if(r>1)r--,delete s.cells[l.index];else if(c)c.cell.height+=s.height,r=c.cell.colSpan,delete s.cells[l.index],c.left--,c.left<=1&&delete e[l.index];else{var f=s.cells[l.index];if(!f)continue;if(f.height=s.height,f.rowSpan>1){var d=n.length-i,m=f.rowSpan>d?d:f.rowSpan;e[l.index]={cell:f,left:m,row:s}}}}}function Rfe(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],i=null,s=0,a=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(a-=1,a>1&&t.columns[o+1])s+=l.width,delete n.cells[l.index];else if(i){var c=i;delete n.cells[l.index],i=null,c.width=l.width+s}else{var c=n.cells[l.index];if(!c)continue;if(a=c.colSpan,s=0,c.colSpan>1){i=c,s+=l.width;continue}c.width=l.width+s}}}function Ffe(t,e){for(var r={count:0,height:0},n=0,i=t.allRows();n<i.length;n++){for(var s=i[n],a=0,o=t.columns;a<o.length;a++){var l=o[a],c=s.cells[l.index];if(c){e.applyStyles(c.styles,!0);var f=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=e.splitTextToSize(c.text,f+1/e.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=QA(c.text,f,c.styles,e,"...");else if(c.styles.overflow==="hidden")c.text=QA(c.text,f,c.styles,e,"");else if(typeof c.styles.overflow=="function"){var d=c.styles.overflow(c.text,f);typeof d=="string"?c.text=[d]:c.text=d}c.contentHeight=c.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var m=c.contentHeight/c.rowSpan;c.rowSpan>1&&r.count*r.height<m*c.rowSpan?r={height:m,count:c.rowSpan}:r&&r.count>0&&r.height>m&&(m=r.height),m>s.height&&(s.height=m)}}r.count--}}function QA(t,e,r,n,i){return t.map(function(s){return Lfe(s,e,r,n,i)})}function Lfe(t,e,r,n,i){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=bv(t,r,n))return t;for(;e<bv(t+i,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function K9(t,e){var r=new dp(t),n=Dfe(e,r.scaleFactor()),i=new Afe(e,n);return Ife(r,i),r.applyStyles(r.userStyles),i}function Dfe(t,e){var r=t.content,n=Mfe(r.columns);if(r.head.length===0){var i=JA(n,"head");i&&r.head.push(i)}if(r.foot.length===0){var i=JA(n,"foot");i&&r.foot.push(i)}var s=t.settings.theme,a=t.styles;return{columns:n,head:k_("head",r.head,n,a,s,e),body:k_("body",r.body,n,a,s,e),foot:k_("foot",r.foot,n,a,s,e)}}function k_(t,e,r,n,i,s){var a={},o=e.map(function(l,c){for(var f=0,d={},m=0,p=0,_=0,w=r;_<w.length;_++){var b=w[_];if(a[b.index]==null||a[b.index].left===0)if(p===0){var k=void 0;Array.isArray(l)?k=l[b.index-m-f]:k=l[b.dataKey];var F={};typeof k=="object"&&!Array.isArray(k)&&(F=k?.styles||{});var N=jfe(t,b,c,i,n,s,F),B=new G9(k,N,t);d[b.dataKey]=B,d[b.index]=B,p=B.colSpan-1,a[b.index]={left:B.rowSpan-1,times:p}}else p--,m++;else a[b.index].left--,p=a[b.index].times,f++}return new q9(l,c,t,d)});return o}function JA(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var i=Ofe(e,n.raw);i!=null&&(r[n.dataKey]=i)}}),Object.keys(r).length>0?r:null}function Ofe(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function Mfe(t){return t.map(function(e,r){var n,i;return typeof e=="object"?i=(n=e.dataKey)!==null&&n!==void 0?n:r:i=r,new Cfe(i,e,r)})}function jfe(t,e,r,n,i,s,a){var o=dfe(n),l;t==="head"?l=i.headStyles:t==="body"?l=i.bodyStyles:t==="foot"&&(l=i.footStyles);var c=Lu({},o.table,o[t],i.styles,l),f=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},d=t==="body"?f:{},m=t==="body"&&r%2===0?Lu({},o.alternateRow,i.alternateRowStyles):{},p=hfe(s),_=Lu({},p,c,m,d);return Lu(_,a)}function Bfe(t,e,r){var n;r===void 0&&(r={});var i=z9(t,e),s=new Map,a=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(m){var p=e.columns.find(function(_){return _.dataKey===m||_.index===m});p&&!s.has(p.index)&&(s.set(p.index,!0),a.push(p.index),o.push(e.columns[p.index]),i-=p.wrappedWidth)});for(var c=!0,f=(n=r?.start)!==null&&n!==void 0?n:0;f<e.columns.length;){if(s.has(f)){f++;continue}var d=e.columns[f].wrappedWidth;if(c||i>=d)c=!1,a.push(f),o.push(e.columns[f]),i-=d;else break;f++}return{colIndexes:a,columns:o,lastIndex:f-1}}function Vfe(t,e){for(var r=[],n=0;n<e.columns.length;n++){var i=Bfe(t,e,{start:n});i.columns.length&&(r.push(i),n=i.lastIndex)}return r}function X9(t,e){var r=e.settings,n=r.startY,i=r.margin,s={x:i.left,y:n},a=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+i.bottom+a;if(r.pageBreak==="avoid"){var l=e.body,c=l.reduce(function(m,p){return m+p.height},0);o+=c}var f=new dp(t);(r.pageBreak==="always"||r.startY!=null&&o>f.pageSize().height)&&(Q9(f),s.y=i.top),e.callWillDrawPageHooks(f,s);var d=Lu({},s);e.startPageNumber=f.pageNumber(),r.horizontalPageBreak?Ufe(f,e,d,s):(f.applyStyles(f.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(m){return Hu(f,e,m,s,e.columns)}),f.applyStyles(f.userStyles),e.body.forEach(function(m,p){var _=p===e.body.length-1;Ev(f,e,m,_,d,s,e.columns)}),f.applyStyles(f.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(m){return Hu(f,e,m,s,e.columns)})),V9(f,e,d,s),e.callEndPageHooks(f,s),e.finalY=s.y,t.lastAutoTable=e,f.applyStyles(f.userStyles)}function Ufe(t,e,r,n){var i=Vfe(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(c,f){t.applyStyles(t.userStyles),f>0?Sm(t,e,r,n,c.columns,!0):ZA(t,e,n,c.columns),zfe(t,e,r,n,c.columns),T_(t,e,n,c.columns)});else for(var a=-1,o=i[0],l=function(){var c=a;if(o){t.applyStyles(t.userStyles);var f=o.columns;a>=0?Sm(t,e,r,n,f,!0):ZA(t,e,n,f),c=e8(t,e,a+1,n,f),T_(t,e,n,f)}var d=c-a;i.slice(1).forEach(function(m){t.applyStyles(t.userStyles),Sm(t,e,r,n,m.columns,!0),e8(t,e,a+1,n,m.columns,d),T_(t,e,n,m.columns)}),a=c};a<e.body.length-1;)l()}function ZA(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return Hu(t,e,s,r,n)})}function zfe(t,e,r,n,i){t.applyStyles(t.userStyles),e.body.forEach(function(s,a){var o=a===e.body.length-1;Ev(t,e,s,o,r,n,i)})}function e8(t,e,r,n,i,s){t.applyStyles(t.userStyles),s=s??e.body.length;var a=Math.min(r+s,e.body.length),o=-1;return e.body.slice(r,a).forEach(function(l,c){var f=r+c===e.body.length-1,d=Y9(t,e,f,n);l.canEntireRowFit(d,i)&&(Hu(t,e,l,n,i),o=r+c)}),o}function T_(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return Hu(t,e,s,r,n)})}function $fe(t,e,r){var n=r.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),s=Math.floor((e-i)/n);return Math.max(0,s)}function Hfe(t,e,r,n){var i={};t.spansMultiplePages=!0,t.height=0;for(var s=0,a=0,o=r.columns;a<o.length;a++){var l=o[a],c=t.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var f=new G9(c.raw,c.styles,c.section);f=Lu(f,c),f.text=[];var d=$fe(c,e,n);c.text.length>d&&(f.text=c.text.splice(d,c.text.length));var m=n.scaleFactor(),p=n.getLineHeightFactor();c.contentHeight=c.getContentHeight(m,p),c.contentHeight>=e&&(c.contentHeight=e,f.styles.minCellHeight-=e),c.contentHeight>t.height&&(t.height=c.contentHeight),f.contentHeight=f.getContentHeight(m,p),f.contentHeight>s&&(s=f.contentHeight),i[l.index]=f}}var _=new q9(t.raw,-1,t.section,i,!0);_.height=s;for(var w=0,b=r.columns;w<b.length;w++){var l=b[w],f=_.cells[l.index];f&&(f.height=_.height);var c=t.cells[l.index];c&&(c.height=t.height)}return _}function Wfe(t,e,r,n){var i=t.pageSize().height,s=n.settings.margin,a=s.top+s.bottom,o=i-a;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,t),c=l<r;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var f=e.hasRowSpan(n.columns),d=e.getMaxCellHeight(n.columns)>o;return d?(f&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(f||n.settings.rowPageBreak==="avoid")}function Ev(t,e,r,n,i,s,a){var o=Y9(t,e,n,s);if(r.canEntireRowFit(o,a))Hu(t,e,r,s,a);else if(Wfe(t,r,o,e)){var l=Hfe(r,o,e,t);Hu(t,e,r,s,a),Sm(t,e,i,s,a),Ev(t,e,l,n,i,s,a)}else Sm(t,e,i,s,a),Ev(t,e,r,n,i,s,a)}function Hu(t,e,r,n,i){n.x=e.settings.margin.left;for(var s=0,a=i;s<a.length;s++){var o=a[s],l=r.cells[o.index];if(!l){n.x+=o.width;continue}t.applyStyles(l.styles),l.x=n.x,l.y=n.y;var c=e.callCellHooks(t,e.hooks.willDrawCell,l,r,o,n);if(c===!1){n.x+=o.width;continue}qfe(t,l,n);var f=l.getTextPos();M9(l.text,f.x,f.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function qfe(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=U9(n.lineWidth,n.fillColor);i&&t.rect(e.x,r.y,e.width,e.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),Gfe(t,e,r,n.lineWidth))}function Gfe(t,e,r,n){var i,s,a,o;n.top&&(i=r.x,s=r.y,a=r.x+e.width,o=r.y,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),l(n.top,i,s,a,o)),n.bottom&&(i=r.x,s=r.y+e.height,a=r.x+e.width,o=r.y+e.height,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),l(n.bottom,i,s,a,o)),n.left&&(i=r.x,s=r.y,a=r.x,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,i,s,a,o)),n.right&&(i=r.x+e.width,s=r.y,a=r.x+e.width,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,i,s,a,o));function l(c,f,d,m,p){t.getDocument().setLineWidth(c),t.getDocument().line(f,d,m,p,"S")}}function Y9(t,e,r,n){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-i}function Sm(t,e,r,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(o){return Hu(t,e,o,n,i)}),e.callEndPageHooks(t,n);var a=e.settings.margin;V9(t,e,r,n),Q9(t),e.pageNumber++,n.x=a.left,n.y=a.top,r.y=a.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return Hu(t,e,o,n,i)}),t.applyStyles(t.userStyles))}function Q9(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function Kfe(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],i=W9(this,n),s=K9(this,i);return X9(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,i){M9(e,r,n,i,this)},t.API.autoTableSetDefaults=function(e){return dp.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){dp.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new dp(this),s=H9(i,e,window,r,!1),a=s.head,o=s.body,l=((n=a[0])===null||n===void 0?void 0:n.map(function(c){return c.content}))||[];return{columns:l,rows:o,data:o}}}var A_;function t8(t,e){var r=W9(t,e),n=K9(t,r);X9(t,n)}try{if(typeof window<"u"&&window){var r8=window,n8=r8.jsPDF||((A_=r8.jspdf)===null||A_===void 0?void 0:A_.jsPDF);n8&&Kfe(n8)}}catch(t){console.error("Could not apply autoTable plugin",t)}async function Xfe(t){const e=new gr;e.setFont("helvetica","normal"),e.setFontSize(16),e.text("Pharmacy Profile Report",20,20),e.setFontSize(12),e.text(`Name: ${t?.displayName||"Pharmacy"}`,20,35),e.text(`Email: ${t?.email||""}`,20,45);const r=await Ta(doc(St,"pharmacies",t.uid)),n=r.exists()?r.data():{};e.text(`Address: ${n.address||""}`,20,55),e.text(`Phone: ${n.phone||""}`,20,65);const s=(await li($r(vr(St,"products"),Xr("pharmacyId","==",t.uid)))).docs.map(c=>({id:c.id,...c.data()}));t8(e,{startY:75,head:[["Product Name","Category","Stock","SKU","Price"]],body:s.map(c=>[c.name,c.category,c.stock,c.sku,`${Number(c.price).toLocaleString()}`]),theme:"striped",headStyles:{fillColor:[54,165,255]},styles:{fontSize:10}});const o=(await li($r(vr(St,"orders"),Xr("pharmacyId","==",t.uid)))).docs.map(c=>({id:c.id,...c.data()}));let l=e.lastAutoTable?e.lastAutoTable.finalY+10:100;e.setFontSize(14),e.text("Orders",20,l),l+=6,t8(e,{startY:l,head:[["Order ID","Date","Total","Items"]],body:o.map(c=>[c.id.slice(0,8),c.createdAt?.toDate?.().toLocaleString?.()||"",`${Number(c.total).toLocaleString()}`,(c.items||[]).map(f=>`${f.name||f.productId} x${f.qty||f.quantity||1}`).join(", ")]),theme:"striped",headStyles:{fillColor:[54,165,255]},styles:{fontSize:9}}),e.save("pharmacy-profile-report.pdf")}function Yfe({onSwitchToCustomer:t}){const{user:e,logout:r,profile:n}=vi(),[i,s]=H.useState([]),[a,o]=H.useState(!1),[l,c]=H.useState(!1),[f,d]=H.useState(0),[m,p]=H.useState(0),[_,w]=H.useState(0),[b,k]=H.useState(null),[F,N]=H.useState(""),[B,X]=H.useState(""),[G,P]=H.useState(""),[A,T]=H.useState(""),[O,I]=H.useState(""),[D,M]=H.useState(""),[ie,be]=H.useState(null),[Ne,we]=H.useState(!1),[le,J]=H.useState(!1),[ue,ee]=H.useState(!1),[C,U]=H.useState(new Set),[W,Y]=H.useState({displayName:e?.displayName||"Pharmacy",address:"",phone:"",email:e?.email||""}),[ae,pe]=H.useState(""),[he,xe]=H.useState(""),[Ee,Fe]=H.useState(!1),[oe,Je]=H.useState("products");H.useEffect(()=>{e&&e.role==="pharmacy"&&Je("all")},[e]);const[Re,fe]=H.useState(null),[ot,et]=H.useState([]),[st,K]=H.useState(null),[Te,Ue]=H.useState(null),[ut,pt]=H.useState(null),xt=40;function yt(Me){if(!Me)return null;if(Me.latitude&&Me.longitude)return{lat:Number(Me.latitude),lng:Number(Me.longitude)};if(Me.lat&&Me.lng)return{lat:Number(Me.lat),lng:Number(Me.lng)};if(Me.lat&&Me.lon)return{lat:Number(Me.lat),lng:Number(Me.lon)};if(Me.location&&typeof Me.location=="object"){if(Me.location.lat&&Me.location.lng)return{lat:Number(Me.location.lat),lng:Number(Me.location.lng)};if(Me.location.latitude&&Me.location.longitude)return{lat:Number(Me.location.latitude),lng:Number(Me.location.longitude)}}if(Me.coords&&typeof Me.coords=="object"){if(Me.coords.latitude&&Me.coords.longitude)return{lat:Number(Me.coords.latitude),lng:Number(Me.coords.longitude)};if(Me.coords.lat&&Me.coords.lng)return{lat:Number(Me.coords.lat),lng:Number(Me.coords.lng)}}return null}function ht(Me,jt){if(!Me||!jt)return null;const Vt=nr=>nr*Math.PI/180,tr=6371,sr=Vt(jt.lat-Me.lat),ur=Vt(jt.lng-Me.lng),Yt=Vt(Me.lat),mr=Vt(jt.lat),an=Math.sin(sr/2),Ur=Math.sin(ur/2),Cn=an*an+Math.cos(Yt)*Math.cos(mr)*Ur*Ur,In=2*Math.atan2(Math.sqrt(Cn),Math.sqrt(1-Cn));return tr*In}function Mt(Me,jt){if(Me==null||jt==null||jt<=0)return null;const Vt=Me/jt,tr=Math.round(Vt*60);if(tr<60)return`${tr} min`;const sr=Math.floor(tr/60),ur=tr%60;return`${sr}h ${ur}m`}H.useEffect(()=>{if(Te||!("geolocation"in navigator))return;let Me=!0;return navigator.geolocation.getCurrentPosition(jt=>{Me&&Ue({lat:jt.coords.latitude,lng:jt.coords.longitude})},jt=>{console.debug("[ProfilePharmacy] geolocation error",jt)},{enableHighAccuracy:!1,timeout:1e4}),()=>{Me=!1}},[]),H.useEffect(()=>{if(!st)return pt(null);const Me=yt(st.data);if(!Me){pt(null);return}let jt=Te||null;if(!jt&&st&&st.source==="users"){const sr=yt(st.data);sr&&(jt=sr)}if(!jt){pt(null);return}const Vt=ht(jt,Me);if(Vt==null){pt(null);return}const tr=Mt(Vt,xt);pt({distanceKm:Vt,eta:tr,speedKmh:xt,pharmCoords:Me,custCoords:jt})},[st,Te]);const Lt=ts();H.useEffect(()=>{const Me=n?.uid||e?.uid;if(Me)return Zv(s,Me)},[n,e]),H.useEffect(()=>{const Me=n?.uid||e?.uid;if(!Me)return;li($r(vr(St,"orders"),Xr("pharmacyId","==",Me))).then(an=>{let Ur=0;an.forEach(Cn=>{const In=Cn.data();Ur+=(In.items||[]).reduce((nr,Hr)=>nr+(Hr.count||Hr.qty||Hr.quantity||1),0)}),d(Ur)}).catch(()=>{}),li($r(vr(St,"threads"),Xr("vendorId","==",Me))).then(an=>{p(an.size)}).catch(()=>{}),li($r(vr(St,"reviews"),Xr("pharmacyId","==",Me))).then(an=>{w(an.size)}).catch(()=>{});const jt=kr(St,"pharmacies",Me),Vt=kr(St,"users",Me);let tr=null,sr=null;const ur=()=>{const an=Ur=>{if(!Ur)return"";const Cn=String(Ur).trim();return!Cn||Cn.includes("@")||Cn.replace(/\D/g,"").length<6?"":Cn};try{console.debug("[ProfilePharmacy] refreshProfile - pharmData:",tr,"userData:",sr)}catch{}Y(Ur=>{const Cn=tr&&tr.displayName||sr&&sr.displayName||e.displayName||Ur.displayName,In=tr&&tr.address||sr&&sr.address||Ur.address||"",nr=tr&&tr.phone||sr&&sr.phone||Ur.phone||"",Hr=an(nr),ns=tr&&tr.email||sr&&sr.email||e.email||Ur.email||"";try{console.debug("[ProfilePharmacy] computed profile ->",{displayName:Cn,address:In,rawPhone:nr,phone:Hr,email:ns})}catch{}return{displayName:Cn,address:In,phone:Hr,email:ns}})},Yt=Ai(jt,an=>{tr=an&&an.exists?an.data():null,ur()},()=>{}),mr=Ai(Vt,an=>{sr=an&&an.exists?an.data():null,ur()},()=>{});return ur(),()=>{try{Yt&&Yt()}catch{}try{mr&&mr()}catch{}}},[n,e]);async function Ot(){await Xfe(n||e)}async function wt(){if(!b)return;let Me=D;await Ja(kr(St,"products",b.id),{name:F,category:B,stock:Number(G),sku:A,price:Number(O),image:Me||b.image||"",description:ae}),k(null)}function Nt(){k(null)}H.useEffect(()=>{b&&(N(b.name||""),X(b.category||""),P(b.stock||""),T(b.sku||""),I(b.price||""),M(b.image||""),be(null),pe(b.description||""))},[b]);async function cr(){const Me=(he||"").trim().toLowerCase();if(!Me){et([]);return}const jt=[];if((oe==="products"||oe==="all")&&i.forEach(Vt=>{`${Vt.name||""} ${Vt.category||""} ${Vt.sku||""}`.toLowerCase().includes(Me)&&jt.push({type:"product",title:Vt.name||"Untitled",subtitle:`${Vt.category||"Uncategorized"}  SKU: ${Vt.sku||""}`,item:Vt})}),oe==="orders"||oe==="all"){let Vt=Re;Vt||(Vt=(await li($r(vr(St,"orders"),Xr("pharmacyId","==",n?.uid||e?.uid)))).docs.map(sr=>({id:sr.id,...sr.data()})),fe(Vt)),(Vt||[]).forEach(tr=>{`${tr.id} ${(tr.items||[]).map(ur=>ur.name).join(" ")} ${tr.customerName||""}`.toLowerCase().includes(Me)&&jt.push({type:"order",title:`Order ${tr.id}`,subtitle:`${tr.items?.length||0} items  ${Number(tr.total||0).toLocaleString()}`,item:tr})})}et(jt)}H.useEffect(()=>{if(!Ee)return;function Me(jt){jt.key==="Escape"&&(Fe(!1),xe(""),et([]))}return window.addEventListener("keydown",Me),()=>window.removeEventListener("keydown",Me)},[Ee]),H.useEffect(()=>{if(!Ee)return;if(!(he||"").trim()){et([]);return}const jt=setTimeout(()=>{cr()},300);return()=>clearTimeout(jt)},[he,oe,Ee]);function er(Me){try{return Me&&Me.toDate?Me.toDate().toISOString():Me||""}catch{return""}}function qt(){if(!i||i.length===0){alert("No products to export");return}const Me=i.map(ur=>({id:ur.id,name:ur.name||"",category:ur.category||"",sku:ur.sku||"",price:Number(ur.price||0),stock:Number(ur.stock||0),description:ur.description||"",image:ur.image||"",createdAt:er(ur.createdAt)})),jt=DP.unparse(Me),Vt=new Blob([jt],{type:"text/csv;charset=utf-8;"}),tr=URL.createObjectURL(Vt),sr=document.createElement("a");sr.href=tr,sr.download=`pharmacy-inventory-${e?.uid||"inventory"}.csv`,document.body.appendChild(sr),sr.click(),sr.remove(),URL.revokeObjectURL(tr)}function wr(){if(!i||i.length===0){alert("No products to export");return}const Me=i.map(mr=>({id:mr.id,name:mr.name||"",category:mr.category||"",sku:mr.sku||"",price:Number(mr.price||0),stock:Number(mr.stock||0),description:mr.description||"",image:mr.image||"",createdAt:er(mr.createdAt)})),jt=w2.json_to_sheet(Me),Vt=w2.book_new();w2.book_append_sheet(Vt,jt,"Inventory");const tr=UF(Vt,{bookType:"xlsx",type:"array"}),sr=new Blob([tr],{type:"application/octet-stream"}),ur=URL.createObjectURL(sr),Yt=document.createElement("a");Yt.href=ur,Yt.download=`pharmacy-inventory-${e?.uid||"inventory"}.xlsx`,document.body.appendChild(Yt),Yt.click(),Yt.remove(),URL.revokeObjectURL(ur)}if(!e)return x.jsx(Z2,{lines:4,className:"my-8"});function rn({user:Me}){return!Me||Me.role!=="superuser"?null:x.jsxs("div",{className:"mt-8 rounded-3xl border bg-yellow-50 border-yellow-400 p-4 flex flex-col items-start relative",children:[x.jsx("div",{className:"text-[20px] font-bold text-yellow-700 mb-2",children:"Superuser Dashboard"}),x.jsxs("ul",{className:"space-y-2 text-[15px] text-yellow-900",children:[x.jsx("li",{children:"Manage all users (view, edit, suspend, delete)"}),x.jsx("li",{children:"Product oversight (add, edit, remove, approve/reject)"}),x.jsx("li",{children:"Prescription management"}),x.jsx("li",{children:"Analytics & reports"}),x.jsx("li",{children:"Moderation (reviews, chats, reported content)"}),x.jsx("li",{children:"System settings"}),x.jsx("li",{children:"Bulk operations"}),x.jsx("li",{children:"Audit logs"}),x.jsx("li",{children:"Impersonate users"})]}),x.jsx("div",{className:"mt-4 text-[13px] text-yellow-700",children:"(Feature scaffolding: UI and logic for each capability can be expanded here.)"})]})}return x.jsxs("div",{className:"pt-10 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col",children:[x.jsx(rn,{user:e}),x.jsx("div",{className:"sticky top-0 z-20 bg-white/90 backdrop-blur-md pb-2 pt-4 -mx-4 sm:-mx-5 md:-mx-8 lg:-mx-12 xl:-mx-0 px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0",children:x.jsxs("div",{className:"w-full flex items-center justify-between",children:[x.jsxs("div",{className:"text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-light font-poppins leading-none",children:["Pharmacy",x.jsx("br",{}),"Profile"]}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("div",{className:"hidden sm:flex items-center border-b px-2 py-1 w-[min(420px,40vw)] max-w-[520px]",children:[x.jsx("input",{value:he,onChange:Me=>xe(Me.target.value),onKeyDown:Me=>{Me.key==="Enter"&&(cr(),Fe(!0))},placeholder:"Search products, orders, customers...",className:"flex-1 text-sm font-light outline-none truncate","aria-label":"Search products or orders"}),x.jsx("button",{onClick:()=>{cr(),Fe(!0)},"aria-label":"Search",className:"ml-2 rounded-full p-2 text-sky-600",children:x.jsx(pd,{className:"h-4 w-4"})})]}),x.jsx("button",{onClick:()=>Fe(!0),"aria-label":"Open search",className:"ml-2 rounded-full p-2 hover:bg-sky-50 sm:hidden",children:x.jsx(pd,{className:"h-5 w-5 text-sky-600"})})]})]})}),Ee&&x.jsx("div",{onClick:()=>{Fe(!1),xe(""),et([])},className:"fixed inset-0 z-50 flex items-start justify-center pt-24 bg-black bg-opacity-30",role:"dialog","aria-modal":"true","aria-label":"Search modal",children:x.jsxs("div",{onClick:Me=>Me.stopPropagation(),className:"bg-white rounded-3xl w-[min(920px,95%)] p-4 shadow-xl border border-[#9ED3FF] max-h-[80vh] overflow-hidden",children:[x.jsxs("div",{className:"mb-3",children:[x.jsxs("div",{className:"flex items-center gap-3 w-full",children:[x.jsx("div",{className:"flex-1 min-w-0",children:x.jsxs("div",{className:"flex items-center bg-[#F0FAFF] border border-[#9ED3FF] rounded-full px-3 py-2 w-full overflow-hidden",children:[x.jsx(pd,{className:"h-4 w-4 text-sky-600 mr-2 flex-shrink-0"}),x.jsx("input",{autoFocus:!0,value:he,onChange:Me=>xe(Me.target.value),onKeyDown:Me=>{Me.key==="Enter"&&cr()},placeholder:"Search products, orders, customers...",className:"flex-1 min-w-0 bg-transparent text-sm outline-none truncate","aria-label":"Search query"})]})}),x.jsx("div",{className:"flex items-center gap-2",children:x.jsxs("select",{value:oe,onChange:Me=>Je(Me.target.value),className:"rounded-full border border-[#9ED3FF] px-3 py-2 text-sm bg-white w-36",children:[x.jsx("option",{value:"products",children:"Products"}),x.jsx("option",{value:"orders",children:"Orders"}),x.jsx("option",{value:"all",children:"All"})]})})]}),x.jsx("div",{className:"w-full border-t mt-3",style:{borderColor:"#E6F7FF"}})]}),x.jsx("div",{className:"mt-4 max-h-[60vh] overflow-auto px-1 py-2",children:ot.length===0?x.jsx("div",{className:"text-zinc-500 p-4",children:"No results yet. Enter a query."}):x.jsx("ul",{className:"space-y-2",children:ot.map((Me,jt)=>x.jsxs("li",{className:"p-2 rounded-2xl border border-[#9ED3FF] bg-white hover:bg-[#E3F3FF] transition-shadow flex items-center gap-3 justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[x.jsx("div",{className:"flex-shrink-0",children:Me.type==="product"?x.jsx(uh,{name:Me.item?.name,image:Me.item?.image,category:Me.item?.category,size:48,className:"rounded-lg"}):x.jsx("div",{className:"h-12 w-12 rounded-lg bg-[#fff7ed] flex items-center justify-center border border-[#ffd7a8]",children:x.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",className:"text-orange-500",children:x.jsx("path",{d:"M3 7h18M3 12h18M3 17h18",stroke:"#f59e0b",strokeWidth:"1.5",strokeLinecap:"round"})})})}),x.jsxs("div",{className:"min-w-0",children:[x.jsx("div",{className:"font-semibold text-sm text-black truncate",children:Me.title}),x.jsx("div",{className:"text-xs text-zinc-500 truncate",children:Me.subtitle})]})]}),x.jsx("div",{className:"flex-shrink-0 flex items-center gap-2",children:Me.type==="product"?x.jsx("button",{onClick:()=>{k(Me.item),Fe(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50",children:"Edit"}):x.jsx("button",{onClick:()=>{Lt("/orders",{state:{highlightOrderId:Me.item.id}}),Fe(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50",children:"Open"})})]},jt))})})]})}),x.jsxs("div",{className:"mt-8 w-full grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-6 items-start",children:[x.jsx("aside",{className:"min-w-0 lg:pr-2",children:x.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] border-[#36A5FF] p-4 flex flex-col items-start relative lg:sticky lg:top-24 overflow-hidden",children:[x.jsx("div",{className:"mb-2",children:e?.photoURL?x.jsx("img",{src:e.photoURL,alt:"Avatar",className:"h-16 w-16 rounded-full object-cover border border-[#9ED3FF] shadow"}):x.jsx("div",{className:"h-16 w-16 rounded-full bg-[#E3F3FF] flex items-center justify-center border border-[#9ED3FF] shadow",children:x.jsx("span",{className:"text-sky-600 text-2xl font-light",children:W.displayName&&W.displayName.charAt?W.displayName.charAt(0):"P"})})}),x.jsx("div",{className:"text-3xl font-light font-poppins text-sky-600 mb-1 tracking-tight truncate w-full",children:W.displayName||"Pharmacy"}),x.jsx("div",{className:"w-full border-b mb-2",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"}}),x.jsx("div",{className:"text-[13px] text-zinc-500 font-light mb-1 truncate w-full",children:W.email||e?.email}),W.address&&x.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 flex items-center truncate w-full",children:[x.jsx(ry,{className:"h-4 w-4 mr-1 flex-shrink-0"}),x.jsx("span",{className:"truncate",children:W.address})]}),W.phone&&x.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 flex items-center truncate w-full",children:[x.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mr-1 flex-shrink-0",children:x.jsx("path",{d:"M2.41333 5.19333C3.37333 7.08 4.92 8.62667 6.80667 9.58667L8.27333 8.12C8.46 7.93333 8.72 7.88 8.95333 7.95333C9.7 8.2 10.5 8.33333 11.3333 8.33333C11.5101 8.33333 11.6797 8.40357 11.8047 8.5286C11.9298 8.65362 12 8.82319 12 9V11.3333C12 11.5101 11.9298 11.6797 11.8047 11.8047C11.6797 11.9298 11.5101 12 11.3333 12C8.32755 12 5.44487 10.806 3.31946 8.68054C1.19404 6.55513 0 3.67245 0 0.666667C0 0.489856 0.0702379 0.320286 0.195262 0.195262C0.320286 0.0702379 0.489856 0 0.666667 0H3C3.17681 0 3.34638 0.0702379 3.4714 0.195262C3.59643 0.320286 3.66667 0.489856 3.66667 0.666667C3.66667 1.5 3.8 2.3 4.04667 3.04667C4.12 3.28 4.06667 3.54 3.88 3.72667L2.41333 5.19333Z",fill:"#7D7D7D"})}),x.jsx("span",{className:"truncate",children:W.phone})]}),ut&&x.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 w-full truncate",children:["ETA: ",x.jsx("span",{className:"text-sky-600 font-medium",children:ut.eta}),"  ",ut.distanceKm.toFixed(2)," km"]}),x.jsx("div",{className:"w-full mt-4 hidden lg:flex justify-start",children:x.jsxs("button",{onClick:async()=>{await r(),window.location.href="/auth/landing"},className:"rounded-full border border-red-300 text-red-600 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:[x.jsx(l5,{className:"h-4 w-4"})," Log Out"]})})]})}),x.jsxs("section",{className:"min-w-0 space-y-6 lg:max-h-[calc(100vh-7rem)] lg:overflow-auto lg:pr-1",children:[x.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] border-[#36A5FF] p-4 flex flex-col items-start relative overflow-hidden",children:[x.jsx("div",{className:"text-[18px] font-light font-poppins text-black mb-2 tracking-tight",children:"Storefront Preview"}),x.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[x.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:"Inventory"}),x.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:i.length})]}),x.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[x.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:"Products Sold"}),x.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:f})]}),x.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[x.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:"Active Chats"}),x.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:m})]}),x.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[x.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:"Reviews"}),x.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:_})]}),x.jsx("div",{className:"w-full flex justify-end mt-4",children:x.jsxs("button",{className:"px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light flex items-center gap-1 shadow hover:bg-sky-700",onClick:Ot,children:[x.jsx(DW,{className:"h-4 w-4"})," Download report"]})})]}),x.jsxs("div",{className:"flex gap-2 w-full",children:[x.jsx("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700",onClick:()=>o(!0),children:"+ Add Product"}),x.jsx("button",{className:"flex-1 rounded-full border border-sky-600 text-sky-600 text-[13px] font-light py-2 hover:bg-[#E3F3FF]",onClick:()=>c(!0),children:"Bulk Upload"})]}),x.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] border-[#36A5FF] p-4 relative overflow-hidden",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("div",{className:"text-[17px] font-light font-poppins text-black tracking-tight",children:"Products"}),i.length>3&&x.jsx("button",{className:"text-sky-600 text-[13px] font-light px-3 py-1 rounded-full hover:bg-[#E3F3FF]",onClick:()=>ee(Me=>!Me),children:ue?"See less":"See more"})]}),x.jsxs("div",{className:"space-y-3",children:[(ue?i:i.slice(0,3)).map(Me=>x.jsxs("button",{className:"w-full text-left rounded-2xl border border-[#9ED3FF] p-3 flex items-center gap-3 bg-white hover:bg-[#E3F3FF] transition shadow-sm min-w-0 overflow-hidden",onClick:()=>k(Me),type:"button",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx(uh,{name:Me.name,image:Me.image,category:Me.category,size:30,className:"border border-[#9ED3FF]",roundedClass:"rounded-xl"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"font-semibold text-[15px] text-black truncate",children:Me.name}),x.jsxs("div",{className:"text-zinc-500 text-[12px] font-light truncate",children:[Me.category,"  Stock: ",Me.stock,"  SKU: ",Me.sku]})]}),x.jsxs("div",{className:"text-[15px] font-semibold text-sky-600 ml-3 flex-shrink-0 whitespace-nowrap",children:["",Number(Me.price).toLocaleString()]})]},Me.id)),i.length===0&&x.jsx("div",{className:"text-zinc-500",children:"No products yet. Use the buttons above to add or bulkupload."})]}),x.jsxs("div",{className:"w-full flex justify-end mt-3",children:[x.jsx("button",{onClick:qt,className:"mr-2 px-4 py-2 rounded-full border border-sky-600 text-sky-600 text-[13px] font-light hover:bg-[#E3F3FF]",children:"Download CSV"}),x.jsx("button",{onClick:wr,className:"px-4 py-2 rounded-full bg-sky-600 text-white text-[13px] font-light hover:bg-sky-700",children:"Download Excel"})]})]})]})]}),a&&x.jsx(LP,{pharmacyId:n?.uid||e?.uid,onClose:()=>o(!1)}),l&&x.jsx(WF,{pharmacyId:n?.uid||e?.uid,onClose:()=>c(!1)}),b&&x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 backdrop-blur-sm",children:x.jsxs("div",{className:"bg-white rounded-3xl p-6 w-[90vw] max-w-sm shadow-xl border border-[#9ED3FF] relative overflow-hidden",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4 relative",children:[x.jsx("div",{className:"text-lg font-medium font-poppins text-black",children:"Edit Product"}),x.jsxs("div",{className:"relative",children:[x.jsx("button",{className:"rounded-full border border-zinc-300 text-zinc-500 py-2 flex items-center justify-center ml-2",style:{width:"36px",height:"36px"},onClick:Me=>{Me.stopPropagation(),we(jt=>!jt)},children:x.jsx(OW,{className:"h-4 w-4"})}),Ne&&x.jsx("div",{className:"absolute right-0 top-full mt-2 bg-white border border-[#9ED3FF] rounded-xl shadow p-2 z-10 overflow-hidden",onClick:Me=>Me.stopPropagation(),children:x.jsxs("button",{className:"flex items-center gap-2 text-red-600 text-[13px] font-light px-2 py-1 hover:bg-red-50 rounded",onClick:()=>{J(!0),we(!1)},children:[x.jsx(UW,{className:"h-4 w-4"})," Delete"]})})]})]}),x.jsxs("div",{className:"space-y-3",onClick:()=>Ne&&we(!1),children:[x.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",value:F,onChange:Me=>N(Me.target.value),placeholder:"Name"}),x.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",value:B,onChange:Me=>X(Me.target.value),placeholder:"Category"}),x.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",value:G,onChange:Me=>P(Me.target.value),placeholder:"Stock",type:"number"}),x.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",value:A,onChange:Me=>T(Me.target.value),placeholder:"SKU"}),x.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",value:O,onChange:Me=>I(Me.target.value),placeholder:"Price",type:"number"}),x.jsxs("div",{className:"flex flex-col gap-1",children:[x.jsx("label",{className:"text-[12px] text-zinc-500 font-light",children:"Product Image"}),x.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",value:D,onChange:Me=>{M(Me.target.value),be(null)},placeholder:"Image URL (or choose file below)",type:"text"}),x.jsx("input",{type:"file",accept:"image/*",className:"mt-1",onChange:Me=>{Me.target.files&&Me.target.files[0]&&(be(Me.target.files[0]),M(""))}}),(D||ie)&&x.jsx("img",{src:ie?URL.createObjectURL(ie):D,alt:"Preview",className:"h-16 w-16 object-cover rounded-xl border mt-2"})]}),x.jsxs("div",{className:"flex flex-col gap-1",children:[x.jsx("label",{className:"text-[12px] text-zinc-500 font-light",children:"Product Description"}),x.jsx("textarea",{className:"w-full border rounded p-2 text-sm",rows:4,value:ae,onChange:Me=>pe(Me.target.value),placeholder:"Enter product description"})]})]}),x.jsxs("div",{className:"flex gap-2 mt-6 items-center",children:[x.jsx("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[12px] font-light py-2 shadow hover:bg-sky-700",onClick:wt,children:"Save"}),x.jsx("button",{className:"flex-1 rounded-full border border-zinc-300 text-zinc-500 text-[12px] font-light py-2",onClick:()=>k(null),children:"Cancel"})]}),le&&x.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 rounded-3xl",onClick:()=>J(!1),children:x.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-xl border border-[#9ED3FF] text-center overflow-hidden",onClick:Me=>Me.stopPropagation(),children:[x.jsx("div",{className:"text-[15px] font-light mb-4",children:"Are you sure you want to delete this item?"}),x.jsxs("div",{className:"flex gap-2 justify-center",children:[x.jsx("button",{className:"rounded-full bg-red-600 text-white text-[12px] font-light px-4 py-2",onClick:Nt,children:"Yes, Delete"}),x.jsx("button",{className:"rounded-full border border-zinc-300 text-zinc-500 text-[12px] font-light px-4 py-2",onClick:()=>J(!1),children:"Cancel"})]})]})})]})}),x.jsx("div",{className:"mt-6 lg:hidden",children:x.jsxs("button",{onClick:async()=>{await r(),window.location.href="/auth/landing"},className:"rounded-full border border-red-300 text-red-600 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:[x.jsx(l5,{className:"h-4 w-4"})," Log Out"]})})]})}function M0({children:t}){const{user:e,loading:r}=vi();return r?x.jsx("div",{className:"p-6",children:"Loading"}):e?t:x.jsx("div",{className:"p-6",children:"Please sign in to continue."})}const Qfe=t=>Array.from(new Set(t.map(r=>r.label.includes("/")?r.label.split("/").pop():r.label))).sort(),Jfe=(t,e)=>Array.from(new Set(t.filter(n=>n.label.endsWith("/"+e)).map(n=>n.label.split("/")[0]))).sort((n,i)=>Number(n)-Number(i));function Zfe({data:t,filter:e,onFilterChange:r,topPeriod:n}){const[i,s]=H.useState(null),[a,o]=H.useState([]);H.useEffect(()=>{if(t.length>0){const m=Math.max(...t.map(p=>p.value))||1;o(t.map(p=>p.value/m*100))}},[t]);let l=Qfe(t),c=e.type==="month"?Jfe(t,e.year||l[0]):[];const f=Math.max(...t.map(m=>m.value))||1,d=t.reduce((m,p)=>m+p.value,0);return x.jsxs("div",{className:"bg-gradient-to-br from-[#F7F7F7] to-[#F0F8FF] rounded-2xl border border-sky-500 p-6 mt-8 overflow-hidden min-w-0 relative",role:"region","aria-label":"Revenue",children:[x.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-sky-100/30 to-transparent rounded-full -translate-y-16 translate-x-16"}),x.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-blue-100/20 to-transparent rounded-full translate-y-12 -translate-x-12"}),x.jsxs("div",{className:"flex items-center justify-between mb-4 min-w-0 relative z-0",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-black font-light text-xl tracking-tight mb-1",children:"Revenue Analytics"}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("div",{className:"text-2xl font-semibold text-sky-700",children:["",d.toLocaleString()]}),x.jsx("div",{className:"px-2 py-1 bg-sky-100 rounded-full text-xs text-sky-700 font-medium",children:"Total"})]})]}),x.jsx("div",{className:"flex flex-col gap-2",children:x.jsxs("select",{className:"rounded-xl border-2 border-sky-200 bg-white px-3 py-2 text-sm text-sky-700 focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md",value:e.type,onChange:m=>r({...e,type:m.target.value}),children:[x.jsx("option",{value:"month",children:" By Month"}),x.jsx("option",{value:"year",children:" By Year"})]})})]}),x.jsxs("div",{className:"flex gap-2 mb-6 min-w-0 relative z-0",children:[e.type==="year"&&x.jsx("select",{className:"rounded-lg border border-sky-200 px-3 py-2 text-sm text-sky-700 bg-white focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md min-w-0 max-w-[140px]",value:e.year||l[0]||"",onChange:m=>r({...e,year:m.target.value}),children:l.map(m=>x.jsx("option",{value:m,children:m},m))}),e.type==="month"&&x.jsxs(x.Fragment,{children:[x.jsx("select",{className:"rounded-lg border border-sky-200 px-3 py-2 text-sm text-sky-700 bg-white focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md min-w-0 max-w-[120px]",value:e.year||l[0]||"",onChange:m=>r({...e,year:m.target.value}),children:l.map(m=>x.jsx("option",{value:m,children:m},m))}),x.jsx("select",{className:"rounded-lg border border-sky-200 px-3 py-2 text-sm text-sky-700 bg-white focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md min-w-0 max-w-[120px]",value:e.month||c[0]||"",onChange:m=>r({...e,month:m.target.value}),children:c.map(m=>x.jsxs("option",{value:m,children:["Month ",m]},m))})]})]}),x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"absolute inset-0 flex flex-col justify-between opacity-20",children:[...Array(5)].map((m,p)=>x.jsx("div",{className:"border-t border-sky-300 border-dashed"},p))}),x.jsx("div",{className:"w-full h-32 flex items-end gap-3 mt-2 min-w-0 overflow-hidden relative z-0",children:t.length===0?x.jsx("div",{className:"w-full h-full flex items-center justify-center",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-4xl mb-2",children:""}),x.jsx("div",{className:"text-zinc-400 text-sm",children:"No revenue data available"}),x.jsx("div",{className:"text-xs text-zinc-400 mt-1",children:"Start making sales to see your revenue analytics"})]})}):t.map((m,p)=>x.jsxs("div",{className:"flex flex-col items-center flex-1 min-w-0 relative group",onMouseEnter:()=>s(p),onMouseLeave:()=>s(null),children:[i===p&&x.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-white border border-sky-200 rounded-lg px-3 py-2 shadow-lg z-20 whitespace-nowrap",children:[x.jsx("div",{className:"text-xs font-medium text-gray-700",children:m.label}),x.jsxs("div",{className:"text-sm font-semibold text-sky-600",children:["",m.value.toLocaleString()]}),x.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",children:x.jsx("div",{className:"w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-white"})})]}),x.jsxs("div",{className:"relative w-8 flex flex-col items-center",children:[x.jsxs("div",{className:"w-full h-32 bg-sky-100/50 rounded-t-lg relative overflow-hidden",children:[x.jsx("div",{className:`absolute bottom-0 w-full rounded-t-lg transition-all duration-1000 ease-out cursor-pointer transform ${i===p?"scale-105":"scale-100"}`,style:{height:`${a[p]||0}%`,background:i===p?"linear-gradient(135deg, #36A5FF 0%, #2563EB 50%, #1D4ED8 100%)":"linear-gradient(135deg, #36A5FF 0%, #3B82F6 100%)",boxShadow:i===p?"0 8px 25px rgba(54, 165, 255, 0.4), 0 4px 10px rgba(54, 165, 255, 0.3)":"0 4px 15px rgba(54, 165, 255, 0.2)"},children:x.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-20 transform -skew-x-12 animate-pulse"})}),x.jsx("div",{className:"absolute w-full h-1 bg-white/40 rounded-full transition-all duration-1000",style:{bottom:`${a[p]||0}%`}})]}),i===p&&x.jsxs("div",{className:"absolute -top-6 bg-sky-600 text-white text-xs px-2 py-1 rounded font-medium",children:["",m.value.toLocaleString()]})]}),x.jsx("span",{className:`text-[11px] mt-2 truncate max-w-[40px] transition-colors duration-200 ${i===p?"text-sky-600 font-medium":"text-zinc-500"}`,children:m.label})]},p))}),t.length>0&&x.jsxs("div",{className:"absolute left-0 top-0 h-32 flex flex-col justify-between text-xs text-zinc-400 -ml-12",children:[x.jsxs("span",{children:["",f.toLocaleString()]}),x.jsxs("span",{children:["",Math.round(f*.75).toLocaleString()]}),x.jsxs("span",{children:["",Math.round(f*.5).toLocaleString()]}),x.jsxs("span",{children:["",Math.round(f*.25).toLocaleString()]}),x.jsx("span",{children:"0"})]})]}),n&&x.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-sky-50 to-blue-50 rounded-xl border border-sky-200 relative z-0",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-sky-400 to-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:""}),x.jsxs("div",{children:[x.jsxs("div",{className:"text-sm font-medium text-sky-700",children:["Best Performing ",e.type==="month"?"Month":"Year"]}),x.jsxs("div",{className:"text-lg font-semibold text-sky-800",children:[n.label,"  ",n.value.toLocaleString()]})]})]})})]})}function ehe({cards:t}){return x.jsxs("div",{className:"w-full overflow-x-auto py-2",style:{overflowY:"hidden"},children:[x.jsx("div",{className:"flex gap-3",style:{minWidth:180,scrollbarWidth:"none",msOverflowStyle:"none"},children:t.map((e,r)=>x.jsx("div",{className:"min-w-[120px] max-w-[150px] h-[80px] bg-[#F7F7F7] rounded-xl border border-sky-500 p-3 flex flex-col items-start justify-center shadow-sm",children:e},r))}),x.jsx("style",{children:`
        .w-full.overflow-x-auto::-webkit-scrollbar { display: none; }
      `})]})}function the({data:t}){const[e,r]=H.useState(null);if(!t||t.length===0)return x.jsx("div",{className:"bg-[#F7F7F7] rounded-2xl border border-sky-500 p-5 mt-8 text-zinc-400 text-sm text-center",children:"No sales trend data."});const n=Math.max(...t.map(d=>d.value))||1,i=25,s=280,a=120,o=[];for(let d=0;d<=4;d++){const m=i+d/4*(a-2*i);o.push(x.jsx("line",{x1:i,y1:m,x2:s-i,y2:m,stroke:"#E5F3FF",strokeWidth:"1",strokeDasharray:"3,3"},d))}const l=t.map((d,m)=>{const p=i+m/(t.length-1)*(s-2*i),_=a-i-d.value/n*(a-2*i);return{x:p,y:_,value:d.value,label:d.label}}),c=l.map((d,m)=>`${m===0?"M":"L"} ${d.x} ${d.y}`).join(" "),f=`${c} L ${l[l.length-1].x} ${a-i} L ${l[0].x} ${a-i} Z`;return x.jsxs("div",{className:"bg-[#F7F7F7] rounded-2xl border border-sky-500 p-5 mt-8 relative overflow-hidden",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h2",{className:"text-black font-light text-lg tracking-tight",children:"Sales Trends"}),x.jsx("div",{className:"text-xs text-zinc-500",children:"Last 6 months"})]}),x.jsxs("div",{className:"relative",children:[x.jsxs("svg",{width:s,height:a,className:"block mx-auto overflow-visible",style:{filter:"drop-shadow(0 2px 4px rgba(54, 165, 255, 0.1))"},children:[x.jsxs("defs",{children:[x.jsxs("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[x.jsx("stop",{offset:"0%",stopColor:"#36A5FF",stopOpacity:"0.2"}),x.jsx("stop",{offset:"100%",stopColor:"#36A5FF",stopOpacity:"0.02"})]}),x.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[x.jsx("stop",{offset:"0%",stopColor:"#36A5FF"}),x.jsx("stop",{offset:"50%",stopColor:"#2563EB"}),x.jsx("stop",{offset:"100%",stopColor:"#1D4ED8"})]})]}),o,x.jsx("path",{d:f,fill:"url(#areaGradient)",className:"transition-all duration-300"}),x.jsx("path",{d:c,fill:"none",stroke:"url(#lineGradient)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-300",style:{filter:"drop-shadow(0 2px 4px rgba(54, 165, 255, 0.3))"}}),l.map((d,m)=>x.jsxs("g",{children:[x.jsx("circle",{cx:d.x,cy:d.y,r:e===m?"8":"6",fill:"rgba(54, 165, 255, 0.2)",className:"transition-all duration-200"}),x.jsx("circle",{cx:d.x,cy:d.y,r:e===m?"4":"3",fill:"#36A5FF",stroke:"white",strokeWidth:"2",className:"cursor-pointer transition-all duration-200 hover:r-4",onMouseEnter:()=>r(m),onMouseLeave:()=>r(null),style:{filter:e===m?"drop-shadow(0 4px 8px rgba(54, 165, 255, 0.4))":"drop-shadow(0 2px 4px rgba(54, 165, 255, 0.2))"}})]},m))]}),e!==null&&x.jsxs("div",{className:"absolute bg-white border border-sky-200 rounded-lg px-3 py-2 shadow-lg z-10 transition-all duration-200",style:{left:l[e].x-30,top:l[e].y-50,transform:"translateX(-50%)"},children:[x.jsx("div",{className:"text-xs font-medium text-gray-700",children:t[e].label}),x.jsxs("div",{className:"text-sm font-semibold text-sky-600",children:[t[e].value," orders"]}),x.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full",children:x.jsx("div",{className:"w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-white"})})]})]}),x.jsx("div",{className:"flex justify-between mt-3 px-6",children:t.map((d,m)=>x.jsx("span",{className:`text-xs transition-colors duration-200 ${e===m?"text-sky-600 font-medium":"text-zinc-500"}`,children:d.label},m))}),x.jsxs("div",{className:"absolute left-1 top-12 h-24 flex flex-col justify-between text-xs text-zinc-400",children:[x.jsx("span",{children:n}),x.jsx("span",{children:Math.round(n*.75)}),x.jsx("span",{children:Math.round(n*.5)}),x.jsx("span",{children:Math.round(n*.25)}),x.jsx("span",{children:"0"})]}),x.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-sky-100/50 to-transparent rounded-full -translate-y-10 translate-x-10"})]})}function rhe({threads:t,unreadCount:e,onThreadClick:r}){const n=ts(),i=()=>{n("/messages")};return x.jsxs("div",{className:"relative bg-[#F7F7F7] rounded-2xl border border-sky-500 p-5 mt-8",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2 cursor-pointer hover:bg-sky-50 -mx-2 px-2 py-1 rounded-lg transition-colors",onClick:i,children:[x.jsx("h2",{className:"text-black font-light text-lg tracking-tight",children:"Recent Messages"}),e>0&&x.jsx("span",{className:"bg-sky-400 text-white text-xs rounded-full px-2 py-0.5 font-bold",children:e})]}),x.jsx("div",{children:t.length===0?x.jsx("div",{className:"text-zinc-400 text-sm",children:"No recent messages."}):x.jsx("ul",{className:"divide-y divide-sky-100",children:t.map(s=>x.jsxs("li",{className:"py-2 rounded-lg px-2 flex items-center cursor-pointer hover:bg-sky-50 transition-colors",onClick:()=>r&&r(s),children:[x.jsx("span",{className:"font-light text-[13px] text-black flex-1 truncate",children:s.customerName||s.customerId}),s.unread>0&&x.jsx("span",{className:"ml-2 bg-sky-400 text-white text-xs rounded-full px-2 py-0.5 font-bold",children:s.unread})]},s.id))})})]})}function nhe(){const[t,e]=H.useState([]),{profile:r,user:n}=vi(),[i,s]=H.useState(!1),[a,o]=H.useState(!1),[l,c]=H.useState([]),[f,d]=H.useState({type:"month",value:""}),[m,p]=H.useState(null),[_,w]=H.useState(0),[b,k]=H.useState(0),[F,N]=H.useState(0),[B,X]=H.useState([]),[G,P]=H.useState([]),[A,T]=H.useState([]),[O,I]=H.useState(0),[D,M]=H.useState(!1),[ie,be]=H.useState(0),[Ne,we]=H.useState(0),[le,J]=H.useState(0),[ue,ee]=H.useState(0),[C,U]=H.useState(0),[W,Y]=H.useState(0),ae=ts();return H.useEffect(()=>{async function pe(){if(r&&r.role==="pharmacy"){const he=await x7(5,r.uid);e(he)}else e([])}pe()},[r]),H.useEffect(()=>{async function pe(){if(!r||r.role!=="pharmacy")return c([]);const he=$r(vr(St,"orders"),Xr("pharmacyId","==",r.uid)),Ee=(await li(he)).docs.map(Re=>Re.data());let Fe={},oe=Re=>"";f.type==="date"?oe=Re=>{const fe=Re.createdAt?.toDate?.()||new Date(Re.createdAt);return fe?fe.toLocaleDateString("en-GB"):""}:f.type==="month"?oe=Re=>{const fe=Re.createdAt?.toDate?.()||new Date(Re.createdAt);return fe?`${fe.getMonth()+1}/${fe.getFullYear()}`:""}:f.type==="year"&&(oe=Re=>{const fe=Re.createdAt?.toDate?.()||new Date(Re.createdAt);return fe?`${fe.getFullYear()}`:""}),Ee.forEach(Re=>{const fe=oe(Re);fe&&(f.value&&!fe.startsWith(f.value)||(Fe[fe]=(Fe[fe]||0)+(Re.total||0)))});const Je=Object.entries(Fe).map(([Re,fe])=>({label:Re,value:fe}));if(Je.sort((Re,fe)=>Re.label.localeCompare(fe.label)),c(Je),Je.length>0){const Re=Je.reduce((fe,ot)=>ot.value>fe.value?ot:fe,Je[0]);p(Re)}else p(null)}pe()},[r,f]),H.useEffect(()=>{async function pe(){if(!r||r.role!=="pharmacy")return;const he=r.uid||n?.uid;if(!he)return;const xe=await li($r(vr(St,"products"),Xr("pharmacyId","==",he)));w(xe.size);const Ee=xe.docs.filter(pt=>{const xt=pt.data(),yt=xt.stock||0,ht=xt.lowStockThreshold||10;return yt<=ht});ee(Ee.length);const Fe=await li($r(vr(St,"orders"),Xr("pharmacyId","==",he)));k(Fe.size);let oe=0,Je=[];const Re=new Date().getMonth(),fe=new Date().getFullYear(),ot=Re===0?11:Re-1,et=Re===0?fe-1:fe;let st=0,K=0,Te=0;const Ue=new Set,ut=[];if(Fe.forEach(pt=>{const xt=pt.data();oe+=xt.total||0,Je.push({id:pt.id,...xt});const yt=xt.createdAt?.toDate?.()||new Date(xt.createdAt),ht=yt.getMonth(),Mt=yt.getFullYear();ht===Re&&Mt===fe&&st++,ht===ot&&Mt===et&&K++,(xt.status==="pending"||xt.status==="processing")&&Te++,ht===Re&&Mt===fe&&xt.customerId&&Ue.add(xt.customerId),(xt.status==="completed"||xt.status==="delivered")&&ut.push(xt)}),N(oe),U(st),Y(K),J(Te),be(Ue.size),ut.length>0){const pt=ut.reduce((xt,yt)=>xt+(yt.total||0),0);we(pt/ut.length)}else we(0);Je.sort((pt,xt)=>(xt.createdAt?.toMillis?.()||0)-(pt.createdAt?.toMillis?.()||0)),X(Je.slice(0,3))}pe()},[r,n]),H.useEffect(()=>{async function pe(){if(!r||r.role!=="pharmacy"){P([]);return}const he=r.uid||n?.uid;if(!he)return;const xe=$r(vr(St,"orders"),Xr("pharmacyId","==",he)),Fe=(await li(xe)).docs.map(fe=>fe.data()),oe=new Date,Je=[];for(let fe=5;fe>=0;fe--){const ot=new Date(oe.getFullYear(),oe.getMonth()-fe,1);Je.push({label:ot.toLocaleString("default",{month:"short"}),year:ot.getFullYear(),month:ot.getMonth()+1})}const Re=Je.map(({label:fe,year:ot,month:et})=>{const st=Fe.filter(K=>{const Te=K.createdAt?.toDate?.()||new Date(K.createdAt);return Te.getFullYear()===ot&&Te.getMonth()+1===et}).length;return{label:fe,value:st}});P(Re)}pe()},[r,n]),H.useEffect(()=>{async function pe(){if(!r||r.role!=="pharmacy"){T([]),I(0);return}const he=r.uid||n?.uid;if(!he)return;const xe=$r(vr(St,"threads"),Xr("vendorId","==",he),uc("lastAt","desc"),yg(3)),Fe=(await li(xe)).docs.map(Je=>({id:Je.id,...Je.data()}));T(Fe.map(Je=>({...Je,unread:Je.unread?.[he]||0})));const oe=Fe.reduce((Je,Re)=>Je+(Re.unread?.[he]||0),0);I(oe)}pe()},[r,n]),x.jsxs("div",{className:"pt-10 pb-32 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-0 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col",children:[x.jsx("header",{className:"sticky top-0 z-20 bg-white/90 backdrop-blur-md pb-2 pt-4 -mx-auto sm:-mx-5 md:-mx-8 lg:-mx-12 xl:-mx-0 px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0",children:x.jsxs("h1",{className:"text-[25px] font-light text-black leading-none",children:["My",x.jsx("br",{}),"Dashboard"]})}),x.jsxs("main",{className:"flex-1 px-3 sm:px-4 py-6 relative w-full mb-4",children:[x.jsxs("div",{className:"w-full grid grid-cols-1 lg:grid-cols-[1fr_420px] gap-6 items-start pb-16",children:[x.jsxs("div",{className:"flex flex-col gap-6",children:[x.jsxs("div",{className:"bg-gradient-to-br from-[#F7F7F7] to-[#F0F8FF] rounded-2xl border border-sky-500 p-6 relative overflow-hidden",children:[x.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-sky-100/40 to-transparent rounded-full -translate-y-10 translate-x-10"}),x.jsxs("div",{className:"relative z-10",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h2",{className:"text-black font-light text-xl tracking-tight",children:"Top Products"}),x.jsx("div",{className:"px-3 py-1 bg-sky-100 rounded-full text-xs text-sky-700 font-medium",children:" Best Sellers"})]}),t.length===0?x.jsxs("div",{className:"text-center py-8",children:[x.jsx("div",{className:"text-4xl mb-3",children:""}),x.jsx("div",{className:"text-zinc-400 text-sm",children:"No sales data yet"}),x.jsx("div",{className:"text-xs text-zinc-400 mt-1",children:"Start selling products to see your top performers"})]}):x.jsx("div",{className:"flex flex-col gap-4",children:t.map((pe,he)=>x.jsxs("div",{className:"group hover:bg-white/50 rounded-xl p-3 transition-all duration-200 relative",children:[x.jsx("div",{className:`absolute -left-2 -top-2 w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold ${he===0?"bg-gradient-to-br from-yellow-400 to-yellow-600":he===1?"bg-gradient-to-br from-gray-400 to-gray-600":he===2?"bg-gradient-to-br from-orange-400 to-orange-600":"bg-gradient-to-br from-sky-400 to-sky-600"}`,children:he+1}),x.jsxs("div",{className:"flex items-center justify-between ml-4",children:[x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"font-medium text-[14px] text-zinc-800 truncate max-w-[140px] group-hover:text-sky-700 transition-colors",children:pe.name}),x.jsxs("div",{className:"text-xs text-zinc-500 mt-1",children:[pe.sold," units sold"]})]}),x.jsx("div",{className:"flex-1 mx-4 relative",children:x.jsxs("div",{className:"h-4 bg-gradient-to-r from-sky-100 to-blue-100 rounded-full relative overflow-hidden",children:[x.jsx("div",{className:`h-4 rounded-full transition-all duration-1000 ease-out relative ${he===0?"bg-gradient-to-r from-yellow-400 to-yellow-500":he===1?"bg-gradient-to-r from-gray-400 to-gray-500":he===2?"bg-gradient-to-r from-orange-400 to-orange-500":"bg-gradient-to-r from-sky-400 to-sky-500"}`,style:{width:`${Math.max(15,pe.sold/(t[0]?.sold||1)*100)}%`,boxShadow:"0 2px 8px rgba(54, 165, 255, 0.3)"},children:x.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 transform -skew-x-12 animate-pulse"})}),x.jsxs("div",{className:"absolute top-0 right-2 h-4 flex items-center text-xs font-medium text-white",style:{left:`${Math.max(15,pe.sold/(t[0]?.sold||1)*100)}%`,transform:"translateX(-100%)"},children:[Math.round(pe.sold/(t[0]?.sold||1)*100),"%"]})]})}),x.jsxs("div",{className:"text-right min-w-[50px]",children:[x.jsx("span",{className:`font-bold text-lg ${he===0?"text-yellow-600":he===1?"text-gray-600":he===2?"text-orange-600":"text-sky-600"}`,children:pe.sold}),x.jsx("div",{className:"text-xs text-zinc-400",children:"units"})]})]}),x.jsx("div",{className:"absolute inset-0 rounded-xl border-2 border-transparent group-hover:border-sky-200 transition-all duration-200"})]},pe.id||he))})]})]}),x.jsxs("div",{className:"flex gap-2 w-full",children:[x.jsx("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700",onClick:()=>s(!0),children:"+ Add Product"}),x.jsx("button",{className:"flex-1 rounded-full border border-sky-600 text-sky-600 text-[13px] font-light py-2 hover:bg-[#E3F3FF]",onClick:()=>o(!0),children:"Bulk Upload"})]}),i&&x.jsx(LP,{pharmacyId:r?.uid||n?.uid,onClose:()=>s(!1)}),a&&x.jsx(WF,{pharmacyId:r?.uid||n?.uid,onClose:()=>o(!1)}),x.jsx("div",{children:x.jsx(the,{data:G})})]}),x.jsxs("div",{className:"flex flex-col gap-6 pb-8 relative z-0",children:[x.jsx("div",{className:"relative z-0",children:x.jsx(Zfe,{data:l,filter:f,onFilterChange:d,topPeriod:m})}),x.jsx("div",{children:x.jsx(ehe,{cards:[x.jsxs("div",{children:[x.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Total Products"}),x.jsx("div",{className:"text-[19px] font-semibold text-sky-700 tracking-tight",children:_})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Total Orders"}),x.jsx("div",{className:"text-[19px] font-semibold text-sky-700 tracking-tight",children:b})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Total Revenue"}),x.jsxs("div",{className:"text-[19px] font-semibold text-sky-700 tracking-tight",children:["",F.toLocaleString()]})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Active Customers"}),x.jsx("div",{className:"text-[19px] font-semibold text-emerald-600 tracking-tight",children:ie}),x.jsx("div",{className:"text-[10px] text-zinc-400 mt-0.5",children:"This Month"})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Avg Order Value"}),x.jsxs("div",{className:"text-[19px] font-semibold text-purple-600 tracking-tight",children:["",Ne.toLocaleString(void 0,{maximumFractionDigits:0})]})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Pending Orders"}),x.jsx("div",{className:"text-[19px] font-semibold text-orange-600 tracking-tight",children:le}),x.jsx("div",{className:"text-[10px] text-zinc-400 mt-0.5",children:"Awaiting"})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Low Stock Items"}),x.jsx("div",{className:"text-[19px] font-semibold text-red-600 tracking-tight",children:ue}),x.jsx("div",{className:"text-[10px] text-zinc-400 mt-0.5",children:"Need Restock"})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Orders This Month"}),x.jsx("div",{className:"text-[19px] font-semibold text-blue-600 tracking-tight",children:C}),x.jsx("div",{className:"text-[10px] text-zinc-400 mt-0.5",children:W>0?C>=W?x.jsxs("span",{className:"text-emerald-600",children:[" +",((C-W)/W*100).toFixed(0),"%"]}):x.jsxs("span",{className:"text-red-500",children:[" -",((W-C)/W*100).toFixed(0),"%"]}):x.jsx("span",{className:"text-gray-400",children:"No comparison"})})]})]})}),ue>0&&x.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-2xl p-4",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[x.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:x.jsx("span",{className:"text-white text-sm font-bold",children:"!"})}),x.jsxs("div",{children:[x.jsx("div",{className:"text-red-700 font-medium text-sm",children:"Low Stock Alert"}),x.jsxs("div",{className:"text-red-600 text-xs",children:[ue," item",ue>1?"s":""," need restocking"]})]})]}),x.jsx("div",{className:"text-xs text-red-600 bg-red-100 rounded-lg px-3 py-2",children:" Check your inventory to avoid running out of popular products"})]}),x.jsx("div",{children:x.jsx(rhe,{threads:A,unreadCount:O,onThreadClick:pe=>ae(`/messages/${pe.id}`)})})]})]}),x.jsx("button",{className:"fixed bottom-24 right-8 z-50 bg-sky-400 text-white rounded-full shadow-lg w-10 h-10 flex items-center justify-center disabled:opacity-0 disabled:cursor-not-allowed","aria-label":"Add Product",onClick:()=>s(!0),disabled:i,children:x.jsx("span",{className:"text-3xl font-bold leading-none",children:"+"})})]})]})}function ihe(){const{user:t,profile:e}=vi(),r=tu(),n=H.useRef(null),i=H.useRef({});return H.useEffect(()=>{if(!(!t?.uid||!e?.role))return Jv({uid:t.uid,role:e.role},s=>{s.forEach(a=>{if(!a.id)return;const o=$r(vr(St,"threads",a.id,"messages"),uc("createdAt","desc"),yg(1));Ai(o,l=>{if(l.empty)return;const c={id:l.docs[0].id,...l.docs[0].data()},f=c.senderId===t.uid;let d=!1;if(r.pathname.startsWith("/chat/")){const m=r.pathname.split("/chat/")[1]?.split("/")[0];e.role==="customer"?a.id===`${m}__${t.uid}`&&(d=!0):a.id.startsWith(`${t.uid}__`)&&(d=!0)}if(r.pathname==="/messages"){const p=new URLSearchParams(r.search).get("chat");p&&(e.role==="customer"?a.id===`${p}__${t.uid}`&&(d=!0):a.id===`${t.uid}__${p}`&&(d=!0))}!f&&i.current[a.id]!==c.id&&!d&&n.current&&(n.current.currentTime=0,n.current.play().catch(()=>{})),i.current[a.id]=c.id})})},s=>console.error("GlobalMessageNotifier error:",s))},[t?.uid,e?.role,r.pathname,r.search]),x.jsx("audio",{ref:n,src:I7,preload:"auto",style:{display:"none"}})}function she({order:t,isOpen:e,onClose:r,onViewOrder:n}){const[i,s]=H.useState(!1),{profile:a}=vi();H.useEffect(()=>{if(e){s(!0);const c=setTimeout(()=>{o()},1e4);return()=>clearTimeout(c)}else s(!1)},[e]);const o=()=>{s(!1),setTimeout(()=>r(),300)},l=()=>{n(t),o()};return!e||!t?null:x.jsx(x.Fragment,{children:x.jsx("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-300 ${i?"translate-y-0 opacity-100 scale-100":"-translate-y-4 opacity-0 scale-95"}`,children:x.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-blue-200 mx-4 overflow-hidden",style:{width:"393px"},children:[x.jsxs("div",{className:"bg-gradient-to-r from-sky-300 to-sky-600 px-6 py-4 relative overflow-hidden",children:[x.jsx("div",{className:"absolute inset-0 bg-white/10 animate-pulse"}),x.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[x.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center animate-bounce",children:x.jsx("span",{className:"text-white text-lg",children:""})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-white font-semibold text-lg",children:"New Order Received!"}),x.jsx("p",{className:"text-green-100 text-sm",children:"You have a new customer order"})]})]})]}),x.jsxs("div",{className:"px-4 py-3",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex justify-between items-start gap-3",children:[x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-gray-600 text-xs",children:"Order ID"}),x.jsxs("p",{className:"font-medium text-gray-900 text-sm truncate",children:["#",t.id?.slice(-8)||"N/A"]})]}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-gray-600 text-xs",children:"Customer"}),x.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:t.customerName||"Unknown Customer"})]}),x.jsxs("div",{className:"text-right flex-shrink-0",children:[x.jsx("p",{className:"text-gray-600 text-xs",children:"Total"}),x.jsxs("p",{className:"font-bold text-green-600 text-sm",children:["",(t.total||0).toLocaleString()]})]})]}),t.items&&t.items.length>0||t.orderItems&&t.orderItems.length>0||t.products&&t.products.length>0?x.jsxs("div",{className:"border-t pt-3",children:[x.jsxs("p",{className:"text-gray-600 text-xs mb-2",children:["Items (",t.items?.length||t.orderItems?.length||t.products?.length||0,")"]}),x.jsxs("div",{className:"max-h-24 overflow-y-auto space-y-1",children:[(t.items||t.orderItems||t.products||[]).slice(0,3).map((c,f)=>x.jsxs("div",{className:"flex justify-between items-center text-xs gap-2 py-0.5",children:[x.jsx("span",{className:"text-gray-700 flex-1 leading-tight font-medium truncate",children:c.name||c.productName||c.title||c.itemName||`Item ${f+1}`}),x.jsxs("span",{className:"text-gray-600 text-right whitespace-nowrap font-semibold bg-gray-100 px-1.5 py-0.5 rounded text-xs flex-shrink-0",children:["x",c.quantity||c.qty||c.amount||1]})]},f)),(t.items?.length||t.orderItems?.length||t.products?.length||0)>3&&x.jsxs("p",{className:"text-xs text-gray-500 italic mt-1 text-center bg-gray-50 py-0.5 rounded",children:["+",(t.items?.length||t.orderItems?.length||t.products?.length||0)-3," more items"]})]})]}):x.jsxs("div",{className:"border-t pt-3",children:[x.jsx("p",{className:"text-gray-600 text-xs mb-2",children:"Items"}),x.jsx("p",{className:"text-gray-500 text-xs italic",children:"No items found"})]}),x.jsxs("div",{className:"border-t pt-2 flex justify-between items-center",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-gray-600 text-xs",children:"Status"}),x.jsx("span",{className:"inline-block px-2 py-0.5 bg-orange-100 text-orange-700 text-xs rounded-full font-medium mt-0.5",children:t.status||"Pending"})]}),x.jsx("div",{className:"text-right text-xs text-gray-500",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),x.jsxs("div",{className:"flex gap-2 mt-4 pt-3 border-t",children:[x.jsx("button",{onClick:l,className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium text-xs transition-all duration-200 shadow-lg hover:shadow-xl",children:"View Details"}),x.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium text-xs transition-all duration-200",children:"Dismiss"})]})]}),x.jsx("button",{onClick:o,className:"absolute top-3 right-3 w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center text-white transition-colors duration-200",children:x.jsx("span",{className:"text-lg",children:""})}),x.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-gray-200 w-full",children:x.jsx("div",{className:"h-full bg-green-500 transition-all duration-[10000ms] ease-linear",style:{width:i?"0%":"100%"}})})]})})})}function ahe(){const[t,e]=H.useState(null),[r,n]=H.useState(!1),{profile:i,user:s}=vi(),a=H.useRef(null),o=H.useRef(!0);H.useEffect(()=>{if(!i||i.role!=="pharmacy")return;"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission();const m=i.uid||s?.uid;if(!m)return;o.current&&(a.current=new Date,o.current=!1);const p=$r(vr(St,"orders"),Xr("pharmacyId","==",m),uc("createdAt","desc"),yg(1)),_=Ai(p,w=>{w.empty||w.docChanges().forEach(b=>{if(b.type==="added"){const k={id:b.doc.id,...b.doc.data()},F=k.createdAt?.toDate()||new Date;a.current&&F>a.current&&(l(),c(k),e(k),n(!0))}})},w=>{console.error("Error listening for order notifications:",w)});return()=>_()},[i,s]);const l=()=>{try{const m=new Audio("/src/assets/message-tone.mp3");m.volume=.5,m.play().catch(()=>{})}catch{}},c=m=>{if("Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),"Notification"in window&&Notification.permission==="granted"&&document.hidden){const p=new Notification("New Order Received! ",{body:`Order #${m.id?.slice(-8)} - ${(m.total||0).toLocaleString()} from ${m.customerName||"Customer"}`,icon:"/favicon.ico",badge:"/favicon.ico",tag:"new-order",requireInteraction:!1,silent:!1});setTimeout(()=>p.close(),5e3),p.onclick=()=>{window.focus(),p.close()}}};return{newOrder:t,showNotification:r,clearNotification:()=>{n(!1),e(null)},viewOrder:m=>m}}const i2=[{key:"users",label:"Users"},{key:"products",label:"Products"},{key:"prescriptions",label:"Prescriptions"},{key:"orders",label:"Orders"},{key:"carts",label:"Carts"},{key:"analytics",label:"Analytics"},{key:"moderation",label:"Moderation"},{key:"export",label:"Export"},{key:"infoCards",label:"Info Cards"}],q1=3;function ohe(){const{user:t,logout:e}=vi(),[r,n]=H.useState([]),[i,s]=H.useState([]),[a,o]=H.useState([]),[l,c]=H.useState([]),[f,d]=H.useState([]),[m,p]=H.useState([]),[_,w]=H.useState(!0),[b,k]=H.useState(!1),[F,N]=H.useState(!1),[B,X]=H.useState(null),[G,P]=H.useState(!1),[A,T]=H.useState(null),[O,I]=H.useState(null),[D,M]=H.useState(!1),[ie,be]=H.useState({displayName:"",email:"",address:"",phone:"",role:"",suspended:!1,password:""}),[Ne,we]=H.useState({name:"",image:"",description:"",stock:"",price:"",sku:"",category:""}),[le,J]=H.useState({header:"",preview:"",link:"",linkText:"",image:"",fullImage:"",bgColor:"#f0f8ff"}),[ue,ee]=H.useState("users"),[C,U]=H.useState("profile"),[W,Y]=H.useState([]),[ae,pe]=H.useState([]),[he,xe]=H.useState([]),[Ee,Fe]=H.useState([]),[oe,Je]=H.useState(0),[Re,fe]=H.useState(""),[ot,et]=H.useState(""),st=H.useRef(null);return ts(),H.useEffect(()=>{if(!t)return;w(!0);const K=Ai(vr(St,"users"),yt=>{n(yt.docs.map(ht=>({id:ht.id,...ht.data()}))),w(!1)}),Te=Ai(vr(St,"products"),yt=>{s(yt.docs.map(ht=>({id:ht.id,...ht.data()})))}),Ue=Ai(vr(St,"prescriptions"),yt=>{o(yt.docs.map(ht=>({id:ht.id,...ht.data()})))}),ut=Ai(vr(St,"orders"),yt=>{c(yt.docs.map(ht=>({id:ht.id,...ht.data()})))}),pt=Ai(vr(St,"carts"),yt=>{d(yt.docs.map(ht=>({id:ht.id,...ht.data()})))}),xt=Ai(vr(St,"infoCards"),yt=>{p(yt.docs.map(ht=>({id:ht.id,...ht.data()})))});return()=>{K(),Te(),Ue(),ut(),pt(),xt()}},[t]),H.useEffect(()=>{let K=null,Te=null,Ue=null;return B&&B.id?(be({displayName:B.displayName||"",email:B.email||"",address:B.address||"",phone:B.phone||"",role:B.role||"",suspended:B.role==="suspended",password:""}),K=Ai($r(vr(St,"prescriptions"),Xr("userId","==",B.id)),ut=>{Y(ut.docs.map(pt=>({id:pt.id,...pt.data()})))}),Te=Ai($r(vr(St,"orders"),Xr("userId","==",B.id)),ut=>{pe(ut.docs.map(pt=>({id:pt.id,...pt.data()})))}),Ue=Ai($r(vr(St,"carts"),Xr("userId","==",B.id)),ut=>{xe(ut.docs.map(pt=>({id:pt.id,...pt.data()})))})):(be({displayName:"",email:"",address:"",phone:"",role:"",suspended:!1,password:""}),Y([]),pe([]),xe([])),()=>{K&&K(),Te&&Te(),Ue&&Ue()}},[B&&B.id]),H.useEffect(()=>{A&&we({name:A.name||"",image:A.image||"",description:A.description||"",stock:A.stock||"",price:A.price||"",sku:A.sku||"",category:A.category||""})},[A]),H.useEffect(()=>{O&&J({header:O.header||"",preview:O.preview||"",link:O.link||"",linkText:O.linkText||"",image:O.image||"",fullImage:O.fullImage||"",bgColor:O.bgColor||"#f0f8ff"})},[O]),H.useEffect(()=>{if(typeof O<"u"&&O&&J){J({header:O.header||"",preview:O.preview||"",link:O.link||"",linkText:O.linkText||"",image:O.image||"",fullImage:O.fullImage||"",bgColor:O.bgColor||"#f0f8ff",headerColor:O.headerColor||"#0ea5e9",previewColor:O.previewColor||"#475569",linkColor:O.linkColor||O.linkTextColor||"#0ea5e9",linkTextColor:O.linkTextColor||O.linkColor||"#0ea5e9",headerFontSize:O.headerFontSize||16,previewFontSize:O.previewFontSize||13,linkFontSize:O.linkFontSize||13,linkTextFontSize:O.linkTextFontSize||13});try{M(!1)}catch{}}},[O]),H.useEffect(()=>{if(!st.current)return;const K=i2.findIndex(Ue=>Ue.key===ue),Te=Math.floor(K/q1);Je(Te),st.current.scrollTo({left:Te*st.current.offsetWidth,behavior:"smooth"})},[ue]),t?_?x.jsx(Z2,{lines:8,className:"my-8"}):x.jsxs("div",{className:"pt-10 pb-28 w-full max-w-4xl mx-auto px-4 min-h-screen flex flex-col",children:[x.jsxs("div",{className:"relative mb-8 flex items-center justify-center",children:[x.jsx("button",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-white border border-sky-100 shadow text-sky-500 hover:bg-sky-100 transition absolute left-0 top-1/2 -translate-y-1/2",style:{display:oe>0?"flex":"none"},onClick:()=>Je(K=>Math.max(0,K-1)),"aria-label":"Previous tabs",children:x.jsx("span",{className:"text-lg",children:"<"})}),x.jsx("div",{className:"flex gap-2 px-8 w-full justify-center",children:i2.slice(oe*q1,(oe+1)*q1).map(K=>x.jsx("button",{className:`min-w-[110px] px-3 py-2 font-semibold tracking-wide text-[13px] rounded-t-lg transition-colors duration-150
                ${ue===K.key?"border-b-2 border-sky-500 text-sky-500 bg-sky-50":"text-zinc-400 bg-white hover:bg-sky-50"}`,onClick:()=>{ee(K.key),Fe([])},children:K.label},K.key))}),x.jsx("button",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-white border border-sky-100 shadow text-sky-500 hover:bg-sky-100 transition absolute right-0 top-1/2 -translate-y-1/2",style:{display:oe<Math.ceil(i2.length/q1)-1?"flex":"none"},onClick:()=>Je(K=>Math.min(Math.ceil(i2.length/q1)-1,K+1)),"aria-label":"Next tabs",children:x.jsx("span",{className:"text-lg",children:">"})})]}),ue==="users"&&x.jsxs("div",{className:"mb-8",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("div",{className:"text-[15px] font-semibold tracking-wide text-sky-500",children:"Users"}),x.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium shadow hover:bg-sky-600",onClick:()=>{be({displayName:"",email:"",address:"",phone:"",role:"customer",suspended:!1}),P(!0)},children:"Add User"})]}),x.jsx("div",{className:"space-y-2",children:(b?r:r.slice(0,3)).map(K=>x.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[x.jsx("input",{type:"checkbox",checked:Ee.includes(K.id),onChange:Te=>Fe(Ue=>Te.target.checked?[...Ue,K.id]:Ue.filter(ut=>ut!==K.id))}),x.jsxs("div",{className:"flex-1",onClick:Te=>{Te.target.tagName!=="BUTTON"&&X(K)},children:[x.jsx("div",{className:"font-semibold text-[13px] text-sky-500",children:K.displayName||K.email}),x.jsx("div",{className:"text-[12px] text-zinc-500",children:K.email}),x.jsxs("div",{className:"text-[11px] text-zinc-400",children:["Role: ",K.role||"customer"]})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{className:"px-2 py-1 rounded bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:async Te=>{Te.stopPropagation(),await Ja(kr(St,"users",K.id),{role:"suspended"})},children:"Suspend"}),x.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-600 text-[12px] font-medium",onClick:async Te=>{Te.stopPropagation(),await Pl(kr(St,"users",K.id))},children:"Delete"})]})]},K.id))}),Ee.length>0&&x.jsxs("div",{className:"flex gap-2 mt-2",children:[x.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-[12px] font-medium",onClick:async()=>{for(const K of Ee)await Pl(kr(St,"users",K));Fe([])},children:"Delete Selected"}),x.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium",onClick:async()=>{for(const K of Ee)await Ja(kr(St,"users",K),{role:"suspended"});Fe([])},children:"Suspend Selected"})]}),r.length>3&&!b&&x.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>k(!0),children:"See more"}),r.length>3&&b&&x.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>k(!1),children:"See less"})]}),ue==="products"&&x.jsxs("div",{className:"mb-8",children:[x.jsx("div",{className:"text-xl font-semibold mb-2",children:"Products"}),x.jsx("div",{className:"space-y-2",children:(F?i:i.slice(0,3)).map(K=>x.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",onClick:Te=>{Te.target.tagName!=="BUTTON"&&T(K)},children:[x.jsxs("div",{className:"flex-1",children:[x.jsx("div",{className:"font-bold",children:K.name}),x.jsx("div",{className:"text-sm text-zinc-500",children:K.category}),x.jsxs("div",{className:"text-xs text-zinc-400",children:["Vendor: ",K.vendorId]})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{className:"px-2 py-1 rounded bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:async Te=>{Te.stopPropagation(),await Ja(kr(St,"products",K.id),{approved:!0}),s(i.map(Ue=>Ue.id===K.id?{...Ue,approved:!0}:Ue))},children:"Approve"}),x.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-600 text-[12px] font-medium",onClick:async Te=>{Te.stopPropagation(),await Pl(kr(St,"products",K.id)),s(i.filter(Ue=>Ue.id!==K.id))},children:"Delete"})]})]},K.id))}),i.length>3&&!F&&x.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>N(!0),children:"See more"}),i.length>3&&F&&x.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>N(!1),children:"See less"})]}),ue==="prescriptions"&&x.jsxs("div",{className:"mb-8",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("div",{className:"text-xl font-semibold",children:"Prescriptions"}),x.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium shadow hover:bg-sky-600",onClick:()=>{},children:"Add Prescription"})]}),x.jsx("div",{className:"space-y-2",children:a.map(K=>x.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[x.jsx("input",{type:"checkbox",checked:Ee.includes(K.id),onChange:Te=>Fe(Ue=>Te.target.checked?[...Ue,K.id]:Ue.filter(ut=>ut!==K.id))}),x.jsxs("div",{className:"flex-1",onClick:()=>{},children:[x.jsx("div",{className:"font-bold",children:K.title||K.id}),x.jsx("div",{className:"text-xs text-zinc-500",children:K.createdAt?new Date(K.createdAt.seconds*1e3).toLocaleString():""}),x.jsxs("div",{className:"text-xs text-zinc-400",children:["Drugs: ",Array.isArray(K.drugs)?K.drugs.join(", "):K.drugs]})]}),x.jsx("div",{className:"flex gap-2",children:x.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-700 text-xs",onClick:async Te=>{Te.stopPropagation(),await Pl(kr(St,"prescriptions",K.id))},children:"Delete"})})]},K.id))}),Ee.length>0&&x.jsx("div",{className:"flex gap-2 mt-2",children:x.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const K of Ee)await Pl(kr(St,"prescriptions",K));Fe([])},children:"Delete Selected"})})]}),ue==="orders"&&x.jsxs("div",{className:"mb-8",children:[x.jsx("div",{className:"flex items-center justify-between mb-2",children:x.jsx("div",{className:"text-xl font-semibold",children:"Orders"})}),x.jsx("div",{className:"space-y-2",children:l.map(K=>x.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[x.jsx("input",{type:"checkbox",checked:Ee.includes(K.id),onChange:Te=>Fe(Ue=>Te.target.checked?[...Ue,K.id]:Ue.filter(ut=>ut!==K.id))}),x.jsxs("div",{className:"flex-1",onClick:()=>{},children:[x.jsxs("div",{className:"font-bold",children:["Order #",K.id]}),x.jsx("div",{className:"text-xs text-zinc-500",children:K.createdAt?new Date(K.createdAt.seconds*1e3).toLocaleString():""}),x.jsxs("div",{className:"text-xs text-zinc-400",children:["Products: ",Array.isArray(K.products)?K.products.map(Te=>Te.name).join(", "):""]})]}),x.jsx("div",{className:"flex gap-2",children:x.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-700 text-xs",onClick:async Te=>{Te.stopPropagation(),await Pl(kr(St,"orders",K.id))},children:"Delete"})})]},K.id))}),Ee.length>0&&x.jsx("div",{className:"flex gap-2 mt-2",children:x.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const K of Ee)await Pl(kr(St,"orders",K));Fe([])},children:"Delete Selected"})})]}),ue==="carts"&&x.jsxs("div",{className:"mb-8",children:[x.jsx("div",{className:"flex items-center justify-between mb-2",children:x.jsx("div",{className:"text-xl font-semibold",children:"Carts"})}),x.jsx("div",{className:"space-y-2",children:f.map(K=>x.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[x.jsx("input",{type:"checkbox",checked:Ee.includes(K.id),onChange:Te=>Fe(Ue=>Te.target.checked?[...Ue,K.id]:Ue.filter(ut=>ut!==K.id))}),x.jsxs("div",{className:"flex-1",onClick:()=>{},children:[x.jsxs("div",{className:"font-bold",children:["Cart #",K.id]}),x.jsx("div",{className:"text-xs text-zinc-500",children:K.updatedAt?new Date(K.updatedAt.seconds*1e3).toLocaleString():""}),x.jsxs("div",{className:"text-xs text-zinc-400",children:["Products: ",Array.isArray(K.products)?K.products.map(Te=>Te.name).join(", "):""]})]}),x.jsx("div",{className:"flex gap-2",children:x.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-700 text-xs",onClick:async Te=>{Te.stopPropagation(),await Pl(kr(St,"carts",K.id))},children:"Delete"})})]},K.id))}),Ee.length>0&&x.jsx("div",{className:"flex gap-2 mt-2",children:x.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const K of Ee)await Pl(kr(St,"carts",K));Fe([])},children:"Delete Selected"})})]}),ue==="analytics"&&x.jsxs("div",{className:"mb-8",children:[x.jsx("div",{className:"text-xl font-semibold mb-4",children:"Analytics"}),x.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[x.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[x.jsx("div",{className:"text-2xl font-bold",children:r.length}),x.jsx("div",{className:"text-xs text-zinc-600",children:"Users"})]}),x.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[x.jsx("div",{className:"text-2xl font-bold",children:i.length}),x.jsx("div",{className:"text-xs text-zinc-600",children:"Products"})]}),x.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[x.jsx("div",{className:"text-2xl font-bold",children:a.length}),x.jsx("div",{className:"text-xs text-zinc-600",children:"Prescriptions"})]}),x.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[x.jsx("div",{className:"text-2xl font-bold",children:l.length}),x.jsx("div",{className:"text-xs text-zinc-600",children:"Orders"})]}),x.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[x.jsx("div",{className:"text-2xl font-bold",children:f.length}),x.jsx("div",{className:"text-xs text-zinc-600",children:"Carts"})]})]}),x.jsx("div",{className:"mt-4 text-zinc-500 text-xs",children:"Charts and advanced analytics coming soon."})]}),ue==="moderation"&&x.jsxs("div",{className:"mb-8",children:[x.jsx("div",{className:"text-xl font-semibold mb-4",children:"Moderation"}),x.jsx("div",{className:"text-zinc-500 mb-4",children:"No flagged items yet. Moderation features coming soon."}),Ee.length>0&&x.jsx("div",{className:"flex gap-2 mt-2",children:x.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const K of Ee);Fe([])},children:"Delete Selected"})})]}),ue==="export"&&x.jsxs("div",{className:"mb-8",children:[x.jsx("div",{className:"text-xl font-semibold mb-4",children:"Export Data"}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(r,"users"),children:"Export Users TSV"}),x.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(i,"products"),children:"Export Products TSV"}),x.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(a,"prescriptions"),children:"Export Prescriptions TSV"}),x.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(l,"orders"),children:"Export Orders TSV"}),x.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(f,"carts"),children:"Export Carts TSV"})]})]}),x.jsx("div",{className:"mt-6",children:x.jsx("button",{onClick:async()=>{await e(),window.location.href="/auth/landing"},className:"rounded-full border border-red-300 text-red-600 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:"Log Out"})}),(B||G)&&x.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:x.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-2xl max-w-md w-full border border-sky-100",children:[x.jsx("div",{className:"text-[16px] font-semibold tracking-wide text-sky-500 mb-4",children:G?"Add User":"Edit User"}),Re&&x.jsx("div",{className:"text-red-500 text-xs mb-2",children:Re}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:ie.displayName,onChange:K=>be(Te=>({...Te,displayName:K.target.value})),placeholder:"Name"}),x.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:ie.email,onChange:K=>be(Te=>({...Te,email:K.target.value})),placeholder:"Email"}),G&&x.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",type:"password",value:ie.password,onChange:K=>be(Te=>({...Te,password:K.target.value})),placeholder:"Password"}),x.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:ie.address,onChange:K=>be(Te=>({...Te,address:K.target.value})),placeholder:"Address"}),x.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:ie.phone,onChange:K=>be(Te=>({...Te,phone:K.target.value})),placeholder:"Phone Number"}),x.jsxs("select",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:ie.role,onChange:K=>be(Te=>({...Te,role:K.target.value})),children:[x.jsx("option",{value:"customer",children:"Customer"}),x.jsx("option",{value:"pharmacy",children:"Pharmacy"}),x.jsx("option",{value:"superuser",children:"Superuser"}),x.jsx("option",{value:"suspended",children:"Suspended"})]}),x.jsxs("div",{className:"flex gap-2 mt-4",children:[x.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium text-[13px] shadow hover:bg-sky-600",onClick:async()=>{if(fe(""),G){const K=XN();try{const Te=await MN(K,ie.email,ie.password),Ue={...ie};delete Ue.password;const ut=await rp(()=>Promise.resolve().then(()=>uN),void 0).then(pt=>pt.addDoc(vr(St,"users"),{...Ue,uid:Te.user.uid}));n([...r,{id:ut.id,...Ue,uid:Te.user.uid}]),P(!1)}catch(Te){fe(Te.message||"Failed to create user. Check email, password, and permissions.")}}else try{await Ja(kr(St,"users",B.id),{displayName:ie.displayName,email:ie.email,address:ie.address,phone:ie.phone,role:ie.role}),n(r.map(K=>K.id===B.id?{...K,...ie}:K)),X(null)}catch(K){fe(K.message||"Failed to update user.")}},children:G?"Add":"Save"}),!G&&(ie.role==="suspended"?x.jsx("button",{className:"px-4 py-2 rounded bg-green-500 text-white font-medium text-[13px] shadow hover:bg-green-600",onClick:async()=>{await Ja(kr(St,"users",B.id),{role:"customer"}),n(r.map(K=>K.id===B.id?{...K,role:"customer"}:K)),X(null)},children:"Lift Suspension"}):x.jsx("button",{className:"px-4 py-2 rounded bg-red-500 text-white font-medium text-[13px] shadow hover:bg-red-600",onClick:async()=>{await Ja(kr(St,"users",B.id),{role:"suspended"}),n(r.map(K=>K.id===B.id?{...K,role:"suspended"}:K)),X(null)},children:"Suspend"})),x.jsx("button",{className:"px-4 py-2 rounded bg-zinc-100 text-zinc-700 font-medium text-[13px] shadow hover:bg-zinc-200",onClick:()=>{X(null),P(!1),fe("")},children:"Cancel"})]})]})]})}),A&&x.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:x.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl max-w-md w-full border border-sky-100",children:[x.jsx("div",{className:"text-[16px] font-semibold tracking-wide text-sky-500 mb-4",children:"Edit Product"}),x.jsxs("div",{className:"space-y-4",children:[x.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:Ne.name,onChange:K=>we(Te=>({...Te,name:K.target.value})),placeholder:"Product Name"}),x.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:Ne.sku,onChange:K=>we(Te=>({...Te,sku:K.target.value})),placeholder:"SKU"}),x.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:Ne.price,onChange:K=>we(Te=>({...Te,price:K.target.value})),placeholder:"Price"}),x.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:Ne.stock,onChange:K=>we(Te=>({...Te,stock:K.target.value})),placeholder:"Stock"}),x.jsx("textarea",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:Ne.description,onChange:K=>we(Te=>({...Te,description:K.target.value})),placeholder:"Description",rows:"2"}),x.jsxs("div",{className:"flex gap-2 mt-4",children:[x.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium text-[13px] shadow hover:bg-sky-600",onClick:async()=>{await Ja(kr(St,"products",A.id),{name:Ne.name,sku:Ne.sku,price:Ne.price,stock:Ne.stock,description:Ne.description}),s(i.map(K=>K.id===A.id?{...K,...Ne}:K)),T(null)},children:"Save"}),x.jsx("button",{className:"px-4 py-2 rounded bg-zinc-100 text-zinc-700 font-medium text-[13px] shadow hover:bg-zinc-200",onClick:()=>T(null),children:"Cancel"})]})]})]})}),ue==="infoCards"&&x.jsxs("div",{className:"mb-8",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("div",{className:"text-xl font-semibold text-sky-500",children:"Info Cards"}),x.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium shadow hover:bg-sky-600",onClick:()=>{try{I(null)}catch{}try{M(!0)}catch{}try{J({header:"",preview:"",link:"",linkText:"",image:"",fullImage:"",bgColor:"#f0f8ff",headerColor:"#0ea5e9",previewColor:"#475569",linkColor:"#0ea5e9",linkTextColor:"#0ea5e9",headerFontSize:16,previewFontSize:13,linkFontSize:13,linkTextFontSize:13})}catch{}},children:"Add Info Card"})]}),x.jsx("div",{className:"space-y-4",children:m.map(K=>x.jsxs("div",{className:"border border-sky-100 rounded-lg p-4 flex items-center justify-between group hover:shadow-md transition cursor-pointer",style:{background:K.bgColor||"#ffffff"},children:[x.jsxs("div",{className:"flex-1",onClick:()=>{I(K),J({header:K.header||"",preview:K.preview||"",link:K.link||"",linkText:K.linkText||"",image:K.image||"",fullImage:K.fullImage||"",bgColor:K.bgColor||"#f0f8ff",headerColor:K.headerColor||"#0ea5e9",previewColor:K.previewColor||"#475569",linkColor:K.linkColor||K.linkTextColor||"#0ea5e9",linkTextColor:K.linkTextColor||K.linkColor||"#0ea5e9",headerFontSize:K.headerFontSize||16,previewFontSize:K.previewFontSize||13,linkFontSize:K.linkFontSize||13,linkTextFontSize:K.linkTextFontSize||13})},children:[x.jsx("div",{style:{color:K.headerColor||"#0ea5e9",fontSize:(K.headerFontSize||16)+"px",fontWeight:600},children:K.header}),x.jsx("div",{style:{color:K.previewColor||"#475569",fontSize:(K.previewFontSize||13)+"px"},className:"mt-1",children:K.preview}),K.link&&K.linkText&&x.jsx("a",{href:K.link,style:{color:K.linkColor||"#0ea5e9",fontSize:(K.linkFontSize||13)+"px"},className:"underline",target:"_blank",rel:"noopener noreferrer",children:K.linkText}),K.image&&x.jsx("img",{src:K.image,alt:"Info",className:"mt-2 rounded-lg",style:{maxWidth:"120px",maxHeight:"60px"}}),K.fullImage&&x.jsx("img",{src:K.fullImage,alt:"Full",className:"mt-2 rounded-lg",style:{maxWidth:"180px",maxHeight:"100px"}}),x.jsxs("div",{className:"text-[11px] text-zinc-400 mt-2",children:["BG: ",K.bgColor]})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{className:"px-2 py-1 rounded bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:Te=>{Te.stopPropagation(),I(K),M(!1),J({header:K.header||"",preview:K.preview||"",link:K.link||"",linkText:K.linkText||"",image:K.image||"",fullImage:K.fullImage||"",bgColor:K.bgColor||"#f0f8ff",headerColor:K.headerColor||"#0ea5e9",previewColor:K.previewColor||"#475569",linkColor:K.linkColor||K.linkTextColor||"#0ea5e9",linkTextColor:K.linkTextColor||K.linkColor||"#0ea5e9",headerFontSize:K.headerFontSize||16,previewFontSize:K.previewFontSize||13,linkFontSize:K.linkFontSize||13,linkTextFontSize:K.linkTextFontSize||13})},children:"Edit"}),x.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-600 text-[12px] font-medium",onClick:async Te=>{Te.stopPropagation(),await Pl(kr(St,"infoCards",K.id))},children:"Delete"})]})]},K.id))}),(O||D)&&x.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:x.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-2xl max-w-md w-full border border-sky-100",children:[x.jsx("div",{className:"text-[16px] font-semibold tracking-wide text-sky-500 mb-4",children:D?"Add Info Card":"Edit Info Card"}),ot&&x.jsx("div",{className:"text-red-500 text-xs mb-2",children:ot}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:le.header,onChange:K=>J(Te=>({...Te,header:K.target.value})),placeholder:"Header"}),x.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:le.preview,onChange:K=>J(Te=>({...Te,preview:K.target.value})),placeholder:"Preview text"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{className:"flex-1 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:le.link,onChange:K=>J(Te=>({...Te,link:K.target.value})),placeholder:"Link (optional)"}),x.jsx("input",{className:"w-36 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:le.linkText,onChange:K=>J(Te=>({...Te,linkText:K.target.value})),placeholder:"Link Text"})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{className:"flex-1 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:le.image,onChange:K=>J(Te=>({...Te,image:K.target.value})),placeholder:"Image URL (right side, optional)"}),x.jsx("input",{className:"w-36 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:le.fullImage,onChange:K=>J(Te=>({...Te,fullImage:K.target.value})),placeholder:"Full Image URL"})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsxs("label",{className:"text-xs text-zinc-500",children:["Header Color",x.jsx("input",{type:"color",value:le.headerColor||"#0ea5e9",onChange:K=>J(Te=>({...Te,headerColor:K.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),x.jsxs("label",{className:"text-xs text-zinc-500",children:["Header Size",x.jsx("input",{type:"range",min:"12",max:"28",value:le.headerFontSize||16,onChange:K=>J(Te=>({...Te,headerFontSize:parseInt(K.target.value)})),className:"w-full mt-1"})]}),x.jsxs("label",{className:"text-xs text-zinc-500",children:["Preview Color",x.jsx("input",{type:"color",value:le.previewColor||"#475569",onChange:K=>J(Te=>({...Te,previewColor:K.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),x.jsxs("label",{className:"text-xs text-zinc-500",children:["Preview Size",x.jsx("input",{type:"range",min:"10",max:"22",value:le.previewFontSize||13,onChange:K=>J(Te=>({...Te,previewFontSize:parseInt(K.target.value)})),className:"w-full mt-1"})]}),x.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Color",x.jsx("input",{type:"color",value:le.linkColor||"#0ea5e9",onChange:K=>J(Te=>({...Te,linkColor:K.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),x.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Size",x.jsx("input",{type:"range",min:"10",max:"22",value:le.linkFontSize||13,onChange:K=>J(Te=>({...Te,linkFontSize:parseInt(K.target.value)})),className:"w-full mt-1"})]}),x.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Text Color",x.jsx("input",{type:"color",value:le.linkTextColor||"#0ea5e9",onChange:K=>J(Te=>({...Te,linkTextColor:K.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),x.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Text Size",x.jsx("input",{type:"range",min:"10",max:"22",value:le.linkTextFontSize||13,onChange:K=>J(Te=>({...Te,linkTextFontSize:parseInt(K.target.value)})),className:"w-full mt-1"})]})]}),x.jsxs("div",{className:"mt-2",children:[x.jsx("label",{className:"text-xs text-zinc-500",children:"Background Color"}),x.jsx("input",{type:"color",value:le.bgColor||"#f0f8ff",onChange:K=>J(Te=>({...Te,bgColor:K.target.value})),className:"w-full h-10 mt-1 p-0 border-0"})]}),x.jsxs("div",{className:"mt-3",children:[x.jsx("div",{className:"text-xs text-zinc-500 mb-2",children:"Live preview"}),x.jsxs("div",{style:{background:le.bgColor||"#f8fafc",padding:12,borderRadius:10,display:"flex",gap:12,alignItems:"center"},children:[x.jsxs("div",{style:{flex:1},children:[x.jsx("div",{style:{color:le.headerColor||"#0ea5e9",fontSize:(le.headerFontSize||16)+"px",fontWeight:700},children:le.header||"Header"}),x.jsx("div",{style:{color:le.previewColor||"#475569",fontSize:(le.previewFontSize||13)+"px",marginTop:4},children:le.preview||"Preview text goes here"}),le.linkText&&x.jsx("div",{style:{marginTop:6},children:x.jsx("a",{style:{color:le.linkTextColor||le.linkColor||"#0ea5e9",fontSize:(le.linkTextFontSize||13)+"px"},href:le.link||"#",children:le.linkText})})]}),le.image&&x.jsx("img",{src:le.image,alt:"Preview",style:{width:80,height:60,objectFit:"cover",borderRadius:6}})]})]}),x.jsxs("div",{className:"flex gap-2 mt-4",children:[x.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium text-[13px] shadow hover:bg-sky-600",onClick:async()=>{if(et(""),D)try{await Xp(vr(St,"infoCards"),le),M(!1)}catch(K){et(K.message||"Failed to add info card.")}else if(O)try{await Ja(kr(St,"infoCards",O.id),le),I(null)}catch(K){et(K.message||"Failed to save info card.")}},children:D?"Add":"Save"}),x.jsx("button",{className:"px-4 py-2 rounded bg-zinc-100 text-zinc-700 font-medium text-[13px] shadow hover:bg-zinc-200",onClick:()=>{I(null),M(!1),et("")},children:"Cancel"})]})]})]})})]})]}):x.jsx(Z2,{lines:4,className:"my-8"})}const lhe="/assets/PharmaseaLogo-LloL1HTz.png";function o1({children:t}){return x.jsx("div",{className:"min-h-screen bg-white",children:x.jsxs("div",{className:"max-w-md mx-auto px-6 pt-14 pb-10",children:[x.jsxs("div",{className:"flex flex-col items-center mb-10",children:[x.jsx("img",{src:lhe,alt:"Pharmasea",className:"w-40 h-15 object-contain"}),x.jsx("div",{className:"mt-3 text-zinc-600 text-[13px]"})]}),t]})})}function che(){const[t,e]=H.useState("customer"),r=ts();return x.jsxs(o1,{children:[x.jsxs("div",{className:"mt-4 font-poppins text-[32px] sm:text-[38px] md:text-[42px] lg:text-[54px] font-thin tracking-tight leading-[109%] text-left",children:["HealthCare at",x.jsx("br",{}),"Your Doorstep"]}),x.jsx("p",{className:"mt-1 text-black text-[13px] sm:text-[14px] md:text-[16px] tracking-tight font-thin leading-[154%] font-poppins text-left",children:"Pick up and deliver medical prescribed medications and, over-the-counter items from pharmacies to your doorstep."}),x.jsxs("div",{className:"mt-8 flex flex-row gap-4 w-full max-w-[350px] mx-0",children:[x.jsxs("button",{onClick:()=>e("customer"),className:`relative rounded-3xl p-0 text-left border-[1] font-poppins bg-[#F7F7F7] w-[169px] h-[169px] border-[1px] ${t==="customer"?"border-[#36A5FF] border-[1.5px] ring-2 ring-[#36A5FF]":"border-[#36A5FF]"}`,children:[x.jsxs("div",{className:"absolute left-[9px] top-[80px] text-[20px] sm:text-[25px] font-light tracking-tight leading-[109%] font-poppins",children:["Im a",x.jsx("br",{}),"customer"]}),x.jsx("div",{className:"absolute left-[9px] top-[127px] text-black text-[12px] sm:text-[13px] font-extralight tracking-tight leading-[109%] font-poppins",children:"Sign Up or Login as a customer"})]}),x.jsxs("button",{onClick:()=>e("pharmacy"),className:`relative rounded-3xl p-0 text-left border-[2] font-poppins bg-[#F7F7F7] w-[169px] h-[169px] border-[1px] ${t==="pharmacy"?"border-[#36A5FF] border-[1.5px] ring-2 ring-[#36A5FF]":"border-[#36A5FF]"}`,children:[x.jsxs("div",{className:"absolute left-[9px] top-[80px] text-[20px] sm:text-[25px] font-light tracking-tight leading-[109%] font-poppins",children:["Im a",x.jsx("br",{}),"pharmacy"]}),x.jsx("div",{className:"absolute left-[9px] top-[127px] text-black text-[12px] sm:text-[13px] font-extralight tracking-tight leading-[109%] font-poppins",children:"Sign Up or Login as a pharmacy"})]})]}),x.jsx("div",{className:"flex justify-start w-full max-w-[350px] mx-0",children:x.jsx("button",{onClick:()=>r(t==="customer"?"/auth/customer/signin":"/auth/pharmacy/signin"),disabled:!t,className:`mt-8 w-full h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] font-light ${t?"border-[#36A5FF] text-[#000000] cursor-pointer bg-white":"border-zinc-300 text-zinc-400 cursor-not-allowed bg-white"} flex items-center justify-center`,children:"Continue"})}),x.jsxs("div",{className:"fixed bottom-0 left-1/2 transform -translate-x-1/2 flex flex-row gap-0 justify-center z-10",children:[x.jsx("div",{className:"flex flex-col items-center",children:x.jsx("svg",{width:"91",height:"152",viewBox:"0 0 91 152",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-30 h-40",children:x.jsx("path",{d:"M17.9558 53.3893L8.27792 64.6462C6.66938 66.5171 5.41493 68.6715 4.57719 71.0016L2.02085 78.1119C1.34548 79.9904 1 81.9738 1 83.9727V144.038C1 145.898 2.49116 147.406 4.33061 147.406M17.9558 53.3893V48.6425M17.9558 53.3893L34.6089 64.4141M53.3814 18.7837L54.3809 16.3407C55.821 12.8205 54.0914 8.79384 50.5647 7.4562L47.3257 6.2277L32.2398 1.3232C31.0192 0.92638 29.7113 0.894269 28.4731 1.23072L23.0885 2.69388C15.4164 4.77859 10.0835 11.8129 10.0835 19.8478V25.8211C10.0835 26.8331 10.3089 27.832 10.7429 28.7438L17.2964 42.5105C17.7304 43.4223 17.9558 44.4213 17.9558 45.4332V48.6425M53.3814 18.7837L44.7483 21.5411C42.9395 22.1189 41.5043 23.5227 40.873 25.3318L39.9367 28.0151C39.0833 30.4607 36.1645 31.416 34.0563 29.9399C32.1107 28.5775 29.4231 29.2739 28.3648 31.4147L27.1285 33.9155C26.5328 35.1206 26.7663 36.576 27.7082 37.5287C29.0866 38.9229 28.8627 41.2433 27.2438 42.3416L17.9558 48.6425M53.3814 18.7837V25.8478C53.3814 26.8426 53.5992 27.8251 54.0192 28.7247L57.1065 35.3372C57.8674 36.9669 57.0683 38.9047 55.3879 39.5045C54.1855 39.9338 53.3814 41.0833 53.3814 42.373V45.3402C53.3814 47.4234 52.4286 49.3894 50.8006 50.6655L49.8214 51.4331C48.2553 52.6607 46.1993 53.0475 44.3015 52.4717C40.9857 51.4656 37.5042 53.4323 36.6123 56.8154L34.6089 64.4141M34.6089 64.4141L45.9226 79.1266C46.832 80.3093 47.3257 81.7647 47.3257 83.263V112.494M47.3257 112.494L57.378 114.673C58.9322 115.01 60.0426 116.399 60.0426 118.007M47.3257 112.494L39.2526 111.134C36.4692 110.664 34.2802 108.472 33.7884 105.662L28.5532 75.7452M5.84452 90.4449L16.5969 122.799C17.4252 125.291 19.6115 127.069 22.1963 127.351L44.9035 129.829M44.9035 129.829L58.4183 131.304C59.2857 131.399 60.0426 130.712 60.0426 129.829M44.9035 129.829V144.344C44.9035 146.035 43.5479 147.406 41.8756 147.406M4.33061 147.406V152M4.33061 147.406H41.8756M41.8756 147.406V152M60.0426 118.007L74.9597 115.396C75.4962 115.302 76.0484 115.39 76.5296 115.648L77.5323 116.185C78.9238 116.93 78.8663 118.966 77.435 119.629C75.9577 120.314 75.9577 122.437 77.435 123.122L80.026 124.323C80.6177 124.597 81.2779 124.683 81.9188 124.569L89.2869 123.253C89.8746 123.149 90.2421 123.876 89.8139 124.296L83.029 130.688C81.8106 132.153 79.7275 132.829 77.6711 132.516L60.0426 129.829M60.0426 118.007V129.829",stroke:t==="customer"?"#36A5FF":"#9C9C9C",strokeWidth:"1"})})}),x.jsx("div",{className:"flex flex-col items-center -mr-4",children:x.jsx("svg",{width:"124",height:"154",viewBox:"0 0 124 154",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-34 h-50",children:x.jsx("path",{d:"M91.0549 25.0462L73.1047 18.9491L69.7581 17.6418M91.0549 25.0462V15.9124C91.0549 12.2404 89.4035 8.76383 86.5593 6.44828L84.0113 4.37386C82.2516 2.94119 80.1275 2.02961 77.8784 1.74191L72.8466 1.09826C69.1654 0.627362 65.4709 1.86534 62.8128 4.46045L55.1546 11.9374M91.0549 25.0462L86.187 39.6793M55.1546 11.9374L42.0162 13.7096C40.4803 13.9168 39.3342 15.2303 39.3342 16.7831C39.3342 18.0841 40.1446 19.2469 41.3636 19.6948L45.7766 21.3161C47.53 21.9603 49.4304 22.0904 51.255 21.6911L53.3292 21.2372M55.1546 11.9374L69.7581 17.6418M69.7581 17.6418L53.3292 21.2372M86.187 39.6793L84.1073 37.9861C82.3434 36.55 81.3192 34.3938 81.3192 32.1164V29.8544C81.3192 28.0625 80.2099 26.4585 78.5355 25.8293C77.2288 25.3383 75.7654 25.5149 74.6123 26.3026L74.4142 26.438C71.9808 28.1005 68.6396 27.1674 67.4151 24.4834L66.8363 23.2147C65.6954 20.7139 62.9904 19.3251 60.2983 19.8579L53.3292 21.2372M86.187 39.6793V42.3816C86.187 47.066 83.509 51.3364 79.2968 53.3686L69.7581 57.9706M53.3292 29.619L50.776 32.8169C49.6344 34.2468 50.2196 36.3768 51.9308 37.0198C52.8004 37.3466 53.4399 38.1002 53.6221 39.0127L54.6658 44.2419C54.9838 45.8349 55.789 47.2892 56.9697 48.4027C59.0405 50.3557 62.0076 51.0253 64.7141 50.1505L65.0424 50.0443M65.0424 50.0443L69.7581 48.5201M65.0424 50.0443L69.7581 57.9706M69.7581 57.9706L58.4277 73.5484C57.2767 75.1309 56.523 76.9678 56.2302 78.9039L55.2919 85.1091C55.2005 85.7137 55.1546 86.3243 55.1546 86.9358V105.833M86.187 51.5686L94.7057 60.4094M94.7057 60.4094L97.2251 68.7403C97.5719 69.8869 97.7481 71.0785 97.7481 72.2767V117.417M94.7057 60.4094L86.5047 58.9153C83.1962 58.3125 79.7862 59.1084 77.0841 61.1141L76.4306 61.5991C74.274 63.1998 72.706 65.4699 71.9705 68.0562L66.3979 87.6526C65.643 90.3072 67.1319 93.082 69.7581 93.915M94.7057 60.4094C96.5984 57.3751 99.9175 55.5317 103.489 55.5317H110.691C116.582 55.5317 121.628 59.7609 122.669 65.5717L122.809 66.3525C122.936 67.0635 123 67.7844 123 68.5068V114.611C123 116.438 122.439 118.22 121.394 119.717C119.731 122.097 117.014 123.514 114.114 123.514H98.3397M97.7481 117.417L98.3397 123.514M97.7481 117.417L84.4731 103.089M56.6758 119.856V136.318C56.6758 138.33 58.3187 139.953 60.3267 139.925M56.6758 119.856L71.2748 118.208C75.606 117.719 79.3455 114.946 81.0785 110.939L84.4731 103.089M56.6758 119.856L51.8317 119.407C49.6266 119.202 47.4077 119.604 45.4139 120.57L41.0962 122.661C39.944 123.219 38.6602 123.447 37.3868 123.319L30.7529 122.655C29.0361 122.483 28.0373 120.626 28.8379 119.094M86.187 99.126L94.7057 79.9202M86.187 99.126L69.7581 93.915M86.187 99.126L84.4731 103.089M98.3397 123.514L99.3773 134.208C99.6467 136.986 97.4902 139.401 94.7057 139.44M55.1546 105.833L53.3508 106.408C50.2244 107.405 46.8289 107.094 43.934 105.547L39.3342 103.089M55.1546 105.833L60.1247 104.684C64.3874 103.698 67.7941 100.495 69.0476 96.2957L69.7581 93.915M39.3342 103.089H32.8489C32.3189 103.089 31.8032 103.261 31.3792 103.58C29.9657 104.642 30.1054 106.809 31.6436 107.68L31.8803 107.814M39.3342 103.089V85.7124C39.3342 82.5134 36.7461 79.9202 33.5536 79.9202M18.6459 113.759H29.0173C29.7889 113.759 30.5391 113.505 31.152 113.035L32.1866 112.242C33.6989 111.083 33.5377 108.753 31.8803 107.814M18.6459 113.759L20.9268 116.299C22.9188 118.516 25.8982 119.569 28.8379 119.094M18.6459 113.759H13.1696C6.44851 113.759 1 108.3 1 101.565V86.9318C1 83.0594 4.13289 79.9202 7.99751 79.9202M28.8379 119.094L33.5536 118.332M7.99751 79.9202L8.39241 78.1395C8.92777 75.7255 10.1829 73.5317 11.9914 71.849L13.4738 70.4696M7.99751 79.9202H33.5536M7.99751 79.9202V100.65M13.4738 70.4696H13.1696C10.9852 70.4696 9.21446 68.6953 9.21446 66.5065C9.21446 64.3178 10.9852 62.5434 13.1696 62.5434H28.0773C30.2617 62.5434 32.0324 64.3178 32.0324 66.5065V66.8114C32.0324 68.8318 30.3979 70.4696 28.3815 70.4696M13.4738 70.4696H28.3815M28.3815 70.4696L30.207 74.4328L33.5536 79.9202M33.5536 79.9202V88.4561C33.5536 95.1908 28.1051 100.65 21.384 100.65H7.99751M7.99751 100.65C7.99751 104.684 11.2741 107.946 15.2991 107.92L31.8803 107.814M60.3267 139.925V154M60.3267 139.925L94.7057 139.44M94.7057 139.44V154M20.7756 83.5784V89.9804M20.7756 89.9804V96.3824M20.7756 89.9804H26.5561M20.7756 89.9804H14.3865",stroke:t==="pharmacy"?"#36A5FF":"#989898",strokeWidth:"1"})})})]})]})}function Bg({to:t}){const e=ts();return x.jsx("button",{onClick:()=>e(t||-1),className:"mb-5 w-[70px] h-[20px] font-poppins font-extralight tracking-tight text-[12px] flex items-center justify-center rounded-full bg-white border border-zinc-300",children:" Back"})}function J9({email:t}){return x.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:x.jsxs("div",{className:"bg-white p-8 max-w-md w-full text-center",children:[x.jsxs("h2",{className:"text-xl font-thin mb-2",children:["Registration",x.jsx("br",{}),"Successful!"]}),x.jsxs("p",{className:"mb-4 text-zinc-600 text-[13px]",children:["A verification link has been sent to ",x.jsx("b",{children:t}),".",x.jsx("br",{}),"Please check your inbox and verify your email to continue."]}),x.jsx(Jf,{to:"/auth/customer/signin",className:"mt-4 inline-block px-4 py-2 bg-sky-600 text-white rounded-full",children:"Go to Sign In"})]})})}function uhe(){const{signUp:t}=vi(),[e,r]=H.useState({name:"",email:"",phone:"",password:"",address:""}),[n,i]=H.useState(!1),[s,a]=H.useState(null),[o,l]=H.useState([]),[c,f]=H.useState(null),d=H.useRef(),[m,p]=H.useState(!1);ts();const _=async F=>{if(!F)return l([]);const B=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(F)}&addressdetails=1&limit=5`)).json();l(B)},w=F=>{const N=F.target.value;r({...e,address:N}),f(null),clearTimeout(d.current),d.current=setTimeout(()=>_(N),400)},b=F=>{r({...e,address:F.display_name}),f(F),l([])},k=async F=>{F.preventDefault(),i(!0);try{if(!e.address)throw new Error("Address is required");const N=await t({email:e.email,password:e.password,displayName:e.name,role:"customer",address:e.address,lat:c?.lat,lon:c?.lon});a(e.email)}catch(N){alert(N.message)}finally{i(!1)}};return s?x.jsx(J9,{email:s}):x.jsxs(o1,{children:[x.jsx(Bg,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),x.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left",children:["I'm a",x.jsx("br",{}),"Customer"]}),x.jsxs("form",{onSubmit:k,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[x.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Full Name",value:e.name,onChange:F=>r({...e,name:F.target.value})}),x.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:e.email,onChange:F=>r({...e,email:F.target.value})}),x.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Phone Number",value:e.phone,onChange:F=>r({...e,phone:F.target.value})}),x.jsxs("div",{className:"relative mb-4",children:[x.jsx("input",{className:"w-full px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Address (required)",value:e.address||"",onChange:w,required:!0,autoComplete:"off"}),o.length>0&&x.jsx("div",{className:"absolute left-0 right-0 bg-white border border-zinc-200 rounded shadow z-10 max-h-40 overflow-y-auto",children:o.map(F=>x.jsx("div",{className:"px-4 py-2 hover:bg-sky-50 cursor-pointer text-[13px]",onClick:()=>b(F),children:F.display_name},F.place_id))})]}),x.jsxs("div",{className:"relative mb-4",children:[x.jsx("input",{type:m?"text":"password",className:"w-full mb-0 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Choose a password",value:e.password,onChange:F=>r({...e,password:F.target.value})}),x.jsx("button",{type:"button",onClick:()=>p(F=>!F),"aria-pressed":m,"aria-label":m?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500",children:m?x.jsx(ey,{className:"h-5 w-5"}):x.jsx(ty,{className:"h-5 w-5"})})]}),x.jsx("div",{className:"flex justify-center w-full",children:x.jsx("button",{disabled:n,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] text-[#36A5FF] bg-white mt-4 flex items-center justify-center",children:n?"Registering":"Register"})})]}),x.jsxs("div",{className:"mt-6 text-center text-zinc-500 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Already have an account? ",x.jsx(Jf,{to:"/auth/customer/signin",className:"text-sky-600 font-medium",children:"Sign In"})]})]})}function Z9({message:t,onRetry:e}){return x.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:x.jsxs("div",{className:"bg-white p-8 max-w-md w-full text-center",children:[x.jsx("h2",{className:"text-xl font-light mb-2 text-red-600",children:"Login Failed"}),x.jsx("p",{className:"mb-4 text-zinc-600",children:t||"Invalid credentials or account not found."}),x.jsx("button",{className:"mt-4 px-4 py-2 bg-sky-600 text-[12px] font-light text-white rounded",onClick:e,children:"Try Again"}),x.jsx(Jf,{to:"/auth/forgot-password",className:"block mt-4 text-sky-600 underline",children:"Forgot password?"})]})})}function fhe(){const{signIn:t}=vi(),[e,r]=H.useState({email:"",password:""}),[n,i]=H.useState(!1),[s,a]=H.useState(null),[o,l]=H.useState(!1),c=ts(),f=async d=>{d.preventDefault(),i(!0),a(null);try{await t(e.email,e.password),c("/")}catch(m){a(m.message||"Login failed.")}finally{i(!1)}};return s?x.jsx(Z9,{message:s,onRetry:()=>a(null)}):x.jsxs(o1,{children:[x.jsx(Bg,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),x.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left",children:["I'm a",x.jsx("br",{}),"Customer"]}),x.jsxs("form",{onSubmit:f,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[x.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:e.email,onChange:d=>r({...e,email:d.target.value})}),x.jsxs("div",{className:"relative mb-4",children:[x.jsx("input",{type:o?"text":"password",className:"w-full px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Password",value:e.password,onChange:d=>r({...e,password:d.target.value}),"aria-label":"Password"}),x.jsx("button",{type:"button",onClick:()=>l(d=>!d),"aria-pressed":o,"aria-label":o?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500",children:o?x.jsx(ey,{className:"h-5 w-5"}):x.jsx(ty,{className:"h-5 w-5"})})]}),x.jsx("div",{className:"flex justify-center w-full",children:x.jsx("button",{disabled:n,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] text-[#36A5FF] bg-white mt-4 flex items-center justify-center",children:n?"Signing in":"Sign In"})})]}),x.jsx("div",{className:"mt-6 text-center text-zinc-500 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:x.jsx(Jf,{to:"/auth/forgot-password",className:"text-sky-600 font-medium",children:"Forgot password?"})}),x.jsxs("div",{className:"mt-2 text-center text-zinc-500 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Dont have an account? ",x.jsx(Jf,{to:"/auth/customer/register",className:"text-sky-600 font-medium",children:"Register"})]})]})}function hhe(){const{signUp:t}=vi(),[e,r]=H.useState({name:"",email:"",phone:"",address:"",password:""}),[n,i]=H.useState(!1),[s,a]=H.useState([]),[o,l]=H.useState(null),[c,f]=H.useState(null),d=H.useRef(),[m,p]=H.useState(!1);ts();const _=async F=>{if(!F)return a([]);const B=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(F)}&addressdetails=1&limit=5`)).json();a(B)},w=F=>{const N=F.target.value;r({...e,address:N}),l(null),clearTimeout(d.current),d.current=setTimeout(()=>_(N),400)},b=F=>{r({...e,address:F.display_name}),l(F),a([])},k=async F=>{F.preventDefault(),i(!0);try{await t({email:e.email,password:e.password,displayName:e.name,role:"pharmacy"});const N=q0.currentUser?.uid;N&&await Ip(kr(St,"pharmacies",N),{id:N,name:e.name,email:e.email,address:e.address,lat:o?.lat||null,lon:o?.lon||null,etaMins:25,phone:e.phone}),f(e.email)}catch(N){alert(N.message)}finally{i(!1)}};return c?x.jsx(J9,{email:c}):x.jsxs(o1,{children:[x.jsx(Bg,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),x.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left",children:["I'm a",x.jsx("br",{}),"Pharmacy"]}),x.jsxs("form",{onSubmit:k,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[x.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Pharmacy Name",value:e.name,onChange:F=>r({...e,name:F.target.value})}),x.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:e.email,onChange:F=>r({...e,email:F.target.value})}),x.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Phone Number",value:e.phone,onChange:F=>r({...e,phone:F.target.value})}),x.jsxs("div",{className:"relative mb-4",children:[x.jsx("input",{className:"w-full px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Address",value:e.address,onChange:w}),s.length>0&&x.jsx("div",{className:"absolute top-full left-0 right-0 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-10 max-h-48 overflow-y-auto",children:s.map((F,N)=>x.jsx("div",{onClick:()=>b(F),className:"px-4 py-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 text-[13px] sm:text-[14px] md:text-[16px] font-poppins text-gray-800 dark:text-gray-200",children:F.display_name},N))})]}),x.jsxs("div",{className:"relative mb-4",children:[x.jsx("input",{type:m?"text":"password",className:"w-full mb-0 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Choose a password",value:e.password,onChange:F=>r({...e,password:F.target.value})}),x.jsx("button",{type:"button",onClick:()=>p(F=>!F),"aria-pressed":m,"aria-label":m?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500",children:m?x.jsx(ey,{className:"h-5 w-5"}):x.jsx(ty,{className:"h-5 w-5"})})]}),x.jsx("div",{className:"flex justify-center w-full",children:x.jsx("button",{disabled:n,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] text-[#36A5FF] bg-white mt-4 flex items-center justify-center",children:n?"Registering":"Register"})})]}),x.jsxs("div",{className:"mt-6 text-center text-zinc-500 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Already have an account? ",x.jsx(Jf,{to:"/auth/pharmacy/signin",className:"text-sky-600 font-medium",children:"Sign In"})]})]})}function dhe(){const{signIn:t}=vi(),[e,r]=H.useState({email:"",password:""}),[n,i]=H.useState(!1),[s,a]=H.useState(null),[o,l]=H.useState(!1),c=ts(),f=async d=>{d.preventDefault(),i(!0),a(null);try{await t(e.email,e.password),c("/")}catch(m){a(m.message||"Login failed.")}finally{i(!1)}};return s?x.jsx(Z9,{message:s,onRetry:()=>a(null)}):x.jsxs(o1,{children:[x.jsx(Bg,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),x.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left",children:["I'm a",x.jsx("br",{}),"Pharmacy"]}),x.jsxs("form",{onSubmit:f,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[x.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:e.email,onChange:d=>r({...e,email:d.target.value})}),x.jsxs("div",{className:"relative mb-4",children:[x.jsx("input",{type:o?"text":"password",className:"w-full px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Password",value:e.password,onChange:d=>r({...e,password:d.target.value}),"aria-label":"Password"}),x.jsx("button",{type:"button",onClick:()=>l(d=>!d),"aria-pressed":o,"aria-label":o?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500",children:o?x.jsx(ey,{className:"h-5 w-5"}):x.jsx(ty,{className:"h-5 w-5"})})]}),x.jsx("div",{className:"flex justify-center w-full",children:x.jsx("button",{disabled:n,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] text-[#36A5FF] bg-white mt-4 flex items-center justify-center",children:n?"Signing in":"Sign In"})})]}),x.jsx("div",{className:"mt-6 text-center text-zinc-500 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:x.jsx(Jf,{to:"/auth/forgot-password",className:"text-sky-600 font-medium",children:"Forgot password?"})}),x.jsxs("div",{className:"mt-2 text-center text-zinc-500 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Dont have an account? ",x.jsx(Jf,{to:"/auth/pharmacy/register",className:"text-sky-600 font-medium",children:"Register"})]})]})}function phe(){const{user:t,logout:e}=vi(),[r,n]=H.useState(!1),[i,s]=H.useState(!1),a=ts();if(H.useEffect(()=>{t&&t.emailVerified},[t]),!t||t.emailVerified)return null;const o=async()=>{s(!0),await _7(t),n(!0),s(!1)},l=async()=>{try{await e()}catch{}window.history&&window.history.length>1?a(-1):a("/auth/landing")};return x.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:x.jsxs("div",{className:"bg-white p-8 max-w-md w-full text-center",children:[x.jsx("h2",{className:"text-xl font-light mb-2",children:"Verify your email"}),x.jsxs("p",{className:"mb-4 text-zinc-600 text-[14px] font-thin",children:["A verification link has been sent to ",x.jsx("b",{children:t.email}),".",x.jsx("br",{}),"Please check your inbox and click the link to activate your account."]}),x.jsx("button",{className:"px-4 py-2 bg-sky-600 text-white rounded-full text-[12px] font-light disabled:opacity-50",onClick:o,disabled:i||r,children:r?"Verification Sent!":i?"Sending...":"Resend Email"}),x.jsx("button",{className:"block mt-4 mx-auto text-sm text-zinc-500 underline",onClick:l,children:"Back"})]})})}function mhe(){const[t,e]=H.useState(""),[r,n]=H.useState(!1),[i,s]=H.useState(""),[a,o]=H.useState(!1),l=async c=>{c.preventDefault(),o(!0),s("");try{await TW(t),n(!0)}catch(f){s(f.message||"Failed to send reset email.")}o(!1)};return x.jsxs(o1,{children:[x.jsx(Bg,{to:"/auth/landing"}),x.jsxs("div",{className:"w-full max-w-md text-center bg-white rounded-2xl  p-8",children:[x.jsx("img",{src:"/ForgotPasswordIllustration.png",alt:"Forgot Password",className:"mx-auto mb-4 w-28 h-28 object-contain"}),x.jsx("h2",{className:"text-xl font-light mb-4",children:"Forgot Password?"}),r?x.jsx("p",{className:"text-green-600 font-thin text-[14px]",children:"A password reset link has been sent to your email."}):x.jsxs("form",{onSubmit:l,className:"space-y-4 text-left",children:[x.jsx("input",{type:"email",className:"w-full border-b border-zinc-300 text-[12px] mt-2 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-200 focus:border-sky-400",placeholder:"Enter your email",value:t,onChange:c=>e(c.target.value),required:!0}),i&&x.jsx("div",{className:"text-red-500 text-sm",children:i}),x.jsxs("button",{type:"submit",disabled:a,className:"w-full rounded-full bg-sky-600 text-white text-[13px] font-light py-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[a&&x.jsx("span",{className:"inline-block h-4 w-4 border-2 border-white/70 border-t-transparent rounded-full animate-spin"}),a?"Sending":"Send Reset Link"]})]})]})]})}function ghe(){const{id:t}=d8(),{userCoords:e}=yb(),[r,n]=H.useState(null),[i,s]=H.useState([]),[a,o]=H.useState(!1),[l,c]=H.useState(null),[f,d]=H.useState(!1);H.useEffect(()=>{if(typeof window>"u")return;const k=window.matchMedia("(orientation: portrait)"),F=N=>d(N.matches);return d(k.matches),k.addEventListener?k.addEventListener("change",F):k.addListener(F),()=>{k.removeEventListener?k.removeEventListener("change",F):k.removeListener(F)}},[]);const m=f,p=ts(),{user:_,profile:w}=vi();H.useEffect(()=>{async function k(){const F=await Ta(kr(St,"pharmacies",t));n(F.data())}return k(),Zv(s,t)},[t]),H.useEffect(()=>{if(r&&e){const k=C7(r,e,"driving");c(k)}else c(null)},[r,e]);const b=async()=>{if(!_||!_.uid){p("/auth/landing");return}if(w?.role!=="customer"){alert("Only customers can start a chat with a pharmacy.");return}try{await xb({vendorId:t,customerId:_.uid,role:"customer"}),p("/messages")}catch(k){console.error(k),alert("Could not start chat thread.")}};return x.jsxs("div",{className:"min-h-screen bg-white/80 backdrop-blur-md w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 pt-8 pb-28",children:[x.jsxs("div",{className:"sticky top-0 z-20 bg-white/90 backdrop-blur-md pb-2 pt-4 -mx-4 sm:-mx-5 md:-mx-8 lg:-mx-12 xl:-mx-0 px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 flex items-center gap-3",children:[x.jsxs("button",{onClick:()=>p(-1),className:"w-[72px] h-[25px] font-poppins font-extralight tracking-tight text-[14px] flex items-center justify-center rounded-full bg-white border border-zinc-300 mr-1",children:[x.jsx(vb,{className:"h-3 w-3 mr-0"})," Back"]}),x.jsx("div",{className:"-ml-1 text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-light font-poppins leading-none",children:"VendorProfile"})]}),x.jsx("div",{className:"w-full mx-auto mt-6",children:x.jsxs("div",{className:`flex flex-col ${m?"":"md:grid md:grid-cols-3"} gap-6`,children:[x.jsxs("div",{className:`order-2 ${m?"":"md:order-2 md:col-span-2"}`,children:[x.jsxs("div",{className:`border border-zinc-200 rounded-2xl bg-white shadow-sm p-4 mb-4 flex items-center justify-between ${m?"":"md:sticky md:top-20 md:bg-white/90 md:backdrop-blur-sm md:z-20"}`,children:[x.jsxs("div",{children:[x.jsxs("div",{className:"text-[18px] font-poppins font-medium",children:["Products by",x.jsx("br",{}),r?.name||"Vendor"]}),x.jsxs("div",{className:"text-zinc-500 text-[13px] font-poppins font-light",children:[i.length," items"]})]}),x.jsxs("div",{children:[i.length>3&&!a&&x.jsx("button",{className:"text-sky-600 text-[12px] font-poppins font-light px-3 py-1 rounded-full hover:bg-sky-50 transition",onClick:()=>o(!0),children:"See more"}),i.length>3&&a&&x.jsx("button",{className:"text-sky-600 text-[13px] font-poppins font-light px-3 py-1 rounded-full hover:bg-sky-50 transition",onClick:()=>o(!1),children:"See less"})]})]}),x.jsx("div",{className:`${m?"":"md:max-h-[calc(100vh-12rem)] md:overflow-y-auto md:pr-4"}`,children:x.jsxs("div",{className:"space-y-3 px-0",children:[(a?i:i.slice(0,3)).map(k=>x.jsxs("div",{className:"rounded-2xl border border-zinc-200 p-3 flex items-center gap-3 bg-white shadow-sm cursor-pointer hover:bg-sky-50 transition overflow-hidden",onClick:()=>p(`/product/${k.id}`),children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx(uh,{name:k.name,image:k.image,category:k.category,size:30})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"font-poppins font-medium text-[15px] tracking-tight mb-1 truncate",title:k.name,children:k.name}),x.jsxs("div",{className:"text-zinc-500 text-[12px] font-poppins font-light truncate",title:`${k.category}  Stock: ${k.stock}  SKU: ${k.sku}`,children:[k.category,"  Stock: ",k.stock,"  SKU: ",k.sku]})]}),x.jsxs("div",{className:"text-[15px] font-poppins font-medium text-sky-600 ml-3 flex-shrink-0",children:["",Number(k.price).toLocaleString()]})]},k.id)),i.length===0&&x.jsx("div",{className:"text-zinc-500 text-[13px] font-poppins font-light",children:"No products yet."})]})})]}),x.jsxs("aside",{className:`order-1 ${m?"":"md:order-1 md:col-span-1 md:self-start md:sticky md:top-20"}`,children:[x.jsxs("div",{className:"border border-zinc-200 rounded-2xl bg-white shadow-sm p-5 mb-4 w-full flex flex-col items-start",children:[x.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 flex items-center justify-center mb-2",children:x.jsx("span",{className:"text-[32px] font-poppins font-light text-sky-600",children:r?.name?.charAt(0)||"V"})}),x.jsx("div",{className:"text-[22px] font-poppins font-medium tracking-tight text-sky-600 mb-1",children:r?.name||"Vendor"}),x.jsx("div",{className:"text-zinc-500 text-[13px] font-poppins font-light mb-1",children:r?.email||""}),x.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 text-[13px] font-poppins font-light mb-1",children:[x.jsx(ry,{className:"h-3 w-3"})," ",r?.address||""]}),x.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 text-[13px] font-poppins font-light mb-1",children:[x.jsx(S7,{className:"h-3 w-3"}),l?`${l.formatted} to ${r?.name||"vendor"}`:e?"Calculating ETA...":"Fetching location..."]}),x.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 text-[13px] font-poppins font-light",children:[x.jsx(J2,{className:"h-3 w-3"})," ",r?.phone||""]})]}),x.jsx("div",{className:"w-full mb-4",children:x.jsxs("button",{onClick:b,className:"w-full rounded-full bg-sky-600 text-white h-[37px] text-[12px] font-poppins font-light flex items-center justify-center gap-2",children:[x.jsx(MW,{className:"h-4 w-4"})," Message Vendor"]})})]})]})})]})}function xhe(){const t=tu(),e=ts(),{user:r,profile:n}=vi(),[i,s]=H.useState(t.pathname),[a,o]=H.useState(0),[l,c]=H.useState(0),[f,d]=H.useState(0),{newOrder:m,showNotification:p,clearNotification:_}=ahe();H.useEffect(()=>s(t.pathname),[t.pathname]),H.useEffect(()=>{if(!r||n&&n.role==="pharmacy")return o(0);const N=$r(vr(St,"users",r.uid,"cart"));return Ai(N,X=>o(X.size))},[r,n]),H.useEffect(()=>{if(!r||!n||n.role!=="pharmacy")return d(0);const N=n.uid||r.uid,B=$r(vr(St,"orders"),Xr("pharmacyId","==",N));return Ai(B,G=>{const P=G.docs.filter(A=>{const O=A.data().status?.toLowerCase()||"pending";return!["processing","shipped","fulfilled","cancelled"].includes(O)});d(P.length)})},[r,n]),H.useEffect(()=>{if(!r||!n?.role)return c(0);const N=Jv({uid:r.uid,role:n.role},B=>{try{const X=B.reduce((G,P)=>{const A=P?.unread?.[r.uid];return G+(typeof A=="number"?A:0)},0);c(X),console.debug("[AppLayout] unread total from listenUserThreads",{sum:X,count:B.length})}catch(X){console.error("[AppLayout] error computing unread from threads",X)}},B=>console.error("[AppLayout] listenUserThreads error",B));return()=>N&&N()},[r,n?.role]);const b=!!new URLSearchParams(t.search).get("chat"),k=typeof window<"u"&&new URLSearchParams(window.location.search).get("debugBottomNav")==="1";H.useEffect(()=>{k&&console.debug("[AppLayout] render",{chatModalOpen:b,unreadMessages:l,tab:i,cartCount:a})},[k,b,l,i,a]);const F=N=>{e("/orders")};return x.jsxs("div",{className:`min-h-screen bg-white w-full flex flex-col items-center px-2 md:px-8 lg:px-16 xl:px-32 ${b?"":"pb-24"}`,children:[x.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto flex-1 flex flex-col",children:x.jsx(v8,{})}),!b&&x.jsx(x.Fragment,{children:x.jsx(CW,{tab:i,setTab:N=>e(N),cartCount:a,unreadMessages:l,ordersCount:f})}),k&&x.jsxs("div",{className:"fixed bottom-24 right-4 z-60 bg-black/80 text-white text-xs px-3 py-1 rounded",children:["AppDebug: chatModalOpen=",String(b)," unread=",String(l)]}),x.jsx(she,{order:m,isOpen:p,onClose:_,onViewOrder:F})]})}function i8(){return x.jsx("div",{className:"min-h-screen bg-white w-full flex flex-col items-center px-2 md:px-8 lg:px-16 xl:px-32",children:x.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto flex-1 flex flex-col",children:x.jsx(v8,{})})})}function vhe(){const{id:t}=d8(),[e,r]=H.useState(null),[n,i]=H.useState(null);return H.useEffect(()=>{async function s(){const o=(await Ta(kr(St,"products",t))).data();if(r(o?{id:t,...o}:null),o?.pharmacyId){const l=await Ta(kr(St,"pharmacies",o.pharmacyId));i(l.data())}}s()},[t]),e?x.jsx(WW,{product:e,pharmacy:n}):null}function yhe(){const{profile:t}=vi();return t?t.role==="pharmacy"?x.jsx(Yfe,{onSwitchToCustomer:()=>{}}):x.jsx(vY,{onSwitchToPharmacy:()=>{}}):null}function whe(){const{user:t,profile:e}=vi(),r=tu(),n=new URLSearchParams(r.search),i=n.get("scrollTo")?parseInt(n.get("scrollTo"),10):void 0;return t&&e===void 0?x.jsx(LoadingSkeleton,{lines:4,className:"my-8"}):t&&!t.emailVerified?x.jsxs($E,{children:[x.jsx(Ti,{path:"/verify-email",element:x.jsx(phe,{})}),x.jsx(Ti,{path:"*",element:x.jsx(D1,{to:"/verify-email",replace:!0})})]}):e&&e.role==="superuser"&&r.pathname==="/"?x.jsx(D1,{to:"/superuser",replace:!0}):x.jsxs($E,{children:[x.jsxs(Ti,{element:x.jsx(i8,{}),children:[x.jsx(Ti,{path:"/auth/landing",element:x.jsx(che,{})}),x.jsx(Ti,{path:"/auth/customer/register",element:x.jsx(uhe,{})}),x.jsx(Ti,{path:"/auth/customer/signin",element:x.jsx(fhe,{})}),x.jsx(Ti,{path:"/auth/pharmacy/register",element:x.jsx(hhe,{})}),x.jsx(Ti,{path:"/auth/pharmacy/signin",element:x.jsx(dhe,{})}),x.jsx(Ti,{path:"/auth/forgot-password",element:x.jsx(mhe,{})}),x.jsx(Ti,{path:"/auth",element:x.jsx(D1,{to:"/auth/landing",replace:!0})}),x.jsx(Ti,{path:"/chat/:vendorId",element:x.jsx(M0,{children:x.jsx(RP,{scrollTo:i,onBackRoute:"/messages"})})})]}),x.jsx(Ti,{element:x.jsx(i8,{}),children:x.jsx(Ti,{path:"/superuser",element:x.jsx(M0,{children:x.jsx(ohe,{})})})}),x.jsxs(Ti,{element:x.jsx(xhe,{}),children:[e&&e.role==="pharmacy"?x.jsx(Ti,{path:"/",element:x.jsx(nhe,{})}):e&&e.role==="customer"?x.jsx(Ti,{path:"/",element:x.jsx(HW,{})}):null,x.jsx(Ti,{path:"/vendor/:id",element:x.jsx(ghe,{})}),x.jsx(Ti,{path:"/product/:id",element:x.jsx(vhe,{})}),x.jsx(Ti,{path:"/messages",element:x.jsx(M0,{children:x.jsx(uY,{})})}),x.jsx(Ti,{path:"/cart",element:x.jsx(M0,{children:e&&e.role==="pharmacy"?x.jsx(D1,{to:"/"}):x.jsx(hY,{})})}),x.jsx(Ti,{path:"/orders",element:x.jsx(M0,{children:x.jsx(dY,{})})}),x.jsx(Ti,{path:"/profile",element:x.jsx(M0,{children:x.jsx(yhe,{})})})]}),x.jsx(Ti,{path:"*",element:x.jsx(D1,{to:"/",replace:!0})})]})}function _he(){return x.jsxs(AW,{children:[x.jsx(ihe,{}),x.jsx(whe,{})]})}VL.createRoot(document.getElementById("root")).render(x.jsx(BD,{children:x.jsx(_he,{})}));export{zn as _,bhe as c,s8 as g};
