function LD(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var W1e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function RC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var My={exports:{}},Qp={},By={exports:{}},sn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N8;function jD(){if(N8)return sn;N8=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function g(Q){return Q===null||typeof Q!="object"?null:(Q=p&&Q[p]||Q["@@iterator"],typeof Q=="function"?Q:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,y={};function k(Q,I,H){this.props=Q,this.context=I,this.refs=y,this.updater=H||m}k.prototype.isReactComponent={},k.prototype.setState=function(Q,I){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,I,"setState")},k.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function T(){}T.prototype=k.prototype;function O(Q,I,H){this.props=Q,this.context=I,this.refs=y,this.updater=H||m}var P=O.prototype=new T;P.constructor=O,w(P,k.prototype),P.isPureReactComponent=!0;var V=Array.isArray,Y=Object.prototype.hasOwnProperty,G={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function N(Q,I,H){var X,J={},ue=null,we=null;if(I!=null)for(X in I.ref!==void 0&&(we=I.ref),I.key!==void 0&&(ue=""+I.key),I)Y.call(I,X)&&!L.hasOwnProperty(X)&&(J[X]=I[X]);var fe=arguments.length-2;if(fe===1)J.children=H;else if(1<fe){for(var me=Array(fe),be=0;be<fe;be++)me[be]=arguments[be+2];J.children=me}if(Q&&Q.defaultProps)for(X in fe=Q.defaultProps,fe)J[X]===void 0&&(J[X]=fe[X]);return{$$typeof:t,type:Q,key:ue,ref:we,props:J,_owner:G.current}}function C(Q,I){return{$$typeof:t,type:Q.type,key:I,ref:Q.ref,props:Q.props,_owner:Q._owner}}function R(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===t}function A(Q){var I={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(H){return I[H]})}var F=/\/+/g;function B(Q,I){return typeof Q=="object"&&Q!==null&&Q.key!=null?A(""+Q.key):I.toString(36)}function te(Q,I,H,X,J){var ue=typeof Q;(ue==="undefined"||ue==="boolean")&&(Q=null);var we=!1;if(Q===null)we=!0;else switch(ue){case"string":case"number":we=!0;break;case"object":switch(Q.$$typeof){case t:case e:we=!0}}if(we)return we=Q,J=J(we),Q=X===""?"."+B(we,0):X,V(J)?(H="",Q!=null&&(H=Q.replace(F,"$&/")+"/"),te(J,I,H,"",function(be){return be})):J!=null&&(R(J)&&(J=C(J,H+(!J.key||we&&we.key===J.key?"":(""+J.key).replace(F,"$&/")+"/")+Q)),I.push(J)),1;if(we=0,X=X===""?".":X+":",V(Q))for(var fe=0;fe<Q.length;fe++){ue=Q[fe];var me=X+B(ue,fe);we+=te(ue,I,H,me,J)}else if(me=g(Q),typeof me=="function")for(Q=me.call(Q),fe=0;!(ue=Q.next()).done;)ue=ue.value,me=X+B(ue,fe++),we+=te(ue,I,H,me,J);else if(ue==="object")throw I=String(Q),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return we}function pe(Q,I,H){if(Q==null)return Q;var X=[],J=0;return te(Q,X,"","",function(ue){return I.call(H,ue,J++)}),X}function Ee(Q){if(Q._status===-1){var I=Q._result;I=I(),I.then(function(H){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=H)},function(H){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=H)}),Q._status===-1&&(Q._status=0,Q._result=I)}if(Q._status===1)return Q._result.default;throw Q._result}var ve={current:null},re={transition:null},W={ReactCurrentDispatcher:ve,ReactCurrentBatchConfig:re,ReactCurrentOwner:G};function ne(){throw Error("act(...) is not supported in production builds of React.")}return sn.Children={map:pe,forEach:function(Q,I,H){pe(Q,function(){I.apply(this,arguments)},H)},count:function(Q){var I=0;return pe(Q,function(){I++}),I},toArray:function(Q){return pe(Q,function(I){return I})||[]},only:function(Q){if(!R(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},sn.Component=k,sn.Fragment=r,sn.Profiler=i,sn.PureComponent=O,sn.StrictMode=n,sn.Suspense=l,sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,sn.act=ne,sn.cloneElement=function(Q,I,H){if(Q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Q+".");var X=w({},Q.props),J=Q.key,ue=Q.ref,we=Q._owner;if(I!=null){if(I.ref!==void 0&&(ue=I.ref,we=G.current),I.key!==void 0&&(J=""+I.key),Q.type&&Q.type.defaultProps)var fe=Q.type.defaultProps;for(me in I)Y.call(I,me)&&!L.hasOwnProperty(me)&&(X[me]=I[me]===void 0&&fe!==void 0?fe[me]:I[me])}var me=arguments.length-2;if(me===1)X.children=H;else if(1<me){fe=Array(me);for(var be=0;be<me;be++)fe[be]=arguments[be+2];X.children=fe}return{$$typeof:t,type:Q.type,key:J,ref:ue,props:X,_owner:we}},sn.createContext=function(Q){return Q={$$typeof:a,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Q.Provider={$$typeof:s,_context:Q},Q.Consumer=Q},sn.createElement=N,sn.createFactory=function(Q){var I=N.bind(null,Q);return I.type=Q,I},sn.createRef=function(){return{current:null}},sn.forwardRef=function(Q){return{$$typeof:o,render:Q}},sn.isValidElement=R,sn.lazy=function(Q){return{$$typeof:d,_payload:{_status:-1,_result:Q},_init:Ee}},sn.memo=function(Q,I){return{$$typeof:c,type:Q,compare:I===void 0?null:I}},sn.startTransition=function(Q){var I=re.transition;re.transition={};try{Q()}finally{re.transition=I}},sn.unstable_act=ne,sn.useCallback=function(Q,I){return ve.current.useCallback(Q,I)},sn.useContext=function(Q){return ve.current.useContext(Q)},sn.useDebugValue=function(){},sn.useDeferredValue=function(Q){return ve.current.useDeferredValue(Q)},sn.useEffect=function(Q,I){return ve.current.useEffect(Q,I)},sn.useId=function(){return ve.current.useId()},sn.useImperativeHandle=function(Q,I,H){return ve.current.useImperativeHandle(Q,I,H)},sn.useInsertionEffect=function(Q,I){return ve.current.useInsertionEffect(Q,I)},sn.useLayoutEffect=function(Q,I){return ve.current.useLayoutEffect(Q,I)},sn.useMemo=function(Q,I){return ve.current.useMemo(Q,I)},sn.useReducer=function(Q,I,H){return ve.current.useReducer(Q,I,H)},sn.useRef=function(Q){return ve.current.useRef(Q)},sn.useState=function(Q){return ve.current.useState(Q)},sn.useSyncExternalStore=function(Q,I,H){return ve.current.useSyncExternalStore(Q,I,H)},sn.useTransition=function(){return ve.current.useTransition()},sn.version="18.3.1",sn}var A8;function Qv(){return A8||(A8=1,By.exports=jD()),By.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I8;function DD(){if(I8)return Qp;I8=1;var t=Qv(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,c){var d,p={},g=null,m=null;c!==void 0&&(g=""+c),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(m=l.ref);for(d in l)n.call(l,d)&&!s.hasOwnProperty(d)&&(p[d]=l[d]);if(o&&o.defaultProps)for(d in l=o.defaultProps,l)p[d]===void 0&&(p[d]=l[d]);return{$$typeof:e,type:o,key:g,ref:m,props:p,_owner:i.current}}return Qp.Fragment=r,Qp.jsx=a,Qp.jsxs=a,Qp}var P8;function OD(){return P8||(P8=1,My.exports=DD()),My.exports}var f=OD(),M=Qv();const di=RC(M),Qx=LD({__proto__:null,default:di},[M]);var z2={},Vy={exports:{}},Bo={},Uy={exports:{}},zy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R8;function MD(){return R8||(R8=1,(function(t){function e(re,W){var ne=re.length;re.push(W);e:for(;0<ne;){var Q=ne-1>>>1,I=re[Q];if(0<i(I,W))re[Q]=W,re[ne]=I,ne=Q;else break e}}function r(re){return re.length===0?null:re[0]}function n(re){if(re.length===0)return null;var W=re[0],ne=re.pop();if(ne!==W){re[0]=ne;e:for(var Q=0,I=re.length,H=I>>>1;Q<H;){var X=2*(Q+1)-1,J=re[X],ue=X+1,we=re[ue];if(0>i(J,ne))ue<I&&0>i(we,J)?(re[Q]=we,re[ue]=ne,Q=ue):(re[Q]=J,re[X]=ne,Q=X);else if(ue<I&&0>i(we,ne))re[Q]=we,re[ue]=ne,Q=ue;else break e}}return W}function i(re,W){var ne=re.sortIndex-W.sortIndex;return ne!==0?ne:re.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,p=null,g=3,m=!1,w=!1,y=!1,k=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(re){for(var W=r(c);W!==null;){if(W.callback===null)n(c);else if(W.startTime<=re)n(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=r(c)}}function V(re){if(y=!1,P(re),!w)if(r(l)!==null)w=!0,Ee(Y);else{var W=r(c);W!==null&&ve(V,W.startTime-re)}}function Y(re,W){w=!1,y&&(y=!1,T(N),N=-1),m=!0;var ne=g;try{for(P(W),p=r(l);p!==null&&(!(p.expirationTime>W)||re&&!A());){var Q=p.callback;if(typeof Q=="function"){p.callback=null,g=p.priorityLevel;var I=Q(p.expirationTime<=W);W=t.unstable_now(),typeof I=="function"?p.callback=I:p===r(l)&&n(l),P(W)}else n(l);p=r(l)}if(p!==null)var H=!0;else{var X=r(c);X!==null&&ve(V,X.startTime-W),H=!1}return H}finally{p=null,g=ne,m=!1}}var G=!1,L=null,N=-1,C=5,R=-1;function A(){return!(t.unstable_now()-R<C)}function F(){if(L!==null){var re=t.unstable_now();R=re;var W=!0;try{W=L(!0,re)}finally{W?B():(G=!1,L=null)}}else G=!1}var B;if(typeof O=="function")B=function(){O(F)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,pe=te.port2;te.port1.onmessage=F,B=function(){pe.postMessage(null)}}else B=function(){k(F,0)};function Ee(re){L=re,G||(G=!0,B())}function ve(re,W){N=k(function(){re(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(re){re.callback=null},t.unstable_continueExecution=function(){w||m||(w=!0,Ee(Y))},t.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<re?Math.floor(1e3/re):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(re){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var ne=g;g=W;try{return re()}finally{g=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(re,W){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ne=g;g=re;try{return W()}finally{g=ne}},t.unstable_scheduleCallback=function(re,W,ne){var Q=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?Q+ne:Q):ne=Q,re){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ne+I,re={id:d++,callback:W,priorityLevel:re,startTime:ne,expirationTime:I,sortIndex:-1},ne>Q?(re.sortIndex=ne,e(c,re),r(l)===null&&re===r(c)&&(y?(T(N),N=-1):y=!0,ve(V,ne-Q))):(re.sortIndex=I,e(l,re),w||m||(w=!0,Ee(Y))),re},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(re){var W=g;return function(){var ne=g;g=W;try{return re.apply(this,arguments)}finally{g=ne}}}})(zy)),zy}var F8;function BD(){return F8||(F8=1,Uy.exports=MD()),Uy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L8;function VD(){if(L8)return Bo;L8=1;var t=Qv(),e=BD();function r(u){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+u,x=1;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(u,h){a(u,h),a(u+"Capture",h)}function a(u,h){for(i[u]=h,u=0;u<h.length;u++)n.add(h[u])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function g(u){return l.call(p,u)?!0:l.call(d,u)?!1:c.test(u)?p[u]=!0:(d[u]=!0,!1)}function m(u,h,x,E){if(x!==null&&x.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return E?!1:x!==null?!x.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function w(u,h,x,E){if(h===null||typeof h>"u"||m(u,h,x,E))return!0;if(E)return!1;if(x!==null)switch(x.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function y(u,h,x,E,j,q,ce){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=E,this.attributeNamespace=j,this.mustUseProperty=x,this.propertyName=u,this.type=h,this.sanitizeURL=q,this.removeEmptyString=ce}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){k[u]=new y(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var h=u[0];k[h]=new y(h,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){k[u]=new y(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){k[u]=new y(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){k[u]=new y(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){k[u]=new y(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){k[u]=new y(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){k[u]=new y(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){k[u]=new y(u,5,!1,u.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function O(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var h=u.replace(T,O);k[h]=new y(h,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var h=u.replace(T,O);k[h]=new y(h,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var h=u.replace(T,O);k[h]=new y(h,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){k[u]=new y(u,1,!1,u.toLowerCase(),null,!1,!1)}),k.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){k[u]=new y(u,1,!1,u.toLowerCase(),null,!0,!0)});function P(u,h,x,E){var j=k.hasOwnProperty(h)?k[h]:null;(j!==null?j.type!==0:E||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(w(h,x,j,E)&&(x=null),E||j===null?g(h)&&(x===null?u.removeAttribute(h):u.setAttribute(h,""+x)):j.mustUseProperty?u[j.propertyName]=x===null?j.type===3?!1:"":x:(h=j.attributeName,E=j.attributeNamespace,x===null?u.removeAttribute(h):(j=j.type,x=j===3||j===4&&x===!0?"":""+x,E?u.setAttributeNS(E,h,x):u.setAttribute(h,x))))}var V=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),G=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),A=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),Ee=Symbol.for("react.lazy"),ve=Symbol.for("react.offscreen"),re=Symbol.iterator;function W(u){return u===null||typeof u!="object"?null:(u=re&&u[re]||u["@@iterator"],typeof u=="function"?u:null)}var ne=Object.assign,Q;function I(u){if(Q===void 0)try{throw Error()}catch(x){var h=x.stack.trim().match(/\n( *(at )?)/);Q=h&&h[1]||""}return`
`+Q+u}var H=!1;function X(u,h){if(!u||H)return"";H=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(ct){var E=ct}Reflect.construct(u,[],h)}else{try{h.call()}catch(ct){E=ct}u.call(h.prototype)}else{try{throw Error()}catch(ct){E=ct}u()}}catch(ct){if(ct&&E&&typeof ct.stack=="string"){for(var j=ct.stack.split(`
`),q=E.stack.split(`
`),ce=j.length-1,Fe=q.length-1;1<=ce&&0<=Fe&&j[ce]!==q[Fe];)Fe--;for(;1<=ce&&0<=Fe;ce--,Fe--)if(j[ce]!==q[Fe]){if(ce!==1||Fe!==1)do if(ce--,Fe--,0>Fe||j[ce]!==q[Fe]){var Me=`
`+j[ce].replace(" at new "," at ");return u.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",u.displayName)),Me}while(1<=ce&&0<=Fe);break}}}finally{H=!1,Error.prepareStackTrace=x}return(u=u?u.displayName||u.name:"")?I(u):""}function J(u){switch(u.tag){case 5:return I(u.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return u=X(u.type,!1),u;case 11:return u=X(u.type.render,!1),u;case 1:return u=X(u.type,!0),u;default:return""}}function ue(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case L:return"Fragment";case G:return"Portal";case C:return"Profiler";case N:return"StrictMode";case B:return"Suspense";case te:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case A:return(u.displayName||"Context")+".Consumer";case R:return(u._context.displayName||"Context")+".Provider";case F:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case pe:return h=u.displayName||null,h!==null?h:ue(u.type)||"Memo";case Ee:h=u._payload,u=u._init;try{return ue(u(h))}catch{}}return null}function we(u){var h=u.type;switch(u.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=h.render,u=u.displayName||u.name||"",h.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(h);case 8:return h===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function fe(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function me(u){var h=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function be(u){var h=me(u)?"checked":"value",x=Object.getOwnPropertyDescriptor(u.constructor.prototype,h),E=""+u[h];if(!u.hasOwnProperty(h)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var j=x.get,q=x.set;return Object.defineProperty(u,h,{configurable:!0,get:function(){return j.call(this)},set:function(ce){E=""+ce,q.call(this,ce)}}),Object.defineProperty(u,h,{enumerable:x.enumerable}),{getValue:function(){return E},setValue:function(ce){E=""+ce},stopTracking:function(){u._valueTracker=null,delete u[h]}}}}function Le(u){u._valueTracker||(u._valueTracker=be(u))}function ee(u){if(!u)return!1;var h=u._valueTracker;if(!h)return!0;var x=h.getValue(),E="";return u&&(E=me(u)?u.checked?"true":"false":u.value),u=E,u!==x?(h.setValue(u),!0):!1}function Be(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function Re(u,h){var x=h.checked;return ne({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??u._wrapperState.initialChecked})}function ae(u,h){var x=h.defaultValue==null?"":h.defaultValue,E=h.checked!=null?h.checked:h.defaultChecked;x=fe(h.value!=null?h.value:x),u._wrapperState={initialChecked:E,initialValue:x,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function $e(u,h){h=h.checked,h!=null&&P(u,"checked",h,!1)}function qe(u,h){$e(u,h);var x=fe(h.value),E=h.type;if(x!=null)E==="number"?(x===0&&u.value===""||u.value!=x)&&(u.value=""+x):u.value!==""+x&&(u.value=""+x);else if(E==="submit"||E==="reset"){u.removeAttribute("value");return}h.hasOwnProperty("value")?oe(u,h.type,x):h.hasOwnProperty("defaultValue")&&oe(u,h.type,fe(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(u.defaultChecked=!!h.defaultChecked)}function it(u,h,x){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var E=h.type;if(!(E!=="submit"&&E!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+u._wrapperState.initialValue,x||h===u.value||(u.value=h),u.defaultValue=h}x=u.name,x!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,x!==""&&(u.name=x)}function oe(u,h,x){(h!=="number"||Be(u.ownerDocument)!==u)&&(x==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+x&&(u.defaultValue=""+x))}var je=Array.isArray;function Ge(u,h,x,E){if(u=u.options,h){h={};for(var j=0;j<x.length;j++)h["$"+x[j]]=!0;for(x=0;x<u.length;x++)j=h.hasOwnProperty("$"+u[x].value),u[x].selected!==j&&(u[x].selected=j),j&&E&&(u[x].defaultSelected=!0)}else{for(x=""+fe(x),h=null,j=0;j<u.length;j++){if(u[j].value===x){u[j].selected=!0,E&&(u[j].defaultSelected=!0);return}h!==null||u[j].disabled||(h=u[j])}h!==null&&(h.selected=!0)}}function Tt(u,h){if(h.dangerouslySetInnerHTML!=null)throw Error(r(91));return ne({},h,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function Pe(u,h){var x=h.value;if(x==null){if(x=h.children,h=h.defaultValue,x!=null){if(h!=null)throw Error(r(92));if(je(x)){if(1<x.length)throw Error(r(93));x=x[0]}h=x}h==null&&(h=""),x=h}u._wrapperState={initialValue:fe(x)}}function Ke(u,h){var x=fe(h.value),E=fe(h.defaultValue);x!=null&&(x=""+x,x!==u.value&&(u.value=x),h.defaultValue==null&&u.defaultValue!==x&&(u.defaultValue=x)),E!=null&&(u.defaultValue=""+E)}function ot(u){var h=u.textContent;h===u._wrapperState.initialValue&&h!==""&&h!==null&&(u.value=h)}function We(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lt(u,h){return u==null||u==="http://www.w3.org/1999/xhtml"?We(h):u==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var St,Pt=(function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,x,E,j){MSApp.execUnsafeLocalFunction(function(){return u(h,x,E,j)})}:u})(function(u,h){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=h;else{for(St=St||document.createElement("div"),St.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=St.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;h.firstChild;)u.appendChild(h.firstChild)}});function mt(u,h){if(h){var x=u.firstChild;if(x&&x===u.lastChild&&x.nodeType===3){x.nodeValue=h;return}}u.textContent=h}var _t={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xt=["Webkit","ms","Moz","O"];Object.keys(_t).forEach(function(u){Xt.forEach(function(h){h=h+u.charAt(0).toUpperCase()+u.substring(1),_t[h]=_t[u]})});function Kt(u,h,x){return h==null||typeof h=="boolean"||h===""?"":x||typeof h!="number"||h===0||_t.hasOwnProperty(u)&&_t[u]?(""+h).trim():h+"px"}function Ut(u,h){u=u.style;for(var x in h)if(h.hasOwnProperty(x)){var E=x.indexOf("--")===0,j=Kt(x,h[x],E);x==="float"&&(x="cssFloat"),E?u.setProperty(x,j):u[x]=j}}var xr=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yr(u,h){if(h){if(xr[u]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(r(137,u));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(r(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(r(61))}if(h.style!=null&&typeof h.style!="object")throw Error(r(62))}}function Ve(u,h){if(u.indexOf("-")===-1)return typeof h.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bt=null;function zt(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var nr=null,lr=null,hr=null;function Zt(u){if(u=Pd(u)){if(typeof nr!="function")throw Error(r(280));var h=u.stateNode;h&&(h=Z0(h),nr(u.stateNode,u.type,h))}}function yr(u){lr?hr?hr.push(u):hr=[u]:lr=u}function dn(){if(lr){var u=lr,h=hr;if(hr=lr=null,Zt(u),h)for(u=0;u<h.length;u++)Zt(h[u])}}function qr(u,h){return u(h)}function Ln(){}var jn=!1;function sr(u,h,x){if(jn)return u(h,x);jn=!0;try{return qr(u,h,x)}finally{jn=!1,(lr!==null||hr!==null)&&(Ln(),dn())}}function Gr(u,h){var x=u.stateNode;if(x===null)return null;var E=Z0(x);if(E===null)return null;x=E[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(u=u.type,E=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!E;break e;default:u=!1}if(u)return null;if(x&&typeof x!="function")throw Error(r(231,h,typeof x));return x}var ds=!1;if(o)try{var Un={};Object.defineProperty(Un,"passive",{get:function(){ds=!0}}),window.addEventListener("test",Un,Un),window.removeEventListener("test",Un,Un)}catch{ds=!1}function Xi(u,h,x,E,j,q,ce,Fe,Me){var ct=Array.prototype.slice.call(arguments,3);try{h.apply(x,ct)}catch(Rt){this.onError(Rt)}}var Cn=!1,ai=null,le=!1,Ne=null,_e={onError:function(u){Cn=!0,ai=u}};function ke(u,h,x,E,j,q,ce,Fe,Me){Cn=!1,ai=null,Xi.apply(_e,arguments)}function Ae(u,h,x,E,j,q,ce,Fe,Me){if(ke.apply(this,arguments),Cn){if(Cn){var ct=ai;Cn=!1,ai=null}else throw Error(r(198));le||(le=!0,Ne=ct)}}function Ie(u){var h=u,x=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(x=h.return),u=h.return;while(u)}return h.tag===3?x:null}function Qe(u){if(u.tag===13){var h=u.memoizedState;if(h===null&&(u=u.alternate,u!==null&&(h=u.memoizedState)),h!==null)return h.dehydrated}return null}function lt(u){if(Ie(u)!==u)throw Error(r(188))}function et(u){var h=u.alternate;if(!h){if(h=Ie(u),h===null)throw Error(r(188));return h!==u?null:u}for(var x=u,E=h;;){var j=x.return;if(j===null)break;var q=j.alternate;if(q===null){if(E=j.return,E!==null){x=E;continue}break}if(j.child===q.child){for(q=j.child;q;){if(q===x)return lt(j),u;if(q===E)return lt(j),h;q=q.sibling}throw Error(r(188))}if(x.return!==E.return)x=j,E=q;else{for(var ce=!1,Fe=j.child;Fe;){if(Fe===x){ce=!0,x=j,E=q;break}if(Fe===E){ce=!0,E=j,x=q;break}Fe=Fe.sibling}if(!ce){for(Fe=q.child;Fe;){if(Fe===x){ce=!0,x=q,E=j;break}if(Fe===E){ce=!0,E=q,x=j;break}Fe=Fe.sibling}if(!ce)throw Error(r(189))}}if(x.alternate!==E)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?u:h}function tt(u){return u=et(u),u!==null?st(u):null}function st(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var h=st(u);if(h!==null)return h;u=u.sibling}return null}var kt=e.unstable_scheduleCallback,Ot=e.unstable_cancelCallback,Wt=e.unstable_shouldYield,Dt=e.unstable_requestPaint,At=e.unstable_now,Er=e.unstable_getCurrentPriorityLevel,fn=e.unstable_ImmediatePriority,Mr=e.unstable_UserBlockingPriority,gn=e.unstable_NormalPriority,Da=e.unstable_LowPriority,Oa=e.unstable_IdlePriority,ra=null,fi=null;function Ko(u){if(fi&&typeof fi.onCommitFiberRoot=="function")try{fi.onCommitFiberRoot(ra,u,void 0,(u.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:bu,wu=Math.log,vi=Math.LN2;function bu(u){return u>>>=0,u===0?32:31-(wu(u)/vi|0)|0}var ec=64,Ma=4194304;function Ba(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Vs(u,h){var x=u.pendingLanes;if(x===0)return 0;var E=0,j=u.suspendedLanes,q=u.pingedLanes,ce=x&268435455;if(ce!==0){var Fe=ce&~j;Fe!==0?E=Ba(Fe):(q&=ce,q!==0&&(E=Ba(q)))}else ce=x&~j,ce!==0?E=Ba(ce):q!==0&&(E=Ba(q));if(E===0)return 0;if(h!==0&&h!==E&&(h&j)===0&&(j=E&-E,q=h&-h,j>=q||j===16&&(q&4194240)!==0))return h;if((E&4)!==0&&(E|=x&16),h=u.entangledLanes,h!==0)for(u=u.entanglements,h&=E;0<h;)x=31-Tn(h),j=1<<x,E|=u[x],h&=~j;return E}function tc(u,h){switch(u){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pn(u,h){for(var x=u.suspendedLanes,E=u.pingedLanes,j=u.expirationTimes,q=u.pendingLanes;0<q;){var ce=31-Tn(q),Fe=1<<ce,Me=j[ce];Me===-1?((Fe&x)===0||(Fe&E)!==0)&&(j[ce]=tc(Fe,h)):Me<=h&&(u.expiredLanes|=Fe),q&=~Fe}}function Us(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function rc(){var u=ec;return ec<<=1,(ec&4194240)===0&&(ec=64),u}function wl(u){for(var h=[],x=0;31>x;x++)h.push(u);return h}function bl(u,h,x){u.pendingLanes|=h,h!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,h=31-Tn(h),u[h]=x}function tn(u,h){var x=u.pendingLanes&~h;u.pendingLanes=h,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=h,u.mutableReadLanes&=h,u.entangledLanes&=h,h=u.entanglements;var E=u.eventTimes;for(u=u.expirationTimes;0<x;){var j=31-Tn(x),q=1<<j;h[j]=0,E[j]=-1,u[j]=-1,x&=~q}}function Xo(u,h){var x=u.entangledLanes|=h;for(u=u.entanglements;x;){var E=31-Tn(x),j=1<<E;j&h|u[E]&h&&(u[E]|=h),x&=~j}}var Kr=0;function ya(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var Pc,Rc,vd,yd,Fc,Yo=!1,zs=[],fs=null,$s=null,wa=null,kr=new Map,Va=new Map,Ao=[],$0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wd(u,h){switch(u){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":$s=null;break;case"mouseover":case"mouseout":wa=null;break;case"pointerover":case"pointerout":kr.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Va.delete(h.pointerId)}}function Ti(u,h,x,E,j,q){return u===null||u.nativeEvent!==q?(u={blockedOn:h,domEventName:x,eventSystemFlags:E,nativeEvent:q,targetContainers:[j]},h!==null&&(h=Pd(h),h!==null&&Rc(h)),u):(u.eventSystemFlags|=E,h=u.targetContainers,j!==null&&h.indexOf(j)===-1&&h.push(j),u)}function Qo(u,h,x,E,j){switch(h){case"focusin":return fs=Ti(fs,u,h,x,E,j),!0;case"dragenter":return $s=Ti($s,u,h,x,E,j),!0;case"mouseover":return wa=Ti(wa,u,h,x,E,j),!0;case"pointerover":var q=j.pointerId;return kr.set(q,Ti(kr.get(q)||null,u,h,x,E,j)),!0;case"gotpointercapture":return q=j.pointerId,Va.set(q,Ti(Va.get(q)||null,u,h,x,E,j)),!0}return!1}function bd(u){var h=Uc(u.target);if(h!==null){var x=Ie(h);if(x!==null){if(h=x.tag,h===13){if(h=Qe(x),h!==null){u.blockedOn=h,Fc(u.priority,function(){vd(x)});return}}else if(h===3&&x.stateNode.current.memoizedState.isDehydrated){u.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Jo(u){if(u.blockedOn!==null)return!1;for(var h=u.targetContainers;0<h.length;){var x=kl(u.domEventName,u.eventSystemFlags,h[0],u.nativeEvent);if(x===null){x=u.nativeEvent;var E=new x.constructor(x.type,x);Bt=E,x.target.dispatchEvent(E),Bt=null}else return h=Pd(x),h!==null&&Rc(h),u.blockedOn=x,!1;h.shift()}return!0}function Io(u,h,x){Jo(u)&&x.delete(h)}function Lc(){Yo=!1,fs!==null&&Jo(fs)&&(fs=null),$s!==null&&Jo($s)&&($s=null),wa!==null&&Jo(wa)&&(wa=null),kr.forEach(Io),Va.forEach(Io)}function Hs(u,h){u.blockedOn===h&&(u.blockedOn=null,Yo||(Yo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Lc)))}function na(u){function h(j){return Hs(j,u)}if(0<zs.length){Hs(zs[0],u);for(var x=1;x<zs.length;x++){var E=zs[x];E.blockedOn===u&&(E.blockedOn=null)}}for(fs!==null&&Hs(fs,u),$s!==null&&Hs($s,u),wa!==null&&Hs(wa,u),kr.forEach(h),Va.forEach(h),x=0;x<Ao.length;x++)E=Ao[x],E.blockedOn===u&&(E.blockedOn=null);for(;0<Ao.length&&(x=Ao[0],x.blockedOn===null);)bd(x),x.blockedOn===null&&Ao.shift()}var Ua=V.ReactCurrentBatchConfig,_l=!0;function Dn(u,h,x,E){var j=Kr,q=Ua.transition;Ua.transition=null;try{Kr=1,Zo(u,h,x,E)}finally{Kr=j,Ua.transition=q}}function _u(u,h,x,E){var j=Kr,q=Ua.transition;Ua.transition=null;try{Kr=4,Zo(u,h,x,E)}finally{Kr=j,Ua.transition=q}}function Zo(u,h,x,E){if(_l){var j=kl(u,h,x,E);if(j===null)Y0(u,h,E,vo,x),wd(u,E);else if(Qo(j,u,h,x,E))E.stopPropagation();else if(wd(u,E),h&4&&-1<$0.indexOf(u)){for(;j!==null;){var q=Pd(j);if(q!==null&&Pc(q),q=kl(u,h,x,E),q===null&&Y0(u,h,E,vo,x),q===j)break;j=q}j!==null&&E.stopPropagation()}else Y0(u,h,E,null,x)}}var vo=null;function kl(u,h,x,E){if(vo=null,u=zt(E),u=Uc(u),u!==null)if(h=Ie(u),h===null)u=null;else if(x=h.tag,x===13){if(u=Qe(h),u!==null)return u;u=null}else if(x===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;u=null}else h!==u&&(u=null);return vo=u,null}function El(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Er()){case fn:return 1;case Mr:return 4;case gn:case Da:return 16;case Oa:return 536870912;default:return 16}default:return 16}}var qs=null,Po=null,Ns=null;function nc(){if(Ns)return Ns;var u,h=Po,x=h.length,E,j="value"in qs?qs.value:qs.textContent,q=j.length;for(u=0;u<x&&h[u]===j[u];u++);var ce=x-u;for(E=1;E<=ce&&h[x-E]===j[q-E];E++);return Ns=j.slice(u,1<E?1-E:void 0)}function As(u){var h=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&h===13&&(u=13)):u=h,u===10&&(u=13),32<=u||u===13?u:0}function hs(){return!0}function D(){return!1}function ie(u){function h(x,E,j,q,ce){this._reactName=x,this._targetInst=j,this.type=E,this.nativeEvent=q,this.target=ce,this.currentTarget=null;for(var Fe in u)u.hasOwnProperty(Fe)&&(x=u[Fe],this[Fe]=x?x(q):q[Fe]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?hs:D,this.isPropagationStopped=D,this}return ne(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=hs)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=hs)},persist:function(){},isPersistent:hs}),h}var Ce={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},De=ie(Ce),He=ne({},Ce,{view:0,detail:0}),vt=ie(He),bt,Yt,er,br=ne({},He,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ba,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==er&&(er&&u.type==="mousemove"?(bt=u.screenX-er.screenX,Yt=u.screenY-er.screenY):Yt=bt=0,er=u),bt)},movementY:function(u){return"movementY"in u?u.movementY:Yt}}),Ir=ie(br),ln=ne({},br,{dataTransfer:0}),Jn=ie(ln),oi=ne({},He,{relatedTarget:0}),xn=ie(oi),Ni=ne({},Ce,{animationName:0,elapsedTime:0,pseudoElement:0}),On=ie(Ni),Yi=ne({},Ce,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),Ro=ie(Yi),el=ne({},Ce,{data:0}),ku=ie(el),ic={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},za={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jc(u){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(u):(u=za[u])?!!h[u]:!1}function ba(){return jc}var _=ne({},He,{key:function(u){if(u.key){var h=ic[u.key]||u.key;if(h!=="Unidentified")return h}return u.type==="keypress"?(u=As(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Mi[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ba,charCode:function(u){return u.type==="keypress"?As(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?As(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),z=ie(_),Z=ne({},br,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xe=ie(Z),Xe=ne({},He,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ba}),dt=ie(Xe),Ft=ne({},Ce,{propertyName:0,elapsedTime:0,pseudoElement:0}),vn=ie(Ft),hi=ne({},br,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),Qr=ie(hi),rn=[9,13,27,32],wn=o&&"CompositionEvent"in window,ia=null;o&&"documentMode"in document&&(ia=document.documentMode);var Ws=o&&"TextEvent"in window&&!ia,$a=o&&(!wn||ia&&8<ia&&11>=ia),tl=" ",_a=!1;function ka(u,h){switch(u){case"keyup":return rn.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dc(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Ea=!1;function Oc(u,h){switch(u){case"compositionend":return Dc(h);case"keypress":return h.which!==32?null:(_a=!0,tl);case"textInput":return u=h.data,u===tl&&_a?null:u;default:return null}}function H0(u,h){if(Ea)return u==="compositionend"||!wn&&ka(u,h)?(u=nc(),Ns=Po=qs=null,Ea=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return $a&&h.locale!=="ko"?null:h.data;default:return null}}var Mc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ai(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h==="input"?!!Mc[u.type]:h==="textarea"}function bh(u,h,x,E){yr(E),h=Th(h,"onChange"),0<h.length&&(x=new De("onChange","change",null,x,E),u.push({event:x,listeners:h}))}var Ha=null,qa=null;function _d(u){K0(u,0)}function Bc(u){var h=Pu(u);if(ee(h))return u}function kd(u,h){if(u==="change")return h}var Eu=!1;if(o){var sc;if(o){var ac="oninput"in document;if(!ac){var Sl=document.createElement("div");Sl.setAttribute("oninput","return;"),ac=typeof Sl.oninput=="function"}sc=ac}else sc=!1;Eu=sc&&(!document.documentMode||9<document.documentMode)}function Ed(){Ha&&(Ha.detachEvent("onpropertychange",Wa),qa=Ha=null)}function Wa(u){if(u.propertyName==="value"&&Bc(qa)){var h=[];bh(h,qa,u,zt(u)),sr(_d,h)}}function Cl(u,h,x){u==="focusin"?(Ed(),Ha=h,qa=x,Ha.attachEvent("onpropertychange",Wa)):u==="focusout"&&Ed()}function Zn(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Bc(qa)}function ei(u,h){if(u==="click")return Bc(h)}function Bi(u,h){if(u==="input"||u==="change")return Bc(h)}function Vi(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var ps=typeof Object.is=="function"?Object.is:Vi;function Tl(u,h){if(ps(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var x=Object.keys(u),E=Object.keys(h);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var j=x[E];if(!l.call(h,j)||!ps(u[j],h[j]))return!1}return!0}function rl(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function Sd(u,h){var x=rl(u);u=0;for(var E;x;){if(x.nodeType===3){if(E=u+x.textContent.length,u<=h&&E>=h)return{node:x,offset:h-u};u=E}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=rl(x)}}function Sp(u,h){return u&&h?u===h?!0:u&&u.nodeType===3?!1:h&&h.nodeType===3?Sp(u,h.parentNode):"contains"in u?u.contains(h):u.compareDocumentPosition?!!(u.compareDocumentPosition(h)&16):!1:!1}function Cp(){for(var u=window,h=Be();h instanceof u.HTMLIFrameElement;){try{var x=typeof h.contentWindow.location.href=="string"}catch{x=!1}if(x)u=h.contentWindow;else break;h=Be(u.document)}return h}function _h(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h&&(h==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||h==="textarea"||u.contentEditable==="true")}function a2(u){var h=Cp(),x=u.focusedElem,E=u.selectionRange;if(h!==x&&x&&x.ownerDocument&&Sp(x.ownerDocument.documentElement,x)){if(E!==null&&_h(x)){if(h=E.start,u=E.end,u===void 0&&(u=h),"selectionStart"in x)x.selectionStart=h,x.selectionEnd=Math.min(u,x.value.length);else if(u=(h=x.ownerDocument||document)&&h.defaultView||window,u.getSelection){u=u.getSelection();var j=x.textContent.length,q=Math.min(E.start,j);E=E.end===void 0?q:Math.min(E.end,j),!u.extend&&q>E&&(j=E,E=q,q=j),j=Sd(x,q);var ce=Sd(x,E);j&&ce&&(u.rangeCount!==1||u.anchorNode!==j.node||u.anchorOffset!==j.offset||u.focusNode!==ce.node||u.focusOffset!==ce.offset)&&(h=h.createRange(),h.setStart(j.node,j.offset),u.removeAllRanges(),q>E?(u.addRange(h),u.extend(ce.node,ce.offset)):(h.setEnd(ce.node,ce.offset),u.addRange(h)))}}for(h=[],u=x;u=u.parentNode;)u.nodeType===1&&h.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<h.length;x++)u=h[x],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var o2=o&&"documentMode"in document&&11>=document.documentMode,Su=null,kh=null,Cd=null,Eh=!1;function Tp(u,h,x){var E=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Eh||Su==null||Su!==Be(E)||(E=Su,"selectionStart"in E&&_h(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Cd&&Tl(Cd,E)||(Cd=E,E=Th(kh,"onSelect"),0<E.length&&(h=new De("onSelect","select",null,h,x),u.push({event:h,listeners:E}),h.target=Su)))}function q0(u,h){var x={};return x[u.toLowerCase()]=h.toLowerCase(),x["Webkit"+u]="webkit"+h,x["Moz"+u]="moz"+h,x}var Cu={animationend:q0("Animation","AnimationEnd"),animationiteration:q0("Animation","AnimationIteration"),animationstart:q0("Animation","AnimationStart"),transitionend:q0("Transition","TransitionEnd")},Tu={},Np={};o&&(Np=document.createElement("div").style,"AnimationEvent"in window||(delete Cu.animationend.animation,delete Cu.animationiteration.animation,delete Cu.animationstart.animation),"TransitionEvent"in window||delete Cu.transitionend.transition);function W0(u){if(Tu[u])return Tu[u];if(!Cu[u])return u;var h=Cu[u],x;for(x in h)if(h.hasOwnProperty(x)&&x in Np)return Tu[u]=h[x];return u}var Ap=W0("animationend"),Ip=W0("animationiteration"),Pp=W0("animationstart"),Rp=W0("transitionend"),Fp=new Map,Lp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nl(u,h){Fp.set(u,h),s(h,[u])}for(var Td=0;Td<Lp.length;Td++){var Sa=Lp[Td],Fo=Sa.toLowerCase(),Sh=Sa[0].toUpperCase()+Sa.slice(1);Nl(Fo,"on"+Sh)}Nl(Ap,"onAnimationEnd"),Nl(Ip,"onAnimationIteration"),Nl(Pp,"onAnimationStart"),Nl("dblclick","onDoubleClick"),Nl("focusin","onFocus"),Nl("focusout","onBlur"),Nl(Rp,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vc));function G0(u,h,x){var E=u.type||"unknown-event";u.currentTarget=x,Ae(E,h,void 0,u),u.currentTarget=null}function K0(u,h){h=(h&4)!==0;for(var x=0;x<u.length;x++){var E=u[x],j=E.event;E=E.listeners;e:{var q=void 0;if(h)for(var ce=E.length-1;0<=ce;ce--){var Fe=E[ce],Me=Fe.instance,ct=Fe.currentTarget;if(Fe=Fe.listener,Me!==q&&j.isPropagationStopped())break e;G0(j,Fe,ct),q=Me}else for(ce=0;ce<E.length;ce++){if(Fe=E[ce],Me=Fe.instance,ct=Fe.currentTarget,Fe=Fe.listener,Me!==q&&j.isPropagationStopped())break e;G0(j,Fe,ct),q=Me}}}if(le)throw u=Ne,le=!1,Ne=null,u}function zn(u,h){var x=h[Ka];x===void 0&&(x=h[Ka]=new Set);var E=u+"__bubble";x.has(E)||(X0(h,u,2,!1),x.add(E))}function Ch(u,h,x){var E=0;h&&(E|=4),X0(x,u,E,h)}var Nd="_reactListening"+Math.random().toString(36).slice(2);function Nu(u){if(!u[Nd]){u[Nd]=!0,n.forEach(function(x){x!=="selectionchange"&&(l2.has(x)||Ch(x,!1,u),Ch(x,!0,u))});var h=u.nodeType===9?u:u.ownerDocument;h===null||h[Nd]||(h[Nd]=!0,Ch("selectionchange",!1,h))}}function X0(u,h,x,E){switch(El(h)){case 1:var j=Dn;break;case 4:j=_u;break;default:j=Zo}x=j.bind(null,h,x,u),j=void 0,!ds||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(j=!0),E?j!==void 0?u.addEventListener(h,x,{capture:!0,passive:j}):u.addEventListener(h,x,!0):j!==void 0?u.addEventListener(h,x,{passive:j}):u.addEventListener(h,x,!1)}function Y0(u,h,x,E,j){var q=E;if((h&1)===0&&(h&2)===0&&E!==null)e:for(;;){if(E===null)return;var ce=E.tag;if(ce===3||ce===4){var Fe=E.stateNode.containerInfo;if(Fe===j||Fe.nodeType===8&&Fe.parentNode===j)break;if(ce===4)for(ce=E.return;ce!==null;){var Me=ce.tag;if((Me===3||Me===4)&&(Me=ce.stateNode.containerInfo,Me===j||Me.nodeType===8&&Me.parentNode===j))return;ce=ce.return}for(;Fe!==null;){if(ce=Uc(Fe),ce===null)return;if(Me=ce.tag,Me===5||Me===6){E=q=ce;continue e}Fe=Fe.parentNode}}E=E.return}sr(function(){var ct=q,Rt=zt(x),jt=[];e:{var It=Fp.get(u);if(It!==void 0){var Qt=De,cr=u;switch(u){case"keypress":if(As(x)===0)break e;case"keydown":case"keyup":Qt=z;break;case"focusin":cr="focus",Qt=xn;break;case"focusout":cr="blur",Qt=xn;break;case"beforeblur":case"afterblur":Qt=xn;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qt=Ir;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qt=Jn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qt=dt;break;case Ap:case Ip:case Pp:Qt=On;break;case Rp:Qt=vn;break;case"scroll":Qt=vt;break;case"wheel":Qt=Qr;break;case"copy":case"cut":case"paste":Qt=Ro;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qt=xe}var pr=(h&4)!==0,xs=!pr&&u==="scroll",rt=pr?It!==null?It+"Capture":null:It;pr=[];for(var ze=ct,at;ze!==null;){at=ze;var Mt=at.stateNode;if(at.tag===5&&Mt!==null&&(at=Mt,rt!==null&&(Mt=Gr(ze,rt),Mt!=null&&pr.push(Q0(ze,Mt,at)))),xs)break;ze=ze.return}0<pr.length&&(It=new Qt(It,cr,null,x,Rt),jt.push({event:It,listeners:pr}))}}if((h&7)===0){e:{if(It=u==="mouseover"||u==="pointerover",Qt=u==="mouseout"||u==="pointerout",It&&x!==Bt&&(cr=x.relatedTarget||x.fromElement)&&(Uc(cr)||cr[sa]))break e;if((Qt||It)&&(It=Rt.window===Rt?Rt:(It=Rt.ownerDocument)?It.defaultView||It.parentWindow:window,Qt?(cr=x.relatedTarget||x.toElement,Qt=ct,cr=cr?Uc(cr):null,cr!==null&&(xs=Ie(cr),cr!==xs||cr.tag!==5&&cr.tag!==6)&&(cr=null)):(Qt=null,cr=ct),Qt!==cr)){if(pr=Ir,Mt="onMouseLeave",rt="onMouseEnter",ze="mouse",(u==="pointerout"||u==="pointerover")&&(pr=xe,Mt="onPointerLeave",rt="onPointerEnter",ze="pointer"),xs=Qt==null?It:Pu(Qt),at=cr==null?It:Pu(cr),It=new pr(Mt,ze+"leave",Qt,x,Rt),It.target=xs,It.relatedTarget=at,Mt=null,Uc(Rt)===ct&&(pr=new pr(rt,ze+"enter",cr,x,Rt),pr.target=at,pr.relatedTarget=xs,Mt=pr),xs=Mt,Qt&&cr)t:{for(pr=Qt,rt=cr,ze=0,at=pr;at;at=Au(at))ze++;for(at=0,Mt=rt;Mt;Mt=Au(Mt))at++;for(;0<ze-at;)pr=Au(pr),ze--;for(;0<at-ze;)rt=Au(rt),at--;for(;ze--;){if(pr===rt||rt!==null&&pr===rt.alternate)break t;pr=Au(pr),rt=Au(rt)}pr=null}else pr=null;Qt!==null&&c2(jt,It,Qt,pr,!1),cr!==null&&xs!==null&&c2(jt,xs,cr,pr,!0)}}e:{if(It=ct?Pu(ct):window,Qt=It.nodeName&&It.nodeName.toLowerCase(),Qt==="select"||Qt==="input"&&It.type==="file")var gr=kd;else if(Ai(It))if(Eu)gr=Bi;else{gr=Zn;var Sr=Cl}else(Qt=It.nodeName)&&Qt.toLowerCase()==="input"&&(It.type==="checkbox"||It.type==="radio")&&(gr=ei);if(gr&&(gr=gr(u,ct))){bh(jt,gr,x,Rt);break e}Sr&&Sr(u,It,ct),u==="focusout"&&(Sr=It._wrapperState)&&Sr.controlled&&It.type==="number"&&oe(It,"number",It.value)}switch(Sr=ct?Pu(ct):window,u){case"focusin":(Ai(Sr)||Sr.contentEditable==="true")&&(Su=Sr,kh=ct,Cd=null);break;case"focusout":Cd=kh=Su=null;break;case"mousedown":Eh=!0;break;case"contextmenu":case"mouseup":case"dragend":Eh=!1,Tp(jt,x,Rt);break;case"selectionchange":if(o2)break;case"keydown":case"keyup":Tp(jt,x,Rt)}var Cr;if(wn)e:{switch(u){case"compositionstart":var jr="onCompositionStart";break e;case"compositionend":jr="onCompositionEnd";break e;case"compositionupdate":jr="onCompositionUpdate";break e}jr=void 0}else Ea?ka(u,x)&&(jr="onCompositionEnd"):u==="keydown"&&x.keyCode===229&&(jr="onCompositionStart");jr&&($a&&x.locale!=="ko"&&(Ea||jr!=="onCompositionStart"?jr==="onCompositionEnd"&&Ea&&(Cr=nc()):(qs=Rt,Po="value"in qs?qs.value:qs.textContent,Ea=!0)),Sr=Th(ct,jr),0<Sr.length&&(jr=new ku(jr,u,null,x,Rt),jt.push({event:jr,listeners:Sr}),Cr?jr.data=Cr:(Cr=Dc(x),Cr!==null&&(jr.data=Cr)))),(Cr=Ws?Oc(u,x):H0(u,x))&&(ct=Th(ct,"onBeforeInput"),0<ct.length&&(Rt=new ku("onBeforeInput","beforeinput",null,x,Rt),jt.push({event:Rt,listeners:ct}),Rt.data=Cr))}K0(jt,h)})}function Q0(u,h,x){return{instance:u,listener:h,currentTarget:x}}function Th(u,h){for(var x=h+"Capture",E=[];u!==null;){var j=u,q=j.stateNode;j.tag===5&&q!==null&&(j=q,q=Gr(u,x),q!=null&&E.unshift(Q0(u,q,j)),q=Gr(u,h),q!=null&&E.push(Q0(u,q,j))),u=u.return}return E}function Au(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function c2(u,h,x,E,j){for(var q=h._reactName,ce=[];x!==null&&x!==E;){var Fe=x,Me=Fe.alternate,ct=Fe.stateNode;if(Me!==null&&Me===E)break;Fe.tag===5&&ct!==null&&(Fe=ct,j?(Me=Gr(x,q),Me!=null&&ce.unshift(Q0(x,Me,Fe))):j||(Me=Gr(x,q),Me!=null&&ce.push(Q0(x,Me,Fe)))),x=x.return}ce.length!==0&&u.push({event:h,listeners:ce})}var J5=/\r\n?/g,Z5=/\u0000|\uFFFD/g;function u2(u){return(typeof u=="string"?u:""+u).replace(J5,`
`).replace(Z5,"")}function Nh(u,h,x){if(h=u2(h),u2(u)!==h&&x)throw Error(r(425))}function Ad(){}var J0=null,Iu=null;function jp(u,h){return u==="textarea"||u==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Dp=typeof setTimeout=="function"?setTimeout:void 0,d2=typeof clearTimeout=="function"?clearTimeout:void 0,f2=typeof Promise=="function"?Promise:void 0,ey=typeof queueMicrotask=="function"?queueMicrotask:typeof f2<"u"?function(u){return f2.resolve(null).then(u).catch(ty)}:Dp;function ty(u){setTimeout(function(){throw u})}function Op(u,h){var x=h,E=0;do{var j=x.nextSibling;if(u.removeChild(x),j&&j.nodeType===8)if(x=j.data,x==="/$"){if(E===0){u.removeChild(j),na(h);return}E--}else x!=="$"&&x!=="$?"&&x!=="$!"||E++;x=j}while(x);na(h)}function Ca(u){for(;u!=null;u=u.nextSibling){var h=u.nodeType;if(h===1||h===3)break;if(h===8){if(h=u.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return u}function Lo(u){u=u.previousSibling;for(var h=0;u;){if(u.nodeType===8){var x=u.data;if(x==="$"||x==="$!"||x==="$?"){if(h===0)return u;h--}else x==="/$"&&h++}u=u.previousSibling}return null}var Ga=Math.random().toString(36).slice(2),Al="__reactFiber$"+Ga,Id="__reactProps$"+Ga,sa="__reactContainer$"+Ga,Ka="__reactEvents$"+Ga,ry="__reactListeners$"+Ga,ny="__reactHandles$"+Ga;function Uc(u){var h=u[Al];if(h)return h;for(var x=u.parentNode;x;){if(h=x[sa]||x[Al]){if(x=h.alternate,h.child!==null||x!==null&&x.child!==null)for(u=Lo(u);u!==null;){if(x=u[Al])return x;u=Lo(u)}return h}u=x,x=u.parentNode}return null}function Pd(u){return u=u[Al]||u[sa],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function Pu(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(r(33))}function Z0(u){return u[Id]||null}var Mp=[],oc=-1;function nl(u){return{current:u}}function Rn(u){0>oc||(u.current=Mp[oc],Mp[oc]=null,oc--)}function Mn(u,h){oc++,Mp[oc]=u.current,u.current=h}var zc={},Gs=nl(zc),Xa=nl(!1),Ru=zc;function Rd(u,h){var x=u.type.contextTypes;if(!x)return zc;var E=u.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===h)return E.__reactInternalMemoizedMaskedChildContext;var j={},q;for(q in x)j[q]=h[q];return E&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=h,u.__reactInternalMemoizedMaskedChildContext=j),j}function Ya(u){return u=u.childContextTypes,u!=null}function Ah(){Rn(Xa),Rn(Gs)}function h2(u,h,x){if(Gs.current!==zc)throw Error(r(168));Mn(Gs,h),Mn(Xa,x)}function Bp(u,h,x){var E=u.stateNode;if(h=h.childContextTypes,typeof E.getChildContext!="function")return x;E=E.getChildContext();for(var j in E)if(!(j in h))throw Error(r(108,we(u)||"Unknown",j));return ne({},x,E)}function Fu(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||zc,Ru=Gs.current,Mn(Gs,u),Mn(Xa,Xa.current),!0}function p2(u,h,x){var E=u.stateNode;if(!E)throw Error(r(169));x?(u=Bp(u,h,Ru),E.__reactInternalMemoizedMergedChildContext=u,Rn(Xa),Rn(Gs),Mn(Gs,u)):Rn(Xa),Mn(Xa,x)}var lc=null,ef=!1,b=!1;function S(u){lc===null?lc=[u]:lc.push(u)}function U(u){ef=!0,S(u)}function K(){if(!b&&lc!==null){b=!0;var u=0,h=Kr;try{var x=lc;for(Kr=1;u<x.length;u++){var E=x[u];do E=E(!0);while(E!==null)}lc=null,ef=!1}catch(j){throw lc!==null&&(lc=lc.slice(u+1)),kt(fn,K),j}finally{Kr=h,b=!1}}return null}var se=[],de=0,he=null,ge=0,ye=[],Se=0,Oe=null,Ze=1,Te="";function Ue(u,h){se[de++]=ge,se[de++]=he,he=u,ge=h}function Ye(u,h,x){ye[Se++]=Ze,ye[Se++]=Te,ye[Se++]=Oe,Oe=u;var E=Ze;u=Te;var j=32-Tn(E)-1;E&=~(1<<j),x+=1;var q=32-Tn(h)+j;if(30<q){var ce=j-j%5;q=(E&(1<<ce)-1).toString(32),E>>=ce,j-=ce,Ze=1<<32-Tn(h)+j|x<<j|E,Te=q+u}else Ze=1<<q|x<<j|E,Te=u}function pt(u){u.return!==null&&(Ue(u,1),Ye(u,1,0))}function nt(u){for(;u===he;)he=se[--de],se[de]=null,ge=se[--de],se[de]=null;for(;u===Oe;)Oe=ye[--Se],ye[Se]=null,Te=ye[--Se],ye[Se]=null,Ze=ye[--Se],ye[Se]=null}var ft=null,ht=null,yt=!1,wt=null;function mr(u,h){var x=Ll(5,null,null,0);x.elementType="DELETED",x.stateNode=h,x.return=u,h=u.deletions,h===null?(u.deletions=[x],u.flags|=16):h.push(x)}function tr(u,h){switch(u.tag){case 5:var x=u.type;return h=h.nodeType!==1||x.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(u.stateNode=h,ft=u,ht=Ca(h.firstChild),!0):!1;case 6:return h=u.pendingProps===""||h.nodeType!==3?null:h,h!==null?(u.stateNode=h,ft=u,ht=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(x=Oe!==null?{id:Ze,overflow:Te}:null,u.memoizedState={dehydrated:h,treeContext:x,retryLane:1073741824},x=Ll(18,null,null,0),x.stateNode=h,x.return=u,u.child=x,ft=u,ht=null,!0):!1;default:return!1}}function Br(u){return(u.mode&1)!==0&&(u.flags&128)===0}function ar(u){if(yt){var h=ht;if(h){var x=h;if(!tr(u,h)){if(Br(u))throw Error(r(418));h=Ca(x.nextSibling);var E=ft;h&&tr(u,h)?mr(E,x):(u.flags=u.flags&-4097|2,yt=!1,ft=u)}}else{if(Br(u))throw Error(r(418));u.flags=u.flags&-4097|2,yt=!1,ft=u}}}function nn(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;ft=u}function Ii(u){if(u!==ft)return!1;if(!yt)return nn(u),yt=!0,!1;var h;if((h=u.tag!==3)&&!(h=u.tag!==5)&&(h=u.type,h=h!=="head"&&h!=="body"&&!jp(u.type,u.memoizedProps)),h&&(h=ht)){if(Br(u))throw Vr(),Error(r(418));for(;h;)mr(u,h),h=Ca(h.nextSibling)}if(nn(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));e:{for(u=u.nextSibling,h=0;u;){if(u.nodeType===8){var x=u.data;if(x==="/$"){if(h===0){ht=Ca(u.nextSibling);break e}h--}else x!=="$"&&x!=="$!"&&x!=="$?"||h++}u=u.nextSibling}ht=null}}else ht=ft?Ca(u.stateNode.nextSibling):null;return!0}function Vr(){for(var u=ht;u;)u=Ca(u.nextSibling)}function rr(){ht=ft=null,yt=!1}function Ht(u){wt===null?wt=[u]:wt.push(u)}var Ui=V.ReactCurrentBatchConfig;function Pr(u,h,x){if(u=x.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(r(309));var E=x.stateNode}if(!E)throw Error(r(147,u));var j=E,q=""+u;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===q?h.ref:(h=function(ce){var Fe=j.refs;ce===null?delete Fe[q]:Fe[q]=ce},h._stringRef=q,h)}if(typeof u!="string")throw Error(r(284));if(!x._owner)throw Error(r(290,u))}return u}function Jr(u,h){throw u=Object.prototype.toString.call(h),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u))}function ti(u){var h=u._init;return h(u._payload)}function Is(u){function h(rt,ze){if(u){var at=rt.deletions;at===null?(rt.deletions=[ze],rt.flags|=16):at.push(ze)}}function x(rt,ze){if(!u)return null;for(;ze!==null;)h(rt,ze),ze=ze.sibling;return null}function E(rt,ze){for(rt=new Map;ze!==null;)ze.key!==null?rt.set(ze.key,ze):rt.set(ze.index,ze),ze=ze.sibling;return rt}function j(rt,ze){return rt=zd(rt,ze),rt.index=0,rt.sibling=null,rt}function q(rt,ze,at){return rt.index=at,u?(at=rt.alternate,at!==null?(at=at.index,at<ze?(rt.flags|=2,ze):at):(rt.flags|=2,ze)):(rt.flags|=1048576,ze)}function ce(rt){return u&&rt.alternate===null&&(rt.flags|=2),rt}function Fe(rt,ze,at,Mt){return ze===null||ze.tag!==6?(ze=Ry(at,rt.mode,Mt),ze.return=rt,ze):(ze=j(ze,at),ze.return=rt,ze)}function Me(rt,ze,at,Mt){var gr=at.type;return gr===L?Rt(rt,ze,at.props.children,Mt,at.key):ze!==null&&(ze.elementType===gr||typeof gr=="object"&&gr!==null&&gr.$$typeof===Ee&&ti(gr)===ze.type)?(Mt=j(ze,at.props),Mt.ref=Pr(rt,ze,at),Mt.return=rt,Mt):(Mt=L2(at.type,at.key,at.props,null,rt.mode,Mt),Mt.ref=Pr(rt,ze,at),Mt.return=rt,Mt)}function ct(rt,ze,at,Mt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==at.containerInfo||ze.stateNode.implementation!==at.implementation?(ze=Fy(at,rt.mode,Mt),ze.return=rt,ze):(ze=j(ze,at.children||[]),ze.return=rt,ze)}function Rt(rt,ze,at,Mt,gr){return ze===null||ze.tag!==7?(ze=cf(at,rt.mode,Mt,gr),ze.return=rt,ze):(ze=j(ze,at),ze.return=rt,ze)}function jt(rt,ze,at){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ze=Ry(""+ze,rt.mode,at),ze.return=rt,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case Y:return at=L2(ze.type,ze.key,ze.props,null,rt.mode,at),at.ref=Pr(rt,null,ze),at.return=rt,at;case G:return ze=Fy(ze,rt.mode,at),ze.return=rt,ze;case Ee:var Mt=ze._init;return jt(rt,Mt(ze._payload),at)}if(je(ze)||W(ze))return ze=cf(ze,rt.mode,at,null),ze.return=rt,ze;Jr(rt,ze)}return null}function It(rt,ze,at,Mt){var gr=ze!==null?ze.key:null;if(typeof at=="string"&&at!==""||typeof at=="number")return gr!==null?null:Fe(rt,ze,""+at,Mt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case Y:return at.key===gr?Me(rt,ze,at,Mt):null;case G:return at.key===gr?ct(rt,ze,at,Mt):null;case Ee:return gr=at._init,It(rt,ze,gr(at._payload),Mt)}if(je(at)||W(at))return gr!==null?null:Rt(rt,ze,at,Mt,null);Jr(rt,at)}return null}function Qt(rt,ze,at,Mt,gr){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number")return rt=rt.get(at)||null,Fe(ze,rt,""+Mt,gr);if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case Y:return rt=rt.get(Mt.key===null?at:Mt.key)||null,Me(ze,rt,Mt,gr);case G:return rt=rt.get(Mt.key===null?at:Mt.key)||null,ct(ze,rt,Mt,gr);case Ee:var Sr=Mt._init;return Qt(rt,ze,at,Sr(Mt._payload),gr)}if(je(Mt)||W(Mt))return rt=rt.get(at)||null,Rt(ze,rt,Mt,gr,null);Jr(ze,Mt)}return null}function cr(rt,ze,at,Mt){for(var gr=null,Sr=null,Cr=ze,jr=ze=0,ua=null;Cr!==null&&jr<at.length;jr++){Cr.index>jr?(ua=Cr,Cr=null):ua=Cr.sibling;var Nn=It(rt,Cr,at[jr],Mt);if(Nn===null){Cr===null&&(Cr=ua);break}u&&Cr&&Nn.alternate===null&&h(rt,Cr),ze=q(Nn,ze,jr),Sr===null?gr=Nn:Sr.sibling=Nn,Sr=Nn,Cr=ua}if(jr===at.length)return x(rt,Cr),yt&&Ue(rt,jr),gr;if(Cr===null){for(;jr<at.length;jr++)Cr=jt(rt,at[jr],Mt),Cr!==null&&(ze=q(Cr,ze,jr),Sr===null?gr=Cr:Sr.sibling=Cr,Sr=Cr);return yt&&Ue(rt,jr),gr}for(Cr=E(rt,Cr);jr<at.length;jr++)ua=Qt(Cr,rt,jr,at[jr],Mt),ua!==null&&(u&&ua.alternate!==null&&Cr.delete(ua.key===null?jr:ua.key),ze=q(ua,ze,jr),Sr===null?gr=ua:Sr.sibling=ua,Sr=ua);return u&&Cr.forEach(function($d){return h(rt,$d)}),yt&&Ue(rt,jr),gr}function pr(rt,ze,at,Mt){var gr=W(at);if(typeof gr!="function")throw Error(r(150));if(at=gr.call(at),at==null)throw Error(r(151));for(var Sr=gr=null,Cr=ze,jr=ze=0,ua=null,Nn=at.next();Cr!==null&&!Nn.done;jr++,Nn=at.next()){Cr.index>jr?(ua=Cr,Cr=null):ua=Cr.sibling;var $d=It(rt,Cr,Nn.value,Mt);if($d===null){Cr===null&&(Cr=ua);break}u&&Cr&&$d.alternate===null&&h(rt,Cr),ze=q($d,ze,jr),Sr===null?gr=$d:Sr.sibling=$d,Sr=$d,Cr=ua}if(Nn.done)return x(rt,Cr),yt&&Ue(rt,jr),gr;if(Cr===null){for(;!Nn.done;jr++,Nn=at.next())Nn=jt(rt,Nn.value,Mt),Nn!==null&&(ze=q(Nn,ze,jr),Sr===null?gr=Nn:Sr.sibling=Nn,Sr=Nn);return yt&&Ue(rt,jr),gr}for(Cr=E(rt,Cr);!Nn.done;jr++,Nn=at.next())Nn=Qt(Cr,rt,jr,Nn.value,Mt),Nn!==null&&(u&&Nn.alternate!==null&&Cr.delete(Nn.key===null?jr:Nn.key),ze=q(Nn,ze,jr),Sr===null?gr=Nn:Sr.sibling=Nn,Sr=Nn);return u&&Cr.forEach(function(FD){return h(rt,FD)}),yt&&Ue(rt,jr),gr}function xs(rt,ze,at,Mt){if(typeof at=="object"&&at!==null&&at.type===L&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case Y:e:{for(var gr=at.key,Sr=ze;Sr!==null;){if(Sr.key===gr){if(gr=at.type,gr===L){if(Sr.tag===7){x(rt,Sr.sibling),ze=j(Sr,at.props.children),ze.return=rt,rt=ze;break e}}else if(Sr.elementType===gr||typeof gr=="object"&&gr!==null&&gr.$$typeof===Ee&&ti(gr)===Sr.type){x(rt,Sr.sibling),ze=j(Sr,at.props),ze.ref=Pr(rt,Sr,at),ze.return=rt,rt=ze;break e}x(rt,Sr);break}else h(rt,Sr);Sr=Sr.sibling}at.type===L?(ze=cf(at.props.children,rt.mode,Mt,at.key),ze.return=rt,rt=ze):(Mt=L2(at.type,at.key,at.props,null,rt.mode,Mt),Mt.ref=Pr(rt,ze,at),Mt.return=rt,rt=Mt)}return ce(rt);case G:e:{for(Sr=at.key;ze!==null;){if(ze.key===Sr)if(ze.tag===4&&ze.stateNode.containerInfo===at.containerInfo&&ze.stateNode.implementation===at.implementation){x(rt,ze.sibling),ze=j(ze,at.children||[]),ze.return=rt,rt=ze;break e}else{x(rt,ze);break}else h(rt,ze);ze=ze.sibling}ze=Fy(at,rt.mode,Mt),ze.return=rt,rt=ze}return ce(rt);case Ee:return Sr=at._init,xs(rt,ze,Sr(at._payload),Mt)}if(je(at))return cr(rt,ze,at,Mt);if(W(at))return pr(rt,ze,at,Mt);Jr(rt,at)}return typeof at=="string"&&at!==""||typeof at=="number"?(at=""+at,ze!==null&&ze.tag===6?(x(rt,ze.sibling),ze=j(ze,at),ze.return=rt,rt=ze):(x(rt,ze),ze=Ry(at,rt.mode,Mt),ze.return=rt,rt=ze),ce(rt)):x(rt,ze)}return xs}var Qi=Is(!0),yi=Is(!1),ms=nl(null),Ps=null,pi=null,cn=null;function bn(){cn=pi=Ps=null}function mi(u){var h=ms.current;Rn(ms),u._currentValue=h}function _n(u,h,x){for(;u!==null;){var E=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,E!==null&&(E.childLanes|=h)):E!==null&&(E.childLanes&h)!==h&&(E.childLanes|=h),u===x)break;u=u.return}}function Pi(u,h){Ps=u,cn=pi=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&h)!==0&&(Do=!0),u.firstContext=null)}function Ri(u){var h=u._currentValue;if(cn!==u)if(u={context:u,memoizedValue:h,next:null},pi===null){if(Ps===null)throw Error(r(308));pi=u,Ps.dependencies={lanes:0,firstContext:u}}else pi=pi.next=u;return h}var $n=null;function aa(u){$n===null?$n=[u]:$n.push(u)}function Bn(u,h,x,E){var j=h.interleaved;return j===null?(x.next=x,aa(h)):(x.next=j.next,j.next=x),h.interleaved=x,Hn(u,E)}function Hn(u,h){u.lanes|=h;var x=u.alternate;for(x!==null&&(x.lanes|=h),x=u,u=u.return;u!==null;)u.childLanes|=h,x=u.alternate,x!==null&&(x.childLanes|=h),x=u,u=u.return;return x.tag===3?x.stateNode:null}var Ji=!1;function Ks(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qa(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function zi(u,h){return{eventTime:u,lane:h,tag:0,payload:null,callback:null,next:null}}function $i(u,h,x){var E=u.updateQueue;if(E===null)return null;if(E=E.shared,(kn&2)!==0){var j=E.pending;return j===null?h.next=h:(h.next=j.next,j.next=h),E.pending=h,Hn(u,x)}return j=E.interleaved,j===null?(h.next=h,aa(E)):(h.next=j.next,j.next=h),E.interleaved=h,Hn(u,x)}function oa(u,h,x){if(h=h.updateQueue,h!==null&&(h=h.shared,(x&4194240)!==0)){var E=h.lanes;E&=u.pendingLanes,x|=E,h.lanes=x,Xo(u,x)}}function qn(u,h){var x=u.updateQueue,E=u.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var j=null,q=null;if(x=x.firstBaseUpdate,x!==null){do{var ce={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};q===null?j=q=ce:q=q.next=ce,x=x.next}while(x!==null);q===null?j=q=h:q=q.next=h}else j=q=h;x={baseState:E.baseState,firstBaseUpdate:j,lastBaseUpdate:q,shared:E.shared,effects:E.effects},u.updateQueue=x;return}u=x.lastBaseUpdate,u===null?x.firstBaseUpdate=h:u.next=h,x.lastBaseUpdate=h}function la(u,h,x,E){var j=u.updateQueue;Ji=!1;var q=j.firstBaseUpdate,ce=j.lastBaseUpdate,Fe=j.shared.pending;if(Fe!==null){j.shared.pending=null;var Me=Fe,ct=Me.next;Me.next=null,ce===null?q=ct:ce.next=ct,ce=Me;var Rt=u.alternate;Rt!==null&&(Rt=Rt.updateQueue,Fe=Rt.lastBaseUpdate,Fe!==ce&&(Fe===null?Rt.firstBaseUpdate=ct:Fe.next=ct,Rt.lastBaseUpdate=Me))}if(q!==null){var jt=j.baseState;ce=0,Rt=ct=Me=null,Fe=q;do{var It=Fe.lane,Qt=Fe.eventTime;if((E&It)===It){Rt!==null&&(Rt=Rt.next={eventTime:Qt,lane:0,tag:Fe.tag,payload:Fe.payload,callback:Fe.callback,next:null});e:{var cr=u,pr=Fe;switch(It=h,Qt=x,pr.tag){case 1:if(cr=pr.payload,typeof cr=="function"){jt=cr.call(Qt,jt,It);break e}jt=cr;break e;case 3:cr.flags=cr.flags&-65537|128;case 0:if(cr=pr.payload,It=typeof cr=="function"?cr.call(Qt,jt,It):cr,It==null)break e;jt=ne({},jt,It);break e;case 2:Ji=!0}}Fe.callback!==null&&Fe.lane!==0&&(u.flags|=64,It=j.effects,It===null?j.effects=[Fe]:It.push(Fe))}else Qt={eventTime:Qt,lane:It,tag:Fe.tag,payload:Fe.payload,callback:Fe.callback,next:null},Rt===null?(ct=Rt=Qt,Me=jt):Rt=Rt.next=Qt,ce|=It;if(Fe=Fe.next,Fe===null){if(Fe=j.shared.pending,Fe===null)break;It=Fe,Fe=It.next,It.next=null,j.lastBaseUpdate=It,j.shared.pending=null}}while(!0);if(Rt===null&&(Me=jt),j.baseState=Me,j.firstBaseUpdate=ct,j.lastBaseUpdate=Rt,h=j.shared.interleaved,h!==null){j=h;do ce|=j.lane,j=j.next;while(j!==h)}else q===null&&(j.shared.lanes=0);sf|=ce,u.lanes=ce,u.memoizedState=jt}}function jo(u,h,x){if(u=h.effects,h.effects=null,u!==null)for(h=0;h<u.length;h++){var E=u[h],j=E.callback;if(j!==null){if(E.callback=null,E=x,typeof j!="function")throw Error(r(191,j));j.call(E)}}}var il={},Rs=nl(il),Hi=nl(il),$c=nl(il);function cc(u){if(u===il)throw Error(r(174));return u}function Fd(u,h){switch(Mn($c,h),Mn(Hi,u),Mn(Rs,il),u=h.nodeType,u){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:Lt(null,"");break;default:u=u===8?h.parentNode:h,h=u.namespaceURI||null,u=u.tagName,h=Lt(h,u)}Rn(Rs),Mn(Rs,h)}function Il(){Rn(Rs),Rn(Hi),Rn($c)}function m2(u){cc($c.current);var h=cc(Rs.current),x=Lt(h,u.type);h!==x&&(Mn(Hi,u),Mn(Rs,x))}function Vp(u){Hi.current===u&&(Rn(Rs),Rn(Hi))}var li=nl(0);function sl(u){for(var h=u;h!==null;){if(h.tag===13){var x=h.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Up=[];function zp(){for(var u=0;u<Up.length;u++)Up[u]._workInProgressVersionPrimary=null;Up.length=0}var Ih=V.ReactCurrentDispatcher,Ph=V.ReactCurrentBatchConfig,Pl=0,gi=null,Zi=null,qi=null,Ld=!1,uc=!1,jd=0,iy=0;function gs(){throw Error(r(321))}function Rh(u,h){if(h===null)return!1;for(var x=0;x<h.length&&x<u.length;x++)if(!ps(u[x],h[x]))return!1;return!0}function tf(u,h,x,E,j,q){if(Pl=q,gi=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Ih.current=u===null||u.memoizedState===null?sD:aD,u=x(E,j),uc){q=0;do{if(uc=!1,jd=0,25<=q)throw Error(r(301));q+=1,qi=Zi=null,h.updateQueue=null,Ih.current=oD,u=x(E,j)}while(uc)}if(Ih.current=w2,h=Zi!==null&&Zi.next!==null,Pl=0,qi=Zi=gi=null,Ld=!1,h)throw Error(r(300));return u}function Rl(){var u=jd!==0;return jd=0,u}function al(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qi===null?gi.memoizedState=qi=u:qi=qi.next=u,qi}function yo(){if(Zi===null){var u=gi.alternate;u=u!==null?u.memoizedState:null}else u=Zi.next;var h=qi===null?gi.memoizedState:qi.next;if(h!==null)qi=h,Zi=u;else{if(u===null)throw Error(r(310));Zi=u,u={memoizedState:Zi.memoizedState,baseState:Zi.baseState,baseQueue:Zi.baseQueue,queue:Zi.queue,next:null},qi===null?gi.memoizedState=qi=u:qi=qi.next=u}return qi}function rf(u,h){return typeof h=="function"?h(u):h}function Fh(u){var h=yo(),x=h.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=u;var E=Zi,j=E.baseQueue,q=x.pending;if(q!==null){if(j!==null){var ce=j.next;j.next=q.next,q.next=ce}E.baseQueue=j=q,x.pending=null}if(j!==null){q=j.next,E=E.baseState;var Fe=ce=null,Me=null,ct=q;do{var Rt=ct.lane;if((Pl&Rt)===Rt)Me!==null&&(Me=Me.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),E=ct.hasEagerState?ct.eagerState:u(E,ct.action);else{var jt={lane:Rt,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};Me===null?(Fe=Me=jt,ce=E):Me=Me.next=jt,gi.lanes|=Rt,sf|=Rt}ct=ct.next}while(ct!==null&&ct!==q);Me===null?ce=E:Me.next=Fe,ps(E,h.memoizedState)||(Do=!0),h.memoizedState=E,h.baseState=ce,h.baseQueue=Me,x.lastRenderedState=E}if(u=x.interleaved,u!==null){j=u;do q=j.lane,gi.lanes|=q,sf|=q,j=j.next;while(j!==u)}else j===null&&(x.lanes=0);return[h.memoizedState,x.dispatch]}function Hc(u){var h=yo(),x=h.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=u;var E=x.dispatch,j=x.pending,q=h.memoizedState;if(j!==null){x.pending=null;var ce=j=j.next;do q=u(q,ce.action),ce=ce.next;while(ce!==j);ps(q,h.memoizedState)||(Do=!0),h.memoizedState=q,h.baseQueue===null&&(h.baseState=q),x.lastRenderedState=q}return[q,E]}function g2(){}function $p(u,h){var x=gi,E=yo(),j=h(),q=!ps(E.memoizedState,j);if(q&&(E.memoizedState=j,Do=!0),E=E.queue,Dh(v2.bind(null,x,E,u),[u]),E.getSnapshot!==h||q||qi!==null&&qi.memoizedState.tag&1){if(x.flags|=2048,wo(9,Hp.bind(null,x,E,j,h),void 0,null),ca===null)throw Error(r(349));(Pl&30)!==0||x2(x,h,j)}return j}function x2(u,h,x){u.flags|=16384,u={getSnapshot:h,value:x},h=gi.updateQueue,h===null?(h={lastEffect:null,stores:null},gi.updateQueue=h,h.stores=[u]):(x=h.stores,x===null?h.stores=[u]:x.push(u))}function Hp(u,h,x,E){h.value=x,h.getSnapshot=E,Dd(h)&&Lh(u)}function v2(u,h,x){return x(function(){Dd(h)&&Lh(u)})}function Dd(u){var h=u.getSnapshot;u=u.value;try{var x=h();return!ps(u,x)}catch{return!0}}function Lh(u){var h=Hn(u,1);h!==null&&mc(h,u,1,-1)}function nf(u){var h=al();return typeof u=="function"&&(u=u()),h.memoizedState=h.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rf,lastRenderedState:u},h.queue=u,u=u.dispatch=iD.bind(null,gi,u),[h.memoizedState,u]}function wo(u,h,x,E){return u={tag:u,create:h,destroy:x,deps:E,next:null},h=gi.updateQueue,h===null?(h={lastEffect:null,stores:null},gi.updateQueue=h,h.lastEffect=u.next=u):(x=h.lastEffect,x===null?h.lastEffect=u.next=u:(E=x.next,x.next=u,u.next=E,h.lastEffect=u)),u}function dc(){return yo().memoizedState}function ol(u,h,x,E){var j=al();gi.flags|=u,j.memoizedState=wo(1|h,x,void 0,E===void 0?null:E)}function Lu(u,h,x,E){var j=yo();E=E===void 0?null:E;var q=void 0;if(Zi!==null){var ce=Zi.memoizedState;if(q=ce.destroy,E!==null&&Rh(E,ce.deps)){j.memoizedState=wo(h,x,q,E);return}}gi.flags|=u,j.memoizedState=wo(1|h,x,q,E)}function jh(u,h){return ol(8390656,8,u,h)}function Dh(u,h){return Lu(2048,8,u,h)}function y2(u,h){return Lu(4,2,u,h)}function Oh(u,h){return Lu(4,4,u,h)}function Mh(u,h){if(typeof h=="function")return u=u(),h(u),function(){h(null)};if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function C_(u,h,x){return x=x!=null?x.concat([u]):null,Lu(4,4,Mh.bind(null,h,u),x)}function sy(){}function T_(u,h){var x=yo();h=h===void 0?null:h;var E=x.memoizedState;return E!==null&&h!==null&&Rh(h,E[1])?E[0]:(x.memoizedState=[u,h],u)}function N_(u,h){var x=yo();h=h===void 0?null:h;var E=x.memoizedState;return E!==null&&h!==null&&Rh(h,E[1])?E[0]:(u=u(),x.memoizedState=[u,h],u)}function A_(u,h,x){return(Pl&21)===0?(u.baseState&&(u.baseState=!1,Do=!0),u.memoizedState=x):(ps(x,h)||(x=rc(),gi.lanes|=x,sf|=x,u.baseState=!0),h)}function rD(u,h){var x=Kr;Kr=x!==0&&4>x?x:4,u(!0);var E=Ph.transition;Ph.transition={};try{u(!1),h()}finally{Kr=x,Ph.transition=E}}function I_(){return yo().memoizedState}function nD(u,h,x){var E=Vd(u);if(x={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null},P_(u))R_(h,x);else if(x=Bn(u,h,x,E),x!==null){var j=_o();mc(x,u,E,j),F_(x,h,E)}}function iD(u,h,x){var E=Vd(u),j={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null};if(P_(u))R_(h,j);else{var q=u.alternate;if(u.lanes===0&&(q===null||q.lanes===0)&&(q=h.lastRenderedReducer,q!==null))try{var ce=h.lastRenderedState,Fe=q(ce,x);if(j.hasEagerState=!0,j.eagerState=Fe,ps(Fe,ce)){var Me=h.interleaved;Me===null?(j.next=j,aa(h)):(j.next=Me.next,Me.next=j),h.interleaved=j;return}}catch{}finally{}x=Bn(u,h,j,E),x!==null&&(j=_o(),mc(x,u,E,j),F_(x,h,E))}}function P_(u){var h=u.alternate;return u===gi||h!==null&&h===gi}function R_(u,h){uc=Ld=!0;var x=u.pending;x===null?h.next=h:(h.next=x.next,x.next=h),u.pending=h}function F_(u,h,x){if((x&4194240)!==0){var E=h.lanes;E&=u.pendingLanes,x|=E,h.lanes=x,Xo(u,x)}}var w2={readContext:Ri,useCallback:gs,useContext:gs,useEffect:gs,useImperativeHandle:gs,useInsertionEffect:gs,useLayoutEffect:gs,useMemo:gs,useReducer:gs,useRef:gs,useState:gs,useDebugValue:gs,useDeferredValue:gs,useTransition:gs,useMutableSource:gs,useSyncExternalStore:gs,useId:gs,unstable_isNewReconciler:!1},sD={readContext:Ri,useCallback:function(u,h){return al().memoizedState=[u,h===void 0?null:h],u},useContext:Ri,useEffect:jh,useImperativeHandle:function(u,h,x){return x=x!=null?x.concat([u]):null,ol(4194308,4,Mh.bind(null,h,u),x)},useLayoutEffect:function(u,h){return ol(4194308,4,u,h)},useInsertionEffect:function(u,h){return ol(4,2,u,h)},useMemo:function(u,h){var x=al();return h=h===void 0?null:h,u=u(),x.memoizedState=[u,h],u},useReducer:function(u,h,x){var E=al();return h=x!==void 0?x(h):h,E.memoizedState=E.baseState=h,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:h},E.queue=u,u=u.dispatch=nD.bind(null,gi,u),[E.memoizedState,u]},useRef:function(u){var h=al();return u={current:u},h.memoizedState=u},useState:nf,useDebugValue:sy,useDeferredValue:function(u){return al().memoizedState=u},useTransition:function(){var u=nf(!1),h=u[0];return u=rD.bind(null,u[1]),al().memoizedState=u,[h,u]},useMutableSource:function(){},useSyncExternalStore:function(u,h,x){var E=gi,j=al();if(yt){if(x===void 0)throw Error(r(407));x=x()}else{if(x=h(),ca===null)throw Error(r(349));(Pl&30)!==0||x2(E,h,x)}j.memoizedState=x;var q={value:x,getSnapshot:h};return j.queue=q,jh(v2.bind(null,E,q,u),[u]),E.flags|=2048,wo(9,Hp.bind(null,E,q,x,h),void 0,null),x},useId:function(){var u=al(),h=ca.identifierPrefix;if(yt){var x=Te,E=Ze;x=(E&~(1<<32-Tn(E)-1)).toString(32)+x,h=":"+h+"R"+x,x=jd++,0<x&&(h+="H"+x.toString(32)),h+=":"}else x=iy++,h=":"+h+"r"+x.toString(32)+":";return u.memoizedState=h},unstable_isNewReconciler:!1},aD={readContext:Ri,useCallback:T_,useContext:Ri,useEffect:Dh,useImperativeHandle:C_,useInsertionEffect:y2,useLayoutEffect:Oh,useMemo:N_,useReducer:Fh,useRef:dc,useState:function(){return Fh(rf)},useDebugValue:sy,useDeferredValue:function(u){var h=yo();return A_(h,Zi.memoizedState,u)},useTransition:function(){var u=Fh(rf)[0],h=yo().memoizedState;return[u,h]},useMutableSource:g2,useSyncExternalStore:$p,useId:I_,unstable_isNewReconciler:!1},oD={readContext:Ri,useCallback:T_,useContext:Ri,useEffect:Dh,useImperativeHandle:C_,useInsertionEffect:y2,useLayoutEffect:Oh,useMemo:N_,useReducer:Hc,useRef:dc,useState:function(){return Hc(rf)},useDebugValue:sy,useDeferredValue:function(u){var h=yo();return Zi===null?h.memoizedState=u:A_(h,Zi.memoizedState,u)},useTransition:function(){var u=Hc(rf)[0],h=yo().memoizedState;return[u,h]},useMutableSource:g2,useSyncExternalStore:$p,useId:I_,unstable_isNewReconciler:!1};function fc(u,h){if(u&&u.defaultProps){h=ne({},h),u=u.defaultProps;for(var x in u)h[x]===void 0&&(h[x]=u[x]);return h}return h}function ay(u,h,x,E){h=u.memoizedState,x=x(E,h),x=x==null?h:ne({},h,x),u.memoizedState=x,u.lanes===0&&(u.updateQueue.baseState=x)}var b2={isMounted:function(u){return(u=u._reactInternals)?Ie(u)===u:!1},enqueueSetState:function(u,h,x){u=u._reactInternals;var E=_o(),j=Vd(u),q=zi(E,j);q.payload=h,x!=null&&(q.callback=x),h=$i(u,q,j),h!==null&&(mc(h,u,j,E),oa(h,u,j))},enqueueReplaceState:function(u,h,x){u=u._reactInternals;var E=_o(),j=Vd(u),q=zi(E,j);q.tag=1,q.payload=h,x!=null&&(q.callback=x),h=$i(u,q,j),h!==null&&(mc(h,u,j,E),oa(h,u,j))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var x=_o(),E=Vd(u),j=zi(x,E);j.tag=2,h!=null&&(j.callback=h),h=$i(u,j,E),h!==null&&(mc(h,u,E,x),oa(h,u,E))}};function L_(u,h,x,E,j,q,ce){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(E,q,ce):h.prototype&&h.prototype.isPureReactComponent?!Tl(x,E)||!Tl(j,q):!0}function j_(u,h,x){var E=!1,j=zc,q=h.contextType;return typeof q=="object"&&q!==null?q=Ri(q):(j=Ya(h)?Ru:Gs.current,E=h.contextTypes,q=(E=E!=null)?Rd(u,j):zc),h=new h(x,q),u.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=b2,u.stateNode=h,h._reactInternals=u,E&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=j,u.__reactInternalMemoizedMaskedChildContext=q),h}function D_(u,h,x,E){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(x,E),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(x,E),h.state!==u&&b2.enqueueReplaceState(h,h.state,null)}function oy(u,h,x,E){var j=u.stateNode;j.props=x,j.state=u.memoizedState,j.refs={},Ks(u);var q=h.contextType;typeof q=="object"&&q!==null?j.context=Ri(q):(q=Ya(h)?Ru:Gs.current,j.context=Rd(u,q)),j.state=u.memoizedState,q=h.getDerivedStateFromProps,typeof q=="function"&&(ay(u,h,q,x),j.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(h=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),h!==j.state&&b2.enqueueReplaceState(j,j.state,null),la(u,x,j,E),j.state=u.memoizedState),typeof j.componentDidMount=="function"&&(u.flags|=4194308)}function Bh(u,h){try{var x="",E=h;do x+=J(E),E=E.return;while(E);var j=x}catch(q){j=`
Error generating stack: `+q.message+`
`+q.stack}return{value:u,source:h,stack:j,digest:null}}function ly(u,h,x){return{value:u,source:null,stack:x??null,digest:h??null}}function cy(u,h){try{console.error(h.value)}catch(x){setTimeout(function(){throw x})}}var lD=typeof WeakMap=="function"?WeakMap:Map;function O_(u,h,x){x=zi(-1,x),x.tag=3,x.payload={element:null};var E=h.value;return x.callback=function(){N2||(N2=!0,Ey=E),cy(u,h)},x}function M_(u,h,x){x=zi(-1,x),x.tag=3;var E=u.type.getDerivedStateFromError;if(typeof E=="function"){var j=h.value;x.payload=function(){return E(j)},x.callback=function(){cy(u,h)}}var q=u.stateNode;return q!==null&&typeof q.componentDidCatch=="function"&&(x.callback=function(){cy(u,h),typeof E!="function"&&(Md===null?Md=new Set([this]):Md.add(this));var ce=h.stack;this.componentDidCatch(h.value,{componentStack:ce!==null?ce:""})}),x}function B_(u,h,x){var E=u.pingCache;if(E===null){E=u.pingCache=new lD;var j=new Set;E.set(h,j)}else j=E.get(h),j===void 0&&(j=new Set,E.set(h,j));j.has(x)||(j.add(x),u=_D.bind(null,u,h,x),h.then(u,u))}function V_(u){do{var h;if((h=u.tag===13)&&(h=u.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return u;u=u.return}while(u!==null);return null}function U_(u,h,x,E,j){return(u.mode&1)===0?(u===h?u.flags|=65536:(u.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(h=zi(-1,1),h.tag=2,$i(x,h,1))),x.lanes|=1),u):(u.flags|=65536,u.lanes=j,u)}var cD=V.ReactCurrentOwner,Do=!1;function bo(u,h,x,E){h.child=u===null?yi(h,null,x,E):Qi(h,u.child,x,E)}function z_(u,h,x,E,j){x=x.render;var q=h.ref;return Pi(h,j),E=tf(u,h,x,E,q,j),x=Rl(),u!==null&&!Do?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~j,ju(u,h,j)):(yt&&x&&pt(h),h.flags|=1,bo(u,h,E,j),h.child)}function $_(u,h,x,E,j){if(u===null){var q=x.type;return typeof q=="function"&&!Py(q)&&q.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(h.tag=15,h.type=q,H_(u,h,q,E,j)):(u=L2(x.type,null,E,h,h.mode,j),u.ref=h.ref,u.return=h,h.child=u)}if(q=u.child,(u.lanes&j)===0){var ce=q.memoizedProps;if(x=x.compare,x=x!==null?x:Tl,x(ce,E)&&u.ref===h.ref)return ju(u,h,j)}return h.flags|=1,u=zd(q,E),u.ref=h.ref,u.return=h,h.child=u}function H_(u,h,x,E,j){if(u!==null){var q=u.memoizedProps;if(Tl(q,E)&&u.ref===h.ref)if(Do=!1,h.pendingProps=E=q,(u.lanes&j)!==0)(u.flags&131072)!==0&&(Do=!0);else return h.lanes=u.lanes,ju(u,h,j)}return uy(u,h,x,E,j)}function q_(u,h,x){var E=h.pendingProps,j=E.children,q=u!==null?u.memoizedState:null;if(E.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mn(Uh,ll),ll|=x;else{if((x&1073741824)===0)return u=q!==null?q.baseLanes|x:x,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:u,cachePool:null,transitions:null},h.updateQueue=null,Mn(Uh,ll),ll|=u,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=q!==null?q.baseLanes:x,Mn(Uh,ll),ll|=E}else q!==null?(E=q.baseLanes|x,h.memoizedState=null):E=x,Mn(Uh,ll),ll|=E;return bo(u,h,j,x),h.child}function W_(u,h){var x=h.ref;(u===null&&x!==null||u!==null&&u.ref!==x)&&(h.flags|=512,h.flags|=2097152)}function uy(u,h,x,E,j){var q=Ya(x)?Ru:Gs.current;return q=Rd(h,q),Pi(h,j),x=tf(u,h,x,E,q,j),E=Rl(),u!==null&&!Do?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~j,ju(u,h,j)):(yt&&E&&pt(h),h.flags|=1,bo(u,h,x,j),h.child)}function G_(u,h,x,E,j){if(Ya(x)){var q=!0;Fu(h)}else q=!1;if(Pi(h,j),h.stateNode===null)k2(u,h),j_(h,x,E),oy(h,x,E,j),E=!0;else if(u===null){var ce=h.stateNode,Fe=h.memoizedProps;ce.props=Fe;var Me=ce.context,ct=x.contextType;typeof ct=="object"&&ct!==null?ct=Ri(ct):(ct=Ya(x)?Ru:Gs.current,ct=Rd(h,ct));var Rt=x.getDerivedStateFromProps,jt=typeof Rt=="function"||typeof ce.getSnapshotBeforeUpdate=="function";jt||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(Fe!==E||Me!==ct)&&D_(h,ce,E,ct),Ji=!1;var It=h.memoizedState;ce.state=It,la(h,E,ce,j),Me=h.memoizedState,Fe!==E||It!==Me||Xa.current||Ji?(typeof Rt=="function"&&(ay(h,x,Rt,E),Me=h.memoizedState),(Fe=Ji||L_(h,x,Fe,E,It,Me,ct))?(jt||typeof ce.UNSAFE_componentWillMount!="function"&&typeof ce.componentWillMount!="function"||(typeof ce.componentWillMount=="function"&&ce.componentWillMount(),typeof ce.UNSAFE_componentWillMount=="function"&&ce.UNSAFE_componentWillMount()),typeof ce.componentDidMount=="function"&&(h.flags|=4194308)):(typeof ce.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=E,h.memoizedState=Me),ce.props=E,ce.state=Me,ce.context=ct,E=Fe):(typeof ce.componentDidMount=="function"&&(h.flags|=4194308),E=!1)}else{ce=h.stateNode,Qa(u,h),Fe=h.memoizedProps,ct=h.type===h.elementType?Fe:fc(h.type,Fe),ce.props=ct,jt=h.pendingProps,It=ce.context,Me=x.contextType,typeof Me=="object"&&Me!==null?Me=Ri(Me):(Me=Ya(x)?Ru:Gs.current,Me=Rd(h,Me));var Qt=x.getDerivedStateFromProps;(Rt=typeof Qt=="function"||typeof ce.getSnapshotBeforeUpdate=="function")||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(Fe!==jt||It!==Me)&&D_(h,ce,E,Me),Ji=!1,It=h.memoizedState,ce.state=It,la(h,E,ce,j);var cr=h.memoizedState;Fe!==jt||It!==cr||Xa.current||Ji?(typeof Qt=="function"&&(ay(h,x,Qt,E),cr=h.memoizedState),(ct=Ji||L_(h,x,ct,E,It,cr,Me)||!1)?(Rt||typeof ce.UNSAFE_componentWillUpdate!="function"&&typeof ce.componentWillUpdate!="function"||(typeof ce.componentWillUpdate=="function"&&ce.componentWillUpdate(E,cr,Me),typeof ce.UNSAFE_componentWillUpdate=="function"&&ce.UNSAFE_componentWillUpdate(E,cr,Me)),typeof ce.componentDidUpdate=="function"&&(h.flags|=4),typeof ce.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof ce.componentDidUpdate!="function"||Fe===u.memoizedProps&&It===u.memoizedState||(h.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||Fe===u.memoizedProps&&It===u.memoizedState||(h.flags|=1024),h.memoizedProps=E,h.memoizedState=cr),ce.props=E,ce.state=cr,ce.context=Me,E=ct):(typeof ce.componentDidUpdate!="function"||Fe===u.memoizedProps&&It===u.memoizedState||(h.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||Fe===u.memoizedProps&&It===u.memoizedState||(h.flags|=1024),E=!1)}return dy(u,h,x,E,q,j)}function dy(u,h,x,E,j,q){W_(u,h);var ce=(h.flags&128)!==0;if(!E&&!ce)return j&&p2(h,x,!1),ju(u,h,q);E=h.stateNode,cD.current=h;var Fe=ce&&typeof x.getDerivedStateFromError!="function"?null:E.render();return h.flags|=1,u!==null&&ce?(h.child=Qi(h,u.child,null,q),h.child=Qi(h,null,Fe,q)):bo(u,h,Fe,q),h.memoizedState=E.state,j&&p2(h,x,!0),h.child}function K_(u){var h=u.stateNode;h.pendingContext?h2(u,h.pendingContext,h.pendingContext!==h.context):h.context&&h2(u,h.context,!1),Fd(u,h.containerInfo)}function X_(u,h,x,E,j){return rr(),Ht(j),h.flags|=256,bo(u,h,x,E),h.child}var fy={dehydrated:null,treeContext:null,retryLane:0};function hy(u){return{baseLanes:u,cachePool:null,transitions:null}}function Y_(u,h,x){var E=h.pendingProps,j=li.current,q=!1,ce=(h.flags&128)!==0,Fe;if((Fe=ce)||(Fe=u!==null&&u.memoizedState===null?!1:(j&2)!==0),Fe?(q=!0,h.flags&=-129):(u===null||u.memoizedState!==null)&&(j|=1),Mn(li,j&1),u===null)return ar(h),u=h.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((h.mode&1)===0?h.lanes=1:u.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(ce=E.children,u=E.fallback,q?(E=h.mode,q=h.child,ce={mode:"hidden",children:ce},(E&1)===0&&q!==null?(q.childLanes=0,q.pendingProps=ce):q=j2(ce,E,0,null),u=cf(u,E,x,null),q.return=h,u.return=h,q.sibling=u,h.child=q,h.child.memoizedState=hy(x),h.memoizedState=fy,u):py(h,ce));if(j=u.memoizedState,j!==null&&(Fe=j.dehydrated,Fe!==null))return uD(u,h,ce,E,Fe,j,x);if(q){q=E.fallback,ce=h.mode,j=u.child,Fe=j.sibling;var Me={mode:"hidden",children:E.children};return(ce&1)===0&&h.child!==j?(E=h.child,E.childLanes=0,E.pendingProps=Me,h.deletions=null):(E=zd(j,Me),E.subtreeFlags=j.subtreeFlags&14680064),Fe!==null?q=zd(Fe,q):(q=cf(q,ce,x,null),q.flags|=2),q.return=h,E.return=h,E.sibling=q,h.child=E,E=q,q=h.child,ce=u.child.memoizedState,ce=ce===null?hy(x):{baseLanes:ce.baseLanes|x,cachePool:null,transitions:ce.transitions},q.memoizedState=ce,q.childLanes=u.childLanes&~x,h.memoizedState=fy,E}return q=u.child,u=q.sibling,E=zd(q,{mode:"visible",children:E.children}),(h.mode&1)===0&&(E.lanes=x),E.return=h,E.sibling=null,u!==null&&(x=h.deletions,x===null?(h.deletions=[u],h.flags|=16):x.push(u)),h.child=E,h.memoizedState=null,E}function py(u,h){return h=j2({mode:"visible",children:h},u.mode,0,null),h.return=u,u.child=h}function _2(u,h,x,E){return E!==null&&Ht(E),Qi(h,u.child,null,x),u=py(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function uD(u,h,x,E,j,q,ce){if(x)return h.flags&256?(h.flags&=-257,E=ly(Error(r(422))),_2(u,h,ce,E)):h.memoizedState!==null?(h.child=u.child,h.flags|=128,null):(q=E.fallback,j=h.mode,E=j2({mode:"visible",children:E.children},j,0,null),q=cf(q,j,ce,null),q.flags|=2,E.return=h,q.return=h,E.sibling=q,h.child=E,(h.mode&1)!==0&&Qi(h,u.child,null,ce),h.child.memoizedState=hy(ce),h.memoizedState=fy,q);if((h.mode&1)===0)return _2(u,h,ce,null);if(j.data==="$!"){if(E=j.nextSibling&&j.nextSibling.dataset,E)var Fe=E.dgst;return E=Fe,q=Error(r(419)),E=ly(q,E,void 0),_2(u,h,ce,E)}if(Fe=(ce&u.childLanes)!==0,Do||Fe){if(E=ca,E!==null){switch(ce&-ce){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=(j&(E.suspendedLanes|ce))!==0?0:j,j!==0&&j!==q.retryLane&&(q.retryLane=j,Hn(u,j),mc(E,u,j,-1))}return Iy(),E=ly(Error(r(421))),_2(u,h,ce,E)}return j.data==="$?"?(h.flags|=128,h.child=u.child,h=kD.bind(null,u),j._reactRetry=h,null):(u=q.treeContext,ht=Ca(j.nextSibling),ft=h,yt=!0,wt=null,u!==null&&(ye[Se++]=Ze,ye[Se++]=Te,ye[Se++]=Oe,Ze=u.id,Te=u.overflow,Oe=h),h=py(h,E.children),h.flags|=4096,h)}function Q_(u,h,x){u.lanes|=h;var E=u.alternate;E!==null&&(E.lanes|=h),_n(u.return,h,x)}function my(u,h,x,E,j){var q=u.memoizedState;q===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:j}:(q.isBackwards=h,q.rendering=null,q.renderingStartTime=0,q.last=E,q.tail=x,q.tailMode=j)}function J_(u,h,x){var E=h.pendingProps,j=E.revealOrder,q=E.tail;if(bo(u,h,E.children,x),E=li.current,(E&2)!==0)E=E&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&Q_(u,x,h);else if(u.tag===19)Q_(u,x,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}E&=1}if(Mn(li,E),(h.mode&1)===0)h.memoizedState=null;else switch(j){case"forwards":for(x=h.child,j=null;x!==null;)u=x.alternate,u!==null&&sl(u)===null&&(j=x),x=x.sibling;x=j,x===null?(j=h.child,h.child=null):(j=x.sibling,x.sibling=null),my(h,!1,j,x,q);break;case"backwards":for(x=null,j=h.child,h.child=null;j!==null;){if(u=j.alternate,u!==null&&sl(u)===null){h.child=j;break}u=j.sibling,j.sibling=x,x=j,j=u}my(h,!0,x,null,q);break;case"together":my(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function k2(u,h){(h.mode&1)===0&&u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2)}function ju(u,h,x){if(u!==null&&(h.dependencies=u.dependencies),sf|=h.lanes,(x&h.childLanes)===0)return null;if(u!==null&&h.child!==u.child)throw Error(r(153));if(h.child!==null){for(u=h.child,x=zd(u,u.pendingProps),h.child=x,x.return=h;u.sibling!==null;)u=u.sibling,x=x.sibling=zd(u,u.pendingProps),x.return=h;x.sibling=null}return h.child}function dD(u,h,x){switch(h.tag){case 3:K_(h),rr();break;case 5:m2(h);break;case 1:Ya(h.type)&&Fu(h);break;case 4:Fd(h,h.stateNode.containerInfo);break;case 10:var E=h.type._context,j=h.memoizedProps.value;Mn(ms,E._currentValue),E._currentValue=j;break;case 13:if(E=h.memoizedState,E!==null)return E.dehydrated!==null?(Mn(li,li.current&1),h.flags|=128,null):(x&h.child.childLanes)!==0?Y_(u,h,x):(Mn(li,li.current&1),u=ju(u,h,x),u!==null?u.sibling:null);Mn(li,li.current&1);break;case 19:if(E=(x&h.childLanes)!==0,(u.flags&128)!==0){if(E)return J_(u,h,x);h.flags|=128}if(j=h.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),Mn(li,li.current),E)break;return null;case 22:case 23:return h.lanes=0,q_(u,h,x)}return ju(u,h,x)}var Z_,gy,e8,t8;Z_=function(u,h){for(var x=h.child;x!==null;){if(x.tag===5||x.tag===6)u.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},gy=function(){},e8=function(u,h,x,E){var j=u.memoizedProps;if(j!==E){u=h.stateNode,cc(Rs.current);var q=null;switch(x){case"input":j=Re(u,j),E=Re(u,E),q=[];break;case"select":j=ne({},j,{value:void 0}),E=ne({},E,{value:void 0}),q=[];break;case"textarea":j=Tt(u,j),E=Tt(u,E),q=[];break;default:typeof j.onClick!="function"&&typeof E.onClick=="function"&&(u.onclick=Ad)}Yr(x,E);var ce;x=null;for(ct in j)if(!E.hasOwnProperty(ct)&&j.hasOwnProperty(ct)&&j[ct]!=null)if(ct==="style"){var Fe=j[ct];for(ce in Fe)Fe.hasOwnProperty(ce)&&(x||(x={}),x[ce]="")}else ct!=="dangerouslySetInnerHTML"&&ct!=="children"&&ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&ct!=="autoFocus"&&(i.hasOwnProperty(ct)?q||(q=[]):(q=q||[]).push(ct,null));for(ct in E){var Me=E[ct];if(Fe=j?.[ct],E.hasOwnProperty(ct)&&Me!==Fe&&(Me!=null||Fe!=null))if(ct==="style")if(Fe){for(ce in Fe)!Fe.hasOwnProperty(ce)||Me&&Me.hasOwnProperty(ce)||(x||(x={}),x[ce]="");for(ce in Me)Me.hasOwnProperty(ce)&&Fe[ce]!==Me[ce]&&(x||(x={}),x[ce]=Me[ce])}else x||(q||(q=[]),q.push(ct,x)),x=Me;else ct==="dangerouslySetInnerHTML"?(Me=Me?Me.__html:void 0,Fe=Fe?Fe.__html:void 0,Me!=null&&Fe!==Me&&(q=q||[]).push(ct,Me)):ct==="children"?typeof Me!="string"&&typeof Me!="number"||(q=q||[]).push(ct,""+Me):ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&(i.hasOwnProperty(ct)?(Me!=null&&ct==="onScroll"&&zn("scroll",u),q||Fe===Me||(q=[])):(q=q||[]).push(ct,Me))}x&&(q=q||[]).push("style",x);var ct=q;(h.updateQueue=ct)&&(h.flags|=4)}},t8=function(u,h,x,E){x!==E&&(h.flags|=4)};function qp(u,h){if(!yt)switch(u.tailMode){case"hidden":h=u.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?u.tail=null:x.sibling=null;break;case"collapsed":x=u.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:E.sibling=null}}function Ja(u){var h=u.alternate!==null&&u.alternate.child===u.child,x=0,E=0;if(h)for(var j=u.child;j!==null;)x|=j.lanes|j.childLanes,E|=j.subtreeFlags&14680064,E|=j.flags&14680064,j.return=u,j=j.sibling;else for(j=u.child;j!==null;)x|=j.lanes|j.childLanes,E|=j.subtreeFlags,E|=j.flags,j.return=u,j=j.sibling;return u.subtreeFlags|=E,u.childLanes=x,h}function fD(u,h,x){var E=h.pendingProps;switch(nt(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ja(h),null;case 1:return Ya(h.type)&&Ah(),Ja(h),null;case 3:return E=h.stateNode,Il(),Rn(Xa),Rn(Gs),zp(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(u===null||u.child===null)&&(Ii(h)?h.flags|=4:u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,wt!==null&&(Ty(wt),wt=null))),gy(u,h),Ja(h),null;case 5:Vp(h);var j=cc($c.current);if(x=h.type,u!==null&&h.stateNode!=null)e8(u,h,x,E,j),u.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!E){if(h.stateNode===null)throw Error(r(166));return Ja(h),null}if(u=cc(Rs.current),Ii(h)){E=h.stateNode,x=h.type;var q=h.memoizedProps;switch(E[Al]=h,E[Id]=q,u=(h.mode&1)!==0,x){case"dialog":zn("cancel",E),zn("close",E);break;case"iframe":case"object":case"embed":zn("load",E);break;case"video":case"audio":for(j=0;j<Vc.length;j++)zn(Vc[j],E);break;case"source":zn("error",E);break;case"img":case"image":case"link":zn("error",E),zn("load",E);break;case"details":zn("toggle",E);break;case"input":ae(E,q),zn("invalid",E);break;case"select":E._wrapperState={wasMultiple:!!q.multiple},zn("invalid",E);break;case"textarea":Pe(E,q),zn("invalid",E)}Yr(x,q),j=null;for(var ce in q)if(q.hasOwnProperty(ce)){var Fe=q[ce];ce==="children"?typeof Fe=="string"?E.textContent!==Fe&&(q.suppressHydrationWarning!==!0&&Nh(E.textContent,Fe,u),j=["children",Fe]):typeof Fe=="number"&&E.textContent!==""+Fe&&(q.suppressHydrationWarning!==!0&&Nh(E.textContent,Fe,u),j=["children",""+Fe]):i.hasOwnProperty(ce)&&Fe!=null&&ce==="onScroll"&&zn("scroll",E)}switch(x){case"input":Le(E),it(E,q,!0);break;case"textarea":Le(E),ot(E);break;case"select":case"option":break;default:typeof q.onClick=="function"&&(E.onclick=Ad)}E=j,h.updateQueue=E,E!==null&&(h.flags|=4)}else{ce=j.nodeType===9?j:j.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=We(x)),u==="http://www.w3.org/1999/xhtml"?x==="script"?(u=ce.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof E.is=="string"?u=ce.createElement(x,{is:E.is}):(u=ce.createElement(x),x==="select"&&(ce=u,E.multiple?ce.multiple=!0:E.size&&(ce.size=E.size))):u=ce.createElementNS(u,x),u[Al]=h,u[Id]=E,Z_(u,h,!1,!1),h.stateNode=u;e:{switch(ce=Ve(x,E),x){case"dialog":zn("cancel",u),zn("close",u),j=E;break;case"iframe":case"object":case"embed":zn("load",u),j=E;break;case"video":case"audio":for(j=0;j<Vc.length;j++)zn(Vc[j],u);j=E;break;case"source":zn("error",u),j=E;break;case"img":case"image":case"link":zn("error",u),zn("load",u),j=E;break;case"details":zn("toggle",u),j=E;break;case"input":ae(u,E),j=Re(u,E),zn("invalid",u);break;case"option":j=E;break;case"select":u._wrapperState={wasMultiple:!!E.multiple},j=ne({},E,{value:void 0}),zn("invalid",u);break;case"textarea":Pe(u,E),j=Tt(u,E),zn("invalid",u);break;default:j=E}Yr(x,j),Fe=j;for(q in Fe)if(Fe.hasOwnProperty(q)){var Me=Fe[q];q==="style"?Ut(u,Me):q==="dangerouslySetInnerHTML"?(Me=Me?Me.__html:void 0,Me!=null&&Pt(u,Me)):q==="children"?typeof Me=="string"?(x!=="textarea"||Me!=="")&&mt(u,Me):typeof Me=="number"&&mt(u,""+Me):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(i.hasOwnProperty(q)?Me!=null&&q==="onScroll"&&zn("scroll",u):Me!=null&&P(u,q,Me,ce))}switch(x){case"input":Le(u),it(u,E,!1);break;case"textarea":Le(u),ot(u);break;case"option":E.value!=null&&u.setAttribute("value",""+fe(E.value));break;case"select":u.multiple=!!E.multiple,q=E.value,q!=null?Ge(u,!!E.multiple,q,!1):E.defaultValue!=null&&Ge(u,!!E.multiple,E.defaultValue,!0);break;default:typeof j.onClick=="function"&&(u.onclick=Ad)}switch(x){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}}E&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Ja(h),null;case 6:if(u&&h.stateNode!=null)t8(u,h,u.memoizedProps,E);else{if(typeof E!="string"&&h.stateNode===null)throw Error(r(166));if(x=cc($c.current),cc(Rs.current),Ii(h)){if(E=h.stateNode,x=h.memoizedProps,E[Al]=h,(q=E.nodeValue!==x)&&(u=ft,u!==null))switch(u.tag){case 3:Nh(E.nodeValue,x,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&Nh(E.nodeValue,x,(u.mode&1)!==0)}q&&(h.flags|=4)}else E=(x.nodeType===9?x:x.ownerDocument).createTextNode(E),E[Al]=h,h.stateNode=E}return Ja(h),null;case 13:if(Rn(li),E=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(yt&&ht!==null&&(h.mode&1)!==0&&(h.flags&128)===0)Vr(),rr(),h.flags|=98560,q=!1;else if(q=Ii(h),E!==null&&E.dehydrated!==null){if(u===null){if(!q)throw Error(r(318));if(q=h.memoizedState,q=q!==null?q.dehydrated:null,!q)throw Error(r(317));q[Al]=h}else rr(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Ja(h),q=!1}else wt!==null&&(Ty(wt),wt=null),q=!0;if(!q)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=x,h):(E=E!==null,E!==(u!==null&&u.memoizedState!==null)&&E&&(h.child.flags|=8192,(h.mode&1)!==0&&(u===null||(li.current&1)!==0?Xs===0&&(Xs=3):Iy())),h.updateQueue!==null&&(h.flags|=4),Ja(h),null);case 4:return Il(),gy(u,h),u===null&&Nu(h.stateNode.containerInfo),Ja(h),null;case 10:return mi(h.type._context),Ja(h),null;case 17:return Ya(h.type)&&Ah(),Ja(h),null;case 19:if(Rn(li),q=h.memoizedState,q===null)return Ja(h),null;if(E=(h.flags&128)!==0,ce=q.rendering,ce===null)if(E)qp(q,!1);else{if(Xs!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(ce=sl(u),ce!==null){for(h.flags|=128,qp(q,!1),E=ce.updateQueue,E!==null&&(h.updateQueue=E,h.flags|=4),h.subtreeFlags=0,E=x,x=h.child;x!==null;)q=x,u=E,q.flags&=14680066,ce=q.alternate,ce===null?(q.childLanes=0,q.lanes=u,q.child=null,q.subtreeFlags=0,q.memoizedProps=null,q.memoizedState=null,q.updateQueue=null,q.dependencies=null,q.stateNode=null):(q.childLanes=ce.childLanes,q.lanes=ce.lanes,q.child=ce.child,q.subtreeFlags=0,q.deletions=null,q.memoizedProps=ce.memoizedProps,q.memoizedState=ce.memoizedState,q.updateQueue=ce.updateQueue,q.type=ce.type,u=ce.dependencies,q.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),x=x.sibling;return Mn(li,li.current&1|2),h.child}u=u.sibling}q.tail!==null&&At()>zh&&(h.flags|=128,E=!0,qp(q,!1),h.lanes=4194304)}else{if(!E)if(u=sl(ce),u!==null){if(h.flags|=128,E=!0,x=u.updateQueue,x!==null&&(h.updateQueue=x,h.flags|=4),qp(q,!0),q.tail===null&&q.tailMode==="hidden"&&!ce.alternate&&!yt)return Ja(h),null}else 2*At()-q.renderingStartTime>zh&&x!==1073741824&&(h.flags|=128,E=!0,qp(q,!1),h.lanes=4194304);q.isBackwards?(ce.sibling=h.child,h.child=ce):(x=q.last,x!==null?x.sibling=ce:h.child=ce,q.last=ce)}return q.tail!==null?(h=q.tail,q.rendering=h,q.tail=h.sibling,q.renderingStartTime=At(),h.sibling=null,x=li.current,Mn(li,E?x&1|2:x&1),h):(Ja(h),null);case 22:case 23:return Ay(),E=h.memoizedState!==null,u!==null&&u.memoizedState!==null!==E&&(h.flags|=8192),E&&(h.mode&1)!==0?(ll&1073741824)!==0&&(Ja(h),h.subtreeFlags&6&&(h.flags|=8192)):Ja(h),null;case 24:return null;case 25:return null}throw Error(r(156,h.tag))}function hD(u,h){switch(nt(h),h.tag){case 1:return Ya(h.type)&&Ah(),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return Il(),Rn(Xa),Rn(Gs),zp(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 5:return Vp(h),null;case 13:if(Rn(li),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(r(340));rr()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return Rn(li),null;case 4:return Il(),null;case 10:return mi(h.type._context),null;case 22:case 23:return Ay(),null;case 24:return null;default:return null}}var E2=!1,Za=!1,pD=typeof WeakSet=="function"?WeakSet:Set,ir=null;function Vh(u,h){var x=u.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(E){es(u,h,E)}else x.current=null}function xy(u,h,x){try{x()}catch(E){es(u,h,E)}}var r8=!1;function mD(u,h){if(J0=_l,u=Cp(),_h(u)){if("selectionStart"in u)var x={start:u.selectionStart,end:u.selectionEnd};else e:{x=(x=u.ownerDocument)&&x.defaultView||window;var E=x.getSelection&&x.getSelection();if(E&&E.rangeCount!==0){x=E.anchorNode;var j=E.anchorOffset,q=E.focusNode;E=E.focusOffset;try{x.nodeType,q.nodeType}catch{x=null;break e}var ce=0,Fe=-1,Me=-1,ct=0,Rt=0,jt=u,It=null;t:for(;;){for(var Qt;jt!==x||j!==0&&jt.nodeType!==3||(Fe=ce+j),jt!==q||E!==0&&jt.nodeType!==3||(Me=ce+E),jt.nodeType===3&&(ce+=jt.nodeValue.length),(Qt=jt.firstChild)!==null;)It=jt,jt=Qt;for(;;){if(jt===u)break t;if(It===x&&++ct===j&&(Fe=ce),It===q&&++Rt===E&&(Me=ce),(Qt=jt.nextSibling)!==null)break;jt=It,It=jt.parentNode}jt=Qt}x=Fe===-1||Me===-1?null:{start:Fe,end:Me}}else x=null}x=x||{start:0,end:0}}else x=null;for(Iu={focusedElem:u,selectionRange:x},_l=!1,ir=h;ir!==null;)if(h=ir,u=h.child,(h.subtreeFlags&1028)!==0&&u!==null)u.return=h,ir=u;else for(;ir!==null;){h=ir;try{var cr=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(cr!==null){var pr=cr.memoizedProps,xs=cr.memoizedState,rt=h.stateNode,ze=rt.getSnapshotBeforeUpdate(h.elementType===h.type?pr:fc(h.type,pr),xs);rt.__reactInternalSnapshotBeforeUpdate=ze}break;case 3:var at=h.stateNode.containerInfo;at.nodeType===1?at.textContent="":at.nodeType===9&&at.documentElement&&at.removeChild(at.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Mt){es(h,h.return,Mt)}if(u=h.sibling,u!==null){u.return=h.return,ir=u;break}ir=h.return}return cr=r8,r8=!1,cr}function Wp(u,h,x){var E=h.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var j=E=E.next;do{if((j.tag&u)===u){var q=j.destroy;j.destroy=void 0,q!==void 0&&xy(h,x,q)}j=j.next}while(j!==E)}}function S2(u,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var x=h=h.next;do{if((x.tag&u)===u){var E=x.create;x.destroy=E()}x=x.next}while(x!==h)}}function vy(u){var h=u.ref;if(h!==null){var x=u.stateNode;switch(u.tag){case 5:u=x;break;default:u=x}typeof h=="function"?h(u):h.current=u}}function n8(u){var h=u.alternate;h!==null&&(u.alternate=null,n8(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&(delete h[Al],delete h[Id],delete h[Ka],delete h[ry],delete h[ny])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function i8(u){return u.tag===5||u.tag===3||u.tag===4}function s8(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||i8(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function yy(u,h,x){var E=u.tag;if(E===5||E===6)u=u.stateNode,h?x.nodeType===8?x.parentNode.insertBefore(u,h):x.insertBefore(u,h):(x.nodeType===8?(h=x.parentNode,h.insertBefore(u,x)):(h=x,h.appendChild(u)),x=x._reactRootContainer,x!=null||h.onclick!==null||(h.onclick=Ad));else if(E!==4&&(u=u.child,u!==null))for(yy(u,h,x),u=u.sibling;u!==null;)yy(u,h,x),u=u.sibling}function wy(u,h,x){var E=u.tag;if(E===5||E===6)u=u.stateNode,h?x.insertBefore(u,h):x.appendChild(u);else if(E!==4&&(u=u.child,u!==null))for(wy(u,h,x),u=u.sibling;u!==null;)wy(u,h,x),u=u.sibling}var Ta=null,hc=!1;function Od(u,h,x){for(x=x.child;x!==null;)a8(u,h,x),x=x.sibling}function a8(u,h,x){if(fi&&typeof fi.onCommitFiberUnmount=="function")try{fi.onCommitFiberUnmount(ra,x)}catch{}switch(x.tag){case 5:Za||Vh(x,h);case 6:var E=Ta,j=hc;Ta=null,Od(u,h,x),Ta=E,hc=j,Ta!==null&&(hc?(u=Ta,x=x.stateNode,u.nodeType===8?u.parentNode.removeChild(x):u.removeChild(x)):Ta.removeChild(x.stateNode));break;case 18:Ta!==null&&(hc?(u=Ta,x=x.stateNode,u.nodeType===8?Op(u.parentNode,x):u.nodeType===1&&Op(u,x),na(u)):Op(Ta,x.stateNode));break;case 4:E=Ta,j=hc,Ta=x.stateNode.containerInfo,hc=!0,Od(u,h,x),Ta=E,hc=j;break;case 0:case 11:case 14:case 15:if(!Za&&(E=x.updateQueue,E!==null&&(E=E.lastEffect,E!==null))){j=E=E.next;do{var q=j,ce=q.destroy;q=q.tag,ce!==void 0&&((q&2)!==0||(q&4)!==0)&&xy(x,h,ce),j=j.next}while(j!==E)}Od(u,h,x);break;case 1:if(!Za&&(Vh(x,h),E=x.stateNode,typeof E.componentWillUnmount=="function"))try{E.props=x.memoizedProps,E.state=x.memoizedState,E.componentWillUnmount()}catch(Fe){es(x,h,Fe)}Od(u,h,x);break;case 21:Od(u,h,x);break;case 22:x.mode&1?(Za=(E=Za)||x.memoizedState!==null,Od(u,h,x),Za=E):Od(u,h,x);break;default:Od(u,h,x)}}function o8(u){var h=u.updateQueue;if(h!==null){u.updateQueue=null;var x=u.stateNode;x===null&&(x=u.stateNode=new pD),h.forEach(function(E){var j=ED.bind(null,u,E);x.has(E)||(x.add(E),E.then(j,j))})}}function pc(u,h){var x=h.deletions;if(x!==null)for(var E=0;E<x.length;E++){var j=x[E];try{var q=u,ce=h,Fe=ce;e:for(;Fe!==null;){switch(Fe.tag){case 5:Ta=Fe.stateNode,hc=!1;break e;case 3:Ta=Fe.stateNode.containerInfo,hc=!0;break e;case 4:Ta=Fe.stateNode.containerInfo,hc=!0;break e}Fe=Fe.return}if(Ta===null)throw Error(r(160));a8(q,ce,j),Ta=null,hc=!1;var Me=j.alternate;Me!==null&&(Me.return=null),j.return=null}catch(ct){es(j,h,ct)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)l8(h,u),h=h.sibling}function l8(u,h){var x=u.alternate,E=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(pc(h,u),qc(u),E&4){try{Wp(3,u,u.return),S2(3,u)}catch(pr){es(u,u.return,pr)}try{Wp(5,u,u.return)}catch(pr){es(u,u.return,pr)}}break;case 1:pc(h,u),qc(u),E&512&&x!==null&&Vh(x,x.return);break;case 5:if(pc(h,u),qc(u),E&512&&x!==null&&Vh(x,x.return),u.flags&32){var j=u.stateNode;try{mt(j,"")}catch(pr){es(u,u.return,pr)}}if(E&4&&(j=u.stateNode,j!=null)){var q=u.memoizedProps,ce=x!==null?x.memoizedProps:q,Fe=u.type,Me=u.updateQueue;if(u.updateQueue=null,Me!==null)try{Fe==="input"&&q.type==="radio"&&q.name!=null&&$e(j,q),Ve(Fe,ce);var ct=Ve(Fe,q);for(ce=0;ce<Me.length;ce+=2){var Rt=Me[ce],jt=Me[ce+1];Rt==="style"?Ut(j,jt):Rt==="dangerouslySetInnerHTML"?Pt(j,jt):Rt==="children"?mt(j,jt):P(j,Rt,jt,ct)}switch(Fe){case"input":qe(j,q);break;case"textarea":Ke(j,q);break;case"select":var It=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!q.multiple;var Qt=q.value;Qt!=null?Ge(j,!!q.multiple,Qt,!1):It!==!!q.multiple&&(q.defaultValue!=null?Ge(j,!!q.multiple,q.defaultValue,!0):Ge(j,!!q.multiple,q.multiple?[]:"",!1))}j[Id]=q}catch(pr){es(u,u.return,pr)}}break;case 6:if(pc(h,u),qc(u),E&4){if(u.stateNode===null)throw Error(r(162));j=u.stateNode,q=u.memoizedProps;try{j.nodeValue=q}catch(pr){es(u,u.return,pr)}}break;case 3:if(pc(h,u),qc(u),E&4&&x!==null&&x.memoizedState.isDehydrated)try{na(h.containerInfo)}catch(pr){es(u,u.return,pr)}break;case 4:pc(h,u),qc(u);break;case 13:pc(h,u),qc(u),j=u.child,j.flags&8192&&(q=j.memoizedState!==null,j.stateNode.isHidden=q,!q||j.alternate!==null&&j.alternate.memoizedState!==null||(ky=At())),E&4&&o8(u);break;case 22:if(Rt=x!==null&&x.memoizedState!==null,u.mode&1?(Za=(ct=Za)||Rt,pc(h,u),Za=ct):pc(h,u),qc(u),E&8192){if(ct=u.memoizedState!==null,(u.stateNode.isHidden=ct)&&!Rt&&(u.mode&1)!==0)for(ir=u,Rt=u.child;Rt!==null;){for(jt=ir=Rt;ir!==null;){switch(It=ir,Qt=It.child,It.tag){case 0:case 11:case 14:case 15:Wp(4,It,It.return);break;case 1:Vh(It,It.return);var cr=It.stateNode;if(typeof cr.componentWillUnmount=="function"){E=It,x=It.return;try{h=E,cr.props=h.memoizedProps,cr.state=h.memoizedState,cr.componentWillUnmount()}catch(pr){es(E,x,pr)}}break;case 5:Vh(It,It.return);break;case 22:if(It.memoizedState!==null){d8(jt);continue}}Qt!==null?(Qt.return=It,ir=Qt):d8(jt)}Rt=Rt.sibling}e:for(Rt=null,jt=u;;){if(jt.tag===5){if(Rt===null){Rt=jt;try{j=jt.stateNode,ct?(q=j.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none"):(Fe=jt.stateNode,Me=jt.memoizedProps.style,ce=Me!=null&&Me.hasOwnProperty("display")?Me.display:null,Fe.style.display=Kt("display",ce))}catch(pr){es(u,u.return,pr)}}}else if(jt.tag===6){if(Rt===null)try{jt.stateNode.nodeValue=ct?"":jt.memoizedProps}catch(pr){es(u,u.return,pr)}}else if((jt.tag!==22&&jt.tag!==23||jt.memoizedState===null||jt===u)&&jt.child!==null){jt.child.return=jt,jt=jt.child;continue}if(jt===u)break e;for(;jt.sibling===null;){if(jt.return===null||jt.return===u)break e;Rt===jt&&(Rt=null),jt=jt.return}Rt===jt&&(Rt=null),jt.sibling.return=jt.return,jt=jt.sibling}}break;case 19:pc(h,u),qc(u),E&4&&o8(u);break;case 21:break;default:pc(h,u),qc(u)}}function qc(u){var h=u.flags;if(h&2){try{e:{for(var x=u.return;x!==null;){if(i8(x)){var E=x;break e}x=x.return}throw Error(r(160))}switch(E.tag){case 5:var j=E.stateNode;E.flags&32&&(mt(j,""),E.flags&=-33);var q=s8(u);wy(u,q,j);break;case 3:case 4:var ce=E.stateNode.containerInfo,Fe=s8(u);yy(u,Fe,ce);break;default:throw Error(r(161))}}catch(Me){es(u,u.return,Me)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function gD(u,h,x){ir=u,c8(u)}function c8(u,h,x){for(var E=(u.mode&1)!==0;ir!==null;){var j=ir,q=j.child;if(j.tag===22&&E){var ce=j.memoizedState!==null||E2;if(!ce){var Fe=j.alternate,Me=Fe!==null&&Fe.memoizedState!==null||Za;Fe=E2;var ct=Za;if(E2=ce,(Za=Me)&&!ct)for(ir=j;ir!==null;)ce=ir,Me=ce.child,ce.tag===22&&ce.memoizedState!==null?f8(j):Me!==null?(Me.return=ce,ir=Me):f8(j);for(;q!==null;)ir=q,c8(q),q=q.sibling;ir=j,E2=Fe,Za=ct}u8(u)}else(j.subtreeFlags&8772)!==0&&q!==null?(q.return=j,ir=q):u8(u)}}function u8(u){for(;ir!==null;){var h=ir;if((h.flags&8772)!==0){var x=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:Za||S2(5,h);break;case 1:var E=h.stateNode;if(h.flags&4&&!Za)if(x===null)E.componentDidMount();else{var j=h.elementType===h.type?x.memoizedProps:fc(h.type,x.memoizedProps);E.componentDidUpdate(j,x.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var q=h.updateQueue;q!==null&&jo(h,q,E);break;case 3:var ce=h.updateQueue;if(ce!==null){if(x=null,h.child!==null)switch(h.child.tag){case 5:x=h.child.stateNode;break;case 1:x=h.child.stateNode}jo(h,ce,x)}break;case 5:var Fe=h.stateNode;if(x===null&&h.flags&4){x=Fe;var Me=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":Me.autoFocus&&x.focus();break;case"img":Me.src&&(x.src=Me.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var ct=h.alternate;if(ct!==null){var Rt=ct.memoizedState;if(Rt!==null){var jt=Rt.dehydrated;jt!==null&&na(jt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Za||h.flags&512&&vy(h)}catch(It){es(h,h.return,It)}}if(h===u){ir=null;break}if(x=h.sibling,x!==null){x.return=h.return,ir=x;break}ir=h.return}}function d8(u){for(;ir!==null;){var h=ir;if(h===u){ir=null;break}var x=h.sibling;if(x!==null){x.return=h.return,ir=x;break}ir=h.return}}function f8(u){for(;ir!==null;){var h=ir;try{switch(h.tag){case 0:case 11:case 15:var x=h.return;try{S2(4,h)}catch(Me){es(h,x,Me)}break;case 1:var E=h.stateNode;if(typeof E.componentDidMount=="function"){var j=h.return;try{E.componentDidMount()}catch(Me){es(h,j,Me)}}var q=h.return;try{vy(h)}catch(Me){es(h,q,Me)}break;case 5:var ce=h.return;try{vy(h)}catch(Me){es(h,ce,Me)}}}catch(Me){es(h,h.return,Me)}if(h===u){ir=null;break}var Fe=h.sibling;if(Fe!==null){Fe.return=h.return,ir=Fe;break}ir=h.return}}var xD=Math.ceil,C2=V.ReactCurrentDispatcher,by=V.ReactCurrentOwner,Fl=V.ReactCurrentBatchConfig,kn=0,ca=null,Fs=null,Na=0,ll=0,Uh=nl(0),Xs=0,Gp=null,sf=0,T2=0,_y=0,Kp=null,Oo=null,ky=0,zh=1/0,Du=null,N2=!1,Ey=null,Md=null,A2=!1,Bd=null,I2=0,Xp=0,Sy=null,P2=-1,R2=0;function _o(){return(kn&6)!==0?At():P2!==-1?P2:P2=At()}function Vd(u){return(u.mode&1)===0?1:(kn&2)!==0&&Na!==0?Na&-Na:Ui.transition!==null?(R2===0&&(R2=rc()),R2):(u=Kr,u!==0||(u=window.event,u=u===void 0?16:El(u.type)),u)}function mc(u,h,x,E){if(50<Xp)throw Xp=0,Sy=null,Error(r(185));bl(u,x,E),((kn&2)===0||u!==ca)&&(u===ca&&((kn&2)===0&&(T2|=x),Xs===4&&Ud(u,Na)),Mo(u,E),x===1&&kn===0&&(h.mode&1)===0&&(zh=At()+500,ef&&K()))}function Mo(u,h){var x=u.callbackNode;Pn(u,h);var E=Vs(u,u===ca?Na:0);if(E===0)x!==null&&Ot(x),u.callbackNode=null,u.callbackPriority=0;else if(h=E&-E,u.callbackPriority!==h){if(x!=null&&Ot(x),h===1)u.tag===0?U(p8.bind(null,u)):S(p8.bind(null,u)),ey(function(){(kn&6)===0&&K()}),x=null;else{switch(ya(E)){case 1:x=fn;break;case 4:x=Mr;break;case 16:x=gn;break;case 536870912:x=Oa;break;default:x=gn}x=_8(x,h8.bind(null,u))}u.callbackPriority=h,u.callbackNode=x}}function h8(u,h){if(P2=-1,R2=0,(kn&6)!==0)throw Error(r(327));var x=u.callbackNode;if($h()&&u.callbackNode!==x)return null;var E=Vs(u,u===ca?Na:0);if(E===0)return null;if((E&30)!==0||(E&u.expiredLanes)!==0||h)h=F2(u,E);else{h=E;var j=kn;kn|=2;var q=g8();(ca!==u||Na!==h)&&(Du=null,zh=At()+500,of(u,h));do try{wD();break}catch(Fe){m8(u,Fe)}while(!0);bn(),C2.current=q,kn=j,Fs!==null?h=0:(ca=null,Na=0,h=Xs)}if(h!==0){if(h===2&&(j=Us(u),j!==0&&(E=j,h=Cy(u,j))),h===1)throw x=Gp,of(u,0),Ud(u,E),Mo(u,At()),x;if(h===6)Ud(u,E);else{if(j=u.current.alternate,(E&30)===0&&!vD(j)&&(h=F2(u,E),h===2&&(q=Us(u),q!==0&&(E=q,h=Cy(u,q))),h===1))throw x=Gp,of(u,0),Ud(u,E),Mo(u,At()),x;switch(u.finishedWork=j,u.finishedLanes=E,h){case 0:case 1:throw Error(r(345));case 2:lf(u,Oo,Du);break;case 3:if(Ud(u,E),(E&130023424)===E&&(h=ky+500-At(),10<h)){if(Vs(u,0)!==0)break;if(j=u.suspendedLanes,(j&E)!==E){_o(),u.pingedLanes|=u.suspendedLanes&j;break}u.timeoutHandle=Dp(lf.bind(null,u,Oo,Du),h);break}lf(u,Oo,Du);break;case 4:if(Ud(u,E),(E&4194240)===E)break;for(h=u.eventTimes,j=-1;0<E;){var ce=31-Tn(E);q=1<<ce,ce=h[ce],ce>j&&(j=ce),E&=~q}if(E=j,E=At()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*xD(E/1960))-E,10<E){u.timeoutHandle=Dp(lf.bind(null,u,Oo,Du),E);break}lf(u,Oo,Du);break;case 5:lf(u,Oo,Du);break;default:throw Error(r(329))}}}return Mo(u,At()),u.callbackNode===x?h8.bind(null,u):null}function Cy(u,h){var x=Kp;return u.current.memoizedState.isDehydrated&&(of(u,h).flags|=256),u=F2(u,h),u!==2&&(h=Oo,Oo=x,h!==null&&Ty(h)),u}function Ty(u){Oo===null?Oo=u:Oo.push.apply(Oo,u)}function vD(u){for(var h=u;;){if(h.flags&16384){var x=h.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var E=0;E<x.length;E++){var j=x[E],q=j.getSnapshot;j=j.value;try{if(!ps(q(),j))return!1}catch{return!1}}}if(x=h.child,h.subtreeFlags&16384&&x!==null)x.return=h,h=x;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ud(u,h){for(h&=~_y,h&=~T2,u.suspendedLanes|=h,u.pingedLanes&=~h,u=u.expirationTimes;0<h;){var x=31-Tn(h),E=1<<x;u[x]=-1,h&=~E}}function p8(u){if((kn&6)!==0)throw Error(r(327));$h();var h=Vs(u,0);if((h&1)===0)return Mo(u,At()),null;var x=F2(u,h);if(u.tag!==0&&x===2){var E=Us(u);E!==0&&(h=E,x=Cy(u,E))}if(x===1)throw x=Gp,of(u,0),Ud(u,h),Mo(u,At()),x;if(x===6)throw Error(r(345));return u.finishedWork=u.current.alternate,u.finishedLanes=h,lf(u,Oo,Du),Mo(u,At()),null}function Ny(u,h){var x=kn;kn|=1;try{return u(h)}finally{kn=x,kn===0&&(zh=At()+500,ef&&K())}}function af(u){Bd!==null&&Bd.tag===0&&(kn&6)===0&&$h();var h=kn;kn|=1;var x=Fl.transition,E=Kr;try{if(Fl.transition=null,Kr=1,u)return u()}finally{Kr=E,Fl.transition=x,kn=h,(kn&6)===0&&K()}}function Ay(){ll=Uh.current,Rn(Uh)}function of(u,h){u.finishedWork=null,u.finishedLanes=0;var x=u.timeoutHandle;if(x!==-1&&(u.timeoutHandle=-1,d2(x)),Fs!==null)for(x=Fs.return;x!==null;){var E=x;switch(nt(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&Ah();break;case 3:Il(),Rn(Xa),Rn(Gs),zp();break;case 5:Vp(E);break;case 4:Il();break;case 13:Rn(li);break;case 19:Rn(li);break;case 10:mi(E.type._context);break;case 22:case 23:Ay()}x=x.return}if(ca=u,Fs=u=zd(u.current,null),Na=ll=h,Xs=0,Gp=null,_y=T2=sf=0,Oo=Kp=null,$n!==null){for(h=0;h<$n.length;h++)if(x=$n[h],E=x.interleaved,E!==null){x.interleaved=null;var j=E.next,q=x.pending;if(q!==null){var ce=q.next;q.next=j,E.next=ce}x.pending=E}$n=null}return u}function m8(u,h){do{var x=Fs;try{if(bn(),Ih.current=w2,Ld){for(var E=gi.memoizedState;E!==null;){var j=E.queue;j!==null&&(j.pending=null),E=E.next}Ld=!1}if(Pl=0,qi=Zi=gi=null,uc=!1,jd=0,by.current=null,x===null||x.return===null){Xs=1,Gp=h,Fs=null;break}e:{var q=u,ce=x.return,Fe=x,Me=h;if(h=Na,Fe.flags|=32768,Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var ct=Me,Rt=Fe,jt=Rt.tag;if((Rt.mode&1)===0&&(jt===0||jt===11||jt===15)){var It=Rt.alternate;It?(Rt.updateQueue=It.updateQueue,Rt.memoizedState=It.memoizedState,Rt.lanes=It.lanes):(Rt.updateQueue=null,Rt.memoizedState=null)}var Qt=V_(ce);if(Qt!==null){Qt.flags&=-257,U_(Qt,ce,Fe,q,h),Qt.mode&1&&B_(q,ct,h),h=Qt,Me=ct;var cr=h.updateQueue;if(cr===null){var pr=new Set;pr.add(Me),h.updateQueue=pr}else cr.add(Me);break e}else{if((h&1)===0){B_(q,ct,h),Iy();break e}Me=Error(r(426))}}else if(yt&&Fe.mode&1){var xs=V_(ce);if(xs!==null){(xs.flags&65536)===0&&(xs.flags|=256),U_(xs,ce,Fe,q,h),Ht(Bh(Me,Fe));break e}}q=Me=Bh(Me,Fe),Xs!==4&&(Xs=2),Kp===null?Kp=[q]:Kp.push(q),q=ce;do{switch(q.tag){case 3:q.flags|=65536,h&=-h,q.lanes|=h;var rt=O_(q,Me,h);qn(q,rt);break e;case 1:Fe=Me;var ze=q.type,at=q.stateNode;if((q.flags&128)===0&&(typeof ze.getDerivedStateFromError=="function"||at!==null&&typeof at.componentDidCatch=="function"&&(Md===null||!Md.has(at)))){q.flags|=65536,h&=-h,q.lanes|=h;var Mt=M_(q,Fe,h);qn(q,Mt);break e}}q=q.return}while(q!==null)}v8(x)}catch(gr){h=gr,Fs===x&&x!==null&&(Fs=x=x.return);continue}break}while(!0)}function g8(){var u=C2.current;return C2.current=w2,u===null?w2:u}function Iy(){(Xs===0||Xs===3||Xs===2)&&(Xs=4),ca===null||(sf&268435455)===0&&(T2&268435455)===0||Ud(ca,Na)}function F2(u,h){var x=kn;kn|=2;var E=g8();(ca!==u||Na!==h)&&(Du=null,of(u,h));do try{yD();break}catch(j){m8(u,j)}while(!0);if(bn(),kn=x,C2.current=E,Fs!==null)throw Error(r(261));return ca=null,Na=0,Xs}function yD(){for(;Fs!==null;)x8(Fs)}function wD(){for(;Fs!==null&&!Wt();)x8(Fs)}function x8(u){var h=b8(u.alternate,u,ll);u.memoizedProps=u.pendingProps,h===null?v8(u):Fs=h,by.current=null}function v8(u){var h=u;do{var x=h.alternate;if(u=h.return,(h.flags&32768)===0){if(x=fD(x,h,ll),x!==null){Fs=x;return}}else{if(x=hD(x,h),x!==null){x.flags&=32767,Fs=x;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Xs=6,Fs=null;return}}if(h=h.sibling,h!==null){Fs=h;return}Fs=h=u}while(h!==null);Xs===0&&(Xs=5)}function lf(u,h,x){var E=Kr,j=Fl.transition;try{Fl.transition=null,Kr=1,bD(u,h,x,E)}finally{Fl.transition=j,Kr=E}return null}function bD(u,h,x,E){do $h();while(Bd!==null);if((kn&6)!==0)throw Error(r(327));x=u.finishedWork;var j=u.finishedLanes;if(x===null)return null;if(u.finishedWork=null,u.finishedLanes=0,x===u.current)throw Error(r(177));u.callbackNode=null,u.callbackPriority=0;var q=x.lanes|x.childLanes;if(tn(u,q),u===ca&&(Fs=ca=null,Na=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||A2||(A2=!0,_8(gn,function(){return $h(),null})),q=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||q){q=Fl.transition,Fl.transition=null;var ce=Kr;Kr=1;var Fe=kn;kn|=4,by.current=null,mD(u,x),l8(x,u),a2(Iu),_l=!!J0,Iu=J0=null,u.current=x,gD(x),Dt(),kn=Fe,Kr=ce,Fl.transition=q}else u.current=x;if(A2&&(A2=!1,Bd=u,I2=j),q=u.pendingLanes,q===0&&(Md=null),Ko(x.stateNode),Mo(u,At()),h!==null)for(E=u.onRecoverableError,x=0;x<h.length;x++)j=h[x],E(j.value,{componentStack:j.stack,digest:j.digest});if(N2)throw N2=!1,u=Ey,Ey=null,u;return(I2&1)!==0&&u.tag!==0&&$h(),q=u.pendingLanes,(q&1)!==0?u===Sy?Xp++:(Xp=0,Sy=u):Xp=0,K(),null}function $h(){if(Bd!==null){var u=ya(I2),h=Fl.transition,x=Kr;try{if(Fl.transition=null,Kr=16>u?16:u,Bd===null)var E=!1;else{if(u=Bd,Bd=null,I2=0,(kn&6)!==0)throw Error(r(331));var j=kn;for(kn|=4,ir=u.current;ir!==null;){var q=ir,ce=q.child;if((ir.flags&16)!==0){var Fe=q.deletions;if(Fe!==null){for(var Me=0;Me<Fe.length;Me++){var ct=Fe[Me];for(ir=ct;ir!==null;){var Rt=ir;switch(Rt.tag){case 0:case 11:case 15:Wp(8,Rt,q)}var jt=Rt.child;if(jt!==null)jt.return=Rt,ir=jt;else for(;ir!==null;){Rt=ir;var It=Rt.sibling,Qt=Rt.return;if(n8(Rt),Rt===ct){ir=null;break}if(It!==null){It.return=Qt,ir=It;break}ir=Qt}}}var cr=q.alternate;if(cr!==null){var pr=cr.child;if(pr!==null){cr.child=null;do{var xs=pr.sibling;pr.sibling=null,pr=xs}while(pr!==null)}}ir=q}}if((q.subtreeFlags&2064)!==0&&ce!==null)ce.return=q,ir=ce;else e:for(;ir!==null;){if(q=ir,(q.flags&2048)!==0)switch(q.tag){case 0:case 11:case 15:Wp(9,q,q.return)}var rt=q.sibling;if(rt!==null){rt.return=q.return,ir=rt;break e}ir=q.return}}var ze=u.current;for(ir=ze;ir!==null;){ce=ir;var at=ce.child;if((ce.subtreeFlags&2064)!==0&&at!==null)at.return=ce,ir=at;else e:for(ce=ze;ir!==null;){if(Fe=ir,(Fe.flags&2048)!==0)try{switch(Fe.tag){case 0:case 11:case 15:S2(9,Fe)}}catch(gr){es(Fe,Fe.return,gr)}if(Fe===ce){ir=null;break e}var Mt=Fe.sibling;if(Mt!==null){Mt.return=Fe.return,ir=Mt;break e}ir=Fe.return}}if(kn=j,K(),fi&&typeof fi.onPostCommitFiberRoot=="function")try{fi.onPostCommitFiberRoot(ra,u)}catch{}E=!0}return E}finally{Kr=x,Fl.transition=h}}return!1}function y8(u,h,x){h=Bh(x,h),h=O_(u,h,1),u=$i(u,h,1),h=_o(),u!==null&&(bl(u,1,h),Mo(u,h))}function es(u,h,x){if(u.tag===3)y8(u,u,x);else for(;h!==null;){if(h.tag===3){y8(h,u,x);break}else if(h.tag===1){var E=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Md===null||!Md.has(E))){u=Bh(x,u),u=M_(h,u,1),h=$i(h,u,1),u=_o(),h!==null&&(bl(h,1,u),Mo(h,u));break}}h=h.return}}function _D(u,h,x){var E=u.pingCache;E!==null&&E.delete(h),h=_o(),u.pingedLanes|=u.suspendedLanes&x,ca===u&&(Na&x)===x&&(Xs===4||Xs===3&&(Na&130023424)===Na&&500>At()-ky?of(u,0):_y|=x),Mo(u,h)}function w8(u,h){h===0&&((u.mode&1)===0?h=1:(h=Ma,Ma<<=1,(Ma&130023424)===0&&(Ma=4194304)));var x=_o();u=Hn(u,h),u!==null&&(bl(u,h,x),Mo(u,x))}function kD(u){var h=u.memoizedState,x=0;h!==null&&(x=h.retryLane),w8(u,x)}function ED(u,h){var x=0;switch(u.tag){case 13:var E=u.stateNode,j=u.memoizedState;j!==null&&(x=j.retryLane);break;case 19:E=u.stateNode;break;default:throw Error(r(314))}E!==null&&E.delete(h),w8(u,x)}var b8;b8=function(u,h,x){if(u!==null)if(u.memoizedProps!==h.pendingProps||Xa.current)Do=!0;else{if((u.lanes&x)===0&&(h.flags&128)===0)return Do=!1,dD(u,h,x);Do=(u.flags&131072)!==0}else Do=!1,yt&&(h.flags&1048576)!==0&&Ye(h,ge,h.index);switch(h.lanes=0,h.tag){case 2:var E=h.type;k2(u,h),u=h.pendingProps;var j=Rd(h,Gs.current);Pi(h,x),j=tf(null,h,E,u,j,x);var q=Rl();return h.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Ya(E)?(q=!0,Fu(h)):q=!1,h.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,Ks(h),j.updater=b2,h.stateNode=j,j._reactInternals=h,oy(h,E,u,x),h=dy(null,h,E,!0,q,x)):(h.tag=0,yt&&q&&pt(h),bo(null,h,j,x),h=h.child),h;case 16:E=h.elementType;e:{switch(k2(u,h),u=h.pendingProps,j=E._init,E=j(E._payload),h.type=E,j=h.tag=CD(E),u=fc(E,u),j){case 0:h=uy(null,h,E,u,x);break e;case 1:h=G_(null,h,E,u,x);break e;case 11:h=z_(null,h,E,u,x);break e;case 14:h=$_(null,h,E,fc(E.type,u),x);break e}throw Error(r(306,E,""))}return h;case 0:return E=h.type,j=h.pendingProps,j=h.elementType===E?j:fc(E,j),uy(u,h,E,j,x);case 1:return E=h.type,j=h.pendingProps,j=h.elementType===E?j:fc(E,j),G_(u,h,E,j,x);case 3:e:{if(K_(h),u===null)throw Error(r(387));E=h.pendingProps,q=h.memoizedState,j=q.element,Qa(u,h),la(h,E,null,x);var ce=h.memoizedState;if(E=ce.element,q.isDehydrated)if(q={element:E,isDehydrated:!1,cache:ce.cache,pendingSuspenseBoundaries:ce.pendingSuspenseBoundaries,transitions:ce.transitions},h.updateQueue.baseState=q,h.memoizedState=q,h.flags&256){j=Bh(Error(r(423)),h),h=X_(u,h,E,x,j);break e}else if(E!==j){j=Bh(Error(r(424)),h),h=X_(u,h,E,x,j);break e}else for(ht=Ca(h.stateNode.containerInfo.firstChild),ft=h,yt=!0,wt=null,x=yi(h,null,E,x),h.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(rr(),E===j){h=ju(u,h,x);break e}bo(u,h,E,x)}h=h.child}return h;case 5:return m2(h),u===null&&ar(h),E=h.type,j=h.pendingProps,q=u!==null?u.memoizedProps:null,ce=j.children,jp(E,j)?ce=null:q!==null&&jp(E,q)&&(h.flags|=32),W_(u,h),bo(u,h,ce,x),h.child;case 6:return u===null&&ar(h),null;case 13:return Y_(u,h,x);case 4:return Fd(h,h.stateNode.containerInfo),E=h.pendingProps,u===null?h.child=Qi(h,null,E,x):bo(u,h,E,x),h.child;case 11:return E=h.type,j=h.pendingProps,j=h.elementType===E?j:fc(E,j),z_(u,h,E,j,x);case 7:return bo(u,h,h.pendingProps,x),h.child;case 8:return bo(u,h,h.pendingProps.children,x),h.child;case 12:return bo(u,h,h.pendingProps.children,x),h.child;case 10:e:{if(E=h.type._context,j=h.pendingProps,q=h.memoizedProps,ce=j.value,Mn(ms,E._currentValue),E._currentValue=ce,q!==null)if(ps(q.value,ce)){if(q.children===j.children&&!Xa.current){h=ju(u,h,x);break e}}else for(q=h.child,q!==null&&(q.return=h);q!==null;){var Fe=q.dependencies;if(Fe!==null){ce=q.child;for(var Me=Fe.firstContext;Me!==null;){if(Me.context===E){if(q.tag===1){Me=zi(-1,x&-x),Me.tag=2;var ct=q.updateQueue;if(ct!==null){ct=ct.shared;var Rt=ct.pending;Rt===null?Me.next=Me:(Me.next=Rt.next,Rt.next=Me),ct.pending=Me}}q.lanes|=x,Me=q.alternate,Me!==null&&(Me.lanes|=x),_n(q.return,x,h),Fe.lanes|=x;break}Me=Me.next}}else if(q.tag===10)ce=q.type===h.type?null:q.child;else if(q.tag===18){if(ce=q.return,ce===null)throw Error(r(341));ce.lanes|=x,Fe=ce.alternate,Fe!==null&&(Fe.lanes|=x),_n(ce,x,h),ce=q.sibling}else ce=q.child;if(ce!==null)ce.return=q;else for(ce=q;ce!==null;){if(ce===h){ce=null;break}if(q=ce.sibling,q!==null){q.return=ce.return,ce=q;break}ce=ce.return}q=ce}bo(u,h,j.children,x),h=h.child}return h;case 9:return j=h.type,E=h.pendingProps.children,Pi(h,x),j=Ri(j),E=E(j),h.flags|=1,bo(u,h,E,x),h.child;case 14:return E=h.type,j=fc(E,h.pendingProps),j=fc(E.type,j),$_(u,h,E,j,x);case 15:return H_(u,h,h.type,h.pendingProps,x);case 17:return E=h.type,j=h.pendingProps,j=h.elementType===E?j:fc(E,j),k2(u,h),h.tag=1,Ya(E)?(u=!0,Fu(h)):u=!1,Pi(h,x),j_(h,E,j),oy(h,E,j,x),dy(null,h,E,!0,u,x);case 19:return J_(u,h,x);case 22:return q_(u,h,x)}throw Error(r(156,h.tag))};function _8(u,h){return kt(u,h)}function SD(u,h,x,E){this.tag=u,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ll(u,h,x,E){return new SD(u,h,x,E)}function Py(u){return u=u.prototype,!(!u||!u.isReactComponent)}function CD(u){if(typeof u=="function")return Py(u)?1:0;if(u!=null){if(u=u.$$typeof,u===F)return 11;if(u===pe)return 14}return 2}function zd(u,h){var x=u.alternate;return x===null?(x=Ll(u.tag,h,u.key,u.mode),x.elementType=u.elementType,x.type=u.type,x.stateNode=u.stateNode,x.alternate=u,u.alternate=x):(x.pendingProps=h,x.type=u.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=u.flags&14680064,x.childLanes=u.childLanes,x.lanes=u.lanes,x.child=u.child,x.memoizedProps=u.memoizedProps,x.memoizedState=u.memoizedState,x.updateQueue=u.updateQueue,h=u.dependencies,x.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},x.sibling=u.sibling,x.index=u.index,x.ref=u.ref,x}function L2(u,h,x,E,j,q){var ce=2;if(E=u,typeof u=="function")Py(u)&&(ce=1);else if(typeof u=="string")ce=5;else e:switch(u){case L:return cf(x.children,j,q,h);case N:ce=8,j|=8;break;case C:return u=Ll(12,x,h,j|2),u.elementType=C,u.lanes=q,u;case B:return u=Ll(13,x,h,j),u.elementType=B,u.lanes=q,u;case te:return u=Ll(19,x,h,j),u.elementType=te,u.lanes=q,u;case ve:return j2(x,j,q,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case R:ce=10;break e;case A:ce=9;break e;case F:ce=11;break e;case pe:ce=14;break e;case Ee:ce=16,E=null;break e}throw Error(r(130,u==null?u:typeof u,""))}return h=Ll(ce,x,h,j),h.elementType=u,h.type=E,h.lanes=q,h}function cf(u,h,x,E){return u=Ll(7,u,E,h),u.lanes=x,u}function j2(u,h,x,E){return u=Ll(22,u,E,h),u.elementType=ve,u.lanes=x,u.stateNode={isHidden:!1},u}function Ry(u,h,x){return u=Ll(6,u,null,h),u.lanes=x,u}function Fy(u,h,x){return h=Ll(4,u.children!==null?u.children:[],u.key,h),h.lanes=x,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function TD(u,h,x,E,j){this.tag=h,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wl(0),this.expirationTimes=wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wl(0),this.identifierPrefix=E,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function Ly(u,h,x,E,j,q,ce,Fe,Me){return u=new TD(u,h,x,Fe,Me),h===1?(h=1,q===!0&&(h|=8)):h=0,q=Ll(3,null,null,h),u.current=q,q.stateNode=u,q.memoizedState={element:E,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ks(q),u}function ND(u,h,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:E==null?null:""+E,children:u,containerInfo:h,implementation:x}}function k8(u){if(!u)return zc;u=u._reactInternals;e:{if(Ie(u)!==u||u.tag!==1)throw Error(r(170));var h=u;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Ya(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(r(171))}if(u.tag===1){var x=u.type;if(Ya(x))return Bp(u,x,h)}return h}function E8(u,h,x,E,j,q,ce,Fe,Me){return u=Ly(x,E,!0,u,j,q,ce,Fe,Me),u.context=k8(null),x=u.current,E=_o(),j=Vd(x),q=zi(E,j),q.callback=h??null,$i(x,q,j),u.current.lanes=j,bl(u,j,E),Mo(u,E),u}function D2(u,h,x,E){var j=h.current,q=_o(),ce=Vd(j);return x=k8(x),h.context===null?h.context=x:h.pendingContext=x,h=zi(q,ce),h.payload={element:u},E=E===void 0?null:E,E!==null&&(h.callback=E),u=$i(j,h,ce),u!==null&&(mc(u,j,ce,q),oa(u,j,ce)),ce}function O2(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function S8(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var x=u.retryLane;u.retryLane=x!==0&&x<h?x:h}}function jy(u,h){S8(u,h),(u=u.alternate)&&S8(u,h)}function AD(){return null}var C8=typeof reportError=="function"?reportError:function(u){console.error(u)};function Dy(u){this._internalRoot=u}M2.prototype.render=Dy.prototype.render=function(u){var h=this._internalRoot;if(h===null)throw Error(r(409));D2(u,h,null,null)},M2.prototype.unmount=Dy.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var h=u.containerInfo;af(function(){D2(null,u,null,null)}),h[sa]=null}};function M2(u){this._internalRoot=u}M2.prototype.unstable_scheduleHydration=function(u){if(u){var h=yd();u={blockedOn:null,target:u,priority:h};for(var x=0;x<Ao.length&&h!==0&&h<Ao[x].priority;x++);Ao.splice(x,0,u),x===0&&bd(u)}};function Oy(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function B2(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function T8(){}function ID(u,h,x,E,j){if(j){if(typeof E=="function"){var q=E;E=function(){var ct=O2(ce);q.call(ct)}}var ce=E8(h,E,u,0,null,!1,!1,"",T8);return u._reactRootContainer=ce,u[sa]=ce.current,Nu(u.nodeType===8?u.parentNode:u),af(),ce}for(;j=u.lastChild;)u.removeChild(j);if(typeof E=="function"){var Fe=E;E=function(){var ct=O2(Me);Fe.call(ct)}}var Me=Ly(u,0,!1,null,null,!1,!1,"",T8);return u._reactRootContainer=Me,u[sa]=Me.current,Nu(u.nodeType===8?u.parentNode:u),af(function(){D2(h,Me,x,E)}),Me}function V2(u,h,x,E,j){var q=x._reactRootContainer;if(q){var ce=q;if(typeof j=="function"){var Fe=j;j=function(){var Me=O2(ce);Fe.call(Me)}}D2(h,ce,u,j)}else ce=ID(x,h,u,j,E);return O2(ce)}Pc=function(u){switch(u.tag){case 3:var h=u.stateNode;if(h.current.memoizedState.isDehydrated){var x=Ba(h.pendingLanes);x!==0&&(Xo(h,x|1),Mo(h,At()),(kn&6)===0&&(zh=At()+500,K()))}break;case 13:af(function(){var E=Hn(u,1);if(E!==null){var j=_o();mc(E,u,1,j)}}),jy(u,1)}},Rc=function(u){if(u.tag===13){var h=Hn(u,134217728);if(h!==null){var x=_o();mc(h,u,134217728,x)}jy(u,134217728)}},vd=function(u){if(u.tag===13){var h=Vd(u),x=Hn(u,h);if(x!==null){var E=_o();mc(x,u,h,E)}jy(u,h)}},yd=function(){return Kr},Fc=function(u,h){var x=Kr;try{return Kr=u,h()}finally{Kr=x}},nr=function(u,h,x){switch(h){case"input":if(qe(u,x),h=x.name,x.type==="radio"&&h!=null){for(x=u;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<x.length;h++){var E=x[h];if(E!==u&&E.form===u.form){var j=Z0(E);if(!j)throw Error(r(90));ee(E),qe(E,j)}}}break;case"textarea":Ke(u,x);break;case"select":h=x.value,h!=null&&Ge(u,!!x.multiple,h,!1)}},qr=Ny,Ln=af;var PD={usingClientEntryPoint:!1,Events:[Pd,Pu,Z0,yr,dn,Ny]},Yp={findFiberByHostInstance:Uc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RD={bundleType:Yp.bundleType,version:Yp.version,rendererPackageName:Yp.rendererPackageName,rendererConfig:Yp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=tt(u),u===null?null:u.stateNode},findFiberByHostInstance:Yp.findFiberByHostInstance||AD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var U2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!U2.isDisabled&&U2.supportsFiber)try{ra=U2.inject(RD),fi=U2}catch{}}return Bo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PD,Bo.createPortal=function(u,h){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Oy(h))throw Error(r(200));return ND(u,h,null,x)},Bo.createRoot=function(u,h){if(!Oy(u))throw Error(r(299));var x=!1,E="",j=C8;return h!=null&&(h.unstable_strictMode===!0&&(x=!0),h.identifierPrefix!==void 0&&(E=h.identifierPrefix),h.onRecoverableError!==void 0&&(j=h.onRecoverableError)),h=Ly(u,1,!1,null,null,x,!1,E,j),u[sa]=h.current,Nu(u.nodeType===8?u.parentNode:u),new Dy(h)},Bo.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=tt(h),u=u===null?null:u.stateNode,u},Bo.flushSync=function(u){return af(u)},Bo.hydrate=function(u,h,x){if(!B2(h))throw Error(r(200));return V2(null,u,h,!0,x)},Bo.hydrateRoot=function(u,h,x){if(!Oy(u))throw Error(r(405));var E=x!=null&&x.hydratedSources||null,j=!1,q="",ce=C8;if(x!=null&&(x.unstable_strictMode===!0&&(j=!0),x.identifierPrefix!==void 0&&(q=x.identifierPrefix),x.onRecoverableError!==void 0&&(ce=x.onRecoverableError)),h=E8(h,null,u,1,x??null,j,!1,q,ce),u[sa]=h.current,Nu(u),E)for(u=0;u<E.length;u++)x=E[u],j=x._getVersion,j=j(x._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[x,j]:h.mutableSourceEagerHydrationData.push(x,j);return new M2(h)},Bo.render=function(u,h,x){if(!B2(h))throw Error(r(200));return V2(null,u,h,!1,x)},Bo.unmountComponentAtNode=function(u){if(!B2(u))throw Error(r(40));return u._reactRootContainer?(af(function(){V2(null,null,u,!1,function(){u._reactRootContainer=null,u[sa]=null})}),!0):!1},Bo.unstable_batchedUpdates=Ny,Bo.unstable_renderSubtreeIntoContainer=function(u,h,x,E){if(!B2(x))throw Error(r(200));if(u==null||u._reactInternals===void 0)throw Error(r(38));return V2(u,h,x,!1,E)},Bo.version="18.3.1-next-f1338f8080-20240426",Bo}var j8;function FC(){if(j8)return Vy.exports;j8=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Vy.exports=VD(),Vy.exports}var D8;function UD(){if(D8)return z2;D8=1;var t=FC();return z2.createRoot=t.createRoot,z2.hydrateRoot=t.hydrateRoot,z2}var zD=UD(),os=FC();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $m(){return $m=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$m.apply(this,arguments)}var i0;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(i0||(i0={}));const O8="popstate";function $D(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:a,hash:o}=n.location;return h3("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Jx(i)}return qD(e,r,null,t)}function Es(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function LC(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HD(){return Math.random().toString(36).substr(2,8)}function M8(t,e){return{usr:t.state,key:t.key,idx:e}}function h3(t,e,r,n){return r===void 0&&(r=null),$m({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?J1(e):e,{state:r,key:e&&e.key||n||HD()})}function Jx(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function J1(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function qD(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o=i0.Pop,l=null,c=d();c==null&&(c=0,a.replaceState($m({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function p(){o=i0.Pop;let k=d(),T=k==null?null:k-c;c=k,l&&l({action:o,location:y.location,delta:T})}function g(k,T){o=i0.Push;let O=h3(y.location,k,T);c=d()+1;let P=M8(O,c),V=y.createHref(O);try{a.pushState(P,"",V)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;i.location.assign(V)}s&&l&&l({action:o,location:y.location,delta:1})}function m(k,T){o=i0.Replace;let O=h3(y.location,k,T);c=d();let P=M8(O,c),V=y.createHref(O);a.replaceState(P,"",V),s&&l&&l({action:o,location:y.location,delta:0})}function w(k){let T=i.location.origin!=="null"?i.location.origin:i.location.href,O=typeof k=="string"?k:Jx(k);return O=O.replace(/ $/,"%20"),Es(T,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,T)}let y={get action(){return o},get location(){return t(i,a)},listen(k){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(O8,p),l=k,()=>{i.removeEventListener(O8,p),l=null}},createHref(k){return e(i,k)},createURL:w,encodeLocation(k){let T=w(k);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:g,replace:m,go(k){return a.go(k)}};return y}var B8;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(B8||(B8={}));function WD(t,e,r){return r===void 0&&(r="/"),GD(t,e,r)}function GD(t,e,r,n){let i=typeof e=="string"?J1(e):e,s=Vw(i.pathname||"/",r);if(s==null)return null;let a=jC(t);KD(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=aO(s);o=nO(a[l],c)}return o}function jC(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Es(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=u0([n,l.relativePath]),d=r.concat(l);s.children&&s.children.length>0&&(Es(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),jC(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:tO(c,s.index),routesMeta:d})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of DC(s.path))i(s,a,l)}),e}function DC(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=DC(n.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function KD(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:rO(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const XD=/^:[\w-]+$/,YD=3,QD=2,JD=1,ZD=10,eO=-2,V8=t=>t==="*";function tO(t,e){let r=t.split("/"),n=r.length;return r.some(V8)&&(n+=eO),e&&(n+=QD),r.filter(i=>!V8(i)).reduce((i,s)=>i+(XD.test(s)?YD:s===""?JD:ZD),n)}function rO(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function nO(t,e,r){let{routesMeta:n}=t,i={},s="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",p=iO({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),g=l.route;if(!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:u0([s,p.pathname]),pathnameBase:uO(u0([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=u0([s,p.pathnameBase]))}return a}function iO(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=sO(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((c,d,p)=>{let{paramName:g,isOptional:m}=d;if(g==="*"){let y=o[p]||"";a=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const w=o[p];return m&&!w?c[g]=void 0:c[g]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function sO(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),LC(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function aO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return LC(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Vw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function oO(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?J1(t):t;return{pathname:r?r.startsWith("/")?r:lO(r,e):e,search:dO(n),hash:fO(i)}}function lO(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function $y(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cO(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Uw(t,e){let r=cO(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function zw(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=J1(t):(i=$m({},t),Es(!i.pathname||!i.pathname.includes("?"),$y("?","pathname","search",i)),Es(!i.pathname||!i.pathname.includes("#"),$y("#","pathname","hash",i)),Es(!i.search||!i.search.includes("#"),$y("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=r;else{let p=e.length-1;if(!n&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}o=p>=0?e[p]:"/"}let l=oO(i,o),c=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const u0=t=>t.join("/").replace(/\/\/+/g,"/"),uO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const OC=["post","put","patch","delete"];new Set(OC);const pO=["get",...OC];new Set(pO);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hm(){return Hm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hm.apply(this,arguments)}const $w=M.createContext(null),mO=M.createContext(null),P0=M.createContext(null),Jv=M.createContext(null),pu=M.createContext({outlet:null,matches:[],isDataRoute:!1}),MC=M.createContext(null);function gO(t,e){let{relative:r}=e===void 0?{}:e;Z1()||Es(!1);let{basename:n,navigator:i}=M.useContext(P0),{hash:s,pathname:a,search:o}=VC(t,{relative:r}),l=a;return n!=="/"&&(l=a==="/"?n:u0([n,a])),i.createHref({pathname:l,search:o,hash:s})}function Z1(){return M.useContext(Jv)!=null}function Xl(){return Z1()||Es(!1),M.useContext(Jv).location}function BC(t){M.useContext(P0).static||M.useLayoutEffect(t)}function Ci(){let{isDataRoute:t}=M.useContext(pu);return t?PO():xO()}function xO(){Z1()||Es(!1);let t=M.useContext($w),{basename:e,future:r,navigator:n}=M.useContext(P0),{matches:i}=M.useContext(pu),{pathname:s}=Xl(),a=JSON.stringify(Uw(i,r.v7_relativeSplatPath)),o=M.useRef(!1);return BC(()=>{o.current=!0}),M.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let p=zw(c,JSON.parse(a),s,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:u0([e,p.pathname])),(d.replace?n.replace:n.push)(p,d.state,d)},[e,n,a,s,t])}const vO=M.createContext(null);function yO(t){let e=M.useContext(pu).outlet;return e&&M.createElement(vO.Provider,{value:t},e)}function Zv(){let{matches:t}=M.useContext(pu),e=t[t.length-1];return e?e.params:{}}function VC(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=M.useContext(P0),{matches:i}=M.useContext(pu),{pathname:s}=Xl(),a=JSON.stringify(Uw(i,n.v7_relativeSplatPath));return M.useMemo(()=>zw(t,JSON.parse(a),s,r==="path"),[t,a,s,r])}function wO(t,e){return bO(t,e)}function bO(t,e,r,n){Z1()||Es(!1);let{navigator:i}=M.useContext(P0),{matches:s}=M.useContext(pu),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=Xl(),d;if(e){var p;let k=typeof e=="string"?J1(e):e;l==="/"||(p=k.pathname)!=null&&p.startsWith(l)||Es(!1),d=k}else d=c;let g=d.pathname||"/",m=g;if(l!=="/"){let k=l.replace(/^\//,"").split("/");m="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let w=WD(t,{pathname:m}),y=CO(w&&w.map(k=>Object.assign({},k,{params:Object.assign({},o,k.params),pathname:u0([l,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?l:u0([l,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,r,n);return e&&y?M.createElement(Jv.Provider,{value:{location:Hm({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:i0.Pop}},y):y}function _O(){let t=IO(),e=hO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),r?M.createElement("pre",{style:i},r):null,null)}const kO=M.createElement(_O,null);class EO extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?M.createElement(pu.Provider,{value:this.props.routeContext},M.createElement(MC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function SO(t){let{routeContext:e,match:r,children:n}=t,i=M.useContext($w);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),M.createElement(pu.Provider,{value:e},n)}function CO(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=(i=r)==null?void 0:i.errors;if(o!=null){let d=a.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);d>=0||Es(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let p=a[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:g,errors:m}=r,w=p.route.loader&&g[p.route.id]===void 0&&(!m||m[p.route.id]===void 0);if(p.route.lazy||w){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,p,g)=>{let m,w=!1,y=null,k=null;r&&(m=o&&p.route.id?o[p.route.id]:void 0,y=p.route.errorElement||kO,l&&(c<0&&g===0?(RO("route-fallback"),w=!0,k=null):c===g&&(w=!0,k=p.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,g+1)),O=()=>{let P;return m?P=y:w?P=k:p.route.Component?P=M.createElement(p.route.Component,null):p.route.element?P=p.route.element:P=d,M.createElement(SO,{match:p,routeContext:{outlet:d,matches:T,isDataRoute:r!=null},children:P})};return r&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?M.createElement(EO,{location:r.location,revalidation:r.revalidation,component:y,error:m,children:O(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):O()},null)}var UC=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(UC||{}),zC=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(zC||{});function TO(t){let e=M.useContext($w);return e||Es(!1),e}function NO(t){let e=M.useContext(mO);return e||Es(!1),e}function AO(t){let e=M.useContext(pu);return e||Es(!1),e}function $C(t){let e=AO(),r=e.matches[e.matches.length-1];return r.route.id||Es(!1),r.route.id}function IO(){var t;let e=M.useContext(MC),r=NO(),n=$C();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function PO(){let{router:t}=TO(UC.UseNavigateStable),e=$C(zC.UseNavigateStable),r=M.useRef(!1);return BC(()=>{r.current=!0}),M.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Hm({fromRouteId:e},s)))},[t,e])}const U8={};function RO(t,e,r){U8[t]||(U8[t]=!0)}function FO(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function Jp(t){let{to:e,replace:r,state:n,relative:i}=t;Z1()||Es(!1);let{future:s,static:a}=M.useContext(P0),{matches:o}=M.useContext(pu),{pathname:l}=Xl(),c=Ci(),d=zw(e,Uw(o,s.v7_relativeSplatPath),l,i==="path"),p=JSON.stringify(d);return M.useEffect(()=>c(JSON.parse(p),{replace:r,state:n,relative:i}),[c,p,i,r,n]),null}function Hw(t){return yO(t.context)}function Wn(t){Es(!1)}function LO(t){let{basename:e="/",children:r=null,location:n,navigationType:i=i0.Pop,navigator:s,static:a=!1,future:o}=t;Z1()&&Es(!1);let l=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:s,static:a,future:Hm({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof n=="string"&&(n=J1(n));let{pathname:d="/",search:p="",hash:g="",state:m=null,key:w="default"}=n,y=M.useMemo(()=>{let k=Vw(d,l);return k==null?null:{location:{pathname:k,search:p,hash:g,state:m,key:w},navigationType:i}},[l,d,p,g,m,w,i]);return y==null?null:M.createElement(P0.Provider,{value:c},M.createElement(Jv.Provider,{children:r,value:y}))}function z8(t){let{children:e,location:r}=t;return wO(p3(e),r)}new Promise(()=>{});function p3(t,e){e===void 0&&(e=[]);let r=[];return M.Children.forEach(t,(n,i)=>{if(!M.isValidElement(n))return;let s=[...e,i];if(n.type===M.Fragment){r.push.apply(r,p3(n.props.children,s));return}n.type!==Wn&&Es(!1),!n.props.index||!n.props.children||Es(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=p3(n.props.children,s)),r.push(a)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function m3(){return m3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},m3.apply(this,arguments)}function jO(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function DO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function OO(t,e){return t.button===0&&(!e||e==="_self")&&!DO(t)}const MO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],BO="6";try{window.__reactRouterVersion=BO}catch{}const VO="startTransition",$8=Qx[VO];function UO(t){let{basename:e,children:r,future:n,window:i}=t,s=M.useRef();s.current==null&&(s.current=$D({window:i,v5Compat:!0}));let a=s.current,[o,l]=M.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},d=M.useCallback(p=>{c&&$8?$8(()=>l(p)):l(p)},[l,c]);return M.useLayoutEffect(()=>a.listen(d),[a,d]),M.useEffect(()=>FO(n),[n]),M.createElement(LO,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:a,future:n})}const zO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$O=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jf=M.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:d,viewTransition:p}=e,g=jO(e,MO),{basename:m}=M.useContext(P0),w,y=!1;if(typeof c=="string"&&$O.test(c)&&(w=c,zO))try{let P=new URL(window.location.href),V=c.startsWith("//")?new URL(P.protocol+c):new URL(c),Y=Vw(V.pathname,m);V.origin===P.origin&&Y!=null?c=Y+V.search+V.hash:y=!0}catch{}let k=gO(c,{relative:i}),T=HO(c,{replace:a,state:o,target:l,preventScrollReset:d,relative:i,viewTransition:p});function O(P){n&&n(P),P.defaultPrevented||T(P)}return M.createElement("a",m3({},g,{href:w||k,onClick:y||s?n:O,ref:r,target:l}))});var H8;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(H8||(H8={}));var q8;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(q8||(q8={}));function HO(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=Ci(),c=Xl(),d=VC(t,{relative:a});return M.useCallback(p=>{if(OO(p,r)){p.preventDefault();let g=n!==void 0?n:Jx(c)===Jx(d);l(t,{replace:g,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,d,n,i,r,t,s,a,o])}var W8={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},qO=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[r++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[r++],a=t[r++],o=t[r++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const s=t[r++],a=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},qC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,p=(s&3)<<4|o>>4;let g=(o&15)<<2|c>>6,m=c&63;l||(m=64,a||(g=64)),n.push(r[d],r[p],r[g],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(HC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const s=r[t.charAt(i++)],o=i<t.length?r[t.charAt(i)]:0;++i;const c=i<t.length?r[t.charAt(i)]:64;++i;const p=i<t.length?r[t.charAt(i)]:64;if(++i,s==null||o==null||c==null||p==null)throw new WO;const g=s<<2|o>>4;if(n.push(g),c!==64){const m=o<<4&240|c>>2;if(n.push(m),p!==64){const w=c<<6&192|p;n.push(w)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class WO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GO=function(t){const e=HC(t);return qC.encodeByteArray(e,!0)},Zx=function(t){return GO(t).replace(/\./g,"")},WC=function(t){try{return qC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=()=>KO().__FIREBASE_DEFAULTS__,YO=()=>{if(typeof process>"u"||typeof W8>"u")return;const t=W8.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&WC(t[1]);return e&&JSON.parse(e)},e5=()=>{try{return XO()||YO()||QO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},GC=t=>{var e,r;return(r=(e=e5())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},qw=t=>{const e=GC(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},KC=()=>{var t;return(t=e5())===null||t===void 0?void 0:t.config},XC=t=>{var e;return(e=e5())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Zx(JSON.stringify(r)),Zx(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Js())}function eM(){var t;const e=(t=e5())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iM(){const t=Js();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function QC(){return!eM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JC(){try{return typeof indexedDB=="object"}catch{return!1}}function sM(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM="FirebaseError";class Nc extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=aM,Object.setPrototypeOf(this,Nc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kg.prototype.create)}}class kg{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?oM(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Nc(i,o,n)}}function oM(t,e){return t.replace(lM,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const lM=/\{\$([^}]+)}/g;function cM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function h0(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const s=t[i],a=e[i];if(G8(s)&&G8(a)){if(!h0(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function G8(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function um(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function dm(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function uM(t,e){const r=new dM(t,e);return r.subscribe.bind(r)}class dM{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");fM(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=Hy),i.error===void 0&&(i.error=Hy),i.complete===void 0&&(i.complete=Hy);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fM(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Hy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t){return t&&t._delegate?t._delegate:t}class Zu{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new JO;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e?.identifier),i=(r=e?.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mM(e))try{this.getOrInitializeService({instanceIdentifier:ff})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=ff){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ff){return this.instances.has(e)}getOptions(e=ff){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&a.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:pM(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ff){return this.component?this.component.multipleInstances?e:ff:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pM(t){return t===ff?void 0:t}function mM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new hM(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(hn||(hn={}));const xM={debug:hn.DEBUG,verbose:hn.VERBOSE,info:hn.INFO,warn:hn.WARN,error:hn.ERROR,silent:hn.SILENT},vM=hn.INFO,yM={[hn.DEBUG]:"log",[hn.VERBOSE]:"log",[hn.INFO]:"info",[hn.WARN]:"warn",[hn.ERROR]:"error"},wM=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=yM[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ww{constructor(e){this.name=e,this._logLevel=vM,this._logHandler=wM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in hn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,hn.DEBUG,...e),this._logHandler(this,hn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,hn.VERBOSE,...e),this._logHandler(this,hn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,hn.INFO,...e),this._logHandler(this,hn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,hn.WARN,...e),this._logHandler(this,hn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,hn.ERROR,...e),this._logHandler(this,hn.ERROR,...e)}}const bM=(t,e)=>e.some(r=>t instanceof r);let K8,X8;function _M(){return K8||(K8=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kM(){return X8||(X8=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ZC=new WeakMap,g3=new WeakMap,eT=new WeakMap,qy=new WeakMap,Gw=new WeakMap;function EM(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{r(d0(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&ZC.set(r,t)}).catch(()=>{}),Gw.set(e,t),e}function SM(t){if(g3.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{r(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});g3.set(t,e)}let x3={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return g3.get(t);if(e==="objectStoreNames")return t.objectStoreNames||eT.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return d0(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function CM(t){x3=t(x3)}function TM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Wy(this),e,...r);return eT.set(n,e.sort?e.sort():[e]),d0(n)}:kM().includes(t)?function(...e){return t.apply(Wy(this),e),d0(ZC.get(this))}:function(...e){return d0(t.apply(Wy(this),e))}}function NM(t){return typeof t=="function"?TM(t):(t instanceof IDBTransaction&&SM(t),bM(t,_M())?new Proxy(t,x3):t)}function d0(t){if(t instanceof IDBRequest)return EM(t);if(qy.has(t))return qy.get(t);const e=NM(t);return e!==t&&(qy.set(t,e),Gw.set(e,t)),e}const Wy=t=>Gw.get(t);function AM(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=d0(a);return n&&a.addEventListener("upgradeneeded",l=>{n(d0(a.result),l.oldVersion,l.newVersion,d0(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const IM=["get","getKey","getAll","getAllKeys","count"],PM=["put","add","delete","clear"],Gy=new Map;function Y8(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gy.get(e))return Gy.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=PM.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||IM.includes(r)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),i&&l.done]))[0]};return Gy.set(e,s),s}CM(t=>({...t,get:(e,r,n)=>Y8(e,r)||t.get(e,r,n),has:(e,r)=>!!Y8(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(FM(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function FM(t){const e=t.getComponent();return e?.type==="VERSION"}const v3="@firebase/app",Q8="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed=new Ww("@firebase/app"),LM="@firebase/app-compat",jM="@firebase/analytics-compat",DM="@firebase/analytics",OM="@firebase/app-check-compat",MM="@firebase/app-check",BM="@firebase/auth",VM="@firebase/auth-compat",UM="@firebase/database",zM="@firebase/data-connect",$M="@firebase/database-compat",HM="@firebase/functions",qM="@firebase/functions-compat",WM="@firebase/installations",GM="@firebase/installations-compat",KM="@firebase/messaging",XM="@firebase/messaging-compat",YM="@firebase/performance",QM="@firebase/performance-compat",JM="@firebase/remote-config",ZM="@firebase/remote-config-compat",eB="@firebase/storage",tB="@firebase/storage-compat",rB="@firebase/firestore",nB="@firebase/vertexai-preview",iB="@firebase/firestore-compat",sB="firebase",aB="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="[DEFAULT]",oB={[v3]:"fire-core",[LM]:"fire-core-compat",[DM]:"fire-analytics",[jM]:"fire-analytics-compat",[MM]:"fire-app-check",[OM]:"fire-app-check-compat",[BM]:"fire-auth",[VM]:"fire-auth-compat",[UM]:"fire-rtdb",[zM]:"fire-data-connect",[$M]:"fire-rtdb-compat",[HM]:"fire-fn",[qM]:"fire-fn-compat",[WM]:"fire-iid",[GM]:"fire-iid-compat",[KM]:"fire-fcm",[XM]:"fire-fcm-compat",[YM]:"fire-perf",[QM]:"fire-perf-compat",[JM]:"fire-rc",[ZM]:"fire-rc-compat",[eB]:"fire-gcs",[tB]:"fire-gcs-compat",[rB]:"fire-fst",[iB]:"fire-fst-compat",[nB]:"fire-vertex","fire-js":"fire-js",[sB]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=new Map,lB=new Map,y3=new Map;function J8(t,e){try{t.container.addComponent(e)}catch(r){ed.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function p0(t){const e=t.name;if(y3.has(e))return ed.debug(`There were multiple attempts to register component ${e}.`),!1;y3.set(e,t);for(const r of tv.values())J8(r,t);for(const r of lB.values())J8(r,t);return!0}function ah(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function cB(t,e,r=ev){ah(t,e).clearInstance(r)}function vc(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},f0=new kg("app","Firebase",uB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Zu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw f0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=aB;function tT(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:ev,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw f0.create("bad-app-name",{appName:String(i)});if(r||(r=KC()),!r)throw f0.create("no-options");const s=tv.get(i);if(s){if(h0(r,s.options)&&h0(n,s.config))return s;throw f0.create("duplicate-app",{appName:i})}const a=new gM(i);for(const l of y3.values())a.addComponent(l);const o=new dB(r,n,a);return tv.set(i,o),o}function t5(t=ev){const e=tv.get(t);if(!e&&t===ev&&KC())return tT();if(!e)throw f0.create("no-app",{appName:t});return e}function $l(t,e,r){var n;let i=(n=oB[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ed.warn(o.join(" "));return}p0(new Zu(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fB="firebase-heartbeat-database",hB=1,qm="firebase-heartbeat-store";let Ky=null;function rT(){return Ky||(Ky=AM(fB,hB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qm)}catch(r){console.warn(r)}}}}).catch(t=>{throw f0.create("idb-open",{originalErrorMessage:t.message})})),Ky}async function pB(t){try{const r=(await rT()).transaction(qm),n=await r.objectStore(qm).get(nT(t));return await r.done,n}catch(e){if(e instanceof Nc)ed.warn(e.message);else{const r=f0.create("idb-get",{originalErrorMessage:e?.message});ed.warn(r.message)}}}async function Z8(t,e){try{const n=(await rT()).transaction(qm,"readwrite");await n.objectStore(qm).put(e,nT(t)),await n.done}catch(r){if(r instanceof Nc)ed.warn(r.message);else{const n=f0.create("idb-set",{originalErrorMessage:r?.message});ed.warn(n.message)}}}function nT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=1024,gB=720*60*60*1e3;class xB{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new yB(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ek();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=gB}),this._storage.overwrite(this._heartbeatsCache))}catch(n){ed.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=ek(),{heartbeatsToSend:n,unsentEntries:i}=vB(this._heartbeatsCache.heartbeats),s=Zx(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return ed.warn(r),""}}}function ek(){return new Date().toISOString().substring(0,10)}function vB(t,e=mB){const r=[];let n=t.slice();for(const i of t){const s=r.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),tk(r)>e){s.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),tk(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class yB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JC()?sM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await pB(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Z8(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Z8(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function tk(t){return Zx(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(t){p0(new Zu("platform-logger",e=>new RM(e),"PRIVATE")),p0(new Zu("heartbeat",e=>new xB(e),"PRIVATE")),$l(v3,Q8,t),$l(v3,Q8,"esm2017"),$l("fire-js","")}wB("");var rk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tf,iT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,N){function C(){}C.prototype=N.prototype,L.D=N.prototype,L.prototype=new C,L.prototype.constructor=L,L.C=function(R,A,F){for(var B=Array(arguments.length-2),te=2;te<arguments.length;te++)B[te-2]=arguments[te];return N.prototype[A].apply(R,B)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(L,N,C){C||(C=0);var R=Array(16);if(typeof N=="string")for(var A=0;16>A;++A)R[A]=N.charCodeAt(C++)|N.charCodeAt(C++)<<8|N.charCodeAt(C++)<<16|N.charCodeAt(C++)<<24;else for(A=0;16>A;++A)R[A]=N[C++]|N[C++]<<8|N[C++]<<16|N[C++]<<24;N=L.g[0],C=L.g[1],A=L.g[2];var F=L.g[3],B=N+(F^C&(A^F))+R[0]+3614090360&4294967295;N=C+(B<<7&4294967295|B>>>25),B=F+(A^N&(C^A))+R[1]+3905402710&4294967295,F=N+(B<<12&4294967295|B>>>20),B=A+(C^F&(N^C))+R[2]+606105819&4294967295,A=F+(B<<17&4294967295|B>>>15),B=C+(N^A&(F^N))+R[3]+3250441966&4294967295,C=A+(B<<22&4294967295|B>>>10),B=N+(F^C&(A^F))+R[4]+4118548399&4294967295,N=C+(B<<7&4294967295|B>>>25),B=F+(A^N&(C^A))+R[5]+1200080426&4294967295,F=N+(B<<12&4294967295|B>>>20),B=A+(C^F&(N^C))+R[6]+2821735955&4294967295,A=F+(B<<17&4294967295|B>>>15),B=C+(N^A&(F^N))+R[7]+4249261313&4294967295,C=A+(B<<22&4294967295|B>>>10),B=N+(F^C&(A^F))+R[8]+1770035416&4294967295,N=C+(B<<7&4294967295|B>>>25),B=F+(A^N&(C^A))+R[9]+2336552879&4294967295,F=N+(B<<12&4294967295|B>>>20),B=A+(C^F&(N^C))+R[10]+4294925233&4294967295,A=F+(B<<17&4294967295|B>>>15),B=C+(N^A&(F^N))+R[11]+2304563134&4294967295,C=A+(B<<22&4294967295|B>>>10),B=N+(F^C&(A^F))+R[12]+1804603682&4294967295,N=C+(B<<7&4294967295|B>>>25),B=F+(A^N&(C^A))+R[13]+4254626195&4294967295,F=N+(B<<12&4294967295|B>>>20),B=A+(C^F&(N^C))+R[14]+2792965006&4294967295,A=F+(B<<17&4294967295|B>>>15),B=C+(N^A&(F^N))+R[15]+1236535329&4294967295,C=A+(B<<22&4294967295|B>>>10),B=N+(A^F&(C^A))+R[1]+4129170786&4294967295,N=C+(B<<5&4294967295|B>>>27),B=F+(C^A&(N^C))+R[6]+3225465664&4294967295,F=N+(B<<9&4294967295|B>>>23),B=A+(N^C&(F^N))+R[11]+643717713&4294967295,A=F+(B<<14&4294967295|B>>>18),B=C+(F^N&(A^F))+R[0]+3921069994&4294967295,C=A+(B<<20&4294967295|B>>>12),B=N+(A^F&(C^A))+R[5]+3593408605&4294967295,N=C+(B<<5&4294967295|B>>>27),B=F+(C^A&(N^C))+R[10]+38016083&4294967295,F=N+(B<<9&4294967295|B>>>23),B=A+(N^C&(F^N))+R[15]+3634488961&4294967295,A=F+(B<<14&4294967295|B>>>18),B=C+(F^N&(A^F))+R[4]+3889429448&4294967295,C=A+(B<<20&4294967295|B>>>12),B=N+(A^F&(C^A))+R[9]+568446438&4294967295,N=C+(B<<5&4294967295|B>>>27),B=F+(C^A&(N^C))+R[14]+3275163606&4294967295,F=N+(B<<9&4294967295|B>>>23),B=A+(N^C&(F^N))+R[3]+4107603335&4294967295,A=F+(B<<14&4294967295|B>>>18),B=C+(F^N&(A^F))+R[8]+1163531501&4294967295,C=A+(B<<20&4294967295|B>>>12),B=N+(A^F&(C^A))+R[13]+2850285829&4294967295,N=C+(B<<5&4294967295|B>>>27),B=F+(C^A&(N^C))+R[2]+4243563512&4294967295,F=N+(B<<9&4294967295|B>>>23),B=A+(N^C&(F^N))+R[7]+1735328473&4294967295,A=F+(B<<14&4294967295|B>>>18),B=C+(F^N&(A^F))+R[12]+2368359562&4294967295,C=A+(B<<20&4294967295|B>>>12),B=N+(C^A^F)+R[5]+4294588738&4294967295,N=C+(B<<4&4294967295|B>>>28),B=F+(N^C^A)+R[8]+2272392833&4294967295,F=N+(B<<11&4294967295|B>>>21),B=A+(F^N^C)+R[11]+1839030562&4294967295,A=F+(B<<16&4294967295|B>>>16),B=C+(A^F^N)+R[14]+4259657740&4294967295,C=A+(B<<23&4294967295|B>>>9),B=N+(C^A^F)+R[1]+2763975236&4294967295,N=C+(B<<4&4294967295|B>>>28),B=F+(N^C^A)+R[4]+1272893353&4294967295,F=N+(B<<11&4294967295|B>>>21),B=A+(F^N^C)+R[7]+4139469664&4294967295,A=F+(B<<16&4294967295|B>>>16),B=C+(A^F^N)+R[10]+3200236656&4294967295,C=A+(B<<23&4294967295|B>>>9),B=N+(C^A^F)+R[13]+681279174&4294967295,N=C+(B<<4&4294967295|B>>>28),B=F+(N^C^A)+R[0]+3936430074&4294967295,F=N+(B<<11&4294967295|B>>>21),B=A+(F^N^C)+R[3]+3572445317&4294967295,A=F+(B<<16&4294967295|B>>>16),B=C+(A^F^N)+R[6]+76029189&4294967295,C=A+(B<<23&4294967295|B>>>9),B=N+(C^A^F)+R[9]+3654602809&4294967295,N=C+(B<<4&4294967295|B>>>28),B=F+(N^C^A)+R[12]+3873151461&4294967295,F=N+(B<<11&4294967295|B>>>21),B=A+(F^N^C)+R[15]+530742520&4294967295,A=F+(B<<16&4294967295|B>>>16),B=C+(A^F^N)+R[2]+3299628645&4294967295,C=A+(B<<23&4294967295|B>>>9),B=N+(A^(C|~F))+R[0]+4096336452&4294967295,N=C+(B<<6&4294967295|B>>>26),B=F+(C^(N|~A))+R[7]+1126891415&4294967295,F=N+(B<<10&4294967295|B>>>22),B=A+(N^(F|~C))+R[14]+2878612391&4294967295,A=F+(B<<15&4294967295|B>>>17),B=C+(F^(A|~N))+R[5]+4237533241&4294967295,C=A+(B<<21&4294967295|B>>>11),B=N+(A^(C|~F))+R[12]+1700485571&4294967295,N=C+(B<<6&4294967295|B>>>26),B=F+(C^(N|~A))+R[3]+2399980690&4294967295,F=N+(B<<10&4294967295|B>>>22),B=A+(N^(F|~C))+R[10]+4293915773&4294967295,A=F+(B<<15&4294967295|B>>>17),B=C+(F^(A|~N))+R[1]+2240044497&4294967295,C=A+(B<<21&4294967295|B>>>11),B=N+(A^(C|~F))+R[8]+1873313359&4294967295,N=C+(B<<6&4294967295|B>>>26),B=F+(C^(N|~A))+R[15]+4264355552&4294967295,F=N+(B<<10&4294967295|B>>>22),B=A+(N^(F|~C))+R[6]+2734768916&4294967295,A=F+(B<<15&4294967295|B>>>17),B=C+(F^(A|~N))+R[13]+1309151649&4294967295,C=A+(B<<21&4294967295|B>>>11),B=N+(A^(C|~F))+R[4]+4149444226&4294967295,N=C+(B<<6&4294967295|B>>>26),B=F+(C^(N|~A))+R[11]+3174756917&4294967295,F=N+(B<<10&4294967295|B>>>22),B=A+(N^(F|~C))+R[2]+718787259&4294967295,A=F+(B<<15&4294967295|B>>>17),B=C+(F^(A|~N))+R[9]+3951481745&4294967295,L.g[0]=L.g[0]+N&4294967295,L.g[1]=L.g[1]+(A+(B<<21&4294967295|B>>>11))&4294967295,L.g[2]=L.g[2]+A&4294967295,L.g[3]=L.g[3]+F&4294967295}n.prototype.u=function(L,N){N===void 0&&(N=L.length);for(var C=N-this.blockSize,R=this.B,A=this.h,F=0;F<N;){if(A==0)for(;F<=C;)i(this,L,F),F+=this.blockSize;if(typeof L=="string"){for(;F<N;)if(R[A++]=L.charCodeAt(F++),A==this.blockSize){i(this,R),A=0;break}}else for(;F<N;)if(R[A++]=L[F++],A==this.blockSize){i(this,R),A=0;break}}this.h=A,this.o+=N},n.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var N=1;N<L.length-8;++N)L[N]=0;var C=8*this.o;for(N=L.length-8;N<L.length;++N)L[N]=C&255,C/=256;for(this.u(L),L=Array(16),N=C=0;4>N;++N)for(var R=0;32>R;R+=8)L[C++]=this.g[N]>>>R&255;return L};function s(L,N){var C=o;return Object.prototype.hasOwnProperty.call(C,L)?C[L]:C[L]=N(L)}function a(L,N){this.h=N;for(var C=[],R=!0,A=L.length-1;0<=A;A--){var F=L[A]|0;R&&F==N||(C[A]=F,R=!1)}this.g=C}var o={};function l(L){return-128<=L&&128>L?s(L,function(N){return new a([N|0],0>N?-1:0)}):new a([L|0],0>L?-1:0)}function c(L){if(isNaN(L)||!isFinite(L))return p;if(0>L)return k(c(-L));for(var N=[],C=1,R=0;L>=C;R++)N[R]=L/C|0,C*=4294967296;return new a(N,0)}function d(L,N){if(L.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(L.charAt(0)=="-")return k(d(L.substring(1),N));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(N,8)),R=p,A=0;A<L.length;A+=8){var F=Math.min(8,L.length-A),B=parseInt(L.substring(A,A+F),N);8>F?(F=c(Math.pow(N,F)),R=R.j(F).add(c(B))):(R=R.j(C),R=R.add(c(B)))}return R}var p=l(0),g=l(1),m=l(16777216);t=a.prototype,t.m=function(){if(y(this))return-k(this).m();for(var L=0,N=1,C=0;C<this.g.length;C++){var R=this.i(C);L+=(0<=R?R:4294967296+R)*N,N*=4294967296}return L},t.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(w(this))return"0";if(y(this))return"-"+k(this).toString(L);for(var N=c(Math.pow(L,6)),C=this,R="";;){var A=V(C,N).g;C=T(C,A.j(N));var F=((0<C.g.length?C.g[0]:C.h)>>>0).toString(L);if(C=A,w(C))return F+R;for(;6>F.length;)F="0"+F;R=F+R}},t.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function w(L){if(L.h!=0)return!1;for(var N=0;N<L.g.length;N++)if(L.g[N]!=0)return!1;return!0}function y(L){return L.h==-1}t.l=function(L){return L=T(this,L),y(L)?-1:w(L)?0:1};function k(L){for(var N=L.g.length,C=[],R=0;R<N;R++)C[R]=~L.g[R];return new a(C,~L.h).add(g)}t.abs=function(){return y(this)?k(this):this},t.add=function(L){for(var N=Math.max(this.g.length,L.g.length),C=[],R=0,A=0;A<=N;A++){var F=R+(this.i(A)&65535)+(L.i(A)&65535),B=(F>>>16)+(this.i(A)>>>16)+(L.i(A)>>>16);R=B>>>16,F&=65535,B&=65535,C[A]=B<<16|F}return new a(C,C[C.length-1]&-2147483648?-1:0)};function T(L,N){return L.add(k(N))}t.j=function(L){if(w(this)||w(L))return p;if(y(this))return y(L)?k(this).j(k(L)):k(k(this).j(L));if(y(L))return k(this.j(k(L)));if(0>this.l(m)&&0>L.l(m))return c(this.m()*L.m());for(var N=this.g.length+L.g.length,C=[],R=0;R<2*N;R++)C[R]=0;for(R=0;R<this.g.length;R++)for(var A=0;A<L.g.length;A++){var F=this.i(R)>>>16,B=this.i(R)&65535,te=L.i(A)>>>16,pe=L.i(A)&65535;C[2*R+2*A]+=B*pe,O(C,2*R+2*A),C[2*R+2*A+1]+=F*pe,O(C,2*R+2*A+1),C[2*R+2*A+1]+=B*te,O(C,2*R+2*A+1),C[2*R+2*A+2]+=F*te,O(C,2*R+2*A+2)}for(R=0;R<N;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=N;R<2*N;R++)C[R]=0;return new a(C,0)};function O(L,N){for(;(L[N]&65535)!=L[N];)L[N+1]+=L[N]>>>16,L[N]&=65535,N++}function P(L,N){this.g=L,this.h=N}function V(L,N){if(w(N))throw Error("division by zero");if(w(L))return new P(p,p);if(y(L))return N=V(k(L),N),new P(k(N.g),k(N.h));if(y(N))return N=V(L,k(N)),new P(k(N.g),N.h);if(30<L.g.length){if(y(L)||y(N))throw Error("slowDivide_ only works with positive integers.");for(var C=g,R=N;0>=R.l(L);)C=Y(C),R=Y(R);var A=G(C,1),F=G(R,1);for(R=G(R,2),C=G(C,2);!w(R);){var B=F.add(R);0>=B.l(L)&&(A=A.add(C),F=B),R=G(R,1),C=G(C,1)}return N=T(L,A.j(N)),new P(A,N)}for(A=p;0<=L.l(N);){for(C=Math.max(1,Math.floor(L.m()/N.m())),R=Math.ceil(Math.log(C)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),F=c(C),B=F.j(N);y(B)||0<B.l(L);)C-=R,F=c(C),B=F.j(N);w(F)&&(F=g),A=A.add(F),L=T(L,B)}return new P(A,L)}t.A=function(L){return V(this,L).h},t.and=function(L){for(var N=Math.max(this.g.length,L.g.length),C=[],R=0;R<N;R++)C[R]=this.i(R)&L.i(R);return new a(C,this.h&L.h)},t.or=function(L){for(var N=Math.max(this.g.length,L.g.length),C=[],R=0;R<N;R++)C[R]=this.i(R)|L.i(R);return new a(C,this.h|L.h)},t.xor=function(L){for(var N=Math.max(this.g.length,L.g.length),C=[],R=0;R<N;R++)C[R]=this.i(R)^L.i(R);return new a(C,this.h^L.h)};function Y(L){for(var N=L.g.length+1,C=[],R=0;R<N;R++)C[R]=L.i(R)<<1|L.i(R-1)>>>31;return new a(C,L.h)}function G(L,N){var C=N>>5;N%=32;for(var R=L.g.length-C,A=[],F=0;F<R;F++)A[F]=0<N?L.i(F+C)>>>N|L.i(F+C+1)<<32-N:L.i(F+C);return new a(A,L.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,iT=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=d,Tf=a}).apply(typeof rk<"u"?rk:typeof self<"u"?self:typeof window<"u"?window:{});var $2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sT,fm,aT,Tx,w3,oT,lT,cT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,z,Z){return _==Array.prototype||_==Object.prototype||(_[z]=Z.value),_};function r(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof $2=="object"&&$2];for(var z=0;z<_.length;++z){var Z=_[z];if(Z&&Z.Math==Math)return Z}throw Error("Cannot find global object")}var n=r(this);function i(_,z){if(z)e:{var Z=n;_=_.split(".");for(var xe=0;xe<_.length-1;xe++){var Xe=_[xe];if(!(Xe in Z))break e;Z=Z[Xe]}_=_[_.length-1],xe=Z[_],z=z(xe),z!=xe&&z!=null&&e(Z,_,{configurable:!0,writable:!0,value:z})}}function s(_,z){_ instanceof String&&(_+="");var Z=0,xe=!1,Xe={next:function(){if(!xe&&Z<_.length){var dt=Z++;return{value:z(dt,_[dt]),done:!1}}return xe=!0,{done:!0,value:void 0}}};return Xe[Symbol.iterator]=function(){return Xe},Xe}i("Array.prototype.values",function(_){return _||function(){return s(this,function(z,Z){return Z})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(_){var z=typeof _;return z=z!="object"?z:_?Array.isArray(_)?"array":z:"null",z=="array"||z=="object"&&typeof _.length=="number"}function c(_){var z=typeof _;return z=="object"&&_!=null||z=="function"}function d(_,z,Z){return _.call.apply(_.bind,arguments)}function p(_,z,Z){if(!_)throw Error();if(2<arguments.length){var xe=Array.prototype.slice.call(arguments,2);return function(){var Xe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Xe,xe),_.apply(z,Xe)}}return function(){return _.apply(z,arguments)}}function g(_,z,Z){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function m(_,z){var Z=Array.prototype.slice.call(arguments,1);return function(){var xe=Z.slice();return xe.push.apply(xe,arguments),_.apply(this,xe)}}function w(_,z){function Z(){}Z.prototype=z.prototype,_.aa=z.prototype,_.prototype=new Z,_.prototype.constructor=_,_.Qb=function(xe,Xe,dt){for(var Ft=Array(arguments.length-2),vn=2;vn<arguments.length;vn++)Ft[vn-2]=arguments[vn];return z.prototype[Xe].apply(xe,Ft)}}function y(_){const z=_.length;if(0<z){const Z=Array(z);for(let xe=0;xe<z;xe++)Z[xe]=_[xe];return Z}return[]}function k(_,z){for(let Z=1;Z<arguments.length;Z++){const xe=arguments[Z];if(l(xe)){const Xe=_.length||0,dt=xe.length||0;_.length=Xe+dt;for(let Ft=0;Ft<dt;Ft++)_[Xe+Ft]=xe[Ft]}else _.push(xe)}}class T{constructor(z,Z){this.i=z,this.j=Z,this.h=0,this.g=null}get(){let z;return 0<this.h?(this.h--,z=this.g,this.g=z.next,z.next=null):z=this.i(),z}}function O(_){return/^[\s\xa0]*$/.test(_)}function P(){var _=o.navigator;return _&&(_=_.userAgent)?_:""}function V(_){return V[" "](_),_}V[" "]=function(){};var Y=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function G(_,z,Z){for(const xe in _)z.call(Z,_[xe],xe,_)}function L(_,z){for(const Z in _)z.call(void 0,_[Z],Z,_)}function N(_){const z={};for(const Z in _)z[Z]=_[Z];return z}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(_,z){let Z,xe;for(let Xe=1;Xe<arguments.length;Xe++){xe=arguments[Xe];for(Z in xe)_[Z]=xe[Z];for(let dt=0;dt<C.length;dt++)Z=C[dt],Object.prototype.hasOwnProperty.call(xe,Z)&&(_[Z]=xe[Z])}}function A(_){var z=1;_=_.split(":");const Z=[];for(;0<z&&_.length;)Z.push(_.shift()),z--;return _.length&&Z.push(_.join(":")),Z}function F(_){o.setTimeout(()=>{throw _},0)}function B(){var _=W;let z=null;return _.g&&(z=_.g,_.g=_.g.next,_.g||(_.h=null),z.next=null),z}class te{constructor(){this.h=this.g=null}add(z,Z){const xe=pe.get();xe.set(z,Z),this.h?this.h.next=xe:this.g=xe,this.h=xe}}var pe=new T(()=>new Ee,_=>_.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(z,Z){this.h=z,this.g=Z,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,re=!1,W=new te,ne=()=>{const _=o.Promise.resolve(void 0);ve=()=>{_.then(Q)}};var Q=()=>{for(var _;_=B();){try{_.h.call(_.g)}catch(Z){F(Z)}var z=pe;z.j(_),100>z.h&&(z.h++,_.next=z.g,z.g=_)}re=!1};function I(){this.s=this.s,this.C=this.C}I.prototype.s=!1,I.prototype.ma=function(){this.s||(this.s=!0,this.N())},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(_,z){this.type=_,this.g=this.target=z,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var X=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var _=!1,z=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const Z=()=>{};o.addEventListener("test",Z,z),o.removeEventListener("test",Z,z)}catch{}return _})();function J(_,z){if(H.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var Z=this.type=_.type,xe=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=z,z=_.relatedTarget){if(Y){e:{try{V(z.nodeName);var Xe=!0;break e}catch{}Xe=!1}Xe||(z=null)}}else Z=="mouseover"?z=_.fromElement:Z=="mouseout"&&(z=_.toElement);this.relatedTarget=z,xe?(this.clientX=xe.clientX!==void 0?xe.clientX:xe.pageX,this.clientY=xe.clientY!==void 0?xe.clientY:xe.pageY,this.screenX=xe.screenX||0,this.screenY=xe.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:ue[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&J.aa.h.call(this)}}w(J,H);var ue={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),fe=0;function me(_,z,Z,xe,Xe){this.listener=_,this.proxy=null,this.src=z,this.type=Z,this.capture=!!xe,this.ha=Xe,this.key=++fe,this.da=this.fa=!1}function be(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function Le(_){this.src=_,this.g={},this.h=0}Le.prototype.add=function(_,z,Z,xe,Xe){var dt=_.toString();_=this.g[dt],_||(_=this.g[dt]=[],this.h++);var Ft=Be(_,z,xe,Xe);return-1<Ft?(z=_[Ft],Z||(z.fa=!1)):(z=new me(z,this.src,dt,!!xe,Xe),z.fa=Z,_.push(z)),z};function ee(_,z){var Z=z.type;if(Z in _.g){var xe=_.g[Z],Xe=Array.prototype.indexOf.call(xe,z,void 0),dt;(dt=0<=Xe)&&Array.prototype.splice.call(xe,Xe,1),dt&&(be(z),_.g[Z].length==0&&(delete _.g[Z],_.h--))}}function Be(_,z,Z,xe){for(var Xe=0;Xe<_.length;++Xe){var dt=_[Xe];if(!dt.da&&dt.listener==z&&dt.capture==!!Z&&dt.ha==xe)return Xe}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),ae={};function $e(_,z,Z,xe,Xe){if(Array.isArray(z)){for(var dt=0;dt<z.length;dt++)$e(_,z[dt],Z,xe,Xe);return null}return Z=ot(Z),_&&_[we]?_.K(z,Z,c(xe)?!!xe.capture:!1,Xe):qe(_,z,Z,!1,xe,Xe)}function qe(_,z,Z,xe,Xe,dt){if(!z)throw Error("Invalid event type");var Ft=c(Xe)?!!Xe.capture:!!Xe,vn=Pe(_);if(vn||(_[Re]=vn=new Le(_)),Z=vn.add(z,Z,xe,Ft,dt),Z.proxy)return Z;if(xe=it(),Z.proxy=xe,xe.src=_,xe.listener=Z,_.addEventListener)X||(Xe=Ft),Xe===void 0&&(Xe=!1),_.addEventListener(z.toString(),xe,Xe);else if(_.attachEvent)_.attachEvent(Ge(z.toString()),xe);else if(_.addListener&&_.removeListener)_.addListener(xe);else throw Error("addEventListener and attachEvent are unavailable.");return Z}function it(){function _(Z){return z.call(_.src,_.listener,Z)}const z=Tt;return _}function oe(_,z,Z,xe,Xe){if(Array.isArray(z))for(var dt=0;dt<z.length;dt++)oe(_,z[dt],Z,xe,Xe);else xe=c(xe)?!!xe.capture:!!xe,Z=ot(Z),_&&_[we]?(_=_.i,z=String(z).toString(),z in _.g&&(dt=_.g[z],Z=Be(dt,Z,xe,Xe),-1<Z&&(be(dt[Z]),Array.prototype.splice.call(dt,Z,1),dt.length==0&&(delete _.g[z],_.h--)))):_&&(_=Pe(_))&&(z=_.g[z.toString()],_=-1,z&&(_=Be(z,Z,xe,Xe)),(Z=-1<_?z[_]:null)&&je(Z))}function je(_){if(typeof _!="number"&&_&&!_.da){var z=_.src;if(z&&z[we])ee(z.i,_);else{var Z=_.type,xe=_.proxy;z.removeEventListener?z.removeEventListener(Z,xe,_.capture):z.detachEvent?z.detachEvent(Ge(Z),xe):z.addListener&&z.removeListener&&z.removeListener(xe),(Z=Pe(z))?(ee(Z,_),Z.h==0&&(Z.src=null,z[Re]=null)):be(_)}}}function Ge(_){return _ in ae?ae[_]:ae[_]="on"+_}function Tt(_,z){if(_.da)_=!0;else{z=new J(z,this);var Z=_.listener,xe=_.ha||_.src;_.fa&&je(_),_=Z.call(xe,z)}return _}function Pe(_){return _=_[Re],_ instanceof Le?_:null}var Ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function ot(_){return typeof _=="function"?_:(_[Ke]||(_[Ke]=function(z){return _.handleEvent(z)}),_[Ke])}function We(){I.call(this),this.i=new Le(this),this.M=this,this.F=null}w(We,I),We.prototype[we]=!0,We.prototype.removeEventListener=function(_,z,Z,xe){oe(this,_,z,Z,xe)};function Lt(_,z){var Z,xe=_.F;if(xe)for(Z=[];xe;xe=xe.F)Z.push(xe);if(_=_.M,xe=z.type||z,typeof z=="string")z=new H(z,_);else if(z instanceof H)z.target=z.target||_;else{var Xe=z;z=new H(xe,_),R(z,Xe)}if(Xe=!0,Z)for(var dt=Z.length-1;0<=dt;dt--){var Ft=z.g=Z[dt];Xe=St(Ft,xe,!0,z)&&Xe}if(Ft=z.g=_,Xe=St(Ft,xe,!0,z)&&Xe,Xe=St(Ft,xe,!1,z)&&Xe,Z)for(dt=0;dt<Z.length;dt++)Ft=z.g=Z[dt],Xe=St(Ft,xe,!1,z)&&Xe}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var _=this.i,z;for(z in _.g){for(var Z=_.g[z],xe=0;xe<Z.length;xe++)be(Z[xe]);delete _.g[z],_.h--}}this.F=null},We.prototype.K=function(_,z,Z,xe){return this.i.add(String(_),z,!1,Z,xe)},We.prototype.L=function(_,z,Z,xe){return this.i.add(String(_),z,!0,Z,xe)};function St(_,z,Z,xe){if(z=_.i.g[String(z)],!z)return!0;z=z.concat();for(var Xe=!0,dt=0;dt<z.length;++dt){var Ft=z[dt];if(Ft&&!Ft.da&&Ft.capture==Z){var vn=Ft.listener,hi=Ft.ha||Ft.src;Ft.fa&&ee(_.i,Ft),Xe=vn.call(hi,xe)!==!1&&Xe}}return Xe&&!xe.defaultPrevented}function Pt(_,z,Z){if(typeof _=="function")Z&&(_=g(_,Z));else if(_&&typeof _.handleEvent=="function")_=g(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(z)?-1:o.setTimeout(_,z||0)}function mt(_){_.g=Pt(()=>{_.g=null,_.i&&(_.i=!1,mt(_))},_.l);const z=_.h;_.h=null,_.m.apply(null,z)}class _t extends I{constructor(z,Z){super(),this.m=z,this.l=Z,this.h=null,this.i=!1,this.g=null}j(z){this.h=arguments,this.g?this.i=!0:mt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xt(_){I.call(this),this.h=_,this.g={}}w(Xt,I);var Kt=[];function Ut(_){G(_.g,function(z,Z){this.g.hasOwnProperty(Z)&&je(z)},_),_.g={}}Xt.prototype.N=function(){Xt.aa.N.call(this),Ut(this)},Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xr=o.JSON.stringify,Yr=o.JSON.parse,Ve=class{stringify(_){return o.JSON.stringify(_,void 0)}parse(_){return o.JSON.parse(_,void 0)}};function Bt(){}Bt.prototype.h=null;function zt(_){return _.h||(_.h=_.i())}function nr(){}var lr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hr(){H.call(this,"d")}w(hr,H);function Zt(){H.call(this,"c")}w(Zt,H);var yr={},dn=null;function qr(){return dn=dn||new We}yr.La="serverreachability";function Ln(_){H.call(this,yr.La,_)}w(Ln,H);function jn(_){const z=qr();Lt(z,new Ln(z))}yr.STAT_EVENT="statevent";function sr(_,z){H.call(this,yr.STAT_EVENT,_),this.stat=z}w(sr,H);function Gr(_){const z=qr();Lt(z,new sr(z,_))}yr.Ma="timingevent";function ds(_,z){H.call(this,yr.Ma,_),this.size=z}w(ds,H);function Un(_,z){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){_()},z)}function Xi(){this.g=!0}Xi.prototype.xa=function(){this.g=!1};function Cn(_,z,Z,xe,Xe,dt){_.info(function(){if(_.g)if(dt)for(var Ft="",vn=dt.split("&"),hi=0;hi<vn.length;hi++){var Qr=vn[hi].split("=");if(1<Qr.length){var rn=Qr[0];Qr=Qr[1];var wn=rn.split("_");Ft=2<=wn.length&&wn[1]=="type"?Ft+(rn+"="+Qr+"&"):Ft+(rn+"=redacted&")}}else Ft=null;else Ft=dt;return"XMLHTTP REQ ("+xe+") [attempt "+Xe+"]: "+z+`
`+Z+`
`+Ft})}function ai(_,z,Z,xe,Xe,dt,Ft){_.info(function(){return"XMLHTTP RESP ("+xe+") [ attempt "+Xe+"]: "+z+`
`+Z+`
`+dt+" "+Ft})}function le(_,z,Z,xe){_.info(function(){return"XMLHTTP TEXT ("+z+"): "+_e(_,Z)+(xe?" "+xe:"")})}function Ne(_,z){_.info(function(){return"TIMEOUT: "+z})}Xi.prototype.info=function(){};function _e(_,z){if(!_.g)return z;if(!z)return null;try{var Z=JSON.parse(z);if(Z){for(_=0;_<Z.length;_++)if(Array.isArray(Z[_])){var xe=Z[_];if(!(2>xe.length)){var Xe=xe[1];if(Array.isArray(Xe)&&!(1>Xe.length)){var dt=Xe[0];if(dt!="noop"&&dt!="stop"&&dt!="close")for(var Ft=1;Ft<Xe.length;Ft++)Xe[Ft]=""}}}}return xr(Z)}catch{return z}}var ke={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ae={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ie;function Qe(){}w(Qe,Bt),Qe.prototype.g=function(){return new XMLHttpRequest},Qe.prototype.i=function(){return{}},Ie=new Qe;function lt(_,z,Z,xe){this.j=_,this.i=z,this.l=Z,this.R=xe||1,this.U=new Xt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new et}function et(){this.i=null,this.g="",this.h=!1}var tt={},st={};function kt(_,z,Z){_.L=1,_.v=Xo(Us(z)),_.m=Z,_.P=!0,Ot(_,null)}function Ot(_,z){_.F=Date.now(),At(_),_.A=Us(_.v);var Z=_.A,xe=_.R;Array.isArray(xe)||(xe=[String(xe)]),kr(Z.i,"t",xe),_.C=0,Z=_.j.J,_.h=new et,_.g=el(_.j,Z?z:null,!_.m),0<_.O&&(_.M=new _t(g(_.Y,_,_.g),_.O)),z=_.U,Z=_.g,xe=_.ca;var Xe="readystatechange";Array.isArray(Xe)||(Xe&&(Kt[0]=Xe.toString()),Xe=Kt);for(var dt=0;dt<Xe.length;dt++){var Ft=$e(Z,Xe[dt],xe||z.handleEvent,!1,z.h||z);if(!Ft)break;z.g[Ft.key]=Ft}z=_.H?N(_.H):{},_.m?(_.u||(_.u="POST"),z["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,z)):(_.u="GET",_.g.ea(_.A,_.u,null,z)),jn(),Cn(_.i,_.u,_.A,_.l,_.R,_.m)}lt.prototype.ca=function(_){_=_.target;const z=this.M;z&&Ns(_)==3?z.j():this.Y(_)},lt.prototype.Y=function(_){try{if(_==this.g)e:{const wn=Ns(this.g);var z=this.g.Ba();const ia=this.g.Z();if(!(3>wn)&&(wn!=3||this.g&&(this.h.h||this.g.oa()||nc(this.g)))){this.J||wn!=4||z==7||(z==8||0>=ia?jn(3):jn(2)),fn(this);var Z=this.g.Z();this.X=Z;t:if(Wt(this)){var xe=nc(this.g);_="";var Xe=xe.length,dt=Ns(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),Mr(this);var Ft="";break t}this.h.i=new o.TextDecoder}for(z=0;z<Xe;z++)this.h.h=!0,_+=this.h.i.decode(xe[z],{stream:!(dt&&z==Xe-1)});xe.length=0,this.h.g+=_,this.C=0,Ft=this.h.g}else Ft=this.g.oa();if(this.o=Z==200,ai(this.i,this.u,this.A,this.l,this.R,wn,Z),this.o){if(this.T&&!this.K){t:{if(this.g){var vn,hi=this.g;if((vn=hi.g?hi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(vn)){var Qr=vn;break t}}Qr=null}if(Z=Qr)le(this.i,this.l,Z,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Da(this,Z);else{this.o=!1,this.s=3,Gr(12),gn(this),Mr(this);break e}}if(this.P){Z=!0;let Ws;for(;!this.J&&this.C<Ft.length;)if(Ws=Dt(this,Ft),Ws==st){wn==4&&(this.s=4,Gr(14),Z=!1),le(this.i,this.l,null,"[Incomplete Response]");break}else if(Ws==tt){this.s=4,Gr(15),le(this.i,this.l,Ft,"[Invalid Chunk]"),Z=!1;break}else le(this.i,this.l,Ws,null),Da(this,Ws);if(Wt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wn!=4||Ft.length!=0||this.h.h||(this.s=1,Gr(16),Z=!1),this.o=this.o&&Z,!Z)le(this.i,this.l,Ft,"[Invalid Chunked Response]"),gn(this),Mr(this);else if(0<Ft.length&&!this.W){this.W=!0;var rn=this.j;rn.g==this&&rn.ba&&!rn.M&&(rn.j.info("Great, no buffering proxy detected. Bytes received: "+Ft.length),ln(rn),rn.M=!0,Gr(11))}}else le(this.i,this.l,Ft,null),Da(this,Ft);wn==4&&gn(this),this.o&&!this.J&&(wn==4?xn(this.j,this):(this.o=!1,At(this)))}else As(this.g),Z==400&&0<Ft.indexOf("Unknown SID")?(this.s=3,Gr(12)):(this.s=0,Gr(13)),gn(this),Mr(this)}}}catch{}finally{}};function Wt(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function Dt(_,z){var Z=_.C,xe=z.indexOf(`
`,Z);return xe==-1?st:(Z=Number(z.substring(Z,xe)),isNaN(Z)?tt:(xe+=1,xe+Z>z.length?st:(z=z.slice(xe,xe+Z),_.C=xe+Z,z)))}lt.prototype.cancel=function(){this.J=!0,gn(this)};function At(_){_.S=Date.now()+_.I,Er(_,_.I)}function Er(_,z){if(_.B!=null)throw Error("WatchDog timer not null");_.B=Un(g(_.ba,_),z)}function fn(_){_.B&&(o.clearTimeout(_.B),_.B=null)}lt.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(Ne(this.i,this.A),this.L!=2&&(jn(),Gr(17)),gn(this),this.s=2,Mr(this)):Er(this,this.S-_)};function Mr(_){_.j.G==0||_.J||xn(_.j,_)}function gn(_){fn(_);var z=_.M;z&&typeof z.ma=="function"&&z.ma(),_.M=null,Ut(_.U),_.g&&(z=_.g,_.g=null,z.abort(),z.ma())}function Da(_,z){try{var Z=_.j;if(Z.G!=0&&(Z.g==_||Tn(Z.h,_))){if(!_.K&&Tn(Z.h,_)&&Z.G==3){try{var xe=Z.Da.g.parse(z)}catch{xe=null}if(Array.isArray(xe)&&xe.length==3){var Xe=xe;if(Xe[0]==0){e:if(!Z.u){if(Z.g)if(Z.g.F+3e3<_.F)oi(Z),Ce(Z);else break e;Ir(Z),Gr(18)}}else Z.za=Xe[1],0<Z.za-Z.T&&37500>Xe[2]&&Z.F&&Z.v==0&&!Z.C&&(Z.C=Un(g(Z.Za,Z),6e3));if(1>=Ko(Z.h)&&Z.ca){try{Z.ca()}catch{}Z.ca=void 0}}else On(Z,11)}else if((_.K||Z.g==_)&&oi(Z),!O(z))for(Xe=Z.Da.g.parse(z),z=0;z<Xe.length;z++){let Qr=Xe[z];if(Z.T=Qr[0],Qr=Qr[1],Z.G==2)if(Qr[0]=="c"){Z.K=Qr[1],Z.ia=Qr[2];const rn=Qr[3];rn!=null&&(Z.la=rn,Z.j.info("VER="+Z.la));const wn=Qr[4];wn!=null&&(Z.Aa=wn,Z.j.info("SVER="+Z.Aa));const ia=Qr[5];ia!=null&&typeof ia=="number"&&0<ia&&(xe=1.5*ia,Z.L=xe,Z.j.info("backChannelRequestTimeoutMs_="+xe)),xe=Z;const Ws=_.g;if(Ws){const $a=Ws.g?Ws.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($a){var dt=xe.h;dt.g||$a.indexOf("spdy")==-1&&$a.indexOf("quic")==-1&&$a.indexOf("h2")==-1||(dt.j=dt.l,dt.g=new Set,dt.h&&(wu(dt,dt.h),dt.h=null))}if(xe.D){const tl=Ws.g?Ws.g.getResponseHeader("X-HTTP-Session-Id"):null;tl&&(xe.ya=tl,tn(xe.I,xe.D,tl))}}Z.G=3,Z.l&&Z.l.ua(),Z.ba&&(Z.R=Date.now()-_.F,Z.j.info("Handshake RTT: "+Z.R+"ms")),xe=Z;var Ft=_;if(xe.qa=Ro(xe,xe.J?xe.ia:null,xe.W),Ft.K){vi(xe.h,Ft);var vn=Ft,hi=xe.L;hi&&(vn.I=hi),vn.B&&(fn(vn),At(vn)),xe.g=Ft}else br(xe);0<Z.i.length&&He(Z)}else Qr[0]!="stop"&&Qr[0]!="close"||On(Z,7);else Z.G==3&&(Qr[0]=="stop"||Qr[0]=="close"?Qr[0]=="stop"?On(Z,7):ie(Z):Qr[0]!="noop"&&Z.l&&Z.l.ta(Qr),Z.v=0)}}jn(4)}catch{}}var Oa=class{constructor(_,z){this.g=_,this.map=z}};function ra(_){this.l=_||10,o.PerformanceNavigationTiming?(_=o.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fi(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Ko(_){return _.h?1:_.g?_.g.size:0}function Tn(_,z){return _.h?_.h==z:_.g?_.g.has(z):!1}function wu(_,z){_.g?_.g.add(z):_.h=z}function vi(_,z){_.h&&_.h==z?_.h=null:_.g&&_.g.has(z)&&_.g.delete(z)}ra.prototype.cancel=function(){if(this.i=bu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function bu(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let z=_.i;for(const Z of _.g.values())z=z.concat(Z.D);return z}return y(_.i)}function ec(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(l(_)){for(var z=[],Z=_.length,xe=0;xe<Z;xe++)z.push(_[xe]);return z}z=[],Z=0;for(xe in _)z[Z++]=_[xe];return z}function Ma(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(l(_)||typeof _=="string"){var z=[];_=_.length;for(var Z=0;Z<_;Z++)z.push(Z);return z}z=[],Z=0;for(const xe in _)z[Z++]=xe;return z}}}function Ba(_,z){if(_.forEach&&typeof _.forEach=="function")_.forEach(z,void 0);else if(l(_)||typeof _=="string")Array.prototype.forEach.call(_,z,void 0);else for(var Z=Ma(_),xe=ec(_),Xe=xe.length,dt=0;dt<Xe;dt++)z.call(void 0,xe[dt],Z&&Z[dt],_)}var Vs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tc(_,z){if(_){_=_.split("&");for(var Z=0;Z<_.length;Z++){var xe=_[Z].indexOf("="),Xe=null;if(0<=xe){var dt=_[Z].substring(0,xe);Xe=_[Z].substring(xe+1)}else dt=_[Z];z(dt,Xe?decodeURIComponent(Xe.replace(/\+/g," ")):"")}}}function Pn(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof Pn){this.h=_.h,rc(this,_.j),this.o=_.o,this.g=_.g,wl(this,_.s),this.l=_.l;var z=_.i,Z=new zs;Z.i=z.i,z.g&&(Z.g=new Map(z.g),Z.h=z.h),bl(this,Z),this.m=_.m}else _&&(z=String(_).match(Vs))?(this.h=!1,rc(this,z[1]||"",!0),this.o=Kr(z[2]||""),this.g=Kr(z[3]||"",!0),wl(this,z[4]),this.l=Kr(z[5]||"",!0),bl(this,z[6]||"",!0),this.m=Kr(z[7]||"")):(this.h=!1,this.i=new zs(null,this.h))}Pn.prototype.toString=function(){var _=[],z=this.j;z&&_.push(ya(z,Rc,!0),":");var Z=this.g;return(Z||z=="file")&&(_.push("//"),(z=this.o)&&_.push(ya(z,Rc,!0),"@"),_.push(encodeURIComponent(String(Z)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Z=this.s,Z!=null&&_.push(":",String(Z))),(Z=this.l)&&(this.g&&Z.charAt(0)!="/"&&_.push("/"),_.push(ya(Z,Z.charAt(0)=="/"?yd:vd,!0))),(Z=this.i.toString())&&_.push("?",Z),(Z=this.m)&&_.push("#",ya(Z,Yo)),_.join("")};function Us(_){return new Pn(_)}function rc(_,z,Z){_.j=Z?Kr(z,!0):z,_.j&&(_.j=_.j.replace(/:$/,""))}function wl(_,z){if(z){if(z=Number(z),isNaN(z)||0>z)throw Error("Bad port number "+z);_.s=z}else _.s=null}function bl(_,z,Z){z instanceof zs?(_.i=z,Ao(_.i,_.h)):(Z||(z=ya(z,Fc)),_.i=new zs(z,_.h))}function tn(_,z,Z){_.i.set(z,Z)}function Xo(_){return tn(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function Kr(_,z){return _?z?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function ya(_,z,Z){return typeof _=="string"?(_=encodeURI(_).replace(z,Pc),Z&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Pc(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var Rc=/[#\/\?@]/g,vd=/[#\?:]/g,yd=/[#\?]/g,Fc=/[#\?@]/g,Yo=/#/g;function zs(_,z){this.h=this.g=null,this.i=_||null,this.j=!!z}function fs(_){_.g||(_.g=new Map,_.h=0,_.i&&tc(_.i,function(z,Z){_.add(decodeURIComponent(z.replace(/\+/g," ")),Z)}))}t=zs.prototype,t.add=function(_,z){fs(this),this.i=null,_=Va(this,_);var Z=this.g.get(_);return Z||this.g.set(_,Z=[]),Z.push(z),this.h+=1,this};function $s(_,z){fs(_),z=Va(_,z),_.g.has(z)&&(_.i=null,_.h-=_.g.get(z).length,_.g.delete(z))}function wa(_,z){return fs(_),z=Va(_,z),_.g.has(z)}t.forEach=function(_,z){fs(this),this.g.forEach(function(Z,xe){Z.forEach(function(Xe){_.call(z,Xe,xe,this)},this)},this)},t.na=function(){fs(this);const _=Array.from(this.g.values()),z=Array.from(this.g.keys()),Z=[];for(let xe=0;xe<z.length;xe++){const Xe=_[xe];for(let dt=0;dt<Xe.length;dt++)Z.push(z[xe])}return Z},t.V=function(_){fs(this);let z=[];if(typeof _=="string")wa(this,_)&&(z=z.concat(this.g.get(Va(this,_))));else{_=Array.from(this.g.values());for(let Z=0;Z<_.length;Z++)z=z.concat(_[Z])}return z},t.set=function(_,z){return fs(this),this.i=null,_=Va(this,_),wa(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[z]),this.h+=1,this},t.get=function(_,z){return _?(_=this.V(_),0<_.length?String(_[0]):z):z};function kr(_,z,Z){$s(_,z),0<Z.length&&(_.i=null,_.g.set(Va(_,z),y(Z)),_.h+=Z.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],z=Array.from(this.g.keys());for(var Z=0;Z<z.length;Z++){var xe=z[Z];const dt=encodeURIComponent(String(xe)),Ft=this.V(xe);for(xe=0;xe<Ft.length;xe++){var Xe=dt;Ft[xe]!==""&&(Xe+="="+encodeURIComponent(String(Ft[xe]))),_.push(Xe)}}return this.i=_.join("&")};function Va(_,z){return z=String(z),_.j&&(z=z.toLowerCase()),z}function Ao(_,z){z&&!_.j&&(fs(_),_.i=null,_.g.forEach(function(Z,xe){var Xe=xe.toLowerCase();xe!=Xe&&($s(this,xe),kr(this,Xe,Z))},_)),_.j=z}function $0(_,z){const Z=new Xi;if(o.Image){const xe=new Image;xe.onload=m(Ti,Z,"TestLoadImage: loaded",!0,z,xe),xe.onerror=m(Ti,Z,"TestLoadImage: error",!1,z,xe),xe.onabort=m(Ti,Z,"TestLoadImage: abort",!1,z,xe),xe.ontimeout=m(Ti,Z,"TestLoadImage: timeout",!1,z,xe),o.setTimeout(function(){xe.ontimeout&&xe.ontimeout()},1e4),xe.src=_}else z(!1)}function wd(_,z){const Z=new Xi,xe=new AbortController,Xe=setTimeout(()=>{xe.abort(),Ti(Z,"TestPingServer: timeout",!1,z)},1e4);fetch(_,{signal:xe.signal}).then(dt=>{clearTimeout(Xe),dt.ok?Ti(Z,"TestPingServer: ok",!0,z):Ti(Z,"TestPingServer: server error",!1,z)}).catch(()=>{clearTimeout(Xe),Ti(Z,"TestPingServer: error",!1,z)})}function Ti(_,z,Z,xe,Xe){try{Xe&&(Xe.onload=null,Xe.onerror=null,Xe.onabort=null,Xe.ontimeout=null),xe(Z)}catch{}}function Qo(){this.g=new Ve}function bd(_,z,Z){const xe=Z||"";try{Ba(_,function(Xe,dt){let Ft=Xe;c(Xe)&&(Ft=xr(Xe)),z.push(xe+dt+"="+encodeURIComponent(Ft))})}catch(Xe){throw z.push(xe+"type="+encodeURIComponent("_badmap")),Xe}}function Jo(_){this.l=_.Ub||null,this.j=_.eb||!1}w(Jo,Bt),Jo.prototype.g=function(){return new Io(this.l,this.j)},Jo.prototype.i=(function(_){return function(){return _}})({});function Io(_,z){We.call(this),this.D=_,this.o=z,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Io,We),t=Io.prototype,t.open=function(_,z){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=z,this.readyState=1,na(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const z={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(z.body=_),(this.D||o).fetch(new Request(this.A,z)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hs(this)),this.readyState=0},t.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,na(this)),this.g&&(this.readyState=3,na(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lc(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lc(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}t.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var z=_.value?_.value:new Uint8Array(0);(z=this.v.decode(z,{stream:!_.done}))&&(this.response=this.responseText+=z)}_.done?Hs(this):na(this),this.readyState==3&&Lc(this)}},t.Ra=function(_){this.g&&(this.response=this.responseText=_,Hs(this))},t.Qa=function(_){this.g&&(this.response=_,Hs(this))},t.ga=function(){this.g&&Hs(this)};function Hs(_){_.readyState=4,_.l=null,_.j=null,_.v=null,na(_)}t.setRequestHeader=function(_,z){this.u.append(_,z)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],z=this.h.entries();for(var Z=z.next();!Z.done;)Z=Z.value,_.push(Z[0]+": "+Z[1]),Z=z.next();return _.join(`\r
`)};function na(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Io.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function Ua(_){let z="";return G(_,function(Z,xe){z+=xe,z+=":",z+=Z,z+=`\r
`}),z}function _l(_,z,Z){e:{for(xe in Z){var xe=!1;break e}xe=!0}xe||(Z=Ua(Z),typeof _=="string"?Z!=null&&encodeURIComponent(String(Z)):tn(_,z,Z))}function Dn(_){We.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Dn,We);var _u=/^https?$/i,Zo=["POST","PUT"];t=Dn.prototype,t.Ha=function(_){this.J=_},t.ea=function(_,z,Z,xe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);z=z?z.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ie.g(),this.v=this.o?zt(this.o):zt(Ie),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(z,String(_),!0),this.B=!1}catch(dt){vo(this,dt);return}if(_=Z||"",Z=new Map(this.headers),xe)if(Object.getPrototypeOf(xe)===Object.prototype)for(var Xe in xe)Z.set(Xe,xe[Xe]);else if(typeof xe.keys=="function"&&typeof xe.get=="function")for(const dt of xe.keys())Z.set(dt,xe.get(dt));else throw Error("Unknown input type for opt_headers: "+String(xe));xe=Array.from(Z.keys()).find(dt=>dt.toLowerCase()=="content-type"),Xe=o.FormData&&_ instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Zo,z,void 0))||xe||Xe||Z.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[dt,Ft]of Z)this.g.setRequestHeader(dt,Ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Po(this),this.u=!0,this.g.send(_),this.u=!1}catch(dt){vo(this,dt)}};function vo(_,z){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=z,_.m=5,kl(_),qs(_)}function kl(_){_.A||(_.A=!0,Lt(_,"complete"),Lt(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,Lt(this,"complete"),Lt(this,"abort"),qs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qs(this,!0)),Dn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?El(this):this.bb())},t.bb=function(){El(this)};function El(_){if(_.h&&typeof a<"u"&&(!_.v[1]||Ns(_)!=4||_.Z()!=2)){if(_.u&&Ns(_)==4)Pt(_.Ea,0,_);else if(Lt(_,"readystatechange"),Ns(_)==4){_.h=!1;try{const Ft=_.Z();e:switch(Ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var z=!0;break e;default:z=!1}var Z;if(!(Z=z)){var xe;if(xe=Ft===0){var Xe=String(_.D).match(Vs)[1]||null;!Xe&&o.self&&o.self.location&&(Xe=o.self.location.protocol.slice(0,-1)),xe=!_u.test(Xe?Xe.toLowerCase():"")}Z=xe}if(Z)Lt(_,"complete"),Lt(_,"success");else{_.m=6;try{var dt=2<Ns(_)?_.g.statusText:""}catch{dt=""}_.l=dt+" ["+_.Z()+"]",kl(_)}}finally{qs(_)}}}}function qs(_,z){if(_.g){Po(_);const Z=_.g,xe=_.v[0]?()=>{}:null;_.g=null,_.v=null,z||Lt(_,"ready");try{Z.onreadystatechange=xe}catch{}}}function Po(_){_.I&&(o.clearTimeout(_.I),_.I=null)}t.isActive=function(){return!!this.g};function Ns(_){return _.g?_.g.readyState:0}t.Z=function(){try{return 2<Ns(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(_){if(this.g){var z=this.g.responseText;return _&&z.indexOf(_)==0&&(z=z.substring(_.length)),Yr(z)}};function nc(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function As(_){const z={};_=(_.g&&2<=Ns(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let xe=0;xe<_.length;xe++){if(O(_[xe]))continue;var Z=A(_[xe]);const Xe=Z[0];if(Z=Z[1],typeof Z!="string")continue;Z=Z.trim();const dt=z[Xe]||[];z[Xe]=dt,dt.push(Z)}L(z,function(xe){return xe.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hs(_,z,Z){return Z&&Z.internalChannelParams&&Z.internalChannelParams[_]||z}function D(_){this.Aa=0,this.i=[],this.j=new Xi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hs("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hs("baseRetryDelayMs",5e3,_),this.cb=hs("retryDelaySeedMs",1e4,_),this.Wa=hs("forwardChannelMaxRetries",2,_),this.wa=hs("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new ra(_&&_.concurrentRequestLimit),this.Da=new Qo,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=D.prototype,t.la=8,t.G=1,t.connect=function(_,z,Z,xe){Gr(0),this.W=_,this.H=z||{},Z&&xe!==void 0&&(this.H.OSID=Z,this.H.OAID=xe),this.F=this.X,this.I=Ro(this,null,this.W),He(this)};function ie(_){if(De(_),_.G==3){var z=_.U++,Z=Us(_.I);if(tn(Z,"SID",_.K),tn(Z,"RID",z),tn(Z,"TYPE","terminate"),Yt(_,Z),z=new lt(_,_.j,z),z.L=2,z.v=Xo(Us(Z)),Z=!1,o.navigator&&o.navigator.sendBeacon)try{Z=o.navigator.sendBeacon(z.v.toString(),"")}catch{}!Z&&o.Image&&(new Image().src=z.v,Z=!0),Z||(z.g=el(z.j,null),z.g.ea(z.v)),z.F=Date.now(),At(z)}Yi(_)}function Ce(_){_.g&&(ln(_),_.g.cancel(),_.g=null)}function De(_){Ce(_),_.u&&(o.clearTimeout(_.u),_.u=null),oi(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&o.clearTimeout(_.s),_.s=null)}function He(_){if(!fi(_.h)&&!_.s){_.s=!0;var z=_.Ga;ve||ne(),re||(ve(),re=!0),W.add(z,_),_.B=0}}function vt(_,z){return Ko(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=z.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=Un(g(_.Ga,_,z),Ni(_,_.B)),_.B++,!0)}t.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const Xe=new lt(this,this.j,_);let dt=this.o;if(this.S&&(dt?(dt=N(dt),R(dt,this.S)):dt=this.S),this.m!==null||this.O||(Xe.H=dt,dt=null),this.P)e:{for(var z=0,Z=0;Z<this.i.length;Z++){t:{var xe=this.i[Z];if("__data__"in xe.map&&(xe=xe.map.__data__,typeof xe=="string")){xe=xe.length;break t}xe=void 0}if(xe===void 0)break;if(z+=xe,4096<z){z=Z;break e}if(z===4096||Z===this.i.length-1){z=Z+1;break e}}z=1e3}else z=1e3;z=er(this,Xe,z),Z=Us(this.I),tn(Z,"RID",_),tn(Z,"CVER",22),this.D&&tn(Z,"X-HTTP-Session-Id",this.D),Yt(this,Z),dt&&(this.O?z="headers="+encodeURIComponent(String(Ua(dt)))+"&"+z:this.m&&_l(Z,this.m,dt)),wu(this.h,Xe),this.Ua&&tn(Z,"TYPE","init"),this.P?(tn(Z,"$req",z),tn(Z,"SID","null"),Xe.T=!0,kt(Xe,Z,null)):kt(Xe,Z,z),this.G=2}}else this.G==3&&(_?bt(this,_):this.i.length==0||fi(this.h)||bt(this))};function bt(_,z){var Z;z?Z=z.l:Z=_.U++;const xe=Us(_.I);tn(xe,"SID",_.K),tn(xe,"RID",Z),tn(xe,"AID",_.T),Yt(_,xe),_.m&&_.o&&_l(xe,_.m,_.o),Z=new lt(_,_.j,Z,_.B+1),_.m===null&&(Z.H=_.o),z&&(_.i=z.D.concat(_.i)),z=er(_,Z,1e3),Z.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),wu(_.h,Z),kt(Z,xe,z)}function Yt(_,z){_.H&&G(_.H,function(Z,xe){tn(z,xe,Z)}),_.l&&Ba({},function(Z,xe){tn(z,xe,Z)})}function er(_,z,Z){Z=Math.min(_.i.length,Z);var xe=_.l?g(_.l.Na,_.l,_):null;e:{var Xe=_.i;let dt=-1;for(;;){const Ft=["count="+Z];dt==-1?0<Z?(dt=Xe[0].g,Ft.push("ofs="+dt)):dt=0:Ft.push("ofs="+dt);let vn=!0;for(let hi=0;hi<Z;hi++){let Qr=Xe[hi].g;const rn=Xe[hi].map;if(Qr-=dt,0>Qr)dt=Math.max(0,Xe[hi].g-100),vn=!1;else try{bd(rn,Ft,"req"+Qr+"_")}catch{xe&&xe(rn)}}if(vn){xe=Ft.join("&");break e}}}return _=_.i.splice(0,Z),z.D=_,xe}function br(_){if(!_.g&&!_.u){_.Y=1;var z=_.Fa;ve||ne(),re||(ve(),re=!0),W.add(z,_),_.v=0}}function Ir(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=Un(g(_.Fa,_),Ni(_,_.v)),_.v++,!0)}t.Fa=function(){if(this.u=null,Jn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=Un(g(this.ab,this),_)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gr(10),Ce(this),Jn(this))};function ln(_){_.A!=null&&(o.clearTimeout(_.A),_.A=null)}function Jn(_){_.g=new lt(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var z=Us(_.qa);tn(z,"RID","rpc"),tn(z,"SID",_.K),tn(z,"AID",_.T),tn(z,"CI",_.F?"0":"1"),!_.F&&_.ja&&tn(z,"TO",_.ja),tn(z,"TYPE","xmlhttp"),Yt(_,z),_.m&&_.o&&_l(z,_.m,_.o),_.L&&(_.g.I=_.L);var Z=_.g;_=_.ia,Z.L=1,Z.v=Xo(Us(z)),Z.m=null,Z.P=!0,Ot(Z,_)}t.Za=function(){this.C!=null&&(this.C=null,Ce(this),Ir(this),Gr(19))};function oi(_){_.C!=null&&(o.clearTimeout(_.C),_.C=null)}function xn(_,z){var Z=null;if(_.g==z){oi(_),ln(_),_.g=null;var xe=2}else if(Tn(_.h,z))Z=z.D,vi(_.h,z),xe=1;else return;if(_.G!=0){if(z.o)if(xe==1){Z=z.m?z.m.length:0,z=Date.now()-z.F;var Xe=_.B;xe=qr(),Lt(xe,new ds(xe,Z)),He(_)}else br(_);else if(Xe=z.s,Xe==3||Xe==0&&0<z.X||!(xe==1&&vt(_,z)||xe==2&&Ir(_)))switch(Z&&0<Z.length&&(z=_.h,z.i=z.i.concat(Z)),Xe){case 1:On(_,5);break;case 4:On(_,10);break;case 3:On(_,6);break;default:On(_,2)}}}function Ni(_,z){let Z=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(Z*=2),Z*z}function On(_,z){if(_.j.info("Error code "+z),z==2){var Z=g(_.fb,_),xe=_.Xa;const Xe=!xe;xe=new Pn(xe||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||rc(xe,"https"),Xo(xe),Xe?$0(xe.toString(),Z):wd(xe.toString(),Z)}else Gr(2);_.G=0,_.l&&_.l.sa(z),Yi(_),De(_)}t.fb=function(_){_?(this.j.info("Successfully pinged google.com"),Gr(2)):(this.j.info("Failed to ping google.com"),Gr(1))};function Yi(_){if(_.G=0,_.ka=[],_.l){const z=bu(_.h);(z.length!=0||_.i.length!=0)&&(k(_.ka,z),k(_.ka,_.i),_.h.i.length=0,y(_.i),_.i.length=0),_.l.ra()}}function Ro(_,z,Z){var xe=Z instanceof Pn?Us(Z):new Pn(Z);if(xe.g!="")z&&(xe.g=z+"."+xe.g),wl(xe,xe.s);else{var Xe=o.location;xe=Xe.protocol,z=z?z+"."+Xe.hostname:Xe.hostname,Xe=+Xe.port;var dt=new Pn(null);xe&&rc(dt,xe),z&&(dt.g=z),Xe&&wl(dt,Xe),Z&&(dt.l=Z),xe=dt}return Z=_.D,z=_.ya,Z&&z&&tn(xe,Z,z),tn(xe,"VER",_.la),Yt(_,xe),xe}function el(_,z,Z){if(z&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return z=_.Ca&&!_.pa?new Dn(new Jo({eb:Z})):new Dn(_.pa),z.Ha(_.J),z}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ku(){}t=ku.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ic(){}ic.prototype.g=function(_,z){return new Mi(_,z)};function Mi(_,z){We.call(this),this.g=new D(z),this.l=_,this.h=z&&z.messageUrlParams||null,_=z&&z.messageHeaders||null,z&&z.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=z&&z.initMessageHeaders||null,z&&z.messageContentType&&(_?_["X-WebChannel-Content-Type"]=z.messageContentType:_={"X-WebChannel-Content-Type":z.messageContentType}),z&&z.va&&(_?_["X-WebChannel-Client-Profile"]=z.va:_={"X-WebChannel-Client-Profile":z.va}),this.g.S=_,(_=z&&z.Sb)&&!O(_)&&(this.g.m=_),this.v=z&&z.supportsCrossDomainXhr||!1,this.u=z&&z.sendRawJson||!1,(z=z&&z.httpSessionIdParam)&&!O(z)&&(this.g.D=z,_=this.h,_!==null&&z in _&&(_=this.h,z in _&&delete _[z])),this.j=new ba(this)}w(Mi,We),Mi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mi.prototype.close=function(){ie(this.g)},Mi.prototype.o=function(_){var z=this.g;if(typeof _=="string"){var Z={};Z.__data__=_,_=Z}else this.u&&(Z={},Z.__data__=xr(_),_=Z);z.i.push(new Oa(z.Ya++,_)),z.G==3&&He(z)},Mi.prototype.N=function(){this.g.l=null,delete this.j,ie(this.g),delete this.g,Mi.aa.N.call(this)};function za(_){hr.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var z=_.__sm__;if(z){e:{for(const Z in z){_=Z;break e}_=void 0}(this.i=_)&&(_=this.i,z=z!==null&&_ in z?z[_]:void 0),this.data=z}else this.data=_}w(za,hr);function jc(){Zt.call(this),this.status=1}w(jc,Zt);function ba(_){this.g=_}w(ba,ku),ba.prototype.ua=function(){Lt(this.g,"a")},ba.prototype.ta=function(_){Lt(this.g,new za(_))},ba.prototype.sa=function(_){Lt(this.g,new jc)},ba.prototype.ra=function(){Lt(this.g,"b")},ic.prototype.createWebChannel=ic.prototype.g,Mi.prototype.send=Mi.prototype.o,Mi.prototype.open=Mi.prototype.m,Mi.prototype.close=Mi.prototype.close,cT=function(){return new ic},lT=function(){return qr()},oT=yr,w3={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ke.NO_ERROR=0,ke.TIMEOUT=8,ke.HTTP_ERROR=6,Tx=ke,Ae.COMPLETE="complete",aT=Ae,nr.EventType=lr,lr.OPEN="a",lr.CLOSE="b",lr.ERROR="c",lr.MESSAGE="d",We.prototype.listen=We.prototype.K,fm=nr,Dn.prototype.listenOnce=Dn.prototype.L,Dn.prototype.getLastError=Dn.prototype.Ka,Dn.prototype.getLastErrorCode=Dn.prototype.Ba,Dn.prototype.getStatus=Dn.prototype.Z,Dn.prototype.getResponseJson=Dn.prototype.Oa,Dn.prototype.getResponseText=Dn.prototype.oa,Dn.prototype.send=Dn.prototype.ea,Dn.prototype.setWithCredentials=Dn.prototype.Ha,sT=Dn}).apply(typeof $2<"u"?$2:typeof self<"u"?self:typeof window<"u"?window:{});const nk="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ha.UNAUTHENTICATED=new ha(null),ha.GOOGLE_CREDENTIALS=new ha("google-credentials-uid"),ha.FIRST_PARTY=new ha("first-party-uid"),ha.MOCK_USER=new ha("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ep="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=new Ww("@firebase/firestore");function r1(){return m0.logLevel}function bB(t){m0.setLogLevel(t)}function Nt(t,...e){if(m0.logLevel<=hn.DEBUG){const r=e.map(Kw);m0.debug(`Firestore (${ep}): ${t}`,...r)}}function ks(t,...e){if(m0.logLevel<=hn.ERROR){const r=e.map(Kw);m0.error(`Firestore (${ep}): ${t}`,...r)}}function xl(t,...e){if(m0.logLevel<=hn.WARN){const r=e.map(Kw);m0.warn(`Firestore (${ep}): ${t}`,...r)}}function Kw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(t="Unexpected state"){const e=`FIRESTORE (${ep}) INTERNAL ASSERTION FAILED: `+t;throw ks(e),new Error(e)}function fr(t,e){t||Jt()}function _B(t,e){t||Jt()}function qt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ct extends Nc{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(ha.UNAUTHENTICATED)))}shutdown(){}}class kB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class EB{constructor(e){this.t=e,this.currentUser=ha.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){fr(this.o===void 0);let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let s=new xa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new xa,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},o=l=>{Nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((l=>o(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new xa)}}),0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(Nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(fr(typeof n.accessToken=="string"),new uT(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fr(e===null||typeof e=="string"),new ha(e)}}class SB{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=ha.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class CB{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new SB(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(ha.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class fT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TB{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){fr(this.o===void 0);const n=s=>{s.error!=null&&Nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,Nt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>n(s)))};const i=s=>{Nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(fr(typeof r.token=="string"),this.R=r.token,new fT(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class NB{getToken(){return Promise.resolve(new fT(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=AB(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<r&&(n+=e.charAt(i[s]%e.length))}return n}}function Or(t,e){return t<e?-1:t>e?1:0}function P1(t,e,r){return t.length===e.length&&t.every(((n,i)=>r(n,e[i])))}function hT(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ct(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ct(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Ct(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ct(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Di.fromMillis(Date.now())}static fromDate(e){return Di.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Di(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Or(this.nanoseconds,e.nanoseconds):Or(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vr(e)}static min(){return new vr(new Di(0,0))}static max(){return new vr(new Di(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,r,n){r===void 0?r=0:r>e.length&&Jt(),n===void 0?n=e.length-r:n>e.length-r&&Jt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Wm.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Wm?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const s=e.get(i),a=r.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class pn extends Wm{construct(e,r,n){return new pn(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ct(ut.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((i=>i.length>0)))}return new pn(r)}static emptyPath(){return new pn([])}}const IB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _i extends Wm{construct(e,r,n){return new _i(e,r,n)}static isValidIdentifier(e){return IB.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_i.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new _i(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const s=()=>{if(n.length===0)throw new Ct(ut.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Ct(ut.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ct(ut.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(n+=o,i++):(s(),i++)}if(s(),a)throw new Ct(ut.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _i(r)}static emptyPath(){return new _i([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.path=e}static fromPath(e){return new Gt(pn.fromString(e))}static fromName(e){return new Gt(pn.fromString(e).popFirst(5))}static empty(){return new Gt(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return pn.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Gt(new pn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,r,n,i){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=i}}function b3(t){return t.fields.find((e=>e.kind===2))}function hf(t){return t.fields.filter((e=>e.kind!==2))}function PB(t,e){let r=Or(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=RB(t.fields[n],e.fields[n]),r!==0)return r;return Or(t.fields.length,e.fields.length)}R1.UNKNOWN_ID=-1;class Nf{constructor(e,r){this.fieldPath=e,this.kind=r}}function RB(t,e){const r=_i.comparator(t.fieldPath,e.fieldPath);return r!==0?r:Or(t.kind,e.kind)}class F1{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new F1(0,vl.min())}}function pT(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=vr.fromTimestamp(n===1e9?new Di(r+1,0):new Di(r,n));return new vl(i,Gt.empty(),e)}function mT(t){return new vl(t.readTime,t.key,-1)}class vl{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new vl(vr.min(),Gt.empty(),-1)}static max(){return new vl(vr.max(),Gt.empty(),-1)}}function Yw(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Gt.comparator(t.documentKey,e.documentKey),r!==0?r:Or(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R0(t){if(t.code!==ut.FAILED_PRECONDITION||t.message!==gT)throw t;Nt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Jt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Je(((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,i)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof Je?r:Je.resolve(r)}catch(r){return Je.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):Je.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):Je.reject(r)}static resolve(e){return new Je(((r,n)=>{r(e)}))}static reject(e){return new Je(((r,n)=>{n(e)}))}static waitFor(e){return new Je(((r,n)=>{let i=0,s=0,a=!1;e.forEach((o=>{++i,o.next((()=>{++s,a&&s===i&&r()}),(l=>n(l)))})),a=!0,s===i&&r()}))}static or(e){let r=Je.resolve(!1);for(const n of e)r=r.next((i=>i?Je.resolve(i):n()));return r}static forEach(e,r){const n=[];return e.forEach(((i,s)=>{n.push(r.call(this,i,s))})),this.waitFor(n)}static mapArray(e,r){return new Je(((n,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;r(e[c]).next((d=>{a[c]=d,++o,o===s&&n(a)}),(d=>i(d)))}}))}static doWhile(e,r){return new Je(((n,i)=>{const s=()=>{e()===!0?r().next((()=>{s()}),i):n()};s()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new xa,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new _m(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const i=Qw(n.target.error);this.V.reject(new _m(e,i))}}static open(e,r,n,i){try{return new r5(r,e.transaction(i,n))}catch(s){throw new _m(r,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Nt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new LB(r)}}class au{constructor(e,r,n){this.name=e,this.version=r,this.p=n,au.S(Js())===12.2&&ks("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Nt("SimpleDb","Removing database:",e),mf(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!JC())return!1;if(au.v())return!0;const e=Js(),r=au.S(e),n=0<r&&r<10,i=vT(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Nt("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;r(a)},i.onblocked=()=>{n(new _m(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?n(new Ct(ut.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new Ct(ut.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new _m(e,a))},i.onupgradeneeded=s=>{Nt("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.O(a,i.transaction,s.oldVersion,this.version).next((()=>{Nt("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,i){const s=r==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=r5.open(this.db,e,s?"readonly":"readwrite",n),l=i(o).next((c=>(o.g(),c))).catch((c=>(o.abort(c),Je.reject(c)))).toPromise();return l.catch((()=>{})),await o.m,l}catch(o){const l=o,c=l.name!=="FirebaseError"&&a<3;if(Nt("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function vT(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class FB{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return mf(this.B.delete())}}class _m extends Ct{constructor(e,r){super(ut.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function F0(t){return t.name==="IndexedDbTransactionError"}class LB{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Nt("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(Nt("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),mf(n)}add(e){return Nt("SimpleDb","ADD",this.store.name,e,e),mf(this.store.add(e))}get(e){return mf(this.store.get(e)).next((r=>(r===void 0&&(r=null),Nt("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return Nt("SimpleDb","DELETE",this.store.name,e),mf(this.store.delete(e))}count(){return Nt("SimpleDb","COUNT",this.store.name),mf(this.store.count())}U(e,r){const n=this.options(e,r),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(n.range);return new Je(((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}}))}{const s=this.cursor(n),a=[];return this.W(s,((o,l)=>{a.push(l)})).next((()=>a))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Je(((i,s)=>{n.onerror=a=>{s(a.target.error)},n.onsuccess=a=>{i(a.target.result)}}))}j(e,r){Nt("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const i=this.cursor(n);return this.W(i,((s,a,o)=>o.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const i=this.cursor(n);return this.W(i,r)}Y(e){const r=this.cursor({});return new Je(((n,i)=>{r.onerror=s=>{const a=Qw(s.target.error);i(a)},r.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((o=>{o?a.continue():n()})):n()}}))}W(e,r){const n=[];return new Je(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const l=new FB(o),c=r(o.primaryKey,o.value,l);if(c instanceof Je){const d=c.catch((p=>(l.done(),Je.reject(p))));n.push(d)}l.isDone?i():l.K===null?o.continue():o.continue(l.K)}})).next((()=>Je.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function mf(t){return new Je(((e,r)=>{t.onsuccess=n=>{const i=n.target.result;e(i)},t.onerror=n=>{const i=Qw(n.target.error);r(i)}}))}let ik=!1;function Qw(t){const e=au.S(Js());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new Ct("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ik||(ik=!0,setTimeout((()=>{throw n}),0)),n}}return t}class jB{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Nt("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Nt("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){F0(r)?Nt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await R0(r)}await this.X(6e4)}))}}class DB{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let i=r,s=!0;return Je.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!n.has(a))return Nt("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,i).next((o=>{i-=o,n.add(a)}));s=!1})))).next((()=>r-i))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((i=>this.localStore.localDocuments.getNextDocuments(e,r,i,n).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this.re(i,s))).next((o=>(Nt("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o)))).next((()=>a.size))}))))}re(e,r){let n=e;return r.changes.forEach(((i,s)=>{const a=mT(s);Yw(a,n)>0&&(n=a)})),new vl(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}zo.oe=-1;function Sg(t){return t==null}function Gm(t){return t===0&&1/t==-1/0}function yT(t){return typeof t=="number"&&Number.isInteger(t)&&!Gm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=sk(e)),e=OB(t.get(r),e);return sk(e)}function OB(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const s=t.charAt(i);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function sk(t){return t+""}function eu(t){const e=t.length;if(fr(e>=2),e===2)return fr(t.charAt(0)===""&&t.charAt(1)===""),pn.emptyPath();const r=e-2,n=[];let i="";for(let s=0;s<e;){const a=t.indexOf("",s);switch((a<0||a>r)&&Jt(),t.charAt(a+1)){case"":const o=t.substring(s,a);let l;i.length===0?l=o:(i+=o,l=i,i=""),n.push(l);break;case"":i+=t.substring(s,a),i+="\0";break;case"":i+=t.substring(s,a+1);break;default:Jt()}s=a+2}return new pn(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(t,e){return[t,ho(e)]}function wT(t,e,r){return[t,ho(e),r]}const MB={},BB=["prefixPath","collectionGroup","readTime","documentId"],VB=["prefixPath","collectionGroup","documentId"],UB=["collectionGroup","readTime","prefixPath","documentId"],zB=["canonicalId","targetId"],$B=["targetId","path"],HB=["path","targetId"],qB=["collectionId","parent"],WB=["indexId","uid"],GB=["uid","sequenceNumber"],KB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],XB=["indexId","uid","orderedDocumentKey"],YB=["userId","collectionPath","documentId"],QB=["userId","collectionPath","largestBatchId"],JB=["userId","collectionGroup","largestBatchId"],bT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ZB=[...bT,"documentOverlays"],_T=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kT=_T,Jw=[...kT,"indexConfiguration","indexState","indexEntries"],eV=Jw,tV=[...Jw,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3 extends xT{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function ta(t,e){const r=qt(t);return au.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function L0(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function ET(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function ST(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,r){this.comparator=e,this.root=r||Pa.EMPTY}insert(e,r){return new xi(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Pa.BLACK,null,null))}remove(e){return new xi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pa.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new H2(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new H2(this.root,e,this.comparator,!1)}getReverseIterator(){return new H2(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new H2(this.root,e,this.comparator,!0)}}class H2{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pa{constructor(e,r,n,i,s){this.key=e,this.value=r,this.color=n??Pa.RED,this.left=i??Pa.EMPTY,this.right=s??Pa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,s){return new Pa(e??this.key,r??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,r,n),null):s===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return Pa.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Jt();const e=this.left.check();if(e!==this.right.check())throw Jt();return e+(this.isRed()?0:1)}}Pa.EMPTY=null,Pa.RED=!0,Pa.BLACK=!1;Pa.EMPTY=new class{constructor(){this.size=0}get key(){throw Jt()}get value(){throw Jt()}get color(){throw Jt()}get left(){throw Jt()}get right(){throw Jt()}copy(e,r,n,i,s){return this}insert(e,r,n){return new Pa(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.comparator=e,this.data=new xi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new lk(this.data.getIterator())}getIteratorFrom(e){return new lk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof ii)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new ii(this.comparator);return r.data=e,r}}class lk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hh(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.fields=e,e.sort(_i.comparator)}static empty(){return new $o([])}unionWith(e){let r=new ii(_i.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new $o(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return P1(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new CT("Invalid base64 string: "+s):s}})(e);return new Ki(r)}static fromUint8Array(e){const r=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new Ki(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Or(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ki.EMPTY_BYTE_STRING=new Ki("");const nV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function td(t){if(fr(!!t),typeof t=="string"){let e=0;const r=nV.exec(t);if(fr(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Li(t.seconds),nanos:Li(t.nanos)}}function Li(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function rd(t){return typeof t=="string"?Ki.fromBase64String(t):Ki.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(t){var e,r;return((r=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function i5(t){const e=t.mapValue.fields.__previous_value__;return n5(e)?i5(e):e}function Km(t){const e=td(t.mapValue.fields.__local_write_time__.timestampValue);return new Di(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,r,n,i,s,a,o,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class g0{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new g0("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof g0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ax={nullValue:"NULL_VALUE"};function x0(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?n5(t)?4:TT(t)?9007199254740991:s5(t)?10:11:Jt()}function fu(t,e){if(t===e)return!0;const r=x0(t);if(r!==x0(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Km(t).isEqual(Km(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=td(i.timestampValue),o=td(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return rd(i.bytesValue).isEqual(rd(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return Li(i.geoPointValue.latitude)===Li(s.geoPointValue.latitude)&&Li(i.geoPointValue.longitude)===Li(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Li(i.integerValue)===Li(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Li(i.doubleValue),o=Li(s.doubleValue);return a===o?Gm(a)===Gm(o):isNaN(a)&&isNaN(o)}return!1})(t,e);case 9:return P1(t.arrayValue.values||[],e.arrayValue.values||[],fu);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(ok(a)!==ok(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!fu(a[l],o[l])))return!1;return!0})(t,e);default:return Jt()}}function Xm(t,e){return(t.values||[]).find((r=>fu(r,e)))!==void 0}function v0(t,e){if(t===e)return 0;const r=x0(t),n=x0(e);if(r!==n)return Or(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Or(t.booleanValue,e.booleanValue);case 2:return(function(s,a){const o=Li(s.integerValue||s.doubleValue),l=Li(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1})(t,e);case 3:return ck(t.timestampValue,e.timestampValue);case 4:return ck(Km(t),Km(e));case 5:return Or(t.stringValue,e.stringValue);case 6:return(function(s,a){const o=rd(s),l=rd(a);return o.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const d=Or(o[c],l[c]);if(d!==0)return d}return Or(o.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,a){const o=Or(Li(s.latitude),Li(a.latitude));return o!==0?o:Or(Li(s.longitude),Li(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return uk(t.arrayValue,e.arrayValue);case 10:return(function(s,a){var o,l,c,d;const p=s.fields||{},g=a.fields||{},m=(o=p.value)===null||o===void 0?void 0:o.arrayValue,w=(l=g.value)===null||l===void 0?void 0:l.arrayValue,y=Or(((c=m?.values)===null||c===void 0?void 0:c.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return y!==0?y:uk(m,w)})(t.mapValue,e.mapValue);case 11:return(function(s,a){if(s===s0.mapValue&&a===s0.mapValue)return 0;if(s===s0.mapValue)return 1;if(a===s0.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const g=Or(l[p],d[p]);if(g!==0)return g;const m=v0(o[l[p]],c[d[p]]);if(m!==0)return m}return Or(l.length,d.length)})(t.mapValue,e.mapValue);default:throw Jt()}}function ck(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Or(t,e);const r=td(t),n=td(e),i=Or(r.seconds,n.seconds);return i!==0?i:Or(r.nanos,n.nanos)}function uk(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const s=v0(r[i],n[i]);if(s)return s}return Or(r.length,n.length)}function L1(t){return k3(t)}function k3(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=td(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return rd(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return Gt.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",i=!0;for(const s of r.values||[])i?i=!1:n+=",",n+=k3(s);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${k3(r.fields[a])}`;return i+"}"})(t.mapValue):Jt()}function Ix(t){switch(x0(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=i5(t);return e?16+Ix(e):16;case 5:return 2*t.stringValue.length;case 6:return rd(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,s)=>i+Ix(s)),0)})(t.arrayValue);case 10:case 11:return(function(n){let i=0;return L0(n.fields,((s,a)=>{i+=s.length+Ix(a)})),i})(t.mapValue);default:throw Jt()}}function Df(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function E3(t){return!!t&&"integerValue"in t}function Ym(t){return!!t&&"arrayValue"in t}function dk(t){return!!t&&"nullValue"in t}function fk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Px(t){return!!t&&"mapValue"in t}function s5(t){var e,r;return((r=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function km(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return L0(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=km(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=km(t.arrayValue.values[r]);return e}return Object.assign({},t)}function TT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const NT={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function sV(t){return"nullValue"in t?Ax:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Df(g0.empty(),Gt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?s5(t)?NT:{mapValue:{}}:Jt()}function aV(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Df(g0.empty(),Gt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?NT:"mapValue"in t?s5(t)?{mapValue:{}}:s0:Jt()}function hk(t,e){const r=v0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function pk(t,e){const r=v0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this.value=e}static empty(){return new La({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Px(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=km(r)}setAll(e){let r=_i.emptyPath(),n={},i=[];e.forEach(((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=o.popLast()}a?n[o.lastSegment()]=km(a):i.push(o.lastSegment())}));const s=this.getFieldsMap(r);this.applyChanges(s,n,i)}delete(e){const r=this.field(e.popLast());Px(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return fu(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];Px(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){L0(r,((i,s)=>e[i]=s));for(const i of n)delete e[i]}clone(){return new La(km(this.value))}}function AT(t){const e=[];return L0(t.fields,((r,n)=>{const i=new _i([r]);if(Px(n)){const s=AT(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new $o(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,r,n,i,s,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new bi(e,0,vr.min(),vr.min(),vr.min(),La.empty(),0)}static newFoundDocument(e,r,n,i){return new bi(e,1,r,vr.min(),n,i,0)}static newNoDocument(e,r){return new bi(e,2,r,vr.min(),vr.min(),La.empty(),0)}static newUnknownDocument(e,r){return new bi(e,3,r,vr.min(),vr.min(),La.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(vr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=La.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=La.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,r){this.position=e,this.inclusive=r}}function mk(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?n=Gt.comparator(Gt.fromName(a.referenceValue),r.key):n=v0(a,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function gk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!fu(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,r="asc"){this.field=e,this.dir=r}}function oV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IT=class{};class mn extends IT{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new lV(e,r,n):r==="array-contains"?new dV(e,n):r==="in"?new DT(e,n):r==="not-in"?new fV(e,n):r==="array-contains-any"?new hV(e,n):new mn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new cV(e,n):new uV(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(v0(r,this.value)):r!==null&&x0(this.value)===x0(r)&&this.matchesComparison(v0(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Jt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends IT{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Yn(e,r)}matches(e){return j1(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function j1(t){return t.op==="and"}function S3(t){return t.op==="or"}function Zw(t){return PT(t)&&j1(t)}function PT(t){for(const e of t.filters)if(e instanceof Yn)return!1;return!0}function C3(t){if(t instanceof mn)return t.field.canonicalString()+t.op.toString()+L1(t.value);if(Zw(t))return t.filters.map((e=>C3(e))).join(",");{const e=t.filters.map((r=>C3(r))).join(",");return`${t.op}(${e})`}}function RT(t,e){return t instanceof mn?(function(n,i){return i instanceof mn&&n.op===i.op&&n.field.isEqual(i.field)&&fu(n.value,i.value)})(t,e):t instanceof Yn?(function(n,i){return i instanceof Yn&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((s,a,o)=>s&&RT(a,i.filters[o])),!0):!1})(t,e):void Jt()}function FT(t,e){const r=t.filters.concat(e);return Yn.create(r,t.op)}function LT(t){return t instanceof mn?(function(r){return`${r.field.canonicalString()} ${r.op} ${L1(r.value)}`})(t):t instanceof Yn?(function(r){return r.op.toString()+" {"+r.getFilters().map(LT).join(" ,")+"}"})(t):"Filter"}class lV extends mn{constructor(e,r,n){super(e,r,n),this.key=Gt.fromName(n.referenceValue)}matches(e){const r=Gt.comparator(e.key,this.key);return this.matchesComparison(r)}}class cV extends mn{constructor(e,r){super(e,"in",r),this.keys=jT("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class uV extends mn{constructor(e,r){super(e,"not-in",r),this.keys=jT("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function jT(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>Gt.fromName(n.referenceValue)))}class dV extends mn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Ym(r)&&Xm(r.arrayValue,this.value)}}class DT extends mn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Xm(this.value.arrayValue,r)}}class fV extends mn{constructor(e,r){super(e,"not-in",r)}matches(e){if(Xm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Xm(this.value.arrayValue,r)}}class hV extends mn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Ym(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>Xm(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,r=null,n=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.ue=null}}function T3(t,e=null,r=[],n=[],i=null,s=null,a=null){return new pV(t,e,r,n,i,s,a)}function Of(t){const e=qt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>C3(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(s){return s.field.canonicalString()+s.dir})(n))).join(","),Sg(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>L1(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>L1(n))).join(",")),e.ue=r}return e.ue}function Cg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!oV(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!RT(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gk(t.startAt,e.startAt)&&gk(t.endAt,e.endAt)}function rv(t){return Gt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function nv(t,e){return t.filters.filter((r=>r instanceof mn&&r.field.isEqual(e)))}function xk(t,e,r){let n=Ax,i=!0;for(const s of nv(t,e)){let a=Ax,o=!0;switch(s.op){case"<":case"<=":a=sV(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=Ax}hk({value:n,inclusive:i},{value:a,inclusive:o})<0&&(n=a,i=o)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=r.position[s];hk({value:n,inclusive:i},{value:a,inclusive:r.inclusive})<0&&(n=a,i=r.inclusive);break}}return{value:n,inclusive:i}}function vk(t,e,r){let n=s0,i=!0;for(const s of nv(t,e)){let a=s0,o=!0;switch(s.op){case">=":case">":a=aV(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=s0}pk({value:n,inclusive:i},{value:a,inclusive:o})>0&&(n=a,i=o)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=r.position[s];pk({value:n,inclusive:i},{value:a,inclusive:r.inclusive})>0&&(n=a,i=r.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,r=null,n=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function OT(t,e,r,n,i,s,a,o){return new od(t,e,r,n,i,s,a,o)}function tp(t){return new od(t)}function yk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function e6(t){return t.collectionGroup!==null}function h1(t){const e=qt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new ii(_i.comparator);return a.filters.forEach((l=>{l.getFlattenedFilters().forEach((c=>{c.isInequality()&&(o=o.add(c.field))}))})),o})(e).forEach((s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Qm(s,n))})),r.has(_i.keyField().canonicalString())||e.ce.push(new Qm(_i.keyField(),n))}return e.ce}function po(t){const e=qt(t);return e.le||(e.le=BT(e,h1(t))),e.le}function MT(t){const e=qt(t);return e.he||(e.he=BT(e,t.explicitOrderBy)),e.he}function BT(t,e){if(t.limitType==="F")return T3(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new Qm(i.field,s)}));const r=t.endAt?new y0(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new y0(t.startAt.position,t.startAt.inclusive):null;return T3(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function N3(t,e){const r=t.filters.concat([e]);return new od(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function iv(t,e,r){return new od(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Tg(t,e){return Cg(po(t),po(e))&&t.limitType===e.limitType}function VT(t){return`${Of(po(t))}|lt:${t.limitType}`}function n1(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((i=>LT(i))).join(", ")}]`),Sg(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((i=>L1(i))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((i=>L1(i))).join(",")),`Target(${n})`})(po(t))}; limitType=${t.limitType})`}function Ng(t,e){return e.isFoundDocument()&&(function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Gt.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)})(t,e)&&(function(n,i){for(const s of h1(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(n,i){return!(n.startAt&&!(function(a,o,l){const c=mk(a,o,l);return a.inclusive?c<=0:c<0})(n.startAt,h1(n),i)||n.endAt&&!(function(a,o,l){const c=mk(a,o,l);return a.inclusive?c>=0:c>0})(n.endAt,h1(n),i))})(t,e)}function UT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zT(t){return(e,r)=>{let n=!1;for(const i of h1(t)){const s=mV(i,e,r);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function mV(t,e,r){const n=t.field.isKeyField()?Gt.comparator(e.key,r.key):(function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?v0(l,c):Jt()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Jt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){L0(this.inner,((r,n)=>{for(const[i,s]of n)e(i,s)}))}isEmpty(){return ST(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=new xi(Gt.comparator);function Ho(){return gV}const $T=new xi(Gt.comparator);function hm(...t){let e=$T;for(const r of t)e=e.insert(r.key,r);return e}function HT(t){let e=$T;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function tu(){return Em()}function qT(){return Em()}function Em(){return new ld((t=>t.toString()),((t,e)=>t.isEqual(e)))}const xV=new xi(Gt.comparator),vV=new ii(Gt.comparator);function $r(...t){let e=vV;for(const r of t)e=e.add(r);return e}const yV=new ii(Or);function t6(){return yV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gm(e)?"-0":e}}function WT(t){return{integerValue:""+t}}function GT(t,e){return yT(e)?WT(e):r6(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(){this._=void 0}}function wV(t,e,r){return t instanceof D1?(function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&n5(s)&&(s=i5(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}})(r,e):t instanceof Mf?XT(t,e):t instanceof Bf?YT(t,e):(function(i,s){const a=KT(i,s),o=wk(a)+wk(i.Pe);return E3(a)&&E3(i.Pe)?WT(o):r6(i.serializer,o)})(t,e)}function bV(t,e,r){return t instanceof Mf?XT(t,e):t instanceof Bf?YT(t,e):r}function KT(t,e){return t instanceof O1?(function(n){return E3(n)||(function(s){return!!s&&"doubleValue"in s})(n)})(e)?e:{integerValue:0}:null}class D1 extends a5{}class Mf extends a5{constructor(e){super(),this.elements=e}}function XT(t,e){const r=QT(e);for(const n of t.elements)r.some((i=>fu(i,n)))||r.push(n);return{arrayValue:{values:r}}}class Bf extends a5{constructor(e){super(),this.elements=e}}function YT(t,e){let r=QT(e);for(const n of t.elements)r=r.filter((i=>!fu(i,n)));return{arrayValue:{values:r}}}class O1 extends a5{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function wk(t){return Li(t.integerValue||t.doubleValue)}function QT(t){return Ym(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,r){this.field=e,this.transform=r}}function _V(t,e){return t.field.isEqual(e.field)&&(function(n,i){return n instanceof Mf&&i instanceof Mf||n instanceof Bf&&i instanceof Bf?P1(n.elements,i.elements,fu):n instanceof O1&&i instanceof O1?fu(n.Pe,i.Pe):n instanceof D1&&i instanceof D1})(t.transform,e.transform)}class kV{constructor(e,r){this.version=e,this.transformResults=r}}class ji{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ji}static exists(e){return new ji(void 0,e)}static updateTime(e){return new ji(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rx(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class o5{}function JT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new np(t.key,ji.none()):new rp(t.key,t.data,ji.none());{const r=t.data,n=La.empty();let i=new ii(_i.comparator);for(let s of e.fields)if(!i.has(s)){let a=r.field(s);a===null&&s.length>1&&(s=s.popLast(),a=r.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new cd(t.key,n,new $o(i.toArray()),ji.none())}}function EV(t,e,r){t instanceof rp?(function(i,s,a){const o=i.value.clone(),l=_k(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(t,e,r):t instanceof cd?(function(i,s,a){if(!Rx(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=_k(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(ZT(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(t,e,r):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,r)}function Sm(t,e,r,n){return t instanceof rp?(function(s,a,o,l){if(!Rx(s.precondition,a))return o;const c=s.value.clone(),d=kk(s.fieldTransforms,l,a);return c.setAll(d),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null})(t,e,r,n):t instanceof cd?(function(s,a,o,l){if(!Rx(s.precondition,a))return o;const c=kk(s.fieldTransforms,l,a),d=a.data;return d.setAll(ZT(s)),d.setAll(c),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((p=>p.field)))})(t,e,r,n):(function(s,a,o){return Rx(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o})(t,e,r)}function SV(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),s=KT(n.transform,i||null);s!=null&&(r===null&&(r=La.empty()),r.set(n.field,s))}return r||null}function bk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&P1(n,i,((s,a)=>_V(s,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class rp extends o5{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class cd extends o5{constructor(e,r,n,i,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ZT(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function _k(t,e,r){const n=new Map;fr(t.length===r.length);for(let i=0;i<r.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);n.set(s.field,bV(a,o,r[i]))}return n}function kk(t,e,r){const n=new Map;for(const i of t){const s=i.transform,a=r.data.field(i.field);n.set(i.field,wV(s,a,e))}return n}class np extends o5{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n6 extends o5{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&EV(s,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Sm(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Sm(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=qT();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=r.has(i.key)?null:o;const l=JT(a,o);l!==null&&n.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(vr.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),$r())}isEqual(e){return this.batchId===e.batchId&&P1(this.mutations,e.mutations,((r,n)=>bk(r,n)))&&P1(this.baseMutations,e.baseMutations,((r,n)=>bk(r,n)))}}class s6{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){fr(e.mutations.length===n.length);let i=(function(){return xV})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new s6(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var js,yn;function tN(t){switch(t){default:return Jt();case ut.CANCELLED:case ut.UNKNOWN:case ut.DEADLINE_EXCEEDED:case ut.RESOURCE_EXHAUSTED:case ut.INTERNAL:case ut.UNAVAILABLE:case ut.UNAUTHENTICATED:return!1;case ut.INVALID_ARGUMENT:case ut.NOT_FOUND:case ut.ALREADY_EXISTS:case ut.PERMISSION_DENIED:case ut.FAILED_PRECONDITION:case ut.ABORTED:case ut.OUT_OF_RANGE:case ut.UNIMPLEMENTED:case ut.DATA_LOSS:return!0}}function rN(t){if(t===void 0)return ks("GRPC error has no .code"),ut.UNKNOWN;switch(t){case js.OK:return ut.OK;case js.CANCELLED:return ut.CANCELLED;case js.UNKNOWN:return ut.UNKNOWN;case js.DEADLINE_EXCEEDED:return ut.DEADLINE_EXCEEDED;case js.RESOURCE_EXHAUSTED:return ut.RESOURCE_EXHAUSTED;case js.INTERNAL:return ut.INTERNAL;case js.UNAVAILABLE:return ut.UNAVAILABLE;case js.UNAUTHENTICATED:return ut.UNAUTHENTICATED;case js.INVALID_ARGUMENT:return ut.INVALID_ARGUMENT;case js.NOT_FOUND:return ut.NOT_FOUND;case js.ALREADY_EXISTS:return ut.ALREADY_EXISTS;case js.PERMISSION_DENIED:return ut.PERMISSION_DENIED;case js.FAILED_PRECONDITION:return ut.FAILED_PRECONDITION;case js.ABORTED:return ut.ABORTED;case js.OUT_OF_RANGE:return ut.OUT_OF_RANGE;case js.UNIMPLEMENTED:return ut.UNIMPLEMENTED;case js.DATA_LOSS:return ut.DATA_LOSS;default:return Jt()}}(yn=js||(js={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sv=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=new Tf([4294967295,4294967295],0);function Ek(t){const e=nN().encode(t),r=new iT;return r.update(e),new Uint8Array(r.digest())}function Sk(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Tf([r,n],0),new Tf([i,s],0)]}class o6{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new pm(`Invalid padding: ${r}`);if(n<0)throw new pm(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new pm(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new pm(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Tf.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(Tf.fromNumber(n)));return i.compare(TV)===1&&(i=new Tf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=Ek(e),[n,i]=Sk(r);for(let s=0;s<this.hashCount;s++){const a=this.Ee(n,i,s);if(!this.de(a))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new o6(s,i,r);return n.forEach((o=>a.insert(o))),a}insert(e){if(this.Ie===0)return;const r=Ek(e),[n,i]=Sk(r);for(let s=0;s<this.hashCount;s++){const a=this.Ee(n,i,s);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class pm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,r,n,i,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Pg.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Ig(vr.min(),i,new xi(Or),Ho(),$r())}}class Pg{constructor(e,r,n,i,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Pg(n,r,$r(),$r(),$r())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class iN{constructor(e,r){this.targetId=e,this.me=r}}class sN{constructor(e,r,n=Ki.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class Ck{constructor(){this.fe=0,this.ge=Nk(),this.pe=Ki.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=$r(),r=$r(),n=$r();return this.ge.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:Jt()}})),new Pg(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=Nk()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class NV{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ho(),this.qe=Tk(),this.Qe=new xi(Or)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Jt()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,i)=>{this.ze(i)&&r(i)}))}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const s=i.target;if(rv(s))if(n===0){const a=new Gt(s.path);this.Ue(r,a,bi.newNoDocument(a,vr.min()))}else fr(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}sv?.et((function(d,p,g,m,w){var y,k,T,O,P,V;const Y={localCacheCount:d,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},G=p.unchangedNames;return G&&(Y.bloomFilter={applied:w===0,hashCount:(y=G?.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(O=(T=(k=G?.bits)===null||k===void 0?void 0:k.bitmap)===null||T===void 0?void 0:T.length)!==null&&O!==void 0?O:0,padding:(V=(P=G?.bits)===null||P===void 0?void 0:P.padding)!==null&&V!==void 0?V:0,mightContain:L=>{var N;return(N=m?.mightContain(L))!==null&&N!==void 0&&N}}),Y})(a,e.me,this.Le.tt(),o,l))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=r;let a,o;try{a=rd(n).toUint8Array()}catch(l){if(l instanceof CT)return xl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new o6(a,i,s)}catch(l){return xl(l instanceof pm?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach((s=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,s,null),i++)})),i}rt(e){const r=new Map;this.Be.forEach(((s,a)=>{const o=this.Je(a);if(o){if(s.current&&rv(o.target)){const l=new Gt(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,bi.newNoDocument(l,e))}s.be&&(r.set(a,s.ve()),s.Ce())}}));let n=$r();this.qe.forEach(((s,a)=>{let o=!0;a.forEachWhile((l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(n=n.add(s))})),this.ke.forEach(((s,a)=>a.setReadTime(e)));const i=new Ig(e,r,this.Qe,this.ke,n);return this.ke=Ho(),this.qe=Tk(),this.Qe=new xi(Or),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new Ck,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new ii(Or),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Nt("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ck),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function Tk(){return new xi(Gt.comparator)}function Nk(){return new xi(Gt.comparator)}const AV={asc:"ASCENDING",desc:"DESCENDING"},IV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PV={and:"AND",or:"OR"};class RV{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function A3(t,e){return t.useProto3Json||Sg(e)?e:{value:e}}function M1(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FV(t,e){return M1(t,e.toTimestamp())}function Ss(t){return fr(!!t),vr.fromTimestamp((function(r){const n=td(r);return new Di(n.seconds,n.nanos)})(t))}function l6(t,e){return I3(t,e).canonicalString()}function I3(t,e){const r=(function(i){return new pn(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?r:r.child(e)}function oN(t){const e=pn.fromString(t);return fr(xN(e)),e}function Jm(t,e){return l6(t.databaseId,e.path)}function ou(t,e){const r=oN(e);if(r.get(1)!==t.databaseId.projectId)throw new Ct(ut.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Ct(ut.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Gt(uN(r))}function lN(t,e){return l6(t.databaseId,e)}function cN(t){const e=oN(t);return e.length===4?pn.emptyPath():uN(e)}function P3(t){return new pn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uN(t){return fr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ak(t,e,r){return{name:Jm(t,e),fields:r.value.mapValue.fields}}function dN(t,e,r){const n=ou(t,e.name),i=Ss(e.updateTime),s=e.createTime?Ss(e.createTime):vr.min(),a=new La({mapValue:{fields:e.fields}}),o=bi.newFoundDocument(n,i,s,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function LV(t,e){return"found"in e?(function(n,i){fr(!!i.found),i.found.name,i.found.updateTime;const s=ou(n,i.found.name),a=Ss(i.found.updateTime),o=i.found.createTime?Ss(i.found.createTime):vr.min(),l=new La({mapValue:{fields:i.found.fields}});return bi.newFoundDocument(s,a,o,l)})(t,e):"missing"in e?(function(n,i){fr(!!i.missing),fr(!!i.readTime);const s=ou(n,i.missing),a=Ss(i.readTime);return bi.newNoDocument(s,a)})(t,e):Jt()}function jV(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Jt()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(c,d){return c.useProto3Json?(fr(d===void 0||typeof d=="string"),Ki.fromBase64String(d||"")):(fr(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ki.fromUint8Array(d||new Uint8Array))})(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&(function(c){const d=c.code===void 0?ut.UNKNOWN:rN(c.code);return new Ct(d,c.message||"")})(a);r=new sN(n,i,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=ou(t,n.document.name),s=Ss(n.document.updateTime),a=n.document.createTime?Ss(n.document.createTime):vr.min(),o=new La({mapValue:{fields:n.document.fields}}),l=bi.newFoundDocument(i,s,a,o),c=n.targetIds||[],d=n.removedTargetIds||[];r=new Fx(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=ou(t,n.document),s=n.readTime?Ss(n.readTime):vr.min(),a=bi.newNoDocument(i,s),o=n.removedTargetIds||[];r=new Fx([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=ou(t,n.document),s=n.removedTargetIds||[];r=new Fx([],s,i,null)}else{if(!("filter"in e))return Jt();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new CV(i,s),o=n.targetId;r=new iN(o,a)}}return r}function Zm(t,e){let r;if(e instanceof rp)r={update:Ak(t,e.key,e.value)};else if(e instanceof np)r={delete:Jm(t,e.key)};else if(e instanceof cd)r={update:Ak(t,e.key,e.data),updateMask:UV(e.fieldMask)};else{if(!(e instanceof n6))return Jt();r={verify:Jm(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(s,a){const o=a.transform;if(o instanceof D1)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Mf)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Bf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof O1)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw Jt()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:FV(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Jt()})(t,e.precondition)),r}function R3(t,e){const r=e.currentDocument?(function(s){return s.updateTime!==void 0?ji.updateTime(Ss(s.updateTime)):s.exists!==void 0?ji.exists(s.exists):ji.none()})(e.currentDocument):ji.none(),n=e.updateTransforms?e.updateTransforms.map((i=>(function(a,o){let l=null;if("setToServerValue"in o)fr(o.setToServerValue==="REQUEST_TIME"),l=new D1;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];l=new Mf(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];l=new Bf(d)}else"increment"in o?l=new O1(a,o.increment):Jt();const c=_i.fromServerFormat(o.fieldPath);return new Ag(c,l)})(t,i))):[];if(e.update){e.update.name;const i=ou(t,e.update.name),s=new La({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(l){const c=l.fieldPaths||[];return new $o(c.map((d=>_i.fromServerFormat(d))))})(e.updateMask);return new cd(i,s,a,r,n)}return new rp(i,s,r,n)}if(e.delete){const i=ou(t,e.delete);return new np(i,r)}if(e.verify){const i=ou(t,e.verify);return new n6(i,r)}return Jt()}function DV(t,e){return t&&t.length>0?(fr(e!==void 0),t.map((r=>(function(i,s){let a=i.updateTime?Ss(i.updateTime):Ss(s);return a.isEqual(vr.min())&&(a=Ss(s)),new kV(a,i.transformResults||[])})(r,e)))):[]}function fN(t,e){return{documents:[lN(t,e.path)]}}function l5(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=lN(t,i);const s=(function(c){if(c.length!==0)return gN(Yn.create(c,"and"))})(e.filters);s&&(r.structuredQuery.where=s);const a=(function(c){if(c.length!==0)return c.map((d=>(function(g){return{field:Qd(g.field),direction:MV(g.dir)}})(d)))})(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=A3(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{_t:r,parent:i}}function hN(t,e,r,n){const{_t:i,parent:s}=l5(t,e),a={},o=[];let l=0;return r.forEach((c=>{const d=n?c.alias:"aggregate_"+l++;a[d]=c.alias,c.aggregateType==="count"?o.push({alias:d,count:{}}):c.aggregateType==="avg"?o.push({alias:d,avg:{field:Qd(c.fieldPath)}}):c.aggregateType==="sum"&&o.push({alias:d,sum:{field:Qd(c.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:i.structuredQuery},parent:i.parent},ut:a,parent:s}}function pN(t){let e=cN(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){fr(n===1);const d=r.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=(function(p){const g=mN(p);return g instanceof Yn&&Zw(g)?g.getFilters():[g]})(r.where));let a=[];r.orderBy&&(a=(function(p){return p.map((g=>(function(w){return new Qm(i1(w.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(g)))})(r.orderBy));let o=null;r.limit&&(o=(function(p){let g;return g=typeof p=="object"?p.value:p,Sg(g)?null:g})(r.limit));let l=null;r.startAt&&(l=(function(p){const g=!!p.before,m=p.values||[];return new y0(m,g)})(r.startAt));let c=null;return r.endAt&&(c=(function(p){const g=!p.before,m=p.values||[];return new y0(m,g)})(r.endAt)),OT(e,i,a,s,o,"F",l,c)}function OV(t,e){const r=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Jt()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function mN(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=i1(r.unaryFilter.field);return mn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=i1(r.unaryFilter.field);return mn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=i1(r.unaryFilter.field);return mn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=i1(r.unaryFilter.field);return mn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Jt()}})(t):t.fieldFilter!==void 0?(function(r){return mn.create(i1(r.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Jt()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return Yn.create(r.compositeFilter.filters.map((n=>mN(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Jt()}})(r.compositeFilter.op))})(t):Jt()}function MV(t){return AV[t]}function BV(t){return IV[t]}function VV(t){return PV[t]}function Qd(t){return{fieldPath:t.canonicalString()}}function i1(t){return _i.fromServerFormat(t.fieldPath)}function gN(t){return t instanceof mn?(function(r){if(r.op==="=="){if(fk(r.value))return{unaryFilter:{field:Qd(r.field),op:"IS_NAN"}};if(dk(r.value))return{unaryFilter:{field:Qd(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(fk(r.value))return{unaryFilter:{field:Qd(r.field),op:"IS_NOT_NAN"}};if(dk(r.value))return{unaryFilter:{field:Qd(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qd(r.field),op:BV(r.op),value:r.value}}})(t):t instanceof Yn?(function(r){const n=r.getFilters().map((i=>gN(i)));return n.length===1?n[0]:{compositeFilter:{op:VV(r.op),filters:n}}})(t):Jt()}function UV(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function xN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,r,n,i,s=vr.min(),a=vr.min(),o=Ki.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Uu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Uu(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Uu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Uu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.ct=e}}function zV(t,e){let r;if(e.document)r=dN(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Gt.fromSegments(e.noDocument.path),i=Uf(e.noDocument.readTime);r=bi.newNoDocument(n,i),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Jt();{const n=Gt.fromSegments(e.unknownDocument.path),i=Uf(e.unknownDocument.version);r=bi.newUnknownDocument(n,i)}}return e.readTime&&r.setReadTime((function(i){const s=new Di(i[0],i[1]);return vr.fromTimestamp(s)})(e.readTime)),r}function Ik(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:av(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(s,a){return{name:Jm(s,a.key),fields:a.data.value.mapValue.fields,updateTime:M1(s,a.version.toTimestamp()),createTime:M1(s,a.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Vf(e.version)};else{if(!e.isUnknownDocument())return Jt();n.unknownDocument={path:r.path.toArray(),version:Vf(e.version)}}return n}function av(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Vf(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Uf(t){const e=new Di(t.seconds,t.nanoseconds);return vr.fromTimestamp(e)}function gf(t,e){const r=(e.baseMutations||[]).map((s=>R3(t.ct,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map((s=>R3(t.ct,s))),i=Di.fromMillis(e.localWriteTimeMs);return new i6(e.batchId,i,r,n)}function mm(t){const e=Uf(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Uf(t.lastLimboFreeSnapshotVersion):vr.min();let n;return n=(function(s){return s.documents!==void 0})(t.query)?(function(s){return fr(s.documents.length===1),po(tp(cN(s.documents[0])))})(t.query):(function(s){return po(pN(s))})(t.query),new Uu(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Ki.fromBase64String(t.resumeToken))}function yN(t,e){const r=Vf(e.snapshotVersion),n=Vf(e.lastLimboFreeSnapshotVersion);let i;i=rv(e.target)?fN(t.ct,e.target):l5(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Of(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function c6(t){const e=pN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?iv(e,e.limit,"L"):e}function Xy(t,e){return new a6(e.largestBatchId,R3(t.ct,e.overlayMutation))}function Pk(t,e){const r=e.path.lastSegment();return[t,ho(e.path.popLast()),r]}function Rk(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Vf(n.readTime),documentKey:ho(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{getBundleMetadata(e,r){return Fk(e).get(r).next((n=>{if(n)return(function(s){return{id:s.bundleId,createTime:Uf(s.createTime),version:s.version}})(n)}))}saveBundleMetadata(e,r){return Fk(e).put((function(i){return{bundleId:i.id,createTime:Vf(Ss(i.createTime)),version:i.version}})(r))}getNamedQuery(e,r){return Lk(e).get(r).next((n=>{if(n)return(function(s){return{name:s.name,query:c6(s.bundledQuery),readTime:Uf(s.readTime)}})(n)}))}saveNamedQuery(e,r){return Lk(e).put((function(i){return{name:i.name,readTime:Vf(Ss(i.readTime)),bundledQuery:i.bundledQuery}})(r))}}function Fk(t){return ta(t,"bundles")}function Lk(t){return ta(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new c5(e,n)}getOverlay(e,r){return Zp(e).get(Pk(this.userId,r)).next((n=>n?Xy(this.serializer,n):null))}getOverlays(e,r){const n=tu();return Je.forEach(r,(i=>this.getOverlay(e,i).next((s=>{s!==null&&n.set(i,s)})))).next((()=>n))}saveOverlays(e,r,n){const i=[];return n.forEach(((s,a)=>{const o=new a6(r,a);i.push(this.ht(e,o))})),Je.waitFor(i)}removeOverlaysForBatchId(e,r,n){const i=new Set;r.forEach((a=>i.add(ho(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);s.push(Zp(e).j("collectionPathOverlayIndex",o))})),Je.waitFor(s)}getOverlaysForCollection(e,r,n){const i=tu(),s=ho(r),a=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Zp(e).U("collectionPathOverlayIndex",a).next((o=>{for(const l of o){const c=Xy(this.serializer,l);i.set(c.getKey(),c)}return i}))}getOverlaysForCollectionGroup(e,r,n,i){const s=tu();let a;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Zp(e).J({index:"collectionGroupOverlayIndex",range:o},((l,c,d)=>{const p=Xy(this.serializer,c);s.size()<i||p.largestBatchId===a?(s.set(p.getKey(),p),a=p.largestBatchId):d.done()})).next((()=>s))}ht(e,r){return Zp(e).put((function(i,s,a){const[o,l,c]=Pk(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Zm(i.ct,a.mutation)}})(this.serializer,this.userId,r))}}function Zp(t){return ta(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{Pt(e){return ta(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r?.value;return n?Ki.fromUint8Array(n):Ki.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Li(e.integerValue));else if("doubleValue"in e){const n=Li(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Gm(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=td(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(rd(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?TT(e)?this.dt(r,Number.MAX_SAFE_INTEGER):s5(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Jt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const i of Object.keys(n))this.Vt(i,r),this.Tt(n[i],r)}wt(e,r){var n,i;const s=e.fields||{};this.dt(r,53);const a="value",o=((i=(n=s[a].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.length)||0;this.dt(r,15),r.At(Li(o)),this.Vt(a,r),this.Tt(s[a],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const i of n)this.Tt(i,r)}yt(e,r){this.dt(r,37),Gt.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}xf.vt=new xf;function qV(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function jk(t){const e=64-(function(n){let i=0;for(let s=0;s<8;++s){const a=qV(255&n[s]);if(i+=a,a!==8)break}return i})(t);return Math.ceil(e/8)}class WV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const i=r.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const i=r.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const r=this.qt(e),n=jk(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=255&r[i]}Kt(e){const r=this.qt(e),n=jk(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=~(255&r[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let i=1;i<r.length;++i)r[i]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class GV{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class KV{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class em{constructor(){this.jt=new WV,this.Ht=new GV(this.jt),this.Jt=new KV(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,r,n,i){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=i}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new vf(this.indexId,this.documentKey,this.arrayValue,n)}}function Hd(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=Dk(t.arrayValue,e.arrayValue),r!==0?r:(r=Dk(t.directionalValue,e.directionalValue),r!==0?r:Gt.comparator(t.documentKey,e.documentKey)))}function Dk(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.Xt=new ii(((r,n)=>_i.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(fr(e.collectionGroup===this.collectionId),this.nn)return!1;const r=b3(e);if(r!==void 0&&!this.sn(r))return!1;const n=hf(e);let i=new Set,s=0,a=0;for(;s<n.length&&this.sn(n[s]);++s)i=i.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=n[s];if(!this.on(o,l)||!this._n(this.en[a++],l))return!1}++s}for(;s<n.length;++s){const o=n[s];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new ii(_i.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new Nf(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new Nf(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new Nf(n.field,n.dir==="asc"?0:1)));return new R1(R1.UNKNOWN_ID,this.collectionId,r,F1.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t){var e,r;if(fr(t instanceof mn||t instanceof Yn),t instanceof mn){if(t instanceof DT){const i=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((s=>mn.create(t.field,"==",s))))||[];return Yn.create(i,"or")}return t}const n=t.filters.map((i=>wN(i)));return Yn.create(n,t.op)}function XV(t){if(t.getFilters().length===0)return[];const e=j3(wN(t));return fr(bN(e)),F3(e)||L3(e)?[e]:e.getFilters()}function F3(t){return t instanceof mn}function L3(t){return t instanceof Yn&&Zw(t)}function bN(t){return F3(t)||L3(t)||(function(r){if(r instanceof Yn&&S3(r)){for(const n of r.getFilters())if(!F3(n)&&!L3(n))return!1;return!0}return!1})(t)}function j3(t){if(fr(t instanceof mn||t instanceof Yn),t instanceof mn)return t;if(t.filters.length===1)return j3(t.filters[0]);const e=t.filters.map((n=>j3(n)));let r=Yn.create(e,t.op);return r=ov(r),bN(r)?r:(fr(r instanceof Yn),fr(j1(r)),fr(r.filters.length>1),r.filters.reduce(((n,i)=>u6(n,i))))}function u6(t,e){let r;return fr(t instanceof mn||t instanceof Yn),fr(e instanceof mn||e instanceof Yn),r=t instanceof mn?e instanceof mn?(function(i,s){return Yn.create([i,s],"and")})(t,e):Mk(t,e):e instanceof mn?Mk(e,t):(function(i,s){if(fr(i.filters.length>0&&s.filters.length>0),j1(i)&&j1(s))return FT(i,s.getFilters());const a=S3(i)?i:s,o=S3(i)?s:i,l=a.filters.map((c=>u6(c,o)));return Yn.create(l,"or")})(t,e),ov(r)}function Mk(t,e){if(j1(e))return FT(e,t.getFilters());{const r=e.filters.map((n=>u6(t,n)));return Yn.create(r,"or")}}function ov(t){if(fr(t instanceof mn||t instanceof Yn),t instanceof mn)return t;const e=t.getFilters();if(e.length===1)return ov(e[0]);if(PT(t))return t;const r=e.map((i=>ov(i))),n=[];return r.forEach((i=>{i instanceof mn?n.push(i):i instanceof Yn&&(i.op===t.op?n.push(...i.filters):n.push(i))})),n.length===1?n[0]:Yn.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(){this.un=new d6}addToCollectionParentIndex(e,r){return this.un.add(r),Je.resolve()}getCollectionParents(e,r){return Je.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Je.resolve()}deleteFieldIndex(e,r){return Je.resolve()}deleteAllFieldIndexes(e){return Je.resolve()}createTargetIndexes(e,r){return Je.resolve()}getDocumentsMatchingTarget(e,r){return Je.resolve(null)}getIndexType(e,r){return Je.resolve(0)}getFieldIndexes(e,r){return Je.resolve([])}getNextCollectionGroupToUpdate(e){return Je.resolve(null)}getMinOffset(e,r){return Je.resolve(vl.min())}getMinOffsetFromCollectionGroup(e,r){return Je.resolve(vl.min())}updateCollectionGroup(e,r,n){return Je.resolve()}updateIndexEntries(e,r){return Je.resolve()}}class d6{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new ii(pn.comparator),s=!i.has(n);return this.index[r]=i.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new ii(pn.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=new Uint8Array(0);class QV{constructor(e,r){this.databaseId=r,this.cn=new d6,this.ln=new ld((n=>Of(n)),((n,i)=>Cg(n,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),i=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const s={collectionId:n,parent:ho(i)};return Bk(e).put(s)}return Je.resolve()}getCollectionParents(e,r){const n=[],i=IDBKeyRange.bound([r,""],[hT(r),""],!1,!0);return Bk(e).U(i).next((s=>{for(const a of s){if(a.collectionId!==r)break;n.push(eu(a.parent))}return n}))}addFieldIndex(e,r){const n=tm(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(r);delete i.indexId;const s=n.add(i);if(r.indexState){const a=Wh(e);return s.next((o=>{a.put(Rk(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return s.next()}deleteFieldIndex(e,r){const n=tm(e),i=Wh(e),s=qh(e);return n.delete(r.indexId).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=tm(e),n=qh(e),i=Wh(e);return r.j().next((()=>n.j())).next((()=>i.j()))}createTargetIndexes(e,r){return Je.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((i=>{if(i===0||i===1){const s=new Ok(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,r){const n=qh(e);let i=!0;const s=new Map;return Je.forEach(this.hn(r),(a=>this.Pn(e,a).next((o=>{i&&(i=!!o),s.set(a,o)})))).next((()=>{if(i){let a=$r();const o=[];return Je.forEach(s,((l,c)=>{Nt("IndexedDbIndexManager",`Using index ${(function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map((V=>`${V.fieldPath}:${V.kind}`)).join(",")}`})(l)} to execute ${Of(r)}`);const d=(function(P,V){const Y=b3(V);if(Y===void 0)return null;for(const G of nv(P,Y.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null})(c,l),p=(function(P,V){const Y=new Map;for(const G of hf(V))for(const L of nv(P,G.fieldPath))switch(L.op){case"==":case"in":Y.set(G.fieldPath.canonicalString(),L.value);break;case"not-in":case"!=":return Y.set(G.fieldPath.canonicalString(),L.value),Array.from(Y.values())}return null})(c,l),g=(function(P,V){const Y=[];let G=!0;for(const L of hf(V)){const N=L.kind===0?xk(P,L.fieldPath,P.startAt):vk(P,L.fieldPath,P.startAt);Y.push(N.value),G&&(G=N.inclusive)}return new y0(Y,G)})(c,l),m=(function(P,V){const Y=[];let G=!0;for(const L of hf(V)){const N=L.kind===0?vk(P,L.fieldPath,P.endAt):xk(P,L.fieldPath,P.endAt);Y.push(N.value),G&&(G=N.inclusive)}return new y0(Y,G)})(c,l),w=this.In(l,c,g),y=this.In(l,c,m),k=this.Tn(l,c,p),T=this.En(l.indexId,d,w,g.inclusive,y,m.inclusive,k);return Je.forEach(T,(O=>n.G(O,r.limit).next((P=>{P.forEach((V=>{const Y=Gt.fromSegments(V.documentKey);a.has(Y)||(a=a.add(Y),o.push(Y))}))}))))})).next((()=>o))}return Je.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=XV(Yn.create(e.filters,"and")).map((n=>T3(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,i,s,a,o){const l=(r!=null?r.length:1)*Math.max(n.length,s.length),c=l/(r!=null?r.length:1),d=[];for(let p=0;p<l;++p){const g=r?this.dn(r[p/c]):q2,m=this.An(e,g,n[p%c],i),w=this.Rn(e,g,s[p%c],a),y=o.map((k=>this.An(e,g,k,!0)));d.push(...this.createRange(m,w,y))}return d}An(e,r,n,i){const s=new vf(e,Gt.empty(),r,n);return i?s:s.Zt()}Rn(e,r,n,i){const s=new vf(e,Gt.empty(),r,n);return i?s.Zt():s}Pn(e,r){const n=new Ok(r),i=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const o of s)n.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a}))}getIndexType(e,r){let n=2;const i=this.hn(r);return Je.forEach(i,(s=>this.Pn(e,s).next((a=>{a?n!==0&&a.fields.length<(function(l){let c=new ii(_i.comparator),d=!1;for(const p of l.filters)for(const g of p.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:c=c.add(g.field));for(const p of l.orderBy)p.field.isKeyField()||(c=c.add(p.field));return c.size+(d?1:0)})(s)&&(n=1):n=0})))).next((()=>(function(a){return a.limit!==null})(r)&&i.length>1&&n===2?1:n))}Vn(e,r){const n=new em;for(const i of hf(e)){const s=r.data.field(i.fieldPath);if(s==null)return null;const a=n.Yt(i.kind);xf.vt.It(s,a)}return n.zt()}dn(e){const r=new em;return xf.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new em;return xf.vt.It(Df(this.databaseId,r),n.Yt((function(s){const a=hf(s);return a.length===0?0:a[a.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let i=[];i.push(new em);let s=0;for(const a of hf(e)){const o=n[s++];for(const l of i)if(this.fn(r,a.fieldPath)&&Ym(o))i=this.gn(i,a,o);else{const c=l.Yt(a.kind);xf.vt.It(o,c)}}return this.pn(i)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const i=[...e],s=[];for(const a of n.arrayValue.values||[])for(const o of i){const l=new em;l.seed(o.zt()),xf.vt.It(a,l.Yt(r.kind)),s.push(l)}return s}fn(e,r){return!!e.filters.find((n=>n instanceof mn&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=tm(e),i=Wh(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((s=>{const a=[];return Je.forEach(s,(o=>i.get([o.indexId,this.uid]).next((l=>{a.push((function(d,p){const g=p?new F1(p.sequenceNumber,new vl(Uf(p.readTime),new Gt(eu(p.documentKey)),p.largestBatchId)):F1.empty(),m=d.fields.map((([w,y])=>new Nf(_i.fromServerFormat(w),y)));return new R1(d.indexId,d.collectionGroup,m,g)})(o,l))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,i)=>{const s=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Or(n.collectionGroup,i.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const i=tm(e),s=Wh(e);return this.yn(e).next((a=>i.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((o=>Je.forEach(o,(l=>s.put(Rk(l.indexId,this.uid,a,n))))))))}updateIndexEntries(e,r){const n=new Map;return Je.forEach(r,((i,s)=>{const a=n.get(i.collectionGroup);return(a?Je.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(n.set(i.collectionGroup,o),Je.forEach(o,(l=>this.wn(e,i,l).next((c=>{const d=this.Sn(s,l);return c.isEqual(d)?Je.resolve():this.bn(e,s,l,c,d)})))))))}))}Dn(e,r,n,i){return qh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,i){return qh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const i=qh(e);let s=new ii(Hd);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((a,o)=>{s=s.add(new vf(n.indexId,r,o.arrayValue,o.directionalValue))})).next((()=>s))}Sn(e,r){let n=new ii(Hd);const i=this.Vn(r,e);if(i==null)return n;const s=b3(r);if(s!=null){const a=e.data.field(s.fieldPath);if(Ym(a))for(const o of a.arrayValue.values||[])n=n.add(new vf(r.indexId,e.key,this.dn(o),i))}else n=n.add(new vf(r.indexId,e.key,q2,i));return n}bn(e,r,n,i,s){Nt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const a=[];return(function(l,c,d,p,g){const m=l.getIterator(),w=c.getIterator();let y=Hh(m),k=Hh(w);for(;y||k;){let T=!1,O=!1;if(y&&k){const P=d(y,k);P<0?O=!0:P>0&&(T=!0)}else y!=null?O=!0:T=!0;T?(p(k),k=Hh(w)):O?(g(y),y=Hh(m)):(y=Hh(m),k=Hh(w))}})(i,s,Hd,(o=>{a.push(this.Dn(e,r,n,o))}),(o=>{a.push(this.vn(e,r,n,o))})),Je.waitFor(a)}yn(e){let r=1;return Wh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,i,s)=>{s.done(),r=i.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((a,o)=>Hd(a,o))).filter(((a,o,l)=>!o||Hd(a,l[o-1])!==0));const i=[];i.push(e);for(const a of n){const o=Hd(a,e),l=Hd(a,r);if(o===0)i[0]=e.Zt();else if(o>0&&l<0)i.push(a),i.push(a.Zt());else if(l>0)break}i.push(r);const s=[];for(let a=0;a<i.length;a+=2){if(this.Cn(i[a],i[a+1]))return[];const o=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,q2,[]],l=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,q2,[]];s.push(IDBKeyRange.bound(o,l))}return s}Cn(e,r){return Hd(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Vk)}getMinOffset(e,r){return Je.mapArray(this.hn(r),(n=>this.Pn(e,n).next((i=>i||Jt())))).next(Vk)}}function Bk(t){return ta(t,"collectionParents")}function qh(t){return ta(t,"indexEntries")}function tm(t){return ta(t,"indexConfiguration")}function Wh(t){return ta(t,"indexState")}function Vk(t){fr(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const i=t[n].indexState.offset;Yw(i,e)<0&&(e=i),r<i.largestBatchId&&(r=i.largestBatchId)}return new vl(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ao{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ao(e,ao.DEFAULT_COLLECTION_PERCENTILE,ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t,e,r){const n=t.store("mutations"),i=t.store("documentMutations"),s=[],a=IDBKeyRange.only(r.batchId);let o=0;const l=n.J({range:a},((d,p,g)=>(o++,g.delete())));s.push(l.next((()=>{fr(o===1)})));const c=[];for(const d of r.mutations){const p=wT(e,d.key.path,r.batchId);s.push(i.delete(p)),c.push(d.key)}return Je.waitFor(s).next((()=>c))}function lv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Jt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ao.DEFAULT_COLLECTION_PERCENTILE=10,ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ao.DEFAULT=new ao(41943040,ao.DEFAULT_COLLECTION_PERCENTILE,ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ao.DISABLED=new ao(-1,0,0);class u5{constructor(e,r,n,i){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=i,this.Fn={}}static lt(e,r,n,i){fr(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new u5(s,r,n,i)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qd(e).J({index:"userMutationsIndex",range:n},((i,s,a)=>{r=!1,a.done()})).next((()=>r))}addMutationBatch(e,r,n,i){const s=s1(e),a=qd(e);return a.add({}).next((o=>{fr(typeof o=="number");const l=new i6(o,r,n,i),c=(function(m,w,y){const k=y.baseMutations.map((O=>Zm(m.ct,O))),T=y.mutations.map((O=>Zm(m.ct,O)));return{userId:w,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:k,mutations:T}})(this.serializer,this.userId,l),d=[];let p=new ii(((g,m)=>Or(g.canonicalString(),m.canonicalString())));for(const g of i){const m=wT(this.userId,g.key.path,o);p=p.add(g.key.path.popLast()),d.push(a.put(c)),d.push(s.put(m,MB))}return p.forEach((g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Fn[o]=l.keys()})),Je.waitFor(d).next((()=>l))}))}lookupMutationBatch(e,r){return qd(e).get(r).next((n=>n?(fr(n.userId===this.userId),gf(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?Je.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const i=n.keys();return this.Fn[r]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return qd(e).J({index:"userMutationsIndex",range:i},((a,o,l)=>{o.userId===this.userId&&(fr(o.batchId>=n),s=gf(this.serializer,o)),l.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return qd(e).J({index:"userMutationsIndex",range:r,reverse:!0},((i,s,a)=>{n=s.batchId,a.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qd(e).U("userMutationsIndex",r).next((n=>n.map((i=>gf(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Nx(this.userId,r.path),i=IDBKeyRange.lowerBound(n),s=[];return s1(e).J({range:i},((a,o,l)=>{const[c,d,p]=a,g=eu(d);if(c===this.userId&&r.path.isEqual(g))return qd(e).get(p).next((m=>{if(!m)throw Jt();fr(m.userId===this.userId),s.push(gf(this.serializer,m))}));l.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new ii(Or);const i=[];return r.forEach((s=>{const a=Nx(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=s1(e).J({range:o},((c,d,p)=>{const[g,m,w]=c,y=eu(m);g===this.userId&&s.path.isEqual(y)?n=n.add(w):p.done()}));i.push(l)})),Je.waitFor(i).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1,s=Nx(this.userId,n),a=IDBKeyRange.lowerBound(s);let o=new ii(Or);return s1(e).J({range:a},((l,c,d)=>{const[p,g,m]=l,w=eu(g);p===this.userId&&n.isPrefixOf(w)?w.length===i&&(o=o.add(m)):d.done()})).next((()=>this.xn(e,o)))}xn(e,r){const n=[],i=[];return r.forEach((s=>{i.push(qd(e).get(s).next((a=>{if(a===null)throw Jt();fr(a.userId===this.userId),n.push(gf(this.serializer,a))})))})),Je.waitFor(i).next((()=>n))}removeMutationBatch(e,r){return _N(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),Je.forEach(n,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return Je.resolve();const n=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return s1(e).J({range:n},((s,a,o)=>{if(s[0]===this.userId){const l=eu(s[1]);i.push(l)}else o.done()})).next((()=>{fr(i.length===0)}))}))}containsKey(e,r){return kN(e,this.userId,r)}Nn(e){return EN(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function kN(t,e,r){const n=Nx(e,r.path),i=n[1],s=IDBKeyRange.lowerBound(n);let a=!1;return s1(t).J({range:s,H:!0},((o,l,c)=>{const[d,p,g]=o;d===e&&p===i&&(a=!0),c.done()})).next((()=>a))}function qd(t){return ta(t,"mutations")}function s1(t){return ta(t,"documentMutations")}function EN(t){return ta(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new zf(0)}static kn(){return new zf(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new zf(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>vr.fromTimestamp(new Di(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((i=>(i.highestListenSequenceNumber=r,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),r>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=r),this.Qn(e,i))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>Gh(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(fr(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let i=0;const s=[];return Gh(e).J(((a,o)=>{const l=mm(o);l.sequenceNumber<=r&&n.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))})).next((()=>Je.waitFor(s))).next((()=>i))}forEachTarget(e,r){return Gh(e).J(((n,i)=>{const s=mm(i);r(s)}))}qn(e){return zk(e).get("targetGlobalKey").next((r=>(fr(r!==null),r)))}Qn(e,r){return zk(e).put("targetGlobalKey",r)}Kn(e,r){return Gh(e).put(yN(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=Of(r),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Gh(e).J({range:i,index:"queryTargetsIndex"},((a,o,l)=>{const c=mm(o);Cg(r,c.target)&&(s=c,l.done())})).next((()=>s))}addMatchingKeys(e,r,n){const i=[],s=Jd(e);return r.forEach((a=>{const o=ho(a.path);i.push(s.put({targetId:n,path:o})),i.push(this.referenceDelegate.addReference(e,n,a))})),Je.waitFor(i)}removeMatchingKeys(e,r,n){const i=Jd(e);return Je.forEach(r,(s=>{const a=ho(s.path);return Je.waitFor([i.delete([n,a]),this.referenceDelegate.removeReference(e,n,s)])}))}removeMatchingKeysForTargetId(e,r){const n=Jd(e),i=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),i=Jd(e);let s=$r();return i.J({range:n,H:!0},((a,o,l)=>{const c=eu(a[1]),d=new Gt(c);s=s.add(d)})).next((()=>s))}containsKey(e,r){const n=ho(r.path),i=IDBKeyRange.bound([n],[hT(n)],!1,!0);let s=0;return Jd(e).J({index:"documentTargetsIndex",H:!0,range:i},(([a,o],l,c)=>{a!==0&&(s++,c.done())})).next((()=>s>0))}ot(e,r){return Gh(e).get(r).next((n=>n?mm(n):null))}}function Gh(t){return ta(t,"targets")}function zk(t){return ta(t,"targetGlobal")}function Jd(t){return ta(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k([t,e],[r,n]){const i=Or(t,r);return i===0?Or(e,n):i}class ZV{constructor(e){this.Un=e,this.buffer=new ii($k),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();$k(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class SN{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Nt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){F0(r)?Nt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await R0(r)}await this.Hn(3e5)}))}}class eU{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return Je.resolve(zo.oe);const n=new ZV(r);return this.Jn.forEachTarget(e,(i=>n.zn(i.sequenceNumber))).next((()=>this.Jn.Zn(e,(i=>n.zn(i))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Nt("LruGarbageCollector","Garbage collection skipped; disabled"),Je.resolve(Uk)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Nt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Uk):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,i,s,a,o,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Nt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,a=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(n=p,o=Date.now(),this.removeTargets(e,n,r)))).next((p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,n)))).next((p=>(c=Date.now(),r1()<=hn.DEBUG&&Nt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${p} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),Je.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p}))))}}function CN(t,e){return new eU(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,r){this.db=e,this.garbageCollector=CN(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((i=>n+i))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,i)=>r(i)))}addReference(e,r,n){return W2(e,n)}removeReference(e,r,n){return W2(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return W2(e,r)}nr(e,r){return(function(i,s){let a=!1;return EN(i).Y((o=>kN(i,o,s).next((l=>(l&&(a=!0),Je.resolve(!l)))))).next((()=>a))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,((a,o)=>{if(o<=r){const l=this.nr(e,a).next((c=>{if(!c)return s++,n.getEntry(e,a).next((()=>(n.removeEntry(a,vr.min()),Jd(e).delete((function(p){return[0,ho(p.path)]})(a)))))}));i.push(l)}})).next((()=>Je.waitFor(i))).next((()=>n.apply(e))).next((()=>s))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return W2(e,r)}tr(e,r){const n=Jd(e);let i,s=zo.oe;return n.J({index:"documentTargetsIndex"},(([a,o],{path:l,sequenceNumber:c})=>{a===0?(s!==zo.oe&&r(new Gt(eu(i)),s),s=c,i=l):s=zo.oe})).next((()=>{s!==zo.oe&&r(new Gt(eu(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function W2(t,e){return Jd(t).put((function(n,i){return{targetId:0,path:ho(n.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.changes=new ld((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,bi.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Je.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return uf(e).put(n)}removeEntry(e,r,n){return uf(e).delete((function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],av(a),o[o.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=bi.newInvalidDocument(r);return uf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rm(r))},((i,s)=>{n=this.ir(r,s)})).next((()=>n))}sr(e,r){let n={size:0,document:bi.newInvalidDocument(r)};return uf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rm(r))},((i,s)=>{n={document:this.ir(r,s),size:lv(s)}})).next((()=>n))}getEntries(e,r){let n=Ho();return this._r(e,r,((i,s)=>{const a=this.ir(i,s);n=n.insert(i,a)})).next((()=>n))}ar(e,r){let n=Ho(),i=new xi(Gt.comparator);return this._r(e,r,((s,a)=>{const o=this.ir(s,a);n=n.insert(s,o),i=i.insert(s,lv(a))})).next((()=>({documents:n,ur:i})))}_r(e,r,n){if(r.isEmpty())return Je.resolve();let i=new ii(Wk);r.forEach((l=>i=i.add(l)));const s=IDBKeyRange.bound(rm(i.first()),rm(i.last())),a=i.getIterator();let o=a.getNext();return uf(e).J({index:"documentKeyIndex",range:s},((l,c,d)=>{const p=Gt.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&Wk(o,p)<0;)n(o,null),o=a.getNext();o&&o.isEqual(p)&&(n(o,c),o=a.hasNext()?a.getNext():null),o?d.$(rm(o)):d.done()})).next((()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,r,n,i,s){const a=r.path,o=[a.popLast().toArray(),a.lastSegment(),av(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return uf(e).U(IDBKeyRange.bound(o,l,!0)).next((c=>{s?.incrementDocumentReadCount(c.length);let d=Ho();for(const p of c){const g=this.ir(Gt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(Ng(r,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d}))}getAllFromCollectionGroup(e,r,n,i){let s=Ho();const a=qk(r,n),o=qk(r,vl.max());return uf(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},((l,c,d)=>{const p=this.ir(Gt.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(p.key,p),s.size===i&&d.done()})).next((()=>s))}newChangeBuffer(e){return new nU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return Hk(e).get("remoteDocumentGlobalKey").next((r=>(fr(!!r),r)))}rr(e,r){return Hk(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=zV(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(vr.min())))return n}return bi.newInvalidDocument(e)}}function NN(t){return new rU(t)}class nU extends TN{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new ld((n=>n.toString()),((n,i)=>n.isEqual(i)))}applyChanges(e){const r=[];let n=0,i=new ii(((s,a)=>Or(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const o=this.lr.get(s);if(r.push(this.cr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=Ik(this.cr.serializer,a);i=i.add(s.path.popLast());const c=lv(l);n+=c-o.size,r.push(this.cr.addEntry(e,s,l))}else if(n-=o.size,this.trackRemovals){const l=Ik(this.cr.serializer,a.convertToNoDocument(vr.min()));r.push(this.cr.addEntry(e,s,l))}})),i.forEach((s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,s))})),r.push(this.cr.updateMetadata(e,n)),Je.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:i})=>(i.forEach(((s,a)=>{this.lr.set(s,{size:a,readTime:n.get(s).readTime})})),n)))}}function Hk(t){return ta(t,"remoteDocumentGlobal")}function uf(t){return ta(t,"remoteDocumentsV14")}function rm(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qk(t,e){const r=e.documentKey.path.toArray();return[t,av(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Wk(t,e){const r=t.path.toArray(),n=e.path.toArray();let i=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(i=Or(r[s],n[s]),i)return i;return i=Or(r.length,n.length),i||(i=Or(r[r.length-2],n[n.length-2]),i||Or(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,r)))).next((i=>(n!==null&&Sm(n.mutation,i,$o.empty(),Di.now()),i)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,$r()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=$r()){const i=tu();return this.populateOverlays(e,i,r).next((()=>this.computeViews(e,r,i,n).next((s=>{let a=hm();return s.forEach(((o,l)=>{a=a.insert(o,l.overlayedDocument)})),a}))))}getOverlayedDocuments(e,r){const n=tu();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,$r())))}populateOverlays(e,r,n){const i=[];return n.forEach((s=>{r.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,o)=>{r.set(a,o)}))}))}computeViews(e,r,n,i){let s=Ho();const a=Em(),o=(function(){return Em()})();return r.forEach(((l,c)=>{const d=n.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof cd)?s=s.insert(c.key,c):d!==void 0?(a.set(c.key,d.mutation.getFieldMask()),Sm(d.mutation,c,d.mutation.getFieldMask(),Di.now())):a.set(c.key,$o.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((c,d)=>a.set(c,d))),r.forEach(((c,d)=>{var p;return o.set(c,new iU(d,(p=a.get(c))!==null&&p!==void 0?p:null))})),o)))}recalculateAndSaveOverlays(e,r){const n=Em();let i=new xi(((a,o)=>a-o)),s=$r();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((a=>{for(const o of a)o.keys().forEach((l=>{const c=r.get(l);if(c===null)return;let d=n.get(l)||$o.empty();d=o.applyToLocalView(c,d),n.set(l,d);const p=(i.get(o.batchId)||$r()).add(l);i=i.insert(o.batchId,p)}))})).next((()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,d=l.value,p=qT();d.forEach((g=>{if(!s.has(g)){const m=JT(r.get(g),n.get(g));m!==null&&p.set(g,m),s=s.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(e,c,p))}return Je.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,i){return(function(a){return Gt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):e6(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-s.size):Je.resolve(tu());let o=-1,l=s;return a.next((c=>Je.forEach(c,((d,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),s.get(d)?Je.resolve():this.remoteDocumentCache.getEntry(e,d).next((g=>{l=l.insert(d,g)}))))).next((()=>this.populateOverlays(e,c,s))).next((()=>this.computeViews(e,l,c,$r()))).next((d=>({batchId:o,changes:HT(d)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Gt(r)).next((n=>{let i=hm();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const s=r.collectionGroup;let a=hm();return this.indexManager.getCollectionParents(e,s).next((o=>Je.forEach(o,(l=>{const c=(function(p,g){return new od(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(r,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,n,i).next((d=>{d.forEach(((p,g)=>{a=a.insert(p,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,r,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,i)))).next((a=>{s.forEach(((l,c)=>{const d=c.getKey();a.get(d)===null&&(a=a.insert(d,bi.newInvalidDocument(d)))}));let o=hm();return a.forEach(((l,c)=>{const d=s.get(l);d!==void 0&&Sm(d.mutation,c,$o.empty(),Di.now()),Ng(r,c)&&(o=o.insert(l,c))})),o}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Je.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(i){return{id:i.id,version:i.version,createTime:Ss(i.createTime)}})(r)),Je.resolve()}getNamedQuery(e,r){return Je.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(i){return{name:i.name,query:c6(i.bundledQuery),readTime:Ss(i.readTime)}})(r)),Je.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(){this.overlays=new xi(Gt.comparator),this.Ir=new Map}getOverlay(e,r){return Je.resolve(this.overlays.get(r))}getOverlays(e,r){const n=tu();return Je.forEach(r,(i=>this.getOverlay(e,i).next((s=>{s!==null&&n.set(i,s)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((i,s)=>{this.ht(e,r,s)})),Je.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.Ir.delete(n)),Je.resolve()}getOverlaysForCollection(e,r,n){const i=tu(),s=r.length+1,a=new Gt(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>n&&i.set(l.getKey(),l)}return Je.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let s=new xi(((c,d)=>c-d));const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let d=s.get(c.largestBatchId);d===null&&(d=tu(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=tu(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,d)=>o.set(c,d))),!(o.size()>=i)););return Je.resolve(o)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new a6(r,n));let s=this.Ir.get(r);s===void 0&&(s=$r(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(){this.sessionToken=Ki.EMPTY_BYTE_STRING}getSessionToken(e){return Je.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Je.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(){this.Tr=new ii(da.Er),this.dr=new ii(da.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new da(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new da(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new Gt(new pn([])),n=new da(r,e),i=new da(r,e+1),s=[];return this.dr.forEachInRange([n,i],(a=>{this.Vr(a),s.push(a.key)})),s}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Gt(new pn([])),n=new da(r,e),i=new da(r,e+1);let s=$r();return this.dr.forEachInRange([n,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const r=new da(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class da{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Gt.comparator(e.key,r.key)||Or(e.wr,r.wr)}static Ar(e,r){return Or(e.wr,r.wr)||Gt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new ii(da.Er)}checkEmpty(e){return Je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new i6(s,r,n,i);this.mutationQueue.push(a);for(const o of i)this.br=this.br.add(new da(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Je.resolve(a)}lookupMutationBatch(e,r){return Je.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.vr(n),s=i<0?0:i;return Je.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Je.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new da(r,0),i=new da(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,i],(a=>{const o=this.Dr(a.wr);s.push(o)})),Je.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new ii(Or);return r.forEach((i=>{const s=new da(i,0),a=new da(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],(o=>{n=n.add(o.wr)}))})),Je.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let s=n;Gt.isDocumentKey(s)||(s=s.child(""));const a=new da(new Gt(s),0);let o=new ii(Or);return this.br.forEachWhile((l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===i&&(o=o.add(l.wr)),!0)}),a),Je.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach((n=>{const i=this.Dr(n);i!==null&&r.push(i)})),r}removeMutationBatch(e,r){fr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Je.forEach(r.mutations,(i=>{const s=new da(i.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new da(r,0),i=this.br.firstAfterOrEqual(n);return Je.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Je.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e){this.Mr=e,this.docs=(function(){return new xi(Gt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),s=i?i.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Je.resolve(n?n.document.mutableCopy():bi.newInvalidDocument(r))}getEntries(e,r){let n=Ho();return r.forEach((i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():bi.newInvalidDocument(i))})),Je.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let s=Ho();const a=r.path,o=new Gt(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Yw(mT(d),n)<=0||(i.has(d.key)||Ng(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Je.resolve(s)}getAllFromCollectionGroup(e,r,n,i){Jt()}Or(e,r){return Je.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new uU(this)}getSize(e){return Je.resolve(this.size)}}class uU extends TN{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)})),Je.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e){this.persistence=e,this.Nr=new ld((r=>Of(r)),Cg),this.lastRemoteSnapshotVersion=vr.min(),this.highestTargetId=0,this.Lr=0,this.Br=new f6,this.targetCount=0,this.kr=zf.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,i)=>r(i))),Je.resolve()}getLastRemoteSnapshotVersion(e){return Je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Je.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Je.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Je.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new zf(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Je.resolve()}updateTargetData(e,r){return this.Kn(r),Je.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Je.resolve()}removeTargets(e,r,n){let i=0;const s=[];return this.Nr.forEach(((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),Je.waitFor(s).next((()=>i))}getTargetCount(e){return Je.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Je.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Je.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,s=[];return i&&r.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),Je.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Je.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Je.resolve(n)}containsKey(e,r){return Je.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e,r){this.qr={},this.overlays={},this.Qr=new zo(0),this.Kr=!1,this.Kr=!0,this.$r=new oU,this.referenceDelegate=e(this),this.Ur=new dU(this),this.indexManager=new YV,this.remoteDocumentCache=(function(i){return new cU(i)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new vN(r),this.Gr=new sU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new aU,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new lU(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Nt("MemoryPersistence","Starting transaction:",e);const i=new fU(this.Qr.next());return this.referenceDelegate.zr(),n(i).next((s=>this.referenceDelegate.jr(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Hr(e,r){return Je.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class fU extends xT{constructor(e){super(),this.currentSequenceNumber=e}}class d5{constructor(e){this.persistence=e,this.Jr=new f6,this.Yr=null}static Zr(e){return new d5(e)}get Xr(){if(this.Yr)return this.Yr;throw Jt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Je.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Je.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Je.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((i=>this.Xr.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((i=>{i.forEach((s=>this.Xr.add(s.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Je.forEach(this.Xr,(n=>{const i=Gt.fromPath(n);return this.ei(e,i).next((s=>{s||r.removeEntry(i,vr.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return Je.or([()=>Je.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class cv{constructor(e,r){this.persistence=e,this.ti=new ld((n=>ho(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=CN(this,r)}static Zr(e,r){return new cv(e,r)}zr(){}jr(e){return Je.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Yn(e){const r=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>r.next((i=>n+i))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}Zn(e,r){return Je.forEach(this.ti,((n,i)=>this.nr(e,n,i).next((s=>s?Je.resolve():r(i)))))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Or(e,(a=>this.nr(e,a,r).next((o=>{o||(n++,s.removeEntry(a,vr.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,r){return this.ti.set(r,e.currentSequenceNumber),Je.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),Je.resolve()}removeReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),Je.resolve()}updateLimboDocument(e,r){return this.ti.set(r,e.currentSequenceNumber),Je.resolve()}Wr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Ix(e.data.value)),r}nr(e,r,n){return Je.or([()=>this.persistence.Hr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.ti.get(r);return Je.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e){this.serializer=e}O(e,r,n,i){const s=new r5("createOrUpgrade",r);n<1&&i>=1&&((function(l){l.createObjectStore("owner")})(e),(function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ak,{unique:!0}),l.createObjectStore("documentMutations")})(e),Gk(e),(function(l){l.createObjectStore("remoteDocuments")})(e));let a=Je.resolve();return n<3&&i>=3&&(n!==0&&((function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")})(e),Gk(e)),a=a.next((()=>(function(l){const c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vr.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)})(s)))),n<4&&i>=4&&(n!==0&&(a=a.next((()=>(function(l,c){return c.store("mutations").U().next((d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ak,{unique:!0});const p=c.store("mutations"),g=d.map((m=>p.put(m)));return Je.waitFor(g)}))})(e,s)))),a=a.next((()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&i>=5&&(a=a.next((()=>this.ni(s)))),n<6&&i>=6&&(a=a.next((()=>((function(l){l.createObjectStore("remoteDocumentGlobal")})(e),this.ri(s))))),n<7&&i>=7&&(a=a.next((()=>this.ii(s)))),n<8&&i>=8&&(a=a.next((()=>this.si(e,s)))),n<9&&i>=9&&(a=a.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&i>=10&&(a=a.next((()=>this.oi(s)))),n<11&&i>=11&&(a=a.next((()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(l){l.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&i>=12&&(a=a.next((()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:YB});c.createIndex("collectionPathOverlayIndex",QB,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",JB,{unique:!1})})(e)}))),n<13&&i>=13&&(a=a.next((()=>(function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:BB});c.createIndex("documentKeyIndex",VB),c.createIndex("collectionGroupIndex",UB)})(e))).next((()=>this._i(e,s))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&i>=14&&(a=a.next((()=>this.ai(e,s)))),n<15&&i>=15&&(a=a.next((()=>(function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:WB}).createIndex("sequenceNumberIndex",GB,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:KB}).createIndex("documentKeyIndex",XB,{unique:!1})})(e)))),n<16&&i>=16&&(a=a.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&i>=17&&(a=a.next((()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)}))),a}ri(e){let r=0;return e.store("remoteDocuments").J(((n,i)=>{r+=lv(i)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((i=>Je.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",a).next((o=>Je.forEach(o,(l=>{fr(l.userId===s.userId);const c=gf(this.serializer,l);return _N(e,s.userId,c).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((i=>{const s=[];return n.J(((a,o)=>{const l=new pn(a),c=(function(p){return[0,ho(p)]})(l);s.push(r.get(c).next((d=>d?Je.resolve():(p=>r.put({targetId:0,path:ho(p),sequenceNumber:i.highestListenSequenceNumber}))(l))))})).next((()=>Je.waitFor(s)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:qB});const n=r.store("collectionParents"),i=new d6,s=a=>{if(i.add(a)){const o=a.lastSegment(),l=a.popLast();return n.put({collectionId:o,parent:ho(l)})}};return r.store("remoteDocuments").J({H:!0},((a,o)=>{const l=new pn(a);return s(l.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([a,o,l],c)=>{const d=eu(o);return s(d.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,i)=>{const s=mm(i),a=yN(this.serializer,s);return r.put(a)}))}_i(e,r){const n=r.store("remoteDocuments"),i=[];return n.J(((s,a)=>{const o=r.store("remoteDocumentsV14"),l=(function(p){return p.document?new Gt(pn.fromString(p.document.name).popFirst(5)):p.noDocument?Gt.fromSegments(p.noDocument.path):p.unknownDocument?Gt.fromSegments(p.unknownDocument.path):Jt()})(a).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(c))})).next((()=>Je.waitFor(i)))}ai(e,r){const n=r.store("mutations"),i=NN(this.serializer),s=new h6(d5.Zr,this.serializer.ct);return n.U().next((a=>{const o=new Map;return a.forEach((l=>{var c;let d=(c=o.get(l.userId))!==null&&c!==void 0?c:$r();gf(this.serializer,l).keys().forEach((p=>d=d.add(p))),o.set(l.userId,d)})),Je.forEach(o,((l,c)=>{const d=new ha(c),p=c5.lt(this.serializer,d),g=s.getIndexManager(d),m=u5.lt(d,this.serializer,g,s.referenceDelegate);return new AN(i,m,p,g).recalculateAndSaveOverlaysForDocumentKeys(new _3(r,zo.oe),l).next()}))}))}}function Gk(t){t.createObjectStore("targetDocuments",{keyPath:$B}).createIndex("documentTargetsIndex",HB,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",zB,{unique:!0}),t.createObjectStore("targetGlobal")}const Yy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class p6{constructor(e,r,n,i,s,a,o,l,c,d,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=a,this.document=o,this.ci=c,this.li=d,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!p6.D())throw new Ct(ut.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tU(this,i),this.Ai=r+"main",this.serializer=new vN(l),this.Ri=new au(this.Ai,this.hi,new hU(this.serializer)),this.$r=new HV,this.Ur=new JV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=NN(this.serializer),this.Gr=new $V,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&ks("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ct(ut.FAILED_PRECONDITION,Yy);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new zo(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>G2(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(F0(e))return Nt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Nt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return nm(e).get("owner").next((r=>Je.resolve(this.vi(r))))}Ci(e){return G2(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=ta(r,"clientMetadata");return n.U().next((i=>{const s=this.xi(i,18e5),a=i.filter((o=>s.indexOf(o)===-1));return Je.forEach(a,(o=>n.delete(o.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Je.resolve(!0):nm(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Ct(ut.FAILED_PRECONDITION,Yy);return!1}}return!(!this.networkEnabled||!this.inForeground)||G2(e).U().next((n=>this.xi(n,5e3).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&Nt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new _3(e,zo.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>G2(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return u5.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new QV(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return c5.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){Nt("IndexedDbPersistence","Starting transaction:",e);const i=r==="readonly"?"readonly":"readwrite",s=(function(l){return l===17?tV:l===16?eV:l===15?Jw:l===14?kT:l===13?_T:l===12?ZB:l===11?bT:void Jt()})(this.hi);let a;return this.Ri.runTransaction(e,i,s,(o=>(a=new _3(o,this.Qr?this.Qr.next():zo.oe),r==="readwrite-primary"?this.wi(a).next((l=>!!l||this.Si(a))).next((l=>{if(!l)throw ks(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new Ct(ut.FAILED_PRECONDITION,gT);return n(a)})).next((l=>this.Di(a).next((()=>l)))):this.Ki(a).next((()=>n(a)))))).then((o=>(a.raiseOnCommittedEvent(),o)))}Ki(e){return nm(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Ct(ut.FAILED_PRECONDITION,Yy)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nm(e).put("owner",r)}static D(){return au.D()}bi(e){const r=nm(e);return r.get("owner").next((n=>this.vi(n)?(Nt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Je.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(ks(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;QC()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return Nt("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ks("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ks("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function nm(t){return ta(t,"owner")}function G2(t){return ta(t,"clientMetadata")}function m6(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(e,r){let n=$r(),i=$r();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new g6(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return QC()?8:vT(Js())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,i){const s={result:null};return this.Yi(e,r).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.Zi(e,r,i,n).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new pU;return this.Xi(e,r,a).next((o=>{if(s.result=o,this.zi)return this.es(e,r,a,o.size)}))})).next((()=>s.result))}es(e,r,n,i){return n.documentReadCount<this.ji?(r1()<=hn.DEBUG&&Nt("QueryEngine","SDK will not create cache indexes for query:",n1(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Je.resolve()):(r1()<=hn.DEBUG&&Nt("QueryEngine","Query:",n1(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(r1()<=hn.DEBUG&&Nt("QueryEngine","The SDK decides to create cache indexes for query:",n1(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,po(r))):Je.resolve())}Yi(e,r){if(yk(r))return Je.resolve(null);let n=po(r);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(r.limit!==null&&i===1&&(r=iv(r,null,"F"),n=po(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((s=>{const a=$r(...s);return this.Ji.getDocuments(e,a).next((o=>this.indexManager.getMinOffset(e,n).next((l=>{const c=this.ts(r,o);return this.ns(r,c,a,l.readTime)?this.Yi(e,iv(r,null,"F")):this.rs(e,c,r,l)}))))})))))}Zi(e,r,n,i){return yk(r)||i.isEqual(vr.min())?Je.resolve(null):this.Ji.getDocuments(e,n).next((s=>{const a=this.ts(r,s);return this.ns(r,a,n,i)?Je.resolve(null):(r1()<=hn.DEBUG&&Nt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),n1(r)),this.rs(e,a,r,pT(i,-1)).next((o=>o)))}))}ts(e,r){let n=new ii(zT(e));return r.forEach(((i,s)=>{Ng(e,s)&&(n=n.add(s))})),n}ns(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,r,n){return r1()<=hn.DEBUG&&Nt("QueryEngine","Using full collection scan to execute query:",n1(r)),this.Ji.getDocumentsMatchingQuery(e,r,vl.min(),n)}rs(e,r,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next((s=>(r.forEach((a=>{s=s.insert(a.key,a)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(e,r,n,i){this.persistence=e,this.ss=r,this.serializer=i,this.os=new xi(Or),this._s=new ld((s=>Of(s)),Cg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function PN(t,e,r,n){return new mU(t,e,r,n)}async function RN(t,e){const r=qt(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next((s=>(i=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((s=>{const a=[],o=[];let l=$r();for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return r.localDocuments.getDocuments(n,l).next((c=>({hs:c,removedBatchIds:a,addedBatchIds:o})))}))}))}function gU(t,e){const r=qt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return(function(o,l,c,d){const p=c.batch,g=p.keys();let m=Je.resolve();return g.forEach((w=>{m=m.next((()=>d.getEntry(l,w))).next((y=>{const k=c.docVersions.get(w);fr(k!==null),y.version.compareTo(k)<0&&(p.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))}))})),m.next((()=>o.mutationQueue.removeMutationBatch(l,p)))})(r,n,e,s).next((()=>s.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(o){let l=$r();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l})(e)))).next((()=>r.localDocuments.getDocuments(n,i)))}))}function FN(t){const e=qt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function xU(t,e){const r=qt(t),n=e.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const o=[];e.targetChanges.forEach(((d,p)=>{const g=i.get(p);if(!g)return;o.push(r.Ur.removeMatchingKeys(s,d.removedDocuments,p).next((()=>r.Ur.addMatchingKeys(s,d.addedDocuments,p))));let m=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(Ki.EMPTY_BYTE_STRING,vr.min()).withLastLimboFreeSnapshotVersion(vr.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),i=i.insert(p,m),(function(y,k,T){return y.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(g,m,d)&&o.push(r.Ur.updateTargetData(s,m))}));let l=Ho(),c=$r();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))})),o.push(LN(s,a,e.documentUpdates).next((d=>{l=d.Ps,c=d.Is}))),!n.isEqual(vr.min())){const d=r.Ur.getLastRemoteSnapshotVersion(s).next((p=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n)));o.push(d)}return Je.waitFor(o).next((()=>a.apply(s))).next((()=>r.localDocuments.getLocalViewOfDocuments(s,l,c))).next((()=>l))})).then((s=>(r.os=i,s)))}function LN(t,e,r){let n=$r(),i=$r();return r.forEach((s=>n=n.add(s))),e.getEntries(t,n).next((s=>{let a=Ho();return r.forEach(((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(vr.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Nt("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)})),{Ps:a,Is:i}}))}function vU(t,e){const r=qt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function B1(t,e){const r=qt(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return r.Ur.getTargetData(n,e).next((s=>s?(i=s,Je.resolve(i)):r.Ur.allocateTargetId(n).next((a=>(i=new Uu(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=r.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function V1(t,e,r){const n=qt(t),i=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,(a=>n.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!F0(a))throw a;Nt("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function uv(t,e,r){const n=qt(t);let i=vr.min(),s=$r();return n.persistence.runTransaction("Execute query","readwrite",(a=>(function(l,c,d){const p=qt(l),g=p._s.get(d);return g!==void 0?Je.resolve(p.os.get(g)):p.Ur.getTargetData(c,d)})(n,a,po(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next((l=>{s=l}))})).next((()=>n.ss.getDocumentsMatchingQuery(a,e,r?i:vr.min(),r?s:$r()))).next((o=>(ON(n,UT(e),o),{documents:o,Ts:s})))))}function jN(t,e){const r=qt(t),n=qt(r.Ur),i=r.os.get(e);return i?Promise.resolve(i.target):r.persistence.runTransaction("Get target data","readonly",(s=>n.ot(s,e).next((a=>a?a.target:null))))}function DN(t,e){const r=qt(t),n=r.us.get(e)||vr.min();return r.persistence.runTransaction("Get new document changes","readonly",(i=>r.cs.getAllFromCollectionGroup(i,e,pT(n,-1),Number.MAX_SAFE_INTEGER))).then((i=>(ON(r,e,i),i)))}function ON(t,e,r){let n=t.us.get(e)||vr.min();r.forEach(((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)})),t.us.set(e,n)}async function yU(t,e,r,n){const i=qt(t);let s=$r(),a=Ho();for(const c of r){const d=e.Es(c.metadata.name);c.document&&(s=s.add(d));const p=e.ds(c);p.setReadTime(e.As(c.metadata.readTime)),a=a.insert(d,p)}const o=i.cs.newChangeBuffer({trackRemovals:!0}),l=await B1(i,(function(d){return po(tp(pn.fromString(`__bundle__/docs/${d}`)))})(n));return i.persistence.runTransaction("Apply bundle documents","readwrite",(c=>LN(c,o,a).next((d=>(o.apply(c),d))).next((d=>i.Ur.removeMatchingKeysForTargetId(c,l.targetId).next((()=>i.Ur.addMatchingKeys(c,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is))).next((()=>d.Ps))))))}async function wU(t,e,r=$r()){const n=await B1(t,po(c6(e.bundledQuery))),i=qt(t);return i.persistence.runTransaction("Save named query","readwrite",(s=>{const a=Ss(e.readTime);if(n.snapshotVersion.compareTo(a)>=0)return i.Gr.saveNamedQuery(s,e);const o=n.withResumeToken(Ki.EMPTY_BYTE_STRING,a);return i.os=i.os.insert(o.targetId,o),i.Ur.updateTargetData(s,o).next((()=>i.Ur.removeMatchingKeysForTargetId(s,n.targetId))).next((()=>i.Ur.addMatchingKeys(s,r,n.targetId))).next((()=>i.Gr.saveNamedQuery(s,e)))}))}function Kk(t,e){return`firestore_clients_${t}_${e}`}function Xk(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function Qy(t,e){return`firestore_targets_${t}_${e}`}class dv{constructor(e,r,n,i){this.user=e,this.batchId=r,this.state=n,this.error=i}static Rs(e,r,n){const i=JSON.parse(n);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new Ct(i.error.code,i.error.message))),a?new dv(e,r,i.state,s):(ks("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cm{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let i,s=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return s&&n.error&&(s=typeof n.error.message=="string"&&typeof n.error.code=="string",s&&(i=new Ct(n.error.code,n.error.message))),s?new Cm(e,n.state,i):(ks("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fv{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let i=typeof n=="object"&&n.activeTargetIds instanceof Array,s=t6();for(let a=0;i&&a<n.activeTargetIds.length;++a)i=yT(n.activeTargetIds[a]),s=s.add(n.activeTargetIds[a]);return i?new fv(e,s):(ks("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class x6{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new x6(r.clientId,r.onlineState):(ks("SharedClientState",`Failed to parse online state: ${e}`),null)}}class D3{constructor(){this.activeTargetIds=t6()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jy{constructor(e,r,n,i,s){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new xi(Or),this.started=!1,this.bs=[];const a=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=Kk(this.persistenceKey,this.ps),this.vs=(function(l){return`firestore_sequence_number_${l}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new D3),this.Cs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.xs=(function(l){return`firestore_online_state_${l}`})(this.persistenceKey),this.Os=(function(l){return`firestore_bundle_loaded_v2_${l}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const i=this.getItem(Kk(this.persistenceKey,n));if(i){const s=fv.Rs(n,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,i)=>{i.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Qy(this.persistenceKey,e));if(i){const s=Cm.Rs(e,i);s&&(n=s.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qy(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((i=>{this.Qs(i)})),this.currentUser=e,n.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return Nt("SharedClientState","READ",e,r),r}setItem(e,r){Nt("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Nt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(Nt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void ks("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(s){let a=zo.oe;if(s!=null)try{const o=JSON.parse(s);fr(typeof o=="number"),a=o}catch(o){ks("SharedClientState","Failed to read sequence number from WebStorage",o)}return a})(r.newValue);n!==zo.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((i=>this.syncEngine.eo(i))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const i=new dv(this.currentUser,e,r,n),s=Xk(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const r=Xk(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const i=Qy(this.persistenceKey,e),s=new Cm(e,r,n);this.setItem(i,s.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return fv.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),i=Number(n[1]),s=n[2]!==void 0?n[2]:null;return dv.Rs(new ha(s),i,r)}Ys(e,r){const n=this.Ms.exec(e),i=Number(n[1]);return Cm.Rs(i,r)}Ls(e){return x6.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Nt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(n),a=[],o=[];return s.forEach((l=>{i.has(l)||a.push(l)})),i.forEach((l=>{s.has(l)||o.push(l)})),this.syncEngine.io(a,o).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=t6();return e.forEach(((n,i)=>{r=r.unionWith(i.activeTargetIds)})),r}}class MN{constructor(){this.so=new D3,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new D3,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Nt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Nt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K2=null;function Zy(){return K2===null?K2=(function(){return 268435456+Math.round(2147483648*Math.random())})():K2++,"0x"+K2.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="WebChannelConnection";class EU extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(r,n,i,s,a){const o=Zy(),l=this.xo(r,n.toUriEncodedString());Nt("RestConnection",`Sending RPC '${r}' ${o}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,a),this.No(r,l,c,i).then((d=>(Nt("RestConnection",`Received RPC '${r}' ${o}: `,d),d)),(d=>{throw xl("RestConnection",`RPC '${r}' ${o} failed with error: `,d,"url: ",l,"request:",i),d}))}Lo(r,n,i,s,a,o){return this.Mo(r,n,i,s,a)}Oo(r,n,i){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ep})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,a)=>r[a]=s)),i&&i.headers.forEach(((s,a)=>r[a]=s))}xo(r,n){const i=_U[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,i){const s=Zy();return new Promise(((a,o)=>{const l=new sT;l.setWithCredentials(!0),l.listenOnce(aT.COMPLETE,(()=>{try{switch(l.getLastErrorCode()){case Tx.NO_ERROR:const d=l.getResponseJson();Nt(eo,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),a(d);break;case Tx.TIMEOUT:Nt(eo,`RPC '${e}' ${s} timed out`),o(new Ct(ut.DEADLINE_EXCEEDED,"Request time out"));break;case Tx.HTTP_ERROR:const p=l.getStatus();if(Nt(eo,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const m=g?.error;if(m&&m.status&&m.message){const w=(function(k){const T=k.toLowerCase().replace(/_/g,"-");return Object.values(ut).indexOf(T)>=0?T:ut.UNKNOWN})(m.status);o(new Ct(w,m.message))}else o(new Ct(ut.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new Ct(ut.UNAVAILABLE,"Connection failed."));break;default:Jt()}}finally{Nt(eo,`RPC '${e}' ${s} completed.`)}}));const c=JSON.stringify(i);Nt(eo,`RPC '${e}' ${s} sending request:`,i),l.send(r,"POST",c,n,15)}))}Bo(e,r,n){const i=Zy(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=cT(),o=lT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=s.join("");Nt(eo,`Creating RPC '${e}' stream ${i}: ${d}`,l);const p=a.createWebChannel(d,l);let g=!1,m=!1;const w=new kU({Io:k=>{m?Nt(eo,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(g||(Nt(eo,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),Nt(eo,`RPC '${e}' stream ${i} sending:`,k),p.send(k))},To:()=>p.close()}),y=(k,T,O)=>{k.listen(T,(P=>{try{O(P)}catch(V){setTimeout((()=>{throw V}),0)}}))};return y(p,fm.EventType.OPEN,(()=>{m||(Nt(eo,`RPC '${e}' stream ${i} transport opened.`),w.yo())})),y(p,fm.EventType.CLOSE,(()=>{m||(m=!0,Nt(eo,`RPC '${e}' stream ${i} transport closed`),w.So())})),y(p,fm.EventType.ERROR,(k=>{m||(m=!0,xl(eo,`RPC '${e}' stream ${i} transport errored:`,k),w.So(new Ct(ut.UNAVAILABLE,"The operation could not be completed")))})),y(p,fm.EventType.MESSAGE,(k=>{var T;if(!m){const O=k.data[0];fr(!!O);const P=O,V=P.error||((T=P[0])===null||T===void 0?void 0:T.error);if(V){Nt(eo,`RPC '${e}' stream ${i} received error:`,V);const Y=V.status;let G=(function(C){const R=js[C];if(R!==void 0)return rN(R)})(Y),L=V.message;G===void 0&&(G=ut.INTERNAL,L="Unknown error status: "+Y+" with message "+V.message),m=!0,w.So(new Ct(G,L)),p.close()}else Nt(eo,`RPC '${e}' stream ${i} received:`,O),w.bo(O)}})),y(o,oT.STAT_EVENT,(k=>{k.stat===w3.PROXY?Nt(eo,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===w3.NOPROXY&&Nt(eo,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{w.wo()}),0),w}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(){return typeof window<"u"?window:null}function Lx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t){return new RV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e,r,n=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&Nt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,r,n,i,s,a,o,l){this.ui=e,this.Ho=n,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new v6(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===ut.RESOURCE_EXHAUSTED?(ks(r.toString()),ks("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===ut.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.Yo===r&&this.P_(n,i)}),(n=>{e((()=>{const i=new Ct(ut.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{n((()=>this.I_(i)))})),this.stream.onMessage((i=>{n((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Nt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(Nt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SU extends VN{constructor(e,r,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=jV(this.serializer,e),n=(function(s){if(!("targetChange"in s))return vr.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?vr.min():a.readTime?Ss(a.readTime):vr.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=P3(this.serializer),r.addTarget=(function(s,a){let o;const l=a.target;if(o=rv(l)?{documents:fN(s,l)}:{query:l5(s,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=aN(s,a.resumeToken);const c=A3(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(vr.min())>0){o.readTime=M1(s,a.snapshotVersion.toTimestamp());const c=A3(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o})(this.serializer,e);const n=OV(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=P3(this.serializer),r.removeTarget=e,this.a_(r)}}class CU extends VN{constructor(e,r,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return fr(!!e.streamToken),this.lastStreamToken=e.streamToken,fr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){fr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=DV(e.writeResults,e.commitTime),n=Ss(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=P3(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>Zm(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Ct(ut.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Mo(e,I3(r,n),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ct(ut.UNKNOWN,s.toString())}))}Lo(e,r,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Lo(e,I3(r,n),i,a,o,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ct(ut.UNKNOWN,a.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class NU{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ks(r),this.D_=!1):Nt("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e,r,n,i,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o((a=>{n.enqueueAndForget((async()=>{j0(this)&&(Nt("RemoteStore","Restarting streams for network reachability change."),await(async function(l){const c=qt(l);c.L_.add(4),await ip(c),c.q_.set("Unknown"),c.L_.delete(4),await Fg(c)})(this))}))})),this.q_=new NU(n,i)}}async function Fg(t){if(j0(t))for(const e of t.B_)await e(!0)}async function ip(t){for(const e of t.B_)await e(!1)}function f5(t,e){const r=qt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),b6(r)?w6(r):ap(r).r_()&&y6(r,e))}function U1(t,e){const r=qt(t),n=ap(r);r.N_.delete(e),n.r_()&&UN(r,e),r.N_.size===0&&(n.r_()?n.o_():j0(r)&&r.q_.set("Unknown"))}function y6(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vr.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}ap(t).A_(e)}function UN(t,e){t.Q_.xe(e),ap(t).R_(e)}function w6(t){t.Q_=new NV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ap(t).start(),t.q_.v_()}function b6(t){return j0(t)&&!ap(t).n_()&&t.N_.size>0}function j0(t){return qt(t).L_.size===0}function zN(t){t.Q_=void 0}async function IU(t){t.q_.set("Online")}async function PU(t){t.N_.forEach(((e,r)=>{y6(t,e)}))}async function RU(t,e){zN(t),b6(t)?(t.q_.M_(e),w6(t)):t.q_.set("Unknown")}async function FU(t,e,r){if(t.q_.set("Online"),e instanceof sN&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const o of s.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.N_.delete(o),i.Q_.removeTarget(o))})(t,e)}catch(n){Nt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await hv(t,n)}else if(e instanceof Fx?t.Q_.Ke(e):e instanceof iN?t.Q_.He(e):t.Q_.We(e),!r.isEqual(vr.min()))try{const n=await FN(t.localStore);r.compareTo(n)>=0&&await(function(s,a){const o=s.Q_.rt(a);return o.targetChanges.forEach(((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(l.resumeToken,a))}})),o.targetMismatches.forEach(((l,c)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(Ki.EMPTY_BYTE_STRING,d.snapshotVersion)),UN(s,l);const p=new Uu(d.target,l,c,d.sequenceNumber);y6(s,p)})),s.remoteSyncer.applyRemoteEvent(o)})(t,r)}catch(n){Nt("RemoteStore","Failed to raise snapshot:",n),await hv(t,n)}}async function hv(t,e,r){if(!F0(e))throw e;t.L_.add(1),await ip(t),t.q_.set("Offline"),r||(r=()=>FN(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Nt("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Fg(t)}))}function $N(t,e){return e().catch((r=>hv(t,r,e)))}async function sp(t){const e=qt(t),r=w0(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;LU(e);)try{const i=await vU(e.localStore,n);if(i===null){e.O_.length===0&&r.o_();break}n=i.batchId,jU(e,i)}catch(i){await hv(e,i)}HN(e)&&qN(e)}function LU(t){return j0(t)&&t.O_.length<10}function jU(t,e){t.O_.push(e);const r=w0(t);r.r_()&&r.V_&&r.m_(e.mutations)}function HN(t){return j0(t)&&!w0(t).n_()&&t.O_.length>0}function qN(t){w0(t).start()}async function DU(t){w0(t).p_()}async function OU(t){const e=w0(t);for(const r of t.O_)e.m_(r.mutations)}async function MU(t,e,r){const n=t.O_.shift(),i=s6.from(n,e,r);await $N(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await sp(t)}async function BU(t,e){e&&w0(t).V_&&await(async function(n,i){if((function(a){return tN(a)&&a!==ut.ABORTED})(i.code)){const s=n.O_.shift();w0(n).s_(),await $N(n,(()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i))),await sp(n)}})(t,e),HN(t)&&qN(t)}async function Qk(t,e){const r=qt(t);r.asyncQueue.verifyOperationInProgress(),Nt("RemoteStore","RemoteStore received new credentials");const n=j0(r);r.L_.add(3),await ip(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Fg(r)}async function O3(t,e){const r=qt(t);e?(r.L_.delete(2),await Fg(r)):e||(r.L_.add(2),await ip(r),r.q_.set("Unknown"))}function ap(t){return t.K_||(t.K_=(function(r,n,i){const s=qt(r);return s.w_(),new SU(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Eo:IU.bind(null,t),Ro:PU.bind(null,t),mo:RU.bind(null,t),d_:FU.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),b6(t)?w6(t):t.q_.set("Unknown")):(await t.K_.stop(),zN(t))}))),t.K_}function w0(t){return t.U_||(t.U_=(function(r,n,i){const s=qt(r);return s.w_(),new CU(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:DU.bind(null,t),mo:BU.bind(null,t),f_:OU.bind(null,t),g_:MU.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await sp(t)):(await t.U_.stop(),t.O_.length>0&&(Nt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e,r,n,i,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new xa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,s){const a=Date.now()+n,o=new _6(e,r,a,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ct(ut.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function op(t,e){if(ks("AsyncQueue",`${e}: ${t}`),F0(t))return new Ct(ut.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Gt.comparator(r.key,n.key):(r,n)=>Gt.comparator(r.key,n.key),this.keyedMap=hm(),this.sortedSet=new xi(this.comparator)}static emptySet(e){return new p1(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof p1)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new p1;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this.W_=new xi(Gt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Jt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class z1{constructor(e,r,n,i,s,a,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,i,s){const a=[];return r.forEach((o=>{a.push({type:0,doc:o})})),new z1(e,r,p1.emptySet(r),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class UU{constructor(){this.queries=Zk(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=qt(r),s=i.queries;i.queries=Zk(),s.forEach(((a,o)=>{for(const l of o.j_)l.onError(n)}))})(this,new Ct(ut.ABORTED,"Firestore shutting down"))}}function Zk(){return new ld((t=>VT(t)),Tg)}async function k6(t,e){const r=qt(t);let n=3;const i=e.query;let s=r.queries.get(i);s?!s.H_()&&e.J_()&&(n=2):(s=new VU,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(i,!0);break;case 1:s.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(a){const o=op(a,`Initialization of query '${n1(e.query)}' failed`);return void e.onError(o)}r.queries.set(i,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&S6(r)}async function E6(t,e){const r=qt(t),n=e.query;let i=3;const s=r.queries.get(n);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function zU(t,e){const r=qt(t);let n=!1;for(const i of e){const s=i.query,a=r.queries.get(s);if(a){for(const o of a.j_)o.X_(i)&&(n=!0);a.z_=i}}n&&S6(r)}function $U(t,e,r){const n=qt(t),i=n.queries.get(e);if(i)for(const s of i.j_)s.onError(r);n.queries.delete(e)}function S6(t){t.Y_.forEach((e=>{e.next()}))}var M3,e7;(e7=M3||(M3={})).ea="default",e7.Cache="cache";class C6{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new z1(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=z1.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==M3.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e){this.serializer=e}Es(e){return ou(this.serializer,e)}ds(e){return e.metadata.exists?dN(this.serializer,e.document,!1):bi.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ss(e)}}class qU{constructor(e,r,n){this.ca=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=WN(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const n=pn.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,n=new t7(this.serializer);for(const i of e)if(i.metadata.queries){const s=n.Es(i.metadata.name);for(const a of i.metadata.queries){const o=(r.get(a)||$r()).add(s);r.set(a,o)}}return r}async complete(){const e=await yU(this.localStore,new t7(this.serializer),this.documents,this.ca.id),r=this.ha(this.documents);for(const n of this.queries)await wU(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function WN(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.key=e}}class KN{constructor(e){this.key=e}}class XN{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=$r(),this.mutatedKeys=$r(),this.Aa=zT(e),this.Ra=new p1(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new Jk,i=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((d,p)=>{const g=i.get(d),m=Ng(this.query,p)?p:null,w=!!g&&this.mutatedKeys.has(g.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let k=!1;g&&m?g.data.isEqual(m.data)?w!==y&&(n.track({type:3,doc:m}),k=!0):this.ga(g,m)||(n.track({type:2,doc:m}),k=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(o=!0)):!g&&m?(n.track({type:0,doc:m}),k=!0):g&&!m&&(n.track({type:1,doc:g}),k=!0,(l||c)&&(o=!0)),k&&(m?(a=a.add(m),s=y?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{Ra:a,fa:n,ns:o,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort(((d,p)=>(function(m,w){const y=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jt()}};return y(m)-y(w)})(d.type,p.type)||this.Aa(d.doc,p.doc))),this.pa(n),i=i!=null&&i;const o=r&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new z1(this.query,e.Ra,s,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Jk,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=$r(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new KN(n))})),this.da.forEach((n=>{e.has(n)||r.push(new GN(n))})),r}ba(e){this.Ta=e.Ts,this.da=$r();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return z1.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class WU{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class GU{constructor(e){this.key=e,this.va=!1}}class KU{constructor(e,r,n,i,s,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new ld((o=>VT(o)),Tg),this.Ma=new Map,this.xa=new Set,this.Oa=new xi(Gt.comparator),this.Na=new Map,this.La=new f6,this.Ba={},this.ka=new Map,this.qa=zf.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function XU(t,e,r=!0){const n=h5(t);let i;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await YN(n,e,r,!0),i}async function YU(t,e){const r=h5(t);await YN(r,e,!0,!1)}async function YN(t,e,r,n){const i=await B1(t.localStore,po(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await T6(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&r&&f5(t.remoteStore,i),o}async function T6(t,e,r,n,i){t.Ka=(p,g,m)=>(async function(y,k,T,O){let P=k.view.ma(T);P.ns&&(P=await uv(y.localStore,k.query,!1).then((({documents:L})=>k.view.ma(L,P))));const V=O&&O.targetChanges.get(k.targetId),Y=O&&O.targetMismatches.get(k.targetId)!=null,G=k.view.applyChanges(P,y.isPrimaryClient,V,Y);return B3(y,k.targetId,G.wa),G.snapshot})(t,p,g,m);const s=await uv(t.localStore,e,!0),a=new XN(e,s.Ts),o=a.ma(s.documents),l=Pg.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),c=a.applyChanges(o,t.isPrimaryClient,l);B3(t,r,c.wa);const d=new WU(e,r,a);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function QU(t,e,r){const n=qt(t),i=n.Fa.get(e),s=n.Ma.get(i.targetId);if(s.length>1)return n.Ma.set(i.targetId,s.filter((a=>!Tg(a,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await V1(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),r&&U1(n.remoteStore,i.targetId),$1(n,i.targetId)})).catch(R0)):($1(n,i.targetId),await V1(n.localStore,i.targetId,!0))}async function JU(t,e){const r=qt(t),n=r.Fa.get(e),i=r.Ma.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),U1(r.remoteStore,n.targetId))}async function ZU(t,e,r){const n=P6(t);try{const i=await(function(a,o){const l=qt(a),c=Di.now(),d=o.reduce(((m,w)=>m.add(w.key)),$r());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let w=Ho(),y=$r();return l.cs.getEntries(m,d).next((k=>{w=k,w.forEach(((T,O)=>{O.isValidDocument()||(y=y.add(T))}))})).next((()=>l.localDocuments.getOverlayedDocuments(m,w))).next((k=>{p=k;const T=[];for(const O of o){const P=SV(O,p.get(O.key).overlayedDocument);P!=null&&T.push(new cd(O.key,P,AT(P.value.mapValue),ji.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,T,o)})).next((k=>{g=k;const T=k.applyToLocalDocumentSet(p,y);return l.documentOverlayCache.saveOverlays(m,k.batchId,T)}))})).then((()=>({batchId:g.batchId,changes:HT(p)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new xi(Or)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c})(n,i.batchId,r),await ud(n,i.changes),await sp(n.remoteStore)}catch(i){const s=op(i,"Failed to persist write");r.reject(s)}}async function QN(t,e){const r=qt(t);try{const n=await xU(r.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=r.Na.get(s);a&&(fr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?fr(a.va):i.removedDocuments.size>0&&(fr(a.va),a.va=!1))})),await ud(r,n,e)}catch(n){await R0(n)}}function r7(t,e,r){const n=qt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach(((s,a)=>{const o=a.view.Z_(e);o.snapshot&&i.push(o.snapshot)})),(function(a,o){const l=qt(a);l.onlineState=o;let c=!1;l.queries.forEach(((d,p)=>{for(const g of p.j_)g.Z_(o)&&(c=!0)})),c&&S6(l)})(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function ez(t,e,r){const n=qt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Na.get(e),s=i&&i.key;if(s){let a=new xi(Gt.comparator);a=a.insert(s,bi.newNoDocument(s,vr.min()));const o=$r().add(s),l=new Ig(vr.min(),new Map,new xi(Or),a,o);await QN(n,l),n.Oa=n.Oa.remove(s),n.Na.delete(e),I6(n)}else await V1(n.localStore,e,!1).then((()=>$1(n,e,r))).catch(R0)}async function tz(t,e){const r=qt(t),n=e.batch.batchId;try{const i=await gU(r.localStore,e);A6(r,n,null),N6(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await ud(r,i)}catch(i){await R0(i)}}async function rz(t,e,r){const n=qt(t);try{const i=await(function(a,o){const l=qt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let d;return l.mutationQueue.lookupMutationBatch(c,o).next((p=>(fr(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(c,p)))).next((()=>l.mutationQueue.performConsistencyCheck(c))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,o))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d))).next((()=>l.localDocuments.getDocuments(c,d)))}))})(n.localStore,e);A6(n,e,r),N6(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await ud(n,i)}catch(i){await R0(i)}}async function nz(t,e){const r=qt(t);j0(r.remoteStore)||Nt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await(function(a){const o=qt(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(l=>o.mutationQueue.getHighestUnacknowledgedBatchId(l)))})(r.localStore);if(n===-1)return void e.resolve();const i=r.ka.get(n)||[];i.push(e),r.ka.set(n,i)}catch(n){const i=op(n,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function N6(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function A6(t,e,r){const n=qt(t);let i=n.Ba[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(r?s.reject(r):s.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function $1(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||JN(t,n)}))}function JN(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(U1(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),I6(t))}function B3(t,e,r){for(const n of r)n instanceof GN?(t.La.addReference(n.key,e),iz(t,n)):n instanceof KN?(Nt("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||JN(t,n.key)):Jt()}function iz(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Nt("SyncEngine","New document in limbo: "+r),t.xa.add(n),I6(t))}function I6(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Gt(pn.fromString(e)),n=t.qa.next();t.Na.set(n,new GU(r)),t.Oa=t.Oa.insert(r,n),f5(t.remoteStore,new Uu(po(tp(r.path)),n,"TargetPurposeLimboResolution",zo.oe))}}async function ud(t,e,r){const n=qt(t),i=[],s=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach(((o,l)=>{a.push(n.Ka(l,e,r).then((c=>{var d;if((c||r)&&n.isPrimaryClient){const p=c?!c.fromCache:(d=r?.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){i.push(c);const p=g6.Wi(l.targetId,c);s.push(p)}})))})),await Promise.all(a),n.Ca.d_(i),await(async function(l,c){const d=qt(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>Je.forEach(c,(g=>Je.forEach(g.$i,(m=>d.persistence.referenceDelegate.addReference(p,g.targetId,m))).next((()=>Je.forEach(g.Ui,(m=>d.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))))))}catch(p){if(!F0(p))throw p;Nt("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const m=d.os.get(g),w=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(g,y)}}})(n.localStore,s))}async function sz(t,e){const r=qt(t);if(!r.currentUser.isEqual(e)){Nt("SyncEngine","User change. New user:",e.toKey());const n=await RN(r.localStore,e);r.currentUser=e,(function(s,a){s.ka.forEach((o=>{o.forEach((l=>{l.reject(new Ct(ut.CANCELLED,a))}))})),s.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await ud(r,n.hs)}}function az(t,e){const r=qt(t),n=r.Na.get(e);if(n&&n.va)return $r().add(n.key);{let i=$r();const s=r.Ma.get(e);if(!s)return i;for(const a of s){const o=r.Fa.get(a);i=i.unionWith(o.view.Va)}return i}}async function oz(t,e){const r=qt(t),n=await uv(r.localStore,e.query,!0),i=e.view.ba(n);return r.isPrimaryClient&&B3(r,e.targetId,i.wa),i}async function lz(t,e){const r=qt(t);return DN(r.localStore,e).then((n=>ud(r,n)))}async function cz(t,e,r,n){const i=qt(t),s=await(function(o,l){const c=qt(o),d=qt(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",(p=>d.Mn(p,l).next((g=>g?c.localDocuments.getDocuments(p,g):Je.resolve(null)))))})(i.localStore,e);s!==null?(r==="pending"?await sp(i.remoteStore):r==="acknowledged"||r==="rejected"?(A6(i,e,n||null),N6(i,e),(function(o,l){qt(qt(o).mutationQueue).On(l)})(i.localStore,e)):Jt(),await ud(i,s)):Nt("SyncEngine","Cannot apply mutation batch with id: "+e)}async function uz(t,e){const r=qt(t);if(h5(r),P6(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),i=await n7(r,n.toArray());r.Qa=!0,await O3(r.remoteStore,!0);for(const s of i)f5(r.remoteStore,s)}else if(e===!1&&r.Qa!==!1){const n=[];let i=Promise.resolve();r.Ma.forEach(((s,a)=>{r.sharedClientState.isLocalQueryTarget(a)?n.push(a):i=i.then((()=>($1(r,a),V1(r.localStore,a,!0)))),U1(r.remoteStore,a)})),await i,await n7(r,n),(function(a){const o=qt(a);o.Na.forEach(((l,c)=>{U1(o.remoteStore,c)})),o.La.pr(),o.Na=new Map,o.Oa=new xi(Gt.comparator)})(r),r.Qa=!1,await O3(r.remoteStore,!1)}}async function n7(t,e,r){const n=qt(t),i=[],s=[];for(const a of e){let o;const l=n.Ma.get(a);if(l&&l.length!==0){o=await B1(n.localStore,po(l[0]));for(const c of l){const d=n.Fa.get(c),p=await oz(n,d);p.snapshot&&s.push(p.snapshot)}}else{const c=await jN(n.localStore,a);o=await B1(n.localStore,c),await T6(n,ZN(c),a,!1,o.resumeToken)}i.push(o)}return n.Ca.d_(s),i}function ZN(t){return OT(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function dz(t){return(function(r){return qt(qt(r).persistence).Qi()})(qt(t).localStore)}async function fz(t,e,r,n){const i=qt(t);if(i.Qa)return void Nt("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(r){case"current":case"not-current":{const a=await DN(i.localStore,UT(s[0])),o=Ig.createSynthesizedRemoteEventForCurrentChange(e,r==="current",Ki.EMPTY_BYTE_STRING);await ud(i,a,o);break}case"rejected":await V1(i.localStore,e,!0),$1(i,e,n);break;default:Jt()}}async function hz(t,e,r){const n=h5(t);if(n.Qa){for(const i of e){if(n.Ma.has(i)&&n.sharedClientState.isActiveQueryTarget(i)){Nt("SyncEngine","Adding an already active target "+i);continue}const s=await jN(n.localStore,i),a=await B1(n.localStore,s);await T6(n,ZN(s),a.targetId,!1,a.resumeToken),f5(n.remoteStore,a)}for(const i of r)n.Ma.has(i)&&await V1(n.localStore,i,!1).then((()=>{U1(n.remoteStore,i),$1(n,i)})).catch(R0)}}function h5(t){const e=qt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=QN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=az.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ez.bind(null,e),e.Ca.d_=zU.bind(null,e.eventManager),e.Ca.$a=$U.bind(null,e.eventManager),e}function P6(t){const e=qt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rz.bind(null,e),e}function pz(t,e,r){const n=qt(t);(async function(s,a,o){try{const l=await a.getMetadata();if(await(function(m,w){const y=qt(m),k=Ss(w.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",(T=>y.Gr.getBundleMetadata(T,w.id))).then((T=>!!T&&T.createTime.compareTo(k)>=0))})(s.localStore,l))return await a.close(),o._completeWith((function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}})(l)),Promise.resolve(new Set);o._updateProgress(WN(l));const c=new qU(l,s.localStore,a.serializer);let d=await a.Ua();for(;d;){const g=await c.la(d);g&&o._updateProgress(g),d=await a.Ua()}const p=await c.complete();return await ud(s,p.Ia,void 0),await(function(m,w){const y=qt(m);return y.persistence.runTransaction("Save bundle","readwrite",(k=>y.Gr.saveBundleMetadata(k,w)))})(s.localStore,l),o._completeWith(p.progress),Promise.resolve(p.Pa)}catch(l){return xl("SyncEngine",`Loading bundle failed with ${l}`),o._failWith(l),Promise.resolve(new Set)}})(n,e,r).then((i=>{n.sharedClientState.notifyBundleLoaded(i)}))}class b0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rg(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return PN(this.persistence,new IN,e.initialUser,this.serializer)}Ga(e){return new h6(d5.Zr,this.serializer)}Wa(e){return new MN}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}b0.provider={build:()=>new b0};class mz extends b0{constructor(e){super(),this.cacheSizeBytes=e}ja(e,r){fr(this.persistence.referenceDelegate instanceof cv);const n=this.persistence.referenceDelegate.garbageCollector;return new SN(n,e.asyncQueue,r)}Ga(e){const r=this.cacheSizeBytes!==void 0?ao.withCacheSize(this.cacheSizeBytes):ao.DEFAULT;return new h6((n=>cv.Zr(n,r)),this.serializer)}}class R6 extends b0{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await P6(this.Ja.syncEngine),await sp(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return PN(this.persistence,new IN,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new SN(n,e.asyncQueue,r)}Ha(e,r){const n=new DB(r,this.persistence);return new jB(e.asyncQueue,n)}Ga(e){const r=m6(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ao.withCacheSize(this.cacheSizeBytes):ao.DEFAULT;return new p6(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,BN(),Lx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new MN}}class eA extends R6{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof Jy&&(this.sharedClientState.syncEngine={no:cz.bind(null,r),ro:fz.bind(null,r),io:hz.bind(null,r),Qi:dz.bind(null,r),eo:lz.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await uz(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=BN();if(!Jy.D(r))throw new Ct(ut.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=m6(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jy(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class _0{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>r7(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=sz.bind(null,this.syncEngine),await O3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UU})()}createDatastore(e){const r=Rg(e.databaseInfo.databaseId),n=(function(s){return new EU(s)})(e.databaseInfo);return(function(s,a,o,l){return new TU(s,a,o,l)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,i,s,a,o){return new AU(n,i,s,a,o)})(this.localStore,this.datastore,e.asyncQueue,(r=>r7(this.syncEngine,r,0)),(function(){return Yk.D()?new Yk:new bU})())}createSyncEngine(e,r){return(function(i,s,a,o,l,c,d){const p=new KU(i,s,a,o,l,c);return d&&(p.Qa=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(i){const s=qt(i);Nt("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ip(s),s.k_.shutdown(),s.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}_0.provider={build:()=>new _0};function i7(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ks("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new xa,this.buffer=new Uint8Array,this.eu=(function(){return new TextDecoder("utf-8")})(),this.tu().then((n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n?.aa)}`))}),(n=>this.metadata.reject(n)))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const r=this.eu.decode(e),n=Number(r);isNaN(n)&&this.ru(`length string (${r}) is not valid number`);const i=await this.iu(n);return new HU(JSON.parse(i),e.length+n)}su(){return this.buffer.findIndex((e=>e===123))}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const r=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ct(ut.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(i,s){const a=qt(i),o={documents:s.map((p=>Jm(a.serializer,p)))},l=await a.Lo("BatchGetDocuments",a.serializer.databaseId,pn.emptyPath(),o,s.length),c=new Map;l.forEach((p=>{const g=LV(a.serializer,p);c.set(g.key.toString(),g)}));const d=[];return s.forEach((p=>{const g=c.get(p.toString());fr(!!g),d.push(g)})),d})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new np(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const i=Gt.fromPath(n);this.mutations.push(new n6(i,this.precondition(i)))})),await(async function(n,i){const s=qt(n),a={writes:i.map((o=>Zm(s.serializer,o)))};await s.Mo("Commit",s.serializer.databaseId,pn.emptyPath(),a)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Jt();r=vr.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new Ct(ut.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(vr.min())?ji.exists(!1):ji.updateTime(r):ji.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(vr.min()))throw new Ct(ut.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ji.updateTime(r)}return ji.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(e,r,n,i,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=i,this.deferred=s,this._u=n.maxAttempts,this.t_=new v6(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new xz(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((i=>{this.lu(i)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!Sg(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!tN(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(e,r,n,i,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=ha.UNAUTHENTICATED,this.clientId=Xw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async a=>{Nt("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(n,(a=>(Nt("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=op(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function e4(t,e){t.asyncQueue.verifyOperationInProgress(),Nt("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async i=>{n.isEqual(i)||(await RN(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function s7(t,e){t.asyncQueue.verifyOperationInProgress();const r=await F6(t);Nt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>Qk(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,i)=>Qk(e.remoteStore,i))),t._onlineComponents=e}async function F6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Nt("FirestoreClient","Using user provided OfflineComponentProvider");try{await e4(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ut.FAILED_PRECONDITION||i.code===ut.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(r))throw r;xl("Error using user provided cache. Falling back to memory cache: "+r),await e4(t,new b0)}}else Nt("FirestoreClient","Using default OfflineComponentProvider"),await e4(t,new b0);return t._offlineComponents}async function m5(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Nt("FirestoreClient","Using user provided OnlineComponentProvider"),await s7(t,t._uninitializedComponentsProvider._online)):(Nt("FirestoreClient","Using default OnlineComponentProvider"),await s7(t,new _0))),t._onlineComponents}function tA(t){return F6(t).then((e=>e.persistence))}function lp(t){return F6(t).then((e=>e.localStore))}function rA(t){return m5(t).then((e=>e.remoteStore))}function L6(t){return m5(t).then((e=>e.syncEngine))}function nA(t){return m5(t).then((e=>e.datastore))}async function H1(t){const e=await m5(t),r=e.eventManager;return r.onListen=XU.bind(null,e.syncEngine),r.onUnlisten=QU.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=YU.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=JU.bind(null,e.syncEngine),r}function wz(t){return t.asyncQueue.enqueue((async()=>{const e=await tA(t),r=await rA(t);return e.setNetworkEnabled(!0),(function(i){const s=qt(i);return s.L_.delete(0),Fg(s)})(r)}))}function bz(t){return t.asyncQueue.enqueue((async()=>{const e=await tA(t),r=await rA(t);return e.setNetworkEnabled(!1),(async function(i){const s=qt(i);s.L_.add(0),await ip(s),s.q_.set("Offline")})(r)}))}function _z(t,e){const r=new xa;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,s,a){try{const o=await(function(c,d){const p=qt(c);return p.persistence.runTransaction("read document","readonly",(g=>p.localDocuments.getDocument(g,d)))})(i,s);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new Ct(ut.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const l=op(o,`Failed to get document '${s} from cache`);a.reject(l)}})(await lp(t),e,r))),r.promise}function iA(t,e,r={}){const n=new xa;return t.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,l,c){const d=new p5({next:g=>{d.Za(),a.enqueueAndForget((()=>E6(s,p)));const m=g.docs.has(o);!m&&g.fromCache?c.reject(new Ct(ut.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&l&&l.source==="server"?c.reject(new Ct(ut.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new C6(tp(o.path),d,{includeMetadataChanges:!0,_a:!0});return k6(s,p)})(await H1(t),t.asyncQueue,e,r,n))),n.promise}function kz(t,e){const r=new xa;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,s,a){try{const o=await uv(i,s,!0),l=new XN(s,o.Ts),c=l.ma(o.documents),d=l.applyChanges(c,!1);a.resolve(d.snapshot)}catch(o){const l=op(o,`Failed to execute query '${s} against cache`);a.reject(l)}})(await lp(t),e,r))),r.promise}function sA(t,e,r={}){const n=new xa;return t.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,l,c){const d=new p5({next:g=>{d.Za(),a.enqueueAndForget((()=>E6(s,p))),g.fromCache&&l.source==="server"?c.reject(new Ct(ut.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new C6(o,d,{includeMetadataChanges:!0,_a:!0});return k6(s,p)})(await H1(t),t.asyncQueue,e,r,n))),n.promise}function Ez(t,e,r){const n=new xa;return t.asyncQueue.enqueueAndForget((async()=>{try{const i=await nA(t);n.resolve((async function(a,o,l){var c;const d=qt(a),{request:p,ut:g,parent:m}=hN(d.serializer,MT(o),l);d.connection.Fo||delete p.parent;const w=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,m,p,1)).filter((k=>!!k.result));fr(w.length===1);const y=(c=w[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(y).reduce(((k,T)=>(k[g[T]]=y[T],k)),{})})(i,e,r))}catch(i){n.reject(i)}})),n.promise}function Sz(t,e){const r=new p5(e);return t.asyncQueue.enqueueAndForget((async()=>(function(i,s){qt(i).Y_.add(s),s.next()})(await H1(t),r))),()=>{r.Za(),t.asyncQueue.enqueueAndForget((async()=>(function(i,s){qt(i).Y_.delete(s)})(await H1(t),r)))}}function Cz(t,e,r,n){const i=(function(a,o){let l;return l=typeof a=="string"?nN().encode(a):a,(function(d,p){return new gz(d,p)})((function(d,p){if(d instanceof Uint8Array)return i7(d,p);if(d instanceof ArrayBuffer)return i7(new Uint8Array(d),p);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(l),o)})(r,Rg(e));t.asyncQueue.enqueueAndForget((async()=>{pz(await L6(t),i,n)}))}function Tz(t,e){return t.asyncQueue.enqueue((async()=>(function(n,i){const s=qt(n);return s.persistence.runTransaction("Get named query","readonly",(a=>s.Gr.getNamedQuery(a,i)))})(await lp(t),e)))}function Nz(t,e){return t.asyncQueue.enqueue((async()=>(async function(n,i){const s=qt(n),a=s.indexManager,o=[];return s.persistence.runTransaction("Configure indexes","readwrite",(l=>a.getFieldIndexes(l).next((c=>(function(p,g,m,w,y){p=[...p],g=[...g],p.sort(m),g.sort(m);const k=p.length,T=g.length;let O=0,P=0;for(;O<T&&P<k;){const V=m(p[P],g[O]);V<0?y(p[P++]):V>0?w(g[O++]):(O++,P++)}for(;O<T;)w(g[O++]);for(;P<k;)y(p[P++])})(c,i,PB,(d=>{o.push(a.addFieldIndex(l,d))}),(d=>{o.push(a.deleteFieldIndex(l,d))})))).next((()=>Je.waitFor(o)))))})(await lp(t),e)))}function Az(t,e){return t.asyncQueue.enqueue((async()=>(function(n,i){qt(n).ss.zi=i})(await lp(t),e)))}function Iz(t){return t.asyncQueue.enqueue((async()=>(function(r){const n=qt(r),i=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",(s=>i.deleteAllFieldIndexes(s)))})(await lp(t))))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(t,e,r){if(!r)throw new Ct(ut.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oA(t,e,r,n){if(e===!0&&n===!0)throw new Ct(ut.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function o7(t){if(!Gt.isDocumentKey(t))throw new Ct(ut.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function l7(t){if(Gt.isDocumentKey(t))throw new Ct(ut.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function g5(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Jt()}function on(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ct(ut.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=g5(t);throw new Ct(ut.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function lA(t,e){if(e<=0)throw new Ct(ut.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ct(ut.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ct(ut.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aA((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ct(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ct(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ct(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lg{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c7({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ct(ut.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ct(ut.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c7(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new dT;switch(n.type){case"firstParty":return new CB(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ct(ut.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=a7.get(r);n&&(Nt("ComponentProvider","Removing Datastore"),a7.delete(r),n.terminate())})(this),Promise.resolve()}}function cA(t,e,r,n={}){var i;const s=(t=on(t,Lg))._getSettings(),a=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&xl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=ha.MOCK_USER;else{o=YC(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new Ct(ut.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ha(c)}t._authCredentials=new kB(new uT(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new va(this.firestore,e,this._query)}}class ss{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ss(this.firestore,e,this._key)}}class bc extends va{constructor(e,r,n){super(e,r,tp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ss(this.firestore,null,new Gt(e))}withConverter(e){return new bc(this.firestore,e,this._path)}}function dr(t,e,...r){if(t=un(t),j6("collection","path",e),t instanceof Lg){const n=pn.fromString(e,...r);return l7(n),new bc(t,null,n)}{if(!(t instanceof ss||t instanceof bc))throw new Ct(ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(pn.fromString(e,...r));return l7(n),new bc(t.firestore,null,n)}}function Pz(t,e){if(t=on(t,Lg),j6("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ct(ut.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new va(t,null,(function(n){return new od(pn.emptyPath(),n)})(e))}function or(t,e,...r){if(t=un(t),arguments.length===1&&(e=Xw.newId()),j6("doc","path",e),t instanceof Lg){const n=pn.fromString(e,...r);return o7(n),new ss(t,null,new Gt(n))}{if(!(t instanceof ss||t instanceof bc))throw new Ct(ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(pn.fromString(e,...r));return o7(n),new ss(t.firestore,t instanceof bc?t.converter:null,new Gt(n))}}function Rz(t,e){return t=un(t),e=un(e),(t instanceof ss||t instanceof bc)&&(e instanceof ss||e instanceof bc)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function D6(t,e){return t=un(t),e=un(e),t instanceof va&&e instanceof va&&t.firestore===e.firestore&&Tg(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new v6(this,"async_queue_retry"),this.Vu=()=>{const n=Lx();n&&Nt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Lx();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Lx();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new xa;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!F0(e))throw e;Nt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const i=(function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o})(n);throw ks("INTERNAL UNHANDLED ERROR: ",i),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const i=_6.createAndSchedule(this,e,r,n,(s=>this.yu(s)));return this.Tu.push(i),i}fu(){this.Eu&&Jt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function V3(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1})(t,["next","error","complete"])}class uA{constructor(){this._progressObserver={},this._taskCompletionResolver=new xa,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fz=-1;class si extends Lg{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new u7,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new u7(e),this._firestoreClient=void 0,await e}}}function Lz(t,e,r){r||(r="(default)");const n=ah(t,"firestore");if(n.isInitialized(r)){const i=n.getImmediate({identifier:r}),s=n.getOptions(r);if(h0(s,e))return i;throw new Ct(ut.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ct(ut.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ct(ut.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function dA(t,e){const r=typeof t=="object"?t:t5(),n=typeof t=="string"?t:e||"(default)",i=ah(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=qw("firestore");s&&cA(i,...s)}return i}function Oi(t){if(t._terminated)throw new Ct(ut.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||fA(t),t._firestoreClient}function fA(t){var e,r,n;const i=t._freezeSettings(),s=(function(o,l,c,d){return new iV(o,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,aA(d.experimentalLongPollingOptions),d.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new yz(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(t._componentsProvider))}function jz(t,e){xl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return hA(t,_0.provider,{build:n=>new R6(n,r.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function Dz(t){xl("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();hA(t,_0.provider,{build:r=>new eA(r,e.cacheSizeBytes)})}function hA(t,e,r){if((t=on(t,si))._firestoreClient||t._terminated)throw new Ct(ut.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Ct(ut.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},fA(t)}function Oz(t){if(t._initialized&&!t._terminated)throw new Ct(ut.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new xa;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(n){if(!au.D())return Promise.resolve();const i=n+"main";await au.delete(i)})(m6(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}})),e.promise}function Mz(t){return(function(r){const n=new xa;return r.asyncQueue.enqueueAndForget((async()=>nz(await L6(r),n))),n.promise})(Oi(t=on(t,si)))}function Bz(t){return wz(Oi(t=on(t,si)))}function Vz(t){return bz(Oi(t=on(t,si)))}function Uz(t){return cB(t.app,"firestore",t._databaseId.database),t._delete()}function zz(t,e){const r=Oi(t=on(t,si)),n=new uA;return Cz(r,t._databaseId,e,n),n}function $z(t,e){return Tz(Oi(t=on(t,si)),e).then((r=>r?new va(t,null,r.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class pA{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this._byteString=e}static fromBase64String(e){try{return new k0(Ki.fromBase64String(e))}catch(r){throw new Ct(ut.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new k0(Ki.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ct(ut.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _i(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Hz(){return new D0("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ct(ut.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ct(ut.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Or(this._lat,e._lat)||Or(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz=/^__.*__$/;class Wz{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new cd(e,this.data,this.fieldMask,r,this.fieldTransforms):new rp(e,this.data,r,this.fieldTransforms)}}class mA{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new cd(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function gA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jt()}}class v5{constructor(e,r,n,i,s,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new v5(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return pv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(gA(this.Cu)&&qz.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Gz{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Rg(e)}Qu(e,r,n,i=!1){return new v5({Cu:e,methodName:r,qu:n,path:_i.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lh(t){const e=t._freezeSettings(),r=Rg(t._databaseId);return new Gz(t._databaseId,!!e.ignoreUndefinedProperties,r)}function y5(t,e,r,n,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,r,i);$6("Data must be an object, but it was:",a,n);const o=yA(n,a);let l,c;if(s.merge)l=new $o(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const g=eg(e,p,r);if(!a.contains(g))throw new Ct(ut.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);bA(d,g)||d.push(g)}l=new $o(d),c=a.fieldTransforms.filter((p=>l.covers(p.field)))}else l=null,c=a.fieldTransforms;return new Wz(new La(o),l,c)}class Dg extends O0{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dg}}function xA(t,e,r){return new v5({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class O6 extends O0{_toFieldTransform(e){return new Ag(e.path,new D1)}isEqual(e){return e instanceof O6}}class M6 extends O0{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=xA(this,e,!0),n=this.Ku.map((s=>ch(s,r))),i=new Mf(n);return new Ag(e.path,i)}isEqual(e){return e instanceof M6&&h0(this.Ku,e.Ku)}}class B6 extends O0{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=xA(this,e,!0),n=this.Ku.map((s=>ch(s,r))),i=new Bf(n);return new Ag(e.path,i)}isEqual(e){return e instanceof B6&&h0(this.Ku,e.Ku)}}class V6 extends O0{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new O1(e.serializer,GT(e.serializer,this.$u));return new Ag(e.path,r)}isEqual(e){return e instanceof V6&&this.$u===e.$u}}function U6(t,e,r,n){const i=t.Qu(1,e,r);$6("Data must be an object, but it was:",i,n);const s=[],a=La.empty();L0(n,((l,c)=>{const d=w5(e,l,r);c=un(c);const p=i.Nu(d);if(c instanceof Dg)s.push(d);else{const g=ch(c,p);g!=null&&(s.push(d),a.set(d,g))}}));const o=new $o(s);return new mA(a,o,i.fieldTransforms)}function z6(t,e,r,n,i,s){const a=t.Qu(1,e,r),o=[eg(e,n,r)],l=[i];if(s.length%2!=0)throw new Ct(ut.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)o.push(eg(e,s[g])),l.push(s[g+1]);const c=[],d=La.empty();for(let g=o.length-1;g>=0;--g)if(!bA(c,o[g])){const m=o[g];let w=l[g];w=un(w);const y=a.Nu(m);if(w instanceof Dg)c.push(m);else{const k=ch(w,y);k!=null&&(c.push(m),d.set(m,k))}}const p=new $o(c);return new mA(d,p,a.fieldTransforms)}function vA(t,e,r,n=!1){return ch(r,t.Qu(n?4:3,e))}function ch(t,e){if(wA(t=un(t)))return $6("Unsupported field value:",e,t),yA(t,e);if(t instanceof O0)return(function(n,i){if(!gA(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,i){const s=[];let a=0;for(const o of n){let l=ch(o,i.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}})(t,e)}return(function(n,i){if((n=un(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return GT(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Di.fromDate(n);return{timestampValue:M1(i.serializer,s)}}if(n instanceof Di){const s=new Di(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:M1(i.serializer,s)}}if(n instanceof x5)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof k0)return{bytesValue:aN(i.serializer,n._byteString)};if(n instanceof ss){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:l6(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof jg)return(function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map((l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return r6(o.serializer,l)}))}}}}}})(n,i);throw i.Bu(`Unsupported field value: ${g5(n)}`)})(t,e)}function yA(t,e){const r={};return ST(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):L0(t,((n,i)=>{const s=ch(i,e.Mu(n));s!=null&&(r[n]=s)})),{mapValue:{fields:r}}}function wA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Di||t instanceof x5||t instanceof k0||t instanceof ss||t instanceof O0||t instanceof jg)}function $6(t,e,r){if(!wA(r)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(r)){const n=g5(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function eg(t,e,r){if((e=un(e))instanceof D0)return e._internalPath;if(typeof e=="string")return w5(t,e);throw pv("Field path arguments must be of type string or ",t,!1,void 0,r)}const Kz=new RegExp("[~\\*/\\[\\]]");function w5(t,e,r){if(e.search(Kz)>=0)throw pv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new D0(...e.split("."))._internalPath}catch{throw pv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function pv(t,e,r,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${n}`),a&&(l+=` in document ${i}`),l+=")"),new Ct(ut.INVALID_ARGUMENT,o+t+l)}function bA(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,r,n,i,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ss(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Xz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(b5("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Xz extends tg{data(){return super.data()}}function b5(t,e){return typeof e=="string"?w5(t,e):e instanceof D0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ct(ut.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class H6{}class cp extends H6{}function Tr(t,e,...r){let n=[];e instanceof H6&&n.push(e),n=n.concat(r),(function(s){const a=s.filter((l=>l instanceof uh)).length,o=s.filter((l=>l instanceof up)).length;if(a>1||a>0&&o>0)throw new Ct(ut.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)t=i._apply(t);return t}class up extends cp{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new up(e,r,n)}_apply(e){const r=this._parse(e);return EA(e._query,r),new va(e.firestore,e.converter,N3(e._query,r))}_parse(e){const r=lh(e.firestore);return(function(s,a,o,l,c,d,p){let g;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Ct(ut.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){f7(p,d);const m=[];for(const w of p)m.push(d7(l,s,w));g={arrayValue:{values:m}}}else g=d7(l,s,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||f7(p,d),g=vA(o,a,p,d==="in"||d==="not-in");return mn.create(c,d,g)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function zr(t,e,r){const n=e,i=b5("where",t);return up._create(i,n,r)}class uh extends H6{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new uh(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:Yn.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)EA(a,l),a=N3(a,l)})(e._query,r),new va(e.firestore,e.converter,N3(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Yz(...t){return t.forEach((e=>SA("or",e))),uh._create("or",t)}function Qz(...t){return t.forEach((e=>SA("and",e))),uh._create("and",t)}class _5 extends cp{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new _5(e,r)}_apply(e){const r=(function(i,s,a){if(i.startAt!==null)throw new Ct(ut.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ct(ut.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qm(s,a)})(e._query,this._field,this._direction);return new va(e.firestore,e.converter,(function(i,s){const a=i.explicitOrderBy.concat([s]);return new od(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,r))}}function Zs(t,e="asc"){const r=e,n=b5("orderBy",t);return _5._create(n,r)}class Og extends cp{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Og(e,r,n)}_apply(e){return new va(e.firestore,e.converter,iv(e._query,this._limit,this._limitType))}}function dh(t){return lA("limit",t),Og._create("limit",t,"F")}function Jz(t){return lA("limitToLast",t),Og._create("limitToLast",t,"L")}class Mg extends cp{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Mg(e,r,n)}_apply(e){const r=kA(e,this.type,this._docOrFields,this._inclusive);return new va(e.firestore,e.converter,(function(i,s){return new od(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)})(e._query,r))}}function Zz(...t){return Mg._create("startAt",t,!0)}function e$(...t){return Mg._create("startAfter",t,!1)}class Bg extends cp{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Bg(e,r,n)}_apply(e){const r=kA(e,this.type,this._docOrFields,this._inclusive);return new va(e.firestore,e.converter,(function(i,s){return new od(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)})(e._query,r))}}function t$(...t){return Bg._create("endBefore",t,!1)}function r$(...t){return Bg._create("endAt",t,!0)}function kA(t,e,r,n){if(r[0]=un(r[0]),r[0]instanceof tg)return(function(s,a,o,l,c){if(!l)throw new Ct(ut.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const p of h1(s))if(p.field.isKeyField())d.push(Df(a,l.key));else{const g=l.data.field(p.field);if(n5(g))throw new Ct(ut.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const m=p.field.canonicalString();throw new Ct(ut.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(g)}return new y0(d,c)})(t._query,t.firestore._databaseId,e,r[0]._document,n);{const i=lh(t.firestore);return(function(a,o,l,c,d,p){const g=a.explicitOrderBy;if(d.length>g.length)throw new Ct(ut.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let w=0;w<d.length;w++){const y=d[w];if(g[w].field.isKeyField()){if(typeof y!="string")throw new Ct(ut.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof y}`);if(!e6(a)&&y.indexOf("/")!==-1)throw new Ct(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${y}' contains a slash.`);const k=a.path.child(pn.fromString(y));if(!Gt.isDocumentKey(k))throw new Ct(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);const T=new Gt(k);m.push(Df(o,T))}else{const k=vA(l,c,y);m.push(k)}}return new y0(m,p)})(t._query,t.firestore._databaseId,i,e,r,n)}}function d7(t,e,r){if(typeof(r=un(r))=="string"){if(r==="")throw new Ct(ut.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!e6(e)&&r.indexOf("/")!==-1)throw new Ct(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(pn.fromString(r));if(!Gt.isDocumentKey(n))throw new Ct(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Df(t,new Gt(n))}if(r instanceof ss)return Df(t,r._key);throw new Ct(ut.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${g5(r)}.`)}function f7(t,e){if(!Array.isArray(t)||t.length===0)throw new Ct(ut.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EA(t,e){const r=(function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new Ct(ut.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ct(ut.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function SA(t,e){if(!(e instanceof up||e instanceof uh))throw new Ct(ut.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class q6{convertValue(e,r="none"){switch(x0(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Li(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(rd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Jt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return L0(e,((i,s)=>{n[i]=this.convertValue(s,r)})),n}convertVectorValue(e){var r,n,i;const s=(i=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map((a=>Li(a.doubleValue)));return new jg(s)}convertGeoPoint(e){return new x5(Li(e.latitude),Li(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=i5(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Km(e));default:return null}}convertTimestamp(e){const r=td(e);return new Di(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=pn.fromString(e);fr(xN(n));const i=new g0(n.get(1),n.get(3)),s=new Gt(n.popFirst(5));return i.isEqual(r)||ks(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class n$ extends q6{constructor(e){super(),this.firestore=e}convertBytes(e){return new k0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ss(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i$(t){return new q1("sum",eg("sum",t))}function s$(t){return new q1("avg",eg("average",t))}function CA(){return new q1("count")}function a$(t,e){var r,n;return t instanceof q1&&e instanceof q1&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())===((n=e._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())}function o$(t,e){return D6(t.query,e.query)&&h0(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $f extends tg{constructor(e,r,n,i,s,a){super(e,r,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Tm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(b5("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Tm extends $f{data(e={}){return super.data(e)}}class Hf{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new a0(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new Tm(this._firestore,this._userDataWriter,n.key,n,new a0(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ct(ut.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((o=>{const l=new Tm(i._firestore,i._userDataWriter,o.doc.key,o.doc,new a0(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>s||o.type!==3)).map((o=>{const l=new Tm(i._firestore,i._userDataWriter,o.doc.key,o.doc,new a0(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:l$(o.type),doc:l,oldIndex:c,newIndex:d}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function l$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jt()}}function c$(t,e){return t instanceof $f&&e instanceof $f?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Hf&&e instanceof Hf&&t._firestore===e._firestore&&D6(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(t){t=on(t,ss);const e=on(t.firestore,si);return iA(Oi(e),t._key).then((r=>W6(e,t,r)))}class M0 extends q6{constructor(e){super(),this.firestore=e}convertBytes(e){return new k0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ss(this.firestore,null,r)}}function u$(t){t=on(t,ss);const e=on(t.firestore,si),r=Oi(e),n=new M0(e);return _z(r,t._key).then((i=>new $f(e,n,t._key,i,new a0(i!==null&&i.hasLocalMutations,!0),t.converter)))}function d$(t){t=on(t,ss);const e=on(t.firestore,si);return iA(Oi(e),t._key,{source:"server"}).then((r=>W6(e,t,r)))}function Fn(t){t=on(t,va);const e=on(t.firestore,si),r=Oi(e),n=new M0(e);return _A(t._query),sA(r,t._query).then((i=>new Hf(e,n,t,i)))}function f$(t){t=on(t,va);const e=on(t.firestore,si),r=Oi(e),n=new M0(e);return kz(r,t._query).then((i=>new Hf(e,n,t,i)))}function h$(t){t=on(t,va);const e=on(t.firestore,si),r=Oi(e),n=new M0(e);return sA(r,t._query,{source:"server"}).then((i=>new Hf(e,n,t,i)))}function _c(t,e,r){t=on(t,ss);const n=on(t.firestore,si),i=k5(t.converter,e,r);return fp(n,[y5(lh(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,ji.none())])}function ys(t,e,r,...n){t=on(t,ss);const i=on(t.firestore,si),s=lh(i);let a;return a=typeof(e=un(e))=="string"||e instanceof D0?z6(s,"updateDoc",t._key,e,r,n):U6(s,"updateDoc",t._key,e),fp(i,[a.toMutation(t._key,ji.exists(!0))])}function Eo(t){return fp(on(t.firestore,si),[new np(t._key,ji.none())])}function dp(t,e){const r=on(t.firestore,si),n=or(t),i=k5(t.converter,e);return fp(r,[y5(lh(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,ji.exists(!1))]).then((()=>n))}function ri(t,...e){var r,n,i;t=un(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||V3(e[a])||(s=e[a],a++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(V3(e[a])){const p=e[a];e[a]=(r=p.next)===null||r===void 0?void 0:r.bind(p),e[a+1]=(n=p.error)===null||n===void 0?void 0:n.bind(p),e[a+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,c,d;if(t instanceof ss)c=on(t.firestore,si),d=tp(t._key.path),l={next:p=>{e[a]&&e[a](W6(c,t,p))},error:e[a+1],complete:e[a+2]};else{const p=on(t,va);c=on(p.firestore,si),d=p._query;const g=new M0(c);l={next:m=>{e[a]&&e[a](new Hf(c,g,p,m))},error:e[a+1],complete:e[a+2]},_A(t._query)}return(function(g,m,w,y){const k=new p5(y),T=new C6(m,k,w);return g.asyncQueue.enqueueAndForget((async()=>k6(await H1(g),T))),()=>{k.Za(),g.asyncQueue.enqueueAndForget((async()=>E6(await H1(g),T)))}})(Oi(c),d,o,l)}function p$(t,e){return Sz(Oi(t=on(t,si)),V3(e)?e:{next:e})}function fp(t,e){return(function(n,i){const s=new xa;return n.asyncQueue.enqueueAndForget((async()=>ZU(await L6(n),i,s))),s.promise})(Oi(t),e)}function W6(t,e,r){const n=r.docs.get(e._key),i=new M0(t);return new $f(t,i,e._key,n,new a0(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m$(t){return TA(t,{count:CA()})}function TA(t,e){const r=on(t.firestore,si),n=Oi(r),i=ET(e,((s,a)=>new eN(a,s.aggregateType,s._internalFieldPath)));return Ez(n,t._query,i).then((s=>(function(o,l,c){const d=new M0(o);return new pA(l,d,c)})(r,t,s)))}class g${constructor(e){this.kind="memory",this._onlineComponentProvider=_0.provider,e?.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=b0.provider}toJSON(){return{kind:this.kind}}}class x${constructor(e){let r;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=NA(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class v${constructor(){this.kind="memoryEager",this._offlineComponentProvider=b0.provider}toJSON(){return{kind:this.kind}}}class y${constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new mz(e)}}toJSON(){return{kind:this.kind}}}function w$(){return new v$}function b$(t){return new y$(t?.cacheSizeBytes)}function _$(t){return new g$(t)}function k$(t){return new x$(t)}class E${constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=_0.provider,this._offlineComponentProvider={build:r=>new R6(r,e?.cacheSizeBytes,this.forceOwnership)}}}class S${constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=_0.provider,this._offlineComponentProvider={build:r=>new eA(r,e?.cacheSizeBytes)}}}function NA(t){return new E$(t?.forceOwnership)}function C$(){return new S$}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=lh(e)}set(e,r,n){this._verifyNotCommitted();const i=Zd(e,this._firestore),s=k5(i.converter,r,n),a=y5(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,n);return this._mutations.push(a.toMutation(i._key,ji.none())),this}update(e,r,n,...i){this._verifyNotCommitted();const s=Zd(e,this._firestore);let a;return a=typeof(r=un(r))=="string"||r instanceof D0?z6(this._dataReader,"WriteBatch.update",s._key,r,n,i):U6(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(a.toMutation(s._key,ji.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Zd(e,this._firestore);return this._mutations=this._mutations.concat(new np(r._key,ji.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ct(ut.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zd(t,e){if((t=un(t)).firestore!==e)throw new Ct(ut.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=lh(r)}get(r){const n=Zd(r,this._firestore),i=new n$(this._firestore);return this._transaction.lookup([n._key]).then((s=>{if(!s||s.length!==1)return Jt();const a=s[0];if(a.isFoundDocument())return new tg(this._firestore,i,a.key,a,n.converter);if(a.isNoDocument())return new tg(this._firestore,i,n._key,null,n.converter);throw Jt()}))}set(r,n,i){const s=Zd(r,this._firestore),a=k5(s.converter,n,i),o=y5(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,i);return this._transaction.set(s._key,o),this}update(r,n,i,...s){const a=Zd(r,this._firestore);let o;return o=typeof(n=un(n))=="string"||n instanceof D0?z6(this._dataReader,"Transaction.update",a._key,n,i,s):U6(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,o),this}delete(r){const n=Zd(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Zd(e,this._firestore),n=new M0(this._firestore);return super.get(e).then((i=>new $f(this._firestore,n,r._key,i._document,new a0(!1,!1),r.converter)))}}function N$(t,e,r){t=on(t,si);const n=Object.assign(Object.assign({},T$),r);return(function(s){if(s.maxAttempts<1)throw new Ct(ut.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(s,a,o){const l=new xa;return s.asyncQueue.enqueueAndForget((async()=>{const c=await nA(s);new vz(s.asyncQueue,c,o,a,l).au()})),l.promise})(Oi(t),(i=>e(new IA(t,i))),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A$(){return new Dg("deleteField")}function Qs(){return new O6("serverTimestamp")}function I$(...t){return new M6("arrayUnion",t)}function P$(...t){return new B6("arrayRemove",t)}function mv(t){return new V6("increment",t)}function R$(t){return new jg(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(t){return Oi(t=on(t,si)),new AA(t,(e=>fp(t,e)))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F$(t,e){const r=Oi(t=on(t,si));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return xl("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=(function(s){const a=typeof s=="string"?(function(c){try{return JSON.parse(c)}catch(d){throw new Ct(ut.INVALID_ARGUMENT,"Failed to parse JSON: "+d?.message)}})(s):s,o=[];if(Array.isArray(a.indexes))for(const l of a.indexes){const c=h7(l,"collectionGroup"),d=[];if(Array.isArray(l.fields))for(const p of l.fields){const g=w5("setIndexConfiguration",h7(p,"fieldPath"));p.arrayConfig==="CONTAINS"?d.push(new Nf(g,2)):p.order==="ASCENDING"?d.push(new Nf(g,0)):p.order==="DESCENDING"&&d.push(new Nf(g,1))}o.push(new R1(R1.UNKNOWN_ID,c,d,F1.empty()))}return o})(e);return Nz(r,n)}function h7(t,e){if(typeof t[e]!="string")throw new Ct(ut.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function L$(t){var e;t=on(t,si);const r=p7.get(t);if(r)return r;if(((e=Oi(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const n=new PA(t);return p7.set(t,n),n}function j$(t){RA(t,!0)}function D$(t){RA(t,!1)}function O$(t){Iz(Oi(t._firestore)).then((e=>Nt("deleting all persistent cache indexes succeeded"))).catch((e=>xl("deleting all persistent cache indexes failed",e)))}function RA(t,e){Az(Oi(t._firestore),e).then((r=>Nt(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((r=>xl(`setting persistent cache index auto creation isEnabled=${e} failed`,r)))}const p7=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M$(t){var e;const r=(e=Oi(on(t.firestore,si))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return r===void 0?null:l5(r,po(t._query))._t}function B$(t,e){var r;const n=ET(e,((s,a)=>new eN(a,s.aggregateType,s._internalFieldPath))),i=(r=Oi(on(t.firestore,si))._onlineComponents)===null||r===void 0?void 0:r.datastore.serializer;return i===void 0?null:hN(i,MT(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return K6.instance.onExistenceFilterMismatch(e)}}class K6{constructor(){this.Uu=new Map}static get instance(){return X2||(X2=new K6,(function(r){if(sv)throw new Error("a TestingHooksSpi instance is already set");sv=r})(X2)),X2}et(e){this.Uu.forEach((r=>r(e)))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Uu;return n.set(r,e),()=>n.delete(r)}}let X2=null;(function(e,r=!0){(function(i){ep=i})(oh),p0(new Zu("firestore",((n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),o=new si(new EB(n.getProvider("auth-internal")),new TB(n.getProvider("app-check-internal")),(function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ct(ut.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new g0(c.options.projectId,d)})(a,i),a);return s=Object.assign({useFetchStreams:r},s),o._setSettings(s),o}),"PUBLIC").setMultipleInstances(!0)),$l(nk,"4.7.3",e),$l(nk,"4.7.3","esm2017")})();const FA=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:q6,AggregateField:q1,AggregateQuerySnapshot:pA,Bytes:k0,CACHE_SIZE_UNLIMITED:Fz,CollectionReference:bc,DocumentReference:ss,DocumentSnapshot:$f,FieldPath:D0,FieldValue:O0,Firestore:si,FirestoreError:Ct,GeoPoint:x5,LoadBundleTask:uA,PersistentCacheIndexManager:PA,Query:va,QueryCompositeFilterConstraint:uh,QueryConstraint:cp,QueryDocumentSnapshot:Tm,QueryEndAtConstraint:Bg,QueryFieldFilterConstraint:up,QueryLimitConstraint:Og,QueryOrderByConstraint:_5,QuerySnapshot:Hf,QueryStartAtConstraint:Mg,SnapshotMetadata:a0,Timestamp:Di,Transaction:IA,VectorValue:jg,WriteBatch:AA,_AutoId:Xw,_ByteString:Ki,_DatabaseId:g0,_DocumentKey:Gt,_EmptyAppCheckTokenProvider:NB,_EmptyAuthCredentialsProvider:dT,_FieldPath:_i,_TestingHooks:V$,_cast:on,_debugAssert:_B,_internalAggregationQueryToProtoRunAggregationQueryRequest:B$,_internalQueryToProtoQueryTarget:M$,_isBase64Available:rV,_logWarn:xl,_validateIsNotUsedTogether:oA,addDoc:dp,aggregateFieldEqual:a$,aggregateQuerySnapshotEqual:o$,and:Qz,arrayRemove:P$,arrayUnion:I$,average:s$,clearIndexedDbPersistence:Oz,collection:dr,collectionGroup:Pz,connectFirestoreEmulator:cA,count:CA,deleteAllPersistentCacheIndexes:O$,deleteDoc:Eo,deleteField:A$,disableNetwork:Vz,disablePersistentCacheIndexAutoCreation:D$,doc:or,documentId:Hz,enableIndexedDbPersistence:jz,enableMultiTabIndexedDbPersistence:Dz,enableNetwork:Bz,enablePersistentCacheIndexAutoCreation:j$,endAt:r$,endBefore:t$,ensureFirestoreConfigured:Oi,executeWrite:fp,getAggregateFromServer:TA,getCountFromServer:m$,getDoc:is,getDocFromCache:u$,getDocFromServer:d$,getDocs:Fn,getDocsFromCache:f$,getDocsFromServer:h$,getFirestore:dA,getPersistentCacheIndexManager:L$,increment:mv,initializeFirestore:Lz,limit:dh,limitToLast:Jz,loadBundle:zz,memoryEagerGarbageCollector:w$,memoryLocalCache:_$,memoryLruGarbageCollector:b$,namedQuery:$z,onSnapshot:ri,onSnapshotsInSync:p$,or:Yz,orderBy:Zs,persistentLocalCache:k$,persistentMultipleTabManager:C$,persistentSingleTabManager:NA,query:Tr,queryEqual:D6,refEqual:Rz,runTransaction:N$,serverTimestamp:Qs,setDoc:_c,setIndexConfiguration:F$,setLogLevel:bB,snapshotEqual:c$,startAfter:e$,startAt:Zz,sum:i$,terminate:Uz,updateDoc:ys,vector:R$,waitForPendingWrites:Mz,where:zr,writeBatch:G6},Symbol.toStringTag,{value:"Module"}));var U$="firebase",z$="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$l(U$,z$,"app");function X6(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function LA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $$=LA,jA=new kg("auth","Firebase",LA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=new Ww("@firebase/auth");function H$(t,...e){gv.logLevel<=hn.WARN&&gv.warn(`Auth (${oh}): ${t}`,...e)}function jx(t,...e){gv.logLevel<=hn.ERROR&&gv.error(`Auth (${oh}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(t,...e){throw Q6(t,...e)}function kc(t,...e){return Q6(t,...e)}function Y6(t,e,r){const n=Object.assign(Object.assign({},$$()),{[e]:r});return new kg("auth","Firebase",n).create(e,{appName:t.name})}function Ku(t){return Y6(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function q$(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&ql(t,"argument-error"),Y6(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Q6(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return jA.create(t,...e)}function Lr(t,e,...r){if(!t)throw Q6(e,...r)}function zu(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jx(e),new Error(e)}function nd(t,e){t||zu(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U3(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function W$(){return m7()==="http:"||m7()==="https:"}function m7(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(W$()||rM()||"connection"in navigator)?navigator.onLine:!0}function K$(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,r){this.shortDelay=e,this.longDelay=r,nd(r>e,"Short delay should be less than long delay!"),this.isMobile=ZO()||nM()}get(){return G$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(t,e){nd(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$=new Vg(3e4,6e4);function dd(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function mu(t,e,r,n,i={}){return OA(t,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const o=Eg(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return tM()||(c.referrerPolicy="no-referrer"),DA.fetch()(MA(t,t.config.apiHost,r,o),c)})}async function OA(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},X$),e);try{const i=new J$(t),s=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Y2(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Y2(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Y2(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Y2(t,"user-disabled",a);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Y6(t,d,c);ql(t,d)}}catch(i){if(i instanceof Nc)throw i;ql(t,"network-request-failed",{message:String(i)})}}async function Ug(t,e,r,n,i={}){const s=await mu(t,e,r,n,i);return"mfaPendingCredential"in s&&ql(t,"multi-factor-auth-required",{_serverResponse:s}),s}function MA(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?J6(t.config,i):`${t.config.apiScheme}://${i}`}function Q$(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class J${constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(kc(this.auth,"network-request-failed")),Y$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Y2(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=kc(t,e,n);return i.customData._tokenResponse=r,i}function g7(t){return t!==void 0&&t.enterprise!==void 0}class Z${constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return Q$(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function eH(t,e){return mu(t,"GET","/v2/recaptchaConfig",dd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tH(t,e){return mu(t,"POST","/v1/accounts:delete",e)}async function BA(t,e){return mu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rH(t,e=!1){const r=un(t),n=await r.getIdToken(e),i=Z6(n);Lr(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:n,authTime:Nm(t4(i.auth_time)),issuedAtTime:Nm(t4(i.iat)),expirationTime:Nm(t4(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function t4(t){return Number(t)*1e3}function Z6(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return jx("JWT malformed, contained fewer than 3 sections"),null;try{const i=WC(r);return i?JSON.parse(i):(jx("Failed to decode base64 JWT payload"),null)}catch(i){return jx("Caught error parsing JWT payload as JSON",i?.toString()),null}}function x7(t){const e=Z6(t);return Lr(e,"internal-error"),Lr(typeof e.exp<"u","internal-error"),Lr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W1(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Nc&&nH(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function nH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nm(this.lastLoginAt),this.creationTime=Nm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xv(t){var e;const r=t.auth,n=await t.getIdToken(),i=await W1(t,BA(r,{idToken:n}));Lr(i?.users.length,r,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?VA(s.providerUserInfo):[],o=aH(t.providerData,a),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!o?.length,d=l?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new z3(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function sH(t){const e=un(t);await xv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aH(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function VA(t){return t.map(e=>{var{providerId:r}=e,n=X6(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oH(t,e){const r=await OA(t,{},async()=>{const n=Eg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=MA(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",DA.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function lH(t,e){return mu(t,"POST","/v2/accounts:revokeToken",dd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Lr(e.idToken,"internal-error"),Lr(typeof e.idToken<"u","internal-error"),Lr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):x7(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Lr(e.length!==0,"internal-error");const r=x7(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Lr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:s}=await oH(e,r);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:s}=r,a=new m1;return n&&(Lr(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(Lr(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Lr(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new m1,this.toJSON())}_performRefresh(){return zu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t,e){Lr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $u{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,s=X6(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new z3(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await W1(this,this.stsTokenManager.getToken(this.auth,e));return Lr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return rH(this,e)}reload(){return sH(this)}_assign(e){this!==e&&(Lr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new $u(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Lr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await xv(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vc(this.auth.app))return Promise.reject(Ku(this.auth));const e=await this.getIdToken();return await W1(this,tH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,s,a,o,l,c,d;const p=(n=r.displayName)!==null&&n!==void 0?n:void 0,g=(i=r.email)!==null&&i!==void 0?i:void 0,m=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,w=(a=r.photoURL)!==null&&a!==void 0?a:void 0,y=(o=r.tenantId)!==null&&o!==void 0?o:void 0,k=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=r.createdAt)!==null&&c!==void 0?c:void 0,O=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:P,emailVerified:V,isAnonymous:Y,providerData:G,stsTokenManager:L}=r;Lr(P&&L,e,"internal-error");const N=m1.fromJSON(this.name,L);Lr(typeof P=="string",e,"internal-error"),Wd(p,e.name),Wd(g,e.name),Lr(typeof V=="boolean",e,"internal-error"),Lr(typeof Y=="boolean",e,"internal-error"),Wd(m,e.name),Wd(w,e.name),Wd(y,e.name),Wd(k,e.name),Wd(T,e.name),Wd(O,e.name);const C=new $u({uid:P,auth:e,email:g,emailVerified:V,displayName:p,isAnonymous:Y,photoURL:w,phoneNumber:m,tenantId:y,stsTokenManager:N,createdAt:T,lastLoginAt:O});return G&&Array.isArray(G)&&(C.providerData=G.map(R=>Object.assign({},R))),k&&(C._redirectEventId=k),C}static async _fromIdTokenResponse(e,r,n=!1){const i=new m1;i.updateFromServerResponse(r);const s=new $u({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await xv(s),s}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];Lr(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?VA(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,o=new m1;o.updateFromIdToken(n);const l=new $u({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new z3(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7=new Map;function Hu(t){nd(t instanceof Function,"Expected a class definition");let e=v7.get(t);return e?(nd(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,v7.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}UA.type="NONE";const y7=UA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t,e,r){return`firebase:${t}:${e}:${r}`}class g1{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=Dx(this.userKey,i.apiKey,s),this.fullPersistenceKey=Dx("persistence",i.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$u._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new g1(Hu(y7),e,n);const i=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Hu(y7);const a=Dx(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const d=await c._get(a);if(d){const p=$u._fromJSON(e,d);c!==s&&(o=p),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new g1(s,e,n):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new g1(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w7(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GA(e))return"Blackberry";if(KA(e))return"Webos";if($A(e))return"Safari";if((e.includes("chrome/")||HA(e))&&!e.includes("edge/"))return"Chrome";if(WA(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if(n?.length===2)return n[1]}return"Other"}function zA(t=Js()){return/firefox\//i.test(t)}function $A(t=Js()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HA(t=Js()){return/crios\//i.test(t)}function qA(t=Js()){return/iemobile/i.test(t)}function WA(t=Js()){return/android/i.test(t)}function GA(t=Js()){return/blackberry/i.test(t)}function KA(t=Js()){return/webos/i.test(t)}function eb(t=Js()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cH(t=Js()){var e;return eb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function uH(){return iM()&&document.documentMode===10}function XA(t=Js()){return eb(t)||WA(t)||KA(t)||GA(t)||/windows phone/i.test(t)||qA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(t,e=[]){let r;switch(t){case"Browser":r=w7(Js());break;case"Worker":r=`${w7(Js())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${oh}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fH(t,e={}){return mu(t,"GET","/v2/passwordPolicy",dd(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hH=6;class pH{constructor(e){var r,n,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:hH,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,s,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b7(this),this.idTokenSubscription=new b7(this),this.beforeStateQueue=new dH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Hu(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await g1.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await BA(this,{idToken:e}),n=await $u._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(vc(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=i?._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Lr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await xv(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=K$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vc(this.app))return Promise.reject(Ku(this));const r=e?un(e):null;return r&&Lr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Lr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vc(this.app)?Promise.reject(Ku(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vc(this.app)?Promise.reject(Ku(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hu(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fH(this),r=new pH(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new kg("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await lH(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Hu(e)||this._popupRedirectResolver;Lr(r,this,"argument-error"),this.redirectPersistenceManager=await g1.create(this,[Hu(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Lr(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,i);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Lr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r?.error&&H$(`Error while retrieving App Check token: ${r.error}`),r?.token}}function fd(t){return un(t)}class b7{constructor(e){this.auth=e,this.observer=null,this.addObserver=uM(r=>this.observer=r)}get next(){return Lr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E5={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gH(t){E5=t}function QA(t){return E5.loadJS(t)}function xH(){return E5.recaptchaEnterpriseScript}function vH(){return E5.gapiScript}function yH(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const wH="recaptcha-enterprise",bH="NO_RECAPTCHA";class _H{constructor(e){this.type=wH,this.auth=fd(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{eH(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new Z$(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;g7(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(bH)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{n(this.auth).then(o=>{if(!r&&g7(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=xH();l.length!==0&&(l+=o),QA(l).then(()=>{i(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function _7(t,e,r,n=!1){const i=new _H(t);let s;try{s=await i.verify(r)}catch{s=await i.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function vv(t,e,r,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await _7(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await _7(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kH(t,e){const r=ah(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),s=r.getOptions();if(h0(s,e??{}))return i;ql(i,"already-initialized")}return r.initialize({options:e})}function EH(t,e){const r=e?.persistence||[],n=(Array.isArray(r)?r:[r]).map(Hu);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function SH(t,e,r){const n=fd(t);Lr(n._canInitEmulator,n,"emulator-config-failed"),Lr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,s=JA(e),{host:a,port:o}=CH(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${s}//${a}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),TH()}function JA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CH(t){const e=JA(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:k7(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:k7(a)}}}function k7(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function TH(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return zu("not implemented")}_getIdTokenResponse(e){return zu("not implemented")}_linkToIdToken(e,r){return zu("not implemented")}_getReauthenticationResolver(e){return zu("not implemented")}}async function NH(t,e){return mu(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AH(t,e){return Ug(t,"POST","/v1/accounts:signInWithPassword",dd(t,e))}async function ZA(t,e){return mu(t,"POST","/v1/accounts:sendOobCode",dd(t,e))}async function IH(t,e){return ZA(t,e)}async function PH(t,e){return ZA(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RH(t,e){return Ug(t,"POST","/v1/accounts:signInWithEmailLink",dd(t,e))}async function FH(t,e){return Ug(t,"POST","/v1/accounts:signInWithEmailLink",dd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg extends tb{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new rg(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new rg(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vv(e,r,"signInWithPassword",AH);case"emailLink":return RH(e,{email:this._email,oobCode:this._password});default:ql(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vv(e,n,"signUpPassword",NH);case"emailLink":return FH(e,{idToken:r,email:this._email,oobCode:this._password});default:ql(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(t,e){return Ug(t,"POST","/v1/accounts:signInWithIdp",dd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LH="http://localhost";class qf extends tb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new qf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):ql("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,s=X6(r,["providerId","signInMethod"]);if(!n||!i)return null;const a=new qf(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return x1(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,x1(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,x1(e,r)}buildRequest(){const e={requestUri:LH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Eg(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jH(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DH(t){const e=um(dm(t)).link,r=e?um(dm(e)).deep_link_id:null,n=um(dm(t)).deep_link_id;return(n?um(dm(n)).link:null)||n||r||e||t}class rb{constructor(e){var r,n,i,s,a,o;const l=um(dm(e)),c=(r=l.apiKey)!==null&&r!==void 0?r:null,d=(n=l.oobCode)!==null&&n!==void 0?n:null,p=jH((i=l.mode)!==null&&i!==void 0?i:null);Lr(c&&d&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=DH(e);try{return new rb(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this.providerId=fh.PROVIDER_ID}static credential(e,r){return rg._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=rb.parseLink(r);return Lr(n,"argument-error"),rg._fromEmailAndCode(e,n.code,n.tenantId)}}fh.PROVIDER_ID="password";fh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg extends nb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0 extends zg{constructor(){super("facebook.com")}static credential(e){return qf._fromParams({providerId:e0.PROVIDER_ID,signInMethod:e0.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return e0.credentialFromTaggedObject(e)}static credentialFromError(e){return e0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return e0.credential(e.oauthAccessToken)}catch{return null}}}e0.FACEBOOK_SIGN_IN_METHOD="facebook.com";e0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends zg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return qf._fromParams({providerId:Zc.PROVIDER_ID,signInMethod:Zc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Zc.credentialFromTaggedObject(e)}static credentialFromError(e){return Zc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Zc.credential(r,n)}catch{return null}}}Zc.GOOGLE_SIGN_IN_METHOD="google.com";Zc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends zg{constructor(){super("github.com")}static credential(e){return qf._fromParams({providerId:t0.PROVIDER_ID,signInMethod:t0.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return t0.credentialFromTaggedObject(e)}static credentialFromError(e){return t0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return t0.credential(e.oauthAccessToken)}catch{return null}}}t0.GITHUB_SIGN_IN_METHOD="github.com";t0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0 extends zg{constructor(){super("twitter.com")}static credential(e,r){return qf._fromParams({providerId:r0.PROVIDER_ID,signInMethod:r0.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return r0.credentialFromTaggedObject(e)}static credentialFromError(e){return r0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return r0.credential(r,n)}catch{return null}}}r0.TWITTER_SIGN_IN_METHOD="twitter.com";r0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OH(t,e){return Ug(t,"POST","/v1/accounts:signUp",dd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const s=await $u._fromIdTokenResponse(e,n,i),a=E7(n);return new Wf({user:s,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=E7(n);return new Wf({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function E7(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv extends Nc{constructor(e,r,n,i){var s;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,yv.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new yv(e,r,n,i)}}function eI(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?yv._fromErrorAndOperation(t,s,e,n):s})}async function MH(t,e,r=!1){const n=await W1(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Wf._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(t,e,r=!1){const{auth:n}=t;if(vc(n.app))return Promise.reject(Ku(n));const i="reauthenticate";try{const s=await W1(t,eI(n,i,e,t),r);Lr(s.idToken,n,"internal-error");const a=Z6(s.idToken);Lr(a,n,"internal-error");const{sub:o}=a;return Lr(t.uid===o,n,"user-mismatch"),Wf._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ql(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rI(t,e,r=!1){if(vc(t.app))return Promise.reject(Ku(t));const n="signIn",i=await eI(t,n,e),s=await Wf._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(s.user),s}async function BH(t,e){return rI(fd(t),e)}async function VH(t,e){return tI(un(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nI(t){const e=fd(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function UH(t,e,r){const n=fd(t);await vv(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",PH)}async function iI(t,e,r){if(vc(t.app))return Promise.reject(Ku(t));const n=fd(t),a=await vv(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OH).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&nI(t),l}),o=await Wf._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function zH(t,e,r){return vc(t.app)?Promise.reject(Ku(t)):BH(un(t),fh.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&nI(t),n})}async function $H(t,e){const r=un(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:s}=await IH(r.auth,i);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HH(t,e){return mu(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sI(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=un(t),s={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},a=await W1(n,HH(n.auth,s));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const o=n.providerData.find(({providerId:l})=>l==="password");o&&(o.displayName=n.displayName,o.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function qH(t,e,r,n){return un(t).onIdTokenChanged(e,r,n)}function WH(t,e,r){return un(t).beforeAuthStateChanged(e,r)}function GH(t,e,r,n){return un(t).onAuthStateChanged(e,r,n)}function KH(t){return un(t).signOut()}const wv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(wv,"1"),this.storage.removeItem(wv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XH=1e3,YH=10;class oI extends aI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);uH()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,YH):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},XH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}oI.type="LOCAL";const QH=oI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI extends aI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}lI.type="SESSION";const cI=lI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JH(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new S5(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:s}=r.data,a=this.handlersMap[i];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(a).map(async c=>c(r.origin,s)),l=await JH(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}S5.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=ib("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(g.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(){return window}function eq(t){lu().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(){return typeof lu().WorkerGlobalScope<"u"&&typeof lu().importScripts=="function"}async function tq(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rq(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function nq(){return uI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="firebaseLocalStorageDb",iq=1,bv="firebaseLocalStorage",fI="fbase_key";class $g{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function C5(t,e){return t.transaction([bv],e?"readwrite":"readonly").objectStore(bv)}function sq(){const t=indexedDB.deleteDatabase(dI);return new $g(t).toPromise()}function $3(){const t=indexedDB.open(dI,iq);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(bv,{keyPath:fI})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(bv)?e(n):(n.close(),await sq(),e(await $3()))})})}async function S7(t,e,r){const n=C5(t,!0).put({[fI]:e,value:r});return new $g(n).toPromise()}async function aq(t,e){const r=C5(t,!1).get(e),n=await new $g(r).toPromise();return n===void 0?null:n.value}function C7(t,e){const r=C5(t,!0).delete(e);return new $g(r).toPromise()}const oq=800,lq=3;class hI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $3(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>lq)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=S5._getInstance(nq()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await tq(),!this.activeServiceWorker)return;this.sender=new ZH(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $3();return await S7(e,wv,"1"),await C7(e,wv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>S7(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>aq(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>C7(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=C5(i,!1).getAll();return new $g(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hI.type="LOCAL";const cq=hI;new Vg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t,e){return e?Hu(e):(Lr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb extends tb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return x1(e,this._buildIdpRequest())}_linkToIdToken(e,r){return x1(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return x1(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function uq(t){return rI(t.auth,new sb(t),t.bypassAuthState)}function dq(t){const{auth:e,user:r}=t;return Lr(r,e,"internal-error"),tI(r,new sb(t),t.bypassAuthState)}async function fq(t){const{auth:e,user:r}=t;return Lr(r,e,"internal-error"),MH(r,new sb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,r,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uq;case"linkViaPopup":case"linkViaRedirect":return fq;case"reauthViaPopup":case"reauthViaRedirect":return dq;default:ql(this.auth,"internal-error")}}resolve(e){nd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){nd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq=new Vg(2e3,1e4);async function T7(t,e,r){if(vc(t.app))return Promise.reject(kc(t,"operation-not-supported-in-this-environment"));const n=fd(t);q$(t,e,nb);const i=pI(n,r);return new bf(n,"signInViaPopup",e,i).executeNotNull()}class bf extends mI{constructor(e,r,n,i,s){super(e,r,i,s),this.provider=n,this.authWindow=null,this.pollId=null,bf.currentPopupAction&&bf.currentPopupAction.cancel(),bf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Lr(e,this.auth,"internal-error"),e}async onExecution(){nd(this.filter.length===1,"Popup operations only handle one event");const e=ib();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(kc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(kc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hq.get())};e()}}bf.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pq="pendingRedirect",Ox=new Map;class mq extends mI{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Ox.get(this.auth._key());if(!e){try{const n=await gq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Ox.set(this.auth._key(),e)}return this.bypassAuthState||Ox.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gq(t,e){const r=yq(e),n=vq(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function xq(t,e){Ox.set(t._key(),e)}function vq(t){return Hu(t._redirectPersistence)}function yq(t){return Dx(pq,t.config.apiKey,t.name)}async function wq(t,e,r=!1){if(vc(t.app))return Promise.reject(Ku(t));const n=fd(t),i=pI(n,e),a=await new mq(n,i,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq=600*1e3;class _q{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kq(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!gI(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(kc(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bq&&this.cachedEventUids.clear(),this.cachedEventUids.has(N7(e))}saveEventToCache(e){this.cachedEventUids.add(N7(e)),this.lastProcessedEventTime=Date.now()}}function N7(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function gI({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function kq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eq(t,e={}){return mu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Cq=/^https?/;async function Tq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Eq(t);for(const r of e)try{if(Nq(r))return}catch{}ql(t,"unauthorized-domain")}function Nq(t){const e=U3(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!Cq.test(r))return!1;if(Sq.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aq=new Vg(3e4,6e4);function A7(){const t=lu().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Iq(t){return new Promise((e,r)=>{var n,i,s;function a(){A7(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{A7(),r(kc(t,"network-request-failed"))},timeout:Aq.get()})}if(!((i=(n=lu().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=lu().gapi)===null||s===void 0)&&s.load)a();else{const o=yH("iframefcb");return lu()[o]=()=>{gapi.load?a():r(kc(t,"network-request-failed"))},QA(`${vH()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw Mx=null,e})}let Mx=null;function Pq(t){return Mx=Mx||Iq(t),Mx}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rq=new Vg(5e3,15e3),Fq="__/auth/iframe",Lq="emulator/auth/iframe",jq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Dq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Oq(t){const e=t.config;Lr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?J6(e,Lq):`https://${t.config.authDomain}/${Fq}`,n={apiKey:e.apiKey,appName:t.name,v:oh},i=Dq.get(t.config.apiHost);i&&(n.eid=i);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Eg(n).slice(1)}`}async function Mq(t){const e=await Pq(t),r=lu().gapi;return Lr(r,t,"internal-error"),e.open({where:document.body,url:Oq(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jq,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=kc(t,"network-request-failed"),o=lu().setTimeout(()=>{s(a)},Rq.get());function l(){lu().clearTimeout(o),i(n)}n.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Vq=500,Uq=600,zq="_blank",$q="http://localhost";class I7{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Hq(t,e,r,n=Vq,i=Uq){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Bq),{width:n.toString(),height:i.toString(),top:s,left:a}),c=Js().toLowerCase();r&&(o=HA(c)?zq:r),zA(c)&&(e=e||$q,l.scrollbars="yes");const d=Object.entries(l).reduce((g,[m,w])=>`${g}${m}=${w},`,"");if(cH(c)&&o!=="_self")return qq(e||"",o),new I7(null);const p=window.open(e||"",o,d);Lr(p,t,"popup-blocked");try{p.focus()}catch{}return new I7(p)}function qq(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wq="__/auth/handler",Gq="emulator/auth/handler",Kq=encodeURIComponent("fac");async function P7(t,e,r,n,i,s){Lr(t.config.authDomain,t,"auth-domain-config-required"),Lr(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:oh,eventId:i};if(e instanceof nb){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",cM(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))a[d]=p}if(e instanceof zg){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),c=l?`#${Kq}=${encodeURIComponent(l)}`:"";return`${Xq(t)}?${Eg(o).slice(1)}${c}`}function Xq({config:t}){return t.emulator?J6(t,Gq):`https://${t.authDomain}/${Wq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4="webStorageSupport";class Yq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cI,this._completeRedirectFn=wq,this._overrideRedirectResult=xq}async _openPopup(e,r,n,i){var s;nd((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await P7(e,r,n,U3(),i);return Hq(e,a,ib())}async _openRedirect(e,r,n,i){await this._originValidation(e);const s=await P7(e,r,n,U3(),i);return eq(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:s}=this.eventManagers[r];return i?Promise.resolve(i):(nd(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Mq(e),n=new _q(e);return r.register("authEvent",i=>(Lr(i?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(r4,{type:r4},i=>{var s;const a=(s=i?.[0])===null||s===void 0?void 0:s[r4];a!==void 0&&r(!!a),ql(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Tq(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return XA()||$A()||eb()}}const Qq=Yq;var R7="@firebase/auth",F7="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Lr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eW(t){p0(new Zu("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Lr(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YA(t)},c=new mH(n,i,s,l);return EH(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),p0(new Zu("auth-internal",e=>{const r=fd(e.getProvider("auth").getImmediate());return(n=>new Jq(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),$l(R7,F7,Zq(t)),$l(R7,F7,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tW=300,rW=XC("authIdTokenMaxAge")||tW;let L7=null;const nW=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>rW)return;const i=r?.token;L7!==i&&(L7=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function xI(t=t5()){const e=ah(t,"auth");if(e.isInitialized())return e.getImmediate();const r=kH(t,{popupRedirectResolver:Qq,persistence:[cq,QH,cI]}),n=XC("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const a=nW(s.toString());WH(r,a,()=>a(r.currentUser)),qH(r,o=>a(o))}}const i=GC("auth");return i&&SH(r,`http://${i}`),r}function iW(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}gH({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const s=kc("internal-error");s.customData=i,r(s)},n.type="text/javascript",n.charset="UTF-8",iW().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eW("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="firebasestorage.googleapis.com",yI="storageBucket",sW=120*1e3,aW=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends Nc{constructor(e,r,n=0){super(n4(e),`Firebase Storage: ${r} (${n4(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,us.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return n4(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ls;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ls||(ls={}));function n4(t){return"storage/"+t}function ab(){const t="An unknown error occurred, please check the error payload for server response.";return new us(ls.UNKNOWN,t)}function oW(t){return new us(ls.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function lW(t){return new us(ls.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function cW(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new us(ls.UNAUTHENTICATED,t)}function uW(){return new us(ls.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function dW(t){return new us(ls.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function fW(){return new us(ls.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hW(){return new us(ls.CANCELED,"User canceled the upload/download.")}function pW(t){return new us(ls.INVALID_URL,"Invalid URL '"+t+"'.")}function mW(t){return new us(ls.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function gW(){return new us(ls.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yI+"' property when initializing the app?")}function xW(){return new us(ls.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function vW(){return new us(ls.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function yW(t){return new us(ls.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function H3(t){return new us(ls.INVALID_ARGUMENT,t)}function wI(){return new us(ls.APP_DELETED,"The Firebase app was deleted.")}function wW(t){return new us(ls.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Am(t,e){return new us(ls.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function im(t){throw new us(ls.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=pl.makeFromUrl(e,r)}catch{return new pl(e,"")}if(n.path==="")return n;throw mW(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function s(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function c(V){V.path_=decodeURIComponent(V.path)}const d="v[A-Za-z0-9_]+",p=r.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",m=new RegExp(`^https?://${p}/${d}/b/${i}/o${g}`,"i"),w={bucket:1,path:3},y=r===vI?"(?:storage.googleapis.com|storage.cloud.google.com)":r,k="([^?#]*)",T=new RegExp(`^https?://${y}/${i}/${k}`,"i"),P=[{regex:o,indices:l,postModify:s},{regex:m,indices:w,postModify:c},{regex:T,indices:{bucket:1,path:2},postModify:c}];for(let V=0;V<P.length;V++){const Y=P[V],G=Y.regex.exec(e);if(G){const L=G[Y.indices.bucket];let N=G[Y.indices.path];N||(N=""),n=new pl(L,N),Y.postModify(n);break}}if(n==null)throw pW(e);return n}}class bW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _W(t,e,r){let n=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let c=!1;function d(...k){c||(c=!0,e.apply(null,k))}function p(k){i=setTimeout(()=>{i=null,t(m,l())},k)}function g(){s&&clearTimeout(s)}function m(k,...T){if(c){g();return}if(k){g(),d.call(null,k,...T);return}if(l()||a){g(),d.call(null,k,...T);return}n<64&&(n*=2);let P;o===1?(o=2,P=0):P=(n+Math.random())*1e3,p(P)}let w=!1;function y(k){w||(w=!0,g(),!c&&(i!==null?(k||(o=2),clearTimeout(i),p(0)):k||(o=1)))}return p(0),s=setTimeout(()=>{a=!0,y(!0)},r),y}function kW(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EW(t){return t!==void 0}function SW(t){return typeof t=="object"&&!Array.isArray(t)}function ob(t){return typeof t=="string"||t instanceof String}function j7(t){return lb()&&t instanceof Blob}function lb(){return typeof Blob<"u"}function D7(t,e,r,n){if(n<e)throw H3(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw H3(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function bI(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var Af;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Af||(Af={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CW(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return r||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{constructor(e,r,n,i,s,a,o,l,c,d,p,g=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,w)=>{this.resolve_=m,this.reject_=w,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Q2(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===Af.NO_ERROR,l=s.getStatus();if(!o||CW(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Af.ABORT;n(!1,new Q2(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new Q2(c,s))})},r=(n,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());EW(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=ab();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?wI():hW();a(l)}else{const l=fW();a(l)}};this.canceled_?r(!1,new Q2(!1,null,!0)):this.backoffId_=_W(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Q2{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function NW(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function AW(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function IW(t,e){e&&(t["X-Firebase-GMPID"]=e)}function PW(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function RW(t,e,r,n,i,s,a=!0){const o=bI(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return IW(c,e),NW(c,r),AW(c,s),PW(c,n),new TW(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FW(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function LW(...t){const e=FW();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(lb())return new Blob(t);throw new us(ls.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function jW(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DW(t){if(typeof atob>"u")throw yW("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class i4{constructor(e,r){this.data=e,this.contentType=r||null}}function OW(t,e){switch(t){case ru.RAW:return new i4(_I(e));case ru.BASE64:case ru.BASE64URL:return new i4(kI(t,e));case ru.DATA_URL:return new i4(BW(e),VW(e))}throw ab()}function _I(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const s=n,a=t.charCodeAt(++r);n=65536|(s&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function MW(t){let e;try{e=decodeURIComponent(t)}catch{throw Am(ru.DATA_URL,"Malformed data URL.")}return _I(e)}function kI(t,e){switch(t){case ru.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Am(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ru.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Am(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=DW(e)}catch(i){throw i.message.includes("polyfill")?i:Am(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class EI{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Am(ru.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=UW(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function BW(t){const e=new EI(t);return e.base64?kI(ru.BASE64,e.rest):MW(e.rest)}function VW(t){return new EI(t).contentType}function UW(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,r){let n=0,i="";j7(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(j7(this.data_)){const n=this.data_,i=jW(n,e,r);return i===null?null:new n0(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new n0(n,!0)}}static getBlob(...e){if(lb()){const r=e.map(n=>n instanceof n0?n.data_:n);return new n0(LW.apply(null,r))}else{const r=e.map(a=>ob(a)?OW(ru.RAW,a).data:a.data_);let n=0;r.forEach(a=>{n+=a.byteLength});const i=new Uint8Array(n);let s=0;return r.forEach(a=>{for(let o=0;o<a.length;o++)i[s++]=a[o]}),new n0(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(t){let e;try{e=JSON.parse(t)}catch{return null}return SW(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zW(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function $W(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function CI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HW(t,e){return e}class ko{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||HW}}let J2=null;function qW(t){return!ob(t)||t.length<2?t:CI(t)}function TI(){if(J2)return J2;const t=[];t.push(new ko("bucket")),t.push(new ko("generation")),t.push(new ko("metageneration")),t.push(new ko("name","fullPath",!0));function e(s,a){return qW(a)}const r=new ko("name");r.xform=e,t.push(r);function n(s,a){return a!==void 0?Number(a):a}const i=new ko("size");return i.xform=n,t.push(i),t.push(new ko("timeCreated")),t.push(new ko("updated")),t.push(new ko("md5Hash",null,!0)),t.push(new ko("cacheControl",null,!0)),t.push(new ko("contentDisposition",null,!0)),t.push(new ko("contentEncoding",null,!0)),t.push(new ko("contentLanguage",null,!0)),t.push(new ko("contentType",null,!0)),t.push(new ko("metadata","customMetadata",!0)),J2=t,J2}function WW(t,e){function r(){const n=t.bucket,i=t.fullPath,s=new pl(n,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:r})}function GW(t,e,r){const n={};n.type="file";const i=r.length;for(let s=0;s<i;s++){const a=r[s];n[a.local]=a.xform(n,e[a.server])}return WW(n,t),n}function NI(t,e,r){const n=SI(e);return n===null?null:GW(t,n,r)}function KW(t,e,r,n){const i=SI(e);if(i===null||!ob(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(c=>{const d=t.bucket,p=t.fullPath,g="/b/"+a(d)+"/o/"+a(p),m=cb(g,r,n),w=bI({alt:"media",token:c});return m+w})[0]}function XW(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const s=e[i];s.writable&&(r[s.server]=t[s.local])}return JSON.stringify(r)}class AI{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t){if(!t)throw ab()}function YW(t,e){function r(n,i){const s=NI(t,i,e);return II(s!==null),s}return r}function QW(t,e){function r(n,i){const s=NI(t,i,e);return II(s!==null),KW(s,i,t.host,t._protocol)}return r}function PI(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=uW():i=cW():r.getStatus()===402?i=lW(t.bucket):r.getStatus()===403?i=dW(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function JW(t){const e=PI(t);function r(n,i){let s=e(n,i);return n.getStatus()===404&&(s=oW(t.path)),s.serverResponse=i.serverResponse,s}return r}function ZW(t,e,r){const n=e.fullServerUrl(),i=cb(n,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new AI(i,s,QW(t,r),a);return o.errorHandler=JW(e),o}function eG(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function tG(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=eG(null,e)),n}function rG(t,e,r,n,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let P="";for(let V=0;V<2;V++)P=P+Math.random().toString().slice(2);return P}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=tG(e,n,i),d=XW(c,r),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,g=`\r
--`+l+"--",m=n0.getBlob(p,n,g);if(m===null)throw xW();const w={name:c.fullPath},y=cb(s,t.host,t._protocol),k="POST",T=t.maxUploadRetryTime,O=new AI(y,k,YW(t,r),T);return O.urlParams=w,O.headers=a,O.body=m.uploadData(),O.errorHandler=PI(e),O}class nG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Af.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Af.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Af.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i){if(this.sent_)throw im("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw im("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw im("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw im("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw im("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class iG extends nG{initXhr(){this.xhr_.responseType="text"}}function RI(){return new iG}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,r){this._service=e,r instanceof pl?this._location=r:this._location=pl.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Gf(e,r)}get root(){const e=new pl(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CI(this._location.path)}get storage(){return this._service}get parent(){const e=zW(this._location.path);if(e===null)return null;const r=new pl(this._location.bucket,e);return new Gf(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw wW(e)}}function sG(t,e,r){t._throwIfRoot("uploadBytes");const n=rG(t.storage,t._location,TI(),new n0(e,!0),r);return t.storage.makeRequestWithTokens(n,RI).then(i=>({metadata:i,ref:t}))}function aG(t){t._throwIfRoot("getDownloadURL");const e=ZW(t.storage,t._location,TI());return t.storage.makeRequestWithTokens(e,RI).then(r=>{if(r===null)throw vW();return r})}function oG(t,e){const r=$W(t._location.path,e),n=new pl(t._location.bucket,r);return new Gf(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lG(t){return/^[A-Za-z]+:\/\//.test(t)}function cG(t,e){return new Gf(t,e)}function FI(t,e){if(t instanceof ub){const r=t;if(r._bucket==null)throw gW();const n=new Gf(r,r._bucket);return e!=null?FI(n,e):n}else return e!==void 0?oG(t,e):t}function uG(t,e){if(e&&lG(e)){if(t instanceof ub)return cG(t,e);throw H3("To use ref(service, url), the first argument must be a Storage instance.")}else return FI(t,e)}function O7(t,e){const r=e?.[yI];return r==null?null:pl.makeFromBucketSpec(r,t)}function dG(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:YC(i,t.app.options.projectId))}class ub{constructor(e,r,n,i,s){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=vI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=sW,this._maxUploadRetryTime=aW,this._requests=new Set,i!=null?this._bucket=pl.makeFromBucketSpec(i,this._host):this._bucket=O7(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pl.makeFromBucketSpec(this._url,e):this._bucket=O7(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){D7("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){D7("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gf(this,e)}_makeRequest(e,r,n,i,s=!0){if(this._deleted)return new bW(wI());{const a=RW(e,this._appId,n,i,r,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const M7="@firebase/storage",B7="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="storage";function fG(t,e,r){return t=un(t),sG(t,e,r)}function hG(t){return t=un(t),aG(t)}function pG(t,e){return t=un(t),uG(t,e)}function mG(t=t5(),e){t=un(t);const n=ah(t,LI).getImmediate({identifier:e}),i=qw("storage");return i&&gG(n,...i),n}function gG(t,e,r,n={}){dG(t,e,r,n)}function xG(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ub(r,n,i,e,oh)}function vG(){p0(new Zu(LI,xG,"PUBLIC").setMultipleInstances(!0)),$l(M7,B7,""),$l(M7,B7,"esm2017")}vG();const yG={apiKey:"AIzaSyB1GNt6gatBiZyVDj9wZP4TSnefXsohCho",authDomain:"healthapp-f4173.firebaseapp.com",projectId:"healthapp-f4173",storageBucket:"healthapp-f4173.firebasestorage.app",messagingSenderId:"169032569236",appId:"1:169032569236:web:38585fcf19c35ba1737f81"},db=tT(yG),Yd=xI(db),gt=dA(db),wG=mG(db);function q3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function jI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V7(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BI(n.key),n)}}function DI(t,e,r){return e&&V7(t.prototype,e),r&&V7(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function OI(t,e,r){return(e=BI(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function U7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.push.apply(r,n)}return r}function ns(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U7(Object(r),!0).forEach((function(n){OI(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U7(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}function W3(t,e){if(t==null)return{};var r,n,i=(function(a,o){if(a==null)return{};var l={};for(var c in a)if({}.hasOwnProperty.call(a,c)){if(o.indexOf(c)!==-1)continue;l[c]=a[c]}return l})(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function bG(t,e){return(function(r){if(Array.isArray(r))return r})(t)||(function(r,n){var i=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(i!=null){var s,a,o,l,c=[],d=!0,p=!1;try{if(o=(i=i.call(r)).next,n!==0)for(;!(d=(s=o.call(i)).done)&&(c.push(s.value),c.length!==n);d=!0);}catch(g){p=!0,a=g}finally{try{if(!d&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(p)throw a}}return c}})(t,e)||VI(t,e)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function MI(t){return(function(e){if(Array.isArray(e))return q3(e)})(t)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(t)||VI(t)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function BI(t){var e=(function(r,n){if(typeof r!="object"||!r)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var s=i.call(r,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)})(t,"string");return typeof e=="symbol"?e:e+""}function Kf(t){return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kf(t)}function VI(t,e){if(t){if(typeof t=="string")return q3(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q3(t,e):void 0}}var fb={cookieTestUrl:"https://legacy-staging.paystack.co/test-iframe/start.html",publishableKey:"uFmz/uE/SDT6GupOrSEXIZXGByjQ0zFkPyc9LqKHFqnTI0WPN3JS5kQPo/j9or0TOXlqMQj2lzHn/UGsQT4XeQ==",publicKey:`-----BEGIN PUBLIC KEY-----\r
MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBALhZs/7hP0g0+hrqTq0hFyGVxgco0NMx\r
ZD8nPS6ihxap0yNFjzdyUuZED6P4/aK9Ezl5ajEI9pcx5/1BrEE+F3kCAwEAAQ==\r
-----END PUBLIC KEY-----`,applePayVersion:6,applePayValidateSessionPath:"applepay/validate-session/",applePayChargePath:"applepay/charge"};ns(ns({},fb),{},{checkoutUrl:"http://localhost:8081/",paymentBaseUrl:"https://legacy-staging.paystack.co/",paystackApiUrl:"https://studio-api.paystack.co/",siteUrl:"https://paystack.com",pusherKey:"1c7b262ee18455815893",pusherUrl:"http://localhost:8081/static/vendor/pusher.min.js"});var _G=ns(ns({},fb),{},{checkoutUrl:"https://checkout-studio.paystack.com/",paymentBaseUrl:"https://legacy-staging.paystack.co/",paystackApiUrl:"https://studio-api.paystack.co/",siteUrl:"https://beta.paystack.com",pusherKey:"1c7b262ee18455815893",pusherUrl:"https://checkout-studio.paystack.com/static/vendor/pusher.min.js"}),Uo={production:ns(ns({},fb),{},{checkoutUrl:"https://checkout.paystack.com/",paymentBaseUrl:"https://standard.paystack.co/",paystackApiUrl:"https://api.paystack.co/",siteUrl:"https://paystack.com",pusherKey:"8e4b9b7ca3418bd5cdc8",pusherUrl:"https://checkout.paystack.com/static/vendor/pusher.min.js"})}.production||_G;function UI(t,e){var r=[];return Object.keys(t).forEach((function(n){var i=e?"".concat(e,"[").concat(n,"]"):n,s=t[i];r.push(s!==null&&(typeof v>"u"?"undefined":Kf(v))==="object"?UI(s,i):"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(s)))})),r.join("&")}function a1(){return document.currentScript||(t=document.getElementsByTagName("script"))[t.length-1];var t}function z7(){var t=[],e=a1();if(e){var r=Array.prototype.slice.call(e.attributes);t=Object.keys(r).filter((function(n){var i=r[n].nodeName;return i&&i.indexOf("data")>-1})).map((function(n){return r[n].nodeName}))}return t}var zI=`
  <svg id="inline-button-wordmark--white" width="137" height="13" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M.037 5.095l1.075-.135c-.011-.774-.025-1.944-.013-2.149C1.19 1.364 2.38.134 3.81.013 3.9.006 3.99.002 4.077 0a2.947 2.947 0 0 1 2.046.76c.574.509.95 1.26 1.008 2.007.015.192.01 1.491.01 2.257l1.096.163L8.2 11.44 4.093 12 0 11.346l.037-6.251zm4.106-.514l1.724.256c-.007-.933-.05-2.295-.26-2.654-.319-.545-.846-.867-1.443-.88h-.063c-.607.008-1.138.322-1.458.864-.222.378-.266 1.66-.265 2.637l1.765-.223zM18.228 10.108c-.576 0-1.064-.072-1.464-.216a2.864 2.864 0 0 1-.972-.6 2.552 2.552 0 0 1-.588-.864 4.067 4.067 0 0 1-.252-1.044h1.008c.032.256.088.5.168.732.08.224.204.424.372.6.168.168.388.304.66.408.28.096.636.144 1.068.144.28 0 .536-.036.768-.108.24-.08.448-.192.624-.336.176-.144.312-.316.408-.516.104-.2.156-.42.156-.66 0-.24-.032-.448-.096-.624a1.02 1.02 0 0 0-.336-.468 1.885 1.885 0 0 0-.636-.324 6.4 6.4 0 0 0-1.008-.228 8.79 8.79 0 0 1-1.212-.276 3.246 3.246 0 0 1-.9-.432 1.982 1.982 0 0 1-.564-.672c-.128-.272-.192-.6-.192-.984 0-.328.068-.632.204-.912.136-.288.324-.536.564-.744.248-.208.54-.372.876-.492.336-.12.708-.18 1.116-.18.864 0 1.548.204 2.052.612.512.4.812.984.9 1.752h-.936c-.104-.544-.316-.932-.636-1.164-.32-.24-.78-.36-1.38-.36-.592 0-1.04.132-1.344.396a1.255 1.255 0 0 0-.444.996c0 .208.024.396.072.564.056.16.156.3.3.42.152.12.36.228.624.324a6.72 6.72 0 0 0 1.068.228c.48.072.9.168 1.26.288.36.12.664.276.912.468s.432.428.552.708c.128.28.192.624.192 1.032 0 .36-.076.696-.228 1.008a2.472 2.472 0 0 1-.612.804c-.264.224-.58.4-.948.528-.36.128-.752.192-1.176.192zM25.355 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM32.091 10.108c-.44 0-.848-.072-1.224-.216a3.054 3.054 0 0 1-.972-.636 3.12 3.12 0 0 1-.648-1.008 3.626 3.626 0 0 1-.228-1.32v-.096c0-.48.08-.916.24-1.308.16-.4.376-.74.648-1.02.28-.28.604-.496.972-.648.376-.16.772-.24 1.188-.24.328 0 .644.04.948.12.312.08.588.208.828.384.248.168.456.392.624.672.168.28.276.62.324 1.02h-.984c-.08-.496-.284-.848-.612-1.056-.32-.208-.696-.312-1.128-.312a1.93 1.93 0 0 0-.804.168c-.24.112-.452.272-.636.48a2.23 2.23 0 0 0-.42.744 2.991 2.991 0 0 0-.156.996v.096c0 .776.188 1.364.564 1.764.384.392.88.588 1.488.588.224 0 .436-.032.636-.096a1.651 1.651 0 0 0 .96-.768c.112-.192.18-.416.204-.672h.924a2.595 2.595 0 0 1-.276.948 2.386 2.386 0 0 1-.576.744c-.24.208-.52.372-.84.492-.32.12-.668.18-1.044.18zM38.335 10.108a2.83 2.83 0 0 1-.876-.132 1.724 1.724 0 0 1-.684-.42 2.145 2.145 0 0 1-.456-.756c-.112-.304-.168-.672-.168-1.104V3.724h.996v3.924c0 .552.116.956.348 1.212.24.256.608.384 1.104.384.224 0 .44-.036.648-.108.208-.072.392-.18.552-.324.16-.144.288-.324.384-.54.096-.216.144-.464.144-.744V3.724h.996V10h-.996v-.996c-.144.296-.388.556-.732.78-.336.216-.756.324-1.26.324zM43.216 3.724h.996v1.128c.2-.352.452-.64.756-.864.312-.232.748-.356 1.308-.372v.936a4.461 4.461 0 0 0-.852.12 1.647 1.647 0 0 0-.66.324 1.472 1.472 0 0 0-.408.612c-.096.248-.144.564-.144.948V10h-.996V3.724zM50 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM56.496 10.108c-.408 0-.788-.068-1.14-.204a2.683 2.683 0 0 1-.9-.612 3.01 3.01 0 0 1-.588-.984 4.01 4.01 0 0 1-.204-1.32v-.096c0-.48.072-.92.216-1.32.144-.4.344-.744.6-1.032.256-.296.564-.524.924-.684.36-.16.756-.24 1.188-.24.528 0 .956.112 1.284.336.328.216.584.476.768.78V.724h.996V10h-.996V8.92c-.088.152-.208.3-.36.444a2.792 2.792 0 0 1-.516.384 2.874 2.874 0 0 1-.6.252c-.216.072-.44.108-.672.108zm.108-.828c.288 0 .56-.048.816-.144.256-.096.476-.24.66-.432.184-.2.328-.448.432-.744.112-.304.168-.656.168-1.056v-.096c0-.808-.18-1.404-.54-1.788-.352-.384-.836-.576-1.452-.576-.624 0-1.112.208-1.464.624-.352.416-.528 1.008-.528 1.776v.096c0 .392.048.736.144 1.032.104.296.24.54.408.732.176.192.38.336.612.432.232.096.48.144.744.144zM67.712 10.108c-.512 0-.948-.112-1.308-.336a2.38 2.38 0 0 1-.816-.804V10h-.996V.724h.996V4.78a1.92 1.92 0 0 1 .348-.432c.152-.144.32-.268.504-.372.192-.112.396-.2.612-.264.216-.064.436-.096.66-.096.408 0 .788.072 1.14.216.352.144.652.352.9.624.256.272.456.604.6.996.144.392.216.832.216 1.32v.096c0 .48-.068.92-.204 1.32a3.103 3.103 0 0 1-.576 1.02 2.583 2.583 0 0 1-.9.672 2.937 2.937 0 0 1-1.176.228zm-.096-.828c.624 0 1.1-.2 1.428-.6.328-.408.492-.996.492-1.764V6.82c0-.4-.052-.748-.156-1.044a2.095 2.095 0 0 0-.42-.732 1.53 1.53 0 0 0-.612-.444 1.798 1.798 0 0 0-.744-.156c-.288 0-.56.048-.816.144a1.71 1.71 0 0 0-.648.444c-.184.192-.328.44-.432.744a3.152 3.152 0 0 0-.156 1.044v.096c0 .8.192 1.396.576 1.788.384.384.88.576 1.488.576zM73.63 9.352l-2.46-5.628h1.068l1.92 4.5 1.74-4.5h1.02l-3.468 8.46h-1.008l1.188-2.832zM87.127 3.669A3.138 3.138 0 0 0 86.1 2.95a3.09 3.09 0 0 0-1.228-.25c-.448 0-.848.086-1.187.26a2.199 2.199 0 0 0-.662.497v-.191a.387.387 0 0 0-.214-.348.323.323 0 0 0-.14-.03h-1.315a.314.314 0 0 0-.254.116.377.377 0 0 0-.1.262v8.97c0 .1.034.188.1.258a.34.34 0 0 0 .254.103h1.341a.342.342 0 0 0 .244-.103.336.336 0 0 0 .11-.259v-3.06c.178.202.417.357.702.464.35.134.72.203 1.093.203.43 0 .848-.082 1.242-.248a3.124 3.124 0 0 0 1.04-.724c.305-.326.545-.709.707-1.128a3.93 3.93 0 0 0 .263-1.477c0-.54-.086-1.037-.263-1.477a3.387 3.387 0 0 0-.706-1.12zm-1.204 3.24c-.073.19-.18.362-.315.51a1.415 1.415 0 0 1-1.065.466c-.2.001-.4-.04-.584-.12a1.484 1.484 0 0 1-.49-.346 1.593 1.593 0 0 1-.32-.51 1.738 1.738 0 0 1-.115-.63c0-.224.04-.435.115-.631a1.532 1.532 0 0 1 .804-.846c.185-.086.386-.13.59-.129.215 0 .414.044.593.13.177.083.338.199.474.341a1.622 1.622 0 0 1 .425 1.135c0 .225-.037.436-.112.63zM95.298 2.89h-1.33a.339.339 0 0 0-.246.11.384.384 0 0 0-.108.266v.166a1.856 1.856 0 0 0-.602-.472 2.525 2.525 0 0 0-1.166-.258 3.227 3.227 0 0 0-2.284.964 3.554 3.554 0 0 0-.734 1.123 3.827 3.827 0 0 0-.275 1.477c0 .54.092 1.037.275 1.477.184.434.427.817.728 1.128a3.146 3.146 0 0 0 2.277.973c.437 0 .834-.088 1.173-.259.25-.13.456-.287.608-.471v.177a.34.34 0 0 0 .11.259.341.341 0 0 0 .244.104h1.33a.324.324 0 0 0 .25-.105.349.349 0 0 0 .102-.258V3.267a.377.377 0 0 0-.1-.262.325.325 0 0 0-.252-.115zM93.502 6.9a1.55 1.55 0 0 1-.312.511c-.136.143-.296.26-.473.344-.178.085-.38.129-.596.129-.207 0-.407-.044-.59-.13a1.501 1.501 0 0 1-.791-.855 1.766 1.766 0 0 1-.112-.62c0-.225.038-.436.112-.632.075-.193.181-.364.314-.504.137-.143.3-.26.478-.342.182-.085.382-.129.59-.129.215 0 .417.044.595.13.178.085.338.2.473.341a1.623 1.623 0 0 1 .424 1.135c0 .215-.037.424-.112.622zM108.567 6.094a2.265 2.265 0 0 0-.654-.402c-.247-.101-.509-.181-.785-.235l-1.014-.204c-.26-.05-.441-.117-.543-.203a.328.328 0 0 1-.136-.264c0-.11.063-.2.189-.282.137-.086.329-.13.566-.13.26 0 .518.053.757.157.243.106.471.226.67.36.295.187.546.162.727-.053l.487-.57a.543.543 0 0 0 .152-.357c0-.128-.064-.245-.185-.351-.207-.184-.533-.378-.971-.568-.437-.192-.987-.29-1.637-.29-.427 0-.82.058-1.168.172-.35.116-.65.276-.893.474-.245.204-.438.44-.57.713a2 2 0 0 0-.198.875c0 .56.167 1.017.496 1.358.328.333.766.56 1.304.67l1.054.232c.3.062.528.132.675.21.129.067.19.163.19.297 0 .12-.061.227-.188.324-.133.104-.342.155-.622.155a1.83 1.83 0 0 1-.831-.19 3.056 3.056 0 0 1-.678-.458.995.995 0 0 0-.307-.17c-.126-.037-.268.003-.431.13l-.583.461c-.169.145-.24.32-.209.522.029.194.19.394.491.62.269.193.614.368 1.029.518.415.151.901.229 1.453.229.444 0 .854-.058 1.215-.172.362-.119.681-.278.941-.48a2.056 2.056 0 0 0 .819-1.663c0-.319-.053-.6-.165-.836a1.843 1.843 0 0 0-.447-.6zM114.383 7.73a.363.363 0 0 0-.295-.192.55.55 0 0 0-.343.113c-.095.062-.198.11-.306.141a.75.75 0 0 1-.426.013.43.43 0 0 1-.181-.093.554.554 0 0 1-.143-.204.92.92 0 0 1-.059-.362v-2.46h1.731c.099 0 .188-.04.266-.117a.368.368 0 0 0 .112-.26V3.268a.369.369 0 0 0-.115-.268.38.38 0 0 0-.263-.109h-1.732V1.216a.354.354 0 0 0-.108-.27.347.347 0 0 0-.243-.104h-1.344a.36.36 0 0 0-.34.226.371.371 0 0 0-.027.148V2.89h-.767a.324.324 0 0 0-.255.115.385.385 0 0 0-.098.262V4.31a.4.4 0 0 0 .212.346c.044.021.092.032.14.03h.768v2.925c0 .39.069.726.2 1.003.132.274.305.504.514.676.217.178.465.31.731.388.27.084.551.126.833.126.385 0 .75-.061 1.094-.18a2.13 2.13 0 0 0 .861-.552c.152-.181.17-.381.046-.581l-.463-.76zM121.672 2.89h-1.329a.339.339 0 0 0-.244.11.39.39 0 0 0-.08.122.394.394 0 0 0-.027.144v.166a1.906 1.906 0 0 0-.605-.472c-.335-.173-.726-.258-1.168-.258-.42 0-.834.083-1.226.249a3.24 3.24 0 0 0-1.055.715 3.528 3.528 0 0 0-.734 1.123 3.79 3.79 0 0 0-.276 1.477c0 .54.092 1.037.275 1.477.184.434.428.817.729 1.128a3.138 3.138 0 0 0 2.273.973 2.59 2.59 0 0 0 1.175-.259c.255-.13.457-.287.612-.471v.177a.34.34 0 0 0 .108.259.343.343 0 0 0 .243.104h1.329a.335.335 0 0 0 .252-.105.364.364 0 0 0 .102-.258V3.267a.38.38 0 0 0-.1-.262.332.332 0 0 0-.115-.087.311.311 0 0 0-.139-.028zM119.876 6.9a1.534 1.534 0 0 1-.786.855 1.362 1.362 0 0 1-.594.129c-.207 0-.405-.044-.588-.13a1.516 1.516 0 0 1-.792-.855 1.757 1.757 0 0 1-.113-.62c0-.225.037-.436.112-.632.073-.187.179-.358.314-.504.138-.143.3-.26.479-.342.184-.086.385-.13.588-.129.217 0 .415.044.594.13.181.085.34.2.472.341.134.143.24.313.314.504a1.73 1.73 0 0 1 0 1.253zM128.978 7.64l-.763-.593c-.146-.118-.284-.15-.404-.1a.742.742 0 0 0-.279.205 2.527 2.527 0 0 1-.583.535c-.192.122-.444.183-.742.183-.219 0-.42-.04-.6-.122a1.423 1.423 0 0 1-.469-.342 1.575 1.575 0 0 1-.308-.51 1.751 1.751 0 0 1-.106-.617c0-.228.034-.438.106-.632.07-.192.173-.363.308-.503.135-.144.295-.26.472-.342.187-.088.391-.132.597-.13.298 0 .547.064.742.187.198.126.396.306.584.534.078.092.17.16.278.206.122.048.259.016.401-.101l.762-.594a.53.53 0 0 0 .201-.269.437.437 0 0 0-.034-.365 3.329 3.329 0 0 0-1.18-1.127c-.504-.291-1.108-.441-1.784-.441a3.519 3.519 0 0 0-2.51 1.033c-.322.322-.576.71-.747 1.137a3.68 3.68 0 0 0-.273 1.407c0 .495.093.968.273 1.402.173.424.427.808.747 1.128a3.527 3.527 0 0 0 2.51 1.034c.676 0 1.28-.149 1.784-.444a3.286 3.286 0 0 0 1.182-1.13.411.411 0 0 0 .055-.173.415.415 0 0 0-.023-.182.624.624 0 0 0-.197-.273zM136.06 9.045l-2.104-3.143 1.801-2.415c.094-.139.119-.272.075-.397-.031-.09-.116-.2-.334-.2h-1.425a.52.52 0 0 0-.234.058.482.482 0 0 0-.209.205L132.191 5.2h-.349V.363a.37.37 0 0 0-.099-.26.352.352 0 0 0-.253-.103h-1.332a.37.37 0 0 0-.337.22.346.346 0 0 0-.027.143V9.29c0 .103.038.193.11.259a.353.353 0 0 0 .254.104h1.333a.328.328 0 0 0 .251-.105.346.346 0 0 0 .075-.119.333.333 0 0 0 .024-.14V6.927h.386l1.571 2.446c.112.187.267.281.46.281h1.491c.226 0 .32-.11.358-.202.054-.13.038-.262-.047-.406zM102.863 2.89h-1.489a.389.389 0 0 0-.298.122.544.544 0 0 0-.13.249l-1.099 4.167h-.268l-1.182-4.167a.66.66 0 0 0-.113-.247.329.329 0 0 0-.264-.124h-1.544c-.199 0-.325.066-.372.193a.588.588 0 0 0-.002.37l1.887 5.865c.03.093.08.17.145.232a.388.388 0 0 0 .281.104h.798l-.066.19-.19.547a.872.872 0 0 1-.29.426.7.7 0 0 1-.442.148.956.956 0 0 1-.4-.09 1.842 1.842 0 0 1-.35-.209.62.62 0 0 0-.335-.115h-.016c-.13 0-.243.074-.334.216l-.474.708c-.193.304-.086.504.039.615.234.224.528.399.875.524.344.125.723.186 1.126.186.682 0 1.252-.187 1.689-.565.435-.376.756-.887.952-1.524l2.188-7.258c.05-.155.05-.284.005-.389-.037-.08-.125-.174-.327-.174z" fill="#ffffff"/>
  </svg>
`,kG=`
<svg id="inline-button-wordmark--grey" width="166" height="16" viewBox="0 0 166 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path
  d="M0.564068 6.26985L1.86515 6.10375C1.85184 5.15143 1.83489 3.71187 1.84942 3.45964C1.95955 1.67927 3.39982 0.16589 5.13056 0.0170127C5.23949 0.00839996 5.34842 0.0034784 5.45371 0.00101762C6.36645 -0.0209585 7.25272 0.313716 7.93 0.936113C8.62472 1.56238 9.07979 2.4864 9.14999 3.4055C9.16815 3.64174 9.1621 5.24002 9.1621 6.18249L10.4886 6.38305L10.4438 14.0767L5.47308 14.7657L0.519287 13.961L0.564068 6.26985ZM5.53359 5.63743L7.62016 5.95241C7.61169 4.80446 7.55965 3.12867 7.30548 2.68696C6.91939 2.0164 6.28156 1.62021 5.55901 1.60421H5.48276C4.7481 1.61406 4.10543 2.0004 3.71813 2.66727C3.44944 3.13236 3.39619 4.70972 3.3974 5.91181L5.53359 5.63743ZM22.5808 12.4378C21.8836 12.4378 21.293 12.3492 20.8089 12.172C20.372 12.0088 19.9719 11.7577 19.6325 11.4338C19.3256 11.1331 19.0833 10.7712 18.9208 10.3707C18.7637 9.95815 18.6612 9.52621 18.6158 9.08621H19.8358C19.8745 9.40119 19.9423 9.70141 20.0391 9.98686C20.136 10.2625 20.286 10.5085 20.4894 10.7251C20.6927 10.9318 20.959 11.0991 21.2882 11.2271C21.6271 11.3452 22.0579 11.4043 22.5808 11.4043C22.9197 11.4043 23.2295 11.36 23.5103 11.2714C23.8008 11.173 24.0525 11.0351 24.2655 10.858C24.4785 10.6808 24.6431 10.4692 24.7593 10.2231C24.8852 9.97701 24.9481 9.70633 24.9481 9.41103C24.9481 9.11574 24.9094 8.85982 24.8319 8.64327C24.7536 8.41559 24.6125 8.21568 24.4253 8.06745C24.196 7.88594 23.9347 7.75064 23.6555 7.6688C23.257 7.54201 22.849 7.4482 22.4355 7.38828C21.9393 7.31041 21.4491 7.19693 20.9686 7.04869C20.5808 6.92967 20.2133 6.75038 19.8794 6.51716C19.5939 6.29685 19.3607 6.01432 19.1968 5.69034C19.0418 5.35567 18.9644 4.9521 18.9644 4.47963C18.9644 4.07607 19.0467 3.70203 19.2113 3.35752C19.3759 3.00317 19.6034 2.69803 19.8939 2.44211C20.194 2.18619 20.5475 1.98441 20.9541 1.83676C21.3608 1.68911 21.811 1.61529 22.3048 1.61529C23.3505 1.61529 24.1784 1.86629 24.7884 2.36829C25.4081 2.86044 25.7711 3.57899 25.8777 4.52393H24.7448C24.6189 3.8546 24.3624 3.37721 23.9751 3.09176C23.5878 2.79646 23.031 2.64882 22.3048 2.64882C21.5883 2.64882 21.0461 2.81123 20.6782 3.13605C20.5037 3.28606 20.3648 3.47417 20.2717 3.68635C20.1787 3.89853 20.1339 4.12931 20.1408 4.36152C20.1408 4.61744 20.1698 4.84875 20.2279 5.05546C20.2957 5.25232 20.4167 5.42457 20.591 5.57222C20.775 5.71987 21.0267 5.85275 21.3463 5.97087C21.7689 6.09987 22.2012 6.19369 22.6389 6.25139C23.2198 6.33998 23.7281 6.4581 24.1639 6.60575C24.5996 6.75339 24.9675 6.94533 25.2677 7.18157C25.5678 7.4178 25.7905 7.70818 25.9358 8.05268C26.0907 8.39719 26.1681 8.82045 26.1681 9.32245C26.1681 9.76539 26.0761 10.1788 25.8922 10.5627C25.7149 10.9408 25.4627 11.2775 25.1515 11.5519C24.8319 11.8275 24.4495 12.0441 24.0041 12.2016C23.5684 12.359 23.094 12.4378 22.5808 12.4378ZM31.2066 12.4378C30.6741 12.4378 30.1803 12.3443 29.7252 12.1573C29.2906 11.9775 28.8956 11.7115 28.5633 11.3747C28.2268 11.0185 27.965 10.5966 27.7936 10.1345C27.6136 9.61796 27.5251 9.07309 27.5321 8.52515V8.40704C27.5321 7.82629 27.6193 7.29476 27.7936 6.81245C27.9679 6.3203 28.2099 5.90196 28.5198 5.55746C28.8393 5.2031 29.2169 4.93242 29.6526 4.7454C30.0883 4.54854 30.5676 4.45011 31.0905 4.45011C31.5262 4.45011 31.9473 4.52393 32.354 4.67158C32.7704 4.80938 33.1383 5.03085 33.4578 5.33599C33.7773 5.64112 34.0291 6.03977 34.213 6.53192C34.4067 7.01424 34.5035 7.5999 34.5035 8.28892V8.68756H28.7812C28.8102 9.57345 29.0281 10.2526 29.4348 10.7251C29.8414 11.1877 30.4369 11.419 31.2212 11.419C32.4121 11.419 33.085 10.9712 33.24 10.0754H34.4454C34.3099 10.8531 33.9516 11.4436 33.3707 11.8472C32.7897 12.2409 32.0684 12.4378 31.2066 12.4378ZM33.269 7.69833C33.2109 6.90104 32.9882 6.33014 32.6009 5.98563C32.2233 5.64112 31.7198 5.46887 31.0905 5.46887C30.4708 5.46887 29.9624 5.67065 29.5655 6.07422C29.1782 6.46794 28.9313 7.00932 28.8248 7.69833H33.269ZM39.3593 12.4378C38.8267 12.4378 38.3329 12.3492 37.8779 12.172C37.4401 11.9901 37.0407 11.7245 36.7014 11.3895C36.3636 11.0315 36.0973 10.6103 35.9172 10.1493C35.7268 9.63002 35.6332 9.07925 35.6412 8.52515V8.40704C35.6412 7.81645 35.738 7.28 35.9317 6.79769C36.1253 6.30553 36.3868 5.8872 36.716 5.54269C37.0548 5.19818 37.447 4.93242 37.8924 4.7454C38.3475 4.54854 38.8267 4.45011 39.3302 4.45011C39.7272 4.45011 40.1097 4.49932 40.4776 4.59775C40.8552 4.69618 41.1893 4.85367 41.4797 5.07022C41.7799 5.27693 42.0316 5.55253 42.235 5.89704C42.4383 6.24155 42.569 6.65988 42.6271 7.15204H41.4362C41.3393 6.54177 41.0924 6.10867 40.6955 5.85275C40.3082 5.59683 39.8531 5.46887 39.3302 5.46887C38.995 5.46599 38.6632 5.53649 38.3571 5.67557C38.0667 5.81338 37.8101 6.01024 37.5874 6.26616C37.3615 6.53514 37.1889 6.84598 37.0791 7.18157C36.9484 7.57626 36.8845 7.99063 36.8902 8.40704V8.52515C36.8902 9.47994 37.1178 10.2034 37.5729 10.6956C38.0376 11.1779 38.6379 11.419 39.3738 11.419C39.6449 11.419 39.9015 11.3797 40.1436 11.3009C40.6361 11.1497 41.0523 10.8113 41.3055 10.356C41.441 10.1197 41.5233 9.84413 41.5524 9.52915H42.6707C42.6338 9.9361 42.5204 10.3321 42.3366 10.6956C42.1663 11.0447 41.9293 11.3559 41.6395 11.611C41.349 11.8669 41.0101 12.0687 40.6228 12.2163C40.2355 12.364 39.8144 12.4378 39.3593 12.4378ZM46.9164 12.4378C46.5568 12.4406 46.199 12.3858 45.8562 12.2754C45.5441 12.1717 45.2605 11.9947 45.0284 11.7586C44.7829 11.4908 44.595 11.1741 44.4765 10.8284C44.3409 10.4544 44.2731 10.0016 44.2731 9.47009V4.58299H45.4786V9.41103C45.4786 10.0902 45.619 10.5873 45.8998 10.9023C46.1903 11.2172 46.6356 11.3747 47.236 11.3747C47.5071 11.3747 47.7685 11.3304 48.0202 11.2419C48.272 11.1533 48.4947 11.0204 48.6883 10.8432C48.882 10.666 49.0369 10.4446 49.1531 10.1788C49.2693 9.91303 49.3274 9.6079 49.3274 9.26339V4.58299H50.5328V12.3049H49.3274V11.0794C49.1531 11.4436 48.8578 11.7635 48.4414 12.0391C48.0348 12.3049 47.5264 12.4378 46.9164 12.4378ZM52.8239 4.58299H54.0294V5.97087C54.2715 5.53777 54.5765 5.18342 54.9444 4.90781C55.322 4.62236 55.8497 4.46979 56.5275 4.45011V5.60175C56.1799 5.61707 55.8346 5.66652 55.4963 5.7494C55.2039 5.81939 54.9308 5.95567 54.6975 6.14804C54.4729 6.35252 54.303 6.6116 54.2037 6.90104C54.0875 7.20618 54.0294 7.59498 54.0294 8.06745V12.3049H52.8239V4.58299ZM61.0347 12.4378C60.5021 12.4378 60.0083 12.3443 59.5533 12.1573C59.1186 11.9775 58.7236 11.7115 58.3914 11.3747C58.0549 11.0185 57.793 10.5966 57.6216 10.1345C57.4416 9.61796 57.3531 9.07309 57.3602 8.52515V8.40704C57.3602 7.82629 57.4473 7.29476 57.6216 6.81245C57.7959 6.3203 58.038 5.90196 58.3478 5.55746C58.6673 5.2031 59.0449 4.93242 59.4806 4.7454C59.9164 4.54854 60.3956 4.45011 60.9185 4.45011C61.3542 4.45011 61.7754 4.52393 62.1821 4.67158C62.5984 4.80938 62.9663 5.03085 63.2859 5.33599C63.6054 5.64112 63.8571 6.03977 64.0411 6.53192C64.2347 7.01424 64.3316 7.5999 64.3316 8.28892V8.68756H58.6092C58.6383 9.57345 58.8561 10.2526 59.2628 10.7251C59.6695 11.1877 60.2649 11.419 61.0492 11.419C62.2401 11.419 62.9131 10.9712 63.068 10.0754H64.2735C64.1379 10.8531 63.7797 11.4436 63.1987 11.8472C62.6178 12.2409 61.8964 12.4378 61.0347 12.4378ZM63.097 7.69833C63.0389 6.90104 62.8162 6.33014 62.429 5.98563C62.0513 5.64112 61.5478 5.46887 60.9185 5.46887C60.2988 5.46887 59.7905 5.67065 59.3935 6.07422C59.0062 6.46794 58.7593 7.00932 58.6528 7.69833H63.097ZM68.8968 12.4378C68.403 12.4378 67.9431 12.3541 67.5171 12.1868C67.1072 12.0141 66.7365 11.7578 66.4278 11.4338C66.1165 11.0803 65.8749 10.6693 65.7161 10.2231C65.5451 9.69956 65.4617 9.15057 65.4692 8.59898V8.48086C65.4692 7.89027 65.5564 7.3489 65.7307 6.85675C65.905 6.36459 66.147 5.94134 66.4569 5.58698C66.7667 5.22279 67.1395 4.94226 67.5752 4.7454C68.0109 4.54854 68.4902 4.45011 69.013 4.45011C69.6521 4.45011 70.1701 4.58791 70.5671 4.86352C70.964 5.12928 71.2739 5.44918 71.4966 5.82322V0.891819H72.702V12.3049H71.4966V10.9761C71.3901 11.1631 71.2448 11.3452 71.0609 11.5224C70.8713 11.7038 70.6617 11.8623 70.4363 11.9949C70.2066 12.1258 69.963 12.2298 69.7102 12.3049C69.4487 12.3935 69.1776 12.4378 68.8968 12.4378ZM69.0275 11.419C69.3761 11.419 69.7053 11.36 70.0152 11.2419C70.325 11.1237 70.5913 10.9466 70.814 10.7103C71.0367 10.4642 71.2109 10.1591 71.3368 9.79492C71.4724 9.42088 71.5401 8.98778 71.5401 8.49562V8.37751C71.5401 7.38335 71.3223 6.65004 70.8866 6.17757C70.4606 5.7051 69.8748 5.46887 69.1292 5.46887C68.374 5.46887 67.7834 5.72479 67.3573 6.23663C66.9313 6.74847 66.7183 7.47686 66.7183 8.4218V8.53992C66.7183 9.02223 66.7764 9.44549 66.8926 9.80968C67.0184 10.1739 67.183 10.4741 67.3864 10.7103C67.5994 10.9466 67.8463 11.1237 68.1271 11.2419C68.4079 11.36 68.708 11.419 69.0275 11.419ZM82.4716 12.4378C81.852 12.4378 81.3243 12.3 80.8886 12.0244C80.485 11.7813 80.146 11.4417 79.901 11.0351V12.3049H78.6955V0.891819H79.901V5.88228C80.0153 5.68531 80.1572 5.50626 80.3221 5.35075C80.5061 5.17357 80.7094 5.02101 80.9321 4.89305C81.1645 4.75524 81.4114 4.64697 81.6729 4.56822C81.9343 4.48948 82.2005 4.45011 82.4716 4.45011C82.9655 4.45011 83.4254 4.53869 83.8514 4.71587C84.2774 4.89305 84.6405 5.14897 84.9407 5.48363C85.2505 5.8183 85.4926 6.22679 85.6669 6.7091C85.8411 7.19141 85.9283 7.73278 85.9283 8.33321V8.45133C85.9283 9.04192 85.846 9.58329 85.6814 10.0754C85.5295 10.535 85.2929 10.9609 84.9843 11.3304C84.6852 11.6839 84.3133 11.9662 83.895 12.1573C83.4445 12.3492 82.96 12.4447 82.4716 12.4378ZM82.3555 11.419C83.1107 11.419 83.6868 11.173 84.0838 10.6808C84.4808 10.1788 84.6793 9.45533 84.6793 8.51039V8.39227C84.6793 7.90012 84.6163 7.47194 84.4904 7.10775C84.3829 6.77559 84.2099 6.46915 83.9821 6.2071C83.7841 5.96487 83.5294 5.77704 83.2414 5.66081C82.9581 5.53232 82.6511 5.46687 82.3409 5.46887C81.9924 5.46887 81.6632 5.52793 81.3533 5.64604C81.0537 5.7638 80.7852 5.95084 80.569 6.19234C80.3464 6.42857 80.1721 6.73371 80.0462 7.10775C79.9127 7.52209 79.8488 7.95635 79.8574 8.39227V8.51039C79.8574 9.4947 80.0898 10.228 80.5545 10.7103C81.0193 11.1828 81.6196 11.419 82.3555 11.419ZM89.6342 11.5076L86.6569 4.58299H87.9495L90.2733 10.1197L92.3792 4.58299H93.6137L89.4164 14.9921H88.1964L89.6342 11.5076ZM105.97 4.51532C105.618 4.13844 105.195 3.83755 104.727 3.63067C104.257 3.42601 103.751 3.32132 103.241 3.32307C102.698 3.32307 102.214 3.42888 101.804 3.64297C101.501 3.7934 101.229 4.00091 101.003 4.25447V4.01947C101.003 3.93064 100.979 3.84347 100.933 3.76781C100.888 3.69214 100.822 3.631 100.744 3.59129C100.691 3.56626 100.633 3.55364 100.574 3.55438H98.9827C98.9241 3.55245 98.8658 3.56433 98.8125 3.58909C98.7592 3.61385 98.7122 3.65082 98.6753 3.69711C98.5956 3.78474 98.5523 3.90019 98.5542 4.01947V15.0561C98.5542 15.1791 98.5954 15.2874 98.6753 15.3735C98.715 15.4152 98.7629 15.4479 98.8158 15.4698C98.8688 15.4916 98.9256 15.502 98.9827 15.5002H100.606C100.661 15.5001 100.715 15.4889 100.766 15.4671C100.817 15.4453 100.863 15.4135 100.901 15.3735C100.945 15.3333 100.979 15.284 101.002 15.229C101.025 15.174 101.036 15.1146 101.034 15.0548V11.2898C101.25 11.5384 101.539 11.7291 101.884 11.8607C102.307 12.0256 102.755 12.1105 103.207 12.1105C103.727 12.1105 104.233 12.0096 104.71 11.8054C105.185 11.599 105.613 11.2958 105.969 10.9146C106.338 10.5135 106.628 10.0422 106.824 9.52669C107.044 8.94733 107.152 8.33033 107.143 7.70941C107.143 7.045 107.038 6.43349 106.824 5.89212C106.631 5.38011 106.341 4.91182 105.97 4.51409V4.51532ZM104.513 8.50178C104.424 8.73555 104.295 8.94718 104.131 9.12928C103.969 9.31219 103.77 9.45789 103.547 9.55674C103.325 9.65558 103.085 9.70531 102.842 9.70264C102.6 9.70387 102.358 9.65342 102.136 9.55499C101.911 9.4556 101.71 9.31074 101.542 9.12928C101.375 8.94704 101.244 8.73407 101.155 8.50178C101.062 8.25439 101.015 7.99155 101.016 7.72663C101.016 7.45102 101.064 7.19141 101.155 6.95026C101.332 6.48635 101.682 6.1122 102.128 5.90935C102.352 5.80353 102.595 5.7494 102.842 5.75063C103.103 5.75063 103.343 5.80476 103.56 5.91058C103.774 6.0127 103.969 6.15542 104.134 6.33014C104.476 6.71058 104.661 7.21105 104.648 7.72663C104.648 8.00347 104.603 8.26308 104.513 8.50178ZM115.859 3.55684H114.249C114.193 3.55751 114.138 3.56987 114.087 3.59315C114.036 3.61643 113.99 3.65013 113.952 3.69219C113.868 3.78 113.821 3.8973 113.821 4.01947V4.22371C113.62 3.9808 113.372 3.78302 113.092 3.64297C112.654 3.42397 112.17 3.31511 111.681 3.32553C111.166 3.32821 110.657 3.43439 110.183 3.63795C109.708 3.84151 109.278 4.13843 108.917 4.51162C108.537 4.91069 108.236 5.37962 108.029 5.89335C107.801 6.47081 107.687 7.08847 107.696 7.71064C107.696 8.37505 107.807 8.98655 108.029 9.52792C108.251 10.0619 108.545 10.5331 108.91 10.9158C109.265 11.2945 109.693 11.5958 110.167 11.8016C110.641 12.0074 111.15 12.1133 111.665 12.113C112.194 12.113 112.675 12.0047 113.085 11.7943C113.388 11.6343 113.637 11.4412 113.821 11.2148V11.4326C113.82 11.4923 113.831 11.5516 113.854 11.6066C113.877 11.6615 113.911 11.7109 113.954 11.7512C113.993 11.7915 114.038 11.8236 114.089 11.8456C114.14 11.8676 114.194 11.879 114.249 11.8792H115.859C115.916 11.8812 115.972 11.8706 116.024 11.8483C116.077 11.826 116.124 11.7925 116.162 11.75C116.203 11.7085 116.235 11.6589 116.256 11.6043C116.277 11.5497 116.287 11.4912 116.285 11.4326V4.0207C116.287 3.90142 116.244 3.78597 116.164 3.69834C116.127 3.65337 116.08 3.61736 116.027 3.5929C115.975 3.56844 115.917 3.55613 115.859 3.55684ZM113.685 8.4907C113.601 8.72324 113.473 8.9368 113.308 9.11943C113.143 9.29538 112.95 9.43933 112.735 9.54269C112.52 9.64727 112.275 9.70141 112.014 9.70141C111.764 9.70141 111.521 9.64727 111.3 9.54146C111.079 9.4398 110.881 9.29437 110.717 9.11372C110.552 8.93306 110.425 8.72082 110.343 8.48947C110.253 8.24551 110.207 7.98712 110.207 7.72663C110.207 7.44979 110.253 7.19018 110.343 6.94903C110.433 6.71156 110.562 6.50116 110.723 6.32891C110.888 6.15296 111.086 6.00901 111.301 5.90812C111.521 5.80353 111.764 5.7494 112.015 5.7494C112.275 5.7494 112.52 5.80353 112.735 5.90935C112.951 6.01393 113.144 6.15542 113.308 6.32891C113.65 6.70961 113.834 7.21001 113.821 7.7254C113.821 7.98993 113.776 8.24709 113.685 8.4907ZM131.919 7.49901C131.685 7.28955 131.417 7.12228 131.127 7.00439C130.828 6.88012 130.511 6.78169 130.177 6.71525L128.95 6.46425C128.635 6.40273 128.416 6.3203 128.293 6.21448C128.242 6.17732 128.201 6.12853 128.172 6.07209C128.144 6.01565 128.128 5.95315 128.128 5.88966C128.128 5.75432 128.204 5.64358 128.357 5.54269C128.523 5.43688 128.755 5.38274 129.042 5.38274C129.357 5.38274 129.669 5.44795 129.958 5.57591C130.252 5.70633 130.528 5.85398 130.769 6.01885C131.126 6.24893 131.43 6.21817 131.649 5.95364L132.238 5.25232C132.351 5.13393 132.416 4.97752 132.422 4.81307C132.422 4.65558 132.345 4.51162 132.198 4.3812C131.948 4.15481 131.553 3.91612 131.023 3.68234C130.494 3.44611 129.829 3.32553 129.042 3.32553C128.525 3.32553 128.049 3.39689 127.628 3.53716C127.205 3.67988 126.842 3.87674 126.547 4.12036C126.251 4.37136 126.017 4.66173 125.858 4.99763C125.699 5.33341 125.617 5.70154 125.618 6.07422C125.618 6.76324 125.82 7.32552 126.218 7.74509C126.615 8.15481 127.145 8.43411 127.796 8.56945L129.072 8.8549C129.435 8.93118 129.711 9.01731 129.889 9.11328C130.045 9.19572 130.119 9.31383 130.119 9.47871C130.119 9.62635 130.045 9.758 129.892 9.87735C129.731 10.0053 129.478 10.0681 129.139 10.0681C128.79 10.0717 128.445 9.99161 128.133 9.83429C127.836 9.68469 127.56 9.49515 127.312 9.27077C127.202 9.17922 127.076 9.1084 126.941 9.0616C126.788 9.01608 126.616 9.0653 126.419 9.22155L125.714 9.78876C125.509 9.96717 125.423 10.1825 125.461 10.431C125.496 10.6697 125.691 10.9158 126.055 11.1939C126.38 11.4313 126.798 11.6467 127.3 11.8312C127.803 12.017 128.391 12.113 129.059 12.113C129.596 12.113 130.092 12.0416 130.529 11.9013C130.967 11.7549 131.354 11.5593 131.668 11.3108C131.98 11.0724 132.231 10.7631 132.404 10.4077C132.576 10.0523 132.663 9.66076 132.659 9.26462C132.659 8.87212 132.595 8.52638 132.46 8.23601C132.331 7.95492 132.147 7.70366 131.919 7.49778V7.49901ZM138.958 9.51193C138.923 9.445 138.872 9.3882 138.809 9.34687C138.747 9.30555 138.675 9.28105 138.601 9.27569C138.451 9.27322 138.305 9.3222 138.186 9.41473C138.071 9.49101 137.946 9.55007 137.815 9.58821C137.649 9.64412 137.47 9.64967 137.3 9.60421C137.219 9.58443 137.144 9.54519 137.081 9.48978C137.005 9.42056 136.946 9.33472 136.908 9.23878C136.855 9.09669 136.83 8.94521 136.836 8.79338V5.76662H138.931C139.051 5.76662 139.159 5.71741 139.253 5.62267C139.295 5.58108 139.329 5.5314 139.352 5.4765C139.376 5.42159 139.388 5.36254 139.389 5.30276V4.02193C139.389 3.96024 139.377 3.89918 139.353 3.84249C139.329 3.78579 139.294 3.73465 139.25 3.69219C139.165 3.60724 139.05 3.55916 138.931 3.55807H136.835V1.49717C136.838 1.43555 136.827 1.37406 136.805 1.31679C136.782 1.25952 136.748 1.20777 136.704 1.16497C136.627 1.08454 136.521 1.03854 136.41 1.03701H134.784C134.695 1.03555 134.609 1.06135 134.535 1.11101C134.462 1.16066 134.405 1.23182 134.372 1.31507C134.349 1.37287 134.338 1.43484 134.339 1.49717V3.55684H133.411C133.353 3.55549 133.294 3.5675 133.241 3.59199C133.188 3.61647 133.14 3.65281 133.102 3.69834C133.025 3.78687 132.982 3.90193 132.984 4.0207V5.304C132.985 5.39177 133.01 5.47753 133.055 5.55238C133.1 5.62724 133.164 5.68846 133.24 5.72971C133.294 5.75555 133.352 5.76908 133.41 5.76662H134.339V9.36551C134.339 9.84536 134.423 10.2588 134.581 10.5996C134.741 10.9367 134.951 11.2197 135.204 11.4313C135.466 11.6503 135.766 11.8128 136.088 11.9087C136.415 12.0121 136.755 12.0638 137.096 12.0638C137.562 12.0638 138.004 11.9887 138.421 11.8423C138.817 11.7053 139.175 11.4722 139.463 11.1631C139.647 10.9404 139.668 10.6943 139.518 10.4483L138.958 9.51316V9.51193ZM147.78 3.55684H146.171C146.116 3.55785 146.061 3.57036 146.01 3.59363C145.959 3.6169 145.914 3.65043 145.876 3.69219C145.835 3.73558 145.802 3.78651 145.779 3.84229C145.758 3.89876 145.746 3.95885 145.747 4.01947V4.22371C145.544 3.98167 145.295 3.78409 145.014 3.64297C144.609 3.43011 144.136 3.32553 143.601 3.32553C143.092 3.32553 142.591 3.42765 142.117 3.6319C141.638 3.83631 141.204 4.13534 140.84 4.51162C140.46 4.9102 140.158 5.37925 139.952 5.89335C139.722 6.47038 139.608 7.08828 139.618 7.71064C139.618 8.37505 139.729 8.98655 139.95 9.52792C140.173 10.0619 140.468 10.5331 140.833 10.9158C141.188 11.2943 141.614 11.5956 142.087 11.8014C142.56 12.0072 143.069 12.1132 143.584 12.113C144.076 12.1217 144.563 12.0125 145.006 11.7943C145.314 11.6343 145.559 11.4412 145.747 11.2148V11.4326C145.745 11.4921 145.756 11.5513 145.778 11.6062C145.801 11.6612 145.834 11.7106 145.877 11.7512C145.916 11.7913 145.961 11.8232 146.012 11.8452C146.062 11.8671 146.116 11.8787 146.171 11.8792H147.78C147.837 11.8806 147.893 11.8699 147.946 11.8476C147.998 11.8254 148.046 11.7921 148.085 11.75C148.166 11.6649 148.21 11.5508 148.208 11.4326V4.0207C148.21 3.90149 148.167 3.78617 148.087 3.69834C148.049 3.65272 148.002 3.61618 147.948 3.59129C147.895 3.56679 147.838 3.555 147.78 3.55684ZM145.606 8.4907C145.437 8.95456 145.095 9.33232 144.655 9.54269C144.43 9.64997 144.184 9.70423 143.936 9.70141C143.685 9.70141 143.446 9.64727 143.224 9.54146C143.004 9.43906 142.806 9.2934 142.642 9.11285C142.477 8.9323 142.349 8.72044 142.266 8.48947C142.175 8.24565 142.129 7.98721 142.129 7.72663C142.129 7.44979 142.174 7.19018 142.264 6.94903C142.353 6.71894 142.481 6.50855 142.645 6.32891C142.812 6.15296 143.008 6.00901 143.224 5.90812C143.447 5.8023 143.69 5.74817 143.936 5.7494C144.199 5.7494 144.438 5.80353 144.655 5.90935C144.874 6.01393 145.066 6.15542 145.226 6.32891C145.388 6.50486 145.517 6.71402 145.606 6.94903C145.796 7.44486 145.796 7.99486 145.606 8.4907ZM156.622 9.40119L155.699 8.67157C155.522 8.52638 155.355 8.48701 155.21 8.54853C155.079 8.60436 154.964 8.69079 154.872 8.80076C154.673 9.05649 154.434 9.27863 154.167 9.45902C153.934 9.60913 153.629 9.68418 153.269 9.68418C153.004 9.68418 152.76 9.63496 152.542 9.53407C152.327 9.43495 152.134 9.2917 151.975 9.11328C151.812 8.93013 151.686 8.71715 151.602 8.48578C151.515 8.24262 151.471 7.98546 151.474 7.72663C151.474 7.4461 151.515 7.18772 151.602 6.94903C151.687 6.71279 151.811 6.50239 151.975 6.33014C152.138 6.15296 152.332 6.01024 152.546 5.90935C152.772 5.80107 153.019 5.74694 153.269 5.7494C153.629 5.7494 153.931 5.82814 154.167 5.97948C154.406 6.13451 154.646 6.35598 154.873 6.63651C154.968 6.7497 155.079 6.83337 155.21 6.88997C155.358 6.94903 155.523 6.90965 155.695 6.7657L156.618 6.03485C156.732 5.95424 156.817 5.83809 156.861 5.70387C156.886 5.63045 156.896 5.55227 156.889 5.47473C156.882 5.39719 156.858 5.32214 156.82 5.25478C156.464 4.67928 155.973 4.20275 155.391 3.86813C154.781 3.51009 154.05 3.32553 153.232 3.32553C152.668 3.32238 152.109 3.43311 151.588 3.65129C151.066 3.86947 150.593 4.19076 150.194 4.59652C149.805 4.99271 149.497 5.4701 149.29 5.99547C149.07 6.54494 148.957 7.13314 148.96 7.72663C148.96 8.33567 149.072 8.91765 149.29 9.45164C149.5 9.97332 149.807 10.4458 150.194 10.8395C150.593 11.2451 151.067 11.5663 151.588 11.7846C152.11 12.003 152.668 12.1142 153.232 12.1117C154.05 12.1117 154.781 11.9284 155.391 11.5654C155.976 11.232 156.468 10.7537 156.822 10.1751C156.86 10.1101 156.882 10.0374 156.889 9.96225C156.896 9.88643 156.886 9.80992 156.861 9.73832C156.813 9.60626 156.731 9.49007 156.622 9.40242V9.40119ZM165.194 11.1299L162.647 7.26277L164.827 4.29138C164.941 4.12036 164.971 3.95672 164.918 3.80292C164.88 3.69219 164.777 3.55684 164.514 3.55684H162.789C162.69 3.55775 162.593 3.58219 162.506 3.62821C162.398 3.68359 162.309 3.77173 162.253 3.88043L160.511 6.39904H160.089V0.447649C160.091 0.329229 160.048 0.214475 159.969 0.127748C159.929 0.0869473 159.881 0.0547186 159.828 0.0329554C159.776 0.0111921 159.719 0.000333517 159.663 0.00101762H158.051C157.964 0.00131009 157.88 0.0270233 157.807 0.0750545C157.735 0.123086 157.678 0.191382 157.643 0.271703C157.62 0.327334 157.608 0.387308 157.61 0.447649V11.4313C157.61 11.5581 157.656 11.6688 157.743 11.75C157.783 11.7911 157.831 11.8236 157.884 11.8456C157.937 11.8676 157.993 11.8786 158.051 11.878H159.664C159.721 11.8798 159.777 11.8692 159.83 11.8469C159.882 11.8246 159.929 11.7912 159.968 11.7488C160.007 11.7068 160.038 11.657 160.058 11.6024C160.08 11.5477 160.09 11.489 160.087 11.4301V8.52392H160.555L162.456 11.5335C162.592 11.7635 162.779 11.8792 163.013 11.8792H164.817C165.091 11.8792 165.205 11.7439 165.251 11.6307C165.316 11.4707 165.297 11.3083 165.194 11.1311V11.1299ZM125.015 3.55684H123.213C123.146 3.55424 123.079 3.56628 123.017 3.59218C122.954 3.61807 122.898 3.6572 122.852 3.70695C122.774 3.79331 122.72 3.89895 122.695 4.01332L121.365 9.14035H121.041L119.61 4.01332C119.586 3.90347 119.539 3.79998 119.473 3.70941C119.435 3.66072 119.386 3.62162 119.331 3.59516C119.276 3.5687 119.215 3.55559 119.154 3.55684H117.285C117.044 3.55684 116.892 3.63805 116.835 3.79431C116.786 3.94184 116.785 4.10149 116.832 4.24955L119.116 11.4658C119.152 11.5802 119.213 11.675 119.292 11.7512C119.337 11.7944 119.391 11.828 119.449 11.8499C119.507 11.8719 119.57 11.8818 119.632 11.8792H120.598L120.518 12.113L120.288 12.786C120.225 12.9927 120.103 13.1754 119.937 13.3101C119.784 13.4312 119.595 13.4954 119.402 13.4922C119.234 13.4914 119.069 13.4536 118.918 13.3815C118.768 13.312 118.625 13.2257 118.494 13.1243C118.375 13.0381 118.234 12.9889 118.089 12.9829H118.069C117.912 12.9829 117.775 13.0739 117.665 13.2486L117.091 14.1197C116.858 14.4938 116.987 14.7399 117.139 14.8764C117.422 15.152 117.778 15.3673 118.198 15.5211C118.614 15.6749 119.073 15.75 119.56 15.75C120.386 15.75 121.076 15.5199 121.605 15.0548C122.131 14.5922 122.52 13.9635 122.757 13.1797L125.405 4.24955C125.465 4.05884 125.465 3.90012 125.411 3.77093C125.366 3.6725 125.26 3.55684 125.015 3.55684Z"
  fill="#838383"
/>
</svg>
`,EG=`
  <button type="button" id="apple-pay-close-button">
    <svg width="10" height="9" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M5.572 4.033L8.89.71a.4.4 0 0 0-.566-.566L5.003 3.459 1.681.145a.4.4 0 0 0-.566.566L4.44 4.033
      1.115 7.354a.398.398 0 0 0 0 .566.4.4 0 0 0 .566 0l3.322-3.33 3.322 3.33a.4.4 0 0 0 .566-.566L5.57 4.033z"
        fill="white"
      />
    </svg>
  </button>
`,SG=`
<svg width="74" height="19" viewBox="0 0 74 19" fill="none" xmlns="http://www.w3.org/2000/svg" id="vault-logo">
  <g clip-path="url(#clip0_9910_9664)">
    <path
      d="M32.1273 15.8163H28.9432C28.6448 15.8163 28.4481 15.6622 28.3497 15.3507L25.1886 6.20188C25.1165 6.01825 25.1296 5.85101 25.2214 5.70345C25.3132 5.55589 25.451 5.48047 25.6346 5.48047H27.9693C28.2513 5.48047 28.435 5.63787 28.5202 5.94611L30.6648 12.9077L32.5536 5.94611C32.6388 5.63459 32.829 5.48047 33.1274 5.48047H35.4195C35.6031 5.48047 35.7441 5.55589 35.8425 5.70345C35.9409 5.85101 35.954 6.01825 35.8851 6.20188L32.7241 15.3507C32.6257 15.6622 32.4257 15.8163 32.1305 15.8163H32.1273Z"
      fill="#343C43" />
    <path
      d="M37.6361 14.5842C36.6097 13.5644 36.0981 12.2495 36.0981 10.6362C36.0981 9.02283 36.6097 7.71118 37.6361 6.69792C38.6624 5.68795 39.8757 5.17969 41.2759 5.17969C41.9416 5.17969 42.5384 5.31085 43.0696 5.57318C43.6008 5.83551 43.9943 6.16998 44.2468 6.57988V5.94373C44.2468 5.81584 44.2927 5.70763 44.3845 5.61581C44.4763 5.524 44.578 5.47809 44.6927 5.47809H46.8373C46.9652 5.47809 47.0701 5.524 47.1554 5.61581C47.2406 5.70763 47.2833 5.81584 47.2833 5.94373V15.3679C47.2833 15.4958 47.2406 15.6008 47.1554 15.686C47.0701 15.7713 46.9652 15.8139 46.8373 15.8139H44.6927C44.578 15.8139 44.4763 15.7713 44.3845 15.686C44.2927 15.6008 44.2468 15.4958 44.2468 15.3679V14.7088C43.991 15.1187 43.6008 15.4565 43.0696 15.7155C42.5384 15.9779 41.935 16.109 41.2562 16.109C39.8691 16.109 38.6624 15.6008 37.6361 14.581V14.5842ZM39.9151 8.79985C39.433 9.31795 39.1936 9.93443 39.1936 10.6558C39.1936 11.3772 39.433 11.997 39.9151 12.5118C40.3971 13.0299 40.9972 13.2857 41.7186 13.2857C42.44 13.2857 43.0401 13.0266 43.5221 12.5118C44.0041 11.997 44.2435 11.3772 44.2435 10.6558C44.2435 9.93443 44.0041 9.31467 43.5221 8.79985C43.0401 8.28502 42.44 8.02597 41.7186 8.02597C40.9972 8.02597 40.3938 8.28502 39.9151 8.79985Z"
      fill="#343C43" />
    <path
      d="M51.6315 5.9016V11.2302C51.6315 11.9385 51.8086 12.4959 52.1627 12.9058C52.5169 13.3157 53.0415 13.5223 53.7334 13.5223C54.4253 13.5223 54.9401 13.319 55.3139 12.9058C55.6878 12.4959 55.878 11.9516 55.878 11.2728V5.9016C55.878 5.78683 55.9239 5.68845 56.0157 5.60319C56.1075 5.51794 56.2092 5.47531 56.3239 5.47531H58.4685C58.6095 5.47531 58.7242 5.52122 58.8095 5.61303C58.8948 5.70485 58.9374 5.81306 58.9374 5.94094V15.3652C58.9374 15.4931 58.8948 15.598 58.8095 15.6832C58.7242 15.7685 58.6128 15.8111 58.4685 15.8111H56.3239C56.196 15.8111 56.0911 15.7718 56.0058 15.6931C55.9206 15.6144 55.878 15.5127 55.878 15.3848V14.7257C55.1139 15.6472 54.081 16.1062 52.7792 16.1062C51.4774 16.1062 50.4707 15.7062 49.7132 14.9061C48.9557 14.106 48.5786 13.0501 48.5786 11.7319V5.89504C48.5786 5.78027 48.6278 5.68189 48.7262 5.59664C48.8246 5.51138 48.9295 5.46875 49.0442 5.46875H51.1658C51.2937 5.46875 51.4019 5.51138 51.4938 5.59664C51.5856 5.68189 51.6315 5.78027 51.6315 5.89504V5.9016Z"
      fill="#343C43" />
    <path
      d="M62.9872 15.8148C62.0658 15.8148 61.387 15.582 60.9509 15.113C60.5115 14.6474 60.2917 14.0178 60.2917 13.2243V1.42267C60.2917 1.29478 60.3344 1.18657 60.4196 1.09475C60.5049 1.00294 60.6164 0.957031 60.7607 0.957031H62.8823C63.0233 0.957031 63.138 1.00294 63.2233 1.09475C63.3085 1.18657 63.3512 1.29478 63.3512 1.42267V12.6078C63.3512 12.8045 63.4069 12.9652 63.5217 13.0865C63.6332 13.2079 63.7906 13.2669 63.9873 13.2669H64.6464C64.9448 13.2669 65.0924 13.4144 65.0924 13.7129V15.2409C65.0924 15.6246 64.8956 15.8148 64.4989 15.8148H62.9905H62.9872Z"
      fill="#343C43" />
    <path
      d="M66.722 12.7378V8.04861H65.3644C65.2365 8.04861 65.1316 8.00271 65.0463 7.91089C64.9611 7.81907 64.9185 7.71086 64.9185 7.58298V5.94997C64.9185 5.82208 64.9611 5.71387 65.0463 5.62206C65.1316 5.53024 65.2365 5.48433 65.3644 5.48433H66.722V2.74626C66.722 2.60526 66.7679 2.49049 66.8597 2.40523C66.9515 2.31997 67.0597 2.27734 67.1876 2.27734H69.3518C69.4666 2.27734 69.5683 2.31997 69.6601 2.40523C69.7519 2.49049 69.7978 2.60198 69.7978 2.74626V5.48433H72.7064C72.8343 5.48433 72.9458 5.53024 73.0474 5.62206C73.1458 5.71387 73.195 5.82208 73.195 5.94997V7.58298C73.195 7.69775 73.1458 7.80268 73.0474 7.90105C72.949 7.99943 72.8343 8.04861 72.7064 8.04861H69.7978V12.0164C69.7978 12.4689 69.9027 12.7804 70.1159 12.9509C70.329 13.1214 70.5684 13.2067 70.8373 13.2067C71.1193 13.2067 71.4308 13.1083 71.7718 12.9083C72.1555 12.6689 72.4441 12.6951 72.6408 12.9935L73.3852 14.1806C73.5557 14.4495 73.5327 14.7052 73.3229 14.9446C72.6146 15.6792 71.5948 16.0497 70.2667 16.0497C69.2764 16.0497 68.437 15.7742 67.7516 15.2234C67.0663 14.6725 66.722 13.8428 66.722 12.741V12.7378Z"
      fill="#343C43" />
    <path
      d="M15.2266 0H4.43496C2.26089 0 0.5 1.76089 0.5 3.93496V14.7266C0.5 16.9006 2.26089 18.6615 4.43496 18.6615H15.2266C17.4006 18.6615 19.1615 16.9006 19.1615 14.7266V3.93496C19.1615 1.76089 17.4006 0 15.2266 0ZM15.079 12.2312L12.1442 14.6118C11.9114 14.8086 11.5507 14.6807 11.4949 14.379L10.8161 11.8934C10.7702 11.6934 10.8489 11.4868 11.0096 11.3589C11.4425 11.0113 11.7179 10.4801 11.7179 9.8833C11.7179 8.44048 10.098 7.37476 8.5765 8.40113C8.48468 8.46344 8.40598 8.54214 8.34368 8.63723C7.63539 9.68983 7.92723 10.7883 8.65192 11.3655C8.8126 11.4934 8.88474 11.6967 8.84211 11.8967L8.22891 14.3823C8.17317 14.6839 7.81246 14.8118 7.57964 14.6151L4.57924 12.2344C4.47431 12.1262 4.41856 11.9787 4.4284 11.8278L4.77271 6.69271C4.78582 6.49268 4.91371 6.31561 5.09734 6.23691L9.41924 4.03661C9.68157 3.9284 9.97341 3.9284 10.2357 4.03661L14.5576 6.23691C14.7445 6.31561 14.8691 6.49268 14.8855 6.69271L15.2299 11.8278C15.2397 11.9787 15.1839 12.1262 15.079 12.2344V12.2312Z"
      fill="#343C43" />
  </g>
  <defs>
    <clipPath id="clip0_9910_9664">
      <rect width="73" height="18.6615" fill="white" transform="translate(0.5)" />
    </clipPath>
  </defs>
</svg>
`,s4={height:"50px",width:"auto",borderRadius:"3px",padding:"10px",locale:"en",type:"pay"},$7=function(t){return t&&Kf(t)==="object"?Object.keys(s4).reduce((function(e,r){return ns(ns({},e),{},OI({},r,t[r]||s4[r]))}),{}):s4},CG=`
  .pre-checkout-modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100vw;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.75);
    transition: all 0.2s ease;
  }

  .pre-checkout-modal.show {
    display: block;
  }

  .pre-checkout-modal__content {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    margin-left: auto;
    margin-right: auto;
    background-color: #fefefe;
    padding: 20px;
    padding-bottom: max(30px, env(safe-area-inset-bottom));
    width: 100%;
    border-radius: 6px 6px 0 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    max-width: 350px;

    box-sizing: border-box;
    transform: translateY(238px);
    transition: transform 0.3s cubic-bezier(.16,.81,.32,1);
  }

  .modal-wrapper {
    width: 100%;
  }

  .payment-info {
    position: relative;
    padding-bottom: 15px;
    border-bottom: solid 1px whitesmoke;
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    width: 100%;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu",
      "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
  }

  .customer-email {
    color: #737373;
    font-size: 13px;
    line-height: 16px;
  }

  .customer-info {
    flex: 1;
    text-align: right;
  }

  .merchant-logo {
    display: flex;
    align-items: center;
    height: 30px;
  }
  .transaction-amount {
    margin-top: 5px;
    font-size: 13px;
    line-height: 16px;
    color: #737373;
  }

  .amount {
    color: #29b263;
    font-weight: bold;
  }

  @media only screen and (min-width: 500px) {
    .pre-checkout-modal__content {
      bottom: 0;
      top: 0;
      margin: auto;
      border-radius: 6px;
      height: fit-content;
    }
  }

  .pre-checkout-modal__content.show {
    transform: translateY(0);
    margin: 0 auto;
    margin-top: 100px;
  }

  .pre-checkout-modal__content > * {
    margin-top: 0;
    margin-bottom: 40px;
  }
  .pre-checkout-modal__content > *:last-child {
    margin-bottom: 0;
  }

  .pre-checkout-modal__content svg {
    margin: auto;
    width: 100%;
  }

  #inline-button-wordmark--white {
    position: absolute;
    bottom: -50px;
    margin: auto;
    left: 0;
    right: 0;
    width: fit-content;
  }

  #inline-button-wordmark--grey {
    display: none;
  }

  .pre-checkout-modal__content #apple-pay-mark--light {
    margin-bottom: 16px;
  }

  .pre-checkout-modal p {
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu",
      "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
    color: #4E4E4E;
    line-height: 140%;
    font-size: 14px;
    font-weight: 500;
    margin: 0;
    padding: 0 20px;
    text-align: center;
    letter-spacing: -0.3px;
  }

  .pre-checkout-modal button {
    height: 42px;
    width: 100%;
    
    box-sizing: border-box;
    border-radius: 3px;
    font-size: 14px;
    line-height: 24px;
    cursor: pointer;
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu",
      "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
  }

  .pre-checkout-modal .open-paystack-pop-button {
    background: #FAFAFA;
    border: 1px solid #F2F3F3;
    color: #4E4E4E;
    font-weight: 500;
  }

  .pre-checkout-modal .open-paystack-pop-button:hover, 
  .pre-checkout-modal .open-paystack-pop-button:active, 
  .pre-checkout-modal .open-paystack-pop-button:focus {
    background: #F2F3F3;
  }

  .pre-checkout-modal .pay-with-vault-button {
    font-weight: 700;
    background: #44b669;
    background: linear-gradient(to bottom, #44b669 0%, #40ad57 100%);
    border: solid 1px #49a861;
    text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);
    outline: none;
    color: white;
    transition: all 300ms;
  }

  .pre-checkout-modal .vault-instruction {
    color: #2f3d4d;
    font-size: 14px;
    letter-spacing: normal;
    line-height: 1.4;
    margin: 0 auto 24px;
    padding: 0;
  }
  .vault-logo-container {
    width: 74px;
    height: 20px;
    margin: 0 auto 24px
  }
  .vault-logo-container img {
    height: 100%;
    width: 100%;
    border-radius: 8px;
  }
  .vault-divider {
    margin-bottom: 16px;
    margin-top: 24px;
    position: relative;
  }
  .vault-divider__container {
    align-items: center;
    bottom: 0;
    display: flex;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
  }
  .vault-divider__line {
    border: 1px dashed #ccced0;
    width: 100%;
  }
  .vault-divider__text-container {
    display: flex;
    justify-content: center;
    position: relative;
  }
  .vault-divider__text {
    background-color: #fff;
    color: #999da1;
    font-size: 14px;
    font-weight: 500;
    letter-spacing: -.3px;
    line-height: 19.6px;
    margin-bottom: 2px;
    padding: 0 8px;
  }

  #payment-request-button {
    width: 100%;
    height: fit-content;
    margin: 24px 0 16px 0;
  }

  #paystackpop-button {
    padding: 0 16px;
  }

  #apple-pay-close-button {
    position: absolute;
    text-align: center;
    top: 0;
    right: -26px;
    height: 16px;
    width: 16px;
    padding: 0;
    display: inline-block;
    z-index: 3;
    border-radius: 50%;
    background: transparent;
    transition: all 300ms;
    outline: none;
    cursor: pointer;
    border: none;
  }

  #apple-pay-close-button svg {
    width: initial;
  }
  
  #apple-pay-close-button:hover {
    background-color: #e22b28;
  }

  @media only screen and (max-width: 500px) {
    .pre-checkout-modal__content {
      max-width: 500px;
      border-radius: 0;
      padding-bottom: 0;
    }

    .modal-wrapper {
      padding: 0;
    }

    .vault-logo-container {
      width: 74px;
      height: 20px;
    }

    #inline-button-wordmark--white {
      display: none
    }
    
    #inline-button-wordmark--grey {
      display: block;
      width: 100%;
      margin: 16px 0;
      height: 13px;
    }

    #apple-pay-close-button {
      display: none;
    }
  }
`,H7=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return Number(parseFloat(t/100).toFixed(2))},q7={headers:{accept:"application/json, text/plain, */*","accept-language":"en-GB,en-US;q=0.9,en;q=0.8","content-type":"application/x-www-form-urlencoded","sec-ch-ua-mobile":"?0","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"cross-site"},referrerPolicy:"no-referrer-when-downgrade",method:"POST",mode:"cors",credentials:"omit"};function W7(t){return Object.keys(t).reduce((function(e,r){var n=encodeURIComponent(r),i=encodeURIComponent(t[r]),s="".concat(n,"=").concat(i);return[].concat(MI(e),[s])}),[]).join("&")}var TG=function(t){return{biannually:"BIANNUAL PLAN",annually:"ANNUAL PLAN"}[t]||"".concat(t.toUpperCase()," PLAN")},$I=function(){try{return window.location&&window.location.protocol==="https:"&&window.ApplePaySession&&window.ApplePaySession.supportsVersion(Uo.applePayVersion)}catch{return!1}},G3=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return $I()&&t.includes("apple_pay")};function NG(){var t=0;return Array.from(document.querySelectorAll("body *")).forEach((function(e){var r=window.getComputedStyle(e),n=parseFloat(r.zIndex);!Number.isNaN(n)&&n>t&&(t=n)})),t}function a4(t){var e=document.createElement("iframe");return e.setAttribute("frameBorder","0"),e.setAttribute("allowtransparency","true"),e.id=t,e.style.display="none",e}function Bx(t){return t.querySelector("apple-pay-button")||t.querySelector("#apple-pay-button")}function Z2(t){return document.querySelector("#".concat(t))}function G7(t,e,r){var n=e.channels,i=n===void 0?[]:n,s=e.styles,a=s===void 0?{}:s,o={applePay:!1};return new Promise((function(l,c){if(t)if(G3(i)){if(Bx(t))return o.applePay=!0,void l(o);(function(d,p){var g=p.container,m=p.integrity;return new Promise((function(w,y){var k=document.createElement("script");k.src=d,k.crossOrigin="anonymous",m&&(k.integrity=m),k.addEventListener("load",(function(){w(!0)})),k.addEventListener("error",(function(){k.remove(),y(!1)})),g?g.appendChild(k):document.head.appendChild(k)}))})("https://applepay.cdn-apple.com/jsapi/v1.1.0/apple-pay-sdk.js",{container:t,integrity:"sha384-z/6BVHCcSypLSykOVpaT1PQWHOOgU45uOOlMkgi/bElX4yFqmChNMb7qiv80wFav"}).then((function(){if(r&&r!==1077497&&window&&!Array.isArray(window.webpackJsonp))throw new Error("Incorrect data type for 'webpackJsonp', expected array, got ".concat(Kf(window.webpackJsonp),". Switching to fallback apple pay button"));(function(d,p){var g,m,w,y,k,T=p.styles,O=p.theme,P=document.createElement("style"),V=(m=(g=T).height,w=g.width,y=g.borderRadius,k=g.padding,`
  apple-pay-button {
    --apple-pay-button-width: `.concat(w,`;
    --apple-pay-button-height: `).concat(m,`;
    --apple-pay-button-border-radius: `).concat(y,`;
    --apple-pay-button-padding: `).concat(k,`;
    --apple-pay-button-box-sizing: border-box;
    width: `).concat(w,`;
  }
`));P.type="text/css",P.styleSheet?P.styleSheet.cssText=V:P.appendChild(document.createTextNode(V)),d.appendChild(P);var Y=document.createElement("apple-pay-button");Y.setAttribute("buttonstyle",O==="light"?"white":"black"),Y.setAttribute("type",T.type),Y.setAttribute("locale",T.locale),d.appendChild(Y)})(t,{styles:$7(a.applePay),theme:a.theme}),o.applePay=!0,l(o)})).catch((function(){(function(d,p){var g,m,w,y,k,T,O,P=p.styles,V=p.theme,Y=document.createElement("style"),G=(m=(g=P).height,w=g.width,y=g.borderRadius,k=g.padding,T=g.type,O=g.locale,`
  @supports (-webkit-appearance: -apple-pay-button) { 
    .apple-pay-button {
        display: inline-block;
        -webkit-appearance: -apple-pay-button;
        width: `.concat(w,`;
        height: `).concat(m,`;
        border-radius: `).concat(y,`;
        padding: `).concat(k,`;
        -apple-pay-button-type: `).concat(T,`;
        -webkit-locale: `).concat(O,`;
    }
    .apple-pay-button-black {
        -apple-pay-button-style: black;
    }
    .apple-pay-button-white {
        -apple-pay-button-style: white;
    }
    .apple-pay-button-white-with-line {
        -apple-pay-button-style: white-outline;
    }
  }

  @supports not (-webkit-appearance: -apple-pay-button) {
    .apple-pay-button {
        display: inline-block;
        background-size: 100% 60%;
        background-repeat: no-repeat;
        background-position: 50% 50%;
        border-radius: 5px;
        padding: 0px;
        box-sizing: border-box;
        min-width: 200px;
        min-height: 32px;
        max-height: 64px;
    }
    .apple-pay-button-black {
        background-image: -webkit-named-image(apple-pay-logo-white);
        background-color: black;
    }
    .apple-pay-button-white {
        background-image: -webkit-named-image(apple-pay-logo-black);
        background-color: white;
    }
    .apple-pay-button-white-with-line {
        background-image: -webkit-named-image(apple-pay-logo-black);
        background-color: white;
        border: .5px solid black;
    }
  }
`));Y.type="text/css",Y.styleSheet?Y.styleSheet.cssText=G:Y.appendChild(document.createTextNode(G)),d.appendChild(Y);var L=document.createElement("button");L.classList.add("apple-pay-button",V==="light"?"apple-pay-button-white":"apple-pay-button-black"),L.id="apple-pay-button";var N=document.createElement("span");N.classList.add("logo"),L.appendChild(N),d.appendChild(L)})(t,{styles:$7(a.applePay),theme:a.theme}),o.applePay=!0,l(o)}))}else c("No wallet payment method is available on this device");else c("Container to mount elements was not provided")}))}function AG(t){for(;t.firstChild;)t.removeChild(t.firstChild)}var HI="payment-request-button",qI="paystackpop-button",WI="pay-with-vault-button";function GI(t){var e=document.createElement("button");return e.id=qI,e.className="open-paystack-pop-button",e.innerText=t,e}function K7(t){return t.querySelector("#".concat(qI))}function KI(){var t=document.createElement("div");return t.id=HI,t}function o4(t){return t.querySelector("#".concat(HI))}function IG(){var t=document.createElement("button");return t.className="pay-with-vault-button",t.id=WI,t.innerText="Pay with Vault",t}function PG(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=document.createElement("div");r.className="vault-logo-container",r.innerHTML=SG,t.appendChild(r);var n=document.createElement("p");n.id="instruction",n.className="vault-instruction",n.innerHTML="Access your saved cards and bank details for faster, more secure payments",t.appendChild(n);var i=IG();t.appendChild(i);var s=document.createElement("div");if(s.className="vault-divider",s.innerHTML='<div id="vault-divider" class="vault-divider__container"><div class="vault-divider__line"></div></div><div class="vault-divider__text-container"><span class="vault-divider__text">or</span></div>',t.appendChild(s),e.canPayWithApplePay){var a=KI();t.appendChild(a)}if(e.hasOtherPaymentMethods){var o=GI("Use other payment methods");t.appendChild(o)}}function RG(t,e){var r=e.hasOtherPaymentMethods,n=document.createElement("div");n.innerHTML=`
  <svg width="51" height="32" viewBox="0 0 51 32" fill="none" xmlns="http://www.w3.org/2000/svg" id="apple-pay-mark--light">
    <g>
    <path d="M46.0162 0H4.98386C4.81297 0 4.64177 0 4.47118 0.000996555C4.32698 0.00202331 4.18311 0.00362383 4.03925 0.00754966C3.72548 0.0160355 3.40903 0.0345472 3.09919 0.0902335C2.7844 0.146886 2.49148 0.239294 2.20571 0.384791C1.92477 0.52766 1.66757 0.71453 1.44468 0.937516C1.22169 1.1605 1.03482 1.41728 0.891977 1.69852C0.74645 1.98429 0.653982 2.27731 0.597722 2.59234C0.541737 2.90227 0.523101 3.21866 0.514645 3.53209C0.51078 3.67596 0.509122 3.81982 0.508183 3.96366C0.507186 4.13461 0.507519 4.30545 0.507519 4.4767V27.5236C0.507519 27.6949 0.507186 27.8654 0.508183 28.0367C0.509122 28.1805 0.51078 28.3244 0.514645 28.4683C0.523101 28.7814 0.541737 29.0978 0.597722 29.4077C0.653982 29.7228 0.74645 30.0157 0.891977 30.3015C1.03482 30.5827 1.22169 30.8399 1.44468 31.0625C1.66757 31.2859 1.92477 31.4727 2.20571 31.6152C2.49148 31.7611 2.7844 31.8535 3.09919 31.9102C3.40903 31.9655 3.72548 31.9843 4.03925 31.9928C4.18311 31.9961 4.32698 31.998 4.47118 31.9987C4.64177 32 4.81297 32 4.98386 32H46.0162C46.1868 32 46.358 32 46.5286 31.9987C46.6724 31.998 46.8163 31.9961 46.9608 31.9928C47.2739 31.9843 47.5903 31.9655 47.9009 31.9102C48.2153 31.8535 48.5083 31.7611 48.7941 31.6152C49.0753 31.4727 49.3317 31.2859 49.5551 31.0625C49.7777 30.8399 49.9646 30.5827 50.1078 30.3015C50.2537 30.0157 50.346 29.7228 50.402 29.4077C50.458 29.0978 50.4762 28.7814 50.4847 28.4683C50.4886 28.3244 50.4906 28.1805 50.4912 28.0367C50.4925 27.8654 50.4926 27.6949 50.4926 27.5236V4.4767C50.4926 4.30545 50.4925 4.13461 50.4912 3.96366C50.4906 3.81982 50.4886 3.67596 50.4847 3.53209C50.4762 3.21866 50.458 2.90227 50.402 2.59234C50.346 2.27731 50.2537 1.98429 50.1078 1.69852C49.9646 1.41728 49.7777 1.1605 49.5551 0.937516C49.3317 0.71453 49.0753 0.52766 48.7941 0.384791C48.5083 0.239294 48.2153 0.146886 47.9009 0.0902335C47.5903 0.0345472 47.2739 0.0160355 46.9608 0.00754966C46.8163 0.00362383 46.6724 0.00202331 46.5286 0.000996555C46.358 0 46.1868 0 46.0162 0Z" fill="black"/>
    <path d="M46.0162 1.06662L46.521 1.06759C46.6577 1.06855 46.7945 1.07003 46.932 1.07378C47.1711 1.08024 47.4509 1.09319 47.7117 1.13994C47.9384 1.18077 48.1285 1.24286 48.311 1.33575C48.4911 1.42728 48.6562 1.54723 48.8003 1.69113C48.9449 1.83599 49.065 2.0013 49.1578 2.18343C49.2501 2.36447 49.3118 2.55369 49.3524 2.78205C49.3991 3.04001 49.412 3.32055 49.4185 3.56121C49.4222 3.69704 49.424 3.83287 49.4247 3.97194C49.426 4.14012 49.4259 4.3082 49.4259 4.47671V27.5236C49.4259 27.6921 49.426 27.8599 49.4246 28.0317C49.424 28.1675 49.4222 28.3033 49.4185 28.4394C49.4119 28.6797 49.3991 28.9601 49.3519 29.2211C49.3118 29.4463 49.2502 29.6356 49.1573 29.8175C49.0648 29.9992 48.9449 30.1643 48.8009 30.3083C48.656 30.4532 48.4915 30.5728 48.3092 30.6652C48.1281 30.7576 47.9383 30.8197 47.7138 30.8601C47.4477 30.9075 47.1562 30.9205 46.9367 30.9265C46.7986 30.9296 46.6611 30.9315 46.5203 30.9321C46.3525 30.9334 46.1841 30.9334 46.0162 30.9334H4.98386C4.98162 30.9334 4.97945 30.9334 4.97718 30.9334C4.81127 30.9334 4.64503 30.9334 4.4761 30.9321C4.33836 30.9315 4.20093 30.9296 4.06805 30.9266C3.8435 30.9205 3.55181 30.9075 3.2879 30.8604C3.06151 30.8197 2.87171 30.7576 2.68822 30.664C2.50766 30.5724 2.34329 30.453 2.19831 30.3077C2.05444 30.1641 1.93488 29.9995 1.84245 29.8176C1.74992 29.6358 1.68801 29.446 1.64731 29.218C1.60025 28.9576 1.58733 28.6783 1.58087 28.4396C1.57718 28.303 1.57564 28.1664 1.57476 28.0305L1.5741 27.6295L1.57413 27.5236V4.47671L1.5741 4.37083L1.57473 3.97067C1.57564 3.83402 1.57718 3.6974 1.58087 3.56088C1.58733 3.32197 1.60025 3.04258 1.64769 2.77991C1.68804 2.55405 1.74992 2.36422 1.84293 2.18155C1.93464 2.001 2.05441 1.83617 2.19903 1.69158C2.34308 1.54747 2.50799 1.42767 2.6897 1.33527C2.87122 1.24283 3.06138 1.18077 3.28778 1.14003C3.54864 1.09316 3.82861 1.08024 4.06839 1.07375C4.20507 1.07003 4.34174 1.06855 4.4774 1.06762L4.98386 1.06662H46.0162Z" fill="white"/>
    <path d="M14.1531 10.7629C14.5811 10.2276 14.8715 9.50886 14.7949 8.77435C14.1684 8.80551 13.4038 9.18768 12.9612 9.72342C12.5638 10.1822 12.212 10.9311 12.3037 11.6348C13.007 11.6958 13.7097 11.2832 14.1531 10.7629Z" fill="black"/>
    <path d="M14.7869 11.7722C13.7655 11.7114 12.8972 12.3519 12.4094 12.3519C11.9214 12.3519 11.1745 11.8029 10.3667 11.8177C9.31521 11.8331 8.33959 12.4276 7.80602 13.3731C6.70857 15.2646 7.51641 18.0704 8.58362 19.611C9.10188 20.3731 9.72648 21.2123 10.5495 21.1822C11.3271 21.1517 11.6319 20.6787 12.5771 20.6787C13.5216 20.6787 13.7961 21.1822 14.6192 21.1669C15.4729 21.1516 16.0065 20.4044 16.5248 19.6415C17.1193 18.7727 17.3627 17.9338 17.378 17.8877C17.3627 17.8725 15.732 17.2469 15.7169 15.3711C15.7015 13.8004 16.9972 13.0534 17.0581 13.007C16.3265 11.9249 15.1832 11.8029 14.7869 11.7722Z" fill="black"/>
    <path d="M23.68 9.64661C25.8999 9.64661 27.4457 11.1768 27.4457 13.4046C27.4457 15.6404 25.8681 17.1786 23.6244 17.1786H21.1665V21.0872H19.3907V9.64661H23.68V9.64661ZM21.1665 15.688H23.2041C24.7502 15.688 25.6302 14.8556 25.6302 13.4126C25.6302 11.9697 24.7502 11.1451 23.2121 11.1451H21.1665V15.688Z" fill="black"/>
    <path d="M27.9097 18.7167C27.9097 17.2578 29.0276 16.3619 31.0098 16.2509L33.293 16.1162V15.474C33.293 14.5464 32.6666 13.9914 31.6203 13.9914C30.629 13.9914 30.0106 14.467 29.8601 15.2124H28.2428C28.3379 13.7059 29.6222 12.5959 31.6836 12.5959C33.7053 12.5959 34.9976 13.6663 34.9976 15.3392V21.0872H33.3563V19.7156H33.3169C32.8333 20.6433 31.7787 21.2299 30.6847 21.2299C29.0514 21.2299 27.9097 20.2151 27.9097 18.7167ZM33.293 17.9635V17.3055L31.2395 17.4323C30.2167 17.5037 29.6381 17.9556 29.6381 18.6691C29.6381 19.3985 30.2406 19.8742 31.1603 19.8742C32.3574 19.8742 33.293 19.0496 33.293 17.9635Z" fill="black"/>
    <path d="M36.547 24.1556V22.768C36.6736 22.7997 36.959 22.7997 37.1018 22.7997C37.8946 22.7997 38.3228 22.4668 38.5843 21.6105C38.5843 21.5946 38.7351 21.1031 38.7351 21.0952L35.7224 12.7466H37.5774L39.6866 19.5333H39.7181L41.8273 12.7466H43.6349L40.5109 21.5232C39.7976 23.5451 38.973 24.1952 37.2447 24.1952C37.1018 24.1952 36.6736 24.1793 36.547 24.1556Z" fill="black"/>
    </g>
    <defs>
    <clipPath id="clip0">
    <rect width="49.9851" height="32" fill="white" transform="translate(0.507462)"/>
    </clipPath>
    </defs>
  </svg>
`,t.appendChild(n);var i=document.createElement("p");i.id="apple-pay-description",i.innerHTML="Pay with Apple Pay to complete your purchase without filling a form",t.appendChild(i);var s=KI();if(t.appendChild(s),r){var a=GI("More payment options");t.appendChild(a)}}function X7(t){return t.some((function(e){return e!=="apple_pay"}))}var ex=[{value:"key",required:!0,types:["string"]},{value:"amount",required:!0,or:["plan","planCode"],types:["string","number"]},{value:"currency",required:!1,types:["string"]},{value:"email",required:!0,or:["customerCode"],types:["string"]},{value:"label",required:!1,types:["string"]},{value:"firstName",required:!1,types:["string"]},{value:"lastName",required:!1,types:["string"]},{value:"reference",required:!1,types:["string"]},{value:"phone",required:!1,types:["string"]},{value:"customerCode",required:!1,override:"email",types:["string"]},{value:"channels",required:!1,types:["array"]},{value:"paymentRequest",required:!1,types:["string","number"]},{value:"paymentPage",required:!1,types:["string"]},{value:"hash",required:!1,types:["string"]},{value:"container",required:!1,types:["string"]},{value:"metadata",required:!1,types:["object"]},{value:"subaccountCode",required:!1,types:["string"]},{value:"bearer",required:!1,types:["string"]},{value:"transactionCharge",required:!1,types:["string","number"]},{value:"planCode",required:!1,override:"amount",types:["string"]},{value:"subscriptionCount",required:!1,types:["number"]},{value:"planInterval",required:!1,types:["string"]},{value:"subscriptionLimit",required:!1,types:["number"]},{value:"subscriptionStartDate",required:!1,types:["string"]},{value:"accessCode",required:!1,types:["string"]},{value:"onError",required:!1,types:["function"]},{value:"onLoad",required:!1,types:["function"]},{value:"onSuccess",required:!1,types:["function"]},{value:"onCancel",required:!1,types:["function"]},{value:"callback",required:!1,types:["function"]},{value:"onClose",required:!1,types:["function"]},{value:"onBankTransferConfirmationPending",required:!1,types:["function"]},{value:"firstname",required:!1,types:["string"]},{value:"lastname",required:!1,types:["string"]},{value:"customer_code",required:!1,types:["string"]},{value:"payment_request",required:!1,types:["string","number"]},{value:"subaccount",required:!1,types:["string"]},{value:"transaction_charge",required:!1,types:["number","string"]},{value:"plan",required:!1,types:["string"]},{value:"quantity",required:!1,types:["number"]},{value:"interval",required:!1,types:["string"]},{value:"invoice_limit",required:!1,types:["number","string"]},{value:"start_date",required:!1,types:["string"]},{value:"payment_page",required:!1,types:["number","string"]},{value:"order_id",required:!1,types:["number"]},{value:"ref",required:!1,types:["string"]},{value:"card",required:!1,types:["string"]},{value:"bank",required:!1,types:["string"]},{value:"split",required:!1,types:["object"]},{value:"split_code",required:!1,types:["string"]},{value:"transaction_type",required:!1,types:["string"]},{value:"subscription",required:!1,types:["number"]},{value:"language",required:!1,types:["string"]},{value:"connect_account",required:!1,types:["string"]},{value:"connect_split",required:!1,types:["array"]}];function FG(t){return t?.length>500?t.split("?")[0]:t}function LG(t){var e,r,n,i,s=ns({},t);return s.metadata=t.metadata||{},s.metadata.referrer=(e=window.location,r=e.href,n=r===void 0?"":r,i=e.ancestorOrigins,[n].concat(MI(i===void 0?[]:i)).map(FG).join(",")),s.metadata=JSON.stringify(s.metadata),s.mode="popup",t.split&&typeof t.split!="string"&&(s.split=JSON.stringify(s.split)),s.card!==void 0&&["false",!1].indexOf(s.card)>-1&&(s.channels=["bank"],delete s.card),s.bank!==void 0&&["false",!1].indexOf(s.bank)>-1&&(s.channels=["card"],delete s.bank),[{to:"firstname",from:"firstName"},{to:"lastname",from:"lastName"},{to:"customer_code",from:"customerCode"},{to:"payment_request",from:"paymentRequest"},{to:"subaccount",from:"subaccountCode"},{to:"transaction_charge",from:"transactionCharge"},{to:"plan",from:"planCode"},{to:"quantity",from:"subscriptionCount"},{to:"interval",from:"planInterval"},{to:"invoice_limit",from:"subscriptionLimit"},{to:"start_date",from:"subscriptionStartDate"},{to:"ref",from:"reference"}].forEach((function(a){s[a.from]&&(s[a.to]=s[a.from],delete s[a.from])})),Object.values(t).forEach((function(a,o){if(typeof a=="function"){var l=Object.keys(t)[o];delete s[l]}})),s}var jG=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"],XI=window&&window.navigator&&(window.navigator.platform||window.navigator.userAgentData&&window.navigator.userAgentData.platform),YI=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.platform,r=t.userAgent,n=r===void 0?window&&window.navigator&&window.navigator.userAgent:r,i=e||XI;return jG.includes(i)||n.includes("Mac")&&"ontouchend"in document},DG=function(t,e,r){var n="".concat(Uo.paystackApiUrl,"transaction/update_log/").concat(t),i={Authorization:"Bearer ".concat(e)};return fetch(n,{method:"POST",body:JSON.stringify({payload:JSON.stringify(r)}),headers:i})},OG=function(t,e){var r="".concat(Uo.paystackApiUrl,"transaction/set_ip/").concat(t),n={Authorization:"Bearer ".concat(e)};return fetch(r,{method:"POST",headers:n})},MG={initializeLog:function(t){var e=t||{},r=e.attempts,n=e.authentication,i=e.errors,s=e.history;this.log={start_time:Math.round(Date.now()/1e3),time_spent:0,attempts:r||0,authentication:n,errors:i||0,success:!1,mobile:YI(),input:[],history:s||[]}},getTimeSpent:function(){var t=Math.round(Date.now()/1e3);return this.log.time_spent=t-this.log.start_time,this.log.time_spent},logAPIResponse:function(t,e){switch(t.status){case"success":return this.logApiSuccess(e);case"failed":return this.logApiError(t.message);default:return!1}},logValidationResponse:function(t){return this.log.history.push({type:"action",message:t,time:this.getTimeSpent()}),this.saveLog()},logAttempt:function(t){var e="Attempted to pay";return t&&(e+=" with ".concat(t)),this.log.attempts+=1,this.log.history.push({type:"action",message:e,time:this.getTimeSpent()}),this.saveLog()},logApiError:function(t){var e="Error";return t&&(e+=": ".concat(t)),this.log.errors+=1,this.log.history.push({type:"error",message:e,time:this.getTimeSpent()}),this.saveLog()},logApiSuccess:function(t){var e="Successfully paid";return t&&(e+=" with ".concat(t)),this.log.success=!0,this.log.history.push({type:"success",message:e,time:this.getTimeSpent()}),this.saveLog()},saveLog:function(){try{if(this.response)return DG(this.id,this.response.merchant_key,this.log)}catch{}},saveIpAddress:function(){try{if(this.response)return OG(this.id,this.response.merchant_key)}catch{}}},BG=["language","connect_account"],VG={requestInline:function(){var t=this,e=this.urlParameters,r=e.language,n=e.connect_account,i=W3(e,BG),s=ns({"Content-Type":"application/json"},r&&{"Accept-Language":r});return(this.accessCode?fetch(new URL("transaction/verify_access_code/".concat(this.accessCode),Uo.paystackApiUrl).toString(),{headers:s}):fetch(new URL("/checkout/request_inline",Uo.paystackApiUrl).toString(),{method:"POST",body:JSON.stringify(i),headers:ns(ns({},s),n&&{"x-connect-account":n})})).then((function(a){return a.json()})).then((function(a){if(a.status===!1)throw new Error(a.message);return t.response=a.data,t.id=a.data.id,t.status=a.data.transaction_status,t.accessCode=a.data.access_code,t.log=null,Object.assign(t,MG),t.initializeLog(a.data.log),t.saveIpAddress(),a.data}))}},l4=(function(){function t(e){jI(this,t),(function(c){function d(w,y){this.message=w,this.issues=y||[]}if(!c||Kf(c)!=="object")throw new d("Transaction parameters should be a non-empty object");var p=c;if("accessCode"in p)return{accessCode:p.accessCode};Object.keys(p).forEach((function(w){ex.find((function(y){return y.value===w}))!==void 0||delete p[w]}));var g=Object.keys(p),m=[];if(ex.filter((function(w){return w.required})).forEach((function(w){var y=!p[w.value],k=w.or?w.or.some((function(T){return p[T]})):null;y&&!k&&m.push({message:"Required parameter missing: ".concat(w.value)})})),g.forEach((function(w){var y=p[w],k=ex.find((function(O){return O.value===w})),T=Kf(y);T==="object"&&Array.isArray(y)&&(T="array"),k.types.indexOf(T)<=-1&&m.push({message:"Invalid parameter type: ".concat(w),validTypes:k.types})})),g.forEach((function(w){var y=ex.find((function(k){return k.value===w}));y.override&&delete p[y.override]})),m.length)throw new d("Invalid transaction parameters",m)})(e),this.parameters=e,this.urlParameters=LG(e),this.id=null,this.status=null,this.accessCode=e.accessCode||null,this.authorizationUrl=null,this.errors=[],this.response=null,this.isActive=!0;var r=e.onError,n=e.onLoad,i=e.onSuccess,s=e.onCancel,a=e.callback,o=e.onClose,l=e.onBankTransferConfirmationPending;this.callbacks={onError:r,onLoad:n,onSuccess:i,onCancel:s,onBankTransferConfirmationPending:l},this.deprecatedCallbacks={callback:a,onClose:o},Object.assign(this,VG)}return DI(t,[{key:"onSetupError",value:function(e){this.logError(e),this.callbacks.onError&&this.callbacks.onError(e)}},{key:"onLoad",value:function(e){var r=e.id,n=e.customer,i=e.accessCode;Object.assign(this,{id:r,customer:n,accessCode:i}),this.authorizationUrl="".concat(Uo.checkoutUrl).concat(i),this.callbacks.onLoad&&this.callbacks.onLoad({id:r,customer:n,accessCode:i})}},{key:"onSuccess",value:function(e){this.isActive=!1,this.response=e,this.status=e.status,this.callbacks.onSuccess&&this.callbacks.onSuccess(e),this.deprecatedCallbacks.callback&&this.deprecatedCallbacks.callback(e)}},{key:"setStatus",value:function(e){this.status=e}},{key:"onCancel",value:function(){this.callbacks.onCancel&&this.callbacks.onCancel(),this.deprecatedCallbacks.onClose&&this.deprecatedCallbacks.onClose()}},{key:"cancel",value:function(){this.isActive=!1,this.onCancel()}},{key:"onBankTransferConfirmationPending",value:function(){this.cancel(),this.callbacks.onBankTransferConfirmationPending&&this.callbacks.onBankTransferConfirmationPending()}},{key:"logError",value:function(e){this.errors.push(e)}}]),t})(),hb=console?console.warn||console.log:function(){};function Y7(t,e,r){hb('"'.concat(t,'" has been deprecated, please use "').concat(e,'". ').concat(r))}var Zr,UG=["preload","inlineTransaction","transactionData"],zG=["container","styles","onElementsMount"];function c4(t,e){if(!t.length)return null;var r=t.filter((function(n){var i,s,a,o,l=!n.status||n.status==="abandoned",c=(i=n.parameters,s=e,a=Object.keys(i).sort().join("")===Object.keys(s).sort().join(""),o=Object.values(i).sort().join("")===Object.values(s).sort().join(""),a&&o);return l&&c}));return r.length?r[r.length-1]:null}function Q7(t){var e=t.checkoutIframe,r=t.urlParameters;e&&r&&e.contentWindow.postMessage({type:"inline:url",path:"newTransaction",params:r},"*")}var $G="trackCheckoutClosed",J7="trackPaymentError",HG="trackPaymentAttempt",qG="trackPaymentCompletion";function u4(t){throw hb(t),new Error(t)}var Z7,e9,QI=(function(){function t(e){var r,n;jI(this,t),this.id=(function(){for(var i="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<5;a+=1)i+=s.charAt(Math.floor(Math.random()*s.length));return i})(),this.transactions=[],this.isOpen=!1,this.isLoaded=!1,this.isDeprecatedApi=e&&e.isDeprecatedApi,e&&e.isEmbed?this.isEmbed=!0:e&&e.isPaymentRequest&&(e.container&&Z2(e.container)||u4("A container is required to mount the payment request button"),this.paymentRequestContainer=Z2(e.container),this.paymentRequestTransaction=null),this.preCheckoutModal=null,this.backgroundIframe=(function(i){var s=a4("inline-background-".concat(i));s.style.cssText=`
  z-index: 999999999999999;
  background: transparent;
  background: rgba(0, 0, 0, 0.75);    
  border: 0px none transparent;
  overflow-x: hidden;
  overflow-y: hidden;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  transition: opacity 0.3s;
  -webkit-transition: opacity 0.3s;
  visibility: hidden;
  display: none;
`,document.body.appendChild(s);var a=s.contentWindow.document;return a.open(),a.write(`
  <!DOCTYPE html>
  <html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Paystack Popup Loader</title>
    <style>
      .app-loader {
        margin: 200px 0;
        text-align: center;
        color: white;
      }      
      @keyframes app-loader__spinner {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @-webkit-keyframes app-loader__spinner {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      .app-loader__spinner {
        position: relative;
        display: inline-block;
      }
      .app-loader__spinner div {
        left: 95px;
        top: 35px;
        position: absolute;
        -webkit-animation: app-loader__spinner linear 1s infinite;
        animation: app-loader__spinner linear 1s infinite;
        background: white;
        width: 10px;
        height: 30px;
        border-radius: 40%;
        -webkit-transform-origin: 5px 65px;
        transform-origin: 5px 65px;
      }
      .app-loader__spinner div:nth-child(1) {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
        -webkit-animation-delay: -0.916666666666667s;
        animation-delay: -0.916666666666667s;
      }
      .app-loader__spinner div:nth-child(2) {
        -webkit-transform: rotate(30deg);
        transform: rotate(30deg);
        -webkit-animation-delay: -0.833333333333333s;
        animation-delay: -0.833333333333333s;
      }
      .app-loader__spinner div:nth-child(3) {
        -webkit-transform: rotate(60deg);
        transform: rotate(60deg);
        -webkit-animation-delay: -0.75s;
        animation-delay: -0.75s;
      }
      .app-loader__spinner div:nth-child(4) {
        -webkit-transform: rotate(90deg);
        transform: rotate(90deg);
        -webkit-animation-delay: -0.666666666666667s;
        animation-delay: -0.666666666666667s;
      }
      .app-loader__spinner div:nth-child(5) {
        -webkit-transform: rotate(120deg);
        transform: rotate(120deg);
        -webkit-animation-delay: -0.583333333333333s;
        animation-delay: -0.583333333333333s;
      }
      .app-loader__spinner div:nth-child(6) {
        -webkit-transform: rotate(150deg);
        transform: rotate(150deg);
        -webkit-animation-delay: -0.5s;
        animation-delay: -0.5s;
      }
      .app-loader__spinner div:nth-child(7) {
        -webkit-transform: rotate(180deg);
        transform: rotate(180deg);
        -webkit-animation-delay: -0.416666666666667s;
        animation-delay: -0.416666666666667s;
      }
      .app-loader__spinner div:nth-child(8) {
        -webkit-transform: rotate(210deg);
        transform: rotate(210deg);
        -webkit-animation-delay: -0.333333333333333s;
        animation-delay: -0.333333333333333s;
      }
      .app-loader__spinner div:nth-child(9) {
        -webkit-transform: rotate(240deg);
        transform: rotate(240deg);
        -webkit-animation-delay: -0.25s;
        animation-delay: -0.25s;
      }
      .app-loader__spinner div:nth-child(10) {
        -webkit-transform: rotate(270deg);
        transform: rotate(270deg);
        -webkit-animation-delay: -0.166666666666667s;
        animation-delay: -0.166666666666667s;
      }
      .app-loader__spinner div:nth-child(11) {
        -webkit-transform: rotate(300deg);
        transform: rotate(300deg);
        -webkit-animation-delay: -0.083333333333333s;
        animation-delay: -0.083333333333333s;
      }
      .app-loader__spinner div:nth-child(12) {
        -webkit-transform: rotate(330deg);
        transform: rotate(330deg);
        -webkit-animation-delay: 0s;
        animation-delay: 0s;
      }
      .app-loader__spinner {
        width: 40px;
        height: 40px;
        -webkit-transform: translate(-20px, -20px) scale(0.2) translate(20px, 20px);
        transform: translate(-20px, -20px) scale(0.2) translate(20px, 20px);
      }
    </style>
  </head>

  <body>
    <div id="app-loader" class="app-loader">
      <div id="spinner" class="app-loader__spinner">
        <div></div><div></div><div></div><div></div><div></div><div></div><div>
        </div><div></div><div></div><div></div><div></div><div></div>
      </div>
    </div>
  </body>

  </html>
`),a.close(),s})(this.id),this.checkoutIframe=(r=this.id,(n=a4("inline-checkout-".concat(r))).src="".concat(Uo.checkoutUrl,"popup"),n.style.cssText=`
  z-index: 999999999999999;
  background: transparent;
  border: 0px none transparent;
  overflow-x: hidden;
  overflow-y: hidden;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  visibility: hidden;
  display: none;
  height: 100%;
`,n.setAttribute("allowpaymentrequest","true"),n.setAttribute("allow","payment; clipboard-read; clipboard-write"),document.body.appendChild(n),n),this.registerListeners()}return DI(t,[{key:"registerListeners",value:function(){var e=this;window.addEventListener("message",(function(r){var n="".concat(r.origin,"/")===Uo.checkoutUrl,i=e.checkoutIframe&&e.checkoutIframe.contentWindow===r.source,s=e.isEmbed;n||i?e.respondToEvent(r):s&&e.respondToEmbedEvents(r)}))}},{key:"sendAnalyticsEventToCheckout",value:function(e,r){this.checkoutIframe.contentWindow.postMessage({type:"analytics",action:e,params:r},"*")}},{key:"checkout",value:function(e){this.activeTransaction()&&this.activeTransaction().cancel(),Zr=this;var r=c4(this.transactions,e)||new l4(e);return new Promise((function(n,i){r.requestInline().then((function(s){var a=(function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=l.platform,d=l.userAgent,p=d===void 0?window&&window.navigator&&window.navigator.userAgent:d,g=c||XI,m=p&&!!p.match(/Version\/[\d.]+.*Safari/),w=g&&/(Mac)/i.test(g);return YI()||w&&m})()&&G3(s.channels),o=(function(){var l,c,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return!((l=d.link_config)===null||l===void 0||!l.enabled||(c=d.link_config)===null||c===void 0||!c.has_payment_instruments)})(s);o||a?(Zr.preloadTransaction({inlineTransaction:r,transactionData:s}),Zr.preCheckoutModal=(function(l,c){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=document.querySelector("#pre-checkout-modal-".concat(l));if(p){if(K7(p)&&o4(p))return p;p.remove()}var g=document.createElement("div");g.classList.add("pre-checkout-modal"),g.id="pre-checkout-modal-".concat(l),g.style.zIndex=NG()+1;var m=document.createElement("div");m.classList.add("pre-checkout-modal__content"),g.appendChild(m);var w=c||{},y=w.merchant_logo,k=w.merchant_name,T=w.email,O=w.amount,P=w.currency,V=w.label,Y=w.channels,G=new Intl.NumberFormat("en",{style:"currency",currency:P,currencyDisplay:"code",maximumFractionDigits:2,minimumFractionDigits:0}).format(O/100),L=document.createElement("div");L.classList.add("payment-info"),L.innerHTML='<img class="merchant-logo" src="'.concat(y,'" alt="').concat(k,` Logo">
    <div class="customer-info">
      <div class="customer-email">`).concat(V||T,`</div>
      <div class="transaction-amount">Pay <span class="amount">`).concat(G,`</span></div>
    </div>`),m.appendChild(L),m.innerHTML+=EG;var N=document.createElement("div");N.classList.add("modal-wrapper"),d.canPayWithVault?PG(N,{canPayWithApplePay:d.canPayWithApplePay,hasOtherPaymentMethods:X7(Y)}):RG(N,{hasOtherPaymentMethods:X7(Y)}),N.innerHTML=N.innerHTML+zI+kG,m.appendChild(N);var C=document.createElement("style");return C.textContent=CG,document.body.appendChild(C),document.body.appendChild(g),g})(Zr.id,s,{canPayWithVault:o,canPayWithApplePay:a}),a?(Zr.paymentRequestContainer=o4(Zr.preCheckoutModal),G7(Zr.paymentRequestContainer,{channels:s.channels,styles:{applePay:{width:"100%",type:"pay",height:"42px",padding:"15px",borderRadius:"5px"}}},s.merchant_id).then((function(){Zr.registerPaymentRequestEventListeners()})).catch((function(){o?o4(Zr.preCheckoutModal).remove():(Zr.closePreCheckoutModal(),Zr.animateCheckoutIn())})).finally((function(){n(r)}))):n(r)):(Zr.newTransaction({inlineTransaction:r,transactionData:s}),n(r))})).catch((function(s){r.onSetupError({status:!1,message:s.message}),i(s)}))}))}},{key:"openPreCheckoutModal",value:function(){var e;this.registerPreCheckoutModalEventListeners(),e=this.preCheckoutModal,new Promise((function(r,n){try{var i=e.querySelector(".pre-checkout-modal__content");e.classList.add("show"),setTimeout((function(){i.classList.add("show"),r(!0)}),50)}catch(s){n(s)}}))}},{key:"registerPreCheckoutModalEventListeners",value:function(){var e,r=this,n=!1,i=this.activeTransaction();document.addEventListener("touchstart",(function(l){l.preventDefault(),n||(n=!0,e=setTimeout((function(){n=!1}),125))}),!0),document.addEventListener("touchend",(function(l){l.target&&l.target.isSameNode(Zr.preCheckoutModal)&&n&&(clearTimeout(e),Zr.closePreCheckoutModal(),i&&i.cancel()),n=!1}),!0);var s=K7(this.preCheckoutModal);s&&(s.onclick=function(){r.closePreCheckoutModal(),r.animateCheckoutIn()});var a=this.preCheckoutModal.querySelector("#".concat(WI));a&&(a.onclick=function(){r.closePreCheckoutModal(),r.animateCheckoutIn(),r.checkoutIframe.contentWindow.postMessage({type:"inline:pay-with-vault"},"*")});var o=(function(l){return l.querySelector("#apple-pay-close-button")})(this.preCheckoutModal);o.onclick=function(){r.sendAnalyticsEventToCheckout($G),r.closePreCheckoutModalAndCancelTransaction()}}},{key:"closePreCheckoutModal",value:function(e){var r;this.preCheckoutModal&&(e==="failed"?(r=this.preCheckoutModal)&&(r.querySelector("#apple-pay-mark--light").innerHTML=`<svg width="50" height="30" viewBox="0 0 21 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="error-icon">
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="error" fill-rule="nonzero">
            <path d="M9.14672,0.47855 L0.14829,15.47855 C-0.0403320234,15.7872042 -0.0475647902,16.1736607 0.129375884,16.4891566 C0.306316558,16.8046526 0.639843999,16.9999993 1.00157,17 L19.43546,17 C19.797186,16.9999993 20.1307134,16.8046526 20.3076541,16.4891566 C20.4845948,16.1736607 20.477362,15.7872042 20.28874,15.47855 L10.85328,0.47855 C10.671624,0.181297031 10.3483651,3.00996351e-06 10,3.00996351e-06 C9.6516349,3.00996351e-06 9.32837603,0.181297031 9.14672,0.47855 Z" id="Shape" fill="#FFAA22"></path>
            <rect id="Rectangle-path" fill="#FFFFFF" x="9" y="6" width="2" height="5"></rect>
            <rect id="Rectangle-path" fill="#FFFFFF" x="9" y="12" width="2" height="2"></rect>
        </g>
    </g>
</svg>`,r.querySelector("#apple-pay-description").textContent="An error occurred while paying with Apple Pay. Please try again or use another payment method."):((function(n){n&&(n.querySelector(".pre-checkout-modal__content").classList.remove("show"),n.classList.remove("show"))})(this.preCheckoutModal),this.preCheckoutModal.remove(),this.preCheckoutModal=null))}},{key:"closePreCheckoutModalAndCancelTransaction",value:function(){this.preCheckoutModal&&(this.cancelTransaction(),this.checkoutIframe&&this.checkoutIframe.contentWindow&&this.checkoutIframe.contentWindow.postMessage("close","*"),this.closePreCheckoutModal())}},{key:"newTransaction",value:function(e){var r=e.preload,n=e.inlineTransaction,i=e.transactionData,s=W3(e,UG),a=this.paymentRequestContainer&&Bx(this.paymentRequestContainer);if(this.activeTransaction()&&!a&&this.activeTransaction().cancel(),n&&i)return this.transactions.push(n),this.isDeprecatedApi||this.open({accessCode:i.access_code,language:n.urlParameters.language},r),n;var o=c4(this.transactions,n?n.parameters:s);if(o)return o.isActive=!0,this.isDeprecatedApi||this.open({accessCode:o.accessCode,language:o.urlParameters.language},r),o;var l=n||new l4(s),c=l.accessCode?{accessCode:l.accessCode,language:l.urlParameters.language}:l.urlParameters;return this.transactions.push(l),this.isDeprecatedApi||this.open(c,r),l}},{key:"preloadTransaction",value:function(e){var r=this;return this.newTransaction(ns(ns({},e),{},{preload:!0})),function(){return r.animateCheckoutIn()}}},{key:"paymentRequest",value:function(e){var r=e.container,n=e.styles,i=e.onElementsMount,s=W3(e,zG);return Zr=this,new Promise((function(a,o){var l=document.querySelector("#".concat(e.loadPaystackCheckoutButton));if($I()){Zr.activeTransaction()&&Zr.activeTransaction().cancel(),r&&Z2(r)||u4("A container is required to mount the payment request button"),Zr.paymentRequestContainer=Z2(r);var c=c4(Zr.transactions,s),d=c||new l4(s);d.requestInline().then((function(m){G7(Zr.paymentRequestContainer,{channels:m.channels,styles:n},m.merchant_id).then((function(w){i&&i(w)})).catch((function(){i&&i(null)})).finally((function(){if(c?d.isActive=!0:Zr.transactions.push(d),Zr.registerPaymentRequestEventListeners(),l){var w=Zr.preloadTransaction({inlineTransaction:d,transactionData:m});l.onclick=w}a(d)}))})).catch((function(m){d.onSetupError({status:!1,message:m.message}),o(m)}))}else{if(e&&e.loadPaystackCheckoutButton)if(l){var p=Zr.preloadTransaction(s);l.onclick=p}else hb("This device does not support any payment request wallet options. Please consult our documentation at https://developers.paystack.co/docs/paystack-inline to see how to load alternative payment options using 'loadPaystackCheckoutButton'");i&&i(null);var g=Zr.activeTransaction();a(g)}}))}},{key:"registerApplePayEventListener",value:function(){var e=this;Bx(this.paymentRequestContainer).onclick=function(){return e.startApplePay()}}},{key:"registerPaymentRequestEventListeners",value:function(){var e=this.activeTransaction();e&&G3(e.response.channels)?this.registerApplePayEventListener():AG(this.paymentRequestContainer)}},{key:"startApplePay",value:function(){var e,r,n,i,s,a=this,o="apple pay",l=this.activeTransaction();if(l){var c={channel:"apple_pay",paymentMethod:o,currency:l.currency,amount:l.amount},d={channel:"apple_pay",currency:l.currency,amount:l.amount,timeSpent:l.getTimeSpent()};try{l.logAttempt(o),this.sendAnalyticsEventToCheckout(HG,c);var p=(e={currency:l.response.currency,amount:l.response.amount,merchantName:l.response.merchant_name,interval:l.response.plan_details&&l.response.plan_details.interval},r=e.currency,n=e.amount,i=e.merchantName,s=e.interval,ns({countryCode:"NG",currencyCode:r,merchantCapabilities:["supports3DS","supportsCredit","supportsDebit"],supportedNetworks:["visa","masterCard"],requiredBillingContactFields:["postalAddress","name","phone","email"],total:{label:"".concat(i," - Paystack"),type:"final",amount:String(H7(n))}},typeof s=="string"&&s.trim()!==""&&{lineItems:[{label:TG(s),amount:String(H7(n))}]})),g=new window.ApplePaySession(Uo.applePayVersion,p);g.onvalidatemerchant=function(m){var w=(function(y){var k=y.transactionId,T=y.validationURL,O=y.merchantName,P=y.domainName,V=P===void 0?window&&window.location&&window.location.hostname:P,Y="".concat(Uo.paymentBaseUrl).concat(Uo.applePayValidateSessionPath),G=W7({transaction:k,sessionUrl:T,displayName:O,domainName:V});return fetch(Y,ns(ns({},q7),{},{body:G})).then((function(L){return L.json()}))})({validationURL:m.validationURL,transactionId:l.id,merchantName:l.response.merchant_name});w.then((function(y){y.status!=="success"?l.onSetupError(y):g.completeMerchantValidation(y.data),l.logValidationResponse(y.message)})).catch((function(y){l.onSetupError(y)}))},g.oncancel=function(){Zr.preCheckoutModal||l.onCancel()},g.onpaymentauthorized=function(m){var w=m.payment,y=(function(k){var T=k.transactionId,O=k.payment,P="".concat(Uo.paymentBaseUrl).concat(Uo.applePayChargePath),V=W7({transaction:T,paymentObject:JSON.stringify(O)});return fetch(P,ns(ns({},q7),{},{body:V})).then((function(Y){return Y.json()}))})({transactionId:l.id,payment:w});y.then((function(k){l.logAPIResponse(k,o),k.status==="success"?(g.completePayment(g.STATUS_SUCCESS),l.onSuccess(k),a.sendAnalyticsEventToCheckout(qG,d)):(g.completePayment(g.STATUS_FAILURE),l.onSetupError(k),a.sendAnalyticsEventToCheckout(J7,{channel:"apple_pay",message:k&&k.message||"Transaction attempt failed"})),Zr.closePreCheckoutModal(k.status)})).catch((function(k){g.completePayment(g.STATUS_FAILURE),l.onSetupError(k),a.sendAnalyticsEventToCheckout(J7,{channel:"apple_pay",message:k&&k.message||"Error occurred"}),Zr.closePreCheckoutModal("failed")}))},g.begin()}catch(m){l.onSetupError(m)}}else u4("Could not initiate apple pay transaction")}},{key:"resumeTransaction",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.onSuccess,i=r.onCancel,s=r.onLoad,a=r.onError;return this.newTransaction({accessCode:e,onSuccess:n,onCancel:i,onLoad:s,onError:a})}},{key:"activeTransaction",value:function(){var e=this.transactions.filter((function(n){return n.isActive})),r=e.length?e[e.length-1]:null;return r}},{key:"cancelTransaction",value:function(e){var r=this.transactions.find((function(n){return n.id===e}))||this.activeTransaction();r&&(r.cancel(),this.close())}},{key:"respondToEvent",value:function(e){if(e){var r,n,i=this.activeTransaction();try{var s=e.data||e.message,a=s.event,o=s.data;if(a)switch(a){case"loaded:checkout":if(this.isLoaded=!0,i){var l=this.checkoutIframe,c=i.urlParameters,d=i.response;Q7({checkoutIframe:l,urlParameters:d?{accessCode:d.access_code,language:c?.language}:c})}break;case"loaded:transaction":r=this.backgroundIframe,(n=r.contentWindow.document)&&(n.getElementById("app-loader").style.display="none"),this.preCheckoutModal&&this.openPreCheckoutModal(),i.onLoad(o);break;case"error":o.type==="setup"?i.onSetupError(o):i.logError(o);break;case"cancel":case"close":this.close();var p=o&&o.status;p&&i.setStatus(p),!(this.paymentRequestContainer&&Bx(this.paymentRequestContainer)&&!this.preCheckoutModal)&&(i.isActive=!1),i.onCancel();break;case"transfer:pending":this.close();var g=o&&o.status;g&&i.setStatus(g),i.onBankTransferConfirmationPending();break;case"success":this.close(),i.onSuccess(o)}}catch{}}}},{key:"respondToEmbedEvents",value:function(e){var r,n,i=this.activeTransaction(),s=e.data||e.message;if(s&&(typeof s=="string"||s instanceof String)){var a={action:n=(r=s)&&typeof r=="string"?r.split(" ")[0]:null,data:n?r.split(" ").slice(2).join(" "):null};a&&a.action==="PaystackClose"&&a.data&&i.onSuccess(s),a.action==="PaystackTLSClose"&&i.cancel()}}},{key:"animateCheckoutIn",value:function(){var e,r=this;if(!this.isOpen){var n=this.checkoutIframe,i=this.backgroundIframe;(e={checkoutIframe:n,backgroundIframe:i},new Promise((function(s,a){e||a("No dom element provided");var o=e.checkoutIframe,l=e.backgroundIframe;o&&l||a("No dom element provided"),o.style.display="",o.style.visibility="visible",l.style.display="",l.style.visibility="visible",s()}))).then((function(){r.checkoutIframe.contentWindow.postMessage("render","*")})),this.isOpen=!0}}},{key:"open",value:function(e,r){e&&(Q7({checkoutIframe:this.checkoutIframe,urlParameters:e}),r||this.animateCheckoutIn())}},{key:"close",value:function(){var e=this;if(this.isOpen){var r,n=this.checkoutIframe,i=this.backgroundIframe;(r={checkoutIframe:n,backgroundIframe:i},new Promise((function(s,a){r||a("No dom element provided");var o=r.checkoutIframe,l=r.backgroundIframe;o&&l||a("No dom element provided"),l.style.opacity=0,o.style.display="none",o.style.visibility="hidden",setTimeout((function(){l.style.display="none",l.style.visibility="hidden",l.style.opacity=1,s()}),300)}))).then((function(){e.checkoutIframe.contentWindow.postMessage("close","*")})),this.isOpen=!1}}},{key:"isLoaded",value:function(){return this.isLoaded}}],[{key:"setup",value:function(e){var r=e&&e.container;Zr||(Zr=new t({isDeprecatedApi:!0,isEmbed:r})),Y7("PaystackPop.setup()","new PaystackPop()","Please consult our documentation at https://developers.paystack.co/docs/paystack-inline");var n=Zr.newTransaction(e,"deprecated"),i=n.urlParameters;if(r){var s="".concat(Uo.siteUrl,"/assets/payment/production/inline.html?").concat(UI(i)),a=(function(o,l){var c=a4("embed-checkout-".concat(o));return c.style.cssText=`
  background: transparent;
  background: rgba(0,0,0,0);
  border: 0px none transparent;
  overflow-x: hidden;
  overflow-y: hidden;
  nmargin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  visibility: hidden;
  display: none;
`,c.src=l,c.id=o,c.name=o,c})(Zr.id,s);(function(o,l){var c=document.getElementById(o);c.innerHTML="",c.removeAttribute("style"),c.className="paystack-embed-container",c.style.position="relative",c.style.width="100%",c.appendChild(l)})(e.container,a),a.onload=function(){var o;a.contentWindow.postMessage("PaystackOpen ".concat(Zr.id),"*"),o=a,new Promise((function(l,c){o||c("No dom element provided"),o.style.display="",o.style.visibility="visible",l()}))}}else n.openIframe=function(){Y7("openIframe","open","Please consult our documentation at https://developers.paystack.co/docs/paystack-inline"),Zr.open(i)};return n}}]),t})();if(Z7=z7().length>0,e9=a1()&&a1().parentElement.tagName==="FORM",Z7&&e9){var d4,df=(function(){var t={},e=a1();return z7().forEach((function(r){var n=e.getAttribute(r),i=r.split("data-")[1].replace(/-([a-z])/g,(function(s){return s[1].toUpperCase()}));t[i]=n})),(function(r){if(r.buttonId&&!document.getElementById(r.buttonId))throw new Error("Please make sure the buttonId is an element available in the DOM");var n=ns({},r);n.buttonText=r.buttonText||"Pay",n.buttonVariant="normal",n.buttonWordmarkVariant="normal";var i=["normal","light"];return r.buttonVariant&&i.indexOf(r.buttonVariant)>-1&&(n.buttonVariant=r.buttonVariant),r.buttonWordmarkVariant&&i.indexOf(r.buttonWordmarkVariant)>-1&&(n.buttonWordmarkVariant=r.buttonWordmarkVariant),n})(t)})(),t9=a1().parentElement;Zr||(Zr=new QI),(function(t){var e;if(t.id)(e=document.getElementById(t.id)).setAttribute("data-inline-id",t.id);else{var r=document.createElement("div");r.id="inline-button-".concat(t.inlineId),r.innerHTML=(function(n){var i,s,a={normal:`
  <svg id="inline-button-wordmark" width="137" height="13" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M.037 5.095l1.075-.135c-.011-.774-.025-1.944-.013-2.149C1.19 1.364 2.38.134 3.81.013 3.9.006 3.99.002 4.077 0a2.947 2.947 0 0 1 2.046.76c.574.509.95 1.26 1.008 2.007.015.192.01 1.491.01 2.257l1.096.163L8.2 11.44 4.093 12 0 11.346l.037-6.251zm4.106-.514l1.724.256c-.007-.933-.05-2.295-.26-2.654-.319-.545-.846-.867-1.443-.88h-.063c-.607.008-1.138.322-1.458.864-.222.378-.266 1.66-.265 2.637l1.765-.223zM18.228 10.108c-.576 0-1.064-.072-1.464-.216a2.864 2.864 0 0 1-.972-.6 2.552 2.552 0 0 1-.588-.864 4.067 4.067 0 0 1-.252-1.044h1.008c.032.256.088.5.168.732.08.224.204.424.372.6.168.168.388.304.66.408.28.096.636.144 1.068.144.28 0 .536-.036.768-.108.24-.08.448-.192.624-.336.176-.144.312-.316.408-.516.104-.2.156-.42.156-.66 0-.24-.032-.448-.096-.624a1.02 1.02 0 0 0-.336-.468 1.885 1.885 0 0 0-.636-.324 6.4 6.4 0 0 0-1.008-.228 8.79 8.79 0 0 1-1.212-.276 3.246 3.246 0 0 1-.9-.432 1.982 1.982 0 0 1-.564-.672c-.128-.272-.192-.6-.192-.984 0-.328.068-.632.204-.912.136-.288.324-.536.564-.744.248-.208.54-.372.876-.492.336-.12.708-.18 1.116-.18.864 0 1.548.204 2.052.612.512.4.812.984.9 1.752h-.936c-.104-.544-.316-.932-.636-1.164-.32-.24-.78-.36-1.38-.36-.592 0-1.04.132-1.344.396a1.255 1.255 0 0 0-.444.996c0 .208.024.396.072.564.056.16.156.3.3.42.152.12.36.228.624.324a6.72 6.72 0 0 0 1.068.228c.48.072.9.168 1.26.288.36.12.664.276.912.468s.432.428.552.708c.128.28.192.624.192 1.032 0 .36-.076.696-.228 1.008a2.472 2.472 0 0 1-.612.804c-.264.224-.58.4-.948.528-.36.128-.752.192-1.176.192zM25.355 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM32.091 10.108c-.44 0-.848-.072-1.224-.216a3.054 3.054 0 0 1-.972-.636 3.12 3.12 0 0 1-.648-1.008 3.626 3.626 0 0 1-.228-1.32v-.096c0-.48.08-.916.24-1.308.16-.4.376-.74.648-1.02.28-.28.604-.496.972-.648.376-.16.772-.24 1.188-.24.328 0 .644.04.948.12.312.08.588.208.828.384.248.168.456.392.624.672.168.28.276.62.324 1.02h-.984c-.08-.496-.284-.848-.612-1.056-.32-.208-.696-.312-1.128-.312a1.93 1.93 0 0 0-.804.168c-.24.112-.452.272-.636.48a2.23 2.23 0 0 0-.42.744 2.991 2.991 0 0 0-.156.996v.096c0 .776.188 1.364.564 1.764.384.392.88.588 1.488.588.224 0 .436-.032.636-.096a1.651 1.651 0 0 0 .96-.768c.112-.192.18-.416.204-.672h.924a2.595 2.595 0 0 1-.276.948 2.386 2.386 0 0 1-.576.744c-.24.208-.52.372-.84.492-.32.12-.668.18-1.044.18zM38.335 10.108a2.83 2.83 0 0 1-.876-.132 1.724 1.724 0 0 1-.684-.42 2.145 2.145 0 0 1-.456-.756c-.112-.304-.168-.672-.168-1.104V3.724h.996v3.924c0 .552.116.956.348 1.212.24.256.608.384 1.104.384.224 0 .44-.036.648-.108.208-.072.392-.18.552-.324.16-.144.288-.324.384-.54.096-.216.144-.464.144-.744V3.724h.996V10h-.996v-.996c-.144.296-.388.556-.732.78-.336.216-.756.324-1.26.324zM43.216 3.724h.996v1.128c.2-.352.452-.64.756-.864.312-.232.748-.356 1.308-.372v.936a4.461 4.461 0 0 0-.852.12 1.647 1.647 0 0 0-.66.324 1.472 1.472 0 0 0-.408.612c-.096.248-.144.564-.144.948V10h-.996V3.724zM50 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM56.496 10.108c-.408 0-.788-.068-1.14-.204a2.683 2.683 0 0 1-.9-.612 3.01 3.01 0 0 1-.588-.984 4.01 4.01 0 0 1-.204-1.32v-.096c0-.48.072-.92.216-1.32.144-.4.344-.744.6-1.032.256-.296.564-.524.924-.684.36-.16.756-.24 1.188-.24.528 0 .956.112 1.284.336.328.216.584.476.768.78V.724h.996V10h-.996V8.92c-.088.152-.208.3-.36.444a2.792 2.792 0 0 1-.516.384 2.874 2.874 0 0 1-.6.252c-.216.072-.44.108-.672.108zm.108-.828c.288 0 .56-.048.816-.144.256-.096.476-.24.66-.432.184-.2.328-.448.432-.744.112-.304.168-.656.168-1.056v-.096c0-.808-.18-1.404-.54-1.788-.352-.384-.836-.576-1.452-.576-.624 0-1.112.208-1.464.624-.352.416-.528 1.008-.528 1.776v.096c0 .392.048.736.144 1.032.104.296.24.54.408.732.176.192.38.336.612.432.232.096.48.144.744.144zM67.712 10.108c-.512 0-.948-.112-1.308-.336a2.38 2.38 0 0 1-.816-.804V10h-.996V.724h.996V4.78a1.92 1.92 0 0 1 .348-.432c.152-.144.32-.268.504-.372.192-.112.396-.2.612-.264.216-.064.436-.096.66-.096.408 0 .788.072 1.14.216.352.144.652.352.9.624.256.272.456.604.6.996.144.392.216.832.216 1.32v.096c0 .48-.068.92-.204 1.32a3.103 3.103 0 0 1-.576 1.02 2.583 2.583 0 0 1-.9.672 2.937 2.937 0 0 1-1.176.228zm-.096-.828c.624 0 1.1-.2 1.428-.6.328-.408.492-.996.492-1.764V6.82c0-.4-.052-.748-.156-1.044a2.095 2.095 0 0 0-.42-.732 1.53 1.53 0 0 0-.612-.444 1.798 1.798 0 0 0-.744-.156c-.288 0-.56.048-.816.144a1.71 1.71 0 0 0-.648.444c-.184.192-.328.44-.432.744a3.152 3.152 0 0 0-.156 1.044v.096c0 .8.192 1.396.576 1.788.384.384.88.576 1.488.576zM73.63 9.352l-2.46-5.628h1.068l1.92 4.5 1.74-4.5h1.02l-3.468 8.46h-1.008l1.188-2.832zM87.127 3.669A3.138 3.138 0 0 0 86.1 2.95a3.09 3.09 0 0 0-1.228-.25c-.448 0-.848.086-1.187.26a2.199 2.199 0 0 0-.662.497v-.191a.387.387 0 0 0-.214-.348.323.323 0 0 0-.14-.03h-1.315a.314.314 0 0 0-.254.116.377.377 0 0 0-.1.262v8.97c0 .1.034.188.1.258a.34.34 0 0 0 .254.103h1.341a.342.342 0 0 0 .244-.103.336.336 0 0 0 .11-.259v-3.06c.178.202.417.357.702.464.35.134.72.203 1.093.203.43 0 .848-.082 1.242-.248a3.124 3.124 0 0 0 1.04-.724c.305-.326.545-.709.707-1.128a3.93 3.93 0 0 0 .263-1.477c0-.54-.086-1.037-.263-1.477a3.387 3.387 0 0 0-.706-1.12zm-1.204 3.24c-.073.19-.18.362-.315.51a1.415 1.415 0 0 1-1.065.466c-.2.001-.4-.04-.584-.12a1.484 1.484 0 0 1-.49-.346 1.593 1.593 0 0 1-.32-.51 1.738 1.738 0 0 1-.115-.63c0-.224.04-.435.115-.631a1.532 1.532 0 0 1 .804-.846c.185-.086.386-.13.59-.129.215 0 .414.044.593.13.177.083.338.199.474.341a1.622 1.622 0 0 1 .425 1.135c0 .225-.037.436-.112.63zM95.298 2.89h-1.33a.339.339 0 0 0-.246.11.384.384 0 0 0-.108.266v.166a1.856 1.856 0 0 0-.602-.472 2.525 2.525 0 0 0-1.166-.258 3.227 3.227 0 0 0-2.284.964 3.554 3.554 0 0 0-.734 1.123 3.827 3.827 0 0 0-.275 1.477c0 .54.092 1.037.275 1.477.184.434.427.817.728 1.128a3.146 3.146 0 0 0 2.277.973c.437 0 .834-.088 1.173-.259.25-.13.456-.287.608-.471v.177a.34.34 0 0 0 .11.259.341.341 0 0 0 .244.104h1.33a.324.324 0 0 0 .25-.105.349.349 0 0 0 .102-.258V3.267a.377.377 0 0 0-.1-.262.325.325 0 0 0-.252-.115zM93.502 6.9a1.55 1.55 0 0 1-.312.511c-.136.143-.296.26-.473.344-.178.085-.38.129-.596.129-.207 0-.407-.044-.59-.13a1.501 1.501 0 0 1-.791-.855 1.766 1.766 0 0 1-.112-.62c0-.225.038-.436.112-.632.075-.193.181-.364.314-.504.137-.143.3-.26.478-.342.182-.085.382-.129.59-.129.215 0 .417.044.595.13.178.085.338.2.473.341a1.623 1.623 0 0 1 .424 1.135c0 .215-.037.424-.112.622zM108.567 6.094a2.265 2.265 0 0 0-.654-.402c-.247-.101-.509-.181-.785-.235l-1.014-.204c-.26-.05-.441-.117-.543-.203a.328.328 0 0 1-.136-.264c0-.11.063-.2.189-.282.137-.086.329-.13.566-.13.26 0 .518.053.757.157.243.106.471.226.67.36.295.187.546.162.727-.053l.487-.57a.543.543 0 0 0 .152-.357c0-.128-.064-.245-.185-.351-.207-.184-.533-.378-.971-.568-.437-.192-.987-.29-1.637-.29-.427 0-.82.058-1.168.172-.35.116-.65.276-.893.474-.245.204-.438.44-.57.713a2 2 0 0 0-.198.875c0 .56.167 1.017.496 1.358.328.333.766.56 1.304.67l1.054.232c.3.062.528.132.675.21.129.067.19.163.19.297 0 .12-.061.227-.188.324-.133.104-.342.155-.622.155a1.83 1.83 0 0 1-.831-.19 3.056 3.056 0 0 1-.678-.458.995.995 0 0 0-.307-.17c-.126-.037-.268.003-.431.13l-.583.461c-.169.145-.24.32-.209.522.029.194.19.394.491.62.269.193.614.368 1.029.518.415.151.901.229 1.453.229.444 0 .854-.058 1.215-.172.362-.119.681-.278.941-.48a2.056 2.056 0 0 0 .819-1.663c0-.319-.053-.6-.165-.836a1.843 1.843 0 0 0-.447-.6zM114.383 7.73a.363.363 0 0 0-.295-.192.55.55 0 0 0-.343.113c-.095.062-.198.11-.306.141a.75.75 0 0 1-.426.013.43.43 0 0 1-.181-.093.554.554 0 0 1-.143-.204.92.92 0 0 1-.059-.362v-2.46h1.731c.099 0 .188-.04.266-.117a.368.368 0 0 0 .112-.26V3.268a.369.369 0 0 0-.115-.268.38.38 0 0 0-.263-.109h-1.732V1.216a.354.354 0 0 0-.108-.27.347.347 0 0 0-.243-.104h-1.344a.36.36 0 0 0-.34.226.371.371 0 0 0-.027.148V2.89h-.767a.324.324 0 0 0-.255.115.385.385 0 0 0-.098.262V4.31a.4.4 0 0 0 .212.346c.044.021.092.032.14.03h.768v2.925c0 .39.069.726.2 1.003.132.274.305.504.514.676.217.178.465.31.731.388.27.084.551.126.833.126.385 0 .75-.061 1.094-.18a2.13 2.13 0 0 0 .861-.552c.152-.181.17-.381.046-.581l-.463-.76zM121.672 2.89h-1.329a.339.339 0 0 0-.244.11.39.39 0 0 0-.08.122.394.394 0 0 0-.027.144v.166a1.906 1.906 0 0 0-.605-.472c-.335-.173-.726-.258-1.168-.258-.42 0-.834.083-1.226.249a3.24 3.24 0 0 0-1.055.715 3.528 3.528 0 0 0-.734 1.123 3.79 3.79 0 0 0-.276 1.477c0 .54.092 1.037.275 1.477.184.434.428.817.729 1.128a3.138 3.138 0 0 0 2.273.973 2.59 2.59 0 0 0 1.175-.259c.255-.13.457-.287.612-.471v.177a.34.34 0 0 0 .108.259.343.343 0 0 0 .243.104h1.329a.335.335 0 0 0 .252-.105.364.364 0 0 0 .102-.258V3.267a.38.38 0 0 0-.1-.262.332.332 0 0 0-.115-.087.311.311 0 0 0-.139-.028zM119.876 6.9a1.534 1.534 0 0 1-.786.855 1.362 1.362 0 0 1-.594.129c-.207 0-.405-.044-.588-.13a1.516 1.516 0 0 1-.792-.855 1.757 1.757 0 0 1-.113-.62c0-.225.037-.436.112-.632.073-.187.179-.358.314-.504.138-.143.3-.26.479-.342.184-.086.385-.13.588-.129.217 0 .415.044.594.13.181.085.34.2.472.341.134.143.24.313.314.504a1.73 1.73 0 0 1 0 1.253zM128.978 7.64l-.763-.593c-.146-.118-.284-.15-.404-.1a.742.742 0 0 0-.279.205 2.527 2.527 0 0 1-.583.535c-.192.122-.444.183-.742.183-.219 0-.42-.04-.6-.122a1.423 1.423 0 0 1-.469-.342 1.575 1.575 0 0 1-.308-.51 1.751 1.751 0 0 1-.106-.617c0-.228.034-.438.106-.632.07-.192.173-.363.308-.503.135-.144.295-.26.472-.342.187-.088.391-.132.597-.13.298 0 .547.064.742.187.198.126.396.306.584.534.078.092.17.16.278.206.122.048.259.016.401-.101l.762-.594a.53.53 0 0 0 .201-.269.437.437 0 0 0-.034-.365 3.329 3.329 0 0 0-1.18-1.127c-.504-.291-1.108-.441-1.784-.441a3.519 3.519 0 0 0-2.51 1.033c-.322.322-.576.71-.747 1.137a3.68 3.68 0 0 0-.273 1.407c0 .495.093.968.273 1.402.173.424.427.808.747 1.128a3.527 3.527 0 0 0 2.51 1.034c.676 0 1.28-.149 1.784-.444a3.286 3.286 0 0 0 1.182-1.13.411.411 0 0 0 .055-.173.415.415 0 0 0-.023-.182.624.624 0 0 0-.197-.273zM136.06 9.045l-2.104-3.143 1.801-2.415c.094-.139.119-.272.075-.397-.031-.09-.116-.2-.334-.2h-1.425a.52.52 0 0 0-.234.058.482.482 0 0 0-.209.205L132.191 5.2h-.349V.363a.37.37 0 0 0-.099-.26.352.352 0 0 0-.253-.103h-1.332a.37.37 0 0 0-.337.22.346.346 0 0 0-.027.143V9.29c0 .103.038.193.11.259a.353.353 0 0 0 .254.104h1.333a.328.328 0 0 0 .251-.105.346.346 0 0 0 .075-.119.333.333 0 0 0 .024-.14V6.927h.386l1.571 2.446c.112.187.267.281.46.281h1.491c.226 0 .32-.11.358-.202.054-.13.038-.262-.047-.406zM102.863 2.89h-1.489a.389.389 0 0 0-.298.122.544.544 0 0 0-.13.249l-1.099 4.167h-.268l-1.182-4.167a.66.66 0 0 0-.113-.247.329.329 0 0 0-.264-.124h-1.544c-.199 0-.325.066-.372.193a.588.588 0 0 0-.002.37l1.887 5.865c.03.093.08.17.145.232a.388.388 0 0 0 .281.104h.798l-.066.19-.19.547a.872.872 0 0 1-.29.426.7.7 0 0 1-.442.148.956.956 0 0 1-.4-.09 1.842 1.842 0 0 1-.35-.209.62.62 0 0 0-.335-.115h-.016c-.13 0-.243.074-.334.216l-.474.708c-.193.304-.086.504.039.615.234.224.528.399.875.524.344.125.723.186 1.126.186.682 0 1.252-.187 1.689-.565.435-.376.756-.887.952-1.524l2.188-7.258c.05-.155.05-.284.005-.389-.037-.08-.125-.174-.327-.174z" fill="#011B33"/>
    </svg>`,light:zI};return`
    <style>
      #inline-button-`.concat(n.inlineId,` {
        position: relative;
        text-align: center;
        display: inline-block;
      }
      #inline-button-`).concat(n.inlineId,`__trigger {
        `).concat((i=n.variant||"normal",s={normal:`
    background: linear-gradient(180deg,#44b669 0,#40ad57);
    text-shadow: 1px 1px 1px rgba(0,0,0,.1);
    color: #ffffff;
  `,light:`
    background: white;
    text-shadow: none;
    color: #011b33;
  `},"".concat(`
    box-sizing: border-box;
    display: inline-block;
    line-height: 1;
    white-space: nowrap;
    margin: 0 0 10px;
    text-align: center;
    -webkit-appearance: none;
    outline: none;
    font-size: 14px;
    font-weight: 600;
    border-radius: 6px;
    cursor: pointer;
    padding: 16px 24px;
    box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.15);
    transition: all .3s ease;
    border: none;
    min-width: 190px;
  `).concat(s[i])),`
      }
      #inline-button-`).concat(n.inlineId,`__trigger:hover {
        box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.2);
      }
      #inline-button-`).concat(n.inlineId,`__trigger:active {
        transform: translateY(3px);
      }
    </style>
    <button id="inline-button-`).concat(n.inlineId,'__trigger" data-inline-id="').concat(n.inlineId,'">').concat(n.text||"Pay"," ").concat(n.currency||"NGN"," ").concat(n.amount,`</button>
    <div id="inline-button-`).concat(n.inlineId,`__wordmark">
      `).concat(a[n.wordmarkVariant||"normal"],`
    </div>
  `)})(t),t.parent.parentNode.insertBefore(r,t.parent.nextSibling),e=bG(r.getElementsByTagName("button"),1)[0]}return e})({inlineId:Zr.id,amount:df.amount/100,currency:df.currency,id:df.buttonId,text:df.buttonText,variant:df.buttonVariant,wordmarkVariant:df.buttonWordmarkVariant,parent:a1()}).addEventListener("click",(function(t){t.preventDefault(),d4?Zr.resumeTransaction(d4.accessCode):d4=Zr.newTransaction(ns(ns({},df),{},{onSuccess:function(e){var r,n,i,s,a,o;r={type:"hidden",name:"reference",value:e.reference,parent:t9},n=r.type,i=r.value,s=r.name,a=r.parent,(o=document.createElement("input")).type=n,o.value=i,o.name=s,a.appendChild(o),t9.submit()}}))}))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WG="type.googleapis.com/google.protobuf.Int64Value",GG="type.googleapis.com/google.protobuf.UInt64Value";function JI(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function K3(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>K3(e));if(typeof t=="function"||typeof t=="object")return JI(t,e=>K3(e));throw new Error("Data cannot be encoded in JSON: "+t)}function _v(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case WG:case GG:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>_v(e)):typeof t=="function"||typeof t=="object"?JI(t,e=>_v(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class v1 extends Nc{constructor(e,r,n){super(`${pb}/${e}`,r||""),this.details=n}}function KG(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function XG(t,e){let r=KG(t),n=r,i;try{const s=e&&e.error;if(s){const a=s.status;if(typeof a=="string"){if(!r9[a])return new v1("internal","internal");r=r9[a],n=a}const o=s.message;typeof o=="string"&&(n=o),i=s.details,i!==void 0&&(i=_v(i))}}catch{}return r==="ok"?null:new v1(r,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YG{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||n.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3="us-central1";function QG(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new v1("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class JG{constructor(e,r,n,i,s=X3,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new YG(r,n,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=X3}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function ZG(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function eK(t,e,r){return(n=>rK(t,e,n,{}))}async function tK(t,e,r,n){r["Content-Type"]="application/json";let i;try{i=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}function rK(t,e,r,n){const i=t._url(e);return nK(t,i,r,n)}async function nK(t,e,r,n){r=K3(r);const i={data:r},s={},a=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);a.authToken&&(s.Authorization="Bearer "+a.authToken),a.messagingToken&&(s["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(s["X-Firebase-AppCheck"]=a.appCheckToken);const o=n.timeout||7e4,l=QG(o),c=await Promise.race([tK(e,i,s,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new v1("cancelled","Firebase Functions instance was deleted.");const d=XG(c.status,c.json);if(d)throw d;if(!c.json)throw new v1("internal","Response is not valid JSON object.");let p=c.json.data;if(typeof p>"u"&&(p=c.json.result),typeof p>"u")throw new v1("internal","Response is missing data field.");return{data:_v(p)}}const n9="@firebase/functions",i9="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iK="auth-internal",sK="app-check-internal",aK="messaging-internal";function oK(t,e){const r=(n,{instanceIdentifier:i})=>{const s=n.getProvider("app").getImmediate(),a=n.getProvider(iK),o=n.getProvider(aK),l=n.getProvider(sK);return new JG(s,a,o,l,i,t)};p0(new Zu(pb,r,"PUBLIC").setMultipleInstances(!0)),$l(n9,i9,e),$l(n9,i9,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(t=t5(),e=X3){const n=ah(un(t),pb).getImmediate({identifier:e}),i=qw("functions");return i&&cK(n,...i),n}function cK(t,e,r){ZG(un(t),e,r)}function uK(t,e,r){return eK(un(t),e)}oK(fetch.bind(self));const dK=lK();async function fK(t){const r=await uK(dK,"initOrder")({total:t}),{checkoutUrl:n,accessCode:i,orderId:s,paystackReference:a}=r.data;return new Promise((o,l)=>{new QI().resumeTransaction(i,{onSuccess:()=>{console.log("Payment successful"),o({status:!0,message:"Payment successful",data:{checkoutUrl:n,orderId:s,paystackReference:a}})},onCancel:()=>{console.log("User cancelled"),o({status:!1,message:"Payment cancelled"})},onError:()=>{console.log("Payment failed"),o({status:!1,message:"Payment cancelled"})},onLoad:()=>{console.log("Page is loaded")}})})}const kv=async()=>{const t=await Fn(dr(gt,"pharmacies"));return await Promise.all(t.docs.map(async r=>{const n={id:r.id,...r.data()};if(n.lat&&n.lon)n.coordinates={latitude:Number(n.lat),longitude:Number(n.lon)};else if(n.address)try{const s=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(n.address)}&limit=1`)).json();s&&s[0]&&(n.coordinates={latitude:Number(s[0].lat),longitude:Number(s[0].lon)})}catch{}return n}))},mb=async({vendorId:t,customerId:e,role:r})=>{const n=`${t}__${e}`,i=or(gt,"threads",n);if(!(await is(i)).exists()){const[a,o]=await Promise.all([is(or(gt,"pharmacies",t)),is(or(gt,"users",e))]),l=a.exists()?a.data().name:"Pharmacy",c=o.exists()?o.data().displayName:"Customer";await _c(i,{id:n,vendorId:t,customerId:e,vendorName:l,customerName:c,lastMessage:"",lastBy:null,lastAt:Qs(),unread:{[t]:0,[e]:0},createdAt:Qs()})}return n},Y3=async(t,{senderId:e,to:r,text:n})=>{const i=dr(gt,"threads",t,"messages"),s=await dp(i,{senderId:e,to:r,text:n||"",createdAt:Qs(),read:!1,status:"sent",deliveredAt:null,readAt:null});return await ys(or(gt,"threads",t),{lastMessage:n||"",lastBy:e,lastAt:Qs(),[`unread.${r}`]:mv(1)}),setTimeout(async()=>{await ys(s,{status:"delivered",deliveredAt:Qs()})},1e3),s.id},Ev=async(t,e)=>{await ys(or(gt,"threads",t),{[`unread.${e}`]:0});const r=Tr(dr(gt,"threads",t,"messages"),zr("to","==",e),zr("read","==",!1),Zs("createdAt","desc"),dh(50)),n=await Fn(r);if(!n.empty){const i=G6(gt),s=Qs();n.docs.forEach(a=>{i.update(a.ref,{read:!0,status:"read",readAt:s})}),await i.commit()}},ZI=async(t,e)=>{const r=or(gt,"threads",t,"messages",e);await ys(r,{status:"delivered",deliveredAt:Qs()})},eP=(t,e,r,n=50)=>{const i=Tr(dr(gt,"threads",t,"messages"),Zs("createdAt","desc"),dh(n));return ri(i,s=>{const a=s.docs.map(o=>({id:o.id,...o.data()})).reverse();e(a)},s=>r?.(s))},T5=(t,e,r,n={})=>{if(!t?.uid||!t?.role)return()=>{};const i=dr(gt,"threads"),s=t.role==="customer"?Tr(i,zr("customerId","==",t.uid)):Tr(i,zr("vendorId","==",t.uid)),a=n.noSort?s:Tr(s,Zs("lastAt","desc"));return ri(a,o=>e(o.docs.map(l=>({id:l.id,...l.data()}))),o=>r?.(o))},N5=(t,e=null)=>{const r=dr(gt,"products"),n=e?Tr(r,zr("pharmacyId","==",e),Zs("createdAt","desc")):Tr(r,Zs("createdAt","desc"));return ri(n,i=>t(i.docs.map(s=>({id:s.id,...s.data()}))),i=>console.error("listenProducts error:",i))},tP=async t=>{const e=dr(gt,"products");await dp(e,{...t,createdAt:Qs()})},rP=async(t,e)=>{const r=G6(gt);t.forEach(n=>{const i=or(dr(gt,"products"));r.set(i,{...n,pharmacyId:e,price:Number(n.price),stock:Number(n.stock||0),createdAt:Qs()})}),await r.commit()},y1=async(t,e,r=1)=>{const n=or(dr(gt,"users",t,"cart"));await _c(n,{productId:e,qty:r})},Vx=(t,e)=>Eo(or(gt,"users",t,"cart",e)),Q3=async({customerId:t,pharmacyId:e,items:r,total:n,email:i})=>{const s=await fK(n),{data:a,status:o}=s;return o&&_c(or(gt,"orders",a.orderId),{customerId:t,customerEmail:i,items:r.map(l=>({productId:l.productId,pharmacyId:l.pharmacyId,price:l.price,quantity:l.quantity||1,status:"pending",paid:!1,transferReference:null,transferStatus:null})),total:n,paystackReference:a.paystackReference,status:"paid",paidAt:Qs(),createdAt:Qs()}),o},nP=async(t=5,e)=>{if(!e)return[];const n=(await Fn(Tr(dr(gt,"products"),zr("pharmacyId","==",e)))).docs.map(o=>({id:o.id,...o.data()}));if(n.length===0)return[];const i=await Fn(Tr(dr(gt,"orders"),zr("pharmacyId","==",e))),s={};i.forEach(o=>{(o.data().items||[]).forEach(c=>{s[c.productId]||(s[c.productId]=0),s[c.productId]+=c.quantity||1})});const a=n.map(o=>({...o,sold:s[o.id]||0}));return a.sort((o,l)=>l.sold!==o.sold?l.sold-o.sold:(l.dateAdded?.toMillis?.()||0)-(o.dateAdded?.toMillis?.()||0)),a.slice(0,t).map(o=>({id:o.id,name:o.name,sold:o.sold,dateAdded:o.dateAdded}))};async function iP({pharmacyId:t,customerId:e,chatThreadId:r,drugs:n,startDate:i,duration:s,notes:a}){return await dp(dr(gt,"prescriptions"),{pharmacyId:t,customerId:e,chatThreadId:r,drugs:n,startDate:i,duration:s,notes:a,status:"active",createdAt:Qs(),updatedAt:Qs()})}async function sP(t){const e=Tr(dr(gt,"prescriptions"),zr("chatThreadId","==",t));return(await Fn(e)).docs.map(n=>({id:n.id,...n.data()}))}async function aP({customerId:t}){const r=(await Fn(Tr(dr(gt,"prescriptions"),zr("customerId","==",t),zr("requirePurchase","==",!0),zr("fulfilled","!=",!0)))).docs.map(s=>({id:s.id,...s.data()}));if(!r.length)return;const n=await Fn(Tr(dr(gt,"orders"),zr("customerId","==",t),zr("status","==","fulfilled"))),i=[];n.forEach(s=>{(s.data().items||[]).forEach(o=>{i.push(o.productId)})});for(const s of r)s.drugs.every(o=>o.productId&&i.includes(o.productId))&&await ys(or(gt,"prescriptions",s.id),{fulfilled:!0})}const oP=async(t,e,r)=>{const n=or(gt,"wishlists",`${t}_${e}`);await _c(n,{userId:t,productId:e,productData:r,createdAt:Qs()})},lP=async(t,e)=>{const r=or(gt,"wishlists",`${t}_${e}`);await Eo(r)},cP=async(t,e)=>{const r=or(gt,"wishlists",`${t}_${e}`);return(await is(r)).exists()},uP=(t,e,r=console.error)=>{const n=Tr(dr(gt,"wishlists"),zr("userId","==",t),Zs("createdAt","desc"));return ri(n,i=>{const s=i.docs.map(a=>({id:a.id,...a.data()}));e(s)},r)},dP=async(t,e,r)=>{const n=or(gt,"vendorBookmarks",`${t}_${e}`);await _c(n,{userId:t,vendorId:e,vendorData:r,createdAt:Qs()})},fP=async(t,e)=>{const r=or(gt,"vendorBookmarks",`${t}_${e}`);await Eo(r)},hP=async(t,e)=>{const r=or(gt,"vendorBookmarks",`${t}_${e}`);return(await is(r)).exists()},pP=(t,e,r=console.error)=>{const n=Tr(dr(gt,"vendorBookmarks"),zr("userId","==",t),Zs("createdAt","desc"));return ri(n,i=>{const s=i.docs.map(a=>({id:a.id,...a.data()}));e(s)},r)},hK=Object.freeze(Object.defineProperty({__proto__:null,addProduct:tP,addToCart:y1,addToWishlist:oP,addVendorBookmark:dP,bulkAddProducts:rP,createPrescription:iP,fulfillPrescriptionIfOrdered:aP,getAllPharmacies:kv,getBestSellingProducts:nP,getOrCreateThread:mb,getPrescriptionsForThread:sP,isInWishlist:cP,isVendorBookmarked:hP,listenProducts:N5,listenThreadMessagesPaginated:eP,listenUserBookmarkedVendors:pP,listenUserThreads:T5,listenUserWishlist:uP,markMessageDelivered:ZI,markThreadRead:Ev,placeOrder:Q3,removeFromCart:Vx,removeFromWishlist:lP,removeVendorBookmark:fP,sendChatMessage:Y3},Symbol.toStringTag,{value:"Module"}));async function mP(t){t&&await $H(t)}async function pK(t){await UH(Yd,t)}const gP=M.createContext(),In=()=>M.useContext(gP);function mK({children:t}){const[e,r]=M.useState(null),[n,i]=M.useState(null),[s,a]=M.useState(!0);M.useEffect(()=>GH(Yd,async g=>{if(r(g),g){const m=or(gt,"users",g.uid),w=await is(m);w.exists()&&i(w.data())}else i(null);a(!1)}),[]);const o=(g,m)=>zH(Yd,g,m),l=async({email:g,password:m,displayName:w,role:y,address:k,lat:T,lon:O})=>{const{user:P}=await iI(Yd,g,m);w&&await sI(P,{displayName:w});const V={uid:P.uid,email:g,displayName:w,role:y};return k&&(V.address=k),T&&(V.lat=T),O&&(V.lon=O),await _c(or(gt,"users",P.uid),V),y==="pharmacy"&&await _c(or(gt,"pharmacies",P.uid),{id:P.uid,name:w||"Pharmacy",email:g,address:k||"",etaMins:30,phone:""}),await mP(P),{user:P,verificationSent:!0}},c=async()=>{const g=new Zc;return await T7(Yd,g)},d=async g=>{const m=new Zc;try{const w=await T7(Yd,m),{user:y}=w,k=or(gt,"users",y.uid),T=await is(k);if(T.exists()){if(T.data().role!=="customer")throw new Error("This email is associated with a pharmacy account. Please use pharmacy sign-in instead.");return{user:y,verificationSent:!1,isNewUser:!1,existingCustomer:!0}}else{const O={uid:y.uid,email:y.email,displayName:y.displayName,role:"customer",address:g?.address||"Location not available",lat:g?.latitude,lon:g?.longitude,createdAt:new Date().toISOString(),authMethod:"google"};return await _c(k,O),{user:y,verificationSent:!1,isNewUser:!0}}}catch(w){throw w.code==="auth/account-exists-with-different-credential"?new Error('An account with this email already exists. Please sign in with your email and password instead, or use the "Sign In with Google" option.'):w.code==="auth/popup-closed-by-user"?new Error("Sign-in was cancelled. Please try again."):w.code==="auth/popup-blocked"?new Error("Pop-up was blocked by your browser. Please allow pop-ups and try again."):w}},p=()=>KH(Yd);return f.jsx(gP.Provider,{value:{user:e,profile:n,loading:s,signIn:o,signUp:l,signInWithGoogle:c,signUpWithGoogle:d,logout:p},children:t})}const gK="modulepreload",xK=function(t){return"/"+t},s9={},Xu=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){let l=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");i=l(r.map(c=>{if(c=xK(c),c in s9)return;s9[c]=!0;const d=c.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":gK,d||(g.as="script"),g.crossOrigin="",g.href=c,o&&g.setAttribute("nonce",o),document.head.appendChild(g),d)return new Promise((m,w)=>{g.addEventListener("load",m),g.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function a9(t){return f.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:f.jsx("path",{d:"M6.66683 0C8.34653 0 9.95744 0.66726 11.1452 1.85499C12.3329 3.04272 13.0002 4.65363 13.0002 6.33333C13.0002 8.01304 12.3329 9.62395 11.1452 10.8117C9.95744 11.9994 8.34653 12.6667 6.66683 12.6667C4.98712 12.6667 3.37622 11.9994 2.18849 10.8117C1.00076 9.62395 0.333496 8.01304 0.333496 6.33333C0.333496 4.65363 1.00076 3.04272 2.18849 1.85499C3.37622 0.66726 4.98712 0 6.66683 0ZM6.66683 0.666667C5.16394 0.666667 3.7226 1.26369 2.65989 2.3264C1.59719 3.3891 1.00016 4.83044 1.00016 6.33333C1.00016 7.83623 1.59719 9.27757 2.65989 10.3403C3.7226 11.403 5.16394 12 6.66683 12C7.41099 12 8.14786 11.8534 8.83537 11.5687C9.52288 11.2839 10.1476 10.8665 10.6738 10.3403C11.2 9.81407 11.6174 9.18939 11.9021 8.50187C12.1869 7.81436 12.3335 7.07749 12.3335 6.33333C12.3335 4.83044 11.7365 3.3891 10.6738 2.3264C9.61106 1.26369 8.16972 0.666667 6.66683 0.666667ZM6.3335 2.66667H7.00016V6.28L10.1335 8.08667L9.80016 8.66667L6.3335 6.66667V2.66667Z",fill:"#848484"})})}/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vK=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xP=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wK=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:a,...o},l)=>M.createElement("svg",{ref:l,...yK,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:xP("lucide",i),...o},[...a.map(([c,d])=>M.createElement(c,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=(t,e)=>{const r=M.forwardRef(({className:n,...i},s)=>M.createElement(wK,{ref:s,iconNode:e,className:xP(`lucide-${vK(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=Xr("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bK=Xr("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=Xr("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=Xr("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=Xr("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _K=Xr("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kK=Xr("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=Xr("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EK=Xr("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=Xr("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=Xr("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=Xr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SK=Xr("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CK=Xr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TK=Xr("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=Xr("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=Xr("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NK=Xr("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AK=Xr("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=Xr("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IK=Xr("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=Xr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=Xr("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=Xr("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=Xr("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PK=Xr("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RK=Xr("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FK=Xr("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=Xr("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=Xr("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=Xr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=Xr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=Xr("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=Xr("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LK=Xr("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=Xr("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=Xr("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DK=Xr("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OK=Xr("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=Xr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function MK({className:t="",children:e,...r}){return f.jsx("div",{className:`rounded-3xl border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-gray-800 ${t}`,...r,children:e})}function Wl({name:t,image:e,category:r,size:n=64,className:i="",alt:s,style:a={},imgClassName:o="",roundedClass:l="rounded-xl"}){const[c,d]=M.useState(!1),p=(r||"")?.toString().toLowerCase().trim();let g=null;p&&(p.includes("prescription")?g="PrescriptionDrugs.svg":p.includes("over")?g="Over-the-counter Icon.svg":p.includes("syrup")?g="Syrup.svg":p.includes("therapeutic")?g="Therapeutic.svg":p.includes("control")?g="ControlledSubstances.svg":p.includes("target")&&(g="TargetSystem.svg"));const m="GeneralPill.svg",w=g||m,y={width:n,height:n,...a};return e&&!c?f.jsx("img",{src:e,alt:s||t||"Product image",className:`${l} object-cover ${o}`.trim(),style:y,onError:()=>d(!0)}):f.jsx("div",{className:`${i}`,style:y,children:f.jsx("img",{src:`/${encodeURIComponent(w)}`,alt:s||(r?`${r} icon`:"product icon"),className:`${l} object-contain w-full h-full`,onError:k=>{if(w!==m){k.currentTarget.src=`/${encodeURIComponent(m)}`;return}}})})}function h4({product:t,vendorName:e,vendorDistanceKm:r,vendorEtaMins:n,onOpen:i,onAdd:s,cardWidth:a="172px",cardHeight:o="199px",nameSize:l="15.54px",nameWeight:c="medium",priceSize:d="14.43px",priceColor:p="#BDBDBD",priceWeight:g="medium",addColor:m="#36A5FF",borderRadius:w}){const[y,k]=M.useState(!1),[T,O]=M.useState(!1),[P,V]=M.useState(!1),Y=t?.image&&!y;return f.jsxs(MK,{className:`p-3 cursor-pointer relative flex flex-col justify-between overflow-hidden card-interactive group transition-all duration-200 ${T?"scale-95":"hover:scale-105"}`,onClick:i,onMouseDown:()=>O(!0),onMouseUp:()=>O(!1),onMouseLeave:()=>O(!1),style:{width:a,height:o,borderRadius:w||"10px"},children:[f.jsx("div",{className:"overflow-hidden flex items-center justify-center bg-white dark:bg-gray-800 transition-all duration-200 group-hover:bg-gradient-to-br group-hover:from-blue-50 group-hover:to-sky-50 dark:group-hover:from-blue-900/20 dark:group-hover:to-sky-900/20",style:{height:`calc(${o} * 0.6)`,borderRadius:w||"3px"},children:Y?f.jsx("img",{src:t.image,alt:t.name||"product image",className:"object-contain h-full w-full transition-transform duration-200 group-hover:scale-110",onError:()=>k(!0),style:{maxWidth:"100%"}}):f.jsx("div",{className:"flex items-center justify-center w-full h-full transition-transform duration-200 group-hover:scale-110",style:{padding:8},children:f.jsx(Wl,{name:t.name,image:t.image,category:t.category,size:Math.min(30,Math.max(48,parseInt(o,10)/2))})})}),f.jsxs("div",{className:"mt-1 text-xs text-zinc-500 font-poppins font-light truncate flex items-center gap-2 transition-colors duration-200 group-hover:text-zinc-600",style:{fontSize:"10px",maxWidth:"100%"},children:[f.jsx("span",{className:"truncate",children:e}),(typeof r=="number"||typeof n=="number")&&f.jsxs("span",{className:"text-[9px] text-zinc-400 whitespace-nowrap transition-colors duration-200 group-hover:text-sky-500",children:[typeof r=="number"?`${r.toFixed(1)} km`:"",typeof r=="number"&&typeof n=="number"?"  ":"",typeof n=="number"?`${n} min`:""]})]}),f.jsx("div",{className:"mt-1 font-poppins transition-colors duration-200 group-hover:text-zinc-800 dark:group-hover:text-white",style:{fontSize:l,fontWeight:c,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:t.name,children:t.name}),f.jsxs("div",{className:"font-poppins transition-colors duration-200 group-hover:text-sky-600",style:{fontSize:d,color:p,fontWeight:g,overflow:"hidden"},children:["",Number(t.price).toLocaleString()]}),f.jsx("button",{onClick:G=>{G.stopPropagation(),V(!0),setTimeout(()=>V(!1),150),s()},className:`absolute bottom-3 right-3 h-8 w-8 flex items-center justify-center border border-solid btn-interactive transition-all duration-200 hover:scale-110 hover:shadow-lg ${P?"scale-90 shadow-inner":"active:scale-95"}`,style:{borderColor:m,borderRadius:w||"6px",background:P?m:"transparent",boxShadow:P?`inset 0 2px 4px rgba(0,0,0,0.2), 0 0 0 2px ${m}40`:void 0},onMouseEnter:G=>{P||(G.target.style.backgroundColor=m,G.target.querySelector("svg").style.color="white")},onMouseLeave:G=>{P||(G.target.style.backgroundColor="transparent",G.target.querySelector("svg").style.color=m)},children:f.jsx(LK,{color:P?"white":m,size:16,className:`transition-all duration-200 ${P?"animate-pulse":""}`})}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",style:{borderRadius:w||"10px"}})]})}function ng({className:t="",style:e={},lines:r=3,desktopAlign:n="center"}){const i=n==="left"?"lg:justify-start lg:pl-12":"lg:justify-center";return f.jsxs("div",{className:`w-screen h-screen flex items-center justify-center ${i} bg-white dark:bg-gray-900 ${t}`,style:e,role:"status","aria-live":"polite",children:[f.jsx("div",{className:"animate-fadeInScale",children:f.jsxs("picture",{children:[f.jsx("source",{media:"(min-width: 1024px)",srcSet:"/DesktopLoading.svg"}),f.jsx("img",{src:"/Loading.svg",alt:"Loading",className:"w-full h-full object-contain lg:object-cover lg:w-screen lg:h-screen animate-pulse-gentle"})]})}),f.jsx("span",{className:"sr-only",children:"Loading"})]})}function hp(){const[t,e]=M.useState(null),[r,n]=M.useState("Fetching location..."),[i,s]=M.useState(null),[a,o]=M.useState(!0);return M.useEffect(()=>{if(!navigator.geolocation){n("Location not supported"),s("Geolocation is not supported by this browser"),o(!1);return}const l={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5};navigator.geolocation.getCurrentPosition(async c=>{const{latitude:d,longitude:p}=c.coords;e({latitude:d,longitude:p}),s(null);try{const m=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${d}&lon=${p}`,{timeout:5e3})).json();n(m.display_name||"Location unavailable")}catch(g){console.warn("Failed to fetch address:",g),n("Location detected")}finally{o(!1)}},c=>{switch(console.warn("Geolocation error:",c),s(c.message),o(!1),c.code){case c.PERMISSION_DENIED:n("Location permission denied");break;case c.POSITION_UNAVAILABLE:n("Location unavailable");break;case c.TIMEOUT:n("Location request timeout");break;default:n("Location error occurred");break}},l)},[]),{userCoords:t,location:r,locationError:i,isLoading:a}}function wP(t){if(!t)return null;if(t.coordinates&&typeof t.coordinates=="object"){if(t.coordinates.latitude&&t.coordinates.longitude)return{latitude:Number(t.coordinates.latitude),longitude:Number(t.coordinates.longitude)};if(t.coordinates.lat&&t.coordinates.lng)return{latitude:Number(t.coordinates.lat),longitude:Number(t.coordinates.lng)};if(t.coordinates.lat&&t.coordinates.lon)return{latitude:Number(t.coordinates.lat),longitude:Number(t.coordinates.lon)}}if(t.latitude&&t.longitude)return{latitude:Number(t.latitude),longitude:Number(t.longitude)};if(t.lat&&t.lng)return{latitude:Number(t.lat),longitude:Number(t.lng)};if(t.lat&&t.lon)return{latitude:Number(t.lat),longitude:Number(t.lon)};if(t.location&&typeof t.location=="object"){if(t.location.latitude&&t.location.longitude)return{latitude:Number(t.location.latitude),longitude:Number(t.location.longitude)};if(t.location.lat&&t.location.lng)return{latitude:Number(t.location.lat),longitude:Number(t.location.lng)}}if(t.coords&&typeof t.coords=="object"){if(t.coords.latitude&&t.coords.longitude)return{latitude:Number(t.coords.latitude),longitude:Number(t.coords.longitude)};if(t.coords.lat&&t.coords.lng)return{latitude:Number(t.coords.lat),longitude:Number(t.coords.lng)}}return null}function P5(t,e,r,n){const s=(r-t)*Math.PI/180,a=(n-e)*Math.PI/180,o=Math.sin(s/2)**2+Math.cos(t*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(a/2)**2;return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}function bP(t,e="driving"){if(!Number.isFinite(t)||t<=0)return null;const r={walking:5,cycling:15,driving:30},n=r[e]||r.driving,i=t/n,s=Math.round(i*60);let a;if(s<1)a="< 1 min";else if(s<60)a=`${s} min${s!==1?"s":""}`;else{const o=Math.floor(s/60),l=s%60;l===0?a=`${o} hr${o!==1?"s":""}`:a=`${o}h ${l}m`}return{minutes:s,formatted:a,distance:t,mode:e}}function BK(t,e,r="driving"){if(!t||t.length===0||!e)return null;let n=null,i=1/0,s=null;return t.forEach(a=>{const o=wP(a);if(o){const l=P5(e.latitude,e.longitude,o.latitude,o.longitude);l<i&&(i=l,n=a,s=bP(l,r))}}),n?{pharmacy:n,eta:s,distance:i}:null}function xb(t,e,r="driving"){const n=wP(t);if(!n||!e)return null;const i=P5(e.latitude,e.longitude,n.latitude,n.longitude);return bP(i,r)}const _P=M.createContext(),qg=()=>{const t=M.useContext(_P);if(!t)throw new Error("useSettings must be used within a SettingsProvider");return t},Nr={SWIPE_NAVIGATION:"swipe_navigation_enabled",THEME_MODE:"theme_mode",LANGUAGE:"language",FONT_SIZE:"font_size",BIOMETRIC_LOGIN:"biometric_login_enabled",AUTO_LOCK:"auto_lock_timeout",LOCATION_PRECISION:"location_precision",MESSAGE_READ_RECEIPTS:"message_read_receipts",ORDER_NOTIFICATIONS:"order_notifications_enabled",PRESCRIPTION_REMINDERS:"prescription_reminders_enabled",DATA_SAVER_MODE:"data_saver_mode_enabled",HIGH_CONTRAST:"high_contrast_enabled",REDUCE_MOTION:"reduce_motion_enabled"},p4={[Nr.SWIPE_NAVIGATION]:!1,[Nr.THEME_MODE]:"light",[Nr.LANGUAGE]:"en",[Nr.FONT_SIZE]:"small",[Nr.BIOMETRIC_LOGIN]:!1,[Nr.AUTO_LOCK]:"5min",[Nr.LOCATION_PRECISION]:"precise",[Nr.MESSAGE_READ_RECEIPTS]:!0,[Nr.ORDER_NOTIFICATIONS]:!0,[Nr.PRESCRIPTION_REMINDERS]:!0,[Nr.DATA_SAVER_MODE]:!1,[Nr.HIGH_CONTRAST]:!1,[Nr.REDUCE_MOTION]:!1},VK=({children:t})=>{const[e,r]=M.useState(p4),[n,i]=M.useState(!0);M.useEffect(()=>{try{const c=localStorage.getItem("app_settings");if(c){const d=JSON.parse(c);r(p=>({...p,...d}))}}catch(c){console.error("Error loading settings:",c)}finally{i(!1)}},[]),M.useEffect(()=>{if(!n)try{localStorage.setItem("app_settings",JSON.stringify(e))}catch(c){console.error("Error saving settings:",c)}},[e,n]);const l={settings:e,updateSetting:(c,d)=>{r(p=>({...p,[c]:d}))},getSetting:c=>e[c]??p4[c],resetSettings:()=>{r(p4)},isLoading:n};return f.jsx(_P.Provider,{value:l,children:t})},UK=M.createContext(),d9={en:{home:"Home",cart:"Cart",messages:"Messages",orders:"Orders",settings:"Settings",notifications:"Notifications",search:"Search",back:"Back",continue:"Continue",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",loading:"Loading...",message:"Message",sent:"Sent",delivered:"Delivered",read:"Read",type_message:"Type a message...",send:"Send",add_to_cart:"Add to Cart",buy_now:"Buy Now",price:"Price",out_of_stock:"Out of Stock",in_stock:"In Stock",general:"General",appearance:"Appearance",language_region:"Language & Region",privacy_security:"Privacy & Security",accessibility:"Accessibility",swipe_navigation:"Swipe Navigation",data_saver_mode:"Data Saver Mode",read_receipts:"Read Receipts",theme:"Theme",font_size:"Font Size",app_language:"App Language"},yo:{home:"Ile",cart:"Agolo",messages:"Ifirane",orders:"Awn ibere",settings:"Eto",notifications:"Iwifun",search:"Wa",back:"Pada",continue:"Tsiwaju",save:"Tju",cancel:"Fagile",delete:"Pa r",edit:"atunk",loading:"N gbe...",message:"Ifirane",sent:"Ti fi rane",delivered:"Ti gba",read:"Ti ka",type_message:"K ifirane...",send:"Fi rane",general:"Gbogbogbo",appearance:"Irisi",language_region:"Ede & Agbegbe",privacy_security:"Airi & Aabo",accessibility:"Iwle",swipe_navigation:"Lil plu fif",data_saver_mode:"Ipo itju data",read_receipts:"Iwe eriwo kika",theme:"Koko",font_size:"Iwn lta",app_language:"Ede ohun elo"},ha:{home:"Gida",cart:"Kaya",messages:"Saonni",orders:"Oda",settings:"Saiti",notifications:"Sanarwa",search:"Nema",back:"Baya",continue:"Ci gaba",save:"Ajiye",cancel:"Soke",delete:"Share",edit:"Gyara",loading:"Ana lodawa...",general:"Gabaaya",appearance:"Bayyanar",language_region:"Harshe da Yanki",privacy_security:"Sirri da Tsaro",accessibility:"Samun dama",app_language:"Harshen app"},ig:{home:"l",cart:"Ngwa aha",messages:"Ozi",orders:"t",settings:"Nhazi",notifications:"kwa",search:"Ch",back:"Laghachi az",continue:"Gaa n'ihu",save:"Chekwaa",cancel:"Kagbuo",delete:"Hichap",edit:"Dezie",loading:"Na-ebu...",general:"Izugbe",appearance:"dd",language_region:"Ass na Mpaghara",privacy_security:"Nzuzo na Nchekwa",accessibility:"nweta ohere",app_language:"Ass ngwa"},fr:{home:"Accueil",cart:"Panier",messages:"Messages",orders:"Commandes",settings:"Paramtres",notifications:"Notifications",search:"Rechercher",back:"Retour",continue:"Continuer",save:"Enregistrer",cancel:"Annuler",delete:"Supprimer",edit:"Modifier",loading:"Chargement...",general:"Gnral",appearance:"Apparence",language_region:"Langue et Rgion",privacy_security:"Confidentialit et Scurit",accessibility:"Accessibilit",app_language:"Langue de l'application"}},vb=()=>{const{getSetting:t}=qg(),e=t(Nr.LANGUAGE)||"en";return{t:M.useMemo(()=>(n,i=n)=>d9[e]?.[n]||d9.en?.[n]||i,[e]),currentLanguage:e}},zK=({children:t})=>{const{t:e,currentLanguage:r}=vb();return f.jsx(UK.Provider,{value:{t:e,currentLanguage:r},children:t})},$K=({user:t,profile:e,location:r,navigate:n,etaInfo:i,closestPharmacy:s,vendors:a,userCoords:o,t:l})=>os.createPortal(f.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] w-full bg-white dark:bg-gray-900 border-b dark:border-gray-700 flex-shrink-0 px-2",children:f.jsx("div",{className:"w-full mx-auto pt-8 pb-4",children:f.jsx("div",{className:"pt-4 pb-2 w-full",children:f.jsxs("div",{className:"w-full mx-auto px-0",children:[f.jsxs("div",{className:"flex justify-between items-center w-full h-[14px] md:h-[14px] lg:h-[20px]",children:[f.jsxs("div",{className:"flex flex-col justify-center",children:[f.jsxs("div",{className:"text-[17px] md:text-[26px] lg:text-[20px] font-regular font-poppins text-gray-900 dark:text-white",children:[l("hello","Hello"),t?`, ${t.displayName?.split(" ")[0]||l("friend","Friend")}`:""]}),f.jsx("span",{className:"text-zinc-500 dark:text-zinc-400 text-[10px] md:text-[12px] lg:text-[14px] font-thin font-poppins truncate max-w-xs md:max-w-md lg:max-w-lg",title:r,children:r})]}),e?.role==="customer"?f.jsxs("button",{onClick:()=>n("/pharmacy-map"),className:"flex flex-col justify-center items-end hover:bg-blue-50 transition-colors rounded-lg p-2 -m-2 group",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(a9,{className:"h-4 w-4 md:h-5 md:w-5 lg:h-6 lg:w-6 mb-0.5 mt-0.5 text-sky-500"}),f.jsx(vP,{className:"h-4 w-4 md:h-3 md:w-3 lg:h-4 lg:w-4 text-sky-500 group-hover:text-blue-500 group-hover:translate-x-1 transition-all duration-300 animate-pulse"})]}),f.jsx("span",{className:"text-[10px] md:text-[12px] lg:text-[14px] font-poppins font-thin text-right leading-tight mt-1.5 group-hover:text-blue-600 transition-colors",children:i&&s?`${i.formatted} to ${a[s.vendorId]?.name||"nearest pharmacy"}`:o?"Calculating ETA...":"Fetching location..."})]}):f.jsxs("div",{className:"flex flex-col justify-center items-end",children:[f.jsx("div",{className:"flex items-center gap-1",children:f.jsx(a9,{className:"h-3 w-3 md:h-5 md:w-5 lg:h-6 lg:w-6 mb-0.5 mt-0.5 text-sky-500"})}),f.jsx("span",{className:"text-[10px] md:text-[12px] lg:text-[14px] font-poppins font-thin text-right leading-tight mt-1.5 text-gray-800",children:e?.role==="pharmacy"?"Your pharmacy location":"Location services"})]})]}),f.jsx("div",{className:"w-full"})]})})})}),document.body);function kP(){const[t,e]=M.useState([]),[r,n]=M.useState({}),[i,s]=M.useState([]),[a,o]=M.useState(!1),[l,c]=M.useState(-1),[d,p]=M.useState(null),[g,m]=M.useState(!1),[w,y]=M.useState(""),{user:k,profile:T}=In(),{t:O}=vb(),P=Ci(),{userCoords:V,location:Y}=hp(),[G,L]=M.useState(null),[N,C]=M.useState(null),R=M.useRef(null),[A,F]=M.useState(!1),[B,te]=M.useState(!1),[pe,Ee]=M.useState("All"),[ve,re]=M.useState([]),W=M.useRef(null),[ne,Q]=M.useState(0),I=M.useRef([]),H=Pe=>Ke=>{I.current[Pe]=Ke||null},[X,J]=M.useState(1),[ue,we]=M.useState(1),fe=M.useMemo(()=>{let Pe=t;const Ke=w.trim().toLowerCase();Ke&&d?.products&&Array.isArray(d.products)&&(Pe=d.products);let ot=Pe;return pe&&pe!=="All"&&(ot=Pe.filter(We=>{const Lt=We.category||"";return pe==="Over-the-counter"?Lt.toLowerCase().includes("over"):pe==="Controlled"?Lt.toLowerCase().includes("control"):Lt===pe})),Ke?ot.filter(We=>{const Lt=(We.name||"").toLowerCase(),St=(We.category||"").toLowerCase(),Pt=Array.isArray(We.tags)?We.tags.join(" ").toLowerCase():"",mt=We.vendorId?r[We.vendorId]||{}:{},_t=(mt.name||"").toLowerCase(),Xt=(mt.location||"").toLowerCase(),Kt=[We.price,We.mrp,We.cost,We.listPrice].map(Ve=>Ve==null?"":String(Ve)).join(" ").toLowerCase(),Ut=Lt.includes(Ke)||St.includes(Ke)||Pt.includes(Ke)||_t.includes(Ke)||Xt.includes(Ke)||Kt.includes(Ke),xr=Ke.replace(/[^0-9.]/g,""),Yr=xr&&(Kt.includes(xr)||We.price&&String(We.price).includes(xr));return Ut||!!Yr}):ot},[t,w,pe,r,d]),me=M.useMemo(()=>{const Pe=w.trim().toLowerCase();return Pe?d?.pharmacies&&Array.isArray(d.pharmacies)?d.pharmacies.slice(0,6):i.filter(Ke=>{const ot=(Ke.name||Ke.displayName||"").toLowerCase(),We=(Ke.address||Ke.city||Ke.location||"").toLowerCase();return ot.includes(Pe)||We.includes(Pe)}).slice(0,6):[]},[i,w,d]);M.useEffect(()=>N5(e),[]),M.useEffect(()=>{async function Pe(){if(!V)return;let Ke=i;if(Ke.length===0&&(Ke=await kv(),!Ke||Ke.length===0))return;const ot=BK(Ke,V,"driving");ot?(L(ot.pharmacy),C(ot.eta)):(L(null),C(null))}Pe()},[V,i]),M.useEffect(()=>{if(!R.current)return;let Pe,Ke;const ot=()=>{F(!0),clearTimeout(Ke),Ke=setTimeout(()=>F(!1),2e3)},We=R.current;return We.addEventListener("scroll",ot),Pe=setInterval(()=>{!A&&We&&(We.scrollBy({left:120,behavior:"smooth"}),We.scrollLeft+We.offsetWidth>=We.scrollWidth-5&&We.scrollTo({left:0,behavior:"smooth"}))},2500),()=>{clearInterval(Pe),We.removeEventListener("scroll",ot),Ke&&clearTimeout(Ke)}},[A,fe.length]),M.useEffect(()=>{async function Pe(){const Ke=Array.from(new Set(t.map(We=>We.vendorId).filter(Boolean))),ot={};await Promise.all(Ke.map(async We=>{try{const Lt=await is(or(gt,"pharmacies",We));if(Lt.exists()){const St=Lt.data()||{};ot[We]={name:St.name||"Pharmacy",location:St.address||St.city||St.location||"",coords:St.coordinates||null}}}catch{}})),n(ot)}t.length&&Pe()},[t]),M.useEffect(()=>{let Pe=!0;return(async()=>{try{const Ke=await kv();if(!Pe)return;s(Array.isArray(Ke)?Ke:[])}catch{}})(),()=>{Pe=!1}},[]),M.useEffect(()=>{const Pe=w.trim();if(!Pe){p(null),m(!1);return}const Ke=new AbortController,ot=setTimeout(async()=>{m(!0);try{const We=await fetch(`/.netlify/functions/search?q=${encodeURIComponent(Pe)}`,{signal:Ke.signal,headers:{Accept:"application/json"}});if(!We.ok)throw new Error("server search failed");const Lt=await We.json();p(Lt||null)}catch{p(null)}finally{m(!1)}},300);return()=>{Ke.abort(),clearTimeout(ot)}},[w]),M.useEffect(()=>{const Pe=ri(dr(gt,"infoCards"),Ke=>{re(Ke.docs.map(ot=>({id:ot.id,...ot.data()})))});return()=>Pe()},[]);const be=M.useMemo(()=>[...fe].filter(Pe=>Pe.stock===void 0||Pe.stock>0).sort((Pe,Ke)=>(Ke.viewCount||0)+(Ke.sold||0)-((Pe.viewCount||0)+(Pe.sold||0))),[fe]),Le=M.useMemo(()=>[...t].filter(Pe=>Pe.createdAt).sort((Pe,Ke)=>(Ke.createdAt?.seconds||0)-(Pe.createdAt?.seconds||0)).slice(0,12),[t]),ee=M.useMemo(()=>[...t].filter(Pe=>Pe.createdAt).sort((Pe,Ke)=>(Ke.createdAt?.seconds||0)-(Pe.createdAt?.seconds||0)),[t]),Be=30,Re=Math.max(1,Math.ceil(be.length/Be)),ae=be.slice(0,X*Be),$e=12,qe=Math.max(1,Math.ceil(ee.length/$e)),it=ee.slice(0,ue*$e);M.useEffect(()=>J(1),[be.length]),M.useEffect(()=>we(1),[ee.length]);const oe=Pe=>{if(!Pe)return"";const Ke=String(Pe).trim();return/^(https?:)?\/\//i.test(Ke)||/^mailto:/i.test(Ke)||/^tel:/i.test(Ke)||Ke.startsWith("/")?Ke:`https://${Ke}`},je=Pe=>Pe?/^(https?:)?\/\//i.test(Pe)||/^mailto:/i.test(Pe)||/^tel:/i.test(Pe):!1,Ge=async Pe=>{P(`/product/${Pe}`),e(Ke=>Ke.map(ot=>ot.id===Pe?{...ot,viewCount:(ot.viewCount||0)+1}:ot));try{const{doc:Ke,updateDoc:ot,increment:We}=await Xu(async()=>{const{doc:Lt,updateDoc:St,increment:Pt}=await Promise.resolve().then(()=>FA);return{doc:Lt,updateDoc:St,increment:Pt}},void 0);await ot(Ke(gt,"products",Pe),{viewCount:We(1)})}catch{}};M.useEffect(()=>{const Pe=W.current;if(!Pe)return;let Ke=0;const ot=()=>{cancelAnimationFrame(Ke),Ke=requestAnimationFrame(()=>{const We=Pe.scrollLeft+Pe.clientWidth/2;let Lt=0,St=1/0;I.current.forEach((Pt,mt)=>{if(!Pt)return;const _t=Pt.getBoundingClientRect(),Xt=Pe.getBoundingClientRect(),Kt=_t.left-Xt.left+_t.width/2+Pe.scrollLeft,Ut=Math.abs(Kt-We);Ut<St&&(St=Ut,Lt=mt)}),Q(Lt)})};return Pe.addEventListener("scroll",ot,{passive:!0}),ot(),()=>{Pe.removeEventListener("scroll",ot),cancelAnimationFrame(Ke)}},[ve.length]),M.useEffect(()=>{const Pe=W.current;if(!Pe||I.current.length===0||window.matchMedia?.("(prefers-reduced-motion: reduce)").matches)return;let Ke=!1,ot;const We=()=>{Ke=!0,clearTimeout(ot),ot=setTimeout(()=>{Ke=!1},1800)};Pe.addEventListener("pointerdown",We),Pe.addEventListener("wheel",We,{passive:!0}),Pe.addEventListener("touchstart",We,{passive:!0});const Lt=setInterval(()=>{if(Ke)return;const St=(ne+1)%I.current.length,Pt=I.current[St];if(Pt&&Pe){const mt=Pt.offsetLeft,_t=Math.max(0,Math.round(mt-(Pe.clientWidth-Pt.clientWidth)/2));Pe.scrollTo({left:_t,behavior:"smooth"})}},3e3);return()=>{clearInterval(Lt),Pe.removeEventListener("pointerdown",We),Pe.removeEventListener("wheel",We),Pe.removeEventListener("touchstart",We),clearTimeout(ot)}},[ne,ve.length]),k&&k.role;const Tt={Prescription:"PrescriptionDrugs.svg","Over-the-counter":"Over-the-counter Icon.svg",Syrup:"Syrup.svg",Therapeutic:"Therapeutic.svg",Controlled:"ControlledSubstances.svg","Target System":"TargetSystem.svg"};return t.length?f.jsxs(f.Fragment,{children:[f.jsx($K,{user:k,profile:T,location:Y,navigate:P,etaInfo:N,closestPharmacy:G,vendors:r,userCoords:V,t:O}),f.jsx("div",{className:"min-h-screen w-full px-0 pb-20 pt-32 bg-white dark:bg-gray-900",children:f.jsxs("div",{className:"flex-1 overflow-y-auto w-full mx-auto flex flex-col pb-28 px-0",children:[f.jsxs("div",{className:"flex items-center gap-3 border-b border-zinc-300 dark:border-gray-600 dark:border-zinc-600 pb-2",children:[f.jsx(id,{className:"h-5 w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-zinc-400 dark:text-zinc-500"}),f.jsx("input",{value:w,onChange:Pe=>{y(Pe.target.value),o(!0),c(-1)},onKeyDown:Pe=>{if(!(!a||me.length===0))switch(Pe.key){case"ArrowDown":Pe.preventDefault(),c(Ke=>Ke<me.length-1?Ke+1:0);break;case"ArrowUp":Pe.preventDefault(),c(Ke=>Ke>0?Ke-1:me.length-1);break;case"Enter":if(Pe.preventDefault(),l>=0&&l<me.length){const Ke=me[l];y(Ke.name||Ke.displayName||""),o(!1);const ot=Ke.id||Ke.vendorId;ot&&P(`/vendor/${ot}`)}break;case"Escape":o(!1),c(-1);break}},onBlur:()=>{setTimeout(()=>{o(!1),c(-1)},200)},placeholder:"Search drugs, pharmacies",className:"w-full outline-none bg-transparent text-gray-900 dark:text-white placeholder:text-[12px] md:placeholder:text-[14px] lg:placeholder:text-[16px] placeholder:text-[#888888] dark:placeholder:text-[#aaaaaa] placeholder:font-light"})]}),a&&w.trim().length>0&&me.length>0&&f.jsxs("div",{className:"mt-2 left-0 right-0 md:left-6 md:right-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg divide-y dark:divide-gray-700 max-h-56 overflow-auto animate-fade-in",children:[me.map((Pe,Ke)=>f.jsx("button",{onClick:()=>{y(Pe.name||Pe.displayName||""),o(!1);const ot=Pe.id||Pe.vendorId;if(ot)try{P(`/vendor/${ot}`)}catch{window.location.href=`/vendor/${ot}`}},onKeyDown:ot=>{if(ot.key==="Enter"||ot.key===" "){ot.preventDefault();const We=Pe.id||Pe.vendorId;We&&P(`/vendor/${We}`)}},className:`w-full text-left px-4 py-3 focus:outline-none transition-all duration-200 animate-fadeInUp border-b border-gray-100 last:border-b-0 ${Ke===l?"bg-blue-100 border-blue-200":"hover:bg-zinc-50 focus:bg-zinc-100"}`,style:{animationDelay:`${Ke*.05}s`},role:"option",tabIndex:0,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-blue-100 flex-shrink-0",children:f.jsxs("svg",{className:"h-4 w-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"font-medium text-sm text-gray-900 truncate",children:w.trim()&&(Pe.name||Pe.displayName||"").toLowerCase().includes(w.toLowerCase())?f.jsx("span",{children:(Pe.name||Pe.displayName||"").split(new RegExp(`(${w})`,"gi")).map((ot,We)=>ot.toLowerCase()===w.toLowerCase()?f.jsx("span",{className:"bg-yellow-200 px-1 rounded",children:ot},We):ot)}):Pe.name||Pe.displayName}),f.jsx("div",{className:"text-xs text-gray-500 truncate mt-1",children:w.trim()&&(Pe.address||Pe.city||Pe.location||"").toLowerCase().includes(w.toLowerCase())?f.jsx("span",{children:(Pe.address||Pe.city||Pe.location||"").split(new RegExp(`(${w})`,"gi")).map((ot,We)=>ot.toLowerCase()===w.toLowerCase()?f.jsx("span",{className:"bg-yellow-200 px-1 rounded",children:ot},We):ot)}):Pe.address||Pe.city||Pe.location||""})]}),f.jsx("div",{className:"text-xs text-blue-600 font-medium flex-shrink-0",children:"Pharmacy"})]})},Pe.id||Pe.vendorId||Pe.name)),me.length>0&&f.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 text-center bg-gray-50 border-t animate-fade-in",children:"Use  arrow keys to navigate, Enter to select, Esc to close"})]}),f.jsx("div",{className:"mt-3 mb-2 w-full overflow-x-auto scrollbar-hide",children:f.jsx("div",{className:"flex gap-3 min-w-max",children:["All","Prescription","Over-the-counter","Syrup","Therapeutic","Controlled","Target System"].map((Pe,Ke)=>{const ot=Tt[Pe],We=pe===Pe;return f.jsx("button",{className:`flex items-center px-4 py-2 md:px-6 md:py-2.5 lg:px-8 lg:py-3 rounded-full text-[9px] md:text-[12px] lg:text-[14px] font-poppins font-light whitespace-nowrap border transition-all duration-200 btn-interactive animate-fadeInUp ${We?"bg-sky-100 dark:bg-sky-900 border-sky-400 dark:border-gray-600 dark:border-sky-500 text-sky-700 dark:text-sky-300 shadow-md scale-105":"bg-zinc-100 dark:bg-gray-700 text-zinc-700 dark:text-zinc-300 border-zinc-200 dark:border-gray-600 hover:bg-sky-50 dark:hover:bg-sky-800 hover:border-sky-300 dark:border-gray-600 dark:hover:border-sky-500 hover:shadow-sm"}`,style:{animationDelay:`${Ke*.1}s`},onClick:()=>Ee(Pe),children:ot?f.jsxs(f.Fragment,{children:[f.jsx("img",{src:`/${encodeURIComponent(ot)}`,alt:`${Pe} icon`,className:`h-4 w-4 md:h-5 md:w-5 mr-2 object-contain flex-shrink-0 transition-transform duration-200 dark:invert dark:brightness-0 dark:contrast-100 ${We?"scale-110":""}`}),f.jsx("span",{className:"truncate",children:Pe})]}):f.jsx("span",{className:"truncate",children:Pe})},Pe)})})}),ve.length>0&&f.jsx("div",{className:"w-full mt-6 mb-4 overflow-x-auto scrollbar-hide snap-x snap-mandatory scroll-smooth",ref:W,role:"region","aria-label":"Announcements",style:{height:140},children:f.jsx("div",{className:"flex gap-4 md:gap-6 min-w-max h-full",children:ve.map((Pe,Ke)=>{const ot=Pe.bgColor||"#3BA3FF",We=Pe.headerColor||"#ffffff",Lt=Pe.previewColor||(Pe.headerColor?Pe.headerColor+"cc":"#ffffffcc"),St=Pe.linkColor||Pe.linkTextColor||"#ffffff",Pt=Pe.headerFontSize||20,mt=Pe.previewFontSize||13,_t=Pe.linkTextFontSize||Pe.linkFontSize||13;return f.jsxs("div",{ref:H(Ke),className:"relative flex-shrink-0 snap-center rounded-2xl overflow-hidden",style:{width:"90vw",maxWidth:700,minWidth:260,height:"100%",background:ot,position:"relative"},children:[Pe.fullImage&&f.jsx("img",{src:Pe.fullImage,alt:Pe.header||"Info",className:"w-full h-full object-cover",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover"}}),Pe.image&&!Pe.fullImage&&f.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center justify-end pointer-events-none",children:f.jsx("img",{src:Pe.image,alt:"",className:"object-cover",style:{height:"100%",maxWidth:"100%",borderRadius:"0 16px 16px 0"}})}),f.jsx("div",{className:"absolute inset-y-0 right-0",style:{width:"55%",background:"linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.06) 60%, rgba(0,0,0,0.10) 100%)",pointerEvents:"none"}}),f.jsx("div",{className:"relative z-10 h-full flex items-center",children:f.jsxs("div",{className:"px-4 md:px-6 py-5 min-w-0 max-w-[65%] md:max-w-[60%] lg:max-w-[60%]",children:[f.jsx("div",{style:{color:We,fontSize:Pt+"px",lineHeight:1,fontWeight:300,letterSpacing:"-0.02em"},children:Pe.header||""}),Pe.preview&&f.jsx("div",{style:{marginTop:8,color:Lt,fontSize:mt+"px",lineHeight:1.2},children:Pe.preview}),Pe.link&&Pe.linkText&&(()=>{const Xt=oe(Pe.link),Kt=je(Xt);return f.jsx("a",{href:Xt,onClick:Ut=>{if(!Kt){Ut.preventDefault();try{P(Xt)}catch{window.location.href=Xt}}},...Kt?{target:"_blank",rel:"noopener noreferrer"}:{},style:{display:"inline-block",marginTop:12,textDecoration:"underline",color:St,fontSize:_t+"px",fontWeight:500},children:Pe.linkText})})()]})})]},Pe.id)})})}),f.jsxs("div",{className:"mt-2",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsx("div",{className:"text-[15px] md:text-[18px] lg:text-[22px] font-medium font-poppins",children:"New Arrivals"}),f.jsx("button",{className:"text-[13px] md:text-[15px] lg:text-[17px] font-normal font-poppins text-sky-600",onClick:()=>te(!0),children:"view all"})]}),f.jsx("div",{ref:R,className:"w-full overflow-x-auto scrollbar-hide cursor-grab active:cursor-grabbing",style:{overflowX:"auto"},onMouseDown:Pe=>{const Ke=R.current;if(!Ke)return;let ot=Pe.pageX-Ke.offsetLeft,We=Ke.scrollLeft;function Lt(Pt){Ke.scrollLeft=We-(Pt.pageX-Ke.offsetLeft-ot)}function St(){window.removeEventListener("mousemove",Lt),window.removeEventListener("mouseup",St)}window.addEventListener("mousemove",Lt),window.addEventListener("mouseup",St)},children:f.jsx("div",{className:"flex gap-3 md:gap-4 lg:gap-6 min-w-max pb-2",children:Le.map(Pe=>f.jsxs("div",{className:"relative",children:[f.jsx(h4,{product:Pe,onOpen:()=>Ge(Pe.id),onAdd:()=>k?y1(k.uid,Pe.id,1):alert("Please sign in"),cardWidth:"110px",cardHeight:"128px",nameSize:"11px",nameWeight:"medium",nameTracking:"-0.5px",priceSize:"9px",priceColor:"#BDBDBD",priceWeight:"medium",addColor:"#36A5FF",addSize:"9px"}),f.jsx("span",{className:"absolute top-1 left-1 bg-sky-500 text-white text-[9px] font-semibold px-2 py-0.5 rounded-full shadow-sm select-none pointer-events-none",children:"New"})]},Pe.id||Pe.sku))})})]}),B&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:f.jsxs("div",{className:"bg-white rounded-[20px] shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6 relative",children:[f.jsx("button",{className:"absolute top-2 right-2 text-zinc-500 hover:text-zinc-800 text-xl font-bold",onClick:()=>te(!1),"aria-label":"Close",children:""}),f.jsx("div",{className:"text-[20px] md:text-[26px] font-light mb-4 font-poppins text-left",children:"All New Products"}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 justify-items-center",children:it.map(Pe=>f.jsxs("div",{className:"relative flex flex-col items-center",children:[f.jsx(h4,{product:Pe,onOpen:()=>Ge(Pe.id),onAdd:()=>k?y1(k.uid,Pe.id,1):alert("Please sign in"),cardWidth:"110px",cardHeight:"128px",nameSize:"11px",nameWeight:"semi-bold",nameTracking:"-0.5px",priceSize:"9px",priceColor:"#BDBDBD",priceWeight:"medium",addColor:"#36A5FF",addSize:"9px"}),f.jsx("span",{className:"absolute top-1 left-1 bg-sky-500 text-white text-[9px] font-semibold px-2 py-0.5 rounded-full shadow-sm select-none pointer-events-none",children:"New"})]},Pe.id||Pe.sku))}),qe>1&&ue<qe&&f.jsx("div",{className:"flex items-center justify-center gap-3 mt-4",children:f.jsx("button",{className:"px-4 py-2 rounded-full bg-sky-600 text-white hover:bg-sky-700",onClick:()=>we(Pe=>Math.min(qe,Pe+1)),"aria-label":"Load more new arrivals",children:"Load more"})})]})}),f.jsxs("div",{className:"mt-10",children:[f.jsx("div",{className:"text-[15px] md:text-[18px] lg:text-[22px] font-medium font-poppins mb-3",children:"Popular Products"}),f.jsx("div",{className:"grid grid-cols-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3 md:gap-6 lg:gap-8",children:ae.map(Pe=>f.jsx("div",{className:"flex justify-center relative",children:f.jsx(h4,{product:Pe,onOpen:()=>Ge(Pe.id),onAdd:()=>k?y1(k.uid,Pe.id,1):alert("Please sign in"),cardWidth:"128px",cardHeight:"120px",nameSize:"12px",nameWeight:"semi-bold",nameTracking:"-0.5px",nameLineHeight:"-1.1",priceSize:"11px",priceColor:"#BDBDBD",priceWeight:"medium",priceLineHeight:"1.1",addColor:"#36A5FF",addSize:"9px",borderRadius:"10px"},Pe.id||Pe.sku)},(Pe.id||Pe.sku)+"-wrapper"))}),Re>1&&X<Re&&f.jsx("div",{className:"flex items-center justify-center gap-4 mt-4",children:f.jsx("button",{className:"px-4 py-2 rounded-full bg-sky-600 text-white hover:bg-sky-700",onClick:()=>J(Pe=>Math.min(Re,Pe+1)),"aria-label":"Load more popular products",children:"Load more"})})]})]})})]}):f.jsx(ng,{lines:6,className:"my-8"})}function EP({open:t,onClose:e,children:r}){const[n,i]=M.useState(!1),[s,a]=M.useState(!1);return M.useEffect(()=>{t?(a(!0),setTimeout(()=>i(!0),10)):(i(!1),setTimeout(()=>a(!1),300))},[t]),s?f.jsx("div",{className:`fixed inset-0 z-50 flex items-center justify-center px-2 sm:px-4 transition-all duration-300 ${n?"bg-black/30":"bg-black/0"}`,onClick:e,children:f.jsxs("div",{className:`bg-white rounded-2xl shadow-xl max-w-lg w-full p-6 relative max-h-[90vh] overflow-y-auto border border-[#36A5FF] transition-all duration-300 transform ${n?"scale-100 opacity-100 translate-y-0":"scale-95 opacity-0 translate-y-4"}`,style:{borderWidth:1},onClick:o=>o.stopPropagation(),children:[f.jsx("button",{onClick:e,className:"absolute top-3 right-3 text-zinc-400 hover:text-zinc-700 text-xl font-bold focus:outline-none transition-all duration-200 hover:scale-110 hover:bg-zinc-100 rounded-full w-8 h-8 flex items-center justify-center","aria-label":"Close",children:""}),f.jsx("div",{className:"animate-fadeInUp",children:r})]})}):null}const f9=["pending","processing","fulfilled","cancelled"],HK=({title:t})=>os.createPortal(f.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:f.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto",children:f.jsx("h1",{className:"mt-8 text-[28px] sm:text-[35px] md:text-[42px] lg:text-[48px] font-light font-poppins text-gray-900 dark:text-white",children:"Orders"})})}),document.body);function SP(){const{user:t,profile:e}=In(),[r,n]=M.useState([]),[i,s]=M.useState("all"),[a,o]=M.useState({}),[l,c]=M.useState({}),[d,p]=M.useState(null),[g,m]=M.useState([]),w=Ci(),y=Xl(),[k,T]=M.useState(null);M.useEffect(()=>{if(!t||!e)return;const G=e.uid||t.uid;let L;return e.role==="pharmacy"?L=Tr(dr(gt,"orders"),zr("pharmacyId","==",G),Zs("createdAt","desc")):L=Tr(dr(gt,"orders"),zr("customerId","==",G),Zs("createdAt","desc")),ri(L,C=>{n(C.docs.map(R=>({id:R.id,...R.data()})))})},[t,e]),M.useEffect(()=>{const G=y?.state?.highlightOrderId,L=new URLSearchParams(y.search).get("highlight");G?T(G):L&&T(L)},[y]),M.useEffect(()=>{if(!k||r.length===0)return;const G=k,L=setTimeout(()=>{const C=document.getElementById(`order-${G}`);C&&C.scrollIntoView({behavior:"smooth",block:"center"})},250),N=setTimeout(()=>T(null),5e3);return w(y.pathname,{replace:!0,state:{}}),()=>{clearTimeout(L),clearTimeout(N)}},[k,r]);const O=async(G,L)=>{await ys(or(gt,"orders",G),{status:L})},P=i==="all"?r:r.filter(G=>(G.status||"pending")===i),V=G=>{o(L=>({...L,[G]:!L[G]}))};M.useEffect(()=>{async function G(){if(!d||!d.items)return m([]);const N=d.items.map(R=>R.productId).map(R=>is(or(gt,"products",R))),C=await Promise.all(N);m(C.map(R=>R.exists()?{id:R.id,...R.data()}:null))}G()},[d]);function Y(G){const L={};return G.forEach(N=>{const C=N.productId;L[C]?L[C].qty+=Number(N.qty||N.quantity||1):L[C]={...N,qty:Number(N.qty||N.quantity||1)}}),Object.values(L)}return t?f.jsxs(f.Fragment,{children:[f.jsx(HK,{title:"Orders"}),f.jsxs("div",{className:"pt-24 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col",children:[f.jsxs("div",{className:"mt-8 flex gap-2 flex-wrap",children:[f.jsx("button",{className:`px-3 py-1 rounded-full border text-[12px] font-light ${i==="all"?"bg-sky-600 text-white border-sky-600 dark:border-gray-600":"border-zinc-300 dark:border-gray-600 text-zinc-600"}`,onClick:()=>s("all"),children:"All"}),f9.map(G=>f.jsx("button",{className:`px-3 py-1 rounded-full border text-[12px] font-light ${i===G?"bg-sky-600 text-white border-sky-600 dark:border-gray-600":"border-zinc-300 dark:border-gray-600 text-zinc-600"}`,onClick:()=>s(G),children:G.charAt(0).toUpperCase()+G.slice(1)},G))]}),f.jsx("div",{className:"mt-4 space-y-6",children:P.length===0?f.jsx("div",{className:"text-zinc-500 font-extralight text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] text-center py-12 animate-fadeInUp",children:"No orders yet."}):P.map((G,L)=>{const N=G.items||[],C=a[G.id],R=N.length>4,A=C?N:N.slice(0,4),F=G.customerPhone||G.customer_phone||G.phone||"",B=l[G.id];return f.jsxs("div",{id:`order-${G.id}`,className:`relative rounded-[10px] border border-gray-200 dark:border-gray-600 p-4 flex flex-col gap-2 group hover:bg-sky-50 transition-all duration-200 card-interactive animate-fadeInUp ${k===G.id?"ring-4 ring-sky-200 bg-sky-50 scale-102":""}`,style:{cursor:"pointer",animationDelay:`${L*.1}s`},onClick:te=>{te.target.closest(".order-see-more-btn")||e.role==="pharmacy"&&te.target.closest(".order-status-dropdown")||p(G)},children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"font-light text-[14px] sm:text-[15px] md:text-[18px] lg:text-[22px]",children:["Order #",G.id.slice(0,6)]}),f.jsx("div",{className:"text-gray-500 text-[11px] sm:text-[12px] md:text-[14px] lg:text-[16px] font-light",children:G.createdAt?.toDate?.().toLocaleString?.()||""})]}),f.jsxs("div",{className:"text-[14px] sm:text-[15px] md:text-[18px] lg:text-[22px] font-medium",children:["",Number(G.total).toLocaleString()]})]}),e.role==="pharmacy"&&f.jsxs("div",{className:"mt-2",children:[f.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 flex items-center gap-2",children:["Customer: ",G.customerName||G.customerId||G.customer_id||"N/A"]}),f.jsx("div",{className:"text-[12px] text-zinc-400 font-light mb-2",children:G.customerEmail||""}),f.jsx("div",{className:"text-[13px] text-zinc-700 font-medium mb-1",children:"Items:"}),f.jsx("ul",{className:"ml-2 list-disc text-[13px] text-zinc-700",children:A.map((te,pe)=>f.jsxs("li",{children:[f.jsx("span",{children:te.name||te.productId}),f.jsxs("span",{children:[" x",te.qty||te.quantity||1]})]},pe))}),R&&f.jsx("button",{className:"order-see-more-btn text-sky-600 text-xs mt-1 ml-2 font-medium hover:underline focus:outline-none",onClick:te=>{te.stopPropagation(),V(G.id)},children:C?"See less":`See more (${N.length-4} more)`}),f.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[f.jsx("span",{className:"text-[12px] text-zinc-500",children:"Status:"}),f.jsx("select",{className:"order-status-dropdown border rounded px-2 py-1 text-[12px]",value:G.status||"pending",onChange:te=>O(G.id,te.target.value),children:f9.map(te=>f.jsx("option",{value:te,children:te.charAt(0).toUpperCase()+te.slice(1)},te))}),F&&!B&&f.jsx("button",{className:"ml-2 px-3 py-1 rounded-full bg-sky-600 text-white text-[12px] font-light",onClick:te=>{te.stopPropagation(),c(pe=>({...pe,[G.id]:!0}))},children:"Reveal Number"}),F&&B&&f.jsx("span",{className:"ml-2 text-[13px] text-zinc-700 font-medium",children:F})]})]})]},G.id)})}),f.jsx(EP,{open:!!d,onClose:()=>p(null),children:d&&f.jsxs("div",{children:[f.jsxs("div",{className:"text-lg font-medium mb-2",children:["Order #",d.id.slice(0,6)]}),f.jsx("div",{className:"text-zinc-500 text-xs mb-4",children:d.createdAt?.toDate?.().toLocaleString?.()||""}),f.jsx("div",{className:"mb-2 text-[15px] font-medium",children:"Items:"}),f.jsx("ul",{className:"mb-4 space-y-2",children:Y(d.items).map((G,L)=>{const N=g.find(C=>C&&C.id===G.productId);return f.jsxs("li",{className:"flex items-center gap-3",children:[N?f.jsx(Wl,{name:N.name,image:N.image,category:N.category,size:40,roundedClass:"rounded-lg"}):null,f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-poppins font-medium text-[14px]",children:N?N.name:G.productId}),f.jsxs("div",{className:"text-zinc-500 text-xs",children:["Qty: ",G.qty]})]}),f.jsxs("div",{className:"text-[14px] font-medium text-sky-600",children:["",Number(G.price||N?.price||0).toLocaleString()]})]},G.productId)})}),f.jsxs("div",{className:"flex justify-between items-center border-t pt-3 mt-2",children:[f.jsx("div",{className:"text-[15px] font-medium",children:"Total:"}),f.jsxs("div",{className:"text-[15px] font-bold text-sky-700",children:["",Number(d.total).toLocaleString()]})]}),f.jsxs("div",{className:"mt-2 text-xs text-zinc-400",children:["Status: ",d.status||"pending"]})]})})]})]}):f.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[f.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:"Please sign in to continue"}),f.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>w("/auth/landing"),children:"Sign In / Sign Up"})]})}const qK=({title:t})=>os.createPortal(f.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:f.jsx("div",{className:"w-full mt-8 max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto",children:f.jsxs("h1",{className:"text-[25px] font-light leading-none text-gray-900 dark:text-white",children:["My",f.jsx("br",{}),"Conversations"]})})}),document.body);function CP(){const{user:t,profile:e}=In(),[r,n]=M.useState([]),[i,s]=M.useState("");Xl();const a=Ci();M.useEffect(()=>{if(!(!t||!e?.role))return T5({uid:t.uid,role:e.role},n,m=>console.error("listenUserThreads error:",m))},[t?.uid,e?.role]);const o=async m=>{try{await Ev(m.id,t.uid)}catch(w){console.error(w)}if(e?.role==="customer"){const w=m.vendorId||(m.id&&m.id.includes("__")?m.id.split("__")[0]:"");a(w?`/chat/${w}`:`/thread/${m.id}`)}else a(`/thread/${m.id}`)};if(!t)return f.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[f.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:"Please sign in to continue"}),f.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>a("/auth/landing"),children:"Sign In / Sign Up"})]});const l=t?.uid,c=m=>m?.unread?.[l]||0,d=m=>(e?.role==="customer"?m.vendorName:m.customerName)||"",p=m=>m.lastAt?.seconds?new Date(m.lastAt.seconds*1e3):null,g=r.filter(m=>{const w=d(m).toLowerCase(),y=i.toLowerCase();return!y||w.includes(y)||(m.lastMessage||"").toLowerCase().includes(y)});return f.jsxs(f.Fragment,{children:[f.jsx(qK,{title:"My Conversations"}),f.jsxs("div",{className:"min-h-screen pt-24 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 pb-28",children:[f.jsxs("div",{className:"mt-14 flex items-center gap-3 border-b border-zinc-300 dark:border-gray-600 pb-2",children:[f.jsx(id,{className:"h-4 w-4 text-zinc-400"}),f.jsx("input",{placeholder:"Search chats",value:i,onChange:m=>s(m.target.value),className:"w-full outline-none placeholder:text-zinc-400 bg-transparent placeholder:text-sm"})]}),f.jsxs("div",{className:"mt-12 space-y-4 w-full",children:[g.map((m,w)=>f.jsxs("button",{onClick:()=>o(m),className:"w-full rounded-[10px] border border-gray-300 dark:border-gray-600 px-4 py-3 text-left h-[62px] flex items-center gap-3 bg-white hover:bg-zinc-50 transition-all duration-200 card-interactive animate-fadeInUp",style:{animationDelay:`${w*.1}s`},children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-zinc-200 flex items-center justify-center",children:f.jsx("span",{className:"text-zinc-500 text-xs font-semibold",children:(d(m)||"U")[0]})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-sm truncate",children:d(m)}),f.jsx("div",{className:"text-zinc-500 text-[10px] truncate",children:m.lastMessage||"No messages yet."})]}),f.jsxs("div",{className:"flex flex-col items-end justify-between h-full min-w-[48px]",children:[c(m)>0&&f.jsx("span",{className:"bg-sky-500 text-white text-[10px] font-semibold rounded-full px-2 py-0.5 mb-1",children:c(m)}),f.jsx("span",{className:"text-zinc-400 text-[10px]",children:p(m)?.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})||""})]})]},m.id)),g.length===0&&f.jsx("div",{className:"text-zinc-500",children:"No conversations yet."})]})]})]})}function WK(t){return f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:f.jsxs("g",{children:[f.jsx("circle",{cx:"8",cy:"8",r:"8",fill:"#fd9292"}),f.jsx("path",{d:"M5.5 5.5L10.5 10.5M10.5 5.5L5.5 10.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round"})]})})}const GK=({title:t,itemCount:e})=>os.createPortal(f.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:f.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto",children:f.jsx("div",{className:"flex mt-8 items-center justify-between",children:f.jsx("h1",{className:"text-[28px] sm:text-[35px] md:text-[42px] lg:text-[48px] font-light font-poppins text-gray-900 dark:text-white",children:t})})})}),document.body);function TP(){const{user:t}=In(),e=Ci(),{userCoords:r,location:n}=hp(),[i,s]=M.useState([]),[a,o]=M.useState(!1),[l,c]=M.useState(!1),[d,p]=M.useState(""),[g,m]=M.useState(""),[w,y]=M.useState(""),[k,T]=M.useState([]),[O,P]=M.useState(!1),[V,Y]=M.useState(""),[G,L]=M.useState(0);M.useEffect(()=>{if(!t)return;const re=Tr(dr(gt,"users",t.uid,"cart"));return ri(re,async W=>{const ne=await Promise.all(W.docs.map(async Q=>{const I=Q.data(),H=await is(or(gt,"products",I.productId));return{id:Q.id,...I,product:{id:H.id,...H.data()}}}));s(ne)})},[t]),M.useEffect(()=>{t&&!d&&(y(t.email||""),m(t.phoneNumber||""),p(n||"Current location"))},[t,n,d]),M.useEffect(()=>{i.length>0&&r&&R()},[i,r]);const N=M.useMemo(()=>i.reduce((re,W)=>re+(W.product?.price+0||0)*W.qty,0),[i]),C=M.useMemo(()=>N+G,[N,G]),R=async()=>{if(!r||i.length===0){L(0);return}try{const re=[...new Set(i.map(Q=>Q.product?.pharmacyId).filter(Boolean))];let W=0;for(const Q of re){const H=(await is(or(gt,"pharmacies",Q))).data();if(H){let X,J;if(H.coordinates?.latitude&&H.coordinates?.longitude?(X=H.coordinates.latitude,J=H.coordinates.longitude):H.lat&&H.lon?(X=H.lat,J=H.lon):H.latitude&&H.longitude&&(X=H.latitude,J=H.longitude),X&&J){const ue=P5(r.latitude,r.longitude,X,J);W+=ue}}}const ne=Math.round(W*300);L(ne)}catch(re){console.error("Error calculating delivery fee:",re),L(300)}},A=async re=>{if(re.length<3){T([]);return}P(!0);try{const ne=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(re)}&limit=5&countrycodes=ng`)).json();T(ne.map(Q=>Q.display_name))}catch(W){console.error("Error searching addresses:",W),T([])}P(!1)},F=()=>{n&&r&&(p(n),T([]))},B=()=>{o(!0)},te=()=>{o(!1),c(!0)},pe=async()=>{if(!(!t||!i.length||!V))try{const W=i[0].product?.pharmacyId,ne=Ee(),Q={customerId:t.uid,pharmacyId:W,items:ne.map(H=>({productId:H.productId,quantity:H.qty,price:H.product.price,pharmacyId:H.product.pharmacyId})),total:C,subtotal:N,deliveryFee:G,deliveryAddress:d,customerPhone:g,customerEmail:w||t.email,paymentMethod:V};let I;if(V==="online"?I=await Q3(Q):I=await Q3({...Q,paymentStatus:"pending",orderStatus:"confirmed"}),console.log(`OrderStatus: ${I}`),I===!1){alert("Order placement failed");return}for(const H of i)await Vx(t.uid,H.id);c(!1),o(!1),alert(V==="cash"?"Order placed successfully! You'll pay on delivery.":"Payment successful! Your order has been placed."),e("/customer/orders")}catch(re){console.error("Checkout error:",re),alert("Checkout failed. Please try again.")}},Ee=()=>{const re=new Map;for(const W of i){const ne=W.product?.id;if(ne)if(re.has(ne)){const Q=re.get(ne);re.set(ne,{...Q,qty:Q.qty+W.qty,ids:[...Q.ids||[Q.id],W.id]})}else re.set(ne,{...W,ids:[W.id]})}return Array.from(re.values())},ve=M.useMemo(()=>{const re=new Map;for(const W of i){const ne=W.product?.id;if(ne)if(re.has(ne)){const Q=re.get(ne);re.set(ne,{...Q,qty:Q.qty+W.qty,ids:[...Q.ids||[Q.id],W.id]})}else re.set(ne,{...W,ids:[W.id]})}return Array.from(re.values())},[i]);return t?t&&i.length===0?f.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:f.jsx("div",{className:"text-zinc-500 font-extralight text-[14px]",children:"Your cart is empty."})}):f.jsxs(f.Fragment,{children:[f.jsx(GK,{title:"Cart",itemCount:i.length}),f.jsxs("div",{className:"pt-24 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col",children:[f.jsxs("div",{className:"mt-10 grid grid-cols-2 gap-3",children:[ve.map((re,W)=>f.jsxs("div",{className:"relative rounded-xl border border-zinc-200 p-2 flex flex-col items-center gap-2 min-w-0 card-interactive animate-fadeInUp",style:{animationDelay:`${W*.1}s`},children:[f.jsx("button",{onClick:()=>re.ids.forEach(ne=>Vx(t.uid,ne)),className:"absolute top-2 right-2 z-10 p-0.5 rounded-full hover:scale-110 transition-all duration-200 hover:bg-red-50 icon-interactive","aria-label":"Remove",children:f.jsx(WK,{className:"w-5 h-5 text-red-500"})}),f.jsx(Wl,{name:re.product?.name,image:re.product?.image,category:re.product?.category,size:35,roundedClass:"rounded-xl"}),f.jsxs("div",{className:"flex-1 w-full text-center",children:[f.jsx("div",{className:"font-semibold text-[12px] sm:text-[13px] md:text-[14px] lg:text-[15px] truncate",children:re.product?.name}),f.jsxs("div",{className:"text-zinc-500 text-[10px] sm:text-[11px] md:text-[12px] lg:text-[13px]",children:["",Number(re.product?.price||0).toLocaleString()]})]}),f.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f.jsx("button",{className:"w-6 h-6 rounded-full border border-zinc-300 dark:border-gray-600 flex items-center justify-center text-[18px] font-light disabled:opacity-40 btn-interactive transition-all duration-200 hover:border-sky-500 hover:text-sky-600",onClick:async()=>{re.qty>1&&await Vx(t.uid,re.ids[0])},disabled:re.qty<=1,"aria-label":"Decrease quantity",children:"-"}),f.jsx("span",{className:"text-[13px] font-poppins w-6 text-center font-medium",children:re.qty}),f.jsx("button",{className:"w-6 h-6 rounded-full border border-zinc-300 dark:border-gray-600 flex items-center justify-center text-[18px] font-light btn-interactive transition-all duration-200 hover:border-sky-500 hover:text-sky-600",onClick:async()=>{if(re.product?.id){const{addToCart:ne}=await Xu(async()=>{const{addToCart:Q}=await Promise.resolve().then(()=>hK);return{addToCart:Q}},void 0);await ne(t.uid,re.product.id,1)}},"aria-label":"Increase quantity",children:"+"})]})]},re.product?.id)),ve.length===0&&f.jsx("div",{className:"text-zinc-500 font-extralight text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] col-span-2",children:"Your cart is empty."})]}),ve.length>0&&f.jsxs("div",{className:"mt-6 rounded-xl border border-sky-400 dark:border-gray-600 p-3",children:[f.jsxs("div",{className:"flex flex-col gap-2 text-[13px] sm:text-[15px] md:text-[18px] lg:text-[22px] font-regular",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{children:"Subtotal"}),f.jsxs("span",{className:"font-semibold text-[12px] sm:text-[15px]",children:["",Number(N).toLocaleString()]})]}),G>0&&f.jsxs("div",{className:"flex items-center justify-between text-[11px] sm:text-[13px] text-gray-600",children:[f.jsx("span",{children:"Delivery Fee"}),f.jsxs("span",{children:["",Number(G).toLocaleString()]})]}),f.jsxs("div",{className:"flex items-center justify-between border-t pt-2 font-medium",children:[f.jsx("span",{children:"Total"}),f.jsxs("span",{className:"font-semibold text-[12px] sm:text-[15px]",children:["",Number(C).toLocaleString()]})]})]}),f.jsx("button",{onClick:B,className:"mt-4 w-full rounded-full border bg-sky-400 text-white py-2 text-[12px] sm:text-[14px] lg:text-[16px] font-light",children:"Proceed to Checkout"})]})]}),a&&f.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-50 p-4",children:f.jsx("div",{className:"bg-white rounded-3xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsx("h2",{className:"text-[20px] font-light font-poppins text-sky-600",children:"Order Summary"}),f.jsx("button",{onClick:()=>o(!1),className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:f.jsx(ew,{className:"w-5 h-5 text-gray-500"})})]}),f.jsxs("div",{className:"mb-6",children:[f.jsxs("h3",{className:"text-[16px] font-medium mb-3",children:["Items (",ve.length,")"]}),f.jsx("div",{className:"space-y-3",children:ve.map(re=>f.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[f.jsx(Wl,{name:re.product?.name,image:re.product?.image,category:re.product?.category,size:40,roundedClass:"rounded-lg"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"text-[14px] font-medium truncate",children:re.product?.name}),f.jsxs("div",{className:"text-[12px] text-gray-600",children:["Qty: ",re.qty]})]}),f.jsxs("div",{className:"text-[14px] font-medium text-sky-600",children:["",Number((re.product?.price||0)*re.qty).toLocaleString()]})]},re.product?.id))})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"text-[16px] font-medium mb-3",children:"Delivery Details"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-[14px] font-medium text-gray-700 mb-2",children:"Delivery Address *"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",value:d,onChange:re=>{p(re.target.value),A(re.target.value)},placeholder:"Enter delivery address",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg text-[14px] pr-10"}),f.jsx("button",{onClick:F,className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 text-sky-600 hover:bg-sky-50 rounded-full transition-colors",title:"Use current location",children:f.jsx(Z3,{className:"w-4 h-4"})})]}),k.length>0&&f.jsx("div",{className:"mt-2 bg-white border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-40 overflow-y-auto relative z-[10000]",children:k.map((re,W)=>f.jsx("button",{onClick:()=>{p(re),T([])},className:"w-full text-left p-3 hover:bg-gray-50 text-[13px] border-b last:border-b-0",children:re},W))})]}),f.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-[14px] font-medium text-gray-700 mb-2",children:"Phone Number *"}),f.jsx("input",{type:"tel",value:g,onChange:re=>m(re.target.value),placeholder:"Enter phone number",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg text-[14px]"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-[14px] font-medium text-gray-700 mb-2",children:"Email (Optional)"}),f.jsx("input",{type:"email",value:w,onChange:re=>y(re.target.value),placeholder:"Enter email address",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg text-[14px]"})]})]})]})]}),f.jsxs("div",{className:"mb-6 p-4 bg-sky-50 rounded-lg",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2",children:[f.jsx("span",{className:"text-[14px]",children:"Subtotal"}),f.jsxs("span",{className:"text-[14px] font-medium",children:["",Number(N).toLocaleString()]})]}),G>0&&f.jsxs("div",{className:"flex justify-between items-center mb-2",children:[f.jsx("span",{className:"text-[14px]",children:"Delivery Fee"}),f.jsxs("span",{className:"text-[14px]",children:["",Number(G).toLocaleString()]})]}),f.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-sky-200",children:[f.jsx("span",{className:"text-[16px] font-medium",children:"Total"}),f.jsxs("span",{className:"text-[16px] font-bold text-sky-600",children:["",Number(C).toLocaleString()]})]})]}),f.jsx("button",{onClick:te,disabled:!d.trim()||!g.trim(),className:"w-full bg-sky-600 text-white py-3 rounded-full text-[16px] font-medium hover:bg-sky-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Continue to Payment"})]})})}),l&&f.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-50 p-4",children:f.jsx("div",{className:"bg-white rounded-3xl w-full max-w-md",children:f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsx("h2",{className:"text-[20px] font-light font-poppins text-sky-600",children:"Payment Method"}),f.jsx("button",{onClick:()=>c(!1),className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:f.jsx(ew,{className:"w-5 h-5 text-gray-500"})})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("button",{onClick:()=>Y("cash"),className:`w-full p-4 rounded-lg border-2 transition-colors text-left ${V==="cash"?"border-sky-500 bg-sky-50":"border-gray-200 dark:border-gray-600 hover:border-sky-300 dark:border-gray-600"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(OK,{className:"w-6 h-6 text-sky-600"}),f.jsxs("div",{children:[f.jsx("div",{className:"text-[16px] font-medium",children:"Pay on Delivery"}),f.jsx("div",{className:"text-[13px] text-gray-600",children:"Pay with cash when order arrives"})]})]})}),f.jsx("button",{onClick:()=>Y("online"),className:`w-full p-4 rounded-lg border-2 transition-colors text-left ${V==="online"?"border-sky-500 bg-sky-50":"border-gray-200 dark:border-gray-600 hover:border-sky-300 dark:border-gray-600"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(SK,{className:"w-6 h-6 text-sky-600"}),f.jsxs("div",{children:[f.jsx("div",{className:"text-[16px] font-medium",children:"Online Payment"}),f.jsx("div",{className:"text-[13px] text-gray-600",children:"Pay with card, bank transfer, or USSD"})]})]})}),f.jsx("button",{disabled:!0,className:"w-full p-4 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-gray-100 text-left cursor-not-allowed opacity-60",children:f.jsxs("div",{className:"flex items-center gap-3 justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(yP,{className:"w-6 h-6 text-gray-400"}),f.jsxs("div",{children:[f.jsx("div",{className:"text-[16px] font-medium text-gray-500",children:"Pay with Insurance"}),f.jsx("div",{className:"text-[13px] text-gray-400",children:"Use your health insurance"})]})]}),f.jsx("span",{className:"text-[12px] text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:"Coming Soon"})]})})]}),f.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-[16px] font-medium",children:"Total Amount"}),f.jsxs("span",{className:"text-[18px] font-bold text-sky-600",children:["",Number(C).toLocaleString()]})]})}),f.jsx("button",{onClick:pe,disabled:!V,className:"w-full mt-6 bg-sky-600 text-white py-3 rounded-full text-[16px] font-medium hover:bg-sky-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:V==="online"?"Pay Now":"Place Order"})]})})})]}):f.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[f.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:"Please sign in to continue"}),f.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>e("/auth/landing"),children:"Sign In / Sign Up"})]})}function NP({chatThreadId:t,prescriptions:e,userId:r}){const[n,i]=M.useState(e||[]),[s,a]=M.useState({});M.useEffect(()=>{if(e&&e.length>0){i(e);const d={};e.forEach(p=>{d[p.id]={},p.drugs.forEach((g,m)=>{d[p.id][m]=g.quantity})}),a(d);return}t&&sP(t).then(d=>{i(d);const p={};d.forEach(g=>{p[g.id]={},g.drugs.forEach((m,w)=>{p[g.id][w]=m.quantity})}),a(p)})},[t,e]);function o(d,p,g){const m=new Date(p.startDate),y=Math.floor((new Date-m)/(1e3*60*60*24)),k=Math.max(0,Number(d.duration||p.duration)-y),T=s[p.id]?.[g]??d.quantity;return{daysLeft:k,quantityLeft:T}}function l(d){if(!d)return 1;const p=d.match(/(\d+(?:\.\d+)?)/);return p?Number(p[1]):1}async function c(d,p){a(k=>{const T={...k},O=n.find(G=>G.id===d);if(!O)return k;const P=O.drugs[p],V=l(P.dosage),Y=T[d]?.[p]??P.quantity;return T[d]={...T[d],[p]:Math.max(0,Y-V)},T});const g=n.find(k=>k.id===d);if(!g)return;const m=g.drugs[p],w=l(m.dosage),y=g.drugs.map((k,T)=>T===p?{...k,quantity:Math.max(0,k.quantity-w)}:k);await ys(or(gt,"prescriptions",d),{drugs:y}),i(k=>k.map(T=>T.id===d?{...T,drugs:y}:T))}return f.jsxs("div",{className:"mt-4",children:[f.jsx("div",{className:"text-lg font-light mb-2 text-black dark:text-white",children:"Prescriptions"}),n.length===0&&f.jsx("div",{className:"text-zinc-400 text-sm",children:"No prescriptions yet."}),n.map(d=>f.jsxs("div",{className:"mb-4 border rounded-2xl p-4 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600 shadow-sm relative",children:[f.jsxs("div",{className:"flex items-start justify-between mb-2",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"font-thin text-[14px] mb-1 text-black dark:text-white",children:["Created: ",new Date(d.startDate).toLocaleDateString()]}),f.jsxs("div",{className:"mb-1 text-xs text-zinc-500 font-light",children:["Status: ",d.status]})]}),f.jsx("div",{className:"flex flex-col gap-2",children:d.drugs.map((p,g)=>{const{quantityLeft:m}=o(p,d,g),w=d.requirePurchase&&!d.fulfilled||m<=0;return f.jsx("button",{className:"rounded-full bg-sky-600 text-white text-[10px] px-2 py-0.5 ml-auto disabled:opacity-40 mb-1 shadow-sm",style:{minWidth:70,height:24,lineHeight:"16px"},disabled:w,onClick:()=>c(d.id,g),children:"Mark Dose"},g)})})]}),f.jsx("ul",{className:"mb-2 text-[13px]",children:d.drugs.map((p,g)=>{const{daysLeft:m,quantityLeft:w}=o(p,d,g);return f.jsxs("li",{className:"mb-2 flex flex-col sm:flex-row sm:items-center sm:gap-2",children:[f.jsx("span",{className:"font-medium text-sky-700",children:p.name}),f.jsxs("span",{className:"text-zinc-500",children:["Qty: ",w]}),f.jsxs("span",{className:"text-zinc-500",children:["Dosage: ",p.dosage]}),f.jsxs("span",{className:"text-zinc-500",children:["Freq: ",p.frequency]}),f.jsxs("span",{className:m<=2?"text-red-500":"text-green-600",children:["Days left: ",m]}),f.jsxs("span",{className:w<=2?"text-red-500":"text-green-600",children:["Qty left: ",w]}),p.notes&&f.jsxs("span",{className:"block text-xs text-zinc-400",children:["Notes: ",p.notes]}),p.productId&&d.requirePurchase&&f.jsx("a",{href:`/product/${p.productId}`,className:"mt-1 inline-block text-xs text-sky-600 underline hover:text-sky-800 transition",children:"View & Buy"})]},g)})}),f.jsxs("div",{className:"text-xs text-zinc-400",children:["Duration: ",d.duration," days"]})]},d.id))]})}const KK=Object.freeze(Object.defineProperty({__proto__:null,default:NP},Symbol.toStringTag,{value:"Module"}));function AP(t){if(!t)return 1;const e=t.match(/(\d+)x\s*\/\s*day/i);return e?Number(e[1]):1}function XK(t){if(!("Notification"in window)||Notification.permission!=="granted")return;const{drugs:e,startDate:r,duration:n}=t,i=new Date(r),s=new Date,a=Number(n)||1;e.forEach(o=>{const l=AP(o.frequency);for(let c=0;c<a;c++)for(let d=0;d<l;d++){const p=new Date(i.getTime()+c*24*60*60*1e3+d*(24/l)*60*60*1e3);if(p>s){const g=p.getTime()-s.getTime();setTimeout(()=>{new Notification(`Time to take ${o.name}`,{body:`Dosage: ${o.dosage||""} (${o.frequency||""})`})},g)}}})}function YK(t){const{drugs:e,startDate:r,duration:n}=t,i=new Date(r),s=Number(n)||1;let a=`BEGIN:VCALENDAR
VERSION:2.0
`;e.forEach(d=>{const p=AP(d.frequency);for(let g=0;g<s;g++)for(let m=0;m<p;m++){const y=new Date(i.getTime()+g*24*60*60*1e3+m*(24/p)*60*60*1e3).toISOString().replace(/[-:]/g,"").replace(/\..+/,"");a+=`BEGIN:VEVENT
SUMMARY:Take ${d.name}
DESCRIPTION:Dosage: ${d.dosage||""} (${d.frequency||""})
DTSTART:${y}
DTEND:${y}
END:VEVENT
`}}),a+="END:VCALENDAR";const o=new Blob([a],{type:"text/calendar"}),l=URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download="prescription.ics",c.click(),URL.revokeObjectURL(l)}function QK(t){if(localStorage.setItem("prescriptionAlarms",JSON.stringify(t)),"indexedDB"in window){const e=indexedDB.open("HealthAppDB",1);e.onupgradeneeded=r=>{const n=r.target.result;n.objectStoreNames.contains("alarms")||n.createObjectStore("alarms",{keyPath:"id"})},e.onsuccess=r=>{const s=r.target.result.transaction("alarms","readwrite").objectStore("alarms");t.forEach(a=>s.put(a))}}}function JK(){const{user:t}=In(),[e,r]=M.useState([]),[n,i]=M.useState(!1);if(M.useEffect(()=>{if(!t)return;async function o(){await aP({customerId:t.uid});const l=Tr(dr(gt,"prescriptions"),zr("customerId","==",t.uid));let d=(await Fn(l)).docs.map(p=>({id:p.id,...p.data()}));d=d.sort((p,g)=>new Date(g.startDate)-new Date(p.startDate)),r(d),Notification.permission==="granted"&&d.forEach(XK),QK(d)}o()},[t]),M.useEffect(()=>{"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()},[]),!t)return null;const s=e.length,a=n?e:e.slice(0,1);return f.jsxs("div",{className:"w-full",children:[f.jsxs("div",{className:"text-[18px] font-light font-poppins text-black dark:text-white mb-2 tracking-tight",children:["My Prescriptions",e.length>0&&f.jsx("button",{className:"ml-4 px-3 py-1 rounded-full bg-green-100 text-green-700 text-xs font-medium",onClick:()=>e.forEach(YK),children:"Add to Calendar"})]}),e.length===0?f.jsx("div",{className:"text-zinc-400 text-[12px] font-light",children:"No prescriptions found."}):f.jsxs(f.Fragment,{children:[f.jsx(NP,{prescriptions:a,userId:t.uid,chatThreadId:null}),s>1&&!n&&f.jsxs("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-700 text-xs font-medium",onClick:()=>i(!0),children:["See more (",s,")"]}),n&&s>1&&f.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-zinc-100 text-zinc-700 text-xs font-medium",onClick:()=>i(!1),children:"See less"})]})]})}const ZK=({title:t,onSearchClick:e,onSettingsClick:r})=>os.createPortal(f.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:f.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto",children:f.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[f.jsxs("h1",{className:"text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-light font-poppins leading-none text-gray-900 dark:text-white",children:["My",f.jsx("br",{}),"Profile"]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:e,"aria-label":"Open search",className:"rounded-full p-2 hover:bg-sky-50 transition-all duration-200",children:f.jsx(id,{className:"h-5 w-5 text-sky-600"})}),f.jsx("button",{onClick:r,"aria-label":"Open settings",className:"rounded-full p-2 hover:bg-sky-50 transition-all duration-200",children:f.jsx(Cv,{className:"h-5 w-5 text-sky-600"})})]})]})})}),document.body);function IP(){const{user:t,logout:e}=In(),[r,n]=M.useState(!1),[i,s]=M.useState(""),[a,o]=M.useState(""),[l,c]=M.useState(""),[d,p]=M.useState(""),[g,m]=M.useState(!1),[w,y]=M.useState(0),[k,T]=M.useState(0),[O,P]=M.useState([]),[V,Y]=M.useState(!1),[G,L]=M.useState([]),[N,C]=M.useState("products"),[R,A]=M.useState([]),[F,B]=M.useState({displayName:t?.displayName||"Customer",address:"Kuje, Abuja, Nigeria",phone:t?.phoneNumber||"",email:t?.email||""}),[te,pe]=M.useState(""),[Ee,ve]=M.useState(!1),[re,W]=M.useState("all"),[ne,Q]=M.useState([]),[I,H]=M.useState(null),[X,J]=M.useState(null),ue=Ci();M.useEffect(()=>{if(!t)return;Fn(dr(gt,"users",t.uid,"cart")).then(be=>{y(be.size)}),Fn(Tr(dr(gt,"threads"),zr("customerId","==",t.uid))).then(be=>{T(be.size)});const fe=uP(t.uid,be=>{P(be)}),me=pP(t.uid,be=>{L(be)});return()=>{fe&&fe(),me&&me()}},[t]),M.useEffect(()=>{!r&&F&&(s(F.displayName||""),o(F.phone||""),c(F.address||"Kuje, Abuja, Nigeria"))},[F,r]);async function we(){const fe=(te||"").trim().toLowerCase();if(!fe){Q([]);return}const me=[];if((re==="drugs"||re==="all")&&(R||[]).forEach(be=>{`${be.name||""}`.toLowerCase().includes(fe)&&me.push({type:"drug",title:be.name,subtitle:`Bought ${be.count||0} times`,item:be})}),re==="orders"||re==="all"){let be=I;be||(be=(await Fn(Tr(dr(gt,"orders"),zr("customerId","==",t.uid)))).docs.map(ee=>({id:ee.id,...ee.data()})),H(be)),(be||[]).forEach(Le=>{`${Le.id} ${(Le.items||[]).map(Be=>Be.name).join(" ")} ${Le.total||""}`.toLowerCase().includes(fe)&&me.push({type:"order",title:`Order ${Le.id}`,subtitle:`${Le.items?.length||0} items  ${Number(Le.total||0).toLocaleString()}`,item:Le})})}if(re==="prescriptions"||re==="all"){let be=X;be||(be=(await Fn(Tr(dr(gt,"prescriptions"),zr("customerId","==",t.uid)))).docs.map(ee=>({id:ee.id,...ee.data()})),J(be)),(be||[]).forEach(Le=>{const ee=(Le.medicines||[]).join(" ");`${Le.id} ${ee} ${Le.note||""} ${Le.pharmacyName||""}`.toLowerCase().includes(fe)&&me.push({type:"prescription",title:`Prescription ${Le.id}`,subtitle:Le.note||"",item:Le})})}Q(me)}return M.useEffect(()=>{if(!Ee)return;function fe(me){me.key==="Escape"&&(ve(!1),pe(""),Q([]))}return window.addEventListener("keydown",fe),()=>window.removeEventListener("keydown",fe)},[Ee]),M.useEffect(()=>{if(!Ee)return;if(!(te||"").trim()){Q([]);return}const me=setTimeout(()=>{we()},300);return()=>clearTimeout(me)},[te,re,Ee]),t?f.jsxs(f.Fragment,{children:[f.jsx(ZK,{title:"My Profile",onSearchClick:()=>ve(!0),onSettingsClick:()=>ue("/settings")}),f.jsxs("div",{className:"pt-24 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen animate-fadeInUp",children:[Ee&&f.jsx("div",{onClick:()=>{ve(!1),pe(""),Q([])},className:"fixed inset-0 z-50 flex items-start justify-center pt-24 bg-black bg-opacity-30 animate-fadeInScale",role:"dialog","aria-modal":"true","aria-label":"Search modal",children:f.jsxs("div",{onClick:fe=>fe.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-3xl w-[min(920px,95%)] p-4 shadow-xl border border-[#9ED3FF] dark:border-gray-600 max-h-[80vh] overflow-hidden modal-backdrop animate-bounceIn",children:[f.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[f.jsx("div",{className:"flex-1 min-w-0",children:f.jsxs("div",{className:"flex items-center bg-[#F0FAFF] dark:bg-gray-700 border border-[#9ED3FF] dark:border-gray-600 rounded-full px-3 py-2 w-full overflow-hidden input-interactive",children:[f.jsx(id,{className:"h-4 w-4 text-sky-600 mr-2 flex-shrink-0"}),f.jsx("input",{autoFocus:!0,value:te,onChange:fe=>pe(fe.target.value),onKeyDown:fe=>{fe.key==="Enter"&&we()},placeholder:"Search prescriptions, orders, drugs...",className:"flex-1 min-w-0 bg-transparent text-sm outline-none truncate","aria-label":"Search query"})]})}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("select",{value:re,onChange:fe=>W(fe.target.value),className:"rounded-full border border-[#9ED3FF] dark:border-gray-600 px-3 py-2 text-sm bg-white dark:bg-gray-700 dark:text-white w-36 input-interactive",children:[f.jsx("option",{value:"prescriptions",children:"Prescriptions"}),f.jsx("option",{value:"orders",children:"Orders"}),f.jsx("option",{value:"drugs",children:"Drugs"}),f.jsx("option",{value:"all",children:"All"})]})})]}),f.jsx("div",{className:"border-t",style:{borderColor:"#E6F7FF"}}),f.jsx("div",{className:"mt-4 max-h-[60vh] overflow-auto px-1 py-2",children:ne.length===0?f.jsx("div",{className:"text-zinc-500 p-4",children:"No results yet. Enter a query."}):f.jsx("ul",{className:"space-y-2",children:ne.map((fe,me)=>f.jsxs("li",{className:"p-2 rounded-2xl border border-[#9ED3FF] dark:border-gray-600 bg-white dark:bg-gray-700 hover:bg-[#E3F3FF] dark:hover:bg-gray-600 transition-all duration-200 flex items-center gap-3 justify-between animate-fadeInUp card-interactive hover:shadow-md",style:{animationDelay:`${me*.05}s`},children:[f.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[f.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${fe.type==="order"?"bg-green-100":fe.type==="prescription"?"bg-blue-100":"bg-purple-100"}`,children:fe.type==="order"?f.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}):fe.type==="prescription"?f.jsx("svg",{className:"h-4 w-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}):f.jsx("svg",{className:"h-4 w-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("div",{className:"font-semibold text-sm text-black truncate",children:fe.title}),f.jsx("div",{className:"text-xs text-zinc-500 truncate",children:fe.subtitle})]})]}),f.jsx("div",{className:"flex-shrink-0 flex items-center gap-2",children:fe.type==="order"?f.jsx("button",{onClick:()=>{ue("/orders",{state:{highlightOrderId:fe.item.id}}),ve(!1),pe(""),Q([])},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 btn-interactive transition-all duration-200",children:"Open"}):fe.type==="prescription"?f.jsx("button",{onClick:()=>{ue(`/prescriptions/${fe.item.id}`),ve(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 btn-interactive transition-all duration-200",children:"Open"}):f.jsx("button",{onClick:()=>{ve(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 btn-interactive transition-all duration-200",children:"View"})})]},me))})})]})}),f.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-6",children:[f.jsx("div",{className:"space-y-6",children:f.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 flex flex-col items-start",children:[f.jsx("div",{className:"w-20 h-20 rounded-full bg-zinc-200 dark:bg-zinc-700 flex items-center justify-center mb-3 overflow-hidden",children:t?.photoURL?f.jsx("img",{src:t.photoURL,alt:"avatar",className:"w-full h-full object-cover rounded-full"}):f.jsx("span",{className:"text-3xl text-zinc-400 font-light",children:F.displayName&&F.displayName[0]||"C"})}),f.jsxs("div",{className:"w-full flex items-center justify-between mt-1",children:[f.jsx("div",{className:"text-[20px] font-medium text-sky-600 tracking-tighter",children:F.displayName||"Customer"}),f.jsxs("button",{className:"ml-2 px-3 py-1 rounded-full border border-sky-200 dark:border-gray-600 text-sky-600 text-xs flex items-center gap-1 hover:bg-sky-50",onClick:()=>n(!0),children:[f.jsx(FK,{className:"h-4 w-4"})," Edit"]})]}),r&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 animate-fadeInScale",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-[#36A5FF] dark:border-gray-600 rounded-3xl p-5 w-[90vw] max-w-sm shadow-xl modal-backdrop animate-bounceIn",children:[f.jsx("div",{className:"text-[22px] font-light font-poppins text-sky-600 mb-2 tracking-tight animate-slideInLeft",children:"Edit Profile"}),f.jsxs("form",{className:"flex flex-col gap-4",onSubmit:async fe=>{if(fe.preventDefault(),i!==(F?.displayName||t?.displayName)||a!==(F?.phone||t?.phoneNumber)||l!==(F?.address||"Address missing")){if(!d){alert("Please enter your account password to save changes.");return}try{const me=fh.credential(t.email,d);await VH(t,me),await sI(t,{displayName:i}),await ys(or(gt,"users",t.uid),{displayName:i,phoneNumber:a,address:l}),n(!1),window.location.reload()}catch(me){alert("Failed to update profile: "+me.message)}}else n(!1)},children:[f.jsx("label",{className:"text-[12px] text-zinc-500 font-light animate-fadeInUp",style:{animationDelay:"0.1s"}}),f.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 dark:border-gray-600 transition-all input-interactive animate-fadeInUp",style:{animationDelay:"0.2s",boxShadow:"none"},value:i,placeholder:"Name",onChange:fe=>s(fe.target.value)}),f.jsx("label",{className:"text-[12px] text-zinc-500 font-light"}),f.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 dark:border-gray-600 transition-all",value:a,placeholder:"Phone Number",onChange:fe=>o(fe.target.value),style:{boxShadow:"none"}}),f.jsx("label",{className:"text-[12px] text-zinc-500 font-light"}),f.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 dark:border-gray-600 transition-all",value:l,placeholder:"Address",onChange:fe=>c(fe.target.value),style:{boxShadow:"none"}}),f.jsx("label",{className:"text-[12px] text-zinc-500 font-light"}),f.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 dark:border-gray-600 transition-all",type:"password",placeholder:"Account Password (required to save)",onChange:fe=>p(fe.target.value),required:!0,style:{boxShadow:"none"}}),f.jsxs("div",{className:"flex gap-2 mt-4",children:[f.jsx("button",{type:"button",className:"px-4 py-2 rounded-full bg-zinc-100 text-[12px] font-light",onClick:()=>n(!1),children:"Cancel"}),f.jsx("button",{type:"submit",className:"px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light",children:"Save"})]})]})]})}),f.jsx("div",{className:"text-zinc-500 mt-1 text-[12px] font-light w-full pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:F.email}),f.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 mt-2 text-[12px] font-light w-full pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[f.jsx(zl,{className:"h-2.5 w-2.5"})," ",F.address||"Kuje, Abuja, Nigeria"]}),f.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 mt-1 text-[12px] font-light w-full",children:[f.jsx(G1,{className:"h-2.5 w-2.5"})," ",F.phone||"phone number missing"]})]})}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 flex flex-col items-start",children:[f.jsx("div",{className:"text-[18px] font-light font-poppins text-black dark:text-white mb-2 tracking-tight",children:"My Activity"}),f.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[f.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:"Items in Cart"}),f.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:w??0})]}),f.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[f.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:"Active Chats"}),f.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:k??0})]}),f.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[f.jsx("span",{className:"text-[12px] text-sky-500 font-light",children:"Saved Items"}),f.jsx("button",{className:"text-[12px] text-sky-600 font-medium hover:underline",onClick:()=>Y(!0),children:(O?.length??0)+(G?.length??0)})]}),f.jsxs("div",{className:"w-full flex items-center justify-between mt-3 mb-1",children:[f.jsx("span",{className:"text-[14px] font-light text-zinc-800 dark:text-zinc-200",children:"Drugs Bought"}),f.jsx("button",{className:"text-[12px] text-sky-600 font-light px-2 py-1 rounded-full hover:bg-sky-50",onClick:()=>m(!0),children:"See more"})]}),f.jsx("div",{className:"w-full flex flex-col gap-2",children:R.slice(0,3).map((fe,me)=>f.jsxs("div",{className:"w-full flex items-center pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[f.jsx("span",{className:"text-[12px] text-zinc-500 font-light w-1/3 text-left",children:fe.name}),f.jsx("span",{className:"text-[12px] text-zinc-400 font-light w-1/3 flex justify-center",children:fe.date}),f.jsx("span",{className:"text-[12px] text-zinc-500 font-light w-1/3 text-right",children:fe.count??1})]},fe.id||me))}),g&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-[#36A5FF] dark:border-gray-600 rounded-3xl p-5 w-[90vw] max-w-sm shadow-xl",children:[f.jsx("div",{className:"text-[18px] font-light font-poppins text-sky-600 mb-2 tracking-tight",children:"All Drugs Bought"}),f.jsx("div",{className:"flex flex-col gap-2 max-h-[60vh] overflow-y-auto",children:R.map((fe,me)=>f.jsxs("div",{className:"w-full flex items-center pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[f.jsx("span",{className:"text-[12px] text-zinc-500 font-light w-1/3 text-left",children:fe.name}),f.jsx("span",{className:"text-[12px] text-zinc-400 font-light w-1/3 flex justify-center",children:fe.date}),f.jsx("span",{className:"text-[12px] text-zinc-500 font-light w-1/3 text-right",children:fe.count??1})]},fe.id||me))}),f.jsx("button",{className:"mt-4 px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light w-full",onClick:()=>m(!1),children:"Close"})]})}),V&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-[#36A5FF] dark:border-gray-600 rounded-3xl p-5 w-[90vw] max-w-md shadow-xl",children:[f.jsx("div",{className:"text-[18px] font-light font-poppins text-sky-600 dark:text-sky-400 mb-4 tracking-tight",children:"My Saved Items"}),f.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-600 dark:border-gray-600 mb-4",children:[f.jsxs("button",{className:`px-4 py-2 text-[14px] font-medium transition-colors ${N==="products"?"text-sky-600 border-b-2 border-sky-600 dark:border-gray-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>C("products"),children:["Products (",O?.length??0,")"]}),f.jsxs("button",{className:`px-4 py-2 text-[14px] font-medium transition-colors ${N==="vendors"?"text-sky-600 border-b-2 border-sky-600 dark:border-gray-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>C("vendors"),children:["Vendors (",G?.length??0,")"]})]}),f.jsx("div",{className:"flex flex-col gap-2 max-h-[60vh] overflow-y-auto",children:N==="products"?O?.length>0?O.map(fe=>f.jsx("div",{className:"w-full flex items-center pb-3 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:f.jsxs("div",{className:"flex items-center gap-3 w-full",children:[f.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:fe.productData?.image?f.jsx("img",{src:fe.productData.image,alt:fe.productData?.name,className:"w-full h-full object-cover"}):f.jsx("span",{className:"text-gray-400 text-xs font-medium",children:fe.productData?.name?.[0]||"P"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-[13px] font-medium text-gray-800 truncate",children:fe.productData?.name||"Unknown Product"}),f.jsx("div",{className:"text-[11px] text-gray-500",children:fe.productData?.pharmacyName||"Unknown Pharmacy"}),f.jsxs("div",{className:"text-[12px] text-sky-600 font-medium",children:["",fe.productData?.price||"0"]})]}),f.jsx("button",{className:"px-3 py-1 bg-sky-100 text-sky-600 rounded-full text-[10px] font-medium hover:bg-sky-200 transition-colors",onClick:()=>{ue(`/product/${fe.productId}`),Y(!1)},children:"View"})]})},fe.id)):f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx("div",{className:"text-4xl mb-2",children:""}),f.jsx("div",{className:"text-[14px] font-light",children:"No products saved"}),f.jsx("div",{className:"text-[12px] text-gray-400 mt-1",children:"Start adding products you like!"})]}):G?.length>0?G.map(fe=>f.jsx("div",{className:"w-full flex items-center pb-3 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:f.jsxs("div",{className:"flex items-center gap-3 w-full",children:[f.jsx("div",{className:"w-12 h-12 rounded-full bg-sky-100 flex items-center justify-center flex-shrink-0",children:f.jsx("span",{className:"text-sky-600 text-lg font-medium",children:fe.vendorData?.name?.[0]||"V"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-[13px] font-medium text-gray-800 truncate",children:fe.vendorData?.name||"Unknown Vendor"}),f.jsx("div",{className:"text-[11px] text-gray-500 truncate",children:fe.vendorData?.address||"Address not available"}),f.jsx("div",{className:"text-[11px] text-gray-500",children:fe.vendorData?.phone||""})]}),f.jsx("button",{className:"px-3 py-1 bg-sky-100 text-sky-600 rounded-full text-[10px] font-medium hover:bg-sky-200 transition-colors",onClick:()=>{ue(`/vendor/${fe.vendorId}`),Y(!1)},children:"Visit"})]})},fe.id)):f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx("div",{className:"text-4xl mb-2",children:""}),f.jsx("div",{className:"text-[14px] font-light",children:"No vendors bookmarked"}),f.jsx("div",{className:"text-[12px] text-gray-400 mt-1",children:"Bookmark vendors you like!"})]})}),f.jsx("button",{className:"mt-4 px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light w-full",onClick:()=>{Y(!1),C("products")},children:"Close"})]})})]}),f.jsx("div",{className:"rounded-3xl border bg-[#F7F7F7] dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 flex flex-col items-start",children:f.jsx(JK,{})})]})]}),f.jsx("div",{children:f.jsxs("button",{onClick:()=>{e(),window.location.href="/auth/landing"},className:"mt-10 rounded-full border border-red-300 dark:border-gray-600 text-red-600 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:[f.jsx(J3,{className:"h-4 w-4"})," Log Out"]})})]})]}):f.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white dark:bg-gray-900",children:[f.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:"Please sign in to continue"}),f.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>ue("/auth/landing"),children:"Sign In / Sign Up"})]})}function PP({pharmacyId:t,onClose:e}){const[r,n]=M.useState({name:"",price:"",category:"Over-the-Counter",stock:0,sku:"",image:"",description:""}),[i,s]=M.useState(null),[a,o]=M.useState(!1);M.useEffect(()=>{const{overflow:d}=document.body.style;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=d}},[]);const l=async()=>{if(!r.name||!r.price)return alert("Name and price required");o(!0);try{let d=r.image;if(!d&&i){const g=`products/${t}/${Date.now()}_${i.name}`,m=pG(wG,g);await fG(m,i),d=await hG(m)}const p=(r.tags||"").split(",").map(g=>g.trim()).filter(Boolean);await tP({...r,image:d,price:Number(r.price),pharmacyId:t,tags:p}),e()}catch(d){alert(d.message)}finally{o(!1)}},c=f.jsx("div",{className:`
        fixed inset-0 z-[100]
        grid place-items-center
        bg-black/30 backdrop-blur-sm
        min-h-[100svh]
        animate-fade-in
      `,role:"dialog","aria-modal":"true",onClick:e,children:f.jsxs("div",{className:`
          bg-white rounded-3xl p-6 w-[92vw] max-w-sm
          shadow-xl border border-[#9ED3FF]
          max-h-[85svh] overflow-auto
          card-interactive hover:shadow-2xl transition-all duration-300
          animate-bounce-in
        `,onClick:d=>d.stopPropagation(),children:[f.jsx("div",{className:"text-lg font-light font-poppins mb-4 text-black animate-text-reveal",children:"Add Product"}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none focus:border-sky-500 dark:border-gray-600 transition-colors duration-200 hover:border-sky-400",placeholder:"Name",value:r.name,onChange:d=>n({...r,name:d.target.value})}),f.jsxs("select",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none bg-white focus:border-sky-500 dark:border-gray-600 transition-colors duration-200 hover:border-sky-400",value:r.category,onChange:d=>n({...r,category:d.target.value}),children:[f.jsx("option",{value:"Prescription",children:"Prescription"}),f.jsx("option",{value:"Over-the-Counter",children:"Over-the-Counter"}),f.jsx("option",{value:"Syrup",children:"Syrup"}),f.jsx("option",{value:"Therapeutic",children:"Therapeutic"}),f.jsx("option",{value:"Controlled",children:"Controlled"}),f.jsx("option",{value:"Target System",children:"Target System"}),f.jsx("option",{value:"Others",children:"Others"})]}),f.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none focus:border-sky-500 dark:border-gray-600 transition-colors duration-200 hover:border-sky-400",placeholder:"Stock",type:"number",value:r.stock,onChange:d=>n({...r,stock:Number(d.target.value)})}),f.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none focus:border-sky-500 dark:border-gray-600 transition-colors duration-200 hover:border-sky-400",placeholder:"SKU",value:r.sku,onChange:d=>n({...r,sku:d.target.value})}),f.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none focus:border-sky-500 dark:border-gray-600 transition-colors duration-200 hover:border-sky-400",placeholder:"Price",type:"number",value:r.price,onChange:d=>n({...r,price:d.target.value})}),f.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none focus:border-sky-500 dark:border-gray-600 transition-colors duration-200 hover:border-sky-400",placeholder:"Tags (comma separated, e.g. pain relief, children)",value:r.tags||"",onChange:d=>n({...r,tags:d.target.value})}),f.jsxs("div",{className:"flex flex-col gap-2 pt-2 animate-fade-in",style:{animationDelay:"0.2s"},children:[f.jsx("label",{className:"text-[13px] font-light text-zinc-500",children:"Product Image"}),f.jsx("input",{type:"file",accept:"image/*",className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 focus:border-sky-500 dark:border-gray-600 transition-colors duration-200 hover:border-sky-400",onChange:d=>s(d.target.files?.[0]||null)}),f.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none focus:border-sky-500 dark:border-gray-600 transition-colors duration-200 hover:border-sky-400",placeholder:"Or paste image link here",value:r.image,onChange:d=>n({...r,image:d.target.value})})]})]}),f.jsx("div",{className:"mt-3 animate-fade-in",style:{animationDelay:"0.3s"},children:f.jsx("textarea",{rows:3,placeholder:"Description",value:r.description,onChange:d=>n({...r,description:d.target.value}),className:"w-full border border-[#9ED3FF] rounded-xl p-3 text-[13px] font-light outline-none focus:border-sky-500 dark:border-gray-600 transition-colors duration-200 hover:border-sky-400"})}),f.jsxs("div",{className:"flex gap-2 mt-6 animate-fade-in-up",style:{animationDelay:"0.4s"},children:[f.jsx("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700 btn-interactive hover:scale-105 active:scale-95 transition-all duration-200",disabled:a,onClick:l,children:a?"Uploading":"Add"}),f.jsx("button",{className:"flex-1 rounded-full border border-zinc-300 text-zinc-500 text-[13px] font-light py-2 btn-interactive hover:border-zinc-400 hover:scale-105 active:scale-95 transition-all duration-200",onClick:e,children:"Cancel"})]})]})});return os.createPortal(c,document.body)}var Ux={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var eX=Ux.exports,h9;function tX(){return h9||(h9=1,(function(t,e){((r,n)=>{t.exports=n()})(eX,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},i,s=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},l=0,c={};function d(N){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(C){var R=Y(C);R.chunkSize=parseInt(R.chunkSize),C.step||C.chunk||(R.chunkSize=null),this._handle=new y(R),(this._handle.streamer=this)._config=R}).call(this,N),this.parseChunk=function(C,R){var A=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<A){let B=this._config.newline;B||(F=this._config.quoteChar||'"',B=this._handle.guessLineEndings(C,F)),C=[...C.split(B).slice(A)].join(B)}this.isFirstChunk&&L(this._config.beforeFirstChunk)&&(F=this._config.beforeFirstChunk(C))!==void 0&&(C=F),this.isFirstChunk=!1,this._halted=!1;var A=this._partialLine+C,F=(this._partialLine="",this._handle.parse(A,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(C=F.meta.cursor,A=(this._finished||(this._partialLine=A.substring(C-this._baseIndex),this._baseIndex=C),F&&F.data&&(this._rowCount+=F.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)n.postMessage({results:F,workerId:c.WORKER_ID,finished:A});else if(L(this._config.chunk)&&!R){if(this._config.chunk(F,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=F=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(F.data),this._completeResults.errors=this._completeResults.errors.concat(F.errors),this._completeResults.meta=F.meta),this._completed||!A||!L(this._config.complete)||F&&F.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),A||F&&F.meta.paused||this._nextChunk(),F}this._halted=!0},this._sendError=function(C){L(this._config.error)?this._config.error(C):a&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:C,finished:!1})}}function p(N){var C;(N=N||{}).chunkSize||(N.chunkSize=c.RemoteChunkSize),d.call(this,N),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(R){this._input=R,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(C=new XMLHttpRequest,this._config.withCredentials&&(C.withCredentials=this._config.withCredentials),s||(C.onload=G(this._chunkLoaded,this),C.onerror=G(this._chunkError,this)),C.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var R,A=this._config.downloadRequestHeaders;for(R in A)C.setRequestHeader(R,A[R])}var F;this._config.chunkSize&&(F=this._start+this._config.chunkSize-1,C.setRequestHeader("Range","bytes="+this._start+"-"+F));try{C.send(this._config.downloadRequestBody)}catch(B){this._chunkError(B.message)}s&&C.status===0&&this._chunkError()}},this._chunkLoaded=function(){C.readyState===4&&(C.status<200||400<=C.status?this._chunkError():(this._start+=this._config.chunkSize||C.responseText.length,this._finished=!this._config.chunkSize||this._start>=(R=>(R=R.getResponseHeader("Content-Range"))!==null?parseInt(R.substring(R.lastIndexOf("/")+1)):-1)(C),this.parseChunk(C.responseText)))},this._chunkError=function(R){R=C.statusText||R,this._sendError(new Error(R))}}function g(N){(N=N||{}).chunkSize||(N.chunkSize=c.LocalChunkSize),d.call(this,N);var C,R,A=typeof FileReader<"u";this.stream=function(F){this._input=F,R=F.slice||F.webkitSlice||F.mozSlice,A?((C=new FileReader).onload=G(this._chunkLoaded,this),C.onerror=G(this._chunkError,this)):C=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var F=this._input,B=(this._config.chunkSize&&(B=Math.min(this._start+this._config.chunkSize,this._input.size),F=R.call(F,this._start,B)),C.readAsText(F,this._config.encoding));A||this._chunkLoaded({target:{result:B}})},this._chunkLoaded=function(F){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(F.target.result)},this._chunkError=function(){this._sendError(C.error)}}function m(N){var C;d.call(this,N=N||{}),this.stream=function(R){return C=R,this._nextChunk()},this._nextChunk=function(){var R,A;if(!this._finished)return R=this._config.chunkSize,C=R?(A=C.substring(0,R),C.substring(R)):(A=C,""),this._finished=!C,this.parseChunk(A)}}function w(N){d.call(this,N=N||{});var C=[],R=!0,A=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(F){this._input=F,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){A&&C.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),C.length?this.parseChunk(C.shift()):R=!0},this._streamData=G(function(F){try{C.push(typeof F=="string"?F:F.toString(this._config.encoding)),R&&(R=!1,this._checkIsFinished(),this.parseChunk(C.shift()))}catch(B){this._streamError(B)}},this),this._streamError=G(function(F){this._streamCleanUp(),this._sendError(F)},this),this._streamEnd=G(function(){this._streamCleanUp(),A=!0,this._streamData("")},this),this._streamCleanUp=G(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function y(N){var C,R,A,F,B=Math.pow(2,53),te=-B,pe=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Ee=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ve=this,re=0,W=0,ne=!1,Q=!1,I=[],H={data:[],errors:[],meta:{}};function X(fe){return N.skipEmptyLines==="greedy"?fe.join("").trim()==="":fe.length===1&&fe[0].length===0}function J(){if(H&&A&&(we("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),A=!1),N.skipEmptyLines&&(H.data=H.data.filter(function(Le){return!X(Le)})),ue()){let Le=function(ee,Be){L(N.transformHeader)&&(ee=N.transformHeader(ee,Be)),I.push(ee)};if(H)if(Array.isArray(H.data[0])){for(var fe=0;ue()&&fe<H.data.length;fe++)H.data[fe].forEach(Le);H.data.splice(0,1)}else H.data.forEach(Le)}function me(Le,ee){for(var Be=N.header?{}:[],Re=0;Re<Le.length;Re++){var ae=Re,$e=Le[Re],$e=((qe,it)=>(oe=>(N.dynamicTypingFunction&&N.dynamicTyping[oe]===void 0&&(N.dynamicTyping[oe]=N.dynamicTypingFunction(oe)),(N.dynamicTyping[oe]||N.dynamicTyping)===!0))(qe)?it==="true"||it==="TRUE"||it!=="false"&&it!=="FALSE"&&((oe=>{if(pe.test(oe)&&(oe=parseFloat(oe),te<oe&&oe<B))return 1})(it)?parseFloat(it):Ee.test(it)?new Date(it):it===""?null:it):it)(ae=N.header?Re>=I.length?"__parsed_extra":I[Re]:ae,$e=N.transform?N.transform($e,ae):$e);ae==="__parsed_extra"?(Be[ae]=Be[ae]||[],Be[ae].push($e)):Be[ae]=$e}return N.header&&(Re>I.length?we("FieldMismatch","TooManyFields","Too many fields: expected "+I.length+" fields but parsed "+Re,W+ee):Re<I.length&&we("FieldMismatch","TooFewFields","Too few fields: expected "+I.length+" fields but parsed "+Re,W+ee)),Be}var be;H&&(N.header||N.dynamicTyping||N.transform)&&(be=1,!H.data.length||Array.isArray(H.data[0])?(H.data=H.data.map(me),be=H.data.length):H.data=me(H.data,0),N.header&&H.meta&&(H.meta.fields=I),W+=be)}function ue(){return N.header&&I.length===0}function we(fe,me,be,Le){fe={type:fe,code:me,message:be},Le!==void 0&&(fe.row=Le),H.errors.push(fe)}L(N.step)&&(F=N.step,N.step=function(fe){H=fe,ue()?J():(J(),H.data.length!==0&&(re+=fe.data.length,N.preview&&re>N.preview?R.abort():(H.data=H.data[0],F(H,ve))))}),this.parse=function(fe,me,be){var Le=N.quoteChar||'"',Le=(N.newline||(N.newline=this.guessLineEndings(fe,Le)),A=!1,N.delimiter?L(N.delimiter)&&(N.delimiter=N.delimiter(fe),H.meta.delimiter=N.delimiter):((Le=((ee,Be,Re,ae,$e)=>{var qe,it,oe,je;$e=$e||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Ge=0;Ge<$e.length;Ge++){for(var Tt,Pe=$e[Ge],Ke=0,ot=0,We=0,Lt=(oe=void 0,new T({comments:ae,delimiter:Pe,newline:Be,preview:10}).parse(ee)),St=0;St<Lt.data.length;St++)Re&&X(Lt.data[St])?We++:(Tt=Lt.data[St].length,ot+=Tt,oe===void 0?oe=Tt:0<Tt&&(Ke+=Math.abs(Tt-oe),oe=Tt));0<Lt.data.length&&(ot/=Lt.data.length-We),(it===void 0||Ke<=it)&&(je===void 0||je<ot)&&1.99<ot&&(it=Ke,qe=Pe,je=ot)}return{successful:!!(N.delimiter=qe),bestDelimiter:qe}})(fe,N.newline,N.skipEmptyLines,N.comments,N.delimitersToGuess)).successful?N.delimiter=Le.bestDelimiter:(A=!0,N.delimiter=c.DefaultDelimiter),H.meta.delimiter=N.delimiter),Y(N));return N.preview&&N.header&&Le.preview++,C=fe,R=new T(Le),H=R.parse(C,me,be),J(),ne?{meta:{paused:!0}}:H||{meta:{paused:!1}}},this.paused=function(){return ne},this.pause=function(){ne=!0,R.abort(),C=L(N.chunk)?"":C.substring(R.getCharIndex())},this.resume=function(){ve.streamer._halted?(ne=!1,ve.streamer.parseChunk(C,!0)):setTimeout(ve.resume,3)},this.aborted=function(){return Q},this.abort=function(){Q=!0,R.abort(),H.meta.aborted=!0,L(N.complete)&&N.complete(H),C=""},this.guessLineEndings=function(ee,Le){ee=ee.substring(0,1048576);var Le=new RegExp(k(Le)+"([^]*?)"+k(Le),"gm"),be=(ee=ee.replace(Le,"")).split("\r"),Le=ee.split(`
`),ee=1<Le.length&&Le[0].length<be[0].length;if(be.length===1||ee)return`
`;for(var Be=0,Re=0;Re<be.length;Re++)be[Re][0]===`
`&&Be++;return Be>=be.length/2?`\r
`:"\r"}}function k(N){return N.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function T(N){var C=(N=N||{}).delimiter,R=N.newline,A=N.comments,F=N.step,B=N.preview,te=N.fastMode,pe=null,Ee=!1,ve=N.quoteChar==null?'"':N.quoteChar,re=ve;if(N.escapeChar!==void 0&&(re=N.escapeChar),(typeof C!="string"||-1<c.BAD_DELIMITERS.indexOf(C))&&(C=","),A===C)throw new Error("Comment character same as delimiter");A===!0?A="#":(typeof A!="string"||-1<c.BAD_DELIMITERS.indexOf(A))&&(A=!1),R!==`
`&&R!=="\r"&&R!==`\r
`&&(R=`
`);var W=0,ne=!1;this.parse=function(Q,I,H){if(typeof Q!="string")throw new Error("Input must be a string");var X=Q.length,J=C.length,ue=R.length,we=A.length,fe=L(F),me=[],be=[],Le=[],ee=W=0;if(!Q)return Ke();if(te||te!==!1&&Q.indexOf(ve)===-1){for(var Be=Q.split(R),Re=0;Re<Be.length;Re++){if(Le=Be[Re],W+=Le.length,Re!==Be.length-1)W+=R.length;else if(H)return Ke();if(!A||Le.substring(0,we)!==A){if(fe){if(me=[],je(Le.split(C)),ot(),ne)return Ke()}else je(Le.split(C));if(B&&B<=Re)return me=me.slice(0,B),Ke(!0)}}return Ke()}for(var ae=Q.indexOf(C,W),$e=Q.indexOf(R,W),qe=new RegExp(k(re)+k(ve),"g"),it=Q.indexOf(ve,W);;)if(Q[W]===ve)for(it=W,W++;;){if((it=Q.indexOf(ve,it+1))===-1)return H||be.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:me.length,index:W}),Tt();if(it===X-1)return Tt(Q.substring(W,it).replace(qe,ve));if(ve===re&&Q[it+1]===re)it++;else if(ve===re||it===0||Q[it-1]!==re){ae!==-1&&ae<it+1&&(ae=Q.indexOf(C,it+1));var oe=Ge(($e=$e!==-1&&$e<it+1?Q.indexOf(R,it+1):$e)===-1?ae:Math.min(ae,$e));if(Q.substr(it+1+oe,J)===C){Le.push(Q.substring(W,it).replace(qe,ve)),Q[W=it+1+oe+J]!==ve&&(it=Q.indexOf(ve,W)),ae=Q.indexOf(C,W),$e=Q.indexOf(R,W);break}if(oe=Ge($e),Q.substring(it+1+oe,it+1+oe+ue)===R){if(Le.push(Q.substring(W,it).replace(qe,ve)),Pe(it+1+oe+ue),ae=Q.indexOf(C,W),it=Q.indexOf(ve,W),fe&&(ot(),ne))return Ke();if(B&&me.length>=B)return Ke(!0);break}be.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:me.length,index:W}),it++}}else if(A&&Le.length===0&&Q.substring(W,W+we)===A){if($e===-1)return Ke();W=$e+ue,$e=Q.indexOf(R,W),ae=Q.indexOf(C,W)}else if(ae!==-1&&(ae<$e||$e===-1))Le.push(Q.substring(W,ae)),W=ae+J,ae=Q.indexOf(C,W);else{if($e===-1)break;if(Le.push(Q.substring(W,$e)),Pe($e+ue),fe&&(ot(),ne))return Ke();if(B&&me.length>=B)return Ke(!0)}return Tt();function je(We){me.push(We),ee=W}function Ge(We){var Lt=0;return Lt=We!==-1&&(We=Q.substring(it+1,We))&&We.trim()===""?We.length:Lt}function Tt(We){return H||(We===void 0&&(We=Q.substring(W)),Le.push(We),W=X,je(Le),fe&&ot()),Ke()}function Pe(We){W=We,je(Le),Le=[],$e=Q.indexOf(R,W)}function Ke(We){if(N.header&&!I&&me.length&&!Ee){var Lt=me[0],St=Object.create(null),Pt=new Set(Lt);let mt=!1;for(let _t=0;_t<Lt.length;_t++){let Xt=Lt[_t];if(St[Xt=L(N.transformHeader)?N.transformHeader(Xt,_t):Xt]){let Kt,Ut=St[Xt];for(;Kt=Xt+"_"+Ut,Ut++,Pt.has(Kt););Pt.add(Kt),Lt[_t]=Kt,St[Xt]++,mt=!0,(pe=pe===null?{}:pe)[Kt]=Xt}else St[Xt]=1,Lt[_t]=Xt;Pt.add(Xt)}mt&&console.warn("Duplicate headers found and renamed."),Ee=!0}return{data:me,errors:be,meta:{delimiter:C,linebreak:R,aborted:ne,truncated:!!We,cursor:ee+(I||0),renamedHeaders:pe}}}function ot(){F(Ke()),me=[],be=[]}},this.abort=function(){ne=!0},this.getCharIndex=function(){return W}}function O(N){var C=N.data,R=o[C.workerId],A=!1;if(C.error)R.userError(C.error,C.file);else if(C.results&&C.results.data){var F={abort:function(){A=!0,P(C.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:V,resume:V};if(L(R.userStep)){for(var B=0;B<C.results.data.length&&(R.userStep({data:C.results.data[B],errors:C.results.errors,meta:C.results.meta},F),!A);B++);delete C.results}else L(R.userChunk)&&(R.userChunk(C.results,F,C.file),delete C.results)}C.finished&&!A&&P(C.workerId,C.results)}function P(N,C){var R=o[N];L(R.userComplete)&&R.userComplete(C),R.terminate(),delete o[N]}function V(){throw new Error("Not implemented.")}function Y(N){if(typeof N!="object"||N===null)return N;var C,R=Array.isArray(N)?[]:{};for(C in N)R[C]=Y(N[C]);return R}function G(N,C){return function(){N.apply(C,arguments)}}function L(N){return typeof N=="function"}return c.parse=function(N,C){var R=(C=C||{}).dynamicTyping||!1;if(L(R)&&(C.dynamicTypingFunction=R,R={}),C.dynamicTyping=R,C.transform=!!L(C.transform)&&C.transform,!C.worker||!c.WORKERS_SUPPORTED)return R=null,c.NODE_STREAM_INPUT,typeof N=="string"?(N=(A=>A.charCodeAt(0)!==65279?A:A.slice(1))(N),R=new(C.download?p:m)(C)):N.readable===!0&&L(N.read)&&L(N.on)?R=new w(C):(n.File&&N instanceof File||N instanceof Object)&&(R=new g(C)),R.stream(N);(R=(()=>{var A;return!!c.WORKERS_SUPPORTED&&(A=(()=>{var F=n.URL||n.webkitURL||null,B=r.toString();return c.BLOB_URL||(c.BLOB_URL=F.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",B,")();"],{type:"text/javascript"})))})(),(A=new n.Worker(A)).onmessage=O,A.id=l++,o[A.id]=A)})()).userStep=C.step,R.userChunk=C.chunk,R.userComplete=C.complete,R.userError=C.error,C.step=L(C.step),C.chunk=L(C.chunk),C.complete=L(C.complete),C.error=L(C.error),delete C.worker,R.postMessage({input:N,config:C,workerId:R.id})},c.unparse=function(N,C){var R=!1,A=!0,F=",",B=`\r
`,te='"',pe=te+te,Ee=!1,ve=null,re=!1,W=((()=>{if(typeof C=="object"){if(typeof C.delimiter!="string"||c.BAD_DELIMITERS.filter(function(I){return C.delimiter.indexOf(I)!==-1}).length||(F=C.delimiter),typeof C.quotes!="boolean"&&typeof C.quotes!="function"&&!Array.isArray(C.quotes)||(R=C.quotes),typeof C.skipEmptyLines!="boolean"&&typeof C.skipEmptyLines!="string"||(Ee=C.skipEmptyLines),typeof C.newline=="string"&&(B=C.newline),typeof C.quoteChar=="string"&&(te=C.quoteChar),typeof C.header=="boolean"&&(A=C.header),Array.isArray(C.columns)){if(C.columns.length===0)throw new Error("Option columns is empty");ve=C.columns}C.escapeChar!==void 0&&(pe=C.escapeChar+te),C.escapeFormulae instanceof RegExp?re=C.escapeFormulae:typeof C.escapeFormulae=="boolean"&&C.escapeFormulae&&(re=/^[=+\-@\t\r].*$/)}})(),new RegExp(k(te),"g"));if(typeof N=="string"&&(N=JSON.parse(N)),Array.isArray(N)){if(!N.length||Array.isArray(N[0]))return ne(null,N,Ee);if(typeof N[0]=="object")return ne(ve||Object.keys(N[0]),N,Ee)}else if(typeof N=="object")return typeof N.data=="string"&&(N.data=JSON.parse(N.data)),Array.isArray(N.data)&&(N.fields||(N.fields=N.meta&&N.meta.fields||ve),N.fields||(N.fields=Array.isArray(N.data[0])?N.fields:typeof N.data[0]=="object"?Object.keys(N.data[0]):[]),Array.isArray(N.data[0])||typeof N.data[0]=="object"||(N.data=[N.data])),ne(N.fields||[],N.data||[],Ee);throw new Error("Unable to serialize unrecognized input");function ne(I,H,X){var J="",ue=(typeof I=="string"&&(I=JSON.parse(I)),typeof H=="string"&&(H=JSON.parse(H)),Array.isArray(I)&&0<I.length),we=!Array.isArray(H[0]);if(ue&&A){for(var fe=0;fe<I.length;fe++)0<fe&&(J+=F),J+=Q(I[fe],fe);0<H.length&&(J+=B)}for(var me=0;me<H.length;me++){var be=(ue?I:H[me]).length,Le=!1,ee=ue?Object.keys(H[me]).length===0:H[me].length===0;if(X&&!ue&&(Le=X==="greedy"?H[me].join("").trim()==="":H[me].length===1&&H[me][0].length===0),X==="greedy"&&ue){for(var Be=[],Re=0;Re<be;Re++){var ae=we?I[Re]:Re;Be.push(H[me][ae])}Le=Be.join("").trim()===""}if(!Le){for(var $e=0;$e<be;$e++){0<$e&&!ee&&(J+=F);var qe=ue&&we?I[$e]:$e;J+=Q(H[me][qe],$e)}me<H.length-1&&(!X||0<be&&!ee)&&(J+=B)}}return J}function Q(I,H){var X,J;return I==null?"":I.constructor===Date?JSON.stringify(I).slice(1,25):(J=!1,re&&typeof I=="string"&&re.test(I)&&(I="'"+I,J=!0),X=I.toString().replace(W,pe),(J=J||R===!0||typeof R=="function"&&R(I,H)||Array.isArray(R)&&R[H]||((ue,we)=>{for(var fe=0;fe<we.length;fe++)if(-1<ue.indexOf(we[fe]))return!0;return!1})(X,c.BAD_DELIMITERS)||-1<X.indexOf(F)||X.charAt(0)===" "||X.charAt(X.length-1)===" ")?te+X+te:X)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!s&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=T,c.ParserHandle=y,c.NetworkStreamer=p,c.FileStreamer=g,c.StringStreamer=m,c.ReadableStreamStreamer=w,n.jQuery&&((i=n.jQuery).fn.parse=function(N){var C=N.config||{},R=[];return this.each(function(B){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var te=0;te<this.files.length;te++)R.push({file:this.files[te],inputElem:this,instanceConfig:i.extend({},C)})}),A(),this;function A(){if(R.length===0)L(N.complete)&&N.complete();else{var B,te,pe,Ee,ve=R[0];if(L(N.before)){var re=N.before(ve.file,ve.inputElem);if(typeof re=="object"){if(re.action==="abort")return B="AbortError",te=ve.file,pe=ve.inputElem,Ee=re.reason,void(L(N.error)&&N.error({name:B},te,pe,Ee));if(re.action==="skip")return void F();typeof re.config=="object"&&(ve.instanceConfig=i.extend(ve.instanceConfig,re.config))}else if(re==="skip")return void F()}var W=ve.instanceConfig.complete;ve.instanceConfig.complete=function(ne){L(W)&&W(ne,ve.file,ve.inputElem),F()},c.parse(ve.file,ve.instanceConfig)}}function F(){R.splice(0,1),A()}}),a&&(n.onmessage=function(N){N=N.data,c.WORKER_ID===void 0&&N&&(c.WORKER_ID=N.workerId),typeof N.input=="string"?n.postMessage({workerId:c.WORKER_ID,results:c.parse(N.input,N.config),finished:!0}):(n.File&&N.input instanceof File||N.input instanceof Object)&&(N=c.parse(N.input,N.config))&&n.postMessage({workerId:c.WORKER_ID,results:N,finished:!0})}),(p.prototype=Object.create(d.prototype)).constructor=p,(g.prototype=Object.create(d.prototype)).constructor=g,(m.prototype=Object.create(m.prototype)).constructor=m,(w.prototype=Object.create(d.prototype)).constructor=w,c})})(Ux)),Ux.exports}var rX=tX();const RP=RC(rX);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Tv={};Tv.version="0.18.5";var FP=1252,nX=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],yb={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},wb=function(t){nX.indexOf(t)!=-1&&(FP=yb[0]=t)};function iX(){wb(1252)}var yc=function(t){wb(t)};function bb(){yc(1200),iX()}function p9(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function sX(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function LP(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var xm=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?sX(t.slice(2)):e==254&&r==255?LP(t.slice(2)):e==65279?t.slice(1):t},tx=function(e){return String.fromCharCode(e)},m9=function(e){return String.fromCharCode(e)},ig,o0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function sg(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0,l=0,c=0;c<t.length;)r=t.charCodeAt(c++),s=r>>2,n=t.charCodeAt(c++),a=(r&3)<<4|n>>4,i=t.charCodeAt(c++),o=(n&15)<<2|i>>6,l=i&63,isNaN(n)?o=l=64:isNaN(i)&&(l=64),e+=o0.charAt(s)+o0.charAt(a)+o0.charAt(o)+o0.charAt(l);return e}function yl(t){var e="",r=0,n=0,i=0,s=0,a=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)s=o0.indexOf(t.charAt(c++)),a=o0.indexOf(t.charAt(c++)),r=s<<2|a>>4,e+=String.fromCharCode(r),o=o0.indexOf(t.charAt(c++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=o0.indexOf(t.charAt(c++)),i=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var en=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),hd=(function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function E0(t){return en?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function g9(t){return en?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var fl=function(e){return en?hd(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function R5(t){if(typeof ArrayBuffer>"u")return fl(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function B0(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function aX(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function _b(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return _b(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var ma=en?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:hd(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),i=0;for(e=0,r=0;e<t.length;r+=i,++e)if(i=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function oX(t){for(var e=[],r=0,n=t.length+250,i=E0(t.length+255),s=0;s<t.length;++s){var a=t.charCodeAt(s);if(a<128)i[r++]=a;else if(a<2048)i[r++]=192|a>>6&31,i[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++s)&1023;i[r++]=240|a>>8&7,i[r++]=128|a>>2&63,i[r++]=128|o>>6&15|(a&3)<<4,i[r++]=128|o&63}else i[r++]=224|a>>12&15,i[r++]=128|a>>6&63,i[r++]=128|a&63;r>n&&(e.push(i.slice(0,r)),r=0,i=E0(65535),n=65530)}return e.push(i.slice(0,r)),ma(e)}var No=/\u0000/g,vm=/[\u0001-\u0006]/g;function w1(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function wc(t,e){var r=""+t;return r.length>=e?r:rs("0",e-r.length)+r}function kb(t,e){var r=""+t;return r.length>=e?r:rs(" ",e-r.length)+r}function Nv(t,e){var r=""+t;return r.length>=e?r:r+rs(" ",e-r.length)}function lX(t,e){var r=""+Math.round(t);return r.length>=e?r:rs("0",e-r.length)+r}function cX(t,e){var r=""+t;return r.length>=e?r:rs("0",e-r.length)+r}var x9=Math.pow(2,32);function Xh(t,e){if(t>x9||t<-x9)return lX(t,e);var r=Math.round(t);return cX(r,e)}function Av(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var v9=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],m4=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function uX(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Ar={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},y9={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},dX={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Iv(t,e,r){for(var n=t<0?-1:1,i=t*n,s=0,a=1,o=0,l=1,c=0,d=0,p=Math.floor(i);c<e&&(p=Math.floor(i),o=p*a+s,d=p*c+l,!(i-p<5e-8));)i=1/(i-p),s=a,a=o,l=c,c=d;if(d>e&&(c>e?(d=l,o=s):(d=c,o=a)),!r)return[0,n*o,d];var g=Math.floor(n*o/d);return[g,n*o-g*d,d]}function kf(t,e,r){if(t>2958465||t<0)return null;var n=t|0,i=Math.floor(86400*(t-n)),s=0,a=[],o={D:n,T:i,u:86400*(t-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=xX(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var jP=new Date(1899,11,31,0,0,0),fX=jP.getTime(),hX=new Date(1900,2,1,0,0,0);function DP(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=hX&&(r+=1440*60*1e3),(r-(fX+(t.getTimezoneOffset()-jP.getTimezoneOffset())*6e4))/(1440*60*1e3)}function Eb(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function pX(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function mX(t){var e=t<0?12:11,r=Eb(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function gX(t){var e=Eb(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function ag(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=mX(t):e===10?r=t.toFixed(10).substr(0,12):r=gX(t),Eb(pX(r.toUpperCase()))}function Xf(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):ag(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Gl(14,DP(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function xX(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function vX(t,e,r,n){var i="",s=0,a=0,o=r.y,l,c=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,c=e.length;break;case 3:return m4[r.m-1][1];case 5:return m4[r.m-1][0];default:return m4[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,c=e.length;break;case 3:return v9[r.q][0];default:return v9[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?wc(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,s=Math.round(a*(r.S+r.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=wc(s,2+n),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var d=c>0?wc(l,c):"";return d}function l0(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var OP=/%/g;function yX(t,e,r){var n=e.replace(OP,""),i=e.length-n.length;return Yu(t,n,r*Math.pow(10,2*i))+rs("%",i)}function wX(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Yu(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function MP(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+MP(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,d){return l+c+d.substr(0,(i+s)%i)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var BP=/# (\?+)( ?)\/( ?)(\d+)/;function bX(t,e,r){var n=parseInt(t[4],10),i=Math.round(e*n),s=Math.floor(i/n),a=i-s*n,o=n;return r+(s===0?"":""+s)+" "+(a===0?rs(" ",t[1].length+1+t[4].length):kb(a,t[1].length)+t[2]+"/"+t[3]+wc(o,t[4].length))}function _X(t,e,r){return r+(e===0?"":""+e)+rs(" ",t[1].length+2+t[4].length)}var VP=/^#*0*\.([0#]+)/,UP=/\).*[0#]/,zP=/\(###\) ###\\?-####/;function So(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function w9(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function b9(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function kX(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function EX(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Ol(t,e,r){if(t.charCodeAt(0)===40&&!e.match(UP)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ol("n",n,r):"("+Ol("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return wX(t,e,r);if(e.indexOf("%")!==-1)return yX(t,e,r);if(e.indexOf("E")!==-1)return MP(e,r);if(e.charCodeAt(0)===36)return"$"+Ol(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+Xh(l,e.length);if(e.match(/^[#?]+$/))return i=Xh(r,0),i==="0"&&(i=""),i.length>e.length?i:So(e.substr(0,e.length-i.length))+i;if(s=e.match(BP))return bX(s,l,c);if(e.match(/^#+0+$/))return c+Xh(l,e.length-e.indexOf("0"));if(s=e.match(VP))return i=w9(r,s[1].length).replace(/^([^\.]+)$/,"$1."+So(s[1])).replace(/\.$/,"."+So(s[1])).replace(/\.(\d*)$/,function(w,y){return"."+y+rs("0",So(s[1]).length-y.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+w9(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+l0(Xh(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ol(t,e,-r):l0(""+(Math.floor(r)+kX(r,s[1].length)))+"."+wc(b9(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Ol(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=w1(Ol(t,e.replace(/[\\-]/g,""),r)),a=0,w1(w1(e.replace(/\\/g,"")).replace(/[0#]/g,function(w){return a<i.length?i.charAt(a++):w==="0"?"0":""}));if(e.match(zP))return i=Ol(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=Iv(l,Math.pow(10,a)-1,!1),i=""+c,d=Yu("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),i+=d+s[2]+"/"+s[3],d=Nv(o[2],a),d.length<s[4].length&&(d=So(s[4].substr(s[4].length-d.length))+d),i+=d,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=Iv(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?kb(o[1],a)+s[2]+"/"+s[3]+Nv(o[2],a):rs(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=Xh(r,0),e.length<=i.length?i:So(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var p=e.indexOf(".")-a,g=e.length-i.length-p;return So(e.substr(0,p)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=b9(r,s[1].length),r<0?"-"+Ol(t,e,-r):l0(EX(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?wc(0,3-w.length):"")+w})+"."+wc(a,s[1].length);switch(e){case"###,##0.00":return Ol(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=l0(Xh(l,0));return m!=="0"?c+m:"";case"###,###.00":return Ol(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Ol(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function SX(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Yu(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function CX(t,e,r){var n=e.replace(OP,""),i=e.length-n.length;return Yu(t,n,r*Math.pow(10,2*i))+rs("%",i)}function $P(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+$P(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,d){return l+c+d.substr(0,(i+s)%i)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Kc(t,e,r){if(t.charCodeAt(0)===40&&!e.match(UP)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Kc("n",n,r):"("+Kc("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return SX(t,e,r);if(e.indexOf("%")!==-1)return CX(t,e,r);if(e.indexOf("E")!==-1)return $P(e,r);if(e.charCodeAt(0)===36)return"$"+Kc(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+wc(l,e.length);if(e.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>e.length?i:So(e.substr(0,e.length-i.length))+i;if(s=e.match(BP))return _X(s,l,c);if(e.match(/^#+0+$/))return c+wc(l,e.length-e.indexOf("0"));if(s=e.match(VP))return i=(""+r).replace(/^([^\.]+)$/,"$1."+So(s[1])).replace(/\.$/,"."+So(s[1])),i=i.replace(/\.(\d*)$/,function(w,y){return"."+y+rs("0",So(s[1]).length-y.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+l0(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Kc(t,e,-r):l0(""+r)+"."+rs("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Kc(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=w1(Kc(t,e.replace(/[\\-]/g,""),r)),a=0,w1(w1(e.replace(/\\/g,"")).replace(/[0#]/g,function(w){return a<i.length?i.charAt(a++):w==="0"?"0":""}));if(e.match(zP))return i=Kc(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=Iv(l,Math.pow(10,a)-1,!1),i=""+c,d=Yu("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),i+=d+s[2]+"/"+s[3],d=Nv(o[2],a),d.length<s[4].length&&(d=So(s[4].substr(s[4].length-d.length))+d),i+=d,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=Iv(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?kb(o[1],a)+s[2]+"/"+s[3]+Nv(o[2],a):rs(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+r,e.length<=i.length?i:So(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var p=e.indexOf(".")-a,g=e.length-i.length-p;return So(e.substr(0,p)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Kc(t,e,-r):l0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?wc(0,3-w.length):"")+w})+"."+wc(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var m=l0(""+l);return m!=="0"?c+m:"";default:if(e.match(/\.[0#?]*$/))return Kc(t,e.slice(0,e.lastIndexOf(".")),r)+So(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Yu(t,e,r){return(r|0)===r?Kc(t,e,r):Ol(t,e,r)}function TX(t){for(var e=[],r=!1,n=0,i=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(i,n-i),i=n+1}if(e[e.length]=t.substr(i),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var HP=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function pp(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":Av(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(HP))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function NX(t,e,r,n){for(var i=[],s="",a=0,o="",l="t",c,d,p,g="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!Av(t,a))throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(p=t.charCodeAt(++a))!==34&&a<t.length;)s+=String.fromCharCode(p);i[i.length]={t:"t",v:s},++a;break;case"\\":var m=t.charAt(++a),w=m==="("||m===")"?m:"t";i[i.length]={t:w,v:m},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(c==null&&(c=kf(e,r,t.charAt(a+1)==="2"),c==null))return"";i[i.length]={t:"X",v:t.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=kf(e,r),c==null))return"";for(s=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=g),i[i.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var y={t:o,v:o};if(c==null&&(c=kf(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(y.v=c.H>=12?"P":"A"),y.t="T",g="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(y.v=c.H>=12?"PM":"AM"),y.t="T",a+=5,g="h"):t.substr(a,5).toUpperCase()==="/"?(c!=null&&(y.v=c.H>=12?"":""),y.t="T",a+=5,g="h"):(y.t="t",++a),c==null&&y.t==="T")return"";i[i.length]=y,l=o;break;case"[":for(s=o;t.charAt(a++)!=="]"&&a<t.length;)s+=t.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(HP)){if(c==null&&(c=kf(e,r),c==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",pp(t)||(i[i.length]={t:"t",v:s}));break;case".":if(c!=null){for(s=o;++a<t.length&&(o=t.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;t.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},l=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)s+=t.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"t",v:o},++a;break}var k=0,T=0,O;for(a=i.length-1,l="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=g,l="h",k<1&&(k=1);break;case"s":(O=i[a].v.match(/\.0+$/))&&(T=Math.max(T,O[0].length-1)),k<3&&(k=3);case"d":case"y":case"M":case"e":l=i[a].t;break;case"m":l==="s"&&(i[a].t="M",k<2&&(k=2));break;case"X":break;case"Z":k<1&&i[a].v.match(/[Hh]/)&&(k=1),k<2&&i[a].v.match(/[Mm]/)&&(k=2),k<3&&i[a].v.match(/[Ss]/)&&(k=3)}switch(k){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var P="",V;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=vX(i[a].t.charCodeAt(0),i[a].v,c,T),i[a].t="t";break;case"n":case"?":for(V=a+1;i[V]!=null&&((o=i[V].t)==="?"||o==="D"||(o===" "||o==="t")&&i[V+1]!=null&&(i[V+1].t==="?"||i[V+1].t==="t"&&i[V+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[V].v==="/"||i[V].v===" "&&i[V+1]!=null&&i[V+1].t=="?"));)i[a].v+=i[V].v,i[V]={v:"",t:";"},++V;P+=i[a].v,a=V-1;break;case"G":i[a].t="t",i[a].v=Xf(e,r);break}var Y="",G,L;if(P.length>0){P.charCodeAt(0)==40?(G=e<0&&P.charCodeAt(0)===45?-e:e,L=Yu("n",P,G)):(G=e<0&&n>1?-e:e,L=Yu("n",P,G),G<0&&i[0]&&i[0].t=="t"&&(L=L.substr(1),i[0].v="-"+i[0].v)),V=L.length-1;var N=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){N=a;break}var C=i.length;if(N===i.length&&L.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(V>=i[a].v.length-1?(V-=i[a].v.length,i[a].v=L.substr(V+1,i[a].v.length)):V<0?i[a].v="":(i[a].v=L.substr(0,V+1),V=-1),i[a].t="t",C=a);V>=0&&C<i.length&&(i[C].v=L.substr(0,V+1)+i[C].v)}else if(N!==i.length&&L.indexOf("E")===-1){for(V=L.indexOf(".")-1,a=N;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(d=i[a].v.indexOf(".")>-1&&a===N?i[a].v.indexOf(".")-1:i[a].v.length-1,Y=i[a].v.substr(d+1);d>=0;--d)V>=0&&(i[a].v.charAt(d)==="0"||i[a].v.charAt(d)==="#")&&(Y=L.charAt(V--)+Y);i[a].v=Y,i[a].t="t",C=a}for(V>=0&&C<i.length&&(i[C].v=L.substr(0,V+1)+i[C].v),V=L.indexOf(".")+1,a=N;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==N)){for(d=i[a].v.indexOf(".")>-1&&a===N?i[a].v.indexOf(".")+1:0,Y=i[a].v.substr(0,d);d<i[a].v.length;++d)V<L.length&&(Y+=L.charAt(V++));i[a].v=Y,i[a].t="t",C=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(G=n>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Yu(i[a].t,i[a].v,G),i[a].t="t");var R="";for(a=0;a!==i.length;++a)i[a]!=null&&(R+=i[a].v);return R}var _9=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function k9(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function AX(t,e){var r=TX(t),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(_9),o=r[1].match(_9);return k9(e,a)?[n,r[0]]:k9(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,s]}function Gl(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Ar)[t],n==null&&(n=r.table&&r.table[y9[t]]||Ar[y9[t]]),n==null&&(n=dX[t]||"General");break}if(Av(n,0))return Xf(e,r);e instanceof Date&&(e=DP(e,r.date1904));var i=AX(n,e);if(Av(i[1]))return Xf(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return NX(i[1],e,r,i[0])}function Qu(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Ar[r]==null){e<0&&(e=r);continue}if(Ar[r]==t){e=r;break}}e<0&&(e=391)}return Ar[e]=t,e}function F5(t){for(var e=0;e!=392;++e)t[e]!==void 0&&Qu(t[e],e)}function mp(){Ar=uX()}var IX={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},qP=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function PX(t){var e=typeof t=="number"?Ar[t]:t;return e=e.replace(qP,"(\\d+)"),new RegExp("^"+e+"$")}function RX(t,e,r){var n=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(e.match(qP)||[]).forEach(function(p,g){var m=parseInt(r[g+1],10);switch(p.toLowerCase().charAt(0)){case"y":n=m;break;case"d":s=m;break;case"h":a=m;break;case"s":l=m;break;case"m":a>=0?o=m:i=m;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var d=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:n==-1&&i==-1&&s==-1?d:c+"T"+d}var FX=(function(){var t={};t.version="1.2.0";function e(){for(var L=0,N=new Array(256),C=0;C!=256;++C)L=C,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,N[C]=L;return typeof Int32Array<"u"?new Int32Array(N):N}var r=e();function n(L){var N=0,C=0,R=0,A=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)A[R]=L[R];for(R=0;R!=256;++R)for(C=L[R],N=256+R;N<4096;N+=256)C=A[N]=C>>>8^L[C&255];var F=[];for(R=1;R!=16;++R)F[R-1]=typeof Int32Array<"u"?A.subarray(R*256,R*256+256):A.slice(R*256,R*256+256);return F}var i=n(r),s=i[0],a=i[1],o=i[2],l=i[3],c=i[4],d=i[5],p=i[6],g=i[7],m=i[8],w=i[9],y=i[10],k=i[11],T=i[12],O=i[13],P=i[14];function V(L,N){for(var C=N^-1,R=0,A=L.length;R<A;)C=C>>>8^r[(C^L.charCodeAt(R++))&255];return~C}function Y(L,N){for(var C=N^-1,R=L.length-15,A=0;A<R;)C=P[L[A++]^C&255]^O[L[A++]^C>>8&255]^T[L[A++]^C>>16&255]^k[L[A++]^C>>>24]^y[L[A++]]^w[L[A++]]^m[L[A++]]^g[L[A++]]^p[L[A++]]^d[L[A++]]^c[L[A++]]^l[L[A++]]^o[L[A++]]^a[L[A++]]^s[L[A++]]^r[L[A++]];for(R+=15;A<R;)C=C>>>8^r[(C^L[A++])&255];return~C}function G(L,N){for(var C=N^-1,R=0,A=L.length,F=0,B=0;R<A;)F=L.charCodeAt(R++),F<128?C=C>>>8^r[(C^F)&255]:F<2048?(C=C>>>8^r[(C^(192|F>>6&31))&255],C=C>>>8^r[(C^(128|F&63))&255]):F>=55296&&F<57344?(F=(F&1023)+64,B=L.charCodeAt(R++)&1023,C=C>>>8^r[(C^(240|F>>8&7))&255],C=C>>>8^r[(C^(128|F>>2&63))&255],C=C>>>8^r[(C^(128|B>>6&15|(F&3)<<4))&255],C=C>>>8^r[(C^(128|B&63))&255]):(C=C>>>8^r[(C^(224|F>>12&15))&255],C=C>>>8^r[(C^(128|F>>6&63))&255],C=C>>>8^r[(C^(128|F&63))&255]);return~C}return t.table=r,t.bstr=V,t.buf=Y,t.str=G,t})(),_r=(function(){var e={};e.version="1.2.1";function r(le,Ne){for(var _e=le.split("/"),ke=Ne.split("/"),Ae=0,Ie=0,Qe=Math.min(_e.length,ke.length);Ae<Qe;++Ae){if(Ie=_e[Ae].length-ke[Ae].length)return Ie;if(_e[Ae]!=ke[Ae])return _e[Ae]<ke[Ae]?-1:1}return _e.length-ke.length}function n(le){if(le.charAt(le.length-1)=="/")return le.slice(0,-1).indexOf("/")===-1?le:n(le.slice(0,-1));var Ne=le.lastIndexOf("/");return Ne===-1?le:le.slice(0,Ne+1)}function i(le){if(le.charAt(le.length-1)=="/")return i(le.slice(0,-1));var Ne=le.lastIndexOf("/");return Ne===-1?le:le.slice(Ne+1)}function s(le,Ne){typeof Ne=="string"&&(Ne=new Date(Ne));var _e=Ne.getHours();_e=_e<<6|Ne.getMinutes(),_e=_e<<5|Ne.getSeconds()>>>1,le.write_shift(2,_e);var ke=Ne.getFullYear()-1980;ke=ke<<4|Ne.getMonth()+1,ke=ke<<5|Ne.getDate(),le.write_shift(2,ke)}function a(le){var Ne=le.read_shift(2)&65535,_e=le.read_shift(2)&65535,ke=new Date,Ae=_e&31;_e>>>=5;var Ie=_e&15;_e>>>=4,ke.setMilliseconds(0),ke.setFullYear(_e+1980),ke.setMonth(Ie-1),ke.setDate(Ae);var Qe=Ne&31;Ne>>>=5;var lt=Ne&63;return Ne>>>=6,ke.setHours(Ne),ke.setMinutes(lt),ke.setSeconds(Qe<<1),ke}function o(le){Fa(le,0);for(var Ne={},_e=0;le.l<=le.length-4;){var ke=le.read_shift(2),Ae=le.read_shift(2),Ie=le.l+Ae,Qe={};switch(ke){case 21589:_e=le.read_shift(1),_e&1&&(Qe.mtime=le.read_shift(4)),Ae>5&&(_e&2&&(Qe.atime=le.read_shift(4)),_e&4&&(Qe.ctime=le.read_shift(4))),Qe.mtime&&(Qe.mt=new Date(Qe.mtime*1e3));break}le.l=Ie,Ne[ke]=Qe}return Ne}var l;function c(){return l||(l={})}function d(le,Ne){if(le[0]==80&&le[1]==75)return nr(le,Ne);if((le[0]|32)==109&&(le[1]|32)==105)return sr(le,Ne);if(le.length<512)throw new Error("CFB file size "+le.length+" < 512");var _e=3,ke=512,Ae=0,Ie=0,Qe=0,lt=0,et=0,tt=[],st=le.slice(0,512);Fa(st,0);var kt=p(st);switch(_e=kt[0],_e){case 3:ke=512;break;case 4:ke=4096;break;case 0:if(kt[1]==0)return nr(le,Ne);default:throw new Error("Major Version: Expected 3 or 4 saw "+_e)}ke!==512&&(st=le.slice(0,ke),Fa(st,28));var Ot=le.slice(0,ke);g(st,_e);var Wt=st.read_shift(4,"i");if(_e===3&&Wt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Wt);st.l+=4,Qe=st.read_shift(4,"i"),st.l+=4,st.chk("00100000","Mini Stream Cutoff Size: "),lt=st.read_shift(4,"i"),Ae=st.read_shift(4,"i"),et=st.read_shift(4,"i"),Ie=st.read_shift(4,"i");for(var Dt=-1,At=0;At<109&&(Dt=st.read_shift(4,"i"),!(Dt<0));++At)tt[At]=Dt;var Er=m(le,ke);k(et,Ie,Er,ke,tt);var fn=O(Er,Qe,tt,ke);fn[Qe].name="!Directory",Ae>0&&lt!==B&&(fn[lt].name="!MiniFAT"),fn[tt[0]].name="!FAT",fn.fat_addrs=tt,fn.ssz=ke;var Mr={},gn=[],Da=[],Oa=[];P(Qe,fn,Er,gn,Ae,Mr,Da,lt),w(Da,Oa,gn),gn.shift();var ra={FileIndex:Da,FullPaths:Oa};return Ne&&Ne.raw&&(ra.raw={header:Ot,sectors:Er}),ra}function p(le){if(le[le.l]==80&&le[le.l+1]==75)return[0,0];le.chk(te,"Header Signature: "),le.l+=16;var Ne=le.read_shift(2,"u");return[le.read_shift(2,"u"),Ne]}function g(le,Ne){var _e=9;switch(le.l+=2,_e=le.read_shift(2)){case 9:if(Ne!=3)throw new Error("Sector Shift: Expected 9 saw "+_e);break;case 12:if(Ne!=4)throw new Error("Sector Shift: Expected 12 saw "+_e);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+_e)}le.chk("0600","Mini Sector Shift: "),le.chk("000000000000","Reserved: ")}function m(le,Ne){for(var _e=Math.ceil(le.length/Ne)-1,ke=[],Ae=1;Ae<_e;++Ae)ke[Ae-1]=le.slice(Ae*Ne,(Ae+1)*Ne);return ke[_e-1]=le.slice(_e*Ne),ke}function w(le,Ne,_e){for(var ke=0,Ae=0,Ie=0,Qe=0,lt=0,et=_e.length,tt=[],st=[];ke<et;++ke)tt[ke]=st[ke]=ke,Ne[ke]=_e[ke];for(;lt<st.length;++lt)ke=st[lt],Ae=le[ke].L,Ie=le[ke].R,Qe=le[ke].C,tt[ke]===ke&&(Ae!==-1&&tt[Ae]!==Ae&&(tt[ke]=tt[Ae]),Ie!==-1&&tt[Ie]!==Ie&&(tt[ke]=tt[Ie])),Qe!==-1&&(tt[Qe]=ke),Ae!==-1&&ke!=tt[ke]&&(tt[Ae]=tt[ke],st.lastIndexOf(Ae)<lt&&st.push(Ae)),Ie!==-1&&ke!=tt[ke]&&(tt[Ie]=tt[ke],st.lastIndexOf(Ie)<lt&&st.push(Ie));for(ke=1;ke<et;++ke)tt[ke]===ke&&(Ie!==-1&&tt[Ie]!==Ie?tt[ke]=tt[Ie]:Ae!==-1&&tt[Ae]!==Ae&&(tt[ke]=tt[Ae]));for(ke=1;ke<et;++ke)if(le[ke].type!==0){if(lt=ke,lt!=tt[lt])do lt=tt[lt],Ne[ke]=Ne[lt]+"/"+Ne[ke];while(lt!==0&&tt[lt]!==-1&&lt!=tt[lt]);tt[ke]=-1}for(Ne[0]+="/",ke=1;ke<et;++ke)le[ke].type!==2&&(Ne[ke]+="/")}function y(le,Ne,_e){for(var ke=le.start,Ae=le.size,Ie=[],Qe=ke;_e&&Ae>0&&Qe>=0;)Ie.push(Ne.slice(Qe*F,Qe*F+F)),Ae-=F,Qe=yf(_e,Qe*4);return Ie.length===0?xt(0):ma(Ie).slice(0,le.size)}function k(le,Ne,_e,ke,Ae){var Ie=B;if(le===B){if(Ne!==0)throw new Error("DIFAT chain shorter than expected")}else if(le!==-1){var Qe=_e[le],lt=(ke>>>2)-1;if(!Qe)return;for(var et=0;et<lt&&(Ie=yf(Qe,et*4))!==B;++et)Ae.push(Ie);k(yf(Qe,ke-4),Ne-1,_e,ke,Ae)}}function T(le,Ne,_e,ke,Ae){var Ie=[],Qe=[];Ae||(Ae=[]);var lt=ke-1,et=0,tt=0;for(et=Ne;et>=0;){Ae[et]=!0,Ie[Ie.length]=et,Qe.push(le[et]);var st=_e[Math.floor(et*4/ke)];if(tt=et*4&lt,ke<4+tt)throw new Error("FAT boundary crossed: "+et+" 4 "+ke);if(!le[st])break;et=yf(le[st],tt)}return{nodes:Ie,data:j9([Qe])}}function O(le,Ne,_e,ke){var Ae=le.length,Ie=[],Qe=[],lt=[],et=[],tt=ke-1,st=0,kt=0,Ot=0,Wt=0;for(st=0;st<Ae;++st)if(lt=[],Ot=st+Ne,Ot>=Ae&&(Ot-=Ae),!Qe[Ot]){et=[];var Dt=[];for(kt=Ot;kt>=0;){Dt[kt]=!0,Qe[kt]=!0,lt[lt.length]=kt,et.push(le[kt]);var At=_e[Math.floor(kt*4/ke)];if(Wt=kt*4&tt,ke<4+Wt)throw new Error("FAT boundary crossed: "+kt+" 4 "+ke);if(!le[At]||(kt=yf(le[At],Wt),Dt[kt]))break}Ie[Ot]={nodes:lt,data:j9([et])}}return Ie}function P(le,Ne,_e,ke,Ae,Ie,Qe,lt){for(var et=0,tt=ke.length?2:0,st=Ne[le].data,kt=0,Ot=0,Wt;kt<st.length;kt+=128){var Dt=st.slice(kt,kt+128);Fa(Dt,64),Ot=Dt.read_shift(2),Wt=Pb(Dt,0,Ot-tt),ke.push(Wt);var At={name:Wt,type:Dt.read_shift(1),color:Dt.read_shift(1),L:Dt.read_shift(4,"i"),R:Dt.read_shift(4,"i"),C:Dt.read_shift(4,"i"),clsid:Dt.read_shift(16),state:Dt.read_shift(4,"i"),start:0,size:0},Er=Dt.read_shift(2)+Dt.read_shift(2)+Dt.read_shift(2)+Dt.read_shift(2);Er!==0&&(At.ct=V(Dt,Dt.l-8));var fn=Dt.read_shift(2)+Dt.read_shift(2)+Dt.read_shift(2)+Dt.read_shift(2);fn!==0&&(At.mt=V(Dt,Dt.l-8)),At.start=Dt.read_shift(4,"i"),At.size=Dt.read_shift(4,"i"),At.size<0&&At.start<0&&(At.size=At.type=0,At.start=B,At.name=""),At.type===5?(et=At.start,Ae>0&&et!==B&&(Ne[et].name="!StreamData")):At.size>=4096?(At.storage="fat",Ne[At.start]===void 0&&(Ne[At.start]=T(_e,At.start,Ne.fat_addrs,Ne.ssz)),Ne[At.start].name=At.name,At.content=Ne[At.start].data.slice(0,At.size)):(At.storage="minifat",At.size<0?At.size=0:et!==B&&At.start!==B&&Ne[et]&&(At.content=y(At,Ne[et].data,(Ne[lt]||{}).data))),At.content&&Fa(At.content,0),Ie[Wt]=At,Qe.push(At)}}function V(le,Ne){return new Date((dl(le,Ne+4)/1e7*Math.pow(2,32)+dl(le,Ne)/1e7-11644473600)*1e3)}function Y(le,Ne){return c(),d(l.readFileSync(le),Ne)}function G(le,Ne){var _e=Ne&&Ne.type;switch(_e||en&&Buffer.isBuffer(le)&&(_e="buffer"),_e||"base64"){case"file":return Y(le,Ne);case"base64":return d(fl(yl(le)),Ne);case"binary":return d(fl(le),Ne)}return d(le,Ne)}function L(le,Ne){var _e=Ne||{},ke=_e.root||"Root Entry";if(le.FullPaths||(le.FullPaths=[]),le.FileIndex||(le.FileIndex=[]),le.FullPaths.length!==le.FileIndex.length)throw new Error("inconsistent CFB structure");le.FullPaths.length===0&&(le.FullPaths[0]=ke+"/",le.FileIndex[0]={name:ke,type:5}),_e.CLSID&&(le.FileIndex[0].clsid=_e.CLSID),N(le)}function N(le){var Ne="Sh33tJ5";if(!_r.find(le,"/"+Ne)){var _e=xt(4);_e[0]=55,_e[1]=_e[3]=50,_e[2]=54,le.FileIndex.push({name:Ne,type:2,content:_e,size:4,L:69,R:69,C:69}),le.FullPaths.push(le.FullPaths[0]+Ne),C(le)}}function C(le,Ne){L(le);for(var _e=!1,ke=!1,Ae=le.FullPaths.length-1;Ae>=0;--Ae){var Ie=le.FileIndex[Ae];switch(Ie.type){case 0:ke?_e=!0:(le.FileIndex.pop(),le.FullPaths.pop());break;case 1:case 2:case 5:ke=!0,isNaN(Ie.R*Ie.L*Ie.C)&&(_e=!0),Ie.R>-1&&Ie.L>-1&&Ie.R==Ie.L&&(_e=!0);break;default:_e=!0;break}}if(!(!_e&&!Ne)){var Qe=new Date(1987,1,19),lt=0,et=Object.create?Object.create(null):{},tt=[];for(Ae=0;Ae<le.FullPaths.length;++Ae)et[le.FullPaths[Ae]]=!0,le.FileIndex[Ae].type!==0&&tt.push([le.FullPaths[Ae],le.FileIndex[Ae]]);for(Ae=0;Ae<tt.length;++Ae){var st=n(tt[Ae][0]);ke=et[st],ke||(tt.push([st,{name:i(st).replace("/",""),type:1,clsid:Ee,ct:Qe,mt:Qe,content:null}]),et[st]=!0)}for(tt.sort(function(Wt,Dt){return r(Wt[0],Dt[0])}),le.FullPaths=[],le.FileIndex=[],Ae=0;Ae<tt.length;++Ae)le.FullPaths[Ae]=tt[Ae][0],le.FileIndex[Ae]=tt[Ae][1];for(Ae=0;Ae<tt.length;++Ae){var kt=le.FileIndex[Ae],Ot=le.FullPaths[Ae];if(kt.name=i(Ot).replace("/",""),kt.L=kt.R=kt.C=-(kt.color=1),kt.size=kt.content?kt.content.length:0,kt.start=0,kt.clsid=kt.clsid||Ee,Ae===0)kt.C=tt.length>1?1:-1,kt.size=0,kt.type=5;else if(Ot.slice(-1)=="/"){for(lt=Ae+1;lt<tt.length&&n(le.FullPaths[lt])!=Ot;++lt);for(kt.C=lt>=tt.length?-1:lt,lt=Ae+1;lt<tt.length&&n(le.FullPaths[lt])!=n(Ot);++lt);kt.R=lt>=tt.length?-1:lt,kt.type=1}else n(le.FullPaths[Ae+1]||"")==n(Ot)&&(kt.R=Ae+1),kt.type=2}}}function R(le,Ne){var _e=Ne||{};if(_e.fileType=="mad")return Gr(le,_e);switch(C(le),_e.fileType){case"zip":return hr(le,_e)}var ke=(function(Wt){for(var Dt=0,At=0,Er=0;Er<Wt.FileIndex.length;++Er){var fn=Wt.FileIndex[Er];if(fn.content){var Mr=fn.content.length;Mr>0&&(Mr<4096?Dt+=Mr+63>>6:At+=Mr+511>>9)}}for(var gn=Wt.FullPaths.length+3>>2,Da=Dt+7>>3,Oa=Dt+127>>7,ra=Da+At+gn+Oa,fi=ra+127>>7,Ko=fi<=109?0:Math.ceil((fi-109)/127);ra+fi+Ko+127>>7>fi;)Ko=++fi<=109?0:Math.ceil((fi-109)/127);var Tn=[1,Ko,fi,Oa,gn,At,Dt,0];return Wt.FileIndex[0].size=Dt<<6,Tn[7]=(Wt.FileIndex[0].start=Tn[0]+Tn[1]+Tn[2]+Tn[3]+Tn[4]+Tn[5])+(Tn[6]+7>>3),Tn})(le),Ae=xt(ke[7]<<9),Ie=0,Qe=0;{for(Ie=0;Ie<8;++Ie)Ae.write_shift(1,pe[Ie]);for(Ie=0;Ie<8;++Ie)Ae.write_shift(2,0);for(Ae.write_shift(2,62),Ae.write_shift(2,3),Ae.write_shift(2,65534),Ae.write_shift(2,9),Ae.write_shift(2,6),Ie=0;Ie<3;++Ie)Ae.write_shift(2,0);for(Ae.write_shift(4,0),Ae.write_shift(4,ke[2]),Ae.write_shift(4,ke[0]+ke[1]+ke[2]+ke[3]-1),Ae.write_shift(4,0),Ae.write_shift(4,4096),Ae.write_shift(4,ke[3]?ke[0]+ke[1]+ke[2]-1:B),Ae.write_shift(4,ke[3]),Ae.write_shift(-4,ke[1]?ke[0]-1:B),Ae.write_shift(4,ke[1]),Ie=0;Ie<109;++Ie)Ae.write_shift(-4,Ie<ke[2]?ke[1]+Ie:-1)}if(ke[1])for(Qe=0;Qe<ke[1];++Qe){for(;Ie<236+Qe*127;++Ie)Ae.write_shift(-4,Ie<ke[2]?ke[1]+Ie:-1);Ae.write_shift(-4,Qe===ke[1]-1?B:Qe+1)}var lt=function(Wt){for(Qe+=Wt;Ie<Qe-1;++Ie)Ae.write_shift(-4,Ie+1);Wt&&(++Ie,Ae.write_shift(-4,B))};for(Qe=Ie=0,Qe+=ke[1];Ie<Qe;++Ie)Ae.write_shift(-4,ve.DIFSECT);for(Qe+=ke[2];Ie<Qe;++Ie)Ae.write_shift(-4,ve.FATSECT);lt(ke[3]),lt(ke[4]);for(var et=0,tt=0,st=le.FileIndex[0];et<le.FileIndex.length;++et)st=le.FileIndex[et],st.content&&(tt=st.content.length,!(tt<4096)&&(st.start=Qe,lt(tt+511>>9)));for(lt(ke[6]+7>>3);Ae.l&511;)Ae.write_shift(-4,ve.ENDOFCHAIN);for(Qe=Ie=0,et=0;et<le.FileIndex.length;++et)st=le.FileIndex[et],st.content&&(tt=st.content.length,!(!tt||tt>=4096)&&(st.start=Qe,lt(tt+63>>6)));for(;Ae.l&511;)Ae.write_shift(-4,ve.ENDOFCHAIN);for(Ie=0;Ie<ke[4]<<2;++Ie){var kt=le.FullPaths[Ie];if(!kt||kt.length===0){for(et=0;et<17;++et)Ae.write_shift(4,0);for(et=0;et<3;++et)Ae.write_shift(4,-1);for(et=0;et<12;++et)Ae.write_shift(4,0);continue}st=le.FileIndex[Ie],Ie===0&&(st.start=st.size?st.start-1:B);var Ot=Ie===0&&_e.root||st.name;if(tt=2*(Ot.length+1),Ae.write_shift(64,Ot,"utf16le"),Ae.write_shift(2,tt),Ae.write_shift(1,st.type),Ae.write_shift(1,st.color),Ae.write_shift(-4,st.L),Ae.write_shift(-4,st.R),Ae.write_shift(-4,st.C),st.clsid)Ae.write_shift(16,st.clsid,"hex");else for(et=0;et<4;++et)Ae.write_shift(4,0);Ae.write_shift(4,st.state||0),Ae.write_shift(4,0),Ae.write_shift(4,0),Ae.write_shift(4,0),Ae.write_shift(4,0),Ae.write_shift(4,st.start),Ae.write_shift(4,st.size),Ae.write_shift(4,0)}for(Ie=1;Ie<le.FileIndex.length;++Ie)if(st=le.FileIndex[Ie],st.size>=4096)if(Ae.l=st.start+1<<9,en&&Buffer.isBuffer(st.content))st.content.copy(Ae,Ae.l,0,st.size),Ae.l+=st.size+511&-512;else{for(et=0;et<st.size;++et)Ae.write_shift(1,st.content[et]);for(;et&511;++et)Ae.write_shift(1,0)}for(Ie=1;Ie<le.FileIndex.length;++Ie)if(st=le.FileIndex[Ie],st.size>0&&st.size<4096)if(en&&Buffer.isBuffer(st.content))st.content.copy(Ae,Ae.l,0,st.size),Ae.l+=st.size+63&-64;else{for(et=0;et<st.size;++et)Ae.write_shift(1,st.content[et]);for(;et&63;++et)Ae.write_shift(1,0)}if(en)Ae.l=Ae.length;else for(;Ae.l<Ae.length;)Ae.write_shift(1,0);return Ae}function A(le,Ne){var _e=le.FullPaths.map(function(et){return et.toUpperCase()}),ke=_e.map(function(et){var tt=et.split("/");return tt[tt.length-(et.slice(-1)=="/"?2:1)]}),Ae=!1;Ne.charCodeAt(0)===47?(Ae=!0,Ne=_e[0].slice(0,-1)+Ne):Ae=Ne.indexOf("/")!==-1;var Ie=Ne.toUpperCase(),Qe=Ae===!0?_e.indexOf(Ie):ke.indexOf(Ie);if(Qe!==-1)return le.FileIndex[Qe];var lt=!Ie.match(vm);for(Ie=Ie.replace(No,""),lt&&(Ie=Ie.replace(vm,"!")),Qe=0;Qe<_e.length;++Qe)if((lt?_e[Qe].replace(vm,"!"):_e[Qe]).replace(No,"")==Ie||(lt?ke[Qe].replace(vm,"!"):ke[Qe]).replace(No,"")==Ie)return le.FileIndex[Qe];return null}var F=64,B=-2,te="d0cf11e0a1b11ae1",pe=[208,207,17,224,161,177,26,225],Ee="00000000000000000000000000000000",ve={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:B,FREESECT:-1,HEADER_SIGNATURE:te,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Ee,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function re(le,Ne,_e){c();var ke=R(le,_e);l.writeFileSync(Ne,ke)}function W(le){for(var Ne=new Array(le.length),_e=0;_e<le.length;++_e)Ne[_e]=String.fromCharCode(le[_e]);return Ne.join("")}function ne(le,Ne){var _e=R(le,Ne);switch(Ne&&Ne.type||"buffer"){case"file":return c(),l.writeFileSync(Ne.filename,_e),_e;case"binary":return typeof _e=="string"?_e:W(_e);case"base64":return sg(typeof _e=="string"?_e:W(_e));case"buffer":if(en)return Buffer.isBuffer(_e)?_e:hd(_e);case"array":return typeof _e=="string"?fl(_e):_e}return _e}var Q;function I(le){try{var Ne=le.InflateRaw,_e=new Ne;if(_e._processChunk(new Uint8Array([3,0]),_e._finishFlushFlag),_e.bytesRead)Q=le;else throw new Error("zlib does not expose bytesRead")}catch(ke){console.error("cannot use native zlib: "+(ke.message||ke))}}function H(le,Ne){if(!Q)return Bt(le,Ne);var _e=Q.InflateRaw,ke=new _e,Ae=ke._processChunk(le.slice(le.l),ke._finishFlushFlag);return le.l+=ke.bytesRead,Ae}function X(le){return Q?Q.deflateRawSync(le):mt(le)}var J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ue=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],we=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function fe(le){var Ne=(le<<1|le<<11)&139536|(le<<5|le<<15)&558144;return(Ne>>16|Ne>>8|Ne)&255}for(var me=typeof Uint8Array<"u",be=me?new Uint8Array(256):[],Le=0;Le<256;++Le)be[Le]=fe(Le);function ee(le,Ne){var _e=be[le&255];return Ne<=8?_e>>>8-Ne:(_e=_e<<8|be[le>>8&255],Ne<=16?_e>>>16-Ne:(_e=_e<<8|be[le>>16&255],_e>>>24-Ne))}function Be(le,Ne){var _e=Ne&7,ke=Ne>>>3;return(le[ke]|(_e<=6?0:le[ke+1]<<8))>>>_e&3}function Re(le,Ne){var _e=Ne&7,ke=Ne>>>3;return(le[ke]|(_e<=5?0:le[ke+1]<<8))>>>_e&7}function ae(le,Ne){var _e=Ne&7,ke=Ne>>>3;return(le[ke]|(_e<=4?0:le[ke+1]<<8))>>>_e&15}function $e(le,Ne){var _e=Ne&7,ke=Ne>>>3;return(le[ke]|(_e<=3?0:le[ke+1]<<8))>>>_e&31}function qe(le,Ne){var _e=Ne&7,ke=Ne>>>3;return(le[ke]|(_e<=1?0:le[ke+1]<<8))>>>_e&127}function it(le,Ne,_e){var ke=Ne&7,Ae=Ne>>>3,Ie=(1<<_e)-1,Qe=le[Ae]>>>ke;return _e<8-ke||(Qe|=le[Ae+1]<<8-ke,_e<16-ke)||(Qe|=le[Ae+2]<<16-ke,_e<24-ke)||(Qe|=le[Ae+3]<<24-ke),Qe&Ie}function oe(le,Ne,_e){var ke=Ne&7,Ae=Ne>>>3;return ke<=5?le[Ae]|=(_e&7)<<ke:(le[Ae]|=_e<<ke&255,le[Ae+1]=(_e&7)>>8-ke),Ne+3}function je(le,Ne,_e){var ke=Ne&7,Ae=Ne>>>3;return _e=(_e&1)<<ke,le[Ae]|=_e,Ne+1}function Ge(le,Ne,_e){var ke=Ne&7,Ae=Ne>>>3;return _e<<=ke,le[Ae]|=_e&255,_e>>>=8,le[Ae+1]=_e,Ne+8}function Tt(le,Ne,_e){var ke=Ne&7,Ae=Ne>>>3;return _e<<=ke,le[Ae]|=_e&255,_e>>>=8,le[Ae+1]=_e&255,le[Ae+2]=_e>>>8,Ne+16}function Pe(le,Ne){var _e=le.length,ke=2*_e>Ne?2*_e:Ne+5,Ae=0;if(_e>=Ne)return le;if(en){var Ie=g9(ke);if(le.copy)le.copy(Ie);else for(;Ae<le.length;++Ae)Ie[Ae]=le[Ae];return Ie}else if(me){var Qe=new Uint8Array(ke);if(Qe.set)Qe.set(le);else for(;Ae<_e;++Ae)Qe[Ae]=le[Ae];return Qe}return le.length=ke,le}function Ke(le){for(var Ne=new Array(le),_e=0;_e<le;++_e)Ne[_e]=0;return Ne}function ot(le,Ne,_e){var ke=1,Ae=0,Ie=0,Qe=0,lt=0,et=le.length,tt=me?new Uint16Array(32):Ke(32);for(Ie=0;Ie<32;++Ie)tt[Ie]=0;for(Ie=et;Ie<_e;++Ie)le[Ie]=0;et=le.length;var st=me?new Uint16Array(et):Ke(et);for(Ie=0;Ie<et;++Ie)tt[Ae=le[Ie]]++,ke<Ae&&(ke=Ae),st[Ie]=0;for(tt[0]=0,Ie=1;Ie<=ke;++Ie)tt[Ie+16]=lt=lt+tt[Ie-1]<<1;for(Ie=0;Ie<et;++Ie)lt=le[Ie],lt!=0&&(st[Ie]=tt[lt+16]++);var kt=0;for(Ie=0;Ie<et;++Ie)if(kt=le[Ie],kt!=0)for(lt=ee(st[Ie],ke)>>ke-kt,Qe=(1<<ke+4-kt)-1;Qe>=0;--Qe)Ne[lt|Qe<<kt]=kt&15|Ie<<4;return ke}var We=me?new Uint16Array(512):Ke(512),Lt=me?new Uint16Array(32):Ke(32);if(!me){for(var St=0;St<512;++St)We[St]=0;for(St=0;St<32;++St)Lt[St]=0}(function(){for(var le=[],Ne=0;Ne<32;Ne++)le.push(5);ot(le,Lt,32);var _e=[];for(Ne=0;Ne<=143;Ne++)_e.push(8);for(;Ne<=255;Ne++)_e.push(9);for(;Ne<=279;Ne++)_e.push(7);for(;Ne<=287;Ne++)_e.push(8);ot(_e,We,288)})();var Pt=(function(){for(var Ne=me?new Uint8Array(32768):[],_e=0,ke=0;_e<we.length-1;++_e)for(;ke<we[_e+1];++ke)Ne[ke]=_e;for(;ke<32768;++ke)Ne[ke]=29;var Ae=me?new Uint8Array(259):[];for(_e=0,ke=0;_e<ue.length-1;++_e)for(;ke<ue[_e+1];++ke)Ae[ke]=_e;function Ie(lt,et){for(var tt=0;tt<lt.length;){var st=Math.min(65535,lt.length-tt),kt=tt+st==lt.length;for(et.write_shift(1,+kt),et.write_shift(2,st),et.write_shift(2,~st&65535);st-- >0;)et[et.l++]=lt[tt++]}return et.l}function Qe(lt,et){for(var tt=0,st=0,kt=me?new Uint16Array(32768):[];st<lt.length;){var Ot=Math.min(65535,lt.length-st);if(Ot<10){for(tt=oe(et,tt,+(st+Ot==lt.length)),tt&7&&(tt+=8-(tt&7)),et.l=tt/8|0,et.write_shift(2,Ot),et.write_shift(2,~Ot&65535);Ot-- >0;)et[et.l++]=lt[st++];tt=et.l*8;continue}tt=oe(et,tt,+(st+Ot==lt.length)+2);for(var Wt=0;Ot-- >0;){var Dt=lt[st];Wt=(Wt<<5^Dt)&32767;var At=-1,Er=0;if((At=kt[Wt])&&(At|=st&-32768,At>st&&(At-=32768),At<st))for(;lt[At+Er]==lt[st+Er]&&Er<250;)++Er;if(Er>2){Dt=Ae[Er],Dt<=22?tt=Ge(et,tt,be[Dt+1]>>1)-1:(Ge(et,tt,3),tt+=5,Ge(et,tt,be[Dt-23]>>5),tt+=3);var fn=Dt<8?0:Dt-4>>2;fn>0&&(Tt(et,tt,Er-ue[Dt]),tt+=fn),Dt=Ne[st-At],tt=Ge(et,tt,be[Dt]>>3),tt-=3;var Mr=Dt<4?0:Dt-2>>1;Mr>0&&(Tt(et,tt,st-At-we[Dt]),tt+=Mr);for(var gn=0;gn<Er;++gn)kt[Wt]=st&32767,Wt=(Wt<<5^lt[st])&32767,++st;Ot-=Er-1}else Dt<=143?Dt=Dt+48:tt=je(et,tt,1),tt=Ge(et,tt,be[Dt]),kt[Wt]=st&32767,++st}tt=Ge(et,tt,0)-1}return et.l=(tt+7)/8|0,et.l}return function(et,tt){return et.length<8?Ie(et,tt):Qe(et,tt)}})();function mt(le){var Ne=xt(50+Math.floor(le.length*1.1)),_e=Pt(le,Ne);return Ne.slice(0,_e)}var _t=me?new Uint16Array(32768):Ke(32768),Xt=me?new Uint16Array(32768):Ke(32768),Kt=me?new Uint16Array(128):Ke(128),Ut=1,xr=1;function Yr(le,Ne){var _e=$e(le,Ne)+257;Ne+=5;var ke=$e(le,Ne)+1;Ne+=5;var Ae=ae(le,Ne)+4;Ne+=4;for(var Ie=0,Qe=me?new Uint8Array(19):Ke(19),lt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],et=1,tt=me?new Uint8Array(8):Ke(8),st=me?new Uint8Array(8):Ke(8),kt=Qe.length,Ot=0;Ot<Ae;++Ot)Qe[J[Ot]]=Ie=Re(le,Ne),et<Ie&&(et=Ie),tt[Ie]++,Ne+=3;var Wt=0;for(tt[0]=0,Ot=1;Ot<=et;++Ot)st[Ot]=Wt=Wt+tt[Ot-1]<<1;for(Ot=0;Ot<kt;++Ot)(Wt=Qe[Ot])!=0&&(lt[Ot]=st[Wt]++);var Dt=0;for(Ot=0;Ot<kt;++Ot)if(Dt=Qe[Ot],Dt!=0){Wt=be[lt[Ot]]>>8-Dt;for(var At=(1<<7-Dt)-1;At>=0;--At)Kt[Wt|At<<Dt]=Dt&7|Ot<<3}var Er=[];for(et=1;Er.length<_e+ke;)switch(Wt=Kt[qe(le,Ne)],Ne+=Wt&7,Wt>>>=3){case 16:for(Ie=3+Be(le,Ne),Ne+=2,Wt=Er[Er.length-1];Ie-- >0;)Er.push(Wt);break;case 17:for(Ie=3+Re(le,Ne),Ne+=3;Ie-- >0;)Er.push(0);break;case 18:for(Ie=11+qe(le,Ne),Ne+=7;Ie-- >0;)Er.push(0);break;default:Er.push(Wt),et<Wt&&(et=Wt);break}var fn=Er.slice(0,_e),Mr=Er.slice(_e);for(Ot=_e;Ot<286;++Ot)fn[Ot]=0;for(Ot=ke;Ot<30;++Ot)Mr[Ot]=0;return Ut=ot(fn,_t,286),xr=ot(Mr,Xt,30),Ne}function Ve(le,Ne){if(le[0]==3&&!(le[1]&3))return[E0(Ne),2];for(var _e=0,ke=0,Ae=g9(Ne||1<<18),Ie=0,Qe=Ae.length>>>0,lt=0,et=0;(ke&1)==0;){if(ke=Re(le,_e),_e+=3,ke>>>1)ke>>1==1?(lt=9,et=5):(_e=Yr(le,_e),lt=Ut,et=xr);else{_e&7&&(_e+=8-(_e&7));var tt=le[_e>>>3]|le[(_e>>>3)+1]<<8;if(_e+=32,tt>0)for(!Ne&&Qe<Ie+tt&&(Ae=Pe(Ae,Ie+tt),Qe=Ae.length);tt-- >0;)Ae[Ie++]=le[_e>>>3],_e+=8;continue}for(;;){!Ne&&Qe<Ie+32767&&(Ae=Pe(Ae,Ie+32767),Qe=Ae.length);var st=it(le,_e,lt),kt=ke>>>1==1?We[st]:_t[st];if(_e+=kt&15,kt>>>=4,(kt>>>8&255)===0)Ae[Ie++]=kt;else{if(kt==256)break;kt-=257;var Ot=kt<8?0:kt-4>>2;Ot>5&&(Ot=0);var Wt=Ie+ue[kt];Ot>0&&(Wt+=it(le,_e,Ot),_e+=Ot),st=it(le,_e,et),kt=ke>>>1==1?Lt[st]:Xt[st],_e+=kt&15,kt>>>=4;var Dt=kt<4?0:kt-2>>1,At=we[kt];for(Dt>0&&(At+=it(le,_e,Dt),_e+=Dt),!Ne&&Qe<Wt&&(Ae=Pe(Ae,Wt+100),Qe=Ae.length);Ie<Wt;)Ae[Ie]=Ae[Ie-At],++Ie}}}return Ne?[Ae,_e+7>>>3]:[Ae.slice(0,Ie),_e+7>>>3]}function Bt(le,Ne){var _e=le.slice(le.l||0),ke=Ve(_e,Ne);return le.l+=ke[1],ke[0]}function zt(le,Ne){if(le)typeof console<"u"&&console.error(Ne);else throw new Error(Ne)}function nr(le,Ne){var _e=le;Fa(_e,0);var ke=[],Ae=[],Ie={FileIndex:ke,FullPaths:Ae};L(Ie,{root:Ne.root});for(var Qe=_e.length-4;(_e[Qe]!=80||_e[Qe+1]!=75||_e[Qe+2]!=5||_e[Qe+3]!=6)&&Qe>=0;)--Qe;_e.l=Qe+4,_e.l+=4;var lt=_e.read_shift(2);_e.l+=6;var et=_e.read_shift(4);for(_e.l=et,Qe=0;Qe<lt;++Qe){_e.l+=20;var tt=_e.read_shift(4),st=_e.read_shift(4),kt=_e.read_shift(2),Ot=_e.read_shift(2),Wt=_e.read_shift(2);_e.l+=8;var Dt=_e.read_shift(4),At=o(_e.slice(_e.l+kt,_e.l+kt+Ot));_e.l+=kt+Ot+Wt;var Er=_e.l;_e.l=Dt+4,lr(_e,tt,st,Ie,At),_e.l=Er}return Ie}function lr(le,Ne,_e,ke,Ae){le.l+=2;var Ie=le.read_shift(2),Qe=le.read_shift(2),lt=a(le);if(Ie&8257)throw new Error("Unsupported ZIP encryption");for(var et=le.read_shift(4),tt=le.read_shift(4),st=le.read_shift(4),kt=le.read_shift(2),Ot=le.read_shift(2),Wt="",Dt=0;Dt<kt;++Dt)Wt+=String.fromCharCode(le[le.l++]);if(Ot){var At=o(le.slice(le.l,le.l+Ot));(At[21589]||{}).mt&&(lt=At[21589].mt),((Ae||{})[21589]||{}).mt&&(lt=Ae[21589].mt)}le.l+=Ot;var Er=le.slice(le.l,le.l+tt);switch(Qe){case 8:Er=H(le,st);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Qe)}var fn=!1;Ie&8&&(et=le.read_shift(4),et==134695760&&(et=le.read_shift(4),fn=!0),tt=le.read_shift(4),st=le.read_shift(4)),tt!=Ne&&zt(fn,"Bad compressed size: "+Ne+" != "+tt),st!=_e&&zt(fn,"Bad uncompressed size: "+_e+" != "+st),Un(ke,Wt,Er,{unsafe:!0,mt:lt})}function hr(le,Ne){var _e=Ne||{},ke=[],Ae=[],Ie=xt(1),Qe=_e.compression?8:0,lt=0,et=0,tt=0,st=0,kt=0,Ot=le.FullPaths[0],Wt=Ot,Dt=le.FileIndex[0],At=[],Er=0;for(et=1;et<le.FullPaths.length;++et)if(Wt=le.FullPaths[et].slice(Ot.length),Dt=le.FileIndex[et],!(!Dt.size||!Dt.content||Wt=="Sh33tJ5")){var fn=st,Mr=xt(Wt.length);for(tt=0;tt<Wt.length;++tt)Mr.write_shift(1,Wt.charCodeAt(tt)&127);Mr=Mr.slice(0,Mr.l),At[kt]=FX.buf(Dt.content,0);var gn=Dt.content;Qe==8&&(gn=X(gn)),Ie=xt(30),Ie.write_shift(4,67324752),Ie.write_shift(2,20),Ie.write_shift(2,lt),Ie.write_shift(2,Qe),Dt.mt?s(Ie,Dt.mt):Ie.write_shift(4,0),Ie.write_shift(-4,At[kt]),Ie.write_shift(4,gn.length),Ie.write_shift(4,Dt.content.length),Ie.write_shift(2,Mr.length),Ie.write_shift(2,0),st+=Ie.length,ke.push(Ie),st+=Mr.length,ke.push(Mr),st+=gn.length,ke.push(gn),Ie=xt(46),Ie.write_shift(4,33639248),Ie.write_shift(2,0),Ie.write_shift(2,20),Ie.write_shift(2,lt),Ie.write_shift(2,Qe),Ie.write_shift(4,0),Ie.write_shift(-4,At[kt]),Ie.write_shift(4,gn.length),Ie.write_shift(4,Dt.content.length),Ie.write_shift(2,Mr.length),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(4,0),Ie.write_shift(4,fn),Er+=Ie.l,Ae.push(Ie),Er+=Mr.length,Ae.push(Mr),++kt}return Ie=xt(22),Ie.write_shift(4,101010256),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,kt),Ie.write_shift(2,kt),Ie.write_shift(4,Er),Ie.write_shift(4,st),Ie.write_shift(2,0),ma([ma(ke),ma(Ae),Ie])}var Zt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function yr(le,Ne){if(le.ctype)return le.ctype;var _e=le.name||"",ke=_e.match(/\.([^\.]+)$/);return ke&&Zt[ke[1]]||Ne&&(ke=(_e=Ne).match(/[\.\\]([^\.\\])+$/),ke&&Zt[ke[1]])?Zt[ke[1]]:"application/octet-stream"}function dn(le){for(var Ne=sg(le),_e=[],ke=0;ke<Ne.length;ke+=76)_e.push(Ne.slice(ke,ke+76));return _e.join(`\r
`)+`\r
`}function qr(le){var Ne=le.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(tt){var st=tt.charCodeAt(0).toString(16).toUpperCase();return"="+(st.length==1?"0"+st:st)});Ne=Ne.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ne.charAt(0)==`
`&&(Ne="=0D"+Ne.slice(1)),Ne=Ne.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var _e=[],ke=Ne.split(`\r
`),Ae=0;Ae<ke.length;++Ae){var Ie=ke[Ae];if(Ie.length==0){_e.push("");continue}for(var Qe=0;Qe<Ie.length;){var lt=76,et=Ie.slice(Qe,Qe+lt);et.charAt(lt-1)=="="?lt--:et.charAt(lt-2)=="="?lt-=2:et.charAt(lt-3)=="="&&(lt-=3),et=Ie.slice(Qe,Qe+lt),Qe+=lt,Qe<Ie.length&&(et+="="),_e.push(et)}}return _e.join(`\r
`)}function Ln(le){for(var Ne=[],_e=0;_e<le.length;++_e){for(var ke=le[_e];_e<=le.length&&ke.charAt(ke.length-1)=="=";)ke=ke.slice(0,ke.length-1)+le[++_e];Ne.push(ke)}for(var Ae=0;Ae<Ne.length;++Ae)Ne[Ae]=Ne[Ae].replace(/[=][0-9A-Fa-f]{2}/g,function(Ie){return String.fromCharCode(parseInt(Ie.slice(1),16))});return fl(Ne.join(`\r
`))}function jn(le,Ne,_e){for(var ke="",Ae="",Ie="",Qe,lt=0;lt<10;++lt){var et=Ne[lt];if(!et||et.match(/^\s*$/))break;var tt=et.match(/^(.*?):\s*([^\s].*)$/);if(tt)switch(tt[1].toLowerCase()){case"content-location":ke=tt[2].trim();break;case"content-type":Ie=tt[2].trim();break;case"content-transfer-encoding":Ae=tt[2].trim();break}}switch(++lt,Ae.toLowerCase()){case"base64":Qe=fl(yl(Ne.slice(lt).join("")));break;case"quoted-printable":Qe=Ln(Ne.slice(lt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ae)}var st=Un(le,ke.slice(_e.length),Qe,{unsafe:!0});Ie&&(st.ctype=Ie)}function sr(le,Ne){if(W(le.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var _e=Ne&&Ne.root||"",ke=(en&&Buffer.isBuffer(le)?le.toString("binary"):W(le)).split(`\r
`),Ae=0,Ie="";for(Ae=0;Ae<ke.length;++Ae)if(Ie=ke[Ae],!!/^Content-Location:/i.test(Ie)&&(Ie=Ie.slice(Ie.indexOf("file")),_e||(_e=Ie.slice(0,Ie.lastIndexOf("/")+1)),Ie.slice(0,_e.length)!=_e))for(;_e.length>0&&(_e=_e.slice(0,_e.length-1),_e=_e.slice(0,_e.lastIndexOf("/")+1),Ie.slice(0,_e.length)!=_e););var Qe=(ke[1]||"").match(/boundary="(.*?)"/);if(!Qe)throw new Error("MAD cannot find boundary");var lt="--"+(Qe[1]||""),et=[],tt=[],st={FileIndex:et,FullPaths:tt};L(st);var kt,Ot=0;for(Ae=0;Ae<ke.length;++Ae){var Wt=ke[Ae];Wt!==lt&&Wt!==lt+"--"||(Ot++&&jn(st,ke.slice(kt,Ae),_e),kt=Ae)}return st}function Gr(le,Ne){var _e=Ne||{},ke=_e.boundary||"SheetJS";ke="------="+ke;for(var Ae=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ke.slice(2)+'"',"","",""],Ie=le.FullPaths[0],Qe=Ie,lt=le.FileIndex[0],et=1;et<le.FullPaths.length;++et)if(Qe=le.FullPaths[et].slice(Ie.length),lt=le.FileIndex[et],!(!lt.size||!lt.content||Qe=="Sh33tJ5")){Qe=Qe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Er){return"_x"+Er.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Er){return"_u"+Er.charCodeAt(0).toString(16)+"_"});for(var tt=lt.content,st=en&&Buffer.isBuffer(tt)?tt.toString("binary"):W(tt),kt=0,Ot=Math.min(1024,st.length),Wt=0,Dt=0;Dt<=Ot;++Dt)(Wt=st.charCodeAt(Dt))>=32&&Wt<128&&++kt;var At=kt>=Ot*4/5;Ae.push(ke),Ae.push("Content-Location: "+(_e.root||"file:///C:/SheetJS/")+Qe),Ae.push("Content-Transfer-Encoding: "+(At?"quoted-printable":"base64")),Ae.push("Content-Type: "+yr(lt,Qe)),Ae.push(""),Ae.push(At?qr(st):dn(st))}return Ae.push(ke+`--\r
`),Ae.join(`\r
`)}function ds(le){var Ne={};return L(Ne,le),Ne}function Un(le,Ne,_e,ke){var Ae=ke&&ke.unsafe;Ae||L(le);var Ie=!Ae&&_r.find(le,Ne);if(!Ie){var Qe=le.FullPaths[0];Ne.slice(0,Qe.length)==Qe?Qe=Ne:(Qe.slice(-1)!="/"&&(Qe+="/"),Qe=(Qe+Ne).replace("//","/")),Ie={name:i(Ne),type:2},le.FileIndex.push(Ie),le.FullPaths.push(Qe),Ae||_r.utils.cfb_gc(le)}return Ie.content=_e,Ie.size=_e?_e.length:0,ke&&(ke.CLSID&&(Ie.clsid=ke.CLSID),ke.mt&&(Ie.mt=ke.mt),ke.ct&&(Ie.ct=ke.ct)),Ie}function Xi(le,Ne){L(le);var _e=_r.find(le,Ne);if(_e){for(var ke=0;ke<le.FileIndex.length;++ke)if(le.FileIndex[ke]==_e)return le.FileIndex.splice(ke,1),le.FullPaths.splice(ke,1),!0}return!1}function Cn(le,Ne,_e){L(le);var ke=_r.find(le,Ne);if(ke){for(var Ae=0;Ae<le.FileIndex.length;++Ae)if(le.FileIndex[Ae]==ke)return le.FileIndex[Ae].name=i(_e),le.FullPaths[Ae]=_e,!0}return!1}function ai(le){C(le,!0)}return e.find=A,e.read=G,e.parse=d,e.write=ne,e.writeFile=re,e.utils={cfb_new:ds,cfb_add:Un,cfb_del:Xi,cfb_mov:Cn,cfb_gc:ai,ReadShift:Im,CheckField:hR,prep_blob:Fa,bconcat:ma,use_zlib:I,_deflateRaw:mt,_inflateRaw:Bt,consts:ve},e})();function LX(t){return typeof t=="string"?R5(t):Array.isArray(t)?aX(t):t}function Wg(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=R5(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?nu(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var i=new Blob([LX(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=t,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=B0(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function jX(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function cs(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function E9(t,e){for(var r=[],n=cs(t),i=0;i!==n.length;++i)r[t[n[i]][e]]==null&&(r[t[n[i]][e]]=n[i]);return r}function L5(t){for(var e=[],r=cs(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function j5(t){for(var e=[],r=cs(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function DX(t){for(var e=[],r=cs(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var Pv=new Date(1899,11,30,0,0,0);function ea(t,e){var r=t.getTime(),n=Pv.getTime()+(t.getTimezoneOffset()-Pv.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var WP=new Date,OX=Pv.getTime()+(WP.getTimezoneOffset()-Pv.getTimezoneOffset())*6e4,S9=WP.getTimezoneOffset();function D5(t){var e=new Date;return e.setTime(t*24*60*60*1e3+OX),e.getTimezoneOffset()!==S9&&e.setTime(e.getTime()+(e.getTimezoneOffset()-S9)*6e4),e}function MX(t){var e=0,r=0,n=!1,i=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=i.length;++s)if(i[s]){switch(r=1,s>3&&(n=!0),i[s].slice(i[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[s].slice(i[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(i[s],10)}return e}var C9=new Date("2017-02-19T19:06:09.000Z"),GP=isNaN(C9.getFullYear())?new Date("2/19/17"):C9,BX=GP.getFullYear()==2017;function Ei(t,e){var r=new Date(t);if(BX)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(GP.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Yf(t,e){if(en&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return nu(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return nu(LP(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return nu(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return nu(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],i=0;i!=t.length;++i)n.push(String.fromCharCode(t[i]));return n.join("")}function Si(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Si(t[r]));return e}function rs(t,e){for(var r="";r.length<e;)r+=t;return r}function Ec(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var VX=["january","february","march","april","may","june","july","august","september","october","november","december"];function K1(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&VX.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return n<0||n>8099?r:(i>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var UX=(function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,i){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),a=[s[0]],o=1;o<s.length;++o)a.push(i),a.push(s[o]);return a}})();function KP(t){return t?t.content&&t.type?Yf(t.content,!0):t.data?xm(t.data):t.asNodeBuffer&&en?xm(t.asNodeBuffer().toString("binary")):t.asBinary?xm(t.asBinary()):t._data&&t._data.getContent?xm(Yf(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function XP(t){if(!t)return null;if(t.data)return p9(t.data);if(t.asNodeBuffer&&en)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?p9(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function zX(t){return t&&t.name.slice(-4)===".bin"?XP(t):KP(t)}function Vl(t,e){for(var r=t.FullPaths||cs(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),i=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var a=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==a||i==a)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function Sb(t,e){var r=Vl(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Ds(t,e,r){if(!r)return zX(Sb(t,e));if(!e)return null;try{return Ds(t,e)}catch{return null}}function hl(t,e,r){if(!r)return KP(Sb(t,e));if(!e)return null;try{return hl(t,e)}catch{return null}}function $X(t,e,r){return XP(Sb(t,e))}function T9(t){for(var e=t.FullPaths||cs(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Wr(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return en?n=hd(r):n=oX(r),_r.utils.cfb_add(t,e,n)}_r.utils.cfb_add(t,e,r)}else t.file(e,r)}function Cb(){return _r.utils.cfb_new()}function YP(t,e){switch(e.type){case"base64":return _r.read(t,{type:"base64"});case"binary":return _r.read(t,{type:"binary"});case"buffer":case"array":return _r.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function ym(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var i=n.shift();i===".."?r.pop():i!=="."&&r.push(i)}return r.join("/")}var Ts=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,HX=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,N9=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,qX=/<[^>]*>/g,xo=Ts.match(N9)?N9:qX,WX=/<\w*:/,GX=/<(\/?)\w+:/;function Fr(t,e,r){for(var n={},i=0,s=0;i!==t.length&&!((s=t.charCodeAt(i))===32||s===10||s===13);++i);if(e||(n[0]=t.slice(0,i)),i===t.length)return n;var a=t.match(HX),o=0,l="",c=0,d="",p="",g=1;if(a)for(c=0;c!=a.length;++c){for(p=a[c],s=0;s!=p.length&&p.charCodeAt(s)!==61;++s);for(d=p.slice(0,s).trim();p.charCodeAt(s+1)==32;)++s;for(g=(i=p.charCodeAt(s+1))==34||i==39?1:0,l=p.slice(s+1+g,p.length-g),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var m=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[m]&&d.slice(o-3,o)=="ext")continue;n[m]=l,n[m.toLowerCase()]=l}}return n}function gu(t){return t.replace(GX,"<$1")}var QP={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Tb=L5(QP),En=(function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var i=n+"",s=i.indexOf("<![CDATA[");if(s==-1)return i.replace(t,function(o,l){return QP[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var a=i.indexOf("]]>");return r(i.slice(0,s))+i.slice(s+9,a)+r(i.slice(a+3))}})(),Nb=/[&<>'"]/g,KX=/[\u0000-\u0008\u000b-\u001f]/g;function Qn(t){var e=t+"";return e.replace(Nb,function(r){return Tb[r]}).replace(KX,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function A9(t){return Qn(t).replace(/ /g,"_x0020_")}var JP=/[\u0000-\u001f]/g;function Ab(t){var e=t+"";return e.replace(Nb,function(r){return Tb[r]}).replace(/\n/g,"<br/>").replace(JP,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function XX(t){var e=t+"";return e.replace(Nb,function(r){return Tb[r]}).replace(JP,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var I9=(function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}})();function YX(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function wi(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function g4(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(i=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(i&63)<<6|s&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function P9(t){var e=E0(2*t.length),r,n,i=1,s=0,a=0,o;for(n=0;n<t.length;n+=i)i=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),i=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),i=3):(i=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function R9(t){return hd(t,"binary").toString("utf8")}var rx="foo bar baz",ni=en&&(R9(rx)==g4(rx)&&R9||P9(rx)==g4(rx)&&P9)||g4,nu=en?function(t){return hd(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,i=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},og=(function(){var t={};return function(r,n){var i=r+"|"+(n||"");return t[i]?t[i]:t[i]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),ZP=(function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)n=n.replace(t[i][0],t[i][1]);return n}})(),QX=(function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),JX=/<\/?(?:vt:)?variant>/g,ZX=/<(?:vt:)([^>]*)>([\s\S]*)</;function F9(t,e){var r=Fr(t),n=t.match(QX(r.baseType))||[],i=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return i}return n.forEach(function(s){var a=s.replace(JX,"").match(ZX);a&&i.push({v:ni(a[2]),t:a[1]})}),i}var eR=/(^\s|\s$|\n)/;function ja(t,e){return"<"+t+(e.match(eR)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function lg(t){return cs(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Vt(t,e,r){return"<"+t+(r!=null?lg(r):"")+(e!=null?(e.match(eR)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function tw(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function eY(t,e){switch(typeof t){case"string":var r=Vt("vt:lpwstr",Qn(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Vt((t|0)==t?"vt:i4":"vt:r8",Qn(String(t)));case"boolean":return Vt("vt:bool",t?"true":"false")}if(t instanceof Date)return Vt("vt:filetime",tw(t));throw new Error("Unable to serialize "+t)}function Ib(t){if(en&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return ni(B0(_b(t)));throw new Error("Bad input format: expected Buffer or string")}var cg=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ys={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},hh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ul={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function tY(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,s=5;s>=0;--s)i=i*256+t[e+s];return n==2047?i==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}function rY(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=n?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)t[r+o]=s&255;t[r+6]=(i&15)<<4|s&15,t[r+7]=i>>4|n}var L9=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var i=0,s=t[0][n].length;i<s;i+=r)e.push.apply(e,t[0][n].slice(i,i+r));return e},j9=en?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:hd(e)})):L9(t)}:L9,D9=function(t,e,r){for(var n=[],i=e;i<r;i+=2)n.push(String.fromCharCode(qu(t,i)));return n.join("").replace(No,"")},Pb=en?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(No,""):D9(t,e,r)}:D9,O9=function(t,e,r){for(var n=[],i=e;i<e+r;++i)n.push(("0"+t[i].toString(16)).slice(-2));return n.join("")},tR=en?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):O9(t,e,r)}:O9,M9=function(t,e,r){for(var n=[],i=e;i<r;i++)n.push(String.fromCharCode(o1(t,i)));return n.join("")},Gg=en?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):M9(e,r,n)}:M9,rR=function(t,e){var r=dl(t,e);return r>0?Gg(t,e+4,e+4+r-1):""},nR=rR,iR=function(t,e){var r=dl(t,e);return r>0?Gg(t,e+4,e+4+r-1):""},sR=iR,aR=function(t,e){var r=2*dl(t,e);return r>0?Gg(t,e+4,e+4+r-1):""},oR=aR,lR=function(e,r){var n=dl(e,r);return n>0?Pb(e,r+4,r+4+n):""},cR=lR,uR=function(t,e){var r=dl(t,e);return r>0?Gg(t,e+4,e+4+r):""},dR=uR,fR=function(t,e){return tY(t,e)},Rv=fR,Rb=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};en&&(nR=function(e,r){if(!Buffer.isBuffer(e))return rR(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},sR=function(e,r){if(!Buffer.isBuffer(e))return iR(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},oR=function(e,r){if(!Buffer.isBuffer(e))return aR(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},cR=function(e,r){if(!Buffer.isBuffer(e))return lR(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},dR=function(e,r){if(!Buffer.isBuffer(e))return uR(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},Rv=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):fR(e,r)},Rb=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var o1=function(t,e){return t[e]},qu=function(t,e){return t[e+1]*256+t[e]},nY=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},dl=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},yf=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},iY=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Im(t,e){var r="",n,i,s=[],a,o,l,c;switch(e){case"dbcs":if(c=this.l,en&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(qu(this,c)),c+=2;t*=2;break;case"utf8":r=Gg(this,this.l,this.l+t);break;case"utf16le":t*=2,r=Pb(this,this.l,this.l+t);break;case"wstr":return Im.call(this,t,"dbcs");case"lpstr-ansi":r=nR(this,this.l),t=4+dl(this,this.l);break;case"lpstr-cp":r=sR(this,this.l),t=4+dl(this,this.l);break;case"lpwstr":r=oR(this,this.l),t=4+2*dl(this,this.l);break;case"lpp4":t=4+dl(this,this.l),r=cR(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+dl(this,this.l),r=dR(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=o1(this,this.l+t++))!==0;)s.push(tx(a));r=s.join("");break;case"_wstr":for(t=0,r="";(a=qu(this,this.l+t))!==0;)s.push(tx(a)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=o1(this,c),this.l=c+1,o=Im.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(tx(qu(this,c))),c+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=o1(this,c),this.l=c+1,o=Im.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(tx(o1(this,c))),c+=1}r=s.join("");break;default:switch(t){case 1:return n=o1(this,this.l),this.l++,n;case 2:return n=(e==="i"?nY:qu)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?yf:iY)(this,this.l),this.l+=4,n):(i=dl(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=Rv(this,this.l):i=Rv([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:r=tR(this,this.l,t);break}}return this.l+=t,r}var sY=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},aY=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},oY=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function lY(t,e,r){var n=0,i=0;if(r==="dbcs"){for(i=0;i!=e.length;++i)oY(this,e.charCodeAt(i),this.l+2*i);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;n=e.length}else if(r==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,sY(this,e,this.l);break;case 8:if(n=8,r==="f"){rY(this,e,this.l);break}case 16:break;case-4:n=4,aY(this,e,this.l);break}return this.l+=n,this}function hR(t,e){var r=tR(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Fa(t,e){t.l=e,t.read_shift=Im,t.chk=hR,t.write_shift=lY}function go(t,e){t.l+=e}function xt(t){var e=E0(t);return Fa(e,0),e}function pd(t,e,r){if(t){var n,i,s;Fa(t,t.l||0);for(var a=t.length,o=0,l=0;t.l<a;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var c=mg[o]||mg[65535];for(n=t.read_shift(1),s=n&127,i=1;i<4&&n&128;++i)s+=((n=t.read_shift(1))&127)<<7*i;l=t.l+s;var d=c.f&&c.f(t,s,r);if(t.l=l,e(d,c,o))return}}}function qo(){var t=[],e=en?256:2048,r=function(c){var d=xt(c);return Fa(d,0),d},n=r(e),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(c){return n&&c<n.length-n.l?n:(i(),n=r(Math.max(c+1,e)))},a=function(){return i(),ma(t)},o=function(c){i(),n=c,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:o,end:a,_bufs:t}}function Et(t,e,r,n){var i=+e,s;if(!isNaN(i)){n||(n=mg[i].p||(r||[]).length||0),s=1+(i>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var a=t.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(n>=128)a.write_shift(1,(n&127)+128),n>>=7;else{a.write_shift(1,n);break}n>0&&Rb(r)&&t.push(r)}}function Pm(t,e,r){var n=Si(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function B9(t,e,r){var n=Si(t);return n.s=Pm(n.s,e.s,r),n.e=Pm(n.e,e.s,r),n}function Rm(t,e){if(t.cRel&&t.c<0)for(t=Si(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Si(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Rr(t);return!t.cRel&&t.cRel!=null&&(r=dY(r)),!t.rRel&&t.rRel!=null&&(r=cY(r)),r}function x4(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Wi(t.s.c)+":"+(t.e.cRel?"":"$")+Wi(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Cs(t.s.r)+":"+(t.e.rRel?"":"$")+Cs(t.e.r):Rm(t.s,e.biff)+":"+Rm(t.e,e.biff)}function Fb(t){return parseInt(uY(t),10)-1}function Cs(t){return""+(t+1)}function cY(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function uY(t){return t.replace(/\$(\d+)$/,"$1")}function Lb(t){for(var e=fY(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Wi(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function dY(t){return t.replace(/^([A-Z])/,"$$$1")}function fY(t){return t.replace(/^\$([A-Z])/,"$1")}function hY(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Gi(t){for(var e=0,r=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:e-1}}function Rr(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Wo(t){var e=t.indexOf(":");return e==-1?{s:Gi(t),e:Gi(t)}:{s:Gi(t.slice(0,e)),e:Gi(t.slice(e+1))}}function Hr(t,e){return typeof e>"u"||typeof e=="number"?Hr(t.s,t.e):(typeof t!="string"&&(t=Rr(t)),typeof e!="string"&&(e=Rr(e)),t==e?t:t+":"+e)}function Sn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,s=t.length;for(r=0;n<s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.s.c=--r,r=0;n<s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(e.s.r=--r,n===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.e.c=--r,r=0;n!=s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return e.e.r=--r,e}function V9(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Gl(t.z,r?ea(e):e)}catch{}try{return t.w=Gl((t.XF||{}).numFmtId||(r?14:0),r?ea(e):e)}catch{return""+e}}function sd(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?md[t.v]||t.v:e==null?V9(t,t.v):V9(t,e))}function V0(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function pR(t,e,r){var n=r||{},i=t?Array.isArray(t):n.dense,s=t||(i?[]:{}),a=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?Gi(n.origin):n.origin;a=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Sn(s["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),a==-1&&(c.e.r=a=d.e.r+1)}for(var p=0;p!=e.length;++p)if(e[p]){if(!Array.isArray(e[p]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=e[p].length;++g)if(!(typeof e[p][g]>"u")){var m={v:e[p][g]},w=a+p,y=o+g;if(c.s.r>w&&(c.s.r=w),c.s.c>y&&(c.s.c=y),c.e.r<w&&(c.e.r=w),c.e.c<y&&(c.e.c=y),e[p][g]&&typeof e[p][g]=="object"&&!Array.isArray(e[p][g])&&!(e[p][g]instanceof Date))m=e[p][g];else if(Array.isArray(m.v)&&(m.f=e[p][g][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Ar[14],n.cellDates?(m.t="d",m.w=Gl(m.z,ea(m.v))):(m.t="n",m.v=ea(m.v),m.w=Gl(m.z,m.v))):m.t="s";if(i)s[w]||(s[w]=[]),s[w][y]&&s[w][y].z&&(m.z=s[w][y].z),s[w][y]=m;else{var k=Rr({c:y,r:w});s[k]&&s[k].z&&(m.z=s[k].z),s[k]=m}}}return c.s.c<1e7&&(s["!ref"]=Hr(c)),s}function gp(t,e){return pR(null,t,e)}function pY(t){return t.read_shift(4,"i")}function Sc(t,e){return e||(e=xt(4)),e.write_shift(4,t),e}function mo(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function ga(t,e){var r=!1;return e==null&&(r=!0,e=xt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function mY(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function gY(t,e){return e||(e=xt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function jb(t,e){var r=t.l,n=t.read_shift(1),i=mo(t),s=[],a={t:i,h:i};if((n&1)!==0){for(var o=t.read_shift(4),l=0;l!=o;++l)s.push(mY(t));a.r=s}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}function xY(t,e){var r=!1;return e==null&&(r=!0,e=xt(15+4*t.t.length)),e.write_shift(1,0),ga(t.t,e),r?e.slice(0,e.l):e}var vY=jb;function yY(t,e){var r=!1;return e==null&&(r=!0,e=xt(23+4*t.t.length)),e.write_shift(1,1),ga(t.t,e),e.write_shift(4,1),gY({},e),r?e.slice(0,e.l):e}function Yl(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function ph(t,e){return e==null&&(e=xt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function mh(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function gh(t,e){return e==null&&(e=xt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var wY=mo,mR=ga;function Db(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function Fv(t,e){var r=!1;return e==null&&(r=!0,e=xt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var bY=mo,rw=Db,Ob=Fv;function Mb(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var i=n===0?Rv([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):yf(e,0)>>2;return r?i/100:i}function gR(t,e){e==null&&(e=xt(4));var r=0,n=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?i:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function xR(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function _Y(t,e){return e||(e=xt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var xh=xR,xp=_Y;function fo(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Qf(t,e){return(e||xt(8)).write_shift(8,t,"f")}function kY(t){var e={},r=t.read_shift(1),n=r>>>1,i=t.read_shift(1),s=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=i;var c=If[i];c&&(e.rgb=dg(c));break;case 2:e.rgb=dg([a,o,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function Lv(t,e){if(e||(e=xt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function EY(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function SY(t,e){e||(e=xt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function vR(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function CY(t){return vR(t,1)}function TY(t){return vR(t,2)}var Bb=2,Vo=3,nx=11,U9=12,jv=19,ix=64,NY=65,AY=71,IY=4108,PY=4126,fa=80,yR=81,RY=[fa,yR],nw={1:{n:"CodePage",t:Bb},2:{n:"Category",t:fa},3:{n:"PresentationFormat",t:fa},4:{n:"ByteCount",t:Vo},5:{n:"LineCount",t:Vo},6:{n:"ParagraphCount",t:Vo},7:{n:"SlideCount",t:Vo},8:{n:"NoteCount",t:Vo},9:{n:"HiddenCount",t:Vo},10:{n:"MultimediaClipCount",t:Vo},11:{n:"ScaleCrop",t:nx},12:{n:"HeadingPairs",t:IY},13:{n:"TitlesOfParts",t:PY},14:{n:"Manager",t:fa},15:{n:"Company",t:fa},16:{n:"LinksUpToDate",t:nx},17:{n:"CharacterCount",t:Vo},19:{n:"SharedDoc",t:nx},22:{n:"HyperlinksChanged",t:nx},23:{n:"AppVersion",t:Vo,p:"version"},24:{n:"DigSig",t:NY},26:{n:"ContentType",t:fa},27:{n:"ContentStatus",t:fa},28:{n:"Language",t:fa},29:{n:"Version",t:fa},255:{},2147483648:{n:"Locale",t:jv},2147483651:{n:"Behavior",t:jv},1919054434:{}},iw={1:{n:"CodePage",t:Bb},2:{n:"Title",t:fa},3:{n:"Subject",t:fa},4:{n:"Author",t:fa},5:{n:"Keywords",t:fa},6:{n:"Comments",t:fa},7:{n:"Template",t:fa},8:{n:"LastAuthor",t:fa},9:{n:"RevNumber",t:fa},10:{n:"EditTime",t:ix},11:{n:"LastPrinted",t:ix},12:{n:"CreatedDate",t:ix},13:{n:"ModifiedDate",t:ix},14:{n:"PageCount",t:Vo},15:{n:"WordCount",t:Vo},16:{n:"CharCount",t:Vo},17:{n:"Thumbnail",t:AY},18:{n:"Application",t:fa},19:{n:"DocSecurity",t:Vo},255:{},2147483648:{n:"Locale",t:jv},2147483651:{n:"Behavior",t:jv},1919054434:{}},z9={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},FY=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function LY(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var jY=LY([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),If=Si(jY),md={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},wR={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},sw={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},sx={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function Vb(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function DY(t){var e=Vb();if(!t||!t.match)return e;var r={};if((t.match(xo)||[]).forEach(function(n){var i=Fr(n);switch(i[0].replace(WX,"<")){case"<?xml":break;case"<Types":e.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[i.Extension]=i.ContentType;break;case"<Override":e[sw[i.ContentType]]!==void 0&&e[sw[i.ContentType]].push(i.PartName);break}}),e.xmlns!==Ys.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function bR(t,e){var r=DX(sw),n=[],i;n[n.length]=Ts,n[n.length]=Vt("Types",null,{xmlns:Ys.CT,"xmlns:xsd":Ys.xsd,"xmlns:xsi":Ys.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Vt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){t[l]&&t[l].length>0&&(i=t[l][0],n[n.length]=Vt("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:sx[l][e.bookType]||sx[l].xlsx}))},a=function(l){(t[l]||[]).forEach(function(c){n[n.length]=Vt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:sx[l][e.bookType]||sx[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(c){n[n.length]=Vt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:r[l][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var an={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function ug(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Fm(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(xo)||[]).forEach(function(i){var s=Fr(i);if(s[0]==="<Relationship"){var a={};a.Type=s.Type,a.Target=s.Target,a.Id=s.Id,s.TargetMode&&(a.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:ym(s.Target,e);r[o]=a,n[s.Id]=a}}),r["!id"]=n,r}function b1(t){var e=[Ts,Vt("Relationships",null,{xmlns:Ys.RELS})];return cs(t["!id"]).forEach(function(r){e[e.length]=Vt("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Kn(t,e,r,n,i,s){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=n,i.Target=r,[an.HLINK,an.XPATH,an.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}var OY="application/vnd.oasis.opendocument.spreadsheet";function MY(t,e){for(var r=Ib(t),n,i;n=cg.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(i=Fr(n[0],!1),i.path=="/"&&i.type!==OY)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function BY(t){var e=[Ts];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function $9(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function VY(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function UY(t){var e=[Ts];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push($9(t[r][0],t[r][1])),e.push(VY("",t[r][0]));return e.push($9("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function _R(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Tv.version+"</meta:generator></office:meta></office:document-meta>"}var Hl=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],zY=(function(){for(var t=new Array(Hl.length),e=0;e<Hl.length;++e){var r=Hl[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t})();function kR(t){var e={};t=ni(t);for(var r=0;r<Hl.length;++r){var n=Hl[r],i=t.match(zY[r]);i!=null&&i.length>0&&(e[n[1]]=En(i[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=Ei(e[n[1]]))}return e}function v4(t,e,r,n,i){i[t]!=null||e==null||e===""||(i[t]=e,e=Qn(e),n[n.length]=r?Vt(t,e,r):ja(t,e))}function ER(t,e){var r=e||{},n=[Ts,Vt("cp:coreProperties",null,{"xmlns:cp":Ys.CORE_PROPS,"xmlns:dc":Ys.dc,"xmlns:dcterms":Ys.dcterms,"xmlns:dcmitype":Ys.dcmitype,"xmlns:xsi":Ys.xsi})],i={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&v4("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:tw(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),t.ModifiedDate!=null&&v4("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:tw(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var s=0;s!=Hl.length;++s){var a=Hl[s],o=r.Props&&r.Props[a[1]]!=null?r.Props[a[1]]:t?t[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&v4(a[0],o,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Pf=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],SR=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function CR(t,e,r,n){var i=[];if(typeof t=="string")i=F9(t,n);else for(var s=0;s<t.length;++s)i=i.concat(t[s].map(function(d){return{v:d}}));var a=typeof e=="string"?F9(e,n).map(function(d){return d.v}):e,o=0,l=0;if(a.length>0)for(var c=0;c!==i.length;c+=2){switch(l=+i[c+1].v,i[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=a.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=a.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=a.slice(o,o+l);break}o+=l}}function $Y(t,e,r){var n={};return e||(e={}),t=ni(t),Pf.forEach(function(i){var s=(t.match(og(i[0]))||[])[1];switch(i[2]){case"string":s&&(e[i[1]]=En(s));break;case"bool":e[i[1]]=s==="true";break;case"raw":var a=t.match(new RegExp("<"+i[0]+"[^>]*>([\\s\\S]*?)</"+i[0]+">"));a&&a.length>0&&(n[i[1]]=a[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&CR(n.HeadingPairs,n.TitlesOfParts,e,r),e}function TR(t){var e=[],r=Vt;return t||(t={}),t.Application="SheetJS",e[e.length]=Ts,e[e.length]=Vt("Properties",null,{xmlns:Ys.EXT_PROPS,"xmlns:vt":Ys.vt}),Pf.forEach(function(n){if(t[n[1]]!==void 0){var i;switch(n[2]){case"string":i=Qn(String(t[n[1]]));break;case"bool":i=t[n[1]]?"true":"false";break}i!==void 0&&(e[e.length]=r(n[0],i))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+Qn(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var HY=/<[^>]+>[^<]*/g;function qY(t,e){var r={},n="",i=t.match(HY);if(i)for(var s=0;s!=i.length;++s){var a=i[s],o=Fr(a);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=En(o.name);break;case"</property>":n=null;break;default:if(a.indexOf("<vt:")===0){var l=a.split(">"),c=l[0].slice(4),d=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=En(d);break;case"bool":r[n]=wi(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Ei(d);break;case"cy":case"error":r[n]=En(d);break;default:if(c.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",a,c,l)}}else if(a.slice(0,2)!=="</"){if(e.WTF)throw new Error(a)}}}return r}function NR(t){var e=[Ts,Vt("Properties",null,{xmlns:Ys.CUST_PROPS,"xmlns:vt":Ys.vt})];if(!t)return e.join("");var r=1;return cs(t).forEach(function(i){++r,e[e.length]=Vt("property",eY(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Qn(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var aw={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},y4;function WY(t,e,r){y4||(y4=L5(aw)),e=y4[e]||e,t[e]=r}function GY(t,e){var r=[];return cs(aw).map(function(n){for(var i=0;i<Hl.length;++i)if(Hl[i][1]==n)return Hl[i];for(i=0;i<Pf.length;++i)if(Pf[i][1]==n)return Pf[i];throw n}).forEach(function(n){if(t[n[1]]!=null){var i=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push(ja(aw[n[1]]||n[1],i))}}),Vt("DocumentProperties",r.join(""),{xmlns:ul.o})}function KY(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return t&&cs(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var a=0;a<Hl.length;++a)if(s==Hl[a][1])return;for(a=0;a<Pf.length;++a)if(s==Pf[a][1])return;for(a=0;a<r.length;++a)if(s==r[a])return;var o=t[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(Vt(A9(s),o,{"dt:dt":l}))}}),e&&cs(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(Vt(A9(s),a,{"dt:dt":o}))}}),"<"+n+' xmlns="'+ul.o+'">'+i.join("")+"</"+n+">"}function Ub(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function XY(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),i=(r-n)/Math.pow(2,32);n*=1e7,i*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),i+=s);var a=xt(8);return a.write_shift(4,n),a.write_shift(4,i),a}function AR(t,e,r){var n=t.l,i=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return i}function IR(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function PR(t,e,r){return e===31?IR(t):AR(t,e,r)}function ow(t,e,r){return PR(t,e,r===!1?0:4)}function YY(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return PR(t,e,0)}function QY(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var i=t.l;r[n]=t.read_shift(0,"lpwstr").replace(No,""),t.l-i&2&&(t.l+=2)}return r}function JY(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(No,"");return r}function ZY(t){var e=t.l,r=Dv(t,yR);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=Dv(t,Vo);return[r,n]}function eQ(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(ZY(t));return r}function H9(t,e){for(var r=t.read_shift(4),n={},i=0;i!=r;++i){var s=t.read_shift(4),a=t.read_shift(4);n[s]=t.read_shift(a,e===1200?"utf16le":"utf8").replace(No,"").replace(vm,"!"),e===1200&&a%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function RR(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function tQ(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function Dv(t,e,r){var n=t.read_shift(2),i,s=r||{};if(t.l+=2,e!==U9&&n!==e&&RY.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===U9?n:e){case 2:return i=t.read_shift(2,"i"),s.raw||(t.l+=2),i;case 3:return i=t.read_shift(4,"i"),i;case 11:return t.read_shift(4)!==0;case 19:return i=t.read_shift(4),i;case 30:return AR(t,n,4).replace(No,"");case 31:return IR(t);case 64:return Ub(t);case 65:return RR(t);case 71:return tQ(t);case 80:return ow(t,n,!s.raw).replace(No,"");case 81:return YY(t,n).replace(No,"");case 4108:return eQ(t);case 4126:case 4127:return n==4127?QY(t):JY(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function q9(t,e){var r=xt(4),n=xt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=xt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=XY(e);break;case 31:case 80:for(n=xt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return ma([r,n])}function W9(t,e){var r=t.l,n=t.read_shift(4),i=t.read_shift(4),s=[],a=0,o=0,l=-1,c={};for(a=0;a!=i;++a){var d=t.read_shift(4),p=t.read_shift(4);s[a]=[d,p+r]}s.sort(function(O,P){return O[1]-P[1]});var g={};for(a=0;a!=i;++a){if(t.l!==s[a][1]){var m=!0;if(a>0&&e)switch(e[s[a-1][0]].t){case 2:t.l+2===s[a][1]&&(t.l+=2,m=!1);break;case 80:t.l<=s[a][1]&&(t.l=s[a][1],m=!1);break;case 4108:t.l<=s[a][1]&&(t.l=s[a][1],m=!1);break}if((!e||a==0)&&t.l<=s[a][1]&&(m=!1,t.l=s[a][1]),m)throw new Error("Read Error: Expected address "+s[a][1]+" at "+t.l+" :"+a)}if(e){var w=e[s[a][0]];if(g[w.n]=Dv(t,w.t,{raw:!0}),w.p==="version"&&(g[w.n]=String(g[w.n]>>16)+"."+("0000"+String(g[w.n]&65535)).slice(-4)),w.n=="CodePage")switch(g[w.n]){case 0:g[w.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:yc(o=g[w.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+g[w.n])}}else if(s[a][0]===1){if(o=g.CodePage=Dv(t,Bb),yc(o),l!==-1){var y=t.l;t.l=s[l][1],c=H9(t,o),t.l=y}}else if(s[a][0]===0){if(o===0){l=a,t.l=s[a+1][1];continue}c=H9(t,o)}else{var k=c[s[a][0]],T;switch(t[t.l]){case 65:t.l+=4,T=RR(t);break;case 30:t.l+=4,T=ow(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,T=ow(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,T=t.read_shift(4,"i");break;case 19:t.l+=4,T=t.read_shift(4);break;case 5:t.l+=4,T=t.read_shift(8,"f");break;case 11:t.l+=4,T=vs(t,4);break;case 64:t.l+=4,T=Ei(Ub(t));break;default:throw new Error("unparsed value: "+t[t.l])}g[k]=T}}return t.l=r+n,g}var FR=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function rQ(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function G9(t,e,r){var n=xt(8),i=[],s=[],a=8,o=0,l=xt(8),c=xt(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),i.push(c),a+=8+l.length,!e){c=xt(8),c.write_shift(4,0),i.unshift(c);var d=[xt(4)];for(d[0].write_shift(4,t.length),o=0;o<t.length;++o){var p=t[o][0];for(l=xt(8+2*(p.length+1)+(p.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,p.length+1),l.write_shift(0,p,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=ma(d),s.unshift(l),a+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(FR.indexOf(t[o][0])>-1||SR.indexOf(t[o][0])>-1)&&t[o][1]!=null){var g=t[o][1],m=0;if(e){m=+e[t[o][0]];var w=r[m];if(w.p=="version"&&typeof g=="string"){var y=g.split(".");g=(+y[0]<<16)+(+y[1]||0)}l=q9(w.t,g)}else{var k=rQ(g);k==-1&&(k=31,g=String(g)),l=q9(k,g)}s.push(l),c=xt(8),c.write_shift(4,e?m:2+o),i.push(c),a+=8+l.length}var T=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,T),T+=s[o].length;return n.write_shift(4,a),n.write_shift(4,s.length),ma([n].concat(i).concat(s))}function K9(t,e,r){var n=t.content;if(!n)return{};Fa(n,0);var i,s,a,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),d=n.read_shift(16);if(d!==_r.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(i=n.read_shift(4),i!==1&&i!==2)throw new Error("Unrecognized #Sets: "+i);if(s=n.read_shift(16),o=n.read_shift(4),i===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);i===2&&(a=n.read_shift(16),l=n.read_shift(4));var p=W9(n,e),g={SystemIdentifier:c};for(var m in p)g[m]=p[m];if(g.FMTID=s,i===1)return g;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var w;try{w=W9(n,null)}catch{}for(m in w)g[m]=w[m];return g.FMTID=[s,a],g}function X9(t,e,r,n,i,s){var a=xt(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,_r.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var l=G9(t,r,n);if(o.push(l),i){var c=G9(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+l.length),o.push(c)}return ma(o)}function Gd(t,e){return t.read_shift(e),null}function nQ(t,e){e||(e=xt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function iQ(t,e,r){for(var n=[],i=t.l+e;t.l<i;)n.push(r(t,i-t.l));if(i!==t.l)throw new Error("Slurp error");return n}function vs(t,e){return t.read_shift(e)===1}function Co(t,e){return e||(e=xt(2)),e.write_shift(2,+!!t),e}function Os(t){return t.read_shift(2,"u")}function Ul(t,e){return e||(e=xt(2)),e.write_shift(2,t),e}function LR(t,e){return iQ(t,e,Os)}function sQ(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function jR(t,e,r){return r||(r=xt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function Kg(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var a=n?t.read_shift(n,i):"";return a}function aQ(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,i=r&8,s=1+(r&1),a=0,o,l={};i&&(a=t.read_shift(2)),n&&(o=t.read_shift(4));var c=s==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,c);return i&&(t.l+=4*a),n&&(t.l+=o),l.t=d,i||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function oQ(t){var e=t.t||"",r=xt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=xt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var i=[r,n];return ma(i)}function Jf(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Xg(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Jf(t,n,r)}function vh(t,e,r){if(r.biff>5)return Xg(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function DR(t,e,r){return r||(r=xt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function lQ(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function cQ(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var i=t.read_shift((n?e-24:e)>>1,"utf16le").replace(No,"");return n&&(t.l+=24),i}function uQ(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var i=t.read_shift(4);if(i===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=t.read_shift(s>>1,"utf16le").replace(No,"");return r+a}function dQ(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return cQ(t);case"0303000000000000c000000000000046":return uQ(t);default:throw new Error("Unsupported Moniker "+r)}}function ax(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(No,""):"";return r}function Y9(t,e){e||(e=xt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function fQ(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var i=t.read_shift(2);t.l+=2;var s,a,o,l,c="",d,p;i&16&&(s=ax(t,r-t.l)),i&128&&(a=ax(t,r-t.l)),(i&257)===257&&(o=ax(t,r-t.l)),(i&257)===1&&(l=dQ(t,r-t.l)),i&8&&(c=ax(t,r-t.l)),i&32&&(d=t.read_shift(16)),i&64&&(p=Ub(t)),t.l=r;var g=a||o||l||"";g&&c&&(g+="#"+c),g||(g="#"+c),i&2&&g.charAt(0)=="/"&&g.charAt(1)!="/"&&(g="file://"+g);var m={Target:g};return d&&(m.guid=d),p&&(m.time=p),s&&(m.Tooltip=s),m}function hQ(t){var e=xt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),s=i>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(r=0;r<a.length;++r)e.write_shift(4,a[r]);if(s==28)n=n.slice(1),Y9(n,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));var o=i>-1?n.slice(0,i):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),s&8&&Y9(i>-1?n.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function OR(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),i=t.read_shift(1);return[e,r,n,i]}function MR(t,e){var r=OR(t);return r[3]=0,r}function xu(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function Zf(t,e,r,n){return n||(n=xt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function pQ(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function mQ(t,e,r){return e===0?"":vh(t,e,r)}function gQ(t,e,r){var n=r.biff>8?4:2,i=t.read_shift(n),s=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[i,s,a]}function BR(t){var e=t.read_shift(2),r=Mb(t);return[e,r]}function xQ(t,e,r){t.l+=4,e-=4;var n=t.l+e,i=Kg(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,i}function O5(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);return{s:{c:n,r:e},e:{c:i,r}}}function VR(t,e){return e||(e=xt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function UR(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),i=t.read_shift(1);return{s:{c:n,r:e},e:{c:i,r}}}var vQ=UR;function zR(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function yQ(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function wQ(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function to(t){t.l+=2,t.l+=t.read_shift(2)}var bQ={0:to,4:to,5:to,6:to,7:wQ,8:to,9:to,10:to,11:to,12:to,13:yQ,14:to,15:to,16:to,17:to,18:to,19:to,20:to,21:zR};function _Q(t,e){for(var r=t.l+e,n=[];t.l<r;){var i=t.read_shift(2);t.l-=2;try{n.push(bQ[i](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function ox(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function zb(t,e,r){var n=1536,i=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=xt(i);return s.write_shift(2,n),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function kQ(t,e){return e===0||t.read_shift(2),1200}function EQ(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,i=vh(t,0,r);return t.read_shift(e+n-t.l),i}function SQ(t,e){var r=!e||e.biff==8,n=xt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function CQ(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function TQ(t,e,r){var n=t.read_shift(4),i=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var a=Kg(t,0,r);return a.length===0&&(a="Sheet1"),{pos:n,hs:i,dt:s,name:a}}function NQ(t,e){var r=!e||e.biff>=8?2:1,n=xt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function AQ(t,e){for(var r=t.l+e,n=t.read_shift(4),i=t.read_shift(4),s=[],a=0;a!=i&&t.l<r;++a)s.push(aQ(t));return s.Count=n,s.Unique=i,s}function IQ(t,e){var r=xt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],i=0;i<t.length;++i)n[i]=oQ(t[i]);var s=ma([r].concat(n));return s.parts=[r.length].concat(n.map(function(a){return a.length})),s}function PQ(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function RQ(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function FQ(t){var e=pQ(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function LQ(t){return t.read_shift(2),t.read_shift(4)}function Q9(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var i=t.read_shift(2);r&&r.biff==2&&(n=1-(i>>15),i&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,i]}function jQ(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2);return{Pos:[e,r],Dim:[n,i],Flags:s,CurTab:a,FirstTab:o,Selected:l,TabRatio:c}}function DQ(){var t=xt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function OQ(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function MQ(t){var e=xt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function BQ(){}function VQ(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Kg(t,0,r),n}function UQ(t,e){var r=t.name||"Arial",n=e&&e.biff==5,i=n?15+r.length:16+2*r.length,s=xt(i);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function zQ(t){var e=xu(t);return e.isst=t.read_shift(4),e}function $Q(t,e,r,n){var i=xt(10);return Zf(t,e,n,i),i.write_shift(4,r),i}function HQ(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,i=xu(t);r.biff==2&&t.l++;var s=Xg(t,n-t.l,r);return i.val=s,i}function qQ(t,e,r,n,i){var s=!i||i.biff==8,a=xt(8+ +s+(1+s)*r.length);return Zf(t,e,n,a),a.write_shift(2,r.length),s&&a.write_shift(1,1),a.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),a}function WQ(t,e,r){var n=t.read_shift(2),i=vh(t,0,r);return[n,i]}function GQ(t,e,r,n){var i=r&&r.biff==5;n||(n=xt(i?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(i?1:2,e.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var KQ=vh;function J9(t,e,r){var n=t.l+e,i=r.biff==8||!r.biff?4:2,s=t.read_shift(i),a=t.read_shift(i),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:s,c:o},e:{r:a,c:l}}}function XQ(t,e){var r=e.biff==8||!e.biff?4:2,n=xt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function YQ(t){var e=t.read_shift(2),r=t.read_shift(2),n=BR(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function QQ(t,e){for(var r=t.l+e-2,n=t.read_shift(2),i=t.read_shift(2),s=[];t.l<r;)s.push(BR(t));if(t.l!==r)throw new Error("MulRK read error");var a=t.read_shift(2);if(s.length!=a-i+1)throw new Error("MulRK length mismatch");return{r:n,c:i,C:a,rkrec:s}}function JQ(t,e){for(var r=t.l+e-2,n=t.read_shift(2),i=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var a=t.read_shift(2);if(s.length!=a-i+1)throw new Error("MulBlank length mismatch");return{r:n,c:i,C:a,ixfe:s}}function ZQ(t,e,r,n){var i={},s=t.read_shift(4),a=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return i.patternType=FY[o>>26],n.cellStyles&&(i.alc=s&7,i.fWrap=s>>3&1,i.alcV=s>>4&7,i.fJustLast=s>>7&1,i.trot=s>>8&255,i.cIndent=s>>16&15,i.fShrinkToFit=s>>20&1,i.iReadOrder=s>>22&2,i.fAtrNum=s>>26&1,i.fAtrFnt=s>>27&1,i.fAtrAlc=s>>28&1,i.fAtrBdr=s>>29&1,i.fAtrPat=s>>30&1,i.fAtrProt=s>>31&1,i.dgLeft=a&15,i.dgRight=a>>4&15,i.dgTop=a>>8&15,i.dgBottom=a>>12&15,i.icvLeft=a>>16&127,i.icvRight=a>>23&127,i.grbitDiag=a>>30&3,i.icvTop=o&127,i.icvBottom=o>>7&127,i.icvDiag=o>>14&127,i.dgDiag=o>>21&15,i.icvFore=l&127,i.icvBack=l>>7&127,i.fsxButton=l>>14&1),i}function eJ(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=ZQ(t,e,n.fStyle,r),n}function Z9(t,e,r,n){var i=r&&r.biff==5;n||(n=xt(i?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&i&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function tJ(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function rJ(t){var e=xt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function eE(t,e,r){var n=xu(t);(r.biff==2||e==9)&&++t.l;var i=sQ(t);return n.val=i,n.t=i===!0||i===!1?"b":"e",n}function nJ(t,e,r,n,i,s){var a=xt(8);return Zf(t,e,n,a),jR(r,s,a),a}function iJ(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=xu(t),i=fo(t);return n.val=i,n}function sJ(t,e,r,n){var i=xt(14);return Zf(t,e,n,i),Qf(r,i),i}var tE=mQ;function aJ(t,e,r){var n=t.l+e,i=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,i];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var a=Jf(t,s),o=[];n>t.l;)o.push(Xg(t));return[s,i,a,o]}function rE(t,e,r){var n=t.read_shift(2),i,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(i=xQ(t,e-2,r)),s.body=i||t.read_shift(e-2),typeof i=="string"&&(s.Name=i),s}var oJ=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function nE(t,e,r){var n=t.l+e,i=t.read_shift(2),s=t.read_shift(1),a=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var c=Jf(t,a,r);i&32&&(c=oJ[c.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var p=n==t.l||o===0||!(d>0)?[]:_re(t,d,r,o);return{chKey:s,Name:c,itab:l,rgce:p}}function $R(t,e,r){if(r.biff<8)return lJ(t,e,r);for(var n=[],i=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(gQ(t,r.biff>8?12:6,r));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return n}function lJ(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Kg(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function cJ(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),i=t.read_shift(2),s=Jf(t,n,r),a=Jf(t,i,r);return[s,a]}function uJ(t,e,r){var n=UR(t);t.l++;var i=t.read_shift(1);return e-=8,[kre(t,e,r),i,n]}function iE(t,e,r){var n=vQ(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,wre(t,e,r)]}function dJ(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function fJ(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),o=vh(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:i},o,a,s]}}function hJ(t,e,r){return fJ(t,e,r)}function pJ(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(O5(t));return r}function mJ(t){var e=xt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)VR(t[r],e);return e}function gJ(t,e,r){if(r&&r.biff<8)return vJ(t,e,r);var n=zR(t),i=_Q(t,e-22,n[1]);return{cmo:n,ft:i}}var xJ={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var i=t.read_shift(1);return t.l+=i,t.l=r,{fmt:n}}};function vJ(t,e,r){t.l+=4;var n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var a=[];return a.push((xJ[n]||go)(t,e,r)),{cmo:[i,n,s],ft:a}}function yJ(t,e,r){var n=t.l,i="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:a=lQ(t,6,r);var o=t.read_shift(2);t.read_shift(2),Os(t,2);var l=t.read_shift(2);t.l+=l;for(var c=1;c<t.lens.length-1;++c){if(t.l-n!=t.lens[c])throw new Error("TxO: bad continue record");var d=t[t.l],p=Jf(t,t.lens[c+1]-t.lens[c]-1);if(i+=p,i.length>=(d?o:2*o))break}if(i.length!==o&&i.length!==o*2)throw new Error("cchText: "+o+" != "+i.length);return t.l=n+e,{t:i}}catch{return t.l=n+e,{t:i}}}function wJ(t,e){var r=O5(t);t.l+=16;var n=fQ(t,e-24);return[r,n]}function bJ(t){var e=xt(24),r=Gi(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(n[i],16));return ma([e,hQ(t[1])])}function _J(t,e){t.read_shift(2);var r=O5(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(No,""),[r,n]}function kJ(t){var e=t[1].Tooltip,r=xt(10+2*(e.length+1));r.write_shift(2,2048);var n=Gi(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var i=0;i<e.length;++i)r.write_shift(2,e.charCodeAt(i));return r.write_shift(2,0),r}function EJ(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=z9[r]||r,r=t.read_shift(2),e[1]=z9[r]||r,e}function SJ(t){return t||(t=xt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function CJ(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(MR(t));return r}function TJ(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(MR(t));return r}function NJ(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function HR(t,e,r){if(!r.cellStyles)return go(t,e);var n=r&&r.biff>=12?4:2,i=t.read_shift(n),s=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var c={s:i,e:s,w:a,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function AJ(t,e){var r=xt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function IJ(t,e){var r={};return e<32||(t.l+=16,r.header=fo(t),r.footer=fo(t),t.l+=2),r}function PJ(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var i=t.read_shift(1);return t.l+=3,i&16&&(n.area=!0),n}function RJ(t){for(var e=xt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var FJ=xu,LJ=LR,jJ=Xg;function DJ(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,i}function OJ(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=xu(t);++t.l;var i=vh(t,e-7,r);return n.t="str",n.val=i,n}function MJ(t){var e=xu(t);++t.l;var r=fo(t);return e.t="n",e.val=r,e}function BJ(t,e,r){var n=xt(15);return Zg(n,t,e),n.write_shift(8,r,"f"),n}function VJ(t){var e=xu(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function UJ(t,e,r){var n=xt(9);return Zg(n,t,e),n.write_shift(2,r),n}function zJ(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function $J(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function HJ(t,e,r){var n=t.l+e,i=xu(t),s=t.read_shift(2),a=Jf(t,s,r);return t.l=n,i.t="str",i.val=a,i}var qJ=[2,3,48,49,131,139,140,245],lw=(function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=L5({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],d=E0(1);switch(l.type){case"base64":d=fl(yl(o));break;case"binary":d=fl(o);break;case"buffer":case"array":d=o;break}Fa(d,0);var p=d.read_shift(1),g=!!(p&136),m=!1,w=!1;switch(p){case 2:break;case 3:break;case 48:m=!0,g=!0;break;case 49:m=!0,g=!0;break;case 131:break;case 139:break;case 140:w=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+p.toString(16))}var y=0,k=521;p==2&&(y=d.read_shift(2)),d.l+=3,p!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),p!=2&&(k=d.read_shift(2));var T=d.read_shift(2),O=l.codepage||1252;p!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(O=t[d[d.l]]),d.l+=1,d.l+=2),w&&(d.l+=36);for(var P=[],V={},Y=Math.min(d.length,p==2?521:k-10-(m?264:0)),G=w?32:11;d.l<Y&&d[d.l]!=13;)switch(V={},V.name=ig.utils.decode(O,d.slice(d.l,d.l+G)).replace(/[\u0000\r\n].*$/g,""),d.l+=G,V.type=String.fromCharCode(d.read_shift(1)),p!=2&&!w&&(V.offset=d.read_shift(4)),V.len=d.read_shift(1),p==2&&(V.offset=d.read_shift(2)),V.dec=d.read_shift(1),V.name.length&&P.push(V),p!=2&&(d.l+=w?13:14),V.type){case"B":(!m||V.len!=8)&&l.WTF&&console.log("Skipping "+V.name+":"+V.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+V.name+":"+V.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+V.type)}if(d[d.l]!==13&&(d.l=k-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=k;var L=0,N=0;for(c[0]=[],N=0;N!=P.length;++N)c[0][N]=P[N].name;for(;y-- >0;){if(d[d.l]===42){d.l+=T;continue}for(++d.l,c[++L]=[],N=0,N=0;N!=P.length;++N){var C=d.slice(d.l,d.l+P[N].len);d.l+=P[N].len,Fa(C,0);var R=ig.utils.decode(O,C);switch(P[N].type){case"C":R.trim().length&&(c[L][N]=R.replace(/\s+$/,""));break;case"D":R.length===8?c[L][N]=new Date(+R.slice(0,4),+R.slice(4,6)-1,+R.slice(6,8)):c[L][N]=R;break;case"F":c[L][N]=parseFloat(R.trim());break;case"+":case"I":c[L][N]=w?C.read_shift(-4,"i")^2147483648:C.read_shift(4,"i");break;case"L":switch(R.trim().toUpperCase()){case"Y":case"T":c[L][N]=!0;break;case"N":case"F":c[L][N]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+R+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+p.toString(16));c[L][N]="##MEMO##"+(w?parseInt(R.trim(),10):C.read_shift(4));break;case"N":R=R.replace(/\u0000/g,"").trim(),R&&R!="."&&(c[L][N]=+R||0);break;case"@":c[L][N]=new Date(C.read_shift(-8,"f")-621356832e5);break;case"T":c[L][N]=new Date((C.read_shift(4)-2440588)*864e5+C.read_shift(4));break;case"Y":c[L][N]=C.read_shift(4,"i")/1e4+C.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[L][N]=-C.read_shift(-8,"f");break;case"B":if(m&&P[N].len==8){c[L][N]=C.read_shift(8,"f");break}case"G":case"P":C.l+=P[N].len;break;case"0":if(P[N].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+P[N].type)}}}if(p!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=P,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var d=gp(r(o,c),c);return d["!cols"]=c.DBF.map(function(p){return{wch:p.len,DBF:p}}),delete c.DBF,d}function i(o,l){try{return V0(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var c=l||{};if(+c.codepage>=0&&yc(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var d=qo(),p=Bv(o,{header:1,raw:!0,cellDates:!0}),g=p[0],m=p.slice(1),w=o["!cols"]||[],y=0,k=0,T=0,O=1;for(y=0;y<g.length;++y){if(((w[y]||{}).DBF||{}).name){g[y]=w[y].DBF.name,++T;continue}if(g[y]!=null){if(++T,typeof g[y]=="number"&&(g[y]=g[y].toString(10)),typeof g[y]!="string")throw new Error("DBF Invalid column name "+g[y]+" |"+typeof g[y]+"|");if(g.indexOf(g[y])!==y){for(k=0;k<1024;++k)if(g.indexOf(g[y]+"_"+k)==-1){g[y]+="_"+k;break}}}}var P=Sn(o["!ref"]),V=[],Y=[],G=[];for(y=0;y<=P.e.c-P.s.c;++y){var L="",N="",C=0,R=[];for(k=0;k<m.length;++k)m[k][y]!=null&&R.push(m[k][y]);if(R.length==0||g[y]==null){V[y]="?";continue}for(k=0;k<R.length;++k){switch(typeof R[k]){case"number":N="B";break;case"string":N="C";break;case"boolean":N="L";break;case"object":N=R[k]instanceof Date?"D":"C";break;default:N="C"}C=Math.max(C,String(R[k]).length),L=L&&L!=N?"C":N}C>250&&(C=250),N=((w[y]||{}).DBF||{}).type,N=="C"&&w[y].DBF.len>C&&(C=w[y].DBF.len),L=="B"&&N=="N"&&(L="N",G[y]=w[y].DBF.dec,C=w[y].DBF.len),Y[y]=L=="C"||N=="N"?C:s[L]||0,O+=Y[y],V[y]=L}var A=d.next(32);for(A.write_shift(4,318902576),A.write_shift(4,m.length),A.write_shift(2,296+32*T),A.write_shift(2,O),y=0;y<4;++y)A.write_shift(4,0);for(A.write_shift(4,0|(+e[FP]||3)<<8),y=0,k=0;y<g.length;++y)if(g[y]!=null){var F=d.next(32),B=(g[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);F.write_shift(1,B,"sbcs"),F.write_shift(1,V[y]=="?"?"C":V[y],"sbcs"),F.write_shift(4,k),F.write_shift(1,Y[y]||s[V[y]]||0),F.write_shift(1,G[y]||0),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(1,0),F.write_shift(4,0),F.write_shift(4,0),k+=Y[y]||s[V[y]]||0}var te=d.next(264);for(te.write_shift(4,13),y=0;y<65;++y)te.write_shift(4,0);for(y=0;y<m.length;++y){var pe=d.next(O);for(pe.write_shift(1,0),k=0;k<g.length;++k)if(g[k]!=null)switch(V[k]){case"L":pe.write_shift(1,m[y][k]==null?63:m[y][k]?84:70);break;case"B":pe.write_shift(8,m[y][k]||0,"f");break;case"N":var Ee="0";for(typeof m[y][k]=="number"&&(Ee=m[y][k].toFixed(G[k]||0)),T=0;T<Y[k]-Ee.length;++T)pe.write_shift(1,32);pe.write_shift(1,Ee,"sbcs");break;case"D":m[y][k]?(pe.write_shift(4,("0000"+m[y][k].getFullYear()).slice(-4),"sbcs"),pe.write_shift(2,("00"+(m[y][k].getMonth()+1)).slice(-2),"sbcs"),pe.write_shift(2,("00"+m[y][k].getDate()).slice(-2),"sbcs")):pe.write_shift(8,"00000000","sbcs");break;case"C":var ve=String(m[y][k]!=null?m[y][k]:"").slice(0,Y[k]);for(pe.write_shift(1,ve,"sbcs"),T=0;T<Y[k]-ve.length;++T)pe.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:i,to_sheet:n,from_sheet:a}})(),qR=(function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+cs(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(g,m){var w=t[m];return typeof w=="number"?m9(w):w},n=function(g,m,w){var y=m.charCodeAt(0)-32<<4|w.charCodeAt(0)-48;return y==59?g:m9(y)};t["|"]=254;function i(g,m){switch(m.type){case"base64":return s(yl(g),m);case"binary":return s(g,m);case"buffer":return s(en&&Buffer.isBuffer(g)?g.toString("binary"):B0(g),m);case"array":return s(Yf(g),m)}throw new Error("Unrecognized type "+m.type)}function s(g,m){var w=g.split(/[\n\r]+/),y=-1,k=-1,T=0,O=0,P=[],V=[],Y=null,G={},L=[],N=[],C=[],R=0,A;for(+m.codepage>=0&&yc(+m.codepage);T!==w.length;++T){R=0;var F=w[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),B=F.replace(/;;/g,"\0").split(";").map(function(J){return J.replace(/\u0000/g,";")}),te=B[0],pe;if(F.length>0)switch(te){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":B[1].charAt(0)=="P"&&V.push(F.slice(3).replace(/;;/g,";"));break;case"C":var Ee=!1,ve=!1,re=!1,W=!1,ne=-1,Q=-1;for(O=1;O<B.length;++O)switch(B[O].charAt(0)){case"A":break;case"X":k=parseInt(B[O].slice(1))-1,ve=!0;break;case"Y":for(y=parseInt(B[O].slice(1))-1,ve||(k=0),A=P.length;A<=y;++A)P[A]=[];break;case"K":pe=B[O].slice(1),pe.charAt(0)==='"'?pe=pe.slice(1,pe.length-1):pe==="TRUE"?pe=!0:pe==="FALSE"?pe=!1:isNaN(Ec(pe))?isNaN(K1(pe).getDate())||(pe=Ei(pe)):(pe=Ec(pe),Y!==null&&pp(Y)&&(pe=D5(pe))),Ee=!0;break;case"E":W=!0;var I=_1(B[O].slice(1),{r:y,c:k});P[y][k]=[P[y][k],I];break;case"S":re=!0,P[y][k]=[P[y][k],"S5S"];break;case"G":break;case"R":ne=parseInt(B[O].slice(1))-1;break;case"C":Q=parseInt(B[O].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+F)}if(Ee&&(P[y][k]&&P[y][k].length==2?P[y][k][0]=pe:P[y][k]=pe,Y=null),re){if(W)throw new Error("SYLK shared formula cannot have own formula");var H=ne>-1&&P[ne][Q];if(!H||!H[1])throw new Error("SYLK shared formula cannot find base");P[y][k][1]=cF(H[1],{r:y-ne,c:k-Q})}break;case"F":var X=0;for(O=1;O<B.length;++O)switch(B[O].charAt(0)){case"X":k=parseInt(B[O].slice(1))-1,++X;break;case"Y":for(y=parseInt(B[O].slice(1))-1,A=P.length;A<=y;++A)P[A]=[];break;case"M":R=parseInt(B[O].slice(1))/20;break;case"F":break;case"G":break;case"P":Y=V[parseInt(B[O].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(C=B[O].slice(1).split(" "),A=parseInt(C[0],10);A<=parseInt(C[1],10);++A)R=parseInt(C[2],10),N[A-1]=R===0?{hidden:!0}:{wch:R},S0(N[A-1]);break;case"C":k=parseInt(B[O].slice(1))-1,N[k]||(N[k]={});break;case"R":y=parseInt(B[O].slice(1))-1,L[y]||(L[y]={}),R>0?(L[y].hpt=R,L[y].hpx=Y1(R)):R===0&&(L[y].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+F)}X<1&&(Y=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+F)}}return L.length>0&&(G["!rows"]=L),N.length>0&&(G["!cols"]=N),m&&m.sheetRows&&(P=P.slice(0,m.sheetRows)),[P,G]}function a(g,m){var w=i(g,m),y=w[0],k=w[1],T=gp(y,m);return cs(k).forEach(function(O){T[O]=k[O]}),T}function o(g,m){return V0(a(g,m),m)}function l(g,m,w,y){var k="C;Y"+(w+1)+";X"+(y+1)+";K";switch(g.t){case"n":k+=g.v||0,g.f&&!g.F&&(k+=";E"+Kb(g.f,{r:w,c:y}));break;case"b":k+=g.v?"TRUE":"FALSE";break;case"e":k+=g.w||g.v;break;case"d":k+='"'+(g.w||g.v)+'"';break;case"s":k+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return k}function c(g,m){m.forEach(function(w,y){var k="F;W"+(y+1)+" "+(y+1)+" ";w.hidden?k+="0":(typeof w.width=="number"&&!w.wpx&&(w.wpx=fg(w.width)),typeof w.wpx=="number"&&!w.wch&&(w.wch=hg(w.wpx)),typeof w.wch=="number"&&(k+=Math.round(w.wch))),k.charAt(k.length-1)!=" "&&g.push(k)})}function d(g,m){m.forEach(function(w,y){var k="F;";w.hidden?k+="M0;":w.hpt?k+="M"+20*w.hpt+";":w.hpx&&(k+="M"+20*pg(w.hpx)+";"),k.length>2&&g.push(k+"R"+(y+1))})}function p(g,m){var w=["ID;PWXL;N;E"],y=[],k=Sn(g["!ref"]),T,O=Array.isArray(g),P=`\r
`;w.push("P;PGeneral"),w.push("F;P0;DG0G8;M255"),g["!cols"]&&c(w,g["!cols"]),g["!rows"]&&d(w,g["!rows"]),w.push("B;Y"+(k.e.r-k.s.r+1)+";X"+(k.e.c-k.s.c+1)+";D"+[k.s.c,k.s.r,k.e.c,k.e.r].join(" "));for(var V=k.s.r;V<=k.e.r;++V)for(var Y=k.s.c;Y<=k.e.c;++Y){var G=Rr({r:V,c:Y});T=O?(g[V]||[])[Y]:g[G],!(!T||T.v==null&&(!T.f||T.F))&&y.push(l(T,g,V,Y))}return w.join(P)+P+y.join(P)+P+"E"+P}return{to_workbook:o,to_sheet:a,from_sheet:p}})(),WR=(function(){function t(s,a){switch(a.type){case"base64":return e(yl(s),a);case"binary":return e(s,a);case"buffer":return e(en&&Buffer.isBuffer(s)?s.toString("binary"):B0(s),a);case"array":return e(Yf(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),l=-1,c=-1,d=0,p=[];d!==o.length;++d){if(o[d].trim()==="BOT"){p[++l]=[],c=0;continue}if(!(l<0)){var g=o[d].trim().split(","),m=g[0],w=g[1];++d;for(var y=o[d]||"";(y.match(/["]/g)||[]).length&1&&d<o.length-1;)y+=`
`+o[++d];switch(y=y.trim(),+m){case-1:if(y==="BOT"){p[++l]=[],c=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?p[l][c]=!0:y==="FALSE"?p[l][c]=!1:isNaN(Ec(w))?isNaN(K1(w).getDate())?p[l][c]=w:p[l][c]=Ei(w):p[l][c]=Ec(w),++c;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),p[l][c++]=y!==""?y:null;break}if(y==="EOD")break}}return a&&a.sheetRows&&(p=p.slice(0,a.sheetRows)),p}function r(s,a){return gp(t(s,a),a)}function n(s,a){return V0(r(s,a),a)}var i=(function(){var s=function(l,c,d,p,g){l.push(c),l.push(d+","+p),l.push('"'+g.replace(/"/g,'""')+'"')},a=function(l,c,d,p){l.push(c+","+d),l.push(c==1?'"'+p.replace(/"/g,'""')+'"':p)};return function(l){var c=[],d=Sn(l["!ref"]),p,g=Array.isArray(l);s(c,"TABLE",0,1,"sheetjs"),s(c,"VECTORS",0,d.e.r-d.s.r+1,""),s(c,"TUPLES",0,d.e.c-d.s.c+1,""),s(c,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){a(c,-1,0,"BOT");for(var w=d.s.c;w<=d.e.c;++w){var y=Rr({r:m,c:w});if(p=g?(l[m]||[])[w]:l[y],!p){a(c,1,0,"");continue}switch(p.t){case"n":var k=p.w;!k&&p.v!=null&&(k=p.v),k==null?p.f&&!p.F?a(c,1,0,"="+p.f):a(c,1,0,""):a(c,0,k,"V");break;case"b":a(c,0,p.v?1:0,p.v?"TRUE":"FALSE");break;case"s":a(c,1,0,isNaN(p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=Gl(p.z||Ar[14],ea(Ei(p.v)))),a(c,0,p.w,"V");break;default:a(c,1,0,"")}}}a(c,-1,0,"EOD");var T=`\r
`,O=c.join(T);return O}})();return{to_workbook:n,to_sheet:r,from_sheet:i}})(),GR=(function(){function t(p){return p.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(p){return p.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(p,g){for(var m=p.split(`
`),w=-1,y=-1,k=0,T=[];k!==m.length;++k){var O=m[k].trim().split(":");if(O[0]==="cell"){var P=Gi(O[1]);if(T.length<=P.r)for(w=T.length;w<=P.r;++w)T[w]||(T[w]=[]);switch(w=P.r,y=P.c,O[2]){case"t":T[w][y]=t(O[3]);break;case"v":T[w][y]=+O[3];break;case"vtf":var V=O[O.length-1];case"vtc":switch(O[3]){case"nl":T[w][y]=!!+O[4];break;default:T[w][y]=+O[4];break}O[2]=="vtf"&&(T[w][y]=[T[w][y],V])}}}return g&&g.sheetRows&&(T=T.slice(0,g.sheetRows)),T}function n(p,g){return gp(r(p,g),g)}function i(p,g){return V0(n(p,g),g)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(p){if(!p||!p["!ref"])return"";for(var g=[],m=[],w,y="",k=Wo(p["!ref"]),T=Array.isArray(p),O=k.s.r;O<=k.e.r;++O)for(var P=k.s.c;P<=k.e.c;++P)if(y=Rr({r:O,c:P}),w=T?(p[O]||[])[P]:p[y],!(!w||w.v==null||w.t==="z")){switch(m=["cell",y,"t"],w.t){case"s":case"str":m.push(e(w.v));break;case"n":w.f?(m[2]="vtf",m[3]="n",m[4]=w.v,m[5]=e(w.f)):(m[2]="v",m[3]=w.v);break;case"b":m[2]="vt"+(w.f?"f":"c"),m[3]="nl",m[4]=w.v?"1":"0",m[5]=e(w.f||(w.v?"TRUE":"FALSE"));break;case"d":var V=ea(Ei(w.v));m[2]="vtc",m[3]="nd",m[4]=""+V,m[5]=w.w||Gl(w.z||Ar[14],V);break;case"e":continue}g.push(m.join(":"))}return g.push("sheet:c:"+(k.e.c-k.s.c+1)+":r:"+(k.e.r-k.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function d(p){return[s,a,o,a,c(p),l].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:d}})(),X1=(function(){function t(d,p,g,m,w){w.raw?p[g][m]=d:d===""||(d==="TRUE"?p[g][m]=!0:d==="FALSE"?p[g][m]=!1:isNaN(Ec(d))?isNaN(K1(d).getDate())?p[g][m]=d:p[g][m]=Ei(d):p[g][m]=Ec(d))}function e(d,p){var g=p||{},m=[];if(!d||d.length===0)return m;for(var w=d.split(/[\r\n]/),y=w.length-1;y>=0&&w[y].length===0;)--y;for(var k=10,T=0,O=0;O<=y;++O)T=w[O].indexOf(" "),T==-1?T=w[O].length:T++,k=Math.max(k,T);for(O=0;O<=y;++O){m[O]=[];var P=0;for(t(w[O].slice(0,k).trim(),m,O,P,g),P=1;P<=(w[O].length-k)/10+1;++P)t(w[O].slice(k+(P-1)*10,k+P*10).trim(),m,O,P,g)}return g.sheetRows&&(m=m.slice(0,g.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(d){for(var p={},g=!1,m=0,w=0;m<d.length;++m)(w=d.charCodeAt(m))==34?g=!g:!g&&w in r&&(p[w]=(p[w]||0)+1);w=[];for(m in p)Object.prototype.hasOwnProperty.call(p,m)&&w.push([p[m],m]);if(!w.length){p=n;for(m in p)Object.prototype.hasOwnProperty.call(p,m)&&w.push([p[m],m])}return w.sort(function(y,k){return y[0]-k[0]||n[y[1]]-n[k[1]]}),r[w.pop()[1]]||44}function s(d,p){var g=p||{},m="",w=g.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=i(d.slice(0,1024)):g&&g.FS?m=g.FS:m=i(d.slice(0,1024));var k=0,T=0,O=0,P=0,V=0,Y=m.charCodeAt(0),G=!1,L=0,N=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var C=g.dateNF!=null?PX(g.dateNF):null;function R(){var A=d.slice(P,V),F={};if(A.charAt(0)=='"'&&A.charAt(A.length-1)=='"'&&(A=A.slice(1,-1).replace(/""/g,'"')),A.length===0)F.t="z";else if(g.raw)F.t="s",F.v=A;else if(A.trim().length===0)F.t="s",F.v=A;else if(A.charCodeAt(0)==61)A.charCodeAt(1)==34&&A.charCodeAt(A.length-1)==34?(F.t="s",F.v=A.slice(2,-1).replace(/""/g,'"')):ate(A)?(F.t="n",F.f=A.slice(1)):(F.t="s",F.v=A);else if(A=="TRUE")F.t="b",F.v=!0;else if(A=="FALSE")F.t="b",F.v=!1;else if(!isNaN(O=Ec(A)))F.t="n",g.cellText!==!1&&(F.w=A),F.v=O;else if(!isNaN(K1(A).getDate())||C&&A.match(C)){F.z=g.dateNF||Ar[14];var B=0;C&&A.match(C)&&(A=RX(A,g.dateNF,A.match(C)||[]),B=1),g.cellDates?(F.t="d",F.v=Ei(A,B)):(F.t="n",F.v=ea(Ei(A,B))),g.cellText!==!1&&(F.w=Gl(F.z,F.v instanceof Date?ea(F.v):F.v)),g.cellNF||delete F.z}else F.t="s",F.v=A;if(F.t=="z"||(g.dense?(w[k]||(w[k]=[]),w[k][T]=F):w[Rr({c:T,r:k})]=F),P=V+1,N=d.charCodeAt(P),y.e.c<T&&(y.e.c=T),y.e.r<k&&(y.e.r=k),L==Y)++T;else if(T=0,++k,g.sheetRows&&g.sheetRows<=k)return!0}e:for(;V<d.length;++V)switch(L=d.charCodeAt(V)){case 34:N===34&&(G=!G);break;case Y:case 10:case 13:if(!G&&R())break e;break}return V-P>0&&R(),w["!ref"]=Hr(y),w}function a(d,p){return!(p&&p.PRN)||p.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,p):gp(e(d,p),p)}function o(d,p){var g="",m=p.type=="string"?[0,0,0,0]:r_(d,p);switch(p.type){case"base64":g=yl(d);break;case"binary":g=d;break;case"buffer":p.codepage==65001?g=d.toString("utf8"):p.codepage&&typeof ig<"u"||(g=en&&Buffer.isBuffer(d)?d.toString("binary"):B0(d));break;case"array":g=Yf(d);break;case"string":g=d;break;default:throw new Error("Unrecognized type "+p.type)}return m[0]==239&&m[1]==187&&m[2]==191?g=ni(g.slice(3)):p.type!="string"&&p.type!="buffer"&&p.codepage==65001?g=ni(g):p.type=="binary"&&typeof ig<"u",g.slice(0,19)=="socialcalc:version:"?GR.to_sheet(p.type=="string"?g:ni(g),p):a(g,p)}function l(d,p){return V0(o(d,p),p)}function c(d){for(var p=[],g=Sn(d["!ref"]),m,w=Array.isArray(d),y=g.s.r;y<=g.e.r;++y){for(var k=[],T=g.s.c;T<=g.e.c;++T){var O=Rr({r:y,c:T});if(m=w?(d[y]||[])[T]:d[O],!m||m.v==null){k.push("          ");continue}for(var P=(m.w||(sd(m),m.w)||"").slice(0,10);P.length<10;)P+=" ";k.push(P+(T===0?" ":""))}p.push(k.join(""))}return p.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}})();function WJ(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var i=qR.to_workbook(t,r);return r.WTF=n,i}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return X1.to_workbook(t,e)}}var Rf=(function(){function t(I,H,X){if(I){Fa(I,I.l||0);for(var J=X.Enum||ne;I.l<I.length;){var ue=I.read_shift(2),we=J[ue]||J[65535],fe=I.read_shift(2),me=I.l+fe,be=we.f&&we.f(I,fe,X);if(I.l=me,H(be,we,ue))return}}}function e(I,H){switch(H.type){case"base64":return r(fl(yl(I)),H);case"binary":return r(fl(I),H);case"buffer":case"array":return r(I,H)}throw"Unsupported type "+H.type}function r(I,H){if(!I)return I;var X=H||{},J=X.dense?[]:{},ue="Sheet1",we="",fe=0,me={},be=[],Le=[],ee={s:{r:0,c:0},e:{r:0,c:0}},Be=X.sheetRows||0;if(I[2]==0&&(I[3]==8||I[3]==9)&&I.length>=16&&I[14]==5&&I[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(I[2]==2)X.Enum=ne,t(I,function(qe,it,oe){switch(oe){case 0:X.vers=qe,qe>=4096&&(X.qpro=!0);break;case 6:ee=qe;break;case 204:qe&&(we=qe);break;case 222:we=qe;break;case 15:case 51:X.qpro||(qe[1].v=qe[1].v.slice(1));case 13:case 14:case 16:oe==14&&(qe[2]&112)==112&&(qe[2]&15)>1&&(qe[2]&15)<15&&(qe[1].z=X.dateNF||Ar[14],X.cellDates&&(qe[1].t="d",qe[1].v=D5(qe[1].v))),X.qpro&&qe[3]>fe&&(J["!ref"]=Hr(ee),me[ue]=J,be.push(ue),J=X.dense?[]:{},ee={s:{r:0,c:0},e:{r:0,c:0}},fe=qe[3],ue=we||"Sheet"+(fe+1),we="");var je=X.dense?(J[qe[0].r]||[])[qe[0].c]:J[Rr(qe[0])];if(je){je.t=qe[1].t,je.v=qe[1].v,qe[1].z!=null&&(je.z=qe[1].z),qe[1].f!=null&&(je.f=qe[1].f);break}X.dense?(J[qe[0].r]||(J[qe[0].r]=[]),J[qe[0].r][qe[0].c]=qe[1]):J[Rr(qe[0])]=qe[1];break}},X);else if(I[2]==26||I[2]==14)X.Enum=Q,I[2]==14&&(X.qpro=!0,I.l=0),t(I,function(qe,it,oe){switch(oe){case 204:ue=qe;break;case 22:qe[1].v=qe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(qe[3]>fe&&(J["!ref"]=Hr(ee),me[ue]=J,be.push(ue),J=X.dense?[]:{},ee={s:{r:0,c:0},e:{r:0,c:0}},fe=qe[3],ue="Sheet"+(fe+1)),Be>0&&qe[0].r>=Be)break;X.dense?(J[qe[0].r]||(J[qe[0].r]=[]),J[qe[0].r][qe[0].c]=qe[1]):J[Rr(qe[0])]=qe[1],ee.e.c<qe[0].c&&(ee.e.c=qe[0].c),ee.e.r<qe[0].r&&(ee.e.r=qe[0].r);break;case 27:qe[14e3]&&(Le[qe[14e3][0]]=qe[14e3][1]);break;case 1537:Le[qe[0]]=qe[1],qe[0]==fe&&(ue=qe[1]);break}},X);else throw new Error("Unrecognized LOTUS BOF "+I[2]);if(J["!ref"]=Hr(ee),me[we||ue]=J,be.push(we||ue),!Le.length)return{SheetNames:be,Sheets:me};for(var Re={},ae=[],$e=0;$e<Le.length;++$e)me[be[$e]]?(ae.push(Le[$e]||be[$e]),Re[Le[$e]]=me[Le[$e]]||me[be[$e]]):(ae.push(Le[$e]),Re[Le[$e]]={"!ref":"A1"});return{SheetNames:ae,Sheets:Re}}function n(I,H){var X=H||{};if(+X.codepage>=0&&yc(+X.codepage),X.type=="string")throw new Error("Cannot write WK1 to JS string");var J=qo(),ue=Sn(I["!ref"]),we=Array.isArray(I),fe=[];$t(J,0,s(1030)),$t(J,6,l(ue));for(var me=Math.min(ue.e.r,8191),be=ue.s.r;be<=me;++be)for(var Le=Cs(be),ee=ue.s.c;ee<=ue.e.c;++ee){be===ue.s.r&&(fe[ee]=Wi(ee));var Be=fe[ee]+Le,Re=we?(I[be]||[])[ee]:I[Be];if(!(!Re||Re.t=="z"))if(Re.t=="n")(Re.v|0)==Re.v&&Re.v>=-32768&&Re.v<=32767?$t(J,13,m(be,ee,Re.v)):$t(J,14,y(be,ee,Re.v));else{var ae=sd(Re);$t(J,15,p(be,ee,ae.slice(0,239)))}}return $t(J,1),J.end()}function i(I,H){var X=H||{};if(+X.codepage>=0&&yc(+X.codepage),X.type=="string")throw new Error("Cannot write WK3 to JS string");var J=qo();$t(J,0,a(I));for(var ue=0,we=0;ue<I.SheetNames.length;++ue)(I.Sheets[I.SheetNames[ue]]||{})["!ref"]&&$t(J,27,W(I.SheetNames[ue],we++));var fe=0;for(ue=0;ue<I.SheetNames.length;++ue){var me=I.Sheets[I.SheetNames[ue]];if(!(!me||!me["!ref"])){for(var be=Sn(me["!ref"]),Le=Array.isArray(me),ee=[],Be=Math.min(be.e.r,8191),Re=be.s.r;Re<=Be;++Re)for(var ae=Cs(Re),$e=be.s.c;$e<=be.e.c;++$e){Re===be.s.r&&(ee[$e]=Wi($e));var qe=ee[$e]+ae,it=Le?(me[Re]||[])[$e]:me[qe];if(!(!it||it.t=="z"))if(it.t=="n")$t(J,23,R(Re,$e,fe,it.v));else{var oe=sd(it);$t(J,22,L(Re,$e,fe,oe.slice(0,239)))}}++fe}}return $t(J,1),J.end()}function s(I){var H=xt(2);return H.write_shift(2,I),H}function a(I){var H=xt(26);H.write_shift(2,4096),H.write_shift(2,4),H.write_shift(4,0);for(var X=0,J=0,ue=0,we=0;we<I.SheetNames.length;++we){var fe=I.SheetNames[we],me=I.Sheets[fe];if(!(!me||!me["!ref"])){++ue;var be=Wo(me["!ref"]);X<be.e.r&&(X=be.e.r),J<be.e.c&&(J=be.e.c)}}return X>8191&&(X=8191),H.write_shift(2,X),H.write_shift(1,ue),H.write_shift(1,J),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(1,1),H.write_shift(1,2),H.write_shift(4,0),H.write_shift(4,0),H}function o(I,H,X){var J={s:{c:0,r:0},e:{c:0,r:0}};return H==8&&X.qpro?(J.s.c=I.read_shift(1),I.l++,J.s.r=I.read_shift(2),J.e.c=I.read_shift(1),I.l++,J.e.r=I.read_shift(2),J):(J.s.c=I.read_shift(2),J.s.r=I.read_shift(2),H==12&&X.qpro&&(I.l+=2),J.e.c=I.read_shift(2),J.e.r=I.read_shift(2),H==12&&X.qpro&&(I.l+=2),J.s.c==65535&&(J.s.c=J.e.c=J.s.r=J.e.r=0),J)}function l(I){var H=xt(8);return H.write_shift(2,I.s.c),H.write_shift(2,I.s.r),H.write_shift(2,I.e.c),H.write_shift(2,I.e.r),H}function c(I,H,X){var J=[{c:0,r:0},{t:"n",v:0},0,0];return X.qpro&&X.vers!=20768?(J[0].c=I.read_shift(1),J[3]=I.read_shift(1),J[0].r=I.read_shift(2),I.l+=2):(J[2]=I.read_shift(1),J[0].c=I.read_shift(2),J[0].r=I.read_shift(2)),J}function d(I,H,X){var J=I.l+H,ue=c(I,H,X);if(ue[1].t="s",X.vers==20768){I.l++;var we=I.read_shift(1);return ue[1].v=I.read_shift(we,"utf8"),ue}return X.qpro&&I.l++,ue[1].v=I.read_shift(J-I.l,"cstr"),ue}function p(I,H,X){var J=xt(7+X.length);J.write_shift(1,255),J.write_shift(2,H),J.write_shift(2,I),J.write_shift(1,39);for(var ue=0;ue<J.length;++ue){var we=X.charCodeAt(ue);J.write_shift(1,we>=128?95:we)}return J.write_shift(1,0),J}function g(I,H,X){var J=c(I,H,X);return J[1].v=I.read_shift(2,"i"),J}function m(I,H,X){var J=xt(7);return J.write_shift(1,255),J.write_shift(2,H),J.write_shift(2,I),J.write_shift(2,X,"i"),J}function w(I,H,X){var J=c(I,H,X);return J[1].v=I.read_shift(8,"f"),J}function y(I,H,X){var J=xt(13);return J.write_shift(1,255),J.write_shift(2,H),J.write_shift(2,I),J.write_shift(8,X,"f"),J}function k(I,H,X){var J=I.l+H,ue=c(I,H,X);if(ue[1].v=I.read_shift(8,"f"),X.qpro)I.l=J;else{var we=I.read_shift(2);V(I.slice(I.l,I.l+we),ue),I.l+=we}return ue}function T(I,H,X){var J=H&32768;return H&=-32769,H=(J?I:0)+(H>=8192?H-16384:H),(J?"":"$")+(X?Wi(H):Cs(H))}var O={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},P=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function V(I,H){Fa(I,0);for(var X=[],J=0,ue="",we="",fe="",me="";I.l<I.length;){var be=I[I.l++];switch(be){case 0:X.push(I.read_shift(8,"f"));break;case 1:we=T(H[0].c,I.read_shift(2),!0),ue=T(H[0].r,I.read_shift(2),!1),X.push(we+ue);break;case 2:{var Le=T(H[0].c,I.read_shift(2),!0),ee=T(H[0].r,I.read_shift(2),!1);we=T(H[0].c,I.read_shift(2),!0),ue=T(H[0].r,I.read_shift(2),!1),X.push(Le+ee+":"+we+ue)}break;case 3:if(I.l<I.length){console.error("WK1 premature formula end");return}break;case 4:X.push("("+X.pop()+")");break;case 5:X.push(I.read_shift(2));break;case 6:{for(var Be="";be=I[I.l++];)Be+=String.fromCharCode(be);X.push('"'+Be.replace(/"/g,'""')+'"')}break;case 8:X.push("-"+X.pop());break;case 23:X.push("+"+X.pop());break;case 22:X.push("NOT("+X.pop()+")");break;case 20:case 21:me=X.pop(),fe=X.pop(),X.push(["AND","OR"][be-20]+"("+fe+","+me+")");break;default:if(be<32&&P[be])me=X.pop(),fe=X.pop(),X.push(fe+P[be]+me);else if(O[be]){if(J=O[be][1],J==69&&(J=I[I.l++]),J>X.length){console.error("WK1 bad formula parse 0x"+be.toString(16)+":|"+X.join("|")+"|");return}var Re=X.slice(-J);X.length-=J,X.push(O[be][0]+"("+Re.join(",")+")")}else return be<=7?console.error("WK1 invalid opcode "+be.toString(16)):be<=24?console.error("WK1 unsupported op "+be.toString(16)):be<=30?console.error("WK1 invalid opcode "+be.toString(16)):be<=115?console.error("WK1 unsupported function opcode "+be.toString(16)):console.error("WK1 unrecognized opcode "+be.toString(16))}}X.length==1?H[1].f=""+X[0]:console.error("WK1 bad formula parse |"+X.join("|")+"|")}function Y(I){var H=[{c:0,r:0},{t:"n",v:0},0];return H[0].r=I.read_shift(2),H[3]=I[I.l++],H[0].c=I[I.l++],H}function G(I,H){var X=Y(I);return X[1].t="s",X[1].v=I.read_shift(H-4,"cstr"),X}function L(I,H,X,J){var ue=xt(6+J.length);ue.write_shift(2,I),ue.write_shift(1,X),ue.write_shift(1,H),ue.write_shift(1,39);for(var we=0;we<J.length;++we){var fe=J.charCodeAt(we);ue.write_shift(1,fe>=128?95:fe)}return ue.write_shift(1,0),ue}function N(I,H){var X=Y(I);X[1].v=I.read_shift(2);var J=X[1].v>>1;if(X[1].v&1)switch(J&7){case 0:J=(J>>3)*5e3;break;case 1:J=(J>>3)*500;break;case 2:J=(J>>3)/20;break;case 3:J=(J>>3)/200;break;case 4:J=(J>>3)/2e3;break;case 5:J=(J>>3)/2e4;break;case 6:J=(J>>3)/16;break;case 7:J=(J>>3)/64;break}return X[1].v=J,X}function C(I,H){var X=Y(I),J=I.read_shift(4),ue=I.read_shift(4),we=I.read_shift(2);if(we==65535)return J===0&&ue===3221225472?(X[1].t="e",X[1].v=15):J===0&&ue===3489660928?(X[1].t="e",X[1].v=42):X[1].v=0,X;var fe=we&32768;return we=(we&32767)-16446,X[1].v=(1-fe*2)*(ue*Math.pow(2,we+32)+J*Math.pow(2,we)),X}function R(I,H,X,J){var ue=xt(14);if(ue.write_shift(2,I),ue.write_shift(1,X),ue.write_shift(1,H),J==0)return ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(2,65535),ue;var we=0,fe=0,me=0,be=0;return J<0&&(we=1,J=-J),fe=Math.log2(J)|0,J/=Math.pow(2,fe-31),be=J>>>0,(be&2147483648)==0&&(J/=2,++fe,be=J>>>0),J-=be,be|=2147483648,be>>>=0,J*=Math.pow(2,32),me=J>>>0,ue.write_shift(4,me),ue.write_shift(4,be),fe+=16383+(we?32768:0),ue.write_shift(2,fe),ue}function A(I,H){var X=C(I);return I.l+=H-14,X}function F(I,H){var X=Y(I),J=I.read_shift(4);return X[1].v=J>>6,X}function B(I,H){var X=Y(I),J=I.read_shift(8,"f");return X[1].v=J,X}function te(I,H){var X=B(I);return I.l+=H-10,X}function pe(I,H){return I[I.l+H-1]==0?I.read_shift(H,"cstr"):""}function Ee(I,H){var X=I[I.l++];X>H-1&&(X=H-1);for(var J="";J.length<X;)J+=String.fromCharCode(I[I.l++]);return J}function ve(I,H,X){if(!(!X.qpro||H<21)){var J=I.read_shift(1);I.l+=17,I.l+=1,I.l+=2;var ue=I.read_shift(H-21,"cstr");return[J,ue]}}function re(I,H){for(var X={},J=I.l+H;I.l<J;){var ue=I.read_shift(2);if(ue==14e3){for(X[ue]=[0,""],X[ue][0]=I.read_shift(2);I[I.l];)X[ue][1]+=String.fromCharCode(I[I.l]),I.l++;I.l++}}return X}function W(I,H){var X=xt(5+I.length);X.write_shift(2,14e3),X.write_shift(2,H);for(var J=0;J<I.length;++J){var ue=I.charCodeAt(J);X[X.l++]=ue>127?95:ue}return X[X.l++]=0,X}var ne={0:{n:"BOF",f:Os},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:w},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:k},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:pe},222:{n:"SHEETNAMELP",f:Ee},65535:{n:""}},Q={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:G},23:{n:"NUMBER17",f:C},24:{n:"NUMBER18",f:N},25:{n:"FORMULA19",f:A},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:re},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:F},38:{n:"??"},39:{n:"NUMBER27",f:B},40:{n:"FORMULA28",f:te},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:pe},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ve},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:e}})();function GJ(t){var e={},r=t.match(xo),n=0,i=!1;if(r)for(;n!=r.length;++n){var s=Fr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=yb[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s[0].charCodeAt(1)!==47&&!i)throw new Error("Unrecognized rich format "+s[0])}}return e}var KJ=(function(){var t=og("t"),e=og("rPr");function r(s){var a=s.match(t);if(!a)return{t:"s",v:""};var o={t:"s",v:En(a[1])},l=s.match(e);return l&&(o.s=GJ(l[1])),o}var n=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(a){return a.replace(n,"").split(i).map(r).filter(function(o){return o.v})}})(),XJ=(function(){var e=/(\r\n|\n)/g;function r(i,s,a){var o=[];i.u&&o.push("text-decoration: underline;"),i.uval&&o.push("text-underline-style:"+i.uval+";"),i.sz&&o.push("font-size:"+i.sz+"pt;"),i.outline&&o.push("text-effect: outline;"),i.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),i.b&&(s.push("<b>"),a.push("</b>")),i.i&&(s.push("<i>"),a.push("</i>")),i.strike&&(s.push("<s>"),a.push("</s>"));var l=i.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(s.push("<"+l+">"),a.push("</"+l+">")),a.push("</span>"),i}function n(i){var s=[[],i.v,[]];return i.v?(i.s&&r(i.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}})(),YJ=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,QJ=/<(?:\w+:)?r>/,JJ=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function $b(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=En(ni(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=ni(t),r&&(n.h=Ab(n.t))):t.match(QJ)&&(n.r=ni(t),n.t=En(ni((t.replace(JJ,"").match(YJ)||[]).join("").replace(xo,""))),r&&(n.h=XJ(KJ(n.r)))),n):{t:""}}var ZJ=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,eZ=/<(?:\w+:)?(?:si|sstItem)>/g,tZ=/<\/(?:\w+:)?(?:si|sstItem)>/;function rZ(t,e){var r=[],n="";if(!t)return r;var i=t.match(ZJ);if(i){n=i[2].replace(eZ,"").split(tZ);for(var s=0;s!=n.length;++s){var a=$b(n[s].trim(),e);a!=null&&(r[r.length]=a)}i=Fr(i[1]),r.Count=i.count,r.Unique=i.uniqueCount}return r}var nZ=/^\s|\s$|[\t\n\r]/;function KR(t,e){if(!e.bookSST)return"";var r=[Ts];r[r.length]=Vt("sst",null,{xmlns:hh[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var i=t[n],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(nZ)&&(s+=' xml:space="preserve"'),s+=">"+Qn(i.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function iZ(t){return[t.read_shift(4),t.read_shift(4)]}function sZ(t,e){var r=[],n=!1;return pd(t,function(s,a,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(a.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function aZ(t,e){return e||(e=xt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var oZ=xY;function lZ(t){var e=qo();Et(e,159,aZ(t));for(var r=0;r<t.length;++r)Et(e,19,oZ(t[r]));return Et(e,160),e.end()}function XR(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function Ju(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function cZ(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=Ju(t,4),e.U=Ju(t,4),e.W=Ju(t,4),e}function uZ(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},i=t.read_shift(4),s=[];i-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function dZ(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(uZ(t));return e}function fZ(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function hZ(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=Ju(t,4),e.U=Ju(t,4),e.W=Ju(t,4),e}function pZ(t){var e=hZ(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function YR(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var i=!1;switch(n.AlgID){case 26126:case 26127:case 26128:i=n.Flags==36;break;case 26625:i=n.Flags==4;break;case 0:i=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function QR(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function mZ(t){var e=Ju(t);switch(e.Minor){case 2:return[e.Minor,gZ(t)];case 3:return[e.Minor,xZ()];case 4:return[e.Minor,vZ(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function gZ(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=YR(t,r),i=QR(t,t.length-t.l);return{t:"Std",h:n,v:i}}function xZ(){throw new Error("File is password-protected: ECMA-376 Extensible")}function vZ(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(xo,function(s){var a=Fr(s);switch(gu(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=a[o]});break;case"<dataIntegrity":n.encryptedHmacKey=a.encryptedHmacKey,n.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(a);break;default:throw a[0]}}),n}function yZ(t,e){var r={},n=r.EncryptionVersionInfo=Ju(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var i=t.read_shift(4);return e-=4,r.EncryptionHeader=YR(t,i),e-=i,r.EncryptionVerifier=QR(t,e),r}function wZ(t){var e={},r=e.EncryptionVersionInfo=Ju(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function Hb(t){var e=0,r,n=XR(t),i=n.length+1,s,a,o,l,c;for(r=E0(i),r[0]=n.length,s=1;s!=i;++s)r[s]=n[s-1];for(s=i-1;s>=0;--s)a=r[s],o=(e&16384)===0?0:1,l=e<<1&32767,c=o|l,e=c^a;return e^52811}var JR=(function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(a){return(a/2|a*128)&255},i=function(a,o){return n(a^o)},s=function(a){for(var o=e[a.length-1],l=104,c=a.length-1;c>=0;--c)for(var d=a[c],p=0;p!=7;++p)d&64&&(o^=r[l]),d*=2,--l;return o};return function(a){for(var o=XR(a),l=s(o),c=o.length,d=E0(16),p=0;p!=16;++p)d[p]=0;var g,m,w;for((c&1)===1&&(g=l>>8,d[c]=i(t[0],g),--c,g=l&255,m=o[o.length-1],d[c]=i(m,g));c>0;)--c,g=l>>8,d[c]=i(o[c],g),--c,g=l&255,d[c]=i(o[c],g);for(c=15,w=15-o.length;w>0;)g=l>>8,d[c]=i(t[w],g),--c,--w,g=l&255,d[c]=i(o[c],g),--c,--w;return d}})(),bZ=function(t,e,r,n,i){i||(i=e),n||(n=JR(t));var s,a;for(s=0;s!=e.length;++s)a=e[s],a^=n[r],a=(a>>5|a<<3)&255,i[s]=a,++r;return[i,r,n]},_Z=function(t){var e=0,r=JR(t);return function(n){var i=bZ("",n,e,r);return e=i[1],i[0]}};function kZ(t,e,r,n){var i={key:Os(t),verificationBytes:Os(t)};return r.password&&(i.verifier=Hb(r.password)),n.valid=i.verificationBytes===i.verifier,n.valid&&(n.insitu=_Z(r.password)),i}function EZ(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=wZ(t):n.Data=yZ(t,e),n}function SZ(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?EZ(t,e-2,n):kZ(t,r.biff>=8?e:e-2,r,n),n}var ZR=(function(){function t(i,s){switch(s.type){case"base64":return e(yl(i),s);case"binary":return e(i,s);case"buffer":return e(en&&Buffer.isBuffer(i)?i.toString("binary"):B0(i),s);case"array":return e(Yf(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,p){Array.isArray(o)&&(o[p]=[]);for(var g=/\\\w+\b/g,m=0,w,y=-1;w=g.exec(d);){switch(w[0]){case"\\cell":var k=d.slice(m,g.lastIndex-w[0].length);if(k[0]==" "&&(k=k.slice(1)),++y,k.length){var T={v:k,t:"s"};Array.isArray(o)?o[p][y]=T:o[Rr({r:p,c:y})]=T}break}m=g.lastIndex}y>c.e.c&&(c.e.c=y)}),o["!ref"]=Hr(c),o}function r(i,s){return V0(t(i,s),s)}function n(i){for(var s=["{\\rtf1\\ansi"],a=Sn(i["!ref"]),o,l=Array.isArray(i),c=a.s.r;c<=a.e.r;++c){s.push("\\trowd\\trautofit1");for(var d=a.s.c;d<=a.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=a.s.c;d<=a.e.c;++d){var p=Rr({r:c,c:d});o=l?(i[c]||[])[d]:i[p],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(sd(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}})();function CZ(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function dg(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function TZ(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(e,r,n),s=Math.min(e,r,n),a=i-s;if(a===0)return[0,0,e];var o=0,l=0,c=i+s;switch(l=a/(c>1?2-c:c),i){case e:o=((r-n)/a+6)%6;break;case r:o=(n-e)/a+2;break;case n:o=(e-r)/a+4;break}return[o/6,l,c/2]}function NZ(t){var e=t[0],r=t[1],n=t[2],i=r*2*(n<.5?n:1-n),s=n-i/2,a=[s,s,s],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=i*o,a[0]+=i,a[1]+=l;break;case 1:l=i*(2-o),a[0]+=l,a[1]+=i;break;case 2:l=i*(o-2),a[1]+=i,a[2]+=l;break;case 3:l=i*(4-o),a[1]+=l,a[2]+=i;break;case 4:l=i*(o-4),a[2]+=i,a[0]+=l;break;case 5:l=i*(6-o),a[2]+=l,a[0]+=i;break}for(var c=0;c!=3;++c)a[c]=Math.round(a[c]*255);return a}function Ov(t,e){if(e===0)return t;var r=TZ(CZ(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),dg(NZ(r))}var eF=6,AZ=15,IZ=1,co=eF;function fg(t){return Math.floor((t+Math.round(128/co)/256)*co)}function hg(t){return Math.floor((t-5)/co*100+.5)/100}function Mv(t){return Math.round((t*co+5)/co*256)/256}function w4(t){return Mv(hg(fg(t)))}function qb(t){var e=Math.abs(t-w4(t)),r=co;if(e>.005)for(co=IZ;co<AZ;++co)Math.abs(t-w4(t))<=e&&(e=Math.abs(t-w4(t)),r=co);co=r}function S0(t){t.width?(t.wpx=fg(t.width),t.wch=hg(t.wpx),t.MDW=co):t.wpx?(t.wch=hg(t.wpx),t.width=Mv(t.wch),t.MDW=co):typeof t.wch=="number"&&(t.width=Mv(t.wch),t.wpx=fg(t.width),t.MDW=co),t.customWidth&&delete t.customWidth}var PZ=96,tF=PZ;function pg(t){return t*96/tF}function Y1(t){return t*tF/96}var RZ={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function FZ(t,e,r,n){e.Borders=[];var i={},s=!1;(t[0].match(xo)||[]).forEach(function(a){var o=Fr(a);switch(gu(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":i={},o.diagonalUp&&(i.diagonalUp=wi(o.diagonalUp)),o.diagonalDown&&(i.diagonalDown=wi(o.diagonalDown)),e.Borders.push(i);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function LZ(t,e,r,n){e.Fills=[];var i={},s=!1;(t[0].match(xo)||[]).forEach(function(a){var o=Fr(a);switch(gu(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":i={},e.Fills.push(i);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":o.patternType&&(i.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":i.bgColor||(i.bgColor={}),o.indexed&&(i.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(i.bgColor.theme=parseInt(o.theme,10)),o.tint&&(i.bgColor.tint=parseFloat(o.tint)),o.rgb&&(i.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":i.fgColor||(i.fgColor={}),o.theme&&(i.fgColor.theme=parseInt(o.theme,10)),o.tint&&(i.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(i.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function jZ(t,e,r,n){e.Fonts=[];var i={},s=!1;(t[0].match(xo)||[]).forEach(function(a){var o=Fr(a);switch(gu(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(i),i={};break;case"<name":o.val&&(i.name=ni(o.val));break;case"<name/>":case"</name>":break;case"<b":i.bold=o.val?wi(o.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=o.val?wi(o.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(o.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34;break}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=o.val?wi(o.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=o.val?wi(o.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=o.val?wi(o.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=o.val?wi(o.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=o.val?wi(o.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":o.val&&(i.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(i.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(i.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(i.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=yb[parseInt(o.val,10)];break;case"<color":if(i.color||(i.color={}),o.auto&&(i.color.auto=wi(o.auto)),o.rgb)i.color.rgb=o.rgb.slice(-6);else if(o.indexed){i.color.index=parseInt(o.indexed,10);var l=If[i.color.index];i.color.index==81&&(l=If[1]),l||(l=If[1]),i.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(i.color.theme=parseInt(o.theme,10),o.tint&&(i.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(i.color.rgb=Ov(r.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function DZ(t,e,r){e.NumberFmt=[];for(var n=cs(Ar),i=0;i<n.length;++i)e.NumberFmt[n[i]]=Ar[n[i]];var s=t[0].match(xo);if(s)for(i=0;i<s.length;++i){var a=Fr(s[i]);switch(gu(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=En(ni(a.formatCode)),l=parseInt(a.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}Qu(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}function OZ(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Vt("numFmt",null,{numFmtId:n,formatCode:Qn(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Vt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var lx=["numFmtId","fillId","fontId","borderId","xfId"],cx=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function MZ(t,e,r){e.CellXf=[];var n,i=!1;(t[0].match(xo)||[]).forEach(function(s){var a=Fr(s),o=0;switch(gu(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=a,delete n[0],o=0;o<lx.length;++o)n[lx[o]]&&(n[lx[o]]=parseInt(n[lx[o]],10));for(o=0;o<cx.length;++o)n[cx[o]]&&(n[cx[o]]=wi(n[cx[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};a.vertical&&(l.vertical=a.vertical),a.horizontal&&(l.horizontal=a.horizontal),a.textRotation!=null&&(l.textRotation=a.textRotation),a.indent&&(l.indent=a.indent),a.wrapText&&(l.wrapText=wi(a.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}function BZ(t){var e=[];return e[e.length]=Vt("cellXfs",null),t.forEach(function(r){e[e.length]=Vt("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Vt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var VZ=(function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,i=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var p;return(p=o.match(e))&&DZ(p,d,c),(p=o.match(i))&&jZ(p,d,l,c),(p=o.match(n))&&LZ(p,d,l,c),(p=o.match(s))&&FZ(p,d,l,c),(p=o.match(r))&&MZ(p,d,c),d}})();function rF(t,e){var r=[Ts,Vt("styleSheet",null,{xmlns:hh[0],"xmlns:vt":Ys.vt})],n;return t.SSF&&(n=OZ(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=BZ(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function UZ(t,e){var r=t.read_shift(2),n=mo(t);return[r,n]}function zZ(t,e,r){r||(r=xt(6+4*e.length)),r.write_shift(2,t),ga(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function $Z(t,e,r){var n={};n.sz=t.read_shift(2)/20;var i=EY(t);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=kY(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=mo(t),n}function HZ(t,e){e||(e=xt(153)),e.write_shift(2,t.sz*20),SY(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),Lv(t.color,e);var n=0;return n=2,e.write_shift(1,n),ga(t.name,e),e.length>e.l?e.slice(0,e.l):e}var qZ=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],b4,WZ=go;function sE(t,e){e||(e=xt(84)),b4||(b4=L5(qZ));var r=b4[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(Lv({auto:1},e),Lv({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function GZ(t,e){var r=t.l+e,n=t.read_shift(2),i=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:i}}function nF(t,e,r){r||(r=xt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function sm(t,e){return e||(e=xt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var KZ=go;function XZ(t,e){return e||(e=xt(51)),e.write_shift(1,0),sm(null,e),sm(null,e),sm(null,e),sm(null,e),sm(null,e),e.length>e.l?e.slice(0,e.l):e}function YZ(t,e){return e||(e=xt(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),Fv(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function QZ(t,e,r){var n=xt(2052);return n.write_shift(4,t),Fv(e,n),Fv(r,n),n.length>n.l?n.slice(0,n.l):n}function JZ(t,e,r){var n={};n.NumberFmt=[];for(var i in Ar)n.NumberFmt[i]=Ar[i];n.CellXf=[],n.Fonts=[];var s=[],a=!1;return pd(t,function(l,c,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],Qu(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=Ov(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:s.push(d),a=!0;break;case 38:s.pop(),a=!1;break;default:if(c.T>0)s.push(d);else if(c.T<0)s.pop();else if(!a||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function ZZ(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&++r}),r!=0&&(Et(t,615,Sc(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&Et(t,44,zZ(i,e[i]))}),Et(t,616))}}function eee(t){var e=1;Et(t,611,Sc(e)),Et(t,43,HZ({sz:12,color:{theme:1},name:"Calibri",family:2})),Et(t,612)}function tee(t){var e=2;Et(t,603,Sc(e)),Et(t,45,sE({patternType:"none"})),Et(t,45,sE({patternType:"gray125"})),Et(t,604)}function ree(t){var e=1;Et(t,613,Sc(e)),Et(t,46,XZ()),Et(t,614)}function nee(t){var e=1;Et(t,626,Sc(e)),Et(t,47,nF({numFmtId:0},65535)),Et(t,627)}function iee(t,e){Et(t,617,Sc(e.length)),e.forEach(function(r){Et(t,47,nF(r,0))}),Et(t,618)}function see(t){var e=1;Et(t,619,Sc(e)),Et(t,48,YZ({xfId:0,name:"Normal"})),Et(t,620)}function aee(t){var e=0;Et(t,505,Sc(e)),Et(t,506)}function oee(t){var e=0;Et(t,508,QZ(e,"TableStyleMedium9","PivotStyleMedium4")),Et(t,509)}function lee(t,e){var r=qo();return Et(r,278),ZZ(r,t.SSF),eee(r),tee(r),ree(r),nee(r),iee(r,e.cellXfs),see(r),aee(r),oee(r),Et(r,279),r.end()}var cee=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function uee(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(xo)||[]).forEach(function(i){var s=Fr(i);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[cee.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function dee(){}function fee(){}var hee=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,pee=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,mee=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function gee(t,e,r){e.themeElements={};var n;[["clrScheme",hee,uee],["fontScheme",pee,dee],["fmtScheme",mee,fee]].forEach(function(i){if(!(n=t.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](n,e,r)})}var xee=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function iF(t,e){(!t||t.length===0)&&(t=Wb());var r,n={};if(!(r=t.match(xee)))throw new Error("themeElements not found in theme");return gee(r[0],n,e),n.raw=t,n}function Wb(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[Ts];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function vee(t,e,r){var n=t.l+e,i=t.read_shift(4);if(i!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var a;try{a=YP(s,{type:"array"})}catch{return}var o=hl(a,"theme/theme/theme1.xml",!0);if(o)return iF(o,r)}}function yee(t){return t.read_shift(4)}function wee(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=bee(t,4);break;case 2:e.xclrValue=OR(t);break;case 3:e.xclrValue=yee(t);break;case 4:t.l+=4;break}return t.l+=8,e}function bee(t,e){return go(t,e)}function _ee(t,e){return go(t,e)}function kee(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=wee(t);break;case 6:n[1]=_ee(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function Eee(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var i=t.read_shift(2),s=[];i-- >0;)s.push(kee(t,r-t.l));return{ixfe:n,ext:s}}function See(t,e){e.forEach(function(r){r[0]})}function Cee(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:mo(t)}}function Tee(t){var e=xt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),ga(t.name,e),e.slice(0,e.l)}function Nee(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function Aee(t){var e=xt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function Iee(t,e){var r=xt(8+2*e.length);return r.write_shift(4,t),ga(e,r),r.slice(0,r.l)}function Pee(t){return t.l+=4,t.read_shift(4)!=0}function Ree(t,e){var r=xt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function Fee(t,e,r){var n={Types:[],Cell:[],Value:[]},i=r||{},s=[],a=!1,o=2;return pd(t,function(l,c,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(p){o==1?n.Cell.push({type:n.Types[p[0]-1].name,index:p[1]}):o==0&&n.Value.push({type:n.Types[p[0]-1].name,index:p[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:s.push(d),a=!0;break;case 36:s.pop(),a=!1;break;default:if(!c.T){if(!a||i.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function Lee(){var t=qo();return Et(t,332),Et(t,334,Sc(1)),Et(t,335,Tee({name:"XLDAPR",version:12e4,flags:3496657072})),Et(t,336),Et(t,339,Iee(1,"XLDAPR")),Et(t,52),Et(t,35,Sc(514)),Et(t,4096,Sc(0)),Et(t,4097,Ul(1)),Et(t,36),Et(t,53),Et(t,340),Et(t,337,Ree(1)),Et(t,51,Aee([[1,0]])),Et(t,338),Et(t,333),t.end()}function jee(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var i=!1,s=2,a;return t.replace(xo,function(o){var l=Fr(o);switch(gu(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(a=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):s==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+l.i);break;default:if(!i&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function sF(){var t=[Ts];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function Dee(t){var e=[];if(!t)return e;var r=1;return(t.match(xo)||[]).forEach(function(n){var i=Fr(n);switch(i[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?r=i.i:i.i=r,e.push(i);break}}),e}function Oee(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Rr(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function Mee(t,e,r){var n=[];return pd(t,function(s,a,o){switch(o){case 63:n.push(s);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function Bee(t,e,r,n){if(!t)return t;var i=n||{},s=!1;pd(t,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!l.T){if(!s||i.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},i)}function Vee(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var u1=1024;function aF(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[Vt("xml",null,{"xmlns:v":ul.v,"xmlns:o":ul.o,"xmlns:x":ul.x,"xmlns:mv":ul.mv}).replace(/\/>/,">"),Vt("o:shapelayout",Vt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Vt("v:shapetype",[Vt("v:stroke",null,{joinstyle:"miter"}),Vt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];u1<t*1e3;)u1+=1e3;return e.forEach(function(s){var a=Gi(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Vt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=Vt("v:fill",l,o),d={on:"t",obscured:"t"};++u1,i=i.concat(["<v:shape"+lg({id:"_x0000_s"+u1,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,Vt("v:shadow",null,d),Vt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ja("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),ja("x:AutoFill","False"),ja("x:Row",String(a.r)),ja("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function aE(t,e,r,n){var i=Array.isArray(t),s;e.forEach(function(a){var o=Gi(a.ref);if(i?(t[o.r]||(t[o.r]=[]),s=t[o.r][o.c]):s=t[a.ref],!s){s={t:"z"},i?t[o.r][o.c]=s:t[a.ref]=s;var l=Sn(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=Hr(l);c!==t["!ref"]&&(t["!ref"]=c)}s.c||(s.c=[]);var d={a:a.author,t:a.t,r:a.r,T:r};a.h&&(d.h=a.h);for(var p=s.c.length-1;p>=0;--p){if(!r&&s.c[p].T)return;r&&!s.c[p].T&&s.c.splice(p,1)}if(r&&n){for(p=0;p<n.length;++p)if(d.a==n[p].id){d.a=n[p].name||d.a;break}}s.c.push(d)})}function Uee(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],i=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Fr(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=Gi(l.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var p=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),g=!!p&&!!p[1]&&$b(p[1])||{r:"",t:"",h:""};c.r=g.r,g.r=="<t></t>"&&(g.t=g.h=""),c.t=(g.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(c.h=g.h),n.push(c)}}}}),n}function oF(t){var e=[Ts,Vt("comments",null,{xmlns:hh[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(i){var s=Qn(i.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&r.indexOf("tc="+i.ID)==-1&&(r.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var i=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?i=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(i=r.indexOf(Qn(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(ja("t",Qn(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(ja("t",Qn(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function zee(t,e){var r=[],n=!1,i={},s=0;return t.replace(xo,function(o,l){var c=Fr(o);switch(gu(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":i={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":i.t!=null&&r.push(i);break;case"<text>":case"<text":s=l+o.length;break;case"</text>":i.t=t.slice(s,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function $ee(t,e,r){var n=[Ts,Vt("ThreadedComments",null,{xmlns:Ys.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),n.push(Vt("threadedComment",ja("text",a.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function Hee(t,e){var r=[],n=!1;return t.replace(xo,function(s){var a=Fr(s);switch(gu(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return s}),r}function qee(t){var e=[Ts,Vt("personList",null,{xmlns:Ys.TCMNT,"xmlns:x":hh[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Vt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function Wee(t){var e={};e.iauthor=t.read_shift(4);var r=xh(t);return e.rfx=r.s,e.ref=Rr(r.s),t.l+=16,e}function Gee(t,e){return e==null&&(e=xt(36)),e.write_shift(4,t[1].iauthor),xp(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var Kee=mo;function Xee(t){return ga(t.slice(0,54))}function Yee(t,e){var r=[],n=[],i={},s=!1;return pd(t,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:i=o;break;case 637:i.t=o.t,i.h=o.h,i.r=o.r;break;case 636:if(i.author=n[i.iauthor],delete i.iauthor,e.sheetRows&&i.rfx&&e.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,r.push(i);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}function Qee(t){var e=qo(),r=[];return Et(e,628),Et(e,630),t.forEach(function(n){n[1].forEach(function(i){r.indexOf(i.a)>-1||(r.push(i.a.slice(0,54)),Et(e,632,Xee(i.a)))})}),Et(e,631),Et(e,633),t.forEach(function(n){n[1].forEach(function(i){i.iauthor=r.indexOf(i.a);var s={s:Gi(n[0]),e:Gi(n[0])};Et(e,635,Gee([s,i])),i.t&&i.t.length>0&&Et(e,637,yY(i)),Et(e,636),delete i.iauthor})}),Et(e,634),Et(e,629),e.end()}var Jee="application/vnd.ms-office.vbaProject";function Zee(t){var e=_r.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var i=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");_r.utils.cfb_add(e,i,t.FileIndex[n].content)}}),_r.write(e)}function ete(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&_r.utils.cfb_add(t,i,e.FileIndex[n].content)}})}var lF=["xlsb","xlsm","xlam","biff8","xla"];function tte(){return{"!type":"dialog"}}function rte(){return{"!type":"dialog"}}function nte(){return{"!type":"macro"}}function ite(){return{"!type":"macro"}}var _1=(function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,i,s,a){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=s.length>0?parseInt(s,10)|0:0,d=a.length>0?parseInt(a,10)|0:0;return o?d+=e.c:--d,l?c+=e.r:--c,i+(o?"":"$")+Wi(d)+(l?"":"$")+Cs(c)}return function(i,s){return e=s,i.replace(t,r)}})(),Gb=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Kb=(function(){return function(e,r){return e.replace(Gb,function(n,i,s,a,o,l){var c=Lb(a)-(s?0:r.c),d=Fb(l)-(o?0:r.r),p=d==0?"":o?d+1:"["+d+"]",g=c==0?"":s?c+1:"["+c+"]";return i+"R"+p+"C"+g})}})();function cF(t,e){return t.replace(Gb,function(r,n,i,s,a,o){return n+(i=="$"?i+s:Wi(Lb(s)+e.c))+(a=="$"?a+o:Cs(Fb(o)+e.r))})}function ste(t,e,r){var n=Wo(e),i=n.s,s=Gi(r),a={r:s.r-i.r,c:s.c-i.c};return cF(t,a)}function ate(t){return t.length!=1}function oE(t){return t.replace(/_xlfn\./g,"")}function Ls(t){t.l+=1}function C0(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function uF(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return dF(t);r.biff==12&&(n=4)}var i=t.read_shift(n),s=t.read_shift(n),a=C0(t),o=C0(t);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function dF(t){var e=C0(t),r=C0(t),n=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function ote(t,e,r){if(r.biff<8)return dF(t);var n=t.read_shift(r.biff==12?4:2),i=t.read_shift(r.biff==12?4:2),s=C0(t),a=C0(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function fF(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return lte(t);var n=t.read_shift(r&&r.biff==12?4:2),i=C0(t);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function lte(t){var e=C0(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function cte(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function ute(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return dte(t);var i=t.read_shift(n>=12?4:2),s=t.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function dte(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),i==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:i,rRel:n}}function fte(t,e,r){var n=(t[t.l++]&96)>>5,i=uF(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,i]}function hte(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var a=uF(t,s,r);return[n,i,a]}function pte(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function mte(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,i]}function gte(t,e,r){var n=(t[t.l++]&96)>>5,i=ote(t,e-1,r);return[n,i]}function xte(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function lE(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function vte(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),i=[],s=0;s<=n;++s)i.push(t.read_shift(r&&r.biff==2?1:2));return i}function yte(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function wte(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function bte(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function _te(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function hF(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function kte(t){return t.read_shift(2),hF(t)}function Ete(t){return t.read_shift(2),hF(t)}function Ste(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=fF(t,0,r);return[n,i]}function Cte(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=ute(t,0,r);return[n,i]}function Tte(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=fF(t,0,r);return[n,i,s]}function Nte(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(r&&r.biff<=3?1:2);return[Pre[i],gF[i],n]}function Ate(t,e,r){var n=t[t.l++],i=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:Ite(t);return[i,(s[0]===0?gF:Ire)[s[1]]]}function Ite(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Pte(t,e,r){t.l+=r&&r.biff==2?3:4}function Rte(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function Fte(t){return t.l++,md[t.read_shift(1)]}function Lte(t){return t.l++,t.read_shift(2)}function jte(t){return t.l++,t.read_shift(1)!==0}function Dte(t){return t.l++,fo(t)}function Ote(t,e,r){return t.l++,Kg(t,e-1,r)}function Mte(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=vs(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=md[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=fo(t);break;case 2:r[1]=vh(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Bte(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),i=[],s=0;s!=n;++s)i.push((r.biff==12?xh:O5)(t));return i}function Vte(t,e,r){var n=0,i=0;r.biff==12?(n=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--i==0&&(i=256));for(var s=0,a=[];s!=n&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=Mte(t,r.biff);return a}function Ute(t,e,r){var n=t.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,s=t.read_shift(i);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function zte(t,e,r){if(r.biff==5)return $te(t);var n=t.read_shift(1)>>>5&3,i=t.read_shift(2),s=t.read_shift(4);return[n,i,s]}function $te(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function Hte(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function qte(t,e,r){var n=t.read_shift(1)>>>5&3,i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function Wte(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function Gte(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,i]}var Kte=go,Xte=go,Yte=go;function Yg(t,e,r){return t.l+=2,[cte(t)]}function Xb(t){return t.l+=6,[]}var Qte=Yg,Jte=Xb,Zte=Xb,ere=Yg;function pF(t){return t.l+=2,[Os(t),t.read_shift(2)&1]}var tre=Yg,rre=pF,nre=Xb,ire=Yg,sre=Yg,are=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function ore(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i=t.read_shift(2),s=t.read_shift(2),a=are[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:i,C:s}}function lre(t){return t.l+=2,[t.read_shift(4)]}function cre(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function ure(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function dre(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function fre(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function hre(t){return t.l+=4,[0,0]}var cE={1:{n:"PtgExp",f:Rte},2:{n:"PtgTbl",f:Yte},3:{n:"PtgAdd",f:Ls},4:{n:"PtgSub",f:Ls},5:{n:"PtgMul",f:Ls},6:{n:"PtgDiv",f:Ls},7:{n:"PtgPower",f:Ls},8:{n:"PtgConcat",f:Ls},9:{n:"PtgLt",f:Ls},10:{n:"PtgLe",f:Ls},11:{n:"PtgEq",f:Ls},12:{n:"PtgGe",f:Ls},13:{n:"PtgGt",f:Ls},14:{n:"PtgNe",f:Ls},15:{n:"PtgIsect",f:Ls},16:{n:"PtgUnion",f:Ls},17:{n:"PtgRange",f:Ls},18:{n:"PtgUplus",f:Ls},19:{n:"PtgUminus",f:Ls},20:{n:"PtgPercent",f:Ls},21:{n:"PtgParen",f:Ls},22:{n:"PtgMissArg",f:Ls},23:{n:"PtgStr",f:Ote},26:{n:"PtgSheet",f:cre},27:{n:"PtgEndSheet",f:ure},28:{n:"PtgErr",f:Fte},29:{n:"PtgBool",f:jte},30:{n:"PtgInt",f:Lte},31:{n:"PtgNum",f:Dte},32:{n:"PtgArray",f:xte},33:{n:"PtgFunc",f:Nte},34:{n:"PtgFuncVar",f:Ate},35:{n:"PtgName",f:Ute},36:{n:"PtgRef",f:Ste},37:{n:"PtgArea",f:fte},38:{n:"PtgMemArea",f:Hte},39:{n:"PtgMemErr",f:Kte},40:{n:"PtgMemNoMem",f:Xte},41:{n:"PtgMemFunc",f:qte},42:{n:"PtgRefErr",f:Wte},43:{n:"PtgAreaErr",f:pte},44:{n:"PtgRefN",f:Cte},45:{n:"PtgAreaN",f:gte},46:{n:"PtgMemAreaN",f:dre},47:{n:"PtgMemNoMemN",f:fre},57:{n:"PtgNameX",f:zte},58:{n:"PtgRef3d",f:Tte},59:{n:"PtgArea3d",f:hte},60:{n:"PtgRefErr3d",f:Gte},61:{n:"PtgAreaErr3d",f:mte},255:{}},pre={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},mre={1:{n:"PtgElfLel",f:pF},2:{n:"PtgElfRw",f:ire},3:{n:"PtgElfCol",f:Qte},6:{n:"PtgElfRwV",f:sre},7:{n:"PtgElfColV",f:ere},10:{n:"PtgElfRadical",f:tre},11:{n:"PtgElfRadicalS",f:nre},13:{n:"PtgElfColS",f:Jte},15:{n:"PtgElfColSV",f:Zte},16:{n:"PtgElfRadicalLel",f:rre},25:{n:"PtgList",f:ore},29:{n:"PtgSxName",f:lre},255:{}},gre={0:{n:"PtgAttrNoop",f:hre},1:{n:"PtgAttrSemi",f:_te},2:{n:"PtgAttrIf",f:wte},4:{n:"PtgAttrChoose",f:vte},8:{n:"PtgAttrGoto",f:yte},16:{n:"PtgAttrSum",f:Pte},32:{n:"PtgAttrBaxcel",f:lE},33:{n:"PtgAttrBaxcel",f:lE},64:{n:"PtgAttrSpace",f:kte},65:{n:"PtgAttrSpaceSemi",f:Ete},128:{n:"PtgAttrIfError",f:bte},255:{}};function Qg(t,e,r,n){if(n.biff<8)return go(t,e);for(var i=t.l+e,s=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=Vte(t,0,n),s.push(r[a][1]);break;case"PtgMemArea":r[a][2]=Bte(t,r[a][1],n),s.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),s.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=i-t.l,e!==0&&s.push(go(t,e)),s}function Jg(t,e,r){for(var n=t.l+e,i,s,a=[];n!=t.l;)e=n-t.l,s=t[t.l],i=cE[s]||cE[pre[s]],(s===24||s===25)&&(i=(s===24?mre:gre)[t[t.l+1]]),!i||!i.f?go(t,e):a.push([i.n,i.f(t,e,r)]);return a}function xre(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],i=[],s=0;s<n.length;++s){var a=n[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var vre={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function yre(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function mF(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(t[n[0]][0]){case 357:return i=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(i=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function uE(t,e,r){var n=mF(t,e,r);return n=="#REF"?n:yre(n,r)}function lo(t,e,r,n,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],l,c,d,p=0,g=0,m,w="";if(!t[0]||!t[0][0])return"";for(var y=-1,k="",T=0,O=t[0].length;T<O;++T){var P=t[0][T];switch(P[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),y>=0){switch(t[0][y][1][0]){case 0:k=rs(" ",t[0][y][1][1]);break;case 1:k=rs("\r",t[0][y][1][1]);break;default:if(k="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}c=c+k,y=-1}o.push(c+vre[P[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Pm(P[1][1],a,i),o.push(Rm(d,s));break;case"PtgRefN":d=r?Pm(P[1][1],r,i):P[1][1],o.push(Rm(d,s));break;case"PtgRef3d":p=P[1][1],d=Pm(P[1][2],a,i),w=uE(n,p,i),o.push(w+"!"+Rm(d,s));break;case"PtgFunc":case"PtgFuncVar":var V=P[1][0],Y=P[1][1];V||(V=0),V&=127;var G=V==0?[]:o.slice(-V);o.length-=V,Y==="User"&&(Y=G.shift()),o.push(Y+"("+G.join(",")+")");break;case"PtgBool":o.push(P[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(P[1]);break;case"PtgNum":o.push(String(P[1]));break;case"PtgStr":o.push('"'+P[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(P[1]);break;case"PtgAreaN":m=B9(P[1][1],r?{s:r}:a,i),o.push(x4(m,i));break;case"PtgArea":m=B9(P[1][1],a,i),o.push(x4(m,i));break;case"PtgArea3d":p=P[1][1],m=P[1][2],w=uE(n,p,i),o.push(w+"!"+x4(m,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=P[1][2];var L=(n.names||[])[g-1]||(n[0]||[])[g],N=L?L.Name:"SH33TJSNAME"+String(g);N&&N.slice(0,6)=="_xlfn."&&!i.xlfn&&(N=N.slice(6)),o.push(N);break;case"PtgNameX":var C=P[1][1];g=P[1][2];var R;if(i.biff<=5)C<0&&(C=-C),n[C]&&(R=n[C][g]);else{var A="";if(((n[C]||[])[0]||[])[0]==14849||(((n[C]||[])[0]||[])[0]==1025?n[C][g]&&n[C][g].itab>0&&(A=n.SheetNames[n[C][g].itab-1]+"!"):A=n.SheetNames[g-1]+"!"),n[C]&&n[C][g])A+=n[C][g].Name;else if(n[0]&&n[0][g])A+=n[0][g].Name;else{var F=(mF(n,C,i)||"").split(";;");F[g-1]?A=F[g-1]:A+="SH33TJSERRX"}o.push(A);break}R||(R={Name:"SH33TJSERRY"}),o.push(R.Name);break;case"PtgParen":var B="(",te=")";if(y>=0){switch(k="",t[0][y][1][0]){case 2:B=rs(" ",t[0][y][1][1])+B;break;case 3:B=rs("\r",t[0][y][1][1])+B;break;case 4:te=rs(" ",t[0][y][1][1])+te;break;case 5:te=rs("\r",t[0][y][1][1])+te;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}y=-1}o.push(B+o.pop()+te);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:P[1][1],r:P[1][0]};var pe={c:r.c,r:r.r};if(n.sharedf[Rr(d)]){var Ee=n.sharedf[Rr(d)];o.push(lo(Ee,a,pe,n,i))}else{var ve=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(d.c<c[0].s.c||d.c>c[0].e.c)&&!(d.r<c[0].s.r||d.r>c[0].e.r)){o.push(lo(c[1],a,pe,n,i)),ve=!0;break}ve||o.push(P[1])}break;case"PtgArray":o.push("{"+xre(P[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+P[1].idx+"[#"+P[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(P));default:throw new Error("Unrecognized Formula Token: "+String(P))}var re=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&y>=0&&re.indexOf(t[0][T][0])==-1){P=t[0][y];var W=!0;switch(P[1][0]){case 4:W=!1;case 0:k=rs(" ",P[1][1]);break;case 5:W=!1;case 1:k=rs("\r",P[1][1]);break;default:if(k="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+P[1][0])}o.push((W?k:"")+o.pop()+(W?"":k)),y=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function wre(t,e,r){var n=t.l+e,i=r.biff==2?1:2,s,a=t.read_shift(i);if(a==65535)return[[],go(t,e-2)];var o=Jg(t,a,r);return e!==a+i&&(s=Qg(t,e-a-i,o,r)),t.l=n,[o,s]}function bre(t,e,r){var n=t.l+e,i=r.biff==2?1:2,s,a=t.read_shift(i);if(a==65535)return[[],go(t,e-2)];var o=Jg(t,a,r);return e!==a+i&&(s=Qg(t,e-a-i,o,r)),t.l=n,[o,s]}function _re(t,e,r,n){var i=t.l+e,s=Jg(t,n,r),a;return i!==t.l&&(a=Qg(t,i-t.l,s,r)),[s,a]}function kre(t,e,r){var n=t.l+e,i,s=t.read_shift(2),a=Jg(t,s,r);return s==65535?[[],go(t,e-2)]:(e!==s+2&&(i=Qg(t,n-s-2,a,r)),[a,i])}function Ere(t){var e;if(qu(t,t.l+6)!==65535)return[fo(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function Sre(t){if(t==null){var e=xt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Qf(t);return Qf(0)}function _4(t,e,r){var n=t.l+e,i=xu(t);r.biff==2&&++t.l;var s=Ere(t),a=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=bre(t,n-t.l,r);return{cell:i,val:s[0],formula:o,shared:a>>3&1,tt:s[1]}}function Cre(t,e,r,n,i){var s=Zf(e,r,i),a=Sre(t.v),o=xt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var c=xt(t.bf.length),d=0;d<t.bf.length;++d)c[d]=t.bf[d];var p=ma([s,a,o,c]);return p}function M5(t,e,r){var n=t.read_shift(4),i=Jg(t,n,r),s=t.read_shift(4),a=s>0?Qg(t,s,i,r):null;return[i,a]}var Tre=M5,B5=M5,Nre=M5,Are=M5,Ire={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},gF={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Pre={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function dE(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function Rre(t){var e="of:="+t.replace(Gb,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function k4(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function Fre(t){return t.replace(/\./,"!")}var Lm={},k1={},jm=typeof Map<"u";function Yb(t,e,r){var n=0,i=t.length;if(r){if(jm?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=jm?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<i;++n)if(t[n].t===e)return t.Count++,n;return t[i]={t:e},t.Count++,t.Unique++,r&&(jm?(r.has(e)||r.set(e,[]),r.get(e).push(i)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(i))),i}function V5(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(co=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=hg(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=Mv(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function Ff(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function U0(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],i=60,s=t.length;if(n==null&&r.ssf){for(;i<392;++i)if(r.ssf[i]==null){Qu(e.z,i),r.ssf[i]=e.z,r.revssf[e.z]=n=i;break}}for(i=0;i!=s;++i)if(t[i].numFmtId===n)return i;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function xF(t,e,r,n,i,s){try{n.cellNF&&(t.z=Ar[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Ei(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Ar[e]==null&&Qu(IX[e]||"General",e),t.t==="e")t.w=t.w||md[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ag(t.v);else if(t.t==="d"){var a=ea(t.v);(a|0)===a?t.w=a.toString(10):t.w=ag(a)}else{if(t.v===void 0)return"";t.w=Xf(t.v,k1)}else t.t==="d"?t.w=Gl(e,ea(t.v),k1):t.w=Gl(e,t.v,k1)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=Ov(i.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=i.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=Ov(i.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=i.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function Lre(t,e,r){if(t&&t["!ref"]){var n=Sn(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function jre(t,e){var r=Sn(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Hr(r))}var Dre=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Ore=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Mre=/<(?:\w:)?hyperlink [^>]*>/mg,Bre=/"(\w*:\w*)"/,Vre=/<(?:\w:)?col\b[^>]*[\/]?>/g,Ure=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,zre=/<(?:\w:)?pageMargins[^>]*\/>/g,vF=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,$re=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Hre=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function qre(t,e,r,n,i,s,a){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",d="",p=t.match(Ore);p?(c=t.slice(0,p.index),d=t.slice(p.index+p[0].length)):c=d=t;var g=c.match(vF);g?Qb(g[0],o,i,r):(g=c.match($re))&&Gre(g[0],g[1]||"",o,i,r);var m=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var w=c.slice(m,m+50).match(Bre);w&&jre(o,w[1])}var y=c.match(Hre);y&&y[1]&&ane(y[1],i);var k=[];if(e.cellStyles){var T=c.match(Vre);T&&tne(k,T)}p&&cne(p[1],o,e,l,s,a);var O=d.match(Ure);O&&(o["!autofilter"]=nne(O[0]));var P=[],V=d.match(Dre);if(V)for(m=0;m!=V.length;++m)P[m]=Sn(V[m].slice(V[m].indexOf('"')+1));var Y=d.match(Mre);Y&&Jre(o,Y,n);var G=d.match(zre);if(G&&(o["!margins"]=Zre(Fr(G[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Hr(l)),e.sheetRows>0&&o["!ref"]){var L=Sn(o["!ref"]);e.sheetRows<=+L.e.r&&(L.e.r=e.sheetRows-1,L.e.r>l.e.r&&(L.e.r=l.e.r),L.e.r<L.s.r&&(L.s.r=L.e.r),L.e.c>l.e.c&&(L.e.c=l.e.c),L.e.c<L.s.c&&(L.s.c=L.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Hr(L))}return k.length>0&&(o["!cols"]=k),P.length>0&&(o["!merges"]=P),o}function Wre(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Hr(t[r])+'"/>';return e+"</mergeCells>"}function Qb(t,e,r,n){var i=Fr(t);r.Sheets[n]||(r.Sheets[n]={}),i.codeName&&(r.Sheets[n].CodeName=En(ni(i.codeName)))}function Gre(t,e,r,n,i){Qb(t.slice(0,t.indexOf(">")),r,n,i)}function Kre(t,e,r,n,i){var s=!1,a={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}s=!0,a.codeName=nu(Qn(l))}if(t&&t["!outline"]){var c={summaryBelow:1,summaryRight:1};t["!outline"].above&&(c.summaryBelow=0),t["!outline"].left&&(c.summaryRight=0),o=(o||"")+Vt("outlinePr",null,c)}!s&&!o||(i[i.length]=Vt("sheetPr",o,a))}var Xre=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Yre=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Qre(t){var e={sheet:1};return Xre.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),Yre.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=Hb(t.password).toString(16).toUpperCase()),Vt("sheetProtection",null,e)}function Jre(t,e,r){for(var n=Array.isArray(t),i=0;i!=e.length;++i){var s=Fr(ni(e[i]),!0);if(!s.ref)return;var a=((r||{})["!id"]||[])[s.id];a?(s.Target=a.Target,s.location&&(s.Target+="#"+En(s.location))):(s.Target="#"+En(s.location),a={Target:s.Target,TargetMode:"Internal"}),s.Rel=a,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Sn(s.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var d=Rr({c,r:l});n?(t[l]||(t[l]=[]),t[l][c]||(t[l][c]={t:"z",v:void 0}),t[l][c].l=s):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=s)}}}function Zre(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function ene(t){return Ff(t),Vt("pageMargins",null,t)}function tne(t,e){for(var r=!1,n=0;n!=e.length;++n){var i=Fr(e[n],!0);i.hidden&&(i.hidden=wi(i.hidden));var s=parseInt(i.min,10)-1,a=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!r&&i.width&&(r=!0,qb(i.width)),S0(i);s<=a;)t[s++]=Si(i)}}function rne(t,e){for(var r=["<cols>"],n,i=0;i!=e.length;++i)(n=e[i])&&(r[r.length]=Vt("col",null,V5(i,n)));return r[r.length]="</cols>",r.join("")}function nne(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function ine(t,e,r,n){var i=typeof t.ref=="string"?t.ref:Hr(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,a=Wo(i);a.s.r==a.e.r&&(a.e.r=Wo(e["!ref"]).e.r,i=Hr(a));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Vt("autoFilter",null,{ref:i})}var sne=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function ane(t,e){e.Views||(e.Views=[{}]),(t.match(sne)||[]).forEach(function(r,n){var i=Fr(r);e.Views[n]||(e.Views[n]={}),+i.zoomScale&&(e.Views[n].zoom=+i.zoomScale),wi(i.rightToLeft)&&(e.Views[n].RTL=!0)})}function one(t,e,r,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Vt("sheetViews",Vt("sheetView",null,i),{})}function lne(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",s=t.t,a=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=md[t.v];break;case"d":n&&n.cellDates?i=Ei(t.v,-1).toISOString():(t=Si(t),t.t="n",i=""+(t.v=ea(Ei(t.v)))),typeof t.z>"u"&&(t.z=Ar[14]);break;default:i=t.v;break}var o=ja("v",Qn(i)),l={r:e},c=U0(n.cellXfs,t,n);switch(c!==0&&(l.s=c),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=ja("v",""+Yb(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=s&&(t.t=s,t.v=a),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Vt("f",Qn(t.f),d)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),Vt("c",o,l)}var cne=(function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,s=og("v"),a=og("f");return function(l,c,d,p,g,m){for(var w=0,y="",k=[],T=[],O=0,P=0,V=0,Y="",G,L,N=0,C=0,R,A,F=0,B=0,te=Array.isArray(m.CellXf),pe,Ee=[],ve=[],re=Array.isArray(c),W=[],ne={},Q=!1,I=!!d.sheetStubs,H=l.split(e),X=0,J=H.length;X!=J;++X){y=H[X].trim();var ue=y.length;if(ue!==0){var we=0;e:for(w=0;w<ue;++w)switch(y[w]){case">":if(y[w-1]!="/"){++w;break e}if(d&&d.cellStyles){if(L=Fr(y.slice(we,w),!0),N=L.r!=null?parseInt(L.r,10):N+1,C=-1,d.sheetRows&&d.sheetRows<N)continue;ne={},Q=!1,L.ht&&(Q=!0,ne.hpt=parseFloat(L.ht),ne.hpx=Y1(ne.hpt)),L.hidden=="1"&&(Q=!0,ne.hidden=!0),L.outlineLevel!=null&&(Q=!0,ne.level=+L.outlineLevel),Q&&(W[N-1]=ne)}break;case"<":we=w;break}if(we>=w)break;if(L=Fr(y.slice(we,w),!0),N=L.r!=null?parseInt(L.r,10):N+1,C=-1,!(d.sheetRows&&d.sheetRows<N)){p.s.r>N-1&&(p.s.r=N-1),p.e.r<N-1&&(p.e.r=N-1),d&&d.cellStyles&&(ne={},Q=!1,L.ht&&(Q=!0,ne.hpt=parseFloat(L.ht),ne.hpx=Y1(ne.hpt)),L.hidden=="1"&&(Q=!0,ne.hidden=!0),L.outlineLevel!=null&&(Q=!0,ne.level=+L.outlineLevel),Q&&(W[N-1]=ne)),k=y.slice(w).split(t);for(var fe=0;fe!=k.length&&k[fe].trim().charAt(0)=="<";++fe);for(k=k.slice(fe),w=0;w!=k.length;++w)if(y=k[w].trim(),y.length!==0){if(T=y.match(r),O=w,P=0,V=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,T!=null&&T.length===2){for(O=0,Y=T[1],P=0;P!=Y.length&&!((V=Y.charCodeAt(P)-64)<1||V>26);++P)O=26*O+V;--O,C=O}else++C;for(P=0;P!=y.length&&y.charCodeAt(P)!==62;++P);if(++P,L=Fr(y.slice(0,P),!0),L.r||(L.r=Rr({r:N-1,c:C})),Y=y.slice(P),G={t:""},(T=Y.match(s))!=null&&T[1]!==""&&(G.v=En(T[1])),d.cellFormula){if((T=Y.match(a))!=null&&T[1]!==""){if(G.f=En(ni(T[1])).replace(/\r\n/g,`
`),d.xlfn||(G.f=oE(G.f)),T[0].indexOf('t="array"')>-1)G.F=(Y.match(i)||[])[1],G.F.indexOf(":")>-1&&Ee.push([Sn(G.F),G.F]);else if(T[0].indexOf('t="shared"')>-1){A=Fr(T[0]);var me=En(ni(T[1]));d.xlfn||(me=oE(me)),ve[parseInt(A.si,10)]=[A,me,L.r]}}else(T=Y.match(/<f[^>]*\/>/))&&(A=Fr(T[0]),ve[A.si]&&(G.f=ste(ve[A.si][1],ve[A.si][2],L.r)));var be=Gi(L.r);for(P=0;P<Ee.length;++P)be.r>=Ee[P][0].s.r&&be.r<=Ee[P][0].e.r&&be.c>=Ee[P][0].s.c&&be.c<=Ee[P][0].e.c&&(G.F=Ee[P][1])}if(L.t==null&&G.v===void 0)if(G.f||G.F)G.v=0,G.t="n";else if(I)G.t="z";else continue;else G.t=L.t||"n";switch(p.s.c>C&&(p.s.c=C),p.e.c<C&&(p.e.c=C),G.t){case"n":if(G.v==""||G.v==null){if(!I)continue;G.t="z"}else G.v=parseFloat(G.v);break;case"s":if(typeof G.v>"u"){if(!I)continue;G.t="z"}else R=Lm[parseInt(G.v,10)],G.v=R.t,G.r=R.r,d.cellHTML&&(G.h=R.h);break;case"str":G.t="s",G.v=G.v!=null?ni(G.v):"",d.cellHTML&&(G.h=Ab(G.v));break;case"inlineStr":T=Y.match(n),G.t="s",T!=null&&(R=$b(T[1]))?(G.v=R.t,d.cellHTML&&(G.h=R.h)):G.v="";break;case"b":G.v=wi(G.v);break;case"d":d.cellDates?G.v=Ei(G.v,1):(G.v=ea(Ei(G.v,1)),G.t="n");break;case"e":(!d||d.cellText!==!1)&&(G.w=G.v),G.v=wR[G.v];break}if(F=B=0,pe=null,te&&L.s!==void 0&&(pe=m.CellXf[L.s],pe!=null&&(pe.numFmtId!=null&&(F=pe.numFmtId),d.cellStyles&&pe.fillId!=null&&(B=pe.fillId))),xF(G,F,B,d,g,m),d.cellDates&&te&&G.t=="n"&&pp(Ar[F])&&(G.t="d",G.v=D5(G.v)),L.cm&&d.xlmeta){var Le=(d.xlmeta.Cell||[])[+L.cm-1];Le&&Le.type=="XLDAPR"&&(G.D=!0)}if(re){var ee=Gi(L.r);c[ee.r]||(c[ee.r]=[]),c[ee.r][ee.c]=G}else c[L.r]=G}}}}W.length>0&&(c["!rows"]=W)}})();function une(t,e,r,n){var i=[],s=[],a=Sn(t["!ref"]),o="",l,c="",d=[],p=0,g=0,m=t["!rows"],w=Array.isArray(t),y={r:c},k,T=-1;for(g=a.s.c;g<=a.e.c;++g)d[g]=Wi(g);for(p=a.s.r;p<=a.e.r;++p){for(s=[],c=Cs(p),g=a.s.c;g<=a.e.c;++g){l=d[g]+c;var O=w?(t[p]||[])[g]:t[l];O!==void 0&&(o=lne(O,l,t,e))!=null&&s.push(o)}(s.length>0||m&&m[p])&&(y={r:c},m&&m[p]&&(k=m[p],k.hidden&&(y.hidden=1),T=-1,k.hpx?T=pg(k.hpx):k.hpt&&(T=k.hpt),T>-1&&(y.ht=T,y.customHeight=1),k.level&&(y.outlineLevel=k.level)),i[i.length]=Vt("row",s.join(""),y))}if(m)for(;p<m.length;++p)m&&m[p]&&(y={r:p+1},k=m[p],k.hidden&&(y.hidden=1),T=-1,k.hpx?T=pg(k.hpx):k.hpt&&(T=k.hpt),T>-1&&(y.ht=T,y.customHeight=1),k.level&&(y.outlineLevel=k.level),i[i.length]=Vt("row","",y));return i.join("")}function yF(t,e,r,n){var i=[Ts,Vt("worksheet",null,{xmlns:hh[0],"xmlns:r":Ys.r})],s=r.SheetNames[t],a=0,o="",l=r.Sheets[s];l==null&&(l={});var c=l["!ref"]||"A1",d=Sn(c);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),c=Hr(d)}n||(n={}),l["!comments"]=[];var p=[];Kre(l,r,t,e,i),i[i.length]=Vt("dimension",null,{ref:c}),i[i.length]=one(l,e,t,r),e.sheetFormat&&(i[i.length]=Vt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=rne(l,l["!cols"])),i[a=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=une(l,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),l["!protect"]&&(i[i.length]=Qre(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=ine(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=Wre(l["!merges"]));var g=-1,m,w=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(m={ref:y[0]},y[1].Target.charAt(0)!="#"&&(w=Kn(n,-1,Qn(y[1].Target).replace(/#.*$/,""),an.HLINK),m["r:id"]="rId"+w),(g=y[1].Target.indexOf("#"))>-1&&(m.location=Qn(y[1].Target.slice(g+1))),y[1].Tooltip&&(m.tooltip=Qn(y[1].Tooltip)),i[i.length]=Vt("hyperlink",null,m))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=ene(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=ja("ignoredErrors",Vt("ignoredError",null,{numberStoredAsText:1,sqref:c}))),p.length>0&&(w=Kn(n,-1,"../drawings/drawing"+(t+1)+".xml",an.DRAW),i[i.length]=Vt("drawing",null,{"r:id":"rId"+w}),l["!drawing"]=p),l["!comments"].length>0&&(w=Kn(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",an.VML),i[i.length]=Vt("legacyDrawing",null,{"r:id":"rId"+w}),l["!legacy"]=w),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function dne(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=i/20),r}function fne(t,e,r){var n=xt(145),i=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;i.hpx?s=pg(i.hpx)*20:i.hpt&&(s=i.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),n.write_shift(1,a),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var c={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var p=-1,g=-1,m=d<<10;m<d+1<<10;++m){c.c=m;var w=Array.isArray(r)?(r[c.r]||[])[c.c]:r[Rr(c)];w&&(p<0&&(p=m),g=m)}p<0||(++o,n.write_shift(4,p),n.write_shift(4,g))}var y=n.l;return n.l=l,n.write_shift(4,o),n.l=y,n.length>n.l?n.slice(0,n.l):n}function hne(t,e,r,n){var i=fne(n,r,e);(i.length>17||(e["!rows"]||[])[n])&&Et(t,0,i)}var pne=xh,mne=xp;function gne(){}function xne(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=wY(t),r}function vne(t,e,r){r==null&&(r=xt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var i=1;i<3;++i)r.write_shift(1,0);return Lv({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),mR(t,r),r.slice(0,r.l)}function yne(t){var e=Yl(t);return[e]}function wne(t,e,r){return r==null&&(r=xt(8)),ph(e,r)}function bne(t){var e=mh(t);return[e]}function _ne(t,e,r){return r==null&&(r=xt(4)),gh(e,r)}function kne(t){var e=Yl(t),r=t.read_shift(1);return[e,r,"b"]}function Ene(t,e,r){return r==null&&(r=xt(9)),ph(e,r),r.write_shift(1,t.v?1:0),r}function Sne(t){var e=mh(t),r=t.read_shift(1);return[e,r,"b"]}function Cne(t,e,r){return r==null&&(r=xt(5)),gh(e,r),r.write_shift(1,t.v?1:0),r}function Tne(t){var e=Yl(t),r=t.read_shift(1);return[e,r,"e"]}function Nne(t,e,r){return r==null&&(r=xt(9)),ph(e,r),r.write_shift(1,t.v),r}function Ane(t){var e=mh(t),r=t.read_shift(1);return[e,r,"e"]}function Ine(t,e,r){return r==null&&(r=xt(8)),gh(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function Pne(t){var e=Yl(t),r=t.read_shift(4);return[e,r,"s"]}function Rne(t,e,r){return r==null&&(r=xt(12)),ph(e,r),r.write_shift(4,e.v),r}function Fne(t){var e=mh(t),r=t.read_shift(4);return[e,r,"s"]}function Lne(t,e,r){return r==null&&(r=xt(8)),gh(e,r),r.write_shift(4,e.v),r}function jne(t){var e=Yl(t),r=fo(t);return[e,r,"n"]}function Dne(t,e,r){return r==null&&(r=xt(16)),ph(e,r),Qf(t.v,r),r}function wF(t){var e=mh(t),r=fo(t);return[e,r,"n"]}function One(t,e,r){return r==null&&(r=xt(12)),gh(e,r),Qf(t.v,r),r}function Mne(t){var e=Yl(t),r=Mb(t);return[e,r,"n"]}function Bne(t,e,r){return r==null&&(r=xt(12)),ph(e,r),gR(t.v,r),r}function Vne(t){var e=mh(t),r=Mb(t);return[e,r,"n"]}function Une(t,e,r){return r==null&&(r=xt(8)),gh(e,r),gR(t.v,r),r}function zne(t){var e=Yl(t),r=jb(t);return[e,r,"is"]}function $ne(t){var e=Yl(t),r=mo(t);return[e,r,"str"]}function Hne(t,e,r){return r==null&&(r=xt(12+4*t.v.length)),ph(e,r),ga(t.v,r),r.length>r.l?r.slice(0,r.l):r}function qne(t){var e=mh(t),r=mo(t);return[e,r,"str"]}function Wne(t,e,r){return r==null&&(r=xt(8+4*t.v.length)),gh(e,r),ga(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Gne(t,e,r){var n=t.l+e,i=Yl(t);i.r=r["!row"];var s=t.read_shift(1),a=[i,s,"b"];if(r.cellFormula){t.l+=2;var o=B5(t,n-t.l,r);a[3]=lo(o,null,i,r.supbooks,r)}else t.l=n;return a}function Kne(t,e,r){var n=t.l+e,i=Yl(t);i.r=r["!row"];var s=t.read_shift(1),a=[i,s,"e"];if(r.cellFormula){t.l+=2;var o=B5(t,n-t.l,r);a[3]=lo(o,null,i,r.supbooks,r)}else t.l=n;return a}function Xne(t,e,r){var n=t.l+e,i=Yl(t);i.r=r["!row"];var s=fo(t),a=[i,s,"n"];if(r.cellFormula){t.l+=2;var o=B5(t,n-t.l,r);a[3]=lo(o,null,i,r.supbooks,r)}else t.l=n;return a}function Yne(t,e,r){var n=t.l+e,i=Yl(t);i.r=r["!row"];var s=mo(t),a=[i,s,"str"];if(r.cellFormula){t.l+=2;var o=B5(t,n-t.l,r);a[3]=lo(o,null,i,r.supbooks,r)}else t.l=n;return a}var Qne=xh,Jne=xp;function Zne(t,e){return e==null&&(e=xt(4)),e.write_shift(4,t),e}function eie(t,e){var r=t.l+e,n=xh(t),i=Db(t),s=mo(t),a=mo(t),o=mo(t);t.l=r;var l={rfx:n,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}function tie(t,e){var r=xt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));xp({s:Gi(t[0]),e:Gi(t[0])},r),Ob("rId"+e,r);var n=t[1].Target.indexOf("#"),i=n==-1?"":t[1].Target.slice(n+1);return ga(i||"",r),ga(t[1].Tooltip||"",r),ga("",r),r.slice(0,r.l)}function rie(){}function nie(t,e,r){var n=t.l+e,i=xR(t),s=t.read_shift(1),a=[i];if(a[2]=s,r.cellFormula){var o=Tre(t,n-t.l,r);a[1]=o}else t.l=n;return a}function iie(t,e,r){var n=t.l+e,i=xh(t),s=[i];if(r.cellFormula){var a=Are(t,n-t.l,r);s[1]=a,t.l=n}else t.l=n;return s}function sie(t,e,r){r==null&&(r=xt(18));var n=V5(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),r.write_shift(2,i),r}var bF=["left","right","top","bottom","header","footer"];function aie(t){var e={};return bF.forEach(function(r){e[r]=fo(t)}),e}function oie(t,e){return e==null&&(e=xt(48)),Ff(t),bF.forEach(function(r){Qf(t[r],e)}),e}function lie(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function cie(t,e,r){r==null&&(r=xt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function uie(t){var e=xt(24);return e.write_shift(4,4),e.write_shift(4,1),xp(t,e),e}function die(t,e){return e==null&&(e=xt(66)),e.write_shift(2,t.password?Hb(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function fie(){}function hie(){}function pie(t,e,r,n,i,s,a){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},p=!1,g=!1,m,w,y,k,T,O,P,V,Y,G=[];o.biff=12,o["!row"]=0;var L=0,N=!1,C=[],R={},A=o.supbooks||i.supbooks||[[]];if(A.sharedf=R,A.arrayf=C,A.SheetNames=i.SheetNames||i.Sheets.map(function(re){return re.name}),!o.supbooks&&(o.supbooks=A,i.Names))for(var F=0;F<i.Names.length;++F)A[0][F+1]=i.Names[F];var B=[],te=[],pe=!1;mg[16]={n:"BrtShortReal",f:wF};var Ee;if(pd(t,function(W,ne,Q){if(!g)switch(Q){case 148:c=W;break;case 0:m=W,o.sheetRows&&o.sheetRows<=m.r&&(g=!0),V=Cs(k=m.r),o["!row"]=m.r,(W.hidden||W.hpt||W.level!=null)&&(W.hpt&&(W.hpx=Y1(W.hpt)),te[W.r]=W);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(w={t:W[2]},W[2]){case"n":w.v=W[1];break;case"s":P=Lm[W[1]],w.v=P.t,w.r=P.r;break;case"b":w.v=!!W[1];break;case"e":w.v=W[1],o.cellText!==!1&&(w.w=md[w.v]);break;case"str":w.t="s",w.v=W[1];break;case"is":w.t="s",w.v=W[1].t;break}if((y=a.CellXf[W[0].iStyleRef])&&xF(w,y.numFmtId,null,o,s,a),T=W[0].c==-1?T+1:W[0].c,o.dense?(l[k]||(l[k]=[]),l[k][T]=w):l[Wi(T)+V]=w,o.cellFormula){for(N=!1,L=0;L<C.length;++L){var I=C[L];m.r>=I[0].s.r&&m.r<=I[0].e.r&&T>=I[0].s.c&&T<=I[0].e.c&&(w.F=Hr(I[0]),N=!0)}!N&&W.length>3&&(w.f=W[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>T&&(d.s.c=T),d.e.r<m.r&&(d.e.r=m.r),d.e.c<T&&(d.e.c=T),o.cellDates&&y&&w.t=="n"&&pp(Ar[y.numFmtId])){var H=kf(w.v);H&&(w.t="d",w.v=new Date(H.y,H.m-1,H.d,H.H,H.M,H.S,H.u))}Ee&&(Ee.type=="XLDAPR"&&(w.D=!0),Ee=void 0);break;case 1:case 12:if(!o.sheetStubs||p)break;w={t:"z",v:void 0},T=W[0].c==-1?T+1:W[0].c,o.dense?(l[k]||(l[k]=[]),l[k][T]=w):l[Wi(T)+V]=w,d.s.r>m.r&&(d.s.r=m.r),d.s.c>T&&(d.s.c=T),d.e.r<m.r&&(d.e.r=m.r),d.e.c<T&&(d.e.c=T),Ee&&(Ee.type=="XLDAPR"&&(w.D=!0),Ee=void 0);break;case 176:G.push(W);break;case 49:Ee=((o.xlmeta||{}).Cell||[])[W-1];break;case 494:var X=n["!id"][W.relId];for(X?(W.Target=X.Target,W.loc&&(W.Target+="#"+W.loc),W.Rel=X):W.relId==""&&(W.Target="#"+W.loc),k=W.rfx.s.r;k<=W.rfx.e.r;++k)for(T=W.rfx.s.c;T<=W.rfx.e.c;++T)o.dense?(l[k]||(l[k]=[]),l[k][T]||(l[k][T]={t:"z",v:void 0}),l[k][T].l=W):(O=Rr({c:T,r:k}),l[O]||(l[O]={t:"z",v:void 0}),l[O].l=W);break;case 426:if(!o.cellFormula)break;C.push(W),Y=o.dense?l[k][T]:l[Wi(T)+V],Y.f=lo(W[1],d,{r:m.r,c:T},A,o),Y.F=Hr(W[0]);break;case 427:if(!o.cellFormula)break;R[Rr(W[0].s)]=W[1],Y=o.dense?l[k][T]:l[Wi(T)+V],Y.f=lo(W[1],d,{r:m.r,c:T},A,o);break;case 60:if(!o.cellStyles)break;for(;W.e>=W.s;)B[W.e--]={width:W.w/256,hidden:!!(W.flags&1),level:W.level},pe||(pe=!0,qb(W.w/256)),S0(B[W.e+1]);break;case 161:l["!autofilter"]={ref:Hr(W)};break;case 476:l["!margins"]=W;break;case 147:i.Sheets[r]||(i.Sheets[r]={}),W.name&&(i.Sheets[r].CodeName=W.name),(W.above||W.left)&&(l["!outline"]={above:W.above,left:W.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),W.RTL&&(i.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:p=!0;break;case 36:p=!1;break;case 37:p=!0;break;case 38:p=!1;break;default:if(!ne.T){if(!p||o.WTF)throw new Error("Unexpected record 0x"+Q.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=Hr(c||d)),o.sheetRows&&l["!ref"]){var ve=Sn(l["!ref"]);o.sheetRows<=+ve.e.r&&(ve.e.r=o.sheetRows-1,ve.e.r>d.e.r&&(ve.e.r=d.e.r),ve.e.r<ve.s.r&&(ve.s.r=ve.e.r),ve.e.c>d.e.c&&(ve.e.c=d.e.c),ve.e.c<ve.s.c&&(ve.s.c=ve.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Hr(ve))}return G.length>0&&(l["!merges"]=G),B.length>0&&(l["!cols"]=B),te.length>0&&(l["!rows"]=te),l}function mie(t,e,r,n,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=Si(e),e.z=e.z||Ar[14],e.v=ea(Ei(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=U0(i.cellXfs,e,i),e.l&&s["!links"].push([Rr(l),e.l]),e.c&&s["!comments"].push([Rr(l),e.c]),e.t){case"s":case"str":return i.bookSST?(o=Yb(i.Strings,e.v,i.revStrings),l.t="s",l.v=o,a?Et(t,18,Lne(e,l)):Et(t,7,Rne(e,l))):(l.t="str",a?Et(t,17,Wne(e,l)):Et(t,6,Hne(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?Et(t,13,Une(e,l)):Et(t,2,Bne(e,l)):a?Et(t,16,One(e,l)):Et(t,5,Dne(e,l)),!0;case"b":return l.t="b",a?Et(t,15,Cne(e,l)):Et(t,4,Ene(e,l)),!0;case"e":return l.t="e",a?Et(t,14,Ine(e,l)):Et(t,3,Nne(e,l)),!0}return a?Et(t,12,_ne(e,l)):Et(t,1,wne(e,l)),!0}function gie(t,e,r,n){var i=Sn(e["!ref"]||"A1"),s,a="",o=[];Et(t,145);var l=Array.isArray(e),c=i.e.r;e["!rows"]&&(c=Math.max(i.e.r,e["!rows"].length-1));for(var d=i.s.r;d<=c;++d){a=Cs(d),hne(t,e,i,d);var p=!1;if(d<=i.e.r)for(var g=i.s.c;g<=i.e.c;++g){d===i.s.r&&(o[g]=Wi(g)),s=o[g]+a;var m=l?(e[d]||[])[g]:e[s];if(!m){p=!1;continue}p=mie(t,m,d,g,n,e,p)}}Et(t,146)}function xie(t,e){!e||!e["!merges"]||(Et(t,177,Zne(e["!merges"].length)),e["!merges"].forEach(function(r){Et(t,176,Jne(r))}),Et(t,178))}function vie(t,e){!e||!e["!cols"]||(Et(t,390),e["!cols"].forEach(function(r,n){r&&Et(t,60,sie(n,r))}),Et(t,391))}function yie(t,e){!e||!e["!ref"]||(Et(t,648),Et(t,649,uie(Sn(e["!ref"]))),Et(t,650))}function wie(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var i=Kn(r,-1,n[1].Target.replace(/#.*$/,""),an.HLINK);Et(t,494,tie(n,i))}}),delete e["!links"]}function bie(t,e,r,n){if(e["!comments"].length>0){var i=Kn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",an.VML);Et(t,551,Ob("rId"+i)),e["!legacy"]=i}}function _ie(t,e,r,n){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Hr(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,o=Wo(s);o.s.r==o.e.r&&(o.e.r=Wo(e["!ref"]).e.r,s=Hr(o));for(var l=0;l<a.length;++l){var c=a[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Et(t,161,xp(Sn(s))),Et(t,162)}}function kie(t,e,r){Et(t,133),Et(t,137,cie(e,r)),Et(t,138),Et(t,134)}function Eie(t,e){e["!protect"]&&Et(t,535,die(e["!protect"]))}function Sie(t,e,r,n){var i=qo(),s=r.SheetNames[t],a=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=Sn(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],Et(i,129),(r.vbaraw||a["!outline"])&&Et(i,147,vne(o,a["!outline"])),Et(i,148,mne(l)),kie(i,a,r.Workbook),vie(i,a),gie(i,a,t,e),Eie(i,a),_ie(i,a,r,t),xie(i,a),wie(i,a,n),a["!margins"]&&Et(i,476,oie(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&yie(i,a),bie(i,a,t,n),Et(i,130),i.end()}function Cie(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var a=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(e[+a[1]]=r?+a[2]:a[2])});var i=En((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,i,n]}function Tie(t,e,r,n,i,s){var a=s||{"!type":"chart"};if(!t)return s;var o=0,l=0,c="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(p){var g=Cie(p);d.s.r=d.s.c=0,d.e.c=o,c=Wi(o),g[0].forEach(function(m,w){a[c+Cs(w)]={t:"n",v:m,z:g[1]},l=w}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(a["!ref"]=Hr(d)),a}function Nie(t,e,r,n,i){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a,o=t.match(vF);return o&&Qb(o[0],s,i,r),(a=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=a[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function Aie(t,e){t.l+=10;var r=mo(t);return{name:r}}function Iie(t,e,r,n,i){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a=!1;return pd(t,function(l,c,d){switch(d){case 550:s["!rel"]=l;break;case 651:i.Sheets[r]||(i.Sheets[r]={}),l.name&&(i.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!a||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var Jb=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Pie=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Rie=[],Fie=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function fE(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],i=0;i!=e.length;++i){var s=e[i];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=wi(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function hE(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=wi(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function _F(t){hE(t.WBProps,Jb),hE(t.CalcPr,Fie),fE(t.WBView,Pie),fE(t.Sheets,Rie),k1.date1904=wi(t.WBProps.date1904)}function Lie(t){return!t.Workbook||!t.Workbook.WBProps?"false":wi(t.Workbook.WBProps.date1904)?"true":"false"}var jie="][*?/\\".split("");function kF(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return jie.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Die(t,e,r){t.forEach(function(n,i){kF(n);for(var s=0;s<i;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var a=e&&e[i]&&e[i].CodeName||n;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function Oie(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];Die(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)Lre(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var Mie=/<\w+:workbook/;function Bie(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,i="xmlns",s={},a=0;if(t.replace(xo,function(l,c){var d=Fr(l);switch(gu(d[0])){case"<?xml":break;case"<workbook":l.match(Mie)&&(i="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[i];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":Jb.forEach(function(p){if(d[p[0]]!=null)switch(p[2]){case"bool":r.WBProps[p[0]]=wi(d[p[0]]);break;case"int":r.WBProps[p[0]]=parseInt(d[p[0]],10);break;default:r.WBProps[p[0]]=d[p[0]]}}),d.codeName&&(r.WBProps.CodeName=ni(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=En(ni(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=ni(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),wi(d.hidden||"0")&&(s.Hidden=!0),a=c+l.length;break;case"</definedName>":s.Ref=En(ni(t.slice(a,c))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),hh.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return _F(r),r}function EF(t){var e=[Ts];e[e.length]=Vt("workbook",null,{xmlns:hh[0],"xmlns:r":Ys.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(Jb.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Vt("workbookPr",null,n);var i=t.Workbook&&t.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var a={name:Qn(t.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=Vt("sheet",null,a)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Vt("definedName",Qn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function Vie(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=rw(t),r.name=mo(t),r}function Uie(t,e){return e||(e=xt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),Ob(t.strRelID,e),ga(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function zie(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var i=e>8?mo(t):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function $ie(t,e){e||(e=xt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),mR(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Hie(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function qie(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var i=t.read_shift(4),s=bY(t),a=Nre(t,0,r),o=Db(t);t.l=n;var l={Name:s,Ptg:a};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function Wie(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],i=!1;e||(e={}),e.biff=12;var s=[],a=[[]];return a.SheetNames=[],a.XTI=[],mg[16]={n:"BrtFRTArchID$",f:Hie},pd(t,function(l,c,d){switch(d){case 156:a.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=lo(l.Ptg,null,null,a,e),delete e.SID,delete l.Ptg,s.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([d,l]):a[0]=[d,l],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(l),a.XTI=a.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),i=!0;break;case 36:n.pop(),i=!1;break;case 37:n.push(d),i=!0;break;case 38:n.pop(),i=!1;break;case 16:break;default:if(!c.T){if(!i||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),_F(r),r.Names=s,r.supbooks=a,r}function Gie(t,e){Et(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,i={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};Et(t,156,Uie(i))}Et(t,144)}function Kie(t,e){e||(e=xt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return ga("SheetJS",e),ga(Tv.version,e),ga(Tv.version,e),ga("7262",e),e.length>e.l?e.slice(0,e.l):e}function Xie(t,e){e||(e=xt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function Yie(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,i=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&i==-1?i=n:r[n].Hidden==1&&s==-1&&(s=n);s>i||(Et(t,135),Et(t,158,Xie(i)),Et(t,136))}}function Qie(t,e){var r=qo();return Et(r,131),Et(r,128,Kie()),Et(r,153,$ie(t.Workbook&&t.Workbook.WBProps||null)),Yie(r,t),Gie(r,t),Et(r,132),r.end()}function Jie(t,e,r){return e.slice(-4)===".bin"?Wie(t,r):Bie(t,r)}function Zie(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?pie(t,n,r,i,s,a,o):qre(t,n,r,i,s,a,o)}function ese(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?Iie(t,n,r,i,s):Nie(t,n,r,i,s)}function tse(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?nte():ite()}function rse(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?tte():rte()}function nse(t,e,r,n){return e.slice(-4)===".bin"?JZ(t,r,n):VZ(t,r,n)}function ise(t,e,r){return iF(t,r)}function sse(t,e,r){return e.slice(-4)===".bin"?sZ(t,r):rZ(t,r)}function ase(t,e,r){return e.slice(-4)===".bin"?Yee(t,r):Uee(t,r)}function ose(t,e,r){return e.slice(-4)===".bin"?Mee(t):Dee(t)}function lse(t,e,r,n){return r.slice(-4)===".bin"?Bee(t,e,r,n):void 0}function cse(t,e,r){return e.slice(-4)===".bin"?Fee(t,e,r):jee(t,e,r)}function use(t,e,r){return(e.slice(-4)===".bin"?Qie:EF)(t)}function dse(t,e,r,n,i){return(e.slice(-4)===".bin"?Sie:yF)(t,r,n,i)}function fse(t,e,r){return(e.slice(-4)===".bin"?lee:rF)(t,r)}function hse(t,e,r){return(e.slice(-4)===".bin"?lZ:KR)(t,r)}function pse(t,e,r){return(e.slice(-4)===".bin"?Qee:oF)(t)}function mse(t){return(t.slice(-4)===".bin"?Lee:sF)()}var SF=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,CF=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function gc(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var i=t.match(SF),s,a,o,l;if(i)for(l=0;l!=i.length;++l)s=i[l].match(CF),(a=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(a+1),n[o]=s[2].slice(1,s[2].length-1));return n}function gse(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(SF),i,s,a,o;if(n)for(o=0;o!=n.length;++o)i=n[o].match(CF),(s=i[1].indexOf(":"))===-1?r[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?a="xmlns"+i[1].slice(6):a=i[1].slice(s+1),r[a]=i[2].slice(1,i[2].length-1));return r}var Dm;function xse(t,e){var r=Dm[t]||En(t);return r==="General"?Xf(e):Gl(r,e)}function vse(t,e,r,n){var i=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=wi(n);break;case"i2":case"int":i=parseInt(n,10);break;case"r4":case"float":i=parseFloat(n);break;case"date":case"dateTime.tz":i=Ei(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[En(e)]=i}function yse(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||md[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ag(t.v):t.w=Xf(t.v):t.w=xse(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=Dm[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&pp(n)){var i=kf(t.v);i&&(t.t="d",t.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(s){if(r.WTF)throw s}}}function wse(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=RZ[n.Pattern]||n.Pattern)}t[e.ID]=e}function bse(t,e,r,n,i,s,a,o,l,c){var d="General",p=n.StyleID,g={};c=c||{};var m=[],w=0;for(p===void 0&&o&&(p=o.StyleID),p===void 0&&a&&(p=a.StyleID);s[p]!==void 0&&(s[p].nf&&(d=s[p].nf),s[p].Interior&&m.push(s[p].Interior),!!s[p].Parent);)p=s[p].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=wi(t);break;case"String":n.t="s",n.r=I9(En(t)),n.v=t.indexOf("<")>-1?En(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(Ei(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=En(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=wR[t],c.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=I9(e||t));break}if(yse(n,d,c),c.cellFormula!==!1)if(n.Formula){var y=En(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=_1(y,i),delete n.Formula,n.ArrayRange=="RC"?n.F=_1("RC:RC",i):n.ArrayRange&&(n.F=_1(n.ArrayRange,i),l.push([Sn(n.F),n.F]))}else for(w=0;w<l.length;++w)i.r>=l[w][0].s.r&&i.r<=l[w][0].e.r&&i.c>=l[w][0].s.c&&i.c<=l[w][0].e.c&&(n.F=l[w][1]);c.cellStyles&&(m.forEach(function(k){!g.patternType&&k.patternType&&(g.patternType=k.patternType)}),n.s=g),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function _se(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function E4(t,e){var r=e||{};mp();var n=xm(Ib(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=ni(n));var i=n.slice(0,1024).toLowerCase(),s=!1;if(i=i.replace(/".*?"/g,""),(i.indexOf(">")&1023)>Math.min(i.indexOf(",")&1023,i.indexOf(";")&1023)){var a=Si(r);return a.type="string",X1.to_workbook(n,a)}if(i.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(it){i.indexOf("<"+it)>=0&&(s=!0)}),s)return oae(n,r);Dm={"General Number":"General","General Date":Ar[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Ar[15],"Short Date":Ar[14],"Long Time":Ar[19],"Medium Time":Ar[18],"Short Time":Ar[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Ar[2],Standard:Ar[4],Percent:Ar[10],Scientific:Ar[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,d={},p=[],g=r.dense?[]:{},m="",w={},y={},k=gc('<Data ss:Type="String">'),T=0,O=0,P=0,V={s:{r:2e6,c:2e6},e:{r:0,c:0}},Y={},G={},L="",N=0,C=[],R={},A={},F=0,B=[],te=[],pe={},Ee=[],ve,re=!1,W=[],ne=[],Q={},I=0,H=0,X={Sheets:[],WBProps:{date1904:!1}},J={};cg.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ue="";o=cg.exec(n);)switch(o[3]=(ue=o[3]).toLowerCase()){case"data":if(ue=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?bse(n.slice(T,o.index),L,k,l[l.length-1][0]=="comment"?pe:w,{c:O,r:P},Y,Ee[O],y,W,r):(L="",k=gc(o[0]),T=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(te.length>0&&(w.c=te),(!r.sheetRows||r.sheetRows>P)&&w.v!==void 0&&(r.dense?(g[P]||(g[P]=[]),g[P][O]=w):g[Wi(O)+Cs(P)]=w),w.HRef&&(w.l={Target:En(w.HRef)},w.HRefScreenTip&&(w.l.Tooltip=w.HRefScreenTip),delete w.HRef,delete w.HRefScreenTip),(w.MergeAcross||w.MergeDown)&&(I=O+(parseInt(w.MergeAcross,10)|0),H=P+(parseInt(w.MergeDown,10)|0),C.push({s:{c:O,r:P},e:{c:I,r:H}})),!r.sheetStubs)w.MergeAcross?O=I+1:++O;else if(w.MergeAcross||w.MergeDown){for(var we=O;we<=I;++we)for(var fe=P;fe<=H;++fe)(we>O||fe>P)&&(r.dense?(g[fe]||(g[fe]=[]),g[fe][we]={t:"z"}):g[Wi(we)+Cs(fe)]={t:"z"});O=I+1}else++O;else w=gse(o[0]),w.Index&&(O=+w.Index-1),O<V.s.c&&(V.s.c=O),O>V.e.c&&(V.e.c=O),o[0].slice(-2)==="/>"&&++O,te=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(P<V.s.r&&(V.s.r=P),P>V.e.r&&(V.e.r=P),o[0].slice(-2)==="/>"&&(y=gc(o[0]),y.Index&&(P=+y.Index-1)),O=0,++P):(y=gc(o[0]),y.Index&&(P=+y.Index-1),Q={},(y.AutoFitHeight=="0"||y.Height)&&(Q.hpx=parseInt(y.Height,10),Q.hpt=pg(Q.hpx),ne[P]=Q),y.Hidden=="1"&&(Q.hidden=!0,ne[P]=Q));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));p.push(m),V.s.r<=V.e.r&&V.s.c<=V.e.c&&(g["!ref"]=Hr(V),r.sheetRows&&r.sheetRows<=V.e.r&&(g["!fullref"]=g["!ref"],V.e.r=r.sheetRows-1,g["!ref"]=Hr(V))),C.length&&(g["!merges"]=C),Ee.length>0&&(g["!cols"]=Ee),ne.length>0&&(g["!rows"]=ne),d[m]=g}else V={s:{r:2e6,c:2e6},e:{r:0,c:0}},P=O=0,l.push([o[3],!1]),c=gc(o[0]),m=En(c.Name),g=r.dense?[]:{},C=[],W=[],ne=[],J={name:m,Hidden:0},X.Sheets.push(J);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),Ee=[],re=!1}break;case"style":o[1]==="/"?wse(Y,G,r):G=gc(o[0]);break;case"numberformat":G.nf=En(gc(o[0]).Format||"General"),Dm[G.nf]&&(G.nf=Dm[G.nf]);for(var me=0;me!=392&&Ar[me]!=G.nf;++me);if(me==392){for(me=57;me!=392;++me)if(Ar[me]==null){Qu(G.nf,me);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(ve=gc(o[0]),ve.Hidden&&(ve.hidden=!0,delete ve.Hidden),ve.Width&&(ve.wpx=parseInt(ve.Width,10)),!re&&ve.wpx>10){re=!0,co=eF;for(var be=0;be<Ee.length;++be)Ee[be]&&S0(Ee[be])}re&&S0(ve),Ee[ve.Index-1||Ee.length]=ve;for(var Le=0;Le<+ve.Span;++Le)Ee[Ee.length]=Si(ve);break;case"namedrange":if(o[1]==="/")break;X.Names||(X.Names=[]);var ee=Fr(o[0]),Be={Name:ee.Name,Ref:_1(ee.RefersTo.slice(1),{r:0,c:0})};X.Sheets.length>0&&(Be.Sheet=X.Sheets.length-1),X.Names.push(Be);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?L+=n.slice(N,o.index):N=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;G.Interior=gc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?WY(R,ue,n.slice(F,o.index)):F=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));_se(pe),te.push(pe)}else l.push([o[3],!1]),c=gc(o[0]),pe={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Re=gc(o[0]);g["!autofilter"]={ref:_1(Re.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return vE(n,r);var ae=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ae=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ae=!1}break;case"excelworkbook":switch(o[3]){case"date1904":X.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ae=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:ae=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(F,o.index)){case"SheetHidden":J.Hidden=1;break;case"SheetVeryHidden":J.Hidden=2;break}else F=o.index+o[0].length;break;case"header":g["!margins"]||Ff(g["!margins"]={},"xlml"),isNaN(+Fr(o[0]).Margin)||(g["!margins"].header=+Fr(o[0]).Margin);break;case"footer":g["!margins"]||Ff(g["!margins"]={},"xlml"),isNaN(+Fr(o[0]).Margin)||(g["!margins"].footer=+Fr(o[0]).Margin);break;case"pagemargins":var $e=Fr(o[0]);g["!margins"]||Ff(g["!margins"]={},"xlml"),isNaN(+$e.Top)||(g["!margins"].top=+$e.Top),isNaN(+$e.Left)||(g["!margins"].left=+$e.Left),isNaN(+$e.Right)||(g["!margins"].right=+$e.Right),isNaN(+$e.Bottom)||(g["!margins"].bottom=+$e.Bottom);break;case"displayrighttoleft":X.Views||(X.Views=[]),X.Views[0]||(X.Views[0]={}),X.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":g["!outline"]||(g["!outline"]={}),g["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":g["!outline"]||(g["!outline"]={}),g["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ae=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ae=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ae=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ae=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ae=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ae=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ae=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ae=!1}break;case"smarttags":break;default:ae=!1;break}if(ae||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?vse(A,ue,B,n.slice(F,o.index)):(B=o,F=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var qe={};return!r.bookSheets&&!r.bookProps&&(qe.Sheets=d),qe.SheetNames=p,qe.Workbook=X,qe.SSF=Si(Ar),qe.Props=R,qe.Custprops=A,qe}function cw(t,e){switch(e_(e=e||{}),e.type||"base64"){case"base64":return E4(yl(t),e);case"binary":case"buffer":case"file":return E4(t,e);case"array":return E4(B0(t),e)}}function kse(t,e){var r=[];return t.Props&&r.push(GY(t.Props,e)),t.Custprops&&r.push(KY(t.Props,t.Custprops)),r.join("")}function Ese(){return""}function Sse(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,i){var s=[];s.push(Vt("NumberFormat",null,{"ss:Format":Qn(Ar[n.numFmtId])}));var a={"ss:ID":"s"+(21+i)};r.push(Vt("Style",s.join(""),a))}),Vt("Styles",r.join(""))}function TF(t){return Vt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+Kb(t.Ref,{r:0,c:0})})}function Cse(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var i=e[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||r.push(TF(i)))}return Vt("Names",r.join(""))}function Tse(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(TF(o)))}return s.join("")}function Nse(t,e,r,n){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(Vt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(Vt("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(Vt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)i.push(Vt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(ja("ProtectContents","True")),t["!protect"].objects&&i.push(ja("ProtectObjects","True")),t["!protect"].scenarios&&i.push(ja("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(ja("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(ja("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){t["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":Vt("WorksheetOptions",i.join(""),{xmlns:ul.x})}function Ase(t){return t.map(function(e){var r=YX(e.t||""),n=Vt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Vt("Comment",n,{"ss:Author":e.a})}).join("")}function Ise(t,e,r,n,i,s,a){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+Qn(Kb(t.f,a))),t.F&&t.F.slice(0,e.length)==e){var l=Gi(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=Qn(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=Qn(t.l.Tooltip))),r["!merges"])for(var c=r["!merges"],d=0;d!=c.length;++d)c[d].s.c!=a.c||c[d].s.r!=a.r||(c[d].e.c>c[d].s.c&&(o["ss:MergeAcross"]=c[d].e.c-c[d].s.c),c[d].e.r>c[d].s.r&&(o["ss:MergeDown"]=c[d].e.r-c[d].s.r));var p="",g="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":p="Number",g=String(t.v);break;case"b":p="Boolean",g=t.v?"1":"0";break;case"e":p="Error",g=md[t.v];break;case"d":p="DateTime",g=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Ar[14]);break;case"s":p="String",g=XX(t.v||"");break}var m=U0(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+m),o["ss:Index"]=a.c+1;var w=t.v!=null?g:"",y=t.t=="z"?"":'<Data ss:Type="'+p+'">'+w+"</Data>";return(t.c||[]).length>0&&(y+=Ase(t.c)),Vt("Cell",y,o)}function Pse(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Y1(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Rse(t,e,r,n){if(!t["!ref"])return"";var i=Sn(t["!ref"]),s=t["!merges"]||[],a=0,o=[];t["!cols"]&&t["!cols"].forEach(function(k,T){S0(k);var O=!!k.width,P=V5(T,k),V={"ss:Index":T+1};O&&(V["ss:Width"]=fg(P.width)),k.hidden&&(V["ss:Hidden"]="1"),o.push(Vt("Column",null,V))});for(var l=Array.isArray(t),c=i.s.r;c<=i.e.r;++c){for(var d=[Pse(c,(t["!rows"]||[])[c])],p=i.s.c;p<=i.e.c;++p){var g=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>p)&&!(s[a].s.r>c)&&!(s[a].e.c<p)&&!(s[a].e.r<c)){(s[a].s.c!=p||s[a].s.r!=c)&&(g=!0);break}if(!g){var m={r:c,c:p},w=Rr(m),y=l?(t[c]||[])[p]:t[w];d.push(Ise(y,w,t,e,r,n,m))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function Fse(t,e,r){var n=[],i=r.SheetNames[t],s=r.Sheets[i],a=s?Tse(s,e,t,r):"";return a.length>0&&n.push("<Names>"+a+"</Names>"),a=s?Rse(s,e,t,r):"",a.length>0&&n.push("<Table>"+a+"</Table>"),n.push(Nse(s,e,t,r)),n.join("")}function Lse(t,e){e||(e={}),t.SSF||(t.SSF=Si(Ar)),t.SSF&&(mp(),F5(t.SSF),e.revssf=j5(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],U0(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(kse(t,e)),r.push(Ese()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Vt("Worksheet",Fse(n,e,t),{"ss:Name":Qn(t.SheetNames[n])}));return r[2]=Sse(t,e),r[3]=Cse(t),Ts+Vt("Workbook",r.join(""),{xmlns:ul.ss,"xmlns:o":ul.o,"xmlns:x":ul.x,"xmlns:ss":ul.ss,"xmlns:dt":ul.dt,"xmlns:html":ul.html})}function jse(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=CY(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=TY(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var Dse=[60,1084,2066,2165,2175];function Ose(t,e,r,n,i){var s=n,a=[],o=r.slice(r.l,r.l+s);if(i&&i.enc&&i.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:i.enc.insitu(o)}a.push(o),r.l+=s;for(var l=qu(r,r.l),c=uw[l],d=0;c!=null&&Dse.indexOf(l)>-1;)s=qu(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+s),a.push(o),r.l+=4+s,c=uw[l=qu(r,r.l)];var p=ma(a);Fa(p,0);var g=0;p.lens=[];for(var m=0;m<a.length;++m)p.lens.push(g),g+=a[m].length;if(p.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+p.length+" < "+n;return e.f(p,p.length,i)}function Wc(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Ar[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||md[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ag(t.v):t.w=Xf(t.v):t.w=Gl(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&pp(Ar[n]||String(n))){var i=kf(t.v);i&&(t.t="d",t.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function ux(t,e,r){return{v:t,ixfe:e,t:r}}function Mse(t,e){var r={opts:{}},n={},i=e.dense?[]:{},s={},a={},o=null,l=[],c="",d={},p,g="",m,w,y,k,T={},O=[],P,V,Y=[],G=[],L={Sheets:[],WBProps:{date1904:!1},Views:[{}]},N={},C=function(mt){return mt<8?If[mt]:mt<64&&G[mt-8]||If[mt]},R=function(mt,_t,Xt){var Kt=_t.XF.data;if(!(!Kt||!Kt.patternType||!Xt||!Xt.cellStyles)){_t.s={},_t.s.patternType=Kt.patternType;var Ut;(Ut=dg(C(Kt.icvFore)))&&(_t.s.fgColor={rgb:Ut}),(Ut=dg(C(Kt.icvBack)))&&(_t.s.bgColor={rgb:Ut})}},A=function(mt,_t,Xt){if(!(Q>1)&&!(Xt.sheetRows&&mt.r>=Xt.sheetRows)){if(Xt.cellStyles&&_t.XF&&_t.XF.data&&R(mt,_t,Xt),delete _t.ixfe,delete _t.XF,p=mt,g=Rr(mt),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),mt.r<a.s.r&&(a.s.r=mt.r),mt.c<a.s.c&&(a.s.c=mt.c),mt.r+1>a.e.r&&(a.e.r=mt.r+1),mt.c+1>a.e.c&&(a.e.c=mt.c+1),Xt.cellFormula&&_t.f){for(var Kt=0;Kt<O.length;++Kt)if(!(O[Kt][0].s.c>mt.c||O[Kt][0].s.r>mt.r)&&!(O[Kt][0].e.c<mt.c||O[Kt][0].e.r<mt.r)){_t.F=Hr(O[Kt][0]),(O[Kt][0].s.c!=mt.c||O[Kt][0].s.r!=mt.r)&&delete _t.f,_t.f&&(_t.f=""+lo(O[Kt][1],a,mt,W,F));break}}Xt.dense?(i[mt.r]||(i[mt.r]=[]),i[mt.r][mt.c]=_t):i[g]=_t}},F={enc:!1,sbcch:0,snames:[],sharedf:T,arrayf:O,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(F.password=e.password);var B,te=[],pe=[],Ee=[],ve=[],re=!1,W=[];W.SheetNames=F.snames,W.sharedf=F.sharedf,W.arrayf=F.arrayf,W.names=[],W.XTI=[];var ne=0,Q=0,I=0,H=[],X=[],J;F.codepage=1200,yc(1200);for(var ue=!1;t.l<t.length-1;){var we=t.l,fe=t.read_shift(2);if(fe===0&&ne===10)break;var me=t.l===t.length?0:t.read_shift(2),be=uw[fe];if(be&&be.f){if(e.bookSheets&&ne===133&&fe!==133)break;if(ne=fe,be.r===2||be.r==12){var Le=t.read_shift(2);if(me-=2,!F.enc&&Le!==fe&&((Le&255)<<8|Le>>8)!==fe)throw new Error("rt mismatch: "+Le+"!="+fe);be.r==12&&(t.l+=10,me-=10)}var ee={};if(fe===10?ee=be.f(t,me,F):ee=Ose(fe,be,t,me,F),Q==0&&[9,521,1033,2057].indexOf(ne)===-1)continue;switch(fe){case 34:r.opts.Date1904=L.WBProps.date1904=ee;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(F.enc||(t.l=0),F.enc=ee,!e.password)throw new Error("File is password-protected");if(ee.valid==null)throw new Error("Encryption scheme unsupported");if(!ee.valid)throw new Error("Password is incorrect");break;case 92:F.lastuser=ee;break;case 66:var Be=Number(ee);switch(Be){case 21010:Be=1200;break;case 32768:Be=1e4;break;case 32769:Be=1252;break}yc(F.codepage=Be),ue=!0;break;case 317:F.rrtabid=ee;break;case 25:F.winlocked=ee;break;case 439:r.opts.RefreshAll=ee;break;case 12:r.opts.CalcCount=ee;break;case 16:r.opts.CalcDelta=ee;break;case 17:r.opts.CalcIter=ee;break;case 13:r.opts.CalcMode=ee;break;case 14:r.opts.CalcPrecision=ee;break;case 95:r.opts.CalcSaveRecalc=ee;break;case 15:F.CalcRefMode=ee;break;case 2211:r.opts.FullCalc=ee;break;case 129:ee.fDialog&&(i["!type"]="dialog"),ee.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),ee.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 224:Y.push(ee);break;case 430:W.push([ee]),W[W.length-1].XTI=[];break;case 35:case 547:W[W.length-1].push(ee);break;case 24:case 536:J={Name:ee.Name,Ref:lo(ee.rgce,a,null,W,F)},ee.itab>0&&(J.Sheet=ee.itab-1),W.names.push(J),W[0]||(W[0]=[],W[0].XTI=[]),W[W.length-1].push(ee),ee.Name=="_xlnm._FilterDatabase"&&ee.itab>0&&ee.rgce&&ee.rgce[0]&&ee.rgce[0][0]&&ee.rgce[0][0][0]=="PtgArea3d"&&(X[ee.itab-1]={ref:Hr(ee.rgce[0][0][1][2])});break;case 22:F.ExternCount=ee;break;case 23:W.length==0&&(W[0]=[],W[0].XTI=[]),W[W.length-1].XTI=W[W.length-1].XTI.concat(ee),W.XTI=W.XTI.concat(ee);break;case 2196:if(F.biff<8)break;J!=null&&(J.Comment=ee[1]);break;case 18:i["!protect"]=ee;break;case 19:ee!==0&&F.WTF&&console.error("Password verifier: "+ee);break;case 133:s[ee.pos]=ee,F.snames.push(ee.name);break;case 10:{if(--Q)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,i["!ref"]=Hr(a),e.sheetRows&&e.sheetRows<=a.e.r){var Re=a.e.r;a.e.r=e.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=Hr(a),a.e.r=Re}a.e.r++,a.e.c++}te.length>0&&(i["!merges"]=te),pe.length>0&&(i["!objects"]=pe),Ee.length>0&&(i["!cols"]=Ee),ve.length>0&&(i["!rows"]=ve),L.Sheets.push(N)}c===""?d=i:n[c]=i,i=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(F.biff===8&&(F.biff={9:2,521:3,1033:4}[fe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ee.BIFFVer]||8),F.biffguess=ee.BIFFVer==0,ee.BIFFVer==0&&ee.dt==4096&&(F.biff=5,ue=!0,yc(F.codepage=28591)),F.biff==8&&ee.BIFFVer==0&&ee.dt==16&&(F.biff=2),Q++)break;if(i=e.dense?[]:{},F.biff<8&&!ue&&(ue=!0,yc(F.codepage=e.codepage||1252)),F.biff<5||ee.BIFFVer==0&&ee.dt==4096){c===""&&(c="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var ae={pos:t.l-me,name:c};s[ae.pos]=ae,F.snames.push(c)}else c=(s[we]||{name:""}).name;ee.dt==32&&(i["!type"]="chart"),ee.dt==64&&(i["!type"]="macro"),te=[],pe=[],F.arrayf=O=[],Ee=[],ve=[],re=!1,N={Hidden:(s[we]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:i["!type"]=="chart"&&(e.dense?(i[ee.r]||[])[ee.c]:i[Rr({c:ee.c,r:ee.r})])&&++ee.c,P={ixfe:ee.ixfe,XF:Y[ee.ixfe]||{},v:ee.val,t:"n"},I>0&&(P.z=H[P.ixfe>>8&63]),Wc(P,e,r.opts.Date1904),A({c:ee.c,r:ee.r},P,e);break;case 5:case 517:P={ixfe:ee.ixfe,XF:Y[ee.ixfe],v:ee.val,t:ee.t},I>0&&(P.z=H[P.ixfe>>8&63]),Wc(P,e,r.opts.Date1904),A({c:ee.c,r:ee.r},P,e);break;case 638:P={ixfe:ee.ixfe,XF:Y[ee.ixfe],v:ee.rknum,t:"n"},I>0&&(P.z=H[P.ixfe>>8&63]),Wc(P,e,r.opts.Date1904),A({c:ee.c,r:ee.r},P,e);break;case 189:for(var $e=ee.c;$e<=ee.C;++$e){var qe=ee.rkrec[$e-ee.c][0];P={ixfe:qe,XF:Y[qe],v:ee.rkrec[$e-ee.c][1],t:"n"},I>0&&(P.z=H[P.ixfe>>8&63]),Wc(P,e,r.opts.Date1904),A({c:$e,r:ee.r},P,e)}break;case 6:case 518:case 1030:{if(ee.val=="String"){o=ee;break}if(P=ux(ee.val,ee.cell.ixfe,ee.tt),P.XF=Y[P.ixfe],e.cellFormula){var it=ee.formula;if(it&&it[0]&&it[0][0]&&it[0][0][0]=="PtgExp"){var oe=it[0][0][1][0],je=it[0][0][1][1],Ge=Rr({r:oe,c:je});T[Ge]?P.f=""+lo(ee.formula,a,ee.cell,W,F):P.F=((e.dense?(i[oe]||[])[je]:i[Ge])||{}).F}else P.f=""+lo(ee.formula,a,ee.cell,W,F)}I>0&&(P.z=H[P.ixfe>>8&63]),Wc(P,e,r.opts.Date1904),A(ee.cell,P,e),o=ee}break;case 7:case 519:if(o)o.val=ee,P=ux(ee,o.cell.ixfe,"s"),P.XF=Y[P.ixfe],e.cellFormula&&(P.f=""+lo(o.formula,a,o.cell,W,F)),I>0&&(P.z=H[P.ixfe>>8&63]),Wc(P,e,r.opts.Date1904),A(o.cell,P,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{O.push(ee);var Tt=Rr(ee[0].s);if(m=e.dense?(i[ee[0].s.r]||[])[ee[0].s.c]:i[Tt],e.cellFormula&&m){if(!o||!Tt||!m)break;m.f=""+lo(ee[1],a,ee[0],W,F),m.F=Hr(ee[0])}}break;case 1212:{if(!e.cellFormula)break;if(g){if(!o)break;T[Rr(o.cell)]=ee[0],m=e.dense?(i[o.cell.r]||[])[o.cell.c]:i[Rr(o.cell)],(m||{}).f=""+lo(ee[0],a,p,W,F)}}break;case 253:P=ux(l[ee.isst].t,ee.ixfe,"s"),l[ee.isst].h&&(P.h=l[ee.isst].h),P.XF=Y[P.ixfe],I>0&&(P.z=H[P.ixfe>>8&63]),Wc(P,e,r.opts.Date1904),A({c:ee.c,r:ee.r},P,e);break;case 513:e.sheetStubs&&(P={ixfe:ee.ixfe,XF:Y[ee.ixfe],t:"z"},I>0&&(P.z=H[P.ixfe>>8&63]),Wc(P,e,r.opts.Date1904),A({c:ee.c,r:ee.r},P,e));break;case 190:if(e.sheetStubs)for(var Pe=ee.c;Pe<=ee.C;++Pe){var Ke=ee.ixfe[Pe-ee.c];P={ixfe:Ke,XF:Y[Ke],t:"z"},I>0&&(P.z=H[P.ixfe>>8&63]),Wc(P,e,r.opts.Date1904),A({c:Pe,r:ee.r},P,e)}break;case 214:case 516:case 4:P=ux(ee.val,ee.ixfe,"s"),P.XF=Y[P.ixfe],I>0&&(P.z=H[P.ixfe>>8&63]),Wc(P,e,r.opts.Date1904),A({c:ee.c,r:ee.r},P,e);break;case 0:case 512:Q===1&&(a=ee);break;case 252:l=ee;break;case 1054:if(F.biff==4){H[I++]=ee[1];for(var ot=0;ot<I+163&&Ar[ot]!=ee[1];++ot);ot>=163&&Qu(ee[1],I+163)}else Qu(ee[1],ee[0]);break;case 30:{H[I++]=ee;for(var We=0;We<I+163&&Ar[We]!=ee;++We);We>=163&&Qu(ee,I+163)}break;case 229:te=te.concat(ee);break;case 93:pe[ee.cmo[0]]=F.lastobj=ee;break;case 438:F.lastobj.TxO=ee;break;case 127:F.lastobj.ImData=ee;break;case 440:for(k=ee[0].s.r;k<=ee[0].e.r;++k)for(y=ee[0].s.c;y<=ee[0].e.c;++y)m=e.dense?(i[k]||[])[y]:i[Rr({c:y,r:k})],m&&(m.l=ee[1]);break;case 2048:for(k=ee[0].s.r;k<=ee[0].e.r;++k)for(y=ee[0].s.c;y<=ee[0].e.c;++y)m=e.dense?(i[k]||[])[y]:i[Rr({c:y,r:k})],m&&m.l&&(m.l.Tooltip=ee[1]);break;case 28:{if(F.biff<=5&&F.biff>=2)break;m=e.dense?(i[ee[0].r]||[])[ee[0].c]:i[Rr(ee[0])];var Lt=pe[ee[2]];m||(e.dense?(i[ee[0].r]||(i[ee[0].r]=[]),m=i[ee[0].r][ee[0].c]={t:"z"}):m=i[Rr(ee[0])]={t:"z"},a.e.r=Math.max(a.e.r,ee[0].r),a.s.r=Math.min(a.s.r,ee[0].r),a.e.c=Math.max(a.e.c,ee[0].c),a.s.c=Math.min(a.s.c,ee[0].c)),m.c||(m.c=[]),w={a:ee[1],t:Lt.TxO.t},m.c.push(w)}break;case 2173:See(Y[ee.ixfe],ee.ext);break;case 125:{if(!F.cellStyles)break;for(;ee.e>=ee.s;)Ee[ee.e--]={width:ee.w/256,level:ee.level||0,hidden:!!(ee.flags&1)},re||(re=!0,qb(ee.w/256)),S0(Ee[ee.e+1])}break;case 520:{var St={};ee.level!=null&&(ve[ee.r]=St,St.level=ee.level),ee.hidden&&(ve[ee.r]=St,St.hidden=!0),ee.hpt&&(ve[ee.r]=St,St.hpt=ee.hpt,St.hpx=Y1(ee.hpt))}break;case 38:case 39:case 40:case 41:i["!margins"]||Ff(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[fe]]=ee;break;case 161:i["!margins"]||Ff(i["!margins"]={}),i["!margins"].header=ee.header,i["!margins"].footer=ee.footer;break;case 574:ee.RTL&&(L.Views[0].RTL=!0);break;case 146:G=ee;break;case 2198:B=ee;break;case 140:V=ee;break;case 442:c?N.CodeName=ee||N.name:L.WBProps.CodeName=ee||"ThisWorkbook";break}}else be||console.error("Missing Info for XLS Record 0x"+fe.toString(16)),t.l+=me}return r.SheetNames=cs(s).sort(function(Pt,mt){return Number(Pt)-Number(mt)}).map(function(Pt){return s[Pt].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&X.forEach(function(Pt,mt){r.Sheets[r.SheetNames[mt]]["!autofilter"]=Pt}),r.Strings=l,r.SSF=Si(Ar),F.enc&&(r.Encryption=F.enc),B&&(r.Themes=B),r.Metadata={},V!==void 0&&(r.Metadata.Country=V),W.names.length>0&&(L.Names=W.names),r.Workbook=L,r}var Om={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Bse(t,e,r){var n=_r.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var i=K9(n,nw,Om.DSI);for(var s in i)e[s]=i[s]}catch(c){if(r.WTF)throw c}var a=_r.find(t,"/!SummaryInformation");if(a&&a.size>0)try{var o=K9(a,iw,Om.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(c){if(r.WTF)throw c}e.HeadingPairs&&e.TitlesOfParts&&(CR(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function Vse(t,e){var r=[],n=[],i=[],s=0,a,o=E9(nw,"n"),l=E9(iw,"n");if(t.Props)for(a=cs(t.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(l,a[s])?n:i).push([a[s],t.Props[a[s]]]);if(t.Custprops)for(a=cs(t.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(l,a[s])?n:i).push([a[s],t.Custprops[a[s]]]);var c=[];for(s=0;s<i.length;++s)FR.indexOf(i[s][0])>-1||SR.indexOf(i[s][0])>-1||i[s][1]!=null&&c.push(i[s]);n.length&&_r.utils.cfb_add(e,"/SummaryInformation",X9(n,Om.SI,l,iw)),(r.length||c.length)&&_r.utils.cfb_add(e,"/DocumentSummaryInformation",X9(r,Om.DSI,o,nw,c.length?c:null,Om.UDI))}function NF(t,e){e||(e={}),e_(e),bb(),e.codepage&&wb(e.codepage);var r,n;if(t.FullPaths){if(_r.find(t,"/encryption"))throw new Error("File is password-protected");r=_r.find(t,"!CompObj"),n=_r.find(t,"/Workbook")||_r.find(t,"/Book")}else{switch(e.type){case"base64":t=fl(yl(t));break;case"binary":t=fl(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Fa(t,0),n={content:t}}var i,s;if(r&&jse(r),e.bookProps&&!e.bookSheets)i={};else{var a=en?"buffer":"array";if(n&&n.content)i=Mse(n.content,e);else if((s=_r.find(t,"PerfectOffice_MAIN"))&&s.content)i=Rf.to_workbook(s.content,(e.type=a,e));else if((s=_r.find(t,"NativeContent_MAIN"))&&s.content)i=Rf.to_workbook(s.content,(e.type=a,e));else throw(s=_r.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&_r.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=Zee(t))}var o={};return t.FullPaths&&Bse(t,o,e),i.Props=i.Custprops=o,e.bookFiles&&(i.cfb=t),i}function Use(t,e){var r=e||{},n=_r.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return _r.utils.cfb_add(n,i,AF(t,r)),r.biff==8&&(t.Props||t.Custprops)&&Vse(t,n),r.biff==8&&t.vbaraw&&ete(n,_r.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var mg={0:{f:dne},1:{f:yne},2:{f:Mne},3:{f:Tne},4:{f:kne},5:{f:jne},6:{f:$ne},7:{f:Pne},8:{f:Yne},9:{f:Xne},10:{f:Gne},11:{f:Kne},12:{f:bne},13:{f:Vne},14:{f:Ane},15:{f:Sne},16:{f:wF},17:{f:qne},18:{f:Fne},19:{f:jb},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:qie},40:{},42:{},43:{f:$Z},44:{f:UZ},45:{f:WZ},46:{f:KZ},47:{f:GZ},48:{},49:{f:pY},50:{},51:{f:Nee},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:HR},62:{f:zne},63:{f:Oee},64:{f:fie},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:go,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:lie},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:xne},148:{f:pne,p:16},151:{f:rie},152:{},153:{f:zie},154:{},155:{},156:{f:Vie},157:{},158:{},159:{T:1,f:iZ},160:{T:-1},161:{T:1,f:xh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Qne},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Cee},336:{T:-1},337:{f:Pee,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:rw},357:{},358:{},359:{},360:{T:1},361:{},362:{f:$R},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:nie},427:{f:iie},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:aie},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:gne},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:eie},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:rw},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Kee},633:{T:1},634:{T:-1},635:{T:1,f:Wee},636:{T:-1},637:{f:vY},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Aie},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:hie},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},uw={6:{f:_4},10:{f:Gd},12:{f:Os},13:{f:Os},14:{f:vs},15:{f:vs},16:{f:fo},17:{f:vs},18:{f:vs},19:{f:Os},20:{f:tE},21:{f:tE},23:{f:$R},24:{f:nE},25:{f:vs},26:{},27:{},28:{f:hJ},29:{},34:{f:vs},35:{f:rE},38:{f:fo},39:{f:fo},40:{f:fo},41:{f:fo},42:{f:vs},43:{f:vs},47:{f:SZ},49:{f:VQ},51:{f:Os},60:{},61:{f:jQ},64:{f:vs},65:{f:BQ},66:{f:Os},77:{},80:{},81:{},82:{},85:{f:Os},89:{},90:{},91:{},92:{f:EQ},93:{f:gJ},94:{},95:{f:vs},96:{},97:{},99:{f:vs},125:{f:HR},128:{f:tJ},129:{f:CQ},130:{f:Os},131:{f:vs},132:{f:vs},133:{f:TQ},134:{},140:{f:EJ},141:{f:Os},144:{},146:{f:TJ},151:{},152:{},153:{},154:{},155:{},156:{f:Os},157:{},158:{},160:{f:LJ},161:{f:IJ},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:QQ},190:{f:JQ},193:{f:Gd},197:{},198:{},199:{},200:{},201:{},202:{f:vs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Os},220:{},221:{f:vs},222:{},224:{f:eJ},225:{f:kQ},226:{f:Gd},227:{},229:{f:pJ},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:AQ},253:{f:zQ},255:{f:PQ},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:LR},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:vs},353:{f:Gd},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:aJ},431:{f:vs},432:{},433:{},434:{},437:{},438:{f:yJ},439:{f:vs},440:{f:wJ},441:{},442:{f:Xg},443:{},444:{f:Os},445:{},446:{},448:{f:Gd},449:{f:LQ,r:2},450:{f:Gd},512:{f:J9},513:{f:FJ},515:{f:iJ},516:{f:HQ},517:{f:eE},519:{f:jJ},520:{f:RQ},523:{},545:{f:iE},549:{f:Q9},566:{},574:{f:OQ},638:{f:YQ},659:{},1048:{},1054:{f:WQ},1084:{},1212:{f:uJ},2048:{f:_J},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:ox},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Gd},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:NJ,r:12},2173:{f:Eee,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:vs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:cJ,r:12},2197:{},2198:{f:vee,r:12},2199:{},2200:{},2201:{},2202:{f:dJ,r:12},2203:{f:Gd},2204:{},2205:{},2206:{},2207:{},2211:{f:FQ},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Os},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:PJ},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:CJ},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:J9},1:{},2:{f:VJ},3:{f:MJ},4:{f:OJ},5:{f:eE},7:{f:zJ},8:{},9:{f:ox},11:{},22:{f:Os},30:{f:KQ},31:{},32:{},33:{f:iE},36:{},37:{f:Q9},50:{f:$J},62:{},52:{},67:{},68:{f:Os},69:{},86:{},126:{},127:{f:DJ},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:HJ},223:{},234:{},354:{},421:{},518:{f:_4},521:{f:ox},536:{f:nE},547:{f:rE},561:{},579:{},1030:{f:_4},1033:{f:ox},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function $t(t,e,r,n){var i=e;if(!isNaN(i)){var s=n||(r||[]).length||0,a=t.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&Rb(r)&&t.push(r)}}function zse(t,e,r,n){var i=(r||[]).length||0;if(i<=8224)return $t(t,e,r,i);var s=e;if(!isNaN(s)){for(var a=r.parts||[],o=0,l=0,c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,c),t.push(r.slice(l,l+c)),l+=c;l<i;){for(d=t.next(4),d.write_shift(2,60),c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;d.write_shift(2,c),t.push(r.slice(l,l+c)),l+=c}}}function Zg(t,e,r){return t||(t=xt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function $se(t,e,r,n){var i=xt(9);return Zg(i,t,e),jR(r,n||"b",i),i}function Hse(t,e,r){var n=xt(8+2*r.length);return Zg(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function qse(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?ea(Ei(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?$t(t,2,UJ(r,n,i)):$t(t,3,BJ(r,n,i));return;case"b":case"e":$t(t,5,$se(r,n,e.v,e.t));return;case"s":case"str":$t(t,4,Hse(r,n,(e.v||"").slice(0,255)));return}$t(t,1,Zg(null,r,n))}function Wse(t,e,r,n){var i=Array.isArray(e),s=Sn(e["!ref"]||"A1"),a,o="",l=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=Hr(s)}for(var c=s.s.r;c<=s.e.r;++c){o=Cs(c);for(var d=s.s.c;d<=s.e.c;++d){c===s.s.r&&(l[d]=Wi(d)),a=l[d]+o;var p=i?(e[c]||[])[d]:e[a];p&&qse(t,p,c,d)}}}function Gse(t,e){for(var r=e||{},n=qo(),i=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(i=s);if(i==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return $t(n,r.biff==4?1033:r.biff==3?521:9,zb(t,16,r)),Wse(n,t.Sheets[t.SheetNames[i]],i,r),$t(n,10),n.end()}function Kse(t,e,r){$t(t,49,UQ({sz:12,name:"Arial"},r))}function Xse(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&$t(t,1054,GQ(i,e[i],r))})}function Yse(t,e){var r=xt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),$t(t,2151,r),r=xt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),VR(Sn(e["!ref"]||"A1"),r),r.write_shift(4,4),$t(t,2152,r)}function Qse(t,e){for(var r=0;r<16;++r)$t(t,224,Z9({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){$t(t,224,Z9(n,0,e))})}function Jse(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];$t(t,440,bJ(n)),n[1].Tooltip&&$t(t,2048,kJ(n))}delete e["!links"]}function Zse(t,e){if(e){var r=0;e.forEach(function(n,i){++r<=256&&n&&$t(t,125,AJ(V5(i,n),i))})}}function eae(t,e,r,n,i){var s=16+U0(i.cellXfs,e,i);if(e.v==null&&!e.bf){$t(t,513,Zf(r,n,s));return}if(e.bf)$t(t,6,Cre(e,r,n,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?ea(Ei(e.v)):e.v;$t(t,515,sJ(r,n,a,s));break;case"b":case"e":$t(t,517,nJ(r,n,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=Yb(i.Strings,e.v,i.revStrings);$t(t,253,$Q(r,n,o,s))}else $t(t,516,qQ(r,n,(e.v||"").slice(0,255),s,i));break;default:$t(t,513,Zf(r,n,s))}}function tae(t,e,r){var n=qo(),i=r.SheetNames[t],s=r.Sheets[i]||{},a=(r||{}).Workbook||{},o=(a.Sheets||[])[t]||{},l=Array.isArray(s),c=e.biff==8,d,p="",g=[],m=Sn(s["!ref"]||"A1"),w=c?65536:16384;if(m.e.c>255||m.e.r>=w){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,w-1)}$t(n,2057,zb(r,16,e)),$t(n,13,Ul(1)),$t(n,12,Ul(100)),$t(n,15,Co(!0)),$t(n,17,Co(!1)),$t(n,16,Qf(.001)),$t(n,95,Co(!0)),$t(n,42,Co(!1)),$t(n,43,Co(!1)),$t(n,130,Ul(1)),$t(n,128,rJ()),$t(n,131,Co(!1)),$t(n,132,Co(!1)),c&&Zse(n,s["!cols"]),$t(n,512,XQ(m,e)),c&&(s["!links"]=[]);for(var y=m.s.r;y<=m.e.r;++y){p=Cs(y);for(var k=m.s.c;k<=m.e.c;++k){y===m.s.r&&(g[k]=Wi(k)),d=g[k]+p;var T=l?(s[y]||[])[k]:s[d];T&&(eae(n,T,y,k,e),c&&T.l&&s["!links"].push([d,T.l]))}}var O=o.CodeName||o.name||i;return c&&$t(n,574,MQ((a.Views||[])[0])),c&&(s["!merges"]||[]).length&&$t(n,229,mJ(s["!merges"])),c&&Jse(n,s),$t(n,442,DR(O)),c&&Yse(n,s),$t(n,10),n.end()}function rae(t,e,r){var n=qo(),i=(t||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=r.biff==8,l=r.biff==5;if($t(n,2057,zb(t,5,r)),r.bookType=="xla"&&$t(n,135),$t(n,225,o?Ul(1200):null),$t(n,193,nQ(2)),l&&$t(n,191),l&&$t(n,192),$t(n,226),$t(n,92,SQ("SheetJS",r)),$t(n,66,Ul(o?1200:1252)),o&&$t(n,353,Ul(0)),o&&$t(n,448),$t(n,317,RJ(t.SheetNames.length)),o&&t.vbaraw&&$t(n,211),o&&t.vbaraw){var c=a.CodeName||"ThisWorkbook";$t(n,442,DR(c))}$t(n,156,Ul(17)),$t(n,25,Co(!1)),$t(n,18,Co(!1)),$t(n,19,Ul(0)),o&&$t(n,431,Co(!1)),o&&$t(n,444,Ul(0)),$t(n,61,DQ()),$t(n,64,Co(!1)),$t(n,141,Ul(0)),$t(n,34,Co(Lie(t)=="true")),$t(n,14,Co(!0)),o&&$t(n,439,Co(!1)),$t(n,218,Ul(0)),Kse(n,t,r),Xse(n,t.SSF,r),Qse(n,r),o&&$t(n,352,Co(!1));var d=n.end(),p=qo();o&&$t(p,140,SJ()),o&&r.Strings&&zse(p,252,IQ(r.Strings)),$t(p,10);var g=p.end(),m=qo(),w=0,y=0;for(y=0;y<t.SheetNames.length;++y)w+=(o?12:11)+(o?2:1)*t.SheetNames[y].length;var k=d.length+w+g.length;for(y=0;y<t.SheetNames.length;++y){var T=s[y]||{};$t(m,133,NQ({pos:k,hs:T.Hidden||0,dt:0,name:t.SheetNames[y]},r)),k+=e[y].length}var O=m.end();if(w!=O.length)throw new Error("BS8 "+w+" != "+O.length);var P=[];return d.length&&P.push(d),O.length&&P.push(O),g.length&&P.push(g),ma(P)}function nae(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=Si(Ar)),t&&t.SSF&&(mp(),F5(t.SSF),r.revssf=j5(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,t_(r),r.cellXfs=[],U0(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)n[n.length]=tae(i,r,t);return n.unshift(rae(t,n,r)),ma(n)}function AF(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var i=Wo(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return nae(t,e);case 4:case 3:case 2:return Gse(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function pE(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var i=t.match(/<table/i);if(!i)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),a=i.index,o=s&&s.index||t.length,l=UX(t.slice(a,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,d=0,p=0,g=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},w=[];for(a=0;a<l.length;++a){var y=l[a].trim(),k=y.slice(0,3).toLowerCase();if(k=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}d=0;continue}if(!(k!="<td"&&k!="<th")){var T=y.split(/<\/t[dh]>/i);for(o=0;o<T.length;++o){var O=T[o].trim();if(O.match(/<t[dh]/i)){for(var P=O,V=0;P.charAt(0)=="<"&&(V=P.indexOf(">"))>-1;)P=P.slice(V+1);for(var Y=0;Y<w.length;++Y){var G=w[Y];G.s.c==d&&G.s.r<c&&c<=G.e.r&&(d=G.e.c+1,Y=-1)}var L=Fr(O.slice(0,O.indexOf(">")));g=L.colspan?+L.colspan:1,((p=+L.rowspan)>1||g>1)&&w.push({s:{r:c,c:d},e:{r:c+(p||1)-1,c:d+g-1}});var N=L.t||L["data-t"]||"";if(!P.length){d+=g;continue}if(P=ZP(P),m.s.r>c&&(m.s.r=c),m.e.r<c&&(m.e.r=c),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!P.length){d+=g;continue}var C={t:"s",v:P};r.raw||!P.trim().length||N=="s"||(P==="TRUE"?C={t:"b",v:!0}:P==="FALSE"?C={t:"b",v:!1}:isNaN(Ec(P))?isNaN(K1(P).getDate())||(C={t:"d",v:Ei(P)},r.cellDates||(C={t:"n",v:ea(C.v)}),C.z=r.dateNF||Ar[14]):C={t:"n",v:Ec(P)}),r.dense?(n[c]||(n[c]=[]),n[c][d]=C):n[Rr({r:c,c:d})]=C,d+=g}}}}return n["!ref"]=Hr(m),w.length&&(n["!merges"]=w),n}function iae(t,e,r,n){for(var i=t["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>r||i[c].s.c>a)&&!(i[c].e.r<r||i[c].e.c<a)){if(i[c].s.r<r||i[c].s.c<a){o=-1;break}o=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(o<0)){var d=Rr({r,c:a}),p=n.dense?(t[r]||[])[a]:t[d],g=p&&p.v!=null&&(p.h||Ab(p.w||(sd(p),p.w)||""))||"",m={};o>1&&(m.rowspan=o),l>1&&(m.colspan=l),n.editable?g='<span contenteditable="true">'+g+"</span>":p&&(m["data-t"]=p&&p.t||"z",p.v!=null&&(m["data-v"]=p.v),p.z!=null&&(m["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+p.l.Target+'">'+g+"</a>")),m.id=(n.id||"sjs")+"-"+d,s.push(Vt("td",g,m))}}var w="<tr>";return w+s.join("")+"</tr>"}var sae='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',aae="</body></html>";function oae(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return V0(pE(r[0],e),e);var n=i_();return r.forEach(function(i,s){s_(n,pE(i,e),"Sheet"+(s+1))}),n}function lae(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function IF(t,e){var r=e||{},n=r.header!=null?r.header:sae,i=r.footer!=null?r.footer:aae,s=[n],a=Wo(t["!ref"]);r.dense=Array.isArray(t),s.push(lae(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)s.push(iae(t,a,o,r));return s.push("</table>"+i),s.join("")}function PF(t,e,r){var n=r||{},i=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var a=typeof n.origin=="string"?Gi(n.origin):n.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:i,c:s}};if(t["!ref"]){var d=Wo(t["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),i==-1&&(c.e.r=i=d.e.r+1)}var p=[],g=0,m=t["!rows"]||(t["!rows"]=[]),w=0,y=0,k=0,T=0,O=0,P=0;for(t["!cols"]||(t["!cols"]=[]);w<o.length&&y<l;++w){var V=o[w];if(mE(V)){if(n.display)continue;m[y]={hidden:!0}}var Y=V.children;for(k=T=0;k<Y.length;++k){var G=Y[k];if(!(n.display&&mE(G))){var L=G.hasAttribute("data-v")?G.getAttribute("data-v"):G.hasAttribute("v")?G.getAttribute("v"):ZP(G.innerHTML),N=G.getAttribute("data-z")||G.getAttribute("z");for(g=0;g<p.length;++g){var C=p[g];C.s.c==T+s&&C.s.r<y+i&&y+i<=C.e.r&&(T=C.e.c+1-s,g=-1)}P=+G.getAttribute("colspan")||1,((O=+G.getAttribute("rowspan")||1)>1||P>1)&&p.push({s:{r:y+i,c:T+s},e:{r:y+i+(O||1)-1,c:T+s+(P||1)-1}});var R={t:"s",v:L},A=G.getAttribute("data-t")||G.getAttribute("t")||"";L!=null&&(L.length==0?R.t=A||"z":n.raw||L.trim().length==0||A=="s"||(L==="TRUE"?R={t:"b",v:!0}:L==="FALSE"?R={t:"b",v:!1}:isNaN(Ec(L))?isNaN(K1(L).getDate())||(R={t:"d",v:Ei(L)},n.cellDates||(R={t:"n",v:ea(R.v)}),R.z=n.dateNF||Ar[14]):R={t:"n",v:Ec(L)})),R.z===void 0&&N!=null&&(R.z=N);var F="",B=G.getElementsByTagName("A");if(B&&B.length)for(var te=0;te<B.length&&!(B[te].hasAttribute("href")&&(F=B[te].getAttribute("href"),F.charAt(0)!="#"));++te);F&&F.charAt(0)!="#"&&(R.l={Target:F}),n.dense?(t[y+i]||(t[y+i]=[]),t[y+i][T+s]=R):t[Rr({c:T+s,r:y+i})]=R,c.e.c<T+s&&(c.e.c=T+s),T+=P}}++y}return p.length&&(t["!merges"]=(t["!merges"]||[]).concat(p)),c.e.r=Math.max(c.e.r,y-1+i),t["!ref"]=Hr(c),y>=l&&(t["!fullref"]=Hr((c.e.r=o.length-w+y-1+i,c))),t}function RF(t,e){var r=e||{},n=r.dense?[]:{};return PF(n,t,e)}function cae(t,e){return V0(RF(t,e),e)}function mE(t){var e="",r=uae(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function uae(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function dae(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,i){return Array(parseInt(i,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=En(e.replace(/<[^>]*>/g,""));return[r]}var gE={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function FF(t,e){var r=e||{},n=Ib(t),i=[],s,a,o={name:""},l="",c=0,d,p,g={},m=[],w=r.dense?[]:{},y,k,T={value:""},O="",P=0,V=[],Y=-1,G=-1,L={s:{r:1e6,c:1e7},e:{r:0,c:0}},N=0,C={},R=[],A={},F=0,B=0,te=[],pe=1,Ee=1,ve=[],re={Names:[]},W={},ne=["",""],Q=[],I={},H="",X=0,J=!1,ue=!1,we=0;for(cg.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=cg.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(L.e.c>=L.s.c&&L.e.r>=L.s.r?w["!ref"]=Hr(L):w["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=L.e.r&&(w["!fullref"]=w["!ref"],L.e.r=r.sheetRows-1,w["!ref"]=Hr(L)),R.length&&(w["!merges"]=R),te.length&&(w["!rows"]=te),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),g[d.name]=w,ue=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=Fr(y[0],!1),Y=G=-1,L.s.r=L.s.c=1e7,L.e.r=L.e.c=0,w=r.dense?[]:{},R=[],te=[],ue=!0);break;case"table-row-group":y[1]==="/"?--N:++N;break;case"table-row":case"":if(y[1]==="/"){Y+=pe,pe=1;break}if(p=Fr(y[0],!1),p.?Y=p.-1:Y==-1&&(Y=0),pe=+p["number-rows-repeated"]||1,pe<10)for(we=0;we<pe;++we)N>0&&(te[Y+we]={level:N});G=-1;break;case"covered-table-cell":y[1]!=="/"&&++G,r.sheetStubs&&(r.dense?(w[Y]||(w[Y]=[]),w[Y][G]={t:"z"}):w[Rr({r:Y,c:G})]={t:"z"}),O="",V=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++G,T=Fr(y[0],!1),Ee=parseInt(T["number-columns-repeated"]||"1",10),k={t:"z",v:null},T.formula&&r.cellFormula!=!1&&(k.f=dE(En(T.formula))),(T.||T["value-type"])=="string"&&(k.t="s",k.v=En(T["string-value"]||""),r.dense?(w[Y]||(w[Y]=[]),w[Y][G]=k):w[Rr({r:Y,c:G})]=k),G+=Ee-1;else if(y[1]!=="/"){++G,O="",P=0,V=[],Ee=1;var fe=pe?Y+pe-1:Y;if(G>L.e.c&&(L.e.c=G),G<L.s.c&&(L.s.c=G),Y<L.s.r&&(L.s.r=Y),fe>L.e.r&&(L.e.r=fe),T=Fr(y[0],!1),Q=[],I={},k={t:T.||T["value-type"],v:null},r.cellFormula)if(T.formula&&(T.formula=En(T.formula)),T["number-matrix-columns-spanned"]&&T["number-matrix-rows-spanned"]&&(F=parseInt(T["number-matrix-rows-spanned"],10)||0,B=parseInt(T["number-matrix-columns-spanned"],10)||0,A={s:{r:Y,c:G},e:{r:Y+F-1,c:G+B-1}},k.F=Hr(A),ve.push([A,k.F])),T.formula)k.f=dE(T.formula);else for(we=0;we<ve.length;++we)Y>=ve[we][0].s.r&&Y<=ve[we][0].e.r&&G>=ve[we][0].s.c&&G<=ve[we][0].e.c&&(k.F=ve[we][1]);switch((T["number-columns-spanned"]||T["number-rows-spanned"])&&(F=parseInt(T["number-rows-spanned"],10)||0,B=parseInt(T["number-columns-spanned"],10)||0,A={s:{r:Y,c:G},e:{r:Y+F-1,c:G+B-1}},R.push(A)),T["number-columns-repeated"]&&(Ee=parseInt(T["number-columns-repeated"],10)),k.t){case"boolean":k.t="b",k.v=wi(T["boolean-value"]);break;case"float":k.t="n",k.v=parseFloat(T.value);break;case"percentage":k.t="n",k.v=parseFloat(T.value);break;case"currency":k.t="n",k.v=parseFloat(T.value);break;case"date":k.t="d",k.v=Ei(T["date-value"]),r.cellDates||(k.t="n",k.v=ea(k.v)),k.z="m/d/yy";break;case"time":k.t="n",k.v=MX(T["time-value"])/86400,r.cellDates&&(k.t="d",k.v=D5(k.v)),k.z="HH:MM:SS";break;case"number":k.t="n",k.v=parseFloat(T.);break;default:if(k.t==="string"||k.t==="text"||!k.t)k.t="s",T["string-value"]!=null&&(O=En(T["string-value"]),V=[]);else throw new Error("Unsupported value type "+k.t)}}else{if(J=!1,k.t==="s"&&(k.v=O||"",V.length&&(k.R=V),J=P==0),W.Target&&(k.l=W),Q.length>0&&(k.c=Q,Q=[]),O&&r.cellText!==!1&&(k.w=O),J&&(k.t="z",delete k.v),(!J||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=Y))for(var me=0;me<pe;++me){if(Ee=parseInt(T["number-columns-repeated"]||"1",10),r.dense)for(w[Y+me]||(w[Y+me]=[]),w[Y+me][G]=me==0?k:Si(k);--Ee>0;)w[Y+me][G+Ee]=Si(k);else for(w[Rr({r:Y+me,c:G})]=k;--Ee>0;)w[Rr({r:Y+me,c:G+Ee})]=Si(k);L.e.c<=G&&(L.e.c=G)}Ee=parseInt(T["number-columns-repeated"]||"1",10),G+=Ee-1,Ee=0,k={},O="",V=[]}W={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((s=i.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&i.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((s=i.pop())[0]!==y[3])throw"Bad state: "+s;I.t=O,V.length&&(I.R=V),I.a=H,Q.push(I)}else y[0].charAt(y[0].length-2)!=="/"&&i.push([y[3],!1]);H="",X=0,O="",P=0,V=[];break;case"creator":y[1]==="/"?H=n.slice(X,y.index):X=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((s=i.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&i.push([y[3],!1]);O="",P=0,V=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(C[o.name]=l,(s=i.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&(l="",o=Fr(y[0],!1),i.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(i[i.length-1][0]){case"time-style":case"date-style":a=Fr(y[0],!1),l+=gE[y[3]][a.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(i[i.length-1][0]){case"time-style":case"date-style":a=Fr(y[0],!1),l+=gE[y[3]][a.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(i[i.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,y.index);break}else c=y.index+y[0].length;break;case"named-range":a=Fr(y[0],!1),ne=k4(a["cell-range-address"]);var be={Name:a.name,Ref:ne[0]+"!"+ne[1]};ue&&(be.Sheet=m.length),re.Names.push(be);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(i[i.length-1][0])>-1)break;if(y[1]==="/"&&(!T||!T["string-value"])){var Le=dae(n.slice(P,y.index));O=(O.length>0?O+`
`:"")+Le[0]}else Fr(y[0],!1),P=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{ne=k4(Fr(y[0])["target-range-address"]),g[ne[0]]["!autofilter"]={ref:ne[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(W=Fr(y[0],!1),!W.href)break;W.Target=En(W.href),delete W.href,W.Target.charAt(0)=="#"&&W.Target.indexOf(".")>-1?(ne=k4(W.Target.slice(1)),W.Target="#"+ne[0]+"!"+ne[1]):W.Target.match(/^\.\.[\\\/]/)&&(W.Target=W.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(y)}}var ee={Sheets:g,SheetNames:m,Workbook:re};return r.bookSheets&&delete ee.Sheets,ee}function xE(t,e){e=e||{},Vl(t,"META-INF/manifest.xml")&&MY(Ds(t,"META-INF/manifest.xml"),e);var r=hl(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=FF(ni(r),e);return Vl(t,"meta.xml")&&(n.Props=kR(Ds(t,"meta.xml"))),n}function vE(t,e){return FF(t,e)}var fae=(function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+lg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Ts+e}})(),yE=(function(){var t=function(s){return Qn(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,a,o){var l=[];l.push('      <table:table table:name="'+Qn(a.SheetNames[o])+`" table:style-name="ta1">
`);var c=0,d=0,p=Wo(s["!ref"]||"A1"),g=s["!merges"]||[],m=0,w=Array.isArray(s);if(s["!cols"])for(d=0;d<=p.e.c;++d)l.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var y="",k=s["!rows"]||[];for(c=0;c<p.s.r;++c)y=k[c]?' table:style-name="ro'+k[c].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;c<=p.e.r;++c){for(y=k[c]?' table:style-name="ro'+k[c].ods+'"':"",l.push("        <table:table-row"+y+`>
`),d=0;d<p.s.c;++d)l.push(e);for(;d<=p.e.c;++d){var T=!1,O={},P="";for(m=0;m!=g.length;++m)if(!(g[m].s.c>d)&&!(g[m].s.r>c)&&!(g[m].e.c<d)&&!(g[m].e.r<c)){(g[m].s.c!=d||g[m].s.r!=c)&&(T=!0),O["table:number-columns-spanned"]=g[m].e.c-g[m].s.c+1,O["table:number-rows-spanned"]=g[m].e.r-g[m].s.r+1;break}if(T){l.push(r);continue}var V=Rr({r:c,c:d}),Y=w?(s[c]||[])[d]:s[V];if(Y&&Y.f&&(O["table:formula"]=Qn(Rre(Y.f)),Y.F&&Y.F.slice(0,V.length)==V)){var G=Wo(Y.F);O["table:number-matrix-columns-spanned"]=G.e.c-G.s.c+1,O["table:number-matrix-rows-spanned"]=G.e.r-G.s.r+1}if(!Y){l.push(e);continue}switch(Y.t){case"b":P=Y.v?"TRUE":"FALSE",O["office:value-type"]="boolean",O["office:boolean-value"]=Y.v?"true":"false";break;case"n":P=Y.w||String(Y.v||0),O["office:value-type"]="float",O["office:value"]=Y.v||0;break;case"s":case"str":P=Y.v==null?"":Y.v,O["office:value-type"]="string";break;case"d":P=Y.w||Ei(Y.v).toISOString(),O["office:value-type"]="date",O["office:date-value"]=Ei(Y.v).toISOString(),O["table:style-name"]="ce1";break;default:l.push(e);continue}var L=t(P);if(Y.l&&Y.l.Target){var N=Y.l.Target;N=N.charAt(0)=="#"?"#"+Fre(N.slice(1)):N,N.charAt(0)!="#"&&!N.match(/^\w+:/)&&(N="../"+N),L=Vt("text:a",L,{"xlink:href":N.replace(/&/g,"&amp;")})}l.push("          "+Vt("table:table-cell",Vt("text:p",L,{}),O)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(c){return a.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var d=0;d<c["!cols"].length;++d)if(c["!cols"][d]){var p=c["!cols"][d];if(p.width==null&&p.wpx==null&&p.wch==null)continue;S0(p),p.ods=o;var g=c["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;a.SheetNames.map(function(c){return a.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var d=0;d<c["!rows"].length;++d)if(c["!rows"][d]){c["!rows"][d].ods=l;var p=c["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+p+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var l=[Ts],c=lg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=lg({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+c+d+`>
`),l.push(_R().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),i(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var p=0;p!=a.SheetNames.length;++p)l.push(n(a.Sheets[a.SheetNames[p]],a,p));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function LF(t,e){if(e.bookType=="fods")return yE(t,e);var r=Cb(),n="",i=[],s=[];return n="mimetype",Wr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Wr(r,n,yE(t,e)),i.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Wr(r,n,fae(t,e)),i.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Wr(r,n,Ts+_R()),i.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Wr(r,n,UY(s)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Wr(r,n,BY(i)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function eh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function dw(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):ni(B0(t))}function hae(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):fl(nu(t))}function pae(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function T0(t){var e=t.reduce(function(i,s){return i+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(i){r.set(i,n),n+=i.length}),r}function wE(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function mae(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,i=e+13;i>=e;--i)n=n*256+t[i];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function gae(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,i=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;i>=1;++s,i/=256)t[e+s]=i&255;t[e+15]|=r>=0?0:128}function gg(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function Gn(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function as(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function An(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],i=gg(t,r),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:a=4,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=gg(t,r),o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(n))}var c={data:o,type:s};e[i]==null?e[i]=[c]:e[i].push(c)}return e}function Aa(t){var e=[];return t.forEach(function(r,n){r.forEach(function(i){i.data&&(e.push(Gn(n*8+i.type)),i.type==2&&e.push(Gn(i.data.length)),e.push(i.data))})}),T0(e)}function Zb(t,e){return t?.map(function(r){return e(r.data)})||[]}function Ml(t){for(var e,r=[],n=[0];n[0]<t.length;){var i=gg(t,n),s=An(t.slice(n[0],n[0]+i));n[0]+=i;var a={id:as(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=An(o.data),c=as(l[3][0].data);a.messages.push({meta:l,data:t.slice(n[0],n[0]+c)}),n[0]+=c}),(e=s[3])!=null&&e[0]&&(a.merge=as(s[3][0].data)>>>0>0),r.push(a)}return r}function Yh(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:Gn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Gn(+!!r.merge),type:0}]);var i=[];r.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:Gn(a.data.length)}],n[2].push({data:Aa(a.meta),type:2})});var s=Aa(n);e.push(Gn(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),T0(e)}function xae(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=gg(e,r),i=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[r[0]],o>1&&(a|=e[r[0]+1]<<8),o>2&&(a|=e[r[0]+2]<<16),o>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}i.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var l=0,c=0;if(s==1?(c=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(c=(e[r[0]++]>>2)+1,s==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),i=[T0(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(i.push(i[0].slice(-l)),c-=l;c>=i[i.length-1].length;)i.push(i[i.length-1]),c-=i[i.length-1].length;i.push(i[0].slice(-l,-l+c))}}var d=T0(i);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Bl(t){for(var e=[],r=0;r<t.length;){var n=t[r++],i=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(xae(n,t.slice(r,r+i))),r+=i}if(r!==t.length)throw new Error("data is not a valid framed stream!");return T0(e)}function Qh(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),i=new Uint8Array(4);e.push(i);var s=Gn(n),a=s.length;e.push(s),n<=60?(a++,e.push(new Uint8Array([n-1<<2]))):n<=256?(a+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(a+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(a+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(a+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),a+=n,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,r+=n}return T0(e)}function vae(t,e,r,n){var i=eh(t),s=i.getUint32(4,!0),a=(n>1?12:8)+wE(s&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,d=new Date(2001,0,1);s&512&&(o=i.getUint32(a,!0),a+=4),a+=wE(s&(n>1?12288:4096))*4,s&16&&(l=i.getUint32(a,!0),a+=4),s&32&&(c=i.getFloat64(a,!0),a+=8),s&64&&(d.setTime(d.getTime()+i.getFloat64(a,!0)*1e3),a+=8);var p;switch(t[2]){case 0:break;case 2:p={t:"n",v:c};break;case 3:p={t:"s",v:e[l]};break;case 5:p={t:"d",v:d};break;case 6:p={t:"b",v:c>0};break;case 7:p={t:"n",v:c/86400};break;case 8:p={t:"e",v:0};break;case 9:if(o>-1)p={t:"s",v:r[o]};else if(l>-1)p={t:"s",v:e[l]};else if(!isNaN(c))p={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return p}function yae(t,e,r){var n=eh(t),i=n.getUint32(8,!0),s=12,a=-1,o=-1,l=NaN,c=NaN,d=new Date(2001,0,1);i&1&&(l=mae(t,s),s+=16),i&2&&(c=n.getFloat64(s,!0),s+=8),i&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),i&8&&(o=n.getUint32(s,!0),s+=4),i&16&&(a=n.getUint32(s,!0),s+=4);var p;switch(t[1]){case 0:break;case 2:p={t:"n",v:l};break;case 3:p={t:"s",v:e[o]};break;case 5:p={t:"d",v:d};break;case 6:p={t:"b",v:c>0};break;case 7:p={t:"n",v:c/86400};break;case 8:p={t:"e",v:0};break;case 9:if(a>-1)p={t:"s",v:r[a]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(i&31," : ").concat(t.slice(0,4)));break;case 10:p={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(i&31," : ").concat(t.slice(0,4)))}return p}function S4(t,e){var r=new Uint8Array(32),n=eh(r),i=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,gae(r,i,t.v),s|=1,i+=16;break;case"b":r[1]=6,n.setFloat64(i,t.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(i,e.indexOf(t.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,i)}function C4(t,e){var r=new Uint8Array(32),n=eh(r),i=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(i,t.v,!0),s|=32,i+=8;break;case"b":r[2]=6,n.setFloat64(i,t.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(i,e.indexOf(t.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,i)}function wae(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return vae(t,e,r,t[0]);case 5:return yae(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function oo(t){var e=An(t);return gg(e[1][0].data)}function bE(t,e){var r=An(e.data),n=as(r[1][0].data),i=r[3],s=[];return(i||[]).forEach(function(a){var o=An(a.data),l=as(o[1][0].data)>>>0;switch(n){case 1:s[l]=dw(o[3][0].data);break;case 8:{var c=t[oo(o[9][0].data)][0],d=An(c.data),p=t[oo(d[1][0].data)][0],g=as(p.meta[1][0].data);if(g!=2001)throw new Error("2000 unexpected reference to ".concat(g));var m=An(p.data);s[l]=m[3].map(function(w){return dw(w.data)}).join("")}break}}),s}function bae(t,e){var r,n,i,s,a,o,l,c,d,p,g,m,w,y,k=An(t),T=as(k[1][0].data)>>>0,O=as(k[2][0].data)>>>0,P=((n=(r=k[8])==null?void 0:r[0])==null?void 0:n.data)&&as(k[8][0].data)>0||!1,V,Y;if((s=(i=k[7])==null?void 0:i[0])!=null&&s.data&&e!=0)V=(o=(a=k[7])==null?void 0:a[0])==null?void 0:o.data,Y=(c=(l=k[6])==null?void 0:l[0])==null?void 0:c.data;else if((p=(d=k[4])==null?void 0:d[0])!=null&&p.data&&e!=1)V=(m=(g=k[4])==null?void 0:g[0])==null?void 0:m.data,Y=(y=(w=k[3])==null?void 0:w[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var G=P?4:1,L=eh(V),N=[],C=0;C<V.length/2;++C){var R=L.getUint16(C*2,!0);R<65535&&N.push([C,R])}if(N.length!=O)throw"Expected ".concat(O," cells, found ").concat(N.length);var A=[];for(C=0;C<N.length-1;++C)A[N[C][0]]=Y.subarray(N[C][1]*G,N[C+1][1]*G);return N.length>=1&&(A[N[N.length-1][0]]=Y.subarray(N[N.length-1][1]*G)),{R:T,cells:A}}function _ae(t,e){var r,n=An(e.data),i=(r=n?.[7])!=null&&r[0]?as(n[7][0].data)>>>0>0?1:0:-1,s=Zb(n[5],function(a){return bae(a,i)});return{nrows:as(n[4][0].data)>>>0,data:s.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(l,c){if(a[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));a[o.R][c]=l}),a},[])}}function kae(t,e,r){var n,i=An(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(as(i[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(i[6][0].data));if(s.e.c=(as(i[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(i[7][0].data));r["!ref"]=Hr(s);var a=An(i[4][0].data),o=bE(t,t[oo(a[4][0].data)][0]),l=(n=a[17])!=null&&n[0]?bE(t,t[oo(a[17][0].data)][0]):[],c=An(a[3][0].data),d=0;c[1].forEach(function(p){var g=An(p.data),m=t[oo(g[2][0].data)][0],w=as(m.meta[1][0].data);if(w!=6002)throw new Error("6001 unexpected reference to ".concat(w));var y=_ae(t,m);y.data.forEach(function(k,T){k.forEach(function(O,P){var V=Rr({r:d+T,c:P}),Y=wae(O,o,l);Y&&(r[V]=Y)})}),d+=y.nrows})}function Eae(t,e){var r=An(e.data),n={"!ref":"A1"},i=t[oo(r[2][0].data)],s=as(i[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return kae(t,i[0],n),n}function Sae(t,e){var r,n=An(e.data),i={name:(r=n[1])!=null&&r[0]?dw(n[1][0].data):"",sheets:[]},s=Zb(n[2],oo);return s.forEach(function(a){t[a].forEach(function(o){var l=as(o.meta[1][0].data);l==6e3&&i.sheets.push(Eae(t,o))})}),i}function Cae(t,e){var r=i_(),n=An(e.data),i=Zb(n[1],oo);if(i.forEach(function(s){t[s].forEach(function(a){var o=as(a.meta[1][0].data);if(o==2){var l=Sae(t,a);l.sheets.forEach(function(c,d){s_(r,c,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function T4(t){var e,r,n,i,s={},a=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=Bl(l.content)}catch(p){return console.log("?? "+l.content.length+" "+(p.message||p))}var d;try{d=Ml(c)}catch(p){return console.log("## "+(p.message||p))}d.forEach(function(p){s[p.id]=p.messages,a.push(p.id)})}}),!a.length)throw new Error("File has no messages");var o=((i=(n=(r=(e=s?.[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:i[0].data)&&as(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||a.forEach(function(l){s[l].forEach(function(c){var d=as(c.meta[1][0].data)>>>0;if(d==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Cae(s,o)}function Tae(t,e,r){var n,i,s,a;if(!((n=t[6])!=null&&n[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=t[8])==null?void 0:s[0])==null?void 0:a.data)&&as(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,c=eh(t[7][0].data),d=0,p=[],g=eh(t[4][0].data),m=0,w=[],y=0;y<e.length;++y){if(e[y]==null){c.setUint16(y*2,65535,!0),g.setUint16(y*2,65535);continue}c.setUint16(y*2,d,!0),g.setUint16(y*2,m,!0);var k,T;switch(typeof e[y]){case"string":k=S4({t:"s",v:e[y]},r),T=C4({t:"s",v:e[y]},r);break;case"number":k=S4({t:"n",v:e[y]},r),T=C4({t:"n",v:e[y]},r);break;case"boolean":k=S4({t:"b",v:e[y]},r),T=C4({t:"b",v:e[y]},r);break;default:throw new Error("Unsupported value "+e[y])}p.push(k),d+=k.length,w.push(T),m+=T.length,++l}for(t[2][0].data=Gn(l);y<t[7][0].data.length/2;++y)c.setUint16(y*2,65535,!0),g.setUint16(y*2,65535,!0);return t[6][0].data=T0(p),t[3][0].data=T0(w),l}function Nae(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Wo(r["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Hr(n)));var s=Bv(r,{range:n,header:1}),a=["~Sh33tJ5~"];s.forEach(function(H){return H.forEach(function(X){typeof X=="string"&&a.push(X)})});var o={},l=[],c=_r.read(e.numbers,{type:"base64"});c.FileIndex.map(function(H,X){return[H,c.FullPaths[X]]}).forEach(function(H){var X=H[0],J=H[1];if(X.type==2&&X.name.match(/\.iwa/)){var ue=X.content,we=Bl(ue),fe=Ml(we);fe.forEach(function(me){l.push(me.id),o[me.id]={deps:[],location:J,type:as(me.messages[0].meta[1][0].data)}})}}),l.sort(function(H,X){return H-X});var d=l.filter(function(H){return H>1}).map(function(H){return[H,Gn(H)]});c.FileIndex.map(function(H,X){return[H,c.FullPaths[X]]}).forEach(function(H){var X=H[0];if(H[1],!!X.name.match(/\.iwa/)){var J=Ml(Bl(X.content));J.forEach(function(ue){ue.messages.forEach(function(we){d.forEach(function(fe){ue.messages.some(function(me){return as(me.meta[1][0].data)!=11006&&pae(me.data,fe[1])})&&o[fe[0]].deps.push(ue.id)})})})}});for(var p=_r.find(c,o[1].location),g=Ml(Bl(p.content)),m,w=0;w<g.length;++w){var y=g[w];y.id==1&&(m=y)}var k=oo(An(m.messages[0].data)[1][0].data);for(p=_r.find(c,o[k].location),g=Ml(Bl(p.content)),w=0;w<g.length;++w)y=g[w],y.id==k&&(m=y);for(k=oo(An(m.messages[0].data)[2][0].data),p=_r.find(c,o[k].location),g=Ml(Bl(p.content)),w=0;w<g.length;++w)y=g[w],y.id==k&&(m=y);for(k=oo(An(m.messages[0].data)[2][0].data),p=_r.find(c,o[k].location),g=Ml(Bl(p.content)),w=0;w<g.length;++w)y=g[w],y.id==k&&(m=y);var T=An(m.messages[0].data);{T[6][0].data=Gn(n.e.r+1),T[7][0].data=Gn(n.e.c+1);var O=oo(T[46][0].data),P=_r.find(c,o[O].location),V=Ml(Bl(P.content));{for(var Y=0;Y<V.length&&V[Y].id!=O;++Y);if(V[Y].id!=O)throw"Bad ColumnRowUIDMapArchive";var G=An(V[Y].messages[0].data);G[1]=[],G[2]=[],G[3]=[];for(var L=0;L<=n.e.c;++L){var N=[];N[1]=N[2]=[{type:0,data:Gn(L+420690)}],G[1].push({type:2,data:Aa(N)}),G[2].push({type:0,data:Gn(L)}),G[3].push({type:0,data:Gn(L)})}G[4]=[],G[5]=[],G[6]=[];for(var C=0;C<=n.e.r;++C)N=[],N[1]=N[2]=[{type:0,data:Gn(C+726270)}],G[4].push({type:2,data:Aa(N)}),G[5].push({type:0,data:Gn(C)}),G[6].push({type:0,data:Gn(C)});V[Y].messages[0].data=Aa(G)}P.content=Qh(Yh(V)),P.size=P.content.length,delete T[46];var R=An(T[4][0].data);{R[7][0].data=Gn(n.e.r+1);var A=An(R[1][0].data),F=oo(A[2][0].data);P=_r.find(c,o[F].location),V=Ml(Bl(P.content));{if(V[0].id!=F)throw"Bad HeaderStorageBucket";var B=An(V[0].messages[0].data);for(C=0;C<s.length;++C){var te=An(B[2][0].data);te[1][0].data=Gn(C),te[4][0].data=Gn(s[C].length),B[2][C]={type:B[2][0].type,data:Aa(te)}}V[0].messages[0].data=Aa(B)}P.content=Qh(Yh(V)),P.size=P.content.length;var pe=oo(R[2][0].data);P=_r.find(c,o[pe].location),V=Ml(Bl(P.content));{if(V[0].id!=pe)throw"Bad HeaderStorageBucket";for(B=An(V[0].messages[0].data),L=0;L<=n.e.c;++L)te=An(B[2][0].data),te[1][0].data=Gn(L),te[4][0].data=Gn(n.e.r+1),B[2][L]={type:B[2][0].type,data:Aa(te)};V[0].messages[0].data=Aa(B)}P.content=Qh(Yh(V)),P.size=P.content.length;var Ee=oo(R[4][0].data);(function(){for(var H=_r.find(c,o[Ee].location),X=Ml(Bl(H.content)),J,ue=0;ue<X.length;++ue){var we=X[ue];we.id==Ee&&(J=we)}var fe=An(J.messages[0].data);{fe[3]=[];var me=[];a.forEach(function(ee,Be){me[1]=[{type:0,data:Gn(Be)}],me[2]=[{type:0,data:Gn(1)}],me[3]=[{type:2,data:hae(ee)}],fe[3].push({type:2,data:Aa(me)})})}J.messages[0].data=Aa(fe);var be=Yh(X),Le=Qh(be);H.content=Le,H.size=H.content.length})();var ve=An(R[3][0].data);{var re=ve[1][0];delete ve[2];var W=An(re.data);{var ne=oo(W[2][0].data);(function(){for(var H=_r.find(c,o[ne].location),X=Ml(Bl(H.content)),J,ue=0;ue<X.length;++ue){var we=X[ue];we.id==ne&&(J=we)}var fe=An(J.messages[0].data);{delete fe[6],delete ve[7];var me=new Uint8Array(fe[5][0].data);fe[5]=[];for(var be=0,Le=0;Le<=n.e.r;++Le){var ee=An(me);be+=Tae(ee,s[Le],a),ee[1][0].data=Gn(Le),fe[5].push({data:Aa(ee),type:2})}fe[1]=[{type:0,data:Gn(n.e.c+1)}],fe[2]=[{type:0,data:Gn(n.e.r+1)}],fe[3]=[{type:0,data:Gn(be)}],fe[4]=[{type:0,data:Gn(n.e.r+1)}]}J.messages[0].data=Aa(fe);var Be=Yh(X),Re=Qh(Be);H.content=Re,H.size=H.content.length})()}re.data=Aa(W)}R[3][0].data=Aa(ve)}T[4][0].data=Aa(R)}m.messages[0].data=Aa(T);var Q=Yh(g),I=Qh(Q);return p.content=I,p.size=p.content.length,c}function jF(t){return function(r){for(var n=0;n!=t.length;++n){var i=t[n];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function e_(t){jF([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function t_(t){jF([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function Aae(t){return an.WS.indexOf(t)>-1?"sheet":t==an.CS?"chart":t==an.DS?"dialog":t==an.MS?"macro":t&&t.length?t:"sheet"}function Iae(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,Aae(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function Pae(t,e,r,n,i,s,a,o,l,c,d,p){try{s[n]=Fm(hl(t,r,!0),e);var g=Ds(t,e),m;switch(o){case"sheet":m=Zie(g,e,i,l,s[n],c,d,p);break;case"chart":if(m=ese(g,e,i,l,s[n],c,d,p),!m||!m["!drawel"])break;var w=ym(m["!drawel"].Target,e),y=ug(w),k=Vee(hl(t,w,!0),Fm(hl(t,y,!0),w)),T=ym(k,w),O=ug(T);m=Tie(hl(t,T,!0),T,l,Fm(hl(t,O,!0),T),c,m);break;case"macro":m=tse(g,e,i,l,s[n],c,d,p);break;case"dialog":m=rse(g,e,i,l,s[n],c,d,p);break;default:throw new Error("Unrecognized sheet type "+o)}a[n]=m;var P=[];s&&s[n]&&cs(s[n]).forEach(function(V){var Y="";if(s[n][V].Type==an.CMNT){Y=ym(s[n][V].Target,e);var G=ase(Ds(t,Y,!0),Y,l);if(!G||!G.length)return;aE(m,G,!1)}s[n][V].Type==an.TCMNT&&(Y=ym(s[n][V].Target,e),P=P.concat(zee(Ds(t,Y,!0),l)))}),P&&P.length&&aE(m,P,!0,l.people||[])}catch(V){if(l.WTF)throw V}}function jl(t){return t.charAt(0)=="/"?t.slice(1):t}function Rae(t,e){if(mp(),e=e||{},e_(e),Vl(t,"META-INF/manifest.xml")||Vl(t,"objectdata.xml"))return xE(t,e);if(Vl(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof T4<"u"){if(t.FileIndex)return T4(t);var r=_r.utils.cfb_new();return T9(t).forEach(function(te){Wr(r,te,$X(t,te))}),T4(r)}throw new Error("Unsupported NUMBERS file")}if(!Vl(t,"[Content_Types].xml"))throw Vl(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Vl(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=T9(t),i=DY(hl(t,"[Content_Types].xml")),s=!1,a,o;if(i.workbooks.length===0&&(o="xl/workbook.xml",Ds(t,o,!0)&&i.workbooks.push(o)),i.workbooks.length===0){if(o="xl/workbook.bin",!Ds(t,o,!0))throw new Error("Could not find workbook");i.workbooks.push(o),s=!0}i.workbooks[0].slice(-3)=="bin"&&(s=!0);var l={},c={};if(!e.bookSheets&&!e.bookProps){if(Lm=[],i.sst)try{Lm=sse(Ds(t,jl(i.sst)),i.sst,e)}catch(te){if(e.WTF)throw te}e.cellStyles&&i.themes.length&&(l=ise(hl(t,i.themes[0].replace(/^\//,""),!0)||"",i.themes[0],e)),i.style&&(c=nse(Ds(t,jl(i.style)),i.style,l,e))}i.links.map(function(te){try{var pe=Fm(hl(t,ug(jl(te))),te);return lse(Ds(t,jl(te)),pe,te,e)}catch{}});var d=Jie(Ds(t,jl(i.workbooks[0])),i.workbooks[0],e),p={},g="";i.coreprops.length&&(g=Ds(t,jl(i.coreprops[0]),!0),g&&(p=kR(g)),i.extprops.length!==0&&(g=Ds(t,jl(i.extprops[0]),!0),g&&$Y(g,p,e)));var m={};(!e.bookSheets||e.bookProps)&&i.custprops.length!==0&&(g=hl(t,jl(i.custprops[0]),!0),g&&(m=qY(g,e)));var w={};if((e.bookSheets||e.bookProps)&&(d.Sheets?a=d.Sheets.map(function(pe){return pe.name}):p.Worksheets&&p.SheetNames.length>0&&(a=p.SheetNames),e.bookProps&&(w.Props=p,w.Custprops=m),e.bookSheets&&typeof a<"u"&&(w.SheetNames=a),e.bookSheets?w.SheetNames:e.bookProps))return w;a={};var y={};e.bookDeps&&i.calcchain&&(y=ose(Ds(t,jl(i.calcchain)),i.calcchain));var k=0,T={},O,P;{var V=d.Sheets;p.Worksheets=V.length,p.SheetNames=[];for(var Y=0;Y!=V.length;++Y)p.SheetNames[Y]=V[Y].name}var G=s?"bin":"xml",L=i.workbooks[0].lastIndexOf("/"),N=(i.workbooks[0].slice(0,L+1)+"_rels/"+i.workbooks[0].slice(L+1)+".rels").replace(/^\//,"");Vl(t,N)||(N="xl/_rels/workbook."+G+".rels");var C=Fm(hl(t,N,!0),N.replace(/_rels.*/,"s5s"));(i.metadata||[]).length>=1&&(e.xlmeta=cse(Ds(t,jl(i.metadata[0])),i.metadata[0],e)),(i.people||[]).length>=1&&(e.people=Hee(Ds(t,jl(i.people[0])),e)),C&&(C=Iae(C,d.Sheets));var R=Ds(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(k=0;k!=p.Worksheets;++k){var A="sheet";if(C&&C[k]?(O="xl/"+C[k][1].replace(/[\/]?xl\//,""),Vl(t,O)||(O=C[k][1]),Vl(t,O)||(O=N.replace(/_rels\/.*$/,"")+C[k][1]),A=C[k][2]):(O="xl/worksheets/sheet"+(k+1-R)+"."+G,O=O.replace(/sheet0\./,"sheet.")),P=O.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(k!=e.sheets)continue e;break;case"string":if(p.SheetNames[k].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var F=!1,B=0;B!=e.sheets.length;++B)typeof e.sheets[B]=="number"&&e.sheets[B]==k&&(F=1),typeof e.sheets[B]=="string"&&e.sheets[B].toLowerCase()==p.SheetNames[k].toLowerCase()&&(F=1);if(!F)continue e}}Pae(t,O,P,p.SheetNames[k],k,T,a,A,e,d,l,c)}return w={Directory:i,Workbook:d,Props:p,Custprops:m,Deps:y,Sheets:a,SheetNames:p.SheetNames,Strings:Lm,Styles:c,Themes:l,SSF:Si(Ar)},e&&e.bookFiles&&(t.files?(w.keys=n,w.files=t.files):(w.keys=[],w.files={},t.FullPaths.forEach(function(te,pe){te=te.replace(/^Root Entry[\/]/,""),w.keys.push(te),w.files[te]=t.FileIndex[pe]}))),e&&e.bookVBA&&(i.vba.length>0?w.vbaraw=Ds(t,jl(i.vba[0]),!0):i.defaults&&i.defaults.bin===Jee&&(w.vbaraw=Ds(t,"xl/vbaProject.bin",!0))),w}function Fae(t,e){var r=e||{},n="Workbook",i=_r.find(t,n);try{if(n="/!DataSpaces/Version",i=_r.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(cZ(i.content),n="/!DataSpaces/DataSpaceMap",i=_r.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=dZ(i.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",i=_r.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=fZ(i.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",i=_r.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);pZ(i.content)}catch{}if(n="/EncryptionInfo",i=_r.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=mZ(i.content);if(n="/EncryptedPackage",i=_r.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],i.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],i.content,r.password||"",r);throw new Error("File is password-protected")}function Lae(t,e){return e.bookType=="ods"?LF(t,e):e.bookType=="numbers"?Nae(t,e):e.bookType=="xlsb"?jae(t,e):Dae(t,e)}function jae(t,e){u1=1024,t&&!t.SSF&&(t.SSF=Si(Ar)),t&&t.SSF&&(mp(),F5(t.SSF),e.revssf=j5(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,jm?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=lF.indexOf(e.bookType)>-1,i=Vb();t_(e=e||{});var s=Cb(),a="",o=0;if(e.cellXfs=[],U0(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",Wr(s,a,ER(t.Props,e)),i.coreprops.push(a),Kn(e.rels,2,a,an.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,Wr(s,a,TR(t.Props)),i.extprops.push(a),Kn(e.rels,3,a,an.EXT_PROPS),t.Custprops!==t.Props&&cs(t.Custprops||{}).length>0&&(a="docProps/custom.xml",Wr(s,a,NR(t.Custprops)),i.custprops.push(a),Kn(e.rels,4,a,an.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},p=t.Sheets[t.SheetNames[o-1]],g=(p||{})["!type"]||"sheet";switch(g){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,Wr(s,a,dse(o-1,a,e,t,d)),i.sheets.push(a),Kn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,an.WS[0])}if(p){var m=p["!comments"],w=!1,y="";m&&m.length>0&&(y="xl/comments"+o+"."+r,Wr(s,y,pse(m,y)),i.comments.push(y),Kn(d,-1,"../comments"+o+"."+r,an.CMNT),w=!0),p["!legacy"]&&w&&Wr(s,"xl/drawings/vmlDrawing"+o+".vml",aF(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}d["!id"].rId1&&Wr(s,ug(a),b1(d))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,Wr(s,a,hse(e.Strings,a,e)),i.strs.push(a),Kn(e.wbrels,-1,"sharedStrings."+r,an.SST)),a="xl/workbook."+r,Wr(s,a,use(t,a)),i.workbooks.push(a),Kn(e.rels,1,a,an.WB),a="xl/theme/theme1.xml",Wr(s,a,Wb(t.Themes,e)),i.themes.push(a),Kn(e.wbrels,-1,"theme/theme1.xml",an.THEME),a="xl/styles."+r,Wr(s,a,fse(t,a,e)),i.styles.push(a),Kn(e.wbrels,-1,"styles."+r,an.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",Wr(s,a,t.vbaraw),i.vba.push(a),Kn(e.wbrels,-1,"vbaProject.bin",an.VBA)),a="xl/metadata."+r,Wr(s,a,mse(a)),i.metadata.push(a),Kn(e.wbrels,-1,"metadata."+r,an.XLMETA),Wr(s,"[Content_Types].xml",bR(i,e)),Wr(s,"_rels/.rels",b1(e.rels)),Wr(s,"xl/_rels/workbook."+r+".rels",b1(e.wbrels)),delete e.revssf,delete e.ssf,s}function Dae(t,e){u1=1024,t&&!t.SSF&&(t.SSF=Si(Ar)),t&&t.SSF&&(mp(),F5(t.SSF),e.revssf=j5(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,jm?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=lF.indexOf(e.bookType)>-1,i=Vb();t_(e=e||{});var s=Cb(),a="",o=0;if(e.cellXfs=[],U0(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",Wr(s,a,ER(t.Props,e)),i.coreprops.push(a),Kn(e.rels,2,a,an.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,Wr(s,a,TR(t.Props)),i.extprops.push(a),Kn(e.rels,3,a,an.EXT_PROPS),t.Custprops!==t.Props&&cs(t.Custprops||{}).length>0&&(a="docProps/custom.xml",Wr(s,a,NR(t.Custprops)),i.custprops.push(a),Kn(e.rels,4,a,an.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var p={"!id":{}},g=t.Sheets[t.SheetNames[o-1]],m=(g||{})["!type"]||"sheet";switch(m){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,Wr(s,a,yF(o-1,e,t,p)),i.sheets.push(a),Kn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,an.WS[0])}if(g){var w=g["!comments"],y=!1,k="";if(w&&w.length>0){var T=!1;w.forEach(function(O){O[1].forEach(function(P){P.T==!0&&(T=!0)})}),T&&(k="xl/threadedComments/threadedComment"+o+"."+r,Wr(s,k,$ee(w,d,e)),i.threadedcomments.push(k),Kn(p,-1,"../threadedComments/threadedComment"+o+"."+r,an.TCMNT)),k="xl/comments"+o+"."+r,Wr(s,k,oF(w)),i.comments.push(k),Kn(p,-1,"../comments"+o+"."+r,an.CMNT),y=!0}g["!legacy"]&&y&&Wr(s,"xl/drawings/vmlDrawing"+o+".vml",aF(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}p["!id"].rId1&&Wr(s,ug(a),b1(p))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,Wr(s,a,KR(e.Strings,e)),i.strs.push(a),Kn(e.wbrels,-1,"sharedStrings."+r,an.SST)),a="xl/workbook."+r,Wr(s,a,EF(t)),i.workbooks.push(a),Kn(e.rels,1,a,an.WB),a="xl/theme/theme1.xml",Wr(s,a,Wb(t.Themes,e)),i.themes.push(a),Kn(e.wbrels,-1,"theme/theme1.xml",an.THEME),a="xl/styles."+r,Wr(s,a,rF(t,e)),i.styles.push(a),Kn(e.wbrels,-1,"styles."+r,an.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",Wr(s,a,t.vbaraw),i.vba.push(a),Kn(e.wbrels,-1,"vbaProject.bin",an.VBA)),a="xl/metadata."+r,Wr(s,a,sF()),i.metadata.push(a),Kn(e.wbrels,-1,"metadata."+r,an.XLMETA),d.length>1&&(a="xl/persons/person.xml",Wr(s,a,qee(d)),i.people.push(a),Kn(e.wbrels,-1,"persons/person.xml",an.PEOPLE)),Wr(s,"[Content_Types].xml",bR(i,e)),Wr(s,"_rels/.rels",b1(e.rels)),Wr(s,"xl/_rels/workbook."+r+".rels",b1(e.wbrels)),delete e.revssf,delete e.ssf,s}function r_(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=yl(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Oae(t,e){return _r.find(t,"EncryptedPackage")?Fae(t,e):NF(t,e)}function Mae(t,e){var r,n=t,i=e||{};return i.type||(i.type=en&&Buffer.isBuffer(t)?"buffer":"base64"),r=YP(n,i),Rae(r,i)}function DF(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return cw(t.slice(r),e);default:break e}return X1.to_workbook(t,e)}function Bae(t,e){var r="",n=r_(t,e);switch(e.type){case"base64":r=yl(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Yf(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=ni(r)),e.type="binary",DF(r,e)}function Vae(t,e){var r=t;return e.type=="base64"&&(r=yl(r)),r=ig.utils.decode(1200,r.slice(2),"str"),e.type="binary",DF(r,e)}function Uae(t){return t.match(/[^\x00-\x7F]/)?nu(t):t}function N4(t,e,r,n){return n?(r.type="string",X1.to_workbook(t,r)):X1.to_workbook(e,r)}function fw(t,e){bb();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return fw(new Uint8Array(t),(r=Si(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,i=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),k1={},r.dateNF&&(k1.dateNF=r.dateNF),r.type||(r.type=en&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=en?"buffer":"binary",n=jX(t),typeof Uint8Array<"u"&&!en&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=Uae(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return r=Si(r),r.type="array",fw(_b(n),r)}switch((i=r_(n,r))[0]){case 208:if(i[1]===207&&i[2]===17&&i[3]===224&&i[4]===161&&i[5]===177&&i[6]===26&&i[7]===225)return Oae(_r.read(n,r),r);break;case 9:if(i[1]<=8)return NF(n,r);break;case 60:return cw(n,r);case 73:if(i[1]===73&&i[2]===42&&i[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(i[1]===68)return WJ(n,r);break;case 84:if(i[1]===65&&i[2]===66&&i[3]===76)return WR.to_workbook(n,r);break;case 80:return i[1]===75&&i[2]<9&&i[3]<9?Mae(n,r):N4(t,n,r,s);case 239:return i[3]===60?cw(n,r):N4(t,n,r,s);case 255:if(i[1]===254)return Vae(n,r);if(i[1]===0&&i[2]===2&&i[3]===0)return Rf.to_workbook(n,r);break;case 0:if(i[1]===0&&(i[2]>=2&&i[3]===0||i[2]===0&&(i[3]===8||i[3]===9)))return Rf.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return lw.to_workbook(n,r);case 123:if(i[1]===92&&i[2]===114&&i[3]===116)return ZR.to_workbook(n,r);break;case 10:case 13:case 32:return Bae(n,r);case 137:if(i[1]===80&&i[2]===78&&i[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return qJ.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?lw.to_workbook(n,r):N4(t,n,r,s)}function OF(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Wg(e.file,_r.write(t,{type:en?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return _r.write(t,e)}function zae(t,e){var r=Si(e||{}),n=Lae(t,r);return $ae(n,r)}function $ae(t,e){var r={},n=en?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?_r.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(R5(i))}return e.password&&typeof encrypt_agile<"u"?OF(encrypt_agile(i,e.password),e):e.type==="file"?Wg(e.file,i):e.type=="string"?ni(i):i}function Hae(t,e){var r=e||{},n=Use(t,r);return OF(n,r)}function Xc(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return sg(nu(n));case"binary":return nu(n);case"string":return t;case"file":return Wg(e.file,n,"utf8");case"buffer":return en?hd(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Xc(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function qae(t,e){switch(e.type){case"base64":return sg(t);case"binary":return t;case"string":return t;case"file":return Wg(e.file,t,"binary");case"buffer":return en?hd(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function dx(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?sg(r):e.type=="string"?ni(r):r;case"file":return Wg(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function MF(t,e){bb(),Oie(t);var r=Si(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=MF(t,r);return r.type="array",R5(n)}var i=0;if(r.sheet&&(typeof r.sheet=="number"?i=r.sheet:i=t.SheetNames.indexOf(r.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Xc(Lse(t,r),r);case"slk":case"sylk":return Xc(qR.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"htm":case"html":return Xc(IF(t.Sheets[t.SheetNames[i]],r),r);case"txt":return qae(BF(t.Sheets[t.SheetNames[i]],r),r);case"csv":return Xc(n_(t.Sheets[t.SheetNames[i]],r),r,"\uFEFF");case"dif":return Xc(WR.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"dbf":return dx(lw.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"prn":return Xc(X1.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"rtf":return Xc(ZR.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"eth":return Xc(GR.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"fods":return Xc(LF(t,r),r);case"wk1":return dx(Rf.sheet_to_wk1(t.Sheets[t.SheetNames[i]],r),r);case"wk3":return dx(Rf.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),dx(AF(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Hae(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return zae(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Wae(t,e,r,n,i,s,a,o){var l=Cs(r),c=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),p=!0,g=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:r,enumerable:!1})}catch{g.__rowNum__=r}else g.__rowNum__=r;if(!a||t[r])for(var m=e.s.c;m<=e.e.c;++m){var w=a?t[r][m]:t[n[m]+l];if(w===void 0||w.t===void 0){if(c===void 0)continue;s[m]!=null&&(g[s[m]]=c);continue}var y=w.v;switch(w.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+w.t)}if(s[m]!=null){if(y==null)if(w.t=="e"&&y===null)g[s[m]]=null;else if(c!==void 0)g[s[m]]=c;else if(d&&y===null)g[s[m]]=null;else continue;else g[s[m]]=d&&(w.t!=="n"||w.t==="n"&&o.rawNumbers!==!1)?y:sd(w,y,o);y!=null&&(p=!1)}}return{row:g,isempty:p}}function Bv(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},d=c.range!=null?c.range:t["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof d){case"string":l=Sn(d);break;case"number":l=Sn(t["!ref"]),l.s.r=d;break;default:l=d}n>0&&(i=0);var p=Cs(l.s.r),g=[],m=[],w=0,y=0,k=Array.isArray(t),T=l.s.r,O=0,P={};k&&!t[T]&&(t[T]=[]);var V=c.skipHidden&&t["!cols"]||[],Y=c.skipHidden&&t["!rows"]||[];for(O=l.s.c;O<=l.e.c;++O)if(!(V[O]||{}).hidden)switch(g[O]=Wi(O),r=k?t[T][O]:t[g[O]+p],n){case 1:s[O]=O-l.s.c;break;case 2:s[O]=g[O];break;case 3:s[O]=c.header[O-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=sd(r,null,c),y=P[a]||0,!y)P[a]=1;else{do o=a+"_"+y++;while(P[o]);P[a]=y,P[o]=1}s[O]=o}for(T=l.s.r+i;T<=l.e.r;++T)if(!(Y[T]||{}).hidden){var G=Wae(t,l,T,g,n,s,k,c);(G.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(m[w++]=G.row)}return m.length=w,m}var _E=/"/g;function Gae(t,e,r,n,i,s,a,o){for(var l=!0,c=[],d="",p=Cs(r),g=e.s.c;g<=e.e.c;++g)if(n[g]){var m=o.dense?(t[r]||[])[g]:t[n[g]+p];if(m==null)d="";else if(m.v!=null){l=!1,d=""+(o.rawNumbers&&m.t=="n"?m.v:sd(m,null,o));for(var w=0,y=0;w!==d.length;++w)if((y=d.charCodeAt(w))===i||y===s||y===34||o.forceQuotes){d='"'+d.replace(_E,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(l=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(_E,'""')+'"')):d="";c.push(d)}return o.blankrows===!1&&l?null:c.join(a)}function n_(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var i=Sn(t["!ref"]),s=n.FS!==void 0?n.FS:",",a=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((s=="|"?"\\|":s)+"+$"),d="",p=[];n.dense=Array.isArray(t);for(var g=n.skipHidden&&t["!cols"]||[],m=n.skipHidden&&t["!rows"]||[],w=i.s.c;w<=i.e.c;++w)(g[w]||{}).hidden||(p[w]=Wi(w));for(var y=0,k=i.s.r;k<=i.e.r;++k)(m[k]||{}).hidden||(d=Gae(t,i,k,p,a,l,s,n),d!=null&&(n.strip&&(d=d.replace(c,"")),(d||n.blankrows!==!1)&&r.push((y++?o:"")+d)));return delete n.dense,r.join("")}function BF(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=n_(t,e);return r}function Kae(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var i=Sn(t["!ref"]),s="",a=[],o,l=[],c=Array.isArray(t);for(o=i.s.c;o<=i.e.c;++o)a[o]=Wi(o);for(var d=i.s.r;d<=i.e.r;++d)for(s=Cs(d),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,r=c?(t[d]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function VF(t,e,r){var n=r||{},i=+!n.skipHeader,s=t||{},a=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?Gi(n.origin):n.origin;a=l.r,o=l.c}var c,d={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var p=Sn(s["!ref"]);d.e.c=Math.max(d.e.c,p.e.c),d.e.r=Math.max(d.e.r,p.e.r),a==-1&&(a=p.e.r+1,d.e.r=a+e.length-1+i)}else a==-1&&(a=0,d.e.r=e.length-1+i);var g=n.header||[],m=0;e.forEach(function(y,k){cs(y).forEach(function(T){(m=g.indexOf(T))==-1&&(g[m=g.length]=T);var O=y[T],P="z",V="",Y=Rr({c:o+m,r:a+k+i});c=xg(s,Y),O&&typeof O=="object"&&!(O instanceof Date)?s[Y]=O:(typeof O=="number"?P="n":typeof O=="boolean"?P="b":typeof O=="string"?P="s":O instanceof Date?(P="d",n.cellDates||(P="n",O=ea(O)),V=n.dateNF||Ar[14]):O===null&&n.nullError&&(P="e",O=0),c?(c.t=P,c.v=O,delete c.w,delete c.R,V&&(c.z=V)):s[Y]=c={t:P,v:O},V&&(c.z=V))})}),d.e.c=Math.max(d.e.c,o+g.length-1);var w=Cs(a);if(i)for(m=0;m<g.length;++m)s[Wi(m+o)+w]={t:"s",v:g[m]};return s["!ref"]=Hr(d),s}function Xae(t,e){return VF(null,t,e)}function xg(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Gi(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?xg(t,Rr(e)):xg(t,Rr({r:e,c:r||0}))}function Yae(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function i_(){return{SheetNames:[],Sheets:{}}}function s_(t,e,r,n){var i=1;if(!r)for(;i<=65535&&t.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||r;for(++i;i<=65535&&t.SheetNames.indexOf(r=a+i)!=-1;++i);}if(kF(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Qae(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=Yae(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Jae(t,e){return t.z=e,t}function UF(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Zae(t,e,r){return UF(t,"#"+e,r)}function eoe(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function toe(t,e,r,n){for(var i=typeof e!="string"?e:Sn(e),s=typeof e=="string"?e:Hr(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=xg(t,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=r,n&&(l.D=!0))}return t}var zx={encode_col:Wi,encode_row:Cs,encode_cell:Rr,encode_range:Hr,decode_col:Lb,decode_row:Fb,split_cell:hY,decode_cell:Gi,decode_range:Wo,format_cell:sd,sheet_add_aoa:pR,sheet_add_json:VF,sheet_add_dom:PF,aoa_to_sheet:gp,json_to_sheet:Xae,table_to_sheet:RF,table_to_book:cae,sheet_to_csv:n_,sheet_to_txt:BF,sheet_to_json:Bv,sheet_to_html:IF,sheet_to_formulae:Kae,sheet_to_row_object_array:Bv,sheet_get_cell:xg,book_new:i_,book_append_sheet:s_,book_set_sheet_visibility:Qae,cell_set_number_format:Jae,cell_set_hyperlink:UF,cell_set_internal_link:Zae,cell_add_comment:eoe,sheet_set_array_formula:toe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const roe=t=>new Promise((e,r)=>{RP.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>e(n.data),error:r})}),noe=async t=>{const e=await t.arrayBuffer(),r=fw(e,{type:"array"}),n=r.Sheets[r.SheetNames[0]];return zx.sheet_to_json(n)};function zF({pharmacyId:t,onClose:e}){const[r,n]=M.useState("");M.useEffect(()=>{const{overflow:o}=document.body.style;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=o}},[]);const i=()=>{const o=[{name:"Paracetamol",price:800,description:"OTC analgesic",image:"https://...",category:"Over-the-Counter",stock:50,sku:"PAR-500"},{name:"Ibuprofen",price:1200,description:"NSAID",image:"https://...",category:"Over-the-Counter",stock:30,sku:"IBU-200"}],l=Object.keys(o[0]),c=[l.join(","),...o.map(m=>l.map(w=>m[w]).join(","))].join(`
`),d=new Blob([c],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(d),g=document.createElement("a");g.href=p,g.download="pharmasea_inventory_template.csv",g.click(),URL.revokeObjectURL(p)},s=async o=>{try{n("");const l=o?.[0];if(!l)return;let c=[];l.name.endsWith(".csv")?c=await roe(l):c=await noe(l);const d=c.map(p=>({name:p.name,price:Number(p.price),description:p.description||"",image:p.image||"",category:p.category||"Over-the-Counter",stock:Number(p.stock||0),sku:p.sku||""})).filter(p=>p.name&&p.price);if(!d.length)throw new Error("No valid rows found. Expect headers: name, price, description, image, category, stock, sku");await rP(d,t),e()}catch(l){n(l.message||"Failed to parse file")}},a=f.jsx("div",{className:`
        fixed inset-0 z-[100]
        grid place-items-center
        bg-black/30 backdrop-blur-sm
        min-h-[100svh]
        animate-fade-in
      `,onClick:e,children:f.jsxs("div",{className:`
          bg-white rounded-3xl p-6 w-[92vw] max-w-sm
          shadow-xl border border-[#9ED3FF]
          max-h-[85svh] overflow-auto
          card-interactive hover:shadow-2xl transition-all duration-300
          animate-bounce-in
        `,onClick:o=>o.stopPropagation(),children:[f.jsx("div",{className:"text-lg font-light font-poppins mb-4 text-black animate-text-reveal",children:"Bulk Upload Products"}),f.jsx("div",{className:"space-y-3 animate-fade-in",style:{animationDelay:"0.1s"},children:f.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none focus:border-sky-500 dark:border-gray-600 transition-colors duration-200 hover:border-sky-400",placeholder:"CSV or XLSX File",type:"file",onChange:o=>s(o.target.files),accept:".csv,.xlsx"})}),f.jsxs("div",{className:"flex gap-2 mt-6 animate-fade-in-up",style:{animationDelay:"0.2s"},children:[f.jsx("button",{onClick:i,className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700 btn-interactive hover:scale-105 active:scale-95 transition-all duration-200",children:"Download CSV template"}),f.jsx("button",{className:"flex-1 rounded-full border border-zinc-300 text-zinc-500 text-[13px] font-light py-2 btn-interactive hover:border-zinc-400 hover:scale-105 active:scale-95 transition-all duration-200",onClick:e,children:"Cancel"})]}),r&&f.jsx("div",{className:"mt-3 text-red-600 text-sm animate-shake animate-fade-in",children:r})]})});return os.createPortal(a,document.body)}function Xn(t){"@babel/helpers - typeof";return Xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xn(t)}var Cc=Uint8Array,ml=Uint16Array,a_=Int32Array,o_=new Cc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l_=new Cc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),kE=new Cc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$F=function(t,e){for(var r=new ml(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new a_(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)i[s]=s-r[n]<<5|n;return{b:r,r:i}},HF=$F(o_,2),ioe=HF.b,hw=HF.r;ioe[28]=258,hw[258]=28;var soe=$F(l_,0),EE=soe.r,pw=new ml(32768);for(var ki=0;ki<32768;++ki){var Kd=(ki&43690)>>1|(ki&21845)<<1;Kd=(Kd&52428)>>2|(Kd&13107)<<2,Kd=(Kd&61680)>>4|(Kd&3855)<<4,pw[ki]=((Kd&65280)>>8|(Kd&255)<<8)>>1}var Mm=(function(t,e,r){for(var n=t.length,i=0,s=new ml(e);i<n;++i)t[i]&&++s[t[i]-1];var a=new ml(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(r){o=new ml(1<<e);var l=15-e;for(i=0;i<n;++i)if(t[i])for(var c=i<<4|t[i],d=e-t[i],p=a[t[i]-1]++<<d,g=p|(1<<d)-1;p<=g;++p)o[pw[p]>>l]=c}else for(o=new ml(n),i=0;i<n;++i)t[i]&&(o[i]=pw[a[t[i]-1]++]>>15-t[i]);return o}),th=new Cc(288);for(var ki=0;ki<144;++ki)th[ki]=8;for(var ki=144;ki<256;++ki)th[ki]=9;for(var ki=256;ki<280;++ki)th[ki]=7;for(var ki=280;ki<288;++ki)th[ki]=8;var Vv=new Cc(32);for(var ki=0;ki<32;++ki)Vv[ki]=5;var aoe=Mm(th,9,0),ooe=Mm(Vv,5,0),qF=function(t){return(t+7)/8|0},loe=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Cc(t.subarray(e,r))},Ou=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},am=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},A4=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,s=r.slice();if(!i)return{t:GF,l:0};if(i==1){var a=new Cc(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(Y,G){return Y.f-G.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],c=0,d=1,p=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=i-1;)o=r[r[c].f<r[p].f?c++:p++],l=r[c!=d&&r[c].f<r[p].f?c++:p++],r[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var g=s[0].s,n=1;n<i;++n)s[n].s>g&&(g=s[n].s);var m=new ml(g+1),w=mw(r[d-1],m,0);if(w>e){var n=0,y=0,k=w-e,T=1<<k;for(s.sort(function(G,L){return m[L.s]-m[G.s]||G.f-L.f});n<i;++n){var O=s[n].s;if(m[O]>e)y+=T-(1<<w-m[O]),m[O]=e;else break}for(y>>=k;y>0;){var P=s[n].s;m[P]<e?y-=1<<e-m[P]++-1:++n}for(;n>=0&&y;--n){var V=s[n].s;m[V]==e&&(--m[V],++y)}w=e}return{t:new Cc(m),l:w}},mw=function(t,e,r){return t.s==-1?Math.max(mw(t.l,e,r+1),mw(t.r,e,r+1)):e[t.s]=r},SE=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new ml(++e),n=0,i=t[0],s=1,a=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=t[o]}return{c:r.subarray(0,n),n:e}},om=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},WF=function(t,e,r){var n=r.length,i=qF(e+2);t[i]=n&255,t[i+1]=n>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<n;++s)t[i+s+4]=r[s];return(i+4+n)*8},CE=function(t,e,r,n,i,s,a,o,l,c,d){Ou(e,d++,r),++i[256];for(var p=A4(i,15),g=p.t,m=p.l,w=A4(s,15),y=w.t,k=w.l,T=SE(g),O=T.c,P=T.n,V=SE(y),Y=V.c,G=V.n,L=new ml(19),N=0;N<O.length;++N)++L[O[N]&31];for(var N=0;N<Y.length;++N)++L[Y[N]&31];for(var C=A4(L,7),R=C.t,A=C.l,F=19;F>4&&!R[kE[F-1]];--F);var B=c+5<<3,te=om(i,th)+om(s,Vv)+a,pe=om(i,g)+om(s,y)+a+14+3*F+om(L,R)+2*L[16]+3*L[17]+7*L[18];if(l>=0&&B<=te&&B<=pe)return WF(e,d,t.subarray(l,l+c));var Ee,ve,re,W;if(Ou(e,d,1+(pe<te)),d+=2,pe<te){Ee=Mm(g,m,0),ve=g,re=Mm(y,k,0),W=y;var ne=Mm(R,A,0);Ou(e,d,P-257),Ou(e,d+5,G-1),Ou(e,d+10,F-4),d+=14;for(var N=0;N<F;++N)Ou(e,d+3*N,R[kE[N]]);d+=3*F;for(var Q=[O,Y],I=0;I<2;++I)for(var H=Q[I],N=0;N<H.length;++N){var X=H[N]&31;Ou(e,d,ne[X]),d+=R[X],X>15&&(Ou(e,d,H[N]>>5&127),d+=H[N]>>12)}}else Ee=aoe,ve=th,re=ooe,W=Vv;for(var N=0;N<o;++N){var J=n[N];if(J>255){var X=J>>18&31;am(e,d,Ee[X+257]),d+=ve[X+257],X>7&&(Ou(e,d,J>>23&31),d+=o_[X]);var ue=J&31;am(e,d,re[ue]),d+=W[ue],ue>3&&(am(e,d,J>>5&8191),d+=l_[ue])}else am(e,d,Ee[J]),d+=ve[J]}return am(e,d,Ee[256]),d+ve[256]},coe=new a_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),GF=new Cc(0),uoe=function(t,e,r,n,i,s){var a=s.z||t.length,o=new Cc(n+a+5*(1+Math.ceil(a/7e3))+i),l=o.subarray(n,o.length-i),c=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var p=coe[e-1],g=p>>13,m=p&8191,w=(1<<r)-1,y=s.p||new ml(32768),k=s.h||new ml(w+1),T=Math.ceil(r/3),O=2*T,P=function(Re){return(t[Re]^t[Re+1]<<T^t[Re+2]<<O)&w},V=new a_(25e3),Y=new ml(288),G=new ml(32),L=0,N=0,C=s.i||0,R=0,A=s.w||0,F=0;C+2<a;++C){var B=P(C),te=C&32767,pe=k[B];if(y[te]=pe,k[B]=te,A<=C){var Ee=a-C;if((L>7e3||R>24576)&&(Ee>423||!c)){d=CE(t,l,0,V,Y,G,N,R,F,C-F,d),R=L=N=0,F=C;for(var ve=0;ve<286;++ve)Y[ve]=0;for(var ve=0;ve<30;++ve)G[ve]=0}var re=2,W=0,ne=m,Q=te-pe&32767;if(Ee>2&&B==P(C-Q))for(var I=Math.min(g,Ee)-1,H=Math.min(32767,C),X=Math.min(258,Ee);Q<=H&&--ne&&te!=pe;){if(t[C+re]==t[C+re-Q]){for(var J=0;J<X&&t[C+J]==t[C+J-Q];++J);if(J>re){if(re=J,W=Q,J>I)break;for(var ue=Math.min(Q,J-2),we=0,ve=0;ve<ue;++ve){var fe=C-Q+ve&32767,me=y[fe],be=fe-me&32767;be>we&&(we=be,pe=fe)}}}te=pe,pe=y[te],Q+=te-pe&32767}if(W){V[R++]=268435456|hw[re]<<18|EE[W];var Le=hw[re]&31,ee=EE[W]&31;N+=o_[Le]+l_[ee],++Y[257+Le],++G[ee],A=C+re,++L}else V[R++]=t[C],++Y[t[C]]}}for(C=Math.max(C,A);C<a;++C)V[R++]=t[C],++Y[t[C]];d=CE(t,l,c,V,Y,G,N,R,F,C-F,d),c||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=k,s.p=y,s.i=C,s.w=A)}else{for(var C=s.w||0;C<a+c;C+=65535){var Be=C+65535;Be>=a&&(l[d/8|0]=c,Be=a),d=WF(l,d+1,t.subarray(C,Be))}s.i=a}return loe(o,0,n+qF(d)+i)},KF=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,s=r.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=n+=r[a];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}t=n,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},doe=function(t,e,r,n,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new Cc(s.length+t.length);a.set(s),a.set(t,s.length),t=a,i.w=s.length}return uoe(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,i)},XF=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},foe=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=KF();i.p(e.dictionary),XF(t,2,i.d())}};function gw(t,e){e||(e={});var r=KF();r.p(t);var n=doe(t,e,e.dictionary?6:2,4);return foe(n,e),XF(n,n.length-4,r.d()),n}var hoe=typeof TextDecoder<"u"&&new TextDecoder,poe=0;try{hoe.decode(GF,{stream:!0}),poe=1}catch{}function moe(t){if(Array.isArray(t))return t}function goe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function TE(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function xoe(t,e){if(t){if(typeof t=="string")return TE(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?TE(t,e):void 0}}function voe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NE(t,e){return moe(t)||goe(t,e)||xoe(t,e)||voe()}function AE(t,e="utf8"){return new TextDecoder(e).decode(t)}const yoe=new TextEncoder;function woe(t){return yoe.encode(t)}const boe=1024*8,_oe=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),I4={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class c_{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=boe,r={}){let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=r.offset?r.offset>>>0:0,s=e.byteLength-i;let a=i;(ArrayBuffer.isView(e)||e instanceof c_)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=I4[r].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+n);if(this.littleEndian===_oe&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+n));o.reverse();const l=new I4[r](o.buffer);return this.offset+=n,l.reverse(),l}const a=new I4[r](s);return this.offset+=n,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return AE(this.readBytes(e))}decodeText(e=1,r="utf8"){return AE(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(woe(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function vp(t){let e=t.length;for(;--e>=0;)t[e]=0}const koe=3,Eoe=258,YF=29,Soe=256,Coe=Soe+1+YF,QF=30,Toe=512,Noe=new Array((Coe+2)*2);vp(Noe);const Aoe=new Array(QF*2);vp(Aoe);const Ioe=new Array(Toe);vp(Ioe);const Poe=new Array(Eoe-koe+1);vp(Poe);const Roe=new Array(YF);vp(Roe);const Foe=new Array(QF);vp(Foe);const Loe=(t,e,r,n)=>{let i=t&65535|0,s=t>>>16&65535|0,a=0;for(;r!==0;){a=r>2e3?2e3:r,r-=a;do i=i+e[n++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0};var xw=Loe;const joe=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},Doe=new Uint32Array(joe()),Ooe=(t,e,r,n)=>{const i=Doe,s=n+r;t^=-1;for(let a=n;a<s;a++)t=t>>>8^i[(t^e[a])&255];return t^-1};var Gc=Ooe,vw={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},JF={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Moe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Boe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)Moe(r,n)&&(t[n]=r[n])}}return t},Voe=t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,i=0,s=t.length;n<s;n++){let a=t[n];r.set(a,i),i+=a.length}return r},ZF={assign:Boe,flattenChunks:Voe};let eL=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{eL=!1}const vg=new Uint8Array(256);for(let t=0;t<256;t++)vg[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;vg[254]=vg[254]=1;var Uoe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,i,s,a=t.length,o=0;for(i=0;i<a;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),s=0,i=0;s<o;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const zoe=(t,e)=>{if(e<65534&&t.subarray&&eL)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var $oe=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,i;const s=new Array(r*2);for(i=0,n=0;n<r;){let a=t[n++];if(a<128){s[i++]=a;continue}let o=vg[a];if(o>4){s[i++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<r;)a=a<<6|t[n++]&63,o--;if(o>1){s[i++]=65533;continue}a<65536?s[i++]=a:(a-=65536,s[i++]=55296|a>>10&1023,s[i++]=56320|a&1023)}return zoe(s,i)},Hoe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+vg[t[r]]>e?r:e},yw={string2buf:Uoe,buf2string:$oe,utf8border:Hoe};function qoe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Woe=qoe;const fx=16209,Goe=16191;var Koe=function(e,r){let n,i,s,a,o,l,c,d,p,g,m,w,y,k,T,O,P,V,Y,G,L,N,C,R;const A=e.state;n=e.next_in,C=e.input,i=n+(e.avail_in-5),s=e.next_out,R=e.output,a=s-(r-e.avail_out),o=s+(e.avail_out-257),l=A.dmax,c=A.wsize,d=A.whave,p=A.wnext,g=A.window,m=A.hold,w=A.bits,y=A.lencode,k=A.distcode,T=(1<<A.lenbits)-1,O=(1<<A.distbits)-1;e:do{w<15&&(m+=C[n++]<<w,w+=8,m+=C[n++]<<w,w+=8),P=y[m&T];t:for(;;){if(V=P>>>24,m>>>=V,w-=V,V=P>>>16&255,V===0)R[s++]=P&65535;else if(V&16){Y=P&65535,V&=15,V&&(w<V&&(m+=C[n++]<<w,w+=8),Y+=m&(1<<V)-1,m>>>=V,w-=V),w<15&&(m+=C[n++]<<w,w+=8,m+=C[n++]<<w,w+=8),P=k[m&O];r:for(;;){if(V=P>>>24,m>>>=V,w-=V,V=P>>>16&255,V&16){if(G=P&65535,V&=15,w<V&&(m+=C[n++]<<w,w+=8,w<V&&(m+=C[n++]<<w,w+=8)),G+=m&(1<<V)-1,G>l){e.msg="invalid distance too far back",A.mode=fx;break e}if(m>>>=V,w-=V,V=s-a,G>V){if(V=G-V,V>d&&A.sane){e.msg="invalid distance too far back",A.mode=fx;break e}if(L=0,N=g,p===0){if(L+=c-V,V<Y){Y-=V;do R[s++]=g[L++];while(--V);L=s-G,N=R}}else if(p<V){if(L+=c+p-V,V-=p,V<Y){Y-=V;do R[s++]=g[L++];while(--V);if(L=0,p<Y){V=p,Y-=V;do R[s++]=g[L++];while(--V);L=s-G,N=R}}}else if(L+=p-V,V<Y){Y-=V;do R[s++]=g[L++];while(--V);L=s-G,N=R}for(;Y>2;)R[s++]=N[L++],R[s++]=N[L++],R[s++]=N[L++],Y-=3;Y&&(R[s++]=N[L++],Y>1&&(R[s++]=N[L++]))}else{L=s-G;do R[s++]=R[L++],R[s++]=R[L++],R[s++]=R[L++],Y-=3;while(Y>2);Y&&(R[s++]=R[L++],Y>1&&(R[s++]=R[L++]))}}else if((V&64)===0){P=k[(P&65535)+(m&(1<<V)-1)];continue r}else{e.msg="invalid distance code",A.mode=fx;break e}break}}else if((V&64)===0){P=y[(P&65535)+(m&(1<<V)-1)];continue t}else if(V&32){A.mode=Goe;break e}else{e.msg="invalid literal/length code",A.mode=fx;break e}break}}while(n<i&&s<o);Y=w>>3,n-=Y,w-=Y<<3,m&=(1<<w)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=s<o?257+(o-s):257-(s-o),A.hold=m,A.bits=w};const Jh=15,IE=852,PE=592,RE=0,P4=1,FE=2,Xoe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Yoe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Qoe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Joe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Zoe=(t,e,r,n,i,s,a,o)=>{const l=o.bits;let c=0,d=0,p=0,g=0,m=0,w=0,y=0,k=0,T=0,O=0,P,V,Y,G,L,N=null,C;const R=new Uint16Array(Jh+1),A=new Uint16Array(Jh+1);let F=null,B,te,pe;for(c=0;c<=Jh;c++)R[c]=0;for(d=0;d<n;d++)R[e[r+d]]++;for(m=l,g=Jh;g>=1&&R[g]===0;g--);if(m>g&&(m=g),g===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,o.bits=1,0;for(p=1;p<g&&R[p]===0;p++);for(m<p&&(m=p),k=1,c=1;c<=Jh;c++)if(k<<=1,k-=R[c],k<0)return-1;if(k>0&&(t===RE||g!==1))return-1;for(A[1]=0,c=1;c<Jh;c++)A[c+1]=A[c]+R[c];for(d=0;d<n;d++)e[r+d]!==0&&(a[A[e[r+d]]++]=d);if(t===RE?(N=F=a,C=20):t===P4?(N=Xoe,F=Yoe,C=257):(N=Qoe,F=Joe,C=0),O=0,d=0,c=p,L=s,w=m,y=0,Y=-1,T=1<<m,G=T-1,t===P4&&T>IE||t===FE&&T>PE)return 1;for(;;){B=c-y,a[d]+1<C?(te=0,pe=a[d]):a[d]>=C?(te=F[a[d]-C],pe=N[a[d]-C]):(te=96,pe=0),P=1<<c-y,V=1<<w,p=V;do V-=P,i[L+(O>>y)+V]=B<<24|te<<16|pe|0;while(V!==0);for(P=1<<c-1;O&P;)P>>=1;if(P!==0?(O&=P-1,O+=P):O=0,d++,--R[c]===0){if(c===g)break;c=e[r+a[d]]}if(c>m&&(O&G)!==Y){for(y===0&&(y=m),L+=p,w=c-y,k=1<<w;w+y<g&&(k-=R[w+y],!(k<=0));)w++,k<<=1;if(T+=1<<w,t===P4&&T>IE||t===FE&&T>PE)return 1;Y=O&G,i[Y]=m<<24|w<<16|L-s|0}}return O!==0&&(i[L+O]=c-y<<24|64<<16|0),o.bits=m,0};var Bm=Zoe;const ele=0,tL=1,rL=2,{Z_FINISH:LE,Z_BLOCK:tle,Z_TREES:hx,Z_OK:rh,Z_STREAM_END:rle,Z_NEED_DICT:nle,Z_STREAM_ERROR:Kl,Z_DATA_ERROR:nL,Z_MEM_ERROR:iL,Z_BUF_ERROR:ile,Z_DEFLATED:jE}=JF,U5=16180,DE=16181,OE=16182,ME=16183,BE=16184,VE=16185,UE=16186,zE=16187,$E=16188,HE=16189,Uv=16190,Mu=16191,R4=16192,qE=16193,F4=16194,WE=16195,GE=16196,KE=16197,XE=16198,px=16199,mx=16200,YE=16201,QE=16202,JE=16203,ZE=16204,eS=16205,L4=16206,tS=16207,rS=16208,Fi=16209,sL=16210,aL=16211,sle=852,ale=592,ole=15,lle=ole,nS=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function cle(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const yh=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<U5||e.mode>aL?1:0},oL=t=>{if(yh(t))return Kl;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=U5,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(sle),e.distcode=e.distdyn=new Int32Array(ale),e.sane=1,e.back=-1,rh},lL=t=>{if(yh(t))return Kl;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,oL(t)},cL=(t,e)=>{let r;if(yh(t))return Kl;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Kl:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,lL(t))},uL=(t,e)=>{if(!t)return Kl;const r=new cle;t.state=r,r.strm=t,r.window=null,r.mode=U5;const n=cL(t,e);return n!==rh&&(t.state=null),n},ule=t=>uL(t,lle);let iS=!0,j4,D4;const dle=t=>{if(iS){j4=new Int32Array(512),D4=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Bm(tL,t.lens,0,288,j4,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Bm(rL,t.lens,0,32,D4,0,t.work,{bits:5}),iS=!1}t.lencode=j4,t.lenbits=9,t.distcode=D4,t.distbits=5},dL=(t,e,r,n)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(e.subarray(r-n,r-n+i),s.wnext),n-=i,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},fle=(t,e)=>{let r,n,i,s,a,o,l,c,d,p,g,m,w,y,k=0,T,O,P,V,Y,G,L,N;const C=new Uint8Array(4);let R,A;const F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(yh(t)||!t.output||!t.input&&t.avail_in!==0)return Kl;r=t.state,r.mode===Mu&&(r.mode=R4),a=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,c=r.hold,d=r.bits,p=o,g=l,N=rh;e:for(;;)switch(r.mode){case U5:if(r.wrap===0){r.mode=R4;break}for(;d<16;){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}if(r.wrap&2&&c===35615){r.wbits===0&&(r.wbits=15),r.check=0,C[0]=c&255,C[1]=c>>>8&255,r.check=Gc(r.check,C,2,0),c=0,d=0,r.mode=DE;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=Fi;break}if((c&15)!==jE){t.msg="unknown compression method",r.mode=Fi;break}if(c>>>=4,d-=4,L=(c&15)+8,r.wbits===0&&(r.wbits=L),L>15||L>r.wbits){t.msg="invalid window size",r.mode=Fi;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=c&512?HE:Mu,c=0,d=0;break;case DE:for(;d<16;){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}if(r.flags=c,(r.flags&255)!==jE){t.msg="unknown compression method",r.mode=Fi;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Fi;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&r.wrap&4&&(C[0]=c&255,C[1]=c>>>8&255,r.check=Gc(r.check,C,2,0)),c=0,d=0,r.mode=OE;case OE:for(;d<32;){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}r.head&&(r.head.time=c),r.flags&512&&r.wrap&4&&(C[0]=c&255,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,r.check=Gc(r.check,C,4,0)),c=0,d=0,r.mode=ME;case ME:for(;d<16;){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&r.wrap&4&&(C[0]=c&255,C[1]=c>>>8&255,r.check=Gc(r.check,C,2,0)),c=0,d=0,r.mode=BE;case BE:if(r.flags&1024){for(;d<16;){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&r.wrap&4&&(C[0]=c&255,C[1]=c>>>8&255,r.check=Gc(r.check,C,2,0)),c=0,d=0}else r.head&&(r.head.extra=null);r.mode=VE;case VE:if(r.flags&1024&&(m=r.length,m>o&&(m=o),m&&(r.head&&(L=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+m),L)),r.flags&512&&r.wrap&4&&(r.check=Gc(r.check,n,m,s)),o-=m,s+=m,r.length-=m),r.length))break e;r.length=0,r.mode=UE;case UE:if(r.flags&2048){if(o===0)break e;m=0;do L=n[s+m++],r.head&&L&&r.length<65536&&(r.head.name+=String.fromCharCode(L));while(L&&m<o);if(r.flags&512&&r.wrap&4&&(r.check=Gc(r.check,n,m,s)),o-=m,s+=m,L)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=zE;case zE:if(r.flags&4096){if(o===0)break e;m=0;do L=n[s+m++],r.head&&L&&r.length<65536&&(r.head.comment+=String.fromCharCode(L));while(L&&m<o);if(r.flags&512&&r.wrap&4&&(r.check=Gc(r.check,n,m,s)),o-=m,s+=m,L)break e}else r.head&&(r.head.comment=null);r.mode=$E;case $E:if(r.flags&512){for(;d<16;){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}if(r.wrap&4&&c!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Fi;break}c=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Mu;break;case HE:for(;d<32;){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}t.adler=r.check=nS(c),c=0,d=0,r.mode=Uv;case Uv:if(r.havedict===0)return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=c,r.bits=d,nle;t.adler=r.check=1,r.mode=Mu;case Mu:if(e===tle||e===hx)break e;case R4:if(r.last){c>>>=d&7,d-=d&7,r.mode=L4;break}for(;d<3;){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}switch(r.last=c&1,c>>>=1,d-=1,c&3){case 0:r.mode=qE;break;case 1:if(dle(r),r.mode=px,e===hx){c>>>=2,d-=2;break e}break;case 2:r.mode=GE;break;case 3:t.msg="invalid block type",r.mode=Fi}c>>>=2,d-=2;break;case qE:for(c>>>=d&7,d-=d&7;d<32;){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Fi;break}if(r.length=c&65535,c=0,d=0,r.mode=F4,e===hx)break e;case F4:r.mode=WE;case WE:if(m=r.length,m){if(m>o&&(m=o),m>l&&(m=l),m===0)break e;i.set(n.subarray(s,s+m),a),o-=m,s+=m,l-=m,a+=m,r.length-=m;break}r.mode=Mu;break;case GE:for(;d<14;){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}if(r.nlen=(c&31)+257,c>>>=5,d-=5,r.ndist=(c&31)+1,c>>>=5,d-=5,r.ncode=(c&15)+4,c>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Fi;break}r.have=0,r.mode=KE;case KE:for(;r.have<r.ncode;){for(;d<3;){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}r.lens[F[r.have++]]=c&7,c>>>=3,d-=3}for(;r.have<19;)r.lens[F[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,R={bits:r.lenbits},N=Bm(ele,r.lens,0,19,r.lencode,0,r.work,R),r.lenbits=R.bits,N){t.msg="invalid code lengths set",r.mode=Fi;break}r.have=0,r.mode=XE;case XE:for(;r.have<r.nlen+r.ndist;){for(;k=r.lencode[c&(1<<r.lenbits)-1],T=k>>>24,O=k>>>16&255,P=k&65535,!(T<=d);){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}if(P<16)c>>>=T,d-=T,r.lens[r.have++]=P;else{if(P===16){for(A=T+2;d<A;){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}if(c>>>=T,d-=T,r.have===0){t.msg="invalid bit length repeat",r.mode=Fi;break}L=r.lens[r.have-1],m=3+(c&3),c>>>=2,d-=2}else if(P===17){for(A=T+3;d<A;){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}c>>>=T,d-=T,L=0,m=3+(c&7),c>>>=3,d-=3}else{for(A=T+7;d<A;){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}c>>>=T,d-=T,L=0,m=11+(c&127),c>>>=7,d-=7}if(r.have+m>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Fi;break}for(;m--;)r.lens[r.have++]=L}}if(r.mode===Fi)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Fi;break}if(r.lenbits=9,R={bits:r.lenbits},N=Bm(tL,r.lens,0,r.nlen,r.lencode,0,r.work,R),r.lenbits=R.bits,N){t.msg="invalid literal/lengths set",r.mode=Fi;break}if(r.distbits=6,r.distcode=r.distdyn,R={bits:r.distbits},N=Bm(rL,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,R),r.distbits=R.bits,N){t.msg="invalid distances set",r.mode=Fi;break}if(r.mode=px,e===hx)break e;case px:r.mode=mx;case mx:if(o>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=c,r.bits=d,Koe(t,g),a=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,c=r.hold,d=r.bits,r.mode===Mu&&(r.back=-1);break}for(r.back=0;k=r.lencode[c&(1<<r.lenbits)-1],T=k>>>24,O=k>>>16&255,P=k&65535,!(T<=d);){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}if(O&&(O&240)===0){for(V=T,Y=O,G=P;k=r.lencode[G+((c&(1<<V+Y)-1)>>V)],T=k>>>24,O=k>>>16&255,P=k&65535,!(V+T<=d);){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}c>>>=V,d-=V,r.back+=V}if(c>>>=T,d-=T,r.back+=T,r.length=P,O===0){r.mode=eS;break}if(O&32){r.back=-1,r.mode=Mu;break}if(O&64){t.msg="invalid literal/length code",r.mode=Fi;break}r.extra=O&15,r.mode=YE;case YE:if(r.extra){for(A=r.extra;d<A;){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=QE;case QE:for(;k=r.distcode[c&(1<<r.distbits)-1],T=k>>>24,O=k>>>16&255,P=k&65535,!(T<=d);){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}if((O&240)===0){for(V=T,Y=O,G=P;k=r.distcode[G+((c&(1<<V+Y)-1)>>V)],T=k>>>24,O=k>>>16&255,P=k&65535,!(V+T<=d);){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}c>>>=V,d-=V,r.back+=V}if(c>>>=T,d-=T,r.back+=T,O&64){t.msg="invalid distance code",r.mode=Fi;break}r.offset=P,r.extra=O&15,r.mode=JE;case JE:if(r.extra){for(A=r.extra;d<A;){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Fi;break}r.mode=ZE;case ZE:if(l===0)break e;if(m=g-l,r.offset>m){if(m=r.offset-m,m>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Fi;break}m>r.wnext?(m-=r.wnext,w=r.wsize-m):w=r.wnext-m,m>r.length&&(m=r.length),y=r.window}else y=i,w=a-r.offset,m=r.length;m>l&&(m=l),l-=m,r.length-=m;do i[a++]=y[w++];while(--m);r.length===0&&(r.mode=mx);break;case eS:if(l===0)break e;i[a++]=r.length,l--,r.mode=mx;break;case L4:if(r.wrap){for(;d<32;){if(o===0)break e;o--,c|=n[s++]<<d,d+=8}if(g-=l,t.total_out+=g,r.total+=g,r.wrap&4&&g&&(t.adler=r.check=r.flags?Gc(r.check,i,g,a-g):xw(r.check,i,g,a-g)),g=l,r.wrap&4&&(r.flags?c:nS(c))!==r.check){t.msg="incorrect data check",r.mode=Fi;break}c=0,d=0}r.mode=tS;case tS:if(r.wrap&&r.flags){for(;d<32;){if(o===0)break e;o--,c+=n[s++]<<d,d+=8}if(r.wrap&4&&c!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Fi;break}c=0,d=0}r.mode=rS;case rS:N=rle;break e;case Fi:N=nL;break e;case sL:return iL;case aL:default:return Kl}return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=c,r.bits=d,(r.wsize||g!==t.avail_out&&r.mode<Fi&&(r.mode<L4||e!==LE))&&dL(t,t.output,t.next_out,g-t.avail_out),p-=t.avail_in,g-=t.avail_out,t.total_in+=p,t.total_out+=g,r.total+=g,r.wrap&4&&g&&(t.adler=r.check=r.flags?Gc(r.check,i,g,t.next_out-g):xw(r.check,i,g,t.next_out-g)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Mu?128:0)+(r.mode===px||r.mode===F4?256:0),(p===0&&g===0||e===LE)&&N===rh&&(N=ile),N},hle=t=>{if(yh(t))return Kl;let e=t.state;return e.window&&(e.window=null),t.state=null,rh},ple=(t,e)=>{if(yh(t))return Kl;const r=t.state;return(r.wrap&2)===0?Kl:(r.head=e,e.done=!1,rh)},mle=(t,e)=>{const r=e.length;let n,i,s;return yh(t)||(n=t.state,n.wrap!==0&&n.mode!==Uv)?Kl:n.mode===Uv&&(i=1,i=xw(i,e,r,0),i!==n.check)?nL:(s=dL(t,e,r,r),s?(n.mode=sL,iL):(n.havedict=1,rh))};var gle=lL,xle=cL,vle=oL,yle=ule,wle=uL,ble=fle,_le=hle,kle=ple,Ele=mle,Sle="pako inflate (from Nodeca project)",Vu={inflateReset:gle,inflateReset2:xle,inflateResetKeep:vle,inflateInit:yle,inflateInit2:wle,inflate:ble,inflateEnd:_le,inflateGetHeader:kle,inflateSetDictionary:Ele,inflateInfo:Sle};function Cle(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Tle=Cle;const fL=Object.prototype.toString,{Z_NO_FLUSH:Nle,Z_FINISH:Ale,Z_OK:yg,Z_STREAM_END:O4,Z_NEED_DICT:M4,Z_STREAM_ERROR:Ile,Z_DATA_ERROR:sS,Z_MEM_ERROR:Ple}=JF;function e2(t){this.options=ZF.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Woe,this.strm.avail_out=0;let r=Vu.inflateInit2(this.strm,e.windowBits);if(r!==yg)throw new Error(vw[r]);if(this.header=new Tle,Vu.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=yw.string2buf(e.dictionary):fL.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Vu.inflateSetDictionary(this.strm,e.dictionary),r!==yg)))throw new Error(vw[r])}e2.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?Ale:Nle,fL.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=Vu.inflate(r,a),s===M4&&i&&(s=Vu.inflateSetDictionary(r,i),s===yg?s=Vu.inflate(r,a):s===sS&&(s=M4));r.avail_in>0&&s===O4&&r.state.wrap>0&&t[r.next_in]!==0;)Vu.inflateReset(r),s=Vu.inflate(r,a);switch(s){case Ile:case sS:case M4:case Ple:return this.onEnd(s),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||s===O4))if(this.options.to==="string"){let l=yw.utf8border(r.output,r.next_out),c=r.next_out-l,d=yw.buf2string(r.output,l);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(l,l+c),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===yg&&o===0)){if(s===O4)return s=Vu.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};e2.prototype.onData=function(t){this.chunks.push(t)};e2.prototype.onEnd=function(t){t===yg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ZF.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Rle(t,e){const r=new e2(e);if(r.push(t),r.err)throw r.msg||vw[r.err];return r.result}var Fle=e2,Lle=Rle,jle={Inflate:Fle,inflate:Lle};const{Inflate:Dle,inflate:Ole}=jle;var aS=Dle,Mle=Ole;const hL=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;hL[t]=e}const oS=4294967295;function Ble(t,e,r){let n=t;for(let i=0;i<r;i++)n=hL[(n^e[i])&255]^n>>>8;return n}function Vle(t,e){return(Ble(oS,t,e)^oS)>>>0}function lS(t,e,r){const n=t.readUint32(),i=Vle(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function pL(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function mL(t,e,r,n){let i=0;for(;i<n;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+e[i-n]&255}function gL(t,e,r,n){let i=0;if(r.length===0)for(;i<n;i++)e[i]=t[i];else for(;i<n;i++)e[i]=t[i]+r[i]&255}function xL(t,e,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-i]+r[s]>>1)&255}}function vL(t,e,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+Ule(e[s-i],r[s],r[s-i])&255}}function Ule(t,e,r){const n=t+e-r,i=Math.abs(n-t),s=Math.abs(n-e),a=Math.abs(n-r);return i<=s&&i<=a?t:s<=a?e:r}function zle(t,e,r,n,i,s){switch(t){case 0:pL(e,r,i);break;case 1:mL(e,r,i,s);break;case 2:gL(e,r,n,i);break;case 3:xL(e,r,n,i,s);break;case 4:vL(e,r,n,i,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const $le=new Uint16Array([255]),Hle=new Uint8Array($le.buffer),qle=Hle[0]===255;function Wle(t){const{data:e,width:r,height:n,channels:i,depth:s}=t,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*i,l=new Uint8Array(n*r*o);let c=0;for(let d=0;d<7;d++){const p=a[d],g=Math.ceil((r-p.x)/p.xStep),m=Math.ceil((n-p.y)/p.yStep);if(g<=0||m<=0)continue;const w=g*o,y=new Uint8Array(w);for(let k=0;k<m;k++){const T=e[c++],O=e.subarray(c,c+w);c+=w;const P=new Uint8Array(w);zle(T,O,P,y,w,o),y.set(P);for(let V=0;V<g;V++){const Y=p.x+V*p.xStep,G=p.y+k*p.yStep;if(!(Y>=r||G>=n))for(let L=0;L<o;L++)l[(G*r+Y)*o+L]=P[V*o+L]}}}if(s===16){const d=new Uint16Array(l.buffer);if(qle)for(let p=0;p<d.length;p++)d[p]=Gle(d[p]);return d}else return l}function Gle(t){return(t&255)<<8|t>>8&255}const Kle=new Uint16Array([255]),Xle=new Uint8Array(Kle.buffer),Yle=Xle[0]===255,Qle=new Uint8Array(0);function cS(t){const{data:e,width:r,height:n,channels:i,depth:s}=t,a=Math.ceil(s/8)*i,o=Math.ceil(s/8*i*r),l=new Uint8Array(n*o);let c=Qle,d=0,p,g;for(let m=0;m<n;m++){switch(p=e.subarray(d+1,d+1+o),g=l.subarray(m*o,(m+1)*o),e[d]){case 0:pL(p,g,o);break;case 1:mL(p,g,o,a);break;case 2:gL(p,g,c,o);break;case 3:xL(p,g,c,o,a);break;case 4:vL(p,g,c,o,a);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}c=g,d+=o+1}if(s===16){const m=new Uint16Array(l.buffer);if(Yle)for(let w=0;w<m.length;w++)m[w]=Jle(m[w]);return m}else return l}function Jle(t){return(t&255)<<8|t>>8&255}const $x=Uint8Array.of(137,80,78,71,13,10,26,10);function uS(t){if(!Zle(t.readBytes($x.length)))throw new Error("wrong PNG signature")}function Zle(t){if(t.length<$x.length)return!1;for(let e=0;e<$x.length;e++)if(t[e]!==$x[e])return!1;return!0}const ece="tEXt",tce=0,yL=new TextDecoder("latin1");function rce(t){if(ice(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const nce=/^[\u0000-\u00FF]*$/;function ice(t){if(!nce.test(t))throw new Error("invalid latin1 text")}function sce(t,e,r){const n=wL(e);t[n]=ace(e,r-n.length-1)}function wL(t){for(t.mark();t.readByte()!==tce;);const e=t.offset;t.reset();const r=yL.decode(t.readBytes(e-t.offset-1));return t.skip(1),rce(r),r}function ace(t,e){return yL.decode(t.readBytes(e))}const cl={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},B4={UNKNOWN:-1,DEFLATE:0},dS={UNKNOWN:-1,ADAPTIVE:0},V4={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},gx={NONE:0,BACKGROUND:1,PREVIOUS:2},U4={SOURCE:0,OVER:1};class oce extends c_{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,r={}){super(e);const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new aS,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=B4.UNKNOWN,this._filterMethod=dS.UNKNOWN,this._interlaceMethod=V4.UNKNOWN,this._colorType=cl.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(uS(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeChunk(e,r)}return this.decodeImage(),this._png}decodeApng(){for(uS(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(e,r)}return this.decodeApngImage(),this._apng}decodeChunk(e,r){const n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case ece:sce(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?lS(this,e+4,r):this.skip(4)}decodeApngChunk(e,r){const n=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,r),this.offset=n+e;break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?lS(this,e+4,r):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=lce(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case cl.GREYSCALE:n=1;break;case cl.TRUECOLOUR:n=3;break;case cl.INDEXED_COLOUR:n=1;break;case cl.GREYSCALE_ALPHA:n=2;break;case cl.TRUECOLOUR_ALPHA:n=4;break;case cl.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==B4.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const r=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let i=0;i<r;i++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const r=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let r=e,n=this.offset+this.byteOffset;if(n+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case cl.GREYSCALE:case cl.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let r=0;r<e/2;r++)this._transparency[r]=this.readUint16();break}case cl.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let r=0;for(;r<e;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case cl.UNKNOWN:case cl.GREYSCALE_ALPHA:case cl.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const r=wL(this),n=this.readUint8();if(n!==B4.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const i=this.readBytes(e-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:Mle(i)}}decodepHYs(){const e=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:r,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const r={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=cS({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)r.data=n.data;else{const i=this._apng.frames.at(e-1);this.disposeFrame(n,i,r),this.addFrameDataToCanvas(r,n)}this._apng.frames.push(r)}}return this._apng}disposeFrame(e,r,n){switch(e.disposeOp){case gx.NONE:break;case gx.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let s=0;s<this._png.width;s++){const a=(i*e.width+s)*this._png.channels;for(let o=0;o<this._png.channels;o++)n.data[a+o]=0}break;case gx.PREVIOUS:n.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,r){const n=1<<this._png.depth,i=(s,a)=>{const o=((s+r.yOffset)*this._png.width+r.xOffset+a)*this._png.channels,l=(s*r.width+a)*this._png.channels;return{index:o,frameIndex:l}};switch(r.blendOp){case U4.SOURCE:for(let s=0;s<r.height;s++)for(let a=0;a<r.width;a++){const{index:o,frameIndex:l}=i(s,a);for(let c=0;c<this._png.channels;c++)e.data[o+c]=r.data[l+c]}break;case U4.OVER:for(let s=0;s<r.height;s++)for(let a=0;a<r.width;a++){const{index:o,frameIndex:l}=i(s,a);for(let c=0;c<this._png.channels;c++){const d=r.data[l+this._png.channels-1]/n,p=c%(this._png.channels-1)===0?1:r.data[l+c],g=Math.floor(d*p+(1-d)*e.data[o+c]);e.data[o+c]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==dS.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===V4.NO_INTERLACE)this._png.data=cS({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===V4.ADAM7)this._png.data=Wle({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,r=this._frames.at(-1);r?r.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:gx.NONE,blendOp:U4.SOURCE,data:e}),this._inflator=new aS,this._writingDataChunks=!1}}function lce(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var fS;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(fS||(fS={}));function cce(t,e){return new oce(t,e).decode()}var Dr=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function z4(){Dr.console&&typeof Dr.console.log=="function"&&Dr.console.log.apply(Dr.console,arguments)}var ci={log:z4,warn:function(t){Dr.console&&(typeof Dr.console.warn=="function"?Dr.console.warn.apply(Dr.console,arguments):z4.call(null,arguments))},error:function(t){Dr.console&&(typeof Dr.console.error=="function"?Dr.console.error.apply(Dr.console,arguments):z4(t))}};function $4(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){pf(n.response,e,r)},n.onerror=function(){ci.error("could not download file")},n.send()}function hS(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function xx(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var pf=Dr.saveAs||((typeof window>"u"?"undefined":Xn(window))!=="object"||window!==Dr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Dr.URL||Dr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?hS(i.href)?$4(t,e,r):xx(i,i.target="_blank"):xx(i)):(i.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){xx(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(hS(t))$4(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){xx(n)})}else navigator.msSaveOrOpenBlob((function(i,s){return s===void 0?s={autoBom:!1}:Xn(s)!=="object"&&(ci.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return $4(t,e,r);var i=t.type==="application/octet-stream",s=/constructor/i.test(Dr.HTMLElement)||Dr.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Xn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=a?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(t)}else{var l=Dr.URL||Dr.webkitURL,c=l.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function bL(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,s=r[n].process,a=i.exec(t);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}var Hx=Dr.atob.bind(Dr),pS=Dr.btoa.bind(Dr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function H4(t,e){var r=t[0],n=t[1],i=t[2],s=t[3];r=ro(r,n,i,s,e[0],7,-680876936),s=ro(s,r,n,i,e[1],12,-389564586),i=ro(i,s,r,n,e[2],17,606105819),n=ro(n,i,s,r,e[3],22,-1044525330),r=ro(r,n,i,s,e[4],7,-176418897),s=ro(s,r,n,i,e[5],12,1200080426),i=ro(i,s,r,n,e[6],17,-1473231341),n=ro(n,i,s,r,e[7],22,-45705983),r=ro(r,n,i,s,e[8],7,1770035416),s=ro(s,r,n,i,e[9],12,-1958414417),i=ro(i,s,r,n,e[10],17,-42063),n=ro(n,i,s,r,e[11],22,-1990404162),r=ro(r,n,i,s,e[12],7,1804603682),s=ro(s,r,n,i,e[13],12,-40341101),i=ro(i,s,r,n,e[14],17,-1502002290),r=no(r,n=ro(n,i,s,r,e[15],22,1236535329),i,s,e[1],5,-165796510),s=no(s,r,n,i,e[6],9,-1069501632),i=no(i,s,r,n,e[11],14,643717713),n=no(n,i,s,r,e[0],20,-373897302),r=no(r,n,i,s,e[5],5,-701558691),s=no(s,r,n,i,e[10],9,38016083),i=no(i,s,r,n,e[15],14,-660478335),n=no(n,i,s,r,e[4],20,-405537848),r=no(r,n,i,s,e[9],5,568446438),s=no(s,r,n,i,e[14],9,-1019803690),i=no(i,s,r,n,e[3],14,-187363961),n=no(n,i,s,r,e[8],20,1163531501),r=no(r,n,i,s,e[13],5,-1444681467),s=no(s,r,n,i,e[2],9,-51403784),i=no(i,s,r,n,e[7],14,1735328473),r=io(r,n=no(n,i,s,r,e[12],20,-1926607734),i,s,e[5],4,-378558),s=io(s,r,n,i,e[8],11,-2022574463),i=io(i,s,r,n,e[11],16,1839030562),n=io(n,i,s,r,e[14],23,-35309556),r=io(r,n,i,s,e[1],4,-1530992060),s=io(s,r,n,i,e[4],11,1272893353),i=io(i,s,r,n,e[7],16,-155497632),n=io(n,i,s,r,e[10],23,-1094730640),r=io(r,n,i,s,e[13],4,681279174),s=io(s,r,n,i,e[0],11,-358537222),i=io(i,s,r,n,e[3],16,-722521979),n=io(n,i,s,r,e[6],23,76029189),r=io(r,n,i,s,e[9],4,-640364487),s=io(s,r,n,i,e[12],11,-421815835),i=io(i,s,r,n,e[15],16,530742520),r=so(r,n=io(n,i,s,r,e[2],23,-995338651),i,s,e[0],6,-198630844),s=so(s,r,n,i,e[7],10,1126891415),i=so(i,s,r,n,e[14],15,-1416354905),n=so(n,i,s,r,e[5],21,-57434055),r=so(r,n,i,s,e[12],6,1700485571),s=so(s,r,n,i,e[3],10,-1894986606),i=so(i,s,r,n,e[10],15,-1051523),n=so(n,i,s,r,e[1],21,-2054922799),r=so(r,n,i,s,e[8],6,1873313359),s=so(s,r,n,i,e[15],10,-30611744),i=so(i,s,r,n,e[6],15,-1560198380),n=so(n,i,s,r,e[13],21,1309151649),r=so(r,n,i,s,e[4],6,-145523070),s=so(s,r,n,i,e[11],10,-1120210379),i=so(i,s,r,n,e[2],15,718787259),n=so(n,i,s,r,e[9],21,-343485551),t[0]=c0(r,t[0]),t[1]=c0(n,t[1]),t[2]=c0(i,t[2]),t[3]=c0(s,t[3])}function z5(t,e,r,n,i,s){return e=c0(c0(e,t),c0(n,s)),c0(e<<i|e>>>32-i,r)}function ro(t,e,r,n,i,s,a){return z5(e&r|~e&n,t,e,i,s,a)}function no(t,e,r,n,i,s,a){return z5(e&n|r&~n,t,e,i,s,a)}function io(t,e,r,n,i,s,a){return z5(e^r^n,t,e,i,s,a)}function so(t,e,r,n,i,s,a){return z5(r^(e|~n),t,e,i,s,a)}function _L(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)H4(n,uce(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(H4(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*r,H4(n,i),n}function uce(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var mS="0123456789abcdef".split("");function dce(t){for(var e="",r=0;r<4;r++)e+=mS[t>>8*r+4&15]+mS[t>>8*r&15];return e}function fce(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function ww(t){return _L(t).map(fce).join("")}var hce=(function(t){for(var e=0;e<t.length;e++)t[e]=dce(t[e]);return t.join("")})(_L("hello"))!="5d41402abc4b2a76b9719d911017c592";function c0(t,e){if(hce){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function bw(t,e){var r,n,i,s;if(t!==r){for(var a=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+a.charCodeAt(l))%256,o[l]=o[c],o[c]=d}r=t,n=o}else o=n;var p=e.length,g=0,m=0,w="";for(l=0;l<p;l++)m=(m+(d=o[g=(g+1)%256]))%256,o[g]=o[m],o[m]=d,a=o[(o[g]+o[m])%256],w+=String.fromCharCode(e.charCodeAt(l)^a);return w}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var gS={print:4,modify:8,copy:16,"annot-forms":32};function l1(t,e,r,n){this.v=1,this.r=2;var i=192;t.forEach(function(o){if(gS.perm!==void 0)throw new Error("Invalid permission: "+o);i+=gS[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=ww(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=bw(this.encryptionKey,this.padding)}function c1(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var i=t.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[n]}return e}function xS(t){if(Xn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!i],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[r]){var a=e[r][s];try{a[0].apply(t,n)}catch(o){Dr.console&&ci.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function zv(t){if(!(this instanceof zv))return new zv(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function kL(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function wf(t,e,r,n,i){if(!(this instanceof wf))return new wf(t,e,r,n,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,kL.call(this,n,i)}function d1(t,e,r,n,i){if(!(this instanceof d1))return new d1(t,e,r,n,i);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,kL.call(this,n,i)}function wr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,l=16,c="S",d=null;Xn(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,i=t.format||i,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(s===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,g={},m={internal:{},__private__:{}};m.__private__.PubSub=xS;var w="1.3",y=m.__private__.getPdfVersion=function(){return w};m.__private__.setPdfVersion=function(D){w=D};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return k};var T=m.__private__.getPageFormat=function(D){return k[D]};i=i||"a4";var O="compat",P="advanced",V=O;function Y(){this.saveGraphicsState(),ae(new sr(mt,0,0,-mt,0,As()*mt).toString()+" cm"),this.setFontSize(this.getFontSize()/mt),c="n",V=P}function G(){this.restoreGraphicsState(),c="S",V=O}var L=m.__private__.combineFontStyleAndFontWeight=function(D,ie){if(D=="bold"&&ie=="normal"||D=="bold"&&ie==400||D=="normal"&&ie=="italic"||D=="bold"&&ie=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ie&&(D=ie==400||ie==="normal"?D==="italic"?"italic":"normal":ie!=700&&ie!=="bold"||D!=="normal"?(ie==700?"bold":ie)+""+D:"bold"),D};m.advancedAPI=function(D){var ie=V===O;return ie&&Y.call(this),typeof D!="function"||(D(this),ie&&G.call(this)),this},m.compatAPI=function(D){var ie=V===P;return ie&&G.call(this),typeof D!="function"||(D(this),ie&&Y.call(this)),this},m.isAdvancedAPI=function(){return V===P};var N,C=function(D){if(V!==P)throw new Error(D+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=m.roundToPrecision=m.__private__.roundToPrecision=function(D,ie){var Ce=e||ie;if(isNaN(D)||isNaN(Ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return D.toFixed(Ce).replace(/0+$/,"")};N=m.hpf=m.__private__.hpf=typeof l=="number"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return R(D,l)}:l==="smart"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return R(D,D>-1&&D<1?16:5)}:function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return R(D,16)};var A=m.f2=m.__private__.f2=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f2");return R(D,2)},F=m.__private__.f3=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f3");return R(D,3)},B=m.scale=m.__private__.scale=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.scale");return V===O?D*mt:V===P?D:void 0},te=function(D){return B((function(ie){return V===O?As()-ie:V===P?ie:void 0})(D))};m.__private__.setPrecision=m.setPrecision=function(D){typeof parseInt(D,10)=="number"&&(e=parseInt(D,10))};var pe,Ee="00000000000000000000000000000000",ve=m.__private__.getFileId=function(){return Ee},re=m.__private__.setFileId=function(D){return Ee=D!==void 0&&/^[a-fA-F0-9]{32}$/.test(D)?D.toUpperCase():Ee.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Pn=new l1(d.userPermissions,d.userPassword,d.ownerPassword,Ee)),Ee};m.setFileId=function(D){return re(D),this},m.getFileId=function(){return ve()};var W=m.__private__.convertDateToPDFDate=function(D){var ie=D.getTimezoneOffset(),Ce=ie<0?"+":"-",De=Math.floor(Math.abs(ie/60)),He=Math.abs(ie%60),vt=[Ce,X(De),"'",X(He),"'"].join("");return["D:",D.getFullYear(),X(D.getMonth()+1),X(D.getDate()),X(D.getHours()),X(D.getMinutes()),X(D.getSeconds()),vt].join("")},ne=m.__private__.convertPDFDateToDate=function(D){var ie=parseInt(D.substr(2,4),10),Ce=parseInt(D.substr(6,2),10)-1,De=parseInt(D.substr(8,2),10),He=parseInt(D.substr(10,2),10),vt=parseInt(D.substr(12,2),10),bt=parseInt(D.substr(14,2),10);return new Date(ie,Ce,De,He,vt,bt,0)},Q=m.__private__.setCreationDate=function(D){var ie;if(D===void 0&&(D=new Date),D instanceof Date)ie=W(D);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(D))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ie=D}return pe=ie},I=m.__private__.getCreationDate=function(D){var ie=pe;return D==="jsDate"&&(ie=ne(pe)),ie};m.setCreationDate=function(D){return Q(D),this},m.getCreationDate=function(D){return I(D)};var H,X=m.__private__.padd2=function(D){return("0"+parseInt(D)).slice(-2)},J=m.__private__.padd2Hex=function(D){return("00"+(D=D.toString())).substr(D.length)},ue=0,we=[],fe=[],me=0,be=[],Le=[],ee=!1,Be=fe;m.__private__.setCustomOutputDestination=function(D){ee=!0,Be=D};var Re=function(D){ee||(Be=D)};m.__private__.resetCustomOutputDestination=function(){ee=!1,Be=fe};var ae=m.__private__.out=function(D){return D=D.toString(),me+=D.length+1,Be.push(D),Be},$e=m.__private__.write=function(D){return ae(arguments.length===1?D.toString():Array.prototype.join.call(arguments," "))},qe=m.__private__.getArrayBuffer=function(D){for(var ie=D.length,Ce=new ArrayBuffer(ie),De=new Uint8Array(Ce);ie--;)De[ie]=D.charCodeAt(ie);return Ce},it=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return it};var oe=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(D){return oe=V===P?D/mt:D,this};var je,Ge=m.__private__.getFontSize=m.getFontSize=function(){return V===O?oe:oe*mt},Tt=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(D){return Tt=D,this},m.__private__.getR2L=m.getR2L=function(){return Tt};var Pe,Ke=m.__private__.setZoomMode=function(D){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(D))je=D;else if(isNaN(D)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(D)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+D+'" is not recognized.');je=D}else je=parseInt(D,10)};m.__private__.getZoomMode=function(){return je};var ot,We=m.__private__.setPageMode=function(D){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(D)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+D+'" is not recognized.');Pe=D};m.__private__.getPageMode=function(){return Pe};var Lt=m.__private__.setLayoutMode=function(D){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(D)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+D+'" is not recognized.');ot=D};m.__private__.getLayoutMode=function(){return ot},m.__private__.setDisplayMode=m.setDisplayMode=function(D,ie,Ce){return Ke(D),Lt(ie),We(Ce),this};var St={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(D){if(Object.keys(St).indexOf(D)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return St[D]},m.__private__.getDocumentProperties=function(){return St},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(D){for(var ie in St)St.hasOwnProperty(ie)&&D[ie]&&(St[ie]=D[ie]);return this},m.__private__.setDocumentProperty=function(D,ie){if(Object.keys(St).indexOf(D)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return St[D]=ie};var Pt,mt,_t,Xt,Kt,Ut={},xr={},Yr=[],Ve={},Bt={},zt={},nr={},lr=null,hr=0,Zt=[],yr=new xS(m),dn=t.hotfixes||[],qr={},Ln={},jn=[],sr=function D(ie,Ce,De,He,vt,bt){if(!(this instanceof D))return new D(ie,Ce,De,He,vt,bt);isNaN(ie)&&(ie=1),isNaN(Ce)&&(Ce=0),isNaN(De)&&(De=0),isNaN(He)&&(He=1),isNaN(vt)&&(vt=0),isNaN(bt)&&(bt=0),this._matrix=[ie,Ce,De,He,vt,bt]};Object.defineProperty(sr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(sr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(sr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(sr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(sr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(sr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(sr.prototype,"a",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(sr.prototype,"b",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(sr.prototype,"c",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(sr.prototype,"d",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(sr.prototype,"e",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(sr.prototype,"f",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(sr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(sr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(sr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(sr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),sr.prototype.join=function(D){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(D)},sr.prototype.multiply=function(D){var ie=D.sx*this.sx+D.shy*this.shx,Ce=D.sx*this.shy+D.shy*this.sy,De=D.shx*this.sx+D.sy*this.shx,He=D.shx*this.shy+D.sy*this.sy,vt=D.tx*this.sx+D.ty*this.shx+this.tx,bt=D.tx*this.shy+D.ty*this.sy+this.ty;return new sr(ie,Ce,De,He,vt,bt)},sr.prototype.decompose=function(){var D=this.sx,ie=this.shy,Ce=this.shx,De=this.sy,He=this.tx,vt=this.ty,bt=Math.sqrt(D*D+ie*ie),Yt=(D/=bt)*Ce+(ie/=bt)*De;Ce-=D*Yt,De-=ie*Yt;var er=Math.sqrt(Ce*Ce+De*De);return Yt/=er,D*(De/=er)<ie*(Ce/=er)&&(D=-D,ie=-ie,Yt=-Yt,bt=-bt),{scale:new sr(bt,0,0,er,0,0),translate:new sr(1,0,0,1,He,vt),rotate:new sr(D,ie,-ie,D,0,0),skew:new sr(1,0,Yt,1,0,0)}},sr.prototype.toString=function(D){return this.join(" ")},sr.prototype.inversed=function(){var D=this.sx,ie=this.shy,Ce=this.shx,De=this.sy,He=this.tx,vt=this.ty,bt=1/(D*De-ie*Ce),Yt=De*bt,er=-ie*bt,br=-Ce*bt,Ir=D*bt;return new sr(Yt,er,br,Ir,-Yt*He-br*vt,-er*He-Ir*vt)},sr.prototype.applyToPoint=function(D){var ie=D.x*this.sx+D.y*this.shx+this.tx,Ce=D.x*this.shy+D.y*this.sy+this.ty;return new vo(ie,Ce)},sr.prototype.applyToRectangle=function(D){var ie=this.applyToPoint(D),Ce=this.applyToPoint(new vo(D.x+D.w,D.y+D.h));return new kl(ie.x,ie.y,Ce.x-ie.x,Ce.y-ie.y)},sr.prototype.clone=function(){var D=this.sx,ie=this.shy,Ce=this.shx,De=this.sy,He=this.tx,vt=this.ty;return new sr(D,ie,Ce,De,He,vt)},m.Matrix=sr;var Gr=m.matrixMult=function(D,ie){return ie.multiply(D)},ds=new sr(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=ds;var Un=function(D,ie){if(!Bt[D]){var Ce=(ie instanceof wf?"Sh":"P")+(Object.keys(Ve).length+1).toString(10);ie.id=Ce,Bt[D]=Ce,Ve[Ce]=ie,yr.publish("addPattern",ie)}};m.ShadingPattern=wf,m.TilingPattern=d1,m.addShadingPattern=function(D,ie){return C("addShadingPattern()"),Un(D,ie),this},m.beginTilingPattern=function(D){C("beginTilingPattern()"),qs(D.boundingBox[0],D.boundingBox[1],D.boundingBox[2]-D.boundingBox[0],D.boundingBox[3]-D.boundingBox[1],D.matrix)},m.endTilingPattern=function(D,ie){C("endTilingPattern()"),ie.stream=Le[H].join(`
`),Un(D,ie),yr.publish("endTilingPattern",ie),jn.pop().restore()};var Xi,Cn=m.__private__.newObject=function(){var D=ai();return le(D,!0),D},ai=m.__private__.newObjectDeferred=function(){return ue++,we[ue]=function(){return me},ue},le=function(D,ie){return ie=typeof ie=="boolean"&&ie,we[D]=me,ie&&ae(D+" 0 obj"),D},Ne=m.__private__.newAdditionalObject=function(){var D={objId:ai(),content:""};return be.push(D),D},_e=ai(),ke=ai(),Ae=m.__private__.decodeColorString=function(D){var ie=D.split(" ");if(ie.length!==2||ie[1]!=="g"&&ie[1]!=="G")ie.length!==5||ie[4]!=="k"&&ie[4]!=="K"||(ie=[(1-ie[0])*(1-ie[3]),(1-ie[1])*(1-ie[3]),(1-ie[2])*(1-ie[3]),"r"]);else{var Ce=parseFloat(ie[0]);ie=[Ce,Ce,Ce,"r"]}for(var De="#",He=0;He<3;He++)De+=("0"+Math.floor(255*parseFloat(ie[He])).toString(16)).slice(-2);return De},Ie=m.__private__.encodeColorString=function(D){var ie;typeof D=="string"&&(D={ch1:D});var Ce=D.ch1,De=D.ch2,He=D.ch3,vt=D.ch4,bt=D.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ce=="string"&&Ce.charAt(0)!=="#"){var Yt=new bL(Ce);if(Yt.ok)Ce=Yt.toHex();else if(!/^\d*\.?\d*$/.test(Ce))throw new Error('Invalid color "'+Ce+'" passed to jsPDF.encodeColorString.')}if(typeof Ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ce)&&(Ce="#"+Ce[1]+Ce[1]+Ce[2]+Ce[2]+Ce[3]+Ce[3]),typeof Ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ce)){var er=parseInt(Ce.substr(1),16);Ce=er>>16&255,De=er>>8&255,He=255&er}if(De===void 0||vt===void 0&&Ce===De&&De===He)ie=typeof Ce=="string"?Ce+" "+bt[0]:D.precision===2?A(Ce/255)+" "+bt[0]:F(Ce/255)+" "+bt[0];else if(vt===void 0||Xn(vt)==="object"){if(vt&&!isNaN(vt.a)&&vt.a===0)return["1.","1.","1.",bt[1]].join(" ");ie=typeof Ce=="string"?[Ce,De,He,bt[1]].join(" "):D.precision===2?[A(Ce/255),A(De/255),A(He/255),bt[1]].join(" "):[F(Ce/255),F(De/255),F(He/255),bt[1]].join(" ")}else ie=typeof Ce=="string"?[Ce,De,He,vt,bt[2]].join(" "):D.precision===2?[A(Ce),A(De),A(He),A(vt),bt[2]].join(" "):[F(Ce),F(De),F(He),F(vt),bt[2]].join(" ");return ie},Qe=m.__private__.getFilters=function(){return a},lt=m.__private__.putStream=function(D){var ie=(D=D||{}).data||"",Ce=D.filters||Qe(),De=D.alreadyAppliedFilters||[],He=D.addLength1||!1,vt=ie.length,bt=D.objectId,Yt=function(Ni){return Ni};if(d!==null&&bt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Yt=Pn.encryptor(bt,0));var er={};Ce===!0&&(Ce=["FlateEncode"]);var br=D.additionalKeyValues||[],Ir=(er=wr.API.processDataByFilters!==void 0?wr.API.processDataByFilters(ie,Ce):{data:ie,reverseChain:[]}).reverseChain+(Array.isArray(De)?De.join(" "):De.toString());if(er.data.length!==0&&(br.push({key:"Length",value:er.data.length}),He===!0&&br.push({key:"Length1",value:vt})),Ir.length!=0)if(Ir.split("/").length-1==1)br.push({key:"Filter",value:Ir});else{br.push({key:"Filter",value:"["+Ir+"]"});for(var ln=0;ln<br.length;ln+=1)if(br[ln].key==="DecodeParms"){for(var Jn=[],oi=0;oi<er.reverseChain.split("/").length-1;oi+=1)Jn.push("null");Jn.push(br[ln].value),br[ln].value="["+Jn.join(" ")+"]"}}ae("<<");for(var xn=0;xn<br.length;xn++)ae("/"+br[xn].key+" "+br[xn].value);ae(">>"),er.data.length!==0&&(ae("stream"),ae(Yt(er.data)),ae("endstream"))},et=m.__private__.putPage=function(D){var ie=D.number,Ce=D.data,De=D.objId,He=D.contentsObjId;le(De,!0),ae("<</Type /Page"),ae("/Parent "+D.rootDictionaryObjId+" 0 R"),ae("/Resources "+D.resourceDictionaryObjId+" 0 R"),ae("/MediaBox ["+parseFloat(N(D.mediaBox.bottomLeftX))+" "+parseFloat(N(D.mediaBox.bottomLeftY))+" "+N(D.mediaBox.topRightX)+" "+N(D.mediaBox.topRightY)+"]"),D.cropBox!==null&&ae("/CropBox ["+N(D.cropBox.bottomLeftX)+" "+N(D.cropBox.bottomLeftY)+" "+N(D.cropBox.topRightX)+" "+N(D.cropBox.topRightY)+"]"),D.bleedBox!==null&&ae("/BleedBox ["+N(D.bleedBox.bottomLeftX)+" "+N(D.bleedBox.bottomLeftY)+" "+N(D.bleedBox.topRightX)+" "+N(D.bleedBox.topRightY)+"]"),D.trimBox!==null&&ae("/TrimBox ["+N(D.trimBox.bottomLeftX)+" "+N(D.trimBox.bottomLeftY)+" "+N(D.trimBox.topRightX)+" "+N(D.trimBox.topRightY)+"]"),D.artBox!==null&&ae("/ArtBox ["+N(D.artBox.bottomLeftX)+" "+N(D.artBox.bottomLeftY)+" "+N(D.artBox.topRightX)+" "+N(D.artBox.topRightY)+"]"),typeof D.userUnit=="number"&&D.userUnit!==1&&ae("/UserUnit "+D.userUnit),yr.publish("putPage",{objId:De,pageContext:Zt[ie],pageNumber:ie,page:Ce}),ae("/Contents "+He+" 0 R"),ae(">>"),ae("endobj");var vt=Ce.join(`
`);return V===P&&(vt+=`
Q`),le(He,!0),lt({data:vt,filters:Qe(),objectId:He}),ae("endobj"),De},tt=m.__private__.putPages=function(){var D,ie,Ce=[];for(D=1;D<=hr;D++)Zt[D].objId=ai(),Zt[D].contentsObjId=ai();for(D=1;D<=hr;D++)Ce.push(et({number:D,data:Le[D],objId:Zt[D].objId,contentsObjId:Zt[D].contentsObjId,mediaBox:Zt[D].mediaBox,cropBox:Zt[D].cropBox,bleedBox:Zt[D].bleedBox,trimBox:Zt[D].trimBox,artBox:Zt[D].artBox,userUnit:Zt[D].userUnit,rootDictionaryObjId:_e,resourceDictionaryObjId:ke}));le(_e,!0),ae("<</Type /Pages");var De="/Kids [";for(ie=0;ie<hr;ie++)De+=Ce[ie]+" 0 R ";ae(De+"]"),ae("/Count "+hr),ae(">>"),ae("endobj"),yr.publish("postPutPages")},st=function(D){yr.publish("putFont",{font:D,out:ae,newObject:Cn,putStream:lt}),D.isAlreadyPutted!==!0&&(D.objectNumber=Cn(),ae("<<"),ae("/Type /Font"),ae("/BaseFont /"+c1(D.postScriptName)),ae("/Subtype /Type1"),typeof D.encoding=="string"&&ae("/Encoding /"+D.encoding),ae("/FirstChar 32"),ae("/LastChar 255"),ae(">>"),ae("endobj"))},kt=function(D){D.objectNumber=Cn();var ie=[];ie.push({key:"Type",value:"/XObject"}),ie.push({key:"Subtype",value:"/Form"}),ie.push({key:"BBox",value:"["+[N(D.x),N(D.y),N(D.x+D.width),N(D.y+D.height)].join(" ")+"]"}),ie.push({key:"Matrix",value:"["+D.matrix.toString()+"]"});var Ce=D.pages[1].join(`
`);lt({data:Ce,additionalKeyValues:ie,objectId:D.objectNumber}),ae("endobj")},Ot=function(D,ie){ie||(ie=21);var Ce=Cn(),De=(function(bt,Yt){var er,br=[],Ir=1/(Yt-1);for(er=0;er<1;er+=Ir)br.push(er);if(br.push(1),bt[0].offset!=0){var ln={offset:0,color:bt[0].color};bt.unshift(ln)}if(bt[bt.length-1].offset!=1){var Jn={offset:1,color:bt[bt.length-1].color};bt.push(Jn)}for(var oi="",xn=0,Ni=0;Ni<br.length;Ni++){for(er=br[Ni];er>bt[xn+1].offset;)xn++;var On=bt[xn].offset,Yi=(er-On)/(bt[xn+1].offset-On),Ro=bt[xn].color,el=bt[xn+1].color;oi+=J(Math.round((1-Yi)*Ro[0]+Yi*el[0]).toString(16))+J(Math.round((1-Yi)*Ro[1]+Yi*el[1]).toString(16))+J(Math.round((1-Yi)*Ro[2]+Yi*el[2]).toString(16))}return oi.trim()})(D.colors,ie),He=[];He.push({key:"FunctionType",value:"0"}),He.push({key:"Domain",value:"[0.0 1.0]"}),He.push({key:"Size",value:"["+ie+"]"}),He.push({key:"BitsPerSample",value:"8"}),He.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),He.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),lt({data:De,additionalKeyValues:He,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ce}),ae("endobj"),D.objectNumber=Cn(),ae("<< /ShadingType "+D.type),ae("/ColorSpace /DeviceRGB");var vt="/Coords ["+N(parseFloat(D.coords[0]))+" "+N(parseFloat(D.coords[1]))+" ";D.type===2?vt+=N(parseFloat(D.coords[2]))+" "+N(parseFloat(D.coords[3])):vt+=N(parseFloat(D.coords[2]))+" "+N(parseFloat(D.coords[3]))+" "+N(parseFloat(D.coords[4]))+" "+N(parseFloat(D.coords[5])),ae(vt+="]"),D.matrix&&ae("/Matrix ["+D.matrix.toString()+"]"),ae("/Function "+Ce+" 0 R"),ae("/Extend [true true]"),ae(">>"),ae("endobj")},Wt=function(D,ie){var Ce=ai(),De=Cn();ie.push({resourcesOid:Ce,objectOid:De}),D.objectNumber=De;var He=[];He.push({key:"Type",value:"/Pattern"}),He.push({key:"PatternType",value:"1"}),He.push({key:"PaintType",value:"1"}),He.push({key:"TilingType",value:"1"}),He.push({key:"BBox",value:"["+D.boundingBox.map(N).join(" ")+"]"}),He.push({key:"XStep",value:N(D.xStep)}),He.push({key:"YStep",value:N(D.yStep)}),He.push({key:"Resources",value:Ce+" 0 R"}),D.matrix&&He.push({key:"Matrix",value:"["+D.matrix.toString()+"]"}),lt({data:D.stream,additionalKeyValues:He,objectId:D.objectNumber}),ae("endobj")},Dt=function(D){for(var ie in D.objectNumber=Cn(),ae("<<"),D)switch(ie){case"opacity":ae("/ca "+A(D[ie]));break;case"stroke-opacity":ae("/CA "+A(D[ie]))}ae(">>"),ae("endobj")},At=function(D){le(D.resourcesOid,!0),ae("<<"),ae("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var ie in ae("/Font <<"),Ut)Ut.hasOwnProperty(ie)&&(p===!1||p===!0&&g.hasOwnProperty(ie))&&ae("/"+ie+" "+Ut[ie].objectNumber+" 0 R");ae(">>")})(),(function(){if(Object.keys(Ve).length>0){for(var ie in ae("/Shading <<"),Ve)Ve.hasOwnProperty(ie)&&Ve[ie]instanceof wf&&Ve[ie].objectNumber>=0&&ae("/"+ie+" "+Ve[ie].objectNumber+" 0 R");yr.publish("putShadingPatternDict"),ae(">>")}})(),(function(ie){if(Object.keys(Ve).length>0){for(var Ce in ae("/Pattern <<"),Ve)Ve.hasOwnProperty(Ce)&&Ve[Ce]instanceof m.TilingPattern&&Ve[Ce].objectNumber>=0&&Ve[Ce].objectNumber<ie&&ae("/"+Ce+" "+Ve[Ce].objectNumber+" 0 R");yr.publish("putTilingPatternDict"),ae(">>")}})(D.objectOid),(function(){if(Object.keys(zt).length>0){var ie;for(ie in ae("/ExtGState <<"),zt)zt.hasOwnProperty(ie)&&zt[ie].objectNumber>=0&&ae("/"+ie+" "+zt[ie].objectNumber+" 0 R");yr.publish("putGStateDict"),ae(">>")}})(),(function(){for(var ie in ae("/XObject <<"),qr)qr.hasOwnProperty(ie)&&qr[ie].objectNumber>=0&&ae("/"+ie+" "+qr[ie].objectNumber+" 0 R");yr.publish("putXobjectDict"),ae(">>")})(),ae(">>"),ae("endobj")},Er=function(D){xr[D.fontName]=xr[D.fontName]||{},xr[D.fontName][D.fontStyle]=D.id},fn=function(D,ie,Ce,De,He){var vt={id:"F"+(Object.keys(Ut).length+1).toString(10),postScriptName:D,fontName:ie,fontStyle:Ce,encoding:De,isStandardFont:He||!1,metadata:{}};return yr.publish("addFont",{font:vt,instance:this}),Ut[vt.id]=vt,Er(vt),vt.id},Mr=m.__private__.pdfEscape=m.pdfEscape=function(D,ie){return(function(Ce,De){var He,vt,bt,Yt,er,br,Ir,ln,Jn;if(bt=(De=De||{}).sourceEncoding||"Unicode",er=De.outputEncoding,(De.autoencode||er)&&Ut[Pt].metadata&&Ut[Pt].metadata[bt]&&Ut[Pt].metadata[bt].encoding&&(Yt=Ut[Pt].metadata[bt].encoding,!er&&Ut[Pt].encoding&&(er=Ut[Pt].encoding),!er&&Yt.codePages&&(er=Yt.codePages[0]),typeof er=="string"&&(er=Yt[er]),er)){for(Ir=!1,br=[],He=0,vt=Ce.length;He<vt;He++)(ln=er[Ce.charCodeAt(He)])?br.push(String.fromCharCode(ln)):br.push(Ce[He]),br[He].charCodeAt(0)>>8&&(Ir=!0);Ce=br.join("")}for(He=Ce.length;Ir===void 0&&He!==0;)Ce.charCodeAt(He-1)>>8&&(Ir=!0),He--;if(!Ir)return Ce;for(br=De.noBOM?[]:[254,255],He=0,vt=Ce.length;He<vt;He++){if((Jn=(ln=Ce.charCodeAt(He))>>8)>>8)throw new Error("Character at position "+He+" of string '"+Ce+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");br.push(Jn),br.push(ln-(Jn<<8))}return String.fromCharCode.apply(void 0,br)})(D,ie).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},gn=m.__private__.beginPage=function(D){Le[++hr]=[],Zt[hr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(D[0]),topRightY:Number(D[1])}},ra(hr),Re(Le[H])},Da=function(D,ie){var Ce,De,He;switch(r=ie||r,typeof D=="string"&&(Ce=T(D.toLowerCase()),Array.isArray(Ce)&&(De=Ce[0],He=Ce[1])),Array.isArray(D)&&(De=D[0]*mt,He=D[1]*mt),isNaN(De)&&(De=i[0],He=i[1]),(De>14400||He>14400)&&(ci.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),De=Math.min(14400,De),He=Math.min(14400,He)),i=[De,He],r.substr(0,1)){case"l":He>De&&(i=[He,De]);break;case"p":De>He&&(i=[He,De])}gn(i),Va(wa),ae(Io),Dn!==0&&ae(Dn+" J"),_u!==0&&ae(_u+" j"),yr.publish("addPage",{pageNumber:hr})},Oa=function(D){D>0&&D<=hr&&(Le.splice(D,1),Zt.splice(D,1),hr--,H>hr&&(H=hr),this.setPage(H))},ra=function(D){D>0&&D<=hr&&(H=D)},fi=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Le.length-1},Ko=function(D,ie,Ce){var De,He=void 0;return Ce=Ce||{},D=D!==void 0?D:Ut[Pt].fontName,ie=ie!==void 0?ie:Ut[Pt].fontStyle,De=D.toLowerCase(),xr[De]!==void 0&&xr[De][ie]!==void 0?He=xr[De][ie]:xr[D]!==void 0&&xr[D][ie]!==void 0?He=xr[D][ie]:Ce.disableWarning===!1&&ci.warn("Unable to look up font label for font '"+D+"', '"+ie+"'. Refer to getFontList() for available fonts."),He||Ce.noFallback||(He=xr.times[ie])==null&&(He=xr.times.normal),He},Tn=m.__private__.putInfo=function(){var D=Cn(),ie=function(De){return De};for(var Ce in d!==null&&(ie=Pn.encryptor(D,0)),ae("<<"),ae("/Producer ("+Mr(ie("jsPDF "+wr.version))+")"),St)St.hasOwnProperty(Ce)&&St[Ce]&&ae("/"+Ce.substr(0,1).toUpperCase()+Ce.substr(1)+" ("+Mr(ie(St[Ce]))+")");ae("/CreationDate ("+Mr(ie(pe))+")"),ae(">>"),ae("endobj")},wu=m.__private__.putCatalog=function(D){var ie=(D=D||{}).rootDictionaryObjId||_e;switch(Cn(),ae("<<"),ae("/Type /Catalog"),ae("/Pages "+ie+" 0 R"),je||(je="fullwidth"),je){case"fullwidth":ae("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ae("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ae("/OpenAction [3 0 R /Fit]");break;case"original":ae("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ce=""+je;Ce.substr(Ce.length-1)==="%"&&(je=parseInt(je)/100),typeof je=="number"&&ae("/OpenAction [3 0 R /XYZ null null "+A(je)+"]")}switch(ot||(ot="continuous"),ot){case"continuous":ae("/PageLayout /OneColumn");break;case"single":ae("/PageLayout /SinglePage");break;case"two":case"twoleft":ae("/PageLayout /TwoColumnLeft");break;case"tworight":ae("/PageLayout /TwoColumnRight")}Pe&&ae("/PageMode /"+Pe),yr.publish("putCatalog"),ae(">>"),ae("endobj")},vi=m.__private__.putTrailer=function(){ae("trailer"),ae("<<"),ae("/Size "+(ue+1)),ae("/Root "+ue+" 0 R"),ae("/Info "+(ue-1)+" 0 R"),d!==null&&ae("/Encrypt "+Pn.oid+" 0 R"),ae("/ID [ <"+Ee+"> <"+Ee+"> ]"),ae(">>")},bu=m.__private__.putHeader=function(){ae("%PDF-"+w),ae("%")},ec=m.__private__.putXRef=function(){var D="0000000000";ae("xref"),ae("0 "+(ue+1)),ae("0000000000 65535 f ");for(var ie=1;ie<=ue;ie++)typeof we[ie]=="function"?ae((D+we[ie]()).slice(-10)+" 00000 n "):we[ie]!==void 0?ae((D+we[ie]).slice(-10)+" 00000 n "):ae("0000000000 00000 n ")},Ma=m.__private__.buildDocument=function(){var D;ue=0,me=0,fe=[],we=[],be=[],_e=ai(),ke=ai(),Re(fe),yr.publish("buildDocument"),bu(),tt(),(function(){yr.publish("putAdditionalObjects");for(var Ce=0;Ce<be.length;Ce++){var De=be[Ce];le(De.objId,!0),ae(De.content),ae("endobj")}yr.publish("postPutAdditionalObjects")})(),D=[],(function(){for(var Ce in Ut)Ut.hasOwnProperty(Ce)&&(p===!1||p===!0&&g.hasOwnProperty(Ce))&&st(Ut[Ce])})(),(function(){var Ce;for(Ce in zt)zt.hasOwnProperty(Ce)&&Dt(zt[Ce])})(),(function(){for(var Ce in qr)qr.hasOwnProperty(Ce)&&kt(qr[Ce])})(),(function(Ce){var De;for(De in Ve)Ve.hasOwnProperty(De)&&(Ve[De]instanceof wf?Ot(Ve[De]):Ve[De]instanceof d1&&Wt(Ve[De],Ce))})(D),yr.publish("putResources"),D.forEach(At),At({resourcesOid:ke,objectOid:Number.MAX_SAFE_INTEGER}),yr.publish("postPutResources"),d!==null&&(Pn.oid=Cn(),ae("<<"),ae("/Filter /Standard"),ae("/V "+Pn.v),ae("/R "+Pn.r),ae("/U <"+Pn.toHexString(Pn.U)+">"),ae("/O <"+Pn.toHexString(Pn.O)+">"),ae("/P "+Pn.P),ae(">>"),ae("endobj")),Tn(),wu();var ie=me;return ec(),vi(),ae("startxref"),ae(""+ie),ae("%%EOF"),Re(Le[H]),fe.join(`
`)},Ba=m.__private__.getBlob=function(D){return new Blob([qe(D)],{type:"application/pdf"})},Vs=m.output=m.__private__.output=(Xi=function(D,ie){switch(typeof(ie=ie||{})=="string"?ie={filename:ie}:ie.filename=ie.filename||"generated.pdf",D){case void 0:return Ma();case"save":m.save(ie.filename);break;case"arraybuffer":return qe(Ma());case"blob":return Ba(Ma());case"bloburi":case"bloburl":if(Dr.URL!==void 0&&typeof Dr.URL.createObjectURL=="function")return Dr.URL&&Dr.URL.createObjectURL(Ba(Ma()))||void 0;ci.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ce="",De=Ma();try{Ce=pS(De)}catch{Ce=pS(unescape(encodeURIComponent(De)))}return"data:application/pdf;filename="+ie.filename+";base64,"+Ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Dr)==="[object Window]"){var He="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",vt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ie.pdfObjectUrl&&(He=ie.pdfObjectUrl,vt="");var bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+He+'"'+vt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ie)+");<\/script></body></html>",Yt=Dr.open();return Yt!==null&&Yt.document.write(bt),Yt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Dr)==="[object Window]"){var er='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ie.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ie.filename+'" width="500px" height="400px" /></body></html>',br=Dr.open();if(br!==null){br.document.write(er);var Ir=this;br.document.documentElement.querySelector("#pdfViewer").onload=function(){br.document.title=ie.filename,br.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ir.output("bloburl"))}}return br}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Dr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ln='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ie)+'"></iframe></body></html>',Jn=Dr.open();if(Jn!==null&&(Jn.document.write(ln),Jn.document.title=ie.filename),Jn||typeof safari>"u")return Jn;break;case"datauri":case"dataurl":return Dr.document.location.href=this.output("datauristring",ie);default:return null}},Xi.foo=function(){try{return Xi.apply(this,arguments)}catch(Ce){var D=Ce.stack||"";~D.indexOf(" at ")&&(D=D.split(" at ")[1]);var ie="Error in function "+D.split(`
`)[0].split("<")[0]+": "+Ce.message;if(!Dr.console)throw new Error(ie);Dr.console.error(ie,Ce),Dr.alert&&alert(ie)}},Xi.foo.bar=Xi,Xi.foo),tc=function(D){return Array.isArray(dn)===!0&&dn.indexOf(D)>-1};switch(n){case"pt":mt=1;break;case"mm":mt=72/25.4;break;case"cm":mt=72/2.54;break;case"in":mt=72;break;case"px":mt=tc("px_scaling")==1?.75:96/72;break;case"pc":case"em":mt=12;break;case"ex":mt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);mt=n}var Pn=null;Q(),re();var Us=m.__private__.getPageInfo=m.getPageInfo=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Zt[D].objId,pageNumber:D,pageContext:Zt[D]}},rc=m.__private__.getPageInfoByObjId=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ie in Zt)if(Zt[ie].objId===D)break;return Us(ie)},wl=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Zt[H].objId,pageNumber:H,pageContext:Zt[H]}};m.addPage=function(){return Da.apply(this,arguments),this},m.setPage=function(){return ra.apply(this,arguments),Re.call(this,Le[H]),this},m.insertPage=function(D){return this.addPage(),this.movePage(H,D),this},m.movePage=function(D,ie){var Ce,De;if(D>ie){Ce=Le[D],De=Zt[D];for(var He=D;He>ie;He--)Le[He]=Le[He-1],Zt[He]=Zt[He-1];Le[ie]=Ce,Zt[ie]=De,this.setPage(ie)}else if(D<ie){Ce=Le[D],De=Zt[D];for(var vt=D;vt<ie;vt++)Le[vt]=Le[vt+1],Zt[vt]=Zt[vt+1];Le[ie]=Ce,Zt[ie]=De,this.setPage(ie)}return this},m.deletePage=function(){return Oa.apply(this,arguments),this},m.__private__.text=m.text=function(D,ie,Ce,De,He){var vt,bt,Yt,er,br,Ir,ln,Jn,oi,xn=(De=De||{}).scope||this;if(typeof D=="number"&&typeof ie=="number"&&(typeof Ce=="string"||Array.isArray(Ce))){var Ni=Ce;Ce=ie,ie=D,D=Ni}if(arguments[3]instanceof sr==0?(Yt=arguments[4],er=arguments[5],Xn(ln=arguments[3])==="object"&&ln!==null||(typeof Yt=="string"&&(er=Yt,Yt=null),typeof ln=="string"&&(er=ln,ln=null),typeof ln=="number"&&(Yt=ln,ln=null),De={flags:ln,angle:Yt,align:er})):(C("The transform parameter of text() with a Matrix value"),oi=He),isNaN(ie)||isNaN(Ce)||D==null)throw new Error("Invalid arguments passed to jsPDF.text");if(D.length===0)return xn;var On,Yi="",Ro=typeof De.lineHeightFactor=="number"?De.lineHeightFactor:$s,el=xn.internal.scaleFactor;function ku(Zn){return Zn=Zn.split("	").join(Array(De.TabLen||9).join(" ")),Mr(Zn,ln)}function ic(Zn){for(var ei,Bi=Zn.concat(),Vi=[],ps=Bi.length;ps--;)typeof(ei=Bi.shift())=="string"?Vi.push(ei):Array.isArray(Zn)&&(ei.length===1||ei[1]===void 0&&ei[2]===void 0)?Vi.push(ei[0]):Vi.push([ei[0],ei[1],ei[2]]);return Vi}function Mi(Zn,ei){var Bi;if(typeof Zn=="string")Bi=ei(Zn)[0];else if(Array.isArray(Zn)){for(var Vi,ps,Tl=Zn.concat(),rl=[],Sd=Tl.length;Sd--;)typeof(Vi=Tl.shift())=="string"?rl.push(ei(Vi)[0]):Array.isArray(Vi)&&typeof Vi[0]=="string"&&(ps=ei(Vi[0],Vi[1],Vi[2]),rl.push([ps[0],ps[1],ps[2]]));Bi=rl}return Bi}var za=!1,jc=!0;if(typeof D=="string")za=!0;else if(Array.isArray(D)){var ba=D.concat();bt=[];for(var _,z=ba.length;z--;)(typeof(_=ba.shift())!="string"||Array.isArray(_)&&typeof _[0]!="string")&&(jc=!1);za=jc}if(za===!1)throw new Error('Type of text must be string or Array. "'+D+'" is not recognized.');typeof D=="string"&&(D=D.match(/[\r?\n]/)?D.split(/\r\n|\r|\n/g):[D]);var Z=oe/xn.internal.scaleFactor,xe=Z*(Ro-1);switch(De.baseline){case"bottom":Ce-=xe;break;case"top":Ce+=Z-xe;break;case"hanging":Ce+=Z-2*xe;break;case"middle":Ce+=Z/2-xe}if((Ir=De.maxWidth||0)>0&&(typeof D=="string"?D=xn.splitTextToSize(D,Ir):Object.prototype.toString.call(D)==="[object Array]"&&(D=D.reduce(function(Zn,ei){return Zn.concat(xn.splitTextToSize(ei,Ir))},[]))),vt={text:D,x:ie,y:Ce,options:De,mutex:{pdfEscape:Mr,activeFontKey:Pt,fonts:Ut,activeFontSize:oe}},yr.publish("preProcessText",vt),D=vt.text,Yt=(De=vt.options).angle,oi instanceof sr==0&&Yt&&typeof Yt=="number"){Yt*=Math.PI/180,De.rotationDirection===0&&(Yt=-Yt),V===P&&(Yt=-Yt);var Xe=Math.cos(Yt),dt=Math.sin(Yt);oi=new sr(Xe,dt,-dt,Xe,0,0)}else Yt&&Yt instanceof sr&&(oi=Yt);V!==P||oi||(oi=ds),(br=De.charSpace||Ua)!==void 0&&(Yi+=N(B(br))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Jn=De.horizontalScale)!==void 0&&(Yi+=N(100*Jn)+` Tz
`),De.lang;var Ft=-1,vn=De.renderingMode!==void 0?De.renderingMode:De.stroke,hi=xn.internal.getCurrentPageInfo().pageContext;switch(vn){case 0:case!1:case"fill":Ft=0;break;case 1:case!0:case"stroke":Ft=1;break;case 2:case"fillThenStroke":Ft=2;break;case 3:case"invisible":Ft=3;break;case 4:case"fillAndAddForClipping":Ft=4;break;case 5:case"strokeAndAddPathForClipping":Ft=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ft=6;break;case 7:case"addToPathForClipping":Ft=7}var Qr=hi.usedRenderingMode!==void 0?hi.usedRenderingMode:-1;Ft!==-1?Yi+=Ft+` Tr
`:Qr!==-1&&(Yi+=`0 Tr
`),Ft!==-1&&(hi.usedRenderingMode=Ft),er=De.align||"left";var rn,wn=oe*Ro,ia=xn.internal.pageSize.getWidth(),Ws=Ut[Pt];br=De.charSpace||Ua,Ir=De.maxWidth||0,ln=Object.assign({autoencode:!0,noBOM:!0},De.flags);var $a=[],tl=function(Zn){return xn.getStringUnitWidth(Zn,{font:Ws,charSpace:br,fontSize:oe,doKerning:!1})*oe/el};if(Object.prototype.toString.call(D)==="[object Array]"){var _a;bt=ic(D),er!=="left"&&(rn=bt.map(tl));var ka,Dc=0;if(er==="right"){ie-=rn[0],D=[],z=bt.length;for(var Ea=0;Ea<z;Ea++)Ea===0?(ka=Ti(ie),_a=Qo(Ce)):(ka=B(Dc-rn[Ea]),_a=-wn),D.push([bt[Ea],ka,_a]),Dc=rn[Ea]}else if(er==="center"){ie-=rn[0]/2,D=[],z=bt.length;for(var Oc=0;Oc<z;Oc++)Oc===0?(ka=Ti(ie),_a=Qo(Ce)):(ka=B((Dc-rn[Oc])/2),_a=-wn),D.push([bt[Oc],ka,_a]),Dc=rn[Oc]}else if(er==="left"){D=[],z=bt.length;for(var H0=0;H0<z;H0++)D.push(bt[H0])}else if(er==="justify"&&Ws.encoding==="Identity-H"){D=[],z=bt.length,Ir=Ir!==0?Ir:ia;for(var Mc=0,Ai=0;Ai<z;Ai++)if(_a=Ai===0?Qo(Ce):-wn,ka=Ai===0?Ti(ie):Mc,Ai<z-1){var bh=B((Ir-rn[Ai])/(bt[Ai].split(" ").length-1)),Ha=bt[Ai].split(" ");D.push([Ha[0]+" ",ka,_a]),Mc=0;for(var qa=1;qa<Ha.length;qa++){var _d=(tl(Ha[qa-1]+" "+Ha[qa])-tl(Ha[qa]))*el+bh;qa==Ha.length-1?D.push([Ha[qa],_d,0]):D.push([Ha[qa]+" ",_d,0]),Mc-=_d}}else D.push([bt[Ai],ka,_a]);D.push(["",Mc,0])}else{if(er!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(D=[],z=bt.length,Ir=Ir!==0?Ir:ia,Ai=0;Ai<z;Ai++)_a=Ai===0?Qo(Ce):-wn,ka=Ai===0?Ti(ie):0,Ai<z-1?$a.push(N(B((Ir-rn[Ai])/(bt[Ai].split(" ").length-1)))):$a.push(0),D.push([bt[Ai],ka,_a])}}(typeof De.R2L=="boolean"?De.R2L:Tt)===!0&&(D=Mi(D,function(Zn,ei,Bi){return[Zn.split("").reverse().join(""),ei,Bi]})),vt={text:D,x:ie,y:Ce,options:De,mutex:{pdfEscape:Mr,activeFontKey:Pt,fonts:Ut,activeFontSize:oe}},yr.publish("postProcessText",vt),D=vt.text,On=vt.mutex.isHex||!1;var Bc=Ut[Pt].encoding;Bc!=="WinAnsiEncoding"&&Bc!=="StandardEncoding"||(D=Mi(D,function(Zn,ei,Bi){return[ku(Zn),ei,Bi]})),bt=ic(D),D=[];for(var kd,Eu,sc,ac=Array.isArray(bt[0])?1:0,Sl="",Ed=function(Zn,ei,Bi){var Vi="";return Bi instanceof sr?(Bi=typeof De.angle=="number"?Gr(Bi,new sr(1,0,0,1,Zn,ei)):Gr(new sr(1,0,0,1,Zn,ei),Bi),V===P&&(Bi=Gr(new sr(1,0,0,-1,0,0),Bi)),Vi=Bi.join(" ")+` Tm
`):Vi=N(Zn)+" "+N(ei)+` Td
`,Vi},Wa=0;Wa<bt.length;Wa++){switch(Sl="",ac){case 1:sc=(On?"<":"(")+bt[Wa][0]+(On?">":")"),kd=parseFloat(bt[Wa][1]),Eu=parseFloat(bt[Wa][2]);break;case 0:sc=(On?"<":"(")+bt[Wa]+(On?">":")"),kd=Ti(ie),Eu=Qo(Ce)}$a!==void 0&&$a[Wa]!==void 0&&(Sl=$a[Wa]+` Tw
`),Wa===0?D.push(Sl+Ed(kd,Eu,oi)+sc):ac===0?D.push(Sl+sc):ac===1&&D.push(Sl+Ed(kd,Eu,oi)+sc)}D=ac===0?D.join(` Tj
T* `):D.join(` Tj
`),D+=` Tj
`;var Cl=`BT
/`;return Cl+=Pt+" "+oe+` Tf
`,Cl+=N(oe*Ro)+` TL
`,Cl+=Hs+`
`,Cl+=Yi,Cl+=D,ae(Cl+="ET"),g[Pt]=!0,xn};var bl=m.__private__.clip=m.clip=function(D){return ae(D==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return bl("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ae("n"),this};var tn=m.__private__.isValidStyle=function(D){var ie=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(D)!==-1&&(ie=!0),ie};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(D){return tn(D)&&(c=D),this};var Xo=m.__private__.getStyle=m.getStyle=function(D){var ie=c;switch(D){case"D":case"S":ie="S";break;case"F":ie="f";break;case"FD":case"DF":ie="B";break;case"f":case"f*":case"B":case"B*":ie=D}return ie},Kr=m.close=function(){return ae("h"),this};m.stroke=function(){return ae("S"),this},m.fill=function(D){return ya("f",D),this},m.fillEvenOdd=function(D){return ya("f*",D),this},m.fillStroke=function(D){return ya("B",D),this},m.fillStrokeEvenOdd=function(D){return ya("B*",D),this};var ya=function(D,ie){Xn(ie)==="object"?vd(ie,D):ae(D)},Pc=function(D){D===null||V===P&&D===void 0||(D=Xo(D),ae(D))};function Rc(D,ie,Ce,De,He){var vt=new d1(ie||this.boundingBox,Ce||this.xStep,De||this.yStep,this.gState,He||this.matrix);vt.stream=this.stream;var bt=D+"$$"+this.cloneIndex+++"$$";return Un(bt,vt),vt}var vd=function(D,ie){var Ce=Bt[D.key],De=Ve[Ce];if(De instanceof wf)ae("q"),ae(yd(ie)),De.gState&&m.setGState(De.gState),ae(D.matrix.toString()+" cm"),ae("/"+Ce+" sh"),ae("Q");else if(De instanceof d1){var He=new sr(1,0,0,-1,0,As());D.matrix&&(He=He.multiply(D.matrix||ds),Ce=Rc.call(De,D.key,D.boundingBox,D.xStep,D.yStep,He).id),ae("q"),ae("/Pattern cs"),ae("/"+Ce+" scn"),De.gState&&m.setGState(De.gState),ae(ie),ae("Q")}},yd=function(D){switch(D){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Fc=m.moveTo=function(D,ie){return ae(N(B(D))+" "+N(te(ie))+" m"),this},Yo=m.lineTo=function(D,ie){return ae(N(B(D))+" "+N(te(ie))+" l"),this},zs=m.curveTo=function(D,ie,Ce,De,He,vt){return ae([N(B(D)),N(te(ie)),N(B(Ce)),N(te(De)),N(B(He)),N(te(vt)),"c"].join(" ")),this};m.__private__.line=m.line=function(D,ie,Ce,De,He){if(isNaN(D)||isNaN(ie)||isNaN(Ce)||isNaN(De)||!tn(He))throw new Error("Invalid arguments passed to jsPDF.line");return V===O?this.lines([[Ce-D,De-ie]],D,ie,[1,1],He||"S"):this.lines([[Ce-D,De-ie]],D,ie,[1,1]).stroke()},m.__private__.lines=m.lines=function(D,ie,Ce,De,He,vt){var bt,Yt,er,br,Ir,ln,Jn,oi,xn,Ni,On,Yi;if(typeof D=="number"&&(Yi=Ce,Ce=ie,ie=D,D=Yi),De=De||[1,1],vt=vt||!1,isNaN(ie)||isNaN(Ce)||!Array.isArray(D)||!Array.isArray(De)||!tn(He)||typeof vt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Fc(ie,Ce),bt=De[0],Yt=De[1],br=D.length,Ni=ie,On=Ce,er=0;er<br;er++)(Ir=D[er]).length===2?(Ni=Ir[0]*bt+Ni,On=Ir[1]*Yt+On,Yo(Ni,On)):(ln=Ir[0]*bt+Ni,Jn=Ir[1]*Yt+On,oi=Ir[2]*bt+Ni,xn=Ir[3]*Yt+On,Ni=Ir[4]*bt+Ni,On=Ir[5]*Yt+On,zs(ln,Jn,oi,xn,Ni,On));return vt&&Kr(),Pc(He),this},m.path=function(D){for(var ie=0;ie<D.length;ie++){var Ce=D[ie],De=Ce.c;switch(Ce.op){case"m":Fc(De[0],De[1]);break;case"l":Yo(De[0],De[1]);break;case"c":zs.apply(this,De);break;case"h":Kr()}}return this},m.__private__.rect=m.rect=function(D,ie,Ce,De,He){if(isNaN(D)||isNaN(ie)||isNaN(Ce)||isNaN(De)||!tn(He))throw new Error("Invalid arguments passed to jsPDF.rect");return V===O&&(De=-De),ae([N(B(D)),N(te(ie)),N(B(Ce)),N(B(De)),"re"].join(" ")),Pc(He),this},m.__private__.triangle=m.triangle=function(D,ie,Ce,De,He,vt,bt){if(isNaN(D)||isNaN(ie)||isNaN(Ce)||isNaN(De)||isNaN(He)||isNaN(vt)||!tn(bt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ce-D,De-ie],[He-Ce,vt-De],[D-He,ie-vt]],D,ie,[1,1],bt,!0),this},m.__private__.roundedRect=m.roundedRect=function(D,ie,Ce,De,He,vt,bt){if(isNaN(D)||isNaN(ie)||isNaN(Ce)||isNaN(De)||isNaN(He)||isNaN(vt)||!tn(bt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Yt=4/3*(Math.SQRT2-1);return He=Math.min(He,.5*Ce),vt=Math.min(vt,.5*De),this.lines([[Ce-2*He,0],[He*Yt,0,He,vt-vt*Yt,He,vt],[0,De-2*vt],[0,vt*Yt,-He*Yt,vt,-He,vt],[2*He-Ce,0],[-He*Yt,0,-He,-vt*Yt,-He,-vt],[0,2*vt-De],[0,-vt*Yt,He*Yt,-vt,He,-vt]],D+He,ie,[1,1],bt,!0),this},m.__private__.ellipse=m.ellipse=function(D,ie,Ce,De,He){if(isNaN(D)||isNaN(ie)||isNaN(Ce)||isNaN(De)||!tn(He))throw new Error("Invalid arguments passed to jsPDF.ellipse");var vt=4/3*(Math.SQRT2-1)*Ce,bt=4/3*(Math.SQRT2-1)*De;return Fc(D+Ce,ie),zs(D+Ce,ie-bt,D+vt,ie-De,D,ie-De),zs(D-vt,ie-De,D-Ce,ie-bt,D-Ce,ie),zs(D-Ce,ie+bt,D-vt,ie+De,D,ie+De),zs(D+vt,ie+De,D+Ce,ie+bt,D+Ce,ie),Pc(He),this},m.__private__.circle=m.circle=function(D,ie,Ce,De){if(isNaN(D)||isNaN(ie)||isNaN(Ce)||!tn(De))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(D,ie,Ce,Ce,De)},m.setFont=function(D,ie,Ce){return Ce&&(ie=L(ie,Ce)),Pt=Ko(D,ie,{disableWarning:!1}),this};var fs=m.__private__.getFont=m.getFont=function(){return Ut[Ko.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var D,ie,Ce={};for(D in xr)if(xr.hasOwnProperty(D))for(ie in Ce[D]=[],xr[D])xr[D].hasOwnProperty(ie)&&Ce[D].push(ie);return Ce},m.addFont=function(D,ie,Ce,De,He){var vt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&vt.indexOf(arguments[3])!==-1?He=arguments[3]:arguments[3]&&vt.indexOf(arguments[3])==-1&&(Ce=L(Ce,De)),fn.call(this,D,ie,Ce,He=He||"Identity-H")};var $s,wa=t.lineWidth||.200025,kr=m.__private__.getLineWidth=m.getLineWidth=function(){return wa},Va=m.__private__.setLineWidth=m.setLineWidth=function(D){return wa=D,ae(N(B(D))+" w"),this};m.__private__.setLineDash=wr.API.setLineDash=wr.API.setLineDashPattern=function(D,ie){if(D=D||[],ie=ie||0,isNaN(ie)||!Array.isArray(D))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return D=D.map(function(Ce){return N(B(Ce))}).join(" "),ie=N(B(ie)),ae("["+D+"] "+ie+" d"),this};var Ao=m.__private__.getLineHeight=m.getLineHeight=function(){return oe*$s};m.__private__.getLineHeight=m.getLineHeight=function(){return oe*$s};var $0=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(D){return typeof(D=D||1.15)=="number"&&($s=D),this},wd=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return $s};$0(t.lineHeight);var Ti=m.__private__.getHorizontalCoordinate=function(D){return B(D)},Qo=m.__private__.getVerticalCoordinate=function(D){return V===P?D:Zt[H].mediaBox.topRightY-Zt[H].mediaBox.bottomLeftY-B(D)},bd=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(D){return N(Ti(D))},Jo=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(D){return N(Qo(D))},Io=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Ae(Io)},m.__private__.setStrokeColor=m.setDrawColor=function(D,ie,Ce,De){return Io=Ie({ch1:D,ch2:ie,ch3:Ce,ch4:De,pdfColorType:"draw",precision:2}),ae(Io),this};var Lc=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Ae(Lc)},m.__private__.setFillColor=m.setFillColor=function(D,ie,Ce,De){return Lc=Ie({ch1:D,ch2:ie,ch3:Ce,ch4:De,pdfColorType:"fill",precision:2}),ae(Lc),this};var Hs=t.textColor||"0 g",na=m.__private__.getTextColor=m.getTextColor=function(){return Ae(Hs)};m.__private__.setTextColor=m.setTextColor=function(D,ie,Ce,De){return Hs=Ie({ch1:D,ch2:ie,ch3:Ce,ch4:De,pdfColorType:"text",precision:3}),this};var Ua=t.charSpace,_l=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Ua||0)};m.__private__.setCharSpace=m.setCharSpace=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ua=D,this};var Dn=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(D){var ie=m.CapJoinStyles[D];if(ie===void 0)throw new Error("Line cap style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Dn=ie,ae(ie+" J"),this};var _u=0;m.__private__.setLineJoin=m.setLineJoin=function(D){var ie=m.CapJoinStyles[D];if(ie===void 0)throw new Error("Line join style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _u=ie,ae(ie+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(D){if(D=D||0,isNaN(D))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ae(N(B(D))+" M"),this},m.GState=zv,m.setGState=function(D){(D=typeof D=="string"?zt[nr[D]]:Zo(null,D)).equals(lr)||(ae("/"+D.id+" gs"),lr=D)};var Zo=function(D,ie){if(!D||!nr[D]){var Ce=!1;for(var De in zt)if(zt.hasOwnProperty(De)&&zt[De].equals(ie)){Ce=!0;break}if(Ce)ie=zt[De];else{var He="GS"+(Object.keys(zt).length+1).toString(10);zt[He]=ie,ie.id=He}return D&&(nr[D]=ie.id),yr.publish("addGState",ie),ie}};m.addGState=function(D,ie){return Zo(D,ie),this},m.saveGraphicsState=function(){return ae("q"),Yr.push({key:Pt,size:oe,color:Hs}),this},m.restoreGraphicsState=function(){ae("Q");var D=Yr.pop();return Pt=D.key,oe=D.size,Hs=D.color,lr=null,this},m.setCurrentTransformationMatrix=function(D){return ae(D.toString()+" cm"),this},m.comment=function(D){return ae("#"+D),this};var vo=function(D,ie){var Ce=D||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ce},set:function(vt){isNaN(vt)||(Ce=parseFloat(vt))}});var De=ie||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return De},set:function(vt){isNaN(vt)||(De=parseFloat(vt))}});var He="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return He},set:function(vt){He=vt.toString()}}),this},kl=function(D,ie,Ce,De){vo.call(this,D,ie),this.type="rect";var He=Ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return He},set:function(bt){isNaN(bt)||(He=parseFloat(bt))}});var vt=De||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return vt},set:function(bt){isNaN(bt)||(vt=parseFloat(bt))}}),this},El=function(){this.page=hr,this.currentPage=H,this.pages=Le.slice(0),this.pagesContext=Zt.slice(0),this.x=_t,this.y=Xt,this.matrix=Kt,this.width=Ns(H),this.height=As(H),this.outputDestination=Be,this.id="",this.objectNumber=-1};El.prototype.restore=function(){hr=this.page,H=this.currentPage,Zt=this.pagesContext,Le=this.pages,_t=this.x,Xt=this.y,Kt=this.matrix,nc(H,this.width),hs(H,this.height),Be=this.outputDestination};var qs=function(D,ie,Ce,De,He){jn.push(new El),hr=H=0,Le=[],_t=D,Xt=ie,Kt=He,gn([Ce,De])};for(var Po in m.beginFormObject=function(D,ie,Ce,De,He){return qs(D,ie,Ce,De,He),this},m.endFormObject=function(D){return(function(ie){if(Ln[ie])jn.pop().restore();else{var Ce=new El,De="Xo"+(Object.keys(qr).length+1).toString(10);Ce.id=De,Ln[ie]=De,qr[De]=Ce,yr.publish("addFormObject",Ce),jn.pop().restore()}})(D),this},m.doFormObject=function(D,ie){var Ce=qr[Ln[D]];return ae("q"),ae(ie.toString()+" cm"),ae("/"+Ce.id+" Do"),ae("Q"),this},m.getFormObject=function(D){var ie=qr[Ln[D]];return{x:ie.x,y:ie.y,width:ie.width,height:ie.height,matrix:ie.matrix}},m.save=function(D,ie){return D=D||"generated.pdf",(ie=ie||{}).returnPromise=ie.returnPromise||!1,ie.returnPromise===!1?(pf(Ba(Ma()),D),typeof pf.unload=="function"&&Dr.setTimeout&&setTimeout(pf.unload,911),this):new Promise(function(Ce,De){try{var He=pf(Ba(Ma()),D);typeof pf.unload=="function"&&Dr.setTimeout&&setTimeout(pf.unload,911),Ce(He)}catch(vt){De(vt.message)}})},wr.API)wr.API.hasOwnProperty(Po)&&(Po==="events"&&wr.API.events.length?(function(D,ie){var Ce,De,He;for(He=ie.length-1;He!==-1;He--)Ce=ie[He][0],De=ie[He][1],D.subscribe.apply(D,[Ce].concat(typeof De=="function"?[De]:De))})(yr,wr.API.events):m[Po]=wr.API[Po]);var Ns=m.getPageWidth=function(D){return(Zt[D=D||H].mediaBox.topRightX-Zt[D].mediaBox.bottomLeftX)/mt},nc=m.setPageWidth=function(D,ie){Zt[D].mediaBox.topRightX=ie*mt+Zt[D].mediaBox.bottomLeftX},As=m.getPageHeight=function(D){return(Zt[D=D||H].mediaBox.topRightY-Zt[D].mediaBox.bottomLeftY)/mt},hs=m.setPageHeight=function(D,ie){Zt[D].mediaBox.topRightY=ie*mt+Zt[D].mediaBox.bottomLeftY};return m.internal={pdfEscape:Mr,getStyle:Xo,getFont:fs,getFontSize:Ge,getCharSpace:_l,getTextColor:na,getLineHeight:Ao,getLineHeightFactor:wd,getLineWidth:kr,write:$e,getHorizontalCoordinate:Ti,getVerticalCoordinate:Qo,getCoordinateString:bd,getVerticalCoordinateString:Jo,collections:{},newObject:Cn,newAdditionalObject:Ne,newObjectDeferred:ai,newObjectDeferredBegin:le,getFilters:Qe,putStream:lt,events:yr,scaleFactor:mt,pageSize:{getWidth:function(){return Ns(H)},setWidth:function(D){nc(H,D)},getHeight:function(){return As(H)},setHeight:function(D){hs(H,D)}},encryptionOptions:d,encryption:Pn,getEncryptor:function(D){return d!==null?Pn.encryptor(D,0):function(ie){return ie}},output:Vs,getNumberOfPages:fi,pages:Le,out:ae,f2:A,f3:F,getPageInfo:Us,getPageInfoByObjId:rc,getCurrentPageInfo:wl,getPDFVersion:y,Point:vo,Rectangle:kl,Matrix:sr,hasHotfix:tc},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Ns(H)},set:function(D){nc(H,D)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return As(H)},set:function(D){hs(H,D)},enumerable:!0,configurable:!0}),(function(D){for(var ie=0,Ce=it.length;ie<Ce;ie++){var De=fn.call(this,D[ie][0],D[ie][1],D[ie][2],it[ie][3],!0);p===!1&&(g[De]=!0);var He=D[ie][0].split("-");Er({id:De,fontName:He[0],fontStyle:He[1]||""})}yr.publish("addFonts",{fonts:Ut,dictionary:xr})}).call(m,it),Pt="F1",Da(i,r),yr.publish("initialized"),m}l1.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},l1.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},l1.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},l1.prototype.processOwnerPassword=function(t,e){return bw(ww(e).substr(0,5),t)},l1.prototype.encryptor=function(t,e){var r=ww(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return bw(r,n)}},zv.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Xn(t)!==Xn(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},wr.API={events:[]},wr.version="3.0.2";var ts=wr.API,u_=1,wh=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zh=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ur=function(t){return t.toFixed(2)},Xd=function(t){return t.toFixed(5)};ts.__acroform__={};var Go=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},vS=function(t){return t*u_},Yc=function(t){var e=new SL,r=ur.internal.getHeight(t)||0,n=ur.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Ur(n)),Number(Ur(r))],e},pce=ts.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},mce=ts.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},gce=ts.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},ws=ts.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return gce(t,e-1)},bs=ts.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return pce(t,e-1)},_s=ts.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return mce(t,e-1)},xce=ts.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=t[0],s=t[1],a=t[2],o=t[3],l={};return l.lowerLeft_X=r(i)||0,l.lowerLeft_Y=n(s+o)||0,l.upperRight_X=r(i+a)||0,l.upperRight_Y=n(s)||0,[Number(Ur(l.lowerLeft_X)),Number(Ur(l.lowerLeft_Y)),Number(Ur(l.upperRight_X)),Number(Ur(l.upperRight_Y))]},vce=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=_w(t,r),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Ur(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Yc(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},_w=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(A){return A.split(`
`)}):i.map(function(A){return[A]});var s=r,a=ur.internal.getHeight(t)||0;a=a<0?-a:a;var o=ur.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(A,F,B){if(A+1<i.length){var te=F+" "+i[A+1][0];return vx(te,t,B).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var c,d,p=vx("3",t,s).height,g=t.multiline?a-s:(a-p)/2,m=g+=2,w=0,y=0,k=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+vx(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var T="",O=0,P=0;P<i.length;P++)if(i.hasOwnProperty(P)){var V=!1;if(i[P].length!==1&&k!==i[P].length-1){if((p+2)*(O+2)+2>a)continue e;T+=i[P][k],V=!0,y=P,P--}else{T=(T+=i[P][k]+" ").substr(T.length-1)==" "?T.substr(0,T.length-1):T;var Y=parseInt(P),G=l(Y,T,s),L=P>=i.length-1;if(G&&!L){T+=" ",k=0;continue}if(G||L){if(L)y=Y;else if(t.multiline&&(p+2)*(O+2)+2>a)continue e}else{if(!t.multiline||(p+2)*(O+2)+2>a)continue e;y=Y}}for(var N="",C=w;C<=y;C++){var R=i[C];if(t.multiline){if(C===y){N+=R[k]+" ",k=(k+1)%R.length;continue}if(C===w){N+=R[R.length-1]+" ";continue}}N+=R[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,d=vx(N,t,s).width,t.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;default:c=2}e+=Ur(c)+" "+Ur(m)+` Td
`,e+="("+wh(N)+`) Tj
`,e+=-Ur(c)+` 0 Td
`,m=-(s+2),d=0,w=V?y:y+1,O++,T=""}break}return n.text=e,n.fontSize=s,n},vx=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},yce={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},wce=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},bce=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ac.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(yce)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");u_=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new CL,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.objId=void 0,s.hasAnnotation&&wce(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,i){var s=!n;for(var a in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],l=[],c=o.Rect;if(o.Rect&&(o.Rect=xce(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=ur.createDefaultAppearanceStream(o),Xn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=vce(o);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var p="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var m=o.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var a in m)if(m.hasOwnProperty(a)){var w=m[a];typeof w=="function"&&(w=w.call(i,o)),p+="/"+a+" "+w+" ",i.internal.acroformPlugin.xForms.indexOf(w)>=0||i.internal.acroformPlugin.xForms.push(w)}}else typeof(w=m)=="function"&&(w=w.call(i,o)),p+="/"+a+" "+w,i.internal.acroformPlugin.xForms.indexOf(w)>=0||i.internal.acroformPlugin.xForms.push(w);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}s&&(function(y,k){for(var T in y)if(y.hasOwnProperty(T)){var O=T,P=y[T];k.internal.newObjectDeferredBegin(P.objId,!0),Xn(P)==="object"&&typeof P.putStream=="function"&&P.putStream(),delete y[O]}})(i.internal.acroformPlugin.xForms,i)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},EL=ts.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Xn(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),i+="("+wh(n(t[s].toString()))+")"):i+=t[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},q4=function(t,e,r){var n=function(i){return i};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+wh(n(t))+")"},iu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};iu.prototype.toString=function(){return this.objId+" 0 R"},iu.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},iu.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],i=this[n];i&&(Array.isArray(i)?t.push({key:n,value:EL(i,this.objId,this.scope)}):i instanceof iu?(i.scope=this.scope,t.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:n,value:i}))}return t};var SL=function(){iu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Go(SL,iu);var CL=function(){iu.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+wh(r(t))+")"}},set:function(r){t=r}})};Go(CL,iu);var Ac=function t(){iu.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute F supplied.');e=T}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ws(e,3)},set:function(T){T?this.F=bs(e,3):this.F=_s(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute Ff supplied.');r=T}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(T){n=T!==void 0?T:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(T){n[0]=T}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(T){n[1]=T}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(T){n[2]=T}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(T){n[3]=T}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(T){switch(T){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=T;break;default:throw new Error('Invalid value "'+T+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof $v)return;s="FieldObject"+t.FieldNum++}var T=function(O){return O};return this.scope&&(T=this.scope.internal.getEncryptor(this.objId)),"("+wh(T(s))+")"},set:function(T){s=T.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(T){s=T}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(T){a=T}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(T){o=T}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(T){l=T}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/u_:c},set:function(T){c=T}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(T){d=T}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof $v||this instanceof Lf))return q4(p,this.objId,this.scope)},set:function(T){T=T.toString(),p=T}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof pa==0?q4(g,this.objId,this.scope):g},set:function(T){T=T.toString(),g=this instanceof pa==0?T.substr(0,1)==="("?Zh(T.substr(1,T.length-2)):Zh(T):T}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof pa==1?Zh(g.substr(1,g.length-1)):g},set:function(T){T=T.toString(),g=this instanceof pa==1?"/"+T:T}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(T){this.V=T}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof pa==0?q4(m,this.objId,this.scope):m},set:function(T){T=T.toString(),m=this instanceof pa==0?T.substr(0,1)==="("?Zh(T.substr(1,T.length-2)):Zh(T):T}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof pa==1?Zh(m.substr(1,m.length-1)):m},set:function(T){T=T.toString(),m=this instanceof pa==1?"/"+T:T}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var w,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(T){T=!!T,y=T}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(w)return w},set:function(T){w=T}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,1)},set:function(T){T?this.Ff=bs(this.Ff,1):this.Ff=_s(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,2)},set:function(T){T?this.Ff=bs(this.Ff,2):this.Ff=_s(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,3)},set:function(T){T?this.Ff=bs(this.Ff,3):this.Ff=_s(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(T){if([0,1,2].indexOf(T)===-1)throw new Error('Invalid value "'+T+'" for attribute Q supplied.');k=T}}),Object.defineProperty(this,"textAlign",{get:function(){var T;switch(k){case 0:default:T="left";break;case 1:T="center";break;case 2:T="right"}return T},configurable:!0,enumerable:!0,set:function(T){switch(T){case"right":case 2:k=2;break;case"center":case 1:k=1;break;default:k=0}}})};Go(Ac,iu);var E1=function(){Ac.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return EL(e,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=(function(s,a,o){o||(o=1);for(var l,c=[];l=a.exec(s);)c.push(l[o]);return c})(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,18)},set:function(r){r?this.Ff=bs(this.Ff,18):this.Ff=_s(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=bs(this.Ff,19):this.Ff=_s(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,20)},set:function(r){r?(this.Ff=bs(this.Ff,20),e.sort()):this.Ff=_s(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,22)},set:function(r){r?this.Ff=bs(this.Ff,22):this.Ff=_s(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,23)},set:function(r){r?this.Ff=bs(this.Ff,23):this.Ff=_s(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,27)},set:function(r){r?this.Ff=bs(this.Ff,27):this.Ff=_s(this.Ff,27)}}),this.hasAppearanceStream=!1};Go(E1,Ac);var S1=function(){E1.call(this),this.fontName="helvetica",this.combo=!1};Go(S1,E1);var C1=function(){S1.call(this),this.combo=!0};Go(C1,S1);var qx=function(){C1.call(this),this.edit=!0};Go(qx,C1);var pa=function(){Ac.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,15)},set:function(r){r?this.Ff=bs(this.Ff,15):this.Ff=_s(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,16)},set:function(r){r?this.Ff=bs(this.Ff,16):this.Ff=_s(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,17)},set:function(r){r?this.Ff=bs(this.Ff,17):this.Ff=_s(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,26)},set:function(r){r?this.Ff=bs(this.Ff,26):this.Ff=_s(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+wh(r(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){Xn(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Go(pa,Ac);var Wx=function(){pa.call(this),this.pushButton=!0};Go(Wx,pa);var T1=function(){pa.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Go(T1,pa);var $v=function(){var t,e;Ac.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),n)a.push("/"+s+" ("+wh(i(n[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Xn(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ur.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Go($v,Ac),T1.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},T1.prototype.createOption=function(t){var e=new $v;return e.Parent=this,e.optionName=t,this.Kids.push(e),_ce.call(this.scope,e),e};var Gx=function(){pa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ur.CheckBox.createAppearanceStream()};Go(Gx,pa);var Lf=function(){Ac.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,13)},set:function(e){e?this.Ff=bs(this.Ff,13):this.Ff=_s(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,21)},set:function(e){e?this.Ff=bs(this.Ff,21):this.Ff=_s(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,23)},set:function(e){e?this.Ff=bs(this.Ff,23):this.Ff=_s(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,24)},set:function(e){e?this.Ff=bs(this.Ff,24):this.Ff=_s(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,25)},set:function(e){e?this.Ff=bs(this.Ff,25):this.Ff=_s(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,26)},set:function(e){e?this.Ff=bs(this.Ff,26):this.Ff=_s(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Go(Lf,Ac);var Kx=function(){Lf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,14)},set:function(t){t?this.Ff=bs(this.Ff,14):this.Ff=_s(this.Ff,14)}}),this.password=!0};Go(Kx,Lf);var ur={CheckBox:{createAppearanceStream:function(){return{N:{On:ur.CheckBox.YesNormal},D:{On:ur.CheckBox.YesPushDown,Off:ur.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Yc(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=_w(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Ur(ur.internal.getWidth(t))+" "+Ur(ur.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Ur(s.fontSize)+" Tf "+i),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Yc(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=[],s=ur.internal.getHeight(t),a=ur.internal.getWidth(t),o=_w(t,t.caption);return i.push("1 g"),i.push("0 0 "+Ur(a)+" "+Ur(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Ur(a-1)+" "+Ur(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+Ur(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Yc(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ur(ur.internal.getWidth(t))+" "+Ur(ur.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ur.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ur.RadioButton.Circle.YesNormal,e.D[t]=ur.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Yc(t);e.scope=t.scope;var r=[],n=ur.internal.getWidth(t)<=ur.internal.getHeight(t)?ur.internal.getWidth(t)/4:ur.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=ur.internal.Bezier_C,s=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Xd(ur.internal.getWidth(t)/2)+" "+Xd(ur.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Yc(t);e.scope=t.scope;var r=[],n=ur.internal.getWidth(t)<=ur.internal.getHeight(t)?ur.internal.getWidth(t)/4:ur.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*ur.internal.Bezier_C).toFixed(5)),a=Number((n*ur.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Xd(ur.internal.getWidth(t)/2)+" "+Xd(ur.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Xd(ur.internal.getWidth(t)/2)+" "+Xd(ur.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Yc(t);e.scope=t.scope;var r=[],n=ur.internal.getWidth(t)<=ur.internal.getHeight(t)?ur.internal.getWidth(t)/4:ur.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*ur.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Xd(ur.internal.getWidth(t)/2)+" "+Xd(ur.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ur.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ur.RadioButton.Cross.YesNormal,e.D[t]=ur.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Yc(t);e.scope=t.scope;var r=[],n=ur.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Ur(ur.internal.getWidth(t)-2)+" "+Ur(ur.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Ur(n.x1.x)+" "+Ur(n.x1.y)+" m"),r.push(Ur(n.x2.x)+" "+Ur(n.x2.y)+" l"),r.push(Ur(n.x4.x)+" "+Ur(n.x4.y)+" m"),r.push(Ur(n.x3.x)+" "+Ur(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Yc(t);e.scope=t.scope;var r=ur.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Ur(ur.internal.getWidth(t))+" "+Ur(ur.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Ur(ur.internal.getWidth(t)-2)+" "+Ur(ur.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Ur(r.x1.x)+" "+Ur(r.x1.y)+" m"),n.push(Ur(r.x2.x)+" "+Ur(r.x2.y)+" l"),n.push(Ur(r.x4.x)+" "+Ur(r.x4.y)+" m"),n.push(Ur(r.x3.x)+" "+Ur(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Yc(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ur(ur.internal.getWidth(t))+" "+Ur(ur.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};ur.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ur.internal.getWidth(t),r=ur.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},ur.internal.getWidth=function(t){var e=0;return Xn(t)==="object"&&(e=vS(t.Rect[2])),e},ur.internal.getHeight=function(t){var e=0;return Xn(t)==="object"&&(e=vS(t.Rect[3])),e};var _ce=ts.addField=function(t){if(bce(this,t),!(t instanceof Ac))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ts.AcroFormChoiceField=E1,ts.AcroFormListBox=S1,ts.AcroFormComboBox=C1,ts.AcroFormEditBox=qx,ts.AcroFormButton=pa,ts.AcroFormPushButton=Wx,ts.AcroFormRadioButton=T1,ts.AcroFormCheckBox=Gx,ts.AcroFormTextField=Lf,ts.AcroFormPasswordField=Kx,ts.AcroFormAppearance=ur,ts.AcroForm={ChoiceField:E1,ListBox:S1,ComboBox:C1,EditBox:qx,Button:pa,PushButton:Wx,RadioButton:T1,CheckBox:Gx,TextField:Lf,PasswordField:Kx,Appearance:ur},wr.AcroForm={ChoiceField:E1,ListBox:S1,ComboBox:C1,EditBox:qx,Button:pa,PushButton:Wx,RadioButton:T1,CheckBox:Gx,TextField:Lf,PasswordField:Kx,Appearance:ur};wr.AcroForm;function TL(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(A,F){var B,te,pe,Ee,ve,re=r;if((F=F||r)==="RGBA"||A.data!==void 0&&A.data instanceof Uint8ClampedArray&&"height"in A&&"width"in A)return"RGBA";if(G(A))for(ve in n)for(pe=n[ve],B=0;B<pe.length;B+=1){for(Ee=!0,te=0;te<pe[B].length;te+=1)if(pe[B][te]!==void 0&&pe[B][te]!==A[te]){Ee=!1;break}if(Ee===!0){re=ve;break}}else for(ve in n)for(pe=n[ve],B=0;B<pe.length;B+=1){for(Ee=!0,te=0;te<pe[B].length;te+=1)if(pe[B][te]!==void 0&&pe[B][te]!==A.charCodeAt(te)){Ee=!1;break}if(Ee===!0){re=ve;break}}return re===r&&F!==r&&(re=F),re},s=function A(F){for(var B=this.internal.write,te=this.internal.putStream,pe=(0,this.internal.getFilters)();pe.indexOf("FlateEncode")!==-1;)pe.splice(pe.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var Ee=[];if(Ee.push({key:"Type",value:"/XObject"}),Ee.push({key:"Subtype",value:"/Image"}),Ee.push({key:"Width",value:F.width}),Ee.push({key:"Height",value:F.height}),F.colorSpace===T.INDEXED?Ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(Ee.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===T.DEVICE_CMYK&&Ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ee.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&Ee.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)){for(var ve="",re=0,W=F.transparency.length;re<W;re++)ve+=F.transparency[re]+" "+F.transparency[re]+" ";Ee.push({key:"Mask",value:"["+ve+"]"})}F.sMask!==void 0&&Ee.push({key:"SMask",value:F.objectId+1+" 0 R"});var ne=F.filter!==void 0?["/"+F.filter]:void 0;if(te({data:F.data,additionalKeyValues:Ee,alreadyAppliedFilters:ne,objectId:F.objectId}),B("endobj"),"sMask"in F&&F.sMask!==void 0){var Q=(F.predictor!=null?"/Predictor "+F.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+F.width,I={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:F.bitsPerComponent,decodeParameters:Q,data:F.sMask};"filter"in F&&(I.filter=F.filter),A.call(this,I)}if(F.colorSpace===T.INDEXED){var H=this.internal.newObject();te({data:N(new Uint8Array(F.palette)),objectId:H}),B("endobj")}},a=function(){var A=this.internal.collections[e+"images"];for(var F in A)s.call(this,A[F])},o=function(){var A,F=this.internal.collections[e+"images"],B=this.internal.write;for(var te in F)B("/I"+(A=F[te]).index,A.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var A=this.internal.collections[e+"images"];return l.call(this),A},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},p=function(A){return typeof t["process"+A.toUpperCase()]=="function"},g=function(A){return Xn(A)==="object"&&A.nodeType===1},m=function(A,F){if(A.nodeName==="IMG"&&A.hasAttribute("src")){var B=""+A.getAttribute("src");if(B.indexOf("data:image/")===0)return Hx(unescape(B).split("base64,").pop());var te=t.loadFile(B,!0);if(te!==void 0)return te}if(A.nodeName==="CANVAS"){if(A.width===0||A.height===0)throw new Error("Given canvas must have data. Canvas width: "+A.width+", height: "+A.height);var pe;switch(F){case"PNG":pe="image/png";break;case"WEBP":pe="image/webp";break;default:pe="image/jpeg"}return Hx(A.toDataURL(pe,1).split("base64,").pop())}},w=function(A){var F=this.internal.collections[e+"images"];if(F){for(var B in F)if(A===F[B].alias)return F[B]}},y=function(A,F,B){return A||F||(A=-96,F=-96),A<0&&(A=-1*B.width*72/A/this.internal.scaleFactor),F<0&&(F=-1*B.height*72/F/this.internal.scaleFactor),A===0&&(A=F*B.width/B.height),F===0&&(F=A*B.height/B.width),[A,F]},k=function(A,F,B,te,pe,Ee){var ve=y.call(this,B,te,pe),re=this.internal.getCoordinateString,W=this.internal.getVerticalCoordinateString,ne=c.call(this);if(B=ve[0],te=ve[1],ne[pe.index]=pe,Ee){Ee*=Math.PI/180;var Q=Math.cos(Ee),I=Math.sin(Ee),H=function(J){return J.toFixed(4)},X=[H(Q),H(I),H(-1*I),H(Q),0,0,"cm"]}this.internal.write("q"),Ee?(this.internal.write([1,"0","0",1,re(A),W(F+te),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([re(B),"0","0",re(te),"0","0","cm"].join(" "))):this.internal.write([re(B),"0","0",re(te),re(A),W(F+te),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+pe.index+" Do"),this.internal.write("Q")},T=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var O=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},P=t.__addimage__.sHashCode=function(A){var F,B,te=0;if(typeof A=="string")for(B=A.length,F=0;F<B;F++)te=(te<<5)-te+A.charCodeAt(F),te|=0;else if(G(A))for(B=A.byteLength/2,F=0;F<B;F++)te=(te<<5)-te+A[F],te|=0;return te},V=t.__addimage__.validateStringAsBase64=function(A){(A=A||"").toString().trim();var F=!0;return A.length===0&&(F=!1),A.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(A.substr(0,A.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2))===!1&&(F=!1),F},Y=t.__addimage__.extractImageFromDataUrl=function(A){if(A==null||!(A=A.trim()).startsWith("data:"))return null;var F=A.indexOf(",");return F<0?null:A.substring(0,F).trim().endsWith("base64")?A.substring(F+1):null};t.__addimage__.isArrayBuffer=function(A){return A instanceof ArrayBuffer};var G=t.__addimage__.isArrayBufferView=function(A){return A instanceof Int8Array||A instanceof Uint8Array||A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array||A instanceof Float64Array},L=t.__addimage__.binaryStringToUint8Array=function(A){for(var F=A.length,B=new Uint8Array(F),te=0;te<F;te++)B[te]=A.charCodeAt(te);return B},N=t.__addimage__.arrayBufferToBinaryString=function(A){for(var F="",B=G(A)?A:new Uint8Array(A),te=0;te<B.length;te+=8192)F+=String.fromCharCode.apply(null,B.subarray(te,te+8192));return F};t.addImage=function(){var A,F,B,te,pe,Ee,ve,re,W;if(typeof arguments[1]=="number"?(F=r,B=arguments[1],te=arguments[2],pe=arguments[3],Ee=arguments[4],ve=arguments[5],re=arguments[6],W=arguments[7]):(F=arguments[1],B=arguments[2],te=arguments[3],pe=arguments[4],Ee=arguments[5],ve=arguments[6],re=arguments[7],W=arguments[8]),Xn(A=arguments[0])==="object"&&!g(A)&&"imageData"in A){var ne=A;A=ne.imageData,F=ne.format||F||r,B=ne.x||B||0,te=ne.y||te||0,pe=ne.w||ne.width||pe,Ee=ne.h||ne.height||Ee,ve=ne.alias||ve,re=ne.compression||re,W=ne.rotation||ne.angle||W}var Q=this.internal.getFilters();if(re===void 0&&Q.indexOf("FlateEncode")!==-1&&(re="SLOW"),isNaN(B)||isNaN(te))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var I=C.call(this,A,F,ve,re);return k.call(this,B,te,pe,Ee,I,W),this};var C=function(A,F,B,te){var pe,Ee,ve;if(typeof A=="string"&&i(A)===r){A=unescape(A);var re=R(A,!1);(re!==""||(re=t.loadFile(A,!0))!==void 0)&&(A=re)}if(g(A)&&(A=m(A,F)),F=i(A,F),!p(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((ve=B)==null||ve.length===0)&&(B=(function(W){return typeof W=="string"||G(W)?P(W):G(W.data)?P(W.data):null})(A)),(pe=w.call(this,B))||(A instanceof Uint8Array||F==="RGBA"||(Ee=A,A=L(A)),pe=this["process"+F.toUpperCase()](A,d.call(this),B,(function(W){return W&&typeof W=="string"&&(W=W.toUpperCase()),W in t.image_compression?W:O.NONE})(te),Ee)),!pe)throw new Error("An unknown error occurred whilst processing the image.");return pe},R=t.__addimage__.convertBase64ToBinaryString=function(A,F){F=typeof F!="boolean"||F;var B,te="";if(typeof A=="string"){var pe;B=(pe=Y(A))!==null&&pe!==void 0?pe:A;try{te=Hx(B)}catch(Ee){if(F)throw V(B)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};t.getImageProperties=function(A){var F,B,te="";if(g(A)&&(A=m(A)),typeof A=="string"&&i(A)===r&&((te=R(A,!1))===""&&(te=t.loadFile(A)||""),A=te),B=i(A),!p(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(A instanceof Uint8Array||(A=L(A)),!(F=this["process"+B.toUpperCase()](A)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=B,F}})(wr.API),(function(t){var e=function(r){if(r!==void 0&&r!="")return!0};wr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,d=!1,p=0;p<c.length&&!d;p++)switch((n=c[p]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var g=0;g<c.length;g++){n=c[g];var m=this.internal.pdfEscape,w=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),T=this.internal.getEncryptor(y.objId),O=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+m(T(n.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(T(O))+") >>",y.content=s;var P=y.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+P,n.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(y.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var V=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(w(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+V+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var Y=this.annotations._nameMap[n.options.name];n.options.pageNumber=Y.page,n.options.top=Y.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(w(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var G=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+G+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,i,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:c(n),w:l(r+i),h:c(n+s)},options:a,type:"link"})},t.textWithLink=function(r,n,i,s){var a,o,l=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(r,o).length;a=Math.ceil(c*d)}else o=l,a=c;return this.text(r,n,i,s),i+=.2*c,s.align==="center"&&(n-=l/2),s.align==="right"&&(n-=l),this.link(n,i-c,o,a,s),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(wr.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=t.__arabicParser__.isArabicEndLetter=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(y){return a(y)&&i.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(y){var k=0,T=r,O="",P=0;for(k=0;k<y.length;k+=1)T[y.charCodeAt(k)]!==void 0?(P++,typeof(T=T[y.charCodeAt(k)])=="number"&&(O+=String.fromCharCode(T),T=r,P=0),k===y.length-1&&(T=r,O+=y.charAt(k-(P-1)),k-=P-1,P=0)):(T=r,O+=y.charAt(k-P),k-=P,P=0);return O};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&n[y.charCodeAt(0)]!==void 0};var g=t.__arabicParser__.getCorrectForm=function(y,k,T){return a(y)?s(y)===!1?-1:!c(y)||!a(k)&&!a(T)||!a(T)&&o(k)||o(y)&&!a(k)||o(y)&&l(k)||o(y)&&o(k)?0:d(y)&&a(k)&&!o(k)&&a(T)&&c(T)?3:o(y)||!a(T)?1:2:-1},m=function(y){var k=0,T=0,O=0,P="",V="",Y="",G=(y=y||"").split("\\s+"),L=[];for(k=0;k<G.length;k+=1){for(L.push(""),T=0;T<G[k].length;T+=1)P=G[k][T],V=G[k][T-1],Y=G[k][T+1],a(P)?(O=g(P,V,Y),L[k]+=O!==-1?String.fromCharCode(e[P.charCodeAt(0)][O]):P):L[k]+=P;L[k]=p(L[k])}return L.join(" ")},w=t.__arabicParser__.processArabic=t.processArabic=function(){var y,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,T=[];if(Array.isArray(k)){var O=0;for(T=[],O=0;O<k.length;O+=1)Array.isArray(k[O])?T.push([m(k[O][0]),k[O][1],k[O][2]]):T.push([m(k[O])]);y=T}else y=m(k);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",w])})(wr.API),wr.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(wr.API),(function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var w=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return w},set:function(y){w=y}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){n.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),g=c.scaleFactor||this.internal.scaleFactor,m=0,w=0,y=0,k=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var T=c.maxWidth;T>0?typeof l=="string"?l=this.splitTextToSize(l,T):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(P,V){return P.concat(k.splitTextToSize(V,T))},[])):l=Array.isArray(l)?l:[l];for(var O=0;O<l.length;O++)m<(y=this.getStringUnitWidth(l[O],{font:p})*d)&&(m=y);return m!==0&&(w=l.length),{w:m/=g,h:Math.max((w*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/g,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,m&&g&&(this.printHeaderRow(l.lineNumber,!0),l.y+=g[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,d,p,g){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,w,y,k,T=[],O=[],P=[],V={},Y={},G=[],L=[],N=(g=g||{}).autoSize||!1,C=g.printHeaders!==!1,R=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,A=g.margins||Object.assign({width:this.getPageWidth()},e),F=typeof g.padding=="number"?g.padding:3,B=g.headerBackgroundColor||"#c8c8c8",te=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=C,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=te,this.setFontSize(R),p==null)O=T=Object.keys(d[0]),P=T.map(function(){return"left"});else if(Array.isArray(p)&&Xn(p[0])==="object")for(T=p.map(function(ne){return ne.name}),O=p.map(function(ne){return ne.prompt||ne.name||""}),P=p.map(function(ne){return ne.align||"left"}),m=0;m<p.length;m+=1)Y[p[m].name]=.7499990551181103*p[m].width;else Array.isArray(p)&&typeof p[0]=="string"&&(O=T=p,P=T.map(function(){return"left"}));if(N||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<T.length;m+=1){for(V[k=T[m]]=d.map(function(ne){return ne[k]}),this.setFont(void 0,"bold"),G.push(this.getTextDimensions(O[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),w=V[k],this.setFont(void 0,"normal"),y=0;y<w.length;y+=1)G.push(this.getTextDimensions(w[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Y[k]=Math.max.apply(null,G)+F+F,G=[]}if(C){var pe={};for(m=0;m<T.length;m+=1)pe[T[m]]={},pe[T[m]].text=O[m],pe[T[m]].align=P[m];var Ee=o.call(this,pe,Y);L=T.map(function(ne){return new s(l,c,Y[ne],Ee,pe[ne].text,void 0,pe[ne].align)}),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var ve=p.reduce(function(ne,Q){return ne[Q.name]=Q.align,ne},{});for(m=0;m<d.length;m+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:m,data:d[m]},this);var re=o.call(this,d[m],Y);for(y=0;y<T.length;y+=1){var W=d[m][T[y]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:m,col:y,data:W},this),a.call(this,new s(l,c,Y[T[y]],re,W,m+2,ve[T[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(l).map(function(m){var w=l[m];return this.splitTextToSize(w.hasOwnProperty("text")?w.text:w,c[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/g+d+d},this).reduce(function(m,w){return Math.max(m,w)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,g.push(d)),d.lineNumber=l;var w=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,d),this.setTextColor(w)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),r=!1}})(wr.API);var NL={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},AL=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],kw=TL(AL),IL=[100,200,300,400,500,600,700,800,900],kce=TL(IL);function W4(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=(function(s){return NL[s=s||"normal"]?s:"normal"})(t.style),n=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(t.weight),i=(function(s){return typeof kw[s=s||"normal"]=="number"?s:"normal"})(t.stretch);return{family:e,style:r,weight:n,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,n].join(" ")}}}function yS(t,e,r,n){var i;for(i=r;i>=0&&i<e.length;i+=n)if(t[e[i]])return t[e[i]];for(i=r;i>=0&&i<e.length;i-=n)if(t[e[i]])return t[e[i]]}var Ece={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},wS={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function bS(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function _S(t){return t.trimLeft()}function Sce(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Cce(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var yx,kS,ES,e1,wx,SS,CS,TS,G4=["times"];function NS(t,e,r,n){var i=4,s=IS;switch(n){case wr.API.image_compression.FAST:i=1,s=AS;break;case wr.API.image_compression.MEDIUM:i=6,s=PS;break;case wr.API.image_compression.SLOW:i=9,s=RS}t=(function(o,l,c,d){for(var p,g=o.length/l,m=new Uint8Array(o.length+g),w=[Tce,AS,IS,PS,RS],y=0;y<g;y+=1){var k=y*l,T=o.subarray(k,k+l);if(d)m.set(d(T,c,p),k+y);else{for(var O=w.length,P=[],V=0;V<O;V+=1)P[V]=w[V](T,c,p);var Y=Ace(P.concat());m.set(P[Y],k+y)}p=T}return m})(t,e,r,s);var a=gw(t,{level:i});return wr.API.__addimage__.arrayBufferToBinaryString(a)}function Tce(t){var e=Array.apply([],t);return e.unshift(0),e}function AS(t,e){var r=t.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var s=t[i-e]||0;n[i+1]=t[i]-s+256&255}return n}function IS(t,e,r){var n=t.length,i=[];i[0]=2;for(var s=0;s<n;s+=1){var a=r&&r[s]||0;i[s+1]=t[s]-a+256&255}return i}function PS(t,e,r){var n=t.length,i=[];i[0]=3;for(var s=0;s<n;s+=1){var a=t[s-e]||0,o=r&&r[s]||0;i[s+1]=t[s]+256-(a+o>>>1)&255}return i}function RS(t,e,r){var n=t.length,i=[];i[0]=4;for(var s=0;s<n;s+=1){var a=Nce(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);i[s+1]=t[s]-a+256&255}return i}function Nce(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),i=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=i&&n<=s?t:i<=s?e:r}function Ace(t){var e=t.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function K4(t,e,r){var n=e*r,i=Math.floor(n/8),s=16-(n-8*i+r),a=(1<<r)-1;return PL(t,i)>>s&a}function FS(t,e,r,n){var i=r*n,s=Math.floor(i/8),a=16-(i-8*s+n),o=(1<<n)-1,l=(e&o)<<a;(function(c,d,p){if(d+1<c.byteLength)c.setUint16(d,p,!1);else{var g=p>>8&255;c.setUint8(d,g)}})(t,s,PL(t,s)&~(o<<a)&65535|l)}function PL(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function Ice(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,a=1<<1+(7&i);t[e++],t[e++];var o=null,l=null;s&&(o=e,l=a,e+=3*a);var c=!0,d=[],p=0,g=null,m=0,w=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,w=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];p=t[e++]|t[e++]<<8,g=t[e++],1&y||(g=null),m=y>>2&7,e++;break;case 254:for(;;){if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var k=t[e++]|t[e++]<<8,T=t[e++]|t[e++]<<8,O=t[e++]|t[e++]<<8,P=t[e++]|t[e++]<<8,V=t[e++],Y=V>>6&1,G=1<<1+(7&V),L=o,N=l,C=!1;V>>7&&(C=!0,L=e,N=G,e+=3*G);var R=e;for(e++;;){var A;if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}d.push({x:k,y:T,width:O,height:P,has_local_palette:C,palette_offset:L,palette_size:N,data_offset:R,data_length:e-R,transparent_index:g,interlaced:!!Y,delay:p,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return w},this.frameInfo=function(F){if(F<0||F>=d.length)throw new Error("Frame index out of range.");return d[F]},this.decodeAndBlitFrameBGRA=function(F,B){var te=this.frameInfo(F),pe=te.width*te.height,Ee=new Uint8Array(pe);LS(t,te.data_offset,Ee,pe);var ve=te.palette_offset,re=te.transparent_index;re===null&&(re=256);var W=te.width,ne=r-W,Q=W,I=4*(te.y*r+te.x),H=4*((te.y+te.height)*r+te.x),X=I,J=4*ne;te.interlaced===!0&&(J+=4*r*7);for(var ue=8,we=0,fe=Ee.length;we<fe;++we){var me=Ee[we];if(Q===0&&(Q=W,(X+=J)>=H&&(J=4*ne+4*r*(ue-1),X=I+(W+ne)*(ue<<1),ue>>=1)),me===re)X+=4;else{var be=t[ve+3*me],Le=t[ve+3*me+1],ee=t[ve+3*me+2];B[X++]=ee,B[X++]=Le,B[X++]=be,B[X++]=255}--Q}},this.decodeAndBlitFrameRGBA=function(F,B){var te=this.frameInfo(F),pe=te.width*te.height,Ee=new Uint8Array(pe);LS(t,te.data_offset,Ee,pe);var ve=te.palette_offset,re=te.transparent_index;re===null&&(re=256);var W=te.width,ne=r-W,Q=W,I=4*(te.y*r+te.x),H=4*((te.y+te.height)*r+te.x),X=I,J=4*ne;te.interlaced===!0&&(J+=4*r*7);for(var ue=8,we=0,fe=Ee.length;we<fe;++we){var me=Ee[we];if(Q===0&&(Q=W,(X+=J)>=H&&(J=4*ne+4*r*(ue-1),X=I+(W+ne)*(ue<<1),ue>>=1)),me===re)X+=4;else{var be=t[ve+3*me],Le=t[ve+3*me+1],ee=t[ve+3*me+2];B[X++]=be,B[X++]=Le,B[X++]=ee,B[X++]=255}--Q}}}function LS(t,e,r,n){for(var i=t[e++],s=1<<i,a=s+1,o=a+1,l=i+1,c=(1<<l)-1,d=0,p=0,g=0,m=t[e++],w=new Int32Array(4096),y=null;;){for(;d<16&&m!==0;)p|=t[e++]<<d,d+=8,m===1?m=t[e++]:--m;if(d<l)break;var k=p&c;if(p>>=l,d-=l,k!==s){if(k===a)break;for(var T=k<o?k:y,O=0,P=T;P>s;)P=w[P]>>8,++O;var V=P;if(g+O+(T!==k?1:0)>n)return void ci.log("Warning, gif stream longer than expected.");r[g++]=V;var Y=g+=O;for(T!==k&&(r[g++]=V),P=T;O--;)P=w[P],r[--Y]=255&P,P>>=8;y!==null&&o<4096&&(w[o++]=y<<8|V,o>=c+1&&l<12&&(++l,c=c<<1|1)),y=k}else o=a+1,c=(1<<(l=i+1))-1,y=null}return g!==n&&ci.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function X4(t){var e,r,n,i,s,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),p=new Array(65535),g=new Array(65535),m=new Array(64),w=new Array(64),y=[],k=0,T=7,O=new Array(64),P=new Array(64),V=new Array(64),Y=new Array(256),G=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],pe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ee(I,H){for(var X=0,J=0,ue=new Array,we=1;we<=16;we++){for(var fe=1;fe<=I[we];fe++)ue[H[J]]=[],ue[H[J]][0]=X,ue[H[J]][1]=we,J++,X++;X*=2}return ue}function ve(I){for(var H=I[0],X=I[1]-1;X>=0;)H&1<<X&&(k|=1<<T),X--,--T<0&&(k==255?(re(255),re(0)):re(k),T=7,k=0)}function re(I){y.push(I)}function W(I){re(I>>8&255),re(255&I)}function ne(I,H,X,J,ue){for(var we,fe=ue[0],me=ue[240],be=(function(oe,je){var Ge,Tt,Pe,Ke,ot,We,Lt,St,Pt,mt,_t=0;for(Pt=0;Pt<8;++Pt){Ge=oe[_t],Tt=oe[_t+1],Pe=oe[_t+2],Ke=oe[_t+3],ot=oe[_t+4],We=oe[_t+5],Lt=oe[_t+6];var Xt=Ge+(St=oe[_t+7]),Kt=Ge-St,Ut=Tt+Lt,xr=Tt-Lt,Yr=Pe+We,Ve=Pe-We,Bt=Ke+ot,zt=Ke-ot,nr=Xt+Bt,lr=Xt-Bt,hr=Ut+Yr,Zt=Ut-Yr;oe[_t]=nr+hr,oe[_t+4]=nr-hr;var yr=.707106781*(Zt+lr);oe[_t+2]=lr+yr,oe[_t+6]=lr-yr;var dn=.382683433*((nr=zt+Ve)-(Zt=xr+Kt)),qr=.5411961*nr+dn,Ln=1.306562965*Zt+dn,jn=.707106781*(hr=Ve+xr),sr=Kt+jn,Gr=Kt-jn;oe[_t+5]=Gr+qr,oe[_t+3]=Gr-qr,oe[_t+1]=sr+Ln,oe[_t+7]=sr-Ln,_t+=8}for(_t=0,Pt=0;Pt<8;++Pt){Ge=oe[_t],Tt=oe[_t+8],Pe=oe[_t+16],Ke=oe[_t+24],ot=oe[_t+32],We=oe[_t+40],Lt=oe[_t+48];var ds=Ge+(St=oe[_t+56]),Un=Ge-St,Xi=Tt+Lt,Cn=Tt-Lt,ai=Pe+We,le=Pe-We,Ne=Ke+ot,_e=Ke-ot,ke=ds+Ne,Ae=ds-Ne,Ie=Xi+ai,Qe=Xi-ai;oe[_t]=ke+Ie,oe[_t+32]=ke-Ie;var lt=.707106781*(Qe+Ae);oe[_t+16]=Ae+lt,oe[_t+48]=Ae-lt;var et=.382683433*((ke=_e+le)-(Qe=Cn+Un)),tt=.5411961*ke+et,st=1.306562965*Qe+et,kt=.707106781*(Ie=le+Cn),Ot=Un+kt,Wt=Un-kt;oe[_t+40]=Wt+tt,oe[_t+24]=Wt-tt,oe[_t+8]=Ot+st,oe[_t+56]=Ot-st,_t++}for(Pt=0;Pt<64;++Pt)mt=oe[Pt]*je[Pt],m[Pt]=mt>0?mt+.5|0:mt-.5|0;return m})(I,H),Le=0;Le<64;++Le)w[L[Le]]=be[Le];var ee=w[0]-X;X=w[0],ee==0?ve(J[0]):(ve(J[g[we=32767+ee]]),ve(p[we]));for(var Be=63;Be>0&&w[Be]==0;)Be--;if(Be==0)return ve(fe),X;for(var Re,ae=1;ae<=Be;){for(var $e=ae;w[ae]==0&&ae<=Be;)++ae;var qe=ae-$e;if(qe>=16){Re=qe>>4;for(var it=1;it<=Re;++it)ve(me);qe&=15}we=32767+w[ae],ve(ue[(qe<<4)+g[we]]),ve(p[we]),ae++}return Be!=63&&ve(fe),X}function Q(I){I=Math.min(Math.max(I,1),100),s!=I&&((function(H){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var ue=a((X[J]*H+50)/100);ue=Math.min(Math.max(ue,1),255),o[L[J]]=ue}for(var we=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],fe=0;fe<64;fe++){var me=a((we[fe]*H+50)/100);me=Math.min(Math.max(me,1),255),l[L[fe]]=me}for(var be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Le=0,ee=0;ee<8;ee++)for(var Be=0;Be<8;Be++)c[Le]=1/(o[L[Le]]*be[ee]*be[Be]*8),d[Le]=1/(l[L[Le]]*be[ee]*be[Be]*8),Le++})(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),s=I)}this.encode=function(I,H){H&&Q(H),y=new Array,k=0,T=7,W(65496),W(65504),W(16),re(74),re(70),re(73),re(70),re(0),re(1),re(1),re(0),W(1),W(1),re(0),re(0),(function(){W(65499),W(132),re(0);for(var Tt=0;Tt<64;Tt++)re(o[Tt]);re(1);for(var Pe=0;Pe<64;Pe++)re(l[Pe])})(),(function(Tt,Pe){W(65472),W(17),re(8),W(Pe),W(Tt),re(3),re(1),re(17),re(0),re(2),re(17),re(1),re(3),re(17),re(1)})(I.width,I.height),(function(){W(65476),W(418),re(0);for(var Tt=0;Tt<16;Tt++)re(N[Tt+1]);for(var Pe=0;Pe<=11;Pe++)re(C[Pe]);re(16);for(var Ke=0;Ke<16;Ke++)re(R[Ke+1]);for(var ot=0;ot<=161;ot++)re(A[ot]);re(1);for(var We=0;We<16;We++)re(F[We+1]);for(var Lt=0;Lt<=11;Lt++)re(B[Lt]);re(17);for(var St=0;St<16;St++)re(te[St+1]);for(var Pt=0;Pt<=161;Pt++)re(pe[Pt])})(),W(65498),W(12),re(3),re(1),re(0),re(2),re(17),re(3),re(17),re(0),re(63),re(0);var X=0,J=0,ue=0;k=0,T=7,this.encode.displayName="_encode_";for(var we,fe,me,be,Le,ee,Be,Re,ae,$e=I.data,qe=I.width,it=I.height,oe=4*qe,je=0;je<it;){for(we=0;we<oe;){for(Le=oe*je+we,Be=-1,Re=0,ae=0;ae<64;ae++)ee=Le+(Re=ae>>3)*oe+(Be=4*(7&ae)),je+Re>=it&&(ee-=oe*(je+1+Re-it)),we+Be>=oe&&(ee-=we+Be-oe+4),fe=$e[ee++],me=$e[ee++],be=$e[ee++],O[ae]=(G[fe]+G[me+256|0]+G[be+512|0]>>16)-128,P[ae]=(G[fe+768|0]+G[me+1024|0]+G[be+1280|0]>>16)-128,V[ae]=(G[fe+1280|0]+G[me+1536|0]+G[be+1792|0]>>16)-128;X=ne(O,c,X,e,n),J=ne(P,d,J,r,i),ue=ne(V,d,ue,r,i),we+=32}je+=8}if(T>=0){var Ge=[];Ge[1]=T+1,Ge[0]=(1<<T+1)-1,ve(Ge)}return W(65497),new Uint8Array(y)},t=t||50,(function(){for(var I=String.fromCharCode,H=0;H<256;H++)Y[H]=I(H)})(),e=Ee(N,C),r=Ee(F,B),n=Ee(R,A),i=Ee(te,pe),(function(){for(var I=1,H=2,X=1;X<=15;X++){for(var J=I;J<H;J++)g[32767+J]=X,p[32767+J]=[],p[32767+J][1]=X,p[32767+J][0]=J;for(var ue=-(H-1);ue<=-I;ue++)g[32767+ue]=X,p[32767+ue]=[],p[32767+ue][1]=X,p[32767+ue][0]=H-1+ue;I<<=1,H<<=1}})(),(function(){for(var I=0;I<256;I++)G[I]=19595*I,G[I+256|0]=38470*I,G[I+512|0]=7471*I+32768,G[I+768|0]=-11059*I,G[I+1024|0]=-21709*I,G[I+1280|0]=32768*I+8421375,G[I+1536|0]=-27439*I,G[I+1792|0]=-5329*I})(),Q(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function xc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function jS(t){function e(C){if(!C)throw Error("assert :P")}function r(C,R,A){for(var F=0;4>F;F++)if(C[R+F]!=A.charCodeAt(F))return!0;return!1}function n(C,R,A,F,B){for(var te=0;te<B;te++)C[R+te]=A[F+te]}function i(C,R,A,F){for(var B=0;B<F;B++)C[R+B]=A}function s(C){return new Int32Array(C)}function a(C,R){for(var A=[],F=0;F<C;F++)A.push(new R);return A}function o(C,R){var A=[];return(function F(B,te,pe){for(var Ee=pe[te],ve=0;ve<Ee&&(B.push(pe.length>te+1?[]:new R),!(pe.length<te+1));ve++)F(B[ve],te+1,pe)})(A,0,C),A}var l=function(){var C=this;function R(b,S){for(var U=1<<S-1>>>0;b&U;)U>>>=1;return U?(b&U-1)+U:b}function A(b,S,U,K,se){e(!(K%U));do b[S+(K-=U)]=se;while(0<K)}function F(b,S,U,K,se){if(e(2328>=se),512>=se)var de=s(512);else if((de=s(se))==null)return 0;return(function(he,ge,ye,Se,Oe,Ze){var Te,Ue,Ye=ge,pt=1<<ye,nt=s(16),ft=s(16);for(e(Oe!=0),e(Se!=null),e(he!=null),e(0<ye),Ue=0;Ue<Oe;++Ue){if(15<Se[Ue])return 0;++nt[Se[Ue]]}if(nt[0]==Oe)return 0;for(ft[1]=0,Te=1;15>Te;++Te){if(nt[Te]>1<<Te)return 0;ft[Te+1]=ft[Te]+nt[Te]}for(Ue=0;Ue<Oe;++Ue)Te=Se[Ue],0<Se[Ue]&&(Ze[ft[Te]++]=Ue);if(ft[15]==1)return(Se=new B).g=0,Se.value=Ze[0],A(he,Ye,1,pt,Se),pt;var ht,yt=-1,wt=pt-1,mr=0,tr=1,Br=1,ar=1<<ye;for(Ue=0,Te=1,Oe=2;Te<=ye;++Te,Oe<<=1){if(tr+=Br<<=1,0>(Br-=nt[Te]))return 0;for(;0<nt[Te];--nt[Te])(Se=new B).g=Te,Se.value=Ze[Ue++],A(he,Ye+mr,Oe,ar,Se),mr=R(mr,Te)}for(Te=ye+1,Oe=2;15>=Te;++Te,Oe<<=1){if(tr+=Br<<=1,0>(Br-=nt[Te]))return 0;for(;0<nt[Te];--nt[Te]){if(Se=new B,(mr&wt)!=yt){for(Ye+=ar,ht=1<<(yt=Te)-ye;15>yt&&!(0>=(ht-=nt[yt]));)++yt,ht<<=1;pt+=ar=1<<(ht=yt-ye),he[ge+(yt=mr&wt)].g=ht+ye,he[ge+yt].value=Ye-ge-yt}Se.g=Te-ye,Se.value=Ze[Ue++],A(he,Ye+(mr>>ye),Oe,ar,Se),mr=R(mr,Te)}}return tr!=2*ft[15]-1?0:pt})(b,S,U,K,se,de)}function B(){this.value=this.g=0}function te(){this.value=this.g=0}function pe(){this.G=a(5,B),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Ea,te)}function Ee(b,S,U,K){e(b!=null),e(S!=null),e(2147483648>K),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=S,b.pa=U,b.Jd=S,b.Yc=U+K,b.Zc=4<=K?U+K-4+1:U,fe(b)}function ve(b,S){for(var U=0;0<S--;)U|=be(b,128)<<S;return U}function re(b,S){var U=ve(b,S);return me(b)?-U:U}function W(b,S,U,K){var se,de=0;for(e(b!=null),e(S!=null),e(4294967288>K),b.Sb=K,b.Ra=0,b.u=0,b.h=0,4<K&&(K=4),se=0;se<K;++se)de+=S[U+se]<<8*se;b.Ra=de,b.bb=K,b.oa=S,b.pa=U}function ne(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<Mc-8>>>0,++b.bb,b.u-=8;J(b)&&(b.h=1,b.u=0)}function Q(b,S){if(e(0<=S),!b.h&&S<=H0){var U=X(b)&Oc[S];return b.u+=S,ne(b),U}return b.h=1,b.u=0}function I(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function H(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(b){return b.Ra>>>(b.u&Mc-1)>>>0}function J(b){return e(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>Mc}function ue(b,S){b.u=S,b.h=J(b)}function we(b){b.u>=Ai&&(e(b.u>=Ai),ne(b))}function fe(b){e(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(e(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function me(b){return ve(b,1)}function be(b,S){var U=b.Ca;0>b.b&&fe(b);var K=b.b,se=U*S>>>8,de=(b.I>>>K>se)+0;for(de?(U-=se,b.I-=se+1<<K>>>0):U=se+1,K=U,se=0;256<=K;)se+=8,K>>=8;return K=7^se+bh[K],b.b-=K,b.Ca=(U<<K)-1,de}function Le(b,S,U){b[S+0]=U>>24&255,b[S+1]=U>>16&255,b[S+2]=U>>8&255,b[S+3]=255&U}function ee(b,S){return b[S+0]|b[S+1]<<8}function Be(b,S){return ee(b,S)|b[S+2]<<16}function Re(b,S){return ee(b,S)|ee(b,S+2)<<16}function ae(b,S){var U=1<<S;return e(b!=null),e(0<S),b.X=s(U),b.X==null?0:(b.Mb=32-S,b.Xa=S,1)}function $e(b,S){e(b!=null),e(S!=null),e(b.Xa==S.Xa),n(S.X,0,b.X,0,1<<S.Xa)}function qe(){this.X=[],this.Xa=this.Mb=0}function it(b,S,U,K){e(U!=null),e(K!=null);var se=U[0],de=K[0];return se==0&&(se=(b*de+S/2)/S),de==0&&(de=(S*se+b/2)/b),0>=se||0>=de?0:(U[0]=se,K[0]=de,1)}function oe(b,S){return b+(1<<S)-1>>>S}function je(b,S){return((4278255360&b)+(4278255360&S)>>>0&4278255360)+((16711935&b)+(16711935&S)>>>0&16711935)>>>0}function Ge(b,S){C[S]=function(U,K,se,de,he,ge,ye){var Se;for(Se=0;Se<he;++Se){var Oe=C[b](ge[ye+Se-1],se,de+Se);ge[ye+Se]=je(U[K+Se],Oe)}}}function Tt(){this.ud=this.hd=this.jd=0}function Pe(b,S){return((4278124286&(b^S))>>>1)+(b&S)>>>0}function Ke(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function ot(b,S){return Ke(b+(b-S+.5>>1))}function We(b,S,U){return Math.abs(S-U)-Math.abs(b-U)}function Lt(b,S,U,K,se,de,he){for(K=de[he-1],U=0;U<se;++U)de[he+U]=K=je(b[S+U],K)}function St(b,S,U,K,se){var de;for(de=0;de<U;++de){var he=b[S+de],ge=he>>8&255,ye=16711935&(ye=(ye=16711935&he)+((ge<<16)+ge));K[se+de]=(4278255360&he)+ye>>>0}}function Pt(b,S){S.jd=255&b,S.hd=b>>8&255,S.ud=b>>16&255}function mt(b,S,U,K,se,de){var he;for(he=0;he<K;++he){var ge=S[U+he],ye=ge>>>8,Se=ge,Oe=255&(Oe=(Oe=ge>>>16)+((b.jd<<24>>24)*(ye<<24>>24)>>>5));Se=255&(Se=(Se+=(b.hd<<24>>24)*(ye<<24>>24)>>>5)+((b.ud<<24>>24)*(Oe<<24>>24)>>>5)),se[de+he]=(4278255360&ge)+(Oe<<16)+Se}}function _t(b,S,U,K,se){C[S]=function(de,he,ge,ye,Se,Oe,Ze,Te,Ue){for(ye=Ze;ye<Te;++ye)for(Ze=0;Ze<Ue;++Ze)Se[Oe++]=se(ge[K(de[he++])])},C[b]=function(de,he,ge,ye,Se,Oe,Ze){var Te=8>>de.b,Ue=de.Ea,Ye=de.K[0],pt=de.w;if(8>Te)for(de=(1<<de.b)-1,pt=(1<<Te)-1;he<ge;++he){var nt,ft=0;for(nt=0;nt<Ue;++nt)nt&de||(ft=K(ye[Se++])),Oe[Ze++]=se(Ye[ft&pt]),ft>>=Te}else C["VP8LMapColor"+U](ye,Se,Ye,pt,Oe,Ze,he,ge,Ue)}}function Xt(b,S,U,K,se){for(U=S+U;S<U;){var de=b[S++];K[se++]=de>>16&255,K[se++]=de>>8&255,K[se++]=255&de}}function Kt(b,S,U,K,se){for(U=S+U;S<U;){var de=b[S++];K[se++]=de>>16&255,K[se++]=de>>8&255,K[se++]=255&de,K[se++]=de>>24&255}}function Ut(b,S,U,K,se){for(U=S+U;S<U;){var de=(he=b[S++])>>16&240|he>>12&15,he=240&he|he>>28&15;K[se++]=de,K[se++]=he}}function xr(b,S,U,K,se){for(U=S+U;S<U;){var de=(he=b[S++])>>16&248|he>>13&7,he=he>>5&224|he>>3&31;K[se++]=de,K[se++]=he}}function Yr(b,S,U,K,se){for(U=S+U;S<U;){var de=b[S++];K[se++]=255&de,K[se++]=de>>8&255,K[se++]=de>>16&255}}function Ve(b,S,U,K,se,de){if(de==0)for(U=S+U;S<U;)Le(K,((de=b[S++])[0]>>24|de[1]>>8&65280|de[2]<<8&16711680|de[3]<<24)>>>0),se+=32;else n(K,se,b,S,U)}function Bt(b,S){C[S][0]=C[b+"0"],C[S][1]=C[b+"1"],C[S][2]=C[b+"2"],C[S][3]=C[b+"3"],C[S][4]=C[b+"4"],C[S][5]=C[b+"5"],C[S][6]=C[b+"6"],C[S][7]=C[b+"7"],C[S][8]=C[b+"8"],C[S][9]=C[b+"9"],C[S][10]=C[b+"10"],C[S][11]=C[b+"11"],C[S][12]=C[b+"12"],C[S][13]=C[b+"13"],C[S][14]=C[b+"0"],C[S][15]=C[b+"0"]}function zt(b){return b==Nd||b==Nu||b==X0||b==Y0}function nr(){this.eb=[],this.size=this.A=this.fb=0}function lr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function hr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new nr,this.f.kb=new lr,this.sd=null}function Zt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function yr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function dn(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function qr(b,S){var U=b.T,K=S.ba.f.RGBA,se=K.eb,de=K.fb+b.ka*K.A,he=Ka[S.ba.S],ge=b.y,ye=b.O,Se=b.f,Oe=b.N,Ze=b.ea,Te=b.W,Ue=S.cc,Ye=S.dc,pt=S.Mc,nt=S.Nc,ft=b.ka,ht=b.ka+b.T,yt=b.U,wt=yt+1>>1;for(ft==0?he(ge,ye,null,null,Se,Oe,Ze,Te,Se,Oe,Ze,Te,se,de,null,null,yt):(he(S.ec,S.fc,ge,ye,Ue,Ye,pt,nt,Se,Oe,Ze,Te,se,de-K.A,se,de,yt),++U);ft+2<ht;ft+=2)Ue=Se,Ye=Oe,pt=Ze,nt=Te,Oe+=b.Rc,Te+=b.Rc,de+=2*K.A,he(ge,(ye+=2*b.fa)-b.fa,ge,ye,Ue,Ye,pt,nt,Se,Oe,Ze,Te,se,de-K.A,se,de,yt);return ye+=b.fa,b.j+ht<b.o?(n(S.ec,S.fc,ge,ye,yt),n(S.cc,S.dc,Se,Oe,wt),n(S.Mc,S.Nc,Ze,Te,wt),U--):1&ht||he(ge,ye,null,null,Se,Oe,Ze,Te,Se,Oe,Ze,Te,se,de+K.A,null,null,yt),U}function Ln(b,S,U){var K=b.F,se=[b.J];if(K!=null){var de=b.U,he=S.ba.S,ge=he==K0||he==X0;S=S.ba.f.RGBA;var ye=[0],Se=b.ka;ye[0]=b.T,b.Kb&&(Se==0?--ye[0]:(--Se,se[0]-=b.width),b.j+b.ka+b.T==b.o&&(ye[0]=b.o-b.j-Se));var Oe=S.eb;Se=S.fb+Se*S.A,b=W0(K,se[0],b.width,de,ye,Oe,Se+(ge?0:3),S.A),e(U==ye),b&&zt(he)&&Tu(Oe,Se,ge,de,ye,S.A)}return 0}function jn(b){var S=b.ma,U=S.ba.S,K=11>U,se=U==Vc||U==G0||U==K0||U==zn||U==12||zt(U);if(S.memory=null,S.Ib=null,S.Jb=null,S.Nd=null,!_a(S.Oa,b,se?11:12))return 0;if(se&&zt(U)&&jc(),b.da)alert("todo:use_scaling");else{if(K){if(S.Ib=dn,b.Kb){if(U=b.U+1>>1,S.memory=s(b.U+2*U),S.memory==null)return 0;S.ec=S.memory,S.fc=0,S.cc=S.ec,S.dc=S.fc+b.U,S.Mc=S.cc,S.Nc=S.dc+U,S.Ib=qr,jc()}}else alert("todo:EmitYUV");se&&(S.Jb=Ln,K&&Mi())}if(K&&!Gs){for(b=0;256>b;++b)Xa[b]=89858*(b-128)+nl>>oc,Ya[b]=-22014*(b-128)+nl,Rd[b]=-45773*(b-128),Ru[b]=113618*(b-128)+nl>>oc;for(b=Rn;b<Mn;++b)S=76283*(b-16)+nl>>oc,Ah[b-Rn]=rn(S,255),h2[b-Rn]=rn(S+8>>4,15);Gs=1}return 1}function sr(b){var S=b.ma,U=b.U,K=b.T;return e(!(1&b.ka)),0>=U||0>=K?0:(U=S.Ib(b,S),S.Jb!=null&&S.Jb(b,S,U),S.Dc+=U,1)}function Gr(b){b.ma.memory=null}function ds(b,S,U,K){return Q(b,8)!=47?0:(S[0]=Q(b,14)+1,U[0]=Q(b,14)+1,K[0]=Q(b,1),Q(b,3)!=0?0:!b.h)}function Un(b,S){if(4>b)return b+1;var U=b-2>>1;return(2+(1&b)<<U)+Q(S,U)+1}function Xi(b,S){return 120<S?S-120:1<=(U=((U=Z5[S-1])>>4)*b+(8-(15&U)))?U:1;var U}function Cn(b,S,U){var K=X(U),se=b[S+=255&K].g-8;return 0<se&&(ue(U,U.u+8),K=X(U),S+=b[S].value,S+=K&(1<<se)-1),ue(U,U.u+b[S].g),b[S].value}function ai(b,S,U){return U.g+=b.g,U.value+=b.value<<S>>>0,e(8>=U.g),b.g}function le(b,S,U){var K=b.xc;return e((S=K==0?0:b.vc[b.md*(U>>K)+(S>>K)])<b.Wb),b.Ya[S]}function Ne(b,S,U,K){var se=b.ab,de=b.c*S,he=b.C;S=he+S;var ge=U,ye=K;for(K=b.Ta,U=b.Ua;0<se--;){var Se=b.gc[se],Oe=he,Ze=S,Te=ge,Ue=ye,Ye=(ye=K,ge=U,Se.Ea);switch(e(Oe<Ze),e(Ze<=Se.nc),Se.hc){case 2:_d(Te,Ue,(Ze-Oe)*Ye,ye,ge);break;case 0:var pt=Oe,nt=Ze,ft=ye,ht=ge,yt=(ar=Se).Ea;pt==0&&(Ha(Te,Ue,null,null,1,ft,ht),Lt(Te,Ue+1,0,0,yt-1,ft,ht+1),Ue+=yt,ht+=yt,++pt);for(var wt=1<<ar.b,mr=wt-1,tr=oe(yt,ar.b),Br=ar.K,ar=ar.w+(pt>>ar.b)*tr;pt<nt;){var nn=Br,Ii=ar,Vr=1;for(qa(Te,Ue,ft,ht-yt,1,ft,ht);Vr<yt;){var rr=(Vr&~mr)+wt;rr>yt&&(rr=yt),(0,ac[nn[Ii++]>>8&15])(Te,Ue+ +Vr,ft,ht+Vr-yt,rr-Vr,ft,ht+Vr),Vr=rr}Ue+=yt,ht+=yt,++pt&mr||(ar+=tr)}Ze!=Se.nc&&n(ye,ge-Ye,ye,ge+(Ze-Oe-1)*Ye,Ye);break;case 1:for(Ye=Te,nt=Ue,yt=(Te=Se.Ea)-(ht=Te&~(ft=(Ue=1<<Se.b)-1)),pt=oe(Te,Se.b),wt=Se.K,Se=Se.w+(Oe>>Se.b)*pt;Oe<Ze;){for(mr=wt,tr=Se,Br=new Tt,ar=nt+ht,nn=nt+Te;nt<ar;)Pt(mr[tr++],Br),Sl(Br,Ye,nt,Ue,ye,ge),nt+=Ue,ge+=Ue;nt<nn&&(Pt(mr[tr++],Br),Sl(Br,Ye,nt,yt,ye,ge),nt+=yt,ge+=yt),++Oe&ft||(Se+=pt)}break;case 3:if(Te==ye&&Ue==ge&&0<Se.b){for(nt=ye,Te=Ye=ge+(Ze-Oe)*Ye-(ht=(Ze-Oe)*oe(Se.Ea,Se.b)),Ue=ye,ft=ge,pt=[],ht=(yt=ht)-1;0<=ht;--ht)pt[ht]=Ue[ft+ht];for(ht=yt-1;0<=ht;--ht)nt[Te+ht]=pt[ht];Bc(Se,Oe,Ze,ye,Ye,ye,ge)}else Bc(Se,Oe,Ze,Te,Ue,ye,ge)}ge=K,ye=U}ye!=U&&n(K,U,ge,ye,de)}function _e(b,S){var U=b.V,K=b.Ba+b.c*b.C,se=S-b.C;if(e(S<=b.l.o),e(16>=se),0<se){var de=b.l,he=b.Ta,ge=b.Ua,ye=de.width;if(Ne(b,se,U,K),se=ge=[ge],e((U=b.C)<(K=S)),e(de.v<de.va),K>de.o&&(K=de.o),U<de.j){var Se=de.j-U;U=de.j,se[0]+=Se*ye}if(U>=K?U=0:(se[0]+=4*de.v,de.ka=U-de.j,de.U=de.va-de.v,de.T=K-U,U=1),U){if(ge=ge[0],11>(U=b.ca).S){var Oe=U.f.RGBA,Ze=(K=U.S,se=de.U,de=de.T,Se=Oe.eb,Oe.A),Te=de;for(Oe=Oe.fb+b.Ma*Oe.A;0<Te--;){var Ue=he,Ye=ge,pt=se,nt=Se,ft=Oe;switch(K){case Sh:Ed(Ue,Ye,pt,nt,ft);break;case Vc:Wa(Ue,Ye,pt,nt,ft);break;case Nd:Wa(Ue,Ye,pt,nt,ft),Tu(nt,ft,0,pt,1,0);break;case l2:ei(Ue,Ye,pt,nt,ft);break;case G0:Ve(Ue,Ye,pt,nt,ft,1);break;case Nu:Ve(Ue,Ye,pt,nt,ft,1),Tu(nt,ft,0,pt,1,0);break;case K0:Ve(Ue,Ye,pt,nt,ft,0);break;case X0:Ve(Ue,Ye,pt,nt,ft,0),Tu(nt,ft,1,pt,1,0);break;case zn:Cl(Ue,Ye,pt,nt,ft);break;case Y0:Cl(Ue,Ye,pt,nt,ft),Np(nt,ft,pt,1,0);break;case Ch:Zn(Ue,Ye,pt,nt,ft);break;default:e(0)}ge+=ye,Oe+=Ze}b.Ma+=de}else alert("todo:EmitRescaledRowsYUVA");e(b.Ma<=U.height)}}b.C=S,e(b.C<=b.i)}function ke(b){var S;if(0<b.ua)return 0;for(S=0;S<b.Wb;++S){var U=b.Ya[S].G,K=b.Ya[S].H;if(0<U[1][K[1]+0].g||0<U[2][K[2]+0].g||0<U[3][K[3]+0].g)return 0}return 1}function Ae(b,S,U,K,se,de){if(b.Z!=0){var he=b.qd,ge=b.rd;for(e(sa[b.Z]!=null);S<U;++S)sa[b.Z](he,ge,K,se,K,se,de),he=K,ge=se,se+=de;b.qd=he,b.rd=ge}}function Ie(b,S){var U=b.l.ma,K=U.Z==0||U.Z==1?b.l.j:b.C;if(K=b.C<K?K:b.C,e(S<=b.l.o),S>K){var se=b.l.width,de=U.ca,he=U.tb+se*K,ge=b.V,ye=b.Ba+b.c*K,Se=b.gc;e(b.ab==1),e(Se[0].hc==3),Eu(Se[0],K,S,ge,ye,de,he),Ae(U,K,S,de,he,se)}b.C=b.Ma=S}function Qe(b,S,U,K,se,de,he){var ge=b.$/K,ye=b.$%K,Se=b.m,Oe=b.s,Ze=U+b.$,Te=Ze;se=U+K*se;var Ue=U+K*de,Ye=280+Oe.ua,pt=b.Pb?ge:16777216,nt=0<Oe.ua?Oe.Wa:null,ft=Oe.wc,ht=Ze<Ue?le(Oe,ye,ge):null;e(b.C<de),e(Ue<=se);var yt=!1;e:for(;;){for(;yt||Ze<Ue;){var wt=0;if(ge>=pt){var mr=Ze-U;e((pt=b).Pb),pt.wd=pt.m,pt.xd=mr,0<pt.s.ua&&$e(pt.s.Wa,pt.s.vb),pt=ge+Nh}if(ye&ft||(ht=le(Oe,ye,ge)),e(ht!=null),ht.Qb&&(S[Ze]=ht.qb,yt=!0),!yt)if(we(Se),ht.jc){wt=Se,mr=S;var tr=Ze,Br=ht.pd[X(wt)&Ea-1];e(ht.jc),256>Br.g?(ue(wt,wt.u+Br.g),mr[tr]=Br.value,wt=0):(ue(wt,wt.u+Br.g-256),e(256<=Br.value),wt=Br.value),wt==0&&(yt=!0)}else wt=Cn(ht.G[0],ht.H[0],Se);if(Se.h)break;if(yt||256>wt){if(!yt)if(ht.nd)S[Ze]=(ht.qb|wt<<8)>>>0;else{if(we(Se),yt=Cn(ht.G[1],ht.H[1],Se),we(Se),mr=Cn(ht.G[2],ht.H[2],Se),tr=Cn(ht.G[3],ht.H[3],Se),Se.h)break;S[Ze]=(tr<<24|yt<<16|wt<<8|mr)>>>0}if(yt=!1,++Ze,++ye>=K&&(ye=0,++ge,he!=null&&ge<=de&&!(ge%16)&&he(b,ge),nt!=null))for(;Te<Ze;)wt=S[Te++],nt.X[(506832829*wt&4294967295)>>>nt.Mb]=wt}else if(280>wt){if(wt=Un(wt-256,Se),mr=Cn(ht.G[4],ht.H[4],Se),we(Se),mr=Xi(K,mr=Un(mr,Se)),Se.h)break;if(Ze-U<mr||se-Ze<wt)break e;for(tr=0;tr<wt;++tr)S[Ze+tr]=S[Ze+tr-mr];for(Ze+=wt,ye+=wt;ye>=K;)ye-=K,++ge,he!=null&&ge<=de&&!(ge%16)&&he(b,ge);if(e(Ze<=se),ye&ft&&(ht=le(Oe,ye,ge)),nt!=null)for(;Te<Ze;)wt=S[Te++],nt.X[(506832829*wt&4294967295)>>>nt.Mb]=wt}else{if(!(wt<Ye))break e;for(yt=wt-280,e(nt!=null);Te<Ze;)wt=S[Te++],nt.X[(506832829*wt&4294967295)>>>nt.Mb]=wt;wt=Ze,e(!(yt>>>(mr=nt).Xa)),S[wt]=mr.X[yt],yt=!0}yt||e(Se.h==J(Se))}if(b.Pb&&Se.h&&Ze<se)e(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&$e(b.s.vb,b.s.Wa);else{if(Se.h)break e;he?.(b,ge>de?de:ge),b.a=0,b.$=Ze-U}return 1}return b.a=3,0}function lt(b){e(b!=null),b.vc=null,b.yc=null,b.Ya=null;var S=b.Wa;S!=null&&(S.X=null),b.vb=null,e(b!=null)}function et(){var b=new Jn;return b==null?null:(b.a=0,b.xb=Id,Bt("Predictor","VP8LPredictors"),Bt("Predictor","VP8LPredictors_C"),Bt("PredictorAdd","VP8LPredictorsAdd"),Bt("PredictorAdd","VP8LPredictorsAdd_C"),_d=St,Sl=mt,Ed=Xt,Wa=Kt,Cl=Ut,Zn=xr,ei=Yr,C.VP8LMapColor32b=kd,C.VP8LMapColor8b=sc,b)}function tt(b,S,U,K,se){var de=1,he=[b],ge=[S],ye=K.m,Se=K.s,Oe=null,Ze=0;e:for(;;){if(U)for(;de&&Q(ye,1);){var Te=he,Ue=ge,Ye=K,pt=1,nt=Ye.m,ft=Ye.gc[Ye.ab],ht=Q(nt,2);if(Ye.Oc&1<<ht)de=0;else{switch(Ye.Oc|=1<<ht,ft.hc=ht,ft.Ea=Te[0],ft.nc=Ue[0],ft.K=[null],++Ye.ab,e(4>=Ye.ab),ht){case 0:case 1:ft.b=Q(nt,3)+2,pt=tt(oe(ft.Ea,ft.b),oe(ft.nc,ft.b),0,Ye,ft.K),ft.K=ft.K[0];break;case 3:var yt,wt=Q(nt,8)+1,mr=16<wt?0:4<wt?1:2<wt?2:3;if(Te[0]=oe(ft.Ea,mr),ft.b=mr,yt=pt=tt(wt,1,0,Ye,ft.K)){var tr,Br=wt,ar=ft,nn=1<<(8>>ar.b),Ii=s(nn);if(Ii==null)yt=0;else{var Vr=ar.K[0],rr=ar.w;for(Ii[0]=ar.K[0][0],tr=1;tr<1*Br;++tr)Ii[tr]=je(Vr[rr+tr],Ii[tr-1]);for(;tr<4*nn;++tr)Ii[tr]=0;ar.K[0]=null,ar.K[0]=Ii,yt=1}}pt=yt;break;case 2:break;default:e(0)}de=pt}}if(he=he[0],ge=ge[0],de&&Q(ye,1)&&!(de=1<=(Ze=Q(ye,4))&&11>=Ze)){K.a=3;break e}var Ht;if(Ht=de)t:{var Ui,Pr,Jr,ti=K,Is=he,Qi=ge,yi=Ze,ms=U,Ps=ti.m,pi=ti.s,cn=[null],bn=1,mi=0,_n=u2[yi];r:for(;;){if(ms&&Q(Ps,1)){var Pi=Q(Ps,3)+2,Ri=oe(Is,Pi),$n=oe(Qi,Pi),aa=Ri*$n;if(!tt(Ri,$n,0,ti,cn))break r;for(cn=cn[0],pi.xc=Pi,Ui=0;Ui<aa;++Ui){var Bn=cn[Ui]>>8&65535;cn[Ui]=Bn,Bn>=bn&&(bn=Bn+1)}}if(Ps.h)break r;for(Pr=0;5>Pr;++Pr){var Hn=Au[Pr];!Pr&&0<yi&&(Hn+=1<<yi),mi<Hn&&(mi=Hn)}var Ji=a(bn*_n,B),Ks=bn,Qa=a(Ks,pe);if(Qa==null)var zi=null;else e(65536>=Ks),zi=Qa;var $i=s(mi);if(zi==null||$i==null||Ji==null){ti.a=1;break r}var oa=Ji;for(Ui=Jr=0;Ui<bn;++Ui){var qn=zi[Ui],la=qn.G,jo=qn.H,il=0,Rs=1,Hi=0;for(Pr=0;5>Pr;++Pr){Hn=Au[Pr],la[Pr]=oa,jo[Pr]=Jr,!Pr&&0<yi&&(Hn+=1<<yi);i:{var $c,cc=Hn,Fd=ti,Il=$i,m2=oa,Vp=Jr,li=0,sl=Fd.m,Up=Q(sl,1);if(i(Il,0,0,cc),Up){var zp=Q(sl,1)+1,Ih=Q(sl,1),Ph=Q(sl,Ih==0?1:8);Il[Ph]=1,zp==2&&(Il[Ph=Q(sl,8)]=1);var Pl=1}else{var gi=s(19),Zi=Q(sl,4)+4;if(19<Zi){Fd.a=3;var qi=0;break i}for($c=0;$c<Zi;++$c)gi[J5[$c]]=Q(sl,3);var Ld=void 0,uc=void 0,jd=Fd,iy=gi,gs=cc,Rh=Il,tf=0,Rl=jd.m,al=8,yo=a(128,B);n:for(;F(yo,0,7,iy,19);){if(Q(Rl,1)){var rf=2+2*Q(Rl,3);if((Ld=2+Q(Rl,rf))>gs)break n}else Ld=gs;for(uc=0;uc<gs&&Ld--;){we(Rl);var Fh=yo[0+(127&X(Rl))];ue(Rl,Rl.u+Fh.g);var Hc=Fh.value;if(16>Hc)Rh[uc++]=Hc,Hc!=0&&(al=Hc);else{var g2=Hc==16,$p=Hc-16,x2=Th[$p],Hp=Q(Rl,Q0[$p])+x2;if(uc+Hp>gs)break n;for(var v2=g2?al:0;0<Hp--;)Rh[uc++]=v2}}tf=1;break n}tf||(jd.a=3),Pl=tf}(Pl=Pl&&!sl.h)&&(li=F(m2,Vp,8,Il,cc)),Pl&&li!=0?qi=li:(Fd.a=3,qi=0)}if(qi==0)break r;if(Rs&&c2[Pr]==1&&(Rs=oa[Jr].g==0),il+=oa[Jr].g,Jr+=qi,3>=Pr){var Dd,Lh=$i[0];for(Dd=1;Dd<Hn;++Dd)$i[Dd]>Lh&&(Lh=$i[Dd]);Hi+=Lh}}if(qn.nd=Rs,qn.Qb=0,Rs&&(qn.qb=(la[3][jo[3]+0].value<<24|la[1][jo[1]+0].value<<16|la[2][jo[2]+0].value)>>>0,il==0&&256>la[0][jo[0]+0].value&&(qn.Qb=1,qn.qb+=la[0][jo[0]+0].value<<8)),qn.jc=!qn.Qb&&6>Hi,qn.jc){var nf,wo=qn;for(nf=0;nf<Ea;++nf){var dc=nf,ol=wo.pd[dc],Lu=wo.G[0][wo.H[0]+dc];256<=Lu.value?(ol.g=Lu.g+256,ol.value=Lu.value):(ol.g=0,ol.value=0,dc>>=ai(Lu,8,ol),dc>>=ai(wo.G[1][wo.H[1]+dc],16,ol),dc>>=ai(wo.G[2][wo.H[2]+dc],0,ol),ai(wo.G[3][wo.H[3]+dc],24,ol))}}}pi.vc=cn,pi.Wb=bn,pi.Ya=zi,pi.yc=Ji,Ht=1;break t}Ht=0}if(!(de=Ht)){K.a=3;break e}if(0<Ze){if(Se.ua=1<<Ze,!ae(Se.Wa,Ze)){K.a=1,de=0;break e}}else Se.ua=0;var jh=K,Dh=he,y2=ge,Oh=jh.s,Mh=Oh.xc;if(jh.c=Dh,jh.i=y2,Oh.md=oe(Dh,Mh),Oh.wc=Mh==0?-1:(1<<Mh)-1,U){K.xb=Al;break e}if((Oe=s(he*ge))==null){K.a=1,de=0;break e}de=(de=Qe(K,Oe,0,he,ge,ge,null))&&!ye.h;break e}return de?(se!=null?se[0]=Oe:(e(Oe==null),e(U)),K.$=0,U||lt(Se)):lt(Se),de}function st(b,S){var U=b.c*b.i,K=U+S+16*S;return e(b.c<=S),b.V=s(K),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+U+S,1)}function kt(b,S){var U=b.C,K=S-U,se=b.V,de=b.Ba+b.c*U;for(e(S<=b.l.o);0<K;){var he=16<K?16:K,ge=b.l.ma,ye=b.l.width,Se=ye*he,Oe=ge.ca,Ze=ge.tb+ye*U,Te=b.Ta,Ue=b.Ua;Ne(b,he,se,de),Ap(Te,Ue,Oe,Ze,Se),Ae(ge,U,U+he,Oe,Ze,ye),K-=he,se+=he*b.c,U+=he}e(U==S),b.C=b.Ma=S}function Ot(){this.ub=this.yd=this.td=this.Rb=0}function Wt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Dt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function At(){this.Yb=(function(){var b=[];return(function S(U,K,se){for(var de=se[K],he=0;he<de&&(U.push(se.length>K+1?[]:0),!(se.length<K+1));he++)S(U[he],K+1,se)})(b,0,[3,11]),b})()}function Er(){this.jb=s(3),this.Wc=o([4,8],At),this.Xc=o([4,17],At)}function fn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Mr(){this.ld=this.La=this.dd=this.tc=0}function gn(){this.Na=this.la=0}function Da(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Oa(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ra(){this.uc=this.M=this.Nb=0,this.wa=Array(new Mr),this.Y=0,this.ya=Array(new Oa),this.aa=0,this.l=new Tn}function fi(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ko(){this.cb=this.a=0,this.sc="",this.m=new I,this.Od=new Ot,this.Kc=new Wt,this.ed=new fn,this.Qa=new Dt,this.Ic=this.$c=this.Aa=0,this.D=new ra,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,I),this.ia=0,this.pb=a(4,Da),this.Pa=new Er,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new fi),this.Hd=0,this.rb=Array(new gn),this.sb=0,this.wa=Array(new Mr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Oa),this.L=this.aa=0,this.gd=o([4,2],Mr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Tn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function wu(){var b=new Ko;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,Iu||(Iu=Ma)),b}function vi(b,S,U){return b.a==0&&(b.a=S,b.sc=U,b.cb=0),0}function bu(b,S,U){return 3<=U&&b[S+0]==157&&b[S+1]==1&&b[S+2]==42}function ec(b,S){if(b==null)return 0;if(b.a=0,b.sc="OK",S==null)return vi(b,2,"null VP8Io passed to VP8GetHeaders()");var U=S.data,K=S.w,se=S.ha;if(4>se)return vi(b,7,"Truncated header.");var de=U[K+0]|U[K+1]<<8|U[K+2]<<16,he=b.Od;if(he.Rb=!(1&de),he.td=de>>1&7,he.yd=de>>4&1,he.ub=de>>5,3<he.td)return vi(b,3,"Incorrect keyframe parameters.");if(!he.yd)return vi(b,4,"Frame not displayable.");K+=3,se-=3;var ge=b.Kc;if(he.Rb){if(7>se)return vi(b,7,"cannot parse picture header");if(!bu(U,K,se))return vi(b,3,"Bad code word");ge.c=16383&(U[K+4]<<8|U[K+3]),ge.Td=U[K+4]>>6,ge.i=16383&(U[K+6]<<8|U[K+5]),ge.Ud=U[K+6]>>6,K+=7,se-=7,b.za=ge.c+15>>4,b.Ub=ge.i+15>>4,S.width=ge.c,S.height=ge.i,S.Da=0,S.j=0,S.v=0,S.va=S.width,S.o=S.height,S.da=0,S.ib=S.width,S.hb=S.height,S.U=S.width,S.T=S.height,i((de=b.Pa).jb,0,255,de.jb.length),e((de=b.Qa)!=null),de.Cb=0,de.Bb=0,de.Fb=1,i(de.Zb,0,0,de.Zb.length),i(de.Lb,0,0,de.Lb)}if(he.ub>se)return vi(b,7,"bad partition length");Ee(de=b.m,U,K,he.ub),K+=he.ub,se-=he.ub,he.Rb&&(ge.Ld=me(de),ge.Kd=me(de)),ge=b.Qa;var ye,Se=b.Pa;if(e(de!=null),e(ge!=null),ge.Cb=me(de),ge.Cb){if(ge.Bb=me(de),me(de)){for(ge.Fb=me(de),ye=0;4>ye;++ye)ge.Zb[ye]=me(de)?re(de,7):0;for(ye=0;4>ye;++ye)ge.Lb[ye]=me(de)?re(de,6):0}if(ge.Bb)for(ye=0;3>ye;++ye)Se.jb[ye]=me(de)?ve(de,8):255}else ge.Bb=0;if(de.Ka)return vi(b,3,"cannot parse segment header");if((ge=b.ed).zd=me(de),ge.Tb=ve(de,6),ge.wb=ve(de,3),ge.Pc=me(de),ge.Pc&&me(de)){for(Se=0;4>Se;++Se)me(de)&&(ge.vd[Se]=re(de,6));for(Se=0;4>Se;++Se)me(de)&&(ge.od[Se]=re(de,6))}if(b.L=ge.Tb==0?0:ge.zd?1:2,de.Ka)return vi(b,3,"cannot parse filter header");var Oe=se;if(se=ye=K,K=ye+Oe,ge=Oe,b.Xb=(1<<ve(b.m,2))-1,Oe<3*(Se=b.Xb))U=7;else{for(ye+=3*Se,ge-=3*Se,Oe=0;Oe<Se;++Oe){var Ze=U[se+0]|U[se+1]<<8|U[se+2]<<16;Ze>ge&&(Ze=ge),Ee(b.Jc[+Oe],U,ye,Ze),ye+=Ze,ge-=Ze,se+=3}Ee(b.Jc[+Se],U,ye,ge),U=ye<K?0:5}if(U!=0)return vi(b,U,"cannot parse partitions");for(U=ve(ye=b.m,7),se=me(ye)?re(ye,4):0,K=me(ye)?re(ye,4):0,ge=me(ye)?re(ye,4):0,Se=me(ye)?re(ye,4):0,ye=me(ye)?re(ye,4):0,Oe=b.Qa,Ze=0;4>Ze;++Ze){if(Oe.Cb){var Te=Oe.Zb[Ze];Oe.Fb||(Te+=U)}else{if(0<Ze){b.pb[Ze]=b.pb[0];continue}Te=U}var Ue=b.pb[Ze];Ue.Sc[0]=Ad[rn(Te+se,127)],Ue.Sc[1]=J0[rn(Te+0,127)],Ue.Eb[0]=2*Ad[rn(Te+K,127)],Ue.Eb[1]=101581*J0[rn(Te+ge,127)]>>16,8>Ue.Eb[1]&&(Ue.Eb[1]=8),Ue.Qc[0]=Ad[rn(Te+Se,117)],Ue.Qc[1]=J0[rn(Te+ye,127)],Ue.lc=Te+ye}if(!he.Rb)return vi(b,4,"Not a key frame.");for(me(de),he=b.Pa,U=0;4>U;++U){for(se=0;8>se;++se)for(K=0;3>K;++K)for(ge=0;11>ge;++ge)Se=be(de,ty[U][se][K][ge])?ve(de,8):f2[U][se][K][ge],he.Wc[U][se].Yb[K][ge]=Se;for(se=0;17>se;++se)he.Xc[U][se]=he.Wc[U][Op[se]]}return b.kc=me(de),b.kc&&(b.Bd=ve(de,8)),b.cb=1}function Ma(b,S,U,K,se,de,he){var ge=S[se].Yb[U];for(U=0;16>se;++se){if(!be(b,ge[U+0]))return se;for(;!be(b,ge[U+1]);)if(ge=S[++se].Yb[0],U=0,se==16)return 16;var ye=S[se+1].Yb;if(be(b,ge[U+2])){var Se=b,Oe=0;if(be(Se,(Te=ge)[(Ze=U)+3]))if(be(Se,Te[Ze+6])){for(ge=0,Ze=2*(Oe=be(Se,Te[Ze+8]))+(Te=be(Se,Te[Ze+9+Oe])),Oe=0,Te=jp[Ze];Te[ge];++ge)Oe+=Oe+be(Se,Te[ge]);Oe+=3+(8<<Ze)}else be(Se,Te[Ze+7])?(Oe=7+2*be(Se,165),Oe+=be(Se,145)):Oe=5+be(Se,159);else Oe=be(Se,Te[Ze+4])?3+be(Se,Te[Ze+5]):2;ge=ye[2]}else Oe=1,ge=ye[1];ye=he+Dp[se],0>(Se=b).b&&fe(Se);var Ze,Te=Se.b,Ue=(Ze=Se.Ca>>1)-(Se.I>>Te)>>31;--Se.b,Se.Ca+=Ue,Se.Ca|=1,Se.I-=(Ze+1&Ue)<<Te,de[ye]=((Oe^Ue)-Ue)*K[(0<se)+0]}return 16}function Ba(b){var S=b.rb[b.sb-1];S.la=0,S.Na=0,i(b.zc,0,0,b.zc.length),b.ja=0}function Vs(b,S,U,K,se){se=b[S+U+32*K]+(se>>3),b[S+U+32*K]=-256&se?0>se?0:255:se}function tc(b,S,U,K,se,de){Vs(b,S,0,U,K+se),Vs(b,S,1,U,K+de),Vs(b,S,2,U,K-de),Vs(b,S,3,U,K-se)}function Pn(b){return(20091*b>>16)+b}function Us(b,S,U,K){var se,de=0,he=s(16);for(se=0;4>se;++se){var ge=b[S+0]+b[S+8],ye=b[S+0]-b[S+8],Se=(35468*b[S+4]>>16)-Pn(b[S+12]),Oe=Pn(b[S+4])+(35468*b[S+12]>>16);he[de+0]=ge+Oe,he[de+1]=ye+Se,he[de+2]=ye-Se,he[de+3]=ge-Oe,de+=4,S++}for(se=de=0;4>se;++se)ge=(b=he[de+0]+4)+he[de+8],ye=b-he[de+8],Se=(35468*he[de+4]>>16)-Pn(he[de+12]),Vs(U,K,0,0,ge+(Oe=Pn(he[de+4])+(35468*he[de+12]>>16))),Vs(U,K,1,0,ye+Se),Vs(U,K,2,0,ye-Se),Vs(U,K,3,0,ge-Oe),de++,K+=32}function rc(b,S,U,K){var se=b[S+0]+4,de=35468*b[S+4]>>16,he=Pn(b[S+4]),ge=35468*b[S+1]>>16;tc(U,K,0,se+he,b=Pn(b[S+1]),ge),tc(U,K,1,se+de,b,ge),tc(U,K,2,se-de,b,ge),tc(U,K,3,se-he,b,ge)}function wl(b,S,U,K,se){Us(b,S,U,K),se&&Us(b,S+16,U,K+4)}function bl(b,S,U,K){Vi(b,S+0,U,K,1),Vi(b,S+32,U,K+128,1)}function tn(b,S,U,K){var se;for(b=b[S+0]+4,se=0;4>se;++se)for(S=0;4>S;++S)Vs(U,K,S,se,b)}function Xo(b,S,U,K){b[S+0]&&rl(b,S+0,U,K),b[S+16]&&rl(b,S+16,U,K+4),b[S+32]&&rl(b,S+32,U,K+128),b[S+48]&&rl(b,S+48,U,K+128+4)}function Kr(b,S,U,K){var se,de=s(16);for(se=0;4>se;++se){var he=b[S+0+se]+b[S+12+se],ge=b[S+4+se]+b[S+8+se],ye=b[S+4+se]-b[S+8+se],Se=b[S+0+se]-b[S+12+se];de[0+se]=he+ge,de[8+se]=he-ge,de[4+se]=Se+ye,de[12+se]=Se-ye}for(se=0;4>se;++se)he=(b=de[0+4*se]+3)+de[3+4*se],ge=de[1+4*se]+de[2+4*se],ye=de[1+4*se]-de[2+4*se],Se=b-de[3+4*se],U[K+0]=he+ge>>3,U[K+16]=Se+ye>>3,U[K+32]=he-ge>>3,U[K+48]=Se-ye>>3,K+=64}function ya(b,S,U){var K,se=S-32,de=Sa,he=255-b[se-1];for(K=0;K<U;++K){var ge,ye=de,Se=he+b[S-1];for(ge=0;ge<U;++ge)b[S+ge]=ye[Se+b[se+ge]];S+=32}}function Pc(b,S){ya(b,S,4)}function Rc(b,S){ya(b,S,8)}function vd(b,S){ya(b,S,16)}function yd(b,S){var U;for(U=0;16>U;++U)n(b,S+32*U,b,S-32,16)}function Fc(b,S){var U;for(U=16;0<U;--U)i(b,S,b[S-1],16),S+=32}function Yo(b,S,U){var K;for(K=0;16>K;++K)i(S,U+32*K,b,16)}function zs(b,S){var U,K=16;for(U=0;16>U;++U)K+=b[S-1+32*U]+b[S+U-32];Yo(K>>5,b,S)}function fs(b,S){var U,K=8;for(U=0;16>U;++U)K+=b[S-1+32*U];Yo(K>>4,b,S)}function $s(b,S){var U,K=8;for(U=0;16>U;++U)K+=b[S+U-32];Yo(K>>4,b,S)}function wa(b,S){Yo(128,b,S)}function kr(b,S,U){return b+2*S+U+2>>2}function Va(b,S){var U,K=S-32;for(K=new Uint8Array([kr(b[K-1],b[K+0],b[K+1]),kr(b[K+0],b[K+1],b[K+2]),kr(b[K+1],b[K+2],b[K+3]),kr(b[K+2],b[K+3],b[K+4])]),U=0;4>U;++U)n(b,S+32*U,K,0,K.length)}function Ao(b,S){var U=b[S-1],K=b[S-1+32],se=b[S-1+64],de=b[S-1+96];Le(b,S+0,16843009*kr(b[S-1-32],U,K)),Le(b,S+32,16843009*kr(U,K,se)),Le(b,S+64,16843009*kr(K,se,de)),Le(b,S+96,16843009*kr(se,de,de))}function $0(b,S){var U,K=4;for(U=0;4>U;++U)K+=b[S+U-32]+b[S-1+32*U];for(K>>=3,U=0;4>U;++U)i(b,S+32*U,K,4)}function wd(b,S){var U=b[S-1+0],K=b[S-1+32],se=b[S-1+64],de=b[S-1-32],he=b[S+0-32],ge=b[S+1-32],ye=b[S+2-32],Se=b[S+3-32];b[S+0+96]=kr(K,se,b[S-1+96]),b[S+1+96]=b[S+0+64]=kr(U,K,se),b[S+2+96]=b[S+1+64]=b[S+0+32]=kr(de,U,K),b[S+3+96]=b[S+2+64]=b[S+1+32]=b[S+0+0]=kr(he,de,U),b[S+3+64]=b[S+2+32]=b[S+1+0]=kr(ge,he,de),b[S+3+32]=b[S+2+0]=kr(ye,ge,he),b[S+3+0]=kr(Se,ye,ge)}function Ti(b,S){var U=b[S+1-32],K=b[S+2-32],se=b[S+3-32],de=b[S+4-32],he=b[S+5-32],ge=b[S+6-32],ye=b[S+7-32];b[S+0+0]=kr(b[S+0-32],U,K),b[S+1+0]=b[S+0+32]=kr(U,K,se),b[S+2+0]=b[S+1+32]=b[S+0+64]=kr(K,se,de),b[S+3+0]=b[S+2+32]=b[S+1+64]=b[S+0+96]=kr(se,de,he),b[S+3+32]=b[S+2+64]=b[S+1+96]=kr(de,he,ge),b[S+3+64]=b[S+2+96]=kr(he,ge,ye),b[S+3+96]=kr(ge,ye,ye)}function Qo(b,S){var U=b[S-1+0],K=b[S-1+32],se=b[S-1+64],de=b[S-1-32],he=b[S+0-32],ge=b[S+1-32],ye=b[S+2-32],Se=b[S+3-32];b[S+0+0]=b[S+1+64]=de+he+1>>1,b[S+1+0]=b[S+2+64]=he+ge+1>>1,b[S+2+0]=b[S+3+64]=ge+ye+1>>1,b[S+3+0]=ye+Se+1>>1,b[S+0+96]=kr(se,K,U),b[S+0+64]=kr(K,U,de),b[S+0+32]=b[S+1+96]=kr(U,de,he),b[S+1+32]=b[S+2+96]=kr(de,he,ge),b[S+2+32]=b[S+3+96]=kr(he,ge,ye),b[S+3+32]=kr(ge,ye,Se)}function bd(b,S){var U=b[S+0-32],K=b[S+1-32],se=b[S+2-32],de=b[S+3-32],he=b[S+4-32],ge=b[S+5-32],ye=b[S+6-32],Se=b[S+7-32];b[S+0+0]=U+K+1>>1,b[S+1+0]=b[S+0+64]=K+se+1>>1,b[S+2+0]=b[S+1+64]=se+de+1>>1,b[S+3+0]=b[S+2+64]=de+he+1>>1,b[S+0+32]=kr(U,K,se),b[S+1+32]=b[S+0+96]=kr(K,se,de),b[S+2+32]=b[S+1+96]=kr(se,de,he),b[S+3+32]=b[S+2+96]=kr(de,he,ge),b[S+3+64]=kr(he,ge,ye),b[S+3+96]=kr(ge,ye,Se)}function Jo(b,S){var U=b[S-1+0],K=b[S-1+32],se=b[S-1+64],de=b[S-1+96];b[S+0+0]=U+K+1>>1,b[S+2+0]=b[S+0+32]=K+se+1>>1,b[S+2+32]=b[S+0+64]=se+de+1>>1,b[S+1+0]=kr(U,K,se),b[S+3+0]=b[S+1+32]=kr(K,se,de),b[S+3+32]=b[S+1+64]=kr(se,de,de),b[S+3+64]=b[S+2+64]=b[S+0+96]=b[S+1+96]=b[S+2+96]=b[S+3+96]=de}function Io(b,S){var U=b[S-1+0],K=b[S-1+32],se=b[S-1+64],de=b[S-1+96],he=b[S-1-32],ge=b[S+0-32],ye=b[S+1-32],Se=b[S+2-32];b[S+0+0]=b[S+2+32]=U+he+1>>1,b[S+0+32]=b[S+2+64]=K+U+1>>1,b[S+0+64]=b[S+2+96]=se+K+1>>1,b[S+0+96]=de+se+1>>1,b[S+3+0]=kr(ge,ye,Se),b[S+2+0]=kr(he,ge,ye),b[S+1+0]=b[S+3+32]=kr(U,he,ge),b[S+1+32]=b[S+3+64]=kr(K,U,he),b[S+1+64]=b[S+3+96]=kr(se,K,U),b[S+1+96]=kr(de,se,K)}function Lc(b,S){var U;for(U=0;8>U;++U)n(b,S+32*U,b,S-32,8)}function Hs(b,S){var U;for(U=0;8>U;++U)i(b,S,b[S-1],8),S+=32}function na(b,S,U){var K;for(K=0;8>K;++K)i(S,U+32*K,b,8)}function Ua(b,S){var U,K=8;for(U=0;8>U;++U)K+=b[S+U-32]+b[S-1+32*U];na(K>>4,b,S)}function _l(b,S){var U,K=4;for(U=0;8>U;++U)K+=b[S+U-32];na(K>>3,b,S)}function Dn(b,S){var U,K=4;for(U=0;8>U;++U)K+=b[S-1+32*U];na(K>>3,b,S)}function _u(b,S){na(128,b,S)}function Zo(b,S,U){var K=b[S-U],se=b[S+0],de=3*(se-K)+Nl[1020+b[S-2*U]-b[S+U]],he=Td[112+(de+4>>3)];b[S-U]=Sa[255+K+Td[112+(de+3>>3)]],b[S+0]=Sa[255+se-he]}function vo(b,S,U,K){var se=b[S+0],de=b[S+U];return Fo[255+b[S-2*U]-b[S-U]]>K||Fo[255+de-se]>K}function kl(b,S,U,K){return 4*Fo[255+b[S-U]-b[S+0]]+Fo[255+b[S-2*U]-b[S+U]]<=K}function El(b,S,U,K,se){var de=b[S-3*U],he=b[S-2*U],ge=b[S-U],ye=b[S+0],Se=b[S+U],Oe=b[S+2*U],Ze=b[S+3*U];return 4*Fo[255+ge-ye]+Fo[255+he-Se]>K?0:Fo[255+b[S-4*U]-de]<=se&&Fo[255+de-he]<=se&&Fo[255+he-ge]<=se&&Fo[255+Ze-Oe]<=se&&Fo[255+Oe-Se]<=se&&Fo[255+Se-ye]<=se}function qs(b,S,U,K){var se=2*K+1;for(K=0;16>K;++K)kl(b,S+K,U,se)&&Zo(b,S+K,U)}function Po(b,S,U,K){var se=2*K+1;for(K=0;16>K;++K)kl(b,S+K*U,1,se)&&Zo(b,S+K*U,1)}function Ns(b,S,U,K){var se;for(se=3;0<se;--se)qs(b,S+=4*U,U,K)}function nc(b,S,U,K){var se;for(se=3;0<se;--se)Po(b,S+=4,U,K)}function As(b,S,U,K,se,de,he,ge){for(de=2*de+1;0<se--;){if(El(b,S,U,de,he))if(vo(b,S,U,ge))Zo(b,S,U);else{var ye=b,Se=S,Oe=U,Ze=ye[Se-2*Oe],Te=ye[Se-Oe],Ue=ye[Se+0],Ye=ye[Se+Oe],pt=ye[Se+2*Oe],nt=27*(ht=Nl[1020+3*(Ue-Te)+Nl[1020+Ze-Ye]])+63>>7,ft=18*ht+63>>7,ht=9*ht+63>>7;ye[Se-3*Oe]=Sa[255+ye[Se-3*Oe]+ht],ye[Se-2*Oe]=Sa[255+Ze+ft],ye[Se-Oe]=Sa[255+Te+nt],ye[Se+0]=Sa[255+Ue-nt],ye[Se+Oe]=Sa[255+Ye-ft],ye[Se+2*Oe]=Sa[255+pt-ht]}S+=K}}function hs(b,S,U,K,se,de,he,ge){for(de=2*de+1;0<se--;){if(El(b,S,U,de,he))if(vo(b,S,U,ge))Zo(b,S,U);else{var ye=b,Se=S,Oe=U,Ze=ye[Se-Oe],Te=ye[Se+0],Ue=ye[Se+Oe],Ye=Td[112+(4+(pt=3*(Te-Ze))>>3)],pt=Td[112+(pt+3>>3)],nt=Ye+1>>1;ye[Se-2*Oe]=Sa[255+ye[Se-2*Oe]+nt],ye[Se-Oe]=Sa[255+Ze+pt],ye[Se+0]=Sa[255+Te-Ye],ye[Se+Oe]=Sa[255+Ue-nt]}S+=K}}function D(b,S,U,K,se,de){As(b,S,U,1,16,K,se,de)}function ie(b,S,U,K,se,de){As(b,S,1,U,16,K,se,de)}function Ce(b,S,U,K,se,de){var he;for(he=3;0<he;--he)hs(b,S+=4*U,U,1,16,K,se,de)}function De(b,S,U,K,se,de){var he;for(he=3;0<he;--he)hs(b,S+=4,1,U,16,K,se,de)}function He(b,S,U,K,se,de,he,ge){As(b,S,se,1,8,de,he,ge),As(U,K,se,1,8,de,he,ge)}function vt(b,S,U,K,se,de,he,ge){As(b,S,1,se,8,de,he,ge),As(U,K,1,se,8,de,he,ge)}function bt(b,S,U,K,se,de,he,ge){hs(b,S+4*se,se,1,8,de,he,ge),hs(U,K+4*se,se,1,8,de,he,ge)}function Yt(b,S,U,K,se,de,he,ge){hs(b,S+4,1,se,8,de,he,ge),hs(U,K+4,1,se,8,de,he,ge)}function er(){this.ba=new hr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new yr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function br(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ir(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ln(){this.ua=0,this.Wa=new qe,this.vb=new qe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new pe,this.yc=new B}function Jn(){this.xb=this.a=0,this.l=new Tn,this.ca=new hr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new H,this.Pb=0,this.wd=new H,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ln,this.ab=0,this.gc=a(4,Ir),this.Oc=0}function oi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Tn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xn(b,S,U,K,se,de,he){for(b=b==null?0:b[S+0],S=0;S<he;++S)se[de+S]=b+U[K+S]&255,b=se[de+S]}function Ni(b,S,U,K,se,de,he){var ge;if(b==null)xn(null,null,U,K,se,de,he);else for(ge=0;ge<he;++ge)se[de+ge]=b[S+ge]+U[K+ge]&255}function On(b,S,U,K,se,de,he){if(b==null)xn(null,null,U,K,se,de,he);else{var ge,ye=b[S+0],Se=ye,Oe=ye;for(ge=0;ge<he;++ge)Se=Oe+(ye=b[S+ge])-Se,Oe=U[K+ge]+(-256&Se?0>Se?0:255:Se)&255,Se=ye,se[de+ge]=Oe}}function Yi(b,S,U,K){var se=S.width,de=S.o;if(e(b!=null&&S!=null),0>U||0>=K||U+K>de)return null;if(!b.Cc){if(b.ga==null){var he;if(b.ga=new oi,(he=b.ga==null)||(he=S.width*S.o,e(b.Gb.length==0),b.Gb=s(he),b.Uc=0,b.Gb==null?he=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,he=1),he=!he),!he){he=b.ga;var ge=b.Fa,ye=b.P,Se=b.qc,Oe=b.mb,Ze=b.nb,Te=ye+1,Ue=Se-1,Ye=he.l;if(e(ge!=null&&Oe!=null&&S!=null),sa[0]=null,sa[1]=xn,sa[2]=Ni,sa[3]=On,he.ca=Oe,he.tb=Ze,he.c=S.width,he.i=S.height,e(0<he.c&&0<he.i),1>=Se)S=0;else if(he.$a=3&ge[ye+0],he.Z=ge[ye+0]>>2&3,he.Lc=ge[ye+0]>>4&3,ye=ge[ye+0]>>6&3,0>he.$a||1<he.$a||4<=he.Z||1<he.Lc||ye)S=0;else if(Ye.put=sr,Ye.ac=jn,Ye.bc=Gr,Ye.ma=he,Ye.width=S.width,Ye.height=S.height,Ye.Da=S.Da,Ye.v=S.v,Ye.va=S.va,Ye.j=S.j,Ye.o=S.o,he.$a)e:{e(he.$a==1),S=et();t:for(;;){if(S==null){S=0;break e}if(e(he!=null),he.mc=S,S.c=he.c,S.i=he.i,S.l=he.l,S.l.ma=he,S.l.width=he.c,S.l.height=he.i,S.a=0,W(S.m,ge,Te,Ue),!tt(he.c,he.i,1,S,null)||(S.ab==1&&S.gc[0].hc==3&&ke(S.s)?(he.ic=1,ge=S.c*S.i,S.Ta=null,S.Ua=0,S.V=s(ge),S.Ba=0,S.V==null?(S.a=1,S=0):S=1):(he.ic=0,S=st(S,he.c)),!S))break t;S=1;break e}he.mc=null,S=0}else S=Ue>=he.c*he.i;he=!S}if(he)return null;b.ga.Lc!=1?b.Ga=0:K=de-U}e(b.ga!=null),e(U+K<=de);e:{if(S=(ge=b.ga).c,de=ge.l.o,ge.$a==0){if(Te=b.rc,Ue=b.Vc,Ye=b.Fa,ye=b.P+1+U*S,Se=b.mb,Oe=b.nb+U*S,e(ye<=b.P+b.qc),ge.Z!=0)for(e(sa[ge.Z]!=null),he=0;he<K;++he)sa[ge.Z](Te,Ue,Ye,ye,Se,Oe,S),Te=Se,Ue=Oe,Oe+=S,ye+=S;else for(he=0;he<K;++he)n(Se,Oe,Ye,ye,S),Te=Se,Ue=Oe,Oe+=S,ye+=S;b.rc=Te,b.Vc=Ue}else{if(e(ge.mc!=null),S=U+K,e((he=ge.mc)!=null),e(S<=he.i),he.C>=S)S=1;else if(ge.ic||Mi(),ge.ic){ge=he.V,Te=he.Ba,Ue=he.c;var pt=he.i,nt=(Ye=1,ye=he.$/Ue,Se=he.$%Ue,Oe=he.m,Ze=he.s,he.$),ft=Ue*pt,ht=Ue*S,yt=Ze.wc,wt=nt<ht?le(Ze,Se,ye):null;e(nt<=ft),e(S<=pt),e(ke(Ze));t:for(;;){for(;!Oe.h&&nt<ht;){if(Se&yt||(wt=le(Ze,Se,ye)),e(wt!=null),we(Oe),256>(pt=Cn(wt.G[0],wt.H[0],Oe)))ge[Te+nt]=pt,++nt,++Se>=Ue&&(Se=0,++ye<=S&&!(ye%16)&&Ie(he,ye));else{if(!(280>pt)){Ye=0;break t}pt=Un(pt-256,Oe);var mr,tr=Cn(wt.G[4],wt.H[4],Oe);if(we(Oe),!(nt>=(tr=Xi(Ue,tr=Un(tr,Oe)))&&ft-nt>=pt)){Ye=0;break t}for(mr=0;mr<pt;++mr)ge[Te+nt+mr]=ge[Te+nt+mr-tr];for(nt+=pt,Se+=pt;Se>=Ue;)Se-=Ue,++ye<=S&&!(ye%16)&&Ie(he,ye);nt<ht&&Se&yt&&(wt=le(Ze,Se,ye))}e(Oe.h==J(Oe))}Ie(he,ye>S?S:ye);break t}!Ye||Oe.h&&nt<ft?(Ye=0,he.a=Oe.h?5:3):he.$=nt,S=Ye}else S=Qe(he,he.V,he.Ba,he.c,he.i,S,kt);if(!S){K=0;break e}}U+K>=de&&(b.Cc=1),K=1}if(!K)return null;if(b.Cc&&((K=b.ga)!=null&&(K.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+U*se}function Ro(b,S,U,K,se,de){for(;0<se--;){var he,ge=b,ye=S+(U?1:0),Se=b,Oe=S+(U?0:3);for(he=0;he<K;++he){var Ze=Se[Oe+4*he];Ze!=255&&(Ze*=32897,ge[ye+4*he+0]=ge[ye+4*he+0]*Ze>>23,ge[ye+4*he+1]=ge[ye+4*he+1]*Ze>>23,ge[ye+4*he+2]=ge[ye+4*he+2]*Ze>>23)}S+=de}}function el(b,S,U,K,se){for(;0<K--;){var de;for(de=0;de<U;++de){var he=b[S+2*de+0],ge=15&(Se=b[S+2*de+1]),ye=4369*ge,Se=(240&Se|Se>>4)*ye>>16;b[S+2*de+0]=(240&he|he>>4)*ye>>16&240|(15&he|he<<4)*ye>>16>>4&15,b[S+2*de+1]=240&Se|ge}S+=se}}function ku(b,S,U,K,se,de,he,ge){var ye,Se,Oe=255;for(Se=0;Se<se;++Se){for(ye=0;ye<K;++ye){var Ze=b[S+ye];de[he+4*ye]=Ze,Oe&=Ze}S+=U,he+=ge}return Oe!=255}function ic(b,S,U,K,se){var de;for(de=0;de<se;++de)U[K+de]=b[S+de]>>8}function Mi(){Tu=Ro,Np=el,W0=ku,Ap=ic}function za(b,S,U){C[b]=function(K,se,de,he,ge,ye,Se,Oe,Ze,Te,Ue,Ye,pt,nt,ft,ht,yt){var wt,mr=yt-1>>1,tr=ge[ye+0]|Se[Oe+0]<<16,Br=Ze[Te+0]|Ue[Ye+0]<<16;e(K!=null);var ar=3*tr+Br+131074>>2;for(S(K[se+0],255&ar,ar>>16,pt,nt),de!=null&&(ar=3*Br+tr+131074>>2,S(de[he+0],255&ar,ar>>16,ft,ht)),wt=1;wt<=mr;++wt){var nn=ge[ye+wt]|Se[Oe+wt]<<16,Ii=Ze[Te+wt]|Ue[Ye+wt]<<16,Vr=tr+nn+Br+Ii+524296,rr=Vr+2*(nn+Br)>>3;ar=rr+tr>>1,tr=(Vr=Vr+2*(tr+Ii)>>3)+nn>>1,S(K[se+2*wt-1],255&ar,ar>>16,pt,nt+(2*wt-1)*U),S(K[se+2*wt-0],255&tr,tr>>16,pt,nt+(2*wt-0)*U),de!=null&&(ar=Vr+Br>>1,tr=rr+Ii>>1,S(de[he+2*wt-1],255&ar,ar>>16,ft,ht+(2*wt-1)*U),S(de[he+2*wt+0],255&tr,tr>>16,ft,ht+(2*wt+0)*U)),tr=nn,Br=Ii}1&yt||(ar=3*tr+Br+131074>>2,S(K[se+yt-1],255&ar,ar>>16,pt,nt+(yt-1)*U),de!=null&&(ar=3*Br+tr+131074>>2,S(de[he+yt-1],255&ar,ar>>16,ft,ht+(yt-1)*U)))}}function jc(){Ka[Sh]=ry,Ka[Vc]=Uc,Ka[l2]=ny,Ka[G0]=Pd,Ka[K0]=Pu,Ka[zn]=Z0,Ka[Ch]=Mp,Ka[Nd]=Uc,Ka[Nu]=Pd,Ka[X0]=Pu,Ka[Y0]=Z0}function ba(b){return b&-16384?0>b?0:255:b>>zc}function _(b,S){return ba((19077*b>>8)+(26149*S>>8)-14234)}function z(b,S,U){return ba((19077*b>>8)-(6419*S>>8)-(13320*U>>8)+8708)}function Z(b,S){return ba((19077*b>>8)+(33050*S>>8)-17685)}function xe(b,S,U,K,se){K[se+0]=_(b,U),K[se+1]=z(b,S,U),K[se+2]=Z(b,S)}function Xe(b,S,U,K,se){K[se+0]=Z(b,S),K[se+1]=z(b,S,U),K[se+2]=_(b,U)}function dt(b,S,U,K,se){var de=z(b,S,U);S=de<<3&224|Z(b,S)>>3,K[se+0]=248&_(b,U)|de>>5,K[se+1]=S}function Ft(b,S,U,K,se){var de=240&Z(b,S)|15;K[se+0]=240&_(b,U)|z(b,S,U)>>4,K[se+1]=de}function vn(b,S,U,K,se){K[se+0]=255,xe(b,S,U,K,se+1)}function hi(b,S,U,K,se){Xe(b,S,U,K,se),K[se+3]=255}function Qr(b,S,U,K,se){xe(b,S,U,K,se),K[se+3]=255}function rn(b,S){return 0>b?0:b>S?S:b}function wn(b,S,U){C[b]=function(K,se,de,he,ge,ye,Se,Oe,Ze){for(var Te=Oe+(-2&Ze)*U;Oe!=Te;)S(K[se+0],de[he+0],ge[ye+0],Se,Oe),S(K[se+1],de[he+0],ge[ye+0],Se,Oe+U),se+=2,++he,++ye,Oe+=2*U;1&Ze&&S(K[se+0],de[he+0],ge[ye+0],Se,Oe)}}function ia(b,S,U){return U==0?b==0?S==0?6:5:S==0?4:0:U}function Ws(b,S,U,K,se){switch(b>>>30){case 3:Vi(S,U,K,se,0);break;case 2:ps(S,U,K,se);break;case 1:rl(S,U,K,se)}}function $a(b,S){var U,K,se=S.M,de=S.Nb,he=b.oc,ge=b.pc+40,ye=b.oc,Se=b.pc+584,Oe=b.oc,Ze=b.pc+600;for(U=0;16>U;++U)he[ge+32*U-1]=129;for(U=0;8>U;++U)ye[Se+32*U-1]=129,Oe[Ze+32*U-1]=129;for(0<se?he[ge-1-32]=ye[Se-1-32]=Oe[Ze-1-32]=129:(i(he,ge-32-1,127,21),i(ye,Se-32-1,127,9),i(Oe,Ze-32-1,127,9)),K=0;K<b.za;++K){var Te=S.ya[S.aa+K];if(0<K){for(U=-1;16>U;++U)n(he,ge+32*U-4,he,ge+32*U+12,4);for(U=-1;8>U;++U)n(ye,Se+32*U-4,ye,Se+32*U+4,4),n(Oe,Ze+32*U-4,Oe,Ze+32*U+4,4)}var Ue=b.Gd,Ye=b.Hd+K,pt=Te.ad,nt=Te.Hc;if(0<se&&(n(he,ge-32,Ue[Ye].y,0,16),n(ye,Se-32,Ue[Ye].f,0,8),n(Oe,Ze-32,Ue[Ye].ea,0,8)),Te.Za){var ft=he,ht=ge-32+16;for(0<se&&(K>=b.za-1?i(ft,ht,Ue[Ye].y[15],4):n(ft,ht,Ue[Ye+1].y,0,4)),U=0;4>U;U++)ft[ht+128+U]=ft[ht+256+U]=ft[ht+384+U]=ft[ht+0+U];for(U=0;16>U;++U,nt<<=2)ft=he,ht=ge+Bp[U],Lo[Te.Ob[U]](ft,ht),Ws(nt,pt,16*+U,ft,ht)}else if(ft=ia(K,se,Te.Ob[0]),Ca[ft](he,ge),nt!=0)for(U=0;16>U;++U,nt<<=2)Ws(nt,pt,16*+U,he,ge+Bp[U]);for(U=Te.Gc,ft=ia(K,se,Te.Dd),Ga[ft](ye,Se),Ga[ft](Oe,Ze),nt=pt,ft=ye,ht=Se,255&(Te=0|U)&&(170&Te?Tl(nt,256,ft,ht):Sd(nt,256,ft,ht)),Te=Oe,nt=Ze,255&(U>>=8)&&(170&U?Tl(pt,320,Te,nt):Sd(pt,320,Te,nt)),se<b.Ub-1&&(n(Ue[Ye].y,0,he,ge+480,16),n(Ue[Ye].f,0,ye,Se+224,8),n(Ue[Ye].ea,0,Oe,Ze+224,8)),U=8*de*b.B,Ue=b.sa,Ye=b.ta+16*K+16*de*b.R,pt=b.qa,Te=b.ra+8*K+U,nt=b.Ha,ft=b.Ia+8*K+U,U=0;16>U;++U)n(Ue,Ye+U*b.R,he,ge+32*U,16);for(U=0;8>U;++U)n(pt,Te+U*b.B,ye,Se+32*U,8),n(nt,ft+U*b.B,Oe,Ze+32*U,8)}}function tl(b,S,U,K,se,de,he,ge,ye){var Se=[0],Oe=[0],Ze=0,Te=ye!=null?ye.kd:0,Ue=ye??new br;if(b==null||12>U)return 7;Ue.data=b,Ue.w=S,Ue.ha=U,S=[S],U=[U],Ue.gb=[Ue.gb];e:{var Ye=S,pt=U,nt=Ue.gb;if(e(b!=null),e(pt!=null),e(nt!=null),nt[0]=0,12<=pt[0]&&!r(b,Ye[0],"RIFF")){if(r(b,Ye[0]+8,"WEBP")){nt=3;break e}var ft=Re(b,Ye[0]+4);if(12>ft||4294967286<ft){nt=3;break e}if(Te&&ft>pt[0]-8){nt=7;break e}nt[0]=ft,Ye[0]+=12,pt[0]-=12}nt=0}if(nt!=0)return nt;for(ft=0<Ue.gb[0],U=U[0];;){e:{var ht=b;pt=S,nt=U;var yt=Se,wt=Oe,mr=Ye=[0];if((ar=Ze=[Ze])[0]=0,8>nt[0])nt=7;else{if(!r(ht,pt[0],"VP8X")){if(Re(ht,pt[0]+4)!=10){nt=3;break e}if(18>nt[0]){nt=7;break e}var tr=Re(ht,pt[0]+8),Br=1+Be(ht,pt[0]+12);if(2147483648<=Br*(ht=1+Be(ht,pt[0]+15))){nt=3;break e}mr!=null&&(mr[0]=tr),yt!=null&&(yt[0]=Br),wt!=null&&(wt[0]=ht),pt[0]+=18,nt[0]-=18,ar[0]=1}nt=0}}if(Ze=Ze[0],Ye=Ye[0],nt!=0)return nt;if(pt=!!(2&Ye),!ft&&Ze)return 3;if(de!=null&&(de[0]=!!(16&Ye)),he!=null&&(he[0]=pt),ge!=null&&(ge[0]=0),he=Se[0],Ye=Oe[0],Ze&&pt&&ye==null){nt=0;break}if(4>U){nt=7;break}if(ft&&Ze||!ft&&!Ze&&!r(b,S[0],"ALPH")){U=[U],Ue.na=[Ue.na],Ue.P=[Ue.P],Ue.Sa=[Ue.Sa];e:{tr=b,nt=S,ft=U;var ar=Ue.gb;yt=Ue.na,wt=Ue.P,mr=Ue.Sa,Br=22,e(tr!=null),e(ft!=null),ht=nt[0];var nn=ft[0];for(e(yt!=null),e(mr!=null),yt[0]=null,wt[0]=null,mr[0]=0;;){if(nt[0]=ht,ft[0]=nn,8>nn){nt=7;break e}var Ii=Re(tr,ht+4);if(4294967286<Ii){nt=3;break e}var Vr=8+Ii+1&-2;if(Br+=Vr,0<ar&&Br>ar){nt=3;break e}if(!r(tr,ht,"VP8 ")||!r(tr,ht,"VP8L")){nt=0;break e}if(nn[0]<Vr){nt=7;break e}r(tr,ht,"ALPH")||(yt[0]=tr,wt[0]=ht+8,mr[0]=Ii),ht+=Vr,nn-=Vr}}if(U=U[0],Ue.na=Ue.na[0],Ue.P=Ue.P[0],Ue.Sa=Ue.Sa[0],nt!=0)break}U=[U],Ue.Ja=[Ue.Ja],Ue.xa=[Ue.xa];e:if(ar=b,nt=S,ft=U,yt=Ue.gb[0],wt=Ue.Ja,mr=Ue.xa,tr=nt[0],ht=!r(ar,tr,"VP8 "),Br=!r(ar,tr,"VP8L"),e(ar!=null),e(ft!=null),e(wt!=null),e(mr!=null),8>ft[0])nt=7;else{if(ht||Br){if(ar=Re(ar,tr+4),12<=yt&&ar>yt-12){nt=3;break e}if(Te&&ar>ft[0]-8){nt=7;break e}wt[0]=ar,nt[0]+=8,ft[0]-=8,mr[0]=Br}else mr[0]=5<=ft[0]&&ar[tr+0]==47&&!(ar[tr+4]>>5),wt[0]=ft[0];nt=0}if(U=U[0],Ue.Ja=Ue.Ja[0],Ue.xa=Ue.xa[0],S=S[0],nt!=0)break;if(4294967286<Ue.Ja)return 3;if(ge==null||pt||(ge[0]=Ue.xa?2:1),he=[he],Ye=[Ye],Ue.xa){if(5>U){nt=7;break}ge=he,Te=Ye,pt=de,b==null||5>U?b=0:5<=U&&b[S+0]==47&&!(b[S+4]>>5)?(ft=[0],ar=[0],yt=[0],W(wt=new H,b,S,U),ds(wt,ft,ar,yt)?(ge!=null&&(ge[0]=ft[0]),Te!=null&&(Te[0]=ar[0]),pt!=null&&(pt[0]=yt[0]),b=1):b=0):b=0}else{if(10>U){nt=7;break}ge=Ye,b==null||10>U||!bu(b,S+3,U-3)?b=0:(Te=b[S+0]|b[S+1]<<8|b[S+2]<<16,pt=16383&(b[S+7]<<8|b[S+6]),b=16383&(b[S+9]<<8|b[S+8]),1&Te||3<(Te>>1&7)||!(Te>>4&1)||Te>>5>=Ue.Ja||!pt||!b?b=0:(he&&(he[0]=pt),ge&&(ge[0]=b),b=1))}if(!b||(he=he[0],Ye=Ye[0],Ze&&(Se[0]!=he||Oe[0]!=Ye)))return 3;ye!=null&&(ye[0]=Ue,ye.offset=S-ye.w,e(4294967286>S-ye.w),e(ye.offset==ye.ha-U));break}return nt==0||nt==7&&Ze&&ye==null?(de!=null&&(de[0]|=Ue.na!=null&&0<Ue.na.length),K!=null&&(K[0]=he),se!=null&&(se[0]=Ye),0):nt}function _a(b,S,U){var K=S.width,se=S.height,de=0,he=0,ge=K,ye=se;if(S.Da=b!=null&&0<b.Da,S.Da&&(ge=b.cd,ye=b.bd,de=b.v,he=b.j,11>U||(de&=-2,he&=-2),0>de||0>he||0>=ge||0>=ye||de+ge>K||he+ye>se))return 0;if(S.v=de,S.j=he,S.va=de+ge,S.o=he+ye,S.U=ge,S.T=ye,S.da=b!=null&&0<b.da,S.da){if(!it(ge,ye,U=[b.ib],de=[b.hb]))return 0;S.ib=U[0],S.hb=de[0]}return S.ob=b!=null&&b.ob,S.Kb=b==null||!b.Sd,S.da&&(S.ob=S.ib<3*K/4&&S.hb<3*se/4,S.Kb=0),1}function ka(b){if(b==null)return 2;if(11>b.S){var S=b.f.RGBA;S.fb+=(b.height-1)*S.A,S.A=-S.A}else S=b.f.kb,b=b.height,S.O+=(b-1)*S.fa,S.fa=-S.fa,S.N+=(b-1>>1)*S.Ab,S.Ab=-S.Ab,S.W+=(b-1>>1)*S.Db,S.Db=-S.Db,S.F!=null&&(S.J+=(b-1)*S.lb,S.lb=-S.lb);return 0}function Dc(b,S,U,K){if(K==null||0>=b||0>=S)return 2;if(U!=null){if(U.Da){var se=U.cd,de=U.bd,he=-2&U.v,ge=-2&U.j;if(0>he||0>ge||0>=se||0>=de||he+se>b||ge+de>S)return 2;b=se,S=de}if(U.da){if(!it(b,S,se=[U.ib],de=[U.hb]))return 2;b=se[0],S=de[0]}}K.width=b,K.height=S;e:{var ye=K.width,Se=K.height;if(b=K.S,0>=ye||0>=Se||!(b>=Sh&&13>b))b=2;else{if(0>=K.Rd&&K.sd==null){he=de=se=S=0;var Oe=(ge=ye*ef[b])*Se;if(11>b||(de=(Se+1)/2*(S=(ye+1)/2),b==12&&(he=(se=ye)*Se)),(Se=s(Oe+2*de+he))==null){b=1;break e}K.sd=Se,11>b?((ye=K.f.RGBA).eb=Se,ye.fb=0,ye.A=ge,ye.size=Oe):((ye=K.f.kb).y=Se,ye.O=0,ye.fa=ge,ye.Fd=Oe,ye.f=Se,ye.N=0+Oe,ye.Ab=S,ye.Cd=de,ye.ea=Se,ye.W=0+Oe+de,ye.Db=S,ye.Ed=de,b==12&&(ye.F=Se,ye.J=0+Oe+2*de),ye.Tc=he,ye.lb=se)}if(S=1,se=K.S,de=K.width,he=K.height,se>=Sh&&13>se)if(11>se)b=K.f.RGBA,S&=(ge=Math.abs(b.A))*(he-1)+de<=b.size,S&=ge>=de*ef[se],S&=b.eb!=null;else{b=K.f.kb,ge=(de+1)/2,Oe=(he+1)/2,ye=Math.abs(b.fa),Se=Math.abs(b.Ab);var Ze=Math.abs(b.Db),Te=Math.abs(b.lb),Ue=Te*(he-1)+de;S&=ye*(he-1)+de<=b.Fd,S&=Se*(Oe-1)+ge<=b.Cd,S=(S&=Ze*(Oe-1)+ge<=b.Ed)&ye>=de&Se>=ge&Ze>=ge,S&=b.y!=null,S&=b.f!=null,S&=b.ea!=null,se==12&&(S&=Te>=de,S&=Ue<=b.Tc,S&=b.F!=null)}else S=0;b=S?0:2}}return b!=0||U!=null&&U.fd&&(b=ka(K)),b}var Ea=64,Oc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],H0=24,Mc=32,Ai=8,bh=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ge("Predictor0","PredictorAdd0"),C.Predictor0=function(){return 4278190080},C.Predictor1=function(b){return b},C.Predictor2=function(b,S,U){return S[U+0]},C.Predictor3=function(b,S,U){return S[U+1]},C.Predictor4=function(b,S,U){return S[U-1]},C.Predictor5=function(b,S,U){return Pe(Pe(b,S[U+1]),S[U+0])},C.Predictor6=function(b,S,U){return Pe(b,S[U-1])},C.Predictor7=function(b,S,U){return Pe(b,S[U+0])},C.Predictor8=function(b,S,U){return Pe(S[U-1],S[U+0])},C.Predictor9=function(b,S,U){return Pe(S[U+0],S[U+1])},C.Predictor10=function(b,S,U){return Pe(Pe(b,S[U-1]),Pe(S[U+0],S[U+1]))},C.Predictor11=function(b,S,U){var K=S[U+0];return 0>=We(K>>24&255,b>>24&255,(S=S[U-1])>>24&255)+We(K>>16&255,b>>16&255,S>>16&255)+We(K>>8&255,b>>8&255,S>>8&255)+We(255&K,255&b,255&S)?K:b},C.Predictor12=function(b,S,U){var K=S[U+0];return(Ke((b>>24&255)+(K>>24&255)-((S=S[U-1])>>24&255))<<24|Ke((b>>16&255)+(K>>16&255)-(S>>16&255))<<16|Ke((b>>8&255)+(K>>8&255)-(S>>8&255))<<8|Ke((255&b)+(255&K)-(255&S)))>>>0},C.Predictor13=function(b,S,U){var K=S[U-1];return(ot((b=Pe(b,S[U+0]))>>24&255,K>>24&255)<<24|ot(b>>16&255,K>>16&255)<<16|ot(b>>8&255,K>>8&255)<<8|ot(255&b,255&K))>>>0};var Ha=C.PredictorAdd0;C.PredictorAdd1=Lt,Ge("Predictor2","PredictorAdd2"),Ge("Predictor3","PredictorAdd3"),Ge("Predictor4","PredictorAdd4"),Ge("Predictor5","PredictorAdd5"),Ge("Predictor6","PredictorAdd6"),Ge("Predictor7","PredictorAdd7"),Ge("Predictor8","PredictorAdd8"),Ge("Predictor9","PredictorAdd9"),Ge("Predictor10","PredictorAdd10"),Ge("Predictor11","PredictorAdd11"),Ge("Predictor12","PredictorAdd12"),Ge("Predictor13","PredictorAdd13");var qa=C.PredictorAdd2;_t("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),_t("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var _d,Bc=C.ColorIndexInverseTransform,kd=C.MapARGB,Eu=C.VP8LColorIndexInverseTransformAlpha,sc=C.MapAlpha,ac=C.VP8LPredictorsAdd=[];ac.length=16,(C.VP8LPredictors=[]).length=16,(C.VP8LPredictorsAdd_C=[]).length=16,(C.VP8LPredictors_C=[]).length=16;var Sl,Ed,Wa,Cl,Zn,ei,Bi,Vi,ps,Tl,rl,Sd,Sp,Cp,_h,a2,o2,Su,kh,Cd,Eh,Tp,q0,Cu,Tu,Np,W0,Ap,Ip=s(511),Pp=s(2041),Rp=s(225),Fp=s(767),Lp=0,Nl=Pp,Td=Rp,Sa=Fp,Fo=Ip,Sh=0,Vc=1,l2=2,G0=3,K0=4,zn=5,Ch=6,Nd=7,Nu=8,X0=9,Y0=10,Q0=[2,3,7],Th=[3,3,11],Au=[280,256,256,256,40],c2=[0,1,1,1,0],J5=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Z5=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],u2=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Nh=8,Ad=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],J0=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Iu=null,jp=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Dp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],d2=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],f2=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ey=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ty=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Op=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ca=[],Lo=[],Ga=[],Al=1,Id=2,sa=[],Ka=[];za("UpsampleRgbLinePair",xe,3),za("UpsampleBgrLinePair",Xe,3),za("UpsampleRgbaLinePair",Qr,4),za("UpsampleBgraLinePair",hi,4),za("UpsampleArgbLinePair",vn,4),za("UpsampleRgba4444LinePair",Ft,2),za("UpsampleRgb565LinePair",dt,2);var ry=C.UpsampleRgbLinePair,ny=C.UpsampleBgrLinePair,Uc=C.UpsampleRgbaLinePair,Pd=C.UpsampleBgraLinePair,Pu=C.UpsampleArgbLinePair,Z0=C.UpsampleRgba4444LinePair,Mp=C.UpsampleRgb565LinePair,oc=16,nl=1<<oc-1,Rn=-227,Mn=482,zc=6,Gs=0,Xa=s(256),Ru=s(256),Rd=s(256),Ya=s(256),Ah=s(Mn-Rn),h2=s(Mn-Rn);wn("YuvToRgbRow",xe,3),wn("YuvToBgrRow",Xe,3),wn("YuvToRgbaRow",Qr,4),wn("YuvToBgraRow",hi,4),wn("YuvToArgbRow",vn,4),wn("YuvToRgba4444Row",Ft,2),wn("YuvToRgb565Row",dt,2);var Bp=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Fu=[0,2,8],p2=[8,7,6,4,4,2,2,2,1,1,1,1],lc=1;this.WebPDecodeRGBA=function(b,S,U,K,se){var de=Vc,he=new er,ge=new hr;he.ba=ge,ge.S=de,ge.width=[ge.width],ge.height=[ge.height];var ye=ge.width,Se=ge.height,Oe=new Zt;if(Oe==null||b==null)var Ze=2;else e(Oe!=null),Ze=tl(b,S,U,Oe.width,Oe.height,Oe.Pd,Oe.Qd,Oe.format,null);if(Ze!=0?ye=0:(ye!=null&&(ye[0]=Oe.width[0]),Se!=null&&(Se[0]=Oe.height[0]),ye=1),ye){ge.width=ge.width[0],ge.height=ge.height[0],K!=null&&(K[0]=ge.width),se!=null&&(se[0]=ge.height);e:{if(K=new Tn,(se=new br).data=b,se.w=S,se.ha=U,se.kd=1,S=[0],e(se!=null),((b=tl(se.data,se.w,se.ha,null,null,null,S,null,se))==0||b==7)&&S[0]&&(b=4),(S=b)==0){if(e(he!=null),K.data=se.data,K.w=se.w+se.offset,K.ha=se.ha-se.offset,K.put=sr,K.ac=jn,K.bc=Gr,K.ma=he,se.xa){if((b=et())==null){he=1;break e}if((function(Te,Ue){var Ye=[0],pt=[0],nt=[0];t:for(;;){if(Te==null)return 0;if(Ue==null)return Te.a=2,0;if(Te.l=Ue,Te.a=0,W(Te.m,Ue.data,Ue.w,Ue.ha),!ds(Te.m,Ye,pt,nt)){Te.a=3;break t}if(Te.xb=Id,Ue.width=Ye[0],Ue.height=pt[0],!tt(Ye[0],pt[0],1,Te,null))break t;return 1}return e(Te.a!=0),0})(b,K)){if(K=(S=Dc(K.width,K.height,he.Oa,he.ba))==0){t:{K=b;r:for(;;){if(K==null){K=0;break t}if(e(K.s.yc!=null),e(K.s.Ya!=null),e(0<K.s.Wb),e((U=K.l)!=null),e((se=U.ma)!=null),K.xb!=0){if(K.ca=se.ba,K.tb=se.tb,e(K.ca!=null),!_a(se.Oa,U,G0)){K.a=2;break r}if(!st(K,U.width)||U.da)break r;if((U.da||zt(K.ca.S))&&Mi(),11>K.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),K.ca.f.kb.F!=null&&Mi()),K.Pb&&0<K.s.ua&&K.s.vb.X==null&&!ae(K.s.vb,K.s.Wa.Xa)){K.a=1;break r}K.xb=0}if(!Qe(K,K.V,K.Ba,K.c,K.i,U.o,_e))break r;se.Dc=K.Ma,K=1;break t}e(K.a!=0),K=0}K=!K}K&&(S=b.a)}else S=b.a}else{if((b=new wu)==null){he=1;break e}if(b.Fa=se.na,b.P=se.P,b.qc=se.Sa,ec(b,K)){if((S=Dc(K.width,K.height,he.Oa,he.ba))==0){if(b.Aa=0,U=he.Oa,e((se=b)!=null),U!=null){if(0<(ye=0>(ye=U.Md)?0:100<ye?255:255*ye/100)){for(Se=Oe=0;4>Se;++Se)12>(Ze=se.pb[Se]).lc&&(Ze.ia=ye*p2[0>Ze.lc?0:Ze.lc]>>3),Oe|=Ze.ia;Oe&&(alert("todo:VP8InitRandom"),se.ia=1)}se.Ga=U.Id,100<se.Ga?se.Ga=100:0>se.Ga&&(se.Ga=0)}(function(Te,Ue){if(Te==null)return 0;if(Ue==null)return vi(Te,2,"NULL VP8Io parameter in VP8Decode().");if(!Te.cb&&!ec(Te,Ue))return 0;if(e(Te.cb),Ue.ac==null||Ue.ac(Ue)){Ue.ob&&(Te.L=0);var Ye=Fu[Te.L];if(Te.L==2?(Te.yb=0,Te.zb=0):(Te.yb=Ue.v-Ye>>4,Te.zb=Ue.j-Ye>>4,0>Te.yb&&(Te.yb=0),0>Te.zb&&(Te.zb=0)),Te.Va=Ue.o+15+Ye>>4,Te.Hb=Ue.va+15+Ye>>4,Te.Hb>Te.za&&(Te.Hb=Te.za),Te.Va>Te.Ub&&(Te.Va=Te.Ub),0<Te.L){var pt=Te.ed;for(Ye=0;4>Ye;++Ye){var nt;if(Te.Qa.Cb){var ft=Te.Qa.Lb[Ye];Te.Qa.Fb||(ft+=pt.Tb)}else ft=pt.Tb;for(nt=0;1>=nt;++nt){var ht=Te.gd[Ye][nt],yt=ft;if(pt.Pc&&(yt+=pt.vd[0],nt&&(yt+=pt.od[0])),0<(yt=0>yt?0:63<yt?63:yt)){var wt=yt;0<pt.wb&&(wt=4<pt.wb?wt>>2:wt>>1)>9-pt.wb&&(wt=9-pt.wb),1>wt&&(wt=1),ht.dd=wt,ht.tc=2*yt+wt,ht.ld=40<=yt?2:15<=yt?1:0}else ht.tc=0;ht.La=nt}}}Ye=0}else vi(Te,6,"Frame setup failed"),Ye=Te.a;if(Ye=Ye==0){if(Ye){Te.$c=0,0<Te.Aa||(Te.Ic=lc);t:{Ye=Te.Ic,pt=4*(wt=Te.za);var mr=32*wt,tr=wt+1,Br=0<Te.L?wt*(0<Te.Aa?2:1):0,ar=(Te.Aa==2?2:1)*wt;if((ht=pt+832+(nt=3*(16*Ye+Fu[Te.L])/2*mr)+(ft=Te.Fa!=null&&0<Te.Fa.length?Te.Kc.c*Te.Kc.i:0))!=ht)Ye=0;else{if(ht>Te.Vb){if(Te.Vb=0,Te.Ec=s(ht),Te.Fc=0,Te.Ec==null){Ye=vi(Te,1,"no memory during frame initialization.");break t}Te.Vb=ht}ht=Te.Ec,yt=Te.Fc,Te.Ac=ht,Te.Bc=yt,yt+=pt,Te.Gd=a(mr,fi),Te.Hd=0,Te.rb=a(tr+1,gn),Te.sb=1,Te.wa=Br?a(Br,Mr):null,Te.Y=0,Te.D.Nb=0,Te.D.wa=Te.wa,Te.D.Y=Te.Y,0<Te.Aa&&(Te.D.Y+=wt),e(!0),Te.oc=ht,Te.pc=yt,yt+=832,Te.ya=a(ar,Oa),Te.aa=0,Te.D.ya=Te.ya,Te.D.aa=Te.aa,Te.Aa==2&&(Te.D.aa+=wt),Te.R=16*wt,Te.B=8*wt,wt=(mr=Fu[Te.L])*Te.R,mr=mr/2*Te.B,Te.sa=ht,Te.ta=yt+wt,Te.qa=Te.sa,Te.ra=Te.ta+16*Ye*Te.R+mr,Te.Ha=Te.qa,Te.Ia=Te.ra+8*Ye*Te.B+mr,Te.$c=0,yt+=nt,Te.mb=ft?ht:null,Te.nb=ft?yt:null,e(yt+ft<=Te.Fc+Te.Vb),Ba(Te),i(Te.Ac,Te.Bc,0,pt),Ye=1}}if(Ye){if(Ue.ka=0,Ue.y=Te.sa,Ue.O=Te.ta,Ue.f=Te.qa,Ue.N=Te.ra,Ue.ea=Te.Ha,Ue.Vd=Te.Ia,Ue.fa=Te.R,Ue.Rc=Te.B,Ue.F=null,Ue.J=0,!Lp){for(Ye=-255;255>=Ye;++Ye)Ip[255+Ye]=0>Ye?-Ye:Ye;for(Ye=-1020;1020>=Ye;++Ye)Pp[1020+Ye]=-128>Ye?-128:127<Ye?127:Ye;for(Ye=-112;112>=Ye;++Ye)Rp[112+Ye]=-16>Ye?-16:15<Ye?15:Ye;for(Ye=-255;510>=Ye;++Ye)Fp[255+Ye]=0>Ye?0:255<Ye?255:Ye;Lp=1}Bi=Kr,Vi=wl,Tl=bl,rl=tn,Sd=Xo,ps=rc,Sp=D,Cp=ie,_h=He,a2=vt,o2=Ce,Su=De,kh=bt,Cd=Yt,Eh=qs,Tp=Po,q0=Ns,Cu=nc,Lo[0]=$0,Lo[1]=Pc,Lo[2]=Va,Lo[3]=Ao,Lo[4]=wd,Lo[5]=Qo,Lo[6]=Ti,Lo[7]=bd,Lo[8]=Io,Lo[9]=Jo,Ca[0]=zs,Ca[1]=vd,Ca[2]=yd,Ca[3]=Fc,Ca[4]=fs,Ca[5]=$s,Ca[6]=wa,Ga[0]=Ua,Ga[1]=Rc,Ga[2]=Lc,Ga[3]=Hs,Ga[4]=Dn,Ga[5]=_l,Ga[6]=_u,Ye=1}else Ye=0}Ye&&(Ye=(function(nn,Ii){for(nn.M=0;nn.M<nn.Va;++nn.M){var Vr,rr=nn.Jc[nn.M&nn.Xb],Ht=nn.m,Ui=nn;for(Vr=0;Vr<Ui.za;++Vr){var Pr=Ht,Jr=Ui,ti=Jr.Ac,Is=Jr.Bc+4*Vr,Qi=Jr.zc,yi=Jr.ya[Jr.aa+Vr];if(Jr.Qa.Bb?yi.$b=be(Pr,Jr.Pa.jb[0])?2+be(Pr,Jr.Pa.jb[2]):be(Pr,Jr.Pa.jb[1]):yi.$b=0,Jr.kc&&(yi.Ad=be(Pr,Jr.Bd)),yi.Za=!be(Pr,145)+0,yi.Za){var ms=yi.Ob,Ps=0;for(Jr=0;4>Jr;++Jr){var pi,cn=Qi[0+Jr];for(pi=0;4>pi;++pi){cn=ey[ti[Is+pi]][cn];for(var bn=d2[be(Pr,cn[0])];0<bn;)bn=d2[2*bn+be(Pr,cn[bn])];cn=-bn,ti[Is+pi]=cn}n(ms,Ps,ti,Is,4),Ps+=4,Qi[0+Jr]=cn}}else cn=be(Pr,156)?be(Pr,128)?1:3:be(Pr,163)?2:0,yi.Ob[0]=cn,i(ti,Is,cn,4),i(Qi,0,cn,4);yi.Dd=be(Pr,142)?be(Pr,114)?be(Pr,183)?1:3:2:0}if(Ui.m.Ka)return vi(nn,7,"Premature end-of-partition0 encountered.");for(;nn.ja<nn.za;++nn.ja){if(Ui=rr,Pr=(Ht=nn).rb[Ht.sb-1],ti=Ht.rb[Ht.sb+Ht.ja],Vr=Ht.ya[Ht.aa+Ht.ja],Is=Ht.kc?Vr.Ad:0)Pr.la=ti.la=0,Vr.Za||(Pr.Na=ti.Na=0),Vr.Hc=0,Vr.Gc=0,Vr.ia=0;else{var mi,_n;if(Pr=ti,ti=Ui,Is=Ht.Pa.Xc,Qi=Ht.ya[Ht.aa+Ht.ja],yi=Ht.pb[Qi.$b],Jr=Qi.ad,ms=0,Ps=Ht.rb[Ht.sb-1],cn=pi=0,i(Jr,ms,0,384),Qi.Za)var Pi=0,Ri=Is[3];else{bn=s(16);var $n=Pr.Na+Ps.Na;if($n=Iu(ti,Is[1],$n,yi.Eb,0,bn,0),Pr.Na=Ps.Na=(0<$n)+0,1<$n)Bi(bn,0,Jr,ms);else{var aa=bn[0]+3>>3;for(bn=0;256>bn;bn+=16)Jr[ms+bn]=aa}Pi=1,Ri=Is[0]}var Bn=15&Pr.la,Hn=15&Ps.la;for(bn=0;4>bn;++bn){var Ji=1&Hn;for(aa=_n=0;4>aa;++aa)Bn=Bn>>1|(Ji=($n=Iu(ti,Ri,$n=Ji+(1&Bn),yi.Sc,Pi,Jr,ms))>Pi)<<7,_n=_n<<2|(3<$n?3:1<$n?2:Jr[ms+0]!=0),ms+=16;Bn>>=4,Hn=Hn>>1|Ji<<7,pi=(pi<<8|_n)>>>0}for(Ri=Bn,Pi=Hn>>4,mi=0;4>mi;mi+=2){for(_n=0,Bn=Pr.la>>4+mi,Hn=Ps.la>>4+mi,bn=0;2>bn;++bn){for(Ji=1&Hn,aa=0;2>aa;++aa)$n=Ji+(1&Bn),Bn=Bn>>1|(Ji=0<($n=Iu(ti,Is[2],$n,yi.Qc,0,Jr,ms)))<<3,_n=_n<<2|(3<$n?3:1<$n?2:Jr[ms+0]!=0),ms+=16;Bn>>=2,Hn=Hn>>1|Ji<<5}cn|=_n<<4*mi,Ri|=Bn<<4<<mi,Pi|=(240&Hn)<<mi}Pr.la=Ri,Ps.la=Pi,Qi.Hc=pi,Qi.Gc=cn,Qi.ia=43690&cn?0:yi.ia,Is=!(pi|cn)}if(0<Ht.L&&(Ht.wa[Ht.Y+Ht.ja]=Ht.gd[Vr.$b][Vr.Za],Ht.wa[Ht.Y+Ht.ja].La|=!Is),Ui.Ka)return vi(nn,7,"Premature end-of-file encountered.")}if(Ba(nn),Ht=Ii,Ui=1,Vr=(rr=nn).D,Pr=0<rr.L&&rr.M>=rr.zb&&rr.M<=rr.Va,rr.Aa==0)t:{if(Vr.M=rr.M,Vr.uc=Pr,$a(rr,Vr),Ui=1,Vr=(_n=rr.D).Nb,Pr=(cn=Fu[rr.L])*rr.R,ti=cn/2*rr.B,bn=16*Vr*rr.R,aa=8*Vr*rr.B,Is=rr.sa,Qi=rr.ta-Pr+bn,yi=rr.qa,Jr=rr.ra-ti+aa,ms=rr.Ha,Ps=rr.Ia-ti+aa,Hn=(Bn=_n.M)==0,pi=Bn>=rr.Va-1,rr.Aa==2&&$a(rr,_n),_n.uc)for(Ji=($n=rr).D.M,e($n.D.uc),_n=$n.yb;_n<$n.Hb;++_n){Pi=_n,Ri=Ji;var Ks=(Qa=(Hi=$n).D).Nb;mi=Hi.R;var Qa=Qa.wa[Qa.Y+Pi],zi=Hi.sa,$i=Hi.ta+16*Ks*mi+16*Pi,oa=Qa.dd,qn=Qa.tc;if(qn!=0)if(e(3<=qn),Hi.L==1)0<Pi&&Tp(zi,$i,mi,qn+4),Qa.La&&Cu(zi,$i,mi,qn),0<Ri&&Eh(zi,$i,mi,qn+4),Qa.La&&q0(zi,$i,mi,qn);else{var la=Hi.B,jo=Hi.qa,il=Hi.ra+8*Ks*la+8*Pi,Rs=Hi.Ha,Hi=Hi.Ia+8*Ks*la+8*Pi;Ks=Qa.ld,0<Pi&&(Cp(zi,$i,mi,qn+4,oa,Ks),a2(jo,il,Rs,Hi,la,qn+4,oa,Ks)),Qa.La&&(Su(zi,$i,mi,qn,oa,Ks),Cd(jo,il,Rs,Hi,la,qn,oa,Ks)),0<Ri&&(Sp(zi,$i,mi,qn+4,oa,Ks),_h(jo,il,Rs,Hi,la,qn+4,oa,Ks)),Qa.La&&(o2(zi,$i,mi,qn,oa,Ks),kh(jo,il,Rs,Hi,la,qn,oa,Ks))}}if(rr.ia&&alert("todo:DitherRow"),Ht.put!=null){if(_n=16*Bn,Bn=16*(Bn+1),Hn?(Ht.y=rr.sa,Ht.O=rr.ta+bn,Ht.f=rr.qa,Ht.N=rr.ra+aa,Ht.ea=rr.Ha,Ht.W=rr.Ia+aa):(_n-=cn,Ht.y=Is,Ht.O=Qi,Ht.f=yi,Ht.N=Jr,Ht.ea=ms,Ht.W=Ps),pi||(Bn-=cn),Bn>Ht.o&&(Bn=Ht.o),Ht.F=null,Ht.J=null,rr.Fa!=null&&0<rr.Fa.length&&_n<Bn&&(Ht.J=Yi(rr,Ht,_n,Bn-_n),Ht.F=rr.mb,Ht.F==null&&Ht.F.length==0)){Ui=vi(rr,3,"Could not decode alpha data.");break t}_n<Ht.j&&(cn=Ht.j-_n,_n=Ht.j,e(!(1&cn)),Ht.O+=rr.R*cn,Ht.N+=rr.B*(cn>>1),Ht.W+=rr.B*(cn>>1),Ht.F!=null&&(Ht.J+=Ht.width*cn)),_n<Bn&&(Ht.O+=Ht.v,Ht.N+=Ht.v>>1,Ht.W+=Ht.v>>1,Ht.F!=null&&(Ht.J+=Ht.v),Ht.ka=_n-Ht.j,Ht.U=Ht.va-Ht.v,Ht.T=Bn-_n,Ui=Ht.put(Ht))}Vr+1!=rr.Ic||pi||(n(rr.sa,rr.ta-Pr,Is,Qi+16*rr.R,Pr),n(rr.qa,rr.ra-ti,yi,Jr+8*rr.B,ti),n(rr.Ha,rr.Ia-ti,ms,Ps+8*rr.B,ti))}if(!Ui)return vi(nn,6,"Output aborted.")}return 1})(Te,Ue)),Ue.bc!=null&&Ue.bc(Ue),Ye&=1}return Ye?(Te.cb=0,Ye):0})(b,K)||(S=b.a)}}else S=b.a}S==0&&he.Oa!=null&&he.Oa.fd&&(S=ka(he.ba))}he=S}de=he!=0?null:11>de?ge.f.RGBA.eb:ge.f.kb.y}else de=null;return de};var ef=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(C,R){for(var A="",F=0;F<4;F++)A+=String.fromCharCode(C[R++]);return A}function d(C,R){return C[R+0]|C[R+1]<<8}function p(C,R){return(C[R+0]|C[R+1]<<8|C[R+2]<<16)>>>0}function g(C,R){return(C[R+0]|C[R+1]<<8|C[R+2]<<16|C[R+3]<<24)>>>0}new l;var m=[0],w=[0],y=[],k=new l,T=t,O=(function(C,R){var A={},F=0,B=!1,te=0,pe=0;if(A.frames=[],!(function(I,H){for(var X=0;X<4;X++)if(I[H+X]!="RIFF".charCodeAt(X))return!0;return!1})(C,R)){for(g(C,R+=4),R+=8;R<C.length;){var Ee=c(C,R),ve=g(C,R+=4);R+=4;var re=ve+(1&ve);switch(Ee){case"VP8 ":case"VP8L":A.frames[F]===void 0&&(A.frames[F]={}),(Q=A.frames[F]).src_off=B?pe:R-8,Q.src_size=te+ve+8,F++,B&&(B=!1,te=0,pe=0);break;case"VP8X":(Q=A.header={}).feature_flags=C[R];var W=R+4;Q.canvas_width=1+p(C,W),W+=3,Q.canvas_height=1+p(C,W),W+=3;break;case"ALPH":B=!0,te=re+8,pe=R-8;break;case"ANIM":(Q=A.header).bgcolor=g(C,R),W=R+4,Q.loop_count=d(C,W),W+=2;break;case"ANMF":var ne,Q;(Q=A.frames[F]={}).offset_x=2*p(C,R),R+=3,Q.offset_y=2*p(C,R),R+=3,Q.width=1+p(C,R),R+=3,Q.height=1+p(C,R),R+=3,Q.duration=p(C,R),R+=3,ne=C[R++],Q.dispose=1&ne,Q.blend=ne>>1&1}Ee!="ANMF"&&(R+=re)}return A}})(T,0);O.response=T,O.rgbaoutput=!0,O.dataurl=!1;var P=O.header?O.header:null,V=O.frames?O.frames:null;if(P){P.loop_counter=P.loop_count,m=[P.canvas_height],w=[P.canvas_width];for(var Y=0;Y<V.length&&V[Y].blend!=0;Y++);}var G=V[0],L=k.WebPDecodeRGBA(T,G.src_off,G.src_size,w,m);G.rgba=L,G.imgwidth=w[0],G.imgheight=m[0];for(var N=0;N<w[0]*m[0]*4;N++)y[N]=L[N];return this.width=w,this.height=m,this.data=y,this}(function(t){var e,r,n,i,s,a,o,l,c,d=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new l,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new a,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new a,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var p=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=I;Object.defineProperty(this,"pdf",{get:function(){return H}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Re){X=!!Re}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(Re){J=!!Re}});var ue=0;Object.defineProperty(this,"posX",{get:function(){return ue},set:function(Re){isNaN(Re)||(ue=Re)}});var we=0;Object.defineProperty(this,"posY",{get:function(){return we},set:function(Re){isNaN(Re)||(we=Re)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Re){var ae;typeof Re=="number"?ae=[Re,Re,Re,Re]:((ae=new Array(4))[0]=Re[0],ae[1]=Re.length>=2?Re[1]:ae[0],ae[2]=Re.length>=3?Re[2]:ae[0],ae[3]=Re.length>=4?Re[3]:ae[1]),c.margin=ae}});var fe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return fe},set:function(Re){fe=Re}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(Re){me=Re}});var be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return be},set:function(Re){be=Re}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Re){Re instanceof d&&(c=Re)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Re){c.path=Re}});var Le=[];Object.defineProperty(this,"ctxStack",{get:function(){return Le},set:function(Re){Le=Re}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Re){var ae;ae=g(Re),this.ctx.fillStyle=ae.style,this.ctx.isFillTransparent=ae.a===0,this.ctx.fillOpacity=ae.a,this.pdf.setFillColor(ae.r,ae.g,ae.b,{a:ae.a}),this.pdf.setTextColor(ae.r,ae.g,ae.b,{a:ae.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Re){var ae=g(Re);this.ctx.strokeStyle=ae.style,this.ctx.isStrokeTransparent=ae.a===0,this.ctx.strokeOpacity=ae.a,ae.a===0?this.pdf.setDrawColor(255,255,255):(ae.a,this.pdf.setDrawColor(ae.r,ae.g,ae.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Re){["butt","round","square"].indexOf(Re)!==-1&&(this.ctx.lineCap=Re,this.pdf.setLineCap(Re))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Re){isNaN(Re)||(this.ctx.lineWidth=Re,this.pdf.setLineWidth(Re))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Re){["bevel","round","miter"].indexOf(Re)!==-1&&(this.ctx.lineJoin=Re,this.pdf.setLineJoin(Re))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Re){isNaN(Re)||(this.ctx.miterLimit=Re,this.pdf.setMiterLimit(Re))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Re){this.ctx.textBaseline=Re}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Re){["right","end","center","left","start"].indexOf(Re)!==-1&&(this.ctx.textAlign=Re)}});var ee=null,Be=null;Object.defineProperty(this,"fontFaces",{get:function(){return Be},set:function(Re){ee=null,Be=Re}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Re){var ae;if(this.ctx.font=Re,(ae=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Re))!==null){var $e=ae[1];ae[2];var qe=ae[3],it=ae[4];ae[5];var oe=ae[6],je=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(it)[2];it=Math.floor(je==="px"?parseFloat(it)*this.pdf.internal.scaleFactor:je==="em"?parseFloat(it)*this.pdf.getFontSize():parseFloat(it)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(it);var Ge=(function(mt){var _t,Xt,Kt=[],Ut=mt.trim();if(Ut==="")return G4;if(Ut in wS)return[wS[Ut]];for(;Ut!=="";){switch(Xt=null,_t=(Ut=_S(Ut)).charAt(0)){case'"':case"'":Xt=Sce(Ut.substring(1),_t);break;default:Xt=Cce(Ut)}if(Xt===null||(Kt.push(Xt[0]),(Ut=_S(Xt[1]))!==""&&Ut.charAt(0)!==","))return G4;Ut=Ut.replace(/^,/,"")}return Kt})(oe);if(this.fontFaces){var Tt=(function(mt,_t){if(ee===null){var Xt=(function(Kt){var Ut=[];return Object.keys(Kt).forEach(function(xr){Kt[xr].forEach(function(Yr){var Ve=null;switch(Yr){case"bold":Ve={family:xr,weight:"bold"};break;case"italic":Ve={family:xr,style:"italic"};break;case"bolditalic":Ve={family:xr,weight:"bold",style:"italic"};break;case"":case"normal":Ve={family:xr}}Ve!==null&&(Ve.ref={name:xr,style:Yr},Ut.push(Ve))})}),Ut})(mt.getFontList());ee=(function(Kt){for(var Ut={},xr=0;xr<Kt.length;++xr){var Yr=W4(Kt[xr]),Ve=Yr.family,Bt=Yr.stretch,zt=Yr.style,nr=Yr.weight;Ut[Ve]=Ut[Ve]||{},Ut[Ve][Bt]=Ut[Ve][Bt]||{},Ut[Ve][Bt][zt]=Ut[Ve][Bt][zt]||{},Ut[Ve][Bt][zt][nr]=Yr}return Ut})(Xt.concat(_t))}return ee})(this.pdf,this.fontFaces),Pe=Ge.map(function(mt){return{family:mt,stretch:"normal",weight:qe,style:$e}}),Ke=(function(mt,_t,Xt){for(var Kt=(Xt=Xt||{}).defaultFontFamily||"times",Ut=Object.assign({},Ece,Xt.genericFontFamilies||{}),xr=null,Yr=null,Ve=0;Ve<_t.length;++Ve)if(Ut[(xr=W4(_t[Ve])).family]&&(xr.family=Ut[xr.family]),mt.hasOwnProperty(xr.family)){Yr=mt[xr.family];break}if(!(Yr=Yr||mt[Kt]))throw new Error("Could not find a font-family for the rule '"+bS(xr)+"' and default family '"+Kt+"'.");if(Yr=(function(Bt,zt){if(zt[Bt])return zt[Bt];var nr=kw[Bt],lr=nr<=kw.normal?-1:1,hr=yS(zt,AL,nr,lr);if(!hr)throw new Error("Could not find a matching font-stretch value for "+Bt);return hr})(xr.stretch,Yr),Yr=(function(Bt,zt){if(zt[Bt])return zt[Bt];for(var nr=NL[Bt],lr=0;lr<nr.length;++lr)if(zt[nr[lr]])return zt[nr[lr]];throw new Error("Could not find a matching font-style for "+Bt)})(xr.style,Yr),!(Yr=(function(Bt,zt){if(zt[Bt])return zt[Bt];if(Bt===400&&zt[500])return zt[500];if(Bt===500&&zt[400])return zt[400];var nr=kce[Bt],lr=yS(zt,IL,nr,Bt<400?-1:1);if(!lr)throw new Error("Could not find a matching font-weight for value "+Bt);return lr})(xr.weight,Yr)))throw new Error("Failed to resolve a font for the rule '"+bS(xr)+"'.");return Yr})(Tt,Pe);this.pdf.setFont(Ke.ref.name,Ke.ref.style)}else{var ot="";(qe==="bold"||parseInt(qe,10)>=700||$e==="bold")&&(ot="bold"),$e==="italic"&&(ot+="italic"),ot.length===0&&(ot="normal");for(var We="",Lt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},St=0;St<Ge.length;St++){if(this.pdf.internal.getFont(Ge[St],ot,{noFallback:!0,disableWarning:!0})!==void 0){We=Ge[St];break}if(ot==="bolditalic"&&this.pdf.internal.getFont(Ge[St],"bold",{noFallback:!0,disableWarning:!0})!==void 0)We=Ge[St],ot="bold";else if(this.pdf.internal.getFont(Ge[St],"normal",{noFallback:!0,disableWarning:!0})!==void 0){We=Ge[St],ot="normal";break}}if(We===""){for(var Pt=0;Pt<Ge.length;Pt++)if(Lt[Ge[Pt]]){We=Lt[Ge[Pt]];break}}We=We===""?"Times":We,this.pdf.setFont(We,ot)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Re){this.ctx.globalCompositeOperation=Re}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Re){this.ctx.globalAlpha=Re}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Re){this.ctx.lineDashOffset=Re,Q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Re){this.ctx.lineDash=Re,Q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Re){this.ctx.ignoreClearRect=!!Re}})};p.prototype.setLineDash=function(I){this.lineDash=I},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){V.call(this,"fill",!1)},p.prototype.stroke=function(){V.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(I,H){if(isNaN(I)||isNaN(H))throw ci.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new a(I,H));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new a(I,H)},p.prototype.closePath=function(){var I=new a(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&Xn(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){I=new a(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(I.x,I.y)},p.prototype.lineTo=function(I,H){if(isNaN(I)||isNaN(H))throw ci.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new a(I,H));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new a(X.x,X.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),V.call(this,null,!0)},p.prototype.quadraticCurveTo=function(I,H,X,J){if(isNaN(X)||isNaN(J)||isNaN(I)||isNaN(H))throw ci.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ue=this.ctx.transform.applyToPoint(new a(X,J)),we=this.ctx.transform.applyToPoint(new a(I,H));this.path.push({type:"qct",x1:we.x,y1:we.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new a(ue.x,ue.y)},p.prototype.bezierCurveTo=function(I,H,X,J,ue,we){if(isNaN(ue)||isNaN(we)||isNaN(I)||isNaN(H)||isNaN(X)||isNaN(J))throw ci.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var fe=this.ctx.transform.applyToPoint(new a(ue,we)),me=this.ctx.transform.applyToPoint(new a(I,H)),be=this.ctx.transform.applyToPoint(new a(X,J));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:be.x,y2:be.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new a(fe.x,fe.y)},p.prototype.arc=function(I,H,X,J,ue,we){if(isNaN(I)||isNaN(H)||isNaN(X)||isNaN(J)||isNaN(ue))throw ci.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(we=!!we,!this.ctx.transform.isIdentity){var fe=this.ctx.transform.applyToPoint(new a(I,H));I=fe.x,H=fe.y;var me=this.ctx.transform.applyToPoint(new a(0,X)),be=this.ctx.transform.applyToPoint(new a(0,0));X=Math.sqrt(Math.pow(me.x-be.x,2)+Math.pow(me.y-be.y,2))}Math.abs(ue-J)>=2*Math.PI&&(J=0,ue=2*Math.PI),this.path.push({type:"arc",x:I,y:H,radius:X,startAngle:J,endAngle:ue,counterclockwise:we})},p.prototype.arcTo=function(I,H,X,J,ue){throw new Error("arcTo not implemented.")},p.prototype.rect=function(I,H,X,J){if(isNaN(I)||isNaN(H)||isNaN(X)||isNaN(J))throw ci.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,H),this.lineTo(I+X,H),this.lineTo(I+X,H+J),this.lineTo(I,H+J),this.lineTo(I,H),this.lineTo(I+X,H),this.lineTo(I,H)},p.prototype.fillRect=function(I,H,X,J){if(isNaN(I)||isNaN(H)||isNaN(X)||isNaN(J))throw ci.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ue={};this.lineCap!=="butt"&&(ue.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ue.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,H,X,J),this.fill(),ue.hasOwnProperty("lineCap")&&(this.lineCap=ue.lineCap),ue.hasOwnProperty("lineJoin")&&(this.lineJoin=ue.lineJoin)}},p.prototype.strokeRect=function(I,H,X,J){if(isNaN(I)||isNaN(H)||isNaN(X)||isNaN(J))throw ci.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");w.call(this)||(this.beginPath(),this.rect(I,H,X,J),this.stroke())},p.prototype.clearRect=function(I,H,X,J){if(isNaN(I)||isNaN(H)||isNaN(X)||isNaN(J))throw ci.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,H,X,J))},p.prototype.save=function(I){I=typeof I!="boolean"||I;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},p.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(H),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(I){var H,X,J,ue;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))H=0,X=0,J=0,ue=0;else{var we=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(we!==null)H=parseInt(we[1]),X=parseInt(we[2]),J=parseInt(we[3]),ue=1;else if((we=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)H=parseInt(we[1]),X=parseInt(we[2]),J=parseInt(we[3]),ue=parseFloat(we[4]);else{if(ue=1,typeof I=="string"&&I.charAt(0)!=="#"){var fe=new bL(I);I=fe.ok?fe.toHex():"#000000"}I.length===4?(H=I.substring(1,2),H+=H,X=I.substring(2,3),X+=X,J=I.substring(3,4),J+=J):(H=I.substring(1,3),X=I.substring(3,5),J=I.substring(5,7)),H=parseInt(H,16),X=parseInt(X,16),J=parseInt(J,16)}}return{r:H,g:X,b:J,a:ue,style:I}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},w=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(I,H,X,J){if(isNaN(H)||isNaN(X)||typeof I!="string")throw ci.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!m.call(this)){var ue=re(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;F.call(this,{text:I,x:H,y:X,scale:we,angle:ue,align:this.textAlign,maxWidth:J})}},p.prototype.strokeText=function(I,H,X,J){if(isNaN(H)||isNaN(X)||typeof I!="string")throw ci.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!w.call(this)){J=isNaN(J)?void 0:J;var ue=re(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;F.call(this,{text:I,x:H,y:X,scale:we,renderingMode:"stroke",angle:ue,align:this.textAlign,maxWidth:J})}},p.prototype.measureText=function(I){if(typeof I!="string")throw ci.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,X=this.pdf.internal.scaleFactor,J=H.internal.getFontSize(),ue=H.getStringUnitWidth(I)*J/H.internal.scaleFactor;return new function(we){var fe=(we=we||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return fe}}),this}({width:ue*=Math.round(96*X/72*1e4)/1e4})},p.prototype.scale=function(I,H){if(isNaN(I)||isNaN(H))throw ci.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new l(I,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},p.prototype.rotate=function(I){if(isNaN(I))throw ci.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new l(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},p.prototype.translate=function(I,H){if(isNaN(I)||isNaN(H))throw ci.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new l(1,0,0,1,I,H);this.ctx.transform=this.ctx.transform.multiply(X)},p.prototype.transform=function(I,H,X,J,ue,we){if(isNaN(I)||isNaN(H)||isNaN(X)||isNaN(J)||isNaN(ue)||isNaN(we))throw ci.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var fe=new l(I,H,X,J,ue,we);this.ctx.transform=this.ctx.transform.multiply(fe)},p.prototype.setTransform=function(I,H,X,J,ue,we){I=isNaN(I)?1:I,H=isNaN(H)?0:H,X=isNaN(X)?0:X,J=isNaN(J)?1:J,ue=isNaN(ue)?0:ue,we=isNaN(we)?0:we,this.ctx.transform=new l(I,H,X,J,ue,we)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(I,H,X,J,ue,we,fe,me,be){var Le=this.pdf.getImageProperties(I),ee=1,Be=1,Re=1,ae=1;J!==void 0&&me!==void 0&&(Re=me/J,ae=be/ue,ee=Le.width/J*me/J,Be=Le.height/ue*be/ue),we===void 0&&(we=H,fe=X,H=0,X=0),J!==void 0&&me===void 0&&(me=J,be=ue),J===void 0&&me===void 0&&(me=Le.width,be=Le.height);for(var $e,qe=this.ctx.transform.decompose(),it=re(qe.rotate.shx),oe=new l,je=(oe=(oe=(oe=oe.multiply(qe.translate)).multiply(qe.skew)).multiply(qe.scale)).applyToRectangle(new o(we-H*Re,fe-X*ae,J*ee,ue*Be)),Ge=k.call(this,je),Tt=[],Pe=0;Pe<Ge.length;Pe+=1)Tt.indexOf(Ge[Pe])===-1&&Tt.push(Ge[Pe]);if(P(Tt),this.autoPaging)for(var Ke=Tt[0],ot=Tt[Tt.length-1],We=Ke;We<ot+1;We++){this.pdf.setPage(We);var Lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],St=We===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],mt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_t=We===1?0:Pt+(We-2)*mt;if(this.ctx.clip_path.length!==0){var Xt=this.path;$e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O($e,this.posX+this.margin[3],-_t+St+this.ctx.prevPageLastElemOffset),Y.call(this,"fill",!0),this.path=Xt}var Kt=JSON.parse(JSON.stringify(je));Kt=O([Kt],this.posX+this.margin[3],-_t+St+this.ctx.prevPageLastElemOffset)[0];var Ut=(We>Ke||We<ot)&&y.call(this);Ut&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lt,mt,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",Kt.x,Kt.y,Kt.w,Kt.h,null,null,it),Ut&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(I,"JPEG",je.x,je.y,je.w,je.h,null,null,it)};var k=function(I,H,X){var J=[];H=H||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ue=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":J.push(Math.floor((I.y+ue)/X)+1);break;case"arc":J.push(Math.floor((I.y+ue-I.radius)/X)+1),J.push(Math.floor((I.y+ue+I.radius)/X)+1);break;case"qct":var we=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);J.push(Math.floor((we.y+ue)/X)+1),J.push(Math.floor((we.y+we.h+ue)/X)+1);break;case"bct":var fe=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);J.push(Math.floor((fe.y+ue)/X)+1),J.push(Math.floor((fe.y+fe.h+ue)/X)+1);break;case"rect":J.push(Math.floor((I.y+ue)/X)+1),J.push(Math.floor((I.y+I.h+ue)/X)+1)}for(var me=0;me<J.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<J[me];)T.call(this);return J},T=function(){var I=this.fillStyle,H=this.strokeStyle,X=this.font,J=this.lineCap,ue=this.lineWidth,we=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=H,this.font=X,this.lineCap=J,this.lineWidth=ue,this.lineJoin=we},O=function(I,H,X){for(var J=0;J<I.length;J++)switch(I[J].type){case"bct":I[J].x2+=H,I[J].y2+=X;case"qct":I[J].x1+=H,I[J].y1+=X;default:I[J].x+=H,I[J].y+=X}return I},P=function(I){return I.sort(function(H,X){return H-X})},V=function(I,H){for(var X,J,ue=this.fillStyle,we=this.strokeStyle,fe=this.lineCap,me=this.lineWidth,be=Math.abs(me*this.ctx.transform.scaleX),Le=this.lineJoin,ee=JSON.parse(JSON.stringify(this.path)),Be=JSON.parse(JSON.stringify(this.path)),Re=[],ae=0;ae<Be.length;ae++)if(Be[ae].x!==void 0)for(var $e=k.call(this,Be[ae]),qe=0;qe<$e.length;qe+=1)Re.indexOf($e[qe])===-1&&Re.push($e[qe]);for(var it=0;it<Re.length;it++)for(;this.pdf.internal.getNumberOfPages()<Re[it];)T.call(this);if(P(Re),this.autoPaging)for(var oe=Re[0],je=Re[Re.length-1],Ge=oe;Ge<je+1;Ge++){this.pdf.setPage(Ge),this.fillStyle=ue,this.strokeStyle=we,this.lineCap=fe,this.lineWidth=be,this.lineJoin=Le;var Tt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pe=Ge===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],We=Ge===1?0:Ke+(Ge-2)*ot;if(this.ctx.clip_path.length!==0){var Lt=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(X,this.posX+this.margin[3],-We+Pe+this.ctx.prevPageLastElemOffset),Y.call(this,I,!0),this.path=Lt}if(J=JSON.parse(JSON.stringify(ee)),this.path=O(J,this.posX+this.margin[3],-We+Pe+this.ctx.prevPageLastElemOffset),H===!1||Ge===0){var St=(Ge>oe||Ge<je)&&y.call(this);St&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Tt,ot,null).clip().discardPath()),Y.call(this,I,H),St&&this.pdf.restoreGraphicsState()}this.lineWidth=me}else this.lineWidth=be,Y.call(this,I,H),this.lineWidth=me;this.path=ee},Y=function(I,H){if((I!=="stroke"||H||!w.call(this))&&(I==="stroke"||H||!m.call(this))){for(var X,J,ue=[],we=this.path,fe=0;fe<we.length;fe++){var me=we[fe];switch(me.type){case"begin":ue.push({begin:!0});break;case"close":ue.push({close:!0});break;case"mt":ue.push({start:me,deltas:[],abs:[]});break;case"lt":var be=ue.length;if(we[fe-1]&&!isNaN(we[fe-1].x)&&(X=[me.x-we[fe-1].x,me.y-we[fe-1].y],be>0)){for(;be>=0;be--)if(ue[be-1].close!==!0&&ue[be-1].begin!==!0){ue[be-1].deltas.push(X),ue[be-1].abs.push(me);break}}break;case"bct":X=[me.x1-we[fe-1].x,me.y1-we[fe-1].y,me.x2-we[fe-1].x,me.y2-we[fe-1].y,me.x-we[fe-1].x,me.y-we[fe-1].y],ue[ue.length-1].deltas.push(X);break;case"qct":var Le=we[fe-1].x+2/3*(me.x1-we[fe-1].x),ee=we[fe-1].y+2/3*(me.y1-we[fe-1].y),Be=me.x+2/3*(me.x1-me.x),Re=me.y+2/3*(me.y1-me.y),ae=me.x,$e=me.y;X=[Le-we[fe-1].x,ee-we[fe-1].y,Be-we[fe-1].x,Re-we[fe-1].y,ae-we[fe-1].x,$e-we[fe-1].y],ue[ue.length-1].deltas.push(X);break;case"arc":ue.push({deltas:[],abs:[],arc:!0}),Array.isArray(ue[ue.length-1].abs)&&ue[ue.length-1].abs.push(me)}}J=H?null:I==="stroke"?"stroke":"fill";for(var qe=!1,it=0;it<ue.length;it++)if(ue[it].arc)for(var oe=ue[it].abs,je=0;je<oe.length;je++){var Ge=oe[je];Ge.type==="arc"?N.call(this,Ge.x,Ge.y,Ge.radius,Ge.startAngle,Ge.endAngle,Ge.counterclockwise,void 0,H,!qe):B.call(this,Ge.x,Ge.y),qe=!0}else if(ue[it].close===!0)this.pdf.internal.out("h"),qe=!1;else if(ue[it].begin!==!0){var Tt=ue[it].start.x,Pe=ue[it].start.y;te.call(this,ue[it].deltas,Tt,Pe),qe=!0}J&&C.call(this,J),H&&R.call(this)}},G=function(I){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-X;case"top":return I+H-X;case"hanging":return I+H-2*X;case"middle":return I+H/2-X;default:return I}},L=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(H,X){this.colorStops.push([H,X])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(I,H,X,J,ue,we,fe,me,be){for(var Le=Ee.call(this,X,J,ue,we),ee=0;ee<Le.length;ee++){var Be=Le[ee];ee===0&&(be?A.call(this,Be.x1+I,Be.y1+H):B.call(this,Be.x1+I,Be.y1+H)),pe.call(this,I,H,Be.x2,Be.y2,Be.x3,Be.y3,Be.x4,Be.y4)}me?R.call(this):C.call(this,fe)},C=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(I,H){this.pdf.internal.out(r(I)+" "+n(H)+" m")},F=function(I){var H;switch(I.align){case"right":case"end":H="right";break;case"center":H="center";break;default:H="left"}var X=this.pdf.getTextDimensions(I.text),J=G.call(this,I.y),ue=L.call(this,J)-X.h,we=this.ctx.transform.applyToPoint(new a(I.x,J)),fe=this.ctx.transform.decompose(),me=new l;me=(me=(me=me.multiply(fe.translate)).multiply(fe.skew)).multiply(fe.scale);for(var be,Le,ee,Be=this.ctx.transform.applyToRectangle(new o(I.x,J,X.w,X.h)),Re=me.applyToRectangle(new o(I.x,ue,X.w,X.h)),ae=k.call(this,Re),$e=[],qe=0;qe<ae.length;qe+=1)$e.indexOf(ae[qe])===-1&&$e.push(ae[qe]);if(P($e),this.autoPaging)for(var it=$e[0],oe=$e[$e.length-1],je=it;je<oe+1;je++){this.pdf.setPage(je);var Ge=je===1?this.posY+this.margin[0]:this.margin[0],Tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pe=this.pdf.internal.pageSize.height-this.margin[2],Ke=Pe-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],We=ot-this.margin[3],Lt=je===1?0:Tt+(je-2)*Ke;if(this.ctx.clip_path.length!==0){var St=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(be,this.posX+this.margin[3],-1*Lt+Ge),Y.call(this,"fill",!0),this.path=St}var Pt=O([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-Lt+Ge+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(Le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Le*I.scale),ee=this.lineWidth,this.lineWidth=ee*I.scale);var mt=this.autoPaging!=="text";if(mt||Pt.y+Pt.h<=Pe){if(mt||Pt.y>=Ge&&Pt.x<=ot){var _t=mt?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||ot-Pt.x)[0],Xt=O([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-Lt+Ge+this.ctx.prevPageLastElemOffset)[0],Kt=mt&&(je>it||je<oe)&&y.call(this);Kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],We,Ke,null).clip().discardPath()),this.pdf.text(_t,Xt.x,Xt.y,{angle:I.angle,align:H,renderingMode:I.renderingMode}),Kt&&this.pdf.restoreGraphicsState()}}else Pt.y<Pe&&(this.ctx.prevPageLastElemOffset+=Pe-Pt.y);I.scale>=.01&&(this.pdf.setFontSize(Le),this.lineWidth=ee)}else I.scale>=.01&&(Le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Le*I.scale),ee=this.lineWidth,this.lineWidth=ee*I.scale),this.pdf.text(I.text,we.x+this.posX,we.y+this.posY,{angle:I.angle,align:H,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(Le),this.lineWidth=ee)},B=function(I,H,X,J){X=X||0,J=J||0,this.pdf.internal.out(r(I+X)+" "+n(H+J)+" l")},te=function(I,H,X){return this.pdf.lines(I,H,X,null,null)},pe=function(I,H,X,J,ue,we,fe,me){this.pdf.internal.out([e(i(X+I)),e(s(J+H)),e(i(ue+I)),e(s(we+H)),e(i(fe+I)),e(s(me+H)),"c"].join(" "))},Ee=function(I,H,X,J){for(var ue=2*Math.PI,we=Math.PI/2;H>X;)H-=ue;var fe=Math.abs(X-H);fe<ue&&J&&(fe=ue-fe);for(var me=[],be=J?-1:1,Le=H;fe>1e-5;){var ee=Le+be*Math.min(fe,we);me.push(ve.call(this,I,Le,ee)),fe-=Math.abs(ee-Le),Le=ee}return me},ve=function(I,H,X){var J=(X-H)/2,ue=I*Math.cos(J),we=I*Math.sin(J),fe=ue,me=-we,be=fe*fe+me*me,Le=be+fe*ue+me*we,ee=4/3*(Math.sqrt(2*be*Le)-Le)/(fe*we-me*ue),Be=fe-ee*me,Re=me+ee*fe,ae=Be,$e=-Re,qe=J+H,it=Math.cos(qe),oe=Math.sin(qe);return{x1:I*Math.cos(H),y1:I*Math.sin(H),x2:Be*it-Re*oe,y2:Be*oe+Re*it,x3:ae*it-$e*oe,y3:ae*oe+$e*it,x4:I*Math.cos(X),y4:I*Math.sin(X)}},re=function(I){return 180*I/Math.PI},W=function(I,H,X,J,ue,we){var fe=I+.5*(X-I),me=H+.5*(J-H),be=ue+.5*(X-ue),Le=we+.5*(J-we),ee=Math.min(I,ue,fe,be),Be=Math.max(I,ue,fe,be),Re=Math.min(H,we,me,Le),ae=Math.max(H,we,me,Le);return new o(ee,Re,Be-ee,ae-Re)},ne=function(I,H,X,J,ue,we,fe,me){var be,Le,ee,Be,Re,ae,$e,qe,it,oe,je,Ge,Tt,Pe,Ke=X-I,ot=J-H,We=ue-X,Lt=we-J,St=fe-ue,Pt=me-we;for(Le=0;Le<41;Le++)it=($e=(ee=I+(be=Le/40)*Ke)+be*((Re=X+be*We)-ee))+be*(Re+be*(ue+be*St-Re)-$e),oe=(qe=(Be=H+be*ot)+be*((ae=J+be*Lt)-Be))+be*(ae+be*(we+be*Pt-ae)-qe),Le==0?(je=it,Ge=oe,Tt=it,Pe=oe):(je=Math.min(je,it),Ge=Math.min(Ge,oe),Tt=Math.max(Tt,it),Pe=Math.max(Pe,oe));return new o(Math.round(je),Math.round(Ge),Math.round(Tt-je),Math.round(Pe-Ge))},Q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,H,X=(I=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:H}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(wr.API),(function(t){var e=function(a){var o,l,c,d,p,g,m,w,y,k;for(l=[],c=0,d=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;d>c;c+=4)(p=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(g=(p=((p=((p=((p=(p-(k=p%85))/85)-(y=p%85))/85)-(w=p%85))/85)-(m=p%85))/85)%85,l.push(g+33,m+33,w+33,y+33,k+33)):l.push(122);return(function(T,O){for(var P=O;P>0;P--)T.pop()})(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(a){var o,l,c,d,p,g=String,m="length",w=255,y="charCodeAt",k="slice",T="replace";for(a[k](-2),a=a[k](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),c=[],d=0,p=(a+=o="uuuuu"[k](a[m]%5||5))[m];p>d;d+=5)l=52200625*(a[y](d)-33)+614125*(a[y](d+1)-33)+7225*(a[y](d+2)-33)+85*(a[y](d+3)-33)+(a[y](d+4)-33),c.push(w&l>>24,w&l>>16,w&l>>8,w&l);return(function(O,P){for(var V=P;V>0;V--)O.pop()})(c,o[m]),g.fromCharCode.apply(g,c)},n=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var l="",c=0;c<a.length;c+=2)l+=String.fromCharCode("0x"+(a[c]+a[c+1]));return l},s=function(a){for(var o=new Uint8Array(a.length),l=a.length;l--;)o[l]=a.charCodeAt(l);return(o=gw(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};t.processDataByFilters=function(a,o){var l=0,c=a||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=n(c),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}})(wr.API),(function(t){t.loadFile=function(e,r,n){return(function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=(function(l,c,d){var p=new XMLHttpRequest,g=0,m=function(w){var y=w.length,k=[],T=String.fromCharCode;for(g=0;g<y;g+=1)k.push(T(255&w.charCodeAt(g)));return k.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?d(m(this.responseText)):d(void 0)}),p.send(null),c&&p.status===200)return m(p.responseText)})(i,s,a)}catch{}return o})(e,r,n)},t.loadImageFile=t.loadFile})(wr.API),(function(t){function e(){return(Dr.html2canvas?Promise.resolve(Dr.html2canvas):Xu(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Dr.DOMPurify?Promise.resolve(Dr.DOMPurify):Xu(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=Xn(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},s=function o(l,c){for(var d=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),p=l.firstChild;p;p=p.nextSibling)c!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||d.appendChild(o(p,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(d.width=l.width,d.height=l.height,d.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(d.value=l.value),d.addEventListener("load",function(){d.scrollTop=l.scrollTop,d.scrollLeft=l.scrollLeft},!0)),d},a=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return(d=d.setProgress(1,o,1,[o])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,l){return o.__proto__=l||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,l){return this.then(function(){switch(l=l||(function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),l){case"string":return this.then(r).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var m=0;m<d.length;++m){var w=d[m],y=w.src.find(function(k){return k.format==="truetype"});y&&c.addFont(y.url,w.ref.name,w.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,c.context2d.save(!0),l(this.prop.container,g)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},a.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(o,l){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||wr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},a.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,p){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(g){return c.updateProgress(null,d),g}).then(d,p).then(function(g){return c.updateProgress(1),g})})},a.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then;var d=this;o&&(o=o.bind(d)),l&&(l=l.bind(d));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:a.convert(Object.assign({},d),Promise.prototype),g=c.call(p,o,l);return a.convert(g,d.__proto__)},a.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},a.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},a.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return a.convert(l,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,wr.getPageSize=function(o,l,c){if(Xn(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var p,g=(""+c).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var w,y=0,k=0;if(m.hasOwnProperty(g))y=m[g][1]/p,k=m[g][0]/p;else try{y=c[1],k=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",k>y&&(w=k,k=y,y=w);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>k&&(w=k,k=y,y=w)}return{width:k,height:y,unit:l,k:p,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(W4):null;var c=new a(l);return l.worker?c:c.from(o).doCallback()}})(wr.API),wr.API.addJS=function(t){return ES=t,this.internal.events.subscribe("postPutResources",function(){yx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(yx+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),kS=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ES+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){yx!==void 0&&kS!==void 0&&this.internal.out("/Names <</JavaScript "+yx+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=n.exec(a);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(s=0;s<c;s++){var p=r.internal.newObject();d.push(p);var g=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,s){var a={title:i,options:s,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var a=n.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var s=0;s<i.children.length;s++)n.count++,this.count_r(n,i.children[s]);return n.count}}])})(wr.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,i,s,a,o){var l,c=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,l=(function(p){for(var g,m=256*p.charCodeAt(4)+p.charCodeAt(5),w=p.length,y={width:0,height:0,numcomponents:1},k=4;k<w;k+=2){if(k+=m,e.indexOf(p.charCodeAt(k+1))!==-1){g=256*p.charCodeAt(k+5)+p.charCodeAt(k+6),y={width:256*p.charCodeAt(k+7)+p.charCodeAt(k+8),height:g,numcomponents:p.charCodeAt(k+9)};break}m=256*p.charCodeAt(k+2)+p.charCodeAt(k+3)}return y})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:i}}return d}})(wr.API),wr.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,s=cce(t,{checkCrc:!0}),a=s.width,o=s.height,l=s.channels,c=s.palette,d=s.depth;i=c&&l===1?(function(L){for(var N=L.width,C=L.height,R=L.data,A=L.palette,F=L.depth,B=!1,te=[],pe=[],Ee=void 0,ve=!1,re=0,W=0;W<A.length;W++){var ne=NE(A[W],4),Q=ne[0],I=ne[1],H=ne[2],X=ne[3];te.push(Q,I,H),X!=null&&(X===0?(re++,pe.length<1&&pe.push(W)):X<255&&(ve=!0))}if(ve||re>1){B=!0,pe=void 0;var J=N*C;Ee=new Uint8Array(J);for(var ue=new DataView(R.buffer),we=0;we<J;we++){var fe=K4(ue,we,F),me=NE(A[fe],4)[3];Ee[we]=me}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:R,alphaBytes:Ee,needSMask:B,palette:te,mask:pe}})(s):l===2||l===4?(function(L){for(var N=L.data,C=L.width,R=L.height,A=L.channels,F=L.depth,B=A===2?"DeviceGray":"DeviceRGB",te=A-1,pe=C*R,Ee=te,ve=pe*Ee,re=1*pe,W=Math.ceil(ve*F/8),ne=Math.ceil(re*F/8),Q=new Uint8Array(W),I=new Uint8Array(ne),H=new DataView(N.buffer),X=new DataView(Q.buffer),J=new DataView(I.buffer),ue=!1,we=0;we<pe;we++){for(var fe=we*A,me=0;me<Ee;me++)FS(X,K4(H,fe+me,F),we*Ee+me,F);var be=K4(H,fe+Ee,F);be<(1<<F)-1&&(ue=!0),FS(J,be,1*we,F)}return{colorSpace:B,colorsPerPixel:te,colorBytes:Q,alphaBytes:I,needSMask:ue}})(s):(function(L){var N=L.data,C=L.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:C,colorsPerPixel:C==="DeviceGray"?1:3,colorBytes:N instanceof Uint8Array?N:new Uint8Array(N.buffer),needSMask:!1}})(s);var p,g,m,w=i,y=w.colorSpace,k=w.colorsPerPixel,T=w.colorBytes,O=w.alphaBytes,P=w.needSMask,V=w.palette,Y=w.mask,G=null;return n!==wr.API.image_compression.NONE&&typeof gw=="function"?(G=(function(L){var N;switch(L){case wr.API.image_compression.FAST:N=11;break;case wr.API.image_compression.MEDIUM:N=13;break;case wr.API.image_compression.SLOW:N=14;break;default:N=12}return N})(n),p=this.decode.FLATE_DECODE,g="/Predictor ".concat(G," "),t=NS(T,a*k,k,n),P&&(m=NS(O,a,1,n))):(p=void 0,g="",t=T,P&&(m=O)),g+="/Colors ".concat(k," /BitsPerComponent ").concat(d," /Columns ").concat(a),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:r,data:t,index:e,filter:p,decodeParameters:g,transparency:Y,palette:V,sMask:m,predictor:G,width:a,height:o,bitsPerComponent:d,colorSpace:y}}},(function(t){t.processGIF89A=function(e,r,n,i){var s=new Ice(e),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},d=new X4(100).encode(c,100);return t.processJPEG.call(this,d,r,n,i)},t.processGIF87A=t.processGIF89A})(wr.API),xc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},xc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){ci.log("bit decode error:"+r)}},xc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}r!==0&&(this.pos+=4-r)}},xc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*i*4,o=s>>4,l=15&s,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},xc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},xc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,d=n*this.width*4+4*i;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=c}this.pos+=t}},xc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&r)/r*255|0,c=(a>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},xc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},xc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=a}},xc.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,r,n,i){var s=new xc(e,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new X4(100).encode(l,100);return t.processJPEG.call(this,c,r,n,i)}})(wr.API),jS.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,r,n,i){var s=new jS(e),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new X4(100).encode(l,100);return t.processJPEG.call(this,c,r,n,i)}})(wr.API),wr.API.processRGBA=function(t,e,r){for(var n=t.data,i=n.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,l=0,c=0;c<i;c+=4){var d=n[c],p=n[c+1],g=n[c+2],m=n[c+3];s[o++]=d,s[o++]=p,s[o++]=g,a[l++]=m}var w=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:w,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},wr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},e1=wr.API,wx=e1.getCharWidthsArray=function(t,e){var r,n,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=c.fof?c.fof:1,p=e.doKerning!==!1,g=0,m=t.length,w=0,y=o[0]||l,k=[];for(r=0;r<m;r++)n=t.charCodeAt(r),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+a*(1e3/s)||0)/1e3):(g=p&&Xn(c[n])==="object"&&!isNaN(parseInt(c[n][w],10))?c[n][w]/d:0,k.push((o[n]||y)/l+g)),w=n;return k},SS=e1.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return e1.processArabic&&(t=e1.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,i)/r:wx.apply(this,arguments).reduce(function(s,a){return s+a},0)},CS=function(t,e,r,n){for(var i=[],s=0,a=t.length,o=0;s!==a&&o+e[s]<r;)o+=e[s],s++;i.push(t.slice(0,s));var l=s;for(o=0;s!==a;)o+e[s]>n&&(i.push(t.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},TS=function(t,e,r){r||(r={});var n,i,s,a,o,l,c,d=[],p=[d],g=r.textIndent||0,m=0,w=0,y=t.split(" "),k=wx.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?y[0].length+2:r.lineIndent||0){var T=Array(l).join(" "),O=[];y.map(function(V){(V=V.split(/\s*\n/)).length>1?O=O.concat(V.map(function(Y,G){return(G&&Y.length?`
`:"")+Y})):O.push(V[0])}),y=O,l=SS.apply(this,[T,r])}for(s=0,a=y.length;s<a;s++){var P=0;if(n=y[s],l&&n[0]==`
`&&(n=n.substr(1),P=1),g+m+(w=(i=wx.apply(this,[n,r])).reduce(function(V,Y){return V+Y},0))>e||P){if(w>e){for(o=CS.apply(this,[n,i,e-(g+m),e]),d.push(o.shift()),d=[o.pop()];o.length;)p.push([o.shift()]);w=i.slice(n.length-(d[0]?d[0].length:0)).reduce(function(V,Y){return V+Y},0)}else d=[n];p.push(d),g=w+l,m=k}else d.push(n),g+=m+w,m=k}return c=l?function(V,Y){return(Y?T:"")+V.join(" ")}:function(V){return V.join(" ")},p.map(c)},e1.splitTextToSize=function(t,e,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle),g="Unicode";return p.metadata[g]?{widths:p.metadata[g].widths||{0:1},kerning:p.metadata[g].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=r.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(TS.apply(this,[n[o],a,s]));return c},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},s=0;s<16;s++)n[r[s]]=e[s],i[e[s]]=r[s];var a=function(g){return"0x"+parseInt(g,10).toString(16)},o=t.__fontmetrics__.compress=function(g){var m,w,y,k,T=["{"];for(var O in g){if(m=g[O],isNaN(parseInt(O,10))?w="'"+O+"'":(O=parseInt(O,10),w=(w=a(O).slice(2)).slice(0,-1)+i[w.slice(-1)]),typeof m=="number")m<0?(y=a(m).slice(3),k="-"):(y=a(m).slice(2),k=""),y=k+y.slice(0,-1)+i[y.slice(-1)];else{if(Xn(m)!=="object")throw new Error("Don't know what to do with value type "+Xn(m)+".");y=o(m)}T.push(w+y)}return T.push("}"),T.join("")},l=t.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,w,y,k,T={},O=1,P=T,V=[],Y="",G="",L=g.length-1,N=1;N<L;N+=1)(k=g[N])=="'"?m?(y=m.join(""),m=void 0):m=[]:m?m.push(k):k=="{"?(V.push([P,y]),P={},y=void 0):k=="}"?((w=V.pop())[0][w[1]]=P,y=void 0,P=w[0]):k=="-"?O=-1:y===void 0?n.hasOwnProperty(k)?(Y+=n[k],y=parseInt(Y,16)*O,O=1,Y=""):Y+=k:n.hasOwnProperty(k)?(G+=n[k],P[y]=parseInt(G,16)*O,O=1,y=void 0,G=""):G+=k;return T},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(g){var m=g.font,w=p.Unicode[m.postScriptName];w&&(m.metadata.Unicode={},m.metadata.Unicode.widths=w.widths,m.metadata.Unicode.kerning=w.kerning);var y=d.Unicode[m.postScriptName];y&&(m.metadata.Unicode.encoding=y,m.encoding=y.codePages[0])}])})(wr.API),(function(t){var e=function(r){for(var n=r.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=r.charCodeAt(s);return i};t.API.events.push(["addFont",function(r){var n=void 0,i=r.font,s=r.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Hx(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,n)}}])})(wr),wr.API.addSvgAsImage=function(t,e,r,n,i,s,a,o){if(isNaN(e)||isNaN(r))throw ci.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw ci.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=n,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(Dr.canvg?Promise.resolve(Dr.canvg):Xu(()=>import("./index.es-BT0hRJM4.js"),[])).catch(function(g){return Promise.reject(new Error("Could not load canvg: "+g))}).then(function(g){return g.default?g.default:g}).then(function(g){return g.fromString(c,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(d)}).then(function(){p.addImage(l.toDataURL("image/jpeg",1),e,r,n,i,a,o)})},wr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,r);return this},wr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,d=0,p=0;function g(w,y){var k,T=!1;for(k=0;k<w.length;k+=1)w[k]===y&&(T=!0);return T}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=o.length;for(p=0;p<m;p+=1)r[o[p]].value=r[o[p]].defaultValue,r[o[p]].explicitSet=!1}if(Xn(t)==="object"){for(i in t)if(s=t[i],g(o,i)&&s!==void 0){if(r[i].type==="boolean"&&typeof s=="boolean")r[i].value=s;else if(r[i].type==="name"&&g(r[i].valueSet,s))r[i].value=s;else if(r[i].type==="integer"&&Number.isInteger(s))r[i].value=s;else if(r[i].type==="array"){for(c=0;c<s.length;c+=1)if(n=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(d=0;d<s[c].length;d+=1)typeof s[c][d]!="number"&&(n=!1);n===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}r[i].value="["+l.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var w,y=[];for(w in r)r[w].explicitSet===!0&&(r[w].type==="name"?y.push("/"+w+" /"+r[w].value):y.push("/"+w+" "+r[w].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+a.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}})(wr.API),(function(t){var e=t.API,r=e.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],p=0,g=s.length;p<g;++p){if(o=a.metadata.characterToGlyph(s.charCodeAt(p)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(p),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(c[4-o.length],o)}return d.join("")},n=function(s){var a,o,l,c,d,p,g;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,g=(o=Object.keys(s).sort(function(m,w){return m-w})).length;p<g;p++)a=o[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(c=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var p=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),m="",w=0;w<g.length;w++)m+=String.fromCharCode(g[w]);var y=c();d({data:m,addLength1:!0,objectId:y}),l("endobj");var k=c();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:k}),l("endobj");var T=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+c1(o.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var O=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+c1(o.fontName)),l("/FontDescriptor "+T+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+k+" 0 R"),l("/BaseFont /"+c1(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+O+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var p=o.metadata.rawData,g="",m=0;m<p.length;m++)g+=String.fromCharCode(p[m]);var w=c();d({data:g,addLength1:!0,objectId:w}),l("endobj");var y=c();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var k=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+w+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+c1(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var T=0;T<o.metadata.hmtx.widths.length;T++)o.metadata.hmtx.widths[T]=parseInt(o.metadata.hmtx.widths[T]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+c1(o.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",l=s.x,c=s.y,d=s.options||{},p=s.mutex||{},g=p.pdfEscape,m=p.activeFontKey,w=p.fonts,y=m,k="",T=0,O="",P=w[y].encoding;if(w[y].encoding!=="Identity-H")return{text:o,x:l,y:c,options:d,mutex:p};for(O=o,y=m,Array.isArray(o)&&(O=o[0]),T=0;T<O.length;T+=1)w[y].metadata.hasOwnProperty("cmap")&&(a=w[y].metadata.cmap.unicode.codeMap[O[T].charCodeAt(0)]),a||O[T].charCodeAt(0)<256&&w[y].metadata.hasOwnProperty("Unicode")?k+=O[T]:k+="";var V="";return parseInt(y.slice(1))<14||P==="WinAnsiEncoding"?V=g(k,y).split("").map(function(Y){return Y.charCodeAt(0).toString(16)}).join(""):P==="Identity-H"&&(V=r(k,w[y])),p.isHex=!0,{text:V,x:l,y:c,options:d,mutex:p}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([i(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(i(Object.assign({},l,{text:a[c]})).text);s.text=o}else s.text=i(Object.assign({},l,{text:a})).text}])})(wr),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(wr.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var i,s,a,o,l,c,d,p=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],w={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],T=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,P=0;this.__bidiEngine__={};var V=function(A){var F=A.charCodeAt(),B=F>>8,te=y[B];return te!==void 0?p[256*te+(255&F)]:B===252||B===253?"AL":T.test(B)?"L":B===8?"R":"N"},Y=function(A){for(var F,B=0;B<A.length;B++){if((F=V(A.charAt(B)))==="L")return!1;if(F==="R")return!0}return!1},G=function(A,F,B,te){var pe,Ee,ve,re,W=F[te];switch(W){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"N":case"AN":break;case"EN":O&&(W="AN");break;case"AL":O=!0,W="R";break;case"WS":case"BN":W="N";break;case"CS":te<1||te+1>=F.length||(pe=B[te-1])!=="EN"&&pe!=="AN"||(Ee=F[te+1])!=="EN"&&Ee!=="AN"?W="N":O&&(Ee="AN"),W=Ee===pe?Ee:"N";break;case"ES":W=(pe=te>0?B[te-1]:"B")==="EN"&&te+1<F.length&&F[te+1]==="EN"?"EN":"N";break;case"ET":if(te>0&&B[te-1]==="EN"){W="EN";break}if(O){W="N";break}for(ve=te+1,re=F.length;ve<re&&F[ve]==="ET";)ve++;W=ve<re&&F[ve]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(re=F.length,ve=te+1;ve<re&&F[ve]==="NSM";)ve++;if(ve<re){var ne=A[te],Q=ne>=1425&&ne<=2303||ne===64286;if(pe=F[ve],Q&&(pe==="R"||pe==="AL")){W="R";break}}}W=te<1||(pe=F[te-1])==="B"?"N":B[te-1];break;case"B":O=!1,i=!0,W=P;break;case"S":s=!0,W="N"}return W},L=function(A,F,B){var te=A.split("");return B&&N(te,B,{hiLevel:P}),te.reverse(),F&&F.reverse(),te.join("")},N=function(A,F,B){var te,pe,Ee,ve,re,W=-1,ne=A.length,Q=0,I=[],H=P?m:g,X=[];for(O=!1,i=!1,s=!1,pe=0;pe<ne;pe++)X[pe]=V(A[pe]);for(Ee=0;Ee<ne;Ee++){if(re=Q,I[Ee]=G(A,X,I,Ee),te=240&(Q=H[re][w[I[Ee]]]),Q&=15,F[Ee]=ve=H[Q][5],te>0)if(te===16){for(pe=W;pe<Ee;pe++)F[pe]=1;W=-1}else W=-1;if(H[Q][6])W===-1&&(W=Ee);else if(W>-1){for(pe=W;pe<Ee;pe++)F[pe]=ve;W=-1}X[Ee]==="B"&&(F[Ee]=0),B.hiLevel|=ve}s&&(function(J,ue,we){for(var fe=0;fe<we;fe++)if(J[fe]==="S"){ue[fe]=P;for(var me=fe-1;me>=0&&J[me]==="WS";me--)ue[me]=P}})(X,F,ne)},C=function(A,F,B,te,pe){if(!(pe.hiLevel<A)){if(A===1&&P===1&&!i)return F.reverse(),void(B&&B.reverse());for(var Ee,ve,re,W,ne=F.length,Q=0;Q<ne;){if(te[Q]>=A){for(re=Q+1;re<ne&&te[re]>=A;)re++;for(W=Q,ve=re-1;W<ve;W++,ve--)Ee=F[W],F[W]=F[ve],F[ve]=Ee,B&&(Ee=B[W],B[W]=B[ve],B[ve]=Ee);Q=re}Q++}}},R=function(A,F,B){var te=A.split(""),pe={hiLevel:P};return B||(B=[]),N(te,B,pe),(function(Ee,ve,re){if(re.hiLevel!==0&&d)for(var W,ne=0;ne<Ee.length;ne++)ve[ne]===1&&(W=k.indexOf(Ee[ne]))>=0&&(Ee[ne]=k[W+1])})(te,B,pe),C(2,te,F,B,pe),C(1,te,F,B,pe),te.join("")};return this.__bidiEngine__.doBidiReorder=function(A,F,B){if((function(pe,Ee){if(Ee)for(var ve=0;ve<pe.length;ve++)Ee[ve]=ve;o===void 0&&(o=Y(pe)),c===void 0&&(c=Y(pe))})(A,F),a||!l||c)if(a&&l&&o^c)P=o?1:0,A=L(A,F,B);else if(!a&&l&&c)P=o?1:0,A=R(A,F,B),A=L(A,F);else if(!a||o||l||c){if(a&&!l&&o^c)A=L(A,F),o?(P=0,A=R(A,F,B)):(P=1,A=R(A,F,B),A=L(A,F));else if(a&&o&&!l&&c)P=1,A=R(A,F,B),A=L(A,F);else if(!a&&!l&&o^c){var te=d;o?(P=1,A=R(A,F,B),P=0,d=!1,A=R(A,F,B),d=te):(P=0,A=R(A,F,B),A=L(A,F),P=1,d=!1,A=R(A,F,B),d=te,A=L(A,F))}}else P=0,A=R(A,F,B);else P=o?1:0,A=R(A,F,B);return A},this.__bidiEngine__.setOptions=function(A){A&&(a=A.isInputVisual,l=A.isOutputVisual,o=A.isInputRtl,c=A.isOutputRtl,d=A.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([r.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([r.doBidiReorder(i[o])]);n.text=a}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])})(wr),wr.API.TTFFont=(function(){function t(e){var r;if(this.rawData=e,r=this.contents=new N0(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new qce(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Pce(this.contents),this.head=new Fce(this),this.name=new Mce(this),this.cmap=new RL(this),this.toUnicode={},this.hhea=new Lce(this),this.maxp=new Bce(this),this.hmtx=new Vce(this),this.post=new Dce(this),this.os2=new jce(this),this.loca=new Hce(this),this.glyf=new Uce(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,c;for(c=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t})();var Ic,N0=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,i;for(i=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(e.charCodeAt(r)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,i,s,a,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*i+16777216*s+65536*a+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,i,s;for(s=[],n=0,i=e.length;n<i;n++)r=e[n],s.push(this.writeByte(r));return s},t})(),Pce=(function(){var t;function e(r){var n,i,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,i,s,a,o,l,c,d,p,g,m,w,y;for(y in m=Object.keys(r).length,l=Math.log(2),p=16*Math.floor(Math.log(m)/l),a=Math.floor(p/l),d=16*m-p,(i=new N0).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(a),i.writeShort(d),s=16*m,c=i.pos+s,o=null,w=[],r)for(g=r[y],i.writeString(y),i.writeInt(t(g)),i.writeInt(c),i.writeInt(g.length),w=w.concat(g),y==="head"&&(o=c),c+=g.length;c%4;)w.push(0),c++;return i.write(w),n=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(n),i.data},t=function(r){var n,i,s,a;for(r=FL.call(r);r.length%4;)r.push(0);for(s=new N0(r),i=0,n=0,a=r.length;n<a;n=n+=4)i+=s.readUInt32();return 4294967295&i},e})(),Rce={}.hasOwnProperty,vu=function(t,e){for(var r in e)Rce.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Ic=(function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var Fce=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vu(t,Ic),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new N0).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t})(),DS=(function(){function t(e,r){var n,i,s,a,o,l,c,d,p,g,m,w,y,k,T,O,P;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),g=m/2,e.pos+=6,s=(function(){var V,Y;for(Y=[],l=V=0;0<=g?V<g:V>g;l=0<=g?++V:--V)Y.push(e.readUInt16());return Y})(),e.pos+=2,y=(function(){var V,Y;for(Y=[],l=V=0;0<=g?V<g:V>g;l=0<=g?++V:--V)Y.push(e.readUInt16());return Y})(),c=(function(){var V,Y;for(Y=[],l=V=0;0<=g?V<g:V>g;l=0<=g?++V:--V)Y.push(e.readUInt16());return Y})(),d=(function(){var V,Y;for(Y=[],l=V=0;0<=g?V<g:V>g;l=0<=g?++V:--V)Y.push(e.readUInt16());return Y})(),i=(this.length-e.pos+this.offset)/2,o=(function(){var V,Y;for(Y=[],l=V=0;0<=i?V<i:V>i;l=0<=i?++V:--V)Y.push(e.readUInt16());return Y})(),l=T=0,P=s.length;T<P;l=++T)for(k=s[l],n=O=w=y[l];w<=k?O<=k:O>=k;n=w<=k?++O:--O)d[l]===0?a=n+c[l]:(a=o[d[l]/2+(n-w)-(g-l)]||0)!==0&&(a+=c[l]),this.codeMap[n]=65535&a}e.pos=p}return t.encode=function(e,r){var n,i,s,a,o,l,c,d,p,g,m,w,y,k,T,O,P,V,Y,G,L,N,C,R,A,F,B,te,pe,Ee,ve,re,W,ne,Q,I,H,X,J,ue,we,fe,me,be,Le,ee;switch(te=new N0,a=Object.keys(e).sort(function(Be,Re){return Be-Re}),r){case"macroman":for(y=0,k=(function(){var Be=[];for(w=0;w<256;++w)Be.push(0);return Be})(),O={0:0},s={},pe=0,W=a.length;pe<W;pe++)O[me=e[i=a[pe]]]==null&&(O[me]=++y),s[i]={old:e[i],new:O[e[i]]},k[i]=O[e[i]];return te.writeUInt16(1),te.writeUInt16(0),te.writeUInt32(12),te.writeUInt16(0),te.writeUInt16(262),te.writeUInt16(0),te.write(k),{charMap:s,subtable:te.data,maxGlyphID:y+1};case"unicode":for(F=[],p=[],P=0,O={},n={},T=c=null,Ee=0,ne=a.length;Ee<ne;Ee++)O[Y=e[i=a[Ee]]]==null&&(O[Y]=++P),n[i]={old:Y,new:O[Y]},o=O[Y]-i,T!=null&&o===c||(T&&p.push(T),F.push(i),c=o),T=i;for(T&&p.push(T),p.push(65535),F.push(65535),R=2*(C=F.length),N=2*Math.pow(Math.log(C)/Math.LN2,2),g=Math.log(N/2)/Math.LN2,L=2*C-N,l=[],G=[],m=[],w=ve=0,Q=F.length;ve<Q;w=++ve){if(A=F[w],d=p[w],A===65535){l.push(0),G.push(0);break}if(A-(B=n[A].new)>=32768)for(l.push(0),G.push(2*(m.length+C-w)),i=re=A;A<=d?re<=d:re>=d;i=A<=d?++re:--re)m.push(n[i].new);else l.push(B-A),G.push(0)}for(te.writeUInt16(3),te.writeUInt16(1),te.writeUInt32(12),te.writeUInt16(4),te.writeUInt16(16+8*C+2*m.length),te.writeUInt16(0),te.writeUInt16(R),te.writeUInt16(N),te.writeUInt16(g),te.writeUInt16(L),we=0,I=p.length;we<I;we++)i=p[we],te.writeUInt16(i);for(te.writeUInt16(0),fe=0,H=F.length;fe<H;fe++)i=F[fe],te.writeUInt16(i);for(be=0,X=l.length;be<X;be++)o=l[be],te.writeUInt16(o);for(Le=0,J=G.length;Le<J;Le++)V=G[Le],te.writeUInt16(V);for(ee=0,ue=m.length;ee<ue;ee++)y=m[ee],te.writeUInt16(y);return{charMap:n,subtable:te.data,maxGlyphID:P+1}}},t})(),RL=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vu(t,Ic),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new DS(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,i;return r==null&&(r="macroman"),n=DS.encode(e,r),(i=new N0).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t})(),Lce=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vu(t,Ic),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),jce=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vu(t,Ic),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),Dce=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vu(t,Ic),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)r=e.readByte(),i.push(this.names.push(e.readString(r)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var a,o,l;for(l=[],s=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;s=0<=o?++a:--a)l.push(e.readUInt32());return l}).call(this)}},t})(),Oce=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Mce=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vu(t,Ic),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,i,s,a,o,l,c,d,p,g;for(e.pos=this.offset,e.readShort(),r=e.readShort(),o=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(l={},s=d=0,p=n.length;d<p;s=++d)i=n[s],e.pos=i.offset,c=e.readString(i.length),a=new Oce(c,i),l[g=i.nameID]==null&&(l[g]=[]),l[i.nameID].push(a);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t})(),Bce=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vu(t,Ic),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),Vce=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vu(t,Ic),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,i,s,a,o,l;for(e.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var c,d;for(d=[],r=c=0;0<=i?c<i:c>i;r=0<=i?++c:--c)d.push(e.readInt16());return d})(),this.widths=(function(){var c,d,p,g;for(g=[],c=0,d=(p=this.metrics).length;c<d;c++)s=p[c],g.push(s.advance);return g}).call(this),n=this.widths[this.widths.length-1],l=[],r=a=0;0<=i?a<i:a>i;r=0<=i?++a:--a)l.push(this.widths.push(n));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),FL=[].slice,Uce=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vu(t,Ic),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,i,s,a,o,l,c,d,p;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,a=(o=new N0(r.read(i))).readShort(),c=o.readShort(),p=o.readShort(),l=o.readShort(),d=o.readShort(),this.cache[e]=a===-1?new $ce(o,c,p,l,d):new zce(o,a,c,p,l,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var i,s,a,o,l;for(a=[],s=[],o=0,l=r.length;o<l;o++)i=e[r[o]],s.push(a.length),i&&(a=a.concat(i.encode(n)));return s.push(a.length),{table:a,offsets:s}},t})(),zce=(function(){function t(e,r,n,i,s,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),$ce=(function(){function t(e,r,n,i,s){var a,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new N0(FL.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t})(),Hce=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vu(t,Ic),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),i=0,s=0,a=0;a<n.length;++a)if(n[a]=i,s<r.length&&r[s]==a){++s,n[a]=i;var o=this.offsets[a],l=this.offsets[a+1]-o;l>0&&(i+=l)}for(var c=new Array(4*n.length),d=0;d<n.length;++d)c[4*d+3]=255&n[d],c[4*d+2]=(65280&n[d])>>8,c[4*d+1]=(16711680&n[d])>>16,c[4*d]=(4278190080&n[d])>>24;return c},t})(),qce=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,i,s;for(r in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=i[n];return e},t.prototype.glyphsFor=function(e){var r,n,i,s,a,o,l;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in r=[],i)(n=i[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in l=this.glyphsFor(r))n=l[s],i[s]=n;return i},t.prototype.encode=function(e,r){var n,i,s,a,o,l,c,d,p,g,m,w,y,k,T;for(i in n=RL.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),m={0:0},T=n.charMap)m[(l=T[i]).old]=l.new;for(w in g=n.maxGlyphID,a)w in m||(m[w]=g++);return d=(function(O){var P,V;for(P in V={},O)V[O[P]]=P;return V})(m),p=Object.keys(d).sort(function(O,P){return O-P}),y=(function(){var O,P,V;for(V=[],O=0,P=p.length;O<P;O++)o=p[O],V.push(d[o]);return V})(),s=this.font.glyf.encode(a,y,m),c=this.font.loca.encode(s.offsets,y),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},t})();wr.API.PDFObject=(function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,i,s,a;if(Array.isArray(r))return"["+(function(){var o,l,c;for(c=[],o=0,l=r.length;o<l;o++)n=r[o],c.push(e.convert(n));return c})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in s=["<<"],r)a=r[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+r},e})();function LL(t,e,r,n,i){n=n||{};var s=1.15,a=i.internal.scaleFactor,o=i.internal.getFontSize()/a,l=i.getLineHeightFactor?i.getLineHeightFactor():s,c=o*l,d=/\r\n|\r|\n/g,p="",g=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(p=typeof t=="string"?t.split(d):t,g=p.length||1),r+=o*(2-s),n.valign==="middle"?r-=g/2*c:n.valign==="bottom"&&(r-=g*c),n.halign==="center"||n.halign==="right"){var m=o;if(n.halign==="center"&&(m*=.5),p&&g>=1){for(var w=0;w<p.length;w++)i.text(p[w],e-i.getStringUnitWidth(p[w])*m,r),r+=c;return i}e-=i.getStringUnitWidth(t)*m}return n.halign==="justify"?i.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(t,e,r),i}var OS={},N1=(function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:OS=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,i,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,l=a.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(i=this.jsPDFDocument).setTextColor.apply(i,d),d=t.unifyColor(e.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,i,s){return this.jsPDFDocument.rect(e,r,n,i,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return OS||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t})(),Ew=function(t,e){return Ew=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Ew(t,e)};function jL(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ew(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var DL=(function(t){jL(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e})(Array);function Wce(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Gce(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Hv(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],i=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,a){return Math.max(s,a)},0);return i}function OL(t,e,r,n){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:s});var a=ML(i,!1);a&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,a)}function ML(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function $5(t,e){var r,n,i,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function BL(t,e){var r=$5(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function Kce(t,e,r,n,i){var s={},a=1.3333333333333333,o=Y4(e,function(P){return i.getComputedStyle(P).backgroundColor});o!=null&&(s.fillColor=o);var l=Y4(e,function(P){return i.getComputedStyle(P).color});l!=null&&(s.textColor=l);var c=Yce(n,r);c&&(s.cellPadding=c);var d="borderTopColor",p=a*r,g=n.borderTopWidth;if(n.borderBottomWidth===g&&n.borderRightWidth===g&&n.borderLeftWidth===g){var m=(parseFloat(g)||0)/p;m&&(s.lineWidth=m)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/p,right:(parseFloat(n.borderRightWidth)||0)/p,bottom:(parseFloat(n.borderBottomWidth)||0)/p,left:(parseFloat(n.borderLeftWidth)||0)/p},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var w=Y4(e,function(P){return i.getComputedStyle(P)[d]});w!=null&&(s.lineColor=w);var y=["left","right","center","justify"];y.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),y=["middle","bottom","top"],y.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var k=parseInt(n.fontSize||"");isNaN(k)||(s.fontSize=k/a);var T=Xce(n);T&&(s.fontStyle=T);var O=(n.fontFamily||"").toLowerCase();return t.indexOf(O)!==-1&&(s.font=O),s}function Xce(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function Y4(t,e){var r=VL(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function VL(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:VL(t.parentElement,e):r}function Yce(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(o){return parseInt(o||"0")/n}),a=$5(s,0);return i>a.top&&(a.top=i),i>a.bottom&&(a.bottom=i),a}function UL(t,e,r,n,i){var s,a;n===void 0&&(n=!1),i===void 0&&(i=!1);var o;typeof e=="string"?o=r.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),c=t.scaleFactor(),d=[],p=[],g=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:p,foot:g};for(var m=0;m<o.rows.length;m++){var w=o.rows[m],y=(a=(s=w?.parentElement)===null||s===void 0?void 0:s.tagName)===null||a===void 0?void 0:a.toLowerCase(),k=Qce(l,c,r,w,n,i);k&&(y==="thead"?d.push(k):y==="tfoot"?g.push(k):p.push(k))}return{head:d,body:p,foot:g}}function Qce(t,e,r,n,i,s){for(var a=new DL(n),o=0;o<n.cells.length;o++){var l=n.cells[o],c=r.getComputedStyle(l);if(i||c.display!=="none"){var d=void 0;s&&(d=Kce(t,l,e,c,r)),a.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:Jce(l)})}}var p=r.getComputedStyle(n);if(a.length>0&&(i||p.display!=="none"))return a}function Jce(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function Zce(t,e,r){for(var n=0,i=[t,e,r];n<i.length;n++){var s=i[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Wu(t,e,r,n,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}function zL(t,e){var r=new N1(t),n=r.getDocumentOptions(),i=r.getGlobalOptions();Zce(i,n,e);var s=Wu({},i,n,e),a;typeof window<"u"&&(a=window);var o=eue(i,n,e),l=tue(i,n,e),c=rue(r,s),d=iue(r,s,a);return{id:e.tableId,content:d,hooks:l,styles:o,settings:c}}function eue(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var c=t[l],d=e[l],p=r[l];n.columnStyles=Wu({},c,d,p)}else{var g=[t,e,r],m=g.map(function(w){return w[l]||{}});n[l]=Wu({},m[0],m[1],m[2])}},s=0,a=Object.keys(n);s<a.length;s++){var o=a[s];i(o)}return n}function tue(t,e,r){for(var n=[t,e,r],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,a=n;s<a.length;s++){var o=a[s];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function rue(t,e){var r,n,i,s,a,o,l,c,d,p,g,m,w=$5(e.margin,40/t.scaleFactor()),y=(r=nue(t,e.startY))!==null&&r!==void 0?r:w.top,k;e.showFoot===!0?k="everyPage":e.showFoot===!1?k="never":k=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var T;e.showHead===!0?T="everyPage":e.showHead===!1?T="never":T=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var O=(s=e.useCss)!==null&&s!==void 0?s:!1,P=e.theme||(O?"plain":"striped"),V=!!e.horizontalPageBreak,Y=(a=e.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:O,theme:P,startY:y,margin:w,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=e.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:T,showFoot:k,tableLineWidth:(p=e.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(g=e.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:V,horizontalPageBreakRepeat:Y,horizontalPageBreakBehaviour:(m=e.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function nue(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),i=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var a=r.startPageNumber+r.pageNumber-1;s=a===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&r?.finalY!=null?r.finalY+20/n:null}function iue(t,e,r){var n=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var a=e.includeHiddenHtml;if(r){var o=UL(t,e.html,r,a,e.useCss)||{};n=o.head||n,i=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||sue(n,i,s);return{columns:l,head:n,body:i,foot:s}}function sue(t,e,r){var n=t[0]||e[0]||r[0]||[],i=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var a=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(a=o?.colSpan||1);for(var l=0;l<a;l++){var c=void 0;Array.isArray(n)?c=i.length:c=s+(l>0?"_".concat(l):"");var d={dataKey:c};i.push(d)}}),i}var Sw=(function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t})(),aue=(function(t){jL(e,t);function e(r,n,i,s,a,o){var l=t.call(this,r,n,o)||this;return l.cell=i,l.row=s,l.column=a,l.section=s.section,l}return e})(Sw),oue=(function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,i,s,a){for(var o=0,l=r;o<l.length;o++){var c=l[o],d=new aue(e,this,n,i,s,a),p=c(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],p)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var s=i[n];s(new Sw(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var s=i[n];s(new Sw(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t})(),$L=(function(){function t(e,r,n,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof DL&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=i,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,i){var s;return Math.max(n,((s=r.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var i=r.cells[n.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(i,s){var a=n.cells[s.index];if(!a)return 0;var o=r.getLineHeight(a.styles.fontSize),l=a.padding("vertical"),c=l+o;return c>i?c:i},0)},t})(),HL=(function(){function t(e,r,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var a=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=a.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*r,s=n*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=$5(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t})(),lue=(function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,i=e.allRows();n<i.length;n++){var s=i[n],a=s.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(r=Math.max(r,a.styles.cellWidth))}return r},t})();function cue(t,e){uue(t,e);var r=[],n=0;e.columns.forEach(function(s){var a=s.getMaxCustomCellWidth(e);a?s.width=a:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var i=e.getWidth(t.pageSize().width)-n;i&&(i=Cw(r,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=Cw(r,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),fue(e),hue(e,t),due(e)}function uue(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,i=BL(t,e);e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],c=s.cells[l.index];if(c){var d=e.hooks.didParseCell;e.callCellHooks(t,d,c,s,l,null);var p=c.padding("horizontal");c.contentWidth=Hv(c.text,c.styles,t)+p;var g=Hv(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,t);if(c.minReadableWidth=g+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||n===!0)c.contentWidth>i?(c.minWidth=i,c.wrappedWidth=i):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var m=10/r;c.minWidth=c.styles.minCellWidth||m,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],c=s.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},p=d.cellWidth||d.minCellWidth;p&&typeof p=="number"&&(l.minWidth=p,l.wrappedWidth=p)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function Cw(t,e,r){for(var n=e,i=t.reduce(function(m,w){return m+w.wrappedWidth},0),s=0;s<t.length;s++){var a=t[s],o=a.wrappedWidth/i,l=n*o,c=a.width+l,d=r(a),p=c<d?d:c;e-=p-a.width,a.width=p}if(e=Math.round(e*1e10)/1e10,e){var g=t.filter(function(m){return e<0?m.width>r(m):!0});g.length&&(e=Cw(g,e,r))}return e}function due(t){for(var e={},r=1,n=t.allRows(),i=0;i<n.length;i++)for(var s=n[i],a=0,o=t.columns;a<o.length;a++){var l=o[a],c=e[l.index];if(r>1)r--,delete s.cells[l.index];else if(c)c.cell.height+=s.height,r=c.cell.colSpan,delete s.cells[l.index],c.left--,c.left<=1&&delete e[l.index];else{var d=s.cells[l.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var p=n.length-i,g=d.rowSpan>p?p:d.rowSpan;e[l.index]={cell:d,left:g,row:s}}}}}function fue(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],i=null,s=0,a=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(a-=1,a>1&&t.columns[o+1])s+=l.width,delete n.cells[l.index];else if(i){var c=i;delete n.cells[l.index],i=null,c.width=l.width+s}else{var c=n.cells[l.index];if(!c)continue;if(a=c.colSpan,s=0,c.colSpan>1){i=c,s+=l.width;continue}c.width=l.width+s}}}function hue(t,e){for(var r={count:0,height:0},n=0,i=t.allRows();n<i.length;n++){for(var s=i[n],a=0,o=t.columns;a<o.length;a++){var l=o[a],c=s.cells[l.index];if(c){e.applyStyles(c.styles,!0);var d=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=e.splitTextToSize(c.text,d+1/e.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=MS(c.text,d,c.styles,e,"...");else if(c.styles.overflow==="hidden")c.text=MS(c.text,d,c.styles,e,"");else if(typeof c.styles.overflow=="function"){var p=c.styles.overflow(c.text,d);typeof p=="string"?c.text=[p]:c.text=p}c.contentHeight=c.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var g=c.contentHeight/c.rowSpan;c.rowSpan>1&&r.count*r.height<g*c.rowSpan?r={height:g,count:c.rowSpan}:r&&r.count>0&&r.height>g&&(g=r.height),g>s.height&&(s.height=g)}}r.count--}}function MS(t,e,r,n,i){return t.map(function(s){return pue(s,e,r,n,i)})}function pue(t,e,r,n,i){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=Hv(t,r,n))return t;for(;e<Hv(t+i,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function qL(t,e){var r=new N1(t),n=mue(e,r.scaleFactor()),i=new oue(e,n);return cue(r,i),r.applyStyles(r.userStyles),i}function mue(t,e){var r=t.content,n=xue(r.columns);if(r.head.length===0){var i=BS(n,"head");i&&r.head.push(i)}if(r.foot.length===0){var i=BS(n,"foot");i&&r.foot.push(i)}var s=t.settings.theme,a=t.styles;return{columns:n,head:Q4("head",r.head,n,a,s,e),body:Q4("body",r.body,n,a,s,e),foot:Q4("foot",r.foot,n,a,s,e)}}function Q4(t,e,r,n,i,s){var a={},o=e.map(function(l,c){for(var d=0,p={},g=0,m=0,w=0,y=r;w<y.length;w++){var k=y[w];if(a[k.index]==null||a[k.index].left===0)if(m===0){var T=void 0;Array.isArray(l)?T=l[k.index-g-d]:T=l[k.dataKey];var O={};typeof T=="object"&&!Array.isArray(T)&&(O=T?.styles||{});var P=vue(t,k,c,i,n,s,O),V=new HL(T,P,t);p[k.dataKey]=V,p[k.index]=V,m=V.colSpan-1,a[k.index]={left:V.rowSpan-1,times:m}}else m--,g++;else a[k.index].left--,m=a[k.index].times,d++}return new $L(l,c,t,p)});return o}function BS(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var i=gue(e,n.raw);i!=null&&(r[n.dataKey]=i)}}),Object.keys(r).length>0?r:null}function gue(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function xue(t){return t.map(function(e,r){var n,i;return typeof e=="object"?i=(n=e.dataKey)!==null&&n!==void 0?n:r:i=r,new lue(i,e,r)})}function vue(t,e,r,n,i,s,a){var o=Gce(n),l;t==="head"?l=i.headStyles:t==="body"?l=i.bodyStyles:t==="foot"&&(l=i.footStyles);var c=Wu({},o.table,o[t],i.styles,l),d=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},p=t==="body"?d:{},g=t==="body"&&r%2===0?Wu({},o.alternateRow,i.alternateRowStyles):{},m=Wce(s),w=Wu({},m,c,g,p);return Wu(w,a)}function yue(t,e,r){var n;r===void 0&&(r={});var i=BL(t,e),s=new Map,a=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(g){var m=e.columns.find(function(w){return w.dataKey===g||w.index===g});m&&!s.has(m.index)&&(s.set(m.index,!0),a.push(m.index),o.push(e.columns[m.index]),i-=m.wrappedWidth)});for(var c=!0,d=(n=r?.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(s.has(d)){d++;continue}var p=e.columns[d].wrappedWidth;if(c||i>=p)c=!1,a.push(d),o.push(e.columns[d]),i-=p;else break;d++}return{colIndexes:a,columns:o,lastIndex:d-1}}function wue(t,e){for(var r=[],n=0;n<e.columns.length;n++){var i=yue(t,e,{start:n});i.columns.length&&(r.push(i),n=i.lastIndex)}return r}function WL(t,e){var r=e.settings,n=r.startY,i=r.margin,s={x:i.left,y:n},a=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+i.bottom+a;if(r.pageBreak==="avoid"){var l=e.body,c=l.reduce(function(g,m){return g+m.height},0);o+=c}var d=new N1(t);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(KL(d),s.y=i.top),e.callWillDrawPageHooks(d,s);var p=Wu({},s);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?bue(d,e,p,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(g){return ad(d,e,g,s,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(g,m){var w=m===e.body.length-1;qv(d,e,g,w,p,s,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(g){return ad(d,e,g,s,e.columns)})),OL(d,e,p,s),e.callEndPageHooks(d,s),e.finalY=s.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function bue(t,e,r,n){var i=wue(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(c,d){t.applyStyles(t.userStyles),d>0?Vm(t,e,r,n,c.columns,!0):VS(t,e,n,c.columns),_ue(t,e,r,n,c.columns),J4(t,e,n,c.columns)});else for(var a=-1,o=i[0],l=function(){var c=a;if(o){t.applyStyles(t.userStyles);var d=o.columns;a>=0?Vm(t,e,r,n,d,!0):VS(t,e,n,d),c=US(t,e,a+1,n,d),J4(t,e,n,d)}var p=c-a;i.slice(1).forEach(function(g){t.applyStyles(t.userStyles),Vm(t,e,r,n,g.columns,!0),US(t,e,a+1,n,g.columns,p),J4(t,e,n,g.columns)}),a=c};a<e.body.length-1;)l()}function VS(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return ad(t,e,s,r,n)})}function _ue(t,e,r,n,i){t.applyStyles(t.userStyles),e.body.forEach(function(s,a){var o=a===e.body.length-1;qv(t,e,s,o,r,n,i)})}function US(t,e,r,n,i,s){t.applyStyles(t.userStyles),s=s??e.body.length;var a=Math.min(r+s,e.body.length),o=-1;return e.body.slice(r,a).forEach(function(l,c){var d=r+c===e.body.length-1,p=GL(t,e,d,n);l.canEntireRowFit(p,i)&&(ad(t,e,l,n,i),o=r+c)}),o}function J4(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return ad(t,e,s,r,n)})}function kue(t,e,r){var n=r.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),s=Math.floor((e-i)/n);return Math.max(0,s)}function Eue(t,e,r,n){var i={};t.spansMultiplePages=!0,t.height=0;for(var s=0,a=0,o=r.columns;a<o.length;a++){var l=o[a],c=t.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var d=new HL(c.raw,c.styles,c.section);d=Wu(d,c),d.text=[];var p=kue(c,e,n);c.text.length>p&&(d.text=c.text.splice(p,c.text.length));var g=n.scaleFactor(),m=n.getLineHeightFactor();c.contentHeight=c.getContentHeight(g,m),c.contentHeight>=e&&(c.contentHeight=e,d.styles.minCellHeight-=e),c.contentHeight>t.height&&(t.height=c.contentHeight),d.contentHeight=d.getContentHeight(g,m),d.contentHeight>s&&(s=d.contentHeight),i[l.index]=d}}var w=new $L(t.raw,-1,t.section,i,!0);w.height=s;for(var y=0,k=r.columns;y<k.length;y++){var l=k[y],d=w.cells[l.index];d&&(d.height=w.height);var c=t.cells[l.index];c&&(c.height=t.height)}return w}function Sue(t,e,r,n){var i=t.pageSize().height,s=n.settings.margin,a=s.top+s.bottom,o=i-a;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,t),c=l<r;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var d=e.hasRowSpan(n.columns),p=e.getMaxCellHeight(n.columns)>o;return p?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function qv(t,e,r,n,i,s,a){var o=GL(t,e,n,s);if(r.canEntireRowFit(o,a))ad(t,e,r,s,a);else if(Sue(t,r,o,e)){var l=Eue(r,o,e,t);ad(t,e,r,s,a),Vm(t,e,i,s,a),qv(t,e,l,n,i,s,a)}else Vm(t,e,i,s,a),qv(t,e,r,n,i,s,a)}function ad(t,e,r,n,i){n.x=e.settings.margin.left;for(var s=0,a=i;s<a.length;s++){var o=a[s],l=r.cells[o.index];if(!l){n.x+=o.width;continue}t.applyStyles(l.styles),l.x=n.x,l.y=n.y;var c=e.callCellHooks(t,e.hooks.willDrawCell,l,r,o,n);if(c===!1){n.x+=o.width;continue}Cue(t,l,n);var d=l.getTextPos();LL(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function Cue(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=ML(n.lineWidth,n.fillColor);i&&t.rect(e.x,r.y,e.width,e.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),Tue(t,e,r,n.lineWidth))}function Tue(t,e,r,n){var i,s,a,o;n.top&&(i=r.x,s=r.y,a=r.x+e.width,o=r.y,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),l(n.top,i,s,a,o)),n.bottom&&(i=r.x,s=r.y+e.height,a=r.x+e.width,o=r.y+e.height,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),l(n.bottom,i,s,a,o)),n.left&&(i=r.x,s=r.y,a=r.x,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,i,s,a,o)),n.right&&(i=r.x+e.width,s=r.y,a=r.x+e.width,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,i,s,a,o));function l(c,d,p,g,m){t.getDocument().setLineWidth(c),t.getDocument().line(d,p,g,m,"S")}}function GL(t,e,r,n){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-i}function Vm(t,e,r,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(o){return ad(t,e,o,n,i)}),e.callEndPageHooks(t,n);var a=e.settings.margin;OL(t,e,r,n),KL(t),e.pageNumber++,n.x=a.left,n.y=a.top,r.y=a.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return ad(t,e,o,n,i)}),t.applyStyles(t.userStyles))}function KL(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function Nue(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],i=zL(this,n),s=qL(this,i);return WL(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,i){LL(e,r,n,i,this)},t.API.autoTableSetDefaults=function(e){return N1.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){N1.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new N1(this),s=UL(i,e,window,r,!1),a=s.head,o=s.body,l=((n=a[0])===null||n===void 0?void 0:n.map(function(c){return c.content}))||[];return{columns:l,rows:o,data:o}}}var Z4;function zS(t,e){var r=zL(t,e),n=qL(t,r);WL(t,n)}try{if(typeof window<"u"&&window){var $S=window,HS=$S.jsPDF||((Z4=$S.jspdf)===null||Z4===void 0?void 0:Z4.jsPDF);HS&&Nue(HS)}}catch(t){console.error("Could not apply autoTable plugin",t)}async function Aue(t){const e=new wr;e.setFont("helvetica","normal"),e.setFontSize(16),e.text("Pharmacy Profile Report",20,20),e.setFontSize(12),e.text(`Name: ${t?.displayName||"Pharmacy"}`,20,35),e.text(`Email: ${t?.email||""}`,20,45);const r=await is(doc(gt,"pharmacies",t.uid)),n=r.exists()?r.data():{};e.text(`Address: ${n.address||""}`,20,55),e.text(`Phone: ${n.phone||""}`,20,65);const s=(await Fn(Tr(dr(gt,"products"),zr("pharmacyId","==",t.uid)))).docs.map(c=>({id:c.id,...c.data()}));zS(e,{startY:75,head:[["Product Name","Category","Stock","SKU","Price"]],body:s.map(c=>[c.name,c.category,c.stock,c.sku,`${Number(c.price).toLocaleString()}`]),theme:"striped",headStyles:{fillColor:[54,165,255]},styles:{fontSize:10}});const o=(await Fn(Tr(dr(gt,"orders"),zr("pharmacyId","==",t.uid)))).docs.map(c=>({id:c.id,...c.data()}));let l=e.lastAutoTable?e.lastAutoTable.finalY+10:100;e.setFontSize(14),e.text("Orders",20,l),l+=6,zS(e,{startY:l,head:[["Order ID","Date","Total","Items"]],body:o.map(c=>[c.id.slice(0,8),c.createdAt?.toDate?.().toLocaleString?.()||"",`${Number(c.total).toLocaleString()}`,(c.items||[]).map(d=>`${d.name||d.productId} x${d.qty||d.quantity||1}`).join(", ")]),theme:"striped",headStyles:{fillColor:[54,165,255]},styles:{fontSize:9}}),e.save("pharmacy-profile-report.pdf")}const Iue=({title:t,searchValue:e,onSearchChange:r,onSearchSubmit:n,onSettingsClick:i})=>os.createPortal(f.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:f.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("h1",{className:"mt-8 text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-light font-poppins leading-none text-gray-900 dark:text-white",children:["Pharmacy",f.jsx("br",{}),"Profile"]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"hidden sm:flex items-center border-b px-2 py-1 w-[min(420px,40vw)] max-w-[520px]",children:[f.jsx("input",{value:e,onChange:r,onKeyDown:s=>{s.key==="Enter"&&n()},placeholder:"Search products, orders, customers...",className:"flex-1 text-sm font-light outline-none truncate","aria-label":"Search products or orders"}),f.jsx("button",{onClick:n,"aria-label":"Search",className:"ml-2 rounded-full p-2 text-sky-600",children:f.jsx(id,{className:"h-4 w-4"})})]}),f.jsx("button",{onClick:n,"aria-label":"Open search",className:"ml-2 rounded-full p-2 hover:bg-sky-50 sm:hidden",children:f.jsx(id,{className:"h-5 w-5 text-sky-600"})}),f.jsx("button",{onClick:i,"aria-label":"Open settings",className:"ml-2 rounded-full p-2 hover:bg-sky-50 transition-all duration-200",children:f.jsx(Cv,{className:"h-5 w-5 text-sky-600"})})]})]})})}),document.body);function XL({onSwitchToCustomer:t}){const{user:e,logout:r,profile:n}=In(),[i,s]=M.useState([]),[a,o]=M.useState(!1),[l,c]=M.useState(!1),[d,p]=M.useState(0),[g,m]=M.useState(0),[w,y]=M.useState(0),[k,T]=M.useState(null),[O,P]=M.useState(""),[V,Y]=M.useState(""),[G,L]=M.useState(""),[N,C]=M.useState(""),[R,A]=M.useState(""),[F,B]=M.useState(""),[te,pe]=M.useState(null),[Ee,ve]=M.useState(!1),[re,W]=M.useState(!1),[ne,Q]=M.useState(!1),[I,H]=M.useState(new Set),[X,J]=M.useState({displayName:e?.displayName||"Pharmacy",address:"",phone:"",email:e?.email||""}),[ue,we]=M.useState(""),[fe,me]=M.useState(""),[be,Le]=M.useState(!1),[ee,Be]=M.useState("products");M.useEffect(()=>{e&&e.role==="pharmacy"&&Be("all")},[e]);const[Re,ae]=M.useState(null),[$e,qe]=M.useState([]),[it,oe]=M.useState(null),[je,Ge]=M.useState(null),[Tt,Pe]=M.useState(null),Ke=40;function ot(Ve){if(!Ve)return null;if(Ve.latitude&&Ve.longitude)return{lat:Number(Ve.latitude),lng:Number(Ve.longitude)};if(Ve.lat&&Ve.lng)return{lat:Number(Ve.lat),lng:Number(Ve.lng)};if(Ve.lat&&Ve.lon)return{lat:Number(Ve.lat),lng:Number(Ve.lon)};if(Ve.location&&typeof Ve.location=="object"){if(Ve.location.lat&&Ve.location.lng)return{lat:Number(Ve.location.lat),lng:Number(Ve.location.lng)};if(Ve.location.latitude&&Ve.location.longitude)return{lat:Number(Ve.location.latitude),lng:Number(Ve.location.longitude)}}if(Ve.coords&&typeof Ve.coords=="object"){if(Ve.coords.latitude&&Ve.coords.longitude)return{lat:Number(Ve.coords.latitude),lng:Number(Ve.coords.longitude)};if(Ve.coords.lat&&Ve.coords.lng)return{lat:Number(Ve.coords.lat),lng:Number(Ve.coords.lng)}}return null}function We(Ve,Bt){if(!Ve||!Bt)return null;const zt=sr=>sr*Math.PI/180,nr=6371,lr=zt(Bt.lat-Ve.lat),hr=zt(Bt.lng-Ve.lng),Zt=zt(Ve.lat),yr=zt(Bt.lat),dn=Math.sin(lr/2),qr=Math.sin(hr/2),Ln=dn*dn+Math.cos(Zt)*Math.cos(yr)*qr*qr,jn=2*Math.atan2(Math.sqrt(Ln),Math.sqrt(1-Ln));return nr*jn}function Lt(Ve,Bt){if(Ve==null||Bt==null||Bt<=0)return null;const zt=Ve/Bt,nr=Math.round(zt*60);if(nr<60)return`${nr} min`;const lr=Math.floor(nr/60),hr=nr%60;return`${lr}h ${hr}m`}M.useEffect(()=>{if(je||!("geolocation"in navigator))return;let Ve=!0;return navigator.geolocation.getCurrentPosition(Bt=>{Ve&&Ge({lat:Bt.coords.latitude,lng:Bt.coords.longitude})},Bt=>{console.debug("[ProfilePharmacy] geolocation error",Bt)},{enableHighAccuracy:!1,timeout:1e4}),()=>{Ve=!1}},[]),M.useEffect(()=>{if(!it)return Pe(null);const Ve=ot(it.data);if(!Ve){Pe(null);return}let Bt=je||null;if(!Bt&&it&&it.source==="users"){const lr=ot(it.data);lr&&(Bt=lr)}if(!Bt){Pe(null);return}const zt=We(Bt,Ve);if(zt==null){Pe(null);return}const nr=Lt(zt,Ke);Pe({distanceKm:zt,eta:nr,speedKmh:Ke,pharmCoords:Ve,custCoords:Bt})},[it,je]);const St=Ci();M.useEffect(()=>{const Ve=n?.uid||e?.uid;if(Ve)return N5(s,Ve)},[n,e]),M.useEffect(()=>{const Ve=n?.uid||e?.uid;if(!Ve)return;Fn(Tr(dr(gt,"orders"),zr("pharmacyId","==",Ve))).then(dn=>{let qr=0;dn.forEach(Ln=>{const jn=Ln.data();qr+=(jn.items||[]).reduce((sr,Gr)=>sr+(Gr.count||Gr.qty||Gr.quantity||1),0)}),p(qr)}).catch(()=>{}),Fn(Tr(dr(gt,"threads"),zr("vendorId","==",Ve))).then(dn=>{m(dn.size)}).catch(()=>{}),Fn(Tr(dr(gt,"reviews"),zr("pharmacyId","==",Ve))).then(dn=>{y(dn.size)}).catch(()=>{});const Bt=or(gt,"pharmacies",Ve),zt=or(gt,"users",Ve);let nr=null,lr=null;const hr=()=>{const dn=qr=>{if(!qr)return"";const Ln=String(qr).trim();return!Ln||Ln.includes("@")||Ln.replace(/\D/g,"").length<6?"":Ln};try{console.debug("[ProfilePharmacy] refreshProfile - pharmData:",nr,"userData:",lr)}catch{}J(qr=>{const Ln=nr&&nr.displayName||lr&&lr.displayName||e.displayName||qr.displayName,jn=nr&&nr.address||lr&&lr.address||qr.address||"",sr=nr&&nr.phone||lr&&lr.phone||qr.phone||"",Gr=dn(sr),ds=nr&&nr.email||lr&&lr.email||e.email||qr.email||"";try{console.debug("[ProfilePharmacy] computed profile ->",{displayName:Ln,address:jn,rawPhone:sr,phone:Gr,email:ds})}catch{}return{displayName:Ln,address:jn,phone:Gr,email:ds}})},Zt=ri(Bt,dn=>{nr=dn&&dn.exists?dn.data():null,hr()},()=>{}),yr=ri(zt,dn=>{lr=dn&&dn.exists?dn.data():null,hr()},()=>{});return hr(),()=>{try{Zt&&Zt()}catch{}try{yr&&yr()}catch{}}},[n,e]);async function Pt(){await Aue(n||e)}async function mt(){if(!k)return;let Ve=F;await ys(or(gt,"products",k.id),{name:O,category:V,stock:Number(G),sku:N,price:Number(R),image:Ve||k.image||"",description:ue}),T(null)}function _t(){T(null)}M.useEffect(()=>{k&&(P(k.name||""),Y(k.category||""),L(k.stock||""),C(k.sku||""),A(k.price||""),B(k.image||""),pe(null),we(k.description||""))},[k]);async function Xt(){const Ve=(fe||"").trim().toLowerCase();if(!Ve){qe([]);return}const Bt=[];if((ee==="products"||ee==="all")&&i.forEach(zt=>{`${zt.name||""} ${zt.category||""} ${zt.sku||""}`.toLowerCase().includes(Ve)&&Bt.push({type:"product",title:zt.name||"Untitled",subtitle:`${zt.category||"Uncategorized"}  SKU: ${zt.sku||""}`,item:zt})}),ee==="orders"||ee==="all"){let zt=Re;zt||(zt=(await Fn(Tr(dr(gt,"orders"),zr("pharmacyId","==",n?.uid||e?.uid)))).docs.map(lr=>({id:lr.id,...lr.data()})),ae(zt)),(zt||[]).forEach(nr=>{`${nr.id} ${(nr.items||[]).map(hr=>hr.name).join(" ")} ${nr.customerName||""}`.toLowerCase().includes(Ve)&&Bt.push({type:"order",title:`Order ${nr.id}`,subtitle:`${nr.items?.length||0} items  ${Number(nr.total||0).toLocaleString()}`,item:nr})})}qe(Bt)}M.useEffect(()=>{if(!be)return;function Ve(Bt){Bt.key==="Escape"&&(Le(!1),me(""),qe([]))}return window.addEventListener("keydown",Ve),()=>window.removeEventListener("keydown",Ve)},[be]),M.useEffect(()=>{if(!be)return;if(!(fe||"").trim()){qe([]);return}const Bt=setTimeout(()=>{Xt()},300);return()=>clearTimeout(Bt)},[fe,ee,be]);function Kt(Ve){try{return Ve&&Ve.toDate?Ve.toDate().toISOString():Ve||""}catch{return""}}function Ut(){if(!i||i.length===0){alert("No products to export");return}const Ve=i.map(hr=>({id:hr.id,name:hr.name||"",category:hr.category||"",sku:hr.sku||"",price:Number(hr.price||0),stock:Number(hr.stock||0),description:hr.description||"",image:hr.image||"",createdAt:Kt(hr.createdAt)})),Bt=RP.unparse(Ve),zt=new Blob([Bt],{type:"text/csv;charset=utf-8;"}),nr=URL.createObjectURL(zt),lr=document.createElement("a");lr.href=nr,lr.download=`pharmacy-inventory-${e?.uid||"inventory"}.csv`,document.body.appendChild(lr),lr.click(),lr.remove(),URL.revokeObjectURL(nr)}function xr(){if(!i||i.length===0){alert("No products to export");return}const Ve=i.map(yr=>({id:yr.id,name:yr.name||"",category:yr.category||"",sku:yr.sku||"",price:Number(yr.price||0),stock:Number(yr.stock||0),description:yr.description||"",image:yr.image||"",createdAt:Kt(yr.createdAt)})),Bt=zx.json_to_sheet(Ve),zt=zx.book_new();zx.book_append_sheet(zt,Bt,"Inventory");const nr=MF(zt,{bookType:"xlsx",type:"array"}),lr=new Blob([nr],{type:"application/octet-stream"}),hr=URL.createObjectURL(lr),Zt=document.createElement("a");Zt.href=hr,Zt.download=`pharmacy-inventory-${e?.uid||"inventory"}.xlsx`,document.body.appendChild(Zt),Zt.click(),Zt.remove(),URL.revokeObjectURL(hr)}if(!e)return f.jsx(ng,{lines:4,className:"my-8"});function Yr({user:Ve}){return!Ve||Ve.role!=="superuser"?null:f.jsxs("div",{className:"mt-8 rounded-3xl border bg-yellow-50 dark:bg-gray-700 border-yellow-400 dark:border-gray-600 p-4 flex flex-col items-start relative",children:[f.jsx("div",{className:"text-[20px] font-bold text-yellow-700 dark:text-yellow-400 mb-2",children:"Superuser Dashboard"}),f.jsxs("ul",{className:"space-y-2 text-[15px] text-yellow-900",children:[f.jsx("li",{children:"Manage all users (view, edit, suspend, delete)"}),f.jsx("li",{children:"Product oversight (add, edit, remove, approve/reject)"}),f.jsx("li",{children:"Prescription management"}),f.jsx("li",{children:"Analytics & reports"}),f.jsx("li",{children:"Moderation (reviews, chats, reported content)"}),f.jsx("li",{children:"System settings"}),f.jsx("li",{children:"Bulk operations"}),f.jsx("li",{children:"Audit logs"}),f.jsx("li",{children:"Impersonate users"})]}),f.jsx("div",{className:"mt-4 text-[13px] text-yellow-700",children:"(Feature scaffolding: UI and logic for each capability can be expanded here.)"})]})}return f.jsxs(f.Fragment,{children:[f.jsx(Iue,{title:"Pharmacy Profile",searchValue:fe,onSearchChange:Ve=>me(Ve.target.value),onSearchSubmit:()=>{Xt(),Le(!0)},onSettingsClick:()=>St("/settings")}),f.jsxs("div",{className:"pt-28 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col animate-fadeInUp",children:[f.jsx(Yr,{user:e}),be&&f.jsx("div",{onClick:()=>{Le(!1),me(""),qe([])},className:"fixed inset-0 z-50 flex items-start justify-center pt-24 bg-black bg-opacity-30",role:"dialog","aria-modal":"true","aria-label":"Search modal",children:f.jsxs("div",{onClick:Ve=>Ve.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-3xl w-[min(920px,95%)] p-4 shadow-xl border border-[#9ED3FF] dark:border-gray-600 max-h-[80vh] overflow-hidden",children:[f.jsxs("div",{className:"mb-3",children:[f.jsxs("div",{className:"flex items-center gap-3 w-full",children:[f.jsx("div",{className:"flex-1 min-w-0",children:f.jsxs("div",{className:"flex items-center bg-[#F0FAFF] dark:bg-gray-700 border border-[#9ED3FF] dark:border-gray-600 rounded-full px-3 py-2 w-full overflow-hidden",children:[f.jsx(id,{className:"h-4 w-4 text-sky-600 dark:text-sky-400 mr-2 flex-shrink-0"}),f.jsx("input",{autoFocus:!0,value:fe,onChange:Ve=>me(Ve.target.value),onKeyDown:Ve=>{Ve.key==="Enter"&&Xt()},placeholder:"Search products, orders, customers...",className:"flex-1 min-w-0 bg-transparent text-sm outline-none truncate dark:text-white dark:placeholder:text-gray-400","aria-label":"Search query"})]})}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("select",{value:ee,onChange:Ve=>Be(Ve.target.value),className:"rounded-full border border-[#9ED3FF] dark:border-gray-600 px-3 py-2 text-sm bg-white dark:bg-gray-700 dark:text-white w-36",children:[f.jsx("option",{value:"products",children:"Products"}),f.jsx("option",{value:"orders",children:"Orders"}),f.jsx("option",{value:"all",children:"All"})]})})]}),f.jsx("div",{className:"w-full border-t mt-3",style:{borderColor:"#E6F7FF"}})]}),f.jsx("div",{className:"mt-4 max-h-[60vh] overflow-auto px-1 py-2",children:$e.length===0?f.jsx("div",{className:"text-zinc-500 p-4",children:"No results yet. Enter a query."}):f.jsx("ul",{className:"space-y-2",children:$e.map((Ve,Bt)=>f.jsxs("li",{className:"p-2 rounded-2xl border border-[#9ED3FF] dark:border-gray-600 bg-white dark:bg-gray-700 hover:bg-[#E3F3FF] dark:hover:bg-gray-600 transition-all duration-200 flex items-center gap-3 justify-between animate-fadeInUp card-interactive hover:shadow-md",style:{animationDelay:`${Bt*.05}s`},children:[f.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[f.jsx("div",{className:"flex-shrink-0",children:Ve.type==="product"?f.jsx(Wl,{name:Ve.item?.name,image:Ve.item?.image,category:Ve.item?.category,size:48,className:"rounded-lg"}):f.jsx("div",{className:"h-12 w-12 rounded-lg bg-[#fff7ed] dark:bg-gray-600 flex items-center justify-center border border-[#ffd7a8] dark:border-gray-500 animate-pulse-gentle",children:f.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",className:"text-orange-500 dark:text-orange-400",children:f.jsx("path",{d:"M3 7h18M3 12h18M3 17h18",stroke:"#f59e0b",strokeWidth:"1.5",strokeLinecap:"round"})})})}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("div",{className:"font-semibold text-sm text-black truncate",children:Ve.title}),f.jsx("div",{className:"text-xs text-zinc-500 truncate",children:Ve.subtitle})]})]}),f.jsx("div",{className:"flex-shrink-0 flex items-center gap-2",children:Ve.type==="product"?f.jsx("button",{onClick:()=>{T(Ve.item),Le(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 btn-interactive transition-all duration-200",children:"Edit"}):f.jsx("button",{onClick:()=>{St("/orders",{state:{highlightOrderId:Ve.item.id}}),Le(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 btn-interactive transition-all duration-200",children:"Open"})})]},Bt))})})]})}),f.jsxs("div",{className:"mt-8 w-full grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-6 items-start",children:[f.jsx("aside",{className:"min-w-0 lg:pr-2",children:f.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 flex flex-col items-start relative lg:sticky lg:top-24 overflow-hidden",children:[f.jsx("div",{className:"mb-2",children:e?.photoURL?f.jsx("img",{src:e.photoURL,alt:"Avatar",className:"h-16 w-16 rounded-full object-cover border border-[#9ED3FF] dark:border-gray-500 shadow"}):f.jsx("div",{className:"h-16 w-16 rounded-full bg-[#E3F3FF] dark:bg-gray-600 flex items-center justify-center border border-[#9ED3FF] dark:border-gray-500 shadow",children:f.jsx("span",{className:"text-sky-600 dark:text-sky-400 text-2xl font-light",children:X.displayName&&X.displayName.charAt?X.displayName.charAt(0):"P"})})}),f.jsx("div",{className:"text-3xl font-light font-poppins text-sky-600 dark:text-sky-400 mb-1 tracking-tight truncate w-full",children:X.displayName||"Pharmacy"}),f.jsx("div",{className:"w-full border-b dark:border-gray-600 mb-2",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"}}),f.jsx("div",{className:"text-[13px] text-zinc-500 font-light mb-1 truncate w-full",children:X.email||e?.email}),X.address&&f.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 flex items-center truncate w-full",children:[f.jsx(zl,{className:"h-4 w-4 mr-1 flex-shrink-0"}),f.jsx("span",{className:"truncate",children:X.address})]}),X.phone&&f.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 flex items-center truncate w-full",children:[f.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mr-1 flex-shrink-0",children:f.jsx("path",{d:"M2.41333 5.19333C3.37333 7.08 4.92 8.62667 6.80667 9.58667L8.27333 8.12C8.46 7.93333 8.72 7.88 8.95333 7.95333C9.7 8.2 10.5 8.33333 11.3333 8.33333C11.5101 8.33333 11.6797 8.40357 11.8047 8.5286C11.9298 8.65362 12 8.82319 12 9V11.3333C12 11.5101 11.9298 11.6797 11.8047 11.8047C11.6797 11.9298 11.5101 12 11.3333 12C8.32755 12 5.44487 10.806 3.31946 8.68054C1.19404 6.55513 0 3.67245 0 0.666667C0 0.489856 0.0702379 0.320286 0.195262 0.195262C0.320286 0.0702379 0.489856 0 0.666667 0H3C3.17681 0 3.34638 0.0702379 3.4714 0.195262C3.59643 0.320286 3.66667 0.489856 3.66667 0.666667C3.66667 1.5 3.8 2.3 4.04667 3.04667C4.12 3.28 4.06667 3.54 3.88 3.72667L2.41333 5.19333Z",fill:"#7D7D7D"})}),f.jsx("span",{className:"truncate",children:X.phone})]}),Tt&&f.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 w-full truncate",children:["ETA: ",f.jsx("span",{className:"text-sky-600 font-medium",children:Tt.eta}),"  ",Tt.distanceKm.toFixed(2)," km"]}),f.jsx("div",{className:"w-full mt-4 hidden lg:flex justify-start",children:f.jsxs("button",{onClick:async()=>{await r(),window.location.href="/auth/landing"},className:"rounded-full border border-red-300 dark:border-gray-600 text-red-600 dark:text-red-400 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:[f.jsx(J3,{className:"h-4 w-4"})," Log Out"]})})]})}),f.jsxs("section",{className:"min-w-0 space-y-6 lg:max-h-[calc(100vh-7rem)] lg:overflow-auto lg:pr-1",children:[f.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 flex flex-col items-start relative overflow-hidden",children:[f.jsx("div",{className:"text-[18px] font-light font-poppins text-black dark:text-white mb-2 tracking-tight",children:"Storefront Preview"}),f.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b dark:border-gray-600",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[f.jsx("span",{className:"text-[12px] text-zinc-500 dark:text-zinc-400 font-light",children:"Inventory"}),f.jsx("span",{className:"text-[12px] text-sky-600 dark:text-sky-400 font-medium",children:i.length})]}),f.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[f.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:"Products Sold"}),f.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:d})]}),f.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[f.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:"Active Chats"}),f.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:g})]}),f.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[f.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:"Reviews"}),f.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:w})]}),f.jsx("div",{className:"w-full flex justify-end mt-4",children:f.jsxs("button",{className:"px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light flex items-center gap-1 shadow hover:bg-sky-700",onClick:Pt,children:[f.jsx(CK,{className:"h-4 w-4"})," Download report"]})})]}),f.jsxs("div",{className:"flex gap-2 w-full",children:[f.jsx("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700",onClick:()=>o(!0),children:"+ Add Product"}),f.jsx("button",{className:"flex-1 rounded-full border border-sky-600 dark:border-gray-600 dark:border-gray-600 text-sky-600 dark:text-sky-400 text-[13px] font-light py-2 hover:bg-[#E3F3FF] dark:hover:bg-gray-700",onClick:()=>c(!0),children:"Bulk Upload"})]}),f.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 relative overflow-hidden",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("div",{className:"text-[17px] font-light font-poppins text-black dark:text-white tracking-tight",children:"Products"}),i.length>3&&f.jsx("button",{className:"text-sky-600 text-[13px] font-light px-3 py-1 rounded-full hover:bg-[#E3F3FF]",onClick:()=>Q(Ve=>!Ve),children:ne?"See less":"See more"})]}),f.jsxs("div",{className:"space-y-3",children:[(ne?i:i.slice(0,3)).map(Ve=>f.jsxs("button",{className:"w-full text-left rounded-2xl border border-[#9ED3FF] dark:border-gray-600 p-3 flex items-center gap-3 bg-white dark:bg-gray-700 hover:bg-[#E3F3FF] dark:hover:bg-gray-600 transition shadow-sm min-w-0 overflow-hidden",onClick:()=>T(Ve),type:"button",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx(Wl,{name:Ve.name,image:Ve.image,category:Ve.category,size:30,className:"border border-[#9ED3FF] dark:border-gray-500",roundedClass:"rounded-xl"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"font-semibold text-[15px] text-black dark:text-white truncate",children:Ve.name}),f.jsxs("div",{className:"text-zinc-500 dark:text-zinc-400 text-[12px] font-light truncate",children:[Ve.category,"  Stock: ",Ve.stock,"  SKU: ",Ve.sku]})]}),f.jsxs("div",{className:"text-[15px] font-semibold text-sky-600 dark:text-sky-400 ml-3 flex-shrink-0 whitespace-nowrap",children:["",Number(Ve.price).toLocaleString()]})]},Ve.id)),i.length===0&&f.jsx("div",{className:"text-zinc-500",children:"No products yet. Use the buttons above to add or bulkupload."})]}),f.jsxs("div",{className:"w-full flex justify-end mt-3",children:[f.jsx("button",{onClick:Ut,className:"mr-2 px-4 py-2 rounded-full border border-sky-600 dark:border-gray-600 dark:border-gray-600 text-sky-600 dark:text-sky-400 text-[13px] font-light hover:bg-[#E3F3FF] dark:hover:bg-gray-700",children:"Download CSV"}),f.jsx("button",{onClick:xr,className:"px-4 py-2 rounded-full bg-sky-600 text-white text-[13px] font-light hover:bg-sky-700",children:"Download Excel"})]})]})]})]}),a&&f.jsx(PP,{pharmacyId:n?.uid||e?.uid,onClose:()=>o(!1)}),l&&f.jsx(zF,{pharmacyId:n?.uid||e?.uid,onClose:()=>c(!1)}),k&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 backdrop-blur-sm",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 w-[90vw] max-w-sm shadow-xl border border-[#9ED3FF] dark:border-gray-600 relative overflow-hidden",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4 relative",children:[f.jsx("div",{className:"text-lg font-medium font-poppins text-black dark:text-white",children:"Edit Product"}),f.jsxs("div",{className:"relative",children:[f.jsx("button",{className:"rounded-full border border-zinc-300 dark:border-gray-600 dark:border-gray-600 text-zinc-500 dark:text-zinc-400 py-2 flex items-center justify-center ml-2",style:{width:"36px",height:"36px"},onClick:Ve=>{Ve.stopPropagation(),ve(Bt=>!Bt)},children:f.jsx(TK,{className:"h-4 w-4"})}),Ee&&f.jsx("div",{className:"absolute right-0 top-full mt-2 bg-white dark:bg-gray-800 border border-[#9ED3FF] dark:border-gray-600 rounded-xl shadow p-2 z-10 overflow-hidden",onClick:Ve=>Ve.stopPropagation(),children:f.jsxs("button",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 text-[13px] font-light px-2 py-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",onClick:()=>{W(!0),ve(!1)},children:[f.jsx(DK,{className:"h-4 w-4"})," Delete"]})})]})]}),f.jsxs("div",{className:"space-y-3",onClick:()=>Ee&&ve(!1),children:[f.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:O,onChange:Ve=>P(Ve.target.value),placeholder:"Name"}),f.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:V,onChange:Ve=>Y(Ve.target.value),placeholder:"Category"}),f.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:G,onChange:Ve=>L(Ve.target.value),placeholder:"Stock",type:"number"}),f.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:N,onChange:Ve=>C(Ve.target.value),placeholder:"SKU"}),f.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:R,onChange:Ve=>A(Ve.target.value),placeholder:"Price",type:"number"}),f.jsxs("div",{className:"flex flex-col gap-1",children:[f.jsx("label",{className:"text-[12px] text-zinc-500 dark:text-zinc-400 font-light",children:"Product Image"}),f.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:F,onChange:Ve=>{B(Ve.target.value),pe(null)},placeholder:"Image URL (or choose file below)",type:"text"}),f.jsx("input",{type:"file",accept:"image/*",className:"mt-1",onChange:Ve=>{Ve.target.files&&Ve.target.files[0]&&(pe(Ve.target.files[0]),B(""))}}),(F||te)&&f.jsx("img",{src:te?URL.createObjectURL(te):F,alt:"Preview",className:"h-16 w-16 object-cover rounded-xl border mt-2"})]}),f.jsxs("div",{className:"flex flex-col gap-1",children:[f.jsx("label",{className:"text-[12px] text-zinc-500 font-light",children:"Product Description"}),f.jsx("textarea",{className:"w-full border rounded p-2 text-sm",rows:4,value:ue,onChange:Ve=>we(Ve.target.value),placeholder:"Enter product description"})]})]}),f.jsxs("div",{className:"flex gap-2 mt-6 items-center",children:[f.jsx("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[12px] font-light py-2 shadow hover:bg-sky-700",onClick:mt,children:"Save"}),f.jsx("button",{className:"flex-1 rounded-full border border-zinc-300 dark:border-gray-600 text-zinc-500 text-[12px] font-light py-2",onClick:()=>T(null),children:"Cancel"})]}),re&&f.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 rounded-3xl",onClick:()=>W(!1),children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-xl border border-[#9ED3FF] dark:border-gray-600 text-center overflow-hidden",onClick:Ve=>Ve.stopPropagation(),children:[f.jsx("div",{className:"text-[15px] font-light mb-4 dark:text-white",children:"Are you sure you want to delete this item?"}),f.jsxs("div",{className:"flex gap-2 justify-center",children:[f.jsx("button",{className:"rounded-full bg-red-600 text-white text-[12px] font-light px-4 py-2",onClick:_t,children:"Yes, Delete"}),f.jsx("button",{className:"rounded-full border border-zinc-300 dark:border-gray-600 dark:border-gray-600 text-zinc-500 dark:text-zinc-400 text-[12px] font-light px-4 py-2",onClick:()=>W(!1),children:"Cancel"})]})]})})]})}),f.jsx("div",{className:"mt-6 lg:hidden",children:f.jsxs("button",{onClick:async()=>{await r(),window.location.href="/auth/landing"},className:"rounded-full border border-red-300 dark:border-gray-600 text-red-600 dark:text-red-400 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:[f.jsx(J3,{className:"h-4 w-4"})," Log Out"]})})]})]})}const Pue=t=>Array.from(new Set(t.map(r=>r.label.includes("/")?r.label.split("/").pop():r.label))).sort(),Rue=(t,e)=>Array.from(new Set(t.filter(n=>n.label.endsWith("/"+e)).map(n=>n.label.split("/")[0]))).sort((n,i)=>Number(n)-Number(i));function Fue({data:t,filter:e,onFilterChange:r,topPeriod:n}){const[i,s]=M.useState(null),[a,o]=M.useState([]);M.useEffect(()=>{if(t.length>0){const g=Math.max(...t.map(m=>m.value))||1;o(t.map(m=>m.value/g*100))}},[t]);let l=Pue(t),c=e.type==="month"?Rue(t,e.year||l[0]):[];const d=Math.max(...t.map(g=>g.value))||1,p=t.reduce((g,m)=>g+m.value,0);return f.jsxs("div",{className:"bg-gradient-to-br from-[#F7F7F7] to-[#F0F8FF] dark:from-gray-800 dark:to-gray-900 rounded-2xl border border-sky-500 dark:border-gray-600 p-6 mt-8 overflow-hidden min-w-0 relative",role:"region","aria-label":"Revenue",children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-sky-100/30 dark:from-sky-800/30 to-transparent rounded-full -translate-y-16 translate-x-16"}),f.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-blue-100/20 dark:from-blue-800/20 to-transparent rounded-full translate-y-12 -translate-x-12"}),f.jsxs("div",{className:"flex items-center justify-between mb-4 min-w-0 relative z-0",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-black dark:text-white font-light text-xl tracking-tight mb-1",children:"Revenue Analytics"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"text-2xl font-semibold text-sky-700 dark:text-sky-400",children:["",p.toLocaleString()]}),f.jsx("div",{className:"px-2 py-1 bg-sky-100 dark:bg-sky-800 rounded-full text-xs text-sky-700 dark:text-sky-300 font-medium",children:"Total"})]})]}),f.jsx("div",{className:"flex flex-col gap-2",children:f.jsxs("select",{className:"rounded-xl border-2 border-sky-200 bg-white px-3 py-2 text-sm text-sky-700 focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md",value:e.type,onChange:g=>r({...e,type:g.target.value}),children:[f.jsx("option",{value:"month",children:" By Month"}),f.jsx("option",{value:"year",children:" By Year"})]})})]}),f.jsxs("div",{className:"flex gap-2 mb-6 min-w-0 relative z-0",children:[e.type==="year"&&f.jsx("select",{className:"rounded-lg border border-sky-200 px-3 py-2 text-sm text-sky-700 bg-white focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md min-w-0 max-w-[140px]",value:e.year||l[0]||"",onChange:g=>r({...e,year:g.target.value}),children:l.map(g=>f.jsx("option",{value:g,children:g},g))}),e.type==="month"&&f.jsxs(f.Fragment,{children:[f.jsx("select",{className:"rounded-lg border border-sky-200 px-3 py-2 text-sm text-sky-700 bg-white focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md min-w-0 max-w-[120px]",value:e.year||l[0]||"",onChange:g=>r({...e,year:g.target.value}),children:l.map(g=>f.jsx("option",{value:g,children:g},g))}),f.jsx("select",{className:"rounded-lg border border-sky-200 px-3 py-2 text-sm text-sky-700 bg-white focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md min-w-0 max-w-[120px]",value:e.month||c[0]||"",onChange:g=>r({...e,month:g.target.value}),children:c.map(g=>f.jsxs("option",{value:g,children:["Month ",g]},g))})]})]}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-0 flex flex-col justify-between opacity-20",children:[...Array(5)].map((g,m)=>f.jsx("div",{className:"border-t border-sky-300 border-dashed"},m))}),f.jsx("div",{className:"w-full h-32 flex items-end gap-3 mt-2 min-w-0 overflow-hidden relative z-0",children:t.length===0?f.jsx("div",{className:"w-full h-full flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-4xl mb-2",children:""}),f.jsx("div",{className:"text-zinc-400 text-sm",children:"No revenue data available"}),f.jsx("div",{className:"text-xs text-zinc-400 mt-1",children:"Start making sales to see your revenue analytics"})]})}):t.map((g,m)=>f.jsxs("div",{className:"flex flex-col items-center flex-1 min-w-0 relative group",onMouseEnter:()=>s(m),onMouseLeave:()=>s(null),children:[i===m&&f.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-white border border-sky-200 rounded-lg px-3 py-2 shadow-lg z-20 whitespace-nowrap",children:[f.jsx("div",{className:"text-xs font-medium text-gray-700",children:g.label}),f.jsxs("div",{className:"text-sm font-semibold text-sky-600",children:["",g.value.toLocaleString()]}),f.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",children:f.jsx("div",{className:"w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-white"})})]}),f.jsxs("div",{className:"relative w-8 flex flex-col items-center",children:[f.jsxs("div",{className:"w-full h-32 bg-sky-100/50 rounded-t-lg relative overflow-hidden",children:[f.jsx("div",{className:`absolute bottom-0 w-full rounded-t-lg transition-all duration-1000 ease-out cursor-pointer transform ${i===m?"scale-105":"scale-100"}`,style:{height:`${a[m]||0}%`,background:i===m?"linear-gradient(135deg, #36A5FF 0%, #2563EB 50%, #1D4ED8 100%)":"linear-gradient(135deg, #36A5FF 0%, #3B82F6 100%)",boxShadow:i===m?"0 8px 25px rgba(54, 165, 255, 0.4), 0 4px 10px rgba(54, 165, 255, 0.3)":"0 4px 15px rgba(54, 165, 255, 0.2)"},children:f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-20 transform -skew-x-12 animate-pulse"})}),f.jsx("div",{className:"absolute w-full h-1 bg-white/40 rounded-full transition-all duration-1000",style:{bottom:`${a[m]||0}%`}})]}),i===m&&f.jsxs("div",{className:"absolute -top-6 bg-sky-600 text-white text-xs px-2 py-1 rounded font-medium",children:["",g.value.toLocaleString()]})]}),f.jsx("span",{className:`text-[11px] mt-2 truncate max-w-[40px] transition-colors duration-200 ${i===m?"text-sky-600 font-medium":"text-zinc-500"}`,children:g.label})]},m))}),t.length>0&&f.jsxs("div",{className:"absolute left-0 top-0 h-32 flex flex-col justify-between text-xs text-zinc-400 -ml-12",children:[f.jsxs("span",{children:["",d.toLocaleString()]}),f.jsxs("span",{children:["",Math.round(d*.75).toLocaleString()]}),f.jsxs("span",{children:["",Math.round(d*.5).toLocaleString()]}),f.jsxs("span",{children:["",Math.round(d*.25).toLocaleString()]}),f.jsx("span",{children:"0"})]})]}),n&&f.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-sky-50 to-blue-50 rounded-xl border border-sky-200 relative z-0",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-sky-400 to-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:""}),f.jsxs("div",{children:[f.jsxs("div",{className:"text-sm font-medium text-sky-700",children:["Best Performing ",e.type==="month"?"Month":"Year"]}),f.jsxs("div",{className:"text-lg font-semibold text-sky-800",children:[n.label,"  ",n.value.toLocaleString()]})]})]})})]})}function Lue({cards:t}){return f.jsxs("div",{className:"w-full overflow-x-auto py-2",style:{overflowY:"hidden"},children:[f.jsx("div",{className:"flex gap-3",style:{minWidth:180,scrollbarWidth:"none",msOverflowStyle:"none"},children:t.map((e,r)=>f.jsx("div",{className:"min-w-[120px] max-w-[150px] h-[80px] bg-[#F7F7F7] dark:bg-gray-800 rounded-xl border border-sky-500 dark:border-gray-600 p-3 flex flex-col items-start justify-center shadow-sm",children:e},r))}),f.jsx("style",{children:`
        .w-full.overflow-x-auto::-webkit-scrollbar { display: none; }
      `})]})}function jue({data:t}){const[e,r]=M.useState(null);if(!t||t.length===0)return f.jsx("div",{className:"bg-[#F7F7F7] dark:bg-gray-800 rounded-2xl border border-sky-500 dark:border-gray-600 p-5 mt-8 text-zinc-400 dark:text-zinc-500 text-sm text-center",children:"No sales trend data."});const n=Math.max(...t.map(p=>p.value))||1,i=25,s=280,a=120,o=[];for(let p=0;p<=4;p++){const g=i+p/4*(a-2*i);o.push(f.jsx("line",{x1:i,y1:g,x2:s-i,y2:g,stroke:"#E5F3FF",strokeWidth:"1",strokeDasharray:"3,3"},p))}const l=t.map((p,g)=>{const m=i+g/(t.length-1)*(s-2*i),w=a-i-p.value/n*(a-2*i);return{x:m,y:w,value:p.value,label:p.label}}),c=l.map((p,g)=>`${g===0?"M":"L"} ${p.x} ${p.y}`).join(" "),d=`${c} L ${l[l.length-1].x} ${a-i} L ${l[0].x} ${a-i} Z`;return f.jsxs("div",{className:"bg-[#F7F7F7] dark:bg-gray-800 rounded-2xl border border-sky-500 dark:border-gray-600 p-5 mt-8 relative overflow-hidden",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-black dark:text-white font-light text-lg tracking-tight",children:"Sales Trends"}),f.jsx("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Last 6 months"})]}),f.jsxs("div",{className:"relative",children:[f.jsxs("svg",{width:s,height:a,className:"block mx-auto overflow-visible",style:{filter:"drop-shadow(0 2px 4px rgba(54, 165, 255, 0.1))"},children:[f.jsxs("defs",{children:[f.jsxs("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[f.jsx("stop",{offset:"0%",stopColor:"#36A5FF",stopOpacity:"0.2"}),f.jsx("stop",{offset:"100%",stopColor:"#36A5FF",stopOpacity:"0.02"})]}),f.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[f.jsx("stop",{offset:"0%",stopColor:"#36A5FF"}),f.jsx("stop",{offset:"50%",stopColor:"#2563EB"}),f.jsx("stop",{offset:"100%",stopColor:"#1D4ED8"})]})]}),o,f.jsx("path",{d,fill:"url(#areaGradient)",className:"transition-all duration-300"}),f.jsx("path",{d:c,fill:"none",stroke:"url(#lineGradient)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-300",style:{filter:"drop-shadow(0 2px 4px rgba(54, 165, 255, 0.3))"}}),l.map((p,g)=>f.jsxs("g",{children:[f.jsx("circle",{cx:p.x,cy:p.y,r:e===g?"8":"6",fill:"rgba(54, 165, 255, 0.2)",className:"transition-all duration-200"}),f.jsx("circle",{cx:p.x,cy:p.y,r:e===g?"4":"3",fill:"#36A5FF",stroke:"white",strokeWidth:"2",className:"cursor-pointer transition-all duration-200 hover:r-4",onMouseEnter:()=>r(g),onMouseLeave:()=>r(null),style:{filter:e===g?"drop-shadow(0 4px 8px rgba(54, 165, 255, 0.4))":"drop-shadow(0 2px 4px rgba(54, 165, 255, 0.2))"}})]},g))]}),e!==null&&f.jsxs("div",{className:"absolute bg-white border border-sky-200 rounded-lg px-3 py-2 shadow-lg z-10 transition-all duration-200",style:{left:l[e].x-30,top:l[e].y-50,transform:"translateX(-50%)"},children:[f.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:t[e].label}),f.jsxs("div",{className:"text-sm font-semibold text-sky-600 dark:text-sky-400",children:[t[e].value," orders"]}),f.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full",children:f.jsx("div",{className:"w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-white"})})]})]}),f.jsx("div",{className:"flex justify-between mt-3 px-6",children:t.map((p,g)=>f.jsx("span",{className:`text-xs transition-colors duration-200 ${e===g?"text-sky-600 dark:text-sky-400 font-medium":"text-zinc-500 dark:text-zinc-400"}`,children:p.label},g))}),f.jsxs("div",{className:"absolute left-1 top-12 h-24 flex flex-col justify-between text-xs text-zinc-400 dark:text-zinc-500",children:[f.jsx("span",{children:n}),f.jsx("span",{children:Math.round(n*.75)}),f.jsx("span",{children:Math.round(n*.5)}),f.jsx("span",{children:Math.round(n*.25)}),f.jsx("span",{children:"0"})]}),f.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-sky-100/50 to-transparent rounded-full -translate-y-10 translate-x-10"})]})}function Due({threads:t,unreadCount:e,onThreadClick:r}){const n=Ci(),i=()=>{n("/messages")};return f.jsxs("div",{className:"relative bg-[#F7F7F7] dark:bg-gray-800 rounded-2xl border border-sky-500 dark:border-gray-600 p-5 mt-8",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2 cursor-pointer hover:bg-sky-50 dark:hover:bg-gray-700/50 -mx-2 px-2 py-1 rounded-lg transition-colors",onClick:i,children:[f.jsx("h2",{className:"text-black dark:text-white font-light text-lg tracking-tight",children:"Recent Messages"}),e>0&&f.jsx("span",{className:"bg-sky-400 text-white text-xs rounded-full px-2 py-0.5 font-bold",children:e})]}),f.jsx("div",{children:t.length===0?f.jsx("div",{className:"text-zinc-400 dark:text-zinc-500 text-sm",children:"No recent messages."}):f.jsx("ul",{className:"divide-y divide-sky-100 dark:divide-gray-600",children:t.map(s=>f.jsxs("li",{className:"py-2 rounded-lg px-2 flex items-center cursor-pointer hover:bg-sky-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>r&&r(s),children:[f.jsx("span",{className:"font-light text-[13px] text-black dark:text-white flex-1 truncate",children:s.customerName||s.customerId}),s.unread>0&&f.jsx("span",{className:"ml-2 bg-sky-400 text-white text-xs rounded-full px-2 py-0.5 font-bold",children:s.unread})]},s.id))})})]})}const Oue=({reviews:t=[],onViewAllReviews:e})=>{if(!t.length)return f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600 p-6",children:[f.jsx("div",{className:"flex items-center justify-between mb-4",children:f.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[f.jsx(_f,{className:"text-sky-500",size:20}),"Recent Reviews"]})}),f.jsxs("div",{className:"text-center py-8",children:[f.jsx(_f,{size:32,className:"text-gray-300 dark:text-gray-600 mx-auto mb-3"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No recent reviews"}),f.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"New customer reviews will appear here"})]})]});const r=n=>[...Array(5)].map((i,s)=>f.jsx(I5,{size:12,className:`${s<n?"text-yellow-400 fill-current":"text-gray-300"}`},s));return f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600 p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[f.jsx(_f,{className:"text-sky-500",size:20}),"Recent Reviews",t.length>0&&f.jsx("span",{className:"bg-sky-100 dark:bg-sky-800 text-sky-700 dark:text-sky-300 text-xs px-2 py-1 rounded-full font-medium",children:t.length})]}),f.jsxs("button",{onClick:e,className:"text-sky-500 hover:text-sky-600 dark:text-sky-400 dark:hover:text-sky-300 text-sm font-medium flex items-center gap-1",children:["View All",f.jsx(vP,{size:16})]})]}),f.jsx("div",{className:"space-y-3",children:t.slice(0,3).map(n=>f.jsx("div",{className:"flex gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer",onClick:e,children:f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[f.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:n.productName}),f.jsx("div",{className:"flex items-center gap-1",children:r(n.rating)})]}),f.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:["by ",n.customerName]}),f.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 line-clamp-2",children:n.comment}),!n.pharmacyResponse&&f.jsx("div",{className:"mt-2",children:f.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",children:[f.jsx(_f,{size:12,className:"mr-1"}),"Needs Response"]})})]})},n.id))}),t.length>3&&f.jsxs("button",{onClick:e,className:"w-full mt-4 py-2 text-sm text-sky-600 dark:text-sky-400 hover:text-sky-700 dark:hover:text-sky-300 font-medium transition-colors",children:["View ",t.length-3," more reviews"]})]})};function Mue(){const[t,e]=M.useState([]),[r,n]=M.useState({}),[i,s]=M.useState(!0),[a,o]=M.useState("all"),[l,c]=M.useState("newest"),[d,p]=M.useState("all"),[g,m]=M.useState({}),[w,y]=M.useState({}),[k,T]=M.useState(!1),{user:O}=In();M.useEffect(()=>{P()},[O]);const P=async()=>{if(O?.uid)try{s(!0);const R=Tr(dr(gt,"products"),zr("pharmacyId","==",O.uid)),A=await Fn(R),F={},B=[];A.docs.forEach(pe=>{const Ee={id:pe.id,...pe.data()};F[pe.id]=Ee,B.push(Ee)}),n(F);const te=[];for(const pe of B){const Ee=Tr(dr(gt,"products",pe.id,"reviews"),Zs("createdAt","desc"));(await Fn(Ee)).docs.forEach(re=>{te.push({id:re.id,productId:pe.id,productName:pe.name,...re.data()})})}e(te)}catch(R){console.error("Error fetching reviews:",R)}finally{s(!1)}},V=async(R,A,F)=>{if(F.trim())try{const B=or(gt,"products",A,"reviews",R);await ys(B,{pharmacyResponse:F,responseDate:Qs(),respondedBy:O.uid}),e(te=>te.map(pe=>pe.id===R?{...pe,pharmacyResponse:F,responseDate:new Date}:pe)),m(te=>({...te,[R]:""})),alert("Response submitted successfully!")}catch(B){console.error("Error submitting response:",B),alert("Failed to submit response. Please try again.")}},Y=()=>{let R=t;return a!=="all"&&(R=R.filter(A=>A.productId===a)),d!=="all"&&(d==="positive"?R=R.filter(A=>A.rating>=4):d==="negative"?R=R.filter(A=>A.rating<=2):d==="responded"?R=R.filter(A=>A.pharmacyResponse):d==="unresponded"&&(R=R.filter(A=>!A.pharmacyResponse))),R.sort((A,F)=>l==="newest"?new Date(F.createdAt?.seconds*1e3)-new Date(A.createdAt?.seconds*1e3):l==="oldest"?new Date(A.createdAt?.seconds*1e3)-new Date(F.createdAt?.seconds*1e3):l==="highest"?F.rating-A.rating:l==="lowest"?A.rating-F.rating:0),R},G=R=>[...Array(5)].map((A,F)=>f.jsx(I5,{className:`h-4 w-4 ${F<R?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},F)),N=(()=>{const R=t.length,A=t.filter(te=>te.pharmacyResponse).length,F=t.length>0?t.reduce((te,pe)=>te+pe.rating,0)/t.length:0,B=t.filter(te=>te.rating>=4).length;return{total:R,responded:A,avgRating:F,positiveReviews:B}})(),C=Y();return i?f.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600 overflow-hidden",children:f.jsxs("div",{className:"text-center py-16",children:[f.jsxs("div",{className:"relative mx-auto w-12 h-12 mb-6",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 dark:border-gray-600"}),f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-sky-500 dark:border-sky-400 border-t-transparent absolute top-0 left-0"})]}),f.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"Loading your reviews..."}),f.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm mt-1",children:"Please wait while we fetch your data"})]})}):f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600 overflow-hidden",children:[f.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200 dark:border-gray-600 bg-gradient-to-r from-gray-50 to-white dark:from-gray-700 dark:to-gray-800",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[f.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Reviews Management"}),f.jsxs("button",{onClick:()=>T(!k),className:"flex items-center justify-center gap-2 px-4 py-2 text-sm bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors shadow-sm",children:[f.jsx(NK,{className:"h-4 w-4"}),"Filters & Sort",k?f.jsx(EK,{className:"h-4 w-4"}):f.jsx(kK,{className:"h-4 w-4"})]})]}),f.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[f.jsxs("div",{className:"text-center p-3 sm:p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200 dark:border-gray-600 shadow-sm",children:[f.jsx("div",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:N.total}),f.jsx("div",{className:"text-xs sm:text-sm text-blue-600 font-medium",children:"Total Reviews"})]}),f.jsxs("div",{className:"text-center p-3 sm:p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200 shadow-sm",children:[f.jsx("div",{className:"text-xl sm:text-2xl font-bold text-green-600",children:N.responded}),f.jsx("div",{className:"text-xs sm:text-sm text-green-600 font-medium",children:"Responded"})]}),f.jsxs("div",{className:"text-center p-3 sm:p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl border border-yellow-200 shadow-sm",children:[f.jsx("div",{className:"text-xl sm:text-2xl font-bold text-yellow-600",children:N.avgRating.toFixed(1)}),f.jsx("div",{className:"text-xs sm:text-sm text-yellow-600 font-medium",children:"Avg Rating"})]}),f.jsxs("div",{className:"text-center p-3 sm:p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 shadow-sm",children:[f.jsx("div",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:N.positiveReviews}),f.jsx("div",{className:"text-xs sm:text-sm text-purple-600 font-medium",children:"Positive (4+ )"})]})]}),k&&f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product"}),f.jsxs("select",{value:a,onChange:R=>o(R.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent",children:[f.jsx("option",{value:"all",children:"All Products"}),Object.values(r).map(R=>f.jsx("option",{value:R.id,children:R.name},R.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),f.jsxs("select",{value:l,onChange:R=>c(R.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent",children:[f.jsx("option",{value:"newest",children:"Newest First"}),f.jsx("option",{value:"oldest",children:"Oldest First"}),f.jsx("option",{value:"highest",children:"Highest Rating"}),f.jsx("option",{value:"lowest",children:"Lowest Rating"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter By"}),f.jsxs("select",{value:d,onChange:R=>p(R.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent",children:[f.jsx("option",{value:"all",children:"All Reviews"}),f.jsx("option",{value:"positive",children:"Positive (4+ stars)"}),f.jsx("option",{value:"negative",children:"Negative (1-2 stars)"}),f.jsx("option",{value:"responded",children:"Responded"}),f.jsx("option",{value:"unresponded",children:"Needs Response"})]})]})]})]}),f.jsx("div",{className:"divide-y divide-gray-100",children:C.length===0?f.jsxs("div",{className:"p-8 sm:p-12 text-center",children:[f.jsx("div",{className:"bg-gray-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:f.jsx(_f,{className:"h-10 w-10 text-gray-400"})}),f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No reviews found"}),f.jsx("p",{className:"text-gray-600 text-sm max-w-md mx-auto",children:t.length===0?"You don't have any reviews yet. Encourage customers to leave reviews by providing excellent service and follow-up communication!":"No reviews match your current filters. Try adjusting your search criteria."})]}):C.map((R,A)=>f.jsx("div",{className:"p-4 sm:p-6 hover:bg-gray-50 transition-all duration-200 animate-fade-in",style:{animationDelay:`${A*.1}s`},children:f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:R.createdAt&&new Date(R.createdAt.seconds*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}),!R.pharmacyResponse&&f.jsx("span",{className:"text-xs bg-orange-100 text-orange-600 px-2 py-1 rounded-full font-medium",children:"Needs Response"})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Wl,{name:R.productName,image:r[R.productId]?.image,category:r[R.productId]?.category,size:40,className:"flex-shrink-0"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h4",{className:"font-semibold text-gray-900 text-sm sm:text-base line-clamp-1",title:R.productName,children:R.productName}),f.jsx("p",{className:"text-xs text-gray-500 truncate",children:r[R.productId]?.category||"Medicine"})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"flex",children:G(R.rating)}),f.jsxs("span",{className:"text-sm text-gray-600",children:["(",R.rating,"/5)"]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Reviewed by:"}),f.jsx("span",{className:"font-medium text-gray-800 text-sm",children:R.customerName||R.name}),R.verified&&f.jsx("span",{className:"text-xs bg-green-100 text-green-600 px-2 py-0.5 rounded-full font-medium",children:"Verified"})]}),f.jsx("div",{className:"bg-gray-50 rounded-lg p-3 sm:p-4",children:f.jsx("p",{className:"text-gray-800 text-sm sm:text-base leading-relaxed",children:R.comment})}),R.helpful>0&&f.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[f.jsx("span",{children:""}),f.jsxs("span",{children:[R.helpful," people found this helpful"]})]}),R.pharmacyResponse&&f.jsxs("div",{className:"ml-0 sm:ml-4 bg-gradient-to-r from-blue-50 to-sky-50 dark:from-blue-900/20 dark:to-sky-900/20 rounded-lg p-3 sm:p-4 border-l-4 border-blue-400 dark:border-blue-500 shadow-sm",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(u9,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 flex-shrink-0"}),f.jsx("span",{className:"text-sm font-semibold text-blue-900 dark:text-blue-300",children:"Your Response"}),f.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 ml-auto",children:R.pharmacyResponse.respondedAt&&new Date(R.pharmacyResponse.respondedAt.seconds*1e3).toLocaleDateString()})]}),f.jsx("p",{className:"text-blue-900 dark:text-blue-200 text-sm leading-relaxed",children:R.pharmacyResponse.message||R.pharmacyResponse})]}),!R.pharmacyResponse&&f.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[f.jsxs("button",{onClick:()=>y(F=>({...F,[R.id]:!F[R.id]})),className:"flex items-center gap-2 text-sky-600 dark:text-sky-400 hover:text-sky-700 dark:hover:text-sky-300 text-sm font-medium transition-colors",children:[f.jsx(u9,{className:"h-4 w-4"}),w[R.id]?"Cancel Response":"Respond to Review"]}),w[R.id]&&f.jsxs("div",{className:"mt-3 space-y-3",children:[f.jsxs("div",{className:"relative",children:[f.jsx("textarea",{value:g[R.id]||"",onChange:F=>m(B=>({...B,[R.id]:F.target.value})),placeholder:"Write a thoughtful response to this review...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 dark:focus:ring-sky-400 dark:focus:border-sky-400 resize-none text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",rows:4,maxLength:500}),f.jsxs("div",{className:"absolute bottom-2 right-2 text-xs text-gray-400 dark:text-gray-500",children:[(g[R.id]||"").length,"/500"]})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[f.jsx("button",{onClick:()=>V(R.id,R.productId,g[R.id]||""),className:"flex-1 sm:flex-none px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors text-sm font-medium disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed",disabled:!g[R.id]?.trim(),children:"Submit Response"}),f.jsx("button",{onClick:()=>y(F=>({...F,[R.id]:!1})),className:"flex-1 sm:flex-none px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:"Cancel"})]})]})]})]})},R.id))})]})}const Bue=({review:t,onDismiss:e,onViewReview:r})=>{const[n,i]=M.useState(!1);M.useEffect(()=>{i(!0);const l=setTimeout(()=>{s()},5e3);return()=>clearTimeout(l)},[]);const s=()=>{i(!1),setTimeout(()=>{e()},300)},a=()=>{r(),s()},o=l=>[...Array(5)].map((c,d)=>f.jsx(I5,{size:12,className:`${d<l?"text-yellow-400 fill-current":"text-gray-300"}`},d));return f.jsx("div",{className:`fixed top-4 right-4 z-50 transform transition-all duration-300 ${n?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,children:f.jsxs("div",{className:"bg-white border-l-4 border-sky-500 dark:border-gray-600 dark:border-gray-600 rounded-lg shadow-lg p-4 max-w-sm",children:[f.jsxs("div",{className:"flex items-start justify-between mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(_f,{size:16,className:"text-sky-500"}),f.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"New Review"})]}),f.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:f.jsx(ew,{size:16})})]}),f.jsxs("div",{className:"mb-3",children:[f.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.productName}),f.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[o(t.rating),f.jsxs("span",{className:"text-xs text-gray-600 ml-1",children:["by ",t.customerName]})]})]}),f.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:t.comment}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:s,className:"px-3 py-1 text-xs text-gray-600 hover:text-gray-800 transition-colors",children:"Dismiss"}),f.jsx("button",{onClick:a,className:"px-3 py-1 bg-sky-500 text-white text-xs rounded hover:bg-sky-600 transition-colors",children:"View & Respond"})]})]})})},Vue=({newReviews:t,onDismissReview:e,onViewReview:r})=>{const[n,i]=M.useState([]);M.useEffect(()=>{if(t.length>0){const o=t[0];n.some(c=>c.id===o.id)||i(c=>[o,...c.slice(0,2)])}},[t]);const s=o=>{i(l=>l.filter(c=>c.id!==o)),e(o)},a=o=>{i(l=>l.filter(c=>c.id!==o)),r(o)};return f.jsx(f.Fragment,{children:n.map((o,l)=>f.jsx("div",{style:{transform:`translateY(${l*80}px)`,zIndex:50-l},className:"absolute",children:f.jsx(Bue,{review:o,onDismiss:()=>s(o.id),onViewReview:()=>a(o.id)})},o.id))})};function Uue(){const[t,e]=M.useState([]),[r,n]=M.useState(0),{user:i}=In();return M.useEffect(()=>{if(!i?.uid)return;const o=Tr(dr(gt,"products"),zr("pharmacyId","==",i.uid)),l=ri(o,c=>{const d=[];return e([]),n(0),c.docs.forEach(p=>{const g={id:p.id,...p.data()},m=new Date;m.setDate(m.getDate()-7);const w=Tr(dr(gt,"products",p.id,"reviews"),zr("createdAt",">=",m),Zs("createdAt","desc"),dh(20)),y=ri(w,k=>{const O=k.docs.map(P=>({id:P.id,productId:p.id,productName:g.name,productImage:g.image,...P.data(),createdAt:P.data().createdAt?.toDate()||new Date})).filter(P=>!P.pharmacyResponse);e(P=>{const Y=[...P.filter(G=>G.productId!==p.id),...O].sort((G,L)=>L.createdAt-G.createdAt).slice(0,50);return n(Y.length),Y})});d.push(y)}),()=>{d.forEach(p=>p())}});return()=>l()},[i?.uid]),{newReviews:t,unreadReviewsCount:r,markReviewsAsRead:()=>{e([]),n(0)},markReviewAsResponded:o=>{e(l=>{const c=l.filter(d=>d.id!==o);return n(c.length),c})}}}function zue({onClick:t,disabled:e}){return os.createPortal(f.jsx("button",{className:`fixed bottom-[10rem] right-6 z-[100] bg-sky-500 text-white rounded-full shadow-lg
                 w-12 h-12 flex items-center justify-center disabled:opacity-0 disabled:cursor-not-allowed`,"aria-label":"Add Product",onClick:t,disabled:e,children:f.jsx("span",{className:"text-3xl font-bold leading-none",children:"+"})}),document.body)}function YL(){const[t,e]=M.useState([]),{profile:r,user:n}=In(),[i,s]=M.useState(!1),[a,o]=M.useState(!1),[l,c]=M.useState([]),[d,p]=M.useState({type:"month",value:""}),[g,m]=M.useState(null),[w,y]=M.useState(0),[k,T]=M.useState(0),[O,P]=M.useState(0),[V,Y]=M.useState([]),[G,L]=M.useState([]),[N,C]=M.useState([]),[R,A]=M.useState(0),[F,B]=M.useState(!1),[te,pe]=M.useState("overview"),[Ee,ve]=M.useState(0),[re,W]=M.useState(0),[ne,Q]=M.useState(0),[I,H]=M.useState(0),[X,J]=M.useState(0),[ue,we]=M.useState(0),fe=Ci(),{newReviews:me,unreadReviewsCount:be,markReviewsAsRead:Le}=Uue(),ee=()=>f.jsxs("header",{className:"sm:hidden fixed top-0 left-0 right-0 z-[100] border-b border-gray-100/50 dark:border-gray-700/50 shadow-sm px-4 py-4 transition-all duration-200",style:{backgroundColor:document.documentElement.classList.contains("dark")?"rgba(17, 24, 39, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)"},children:[f.jsxs("h1",{className:"mt-8 text-[25px] font-light text-black dark:text-white leading-none animate-slideInLeft mb-4",children:["My",f.jsx("br",{}),"Dashboard"]}),f.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[f.jsx("button",{onClick:()=>pe("overview"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${te==="overview"?"bg-white dark:bg-gray-800 text-sky-600 dark:text-sky-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:"Overview"}),f.jsxs("button",{onClick:()=>{pe("reviews"),be>0&&Le()},className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors relative ${te==="reviews"?"bg-white dark:bg-gray-800 text-sky-600 dark:text-sky-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Reviews",be>0&&f.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-semibold",children:be>9?"9+":be})]})]})]});return M.useEffect(()=>{async function Be(){if(r&&r.role==="pharmacy"){const Re=await nP(5,r.uid);e(Re)}else e([])}Be()},[r]),M.useEffect(()=>{async function Be(){if(!r||r.role!=="pharmacy")return c([]);const Re=Tr(dr(gt,"orders"),zr("pharmacyId","==",r.uid)),$e=(await Fn(Re)).docs.map(je=>je.data());let qe={},it=je=>"";d.type==="date"?it=je=>{const Ge=je.createdAt?.toDate?.()||new Date(je.createdAt);return Ge?Ge.toLocaleDateString("en-GB"):""}:d.type==="month"?it=je=>{const Ge=je.createdAt?.toDate?.()||new Date(je.createdAt);return Ge?`${Ge.getMonth()+1}/${Ge.getFullYear()}`:""}:d.type==="year"&&(it=je=>{const Ge=je.createdAt?.toDate?.()||new Date(je.createdAt);return Ge?`${Ge.getFullYear()}`:""}),$e.forEach(je=>{const Ge=it(je);Ge&&(d.value&&!Ge.startsWith(d.value)||(qe[Ge]=(qe[Ge]||0)+(je.total||0)))});const oe=Object.entries(qe).map(([je,Ge])=>({label:je,value:Ge}));if(oe.sort((je,Ge)=>je.label.localeCompare(Ge.label)),c(oe),oe.length>0){const je=oe.reduce((Ge,Tt)=>Tt.value>Ge.value?Tt:Ge,oe[0]);m(je)}else m(null)}Be()},[r,d]),M.useEffect(()=>{async function Be(){if(!r||r.role!=="pharmacy")return;const Re=r.uid||n?.uid;if(!Re)return;const ae=await Fn(Tr(dr(gt,"products"),zr("pharmacyId","==",Re)));y(ae.size);const $e=ae.docs.filter(Pt=>{const mt=Pt.data(),_t=mt.stock||0,Xt=mt.lowStockThreshold||10;return _t<=Xt});H($e.length);const qe=await Fn(Tr(dr(gt,"orders"),zr("pharmacyId","==",Re)));T(qe.size);let it=0,oe=[];const je=new Date().getMonth(),Ge=new Date().getFullYear(),Tt=je===0?11:je-1,Pe=je===0?Ge-1:Ge;let Ke=0,ot=0,We=0;const Lt=new Set,St=[];if(qe.forEach(Pt=>{const mt=Pt.data();it+=mt.total||0,oe.push({id:Pt.id,...mt});const _t=mt.createdAt?.toDate?.()||new Date(mt.createdAt),Xt=_t.getMonth(),Kt=_t.getFullYear();Xt===je&&Kt===Ge&&Ke++,Xt===Tt&&Kt===Pe&&ot++,(mt.status==="pending"||mt.status==="processing")&&We++,Xt===je&&Kt===Ge&&mt.customerId&&Lt.add(mt.customerId),(mt.status==="completed"||mt.status==="delivered")&&St.push(mt)}),P(it),J(Ke),we(ot),Q(We),ve(Lt.size),St.length>0){const Pt=St.reduce((mt,_t)=>mt+(_t.total||0),0);W(Pt/St.length)}else W(0);oe.sort((Pt,mt)=>(mt.createdAt?.toMillis?.()||0)-(Pt.createdAt?.toMillis?.()||0)),Y(oe.slice(0,3))}Be()},[r,n]),M.useEffect(()=>{async function Be(){if(!r||r.role!=="pharmacy"){L([]);return}const Re=r.uid||n?.uid;if(!Re)return;const ae=Tr(dr(gt,"orders"),zr("pharmacyId","==",Re)),qe=(await Fn(ae)).docs.map(Ge=>Ge.data()),it=new Date,oe=[];for(let Ge=5;Ge>=0;Ge--){const Tt=new Date(it.getFullYear(),it.getMonth()-Ge,1);oe.push({label:Tt.toLocaleString("default",{month:"short"}),year:Tt.getFullYear(),month:Tt.getMonth()+1})}const je=oe.map(({label:Ge,year:Tt,month:Pe})=>{const Ke=qe.filter(ot=>{const We=ot.createdAt?.toDate?.()||new Date(ot.createdAt);return We.getFullYear()===Tt&&We.getMonth()+1===Pe}).length;return{label:Ge,value:Ke}});L(je)}Be()},[r,n]),M.useEffect(()=>{async function Be(){if(!r||r.role!=="pharmacy"){C([]),A(0);return}const Re=r.uid||n?.uid;if(!Re)return;const ae=Tr(dr(gt,"threads"),zr("vendorId","==",Re),Zs("lastAt","desc"),dh(3)),qe=(await Fn(ae)).docs.map(oe=>({id:oe.id,...oe.data()}));C(qe.map(oe=>({...oe,unread:oe.unread?.[Re]||0})));const it=qe.reduce((oe,je)=>oe+(je.unread?.[Re]||0),0);A(it)}Be()},[r,n]),f.jsxs(f.Fragment,{children:[typeof window<"u"&&os.createPortal(f.jsx(ee,{}),document.body),f.jsxs("div",{className:"pt-32 sm:pt-10 pb-32 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-0 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col animate-fadeInUp",children:[f.jsxs("header",{className:"hidden sm:block pb-2 pt-4",children:[f.jsxs("h1",{className:"text-[25px] font-light text-black dark:text-white leading-none animate-slideInLeft mb-4",children:["My",f.jsx("br",{}),"Dashboard"]}),f.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1 mb-2",children:[f.jsx("button",{onClick:()=>pe("overview"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${te==="overview"?"bg-white dark:bg-gray-800 text-sky-600 dark:text-sky-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:"Overview"}),f.jsxs("button",{onClick:()=>{pe("reviews"),be>0&&Le()},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors relative ${te==="reviews"?"bg-white dark:bg-gray-800 text-sky-600 dark:text-sky-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:["Reviews",be>0&&f.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-semibold",children:be>9?"9+":be})]})]})]}),f.jsx("main",{className:"flex-1 px-3 sm:px-4 py-2 sm:py-6 relative w-full mt-4",children:te==="overview"?f.jsxs("div",{className:"w-full grid grid-cols-1 lg:grid-cols-[1fr_420px] gap-6 items-start pb-16 mt-10",children:[f.jsxs("div",{className:"flex flex-col gap-6",children:[f.jsxs("div",{className:"bg-gradient-to-br from-[#F7F7F7] to-[#F0F8FF] dark:from-gray-800 dark:to-gray-900 rounded-2xl border border-sky-500 dark:border-sky-400 p-6 relative overflow-hidden card-interactive animate-fadeInUp",style:{animationDelay:"0.1s"},children:[f.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-sky-100/40 dark:from-sky-800/40 to-transparent rounded-full -translate-y-10 translate-x-10"}),f.jsxs("div",{className:"relative z-10",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-black dark:text-white font-light text-xl tracking-tight animate-slideInLeft",style:{animationDelay:"0.2s"},children:"Top Products"}),f.jsx("div",{className:"px-3 py-1 bg-sky-100 dark:bg-sky-800 rounded-full text-xs text-sky-700 dark:text-sky-300 font-medium animate-bounceIn",style:{animationDelay:"0.3s"},children:" Best Sellers"})]}),t.length===0?f.jsxs("div",{className:"text-center py-8 animate-fadeInUp",style:{animationDelay:"0.4s"},children:[f.jsx("div",{className:"text-4xl mb-3",children:""}),f.jsx("div",{className:"text-zinc-400 dark:text-zinc-500 text-sm",children:"No sales data yet"}),f.jsx("div",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:"Start selling products to see your top performers"})]}):f.jsx("div",{className:"flex flex-col gap-4",children:t.map((Be,Re)=>f.jsxs("div",{className:"group hover:bg-white/50 dark:hover:bg-gray-700/50 rounded-xl p-3 transition-all duration-200 relative",children:[f.jsx("div",{className:`absolute -left-2 -top-2 w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold ${Re===0?"bg-gradient-to-br from-yellow-400 to-yellow-600":Re===1?"bg-gradient-to-br from-gray-400 to-gray-600":Re===2?"bg-gradient-to-br from-orange-400 to-orange-600":"bg-gradient-to-br from-sky-400 to-sky-600"}`,children:Re+1}),f.jsxs("div",{className:"flex items-center justify-between ml-4",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"font-medium text-[14px] text-zinc-800 dark:text-zinc-200 truncate max-w-[140px] group-hover:text-sky-700 dark:group-hover:text-sky-400 transition-colors",children:Be.name}),f.jsxs("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:[Be.sold," units sold"]})]}),f.jsx("div",{className:"flex-1 mx-4 relative",children:f.jsxs("div",{className:"h-4 bg-gradient-to-r from-sky-100 to-blue-100 rounded-full relative overflow-hidden",children:[f.jsx("div",{className:`h-4 rounded-full transition-all duration-1000 ease-out relative ${Re===0?"bg-gradient-to-r from-yellow-400 to-yellow-500":Re===1?"bg-gradient-to-r from-gray-400 to-gray-500":Re===2?"bg-gradient-to-r from-orange-400 to-orange-500":"bg-gradient-to-r from-sky-400 to-sky-500"}`,style:{width:`${Math.max(15,Be.sold/(t[0]?.sold||1)*100)}%`,boxShadow:"0 2px 8px rgba(54, 165, 255, 0.3)"},children:f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 transform -skew-x-12 animate-pulse"})}),f.jsxs("div",{className:"absolute top-0 right-2 h-4 flex items-center text-xs font-medium text-white",style:{left:`${Math.max(15,Be.sold/(t[0]?.sold||1)*100)}%`,transform:"translateX(-100%)"},children:[Math.round(Be.sold/(t[0]?.sold||1)*100),"%"]})]})}),f.jsxs("div",{className:"text-right min-w-[50px]",children:[f.jsx("span",{className:`font-bold text-lg ${Re===0?"text-yellow-600 dark:text-yellow-400":Re===1?"text-gray-600 dark:text-gray-400":Re===2?"text-orange-600 dark:text-orange-400":"text-sky-600 dark:text-sky-400"}`,children:Be.sold}),f.jsx("div",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:"units"})]})]}),f.jsx("div",{className:"absolute inset-0 rounded-xl border-2 border-transparent group-hover:border-sky-200 transition-all duration-200"})]},Be.id||Re))})]})]}),f.jsxs("div",{className:"flex gap-2 w-full",children:[f.jsx("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700",onClick:()=>s(!0),children:"+ Add Product"}),f.jsx("button",{className:"flex-1 rounded-full border border-sky-600 dark:border-sky-400 text-sky-600 dark:text-sky-400 text-[13px] font-light py-2 hover:bg-[#E3F3FF] dark:hover:bg-sky-900/30",onClick:()=>o(!0),children:"Bulk Upload"})]}),i&&f.jsx(PP,{pharmacyId:r?.uid||n?.uid,onClose:()=>s(!1)}),a&&f.jsx(zF,{pharmacyId:r?.uid||n?.uid,onClose:()=>o(!1)}),f.jsx("div",{children:f.jsx(jue,{data:G})})]}),f.jsxs("div",{className:"flex flex-col gap-6 pb-8 relative z-0",children:[f.jsx("div",{className:"relative z-0",children:f.jsx(Fue,{data:l,filter:d,onFilterChange:p,topPeriod:g})}),f.jsx("div",{children:f.jsx(Lue,{cards:[f.jsxs("div",{children:[f.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:"Total Products"}),f.jsx("div",{className:"text-[19px] font-semibold text-sky-700 dark:text-sky-400 tracking-tight",children:w})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:"Total Orders"}),f.jsx("div",{className:"text-[19px] font-semibold text-sky-700 dark:text-sky-400 tracking-tight",children:k})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:"Total Revenue"}),f.jsxs("div",{className:"text-[19px] font-semibold text-sky-700 dark:text-sky-400 tracking-tight",children:["",O.toLocaleString()]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:"Active Customers"}),f.jsx("div",{className:"text-[19px] font-semibold text-emerald-600 dark:text-emerald-400 tracking-tight",children:Ee}),f.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:"This Month"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:"Avg Order Value"}),f.jsxs("div",{className:"text-[19px] font-semibold text-purple-600 dark:text-purple-400 tracking-tight",children:["",re.toLocaleString(void 0,{maximumFractionDigits:0})]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:"Pending Orders"}),f.jsx("div",{className:"text-[19px] font-semibold text-orange-600 dark:text-orange-400 tracking-tight",children:ne}),f.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:"Awaiting"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:"Low Stock Items"}),f.jsx("div",{className:"text-[19px] font-semibold text-red-600 dark:text-red-400 tracking-tight",children:I}),f.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:"Need Restock"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:"Orders This Month"}),f.jsx("div",{className:"text-[19px] font-semibold text-blue-600 dark:text-blue-400 tracking-tight",children:X}),f.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:ue>0?X>=ue?f.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400",children:[" +",((X-ue)/ue*100).toFixed(0),"%"]}):f.jsxs("span",{className:"text-red-500 dark:text-red-400",children:[" -",((ue-X)/ue*100).toFixed(0),"%"]}):f.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:"No comparison"})})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:"Pending Reviews"}),f.jsx("div",{className:"text-[19px] font-semibold text-yellow-600 dark:text-yellow-400 tracking-tight",children:be}),f.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:"Need Response"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:"Recent Reviews"}),f.jsx("div",{className:"text-[19px] font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight",children:me.length}),f.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:"Last 24h"})]})]})}),I>0&&f.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 border border-red-200 dark:border-red-700 rounded-2xl p-4",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:f.jsx("span",{className:"text-white text-sm font-bold",children:"!"})}),f.jsxs("div",{children:[f.jsx("div",{className:"text-red-700 dark:text-red-400 font-medium text-sm",children:"Low Stock Alert"}),f.jsxs("div",{className:"text-red-600 dark:text-red-500 text-xs",children:[I," item",I>1?"s":""," need restocking"]})]})]}),f.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30 rounded-lg px-3 py-2",children:" Check your inventory to avoid running out of popular products"})]}),f.jsx("div",{children:f.jsx(Due,{threads:N,unreadCount:R,onThreadClick:Be=>fe(`/messages/${Be.id}`)})}),f.jsx("div",{children:f.jsx(Oue,{reviews:me.slice(0,5),onViewAllReviews:()=>{pe("reviews"),Le()}})})]})]}):f.jsx("div",{className:"pb-16 mt-10",children:f.jsx(Mue,{})})}),f.jsx(zue,{onClick:()=>s(!0),disabled:i}),f.jsx(Vue,{newReviews:me,onDismissReview:Be=>{},onViewReview:Be=>{pe("reviews"),Le()}})]})]})}function $ue(){const[t,e]=M.useState(0),[r,n]=M.useState(null),[i,s]=M.useState(null),[a,o]=M.useState(!1),l=M.useRef(null),c=M.useRef(0),d=M.useRef(null),p=Ci(),g=Xl(),{profile:m}=In(),w=["/","/orders","/messages","/cart","/profile"],y=["/dashboard","/orders","/messages","/profile"],k=m?.role==="pharmacy"?y:w,T=k.indexOf(g.pathname),O=typeof window<"u"&&window.matchMedia&&window.matchMedia("(max-width: 1024px)").matches,P=C=>{switch(C){case"/":return f.jsx(kP,{});case"/orders":return f.jsx(SP,{});case"/messages":return f.jsx(CP,{});case"/cart":return f.jsx(TP,{});case"/profile":return m?.role==="pharmacy"?f.jsx(XL,{}):f.jsx(IP,{});case"/dashboard":return f.jsx(YL,{});default:return null}},V=C=>{if(!O)return;const A=C.touches[0].clientX,F=window.innerWidth,B=50,te=A<B,pe=A>F-B;if(!te&&!pe)return;l.current=A,c.current=A;let Ee=null,ve=-1;pe&&T<k.length-1?(Ee="left",ve=T+1):te&&T>0&&(Ee="right",ve=T-1),Ee&&ve!==-1&&(n(Ee),s(k[ve]),o(!0))},Y=C=>{if(!a||l.current===null)return;C.preventDefault();const A=C.touches[0].clientX,F=A-l.current,B=window.innerWidth;c.current=A,d.current&&cancelAnimationFrame(d.current),d.current=requestAnimationFrame(()=>{const te=B*.7;let pe=Math.abs(F)/te;const Ee=pe<.5?2*pe*pe:-1+(4-2*pe)*pe;pe=Math.min(Ee,1),r==="left"&&F<0||r==="right"&&F>0?(e(pe),pe>.25&&t<=.25&&"vibrate"in navigator&&navigator.vibrate(30)):Math.abs(F)>15&&G()})},G=()=>{if(!a)return;if(t>.25&&i)"vibrate"in navigator&&navigator.vibrate([50,50,100]),e(1),setTimeout(()=>{p(i,{state:{slide:r==="left"?"left":"right"}})},200);else{"vibrate"in navigator&&navigator.vibrate(25),(()=>{let F=t;const B=()=>{F*=.85,e(F),F>.01?requestAnimationFrame(B):(e(0),n(null),s(null),o(!1),l.current=null)};requestAnimationFrame(B)})();return}setTimeout(()=>{e(0),n(null),s(null),o(!1),l.current=null},250)};M.useEffect(()=>{if(!O)return;const C=document.body;return C.addEventListener("touchstart",V,{passive:!0}),C.addEventListener("touchmove",Y,{passive:!1}),C.addEventListener("touchend",G,{passive:!0}),C.addEventListener("touchcancel",G,{passive:!0}),()=>{C.removeEventListener("touchstart",V),C.removeEventListener("touchmove",Y),C.removeEventListener("touchend",G),C.removeEventListener("touchcancel",G),d.current&&cancelAnimationFrame(d.current)}},[O,a,t,r,T]);const L=()=>{if(!a||!r)return{};const C=t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,R=r==="left"?-C*100:C*100,A=1-C*.05,F=r==="left"?C*3:-C*3;return{transform:`translateX(${R}%) scale(${A}) rotateY(${F}deg)`,transformOrigin:r==="left"?"right center":"left center",transition:a?"none":"transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)",filter:`brightness(${1-C*.1})`}},N=()=>{if(!a||!r)return{display:"none"};const C=t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,R=r==="left"?100-C*100:-100+C*100,A=.95+C*.05,F=r==="left"?(1-C)*-5:(1-C)*5;return{transform:`translateX(${R}%) scale(${A}) rotateY(${F}deg)`,transformOrigin:r==="left"?"left center":"right center",transition:a?"none":"transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)",position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"white",zIndex:a?10:-1,boxShadow:r==="left"?`-10px 0 30px rgba(0,0,0,${.1*(1-C)})`:`10px 0 30px rgba(0,0,0,${.1*(1-C)})`,filter:`brightness(${.9+C*.1})`}};return f.jsxs("div",{className:"relative min-h-screen w-full overflow-hidden",children:[f.jsxs("div",{style:L(),className:"relative",children:[f.jsx(Hw,{}),a&&f.jsx("div",{className:"absolute inset-0 bg-black pointer-events-none",style:{opacity:t*.2,zIndex:5,transition:"opacity 0.1s ease-out"}})]}),a&&i&&f.jsx("div",{style:N(),children:f.jsxs("div",{className:"h-full bg-white relative",children:[P(i),t<.6&&f.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/95 to-white/90 backdrop-blur-sm flex items-center justify-center pointer-events-none",style:{opacity:Math.max(0,1-t*2),transition:"opacity 0.15s ease-out"},children:f.jsxs("div",{className:"text-center space-y-3",children:[f.jsxs("div",{className:"relative w-14 h-14 mx-auto",children:[f.jsxs("svg",{className:"w-14 h-14 transform -rotate-90",viewBox:"0 0 100 100",children:[f.jsx("circle",{cx:"50",cy:"50",r:"30",fill:"none",stroke:"#e5e7eb",strokeWidth:"4"}),f.jsx("circle",{cx:"50",cy:"50",r:"30",fill:"none",stroke:"url(#progressGradient)",strokeWidth:"4",strokeDasharray:`${t*188.4} 188.4`,className:"transition-all duration-75 ease-out",strokeLinecap:"round"}),f.jsx("defs",{children:f.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[f.jsx("stop",{offset:"0%",stopColor:"#0ea5e9"}),f.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]})})]}),f.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:f.jsxs("span",{className:"text-xs font-semibold text-sky-600",children:[Math.round(t*100),"%"]})})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-xs font-medium text-gray-700 mb-0.5",children:t<.25?"Keep swiping...":"Almost there!"}),f.jsx("div",{className:"text-[10px] text-gray-500",children:t<.25?"Continue to preview":"Release to navigate"})]}),f.jsx("div",{className:"flex items-center justify-center space-x-1",children:[.1,.15,.2,.25].map((C,R)=>f.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all duration-200 ${t>C?"bg-gradient-to-r from-sky-500 to-cyan-500 scale-110":"bg-gray-300 scale-100"}`},R))})]})})]})})]})}const Hue=()=>{const{getSetting:t}=qg();M.useEffect(()=>{t(Nr.HIGH_CONTRAST)?document.documentElement.classList.add("high-contrast"):document.documentElement.classList.remove("high-contrast")},[t(Nr.HIGH_CONTRAST)]),M.useEffect(()=>{t(Nr.REDUCE_MOTION)?document.documentElement.classList.add("reduce-motion"):document.documentElement.classList.remove("reduce-motion")},[t(Nr.REDUCE_MOTION)]),M.useEffect(()=>{const e=t(Nr.THEME_MODE),r=document.documentElement;if(r.classList.remove("light","dark"),e==="system"){const n=window.matchMedia("(prefers-color-scheme: dark)").matches;r.classList.add(n?"dark":"light");const i=window.matchMedia("(prefers-color-scheme: dark)"),s=a=>{r.classList.remove("light","dark"),r.classList.add(a.matches?"dark":"light")};return i.addEventListener("change",s),()=>i.removeEventListener("change",s)}else r.classList.add(e)},[t(Nr.THEME_MODE)]),M.useEffect(()=>{const e=t(Nr.FONT_SIZE),r=document.documentElement;r.classList.remove("font-small","font-medium","font-large"),r.classList.add(`font-${e}`)},[t(Nr.FONT_SIZE)]),M.useEffect(()=>{const e=t(Nr.LANGUAGE);document.documentElement.lang=e},[t(Nr.LANGUAGE)])};function que({color:t="black",...e}){return f.jsx("svg",{width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:f.jsx("path",{d:"M1.38004 6.00487L0.919293 5.79263L0.919001 5.79327L1.38004 6.00487ZM3.22754 4.0549L2.89744 3.66972L2.89735 3.6698L3.22754 4.0549ZM4.24209 3.18542L3.91215 2.80011L3.91199 2.80024L4.24209 3.18542ZM12.1657 3.18441L12.4958 2.79923L12.4958 2.79918L12.1657 3.18441ZM13.1803 4.05388L13.5107 3.66894L13.5104 3.6687L13.1803 4.05388ZM15.0268 6.00385L14.5657 6.21545L14.566 6.21609L15.0268 6.00385ZM10.233 17.0371C10.233 17.3173 10.4601 17.5444 10.7403 17.5444C11.0205 17.5444 11.2476 17.3173 11.2476 17.0371H10.7403H10.233ZM5.16027 17.0371C5.16027 17.3173 5.38738 17.5444 5.66755 17.5444C5.94771 17.5444 6.17482 17.3173 6.17482 17.0371H5.66755H5.16027ZM1.10205 8.6772H1.60933C1.60933 7.2531 1.62014 6.69785 1.84108 6.21646L1.38004 6.00487L0.919001 5.79327C0.583964 6.52326 0.594774 7.34577 0.594774 8.6772H1.10205ZM1.38004 6.00487L1.84078 6.2171C2.06254 5.7357 2.4764 5.36715 3.55773 4.44L3.22754 4.0549L2.89735 3.6698C1.88667 4.53637 1.25554 5.06266 0.919294 5.79263L1.38004 6.00487ZM3.22754 4.0549L3.55764 4.44008L4.57219 3.5706L4.24209 3.18542L3.91199 2.80024L2.89744 3.66972L3.22754 4.0549ZM4.24209 3.18542L4.57204 3.57074C5.5283 2.75189 6.2094 2.16896 6.79004 1.78503C7.35875 1.40899 7.77821 1.26082 8.20392 1.26082V0.75354V0.246264C7.50348 0.246264 6.88809 0.503911 6.23046 0.938751C5.58476 1.3657 4.84802 1.99872 3.91215 2.80011L4.24209 3.18542ZM8.20392 0.75354V1.26082C8.62982 1.26082 9.04961 1.40889 9.61834 1.78463C10.199 2.16824 10.8801 2.7509 11.8357 3.56963L12.1657 3.18441L12.4958 2.79918C11.5603 1.99767 10.8235 1.3649 10.1776 0.938137C9.51974 0.503509 8.90417 0.246264 8.20392 0.246264V0.75354ZM12.1657 3.18441L11.8356 3.56959L12.8502 4.43906L13.1803 4.05388L13.5104 3.6687L12.4958 2.79923L12.1657 3.18441ZM13.1803 4.05388L12.8499 4.43882C13.9308 5.36653 14.345 5.73455 14.5657 6.21545L15.0268 6.00385L15.4878 5.79225C15.1526 5.06178 14.5197 4.53496 13.5107 3.66894L13.1803 4.05388ZM15.0268 6.00385L14.566 6.21609C14.7876 6.69715 14.7985 7.25196 14.7985 8.67618H15.3058H15.8131C15.8131 7.34488 15.8239 6.52193 15.4875 5.79162L15.0268 6.00385ZM15.3058 8.67618H14.7985V12.9789H15.3058H15.8131V8.67618H15.3058ZM15.3058 12.9789H14.7985C14.7985 13.95 14.7974 14.627 14.7287 15.1377C14.662 15.6338 14.5399 15.8965 14.3526 16.0839L14.7113 16.4426L15.07 16.8013C15.4771 16.3941 15.6523 15.8818 15.7342 15.273C15.8141 14.6789 15.8131 13.9213 15.8131 12.9789H15.3058ZM14.7113 16.4426L14.3526 16.0839C14.1652 16.2713 13.9024 16.3933 13.4064 16.46C12.8956 16.5288 12.2187 16.5298 11.2476 16.5298V17.0371V17.5444C12.1899 17.5444 12.9475 17.5455 13.5416 17.4655C14.1504 17.3836 14.6628 17.2084 15.07 16.8013L14.7113 16.4426ZM11.2476 17.0371V16.5298H5.16026V17.0371V17.5444H11.2476V17.0371ZM5.16026 17.0371V16.5298C4.18918 16.5298 3.5122 16.5288 3.00146 16.46C2.50541 16.3933 2.24265 16.2713 2.05528 16.0839L1.69658 16.4426L1.33788 16.8013C1.74503 17.2084 2.2574 17.3836 2.86619 17.4655C3.4603 17.5455 4.21789 17.5444 5.16026 17.5444V17.0371ZM1.69658 16.4426L2.05528 16.0839C1.8679 15.8965 1.74585 15.6338 1.67911 15.1377C1.61041 14.627 1.60933 13.95 1.60933 12.9789H1.10205H0.594774C0.594774 13.9213 0.593696 14.6789 0.673619 15.273C0.755519 15.8818 0.930728 16.3941 1.33788 16.8013L1.69658 16.4426ZM1.10205 12.9789H1.60933V8.6772H1.10205H0.594774V12.9789H1.10205ZM10.7403 17.0371H11.2476V11.9643H10.7403H10.233V17.0371H10.7403ZM10.7403 11.9643H11.2476C11.2476 11.5607 11.0872 11.1736 10.8019 10.8882L10.4432 11.2469L10.0845 11.6056C10.1796 11.7008 10.233 11.8298 10.233 11.9643H10.7403ZM10.4432 11.2469L10.8019 10.8882C10.5165 10.6029 10.1294 10.4425 9.72576 10.4425V10.9498V11.4571C9.86029 11.4571 9.98932 11.5105 10.0845 11.6056L10.4432 11.2469ZM9.72576 10.9498V10.4425H6.6821V10.9498V11.4571H9.72576V10.9498ZM6.6821 10.9498V10.4425C6.27848 10.4425 5.8914 10.6028 5.606 10.8882L5.9647 11.2469L6.3234 11.6056C6.41853 11.5105 6.54756 11.4571 6.6821 11.4571V10.9498ZM5.9647 11.2469L5.606 10.8882C5.3206 11.1736 5.16027 11.5607 5.16027 11.9643H5.66755H6.17482C6.17482 11.8298 6.22827 11.7008 6.3234 11.6056L5.9647 11.2469ZM5.66755 11.9643H5.16027V17.0371H5.66755H6.17482V11.9643H5.66755Z",fill:t})})}function Wue({color:t="black",...e}){return f.jsx("svg",{width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:f.jsx("path",{d:"M5.12519 5.42678H10.9951M5.12519 9.27611H10.9951M5.12519 13.1254H9.03846M3.16855 0.615112H12.9517C14.0324 0.615112 14.9084 1.47681 14.9084 2.53978V15.0501C14.9084 16.1131 14.0324 16.9748 12.9517 16.9748H3.16855C2.08793 16.9748 1.21191 16.1131 1.21191 15.0501V2.53978C1.21191 1.47681 2.08793 0.615112 3.16855 0.615112Z",stroke:t,strokeWidth:"0.85113",strokeLinecap:"round"})})}const Gue=({color:t="black",...e})=>f.jsxs("svg",{width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.7145 1.04437C15.256 1.04437 15.7753 1.25948 16.1582 1.64236C16.5411 2.02525 16.7562 2.54455 16.7562 3.08604V13.2944C16.7562 13.8358 16.5411 14.3551 16.1582 14.738C15.7753 15.1209 15.256 15.336 14.7145 15.336L11.653 15.335L9.31123 17.6768C9.13545 17.8525 8.90158 17.9581 8.65349 17.9737C8.4054 17.9893 8.16015 17.9139 7.96374 17.7615L7.86778 17.6768L5.52599 15.335L2.46452 15.336C1.92303 15.336 1.40373 15.1209 1.02084 14.738C0.637955 14.3551 0.422852 13.8358 0.422852 13.2944V3.08604C0.422852 2.54455 0.637955 2.02525 1.02084 1.64236C1.40373 1.25948 1.92303 1.04437 2.46452 1.04437H14.7145Z",stroke:t,strokeWidth:"0.857499",strokeLinecap:"round",strokeLinejoin:"round"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.58849 9.21104C9.09891 9.21104 9.60932 8.70062 9.60932 8.1902C9.60932 7.67979 9.09891 7.16937 8.58849 7.16937C8.07807 7.16937 7.56868 7.67979 7.56868 8.1902C7.56868 8.70062 8.07807 9.21104 8.58849 9.21104ZM4.50516 9.21104C5.01558 9.21104 5.52599 8.70062 5.52599 8.1902C5.52599 7.67979 5.01558 7.16937 4.50516 7.16937C3.99475 7.16937 3.48535 7.67979 3.48535 8.1902C3.48535 8.70062 3.99475 9.21104 4.50516 9.21104ZM12.6718 9.21104C13.1822 9.21104 13.6926 8.70062 13.6926 8.1902C13.6926 7.67979 13.1822 7.16937 12.6718 7.16937C12.1614 7.16937 11.652 7.67979 11.652 8.1902C11.652 8.70062 12.1614 9.21104 12.6718 9.21104Z",fill:t})]});function Kue({color:t="black",...e}){return f.jsx("svg",{width:"19",height:"18",viewBox:"0 0 19 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:f.jsx("path",{d:"M14.463 13.865C14.9423 13.865 15.4019 14.0554 15.7408 14.3943C16.0797 14.7332 16.2701 15.1929 16.2701 15.6722C16.2701 16.1515 16.0797 16.6111 15.7408 16.95C15.4019 17.289 14.9423 17.4794 14.463 17.4794C13.9837 17.4794 13.524 17.289 13.1851 16.95C12.8462 16.6111 12.6558 16.1515 12.6558 15.6722C12.6558 15.1929 12.8462 14.7332 13.1851 14.3943C13.524 14.0554 13.9837 13.865 14.463 13.865ZM14.463 14.7686C14.2233 14.7686 13.9935 14.8638 13.824 15.0332C13.6546 15.2027 13.5594 15.4325 13.5594 15.6722C13.5594 15.9118 13.6546 16.1417 13.824 16.3111C13.9935 16.4806 14.2233 16.5758 14.463 16.5758C14.7026 16.5758 14.9324 16.4806 15.1019 16.3111C15.2714 16.1417 15.3666 15.9118 15.3666 15.6722C15.3666 15.4325 15.2714 15.2027 15.1019 15.0332C14.9324 14.8638 14.7026 14.7686 14.463 14.7686ZM6.3307 13.865C6.80999 13.865 7.26965 14.0554 7.60856 14.3943C7.94747 14.7332 8.13787 15.1929 8.13787 15.6722C8.13787 16.1515 7.94747 16.6111 7.60856 16.95C7.26965 17.289 6.80999 17.4794 6.3307 17.4794C5.8514 17.4794 5.39174 17.289 5.05283 16.95C4.71392 16.6111 4.52352 16.1515 4.52352 15.6722C4.52352 15.1929 4.71392 14.7332 5.05283 14.3943C5.39174 14.0554 5.8514 13.865 6.3307 13.865ZM6.3307 14.7686C6.09105 14.7686 5.86122 14.8638 5.69176 15.0332C5.52231 15.2027 5.42711 15.4325 5.42711 15.6722C5.42711 15.9118 5.52231 16.1417 5.69176 16.3111C5.86122 16.4806 6.09105 16.5758 6.3307 16.5758C6.57034 16.5758 6.80017 16.4806 6.96963 16.3111C7.13908 16.1417 7.23428 15.9118 7.23428 15.6722C7.23428 15.4325 7.13908 15.2027 6.96963 15.0332C6.80017 14.8638 6.57034 14.7686 6.3307 14.7686ZM16.2701 3.02198H3.86391L6.16805 8.44349H13.5594C13.8576 8.44349 14.1196 8.29892 14.2823 8.08206L16.993 4.46771C17.1105 4.3141 17.1737 4.12435 17.1737 3.92556C17.1737 3.68592 17.0785 3.45609 16.9091 3.28663C16.7396 3.11718 16.5098 3.02198 16.2701 3.02198ZM13.5594 9.34708H6.21323L5.51747 10.7567L5.42711 11.1543C5.42711 11.3939 5.52231 11.6237 5.69176 11.7932C5.86122 11.9626 6.09105 12.0578 6.3307 12.0578H16.2701V12.9614H6.3307C5.8514 12.9614 5.39174 12.771 5.05283 12.4321C4.71392 12.0932 4.52352 11.6335 4.52352 11.1543C4.52326 10.8477 4.60099 10.546 4.74942 10.2778L5.4 8.9495L2.11998 1.2148H0.90918V0.311218H2.71635L3.4844 2.11839H16.2701C16.7494 2.11839 17.2091 2.30879 17.548 2.6477C17.8869 2.98661 18.0773 3.44627 18.0773 3.92556C18.0773 4.37736 17.9237 4.75686 17.6707 5.06408L15.0413 8.57903C14.716 9.03986 14.1738 9.34708 13.5594 9.34708Z",fill:t})})}function Xue({color:t="black",...e}){return f.jsx("svg",{width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:f.jsx("path",{d:"M4.1359 15.3442C4.9803 14.7362 5.87636 14.2557 6.82408 13.9027C7.77114 13.5491 8.797 13.3722 9.90168 13.3722C11.0064 13.3722 12.0322 13.5491 12.9793 13.9027C13.9263 14.2564 14.8224 14.7365 15.6675 15.3432C16.3231 14.6643 16.8506 13.863 17.25 12.9391C17.6493 12.0139 17.849 10.9993 17.849 9.89528C17.849 7.6932 17.0751 5.81796 15.5274 4.26956C13.9797 2.72115 12.1044 1.94728 9.90168 1.94795C7.69895 1.94861 5.82371 2.72281 4.27597 4.27055C2.72823 5.81829 1.95435 7.6932 1.95435 9.89528C1.95435 10.9993 2.15403 12.0139 2.55339 12.9391C2.95274 13.8636 3.48024 14.665 4.1359 15.3432M9.90268 10.392C9.06556 10.392 8.35924 10.1046 7.78372 9.5297C7.2082 8.95484 6.92077 8.24918 6.92144 7.41273C6.9221 6.57627 7.20953 5.86995 7.78372 5.29377C8.35791 4.71759 9.0639 4.43016 9.90168 4.43149C10.7395 4.43281 11.4455 4.72024 12.0196 5.29377C12.5938 5.8673 12.8813 6.57329 12.8819 7.41173C12.8826 8.25018 12.5952 8.95617 12.0196 9.5297C11.4441 10.1032 10.7385 10.3907 9.90268 10.392ZM9.90168 18.836C8.65461 18.836 7.48735 18.6039 6.39989 18.1396C5.31243 17.6754 4.36604 17.0409 3.56071 16.2363C2.75538 15.4316 2.12092 14.4852 1.65732 13.3971C1.19373 12.3089 0.961601 11.1417 0.960939 9.89528C0.960277 8.64887 1.1924 7.4816 1.65732 6.39348C2.12224 5.30536 2.7567 4.35897 3.56071 3.5543C4.36604 2.74963 5.31243 2.11517 6.39989 1.65091C7.48735 1.18666 8.65461 0.954529 9.90168 0.954529C11.1488 0.954529 12.316 1.18666 13.4035 1.65091C14.4909 2.11517 15.4373 2.74963 16.2427 3.5543C17.048 4.35897 17.6824 5.30536 18.146 6.39348C18.6096 7.4816 18.8418 8.64887 18.8424 9.89528C18.8431 11.1417 18.611 12.3089 18.146 13.3971C17.6811 14.4852 17.0467 15.4316 16.2427 16.2363C15.4373 17.0409 14.4909 17.6754 13.4035 18.1396C12.316 18.6039 11.1488 18.836 9.90168 18.836ZM9.90168 17.8426C10.8176 17.8426 11.7186 17.6823 12.6048 17.3618C13.4909 17.0419 14.2568 16.6035 14.9025 16.0465C14.2575 15.5279 13.5108 15.1183 12.6624 14.8177C11.814 14.517 10.8938 14.3663 9.90168 14.3656C8.90959 14.365 7.98605 14.5123 7.13105 14.8077C6.27605 15.1031 5.53231 15.516 4.89983 16.0465C5.54555 16.6028 6.31181 17.0413 7.1986 17.3618C8.08539 17.6823 8.98642 17.8426 9.90168 17.8426ZM9.90168 9.39857C10.4593 9.39857 10.9299 9.20684 11.3133 8.82338C11.6968 8.43992 11.8885 7.96937 11.8885 7.41173C11.8885 6.8541 11.6968 6.38355 11.3133 6.00009C10.9299 5.61663 10.4593 5.4249 9.90168 5.4249C9.34405 5.4249 8.8735 5.61663 8.49004 6.00009C8.10658 6.38355 7.91485 6.8541 7.91485 7.41173C7.91485 7.96937 8.10658 8.43992 8.49004 8.82338C8.8735 9.20684 9.34405 9.39857 9.90168 9.39857Z",fill:t})})}function Yue({color:t="black",...e}){return f.jsxs("svg",{width:"18",height:"20",viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[f.jsx("path",{d:"M5.20469 12.8046H2.40469C1.98034 12.8046 1.57338 12.9731 1.27332 13.2732C0.973259 13.5733 0.804688 13.9802 0.804688 14.4046V17.2046C0.804688 17.6289 0.973259 18.0359 1.27332 18.3359C1.57338 18.636 1.98034 18.8046 2.40469 18.8046H5.20469C5.62903 18.8046 6.036 18.636 6.33606 18.3359C6.63612 18.0359 6.80469 17.6289 6.80469 17.2046V14.4046C6.80469 13.9802 6.63612 13.5733 6.33606 13.2732C6.036 12.9731 5.62903 12.8046 5.20469 12.8046ZM15.2047 0.804565H12.4047C11.9803 0.804565 11.5734 0.973136 11.2733 1.27319C10.9733 1.57325 10.8047 1.98022 10.8047 2.40457V5.20457C10.8047 5.62891 10.9733 6.03588 11.2733 6.33594C11.5734 6.63599 11.9803 6.80457 12.4047 6.80457H15.2047C15.629 6.80457 16.036 6.63599 16.3361 6.33594C16.6361 6.03588 16.8047 5.62891 16.8047 5.20457V2.40457C16.8047 1.98022 16.6361 1.57325 16.3361 1.27319C16.036 0.973136 15.629 0.804565 15.2047 0.804565Z",fill:t,fillOpacity:"0.16"}),f.jsx("path",{d:"M5.20469 0.804565H2.40469C1.98034 0.804565 1.57338 0.973136 1.27332 1.27319C0.973259 1.57325 0.804688 1.98022 0.804688 2.40457V7.20457C0.804688 7.41468 0.846073 7.62274 0.92648 7.81686C1.00689 8.01098 1.12474 8.18736 1.27332 8.33594C1.42189 8.48451 1.59827 8.60237 1.79239 8.68277C1.98652 8.76318 2.19457 8.80457 2.40469 8.80457H5.20469C5.4148 8.80457 5.62286 8.76318 5.81698 8.68277C6.0111 8.60237 6.18748 8.48451 6.33606 8.33594C6.48463 8.18736 6.60249 8.01098 6.68289 7.81686C6.7633 7.62274 6.80469 7.41468 6.80469 7.20457V2.40457C6.80469 1.98022 6.63612 1.57325 6.33606 1.27319C6.036 0.973136 5.62903 0.804565 5.20469 0.804565ZM5.20469 12.8046H2.40469C1.98034 12.8046 1.57338 12.9731 1.27332 13.2732C0.973259 13.5733 0.804688 13.9802 0.804688 14.4046V17.2046C0.804688 17.6289 0.973259 18.0359 1.27332 18.3359C1.57338 18.636 1.98034 18.8046 2.40469 18.8046H5.20469C5.62903 18.8046 6.036 18.636 6.33606 18.3359C6.63612 18.0359 6.80469 17.6289 6.80469 17.2046V14.4046C6.80469 13.9802 6.63612 13.5733 6.33606 13.2732C6.036 12.9731 5.62903 12.8046 5.20469 12.8046ZM15.2047 0.804565H12.4047C11.9803 0.804565 11.5734 0.973136 11.2733 1.27319C10.9733 1.57325 10.8047 1.98022 10.8047 2.40457V5.20457C10.8047 5.62891 10.9733 6.03588 11.2733 6.33594C11.5734 6.63599 11.9803 6.80457 12.4047 6.80457H15.2047C15.629 6.80457 16.036 6.63599 16.3361 6.33594C16.6361 6.03588 16.8047 5.62891 16.8047 5.20457V2.40457C16.8047 1.98022 16.6361 1.57325 16.3361 1.27319C16.036 0.973136 15.629 0.804565 15.2047 0.804565ZM15.2047 10.8046H12.4047C11.9803 10.8046 11.5734 10.9731 11.2733 11.2732C10.9733 11.5733 10.8047 11.9802 10.8047 12.4046V17.2046C10.8047 17.6289 10.9733 18.0359 11.2733 18.3359C11.5734 18.636 11.9803 18.8046 12.4047 18.8046H15.2047C15.629 18.8046 16.036 18.636 16.3361 18.3359C16.6361 18.0359 16.8047 17.6289 16.8047 17.2046V12.4046C16.8047 11.9802 16.6361 11.5733 16.3361 11.2732C16.036 10.9731 15.629 10.8046 15.2047 10.8046Z",stroke:t,strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinejoin:"round"})]})}function Que({tab:t,setTab:e,cartCount:r=0,unreadMessages:n=0,ordersCount:i=0}){const{profile:s}=In(),{t:a}=vb(),o=s&&s.role==="pharmacy",l=[o?{key:"/",label:a("dashboard","Dashboard"),icon:Yue}:{key:"/",label:a("home","Home"),icon:que},{key:"/orders",label:a("orders","Orders"),icon:Wue},{key:"/messages",label:a("messages","Messages"),icon:Gue},...o?[]:[{key:"/cart",label:a("cart","Cart"),icon:Kue}],{key:"/profile",label:a("profile","Profile"),icon:Xue}],c=n>99?"99+":String(n||"");M.useEffect(()=>{try{console.debug("[BottomNav] props",{tab:t,cartCount:r,unreadMessages:n,ordersCount:i,displayUnread:c,profile:s})}catch(p){console.error("[BottomNav] debug log failed",p)}},[t,r,n,i,c,s]);const d=typeof window<"u"&&new URLSearchParams(window.location.search).get("debugBottomNav")==="1";return f.jsxs("div",{className:"fixed bottom-3 left-0 right-0 flex justify-center z-50","aria-hidden":!1,children:[f.jsx("nav",{role:"navigation","aria-label":"Bottom navigation",className:"liquid-bottom-nav max-w-md px-5 py-3 bg-white/95 dark:bg-gray-900/40 backdrop-blur-md border border-sky-300 dark:border-sky-300",children:f.jsx("div",{className:"flex items-center justify-center gap-[-1] px-2",children:l.map(p=>{const g=t===p.key,m=p.icon,w={color:g?"#36A5FF":document.documentElement.classList.contains("dark")?"#ffffff":"#6b7280"},y=p.key==="/cart",k=p.key==="/messages",T=p.key==="/orders";return f.jsx("div",{className:"flex-none",children:f.jsxs("button",{onClick:()=>e(p.key),"aria-label":p.label,"aria-pressed":g,className:`relative flex flex-col items-center text-xs min-w-[64px] md:min-w-[72px] px-2 py-3 focus:outline-none transition-all duration-200 ${g?"text-sky-600 dark:text-sky-400 transform scale-105":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:[f.jsx("div",{className:`absolute bottom-20 w-10 h-2 bg-sky-600 rounded-[17px] transition-all duration-300 ${g?"opacity-80 scale-100":"opacity-0 scale-90"}`}),f.jsx("div",{className:"relative z-10 transition-transform duration-200 hover:scale-110",children:f.jsx(m,{...w,className:"h-7 w-7 mb-2"})}),y&&r>0&&f.jsx("span",{className:"absolute -top-0.5 -right-0 z-50 bg-sky-500 text-white text-[10px] min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1 font-bold border-2 border-white shadow animate-bounceIn transition-all duration-200 hover:scale-110",children:r}),T&&o&&i>0&&f.jsx("span",{className:"absolute -top-0.5 -right-0 z-50 bg-orange-500 text-white text-[10px] min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1 font-bold border-2 border-white shadow animate-bounceIn transition-all duration-200 hover:scale-110",children:i>99?"99+":i}),k&&n>0&&(()=>{try{return f.jsx("span",{role:"status","aria-live":"polite","aria-atomic":"true",className:"absolute top-0 right-5 z-50 bg-sky-500 text-white text-[10px] min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1 font-bold border-2 border-white shadow animate-bounceIn transition-all duration-200 hover:scale-110",children:c})}catch(O){console.error("[BottomNav] Error rendering messages badge",O,{unreadMessages:n})}})(),f.jsx("span",{className:`truncate max-w-[72px] block text-center text-[12px] ${g?"font-bold":"font-normal"}`,children:p.label})]})},p.key)})})}),d&&f.jsxs("div",{className:"fixed bottom-20 right-4 z-60 bg-black/80 text-white text-xs px-3 py-1 rounded",children:["UnreadRaw: ",String(n)]})]})}function qS(t){return f.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:f.jsx("path",{d:"M4.87524 5.41667C4.73158 5.41667 4.59381 5.47373 4.49223 5.57532C4.39064 5.6769 4.33358 5.81467 4.33358 5.95833V8.125H5.41691V6.5H7.04191V7.85417L8.93774 5.95833L7.04191 4.0625V5.41667H4.87524ZM6.8832 0.75454L12.2457 6.11704C12.3472 6.21862 12.4043 6.35637 12.4043 6.5C12.4043 6.64363 12.3472 6.78138 12.2457 6.88296L6.8832 12.2455C6.78162 12.347 6.64387 12.404 6.50024 12.404C6.35661 12.404 6.21886 12.347 6.11728 12.2455L0.754784 6.88296C0.653237 6.78138 0.596191 6.64363 0.596191 6.5C0.596191 6.35637 0.653237 6.21862 0.754784 6.11704L6.11728 0.75454C6.21886 0.652993 6.35661 0.595947 6.50024 0.595947C6.64387 0.595947 6.78162 0.652993 6.8832 0.75454Z",fill:"currentColor"})})}function Jue({product:t,pharmacy:e}){const{user:r}=In(),n=Ci(),{userCoords:i}=hp();if(!t)return null;const s=Number(t.price||0),[a,o]=M.useState(!1),[l,c]=M.useState(!1),[d,p]=M.useState(null),[g,m]=M.useState(!1),[w,y]=M.useState(!1),[k,T]=M.useState(!1);M.useEffect(()=>{if(e&&i){const ee=xb(e,i,"driving");p(ee)}else p(null)},[e,i]),M.useEffect(()=>{(async()=>{if(r&&t)try{const Be=await cP(r.uid,t.id);y(Be)}catch(Be){console.error("Error checking wishlist status:",Be)}})()},[r,t]);const[O,P]=M.useState([]),[V,Y]=M.useState(!1);async function G(ee){if(!ee)return P([]);try{Y(!0);const Be=Tr(dr(gt,"products"),zr("category","==",ee)),ae=(await Fn(Be)).docs.map($e=>({id:$e.id,...$e.data()}));P(ae),c(!0)}catch(Be){console.error("Failed to fetch category products",Be),P([]),c(!0)}finally{Y(!1)}}const[L,N]=M.useState([]),[C,R]=M.useState(!0),[A,F]=M.useState({name:r?.displayName||"",rating:"",comment:""}),[B,te]=M.useState(!1),[pe,Ee]=M.useState(3),[ve,re]=M.useState(!1),[W,ne]=M.useState({}),[Q,I]=M.useState({});M.useEffect(()=>{async function ee(){if(!t?.id)return N([]);R(!0);try{const Be=dr(gt,"products",t.id,"reviews"),Re=Tr(Be,Zs("createdAt","desc")),ae=await Fn(Re);N(ae.docs.map($e=>({id:$e.id,...$e.data()})))}catch{N([])}finally{R(!1)}}ee()},[t?.id]),M.useEffect(()=>{async function ee(){if(!r||!t?.id||L.length===0)return I({});const Be={};for(const Re of L){or(gt,"products",t.id,"reviews",Re.id,"likes",r.uid);try{const ae=await Fn(Tr(dr(gt,"products",t.id,"reviews",Re.id,"likes")));Be[Re.id]=ae.docs.some($e=>$e.id===r.uid)}catch{}}I(Be)}ee()},[r,t?.id,L]);function H(ee){const{name:Be,value:Re}=ee.target;F(ae=>({...ae,[Be]:Re}))}async function X(ee){if(ee.preventDefault(),!(!A.rating&&!A.comment)){te(!0);try{const Be=dr(gt,"products",t.id,"reviews");await dp(Be,{name:A.name,rating:A.rating?Number(A.rating):null,comment:A.comment||"",createdAt:Qs(),userId:r?.uid||null}),F({name:r?.displayName||"",rating:"",comment:""});const Re=Tr(Be,Zs("createdAt","desc")),ae=await Fn(Re);N(ae.docs.map($e=>({id:$e.id,...$e.data()})))}catch{}finally{te(!1)}}}async function J(ee){ne(Be=>({...Be,[ee]:!0}));try{const Be=or(gt,"products",t.id,"reviews",ee,"likes",r.uid),Re=or(gt,"products",t.id,"reviews",ee);Q[ee]?(await Eo(Be),await ys(Re,{likes:mv(-1)}),N(ae=>ae.map($e=>$e.id===ee?{...$e,likes:Math.max(($e.likes||1)-1,0)}:$e)),I(ae=>({...ae,[ee]:!1}))):(await _c(Be,{likedAt:Qs(),userId:r.uid}),await ys(Re,{likes:mv(1)}),N(ae=>ae.map($e=>$e.id===ee?{...$e,likes:($e.likes||0)+1}:$e)),I(ae=>({...ae,[ee]:!0})))}catch{}finally{ne(Be=>({...Be,[ee]:!1}))}}if(!r)return f.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[f.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:"Please sign in to continue"}),f.jsx("button",{className:"rounded-full bg-sky-600 text-white px-6 py-2 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>n("/auth/landing"),children:"Sign In / Sign Up"})]});function ue({value:ee,onChange:Be,disabled:Re}){return f.jsx("div",{className:"flex gap-1 mb-2",role:"radiogroup","aria-label":"Rating",children:[1,2,3,4,5].map(ae=>f.jsx("button",{type:"button",onClick:()=>!Re&&Be(ae),onKeyDown:$e=>{!Re&&($e.key==="Enter"||$e.key===" ")&&Be(ae)},tabIndex:0,"aria-label":`${ae} Star${ae>1?"s":""}`,"aria-checked":ee===ae,className:`transition-all duration-150 focus:outline-none ${ee>=ae?"text-amber-400 scale-110":"text-zinc-300"} hover:scale-125 active:scale-95`,children:f.jsx(I5,{className:"w-6 h-6",fill:ee>=ae?"#fbbf24":"none"})},ae))})}const we=`${window.location.origin}/product-preview/${t?.id}`;async function fe(){if(navigator.share){try{await navigator.share({title:t.name,text:`Check out this product: ${t.name}`,url:we})}catch{}m(!1)}else if(navigator.clipboard){try{await navigator.clipboard.writeText(we),alert("Shareable link copied to clipboard!")}catch{window.prompt("Copy this link:",we)}m(!1)}else window.prompt("Copy this link:",we),m(!1)}const me=async()=>{if(!r){alert("Please sign in to add items to your wishlist");return}if(!k){T(!0);try{w?(await lP(r.uid,t.id),y(!1)):(await oP(r.uid,t.id,{name:t.name,price:t.price,image:t.image,category:t.category,pharmacyId:e?.id,pharmacyName:e?.name}),y(!0))}catch(ee){console.error("Error toggling wishlist:",ee),alert("Failed to update wishlist. Please try again.")}finally{T(!1)}}};function be(){const ee=new URLSearchParams({productId:t?.id||"",productName:t?.name||"",productImage:t?.image||"",vendorName:e?.name||"",prefillMsg:"I want to know more about this drug"});n(`/chat/${e?.id}?${ee.toString()}`),m(!1)}const Le=()=>f.jsx("div",{className:"md:hidden fixed top-0 left-0 right-0 z-[100] bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-700",children:f.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[f.jsxs("button",{onClick:()=>n(-1),className:"w-[70px] h-[24px] font-poppins font-extralight tracking-tight text-[12px] flex items-center justify-center rounded-full bg-white border border-zinc-300 dark:border-gray-600 hover:scale-105 hover:shadow-md transition-all duration-200 active:scale-95",children:[f.jsx(cu,{className:"h-4 w-4 mr-1"})," Back"]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{type:"button",className:`p-2 rounded-full border border-zinc-200 bg-white hover:scale-110 active:scale-95 transition-all duration-200 ${w?"bg-red-50 hover:bg-red-100":"hover:bg-red-50"} ${k?"opacity-50 cursor-not-allowed":""}`,"aria-label":w?"Remove from wishlist":"Add to wishlist",onClick:me,disabled:k,children:f.jsx(c9,{className:`w-5 h-5 transition-colors ${w?"text-red-500 fill-current":"text-red-400"}`})}),f.jsx("button",{type:"button",className:"p-2 rounded-full border border-zinc-200 bg-white hover:bg-sky-50 hover:scale-110 active:scale-95 transition-all duration-200","aria-label":"Share product",onClick:()=>m(!0),children:f.jsx(f4,{className:"w-5 h-5 text-sky-600"})})]})]})});return f.jsxs(f.Fragment,{children:[os.createPortal(f.jsx(Le,{}),document.body),f.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 pt-24 md:pt-0",children:f.jsxs("div",{className:"w-full max-w-full md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-2 md:px-8 lg:px-12 xl:px-0",children:[f.jsxs("div",{className:"pt-6 sticky top-0 z-20 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md pb-2 animate-slide-down-fade items-center justify-between hidden md:flex",children:[f.jsxs("button",{onClick:()=>n(-1),className:"w-[70px] h-[24px] font-poppins font-extralight tracking-tight text-[12px] flex items-center justify-center rounded-full bg-white dark:bg-gray-800 border border-zinc-300 dark:border-gray-600 dark:border-gray-600 text-gray-900 dark:text-white hover:scale-105 hover:shadow-md transition-all duration-200 active:scale-95",children:[f.jsx(cu,{className:"h-4 w-4 mr-1"})," Back"]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{type:"button",className:`p-2 rounded-full border border-zinc-200 dark:border-gray-600 bg-white dark:bg-gray-800 hover:scale-110 active:scale-95 transition-all duration-200 ${w?"bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30":"hover:bg-red-50 dark:hover:bg-red-900/20"} ${k?"opacity-50 cursor-not-allowed":""}`,"aria-label":w?"Remove from wishlist":"Add to wishlist",onClick:me,disabled:k,children:f.jsx(c9,{className:`w-5 h-5 transition-colors ${w?"text-red-500 fill-current":"text-red-400"}`})}),f.jsx("button",{type:"button",className:"p-2 rounded-full border border-zinc-200 dark:border-gray-600 bg-white dark:bg-gray-800 hover:bg-sky-50 dark:hover:bg-sky-900/20 hover:scale-110 active:scale-95 transition-all duration-200","aria-label":"Share product",onClick:()=>m(!0),children:f.jsx(f4,{className:"w-5 h-5 text-sky-600"})})]})]}),f.jsx("div",{className:"mt-1 md:border md:rounded-t-3xl md:max-w-4xl md:border-zinc-100 dark:md:border-gray-700 animate-fade-in-up",children:f.jsx("div",{className:"w-full max-w-full md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-2 md:px-8 lg:px-12 xl:px-0 pt-6 pb-36",children:f.jsx("div",{className:"mx-auto w-full",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[f.jsxs("div",{className:"rounded-2xl p-4 border flex flex-col items-center justify-center w-full card-interactive hover:shadow-lg transition-all duration-300 animate-fade-in-left",children:[t?.image&&!a?f.jsx("img",{src:t.image,alt:t.name,onError:()=>o(!0),className:"max-h-[160px] lg:max-h-[360px] w-full object-contain hover:scale-105 transition-transform duration-300"}):f.jsx("div",{className:"h-[100px] lg:h-[200px] w-full flex items-center justify-center bg-zinc-100 dark:bg-gray-700 rounded-md text-3xl font-semibold text-zinc-800 dark:text-zinc-200 animate-bounce-gentle",children:f.jsx(Wl,{name:t.name,image:t.image,category:t.category,size:48,"lg:size":80,roundedClass:"rounded-md"})}),f.jsxs("div",{className:"w-full mt-4 hidden lg:flex flex-col gap-3",children:[f.jsx("button",{onClick:async()=>{if(!r)return alert("Please sign in");if(!t.id)return alert("Product unavailable. Please try again.");try{await y1(r.uid,t.id,1)}catch{alert("Failed to add to cart.")}},className:"w-full h-10 rounded-full bg-sky-600 text-white text-[14px] font-poppins font-light shadow-sm btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200","aria-label":"Add to Cart",children:"Add to Cart"}),f.jsxs("a",{href:`tel:${e?.phone||""}`,className:"w-full h-10 rounded-full border border-zinc-400 dark:border-gray-600 text-[14px] font-poppins font-light flex items-center justify-center gap-2 text-zinc-800 dark:text-white bg-white dark:bg-gray-800 btn-interactive hover:border-zinc-500 dark:hover:border-gray-500 hover:scale-105 active:scale-95 transition-all duration-200","aria-label":"Call to order",children:[f.jsx(G1,{className:"h-4 w-4 text-zinc-800 dark:text-white"})," Call to Order"]})]})]}),f.jsxs("div",{className:"flex flex-col animate-fade-in-right",children:[f.jsxs("div",{className:"mb-3 flex items-start justify-between animate-slide-up",style:{animationDelay:"0.1s"},children:[f.jsx("h1",{className:"text-[18px] lg:text-[20px] font-poppins font-medium tracking-tight leading-tight min-w-0 animate-text-reveal text-gray-900 dark:text-white",children:t.name}),f.jsxs("div",{className:"text-[18px] text-sky-600 dark:text-sky-400 font-poppins font-semibold lg:hidden animate-pulse-slow",children:["",s.toLocaleString()]})]}),f.jsx("div",{className:"mb-4 hidden lg:block animate-fade-in",style:{animationDelay:"0.2s"},children:f.jsxs("div",{className:"text-[20px] text-sky-600 dark:text-sky-400 font-poppins font-semibold animate-pulse-slow",children:["",s.toLocaleString()]})}),f.jsx("div",{className:"mb-2 animate-fade-in",style:{animationDelay:"0.3s"},children:f.jsx("button",{onClick:()=>n(`/vendor/${e?.id||t.pharmacyId}`),className:"text-sky-600 dark:text-sky-400 underline font-poppins text-[15px] font-light hover:text-sky-700 dark:hover:text-sky-300 transition-colors duration-200 hover:scale-105",children:e?.name})}),f.jsxs("div",{className:"mb-1 flex items-center justify-between gap-2 text-zinc-600 dark:text-zinc-300 text-[13px] font-poppins font-light animate-fade-in",style:{animationDelay:"0.4s"},children:[f.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[f.jsx(zl,{className:"h-4 w-4 flex-shrink-0"}),f.jsx("span",{className:"truncate",children:e?.address})]}),e?.address&&f.jsxs("button",{onClick:()=>{const ee=encodeURIComponent(e.address);window.open(`https://www.google.com/maps/search/?api=1&query=${ee}`,"_blank")},className:"text-sky-600 dark:text-sky-400 text-[13px] font-poppins font-light px-2 py-1 rounded-full hover:bg-sky-50 dark:hover:bg-sky-900/20 transition-all duration-200 lg:hidden hover:scale-105 active:scale-95","aria-label":"Get directions",children:[f.jsx(qS,{className:"h-4 w-4 inline-block mr-1"})," Get Directions"]})]}),f.jsxs("div",{className:"mb-3 flex items-center gap-2 text-zinc-600 dark:text-zinc-300 text-[13px] font-poppins font-light animate-fade-in",style:{animationDelay:"0.5s"},children:[f.jsx(Sv,{className:"h-4 w-4"}),d?`${d.formatted} to ${e?.name}`:i?"Calculating ETA...":"Fetching location..."]}),e?.address&&f.jsx("div",{className:"mb-4 hidden lg:block animate-fade-in",style:{animationDelay:"0.6s"},children:f.jsxs("button",{className:"flex items-center gap-2 text-sky-600 dark:text-sky-400 text-[13px] font-poppins font-light px-3 py-2 rounded-full hover:bg-sky-50 dark:hover:bg-sky-900/20 transition-all duration-200 hover:scale-105 active:scale-95",onClick:()=>{const ee=encodeURIComponent(e.address);window.open(`https://www.google.com/maps/search/?api=1&query=${ee}`,"_blank")},children:[f.jsx(qS,{className:"h-4 w-4 text-sky-600 dark:text-sky-400"})," Get Directions"]})}),f.jsxs("div",{className:"mt-2 animate-fade-in",style:{animationDelay:"0.7s"},children:[f.jsxs("div",{className:"hidden lg:block",children:[f.jsx("div",{className:"text-[15px] tracking-tight text-black font-poppins font-medium",children:"Category"}),f.jsx("div",{className:"mt-0.5 mb-5",children:f.jsx("button",{type:"button",onClick:async ee=>{ee.stopPropagation(),await G(t.category||"General")},className:"text-[13px] text-[#fc7f26] font-poppins font-normal underline hover:text-amber-500 transition-colors duration-200 hover:scale-105",children:t.category||"General"})})]}),f.jsx("div",{className:"block lg:hidden",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"text-[15px] text-black font-poppins font-medium mb-2",children:"Category"}),f.jsx("div",{children:f.jsx("button",{type:"button",onClick:async ee=>{ee.stopPropagation(),await G(t.category||"General")},className:"text-[13px] text-[#fc7f26] font-poppins font-normal underline hover:text-amber-500 transition-colors duration-200 hover:scale-105",children:t.category||"General"})})]})})]}),f.jsx("div",{className:"mt-4 border-b"}),f.jsxs("div",{className:"mt-6 animate-fade-in",style:{animationDelay:"0.8s"},children:[f.jsx("div",{className:"text-[15px] font-poppins font-medium tracking-tighter text-zinc-800 dark:text-white",children:"Product Description"}),f.jsx("p",{className:"mt-2 text-zinc-600 dark:text-zinc-300 leading-6 font-poppins text-[14px] font-light",children:t.description})]}),f.jsx("div",{className:"mt-8 border-b"}),f.jsxs("div",{className:"mt-8 animate-fade-in-up",style:{animationDelay:"0.9s"},children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-[15px] font-poppins font-medium tracking-tighter text-zinc-800 dark:text-white",children:"Customer Reviews"}),f.jsx("span",{className:"text-sky-400 font-semibold text-[13px]",children:L.length})]}),ve&&f.jsx("button",{className:"text-sky-400 text-[13px] font-poppins underline",onClick:()=>{re(!1),Ee(3)},children:"See less"})]}),f.jsx("div",{className:"space-y-4 mb-6",children:C?f.jsx("div",{className:"p-4 text-center text-zinc-400 dark:text-zinc-500 animate-pulse",children:"Loading reviews"}):L.length===0?f.jsx("div",{className:"p-4 text-center text-zinc-400 dark:text-zinc-500 animate-fade-in text-[12px]",children:"No reviews yet. Be the first to review!"}):L.slice(0,pe).map((ee,Be)=>{let Re="";if(ee.createdAt){const ae=ee.createdAt.seconds?new Date(ee.createdAt.seconds*1e3):new Date(ee.createdAt);Re=ae.toLocaleDateString()+" "+ae.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}return f.jsxs("div",{className:"p-4 rounded-xl border border-sky-100 dark:border-gray-600 animate-slide-up transition-all duration-200",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"font-poppins font-semibold text-[14px] text-zinc-700 dark:text-zinc-200",children:ee.name}),f.jsxs("span",{className:"flex gap-0.5 text-amber-400 text-[13px]",children:["".repeat(ee.rating),"".repeat(5-ee.rating)]})]}),f.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:f.jsxs("div",{className:"flex items-center justify-center",children:[ee.likes>0&&f.jsx("span",{className:"text-sky-500 font-semibold text-[13px] mr-1",children:ee.likes}),f.jsx("button",{className:`flex items-center justify-center px-2 py-1 rounded transition-all duration-200 ${W[ee.id]?"opacity-50 pointer-events-none":""} ${Q[ee.id]?"bg-sky-50 text-sky-400":"text-zinc-400"}`,onClick:()=>J(ee.id),disabled:W[ee.id],"aria-label":Q[ee.id]?"Unlike review":"Like review",style:{minHeight:"20px"},children:f.jsx(jK,{className:"w-4 h-4",fill:Q[ee.id]?"#38bdf8":"none"})})]})})]}),f.jsx("div",{className:"text-zinc-600 dark:text-zinc-300 text-[13px] font-poppins font-light",children:ee.comment}),Re&&f.jsx("div",{className:"text-[11px] text-zinc-400 dark:text-zinc-500 mt-1",children:Re}),ee.pharmacyResponse&&f.jsxs("div",{className:"mt-3 p-3 bg-gradient-to-r from-sky-50 to-blue-50 dark:bg-gradient-to-r dark:from-gray-800 dark:to-gray-700 border border-sky-100 dark:border-gray-600 dark:border-gray-600 rounded-lg shadow-sm",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("div",{className:"w-2 h-2 bg-sky-500 dark:bg-sky-400 rounded-full"}),f.jsxs("span",{className:"font-poppins font-semibold text-[13px] text-sky-700 dark:text-white",children:[e?.name||"Pharmacy"," Response"]}),(ee.pharmacyResponse.respondedAt||ee.responseDate)&&f.jsx("span",{className:"text-[10px] text-sky-500 dark:text-zinc-300 ml-auto",children:new Date((ee.pharmacyResponse.respondedAt?.seconds||ee.responseDate?.seconds||ee.responseDate)*1e3).toLocaleDateString()})]}),f.jsxs("div",{className:"text-zinc-700 dark:text-white text-[13px] font-poppins leading-relaxed pl-4",children:['"',typeof ee.pharmacyResponse=="string"?ee.pharmacyResponse:ee.pharmacyResponse.message||ee.pharmacyResponse,'"']})]})]},ee.id||Be)})}),L.length>pe&&f.jsx("div",{className:"flex justify-start",children:f.jsx("button",{className:"text-sky-400 text-[13px] font-poppins underline",onClick:()=>{Ee(ee=>ee+3),re(!0)},children:"See more"})}),f.jsx("div",{className:"mt-4 border-b"}),f.jsxs("form",{className:"p-4 mt-6 rounded-xl border border-zinc-100 bg-white shadow-sm animate-bounce-in",style:{animationDelay:"1.0s"},onSubmit:X,children:[f.jsx("div",{className:"mb-2 font-poppins text-[14px] font-medium text-zinc-700 dark:text-zinc-300",children:"Leave a Review"}),f.jsx(ue,{value:Number(A.rating),onChange:ee=>F(Be=>({...Be,rating:ee})),disabled:B}),f.jsx("input",{type:"text",name:"name",value:A.name,onChange:H,placeholder:"Your Name",className:"w-full mb-2 px-3 py-2 rounded-lg border-zinc-200 font-poppins text-[13px] focus:ring-2 focus:ring-sky-200 transition-all duration-20"}),f.jsx("textarea",{name:"comment",value:A.comment,onChange:H,placeholder:"Your review... (optional)",className:"w-full mb-2 px-3 py-2 rounded-lg border border-zinc-200 font-poppins text-[13px] focus:ring-2 focus:ring-sky-200 transition-all duration-200",rows:3}),f.jsx("button",{type:"submit",disabled:B||!A.rating&&!A.comment,className:"w-full h-10 rounded-full border border-sky-500 dark:border-gray-600 text-black text-[14px] font-poppins font-light shadow-sm btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200",children:B?"Submitting":"Submit Review"})]})]})]})]})})})}),f.jsx("div",{className:"fixed left-0 right-0 bottom-28 z-30 lg:hidden animate-slide-up-fade",children:f.jsx("div",{className:"w-full max-w-full md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-2 md:px-8 lg:px-12 xl:px-0",children:f.jsxs("div",{className:"flex flex-row gap-3 justify-center",children:[f.jsx("button",{onClick:async()=>{if(!r)return alert("Please sign in");if(!t.id)return alert("Product unavailable. Please try again.");try{await y1(r.uid,t.id,1)}catch{alert("Failed to add to cart.")}},className:"flex-1 max-w-[140px] h-10 rounded-full bg-sky-600 text-white text-[13px] font-poppins font-light shadow-sm btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200",children:"Add to Cart"}),f.jsxs("a",{href:`tel:${e?.phone||""}`,className:"flex-1 max-w-[140px] h-10 rounded-full border border-zinc-400 dark:border-gray-600 text-[13px] font-poppins font-light flex items-center justify-center gap-2 text-zinc-800 dark:text-white bg-white dark:bg-gray-800 btn-interactive hover:border-zinc-500 dark:hover:border-gray-500 hover:scale-105 active:scale-95 transition-all duration-200",children:[f.jsx(G1,{className:"h-4 w-4 text-zinc-800 dark:text-white"})," Call to Order"]})]})})}),l&&f.jsx("div",{onClick:()=>c(!1),className:"fixed inset-0 z-50 flex items-start justify-center pt-24 bg-black bg-opacity-30 animate-fade-in",role:"dialog","aria-modal":"true",children:f.jsxs("div",{onClick:ee=>ee.stopPropagation(),className:"bg-white rounded-2xl p-4 w-[90vw] max-w-md max-h-[80vh] overflow-y-auto animate-bounce-in shadow-xl",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("div",{className:"text-lg font-medium animate-text-reveal",children:['Products in "',t.category||"General",'"']}),f.jsx("button",{onClick:()=>c(!1),className:"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-300 transition-colors duration-200 hover:scale-110 active:scale-95",children:"Close"})]}),V?f.jsx("div",{className:"p-4 text-center text-zinc-500 dark:text-zinc-400 animate-pulse",children:"Loading"}):O.length===0?f.jsx("div",{className:"p-4 text-zinc-500 dark:text-zinc-400 animate-fade-in",children:"No products found."}):f.jsx("div",{className:"space-y-2",children:O.map((ee,Be)=>f.jsxs("button",{onClick:()=>{c(!1),n(`/product/${ee.id}`)},className:"w-full text-left rounded-lg p-2 flex items-center gap-3 hover:bg-sky-50 transition-all duration-200 card-interactive animate-fadeInUp hover:scale-102",style:{animationDelay:`${Be*.1}s`},children:[f.jsx(Wl,{name:ee.name,image:ee.image,category:ee.category,size:48,className:"flex-shrink-0 animate-bounce-gentle",roundedClass:"rounded-md"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"font-medium text-sm truncate",children:ee.name}),f.jsx("div",{className:"text-xs text-zinc-500 truncate",children:ee.category})]})]},ee.id))})]})}),g&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 animate-fade-in",role:"dialog","aria-modal":"true",children:f.jsxs("div",{className:"bg-white rounded-2xl p-6 w-[90vw] max-w-xs shadow-xl animate-bounce-in flex flex-col gap-4",children:[f.jsx("div",{className:"font-poppins font-medium text-[16px] mb-2 text-center",children:"Share Product"}),f.jsxs("button",{className:"w-full flex items-center gap-2 px-4 py-2 rounded-lg border border-sky-200 dark:border-gray-600 bg-sky-50 text-sky-700 font-poppins font-medium hover:bg-sky-100 hover:scale-105 active:scale-95 transition-all duration-200",onClick:fe,children:[f.jsx(f4,{className:"w-4 h-4"})," Share Product"]}),f.jsxs("button",{className:"w-full flex items-center gap-2 px-4 py-2 rounded-lg border border-zinc-200 bg-zinc-50 text-zinc-700 font-poppins font-medium hover:bg-zinc-100 hover:scale-105 active:scale-95 transition-all duration-200",onClick:be,children:[f.jsx("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-4 h-4",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 10h.01M12 10h.01M16 10h.01M21 12c0 4.418-4.03 8-9 8a9.77 9.77 0 01-4-.8l-4 1 1-4A8.96 8.96 0 013 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Message Vendor"]}),f.jsx("button",{className:"mt-2 text-zinc-400 hover:text-zinc-700 text-[13px] font-poppins underline",onClick:()=>m(!1),children:"Cancel"})]})})]})})]})}const Zue="data:image/svg+xml,%3csvg%20width='26'%20height='23'%20viewBox='0%200%2026%2023'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2.41667%2022.3281C1.93056%2022.5226%201.46875%2022.4798%201.03125%2022.1998C0.59375%2021.9198%200.375%2021.5129%200.375%2020.9792V14.4167L12.0417%2011.5L0.375%208.58333V2.02083C0.375%201.48611%200.59375%201.07923%201.03125%200.800203C1.46875%200.521176%201.93056%200.478397%202.41667%200.67187L24.875%2010.151C25.4826%2010.4184%2025.7865%2010.868%2025.7865%2011.5C25.7865%2012.1319%2025.4826%2012.5816%2024.875%2012.849L2.41667%2022.3281Z'%20fill='black'/%3e%3c/svg%3e";function ede(t){return f.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:f.jsx("path",{d:"M2.68917 5.64292C3.70917 7.6475 5.3525 9.29083 7.35708 10.3108L8.91542 8.7525C9.11375 8.55417 9.39 8.4975 9.63792 8.57542C10.4312 8.8375 11.2812 8.97917 12.1667 8.97917C12.3545 8.97917 12.5347 9.05379 12.6675 9.18663C12.8004 9.31947 12.875 9.49964 12.875 9.6875V12.1667C12.875 12.3545 12.8004 12.5347 12.6675 12.6675C12.5347 12.8004 12.3545 12.875 12.1667 12.875C8.97302 12.875 5.91017 11.6063 3.65192 9.34808C1.39367 7.08983 0.125 4.02698 0.125 0.833333C0.125 0.645472 0.199628 0.465304 0.332466 0.332466C0.465304 0.199628 0.645472 0.125 0.833333 0.125H3.3125C3.50036 0.125 3.68053 0.199628 3.81337 0.332466C3.94621 0.465304 4.02083 0.645472 4.02083 0.833333C4.02083 1.71875 4.1625 2.56875 4.42458 3.36208C4.5025 3.61 4.44583 3.88625 4.2475 4.08458L2.68917 5.64292Z",fill:"black"})})}const tde="/assets/message-tone-B30p1O1l.mp3",QL=typeof document<"u"?di.useLayoutEffect:()=>{};var e3;const rde=(e3=di.useInsertionEffect)!==null&&e3!==void 0?e3:QL;function nde(t){const e=M.useRef(null);return rde(()=>{e.current=t},[t]),M.useCallback((...r)=>{const n=e.current;return n?.(...r)},[])}const z0=t=>{var e;return(e=t?.ownerDocument)!==null&&e!==void 0?e:document},Ef=t=>t&&"window"in t&&t.window===t?t:z0(t).defaultView||window;function ide(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function sde(t){return ide(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let ade=!1;function d_(){return ade}function JL(t,e){if(!d_())return e&&t?t.contains(e):!1;if(!t||!e)return!1;let r=e;for(;r!==null;){if(r===t)return!0;r.tagName==="SLOT"&&r.assignedSlot?r=r.assignedSlot.parentNode:sde(r)?r=r.host:r=r.parentNode}return!1}const Tw=(t=document)=>{var e;if(!d_())return t.activeElement;let r=t.activeElement;for(;r&&"shadowRoot"in r&&(!((e=r.shadowRoot)===null||e===void 0)&&e.activeElement);)r=r.shadowRoot.activeElement;return r};function ZL(t){return d_()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}function ode(t){var e;if(typeof window>"u"||window.navigator==null)return!1;let r=(e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands;return Array.isArray(r)&&r.some(n=>t.test(n.brand))||t.test(window.navigator.userAgent)}function lde(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function ej(t){let e=null;return()=>(e==null&&(e=t()),e)}const cde=ej(function(){return lde(/^Mac/i)}),ude=ej(function(){return ode(/Android/i)});function tj(){let t=M.useRef(new Map),e=M.useCallback((i,s,a,o)=>{let l=o?.once?(...c)=>{t.current.delete(a),a(...c)}:a;t.current.set(a,{type:s,eventTarget:i,fn:l,options:o}),i.addEventListener(s,l,o)},[]),r=M.useCallback((i,s,a,o)=>{var l;let c=((l=t.current.get(a))===null||l===void 0?void 0:l.fn)||a;i.removeEventListener(s,c,o),t.current.delete(a)},[]),n=M.useCallback(()=>{t.current.forEach((i,s)=>{r(i.eventTarget,i.type,s,i.options)})},[r]);return M.useEffect(()=>n,[n]),{addGlobalListener:e,removeGlobalListener:r,removeAllGlobalListeners:n}}function dde(t){return t.pointerType===""&&t.isTrusted?!0:ude()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function rj(t){let e=t;return e.nativeEvent=t,e.isDefaultPrevented=()=>e.defaultPrevented,e.isPropagationStopped=()=>e.cancelBubble,e.persist=()=>{},e}function fde(t,e){Object.defineProperty(t,"target",{value:e}),Object.defineProperty(t,"currentTarget",{value:e})}function nj(t){let e=M.useRef({isFocused:!1,observer:null});QL(()=>{const n=e.current;return()=>{n.observer&&(n.observer.disconnect(),n.observer=null)}},[]);let r=nde(n=>{t?.(n)});return M.useCallback(n=>{if(n.target instanceof HTMLButtonElement||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=n.target,s=a=>{if(e.current.isFocused=!1,i.disabled){let o=rj(a);r(o)}e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",s,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&i.disabled){var a;(a=e.current.observer)===null||a===void 0||a.disconnect();let o=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:o})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:o}))}}),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[r])}let hde=!1,t2=null,Nw=new Set,Um=new Map,nh=!1,Aw=!1;const pde={Tab:!0,Escape:!0};function f_(t,e){for(let r of Nw)r(t,e)}function mde(t){return!(t.metaKey||!cde()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function Wv(t){nh=!0,mde(t)&&(t2="keyboard",f_("keyboard",t))}function A1(t){t2="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(nh=!0,f_("pointer",t))}function ij(t){dde(t)&&(nh=!0,t2="virtual")}function sj(t){t.target===window||t.target===document||hde||!t.isTrusted||(!nh&&!Aw&&(t2="virtual",f_("virtual",t)),nh=!1,Aw=!1)}function aj(){nh=!1,Aw=!0}function Iw(t){if(typeof window>"u"||typeof document>"u"||Um.get(Ef(t)))return;const e=Ef(t),r=z0(t);let n=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){nh=!0,n.apply(this,arguments)},r.addEventListener("keydown",Wv,!0),r.addEventListener("keyup",Wv,!0),r.addEventListener("click",ij,!0),e.addEventListener("focus",sj,!0),e.addEventListener("blur",aj,!1),typeof PointerEvent<"u"&&(r.addEventListener("pointerdown",A1,!0),r.addEventListener("pointermove",A1,!0),r.addEventListener("pointerup",A1,!0)),e.addEventListener("beforeunload",()=>{oj(t)},{once:!0}),Um.set(e,{focus:n})}const oj=(t,e)=>{const r=Ef(t),n=z0(t);e&&n.removeEventListener("DOMContentLoaded",e),Um.has(r)&&(r.HTMLElement.prototype.focus=Um.get(r).focus,n.removeEventListener("keydown",Wv,!0),n.removeEventListener("keyup",Wv,!0),n.removeEventListener("click",ij,!0),r.removeEventListener("focus",sj,!0),r.removeEventListener("blur",aj,!1),typeof PointerEvent<"u"&&(n.removeEventListener("pointerdown",A1,!0),n.removeEventListener("pointermove",A1,!0),n.removeEventListener("pointerup",A1,!0)),Um.delete(r))};function gde(t){const e=z0(t);let r;return e.readyState!=="loading"?Iw(t):(r=()=>{Iw(t)},e.addEventListener("DOMContentLoaded",r)),()=>oj(t,r)}typeof document<"u"&&gde();function lj(){return t2!=="pointer"}const xde=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function vde(t,e,r){let n=z0(r?.target);const i=typeof window<"u"?Ef(r?.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?Ef(r?.target).HTMLTextAreaElement:HTMLTextAreaElement,a=typeof window<"u"?Ef(r?.target).HTMLElement:HTMLElement,o=typeof window<"u"?Ef(r?.target).KeyboardEvent:KeyboardEvent;return t=t||n.activeElement instanceof i&&!xde.has(n.activeElement.type)||n.activeElement instanceof s||n.activeElement instanceof a&&n.activeElement.isContentEditable,!(t&&e==="keyboard"&&r instanceof o&&!pde[r.key])}function yde(t,e,r){Iw(),M.useEffect(()=>{let n=(i,s)=>{vde(!!r?.isTextInput,i,s)&&t(lj())};return Nw.add(n),()=>{Nw.delete(n)}},e)}function wde(t){let{isDisabled:e,onFocus:r,onBlur:n,onFocusChange:i}=t;const s=M.useCallback(l=>{if(l.target===l.currentTarget)return n&&n(l),i&&i(!1),!0},[n,i]),a=nj(s),o=M.useCallback(l=>{const c=z0(l.target),d=c?Tw(c):Tw();l.target===l.currentTarget&&d===ZL(l.nativeEvent)&&(r&&r(l),i&&i(!0),a(l))},[i,r,a]);return{focusProps:{onFocus:!e&&(r||i||n)?o:void 0,onBlur:!e&&(n||i)?s:void 0}}}function bde(t){let{isDisabled:e,onBlurWithin:r,onFocusWithin:n,onFocusWithinChange:i}=t,s=M.useRef({isFocusWithin:!1}),{addGlobalListener:a,removeAllGlobalListeners:o}=tj(),l=M.useCallback(p=>{p.currentTarget.contains(p.target)&&s.current.isFocusWithin&&!p.currentTarget.contains(p.relatedTarget)&&(s.current.isFocusWithin=!1,o(),r&&r(p),i&&i(!1))},[r,i,s,o]),c=nj(l),d=M.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const g=z0(p.target),m=Tw(g);if(!s.current.isFocusWithin&&m===ZL(p.nativeEvent)){n&&n(p),i&&i(!0),s.current.isFocusWithin=!0,c(p);let w=p.currentTarget;a(g,"focus",y=>{if(s.current.isFocusWithin&&!JL(w,y.target)){let k=new g.defaultView.FocusEvent("blur",{relatedTarget:y.target});fde(k,w);let T=rj(k);l(T)}},{capture:!0})}},[n,i,c,a,l]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:d,onBlur:l}}}let Pw=!1,bx=0;function _de(){Pw=!0,setTimeout(()=>{Pw=!1},50)}function WS(t){t.pointerType==="touch"&&_de()}function kde(){if(!(typeof document>"u"))return bx===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",WS),bx++,()=>{bx--,!(bx>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",WS)}}function Ede(t){let{onHoverStart:e,onHoverChange:r,onHoverEnd:n,isDisabled:i}=t,[s,a]=M.useState(!1),o=M.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;M.useEffect(kde,[]);let{addGlobalListener:l,removeAllGlobalListeners:c}=tj(),{hoverProps:d,triggerHoverEnd:p}=M.useMemo(()=>{let g=(y,k)=>{if(o.pointerType=k,i||k==="touch"||o.isHovered||!y.currentTarget.contains(y.target))return;o.isHovered=!0;let T=y.currentTarget;o.target=T,l(z0(y.target),"pointerover",O=>{o.isHovered&&o.target&&!JL(o.target,O.target)&&m(O,O.pointerType)},{capture:!0}),e&&e({type:"hoverstart",target:T,pointerType:k}),r&&r(!0),a(!0)},m=(y,k)=>{let T=o.target;o.pointerType="",o.target=null,!(k==="touch"||!o.isHovered||!T)&&(o.isHovered=!1,c(),n&&n({type:"hoverend",target:T,pointerType:k}),r&&r(!1),a(!1))},w={};return typeof PointerEvent<"u"&&(w.onPointerEnter=y=>{Pw&&y.pointerType==="mouse"||g(y,y.pointerType)},w.onPointerLeave=y=>{!i&&y.currentTarget.contains(y.target)&&m(y,y.pointerType)}),{hoverProps:w,triggerHoverEnd:m}},[e,r,n,i,o,l,c]);return M.useEffect(()=>{i&&p({currentTarget:o.target},o.pointerType)},[i]),{hoverProps:d,isHovered:s}}function Sde(t={}){let{autoFocus:e=!1,isTextInput:r,within:n}=t,i=M.useRef({isFocused:!1,isFocusVisible:e||lj()}),[s,a]=M.useState(!1),[o,l]=M.useState(()=>i.current.isFocused&&i.current.isFocusVisible),c=M.useCallback(()=>l(i.current.isFocused&&i.current.isFocusVisible),[]),d=M.useCallback(m=>{i.current.isFocused=m,a(m),c()},[c]);yde(m=>{i.current.isFocusVisible=m,c()},[],{isTextInput:r});let{focusProps:p}=wde({isDisabled:n,onFocusChange:d}),{focusWithinProps:g}=bde({isDisabled:!n,onFocusWithinChange:d});return{isFocused:s,isFocusVisible:o,focusProps:n?g:p}}var Cde=Object.defineProperty,Tde=(t,e,r)=>e in t?Cde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,t3=(t,e,r)=>(Tde(t,typeof e!="symbol"?e+"":e,r),r);let Nde=class{constructor(){t3(this,"current",this.detect()),t3(this,"handoffState","pending"),t3(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},uu=new Nde;function yp(t){var e,r;return uu.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(r=(e=t.current)==null?void 0:e.ownerDocument)!=null?r:document:null:document}function cj(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Ql(){let t=[],e={addEventListener(r,n,i,s){return r.addEventListener(n,i,s),e.add(()=>r.removeEventListener(n,i,s))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return e.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return e.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return cj(()=>{n.current&&r[0]()}),e.add(()=>{n.current=!1})},style(r,n,i){let s=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:i}),this.add(()=>{Object.assign(r.style,{[n]:s})})},group(r){let n=Ql();return r(n),this.add(()=>n.dispose())},add(r){return t.includes(r)||t.push(r),()=>{let n=t.indexOf(r);if(n>=0)for(let i of t.splice(n,1))i()}},dispose(){for(let r of t.splice(0))r()}};return e}function H5(){let[t]=M.useState(Ql);return M.useEffect(()=>()=>t.dispose(),[t]),t}let Bs=(t,e)=>{uu.isServer?M.useEffect(t,e):M.useLayoutEffect(t,e)};function r2(t){let e=M.useRef(t);return Bs(()=>{e.current=t},[t]),e}let Vn=function(t){let e=r2(t);return di.useCallback((...r)=>e.current(...r),[e])};function Ade(t){let e=t.width/2,r=t.height/2;return{top:t.clientY-r,right:t.clientX+e,bottom:t.clientY+r,left:t.clientX-e}}function Ide(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function Pde({disabled:t=!1}={}){let e=M.useRef(null),[r,n]=M.useState(!1),i=H5(),s=Vn(()=>{e.current=null,n(!1),i.dispose()}),a=Vn(o=>{if(i.dispose(),e.current===null){e.current=o.currentTarget,n(!0);{let l=yp(o.currentTarget);i.addEventListener(l,"pointerup",s,!1),i.addEventListener(l,"pointermove",c=>{if(e.current){let d=Ade(c);n(Ide(d,e.current.getBoundingClientRect()))}},!1),i.addEventListener(l,"pointercancel",s,!1)}}});return{pressed:r,pressProps:t?{}:{onPointerDown:a,onPointerUp:s,onClick:s}}}let Rde=M.createContext(void 0);function uj(){return M.useContext(Rde)}function GS(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function wp(t,e,...r){if(t in e){let i=e[t];return typeof i=="function"?i(...r):i}let n=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,wp),n}var Rw=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Rw||{}),Fde=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Fde||{});function Jl(){let t=jde();return M.useCallback(e=>Lde({mergeRefs:t,...e}),[t])}function Lde({ourProps:t,theirProps:e,slot:r,defaultTag:n,features:i,visible:s=!0,name:a,mergeRefs:o}){o=o??Dde;let l=dj(e,t);if(s)return _x(l,r,n,a,o);let c=i??0;if(c&2){let{static:d=!1,...p}=l;if(d)return _x(p,r,n,a,o)}if(c&1){let{unmount:d=!0,...p}=l;return wp(d?0:1,{0(){return null},1(){return _x({...p,hidden:!0,style:{display:"none"}},r,n,a,o)}})}return _x(l,r,n,a,o)}function _x(t,e={},r,n,i){let{as:s=r,children:a,refName:o="ref",...l}=r3(t,["unmount","static"]),c=t.ref!==void 0?{[o]:t.ref}:{},d=typeof a=="function"?a(e):a;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let p={};if(e){let g=!1,m=[];for(let[w,y]of Object.entries(e))typeof y=="boolean"&&(g=!0),y===!0&&m.push(w.replace(/([A-Z])/g,k=>`-${k.toLowerCase()}`));if(g){p["data-headlessui-state"]=m.join(" ");for(let w of m)p[`data-${w}`]=""}}if(s===M.Fragment&&(Object.keys(t1(l)).length>0||Object.keys(t1(p)).length>0))if(!M.isValidElement(d)||Array.isArray(d)&&d.length>1){if(Object.keys(t1(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(t1(l)).concat(Object.keys(t1(p))).map(g=>`  - ${g}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(g=>`  - ${g}`).join(`
`)].join(`
`))}else{let g=d.props,m=g?.className,w=typeof m=="function"?(...T)=>GS(m(...T),l.className):GS(m,l.className),y=w?{className:w}:{},k=dj(d.props,t1(r3(l,["ref"])));for(let T in p)T in k&&delete p[T];return M.cloneElement(d,Object.assign({},k,p,c,{ref:i(Ode(d),c.ref)},y))}return M.createElement(s,Object.assign({},r3(l,["ref"]),s!==M.Fragment&&c,s!==M.Fragment&&p),d)}function jde(){let t=M.useRef([]),e=M.useCallback(r=>{for(let n of t.current)n!=null&&(typeof n=="function"?n(r):n.current=r)},[]);return(...r)=>{if(!r.every(n=>n==null))return t.current=r,e}}function Dde(...t){return t.every(e=>e==null)?void 0:e=>{for(let r of t)r!=null&&(typeof r=="function"?r(e):r.current=e)}}function dj(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let i in n)i.startsWith("on")&&typeof n[i]=="function"?(r[i]!=null||(r[i]=[]),r[i].push(n[i])):e[i]=n[i];if(e.disabled||e["aria-disabled"])for(let n in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(r[n]=[i=>{var s;return(s=i?.preventDefault)==null?void 0:s.call(i)}]);for(let n in r)Object.assign(e,{[n](i,...s){let a=r[n];for(let o of a){if((i instanceof Event||i?.nativeEvent instanceof Event)&&i.defaultPrevented)return;o(i,...s)}}});return e}function fj(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let i in n)i.startsWith("on")&&typeof n[i]=="function"?(r[i]!=null||(r[i]=[]),r[i].push(n[i])):e[i]=n[i];for(let n in r)Object.assign(e,{[n](...i){let s=r[n];for(let a of s)a?.(...i)}});return e}function Zl(t){var e;return Object.assign(M.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function t1(t){let e=Object.assign({},t);for(let r in e)e[r]===void 0&&delete e[r];return e}function r3(t,e=[]){let r=Object.assign({},t);for(let n of e)n in r&&delete r[n];return r}function Ode(t){return di.version.split(".")[0]>="19"?t.props.ref:t.ref}let Mde=M.createContext(void 0);function Bde(){return M.useContext(Mde)}function h_(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function q5(t){return h_(t)&&"tagName"in t}function gd(t){return q5(t)&&"accessKey"in t}function Sf(t){return q5(t)&&"tabIndex"in t}function Vde(t){return q5(t)&&"style"in t}function Ude(t){return gd(t)&&t.nodeName==="IFRAME"}function hj(t){return gd(t)&&t.nodeName==="INPUT"}function KS(t){return gd(t)&&t.nodeName==="LABEL"}function zde(t){return gd(t)&&t.nodeName==="FIELDSET"}function pj(t){return gd(t)&&t.nodeName==="LEGEND"}function $de(t){return q5(t)?t.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}function Hde(t){let e=t.parentElement,r=null;for(;e&&!zde(e);)pj(e)&&(r=e),e=e.parentElement;let n=e?.getAttribute("disabled")==="";return n&&qde(r)?!1:n}function qde(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(pj(e))return!1;e=e.previousElementSibling}return!0}let mj=Symbol();function Wde(t,e=!0){return Object.assign(t,{[mj]:e})}function xd(...t){let e=M.useRef(t);M.useEffect(()=>{e.current=t},[t]);let r=Vn(n=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(n):i.current=n)});return t.every(n=>n==null||n?.[mj])?void 0:r}let p_=M.createContext(null);p_.displayName="DescriptionContext";function gj(){let t=M.useContext(p_);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,gj),e}return t}function Gde(){let[t,e]=M.useState([]);return[t.length>0?t.join(" "):void 0,M.useMemo(()=>function(r){let n=Vn(s=>(e(a=>[...a,s]),()=>e(a=>{let o=a.slice(),l=o.indexOf(s);return l!==-1&&o.splice(l,1),o}))),i=M.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props,value:r.value}),[n,r.slot,r.name,r.props,r.value]);return di.createElement(p_.Provider,{value:i},r.children)},[e])]}let Kde="p";function Xde(t,e){let r=M.useId(),n=uj(),{id:i=`headlessui-description-${r}`,...s}=t,a=gj(),o=xd(e);Bs(()=>a.register(i),[i,a.register]);let l=n||!1,c=M.useMemo(()=>({...a.slot,disabled:l}),[a.slot,l]),d={ref:o,...a.props,id:i};return Jl()({ourProps:d,theirProps:s,slot:c,defaultTag:Kde,name:a.name||"Description"})}let Yde=Zl(Xde);Object.assign(Yde,{});var Ia=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Ia||{});let W5=M.createContext(null);W5.displayName="LabelContext";function m_(){let t=M.useContext(W5);if(t===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,m_),e}return t}function Qde(t){var e,r,n;let i=(r=(e=M.useContext(W5))==null?void 0:e.value)!=null?r:void 0;return((n=void 0)!=null?n:0)>0?[i,...t].filter(Boolean).join(" "):i}function xj({inherit:t=!1}={}){let e=Qde(),[r,n]=M.useState([]),i=t?[e,...r].filter(Boolean):r;return[i.length>0?i.join(" "):void 0,M.useMemo(()=>function(s){let a=Vn(l=>(n(c=>[...c,l]),()=>n(c=>{let d=c.slice(),p=d.indexOf(l);return p!==-1&&d.splice(p,1),d}))),o=M.useMemo(()=>({register:a,slot:s.slot,name:s.name,props:s.props,value:s.value}),[a,s.slot,s.name,s.props,s.value]);return di.createElement(W5.Provider,{value:o},s.children)},[n])]}let Jde="label";function Zde(t,e){var r;let n=M.useId(),i=m_(),s=Bde(),a=uj(),{id:o=`headlessui-label-${n}`,htmlFor:l=s??((r=i.props)==null?void 0:r.htmlFor),passive:c=!1,...d}=t,p=xd(e);Bs(()=>i.register(o),[o,i.register]);let g=Vn(k=>{let T=k.currentTarget;if(!(k.target!==k.currentTarget&&$de(k.target))&&(KS(T)&&k.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(k),KS(T))){let O=document.getElementById(T.htmlFor);if(O){let P=O.getAttribute("disabled");if(P==="true"||P==="")return;let V=O.getAttribute("aria-disabled");if(V==="true"||V==="")return;(hj(O)&&(O.type==="file"||O.type==="radio"||O.type==="checkbox")||O.role==="radio"||O.role==="checkbox"||O.role==="switch")&&O.click(),O.focus({preventScroll:!0})}}}),m=a||!1,w=M.useMemo(()=>({...i.slot,disabled:m}),[i.slot,m]),y={ref:p,...i.props,id:o,htmlFor:l,onClick:g};return c&&("onClick"in y&&(delete y.htmlFor,delete y.onClick),"onClick"in d&&delete d.onClick),Jl()({ourProps:y,theirProps:d,slot:w,defaultTag:l?Jde:"div",name:i.name||"Label"})}let e0e=Zl(Zde);Object.assign(e0e,{});function t0e(t){if(t===null)return{width:0,height:0};let{width:e,height:r}=t.getBoundingClientRect();return{width:e,height:r}}function r0e(t,e=!1){let[r,n]=M.useReducer(()=>({}),{}),i=M.useMemo(()=>t0e(t),[t,r]);return Bs(()=>{if(!t)return;let s=new ResizeObserver(n);return s.observe(t),()=>{s.disconnect()}},[t]),e?{width:`${i.width}px`,height:`${i.height}px`}:i}let vj=class extends Map{constructor(e){super(),this.factory=e}get(e){let r=super.get(e);return r===void 0&&(r=this.factory(e),this.set(e,r)),r}};var n0e=Object.defineProperty,i0e=(t,e,r)=>e in t?n0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,s0e=(t,e,r)=>(i0e(t,e+"",r),r),yj=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Dl=(t,e,r)=>(yj(t,e,"read from private field"),r?r.call(t):e.get(t)),n3=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},XS=(t,e,r,n)=>(yj(t,e,"write to private field"),e.set(t,r),r),Qc,wm,bm;let wj=class{constructor(e){n3(this,Qc,{}),n3(this,wm,new vj(()=>new Set)),n3(this,bm,new Set),s0e(this,"disposables",Ql()),XS(this,Qc,e),uu.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Dl(this,Qc)}subscribe(e,r){if(uu.isServer)return()=>{};let n={selector:e,callback:r,current:e(Dl(this,Qc))};return Dl(this,bm).add(n),this.disposables.add(()=>{Dl(this,bm).delete(n)})}on(e,r){return uu.isServer?()=>{}:(Dl(this,wm).get(e).add(r),this.disposables.add(()=>{Dl(this,wm).get(e).delete(r)}))}send(e){let r=this.reduce(Dl(this,Qc),e);if(r!==Dl(this,Qc)){XS(this,Qc,r);for(let n of Dl(this,bm)){let i=n.selector(Dl(this,Qc));bj(n.current,i)||(n.current=i,n.callback(i))}for(let n of Dl(this,wm).get(e.type))n(Dl(this,Qc),e)}}};Qc=new WeakMap,wm=new WeakMap,bm=new WeakMap;function bj(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null?!1:Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:i3(t[Symbol.iterator](),e[Symbol.iterator]()):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?t.size!==e.size?!1:i3(t.entries(),e.entries()):YS(t)&&YS(e)?i3(Object.entries(t)[Symbol.iterator](),Object.entries(e)[Symbol.iterator]()):!1}function i3(t,e){do{let r=t.next(),n=e.next();if(r.done&&n.done)return!0;if(r.done||n.done||!Object.is(r.value,n.value))return!1}while(!0)}function YS(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||Object.getPrototypeOf(e)===null}function QS(t){let[e,r]=t(),n=Ql();return(...i)=>{e(...i),n.dispose(),n.microTask(r)}}var a0e=Object.defineProperty,o0e=(t,e,r)=>e in t?a0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,JS=(t,e,r)=>(o0e(t,typeof e!="symbol"?e+"":e,r),r),_j=(t=>(t[t.Push=0]="Push",t[t.Pop=1]="Pop",t))(_j||{});let l0e={0(t,e){let r=e.id,n=t.stack,i=t.stack.indexOf(r);if(i!==-1){let s=t.stack.slice();return s.splice(i,1),s.push(r),n=s,{...t,stack:n}}return{...t,stack:[...t.stack,r]}},1(t,e){let r=e.id,n=t.stack.indexOf(r);if(n===-1)return t;let i=t.stack.slice();return i.splice(n,1),{...t,stack:i}}},c0e=class kj extends wj{constructor(){super(...arguments),JS(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),JS(this,"selectors",{isTop:(e,r)=>e.stack[e.stack.length-1]===r,inStack:(e,r)=>e.stack.includes(r)})}static new(){return new kj({stack:[]})}reduce(e,r){return wp(r.type,l0e,e,r)}};const g_=new vj(()=>c0e.new());var s3={exports:{}},a3={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZS;function u0e(){if(ZS)return a3;ZS=1;var t=Qv();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var r=typeof Object.is=="function"?Object.is:e,n=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,a=t.useMemo,o=t.useDebugValue;return a3.useSyncExternalStoreWithSelector=function(l,c,d,p,g){var m=i(null);if(m.current===null){var w={hasValue:!1,value:null};m.current=w}else w=m.current;m=a(function(){function k(Y){if(!T){if(T=!0,O=Y,Y=p(Y),g!==void 0&&w.hasValue){var G=w.value;if(g(G,Y))return P=G}return P=Y}if(G=P,r(O,Y))return G;var L=p(Y);return g!==void 0&&g(G,L)?(O=Y,G):(O=Y,P=L)}var T=!1,O,P,V=d===void 0?null:d;return[function(){return k(c())},V===null?void 0:function(){return k(V())}]},[c,d,p,g]);var y=n(l,m[0],m[1]);return s(function(){w.hasValue=!0,w.value=y},[y]),o(y),y},a3}var eC;function d0e(){return eC||(eC=1,s3.exports=u0e()),s3.exports}var f0e=d0e();function su(t,e,r=bj){return f0e.useSyncExternalStoreWithSelector(Vn(n=>t.subscribe(h0e,n)),Vn(()=>t.state),Vn(()=>t.state),Vn(e),r)}function h0e(t){return t}function Ej(t,e){let r=M.useId(),n=g_.get(e),[i,s]=su(n,M.useCallback(a=>[n.selectors.isTop(a,r),n.selectors.inStack(a,r)],[n,r]));return Bs(()=>{if(t)return n.actions.push(r),()=>n.actions.pop(r)},[n,t,r]),t?s?i:!0:!1}let Fw=new Map,zm=new Map;function tC(t){var e;let r=(e=zm.get(t))!=null?e:0;return zm.set(t,r+1),r!==0?()=>rC(t):(Fw.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>rC(t))}function rC(t){var e;let r=(e=zm.get(t))!=null?e:1;if(r===1?zm.delete(t):zm.set(t,r-1),r!==1)return;let n=Fw.get(t);n&&(n["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",n["aria-hidden"]),t.inert=n.inert,Fw.delete(t))}function p0e(t,{allowed:e,disallowed:r}={}){let n=Ej(t,"inert-others");Bs(()=>{var i,s;if(!n)return;let a=Ql();for(let l of(i=r?.())!=null?i:[])l&&a.add(tC(l));let o=(s=e?.())!=null?s:[];for(let l of o){if(!l)continue;let c=yp(l);if(!c)continue;let d=l.parentElement;for(;d&&d!==c.body;){for(let p of d.children)o.some(g=>p.contains(g))||a.add(tC(p));d=d.parentElement}}return a.dispose},[n,e,r])}function m0e(t,e,r){let n=r2(i=>{let s=i.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&r()});M.useEffect(()=>{if(!t)return;let i=e===null?null:gd(e)?e:e.current;if(!i)return;let s=Ql();if(typeof ResizeObserver<"u"){let a=new ResizeObserver(()=>n.current(i));a.observe(i),s.add(()=>a.disconnect())}if(typeof IntersectionObserver<"u"){let a=new IntersectionObserver(()=>n.current(i));a.observe(i),s.add(()=>a.disconnect())}return()=>s.dispose()},[e,n,t])}let Lw=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),g0e=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var jw=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(jw||{}),x0e=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(x0e||{}),v0e=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(v0e||{});function Sj(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Lw)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}function y0e(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(g0e)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var x_=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(x_||{});function v_(t,e=0){var r;return t===((r=yp(t))==null?void 0:r.body)?!1:wp(e,{0(){return t.matches(Lw)},1(){let n=t;for(;n!==null;){if(n.matches(Lw))return!0;n=n.parentElement}return!1}})}function Cj(t){let e=yp(t);Ql().nextFrame(()=>{e&&Sf(e.activeElement)&&!v_(e.activeElement,0)&&b0e(t)})}var w0e=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(w0e||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function b0e(t){t?.focus({preventScroll:!0})}let _0e=["textarea","input"].join(",");function k0e(t){var e,r;return(r=(e=t?.matches)==null?void 0:e.call(t,_0e))!=null?r:!1}function Tj(t,e=r=>r){return t.slice().sort((r,n)=>{let i=e(r),s=e(n);if(i===null||s===null)return 0;let a=i.compareDocumentPosition(s);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function E0e(t,e){return S0e(Sj(),e,{relativeTo:t})}function S0e(t,e,{sorted:r=!0,relativeTo:n=null,skipElements:i=[]}={}){let s=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,a=Array.isArray(t)?r?Tj(t):t:e&64?y0e(t):Sj(t);i.length>0&&a.length>1&&(a=a.filter(m=>!i.some(w=>w!=null&&"current"in w?w?.current===m:w===m))),n=n??s.activeElement;let o=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,a.indexOf(n))-1;if(e&4)return Math.max(0,a.indexOf(n))+1;if(e&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=e&32?{preventScroll:!0}:{},d=0,p=a.length,g;do{if(d>=p||d+p<=0)return 0;let m=l+d;if(e&16)m=(m+p)%p;else{if(m<0)return 3;if(m>=p)return 1}g=a[m],g?.focus(c),d+=o}while(g!==s.activeElement);return e&6&&k0e(g)&&g.select(),2}function Nj(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function C0e(){return/Android/gi.test(window.navigator.userAgent)}function nC(){return Nj()||C0e()}function f1(t,e,r,n){let i=r2(r);M.useEffect(()=>{if(!t)return;function s(a){i.current(a)}return document.addEventListener(e,s,n),()=>document.removeEventListener(e,s,n)},[t,e,n])}function T0e(t,e,r,n){let i=r2(r);M.useEffect(()=>{if(!t)return;function s(a){i.current(a)}return window.addEventListener(e,s,n),()=>window.removeEventListener(e,s,n)},[t,e,n])}const iC=30;function N0e(t,e,r){let n=r2(r),i=M.useCallback(function(o,l){if(o.defaultPrevented)return;let c=l(o);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let d=(function p(g){return typeof g=="function"?p(g()):Array.isArray(g)||g instanceof Set?g:[g]})(e);for(let p of d)if(p!==null&&(p.contains(c)||o.composed&&o.composedPath().includes(p)))return;return!v_(c,x_.Loose)&&c.tabIndex!==-1&&o.preventDefault(),n.current(o,c)},[n,e]),s=M.useRef(null);f1(t,"pointerdown",o=>{var l,c;nC()||(s.current=((c=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:c[0])||o.target)},!0),f1(t,"pointerup",o=>{if(nC()||!s.current)return;let l=s.current;return s.current=null,i(o,()=>l)},!0);let a=M.useRef({x:0,y:0});f1(t,"touchstart",o=>{a.current.x=o.touches[0].clientX,a.current.y=o.touches[0].clientY},!0),f1(t,"touchend",o=>{let l={x:o.changedTouches[0].clientX,y:o.changedTouches[0].clientY};if(!(Math.abs(l.x-a.current.x)>=iC||Math.abs(l.y-a.current.y)>=iC))return i(o,()=>Sf(o.target)?o.target:null)},!0),T0e(t,"blur",o=>i(o,()=>Ude(window.document.activeElement)?window.document.activeElement:null),!0)}function Dw(...t){return M.useMemo(()=>yp(...t),[...t])}var A0e=(t=>(t[t.Ignore=0]="Ignore",t[t.Select=1]="Select",t[t.Close=2]="Close",t))(A0e||{});const kx={Ignore:{kind:0},Select:t=>({kind:1,target:t}),Close:{kind:2}},I0e=200,sC=5;function P0e(t,{trigger:e,action:r,close:n,select:i}){let s=M.useRef(null),a=M.useRef(null),o=M.useRef(null);f1(t&&e!==null,"pointerdown",l=>{h_(l?.target)&&e!=null&&e.contains(l.target)&&(a.current=l.x,o.current=l.y,s.current=l.timeStamp)}),f1(t&&e!==null,"pointerup",l=>{var c,d;let p=s.current;if(p===null||(s.current=null,!Sf(l.target))||Math.abs(l.x-((c=a.current)!=null?c:l.x))<sC&&Math.abs(l.y-((d=o.current)!=null?d:l.y))<sC)return;let g=r(l);switch(g.kind){case 0:return;case 1:{l.timeStamp-p>I0e&&(i(g.target),n());break}case 2:{n();break}}},{capture:!0})}function R0e(t,e){return M.useMemo(()=>{var r;if(t.type)return t.type;let n=(r=t.as)!=null?r:"button";if(typeof n=="string"&&n.toLowerCase()==="button"||e?.tagName==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}function F0e(t){return M.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}function L0e(t,e){let r=t(),n=new Set;return{getSnapshot(){return r},subscribe(i){return n.add(i),()=>n.delete(i)},dispatch(i,...s){let a=e[i].call(r,...s);a&&(r=a,n.forEach(o=>o()))}}}function j0e(){let t;return{before({doc:e}){var r;let n=e.documentElement,i=(r=e.defaultView)!=null?r:window;t=Math.max(0,i.innerWidth-n.clientWidth)},after({doc:e,d:r}){let n=e.documentElement,i=Math.max(0,n.clientWidth-n.offsetWidth),s=Math.max(0,t-i);r.style(n,"paddingRight",`${s}px`)}}}function D0e(){return Nj()?{before({doc:t,d:e,meta:r}){function n(i){return r.containers.flatMap(s=>s()).some(s=>s.contains(i))}e.microTask(()=>{var i;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let o=Ql();o.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>o.dispose()))}let s=(i=window.scrollY)!=null?i:window.pageYOffset,a=null;e.addEventListener(t,"click",o=>{if(Sf(o.target))try{let l=o.target.closest("a");if(!l)return;let{hash:c}=new URL(l.href),d=t.querySelector(c);Sf(d)&&!n(d)&&(a=d)}catch{}},!0),e.addEventListener(t,"touchstart",o=>{if(Sf(o.target)&&Vde(o.target))if(n(o.target)){let l=o.target;for(;l.parentElement&&n(l.parentElement);)l=l.parentElement;e.style(l,"overscrollBehavior","contain")}else e.style(o.target,"touchAction","none")}),e.addEventListener(t,"touchmove",o=>{if(Sf(o.target)){if(hj(o.target))return;if(n(o.target)){let l=o.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&o.preventDefault()}else o.preventDefault()}},{passive:!1}),e.add(()=>{var o;let l=(o=window.scrollY)!=null?o:window.pageYOffset;s!==l&&window.scrollTo(0,s),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function O0e(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function M0e(t){let e={};for(let r of t)Object.assign(e,r(e));return e}let Cf=L0e(()=>new Map,{PUSH(t,e){var r;let n=(r=this.get(t))!=null?r:{doc:t,count:0,d:Ql(),meta:new Set};return n.count++,n.meta.add(e),this.set(t,n),this},POP(t,e){let r=this.get(t);return r&&(r.count--,r.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:r}){let n={doc:t,d:e,meta:M0e(r)},i=[D0e(),j0e(),O0e()];i.forEach(({before:s})=>s?.(n)),i.forEach(({after:s})=>s?.(n))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Cf.subscribe(()=>{let t=Cf.getSnapshot(),e=new Map;for(let[r]of t)e.set(r,r.documentElement.style.overflow);for(let r of t.values()){let n=e.get(r.doc)==="hidden",i=r.count!==0;(i&&!n||!i&&n)&&Cf.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&Cf.dispatch("TEARDOWN",r)}});function B0e(t,e,r=()=>({containers:[]})){let n=F0e(Cf),i=e?n.get(e):void 0,s=i?i.count>0:!1;return Bs(()=>{if(!(!e||!t))return Cf.dispatch("PUSH",e,r),()=>Cf.dispatch("POP",e,r)},[t,e]),s}function V0e(t,e,r=()=>[document.body]){let n=Ej(t,"scroll-lock");B0e(n,e,i=>{var s;return{containers:[...(s=i.containers)!=null?s:[],r]}})}function aC(t){return[t.screenX,t.screenY]}function U0e(){let t=M.useRef([-1,-1]);return{wasMoved(e){let r=aC(e);return t.current[0]===r[0]&&t.current[1]===r[1]?!1:(t.current=r,!0)},update(e){t.current=aC(e)}}}function z0e(t=0){let[e,r]=M.useState(t),n=M.useCallback(l=>r(l),[e]),i=M.useCallback(l=>r(c=>c|l),[e]),s=M.useCallback(l=>(e&l)===l,[e]),a=M.useCallback(l=>r(c=>c&~l),[r]),o=M.useCallback(l=>r(c=>c^l),[r]);return{flags:e,setFlag:n,addFlag:i,hasFlag:s,removeFlag:a,toggleFlag:o}}var $0e={},oC,lC;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((oC=process==null?void 0:$0e)==null?void 0:oC.NODE_ENV)==="test"&&typeof((lC=Element?.prototype)==null?void 0:lC.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var H0e=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(H0e||{});function q0e(t){let e={};for(let r in t)t[r]===!0&&(e[`data-${r}`]="");return e}function W0e(t,e,r,n){let[i,s]=M.useState(r),{hasFlag:a,addFlag:o,removeFlag:l}=z0e(t&&i?3:0),c=M.useRef(!1),d=M.useRef(!1),p=H5();return Bs(()=>{var g;if(t){if(r&&s(!0),!e){r&&o(3);return}return(g=void 0)==null||g.call(n,r),G0e(e,{inFlight:c,prepare(){d.current?d.current=!1:d.current=c.current,c.current=!0,!d.current&&(r?(o(3),l(4)):(o(4),l(2)))},run(){d.current?r?(l(3),o(4)):(l(4),o(3)):r?l(1):o(1)},done(){var m;d.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(c.current=!1,l(7),r||s(!1),(m=void 0)==null||m.call(n,r))}})}},[t,r,e,p]),t?[i,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function G0e(t,{prepare:e,run:r,done:n,inFlight:i}){let s=Ql();return X0e(t,{prepare:e,inFlight:i}),s.nextFrame(()=>{r(),s.requestAnimationFrame(()=>{s.add(K0e(t,n))})}),s.dispose}function K0e(t,e){var r,n;let i=Ql();if(!t)return i.dispose;let s=!1;i.add(()=>{s=!0});let a=(n=(r=t.getAnimations)==null?void 0:r.call(t).filter(o=>o instanceof CSSTransition))!=null?n:[];return a.length===0?(e(),i.dispose):(Promise.allSettled(a.map(o=>o.finished)).then(()=>{s||e()}),i.dispose)}function X0e(t,{inFlight:e,prepare:r}){if(e!=null&&e.current){r();return}let n=t.style.transition;t.style.transition="none",r(),t.offsetHeight,t.style.transition=n}function Y0e(t,{container:e,accept:r,walk:n}){let i=M.useRef(r),s=M.useRef(n);M.useEffect(()=>{i.current=r,s.current=n},[r,n]),Bs(()=>{if(!e||!t)return;let a=yp(e);if(!a)return;let o=i.current,l=s.current,c=Object.assign(p=>o(p),{acceptNode:o}),d=a.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,c,!1);for(;d.nextNode();)l(d.currentNode)},[e,t,i,s])}function G5(){return typeof window<"u"}function bp(t){return Aj(t)?(t.nodeName||"").toLowerCase():"#document"}function gl(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function yu(t){var e;return(e=(Aj(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Aj(t){return G5()?t instanceof Node||t instanceof gl(t).Node:!1}function To(t){return G5()?t instanceof Element||t instanceof gl(t).Element:!1}function hu(t){return G5()?t instanceof HTMLElement||t instanceof gl(t).HTMLElement:!1}function cC(t){return!G5()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof gl(t).ShadowRoot}const Q0e=new Set(["inline","contents"]);function n2(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=Tc(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!Q0e.has(i)}const J0e=new Set(["table","td","th"]);function Z0e(t){return J0e.has(bp(t))}const efe=[":popover-open",":modal"];function K5(t){return efe.some(e=>{try{return t.matches(e)}catch{return!1}})}const tfe=["transform","translate","scale","rotate","perspective"],rfe=["transform","translate","scale","rotate","perspective","filter"],nfe=["paint","layout","strict","content"];function y_(t){const e=w_(),r=To(t)?Tc(t):t;return tfe.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||rfe.some(n=>(r.willChange||"").includes(n))||nfe.some(n=>(r.contain||"").includes(n))}function ife(t){let e=A0(t);for(;hu(e)&&!Q1(e);){if(y_(e))return e;if(K5(e))return null;e=A0(e)}return null}function w_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const sfe=new Set(["html","body","#document"]);function Q1(t){return sfe.has(bp(t))}function Tc(t){return gl(t).getComputedStyle(t)}function X5(t){return To(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function A0(t){if(bp(t)==="html")return t;const e=t.assignedSlot||t.parentNode||cC(t)&&t.host||yu(t);return cC(e)?e.host:e}function Ij(t){const e=A0(t);return Q1(e)?t.ownerDocument?t.ownerDocument.body:t.body:hu(e)&&n2(e)?e:Ij(e)}function wg(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=Ij(t),s=i===((n=t.ownerDocument)==null?void 0:n.body),a=gl(i);if(s){const o=Ow(a);return e.concat(a,a.visualViewport||[],n2(i)?i:[],o&&r?wg(o):[])}return e.concat(i,wg(i,[],r))}function Ow(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function afe(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:r,version:n}=e;return r+"/"+n}).join(" "):navigator.userAgent}const ih=Math.min,uo=Math.max,bg=Math.round,Ex=Math.floor,du=t=>({x:t,y:t}),ofe={left:"right",right:"left",bottom:"top",top:"bottom"},lfe={start:"end",end:"start"};function uC(t,e,r){return uo(t,ih(e,r))}function _p(t,e){return typeof t=="function"?t(e):t}function I0(t){return t.split("-")[0]}function i2(t){return t.split("-")[1]}function Pj(t){return t==="x"?"y":"x"}function Rj(t){return t==="y"?"height":"width"}const cfe=new Set(["top","bottom"]);function Gu(t){return cfe.has(I0(t))?"y":"x"}function Fj(t){return Pj(Gu(t))}function ufe(t,e,r){r===void 0&&(r=!1);const n=i2(t),i=Fj(t),s=Rj(i);let a=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=Gv(a)),[a,Gv(a)]}function dfe(t){const e=Gv(t);return[Mw(t),e,Mw(e)]}function Mw(t){return t.replace(/start|end/g,e=>lfe[e])}const dC=["left","right"],fC=["right","left"],ffe=["top","bottom"],hfe=["bottom","top"];function pfe(t,e,r){switch(t){case"top":case"bottom":return r?e?fC:dC:e?dC:fC;case"left":case"right":return e?ffe:hfe;default:return[]}}function mfe(t,e,r,n){const i=i2(t);let s=pfe(I0(t),r==="start",n);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(Mw)))),s}function Gv(t){return t.replace(/left|right|bottom|top/g,e=>ofe[e])}function gfe(t){return{top:0,right:0,bottom:0,left:0,...t}}function xfe(t){return typeof t!="number"?gfe(t):{top:t,right:t,bottom:t,left:t}}function Kv(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function hC(t,e,r){let{reference:n,floating:i}=t;const s=Gu(e),a=Fj(e),o=Rj(a),l=I0(e),c=s==="y",d=n.x+n.width/2-i.width/2,p=n.y+n.height/2-i.height/2,g=n[o]/2-i[o]/2;let m;switch(l){case"top":m={x:d,y:n.y-i.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:p};break;case"left":m={x:n.x-i.width,y:p};break;default:m={x:n.x,y:n.y}}switch(i2(e)){case"start":m[a]-=g*(r&&c?-1:1);break;case"end":m[a]+=g*(r&&c?-1:1);break}return m}const vfe=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:a}=r,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:p}=hC(c,n,l),g=n,m={},w=0;for(let y=0;y<o.length;y++){const{name:k,fn:T}=o[y],{x:O,y:P,data:V,reset:Y}=await T({x:d,y:p,initialPlacement:n,placement:g,strategy:i,middlewareData:m,rects:c,platform:a,elements:{reference:t,floating:e}});d=O??d,p=P??p,m={...m,[k]:{...m[k],...V}},Y&&w<=50&&(w++,typeof Y=="object"&&(Y.placement&&(g=Y.placement),Y.rects&&(c=Y.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):Y.rects),{x:d,y:p}=hC(c,g,l)),y=-1)}return{x:d,y:p,placement:g,strategy:i,middlewareData:m}};async function Y5(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:a,elements:o,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:g=!1,padding:m=0}=_p(e,t),w=xfe(m),k=o[g?p==="floating"?"reference":"floating":p],T=Kv(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(k)))==null||r?k:k.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),O=p==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,P=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),V=await(s.isElement==null?void 0:s.isElement(P))?await(s.getScale==null?void 0:s.getScale(P))||{x:1,y:1}:{x:1,y:1},Y=Kv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:O,offsetParent:P,strategy:l}):O);return{top:(T.top-Y.top+w.top)/V.y,bottom:(Y.bottom-T.bottom+w.bottom)/V.y,left:(T.left-Y.left+w.left)/V.x,right:(Y.right-T.right+w.right)/V.x}}const yfe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:y=!0,...k}=_p(t,e);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const T=I0(i),O=Gu(o),P=I0(o)===o,V=await(l.isRTL==null?void 0:l.isRTL(c.floating)),Y=g||(P||!y?[Gv(o)]:dfe(o)),G=w!=="none";!g&&G&&Y.push(...mfe(o,y,w,V));const L=[o,...Y],N=await Y5(e,k),C=[];let R=((n=s.flip)==null?void 0:n.overflows)||[];if(d&&C.push(N[T]),p){const te=ufe(i,a,V);C.push(N[te[0]],N[te[1]])}if(R=[...R,{placement:i,overflows:C}],!C.every(te=>te<=0)){var A,F;const te=(((A=s.flip)==null?void 0:A.index)||0)+1,pe=L[te];if(pe&&(!(p==="alignment"?O!==Gu(pe):!1)||R.every(re=>Gu(re.placement)===O?re.overflows[0]>0:!0)))return{data:{index:te,overflows:R},reset:{placement:pe}};let Ee=(F=R.filter(ve=>ve.overflows[0]<=0).sort((ve,re)=>ve.overflows[1]-re.overflows[1])[0])==null?void 0:F.placement;if(!Ee)switch(m){case"bestFit":{var B;const ve=(B=R.filter(re=>{if(G){const W=Gu(re.placement);return W===O||W==="y"}return!0}).map(re=>[re.placement,re.overflows.filter(W=>W>0).reduce((W,ne)=>W+ne,0)]).sort((re,W)=>re[1]-W[1])[0])==null?void 0:B[0];ve&&(Ee=ve);break}case"initialPlacement":Ee=o;break}if(i!==Ee)return{reset:{placement:Ee}}}return{}}}},wfe=new Set(["left","top"]);async function bfe(t,e){const{placement:r,platform:n,elements:i}=t,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),a=I0(r),o=i2(r),l=Gu(r)==="y",c=wfe.has(a)?-1:1,d=s&&l?-1:1,p=_p(e,t);let{mainAxis:g,crossAxis:m,alignmentAxis:w}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return o&&typeof w=="number"&&(m=o==="end"?w*-1:w),l?{x:m*d,y:g*c}:{x:g*c,y:m*d}}const _fe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:s,placement:a,middlewareData:o}=e,l=await bfe(e,t);return a===((r=o.offset)==null?void 0:r.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:a}}}}},kfe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:k=>{let{x:T,y:O}=k;return{x:T,y:O}}},...l}=_p(t,e),c={x:r,y:n},d=await Y5(e,l),p=Gu(I0(i)),g=Pj(p);let m=c[g],w=c[p];if(s){const k=g==="y"?"top":"left",T=g==="y"?"bottom":"right",O=m+d[k],P=m-d[T];m=uC(O,m,P)}if(a){const k=p==="y"?"top":"left",T=p==="y"?"bottom":"right",O=w+d[k],P=w-d[T];w=uC(O,w,P)}const y=o.fn({...e,[g]:m,[p]:w});return{...y,data:{x:y.x-r,y:y.y-n,enabled:{[g]:s,[p]:a}}}}}},Efe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:i,rects:s,platform:a,elements:o}=e,{apply:l=()=>{},...c}=_p(t,e),d=await Y5(e,c),p=I0(i),g=i2(i),m=Gu(i)==="y",{width:w,height:y}=s.floating;let k,T;p==="top"||p==="bottom"?(k=p,T=g===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(T=p,k=g==="end"?"top":"bottom");const O=y-d.top-d.bottom,P=w-d.left-d.right,V=ih(y-d[k],O),Y=ih(w-d[T],P),G=!e.middlewareData.shift;let L=V,N=Y;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(N=P),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(L=O),G&&!g){const R=uo(d.left,0),A=uo(d.right,0),F=uo(d.top,0),B=uo(d.bottom,0);m?N=w-2*(R!==0||A!==0?R+A:uo(d.left,d.right)):L=y-2*(F!==0||B!==0?F+B:uo(d.top,d.bottom))}await l({...e,availableWidth:N,availableHeight:L});const C=await a.getDimensions(o.floating);return w!==C.width||y!==C.height?{reset:{rects:!0}}:{}}}};function Lj(t){const e=Tc(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=hu(t),s=i?t.offsetWidth:r,a=i?t.offsetHeight:n,o=bg(r)!==s||bg(n)!==a;return o&&(r=s,n=a),{width:r,height:n,$:o}}function b_(t){return To(t)?t:t.contextElement}function I1(t){const e=b_(t);if(!hu(e))return du(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:s}=Lj(e);let a=(s?bg(r.width):r.width)/n,o=(s?bg(r.height):r.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const Sfe=du(0);function jj(t){const e=gl(t);return!w_()||!e.visualViewport?Sfe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Cfe(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==gl(t)?!1:e}function sh(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),s=b_(t);let a=du(1);e&&(n?To(n)&&(a=I1(n)):a=I1(t));const o=Cfe(s,r,n)?jj(s):du(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,d=i.width/a.x,p=i.height/a.y;if(s){const g=gl(s),m=n&&To(n)?gl(n):n;let w=g,y=Ow(w);for(;y&&n&&m!==w;){const k=I1(y),T=y.getBoundingClientRect(),O=Tc(y),P=T.left+(y.clientLeft+parseFloat(O.paddingLeft))*k.x,V=T.top+(y.clientTop+parseFloat(O.paddingTop))*k.y;l*=k.x,c*=k.y,d*=k.x,p*=k.y,l+=P,c+=V,w=gl(y),y=Ow(w)}}return Kv({width:d,height:p,x:l,y:c})}function Q5(t,e){const r=X5(t).scrollLeft;return e?e.left+r:sh(yu(t)).left+r}function Dj(t,e){const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-Q5(t,r),i=r.top+e.scrollTop;return{x:n,y:i}}function Tfe(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const s=i==="fixed",a=yu(n),o=e?K5(e.floating):!1;if(n===a||o&&s)return r;let l={scrollLeft:0,scrollTop:0},c=du(1);const d=du(0),p=hu(n);if((p||!p&&!s)&&((bp(n)!=="body"||n2(a))&&(l=X5(n)),hu(n))){const m=sh(n);c=I1(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const g=a&&!p&&!s?Dj(a,l):du(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+d.x+g.x,y:r.y*c.y-l.scrollTop*c.y+d.y+g.y}}function Nfe(t){return Array.from(t.getClientRects())}function Afe(t){const e=yu(t),r=X5(t),n=t.ownerDocument.body,i=uo(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=uo(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+Q5(t);const o=-r.scrollTop;return Tc(n).direction==="rtl"&&(a+=uo(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:a,y:o}}const pC=25;function Ife(t,e){const r=gl(t),n=yu(t),i=r.visualViewport;let s=n.clientWidth,a=n.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const d=w_();(!d||d&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}const c=Q5(n);if(c<=0){const d=n.ownerDocument,p=d.body,g=getComputedStyle(p),m=d.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,w=Math.abs(n.clientWidth-p.clientWidth-m);w<=pC&&(s-=w)}else c<=pC&&(s+=c);return{width:s,height:a,x:o,y:l}}const Pfe=new Set(["absolute","fixed"]);function Rfe(t,e){const r=sh(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,s=hu(t)?I1(t):du(1),a=t.clientWidth*s.x,o=t.clientHeight*s.y,l=i*s.x,c=n*s.y;return{width:a,height:o,x:l,y:c}}function mC(t,e,r){let n;if(e==="viewport")n=Ife(t,r);else if(e==="document")n=Afe(yu(t));else if(To(e))n=Rfe(e,r);else{const i=jj(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Kv(n)}function Oj(t,e){const r=A0(t);return r===e||!To(r)||Q1(r)?!1:Tc(r).position==="fixed"||Oj(r,e)}function Ffe(t,e){const r=e.get(t);if(r)return r;let n=wg(t,[],!1).filter(o=>To(o)&&bp(o)!=="body"),i=null;const s=Tc(t).position==="fixed";let a=s?A0(t):t;for(;To(a)&&!Q1(a);){const o=Tc(a),l=y_(a);!l&&o.position==="fixed"&&(i=null),(s?!l&&!i:!l&&o.position==="static"&&!!i&&Pfe.has(i.position)||n2(a)&&!l&&Oj(t,a))?n=n.filter(d=>d!==a):i=o,a=A0(a)}return e.set(t,n),n}function Lfe(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const a=[...r==="clippingAncestors"?K5(e)?[]:Ffe(e,this._c):[].concat(r),n],o=a[0],l=a.reduce((c,d)=>{const p=mC(e,d,i);return c.top=uo(p.top,c.top),c.right=ih(p.right,c.right),c.bottom=ih(p.bottom,c.bottom),c.left=uo(p.left,c.left),c},mC(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function jfe(t){const{width:e,height:r}=Lj(t);return{width:e,height:r}}function Dfe(t,e,r){const n=hu(e),i=yu(e),s=r==="fixed",a=sh(t,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=du(0);function c(){l.x=Q5(i)}if(n||!n&&!s)if((bp(e)!=="body"||n2(i))&&(o=X5(e)),n){const m=sh(e,!0,s,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else i&&c();s&&!n&&i&&c();const d=i&&!n&&!s?Dj(i,o):du(0),p=a.left+o.scrollLeft-l.x-d.x,g=a.top+o.scrollTop-l.y-d.y;return{x:p,y:g,width:a.width,height:a.height}}function o3(t){return Tc(t).position==="static"}function gC(t,e){if(!hu(t)||Tc(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return yu(t)===r&&(r=r.ownerDocument.body),r}function Mj(t,e){const r=gl(t);if(K5(t))return r;if(!hu(t)){let i=A0(t);for(;i&&!Q1(i);){if(To(i)&&!o3(i))return i;i=A0(i)}return r}let n=gC(t,e);for(;n&&Z0e(n)&&o3(n);)n=gC(n,e);return n&&Q1(n)&&o3(n)&&!y_(n)?r:n||ife(t)||r}const Ofe=async function(t){const e=this.getOffsetParent||Mj,r=this.getDimensions,n=await r(t.floating);return{reference:Dfe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Mfe(t){return Tc(t).direction==="rtl"}const Bfe={convertOffsetParentRelativeRectToViewportRelativeRect:Tfe,getDocumentElement:yu,getClippingRect:Lfe,getOffsetParent:Mj,getElementRects:Ofe,getClientRects:Nfe,getDimensions:jfe,getScale:I1,isElement:To,isRTL:Mfe};function Bj(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Vfe(t,e){let r=null,n;const i=yu(t);function s(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:d,top:p,width:g,height:m}=c;if(o||e(),!g||!m)return;const w=Ex(p),y=Ex(i.clientWidth-(d+g)),k=Ex(i.clientHeight-(p+m)),T=Ex(d),P={rootMargin:-w+"px "+-y+"px "+-k+"px "+-T+"px",threshold:uo(0,ih(1,l))||1};let V=!0;function Y(G){const L=G[0].intersectionRatio;if(L!==l){if(!V)return a();L?a(!1,L):n=setTimeout(()=>{a(!1,1e-7)},1e3)}L===1&&!Bj(c,t.getBoundingClientRect())&&a(),V=!1}try{r=new IntersectionObserver(Y,{...P,root:i.ownerDocument})}catch{r=new IntersectionObserver(Y,P)}r.observe(t)}return a(!0),s}function Ufe(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=b_(t),d=i||s?[...c?wg(c):[],...wg(e)]:[];d.forEach(T=>{i&&T.addEventListener("scroll",r,{passive:!0}),s&&T.addEventListener("resize",r)});const p=c&&o?Vfe(c,r):null;let g=-1,m=null;a&&(m=new ResizeObserver(T=>{let[O]=T;O&&O.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var P;(P=m)==null||P.observe(e)})),r()}),c&&!l&&m.observe(c),m.observe(e));let w,y=l?sh(t):null;l&&k();function k(){const T=sh(t);y&&!Bj(y,T)&&r(),y=T,w=requestAnimationFrame(k)}return r(),()=>{var T;d.forEach(O=>{i&&O.removeEventListener("scroll",r),s&&O.removeEventListener("resize",r)}),p?.(),(T=m)==null||T.disconnect(),m=null,l&&cancelAnimationFrame(w)}}const l3=Y5,zfe=_fe,$fe=kfe,Hfe=yfe,qfe=Efe,Wfe=(t,e,r)=>{const n=new Map,i={platform:Bfe,...r},s={...i.platform,_c:n};return vfe(t,e,{...i,platform:s})};var Gfe=typeof document<"u",Kfe=function(){},Xx=Gfe?M.useLayoutEffect:Kfe;function Xv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Xv(t[n],e[n]))return!1;return!0}if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){const s=i[n];if(!(s==="_owner"&&t.$$typeof)&&!Xv(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function Vj(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function xC(t,e){const r=Vj(t);return Math.round(e*r)/r}function c3(t){const e=M.useRef(t);return Xx(()=>{e.current=t}),e}function Xfe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=t,[d,p]=M.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[g,m]=M.useState(n);Xv(g,n)||m(n);const[w,y]=M.useState(null),[k,T]=M.useState(null),O=M.useCallback(re=>{re!==G.current&&(G.current=re,y(re))},[]),P=M.useCallback(re=>{re!==L.current&&(L.current=re,T(re))},[]),V=s||w,Y=a||k,G=M.useRef(null),L=M.useRef(null),N=M.useRef(d),C=l!=null,R=c3(l),A=c3(i),F=c3(c),B=M.useCallback(()=>{if(!G.current||!L.current)return;const re={placement:e,strategy:r,middleware:g};A.current&&(re.platform=A.current),Wfe(G.current,L.current,re).then(W=>{const ne={...W,isPositioned:F.current!==!1};te.current&&!Xv(N.current,ne)&&(N.current=ne,os.flushSync(()=>{p(ne)}))})},[g,e,r,A,F]);Xx(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,p(re=>({...re,isPositioned:!1})))},[c]);const te=M.useRef(!1);Xx(()=>(te.current=!0,()=>{te.current=!1}),[]),Xx(()=>{if(V&&(G.current=V),Y&&(L.current=Y),V&&Y){if(R.current)return R.current(V,Y,B);B()}},[V,Y,B,R,C]);const pe=M.useMemo(()=>({reference:G,floating:L,setReference:O,setFloating:P}),[O,P]),Ee=M.useMemo(()=>({reference:V,floating:Y}),[V,Y]),ve=M.useMemo(()=>{const re={position:r,left:0,top:0};if(!Ee.floating)return re;const W=xC(Ee.floating,d.x),ne=xC(Ee.floating,d.y);return o?{...re,transform:"translate("+W+"px, "+ne+"px)",...Vj(Ee.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:W,top:ne}},[r,o,Ee.floating,d.x,d.y]);return M.useMemo(()=>({...d,update:B,refs:pe,elements:Ee,floatingStyles:ve}),[d,B,pe,Ee,ve])}const Uj=(t,e)=>({...zfe(t),options:[t,e]}),Yfe=(t,e)=>({...$fe(t),options:[t,e]}),Qfe=(t,e)=>({...Hfe(t),options:[t,e]}),Jfe=(t,e)=>({...qfe(t),options:[t,e]}),zj={...Qx},Zfe=zj.useInsertionEffect,ehe=Zfe||(t=>t());function $j(t){const e=M.useRef(()=>{});return ehe(()=>{e.current=t}),M.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e.current==null?void 0:e.current(...n)},[])}var Bw=typeof document<"u"?M.useLayoutEffect:M.useEffect;let vC=!1,the=0;const yC=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+the++;function rhe(){const[t,e]=M.useState(()=>vC?yC():void 0);return Bw(()=>{t==null&&e(yC())},[]),M.useEffect(()=>{vC=!0},[]),t}const nhe=zj.useId,ihe=nhe||rhe;function she(){const t=new Map;return{emit(e,r){var n;(n=t.get(e))==null||n.forEach(i=>i(r))},on(e,r){t.set(e,[...t.get(e)||[],r])},off(e,r){var n;t.set(e,((n=t.get(e))==null?void 0:n.filter(i=>i!==r))||[])}}}const ahe=M.createContext(null),ohe=M.createContext(null),lhe=()=>{var t;return((t=M.useContext(ahe))==null?void 0:t.id)||null},che=()=>M.useContext(ohe),uhe="data-floating-ui-focusable";function dhe(t){const{open:e=!1,onOpenChange:r,elements:n}=t,i=ihe(),s=M.useRef({}),[a]=M.useState(()=>she()),o=lhe()!=null,[l,c]=M.useState(n.reference),d=$j((m,w,y)=>{s.current.openEvent=m?w:void 0,a.emit("openchange",{open:m,event:w,reason:y,nested:o}),r?.(m,w,y)}),p=M.useMemo(()=>({setPositionReference:c}),[]),g=M.useMemo(()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference}),[l,n.reference,n.floating]);return M.useMemo(()=>({dataRef:s,open:e,onOpenChange:d,elements:g,events:a,floatingId:i,refs:p}),[e,d,g,a,i,p])}function fhe(t){t===void 0&&(t={});const{nodeId:e}=t,r=dhe({...t,elements:{reference:null,floating:null,...t.elements}}),n=t.rootContext||r,i=n.elements,[s,a]=M.useState(null),[o,l]=M.useState(null),d=i?.domReference||s,p=M.useRef(null),g=che();Bw(()=>{d&&(p.current=d)},[d]);const m=Xfe({...t,elements:{...i,...o&&{reference:o}}}),w=M.useCallback(P=>{const V=To(P)?{getBoundingClientRect:()=>P.getBoundingClientRect(),contextElement:P}:P;l(V),m.refs.setReference(V)},[m.refs]),y=M.useCallback(P=>{(To(P)||P===null)&&(p.current=P,a(P)),(To(m.refs.reference.current)||m.refs.reference.current===null||P!==null&&!To(P))&&m.refs.setReference(P)},[m.refs]),k=M.useMemo(()=>({...m.refs,setReference:y,setPositionReference:w,domReference:p}),[m.refs,y,w]),T=M.useMemo(()=>({...m.elements,domReference:d}),[m.elements,d]),O=M.useMemo(()=>({...m,...n,refs:k,elements:T,nodeId:e}),[m,k,T,e,n]);return Bw(()=>{n.dataRef.current.floatingContext=O;const P=g?.nodesRef.current.find(V=>V.id===e);P&&(P.context=O)}),M.useMemo(()=>({...m,context:O,refs:k,elements:T}),[m,k,T,O])}const wC="active",bC="selected";function u3(t,e,r){const n=new Map,i=r==="item";let s=t;if(i&&t){const{[wC]:a,[bC]:o,...l}=t;s=l}return{...r==="floating"&&{tabIndex:-1,[uhe]:""},...s,...e.map(a=>{const o=a?a[r]:null;return typeof o=="function"?t?o(t):null:o}).concat(t).reduce((a,o)=>(o&&Object.entries(o).forEach(l=>{let[c,d]=l;if(!(i&&[wC,bC].includes(c)))if(c.indexOf("on")===0){if(n.has(c)||n.set(c,[]),typeof d=="function"){var p;(p=n.get(c))==null||p.push(d),a[c]=function(){for(var g,m=arguments.length,w=new Array(m),y=0;y<m;y++)w[y]=arguments[y];return(g=n.get(c))==null?void 0:g.map(k=>k(...w)).find(k=>k!==void 0)}}}else a[c]=d}),a),{})}}function hhe(t){t===void 0&&(t=[]);const e=t.map(o=>o?.reference),r=t.map(o=>o?.floating),n=t.map(o=>o?.item),i=M.useCallback(o=>u3(o,t,"reference"),e),s=M.useCallback(o=>u3(o,t,"floating"),r),a=M.useCallback(o=>u3(o,t,"item"),n);return M.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:a}),[i,s,a])}function _C(t,e){return{...t,rects:{...t.rects,floating:{...t.rects.floating,height:e}}}}const phe=t=>({name:"inner",options:t,async fn(e){const{listRef:r,overflowRef:n,onFallbackChange:i,offset:s=0,index:a=0,minItemsVisible:o=4,referenceOverflowThreshold:l=0,scrollRef:c,...d}=_p(t,e),{rects:p,elements:{floating:g}}=e,m=r.current[a],w=c?.current||g,y=g.clientTop||w.clientTop,k=g.clientTop!==0,T=w.clientTop!==0,O=g===w;if(!m)return{};const P={...e,...await Uj(-m.offsetTop-g.clientTop-p.reference.height/2-m.offsetHeight/2-s).fn(e)},V=await l3(_C(P,w.scrollHeight+y+g.clientTop),d),Y=await l3(P,{...d,elementContext:"reference"}),G=uo(0,V.top),L=P.y+G,R=(w.scrollHeight>w.clientHeight?A=>A:bg)(uo(0,w.scrollHeight+(k&&O||T?y*2:0)-G-uo(0,V.bottom)));if(w.style.maxHeight=R+"px",w.scrollTop=G,i){const A=w.offsetHeight<m.offsetHeight*ih(o,r.current.length)-1||Y.top>=-l||Y.bottom>=-l;os.flushSync(()=>i(A))}return n&&(n.current=await l3(_C({...P,y:L},w.offsetHeight+y+g.clientTop),d)),{y:L}}});function mhe(t,e){const{open:r,elements:n}=t,{enabled:i=!0,overflowRef:s,scrollRef:a,onChange:o}=e,l=$j(o),c=M.useRef(!1),d=M.useRef(null),p=M.useRef(null);M.useEffect(()=>{if(!i)return;function m(y){if(y.ctrlKey||!w||s.current==null)return;const k=y.deltaY,T=s.current.top>=-.5,O=s.current.bottom>=-.5,P=w.scrollHeight-w.clientHeight,V=k<0?-1:1,Y=k<0?"max":"min";w.scrollHeight<=w.clientHeight||(!T&&k>0||!O&&k<0?(y.preventDefault(),os.flushSync(()=>{l(G=>G+Math[Y](k,P*V))})):/firefox/i.test(afe())&&(w.scrollTop+=k))}const w=a?.current||n.floating;if(r&&w)return w.addEventListener("wheel",m),requestAnimationFrame(()=>{d.current=w.scrollTop,s.current!=null&&(p.current={...s.current})}),()=>{d.current=null,p.current=null,w.removeEventListener("wheel",m)}},[i,r,n.floating,s,a,l]);const g=M.useMemo(()=>({onKeyDown(){c.current=!0},onWheel(){c.current=!1},onPointerMove(){c.current=!1},onScroll(){const m=a?.current||n.floating;if(!(!s.current||!m||!c.current)){if(d.current!==null){const w=m.scrollTop-d.current;(s.current.bottom<-.5&&w<-1||s.current.top<-.5&&w>1)&&os.flushSync(()=>l(y=>y+w))}requestAnimationFrame(()=>{d.current=m.scrollTop})}}}),[n.floating,l,s,a]);return M.useMemo(()=>i?{floating:g}:{},[i,g])}let kp=M.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});kp.displayName="FloatingContext";let __=M.createContext(null);__.displayName="PlacementContext";function ghe(t){return M.useMemo(()=>t?typeof t=="string"?{to:t}:t:null,[t])}function xhe(){return M.useContext(kp).setReference}function vhe(){return M.useContext(kp).getReferenceProps}function yhe(){let{getFloatingProps:t,slot:e}=M.useContext(kp);return M.useCallback((...r)=>Object.assign({},t(...r),{"data-anchor":e.anchor}),[t,e])}function whe(t=null){t===!1&&(t=null),typeof t=="string"&&(t={to:t});let e=M.useContext(__),r=M.useMemo(()=>t,[JSON.stringify(t,(i,s)=>{var a;return(a=s?.outerHTML)!=null?a:s})]);Bs(()=>{e?.(r??null)},[e,r]);let n=M.useContext(kp);return M.useMemo(()=>[n.setFloating,t?n.styles:{}],[n.setFloating,t,n.styles])}let kC=4;function bhe({children:t,enabled:e=!0}){let[r,n]=M.useState(null),[i,s]=M.useState(0),a=M.useRef(null),[o,l]=M.useState(null);_he(o);let c=e&&r!==null&&o!==null,{to:d="bottom",gap:p=0,offset:g=0,padding:m=0,inner:w}=khe(r,o),[y,k="center"]=d.split(" ");Bs(()=>{c&&s(0)},[c]);let{refs:T,floatingStyles:O,context:P}=fhe({open:c,placement:y==="selection"?k==="center"?"bottom":`bottom-${k}`:k==="center"?`${y}`:`${y}-${k}`,strategy:"absolute",transform:!1,middleware:[Uj({mainAxis:y==="selection"?0:p,crossAxis:g}),Yfe({padding:m}),y!=="selection"&&Qfe({padding:m}),y==="selection"&&w?phe({...w,padding:m,overflowRef:a,offset:i,minItemsVisible:kC,referenceOverflowThreshold:m,onFallbackChange(A){var F,B;if(!A)return;let te=P.elements.floating;if(!te)return;let pe=parseFloat(getComputedStyle(te).scrollPaddingBottom)||0,Ee=Math.min(kC,te.childElementCount),ve=0,re=0;for(let W of(B=(F=P.elements.floating)==null?void 0:F.childNodes)!=null?B:[])if(gd(W)){let ne=W.offsetTop,Q=ne+W.clientHeight+pe,I=te.scrollTop,H=I+te.clientHeight;if(ne>=I&&Q<=H)Ee--;else{re=Math.max(0,Math.min(Q,H)-Math.max(ne,I)),ve=W.clientHeight;break}}Ee>=1&&s(W=>{let ne=ve*Ee-re+pe;return W>=ne?W:ne})}}):null,Jfe({padding:m,apply({availableWidth:A,availableHeight:F,elements:B}){Object.assign(B.floating.style,{overflow:"auto",maxWidth:`${A}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${F}px)`})}})].filter(Boolean),whileElementsMounted:Ufe}),[V=y,Y=k]=P.placement.split("-");y==="selection"&&(V="selection");let G=M.useMemo(()=>({anchor:[V,Y].filter(Boolean).join(" ")}),[V,Y]),L=mhe(P,{overflowRef:a,onChange:s}),{getReferenceProps:N,getFloatingProps:C}=hhe([L]),R=Vn(A=>{l(A),T.setFloating(A)});return M.createElement(__.Provider,{value:n},M.createElement(kp.Provider,{value:{setFloating:R,setReference:T.setReference,styles:O,getReferenceProps:N,getFloatingProps:C,slot:G}},t))}function _he(t){Bs(()=>{if(!t)return;let e=new MutationObserver(()=>{let r=window.getComputedStyle(t).maxHeight,n=parseFloat(r);if(isNaN(n))return;let i=parseInt(r);isNaN(i)||n!==i&&(t.style.maxHeight=`${Math.ceil(n)}px`)});return e.observe(t,{attributes:!0,attributeFilter:["style"]}),()=>{e.disconnect()}},[t])}function khe(t,e){var r,n,i;let s=d3((r=t?.gap)!=null?r:"var(--anchor-gap, 0)",e),a=d3((n=t?.offset)!=null?n:"var(--anchor-offset, 0)",e),o=d3((i=t?.padding)!=null?i:"var(--anchor-padding, 0)",e);return{...t,gap:s,offset:a,padding:o}}function d3(t,e,r=void 0){let n=H5(),i=Vn((l,c)=>{if(l==null)return[r,null];if(typeof l=="number")return[l,null];if(typeof l=="string"){if(!c)return[r,null];let d=EC(l,c);return[d,p=>{let g=Hj(l);{let m=g.map(w=>window.getComputedStyle(c).getPropertyValue(w));n.requestAnimationFrame(function w(){n.nextFrame(w);let y=!1;for(let[T,O]of g.entries()){let P=window.getComputedStyle(c).getPropertyValue(O);if(m[T]!==P){m[T]=P,y=!0;break}}if(!y)return;let k=EC(l,c);d!==k&&(p(k),d=k)})}return n.dispose}]}return[r,null]}),s=M.useMemo(()=>i(t,e)[0],[t,e]),[a=s,o]=M.useState();return Bs(()=>{let[l,c]=i(t,e);if(o(l),!!c)return c(o)},[t,e]),a}function Hj(t){let e=/var\((.*)\)/.exec(t);if(e){let r=e[1].indexOf(",");if(r===-1)return[e[1]];let n=e[1].slice(0,r).trim(),i=e[1].slice(r+1).trim();return i?[n,...Hj(i)]:[n]}return[]}function EC(t,e){let r=document.createElement("div");e.appendChild(r),r.style.setProperty("margin-top","0px","important"),r.style.setProperty("margin-top",t,"important");let n=parseFloat(window.getComputedStyle(r).marginTop)||0;return e.removeChild(r),n}let k_=M.createContext(null);k_.displayName="OpenClosedContext";var _g=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(_g||{});function Ehe(){return M.useContext(k_)}function She({value:t,children:e}){return di.createElement(k_.Provider,{value:t},e)}function Che(t){throw new Error("Unexpected object: "+t)}var Ms=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(Ms||{});function Sx(t,e){let r=e.resolveItems();if(r.length<=0)return null;let n=e.resolveActiveIndex(),i=n??-1;switch(t.focus){case 0:{for(let s=0;s<r.length;++s)if(!e.resolveDisabled(r[s],s,r))return s;return n}case 1:{i===-1&&(i=r.length);for(let s=i-1;s>=0;--s)if(!e.resolveDisabled(r[s],s,r))return s;return n}case 2:{for(let s=i+1;s<r.length;++s)if(!e.resolveDisabled(r[s],s,r))return s;return n}case 3:{for(let s=r.length-1;s>=0;--s)if(!e.resolveDisabled(r[s],s,r))return s;return n}case 4:{for(let s=0;s<r.length;++s)if(e.resolveId(r[s],s,r)===t.id)return s;return n}case 5:return null;default:Che(t)}}var qj=(t=>(t[t.Left=0]="Left",t[t.Right=2]="Right",t))(qj||{});function Wj(t){let e=Vn(t),r=M.useRef(!1);M.useEffect(()=>(r.current=!1,()=>{r.current=!0,cj(()=>{r.current&&e()})}),[e])}function The(){let t=typeof document>"u";return"useSyncExternalStore"in Qx?(e=>e.useSyncExternalStore)(Qx)(()=>()=>{},()=>!1,()=>!t):!1}function Nhe(){let t=The(),[e,r]=M.useState(uu.isHandoffComplete);return e&&uu.isHandoffComplete===!1&&r(!1),M.useEffect(()=>{e!==!0&&r(!0)},[e]),M.useEffect(()=>uu.handoff(),[]),t?!1:e}let Ahe=M.createContext(!1);function Ihe(){return M.useContext(Ahe)}function Phe(t){let e=Ihe(),r=M.useContext(Kj),[n,i]=M.useState(()=>{var s;if(!e&&r!==null)return(s=r.current)!=null?s:null;if(uu.isServer)return null;let a=t?.getElementById("headlessui-portal-root");if(a)return a;if(t===null)return null;let o=t.createElement("div");return o.setAttribute("id","headlessui-portal-root"),t.body.appendChild(o)});return M.useEffect(()=>{n!==null&&(t!=null&&t.body.contains(n)||t==null||t.body.appendChild(n))},[n,t]),M.useEffect(()=>{e||r!==null&&i(r.current)},[r,i,e]),n}let Gj=M.Fragment,Rhe=Zl(function(t,e){let{ownerDocument:r=null,...n}=t,i=M.useRef(null),s=xd(Wde(m=>{i.current=m}),e),a=Dw(i),o=r??a,l=Phe(o),[c]=M.useState(()=>{var m;return uu.isServer?null:(m=o?.createElement("div"))!=null?m:null}),d=M.useContext(Dhe),p=Nhe();Bs(()=>{!l||!c||l.contains(c)||(c.setAttribute("data-headlessui-portal",""),l.appendChild(c))},[l,c]),Bs(()=>{if(c&&d)return d.register(c)},[d,c]),Wj(()=>{var m;!l||!c||(h_(c)&&l.contains(c)&&l.removeChild(c),l.childNodes.length<=0&&((m=l.parentElement)==null||m.removeChild(l)))});let g=Jl();return p?!l||!c?null:os.createPortal(g({ourProps:{ref:s},theirProps:n,slot:{},defaultTag:Gj,name:"Portal"}),c):null});function Fhe(t,e){let r=xd(e),{enabled:n=!0,ownerDocument:i,...s}=t,a=Jl();return n?di.createElement(Rhe,{...s,ownerDocument:i,ref:r}):a({ourProps:{ref:r},theirProps:s,slot:{},defaultTag:Gj,name:"Portal"})}let Lhe=M.Fragment,Kj=M.createContext(null);function jhe(t,e){let{target:r,...n}=t,i={ref:xd(e)},s=Jl();return di.createElement(Kj.Provider,{value:r},s({ourProps:i,theirProps:n,defaultTag:Lhe,name:"Popover.Group"}))}let Dhe=M.createContext(null),Ohe=Zl(Fhe),Mhe=Zl(jhe),Bhe=Object.assign(Ohe,{Group:Mhe});function Vhe(t,e){let r=M.useRef({left:0,top:0});if(Bs(()=>{if(!e)return;let i=e.getBoundingClientRect();i&&(r.current=i)},[t,e]),e==null||!t||e===document.activeElement)return!1;let n=e.getBoundingClientRect();return n.top!==r.current.top||n.left!==r.current.left}let SC=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function CC(t){var e,r;let n=(e=t.innerText)!=null?e:"",i=t.cloneNode(!0);if(!gd(i))return n;let s=!1;for(let o of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))o.remove(),s=!0;let a=s?(r=i.innerText)!=null?r:"":n;return SC.test(a)&&(a=a.replace(SC,"")),a}function Uhe(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let r=t.getAttribute("aria-labelledby");if(r){let n=r.split(" ").map(i=>{let s=document.getElementById(i);if(s){let a=s.getAttribute("aria-label");return typeof a=="string"?a.trim():CC(s).trim()}return null}).filter(Boolean);if(n.length>0)return n.join(", ")}return CC(t).trim()}function zhe(t){let e=M.useRef(""),r=M.useRef("");return Vn(()=>{let n=t.current;if(!n)return"";let i=n.innerText;if(e.current===i)return r.current;let s=Uhe(n).trim().toLowerCase();return e.current=i,r.current=s,s})}var $he=Object.defineProperty,Hhe=(t,e,r)=>e in t?$he(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,TC=(t,e,r)=>(Hhe(t,typeof e!="symbol"?e+"":e,r),r),Ra=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Ra||{}),Yv=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Yv||{}),ui=(t=>(t[t.OpenMenu=0]="OpenMenu",t[t.CloseMenu=1]="CloseMenu",t[t.GoToItem=2]="GoToItem",t[t.Search=3]="Search",t[t.ClearSearch=4]="ClearSearch",t[t.RegisterItems=5]="RegisterItems",t[t.UnregisterItems=6]="UnregisterItems",t[t.SetButtonElement=7]="SetButtonElement",t[t.SetItemsElement=8]="SetItemsElement",t[t.SortItems=9]="SortItems",t))(ui||{});function NC(t,e=r=>r){let r=t.activeItemIndex!==null?t.items[t.activeItemIndex]:null,n=Tj(e(t.items.slice()),s=>s.dataRef.current.domRef.current),i=r?n.indexOf(r):null;return i===-1&&(i=null),{items:n,activeItemIndex:i}}let qhe={1(t){return t.menuState===1?t:{...t,activeItemIndex:null,pendingFocus:{focus:Ms.Nothing},menuState:1}},0(t,e){return t.menuState===0?t:{...t,__demoMode:!1,pendingFocus:e.focus,menuState:0}},2:(t,e)=>{var r,n,i,s,a;if(t.menuState===1)return t;let o={...t,searchQuery:"",activationTrigger:(r=e.trigger)!=null?r:1,__demoMode:!1};if(e.focus===Ms.Nothing)return{...o,activeItemIndex:null};if(e.focus===Ms.Specific)return{...o,activeItemIndex:t.items.findIndex(d=>d.id===e.id)};if(e.focus===Ms.Previous){let d=t.activeItemIndex;if(d!==null){let p=t.items[d].dataRef.current.domRef,g=Sx(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});if(g!==null){let m=t.items[g].dataRef.current.domRef;if(((n=p.current)==null?void 0:n.previousElementSibling)===m.current||((i=m.current)==null?void 0:i.previousElementSibling)===null)return{...o,activeItemIndex:g}}}}else if(e.focus===Ms.Next){let d=t.activeItemIndex;if(d!==null){let p=t.items[d].dataRef.current.domRef,g=Sx(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});if(g!==null){let m=t.items[g].dataRef.current.domRef;if(((s=p.current)==null?void 0:s.nextElementSibling)===m.current||((a=m.current)==null?void 0:a.nextElementSibling)===null)return{...o,activeItemIndex:g}}}}let l=NC(t),c=Sx(e,{resolveItems:()=>l.items,resolveActiveIndex:()=>l.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});return{...o,...l,activeItemIndex:c}},3:(t,e)=>{let r=t.searchQuery!==""?0:1,n=t.searchQuery+e.value.toLowerCase(),i=(t.activeItemIndex!==null?t.items.slice(t.activeItemIndex+r).concat(t.items.slice(0,t.activeItemIndex+r)):t.items).find(a=>{var o;return((o=a.dataRef.current.textValue)==null?void 0:o.startsWith(n))&&!a.dataRef.current.disabled}),s=i?t.items.indexOf(i):-1;return s===-1||s===t.activeItemIndex?{...t,searchQuery:n}:{...t,searchQuery:n,activeItemIndex:s,activationTrigger:1}},4(t){return t.searchQuery===""?t:{...t,searchQuery:"",searchActiveItemIndex:null}},5:(t,e)=>{let r=t.items.concat(e.items.map(i=>i)),n=t.activeItemIndex;return t.pendingFocus.focus!==Ms.Nothing&&(n=Sx(t.pendingFocus,{resolveItems:()=>r,resolveActiveIndex:()=>t.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled})),{...t,items:r,activeItemIndex:n,pendingFocus:{focus:Ms.Nothing},pendingShouldSort:!0}},6:(t,e)=>{let r=t.items,n=[],i=new Set(e.items);for(let[s,a]of r.entries())if(i.has(a.id)&&(n.push(s),i.delete(a.id),i.size===0))break;if(n.length>0){r=r.slice();for(let s of n.reverse())r.splice(s,1)}return{...t,items:r,activationTrigger:1}},7:(t,e)=>t.buttonElement===e.element?t:{...t,buttonElement:e.element},8:(t,e)=>t.itemsElement===e.element?t:{...t,itemsElement:e.element},9:t=>t.pendingShouldSort?{...t,...NC(t),pendingShouldSort:!1}:t};class E_ extends wj{constructor(e){super(e),TC(this,"actions",{registerItem:QS(()=>{let r=[],n=new Set;return[(i,s)=>{n.has(s)||(n.add(s),r.push({id:i,dataRef:s}))},()=>(n.clear(),this.send({type:5,items:r.splice(0)}))]}),unregisterItem:QS(()=>{let r=[];return[n=>r.push(n),()=>this.send({type:6,items:r.splice(0)})]})}),TC(this,"selectors",{activeDescendantId(r){var n;let i=r.activeItemIndex,s=r.items;return i===null||(n=s[i])==null?void 0:n.id},isActive(r,n){var i;let s=r.activeItemIndex,a=r.items;return s!==null?((i=a[s])==null?void 0:i.id)===n:!1},shouldScrollIntoView(r,n){return r.__demoMode||r.menuState!==0||r.activationTrigger===0?!1:this.isActive(r,n)}}),this.on(5,()=>{this.disposables.requestAnimationFrame(()=>{this.send({type:9})})});{let r=this.state.id,n=g_.get(null);this.disposables.add(n.on(_j.Push,i=>{!n.selectors.isTop(i,r)&&this.state.menuState===0&&this.send({type:1})})),this.on(0,()=>n.actions.push(r)),this.on(1,()=>n.actions.pop(r))}}static new({id:e,__demoMode:r=!1}){return new E_({id:e,__demoMode:r,menuState:r?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1,pendingShouldSort:!1,pendingFocus:{focus:Ms.Nothing}})}reduce(e,r){return wp(r.type,qhe,e,r)}}const Xj=M.createContext(null);function S_(t){let e=M.useContext(Xj);if(e===null){let r=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Yj),r}return e}function Yj({id:t,__demoMode:e=!1}){let r=M.useMemo(()=>E_.new({id:t,__demoMode:e}),[]);return Wj(()=>r.dispose()),r}let Whe=M.Fragment;function Ghe(t,e){let r=M.useId(),{__demoMode:n=!1,...i}=t,s=Yj({id:r,__demoMode:n}),[a,o,l]=su(s,k=>[k.menuState,k.itemsElement,k.buttonElement]),c=xd(e),d=g_.get(null),p=su(d,M.useCallback(k=>d.selectors.isTop(k,r),[d,r]));N0e(p,[l,o],(k,T)=>{var O;s.send({type:ui.CloseMenu}),v_(T,x_.Loose)||(k.preventDefault(),(O=s.state.buttonElement)==null||O.focus())});let g=Vn(()=>{s.send({type:ui.CloseMenu})}),m=M.useMemo(()=>({open:a===Ra.Open,close:g}),[a,g]),w={ref:c},y=Jl();return di.createElement(bhe,null,di.createElement(Xj.Provider,{value:s},di.createElement(She,{value:wp(a,{[Ra.Open]:_g.Open,[Ra.Closed]:_g.Closed})},y({ourProps:w,theirProps:i,slot:m,defaultTag:Whe,name:"Menu"}))))}let Khe="button";function Xhe(t,e){let r=S_("Menu.Button"),n=M.useId(),{id:i=`headlessui-menu-button-${n}`,disabled:s=!1,autoFocus:a=!1,...o}=t,l=M.useRef(null),c=vhe(),d=xd(e,l,xhe(),Vn(B=>r.send({type:ui.SetButtonElement,element:B}))),p=Vn(B=>{switch(B.key){case Ia.Space:case Ia.Enter:case Ia.ArrowDown:B.preventDefault(),B.stopPropagation(),r.send({type:ui.OpenMenu,focus:{focus:Ms.First}});break;case Ia.ArrowUp:B.preventDefault(),B.stopPropagation(),r.send({type:ui.OpenMenu,focus:{focus:Ms.Last}});break}}),g=Vn(B=>{switch(B.key){case Ia.Space:B.preventDefault();break}}),[m,w,y]=su(r,B=>[B.menuState,B.buttonElement,B.itemsElement]),k=m===Ra.Open;P0e(k,{trigger:w,action:M.useCallback(B=>{if(w!=null&&w.contains(B.target))return kx.Ignore;let te=B.target.closest('[role="menuitem"]:not([data-disabled])');return gd(te)?kx.Select(te):y!=null&&y.contains(B.target)?kx.Ignore:kx.Close},[w,y]),close:M.useCallback(()=>r.send({type:ui.CloseMenu}),[]),select:M.useCallback(B=>B.click(),[])});let T=Vn(B=>{var te;if(B.button===qj.Left){if(Hde(B.currentTarget))return B.preventDefault();s||(m===Ra.Open?(os.flushSync(()=>r.send({type:ui.CloseMenu})),(te=l.current)==null||te.focus({preventScroll:!0})):(B.preventDefault(),r.send({type:ui.OpenMenu,focus:{focus:Ms.Nothing},trigger:Yv.Pointer})))}}),O=M.useRef(null),P=Vn(B=>{O.current=B.pointerType,B.pointerType==="mouse"&&T(B)}),V=Vn(B=>{O.current!=="mouse"&&T(B)}),{isFocusVisible:Y,focusProps:G}=Sde({autoFocus:a}),{isHovered:L,hoverProps:N}=Ede({isDisabled:s}),{pressed:C,pressProps:R}=Pde({disabled:s}),A=M.useMemo(()=>({open:m===Ra.Open,active:C||m===Ra.Open,disabled:s,hover:L,focus:Y,autofocus:a}),[m,L,Y,C,s,a]),F=fj(c(),{ref:d,id:i,type:R0e(t,l.current),"aria-haspopup":"menu","aria-controls":y?.id,"aria-expanded":m===Ra.Open,disabled:s||void 0,autoFocus:a,onKeyDown:p,onKeyUp:g,onPointerDown:P,onClick:V},G,N,R);return Jl()({ourProps:F,theirProps:o,slot:A,defaultTag:Khe,name:"Menu.Button"})}let Yhe="div",Qhe=Rw.RenderStrategy|Rw.Static;function Jhe(t,e){let r=M.useId(),{id:n=`headlessui-menu-items-${r}`,anchor:i,portal:s=!1,modal:a=!0,transition:o=!1,...l}=t,c=ghe(i),d=S_("Menu.Items"),[p,g]=whe(c),m=yhe(),[w,y]=M.useState(null),k=xd(e,c?p:null,Vn(W=>d.send({type:ui.SetItemsElement,element:W})),y),[T,O]=su(d,W=>[W.menuState,W.buttonElement]),P=Dw(O),V=Dw(w);c&&(s=!0);let Y=Ehe(),[G,L]=W0e(o,w,Y!==null?(Y&_g.Open)===_g.Open:T===Ra.Open);m0e(G,O,()=>{d.send({type:ui.CloseMenu})});let N=su(d,W=>W.__demoMode),C=N?!1:a&&T===Ra.Open;V0e(C,V);let R=N?!1:a&&T===Ra.Open;p0e(R,{allowed:M.useCallback(()=>[O,w],[O,w])});let A=T!==Ra.Open,F=Vhe(A,O)?!1:G;M.useEffect(()=>{let W=w;W&&T===Ra.Open&&W!==V?.activeElement&&W.focus({preventScroll:!0})},[T,w,V]),Y0e(T===Ra.Open,{container:w,accept(W){return W.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:W.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(W){W.setAttribute("role","none")}});let B=H5(),te=Vn(W=>{var ne,Q,I;switch(B.dispose(),W.key){case Ia.Space:if(d.state.searchQuery!=="")return W.preventDefault(),W.stopPropagation(),d.send({type:ui.Search,value:W.key});case Ia.Enter:if(W.preventDefault(),W.stopPropagation(),d.state.activeItemIndex!==null){let{dataRef:H}=d.state.items[d.state.activeItemIndex];(Q=(ne=H.current)==null?void 0:ne.domRef.current)==null||Q.click()}d.send({type:ui.CloseMenu}),Cj(d.state.buttonElement);break;case Ia.ArrowDown:return W.preventDefault(),W.stopPropagation(),d.send({type:ui.GoToItem,focus:Ms.Next});case Ia.ArrowUp:return W.preventDefault(),W.stopPropagation(),d.send({type:ui.GoToItem,focus:Ms.Previous});case Ia.Home:case Ia.PageUp:return W.preventDefault(),W.stopPropagation(),d.send({type:ui.GoToItem,focus:Ms.First});case Ia.End:case Ia.PageDown:return W.preventDefault(),W.stopPropagation(),d.send({type:ui.GoToItem,focus:Ms.Last});case Ia.Escape:W.preventDefault(),W.stopPropagation(),os.flushSync(()=>d.send({type:ui.CloseMenu})),(I=d.state.buttonElement)==null||I.focus({preventScroll:!0});break;case Ia.Tab:W.preventDefault(),W.stopPropagation(),os.flushSync(()=>d.send({type:ui.CloseMenu})),E0e(d.state.buttonElement,W.shiftKey?jw.Previous:jw.Next);break;default:W.key.length===1&&(d.send({type:ui.Search,value:W.key}),B.setTimeout(()=>d.send({type:ui.ClearSearch}),350));break}}),pe=Vn(W=>{switch(W.key){case Ia.Space:W.preventDefault();break}}),Ee=M.useMemo(()=>({open:T===Ra.Open}),[T]),ve=fj(c?m():{},{"aria-activedescendant":su(d,d.selectors.activeDescendantId),"aria-labelledby":su(d,W=>{var ne;return(ne=W.buttonElement)==null?void 0:ne.id}),id:n,onKeyDown:te,onKeyUp:pe,role:"menu",tabIndex:T===Ra.Open?0:void 0,ref:k,style:{...l.style,...g,"--button-width":r0e(O,!0).width},...q0e(L)}),re=Jl();return di.createElement(Bhe,{enabled:s?t.static||G:!1,ownerDocument:P},re({ourProps:ve,theirProps:l,slot:Ee,defaultTag:Yhe,features:Qhe,visible:F,name:"Menu.Items"}))}let Zhe=M.Fragment;function e1e(t,e){let r=M.useId(),{id:n=`headlessui-menu-item-${r}`,disabled:i=!1,...s}=t,a=S_("Menu.Item"),o=su(a,A=>a.selectors.isActive(A,n)),l=M.useRef(null),c=xd(e,l),d=su(a,A=>a.selectors.shouldScrollIntoView(A,n));Bs(()=>{if(d)return Ql().requestAnimationFrame(()=>{var A,F;(F=(A=l.current)==null?void 0:A.scrollIntoView)==null||F.call(A,{block:"nearest"})})},[d,l]);let p=zhe(l),g=M.useRef({disabled:i,domRef:l,get textValue(){return p()}});Bs(()=>{g.current.disabled=i},[g,i]),Bs(()=>(a.actions.registerItem(n,g),()=>a.actions.unregisterItem(n)),[g,n]);let m=Vn(()=>{a.send({type:ui.CloseMenu})}),w=Vn(A=>{if(i)return A.preventDefault();a.send({type:ui.CloseMenu}),Cj(a.state.buttonElement)}),y=Vn(()=>{if(i)return a.send({type:ui.GoToItem,focus:Ms.Nothing});a.send({type:ui.GoToItem,focus:Ms.Specific,id:n})}),k=U0e(),T=Vn(A=>k.update(A)),O=Vn(A=>{k.wasMoved(A)&&(i||o||a.send({type:ui.GoToItem,focus:Ms.Specific,id:n,trigger:Yv.Pointer}))}),P=Vn(A=>{k.wasMoved(A)&&(i||o&&a.state.activationTrigger===Yv.Pointer&&a.send({type:ui.GoToItem,focus:Ms.Nothing}))}),[V,Y]=xj(),[G,L]=Gde(),N=M.useMemo(()=>({active:o,focus:o,disabled:i,close:m}),[o,i,m]),C={id:n,ref:c,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-labelledby":V,"aria-describedby":G,disabled:void 0,onClick:w,onFocus:y,onPointerEnter:T,onMouseEnter:T,onPointerMove:O,onMouseMove:O,onPointerLeave:P,onMouseLeave:P},R=Jl();return di.createElement(Y,null,di.createElement(L,null,R({ourProps:C,theirProps:s,slot:N,defaultTag:Zhe,name:"Menu.Item"})))}let t1e="div";function r1e(t,e){let[r,n]=xj(),i=t,s={ref:e,"aria-labelledby":r,role:"group"},a=Jl();return di.createElement(n,null,a({ourProps:s,theirProps:i,slot:{},defaultTag:t1e,name:"Menu.Section"}))}let n1e="header";function i1e(t,e){let r=M.useId(),{id:n=`headlessui-menu-heading-${r}`,...i}=t,s=m_();Bs(()=>s.register(n),[n,s.register]);let a={id:n,ref:e,role:"presentation",...s.props};return Jl()({ourProps:a,theirProps:i,slot:{},defaultTag:n1e,name:"Menu.Heading"})}let s1e="div";function a1e(t,e){let r=t,n={ref:e,role:"separator"};return Jl()({ourProps:n,theirProps:r,slot:{},defaultTag:s1e,name:"Menu.Separator"})}let o1e=Zl(Ghe),l1e=Zl(Xhe),c1e=Zl(Jhe),u1e=Zl(e1e),d1e=Zl(r1e),f1e=Zl(i1e),h1e=Zl(a1e),lm=Object.assign(o1e,{Button:l1e,Items:c1e,Item:u1e,Section:d1e,Heading:f1e,Separator:h1e});const p1e=di.lazy(()=>Xu(()=>import("./CreatePrescriptionModal-CND_GO9N.js"),[])),m1e=di.lazy(()=>Xu(()=>Promise.resolve().then(()=>KK),void 0)),g1e=di.lazy(()=>Xu(()=>import("./MessageWithLinks-DKGGB8hZ.js"),[])),x1e="/ChatBg.svg";function v1e(t){const e=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=(new Date(e.getFullYear(),e.getMonth(),e.getDate())-r)/(1e3*60*60*24);return i===0?"Today":i===1?"Yesterday":t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}const Qj=di.memo(({message:t,isMine:e})=>{if(!e)return null;const r=t.status||"sent",n=t.read||r==="read";return r==="sent"?f.jsx(_K,{className:"w-3 h-3 text-gray-400 ml-1 opacity-80",strokeWidth:2,title:"Sent"}):r==="delivered"?f.jsx(l9,{className:"w-3 h-3 text-gray-400 ml-1 opacity-80",strokeWidth:2,title:"Delivered"}):r==="read"||n?f.jsx(l9,{className:"w-3 h-3 text-green-500 ml-1",strokeWidth:2,title:"Read"}):null}),Jj=di.memo(({message:t,isMine:e,showReadReceipts:r})=>!e||!r?null:f.jsx(Qj,{message:t,isMine:e}));Qj.displayName="MessageStatus";Jj.displayName="ConditionalMessageStatus";const Yx=di.memo(()=>f.jsxs("div",{className:"flex flex-col items-start w-full mb-2 animate-pulse",children:[f.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-2xl h-10 w-48 mb-1"}),f.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-2xl h-6 w-32"})]}));Yx.displayName="MessageSkeleton";function AC(){const{user:t,profile:e}=In(),{getSetting:r}=qg(),n=Ci(),i=Xl(),s=Zv(),a=s.vendorId,o=s.threadId,[l,c]=M.useState(o||null),[d,p]=M.useState(""),[g,m]=M.useState(""),[w,y]=M.useState([]),[k,T]=M.useState(""),[O,P]=M.useState(""),[V,Y]=M.useState(!0),[G,L]=M.useState(50),N=M.useRef(null),C=M.useRef(null),[R,A]=M.useState(null),[F,B]=M.useState(!0),te=M.useRef(null),[pe,Ee]=M.useState(!1),[ve,re]=M.useState([]),[W,ne]=M.useState(!1),Q=new URLSearchParams(i.search),I=Q.get("productId"),H=Q.get("productName");Q.get("productImage"),Q.get("vendorName");const X=Q.get("productPrice"),J=Q.get("prefillMsg");M.useEffect(()=>{t&&(async()=>{if(o){c(o);return}if(e?.role==="customer"&&a){const ae=await mb({vendorId:a,customerId:t.uid,role:"customer"});c(ae)}else if(e?.role==="vendor"&&!o){console.warn("Vendor tried to open chat without threadId in URL."),n("/messages");return}})().catch(console.error)},[t?.uid,e?.role,a,o,n]),M.useEffect(()=>{!l||!e?.role||(async()=>{const ae=await is(or(gt,"threads",l));if(!ae.exists())return;const $e=ae.data(),[qe,it]=l.split("__");if(e.role==="customer"){const oe=$e.vendorName||"",je=$e.vendorAddress||"";if(oe)p(oe),m(je);else{const Pe=await is(or(gt,"pharmacies",qe)),Ke=Pe.exists()?Pe.data():{};p(Ke.name||"Pharmacy"),m(Ke.address||Ke.email||"")}const Ge=await is(or(gt,"pharmacies",qe)),Tt=Ge.exists()?Ge.data():{};P(Tt.phone||"")}else{const oe=$e.customerName||"",je=$e.customerAddress||$e.customerEmail||"";if(oe)p(oe),m(je);else{const Ge=await is(or(gt,"users",it)),Tt=Ge.exists()?Ge.data():{};p(Tt.displayName||"Customer"),m(Tt.email||"")}}})().catch(console.error)},[l,e?.role]),M.useEffect(()=>{if(!l||!t?.uid)return;Y(!0);const ae=eP(l,$e=>{y($e),Y(!1),$e.forEach(async qe=>{if(qe.senderId!==t.uid&&qe.status==="sent")try{await ZI(l,qe.id)}catch(it){console.error("Error marking message as delivered:",it)}})},console.error,100);return Ev(l,t.uid).catch(console.error),ae},[l,t?.uid]);const ue=M.useCallback((ae=!1)=>{ae?N.current?.scrollIntoView():N.current?.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},[]);M.useEffect(()=>{!V&&w.length>0&&requestAnimationFrame(()=>ue(!1))},[w.length,V,ue]);const we=M.useMemo(()=>{let ae=null;return $e=>{ae||(ae=setTimeout(()=>{$e.target.scrollTop<200&&G<w.length&&L(oe=>Math.min(oe+50,w.length)),ae=null},100))}},[G,w.length]),fe=M.useCallback(ae=>{we(ae)},[we]),me=M.useMemo(()=>w.slice(-G),[w,G]),be=r(Nr.MESSAGE_READ_RECEIPTS);r(Nr.DATA_SAVER_MODE),M.useEffect(()=>{const ae=()=>{B(!document.hidden),!document.hidden&&l&&t?.uid&&Ev(l,t.uid).catch(console.error)};return document.addEventListener("visibilitychange",ae),()=>document.removeEventListener("visibilitychange",ae)},[l,t?.uid]);const Le=M.useRef(null);M.useEffect(()=>{if(!w.length)return;const ae=w[w.length-1];if(ae.id!==Le.current&&ae.senderId!==t?.uid&&te.current){te.current.currentTime=0;const $e=te.current.play();$e&&$e.catch(()=>{})}Le.current=ae.id},[w,t?.uid]);const ee=M.useCallback(()=>{if(!l||!t)return null;const[ae,$e]=l.split("__");return t.uid===ae?$e:ae},[l,t]),Be=M.useCallback(async()=>{const ae=ee();if(!ae||!k.trim()||!l)return;const $e=k.trim();T("");try{await Y3(l,{senderId:t.uid,to:ae,text:$e})}catch(qe){T($e),console.error("Failed to send message:",qe)}},[l,k,t?.uid,ee]);M.useEffect(()=>{if(!pe)return;let ae=null;if(e?.role==="pharmacy"?ae=t?.uid:l&&([ae]=l.split("__")),!ae)return;const $e=Tr(dr(gt,"products"),zr("pharmacyId","==",ae)),qe=ri($e,it=>{re(it.docs.map(oe=>({id:oe.id,...oe.data()})))});return()=>qe&&qe()},[pe,e?.role,t?.uid,l]);const Re=async({drugs:ae,startDate:$e,duration:qe,notes:it})=>{if(!l||!t)return;const[oe,je]=l.split("__");await iP({pharmacyId:oe,customerId:je,chatThreadId:l,drugs:ae,startDate:$e,duration:qe,notes:it}),Ee(!1),await Y3(l,{senderId:t.uid,to:je,text:"A new prescription has been created."})};return M.useEffect(()=>{if(H&&I){const ae=X||"";T(`I want to know more about this drug ${H}${ae?", "+ae:""}.`)}else J&&T(J)},[H,X,I,J]),f.jsxs("div",{className:"h-screen w-full flex flex-col items-stretch overflow-visible bg-white dark:bg-gray-900",style:{position:"relative"},children:[f.jsx("div",{"aria-hidden":!0,style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",backgroundImage:`url(${x1e})`,backgroundRepeat:"repeat",backgroundPosition:"center center",backgroundSize:"cover",pointerEvents:"none",zIndex:0}}),f.jsxs("div",{style:{position:"relative",zIndex:10},className:"flex-1 flex flex-col min-h-0",children:[f.jsx("style",{children:".hide-scrollbar::-webkit-scrollbar{display:none} .hide-scrollbar{-ms-overflow-style:none; scrollbar-width:none;}"}),f.jsx("audio",{ref:te,src:tde,preload:"none"}),f.jsx("div",{className:"sticky top-0 z-20 bg-white/90 dark:bg-gray-900/90 pt-1 pb-1",style:{paddingTop:"env(safe-area-inset-top, 0)",width:"100vw",marginLeft:"calc(50% - 50vw)",paddingRight:"env(safe-area-inset-right, 0)"},children:f.jsxs("div",{className:"w-full px-4 sm:px-5 pt-6 pb-3 flex items-center gap-3 justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:()=>{window.history.length>1?n(-1):n("/messages")},className:"rounded-full border border-gray-200 dark:border-gray-600 dark:border-gray-600 px-3 sm:px-4 py-1 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800",children:f.jsx(cu,{className:"h-4 w-4"})}),e?.role==="customer"?f.jsx("button",{className:"min-w-0 font-light text-[15px] sm:text-[17px] truncate text-left hover:underline focus:outline-none text-gray-900 dark:text-white",onClick:()=>{if(l){const[ae]=l.split("__");n(`/vendor/${ae}`)}},title:d,children:d||"..."}):f.jsxs("div",{className:"min-w-0",children:[f.jsx("div",{className:"font-light text-[15px] sm:text-[17px] truncate text-gray-900 dark:text-white",children:d||"..."}),f.jsx("div",{className:"text-[9px] text-zinc-500 dark:text-zinc-400 truncate",children:g})]})]}),e?.role==="customer"&&f.jsxs("a",{href:O?`tel:${O}`:void 0,className:`flex items-center justify-center rounded-full border border-sky-500 text-sky-600 dark:text-sky-400 px-2 py-1 text-[11px] font-poppins font-light ${O?"hover:bg-sky-50 dark:hover:bg-sky-900/20":"opacity-40 cursor-not-allowed"}`,style:{minWidth:32},title:O?`Call ${d}`:"No phone number",tabIndex:O?0:-1,"aria-disabled":!O,children:[f.jsx(ede,{className:"h-3 w-3 mr-1"})," Call"]}),e?.role==="pharmacy"&&l&&f.jsxs(lm,{as:"div",className:"relative inline-block text-left ml-2",children:[f.jsx(lm.Button,{className:"px-3 py-1 rounded-full bg-sky-600 text-white text-xs font-medium",children:"Actions "}),f.jsx(lm.Items,{className:"absolute right-0 mt-2 w-48 origin-top-right bg-white dark:bg-gray-800 border border-sky-200 dark:border-gray-600 divide-y divide-gray-100 dark:divide-gray-700 rounded-[5px] shadow-lg focus:outline-none z-50",children:f.jsxs("div",{className:"py-1",children:[f.jsx(lm.Item,{children:({active:ae})=>f.jsx("button",{className:`w-full text-left px-4 py-2 text-[12px] font-light ${ae?"bg-sky-50":""}`,onClick:()=>Ee(!0),children:"Create Prescription"})}),f.jsx(lm.Item,{children:({active:ae})=>f.jsx("button",{className:`w-full text-left px-4 py-2 text-[12px] font-light ${ae?"bg-sky-50":""}`,onClick:()=>ne(!0),children:"View Prescription History"})})]})})]})]})}),f.jsxs("div",{className:"w-full flex-1 flex flex-col min-h-0",children:[f.jsxs("div",{ref:C,className:"flex-1 overflow-y-auto px-3 sm:px-4 pb-28 min-h-0 hide-scrollbar",style:{paddingTop:12},onScroll:fe,children:[G<w.length&&f.jsx("div",{className:"flex justify-center py-4",children:f.jsxs("button",{onClick:()=>L(ae=>Math.min(ae+50,w.length)),className:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 px-3 py-1 rounded-full transition-colors",children:["Load ",Math.min(50,w.length-G)," more messages"]})}),V?f.jsxs("div",{className:"space-y-4",children:[f.jsx(Yx,{}),f.jsxs("div",{className:"flex flex-col items-end w-full mb-2 animate-pulse",children:[f.jsx("div",{className:"bg-blue-200 dark:bg-blue-700 rounded-2xl h-10 w-40 mb-1"}),f.jsx("div",{className:"bg-blue-200 dark:bg-blue-700 rounded-2xl h-6 w-24"})]}),f.jsx(Yx,{}),f.jsx("div",{className:"flex flex-col items-end w-full mb-2 animate-pulse",children:f.jsx("div",{className:"bg-blue-200 dark:bg-blue-700 rounded-2xl h-8 w-56 mb-1"})}),f.jsx(Yx,{})]}):me.length===0?f.jsx("div",{className:"flex justify-center items-center py-12",children:f.jsxs("div",{className:"text-gray-400 dark:text-gray-500 text-sm text-center",children:[f.jsx("div",{className:"text-lg mb-2",children:""}),"Start your conversation"]})}):(()=>{let ae=null;return me.map($e=>{const qe=$e.senderId===t?.uid,it=$e.createdAt?.seconds?new Date($e.createdAt.seconds*1e3):null;let oe=!1;if(it){const je=it.toDateString();ae!==je&&(oe=!0,ae=je)}return f.jsxs(di.Fragment,{children:[oe&&it&&f.jsx("div",{className:"flex justify-center my-6 mb-4",children:f.jsx("span",{className:"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 text-[10px] font-medium px-2.5 py-1 rounded-lg",children:v1e(it)})}),f.jsxs("div",{className:`flex flex-col items-${qe?"end":"start"} w-full mb-2`,children:[f.jsx("div",{className:`${qe?"bg-blue-500 text-white ml-8":"bg-white dark:bg-gray-800 text-gray-900 dark:text-white mr-8 border border-gray-200 dark:border-gray-600 dark:border-gray-700"} px-3 py-2 max-w-[80%] sm:max-w-[70%] whitespace-pre-wrap break-words shadow-sm`,style:{borderRadius:qe?"12px 12px 3px 12px":"12px 12px 12px 3px",fontSize:14,lineHeight:1.3},children:f.jsx(di.Suspense,{fallback:f.jsx("span",{children:$e.text}),children:f.jsx(g1e,{text:$e.text,isMine:qe})})}),f.jsxs("div",{className:`flex items-center text-[10px] text-gray-400 dark:text-gray-500 mt-1 ${qe?"mr-2 justify-end":"ml-2 justify-start"}`,children:[f.jsx("span",{children:it?it.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""}),f.jsx(Jj,{message:$e,isMine:qe,showReadReceipts:be})]})]})]},$e.id)})})(),f.jsx("div",{ref:N})]}),f.jsx("div",{className:"w-full sticky bottom-0 z-20 bg-white/85 dark:bg-gray-900/85 backdrop-blur",style:{paddingBottom:"env(safe-area-inset-bottom, 0)",width:"100vw",marginLeft:"calc(50% - 50vw)",paddingLeft:"env(safe-area-inset-left, 0)",paddingRight:"env(safe-area-inset-right, 0)"},children:f.jsxs("div",{className:"w-full",children:[f.jsxs("form",{className:"mx-4 sm:mx-5 flex items-center gap-3 py-3",onSubmit:ae=>{ae.preventDefault(),Be()},children:[f.jsx("label",{className:"flex items-center cursor-not-allowed opacity-40",title:"Attachments coming soon",children:f.jsx(RK,{className:"h-5 w-5 text-gray-400"})}),f.jsx("input",{value:k,onChange:ae=>T(ae.target.value),placeholder:"Message",className:"flex-1 min-w-0 outline-none px-3 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 dark:border-gray-600 rounded-full placeholder:text-gray-400 dark:placeholder:text-gray-500 placeholder:text-[14px] focus:border-blue-400 dark:focus:border-blue-500 focus:ring-1 focus:ring-blue-200 dark:focus:ring-blue-800 transition-all duration-200",style:{fontSize:14}}),f.jsx("button",{type:"submit",className:`flex items-center justify-center w-8 h-8 rounded-full transition-all duration-200 ${k.trim()?"bg-blue-500 hover:bg-blue-600 active:scale-95":"bg-gray-300 cursor-not-allowed"}`,disabled:!k.trim(),children:f.jsx("img",{src:Zue,alt:"Send",className:"h-4 w-4"})})]}),f.jsx("div",{style:{height:8}})]})})]}),f.jsx(di.Suspense,{fallback:null,children:f.jsx(p1e,{open:pe,onClose:()=>Ee(!1),products:ve,onSubmit:Re})}),f.jsx(EP,{open:W,onClose:()=>ne(!1),children:f.jsx(di.Suspense,{fallback:null,children:f.jsx(m1e,{chatThreadId:l,products:ve,userId:t?.uid})})})]})]})}class y1e{constructor(){this.audio=null,this.permissionRequested=!1,this.notificationQueue=[],this.isProcessing=!1,this.initializeAudio(),this.requestPermissionOnUserInteraction()}initializeAudio(){try{this.audio=new Audio("/src/assets/message-tone.mp3"),this.audio.volume=.6,this.audio.preload="auto"}catch(e){console.warn("Notification audio not available:",e)}}requestPermissionOnUserInteraction(){if(!("Notification"in window)){console.warn("This browser does not support notifications");return}const e=()=>{!this.permissionRequested&&Notification.permission==="default"&&(this.permissionRequested=!0,Notification.requestPermission().then(r=>{console.log("Notification permission:",r)}))};document.addEventListener("click",e,{once:!0}),document.addEventListener("keydown",e,{once:!0}),document.addEventListener("touchstart",e,{once:!0})}playSound(){if(this.audio)try{this.audio.currentTime=0,this.audio.play().catch(e=>{console.warn("Could not play notification sound:",e)})}catch(e){console.warn("Audio playback error:",e)}}showNotification(e,r={}){if(!("Notification"in window)||Notification.permission!=="granted")return null;const n={icon:"/favicon.ico",badge:"/favicon.ico",requireInteraction:!1,silent:!1,...r};try{const i=new Notification(e,n);return n.requireInteraction||setTimeout(()=>{i&&i.close()},8e3),i.onclick=()=>{window.focus(),i.close(),r.onClick&&r.onClick()},i}catch(i){return console.error("Error showing notification:",i),null}}queueNotification(e){this.notificationQueue.push(e),this.processQueue()}async processQueue(){if(!(this.isProcessing||this.notificationQueue.length===0)){for(this.isProcessing=!0;this.notificationQueue.length>0;){const e=this.notificationQueue.shift();await this.processNotification(e),this.notificationQueue.length>0&&await new Promise(r=>setTimeout(r,1e3))}this.isProcessing=!1}}async processNotification(e){const{type:r,data:n,options:i={}}=e,s=document.hidden||i.force;switch(s&&this.playSound(),r){case"order_received":return this.handleOrderReceived(n,s);case"order_status_updated":return this.handleOrderStatusUpdated(n,s);case"message_received":return this.handleMessageReceived(n,s);case"prescription_ready":return this.handlePrescriptionReady(n,s);default:console.warn("Unknown notification type:",r)}}handleOrderReceived(e,r){const n=" New Order Received!",i=`Order #${e.id?.slice(-8)} - ${(e.total||0).toLocaleString()} from ${e.customerName||"Customer"}`;if(r)return this.showNotification(n,{body:i,tag:"order-received",icon:"/favicon.ico",onClick:()=>{window.location.hash="#/orders"}})}handleOrderStatusUpdated(e,r){const i={confirmed:" Order Confirmed",preparing:" Order Being Prepared",ready:" Order Ready for Pickup",completed:" Order Completed",cancelled:" Order Cancelled"}[e.status]||" Order Updated",s=`Order #${e.id?.slice(-8)} - ${e.pharmacyName||"Pharmacy"}`;if(r)return this.showNotification(i,{body:s,tag:"order-status",icon:"/favicon.ico",onClick:()=>{window.location.hash="#/orders"}})}handleMessageReceived(e,r){const n=` ${e.senderName||"New Message"}`,i=e.text?.slice(0,100)+(e.text?.length>100?"...":"")||"Sent an attachment";if(r)return this.showNotification(n,{body:i,tag:"message",icon:"/favicon.ico",onClick:()=>{window.location.hash="#/messages"}})}handlePrescriptionReady(e,r){const n=" Prescription Ready",i=`Your prescription is ready for pickup at ${e.pharmacyName}`;if(r)return this.showNotification(n,{body:i,tag:"prescription",icon:"/favicon.ico",requireInteraction:!0,onClick:()=>{window.location.hash="#/orders"}})}notifyOrderReceived(e){this.queueNotification({type:"order_received",data:e})}notifyOrderStatusUpdated(e){this.queueNotification({type:"order_status_updated",data:e})}notifyMessageReceived(e){this.queueNotification({type:"message_received",data:e})}notifyPrescriptionReady(e){this.queueNotification({type:"prescription_ready",data:e})}get isSupported(){return"Notification"in window}get isPermitted(){return this.isSupported&&Notification.permission==="granted"}get permissionStatus(){return this.isSupported?Notification.permission:"not-supported"}}const Jc=new y1e;function w1e(){const[t,e]=M.useState(Jc.permissionStatus),[r,n]=M.useState(!1);M.useEffect(()=>{e(Jc.permissionStatus);const d=setInterval(()=>{e(Jc.permissionStatus)},1e3);return()=>clearInterval(d)},[]);const i=async()=>{if(!Jc.isSupported){alert("Notifications are not supported in this browser");return}try{const c=await Notification.requestPermission();e(c)}catch(c){console.error("Error requesting notification permission:",c)}},s=()=>{if(!Jc.isPermitted){alert("Please enable notifications first");return}Jc.showNotification(" Test Notification",{body:"This is a test notification from PharmaSeaHealth",tag:"test",requireInteraction:!1}),n(!0),setTimeout(()=>n(!1),3e3)},a=()=>{switch(t){case"granted":return f.jsx(Kh,{className:"h-5 w-5 text-green-500"});case"denied":return f.jsx(bK,{className:"h-5 w-5 text-red-500"});case"default":return f.jsx(gm,{className:"h-5 w-5 text-yellow-500"});default:return f.jsx(gb,{className:"h-5 w-5 text-gray-500"})}},o=()=>{switch(t){case"granted":return"Notifications enabled";case"denied":return"Notifications blocked";case"default":return"Permission not requested";case"not-supported":return"Not supported in this browser";default:return"Unknown status"}},l=()=>{switch(t){case"granted":return"You will receive notifications for new orders, messages, and order updates.";case"denied":return"Notifications are blocked. You can enable them in your browser settings.";case"default":return"Click the button below to enable notifications for orders and messages.";case"not-supported":return"Your browser does not support push notifications.";default:return"Unable to determine notification status."}};return f.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(gm,{className:"h-6 w-6 text-blue-600"}),f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notification Settings"})]}),f.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a(),f.jsx("span",{className:"font-medium text-gray-900",children:o()})]}),f.jsx("p",{className:"text-sm text-gray-600",children:l()})]}),f.jsxs("div",{className:"space-y-3",children:[t==="default"&&f.jsxs("button",{onClick:i,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[f.jsx(gm,{className:"h-4 w-4"}),"Enable Notifications"]}),t==="granted"&&f.jsx("button",{onClick:s,disabled:r,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 ${r?"bg-green-100 text-green-800 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:r?f.jsxs(f.Fragment,{children:[f.jsx(Kh,{className:"h-4 w-4"}),"Test Sent!"]}):f.jsxs(f.Fragment,{children:[f.jsx(gm,{className:"h-4 w-4"}),"Send Test Notification"]})}),t==="denied"&&f.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(IK,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),f.jsxs("div",{className:"text-sm",children:[f.jsx("p",{className:"font-medium text-red-800 mb-1",children:"How to enable notifications:"}),f.jsxs("ol",{className:"text-red-700 space-y-1 list-decimal list-inside",children:[f.jsx("li",{children:"Click the lock icon in your browser's address bar"}),f.jsx("li",{children:'Select "Allow" for notifications'}),f.jsx("li",{children:"Refresh the page"})]})]})]})})]}),f.jsxs("div",{className:"mt-6 pt-6 border-t",children:[f.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"You'll be notified about:"}),f.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Kh,{className:"h-4 w-4 text-green-500"}),f.jsx("span",{children:"New orders received (Pharmacies)"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Kh,{className:"h-4 w-4 text-green-500"}),f.jsx("span",{children:"Order status updates (Customers)"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Kh,{className:"h-4 w-4 text-green-500"}),f.jsx("span",{children:"New messages in chats"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Kh,{className:"h-4 w-4 text-green-500"}),f.jsx("span",{children:"Prescription ready for pickup"})]})]})]})]})}const b1e=({title:t,onBackClick:e})=>os.createPortal(f.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:f.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("button",{onClick:e,className:"rounded-full p-2 hover:bg-sky-50 transition-all duration-200","aria-label":"Go back",children:f.jsx(cu,{className:"h-5 w-5 text-sky-600 mt-8"})}),f.jsx("h1",{className:"mt-8 text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-light font-poppins leading-none text-gray-900 dark:text-white",children:"Settings"})]})})}),document.body);function _1e(){const t=Ci(),{user:e}=In(),{getSetting:r,updateSetting:n,resetSettings:i}=qg(),[s,a]=M.useState({}),o=typeof window<"u"&&window.matchMedia&&window.matchMedia("(max-width: 1024px)").matches,l=c=>{n(Nr.SWIPE_NAVIGATION,c),console.log(c?"Swipe navigation enabled - swipe left/right to navigate between pages on mobile":"Swipe navigation disabled")};return f.jsxs(f.Fragment,{children:[f.jsx(b1e,{title:"Settings",onBackClick:()=>t(-1)}),f.jsx("div",{className:"pt-24 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen animate-fadeInUp",children:f.jsxs("div",{className:"mt-4 space-y-6",children:[f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"rounded-full bg-gray-100 p-2",children:f.jsx(Cv,{className:"h-5 w-5 text-gray-600"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"General"}),f.jsx("p",{className:"text-sm text-gray-600",children:"App preferences and navigation settings"})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between py-2",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Swipe Navigation"}),f.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Enable swipe gestures to navigate between pages on mobile devices",!o&&f.jsx("span",{className:" text-orange-500",children:" (Desktop - feature available on mobile only)"})]})]}),f.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Nr.SWIPE_NAVIGATION),onChange:c=>l(c.target.checked)}),f.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-600"})]})]}),r(Nr.SWIPE_NAVIGATION)&&o&&f.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mt-2",children:f.jsxs("p",{className:"text-xs text-gray-700",children:[f.jsx("span",{className:"font-medium",children:"How to use:"})," Swipe left or right anywhere on the screen to navigate between Home, Cart, Messages, and Orders pages."]})}),f.jsxs("div",{className:"flex items-center justify-between py-2",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Data Saver Mode"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Reduce bandwidth usage and optimize for slower connections"})]}),f.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Nr.DATA_SAVER_MODE),onChange:c=>n(Nr.DATA_SAVER_MODE,c.target.checked)}),f.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-600"})]})]}),f.jsxs("div",{className:"flex items-center justify-between py-2",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Read Receipts"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Show when you've read messages in chats"})]}),f.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Nr.MESSAGE_READ_RECEIPTS),onChange:c=>n(Nr.MESSAGE_READ_RECEIPTS,c.target.checked)}),f.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-600"})]})]})]})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.1s"},children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"rounded-full bg-orange-100 p-2",children:f.jsx(AK,{className:"h-5 w-5 text-orange-600"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"Language & Region"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Set your language and regional preferences"})]})]}),f.jsx("div",{className:"space-y-4",children:f.jsxs("div",{className:"flex items-center justify-between py-2",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"App Language"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose your preferred language"})]}),f.jsxs("select",{value:r(Nr.LANGUAGE),onChange:c=>n(Nr.LANGUAGE,c.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-orange-300",children:[f.jsx("option",{value:"en",children:"English"}),f.jsx("option",{value:"yo",children:"Yoruba"}),f.jsx("option",{value:"ha",children:"Hausa"}),f.jsx("option",{value:"ig",children:"Igbo"}),f.jsx("option",{value:"fr",children:"Franais"})]})]})})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.2s"},children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"rounded-full bg-purple-100 p-2",children:f.jsx(PK,{className:"h-5 w-5 text-purple-600"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"Appearance"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Customize how the app looks and feels"})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between py-2",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Theme"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose your preferred color scheme"})]}),f.jsxs("select",{value:r(Nr.THEME_MODE),onChange:c=>n(Nr.THEME_MODE,c.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-purple-300",children:[f.jsx("option",{value:"light",children:"Light"}),f.jsx("option",{value:"dark",children:"Dark"}),f.jsx("option",{value:"system",children:"System"})]})]}),f.jsxs("div",{className:"flex items-center justify-between py-2",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Font Size"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Adjust text size for better readability"})]}),f.jsxs("select",{value:r(Nr.FONT_SIZE),onChange:c=>n(Nr.FONT_SIZE,c.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-purple-300",children:[f.jsx("option",{value:"small",children:"Small"}),f.jsx("option",{value:"medium",children:"Medium"}),f.jsx("option",{value:"large",children:"Large"})]})]})]})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.3s"},children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"rounded-full bg-blue-100 p-2",children:f.jsx(Hg,{className:"h-5 w-5 text-blue-600"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"Accessibility"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Make the app easier to use for everyone"})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between py-2",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"High Contrast"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Increase contrast for better visibility"})]}),f.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Nr.HIGH_CONTRAST),onChange:c=>n(Nr.HIGH_CONTRAST,c.target.checked)}),f.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),f.jsxs("div",{className:"flex items-center justify-between py-2",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Reduce Motion"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimize animations and transitions"})]}),f.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Nr.REDUCE_MOTION),onChange:c=>n(Nr.REDUCE_MOTION,c.target.checked)}),f.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.4s"},children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"rounded-full bg-sky-100 p-2",children:f.jsx(gm,{className:"h-5 w-5 text-sky-600"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"Notifications"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Manage your notification preferences"})]})]}),f.jsx("div",{className:"pl-0",children:f.jsx(w1e,{})})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.5s"},children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"rounded-full bg-green-100 p-2",children:f.jsx(yP,{className:"h-5 w-5 text-green-600"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"Privacy & Security"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Control your data and security settings"})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between py-2",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Biometric Login"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use fingerprint or face recognition to unlock"})]}),f.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Nr.BIOMETRIC_LOGIN),onChange:c=>n(Nr.BIOMETRIC_LOGIN,c.target.checked)}),f.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]})]}),f.jsxs("div",{className:"flex items-center justify-between py-2",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Auto Lock"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lock app after period of inactivity"})]}),f.jsxs("select",{value:r(Nr.AUTO_LOCK),onChange:c=>n(Nr.AUTO_LOCK,c.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-300",children:[f.jsx("option",{value:"1min",children:"1 minute"}),f.jsx("option",{value:"5min",children:"5 minutes"}),f.jsx("option",{value:"15min",children:"15 minutes"}),f.jsx("option",{value:"never",children:"Never"})]})]}),f.jsxs("div",{className:"flex items-center justify-between py-2",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Location Sharing"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose location accuracy for deliveries"})]}),f.jsxs("select",{value:r(Nr.LOCATION_PRECISION),onChange:c=>n(Nr.LOCATION_PRECISION,c.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-300",children:[f.jsx("option",{value:"precise",children:"Precise"}),f.jsx("option",{value:"approximate",children:"Approximate"}),f.jsx("option",{value:"off",children:"Off"})]})]})]})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-red-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.6s"},children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"rounded-full bg-red-100 p-2",children:f.jsx(Cv,{className:"h-5 w-5 text-red-600"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-red-600 font-poppins",children:"Reset Settings"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Restore all settings to their default values"})]})]}),f.jsx("div",{className:"space-y-4",children:f.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[f.jsxs("p",{className:"text-sm text-red-700 mb-3",children:[f.jsx("span",{className:"font-medium",children:"Warning:"})," This will reset all your preferences including theme, language, navigation settings, and accessibility options. This action cannot be undone."]}),f.jsx("button",{onClick:()=>{confirm("Are you sure you want to reset all settings to default? This cannot be undone.")&&i()},className:"w-full px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors",children:"Reset All Settings"})]})})]})]})})]})}function Bu({children:t}){const{user:e,loading:r}=In();return r?f.jsx("div",{className:"p-6",children:"Loading"}):e?t:f.jsx("div",{className:"p-6",children:"Please sign in to continue."})}function Zj(){const{user:t,profile:e}=In(),r=Xl(),n=M.useRef({});return M.useEffect(()=>{if(!(!t?.uid||!e?.role))return T5({uid:t.uid,role:e.role},i=>{i.forEach(s=>{if(!s.id)return;const a=Tr(dr(gt,"threads",s.id,"messages"),Zs("createdAt","desc"),dh(1));ri(a,o=>{if(o.empty)return;const l={id:o.docs[0].id,...o.docs[0].data()},c=l.senderId===t.uid;let d=!1;if(r.pathname.startsWith("/chat/")){const p=r.pathname.split("/chat/")[1]?.split("/")[0];e.role==="customer"?s.id===`${p}__${t.uid}`&&(d=!0):s.id.startsWith(`${t.uid}__`)&&(d=!0)}if(r.pathname==="/messages"){const g=new URLSearchParams(r.search).get("chat");g&&(e.role==="customer"?s.id===`${g}__${t.uid}`&&(d=!0):s.id===`${t.uid}__${g}`&&(d=!0))}if(!c&&n.current[s.id]!==l.id&&!d){const p=e.role==="customer"?s.pharmacyName||"Pharmacy":s.customerName||"Customer",g={...l,senderName:p,threadId:s.id};Jc.notifyMessageReceived(g)}n.current[s.id]=l.id})})},i=>console.error("GlobalMessageNotifier error:",i))},[t?.uid,e?.role,r.pathname,r.search]),null}function k1e(){const{user:t,profile:e}=In(),r=M.useRef({}),n=M.useRef(!1);return M.useEffect(()=>{if(!t?.uid||!e||e.role!=="customer")return;const i=e.uid||t.uid,s=Tr(dr(gt,"orders"),zr("customerId","==",i),Zs("updatedAt","desc")),a=ri(s,o=>{if(!n.current){o.docs.forEach(l=>{const c={id:l.id,...l.data()};r.current[c.id]=c.status}),n.current=!0;return}o.docChanges().forEach(l=>{if(l.type==="modified"){const c={id:l.doc.id,...l.doc.data()},d=r.current[c.id];d&&d!==c.status&&(Jc.notifyOrderStatusUpdated(c),c.status==="ready"&&c.type==="prescription"&&Jc.notifyPrescriptionReady({...c,pharmacyName:c.pharmacyName||"Pharmacy"})),r.current[c.id]=c.status}if(l.type==="added"){const c={id:l.doc.id,...l.doc.data()};r.current[c.id]=c.status}})},o=>{console.error("Error listening for customer order notifications:",o)});return()=>a()},[t,e]),null}function E1e(){const{profile:t}=In();return f.jsxs(f.Fragment,{children:[f.jsx(Zj,{}),t?.role==="customer"&&f.jsx(k1e,{})]})}function S1e({order:t,isOpen:e,onClose:r,onViewOrder:n}){const[i,s]=M.useState(!1),{profile:a}=In();M.useEffect(()=>{if(e){s(!0);const c=setTimeout(()=>{o()},1e4);return()=>clearTimeout(c)}else s(!1)},[e]);const o=()=>{s(!1),setTimeout(()=>r(),300)},l=()=>{n(t),o()};return!e||!t?null:f.jsx(f.Fragment,{children:f.jsx("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-300 ${i?"translate-y-0 opacity-100 scale-100":"-translate-y-4 opacity-0 scale-95"}`,children:f.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-blue-200 dark:border-gray-600 mx-4 overflow-hidden card-interactive hover:shadow-3xl transition-all duration-300",style:{width:"393px"},children:[f.jsxs("div",{className:"bg-gradient-to-r from-sky-300 to-sky-600 px-6 py-4 relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-white/10 animate-pulse"}),f.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center animate-bounce",children:f.jsx("span",{className:"text-white text-lg",children:""})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-white font-semibold text-lg animate-text-reveal",children:"New Order Received!"}),f.jsx("p",{className:"text-green-100 text-sm animate-fade-in",style:{animationDelay:"0.1s"},children:"You have a new customer order"})]})]})]}),f.jsxs("div",{className:"px-4 py-3 animate-fade-in-up",style:{animationDelay:"0.2s"},children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between items-start gap-3",children:[f.jsxs("div",{className:"flex-1 min-w-0 animate-slide-up",style:{animationDelay:"0.3s"},children:[f.jsx("p",{className:"text-gray-600 text-xs",children:"Order ID"}),f.jsxs("p",{className:"font-medium text-gray-900 text-sm truncate",children:["#",t.id?.slice(-8)||"N/A"]})]}),f.jsxs("div",{className:"flex-1 min-w-0 animate-slide-up",style:{animationDelay:"0.4s"},children:[f.jsx("p",{className:"text-gray-600 text-xs",children:"Customer"}),f.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:t.customerName||"Unknown Customer"})]}),f.jsxs("div",{className:"text-right flex-shrink-0 animate-slide-up",style:{animationDelay:"0.5s"},children:[f.jsx("p",{className:"text-gray-600 text-xs",children:"Total"}),f.jsxs("p",{className:"font-bold text-green-600 text-sm animate-pulse-slow",children:["",(t.total||0).toLocaleString()]})]})]}),t.items&&t.items.length>0||t.orderItems&&t.orderItems.length>0||t.products&&t.products.length>0?f.jsxs("div",{className:"border-t pt-3 animate-fade-in",style:{animationDelay:"0.6s"},children:[f.jsxs("p",{className:"text-gray-600 text-xs mb-2",children:["Items (",t.items?.length||t.orderItems?.length||t.products?.length||0,")"]}),f.jsxs("div",{className:"max-h-24 overflow-y-auto space-y-1",children:[(t.items||t.orderItems||t.products||[]).slice(0,3).map((c,d)=>f.jsxs("div",{className:"flex justify-between items-center text-xs gap-2 py-0.5 animate-fadeInUp",style:{animationDelay:`${.7+d*.1}s`},children:[f.jsx("span",{className:"text-gray-700 flex-1 leading-tight font-medium truncate",children:c.name||c.productName||c.title||c.itemName||`Item ${d+1}`}),f.jsxs("span",{className:"text-gray-600 text-right whitespace-nowrap font-semibold bg-gray-100 px-1.5 py-0.5 rounded text-xs flex-shrink-0 hover:bg-gray-200 transition-colors duration-200",children:["x",c.quantity||c.qty||c.amount||1]})]},d)),(t.items?.length||t.orderItems?.length||t.products?.length||0)>3&&f.jsxs("p",{className:"text-xs text-gray-500 italic mt-1 text-center bg-gray-50 py-0.5 rounded animate-fade-in",children:["+",(t.items?.length||t.orderItems?.length||t.products?.length||0)-3," more items"]})]})]}):f.jsxs("div",{className:"border-t pt-3 animate-fade-in",style:{animationDelay:"0.6s"},children:[f.jsx("p",{className:"text-gray-600 text-xs mb-2",children:"Items"}),f.jsx("p",{className:"text-gray-500 text-xs italic",children:"No items found"})]}),f.jsxs("div",{className:"border-t pt-2 flex justify-between items-center animate-fade-in",style:{animationDelay:"0.8s"},children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-gray-600 text-xs",children:"Status"}),f.jsx("span",{className:"inline-block px-2 py-0.5 bg-orange-100 text-orange-700 text-xs rounded-full font-medium mt-0.5 animate-bounce-gentle",children:t.status||"Pending"})]}),f.jsx("div",{className:"text-right text-xs text-gray-500",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),f.jsxs("div",{className:"flex gap-2 mt-4 pt-3 border-t animate-fade-in-up",style:{animationDelay:"0.9s"},children:[f.jsx("button",{onClick:l,className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium text-xs transition-all duration-200 shadow-lg hover:shadow-xl btn-interactive hover:scale-105 active:scale-95",children:"View Details"}),f.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium text-xs transition-all duration-200 btn-interactive hover:scale-105 active:scale-95",children:"Dismiss"})]})]}),f.jsx("button",{onClick:o,className:"absolute top-3 right-3 w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center text-white transition-all duration-200 hover:scale-110 active:scale-95",children:f.jsx("span",{className:"text-lg",children:""})}),f.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-gray-200 w-full",children:f.jsx("div",{className:"h-full bg-green-500 transition-all duration-[10000ms] ease-linear animate-progress-bar",style:{width:i?"0%":"100%"}})})]})})})}function C1e(){const[t,e]=M.useState(null),[r,n]=M.useState(!1),{profile:i,user:s}=In(),a=M.useRef(null),o=M.useRef(!0);return M.useEffect(()=>{if(!i||i.role!=="pharmacy")return;const d=i.uid||s?.uid;if(!d)return;o.current&&(a.current=new Date,o.current=!1);const p=Tr(dr(gt,"orders"),zr("pharmacyId","==",d),Zs("createdAt","desc"),dh(1)),g=ri(p,m=>{m.empty||m.docChanges().forEach(w=>{if(w.type==="added"){const y={id:w.doc.id,...w.doc.data()},k=y.createdAt?.toDate()||new Date;a.current&&k>a.current&&(Jc.notifyOrderReceived(y),e(y),n(!0))}})},m=>{console.error("Error listening for order notifications:",m)});return()=>g()},[i,s]),{newOrder:t,showNotification:r,clearNotification:()=>{n(!1),e(null)},viewOrder:d=>d}}const Cx=[{key:"users",label:"Users"},{key:"products",label:"Products"},{key:"prescriptions",label:"Prescriptions"},{key:"orders",label:"Orders"},{key:"carts",label:"Carts"},{key:"analytics",label:"Analytics"},{key:"moderation",label:"Moderation"},{key:"export",label:"Export"},{key:"infoCards",label:"Info Cards"}],cm=3;function T1e(){const{user:t,logout:e}=In(),[r,n]=M.useState([]),[i,s]=M.useState([]),[a,o]=M.useState([]),[l,c]=M.useState([]),[d,p]=M.useState([]),[g,m]=M.useState([]),[w,y]=M.useState(!0),[k,T]=M.useState(!1),[O,P]=M.useState(!1),[V,Y]=M.useState(null),[G,L]=M.useState(!1),[N,C]=M.useState(null),[R,A]=M.useState(null),[F,B]=M.useState(!1),[te,pe]=M.useState({displayName:"",email:"",address:"",phone:"",role:"",suspended:!1,password:""}),[Ee,ve]=M.useState({name:"",image:"",description:"",stock:"",price:"",sku:"",category:""}),[re,W]=M.useState({header:"",preview:"",link:"",linkText:"",image:"",fullImage:"",bgColor:"#f0f8ff"}),[ne,Q]=M.useState("users"),[I,H]=M.useState("profile"),[X,J]=M.useState([]),[ue,we]=M.useState([]),[fe,me]=M.useState([]),[be,Le]=M.useState([]),[ee,Be]=M.useState(0),[Re,ae]=M.useState(""),[$e,qe]=M.useState(""),it=M.useRef(null);return Ci(),M.useEffect(()=>{if(!t)return;y(!0);const oe=ri(dr(gt,"users"),ot=>{n(ot.docs.map(We=>({id:We.id,...We.data()}))),y(!1)}),je=ri(dr(gt,"products"),ot=>{s(ot.docs.map(We=>({id:We.id,...We.data()})))}),Ge=ri(dr(gt,"prescriptions"),ot=>{o(ot.docs.map(We=>({id:We.id,...We.data()})))}),Tt=ri(dr(gt,"orders"),ot=>{c(ot.docs.map(We=>({id:We.id,...We.data()})))}),Pe=ri(dr(gt,"carts"),ot=>{p(ot.docs.map(We=>({id:We.id,...We.data()})))}),Ke=ri(dr(gt,"infoCards"),ot=>{m(ot.docs.map(We=>({id:We.id,...We.data()})))});return()=>{oe(),je(),Ge(),Tt(),Pe(),Ke()}},[t]),M.useEffect(()=>{let oe=null,je=null,Ge=null;return V&&V.id?(pe({displayName:V.displayName||"",email:V.email||"",address:V.address||"",phone:V.phone||"",role:V.role||"",suspended:V.role==="suspended",password:""}),oe=ri(Tr(dr(gt,"prescriptions"),zr("userId","==",V.id)),Tt=>{J(Tt.docs.map(Pe=>({id:Pe.id,...Pe.data()})))}),je=ri(Tr(dr(gt,"orders"),zr("userId","==",V.id)),Tt=>{we(Tt.docs.map(Pe=>({id:Pe.id,...Pe.data()})))}),Ge=ri(Tr(dr(gt,"carts"),zr("userId","==",V.id)),Tt=>{me(Tt.docs.map(Pe=>({id:Pe.id,...Pe.data()})))})):(pe({displayName:"",email:"",address:"",phone:"",role:"",suspended:!1,password:""}),J([]),we([]),me([])),()=>{oe&&oe(),je&&je(),Ge&&Ge()}},[V&&V.id]),M.useEffect(()=>{N&&ve({name:N.name||"",image:N.image||"",description:N.description||"",stock:N.stock||"",price:N.price||"",sku:N.sku||"",category:N.category||""})},[N]),M.useEffect(()=>{R&&W({header:R.header||"",preview:R.preview||"",link:R.link||"",linkText:R.linkText||"",image:R.image||"",fullImage:R.fullImage||"",bgColor:R.bgColor||"#f0f8ff"})},[R]),M.useEffect(()=>{if(typeof R<"u"&&R&&W){W({header:R.header||"",preview:R.preview||"",link:R.link||"",linkText:R.linkText||"",image:R.image||"",fullImage:R.fullImage||"",bgColor:R.bgColor||"#f0f8ff",headerColor:R.headerColor||"#0ea5e9",previewColor:R.previewColor||"#475569",linkColor:R.linkColor||R.linkTextColor||"#0ea5e9",linkTextColor:R.linkTextColor||R.linkColor||"#0ea5e9",headerFontSize:R.headerFontSize||16,previewFontSize:R.previewFontSize||13,linkFontSize:R.linkFontSize||13,linkTextFontSize:R.linkTextFontSize||13});try{B(!1)}catch{}}},[R]),M.useEffect(()=>{if(!it.current)return;const oe=Cx.findIndex(Ge=>Ge.key===ne),je=Math.floor(oe/cm);Be(je),it.current.scrollTo({left:je*it.current.offsetWidth,behavior:"smooth"})},[ne]),t?w?f.jsx(ng,{lines:8,className:"my-8"}):f.jsxs("div",{className:"pt-10 pb-28 w-full max-w-4xl mx-auto px-4 min-h-screen flex flex-col",children:[f.jsxs("div",{className:"relative mb-8 flex items-center justify-center",children:[f.jsx("button",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-white border border-sky-100 shadow text-sky-500 hover:bg-sky-100 transition absolute left-0 top-1/2 -translate-y-1/2",style:{display:ee>0?"flex":"none"},onClick:()=>Be(oe=>Math.max(0,oe-1)),"aria-label":"Previous tabs",children:f.jsx("span",{className:"text-lg",children:"<"})}),f.jsx("div",{className:"flex gap-2 px-8 w-full justify-center",children:Cx.slice(ee*cm,(ee+1)*cm).map(oe=>f.jsx("button",{className:`min-w-[110px] px-3 py-2 font-semibold tracking-wide text-[13px] rounded-t-lg transition-colors duration-150
                ${ne===oe.key?"border-b-2 border-sky-500 text-sky-500 bg-sky-50":"text-zinc-400 bg-white hover:bg-sky-50"}`,onClick:()=>{Q(oe.key),Le([])},children:oe.label},oe.key))}),f.jsx("button",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-white border border-sky-100 shadow text-sky-500 hover:bg-sky-100 transition absolute right-0 top-1/2 -translate-y-1/2",style:{display:ee<Math.ceil(Cx.length/cm)-1?"flex":"none"},onClick:()=>Be(oe=>Math.min(Math.ceil(Cx.length/cm)-1,oe+1)),"aria-label":"Next tabs",children:f.jsx("span",{className:"text-lg",children:">"})})]}),ne==="users"&&f.jsxs("div",{className:"mb-8",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("div",{className:"text-[15px] font-semibold tracking-wide text-sky-500",children:"Users"}),f.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium shadow hover:bg-sky-600",onClick:()=>{pe({displayName:"",email:"",address:"",phone:"",role:"customer",suspended:!1}),L(!0)},children:"Add User"})]}),f.jsx("div",{className:"space-y-2",children:(k?r:r.slice(0,3)).map(oe=>f.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:be.includes(oe.id),onChange:je=>Le(Ge=>je.target.checked?[...Ge,oe.id]:Ge.filter(Tt=>Tt!==oe.id))}),f.jsxs("div",{className:"flex-1",onClick:je=>{je.target.tagName!=="BUTTON"&&Y(oe)},children:[f.jsx("div",{className:"font-semibold text-[13px] text-sky-500",children:oe.displayName||oe.email}),f.jsx("div",{className:"text-[12px] text-zinc-500",children:oe.email}),f.jsxs("div",{className:"text-[11px] text-zinc-400",children:["Role: ",oe.role||"customer"]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{className:"px-2 py-1 rounded bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:async je=>{je.stopPropagation(),await ys(or(gt,"users",oe.id),{role:"suspended"})},children:"Suspend"}),f.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-600 text-[12px] font-medium",onClick:async je=>{je.stopPropagation(),await Eo(or(gt,"users",oe.id))},children:"Delete"})]})]},oe.id))}),be.length>0&&f.jsxs("div",{className:"flex gap-2 mt-2",children:[f.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-[12px] font-medium",onClick:async()=>{for(const oe of be)await Eo(or(gt,"users",oe));Le([])},children:"Delete Selected"}),f.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium",onClick:async()=>{for(const oe of be)await ys(or(gt,"users",oe),{role:"suspended"});Le([])},children:"Suspend Selected"})]}),r.length>3&&!k&&f.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>T(!0),children:"See more"}),r.length>3&&k&&f.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>T(!1),children:"See less"})]}),ne==="products"&&f.jsxs("div",{className:"mb-8",children:[f.jsx("div",{className:"text-xl font-semibold mb-2",children:"Products"}),f.jsx("div",{className:"space-y-2",children:(O?i:i.slice(0,3)).map(oe=>f.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",onClick:je=>{je.target.tagName!=="BUTTON"&&C(oe)},children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-bold",children:oe.name}),f.jsx("div",{className:"text-sm text-zinc-500",children:oe.category}),f.jsxs("div",{className:"text-xs text-zinc-400",children:["Vendor: ",oe.vendorId]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{className:"px-2 py-1 rounded bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:async je=>{je.stopPropagation(),await ys(or(gt,"products",oe.id),{approved:!0}),s(i.map(Ge=>Ge.id===oe.id?{...Ge,approved:!0}:Ge))},children:"Approve"}),f.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-600 text-[12px] font-medium",onClick:async je=>{je.stopPropagation(),await Eo(or(gt,"products",oe.id)),s(i.filter(Ge=>Ge.id!==oe.id))},children:"Delete"})]})]},oe.id))}),i.length>3&&!O&&f.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>P(!0),children:"See more"}),i.length>3&&O&&f.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>P(!1),children:"See less"})]}),ne==="prescriptions"&&f.jsxs("div",{className:"mb-8",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("div",{className:"text-xl font-semibold",children:"Prescriptions"}),f.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium shadow hover:bg-sky-600",onClick:()=>{},children:"Add Prescription"})]}),f.jsx("div",{className:"space-y-2",children:a.map(oe=>f.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:be.includes(oe.id),onChange:je=>Le(Ge=>je.target.checked?[...Ge,oe.id]:Ge.filter(Tt=>Tt!==oe.id))}),f.jsxs("div",{className:"flex-1",onClick:()=>{},children:[f.jsx("div",{className:"font-bold",children:oe.title||oe.id}),f.jsx("div",{className:"text-xs text-zinc-500",children:oe.createdAt?new Date(oe.createdAt.seconds*1e3).toLocaleString():""}),f.jsxs("div",{className:"text-xs text-zinc-400",children:["Drugs: ",Array.isArray(oe.drugs)?oe.drugs.join(", "):oe.drugs]})]}),f.jsx("div",{className:"flex gap-2",children:f.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-700 text-xs",onClick:async je=>{je.stopPropagation(),await Eo(or(gt,"prescriptions",oe.id))},children:"Delete"})})]},oe.id))}),be.length>0&&f.jsx("div",{className:"flex gap-2 mt-2",children:f.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const oe of be)await Eo(or(gt,"prescriptions",oe));Le([])},children:"Delete Selected"})})]}),ne==="orders"&&f.jsxs("div",{className:"mb-8",children:[f.jsx("div",{className:"flex items-center justify-between mb-2",children:f.jsx("div",{className:"text-xl font-semibold",children:"Orders"})}),f.jsx("div",{className:"space-y-2",children:l.map(oe=>f.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:be.includes(oe.id),onChange:je=>Le(Ge=>je.target.checked?[...Ge,oe.id]:Ge.filter(Tt=>Tt!==oe.id))}),f.jsxs("div",{className:"flex-1",onClick:()=>{},children:[f.jsxs("div",{className:"font-bold",children:["Order #",oe.id]}),f.jsx("div",{className:"text-xs text-zinc-500",children:oe.createdAt?new Date(oe.createdAt.seconds*1e3).toLocaleString():""}),f.jsxs("div",{className:"text-xs text-zinc-400",children:["Products: ",Array.isArray(oe.products)?oe.products.map(je=>je.name).join(", "):""]})]}),f.jsx("div",{className:"flex gap-2",children:f.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-700 text-xs",onClick:async je=>{je.stopPropagation(),await Eo(or(gt,"orders",oe.id))},children:"Delete"})})]},oe.id))}),be.length>0&&f.jsx("div",{className:"flex gap-2 mt-2",children:f.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const oe of be)await Eo(or(gt,"orders",oe));Le([])},children:"Delete Selected"})})]}),ne==="carts"&&f.jsxs("div",{className:"mb-8",children:[f.jsx("div",{className:"flex items-center justify-between mb-2",children:f.jsx("div",{className:"text-xl font-semibold",children:"Carts"})}),f.jsx("div",{className:"space-y-2",children:d.map(oe=>f.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:be.includes(oe.id),onChange:je=>Le(Ge=>je.target.checked?[...Ge,oe.id]:Ge.filter(Tt=>Tt!==oe.id))}),f.jsxs("div",{className:"flex-1",onClick:()=>{},children:[f.jsxs("div",{className:"font-bold",children:["Cart #",oe.id]}),f.jsx("div",{className:"text-xs text-zinc-500",children:oe.updatedAt?new Date(oe.updatedAt.seconds*1e3).toLocaleString():""}),f.jsxs("div",{className:"text-xs text-zinc-400",children:["Products: ",Array.isArray(oe.products)?oe.products.map(je=>je.name).join(", "):""]})]}),f.jsx("div",{className:"flex gap-2",children:f.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-700 text-xs",onClick:async je=>{je.stopPropagation(),await Eo(or(gt,"carts",oe.id))},children:"Delete"})})]},oe.id))}),be.length>0&&f.jsx("div",{className:"flex gap-2 mt-2",children:f.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const oe of be)await Eo(or(gt,"carts",oe));Le([])},children:"Delete Selected"})})]}),ne==="analytics"&&f.jsxs("div",{className:"mb-8",children:[f.jsx("div",{className:"text-xl font-semibold mb-4",children:"Analytics"}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[f.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[f.jsx("div",{className:"text-2xl font-bold",children:r.length}),f.jsx("div",{className:"text-xs text-zinc-600",children:"Users"})]}),f.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[f.jsx("div",{className:"text-2xl font-bold",children:i.length}),f.jsx("div",{className:"text-xs text-zinc-600",children:"Products"})]}),f.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[f.jsx("div",{className:"text-2xl font-bold",children:a.length}),f.jsx("div",{className:"text-xs text-zinc-600",children:"Prescriptions"})]}),f.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[f.jsx("div",{className:"text-2xl font-bold",children:l.length}),f.jsx("div",{className:"text-xs text-zinc-600",children:"Orders"})]}),f.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[f.jsx("div",{className:"text-2xl font-bold",children:d.length}),f.jsx("div",{className:"text-xs text-zinc-600",children:"Carts"})]})]}),f.jsx("div",{className:"mt-4 text-zinc-500 text-xs",children:"Charts and advanced analytics coming soon."})]}),ne==="moderation"&&f.jsxs("div",{className:"mb-8",children:[f.jsx("div",{className:"text-xl font-semibold mb-4",children:"Moderation"}),f.jsx("div",{className:"text-zinc-500 mb-4",children:"No flagged items yet. Moderation features coming soon."}),be.length>0&&f.jsx("div",{className:"flex gap-2 mt-2",children:f.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const oe of be);Le([])},children:"Delete Selected"})})]}),ne==="export"&&f.jsxs("div",{className:"mb-8",children:[f.jsx("div",{className:"text-xl font-semibold mb-4",children:"Export Data"}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(r,"users"),children:"Export Users TSV"}),f.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(i,"products"),children:"Export Products TSV"}),f.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(a,"prescriptions"),children:"Export Prescriptions TSV"}),f.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(l,"orders"),children:"Export Orders TSV"}),f.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(d,"carts"),children:"Export Carts TSV"})]})]}),f.jsx("div",{className:"mt-6",children:f.jsx("button",{onClick:async()=>{await e(),window.location.href="/auth/landing"},className:"rounded-full border border-red-300 text-red-600 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:"Log Out"})}),(V||G)&&f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-2xl max-w-md w-full border border-sky-100",children:[f.jsx("div",{className:"text-[16px] font-semibold tracking-wide text-sky-500 mb-4",children:G?"Add User":"Edit User"}),Re&&f.jsx("div",{className:"text-red-500 text-xs mb-2",children:Re}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:te.displayName,onChange:oe=>pe(je=>({...je,displayName:oe.target.value})),placeholder:"Name"}),f.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:te.email,onChange:oe=>pe(je=>({...je,email:oe.target.value})),placeholder:"Email"}),G&&f.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",type:"password",value:te.password,onChange:oe=>pe(je=>({...je,password:oe.target.value})),placeholder:"Password"}),f.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:te.address,onChange:oe=>pe(je=>({...je,address:oe.target.value})),placeholder:"Address"}),f.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:te.phone,onChange:oe=>pe(je=>({...je,phone:oe.target.value})),placeholder:"Phone Number"}),f.jsxs("select",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:te.role,onChange:oe=>pe(je=>({...je,role:oe.target.value})),children:[f.jsx("option",{value:"customer",children:"Customer"}),f.jsx("option",{value:"pharmacy",children:"Pharmacy"}),f.jsx("option",{value:"superuser",children:"Superuser"}),f.jsx("option",{value:"suspended",children:"Suspended"})]}),f.jsxs("div",{className:"flex gap-2 mt-4",children:[f.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium text-[13px] shadow hover:bg-sky-600",onClick:async()=>{if(ae(""),G){const oe=xI();try{const je=await iI(oe,te.email,te.password),Ge={...te};delete Ge.password;const Tt=await Xu(()=>Promise.resolve().then(()=>FA),void 0).then(Pe=>Pe.addDoc(dr(gt,"users"),{...Ge,uid:je.user.uid}));n([...r,{id:Tt.id,...Ge,uid:je.user.uid}]),L(!1)}catch(je){ae(je.message||"Failed to create user. Check email, password, and permissions.")}}else try{await ys(or(gt,"users",V.id),{displayName:te.displayName,email:te.email,address:te.address,phone:te.phone,role:te.role}),n(r.map(oe=>oe.id===V.id?{...oe,...te}:oe)),Y(null)}catch(oe){ae(oe.message||"Failed to update user.")}},children:G?"Add":"Save"}),!G&&(te.role==="suspended"?f.jsx("button",{className:"px-4 py-2 rounded bg-green-500 text-white font-medium text-[13px] shadow hover:bg-green-600",onClick:async()=>{await ys(or(gt,"users",V.id),{role:"customer"}),n(r.map(oe=>oe.id===V.id?{...oe,role:"customer"}:oe)),Y(null)},children:"Lift Suspension"}):f.jsx("button",{className:"px-4 py-2 rounded bg-red-500 text-white font-medium text-[13px] shadow hover:bg-red-600",onClick:async()=>{await ys(or(gt,"users",V.id),{role:"suspended"}),n(r.map(oe=>oe.id===V.id?{...oe,role:"suspended"}:oe)),Y(null)},children:"Suspend"})),f.jsx("button",{className:"px-4 py-2 rounded bg-zinc-100 text-zinc-700 font-medium text-[13px] shadow hover:bg-zinc-200",onClick:()=>{Y(null),L(!1),ae("")},children:"Cancel"})]})]})]})}),N&&f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl max-w-md w-full border border-sky-100",children:[f.jsx("div",{className:"text-[16px] font-semibold tracking-wide text-sky-500 mb-4",children:"Edit Product"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:Ee.name,onChange:oe=>ve(je=>({...je,name:oe.target.value})),placeholder:"Product Name"}),f.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:Ee.sku,onChange:oe=>ve(je=>({...je,sku:oe.target.value})),placeholder:"SKU"}),f.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:Ee.price,onChange:oe=>ve(je=>({...je,price:oe.target.value})),placeholder:"Price"}),f.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:Ee.stock,onChange:oe=>ve(je=>({...je,stock:oe.target.value})),placeholder:"Stock"}),f.jsx("textarea",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:Ee.description,onChange:oe=>ve(je=>({...je,description:oe.target.value})),placeholder:"Description",rows:"2"}),f.jsxs("div",{className:"flex gap-2 mt-4",children:[f.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium text-[13px] shadow hover:bg-sky-600",onClick:async()=>{await ys(or(gt,"products",N.id),{name:Ee.name,sku:Ee.sku,price:Ee.price,stock:Ee.stock,description:Ee.description}),s(i.map(oe=>oe.id===N.id?{...oe,...Ee}:oe)),C(null)},children:"Save"}),f.jsx("button",{className:"px-4 py-2 rounded bg-zinc-100 text-zinc-700 font-medium text-[13px] shadow hover:bg-zinc-200",onClick:()=>C(null),children:"Cancel"})]})]})]})}),ne==="infoCards"&&f.jsxs("div",{className:"mb-8",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("div",{className:"text-xl font-semibold text-sky-500",children:"Info Cards"}),f.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium shadow hover:bg-sky-600",onClick:()=>{try{A(null)}catch{}try{B(!0)}catch{}try{W({header:"",preview:"",link:"",linkText:"",image:"",fullImage:"",bgColor:"#f0f8ff",headerColor:"#0ea5e9",previewColor:"#475569",linkColor:"#0ea5e9",linkTextColor:"#0ea5e9",headerFontSize:16,previewFontSize:13,linkFontSize:13,linkTextFontSize:13})}catch{}},children:"Add Info Card"})]}),f.jsx("div",{className:"space-y-4",children:g.map(oe=>f.jsxs("div",{className:"border border-sky-100 rounded-lg p-4 flex items-center justify-between group hover:shadow-md transition cursor-pointer",style:{background:oe.bgColor||"#ffffff"},children:[f.jsxs("div",{className:"flex-1",onClick:()=>{A(oe),W({header:oe.header||"",preview:oe.preview||"",link:oe.link||"",linkText:oe.linkText||"",image:oe.image||"",fullImage:oe.fullImage||"",bgColor:oe.bgColor||"#f0f8ff",headerColor:oe.headerColor||"#0ea5e9",previewColor:oe.previewColor||"#475569",linkColor:oe.linkColor||oe.linkTextColor||"#0ea5e9",linkTextColor:oe.linkTextColor||oe.linkColor||"#0ea5e9",headerFontSize:oe.headerFontSize||16,previewFontSize:oe.previewFontSize||13,linkFontSize:oe.linkFontSize||13,linkTextFontSize:oe.linkTextFontSize||13})},children:[f.jsx("div",{style:{color:oe.headerColor||"#0ea5e9",fontSize:(oe.headerFontSize||16)+"px",fontWeight:600},children:oe.header}),f.jsx("div",{style:{color:oe.previewColor||"#475569",fontSize:(oe.previewFontSize||13)+"px"},className:"mt-1",children:oe.preview}),oe.link&&oe.linkText&&f.jsx("a",{href:oe.link,style:{color:oe.linkColor||"#0ea5e9",fontSize:(oe.linkFontSize||13)+"px"},className:"underline",target:"_blank",rel:"noopener noreferrer",children:oe.linkText}),oe.image&&f.jsx("img",{src:oe.image,alt:"Info",className:"mt-2 rounded-lg",style:{maxWidth:"120px",maxHeight:"60px"}}),oe.fullImage&&f.jsx("img",{src:oe.fullImage,alt:"Full",className:"mt-2 rounded-lg",style:{maxWidth:"180px",maxHeight:"100px"}}),f.jsxs("div",{className:"text-[11px] text-zinc-400 mt-2",children:["BG: ",oe.bgColor]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{className:"px-2 py-1 rounded bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:je=>{je.stopPropagation(),A(oe),B(!1),W({header:oe.header||"",preview:oe.preview||"",link:oe.link||"",linkText:oe.linkText||"",image:oe.image||"",fullImage:oe.fullImage||"",bgColor:oe.bgColor||"#f0f8ff",headerColor:oe.headerColor||"#0ea5e9",previewColor:oe.previewColor||"#475569",linkColor:oe.linkColor||oe.linkTextColor||"#0ea5e9",linkTextColor:oe.linkTextColor||oe.linkColor||"#0ea5e9",headerFontSize:oe.headerFontSize||16,previewFontSize:oe.previewFontSize||13,linkFontSize:oe.linkFontSize||13,linkTextFontSize:oe.linkTextFontSize||13})},children:"Edit"}),f.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-600 text-[12px] font-medium",onClick:async je=>{je.stopPropagation(),await Eo(or(gt,"infoCards",oe.id))},children:"Delete"})]})]},oe.id))}),(R||F)&&f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-2xl max-w-md w-full border border-sky-100",children:[f.jsx("div",{className:"text-[16px] font-semibold tracking-wide text-sky-500 mb-4",children:F?"Add Info Card":"Edit Info Card"}),$e&&f.jsx("div",{className:"text-red-500 text-xs mb-2",children:$e}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:re.header,onChange:oe=>W(je=>({...je,header:oe.target.value})),placeholder:"Header"}),f.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:re.preview,onChange:oe=>W(je=>({...je,preview:oe.target.value})),placeholder:"Preview text"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{className:"flex-1 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:re.link,onChange:oe=>W(je=>({...je,link:oe.target.value})),placeholder:"Link (optional)"}),f.jsx("input",{className:"w-36 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:re.linkText,onChange:oe=>W(je=>({...je,linkText:oe.target.value})),placeholder:"Link Text"})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{className:"flex-1 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:re.image,onChange:oe=>W(je=>({...je,image:oe.target.value})),placeholder:"Image URL (right side, optional)"}),f.jsx("input",{className:"w-36 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:re.fullImage,onChange:oe=>W(je=>({...je,fullImage:oe.target.value})),placeholder:"Full Image URL"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("label",{className:"text-xs text-zinc-500",children:["Header Color",f.jsx("input",{type:"color",value:re.headerColor||"#0ea5e9",onChange:oe=>W(je=>({...je,headerColor:oe.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),f.jsxs("label",{className:"text-xs text-zinc-500",children:["Header Size",f.jsx("input",{type:"range",min:"12",max:"28",value:re.headerFontSize||16,onChange:oe=>W(je=>({...je,headerFontSize:parseInt(oe.target.value)})),className:"w-full mt-1"})]}),f.jsxs("label",{className:"text-xs text-zinc-500",children:["Preview Color",f.jsx("input",{type:"color",value:re.previewColor||"#475569",onChange:oe=>W(je=>({...je,previewColor:oe.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),f.jsxs("label",{className:"text-xs text-zinc-500",children:["Preview Size",f.jsx("input",{type:"range",min:"10",max:"22",value:re.previewFontSize||13,onChange:oe=>W(je=>({...je,previewFontSize:parseInt(oe.target.value)})),className:"w-full mt-1"})]}),f.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Color",f.jsx("input",{type:"color",value:re.linkColor||"#0ea5e9",onChange:oe=>W(je=>({...je,linkColor:oe.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),f.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Size",f.jsx("input",{type:"range",min:"10",max:"22",value:re.linkFontSize||13,onChange:oe=>W(je=>({...je,linkFontSize:parseInt(oe.target.value)})),className:"w-full mt-1"})]}),f.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Text Color",f.jsx("input",{type:"color",value:re.linkTextColor||"#0ea5e9",onChange:oe=>W(je=>({...je,linkTextColor:oe.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),f.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Text Size",f.jsx("input",{type:"range",min:"10",max:"22",value:re.linkTextFontSize||13,onChange:oe=>W(je=>({...je,linkTextFontSize:parseInt(oe.target.value)})),className:"w-full mt-1"})]})]}),f.jsxs("div",{className:"mt-2",children:[f.jsx("label",{className:"text-xs text-zinc-500",children:"Background Color"}),f.jsx("input",{type:"color",value:re.bgColor||"#f0f8ff",onChange:oe=>W(je=>({...je,bgColor:oe.target.value})),className:"w-full h-10 mt-1 p-0 border-0"})]}),f.jsxs("div",{className:"mt-3",children:[f.jsx("div",{className:"text-xs text-zinc-500 mb-2",children:"Live preview"}),f.jsxs("div",{style:{background:re.bgColor||"#f8fafc",padding:12,borderRadius:10,display:"flex",gap:12,alignItems:"center"},children:[f.jsxs("div",{style:{flex:1},children:[f.jsx("div",{style:{color:re.headerColor||"#0ea5e9",fontSize:(re.headerFontSize||16)+"px",fontWeight:700},children:re.header||"Header"}),f.jsx("div",{style:{color:re.previewColor||"#475569",fontSize:(re.previewFontSize||13)+"px",marginTop:4},children:re.preview||"Preview text goes here"}),re.linkText&&f.jsx("div",{style:{marginTop:6},children:f.jsx("a",{style:{color:re.linkTextColor||re.linkColor||"#0ea5e9",fontSize:(re.linkTextFontSize||13)+"px"},href:re.link||"#",children:re.linkText})})]}),re.image&&f.jsx("img",{src:re.image,alt:"Preview",style:{width:80,height:60,objectFit:"cover",borderRadius:6}})]})]}),f.jsxs("div",{className:"flex gap-2 mt-4",children:[f.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium text-[13px] shadow hover:bg-sky-600",onClick:async()=>{if(qe(""),F)try{await dp(dr(gt,"infoCards"),re),B(!1)}catch(oe){qe(oe.message||"Failed to add info card.")}else if(R)try{await ys(or(gt,"infoCards",R.id),re),A(null)}catch(oe){qe(oe.message||"Failed to save info card.")}},children:F?"Add":"Save"}),f.jsx("button",{className:"px-4 py-2 rounded bg-zinc-100 text-zinc-700 font-medium text-[13px] shadow hover:bg-zinc-200",onClick:()=>{A(null),B(!1),qe("")},children:"Cancel"})]})]})]})})]})]}):f.jsx(ng,{lines:4,className:"my-8"})}function IC({className:t="h-4 w-4",...e}){return f.jsxs("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...e,children:[f.jsx("path",{d:"M3 9V1M17 17V14M3 17V13M17 10V1M10 4V1M10 17V8",stroke:"currentColor",strokeLinecap:"round"}),f.jsx("path",{d:"M3 13C4.10457 13 5 12.1046 5 11C5 9.89543 4.10457 9 3 9C1.89543 9 1 9.89543 1 11C1 12.1046 1.89543 13 3 13Z",stroke:"currentColor",strokeLinecap:"round"}),f.jsx("path",{d:"M10 8C11.1046 8 12 7.10457 12 6C12 4.89543 11.1046 4 10 4C8.89543 4 8 4.89543 8 6C8 7.10457 8.89543 8 10 8Z",stroke:"currentColor",strokeLinecap:"round"}),f.jsx("path",{d:"M17 14C18.1046 14 19 13.1046 19 12C19 10.8954 18.1046 10 17 10C15.8954 10 15 10.8954 15 12C15 13.1046 15.8954 14 17 14Z",stroke:"currentColor",strokeLinecap:"round"})]})}function N1e(){const t=Ci(),{profile:e}=In(),{userCoords:r,location:n,isLoading:i}=hp(),[s,a]=M.useState([]),[o,l]=M.useState(!0),[c,d]=M.useState(null),[p,g]=M.useState([]),[m,w]=M.useState(""),[y,k]=M.useState(!1),[T,O]=M.useState("all"),[P,V]=M.useState(!1),[Y,G]=M.useState([]),[L,N]=M.useState(-1);M.useEffect(()=>{e&&e.role!=="customer"&&t("/")},[e,t]),M.useEffect(()=>{async function ne(){try{const Q=await kv();a(Q||[])}catch(Q){console.error("Error loading pharmacies:",Q)}finally{l(!1)}}ne()},[]),M.useEffect(()=>{if(!r||s.length===0){g(s);return}let ne=s.map(Q=>{const I=xb(Q,r,"driving"),H=C(Q),X=H?P5(r.latitude,r.longitude,H.latitude,H.longitude):1/0;return{...Q,distance:X,eta:I,coords:H}}).filter(Q=>Q.coords);if(T!=="all"){const Q=parseInt(T);ne=ne.filter(I=>I.distance<=Q)}if(m.trim()){const Q=m.toLowerCase();ne=ne.filter(I=>I.name?.toLowerCase().includes(Q)||I.address?.toLowerCase().includes(Q))}ne.sort((Q,I)=>Q.distance-I.distance),g(ne),ne.length>0&&(!c||!ne.find(Q=>Q.id===c.id))&&d(ne[0])},[r,s,c,m,T]),M.useEffect(()=>{if(!m.trim()||m.length<2){G([]),V(!1);return}const ne=m.toLowerCase(),Q=s.filter(I=>I.name?.toLowerCase().includes(ne)||I.address?.toLowerCase().includes(ne)).slice(0,5).map(I=>({id:I.id,name:I.name,address:I.address,type:I.name?.toLowerCase().includes(ne)?"name":"address"}));G(Q),V(Q.length>0),N(-1)},[m,s]);function C(ne){return ne?ne.coordinates?.latitude&&ne.coordinates?.longitude?{latitude:Number(ne.coordinates.latitude),longitude:Number(ne.coordinates.longitude)}:ne.latitude&&ne.longitude?{latitude:Number(ne.latitude),longitude:Number(ne.longitude)}:ne.lat&&ne.lng?{latitude:Number(ne.lat),longitude:Number(ne.lng)}:null:null}const R=ne=>{ne.phone&&(window.location.href=`tel:${ne.phone}`)},A=ne=>{const Q=C(ne);if(Q&&r){const I=`https://www.google.com/maps/dir/${r.latitude},${r.longitude}/${Q.latitude},${Q.longitude}`;window.open(I,"_blank")}},F=ne=>{d(ne)},B=ne=>{(ne.vendorId||ne.id)&&t(`/vendor/${ne.vendorId||ne.id}`)},te=ne=>{w(ne),N(-1)},pe=ne=>{w(ne.name),V(!1),N(-1);const Q=s.find(I=>I.id===ne.id);Q&&(d(Q),setTimeout(()=>{const I=document.getElementById(`pharmacy-${Q.id}`);I&&I.scrollIntoView({behavior:"smooth",block:"center"})},100))},Ee=()=>{Y.length>0&&m.length>=2&&V(!0)},ve=()=>{setTimeout(()=>{V(!1),N(-1)},200)},re=ne=>{if(!(!P||Y.length===0))switch(ne.key){case"ArrowDown":ne.preventDefault(),N(Q=>Q<Y.length-1?Q+1:0);break;case"ArrowUp":ne.preventDefault(),N(Q=>Q>0?Q-1:Y.length-1);break;case"Enter":ne.preventDefault(),L>=0&&L<Y.length&&pe(Y[L]);break;case"Escape":V(!1),N(-1);break}};if(o||i)return f.jsx("div",{className:"min-h-screen bg-gray-50 px-4 py-6",children:f.jsxs("div",{className:"max-w-md mx-auto",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:f.jsx(cu,{className:"h-5 w-5"})}),f.jsx("h1",{className:"text-[25px] font-light text-gray-900 dark:text-white",children:"Nearby Pharmacies"})]}),f.jsx(ng,{lines:8,className:"space-y-4 justify-center"})]})});const W=()=>f.jsx("div",{className:"md:hidden fixed top-0 left-0 right-0 z-[100] bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-700",children:f.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[f.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:f.jsx(cu,{className:"h-5 w-5"})}),f.jsxs("div",{className:"flex-1 text-left",children:[f.jsx("div",{className:"text-[18px] font-light tracking-tight",children:"Nearby Pharmacies"}),f.jsx("div",{className:"text-[12px] text-gray-400",children:r?`${p.length} found near you`:"Loading location..."})]}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("button",{onClick:()=>k(!y),className:"p-2 rounded-full border border-zinc-200 bg-white hover:bg-sky-50 hover:scale-110 active:scale-95 transition-all duration-200","aria-label":"Filter pharmacies",children:f.jsx(IC,{className:"w-5 h-5 text-sky-600"})})})]})});return f.jsxs(f.Fragment,{children:[os.createPortal(f.jsx(W,{}),document.body),f.jsxs("div",{className:"min-h-screen bg-gray dark:bg-gray-900 pt-24 md:pt-0",children:[f.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-50 dark:border-gray-700 mx-auto px-4 py-4 sticky top-0 z-50 hidden md:block",children:f.jsx("div",{className:"max-w-md mx-auto",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:f.jsx(cu,{className:"h-5 w-5 text-gray-900 dark:text-white"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-[20px] font-light tracking-tight text-gray-900 dark:text-white",children:"Nearby Pharmacies"}),f.jsx("p",{className:"text-[12px] text-gray-400 dark:text-gray-500",children:r?`${p.length} pharmacies found near you`:"Loading location..."})]})]})})}),f.jsxs("div",{className:"max-w-md mx-auto px-4 py-6",children:[f.jsx("div",{className:"bg-gray dark:bg-transparent rounded-lg p-4 mb-4 border border-sky-300 dark:border-gray-600 dark:border-gray-600",children:f.jsx("div",{className:"flex items-center gap-3",children:r?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Your Location"}),f.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:n})]})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full animate-pulse"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:i?"Getting your location...":"Location access needed"}),f.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:i?"Please allow location access for accurate ETAs":"Enable location services to see nearby pharmacies"})]})]})})}),f.jsxs("div",{className:"dark:bg-transparent rounded-lg p-4 border mb-4 border-sky-300 dark:border-gray-600 dark:border-gray-600",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("div",{className:"flex-1 relative bg-transparent",children:[f.jsx(id,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),f.jsx("input",{type:"text",placeholder:"Search pharmacies...",value:m,onChange:ne=>te(ne.target.value),onFocus:Ee,onBlur:ve,onKeyDown:re,className:"w-full pl-10 pr-4 py-2 border-b bg-transparent border-gray-300 dark:border-gray-600 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",autoComplete:"off"}),P&&m.length>=2&&f.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 dark:border-gray-600 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto animate-fade-in",children:[Y.length>0?Y.map((ne,Q)=>f.jsx("button",{onClick:()=>pe(ne),className:`w-full text-left px-4 py-3 focus:outline-none transition-colors duration-200 border-b border-gray-100 dark:border-gray-700 last:border-b-0 animate-fadeInUp ${Q===L?"bg-blue-100 dark:bg-blue-900/30 border-blue-200 dark:border-gray-600 dark:border-gray-600":"hover:bg-blue-50 dark:hover:bg-blue-900/20 focus:bg-blue-50 dark:focus:bg-blue-900/20"}`,style:{animationDelay:`${Q*.05}s`},children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 transition-colors duration-200 ${Q===L?"bg-blue-200 dark:bg-blue-800":"bg-blue-100 dark:bg-blue-900"}`,children:f.jsx(zl,{className:`h-4 w-4 ${Q===L?"text-blue-700 dark:text-blue-300":"text-blue-600 dark:text-blue-400"}`})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:ne.type==="name"?f.jsx("span",{children:ne.name.split(new RegExp(`(${m})`,"gi")).map((I,H)=>I.toLowerCase()===m.toLowerCase()?f.jsx("span",{className:"bg-sky-200 px-1 rounded",children:I},H):I)}):ne.name}),f.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate mt-1",children:ne.type==="address"?f.jsx("span",{children:ne.address.split(new RegExp(`(${m})`,"gi")).map((I,H)=>I.toLowerCase()===m.toLowerCase()?f.jsx("span",{className:"bg-yellow-200 dark:bg-yellow-800 px-1 rounded",children:I},H):I)}):ne.address})]}),f.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium flex-shrink-0",children:ne.type==="name"?"Name":"Address"})]})},ne.id)):f.jsxs("div",{className:"px-4 py-6 text-center text-gray-500 dark:text-gray-400 animate-fade-in",children:[f.jsx(zl,{className:"h-8 w-8 text-gray-300 dark:text-gray-600 mx-auto mb-2"}),f.jsx("p",{className:"text-[12px]",children:"No pharmacies found"}),f.jsx("p",{className:"text-[10px] mt-1",children:"Try a different search term"})]}),Y.length>0&&f.jsx("div",{className:"px-4 py-2 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-[12px] text-gray-400 dark:text-gray-500 text-center",children:"Use  arrow keys to navigate, Enter to select, Esc to close"})]})]}),f.jsx("button",{onClick:()=>k(!y),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 ${y?"bg-blue-500 text-white border-blue-500 dark:border-gray-600":"text-gray-700 dark:text-gray-300"}`,children:f.jsx(IC,{className:"h-4 w-4"})})]}),y&&f.jsxs("div",{className:" pt-3",children:[f.jsx("p",{className:"text-[14px] font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Distance"}),f.jsx("div",{className:"flex gap-2 flex-wrap",children:[{value:"all",label:"All"},{value:"5",label:"Within 5km"},{value:"10",label:"Within 10km"},{value:"20",label:"Within 20km"}].map(ne=>f.jsx("button",{onClick:()=>O(ne.value),className:`px-3 py-1 rounded-full text-[12px] transition-colors ${T===ne.value?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:ne.label},ne.value))})]})]}),f.jsx("div",{className:"bg-white dark:bg-transparent rounded-lg mb-4 shadow-sm overflow-hidden",children:f.jsxs("div",{className:"h-80 bg-gradient-to-br from-green-50 via-blue-50 to-indigo-100 relative",children:[f.jsx("div",{className:"absolute inset-0 opacity-10",children:f.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("defs",{children:f.jsx("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:f.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"#6B7280",strokeWidth:"1"})})}),f.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),f.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 320",children:[f.jsx("path",{d:"M0 160 Q200 120 400 160",stroke:"#E5E7EB",strokeWidth:"8",fill:"none"}),f.jsx("path",{d:"M200 0 Q200 160 200 320",stroke:"#E5E7EB",strokeWidth:"6",fill:"none"}),f.jsx("path",{d:"M0 80 Q100 60 200 80",stroke:"#F3F4F6",strokeWidth:"4",fill:"none"}),f.jsx("path",{d:"M200 240 Q300 220 400 240",stroke:"#F3F4F6",strokeWidth:"4",fill:"none"})]}),r&&f.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10",children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"w-4 h-4 bg-black rounded-full border-2 border-white shadow-lg animate-pulse"}),f.jsx("div",{className:"absolute -inset-2 bg-blue-400 rounded-full opacity-30 animate-ping"})]}),f.jsx("span",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-xs bg-white px-2 py-1 rounded shadow-md whitespace-nowrap",children:"You are here"})]}),p.slice(0,8).map((ne,Q)=>{const I=Q*45*(Math.PI/180),H=80+Q*10,X=50+Math.cos(I)*H/4,J=50+Math.sin(I)*H/6;return f.jsx("div",{className:`absolute transform -translate-x-1/2 -translate-y-full cursor-pointer transition-all duration-200 hover:scale-125 z-20 ${c?.id===ne.id?"scale-125 z-30":""}`,style:{left:`${Math.max(10,Math.min(90,X))}%`,top:`${Math.max(15,Math.min(85,J))}%`},onClick:()=>F(ne),children:f.jsxs("div",{className:"relative group",children:[f.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold shadow-lg border-2 border-white transition-colors ${c?.id===ne.id?"bg-red-500 shadow-red-200":"bg-blue-500 shadow-blue-200"}`,children:Q+1}),f.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none",children:f.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 whitespace-nowrap shadow-lg",children:[f.jsx("div",{className:"font-medium",children:ne.name}),f.jsxs("div",{className:"text-gray-300",children:[ne.eta?.formatted,"  ",ne.distance?.toFixed(1),"km"]}),f.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900"})]})})]})},ne.id||Q)}),f.jsx("div",{className:"absolute top-4 left-4 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg p-3 shadow-sm",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(zl,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Pharmacy Locations"}),f.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[p.length," pharmacies  Sorted by distance"]})]})]})}),f.jsx("div",{className:"absolute bottom-4 right-4 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg p-3 shadow-sm",children:f.jsxs("div",{className:"space-y-2 text-xs",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 bg-black rounded-full border border-white dark:border-gray-300 dark:border-gray-600"}),f.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Your location"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full border border-white dark:border-gray-300 dark:border-gray-600"}),f.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Pharmacy"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full border border-white dark:border-gray-300 dark:border-gray-600"}),f.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Selected"})]})]})})]})}),c&&f.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-3 mb-4 shadow-sm border border-blue-200 dark:border-gray-600 dark:border-gray-600",children:[f.jsxs("div",{className:"flex items-start justify-between mb-2",children:[f.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[f.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-bold shadow-lg flex-shrink-0",children:p.findIndex(ne=>ne.id===c.id)+1}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base truncate",children:c.name}),f.jsx("p",{className:"text-xs text-gray-600 mb-2 truncate",children:c.address}),f.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 flex-wrap",children:[f.jsxs("div",{className:"flex items-center gap-1 bg-white rounded-full px-2 py-1",children:[f.jsx(Sv,{className:"h-3 w-3 text-blue-500 flex-shrink-0"}),f.jsx("span",{className:"font-medium whitespace-nowrap",children:c.eta?.formatted||"Calculating..."})]}),f.jsxs("div",{className:"flex items-center gap-1 bg-white rounded-full px-2 py-1",children:[f.jsx(zl,{className:"h-3 w-3 text-green-500 flex-shrink-0"}),f.jsxs("span",{className:"font-medium whitespace-nowrap",children:[c.distance?.toFixed(1)||"0"," km"]})]}),c.phone&&f.jsxs("div",{className:"flex items-center gap-1 bg-white rounded-full px-2 py-1",children:[f.jsx(G1,{className:"h-3 w-3 text-purple-500 flex-shrink-0"}),f.jsx("span",{className:"font-medium text-xs truncate max-w-[80px]",children:c.phone})]})]})]})]}),f.jsx("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full font-medium flex-shrink-0 ml-2",children:"Closest"})]}),f.jsxs("div",{className:"flex gap-1.5",children:[f.jsxs("button",{onClick:()=>A(c),className:"flex-1 bg-blue-600 text-white py-2 px-3 rounded-full text-xs font-medium hover:bg-blue-700 transition-all duration-200 flex items-center justify-center gap-1 btn-interactive",children:[f.jsx(Z3,{className:"h-3 w-3"}),f.jsx("span",{className:"hidden sm:inline",children:"Get Directions"}),f.jsx("span",{className:"sm:hidden",children:"Get Directions"})]}),c.phone&&f.jsxs("button",{onClick:()=>R(c),className:"bg-green-600 text-white py-2 px-3 rounded-full text-xs font-medium hover:bg-green-700 transition-all duration-200 flex items-center justify-center gap-1 btn-interactive",title:"Call pharmacy",children:[f.jsx(G1,{className:"h-3 w-3"}),f.jsx("span",{className:"hidden sm:inline",children:"Call"})]}),f.jsxs("button",{onClick:()=>B(c),className:"flex-1 bg-white text-blue-600 py-2 px-3 rounded-full text-xs font-medium hover:bg-blue-50 transition-all duration-200 border border-blue-200 dark:border-gray-600 btn-interactive",children:[f.jsx("span",{className:"hidden sm:inline",children:"View Products"}),f.jsx("span",{className:"sm:hidden",children:"View Products"})]})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h2",{className:"text-[18px] font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:m?f.jsxs(f.Fragment,{children:[f.jsx("span",{children:"Search Results"}),f.jsxs("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 px-2 py-1 rounded-full animate-pulse-slow",children:['"',m,'"']})]}):"All Pharmacies"}),f.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[p.length," found"]})]}),p.length===0?f.jsxs("div",{className:"bg-white-10 rounded-lg p-8 text-center",children:[f.jsx(zl,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:m?"No pharmacies found matching your search":"No pharmacies found"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:m?"Try adjusting your search terms":"Try adjusting your location or check back later"}),m&&f.jsx("button",{onClick:()=>w(""),className:"mt-3 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-sm font-medium hover:scale-105 active:scale-95 transition-all duration-200 px-3 py-1 rounded-full hover:bg-blue-50 dark:hover:bg-blue-900/20",children:"Clear search"})]}):p.map((ne,Q)=>f.jsx("div",{id:`pharmacy-${ne.id}`,className:`bg-white dark:bg-transparent rounded-lg p-3 border border-gray-200 dark:border-gray-600 dark:border-gray-600 cursor-pointer transition-all duration-200 card-interactive animate-fadeInUp ${c?.id===ne.id?"border-blue-300 dark:border-gray-600 bg-blue-50 dark:bg-blue-900/30 shadow-blue-100 scale-102":"border-gray-200 dark:border-gray-600 dark:border-gray-600 hover:border-gray-300 dark:border-gray-600 dark:hover:border-gray-500 hover:shadow-md"}`,style:{animationDelay:`${Q*.1}s`},onClick:()=>F(ne),children:f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[f.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-bold shadow-sm flex-shrink-0 ${c?.id===ne.id?"bg-blue-500":"bg-gray-400"}`,children:Q+1}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm truncate",children:ne.name}),Q===0&&f.jsx("span",{className:"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 text-xs px-2 py-0.5 rounded-full font-medium flex-shrink-0",children:"Closest"})]}),f.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2 truncate",children:ne.address}),f.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[f.jsxs("div",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-400",children:[f.jsx(Sv,{className:"h-3 w-3 flex-shrink-0"}),f.jsx("span",{className:"font-medium whitespace-nowrap",children:ne.eta?.formatted||"Calculating..."})]}),f.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[f.jsx(zl,{className:"h-3 w-3 flex-shrink-0"}),f.jsxs("span",{className:"font-medium whitespace-nowrap",children:[ne.distance?.toFixed(1)||"0"," km"]})]})]})]})]}),f.jsx("button",{onClick:I=>{I.stopPropagation(),A(ne)},className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors p-1.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-full flex-shrink-0 ml-2",title:"Get directions",children:f.jsx(Z3,{className:"h-4 w-4"})})]})},ne.id||Q))]}),P&&Y.length>0&&f.jsx("div",{className:"absolute z-50 w-full max-w-md mx-auto mt-2 bg-white rounded-lg shadow-lg",children:f.jsx("div",{className:"flex flex-col divide-y divide-gray-200",children:Y.map(ne=>f.jsxs("button",{onClick:()=>pe(ne),className:"flex items-center justify-between w-full px-4 py-2 text-left text-gray-900 hover:bg-blue-50 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(zl,{className:"h-5 w-5 text-blue-600"}),f.jsxs("div",{className:"flex flex-col text-sm",children:[f.jsx("span",{className:"font-medium",children:ne.name}),f.jsx("span",{className:"text-gray-500 truncate",children:ne.address})]})]}),f.jsx("span",{className:"text-xs text-gray-400",children:p.findIndex(Q=>Q.id===ne.id)+1})]},ne.id))})})]})]})]})}const A1e="/assets/PharmaseaLogo-J4_RPPc9.png";function Ep({children:t}){const[e,r]=M.useState(!1);return M.useEffect(()=>{const n=()=>{const s=document.documentElement.classList.contains("dark");r(s)};n();const i=new MutationObserver(n);return i.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>i.disconnect()},[]),f.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:f.jsxs("div",{className:"max-w-md mx-auto px-6 pt-14 pb-10",children:[f.jsxs("div",{className:"flex flex-col items-center mb-10",children:[f.jsx("img",{src:e?"/PharmLogoDark.png":A1e,alt:"Pharmasea",className:"w-40 h-15 object-contain transition-opacity duration-300"}),f.jsx("div",{className:"mt-3 text-zinc-600 dark:text-zinc-400 text-[13px]"})]}),t]})})}function I1e(){const[t,e]=M.useState("customer"),r=Ci();return f.jsxs(Ep,{children:[f.jsxs("div",{className:"mt-4 font-poppins text-[32px] sm:text-[38px] md:text-[42px] lg:text-[54px] font-thin tracking-tight leading-[109%] text-left animate-text-reveal",children:["HealthCare at",f.jsx("br",{}),"Your Doorstep"]}),f.jsx("p",{className:"mt-1 text-black text-[13px] sm:text-[14px] md:text-[16px] tracking-tight font-thin leading-[154%] font-poppins text-left animate-fade-in",style:{animationDelay:"0.2s"},children:"Pick up and deliver medical prescribed medications and, over-the-counter items from pharmacies to your doorstep."}),f.jsxs("div",{className:"mt-8 flex flex-row gap-4 w-full max-w-[350px] mx-0 animate-fade-in-up",style:{animationDelay:"0.4s"},children:[f.jsxs("button",{onClick:()=>e("customer"),className:`relative rounded-3xl p-0 text-left font-poppins bg-[#F7F7F7]/10 w-[169px] h-[169px] ${t==="customer"?"border-[#36A5FF] border-[3px] ring-3 ring-[#36A5FF]":"border-[#36A5FF]/10 border-[1px]"} card-interactive transition-all duration-200 hover:scale-105 active:scale-95 shadow-sm group animate-bounce-in`,style:{animationDelay:"0.5s"},children:[f.jsxs("div",{className:"absolute left-[9px] top-[80px] text-[20px] sm:text-[25px] font-light tracking-tight leading-[109%] font-poppins group-hover:text-[#36A5FF] transition-colors duration-200",children:["Im a",f.jsx("br",{}),"customer"]}),f.jsx("div",{className:"absolute left-[9px] top-[127px] text-black text-[12px] sm:text-[13px] font-extralight tracking-tight leading-[109%] font-poppins group-hover:text-[#36A5FF] transition-colors duration-200",children:"Sign Up or Login as a customer"})]}),f.jsxs("button",{onClick:()=>e("pharmacy"),className:`relative rounded-3xl p-0 text-left font-poppins bg-[#F7F7F7]/10 w-[169px] h-[169px] ${t==="pharmacy"?"border-[#36A5FF] border-[3px] ring-3 ring-[#36A5FF]":"border-[#36A5FF] border-[1px]"} card-interactive transition-all duration-200 hover:scale-105 active:scale-95 shadow-sm group animate-bounce-in`,style:{animationDelay:"0.6s"},children:[f.jsxs("div",{className:"absolute left-[9px] top-[80px] text-[20px] sm:text-[25px] font-light tracking-tight leading-[109%] font-poppins group-hover:text-[#36A5FF] transition-colors duration-200",children:["Im a",f.jsx("br",{}),"pharmacy"]}),f.jsx("div",{className:"absolute left-[9px] top-[127px] text-black text-[12px] sm:text-[13px] font-extralight tracking-tight leading-[109%] font-poppins group-hover:text-[#36A5FF] transition-colors duration-200",children:"Sign Up or Login as a pharmacy"})]})]}),f.jsx("div",{className:"flex justify-start w-full max-w-[350px] mx-0",children:f.jsx("button",{onClick:()=>r(t==="customer"?"/auth/customer/signin":"/auth/pharmacy/signin"),disabled:!t,className:`mt-8 w-full h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] font-light flex items-center justify-center btn-interactive transition-all duration-200 hover:scale-105 active:scale-95 shadow-sm animate-fade-in-up ${t?"border-[#36A5FF] text-[#36A5FF] cursor-pointer bg-white":"border-zinc-300 dark:border-gray-600 text-zinc-400 cursor-not-allowed bg-white"}`,style:{animationDelay:"0.7s"},children:"Continue"})}),f.jsxs("div",{className:"fixed bottom-0 left-1/2 transform -translate-x-1/2 flex flex-row gap-0 justify-center z-10",children:[f.jsx("div",{className:"flex flex-col items-center",children:f.jsx("svg",{width:"91",height:"152",viewBox:"0 0 91 152",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-30 h-40",children:f.jsx("path",{d:"M17.9558 53.3893L8.27792 64.6462C6.66938 66.5171 5.41493 68.6715 4.57719 71.0016L2.02085 78.1119C1.34548 79.9904 1 81.9738 1 83.9727V144.038C1 145.898 2.49116 147.406 4.33061 147.406M17.9558 53.3893V48.6425M17.9558 53.3893L34.6089 64.4141M53.3814 18.7837L54.3809 16.3407C55.821 12.8205 54.0914 8.79384 50.5647 7.4562L47.3257 6.2277L32.2398 1.3232C31.0192 0.92638 29.7113 0.894269 28.4731 1.23072L23.0885 2.69388C15.4164 4.77859 10.0835 11.8129 10.0835 19.8478V25.8211C10.0835 26.8331 10.3089 27.832 10.7429 28.7438L17.2964 42.5105C17.7304 43.4223 17.9558 44.4213 17.9558 45.4332V48.6425M53.3814 18.7837L44.7483 21.5411C42.9395 22.1189 41.5043 23.5227 40.873 25.3318L39.9367 28.0151C39.0833 30.4607 36.1645 31.416 34.0563 29.9399C32.1107 28.5775 29.4231 29.2739 28.3648 31.4147L27.1285 33.9155C26.5328 35.1206 26.7663 36.576 27.7082 37.5287C29.0866 38.9229 28.8627 41.2433 27.2438 42.3416L17.9558 48.6425M53.3814 18.7837V25.8478C53.3814 26.8426 53.5992 27.8251 54.0192 28.7247L57.1065 35.3372C57.8674 36.9669 57.0683 38.9047 55.3879 39.5045C54.1855 39.9338 53.3814 41.0833 53.3814 42.373V45.3402C53.3814 47.4234 52.4286 49.3894 50.8006 50.6655L49.8214 51.4331C48.2553 52.6607 46.1993 53.0475 44.3015 52.4717C40.9857 51.4656 37.5042 53.4323 36.6123 56.8154L34.6089 64.4141M34.6089 64.4141L45.9226 79.1266C46.832 80.3093 47.3257 81.7647 47.3257 83.263V112.494M47.3257 112.494L57.378 114.673C58.9322 115.01 60.0426 116.399 60.0426 118.007M47.3257 112.494L39.2526 111.134C36.4692 110.664 34.2802 108.472 33.7884 105.662L28.5532 75.7452M5.84452 90.4449L16.5969 122.799C17.4252 125.291 19.6115 127.069 22.1963 127.351L44.9035 129.829M44.9035 129.829L58.4183 131.304C59.2857 131.399 60.0426 130.712 60.0426 129.829M44.9035 129.829V144.344C44.9035 146.035 43.5479 147.406 41.8756 147.406M4.33061 147.406V152M4.33061 147.406H41.8756M41.8756 147.406V152M60.0426 118.007L74.9597 115.396C75.4962 115.302 76.0484 115.39 76.5296 115.648L77.5323 116.185C78.9238 116.93 78.8663 118.966 77.435 119.629C75.9577 120.314 75.9577 122.437 77.435 123.122L80.026 124.323C80.6177 124.597 81.2779 124.683 81.9188 124.569L89.2869 123.253C89.8746 123.149 90.2421 123.876 89.8139 124.296L83.029 130.688C81.8106 132.153 79.7275 132.829 77.6711 132.516L60.0426 129.829M60.0426 118.007V129.829",stroke:t==="customer"?"#36A5FF":"#9C9C9C",strokeWidth:"1"})})}),f.jsx("div",{className:"flex flex-col items-center -mr-4",children:f.jsx("svg",{width:"124",height:"154",viewBox:"0 0 124 154",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-34 h-50",children:f.jsx("path",{d:"M91.0549 25.0462L73.1047 18.9491L69.7581 17.6418M91.0549 25.0462V15.9124C91.0549 12.2404 89.4035 8.76383 86.5593 6.44828L84.0113 4.37386C82.2516 2.94119 80.1275 2.02961 77.8784 1.74191L72.8466 1.09826C69.1654 0.627362 65.4709 1.86534 62.8128 4.46045L55.1546 11.9374M91.0549 25.0462L86.187 39.6793M55.1546 11.9374L42.0162 13.7096C40.4803 13.9168 39.3342 15.2303 39.3342 16.7831C39.3342 18.0841 40.1446 19.2469 41.3636 19.6948L45.7766 21.3161C47.53 21.9603 49.4304 22.0904 51.255 21.6911L53.3292 21.2372M55.1546 11.9374L69.7581 17.6418M69.7581 17.6418L53.3292 21.2372M86.187 39.6793L84.1073 37.9861C82.3434 36.55 81.3192 34.3938 81.3192 32.1164V29.8544C81.3192 28.0625 80.2099 26.4585 78.5355 25.8293C77.2288 25.3383 75.7654 25.5149 74.6123 26.3026L74.4142 26.438C71.9808 28.1005 68.6396 27.1674 67.4151 24.4834L66.8363 23.2147C65.6954 20.7139 62.9904 19.3251 60.2983 19.8579L53.3292 21.2372M86.187 39.6793V42.3816C86.187 47.066 83.509 51.3364 79.2968 53.3686L69.7581 57.9706M53.3292 29.619L50.776 32.8169C49.6344 34.2468 50.2196 36.3768 51.9308 37.0198C52.8004 37.3466 53.4399 38.1002 53.6221 39.0127L54.6658 44.2419C54.9838 45.8349 55.789 47.2892 56.9697 48.4027C59.0405 50.3557 62.0076 51.0253 64.7141 50.1505L65.0424 50.0443M65.0424 50.0443L69.7581 48.5201M65.0424 50.0443L69.7581 57.9706M69.7581 57.9706L58.4277 73.5484C57.2767 75.1309 56.523 76.9678 56.2302 78.9039L55.2919 85.1091C55.2005 85.7137 55.1546 86.3243 55.1546 86.9358V105.833M86.187 51.5686L94.7057 60.4094M94.7057 60.4094L97.2251 68.7403C97.5719 69.8869 97.7481 71.0785 97.7481 72.2767V117.417M94.7057 60.4094L86.5047 58.9153C83.1962 58.3125 79.7862 59.1084 77.0841 61.1141L76.4306 61.5991C74.274 63.1998 72.706 65.4699 71.9705 68.0562L66.3979 87.6526C65.643 90.3072 67.1319 93.082 69.7581 93.915M94.7057 60.4094C96.5984 57.3751 99.9175 55.5317 103.489 55.5317H110.691C116.582 55.5317 121.628 59.7609 122.669 65.5717L122.809 66.3525C122.936 67.0635 123 67.7844 123 68.5068V114.611C123 116.438 122.439 118.22 121.394 119.717C119.731 122.097 117.014 123.514 114.114 123.514H98.3397M97.7481 117.417L98.3397 123.514M97.7481 117.417L84.4731 103.089M56.6758 119.856V136.318C56.6758 138.33 58.3187 139.953 60.3267 139.925M56.6758 119.856L71.2748 118.208C75.606 117.719 79.3455 114.946 81.0785 110.939L84.4731 103.089M56.6758 119.856L51.8317 119.407C49.6266 119.202 47.4077 119.604 45.4139 120.57L41.0962 122.661C39.944 123.219 38.6602 123.447 37.3868 123.319L30.7529 122.655C29.0361 122.483 28.0373 120.626 28.8379 119.094M86.187 99.126L94.7057 79.9202M86.187 99.126L69.7581 93.915M86.187 99.126L84.4731 103.089M98.3397 123.514L99.3773 134.208C99.6467 136.986 97.4902 139.401 94.7057 139.44M55.1546 105.833L53.3508 106.408C50.2244 107.405 46.8289 107.094 43.934 105.547L39.3342 103.089M55.1546 105.833L60.1247 104.684C64.3874 103.698 67.7941 100.495 69.0476 96.2957L69.7581 93.915M39.3342 103.089H32.8489C32.3189 103.089 31.8032 103.261 31.3792 103.58C29.9657 104.642 30.1054 106.809 31.6436 107.68L31.8803 107.814M39.3342 103.089V85.7124C39.3342 82.5134 36.7461 79.9202 33.5536 79.9202M18.6459 113.759H29.0173C29.7889 113.759 30.5391 113.505 31.152 113.035L32.1866 112.242C33.6989 111.083 33.5377 108.753 31.8803 107.814M18.6459 113.759L20.9268 116.299C22.9188 118.516 25.8982 119.569 28.8379 119.094M18.6459 113.759H13.1696C6.44851 113.759 1 108.3 1 101.565V86.9318C1 83.0594 4.13289 79.9202 7.99751 79.9202M28.8379 119.094L33.5536 118.332M7.99751 79.9202L8.39241 78.1395C8.92777 75.7255 10.1829 73.5317 11.9914 71.849L13.4738 70.4696M7.99751 79.9202H33.5536M7.99751 79.9202V100.65M13.4738 70.4696H13.1696C10.9852 70.4696 9.21446 68.6953 9.21446 66.5065C9.21446 64.3178 10.9852 62.5434 13.1696 62.5434H28.0773C30.2617 62.5434 32.0324 64.3178 32.0324 66.5065V66.8114C32.0324 68.8318 30.3979 70.4696 28.3815 70.4696M13.4738 70.4696H28.3815M28.3815 70.4696L30.207 74.4328L33.5536 79.9202M33.5536 79.9202V88.4561C33.5536 95.1908 28.1051 100.65 21.384 100.65H7.99751M7.99751 100.65C7.99751 104.684 11.2741 107.946 15.2991 107.92L31.8803 107.814M60.3267 139.925V154M60.3267 139.925L94.7057 139.44M94.7057 139.44V154M20.7756 83.5784V89.9804M20.7756 89.9804V96.3824M20.7756 89.9804H26.5561M20.7756 89.9804H14.3865",stroke:t==="pharmacy"?"#36A5FF":"#989898",strokeWidth:"1"})})})]})]})}function s2({to:t}){const e=Ci();return f.jsx("button",{onClick:()=>e(t||-1),className:"mb-5 w-[70px] h-[20px] font-poppins font-extralight tracking-tight text-[12px] flex items-center justify-center rounded-full bg-white dark:bg-gray-800 border border-zinc-300 dark:border-gray-600 dark:border-gray-600",children:" Back"})}function eD({email:t}){return f.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white dark:bg-gray-800",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 max-w-md w-full text-center",children:[f.jsxs("h2",{className:"text-xl font-thin mb-2",children:["Registration",f.jsx("br",{}),"Successful!"]}),f.jsxs("p",{className:"mb-4 text-zinc-600 text-[13px]",children:["A verification link has been sent to ",f.jsx("b",{children:t}),".",f.jsx("br",{}),"Please check your inbox and verify your email to continue."]}),f.jsx(jf,{to:"/auth/customer/signin",className:"mt-4 inline-block px-4 py-2 bg-sky-600 text-white rounded-full",children:"Go to Sign In"})]})})}const P1e=()=>f.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[f.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),f.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),f.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),f.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]});function tD({onClick:t,loading:e=!1,children:r,className:n=""}){return f.jsxs("button",{type:"button",onClick:t,disabled:e,className:`w-full sm:w-[359px] h-[47px] rounded-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center justify-center gap-3 font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light text-gray-700 dark:text-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${n}`,children:[e?f.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):f.jsx(P1e,{}),f.jsx("span",{children:r})]})}function R1e(){const{signUp:t,signUpWithGoogle:e}=In(),{userCoords:r,location:n,locationError:i}=hp(),[s,a]=M.useState({name:"",email:"",phone:"",password:"",address:""}),[o,l]=M.useState(!1),[c,d]=M.useState(!1),[p,g]=M.useState(null),[m,w]=M.useState([]),[y,k]=M.useState(null),T=M.useRef(),[O,P]=M.useState(!1),V=Ci(),Y=async R=>{if(!R)return w([]);const F=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(R)}&addressdetails=1&limit=5`)).json();w(F)},G=R=>{const A=R.target.value;a({...s,address:A}),k(null),clearTimeout(T.current),T.current=setTimeout(()=>Y(A),400)},L=R=>{a({...s,address:R.display_name}),k(R),w([])},N=async R=>{R.preventDefault(),l(!0);try{if(!s.address)throw new Error("Address is required");const A=await t({email:s.email,password:s.password,displayName:s.name,role:"customer",address:s.address,lat:y?.lat,lon:y?.lon});g(s.email)}catch(A){alert(A.message)}finally{l(!1)}},C=async()=>{d(!0);try{const R={address:n,latitude:r?.latitude,longitude:r?.longitude},A=await e(R);A.isNewUser?g(A.user.email):(A.existingCustomer,V("/"))}catch(R){alert(R.message||"Google registration failed. Please try again.")}finally{d(!1)}};return p?f.jsx(eD,{email:p}):f.jsxs(Ep,{children:[f.jsx(s2,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),f.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left",children:["I'm a",f.jsx("br",{}),"Customer"]}),f.jsxs("form",{onSubmit:N,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[f.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Full Name",value:s.name,onChange:R=>a({...s,name:R.target.value})}),f.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:s.email,onChange:R=>a({...s,email:R.target.value})}),f.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Phone Number",value:s.phone,onChange:R=>a({...s,phone:R.target.value})}),f.jsxs("div",{className:"relative mb-4",children:[f.jsx("input",{className:"w-full px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Address (required)",value:s.address||"",onChange:G,required:!0,autoComplete:"off"}),m.length>0&&f.jsx("div",{className:"absolute left-0 right-0 bg-white dark:bg-gray-800 border border-zinc-200 rounded shadow z-10 max-h-40 overflow-y-auto",children:m.map(R=>f.jsx("div",{className:"px-4 py-2 hover:bg-sky-50 cursor-pointer text-[13px]",onClick:()=>L(R),children:R.display_name},R.place_id))})]}),f.jsxs("div",{className:"relative mb-4",children:[f.jsx("input",{type:O?"text":"password",className:"w-full mb-0 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Choose a password",value:s.password,onChange:R=>a({...s,password:R.target.value})}),f.jsx("button",{type:"button",onClick:()=>P(R=>!R),"aria-pressed":O,"aria-label":O?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500 dark:text-zinc-400",children:O?f.jsx(A5,{className:"h-5 w-5"}):f.jsx(Hg,{className:"h-5 w-5"})})]}),f.jsx("div",{className:"flex justify-center w-full",children:f.jsx("button",{disabled:o,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] text-[#36A5FF] bg-white dark:bg-gray-800 mt-4 flex items-center justify-center",children:o?"Registering":"Register"})})]}),f.jsxs("div",{className:"mt-6 flex items-center justify-center",children:[f.jsx("div",{className:"border-t border-gray-300 dark:border-gray-600 flex-1"}),f.jsx("span",{className:"px-4 text-gray-500 dark:text-gray-400 text-sm",children:"or"}),f.jsx("div",{className:"border-t border-gray-300 dark:border-gray-600 flex-1"})]}),f.jsx("div",{className:"mt-6 flex justify-center",children:f.jsx(tD,{onClick:C,loading:c,children:"Register with Google"})}),!i&&r&&f.jsx("div",{className:"mt-3 text-center text-xs text-gray-500 dark:text-gray-400",children:"Google registration will use your current location as address"}),i&&f.jsx("div",{className:"mt-3 text-center text-xs text-red-500 dark:text-red-400",children:"Location access required for Google registration"}),f.jsxs("div",{className:"mt-6 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Already have an account? ",f.jsx(jf,{to:"/auth/customer/signin",className:"text-sky-600 dark:text-sky-400 font-medium",children:"Sign In"})]})]})}const PC=t=>{const e=t.code||t.message;return e.includes("auth/invalid-credential")||e.includes("auth/wrong-password")||e.includes("auth/user-not-found")?"Invalid email or password. Please check your credentials and try again.":e.includes("auth/invalid-email")?"Please enter a valid email address.":e.includes("auth/too-many-requests")?"Too many failed attempts. Please try again later.":e.includes("auth/network-request-failed")?"Network error. Please check your connection and try again.":e.includes("auth/popup-closed-by-user")?"Google sign-in was cancelled. Please try again.":e.includes("auth/popup-blocked")?"Pop-up was blocked by your browser. Please allow pop-ups and try again.":e.includes("auth/account-exists-with-different-credential")?"An account with this email exists with a different sign-in method. Please use your email and password instead.":!e.includes("auth/")&&!e.includes("Firebase:")?t.message:"Sign in failed. Please try again."};function F1e(){const{signIn:t,signInWithGoogle:e}=In(),[r,n]=M.useState({email:"",password:""}),[i,s]=M.useState(!1),[a,o]=M.useState(!1),[l,c]=M.useState(null),[d,p]=M.useState(!1),g=Ci(),m=async y=>{y.preventDefault(),s(!0),c(null);try{await t(r.email,r.password),g("/")}catch(k){c(PC(k))}finally{s(!1)}},w=async()=>{o(!0),c(null);try{await e(),g("/")}catch(y){c(PC(y))}finally{o(!1)}};return f.jsxs(Ep,{children:[f.jsx(s2,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),f.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left text-black dark:text-white",children:["I'm a",f.jsx("br",{}),"Customer"]}),l&&f.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2",children:[f.jsx(gb,{className:"h-4 w-4 text-red-500 dark:text-red-400 flex-shrink-0"}),f.jsx("span",{className:"text-red-700 dark:text-red-300 text-sm font-medium",children:l}),f.jsx("button",{onClick:()=>c(null),className:"ml-auto text-red-400 dark:text-red-500 hover:text-red-600 dark:hover:text-red-300","aria-label":"Dismiss error",children:""})]}),f.jsxs("form",{onSubmit:m,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[f.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:r.email,onChange:y=>n({...r,email:y.target.value})}),f.jsxs("div",{className:"relative mb-4",children:[f.jsx("input",{type:d?"text":"password",className:"w-full px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Password",value:r.password,onChange:y=>n({...r,password:y.target.value}),"aria-label":"Password"}),f.jsx("button",{type:"button",onClick:()=>p(y=>!y),"aria-pressed":d,"aria-label":d?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200",children:d?f.jsx(A5,{className:"h-5 w-5"}):f.jsx(Hg,{className:"h-5 w-5"})})]}),f.jsx("div",{className:"flex justify-center w-full",children:f.jsx("button",{disabled:i,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] dark:border-sky-400 text-[#36A5FF] dark:text-sky-400 bg-white dark:bg-gray-800 mt-4 flex items-center justify-center hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Signing in":"Sign In"})})]}),f.jsxs("div",{className:"mt-6 flex items-center justify-center",children:[f.jsx("div",{className:"border-t border-gray-300 dark:border-gray-600 flex-1"}),f.jsx("span",{className:"px-4 text-gray-500 dark:text-gray-400 text-sm",children:"or"}),f.jsx("div",{className:"border-t border-gray-300 dark:border-gray-600 flex-1"})]}),f.jsx("div",{className:"mt-6 flex justify-center",children:f.jsx(tD,{onClick:w,loading:a,children:"Sign in with Google"})}),f.jsx("div",{className:"mt-6 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:f.jsx(jf,{to:"/auth/forgot-password",className:"text-sky-600 dark:text-sky-400 font-medium hover:text-sky-700 dark:hover:text-sky-300",children:"Forgot password?"})}),f.jsxs("div",{className:"mt-2 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Don't have an account? ",f.jsx(jf,{to:"/auth/customer/register",className:"text-sky-600 dark:text-sky-400 font-medium hover:text-sky-700 dark:hover:text-sky-300",children:"Register"})]})]})}function L1e(){const{signUp:t}=In(),[e,r]=M.useState({name:"",email:"",phone:"",address:"",password:""}),[n,i]=M.useState(!1),[s,a]=M.useState([]),[o,l]=M.useState(null),[c,d]=M.useState(null),p=M.useRef(),[g,m]=M.useState(!1);Ci();const w=async T=>{if(!T)return a([]);const P=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(T)}&addressdetails=1&limit=5`)).json();a(P)},y=T=>{const O=T.target.value;r({...e,address:O}),l(null),clearTimeout(p.current),p.current=setTimeout(()=>w(O),400)},k=async T=>{T.preventDefault(),i(!0);try{await t({email:e.email,password:e.password,displayName:e.name,role:"pharmacy"});const O=Yd.currentUser?.uid;O&&await _c(or(gt,"pharmacies",O),{id:O,name:e.name,email:e.email,address:e.address,lat:o?.lat||null,lon:o?.lon||null,etaMins:25,phone:e.phone}),d(e.email)}catch(O){alert(O.message)}finally{i(!1)}};return c?f.jsx(eD,{email:c}):f.jsxs(Ep,{children:[f.jsx(s2,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),f.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left",children:["I'm a",f.jsx("br",{}),"Pharmacy"]}),f.jsxs("form",{onSubmit:k,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[f.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Pharmacy Name",value:e.name,onChange:T=>r({...e,name:T.target.value})}),f.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:e.email,onChange:T=>r({...e,email:T.target.value})}),f.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Phone Number",value:e.phone,onChange:T=>r({...e,phone:T.target.value})}),f.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Address",value:e.address,onChange:y}),f.jsxs("div",{className:"relative mb-4",children:[f.jsx("input",{type:g?"text":"password",className:"w-full mb-0 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Choose a password",value:e.password,onChange:T=>r({...e,password:T.target.value})}),f.jsx("button",{type:"button",onClick:()=>m(T=>!T),"aria-pressed":g,"aria-label":g?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500 dark:text-zinc-400",children:g?f.jsx(A5,{className:"h-5 w-5"}):f.jsx(Hg,{className:"h-5 w-5"})})]}),f.jsx("div",{className:"flex justify-center w-full",children:f.jsx("button",{disabled:n,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] text-[#36A5FF] bg-white dark:bg-gray-800 mt-4 flex items-center justify-center",children:n?"Registering":"Register"})})]}),f.jsxs("div",{className:"mt-6 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Already have an account? ",f.jsx(jf,{to:"/auth/pharmacy/signin",className:"text-sky-600 dark:text-sky-400 font-medium",children:"Sign In"})]})]})}const j1e=t=>{const e=t.code||t.message;return e.includes("auth/invalid-credential")||e.includes("auth/wrong-password")||e.includes("auth/user-not-found")?"Invalid email or password. Please check your credentials and try again.":e.includes("auth/invalid-email")?"Please enter a valid email address.":e.includes("auth/too-many-requests")?"Too many failed attempts. Please try again later.":e.includes("auth/network-request-failed")?"Network error. Please check your connection and try again.":"Sign in failed. Please try again."};function D1e(){const{signIn:t}=In(),[e,r]=M.useState({email:"",password:""}),[n,i]=M.useState(!1),[s,a]=M.useState(null),[o,l]=M.useState(!1),c=Ci(),d=async p=>{p.preventDefault(),i(!0),a(null);try{await t(e.email,e.password),c("/")}catch(g){a(j1e(g))}finally{i(!1)}};return f.jsxs(Ep,{children:[f.jsx(s2,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),f.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left text-black dark:text-white",children:["I'm a",f.jsx("br",{}),"Pharmacy"]}),s&&f.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2",children:[f.jsx(gb,{className:"h-4 w-4 text-red-500 dark:text-red-400 flex-shrink-0"}),f.jsx("span",{className:"text-red-700 dark:text-red-300 text-sm font-medium",children:s}),f.jsx("button",{onClick:()=>a(null),className:"ml-auto text-red-400 dark:text-red-500 hover:text-red-600 dark:hover:text-red-300","aria-label":"Dismiss error",children:""})]}),f.jsxs("form",{onSubmit:d,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[f.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:e.email,onChange:p=>r({...e,email:p.target.value})}),f.jsxs("div",{className:"relative mb-4",children:[f.jsx("input",{type:o?"text":"password",className:"w-full px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Password",value:e.password,onChange:p=>r({...e,password:p.target.value}),"aria-label":"Password"}),f.jsx("button",{type:"button",onClick:()=>l(p=>!p),"aria-pressed":o,"aria-label":o?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500 dark:text-zinc-400",children:o?f.jsx(A5,{className:"h-5 w-5"}):f.jsx(Hg,{className:"h-5 w-5"})})]}),f.jsx("div",{className:"flex justify-center w-full",children:f.jsx("button",{disabled:n,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] text-[#36A5FF] bg-white dark:bg-gray-800 mt-4 flex items-center justify-center",children:n?"Signing in":"Sign In"})})]}),f.jsx("div",{className:"mt-6 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:f.jsx(jf,{to:"/auth/forgot-password",className:"text-sky-600 dark:text-sky-400 font-medium",children:"Forgot password?"})}),f.jsxs("div",{className:"mt-2 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Dont have an account? ",f.jsx(jf,{to:"/auth/pharmacy/register",className:"text-sky-600 dark:text-sky-400 font-medium",children:"Register"})]})]})}function O1e(){const{user:t,logout:e}=In(),[r,n]=M.useState(!1),[i,s]=M.useState(!1),a=Ci();if(M.useEffect(()=>{t&&t.emailVerified},[t]),!t||t.emailVerified)return null;const o=async()=>{s(!0),await mP(t),n(!0),s(!1)},l=async()=>{try{await e()}catch{}window.history&&window.history.length>1?a(-1):a("/auth/landing")};return f.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:f.jsxs("div",{className:"bg-white p-8 max-w-md w-full text-center",children:[f.jsx("h2",{className:"text-xl font-light mb-2",children:"Verify your email"}),f.jsxs("p",{className:"mb-4 text-zinc-600 text-[14px] font-thin",children:["A verification link has been sent to ",f.jsx("b",{children:t.email}),".",f.jsx("br",{}),"Please check your inbox and click the link to activate your account."]}),f.jsx("button",{className:"px-4 py-2 bg-sky-600 text-white rounded-full text-[12px] font-light disabled:opacity-50",onClick:o,disabled:i||r,children:r?"Verification Sent!":i?"Sending...":"Resend Email"}),f.jsx("button",{className:"block mt-4 mx-auto text-sm text-zinc-500 underline",onClick:l,children:"Back"})]})})}function M1e(){const[t,e]=M.useState(""),[r,n]=M.useState(!1),[i,s]=M.useState(""),[a,o]=M.useState(!1),l=async c=>{c.preventDefault(),o(!0),s("");try{await pK(t),n(!0)}catch(d){s(d.message||"Failed to send reset email.")}o(!1)};return f.jsxs(Ep,{children:[f.jsx(s2,{to:"/auth/landing"}),f.jsxs("div",{className:"w-full max-w-md text-center bg-white dark:bg-gray-800 rounded-2xl  p-8",children:[f.jsx("img",{src:"/ForgotPasswordIllustration.png",alt:"Forgot Password",className:"mx-auto mb-4 w-28 h-28 object-contain"}),f.jsx("h2",{className:"text-xl font-light mb-4",children:"Forgot Password?"}),r?f.jsx("p",{className:"text-green-600 font-thin text-[14px]",children:"A password reset link has been sent to your email."}):f.jsxs("form",{onSubmit:l,className:"space-y-4 text-left",children:[f.jsx("input",{type:"email",className:"w-full border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 text-[12px] mt-2 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-200 focus:border-sky-400 dark:border-gray-600",placeholder:"Enter your email",value:t,onChange:c=>e(c.target.value),required:!0}),i&&f.jsx("div",{className:"text-red-500 text-sm",children:i}),f.jsxs("button",{type:"submit",disabled:a,className:"w-full rounded-full bg-sky-600 text-white text-[13px] font-light py-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[a&&f.jsx("span",{className:"inline-block h-4 w-4 border-2 border-white/70 border-t-transparent rounded-full animate-spin"}),a?"Sending":"Send Reset Link"]})]})]})]})}function B1e(){const{id:t}=Zv(),{userCoords:e}=hp(),[r,n]=M.useState(null),[i,s]=M.useState([]),[a,o]=M.useState(!1),[l,c]=M.useState(null),[d,p]=M.useState(!1),[g,m]=M.useState(""),[w,y]=M.useState(!1),[k,T]=M.useState([]),[O,P]=M.useState([]),[V,Y]=M.useState(!1),[G,L]=M.useState(-1),[N,C]=M.useState(!1);M.useEffect(()=>{if(typeof window>"u")return;const W=window.matchMedia("(orientation: portrait)"),ne=Q=>C(Q.matches);return C(W.matches),W.addEventListener?W.addEventListener("change",ne):W.addListener(ne),()=>{W.removeEventListener?W.removeEventListener("change",ne):W.removeListener(ne)}},[]);const R=N,A=Ci(),{user:F,profile:B}=In();M.useEffect(()=>{async function W(){const ne=await is(or(gt,"pharmacies",t));n(ne.data())}return W(),N5(s,t)},[t]),M.useEffect(()=>{async function W(){if(F?.uid&&t){const ne=await hP(F.uid,t);p(ne)}}W()},[F?.uid,t]);const te=async()=>{if(!(!F?.uid||!r))try{d?(await fP(F.uid,t),p(!1)):(await dP(F.uid,t,{name:r.name,address:r.address,phone:r.phone,email:r.email}),p(!0))}catch(W){console.error("Error toggling bookmark:",W)}};M.useEffect(()=>{if(r&&e){const W=xb(r,e,"driving");c(W)}else c(null)},[r,e]),M.useEffect(()=>{if(!g.trim())T(i),P([]),Y(!1),L(-1);else{const W=i.filter(Q=>Q.name?.toLowerCase().includes(g.toLowerCase())||Q.category?.toLowerCase().includes(g.toLowerCase())||Q.sku?.toLowerCase().includes(g.toLowerCase()));T(W);const ne=W.slice(0,5);P(ne),Y(ne.length>0&&g.length>0),L(-1)}},[i,g]);const pe=async()=>{if(!F||!F.uid){A("/auth/landing");return}if(B?.role!=="customer"){alert("Only customers can start a chat with a pharmacy.");return}try{await mb({vendorId:t,customerId:F.uid,role:"customer"}),A(`/chat/${t}`)}catch(W){console.error(W),alert("Could not start chat thread.")}},Ee=W=>{if(!(!V||O.length===0))switch(W.key){case"ArrowDown":W.preventDefault(),L(ne=>ne<O.length-1?ne+1:0);break;case"ArrowUp":W.preventDefault(),L(ne=>ne>0?ne-1:O.length-1);break;case"Enter":if(W.preventDefault(),G>=0&&G<O.length){const ne=O[G];A(`/product/${ne.id}`),y(!1),m(""),Y(!1),L(-1)}break;case"Escape":Y(!1),L(-1);break}},ve=(W,ne)=>{if(!ne||!W)return W;const Q=new RegExp(`(${ne.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return W.split(Q).map((H,X)=>Q.test(H)?f.jsx("span",{className:"bg-yellow-200 font-semibold",children:H},X):H)},re=()=>f.jsx("div",{className:"md:hidden fixed top-0 left-0 right-0 z-[100] bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-700",children:f.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[f.jsxs("button",{onClick:()=>A(-1),className:"w-[72px] h-[25px] font-poppins font-extralight tracking-tight text-[14px] flex items-center justify-center rounded-full bg-white border border-zinc-300 dark:border-gray-600 hover:scale-105 hover:shadow-md transition-all duration-200 active:scale-95",children:[f.jsx(cu,{className:"h-3 w-3 mr-0"})," Back"]}),f.jsx("div",{className:"text-[18px] font-light font-poppins leading-none",children:"Vendor Profile"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:te,className:`p-2 rounded-full border border-zinc-200 bg-white hover:scale-110 active:scale-95 transition-all duration-200 ${d?"bg-sky-100 border-sky-300 dark:border-gray-600":"hover:bg-sky-50"}`,"aria-label":d?"Remove from bookmarks":"Add to bookmarks",children:f.jsx(o9,{className:`w-5 h-5 ${d?"text-sky-600 fill-sky-600":"text-sky-600"}`})}),f.jsx("button",{onClick:()=>y(!0),className:"p-2 rounded-full border border-zinc-200 bg-white hover:bg-sky-50 hover:scale-110 active:scale-95 transition-all duration-200","aria-label":"Search products",children:f.jsx(id,{className:"w-5 h-5 text-sky-600"})})]})]})});return f.jsxs(f.Fragment,{children:[os.createPortal(f.jsx(re,{}),document.body),f.jsxs("div",{className:"min-h-screen bg-white/80 dark:bg-gray-900/80 backdrop-blur-md w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 pt-24 md:pt-8 pb-28",children:[f.jsxs("div",{className:"sticky top-0 z-20 bg-white/90 dark:bg-gray-900/90 backdrop-blur-md pb-2 pt-4 -mx-4 sm:-mx-5 md:-mx-8 lg:-mx-12 xl:-mx-0 px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 items-center gap-3 animate-slide-down-fade hidden md:flex",children:[f.jsxs("button",{onClick:()=>A(-1),className:"w-[72px] h-[25px] font-poppins font-extralight tracking-tight text-[14px] flex items-center justify-center rounded-full bg-white dark:bg-gray-800 border border-zinc-300 dark:border-gray-600 dark:border-gray-600 text-gray-900 dark:text-white mr-1 hover:scale-105 hover:shadow-md transition-all duration-200 active:scale-95",children:[f.jsx(cu,{className:"h-3 w-3 mr-0"})," Back"]}),f.jsx("div",{className:"-ml-1 text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-light font-poppins leading-none animate-text-reveal text-gray-900 dark:text-white",children:"VendorProfile"}),f.jsx("div",{className:"ml-auto flex items-center gap-2",children:f.jsx("button",{onClick:te,className:`p-2 rounded-full border border-zinc-200 dark:border-gray-600 bg-white dark:bg-gray-800 hover:scale-110 active:scale-95 transition-all duration-200 ${d?"bg-sky-100 dark:bg-sky-900 border-sky-300 dark:border-gray-600 dark:border-sky-600 dark:border-gray-600":"hover:bg-sky-50 dark:hover:bg-sky-900/20"}`,"aria-label":d?"Remove from bookmarks":"Add to bookmarks",children:f.jsx(o9,{className:`w-5 h-5 ${d?"text-sky-600 fill-sky-600":"text-sky-600"}`})})})]}),f.jsx("div",{className:"w-full mx-auto mt-6",children:f.jsxs("div",{className:`flex flex-col ${R?"":"md:grid md:grid-cols-3"} gap-6`,children:[f.jsxs("div",{className:`order-2 ${R?"":"md:order-2 md:col-span-2"} animate-fade-in-up`,children:[f.jsxs("div",{className:`border border-zinc-200 dark:border-gray-600 rounded-2xl bg-white dark:bg-gray-800 shadow-sm p-4 mb-4 flex items-center justify-between ${R?"":"md:sticky md:top-20 md:bg-white/90 md:dark:bg-gray-800/90 md:backdrop-blur-sm md:z-20"} animate-slide-down-fade`,children:[f.jsxs("div",{children:[f.jsxs("div",{className:"text-[18px] font-poppins font-medium text-gray-900 dark:text-white",children:["Products by",f.jsx("br",{}),r?.name||"Vendor"]}),f.jsxs("div",{className:"text-zinc-500 dark:text-zinc-400 text-[13px] font-poppins font-light",children:[g?k.length:i.length," ",g&&k.length!==i.length?`of ${i.length}`:""," items"]})]}),f.jsxs("div",{children:[k.length>3&&!a&&f.jsx("button",{className:"text-sky-600 dark:text-sky-400 text-[12px] font-poppins font-light px-3 py-1 rounded-full hover:bg-sky-50 dark:hover:bg-sky-900/20 transition-all duration-200 hover:scale-105 active:scale-95",onClick:()=>o(!0),children:"See more"}),k.length>3&&a&&f.jsx("button",{className:"text-sky-600 dark:text-sky-400 text-[13px] font-poppins font-light px-3 py-1 rounded-full hover:bg-sky-50 dark:hover:bg-sky-900/20 transition-all duration-200 hover:scale-105 active:scale-95",onClick:()=>o(!1),children:"See less"})]})]}),f.jsx("div",{className:`${R?"":"md:max-h-[calc(100vh-12rem)] md:overflow-y-auto md:pr-4"}`,children:f.jsxs("div",{className:"space-y-3 px-0",children:[(a?k:k.slice(0,3)).map((W,ne)=>f.jsxs("div",{className:"rounded-2xl border border-zinc-200 dark:border-gray-600 p-3 flex items-center gap-3 bg-white dark:bg-gray-800 shadow-sm cursor-pointer hover:bg-sky-50 dark:hover:bg-sky-900/20 transition-all duration-200 overflow-hidden card-interactive animate-fadeInUp hover:scale-102 hover:shadow-lg",style:{animationDelay:`${ne*.1}s`},onClick:()=>A(`/product/${W.id}`),children:[f.jsx("div",{className:"flex-shrink-0 animate-bounce-gentle",children:f.jsx(Wl,{name:W.name,image:W.image,category:W.category,size:30})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"font-poppins font-medium text-[15px] tracking-tight mb-1 truncate text-gray-900 dark:text-white",title:W.name,children:W.name}),f.jsxs("div",{className:"text-zinc-500 dark:text-zinc-400 text-[12px] font-poppins font-light truncate",title:`${W.category}  Stock: ${W.stock}  SKU: ${W.sku}`,children:[W.category,"  Stock: ",W.stock,"  SKU: ",W.sku]})]}),f.jsxs("div",{className:"text-[15px] font-poppins font-medium text-sky-600 ml-3 flex-shrink-0 animate-pulse-slow",children:["",Number(W.price).toLocaleString()]})]},W.id)),k.length===0&&f.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-[13px] font-poppins font-light animate-fade-in",children:g?"No products found matching your search.":"No products yet."})]})})]}),f.jsxs("aside",{className:`order-1 ${R?"":"md:order-1 md:col-span-1 md:self-start md:sticky md:top-20"} animate-fade-in-left`,children:[f.jsxs("div",{className:"border border-zinc-200 dark:border-gray-600 rounded-2xl bg-white dark:bg-gray-800 shadow-sm p-5 mb-4 w-full flex flex-col items-start card-interactive hover:shadow-lg transition-all duration-300",children:[f.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-gray-700 flex items-center justify-center mb-2 animate-bounce-gentle hover:scale-110 transition-transform duration-200",children:f.jsx("span",{className:"text-[32px] font-poppins font-light text-sky-600 dark:text-sky-400",children:r?.name?.charAt(0)||"V"})}),f.jsx("div",{className:"text-[22px] font-poppins font-medium tracking-tight text-sky-600 dark:text-sky-400 mb-1 animate-text-reveal",children:r?.name||"Vendor"}),f.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-[13px] font-poppins font-light mb-1 animate-fade-in",style:{animationDelay:"0.1s"},children:r?.email||""}),f.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 dark:text-zinc-400 text-[13px] font-poppins font-light mb-1 animate-fade-in",style:{animationDelay:"0.2s"},children:[f.jsx(zl,{className:"h-3 w-3"})," ",r?.address||""]}),f.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 dark:text-zinc-400 text-[13px] font-poppins font-light mb-1 animate-fade-in",style:{animationDelay:"0.3s"},children:[f.jsx(Sv,{className:"h-3 w-3"}),l?`${l.formatted} to ${r?.name||"vendor"}`:e?"Calculating ETA...":"Fetching location..."]}),f.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 dark:text-zinc-400 text-[13px] font-poppins font-light animate-fade-in",style:{animationDelay:"0.4s"},children:[f.jsx(G1,{className:"h-3 w-3"})," ",r?.phone||""]})]}),f.jsx("div",{className:"w-full mb-4 animate-fade-in-up",style:{animationDelay:"0.5s"},children:f.jsxs("button",{onClick:pe,className:"w-full rounded-full bg-sky-600 text-white h-[37px] text-[12px] font-poppins font-light flex items-center justify-center gap-2 btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200",children:[f.jsx(_f,{className:"h-4 w-4"})," Message Vendor"]})})]})]})}),w&&f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[200]",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-lg font-poppins font-medium text-gray-900 dark:text-white",children:"Search Products"}),f.jsx("button",{onClick:()=>{y(!1),m(""),Y(!1)},className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:""})]}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",placeholder:"Search by name, category, or SKU...",value:g,onChange:W=>m(W.target.value),onKeyDown:Ee,className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent font-poppins",autoFocus:!0}),V&&O.length>0&&f.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-200 dark:border-gray-600 rounded-xl shadow-lg max-h-60 overflow-y-auto z-10",children:O.map((W,ne)=>f.jsx("button",{onClick:()=>{A(`/product/${W.id}`),y(!1),m(""),Y(!1),L(-1)},onMouseEnter:()=>L(ne),className:`w-full px-4 py-3 text-left transition-colors border-b border-gray-100 last:border-b-0 first:rounded-t-xl last:rounded-b-xl ${ne===G?"bg-sky-50 border-sky-100":"hover:bg-gray-50"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx(Wl,{name:W.name,image:W.image,category:W.category,size:24})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:`font-poppins font-medium text-sm truncate ${ne===G?"text-sky-700":"text-gray-900"}`,children:ve(W.name,g)}),f.jsxs("div",{className:`text-xs truncate ${ne===G?"text-sky-600":"text-gray-500"}`,children:[ve(W.category,g),"  ",Number(W.price||0).toLocaleString()]})]})]})},W.id))})]}),f.jsxs("div",{className:"flex gap-2 mt-4",children:[f.jsxs("button",{onClick:()=>{y(!1),Y(!1)},className:"flex-1 px-4 py-2 bg-sky-600 text-white rounded-xl hover:bg-sky-700 transition-colors font-poppins font-medium",children:["View Results (",k.length,")"]}),f.jsx("button",{onClick:()=>{m(""),y(!1),Y(!1)},className:"px-4 py-2 border border-gray-200 dark:border-gray-600 rounded-xl hover:bg-gray-50 transition-colors font-poppins",children:"Clear"})]})]})})]})]})}function V1e(){const{id:t}=Zv(),[e,r]=M.useState(null),[n,i]=M.useState(null),[s,a]=M.useState([]),[o,l]=M.useState(!0);if(M.useEffect(()=>{async function d(){l(!0);try{const p=or(gt,"products",t),g=await is(p);if(g.exists()){const m=g.data();if(r({id:t,...m}),m.pharmacyId){const T=or(gt,"pharmacies",m.pharmacyId),O=await is(T);O.exists()&&i({id:m.pharmacyId,...O.data()})}const w=dr(gt,"products",t,"reviews"),y=Tr(w,Zs("createdAt","desc")),k=await Fn(y);a(k.docs.map(T=>({id:T.id,...T.data()})))}}catch{}l(!1)}d()},[t]),o)return f.jsx("div",{className:"min-h-screen flex items-center justify-center text-zinc-400 font-poppins",children:"Loading"});if(!e)return f.jsx("div",{className:"min-h-screen flex items-center justify-center text-zinc-400 font-poppins",children:"Product not found."});const c=Number(e.price||0);return f.jsx("div",{className:"min-h-screen bg-white",children:f.jsxs("div",{className:"w-full max-w-full md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-2 md:px-8 lg:px-12 xl:px-0 pt-8 pb-36",children:[f.jsxs("div",{className:"mb-6 flex items-center gap-2",children:[f.jsx(cu,{className:"h-5 w-5 text-zinc-500 cursor-pointer",onClick:()=>window.history.back()}),f.jsx("span",{className:"font-poppins text-[18px] font-medium",children:"Product Preview"})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[f.jsxs("div",{className:"rounded-2xl p-4 border flex flex-col items-center justify-center w-full card-interactive",children:[e.image?f.jsx("img",{src:e.image,alt:e.name,className:"max-h-[360px] w-full object-contain"}):f.jsx("div",{className:"h-[200px] w-full flex items-center justify-center bg-zinc-100 rounded-md text-3xl font-semibold text-zinc-800",children:f.jsx(Wl,{name:e.name,image:e.image,category:e.category,size:80,roundedClass:"rounded-md"})}),f.jsx("div",{className:"w-full mt-4 flex flex-col gap-3",children:f.jsx("div",{className:"w-full h-10 rounded-full bg-sky-100 text-sky-700 text-[14px] font-poppins font-light shadow-sm flex items-center justify-center",children:"Preview Only"})})]}),f.jsxs("div",{className:"flex flex-col",children:[f.jsxs("div",{className:"mb-3 flex items-start justify-between",children:[f.jsx("h1",{className:"text-[20px] lg:text-[22px] font-poppins font-medium tracking-tight leading-tight min-w-0",children:e.name}),f.jsxs("div",{className:"text-[20px] text-sky-600 font-poppins font-semibold",children:["",c.toLocaleString()]})]}),f.jsx("div",{className:"mb-2",children:n?f.jsx("span",{className:"text-sky-600 underline font-poppins text-[15px] font-light",children:n.name}):f.jsx("span",{className:"text-zinc-400 font-poppins text-[15px] font-light",children:"Pharmacy info unavailable"})}),f.jsxs("div",{className:"mb-1 flex items-center gap-2 text-zinc-600 text-[13px] font-poppins font-light",children:[f.jsx(zl,{className:"h-4 w-4 flex-shrink-0"}),f.jsx("span",{children:n?.address||"Address unavailable"})]}),f.jsxs("div",{className:"mt-2",children:[f.jsx("div",{className:"text-[15px] font-poppins font-medium tracking-tighter text-zinc-800",children:"Product Description"}),f.jsx("p",{className:"mt-2 text-zinc-600 leading-6 font-poppins text-[14px] font-light",children:e.description})]}),f.jsxs("div",{className:"mt-8",children:[f.jsx("div",{className:"text-[15px] font-poppins font-medium tracking-tighter text-zinc-800 mb-2",children:"Customer Reviews"}),f.jsx("div",{className:"space-y-4 mb-6",children:s.length===0?f.jsx("div",{className:"p-4 text-center text-zinc-400",children:"No reviews yet."}):s.map((d,p)=>f.jsxs("div",{className:"p-4 rounded-xl border border-sky-100",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"font-poppins font-semibold text-[14px] text-zinc-700",children:d.name}),f.jsxs("span",{className:"flex gap-0.5 text-amber-400 text-[13px]",children:["".repeat(d.rating),"".repeat(5-d.rating)]})]}),f.jsx("div",{className:"text-zinc-600 text-[13px] font-poppins font-light",children:d.comment})]},d.id||p))})]})]})]})]})})}function U1e(){const t=Xl(),e=Ci(),{user:r,profile:n}=In(),{getSetting:i}=qg(),[s,a]=M.useState(t.pathname),[o,l]=M.useState(0),[c,d]=M.useState(0),[p,g]=M.useState(0),{newOrder:m,showNotification:w,clearNotification:y}=C1e();M.useEffect(()=>a(t.pathname),[t.pathname]),M.useEffect(()=>{if(!r||n&&n.role==="pharmacy")return l(0);const L=Tr(dr(gt,"users",r.uid,"cart"));return ri(L,C=>l(C.size))},[r,n]),M.useEffect(()=>{if(!r||!n||n.role!=="pharmacy")return g(0);const L=n.uid||r.uid,N=Tr(dr(gt,"orders"),zr("pharmacyId","==",L));return ri(N,R=>{const A=R.docs.filter(F=>{const te=F.data().status?.toLowerCase()||"pending";return!["processing","shipped","fulfilled","cancelled"].includes(te)});g(A.length)})},[r,n]),M.useEffect(()=>{if(!r||!n?.role)return d(0);const L=T5({uid:r.uid,role:n.role},N=>{try{const C=N.reduce((R,A)=>{const F=A?.unread?.[r.uid];return R+(typeof F=="number"?F:0)},0);d(C),console.debug("[AppLayout] unread total from listenUserThreads",{sum:C,count:N.length})}catch(C){console.error("[AppLayout] error computing unread from threads",C)}},N=>console.error("[AppLayout] listenUserThreads error",N));return()=>L&&L()},[r,n?.role]);const T=!!new URLSearchParams(t.search).get("chat"),O=typeof window<"u"&&new URLSearchParams(window.location.search).get("debugBottomNav")==="1";M.useEffect(()=>{O&&console.debug("[AppLayout] render",{chatModalOpen:T,unreadMessages:c,tab:s,cartCount:o})},[O,T,c,s,o]);const P=L=>{e("/orders")},V=typeof window<"u"&&window.matchMedia&&window.matchMedia("(max-width: 1024px)").matches,Y=i(Nr.SWIPE_NAVIGATION),G=V&&Y;return f.jsxs("div",{className:`min-h-screen bg-white w-full flex flex-col items-center px-2 md:px-8 lg:px-16 xl:px-32 ${T?"":"pb-24"}`,children:[f.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto flex-1 flex flex-col",children:G?f.jsx($ue,{}):f.jsx(Hw,{})}),!T&&f.jsx(f.Fragment,{children:f.jsx(Que,{tab:s,setTab:L=>e(L),cartCount:o,unreadMessages:c,ordersCount:p})}),O&&f.jsxs("div",{className:"fixed bottom-24 right-4 z-60 bg-black/80 text-white text-xs px-3 py-1 rounded",children:["AppDebug: chatModalOpen=",String(T)," unread=",String(c)]}),f.jsx(S1e,{order:m,isOpen:w,onClose:y,onViewOrder:P})]})}function f3(){return f.jsx("div",{className:"min-h-screen bg-white w-full flex flex-col items-center px-2 md:px-8 lg:px-16 xl:px-32",children:f.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto flex-1 flex flex-col",children:f.jsx(Hw,{})})})}function z1e(){const{id:t}=Zv(),[e,r]=M.useState(null),[n,i]=M.useState(null);return M.useEffect(()=>{async function s(){const o=(await is(or(gt,"products",t))).data();if(r(o?{id:t,...o}:null),o?.pharmacyId){const l=await is(or(gt,"pharmacies",o.pharmacyId));i(l.data())}}s()},[t]),e?f.jsx(Jue,{product:e,pharmacy:n}):null}function $1e(){const{profile:t}=In();return t?t.role==="pharmacy"?f.jsx(XL,{onSwitchToCustomer:()=>{}}):f.jsx(IP,{onSwitchToPharmacy:()=>{}}):null}function H1e(){const{user:t,profile:e}=In(),r=Xl(),n=new URLSearchParams(r.search);return n.get("scrollTo")&&parseInt(n.get("scrollTo"),10),t&&e===void 0?f.jsx(LoadingSkeleton,{lines:4,className:"my-8"}):t&&!t.emailVerified?f.jsxs(z8,{children:[f.jsx(Wn,{path:"/verify-email",element:f.jsx(O1e,{})}),f.jsx(Wn,{path:"*",element:f.jsx(Jp,{to:"/verify-email",replace:!0})})]}):e&&e.role==="superuser"&&r.pathname==="/"?f.jsx(Jp,{to:"/superuser",replace:!0}):f.jsxs(z8,{children:[f.jsxs(Wn,{element:f.jsx(f3,{}),children:[f.jsx(Wn,{path:"/auth/landing",element:f.jsx(I1e,{})}),f.jsx(Wn,{path:"/auth/customer/register",element:f.jsx(R1e,{})}),f.jsx(Wn,{path:"/auth/customer/signin",element:f.jsx(F1e,{})}),f.jsx(Wn,{path:"/auth/pharmacy/register",element:f.jsx(L1e,{})}),f.jsx(Wn,{path:"/auth/pharmacy/signin",element:f.jsx(D1e,{})}),f.jsx(Wn,{path:"/auth/forgot-password",element:f.jsx(M1e,{})}),f.jsx(Wn,{path:"/auth",element:f.jsx(Jp,{to:"/auth/landing",replace:!0})}),f.jsx(Wn,{path:"/chat/:vendorId",element:f.jsx(Bu,{children:f.jsx(AC,{})})}),f.jsx(Wn,{path:"/thread/:threadId",element:f.jsx(Bu,{children:f.jsx(AC,{})})})]}),f.jsx(Wn,{element:f.jsx(f3,{}),children:f.jsx(Wn,{path:"/superuser",element:f.jsx(Bu,{children:f.jsx(T1e,{})})})}),f.jsxs(Wn,{element:f.jsx(U1e,{}),children:[e&&e.role==="pharmacy"?f.jsx(Wn,{path:"/",element:f.jsx(YL,{})}):e&&e.role==="customer"?f.jsx(Wn,{path:"/",element:f.jsx(kP,{})}):null,f.jsx(Wn,{path:"/vendor/:id",element:f.jsx(B1e,{})}),f.jsx(Wn,{path:"/product/:id",element:f.jsx(z1e,{})}),f.jsx(Wn,{path:"/pharmacy-map",element:f.jsx(Bu,{children:f.jsx(N1e,{})})}),f.jsx(Wn,{path:"/messages",element:f.jsx(Bu,{children:f.jsx(CP,{})})}),f.jsx(Wn,{path:"/cart",element:f.jsx(Bu,{children:e&&e.role==="pharmacy"?f.jsx(Jp,{to:"/"}):f.jsx(TP,{})})}),f.jsx(Wn,{path:"/orders",element:f.jsx(Bu,{children:f.jsx(SP,{})})}),f.jsx(Wn,{path:"/profile",element:f.jsx(Bu,{children:f.jsx($1e,{})})}),f.jsx(Wn,{path:"/settings",element:f.jsx(Bu,{children:f.jsx(_1e,{})})})]}),f.jsx(Wn,{element:f.jsx(f3,{}),children:f.jsx(Wn,{path:"/product-preview/:id",element:f.jsx(V1e,{})})}),f.jsx(Wn,{path:"*",element:f.jsx(Jp,{to:"/",replace:!0})})]})}function q1e(){return Hue(),f.jsxs(mK,{children:[f.jsx(E1e,{}),f.jsx(H1e,{}),f.jsx(Zj,{})]})}zD.createRoot(document.getElementById("root")).render(f.jsx(UO,{children:f.jsx(VK,{children:f.jsx(zK,{children:f.jsx(q1e,{})})})}));export{AK as G,EP as M,Xn as _,W1e as a,Xr as c,RC as g,f as j,M as r};
