function jL(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Ohe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gw={exports:{}},Mm={},xw={exports:{}},Zr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE;function ML(){if(DE)return Zr;DE=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function g(J){return J===null||typeof J!="object"?null:(J=p&&J[p]||J["@@iterator"],typeof J=="function"?J:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,w={};function b(J,N,U){this.props=J,this.context=N,this.refs=w,this.updater=U||m}b.prototype.isReactComponent={},b.prototype.setState=function(J,N){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,N,"setState")},b.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function k(){}k.prototype=b.prototype;function R(J,N,U){this.props=J,this.context=N,this.refs=w,this.updater=U||m}var C=R.prototype=new k;C.constructor=R,_(C,b.prototype),C.isPureReactComponent=!0;var j=Array.isArray,X=Object.prototype.hasOwnProperty,K={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function A(J,N,U){var W,Y={},ae=null,pe=null;if(N!=null)for(W in N.ref!==void 0&&(pe=N.ref),N.key!==void 0&&(ae=""+N.key),N)X.call(N,W)&&!P.hasOwnProperty(W)&&(Y[W]=N[W]);var he=arguments.length-2;if(he===1)Y.children=U;else if(1<he){for(var xe=Array(he),ke=0;ke<he;ke++)xe[ke]=arguments[ke+2];Y.children=xe}if(J&&J.defaultProps)for(W in he=J.defaultProps,he)Y[W]===void 0&&(Y[W]=he[W]);return{$$typeof:t,type:J,key:ae,ref:pe,props:Y,_owner:K.current}}function T(J,N){return{$$typeof:t,type:J.type,key:N,ref:J.ref,props:J.props,_owner:J._owner}}function O(J){return typeof J=="object"&&J!==null&&J.$$typeof===t}function I(J){var N={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(U){return N[U]})}var D=/\/+/g;function B(J,N){return typeof J=="object"&&J!==null&&J.key!=null?I(""+J.key):N.toString(36)}function re(J,N,U,W,Y){var ae=typeof J;(ae==="undefined"||ae==="boolean")&&(J=null);var pe=!1;if(J===null)pe=!0;else switch(ae){case"string":case"number":pe=!0;break;case"object":switch(J.$$typeof){case t:case e:pe=!0}}if(pe)return pe=J,Y=Y(pe),J=W===""?"."+B(pe,0):W,j(Y)?(U="",J!=null&&(U=J.replace(D,"$&/")+"/"),re(Y,N,U,"",function(ke){return ke})):Y!=null&&(O(Y)&&(Y=T(Y,U+(!Y.key||pe&&pe.key===Y.key?"":(""+Y.key).replace(D,"$&/")+"/")+J)),N.push(Y)),1;if(pe=0,W=W===""?".":W+":",j(J))for(var he=0;he<J.length;he++){ae=J[he];var xe=W+B(ae,he);pe+=re(ae,N,U,xe,Y)}else if(xe=g(J),typeof xe=="function")for(J=xe.call(J),he=0;!(ae=J.next()).done;)ae=ae.value,xe=W+B(ae,he++),pe+=re(ae,N,U,xe,Y);else if(ae==="object")throw N=String(J),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.");return pe}function _e(J,N,U){if(J==null)return J;var W=[],Y=0;return re(J,W,"","",function(ae){return N.call(U,ae,Y++)}),W}function Ce(J){if(J._status===-1){var N=J._result;N=N(),N.then(function(U){(J._status===0||J._status===-1)&&(J._status=1,J._result=U)},function(U){(J._status===0||J._status===-1)&&(J._status=2,J._result=U)}),J._status===-1&&(J._status=0,J._result=N)}if(J._status===1)return J._result.default;throw J._result}var we={current:null},ce={transition:null},H={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:ce,ReactCurrentOwner:K};function te(){throw Error("act(...) is not supported in production builds of React.")}return Zr.Children={map:_e,forEach:function(J,N,U){_e(J,function(){N.apply(this,arguments)},U)},count:function(J){var N=0;return _e(J,function(){N++}),N},toArray:function(J){return _e(J,function(N){return N})||[]},only:function(J){if(!O(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},Zr.Component=b,Zr.Fragment=r,Zr.Profiler=i,Zr.PureComponent=R,Zr.StrictMode=n,Zr.Suspense=l,Zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,Zr.act=te,Zr.cloneElement=function(J,N,U){if(J==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+J+".");var W=_({},J.props),Y=J.key,ae=J.ref,pe=J._owner;if(N!=null){if(N.ref!==void 0&&(ae=N.ref,pe=K.current),N.key!==void 0&&(Y=""+N.key),J.type&&J.type.defaultProps)var he=J.type.defaultProps;for(xe in N)X.call(N,xe)&&!P.hasOwnProperty(xe)&&(W[xe]=N[xe]===void 0&&he!==void 0?he[xe]:N[xe])}var xe=arguments.length-2;if(xe===1)W.children=U;else if(1<xe){he=Array(xe);for(var ke=0;ke<xe;ke++)he[ke]=arguments[ke+2];W.children=he}return{$$typeof:t,type:J.type,key:Y,ref:ae,props:W,_owner:pe}},Zr.createContext=function(J){return J={$$typeof:a,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},J.Provider={$$typeof:s,_context:J},J.Consumer=J},Zr.createElement=A,Zr.createFactory=function(J){var N=A.bind(null,J);return N.type=J,N},Zr.createRef=function(){return{current:null}},Zr.forwardRef=function(J){return{$$typeof:o,render:J}},Zr.isValidElement=O,Zr.lazy=function(J){return{$$typeof:f,_payload:{_status:-1,_result:J},_init:Ce}},Zr.memo=function(J,N){return{$$typeof:c,type:J,compare:N===void 0?null:N}},Zr.startTransition=function(J){var N=ce.transition;ce.transition={};try{J()}finally{ce.transition=N}},Zr.unstable_act=te,Zr.useCallback=function(J,N){return we.current.useCallback(J,N)},Zr.useContext=function(J){return we.current.useContext(J)},Zr.useDebugValue=function(){},Zr.useDeferredValue=function(J){return we.current.useDeferredValue(J)},Zr.useEffect=function(J,N){return we.current.useEffect(J,N)},Zr.useId=function(){return we.current.useId()},Zr.useImperativeHandle=function(J,N,U){return we.current.useImperativeHandle(J,N,U)},Zr.useInsertionEffect=function(J,N){return we.current.useInsertionEffect(J,N)},Zr.useLayoutEffect=function(J,N){return we.current.useLayoutEffect(J,N)},Zr.useMemo=function(J,N){return we.current.useMemo(J,N)},Zr.useReducer=function(J,N,U){return we.current.useReducer(J,N,U)},Zr.useRef=function(J){return we.current.useRef(J)},Zr.useState=function(J){return we.current.useState(J)},Zr.useSyncExternalStore=function(J,N,U){return we.current.useSyncExternalStore(J,N,U)},Zr.useTransition=function(){return we.current.useTransition()},Zr.version="18.3.1",Zr}var OE;function Pv(){return OE||(OE=1,xw.exports=ML()),xw.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE;function BL(){if(jE)return Mm;jE=1;var t=Pv(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,c){var f,p={},g=null,m=null;c!==void 0&&(g=""+c),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(m=l.ref);for(f in l)n.call(l,f)&&!s.hasOwnProperty(f)&&(p[f]=l[f]);if(o&&o.defaultProps)for(f in l=o.defaultProps,l)p[f]===void 0&&(p[f]=l[f]);return{$$typeof:e,type:o,key:g,ref:m,props:p,_owner:i.current}}return Mm.Fragment=r,Mm.jsx=a,Mm.jsxs=a,Mm}var ME;function VL(){return ME||(ME=1,gw.exports=BL()),gw.exports}var d=VL(),z=Pv();const oa=dN(z),L2=jL({__proto__:null,default:oa},[z]);var Nx={},vw={exports:{}},Po={},yw={exports:{}},ww={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BE;function UL(){return BE||(BE=1,(function(t){function e(ce,H){var te=ce.length;ce.push(H);e:for(;0<te;){var J=te-1>>>1,N=ce[J];if(0<i(N,H))ce[J]=H,ce[te]=N,te=J;else break e}}function r(ce){return ce.length===0?null:ce[0]}function n(ce){if(ce.length===0)return null;var H=ce[0],te=ce.pop();if(te!==H){ce[0]=te;e:for(var J=0,N=ce.length,U=N>>>1;J<U;){var W=2*(J+1)-1,Y=ce[W],ae=W+1,pe=ce[ae];if(0>i(Y,te))ae<N&&0>i(pe,Y)?(ce[J]=pe,ce[ae]=te,J=ae):(ce[J]=Y,ce[W]=te,J=W);else if(ae<N&&0>i(pe,te))ce[J]=pe,ce[ae]=te,J=ae;else break e}}return H}function i(ce,H){var te=ce.sortIndex-H.sortIndex;return te!==0?te:ce.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],f=1,p=null,g=3,m=!1,_=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(ce){for(var H=r(c);H!==null;){if(H.callback===null)n(c);else if(H.startTime<=ce)n(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=r(c)}}function j(ce){if(w=!1,C(ce),!_)if(r(l)!==null)_=!0,Ce(X);else{var H=r(c);H!==null&&we(j,H.startTime-ce)}}function X(ce,H){_=!1,w&&(w=!1,k(A),A=-1),m=!0;var te=g;try{for(C(H),p=r(l);p!==null&&(!(p.expirationTime>H)||ce&&!I());){var J=p.callback;if(typeof J=="function"){p.callback=null,g=p.priorityLevel;var N=J(p.expirationTime<=H);H=t.unstable_now(),typeof N=="function"?p.callback=N:p===r(l)&&n(l),C(H)}else n(l);p=r(l)}if(p!==null)var U=!0;else{var W=r(c);W!==null&&we(j,W.startTime-H),U=!1}return U}finally{p=null,g=te,m=!1}}var K=!1,P=null,A=-1,T=5,O=-1;function I(){return!(t.unstable_now()-O<T)}function D(){if(P!==null){var ce=t.unstable_now();O=ce;var H=!0;try{H=P(!0,ce)}finally{H?B():(K=!1,P=null)}}else K=!1}var B;if(typeof R=="function")B=function(){R(D)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,_e=re.port2;re.port1.onmessage=D,B=function(){_e.postMessage(null)}}else B=function(){b(D,0)};function Ce(ce){P=ce,K||(K=!0,B())}function we(ce,H){A=b(function(){ce(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ce){ce.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,Ce(X))},t.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<ce?Math.floor(1e3/ce):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(ce){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var te=g;g=H;try{return ce()}finally{g=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ce,H){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var te=g;g=ce;try{return H()}finally{g=te}},t.unstable_scheduleCallback=function(ce,H,te){var J=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?J+te:J):te=J,ce){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=te+N,ce={id:f++,callback:H,priorityLevel:ce,startTime:te,expirationTime:N,sortIndex:-1},te>J?(ce.sortIndex=te,e(c,ce),r(l)===null&&ce===r(c)&&(w?(k(A),A=-1):w=!0,we(j,te-J))):(ce.sortIndex=N,e(l,ce),_||m||(_=!0,Ce(X))),ce},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(ce){var H=g;return function(){var te=g;g=H;try{return ce.apply(this,arguments)}finally{g=te}}}})(ww)),ww}var VE;function zL(){return VE||(VE=1,yw.exports=UL()),yw.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UE;function $L(){if(UE)return Po;UE=1;var t=Pv(),e=zL();function r(u){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+u,x=1;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(u,h){a(u,h),a(u+"Capture",h)}function a(u,h){for(i[u]=h,u=0;u<h.length;u++)n.add(h[u])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(u){return l.call(p,u)?!0:l.call(f,u)?!1:c.test(u)?p[u]=!0:(f[u]=!0,!1)}function m(u,h,x,E){if(x!==null&&x.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return E?!1:x!==null?!x.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function _(u,h,x,E){if(h===null||typeof h>"u"||m(u,h,x,E))return!0;if(E)return!1;if(x!==null)switch(x.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function w(u,h,x,E,F,q,ie){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=E,this.attributeNamespace=F,this.mustUseProperty=x,this.propertyName=u,this.type=h,this.sanitizeURL=q,this.removeEmptyString=ie}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){b[u]=new w(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var h=u[0];b[h]=new w(h,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){b[u]=new w(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){b[u]=new w(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){b[u]=new w(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){b[u]=new w(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){b[u]=new w(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){b[u]=new w(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){b[u]=new w(u,5,!1,u.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function R(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var h=u.replace(k,R);b[h]=new w(h,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var h=u.replace(k,R);b[h]=new w(h,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var h=u.replace(k,R);b[h]=new w(h,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){b[u]=new w(u,1,!1,u.toLowerCase(),null,!1,!1)}),b.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){b[u]=new w(u,1,!1,u.toLowerCase(),null,!0,!0)});function C(u,h,x,E){var F=b.hasOwnProperty(h)?b[h]:null;(F!==null?F.type!==0:E||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(_(h,x,F,E)&&(x=null),E||F===null?g(h)&&(x===null?u.removeAttribute(h):u.setAttribute(h,""+x)):F.mustUseProperty?u[F.propertyName]=x===null?F.type===3?!1:"":x:(h=F.attributeName,E=F.attributeNamespace,x===null?u.removeAttribute(h):(F=F.type,x=F===3||F===4&&x===!0?"":""+x,E?u.setAttributeNS(E,h,x):u.setAttribute(h,x))))}var j=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),K=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),I=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),_e=Symbol.for("react.memo"),Ce=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),ce=Symbol.iterator;function H(u){return u===null||typeof u!="object"?null:(u=ce&&u[ce]||u["@@iterator"],typeof u=="function"?u:null)}var te=Object.assign,J;function N(u){if(J===void 0)try{throw Error()}catch(x){var h=x.stack.trim().match(/\n( *(at )?)/);J=h&&h[1]||""}return`
`+J+u}var U=!1;function W(u,h){if(!u||U)return"";U=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(it){var E=it}Reflect.construct(u,[],h)}else{try{h.call()}catch(it){E=it}u.call(h.prototype)}else{try{throw Error()}catch(it){E=it}u()}}catch(it){if(it&&E&&typeof it.stack=="string"){for(var F=it.stack.split(`
`),q=E.stack.split(`
`),ie=F.length-1,Pe=q.length-1;1<=ie&&0<=Pe&&F[ie]!==q[Pe];)Pe--;for(;1<=ie&&0<=Pe;ie--,Pe--)if(F[ie]!==q[Pe]){if(ie!==1||Pe!==1)do if(ie--,Pe--,0>Pe||F[ie]!==q[Pe]){var Oe=`
`+F[ie].replace(" at new "," at ");return u.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",u.displayName)),Oe}while(1<=ie&&0<=Pe);break}}}finally{U=!1,Error.prepareStackTrace=x}return(u=u?u.displayName||u.name:"")?N(u):""}function Y(u){switch(u.tag){case 5:return N(u.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return u=W(u.type,!1),u;case 11:return u=W(u.type.render,!1),u;case 1:return u=W(u.type,!0),u;default:return""}}function ae(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case P:return"Fragment";case K:return"Portal";case T:return"Profiler";case A:return"StrictMode";case B:return"Suspense";case re:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case I:return(u.displayName||"Context")+".Consumer";case O:return(u._context.displayName||"Context")+".Provider";case D:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case _e:return h=u.displayName||null,h!==null?h:ae(u.type)||"Memo";case Ce:h=u._payload,u=u._init;try{return ae(u(h))}catch{}}return null}function pe(u){var h=u.type;switch(u.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=h.render,u=u.displayName||u.name||"",h.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(h);case 8:return h===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function he(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function xe(u){var h=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function ke(u){var h=xe(u)?"checked":"value",x=Object.getOwnPropertyDescriptor(u.constructor.prototype,h),E=""+u[h];if(!u.hasOwnProperty(h)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var F=x.get,q=x.set;return Object.defineProperty(u,h,{configurable:!0,get:function(){return F.call(this)},set:function(ie){E=""+ie,q.call(this,ie)}}),Object.defineProperty(u,h,{enumerable:x.enumerable}),{getValue:function(){return E},setValue:function(ie){E=""+ie},stopTracking:function(){u._valueTracker=null,delete u[h]}}}}function Fe(u){u._valueTracker||(u._valueTracker=ke(u))}function oe(u){if(!u)return!1;var h=u._valueTracker;if(!h)return!0;var x=h.getValue(),E="";return u&&(E=xe(u)?u.checked?"true":"false":u.value),u=E,u!==x?(h.setValue(u),!0):!1}function Ze(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function Re(u,h){var x=h.checked;return te({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??u._wrapperState.initialChecked})}function fe(u,h){var x=h.defaultValue==null?"":h.defaultValue,E=h.checked!=null?h.checked:h.defaultChecked;x=he(h.value!=null?h.value:x),u._wrapperState={initialChecked:E,initialValue:x,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function ut(u,h){h=h.checked,h!=null&&C(u,"checked",h,!1)}function rt(u,h){ut(u,h);var x=he(h.value),E=h.type;if(x!=null)E==="number"?(x===0&&u.value===""||u.value!=x)&&(u.value=""+x):u.value!==""+x&&(u.value=""+x);else if(E==="submit"||E==="reset"){u.removeAttribute("value");return}h.hasOwnProperty("value")?le(u,h.type,x):h.hasOwnProperty("defaultValue")&&le(u,h.type,he(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(u.defaultChecked=!!h.defaultChecked)}function lt(u,h,x){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var E=h.type;if(!(E!=="submit"&&E!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+u._wrapperState.initialValue,x||h===u.value||(u.value=h),u.defaultValue=h}x=u.name,x!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,x!==""&&(u.name=x)}function le(u,h,x){(h!=="number"||Ze(u.ownerDocument)!==u)&&(x==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+x&&(u.defaultValue=""+x))}var je=Array.isArray;function ft(u,h,x,E){if(u=u.options,h){h={};for(var F=0;F<x.length;F++)h["$"+x[F]]=!0;for(x=0;x<u.length;x++)F=h.hasOwnProperty("$"+u[x].value),u[x].selected!==F&&(u[x].selected=F),F&&E&&(u[x].defaultSelected=!0)}else{for(x=""+he(x),h=null,F=0;F<u.length;F++){if(u[F].value===x){u[F].selected=!0,E&&(u[F].defaultSelected=!0);return}h!==null||u[F].disabled||(h=u[F])}h!==null&&(h.selected=!0)}}function Ie(u,h){if(h.dangerouslySetInnerHTML!=null)throw Error(r(91));return te({},h,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function Be(u,h){var x=h.value;if(x==null){if(x=h.children,h=h.defaultValue,x!=null){if(h!=null)throw Error(r(92));if(je(x)){if(1<x.length)throw Error(r(93));x=x[0]}h=x}h==null&&(h=""),x=h}u._wrapperState={initialValue:he(x)}}function tt(u,h){var x=he(h.value),E=he(h.defaultValue);x!=null&&(x=""+x,x!==u.value&&(u.value=x),h.defaultValue==null&&u.defaultValue!==x&&(u.defaultValue=x)),E!=null&&(u.defaultValue=""+E)}function ot(u){var h=u.textContent;h===u._wrapperState.initialValue&&h!==""&&h!==null&&(u.value=h)}function ht(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pt(u,h){return u==null||u==="http://www.w3.org/1999/xhtml"?ht(h):u==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var Ft,jt=(function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,x,E,F){MSApp.execUnsafeLocalFunction(function(){return u(h,x,E,F)})}:u})(function(u,h){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=h;else{for(Ft=Ft||document.createElement("div"),Ft.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=Ft.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;h.firstChild;)u.appendChild(h.firstChild)}});function wt(u,h){if(h){var x=u.firstChild;if(x&&x===u.lastChild&&x.nodeType===3){x.nodeValue=h;return}}u.textContent=h}var At={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xt=["Webkit","ms","Moz","O"];Object.keys(At).forEach(function(u){Xt.forEach(function(h){h=h+u.charAt(0).toUpperCase()+u.substring(1),At[h]=At[u]})});function Gt(u,h,x){return h==null||typeof h=="boolean"||h===""?"":x||typeof h!="number"||h===0||At.hasOwnProperty(u)&&At[u]?(""+h).trim():h+"px"}function qt(u,h){u=u.style;for(var x in h)if(h.hasOwnProperty(x)){var E=x.indexOf("--")===0,F=Gt(x,h[x],E);x==="float"&&(x="cssFloat"),E?u.setProperty(x,F):u[x]=F}}var wr=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rn(u,h){if(h){if(wr[u]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(r(137,u));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(r(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(r(61))}if(h.style!=null&&typeof h.style!="object")throw Error(r(62))}}function Me(u,h){if(u.indexOf("-")===-1)return typeof h.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mt=null;function Vt(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var rr=null,ar=null,ur=null;function Jt(u){if(u=xf(u)){if(typeof rr!="function")throw Error(r(280));var h=u.stateNode;h&&(h=qh(h),rr(u.stateNode,u.type,h))}}function mr(u){ar?ur?ur.push(u):ur=[u]:ar=u}function an(){if(ar){var u=ar,h=ur;if(ur=ar=null,Jt(u),h)for(u=0;u<h.length;u++)Jt(h[u])}}function zr(u,h){return u(h)}function Nn(){}var Cn=!1;function ir(u,h,x){if(Cn)return u(h,x);Cn=!0;try{return zr(u,h,x)}finally{Cn=!1,(ar!==null||ur!==null)&&(Nn(),an())}}function qr(u,h){var x=u.stateNode;if(x===null)return null;var E=qh(x);if(E===null)return null;x=E[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(u=u.type,E=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!E;break e;default:u=!1}if(u)return null;if(x&&typeof x!="function")throw Error(r(231,h,typeof x));return x}var is=!1;if(o)try{var Dn={};Object.defineProperty(Dn,"passive",{get:function(){is=!0}}),window.addEventListener("test",Dn,Dn),window.removeEventListener("test",Dn,Dn)}catch{is=!1}function qi(u,h,x,E,F,q,ie,Pe,Oe){var it=Array.prototype.slice.call(arguments,3);try{h.apply(x,it)}catch(Ct){this.onError(Ct)}}var bn=!1,Zn=null,ne=!1,Te=null,ve={onError:function(u){bn=!0,Zn=u}};function ye(u,h,x,E,F,q,ie,Pe,Oe){bn=!1,Zn=null,qi.apply(ve,arguments)}function Ae(u,h,x,E,F,q,ie,Pe,Oe){if(ye.apply(this,arguments),bn){if(bn){var it=Zn;bn=!1,Zn=null}else throw Error(r(198));ne||(ne=!0,Te=it)}}function Ne(u){var h=u,x=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(x=h.return),u=h.return;while(u)}return h.tag===3?x:null}function He(u){if(u.tag===13){var h=u.memoizedState;if(h===null&&(u=u.alternate,u!==null&&(h=u.memoizedState)),h!==null)return h.dehydrated}return null}function nt(u){if(Ne(u)!==u)throw Error(r(188))}function Ke(u){var h=u.alternate;if(!h){if(h=Ne(u),h===null)throw Error(r(188));return h!==u?null:u}for(var x=u,E=h;;){var F=x.return;if(F===null)break;var q=F.alternate;if(q===null){if(E=F.return,E!==null){x=E;continue}break}if(F.child===q.child){for(q=F.child;q;){if(q===x)return nt(F),u;if(q===E)return nt(F),h;q=q.sibling}throw Error(r(188))}if(x.return!==E.return)x=F,E=q;else{for(var ie=!1,Pe=F.child;Pe;){if(Pe===x){ie=!0,x=F,E=q;break}if(Pe===E){ie=!0,E=F,x=q;break}Pe=Pe.sibling}if(!ie){for(Pe=q.child;Pe;){if(Pe===x){ie=!0,x=q,E=F;break}if(Pe===E){ie=!0,E=q,x=F;break}Pe=Pe.sibling}if(!ie)throw Error(r(189))}}if(x.alternate!==E)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?u:h}function Xe(u){return u=Ke(u),u!==null?Je(u):null}function Je(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var h=Je(u);if(h!==null)return h;u=u.sibling}return null}var _t=e.unstable_scheduleCallback,Dt=e.unstable_cancelCallback,Ht=e.unstable_shouldYield,Lt=e.unstable_requestPaint,Tt=e.unstable_now,br=e.unstable_getCurrentPriorityLevel,on=e.unstable_ImmediatePriority,Dr=e.unstable_UserBlockingPriority,fn=e.unstable_NormalPriority,Na=e.unstable_LowPriority,Ca=e.unstable_IdlePriority,Ws=null,ii=null;function Bo(u){if(ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot(Ws,u,void 0,(u.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:fu,uu=Math.log,fi=Math.LN2;function fu(u){return u>>>=0,u===0?32:31-(uu(u)/fi|0)|0}var zl=64,Ia=4194304;function Pa(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Rs(u,h){var x=u.pendingLanes;if(x===0)return 0;var E=0,F=u.suspendedLanes,q=u.pingedLanes,ie=x&268435455;if(ie!==0){var Pe=ie&~F;Pe!==0?E=Pa(Pe):(q&=ie,q!==0&&(E=Pa(q)))}else ie=x&~F,ie!==0?E=Pa(ie):q!==0&&(E=Pa(q));if(E===0)return 0;if(h!==0&&h!==E&&(h&F)===0&&(F=E&-E,q=h&-h,F>=q||F===16&&(q&4194240)!==0))return h;if((E&4)!==0&&(E|=x&16),h=u.entangledLanes,h!==0)for(u=u.entanglements,h&=E;0<h;)x=31-En(h),F=1<<x,E|=u[x],h&=~F;return E}function $l(u,h){switch(u){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tn(u,h){for(var x=u.suspendedLanes,E=u.pingedLanes,F=u.expirationTimes,q=u.pendingLanes;0<q;){var ie=31-En(q),Pe=1<<ie,Oe=F[ie];Oe===-1?((Pe&x)===0||(Pe&E)!==0)&&(F[ie]=$l(Pe,h)):Oe<=h&&(u.expiredLanes|=Pe),q&=~Pe}}function Fs(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function ql(){var u=zl;return zl<<=1,(zl&4194240)===0&&(zl=64),u}function fl(u){for(var h=[],x=0;31>x;x++)h.push(u);return h}function hl(u,h,x){u.pendingLanes|=h,h!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,h=31-En(h),u[h]=x}function Yr(u,h){var x=u.pendingLanes&~h;u.pendingLanes=h,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=h,u.mutableReadLanes&=h,u.entangledLanes&=h,h=u.entanglements;var E=u.eventTimes;for(u=u.expirationTimes;0<x;){var F=31-En(x),q=1<<F;h[F]=0,E[F]=-1,u[F]=-1,x&=~q}}function Vo(u,h){var x=u.entangledLanes|=h;for(u=u.entanglements;x;){var E=31-En(x),F=1<<E;F&h|u[E]&h&&(u[E]|=h),x&=~F}}var Hr=0;function ua(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var xc,vc,nf,sf,yc,Uo=!1,Ls=[],ss=null,Ds=null,fa=null,_r=new Map,Ra=new Map,_o=[],Lh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function af(u,h){switch(u){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":fa=null;break;case"pointerover":case"pointerout":_r.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ra.delete(h.pointerId)}}function _i(u,h,x,E,F,q){return u===null||u.nativeEvent!==q?(u={blockedOn:h,domEventName:x,eventSystemFlags:E,nativeEvent:q,targetContainers:[F]},h!==null&&(h=xf(h),h!==null&&vc(h)),u):(u.eventSystemFlags|=E,h=u.targetContainers,F!==null&&h.indexOf(F)===-1&&h.push(F),u)}function zo(u,h,x,E,F){switch(h){case"focusin":return ss=_i(ss,u,h,x,E,F),!0;case"dragenter":return Ds=_i(Ds,u,h,x,E,F),!0;case"mouseover":return fa=_i(fa,u,h,x,E,F),!0;case"pointerover":var q=F.pointerId;return _r.set(q,_i(_r.get(q)||null,u,h,x,E,F)),!0;case"gotpointercapture":return q=F.pointerId,Ra.set(q,_i(Ra.get(q)||null,u,h,x,E,F)),!0}return!1}function of(u){var h=Ac(u.target);if(h!==null){var x=Ne(h);if(x!==null){if(h=x.tag,h===13){if(h=He(x),h!==null){u.blockedOn=h,yc(u.priority,function(){nf(x)});return}}else if(h===3&&x.stateNode.current.memoizedState.isDehydrated){u.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}u.blockedOn=null}function $o(u){if(u.blockedOn!==null)return!1;for(var h=u.targetContainers;0<h.length;){var x=pl(u.domEventName,u.eventSystemFlags,h[0],u.nativeEvent);if(x===null){x=u.nativeEvent;var E=new x.constructor(x.type,x);Mt=E,x.target.dispatchEvent(E),Mt=null}else return h=xf(x),h!==null&&vc(h),u.blockedOn=x,!1;h.shift()}return!0}function bo(u,h,x){$o(u)&&x.delete(h)}function wc(){Uo=!1,ss!==null&&$o(ss)&&(ss=null),Ds!==null&&$o(Ds)&&(Ds=null),fa!==null&&$o(fa)&&(fa=null),_r.forEach(bo),Ra.forEach(bo)}function Os(u,h){u.blockedOn===h&&(u.blockedOn=null,Uo||(Uo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wc)))}function Gs(u){function h(F){return Os(F,u)}if(0<Ls.length){Os(Ls[0],u);for(var x=1;x<Ls.length;x++){var E=Ls[x];E.blockedOn===u&&(E.blockedOn=null)}}for(ss!==null&&Os(ss,u),Ds!==null&&Os(Ds,u),fa!==null&&Os(fa,u),_r.forEach(h),Ra.forEach(h),x=0;x<_o.length;x++)E=_o[x],E.blockedOn===u&&(E.blockedOn=null);for(;0<_o.length&&(x=_o[0],x.blockedOn===null);)of(x),x.blockedOn===null&&_o.shift()}var Fa=j.ReactCurrentBatchConfig,dl=!0;function In(u,h,x,E){var F=Hr,q=Fa.transition;Fa.transition=null;try{Hr=1,qo(u,h,x,E)}finally{Hr=F,Fa.transition=q}}function hu(u,h,x,E){var F=Hr,q=Fa.transition;Fa.transition=null;try{Hr=4,qo(u,h,x,E)}finally{Hr=F,Fa.transition=q}}function qo(u,h,x,E){if(dl){var F=pl(u,h,x,E);if(F===null)Uh(u,h,E,uo,x),af(u,E);else if(zo(F,u,h,x,E))E.stopPropagation();else if(af(u,E),h&4&&-1<Lh.indexOf(u)){for(;F!==null;){var q=xf(F);if(q!==null&&xc(q),q=pl(u,h,x,E),q===null&&Uh(u,h,E,uo,x),q===F)break;F=q}F!==null&&E.stopPropagation()}else Uh(u,h,E,null,x)}}var uo=null;function pl(u,h,x,E){if(uo=null,u=Vt(E),u=Ac(u),u!==null)if(h=Ne(u),h===null)u=null;else if(x=h.tag,x===13){if(u=He(h),u!==null)return u;u=null}else if(x===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;u=null}else h!==u&&(u=null);return uo=u,null}function ml(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(br()){case on:return 1;case Dr:return 4;case fn:case Na:return 16;case Ca:return 536870912;default:return 16}default:return 16}}var js=null,Eo=null,ws=null;function Hl(){if(ws)return ws;var u,h=Eo,x=h.length,E,F="value"in js?js.value:js.textContent,q=F.length;for(u=0;u<x&&h[u]===F[u];u++);var ie=x-u;for(E=1;E<=ie&&h[x-E]===F[q-E];E++);return ws=F.slice(u,1<E?1-E:void 0)}function _s(u){var h=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&h===13&&(u=13)):u=h,u===10&&(u=13),32<=u||u===13?u:0}function as(){return!0}function L(){return!1}function Z(u){function h(x,E,F,q,ie){this._reactName=x,this._targetInst=F,this.type=E,this.nativeEvent=q,this.target=ie,this.currentTarget=null;for(var Pe in u)u.hasOwnProperty(Pe)&&(x=u[Pe],this[Pe]=x?x(q):q[Pe]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?as:L,this.isPropagationStopped=L,this}return te(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=as)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=as)},persist:function(){},isPersistent:as}),h}var Ee={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Le=Z(Ee),ze=te({},Ee,{view:0,detail:0}),gt=Z(ze),yt,Kt,Zt,vr=te({},ze,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ha,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Zt&&(Zt&&u.type==="mousemove"?(yt=u.screenX-Zt.screenX,Kt=u.screenY-Zt.screenY):Kt=yt=0,Zt=u),yt)},movementY:function(u){return"movementY"in u?u.movementY:Kt}}),Ar=Z(vr),nn=te({},vr,{dataTransfer:0}),Hn=Z(nn),ei=te({},ze,{relatedTarget:0}),hn=Z(ei),bi=te({},Ee,{animationName:0,elapsedTime:0,pseudoElement:0}),Pn=Z(bi),Hi=te({},Ee,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),So=Z(Hi),Ho=te({},Ee,{data:0}),du=Z(Ho),Wl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ri={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},La={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _c(u){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(u):(u=La[u])?!!h[u]:!1}function ha(){return _c}var y=te({},ze,{key:function(u){if(u.key){var h=Wl[u.key]||u.key;if(h!=="Unidentified")return h}return u.type==="keypress"?(u=_s(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Ri[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ha,charCode:function(u){return u.type==="keypress"?_s(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?_s(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),V=Z(y),Q=te({},vr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),me=Z(Q),$e=te({},ze,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ha}),at=Z($e),It=te({},Ee,{propertyName:0,elapsedTime:0,pseudoElement:0}),dn=Z(It),si=te({},vr,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),Gr=Z(si),Qr=[9,13,27,32],gn=o&&"CompositionEvent"in window,Ks=null;o&&"documentMode"in document&&(Ks=document.documentMode);var Ms=o&&"TextEvent"in window&&!Ks,Da=o&&(!gn||Ks&&8<Ks&&11>=Ks),Wo=" ",da=!1;function pa(u,h){switch(u){case"keyup":return Qr.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bc(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var ma=!1;function Ec(u,h){switch(u){case"compositionend":return bc(h);case"keypress":return h.which!==32?null:(da=!0,Wo);case"textInput":return u=h.data,u===Wo&&da?null:u;default:return null}}function Dh(u,h){if(ma)return u==="compositionend"||!gn&&pa(u,h)?(u=Hl(),ws=Eo=js=null,ma=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Da&&h.locale!=="ko"?null:h.data;default:return null}}var Sc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ei(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h==="input"?!!Sc[u.type]:h==="textarea"}function a0(u,h,x,E){mr(E),h=h0(h,"onChange"),0<h.length&&(x=new Le("onChange","change",null,x,E),u.push({event:x,listeners:h}))}var Oa=null,ja=null;function lf(u){Bh(u,0)}function kc(u){var h=_u(u);if(oe(h))return u}function cf(u,h){if(u==="change")return h}var pu=!1;if(o){var Gl;if(o){var Kl="oninput"in document;if(!Kl){var gl=document.createElement("div");gl.setAttribute("oninput","return;"),Kl=typeof gl.oninput=="function"}Gl=Kl}else Gl=!1;pu=Gl&&(!document.documentMode||9<document.documentMode)}function uf(){Oa&&(Oa.detachEvent("onpropertychange",Ma),ja=Oa=null)}function Ma(u){if(u.propertyName==="value"&&kc(ja)){var h=[];a0(h,ja,u,Vt(u)),ir(lf,h)}}function xl(u,h,x){u==="focusin"?(uf(),Oa=h,ja=x,Oa.attachEvent("onpropertychange",Ma)):u==="focusout"&&uf()}function Wn(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return kc(ja)}function Gn(u,h){if(u==="click")return kc(h)}function Fi(u,h){if(u==="input"||u==="change")return kc(h)}function Li(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var os=typeof Object.is=="function"?Object.is:Li;function vl(u,h){if(os(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var x=Object.keys(u),E=Object.keys(h);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var F=x[E];if(!l.call(h,F)||!os(u[F],h[F]))return!1}return!0}function Go(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function ff(u,h){var x=Go(u);u=0;for(var E;x;){if(x.nodeType===3){if(E=u+x.textContent.length,u<=h&&E>=h)return{node:x,offset:h-u};u=E}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Go(x)}}function hm(u,h){return u&&h?u===h?!0:u&&u.nodeType===3?!1:h&&h.nodeType===3?hm(u,h.parentNode):"contains"in u?u.contains(h):u.compareDocumentPosition?!!(u.compareDocumentPosition(h)&16):!1:!1}function dm(){for(var u=window,h=Ze();h instanceof u.HTMLIFrameElement;){try{var x=typeof h.contentWindow.location.href=="string"}catch{x=!1}if(x)u=h.contentWindow;else break;h=Ze(u.document)}return h}function o0(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h&&(h==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||h==="textarea"||u.contentEditable==="true")}function Wg(u){var h=dm(),x=u.focusedElem,E=u.selectionRange;if(h!==x&&x&&x.ownerDocument&&hm(x.ownerDocument.documentElement,x)){if(E!==null&&o0(x)){if(h=E.start,u=E.end,u===void 0&&(u=h),"selectionStart"in x)x.selectionStart=h,x.selectionEnd=Math.min(u,x.value.length);else if(u=(h=x.ownerDocument||document)&&h.defaultView||window,u.getSelection){u=u.getSelection();var F=x.textContent.length,q=Math.min(E.start,F);E=E.end===void 0?q:Math.min(E.end,F),!u.extend&&q>E&&(F=E,E=q,q=F),F=ff(x,q);var ie=ff(x,E);F&&ie&&(u.rangeCount!==1||u.anchorNode!==F.node||u.anchorOffset!==F.offset||u.focusNode!==ie.node||u.focusOffset!==ie.offset)&&(h=h.createRange(),h.setStart(F.node,F.offset),u.removeAllRanges(),q>E?(u.addRange(h),u.extend(ie.node,ie.offset)):(h.setEnd(ie.node,ie.offset),u.addRange(h)))}}for(h=[],u=x;u=u.parentNode;)u.nodeType===1&&h.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<h.length;x++)u=h[x],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var Gg=o&&"documentMode"in document&&11>=document.documentMode,mu=null,l0=null,hf=null,c0=!1;function pm(u,h,x){var E=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;c0||mu==null||mu!==Ze(E)||(E=mu,"selectionStart"in E&&o0(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),hf&&vl(hf,E)||(hf=E,E=h0(l0,"onSelect"),0<E.length&&(h=new Le("onSelect","select",null,h,x),u.push({event:h,listeners:E}),h.target=mu)))}function Oh(u,h){var x={};return x[u.toLowerCase()]=h.toLowerCase(),x["Webkit"+u]="webkit"+h,x["Moz"+u]="moz"+h,x}var gu={animationend:Oh("Animation","AnimationEnd"),animationiteration:Oh("Animation","AnimationIteration"),animationstart:Oh("Animation","AnimationStart"),transitionend:Oh("Transition","TransitionEnd")},xu={},mm={};o&&(mm=document.createElement("div").style,"AnimationEvent"in window||(delete gu.animationend.animation,delete gu.animationiteration.animation,delete gu.animationstart.animation),"TransitionEvent"in window||delete gu.transitionend.transition);function jh(u){if(xu[u])return xu[u];if(!gu[u])return u;var h=gu[u],x;for(x in h)if(h.hasOwnProperty(x)&&x in mm)return xu[u]=h[x];return u}var gm=jh("animationend"),xm=jh("animationiteration"),vm=jh("animationstart"),ym=jh("transitionend"),wm=new Map,_m="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yl(u,h){wm.set(u,h),s(h,[u])}for(var df=0;df<_m.length;df++){var ga=_m[df],ko=ga.toLowerCase(),u0=ga[0].toUpperCase()+ga.slice(1);yl(ko,"on"+u0)}yl(gm,"onAnimationEnd"),yl(xm,"onAnimationIteration"),yl(vm,"onAnimationStart"),yl("dblclick","onDoubleClick"),yl("focusin","onFocus"),yl("focusout","onBlur"),yl(ym,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tc));function Mh(u,h,x){var E=u.type||"unknown-event";u.currentTarget=x,Ae(E,h,void 0,u),u.currentTarget=null}function Bh(u,h){h=(h&4)!==0;for(var x=0;x<u.length;x++){var E=u[x],F=E.event;E=E.listeners;e:{var q=void 0;if(h)for(var ie=E.length-1;0<=ie;ie--){var Pe=E[ie],Oe=Pe.instance,it=Pe.currentTarget;if(Pe=Pe.listener,Oe!==q&&F.isPropagationStopped())break e;Mh(F,Pe,it),q=Oe}else for(ie=0;ie<E.length;ie++){if(Pe=E[ie],Oe=Pe.instance,it=Pe.currentTarget,Pe=Pe.listener,Oe!==q&&F.isPropagationStopped())break e;Mh(F,Pe,it),q=Oe}}}if(ne)throw u=Te,ne=!1,Te=null,u}function On(u,h){var x=h[Va];x===void 0&&(x=h[Va]=new Set);var E=u+"__bubble";x.has(E)||(Vh(h,u,2,!1),x.add(E))}function f0(u,h,x){var E=0;h&&(E|=4),Vh(x,u,E,h)}var pf="_reactListening"+Math.random().toString(36).slice(2);function vu(u){if(!u[pf]){u[pf]=!0,n.forEach(function(x){x!=="selectionchange"&&(Kg.has(x)||f0(x,!1,u),f0(x,!0,u))});var h=u.nodeType===9?u:u.ownerDocument;h===null||h[pf]||(h[pf]=!0,f0("selectionchange",!1,h))}}function Vh(u,h,x,E){switch(ml(h)){case 1:var F=In;break;case 4:F=hu;break;default:F=qo}x=F.bind(null,h,x,u),F=void 0,!is||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(F=!0),E?F!==void 0?u.addEventListener(h,x,{capture:!0,passive:F}):u.addEventListener(h,x,!0):F!==void 0?u.addEventListener(h,x,{passive:F}):u.addEventListener(h,x,!1)}function Uh(u,h,x,E,F){var q=E;if((h&1)===0&&(h&2)===0&&E!==null)e:for(;;){if(E===null)return;var ie=E.tag;if(ie===3||ie===4){var Pe=E.stateNode.containerInfo;if(Pe===F||Pe.nodeType===8&&Pe.parentNode===F)break;if(ie===4)for(ie=E.return;ie!==null;){var Oe=ie.tag;if((Oe===3||Oe===4)&&(Oe=ie.stateNode.containerInfo,Oe===F||Oe.nodeType===8&&Oe.parentNode===F))return;ie=ie.return}for(;Pe!==null;){if(ie=Ac(Pe),ie===null)return;if(Oe=ie.tag,Oe===5||Oe===6){E=q=ie;continue e}Pe=Pe.parentNode}}E=E.return}ir(function(){var it=q,Ct=Vt(x),Rt=[];e:{var Nt=wm.get(u);if(Nt!==void 0){var Yt=Le,or=u;switch(u){case"keypress":if(_s(x)===0)break e;case"keydown":case"keyup":Yt=V;break;case"focusin":or="focus",Yt=hn;break;case"focusout":or="blur",Yt=hn;break;case"beforeblur":case"afterblur":Yt=hn;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Yt=Ar;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Yt=Hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Yt=at;break;case gm:case xm:case vm:Yt=Pn;break;case ym:Yt=dn;break;case"scroll":Yt=gt;break;case"wheel":Yt=Gr;break;case"copy":case"cut":case"paste":Yt=So;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Yt=me}var fr=(h&4)!==0,us=!fr&&u==="scroll",Ye=fr?Nt!==null?Nt+"Capture":null:Nt;fr=[];for(var Ue=it,et;Ue!==null;){et=Ue;var Ot=et.stateNode;if(et.tag===5&&Ot!==null&&(et=Ot,Ye!==null&&(Ot=qr(Ue,Ye),Ot!=null&&fr.push(zh(Ue,Ot,et)))),us)break;Ue=Ue.return}0<fr.length&&(Nt=new Yt(Nt,or,null,x,Ct),Rt.push({event:Nt,listeners:fr}))}}if((h&7)===0){e:{if(Nt=u==="mouseover"||u==="pointerover",Yt=u==="mouseout"||u==="pointerout",Nt&&x!==Mt&&(or=x.relatedTarget||x.fromElement)&&(Ac(or)||or[Xs]))break e;if((Yt||Nt)&&(Nt=Ct.window===Ct?Ct:(Nt=Ct.ownerDocument)?Nt.defaultView||Nt.parentWindow:window,Yt?(or=x.relatedTarget||x.toElement,Yt=it,or=or?Ac(or):null,or!==null&&(us=Ne(or),or!==us||or.tag!==5&&or.tag!==6)&&(or=null)):(Yt=null,or=it),Yt!==or)){if(fr=Ar,Ot="onMouseLeave",Ye="onMouseEnter",Ue="mouse",(u==="pointerout"||u==="pointerover")&&(fr=me,Ot="onPointerLeave",Ye="onPointerEnter",Ue="pointer"),us=Yt==null?Nt:_u(Yt),et=or==null?Nt:_u(or),Nt=new fr(Ot,Ue+"leave",Yt,x,Ct),Nt.target=us,Nt.relatedTarget=et,Ot=null,Ac(Ct)===it&&(fr=new fr(Ye,Ue+"enter",or,x,Ct),fr.target=et,fr.relatedTarget=us,Ot=fr),us=Ot,Yt&&or)t:{for(fr=Yt,Ye=or,Ue=0,et=fr;et;et=yu(et))Ue++;for(et=0,Ot=Ye;Ot;Ot=yu(Ot))et++;for(;0<Ue-et;)fr=yu(fr),Ue--;for(;0<et-Ue;)Ye=yu(Ye),et--;for(;Ue--;){if(fr===Ye||Ye!==null&&fr===Ye.alternate)break t;fr=yu(fr),Ye=yu(Ye)}fr=null}else fr=null;Yt!==null&&Xg(Rt,Nt,Yt,fr,!1),or!==null&&us!==null&&Xg(Rt,us,or,fr,!0)}}e:{if(Nt=it?_u(it):window,Yt=Nt.nodeName&&Nt.nodeName.toLowerCase(),Yt==="select"||Yt==="input"&&Nt.type==="file")var dr=cf;else if(Ei(Nt))if(pu)dr=Fi;else{dr=Wn;var Er=xl}else(Yt=Nt.nodeName)&&Yt.toLowerCase()==="input"&&(Nt.type==="checkbox"||Nt.type==="radio")&&(dr=Gn);if(dr&&(dr=dr(u,it))){a0(Rt,dr,x,Ct);break e}Er&&Er(u,Nt,it),u==="focusout"&&(Er=Nt._wrapperState)&&Er.controlled&&Nt.type==="number"&&le(Nt,"number",Nt.value)}switch(Er=it?_u(it):window,u){case"focusin":(Ei(Er)||Er.contentEditable==="true")&&(mu=Er,l0=it,hf=null);break;case"focusout":hf=l0=mu=null;break;case"mousedown":c0=!0;break;case"contextmenu":case"mouseup":case"dragend":c0=!1,pm(Rt,x,Ct);break;case"selectionchange":if(Gg)break;case"keydown":case"keyup":pm(Rt,x,Ct)}var Sr;if(gn)e:{switch(u){case"compositionstart":var Rr="onCompositionStart";break e;case"compositionend":Rr="onCompositionEnd";break e;case"compositionupdate":Rr="onCompositionUpdate";break e}Rr=void 0}else ma?pa(u,x)&&(Rr="onCompositionEnd"):u==="keydown"&&x.keyCode===229&&(Rr="onCompositionStart");Rr&&(Da&&x.locale!=="ko"&&(ma||Rr!=="onCompositionStart"?Rr==="onCompositionEnd"&&ma&&(Sr=Hl()):(js=Ct,Eo="value"in js?js.value:js.textContent,ma=!0)),Er=h0(it,Rr),0<Er.length&&(Rr=new du(Rr,u,null,x,Ct),Rt.push({event:Rr,listeners:Er}),Sr?Rr.data=Sr:(Sr=bc(x),Sr!==null&&(Rr.data=Sr)))),(Sr=Ms?Ec(u,x):Dh(u,x))&&(it=h0(it,"onBeforeInput"),0<it.length&&(Ct=new du("onBeforeInput","beforeinput",null,x,Ct),Rt.push({event:Ct,listeners:it}),Ct.data=Sr))}Bh(Rt,h)})}function zh(u,h,x){return{instance:u,listener:h,currentTarget:x}}function h0(u,h){for(var x=h+"Capture",E=[];u!==null;){var F=u,q=F.stateNode;F.tag===5&&q!==null&&(F=q,q=qr(u,x),q!=null&&E.unshift(zh(u,q,F)),q=qr(u,h),q!=null&&E.push(zh(u,q,F))),u=u.return}return E}function yu(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function Xg(u,h,x,E,F){for(var q=h._reactName,ie=[];x!==null&&x!==E;){var Pe=x,Oe=Pe.alternate,it=Pe.stateNode;if(Oe!==null&&Oe===E)break;Pe.tag===5&&it!==null&&(Pe=it,F?(Oe=qr(x,q),Oe!=null&&ie.unshift(zh(x,Oe,Pe))):F||(Oe=qr(x,q),Oe!=null&&ie.push(zh(x,Oe,Pe)))),x=x.return}ie.length!==0&&u.push({event:h,listeners:ie})}var Iy=/\r\n?/g,Py=/\u0000|\uFFFD/g;function Yg(u){return(typeof u=="string"?u:""+u).replace(Iy,`
`).replace(Py,"")}function d0(u,h,x){if(h=Yg(h),Yg(u)!==h&&x)throw Error(r(425))}function mf(){}var $h=null,wu=null;function bm(u,h){return u==="textarea"||u==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Em=typeof setTimeout=="function"?setTimeout:void 0,Qg=typeof clearTimeout=="function"?clearTimeout:void 0,Jg=typeof Promise=="function"?Promise:void 0,Ry=typeof queueMicrotask=="function"?queueMicrotask:typeof Jg<"u"?function(u){return Jg.resolve(null).then(u).catch(Fy)}:Em;function Fy(u){setTimeout(function(){throw u})}function Sm(u,h){var x=h,E=0;do{var F=x.nextSibling;if(u.removeChild(x),F&&F.nodeType===8)if(x=F.data,x==="/$"){if(E===0){u.removeChild(F),Gs(h);return}E--}else x!=="$"&&x!=="$?"&&x!=="$!"||E++;x=F}while(x);Gs(h)}function xa(u){for(;u!=null;u=u.nextSibling){var h=u.nodeType;if(h===1||h===3)break;if(h===8){if(h=u.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return u}function To(u){u=u.previousSibling;for(var h=0;u;){if(u.nodeType===8){var x=u.data;if(x==="$"||x==="$!"||x==="$?"){if(h===0)return u;h--}else x==="/$"&&h++}u=u.previousSibling}return null}var Ba=Math.random().toString(36).slice(2),wl="__reactFiber$"+Ba,gf="__reactProps$"+Ba,Xs="__reactContainer$"+Ba,Va="__reactEvents$"+Ba,Ly="__reactListeners$"+Ba,Dy="__reactHandles$"+Ba;function Ac(u){var h=u[wl];if(h)return h;for(var x=u.parentNode;x;){if(h=x[Xs]||x[wl]){if(x=h.alternate,h.child!==null||x!==null&&x.child!==null)for(u=To(u);u!==null;){if(x=u[wl])return x;u=To(u)}return h}u=x,x=u.parentNode}return null}function xf(u){return u=u[wl]||u[Xs],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function _u(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(r(33))}function qh(u){return u[gf]||null}var km=[],Xl=-1;function Ko(u){return{current:u}}function An(u){0>Xl||(u.current=km[Xl],km[Xl]=null,Xl--)}function Rn(u,h){Xl++,km[Xl]=u.current,u.current=h}var Nc={},Bs=Ko(Nc),Ua=Ko(!1),bu=Nc;function vf(u,h){var x=u.type.contextTypes;if(!x)return Nc;var E=u.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===h)return E.__reactInternalMemoizedMaskedChildContext;var F={},q;for(q in x)F[q]=h[q];return E&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=h,u.__reactInternalMemoizedMaskedChildContext=F),F}function za(u){return u=u.childContextTypes,u!=null}function p0(){An(Ua),An(Bs)}function Zg(u,h,x){if(Bs.current!==Nc)throw Error(r(168));Rn(Bs,h),Rn(Ua,x)}function Tm(u,h,x){var E=u.stateNode;if(h=h.childContextTypes,typeof E.getChildContext!="function")return x;E=E.getChildContext();for(var F in E)if(!(F in h))throw Error(r(108,pe(u)||"Unknown",F));return te({},x,E)}function Eu(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Nc,bu=Bs.current,Rn(Bs,u),Rn(Ua,Ua.current),!0}function ex(u,h,x){var E=u.stateNode;if(!E)throw Error(r(169));x?(u=Tm(u,h,bu),E.__reactInternalMemoizedMergedChildContext=u,An(Ua),An(Bs),Rn(Bs,u)):An(Ua),Rn(Ua,x)}var Yl=null,Hh=!1,v=!1;function S(u){Yl===null?Yl=[u]:Yl.push(u)}function M(u){Hh=!0,S(u)}function G(){if(!v&&Yl!==null){v=!0;var u=0,h=Hr;try{var x=Yl;for(Hr=1;u<x.length;u++){var E=x[u];do E=E(!0);while(E!==null)}Yl=null,Hh=!1}catch(F){throw Yl!==null&&(Yl=Yl.slice(u+1)),_t(on,G),F}finally{Hr=h,v=!1}}return null}var ee=[],se=0,ue=null,de=0,ge=[],be=0,De=null,Ge=1,Se="";function Ve(u,h){ee[se++]=de,ee[se++]=ue,ue=u,de=h}function qe(u,h,x){ge[be++]=Ge,ge[be++]=Se,ge[be++]=De,De=u;var E=Ge;u=Se;var F=32-En(E)-1;E&=~(1<<F),x+=1;var q=32-En(h)+F;if(30<q){var ie=F-F%5;q=(E&(1<<ie)-1).toString(32),E>>=ie,F-=ie,Ge=1<<32-En(h)+F|x<<F|E,Se=q+u}else Ge=1<<q|x<<F|E,Se=u}function pt(u){u.return!==null&&(Ve(u,1),qe(u,1,0))}function Qe(u){for(;u===ue;)ue=ee[--se],ee[se]=null,de=ee[--se],ee[se]=null;for(;u===De;)De=ge[--be],ge[be]=null,Se=ge[--be],ge[be]=null,Ge=ge[--be],ge[be]=null}var ct=null,dt=null,xt=!1,vt=null;function hr(u,h){var x=kl(5,null,null,0);x.elementType="DELETED",x.stateNode=h,x.return=u,h=u.deletions,h===null?(u.deletions=[x],u.flags|=16):h.push(x)}function er(u,h){switch(u.tag){case 5:var x=u.type;return h=h.nodeType!==1||x.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(u.stateNode=h,ct=u,dt=xa(h.firstChild),!0):!1;case 6:return h=u.pendingProps===""||h.nodeType!==3?null:h,h!==null?(u.stateNode=h,ct=u,dt=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(x=De!==null?{id:Ge,overflow:Se}:null,u.memoizedState={dehydrated:h,treeContext:x,retryLane:1073741824},x=kl(18,null,null,0),x.stateNode=h,x.return=u,u.child=x,ct=u,dt=null,!0):!1;default:return!1}}function Or(u){return(u.mode&1)!==0&&(u.flags&128)===0}function sr(u){if(xt){var h=dt;if(h){var x=h;if(!er(u,h)){if(Or(u))throw Error(r(418));h=xa(x.nextSibling);var E=ct;h&&er(u,h)?hr(E,x):(u.flags=u.flags&-4097|2,xt=!1,ct=u)}}else{if(Or(u))throw Error(r(418));u.flags=u.flags&-4097|2,xt=!1,ct=u}}}function Jr(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;ct=u}function Si(u){if(u!==ct)return!1;if(!xt)return Jr(u),xt=!0,!1;var h;if((h=u.tag!==3)&&!(h=u.tag!==5)&&(h=u.type,h=h!=="head"&&h!=="body"&&!bm(u.type,u.memoizedProps)),h&&(h=dt)){if(Or(u))throw jr(),Error(r(418));for(;h;)hr(u,h),h=xa(h.nextSibling)}if(Jr(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));e:{for(u=u.nextSibling,h=0;u;){if(u.nodeType===8){var x=u.data;if(x==="/$"){if(h===0){dt=xa(u.nextSibling);break e}h--}else x!=="$"&&x!=="$!"&&x!=="$?"||h++}u=u.nextSibling}dt=null}}else dt=ct?xa(u.stateNode.nextSibling):null;return!0}function jr(){for(var u=dt;u;)u=xa(u.nextSibling)}function tr(){dt=ct=null,xt=!1}function zt(u){vt===null?vt=[u]:vt.push(u)}var Di=j.ReactCurrentBatchConfig;function Nr(u,h,x){if(u=x.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(r(309));var E=x.stateNode}if(!E)throw Error(r(147,u));var F=E,q=""+u;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===q?h.ref:(h=function(ie){var Pe=F.refs;ie===null?delete Pe[q]:Pe[q]=ie},h._stringRef=q,h)}if(typeof u!="string")throw Error(r(284));if(!x._owner)throw Error(r(290,u))}return u}function Kr(u,h){throw u=Object.prototype.toString.call(h),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u))}function Kn(u){var h=u._init;return h(u._payload)}function bs(u){function h(Ye,Ue){if(u){var et=Ye.deletions;et===null?(Ye.deletions=[Ue],Ye.flags|=16):et.push(Ue)}}function x(Ye,Ue){if(!u)return null;for(;Ue!==null;)h(Ye,Ue),Ue=Ue.sibling;return null}function E(Ye,Ue){for(Ye=new Map;Ue!==null;)Ue.key!==null?Ye.set(Ue.key,Ue):Ye.set(Ue.index,Ue),Ue=Ue.sibling;return Ye}function F(Ye,Ue){return Ye=Nf(Ye,Ue),Ye.index=0,Ye.sibling=null,Ye}function q(Ye,Ue,et){return Ye.index=et,u?(et=Ye.alternate,et!==null?(et=et.index,et<Ue?(Ye.flags|=2,Ue):et):(Ye.flags|=2,Ue)):(Ye.flags|=1048576,Ue)}function ie(Ye){return u&&Ye.alternate===null&&(Ye.flags|=2),Ye}function Pe(Ye,Ue,et,Ot){return Ue===null||Ue.tag!==6?(Ue=uw(et,Ye.mode,Ot),Ue.return=Ye,Ue):(Ue=F(Ue,et),Ue.return=Ye,Ue)}function Oe(Ye,Ue,et,Ot){var dr=et.type;return dr===P?Ct(Ye,Ue,et.props.children,Ot,et.key):Ue!==null&&(Ue.elementType===dr||typeof dr=="object"&&dr!==null&&dr.$$typeof===Ce&&Kn(dr)===Ue.type)?(Ot=F(Ue,et.props),Ot.ref=Nr(Ye,Ue,et),Ot.return=Ye,Ot):(Ot=wx(et.type,et.key,et.props,null,Ye.mode,Ot),Ot.ref=Nr(Ye,Ue,et),Ot.return=Ye,Ot)}function it(Ye,Ue,et,Ot){return Ue===null||Ue.tag!==4||Ue.stateNode.containerInfo!==et.containerInfo||Ue.stateNode.implementation!==et.implementation?(Ue=fw(et,Ye.mode,Ot),Ue.return=Ye,Ue):(Ue=F(Ue,et.children||[]),Ue.return=Ye,Ue)}function Ct(Ye,Ue,et,Ot,dr){return Ue===null||Ue.tag!==7?(Ue=Zh(et,Ye.mode,Ot,dr),Ue.return=Ye,Ue):(Ue=F(Ue,et),Ue.return=Ye,Ue)}function Rt(Ye,Ue,et){if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number")return Ue=uw(""+Ue,Ye.mode,et),Ue.return=Ye,Ue;if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case X:return et=wx(Ue.type,Ue.key,Ue.props,null,Ye.mode,et),et.ref=Nr(Ye,null,Ue),et.return=Ye,et;case K:return Ue=fw(Ue,Ye.mode,et),Ue.return=Ye,Ue;case Ce:var Ot=Ue._init;return Rt(Ye,Ot(Ue._payload),et)}if(je(Ue)||H(Ue))return Ue=Zh(Ue,Ye.mode,et,null),Ue.return=Ye,Ue;Kr(Ye,Ue)}return null}function Nt(Ye,Ue,et,Ot){var dr=Ue!==null?Ue.key:null;if(typeof et=="string"&&et!==""||typeof et=="number")return dr!==null?null:Pe(Ye,Ue,""+et,Ot);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case X:return et.key===dr?Oe(Ye,Ue,et,Ot):null;case K:return et.key===dr?it(Ye,Ue,et,Ot):null;case Ce:return dr=et._init,Nt(Ye,Ue,dr(et._payload),Ot)}if(je(et)||H(et))return dr!==null?null:Ct(Ye,Ue,et,Ot,null);Kr(Ye,et)}return null}function Yt(Ye,Ue,et,Ot,dr){if(typeof Ot=="string"&&Ot!==""||typeof Ot=="number")return Ye=Ye.get(et)||null,Pe(Ue,Ye,""+Ot,dr);if(typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case X:return Ye=Ye.get(Ot.key===null?et:Ot.key)||null,Oe(Ue,Ye,Ot,dr);case K:return Ye=Ye.get(Ot.key===null?et:Ot.key)||null,it(Ue,Ye,Ot,dr);case Ce:var Er=Ot._init;return Yt(Ye,Ue,et,Er(Ot._payload),dr)}if(je(Ot)||H(Ot))return Ye=Ye.get(et)||null,Ct(Ue,Ye,Ot,dr,null);Kr(Ue,Ot)}return null}function or(Ye,Ue,et,Ot){for(var dr=null,Er=null,Sr=Ue,Rr=Ue=0,ea=null;Sr!==null&&Rr<et.length;Rr++){Sr.index>Rr?(ea=Sr,Sr=null):ea=Sr.sibling;var Sn=Nt(Ye,Sr,et[Rr],Ot);if(Sn===null){Sr===null&&(Sr=ea);break}u&&Sr&&Sn.alternate===null&&h(Ye,Sr),Ue=q(Sn,Ue,Rr),Er===null?dr=Sn:Er.sibling=Sn,Er=Sn,Sr=ea}if(Rr===et.length)return x(Ye,Sr),xt&&Ve(Ye,Rr),dr;if(Sr===null){for(;Rr<et.length;Rr++)Sr=Rt(Ye,et[Rr],Ot),Sr!==null&&(Ue=q(Sr,Ue,Rr),Er===null?dr=Sr:Er.sibling=Sr,Er=Sr);return xt&&Ve(Ye,Rr),dr}for(Sr=E(Ye,Sr);Rr<et.length;Rr++)ea=Yt(Sr,Ye,Rr,et[Rr],Ot),ea!==null&&(u&&ea.alternate!==null&&Sr.delete(ea.key===null?Rr:ea.key),Ue=q(ea,Ue,Rr),Er===null?dr=ea:Er.sibling=ea,Er=ea);return u&&Sr.forEach(function(Cf){return h(Ye,Cf)}),xt&&Ve(Ye,Rr),dr}function fr(Ye,Ue,et,Ot){var dr=H(et);if(typeof dr!="function")throw Error(r(150));if(et=dr.call(et),et==null)throw Error(r(151));for(var Er=dr=null,Sr=Ue,Rr=Ue=0,ea=null,Sn=et.next();Sr!==null&&!Sn.done;Rr++,Sn=et.next()){Sr.index>Rr?(ea=Sr,Sr=null):ea=Sr.sibling;var Cf=Nt(Ye,Sr,Sn.value,Ot);if(Cf===null){Sr===null&&(Sr=ea);break}u&&Sr&&Cf.alternate===null&&h(Ye,Sr),Ue=q(Cf,Ue,Rr),Er===null?dr=Cf:Er.sibling=Cf,Er=Cf,Sr=ea}if(Sn.done)return x(Ye,Sr),xt&&Ve(Ye,Rr),dr;if(Sr===null){for(;!Sn.done;Rr++,Sn=et.next())Sn=Rt(Ye,Sn.value,Ot),Sn!==null&&(Ue=q(Sn,Ue,Rr),Er===null?dr=Sn:Er.sibling=Sn,Er=Sn);return xt&&Ve(Ye,Rr),dr}for(Sr=E(Ye,Sr);!Sn.done;Rr++,Sn=et.next())Sn=Yt(Sr,Ye,Rr,Sn.value,Ot),Sn!==null&&(u&&Sn.alternate!==null&&Sr.delete(Sn.key===null?Rr:Sn.key),Ue=q(Sn,Ue,Rr),Er===null?dr=Sn:Er.sibling=Sn,Er=Sn);return u&&Sr.forEach(function(OL){return h(Ye,OL)}),xt&&Ve(Ye,Rr),dr}function us(Ye,Ue,et,Ot){if(typeof et=="object"&&et!==null&&et.type===P&&et.key===null&&(et=et.props.children),typeof et=="object"&&et!==null){switch(et.$$typeof){case X:e:{for(var dr=et.key,Er=Ue;Er!==null;){if(Er.key===dr){if(dr=et.type,dr===P){if(Er.tag===7){x(Ye,Er.sibling),Ue=F(Er,et.props.children),Ue.return=Ye,Ye=Ue;break e}}else if(Er.elementType===dr||typeof dr=="object"&&dr!==null&&dr.$$typeof===Ce&&Kn(dr)===Er.type){x(Ye,Er.sibling),Ue=F(Er,et.props),Ue.ref=Nr(Ye,Er,et),Ue.return=Ye,Ye=Ue;break e}x(Ye,Er);break}else h(Ye,Er);Er=Er.sibling}et.type===P?(Ue=Zh(et.props.children,Ye.mode,Ot,et.key),Ue.return=Ye,Ye=Ue):(Ot=wx(et.type,et.key,et.props,null,Ye.mode,Ot),Ot.ref=Nr(Ye,Ue,et),Ot.return=Ye,Ye=Ot)}return ie(Ye);case K:e:{for(Er=et.key;Ue!==null;){if(Ue.key===Er)if(Ue.tag===4&&Ue.stateNode.containerInfo===et.containerInfo&&Ue.stateNode.implementation===et.implementation){x(Ye,Ue.sibling),Ue=F(Ue,et.children||[]),Ue.return=Ye,Ye=Ue;break e}else{x(Ye,Ue);break}else h(Ye,Ue);Ue=Ue.sibling}Ue=fw(et,Ye.mode,Ot),Ue.return=Ye,Ye=Ue}return ie(Ye);case Ce:return Er=et._init,us(Ye,Ue,Er(et._payload),Ot)}if(je(et))return or(Ye,Ue,et,Ot);if(H(et))return fr(Ye,Ue,et,Ot);Kr(Ye,et)}return typeof et=="string"&&et!==""||typeof et=="number"?(et=""+et,Ue!==null&&Ue.tag===6?(x(Ye,Ue.sibling),Ue=F(Ue,et),Ue.return=Ye,Ye=Ue):(x(Ye,Ue),Ue=uw(et,Ye.mode,Ot),Ue.return=Ye,Ye=Ue),ie(Ye)):x(Ye,Ue)}return us}var Wi=bs(!0),hi=bs(!1),ls=Ko(null),Es=null,ai=null,sn=null;function xn(){sn=ai=Es=null}function oi(u){var h=ls.current;An(ls),u._currentValue=h}function vn(u,h,x){for(;u!==null;){var E=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,E!==null&&(E.childLanes|=h)):E!==null&&(E.childLanes&h)!==h&&(E.childLanes|=h),u===x)break;u=u.return}}function ki(u,h){Es=u,sn=ai=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&h)!==0&&(No=!0),u.firstContext=null)}function Ti(u){var h=u._currentValue;if(sn!==u)if(u={context:u,memoizedValue:h,next:null},ai===null){if(Es===null)throw Error(r(308));ai=u,Es.dependencies={lanes:0,firstContext:u}}else ai=ai.next=u;return h}var jn=null;function Ys(u){jn===null?jn=[u]:jn.push(u)}function Fn(u,h,x,E){var F=h.interleaved;return F===null?(x.next=x,Ys(h)):(x.next=F.next,F.next=x),h.interleaved=x,Mn(u,E)}function Mn(u,h){u.lanes|=h;var x=u.alternate;for(x!==null&&(x.lanes|=h),x=u,u=u.return;u!==null;)u.childLanes|=h,x=u.alternate,x!==null&&(x.childLanes|=h),x=u,u=u.return;return x.tag===3?x.stateNode:null}var Gi=!1;function Vs(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $a(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Oi(u,h){return{eventTime:u,lane:h,tag:0,payload:null,callback:null,next:null}}function ji(u,h,x){var E=u.updateQueue;if(E===null)return null;if(E=E.shared,(yn&2)!==0){var F=E.pending;return F===null?h.next=h:(h.next=F.next,F.next=h),E.pending=h,Mn(u,x)}return F=E.interleaved,F===null?(h.next=h,Ys(E)):(h.next=F.next,F.next=h),E.interleaved=h,Mn(u,x)}function Qs(u,h,x){if(h=h.updateQueue,h!==null&&(h=h.shared,(x&4194240)!==0)){var E=h.lanes;E&=u.pendingLanes,x|=E,h.lanes=x,Vo(u,x)}}function Bn(u,h){var x=u.updateQueue,E=u.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var F=null,q=null;if(x=x.firstBaseUpdate,x!==null){do{var ie={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};q===null?F=q=ie:q=q.next=ie,x=x.next}while(x!==null);q===null?F=q=h:q=q.next=h}else F=q=h;x={baseState:E.baseState,firstBaseUpdate:F,lastBaseUpdate:q,shared:E.shared,effects:E.effects},u.updateQueue=x;return}u=x.lastBaseUpdate,u===null?x.firstBaseUpdate=h:u.next=h,x.lastBaseUpdate=h}function Js(u,h,x,E){var F=u.updateQueue;Gi=!1;var q=F.firstBaseUpdate,ie=F.lastBaseUpdate,Pe=F.shared.pending;if(Pe!==null){F.shared.pending=null;var Oe=Pe,it=Oe.next;Oe.next=null,ie===null?q=it:ie.next=it,ie=Oe;var Ct=u.alternate;Ct!==null&&(Ct=Ct.updateQueue,Pe=Ct.lastBaseUpdate,Pe!==ie&&(Pe===null?Ct.firstBaseUpdate=it:Pe.next=it,Ct.lastBaseUpdate=Oe))}if(q!==null){var Rt=F.baseState;ie=0,Ct=it=Oe=null,Pe=q;do{var Nt=Pe.lane,Yt=Pe.eventTime;if((E&Nt)===Nt){Ct!==null&&(Ct=Ct.next={eventTime:Yt,lane:0,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null});e:{var or=u,fr=Pe;switch(Nt=h,Yt=x,fr.tag){case 1:if(or=fr.payload,typeof or=="function"){Rt=or.call(Yt,Rt,Nt);break e}Rt=or;break e;case 3:or.flags=or.flags&-65537|128;case 0:if(or=fr.payload,Nt=typeof or=="function"?or.call(Yt,Rt,Nt):or,Nt==null)break e;Rt=te({},Rt,Nt);break e;case 2:Gi=!0}}Pe.callback!==null&&Pe.lane!==0&&(u.flags|=64,Nt=F.effects,Nt===null?F.effects=[Pe]:Nt.push(Pe))}else Yt={eventTime:Yt,lane:Nt,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null},Ct===null?(it=Ct=Yt,Oe=Rt):Ct=Ct.next=Yt,ie|=Nt;if(Pe=Pe.next,Pe===null){if(Pe=F.shared.pending,Pe===null)break;Nt=Pe,Pe=Nt.next,Nt.next=null,F.lastBaseUpdate=Nt,F.shared.pending=null}}while(!0);if(Ct===null&&(Oe=Rt),F.baseState=Oe,F.firstBaseUpdate=it,F.lastBaseUpdate=Ct,h=F.shared.interleaved,h!==null){F=h;do ie|=F.lane,F=F.next;while(F!==h)}else q===null&&(F.shared.lanes=0);Xh|=ie,u.lanes=ie,u.memoizedState=Rt}}function Ao(u,h,x){if(u=h.effects,h.effects=null,u!==null)for(h=0;h<u.length;h++){var E=u[h],F=E.callback;if(F!==null){if(E.callback=null,E=x,typeof F!="function")throw Error(r(191,F));F.call(E)}}}var Xo={},Ss=Ko(Xo),Mi=Ko(Xo),Cc=Ko(Xo);function Ql(u){if(u===Xo)throw Error(r(174));return u}function yf(u,h){switch(Rn(Cc,h),Rn(Mi,u),Rn(Ss,Xo),u=h.nodeType,u){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:Pt(null,"");break;default:u=u===8?h.parentNode:h,h=u.namespaceURI||null,u=u.tagName,h=Pt(h,u)}An(Ss),Rn(Ss,h)}function _l(){An(Ss),An(Mi),An(Cc)}function tx(u){Ql(Cc.current);var h=Ql(Ss.current),x=Pt(h,u.type);h!==x&&(Rn(Mi,u),Rn(Ss,x))}function Am(u){Mi.current===u&&(An(Ss),An(Mi))}var ti=Ko(0);function Yo(u){for(var h=u;h!==null;){if(h.tag===13){var x=h.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Nm=[];function Cm(){for(var u=0;u<Nm.length;u++)Nm[u]._workInProgressVersionPrimary=null;Nm.length=0}var m0=j.ReactCurrentDispatcher,g0=j.ReactCurrentBatchConfig,bl=0,li=null,Ki=null,Bi=null,wf=!1,Jl=!1,_f=0,Oy=0;function cs(){throw Error(r(321))}function x0(u,h){if(h===null)return!1;for(var x=0;x<h.length&&x<u.length;x++)if(!os(u[x],h[x]))return!1;return!0}function Wh(u,h,x,E,F,q){if(bl=q,li=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,m0.current=u===null||u.memoizedState===null?lL:cL,u=x(E,F),Jl){q=0;do{if(Jl=!1,_f=0,25<=q)throw Error(r(301));q+=1,Bi=Ki=null,h.updateQueue=null,m0.current=uL,u=x(E,F)}while(Jl)}if(m0.current=ax,h=Ki!==null&&Ki.next!==null,bl=0,Bi=Ki=li=null,wf=!1,h)throw Error(r(300));return u}function El(){var u=_f!==0;return _f=0,u}function Qo(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bi===null?li.memoizedState=Bi=u:Bi=Bi.next=u,Bi}function fo(){if(Ki===null){var u=li.alternate;u=u!==null?u.memoizedState:null}else u=Ki.next;var h=Bi===null?li.memoizedState:Bi.next;if(h!==null)Bi=h,Ki=u;else{if(u===null)throw Error(r(310));Ki=u,u={memoizedState:Ki.memoizedState,baseState:Ki.baseState,baseQueue:Ki.baseQueue,queue:Ki.queue,next:null},Bi===null?li.memoizedState=Bi=u:Bi=Bi.next=u}return Bi}function Gh(u,h){return typeof h=="function"?h(u):h}function v0(u){var h=fo(),x=h.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=u;var E=Ki,F=E.baseQueue,q=x.pending;if(q!==null){if(F!==null){var ie=F.next;F.next=q.next,q.next=ie}E.baseQueue=F=q,x.pending=null}if(F!==null){q=F.next,E=E.baseState;var Pe=ie=null,Oe=null,it=q;do{var Ct=it.lane;if((bl&Ct)===Ct)Oe!==null&&(Oe=Oe.next={lane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),E=it.hasEagerState?it.eagerState:u(E,it.action);else{var Rt={lane:Ct,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null};Oe===null?(Pe=Oe=Rt,ie=E):Oe=Oe.next=Rt,li.lanes|=Ct,Xh|=Ct}it=it.next}while(it!==null&&it!==q);Oe===null?ie=E:Oe.next=Pe,os(E,h.memoizedState)||(No=!0),h.memoizedState=E,h.baseState=ie,h.baseQueue=Oe,x.lastRenderedState=E}if(u=x.interleaved,u!==null){F=u;do q=F.lane,li.lanes|=q,Xh|=q,F=F.next;while(F!==u)}else F===null&&(x.lanes=0);return[h.memoizedState,x.dispatch]}function Ic(u){var h=fo(),x=h.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=u;var E=x.dispatch,F=x.pending,q=h.memoizedState;if(F!==null){x.pending=null;var ie=F=F.next;do q=u(q,ie.action),ie=ie.next;while(ie!==F);os(q,h.memoizedState)||(No=!0),h.memoizedState=q,h.baseQueue===null&&(h.baseState=q),x.lastRenderedState=q}return[q,E]}function rx(){}function Im(u,h){var x=li,E=fo(),F=h(),q=!os(E.memoizedState,F);if(q&&(E.memoizedState=F,No=!0),E=E.queue,_0(ix.bind(null,x,E,u),[u]),E.getSnapshot!==h||q||Bi!==null&&Bi.memoizedState.tag&1){if(x.flags|=2048,ho(9,Pm.bind(null,x,E,F,h),void 0,null),Zs===null)throw Error(r(349));(bl&30)!==0||nx(x,h,F)}return F}function nx(u,h,x){u.flags|=16384,u={getSnapshot:h,value:x},h=li.updateQueue,h===null?(h={lastEffect:null,stores:null},li.updateQueue=h,h.stores=[u]):(x=h.stores,x===null?h.stores=[u]:x.push(u))}function Pm(u,h,x,E){h.value=x,h.getSnapshot=E,bf(h)&&y0(u)}function ix(u,h,x){return x(function(){bf(h)&&y0(u)})}function bf(u){var h=u.getSnapshot;u=u.value;try{var x=h();return!os(u,x)}catch{return!0}}function y0(u){var h=Mn(u,1);h!==null&&nc(h,u,1,-1)}function Kh(u){var h=Qo();return typeof u=="function"&&(u=u()),h.memoizedState=h.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gh,lastRenderedState:u},h.queue=u,u=u.dispatch=oL.bind(null,li,u),[h.memoizedState,u]}function ho(u,h,x,E){return u={tag:u,create:h,destroy:x,deps:E,next:null},h=li.updateQueue,h===null?(h={lastEffect:null,stores:null},li.updateQueue=h,h.lastEffect=u.next=u):(x=h.lastEffect,x===null?h.lastEffect=u.next=u:(E=x.next,x.next=u,u.next=E,h.lastEffect=u)),u}function Zl(){return fo().memoizedState}function Jo(u,h,x,E){var F=Qo();li.flags|=u,F.memoizedState=ho(1|h,x,void 0,E===void 0?null:E)}function Su(u,h,x,E){var F=fo();E=E===void 0?null:E;var q=void 0;if(Ki!==null){var ie=Ki.memoizedState;if(q=ie.destroy,E!==null&&x0(E,ie.deps)){F.memoizedState=ho(h,x,q,E);return}}li.flags|=u,F.memoizedState=ho(1|h,x,q,E)}function w0(u,h){return Jo(8390656,8,u,h)}function _0(u,h){return Su(2048,8,u,h)}function sx(u,h){return Su(4,2,u,h)}function b0(u,h){return Su(4,4,u,h)}function E0(u,h){if(typeof h=="function")return u=u(),h(u),function(){h(null)};if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function F3(u,h,x){return x=x!=null?x.concat([u]):null,Su(4,4,E0.bind(null,h,u),x)}function jy(){}function L3(u,h){var x=fo();h=h===void 0?null:h;var E=x.memoizedState;return E!==null&&h!==null&&x0(h,E[1])?E[0]:(x.memoizedState=[u,h],u)}function D3(u,h){var x=fo();h=h===void 0?null:h;var E=x.memoizedState;return E!==null&&h!==null&&x0(h,E[1])?E[0]:(u=u(),x.memoizedState=[u,h],u)}function O3(u,h,x){return(bl&21)===0?(u.baseState&&(u.baseState=!1,No=!0),u.memoizedState=x):(os(x,h)||(x=ql(),li.lanes|=x,Xh|=x,u.baseState=!0),h)}function sL(u,h){var x=Hr;Hr=x!==0&&4>x?x:4,u(!0);var E=g0.transition;g0.transition={};try{u(!1),h()}finally{Hr=x,g0.transition=E}}function j3(){return fo().memoizedState}function aL(u,h,x){var E=Tf(u);if(x={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null},M3(u))B3(h,x);else if(x=Fn(u,h,x,E),x!==null){var F=mo();nc(x,u,E,F),V3(x,h,E)}}function oL(u,h,x){var E=Tf(u),F={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null};if(M3(u))B3(h,F);else{var q=u.alternate;if(u.lanes===0&&(q===null||q.lanes===0)&&(q=h.lastRenderedReducer,q!==null))try{var ie=h.lastRenderedState,Pe=q(ie,x);if(F.hasEagerState=!0,F.eagerState=Pe,os(Pe,ie)){var Oe=h.interleaved;Oe===null?(F.next=F,Ys(h)):(F.next=Oe.next,Oe.next=F),h.interleaved=F;return}}catch{}finally{}x=Fn(u,h,F,E),x!==null&&(F=mo(),nc(x,u,E,F),V3(x,h,E))}}function M3(u){var h=u.alternate;return u===li||h!==null&&h===li}function B3(u,h){Jl=wf=!0;var x=u.pending;x===null?h.next=h:(h.next=x.next,x.next=h),u.pending=h}function V3(u,h,x){if((x&4194240)!==0){var E=h.lanes;E&=u.pendingLanes,x|=E,h.lanes=x,Vo(u,x)}}var ax={readContext:Ti,useCallback:cs,useContext:cs,useEffect:cs,useImperativeHandle:cs,useInsertionEffect:cs,useLayoutEffect:cs,useMemo:cs,useReducer:cs,useRef:cs,useState:cs,useDebugValue:cs,useDeferredValue:cs,useTransition:cs,useMutableSource:cs,useSyncExternalStore:cs,useId:cs,unstable_isNewReconciler:!1},lL={readContext:Ti,useCallback:function(u,h){return Qo().memoizedState=[u,h===void 0?null:h],u},useContext:Ti,useEffect:w0,useImperativeHandle:function(u,h,x){return x=x!=null?x.concat([u]):null,Jo(4194308,4,E0.bind(null,h,u),x)},useLayoutEffect:function(u,h){return Jo(4194308,4,u,h)},useInsertionEffect:function(u,h){return Jo(4,2,u,h)},useMemo:function(u,h){var x=Qo();return h=h===void 0?null:h,u=u(),x.memoizedState=[u,h],u},useReducer:function(u,h,x){var E=Qo();return h=x!==void 0?x(h):h,E.memoizedState=E.baseState=h,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:h},E.queue=u,u=u.dispatch=aL.bind(null,li,u),[E.memoizedState,u]},useRef:function(u){var h=Qo();return u={current:u},h.memoizedState=u},useState:Kh,useDebugValue:jy,useDeferredValue:function(u){return Qo().memoizedState=u},useTransition:function(){var u=Kh(!1),h=u[0];return u=sL.bind(null,u[1]),Qo().memoizedState=u,[h,u]},useMutableSource:function(){},useSyncExternalStore:function(u,h,x){var E=li,F=Qo();if(xt){if(x===void 0)throw Error(r(407));x=x()}else{if(x=h(),Zs===null)throw Error(r(349));(bl&30)!==0||nx(E,h,x)}F.memoizedState=x;var q={value:x,getSnapshot:h};return F.queue=q,w0(ix.bind(null,E,q,u),[u]),E.flags|=2048,ho(9,Pm.bind(null,E,q,x,h),void 0,null),x},useId:function(){var u=Qo(),h=Zs.identifierPrefix;if(xt){var x=Se,E=Ge;x=(E&~(1<<32-En(E)-1)).toString(32)+x,h=":"+h+"R"+x,x=_f++,0<x&&(h+="H"+x.toString(32)),h+=":"}else x=Oy++,h=":"+h+"r"+x.toString(32)+":";return u.memoizedState=h},unstable_isNewReconciler:!1},cL={readContext:Ti,useCallback:L3,useContext:Ti,useEffect:_0,useImperativeHandle:F3,useInsertionEffect:sx,useLayoutEffect:b0,useMemo:D3,useReducer:v0,useRef:Zl,useState:function(){return v0(Gh)},useDebugValue:jy,useDeferredValue:function(u){var h=fo();return O3(h,Ki.memoizedState,u)},useTransition:function(){var u=v0(Gh)[0],h=fo().memoizedState;return[u,h]},useMutableSource:rx,useSyncExternalStore:Im,useId:j3,unstable_isNewReconciler:!1},uL={readContext:Ti,useCallback:L3,useContext:Ti,useEffect:_0,useImperativeHandle:F3,useInsertionEffect:sx,useLayoutEffect:b0,useMemo:D3,useReducer:Ic,useRef:Zl,useState:function(){return Ic(Gh)},useDebugValue:jy,useDeferredValue:function(u){var h=fo();return Ki===null?h.memoizedState=u:O3(h,Ki.memoizedState,u)},useTransition:function(){var u=Ic(Gh)[0],h=fo().memoizedState;return[u,h]},useMutableSource:rx,useSyncExternalStore:Im,useId:j3,unstable_isNewReconciler:!1};function ec(u,h){if(u&&u.defaultProps){h=te({},h),u=u.defaultProps;for(var x in u)h[x]===void 0&&(h[x]=u[x]);return h}return h}function My(u,h,x,E){h=u.memoizedState,x=x(E,h),x=x==null?h:te({},h,x),u.memoizedState=x,u.lanes===0&&(u.updateQueue.baseState=x)}var ox={isMounted:function(u){return(u=u._reactInternals)?Ne(u)===u:!1},enqueueSetState:function(u,h,x){u=u._reactInternals;var E=mo(),F=Tf(u),q=Oi(E,F);q.payload=h,x!=null&&(q.callback=x),h=ji(u,q,F),h!==null&&(nc(h,u,F,E),Qs(h,u,F))},enqueueReplaceState:function(u,h,x){u=u._reactInternals;var E=mo(),F=Tf(u),q=Oi(E,F);q.tag=1,q.payload=h,x!=null&&(q.callback=x),h=ji(u,q,F),h!==null&&(nc(h,u,F,E),Qs(h,u,F))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var x=mo(),E=Tf(u),F=Oi(x,E);F.tag=2,h!=null&&(F.callback=h),h=ji(u,F,E),h!==null&&(nc(h,u,E,x),Qs(h,u,E))}};function U3(u,h,x,E,F,q,ie){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(E,q,ie):h.prototype&&h.prototype.isPureReactComponent?!vl(x,E)||!vl(F,q):!0}function z3(u,h,x){var E=!1,F=Nc,q=h.contextType;return typeof q=="object"&&q!==null?q=Ti(q):(F=za(h)?bu:Bs.current,E=h.contextTypes,q=(E=E!=null)?vf(u,F):Nc),h=new h(x,q),u.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=ox,u.stateNode=h,h._reactInternals=u,E&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=F,u.__reactInternalMemoizedMaskedChildContext=q),h}function $3(u,h,x,E){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(x,E),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(x,E),h.state!==u&&ox.enqueueReplaceState(h,h.state,null)}function By(u,h,x,E){var F=u.stateNode;F.props=x,F.state=u.memoizedState,F.refs={},Vs(u);var q=h.contextType;typeof q=="object"&&q!==null?F.context=Ti(q):(q=za(h)?bu:Bs.current,F.context=vf(u,q)),F.state=u.memoizedState,q=h.getDerivedStateFromProps,typeof q=="function"&&(My(u,h,q,x),F.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(h=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),h!==F.state&&ox.enqueueReplaceState(F,F.state,null),Js(u,x,F,E),F.state=u.memoizedState),typeof F.componentDidMount=="function"&&(u.flags|=4194308)}function S0(u,h){try{var x="",E=h;do x+=Y(E),E=E.return;while(E);var F=x}catch(q){F=`
Error generating stack: `+q.message+`
`+q.stack}return{value:u,source:h,stack:F,digest:null}}function Vy(u,h,x){return{value:u,source:null,stack:x??null,digest:h??null}}function Uy(u,h){try{console.error(h.value)}catch(x){setTimeout(function(){throw x})}}var fL=typeof WeakMap=="function"?WeakMap:Map;function q3(u,h,x){x=Oi(-1,x),x.tag=3,x.payload={element:null};var E=h.value;return x.callback=function(){px||(px=!0,rw=E),Uy(u,h)},x}function H3(u,h,x){x=Oi(-1,x),x.tag=3;var E=u.type.getDerivedStateFromError;if(typeof E=="function"){var F=h.value;x.payload=function(){return E(F)},x.callback=function(){Uy(u,h)}}var q=u.stateNode;return q!==null&&typeof q.componentDidCatch=="function"&&(x.callback=function(){Uy(u,h),typeof E!="function"&&(Sf===null?Sf=new Set([this]):Sf.add(this));var ie=h.stack;this.componentDidCatch(h.value,{componentStack:ie!==null?ie:""})}),x}function W3(u,h,x){var E=u.pingCache;if(E===null){E=u.pingCache=new fL;var F=new Set;E.set(h,F)}else F=E.get(h),F===void 0&&(F=new Set,E.set(h,F));F.has(x)||(F.add(x),u=kL.bind(null,u,h,x),h.then(u,u))}function G3(u){do{var h;if((h=u.tag===13)&&(h=u.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return u;u=u.return}while(u!==null);return null}function K3(u,h,x,E,F){return(u.mode&1)===0?(u===h?u.flags|=65536:(u.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(h=Oi(-1,1),h.tag=2,ji(x,h,1))),x.lanes|=1),u):(u.flags|=65536,u.lanes=F,u)}var hL=j.ReactCurrentOwner,No=!1;function po(u,h,x,E){h.child=u===null?hi(h,null,x,E):Wi(h,u.child,x,E)}function X3(u,h,x,E,F){x=x.render;var q=h.ref;return ki(h,F),E=Wh(u,h,x,E,q,F),x=El(),u!==null&&!No?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~F,ku(u,h,F)):(xt&&x&&pt(h),h.flags|=1,po(u,h,E,F),h.child)}function Y3(u,h,x,E,F){if(u===null){var q=x.type;return typeof q=="function"&&!cw(q)&&q.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(h.tag=15,h.type=q,Q3(u,h,q,E,F)):(u=wx(x.type,null,E,h,h.mode,F),u.ref=h.ref,u.return=h,h.child=u)}if(q=u.child,(u.lanes&F)===0){var ie=q.memoizedProps;if(x=x.compare,x=x!==null?x:vl,x(ie,E)&&u.ref===h.ref)return ku(u,h,F)}return h.flags|=1,u=Nf(q,E),u.ref=h.ref,u.return=h,h.child=u}function Q3(u,h,x,E,F){if(u!==null){var q=u.memoizedProps;if(vl(q,E)&&u.ref===h.ref)if(No=!1,h.pendingProps=E=q,(u.lanes&F)!==0)(u.flags&131072)!==0&&(No=!0);else return h.lanes=u.lanes,ku(u,h,F)}return zy(u,h,x,E,F)}function J3(u,h,x){var E=h.pendingProps,F=E.children,q=u!==null?u.memoizedState:null;if(E.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rn(T0,Zo),Zo|=x;else{if((x&1073741824)===0)return u=q!==null?q.baseLanes|x:x,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:u,cachePool:null,transitions:null},h.updateQueue=null,Rn(T0,Zo),Zo|=u,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=q!==null?q.baseLanes:x,Rn(T0,Zo),Zo|=E}else q!==null?(E=q.baseLanes|x,h.memoizedState=null):E=x,Rn(T0,Zo),Zo|=E;return po(u,h,F,x),h.child}function Z3(u,h){var x=h.ref;(u===null&&x!==null||u!==null&&u.ref!==x)&&(h.flags|=512,h.flags|=2097152)}function zy(u,h,x,E,F){var q=za(x)?bu:Bs.current;return q=vf(h,q),ki(h,F),x=Wh(u,h,x,E,q,F),E=El(),u!==null&&!No?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~F,ku(u,h,F)):(xt&&E&&pt(h),h.flags|=1,po(u,h,x,F),h.child)}function eE(u,h,x,E,F){if(za(x)){var q=!0;Eu(h)}else q=!1;if(ki(h,F),h.stateNode===null)cx(u,h),z3(h,x,E),By(h,x,E,F),E=!0;else if(u===null){var ie=h.stateNode,Pe=h.memoizedProps;ie.props=Pe;var Oe=ie.context,it=x.contextType;typeof it=="object"&&it!==null?it=Ti(it):(it=za(x)?bu:Bs.current,it=vf(h,it));var Ct=x.getDerivedStateFromProps,Rt=typeof Ct=="function"||typeof ie.getSnapshotBeforeUpdate=="function";Rt||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(Pe!==E||Oe!==it)&&$3(h,ie,E,it),Gi=!1;var Nt=h.memoizedState;ie.state=Nt,Js(h,E,ie,F),Oe=h.memoizedState,Pe!==E||Nt!==Oe||Ua.current||Gi?(typeof Ct=="function"&&(My(h,x,Ct,E),Oe=h.memoizedState),(Pe=Gi||U3(h,x,Pe,E,Nt,Oe,it))?(Rt||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(h.flags|=4194308)):(typeof ie.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=E,h.memoizedState=Oe),ie.props=E,ie.state=Oe,ie.context=it,E=Pe):(typeof ie.componentDidMount=="function"&&(h.flags|=4194308),E=!1)}else{ie=h.stateNode,$a(u,h),Pe=h.memoizedProps,it=h.type===h.elementType?Pe:ec(h.type,Pe),ie.props=it,Rt=h.pendingProps,Nt=ie.context,Oe=x.contextType,typeof Oe=="object"&&Oe!==null?Oe=Ti(Oe):(Oe=za(x)?bu:Bs.current,Oe=vf(h,Oe));var Yt=x.getDerivedStateFromProps;(Ct=typeof Yt=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(Pe!==Rt||Nt!==Oe)&&$3(h,ie,E,Oe),Gi=!1,Nt=h.memoizedState,ie.state=Nt,Js(h,E,ie,F);var or=h.memoizedState;Pe!==Rt||Nt!==or||Ua.current||Gi?(typeof Yt=="function"&&(My(h,x,Yt,E),or=h.memoizedState),(it=Gi||U3(h,x,it,E,Nt,or,Oe)||!1)?(Ct||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(E,or,Oe),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(E,or,Oe)),typeof ie.componentDidUpdate=="function"&&(h.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof ie.componentDidUpdate!="function"||Pe===u.memoizedProps&&Nt===u.memoizedState||(h.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||Pe===u.memoizedProps&&Nt===u.memoizedState||(h.flags|=1024),h.memoizedProps=E,h.memoizedState=or),ie.props=E,ie.state=or,ie.context=Oe,E=it):(typeof ie.componentDidUpdate!="function"||Pe===u.memoizedProps&&Nt===u.memoizedState||(h.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||Pe===u.memoizedProps&&Nt===u.memoizedState||(h.flags|=1024),E=!1)}return $y(u,h,x,E,q,F)}function $y(u,h,x,E,F,q){Z3(u,h);var ie=(h.flags&128)!==0;if(!E&&!ie)return F&&ex(h,x,!1),ku(u,h,q);E=h.stateNode,hL.current=h;var Pe=ie&&typeof x.getDerivedStateFromError!="function"?null:E.render();return h.flags|=1,u!==null&&ie?(h.child=Wi(h,u.child,null,q),h.child=Wi(h,null,Pe,q)):po(u,h,Pe,q),h.memoizedState=E.state,F&&ex(h,x,!0),h.child}function tE(u){var h=u.stateNode;h.pendingContext?Zg(u,h.pendingContext,h.pendingContext!==h.context):h.context&&Zg(u,h.context,!1),yf(u,h.containerInfo)}function rE(u,h,x,E,F){return tr(),zt(F),h.flags|=256,po(u,h,x,E),h.child}var qy={dehydrated:null,treeContext:null,retryLane:0};function Hy(u){return{baseLanes:u,cachePool:null,transitions:null}}function nE(u,h,x){var E=h.pendingProps,F=ti.current,q=!1,ie=(h.flags&128)!==0,Pe;if((Pe=ie)||(Pe=u!==null&&u.memoizedState===null?!1:(F&2)!==0),Pe?(q=!0,h.flags&=-129):(u===null||u.memoizedState!==null)&&(F|=1),Rn(ti,F&1),u===null)return sr(h),u=h.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((h.mode&1)===0?h.lanes=1:u.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(ie=E.children,u=E.fallback,q?(E=h.mode,q=h.child,ie={mode:"hidden",children:ie},(E&1)===0&&q!==null?(q.childLanes=0,q.pendingProps=ie):q=_x(ie,E,0,null),u=Zh(u,E,x,null),q.return=h,u.return=h,q.sibling=u,h.child=q,h.child.memoizedState=Hy(x),h.memoizedState=qy,u):Wy(h,ie));if(F=u.memoizedState,F!==null&&(Pe=F.dehydrated,Pe!==null))return dL(u,h,ie,E,Pe,F,x);if(q){q=E.fallback,ie=h.mode,F=u.child,Pe=F.sibling;var Oe={mode:"hidden",children:E.children};return(ie&1)===0&&h.child!==F?(E=h.child,E.childLanes=0,E.pendingProps=Oe,h.deletions=null):(E=Nf(F,Oe),E.subtreeFlags=F.subtreeFlags&14680064),Pe!==null?q=Nf(Pe,q):(q=Zh(q,ie,x,null),q.flags|=2),q.return=h,E.return=h,E.sibling=q,h.child=E,E=q,q=h.child,ie=u.child.memoizedState,ie=ie===null?Hy(x):{baseLanes:ie.baseLanes|x,cachePool:null,transitions:ie.transitions},q.memoizedState=ie,q.childLanes=u.childLanes&~x,h.memoizedState=qy,E}return q=u.child,u=q.sibling,E=Nf(q,{mode:"visible",children:E.children}),(h.mode&1)===0&&(E.lanes=x),E.return=h,E.sibling=null,u!==null&&(x=h.deletions,x===null?(h.deletions=[u],h.flags|=16):x.push(u)),h.child=E,h.memoizedState=null,E}function Wy(u,h){return h=_x({mode:"visible",children:h},u.mode,0,null),h.return=u,u.child=h}function lx(u,h,x,E){return E!==null&&zt(E),Wi(h,u.child,null,x),u=Wy(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function dL(u,h,x,E,F,q,ie){if(x)return h.flags&256?(h.flags&=-257,E=Vy(Error(r(422))),lx(u,h,ie,E)):h.memoizedState!==null?(h.child=u.child,h.flags|=128,null):(q=E.fallback,F=h.mode,E=_x({mode:"visible",children:E.children},F,0,null),q=Zh(q,F,ie,null),q.flags|=2,E.return=h,q.return=h,E.sibling=q,h.child=E,(h.mode&1)!==0&&Wi(h,u.child,null,ie),h.child.memoizedState=Hy(ie),h.memoizedState=qy,q);if((h.mode&1)===0)return lx(u,h,ie,null);if(F.data==="$!"){if(E=F.nextSibling&&F.nextSibling.dataset,E)var Pe=E.dgst;return E=Pe,q=Error(r(419)),E=Vy(q,E,void 0),lx(u,h,ie,E)}if(Pe=(ie&u.childLanes)!==0,No||Pe){if(E=Zs,E!==null){switch(ie&-ie){case 4:F=2;break;case 16:F=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:F=32;break;case 536870912:F=268435456;break;default:F=0}F=(F&(E.suspendedLanes|ie))!==0?0:F,F!==0&&F!==q.retryLane&&(q.retryLane=F,Mn(u,F),nc(E,u,F,-1))}return lw(),E=Vy(Error(r(421))),lx(u,h,ie,E)}return F.data==="$?"?(h.flags|=128,h.child=u.child,h=TL.bind(null,u),F._reactRetry=h,null):(u=q.treeContext,dt=xa(F.nextSibling),ct=h,xt=!0,vt=null,u!==null&&(ge[be++]=Ge,ge[be++]=Se,ge[be++]=De,Ge=u.id,Se=u.overflow,De=h),h=Wy(h,E.children),h.flags|=4096,h)}function iE(u,h,x){u.lanes|=h;var E=u.alternate;E!==null&&(E.lanes|=h),vn(u.return,h,x)}function Gy(u,h,x,E,F){var q=u.memoizedState;q===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:F}:(q.isBackwards=h,q.rendering=null,q.renderingStartTime=0,q.last=E,q.tail=x,q.tailMode=F)}function sE(u,h,x){var E=h.pendingProps,F=E.revealOrder,q=E.tail;if(po(u,h,E.children,x),E=ti.current,(E&2)!==0)E=E&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&iE(u,x,h);else if(u.tag===19)iE(u,x,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}E&=1}if(Rn(ti,E),(h.mode&1)===0)h.memoizedState=null;else switch(F){case"forwards":for(x=h.child,F=null;x!==null;)u=x.alternate,u!==null&&Yo(u)===null&&(F=x),x=x.sibling;x=F,x===null?(F=h.child,h.child=null):(F=x.sibling,x.sibling=null),Gy(h,!1,F,x,q);break;case"backwards":for(x=null,F=h.child,h.child=null;F!==null;){if(u=F.alternate,u!==null&&Yo(u)===null){h.child=F;break}u=F.sibling,F.sibling=x,x=F,F=u}Gy(h,!0,x,null,q);break;case"together":Gy(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function cx(u,h){(h.mode&1)===0&&u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2)}function ku(u,h,x){if(u!==null&&(h.dependencies=u.dependencies),Xh|=h.lanes,(x&h.childLanes)===0)return null;if(u!==null&&h.child!==u.child)throw Error(r(153));if(h.child!==null){for(u=h.child,x=Nf(u,u.pendingProps),h.child=x,x.return=h;u.sibling!==null;)u=u.sibling,x=x.sibling=Nf(u,u.pendingProps),x.return=h;x.sibling=null}return h.child}function pL(u,h,x){switch(h.tag){case 3:tE(h),tr();break;case 5:tx(h);break;case 1:za(h.type)&&Eu(h);break;case 4:yf(h,h.stateNode.containerInfo);break;case 10:var E=h.type._context,F=h.memoizedProps.value;Rn(ls,E._currentValue),E._currentValue=F;break;case 13:if(E=h.memoizedState,E!==null)return E.dehydrated!==null?(Rn(ti,ti.current&1),h.flags|=128,null):(x&h.child.childLanes)!==0?nE(u,h,x):(Rn(ti,ti.current&1),u=ku(u,h,x),u!==null?u.sibling:null);Rn(ti,ti.current&1);break;case 19:if(E=(x&h.childLanes)!==0,(u.flags&128)!==0){if(E)return sE(u,h,x);h.flags|=128}if(F=h.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),Rn(ti,ti.current),E)break;return null;case 22:case 23:return h.lanes=0,J3(u,h,x)}return ku(u,h,x)}var aE,Ky,oE,lE;aE=function(u,h){for(var x=h.child;x!==null;){if(x.tag===5||x.tag===6)u.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Ky=function(){},oE=function(u,h,x,E){var F=u.memoizedProps;if(F!==E){u=h.stateNode,Ql(Ss.current);var q=null;switch(x){case"input":F=Re(u,F),E=Re(u,E),q=[];break;case"select":F=te({},F,{value:void 0}),E=te({},E,{value:void 0}),q=[];break;case"textarea":F=Ie(u,F),E=Ie(u,E),q=[];break;default:typeof F.onClick!="function"&&typeof E.onClick=="function"&&(u.onclick=mf)}rn(x,E);var ie;x=null;for(it in F)if(!E.hasOwnProperty(it)&&F.hasOwnProperty(it)&&F[it]!=null)if(it==="style"){var Pe=F[it];for(ie in Pe)Pe.hasOwnProperty(ie)&&(x||(x={}),x[ie]="")}else it!=="dangerouslySetInnerHTML"&&it!=="children"&&it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&it!=="autoFocus"&&(i.hasOwnProperty(it)?q||(q=[]):(q=q||[]).push(it,null));for(it in E){var Oe=E[it];if(Pe=F?.[it],E.hasOwnProperty(it)&&Oe!==Pe&&(Oe!=null||Pe!=null))if(it==="style")if(Pe){for(ie in Pe)!Pe.hasOwnProperty(ie)||Oe&&Oe.hasOwnProperty(ie)||(x||(x={}),x[ie]="");for(ie in Oe)Oe.hasOwnProperty(ie)&&Pe[ie]!==Oe[ie]&&(x||(x={}),x[ie]=Oe[ie])}else x||(q||(q=[]),q.push(it,x)),x=Oe;else it==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Pe=Pe?Pe.__html:void 0,Oe!=null&&Pe!==Oe&&(q=q||[]).push(it,Oe)):it==="children"?typeof Oe!="string"&&typeof Oe!="number"||(q=q||[]).push(it,""+Oe):it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&(i.hasOwnProperty(it)?(Oe!=null&&it==="onScroll"&&On("scroll",u),q||Pe===Oe||(q=[])):(q=q||[]).push(it,Oe))}x&&(q=q||[]).push("style",x);var it=q;(h.updateQueue=it)&&(h.flags|=4)}},lE=function(u,h,x,E){x!==E&&(h.flags|=4)};function Rm(u,h){if(!xt)switch(u.tailMode){case"hidden":h=u.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?u.tail=null:x.sibling=null;break;case"collapsed":x=u.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:E.sibling=null}}function qa(u){var h=u.alternate!==null&&u.alternate.child===u.child,x=0,E=0;if(h)for(var F=u.child;F!==null;)x|=F.lanes|F.childLanes,E|=F.subtreeFlags&14680064,E|=F.flags&14680064,F.return=u,F=F.sibling;else for(F=u.child;F!==null;)x|=F.lanes|F.childLanes,E|=F.subtreeFlags,E|=F.flags,F.return=u,F=F.sibling;return u.subtreeFlags|=E,u.childLanes=x,h}function mL(u,h,x){var E=h.pendingProps;switch(Qe(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qa(h),null;case 1:return za(h.type)&&p0(),qa(h),null;case 3:return E=h.stateNode,_l(),An(Ua),An(Bs),Cm(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(u===null||u.child===null)&&(Si(h)?h.flags|=4:u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,vt!==null&&(sw(vt),vt=null))),Ky(u,h),qa(h),null;case 5:Am(h);var F=Ql(Cc.current);if(x=h.type,u!==null&&h.stateNode!=null)oE(u,h,x,E,F),u.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!E){if(h.stateNode===null)throw Error(r(166));return qa(h),null}if(u=Ql(Ss.current),Si(h)){E=h.stateNode,x=h.type;var q=h.memoizedProps;switch(E[wl]=h,E[gf]=q,u=(h.mode&1)!==0,x){case"dialog":On("cancel",E),On("close",E);break;case"iframe":case"object":case"embed":On("load",E);break;case"video":case"audio":for(F=0;F<Tc.length;F++)On(Tc[F],E);break;case"source":On("error",E);break;case"img":case"image":case"link":On("error",E),On("load",E);break;case"details":On("toggle",E);break;case"input":fe(E,q),On("invalid",E);break;case"select":E._wrapperState={wasMultiple:!!q.multiple},On("invalid",E);break;case"textarea":Be(E,q),On("invalid",E)}rn(x,q),F=null;for(var ie in q)if(q.hasOwnProperty(ie)){var Pe=q[ie];ie==="children"?typeof Pe=="string"?E.textContent!==Pe&&(q.suppressHydrationWarning!==!0&&d0(E.textContent,Pe,u),F=["children",Pe]):typeof Pe=="number"&&E.textContent!==""+Pe&&(q.suppressHydrationWarning!==!0&&d0(E.textContent,Pe,u),F=["children",""+Pe]):i.hasOwnProperty(ie)&&Pe!=null&&ie==="onScroll"&&On("scroll",E)}switch(x){case"input":Fe(E),lt(E,q,!0);break;case"textarea":Fe(E),ot(E);break;case"select":case"option":break;default:typeof q.onClick=="function"&&(E.onclick=mf)}E=F,h.updateQueue=E,E!==null&&(h.flags|=4)}else{ie=F.nodeType===9?F:F.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=ht(x)),u==="http://www.w3.org/1999/xhtml"?x==="script"?(u=ie.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof E.is=="string"?u=ie.createElement(x,{is:E.is}):(u=ie.createElement(x),x==="select"&&(ie=u,E.multiple?ie.multiple=!0:E.size&&(ie.size=E.size))):u=ie.createElementNS(u,x),u[wl]=h,u[gf]=E,aE(u,h,!1,!1),h.stateNode=u;e:{switch(ie=Me(x,E),x){case"dialog":On("cancel",u),On("close",u),F=E;break;case"iframe":case"object":case"embed":On("load",u),F=E;break;case"video":case"audio":for(F=0;F<Tc.length;F++)On(Tc[F],u);F=E;break;case"source":On("error",u),F=E;break;case"img":case"image":case"link":On("error",u),On("load",u),F=E;break;case"details":On("toggle",u),F=E;break;case"input":fe(u,E),F=Re(u,E),On("invalid",u);break;case"option":F=E;break;case"select":u._wrapperState={wasMultiple:!!E.multiple},F=te({},E,{value:void 0}),On("invalid",u);break;case"textarea":Be(u,E),F=Ie(u,E),On("invalid",u);break;default:F=E}rn(x,F),Pe=F;for(q in Pe)if(Pe.hasOwnProperty(q)){var Oe=Pe[q];q==="style"?qt(u,Oe):q==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Oe!=null&&jt(u,Oe)):q==="children"?typeof Oe=="string"?(x!=="textarea"||Oe!=="")&&wt(u,Oe):typeof Oe=="number"&&wt(u,""+Oe):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(i.hasOwnProperty(q)?Oe!=null&&q==="onScroll"&&On("scroll",u):Oe!=null&&C(u,q,Oe,ie))}switch(x){case"input":Fe(u),lt(u,E,!1);break;case"textarea":Fe(u),ot(u);break;case"option":E.value!=null&&u.setAttribute("value",""+he(E.value));break;case"select":u.multiple=!!E.multiple,q=E.value,q!=null?ft(u,!!E.multiple,q,!1):E.defaultValue!=null&&ft(u,!!E.multiple,E.defaultValue,!0);break;default:typeof F.onClick=="function"&&(u.onclick=mf)}switch(x){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}}E&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return qa(h),null;case 6:if(u&&h.stateNode!=null)lE(u,h,u.memoizedProps,E);else{if(typeof E!="string"&&h.stateNode===null)throw Error(r(166));if(x=Ql(Cc.current),Ql(Ss.current),Si(h)){if(E=h.stateNode,x=h.memoizedProps,E[wl]=h,(q=E.nodeValue!==x)&&(u=ct,u!==null))switch(u.tag){case 3:d0(E.nodeValue,x,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&d0(E.nodeValue,x,(u.mode&1)!==0)}q&&(h.flags|=4)}else E=(x.nodeType===9?x:x.ownerDocument).createTextNode(E),E[wl]=h,h.stateNode=E}return qa(h),null;case 13:if(An(ti),E=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(xt&&dt!==null&&(h.mode&1)!==0&&(h.flags&128)===0)jr(),tr(),h.flags|=98560,q=!1;else if(q=Si(h),E!==null&&E.dehydrated!==null){if(u===null){if(!q)throw Error(r(318));if(q=h.memoizedState,q=q!==null?q.dehydrated:null,!q)throw Error(r(317));q[wl]=h}else tr(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;qa(h),q=!1}else vt!==null&&(sw(vt),vt=null),q=!0;if(!q)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=x,h):(E=E!==null,E!==(u!==null&&u.memoizedState!==null)&&E&&(h.child.flags|=8192,(h.mode&1)!==0&&(u===null||(ti.current&1)!==0?Us===0&&(Us=3):lw())),h.updateQueue!==null&&(h.flags|=4),qa(h),null);case 4:return _l(),Ky(u,h),u===null&&vu(h.stateNode.containerInfo),qa(h),null;case 10:return oi(h.type._context),qa(h),null;case 17:return za(h.type)&&p0(),qa(h),null;case 19:if(An(ti),q=h.memoizedState,q===null)return qa(h),null;if(E=(h.flags&128)!==0,ie=q.rendering,ie===null)if(E)Rm(q,!1);else{if(Us!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(ie=Yo(u),ie!==null){for(h.flags|=128,Rm(q,!1),E=ie.updateQueue,E!==null&&(h.updateQueue=E,h.flags|=4),h.subtreeFlags=0,E=x,x=h.child;x!==null;)q=x,u=E,q.flags&=14680066,ie=q.alternate,ie===null?(q.childLanes=0,q.lanes=u,q.child=null,q.subtreeFlags=0,q.memoizedProps=null,q.memoizedState=null,q.updateQueue=null,q.dependencies=null,q.stateNode=null):(q.childLanes=ie.childLanes,q.lanes=ie.lanes,q.child=ie.child,q.subtreeFlags=0,q.deletions=null,q.memoizedProps=ie.memoizedProps,q.memoizedState=ie.memoizedState,q.updateQueue=ie.updateQueue,q.type=ie.type,u=ie.dependencies,q.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),x=x.sibling;return Rn(ti,ti.current&1|2),h.child}u=u.sibling}q.tail!==null&&Tt()>A0&&(h.flags|=128,E=!0,Rm(q,!1),h.lanes=4194304)}else{if(!E)if(u=Yo(ie),u!==null){if(h.flags|=128,E=!0,x=u.updateQueue,x!==null&&(h.updateQueue=x,h.flags|=4),Rm(q,!0),q.tail===null&&q.tailMode==="hidden"&&!ie.alternate&&!xt)return qa(h),null}else 2*Tt()-q.renderingStartTime>A0&&x!==1073741824&&(h.flags|=128,E=!0,Rm(q,!1),h.lanes=4194304);q.isBackwards?(ie.sibling=h.child,h.child=ie):(x=q.last,x!==null?x.sibling=ie:h.child=ie,q.last=ie)}return q.tail!==null?(h=q.tail,q.rendering=h,q.tail=h.sibling,q.renderingStartTime=Tt(),h.sibling=null,x=ti.current,Rn(ti,E?x&1|2:x&1),h):(qa(h),null);case 22:case 23:return ow(),E=h.memoizedState!==null,u!==null&&u.memoizedState!==null!==E&&(h.flags|=8192),E&&(h.mode&1)!==0?(Zo&1073741824)!==0&&(qa(h),h.subtreeFlags&6&&(h.flags|=8192)):qa(h),null;case 24:return null;case 25:return null}throw Error(r(156,h.tag))}function gL(u,h){switch(Qe(h),h.tag){case 1:return za(h.type)&&p0(),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return _l(),An(Ua),An(Bs),Cm(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 5:return Am(h),null;case 13:if(An(ti),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(r(340));tr()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return An(ti),null;case 4:return _l(),null;case 10:return oi(h.type._context),null;case 22:case 23:return ow(),null;case 24:return null;default:return null}}var ux=!1,Ha=!1,xL=typeof WeakSet=="function"?WeakSet:Set,nr=null;function k0(u,h){var x=u.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(E){Xi(u,h,E)}else x.current=null}function Xy(u,h,x){try{x()}catch(E){Xi(u,h,E)}}var cE=!1;function vL(u,h){if($h=dl,u=dm(),o0(u)){if("selectionStart"in u)var x={start:u.selectionStart,end:u.selectionEnd};else e:{x=(x=u.ownerDocument)&&x.defaultView||window;var E=x.getSelection&&x.getSelection();if(E&&E.rangeCount!==0){x=E.anchorNode;var F=E.anchorOffset,q=E.focusNode;E=E.focusOffset;try{x.nodeType,q.nodeType}catch{x=null;break e}var ie=0,Pe=-1,Oe=-1,it=0,Ct=0,Rt=u,Nt=null;t:for(;;){for(var Yt;Rt!==x||F!==0&&Rt.nodeType!==3||(Pe=ie+F),Rt!==q||E!==0&&Rt.nodeType!==3||(Oe=ie+E),Rt.nodeType===3&&(ie+=Rt.nodeValue.length),(Yt=Rt.firstChild)!==null;)Nt=Rt,Rt=Yt;for(;;){if(Rt===u)break t;if(Nt===x&&++it===F&&(Pe=ie),Nt===q&&++Ct===E&&(Oe=ie),(Yt=Rt.nextSibling)!==null)break;Rt=Nt,Nt=Rt.parentNode}Rt=Yt}x=Pe===-1||Oe===-1?null:{start:Pe,end:Oe}}else x=null}x=x||{start:0,end:0}}else x=null;for(wu={focusedElem:u,selectionRange:x},dl=!1,nr=h;nr!==null;)if(h=nr,u=h.child,(h.subtreeFlags&1028)!==0&&u!==null)u.return=h,nr=u;else for(;nr!==null;){h=nr;try{var or=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(or!==null){var fr=or.memoizedProps,us=or.memoizedState,Ye=h.stateNode,Ue=Ye.getSnapshotBeforeUpdate(h.elementType===h.type?fr:ec(h.type,fr),us);Ye.__reactInternalSnapshotBeforeUpdate=Ue}break;case 3:var et=h.stateNode.containerInfo;et.nodeType===1?et.textContent="":et.nodeType===9&&et.documentElement&&et.removeChild(et.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ot){Xi(h,h.return,Ot)}if(u=h.sibling,u!==null){u.return=h.return,nr=u;break}nr=h.return}return or=cE,cE=!1,or}function Fm(u,h,x){var E=h.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var F=E=E.next;do{if((F.tag&u)===u){var q=F.destroy;F.destroy=void 0,q!==void 0&&Xy(h,x,q)}F=F.next}while(F!==E)}}function fx(u,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var x=h=h.next;do{if((x.tag&u)===u){var E=x.create;x.destroy=E()}x=x.next}while(x!==h)}}function Yy(u){var h=u.ref;if(h!==null){var x=u.stateNode;switch(u.tag){case 5:u=x;break;default:u=x}typeof h=="function"?h(u):h.current=u}}function uE(u){var h=u.alternate;h!==null&&(u.alternate=null,uE(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&(delete h[wl],delete h[gf],delete h[Va],delete h[Ly],delete h[Dy])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function fE(u){return u.tag===5||u.tag===3||u.tag===4}function hE(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||fE(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Qy(u,h,x){var E=u.tag;if(E===5||E===6)u=u.stateNode,h?x.nodeType===8?x.parentNode.insertBefore(u,h):x.insertBefore(u,h):(x.nodeType===8?(h=x.parentNode,h.insertBefore(u,x)):(h=x,h.appendChild(u)),x=x._reactRootContainer,x!=null||h.onclick!==null||(h.onclick=mf));else if(E!==4&&(u=u.child,u!==null))for(Qy(u,h,x),u=u.sibling;u!==null;)Qy(u,h,x),u=u.sibling}function Jy(u,h,x){var E=u.tag;if(E===5||E===6)u=u.stateNode,h?x.insertBefore(u,h):x.appendChild(u);else if(E!==4&&(u=u.child,u!==null))for(Jy(u,h,x),u=u.sibling;u!==null;)Jy(u,h,x),u=u.sibling}var va=null,tc=!1;function Ef(u,h,x){for(x=x.child;x!==null;)dE(u,h,x),x=x.sibling}function dE(u,h,x){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount(Ws,x)}catch{}switch(x.tag){case 5:Ha||k0(x,h);case 6:var E=va,F=tc;va=null,Ef(u,h,x),va=E,tc=F,va!==null&&(tc?(u=va,x=x.stateNode,u.nodeType===8?u.parentNode.removeChild(x):u.removeChild(x)):va.removeChild(x.stateNode));break;case 18:va!==null&&(tc?(u=va,x=x.stateNode,u.nodeType===8?Sm(u.parentNode,x):u.nodeType===1&&Sm(u,x),Gs(u)):Sm(va,x.stateNode));break;case 4:E=va,F=tc,va=x.stateNode.containerInfo,tc=!0,Ef(u,h,x),va=E,tc=F;break;case 0:case 11:case 14:case 15:if(!Ha&&(E=x.updateQueue,E!==null&&(E=E.lastEffect,E!==null))){F=E=E.next;do{var q=F,ie=q.destroy;q=q.tag,ie!==void 0&&((q&2)!==0||(q&4)!==0)&&Xy(x,h,ie),F=F.next}while(F!==E)}Ef(u,h,x);break;case 1:if(!Ha&&(k0(x,h),E=x.stateNode,typeof E.componentWillUnmount=="function"))try{E.props=x.memoizedProps,E.state=x.memoizedState,E.componentWillUnmount()}catch(Pe){Xi(x,h,Pe)}Ef(u,h,x);break;case 21:Ef(u,h,x);break;case 22:x.mode&1?(Ha=(E=Ha)||x.memoizedState!==null,Ef(u,h,x),Ha=E):Ef(u,h,x);break;default:Ef(u,h,x)}}function pE(u){var h=u.updateQueue;if(h!==null){u.updateQueue=null;var x=u.stateNode;x===null&&(x=u.stateNode=new xL),h.forEach(function(E){var F=AL.bind(null,u,E);x.has(E)||(x.add(E),E.then(F,F))})}}function rc(u,h){var x=h.deletions;if(x!==null)for(var E=0;E<x.length;E++){var F=x[E];try{var q=u,ie=h,Pe=ie;e:for(;Pe!==null;){switch(Pe.tag){case 5:va=Pe.stateNode,tc=!1;break e;case 3:va=Pe.stateNode.containerInfo,tc=!0;break e;case 4:va=Pe.stateNode.containerInfo,tc=!0;break e}Pe=Pe.return}if(va===null)throw Error(r(160));dE(q,ie,F),va=null,tc=!1;var Oe=F.alternate;Oe!==null&&(Oe.return=null),F.return=null}catch(it){Xi(F,h,it)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)mE(h,u),h=h.sibling}function mE(u,h){var x=u.alternate,E=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(rc(h,u),Pc(u),E&4){try{Fm(3,u,u.return),fx(3,u)}catch(fr){Xi(u,u.return,fr)}try{Fm(5,u,u.return)}catch(fr){Xi(u,u.return,fr)}}break;case 1:rc(h,u),Pc(u),E&512&&x!==null&&k0(x,x.return);break;case 5:if(rc(h,u),Pc(u),E&512&&x!==null&&k0(x,x.return),u.flags&32){var F=u.stateNode;try{wt(F,"")}catch(fr){Xi(u,u.return,fr)}}if(E&4&&(F=u.stateNode,F!=null)){var q=u.memoizedProps,ie=x!==null?x.memoizedProps:q,Pe=u.type,Oe=u.updateQueue;if(u.updateQueue=null,Oe!==null)try{Pe==="input"&&q.type==="radio"&&q.name!=null&&ut(F,q),Me(Pe,ie);var it=Me(Pe,q);for(ie=0;ie<Oe.length;ie+=2){var Ct=Oe[ie],Rt=Oe[ie+1];Ct==="style"?qt(F,Rt):Ct==="dangerouslySetInnerHTML"?jt(F,Rt):Ct==="children"?wt(F,Rt):C(F,Ct,Rt,it)}switch(Pe){case"input":rt(F,q);break;case"textarea":tt(F,q);break;case"select":var Nt=F._wrapperState.wasMultiple;F._wrapperState.wasMultiple=!!q.multiple;var Yt=q.value;Yt!=null?ft(F,!!q.multiple,Yt,!1):Nt!==!!q.multiple&&(q.defaultValue!=null?ft(F,!!q.multiple,q.defaultValue,!0):ft(F,!!q.multiple,q.multiple?[]:"",!1))}F[gf]=q}catch(fr){Xi(u,u.return,fr)}}break;case 6:if(rc(h,u),Pc(u),E&4){if(u.stateNode===null)throw Error(r(162));F=u.stateNode,q=u.memoizedProps;try{F.nodeValue=q}catch(fr){Xi(u,u.return,fr)}}break;case 3:if(rc(h,u),Pc(u),E&4&&x!==null&&x.memoizedState.isDehydrated)try{Gs(h.containerInfo)}catch(fr){Xi(u,u.return,fr)}break;case 4:rc(h,u),Pc(u);break;case 13:rc(h,u),Pc(u),F=u.child,F.flags&8192&&(q=F.memoizedState!==null,F.stateNode.isHidden=q,!q||F.alternate!==null&&F.alternate.memoizedState!==null||(tw=Tt())),E&4&&pE(u);break;case 22:if(Ct=x!==null&&x.memoizedState!==null,u.mode&1?(Ha=(it=Ha)||Ct,rc(h,u),Ha=it):rc(h,u),Pc(u),E&8192){if(it=u.memoizedState!==null,(u.stateNode.isHidden=it)&&!Ct&&(u.mode&1)!==0)for(nr=u,Ct=u.child;Ct!==null;){for(Rt=nr=Ct;nr!==null;){switch(Nt=nr,Yt=Nt.child,Nt.tag){case 0:case 11:case 14:case 15:Fm(4,Nt,Nt.return);break;case 1:k0(Nt,Nt.return);var or=Nt.stateNode;if(typeof or.componentWillUnmount=="function"){E=Nt,x=Nt.return;try{h=E,or.props=h.memoizedProps,or.state=h.memoizedState,or.componentWillUnmount()}catch(fr){Xi(E,x,fr)}}break;case 5:k0(Nt,Nt.return);break;case 22:if(Nt.memoizedState!==null){vE(Rt);continue}}Yt!==null?(Yt.return=Nt,nr=Yt):vE(Rt)}Ct=Ct.sibling}e:for(Ct=null,Rt=u;;){if(Rt.tag===5){if(Ct===null){Ct=Rt;try{F=Rt.stateNode,it?(q=F.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none"):(Pe=Rt.stateNode,Oe=Rt.memoizedProps.style,ie=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null,Pe.style.display=Gt("display",ie))}catch(fr){Xi(u,u.return,fr)}}}else if(Rt.tag===6){if(Ct===null)try{Rt.stateNode.nodeValue=it?"":Rt.memoizedProps}catch(fr){Xi(u,u.return,fr)}}else if((Rt.tag!==22&&Rt.tag!==23||Rt.memoizedState===null||Rt===u)&&Rt.child!==null){Rt.child.return=Rt,Rt=Rt.child;continue}if(Rt===u)break e;for(;Rt.sibling===null;){if(Rt.return===null||Rt.return===u)break e;Ct===Rt&&(Ct=null),Rt=Rt.return}Ct===Rt&&(Ct=null),Rt.sibling.return=Rt.return,Rt=Rt.sibling}}break;case 19:rc(h,u),Pc(u),E&4&&pE(u);break;case 21:break;default:rc(h,u),Pc(u)}}function Pc(u){var h=u.flags;if(h&2){try{e:{for(var x=u.return;x!==null;){if(fE(x)){var E=x;break e}x=x.return}throw Error(r(160))}switch(E.tag){case 5:var F=E.stateNode;E.flags&32&&(wt(F,""),E.flags&=-33);var q=hE(u);Jy(u,q,F);break;case 3:case 4:var ie=E.stateNode.containerInfo,Pe=hE(u);Qy(u,Pe,ie);break;default:throw Error(r(161))}}catch(Oe){Xi(u,u.return,Oe)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function yL(u,h,x){nr=u,gE(u)}function gE(u,h,x){for(var E=(u.mode&1)!==0;nr!==null;){var F=nr,q=F.child;if(F.tag===22&&E){var ie=F.memoizedState!==null||ux;if(!ie){var Pe=F.alternate,Oe=Pe!==null&&Pe.memoizedState!==null||Ha;Pe=ux;var it=Ha;if(ux=ie,(Ha=Oe)&&!it)for(nr=F;nr!==null;)ie=nr,Oe=ie.child,ie.tag===22&&ie.memoizedState!==null?yE(F):Oe!==null?(Oe.return=ie,nr=Oe):yE(F);for(;q!==null;)nr=q,gE(q),q=q.sibling;nr=F,ux=Pe,Ha=it}xE(u)}else(F.subtreeFlags&8772)!==0&&q!==null?(q.return=F,nr=q):xE(u)}}function xE(u){for(;nr!==null;){var h=nr;if((h.flags&8772)!==0){var x=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:Ha||fx(5,h);break;case 1:var E=h.stateNode;if(h.flags&4&&!Ha)if(x===null)E.componentDidMount();else{var F=h.elementType===h.type?x.memoizedProps:ec(h.type,x.memoizedProps);E.componentDidUpdate(F,x.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var q=h.updateQueue;q!==null&&Ao(h,q,E);break;case 3:var ie=h.updateQueue;if(ie!==null){if(x=null,h.child!==null)switch(h.child.tag){case 5:x=h.child.stateNode;break;case 1:x=h.child.stateNode}Ao(h,ie,x)}break;case 5:var Pe=h.stateNode;if(x===null&&h.flags&4){x=Pe;var Oe=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":Oe.autoFocus&&x.focus();break;case"img":Oe.src&&(x.src=Oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var it=h.alternate;if(it!==null){var Ct=it.memoizedState;if(Ct!==null){var Rt=Ct.dehydrated;Rt!==null&&Gs(Rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Ha||h.flags&512&&Yy(h)}catch(Nt){Xi(h,h.return,Nt)}}if(h===u){nr=null;break}if(x=h.sibling,x!==null){x.return=h.return,nr=x;break}nr=h.return}}function vE(u){for(;nr!==null;){var h=nr;if(h===u){nr=null;break}var x=h.sibling;if(x!==null){x.return=h.return,nr=x;break}nr=h.return}}function yE(u){for(;nr!==null;){var h=nr;try{switch(h.tag){case 0:case 11:case 15:var x=h.return;try{fx(4,h)}catch(Oe){Xi(h,x,Oe)}break;case 1:var E=h.stateNode;if(typeof E.componentDidMount=="function"){var F=h.return;try{E.componentDidMount()}catch(Oe){Xi(h,F,Oe)}}var q=h.return;try{Yy(h)}catch(Oe){Xi(h,q,Oe)}break;case 5:var ie=h.return;try{Yy(h)}catch(Oe){Xi(h,ie,Oe)}}}catch(Oe){Xi(h,h.return,Oe)}if(h===u){nr=null;break}var Pe=h.sibling;if(Pe!==null){Pe.return=h.return,nr=Pe;break}nr=h.return}}var wL=Math.ceil,hx=j.ReactCurrentDispatcher,Zy=j.ReactCurrentOwner,Sl=j.ReactCurrentBatchConfig,yn=0,Zs=null,ks=null,ya=0,Zo=0,T0=Ko(0),Us=0,Lm=null,Xh=0,dx=0,ew=0,Dm=null,Co=null,tw=0,A0=1/0,Tu=null,px=!1,rw=null,Sf=null,mx=!1,kf=null,gx=0,Om=0,nw=null,xx=-1,vx=0;function mo(){return(yn&6)!==0?Tt():xx!==-1?xx:xx=Tt()}function Tf(u){return(u.mode&1)===0?1:(yn&2)!==0&&ya!==0?ya&-ya:Di.transition!==null?(vx===0&&(vx=ql()),vx):(u=Hr,u!==0||(u=window.event,u=u===void 0?16:ml(u.type)),u)}function nc(u,h,x,E){if(50<Om)throw Om=0,nw=null,Error(r(185));hl(u,x,E),((yn&2)===0||u!==Zs)&&(u===Zs&&((yn&2)===0&&(dx|=x),Us===4&&Af(u,ya)),Io(u,E),x===1&&yn===0&&(h.mode&1)===0&&(A0=Tt()+500,Hh&&G()))}function Io(u,h){var x=u.callbackNode;Tn(u,h);var E=Rs(u,u===Zs?ya:0);if(E===0)x!==null&&Dt(x),u.callbackNode=null,u.callbackPriority=0;else if(h=E&-E,u.callbackPriority!==h){if(x!=null&&Dt(x),h===1)u.tag===0?M(_E.bind(null,u)):S(_E.bind(null,u)),Ry(function(){(yn&6)===0&&G()}),x=null;else{switch(ua(E)){case 1:x=on;break;case 4:x=Dr;break;case 16:x=fn;break;case 536870912:x=Ca;break;default:x=fn}x=CE(x,wE.bind(null,u))}u.callbackPriority=h,u.callbackNode=x}}function wE(u,h){if(xx=-1,vx=0,(yn&6)!==0)throw Error(r(327));var x=u.callbackNode;if(N0()&&u.callbackNode!==x)return null;var E=Rs(u,u===Zs?ya:0);if(E===0)return null;if((E&30)!==0||(E&u.expiredLanes)!==0||h)h=yx(u,E);else{h=E;var F=yn;yn|=2;var q=EE();(Zs!==u||ya!==h)&&(Tu=null,A0=Tt()+500,Qh(u,h));do try{EL();break}catch(Pe){bE(u,Pe)}while(!0);xn(),hx.current=q,yn=F,ks!==null?h=0:(Zs=null,ya=0,h=Us)}if(h!==0){if(h===2&&(F=Fs(u),F!==0&&(E=F,h=iw(u,F))),h===1)throw x=Lm,Qh(u,0),Af(u,E),Io(u,Tt()),x;if(h===6)Af(u,E);else{if(F=u.current.alternate,(E&30)===0&&!_L(F)&&(h=yx(u,E),h===2&&(q=Fs(u),q!==0&&(E=q,h=iw(u,q))),h===1))throw x=Lm,Qh(u,0),Af(u,E),Io(u,Tt()),x;switch(u.finishedWork=F,u.finishedLanes=E,h){case 0:case 1:throw Error(r(345));case 2:Jh(u,Co,Tu);break;case 3:if(Af(u,E),(E&130023424)===E&&(h=tw+500-Tt(),10<h)){if(Rs(u,0)!==0)break;if(F=u.suspendedLanes,(F&E)!==E){mo(),u.pingedLanes|=u.suspendedLanes&F;break}u.timeoutHandle=Em(Jh.bind(null,u,Co,Tu),h);break}Jh(u,Co,Tu);break;case 4:if(Af(u,E),(E&4194240)===E)break;for(h=u.eventTimes,F=-1;0<E;){var ie=31-En(E);q=1<<ie,ie=h[ie],ie>F&&(F=ie),E&=~q}if(E=F,E=Tt()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*wL(E/1960))-E,10<E){u.timeoutHandle=Em(Jh.bind(null,u,Co,Tu),E);break}Jh(u,Co,Tu);break;case 5:Jh(u,Co,Tu);break;default:throw Error(r(329))}}}return Io(u,Tt()),u.callbackNode===x?wE.bind(null,u):null}function iw(u,h){var x=Dm;return u.current.memoizedState.isDehydrated&&(Qh(u,h).flags|=256),u=yx(u,h),u!==2&&(h=Co,Co=x,h!==null&&sw(h)),u}function sw(u){Co===null?Co=u:Co.push.apply(Co,u)}function _L(u){for(var h=u;;){if(h.flags&16384){var x=h.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var E=0;E<x.length;E++){var F=x[E],q=F.getSnapshot;F=F.value;try{if(!os(q(),F))return!1}catch{return!1}}}if(x=h.child,h.subtreeFlags&16384&&x!==null)x.return=h,h=x;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Af(u,h){for(h&=~ew,h&=~dx,u.suspendedLanes|=h,u.pingedLanes&=~h,u=u.expirationTimes;0<h;){var x=31-En(h),E=1<<x;u[x]=-1,h&=~E}}function _E(u){if((yn&6)!==0)throw Error(r(327));N0();var h=Rs(u,0);if((h&1)===0)return Io(u,Tt()),null;var x=yx(u,h);if(u.tag!==0&&x===2){var E=Fs(u);E!==0&&(h=E,x=iw(u,E))}if(x===1)throw x=Lm,Qh(u,0),Af(u,h),Io(u,Tt()),x;if(x===6)throw Error(r(345));return u.finishedWork=u.current.alternate,u.finishedLanes=h,Jh(u,Co,Tu),Io(u,Tt()),null}function aw(u,h){var x=yn;yn|=1;try{return u(h)}finally{yn=x,yn===0&&(A0=Tt()+500,Hh&&G())}}function Yh(u){kf!==null&&kf.tag===0&&(yn&6)===0&&N0();var h=yn;yn|=1;var x=Sl.transition,E=Hr;try{if(Sl.transition=null,Hr=1,u)return u()}finally{Hr=E,Sl.transition=x,yn=h,(yn&6)===0&&G()}}function ow(){Zo=T0.current,An(T0)}function Qh(u,h){u.finishedWork=null,u.finishedLanes=0;var x=u.timeoutHandle;if(x!==-1&&(u.timeoutHandle=-1,Qg(x)),ks!==null)for(x=ks.return;x!==null;){var E=x;switch(Qe(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&p0();break;case 3:_l(),An(Ua),An(Bs),Cm();break;case 5:Am(E);break;case 4:_l();break;case 13:An(ti);break;case 19:An(ti);break;case 10:oi(E.type._context);break;case 22:case 23:ow()}x=x.return}if(Zs=u,ks=u=Nf(u.current,null),ya=Zo=h,Us=0,Lm=null,ew=dx=Xh=0,Co=Dm=null,jn!==null){for(h=0;h<jn.length;h++)if(x=jn[h],E=x.interleaved,E!==null){x.interleaved=null;var F=E.next,q=x.pending;if(q!==null){var ie=q.next;q.next=F,E.next=ie}x.pending=E}jn=null}return u}function bE(u,h){do{var x=ks;try{if(xn(),m0.current=ax,wf){for(var E=li.memoizedState;E!==null;){var F=E.queue;F!==null&&(F.pending=null),E=E.next}wf=!1}if(bl=0,Bi=Ki=li=null,Jl=!1,_f=0,Zy.current=null,x===null||x.return===null){Us=1,Lm=h,ks=null;break}e:{var q=u,ie=x.return,Pe=x,Oe=h;if(h=ya,Pe.flags|=32768,Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var it=Oe,Ct=Pe,Rt=Ct.tag;if((Ct.mode&1)===0&&(Rt===0||Rt===11||Rt===15)){var Nt=Ct.alternate;Nt?(Ct.updateQueue=Nt.updateQueue,Ct.memoizedState=Nt.memoizedState,Ct.lanes=Nt.lanes):(Ct.updateQueue=null,Ct.memoizedState=null)}var Yt=G3(ie);if(Yt!==null){Yt.flags&=-257,K3(Yt,ie,Pe,q,h),Yt.mode&1&&W3(q,it,h),h=Yt,Oe=it;var or=h.updateQueue;if(or===null){var fr=new Set;fr.add(Oe),h.updateQueue=fr}else or.add(Oe);break e}else{if((h&1)===0){W3(q,it,h),lw();break e}Oe=Error(r(426))}}else if(xt&&Pe.mode&1){var us=G3(ie);if(us!==null){(us.flags&65536)===0&&(us.flags|=256),K3(us,ie,Pe,q,h),zt(S0(Oe,Pe));break e}}q=Oe=S0(Oe,Pe),Us!==4&&(Us=2),Dm===null?Dm=[q]:Dm.push(q),q=ie;do{switch(q.tag){case 3:q.flags|=65536,h&=-h,q.lanes|=h;var Ye=q3(q,Oe,h);Bn(q,Ye);break e;case 1:Pe=Oe;var Ue=q.type,et=q.stateNode;if((q.flags&128)===0&&(typeof Ue.getDerivedStateFromError=="function"||et!==null&&typeof et.componentDidCatch=="function"&&(Sf===null||!Sf.has(et)))){q.flags|=65536,h&=-h,q.lanes|=h;var Ot=H3(q,Pe,h);Bn(q,Ot);break e}}q=q.return}while(q!==null)}kE(x)}catch(dr){h=dr,ks===x&&x!==null&&(ks=x=x.return);continue}break}while(!0)}function EE(){var u=hx.current;return hx.current=ax,u===null?ax:u}function lw(){(Us===0||Us===3||Us===2)&&(Us=4),Zs===null||(Xh&268435455)===0&&(dx&268435455)===0||Af(Zs,ya)}function yx(u,h){var x=yn;yn|=2;var E=EE();(Zs!==u||ya!==h)&&(Tu=null,Qh(u,h));do try{bL();break}catch(F){bE(u,F)}while(!0);if(xn(),yn=x,hx.current=E,ks!==null)throw Error(r(261));return Zs=null,ya=0,Us}function bL(){for(;ks!==null;)SE(ks)}function EL(){for(;ks!==null&&!Ht();)SE(ks)}function SE(u){var h=NE(u.alternate,u,Zo);u.memoizedProps=u.pendingProps,h===null?kE(u):ks=h,Zy.current=null}function kE(u){var h=u;do{var x=h.alternate;if(u=h.return,(h.flags&32768)===0){if(x=mL(x,h,Zo),x!==null){ks=x;return}}else{if(x=gL(x,h),x!==null){x.flags&=32767,ks=x;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Us=6,ks=null;return}}if(h=h.sibling,h!==null){ks=h;return}ks=h=u}while(h!==null);Us===0&&(Us=5)}function Jh(u,h,x){var E=Hr,F=Sl.transition;try{Sl.transition=null,Hr=1,SL(u,h,x,E)}finally{Sl.transition=F,Hr=E}return null}function SL(u,h,x,E){do N0();while(kf!==null);if((yn&6)!==0)throw Error(r(327));x=u.finishedWork;var F=u.finishedLanes;if(x===null)return null;if(u.finishedWork=null,u.finishedLanes=0,x===u.current)throw Error(r(177));u.callbackNode=null,u.callbackPriority=0;var q=x.lanes|x.childLanes;if(Yr(u,q),u===Zs&&(ks=Zs=null,ya=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||mx||(mx=!0,CE(fn,function(){return N0(),null})),q=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||q){q=Sl.transition,Sl.transition=null;var ie=Hr;Hr=1;var Pe=yn;yn|=4,Zy.current=null,vL(u,x),mE(x,u),Wg(wu),dl=!!$h,wu=$h=null,u.current=x,yL(x),Lt(),yn=Pe,Hr=ie,Sl.transition=q}else u.current=x;if(mx&&(mx=!1,kf=u,gx=F),q=u.pendingLanes,q===0&&(Sf=null),Bo(x.stateNode),Io(u,Tt()),h!==null)for(E=u.onRecoverableError,x=0;x<h.length;x++)F=h[x],E(F.value,{componentStack:F.stack,digest:F.digest});if(px)throw px=!1,u=rw,rw=null,u;return(gx&1)!==0&&u.tag!==0&&N0(),q=u.pendingLanes,(q&1)!==0?u===nw?Om++:(Om=0,nw=u):Om=0,G(),null}function N0(){if(kf!==null){var u=ua(gx),h=Sl.transition,x=Hr;try{if(Sl.transition=null,Hr=16>u?16:u,kf===null)var E=!1;else{if(u=kf,kf=null,gx=0,(yn&6)!==0)throw Error(r(331));var F=yn;for(yn|=4,nr=u.current;nr!==null;){var q=nr,ie=q.child;if((nr.flags&16)!==0){var Pe=q.deletions;if(Pe!==null){for(var Oe=0;Oe<Pe.length;Oe++){var it=Pe[Oe];for(nr=it;nr!==null;){var Ct=nr;switch(Ct.tag){case 0:case 11:case 15:Fm(8,Ct,q)}var Rt=Ct.child;if(Rt!==null)Rt.return=Ct,nr=Rt;else for(;nr!==null;){Ct=nr;var Nt=Ct.sibling,Yt=Ct.return;if(uE(Ct),Ct===it){nr=null;break}if(Nt!==null){Nt.return=Yt,nr=Nt;break}nr=Yt}}}var or=q.alternate;if(or!==null){var fr=or.child;if(fr!==null){or.child=null;do{var us=fr.sibling;fr.sibling=null,fr=us}while(fr!==null)}}nr=q}}if((q.subtreeFlags&2064)!==0&&ie!==null)ie.return=q,nr=ie;else e:for(;nr!==null;){if(q=nr,(q.flags&2048)!==0)switch(q.tag){case 0:case 11:case 15:Fm(9,q,q.return)}var Ye=q.sibling;if(Ye!==null){Ye.return=q.return,nr=Ye;break e}nr=q.return}}var Ue=u.current;for(nr=Ue;nr!==null;){ie=nr;var et=ie.child;if((ie.subtreeFlags&2064)!==0&&et!==null)et.return=ie,nr=et;else e:for(ie=Ue;nr!==null;){if(Pe=nr,(Pe.flags&2048)!==0)try{switch(Pe.tag){case 0:case 11:case 15:fx(9,Pe)}}catch(dr){Xi(Pe,Pe.return,dr)}if(Pe===ie){nr=null;break e}var Ot=Pe.sibling;if(Ot!==null){Ot.return=Pe.return,nr=Ot;break e}nr=Pe.return}}if(yn=F,G(),ii&&typeof ii.onPostCommitFiberRoot=="function")try{ii.onPostCommitFiberRoot(Ws,u)}catch{}E=!0}return E}finally{Hr=x,Sl.transition=h}}return!1}function TE(u,h,x){h=S0(x,h),h=q3(u,h,1),u=ji(u,h,1),h=mo(),u!==null&&(hl(u,1,h),Io(u,h))}function Xi(u,h,x){if(u.tag===3)TE(u,u,x);else for(;h!==null;){if(h.tag===3){TE(h,u,x);break}else if(h.tag===1){var E=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Sf===null||!Sf.has(E))){u=S0(x,u),u=H3(h,u,1),h=ji(h,u,1),u=mo(),h!==null&&(hl(h,1,u),Io(h,u));break}}h=h.return}}function kL(u,h,x){var E=u.pingCache;E!==null&&E.delete(h),h=mo(),u.pingedLanes|=u.suspendedLanes&x,Zs===u&&(ya&x)===x&&(Us===4||Us===3&&(ya&130023424)===ya&&500>Tt()-tw?Qh(u,0):ew|=x),Io(u,h)}function AE(u,h){h===0&&((u.mode&1)===0?h=1:(h=Ia,Ia<<=1,(Ia&130023424)===0&&(Ia=4194304)));var x=mo();u=Mn(u,h),u!==null&&(hl(u,h,x),Io(u,x))}function TL(u){var h=u.memoizedState,x=0;h!==null&&(x=h.retryLane),AE(u,x)}function AL(u,h){var x=0;switch(u.tag){case 13:var E=u.stateNode,F=u.memoizedState;F!==null&&(x=F.retryLane);break;case 19:E=u.stateNode;break;default:throw Error(r(314))}E!==null&&E.delete(h),AE(u,x)}var NE;NE=function(u,h,x){if(u!==null)if(u.memoizedProps!==h.pendingProps||Ua.current)No=!0;else{if((u.lanes&x)===0&&(h.flags&128)===0)return No=!1,pL(u,h,x);No=(u.flags&131072)!==0}else No=!1,xt&&(h.flags&1048576)!==0&&qe(h,de,h.index);switch(h.lanes=0,h.tag){case 2:var E=h.type;cx(u,h),u=h.pendingProps;var F=vf(h,Bs.current);ki(h,x),F=Wh(null,h,E,u,F,x);var q=El();return h.flags|=1,typeof F=="object"&&F!==null&&typeof F.render=="function"&&F.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,za(E)?(q=!0,Eu(h)):q=!1,h.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,Vs(h),F.updater=ox,h.stateNode=F,F._reactInternals=h,By(h,E,u,x),h=$y(null,h,E,!0,q,x)):(h.tag=0,xt&&q&&pt(h),po(null,h,F,x),h=h.child),h;case 16:E=h.elementType;e:{switch(cx(u,h),u=h.pendingProps,F=E._init,E=F(E._payload),h.type=E,F=h.tag=CL(E),u=ec(E,u),F){case 0:h=zy(null,h,E,u,x);break e;case 1:h=eE(null,h,E,u,x);break e;case 11:h=X3(null,h,E,u,x);break e;case 14:h=Y3(null,h,E,ec(E.type,u),x);break e}throw Error(r(306,E,""))}return h;case 0:return E=h.type,F=h.pendingProps,F=h.elementType===E?F:ec(E,F),zy(u,h,E,F,x);case 1:return E=h.type,F=h.pendingProps,F=h.elementType===E?F:ec(E,F),eE(u,h,E,F,x);case 3:e:{if(tE(h),u===null)throw Error(r(387));E=h.pendingProps,q=h.memoizedState,F=q.element,$a(u,h),Js(h,E,null,x);var ie=h.memoizedState;if(E=ie.element,q.isDehydrated)if(q={element:E,isDehydrated:!1,cache:ie.cache,pendingSuspenseBoundaries:ie.pendingSuspenseBoundaries,transitions:ie.transitions},h.updateQueue.baseState=q,h.memoizedState=q,h.flags&256){F=S0(Error(r(423)),h),h=rE(u,h,E,x,F);break e}else if(E!==F){F=S0(Error(r(424)),h),h=rE(u,h,E,x,F);break e}else for(dt=xa(h.stateNode.containerInfo.firstChild),ct=h,xt=!0,vt=null,x=hi(h,null,E,x),h.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(tr(),E===F){h=ku(u,h,x);break e}po(u,h,E,x)}h=h.child}return h;case 5:return tx(h),u===null&&sr(h),E=h.type,F=h.pendingProps,q=u!==null?u.memoizedProps:null,ie=F.children,bm(E,F)?ie=null:q!==null&&bm(E,q)&&(h.flags|=32),Z3(u,h),po(u,h,ie,x),h.child;case 6:return u===null&&sr(h),null;case 13:return nE(u,h,x);case 4:return yf(h,h.stateNode.containerInfo),E=h.pendingProps,u===null?h.child=Wi(h,null,E,x):po(u,h,E,x),h.child;case 11:return E=h.type,F=h.pendingProps,F=h.elementType===E?F:ec(E,F),X3(u,h,E,F,x);case 7:return po(u,h,h.pendingProps,x),h.child;case 8:return po(u,h,h.pendingProps.children,x),h.child;case 12:return po(u,h,h.pendingProps.children,x),h.child;case 10:e:{if(E=h.type._context,F=h.pendingProps,q=h.memoizedProps,ie=F.value,Rn(ls,E._currentValue),E._currentValue=ie,q!==null)if(os(q.value,ie)){if(q.children===F.children&&!Ua.current){h=ku(u,h,x);break e}}else for(q=h.child,q!==null&&(q.return=h);q!==null;){var Pe=q.dependencies;if(Pe!==null){ie=q.child;for(var Oe=Pe.firstContext;Oe!==null;){if(Oe.context===E){if(q.tag===1){Oe=Oi(-1,x&-x),Oe.tag=2;var it=q.updateQueue;if(it!==null){it=it.shared;var Ct=it.pending;Ct===null?Oe.next=Oe:(Oe.next=Ct.next,Ct.next=Oe),it.pending=Oe}}q.lanes|=x,Oe=q.alternate,Oe!==null&&(Oe.lanes|=x),vn(q.return,x,h),Pe.lanes|=x;break}Oe=Oe.next}}else if(q.tag===10)ie=q.type===h.type?null:q.child;else if(q.tag===18){if(ie=q.return,ie===null)throw Error(r(341));ie.lanes|=x,Pe=ie.alternate,Pe!==null&&(Pe.lanes|=x),vn(ie,x,h),ie=q.sibling}else ie=q.child;if(ie!==null)ie.return=q;else for(ie=q;ie!==null;){if(ie===h){ie=null;break}if(q=ie.sibling,q!==null){q.return=ie.return,ie=q;break}ie=ie.return}q=ie}po(u,h,F.children,x),h=h.child}return h;case 9:return F=h.type,E=h.pendingProps.children,ki(h,x),F=Ti(F),E=E(F),h.flags|=1,po(u,h,E,x),h.child;case 14:return E=h.type,F=ec(E,h.pendingProps),F=ec(E.type,F),Y3(u,h,E,F,x);case 15:return Q3(u,h,h.type,h.pendingProps,x);case 17:return E=h.type,F=h.pendingProps,F=h.elementType===E?F:ec(E,F),cx(u,h),h.tag=1,za(E)?(u=!0,Eu(h)):u=!1,ki(h,x),z3(h,E,F),By(h,E,F,x),$y(null,h,E,!0,u,x);case 19:return sE(u,h,x);case 22:return J3(u,h,x)}throw Error(r(156,h.tag))};function CE(u,h){return _t(u,h)}function NL(u,h,x,E){this.tag=u,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kl(u,h,x,E){return new NL(u,h,x,E)}function cw(u){return u=u.prototype,!(!u||!u.isReactComponent)}function CL(u){if(typeof u=="function")return cw(u)?1:0;if(u!=null){if(u=u.$$typeof,u===D)return 11;if(u===_e)return 14}return 2}function Nf(u,h){var x=u.alternate;return x===null?(x=kl(u.tag,h,u.key,u.mode),x.elementType=u.elementType,x.type=u.type,x.stateNode=u.stateNode,x.alternate=u,u.alternate=x):(x.pendingProps=h,x.type=u.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=u.flags&14680064,x.childLanes=u.childLanes,x.lanes=u.lanes,x.child=u.child,x.memoizedProps=u.memoizedProps,x.memoizedState=u.memoizedState,x.updateQueue=u.updateQueue,h=u.dependencies,x.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},x.sibling=u.sibling,x.index=u.index,x.ref=u.ref,x}function wx(u,h,x,E,F,q){var ie=2;if(E=u,typeof u=="function")cw(u)&&(ie=1);else if(typeof u=="string")ie=5;else e:switch(u){case P:return Zh(x.children,F,q,h);case A:ie=8,F|=8;break;case T:return u=kl(12,x,h,F|2),u.elementType=T,u.lanes=q,u;case B:return u=kl(13,x,h,F),u.elementType=B,u.lanes=q,u;case re:return u=kl(19,x,h,F),u.elementType=re,u.lanes=q,u;case we:return _x(x,F,q,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case O:ie=10;break e;case I:ie=9;break e;case D:ie=11;break e;case _e:ie=14;break e;case Ce:ie=16,E=null;break e}throw Error(r(130,u==null?u:typeof u,""))}return h=kl(ie,x,h,F),h.elementType=u,h.type=E,h.lanes=q,h}function Zh(u,h,x,E){return u=kl(7,u,E,h),u.lanes=x,u}function _x(u,h,x,E){return u=kl(22,u,E,h),u.elementType=we,u.lanes=x,u.stateNode={isHidden:!1},u}function uw(u,h,x){return u=kl(6,u,null,h),u.lanes=x,u}function fw(u,h,x){return h=kl(4,u.children!==null?u.children:[],u.key,h),h.lanes=x,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function IL(u,h,x,E,F){this.tag=h,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fl(0),this.expirationTimes=fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.identifierPrefix=E,this.onRecoverableError=F,this.mutableSourceEagerHydrationData=null}function hw(u,h,x,E,F,q,ie,Pe,Oe){return u=new IL(u,h,x,Pe,Oe),h===1?(h=1,q===!0&&(h|=8)):h=0,q=kl(3,null,null,h),u.current=q,q.stateNode=u,q.memoizedState={element:E,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vs(q),u}function PL(u,h,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:E==null?null:""+E,children:u,containerInfo:h,implementation:x}}function IE(u){if(!u)return Nc;u=u._reactInternals;e:{if(Ne(u)!==u||u.tag!==1)throw Error(r(170));var h=u;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(za(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(r(171))}if(u.tag===1){var x=u.type;if(za(x))return Tm(u,x,h)}return h}function PE(u,h,x,E,F,q,ie,Pe,Oe){return u=hw(x,E,!0,u,F,q,ie,Pe,Oe),u.context=IE(null),x=u.current,E=mo(),F=Tf(x),q=Oi(E,F),q.callback=h??null,ji(x,q,F),u.current.lanes=F,hl(u,F,E),Io(u,E),u}function bx(u,h,x,E){var F=h.current,q=mo(),ie=Tf(F);return x=IE(x),h.context===null?h.context=x:h.pendingContext=x,h=Oi(q,ie),h.payload={element:u},E=E===void 0?null:E,E!==null&&(h.callback=E),u=ji(F,h,ie),u!==null&&(nc(u,F,ie,q),Qs(u,F,ie)),ie}function Ex(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function RE(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var x=u.retryLane;u.retryLane=x!==0&&x<h?x:h}}function dw(u,h){RE(u,h),(u=u.alternate)&&RE(u,h)}function RL(){return null}var FE=typeof reportError=="function"?reportError:function(u){console.error(u)};function pw(u){this._internalRoot=u}Sx.prototype.render=pw.prototype.render=function(u){var h=this._internalRoot;if(h===null)throw Error(r(409));bx(u,h,null,null)},Sx.prototype.unmount=pw.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var h=u.containerInfo;Yh(function(){bx(null,u,null,null)}),h[Xs]=null}};function Sx(u){this._internalRoot=u}Sx.prototype.unstable_scheduleHydration=function(u){if(u){var h=sf();u={blockedOn:null,target:u,priority:h};for(var x=0;x<_o.length&&h!==0&&h<_o[x].priority;x++);_o.splice(x,0,u),x===0&&of(u)}};function mw(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function kx(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function LE(){}function FL(u,h,x,E,F){if(F){if(typeof E=="function"){var q=E;E=function(){var it=Ex(ie);q.call(it)}}var ie=PE(h,E,u,0,null,!1,!1,"",LE);return u._reactRootContainer=ie,u[Xs]=ie.current,vu(u.nodeType===8?u.parentNode:u),Yh(),ie}for(;F=u.lastChild;)u.removeChild(F);if(typeof E=="function"){var Pe=E;E=function(){var it=Ex(Oe);Pe.call(it)}}var Oe=hw(u,0,!1,null,null,!1,!1,"",LE);return u._reactRootContainer=Oe,u[Xs]=Oe.current,vu(u.nodeType===8?u.parentNode:u),Yh(function(){bx(h,Oe,x,E)}),Oe}function Tx(u,h,x,E,F){var q=x._reactRootContainer;if(q){var ie=q;if(typeof F=="function"){var Pe=F;F=function(){var Oe=Ex(ie);Pe.call(Oe)}}bx(h,ie,u,F)}else ie=FL(x,h,u,F,E);return Ex(ie)}xc=function(u){switch(u.tag){case 3:var h=u.stateNode;if(h.current.memoizedState.isDehydrated){var x=Pa(h.pendingLanes);x!==0&&(Vo(h,x|1),Io(h,Tt()),(yn&6)===0&&(A0=Tt()+500,G()))}break;case 13:Yh(function(){var E=Mn(u,1);if(E!==null){var F=mo();nc(E,u,1,F)}}),dw(u,1)}},vc=function(u){if(u.tag===13){var h=Mn(u,134217728);if(h!==null){var x=mo();nc(h,u,134217728,x)}dw(u,134217728)}},nf=function(u){if(u.tag===13){var h=Tf(u),x=Mn(u,h);if(x!==null){var E=mo();nc(x,u,h,E)}dw(u,h)}},sf=function(){return Hr},yc=function(u,h){var x=Hr;try{return Hr=u,h()}finally{Hr=x}},rr=function(u,h,x){switch(h){case"input":if(rt(u,x),h=x.name,x.type==="radio"&&h!=null){for(x=u;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<x.length;h++){var E=x[h];if(E!==u&&E.form===u.form){var F=qh(E);if(!F)throw Error(r(90));oe(E),rt(E,F)}}}break;case"textarea":tt(u,x);break;case"select":h=x.value,h!=null&&ft(u,!!x.multiple,h,!1)}},zr=aw,Nn=Yh;var LL={usingClientEntryPoint:!1,Events:[xf,_u,qh,mr,an,aw]},jm={findFiberByHostInstance:Ac,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DL={bundleType:jm.bundleType,version:jm.version,rendererPackageName:jm.rendererPackageName,rendererConfig:jm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=Xe(u),u===null?null:u.stateNode},findFiberByHostInstance:jm.findFiberByHostInstance||RL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ax=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ax.isDisabled&&Ax.supportsFiber)try{Ws=Ax.inject(DL),ii=Ax}catch{}}return Po.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LL,Po.createPortal=function(u,h){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mw(h))throw Error(r(200));return PL(u,h,null,x)},Po.createRoot=function(u,h){if(!mw(u))throw Error(r(299));var x=!1,E="",F=FE;return h!=null&&(h.unstable_strictMode===!0&&(x=!0),h.identifierPrefix!==void 0&&(E=h.identifierPrefix),h.onRecoverableError!==void 0&&(F=h.onRecoverableError)),h=hw(u,1,!1,null,null,x,!1,E,F),u[Xs]=h.current,vu(u.nodeType===8?u.parentNode:u),new pw(h)},Po.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=Xe(h),u=u===null?null:u.stateNode,u},Po.flushSync=function(u){return Yh(u)},Po.hydrate=function(u,h,x){if(!kx(h))throw Error(r(200));return Tx(null,u,h,!0,x)},Po.hydrateRoot=function(u,h,x){if(!mw(u))throw Error(r(405));var E=x!=null&&x.hydratedSources||null,F=!1,q="",ie=FE;if(x!=null&&(x.unstable_strictMode===!0&&(F=!0),x.identifierPrefix!==void 0&&(q=x.identifierPrefix),x.onRecoverableError!==void 0&&(ie=x.onRecoverableError)),h=PE(h,null,u,1,x??null,F,!1,q,ie),u[Xs]=h.current,vu(u),E)for(u=0;u<E.length;u++)x=E[u],F=x._getVersion,F=F(x._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[x,F]:h.mutableSourceEagerHydrationData.push(x,F);return new Sx(h)},Po.render=function(u,h,x){if(!kx(h))throw Error(r(200));return Tx(null,u,h,!1,x)},Po.unmountComponentAtNode=function(u){if(!kx(u))throw Error(r(40));return u._reactRootContainer?(Yh(function(){Tx(null,null,u,!1,function(){u._reactRootContainer=null,u[Xs]=null})}),!0):!1},Po.unstable_batchedUpdates=aw,Po.unstable_renderSubtreeIntoContainer=function(u,h,x,E){if(!kx(x))throw Error(r(200));if(u==null||u._reactInternals===void 0)throw Error(r(38));return Tx(u,h,x,!1,E)},Po.version="18.3.1-next-f1338f8080-20240426",Po}var zE;function pN(){if(zE)return vw.exports;zE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vw.exports=$L(),vw.exports}var $E;function qL(){if($E)return Nx;$E=1;var t=pN();return Nx.createRoot=t.createRoot,Nx.hydrateRoot=t.hydrateRoot,Nx}var HL=qL(),eh=pN();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function C1(){return C1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},C1.apply(this,arguments)}var qf;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qf||(qf={}));const qE="popstate";function WL(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:a,hash:o}=n.location;return D5("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:D2(i)}return KL(e,r,null,t)}function gs(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mN(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GL(){return Math.random().toString(36).substr(2,8)}function HE(t,e){return{usr:t.state,key:t.key,idx:e}}function D5(t,e,r,n){return r===void 0&&(r=null),C1({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bp(e):e,{state:r,key:e&&e.key||n||GL()})}function D2(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Bp(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function KL(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o=qf.Pop,l=null,c=f();c==null&&(c=0,a.replaceState(C1({},a.state,{idx:c}),""));function f(){return(a.state||{idx:null}).idx}function p(){o=qf.Pop;let b=f(),k=b==null?null:b-c;c=b,l&&l({action:o,location:w.location,delta:k})}function g(b,k){o=qf.Push;let R=D5(w.location,b,k);c=f()+1;let C=HE(R,c),j=w.createHref(R);try{a.pushState(C,"",j)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;i.location.assign(j)}s&&l&&l({action:o,location:w.location,delta:1})}function m(b,k){o=qf.Replace;let R=D5(w.location,b,k);c=f();let C=HE(R,c),j=w.createHref(R);a.replaceState(C,"",j),s&&l&&l({action:o,location:w.location,delta:0})}function _(b){let k=i.location.origin!=="null"?i.location.origin:i.location.href,R=typeof b=="string"?b:D2(b);return R=R.replace(/ $/,"%20"),gs(k,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,k)}let w={get action(){return o},get location(){return t(i,a)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(qE,p),l=b,()=>{i.removeEventListener(qE,p),l=null}},createHref(b){return e(i,b)},createURL:_,encodeLocation(b){let k=_(b);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:g,replace:m,go(b){return a.go(b)}};return w}var WE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(WE||(WE={}));function XL(t,e,r){return r===void 0&&(r="/"),YL(t,e,r)}function YL(t,e,r,n){let i=typeof e=="string"?Bp(e):e,s=e4(i.pathname||"/",r);if(s==null)return null;let a=gN(t);QL(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=cD(s);o=aD(a[l],c)}return o}function gN(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(gs(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=Yf([n,l.relativePath]),f=r.concat(l);s.children&&s.children.length>0&&(gs(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),gN(s.children,e,f,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:iD(c,s.index),routesMeta:f})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of xN(s.path))i(s,a,l)}),e}function xN(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=xN(n.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function QL(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:sD(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const JL=/^:[\w-]+$/,ZL=3,eD=2,tD=1,rD=10,nD=-2,GE=t=>t==="*";function iD(t,e){let r=t.split("/"),n=r.length;return r.some(GE)&&(n+=nD),e&&(n+=eD),r.filter(i=>!GE(i)).reduce((i,s)=>i+(JL.test(s)?ZL:s===""?tD:rD),n)}function sD(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function aD(t,e,r){let{routesMeta:n}=t,i={},s="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=oD({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},f),g=l.route;if(!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Yf([s,p.pathname]),pathnameBase:dD(Yf([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Yf([s,p.pathnameBase]))}return a}function oD(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=lD(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((c,f,p)=>{let{paramName:g,isOptional:m}=f;if(g==="*"){let w=o[p]||"";a=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const _=o[p];return m&&!_?c[g]=void 0:c[g]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function lD(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),mN(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function cD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mN(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function e4(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function uD(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Bp(t):t;return{pathname:r?r.startsWith("/")?r:fD(r,e):e,search:pD(n),hash:mD(i)}}function fD(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function _w(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hD(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function t4(t,e){let r=hD(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function r4(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Bp(t):(i=C1({},t),gs(!i.pathname||!i.pathname.includes("?"),_w("?","pathname","search",i)),gs(!i.pathname||!i.pathname.includes("#"),_w("#","pathname","hash",i)),gs(!i.search||!i.search.includes("#"),_w("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=r;else{let p=e.length-1;if(!n&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}o=p>=0?e[p]:"/"}let l=uD(i,o),c=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||f)&&(l.pathname+="/"),l}const Yf=t=>t.join("/").replace(/\/\/+/g,"/"),dD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vN=["post","put","patch","delete"];new Set(vN);const xD=["get",...vN];new Set(xD);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function I1(){return I1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},I1.apply(this,arguments)}const n4=z.createContext(null),vD=z.createContext(null),_h=z.createContext(null),Rv=z.createContext(null),ru=z.createContext({outlet:null,matches:[],isDataRoute:!1}),yN=z.createContext(null);function yD(t,e){let{relative:r}=e===void 0?{}:e;Vp()||gs(!1);let{basename:n,navigator:i}=z.useContext(_h),{hash:s,pathname:a,search:o}=bN(t,{relative:r}),l=a;return n!=="/"&&(l=a==="/"?n:Yf([n,a])),i.createHref({pathname:l,search:o,hash:s})}function Vp(){return z.useContext(Rv)!=null}function nu(){return Vp()||gs(!1),z.useContext(Rv).location}function wN(t){z.useContext(_h).static||z.useLayoutEffect(t)}function $i(){let{isDataRoute:t}=z.useContext(ru);return t?LD():wD()}function wD(){Vp()||gs(!1);let t=z.useContext(n4),{basename:e,future:r,navigator:n}=z.useContext(_h),{matches:i}=z.useContext(ru),{pathname:s}=nu(),a=JSON.stringify(t4(i,r.v7_relativeSplatPath)),o=z.useRef(!1);return wN(()=>{o.current=!0}),z.useCallback(function(c,f){if(f===void 0&&(f={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let p=r4(c,JSON.parse(a),s,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Yf([e,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[e,n,a,s,t])}const _D=z.createContext(null);function bD(t){let e=z.useContext(ru).outlet;return e&&z.createElement(_D.Provider,{value:t},e)}function _N(){let{matches:t}=z.useContext(ru),e=t[t.length-1];return e?e.params:{}}function bN(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=z.useContext(_h),{matches:i}=z.useContext(ru),{pathname:s}=nu(),a=JSON.stringify(t4(i,n.v7_relativeSplatPath));return z.useMemo(()=>r4(t,JSON.parse(a),s,r==="path"),[t,a,s,r])}function ED(t,e){return SD(t,e)}function SD(t,e,r,n){Vp()||gs(!1);let{navigator:i}=z.useContext(_h),{matches:s}=z.useContext(ru),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=nu(),f;if(e){var p;let b=typeof e=="string"?Bp(e):e;l==="/"||(p=b.pathname)!=null&&p.startsWith(l)||gs(!1),f=b}else f=c;let g=f.pathname||"/",m=g;if(l!=="/"){let b=l.replace(/^\//,"").split("/");m="/"+g.replace(/^\//,"").split("/").slice(b.length).join("/")}let _=XL(t,{pathname:m}),w=CD(_&&_.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:Yf([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:Yf([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,r,n);return e&&w?z.createElement(Rv.Provider,{value:{location:I1({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:qf.Pop}},w):w}function kD(){let t=FD(),e=gD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),r?z.createElement("pre",{style:i},r):null,null)}const TD=z.createElement(kD,null);class AD extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?z.createElement(ru.Provider,{value:this.props.routeContext},z.createElement(yN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ND(t){let{routeContext:e,match:r,children:n}=t,i=z.useContext(n4);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),z.createElement(ru.Provider,{value:e},n)}function CD(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=(i=r)==null?void 0:i.errors;if(o!=null){let f=a.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);f>=0||gs(!1),a=a.slice(0,Math.min(a.length,f+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=f),p.route.id){let{loaderData:g,errors:m}=r,_=p.route.loader&&g[p.route.id]===void 0&&(!m||m[p.route.id]===void 0);if(p.route.lazy||_){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((f,p,g)=>{let m,_=!1,w=null,b=null;r&&(m=o&&p.route.id?o[p.route.id]:void 0,w=p.route.errorElement||TD,l&&(c<0&&g===0?(DD("route-fallback"),_=!0,b=null):c===g&&(_=!0,b=p.route.hydrateFallbackElement||null)));let k=e.concat(a.slice(0,g+1)),R=()=>{let C;return m?C=w:_?C=b:p.route.Component?C=z.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=f,z.createElement(ND,{match:p,routeContext:{outlet:f,matches:k,isDataRoute:r!=null},children:C})};return r&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?z.createElement(AD,{location:r.location,revalidation:r.revalidation,component:w,error:m,children:R(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):R()},null)}var EN=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(EN||{}),SN=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(SN||{});function ID(t){let e=z.useContext(n4);return e||gs(!1),e}function PD(t){let e=z.useContext(vD);return e||gs(!1),e}function RD(t){let e=z.useContext(ru);return e||gs(!1),e}function kN(t){let e=RD(),r=e.matches[e.matches.length-1];return r.route.id||gs(!1),r.route.id}function FD(){var t;let e=z.useContext(yN),r=PD(),n=kN();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function LD(){let{router:t}=ID(EN.UseNavigateStable),e=kN(SN.UseNavigateStable),r=z.useRef(!1);return wN(()=>{r.current=!0}),z.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,I1({fromRouteId:e},s)))},[t,e])}const KE={};function DD(t,e,r){KE[t]||(KE[t]=!0)}function OD(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function Bm(t){let{to:e,replace:r,state:n,relative:i}=t;Vp()||gs(!1);let{future:s,static:a}=z.useContext(_h),{matches:o}=z.useContext(ru),{pathname:l}=nu(),c=$i(),f=r4(e,t4(o,s.v7_relativeSplatPath),l,i==="path"),p=JSON.stringify(f);return z.useEffect(()=>c(JSON.parse(p),{replace:r,state:n,relative:i}),[c,p,i,r,n]),null}function TN(t){return bD(t.context)}function di(t){gs(!1)}function jD(t){let{basename:e="/",children:r=null,location:n,navigationType:i=qf.Pop,navigator:s,static:a=!1,future:o}=t;Vp()&&gs(!1);let l=e.replace(/^\/*/,"/"),c=z.useMemo(()=>({basename:l,navigator:s,static:a,future:I1({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof n=="string"&&(n=Bp(n));let{pathname:f="/",search:p="",hash:g="",state:m=null,key:_="default"}=n,w=z.useMemo(()=>{let b=e4(f,l);return b==null?null:{location:{pathname:b,search:p,hash:g,state:m,key:_},navigationType:i}},[l,f,p,g,m,_,i]);return w==null?null:z.createElement(_h.Provider,{value:c},z.createElement(Rv.Provider,{children:r,value:w}))}function XE(t){let{children:e,location:r}=t;return ED(O5(e),r)}new Promise(()=>{});function O5(t,e){e===void 0&&(e=[]);let r=[];return z.Children.forEach(t,(n,i)=>{if(!z.isValidElement(n))return;let s=[...e,i];if(n.type===z.Fragment){r.push.apply(r,O5(n.props.children,s));return}n.type!==di&&gs(!1),!n.props.index||!n.props.children||gs(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=O5(n.props.children,s)),r.push(a)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function j5(){return j5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},j5.apply(this,arguments)}function MD(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function BD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function VD(t,e){return t.button===0&&(!e||e==="_self")&&!BD(t)}const UD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zD="6";try{window.__reactRouterVersion=zD}catch{}const $D="startTransition",YE=L2[$D];function qD(t){let{basename:e,children:r,future:n,window:i}=t,s=z.useRef();s.current==null&&(s.current=WL({window:i,v5Compat:!0}));let a=s.current,[o,l]=z.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},f=z.useCallback(p=>{c&&YE?YE(()=>l(p)):l(p)},[l,c]);return z.useLayoutEffect(()=>a.listen(f),[a,f]),z.useEffect(()=>OD(n),[n]),z.createElement(jD,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:a,future:n})}const HD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,th=z.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:f,viewTransition:p}=e,g=MD(e,UD),{basename:m}=z.useContext(_h),_,w=!1;if(typeof c=="string"&&WD.test(c)&&(_=c,HD))try{let C=new URL(window.location.href),j=c.startsWith("//")?new URL(C.protocol+c):new URL(c),X=e4(j.pathname,m);j.origin===C.origin&&X!=null?c=X+j.search+j.hash:w=!0}catch{}let b=yD(c,{relative:i}),k=GD(c,{replace:a,state:o,target:l,preventScrollReset:f,relative:i,viewTransition:p});function R(C){n&&n(C),C.defaultPrevented||k(C)}return z.createElement("a",j5({},g,{href:_||b,onClick:w||s?n:R,ref:r,target:l}))});var QE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(QE||(QE={}));var JE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(JE||(JE={}));function GD(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=$i(),c=nu(),f=bN(t,{relative:a});return z.useCallback(p=>{if(VD(p,r)){p.preventDefault();let g=n!==void 0?n:D2(c)===D2(f);l(t,{replace:g,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,f,n,i,r,t,s,a,o])}var ZE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},KD=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[r++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[r++],a=t[r++],o=t[r++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const s=t[r++],a=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},NN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,f=s>>2,p=(s&3)<<4|o>>4;let g=(o&15)<<2|c>>6,m=c&63;l||(m=64,a||(g=64)),n.push(r[f],r[p],r[g],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(AN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):KD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const s=r[t.charAt(i++)],o=i<t.length?r[t.charAt(i)]:0;++i;const c=i<t.length?r[t.charAt(i)]:64;++i;const p=i<t.length?r[t.charAt(i)]:64;if(++i,s==null||o==null||c==null||p==null)throw new XD;const g=s<<2|o>>4;if(n.push(g),c!==64){const m=o<<4&240|c>>2;if(n.push(m),p!==64){const _=c<<6&192|p;n.push(_)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class XD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YD=function(t){const e=AN(t);return NN.encodeByteArray(e,!0)},O2=function(t){return YD(t).replace(/\./g,"")},CN=function(t){try{return NN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=()=>QD().__FIREBASE_DEFAULTS__,ZD=()=>{if(typeof process>"u"||typeof ZE>"u")return;const t=ZE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},eO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&CN(t[1]);return e&&JSON.parse(e)},Fv=()=>{try{return JD()||ZD()||eO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},IN=t=>{var e,r;return(r=(e=Fv())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},PN=t=>{const e=IN(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},RN=()=>{var t;return(t=Fv())===null||t===void 0?void 0:t.config},FN=t=>{var e;return(e=Fv())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[O2(JSON.stringify(r)),O2(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($s())}function nO(){var t;const e=(t=Fv())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oO(){const t=$s();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DN(){return!nO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ON(){try{return typeof indexedDB=="object"}catch{return!1}}function lO(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO="FirebaseError";class iu extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=cO,Object.setPrototypeOf(this,iu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ug.prototype.create)}}class ug{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?uO(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new iu(i,o,n)}}function uO(t,e){return t.replace(fO,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const fO=/\{\$([^}]+)}/g;function hO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function rh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const s=t[i],a=e[i];if(e6(s)&&e6(a)){if(!rh(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function e6(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Qm(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Jm(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function dO(t,e){const r=new pO(t,e);return r.subscribe.bind(r)}class pO{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");mO(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=bw),i.error===void 0&&(i.error=bw),i.complete===void 0&&(i.complete=bw);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mO(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function bw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t){return t&&t._delegate?t._delegate:t}class nh{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new tO;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e?.identifier),i=(r=e?.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vO(e))try{this.getOrInitializeService({instanceIdentifier:rd})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=rd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rd){return this.instances.has(e)}getOptions(e=rd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&a.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:xO(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=rd){return this.component?this.component.multipleInstances?e:rd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xO(t){return t===rd?void 0:t}function vO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new gO(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ln||(ln={}));const wO={debug:ln.DEBUG,verbose:ln.VERBOSE,info:ln.INFO,warn:ln.WARN,error:ln.ERROR,silent:ln.SILENT},_O=ln.INFO,bO={[ln.DEBUG]:"log",[ln.VERBOSE]:"log",[ln.INFO]:"info",[ln.WARN]:"warn",[ln.ERROR]:"error"},EO=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=bO[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class i4{constructor(e){this.name=e,this._logLevel=_O,this._logHandler=EO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ln))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ln.DEBUG,...e),this._logHandler(this,ln.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ln.VERBOSE,...e),this._logHandler(this,ln.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ln.INFO,...e),this._logHandler(this,ln.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ln.WARN,...e),this._logHandler(this,ln.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ln.ERROR,...e),this._logHandler(this,ln.ERROR,...e)}}const SO=(t,e)=>e.some(r=>t instanceof r);let t6,r6;function kO(){return t6||(t6=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TO(){return r6||(r6=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jN=new WeakMap,M5=new WeakMap,MN=new WeakMap,Ew=new WeakMap,s4=new WeakMap;function AO(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{r(Qf(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&jN.set(r,t)}).catch(()=>{}),s4.set(e,t),e}function NO(t){if(M5.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{r(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});M5.set(t,e)}let B5={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return M5.get(t);if(e==="objectStoreNames")return t.objectStoreNames||MN.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Qf(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function CO(t){B5=t(B5)}function IO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Sw(this),e,...r);return MN.set(n,e.sort?e.sort():[e]),Qf(n)}:TO().includes(t)?function(...e){return t.apply(Sw(this),e),Qf(jN.get(this))}:function(...e){return Qf(t.apply(Sw(this),e))}}function PO(t){return typeof t=="function"?IO(t):(t instanceof IDBTransaction&&NO(t),SO(t,kO())?new Proxy(t,B5):t)}function Qf(t){if(t instanceof IDBRequest)return AO(t);if(Ew.has(t))return Ew.get(t);const e=PO(t);return e!==t&&(Ew.set(t,e),s4.set(e,t)),e}const Sw=t=>s4.get(t);function RO(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=Qf(a);return n&&a.addEventListener("upgradeneeded",l=>{n(Qf(a.result),l.oldVersion,l.newVersion,Qf(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const FO=["get","getKey","getAll","getAllKeys","count"],LO=["put","add","delete","clear"],kw=new Map;function n6(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kw.get(e))return kw.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=LO.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||FO.includes(r)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),i&&l.done]))[0]};return kw.set(e,s),s}CO(t=>({...t,get:(e,r,n)=>n6(e,r)||t.get(e,r,n),has:(e,r)=>!!n6(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(OO(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function OO(t){const e=t.getComponent();return e?.type==="VERSION"}const V5="@firebase/app",i6="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=new i4("@firebase/app"),jO="@firebase/app-compat",MO="@firebase/analytics-compat",BO="@firebase/analytics",VO="@firebase/app-check-compat",UO="@firebase/app-check",zO="@firebase/auth",$O="@firebase/auth-compat",qO="@firebase/database",HO="@firebase/data-connect",WO="@firebase/database-compat",GO="@firebase/functions",KO="@firebase/functions-compat",XO="@firebase/installations",YO="@firebase/installations-compat",QO="@firebase/messaging",JO="@firebase/messaging-compat",ZO="@firebase/performance",ej="@firebase/performance-compat",tj="@firebase/remote-config",rj="@firebase/remote-config-compat",nj="@firebase/storage",ij="@firebase/storage-compat",sj="@firebase/firestore",aj="@firebase/vertexai-preview",oj="@firebase/firestore-compat",lj="firebase",cj="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2="[DEFAULT]",uj={[V5]:"fire-core",[jO]:"fire-core-compat",[BO]:"fire-analytics",[MO]:"fire-analytics-compat",[UO]:"fire-app-check",[VO]:"fire-app-check-compat",[zO]:"fire-auth",[$O]:"fire-auth-compat",[qO]:"fire-rtdb",[HO]:"fire-data-connect",[WO]:"fire-rtdb-compat",[GO]:"fire-fn",[KO]:"fire-fn-compat",[XO]:"fire-iid",[YO]:"fire-iid-compat",[QO]:"fire-fcm",[JO]:"fire-fcm-compat",[ZO]:"fire-perf",[ej]:"fire-perf-compat",[tj]:"fire-rc",[rj]:"fire-rc-compat",[nj]:"fire-gcs",[ij]:"fire-gcs-compat",[sj]:"fire-fst",[oj]:"fire-fst-compat",[aj]:"fire-vertex","fire-js":"fire-js",[lj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=new Map,fj=new Map,U5=new Map;function s6(t,e){try{t.container.addComponent(e)}catch(r){Uu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ed(t){const e=t.name;if(U5.has(e))return Uu.debug(`There were multiple attempts to register component ${e}.`),!1;U5.set(e,t);for(const r of M2.values())s6(r,t);for(const r of fj.values())s6(r,t);return!0}function Up(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function hj(t,e,r=j2){Up(t,e).clearInstance(r)}function Bc(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jf=new ug("app","Firebase",dj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new nh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=cj;function BN(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:j2,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Jf.create("bad-app-name",{appName:String(i)});if(r||(r=RN()),!r)throw Jf.create("no-options");const s=M2.get(i);if(s){if(rh(r,s.options)&&rh(n,s.config))return s;throw Jf.create("duplicate-app",{appName:i})}const a=new yO(i);for(const l of U5.values())a.addComponent(l);const o=new pj(r,n,a);return M2.set(i,o),o}function a4(t=j2){const e=M2.get(t);if(!e&&t===j2&&RN())return BN();if(!e)throw Jf.create("no-app",{appName:t});return e}function Wc(t,e,r){var n;let i=(n=uj[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Uu.warn(o.join(" "));return}Ed(new nh(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj="firebase-heartbeat-database",gj=1,P1="firebase-heartbeat-store";let Tw=null;function VN(){return Tw||(Tw=RO(mj,gj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(P1)}catch(r){console.warn(r)}}}}).catch(t=>{throw Jf.create("idb-open",{originalErrorMessage:t.message})})),Tw}async function xj(t){try{const r=(await VN()).transaction(P1),n=await r.objectStore(P1).get(UN(t));return await r.done,n}catch(e){if(e instanceof iu)Uu.warn(e.message);else{const r=Jf.create("idb-get",{originalErrorMessage:e?.message});Uu.warn(r.message)}}}async function a6(t,e){try{const n=(await VN()).transaction(P1,"readwrite");await n.objectStore(P1).put(e,UN(t)),await n.done}catch(r){if(r instanceof iu)Uu.warn(r.message);else{const n=Jf.create("idb-set",{originalErrorMessage:r?.message});Uu.warn(n.message)}}}function UN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=1024,yj=720*60*60*1e3;class wj{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new bj(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=o6();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=yj}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Uu.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=o6(),{heartbeatsToSend:n,unsentEntries:i}=_j(this._heartbeatsCache.heartbeats),s=O2(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return Uu.warn(r),""}}}function o6(){return new Date().toISOString().substring(0,10)}function _j(t,e=vj){const r=[];let n=t.slice();for(const i of t){const s=r.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),l6(r)>e){s.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),l6(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class bj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ON()?lO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await xj(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return a6(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return a6(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function l6(t){return O2(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(t){Ed(new nh("platform-logger",e=>new DO(e),"PRIVATE")),Ed(new nh("heartbeat",e=>new wj(e),"PRIVATE")),Wc(V5,i6,t),Wc(V5,i6,"esm2017"),Wc("fire-js","")}Ej("");var c6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var md,zN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,A){function T(){}T.prototype=A.prototype,P.D=A.prototype,P.prototype=new T,P.prototype.constructor=P,P.C=function(O,I,D){for(var B=Array(arguments.length-2),re=2;re<arguments.length;re++)B[re-2]=arguments[re];return A.prototype[I].apply(O,B)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,A,T){T||(T=0);var O=Array(16);if(typeof A=="string")for(var I=0;16>I;++I)O[I]=A.charCodeAt(T++)|A.charCodeAt(T++)<<8|A.charCodeAt(T++)<<16|A.charCodeAt(T++)<<24;else for(I=0;16>I;++I)O[I]=A[T++]|A[T++]<<8|A[T++]<<16|A[T++]<<24;A=P.g[0],T=P.g[1],I=P.g[2];var D=P.g[3],B=A+(D^T&(I^D))+O[0]+3614090360&4294967295;A=T+(B<<7&4294967295|B>>>25),B=D+(I^A&(T^I))+O[1]+3905402710&4294967295,D=A+(B<<12&4294967295|B>>>20),B=I+(T^D&(A^T))+O[2]+606105819&4294967295,I=D+(B<<17&4294967295|B>>>15),B=T+(A^I&(D^A))+O[3]+3250441966&4294967295,T=I+(B<<22&4294967295|B>>>10),B=A+(D^T&(I^D))+O[4]+4118548399&4294967295,A=T+(B<<7&4294967295|B>>>25),B=D+(I^A&(T^I))+O[5]+1200080426&4294967295,D=A+(B<<12&4294967295|B>>>20),B=I+(T^D&(A^T))+O[6]+2821735955&4294967295,I=D+(B<<17&4294967295|B>>>15),B=T+(A^I&(D^A))+O[7]+4249261313&4294967295,T=I+(B<<22&4294967295|B>>>10),B=A+(D^T&(I^D))+O[8]+1770035416&4294967295,A=T+(B<<7&4294967295|B>>>25),B=D+(I^A&(T^I))+O[9]+2336552879&4294967295,D=A+(B<<12&4294967295|B>>>20),B=I+(T^D&(A^T))+O[10]+4294925233&4294967295,I=D+(B<<17&4294967295|B>>>15),B=T+(A^I&(D^A))+O[11]+2304563134&4294967295,T=I+(B<<22&4294967295|B>>>10),B=A+(D^T&(I^D))+O[12]+1804603682&4294967295,A=T+(B<<7&4294967295|B>>>25),B=D+(I^A&(T^I))+O[13]+4254626195&4294967295,D=A+(B<<12&4294967295|B>>>20),B=I+(T^D&(A^T))+O[14]+2792965006&4294967295,I=D+(B<<17&4294967295|B>>>15),B=T+(A^I&(D^A))+O[15]+1236535329&4294967295,T=I+(B<<22&4294967295|B>>>10),B=A+(I^D&(T^I))+O[1]+4129170786&4294967295,A=T+(B<<5&4294967295|B>>>27),B=D+(T^I&(A^T))+O[6]+3225465664&4294967295,D=A+(B<<9&4294967295|B>>>23),B=I+(A^T&(D^A))+O[11]+643717713&4294967295,I=D+(B<<14&4294967295|B>>>18),B=T+(D^A&(I^D))+O[0]+3921069994&4294967295,T=I+(B<<20&4294967295|B>>>12),B=A+(I^D&(T^I))+O[5]+3593408605&4294967295,A=T+(B<<5&4294967295|B>>>27),B=D+(T^I&(A^T))+O[10]+38016083&4294967295,D=A+(B<<9&4294967295|B>>>23),B=I+(A^T&(D^A))+O[15]+3634488961&4294967295,I=D+(B<<14&4294967295|B>>>18),B=T+(D^A&(I^D))+O[4]+3889429448&4294967295,T=I+(B<<20&4294967295|B>>>12),B=A+(I^D&(T^I))+O[9]+568446438&4294967295,A=T+(B<<5&4294967295|B>>>27),B=D+(T^I&(A^T))+O[14]+3275163606&4294967295,D=A+(B<<9&4294967295|B>>>23),B=I+(A^T&(D^A))+O[3]+4107603335&4294967295,I=D+(B<<14&4294967295|B>>>18),B=T+(D^A&(I^D))+O[8]+1163531501&4294967295,T=I+(B<<20&4294967295|B>>>12),B=A+(I^D&(T^I))+O[13]+2850285829&4294967295,A=T+(B<<5&4294967295|B>>>27),B=D+(T^I&(A^T))+O[2]+4243563512&4294967295,D=A+(B<<9&4294967295|B>>>23),B=I+(A^T&(D^A))+O[7]+1735328473&4294967295,I=D+(B<<14&4294967295|B>>>18),B=T+(D^A&(I^D))+O[12]+2368359562&4294967295,T=I+(B<<20&4294967295|B>>>12),B=A+(T^I^D)+O[5]+4294588738&4294967295,A=T+(B<<4&4294967295|B>>>28),B=D+(A^T^I)+O[8]+2272392833&4294967295,D=A+(B<<11&4294967295|B>>>21),B=I+(D^A^T)+O[11]+1839030562&4294967295,I=D+(B<<16&4294967295|B>>>16),B=T+(I^D^A)+O[14]+4259657740&4294967295,T=I+(B<<23&4294967295|B>>>9),B=A+(T^I^D)+O[1]+2763975236&4294967295,A=T+(B<<4&4294967295|B>>>28),B=D+(A^T^I)+O[4]+1272893353&4294967295,D=A+(B<<11&4294967295|B>>>21),B=I+(D^A^T)+O[7]+4139469664&4294967295,I=D+(B<<16&4294967295|B>>>16),B=T+(I^D^A)+O[10]+3200236656&4294967295,T=I+(B<<23&4294967295|B>>>9),B=A+(T^I^D)+O[13]+681279174&4294967295,A=T+(B<<4&4294967295|B>>>28),B=D+(A^T^I)+O[0]+3936430074&4294967295,D=A+(B<<11&4294967295|B>>>21),B=I+(D^A^T)+O[3]+3572445317&4294967295,I=D+(B<<16&4294967295|B>>>16),B=T+(I^D^A)+O[6]+76029189&4294967295,T=I+(B<<23&4294967295|B>>>9),B=A+(T^I^D)+O[9]+3654602809&4294967295,A=T+(B<<4&4294967295|B>>>28),B=D+(A^T^I)+O[12]+3873151461&4294967295,D=A+(B<<11&4294967295|B>>>21),B=I+(D^A^T)+O[15]+530742520&4294967295,I=D+(B<<16&4294967295|B>>>16),B=T+(I^D^A)+O[2]+3299628645&4294967295,T=I+(B<<23&4294967295|B>>>9),B=A+(I^(T|~D))+O[0]+4096336452&4294967295,A=T+(B<<6&4294967295|B>>>26),B=D+(T^(A|~I))+O[7]+1126891415&4294967295,D=A+(B<<10&4294967295|B>>>22),B=I+(A^(D|~T))+O[14]+2878612391&4294967295,I=D+(B<<15&4294967295|B>>>17),B=T+(D^(I|~A))+O[5]+4237533241&4294967295,T=I+(B<<21&4294967295|B>>>11),B=A+(I^(T|~D))+O[12]+1700485571&4294967295,A=T+(B<<6&4294967295|B>>>26),B=D+(T^(A|~I))+O[3]+2399980690&4294967295,D=A+(B<<10&4294967295|B>>>22),B=I+(A^(D|~T))+O[10]+4293915773&4294967295,I=D+(B<<15&4294967295|B>>>17),B=T+(D^(I|~A))+O[1]+2240044497&4294967295,T=I+(B<<21&4294967295|B>>>11),B=A+(I^(T|~D))+O[8]+1873313359&4294967295,A=T+(B<<6&4294967295|B>>>26),B=D+(T^(A|~I))+O[15]+4264355552&4294967295,D=A+(B<<10&4294967295|B>>>22),B=I+(A^(D|~T))+O[6]+2734768916&4294967295,I=D+(B<<15&4294967295|B>>>17),B=T+(D^(I|~A))+O[13]+1309151649&4294967295,T=I+(B<<21&4294967295|B>>>11),B=A+(I^(T|~D))+O[4]+4149444226&4294967295,A=T+(B<<6&4294967295|B>>>26),B=D+(T^(A|~I))+O[11]+3174756917&4294967295,D=A+(B<<10&4294967295|B>>>22),B=I+(A^(D|~T))+O[2]+718787259&4294967295,I=D+(B<<15&4294967295|B>>>17),B=T+(D^(I|~A))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+A&4294967295,P.g[1]=P.g[1]+(I+(B<<21&4294967295|B>>>11))&4294967295,P.g[2]=P.g[2]+I&4294967295,P.g[3]=P.g[3]+D&4294967295}n.prototype.u=function(P,A){A===void 0&&(A=P.length);for(var T=A-this.blockSize,O=this.B,I=this.h,D=0;D<A;){if(I==0)for(;D<=T;)i(this,P,D),D+=this.blockSize;if(typeof P=="string"){for(;D<A;)if(O[I++]=P.charCodeAt(D++),I==this.blockSize){i(this,O),I=0;break}}else for(;D<A;)if(O[I++]=P[D++],I==this.blockSize){i(this,O),I=0;break}}this.h=I,this.o+=A},n.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var A=1;A<P.length-8;++A)P[A]=0;var T=8*this.o;for(A=P.length-8;A<P.length;++A)P[A]=T&255,T/=256;for(this.u(P),P=Array(16),A=T=0;4>A;++A)for(var O=0;32>O;O+=8)P[T++]=this.g[A]>>>O&255;return P};function s(P,A){var T=o;return Object.prototype.hasOwnProperty.call(T,P)?T[P]:T[P]=A(P)}function a(P,A){this.h=A;for(var T=[],O=!0,I=P.length-1;0<=I;I--){var D=P[I]|0;O&&D==A||(T[I]=D,O=!1)}this.g=T}var o={};function l(P){return-128<=P&&128>P?s(P,function(A){return new a([A|0],0>A?-1:0)}):new a([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return p;if(0>P)return b(c(-P));for(var A=[],T=1,O=0;P>=T;O++)A[O]=P/T|0,T*=4294967296;return new a(A,0)}function f(P,A){if(P.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(P.charAt(0)=="-")return b(f(P.substring(1),A));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(A,8)),O=p,I=0;I<P.length;I+=8){var D=Math.min(8,P.length-I),B=parseInt(P.substring(I,I+D),A);8>D?(D=c(Math.pow(A,D)),O=O.j(D).add(c(B))):(O=O.j(T),O=O.add(c(B)))}return O}var p=l(0),g=l(1),m=l(16777216);t=a.prototype,t.m=function(){if(w(this))return-b(this).m();for(var P=0,A=1,T=0;T<this.g.length;T++){var O=this.i(T);P+=(0<=O?O:4294967296+O)*A,A*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(_(this))return"0";if(w(this))return"-"+b(this).toString(P);for(var A=c(Math.pow(P,6)),T=this,O="";;){var I=j(T,A).g;T=k(T,I.j(A));var D=((0<T.g.length?T.g[0]:T.h)>>>0).toString(P);if(T=I,_(T))return D+O;for(;6>D.length;)D="0"+D;O=D+O}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function _(P){if(P.h!=0)return!1;for(var A=0;A<P.g.length;A++)if(P.g[A]!=0)return!1;return!0}function w(P){return P.h==-1}t.l=function(P){return P=k(this,P),w(P)?-1:_(P)?0:1};function b(P){for(var A=P.g.length,T=[],O=0;O<A;O++)T[O]=~P.g[O];return new a(T,~P.h).add(g)}t.abs=function(){return w(this)?b(this):this},t.add=function(P){for(var A=Math.max(this.g.length,P.g.length),T=[],O=0,I=0;I<=A;I++){var D=O+(this.i(I)&65535)+(P.i(I)&65535),B=(D>>>16)+(this.i(I)>>>16)+(P.i(I)>>>16);O=B>>>16,D&=65535,B&=65535,T[I]=B<<16|D}return new a(T,T[T.length-1]&-2147483648?-1:0)};function k(P,A){return P.add(b(A))}t.j=function(P){if(_(this)||_(P))return p;if(w(this))return w(P)?b(this).j(b(P)):b(b(this).j(P));if(w(P))return b(this.j(b(P)));if(0>this.l(m)&&0>P.l(m))return c(this.m()*P.m());for(var A=this.g.length+P.g.length,T=[],O=0;O<2*A;O++)T[O]=0;for(O=0;O<this.g.length;O++)for(var I=0;I<P.g.length;I++){var D=this.i(O)>>>16,B=this.i(O)&65535,re=P.i(I)>>>16,_e=P.i(I)&65535;T[2*O+2*I]+=B*_e,R(T,2*O+2*I),T[2*O+2*I+1]+=D*_e,R(T,2*O+2*I+1),T[2*O+2*I+1]+=B*re,R(T,2*O+2*I+1),T[2*O+2*I+2]+=D*re,R(T,2*O+2*I+2)}for(O=0;O<A;O++)T[O]=T[2*O+1]<<16|T[2*O];for(O=A;O<2*A;O++)T[O]=0;return new a(T,0)};function R(P,A){for(;(P[A]&65535)!=P[A];)P[A+1]+=P[A]>>>16,P[A]&=65535,A++}function C(P,A){this.g=P,this.h=A}function j(P,A){if(_(A))throw Error("division by zero");if(_(P))return new C(p,p);if(w(P))return A=j(b(P),A),new C(b(A.g),b(A.h));if(w(A))return A=j(P,b(A)),new C(b(A.g),A.h);if(30<P.g.length){if(w(P)||w(A))throw Error("slowDivide_ only works with positive integers.");for(var T=g,O=A;0>=O.l(P);)T=X(T),O=X(O);var I=K(T,1),D=K(O,1);for(O=K(O,2),T=K(T,2);!_(O);){var B=D.add(O);0>=B.l(P)&&(I=I.add(T),D=B),O=K(O,1),T=K(T,1)}return A=k(P,I.j(A)),new C(I,A)}for(I=p;0<=P.l(A);){for(T=Math.max(1,Math.floor(P.m()/A.m())),O=Math.ceil(Math.log(T)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),D=c(T),B=D.j(A);w(B)||0<B.l(P);)T-=O,D=c(T),B=D.j(A);_(D)&&(D=g),I=I.add(D),P=k(P,B)}return new C(I,P)}t.A=function(P){return j(this,P).h},t.and=function(P){for(var A=Math.max(this.g.length,P.g.length),T=[],O=0;O<A;O++)T[O]=this.i(O)&P.i(O);return new a(T,this.h&P.h)},t.or=function(P){for(var A=Math.max(this.g.length,P.g.length),T=[],O=0;O<A;O++)T[O]=this.i(O)|P.i(O);return new a(T,this.h|P.h)},t.xor=function(P){for(var A=Math.max(this.g.length,P.g.length),T=[],O=0;O<A;O++)T[O]=this.i(O)^P.i(O);return new a(T,this.h^P.h)};function X(P){for(var A=P.g.length+1,T=[],O=0;O<A;O++)T[O]=P.i(O)<<1|P.i(O-1)>>>31;return new a(T,P.h)}function K(P,A){var T=A>>5;A%=32;for(var O=P.g.length-T,I=[],D=0;D<O;D++)I[D]=0<A?P.i(D+T)>>>A|P.i(D+T+1)<<32-A:P.i(D+T);return new a(I,P.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,zN=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=f,md=a}).apply(typeof c6<"u"?c6:typeof self<"u"?self:typeof window<"u"?window:{});var Cx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $N,Zm,qN,h2,z5,HN,WN,GN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,V,Q){return y==Array.prototype||y==Object.prototype||(y[V]=Q.value),y};function r(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cx=="object"&&Cx];for(var V=0;V<y.length;++V){var Q=y[V];if(Q&&Q.Math==Math)return Q}throw Error("Cannot find global object")}var n=r(this);function i(y,V){if(V)e:{var Q=n;y=y.split(".");for(var me=0;me<y.length-1;me++){var $e=y[me];if(!($e in Q))break e;Q=Q[$e]}y=y[y.length-1],me=Q[y],V=V(me),V!=me&&V!=null&&e(Q,y,{configurable:!0,writable:!0,value:V})}}function s(y,V){y instanceof String&&(y+="");var Q=0,me=!1,$e={next:function(){if(!me&&Q<y.length){var at=Q++;return{value:V(at,y[at]),done:!1}}return me=!0,{done:!0,value:void 0}}};return $e[Symbol.iterator]=function(){return $e},$e}i("Array.prototype.values",function(y){return y||function(){return s(this,function(V,Q){return Q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(y){var V=typeof y;return V=V!="object"?V:y?Array.isArray(y)?"array":V:"null",V=="array"||V=="object"&&typeof y.length=="number"}function c(y){var V=typeof y;return V=="object"&&y!=null||V=="function"}function f(y,V,Q){return y.call.apply(y.bind,arguments)}function p(y,V,Q){if(!y)throw Error();if(2<arguments.length){var me=Array.prototype.slice.call(arguments,2);return function(){var $e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($e,me),y.apply(V,$e)}}return function(){return y.apply(V,arguments)}}function g(y,V,Q){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function m(y,V){var Q=Array.prototype.slice.call(arguments,1);return function(){var me=Q.slice();return me.push.apply(me,arguments),y.apply(this,me)}}function _(y,V){function Q(){}Q.prototype=V.prototype,y.aa=V.prototype,y.prototype=new Q,y.prototype.constructor=y,y.Qb=function(me,$e,at){for(var It=Array(arguments.length-2),dn=2;dn<arguments.length;dn++)It[dn-2]=arguments[dn];return V.prototype[$e].apply(me,It)}}function w(y){const V=y.length;if(0<V){const Q=Array(V);for(let me=0;me<V;me++)Q[me]=y[me];return Q}return[]}function b(y,V){for(let Q=1;Q<arguments.length;Q++){const me=arguments[Q];if(l(me)){const $e=y.length||0,at=me.length||0;y.length=$e+at;for(let It=0;It<at;It++)y[$e+It]=me[It]}else y.push(me)}}class k{constructor(V,Q){this.i=V,this.j=Q,this.h=0,this.g=null}get(){let V;return 0<this.h?(this.h--,V=this.g,this.g=V.next,V.next=null):V=this.i(),V}}function R(y){return/^[\s\xa0]*$/.test(y)}function C(){var y=o.navigator;return y&&(y=y.userAgent)?y:""}function j(y){return j[" "](y),y}j[" "]=function(){};var X=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function K(y,V,Q){for(const me in y)V.call(Q,y[me],me,y)}function P(y,V){for(const Q in y)V.call(void 0,y[Q],Q,y)}function A(y){const V={};for(const Q in y)V[Q]=y[Q];return V}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(y,V){let Q,me;for(let $e=1;$e<arguments.length;$e++){me=arguments[$e];for(Q in me)y[Q]=me[Q];for(let at=0;at<T.length;at++)Q=T[at],Object.prototype.hasOwnProperty.call(me,Q)&&(y[Q]=me[Q])}}function I(y){var V=1;y=y.split(":");const Q=[];for(;0<V&&y.length;)Q.push(y.shift()),V--;return y.length&&Q.push(y.join(":")),Q}function D(y){o.setTimeout(()=>{throw y},0)}function B(){var y=H;let V=null;return y.g&&(V=y.g,y.g=y.g.next,y.g||(y.h=null),V.next=null),V}class re{constructor(){this.h=this.g=null}add(V,Q){const me=_e.get();me.set(V,Q),this.h?this.h.next=me:this.g=me,this.h=me}}var _e=new k(()=>new Ce,y=>y.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(V,Q){this.h=V,this.g=Q,this.next=null}reset(){this.next=this.g=this.h=null}}let we,ce=!1,H=new re,te=()=>{const y=o.Promise.resolve(void 0);we=()=>{y.then(J)}};var J=()=>{for(var y;y=B();){try{y.h.call(y.g)}catch(Q){D(Q)}var V=_e;V.j(y),100>V.h&&(V.h++,y.next=V.g,V.g=y)}ce=!1};function N(){this.s=this.s,this.C=this.C}N.prototype.s=!1,N.prototype.ma=function(){this.s||(this.s=!0,this.N())},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(y,V){this.type=y,this.g=this.target=V,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var W=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var y=!1,V=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const Q=()=>{};o.addEventListener("test",Q,V),o.removeEventListener("test",Q,V)}catch{}return y})();function Y(y,V){if(U.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var Q=this.type=y.type,me=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=V,V=y.relatedTarget){if(X){e:{try{j(V.nodeName);var $e=!0;break e}catch{}$e=!1}$e||(V=null)}}else Q=="mouseover"?V=y.fromElement:Q=="mouseout"&&(V=y.toElement);this.relatedTarget=V,me?(this.clientX=me.clientX!==void 0?me.clientX:me.pageX,this.clientY=me.clientY!==void 0?me.clientY:me.pageY,this.screenX=me.screenX||0,this.screenY=me.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:ae[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&Y.aa.h.call(this)}}_(Y,U);var ae={2:"touch",3:"pen",4:"mouse"};Y.prototype.h=function(){Y.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),he=0;function xe(y,V,Q,me,$e){this.listener=y,this.proxy=null,this.src=V,this.type=Q,this.capture=!!me,this.ha=$e,this.key=++he,this.da=this.fa=!1}function ke(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Fe(y){this.src=y,this.g={},this.h=0}Fe.prototype.add=function(y,V,Q,me,$e){var at=y.toString();y=this.g[at],y||(y=this.g[at]=[],this.h++);var It=Ze(y,V,me,$e);return-1<It?(V=y[It],Q||(V.fa=!1)):(V=new xe(V,this.src,at,!!me,$e),V.fa=Q,y.push(V)),V};function oe(y,V){var Q=V.type;if(Q in y.g){var me=y.g[Q],$e=Array.prototype.indexOf.call(me,V,void 0),at;(at=0<=$e)&&Array.prototype.splice.call(me,$e,1),at&&(ke(V),y.g[Q].length==0&&(delete y.g[Q],y.h--))}}function Ze(y,V,Q,me){for(var $e=0;$e<y.length;++$e){var at=y[$e];if(!at.da&&at.listener==V&&at.capture==!!Q&&at.ha==me)return $e}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),fe={};function ut(y,V,Q,me,$e){if(Array.isArray(V)){for(var at=0;at<V.length;at++)ut(y,V[at],Q,me,$e);return null}return Q=ot(Q),y&&y[pe]?y.K(V,Q,c(me)?!!me.capture:!1,$e):rt(y,V,Q,!1,me,$e)}function rt(y,V,Q,me,$e,at){if(!V)throw Error("Invalid event type");var It=c($e)?!!$e.capture:!!$e,dn=Be(y);if(dn||(y[Re]=dn=new Fe(y)),Q=dn.add(V,Q,me,It,at),Q.proxy)return Q;if(me=lt(),Q.proxy=me,me.src=y,me.listener=Q,y.addEventListener)W||($e=It),$e===void 0&&($e=!1),y.addEventListener(V.toString(),me,$e);else if(y.attachEvent)y.attachEvent(ft(V.toString()),me);else if(y.addListener&&y.removeListener)y.addListener(me);else throw Error("addEventListener and attachEvent are unavailable.");return Q}function lt(){function y(Q){return V.call(y.src,y.listener,Q)}const V=Ie;return y}function le(y,V,Q,me,$e){if(Array.isArray(V))for(var at=0;at<V.length;at++)le(y,V[at],Q,me,$e);else me=c(me)?!!me.capture:!!me,Q=ot(Q),y&&y[pe]?(y=y.i,V=String(V).toString(),V in y.g&&(at=y.g[V],Q=Ze(at,Q,me,$e),-1<Q&&(ke(at[Q]),Array.prototype.splice.call(at,Q,1),at.length==0&&(delete y.g[V],y.h--)))):y&&(y=Be(y))&&(V=y.g[V.toString()],y=-1,V&&(y=Ze(V,Q,me,$e)),(Q=-1<y?V[y]:null)&&je(Q))}function je(y){if(typeof y!="number"&&y&&!y.da){var V=y.src;if(V&&V[pe])oe(V.i,y);else{var Q=y.type,me=y.proxy;V.removeEventListener?V.removeEventListener(Q,me,y.capture):V.detachEvent?V.detachEvent(ft(Q),me):V.addListener&&V.removeListener&&V.removeListener(me),(Q=Be(V))?(oe(Q,y),Q.h==0&&(Q.src=null,V[Re]=null)):ke(y)}}}function ft(y){return y in fe?fe[y]:fe[y]="on"+y}function Ie(y,V){if(y.da)y=!0;else{V=new Y(V,this);var Q=y.listener,me=y.ha||y.src;y.fa&&je(y),y=Q.call(me,V)}return y}function Be(y){return y=y[Re],y instanceof Fe?y:null}var tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ot(y){return typeof y=="function"?y:(y[tt]||(y[tt]=function(V){return y.handleEvent(V)}),y[tt])}function ht(){N.call(this),this.i=new Fe(this),this.M=this,this.F=null}_(ht,N),ht.prototype[pe]=!0,ht.prototype.removeEventListener=function(y,V,Q,me){le(this,y,V,Q,me)};function Pt(y,V){var Q,me=y.F;if(me)for(Q=[];me;me=me.F)Q.push(me);if(y=y.M,me=V.type||V,typeof V=="string")V=new U(V,y);else if(V instanceof U)V.target=V.target||y;else{var $e=V;V=new U(me,y),O(V,$e)}if($e=!0,Q)for(var at=Q.length-1;0<=at;at--){var It=V.g=Q[at];$e=Ft(It,me,!0,V)&&$e}if(It=V.g=y,$e=Ft(It,me,!0,V)&&$e,$e=Ft(It,me,!1,V)&&$e,Q)for(at=0;at<Q.length;at++)It=V.g=Q[at],$e=Ft(It,me,!1,V)&&$e}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var y=this.i,V;for(V in y.g){for(var Q=y.g[V],me=0;me<Q.length;me++)ke(Q[me]);delete y.g[V],y.h--}}this.F=null},ht.prototype.K=function(y,V,Q,me){return this.i.add(String(y),V,!1,Q,me)},ht.prototype.L=function(y,V,Q,me){return this.i.add(String(y),V,!0,Q,me)};function Ft(y,V,Q,me){if(V=y.i.g[String(V)],!V)return!0;V=V.concat();for(var $e=!0,at=0;at<V.length;++at){var It=V[at];if(It&&!It.da&&It.capture==Q){var dn=It.listener,si=It.ha||It.src;It.fa&&oe(y.i,It),$e=dn.call(si,me)!==!1&&$e}}return $e&&!me.defaultPrevented}function jt(y,V,Q){if(typeof y=="function")Q&&(y=g(y,Q));else if(y&&typeof y.handleEvent=="function")y=g(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(V)?-1:o.setTimeout(y,V||0)}function wt(y){y.g=jt(()=>{y.g=null,y.i&&(y.i=!1,wt(y))},y.l);const V=y.h;y.h=null,y.m.apply(null,V)}class At extends N{constructor(V,Q){super(),this.m=V,this.l=Q,this.h=null,this.i=!1,this.g=null}j(V){this.h=arguments,this.g?this.i=!0:wt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xt(y){N.call(this),this.h=y,this.g={}}_(Xt,N);var Gt=[];function qt(y){K(y.g,function(V,Q){this.g.hasOwnProperty(Q)&&je(V)},y),y.g={}}Xt.prototype.N=function(){Xt.aa.N.call(this),qt(this)},Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wr=o.JSON.stringify,rn=o.JSON.parse,Me=class{stringify(y){return o.JSON.stringify(y,void 0)}parse(y){return o.JSON.parse(y,void 0)}};function Mt(){}Mt.prototype.h=null;function Vt(y){return y.h||(y.h=y.i())}function rr(){}var ar={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ur(){U.call(this,"d")}_(ur,U);function Jt(){U.call(this,"c")}_(Jt,U);var mr={},an=null;function zr(){return an=an||new ht}mr.La="serverreachability";function Nn(y){U.call(this,mr.La,y)}_(Nn,U);function Cn(y){const V=zr();Pt(V,new Nn(V))}mr.STAT_EVENT="statevent";function ir(y,V){U.call(this,mr.STAT_EVENT,y),this.stat=V}_(ir,U);function qr(y){const V=zr();Pt(V,new ir(V,y))}mr.Ma="timingevent";function is(y,V){U.call(this,mr.Ma,y),this.size=V}_(is,U);function Dn(y,V){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){y()},V)}function qi(){this.g=!0}qi.prototype.xa=function(){this.g=!1};function bn(y,V,Q,me,$e,at){y.info(function(){if(y.g)if(at)for(var It="",dn=at.split("&"),si=0;si<dn.length;si++){var Gr=dn[si].split("=");if(1<Gr.length){var Qr=Gr[0];Gr=Gr[1];var gn=Qr.split("_");It=2<=gn.length&&gn[1]=="type"?It+(Qr+"="+Gr+"&"):It+(Qr+"=redacted&")}}else It=null;else It=at;return"XMLHTTP REQ ("+me+") [attempt "+$e+"]: "+V+`
`+Q+`
`+It})}function Zn(y,V,Q,me,$e,at,It){y.info(function(){return"XMLHTTP RESP ("+me+") [ attempt "+$e+"]: "+V+`
`+Q+`
`+at+" "+It})}function ne(y,V,Q,me){y.info(function(){return"XMLHTTP TEXT ("+V+"): "+ve(y,Q)+(me?" "+me:"")})}function Te(y,V){y.info(function(){return"TIMEOUT: "+V})}qi.prototype.info=function(){};function ve(y,V){if(!y.g)return V;if(!V)return null;try{var Q=JSON.parse(V);if(Q){for(y=0;y<Q.length;y++)if(Array.isArray(Q[y])){var me=Q[y];if(!(2>me.length)){var $e=me[1];if(Array.isArray($e)&&!(1>$e.length)){var at=$e[0];if(at!="noop"&&at!="stop"&&at!="close")for(var It=1;It<$e.length;It++)$e[It]=""}}}}return wr(Q)}catch{return V}}var ye={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ae={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ne;function He(){}_(He,Mt),He.prototype.g=function(){return new XMLHttpRequest},He.prototype.i=function(){return{}},Ne=new He;function nt(y,V,Q,me){this.j=y,this.i=V,this.l=Q,this.R=me||1,this.U=new Xt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ke}function Ke(){this.i=null,this.g="",this.h=!1}var Xe={},Je={};function _t(y,V,Q){y.L=1,y.v=Vo(Fs(V)),y.m=Q,y.P=!0,Dt(y,null)}function Dt(y,V){y.F=Date.now(),Tt(y),y.A=Fs(y.v);var Q=y.A,me=y.R;Array.isArray(me)||(me=[String(me)]),_r(Q.i,"t",me),y.C=0,Q=y.j.J,y.h=new Ke,y.g=Ho(y.j,Q?V:null,!y.m),0<y.O&&(y.M=new At(g(y.Y,y,y.g),y.O)),V=y.U,Q=y.g,me=y.ca;var $e="readystatechange";Array.isArray($e)||($e&&(Gt[0]=$e.toString()),$e=Gt);for(var at=0;at<$e.length;at++){var It=ut(Q,$e[at],me||V.handleEvent,!1,V.h||V);if(!It)break;V.g[It.key]=It}V=y.H?A(y.H):{},y.m?(y.u||(y.u="POST"),V["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,V)):(y.u="GET",y.g.ea(y.A,y.u,null,V)),Cn(),bn(y.i,y.u,y.A,y.l,y.R,y.m)}nt.prototype.ca=function(y){y=y.target;const V=this.M;V&&ws(y)==3?V.j():this.Y(y)},nt.prototype.Y=function(y){try{if(y==this.g)e:{const gn=ws(this.g);var V=this.g.Ba();const Ks=this.g.Z();if(!(3>gn)&&(gn!=3||this.g&&(this.h.h||this.g.oa()||Hl(this.g)))){this.J||gn!=4||V==7||(V==8||0>=Ks?Cn(3):Cn(2)),on(this);var Q=this.g.Z();this.X=Q;t:if(Ht(this)){var me=Hl(this.g);y="";var $e=me.length,at=ws(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),Dr(this);var It="";break t}this.h.i=new o.TextDecoder}for(V=0;V<$e;V++)this.h.h=!0,y+=this.h.i.decode(me[V],{stream:!(at&&V==$e-1)});me.length=0,this.h.g+=y,this.C=0,It=this.h.g}else It=this.g.oa();if(this.o=Q==200,Zn(this.i,this.u,this.A,this.l,this.R,gn,Q),this.o){if(this.T&&!this.K){t:{if(this.g){var dn,si=this.g;if((dn=si.g?si.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(dn)){var Gr=dn;break t}}Gr=null}if(Q=Gr)ne(this.i,this.l,Q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Na(this,Q);else{this.o=!1,this.s=3,qr(12),fn(this),Dr(this);break e}}if(this.P){Q=!0;let Ms;for(;!this.J&&this.C<It.length;)if(Ms=Lt(this,It),Ms==Je){gn==4&&(this.s=4,qr(14),Q=!1),ne(this.i,this.l,null,"[Incomplete Response]");break}else if(Ms==Xe){this.s=4,qr(15),ne(this.i,this.l,It,"[Invalid Chunk]"),Q=!1;break}else ne(this.i,this.l,Ms,null),Na(this,Ms);if(Ht(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gn!=4||It.length!=0||this.h.h||(this.s=1,qr(16),Q=!1),this.o=this.o&&Q,!Q)ne(this.i,this.l,It,"[Invalid Chunked Response]"),fn(this),Dr(this);else if(0<It.length&&!this.W){this.W=!0;var Qr=this.j;Qr.g==this&&Qr.ba&&!Qr.M&&(Qr.j.info("Great, no buffering proxy detected. Bytes received: "+It.length),nn(Qr),Qr.M=!0,qr(11))}}else ne(this.i,this.l,It,null),Na(this,It);gn==4&&fn(this),this.o&&!this.J&&(gn==4?hn(this.j,this):(this.o=!1,Tt(this)))}else _s(this.g),Q==400&&0<It.indexOf("Unknown SID")?(this.s=3,qr(12)):(this.s=0,qr(13)),fn(this),Dr(this)}}}catch{}finally{}};function Ht(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function Lt(y,V){var Q=y.C,me=V.indexOf(`
`,Q);return me==-1?Je:(Q=Number(V.substring(Q,me)),isNaN(Q)?Xe:(me+=1,me+Q>V.length?Je:(V=V.slice(me,me+Q),y.C=me+Q,V)))}nt.prototype.cancel=function(){this.J=!0,fn(this)};function Tt(y){y.S=Date.now()+y.I,br(y,y.I)}function br(y,V){if(y.B!=null)throw Error("WatchDog timer not null");y.B=Dn(g(y.ba,y),V)}function on(y){y.B&&(o.clearTimeout(y.B),y.B=null)}nt.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(Te(this.i,this.A),this.L!=2&&(Cn(),qr(17)),fn(this),this.s=2,Dr(this)):br(this,this.S-y)};function Dr(y){y.j.G==0||y.J||hn(y.j,y)}function fn(y){on(y);var V=y.M;V&&typeof V.ma=="function"&&V.ma(),y.M=null,qt(y.U),y.g&&(V=y.g,y.g=null,V.abort(),V.ma())}function Na(y,V){try{var Q=y.j;if(Q.G!=0&&(Q.g==y||En(Q.h,y))){if(!y.K&&En(Q.h,y)&&Q.G==3){try{var me=Q.Da.g.parse(V)}catch{me=null}if(Array.isArray(me)&&me.length==3){var $e=me;if($e[0]==0){e:if(!Q.u){if(Q.g)if(Q.g.F+3e3<y.F)ei(Q),Ee(Q);else break e;Ar(Q),qr(18)}}else Q.za=$e[1],0<Q.za-Q.T&&37500>$e[2]&&Q.F&&Q.v==0&&!Q.C&&(Q.C=Dn(g(Q.Za,Q),6e3));if(1>=Bo(Q.h)&&Q.ca){try{Q.ca()}catch{}Q.ca=void 0}}else Pn(Q,11)}else if((y.K||Q.g==y)&&ei(Q),!R(V))for($e=Q.Da.g.parse(V),V=0;V<$e.length;V++){let Gr=$e[V];if(Q.T=Gr[0],Gr=Gr[1],Q.G==2)if(Gr[0]=="c"){Q.K=Gr[1],Q.ia=Gr[2];const Qr=Gr[3];Qr!=null&&(Q.la=Qr,Q.j.info("VER="+Q.la));const gn=Gr[4];gn!=null&&(Q.Aa=gn,Q.j.info("SVER="+Q.Aa));const Ks=Gr[5];Ks!=null&&typeof Ks=="number"&&0<Ks&&(me=1.5*Ks,Q.L=me,Q.j.info("backChannelRequestTimeoutMs_="+me)),me=Q;const Ms=y.g;if(Ms){const Da=Ms.g?Ms.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Da){var at=me.h;at.g||Da.indexOf("spdy")==-1&&Da.indexOf("quic")==-1&&Da.indexOf("h2")==-1||(at.j=at.l,at.g=new Set,at.h&&(uu(at,at.h),at.h=null))}if(me.D){const Wo=Ms.g?Ms.g.getResponseHeader("X-HTTP-Session-Id"):null;Wo&&(me.ya=Wo,Yr(me.I,me.D,Wo))}}Q.G=3,Q.l&&Q.l.ua(),Q.ba&&(Q.R=Date.now()-y.F,Q.j.info("Handshake RTT: "+Q.R+"ms")),me=Q;var It=y;if(me.qa=So(me,me.J?me.ia:null,me.W),It.K){fi(me.h,It);var dn=It,si=me.L;si&&(dn.I=si),dn.B&&(on(dn),Tt(dn)),me.g=It}else vr(me);0<Q.i.length&&ze(Q)}else Gr[0]!="stop"&&Gr[0]!="close"||Pn(Q,7);else Q.G==3&&(Gr[0]=="stop"||Gr[0]=="close"?Gr[0]=="stop"?Pn(Q,7):Z(Q):Gr[0]!="noop"&&Q.l&&Q.l.ta(Gr),Q.v=0)}}Cn(4)}catch{}}var Ca=class{constructor(y,V){this.g=y,this.map=V}};function Ws(y){this.l=y||10,o.PerformanceNavigationTiming?(y=o.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ii(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Bo(y){return y.h?1:y.g?y.g.size:0}function En(y,V){return y.h?y.h==V:y.g?y.g.has(V):!1}function uu(y,V){y.g?y.g.add(V):y.h=V}function fi(y,V){y.h&&y.h==V?y.h=null:y.g&&y.g.has(V)&&y.g.delete(V)}Ws.prototype.cancel=function(){if(this.i=fu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function fu(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let V=y.i;for(const Q of y.g.values())V=V.concat(Q.D);return V}return w(y.i)}function zl(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(l(y)){for(var V=[],Q=y.length,me=0;me<Q;me++)V.push(y[me]);return V}V=[],Q=0;for(me in y)V[Q++]=y[me];return V}function Ia(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(l(y)||typeof y=="string"){var V=[];y=y.length;for(var Q=0;Q<y;Q++)V.push(Q);return V}V=[],Q=0;for(const me in y)V[Q++]=me;return V}}}function Pa(y,V){if(y.forEach&&typeof y.forEach=="function")y.forEach(V,void 0);else if(l(y)||typeof y=="string")Array.prototype.forEach.call(y,V,void 0);else for(var Q=Ia(y),me=zl(y),$e=me.length,at=0;at<$e;at++)V.call(void 0,me[at],Q&&Q[at],y)}var Rs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $l(y,V){if(y){y=y.split("&");for(var Q=0;Q<y.length;Q++){var me=y[Q].indexOf("="),$e=null;if(0<=me){var at=y[Q].substring(0,me);$e=y[Q].substring(me+1)}else at=y[Q];V(at,$e?decodeURIComponent($e.replace(/\+/g," ")):"")}}}function Tn(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof Tn){this.h=y.h,ql(this,y.j),this.o=y.o,this.g=y.g,fl(this,y.s),this.l=y.l;var V=y.i,Q=new Ls;Q.i=V.i,V.g&&(Q.g=new Map(V.g),Q.h=V.h),hl(this,Q),this.m=y.m}else y&&(V=String(y).match(Rs))?(this.h=!1,ql(this,V[1]||"",!0),this.o=Hr(V[2]||""),this.g=Hr(V[3]||"",!0),fl(this,V[4]),this.l=Hr(V[5]||"",!0),hl(this,V[6]||"",!0),this.m=Hr(V[7]||"")):(this.h=!1,this.i=new Ls(null,this.h))}Tn.prototype.toString=function(){var y=[],V=this.j;V&&y.push(ua(V,vc,!0),":");var Q=this.g;return(Q||V=="file")&&(y.push("//"),(V=this.o)&&y.push(ua(V,vc,!0),"@"),y.push(encodeURIComponent(String(Q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Q=this.s,Q!=null&&y.push(":",String(Q))),(Q=this.l)&&(this.g&&Q.charAt(0)!="/"&&y.push("/"),y.push(ua(Q,Q.charAt(0)=="/"?sf:nf,!0))),(Q=this.i.toString())&&y.push("?",Q),(Q=this.m)&&y.push("#",ua(Q,Uo)),y.join("")};function Fs(y){return new Tn(y)}function ql(y,V,Q){y.j=Q?Hr(V,!0):V,y.j&&(y.j=y.j.replace(/:$/,""))}function fl(y,V){if(V){if(V=Number(V),isNaN(V)||0>V)throw Error("Bad port number "+V);y.s=V}else y.s=null}function hl(y,V,Q){V instanceof Ls?(y.i=V,_o(y.i,y.h)):(Q||(V=ua(V,yc)),y.i=new Ls(V,y.h))}function Yr(y,V,Q){y.i.set(V,Q)}function Vo(y){return Yr(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function Hr(y,V){return y?V?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function ua(y,V,Q){return typeof y=="string"?(y=encodeURI(y).replace(V,xc),Q&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function xc(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var vc=/[#\/\?@]/g,nf=/[#\?:]/g,sf=/[#\?]/g,yc=/[#\?@]/g,Uo=/#/g;function Ls(y,V){this.h=this.g=null,this.i=y||null,this.j=!!V}function ss(y){y.g||(y.g=new Map,y.h=0,y.i&&$l(y.i,function(V,Q){y.add(decodeURIComponent(V.replace(/\+/g," ")),Q)}))}t=Ls.prototype,t.add=function(y,V){ss(this),this.i=null,y=Ra(this,y);var Q=this.g.get(y);return Q||this.g.set(y,Q=[]),Q.push(V),this.h+=1,this};function Ds(y,V){ss(y),V=Ra(y,V),y.g.has(V)&&(y.i=null,y.h-=y.g.get(V).length,y.g.delete(V))}function fa(y,V){return ss(y),V=Ra(y,V),y.g.has(V)}t.forEach=function(y,V){ss(this),this.g.forEach(function(Q,me){Q.forEach(function($e){y.call(V,$e,me,this)},this)},this)},t.na=function(){ss(this);const y=Array.from(this.g.values()),V=Array.from(this.g.keys()),Q=[];for(let me=0;me<V.length;me++){const $e=y[me];for(let at=0;at<$e.length;at++)Q.push(V[me])}return Q},t.V=function(y){ss(this);let V=[];if(typeof y=="string")fa(this,y)&&(V=V.concat(this.g.get(Ra(this,y))));else{y=Array.from(this.g.values());for(let Q=0;Q<y.length;Q++)V=V.concat(y[Q])}return V},t.set=function(y,V){return ss(this),this.i=null,y=Ra(this,y),fa(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[V]),this.h+=1,this},t.get=function(y,V){return y?(y=this.V(y),0<y.length?String(y[0]):V):V};function _r(y,V,Q){Ds(y,V),0<Q.length&&(y.i=null,y.g.set(Ra(y,V),w(Q)),y.h+=Q.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],V=Array.from(this.g.keys());for(var Q=0;Q<V.length;Q++){var me=V[Q];const at=encodeURIComponent(String(me)),It=this.V(me);for(me=0;me<It.length;me++){var $e=at;It[me]!==""&&($e+="="+encodeURIComponent(String(It[me]))),y.push($e)}}return this.i=y.join("&")};function Ra(y,V){return V=String(V),y.j&&(V=V.toLowerCase()),V}function _o(y,V){V&&!y.j&&(ss(y),y.i=null,y.g.forEach(function(Q,me){var $e=me.toLowerCase();me!=$e&&(Ds(this,me),_r(this,$e,Q))},y)),y.j=V}function Lh(y,V){const Q=new qi;if(o.Image){const me=new Image;me.onload=m(_i,Q,"TestLoadImage: loaded",!0,V,me),me.onerror=m(_i,Q,"TestLoadImage: error",!1,V,me),me.onabort=m(_i,Q,"TestLoadImage: abort",!1,V,me),me.ontimeout=m(_i,Q,"TestLoadImage: timeout",!1,V,me),o.setTimeout(function(){me.ontimeout&&me.ontimeout()},1e4),me.src=y}else V(!1)}function af(y,V){const Q=new qi,me=new AbortController,$e=setTimeout(()=>{me.abort(),_i(Q,"TestPingServer: timeout",!1,V)},1e4);fetch(y,{signal:me.signal}).then(at=>{clearTimeout($e),at.ok?_i(Q,"TestPingServer: ok",!0,V):_i(Q,"TestPingServer: server error",!1,V)}).catch(()=>{clearTimeout($e),_i(Q,"TestPingServer: error",!1,V)})}function _i(y,V,Q,me,$e){try{$e&&($e.onload=null,$e.onerror=null,$e.onabort=null,$e.ontimeout=null),me(Q)}catch{}}function zo(){this.g=new Me}function of(y,V,Q){const me=Q||"";try{Pa(y,function($e,at){let It=$e;c($e)&&(It=wr($e)),V.push(me+at+"="+encodeURIComponent(It))})}catch($e){throw V.push(me+"type="+encodeURIComponent("_badmap")),$e}}function $o(y){this.l=y.Ub||null,this.j=y.eb||!1}_($o,Mt),$o.prototype.g=function(){return new bo(this.l,this.j)},$o.prototype.i=(function(y){return function(){return y}})({});function bo(y,V){ht.call(this),this.D=y,this.o=V,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(bo,ht),t=bo.prototype,t.open=function(y,V){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=V,this.readyState=1,Gs(this)},t.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const V={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(V.body=y),(this.D||o).fetch(new Request(this.A,V)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Os(this)),this.readyState=0},t.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Gs(this)),this.g&&(this.readyState=3,Gs(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wc(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function wc(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}t.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var V=y.value?y.value:new Uint8Array(0);(V=this.v.decode(V,{stream:!y.done}))&&(this.response=this.responseText+=V)}y.done?Os(this):Gs(this),this.readyState==3&&wc(this)}},t.Ra=function(y){this.g&&(this.response=this.responseText=y,Os(this))},t.Qa=function(y){this.g&&(this.response=y,Os(this))},t.ga=function(){this.g&&Os(this)};function Os(y){y.readyState=4,y.l=null,y.j=null,y.v=null,Gs(y)}t.setRequestHeader=function(y,V){this.u.append(y,V)},t.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],V=this.h.entries();for(var Q=V.next();!Q.done;)Q=Q.value,y.push(Q[0]+": "+Q[1]),Q=V.next();return y.join(`\r
`)};function Gs(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function Fa(y){let V="";return K(y,function(Q,me){V+=me,V+=":",V+=Q,V+=`\r
`}),V}function dl(y,V,Q){e:{for(me in Q){var me=!1;break e}me=!0}me||(Q=Fa(Q),typeof y=="string"?Q!=null&&encodeURIComponent(String(Q)):Yr(y,V,Q))}function In(y){ht.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(In,ht);var hu=/^https?$/i,qo=["POST","PUT"];t=In.prototype,t.Ha=function(y){this.J=y},t.ea=function(y,V,Q,me){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);V=V?V.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ne.g(),this.v=this.o?Vt(this.o):Vt(Ne),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(V,String(y),!0),this.B=!1}catch(at){uo(this,at);return}if(y=Q||"",Q=new Map(this.headers),me)if(Object.getPrototypeOf(me)===Object.prototype)for(var $e in me)Q.set($e,me[$e]);else if(typeof me.keys=="function"&&typeof me.get=="function")for(const at of me.keys())Q.set(at,me.get(at));else throw Error("Unknown input type for opt_headers: "+String(me));me=Array.from(Q.keys()).find(at=>at.toLowerCase()=="content-type"),$e=o.FormData&&y instanceof o.FormData,!(0<=Array.prototype.indexOf.call(qo,V,void 0))||me||$e||Q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[at,It]of Q)this.g.setRequestHeader(at,It);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Eo(this),this.u=!0,this.g.send(y),this.u=!1}catch(at){uo(this,at)}};function uo(y,V){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=V,y.m=5,pl(y),js(y)}function pl(y){y.A||(y.A=!0,Pt(y,"complete"),Pt(y,"error"))}t.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,Pt(this,"complete"),Pt(this,"abort"),js(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),js(this,!0)),In.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ml(this):this.bb())},t.bb=function(){ml(this)};function ml(y){if(y.h&&typeof a<"u"&&(!y.v[1]||ws(y)!=4||y.Z()!=2)){if(y.u&&ws(y)==4)jt(y.Ea,0,y);else if(Pt(y,"readystatechange"),ws(y)==4){y.h=!1;try{const It=y.Z();e:switch(It){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var V=!0;break e;default:V=!1}var Q;if(!(Q=V)){var me;if(me=It===0){var $e=String(y.D).match(Rs)[1]||null;!$e&&o.self&&o.self.location&&($e=o.self.location.protocol.slice(0,-1)),me=!hu.test($e?$e.toLowerCase():"")}Q=me}if(Q)Pt(y,"complete"),Pt(y,"success");else{y.m=6;try{var at=2<ws(y)?y.g.statusText:""}catch{at=""}y.l=at+" ["+y.Z()+"]",pl(y)}}finally{js(y)}}}}function js(y,V){if(y.g){Eo(y);const Q=y.g,me=y.v[0]?()=>{}:null;y.g=null,y.v=null,V||Pt(y,"ready");try{Q.onreadystatechange=me}catch{}}}function Eo(y){y.I&&(o.clearTimeout(y.I),y.I=null)}t.isActive=function(){return!!this.g};function ws(y){return y.g?y.g.readyState:0}t.Z=function(){try{return 2<ws(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(y){if(this.g){var V=this.g.responseText;return y&&V.indexOf(y)==0&&(V=V.substring(y.length)),rn(V)}};function Hl(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function _s(y){const V={};y=(y.g&&2<=ws(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let me=0;me<y.length;me++){if(R(y[me]))continue;var Q=I(y[me]);const $e=Q[0];if(Q=Q[1],typeof Q!="string")continue;Q=Q.trim();const at=V[$e]||[];V[$e]=at,at.push(Q)}P(V,function(me){return me.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function as(y,V,Q){return Q&&Q.internalChannelParams&&Q.internalChannelParams[y]||V}function L(y){this.Aa=0,this.i=[],this.j=new qi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=as("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=as("baseRetryDelayMs",5e3,y),this.cb=as("retryDelaySeedMs",1e4,y),this.Wa=as("forwardChannelMaxRetries",2,y),this.wa=as("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new Ws(y&&y.concurrentRequestLimit),this.Da=new zo,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=L.prototype,t.la=8,t.G=1,t.connect=function(y,V,Q,me){qr(0),this.W=y,this.H=V||{},Q&&me!==void 0&&(this.H.OSID=Q,this.H.OAID=me),this.F=this.X,this.I=So(this,null,this.W),ze(this)};function Z(y){if(Le(y),y.G==3){var V=y.U++,Q=Fs(y.I);if(Yr(Q,"SID",y.K),Yr(Q,"RID",V),Yr(Q,"TYPE","terminate"),Kt(y,Q),V=new nt(y,y.j,V),V.L=2,V.v=Vo(Fs(Q)),Q=!1,o.navigator&&o.navigator.sendBeacon)try{Q=o.navigator.sendBeacon(V.v.toString(),"")}catch{}!Q&&o.Image&&(new Image().src=V.v,Q=!0),Q||(V.g=Ho(V.j,null),V.g.ea(V.v)),V.F=Date.now(),Tt(V)}Hi(y)}function Ee(y){y.g&&(nn(y),y.g.cancel(),y.g=null)}function Le(y){Ee(y),y.u&&(o.clearTimeout(y.u),y.u=null),ei(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&o.clearTimeout(y.s),y.s=null)}function ze(y){if(!ii(y.h)&&!y.s){y.s=!0;var V=y.Ga;we||te(),ce||(we(),ce=!0),H.add(V,y),y.B=0}}function gt(y,V){return Bo(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=V.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=Dn(g(y.Ga,y,V),bi(y,y.B)),y.B++,!0)}t.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const $e=new nt(this,this.j,y);let at=this.o;if(this.S&&(at?(at=A(at),O(at,this.S)):at=this.S),this.m!==null||this.O||($e.H=at,at=null),this.P)e:{for(var V=0,Q=0;Q<this.i.length;Q++){t:{var me=this.i[Q];if("__data__"in me.map&&(me=me.map.__data__,typeof me=="string")){me=me.length;break t}me=void 0}if(me===void 0)break;if(V+=me,4096<V){V=Q;break e}if(V===4096||Q===this.i.length-1){V=Q+1;break e}}V=1e3}else V=1e3;V=Zt(this,$e,V),Q=Fs(this.I),Yr(Q,"RID",y),Yr(Q,"CVER",22),this.D&&Yr(Q,"X-HTTP-Session-Id",this.D),Kt(this,Q),at&&(this.O?V="headers="+encodeURIComponent(String(Fa(at)))+"&"+V:this.m&&dl(Q,this.m,at)),uu(this.h,$e),this.Ua&&Yr(Q,"TYPE","init"),this.P?(Yr(Q,"$req",V),Yr(Q,"SID","null"),$e.T=!0,_t($e,Q,null)):_t($e,Q,V),this.G=2}}else this.G==3&&(y?yt(this,y):this.i.length==0||ii(this.h)||yt(this))};function yt(y,V){var Q;V?Q=V.l:Q=y.U++;const me=Fs(y.I);Yr(me,"SID",y.K),Yr(me,"RID",Q),Yr(me,"AID",y.T),Kt(y,me),y.m&&y.o&&dl(me,y.m,y.o),Q=new nt(y,y.j,Q,y.B+1),y.m===null&&(Q.H=y.o),V&&(y.i=V.D.concat(y.i)),V=Zt(y,Q,1e3),Q.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),uu(y.h,Q),_t(Q,me,V)}function Kt(y,V){y.H&&K(y.H,function(Q,me){Yr(V,me,Q)}),y.l&&Pa({},function(Q,me){Yr(V,me,Q)})}function Zt(y,V,Q){Q=Math.min(y.i.length,Q);var me=y.l?g(y.l.Na,y.l,y):null;e:{var $e=y.i;let at=-1;for(;;){const It=["count="+Q];at==-1?0<Q?(at=$e[0].g,It.push("ofs="+at)):at=0:It.push("ofs="+at);let dn=!0;for(let si=0;si<Q;si++){let Gr=$e[si].g;const Qr=$e[si].map;if(Gr-=at,0>Gr)at=Math.max(0,$e[si].g-100),dn=!1;else try{of(Qr,It,"req"+Gr+"_")}catch{me&&me(Qr)}}if(dn){me=It.join("&");break e}}}return y=y.i.splice(0,Q),V.D=y,me}function vr(y){if(!y.g&&!y.u){y.Y=1;var V=y.Fa;we||te(),ce||(we(),ce=!0),H.add(V,y),y.v=0}}function Ar(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=Dn(g(y.Fa,y),bi(y,y.v)),y.v++,!0)}t.Fa=function(){if(this.u=null,Hn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Dn(g(this.ab,this),y)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qr(10),Ee(this),Hn(this))};function nn(y){y.A!=null&&(o.clearTimeout(y.A),y.A=null)}function Hn(y){y.g=new nt(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var V=Fs(y.qa);Yr(V,"RID","rpc"),Yr(V,"SID",y.K),Yr(V,"AID",y.T),Yr(V,"CI",y.F?"0":"1"),!y.F&&y.ja&&Yr(V,"TO",y.ja),Yr(V,"TYPE","xmlhttp"),Kt(y,V),y.m&&y.o&&dl(V,y.m,y.o),y.L&&(y.g.I=y.L);var Q=y.g;y=y.ia,Q.L=1,Q.v=Vo(Fs(V)),Q.m=null,Q.P=!0,Dt(Q,y)}t.Za=function(){this.C!=null&&(this.C=null,Ee(this),Ar(this),qr(19))};function ei(y){y.C!=null&&(o.clearTimeout(y.C),y.C=null)}function hn(y,V){var Q=null;if(y.g==V){ei(y),nn(y),y.g=null;var me=2}else if(En(y.h,V))Q=V.D,fi(y.h,V),me=1;else return;if(y.G!=0){if(V.o)if(me==1){Q=V.m?V.m.length:0,V=Date.now()-V.F;var $e=y.B;me=zr(),Pt(me,new is(me,Q)),ze(y)}else vr(y);else if($e=V.s,$e==3||$e==0&&0<V.X||!(me==1&&gt(y,V)||me==2&&Ar(y)))switch(Q&&0<Q.length&&(V=y.h,V.i=V.i.concat(Q)),$e){case 1:Pn(y,5);break;case 4:Pn(y,10);break;case 3:Pn(y,6);break;default:Pn(y,2)}}}function bi(y,V){let Q=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(Q*=2),Q*V}function Pn(y,V){if(y.j.info("Error code "+V),V==2){var Q=g(y.fb,y),me=y.Xa;const $e=!me;me=new Tn(me||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ql(me,"https"),Vo(me),$e?Lh(me.toString(),Q):af(me.toString(),Q)}else qr(2);y.G=0,y.l&&y.l.sa(V),Hi(y),Le(y)}t.fb=function(y){y?(this.j.info("Successfully pinged google.com"),qr(2)):(this.j.info("Failed to ping google.com"),qr(1))};function Hi(y){if(y.G=0,y.ka=[],y.l){const V=fu(y.h);(V.length!=0||y.i.length!=0)&&(b(y.ka,V),b(y.ka,y.i),y.h.i.length=0,w(y.i),y.i.length=0),y.l.ra()}}function So(y,V,Q){var me=Q instanceof Tn?Fs(Q):new Tn(Q);if(me.g!="")V&&(me.g=V+"."+me.g),fl(me,me.s);else{var $e=o.location;me=$e.protocol,V=V?V+"."+$e.hostname:$e.hostname,$e=+$e.port;var at=new Tn(null);me&&ql(at,me),V&&(at.g=V),$e&&fl(at,$e),Q&&(at.l=Q),me=at}return Q=y.D,V=y.ya,Q&&V&&Yr(me,Q,V),Yr(me,"VER",y.la),Kt(y,me),me}function Ho(y,V,Q){if(V&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return V=y.Ca&&!y.pa?new In(new $o({eb:Q})):new In(y.pa),V.Ha(y.J),V}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function du(){}t=du.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Wl(){}Wl.prototype.g=function(y,V){return new Ri(y,V)};function Ri(y,V){ht.call(this),this.g=new L(V),this.l=y,this.h=V&&V.messageUrlParams||null,y=V&&V.messageHeaders||null,V&&V.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=V&&V.initMessageHeaders||null,V&&V.messageContentType&&(y?y["X-WebChannel-Content-Type"]=V.messageContentType:y={"X-WebChannel-Content-Type":V.messageContentType}),V&&V.va&&(y?y["X-WebChannel-Client-Profile"]=V.va:y={"X-WebChannel-Client-Profile":V.va}),this.g.S=y,(y=V&&V.Sb)&&!R(y)&&(this.g.m=y),this.v=V&&V.supportsCrossDomainXhr||!1,this.u=V&&V.sendRawJson||!1,(V=V&&V.httpSessionIdParam)&&!R(V)&&(this.g.D=V,y=this.h,y!==null&&V in y&&(y=this.h,V in y&&delete y[V])),this.j=new ha(this)}_(Ri,ht),Ri.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ri.prototype.close=function(){Z(this.g)},Ri.prototype.o=function(y){var V=this.g;if(typeof y=="string"){var Q={};Q.__data__=y,y=Q}else this.u&&(Q={},Q.__data__=wr(y),y=Q);V.i.push(new Ca(V.Ya++,y)),V.G==3&&ze(V)},Ri.prototype.N=function(){this.g.l=null,delete this.j,Z(this.g),delete this.g,Ri.aa.N.call(this)};function La(y){ur.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var V=y.__sm__;if(V){e:{for(const Q in V){y=Q;break e}y=void 0}(this.i=y)&&(y=this.i,V=V!==null&&y in V?V[y]:void 0),this.data=V}else this.data=y}_(La,ur);function _c(){Jt.call(this),this.status=1}_(_c,Jt);function ha(y){this.g=y}_(ha,du),ha.prototype.ua=function(){Pt(this.g,"a")},ha.prototype.ta=function(y){Pt(this.g,new La(y))},ha.prototype.sa=function(y){Pt(this.g,new _c)},ha.prototype.ra=function(){Pt(this.g,"b")},Wl.prototype.createWebChannel=Wl.prototype.g,Ri.prototype.send=Ri.prototype.o,Ri.prototype.open=Ri.prototype.m,Ri.prototype.close=Ri.prototype.close,GN=function(){return new Wl},WN=function(){return zr()},HN=mr,z5={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ye.NO_ERROR=0,ye.TIMEOUT=8,ye.HTTP_ERROR=6,h2=ye,Ae.COMPLETE="complete",qN=Ae,rr.EventType=ar,ar.OPEN="a",ar.CLOSE="b",ar.ERROR="c",ar.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Zm=rr,In.prototype.listenOnce=In.prototype.L,In.prototype.getLastError=In.prototype.Ka,In.prototype.getLastErrorCode=In.prototype.Ba,In.prototype.getStatus=In.prototype.Z,In.prototype.getResponseJson=In.prototype.Oa,In.prototype.getResponseText=In.prototype.oa,In.prototype.send=In.prototype.ea,In.prototype.setWithCredentials=In.prototype.Ha,$N=In}).apply(typeof Cx<"u"?Cx:typeof self<"u"?self:typeof window<"u"?window:{});const u6="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}na.UNAUTHENTICATED=new na(null),na.GOOGLE_CREDENTIALS=new na("google-credentials-uid"),na.FIRST_PARTY=new na("first-party-uid"),na.MOCK_USER=new na("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zp="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new i4("@firebase/firestore");function U0(){return ih.logLevel}function Sj(t){ih.setLogLevel(t)}function kt(t,...e){if(ih.logLevel<=ln.DEBUG){const r=e.map(o4);ih.debug(`Firestore (${zp}): ${t}`,...r)}}function ms(t,...e){if(ih.logLevel<=ln.ERROR){const r=e.map(o4);ih.error(`Firestore (${zp}): ${t}`,...r)}}function ll(t,...e){if(ih.logLevel<=ln.WARN){const r=e.map(o4);ih.warn(`Firestore (${zp}): ${t}`,...r)}}function o4(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t="Unexpected state"){const e=`FIRESTORE (${zp}) INTERNAL ASSERTION FAILED: `+t;throw ms(e),new Error(e)}function cr(t,e){t||Qt()}function kj(t,e){t||Qt()}function $t(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class St extends iu{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(na.UNAUTHENTICATED)))}shutdown(){}}class Tj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class Aj{constructor(e){this.t=e,this.currentUser=na.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){cr(this.o===void 0);let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let s=new la;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new la,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},o=l=>{kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((l=>o(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new la)}}),0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(cr(typeof n.accessToken=="string"),new KN(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return cr(e===null||typeof e=="string"),new na(e)}}class Nj{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=na.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Cj{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new Nj(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(na.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class YN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ij{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){cr(this.o===void 0);const n=s=>{s.error!=null&&kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,kt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>n(s)))};const i=s=>{kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(cr(typeof r.token=="string"),this.R=r.token,new YN(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class Pj{getToken(){return Promise.resolve(new YN(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=Rj(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<r&&(n+=e.charAt(i[s]%e.length))}return n}}function Lr(t,e){return t<e?-1:t>e?1:0}function xp(t,e,r){return t.length===e.length&&t.every(((n,i)=>r(n,e[i])))}function QN(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new St(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new St(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new St(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new St(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ii.fromMillis(Date.now())}static fromDate(e){return Ii.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Ii(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lr(this.nanoseconds,e.nanoseconds):Lr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pr(e)}static min(){return new pr(new Ii(0,0))}static max(){return new pr(new Ii(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,r,n){r===void 0?r=0:r>e.length&&Qt(),n===void 0?n=e.length-r:n>e.length-r&&Qt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return R1.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof R1?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const s=e.get(i),a=r.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class cn extends R1{construct(e,r,n){return new cn(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new St(st.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((i=>i.length>0)))}return new cn(r)}static emptyPath(){return new cn([])}}const Fj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xi extends R1{construct(e,r,n){return new xi(e,r,n)}static isValidIdentifier(e){return Fj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new xi(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const s=()=>{if(n.length===0)throw new St(st.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new St(st.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new St(st.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(n+=o,i++):(s(),i++)}if(s(),a)throw new St(st.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xi(r)}static emptyPath(){return new xi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.path=e}static fromPath(e){return new Wt(cn.fromString(e))}static fromName(e){return new Wt(cn.fromString(e).popFirst(5))}static empty(){return new Wt(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return cn.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Wt(new cn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,r,n,i){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=i}}function $5(t){return t.fields.find((e=>e.kind===2))}function nd(t){return t.fields.filter((e=>e.kind!==2))}function Lj(t,e){let r=Lr(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=Dj(t.fields[n],e.fields[n]),r!==0)return r;return Lr(t.fields.length,e.fields.length)}vp.UNKNOWN_ID=-1;class gd{constructor(e,r){this.fieldPath=e,this.kind=r}}function Dj(t,e){const r=xi.comparator(t.fieldPath,e.fieldPath);return r!==0?r:Lr(t.kind,e.kind)}class yp{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new yp(0,cl.min())}}function JN(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=pr.fromTimestamp(n===1e9?new Ii(r+1,0):new Ii(r,n));return new cl(i,Wt.empty(),e)}function ZN(t){return new cl(t.readTime,t.key,-1)}class cl{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new cl(pr.min(),Wt.empty(),-1)}static max(){return new cl(pr.max(),Wt.empty(),-1)}}function c4(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Wt.comparator(t.documentKey,e.documentKey),r!==0?r:Lr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class t8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(t){if(t.code!==st.FAILED_PRECONDITION||t.message!==e8)throw t;kt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Qt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new We(((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,i)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof We?r:We.resolve(r)}catch(r){return We.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):We.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):We.reject(r)}static resolve(e){return new We(((r,n)=>{r(e)}))}static reject(e){return new We(((r,n)=>{n(e)}))}static waitFor(e){return new We(((r,n)=>{let i=0,s=0,a=!1;e.forEach((o=>{++i,o.next((()=>{++s,a&&s===i&&r()}),(l=>n(l)))})),a=!0,s===i&&r()}))}static or(e){let r=We.resolve(!1);for(const n of e)r=r.next((i=>i?We.resolve(i):n()));return r}static forEach(e,r){const n=[];return e.forEach(((i,s)=>{n.push(r.call(this,i,s))})),this.waitFor(n)}static mapArray(e,r){return new We(((n,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;r(e[c]).next((f=>{a[c]=f,++o,o===s&&n(a)}),(f=>i(f)))}}))}static doWhile(e,r){return new We(((n,i)=>{const s=()=>{e()===!0?r().next((()=>{s()}),i):n()};s()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new la,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new l1(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const i=u4(n.target.error);this.V.reject(new l1(e,i))}}static open(e,r,n,i){try{return new Lv(r,e.transaction(i,n))}catch(s){throw new l1(r,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(kt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new jj(r)}}class Gc{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Gc.S($s())===12.2&&ms("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return kt("SimpleDb","Removing database:",e),sd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ON())return!1;if(Gc.v())return!0;const e=$s(),r=Gc.S(e),n=0<r&&r<10,i=r8(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(kt("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;r(a)},i.onblocked=()=>{n(new l1(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?n(new St(st.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new St(st.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new l1(e,a))},i.onupgradeneeded=s=>{kt("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.O(a,i.transaction,s.oldVersion,this.version).next((()=>{kt("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,i){const s=r==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=Lv.open(this.db,e,s?"readonly":"readwrite",n),l=i(o).next((c=>(o.g(),c))).catch((c=>(o.abort(c),We.reject(c)))).toPromise();return l.catch((()=>{})),await o.m,l}catch(o){const l=o,c=l.name!=="FirebaseError"&&a<3;if(kt("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function r8(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class Oj{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return sd(this.B.delete())}}class l1 extends St{constructor(e,r){super(st.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Eh(t){return t.name==="IndexedDbTransactionError"}class jj{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(kt("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(kt("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),sd(n)}add(e){return kt("SimpleDb","ADD",this.store.name,e,e),sd(this.store.add(e))}get(e){return sd(this.store.get(e)).next((r=>(r===void 0&&(r=null),kt("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return kt("SimpleDb","DELETE",this.store.name,e),sd(this.store.delete(e))}count(){return kt("SimpleDb","COUNT",this.store.name),sd(this.store.count())}U(e,r){const n=this.options(e,r),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(n.range);return new We(((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}}))}{const s=this.cursor(n),a=[];return this.W(s,((o,l)=>{a.push(l)})).next((()=>a))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new We(((i,s)=>{n.onerror=a=>{s(a.target.error)},n.onsuccess=a=>{i(a.target.result)}}))}j(e,r){kt("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const i=this.cursor(n);return this.W(i,((s,a,o)=>o.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const i=this.cursor(n);return this.W(i,r)}Y(e){const r=this.cursor({});return new We(((n,i)=>{r.onerror=s=>{const a=u4(s.target.error);i(a)},r.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((o=>{o?a.continue():n()})):n()}}))}W(e,r){const n=[];return new We(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const l=new Oj(o),c=r(o.primaryKey,o.value,l);if(c instanceof We){const f=c.catch((p=>(l.done(),We.reject(p))));n.push(f)}l.isDone?i():l.K===null?o.continue():o.continue(l.K)}})).next((()=>We.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function sd(t){return new We(((e,r)=>{t.onsuccess=n=>{const i=n.target.result;e(i)},t.onerror=n=>{const i=u4(n.target.error);r(i)}}))}let f6=!1;function u4(t){const e=Gc.S($s());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new St("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return f6||(f6=!0,setTimeout((()=>{throw n}),0)),n}}return t}class Mj{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){kt("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{kt("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Eh(r)?kt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await bh(r)}await this.X(6e4)}))}}class Bj{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let i=r,s=!0;return We.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!n.has(a))return kt("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,i).next((o=>{i-=o,n.add(a)}));s=!1})))).next((()=>r-i))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((i=>this.localStore.localDocuments.getNextDocuments(e,r,i,n).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this.re(i,s))).next((o=>(kt("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o)))).next((()=>a.size))}))))}re(e,r){let n=e;return r.changes.forEach(((i,s)=>{const a=ZN(s);c4(a,n)>0&&(n=a)})),new cl(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Fo.oe=-1;function hg(t){return t==null}function F1(t){return t===0&&1/t==-1/0}function n8(t){return typeof t=="number"&&Number.isInteger(t)&&!F1(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=h6(e)),e=Vj(t.get(r),e);return h6(e)}function Vj(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const s=t.charAt(i);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function h6(t){return t+""}function Vc(t){const e=t.length;if(cr(e>=2),e===2)return cr(t.charAt(0)===""&&t.charAt(1)===""),cn.emptyPath();const r=e-2,n=[];let i="";for(let s=0;s<e;){const a=t.indexOf("",s);switch((a<0||a>r)&&Qt(),t.charAt(a+1)){case"":const o=t.substring(s,a);let l;i.length===0?l=o:(i+=o,l=i,i=""),n.push(l);break;case"":i+=t.substring(s,a),i+="\0";break;case"":i+=t.substring(s,a+1);break;default:Qt()}s=a+2}return new cn(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(t,e){return[t,so(e)]}function i8(t,e,r){return[t,so(e),r]}const Uj={},zj=["prefixPath","collectionGroup","readTime","documentId"],$j=["prefixPath","collectionGroup","documentId"],qj=["collectionGroup","readTime","prefixPath","documentId"],Hj=["canonicalId","targetId"],Wj=["targetId","path"],Gj=["path","targetId"],Kj=["collectionId","parent"],Xj=["indexId","uid"],Yj=["uid","sequenceNumber"],Qj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Jj=["indexId","uid","orderedDocumentKey"],Zj=["userId","collectionPath","documentId"],eM=["userId","collectionPath","largestBatchId"],tM=["userId","collectionGroup","largestBatchId"],s8=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rM=[...s8,"documentOverlays"],a8=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],o8=a8,f4=[...o8,"indexConfiguration","indexState","indexEntries"],nM=f4,iM=[...f4,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5 extends t8{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Hs(t,e){const r=$t(t);return Gc.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Sh(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function l8(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function c8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,r){this.comparator=e,this.root=r||ba.EMPTY}insert(e,r){return new ui(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ba.BLACK,null,null))}remove(e){return new ui(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ba.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ix(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ix(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ix(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ix(this.root,e,this.comparator,!0)}}class Ix{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ba{constructor(e,r,n,i,s){this.key=e,this.value=r,this.color=n??ba.RED,this.left=i??ba.EMPTY,this.right=s??ba.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,s){return new ba(e??this.key,r??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,r,n),null):s===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ba.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return ba.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ba.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ba.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qt();const e=this.left.check();if(e!==this.right.check())throw Qt();return e+(this.isRed()?0:1)}}ba.EMPTY=null,ba.RED=!0,ba.BLACK=!1;ba.EMPTY=new class{constructor(){this.size=0}get key(){throw Qt()}get value(){throw Qt()}get color(){throw Qt()}get left(){throw Qt()}get right(){throw Qt()}copy(e,r,n,i,s){return this}insert(e,r,n){return new ba(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.comparator=e,this.data=new ui(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new m6(this.data.getIterator())}getIteratorFrom(e){return new m6(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof Yn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new Yn(this.comparator);return r.data=e,r}}class m6{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function C0(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.fields=e,e.sort(xi.comparator)}static empty(){return new Lo([])}unionWith(e){let r=new Yn(xi.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Lo(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return xp(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new u8("Invalid base64 string: "+s):s}})(e);return new zi(r)}static fromUint8Array(e){const r=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new zi(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zi.EMPTY_BYTE_STRING=new zi("");const aM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zu(t){if(cr(!!t),typeof t=="string"){let e=0;const r=aM.exec(t);if(cr(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ni(t.seconds),nanos:Ni(t.nanos)}}function Ni(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $u(t){return typeof t=="string"?zi.fromBase64String(t):zi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t){var e,r;return((r=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Ov(t){const e=t.mapValue.fields.__previous_value__;return Dv(e)?Ov(e):e}function L1(t){const e=zu(t.mapValue.fields.__local_write_time__.timestampValue);return new Ii(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,r,n,i,s,a,o,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class sh{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new sh("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},p2={nullValue:"NULL_VALUE"};function ah(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dv(t)?4:f8(t)?9007199254740991:jv(t)?10:11:Qt()}function Zc(t,e){if(t===e)return!0;const r=ah(t);if(r!==ah(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return L1(t).isEqual(L1(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=zu(i.timestampValue),o=zu(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return $u(i.bytesValue).isEqual($u(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return Ni(i.geoPointValue.latitude)===Ni(s.geoPointValue.latitude)&&Ni(i.geoPointValue.longitude)===Ni(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Ni(i.integerValue)===Ni(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Ni(i.doubleValue),o=Ni(s.doubleValue);return a===o?F1(a)===F1(o):isNaN(a)&&isNaN(o)}return!1})(t,e);case 9:return xp(t.arrayValue.values||[],e.arrayValue.values||[],Zc);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(p6(a)!==p6(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Zc(a[l],o[l])))return!1;return!0})(t,e);default:return Qt()}}function D1(t,e){return(t.values||[]).find((r=>Zc(r,e)))!==void 0}function oh(t,e){if(t===e)return 0;const r=ah(t),n=ah(e);if(r!==n)return Lr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Lr(t.booleanValue,e.booleanValue);case 2:return(function(s,a){const o=Ni(s.integerValue||s.doubleValue),l=Ni(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1})(t,e);case 3:return g6(t.timestampValue,e.timestampValue);case 4:return g6(L1(t),L1(e));case 5:return Lr(t.stringValue,e.stringValue);case 6:return(function(s,a){const o=$u(s),l=$u(a);return o.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const f=Lr(o[c],l[c]);if(f!==0)return f}return Lr(o.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,a){const o=Lr(Ni(s.latitude),Ni(a.latitude));return o!==0?o:Lr(Ni(s.longitude),Ni(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return x6(t.arrayValue,e.arrayValue);case 10:return(function(s,a){var o,l,c,f;const p=s.fields||{},g=a.fields||{},m=(o=p.value)===null||o===void 0?void 0:o.arrayValue,_=(l=g.value)===null||l===void 0?void 0:l.arrayValue,w=Lr(((c=m?.values)===null||c===void 0?void 0:c.length)||0,((f=_?.values)===null||f===void 0?void 0:f.length)||0);return w!==0?w:x6(m,_)})(t.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Hf.mapValue&&a===Hf.mapValue)return 0;if(s===Hf.mapValue)return 1;if(a===Hf.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},f=Object.keys(c);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){const g=Lr(l[p],f[p]);if(g!==0)return g;const m=oh(o[l[p]],c[f[p]]);if(m!==0)return m}return Lr(l.length,f.length)})(t.mapValue,e.mapValue);default:throw Qt()}}function g6(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Lr(t,e);const r=zu(t),n=zu(e),i=Lr(r.seconds,n.seconds);return i!==0?i:Lr(r.nanos,n.nanos)}function x6(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const s=oh(r[i],n[i]);if(s)return s}return Lr(r.length,n.length)}function wp(t){return H5(t)}function H5(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=zu(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return $u(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return Wt.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",i=!0;for(const s of r.values||[])i?i=!1:n+=",",n+=H5(s);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${H5(r.fields[a])}`;return i+"}"})(t.mapValue):Qt()}function m2(t){switch(ah(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ov(t);return e?16+m2(e):16;case 5:return 2*t.stringValue.length;case 6:return $u(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,s)=>i+m2(s)),0)})(t.arrayValue);case 10:case 11:return(function(n){let i=0;return Sh(n.fields,((s,a)=>{i+=s.length+m2(a)})),i})(t.mapValue);default:throw Qt()}}function Sd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function W5(t){return!!t&&"integerValue"in t}function O1(t){return!!t&&"arrayValue"in t}function v6(t){return!!t&&"nullValue"in t}function y6(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function g2(t){return!!t&&"mapValue"in t}function jv(t){var e,r;return((r=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function c1(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Sh(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=c1(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=c1(t.arrayValue.values[r]);return e}return Object.assign({},t)}function f8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const h8={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function lM(t){return"nullValue"in t?p2:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Sd(sh.empty(),Wt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?jv(t)?h8:{mapValue:{}}:Qt()}function cM(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Sd(sh.empty(),Wt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?h8:"mapValue"in t?jv(t)?{mapValue:{}}:Hf:Qt()}function w6(t,e){const r=oh(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function _6(t,e){const r=oh(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this.value=e}static empty(){return new ka({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!g2(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=c1(r)}setAll(e){let r=xi.emptyPath(),n={},i=[];e.forEach(((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=o.popLast()}a?n[o.lastSegment()]=c1(a):i.push(o.lastSegment())}));const s=this.getFieldsMap(r);this.applyChanges(s,n,i)}delete(e){const r=this.field(e.popLast());g2(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Zc(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];g2(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Sh(r,((i,s)=>e[i]=s));for(const i of n)delete e[i]}clone(){return new ka(c1(this.value))}}function d8(t){const e=[];return Sh(t.fields,((r,n)=>{const i=new xi([r]);if(g2(n)){const s=d8(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new Lo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,r,n,i,s,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new gi(e,0,pr.min(),pr.min(),pr.min(),ka.empty(),0)}static newFoundDocument(e,r,n,i){return new gi(e,1,r,pr.min(),n,i,0)}static newNoDocument(e,r){return new gi(e,2,r,pr.min(),pr.min(),ka.empty(),0)}static newUnknownDocument(e,r){return new gi(e,3,r,pr.min(),pr.min(),ka.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(pr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ka.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ka.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,r){this.position=e,this.inclusive=r}}function b6(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?n=Wt.comparator(Wt.fromName(a.referenceValue),r.key):n=oh(a,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function E6(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Zc(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,r="asc"){this.field=e,this.dir=r}}function uM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{}class un extends p8{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new fM(e,r,n):r==="array-contains"?new pM(e,n):r==="in"?new w8(e,n):r==="not-in"?new mM(e,n):r==="array-contains-any"?new gM(e,n):new un(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new hM(e,n):new dM(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(oh(r,this.value)):r!==null&&ah(this.value)===ah(r)&&this.matchesComparison(oh(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Qt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends p8{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new $n(e,r)}matches(e){return _p(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _p(t){return t.op==="and"}function G5(t){return t.op==="or"}function h4(t){return m8(t)&&_p(t)}function m8(t){for(const e of t.filters)if(e instanceof $n)return!1;return!0}function K5(t){if(t instanceof un)return t.field.canonicalString()+t.op.toString()+wp(t.value);if(h4(t))return t.filters.map((e=>K5(e))).join(",");{const e=t.filters.map((r=>K5(r))).join(",");return`${t.op}(${e})`}}function g8(t,e){return t instanceof un?(function(n,i){return i instanceof un&&n.op===i.op&&n.field.isEqual(i.field)&&Zc(n.value,i.value)})(t,e):t instanceof $n?(function(n,i){return i instanceof $n&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((s,a,o)=>s&&g8(a,i.filters[o])),!0):!1})(t,e):void Qt()}function x8(t,e){const r=t.filters.concat(e);return $n.create(r,t.op)}function v8(t){return t instanceof un?(function(r){return`${r.field.canonicalString()} ${r.op} ${wp(r.value)}`})(t):t instanceof $n?(function(r){return r.op.toString()+" {"+r.getFilters().map(v8).join(" ,")+"}"})(t):"Filter"}class fM extends un{constructor(e,r,n){super(e,r,n),this.key=Wt.fromName(n.referenceValue)}matches(e){const r=Wt.comparator(e.key,this.key);return this.matchesComparison(r)}}class hM extends un{constructor(e,r){super(e,"in",r),this.keys=y8("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class dM extends un{constructor(e,r){super(e,"not-in",r),this.keys=y8("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function y8(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>Wt.fromName(n.referenceValue)))}class pM extends un{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return O1(r)&&D1(r.arrayValue,this.value)}}class w8 extends un{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&D1(this.value.arrayValue,r)}}class mM extends un{constructor(e,r){super(e,"not-in",r)}matches(e){if(D1(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!D1(this.value.arrayValue,r)}}class gM extends un{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!O1(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>D1(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,r=null,n=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.ue=null}}function X5(t,e=null,r=[],n=[],i=null,s=null,a=null){return new xM(t,e,r,n,i,s,a)}function kd(t){const e=$t(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>K5(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(s){return s.field.canonicalString()+s.dir})(n))).join(","),hg(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>wp(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>wp(n))).join(",")),e.ue=r}return e.ue}function dg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!uM(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!g8(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!E6(t.startAt,e.startAt)&&E6(t.endAt,e.endAt)}function B2(t){return Wt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function V2(t,e){return t.filters.filter((r=>r instanceof un&&r.field.isEqual(e)))}function S6(t,e,r){let n=p2,i=!0;for(const s of V2(t,e)){let a=p2,o=!0;switch(s.op){case"<":case"<=":a=lM(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=p2}w6({value:n,inclusive:i},{value:a,inclusive:o})<0&&(n=a,i=o)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=r.position[s];w6({value:n,inclusive:i},{value:a,inclusive:r.inclusive})<0&&(n=a,i=r.inclusive);break}}return{value:n,inclusive:i}}function k6(t,e,r){let n=Hf,i=!0;for(const s of V2(t,e)){let a=Hf,o=!0;switch(s.op){case">=":case">":a=cM(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Hf}_6({value:n,inclusive:i},{value:a,inclusive:o})>0&&(n=a,i=o)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=r.position[s];_6({value:n,inclusive:i},{value:a,inclusive:r.inclusive})>0&&(n=a,i=r.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,r=null,n=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _8(t,e,r,n,i,s,a,o){return new Gu(t,e,r,n,i,s,a,o)}function $p(t){return new Gu(t)}function T6(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function d4(t){return t.collectionGroup!==null}function Z0(t){const e=$t(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Yn(xi.comparator);return a.filters.forEach((l=>{l.getFlattenedFilters().forEach((c=>{c.isInequality()&&(o=o.add(c.field))}))})),o})(e).forEach((s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new j1(s,n))})),r.has(xi.keyField().canonicalString())||e.ce.push(new j1(xi.keyField(),n))}return e.ce}function ao(t){const e=$t(t);return e.le||(e.le=E8(e,Z0(t))),e.le}function b8(t){const e=$t(t);return e.he||(e.he=E8(e,t.explicitOrderBy)),e.he}function E8(t,e){if(t.limitType==="F")return X5(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new j1(i.field,s)}));const r=t.endAt?new lh(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new lh(t.startAt.position,t.startAt.inclusive):null;return X5(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Y5(t,e){const r=t.filters.concat([e]);return new Gu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function U2(t,e,r){return new Gu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function pg(t,e){return dg(ao(t),ao(e))&&t.limitType===e.limitType}function S8(t){return`${kd(ao(t))}|lt:${t.limitType}`}function z0(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((i=>v8(i))).join(", ")}]`),hg(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((i=>wp(i))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((i=>wp(i))).join(",")),`Target(${n})`})(ao(t))}; limitType=${t.limitType})`}function mg(t,e){return e.isFoundDocument()&&(function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Wt.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)})(t,e)&&(function(n,i){for(const s of Z0(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(n,i){return!(n.startAt&&!(function(a,o,l){const c=b6(a,o,l);return a.inclusive?c<=0:c<0})(n.startAt,Z0(n),i)||n.endAt&&!(function(a,o,l){const c=b6(a,o,l);return a.inclusive?c>=0:c>0})(n.endAt,Z0(n),i))})(t,e)}function k8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function T8(t){return(e,r)=>{let n=!1;for(const i of Z0(t)){const s=vM(i,e,r);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function vM(t,e,r){const n=t.field.isKeyField()?Wt.comparator(e.key,r.key):(function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?oh(l,c):Qt()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Qt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sh(this.inner,((r,n)=>{for(const[i,s]of n)e(i,s)}))}isEmpty(){return c8(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=new ui(Wt.comparator);function Do(){return yM}const A8=new ui(Wt.comparator);function e1(...t){let e=A8;for(const r of t)e=e.insert(r.key,r);return e}function N8(t){let e=A8;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function Uc(){return u1()}function C8(){return u1()}function u1(){return new Ku((t=>t.toString()),((t,e)=>t.isEqual(e)))}const wM=new ui(Wt.comparator),_M=new Yn(Wt.comparator);function Br(...t){let e=_M;for(const r of t)e=e.add(r);return e}const bM=new Yn(Lr);function p4(){return bM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:F1(e)?"-0":e}}function I8(t){return{integerValue:""+t}}function P8(t,e){return n8(e)?I8(e):m4(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(){this._=void 0}}function EM(t,e,r){return t instanceof bp?(function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Dv(s)&&(s=Ov(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}})(r,e):t instanceof Td?F8(t,e):t instanceof Ad?L8(t,e):(function(i,s){const a=R8(i,s),o=A6(a)+A6(i.Pe);return W5(a)&&W5(i.Pe)?I8(o):m4(i.serializer,o)})(t,e)}function SM(t,e,r){return t instanceof Td?F8(t,e):t instanceof Ad?L8(t,e):r}function R8(t,e){return t instanceof Ep?(function(n){return W5(n)||(function(s){return!!s&&"doubleValue"in s})(n)})(e)?e:{integerValue:0}:null}class bp extends Mv{}class Td extends Mv{constructor(e){super(),this.elements=e}}function F8(t,e){const r=D8(e);for(const n of t.elements)r.some((i=>Zc(i,n)))||r.push(n);return{arrayValue:{values:r}}}class Ad extends Mv{constructor(e){super(),this.elements=e}}function L8(t,e){let r=D8(e);for(const n of t.elements)r=r.filter((i=>!Zc(i,n)));return{arrayValue:{values:r}}}class Ep extends Mv{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function A6(t){return Ni(t.integerValue||t.doubleValue)}function D8(t){return O1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,r){this.field=e,this.transform=r}}function kM(t,e){return t.field.isEqual(e.field)&&(function(n,i){return n instanceof Td&&i instanceof Td||n instanceof Ad&&i instanceof Ad?xp(n.elements,i.elements,Zc):n instanceof Ep&&i instanceof Ep?Zc(n.Pe,i.Pe):n instanceof bp&&i instanceof bp})(t.transform,e.transform)}class TM{constructor(e,r){this.version=e,this.transformResults=r}}class Ci{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Ci}static exists(e){return new Ci(void 0,e)}static updateTime(e){return new Ci(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function x2(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bv{}function O8(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Hp(t.key,Ci.none()):new qp(t.key,t.data,Ci.none());{const r=t.data,n=ka.empty();let i=new Yn(xi.comparator);for(let s of e.fields)if(!i.has(s)){let a=r.field(s);a===null&&s.length>1&&(s=s.popLast(),a=r.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new Xu(t.key,n,new Lo(i.toArray()),Ci.none())}}function AM(t,e,r){t instanceof qp?(function(i,s,a){const o=i.value.clone(),l=C6(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(t,e,r):t instanceof Xu?(function(i,s,a){if(!x2(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=C6(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(j8(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(t,e,r):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,r)}function f1(t,e,r,n){return t instanceof qp?(function(s,a,o,l){if(!x2(s.precondition,a))return o;const c=s.value.clone(),f=I6(s.fieldTransforms,l,a);return c.setAll(f),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null})(t,e,r,n):t instanceof Xu?(function(s,a,o,l){if(!x2(s.precondition,a))return o;const c=I6(s.fieldTransforms,l,a),f=a.data;return f.setAll(j8(s)),f.setAll(c),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((p=>p.field)))})(t,e,r,n):(function(s,a,o){return x2(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o})(t,e,r)}function NM(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),s=R8(n.transform,i||null);s!=null&&(r===null&&(r=ka.empty()),r.set(n.field,s))}return r||null}function N6(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&xp(n,i,((s,a)=>kM(s,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class qp extends Bv{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xu extends Bv{constructor(e,r,n,i,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function j8(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function C6(t,e,r){const n=new Map;cr(t.length===r.length);for(let i=0;i<r.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);n.set(s.field,SM(a,o,r[i]))}return n}function I6(t,e,r){const n=new Map;for(const i of t){const s=i.transform,a=r.data.field(i.field);n.set(i.field,EM(s,a,e))}return n}class Hp extends Bv{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g4 extends Bv{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&AM(s,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=f1(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=f1(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=C8();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=r.has(i.key)?null:o;const l=O8(a,o);l!==null&&n.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(pr.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),Br())}isEqual(e){return this.batchId===e.batchId&&xp(this.mutations,e.mutations,((r,n)=>N6(r,n)))&&xp(this.baseMutations,e.baseMutations,((r,n)=>N6(r,n)))}}class v4{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){cr(e.mutations.length===n.length);let i=(function(){return wM})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new v4(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var As,pn;function B8(t){switch(t){default:return Qt();case st.CANCELLED:case st.UNKNOWN:case st.DEADLINE_EXCEEDED:case st.RESOURCE_EXHAUSTED:case st.INTERNAL:case st.UNAVAILABLE:case st.UNAUTHENTICATED:return!1;case st.INVALID_ARGUMENT:case st.NOT_FOUND:case st.ALREADY_EXISTS:case st.PERMISSION_DENIED:case st.FAILED_PRECONDITION:case st.ABORTED:case st.OUT_OF_RANGE:case st.UNIMPLEMENTED:case st.DATA_LOSS:return!0}}function V8(t){if(t===void 0)return ms("GRPC error has no .code"),st.UNKNOWN;switch(t){case As.OK:return st.OK;case As.CANCELLED:return st.CANCELLED;case As.UNKNOWN:return st.UNKNOWN;case As.DEADLINE_EXCEEDED:return st.DEADLINE_EXCEEDED;case As.RESOURCE_EXHAUSTED:return st.RESOURCE_EXHAUSTED;case As.INTERNAL:return st.INTERNAL;case As.UNAVAILABLE:return st.UNAVAILABLE;case As.UNAUTHENTICATED:return st.UNAUTHENTICATED;case As.INVALID_ARGUMENT:return st.INVALID_ARGUMENT;case As.NOT_FOUND:return st.NOT_FOUND;case As.ALREADY_EXISTS:return st.ALREADY_EXISTS;case As.PERMISSION_DENIED:return st.PERMISSION_DENIED;case As.FAILED_PRECONDITION:return st.FAILED_PRECONDITION;case As.ABORTED:return st.ABORTED;case As.OUT_OF_RANGE:return st.OUT_OF_RANGE;case As.UNIMPLEMENTED:return st.UNIMPLEMENTED;case As.DATA_LOSS:return st.DATA_LOSS;default:return Qt()}}(pn=As||(As={}))[pn.OK=0]="OK",pn[pn.CANCELLED=1]="CANCELLED",pn[pn.UNKNOWN=2]="UNKNOWN",pn[pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pn[pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pn[pn.NOT_FOUND=5]="NOT_FOUND",pn[pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",pn[pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",pn[pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",pn[pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pn[pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pn[pn.ABORTED=10]="ABORTED",pn[pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",pn[pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",pn[pn.INTERNAL=13]="INTERNAL",pn[pn.UNAVAILABLE=14]="UNAVAILABLE",pn[pn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z2=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=new md([4294967295,4294967295],0);function P6(t){const e=U8().encode(t),r=new zN;return r.update(e),new Uint8Array(r.digest())}function R6(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new md([r,n],0),new md([i,s],0)]}class w4{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new t1(`Invalid padding: ${r}`);if(n<0)throw new t1(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new t1(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new t1(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=md.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(md.fromNumber(n)));return i.compare(IM)===1&&(i=new md([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=P6(e),[n,i]=R6(r);for(let s=0;s<this.hashCount;s++){const a=this.Ee(n,i,s);if(!this.de(a))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new w4(s,i,r);return n.forEach((o=>a.insert(o))),a}insert(e){if(this.Ie===0)return;const r=P6(e),[n,i]=R6(r);for(let s=0;s<this.hashCount;s++){const a=this.Ee(n,i,s);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class t1 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,r,n,i,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,vg.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new xg(pr.min(),i,new ui(Lr),Do(),Br())}}class vg{constructor(e,r,n,i,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new vg(n,r,Br(),Br(),Br())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class z8{constructor(e,r){this.targetId=e,this.me=r}}class $8{constructor(e,r,n=zi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class F6{constructor(){this.fe=0,this.ge=D6(),this.pe=zi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Br(),r=Br(),n=Br();return this.ge.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:Qt()}})),new vg(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=D6()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,cr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class PM{constructor(e){this.Le=e,this.Be=new Map,this.ke=Do(),this.qe=L6(),this.Qe=new ui(Lr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Qt()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,i)=>{this.ze(i)&&r(i)}))}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const s=i.target;if(B2(s))if(n===0){const a=new Wt(s.path);this.Ue(r,a,gi.newNoDocument(a,pr.min()))}else cr(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}z2?.et((function(f,p,g,m,_){var w,b,k,R,C,j;const X={localCacheCount:f,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},K=p.unchangedNames;return K&&(X.bloomFilter={applied:_===0,hashCount:(w=K?.hashCount)!==null&&w!==void 0?w:0,bitmapLength:(R=(k=(b=K?.bits)===null||b===void 0?void 0:b.bitmap)===null||k===void 0?void 0:k.length)!==null&&R!==void 0?R:0,padding:(j=(C=K?.bits)===null||C===void 0?void 0:C.padding)!==null&&j!==void 0?j:0,mightContain:P=>{var A;return(A=m?.mightContain(P))!==null&&A!==void 0&&A}}),X})(a,e.me,this.Le.tt(),o,l))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=r;let a,o;try{a=$u(n).toUint8Array()}catch(l){if(l instanceof u8)return ll("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new w4(a,i,s)}catch(l){return ll(l instanceof t1?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach((s=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,s,null),i++)})),i}rt(e){const r=new Map;this.Be.forEach(((s,a)=>{const o=this.Je(a);if(o){if(s.current&&B2(o.target)){const l=new Wt(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,gi.newNoDocument(l,e))}s.be&&(r.set(a,s.ve()),s.Ce())}}));let n=Br();this.qe.forEach(((s,a)=>{let o=!0;a.forEachWhile((l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(n=n.add(s))})),this.ke.forEach(((s,a)=>a.setReadTime(e)));const i=new xg(e,r,this.Qe,this.ke,n);return this.ke=Do(),this.qe=L6(),this.Qe=new ui(Lr),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new F6,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Yn(Lr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||kt("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new F6),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function L6(){return new ui(Wt.comparator)}function D6(){return new ui(Wt.comparator)}const RM={asc:"ASCENDING",desc:"DESCENDING"},FM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LM={and:"AND",or:"OR"};class DM{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Q5(t,e){return t.useProto3Json||hg(e)?e:{value:e}}function Sp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function q8(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function OM(t,e){return Sp(t,e.toTimestamp())}function xs(t){return cr(!!t),pr.fromTimestamp((function(r){const n=zu(r);return new Ii(n.seconds,n.nanos)})(t))}function _4(t,e){return J5(t,e).canonicalString()}function J5(t,e){const r=(function(i){return new cn(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?r:r.child(e)}function H8(t){const e=cn.fromString(t);return cr(tC(e)),e}function M1(t,e){return _4(t.databaseId,e.path)}function Kc(t,e){const r=H8(e);if(r.get(1)!==t.databaseId.projectId)throw new St(st.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new St(st.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Wt(K8(r))}function W8(t,e){return _4(t.databaseId,e)}function G8(t){const e=H8(t);return e.length===4?cn.emptyPath():K8(e)}function Z5(t){return new cn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function K8(t){return cr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function O6(t,e,r){return{name:M1(t,e),fields:r.value.mapValue.fields}}function X8(t,e,r){const n=Kc(t,e.name),i=xs(e.updateTime),s=e.createTime?xs(e.createTime):pr.min(),a=new ka({mapValue:{fields:e.fields}}),o=gi.newFoundDocument(n,i,s,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function jM(t,e){return"found"in e?(function(n,i){cr(!!i.found),i.found.name,i.found.updateTime;const s=Kc(n,i.found.name),a=xs(i.found.updateTime),o=i.found.createTime?xs(i.found.createTime):pr.min(),l=new ka({mapValue:{fields:i.found.fields}});return gi.newFoundDocument(s,a,o,l)})(t,e):"missing"in e?(function(n,i){cr(!!i.missing),cr(!!i.readTime);const s=Kc(n,i.missing),a=xs(i.readTime);return gi.newNoDocument(s,a)})(t,e):Qt()}function MM(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Qt()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(c,f){return c.useProto3Json?(cr(f===void 0||typeof f=="string"),zi.fromBase64String(f||"")):(cr(f===void 0||f instanceof Buffer||f instanceof Uint8Array),zi.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&(function(c){const f=c.code===void 0?st.UNKNOWN:V8(c.code);return new St(f,c.message||"")})(a);r=new $8(n,i,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=Kc(t,n.document.name),s=xs(n.document.updateTime),a=n.document.createTime?xs(n.document.createTime):pr.min(),o=new ka({mapValue:{fields:n.document.fields}}),l=gi.newFoundDocument(i,s,a,o),c=n.targetIds||[],f=n.removedTargetIds||[];r=new v2(c,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=Kc(t,n.document),s=n.readTime?xs(n.readTime):pr.min(),a=gi.newNoDocument(i,s),o=n.removedTargetIds||[];r=new v2([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=Kc(t,n.document),s=n.removedTargetIds||[];r=new v2([],s,i,null)}else{if(!("filter"in e))return Qt();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new CM(i,s),o=n.targetId;r=new z8(o,a)}}return r}function B1(t,e){let r;if(e instanceof qp)r={update:O6(t,e.key,e.value)};else if(e instanceof Hp)r={delete:M1(t,e.key)};else if(e instanceof Xu)r={update:O6(t,e.key,e.data),updateMask:qM(e.fieldMask)};else{if(!(e instanceof g4))return Qt();r={verify:M1(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(s,a){const o=a.transform;if(o instanceof bp)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Td)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ad)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Ep)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw Qt()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:OM(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Qt()})(t,e.precondition)),r}function e_(t,e){const r=e.currentDocument?(function(s){return s.updateTime!==void 0?Ci.updateTime(xs(s.updateTime)):s.exists!==void 0?Ci.exists(s.exists):Ci.none()})(e.currentDocument):Ci.none(),n=e.updateTransforms?e.updateTransforms.map((i=>(function(a,o){let l=null;if("setToServerValue"in o)cr(o.setToServerValue==="REQUEST_TIME"),l=new bp;else if("appendMissingElements"in o){const f=o.appendMissingElements.values||[];l=new Td(f)}else if("removeAllFromArray"in o){const f=o.removeAllFromArray.values||[];l=new Ad(f)}else"increment"in o?l=new Ep(a,o.increment):Qt();const c=xi.fromServerFormat(o.fieldPath);return new gg(c,l)})(t,i))):[];if(e.update){e.update.name;const i=Kc(t,e.update.name),s=new ka({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(l){const c=l.fieldPaths||[];return new Lo(c.map((f=>xi.fromServerFormat(f))))})(e.updateMask);return new Xu(i,s,a,r,n)}return new qp(i,s,r,n)}if(e.delete){const i=Kc(t,e.delete);return new Hp(i,r)}if(e.verify){const i=Kc(t,e.verify);return new g4(i,r)}return Qt()}function BM(t,e){return t&&t.length>0?(cr(e!==void 0),t.map((r=>(function(i,s){let a=i.updateTime?xs(i.updateTime):xs(s);return a.isEqual(pr.min())&&(a=xs(s)),new TM(a,i.transformResults||[])})(r,e)))):[]}function Y8(t,e){return{documents:[W8(t,e.path)]}}function Vv(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=W8(t,i);const s=(function(c){if(c.length!==0)return eC($n.create(c,"and"))})(e.filters);s&&(r.structuredQuery.where=s);const a=(function(c){if(c.length!==0)return c.map((f=>(function(g){return{field:Of(g.field),direction:UM(g.dir)}})(f)))})(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=Q5(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{_t:r,parent:i}}function Q8(t,e,r,n){const{_t:i,parent:s}=Vv(t,e),a={},o=[];let l=0;return r.forEach((c=>{const f=n?c.alias:"aggregate_"+l++;a[f]=c.alias,c.aggregateType==="count"?o.push({alias:f,count:{}}):c.aggregateType==="avg"?o.push({alias:f,avg:{field:Of(c.fieldPath)}}):c.aggregateType==="sum"&&o.push({alias:f,sum:{field:Of(c.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:i.structuredQuery},parent:i.parent},ut:a,parent:s}}function J8(t){let e=G8(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){cr(n===1);const f=r.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];r.where&&(s=(function(p){const g=Z8(p);return g instanceof $n&&h4(g)?g.getFilters():[g]})(r.where));let a=[];r.orderBy&&(a=(function(p){return p.map((g=>(function(_){return new j1($0(_.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(g)))})(r.orderBy));let o=null;r.limit&&(o=(function(p){let g;return g=typeof p=="object"?p.value:p,hg(g)?null:g})(r.limit));let l=null;r.startAt&&(l=(function(p){const g=!!p.before,m=p.values||[];return new lh(m,g)})(r.startAt));let c=null;return r.endAt&&(c=(function(p){const g=!p.before,m=p.values||[];return new lh(m,g)})(r.endAt)),_8(e,i,a,s,o,"F",l,c)}function VM(t,e){const r=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qt()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Z8(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=$0(r.unaryFilter.field);return un.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=$0(r.unaryFilter.field);return un.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=$0(r.unaryFilter.field);return un.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=$0(r.unaryFilter.field);return un.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Qt()}})(t):t.fieldFilter!==void 0?(function(r){return un.create($0(r.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qt()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return $n.create(r.compositeFilter.filters.map((n=>Z8(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Qt()}})(r.compositeFilter.op))})(t):Qt()}function UM(t){return RM[t]}function zM(t){return FM[t]}function $M(t){return LM[t]}function Of(t){return{fieldPath:t.canonicalString()}}function $0(t){return xi.fromServerFormat(t.fieldPath)}function eC(t){return t instanceof un?(function(r){if(r.op==="=="){if(y6(r.value))return{unaryFilter:{field:Of(r.field),op:"IS_NAN"}};if(v6(r.value))return{unaryFilter:{field:Of(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(y6(r.value))return{unaryFilter:{field:Of(r.field),op:"IS_NOT_NAN"}};if(v6(r.value))return{unaryFilter:{field:Of(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Of(r.field),op:zM(r.op),value:r.value}}})(t):t instanceof $n?(function(r){const n=r.getFilters().map((i=>eC(i)));return n.length===1?n[0]:{compositeFilter:{op:$M(r.op),filters:n}}})(t):Qt()}function qM(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function tC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,r,n,i,s=pr.min(),a=pr.min(),o=zi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Iu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Iu(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Iu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Iu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.ct=e}}function HM(t,e){let r;if(e.document)r=X8(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Wt.fromSegments(e.noDocument.path),i=Cd(e.noDocument.readTime);r=gi.newNoDocument(n,i),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Qt();{const n=Wt.fromSegments(e.unknownDocument.path),i=Cd(e.unknownDocument.version);r=gi.newUnknownDocument(n,i)}}return e.readTime&&r.setReadTime((function(i){const s=new Ii(i[0],i[1]);return pr.fromTimestamp(s)})(e.readTime)),r}function j6(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:$2(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(s,a){return{name:M1(s,a.key),fields:a.data.value.mapValue.fields,updateTime:Sp(s,a.version.toTimestamp()),createTime:Sp(s,a.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Nd(e.version)};else{if(!e.isUnknownDocument())return Qt();n.unknownDocument={path:r.path.toArray(),version:Nd(e.version)}}return n}function $2(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Nd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cd(t){const e=new Ii(t.seconds,t.nanoseconds);return pr.fromTimestamp(e)}function ad(t,e){const r=(e.baseMutations||[]).map((s=>e_(t.ct,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map((s=>e_(t.ct,s))),i=Ii.fromMillis(e.localWriteTimeMs);return new x4(e.batchId,i,r,n)}function r1(t){const e=Cd(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Cd(t.lastLimboFreeSnapshotVersion):pr.min();let n;return n=(function(s){return s.documents!==void 0})(t.query)?(function(s){return cr(s.documents.length===1),ao($p(G8(s.documents[0])))})(t.query):(function(s){return ao(J8(s))})(t.query),new Iu(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,zi.fromBase64String(t.resumeToken))}function nC(t,e){const r=Nd(e.snapshotVersion),n=Nd(e.lastLimboFreeSnapshotVersion);let i;i=B2(e.target)?Y8(t.ct,e.target):Vv(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:kd(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function b4(t){const e=J8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?U2(e,e.limit,"L"):e}function Aw(t,e){return new y4(e.largestBatchId,e_(t.ct,e.overlayMutation))}function M6(t,e){const r=e.path.lastSegment();return[t,so(e.path.popLast()),r]}function B6(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Nd(n.readTime),documentKey:so(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{getBundleMetadata(e,r){return V6(e).get(r).next((n=>{if(n)return(function(s){return{id:s.bundleId,createTime:Cd(s.createTime),version:s.version}})(n)}))}saveBundleMetadata(e,r){return V6(e).put((function(i){return{bundleId:i.id,createTime:Nd(xs(i.createTime)),version:i.version}})(r))}getNamedQuery(e,r){return U6(e).get(r).next((n=>{if(n)return(function(s){return{name:s.name,query:b4(s.bundledQuery),readTime:Cd(s.readTime)}})(n)}))}saveNamedQuery(e,r){return U6(e).put((function(i){return{name:i.name,readTime:Nd(xs(i.readTime)),bundledQuery:i.bundledQuery}})(r))}}function V6(t){return Hs(t,"bundles")}function U6(t){return Hs(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Uv(e,n)}getOverlay(e,r){return Vm(e).get(M6(this.userId,r)).next((n=>n?Aw(this.serializer,n):null))}getOverlays(e,r){const n=Uc();return We.forEach(r,(i=>this.getOverlay(e,i).next((s=>{s!==null&&n.set(i,s)})))).next((()=>n))}saveOverlays(e,r,n){const i=[];return n.forEach(((s,a)=>{const o=new y4(r,a);i.push(this.ht(e,o))})),We.waitFor(i)}removeOverlaysForBatchId(e,r,n){const i=new Set;r.forEach((a=>i.add(so(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);s.push(Vm(e).j("collectionPathOverlayIndex",o))})),We.waitFor(s)}getOverlaysForCollection(e,r,n){const i=Uc(),s=so(r),a=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Vm(e).U("collectionPathOverlayIndex",a).next((o=>{for(const l of o){const c=Aw(this.serializer,l);i.set(c.getKey(),c)}return i}))}getOverlaysForCollectionGroup(e,r,n,i){const s=Uc();let a;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Vm(e).J({index:"collectionGroupOverlayIndex",range:o},((l,c,f)=>{const p=Aw(this.serializer,c);s.size()<i||p.largestBatchId===a?(s.set(p.getKey(),p),a=p.largestBatchId):f.done()})).next((()=>s))}ht(e,r){return Vm(e).put((function(i,s,a){const[o,l,c]=M6(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:B1(i.ct,a.mutation)}})(this.serializer,this.userId,r))}}function Vm(t){return Hs(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{Pt(e){return Hs(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r?.value;return n?zi.fromUint8Array(n):zi.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Ni(e.integerValue));else if("doubleValue"in e){const n=Ni(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),F1(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=zu(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt($u(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?f8(e)?this.dt(r,Number.MAX_SAFE_INTEGER):jv(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Qt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const i of Object.keys(n))this.Vt(i,r),this.Tt(n[i],r)}wt(e,r){var n,i;const s=e.fields||{};this.dt(r,53);const a="value",o=((i=(n=s[a].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.length)||0;this.dt(r,15),r.At(Ni(o)),this.Vt(a,r),this.Tt(s[a],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const i of n)this.Tt(i,r)}yt(e,r){this.dt(r,37),Wt.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}od.vt=new od;function KM(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function z6(t){const e=64-(function(n){let i=0;for(let s=0;s<8;++s){const a=KM(255&n[s]);if(i+=a,a!==8)break}return i})(t);return Math.ceil(e/8)}class XM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const i=r.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const i=r.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const r=this.qt(e),n=z6(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=255&r[i]}Kt(e){const r=this.qt(e),n=z6(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=~(255&r[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let i=1;i<r.length;++i)r[i]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class YM{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class QM{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Um{constructor(){this.jt=new XM,this.Ht=new YM(this.jt),this.Jt=new QM(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,r,n,i){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=i}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new ld(this.indexId,this.documentKey,this.arrayValue,n)}}function If(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=$6(t.arrayValue,e.arrayValue),r!==0?r:(r=$6(t.directionalValue,e.directionalValue),r!==0?r:Wt.comparator(t.documentKey,e.documentKey)))}function $6(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e){this.Xt=new Yn(((r,n)=>xi.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(cr(e.collectionGroup===this.collectionId),this.nn)return!1;const r=$5(e);if(r!==void 0&&!this.sn(r))return!1;const n=nd(e);let i=new Set,s=0,a=0;for(;s<n.length&&this.sn(n[s]);++s)i=i.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=n[s];if(!this.on(o,l)||!this._n(this.en[a++],l))return!1}++s}for(;s<n.length;++s){const o=n[s];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new Yn(xi.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new gd(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new gd(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new gd(n.field,n.dir==="asc"?0:1)));return new vp(vp.UNKNOWN_ID,this.collectionId,r,yp.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t){var e,r;if(cr(t instanceof un||t instanceof $n),t instanceof un){if(t instanceof w8){const i=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((s=>un.create(t.field,"==",s))))||[];return $n.create(i,"or")}return t}const n=t.filters.map((i=>iC(i)));return $n.create(n,t.op)}function JM(t){if(t.getFilters().length===0)return[];const e=n_(iC(t));return cr(sC(e)),t_(e)||r_(e)?[e]:e.getFilters()}function t_(t){return t instanceof un}function r_(t){return t instanceof $n&&h4(t)}function sC(t){return t_(t)||r_(t)||(function(r){if(r instanceof $n&&G5(r)){for(const n of r.getFilters())if(!t_(n)&&!r_(n))return!1;return!0}return!1})(t)}function n_(t){if(cr(t instanceof un||t instanceof $n),t instanceof un)return t;if(t.filters.length===1)return n_(t.filters[0]);const e=t.filters.map((n=>n_(n)));let r=$n.create(e,t.op);return r=q2(r),sC(r)?r:(cr(r instanceof $n),cr(_p(r)),cr(r.filters.length>1),r.filters.reduce(((n,i)=>E4(n,i))))}function E4(t,e){let r;return cr(t instanceof un||t instanceof $n),cr(e instanceof un||e instanceof $n),r=t instanceof un?e instanceof un?(function(i,s){return $n.create([i,s],"and")})(t,e):H6(t,e):e instanceof un?H6(e,t):(function(i,s){if(cr(i.filters.length>0&&s.filters.length>0),_p(i)&&_p(s))return x8(i,s.getFilters());const a=G5(i)?i:s,o=G5(i)?s:i,l=a.filters.map((c=>E4(c,o)));return $n.create(l,"or")})(t,e),q2(r)}function H6(t,e){if(_p(e))return x8(e,t.getFilters());{const r=e.filters.map((n=>E4(t,n)));return $n.create(r,"or")}}function q2(t){if(cr(t instanceof un||t instanceof $n),t instanceof un)return t;const e=t.getFilters();if(e.length===1)return q2(e[0]);if(m8(t))return t;const r=e.map((i=>q2(i))),n=[];return r.forEach((i=>{i instanceof un?n.push(i):i instanceof $n&&(i.op===t.op?n.push(...i.filters):n.push(i))})),n.length===1?n[0]:$n.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(){this.un=new S4}addToCollectionParentIndex(e,r){return this.un.add(r),We.resolve()}getCollectionParents(e,r){return We.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return We.resolve()}deleteFieldIndex(e,r){return We.resolve()}deleteAllFieldIndexes(e){return We.resolve()}createTargetIndexes(e,r){return We.resolve()}getDocumentsMatchingTarget(e,r){return We.resolve(null)}getIndexType(e,r){return We.resolve(0)}getFieldIndexes(e,r){return We.resolve([])}getNextCollectionGroupToUpdate(e){return We.resolve(null)}getMinOffset(e,r){return We.resolve(cl.min())}getMinOffsetFromCollectionGroup(e,r){return We.resolve(cl.min())}updateCollectionGroup(e,r,n){return We.resolve()}updateIndexEntries(e,r){return We.resolve()}}class S4{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Yn(cn.comparator),s=!i.has(n);return this.index[r]=i.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Yn(cn.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=new Uint8Array(0);class eB{constructor(e,r){this.databaseId=r,this.cn=new S4,this.ln=new Ku((n=>kd(n)),((n,i)=>dg(n,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),i=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const s={collectionId:n,parent:so(i)};return W6(e).put(s)}return We.resolve()}getCollectionParents(e,r){const n=[],i=IDBKeyRange.bound([r,""],[QN(r),""],!1,!0);return W6(e).U(i).next((s=>{for(const a of s){if(a.collectionId!==r)break;n.push(Vc(a.parent))}return n}))}addFieldIndex(e,r){const n=zm(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(r);delete i.indexId;const s=n.add(i);if(r.indexState){const a=P0(e);return s.next((o=>{a.put(B6(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return s.next()}deleteFieldIndex(e,r){const n=zm(e),i=P0(e),s=I0(e);return n.delete(r.indexId).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=zm(e),n=I0(e),i=P0(e);return r.j().next((()=>n.j())).next((()=>i.j()))}createTargetIndexes(e,r){return We.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((i=>{if(i===0||i===1){const s=new q6(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,r){const n=I0(e);let i=!0;const s=new Map;return We.forEach(this.hn(r),(a=>this.Pn(e,a).next((o=>{i&&(i=!!o),s.set(a,o)})))).next((()=>{if(i){let a=Br();const o=[];return We.forEach(s,((l,c)=>{kt("IndexedDbIndexManager",`Using index ${(function(C){return`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map((j=>`${j.fieldPath}:${j.kind}`)).join(",")}`})(l)} to execute ${kd(r)}`);const f=(function(C,j){const X=$5(j);if(X===void 0)return null;for(const K of V2(C,X.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null})(c,l),p=(function(C,j){const X=new Map;for(const K of nd(j))for(const P of V2(C,K.fieldPath))switch(P.op){case"==":case"in":X.set(K.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return X.set(K.fieldPath.canonicalString(),P.value),Array.from(X.values())}return null})(c,l),g=(function(C,j){const X=[];let K=!0;for(const P of nd(j)){const A=P.kind===0?S6(C,P.fieldPath,C.startAt):k6(C,P.fieldPath,C.startAt);X.push(A.value),K&&(K=A.inclusive)}return new lh(X,K)})(c,l),m=(function(C,j){const X=[];let K=!0;for(const P of nd(j)){const A=P.kind===0?k6(C,P.fieldPath,C.endAt):S6(C,P.fieldPath,C.endAt);X.push(A.value),K&&(K=A.inclusive)}return new lh(X,K)})(c,l),_=this.In(l,c,g),w=this.In(l,c,m),b=this.Tn(l,c,p),k=this.En(l.indexId,f,_,g.inclusive,w,m.inclusive,b);return We.forEach(k,(R=>n.G(R,r.limit).next((C=>{C.forEach((j=>{const X=Wt.fromSegments(j.documentKey);a.has(X)||(a=a.add(X),o.push(X))}))}))))})).next((()=>o))}return We.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=JM($n.create(e.filters,"and")).map((n=>X5(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,i,s,a,o){const l=(r!=null?r.length:1)*Math.max(n.length,s.length),c=l/(r!=null?r.length:1),f=[];for(let p=0;p<l;++p){const g=r?this.dn(r[p/c]):Px,m=this.An(e,g,n[p%c],i),_=this.Rn(e,g,s[p%c],a),w=o.map((b=>this.An(e,g,b,!0)));f.push(...this.createRange(m,_,w))}return f}An(e,r,n,i){const s=new ld(e,Wt.empty(),r,n);return i?s:s.Zt()}Rn(e,r,n,i){const s=new ld(e,Wt.empty(),r,n);return i?s.Zt():s}Pn(e,r){const n=new q6(r),i=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const o of s)n.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a}))}getIndexType(e,r){let n=2;const i=this.hn(r);return We.forEach(i,(s=>this.Pn(e,s).next((a=>{a?n!==0&&a.fields.length<(function(l){let c=new Yn(xi.comparator),f=!1;for(const p of l.filters)for(const g of p.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:c=c.add(g.field));for(const p of l.orderBy)p.field.isKeyField()||(c=c.add(p.field));return c.size+(f?1:0)})(s)&&(n=1):n=0})))).next((()=>(function(a){return a.limit!==null})(r)&&i.length>1&&n===2?1:n))}Vn(e,r){const n=new Um;for(const i of nd(e)){const s=r.data.field(i.fieldPath);if(s==null)return null;const a=n.Yt(i.kind);od.vt.It(s,a)}return n.zt()}dn(e){const r=new Um;return od.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Um;return od.vt.It(Sd(this.databaseId,r),n.Yt((function(s){const a=nd(s);return a.length===0?0:a[a.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let i=[];i.push(new Um);let s=0;for(const a of nd(e)){const o=n[s++];for(const l of i)if(this.fn(r,a.fieldPath)&&O1(o))i=this.gn(i,a,o);else{const c=l.Yt(a.kind);od.vt.It(o,c)}}return this.pn(i)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const i=[...e],s=[];for(const a of n.arrayValue.values||[])for(const o of i){const l=new Um;l.seed(o.zt()),od.vt.It(a,l.Yt(r.kind)),s.push(l)}return s}fn(e,r){return!!e.filters.find((n=>n instanceof un&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=zm(e),i=P0(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((s=>{const a=[];return We.forEach(s,(o=>i.get([o.indexId,this.uid]).next((l=>{a.push((function(f,p){const g=p?new yp(p.sequenceNumber,new cl(Cd(p.readTime),new Wt(Vc(p.documentKey)),p.largestBatchId)):yp.empty(),m=f.fields.map((([_,w])=>new gd(xi.fromServerFormat(_),w)));return new vp(f.indexId,f.collectionGroup,m,g)})(o,l))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,i)=>{const s=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Lr(n.collectionGroup,i.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const i=zm(e),s=P0(e);return this.yn(e).next((a=>i.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((o=>We.forEach(o,(l=>s.put(B6(l.indexId,this.uid,a,n))))))))}updateIndexEntries(e,r){const n=new Map;return We.forEach(r,((i,s)=>{const a=n.get(i.collectionGroup);return(a?We.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(n.set(i.collectionGroup,o),We.forEach(o,(l=>this.wn(e,i,l).next((c=>{const f=this.Sn(s,l);return c.isEqual(f)?We.resolve():this.bn(e,s,l,c,f)})))))))}))}Dn(e,r,n,i){return I0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,i){return I0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const i=I0(e);let s=new Yn(If);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((a,o)=>{s=s.add(new ld(n.indexId,r,o.arrayValue,o.directionalValue))})).next((()=>s))}Sn(e,r){let n=new Yn(If);const i=this.Vn(r,e);if(i==null)return n;const s=$5(r);if(s!=null){const a=e.data.field(s.fieldPath);if(O1(a))for(const o of a.arrayValue.values||[])n=n.add(new ld(r.indexId,e.key,this.dn(o),i))}else n=n.add(new ld(r.indexId,e.key,Px,i));return n}bn(e,r,n,i,s){kt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const a=[];return(function(l,c,f,p,g){const m=l.getIterator(),_=c.getIterator();let w=C0(m),b=C0(_);for(;w||b;){let k=!1,R=!1;if(w&&b){const C=f(w,b);C<0?R=!0:C>0&&(k=!0)}else w!=null?R=!0:k=!0;k?(p(b),b=C0(_)):R?(g(w),w=C0(m)):(w=C0(m),b=C0(_))}})(i,s,If,(o=>{a.push(this.Dn(e,r,n,o))}),(o=>{a.push(this.vn(e,r,n,o))})),We.waitFor(a)}yn(e){let r=1;return P0(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,i,s)=>{s.done(),r=i.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((a,o)=>If(a,o))).filter(((a,o,l)=>!o||If(a,l[o-1])!==0));const i=[];i.push(e);for(const a of n){const o=If(a,e),l=If(a,r);if(o===0)i[0]=e.Zt();else if(o>0&&l<0)i.push(a),i.push(a.Zt());else if(l>0)break}i.push(r);const s=[];for(let a=0;a<i.length;a+=2){if(this.Cn(i[a],i[a+1]))return[];const o=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,Px,[]],l=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,Px,[]];s.push(IDBKeyRange.bound(o,l))}return s}Cn(e,r){return If(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(G6)}getMinOffset(e,r){return We.mapArray(this.hn(r),(n=>this.Pn(e,n).next((i=>i||Qt())))).next(G6)}}function W6(t){return Hs(t,"collectionParents")}function I0(t){return Hs(t,"indexEntries")}function zm(t){return Hs(t,"indexConfiguration")}function P0(t){return Hs(t,"indexState")}function G6(t){cr(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const i=t[n].indexState.offset;c4(i,e)<0&&(e=i),r<i.largestBatchId&&(r=i.largestBatchId)}return new cl(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ja{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Ja(e,Ja.DEFAULT_COLLECTION_PERCENTILE,Ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t,e,r){const n=t.store("mutations"),i=t.store("documentMutations"),s=[],a=IDBKeyRange.only(r.batchId);let o=0;const l=n.J({range:a},((f,p,g)=>(o++,g.delete())));s.push(l.next((()=>{cr(o===1)})));const c=[];for(const f of r.mutations){const p=i8(e,f.key.path,r.batchId);s.push(i.delete(p)),c.push(f.key)}return We.waitFor(s).next((()=>c))}function H2(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Qt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ja.DEFAULT_COLLECTION_PERCENTILE=10,Ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ja.DEFAULT=new Ja(41943040,Ja.DEFAULT_COLLECTION_PERCENTILE,Ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ja.DISABLED=new Ja(-1,0,0);class zv{constructor(e,r,n,i){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=i,this.Fn={}}static lt(e,r,n,i){cr(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new zv(s,r,n,i)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pf(e).J({index:"userMutationsIndex",range:n},((i,s,a)=>{r=!1,a.done()})).next((()=>r))}addMutationBatch(e,r,n,i){const s=q0(e),a=Pf(e);return a.add({}).next((o=>{cr(typeof o=="number");const l=new x4(o,r,n,i),c=(function(m,_,w){const b=w.baseMutations.map((R=>B1(m.ct,R))),k=w.mutations.map((R=>B1(m.ct,R)));return{userId:_,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:b,mutations:k}})(this.serializer,this.userId,l),f=[];let p=new Yn(((g,m)=>Lr(g.canonicalString(),m.canonicalString())));for(const g of i){const m=i8(this.userId,g.key.path,o);p=p.add(g.key.path.popLast()),f.push(a.put(c)),f.push(s.put(m,Uj))}return p.forEach((g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Fn[o]=l.keys()})),We.waitFor(f).next((()=>l))}))}lookupMutationBatch(e,r){return Pf(e).get(r).next((n=>n?(cr(n.userId===this.userId),ad(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?We.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const i=n.keys();return this.Fn[r]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return Pf(e).J({index:"userMutationsIndex",range:i},((a,o,l)=>{o.userId===this.userId&&(cr(o.batchId>=n),s=ad(this.serializer,o)),l.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Pf(e).J({index:"userMutationsIndex",range:r,reverse:!0},((i,s,a)=>{n=s.batchId,a.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pf(e).U("userMutationsIndex",r).next((n=>n.map((i=>ad(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=d2(this.userId,r.path),i=IDBKeyRange.lowerBound(n),s=[];return q0(e).J({range:i},((a,o,l)=>{const[c,f,p]=a,g=Vc(f);if(c===this.userId&&r.path.isEqual(g))return Pf(e).get(p).next((m=>{if(!m)throw Qt();cr(m.userId===this.userId),s.push(ad(this.serializer,m))}));l.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Yn(Lr);const i=[];return r.forEach((s=>{const a=d2(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=q0(e).J({range:o},((c,f,p)=>{const[g,m,_]=c,w=Vc(m);g===this.userId&&s.path.isEqual(w)?n=n.add(_):p.done()}));i.push(l)})),We.waitFor(i).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1,s=d2(this.userId,n),a=IDBKeyRange.lowerBound(s);let o=new Yn(Lr);return q0(e).J({range:a},((l,c,f)=>{const[p,g,m]=l,_=Vc(g);p===this.userId&&n.isPrefixOf(_)?_.length===i&&(o=o.add(m)):f.done()})).next((()=>this.xn(e,o)))}xn(e,r){const n=[],i=[];return r.forEach((s=>{i.push(Pf(e).get(s).next((a=>{if(a===null)throw Qt();cr(a.userId===this.userId),n.push(ad(this.serializer,a))})))})),We.waitFor(i).next((()=>n))}removeMutationBatch(e,r){return aC(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),We.forEach(n,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return We.resolve();const n=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return q0(e).J({range:n},((s,a,o)=>{if(s[0]===this.userId){const l=Vc(s[1]);i.push(l)}else o.done()})).next((()=>{cr(i.length===0)}))}))}containsKey(e,r){return oC(e,this.userId,r)}Nn(e){return lC(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function oC(t,e,r){const n=d2(e,r.path),i=n[1],s=IDBKeyRange.lowerBound(n);let a=!1;return q0(t).J({range:s,H:!0},((o,l,c)=>{const[f,p,g]=o;f===e&&p===i&&(a=!0),c.done()})).next((()=>a))}function Pf(t){return Hs(t,"mutations")}function q0(t){return Hs(t,"documentMutations")}function lC(t){return Hs(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Id(0)}static kn(){return new Id(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new Id(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>pr.fromTimestamp(new Ii(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((i=>(i.highestListenSequenceNumber=r,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),r>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=r),this.Qn(e,i))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>R0(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(cr(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let i=0;const s=[];return R0(e).J(((a,o)=>{const l=r1(o);l.sequenceNumber<=r&&n.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))})).next((()=>We.waitFor(s))).next((()=>i))}forEachTarget(e,r){return R0(e).J(((n,i)=>{const s=r1(i);r(s)}))}qn(e){return X6(e).get("targetGlobalKey").next((r=>(cr(r!==null),r)))}Qn(e,r){return X6(e).put("targetGlobalKey",r)}Kn(e,r){return R0(e).put(nC(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=kd(r),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return R0(e).J({range:i,index:"queryTargetsIndex"},((a,o,l)=>{const c=r1(o);dg(r,c.target)&&(s=c,l.done())})).next((()=>s))}addMatchingKeys(e,r,n){const i=[],s=jf(e);return r.forEach((a=>{const o=so(a.path);i.push(s.put({targetId:n,path:o})),i.push(this.referenceDelegate.addReference(e,n,a))})),We.waitFor(i)}removeMatchingKeys(e,r,n){const i=jf(e);return We.forEach(r,(s=>{const a=so(s.path);return We.waitFor([i.delete([n,a]),this.referenceDelegate.removeReference(e,n,s)])}))}removeMatchingKeysForTargetId(e,r){const n=jf(e),i=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),i=jf(e);let s=Br();return i.J({range:n,H:!0},((a,o,l)=>{const c=Vc(a[1]),f=new Wt(c);s=s.add(f)})).next((()=>s))}containsKey(e,r){const n=so(r.path),i=IDBKeyRange.bound([n],[QN(n)],!1,!0);let s=0;return jf(e).J({index:"documentTargetsIndex",H:!0,range:i},(([a,o],l,c)=>{a!==0&&(s++,c.done())})).next((()=>s>0))}ot(e,r){return R0(e).get(r).next((n=>n?r1(n):null))}}function R0(t){return Hs(t,"targets")}function X6(t){return Hs(t,"targetGlobal")}function jf(t){return Hs(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6([t,e],[r,n]){const i=Lr(t,r);return i===0?Lr(e,n):i}class rB{constructor(e){this.Un=e,this.buffer=new Yn(Y6),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();Y6(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class cC{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){kt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Eh(r)?kt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await bh(r)}await this.Hn(3e5)}))}}class nB{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return We.resolve(Fo.oe);const n=new rB(r);return this.Jn.forEachTarget(e,(i=>n.zn(i.sequenceNumber))).next((()=>this.Jn.Zn(e,(i=>n.zn(i))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(kt("LruGarbageCollector","Garbage collection skipped; disabled"),We.resolve(K6)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(kt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),K6):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,i,s,a,o,l,c;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(kt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,a=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(n=p,o=Date.now(),this.removeTargets(e,n,r)))).next((p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,n)))).next((p=>(c=Date.now(),U0()<=ln.DEBUG&&kt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${p} documents in `+(c-l)+`ms
Total Duration: ${c-f}ms`),We.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p}))))}}function uC(t,e){return new nB(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e,r){this.db=e,this.garbageCollector=uC(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((i=>n+i))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,i)=>r(i)))}addReference(e,r,n){return Rx(e,n)}removeReference(e,r,n){return Rx(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Rx(e,r)}nr(e,r){return(function(i,s){let a=!1;return lC(i).Y((o=>oC(i,o,s).next((l=>(l&&(a=!0),We.resolve(!l)))))).next((()=>a))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,((a,o)=>{if(o<=r){const l=this.nr(e,a).next((c=>{if(!c)return s++,n.getEntry(e,a).next((()=>(n.removeEntry(a,pr.min()),jf(e).delete((function(p){return[0,so(p.path)]})(a)))))}));i.push(l)}})).next((()=>We.waitFor(i))).next((()=>n.apply(e))).next((()=>s))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Rx(e,r)}tr(e,r){const n=jf(e);let i,s=Fo.oe;return n.J({index:"documentTargetsIndex"},(([a,o],{path:l,sequenceNumber:c})=>{a===0?(s!==Fo.oe&&r(new Wt(Vc(i)),s),s=c,i=l):s=Fo.oe})).next((()=>{s!==Fo.oe&&r(new Wt(Vc(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Rx(t,e){return jf(t).put((function(n,i){return{targetId:0,path:so(n.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.changes=new Ku((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,gi.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?We.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return ed(e).put(n)}removeEntry(e,r,n){return ed(e).delete((function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],$2(a),o[o.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=gi.newInvalidDocument(r);return ed(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($m(r))},((i,s)=>{n=this.ir(r,s)})).next((()=>n))}sr(e,r){let n={size:0,document:gi.newInvalidDocument(r)};return ed(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($m(r))},((i,s)=>{n={document:this.ir(r,s),size:H2(s)}})).next((()=>n))}getEntries(e,r){let n=Do();return this._r(e,r,((i,s)=>{const a=this.ir(i,s);n=n.insert(i,a)})).next((()=>n))}ar(e,r){let n=Do(),i=new ui(Wt.comparator);return this._r(e,r,((s,a)=>{const o=this.ir(s,a);n=n.insert(s,o),i=i.insert(s,H2(a))})).next((()=>({documents:n,ur:i})))}_r(e,r,n){if(r.isEmpty())return We.resolve();let i=new Yn(Z6);r.forEach((l=>i=i.add(l)));const s=IDBKeyRange.bound($m(i.first()),$m(i.last())),a=i.getIterator();let o=a.getNext();return ed(e).J({index:"documentKeyIndex",range:s},((l,c,f)=>{const p=Wt.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&Z6(o,p)<0;)n(o,null),o=a.getNext();o&&o.isEqual(p)&&(n(o,c),o=a.hasNext()?a.getNext():null),o?f.$($m(o)):f.done()})).next((()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,r,n,i,s){const a=r.path,o=[a.popLast().toArray(),a.lastSegment(),$2(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ed(e).U(IDBKeyRange.bound(o,l,!0)).next((c=>{s?.incrementDocumentReadCount(c.length);let f=Do();for(const p of c){const g=this.ir(Wt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(mg(r,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f}))}getAllFromCollectionGroup(e,r,n,i){let s=Do();const a=J6(r,n),o=J6(r,cl.max());return ed(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},((l,c,f)=>{const p=this.ir(Wt.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(p.key,p),s.size===i&&f.done()})).next((()=>s))}newChangeBuffer(e){return new aB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return Q6(e).get("remoteDocumentGlobalKey").next((r=>(cr(!!r),r)))}rr(e,r){return Q6(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=HM(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(pr.min())))return n}return gi.newInvalidDocument(e)}}function hC(t){return new sB(t)}class aB extends fC{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Ku((n=>n.toString()),((n,i)=>n.isEqual(i)))}applyChanges(e){const r=[];let n=0,i=new Yn(((s,a)=>Lr(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const o=this.lr.get(s);if(r.push(this.cr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=j6(this.cr.serializer,a);i=i.add(s.path.popLast());const c=H2(l);n+=c-o.size,r.push(this.cr.addEntry(e,s,l))}else if(n-=o.size,this.trackRemovals){const l=j6(this.cr.serializer,a.convertToNoDocument(pr.min()));r.push(this.cr.addEntry(e,s,l))}})),i.forEach((s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,s))})),r.push(this.cr.updateMetadata(e,n)),We.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:i})=>(i.forEach(((s,a)=>{this.lr.set(s,{size:a,readTime:n.get(s).readTime})})),n)))}}function Q6(t){return Hs(t,"remoteDocumentGlobal")}function ed(t){return Hs(t,"remoteDocumentsV14")}function $m(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function J6(t,e){const r=e.documentKey.path.toArray();return[t,$2(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Z6(t,e){const r=t.path.toArray(),n=e.path.toArray();let i=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(i=Lr(r[s],n[s]),i)return i;return i=Lr(r.length,n.length),i||(i=Lr(r[r.length-2],n[n.length-2]),i||Lr(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,r)))).next((i=>(n!==null&&f1(n.mutation,i,Lo.empty(),Ii.now()),i)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,Br()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=Br()){const i=Uc();return this.populateOverlays(e,i,r).next((()=>this.computeViews(e,r,i,n).next((s=>{let a=e1();return s.forEach(((o,l)=>{a=a.insert(o,l.overlayedDocument)})),a}))))}getOverlayedDocuments(e,r){const n=Uc();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,Br())))}populateOverlays(e,r,n){const i=[];return n.forEach((s=>{r.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,o)=>{r.set(a,o)}))}))}computeViews(e,r,n,i){let s=Do();const a=u1(),o=(function(){return u1()})();return r.forEach(((l,c)=>{const f=n.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof Xu)?s=s.insert(c.key,c):f!==void 0?(a.set(c.key,f.mutation.getFieldMask()),f1(f.mutation,c,f.mutation.getFieldMask(),Ii.now())):a.set(c.key,Lo.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((c,f)=>a.set(c,f))),r.forEach(((c,f)=>{var p;return o.set(c,new oB(f,(p=a.get(c))!==null&&p!==void 0?p:null))})),o)))}recalculateAndSaveOverlays(e,r){const n=u1();let i=new ui(((a,o)=>a-o)),s=Br();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((a=>{for(const o of a)o.keys().forEach((l=>{const c=r.get(l);if(c===null)return;let f=n.get(l)||Lo.empty();f=o.applyToLocalView(c,f),n.set(l,f);const p=(i.get(o.batchId)||Br()).add(l);i=i.insert(o.batchId,p)}))})).next((()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,f=l.value,p=C8();f.forEach((g=>{if(!s.has(g)){const m=O8(r.get(g),n.get(g));m!==null&&p.set(g,m),s=s.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(e,c,p))}return We.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,i){return(function(a){return Wt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):d4(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-s.size):We.resolve(Uc());let o=-1,l=s;return a.next((c=>We.forEach(c,((f,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),s.get(f)?We.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{l=l.insert(f,g)}))))).next((()=>this.populateOverlays(e,c,s))).next((()=>this.computeViews(e,l,c,Br()))).next((f=>({batchId:o,changes:N8(f)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Wt(r)).next((n=>{let i=e1();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const s=r.collectionGroup;let a=e1();return this.indexManager.getCollectionParents(e,s).next((o=>We.forEach(o,(l=>{const c=(function(p,g){return new Gu(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(r,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,n,i).next((f=>{f.forEach(((p,g)=>{a=a.insert(p,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,r,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,i)))).next((a=>{s.forEach(((l,c)=>{const f=c.getKey();a.get(f)===null&&(a=a.insert(f,gi.newInvalidDocument(f)))}));let o=e1();return a.forEach(((l,c)=>{const f=s.get(l);f!==void 0&&f1(f.mutation,c,Lo.empty(),Ii.now()),mg(r,c)&&(o=o.insert(l,c))})),o}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return We.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(i){return{id:i.id,version:i.version,createTime:xs(i.createTime)}})(r)),We.resolve()}getNamedQuery(e,r){return We.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(i){return{name:i.name,query:b4(i.bundledQuery),readTime:xs(i.readTime)}})(r)),We.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(){this.overlays=new ui(Wt.comparator),this.Ir=new Map}getOverlay(e,r){return We.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Uc();return We.forEach(r,(i=>this.getOverlay(e,i).next((s=>{s!==null&&n.set(i,s)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((i,s)=>{this.ht(e,r,s)})),We.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.Ir.delete(n)),We.resolve()}getOverlaysForCollection(e,r,n){const i=Uc(),s=r.length+1,a=new Wt(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>n&&i.set(l.getKey(),l)}return We.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let s=new ui(((c,f)=>c-f));const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let f=s.get(c.largestBatchId);f===null&&(f=Uc(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const o=Uc(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,f)=>o.set(c,f))),!(o.size()>=i)););return We.resolve(o)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new y4(r,n));let s=this.Ir.get(r);s===void 0&&(s=Br(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(){this.sessionToken=zi.EMPTY_BYTE_STRING}getSessionToken(e){return We.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,We.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(){this.Tr=new Yn(ta.Er),this.dr=new Yn(ta.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new ta(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new ta(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new Wt(new cn([])),n=new ta(r,e),i=new ta(r,e+1),s=[];return this.dr.forEachInRange([n,i],(a=>{this.Vr(a),s.push(a.key)})),s}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Wt(new cn([])),n=new ta(r,e),i=new ta(r,e+1);let s=Br();return this.dr.forEachInRange([n,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const r=new ta(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class ta{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Wt.comparator(e.key,r.key)||Lr(e.wr,r.wr)}static Ar(e,r){return Lr(e.wr,r.wr)||Wt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Yn(ta.Er)}checkEmpty(e){return We.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new x4(s,r,n,i);this.mutationQueue.push(a);for(const o of i)this.br=this.br.add(new ta(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return We.resolve(a)}lookupMutationBatch(e,r){return We.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.vr(n),s=i<0?0:i;return We.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return We.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return We.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new ta(r,0),i=new ta(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,i],(a=>{const o=this.Dr(a.wr);s.push(o)})),We.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Yn(Lr);return r.forEach((i=>{const s=new ta(i,0),a=new ta(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],(o=>{n=n.add(o.wr)}))})),We.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let s=n;Wt.isDocumentKey(s)||(s=s.child(""));const a=new ta(new Wt(s),0);let o=new Yn(Lr);return this.br.forEachWhile((l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===i&&(o=o.add(l.wr)),!0)}),a),We.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach((n=>{const i=this.Dr(n);i!==null&&r.push(i)})),r}removeMutationBatch(e,r){cr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return We.forEach(r.mutations,(i=>{const s=new ta(i.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new ta(r,0),i=this.br.firstAfterOrEqual(n);return We.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,We.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e){this.Mr=e,this.docs=(function(){return new ui(Wt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),s=i?i.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return We.resolve(n?n.document.mutableCopy():gi.newInvalidDocument(r))}getEntries(e,r){let n=Do();return r.forEach((i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():gi.newInvalidDocument(i))})),We.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let s=Do();const a=r.path,o=new Wt(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:f}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||c4(ZN(f),n)<=0||(i.has(f.key)||mg(r,f))&&(s=s.insert(f.key,f.mutableCopy()))}return We.resolve(s)}getAllFromCollectionGroup(e,r,n,i){Qt()}Or(e,r){return We.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new dB(this)}getSize(e){return We.resolve(this.size)}}class dB extends fC{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)})),We.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e){this.persistence=e,this.Nr=new Ku((r=>kd(r)),dg),this.lastRemoteSnapshotVersion=pr.min(),this.highestTargetId=0,this.Lr=0,this.Br=new k4,this.targetCount=0,this.kr=Id.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,i)=>r(i))),We.resolve()}getLastRemoteSnapshotVersion(e){return We.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return We.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),We.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),We.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Id(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,We.resolve()}updateTargetData(e,r){return this.Kn(r),We.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,We.resolve()}removeTargets(e,r,n){let i=0;const s=[];return this.Nr.forEach(((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),We.waitFor(s).next((()=>i))}getTargetCount(e){return We.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return We.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),We.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,s=[];return i&&r.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),We.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),We.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return We.resolve(n)}containsKey(e,r){return We.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Fo(0),this.Kr=!1,this.Kr=!0,this.$r=new uB,this.referenceDelegate=e(this),this.Ur=new pB(this),this.indexManager=new ZM,this.remoteDocumentCache=(function(i){return new hB(i)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new rC(r),this.Gr=new lB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new cB,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new fB(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){kt("MemoryPersistence","Starting transaction:",e);const i=new mB(this.Qr.next());return this.referenceDelegate.zr(),n(i).next((s=>this.referenceDelegate.jr(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Hr(e,r){return We.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class mB extends t8{constructor(e){super(),this.currentSequenceNumber=e}}class $v{constructor(e){this.persistence=e,this.Jr=new k4,this.Yr=null}static Zr(e){return new $v(e)}get Xr(){if(this.Yr)return this.Yr;throw Qt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),We.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),We.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),We.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((i=>this.Xr.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((i=>{i.forEach((s=>this.Xr.add(s.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return We.forEach(this.Xr,(n=>{const i=Wt.fromPath(n);return this.ei(e,i).next((s=>{s||r.removeEntry(i,pr.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return We.or([()=>We.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class W2{constructor(e,r){this.persistence=e,this.ti=new Ku((n=>so(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=uC(this,r)}static Zr(e,r){return new W2(e,r)}zr(){}jr(e){return We.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Yn(e){const r=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>r.next((i=>n+i))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}Zn(e,r){return We.forEach(this.ti,((n,i)=>this.nr(e,n,i).next((s=>s?We.resolve():r(i)))))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Or(e,(a=>this.nr(e,a,r).next((o=>{o||(n++,s.removeEntry(a,pr.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,r){return this.ti.set(r,e.currentSequenceNumber),We.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),We.resolve()}removeReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),We.resolve()}updateLimboDocument(e,r){return this.ti.set(r,e.currentSequenceNumber),We.resolve()}Wr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=m2(e.data.value)),r}nr(e,r,n){return We.or([()=>this.persistence.Hr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.ti.get(r);return We.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(e){this.serializer=e}O(e,r,n,i){const s=new Lv("createOrUpgrade",r);n<1&&i>=1&&((function(l){l.createObjectStore("owner")})(e),(function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",d6,{unique:!0}),l.createObjectStore("documentMutations")})(e),eS(e),(function(l){l.createObjectStore("remoteDocuments")})(e));let a=We.resolve();return n<3&&i>=3&&(n!==0&&((function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")})(e),eS(e)),a=a.next((()=>(function(l){const c=l.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pr.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",f)})(s)))),n<4&&i>=4&&(n!==0&&(a=a.next((()=>(function(l,c){return c.store("mutations").U().next((f=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",d6,{unique:!0});const p=c.store("mutations"),g=f.map((m=>p.put(m)));return We.waitFor(g)}))})(e,s)))),a=a.next((()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&i>=5&&(a=a.next((()=>this.ni(s)))),n<6&&i>=6&&(a=a.next((()=>((function(l){l.createObjectStore("remoteDocumentGlobal")})(e),this.ri(s))))),n<7&&i>=7&&(a=a.next((()=>this.ii(s)))),n<8&&i>=8&&(a=a.next((()=>this.si(e,s)))),n<9&&i>=9&&(a=a.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&i>=10&&(a=a.next((()=>this.oi(s)))),n<11&&i>=11&&(a=a.next((()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(l){l.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&i>=12&&(a=a.next((()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:Zj});c.createIndex("collectionPathOverlayIndex",eM,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",tM,{unique:!1})})(e)}))),n<13&&i>=13&&(a=a.next((()=>(function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:zj});c.createIndex("documentKeyIndex",$j),c.createIndex("collectionGroupIndex",qj)})(e))).next((()=>this._i(e,s))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&i>=14&&(a=a.next((()=>this.ai(e,s)))),n<15&&i>=15&&(a=a.next((()=>(function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:Xj}).createIndex("sequenceNumberIndex",Yj,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:Qj}).createIndex("documentKeyIndex",Jj,{unique:!1})})(e)))),n<16&&i>=16&&(a=a.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&i>=17&&(a=a.next((()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)}))),a}ri(e){let r=0;return e.store("remoteDocuments").J(((n,i)=>{r+=H2(i)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((i=>We.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",a).next((o=>We.forEach(o,(l=>{cr(l.userId===s.userId);const c=ad(this.serializer,l);return aC(e,s.userId,c).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((i=>{const s=[];return n.J(((a,o)=>{const l=new cn(a),c=(function(p){return[0,so(p)]})(l);s.push(r.get(c).next((f=>f?We.resolve():(p=>r.put({targetId:0,path:so(p),sequenceNumber:i.highestListenSequenceNumber}))(l))))})).next((()=>We.waitFor(s)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:Kj});const n=r.store("collectionParents"),i=new S4,s=a=>{if(i.add(a)){const o=a.lastSegment(),l=a.popLast();return n.put({collectionId:o,parent:so(l)})}};return r.store("remoteDocuments").J({H:!0},((a,o)=>{const l=new cn(a);return s(l.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([a,o,l],c)=>{const f=Vc(o);return s(f.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,i)=>{const s=r1(i),a=nC(this.serializer,s);return r.put(a)}))}_i(e,r){const n=r.store("remoteDocuments"),i=[];return n.J(((s,a)=>{const o=r.store("remoteDocumentsV14"),l=(function(p){return p.document?new Wt(cn.fromString(p.document.name).popFirst(5)):p.noDocument?Wt.fromSegments(p.noDocument.path):p.unknownDocument?Wt.fromSegments(p.unknownDocument.path):Qt()})(a).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(c))})).next((()=>We.waitFor(i)))}ai(e,r){const n=r.store("mutations"),i=hC(this.serializer),s=new T4($v.Zr,this.serializer.ct);return n.U().next((a=>{const o=new Map;return a.forEach((l=>{var c;let f=(c=o.get(l.userId))!==null&&c!==void 0?c:Br();ad(this.serializer,l).keys().forEach((p=>f=f.add(p))),o.set(l.userId,f)})),We.forEach(o,((l,c)=>{const f=new na(c),p=Uv.lt(this.serializer,f),g=s.getIndexManager(f),m=zv.lt(f,this.serializer,g,s.referenceDelegate);return new dC(i,m,p,g).recalculateAndSaveOverlaysForDocumentKeys(new q5(r,Fo.oe),l).next()}))}))}}function eS(t){t.createObjectStore("targetDocuments",{keyPath:Wj}).createIndex("documentTargetsIndex",Gj,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Hj,{unique:!0}),t.createObjectStore("targetGlobal")}const Nw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class A4{constructor(e,r,n,i,s,a,o,l,c,f,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=a,this.document=o,this.ci=c,this.li=f,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!A4.D())throw new St(st.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new iB(this,i),this.Ai=r+"main",this.serializer=new rC(l),this.Ri=new Gc(this.Ai,this.hi,new gB(this.serializer)),this.$r=new GM,this.Ur=new tB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hC(this.serializer),this.Gr=new WM,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,f===!1&&ms("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new St(st.FAILED_PRECONDITION,Nw);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new Fo(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Fx(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Eh(e))return kt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return kt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return qm(e).get("owner").next((r=>We.resolve(this.vi(r))))}Ci(e){return Fx(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=Hs(r,"clientMetadata");return n.U().next((i=>{const s=this.xi(i,18e5),a=i.filter((o=>s.indexOf(o)===-1));return We.forEach(a,(o=>n.delete(o.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?We.resolve(!0):qm(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new St(st.FAILED_PRECONDITION,Nw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fx(e).U().next((n=>this.xi(n,5e3).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&kt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new q5(e,Fo.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>Fx(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return zv.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new eB(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Uv.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){kt("IndexedDbPersistence","Starting transaction:",e);const i=r==="readonly"?"readonly":"readwrite",s=(function(l){return l===17?iM:l===16?nM:l===15?f4:l===14?o8:l===13?a8:l===12?rM:l===11?s8:void Qt()})(this.hi);let a;return this.Ri.runTransaction(e,i,s,(o=>(a=new q5(o,this.Qr?this.Qr.next():Fo.oe),r==="readwrite-primary"?this.wi(a).next((l=>!!l||this.Si(a))).next((l=>{if(!l)throw ms(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new St(st.FAILED_PRECONDITION,e8);return n(a)})).next((l=>this.Di(a).next((()=>l)))):this.Ki(a).next((()=>n(a)))))).then((o=>(a.raiseOnCommittedEvent(),o)))}Ki(e){return qm(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new St(st.FAILED_PRECONDITION,Nw)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qm(e).put("owner",r)}static D(){return Gc.D()}bi(e){const r=qm(e);return r.get("owner").next((n=>this.vi(n)?(kt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):We.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(ms(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;DN()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return kt("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ms("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ms("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function qm(t){return Hs(t,"owner")}function Fx(t){return Hs(t,"clientMetadata")}function N4(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(e,r){let n=Br(),i=Br();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new C4(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return DN()?8:r8($s())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,i){const s={result:null};return this.Yi(e,r).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.Zi(e,r,i,n).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new xB;return this.Xi(e,r,a).next((o=>{if(s.result=o,this.zi)return this.es(e,r,a,o.size)}))})).next((()=>s.result))}es(e,r,n,i){return n.documentReadCount<this.ji?(U0()<=ln.DEBUG&&kt("QueryEngine","SDK will not create cache indexes for query:",z0(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),We.resolve()):(U0()<=ln.DEBUG&&kt("QueryEngine","Query:",z0(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(U0()<=ln.DEBUG&&kt("QueryEngine","The SDK decides to create cache indexes for query:",z0(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ao(r))):We.resolve())}Yi(e,r){if(T6(r))return We.resolve(null);let n=ao(r);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(r.limit!==null&&i===1&&(r=U2(r,null,"F"),n=ao(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((s=>{const a=Br(...s);return this.Ji.getDocuments(e,a).next((o=>this.indexManager.getMinOffset(e,n).next((l=>{const c=this.ts(r,o);return this.ns(r,c,a,l.readTime)?this.Yi(e,U2(r,null,"F")):this.rs(e,c,r,l)}))))})))))}Zi(e,r,n,i){return T6(r)||i.isEqual(pr.min())?We.resolve(null):this.Ji.getDocuments(e,n).next((s=>{const a=this.ts(r,s);return this.ns(r,a,n,i)?We.resolve(null):(U0()<=ln.DEBUG&&kt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),z0(r)),this.rs(e,a,r,JN(i,-1)).next((o=>o)))}))}ts(e,r){let n=new Yn(T8(e));return r.forEach(((i,s)=>{mg(e,s)&&(n=n.add(s))})),n}ns(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,r,n){return U0()<=ln.DEBUG&&kt("QueryEngine","Using full collection scan to execute query:",z0(r)),this.Ji.getDocumentsMatchingQuery(e,r,cl.min(),n)}rs(e,r,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next((s=>(r.forEach((a=>{s=s.insert(a.key,a)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(e,r,n,i){this.persistence=e,this.ss=r,this.serializer=i,this.os=new ui(Lr),this._s=new Ku((s=>kd(s)),dg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function mC(t,e,r,n){return new vB(t,e,r,n)}async function gC(t,e){const r=$t(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next((s=>(i=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((s=>{const a=[],o=[];let l=Br();for(const c of i){a.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}for(const c of s){o.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}return r.localDocuments.getDocuments(n,l).next((c=>({hs:c,removedBatchIds:a,addedBatchIds:o})))}))}))}function yB(t,e){const r=$t(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return(function(o,l,c,f){const p=c.batch,g=p.keys();let m=We.resolve();return g.forEach((_=>{m=m.next((()=>f.getEntry(l,_))).next((w=>{const b=c.docVersions.get(_);cr(b!==null),w.version.compareTo(b)<0&&(p.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),f.addEntry(w)))}))})),m.next((()=>o.mutationQueue.removeMutationBatch(l,p)))})(r,n,e,s).next((()=>s.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(o){let l=Br();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l})(e)))).next((()=>r.localDocuments.getDocuments(n,i)))}))}function xC(t){const e=$t(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function wB(t,e){const r=$t(t),n=e.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const o=[];e.targetChanges.forEach(((f,p)=>{const g=i.get(p);if(!g)return;o.push(r.Ur.removeMatchingKeys(s,f.removedDocuments,p).next((()=>r.Ur.addMatchingKeys(s,f.addedDocuments,p))));let m=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(zi.EMPTY_BYTE_STRING,pr.min()).withLastLimboFreeSnapshotVersion(pr.min()):f.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(f.resumeToken,n)),i=i.insert(p,m),(function(w,b,k){return w.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(g,m,f)&&o.push(r.Ur.updateTargetData(s,m))}));let l=Do(),c=Br();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,f))})),o.push(vC(s,a,e.documentUpdates).next((f=>{l=f.Ps,c=f.Is}))),!n.isEqual(pr.min())){const f=r.Ur.getLastRemoteSnapshotVersion(s).next((p=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n)));o.push(f)}return We.waitFor(o).next((()=>a.apply(s))).next((()=>r.localDocuments.getLocalViewOfDocuments(s,l,c))).next((()=>l))})).then((s=>(r.os=i,s)))}function vC(t,e,r){let n=Br(),i=Br();return r.forEach((s=>n=n.add(s))),e.getEntries(t,n).next((s=>{let a=Do();return r.forEach(((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(pr.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):kt("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)})),{Ps:a,Is:i}}))}function _B(t,e){const r=$t(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function kp(t,e){const r=$t(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return r.Ur.getTargetData(n,e).next((s=>s?(i=s,We.resolve(i)):r.Ur.allocateTargetId(n).next((a=>(i=new Iu(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=r.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function Tp(t,e,r){const n=$t(t),i=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,(a=>n.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Eh(a))throw a;kt("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function G2(t,e,r){const n=$t(t);let i=pr.min(),s=Br();return n.persistence.runTransaction("Execute query","readwrite",(a=>(function(l,c,f){const p=$t(l),g=p._s.get(f);return g!==void 0?We.resolve(p.os.get(g)):p.Ur.getTargetData(c,f)})(n,a,ao(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next((l=>{s=l}))})).next((()=>n.ss.getDocumentsMatchingQuery(a,e,r?i:pr.min(),r?s:Br()))).next((o=>(_C(n,k8(e),o),{documents:o,Ts:s})))))}function yC(t,e){const r=$t(t),n=$t(r.Ur),i=r.os.get(e);return i?Promise.resolve(i.target):r.persistence.runTransaction("Get target data","readonly",(s=>n.ot(s,e).next((a=>a?a.target:null))))}function wC(t,e){const r=$t(t),n=r.us.get(e)||pr.min();return r.persistence.runTransaction("Get new document changes","readonly",(i=>r.cs.getAllFromCollectionGroup(i,e,JN(n,-1),Number.MAX_SAFE_INTEGER))).then((i=>(_C(r,e,i),i)))}function _C(t,e,r){let n=t.us.get(e)||pr.min();r.forEach(((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)})),t.us.set(e,n)}async function bB(t,e,r,n){const i=$t(t);let s=Br(),a=Do();for(const c of r){const f=e.Es(c.metadata.name);c.document&&(s=s.add(f));const p=e.ds(c);p.setReadTime(e.As(c.metadata.readTime)),a=a.insert(f,p)}const o=i.cs.newChangeBuffer({trackRemovals:!0}),l=await kp(i,(function(f){return ao($p(cn.fromString(`__bundle__/docs/${f}`)))})(n));return i.persistence.runTransaction("Apply bundle documents","readwrite",(c=>vC(c,o,a).next((f=>(o.apply(c),f))).next((f=>i.Ur.removeMatchingKeysForTargetId(c,l.targetId).next((()=>i.Ur.addMatchingKeys(c,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(c,f.Ps,f.Is))).next((()=>f.Ps))))))}async function EB(t,e,r=Br()){const n=await kp(t,ao(b4(e.bundledQuery))),i=$t(t);return i.persistence.runTransaction("Save named query","readwrite",(s=>{const a=xs(e.readTime);if(n.snapshotVersion.compareTo(a)>=0)return i.Gr.saveNamedQuery(s,e);const o=n.withResumeToken(zi.EMPTY_BYTE_STRING,a);return i.os=i.os.insert(o.targetId,o),i.Ur.updateTargetData(s,o).next((()=>i.Ur.removeMatchingKeysForTargetId(s,n.targetId))).next((()=>i.Ur.addMatchingKeys(s,r,n.targetId))).next((()=>i.Gr.saveNamedQuery(s,e)))}))}function tS(t,e){return`firestore_clients_${t}_${e}`}function rS(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function Cw(t,e){return`firestore_targets_${t}_${e}`}class K2{constructor(e,r,n,i){this.user=e,this.batchId=r,this.state=n,this.error=i}static Rs(e,r,n){const i=JSON.parse(n);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new St(i.error.code,i.error.message))),a?new K2(e,r,i.state,s):(ms("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class h1{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let i,s=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return s&&n.error&&(s=typeof n.error.message=="string"&&typeof n.error.code=="string",s&&(i=new St(n.error.code,n.error.message))),s?new h1(e,n.state,i):(ms("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class X2{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let i=typeof n=="object"&&n.activeTargetIds instanceof Array,s=p4();for(let a=0;i&&a<n.activeTargetIds.length;++a)i=n8(n.activeTargetIds[a]),s=s.add(n.activeTargetIds[a]);return i?new X2(e,s):(ms("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class I4{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new I4(r.clientId,r.onlineState):(ms("SharedClientState",`Failed to parse online state: ${e}`),null)}}class i_{constructor(){this.activeTargetIds=p4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Iw{constructor(e,r,n,i,s){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ui(Lr),this.started=!1,this.bs=[];const a=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=tS(this.persistenceKey,this.ps),this.vs=(function(l){return`firestore_sequence_number_${l}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new i_),this.Cs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.xs=(function(l){return`firestore_online_state_${l}`})(this.persistenceKey),this.Os=(function(l){return`firestore_bundle_loaded_v2_${l}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const i=this.getItem(tS(this.persistenceKey,n));if(i){const s=X2.Rs(n,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,i)=>{i.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Cw(this.persistenceKey,e));if(i){const s=h1.Rs(e,i);s&&(n=s.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Cw(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((i=>{this.Qs(i)})),this.currentUser=e,n.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return kt("SharedClientState","READ",e,r),r}setItem(e,r){kt("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){kt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(kt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void ms("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(s){let a=Fo.oe;if(s!=null)try{const o=JSON.parse(s);cr(typeof o=="number"),a=o}catch(o){ms("SharedClientState","Failed to read sequence number from WebStorage",o)}return a})(r.newValue);n!==Fo.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((i=>this.syncEngine.eo(i))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const i=new K2(this.currentUser,e,r,n),s=rS(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const r=rS(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const i=Cw(this.persistenceKey,e),s=new h1(e,r,n);this.setItem(i,s.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return X2.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),i=Number(n[1]),s=n[2]!==void 0?n[2]:null;return K2.Rs(new na(s),i,r)}Ys(e,r){const n=this.Ms.exec(e),i=Number(n[1]);return h1.Rs(i,r)}Ls(e){return I4.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);kt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(n),a=[],o=[];return s.forEach((l=>{i.has(l)||a.push(l)})),i.forEach((l=>{s.has(l)||o.push(l)})),this.syncEngine.io(a,o).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=p4();return e.forEach(((n,i)=>{r=r.unionWith(i.activeTargetIds)})),r}}class bC{constructor(){this.so=new i_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new i_,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){kt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){kt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lx=null;function Pw(){return Lx===null?Lx=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lx++,"0x"+Lx.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="WebChannelConnection";class AB extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(r,n,i,s,a){const o=Pw(),l=this.xo(r,n.toUriEncodedString());kt("RestConnection",`Sending RPC '${r}' ${o}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,a),this.No(r,l,c,i).then((f=>(kt("RestConnection",`Received RPC '${r}' ${o}: `,f),f)),(f=>{throw ll("RestConnection",`RPC '${r}' ${o} failed with error: `,f,"url: ",l,"request:",i),f}))}Lo(r,n,i,s,a,o){return this.Mo(r,n,i,s,a)}Oo(r,n,i){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zp})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,a)=>r[a]=s)),i&&i.headers.forEach(((s,a)=>r[a]=s))}xo(r,n){const i=kB[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,i){const s=Pw();return new Promise(((a,o)=>{const l=new $N;l.setWithCredentials(!0),l.listenOnce(qN.COMPLETE,(()=>{try{switch(l.getLastErrorCode()){case h2.NO_ERROR:const f=l.getResponseJson();kt(Wa,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case h2.TIMEOUT:kt(Wa,`RPC '${e}' ${s} timed out`),o(new St(st.DEADLINE_EXCEEDED,"Request time out"));break;case h2.HTTP_ERROR:const p=l.getStatus();if(kt(Wa,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const m=g?.error;if(m&&m.status&&m.message){const _=(function(b){const k=b.toLowerCase().replace(/_/g,"-");return Object.values(st).indexOf(k)>=0?k:st.UNKNOWN})(m.status);o(new St(_,m.message))}else o(new St(st.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new St(st.UNAVAILABLE,"Connection failed."));break;default:Qt()}}finally{kt(Wa,`RPC '${e}' ${s} completed.`)}}));const c=JSON.stringify(i);kt(Wa,`RPC '${e}' ${s} sending request:`,i),l.send(r,"POST",c,n,15)}))}Bo(e,r,n){const i=Pw(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=GN(),o=WN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const f=s.join("");kt(Wa,`Creating RPC '${e}' stream ${i}: ${f}`,l);const p=a.createWebChannel(f,l);let g=!1,m=!1;const _=new TB({Io:b=>{m?kt(Wa,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(g||(kt(Wa,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),kt(Wa,`RPC '${e}' stream ${i} sending:`,b),p.send(b))},To:()=>p.close()}),w=(b,k,R)=>{b.listen(k,(C=>{try{R(C)}catch(j){setTimeout((()=>{throw j}),0)}}))};return w(p,Zm.EventType.OPEN,(()=>{m||(kt(Wa,`RPC '${e}' stream ${i} transport opened.`),_.yo())})),w(p,Zm.EventType.CLOSE,(()=>{m||(m=!0,kt(Wa,`RPC '${e}' stream ${i} transport closed`),_.So())})),w(p,Zm.EventType.ERROR,(b=>{m||(m=!0,ll(Wa,`RPC '${e}' stream ${i} transport errored:`,b),_.So(new St(st.UNAVAILABLE,"The operation could not be completed")))})),w(p,Zm.EventType.MESSAGE,(b=>{var k;if(!m){const R=b.data[0];cr(!!R);const C=R,j=C.error||((k=C[0])===null||k===void 0?void 0:k.error);if(j){kt(Wa,`RPC '${e}' stream ${i} received error:`,j);const X=j.status;let K=(function(T){const O=As[T];if(O!==void 0)return V8(O)})(X),P=j.message;K===void 0&&(K=st.INTERNAL,P="Unknown error status: "+X+" with message "+j.message),m=!0,_.So(new St(K,P)),p.close()}else kt(Wa,`RPC '${e}' stream ${i} received:`,R),_.bo(R)}})),w(o,HN.STAT_EVENT,(b=>{b.stat===z5.PROXY?kt(Wa,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===z5.NOPROXY&&kt(Wa,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.wo()}),0),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(){return typeof window<"u"?window:null}function y2(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(t){return new DM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,r,n=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&kt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,r,n,i,s,a,o,l){this.ui=e,this.Ho=n,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new P4(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===st.RESOURCE_EXHAUSTED?(ms(r.toString()),ms("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===st.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.Yo===r&&this.P_(n,i)}),(n=>{e((()=>{const i=new St(st.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{n((()=>this.I_(i)))})),this.stream.onMessage((i=>{n((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return kt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(kt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class NB extends SC{constructor(e,r,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=MM(this.serializer,e),n=(function(s){if(!("targetChange"in s))return pr.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?pr.min():a.readTime?xs(a.readTime):pr.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Z5(this.serializer),r.addTarget=(function(s,a){let o;const l=a.target;if(o=B2(l)?{documents:Y8(s,l)}:{query:Vv(s,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=q8(s,a.resumeToken);const c=Q5(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(pr.min())>0){o.readTime=Sp(s,a.snapshotVersion.toTimestamp());const c=Q5(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o})(this.serializer,e);const n=VM(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Z5(this.serializer),r.removeTarget=e,this.a_(r)}}class CB extends SC{constructor(e,r,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return cr(!!e.streamToken),this.lastStreamToken=e.streamToken,cr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){cr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=BM(e.writeResults,e.commitTime),n=xs(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Z5(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>B1(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new St(st.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Mo(e,J5(r,n),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new St(st.UNKNOWN,s.toString())}))}Lo(e,r,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Lo(e,J5(r,n),i,a,o,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new St(st.UNKNOWN,a.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class PB{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ms(r),this.D_=!1):kt("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e,r,n,i,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o((a=>{n.enqueueAndForget((async()=>{kh(this)&&(kt("RemoteStore","Restarting streams for network reachability change."),await(async function(l){const c=$t(l);c.L_.add(4),await Wp(c),c.q_.set("Unknown"),c.L_.delete(4),await wg(c)})(this))}))})),this.q_=new PB(n,i)}}async function wg(t){if(kh(t))for(const e of t.B_)await e(!0)}async function Wp(t){for(const e of t.B_)await e(!1)}function qv(t,e){const r=$t(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),L4(r)?F4(r):Kp(r).r_()&&R4(r,e))}function Ap(t,e){const r=$t(t),n=Kp(r);r.N_.delete(e),n.r_()&&kC(r,e),r.N_.size===0&&(n.r_()?n.o_():kh(r)&&r.q_.set("Unknown"))}function R4(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pr.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Kp(t).A_(e)}function kC(t,e){t.Q_.xe(e),Kp(t).R_(e)}function F4(t){t.Q_=new PM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Kp(t).start(),t.q_.v_()}function L4(t){return kh(t)&&!Kp(t).n_()&&t.N_.size>0}function kh(t){return $t(t).L_.size===0}function TC(t){t.Q_=void 0}async function FB(t){t.q_.set("Online")}async function LB(t){t.N_.forEach(((e,r)=>{R4(t,e)}))}async function DB(t,e){TC(t),L4(t)?(t.q_.M_(e),F4(t)):t.q_.set("Unknown")}async function OB(t,e,r){if(t.q_.set("Online"),e instanceof $8&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const o of s.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.N_.delete(o),i.Q_.removeTarget(o))})(t,e)}catch(n){kt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Y2(t,n)}else if(e instanceof v2?t.Q_.Ke(e):e instanceof z8?t.Q_.He(e):t.Q_.We(e),!r.isEqual(pr.min()))try{const n=await xC(t.localStore);r.compareTo(n)>=0&&await(function(s,a){const o=s.Q_.rt(a);return o.targetChanges.forEach(((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.N_.get(c);f&&s.N_.set(c,f.withResumeToken(l.resumeToken,a))}})),o.targetMismatches.forEach(((l,c)=>{const f=s.N_.get(l);if(!f)return;s.N_.set(l,f.withResumeToken(zi.EMPTY_BYTE_STRING,f.snapshotVersion)),kC(s,l);const p=new Iu(f.target,l,c,f.sequenceNumber);R4(s,p)})),s.remoteSyncer.applyRemoteEvent(o)})(t,r)}catch(n){kt("RemoteStore","Failed to raise snapshot:",n),await Y2(t,n)}}async function Y2(t,e,r){if(!Eh(e))throw e;t.L_.add(1),await Wp(t),t.q_.set("Offline"),r||(r=()=>xC(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{kt("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await wg(t)}))}function AC(t,e){return e().catch((r=>Y2(t,r,e)))}async function Gp(t){const e=$t(t),r=ch(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;jB(e);)try{const i=await _B(e.localStore,n);if(i===null){e.O_.length===0&&r.o_();break}n=i.batchId,MB(e,i)}catch(i){await Y2(e,i)}NC(e)&&CC(e)}function jB(t){return kh(t)&&t.O_.length<10}function MB(t,e){t.O_.push(e);const r=ch(t);r.r_()&&r.V_&&r.m_(e.mutations)}function NC(t){return kh(t)&&!ch(t).n_()&&t.O_.length>0}function CC(t){ch(t).start()}async function BB(t){ch(t).p_()}async function VB(t){const e=ch(t);for(const r of t.O_)e.m_(r.mutations)}async function UB(t,e,r){const n=t.O_.shift(),i=v4.from(n,e,r);await AC(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Gp(t)}async function zB(t,e){e&&ch(t).V_&&await(async function(n,i){if((function(a){return B8(a)&&a!==st.ABORTED})(i.code)){const s=n.O_.shift();ch(n).s_(),await AC(n,(()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i))),await Gp(n)}})(t,e),NC(t)&&CC(t)}async function iS(t,e){const r=$t(t);r.asyncQueue.verifyOperationInProgress(),kt("RemoteStore","RemoteStore received new credentials");const n=kh(r);r.L_.add(3),await Wp(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await wg(r)}async function s_(t,e){const r=$t(t);e?(r.L_.delete(2),await wg(r)):e||(r.L_.add(2),await Wp(r),r.q_.set("Unknown"))}function Kp(t){return t.K_||(t.K_=(function(r,n,i){const s=$t(r);return s.w_(),new NB(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Eo:FB.bind(null,t),Ro:LB.bind(null,t),mo:DB.bind(null,t),d_:OB.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),L4(t)?F4(t):t.q_.set("Unknown")):(await t.K_.stop(),TC(t))}))),t.K_}function ch(t){return t.U_||(t.U_=(function(r,n,i){const s=$t(r);return s.w_(),new CB(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:BB.bind(null,t),mo:zB.bind(null,t),f_:VB.bind(null,t),g_:UB.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await Gp(t)):(await t.U_.stop(),t.O_.length>0&&(kt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,r,n,i,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new la,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,s){const a=Date.now()+n,o=new D4(e,r,a,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new St(st.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xp(t,e){if(ms("AsyncQueue",`${e}: ${t}`),Eh(t))return new St(st.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Wt.comparator(r.key,n.key):(r,n)=>Wt.comparator(r.key,n.key),this.keyedMap=e1(),this.sortedSet=new ui(this.comparator)}static emptySet(e){return new ep(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof ep)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new ep;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.W_=new ui(Wt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Qt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class Np{constructor(e,r,n,i,s,a,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,i,s){const a=[];return r.forEach((o=>{a.push({type:0,doc:o})})),new Np(e,r,ep.emptySet(r),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class qB{constructor(){this.queries=aS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=$t(r),s=i.queries;i.queries=aS(),s.forEach(((a,o)=>{for(const l of o.j_)l.onError(n)}))})(this,new St(st.ABORTED,"Firestore shutting down"))}}function aS(){return new Ku((t=>S8(t)),pg)}async function O4(t,e){const r=$t(t);let n=3;const i=e.query;let s=r.queries.get(i);s?!s.H_()&&e.J_()&&(n=2):(s=new $B,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(i,!0);break;case 1:s.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(a){const o=Xp(a,`Initialization of query '${z0(e.query)}' failed`);return void e.onError(o)}r.queries.set(i,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&M4(r)}async function j4(t,e){const r=$t(t),n=e.query;let i=3;const s=r.queries.get(n);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function HB(t,e){const r=$t(t);let n=!1;for(const i of e){const s=i.query,a=r.queries.get(s);if(a){for(const o of a.j_)o.X_(i)&&(n=!0);a.z_=i}}n&&M4(r)}function WB(t,e,r){const n=$t(t),i=n.queries.get(e);if(i)for(const s of i.j_)s.onError(r);n.queries.delete(e)}function M4(t){t.Y_.forEach((e=>{e.next()}))}var a_,oS;(oS=a_||(a_={})).ea="default",oS.Cache="cache";class B4{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Np(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Np.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==a_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this.serializer=e}Es(e){return Kc(this.serializer,e)}ds(e){return e.metadata.exists?X8(this.serializer,e.document,!1):gi.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return xs(e)}}class KB{constructor(e,r,n){this.ca=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=IC(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const n=cn.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,n=new lS(this.serializer);for(const i of e)if(i.metadata.queries){const s=n.Es(i.metadata.name);for(const a of i.metadata.queries){const o=(r.get(a)||Br()).add(s);r.set(a,o)}}return r}async complete(){const e=await bB(this.localStore,new lS(this.serializer),this.documents,this.ca.id),r=this.ha(this.documents);for(const n of this.queries)await EB(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function IC(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.key=e}}class RC{constructor(e){this.key=e}}class FC{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Br(),this.mutatedKeys=Br(),this.Aa=T8(e),this.Ra=new ep(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new sS,i=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,p)=>{const g=i.get(f),m=mg(this.query,p)?p:null,_=!!g&&this.mutatedKeys.has(g.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let b=!1;g&&m?g.data.isEqual(m.data)?_!==w&&(n.track({type:3,doc:m}),b=!0):this.ga(g,m)||(n.track({type:2,doc:m}),b=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(o=!0)):!g&&m?(n.track({type:0,doc:m}),b=!0):g&&!m&&(n.track({type:1,doc:g}),b=!0,(l||c)&&(o=!0)),b&&(m?(a=a.add(m),s=w?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),n.track({type:1,doc:f})}return{Ra:a,fa:n,ns:o,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort(((f,p)=>(function(m,_){const w=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qt()}};return w(m)-w(_)})(f.type,p.type)||this.Aa(f.doc,p.doc))),this.pa(n),i=i!=null&&i;const o=r&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new Np(this.query,e.Ra,s,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new sS,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Br(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new RC(n))})),this.da.forEach((n=>{e.has(n)||r.push(new PC(n))})),r}ba(e){this.Ta=e.Ts,this.da=Br();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Np.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class XB{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class YB{constructor(e){this.key=e,this.va=!1}}class QB{constructor(e,r,n,i,s,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ku((o=>S8(o)),pg),this.Ma=new Map,this.xa=new Set,this.Oa=new ui(Wt.comparator),this.Na=new Map,this.La=new k4,this.Ba={},this.ka=new Map,this.qa=Id.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function JB(t,e,r=!0){const n=Hv(t);let i;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await LC(n,e,r,!0),i}async function ZB(t,e){const r=Hv(t);await LC(r,e,!0,!1)}async function LC(t,e,r,n){const i=await kp(t.localStore,ao(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await V4(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&r&&qv(t.remoteStore,i),o}async function V4(t,e,r,n,i){t.Ka=(p,g,m)=>(async function(w,b,k,R){let C=b.view.ma(k);C.ns&&(C=await G2(w.localStore,b.query,!1).then((({documents:P})=>b.view.ma(P,C))));const j=R&&R.targetChanges.get(b.targetId),X=R&&R.targetMismatches.get(b.targetId)!=null,K=b.view.applyChanges(C,w.isPrimaryClient,j,X);return o_(w,b.targetId,K.wa),K.snapshot})(t,p,g,m);const s=await G2(t.localStore,e,!0),a=new FC(e,s.Ts),o=a.ma(s.documents),l=vg.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),c=a.applyChanges(o,t.isPrimaryClient,l);o_(t,r,c.wa);const f=new XB(e,r,a);return t.Fa.set(e,f),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function eV(t,e,r){const n=$t(t),i=n.Fa.get(e),s=n.Ma.get(i.targetId);if(s.length>1)return n.Ma.set(i.targetId,s.filter((a=>!pg(a,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Tp(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),r&&Ap(n.remoteStore,i.targetId),Cp(n,i.targetId)})).catch(bh)):(Cp(n,i.targetId),await Tp(n.localStore,i.targetId,!0))}async function tV(t,e){const r=$t(t),n=r.Fa.get(e),i=r.Ma.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Ap(r.remoteStore,n.targetId))}async function rV(t,e,r){const n=q4(t);try{const i=await(function(a,o){const l=$t(a),c=Ii.now(),f=o.reduce(((m,_)=>m.add(_.key)),Br());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let _=Do(),w=Br();return l.cs.getEntries(m,f).next((b=>{_=b,_.forEach(((k,R)=>{R.isValidDocument()||(w=w.add(k))}))})).next((()=>l.localDocuments.getOverlayedDocuments(m,_))).next((b=>{p=b;const k=[];for(const R of o){const C=NM(R,p.get(R.key).overlayedDocument);C!=null&&k.push(new Xu(R.key,C,d8(C.value.mapValue),Ci.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,k,o)})).next((b=>{g=b;const k=b.applyToLocalDocumentSet(p,w);return l.documentOverlayCache.saveOverlays(m,b.batchId,k)}))})).then((()=>({batchId:g.batchId,changes:N8(p)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new ui(Lr)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c})(n,i.batchId,r),await Yu(n,i.changes),await Gp(n.remoteStore)}catch(i){const s=Xp(i,"Failed to persist write");r.reject(s)}}async function DC(t,e){const r=$t(t);try{const n=await wB(r.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=r.Na.get(s);a&&(cr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?cr(a.va):i.removedDocuments.size>0&&(cr(a.va),a.va=!1))})),await Yu(r,n,e)}catch(n){await bh(n)}}function cS(t,e,r){const n=$t(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach(((s,a)=>{const o=a.view.Z_(e);o.snapshot&&i.push(o.snapshot)})),(function(a,o){const l=$t(a);l.onlineState=o;let c=!1;l.queries.forEach(((f,p)=>{for(const g of p.j_)g.Z_(o)&&(c=!0)})),c&&M4(l)})(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function nV(t,e,r){const n=$t(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Na.get(e),s=i&&i.key;if(s){let a=new ui(Wt.comparator);a=a.insert(s,gi.newNoDocument(s,pr.min()));const o=Br().add(s),l=new xg(pr.min(),new Map,new ui(Lr),a,o);await DC(n,l),n.Oa=n.Oa.remove(s),n.Na.delete(e),$4(n)}else await Tp(n.localStore,e,!1).then((()=>Cp(n,e,r))).catch(bh)}async function iV(t,e){const r=$t(t),n=e.batch.batchId;try{const i=await yB(r.localStore,e);z4(r,n,null),U4(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Yu(r,i)}catch(i){await bh(i)}}async function sV(t,e,r){const n=$t(t);try{const i=await(function(a,o){const l=$t(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let f;return l.mutationQueue.lookupMutationBatch(c,o).next((p=>(cr(p!==null),f=p.keys(),l.mutationQueue.removeMutationBatch(c,p)))).next((()=>l.mutationQueue.performConsistencyCheck(c))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(c,f,o))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f))).next((()=>l.localDocuments.getDocuments(c,f)))}))})(n.localStore,e);z4(n,e,r),U4(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Yu(n,i)}catch(i){await bh(i)}}async function aV(t,e){const r=$t(t);kh(r.remoteStore)||kt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await(function(a){const o=$t(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(l=>o.mutationQueue.getHighestUnacknowledgedBatchId(l)))})(r.localStore);if(n===-1)return void e.resolve();const i=r.ka.get(n)||[];i.push(e),r.ka.set(n,i)}catch(n){const i=Xp(n,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function U4(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function z4(t,e,r){const n=$t(t);let i=n.Ba[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(r?s.reject(r):s.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function Cp(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||OC(t,n)}))}function OC(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Ap(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),$4(t))}function o_(t,e,r){for(const n of r)n instanceof PC?(t.La.addReference(n.key,e),oV(t,n)):n instanceof RC?(kt("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||OC(t,n.key)):Qt()}function oV(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(kt("SyncEngine","New document in limbo: "+r),t.xa.add(n),$4(t))}function $4(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Wt(cn.fromString(e)),n=t.qa.next();t.Na.set(n,new YB(r)),t.Oa=t.Oa.insert(r,n),qv(t.remoteStore,new Iu(ao($p(r.path)),n,"TargetPurposeLimboResolution",Fo.oe))}}async function Yu(t,e,r){const n=$t(t),i=[],s=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach(((o,l)=>{a.push(n.Ka(l,e,r).then((c=>{var f;if((c||r)&&n.isPrimaryClient){const p=c?!c.fromCache:(f=r?.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;n.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){i.push(c);const p=C4.Wi(l.targetId,c);s.push(p)}})))})),await Promise.all(a),n.Ca.d_(i),await(async function(l,c){const f=$t(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>We.forEach(c,(g=>We.forEach(g.$i,(m=>f.persistence.referenceDelegate.addReference(p,g.targetId,m))).next((()=>We.forEach(g.Ui,(m=>f.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))))))}catch(p){if(!Eh(p))throw p;kt("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const m=f.os.get(g),_=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(_);f.os=f.os.insert(g,w)}}})(n.localStore,s))}async function lV(t,e){const r=$t(t);if(!r.currentUser.isEqual(e)){kt("SyncEngine","User change. New user:",e.toKey());const n=await gC(r.localStore,e);r.currentUser=e,(function(s,a){s.ka.forEach((o=>{o.forEach((l=>{l.reject(new St(st.CANCELLED,a))}))})),s.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Yu(r,n.hs)}}function cV(t,e){const r=$t(t),n=r.Na.get(e);if(n&&n.va)return Br().add(n.key);{let i=Br();const s=r.Ma.get(e);if(!s)return i;for(const a of s){const o=r.Fa.get(a);i=i.unionWith(o.view.Va)}return i}}async function uV(t,e){const r=$t(t),n=await G2(r.localStore,e.query,!0),i=e.view.ba(n);return r.isPrimaryClient&&o_(r,e.targetId,i.wa),i}async function fV(t,e){const r=$t(t);return wC(r.localStore,e).then((n=>Yu(r,n)))}async function hV(t,e,r,n){const i=$t(t),s=await(function(o,l){const c=$t(o),f=$t(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",(p=>f.Mn(p,l).next((g=>g?c.localDocuments.getDocuments(p,g):We.resolve(null)))))})(i.localStore,e);s!==null?(r==="pending"?await Gp(i.remoteStore):r==="acknowledged"||r==="rejected"?(z4(i,e,n||null),U4(i,e),(function(o,l){$t($t(o).mutationQueue).On(l)})(i.localStore,e)):Qt(),await Yu(i,s)):kt("SyncEngine","Cannot apply mutation batch with id: "+e)}async function dV(t,e){const r=$t(t);if(Hv(r),q4(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),i=await uS(r,n.toArray());r.Qa=!0,await s_(r.remoteStore,!0);for(const s of i)qv(r.remoteStore,s)}else if(e===!1&&r.Qa!==!1){const n=[];let i=Promise.resolve();r.Ma.forEach(((s,a)=>{r.sharedClientState.isLocalQueryTarget(a)?n.push(a):i=i.then((()=>(Cp(r,a),Tp(r.localStore,a,!0)))),Ap(r.remoteStore,a)})),await i,await uS(r,n),(function(a){const o=$t(a);o.Na.forEach(((l,c)=>{Ap(o.remoteStore,c)})),o.La.pr(),o.Na=new Map,o.Oa=new ui(Wt.comparator)})(r),r.Qa=!1,await s_(r.remoteStore,!1)}}async function uS(t,e,r){const n=$t(t),i=[],s=[];for(const a of e){let o;const l=n.Ma.get(a);if(l&&l.length!==0){o=await kp(n.localStore,ao(l[0]));for(const c of l){const f=n.Fa.get(c),p=await uV(n,f);p.snapshot&&s.push(p.snapshot)}}else{const c=await yC(n.localStore,a);o=await kp(n.localStore,c),await V4(n,jC(c),a,!1,o.resumeToken)}i.push(o)}return n.Ca.d_(s),i}function jC(t){return _8(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function pV(t){return(function(r){return $t($t(r).persistence).Qi()})($t(t).localStore)}async function mV(t,e,r,n){const i=$t(t);if(i.Qa)return void kt("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(r){case"current":case"not-current":{const a=await wC(i.localStore,k8(s[0])),o=xg.createSynthesizedRemoteEventForCurrentChange(e,r==="current",zi.EMPTY_BYTE_STRING);await Yu(i,a,o);break}case"rejected":await Tp(i.localStore,e,!0),Cp(i,e,n);break;default:Qt()}}async function gV(t,e,r){const n=Hv(t);if(n.Qa){for(const i of e){if(n.Ma.has(i)&&n.sharedClientState.isActiveQueryTarget(i)){kt("SyncEngine","Adding an already active target "+i);continue}const s=await yC(n.localStore,i),a=await kp(n.localStore,s);await V4(n,jC(s),a.targetId,!1,a.resumeToken),qv(n.remoteStore,a)}for(const i of r)n.Ma.has(i)&&await Tp(n.localStore,i,!1).then((()=>{Ap(n.remoteStore,i),Cp(n,i)})).catch(bh)}}function Hv(t){const e=$t(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=DC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nV.bind(null,e),e.Ca.d_=HB.bind(null,e.eventManager),e.Ca.$a=WB.bind(null,e.eventManager),e}function q4(t){const e=$t(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sV.bind(null,e),e}function xV(t,e,r){const n=$t(t);(async function(s,a,o){try{const l=await a.getMetadata();if(await(function(m,_){const w=$t(m),b=xs(_.createTime);return w.persistence.runTransaction("hasNewerBundle","readonly",(k=>w.Gr.getBundleMetadata(k,_.id))).then((k=>!!k&&k.createTime.compareTo(b)>=0))})(s.localStore,l))return await a.close(),o._completeWith((function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}})(l)),Promise.resolve(new Set);o._updateProgress(IC(l));const c=new KB(l,s.localStore,a.serializer);let f=await a.Ua();for(;f;){const g=await c.la(f);g&&o._updateProgress(g),f=await a.Ua()}const p=await c.complete();return await Yu(s,p.Ia,void 0),await(function(m,_){const w=$t(m);return w.persistence.runTransaction("Save bundle","readwrite",(b=>w.Gr.saveBundleMetadata(b,_)))})(s.localStore,l),o._completeWith(p.progress),Promise.resolve(p.Pa)}catch(l){return ll("SyncEngine",`Loading bundle failed with ${l}`),o._failWith(l),Promise.resolve(new Set)}})(n,e,r).then((i=>{n.sharedClientState.notifyBundleLoaded(i)}))}class uh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yg(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return mC(this.persistence,new pC,e.initialUser,this.serializer)}Ga(e){return new T4($v.Zr,this.serializer)}Wa(e){return new bC}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uh.provider={build:()=>new uh};class vV extends uh{constructor(e){super(),this.cacheSizeBytes=e}ja(e,r){cr(this.persistence.referenceDelegate instanceof W2);const n=this.persistence.referenceDelegate.garbageCollector;return new cC(n,e.asyncQueue,r)}Ga(e){const r=this.cacheSizeBytes!==void 0?Ja.withCacheSize(this.cacheSizeBytes):Ja.DEFAULT;return new T4((n=>W2.Zr(n,r)),this.serializer)}}class H4 extends uh{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await q4(this.Ja.syncEngine),await Gp(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return mC(this.persistence,new pC,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new cC(n,e.asyncQueue,r)}Ha(e,r){const n=new Bj(r,this.persistence);return new Mj(e.asyncQueue,n)}Ga(e){const r=N4(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Ja.withCacheSize(this.cacheSizeBytes):Ja.DEFAULT;return new A4(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,EC(),y2(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new bC}}class MC extends H4{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof Iw&&(this.sharedClientState.syncEngine={no:hV.bind(null,r),ro:mV.bind(null,r),io:gV.bind(null,r),Qi:pV.bind(null,r),eo:fV.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await dV(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=EC();if(!Iw.D(r))throw new St(st.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=N4(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Iw(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class fh{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>cS(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=lV.bind(null,this.syncEngine),await s_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qB})()}createDatastore(e){const r=yg(e.databaseInfo.databaseId),n=(function(s){return new AB(s)})(e.databaseInfo);return(function(s,a,o,l){return new IB(s,a,o,l)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,i,s,a,o){return new RB(n,i,s,a,o)})(this.localStore,this.datastore,e.asyncQueue,(r=>cS(this.syncEngine,r,0)),(function(){return nS.D()?new nS:new SB})())}createSyncEngine(e,r){return(function(i,s,a,o,l,c,f){const p=new QB(i,s,a,o,l,c);return f&&(p.Qa=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(i){const s=$t(i);kt("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Wp(s),s.k_.shutdown(),s.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}fh.provider={build:()=>new fh};function fS(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ms("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new la,this.buffer=new Uint8Array,this.eu=(function(){return new TextDecoder("utf-8")})(),this.tu().then((n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n?.aa)}`))}),(n=>this.metadata.reject(n)))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const r=this.eu.decode(e),n=Number(r);isNaN(n)&&this.ru(`length string (${r}) is not valid number`);const i=await this.iu(n);return new GB(JSON.parse(i),e.length+n)}su(){return this.buffer.findIndex((e=>e===123))}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const r=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new St(st.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(i,s){const a=$t(i),o={documents:s.map((p=>M1(a.serializer,p)))},l=await a.Lo("BatchGetDocuments",a.serializer.databaseId,cn.emptyPath(),o,s.length),c=new Map;l.forEach((p=>{const g=jM(a.serializer,p);c.set(g.key.toString(),g)}));const f=[];return s.forEach((p=>{const g=c.get(p.toString());cr(!!g),f.push(g)})),f})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const i=Wt.fromPath(n);this.mutations.push(new g4(i,this.precondition(i)))})),await(async function(n,i){const s=$t(n),a={writes:i.map((o=>B1(s.serializer,o)))};await s.Mo("Commit",s.serializer.databaseId,cn.emptyPath(),a)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Qt();r=pr.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new St(st.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(pr.min())?Ci.exists(!1):Ci.updateTime(r):Ci.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(pr.min()))throw new St(st.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ci.updateTime(r)}return Ci.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,r,n,i,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=i,this.deferred=s,this._u=n.maxAttempts,this.t_=new P4(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new wV(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((i=>{this.lu(i)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!hg(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!B8(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,r,n,i,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=na.UNAUTHENTICATED,this.clientId=l4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async a=>{kt("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(n,(a=>(kt("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new la;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Xp(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Rw(t,e){t.asyncQueue.verifyOperationInProgress(),kt("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async i=>{n.isEqual(i)||(await gC(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function hS(t,e){t.asyncQueue.verifyOperationInProgress();const r=await W4(t);kt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>iS(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,i)=>iS(e.remoteStore,i))),t._onlineComponents=e}async function W4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){kt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Rw(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(i){return i.name==="FirebaseError"?i.code===st.FAILED_PRECONDITION||i.code===st.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(r))throw r;ll("Error using user provided cache. Falling back to memory cache: "+r),await Rw(t,new uh)}}else kt("FirestoreClient","Using default OfflineComponentProvider"),await Rw(t,new uh);return t._offlineComponents}async function Gv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(kt("FirestoreClient","Using user provided OnlineComponentProvider"),await hS(t,t._uninitializedComponentsProvider._online)):(kt("FirestoreClient","Using default OnlineComponentProvider"),await hS(t,new fh))),t._onlineComponents}function BC(t){return W4(t).then((e=>e.persistence))}function Yp(t){return W4(t).then((e=>e.localStore))}function VC(t){return Gv(t).then((e=>e.remoteStore))}function G4(t){return Gv(t).then((e=>e.syncEngine))}function UC(t){return Gv(t).then((e=>e.datastore))}async function Ip(t){const e=await Gv(t),r=e.eventManager;return r.onListen=JB.bind(null,e.syncEngine),r.onUnlisten=eV.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=ZB.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=tV.bind(null,e.syncEngine),r}function EV(t){return t.asyncQueue.enqueue((async()=>{const e=await BC(t),r=await VC(t);return e.setNetworkEnabled(!0),(function(i){const s=$t(i);return s.L_.delete(0),wg(s)})(r)}))}function SV(t){return t.asyncQueue.enqueue((async()=>{const e=await BC(t),r=await VC(t);return e.setNetworkEnabled(!1),(async function(i){const s=$t(i);s.L_.add(0),await Wp(s),s.q_.set("Offline")})(r)}))}function kV(t,e){const r=new la;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,s,a){try{const o=await(function(c,f){const p=$t(c);return p.persistence.runTransaction("read document","readonly",(g=>p.localDocuments.getDocument(g,f)))})(i,s);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new St(st.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const l=Xp(o,`Failed to get document '${s} from cache`);a.reject(l)}})(await Yp(t),e,r))),r.promise}function zC(t,e,r={}){const n=new la;return t.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,l,c){const f=new Wv({next:g=>{f.Za(),a.enqueueAndForget((()=>j4(s,p)));const m=g.docs.has(o);!m&&g.fromCache?c.reject(new St(st.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&l&&l.source==="server"?c.reject(new St(st.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new B4($p(o.path),f,{includeMetadataChanges:!0,_a:!0});return O4(s,p)})(await Ip(t),t.asyncQueue,e,r,n))),n.promise}function TV(t,e){const r=new la;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,s,a){try{const o=await G2(i,s,!0),l=new FC(s,o.Ts),c=l.ma(o.documents),f=l.applyChanges(c,!1);a.resolve(f.snapshot)}catch(o){const l=Xp(o,`Failed to execute query '${s} against cache`);a.reject(l)}})(await Yp(t),e,r))),r.promise}function $C(t,e,r={}){const n=new la;return t.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,l,c){const f=new Wv({next:g=>{f.Za(),a.enqueueAndForget((()=>j4(s,p))),g.fromCache&&l.source==="server"?c.reject(new St(st.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new B4(o,f,{includeMetadataChanges:!0,_a:!0});return O4(s,p)})(await Ip(t),t.asyncQueue,e,r,n))),n.promise}function AV(t,e,r){const n=new la;return t.asyncQueue.enqueueAndForget((async()=>{try{const i=await UC(t);n.resolve((async function(a,o,l){var c;const f=$t(a),{request:p,ut:g,parent:m}=Q8(f.serializer,b8(o),l);f.connection.Fo||delete p.parent;const _=(await f.Lo("RunAggregationQuery",f.serializer.databaseId,m,p,1)).filter((b=>!!b.result));cr(_.length===1);const w=(c=_[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(w).reduce(((b,k)=>(b[g[k]]=w[k],b)),{})})(i,e,r))}catch(i){n.reject(i)}})),n.promise}function NV(t,e){const r=new Wv(e);return t.asyncQueue.enqueueAndForget((async()=>(function(i,s){$t(i).Y_.add(s),s.next()})(await Ip(t),r))),()=>{r.Za(),t.asyncQueue.enqueueAndForget((async()=>(function(i,s){$t(i).Y_.delete(s)})(await Ip(t),r)))}}function CV(t,e,r,n){const i=(function(a,o){let l;return l=typeof a=="string"?U8().encode(a):a,(function(f,p){return new yV(f,p)})((function(f,p){if(f instanceof Uint8Array)return fS(f,p);if(f instanceof ArrayBuffer)return fS(new Uint8Array(f),p);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(l),o)})(r,yg(e));t.asyncQueue.enqueueAndForget((async()=>{xV(await G4(t),i,n)}))}function IV(t,e){return t.asyncQueue.enqueue((async()=>(function(n,i){const s=$t(n);return s.persistence.runTransaction("Get named query","readonly",(a=>s.Gr.getNamedQuery(a,i)))})(await Yp(t),e)))}function PV(t,e){return t.asyncQueue.enqueue((async()=>(async function(n,i){const s=$t(n),a=s.indexManager,o=[];return s.persistence.runTransaction("Configure indexes","readwrite",(l=>a.getFieldIndexes(l).next((c=>(function(p,g,m,_,w){p=[...p],g=[...g],p.sort(m),g.sort(m);const b=p.length,k=g.length;let R=0,C=0;for(;R<k&&C<b;){const j=m(p[C],g[R]);j<0?w(p[C++]):j>0?_(g[R++]):(R++,C++)}for(;R<k;)_(g[R++]);for(;C<b;)w(p[C++])})(c,i,Lj,(f=>{o.push(a.addFieldIndex(l,f))}),(f=>{o.push(a.deleteFieldIndex(l,f))})))).next((()=>We.waitFor(o)))))})(await Yp(t),e)))}function RV(t,e){return t.asyncQueue.enqueue((async()=>(function(n,i){$t(n).ss.zi=i})(await Yp(t),e)))}function FV(t){return t.asyncQueue.enqueue((async()=>(function(r){const n=$t(r),i=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",(s=>i.deleteAllFieldIndexes(s)))})(await Yp(t))))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(t,e,r){if(!r)throw new St(st.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HC(t,e,r,n){if(e===!0&&n===!0)throw new St(st.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function pS(t){if(!Wt.isDocumentKey(t))throw new St(st.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mS(t){if(Wt.isDocumentKey(t))throw new St(st.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Kv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Qt()}function tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new St(st.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Kv(t);throw new St(st.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function WC(t,e){if(e<=0)throw new St(st.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new St(st.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new St(st.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qC((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new St(st.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new St(st.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new St(st.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _g{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gS({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new St(st.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new St(st.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gS(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new XN;switch(n.type){case"firstParty":return new Cj(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new St(st.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=dS.get(r);n&&(kt("ComponentProvider","Removing Datastore"),dS.delete(r),n.terminate())})(this),Promise.resolve()}}function GC(t,e,r,n={}){var i;const s=(t=tn(t,_g))._getSettings(),a=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&ll("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=na.MOCK_USER;else{o=LN(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new St(st.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new na(c)}t._authCredentials=new Tj(new KN(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ca(this.firestore,e,this._query)}}class Ji{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ji(this.firestore,e,this._key)}}class cc extends ca{constructor(e,r,n){super(e,r,$p(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ji(this.firestore,null,new Wt(e))}withConverter(e){return new cc(this.firestore,e,this._path)}}function xr(t,e,...r){if(t=mn(t),K4("collection","path",e),t instanceof _g){const n=cn.fromString(e,...r);return mS(n),new cc(t,null,n)}{if(!(t instanceof Ji||t instanceof cc))throw new St(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(cn.fromString(e,...r));return mS(n),new cc(t.firestore,null,n)}}function LV(t,e){if(t=tn(t,_g),K4("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new St(st.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ca(t,null,(function(n){return new Gu(cn.emptyPath(),n)})(e))}function kr(t,e,...r){if(t=mn(t),arguments.length===1&&(e=l4.newId()),K4("doc","path",e),t instanceof _g){const n=cn.fromString(e,...r);return pS(n),new Ji(t,null,new Wt(n))}{if(!(t instanceof Ji||t instanceof cc))throw new St(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(cn.fromString(e,...r));return pS(n),new Ji(t.firestore,t instanceof cc?t.converter:null,new Wt(n))}}function DV(t,e){return t=mn(t),e=mn(e),(t instanceof Ji||t instanceof cc)&&(e instanceof Ji||e instanceof cc)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function X4(t,e){return t=mn(t),e=mn(e),t instanceof ca&&e instanceof ca&&t.firestore===e.firestore&&pg(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new P4(this,"async_queue_retry"),this.Vu=()=>{const n=y2();n&&kt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=y2();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=y2();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new la;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Eh(e))throw e;kt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const i=(function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o})(n);throw ms("INTERNAL UNHANDLED ERROR: ",i),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const i=D4.createAndSchedule(this,e,r,n,(s=>this.yu(s)));return this.Tu.push(i),i}fu(){this.Eu&&Qt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function l_(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1})(t,["next","error","complete"])}class KC{constructor(){this._progressObserver={},this._taskCompletionResolver=new la,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=-1;class Qn extends _g{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new xS,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xS(e),this._firestoreClient=void 0,await e}}}function jV(t,e,r){r||(r="(default)");const n=Up(t,"firestore");if(n.isInitialized(r)){const i=n.getImmediate({identifier:r}),s=n.getOptions(r);if(rh(s,e))return i;throw new St(st.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new St(st.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new St(st.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function XC(t,e){const r=typeof t=="object"?t:a4(),n=typeof t=="string"?t:e||"(default)",i=Up(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=PN("firestore");s&&GC(i,...s)}return i}function Pi(t){if(t._terminated)throw new St(st.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||YC(t),t._firestoreClient}function YC(t){var e,r,n;const i=t._freezeSettings(),s=(function(o,l,c,f){return new oM(o,l,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,qC(f.experimentalLongPollingOptions),f.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new bV(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(t._componentsProvider))}function MV(t,e){ll("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return QC(t,fh.provider,{build:n=>new H4(n,r.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function BV(t){ll("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();QC(t,fh.provider,{build:r=>new MC(r,e.cacheSizeBytes)})}function QC(t,e,r){if((t=tn(t,Qn))._firestoreClient||t._terminated)throw new St(st.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new St(st.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},YC(t)}function VV(t){if(t._initialized&&!t._terminated)throw new St(st.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new la;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(n){if(!Gc.D())return Promise.resolve();const i=n+"main";await Gc.delete(i)})(N4(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}})),e.promise}function UV(t){return(function(r){const n=new la;return r.asyncQueue.enqueueAndForget((async()=>aV(await G4(r),n))),n.promise})(Pi(t=tn(t,Qn)))}function zV(t){return EV(Pi(t=tn(t,Qn)))}function $V(t){return SV(Pi(t=tn(t,Qn)))}function qV(t){return hj(t.app,"firestore",t._databaseId.database),t._delete()}function HV(t,e){const r=Pi(t=tn(t,Qn)),n=new KC;return CV(r,t._databaseId,e,n),n}function WV(t,e){return IV(Pi(t=tn(t,Qn)),e).then((r=>r?new ca(t,null,r.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class JC{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hh(zi.fromBase64String(e))}catch(r){throw new St(st.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new hh(zi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new St(st.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function GV(){return new Th("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new St(st.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new St(st.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lr(this._lat,e._lat)||Lr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV=/^__.*__$/;class XV{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Xu(e,this.data,this.fieldMask,r,this.fieldTransforms):new qp(e,this.data,r,this.fieldTransforms)}}class ZC{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Xu(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function eI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qt()}}class Yv{constructor(e,r,n,i,s,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Yv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Q2(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(eI(this.Cu)&&KV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class YV{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||yg(e)}Qu(e,r,n,i=!1){return new Yv({Cu:e,methodName:r,qu:n,path:xi.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kd(t){const e=t._freezeSettings(),r=yg(t._databaseId);return new YV(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Qv(t,e,r,n,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,r,i);rb("Data must be an object, but it was:",a,n);const o=nI(n,a);let l,c;if(s.merge)l=new Lo(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const g=V1(e,p,r);if(!a.contains(g))throw new St(st.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);sI(f,g)||f.push(g)}l=new Lo(f),c=a.fieldTransforms.filter((p=>l.covers(p.field)))}else l=null,c=a.fieldTransforms;return new XV(new ka(o),l,c)}class Eg extends Ah{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Eg}}function tI(t,e,r){return new Yv({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Y4 extends Ah{_toFieldTransform(e){return new gg(e.path,new bp)}isEqual(e){return e instanceof Y4}}class Q4 extends Ah{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=tI(this,e,!0),n=this.Ku.map((s=>Xd(s,r))),i=new Td(n);return new gg(e.path,i)}isEqual(e){return e instanceof Q4&&rh(this.Ku,e.Ku)}}class J4 extends Ah{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=tI(this,e,!0),n=this.Ku.map((s=>Xd(s,r))),i=new Ad(n);return new gg(e.path,i)}isEqual(e){return e instanceof J4&&rh(this.Ku,e.Ku)}}class Z4 extends Ah{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new Ep(e.serializer,P8(e.serializer,this.$u));return new gg(e.path,r)}isEqual(e){return e instanceof Z4&&this.$u===e.$u}}function eb(t,e,r,n){const i=t.Qu(1,e,r);rb("Data must be an object, but it was:",i,n);const s=[],a=ka.empty();Sh(n,((l,c)=>{const f=Jv(e,l,r);c=mn(c);const p=i.Nu(f);if(c instanceof Eg)s.push(f);else{const g=Xd(c,p);g!=null&&(s.push(f),a.set(f,g))}}));const o=new Lo(s);return new ZC(a,o,i.fieldTransforms)}function tb(t,e,r,n,i,s){const a=t.Qu(1,e,r),o=[V1(e,n,r)],l=[i];if(s.length%2!=0)throw new St(st.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)o.push(V1(e,s[g])),l.push(s[g+1]);const c=[],f=ka.empty();for(let g=o.length-1;g>=0;--g)if(!sI(c,o[g])){const m=o[g];let _=l[g];_=mn(_);const w=a.Nu(m);if(_ instanceof Eg)c.push(m);else{const b=Xd(_,w);b!=null&&(c.push(m),f.set(m,b))}}const p=new Lo(c);return new ZC(f,p,a.fieldTransforms)}function rI(t,e,r,n=!1){return Xd(r,t.Qu(n?4:3,e))}function Xd(t,e){if(iI(t=mn(t)))return rb("Unsupported field value:",e,t),nI(t,e);if(t instanceof Ah)return(function(n,i){if(!eI(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,i){const s=[];let a=0;for(const o of n){let l=Xd(o,i.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}})(t,e)}return(function(n,i){if((n=mn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return P8(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Ii.fromDate(n);return{timestampValue:Sp(i.serializer,s)}}if(n instanceof Ii){const s=new Ii(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Sp(i.serializer,s)}}if(n instanceof Xv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof hh)return{bytesValue:q8(i.serializer,n._byteString)};if(n instanceof Ji){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_4(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof bg)return(function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map((l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return m4(o.serializer,l)}))}}}}}})(n,i);throw i.Bu(`Unsupported field value: ${Kv(n)}`)})(t,e)}function nI(t,e){const r={};return c8(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sh(t,((n,i)=>{const s=Xd(i,e.Mu(n));s!=null&&(r[n]=s)})),{mapValue:{fields:r}}}function iI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ii||t instanceof Xv||t instanceof hh||t instanceof Ji||t instanceof Ah||t instanceof bg)}function rb(t,e,r){if(!iI(r)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(r)){const n=Kv(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function V1(t,e,r){if((e=mn(e))instanceof Th)return e._internalPath;if(typeof e=="string")return Jv(t,e);throw Q2("Field path arguments must be of type string or ",t,!1,void 0,r)}const QV=new RegExp("[~\\*/\\[\\]]");function Jv(t,e,r){if(e.search(QV)>=0)throw Q2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Th(...e.split("."))._internalPath}catch{throw Q2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Q2(t,e,r,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${n}`),a&&(l+=` in document ${i}`),l+=")"),new St(st.INVALID_ARGUMENT,o+t+l)}function sI(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,r,n,i,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ji(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Zv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class JV extends U1{data(){return super.data()}}function Zv(t,e){return typeof e=="string"?Jv(t,e):e instanceof Th?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new St(st.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nb{}class Qp extends nb{}function Vr(t,e,...r){let n=[];e instanceof nb&&n.push(e),n=n.concat(r),(function(s){const a=s.filter((l=>l instanceof Yd)).length,o=s.filter((l=>l instanceof Jp)).length;if(a>1||a>0&&o>0)throw new St(st.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)t=i._apply(t);return t}class Jp extends Qp{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Jp(e,r,n)}_apply(e){const r=this._parse(e);return lI(e._query,r),new ca(e.firestore,e.converter,Y5(e._query,r))}_parse(e){const r=Kd(e.firestore);return(function(s,a,o,l,c,f,p){let g;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new St(st.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){yS(p,f);const m=[];for(const _ of p)m.push(vS(l,s,_));g={arrayValue:{values:m}}}else g=vS(l,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||yS(p,f),g=rI(o,a,p,f==="in"||f==="not-in");return un.create(c,f,g)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Wr(t,e,r){const n=e,i=Zv("where",t);return Jp._create(i,n,r)}class Yd extends nb{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Yd(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:$n.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)lI(a,l),a=Y5(a,l)})(e._query,r),new ca(e.firestore,e.converter,Y5(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ZV(...t){return t.forEach((e=>cI("or",e))),Yd._create("or",t)}function eU(...t){return t.forEach((e=>cI("and",e))),Yd._create("and",t)}class ey extends Qp{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new ey(e,r)}_apply(e){const r=(function(i,s,a){if(i.startAt!==null)throw new St(st.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new St(st.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new j1(s,a)})(e._query,this._field,this._direction);return new ca(e.firestore,e.converter,(function(i,s){const a=i.explicitOrderBy.concat([s]);return new Gu(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,r))}}function Dl(t,e="asc"){const r=e,n=Zv("orderBy",t);return ey._create(n,r)}class Sg extends Qp{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Sg(e,r,n)}_apply(e){return new ca(e.firestore,e.converter,U2(e._query,this._limit,this._limitType))}}function kg(t){return WC("limit",t),Sg._create("limit",t,"F")}function tU(t){return WC("limitToLast",t),Sg._create("limitToLast",t,"L")}class Tg extends Qp{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Tg(e,r,n)}_apply(e){const r=oI(e,this.type,this._docOrFields,this._inclusive);return new ca(e.firestore,e.converter,(function(i,s){return new Gu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)})(e._query,r))}}function rU(...t){return Tg._create("startAt",t,!0)}function nU(...t){return Tg._create("startAfter",t,!1)}class Ag extends Qp{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Ag(e,r,n)}_apply(e){const r=oI(e,this.type,this._docOrFields,this._inclusive);return new ca(e.firestore,e.converter,(function(i,s){return new Gu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)})(e._query,r))}}function iU(...t){return Ag._create("endBefore",t,!1)}function sU(...t){return Ag._create("endAt",t,!0)}function oI(t,e,r,n){if(r[0]=mn(r[0]),r[0]instanceof U1)return(function(s,a,o,l,c){if(!l)throw new St(st.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const f=[];for(const p of Z0(s))if(p.field.isKeyField())f.push(Sd(a,l.key));else{const g=l.data.field(p.field);if(Dv(g))throw new St(st.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const m=p.field.canonicalString();throw new St(st.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}f.push(g)}return new lh(f,c)})(t._query,t.firestore._databaseId,e,r[0]._document,n);{const i=Kd(t.firestore);return(function(a,o,l,c,f,p){const g=a.explicitOrderBy;if(f.length>g.length)throw new St(st.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let _=0;_<f.length;_++){const w=f[_];if(g[_].field.isKeyField()){if(typeof w!="string")throw new St(st.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof w}`);if(!d4(a)&&w.indexOf("/")!==-1)throw new St(st.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${w}' contains a slash.`);const b=a.path.child(cn.fromString(w));if(!Wt.isDocumentKey(b))throw new St(st.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const k=new Wt(b);m.push(Sd(o,k))}else{const b=rI(l,c,w);m.push(b)}}return new lh(m,p)})(t._query,t.firestore._databaseId,i,e,r,n)}}function vS(t,e,r){if(typeof(r=mn(r))=="string"){if(r==="")throw new St(st.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d4(e)&&r.indexOf("/")!==-1)throw new St(st.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(cn.fromString(r));if(!Wt.isDocumentKey(n))throw new St(st.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Sd(t,new Wt(n))}if(r instanceof Ji)return Sd(t,r._key);throw new St(st.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kv(r)}.`)}function yS(t,e){if(!Array.isArray(t)||t.length===0)throw new St(st.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lI(t,e){const r=(function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new St(st.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new St(st.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function cI(t,e){if(!(e instanceof Jp||e instanceof Yd))throw new St(st.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class ib{convertValue(e,r="none"){switch(ah(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ni(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes($u(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Qt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Sh(e,((i,s)=>{n[i]=this.convertValue(s,r)})),n}convertVectorValue(e){var r,n,i;const s=(i=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map((a=>Ni(a.doubleValue)));return new bg(s)}convertGeoPoint(e){return new Xv(Ni(e.latitude),Ni(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Ov(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(L1(e));default:return null}}convertTimestamp(e){const r=zu(e);return new Ii(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=cn.fromString(e);cr(tC(n));const i=new sh(n.get(1),n.get(3)),s=new Wt(n.popFirst(5));return i.isEqual(r)||ms(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class aU extends ib{constructor(e){super(),this.firestore=e}convertBytes(e){return new hh(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ji(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oU(t){return new Pp("sum",V1("sum",t))}function lU(t){return new Pp("avg",V1("average",t))}function uI(){return new Pp("count")}function cU(t,e){var r,n;return t instanceof Pp&&e instanceof Pp&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())===((n=e._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())}function uU(t,e){return X4(t.query,e.query)&&rh(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pd extends U1{constructor(e,r,n,i,s,a){super(e,r,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new d1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Zv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class d1 extends Pd{data(e={}){return super.data(e)}}class Rd{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Wf(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new d1(this._firestore,this._userDataWriter,n.key,n,new Wf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new St(st.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((o=>{const l=new d1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Wf(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>s||o.type!==3)).map((o=>{const l=new d1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Wf(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),f=a.indexOf(o.doc.key)),{type:fU(o.type),doc:l,oldIndex:c,newIndex:f}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function fU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qt()}}function hU(t,e){return t instanceof Pd&&e instanceof Pd?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Rd&&e instanceof Rd&&t._firestore===e._firestore&&X4(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(t){t=tn(t,Ji);const e=tn(t.firestore,Qn);return zC(Pi(e),t._key).then((r=>sb(e,t,r)))}class Nh extends ib{constructor(e){super(),this.firestore=e}convertBytes(e){return new hh(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ji(this.firestore,null,r)}}function dU(t){t=tn(t,Ji);const e=tn(t.firestore,Qn),r=Pi(e),n=new Nh(e);return kV(r,t._key).then((i=>new Pd(e,n,t._key,i,new Wf(i!==null&&i.hasLocalMutations,!0),t.converter)))}function pU(t){t=tn(t,Ji);const e=tn(t.firestore,Qn);return zC(Pi(e),t._key,{source:"server"}).then((r=>sb(e,t,r)))}function ci(t){t=tn(t,ca);const e=tn(t.firestore,Qn),r=Pi(e),n=new Nh(e);return aI(t._query),$C(r,t._query).then((i=>new Rd(e,n,t,i)))}function mU(t){t=tn(t,ca);const e=tn(t.firestore,Qn),r=Pi(e),n=new Nh(e);return TV(r,t._query).then((i=>new Rd(e,n,t,i)))}function gU(t){t=tn(t,ca);const e=tn(t.firestore,Qn),r=Pi(e),n=new Nh(e);return $C(r,t._query,{source:"server"}).then((i=>new Rd(e,n,t,i)))}function Rp(t,e,r){t=tn(t,Ji);const n=tn(t.firestore,Qn),i=ty(t.converter,e,r);return em(n,[Qv(Kd(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Ci.none())])}function Za(t,e,r,...n){t=tn(t,Ji);const i=tn(t.firestore,Qn),s=Kd(i);let a;return a=typeof(e=mn(e))=="string"||e instanceof Th?tb(s,"updateDoc",t._key,e,r,n):eb(s,"updateDoc",t._key,e),em(i,[a.toMutation(t._key,Ci.exists(!0))])}function Pl(t){return em(tn(t.firestore,Qn),[new Hp(t._key,Ci.none())])}function Zp(t,e){const r=tn(t.firestore,Qn),n=kr(t),i=ty(t.converter,e);return em(r,[Qv(Kd(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Ci.exists(!1))]).then((()=>n))}function pi(t,...e){var r,n,i;t=mn(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||l_(e[a])||(s=e[a],a++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(l_(e[a])){const p=e[a];e[a]=(r=p.next)===null||r===void 0?void 0:r.bind(p),e[a+1]=(n=p.error)===null||n===void 0?void 0:n.bind(p),e[a+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,c,f;if(t instanceof Ji)c=tn(t.firestore,Qn),f=$p(t._key.path),l={next:p=>{e[a]&&e[a](sb(c,t,p))},error:e[a+1],complete:e[a+2]};else{const p=tn(t,ca);c=tn(p.firestore,Qn),f=p._query;const g=new Nh(c);l={next:m=>{e[a]&&e[a](new Rd(c,g,p,m))},error:e[a+1],complete:e[a+2]},aI(t._query)}return(function(g,m,_,w){const b=new Wv(w),k=new B4(m,b,_);return g.asyncQueue.enqueueAndForget((async()=>O4(await Ip(g),k))),()=>{b.Za(),g.asyncQueue.enqueueAndForget((async()=>j4(await Ip(g),k)))}})(Pi(c),f,o,l)}function xU(t,e){return NV(Pi(t=tn(t,Qn)),l_(e)?e:{next:e})}function em(t,e){return(function(n,i){const s=new la;return n.asyncQueue.enqueueAndForget((async()=>rV(await G4(n),i,s))),s.promise})(Pi(t),e)}function sb(t,e,r){const n=r.docs.get(e._key),i=new Nh(t);return new Pd(t,i,e._key,n,new Wf(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vU(t){return fI(t,{count:uI()})}function fI(t,e){const r=tn(t.firestore,Qn),n=Pi(r),i=l8(e,((s,a)=>new M8(a,s.aggregateType,s._internalFieldPath)));return AV(n,t._query,i).then((s=>(function(o,l,c){const f=new Nh(o);return new JC(l,f,c)})(r,t,s)))}class yU{constructor(e){this.kind="memory",this._onlineComponentProvider=fh.provider,e?.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=uh.provider}toJSON(){return{kind:this.kind}}}class wU{constructor(e){let r;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=hI(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class _U{constructor(){this.kind="memoryEager",this._offlineComponentProvider=uh.provider}toJSON(){return{kind:this.kind}}}class bU{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new vV(e)}}toJSON(){return{kind:this.kind}}}function EU(){return new _U}function SU(t){return new bU(t?.cacheSizeBytes)}function kU(t){return new yU(t)}function TU(t){return new wU(t)}class AU{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=fh.provider,this._offlineComponentProvider={build:r=>new H4(r,e?.cacheSizeBytes,this.forceOwnership)}}}class NU{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=fh.provider,this._offlineComponentProvider={build:r=>new MC(r,e?.cacheSizeBytes)}}}function hI(t){return new AU(t?.forceOwnership)}function CU(){return new NU}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Kd(e)}set(e,r,n){this._verifyNotCommitted();const i=Mf(e,this._firestore),s=ty(i.converter,r,n),a=Qv(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,n);return this._mutations.push(a.toMutation(i._key,Ci.none())),this}update(e,r,n,...i){this._verifyNotCommitted();const s=Mf(e,this._firestore);let a;return a=typeof(r=mn(r))=="string"||r instanceof Th?tb(this._dataReader,"WriteBatch.update",s._key,r,n,i):eb(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(a.toMutation(s._key,Ci.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Mf(e,this._firestore);return this._mutations=this._mutations.concat(new Hp(r._key,Ci.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new St(st.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Mf(t,e){if((t=mn(t)).firestore!==e)throw new St(st.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Kd(r)}get(r){const n=Mf(r,this._firestore),i=new aU(this._firestore);return this._transaction.lookup([n._key]).then((s=>{if(!s||s.length!==1)return Qt();const a=s[0];if(a.isFoundDocument())return new U1(this._firestore,i,a.key,a,n.converter);if(a.isNoDocument())return new U1(this._firestore,i,n._key,null,n.converter);throw Qt()}))}set(r,n,i){const s=Mf(r,this._firestore),a=ty(s.converter,n,i),o=Qv(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,i);return this._transaction.set(s._key,o),this}update(r,n,i,...s){const a=Mf(r,this._firestore);let o;return o=typeof(n=mn(n))=="string"||n instanceof Th?tb(this._dataReader,"Transaction.update",a._key,n,i,s):eb(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,o),this}delete(r){const n=Mf(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Mf(e,this._firestore),n=new Nh(this._firestore);return super.get(e).then((i=>new Pd(this._firestore,n,r._key,i._document,new Wf(!1,!1),r.converter)))}}function PU(t,e,r){t=tn(t,Qn);const n=Object.assign(Object.assign({},IU),r);return(function(s){if(s.maxAttempts<1)throw new St(st.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(s,a,o){const l=new la;return s.asyncQueue.enqueueAndForget((async()=>{const c=await UC(s);new _V(s.asyncQueue,c,o,a,l).au()})),l.promise})(Pi(t),(i=>e(new pI(t,i))),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(){return new Eg("deleteField")}function eu(){return new Y4("serverTimestamp")}function FU(...t){return new Q4("arrayUnion",t)}function LU(...t){return new J4("arrayRemove",t)}function mI(t){return new Z4("increment",t)}function DU(t){return new bg(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t){return Pi(t=tn(t,Qn)),new dI(t,(e=>em(t,e)))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(t,e){const r=Pi(t=tn(t,Qn));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return ll("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=(function(s){const a=typeof s=="string"?(function(c){try{return JSON.parse(c)}catch(f){throw new St(st.INVALID_ARGUMENT,"Failed to parse JSON: "+f?.message)}})(s):s,o=[];if(Array.isArray(a.indexes))for(const l of a.indexes){const c=wS(l,"collectionGroup"),f=[];if(Array.isArray(l.fields))for(const p of l.fields){const g=Jv("setIndexConfiguration",wS(p,"fieldPath"));p.arrayConfig==="CONTAINS"?f.push(new gd(g,2)):p.order==="ASCENDING"?f.push(new gd(g,0)):p.order==="DESCENDING"&&f.push(new gd(g,1))}o.push(new vp(vp.UNKNOWN_ID,c,f,yp.empty()))}return o})(e);return PV(r,n)}function wS(t,e){if(typeof t[e]!="string")throw new St(st.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function jU(t){var e;t=tn(t,Qn);const r=_S.get(t);if(r)return r;if(((e=Pi(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const n=new gI(t);return _S.set(t,n),n}function MU(t){xI(t,!0)}function BU(t){xI(t,!1)}function VU(t){FV(Pi(t._firestore)).then((e=>kt("deleting all persistent cache indexes succeeded"))).catch((e=>ll("deleting all persistent cache indexes failed",e)))}function xI(t,e){RV(Pi(t._firestore),e).then((r=>kt(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((r=>ll(`setting persistent cache index auto creation isEnabled=${e} failed`,r)))}const _S=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UU(t){var e;const r=(e=Pi(tn(t.firestore,Qn))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return r===void 0?null:Vv(r,ao(t._query))._t}function zU(t,e){var r;const n=l8(e,((s,a)=>new M8(a,s.aggregateType,s._internalFieldPath))),i=(r=Pi(tn(t.firestore,Qn))._onlineComponents)===null||r===void 0?void 0:r.datastore.serializer;return i===void 0?null:Q8(i,b8(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return ob.instance.onExistenceFilterMismatch(e)}}class ob{constructor(){this.Uu=new Map}static get instance(){return Dx||(Dx=new ob,(function(r){if(z2)throw new Error("a TestingHooksSpi instance is already set");z2=r})(Dx)),Dx}et(e){this.Uu.forEach((r=>r(e)))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Uu;return n.set(r,e),()=>n.delete(r)}}let Dx=null;(function(e,r=!0){(function(i){zp=i})(Gd),Ed(new nh("firestore",((n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),o=new Qn(new Aj(n.getProvider("auth-internal")),new Ij(n.getProvider("app-check-internal")),(function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new St(st.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sh(c.options.projectId,f)})(a,i),a);return s=Object.assign({useFetchStreams:r},s),o._setSettings(s),o}),"PUBLIC").setMultipleInstances(!0)),Wc(u6,"4.7.3",e),Wc(u6,"4.7.3","esm2017")})();const vI=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:ib,AggregateField:Pp,AggregateQuerySnapshot:JC,Bytes:hh,CACHE_SIZE_UNLIMITED:OV,CollectionReference:cc,DocumentReference:Ji,DocumentSnapshot:Pd,FieldPath:Th,FieldValue:Ah,Firestore:Qn,FirestoreError:St,GeoPoint:Xv,LoadBundleTask:KC,PersistentCacheIndexManager:gI,Query:ca,QueryCompositeFilterConstraint:Yd,QueryConstraint:Qp,QueryDocumentSnapshot:d1,QueryEndAtConstraint:Ag,QueryFieldFilterConstraint:Jp,QueryLimitConstraint:Sg,QueryOrderByConstraint:ey,QuerySnapshot:Rd,QueryStartAtConstraint:Tg,SnapshotMetadata:Wf,Timestamp:Ii,Transaction:pI,VectorValue:bg,WriteBatch:dI,_AutoId:l4,_ByteString:zi,_DatabaseId:sh,_DocumentKey:Wt,_EmptyAppCheckTokenProvider:Pj,_EmptyAuthCredentialsProvider:XN,_FieldPath:xi,_TestingHooks:$U,_cast:tn,_debugAssert:kj,_internalAggregationQueryToProtoRunAggregationQueryRequest:zU,_internalQueryToProtoQueryTarget:UU,_isBase64Available:sM,_logWarn:ll,_validateIsNotUsedTogether:HC,addDoc:Zp,aggregateFieldEqual:cU,aggregateQuerySnapshotEqual:uU,and:eU,arrayRemove:LU,arrayUnion:FU,average:lU,clearIndexedDbPersistence:VV,collection:xr,collectionGroup:LV,connectFirestoreEmulator:GC,count:uI,deleteAllPersistentCacheIndexes:VU,deleteDoc:Pl,deleteField:RU,disableNetwork:$V,disablePersistentCacheIndexAutoCreation:BU,doc:kr,documentId:GV,enableIndexedDbPersistence:MV,enableMultiTabIndexedDbPersistence:BV,enableNetwork:zV,enablePersistentCacheIndexAutoCreation:MU,endAt:sU,endBefore:iU,ensureFirestoreConfigured:Pi,executeWrite:em,getAggregateFromServer:fI,getCountFromServer:vU,getDoc:Aa,getDocFromCache:dU,getDocFromServer:pU,getDocs:ci,getDocsFromCache:mU,getDocsFromServer:gU,getFirestore:XC,getPersistentCacheIndexManager:jU,increment:mI,initializeFirestore:jV,limit:kg,limitToLast:tU,loadBundle:HV,memoryEagerGarbageCollector:EU,memoryLocalCache:kU,memoryLruGarbageCollector:SU,namedQuery:WV,onSnapshot:pi,onSnapshotsInSync:xU,or:ZV,orderBy:Dl,persistentLocalCache:TU,persistentMultipleTabManager:CU,persistentSingleTabManager:hI,query:Vr,queryEqual:X4,refEqual:DV,runTransaction:PU,serverTimestamp:eu,setDoc:Rp,setIndexConfiguration:OU,setLogLevel:Sj,snapshotEqual:hU,startAfter:nU,startAt:rU,sum:oU,terminate:qV,updateDoc:Za,vector:DU,waitForPendingWrites:UV,where:Wr,writeBatch:ab},Symbol.toStringTag,{value:"Module"}));var qU="firebase",HU="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wc(qU,HU,"app");function lb(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function yI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WU=yI,wI=new ug("auth","Firebase",yI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=new i4("@firebase/auth");function GU(t,...e){J2.logLevel<=ln.WARN&&J2.warn(`Auth (${Gd}): ${t}`,...e)}function w2(t,...e){J2.logLevel<=ln.ERROR&&J2.error(`Auth (${Gd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t,...e){throw cb(t,...e)}function Xc(t,...e){return cb(t,...e)}function _I(t,e,r){const n=Object.assign(Object.assign({},WU()),{[e]:r});return new ug("auth","Firebase",n).create(e,{appName:t.name})}function ju(t){return _I(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cb(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return wI.create(t,...e)}function Pr(t,e,...r){if(!t)throw cb(e,...r)}function Pu(t){const e="INTERNAL ASSERTION FAILED: "+t;throw w2(e),new Error(e)}function qu(t,e){t||Pu(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function KU(){return bS()==="http:"||bS()==="https:"}function bS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KU()||sO()||"connection"in navigator)?navigator.onLine:!0}function YU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,r){this.shortDelay=e,this.longDelay=r,qu(r>e,"Short delay should be less than long delay!"),this.isMobile=rO()||aO()}get(){return XU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t,e){qu(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU=new Ng(3e4,6e4);function Qu(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function su(t,e,r,n,i={}){return EI(t,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const o=fg(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return iO()||(c.referrerPolicy="no-referrer"),bI.fetch()(SI(t,t.config.apiHost,r,o),c)})}async function EI(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},QU),e);try{const i=new ez(t),s=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Ox(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ox(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Ox(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Ox(t,"user-disabled",a);const f=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw _I(t,f,c);hc(t,f)}}catch(i){if(i instanceof iu)throw i;hc(t,"network-request-failed",{message:String(i)})}}async function Cg(t,e,r,n,i={}){const s=await su(t,e,r,n,i);return"mfaPendingCredential"in s&&hc(t,"multi-factor-auth-required",{_serverResponse:s}),s}function SI(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?ub(t.config,i):`${t.config.apiScheme}://${i}`}function ZU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ez{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Xc(this.auth,"network-request-failed")),JU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ox(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Xc(t,e,n);return i.customData._tokenResponse=r,i}function ES(t){return t!==void 0&&t.enterprise!==void 0}class tz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return ZU(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function rz(t,e){return su(t,"GET","/v2/recaptchaConfig",Qu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nz(t,e){return su(t,"POST","/v1/accounts:delete",e)}async function kI(t,e){return su(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iz(t,e=!1){const r=mn(t),n=await r.getIdToken(e),i=fb(n);Pr(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:n,authTime:p1(Fw(i.auth_time)),issuedAtTime:p1(Fw(i.iat)),expirationTime:p1(Fw(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Fw(t){return Number(t)*1e3}function fb(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return w2("JWT malformed, contained fewer than 3 sections"),null;try{const i=CN(r);return i?JSON.parse(i):(w2("Failed to decode base64 JWT payload"),null)}catch(i){return w2("Caught error parsing JWT payload as JSON",i?.toString()),null}}function SS(t){const e=fb(t);return Pr(e,"internal-error"),Pr(typeof e.exp<"u","internal-error"),Pr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fp(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof iu&&sz(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function sz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=p1(this.lastLoginAt),this.creationTime=p1(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z2(t){var e;const r=t.auth,n=await t.getIdToken(),i=await Fp(t,kI(r,{idToken:n}));Pr(i?.users.length,r,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?TI(s.providerUserInfo):[],o=lz(t.providerData,a),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!o?.length,f=l?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new u_(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function oz(t){const e=mn(t);await Z2(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lz(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function TI(t){return t.map(e=>{var{providerId:r}=e,n=lb(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cz(t,e){const r=await EI(t,{},async()=>{const n=fg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=SI(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",bI.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function uz(t,e){return su(t,"POST","/v2/accounts:revokeToken",Qu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pr(e.idToken,"internal-error"),Pr(typeof e.idToken<"u","internal-error"),Pr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):SS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Pr(e.length!==0,"internal-error");const r=SS(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Pr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:s}=await cz(e,r);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:s}=r,a=new tp;return n&&(Pr(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(Pr(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Pr(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tp,this.toJSON())}_performRefresh(){return Pu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t,e){Pr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ru{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,s=lb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new az(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new u_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Fp(this,this.stsTokenManager.getToken(this.auth,e));return Pr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return iz(this,e)}reload(){return oz(this)}_assign(e){this!==e&&(Pr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Ru(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Pr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Z2(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bc(this.auth.app))return Promise.reject(ju(this.auth));const e=await this.getIdToken();return await Fp(this,nz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,s,a,o,l,c,f;const p=(n=r.displayName)!==null&&n!==void 0?n:void 0,g=(i=r.email)!==null&&i!==void 0?i:void 0,m=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,_=(a=r.photoURL)!==null&&a!==void 0?a:void 0,w=(o=r.tenantId)!==null&&o!==void 0?o:void 0,b=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,k=(c=r.createdAt)!==null&&c!==void 0?c:void 0,R=(f=r.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:C,emailVerified:j,isAnonymous:X,providerData:K,stsTokenManager:P}=r;Pr(C&&P,e,"internal-error");const A=tp.fromJSON(this.name,P);Pr(typeof C=="string",e,"internal-error"),Rf(p,e.name),Rf(g,e.name),Pr(typeof j=="boolean",e,"internal-error"),Pr(typeof X=="boolean",e,"internal-error"),Rf(m,e.name),Rf(_,e.name),Rf(w,e.name),Rf(b,e.name),Rf(k,e.name),Rf(R,e.name);const T=new Ru({uid:C,auth:e,email:g,emailVerified:j,displayName:p,isAnonymous:X,photoURL:_,phoneNumber:m,tenantId:w,stsTokenManager:A,createdAt:k,lastLoginAt:R});return K&&Array.isArray(K)&&(T.providerData=K.map(O=>Object.assign({},O))),b&&(T._redirectEventId=b),T}static async _fromIdTokenResponse(e,r,n=!1){const i=new tp;i.updateFromServerResponse(r);const s=new Ru({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Z2(s),s}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];Pr(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?TI(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,o=new tp;o.updateFromIdToken(n);const l=new Ru({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new u_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=new Map;function Fu(t){qu(t instanceof Function,"Expected a class definition");let e=kS.get(t);return e?(qu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}AI.type="NONE";const TS=AI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(t,e,r){return`firebase:${t}:${e}:${r}`}class rp{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=_2(this.userKey,i.apiKey,s),this.fullPersistenceKey=_2("persistence",i.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ru._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new rp(Fu(TS),e,n);const i=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Fu(TS);const a=_2(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const f=await c._get(a);if(f){const p=Ru._fromJSON(e,f);c!==s&&(o=p),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new rp(s,e,n):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new rp(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FI(e))return"Blackberry";if(LI(e))return"Webos";if(CI(e))return"Safari";if((e.includes("chrome/")||II(e))&&!e.includes("edge/"))return"Chrome";if(RI(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if(n?.length===2)return n[1]}return"Other"}function NI(t=$s()){return/firefox\//i.test(t)}function CI(t=$s()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function II(t=$s()){return/crios\//i.test(t)}function PI(t=$s()){return/iemobile/i.test(t)}function RI(t=$s()){return/android/i.test(t)}function FI(t=$s()){return/blackberry/i.test(t)}function LI(t=$s()){return/webos/i.test(t)}function hb(t=$s()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fz(t=$s()){var e;return hb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hz(){return oO()&&document.documentMode===10}function DI(t=$s()){return hb(t)||RI(t)||LI(t)||FI(t)||/windows phone/i.test(t)||PI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(t,e=[]){let r;switch(t){case"Browser":r=AS($s());break;case"Worker":r=`${AS($s())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Gd}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pz(t,e={}){return su(t,"GET","/v2/passwordPolicy",Qu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz=6;class gz{constructor(e){var r,n,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:mz,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,s,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NS(this),this.idTokenSubscription=new NS(this),this.beforeStateQueue=new dz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Fu(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await rp.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await kI(this,{idToken:e}),n=await Ru._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Bc(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=i?._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Z2(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bc(this.app))return Promise.reject(ju(this));const r=e?mn(e):null;return r&&Pr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Pr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bc(this.app)?Promise.reject(ju(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bc(this.app)?Promise.reject(ju(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fu(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pz(this),r=new gz(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ug("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await uz(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Fu(e)||this._popupRedirectResolver;Pr(r,this,"argument-error"),this.redirectPersistenceManager=await rp.create(this,[Fu(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pr(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,i);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r?.error&&GU(`Error while retrieving App Check token: ${r.error}`),r?.token}}function Ch(t){return mn(t)}class NS{constructor(e){this.auth=e,this.observer=null,this.addObserver=dO(r=>this.observer=r)}get next(){return Pr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ry={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vz(t){ry=t}function jI(t){return ry.loadJS(t)}function yz(){return ry.recaptchaEnterpriseScript}function wz(){return ry.gapiScript}function _z(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const bz="recaptcha-enterprise",Ez="NO_RECAPTCHA";class Sz{constructor(e){this.type=bz,this.auth=Ch(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{rz(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new tz(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;ES(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(Ez)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{n(this.auth).then(o=>{if(!r&&ES(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=yz();l.length!==0&&(l+=o),jI(l).then(()=>{i(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function CS(t,e,r,n=!1){const i=new Sz(t);let s;try{s=await i.verify(r)}catch{s=await i.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ev(t,e,r,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await CS(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await CS(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kz(t,e){const r=Up(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),s=r.getOptions();if(rh(s,e??{}))return i;hc(i,"already-initialized")}return r.initialize({options:e})}function Tz(t,e){const r=e?.persistence||[],n=(Array.isArray(r)?r:[r]).map(Fu);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function Az(t,e,r){const n=Ch(t);Pr(n._canInitEmulator,n,"emulator-config-failed"),Pr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,s=MI(e),{host:a,port:o}=Nz(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${s}//${a}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Cz()}function MI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Nz(t){const e=MI(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:IS(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:IS(a)}}}function IS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Cz(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Pu("not implemented")}_getIdTokenResponse(e){return Pu("not implemented")}_linkToIdToken(e,r){return Pu("not implemented")}_getReauthenticationResolver(e){return Pu("not implemented")}}async function Iz(t,e){return su(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pz(t,e){return Cg(t,"POST","/v1/accounts:signInWithPassword",Qu(t,e))}async function BI(t,e){return su(t,"POST","/v1/accounts:sendOobCode",Qu(t,e))}async function Rz(t,e){return BI(t,e)}async function Fz(t,e){return BI(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lz(t,e){return Cg(t,"POST","/v1/accounts:signInWithEmailLink",Qu(t,e))}async function Dz(t,e){return Cg(t,"POST","/v1/accounts:signInWithEmailLink",Qu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1 extends db{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new z1(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new z1(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ev(e,r,"signInWithPassword",Pz);case"emailLink":return Lz(e,{email:this._email,oobCode:this._password});default:hc(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ev(e,n,"signUpPassword",Iz);case"emailLink":return Dz(e,{idToken:r,email:this._email,oobCode:this._password});default:hc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function np(t,e){return Cg(t,"POST","/v1/accounts:signInWithIdp",Qu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz="http://localhost";class Fd extends db{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Fd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):hc("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,s=lb(r,["providerId","signInMethod"]);if(!n||!i)return null;const a=new Fd(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return np(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,np(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,np(e,r)}buildRequest(){const e={requestUri:Oz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=fg(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jz(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Mz(t){const e=Qm(Jm(t)).link,r=e?Qm(Jm(e)).deep_link_id:null,n=Qm(Jm(t)).deep_link_id;return(n?Qm(Jm(n)).link:null)||n||r||e||t}class pb{constructor(e){var r,n,i,s,a,o;const l=Qm(Jm(e)),c=(r=l.apiKey)!==null&&r!==void 0?r:null,f=(n=l.oobCode)!==null&&n!==void 0?n:null,p=jz((i=l.mode)!==null&&i!==void 0?i:null);Pr(c&&f&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=f,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=Mz(e);try{return new pb(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(){this.providerId=Qd.PROVIDER_ID}static credential(e,r){return z1._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=pb.parseLink(r);return Pr(n,"argument-error"),z1._fromEmailAndCode(e,n.code,n.tenantId)}}Qd.PROVIDER_ID="password";Qd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig extends VI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf extends Ig{constructor(){super("facebook.com")}static credential(e){return Fd._fromParams({providerId:Bf.PROVIDER_ID,signInMethod:Bf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bf.credentialFromTaggedObject(e)}static credentialFromError(e){return Bf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bf.credential(e.oauthAccessToken)}catch{return null}}}Bf.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends Ig{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Fd._fromParams({providerId:Vf.PROVIDER_ID,signInMethod:Vf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Vf.credentialFromTaggedObject(e)}static credentialFromError(e){return Vf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Vf.credential(r,n)}catch{return null}}}Vf.GOOGLE_SIGN_IN_METHOD="google.com";Vf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf extends Ig{constructor(){super("github.com")}static credential(e){return Fd._fromParams({providerId:Uf.PROVIDER_ID,signInMethod:Uf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uf.credentialFromTaggedObject(e)}static credentialFromError(e){return Uf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Uf.credential(e.oauthAccessToken)}catch{return null}}}Uf.GITHUB_SIGN_IN_METHOD="github.com";Uf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends Ig{constructor(){super("twitter.com")}static credential(e,r){return Fd._fromParams({providerId:zf.PROVIDER_ID,signInMethod:zf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return zf.credentialFromTaggedObject(e)}static credentialFromError(e){return zf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return zf.credential(r,n)}catch{return null}}}zf.TWITTER_SIGN_IN_METHOD="twitter.com";zf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bz(t,e){return Cg(t,"POST","/v1/accounts:signUp",Qu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const s=await Ru._fromIdTokenResponse(e,n,i),a=PS(n);return new Ld({user:s,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=PS(n);return new Ld({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function PS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv extends iu{constructor(e,r,n,i){var s;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,tv.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new tv(e,r,n,i)}}function UI(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?tv._fromErrorAndOperation(t,s,e,n):s})}async function Vz(t,e,r=!1){const n=await Fp(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ld._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(t,e,r=!1){const{auth:n}=t;if(Bc(n.app))return Promise.reject(ju(n));const i="reauthenticate";try{const s=await Fp(t,UI(n,i,e,t),r);Pr(s.idToken,n,"internal-error");const a=fb(s.idToken);Pr(a,n,"internal-error");const{sub:o}=a;return Pr(t.uid===o,n,"user-mismatch"),Ld._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&hc(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $I(t,e,r=!1){if(Bc(t.app))return Promise.reject(ju(t));const n="signIn",i=await UI(t,n,e),s=await Ld._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(s.user),s}async function Uz(t,e){return $I(Ch(t),e)}async function zz(t,e){return zI(mn(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI(t){const e=Ch(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $z(t,e,r){const n=Ch(t);await ev(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Fz)}async function HI(t,e,r){if(Bc(t.app))return Promise.reject(ju(t));const n=Ch(t),a=await ev(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bz).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&qI(t),l}),o=await Ld._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function qz(t,e,r){return Bc(t.app)?Promise.reject(ju(t)):Uz(mn(t),Qd.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&qI(t),n})}async function Hz(t,e){const r=mn(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:s}=await Rz(r.auth,i);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wz(t,e){return su(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WI(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=mn(t),s={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},a=await Fp(n,Wz(n.auth,s));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const o=n.providerData.find(({providerId:l})=>l==="password");o&&(o.displayName=n.displayName,o.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function Gz(t,e,r,n){return mn(t).onIdTokenChanged(e,r,n)}function Kz(t,e,r){return mn(t).beforeAuthStateChanged(e,r)}function Xz(t,e,r,n){return mn(t).onAuthStateChanged(e,r,n)}function Yz(t){return mn(t).signOut()}const rv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(rv,"1"),this.storage.removeItem(rv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz=1e3,Jz=10;class KI extends GI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);hz()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Jz):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Qz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}KI.type="LOCAL";const Zz=KI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI extends GI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}XI.type="SESSION";const YI=XI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new ny(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:s}=r.data,a=this.handlersMap[i];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(a).map(async c=>c(r.origin,s)),l=await e$(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ny.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=mb("",20);i.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(g.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(){return window}function r$(t){Yc().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(){return typeof Yc().WorkerGlobalScope<"u"&&typeof Yc().importScripts=="function"}async function n$(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function i$(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function s$(){return QI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="firebaseLocalStorageDb",a$=1,nv="firebaseLocalStorage",ZI="fbase_key";class Pg{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function iy(t,e){return t.transaction([nv],e?"readwrite":"readonly").objectStore(nv)}function o$(){const t=indexedDB.deleteDatabase(JI);return new Pg(t).toPromise()}function f_(){const t=indexedDB.open(JI,a$);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(nv,{keyPath:ZI})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(nv)?e(n):(n.close(),await o$(),e(await f_()))})})}async function RS(t,e,r){const n=iy(t,!0).put({[ZI]:e,value:r});return new Pg(n).toPromise()}async function l$(t,e){const r=iy(t,!1).get(e),n=await new Pg(r).toPromise();return n===void 0?null:n.value}function FS(t,e){const r=iy(t,!0).delete(e);return new Pg(r).toPromise()}const c$=800,u$=3;class e7{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await f_(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>u$)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ny._getInstance(s$()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await n$(),!this.activeServiceWorker)return;this.sender=new t$(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||i$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await f_();return await RS(e,rv,"1"),await FS(e,rv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>RS(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>l$(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>FS(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=iy(i,!1).getAll();return new Pg(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),c$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}e7.type="LOCAL";const f$=e7;new Ng(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h$(t,e){return e?Fu(e):(Pr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb extends db{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return np(e,this._buildIdpRequest())}_linkToIdToken(e,r){return np(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return np(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function d$(t){return $I(t.auth,new gb(t),t.bypassAuthState)}function p$(t){const{auth:e,user:r}=t;return Pr(r,e,"internal-error"),zI(r,new gb(t),t.bypassAuthState)}async function m$(t){const{auth:e,user:r}=t;return Pr(r,e,"internal-error"),Vz(r,new gb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e,r,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return d$;case"linkViaPopup":case"linkViaRedirect":return m$;case"reauthViaPopup":case"reauthViaRedirect":return p$;default:hc(this.auth,"internal-error")}}resolve(e){qu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$=new Ng(2e3,1e4);class K0 extends t7{constructor(e,r,n,i,s){super(e,r,i,s),this.provider=n,this.authWindow=null,this.pollId=null,K0.currentPopupAction&&K0.currentPopupAction.cancel(),K0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pr(e,this.auth,"internal-error"),e}async onExecution(){qu(this.filter.length===1,"Popup operations only handle one event");const e=mb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Xc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,K0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,g$.get())};e()}}K0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x$="pendingRedirect",b2=new Map;class v$ extends t7{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=b2.get(this.auth._key());if(!e){try{const n=await y$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}b2.set(this.auth._key(),e)}return this.bypassAuthState||b2.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function y$(t,e){const r=b$(e),n=_$(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function w$(t,e){b2.set(t._key(),e)}function _$(t){return Fu(t._redirectPersistence)}function b$(t){return _2(x$,t.config.apiKey,t.name)}async function E$(t,e,r=!1){if(Bc(t.app))return Promise.reject(ju(t));const n=Ch(t),i=h$(n,e),a=await new v$(n,i,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S$=600*1e3;class k${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!T$(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!r7(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Xc(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=S$&&this.cachedEventUids.clear(),this.cachedEventUids.has(LS(e))}saveEventToCache(e){this.cachedEventUids.add(LS(e)),this.lastProcessedEventTime=Date.now()}}function LS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function r7({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function T$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return r7(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A$(t,e={}){return su(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,C$=/^https?/;async function I$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await A$(t);for(const r of e)try{if(P$(r))return}catch{}hc(t,"unauthorized-domain")}function P$(t){const e=c_(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!C$.test(r))return!1;if(N$.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R$=new Ng(3e4,6e4);function DS(){const t=Yc().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function F$(t){return new Promise((e,r)=>{var n,i,s;function a(){DS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{DS(),r(Xc(t,"network-request-failed"))},timeout:R$.get()})}if(!((i=(n=Yc().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Yc().gapi)===null||s===void 0)&&s.load)a();else{const o=_z("iframefcb");return Yc()[o]=()=>{gapi.load?a():r(Xc(t,"network-request-failed"))},jI(`${wz()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw E2=null,e})}let E2=null;function L$(t){return E2=E2||F$(t),E2}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$=new Ng(5e3,15e3),O$="__/auth/iframe",j$="emulator/auth/iframe",M$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V$(t){const e=t.config;Pr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?ub(e,j$):`https://${t.config.authDomain}/${O$}`,n={apiKey:e.apiKey,appName:t.name,v:Gd},i=B$.get(t.config.apiHost);i&&(n.eid=i);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${fg(n).slice(1)}`}async function U$(t){const e=await L$(t),r=Yc().gapi;return Pr(r,t,"internal-error"),e.open({where:document.body,url:V$(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:M$,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=Xc(t,"network-request-failed"),o=Yc().setTimeout(()=>{s(a)},D$.get());function l(){Yc().clearTimeout(o),i(n)}n.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$$=500,q$=600,H$="_blank",W$="http://localhost";class OS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G$(t,e,r,n=$$,i=q$){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},z$),{width:n.toString(),height:i.toString(),top:s,left:a}),c=$s().toLowerCase();r&&(o=II(c)?H$:r),NI(c)&&(e=e||W$,l.scrollbars="yes");const f=Object.entries(l).reduce((g,[m,_])=>`${g}${m}=${_},`,"");if(fz(c)&&o!=="_self")return K$(e||"",o),new OS(null);const p=window.open(e||"",o,f);Pr(p,t,"popup-blocked");try{p.focus()}catch{}return new OS(p)}function K$(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X$="__/auth/handler",Y$="emulator/auth/handler",Q$=encodeURIComponent("fac");async function jS(t,e,r,n,i,s){Pr(t.config.authDomain,t,"auth-domain-config-required"),Pr(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Gd,eventId:i};if(e instanceof VI){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",hO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))a[f]=p}if(e instanceof Ig){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const l=await t._getAppCheckToken(),c=l?`#${Q$}=${encodeURIComponent(l)}`:"";return`${J$(t)}?${fg(o).slice(1)}${c}`}function J$({config:t}){return t.emulator?ub(t,Y$):`https://${t.authDomain}/${X$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="webStorageSupport";class Z${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YI,this._completeRedirectFn=E$,this._overrideRedirectResult=w$}async _openPopup(e,r,n,i){var s;qu((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await jS(e,r,n,c_(),i);return G$(e,a,mb())}async _openRedirect(e,r,n,i){await this._originValidation(e);const s=await jS(e,r,n,c_(),i);return r$(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:s}=this.eventManagers[r];return i?Promise.resolve(i):(qu(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await U$(e),n=new k$(e);return r.register("authEvent",i=>(Pr(i?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Lw,{type:Lw},i=>{var s;const a=(s=i?.[0])===null||s===void 0?void 0:s[Lw];a!==void 0&&r(!!a),hc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=I$(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return DI()||CI()||hb()}}const eq=Z$;var MS="@firebase/auth",BS="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Pr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nq(t){Ed(new nh("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Pr(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OI(t)},c=new xz(n,i,s,l);return Tz(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Ed(new nh("auth-internal",e=>{const r=Ch(e.getProvider("auth").getImmediate());return(n=>new tq(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wc(MS,BS,rq(t)),Wc(MS,BS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iq=300,sq=FN("authIdTokenMaxAge")||iq;let VS=null;const aq=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>sq)return;const i=r?.token;VS!==i&&(VS=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function n7(t=a4()){const e=Up(t,"auth");if(e.isInitialized())return e.getImmediate();const r=kz(t,{popupRedirectResolver:eq,persistence:[f$,Zz,YI]}),n=FN("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const a=aq(s.toString());Kz(r,a,()=>a(r.currentUser)),Gz(r,o=>a(o))}}const i=IN("auth");return i&&Az(r,`http://${i}`),r}function oq(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}vz({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const s=Xc("internal-error");s.customData=i,r(s)},n.type="text/javascript",n.charset="UTF-8",oq().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nq("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7="firebasestorage.googleapis.com",s7="storageBucket",lq=120*1e3,cq=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends iu{constructor(e,r,n=0){super(Dw(e),`Firebase Storage: ${r} (${Dw(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Dw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var es;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(es||(es={}));function Dw(t){return"storage/"+t}function xb(){const t="An unknown error occurred, please check the error payload for server response.";return new rs(es.UNKNOWN,t)}function uq(t){return new rs(es.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function fq(t){return new rs(es.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hq(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new rs(es.UNAUTHENTICATED,t)}function dq(){return new rs(es.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function pq(t){return new rs(es.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function mq(){return new rs(es.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gq(){return new rs(es.CANCELED,"User canceled the upload/download.")}function xq(t){return new rs(es.INVALID_URL,"Invalid URL '"+t+"'.")}function vq(t){return new rs(es.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function yq(){return new rs(es.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+s7+"' property when initializing the app?")}function wq(){return new rs(es.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _q(){return new rs(es.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function bq(t){return new rs(es.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function h_(t){return new rs(es.INVALID_ARGUMENT,t)}function a7(){return new rs(es.APP_DELETED,"The Firebase app was deleted.")}function Eq(t){return new rs(es.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function m1(t,e){return new rs(es.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Hm(t){throw new rs(es.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=sl.makeFromUrl(e,r)}catch{return new sl(e,"")}if(n.path==="")return n;throw vq(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function c(j){j.path_=decodeURIComponent(j.path)}const f="v[A-Za-z0-9_]+",p=r.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",m=new RegExp(`^https?://${p}/${f}/b/${i}/o${g}`,"i"),_={bucket:1,path:3},w=r===i7?"(?:storage.googleapis.com|storage.cloud.google.com)":r,b="([^?#]*)",k=new RegExp(`^https?://${w}/${i}/${b}`,"i"),C=[{regex:o,indices:l,postModify:s},{regex:m,indices:_,postModify:c},{regex:k,indices:{bucket:1,path:2},postModify:c}];for(let j=0;j<C.length;j++){const X=C[j],K=X.regex.exec(e);if(K){const P=K[X.indices.bucket];let A=K[X.indices.path];A||(A=""),n=new sl(P,A),X.postModify(n);break}}if(n==null)throw xq(e);return n}}class Sq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kq(t,e,r){let n=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let c=!1;function f(...b){c||(c=!0,e.apply(null,b))}function p(b){i=setTimeout(()=>{i=null,t(m,l())},b)}function g(){s&&clearTimeout(s)}function m(b,...k){if(c){g();return}if(b){g(),f.call(null,b,...k);return}if(l()||a){g(),f.call(null,b,...k);return}n<64&&(n*=2);let C;o===1?(o=2,C=0):C=(n+Math.random())*1e3,p(C)}let _=!1;function w(b){_||(_=!0,g(),!c&&(i!==null?(b||(o=2),clearTimeout(i),p(0)):b||(o=1)))}return p(0),s=setTimeout(()=>{a=!0,w(!0)},r),w}function Tq(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aq(t){return t!==void 0}function Nq(t){return typeof t=="object"&&!Array.isArray(t)}function vb(t){return typeof t=="string"||t instanceof String}function US(t){return yb()&&t instanceof Blob}function yb(){return typeof Blob<"u"}function zS(t,e,r,n){if(n<e)throw h_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw h_(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function o7(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var xd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(xd||(xd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cq(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return r||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iq{constructor(e,r,n,i,s,a,o,l,c,f,p,g=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,_)=>{this.resolve_=m,this.reject_=_,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new jx(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===xd.NO_ERROR,l=s.getStatus();if(!o||Cq(l,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===xd.ABORT;n(!1,new jx(!1,null,f));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new jx(c,s))})},r=(n,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());Aq(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=xb();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?a7():gq();a(l)}else{const l=mq();a(l)}};this.canceled_?r(!1,new jx(!1,null,!0)):this.backoffId_=kq(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Tq(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class jx{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function Pq(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Rq(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Fq(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Lq(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Dq(t,e,r,n,i,s,a=!0){const o=o7(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return Fq(c,e),Pq(c,r),Rq(c,s),Lq(c,n),new Iq(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function jq(...t){const e=Oq();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(yb())return new Blob(t);throw new rs(es.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Mq(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bq(t){if(typeof atob>"u")throw bq("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ow{constructor(e,r){this.data=e,this.contentType=r||null}}function Vq(t,e){switch(t){case zc.RAW:return new Ow(l7(e));case zc.BASE64:case zc.BASE64URL:return new Ow(c7(t,e));case zc.DATA_URL:return new Ow(zq(e),$q(e))}throw xb()}function l7(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const s=n,a=t.charCodeAt(++r);n=65536|(s&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function Uq(t){let e;try{e=decodeURIComponent(t)}catch{throw m1(zc.DATA_URL,"Malformed data URL.")}return l7(e)}function c7(t,e){switch(t){case zc.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw m1(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case zc.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw m1(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=Bq(e)}catch(i){throw i.message.includes("polyfill")?i:m1(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class u7{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw m1(zc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=qq(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function zq(t){const e=new u7(t);return e.base64?c7(zc.BASE64,e.rest):Uq(e.rest)}function $q(t){return new u7(t).contentType}function qq(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,r){let n=0,i="";US(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(US(this.data_)){const n=this.data_,i=Mq(n,e,r);return i===null?null:new $f(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new $f(n,!0)}}static getBlob(...e){if(yb()){const r=e.map(n=>n instanceof $f?n.data_:n);return new $f(jq.apply(null,r))}else{const r=e.map(a=>vb(a)?Vq(zc.RAW,a).data:a.data_);let n=0;r.forEach(a=>{n+=a.byteLength});const i=new Uint8Array(n);let s=0;return r.forEach(a=>{for(let o=0;o<a.length;o++)i[s++]=a[o]}),new $f(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f7(t){let e;try{e=JSON.parse(t)}catch{return null}return Nq(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hq(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Wq(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function h7(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gq(t,e){return e}class go{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||Gq}}let Mx=null;function Kq(t){return!vb(t)||t.length<2?t:h7(t)}function d7(){if(Mx)return Mx;const t=[];t.push(new go("bucket")),t.push(new go("generation")),t.push(new go("metageneration")),t.push(new go("name","fullPath",!0));function e(s,a){return Kq(a)}const r=new go("name");r.xform=e,t.push(r);function n(s,a){return a!==void 0?Number(a):a}const i=new go("size");return i.xform=n,t.push(i),t.push(new go("timeCreated")),t.push(new go("updated")),t.push(new go("md5Hash",null,!0)),t.push(new go("cacheControl",null,!0)),t.push(new go("contentDisposition",null,!0)),t.push(new go("contentEncoding",null,!0)),t.push(new go("contentLanguage",null,!0)),t.push(new go("contentType",null,!0)),t.push(new go("metadata","customMetadata",!0)),Mx=t,Mx}function Xq(t,e){function r(){const n=t.bucket,i=t.fullPath,s=new sl(n,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:r})}function Yq(t,e,r){const n={};n.type="file";const i=r.length;for(let s=0;s<i;s++){const a=r[s];n[a.local]=a.xform(n,e[a.server])}return Xq(n,t),n}function p7(t,e,r){const n=f7(e);return n===null?null:Yq(t,n,r)}function Qq(t,e,r,n){const i=f7(e);if(i===null||!vb(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(c=>{const f=t.bucket,p=t.fullPath,g="/b/"+a(f)+"/o/"+a(p),m=wb(g,r,n),_=o7({alt:"media",token:c});return m+_})[0]}function Jq(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const s=e[i];s.writable&&(r[s.server]=t[s.local])}return JSON.stringify(r)}class m7{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g7(t){if(!t)throw xb()}function Zq(t,e){function r(n,i){const s=p7(t,i,e);return g7(s!==null),s}return r}function eH(t,e){function r(n,i){const s=p7(t,i,e);return g7(s!==null),Qq(s,i,t.host,t._protocol)}return r}function x7(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=dq():i=hq():r.getStatus()===402?i=fq(t.bucket):r.getStatus()===403?i=pq(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function tH(t){const e=x7(t);function r(n,i){let s=e(n,i);return n.getStatus()===404&&(s=uq(t.path)),s.serverResponse=i.serverResponse,s}return r}function rH(t,e,r){const n=e.fullServerUrl(),i=wb(n,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new m7(i,s,eH(t,r),a);return o.errorHandler=tH(e),o}function nH(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function iH(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=nH(null,e)),n}function sH(t,e,r,n,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let C="";for(let j=0;j<2;j++)C=C+Math.random().toString().slice(2);return C}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=iH(e,n,i),f=Jq(c,r),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,g=`\r
--`+l+"--",m=$f.getBlob(p,n,g);if(m===null)throw wq();const _={name:c.fullPath},w=wb(s,t.host,t._protocol),b="POST",k=t.maxUploadRetryTime,R=new m7(w,b,Zq(t,r),k);return R.urlParams=_,R.headers=a,R.body=m.uploadData(),R.errorHandler=x7(e),R}class aH{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i){if(this.sent_)throw Hm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Hm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Hm("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Hm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Hm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class oH extends aH{initXhr(){this.xhr_.responseType="text"}}function v7(){return new oH}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,r){this._service=e,r instanceof sl?this._location=r:this._location=sl.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Dd(e,r)}get root(){const e=new sl(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return h7(this._location.path)}get storage(){return this._service}get parent(){const e=Hq(this._location.path);if(e===null)return null;const r=new sl(this._location.bucket,e);return new Dd(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw Eq(e)}}function lH(t,e,r){t._throwIfRoot("uploadBytes");const n=sH(t.storage,t._location,d7(),new $f(e,!0),r);return t.storage.makeRequestWithTokens(n,v7).then(i=>({metadata:i,ref:t}))}function cH(t){t._throwIfRoot("getDownloadURL");const e=rH(t.storage,t._location,d7());return t.storage.makeRequestWithTokens(e,v7).then(r=>{if(r===null)throw _q();return r})}function uH(t,e){const r=Wq(t._location.path,e),n=new sl(t._location.bucket,r);return new Dd(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fH(t){return/^[A-Za-z]+:\/\//.test(t)}function hH(t,e){return new Dd(t,e)}function y7(t,e){if(t instanceof _b){const r=t;if(r._bucket==null)throw yq();const n=new Dd(r,r._bucket);return e!=null?y7(n,e):n}else return e!==void 0?uH(t,e):t}function dH(t,e){if(e&&fH(e)){if(t instanceof _b)return hH(t,e);throw h_("To use ref(service, url), the first argument must be a Storage instance.")}else return y7(t,e)}function $S(t,e){const r=e?.[s7];return r==null?null:sl.makeFromBucketSpec(r,t)}function pH(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:LN(i,t.app.options.projectId))}class _b{constructor(e,r,n,i,s){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=i7,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=lq,this._maxUploadRetryTime=cq,this._requests=new Set,i!=null?this._bucket=sl.makeFromBucketSpec(i,this._host):this._bucket=$S(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=sl.makeFromBucketSpec(this._url,e):this._bucket=$S(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){zS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){zS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Dd(this,e)}_makeRequest(e,r,n,i,s=!0){if(this._deleted)return new Sq(a7());{const a=Dq(e,this._appId,n,i,r,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const qS="@firebase/storage",HS="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7="storage";function mH(t,e,r){return t=mn(t),lH(t,e,r)}function gH(t){return t=mn(t),cH(t)}function xH(t,e){return t=mn(t),dH(t,e)}function vH(t=a4(),e){t=mn(t);const n=Up(t,w7).getImmediate({identifier:e}),i=PN("storage");return i&&yH(n,...i),n}function yH(t,e,r,n={}){pH(t,e,r,n)}function wH(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new _b(r,n,i,e,Gd)}function _H(){Ed(new nh(w7,wH,"PUBLIC").setMultipleInstances(!0)),Wc(qS,HS,""),Wc(qS,HS,"esm2017")}_H();const bH={apiKey:"AIzaSyB1GNt6gatBiZyVDj9wZP4TSnefXsohCho",authDomain:"healthapp-f4173.firebaseapp.com",projectId:"healthapp-f4173",storageBucket:"healthapp-f4173.firebasestorage.app",messagingSenderId:"169032569236",appId:"1:169032569236:web:38585fcf19c35ba1737f81"},bb=BN(bH),X0=n7(bb),Et=XC(bb),EH=vH(bb),iv=async()=>{const t=await ci(xr(Et,"pharmacies"));return await Promise.all(t.docs.map(async r=>{const n={id:r.id,...r.data()};if(n.lat&&n.lon)n.coordinates={latitude:Number(n.lat),longitude:Number(n.lon)};else if(n.address)try{const s=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(n.address)}&limit=1`)).json();s&&s[0]&&(n.coordinates={latitude:Number(s[0].lat),longitude:Number(s[0].lon)})}catch{}return n}))},Eb=async({vendorId:t,customerId:e,role:r})=>{const n=`${t}__${e}`,i=kr(Et,"threads",n);if(!(await Aa(i)).exists()){const[a,o]=await Promise.all([Aa(kr(Et,"pharmacies",t)),Aa(kr(Et,"users",e))]),l=a.exists()?a.data().name:"Pharmacy",c=o.exists()?o.data().displayName:"Customer";await Rp(i,{id:n,vendorId:t,customerId:e,vendorName:l,customerName:c,lastMessage:"",lastBy:null,lastAt:eu(),unread:{[t]:0,[e]:0},createdAt:eu()})}return n},d_=async(t,{senderId:e,to:r,text:n})=>{const i=xr(Et,"threads",t,"messages");await Zp(i,{senderId:e,to:r,text:n||"",createdAt:eu(),read:!1}),await Za(kr(Et,"threads",t),{lastMessage:n||"",lastBy:e,lastAt:eu(),[`unread.${r}`]:mI(1)})},sv=async(t,e)=>{await Za(kr(Et,"threads",t),{[`unread.${e}`]:0});const r=Vr(xr(Et,"threads",t,"messages"),Wr("to","==",e),Wr("read","==",!1),Dl("createdAt","desc"),kg(50)),n=await ci(r);if(!n.empty){const i=ab(Et);n.docs.forEach(s=>i.update(s.ref,{read:!0})),await i.commit()}},_7=(t,e,r)=>{const n=Vr(xr(Et,"threads",t,"messages"),Dl("createdAt","asc"));return pi(n,i=>e(i.docs.map(s=>({id:s.id,...s.data()}))),i=>r?.(i))},sy=(t,e,r,n={})=>{if(!t?.uid||!t?.role)return()=>{};const i=xr(Et,"threads"),s=t.role==="customer"?Vr(i,Wr("customerId","==",t.uid)):Vr(i,Wr("vendorId","==",t.uid)),a=n.noSort?s:Vr(s,Dl("lastAt","desc"));return pi(a,o=>e(o.docs.map(l=>({id:l.id,...l.data()}))),o=>r?.(o))},ay=(t,e=null)=>{const r=xr(Et,"products"),n=e?Vr(r,Wr("pharmacyId","==",e),Dl("createdAt","desc")):Vr(r,Dl("createdAt","desc"));return pi(n,i=>t(i.docs.map(s=>({id:s.id,...s.data()}))),i=>console.error("listenProducts error:",i))},b7=async t=>{const e=xr(Et,"products");await Zp(e,{...t,createdAt:eu()})},E7=async(t,e)=>{const r=ab(Et);t.forEach(n=>{const i=kr(xr(Et,"products"));r.set(i,{...n,pharmacyId:e,price:Number(n.price),stock:Number(n.stock||0),createdAt:eu()})}),await r.commit()},ip=async(t,e,r=1)=>{const n=kr(xr(Et,"users",t,"cart"));await Rp(n,{productId:e,qty:r})},S2=(t,e)=>Pl(kr(Et,"users",t,"cart",e)),S7=async({customerId:t,pharmacyId:e,items:r,total:n})=>Zp(xr(Et,"orders"),{customerId:t,pharmacyId:e,items:r,total:n,createdAt:eu()}),k7=async(t=5,e)=>{if(!e)return[];const n=(await ci(Vr(xr(Et,"products"),Wr("pharmacyId","==",e)))).docs.map(o=>({id:o.id,...o.data()}));if(n.length===0)return[];const i=await ci(Vr(xr(Et,"orders"),Wr("pharmacyId","==",e))),s={};i.forEach(o=>{(o.data().items||[]).forEach(c=>{s[c.productId]||(s[c.productId]=0),s[c.productId]+=c.quantity||1})});const a=n.map(o=>({...o,sold:s[o.id]||0}));return a.sort((o,l)=>l.sold!==o.sold?l.sold-o.sold:(l.dateAdded?.toMillis?.()||0)-(o.dateAdded?.toMillis?.()||0)),a.slice(0,t).map(o=>({id:o.id,name:o.name,sold:o.sold,dateAdded:o.dateAdded}))};async function T7({pharmacyId:t,customerId:e,chatThreadId:r,drugs:n,startDate:i,duration:s,notes:a}){return await Zp(xr(Et,"prescriptions"),{pharmacyId:t,customerId:e,chatThreadId:r,drugs:n,startDate:i,duration:s,notes:a,status:"active",createdAt:eu(),updatedAt:eu()})}async function A7(t){const e=Vr(xr(Et,"prescriptions"),Wr("chatThreadId","==",t));return(await ci(e)).docs.map(n=>({id:n.id,...n.data()}))}async function N7({customerId:t}){const r=(await ci(Vr(xr(Et,"prescriptions"),Wr("customerId","==",t),Wr("requirePurchase","==",!0),Wr("fulfilled","!=",!0)))).docs.map(s=>({id:s.id,...s.data()}));if(!r.length)return;const n=await ci(Vr(xr(Et,"orders"),Wr("customerId","==",t),Wr("status","==","fulfilled"))),i=[];n.forEach(s=>{(s.data().items||[]).forEach(o=>{i.push(o.productId)})});for(const s of r)s.drugs.every(o=>o.productId&&i.includes(o.productId))&&await Za(kr(Et,"prescriptions",s.id),{fulfilled:!0})}const SH=Object.freeze(Object.defineProperty({__proto__:null,addProduct:b7,addToCart:ip,bulkAddProducts:E7,createPrescription:T7,fulfillPrescriptionIfOrdered:N7,getAllPharmacies:iv,getBestSellingProducts:k7,getOrCreateThread:Eb,getPrescriptionsForThread:A7,listenProducts:ay,listenThreadMessages:_7,listenUserThreads:sy,markThreadRead:sv,placeOrder:S7,removeFromCart:S2,sendChatMessage:d_},Symbol.toStringTag,{value:"Module"}));function kH({color:t="black",...e}){return d.jsx("svg",{width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:d.jsx("path",{d:"M1.38004 6.00487L0.919293 5.79263L0.919001 5.79327L1.38004 6.00487ZM3.22754 4.0549L2.89744 3.66972L2.89735 3.6698L3.22754 4.0549ZM4.24209 3.18542L3.91215 2.80011L3.91199 2.80024L4.24209 3.18542ZM12.1657 3.18441L12.4958 2.79923L12.4958 2.79918L12.1657 3.18441ZM13.1803 4.05388L13.5107 3.66894L13.5104 3.6687L13.1803 4.05388ZM15.0268 6.00385L14.5657 6.21545L14.566 6.21609L15.0268 6.00385ZM10.233 17.0371C10.233 17.3173 10.4601 17.5444 10.7403 17.5444C11.0205 17.5444 11.2476 17.3173 11.2476 17.0371H10.7403H10.233ZM5.16027 17.0371C5.16027 17.3173 5.38738 17.5444 5.66755 17.5444C5.94771 17.5444 6.17482 17.3173 6.17482 17.0371H5.66755H5.16027ZM1.10205 8.6772H1.60933C1.60933 7.2531 1.62014 6.69785 1.84108 6.21646L1.38004 6.00487L0.919001 5.79327C0.583964 6.52326 0.594774 7.34577 0.594774 8.6772H1.10205ZM1.38004 6.00487L1.84078 6.2171C2.06254 5.7357 2.4764 5.36715 3.55773 4.44L3.22754 4.0549L2.89735 3.6698C1.88667 4.53637 1.25554 5.06266 0.919294 5.79263L1.38004 6.00487ZM3.22754 4.0549L3.55764 4.44008L4.57219 3.5706L4.24209 3.18542L3.91199 2.80024L2.89744 3.66972L3.22754 4.0549ZM4.24209 3.18542L4.57204 3.57074C5.5283 2.75189 6.2094 2.16896 6.79004 1.78503C7.35875 1.40899 7.77821 1.26082 8.20392 1.26082V0.75354V0.246264C7.50348 0.246264 6.88809 0.503911 6.23046 0.938751C5.58476 1.3657 4.84802 1.99872 3.91215 2.80011L4.24209 3.18542ZM8.20392 0.75354V1.26082C8.62982 1.26082 9.04961 1.40889 9.61834 1.78463C10.199 2.16824 10.8801 2.7509 11.8357 3.56963L12.1657 3.18441L12.4958 2.79918C11.5603 1.99767 10.8235 1.3649 10.1776 0.938137C9.51974 0.503509 8.90417 0.246264 8.20392 0.246264V0.75354ZM12.1657 3.18441L11.8356 3.56959L12.8502 4.43906L13.1803 4.05388L13.5104 3.6687L12.4958 2.79923L12.1657 3.18441ZM13.1803 4.05388L12.8499 4.43882C13.9308 5.36653 14.345 5.73455 14.5657 6.21545L15.0268 6.00385L15.4878 5.79225C15.1526 5.06178 14.5197 4.53496 13.5107 3.66894L13.1803 4.05388ZM15.0268 6.00385L14.566 6.21609C14.7876 6.69715 14.7985 7.25196 14.7985 8.67618H15.3058H15.8131C15.8131 7.34488 15.8239 6.52193 15.4875 5.79162L15.0268 6.00385ZM15.3058 8.67618H14.7985V12.9789H15.3058H15.8131V8.67618H15.3058ZM15.3058 12.9789H14.7985C14.7985 13.95 14.7974 14.627 14.7287 15.1377C14.662 15.6338 14.5399 15.8965 14.3526 16.0839L14.7113 16.4426L15.07 16.8013C15.4771 16.3941 15.6523 15.8818 15.7342 15.273C15.8141 14.6789 15.8131 13.9213 15.8131 12.9789H15.3058ZM14.7113 16.4426L14.3526 16.0839C14.1652 16.2713 13.9024 16.3933 13.4064 16.46C12.8956 16.5288 12.2187 16.5298 11.2476 16.5298V17.0371V17.5444C12.1899 17.5444 12.9475 17.5455 13.5416 17.4655C14.1504 17.3836 14.6628 17.2084 15.07 16.8013L14.7113 16.4426ZM11.2476 17.0371V16.5298H5.16026V17.0371V17.5444H11.2476V17.0371ZM5.16026 17.0371V16.5298C4.18918 16.5298 3.5122 16.5288 3.00146 16.46C2.50541 16.3933 2.24265 16.2713 2.05528 16.0839L1.69658 16.4426L1.33788 16.8013C1.74503 17.2084 2.2574 17.3836 2.86619 17.4655C3.4603 17.5455 4.21789 17.5444 5.16026 17.5444V17.0371ZM1.69658 16.4426L2.05528 16.0839C1.8679 15.8965 1.74585 15.6338 1.67911 15.1377C1.61041 14.627 1.60933 13.95 1.60933 12.9789H1.10205H0.594774C0.594774 13.9213 0.593696 14.6789 0.673619 15.273C0.755519 15.8818 0.930728 16.3941 1.33788 16.8013L1.69658 16.4426ZM1.10205 12.9789H1.60933V8.6772H1.10205H0.594774V12.9789H1.10205ZM10.7403 17.0371H11.2476V11.9643H10.7403H10.233V17.0371H10.7403ZM10.7403 11.9643H11.2476C11.2476 11.5607 11.0872 11.1736 10.8019 10.8882L10.4432 11.2469L10.0845 11.6056C10.1796 11.7008 10.233 11.8298 10.233 11.9643H10.7403ZM10.4432 11.2469L10.8019 10.8882C10.5165 10.6029 10.1294 10.4425 9.72576 10.4425V10.9498V11.4571C9.86029 11.4571 9.98932 11.5105 10.0845 11.6056L10.4432 11.2469ZM9.72576 10.9498V10.4425H6.6821V10.9498V11.4571H9.72576V10.9498ZM6.6821 10.9498V10.4425C6.27848 10.4425 5.8914 10.6028 5.606 10.8882L5.9647 11.2469L6.3234 11.6056C6.41853 11.5105 6.54756 11.4571 6.6821 11.4571V10.9498ZM5.9647 11.2469L5.606 10.8882C5.3206 11.1736 5.16027 11.5607 5.16027 11.9643H5.66755H6.17482C6.17482 11.8298 6.22827 11.7008 6.3234 11.6056L5.9647 11.2469ZM5.66755 11.9643H5.16027V17.0371H5.66755H6.17482V11.9643H5.66755Z",fill:t})})}function TH({color:t="black",...e}){return d.jsx("svg",{width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:d.jsx("path",{d:"M5.12519 5.42678H10.9951M5.12519 9.27611H10.9951M5.12519 13.1254H9.03846M3.16855 0.615112H12.9517C14.0324 0.615112 14.9084 1.47681 14.9084 2.53978V15.0501C14.9084 16.1131 14.0324 16.9748 12.9517 16.9748H3.16855C2.08793 16.9748 1.21191 16.1131 1.21191 15.0501V2.53978C1.21191 1.47681 2.08793 0.615112 3.16855 0.615112Z",stroke:t,strokeWidth:"0.85113",strokeLinecap:"round"})})}const AH=({color:t="black",...e})=>d.jsxs("svg",{width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[d.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.7145 1.04437C15.256 1.04437 15.7753 1.25948 16.1582 1.64236C16.5411 2.02525 16.7562 2.54455 16.7562 3.08604V13.2944C16.7562 13.8358 16.5411 14.3551 16.1582 14.738C15.7753 15.1209 15.256 15.336 14.7145 15.336L11.653 15.335L9.31123 17.6768C9.13545 17.8525 8.90158 17.9581 8.65349 17.9737C8.4054 17.9893 8.16015 17.9139 7.96374 17.7615L7.86778 17.6768L5.52599 15.335L2.46452 15.336C1.92303 15.336 1.40373 15.1209 1.02084 14.738C0.637955 14.3551 0.422852 13.8358 0.422852 13.2944V3.08604C0.422852 2.54455 0.637955 2.02525 1.02084 1.64236C1.40373 1.25948 1.92303 1.04437 2.46452 1.04437H14.7145Z",stroke:t,strokeWidth:"0.857499",strokeLinecap:"round",strokeLinejoin:"round"}),d.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.58849 9.21104C9.09891 9.21104 9.60932 8.70062 9.60932 8.1902C9.60932 7.67979 9.09891 7.16937 8.58849 7.16937C8.07807 7.16937 7.56868 7.67979 7.56868 8.1902C7.56868 8.70062 8.07807 9.21104 8.58849 9.21104ZM4.50516 9.21104C5.01558 9.21104 5.52599 8.70062 5.52599 8.1902C5.52599 7.67979 5.01558 7.16937 4.50516 7.16937C3.99475 7.16937 3.48535 7.67979 3.48535 8.1902C3.48535 8.70062 3.99475 9.21104 4.50516 9.21104ZM12.6718 9.21104C13.1822 9.21104 13.6926 8.70062 13.6926 8.1902C13.6926 7.67979 13.1822 7.16937 12.6718 7.16937C12.1614 7.16937 11.652 7.67979 11.652 8.1902C11.652 8.70062 12.1614 9.21104 12.6718 9.21104Z",fill:t})]});function NH({color:t="black",...e}){return d.jsx("svg",{width:"19",height:"18",viewBox:"0 0 19 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:d.jsx("path",{d:"M14.463 13.865C14.9423 13.865 15.4019 14.0554 15.7408 14.3943C16.0797 14.7332 16.2701 15.1929 16.2701 15.6722C16.2701 16.1515 16.0797 16.6111 15.7408 16.95C15.4019 17.289 14.9423 17.4794 14.463 17.4794C13.9837 17.4794 13.524 17.289 13.1851 16.95C12.8462 16.6111 12.6558 16.1515 12.6558 15.6722C12.6558 15.1929 12.8462 14.7332 13.1851 14.3943C13.524 14.0554 13.9837 13.865 14.463 13.865ZM14.463 14.7686C14.2233 14.7686 13.9935 14.8638 13.824 15.0332C13.6546 15.2027 13.5594 15.4325 13.5594 15.6722C13.5594 15.9118 13.6546 16.1417 13.824 16.3111C13.9935 16.4806 14.2233 16.5758 14.463 16.5758C14.7026 16.5758 14.9324 16.4806 15.1019 16.3111C15.2714 16.1417 15.3666 15.9118 15.3666 15.6722C15.3666 15.4325 15.2714 15.2027 15.1019 15.0332C14.9324 14.8638 14.7026 14.7686 14.463 14.7686ZM6.3307 13.865C6.80999 13.865 7.26965 14.0554 7.60856 14.3943C7.94747 14.7332 8.13787 15.1929 8.13787 15.6722C8.13787 16.1515 7.94747 16.6111 7.60856 16.95C7.26965 17.289 6.80999 17.4794 6.3307 17.4794C5.8514 17.4794 5.39174 17.289 5.05283 16.95C4.71392 16.6111 4.52352 16.1515 4.52352 15.6722C4.52352 15.1929 4.71392 14.7332 5.05283 14.3943C5.39174 14.0554 5.8514 13.865 6.3307 13.865ZM6.3307 14.7686C6.09105 14.7686 5.86122 14.8638 5.69176 15.0332C5.52231 15.2027 5.42711 15.4325 5.42711 15.6722C5.42711 15.9118 5.52231 16.1417 5.69176 16.3111C5.86122 16.4806 6.09105 16.5758 6.3307 16.5758C6.57034 16.5758 6.80017 16.4806 6.96963 16.3111C7.13908 16.1417 7.23428 15.9118 7.23428 15.6722C7.23428 15.4325 7.13908 15.2027 6.96963 15.0332C6.80017 14.8638 6.57034 14.7686 6.3307 14.7686ZM16.2701 3.02198H3.86391L6.16805 8.44349H13.5594C13.8576 8.44349 14.1196 8.29892 14.2823 8.08206L16.993 4.46771C17.1105 4.3141 17.1737 4.12435 17.1737 3.92556C17.1737 3.68592 17.0785 3.45609 16.9091 3.28663C16.7396 3.11718 16.5098 3.02198 16.2701 3.02198ZM13.5594 9.34708H6.21323L5.51747 10.7567L5.42711 11.1543C5.42711 11.3939 5.52231 11.6237 5.69176 11.7932C5.86122 11.9626 6.09105 12.0578 6.3307 12.0578H16.2701V12.9614H6.3307C5.8514 12.9614 5.39174 12.771 5.05283 12.4321C4.71392 12.0932 4.52352 11.6335 4.52352 11.1543C4.52326 10.8477 4.60099 10.546 4.74942 10.2778L5.4 8.9495L2.11998 1.2148H0.90918V0.311218H2.71635L3.4844 2.11839H16.2701C16.7494 2.11839 17.2091 2.30879 17.548 2.6477C17.8869 2.98661 18.0773 3.44627 18.0773 3.92556C18.0773 4.37736 17.9237 4.75686 17.6707 5.06408L15.0413 8.57903C14.716 9.03986 14.1738 9.34708 13.5594 9.34708Z",fill:t})})}function CH({color:t="black",...e}){return d.jsx("svg",{width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:d.jsx("path",{d:"M4.1359 15.3442C4.9803 14.7362 5.87636 14.2557 6.82408 13.9027C7.77114 13.5491 8.797 13.3722 9.90168 13.3722C11.0064 13.3722 12.0322 13.5491 12.9793 13.9027C13.9263 14.2564 14.8224 14.7365 15.6675 15.3432C16.3231 14.6643 16.8506 13.863 17.25 12.9391C17.6493 12.0139 17.849 10.9993 17.849 9.89528C17.849 7.6932 17.0751 5.81796 15.5274 4.26956C13.9797 2.72115 12.1044 1.94728 9.90168 1.94795C7.69895 1.94861 5.82371 2.72281 4.27597 4.27055C2.72823 5.81829 1.95435 7.6932 1.95435 9.89528C1.95435 10.9993 2.15403 12.0139 2.55339 12.9391C2.95274 13.8636 3.48024 14.665 4.1359 15.3432M9.90268 10.392C9.06556 10.392 8.35924 10.1046 7.78372 9.5297C7.2082 8.95484 6.92077 8.24918 6.92144 7.41273C6.9221 6.57627 7.20953 5.86995 7.78372 5.29377C8.35791 4.71759 9.0639 4.43016 9.90168 4.43149C10.7395 4.43281 11.4455 4.72024 12.0196 5.29377C12.5938 5.8673 12.8813 6.57329 12.8819 7.41173C12.8826 8.25018 12.5952 8.95617 12.0196 9.5297C11.4441 10.1032 10.7385 10.3907 9.90268 10.392ZM9.90168 18.836C8.65461 18.836 7.48735 18.6039 6.39989 18.1396C5.31243 17.6754 4.36604 17.0409 3.56071 16.2363C2.75538 15.4316 2.12092 14.4852 1.65732 13.3971C1.19373 12.3089 0.961601 11.1417 0.960939 9.89528C0.960277 8.64887 1.1924 7.4816 1.65732 6.39348C2.12224 5.30536 2.7567 4.35897 3.56071 3.5543C4.36604 2.74963 5.31243 2.11517 6.39989 1.65091C7.48735 1.18666 8.65461 0.954529 9.90168 0.954529C11.1488 0.954529 12.316 1.18666 13.4035 1.65091C14.4909 2.11517 15.4373 2.74963 16.2427 3.5543C17.048 4.35897 17.6824 5.30536 18.146 6.39348C18.6096 7.4816 18.8418 8.64887 18.8424 9.89528C18.8431 11.1417 18.611 12.3089 18.146 13.3971C17.6811 14.4852 17.0467 15.4316 16.2427 16.2363C15.4373 17.0409 14.4909 17.6754 13.4035 18.1396C12.316 18.6039 11.1488 18.836 9.90168 18.836ZM9.90168 17.8426C10.8176 17.8426 11.7186 17.6823 12.6048 17.3618C13.4909 17.0419 14.2568 16.6035 14.9025 16.0465C14.2575 15.5279 13.5108 15.1183 12.6624 14.8177C11.814 14.517 10.8938 14.3663 9.90168 14.3656C8.90959 14.365 7.98605 14.5123 7.13105 14.8077C6.27605 15.1031 5.53231 15.516 4.89983 16.0465C5.54555 16.6028 6.31181 17.0413 7.1986 17.3618C8.08539 17.6823 8.98642 17.8426 9.90168 17.8426ZM9.90168 9.39857C10.4593 9.39857 10.9299 9.20684 11.3133 8.82338C11.6968 8.43992 11.8885 7.96937 11.8885 7.41173C11.8885 6.8541 11.6968 6.38355 11.3133 6.00009C10.9299 5.61663 10.4593 5.4249 9.90168 5.4249C9.34405 5.4249 8.8735 5.61663 8.49004 6.00009C8.10658 6.38355 7.91485 6.8541 7.91485 7.41173C7.91485 7.96937 8.10658 8.43992 8.49004 8.82338C8.8735 9.20684 9.34405 9.39857 9.90168 9.39857Z",fill:t})})}function IH({color:t="black",...e}){return d.jsxs("svg",{width:"18",height:"20",viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[d.jsx("path",{d:"M5.20469 12.8046H2.40469C1.98034 12.8046 1.57338 12.9731 1.27332 13.2732C0.973259 13.5733 0.804688 13.9802 0.804688 14.4046V17.2046C0.804688 17.6289 0.973259 18.0359 1.27332 18.3359C1.57338 18.636 1.98034 18.8046 2.40469 18.8046H5.20469C5.62903 18.8046 6.036 18.636 6.33606 18.3359C6.63612 18.0359 6.80469 17.6289 6.80469 17.2046V14.4046C6.80469 13.9802 6.63612 13.5733 6.33606 13.2732C6.036 12.9731 5.62903 12.8046 5.20469 12.8046ZM15.2047 0.804565H12.4047C11.9803 0.804565 11.5734 0.973136 11.2733 1.27319C10.9733 1.57325 10.8047 1.98022 10.8047 2.40457V5.20457C10.8047 5.62891 10.9733 6.03588 11.2733 6.33594C11.5734 6.63599 11.9803 6.80457 12.4047 6.80457H15.2047C15.629 6.80457 16.036 6.63599 16.3361 6.33594C16.6361 6.03588 16.8047 5.62891 16.8047 5.20457V2.40457C16.8047 1.98022 16.6361 1.57325 16.3361 1.27319C16.036 0.973136 15.629 0.804565 15.2047 0.804565Z",fill:t,fillOpacity:"0.16"}),d.jsx("path",{d:"M5.20469 0.804565H2.40469C1.98034 0.804565 1.57338 0.973136 1.27332 1.27319C0.973259 1.57325 0.804688 1.98022 0.804688 2.40457V7.20457C0.804688 7.41468 0.846073 7.62274 0.92648 7.81686C1.00689 8.01098 1.12474 8.18736 1.27332 8.33594C1.42189 8.48451 1.59827 8.60237 1.79239 8.68277C1.98652 8.76318 2.19457 8.80457 2.40469 8.80457H5.20469C5.4148 8.80457 5.62286 8.76318 5.81698 8.68277C6.0111 8.60237 6.18748 8.48451 6.33606 8.33594C6.48463 8.18736 6.60249 8.01098 6.68289 7.81686C6.7633 7.62274 6.80469 7.41468 6.80469 7.20457V2.40457C6.80469 1.98022 6.63612 1.57325 6.33606 1.27319C6.036 0.973136 5.62903 0.804565 5.20469 0.804565ZM5.20469 12.8046H2.40469C1.98034 12.8046 1.57338 12.9731 1.27332 13.2732C0.973259 13.5733 0.804688 13.9802 0.804688 14.4046V17.2046C0.804688 17.6289 0.973259 18.0359 1.27332 18.3359C1.57338 18.636 1.98034 18.8046 2.40469 18.8046H5.20469C5.62903 18.8046 6.036 18.636 6.33606 18.3359C6.63612 18.0359 6.80469 17.6289 6.80469 17.2046V14.4046C6.80469 13.9802 6.63612 13.5733 6.33606 13.2732C6.036 12.9731 5.62903 12.8046 5.20469 12.8046ZM15.2047 0.804565H12.4047C11.9803 0.804565 11.5734 0.973136 11.2733 1.27319C10.9733 1.57325 10.8047 1.98022 10.8047 2.40457V5.20457C10.8047 5.62891 10.9733 6.03588 11.2733 6.33594C11.5734 6.63599 11.9803 6.80457 12.4047 6.80457H15.2047C15.629 6.80457 16.036 6.63599 16.3361 6.33594C16.6361 6.03588 16.8047 5.62891 16.8047 5.20457V2.40457C16.8047 1.98022 16.6361 1.57325 16.3361 1.27319C16.036 0.973136 15.629 0.804565 15.2047 0.804565ZM15.2047 10.8046H12.4047C11.9803 10.8046 11.5734 10.9731 11.2733 11.2732C10.9733 11.5733 10.8047 11.9802 10.8047 12.4046V17.2046C10.8047 17.6289 10.9733 18.0359 11.2733 18.3359C11.5734 18.636 11.9803 18.8046 12.4047 18.8046H15.2047C15.629 18.8046 16.036 18.636 16.3361 18.3359C16.6361 18.0359 16.8047 17.6289 16.8047 17.2046V12.4046C16.8047 11.9802 16.6361 11.5733 16.3361 11.2732C16.036 10.9731 15.629 10.8046 15.2047 10.8046Z",stroke:t,strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinejoin:"round"})]})}async function C7(t){t&&await Hz(t)}async function PH(t){await $z(X0,t)}const I7=z.createContext(),Jn=()=>z.useContext(I7);function RH({children:t}){const[e,r]=z.useState(null),[n,i]=z.useState(null),[s,a]=z.useState(!0);z.useEffect(()=>Xz(X0,async f=>{if(r(f),f){const p=kr(Et,"users",f.uid),g=await Aa(p);g.exists()&&i(g.data())}else i(null);a(!1)}),[]);const o=(f,p)=>qz(X0,f,p),l=async({email:f,password:p,displayName:g,role:m,address:_,lat:w,lon:b})=>{const{user:k}=await HI(X0,f,p);g&&await WI(k,{displayName:g});const R={uid:k.uid,email:f,displayName:g,role:m};return _&&(R.address=_),w&&(R.lat=w),b&&(R.lon=b),await Rp(kr(Et,"users",k.uid),R),m==="pharmacy"&&await Rp(kr(Et,"pharmacies",k.uid),{id:k.uid,name:g||"Pharmacy",email:f,address:_||"",etaMins:30,phone:""}),await C7(k),{user:k,verificationSent:!0}},c=()=>Yz(X0);return d.jsx(I7.Provider,{value:{user:e,profile:n,loading:s,signIn:o,signUp:l,logout:c},children:t})}function FH({tab:t,setTab:e,cartCount:r=0,unreadMessages:n=0,ordersCount:i=0}){const{profile:s}=Jn(),a=s&&s.role==="pharmacy",o=[a?{key:"/",label:"Dashboard",icon:IH}:{key:"/",label:"Home",icon:kH},{key:"/orders",label:"Orders",icon:TH},{key:"/messages",label:"Messages",icon:AH},...a?[]:[{key:"/cart",label:"Cart",icon:NH}],{key:"/profile",label:"Profile",icon:CH}],l=n>99?"99+":String(n||"");z.useEffect(()=>{try{console.debug("[BottomNav] props",{tab:t,cartCount:r,unreadMessages:n,ordersCount:i,displayUnread:l,profile:s})}catch(f){console.error("[BottomNav] debug log failed",f)}},[t,r,n,i,l,s]);const c=typeof window<"u"&&new URLSearchParams(window.location.search).get("debugBottomNav")==="1";return d.jsxs("div",{className:"fixed bottom-3 left-0 right-0 flex justify-center z-50","aria-hidden":!1,children:[d.jsx("nav",{role:"navigation","aria-label":"Bottom navigation",className:"liquid-bottom-nav mx-auto max-w-md px-6 py-3",children:d.jsx("div",{className:"flex items-center justify-center gap-[-1] px-2",children:o.map(f=>{const p=t===f.key,g=f.icon,m={color:p?"#36A5FF":"black"},_=f.key==="/cart",w=f.key==="/messages",b=f.key==="/orders";return d.jsx("div",{className:"flex-none",children:d.jsxs("button",{onClick:()=>e(f.key),"aria-label":f.label,"aria-pressed":p,className:`relative flex flex-col items-center text-xs min-w-[64px] md:min-w-[72px] px-3 py-2 focus:outline-none transition-all duration-200 ${p?"text-sky-600 transform scale-105":"text-zinc-500 hover:text-zinc-700"}`,children:[d.jsx("div",{className:`absolute top-1 w-12 h-9 bg-sky-400 rounded-[10px] transition-all duration-300 ${p?"opacity-10 scale-100":"opacity-0 scale-90"}`}),d.jsx("div",{className:"relative z-10 transition-transform duration-200 hover:scale-110",children:d.jsx(g,{...m,className:"h-6 w-6 mb-1"})}),_&&r>0&&d.jsx("span",{className:"absolute -top-0.5 -right-0 z-50 bg-sky-500 text-white text-[10px] min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1 font-bold border-2 border-white shadow animate-bounceIn transition-all duration-200 hover:scale-110",children:r}),b&&a&&i>0&&d.jsx("span",{className:"absolute -top-0.5 -right-0 z-50 bg-orange-500 text-white text-[10px] min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1 font-bold border-2 border-white shadow animate-bounceIn transition-all duration-200 hover:scale-110",children:i>99?"99+":i}),w&&n>0&&(()=>{try{return d.jsx("span",{role:"status","aria-live":"polite","aria-atomic":"true",className:"absolute top-0 right-5 z-50 bg-sky-500 text-white text-[10px] min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1 font-bold border-2 border-white shadow animate-bounceIn transition-all duration-200 hover:scale-110",children:l})}catch(k){console.error("[BottomNav] Error rendering messages badge",k,{unreadMessages:n})}})(),d.jsx("span",{className:"font-medium truncate max-w-[72px] block text-center",children:f.label})]})},f.key)})})}),c&&d.jsxs("div",{className:"fixed bottom-20 right-4 z-60 bg-black/80 text-white text-xs px-3 py-1 rounded",children:["UnreadRaw: ",String(n)]})]})}const LH="modulepreload",DH=function(t){return"/"+t},WS={},sp=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){let l=function(c){return Promise.all(c.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");i=l(r.map(c=>{if(c=DH(c),c in WS)return;WS[c]=!0;const f=c.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":LH,f||(g.as="script"),g.crossOrigin="",g.href=c,o&&g.setAttribute("nonce",o),document.head.appendChild(g),f)return new Promise((m,_)=>{g.addEventListener("load",m),g.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function GS(t){return d.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:d.jsx("path",{d:"M6.66683 0C8.34653 0 9.95744 0.66726 11.1452 1.85499C12.3329 3.04272 13.0002 4.65363 13.0002 6.33333C13.0002 8.01304 12.3329 9.62395 11.1452 10.8117C9.95744 11.9994 8.34653 12.6667 6.66683 12.6667C4.98712 12.6667 3.37622 11.9994 2.18849 10.8117C1.00076 9.62395 0.333496 8.01304 0.333496 6.33333C0.333496 4.65363 1.00076 3.04272 2.18849 1.85499C3.37622 0.66726 4.98712 0 6.66683 0ZM6.66683 0.666667C5.16394 0.666667 3.7226 1.26369 2.65989 2.3264C1.59719 3.3891 1.00016 4.83044 1.00016 6.33333C1.00016 7.83623 1.59719 9.27757 2.65989 10.3403C3.7226 11.403 5.16394 12 6.66683 12C7.41099 12 8.14786 11.8534 8.83537 11.5687C9.52288 11.2839 10.1476 10.8665 10.6738 10.3403C11.2 9.81407 11.6174 9.18939 11.9021 8.50187C12.1869 7.81436 12.3335 7.07749 12.3335 6.33333C12.3335 4.83044 11.7365 3.3891 10.6738 2.3264C9.61106 1.26369 8.16972 0.666667 6.66683 0.666667ZM6.3335 2.66667H7.00016V6.28L10.1335 8.08667L9.80016 8.66667L6.3335 6.66667V2.66667Z",fill:"#848484"})})}/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OH=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),P7=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MH=z.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:a,...o},l)=>z.createElement("svg",{ref:l,...jH,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:P7("lucide",i),...o},[...a.map(([c,f])=>z.createElement(c,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=(t,e)=>{const r=z.forwardRef(({className:n,...i},s)=>z.createElement(MH,{ref:s,iconNode:e,className:P7(`lucide-${OH(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=ns("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BH=ns("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=ns("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=ns("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=ns("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=ns("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=ns("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=ns("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=ns("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=ns("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=ns("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=ns("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=ns("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=ns("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=ns("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=ns("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=ns("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=ns("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=ns("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KH=ns("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=ns("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=ns("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);function YH({className:t="",children:e,...r}){return d.jsx("div",{className:`rounded-3xl border border-zinc-200 bg-white ${t}`,...r,children:e})}function dh({name:t,image:e,category:r,size:n=64,className:i="",alt:s,style:a={},imgClassName:o="",roundedClass:l="rounded-xl"}){const[c,f]=z.useState(!1),p=(r||"")?.toString().toLowerCase().trim();let g=null;p&&(p.includes("prescription")?g="PrescriptionDrugs.svg":p.includes("over")?g="Over-the-counter Icon.svg":p.includes("syrup")?g="Syrup.svg":p.includes("therapeutic")?g="Therapeutic.svg":p.includes("control")?g="ControlledSubstances.svg":p.includes("target")&&(g="TargetSystem.svg"));const m="GeneralPill.svg",_=g||m,w={width:n,height:n,...a};return e&&!c?d.jsx("img",{src:e,alt:s||t||"Product image",className:`${l} object-cover ${o}`.trim(),style:w,onError:()=>f(!0)}):d.jsx("div",{className:`${i}`,style:w,children:d.jsx("img",{src:`/${encodeURIComponent(_)}`,alt:s||(r?`${r} icon`:"product icon"),className:`${l} object-contain w-full h-full`,onError:b=>{if(_!==m){b.currentTarget.src=`/${encodeURIComponent(m)}`;return}}})})}function jw({product:t,vendorName:e,vendorDistanceKm:r,vendorEtaMins:n,onOpen:i,onAdd:s,cardWidth:a="172px",cardHeight:o="199px",nameSize:l="15.54px",nameWeight:c="medium",priceSize:f="14.43px",priceColor:p="#BDBDBD",priceWeight:g="medium",addColor:m="#36A5FF",borderRadius:_}){const[w,b]=z.useState(!1),[k,R]=z.useState(!1),C=t?.image&&!w;return d.jsxs(YH,{className:`p-3 cursor-pointer relative flex flex-col justify-between overflow-hidden card-interactive group transition-all duration-200 ${k?"scale-95":"hover:scale-105"}`,onClick:i,onMouseDown:()=>R(!0),onMouseUp:()=>R(!1),onMouseLeave:()=>R(!1),style:{width:a,height:o,borderRadius:_||"10px"},children:[d.jsx("div",{className:"overflow-hidden flex items-center justify-center bg-white transition-all duration-200 group-hover:bg-gradient-to-br group-hover:from-blue-50 group-hover:to-sky-50",style:{height:`calc(${o} * 0.6)`,borderRadius:_||"3px"},children:C?d.jsx("img",{src:t.image,alt:t.name||"product image",className:"object-contain h-full w-full transition-transform duration-200 group-hover:scale-110",onError:()=>b(!0),style:{maxWidth:"100%"}}):d.jsx("div",{className:"flex items-center justify-center w-full h-full transition-transform duration-200 group-hover:scale-110",style:{padding:8},children:d.jsx(dh,{name:t.name,image:t.image,category:t.category,size:Math.min(30,Math.max(48,parseInt(o,10)/2))})})}),d.jsxs("div",{className:"mt-1 text-xs text-zinc-500 font-poppins font-light truncate flex items-center gap-2 transition-colors duration-200 group-hover:text-zinc-600",style:{fontSize:"10px",maxWidth:"100%"},children:[d.jsx("span",{className:"truncate",children:e}),(typeof r=="number"||typeof n=="number")&&d.jsxs("span",{className:"text-[9px] text-zinc-400 whitespace-nowrap transition-colors duration-200 group-hover:text-sky-500",children:[typeof r=="number"?`${r.toFixed(1)} km`:"",typeof r=="number"&&typeof n=="number"?"  ":"",typeof n=="number"?`${n} min`:""]})]}),d.jsx("div",{className:"mt-1 font-poppins transition-colors duration-200 group-hover:text-zinc-800",style:{fontSize:l,fontWeight:c,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:t.name,children:t.name}),d.jsxs("div",{className:"font-poppins transition-colors duration-200 group-hover:text-sky-600",style:{fontSize:f,color:p,fontWeight:g,overflow:"hidden"},children:["",Number(t.price).toLocaleString()]}),d.jsx("button",{onClick:j=>{j.stopPropagation(),s()},className:"absolute bottom-3 right-3 h-7 w-7 flex items-center justify-center border border-solid btn-interactive transition-all duration-200 hover:scale-110 hover:shadow-lg active:scale-95",style:{borderColor:m,borderRadius:_||"3px",background:"transparent"},onMouseEnter:j=>{j.target.style.backgroundColor=m,j.target.querySelector("svg").style.color="white"},onMouseLeave:j=>{j.target.style.backgroundColor="transparent",j.target.querySelector("svg").style.color=m},children:d.jsx(KH,{color:m,size:18,className:"transition-colors duration-200"})}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",style:{borderRadius:_||"10px"}})]})}function q1({className:t="",style:e={},lines:r=3,desktopAlign:n="center"}){const i=n==="left"?"lg:justify-start lg:pl-12":"lg:justify-center";return d.jsxs("div",{className:`w-screen h-screen flex items-center justify-center ${i} bg-white ${t}`,style:e,role:"status","aria-live":"polite",children:[d.jsx("div",{className:"animate-fadeInScale",children:d.jsxs("picture",{children:[d.jsx("source",{media:"(min-width: 1024px)",srcSet:"/DesktopLoading.svg"}),d.jsx("img",{src:"/Loading.svg",alt:"Loading",className:"w-full h-full object-contain lg:object-cover lg:w-screen lg:h-screen animate-pulse-gentle"})]})}),d.jsx("span",{className:"sr-only",children:"Loading"})]})}function cy(){const[t,e]=z.useState(null),[r,n]=z.useState("Fetching location..."),[i,s]=z.useState(null),[a,o]=z.useState(!0);return z.useEffect(()=>{if(!navigator.geolocation){n("Location not supported"),s("Geolocation is not supported by this browser"),o(!1);return}const l={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5};navigator.geolocation.getCurrentPosition(async c=>{const{latitude:f,longitude:p}=c.coords;e({latitude:f,longitude:p}),s(null);try{const m=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${f}&lon=${p}`,{timeout:5e3})).json();n(m.display_name||"Location unavailable")}catch(g){console.warn("Failed to fetch address:",g),n("Location detected")}finally{o(!1)}},c=>{switch(console.warn("Geolocation error:",c),s(c.message),o(!1),c.code){case c.PERMISSION_DENIED:n("Location permission denied");break;case c.POSITION_UNAVAILABLE:n("Location unavailable");break;case c.TIMEOUT:n("Location request timeout");break;default:n("Location error occurred");break}},l)},[]),{userCoords:t,location:r,locationError:i,isLoading:a}}function R7(t){if(!t)return null;if(t.coordinates&&typeof t.coordinates=="object"){if(t.coordinates.latitude&&t.coordinates.longitude)return{latitude:Number(t.coordinates.latitude),longitude:Number(t.coordinates.longitude)};if(t.coordinates.lat&&t.coordinates.lng)return{latitude:Number(t.coordinates.lat),longitude:Number(t.coordinates.lng)};if(t.coordinates.lat&&t.coordinates.lon)return{latitude:Number(t.coordinates.lat),longitude:Number(t.coordinates.lon)}}if(t.latitude&&t.longitude)return{latitude:Number(t.latitude),longitude:Number(t.longitude)};if(t.lat&&t.lng)return{latitude:Number(t.lat),longitude:Number(t.lng)};if(t.lat&&t.lon)return{latitude:Number(t.lat),longitude:Number(t.lon)};if(t.location&&typeof t.location=="object"){if(t.location.latitude&&t.location.longitude)return{latitude:Number(t.location.latitude),longitude:Number(t.location.longitude)};if(t.location.lat&&t.location.lng)return{latitude:Number(t.location.lat),longitude:Number(t.location.lng)}}if(t.coords&&typeof t.coords=="object"){if(t.coords.latitude&&t.coords.longitude)return{latitude:Number(t.coords.latitude),longitude:Number(t.coords.longitude)};if(t.coords.lat&&t.coords.lng)return{latitude:Number(t.coords.lat),longitude:Number(t.coords.lng)}}return null}function Sb(t,e,r,n){const s=(r-t)*Math.PI/180,a=(n-e)*Math.PI/180,o=Math.sin(s/2)**2+Math.cos(t*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(a/2)**2;return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}function F7(t,e="driving"){if(!Number.isFinite(t)||t<=0)return null;const r={walking:5,cycling:15,driving:30},n=r[e]||r.driving,i=t/n,s=Math.round(i*60);let a;if(s<1)a="< 1 min";else if(s<60)a=`${s} min${s!==1?"s":""}`;else{const o=Math.floor(s/60),l=s%60;l===0?a=`${o} hr${o!==1?"s":""}`:a=`${o}h ${l}m`}return{minutes:s,formatted:a,distance:t,mode:e}}function QH(t,e,r="driving"){if(!t||t.length===0||!e)return null;let n=null,i=1/0,s=null;return t.forEach(a=>{const o=R7(a);if(o){const l=Sb(e.latitude,e.longitude,o.latitude,o.longitude);l<i&&(i=l,n=a,s=F7(l,r))}}),n?{pharmacy:n,eta:s,distance:i}:null}function kb(t,e,r="driving"){const n=R7(t);if(!n||!e)return null;const i=Sb(e.latitude,e.longitude,n.latitude,n.longitude);return F7(i,r)}function JH(){const[t,e]=z.useState([]),[r,n]=z.useState({}),[i,s]=z.useState([]),[a,o]=z.useState(!1),[l,c]=z.useState(-1),[f,p]=z.useState(null),[g,m]=z.useState(!1),[_,w]=z.useState(""),{user:b,profile:k}=Jn(),R=$i(),{userCoords:C,location:j}=cy(),[X,K]=z.useState(null),[P,A]=z.useState(null),T=z.useRef(null),[O,I]=z.useState(!1),[D,B]=z.useState(!1),[re,_e]=z.useState("All"),[Ce,we]=z.useState([]),ce=z.useRef(null),[H,te]=z.useState(0),J=z.useRef([]),N=Ie=>Be=>{J.current[Ie]=Be||null},[U,W]=z.useState(1),[Y,ae]=z.useState(1),pe=z.useMemo(()=>{const Ie=_.trim().toLowerCase();return Ie&&f?.products&&Array.isArray(f.products)?f.products:Ie?t.filter(Be=>{const tt=(Be.name||"").toLowerCase(),ot=(Be.category||"").toLowerCase(),ht=Array.isArray(Be.tags)?Be.tags.join(" ").toLowerCase():"",Pt=Be.vendorId?r[Be.vendorId]||{}:{},Ft=(Pt.name||"").toLowerCase(),jt=(Pt.location||"").toLowerCase(),wt=[Be.price,Be.mrp,Be.cost,Be.listPrice].map(qt=>qt==null?"":String(qt)).join(" ").toLowerCase(),At=tt.includes(Ie)||ot.includes(Ie)||ht.includes(Ie)||Ft.includes(Ie)||jt.includes(Ie)||wt.includes(Ie),Xt=Ie.replace(/[^0-9.]/g,""),Gt=Xt&&(wt.includes(Xt)||Be.price&&String(Be.price).includes(Xt));return At||!!Gt}):t},[t,_,re,r,f]),he=z.useMemo(()=>{const Ie=_.trim().toLowerCase();return Ie?f?.pharmacies&&Array.isArray(f.pharmacies)?f.pharmacies.slice(0,6):i.filter(Be=>{const tt=(Be.name||Be.displayName||"").toLowerCase(),ot=(Be.address||Be.city||Be.location||"").toLowerCase();return tt.includes(Ie)||ot.includes(Ie)}).slice(0,6):[]},[i,_,f]);z.useEffect(()=>ay(e),[]),z.useEffect(()=>{async function Ie(){if(!C)return;let Be=i;if(Be.length===0&&(Be=await iv(),!Be||Be.length===0))return;const tt=QH(Be,C,"driving");tt?(K(tt.pharmacy),A(tt.eta)):(K(null),A(null))}Ie()},[C,i]),z.useEffect(()=>{if(!T.current)return;let Ie,Be;const tt=()=>{I(!0),clearTimeout(Be),Be=setTimeout(()=>I(!1),2e3)},ot=T.current;return ot.addEventListener("scroll",tt),Ie=setInterval(()=>{!O&&ot&&(ot.scrollBy({left:120,behavior:"smooth"}),ot.scrollLeft+ot.offsetWidth>=ot.scrollWidth-5&&ot.scrollTo({left:0,behavior:"smooth"}))},2500),()=>{clearInterval(Ie),ot.removeEventListener("scroll",tt),Be&&clearTimeout(Be)}},[O,pe.length]),z.useEffect(()=>{async function Ie(){const Be=Array.from(new Set(t.map(ot=>ot.vendorId).filter(Boolean))),tt={};await Promise.all(Be.map(async ot=>{try{const ht=await Aa(kr(Et,"pharmacies",ot));if(ht.exists()){const Pt=ht.data()||{};tt[ot]={name:Pt.name||"Pharmacy",location:Pt.address||Pt.city||Pt.location||"",coords:Pt.coordinates||null}}}catch{}})),n(tt)}t.length&&Ie()},[t]),z.useEffect(()=>{let Ie=!0;return(async()=>{try{const Be=await iv();if(!Ie)return;s(Array.isArray(Be)?Be:[])}catch{}})(),()=>{Ie=!1}},[]),z.useEffect(()=>{const Ie=_.trim();if(!Ie){p(null),m(!1);return}const Be=new AbortController,tt=setTimeout(async()=>{m(!0);try{const ot=await fetch(`/.netlify/functions/search?q=${encodeURIComponent(Ie)}`,{signal:Be.signal,headers:{Accept:"application/json"}});if(!ot.ok)throw new Error("server search failed");const ht=await ot.json();p(ht||null)}catch{p(null)}finally{m(!1)}},300);return()=>{Be.abort(),clearTimeout(tt)}},[_]),z.useEffect(()=>{const Ie=pi(xr(Et,"infoCards"),Be=>{we(Be.docs.map(tt=>({id:tt.id,...tt.data()})))});return()=>Ie()},[]);const xe=z.useMemo(()=>[...pe].filter(Ie=>Ie.stock===void 0||Ie.stock>0).sort((Ie,Be)=>(Be.viewCount||0)+(Be.sold||0)-((Ie.viewCount||0)+(Ie.sold||0))),[pe]),ke=z.useMemo(()=>[...t].filter(Ie=>Ie.createdAt).sort((Ie,Be)=>(Be.createdAt?.seconds||0)-(Ie.createdAt?.seconds||0)).slice(0,12),[t]),Fe=z.useMemo(()=>[...t].filter(Ie=>Ie.createdAt).sort((Ie,Be)=>(Be.createdAt?.seconds||0)-(Ie.createdAt?.seconds||0)),[t]),oe=30,Ze=Math.max(1,Math.ceil(xe.length/oe)),Re=xe.slice(0,U*oe),fe=12,ut=Math.max(1,Math.ceil(Fe.length/fe)),rt=Fe.slice(0,Y*fe);z.useEffect(()=>W(1),[xe.length]),z.useEffect(()=>ae(1),[Fe.length]);const lt=Ie=>{if(!Ie)return"";const Be=String(Ie).trim();return/^(https?:)?\/\//i.test(Be)||/^mailto:/i.test(Be)||/^tel:/i.test(Be)||Be.startsWith("/")?Be:`https://${Be}`},le=Ie=>Ie?/^(https?:)?\/\//i.test(Ie)||/^mailto:/i.test(Ie)||/^tel:/i.test(Ie):!1,je=async Ie=>{R(`/product/${Ie}`),e(Be=>Be.map(tt=>tt.id===Ie?{...tt,viewCount:(tt.viewCount||0)+1}:tt));try{const{doc:Be,updateDoc:tt,increment:ot}=await sp(async()=>{const{doc:ht,updateDoc:Pt,increment:Ft}=await Promise.resolve().then(()=>vI);return{doc:ht,updateDoc:Pt,increment:Ft}},void 0);await tt(Be(Et,"products",Ie),{viewCount:ot(1)})}catch{}};z.useEffect(()=>{const Ie=ce.current;if(!Ie)return;let Be=0;const tt=()=>{cancelAnimationFrame(Be),Be=requestAnimationFrame(()=>{const ot=Ie.scrollLeft+Ie.clientWidth/2;let ht=0,Pt=1/0;J.current.forEach((Ft,jt)=>{if(!Ft)return;const wt=Ft.getBoundingClientRect(),At=Ie.getBoundingClientRect(),Xt=wt.left-At.left+wt.width/2+Ie.scrollLeft,Gt=Math.abs(Xt-ot);Gt<Pt&&(Pt=Gt,ht=jt)}),te(ht)})};return Ie.addEventListener("scroll",tt,{passive:!0}),tt(),()=>{Ie.removeEventListener("scroll",tt),cancelAnimationFrame(Be)}},[Ce.length]),z.useEffect(()=>{const Ie=ce.current;if(!Ie||J.current.length===0||window.matchMedia?.("(prefers-reduced-motion: reduce)").matches)return;let Be=!1,tt;const ot=()=>{Be=!0,clearTimeout(tt),tt=setTimeout(()=>{Be=!1},1800)};Ie.addEventListener("pointerdown",ot),Ie.addEventListener("wheel",ot,{passive:!0}),Ie.addEventListener("touchstart",ot,{passive:!0});const ht=setInterval(()=>{if(Be)return;const Pt=(H+1)%J.current.length,Ft=J.current[Pt];if(Ft&&Ie){const jt=Ft.offsetLeft,wt=Math.max(0,Math.round(jt-(Ie.clientWidth-Ft.clientWidth)/2));Ie.scrollTo({left:wt,behavior:"smooth"})}},3e3);return()=>{clearInterval(ht),Ie.removeEventListener("pointerdown",ot),Ie.removeEventListener("wheel",ot),Ie.removeEventListener("touchstart",ot),clearTimeout(tt)}},[H,Ce.length]),b&&b.role;const ft={Prescription:"PrescriptionDrugs.svg","Over-the-counter":"Over-the-counter Icon.svg",Syrup:"Syrup.svg",Therapeutic:"Therapeutic.svg",Controlled:"ControlledSubstances.svg","Target System":"TargetSystem.svg"};return t.length?d.jsxs("div",{className:"min-h-screen w-full px-0 pb-28",children:[d.jsx("div",{className:"sticky top-0 z-30 w-full bg-white border-b flex-shrink-0 px-2",children:d.jsx("div",{className:"w-full mx-auto pt-8 pb-4",children:d.jsx("div",{className:"pt-4 pb-2 w-full",children:d.jsxs("div",{className:"w-full mx-auto px-0",children:[d.jsxs("div",{className:"flex justify-between items-center w-full h-[14px] md:h-[14px] lg:h-[20px]",children:[d.jsxs("div",{className:"flex flex-col justify-center",children:[d.jsxs("div",{className:"text-[17px] md:text-[26px] lg:text-[20px] font-regular font-poppins",children:["Hello",b?`, ${b.displayName?.split(" ")[0]||"Friend"}`:""]}),d.jsx("span",{className:"text-zinc-500 text-[10px] md:text-[12px] lg:text-[14px] font-thin font-poppins truncate max-w-xs md:max-w-md lg:max-w-lg",title:j,children:j})]}),k?.role==="customer"?d.jsxs("button",{onClick:()=>R("/pharmacy-map"),className:"flex flex-col justify-center items-end hover:bg-blue-50 transition-colors rounded-lg p-2 -m-2 group",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(GS,{className:"h-3 w-3 md:h-5 md:w-5 lg:h-6 lg:w-6 mb-0.5 mt-0.5"}),d.jsx(VH,{className:"h-2 w-2 md:h-3 md:w-3 lg:h-4 lg:w-4 text-gray-400 group-hover:text-blue-500 transition-colors"})]}),d.jsx("span",{className:"text-[10px] md:text-[12px] lg:text-[14px] font-poppins font-thin text-right leading-tight mt-1.5 group-hover:text-blue-600 transition-colors",children:P&&X?`${P.formatted} to ${r[X.vendorId]?.name||"nearest pharmacy"}`:C?"Calculating ETA...":"Fetching location..."})]}):d.jsxs("div",{className:"flex flex-col justify-center items-end",children:[d.jsx("div",{className:"flex items-center gap-1",children:d.jsx(GS,{className:"h-3 w-3 md:h-5 md:w-5 lg:h-6 lg:w-6 mb-0.5 mt-0.5"})}),d.jsx("span",{className:"text-[10px] md:text-[12px] lg:text-[14px] font-poppins font-thin text-right leading-tight mt-1.5 text-gray-600",children:k?.role==="pharmacy"?"Your pharmacy location":"Location services"})]})]}),d.jsx("div",{className:"w-full"})]})})})}),d.jsxs("div",{className:"flex-1 overflow-y-auto w-full mx-auto flex flex-col pt-1 pb-28 px-0",children:[d.jsxs("div",{className:"mt-6 flex items-center gap-3 border-b border-zinc-300 pb-2",children:[d.jsx(Zf,{className:"h-5 w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-zinc-400"}),d.jsx("input",{value:_,onChange:Ie=>{w(Ie.target.value),o(!0),c(-1)},onKeyDown:Ie=>{if(!(!a||he.length===0))switch(Ie.key){case"ArrowDown":Ie.preventDefault(),c(Be=>Be<he.length-1?Be+1:0);break;case"ArrowUp":Ie.preventDefault(),c(Be=>Be>0?Be-1:he.length-1);break;case"Enter":if(Ie.preventDefault(),l>=0&&l<he.length){const Be=he[l];w(Be.name||Be.displayName||""),o(!1);const tt=Be.id||Be.vendorId;tt&&R(`/vendor/${tt}`)}break;case"Escape":o(!1),c(-1);break}},onBlur:()=>{setTimeout(()=>{o(!1),c(-1)},200)},placeholder:"Search drugs, pharmacies",className:"w-full outline-none placeholder:text-[12px] md:placeholder:text-[14px] lg:placeholder:text-[16px] placeholder:text-[#888888] placeholder:font-light"})]}),a&&_.trim().length>0&&he.length>0&&d.jsxs("div",{className:"mt-2 left-0 right-0 md:left-6 md:right-6 bg-white rounded-lg shadow-lg divide-y max-h-56 overflow-auto animate-fade-in",children:[he.map((Ie,Be)=>d.jsx("button",{onClick:()=>{w(Ie.name||Ie.displayName||""),o(!1);const tt=Ie.id||Ie.vendorId;if(tt)try{R(`/vendor/${tt}`)}catch{window.location.href=`/vendor/${tt}`}},onKeyDown:tt=>{if(tt.key==="Enter"||tt.key===" "){tt.preventDefault();const ot=Ie.id||Ie.vendorId;ot&&R(`/vendor/${ot}`)}},className:`w-full text-left px-4 py-3 focus:outline-none transition-all duration-200 animate-fadeInUp border-b border-gray-100 last:border-b-0 ${Be===l?"bg-blue-100 border-blue-200":"hover:bg-zinc-50 focus:bg-zinc-100"}`,style:{animationDelay:`${Be*.05}s`},role:"option",tabIndex:0,children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-blue-100 flex-shrink-0",children:d.jsxs("svg",{className:"h-4 w-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"font-medium text-sm text-gray-900 truncate",children:_.trim()&&(Ie.name||Ie.displayName||"").toLowerCase().includes(_.toLowerCase())?d.jsx("span",{children:(Ie.name||Ie.displayName||"").split(new RegExp(`(${_})`,"gi")).map((tt,ot)=>tt.toLowerCase()===_.toLowerCase()?d.jsx("span",{className:"bg-yellow-200 px-1 rounded",children:tt},ot):tt)}):Ie.name||Ie.displayName}),d.jsx("div",{className:"text-xs text-gray-500 truncate mt-1",children:_.trim()&&(Ie.address||Ie.city||Ie.location||"").toLowerCase().includes(_.toLowerCase())?d.jsx("span",{children:(Ie.address||Ie.city||Ie.location||"").split(new RegExp(`(${_})`,"gi")).map((tt,ot)=>tt.toLowerCase()===_.toLowerCase()?d.jsx("span",{className:"bg-yellow-200 px-1 rounded",children:tt},ot):tt)}):Ie.address||Ie.city||Ie.location||""})]}),d.jsx("div",{className:"text-xs text-blue-600 font-medium flex-shrink-0",children:"Pharmacy"})]})},Ie.id||Ie.vendorId||Ie.name)),he.length>0&&d.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 text-center bg-gray-50 border-t animate-fade-in",children:"Use  arrow keys to navigate, Enter to select, Esc to close"})]}),d.jsx("div",{className:"mt-3 mb-2 w-full overflow-x-auto scrollbar-hide",children:d.jsx("div",{className:"flex gap-3 min-w-max",children:["All","Prescription","Over-the-counter","Syrup","Therapeutic","Controlled","Target System"].map((Ie,Be)=>{const tt=ft[Ie],ot=re===Ie;return d.jsx("button",{className:`flex items-center px-4 py-2 md:px-6 md:py-2.5 lg:px-8 lg:py-3 rounded-full text-[9px] md:text-[12px] lg:text-[14px] font-poppins font-light whitespace-nowrap border transition-all duration-200 btn-interactive animate-fadeInUp ${ot?"bg-sky-100 border-sky-400 text-sky-700 shadow-md scale-105":"bg-zinc-100 text-zinc-700 border-zinc-200 hover:bg-sky-50 hover:border-sky-300 hover:shadow-sm"}`,style:{animationDelay:`${Be*.1}s`},onClick:()=>_e(Ie),children:tt?d.jsxs(d.Fragment,{children:[d.jsx("img",{src:`/${encodeURIComponent(tt)}`,alt:`${Ie} icon`,className:`h-4 w-4 md:h-5 md:w-5 mr-2 object-contain flex-shrink-0 transition-transform duration-200 ${ot?"scale-110":""}`}),d.jsx("span",{className:"truncate",children:Ie})]}):d.jsx("span",{className:"truncate",children:Ie})},Ie)})})}),Ce.length>0&&d.jsx("div",{className:"w-full mt-6 mb-4 overflow-x-auto scrollbar-hide snap-x snap-mandatory scroll-smooth",ref:ce,role:"region","aria-label":"Announcements",style:{height:140},children:d.jsx("div",{className:"flex gap-4 md:gap-6 min-w-max h-full",children:Ce.map((Ie,Be)=>{const tt=Ie.bgColor||"#3BA3FF",ot=Ie.headerColor||"#ffffff",ht=Ie.previewColor||(Ie.headerColor?Ie.headerColor+"cc":"#ffffffcc"),Pt=Ie.linkColor||Ie.linkTextColor||"#ffffff",Ft=Ie.headerFontSize||20,jt=Ie.previewFontSize||13,wt=Ie.linkTextFontSize||Ie.linkFontSize||13;return d.jsxs("div",{ref:N(Be),className:"relative flex-shrink-0 snap-center rounded-2xl overflow-hidden",style:{width:"90vw",maxWidth:700,minWidth:260,height:"100%",background:tt,position:"relative"},children:[Ie.fullImage&&d.jsx("img",{src:Ie.fullImage,alt:Ie.header||"Info",className:"w-full h-full object-cover",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover"}}),Ie.image&&!Ie.fullImage&&d.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center justify-end pointer-events-none",children:d.jsx("img",{src:Ie.image,alt:"",className:"object-cover",style:{height:"100%",maxWidth:"100%",borderRadius:"0 16px 16px 0"}})}),d.jsx("div",{className:"absolute inset-y-0 right-0",style:{width:"55%",background:"linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.06) 60%, rgba(0,0,0,0.10) 100%)",pointerEvents:"none"}}),d.jsx("div",{className:"relative z-10 h-full flex items-center",children:d.jsxs("div",{className:"px-4 md:px-6 py-5 min-w-0 max-w-[65%] md:max-w-[60%] lg:max-w-[60%]",children:[d.jsx("div",{style:{color:ot,fontSize:Ft+"px",lineHeight:1,fontWeight:300,letterSpacing:"-0.02em"},children:Ie.header||""}),Ie.preview&&d.jsx("div",{style:{marginTop:8,color:ht,fontSize:jt+"px",lineHeight:1.2},children:Ie.preview}),Ie.link&&Ie.linkText&&(()=>{const At=lt(Ie.link),Xt=le(At);return d.jsx("a",{href:At,onClick:Gt=>{if(!Xt){Gt.preventDefault();try{R(At)}catch{window.location.href=At}}},...Xt?{target:"_blank",rel:"noopener noreferrer"}:{},style:{display:"inline-block",marginTop:12,textDecoration:"underline",color:Pt,fontSize:wt+"px",fontWeight:500},children:Ie.linkText})})()]})})]},Ie.id)})})}),d.jsxs("div",{className:"mt-2",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("div",{className:"text-[15px] md:text-[18px] lg:text-[22px] font-medium font-poppins",children:"New Arrivals"}),d.jsx("button",{className:"text-[13px] md:text-[15px] lg:text-[17px] font-normal font-poppins text-sky-600",onClick:()=>B(!0),children:"view all"})]}),d.jsx("div",{ref:T,className:"w-full overflow-x-auto scrollbar-hide cursor-grab active:cursor-grabbing",style:{overflowX:"auto"},onMouseDown:Ie=>{const Be=T.current;if(!Be)return;let tt=Ie.pageX-Be.offsetLeft,ot=Be.scrollLeft;function ht(Ft){Be.scrollLeft=ot-(Ft.pageX-Be.offsetLeft-tt)}function Pt(){window.removeEventListener("mousemove",ht),window.removeEventListener("mouseup",Pt)}window.addEventListener("mousemove",ht),window.addEventListener("mouseup",Pt)},children:d.jsx("div",{className:"flex gap-3 md:gap-4 lg:gap-6 min-w-max pb-2",children:ke.map(Ie=>d.jsxs("div",{className:"relative",children:[d.jsx(jw,{product:Ie,onOpen:()=>je(Ie.id),onAdd:()=>b?ip(b.uid,Ie.id,1):alert("Please sign in"),cardWidth:"110px",cardHeight:"128px",nameSize:"11px",nameWeight:"medium",nameTracking:"-0.5px",priceSize:"9px",priceColor:"#BDBDBD",priceWeight:"medium",addColor:"#36A5FF",addSize:"9px"}),d.jsx("span",{className:"absolute top-1 left-1 bg-sky-500 text-white text-[9px] font-semibold px-2 py-0.5 rounded-full shadow-sm select-none pointer-events-none",children:"New"})]},Ie.id||Ie.sku))})})]}),D&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:d.jsxs("div",{className:"bg-white rounded-[20px] shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6 relative",children:[d.jsx("button",{className:"absolute top-2 right-2 text-zinc-500 hover:text-zinc-800 text-xl font-bold",onClick:()=>B(!1),"aria-label":"Close",children:""}),d.jsx("div",{className:"text-[20px] md:text-[26px] font-light mb-4 font-poppins text-left",children:"All New Products"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 justify-items-center",children:rt.map(Ie=>d.jsxs("div",{className:"relative flex flex-col items-center",children:[d.jsx(jw,{product:Ie,onOpen:()=>je(Ie.id),onAdd:()=>b?ip(b.uid,Ie.id,1):alert("Please sign in"),cardWidth:"110px",cardHeight:"128px",nameSize:"11px",nameWeight:"semi-bold",nameTracking:"-0.5px",priceSize:"9px",priceColor:"#BDBDBD",priceWeight:"medium",addColor:"#36A5FF",addSize:"9px"}),d.jsx("span",{className:"absolute top-1 left-1 bg-sky-500 text-white text-[9px] font-semibold px-2 py-0.5 rounded-full shadow-sm select-none pointer-events-none",children:"New"})]},Ie.id||Ie.sku))}),ut>1&&Y<ut&&d.jsx("div",{className:"flex items-center justify-center gap-3 mt-4",children:d.jsx("button",{className:"px-4 py-2 rounded-full bg-sky-600 text-white hover:bg-sky-700",onClick:()=>ae(Ie=>Math.min(ut,Ie+1)),"aria-label":"Load more new arrivals",children:"Load more"})})]})}),d.jsxs("div",{className:"mt-10",children:[d.jsx("div",{className:"text-[15px] md:text-[18px] lg:text-[22px] font-medium font-poppins mb-3",children:"Popular Products"}),d.jsx("div",{className:"grid grid-cols-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3 md:gap-6 lg:gap-8",children:Re.map(Ie=>d.jsx("div",{className:"flex justify-center relative",children:d.jsx(jw,{product:Ie,onOpen:()=>je(Ie.id),onAdd:()=>b?ip(b.uid,Ie.id,1):alert("Please sign in"),cardWidth:"128px",cardHeight:"120px",nameSize:"12px",nameWeight:"semi-bold",nameTracking:"-0.5px",nameLineHeight:"-1.1",priceSize:"11px",priceColor:"#BDBDBD",priceWeight:"medium",priceLineHeight:"1.1",addColor:"#36A5FF",addSize:"9px",borderRadius:"10px"},Ie.id||Ie.sku)},(Ie.id||Ie.sku)+"-wrapper"))}),Ze>1&&U<Ze&&d.jsx("div",{className:"flex items-center justify-center gap-4 mt-4",children:d.jsx("button",{className:"px-4 py-2 rounded-full bg-sky-600 text-white hover:bg-sky-700",onClick:()=>W(Ie=>Math.min(Ze,Ie+1)),"aria-label":"Load more popular products",children:"Load more"})})]})]})]}):d.jsx(q1,{lines:6,className:"my-8"})}function XS(t){return d.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:d.jsx("path",{d:"M4.87524 5.41667C4.73158 5.41667 4.59381 5.47373 4.49223 5.57532C4.39064 5.6769 4.33358 5.81467 4.33358 5.95833V8.125H5.41691V6.5H7.04191V7.85417L8.93774 5.95833L7.04191 4.0625V5.41667H4.87524ZM6.8832 0.75454L12.2457 6.11704C12.3472 6.21862 12.4043 6.35637 12.4043 6.5C12.4043 6.64363 12.3472 6.78138 12.2457 6.88296L6.8832 12.2455C6.78162 12.347 6.64387 12.404 6.50024 12.404C6.35661 12.404 6.21886 12.347 6.11728 12.2455L0.754784 6.88296C0.653237 6.78138 0.596191 6.64363 0.596191 6.5C0.596191 6.35637 0.653237 6.21862 0.754784 6.11704L6.11728 0.75454C6.21886 0.652993 6.35661 0.595947 6.50024 0.595947C6.64387 0.595947 6.78162 0.652993 6.8832 0.75454Z",fill:"currentColor"})})}function ZH({product:t,pharmacy:e}){const{user:r}=Jn(),n=$i(),{userCoords:i}=cy();if(!t)return null;const s=Number(t.price||0),[a,o]=z.useState(!1),[l,c]=z.useState(!1),[f,p]=z.useState(null);z.useEffect(()=>{if(e&&i){const k=kb(e,i,"driving");p(k)}else p(null)},[e,i]);const[g,m]=z.useState([]),[_,w]=z.useState(!1);async function b(k){if(!k)return m([]);try{w(!0);const R=Vr(xr(Et,"products"),Wr("category","==",k)),j=(await ci(R)).docs.map(X=>({id:X.id,...X.data()}));m(j),c(!0)}catch(R){console.error("Failed to fetch category products",R),m([]),c(!0)}finally{w(!1)}}return r?d.jsx("div",{className:"min-h-screen bg-white",children:d.jsxs("div",{className:"w-full max-w-full md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-2 md:px-8 lg:px-12 xl:px-0",children:[d.jsx("div",{className:"pt-6 sticky top-0 z-20 bg-white/80 backdrop-blur-md pb-2 animate-slide-down-fade",children:d.jsxs("button",{onClick:()=>n(-1),className:"w-[90px] h-[34px] font-poppins font-extralight tracking-tight text-[14px] flex items-center justify-center rounded-full bg-white border border-zinc-300 hover:scale-105 hover:shadow-md transition-all duration-200 active:scale-95",children:[d.jsx($1,{className:"h-4 w-4 mr-1"})," Back"]})}),d.jsx("div",{className:"mt-8 md:border md:rounded-t-3xl md:max-w-4xl md:border-zinc-100 animate-fade-in-up",children:d.jsx("div",{className:"w-full max-w-full md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-2 md:px-8 lg:px-12 xl:px-0 pt-6 pb-36",children:d.jsx("div",{className:"mx-auto w-full",children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[d.jsxs("div",{className:"rounded-2xl p-4 border flex flex-col items-center justify-center w-full card-interactive hover:shadow-lg transition-all duration-300 animate-fade-in-left",children:[t?.image&&!a?d.jsx("img",{src:t.image,alt:t.name,onError:()=>o(!0),className:"max-h-[360px] w-full object-contain hover:scale-105 transition-transform duration-300"}):d.jsx("div",{className:"h-[200px] w-full flex items-center justify-center bg-zinc-100 rounded-md text-3xl font-semibold text-zinc-800 animate-bounce-gentle",children:d.jsx(dh,{name:t.name,image:t.image,category:t.category,size:80,roundedClass:"rounded-md"})}),d.jsxs("div",{className:"w-full mt-4 hidden lg:flex flex-col gap-3",children:[d.jsx("button",{onClick:async()=>{if(!r)return alert("Please sign in");if(!t.id)return alert("Product unavailable. Please try again.");try{await ip(r.uid,t.id,1)}catch{alert("Failed to add to cart.")}},className:"w-full h-10 rounded-full bg-sky-600 text-white text-[14px] font-poppins font-light shadow-sm btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200","aria-label":"Add to cart",children:"Add to Cart"}),d.jsxs("a",{href:`tel:${e?.phone||""}`,className:"w-full h-10 rounded-full border border-zinc-400 text-[14px] font-poppins font-light flex items-center justify-center gap-2 text-zinc-800 bg-white btn-interactive hover:border-zinc-500 hover:scale-105 active:scale-95 transition-all duration-200","aria-label":"Call to order",children:[d.jsx(Lp,{className:"h-4 w-4"})," Call to Order"]})]})]}),d.jsxs("div",{className:"flex flex-col animate-fade-in-right",children:[d.jsxs("div",{className:"mb-3 flex items-start justify-between animate-slide-up",style:{animationDelay:"0.1s"},children:[d.jsx("h1",{className:"text-[20px] lg:text-[22px] font-poppins font-medium tracking-tight leading-tight min-w-0 animate-text-reveal",children:t.name}),d.jsxs("div",{className:"text-[20px] text-sky-600 font-poppins font-semibold lg:hidden animate-pulse-slow",children:["",s.toLocaleString()]})]}),d.jsx("div",{className:"mb-4 hidden lg:block animate-fade-in",style:{animationDelay:"0.2s"},children:d.jsxs("div",{className:"text-[20px] text-sky-600 font-poppins font-semibold animate-pulse-slow",children:["",s.toLocaleString()]})}),d.jsx("div",{className:"mb-2 animate-fade-in",style:{animationDelay:"0.3s"},children:d.jsx("button",{onClick:()=>n(`/vendor/${e?.id||t.pharmacyId}`),className:"text-sky-600 underline font-poppins text-[15px] font-light hover:text-sky-700 transition-colors duration-200 hover:scale-105",children:e?.name})}),d.jsxs("div",{className:"mb-1 flex items-center justify-between gap-2 text-zinc-600 text-[13px] font-poppins font-light animate-fade-in",style:{animationDelay:"0.4s"},children:[d.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[d.jsx(ac,{className:"h-4 w-4 flex-shrink-0"}),d.jsx("span",{className:"truncate",children:e?.address})]}),e?.address&&d.jsxs("button",{onClick:()=>{const k=encodeURIComponent(e.address);window.open(`https://www.google.com/maps/search/?api=1&query=${k}`,"_blank")},className:"text-sky-600 text-[13px] font-poppins font-light px-2 py-1 rounded-full hover:bg-sky-50 transition-all duration-200 lg:hidden hover:scale-105 active:scale-95","aria-label":"Get directions",children:[d.jsx(XS,{className:"h-4 w-4 inline-block mr-1"})," Get Directions"]})]}),d.jsxs("div",{className:"mb-3 flex items-center gap-2 text-zinc-600 text-[13px] font-poppins font-light animate-fade-in",style:{animationDelay:"0.5s"},children:[d.jsx(av,{className:"h-4 w-4"}),f?`${f.formatted} to ${e?.name}`:i?"Calculating ETA...":"Fetching location..."]}),e?.address&&d.jsx("div",{className:"mb-4 hidden lg:block animate-fade-in",style:{animationDelay:"0.6s"},children:d.jsxs("button",{className:"flex items-center gap-2 text-sky-600 text-[13px] font-poppins font-light px-3 py-2 rounded-full hover:bg-sky-50 transition-all duration-200 hover:scale-105 active:scale-95",onClick:()=>{const k=encodeURIComponent(e.address);window.open(`https://www.google.com/maps/search/?api=1&query=${k}`,"_blank")},children:[d.jsx(XS,{className:"h-4 w-4 text-sky-600"})," Get Directions"]})}),d.jsxs("div",{className:"mt-2 animate-fade-in",style:{animationDelay:"0.7s"},children:[d.jsxs("div",{className:"hidden lg:block",children:[d.jsx("div",{className:"text-[15px] tracking-tight text-black font-poppins font-medium",children:"Category"}),d.jsx("div",{className:"mt-0.5 mb-5",children:d.jsx("button",{type:"button",onClick:async k=>{k.stopPropagation(),await b(t.category||"General")},className:"text-[13px] text-[#fc7f26] font-poppins font-normal underline hover:text-amber-500 transition-colors duration-200 hover:scale-105",children:t.category||"General"})})]}),d.jsx("div",{className:"block lg:hidden",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-[15px] text-black font-poppins font-medium mb-2",children:"Category"}),d.jsx("div",{children:d.jsx("button",{type:"button",onClick:async k=>{k.stopPropagation(),await b(t.category||"General")},className:"text-[13px] text-[#fc7f26] font-poppins font-normal underline hover:text-amber-500 transition-colors duration-200 hover:scale-105",children:t.category||"General"})})]})})]}),d.jsxs("div",{className:"mt-2 animate-fade-in",style:{animationDelay:"0.8s"},children:[d.jsx("div",{className:"text-[15px] font-poppins font-medium tracking-tighter text-zinc-800",children:"Product Description"}),d.jsx("p",{className:"mt-2 text-zinc-600 leading-6 font-poppins text-[14px] font-light",children:t.description})]})]})]})})})}),d.jsx("div",{className:"fixed left-0 right-0 bottom-28 z-30 lg:hidden animate-slide-up-fade",children:d.jsx("div",{className:"w-full max-w-full md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-2 md:px-8 lg:px-12 xl:px-0",children:d.jsxs("div",{className:"flex flex-col gap-3",children:[d.jsx("button",{onClick:async()=>{if(!r)return alert("Please sign in");if(!t.id)return alert("Product unavailable. Please try again.");try{await ip(r.uid,t.id,1)}catch{alert("Failed to add to cart.")}},className:"w-full h-11 rounded-full bg-sky-600 text-white text-[14px] font-poppins font-light shadow-sm btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200",children:"Add to Cart"}),d.jsxs("a",{href:`tel:${e?.phone||""}`,className:"w-full h-11 rounded-full border border-zinc-400 text-[14px] font-poppins font-light flex items-center justify-center gap-2 text-zinc-800 bg-white btn-interactive hover:border-zinc-500 hover:scale-105 active:scale-95 transition-all duration-200",children:[d.jsx(Lp,{className:"h-4 w-4"})," Call to Order"]})]})})}),l&&d.jsx("div",{onClick:()=>c(!1),className:"fixed inset-0 z-50 flex items-start justify-center pt-24 bg-black bg-opacity-30 animate-fade-in",role:"dialog","aria-modal":"true",children:d.jsxs("div",{onClick:k=>k.stopPropagation(),className:"bg-white rounded-2xl p-4 w-[90vw] max-w-md max-h-[80vh] overflow-y-auto animate-bounce-in shadow-xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"text-lg font-medium animate-text-reveal",children:['Products in "',t.category||"General",'"']}),d.jsx("button",{onClick:()=>c(!1),className:"text-zinc-500 hover:text-zinc-700 transition-colors duration-200 hover:scale-110 active:scale-95",children:"Close"})]}),_?d.jsx("div",{className:"p-4 text-center text-zinc-500 animate-pulse",children:"Loading"}):g.length===0?d.jsx("div",{className:"p-4 text-zinc-500 animate-fade-in",children:"No products found."}):d.jsx("div",{className:"space-y-2",children:g.map((k,R)=>d.jsxs("button",{onClick:()=>{c(!1),n(`/product/${k.id}`)},className:"w-full text-left rounded-lg p-2 flex items-center gap-3 hover:bg-sky-50 transition-all duration-200 card-interactive animate-fadeInUp hover:scale-102",style:{animationDelay:`${R*.1}s`},children:[d.jsx(dh,{name:k.name,image:k.image,category:k.category,size:48,className:"flex-shrink-0 animate-bounce-gentle",roundedClass:"rounded-md"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"font-medium text-sm truncate",children:k.name}),d.jsx("div",{className:"text-xs text-zinc-500 truncate",children:k.category})]})]},k.id))})]})})]})}):d.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[d.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:"Please sign in to continue"}),d.jsx("button",{className:"rounded-full bg-sky-600 text-white px-6 py-2 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>n("/auth/landing"),children:"Sign In / Sign Up"})]})}const eW="data:image/svg+xml,%3csvg%20width='26'%20height='23'%20viewBox='0%200%2026%2023'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2.41667%2022.3281C1.93056%2022.5226%201.46875%2022.4798%201.03125%2022.1998C0.59375%2021.9198%200.375%2021.5129%200.375%2020.9792V14.4167L12.0417%2011.5L0.375%208.58333V2.02083C0.375%201.48611%200.59375%201.07923%201.03125%200.800203C1.46875%200.521176%201.93056%200.478397%202.41667%200.67187L24.875%2010.151C25.4826%2010.4184%2025.7865%2010.868%2025.7865%2011.5C25.7865%2012.1319%2025.4826%2012.5816%2024.875%2012.849L2.41667%2022.3281Z'%20fill='black'/%3e%3c/svg%3e";function tW(t){return d.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:d.jsx("path",{d:"M2.68917 5.64292C3.70917 7.6475 5.3525 9.29083 7.35708 10.3108L8.91542 8.7525C9.11375 8.55417 9.39 8.4975 9.63792 8.57542C10.4312 8.8375 11.2812 8.97917 12.1667 8.97917C12.3545 8.97917 12.5347 9.05379 12.6675 9.18663C12.8004 9.31947 12.875 9.49964 12.875 9.6875V12.1667C12.875 12.3545 12.8004 12.5347 12.6675 12.6675C12.5347 12.8004 12.3545 12.875 12.1667 12.875C8.97302 12.875 5.91017 11.6063 3.65192 9.34808C1.39367 7.08983 0.125 4.02698 0.125 0.833333C0.125 0.645472 0.199628 0.465304 0.332466 0.332466C0.465304 0.199628 0.645472 0.125 0.833333 0.125H3.3125C3.50036 0.125 3.68053 0.199628 3.81337 0.332466C3.94621 0.465304 4.02083 0.645472 4.02083 0.833333C4.02083 1.71875 4.1625 2.56875 4.42458 3.36208C4.5025 3.61 4.44583 3.88625 4.2475 4.08458L2.68917 5.64292Z",fill:"black"})})}const rW="/assets/message-tone-B30p1O1l.mp3";function Tb({open:t,onClose:e,children:r}){const[n,i]=z.useState(!1),[s,a]=z.useState(!1);return z.useEffect(()=>{t?(a(!0),setTimeout(()=>i(!0),10)):(i(!1),setTimeout(()=>a(!1),300))},[t]),s?d.jsx("div",{className:`fixed inset-0 z-50 flex items-center justify-center px-2 sm:px-4 transition-all duration-300 ${n?"bg-black/30":"bg-black/0"}`,onClick:e,children:d.jsxs("div",{className:`bg-white rounded-2xl shadow-xl max-w-lg w-full p-6 relative max-h-[90vh] overflow-y-auto border border-[#36A5FF] transition-all duration-300 transform ${n?"scale-100 opacity-100 translate-y-0":"scale-95 opacity-0 translate-y-4"}`,style:{borderWidth:1},onClick:o=>o.stopPropagation(),children:[d.jsx("button",{onClick:e,className:"absolute top-3 right-3 text-zinc-400 hover:text-zinc-700 text-xl font-bold focus:outline-none transition-all duration-200 hover:scale-110 hover:bg-zinc-100 rounded-full w-8 h-8 flex items-center justify-center","aria-label":"Close",children:""}),d.jsx("div",{className:"animate-fadeInUp",children:r})]})}):null}function nW({open:t,onClose:e,products:r,onSubmit:n}){const[i,s]=z.useState([]),[a,o]=z.useState(()=>new Date().toISOString().slice(0,10)),[l,c]=z.useState(7),[f,p]=z.useState(""),[g,m]=z.useState(!1),_=()=>s([...i,{productId:"",name:"",quantity:1,dosage:"",frequency:"",duration:"",notes:"",times:[""]}]),w=(X,K,P)=>{s(A=>A.map((T,O)=>O===X?{...T,[K]:P}:T))},b=(X,K,P)=>{s(A=>A.map((T,O)=>O===X?{...T,times:T.times.map((I,D)=>D===K?P:I)}:T))},k=X=>{s(K=>K.map((P,A)=>A===X?{...P,times:[...P.times||[],""]}:P))},R=(X,K)=>{s(P=>P.map((A,T)=>T===X?{...A,times:A.times.filter((O,I)=>I!==K)}:A))},C=X=>s(K=>K.filter((P,A)=>A!==X)),j=X=>{if(X.preventDefault(),!i.length)return alert("Add at least one drug");n({drugs:i,startDate:a,duration:l,notes:f,requirePurchase:g})};return d.jsx(Tb,{open:t,onClose:e,children:d.jsxs("form",{onSubmit:j,className:"space-y-4",children:[d.jsx("div",{className:"text-lg font-light mb-2 animate-text-reveal",children:"Create Prescription"}),d.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.1s"},children:[d.jsx("button",{type:"button",onClick:_,className:"mb-2 px-3 py-1 rounded-full text-[12px] bg-sky-600 text-white btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200",children:"+ Add Drug"}),i.map((X,K)=>d.jsxs("div",{className:"mb-2 p-2 border rounded-lg bg-zinc-50 card-interactive hover:shadow-md transition-all duration-200 animate-fadeInUp",style:{animationDelay:`${.1*K}s`},children:[d.jsxs("select",{className:"mb-1 w-full border-b p-1 text-[12px] focus:border-sky-500 transition-colors duration-200",value:X.productId,onChange:P=>{const A=r.find(T=>T.id===P.target.value);w(K,"productId",A?.id||""),w(K,"name",A?.name||"")},required:!0,children:[d.jsx("option",{value:"",children:"Select drug"}),r.map(P=>d.jsx("option",{value:P.id,children:P.name},P.id))]}),d.jsx("input",{type:"number",min:"1",className:"mb-1 w-full border-b p-1 text-[12px] focus:border-sky-500 transition-colors duration-200",placeholder:"Quantity",value:X.quantity,onChange:P=>w(K,"quantity",P.target.value),required:!0}),d.jsx("input",{className:"mb-1 w-full border-b p-1 text-[12px] focus:border-sky-500 transition-colors duration-200",placeholder:"Dosage (e.g. 1 tablet)",value:X.dosage,onChange:P=>w(K,"dosage",P.target.value),required:!0}),d.jsx("input",{className:"mb-1 w-full border-b p-1 text-[12px] focus:border-sky-500 transition-colors duration-200",placeholder:"Frequency (e.g. 2x/day)",value:X.frequency,onChange:P=>w(K,"frequency",P.target.value),required:!0}),d.jsx("input",{type:"number",min:"1",className:"mb-1 w-full border-b p-1 text-[12px] focus:border-sky-500 transition-colors duration-200",placeholder:"Duration (days)",value:X.duration,onChange:P=>w(K,"duration",P.target.value),required:!0}),d.jsx("input",{className:"mb-1 w-full border-b p-1 text-[12px] focus:border-sky-500 transition-colors duration-200",placeholder:"Notes (optional)",value:X.notes,onChange:P=>w(K,"notes",P.target.value)}),d.jsxs("div",{className:"mb-1",children:[d.jsx("label",{className:"block text-xs font-light mb-1",children:"Time(s) for this dosage (optional)"}),(X.times||[]).map((P,A)=>d.jsxs("div",{className:"flex items-center gap-2 mb-1 animate-fade-in",children:[d.jsx("input",{type:"time",className:"border-b p-1 text-[12px] focus:border-sky-500 transition-colors duration-200",value:P,onChange:T=>b(K,A,T.target.value)}),d.jsx("button",{type:"button",className:"text-xs text-red-500 hover:text-red-600 transition-colors duration-200 hover:scale-110",onClick:()=>R(K,A),children:"Remove"})]},A)),d.jsx("button",{type:"button",className:"text-xs text-sky-600 underline hover:text-sky-700 transition-colors duration-200",onClick:()=>k(K),children:"+ Add Time"})]}),d.jsx("button",{type:"button",onClick:()=>C(K),className:"text-xs text-red-500 hover:text-red-600 transition-colors duration-200 hover:scale-110",children:"Remove"})]},K))]}),d.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.2s"},children:[d.jsx("label",{className:"block text-sm mb-1 font-light",children:"Start Date"}),d.jsx("input",{type:"date",className:"border-b p-1 w-full text-[12px] focus:border-sky-500 transition-colors duration-200",value:a,onChange:X=>o(X.target.value),required:!0})]}),d.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.3s"},children:[d.jsx("label",{className:"block text-sm mb-1 font-light",children:"Total Duration (days)"}),d.jsx("input",{type:"number",min:"1",className:"border-b p-1 w-full text-[12px] focus:border-sky-500 transition-colors duration-200",value:l,onChange:X=>c(X.target.value),required:!0})]}),d.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.4s"},children:[d.jsx("label",{className:"block text-sm mb-1 font-light",children:"Notes"}),d.jsx("textarea",{className:"border rounded p-1 w-full text-[12px] focus:border-sky-500 transition-colors duration-200",value:f,onChange:X=>p(X.target.value)})]}),d.jsxs("div",{className:"flex items-center gap-2 animate-fade-in",style:{animationDelay:"0.5s"},children:[d.jsx("input",{type:"checkbox",id:"requirePurchase",checked:g,onChange:X=>m(X.target.checked),className:"transition-transform duration-200 hover:scale-110"}),d.jsx("label",{htmlFor:"requirePurchase",className:"text-xs font-light",children:"Require customer to purchase before prescription starts"})]}),d.jsx("button",{type:"submit",className:"w-full rounded-full bg-sky-600 text-white py-2 font-light text-[12px] btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200 animate-fade-in-up",style:{animationDelay:"0.6s"},children:"Create Prescription"})]})})}function L7({chatThreadId:t,prescriptions:e,userId:r}){const[n,i]=z.useState(e||[]),[s,a]=z.useState({});z.useEffect(()=>{if(e&&e.length>0){i(e);const f={};e.forEach(p=>{f[p.id]={},p.drugs.forEach((g,m)=>{f[p.id][m]=g.quantity})}),a(f);return}t&&A7(t).then(f=>{i(f);const p={};f.forEach(g=>{p[g.id]={},g.drugs.forEach((m,_)=>{p[g.id][_]=m.quantity})}),a(p)})},[t,e]);function o(f,p,g){const m=new Date(p.startDate),w=Math.floor((new Date-m)/(1e3*60*60*24)),b=Math.max(0,Number(f.duration||p.duration)-w),k=s[p.id]?.[g]??f.quantity;return{daysLeft:b,quantityLeft:k}}function l(f){if(!f)return 1;const p=f.match(/(\d+(?:\.\d+)?)/);return p?Number(p[1]):1}async function c(f,p){a(b=>{const k={...b},R=n.find(K=>K.id===f);if(!R)return b;const C=R.drugs[p],j=l(C.dosage),X=k[f]?.[p]??C.quantity;return k[f]={...k[f],[p]:Math.max(0,X-j)},k});const g=n.find(b=>b.id===f);if(!g)return;const m=g.drugs[p],_=l(m.dosage),w=g.drugs.map((b,k)=>k===p?{...b,quantity:Math.max(0,b.quantity-_)}:b);await Za(kr(Et,"prescriptions",f),{drugs:w}),i(b=>b.map(k=>k.id===f?{...k,drugs:w}:k))}return d.jsxs("div",{className:"mt-4",children:[d.jsx("div",{className:"text-lg font-light mb-2",children:"Prescriptions"}),n.length===0&&d.jsx("div",{className:"text-zinc-400 text-sm",children:"No prescriptions yet."}),n.map(f=>d.jsxs("div",{className:"mb-4 border rounded-2xl p-4 bg-white shadow-sm relative",children:[d.jsxs("div",{className:"flex items-start justify-between mb-2",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"font-thin text-[14px] mb-1",children:["Created: ",new Date(f.startDate).toLocaleDateString()]}),d.jsxs("div",{className:"mb-1 text-xs text-zinc-500 font-light",children:["Status: ",f.status]})]}),d.jsx("div",{className:"flex flex-col gap-2",children:f.drugs.map((p,g)=>{const{quantityLeft:m}=o(p,f,g),_=f.requirePurchase&&!f.fulfilled||m<=0;return d.jsx("button",{className:"rounded-full bg-sky-600 text-white text-[10px] px-2 py-0.5 ml-auto disabled:opacity-40 mb-1 shadow-sm",style:{minWidth:70,height:24,lineHeight:"16px"},disabled:_,onClick:()=>c(f.id,g),children:"Mark Dose"},g)})})]}),d.jsx("ul",{className:"mb-2 text-[13px]",children:f.drugs.map((p,g)=>{const{daysLeft:m,quantityLeft:_}=o(p,f,g);return d.jsxs("li",{className:"mb-2 flex flex-col sm:flex-row sm:items-center sm:gap-2",children:[d.jsx("span",{className:"font-medium text-sky-700",children:p.name}),d.jsxs("span",{className:"text-zinc-500",children:["Qty: ",_]}),d.jsxs("span",{className:"text-zinc-500",children:["Dosage: ",p.dosage]}),d.jsxs("span",{className:"text-zinc-500",children:["Freq: ",p.frequency]}),d.jsxs("span",{className:m<=2?"text-red-500":"text-green-600",children:["Days left: ",m]}),d.jsxs("span",{className:_<=2?"text-red-500":"text-green-600",children:["Qty left: ",_]}),p.notes&&d.jsxs("span",{className:"block text-xs text-zinc-400",children:["Notes: ",p.notes]}),p.productId&&f.requirePurchase&&d.jsx("a",{href:`/product/${p.productId}`,className:"mt-1 inline-block text-xs text-sky-600 underline hover:text-sky-800 transition",children:"View & Buy"})]},g)})}),d.jsxs("div",{className:"text-xs text-zinc-400",children:["Duration: ",f.duration," days"]})]},f.id))]})}const D7=typeof document<"u"?oa.useLayoutEffect:()=>{};var Mw;const iW=(Mw=oa.useInsertionEffect)!==null&&Mw!==void 0?Mw:D7;function sW(t){const e=z.useRef(null);return iW(()=>{e.current=t},[t]),z.useCallback((...r)=>{const n=e.current;return n?.(...r)},[])}const Ih=t=>{var e;return(e=t?.ownerDocument)!==null&&e!==void 0?e:document},fd=t=>t&&"window"in t&&t.window===t?t:Ih(t).defaultView||window;function aW(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function oW(t){return aW(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let lW=!1;function Ab(){return lW}function O7(t,e){if(!Ab())return e&&t?t.contains(e):!1;if(!t||!e)return!1;let r=e;for(;r!==null;){if(r===t)return!0;r.tagName==="SLOT"&&r.assignedSlot?r=r.assignedSlot.parentNode:oW(r)?r=r.host:r=r.parentNode}return!1}const m_=(t=document)=>{var e;if(!Ab())return t.activeElement;let r=t.activeElement;for(;r&&"shadowRoot"in r&&(!((e=r.shadowRoot)===null||e===void 0)&&e.activeElement);)r=r.shadowRoot.activeElement;return r};function j7(t){return Ab()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}function cW(t){var e;if(typeof window>"u"||window.navigator==null)return!1;let r=(e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands;return Array.isArray(r)&&r.some(n=>t.test(n.brand))||t.test(window.navigator.userAgent)}function uW(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function M7(t){let e=null;return()=>(e==null&&(e=t()),e)}const fW=M7(function(){return uW(/^Mac/i)}),hW=M7(function(){return cW(/Android/i)});function B7(){let t=z.useRef(new Map),e=z.useCallback((i,s,a,o)=>{let l=o?.once?(...c)=>{t.current.delete(a),a(...c)}:a;t.current.set(a,{type:s,eventTarget:i,fn:l,options:o}),i.addEventListener(s,l,o)},[]),r=z.useCallback((i,s,a,o)=>{var l;let c=((l=t.current.get(a))===null||l===void 0?void 0:l.fn)||a;i.removeEventListener(s,c,o),t.current.delete(a)},[]),n=z.useCallback(()=>{t.current.forEach((i,s)=>{r(i.eventTarget,i.type,s,i.options)})},[r]);return z.useEffect(()=>n,[n]),{addGlobalListener:e,removeGlobalListener:r,removeAllGlobalListeners:n}}function dW(t){return t.pointerType===""&&t.isTrusted?!0:hW()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function V7(t){let e=t;return e.nativeEvent=t,e.isDefaultPrevented=()=>e.defaultPrevented,e.isPropagationStopped=()=>e.cancelBubble,e.persist=()=>{},e}function pW(t,e){Object.defineProperty(t,"target",{value:e}),Object.defineProperty(t,"currentTarget",{value:e})}function U7(t){let e=z.useRef({isFocused:!1,observer:null});D7(()=>{const n=e.current;return()=>{n.observer&&(n.observer.disconnect(),n.observer=null)}},[]);let r=sW(n=>{t?.(n)});return z.useCallback(n=>{if(n.target instanceof HTMLButtonElement||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=n.target,s=a=>{if(e.current.isFocused=!1,i.disabled){let o=V7(a);r(o)}e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",s,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&i.disabled){var a;(a=e.current.observer)===null||a===void 0||a.disconnect();let o=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:o})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:o}))}}),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[r])}let mW=!1,Rg=null,g_=new Set,g1=new Map,Od=!1,x_=!1;const gW={Tab:!0,Escape:!0};function Nb(t,e){for(let r of g_)r(t,e)}function xW(t){return!(t.metaKey||!fW()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function ov(t){Od=!0,xW(t)&&(Rg="keyboard",Nb("keyboard",t))}function ap(t){Rg="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(Od=!0,Nb("pointer",t))}function z7(t){dW(t)&&(Od=!0,Rg="virtual")}function $7(t){t.target===window||t.target===document||mW||!t.isTrusted||(!Od&&!x_&&(Rg="virtual",Nb("virtual",t)),Od=!1,x_=!1)}function q7(){Od=!1,x_=!0}function v_(t){if(typeof window>"u"||typeof document>"u"||g1.get(fd(t)))return;const e=fd(t),r=Ih(t);let n=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){Od=!0,n.apply(this,arguments)},r.addEventListener("keydown",ov,!0),r.addEventListener("keyup",ov,!0),r.addEventListener("click",z7,!0),e.addEventListener("focus",$7,!0),e.addEventListener("blur",q7,!1),typeof PointerEvent<"u"&&(r.addEventListener("pointerdown",ap,!0),r.addEventListener("pointermove",ap,!0),r.addEventListener("pointerup",ap,!0)),e.addEventListener("beforeunload",()=>{H7(t)},{once:!0}),g1.set(e,{focus:n})}const H7=(t,e)=>{const r=fd(t),n=Ih(t);e&&n.removeEventListener("DOMContentLoaded",e),g1.has(r)&&(r.HTMLElement.prototype.focus=g1.get(r).focus,n.removeEventListener("keydown",ov,!0),n.removeEventListener("keyup",ov,!0),n.removeEventListener("click",z7,!0),r.removeEventListener("focus",$7,!0),r.removeEventListener("blur",q7,!1),typeof PointerEvent<"u"&&(n.removeEventListener("pointerdown",ap,!0),n.removeEventListener("pointermove",ap,!0),n.removeEventListener("pointerup",ap,!0)),g1.delete(r))};function vW(t){const e=Ih(t);let r;return e.readyState!=="loading"?v_(t):(r=()=>{v_(t)},e.addEventListener("DOMContentLoaded",r)),()=>H7(t,r)}typeof document<"u"&&vW();function W7(){return Rg!=="pointer"}const yW=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function wW(t,e,r){let n=Ih(r?.target);const i=typeof window<"u"?fd(r?.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?fd(r?.target).HTMLTextAreaElement:HTMLTextAreaElement,a=typeof window<"u"?fd(r?.target).HTMLElement:HTMLElement,o=typeof window<"u"?fd(r?.target).KeyboardEvent:KeyboardEvent;return t=t||n.activeElement instanceof i&&!yW.has(n.activeElement.type)||n.activeElement instanceof s||n.activeElement instanceof a&&n.activeElement.isContentEditable,!(t&&e==="keyboard"&&r instanceof o&&!gW[r.key])}function _W(t,e,r){v_(),z.useEffect(()=>{let n=(i,s)=>{wW(!!r?.isTextInput,i,s)&&t(W7())};return g_.add(n),()=>{g_.delete(n)}},e)}function bW(t){let{isDisabled:e,onFocus:r,onBlur:n,onFocusChange:i}=t;const s=z.useCallback(l=>{if(l.target===l.currentTarget)return n&&n(l),i&&i(!1),!0},[n,i]),a=U7(s),o=z.useCallback(l=>{const c=Ih(l.target),f=c?m_(c):m_();l.target===l.currentTarget&&f===j7(l.nativeEvent)&&(r&&r(l),i&&i(!0),a(l))},[i,r,a]);return{focusProps:{onFocus:!e&&(r||i||n)?o:void 0,onBlur:!e&&(n||i)?s:void 0}}}function EW(t){let{isDisabled:e,onBlurWithin:r,onFocusWithin:n,onFocusWithinChange:i}=t,s=z.useRef({isFocusWithin:!1}),{addGlobalListener:a,removeAllGlobalListeners:o}=B7(),l=z.useCallback(p=>{p.currentTarget.contains(p.target)&&s.current.isFocusWithin&&!p.currentTarget.contains(p.relatedTarget)&&(s.current.isFocusWithin=!1,o(),r&&r(p),i&&i(!1))},[r,i,s,o]),c=U7(l),f=z.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const g=Ih(p.target),m=m_(g);if(!s.current.isFocusWithin&&m===j7(p.nativeEvent)){n&&n(p),i&&i(!0),s.current.isFocusWithin=!0,c(p);let _=p.currentTarget;a(g,"focus",w=>{if(s.current.isFocusWithin&&!O7(_,w.target)){let b=new g.defaultView.FocusEvent("blur",{relatedTarget:w.target});pW(b,_);let k=V7(b);l(k)}},{capture:!0})}},[n,i,c,a,l]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:f,onBlur:l}}}let y_=!1,Vx=0;function SW(){y_=!0,setTimeout(()=>{y_=!1},50)}function YS(t){t.pointerType==="touch"&&SW()}function kW(){if(!(typeof document>"u"))return Vx===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",YS),Vx++,()=>{Vx--,!(Vx>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",YS)}}function TW(t){let{onHoverStart:e,onHoverChange:r,onHoverEnd:n,isDisabled:i}=t,[s,a]=z.useState(!1),o=z.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;z.useEffect(kW,[]);let{addGlobalListener:l,removeAllGlobalListeners:c}=B7(),{hoverProps:f,triggerHoverEnd:p}=z.useMemo(()=>{let g=(w,b)=>{if(o.pointerType=b,i||b==="touch"||o.isHovered||!w.currentTarget.contains(w.target))return;o.isHovered=!0;let k=w.currentTarget;o.target=k,l(Ih(w.target),"pointerover",R=>{o.isHovered&&o.target&&!O7(o.target,R.target)&&m(R,R.pointerType)},{capture:!0}),e&&e({type:"hoverstart",target:k,pointerType:b}),r&&r(!0),a(!0)},m=(w,b)=>{let k=o.target;o.pointerType="",o.target=null,!(b==="touch"||!o.isHovered||!k)&&(o.isHovered=!1,c(),n&&n({type:"hoverend",target:k,pointerType:b}),r&&r(!1),a(!1))},_={};return typeof PointerEvent<"u"&&(_.onPointerEnter=w=>{y_&&w.pointerType==="mouse"||g(w,w.pointerType)},_.onPointerLeave=w=>{!i&&w.currentTarget.contains(w.target)&&m(w,w.pointerType)}),{hoverProps:_,triggerHoverEnd:m}},[e,r,n,i,o,l,c]);return z.useEffect(()=>{i&&p({currentTarget:o.target},o.pointerType)},[i]),{hoverProps:f,isHovered:s}}function AW(t={}){let{autoFocus:e=!1,isTextInput:r,within:n}=t,i=z.useRef({isFocused:!1,isFocusVisible:e||W7()}),[s,a]=z.useState(!1),[o,l]=z.useState(()=>i.current.isFocused&&i.current.isFocusVisible),c=z.useCallback(()=>l(i.current.isFocused&&i.current.isFocusVisible),[]),f=z.useCallback(m=>{i.current.isFocused=m,a(m),c()},[c]);_W(m=>{i.current.isFocusVisible=m,c()},[],{isTextInput:r});let{focusProps:p}=bW({isDisabled:n,onFocusChange:f}),{focusWithinProps:g}=EW({isDisabled:!n,onFocusWithinChange:f});return{isFocused:s,isFocusVisible:o,focusProps:n?g:p}}var NW=Object.defineProperty,CW=(t,e,r)=>e in t?NW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bw=(t,e,r)=>(CW(t,typeof e!="symbol"?e+"":e,r),r);let IW=class{constructor(){Bw(this,"current",this.detect()),Bw(this,"handoffState","pending"),Bw(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Qc=new IW;function tm(t){var e,r;return Qc.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(r=(e=t.current)==null?void 0:e.ownerDocument)!=null?r:document:null:document}function G7(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Ml(){let t=[],e={addEventListener(r,n,i,s){return r.addEventListener(n,i,s),e.add(()=>r.removeEventListener(n,i,s))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return e.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return e.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return G7(()=>{n.current&&r[0]()}),e.add(()=>{n.current=!1})},style(r,n,i){let s=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:i}),this.add(()=>{Object.assign(r.style,{[n]:s})})},group(r){let n=Ml();return r(n),this.add(()=>n.dispose())},add(r){return t.includes(r)||t.push(r),()=>{let n=t.indexOf(r);if(n>=0)for(let i of t.splice(n,1))i()}},dispose(){for(let r of t.splice(0))r()}};return e}function uy(){let[t]=z.useState(Ml);return z.useEffect(()=>()=>t.dispose(),[t]),t}let Ps=(t,e)=>{Qc.isServer?z.useEffect(t,e):z.useLayoutEffect(t,e)};function Fg(t){let e=z.useRef(t);return Ps(()=>{e.current=t},[t]),e}let Ln=function(t){let e=Fg(t);return oa.useCallback((...r)=>e.current(...r),[e])};function PW(t){let e=t.width/2,r=t.height/2;return{top:t.clientY-r,right:t.clientX+e,bottom:t.clientY+r,left:t.clientX-e}}function RW(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function FW({disabled:t=!1}={}){let e=z.useRef(null),[r,n]=z.useState(!1),i=uy(),s=Ln(()=>{e.current=null,n(!1),i.dispose()}),a=Ln(o=>{if(i.dispose(),e.current===null){e.current=o.currentTarget,n(!0);{let l=tm(o.currentTarget);i.addEventListener(l,"pointerup",s,!1),i.addEventListener(l,"pointermove",c=>{if(e.current){let f=PW(c);n(RW(f,e.current.getBoundingClientRect()))}},!1),i.addEventListener(l,"pointercancel",s,!1)}}});return{pressed:r,pressProps:t?{}:{onPointerDown:a,onPointerUp:s,onClick:s}}}let LW=z.createContext(void 0);function K7(){return z.useContext(LW)}function QS(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function rm(t,e,...r){if(t in e){let i=e[t];return typeof i=="function"?i(...r):i}let n=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,rm),n}var w_=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(w_||{}),DW=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(DW||{});function Bl(){let t=jW();return z.useCallback(e=>OW({mergeRefs:t,...e}),[t])}function OW({ourProps:t,theirProps:e,slot:r,defaultTag:n,features:i,visible:s=!0,name:a,mergeRefs:o}){o=o??MW;let l=X7(e,t);if(s)return Ux(l,r,n,a,o);let c=i??0;if(c&2){let{static:f=!1,...p}=l;if(f)return Ux(p,r,n,a,o)}if(c&1){let{unmount:f=!0,...p}=l;return rm(f?0:1,{0(){return null},1(){return Ux({...p,hidden:!0,style:{display:"none"}},r,n,a,o)}})}return Ux(l,r,n,a,o)}function Ux(t,e={},r,n,i){let{as:s=r,children:a,refName:o="ref",...l}=Vw(t,["unmount","static"]),c=t.ref!==void 0?{[o]:t.ref}:{},f=typeof a=="function"?a(e):a;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let p={};if(e){let g=!1,m=[];for(let[_,w]of Object.entries(e))typeof w=="boolean"&&(g=!0),w===!0&&m.push(_.replace(/([A-Z])/g,b=>`-${b.toLowerCase()}`));if(g){p["data-headlessui-state"]=m.join(" ");for(let _ of m)p[`data-${_}`]=""}}if(s===z.Fragment&&(Object.keys(L0(l)).length>0||Object.keys(L0(p)).length>0))if(!z.isValidElement(f)||Array.isArray(f)&&f.length>1){if(Object.keys(L0(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(L0(l)).concat(Object.keys(L0(p))).map(g=>`  - ${g}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(g=>`  - ${g}`).join(`
`)].join(`
`))}else{let g=f.props,m=g?.className,_=typeof m=="function"?(...k)=>QS(m(...k),l.className):QS(m,l.className),w=_?{className:_}:{},b=X7(f.props,L0(Vw(l,["ref"])));for(let k in p)k in b&&delete p[k];return z.cloneElement(f,Object.assign({},b,p,c,{ref:i(BW(f),c.ref)},w))}return z.createElement(s,Object.assign({},Vw(l,["ref"]),s!==z.Fragment&&c,s!==z.Fragment&&p),f)}function jW(){let t=z.useRef([]),e=z.useCallback(r=>{for(let n of t.current)n!=null&&(typeof n=="function"?n(r):n.current=r)},[]);return(...r)=>{if(!r.every(n=>n==null))return t.current=r,e}}function MW(...t){return t.every(e=>e==null)?void 0:e=>{for(let r of t)r!=null&&(typeof r=="function"?r(e):r.current=e)}}function X7(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let i in n)i.startsWith("on")&&typeof n[i]=="function"?(r[i]!=null||(r[i]=[]),r[i].push(n[i])):e[i]=n[i];if(e.disabled||e["aria-disabled"])for(let n in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(r[n]=[i=>{var s;return(s=i?.preventDefault)==null?void 0:s.call(i)}]);for(let n in r)Object.assign(e,{[n](i,...s){let a=r[n];for(let o of a){if((i instanceof Event||i?.nativeEvent instanceof Event)&&i.defaultPrevented)return;o(i,...s)}}});return e}function Y7(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let i in n)i.startsWith("on")&&typeof n[i]=="function"?(r[i]!=null||(r[i]=[]),r[i].push(n[i])):e[i]=n[i];for(let n in r)Object.assign(e,{[n](...i){let s=r[n];for(let a of s)a?.(...i)}});return e}function Vl(t){var e;return Object.assign(z.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function L0(t){let e=Object.assign({},t);for(let r in e)e[r]===void 0&&delete e[r];return e}function Vw(t,e=[]){let r=Object.assign({},t);for(let n of e)n in r&&delete r[n];return r}function BW(t){return oa.version.split(".")[0]>="19"?t.props.ref:t.ref}let VW=z.createContext(void 0);function UW(){return z.useContext(VW)}function Cb(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function fy(t){return Cb(t)&&"tagName"in t}function Ju(t){return fy(t)&&"accessKey"in t}function hd(t){return fy(t)&&"tabIndex"in t}function zW(t){return fy(t)&&"style"in t}function $W(t){return Ju(t)&&t.nodeName==="IFRAME"}function Q7(t){return Ju(t)&&t.nodeName==="INPUT"}function JS(t){return Ju(t)&&t.nodeName==="LABEL"}function qW(t){return Ju(t)&&t.nodeName==="FIELDSET"}function J7(t){return Ju(t)&&t.nodeName==="LEGEND"}function HW(t){return fy(t)?t.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}function WW(t){let e=t.parentElement,r=null;for(;e&&!qW(e);)J7(e)&&(r=e),e=e.parentElement;let n=e?.getAttribute("disabled")==="";return n&&GW(r)?!1:n}function GW(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(J7(e))return!1;e=e.previousElementSibling}return!0}let Z7=Symbol();function KW(t,e=!0){return Object.assign(t,{[Z7]:e})}function Zu(...t){let e=z.useRef(t);z.useEffect(()=>{e.current=t},[t]);let r=Ln(n=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(n):i.current=n)});return t.every(n=>n==null||n?.[Z7])?void 0:r}let Ib=z.createContext(null);Ib.displayName="DescriptionContext";function eP(){let t=z.useContext(Ib);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,eP),e}return t}function XW(){let[t,e]=z.useState([]);return[t.length>0?t.join(" "):void 0,z.useMemo(()=>function(r){let n=Ln(s=>(e(a=>[...a,s]),()=>e(a=>{let o=a.slice(),l=o.indexOf(s);return l!==-1&&o.splice(l,1),o}))),i=z.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props,value:r.value}),[n,r.slot,r.name,r.props,r.value]);return oa.createElement(Ib.Provider,{value:i},r.children)},[e])]}let YW="p";function QW(t,e){let r=z.useId(),n=K7(),{id:i=`headlessui-description-${r}`,...s}=t,a=eP(),o=Zu(e);Ps(()=>a.register(i),[i,a.register]);let l=n||!1,c=z.useMemo(()=>({...a.slot,disabled:l}),[a.slot,l]),f={ref:o,...a.props,id:i};return Bl()({ourProps:f,theirProps:s,slot:c,defaultTag:YW,name:a.name||"Description"})}let JW=Vl(QW);Object.assign(JW,{});var _a=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(_a||{});let hy=z.createContext(null);hy.displayName="LabelContext";function Pb(){let t=z.useContext(hy);if(t===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Pb),e}return t}function ZW(t){var e,r,n;let i=(r=(e=z.useContext(hy))==null?void 0:e.value)!=null?r:void 0;return((n=void 0)!=null?n:0)>0?[i,...t].filter(Boolean).join(" "):i}function tP({inherit:t=!1}={}){let e=ZW(),[r,n]=z.useState([]),i=t?[e,...r].filter(Boolean):r;return[i.length>0?i.join(" "):void 0,z.useMemo(()=>function(s){let a=Ln(l=>(n(c=>[...c,l]),()=>n(c=>{let f=c.slice(),p=f.indexOf(l);return p!==-1&&f.splice(p,1),f}))),o=z.useMemo(()=>({register:a,slot:s.slot,name:s.name,props:s.props,value:s.value}),[a,s.slot,s.name,s.props,s.value]);return oa.createElement(hy.Provider,{value:o},s.children)},[n])]}let eG="label";function tG(t,e){var r;let n=z.useId(),i=Pb(),s=UW(),a=K7(),{id:o=`headlessui-label-${n}`,htmlFor:l=s??((r=i.props)==null?void 0:r.htmlFor),passive:c=!1,...f}=t,p=Zu(e);Ps(()=>i.register(o),[o,i.register]);let g=Ln(b=>{let k=b.currentTarget;if(!(b.target!==b.currentTarget&&HW(b.target))&&(JS(k)&&b.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(b),JS(k))){let R=document.getElementById(k.htmlFor);if(R){let C=R.getAttribute("disabled");if(C==="true"||C==="")return;let j=R.getAttribute("aria-disabled");if(j==="true"||j==="")return;(Q7(R)&&(R.type==="file"||R.type==="radio"||R.type==="checkbox")||R.role==="radio"||R.role==="checkbox"||R.role==="switch")&&R.click(),R.focus({preventScroll:!0})}}}),m=a||!1,_=z.useMemo(()=>({...i.slot,disabled:m}),[i.slot,m]),w={ref:p,...i.props,id:o,htmlFor:l,onClick:g};return c&&("onClick"in w&&(delete w.htmlFor,delete w.onClick),"onClick"in f&&delete f.onClick),Bl()({ourProps:w,theirProps:f,slot:_,defaultTag:l?eG:"div",name:i.name||"Label"})}let rG=Vl(tG);Object.assign(rG,{});function nG(t){if(t===null)return{width:0,height:0};let{width:e,height:r}=t.getBoundingClientRect();return{width:e,height:r}}function iG(t,e=!1){let[r,n]=z.useReducer(()=>({}),{}),i=z.useMemo(()=>nG(t),[t,r]);return Ps(()=>{if(!t)return;let s=new ResizeObserver(n);return s.observe(t),()=>{s.disconnect()}},[t]),e?{width:`${i.width}px`,height:`${i.height}px`}:i}let rP=class extends Map{constructor(e){super(),this.factory=e}get(e){let r=super.get(e);return r===void 0&&(r=this.factory(e),this.set(e,r)),r}};var sG=Object.defineProperty,aG=(t,e,r)=>e in t?sG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oG=(t,e,r)=>(aG(t,e+"",r),r),nP=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Tl=(t,e,r)=>(nP(t,e,"read from private field"),r?r.call(t):e.get(t)),Uw=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},ZS=(t,e,r,n)=>(nP(t,e,"write to private field"),e.set(t,r),r),Lc,n1,i1;let iP=class{constructor(e){Uw(this,Lc,{}),Uw(this,n1,new rP(()=>new Set)),Uw(this,i1,new Set),oG(this,"disposables",Ml()),ZS(this,Lc,e),Qc.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Tl(this,Lc)}subscribe(e,r){if(Qc.isServer)return()=>{};let n={selector:e,callback:r,current:e(Tl(this,Lc))};return Tl(this,i1).add(n),this.disposables.add(()=>{Tl(this,i1).delete(n)})}on(e,r){return Qc.isServer?()=>{}:(Tl(this,n1).get(e).add(r),this.disposables.add(()=>{Tl(this,n1).get(e).delete(r)}))}send(e){let r=this.reduce(Tl(this,Lc),e);if(r!==Tl(this,Lc)){ZS(this,Lc,r);for(let n of Tl(this,i1)){let i=n.selector(Tl(this,Lc));sP(n.current,i)||(n.current=i,n.callback(i))}for(let n of Tl(this,n1).get(e.type))n(Tl(this,Lc),e)}}};Lc=new WeakMap,n1=new WeakMap,i1=new WeakMap;function sP(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null?!1:Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:zw(t[Symbol.iterator](),e[Symbol.iterator]()):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?t.size!==e.size?!1:zw(t.entries(),e.entries()):ek(t)&&ek(e)?zw(Object.entries(t)[Symbol.iterator](),Object.entries(e)[Symbol.iterator]()):!1}function zw(t,e){do{let r=t.next(),n=e.next();if(r.done&&n.done)return!0;if(r.done||n.done||!Object.is(r.value,n.value))return!1}while(!0)}function ek(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||Object.getPrototypeOf(e)===null}function tk(t){let[e,r]=t(),n=Ml();return(...i)=>{e(...i),n.dispose(),n.microTask(r)}}var lG=Object.defineProperty,cG=(t,e,r)=>e in t?lG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,rk=(t,e,r)=>(cG(t,typeof e!="symbol"?e+"":e,r),r),aP=(t=>(t[t.Push=0]="Push",t[t.Pop=1]="Pop",t))(aP||{});let uG={0(t,e){let r=e.id,n=t.stack,i=t.stack.indexOf(r);if(i!==-1){let s=t.stack.slice();return s.splice(i,1),s.push(r),n=s,{...t,stack:n}}return{...t,stack:[...t.stack,r]}},1(t,e){let r=e.id,n=t.stack.indexOf(r);if(n===-1)return t;let i=t.stack.slice();return i.splice(n,1),{...t,stack:i}}},fG=class oP extends iP{constructor(){super(...arguments),rk(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),rk(this,"selectors",{isTop:(e,r)=>e.stack[e.stack.length-1]===r,inStack:(e,r)=>e.stack.includes(r)})}static new(){return new oP({stack:[]})}reduce(e,r){return rm(r.type,uG,e,r)}};const Rb=new rP(()=>fG.new());var $w={exports:{}},qw={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nk;function hG(){if(nk)return qw;nk=1;var t=Pv();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var r=typeof Object.is=="function"?Object.is:e,n=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,a=t.useMemo,o=t.useDebugValue;return qw.useSyncExternalStoreWithSelector=function(l,c,f,p,g){var m=i(null);if(m.current===null){var _={hasValue:!1,value:null};m.current=_}else _=m.current;m=a(function(){function b(X){if(!k){if(k=!0,R=X,X=p(X),g!==void 0&&_.hasValue){var K=_.value;if(g(K,X))return C=K}return C=X}if(K=C,r(R,X))return K;var P=p(X);return g!==void 0&&g(K,P)?(R=X,K):(R=X,C=P)}var k=!1,R,C,j=f===void 0?null:f;return[function(){return b(c())},j===null?void 0:function(){return b(j())}]},[c,f,p,g]);var w=n(l,m[0],m[1]);return s(function(){_.hasValue=!0,_.value=w},[w]),o(w),w},qw}var ik;function dG(){return ik||(ik=1,$w.exports=hG()),$w.exports}var pG=dG();function $c(t,e,r=sP){return pG.useSyncExternalStoreWithSelector(Ln(n=>t.subscribe(mG,n)),Ln(()=>t.state),Ln(()=>t.state),Ln(e),r)}function mG(t){return t}function lP(t,e){let r=z.useId(),n=Rb.get(e),[i,s]=$c(n,z.useCallback(a=>[n.selectors.isTop(a,r),n.selectors.inStack(a,r)],[n,r]));return Ps(()=>{if(t)return n.actions.push(r),()=>n.actions.pop(r)},[n,t,r]),t?s?i:!0:!1}let __=new Map,x1=new Map;function sk(t){var e;let r=(e=x1.get(t))!=null?e:0;return x1.set(t,r+1),r!==0?()=>ak(t):(__.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>ak(t))}function ak(t){var e;let r=(e=x1.get(t))!=null?e:1;if(r===1?x1.delete(t):x1.set(t,r-1),r!==1)return;let n=__.get(t);n&&(n["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",n["aria-hidden"]),t.inert=n.inert,__.delete(t))}function gG(t,{allowed:e,disallowed:r}={}){let n=lP(t,"inert-others");Ps(()=>{var i,s;if(!n)return;let a=Ml();for(let l of(i=r?.())!=null?i:[])l&&a.add(sk(l));let o=(s=e?.())!=null?s:[];for(let l of o){if(!l)continue;let c=tm(l);if(!c)continue;let f=l.parentElement;for(;f&&f!==c.body;){for(let p of f.children)o.some(g=>p.contains(g))||a.add(sk(p));f=f.parentElement}}return a.dispose},[n,e,r])}function xG(t,e,r){let n=Fg(i=>{let s=i.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&r()});z.useEffect(()=>{if(!t)return;let i=e===null?null:Ju(e)?e:e.current;if(!i)return;let s=Ml();if(typeof ResizeObserver<"u"){let a=new ResizeObserver(()=>n.current(i));a.observe(i),s.add(()=>a.disconnect())}if(typeof IntersectionObserver<"u"){let a=new IntersectionObserver(()=>n.current(i));a.observe(i),s.add(()=>a.disconnect())}return()=>s.dispose()},[e,n,t])}let b_=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),vG=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var E_=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(E_||{}),yG=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(yG||{}),wG=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(wG||{});function cP(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(b_)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}function _G(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(vG)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var Fb=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(Fb||{});function Lb(t,e=0){var r;return t===((r=tm(t))==null?void 0:r.body)?!1:rm(e,{0(){return t.matches(b_)},1(){let n=t;for(;n!==null;){if(n.matches(b_))return!0;n=n.parentElement}return!1}})}function uP(t){let e=tm(t);Ml().nextFrame(()=>{e&&hd(e.activeElement)&&!Lb(e.activeElement,0)&&EG(t)})}var bG=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(bG||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function EG(t){t?.focus({preventScroll:!0})}let SG=["textarea","input"].join(",");function kG(t){var e,r;return(r=(e=t?.matches)==null?void 0:e.call(t,SG))!=null?r:!1}function fP(t,e=r=>r){return t.slice().sort((r,n)=>{let i=e(r),s=e(n);if(i===null||s===null)return 0;let a=i.compareDocumentPosition(s);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function TG(t,e){return AG(cP(),e,{relativeTo:t})}function AG(t,e,{sorted:r=!0,relativeTo:n=null,skipElements:i=[]}={}){let s=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,a=Array.isArray(t)?r?fP(t):t:e&64?_G(t):cP(t);i.length>0&&a.length>1&&(a=a.filter(m=>!i.some(_=>_!=null&&"current"in _?_?.current===m:_===m))),n=n??s.activeElement;let o=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,a.indexOf(n))-1;if(e&4)return Math.max(0,a.indexOf(n))+1;if(e&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=e&32?{preventScroll:!0}:{},f=0,p=a.length,g;do{if(f>=p||f+p<=0)return 0;let m=l+f;if(e&16)m=(m+p)%p;else{if(m<0)return 3;if(m>=p)return 1}g=a[m],g?.focus(c),f+=o}while(g!==s.activeElement);return e&6&&kG(g)&&g.select(),2}function hP(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function NG(){return/Android/gi.test(window.navigator.userAgent)}function ok(){return hP()||NG()}function Y0(t,e,r,n){let i=Fg(r);z.useEffect(()=>{if(!t)return;function s(a){i.current(a)}return document.addEventListener(e,s,n),()=>document.removeEventListener(e,s,n)},[t,e,n])}function CG(t,e,r,n){let i=Fg(r);z.useEffect(()=>{if(!t)return;function s(a){i.current(a)}return window.addEventListener(e,s,n),()=>window.removeEventListener(e,s,n)},[t,e,n])}const lk=30;function IG(t,e,r){let n=Fg(r),i=z.useCallback(function(o,l){if(o.defaultPrevented)return;let c=l(o);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let f=(function p(g){return typeof g=="function"?p(g()):Array.isArray(g)||g instanceof Set?g:[g]})(e);for(let p of f)if(p!==null&&(p.contains(c)||o.composed&&o.composedPath().includes(p)))return;return!Lb(c,Fb.Loose)&&c.tabIndex!==-1&&o.preventDefault(),n.current(o,c)},[n,e]),s=z.useRef(null);Y0(t,"pointerdown",o=>{var l,c;ok()||(s.current=((c=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:c[0])||o.target)},!0),Y0(t,"pointerup",o=>{if(ok()||!s.current)return;let l=s.current;return s.current=null,i(o,()=>l)},!0);let a=z.useRef({x:0,y:0});Y0(t,"touchstart",o=>{a.current.x=o.touches[0].clientX,a.current.y=o.touches[0].clientY},!0),Y0(t,"touchend",o=>{let l={x:o.changedTouches[0].clientX,y:o.changedTouches[0].clientY};if(!(Math.abs(l.x-a.current.x)>=lk||Math.abs(l.y-a.current.y)>=lk))return i(o,()=>hd(o.target)?o.target:null)},!0),CG(t,"blur",o=>i(o,()=>$W(window.document.activeElement)?window.document.activeElement:null),!0)}function S_(...t){return z.useMemo(()=>tm(...t),[...t])}var PG=(t=>(t[t.Ignore=0]="Ignore",t[t.Select=1]="Select",t[t.Close=2]="Close",t))(PG||{});const zx={Ignore:{kind:0},Select:t=>({kind:1,target:t}),Close:{kind:2}},RG=200,ck=5;function FG(t,{trigger:e,action:r,close:n,select:i}){let s=z.useRef(null),a=z.useRef(null),o=z.useRef(null);Y0(t&&e!==null,"pointerdown",l=>{Cb(l?.target)&&e!=null&&e.contains(l.target)&&(a.current=l.x,o.current=l.y,s.current=l.timeStamp)}),Y0(t&&e!==null,"pointerup",l=>{var c,f;let p=s.current;if(p===null||(s.current=null,!hd(l.target))||Math.abs(l.x-((c=a.current)!=null?c:l.x))<ck&&Math.abs(l.y-((f=o.current)!=null?f:l.y))<ck)return;let g=r(l);switch(g.kind){case 0:return;case 1:{l.timeStamp-p>RG&&(i(g.target),n());break}case 2:{n();break}}},{capture:!0})}function LG(t,e){return z.useMemo(()=>{var r;if(t.type)return t.type;let n=(r=t.as)!=null?r:"button";if(typeof n=="string"&&n.toLowerCase()==="button"||e?.tagName==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}function DG(t){return z.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}function OG(t,e){let r=t(),n=new Set;return{getSnapshot(){return r},subscribe(i){return n.add(i),()=>n.delete(i)},dispatch(i,...s){let a=e[i].call(r,...s);a&&(r=a,n.forEach(o=>o()))}}}function jG(){let t;return{before({doc:e}){var r;let n=e.documentElement,i=(r=e.defaultView)!=null?r:window;t=Math.max(0,i.innerWidth-n.clientWidth)},after({doc:e,d:r}){let n=e.documentElement,i=Math.max(0,n.clientWidth-n.offsetWidth),s=Math.max(0,t-i);r.style(n,"paddingRight",`${s}px`)}}}function MG(){return hP()?{before({doc:t,d:e,meta:r}){function n(i){return r.containers.flatMap(s=>s()).some(s=>s.contains(i))}e.microTask(()=>{var i;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let o=Ml();o.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>o.dispose()))}let s=(i=window.scrollY)!=null?i:window.pageYOffset,a=null;e.addEventListener(t,"click",o=>{if(hd(o.target))try{let l=o.target.closest("a");if(!l)return;let{hash:c}=new URL(l.href),f=t.querySelector(c);hd(f)&&!n(f)&&(a=f)}catch{}},!0),e.addEventListener(t,"touchstart",o=>{if(hd(o.target)&&zW(o.target))if(n(o.target)){let l=o.target;for(;l.parentElement&&n(l.parentElement);)l=l.parentElement;e.style(l,"overscrollBehavior","contain")}else e.style(o.target,"touchAction","none")}),e.addEventListener(t,"touchmove",o=>{if(hd(o.target)){if(Q7(o.target))return;if(n(o.target)){let l=o.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&o.preventDefault()}else o.preventDefault()}},{passive:!1}),e.add(()=>{var o;let l=(o=window.scrollY)!=null?o:window.pageYOffset;s!==l&&window.scrollTo(0,s),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function BG(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function VG(t){let e={};for(let r of t)Object.assign(e,r(e));return e}let dd=OG(()=>new Map,{PUSH(t,e){var r;let n=(r=this.get(t))!=null?r:{doc:t,count:0,d:Ml(),meta:new Set};return n.count++,n.meta.add(e),this.set(t,n),this},POP(t,e){let r=this.get(t);return r&&(r.count--,r.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:r}){let n={doc:t,d:e,meta:VG(r)},i=[MG(),jG(),BG()];i.forEach(({before:s})=>s?.(n)),i.forEach(({after:s})=>s?.(n))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});dd.subscribe(()=>{let t=dd.getSnapshot(),e=new Map;for(let[r]of t)e.set(r,r.documentElement.style.overflow);for(let r of t.values()){let n=e.get(r.doc)==="hidden",i=r.count!==0;(i&&!n||!i&&n)&&dd.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&dd.dispatch("TEARDOWN",r)}});function UG(t,e,r=()=>({containers:[]})){let n=DG(dd),i=e?n.get(e):void 0,s=i?i.count>0:!1;return Ps(()=>{if(!(!e||!t))return dd.dispatch("PUSH",e,r),()=>dd.dispatch("POP",e,r)},[t,e]),s}function zG(t,e,r=()=>[document.body]){let n=lP(t,"scroll-lock");UG(n,e,i=>{var s;return{containers:[...(s=i.containers)!=null?s:[],r]}})}function uk(t){return[t.screenX,t.screenY]}function $G(){let t=z.useRef([-1,-1]);return{wasMoved(e){let r=uk(e);return t.current[0]===r[0]&&t.current[1]===r[1]?!1:(t.current=r,!0)},update(e){t.current=uk(e)}}}function qG(t=0){let[e,r]=z.useState(t),n=z.useCallback(l=>r(l),[e]),i=z.useCallback(l=>r(c=>c|l),[e]),s=z.useCallback(l=>(e&l)===l,[e]),a=z.useCallback(l=>r(c=>c&~l),[r]),o=z.useCallback(l=>r(c=>c^l),[r]);return{flags:e,setFlag:n,addFlag:i,hasFlag:s,removeFlag:a,toggleFlag:o}}var HG={},fk,hk;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((fk=process==null?void 0:HG)==null?void 0:fk.NODE_ENV)==="test"&&typeof((hk=Element?.prototype)==null?void 0:hk.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var WG=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(WG||{});function GG(t){let e={};for(let r in t)t[r]===!0&&(e[`data-${r}`]="");return e}function KG(t,e,r,n){let[i,s]=z.useState(r),{hasFlag:a,addFlag:o,removeFlag:l}=qG(t&&i?3:0),c=z.useRef(!1),f=z.useRef(!1),p=uy();return Ps(()=>{var g;if(t){if(r&&s(!0),!e){r&&o(3);return}return(g=void 0)==null||g.call(n,r),XG(e,{inFlight:c,prepare(){f.current?f.current=!1:f.current=c.current,c.current=!0,!f.current&&(r?(o(3),l(4)):(o(4),l(2)))},run(){f.current?r?(l(3),o(4)):(l(4),o(3)):r?l(1):o(1)},done(){var m;f.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(c.current=!1,l(7),r||s(!1),(m=void 0)==null||m.call(n,r))}})}},[t,r,e,p]),t?[i,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function XG(t,{prepare:e,run:r,done:n,inFlight:i}){let s=Ml();return QG(t,{prepare:e,inFlight:i}),s.nextFrame(()=>{r(),s.requestAnimationFrame(()=>{s.add(YG(t,n))})}),s.dispose}function YG(t,e){var r,n;let i=Ml();if(!t)return i.dispose;let s=!1;i.add(()=>{s=!0});let a=(n=(r=t.getAnimations)==null?void 0:r.call(t).filter(o=>o instanceof CSSTransition))!=null?n:[];return a.length===0?(e(),i.dispose):(Promise.allSettled(a.map(o=>o.finished)).then(()=>{s||e()}),i.dispose)}function QG(t,{inFlight:e,prepare:r}){if(e!=null&&e.current){r();return}let n=t.style.transition;t.style.transition="none",r(),t.offsetHeight,t.style.transition=n}function JG(t,{container:e,accept:r,walk:n}){let i=z.useRef(r),s=z.useRef(n);z.useEffect(()=>{i.current=r,s.current=n},[r,n]),Ps(()=>{if(!e||!t)return;let a=tm(e);if(!a)return;let o=i.current,l=s.current,c=Object.assign(p=>o(p),{acceptNode:o}),f=a.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,c,!1);for(;f.nextNode();)l(f.currentNode)},[e,t,i,s])}function dy(){return typeof window<"u"}function nm(t){return dP(t)?(t.nodeName||"").toLowerCase():"#document"}function ol(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function au(t){var e;return(e=(dP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function dP(t){return dy()?t instanceof Node||t instanceof ol(t).Node:!1}function yo(t){return dy()?t instanceof Element||t instanceof ol(t).Element:!1}function tu(t){return dy()?t instanceof HTMLElement||t instanceof ol(t).HTMLElement:!1}function dk(t){return!dy()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ol(t).ShadowRoot}const ZG=new Set(["inline","contents"]);function Lg(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=dc(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!ZG.has(i)}const eK=new Set(["table","td","th"]);function tK(t){return eK.has(nm(t))}const rK=[":popover-open",":modal"];function py(t){return rK.some(e=>{try{return t.matches(e)}catch{return!1}})}const nK=["transform","translate","scale","rotate","perspective"],iK=["transform","translate","scale","rotate","perspective","filter"],sK=["paint","layout","strict","content"];function Db(t){const e=Ob(),r=yo(t)?dc(t):t;return nK.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||iK.some(n=>(r.willChange||"").includes(n))||sK.some(n=>(r.contain||"").includes(n))}function aK(t){let e=ph(t);for(;tu(e)&&!Dp(e);){if(Db(e))return e;if(py(e))return null;e=ph(e)}return null}function Ob(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const oK=new Set(["html","body","#document"]);function Dp(t){return oK.has(nm(t))}function dc(t){return ol(t).getComputedStyle(t)}function my(t){return yo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ph(t){if(nm(t)==="html")return t;const e=t.assignedSlot||t.parentNode||dk(t)&&t.host||au(t);return dk(e)?e.host:e}function pP(t){const e=ph(t);return Dp(e)?t.ownerDocument?t.ownerDocument.body:t.body:tu(e)&&Lg(e)?e:pP(e)}function H1(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=pP(t),s=i===((n=t.ownerDocument)==null?void 0:n.body),a=ol(i);if(s){const o=k_(a);return e.concat(a,a.visualViewport||[],Lg(i)?i:[],o&&r?H1(o):[])}return e.concat(i,H1(i,[],r))}function k_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function lK(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:r,version:n}=e;return r+"/"+n}).join(" "):navigator.userAgent}const jd=Math.min,ro=Math.max,W1=Math.round,$x=Math.floor,Jc=t=>({x:t,y:t}),cK={left:"right",right:"left",bottom:"top",top:"bottom"},uK={start:"end",end:"start"};function pk(t,e,r){return ro(t,jd(e,r))}function im(t,e){return typeof t=="function"?t(e):t}function mh(t){return t.split("-")[0]}function Dg(t){return t.split("-")[1]}function mP(t){return t==="x"?"y":"x"}function gP(t){return t==="y"?"height":"width"}const fK=new Set(["top","bottom"]);function Lu(t){return fK.has(mh(t))?"y":"x"}function xP(t){return mP(Lu(t))}function hK(t,e,r){r===void 0&&(r=!1);const n=Dg(t),i=xP(t),s=gP(i);let a=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=lv(a)),[a,lv(a)]}function dK(t){const e=lv(t);return[T_(t),e,T_(e)]}function T_(t){return t.replace(/start|end/g,e=>uK[e])}const mk=["left","right"],gk=["right","left"],pK=["top","bottom"],mK=["bottom","top"];function gK(t,e,r){switch(t){case"top":case"bottom":return r?e?gk:mk:e?mk:gk;case"left":case"right":return e?pK:mK;default:return[]}}function xK(t,e,r,n){const i=Dg(t);let s=gK(mh(t),r==="start",n);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(T_)))),s}function lv(t){return t.replace(/left|right|bottom|top/g,e=>cK[e])}function vK(t){return{top:0,right:0,bottom:0,left:0,...t}}function yK(t){return typeof t!="number"?vK(t):{top:t,right:t,bottom:t,left:t}}function cv(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function xk(t,e,r){let{reference:n,floating:i}=t;const s=Lu(e),a=xP(e),o=gP(a),l=mh(e),c=s==="y",f=n.x+n.width/2-i.width/2,p=n.y+n.height/2-i.height/2,g=n[o]/2-i[o]/2;let m;switch(l){case"top":m={x:f,y:n.y-i.height};break;case"bottom":m={x:f,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:p};break;case"left":m={x:n.x-i.width,y:p};break;default:m={x:n.x,y:n.y}}switch(Dg(e)){case"start":m[a]-=g*(r&&c?-1:1);break;case"end":m[a]+=g*(r&&c?-1:1);break}return m}const wK=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:a}=r,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:f,y:p}=xk(c,n,l),g=n,m={},_=0;for(let w=0;w<o.length;w++){const{name:b,fn:k}=o[w],{x:R,y:C,data:j,reset:X}=await k({x:f,y:p,initialPlacement:n,placement:g,strategy:i,middlewareData:m,rects:c,platform:a,elements:{reference:t,floating:e}});f=R??f,p=C??p,m={...m,[b]:{...m[b],...j}},X&&_<=50&&(_++,typeof X=="object"&&(X.placement&&(g=X.placement),X.rects&&(c=X.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):X.rects),{x:f,y:p}=xk(c,g,l)),w=-1)}return{x:f,y:p,placement:g,strategy:i,middlewareData:m}};async function gy(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:a,elements:o,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:g=!1,padding:m=0}=im(e,t),_=yK(m),b=o[g?p==="floating"?"reference":"floating":p],k=cv(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(b)))==null||r?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:f,strategy:l})),R=p==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),j=await(s.isElement==null?void 0:s.isElement(C))?await(s.getScale==null?void 0:s.getScale(C))||{x:1,y:1}:{x:1,y:1},X=cv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:R,offsetParent:C,strategy:l}):R);return{top:(k.top-X.top+_.top)/j.y,bottom:(X.bottom-k.bottom+_.bottom)/j.y,left:(k.left-X.left+_.left)/j.x,right:(X.right-k.right+_.right)/j.x}}const _K=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:w=!0,...b}=im(t,e);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const k=mh(i),R=Lu(o),C=mh(o)===o,j=await(l.isRTL==null?void 0:l.isRTL(c.floating)),X=g||(C||!w?[lv(o)]:dK(o)),K=_!=="none";!g&&K&&X.push(...xK(o,w,_,j));const P=[o,...X],A=await gy(e,b),T=[];let O=((n=s.flip)==null?void 0:n.overflows)||[];if(f&&T.push(A[k]),p){const re=hK(i,a,j);T.push(A[re[0]],A[re[1]])}if(O=[...O,{placement:i,overflows:T}],!T.every(re=>re<=0)){var I,D;const re=(((I=s.flip)==null?void 0:I.index)||0)+1,_e=P[re];if(_e&&(!(p==="alignment"?R!==Lu(_e):!1)||O.every(ce=>Lu(ce.placement)===R?ce.overflows[0]>0:!0)))return{data:{index:re,overflows:O},reset:{placement:_e}};let Ce=(D=O.filter(we=>we.overflows[0]<=0).sort((we,ce)=>we.overflows[1]-ce.overflows[1])[0])==null?void 0:D.placement;if(!Ce)switch(m){case"bestFit":{var B;const we=(B=O.filter(ce=>{if(K){const H=Lu(ce.placement);return H===R||H==="y"}return!0}).map(ce=>[ce.placement,ce.overflows.filter(H=>H>0).reduce((H,te)=>H+te,0)]).sort((ce,H)=>ce[1]-H[1])[0])==null?void 0:B[0];we&&(Ce=we);break}case"initialPlacement":Ce=o;break}if(i!==Ce)return{reset:{placement:Ce}}}return{}}}},bK=new Set(["left","top"]);async function EK(t,e){const{placement:r,platform:n,elements:i}=t,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),a=mh(r),o=Dg(r),l=Lu(r)==="y",c=bK.has(a)?-1:1,f=s&&l?-1:1,p=im(e,t);let{mainAxis:g,crossAxis:m,alignmentAxis:_}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return o&&typeof _=="number"&&(m=o==="end"?_*-1:_),l?{x:m*f,y:g*c}:{x:g*c,y:m*f}}const SK=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:s,placement:a,middlewareData:o}=e,l=await EK(e,t);return a===((r=o.offset)==null?void 0:r.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:a}}}}},kK=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:b=>{let{x:k,y:R}=b;return{x:k,y:R}}},...l}=im(t,e),c={x:r,y:n},f=await gy(e,l),p=Lu(mh(i)),g=mP(p);let m=c[g],_=c[p];if(s){const b=g==="y"?"top":"left",k=g==="y"?"bottom":"right",R=m+f[b],C=m-f[k];m=pk(R,m,C)}if(a){const b=p==="y"?"top":"left",k=p==="y"?"bottom":"right",R=_+f[b],C=_-f[k];_=pk(R,_,C)}const w=o.fn({...e,[g]:m,[p]:_});return{...w,data:{x:w.x-r,y:w.y-n,enabled:{[g]:s,[p]:a}}}}}},TK=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:i,rects:s,platform:a,elements:o}=e,{apply:l=()=>{},...c}=im(t,e),f=await gy(e,c),p=mh(i),g=Dg(i),m=Lu(i)==="y",{width:_,height:w}=s.floating;let b,k;p==="top"||p==="bottom"?(b=p,k=g===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(k=p,b=g==="end"?"top":"bottom");const R=w-f.top-f.bottom,C=_-f.left-f.right,j=jd(w-f[b],R),X=jd(_-f[k],C),K=!e.middlewareData.shift;let P=j,A=X;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(A=C),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(P=R),K&&!g){const O=ro(f.left,0),I=ro(f.right,0),D=ro(f.top,0),B=ro(f.bottom,0);m?A=_-2*(O!==0||I!==0?O+I:ro(f.left,f.right)):P=w-2*(D!==0||B!==0?D+B:ro(f.top,f.bottom))}await l({...e,availableWidth:A,availableHeight:P});const T=await a.getDimensions(o.floating);return _!==T.width||w!==T.height?{reset:{rects:!0}}:{}}}};function vP(t){const e=dc(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=tu(t),s=i?t.offsetWidth:r,a=i?t.offsetHeight:n,o=W1(r)!==s||W1(n)!==a;return o&&(r=s,n=a),{width:r,height:n,$:o}}function jb(t){return yo(t)?t:t.contextElement}function op(t){const e=jb(t);if(!tu(e))return Jc(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:s}=vP(e);let a=(s?W1(r.width):r.width)/n,o=(s?W1(r.height):r.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const AK=Jc(0);function yP(t){const e=ol(t);return!Ob()||!e.visualViewport?AK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function NK(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==ol(t)?!1:e}function Md(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),s=jb(t);let a=Jc(1);e&&(n?yo(n)&&(a=op(n)):a=op(t));const o=NK(s,r,n)?yP(s):Jc(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,f=i.width/a.x,p=i.height/a.y;if(s){const g=ol(s),m=n&&yo(n)?ol(n):n;let _=g,w=k_(_);for(;w&&n&&m!==_;){const b=op(w),k=w.getBoundingClientRect(),R=dc(w),C=k.left+(w.clientLeft+parseFloat(R.paddingLeft))*b.x,j=k.top+(w.clientTop+parseFloat(R.paddingTop))*b.y;l*=b.x,c*=b.y,f*=b.x,p*=b.y,l+=C,c+=j,_=ol(w),w=k_(_)}}return cv({width:f,height:p,x:l,y:c})}function xy(t,e){const r=my(t).scrollLeft;return e?e.left+r:Md(au(t)).left+r}function wP(t,e){const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-xy(t,r),i=r.top+e.scrollTop;return{x:n,y:i}}function CK(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const s=i==="fixed",a=au(n),o=e?py(e.floating):!1;if(n===a||o&&s)return r;let l={scrollLeft:0,scrollTop:0},c=Jc(1);const f=Jc(0),p=tu(n);if((p||!p&&!s)&&((nm(n)!=="body"||Lg(a))&&(l=my(n)),tu(n))){const m=Md(n);c=op(n),f.x=m.x+n.clientLeft,f.y=m.y+n.clientTop}const g=a&&!p&&!s?wP(a,l):Jc(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+f.x+g.x,y:r.y*c.y-l.scrollTop*c.y+f.y+g.y}}function IK(t){return Array.from(t.getClientRects())}function PK(t){const e=au(t),r=my(t),n=t.ownerDocument.body,i=ro(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=ro(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+xy(t);const o=-r.scrollTop;return dc(n).direction==="rtl"&&(a+=ro(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:a,y:o}}const vk=25;function RK(t,e){const r=ol(t),n=au(t),i=r.visualViewport;let s=n.clientWidth,a=n.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const f=Ob();(!f||f&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}const c=xy(n);if(c<=0){const f=n.ownerDocument,p=f.body,g=getComputedStyle(p),m=f.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,_=Math.abs(n.clientWidth-p.clientWidth-m);_<=vk&&(s-=_)}else c<=vk&&(s+=c);return{width:s,height:a,x:o,y:l}}const FK=new Set(["absolute","fixed"]);function LK(t,e){const r=Md(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,s=tu(t)?op(t):Jc(1),a=t.clientWidth*s.x,o=t.clientHeight*s.y,l=i*s.x,c=n*s.y;return{width:a,height:o,x:l,y:c}}function yk(t,e,r){let n;if(e==="viewport")n=RK(t,r);else if(e==="document")n=PK(au(t));else if(yo(e))n=LK(e,r);else{const i=yP(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return cv(n)}function _P(t,e){const r=ph(t);return r===e||!yo(r)||Dp(r)?!1:dc(r).position==="fixed"||_P(r,e)}function DK(t,e){const r=e.get(t);if(r)return r;let n=H1(t,[],!1).filter(o=>yo(o)&&nm(o)!=="body"),i=null;const s=dc(t).position==="fixed";let a=s?ph(t):t;for(;yo(a)&&!Dp(a);){const o=dc(a),l=Db(a);!l&&o.position==="fixed"&&(i=null),(s?!l&&!i:!l&&o.position==="static"&&!!i&&FK.has(i.position)||Lg(a)&&!l&&_P(t,a))?n=n.filter(f=>f!==a):i=o,a=ph(a)}return e.set(t,n),n}function OK(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const a=[...r==="clippingAncestors"?py(e)?[]:DK(e,this._c):[].concat(r),n],o=a[0],l=a.reduce((c,f)=>{const p=yk(e,f,i);return c.top=ro(p.top,c.top),c.right=jd(p.right,c.right),c.bottom=jd(p.bottom,c.bottom),c.left=ro(p.left,c.left),c},yk(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function jK(t){const{width:e,height:r}=vP(t);return{width:e,height:r}}function MK(t,e,r){const n=tu(e),i=au(e),s=r==="fixed",a=Md(t,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=Jc(0);function c(){l.x=xy(i)}if(n||!n&&!s)if((nm(e)!=="body"||Lg(i))&&(o=my(e)),n){const m=Md(e,!0,s,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else i&&c();s&&!n&&i&&c();const f=i&&!n&&!s?wP(i,o):Jc(0),p=a.left+o.scrollLeft-l.x-f.x,g=a.top+o.scrollTop-l.y-f.y;return{x:p,y:g,width:a.width,height:a.height}}function Hw(t){return dc(t).position==="static"}function wk(t,e){if(!tu(t)||dc(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return au(t)===r&&(r=r.ownerDocument.body),r}function bP(t,e){const r=ol(t);if(py(t))return r;if(!tu(t)){let i=ph(t);for(;i&&!Dp(i);){if(yo(i)&&!Hw(i))return i;i=ph(i)}return r}let n=wk(t,e);for(;n&&tK(n)&&Hw(n);)n=wk(n,e);return n&&Dp(n)&&Hw(n)&&!Db(n)?r:n||aK(t)||r}const BK=async function(t){const e=this.getOffsetParent||bP,r=this.getDimensions,n=await r(t.floating);return{reference:MK(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function VK(t){return dc(t).direction==="rtl"}const UK={convertOffsetParentRelativeRectToViewportRelativeRect:CK,getDocumentElement:au,getClippingRect:OK,getOffsetParent:bP,getElementRects:BK,getClientRects:IK,getDimensions:jK,getScale:op,isElement:yo,isRTL:VK};function EP(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function zK(t,e){let r=null,n;const i=au(t);function s(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:f,top:p,width:g,height:m}=c;if(o||e(),!g||!m)return;const _=$x(p),w=$x(i.clientWidth-(f+g)),b=$x(i.clientHeight-(p+m)),k=$x(f),C={rootMargin:-_+"px "+-w+"px "+-b+"px "+-k+"px",threshold:ro(0,jd(1,l))||1};let j=!0;function X(K){const P=K[0].intersectionRatio;if(P!==l){if(!j)return a();P?a(!1,P):n=setTimeout(()=>{a(!1,1e-7)},1e3)}P===1&&!EP(c,t.getBoundingClientRect())&&a(),j=!1}try{r=new IntersectionObserver(X,{...C,root:i.ownerDocument})}catch{r=new IntersectionObserver(X,C)}r.observe(t)}return a(!0),s}function $K(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=jb(t),f=i||s?[...c?H1(c):[],...H1(e)]:[];f.forEach(k=>{i&&k.addEventListener("scroll",r,{passive:!0}),s&&k.addEventListener("resize",r)});const p=c&&o?zK(c,r):null;let g=-1,m=null;a&&(m=new ResizeObserver(k=>{let[R]=k;R&&R.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var C;(C=m)==null||C.observe(e)})),r()}),c&&!l&&m.observe(c),m.observe(e));let _,w=l?Md(t):null;l&&b();function b(){const k=Md(t);w&&!EP(w,k)&&r(),w=k,_=requestAnimationFrame(b)}return r(),()=>{var k;f.forEach(R=>{i&&R.removeEventListener("scroll",r),s&&R.removeEventListener("resize",r)}),p?.(),(k=m)==null||k.disconnect(),m=null,l&&cancelAnimationFrame(_)}}const Ww=gy,qK=SK,HK=kK,WK=_K,GK=TK,KK=(t,e,r)=>{const n=new Map,i={platform:UK,...r},s={...i.platform,_c:n};return wK(t,e,{...i,platform:s})};var XK=typeof document<"u",YK=function(){},k2=XK?z.useLayoutEffect:YK;function uv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!uv(t[n],e[n]))return!1;return!0}if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){const s=i[n];if(!(s==="_owner"&&t.$$typeof)&&!uv(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function SP(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function _k(t,e){const r=SP(t);return Math.round(e*r)/r}function Gw(t){const e=z.useRef(t);return k2(()=>{e.current=t}),e}function QK(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=t,[f,p]=z.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[g,m]=z.useState(n);uv(g,n)||m(n);const[_,w]=z.useState(null),[b,k]=z.useState(null),R=z.useCallback(ce=>{ce!==K.current&&(K.current=ce,w(ce))},[]),C=z.useCallback(ce=>{ce!==P.current&&(P.current=ce,k(ce))},[]),j=s||_,X=a||b,K=z.useRef(null),P=z.useRef(null),A=z.useRef(f),T=l!=null,O=Gw(l),I=Gw(i),D=Gw(c),B=z.useCallback(()=>{if(!K.current||!P.current)return;const ce={placement:e,strategy:r,middleware:g};I.current&&(ce.platform=I.current),KK(K.current,P.current,ce).then(H=>{const te={...H,isPositioned:D.current!==!1};re.current&&!uv(A.current,te)&&(A.current=te,eh.flushSync(()=>{p(te)}))})},[g,e,r,I,D]);k2(()=>{c===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,p(ce=>({...ce,isPositioned:!1})))},[c]);const re=z.useRef(!1);k2(()=>(re.current=!0,()=>{re.current=!1}),[]),k2(()=>{if(j&&(K.current=j),X&&(P.current=X),j&&X){if(O.current)return O.current(j,X,B);B()}},[j,X,B,O,T]);const _e=z.useMemo(()=>({reference:K,floating:P,setReference:R,setFloating:C}),[R,C]),Ce=z.useMemo(()=>({reference:j,floating:X}),[j,X]),we=z.useMemo(()=>{const ce={position:r,left:0,top:0};if(!Ce.floating)return ce;const H=_k(Ce.floating,f.x),te=_k(Ce.floating,f.y);return o?{...ce,transform:"translate("+H+"px, "+te+"px)",...SP(Ce.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:H,top:te}},[r,o,Ce.floating,f.x,f.y]);return z.useMemo(()=>({...f,update:B,refs:_e,elements:Ce,floatingStyles:we}),[f,B,_e,Ce,we])}const kP=(t,e)=>({...qK(t),options:[t,e]}),JK=(t,e)=>({...HK(t),options:[t,e]}),ZK=(t,e)=>({...WK(t),options:[t,e]}),eX=(t,e)=>({...GK(t),options:[t,e]}),TP={...L2},tX=TP.useInsertionEffect,rX=tX||(t=>t());function AP(t){const e=z.useRef(()=>{});return rX(()=>{e.current=t}),z.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e.current==null?void 0:e.current(...n)},[])}var A_=typeof document<"u"?z.useLayoutEffect:z.useEffect;let bk=!1,nX=0;const Ek=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+nX++;function iX(){const[t,e]=z.useState(()=>bk?Ek():void 0);return A_(()=>{t==null&&e(Ek())},[]),z.useEffect(()=>{bk=!0},[]),t}const sX=TP.useId,aX=sX||iX;function oX(){const t=new Map;return{emit(e,r){var n;(n=t.get(e))==null||n.forEach(i=>i(r))},on(e,r){t.set(e,[...t.get(e)||[],r])},off(e,r){var n;t.set(e,((n=t.get(e))==null?void 0:n.filter(i=>i!==r))||[])}}}const lX=z.createContext(null),cX=z.createContext(null),uX=()=>{var t;return((t=z.useContext(lX))==null?void 0:t.id)||null},fX=()=>z.useContext(cX),hX="data-floating-ui-focusable";function dX(t){const{open:e=!1,onOpenChange:r,elements:n}=t,i=aX(),s=z.useRef({}),[a]=z.useState(()=>oX()),o=uX()!=null,[l,c]=z.useState(n.reference),f=AP((m,_,w)=>{s.current.openEvent=m?_:void 0,a.emit("openchange",{open:m,event:_,reason:w,nested:o}),r?.(m,_,w)}),p=z.useMemo(()=>({setPositionReference:c}),[]),g=z.useMemo(()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference}),[l,n.reference,n.floating]);return z.useMemo(()=>({dataRef:s,open:e,onOpenChange:f,elements:g,events:a,floatingId:i,refs:p}),[e,f,g,a,i,p])}function pX(t){t===void 0&&(t={});const{nodeId:e}=t,r=dX({...t,elements:{reference:null,floating:null,...t.elements}}),n=t.rootContext||r,i=n.elements,[s,a]=z.useState(null),[o,l]=z.useState(null),f=i?.domReference||s,p=z.useRef(null),g=fX();A_(()=>{f&&(p.current=f)},[f]);const m=QK({...t,elements:{...i,...o&&{reference:o}}}),_=z.useCallback(C=>{const j=yo(C)?{getBoundingClientRect:()=>C.getBoundingClientRect(),contextElement:C}:C;l(j),m.refs.setReference(j)},[m.refs]),w=z.useCallback(C=>{(yo(C)||C===null)&&(p.current=C,a(C)),(yo(m.refs.reference.current)||m.refs.reference.current===null||C!==null&&!yo(C))&&m.refs.setReference(C)},[m.refs]),b=z.useMemo(()=>({...m.refs,setReference:w,setPositionReference:_,domReference:p}),[m.refs,w,_]),k=z.useMemo(()=>({...m.elements,domReference:f}),[m.elements,f]),R=z.useMemo(()=>({...m,...n,refs:b,elements:k,nodeId:e}),[m,b,k,e,n]);return A_(()=>{n.dataRef.current.floatingContext=R;const C=g?.nodesRef.current.find(j=>j.id===e);C&&(C.context=R)}),z.useMemo(()=>({...m,context:R,refs:b,elements:k}),[m,b,k,R])}const Sk="active",kk="selected";function Kw(t,e,r){const n=new Map,i=r==="item";let s=t;if(i&&t){const{[Sk]:a,[kk]:o,...l}=t;s=l}return{...r==="floating"&&{tabIndex:-1,[hX]:""},...s,...e.map(a=>{const o=a?a[r]:null;return typeof o=="function"?t?o(t):null:o}).concat(t).reduce((a,o)=>(o&&Object.entries(o).forEach(l=>{let[c,f]=l;if(!(i&&[Sk,kk].includes(c)))if(c.indexOf("on")===0){if(n.has(c)||n.set(c,[]),typeof f=="function"){var p;(p=n.get(c))==null||p.push(f),a[c]=function(){for(var g,m=arguments.length,_=new Array(m),w=0;w<m;w++)_[w]=arguments[w];return(g=n.get(c))==null?void 0:g.map(b=>b(..._)).find(b=>b!==void 0)}}}else a[c]=f}),a),{})}}function mX(t){t===void 0&&(t=[]);const e=t.map(o=>o?.reference),r=t.map(o=>o?.floating),n=t.map(o=>o?.item),i=z.useCallback(o=>Kw(o,t,"reference"),e),s=z.useCallback(o=>Kw(o,t,"floating"),r),a=z.useCallback(o=>Kw(o,t,"item"),n);return z.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:a}),[i,s,a])}function Tk(t,e){return{...t,rects:{...t.rects,floating:{...t.rects.floating,height:e}}}}const gX=t=>({name:"inner",options:t,async fn(e){const{listRef:r,overflowRef:n,onFallbackChange:i,offset:s=0,index:a=0,minItemsVisible:o=4,referenceOverflowThreshold:l=0,scrollRef:c,...f}=im(t,e),{rects:p,elements:{floating:g}}=e,m=r.current[a],_=c?.current||g,w=g.clientTop||_.clientTop,b=g.clientTop!==0,k=_.clientTop!==0,R=g===_;if(!m)return{};const C={...e,...await kP(-m.offsetTop-g.clientTop-p.reference.height/2-m.offsetHeight/2-s).fn(e)},j=await Ww(Tk(C,_.scrollHeight+w+g.clientTop),f),X=await Ww(C,{...f,elementContext:"reference"}),K=ro(0,j.top),P=C.y+K,O=(_.scrollHeight>_.clientHeight?I=>I:W1)(ro(0,_.scrollHeight+(b&&R||k?w*2:0)-K-ro(0,j.bottom)));if(_.style.maxHeight=O+"px",_.scrollTop=K,i){const I=_.offsetHeight<m.offsetHeight*jd(o,r.current.length)-1||X.top>=-l||X.bottom>=-l;eh.flushSync(()=>i(I))}return n&&(n.current=await Ww(Tk({...C,y:P},_.offsetHeight+w+g.clientTop),f)),{y:P}}});function xX(t,e){const{open:r,elements:n}=t,{enabled:i=!0,overflowRef:s,scrollRef:a,onChange:o}=e,l=AP(o),c=z.useRef(!1),f=z.useRef(null),p=z.useRef(null);z.useEffect(()=>{if(!i)return;function m(w){if(w.ctrlKey||!_||s.current==null)return;const b=w.deltaY,k=s.current.top>=-.5,R=s.current.bottom>=-.5,C=_.scrollHeight-_.clientHeight,j=b<0?-1:1,X=b<0?"max":"min";_.scrollHeight<=_.clientHeight||(!k&&b>0||!R&&b<0?(w.preventDefault(),eh.flushSync(()=>{l(K=>K+Math[X](b,C*j))})):/firefox/i.test(lK())&&(_.scrollTop+=b))}const _=a?.current||n.floating;if(r&&_)return _.addEventListener("wheel",m),requestAnimationFrame(()=>{f.current=_.scrollTop,s.current!=null&&(p.current={...s.current})}),()=>{f.current=null,p.current=null,_.removeEventListener("wheel",m)}},[i,r,n.floating,s,a,l]);const g=z.useMemo(()=>({onKeyDown(){c.current=!0},onWheel(){c.current=!1},onPointerMove(){c.current=!1},onScroll(){const m=a?.current||n.floating;if(!(!s.current||!m||!c.current)){if(f.current!==null){const _=m.scrollTop-f.current;(s.current.bottom<-.5&&_<-1||s.current.top<-.5&&_>1)&&eh.flushSync(()=>l(w=>w+_))}requestAnimationFrame(()=>{f.current=m.scrollTop})}}}),[n.floating,l,s,a]);return z.useMemo(()=>i?{floating:g}:{},[i,g])}let sm=z.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});sm.displayName="FloatingContext";let Mb=z.createContext(null);Mb.displayName="PlacementContext";function vX(t){return z.useMemo(()=>t?typeof t=="string"?{to:t}:t:null,[t])}function yX(){return z.useContext(sm).setReference}function wX(){return z.useContext(sm).getReferenceProps}function _X(){let{getFloatingProps:t,slot:e}=z.useContext(sm);return z.useCallback((...r)=>Object.assign({},t(...r),{"data-anchor":e.anchor}),[t,e])}function bX(t=null){t===!1&&(t=null),typeof t=="string"&&(t={to:t});let e=z.useContext(Mb),r=z.useMemo(()=>t,[JSON.stringify(t,(i,s)=>{var a;return(a=s?.outerHTML)!=null?a:s})]);Ps(()=>{e?.(r??null)},[e,r]);let n=z.useContext(sm);return z.useMemo(()=>[n.setFloating,t?n.styles:{}],[n.setFloating,t,n.styles])}let Ak=4;function EX({children:t,enabled:e=!0}){let[r,n]=z.useState(null),[i,s]=z.useState(0),a=z.useRef(null),[o,l]=z.useState(null);SX(o);let c=e&&r!==null&&o!==null,{to:f="bottom",gap:p=0,offset:g=0,padding:m=0,inner:_}=kX(r,o),[w,b="center"]=f.split(" ");Ps(()=>{c&&s(0)},[c]);let{refs:k,floatingStyles:R,context:C}=pX({open:c,placement:w==="selection"?b==="center"?"bottom":`bottom-${b}`:b==="center"?`${w}`:`${w}-${b}`,strategy:"absolute",transform:!1,middleware:[kP({mainAxis:w==="selection"?0:p,crossAxis:g}),JK({padding:m}),w!=="selection"&&ZK({padding:m}),w==="selection"&&_?gX({..._,padding:m,overflowRef:a,offset:i,minItemsVisible:Ak,referenceOverflowThreshold:m,onFallbackChange(I){var D,B;if(!I)return;let re=C.elements.floating;if(!re)return;let _e=parseFloat(getComputedStyle(re).scrollPaddingBottom)||0,Ce=Math.min(Ak,re.childElementCount),we=0,ce=0;for(let H of(B=(D=C.elements.floating)==null?void 0:D.childNodes)!=null?B:[])if(Ju(H)){let te=H.offsetTop,J=te+H.clientHeight+_e,N=re.scrollTop,U=N+re.clientHeight;if(te>=N&&J<=U)Ce--;else{ce=Math.max(0,Math.min(J,U)-Math.max(te,N)),we=H.clientHeight;break}}Ce>=1&&s(H=>{let te=we*Ce-ce+_e;return H>=te?H:te})}}):null,eX({padding:m,apply({availableWidth:I,availableHeight:D,elements:B}){Object.assign(B.floating.style,{overflow:"auto",maxWidth:`${I}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${D}px)`})}})].filter(Boolean),whileElementsMounted:$K}),[j=w,X=b]=C.placement.split("-");w==="selection"&&(j="selection");let K=z.useMemo(()=>({anchor:[j,X].filter(Boolean).join(" ")}),[j,X]),P=xX(C,{overflowRef:a,onChange:s}),{getReferenceProps:A,getFloatingProps:T}=mX([P]),O=Ln(I=>{l(I),k.setFloating(I)});return z.createElement(Mb.Provider,{value:n},z.createElement(sm.Provider,{value:{setFloating:O,setReference:k.setReference,styles:R,getReferenceProps:A,getFloatingProps:T,slot:K}},t))}function SX(t){Ps(()=>{if(!t)return;let e=new MutationObserver(()=>{let r=window.getComputedStyle(t).maxHeight,n=parseFloat(r);if(isNaN(n))return;let i=parseInt(r);isNaN(i)||n!==i&&(t.style.maxHeight=`${Math.ceil(n)}px`)});return e.observe(t,{attributes:!0,attributeFilter:["style"]}),()=>{e.disconnect()}},[t])}function kX(t,e){var r,n,i;let s=Xw((r=t?.gap)!=null?r:"var(--anchor-gap, 0)",e),a=Xw((n=t?.offset)!=null?n:"var(--anchor-offset, 0)",e),o=Xw((i=t?.padding)!=null?i:"var(--anchor-padding, 0)",e);return{...t,gap:s,offset:a,padding:o}}function Xw(t,e,r=void 0){let n=uy(),i=Ln((l,c)=>{if(l==null)return[r,null];if(typeof l=="number")return[l,null];if(typeof l=="string"){if(!c)return[r,null];let f=Nk(l,c);return[f,p=>{let g=NP(l);{let m=g.map(_=>window.getComputedStyle(c).getPropertyValue(_));n.requestAnimationFrame(function _(){n.nextFrame(_);let w=!1;for(let[k,R]of g.entries()){let C=window.getComputedStyle(c).getPropertyValue(R);if(m[k]!==C){m[k]=C,w=!0;break}}if(!w)return;let b=Nk(l,c);f!==b&&(p(b),f=b)})}return n.dispose}]}return[r,null]}),s=z.useMemo(()=>i(t,e)[0],[t,e]),[a=s,o]=z.useState();return Ps(()=>{let[l,c]=i(t,e);if(o(l),!!c)return c(o)},[t,e]),a}function NP(t){let e=/var\((.*)\)/.exec(t);if(e){let r=e[1].indexOf(",");if(r===-1)return[e[1]];let n=e[1].slice(0,r).trim(),i=e[1].slice(r+1).trim();return i?[n,...NP(i)]:[n]}return[]}function Nk(t,e){let r=document.createElement("div");e.appendChild(r),r.style.setProperty("margin-top","0px","important"),r.style.setProperty("margin-top",t,"important");let n=parseFloat(window.getComputedStyle(r).marginTop)||0;return e.removeChild(r),n}let Bb=z.createContext(null);Bb.displayName="OpenClosedContext";var G1=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(G1||{});function TX(){return z.useContext(Bb)}function AX({value:t,children:e}){return oa.createElement(Bb.Provider,{value:t},e)}function NX(t){throw new Error("Unexpected object: "+t)}var Is=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(Is||{});function qx(t,e){let r=e.resolveItems();if(r.length<=0)return null;let n=e.resolveActiveIndex(),i=n??-1;switch(t.focus){case 0:{for(let s=0;s<r.length;++s)if(!e.resolveDisabled(r[s],s,r))return s;return n}case 1:{i===-1&&(i=r.length);for(let s=i-1;s>=0;--s)if(!e.resolveDisabled(r[s],s,r))return s;return n}case 2:{for(let s=i+1;s<r.length;++s)if(!e.resolveDisabled(r[s],s,r))return s;return n}case 3:{for(let s=r.length-1;s>=0;--s)if(!e.resolveDisabled(r[s],s,r))return s;return n}case 4:{for(let s=0;s<r.length;++s)if(e.resolveId(r[s],s,r)===t.id)return s;return n}case 5:return null;default:NX(t)}}var CP=(t=>(t[t.Left=0]="Left",t[t.Right=2]="Right",t))(CP||{});function IP(t){let e=Ln(t),r=z.useRef(!1);z.useEffect(()=>(r.current=!1,()=>{r.current=!0,G7(()=>{r.current&&e()})}),[e])}function CX(){let t=typeof document>"u";return"useSyncExternalStore"in L2?(e=>e.useSyncExternalStore)(L2)(()=>()=>{},()=>!1,()=>!t):!1}function IX(){let t=CX(),[e,r]=z.useState(Qc.isHandoffComplete);return e&&Qc.isHandoffComplete===!1&&r(!1),z.useEffect(()=>{e!==!0&&r(!0)},[e]),z.useEffect(()=>Qc.handoff(),[]),t?!1:e}let PX=z.createContext(!1);function RX(){return z.useContext(PX)}function FX(t){let e=RX(),r=z.useContext(RP),[n,i]=z.useState(()=>{var s;if(!e&&r!==null)return(s=r.current)!=null?s:null;if(Qc.isServer)return null;let a=t?.getElementById("headlessui-portal-root");if(a)return a;if(t===null)return null;let o=t.createElement("div");return o.setAttribute("id","headlessui-portal-root"),t.body.appendChild(o)});return z.useEffect(()=>{n!==null&&(t!=null&&t.body.contains(n)||t==null||t.body.appendChild(n))},[n,t]),z.useEffect(()=>{e||r!==null&&i(r.current)},[r,i,e]),n}let PP=z.Fragment,LX=Vl(function(t,e){let{ownerDocument:r=null,...n}=t,i=z.useRef(null),s=Zu(KW(m=>{i.current=m}),e),a=S_(i),o=r??a,l=FX(o),[c]=z.useState(()=>{var m;return Qc.isServer?null:(m=o?.createElement("div"))!=null?m:null}),f=z.useContext(MX),p=IX();Ps(()=>{!l||!c||l.contains(c)||(c.setAttribute("data-headlessui-portal",""),l.appendChild(c))},[l,c]),Ps(()=>{if(c&&f)return f.register(c)},[f,c]),IP(()=>{var m;!l||!c||(Cb(c)&&l.contains(c)&&l.removeChild(c),l.childNodes.length<=0&&((m=l.parentElement)==null||m.removeChild(l)))});let g=Bl();return p?!l||!c?null:eh.createPortal(g({ourProps:{ref:s},theirProps:n,slot:{},defaultTag:PP,name:"Portal"}),c):null});function DX(t,e){let r=Zu(e),{enabled:n=!0,ownerDocument:i,...s}=t,a=Bl();return n?oa.createElement(LX,{...s,ownerDocument:i,ref:r}):a({ourProps:{ref:r},theirProps:s,slot:{},defaultTag:PP,name:"Portal"})}let OX=z.Fragment,RP=z.createContext(null);function jX(t,e){let{target:r,...n}=t,i={ref:Zu(e)},s=Bl();return oa.createElement(RP.Provider,{value:r},s({ourProps:i,theirProps:n,defaultTag:OX,name:"Popover.Group"}))}let MX=z.createContext(null),BX=Vl(DX),VX=Vl(jX),UX=Object.assign(BX,{Group:VX});function zX(t,e){let r=z.useRef({left:0,top:0});if(Ps(()=>{if(!e)return;let i=e.getBoundingClientRect();i&&(r.current=i)},[t,e]),e==null||!t||e===document.activeElement)return!1;let n=e.getBoundingClientRect();return n.top!==r.current.top||n.left!==r.current.left}let Ck=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function Ik(t){var e,r;let n=(e=t.innerText)!=null?e:"",i=t.cloneNode(!0);if(!Ju(i))return n;let s=!1;for(let o of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))o.remove(),s=!0;let a=s?(r=i.innerText)!=null?r:"":n;return Ck.test(a)&&(a=a.replace(Ck,"")),a}function $X(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let r=t.getAttribute("aria-labelledby");if(r){let n=r.split(" ").map(i=>{let s=document.getElementById(i);if(s){let a=s.getAttribute("aria-label");return typeof a=="string"?a.trim():Ik(s).trim()}return null}).filter(Boolean);if(n.length>0)return n.join(", ")}return Ik(t).trim()}function qX(t){let e=z.useRef(""),r=z.useRef("");return Ln(()=>{let n=t.current;if(!n)return"";let i=n.innerText;if(e.current===i)return r.current;let s=$X(n).trim().toLowerCase();return e.current=i,r.current=s,s})}var HX=Object.defineProperty,WX=(t,e,r)=>e in t?HX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pk=(t,e,r)=>(WX(t,typeof e!="symbol"?e+"":e,r),r),Ea=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Ea||{}),fv=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(fv||{}),ni=(t=>(t[t.OpenMenu=0]="OpenMenu",t[t.CloseMenu=1]="CloseMenu",t[t.GoToItem=2]="GoToItem",t[t.Search=3]="Search",t[t.ClearSearch=4]="ClearSearch",t[t.RegisterItems=5]="RegisterItems",t[t.UnregisterItems=6]="UnregisterItems",t[t.SetButtonElement=7]="SetButtonElement",t[t.SetItemsElement=8]="SetItemsElement",t[t.SortItems=9]="SortItems",t))(ni||{});function Rk(t,e=r=>r){let r=t.activeItemIndex!==null?t.items[t.activeItemIndex]:null,n=fP(e(t.items.slice()),s=>s.dataRef.current.domRef.current),i=r?n.indexOf(r):null;return i===-1&&(i=null),{items:n,activeItemIndex:i}}let GX={1(t){return t.menuState===1?t:{...t,activeItemIndex:null,pendingFocus:{focus:Is.Nothing},menuState:1}},0(t,e){return t.menuState===0?t:{...t,__demoMode:!1,pendingFocus:e.focus,menuState:0}},2:(t,e)=>{var r,n,i,s,a;if(t.menuState===1)return t;let o={...t,searchQuery:"",activationTrigger:(r=e.trigger)!=null?r:1,__demoMode:!1};if(e.focus===Is.Nothing)return{...o,activeItemIndex:null};if(e.focus===Is.Specific)return{...o,activeItemIndex:t.items.findIndex(f=>f.id===e.id)};if(e.focus===Is.Previous){let f=t.activeItemIndex;if(f!==null){let p=t.items[f].dataRef.current.domRef,g=qx(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});if(g!==null){let m=t.items[g].dataRef.current.domRef;if(((n=p.current)==null?void 0:n.previousElementSibling)===m.current||((i=m.current)==null?void 0:i.previousElementSibling)===null)return{...o,activeItemIndex:g}}}}else if(e.focus===Is.Next){let f=t.activeItemIndex;if(f!==null){let p=t.items[f].dataRef.current.domRef,g=qx(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});if(g!==null){let m=t.items[g].dataRef.current.domRef;if(((s=p.current)==null?void 0:s.nextElementSibling)===m.current||((a=m.current)==null?void 0:a.nextElementSibling)===null)return{...o,activeItemIndex:g}}}}let l=Rk(t),c=qx(e,{resolveItems:()=>l.items,resolveActiveIndex:()=>l.activeItemIndex,resolveId:f=>f.id,resolveDisabled:f=>f.dataRef.current.disabled});return{...o,...l,activeItemIndex:c}},3:(t,e)=>{let r=t.searchQuery!==""?0:1,n=t.searchQuery+e.value.toLowerCase(),i=(t.activeItemIndex!==null?t.items.slice(t.activeItemIndex+r).concat(t.items.slice(0,t.activeItemIndex+r)):t.items).find(a=>{var o;return((o=a.dataRef.current.textValue)==null?void 0:o.startsWith(n))&&!a.dataRef.current.disabled}),s=i?t.items.indexOf(i):-1;return s===-1||s===t.activeItemIndex?{...t,searchQuery:n}:{...t,searchQuery:n,activeItemIndex:s,activationTrigger:1}},4(t){return t.searchQuery===""?t:{...t,searchQuery:"",searchActiveItemIndex:null}},5:(t,e)=>{let r=t.items.concat(e.items.map(i=>i)),n=t.activeItemIndex;return t.pendingFocus.focus!==Is.Nothing&&(n=qx(t.pendingFocus,{resolveItems:()=>r,resolveActiveIndex:()=>t.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled})),{...t,items:r,activeItemIndex:n,pendingFocus:{focus:Is.Nothing},pendingShouldSort:!0}},6:(t,e)=>{let r=t.items,n=[],i=new Set(e.items);for(let[s,a]of r.entries())if(i.has(a.id)&&(n.push(s),i.delete(a.id),i.size===0))break;if(n.length>0){r=r.slice();for(let s of n.reverse())r.splice(s,1)}return{...t,items:r,activationTrigger:1}},7:(t,e)=>t.buttonElement===e.element?t:{...t,buttonElement:e.element},8:(t,e)=>t.itemsElement===e.element?t:{...t,itemsElement:e.element},9:t=>t.pendingShouldSort?{...t,...Rk(t),pendingShouldSort:!1}:t},KX=class FP extends iP{constructor(e){super(e),Pk(this,"actions",{registerItem:tk(()=>{let r=[],n=new Set;return[(i,s)=>{n.has(s)||(n.add(s),r.push({id:i,dataRef:s}))},()=>(n.clear(),this.send({type:5,items:r.splice(0)}))]}),unregisterItem:tk(()=>{let r=[];return[n=>r.push(n),()=>this.send({type:6,items:r.splice(0)})]})}),Pk(this,"selectors",{activeDescendantId(r){var n;let i=r.activeItemIndex,s=r.items;return i===null||(n=s[i])==null?void 0:n.id},isActive(r,n){var i;let s=r.activeItemIndex,a=r.items;return s!==null?((i=a[s])==null?void 0:i.id)===n:!1},shouldScrollIntoView(r,n){return r.__demoMode||r.menuState!==0||r.activationTrigger===0?!1:this.isActive(r,n)}}),this.on(5,()=>{this.disposables.requestAnimationFrame(()=>{this.send({type:9})})});{let r=this.state.id,n=Rb.get(null);this.disposables.add(n.on(aP.Push,i=>{!n.selectors.isTop(i,r)&&this.state.menuState===0&&this.send({type:1})})),this.on(0,()=>n.actions.push(r)),this.on(1,()=>n.actions.pop(r))}}static new({id:e,__demoMode:r=!1}){return new FP({id:e,__demoMode:r,menuState:r?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1,pendingShouldSort:!1,pendingFocus:{focus:Is.Nothing}})}reduce(e,r){return rm(r.type,GX,e,r)}};const LP=z.createContext(null);function Vb(t){let e=z.useContext(LP);if(e===null){let r=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,DP),r}return e}function DP({id:t,__demoMode:e=!1}){let r=z.useMemo(()=>KX.new({id:t,__demoMode:e}),[]);return IP(()=>r.dispose()),r}let XX=z.Fragment;function YX(t,e){let r=z.useId(),{__demoMode:n=!1,...i}=t,s=DP({id:r,__demoMode:n}),[a,o,l]=$c(s,b=>[b.menuState,b.itemsElement,b.buttonElement]),c=Zu(e),f=Rb.get(null),p=$c(f,z.useCallback(b=>f.selectors.isTop(b,r),[f,r]));IG(p,[l,o],(b,k)=>{var R;s.send({type:ni.CloseMenu}),Lb(k,Fb.Loose)||(b.preventDefault(),(R=s.state.buttonElement)==null||R.focus())});let g=Ln(()=>{s.send({type:ni.CloseMenu})}),m=z.useMemo(()=>({open:a===Ea.Open,close:g}),[a,g]),_={ref:c},w=Bl();return oa.createElement(EX,null,oa.createElement(LP.Provider,{value:s},oa.createElement(AX,{value:rm(a,{[Ea.Open]:G1.Open,[Ea.Closed]:G1.Closed})},w({ourProps:_,theirProps:i,slot:m,defaultTag:XX,name:"Menu"}))))}let QX="button";function JX(t,e){let r=Vb("Menu.Button"),n=z.useId(),{id:i=`headlessui-menu-button-${n}`,disabled:s=!1,autoFocus:a=!1,...o}=t,l=z.useRef(null),c=wX(),f=Zu(e,l,yX(),Ln(B=>r.send({type:ni.SetButtonElement,element:B}))),p=Ln(B=>{switch(B.key){case _a.Space:case _a.Enter:case _a.ArrowDown:B.preventDefault(),B.stopPropagation(),r.send({type:ni.OpenMenu,focus:{focus:Is.First}});break;case _a.ArrowUp:B.preventDefault(),B.stopPropagation(),r.send({type:ni.OpenMenu,focus:{focus:Is.Last}});break}}),g=Ln(B=>{switch(B.key){case _a.Space:B.preventDefault();break}}),[m,_,w]=$c(r,B=>[B.menuState,B.buttonElement,B.itemsElement]),b=m===Ea.Open;FG(b,{trigger:_,action:z.useCallback(B=>{if(_!=null&&_.contains(B.target))return zx.Ignore;let re=B.target.closest('[role="menuitem"]:not([data-disabled])');return Ju(re)?zx.Select(re):w!=null&&w.contains(B.target)?zx.Ignore:zx.Close},[_,w]),close:z.useCallback(()=>r.send({type:ni.CloseMenu}),[]),select:z.useCallback(B=>B.click(),[])});let k=Ln(B=>{var re;if(B.button===CP.Left){if(WW(B.currentTarget))return B.preventDefault();s||(m===Ea.Open?(eh.flushSync(()=>r.send({type:ni.CloseMenu})),(re=l.current)==null||re.focus({preventScroll:!0})):(B.preventDefault(),r.send({type:ni.OpenMenu,focus:{focus:Is.Nothing},trigger:fv.Pointer})))}}),R=z.useRef(null),C=Ln(B=>{R.current=B.pointerType,B.pointerType==="mouse"&&k(B)}),j=Ln(B=>{R.current!=="mouse"&&k(B)}),{isFocusVisible:X,focusProps:K}=AW({autoFocus:a}),{isHovered:P,hoverProps:A}=TW({isDisabled:s}),{pressed:T,pressProps:O}=FW({disabled:s}),I=z.useMemo(()=>({open:m===Ea.Open,active:T||m===Ea.Open,disabled:s,hover:P,focus:X,autofocus:a}),[m,P,X,T,s,a]),D=Y7(c(),{ref:f,id:i,type:LG(t,l.current),"aria-haspopup":"menu","aria-controls":w?.id,"aria-expanded":m===Ea.Open,disabled:s||void 0,autoFocus:a,onKeyDown:p,onKeyUp:g,onPointerDown:C,onClick:j},K,A,O);return Bl()({ourProps:D,theirProps:o,slot:I,defaultTag:QX,name:"Menu.Button"})}let ZX="div",eY=w_.RenderStrategy|w_.Static;function tY(t,e){let r=z.useId(),{id:n=`headlessui-menu-items-${r}`,anchor:i,portal:s=!1,modal:a=!0,transition:o=!1,...l}=t,c=vX(i),f=Vb("Menu.Items"),[p,g]=bX(c),m=_X(),[_,w]=z.useState(null),b=Zu(e,c?p:null,Ln(H=>f.send({type:ni.SetItemsElement,element:H})),w),[k,R]=$c(f,H=>[H.menuState,H.buttonElement]),C=S_(R),j=S_(_);c&&(s=!0);let X=TX(),[K,P]=KG(o,_,X!==null?(X&G1.Open)===G1.Open:k===Ea.Open);xG(K,R,()=>{f.send({type:ni.CloseMenu})});let A=$c(f,H=>H.__demoMode),T=A?!1:a&&k===Ea.Open;zG(T,j);let O=A?!1:a&&k===Ea.Open;gG(O,{allowed:z.useCallback(()=>[R,_],[R,_])});let I=k!==Ea.Open,D=zX(I,R)?!1:K;z.useEffect(()=>{let H=_;H&&k===Ea.Open&&H!==j?.activeElement&&H.focus({preventScroll:!0})},[k,_,j]),JG(k===Ea.Open,{container:_,accept(H){return H.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:H.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(H){H.setAttribute("role","none")}});let B=uy(),re=Ln(H=>{var te,J,N;switch(B.dispose(),H.key){case _a.Space:if(f.state.searchQuery!=="")return H.preventDefault(),H.stopPropagation(),f.send({type:ni.Search,value:H.key});case _a.Enter:if(H.preventDefault(),H.stopPropagation(),f.state.activeItemIndex!==null){let{dataRef:U}=f.state.items[f.state.activeItemIndex];(J=(te=U.current)==null?void 0:te.domRef.current)==null||J.click()}f.send({type:ni.CloseMenu}),uP(f.state.buttonElement);break;case _a.ArrowDown:return H.preventDefault(),H.stopPropagation(),f.send({type:ni.GoToItem,focus:Is.Next});case _a.ArrowUp:return H.preventDefault(),H.stopPropagation(),f.send({type:ni.GoToItem,focus:Is.Previous});case _a.Home:case _a.PageUp:return H.preventDefault(),H.stopPropagation(),f.send({type:ni.GoToItem,focus:Is.First});case _a.End:case _a.PageDown:return H.preventDefault(),H.stopPropagation(),f.send({type:ni.GoToItem,focus:Is.Last});case _a.Escape:H.preventDefault(),H.stopPropagation(),eh.flushSync(()=>f.send({type:ni.CloseMenu})),(N=f.state.buttonElement)==null||N.focus({preventScroll:!0});break;case _a.Tab:H.preventDefault(),H.stopPropagation(),eh.flushSync(()=>f.send({type:ni.CloseMenu})),TG(f.state.buttonElement,H.shiftKey?E_.Previous:E_.Next);break;default:H.key.length===1&&(f.send({type:ni.Search,value:H.key}),B.setTimeout(()=>f.send({type:ni.ClearSearch}),350));break}}),_e=Ln(H=>{switch(H.key){case _a.Space:H.preventDefault();break}}),Ce=z.useMemo(()=>({open:k===Ea.Open}),[k]),we=Y7(c?m():{},{"aria-activedescendant":$c(f,f.selectors.activeDescendantId),"aria-labelledby":$c(f,H=>{var te;return(te=H.buttonElement)==null?void 0:te.id}),id:n,onKeyDown:re,onKeyUp:_e,role:"menu",tabIndex:k===Ea.Open?0:void 0,ref:b,style:{...l.style,...g,"--button-width":iG(R,!0).width},...GG(P)}),ce=Bl();return oa.createElement(UX,{enabled:s?t.static||K:!1,ownerDocument:C},ce({ourProps:we,theirProps:l,slot:Ce,defaultTag:ZX,features:eY,visible:D,name:"Menu.Items"}))}let rY=z.Fragment;function nY(t,e){let r=z.useId(),{id:n=`headlessui-menu-item-${r}`,disabled:i=!1,...s}=t,a=Vb("Menu.Item"),o=$c(a,I=>a.selectors.isActive(I,n)),l=z.useRef(null),c=Zu(e,l),f=$c(a,I=>a.selectors.shouldScrollIntoView(I,n));Ps(()=>{if(f)return Ml().requestAnimationFrame(()=>{var I,D;(D=(I=l.current)==null?void 0:I.scrollIntoView)==null||D.call(I,{block:"nearest"})})},[f,l]);let p=qX(l),g=z.useRef({disabled:i,domRef:l,get textValue(){return p()}});Ps(()=>{g.current.disabled=i},[g,i]),Ps(()=>(a.actions.registerItem(n,g),()=>a.actions.unregisterItem(n)),[g,n]);let m=Ln(()=>{a.send({type:ni.CloseMenu})}),_=Ln(I=>{if(i)return I.preventDefault();a.send({type:ni.CloseMenu}),uP(a.state.buttonElement)}),w=Ln(()=>{if(i)return a.send({type:ni.GoToItem,focus:Is.Nothing});a.send({type:ni.GoToItem,focus:Is.Specific,id:n})}),b=$G(),k=Ln(I=>b.update(I)),R=Ln(I=>{b.wasMoved(I)&&(i||o||a.send({type:ni.GoToItem,focus:Is.Specific,id:n,trigger:fv.Pointer}))}),C=Ln(I=>{b.wasMoved(I)&&(i||o&&a.state.activationTrigger===fv.Pointer&&a.send({type:ni.GoToItem,focus:Is.Nothing}))}),[j,X]=tP(),[K,P]=XW(),A=z.useMemo(()=>({active:o,focus:o,disabled:i,close:m}),[o,i,m]),T={id:n,ref:c,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-labelledby":j,"aria-describedby":K,disabled:void 0,onClick:_,onFocus:w,onPointerEnter:k,onMouseEnter:k,onPointerMove:R,onMouseMove:R,onPointerLeave:C,onMouseLeave:C},O=Bl();return oa.createElement(X,null,oa.createElement(P,null,O({ourProps:T,theirProps:s,slot:A,defaultTag:rY,name:"Menu.Item"})))}let iY="div";function sY(t,e){let[r,n]=tP(),i=t,s={ref:e,"aria-labelledby":r,role:"group"},a=Bl();return oa.createElement(n,null,a({ourProps:s,theirProps:i,slot:{},defaultTag:iY,name:"Menu.Section"}))}let aY="header";function oY(t,e){let r=z.useId(),{id:n=`headlessui-menu-heading-${r}`,...i}=t,s=Pb();Ps(()=>s.register(n),[n,s.register]);let a={id:n,ref:e,role:"presentation",...s.props};return Bl()({ourProps:a,theirProps:i,slot:{},defaultTag:aY,name:"Menu.Heading"})}let lY="div";function cY(t,e){let r=t,n={ref:e,role:"separator"};return Bl()({ourProps:n,theirProps:r,slot:{},defaultTag:lY,name:"Menu.Separator"})}let uY=Vl(YX),fY=Vl(JX),hY=Vl(tY),dY=Vl(nY),pY=Vl(sY),mY=Vl(oY),gY=Vl(cY),Wm=Object.assign(uY,{Button:fY,Items:hY,Item:dY,Section:pY,Heading:mY,Separator:gY});const xY="/ChatBg.svg";function vY(t){const e=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=(new Date(e.getFullYear(),e.getMonth(),e.getDate())-r)/(1e3*60*60*24);return i===0?"Today":i===1?"Yesterday":t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function OP({vendorId:t,threadId:e,onBackRoute:r,onClose:n,overlayOpacity:i=.3}){const{user:s,profile:a}=Jn(),[o,l]=z.useState(e||null),[c,f]=z.useState(""),[p,g]=z.useState(""),[m,_]=z.useState([]),[w,b]=z.useState(""),[k,R]=z.useState(""),C=z.useRef(null),j=$i(),[X,K]=z.useState(null),[P,A]=z.useState(!0),T=z.useRef(null),[O,I]=z.useState(!1),[D,B]=z.useState([]),[re,_e]=z.useState(!1);z.useEffect(()=>{s&&(async()=>{if(a?.role==="customer"){if(!t)return;const te=await Eb({vendorId:t,customerId:s.uid,role:"customer"});l(te)}else{if(!e){console.warn("Vendor tried to open chat without threadId. Navigate from Messages list.");return}l(e)}})().catch(console.error)},[s?.uid,a?.role,t,e]),z.useEffect(()=>{!o||!a?.role||(async()=>{const te=await Aa(kr(Et,"threads",o));if(!te.exists())return;const J=te.data(),[N,U]=o.split("__");if(a.role==="customer"){const W=J.vendorName||"",Y=J.vendorAddress||"";if(W)f(W),g(Y);else{const he=await Aa(kr(Et,"pharmacies",N)),xe=he.exists()?he.data():{};f(xe.name||"Pharmacy"),g(xe.address||xe.email||"")}const ae=await Aa(kr(Et,"pharmacies",N)),pe=ae.exists()?ae.data():{};R(pe.phone||"")}else{const W=J.customerName||"",Y=J.customerAddress||J.customerEmail||"";if(W)f(W),g(Y);else{const ae=await Aa(kr(Et,"users",U)),pe=ae.exists()?ae.data():{};f(pe.displayName||"Customer"),g(pe.email||"")}}})().catch(console.error)},[o,a?.role]),z.useEffect(()=>{if(!o||!s?.uid)return;const te=_7(o,_,console.error);return sv(o,s.uid).catch(console.error),te},[o,s?.uid]),z.useEffect(()=>{C.current?.scrollIntoView({behavior:"smooth"})},[m.length]),z.useEffect(()=>{const te=()=>A(!document.hidden);return document.addEventListener("visibilitychange",te),()=>document.removeEventListener("visibilitychange",te)},[]);const Ce=z.useRef(null);z.useEffect(()=>{if(!m.length)return;const te=m[m.length-1];if(te.id!==Ce.current&&te.senderId!==s?.uid&&T.current){T.current.currentTime=0;const J=T.current.play();J&&J.catch(()=>{})}Ce.current=te.id},[m,s?.uid]);const we=()=>{if(!o||!s)return null;const[te,J]=o.split("__");return s.uid===te?J:te},ce=async()=>{const te=we();!te||!w.trim()||!o||(await d_(o,{senderId:s.uid,to:te,text:w.trim()}),b(""))};z.useEffect(()=>{if(!O)return;let te=null;if(a?.role==="pharmacy"?te=s?.uid:o&&([te]=o.split("__")),!te)return;const J=Vr(xr(Et,"products"),Wr("pharmacyId","==",te)),N=pi(J,U=>{B(U.docs.map(W=>({id:W.id,...W.data()})))});return()=>N&&N()},[O,a?.role,s?.uid,o]);const H=async({drugs:te,startDate:J,duration:N,notes:U})=>{if(!o||!s)return;const[W,Y]=o.split("__");await T7({pharmacyId:W,customerId:Y,chatThreadId:o,drugs:te,startDate:J,duration:N,notes:U}),I(!1),await d_(o,{senderId:s.uid,to:Y,text:"A new prescription has been created."})};return d.jsxs("div",{className:"h-screen w-full flex flex-col items-stretch overflow-visible",style:{position:"relative"},children:[d.jsx("div",{"aria-hidden":!0,style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",backgroundImage:`url(${xY})`,backgroundRepeat:"repeat",backgroundPosition:"center center",backgroundSize:"cover",pointerEvents:"none",zIndex:0}}),i>0&&d.jsx("div",{"aria-hidden":!0,style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",backgroundColor:`rgba(255,255,255, ${i})`,pointerEvents:"none",zIndex:5}}),d.jsxs("div",{style:{position:"relative",zIndex:10},className:"flex-1 flex flex-col min-h-0",children:[d.jsx("style",{children:".hide-scrollbar::-webkit-scrollbar{display:none} .hide-scrollbar{-ms-overflow-style:none; scrollbar-width:none;}"}),d.jsx("audio",{ref:T,src:rW,preload:"none"}),d.jsx("div",{className:"sticky top-0 z-20 bg-white/90 pt-1 pb-1",style:{paddingTop:"env(safe-area-inset-top, 0)",width:"100vw",marginLeft:"calc(50% - 50vw)",paddingRight:"env(safe-area-inset-right, 0)"},children:d.jsxs("div",{className:"w-full px-4 sm:px-5 pt-6 pb-3 flex items-center gap-3 justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{onClick:()=>{n?.(),j(r||"/messages")},className:"rounded-full border px-3 sm:px-4 py-1",children:d.jsx($1,{className:"h-4 w-4"})}),a?.role==="customer"?d.jsx("button",{className:"min-w-0 font-light text-[15px] sm:text-[17px] truncate text-left hover:underline focus:outline-none",onClick:()=>{if(o){const[te]=o.split("__");j(`/vendor/${te}`)}},title:c,children:c||"..."}):d.jsxs("div",{className:"min-w-0",children:[d.jsx("div",{className:"font-light text-[15px] sm:text-[17px] truncate",children:c||"..."}),d.jsx("div",{className:"text-[9px] text-zinc-500 truncate",children:p})]})]}),a?.role==="customer"&&d.jsxs("a",{href:k?`tel:${k}`:void 0,className:`flex items-center justify-center rounded-full border border-sky-500 text-sky-600 px-2 py-1 text-[11px] font-poppins font-light ${k?"hover:bg-sky-50":"opacity-40 cursor-not-allowed"}`,style:{minWidth:32},title:k?`Call ${c}`:"No phone number",tabIndex:k?0:-1,"aria-disabled":!k,children:[d.jsx(tW,{className:"h-3 w-3 mr-1"})," Call"]}),a?.role==="pharmacy"&&o&&d.jsxs(Wm,{as:"div",className:"relative inline-block text-left ml-2",children:[d.jsx(Wm.Button,{className:"px-3 py-1 rounded-full bg-sky-600 text-white text-xs font-medium",children:"Actions "}),d.jsx(Wm.Items,{className:"absolute right-0 mt-2 w-48 origin-top-right bg-white border border-sky-200 divide-y divide-gray-100 rounded-[5px] shadow-lg focus:outline-none z-50",children:d.jsxs("div",{className:"py-1",children:[d.jsx(Wm.Item,{children:({active:te})=>d.jsx("button",{className:`w-full text-left px-4 py-2 text-[12px] font-light ${te?"bg-sky-50":""}`,onClick:()=>I(!0),children:"Create Prescription"})}),d.jsx(Wm.Item,{children:({active:te})=>d.jsx("button",{className:`w-full text-left px-4 py-2 text-[12px] font-light ${te?"bg-sky-50":""}`,onClick:()=>_e(!0),children:"View Prescription History"})})]})})]})]})}),d.jsxs("div",{className:"w-full flex-1 flex flex-col min-h-0",children:[d.jsxs("div",{className:"flex-1 overflow-y-auto px-2 sm:px-3 pb-28 min-h-0 hide-scrollbar",style:{paddingTop:12},children:[(()=>{let te=null;return m.map(J=>{const N=J.senderId===s?.uid,U=J.createdAt?.seconds?new Date(J.createdAt.seconds*1e3):null;let W=!1;if(U){const Y=U.toDateString();te!==Y&&(W=!0,te=Y)}return d.jsxs(oa.Fragment,{children:[W&&U&&d.jsx("div",{className:"flex justify-center my-6 mb-6",children:d.jsx("span",{className:"bg-zinc-200 text-zinc-600 text-[10px] px-3 py-1 rounded-full shadow-sm",children:vY(U)})}),d.jsxs("div",{className:`flex flex-col items-${N?"end":"start"} w-full mb-2`,children:[d.jsx("div",{className:`${N?"bg-sky-600 text-white":"bg-zinc-100 text-zinc-900"} px-3 py-2 rounded-2xl max-w-[90%] sm:max-w-[75%] whitespace-pre-wrap break-words shadow-sm`,style:{borderRadius:N?"16px 16px 4px 16px":"16px 16px 16px 4px",fontSize:13},children:J.text}),d.jsx("div",{className:`text-[9px] sm:text-[10px] text-zinc-400 ${N?"mr-2":"ml-2"}`,children:U?U.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]})]},J.id)})})(),d.jsx("div",{ref:C})]}),d.jsx("div",{className:"w-full sticky bottom-0 z-20 bg-white/85 backdrop-blur",style:{paddingBottom:"env(safe-area-inset-bottom, 0)",width:"100vw",marginLeft:"calc(50% - 50vw)",paddingLeft:"env(safe-area-inset-left, 0)",paddingRight:"env(safe-area-inset-right, 0)"},children:d.jsxs("div",{className:"w-full",children:[d.jsxs("form",{className:"mx-3 sm:mx-5 flex items-center gap-2 py-2",onSubmit:te=>{te.preventDefault(),ce()},children:[d.jsx("label",{className:"flex items-center cursor-not-allowed mr-1 opacity-40",title:"Attachments coming soon",children:d.jsx(WH,{className:"h-5 w-5 text-zinc-400"})}),d.jsx("input",{value:w,onChange:te=>b(te.target.value),placeholder:"Type a message",className:"flex-1 min-w-0 outline-none px-3 bg-transparent border border-zinc-300 rounded-3xl placeholder:text-[11px] sm:placeholder:text-[12px]",style:{fontSize:13,height:34}}),d.jsx("button",{type:"submit",className:"ml-1 flex items-center justify-center disabled:opacity-50",disabled:!w.trim(),children:d.jsx("img",{src:eW,alt:"Send",className:"h-5 w-5"})})]}),d.jsx("div",{style:{height:6}})]})})]}),d.jsx(nW,{open:O,onClose:()=>I(!1),products:D,onSubmit:H}),d.jsx(Tb,{open:re,onClose:()=>_e(!1),children:d.jsx(L7,{chatThreadId:o,products:D,userId:s?.uid})})]})]})}function yY(){const{user:t,profile:e}=Jn(),[r,n]=z.useState([]),[i,s]=z.useState(""),[a,o]=z.useState(null),l=nu(),c=$i();z.useEffect(()=>{if(!(!t||!e?.role))return sy({uid:t.uid,role:e.role},n,k=>console.error("listenUserThreads error:",k))},[t?.uid,e?.role]),z.useEffect(()=>{const R=new URLSearchParams(l.search).get("chat");if(!R||!r.length||a)return;const C=r.find(j=>j.vendorId===R)||r.find(j=>(j.id||"").split("__")[0]===R);C&&(o(C),t?.uid&&sv(C.id,t.uid).catch(console.error))},[l.search,r,a,t?.uid]);const f=async k=>{o(k);try{await sv(k.id,t.uid)}catch(C){console.error(C)}const R=k.vendorId||(k.id&&k.id.includes("__")?k.id.split("__")[0]:"");R&&c(`/messages?chat=${encodeURIComponent(R)}`,{replace:!1})},p=()=>{o(null),c("/messages",{replace:!0})};if(a){const k=e?.role==="customer"?{vendorId:a.vendorId}:{threadId:a.id,vendorId:a.vendorId};return d.jsx("div",{className:"bg-white min-h-screen",children:d.jsx(OP,{...k,onClose:p,onBackRoute:"/messages"})})}if(!t)return d.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[d.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:"Please sign in to continue"}),d.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>c("/auth/landing"),children:"Sign In / Sign Up"})]});const g=t?.uid,m=k=>k?.unread?.[g]||0,_=k=>(e?.role==="customer"?k.vendorName:k.customerName)||"",w=k=>k.lastAt?.seconds?new Date(k.lastAt.seconds*1e3):null,b=r.filter(k=>{const R=_(k).toLowerCase(),C=i.toLowerCase();return!C||R.includes(C)||(k.lastMessage||"").toLowerCase().includes(C)});return d.jsxs("div",{className:"min-h-screen pt-10 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 pb-28",children:[d.jsx("div",{className:"sticky top-0 z-10 bg-[#ffffff1d] pt-2 pb-2 backdrop-blur-md",children:d.jsxs("div",{className:"text-[25px] font-light leading-none",children:["My",d.jsx("br",{}),"Conversations"]})}),d.jsxs("div",{className:"mt-4 flex items-center gap-3 border-b border-zinc-300 pb-2",children:[d.jsx(Zf,{className:"h-4 w-4 text-zinc-400"}),d.jsx("input",{placeholder:"Search chats",value:i,onChange:k=>s(k.target.value),className:"w-full outline-none placeholder:text-zinc-400 bg-transparent placeholder:text-sm"})]}),d.jsxs("div",{className:"mt-6 space-y-4 w-full",children:[b.map((k,R)=>d.jsxs("button",{onClick:()=>f(k),className:"w-full rounded-[10px] border border-gray-300 px-4 py-3 text-left h-[62px] flex items-center gap-3 bg-white hover:bg-zinc-50 transition-all duration-200 card-interactive animate-fadeInUp",style:{animationDelay:`${R*.1}s`},children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-zinc-200 flex items-center justify-center",children:d.jsx("span",{className:"text-zinc-500 text-xs font-semibold",children:(_(k)||"U")[0]})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-sm truncate",children:_(k)}),d.jsx("div",{className:"text-zinc-500 text-[10px] truncate",children:k.lastMessage||"No messages yet."})]}),d.jsxs("div",{className:"flex flex-col items-end justify-between h-full min-w-[48px]",children:[m(k)>0&&d.jsx("span",{className:"bg-sky-500 text-white text-[10px] font-semibold rounded-full px-2 py-0.5 mb-1",children:m(k)}),d.jsx("span",{className:"text-zinc-400 text-[10px]",children:w(k)?.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})||""})]})]},k.id)),b.length===0&&d.jsx("div",{className:"text-zinc-500",children:"No conversations yet."})]})]})}function wY(t){return d.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:d.jsxs("g",{children:[d.jsx("circle",{cx:"8",cy:"8",r:"8",fill:"#fd9292"}),d.jsx("path",{d:"M5.5 5.5L10.5 10.5M10.5 5.5L5.5 10.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round"})]})})}function _Y(){const{user:t}=Jn(),e=$i(),[r,n]=z.useState([]);z.useEffect(()=>{if(!t)return;const o=Vr(xr(Et,"users",t.uid,"cart"));return pi(o,async l=>{const c=await Promise.all(l.docs.map(async f=>{const p=f.data(),g=await Aa(kr(Et,"products",p.productId));return{id:f.id,...p,product:{id:g.id,...g.data()}}}));n(c)})},[t]);const i=z.useMemo(()=>r.reduce((o,l)=>o+(l.product?.price||0)*l.qty,0),[r]),s=async()=>{if(!t||!r.length)return;const l=r[0].product?.pharmacyId;await S7({customerId:t.uid,pharmacyId:l,items:r.map(c=>({productId:c.productId,qty:c.qty})),total:i});for(const c of r)await S2(t.uid,c.id);alert("Checkout successful")},a=z.useMemo(()=>{const o=new Map;for(const l of r){const c=l.product?.id;if(c)if(o.has(c)){const f=o.get(c);o.set(c,{...f,qty:f.qty+l.qty,ids:[...f.ids||[f.id],l.id]})}else o.set(c,{...l,ids:[l.id]})}return Array.from(o.values())},[r]);return t?t&&r.length===0?d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:d.jsx("div",{className:"text-zinc-500 font-extralight text-[14px]",children:"Your cart is empty."})}):d.jsxs("div",{className:"pt-10 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col",children:[d.jsx("div",{className:"sticky top-0 z-20 bg-white/90 backdrop-blur-md pb-2 pt-4 -mx-4 sm:-mx-5 md:-mx-8 lg:-mx-12 xl:-mx-0 px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0",children:d.jsx("div",{className:"text-[28px] sm:text-[35px] md:text-[42px] lg:text-[48px] font-light font-poppins",children:"Cart"})}),d.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[a.map((o,l)=>d.jsxs("div",{className:"relative rounded-xl border border-zinc-200 p-2 flex flex-col items-center gap-2 min-w-0 card-interactive animate-fadeInUp",style:{animationDelay:`${l*.1}s`},children:[d.jsx("button",{onClick:()=>o.ids.forEach(c=>S2(t.uid,c)),className:"absolute top-2 right-2 z-10 p-0.5 rounded-full hover:scale-110 transition-all duration-200 hover:bg-red-50 icon-interactive","aria-label":"Remove",children:d.jsx(wY,{className:"w-5 h-5 text-red-500"})}),d.jsx(dh,{name:o.product?.name,image:o.product?.image,category:o.product?.category,size:35,roundedClass:"rounded-xl"}),d.jsxs("div",{className:"flex-1 w-full text-center",children:[d.jsx("div",{className:"font-semibold text-[12px] sm:text-[13px] md:text-[14px] lg:text-[15px] truncate",children:o.product?.name}),d.jsxs("div",{className:"text-zinc-500 text-[10px] sm:text-[11px] md:text-[12px] lg:text-[13px]",children:["",Number(o.product?.price||0).toLocaleString()]})]}),d.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[d.jsx("button",{className:"w-6 h-6 rounded-full border border-zinc-300 flex items-center justify-center text-[18px] font-light disabled:opacity-40 btn-interactive transition-all duration-200 hover:border-sky-500 hover:text-sky-600",onClick:async()=>{o.qty>1&&await S2(t.uid,o.ids[0])},disabled:o.qty<=1,"aria-label":"Decrease quantity",children:"-"}),d.jsx("span",{className:"text-[13px] font-poppins w-6 text-center font-medium",children:o.qty}),d.jsx("button",{className:"w-6 h-6 rounded-full border border-zinc-300 flex items-center justify-center text-[18px] font-light btn-interactive transition-all duration-200 hover:border-sky-500 hover:text-sky-600",onClick:async()=>{if(o.product?.id){const{addToCart:c}=await sp(async()=>{const{addToCart:f}=await Promise.resolve().then(()=>SH);return{addToCart:f}},void 0);await c(t.uid,o.product.id,1)}},"aria-label":"Increase quantity",children:"+"})]})]},o.product?.id)),a.length===0&&d.jsx("div",{className:"text-zinc-500 font-extralight text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] col-span-2",children:"Your cart is empty."})]}),a.length>0&&d.jsxs("div",{className:"mt-6 rounded-xl border border-sky-400 p-3",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between text-[13px] sm:text-[15px] md:text-[18px] lg:text-[22px] font-regular",children:[d.jsx("span",{children:"Total"}),d.jsxs("span",{className:"font-semibold text-[12px] sm:text-[15px]",children:["",Number(i).toLocaleString()]})]}),d.jsx("button",{onClick:s,className:"mt-4 w-full rounded-full border bg-sky-400 text-white py-2 text-[12px] sm:text-[14px] lg:text-[16px] font-light",children:"Proceed to Checkout"})]})]}):d.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[d.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:"Please sign in to continue"}),d.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>e("/auth/landing"),children:"Sign In / Sign Up"})]})}const Fk=["pending","processing","fulfilled","cancelled"];function bY(){const{user:t,profile:e}=Jn(),[r,n]=z.useState([]),[i,s]=z.useState("all"),[a,o]=z.useState({}),[l,c]=z.useState({}),[f,p]=z.useState(null),[g,m]=z.useState([]),_=$i(),w=nu(),[b,k]=z.useState(null);z.useEffect(()=>{if(!t||!e)return;const K=e.uid||t.uid;let P;return e.role==="pharmacy"?P=Vr(xr(Et,"orders"),Wr("pharmacyId","==",K),Dl("createdAt","desc")):P=Vr(xr(Et,"orders"),Wr("customerId","==",K),Dl("createdAt","desc")),pi(P,T=>{n(T.docs.map(O=>({id:O.id,...O.data()})))})},[t,e]),z.useEffect(()=>{const K=w?.state?.highlightOrderId,P=new URLSearchParams(w.search).get("highlight");K?k(K):P&&k(P)},[w]),z.useEffect(()=>{if(!b||r.length===0)return;const K=b,P=setTimeout(()=>{const T=document.getElementById(`order-${K}`);T&&T.scrollIntoView({behavior:"smooth",block:"center"})},250),A=setTimeout(()=>k(null),5e3);return _(w.pathname,{replace:!0,state:{}}),()=>{clearTimeout(P),clearTimeout(A)}},[b,r]);const R=async(K,P)=>{await Za(kr(Et,"orders",K),{status:P})},C=i==="all"?r:r.filter(K=>(K.status||"pending")===i),j=K=>{o(P=>({...P,[K]:!P[K]}))};z.useEffect(()=>{async function K(){if(!f||!f.items)return m([]);const A=f.items.map(O=>O.productId).map(O=>Aa(kr(Et,"products",O))),T=await Promise.all(A);m(T.map(O=>O.exists()?{id:O.id,...O.data()}:null))}K()},[f]);function X(K){const P={};return K.forEach(A=>{const T=A.productId;P[T]?P[T].qty+=Number(A.qty||A.quantity||1):P[T]={...A,qty:Number(A.qty||A.quantity||1)}}),Object.values(P)}return t?d.jsxs("div",{className:"pt-10 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col",children:[d.jsx("div",{className:"sticky top-0 z-20 bg-white/90 backdrop-blur-md pb-2 pt-4 -mx-4 sm:-mx-5 md:-mx-8 lg:-mx-12 xl:-mx-0 px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0",children:d.jsx("div",{className:"text-[28px] sm:text-[35px] md:text-[42px] lg:text-[48px] font-light font-poppins",children:"Orders"})}),d.jsxs("div",{className:"mt-4 flex gap-2 flex-wrap",children:[d.jsx("button",{className:`px-3 py-1 rounded-full border text-[12px] font-light ${i==="all"?"bg-sky-600 text-white border-sky-600":"border-zinc-300 text-zinc-600"}`,onClick:()=>s("all"),children:"All"}),Fk.map(K=>d.jsx("button",{className:`px-3 py-1 rounded-full border text-[12px] font-light ${i===K?"bg-sky-600 text-white border-sky-600":"border-zinc-300 text-zinc-600"}`,onClick:()=>s(K),children:K.charAt(0).toUpperCase()+K.slice(1)},K))]}),d.jsx("div",{className:"mt-6 space-y-4",children:C.length===0?d.jsx("div",{className:"text-zinc-500 font-extralight text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] text-center py-12 animate-fadeInUp",children:"No orders yet."}):C.map((K,P)=>{const A=K.items||[],T=a[K.id],O=A.length>4,I=T?A:A.slice(0,4),D=K.customerPhone||K.customer_phone||K.phone||"",B=l[K.id];return d.jsxs("div",{id:`order-${K.id}`,className:`relative rounded-[10px] border border-gray-200 p-4 flex flex-col gap-2 group hover:bg-sky-50 transition-all duration-200 card-interactive animate-fadeInUp ${b===K.id?"ring-4 ring-sky-200 bg-sky-50 scale-102":""}`,style:{cursor:"pointer",animationDelay:`${P*.1}s`},onClick:re=>{re.target.closest(".order-see-more-btn")||e.role==="pharmacy"&&re.target.closest(".order-status-dropdown")||p(K)},children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"font-light text-[14px] sm:text-[15px] md:text-[18px] lg:text-[22px]",children:["Order #",K.id.slice(0,6)]}),d.jsx("div",{className:"text-gray-500 text-[11px] sm:text-[12px] md:text-[14px] lg:text-[16px] font-light",children:K.createdAt?.toDate?.().toLocaleString?.()||""})]}),d.jsxs("div",{className:"text-[14px] sm:text-[15px] md:text-[18px] lg:text-[22px] font-medium",children:["",Number(K.total).toLocaleString()]})]}),e.role==="pharmacy"&&d.jsxs("div",{className:"mt-2",children:[d.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 flex items-center gap-2",children:["Customer: ",K.customerName||K.customerId||K.customer_id||"N/A"]}),d.jsx("div",{className:"text-[12px] text-zinc-400 font-light mb-2",children:K.customerEmail||""}),d.jsx("div",{className:"text-[13px] text-zinc-700 font-medium mb-1",children:"Items:"}),d.jsx("ul",{className:"ml-2 list-disc text-[13px] text-zinc-700",children:I.map((re,_e)=>d.jsxs("li",{children:[d.jsx("span",{children:re.name||re.productId}),d.jsxs("span",{children:[" x",re.qty||re.quantity||1]})]},_e))}),O&&d.jsx("button",{className:"order-see-more-btn text-sky-600 text-xs mt-1 ml-2 font-medium hover:underline focus:outline-none",onClick:re=>{re.stopPropagation(),j(K.id)},children:T?"See less":`See more (${A.length-4} more)`}),d.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[d.jsx("span",{className:"text-[12px] text-zinc-500",children:"Status:"}),d.jsx("select",{className:"order-status-dropdown border rounded px-2 py-1 text-[12px]",value:K.status||"pending",onChange:re=>R(K.id,re.target.value),children:Fk.map(re=>d.jsx("option",{value:re,children:re.charAt(0).toUpperCase()+re.slice(1)},re))}),D&&!B&&d.jsx("button",{className:"ml-2 px-3 py-1 rounded-full bg-sky-600 text-white text-[12px] font-light",onClick:re=>{re.stopPropagation(),c(_e=>({..._e,[K.id]:!0}))},children:"Reveal Number"}),D&&B&&d.jsx("span",{className:"ml-2 text-[13px] text-zinc-700 font-medium",children:D})]})]})]},K.id)})}),d.jsx(Tb,{open:!!f,onClose:()=>p(null),children:f&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-lg font-medium mb-2",children:["Order #",f.id.slice(0,6)]}),d.jsx("div",{className:"text-zinc-500 text-xs mb-4",children:f.createdAt?.toDate?.().toLocaleString?.()||""}),d.jsx("div",{className:"mb-2 text-[15px] font-medium",children:"Items:"}),d.jsx("ul",{className:"mb-4 space-y-2",children:X(f.items).map((K,P)=>{const A=g.find(T=>T&&T.id===K.productId);return d.jsxs("li",{className:"flex items-center gap-3",children:[A?d.jsx(dh,{name:A.name,image:A.image,category:A.category,size:40,roundedClass:"rounded-lg"}):null,d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"font-poppins font-medium text-[14px]",children:A?A.name:K.productId}),d.jsxs("div",{className:"text-zinc-500 text-xs",children:["Qty: ",K.qty]})]}),d.jsxs("div",{className:"text-[14px] font-medium text-sky-600",children:["",Number(K.price||A?.price||0).toLocaleString()]})]},K.productId)})}),d.jsxs("div",{className:"flex justify-between items-center border-t pt-3 mt-2",children:[d.jsx("div",{className:"text-[15px] font-medium",children:"Total:"}),d.jsxs("div",{className:"text-[15px] font-bold text-sky-700",children:["",Number(f.total).toLocaleString()]})]}),d.jsxs("div",{className:"mt-2 text-xs text-zinc-400",children:["Status: ",f.status||"pending"]})]})})]}):d.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[d.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:"Please sign in to continue"}),d.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>_("/auth/landing"),children:"Sign In / Sign Up"})]})}function jP(t){if(!t)return 1;const e=t.match(/(\d+)x\s*\/\s*day/i);return e?Number(e[1]):1}function EY(t){if(!("Notification"in window)||Notification.permission!=="granted")return;const{drugs:e,startDate:r,duration:n}=t,i=new Date(r),s=new Date,a=Number(n)||1;e.forEach(o=>{const l=jP(o.frequency);for(let c=0;c<a;c++)for(let f=0;f<l;f++){const p=new Date(i.getTime()+c*24*60*60*1e3+f*(24/l)*60*60*1e3);if(p>s){const g=p.getTime()-s.getTime();setTimeout(()=>{new Notification(`Time to take ${o.name}`,{body:`Dosage: ${o.dosage||""} (${o.frequency||""})`})},g)}}})}function SY(t){const{drugs:e,startDate:r,duration:n}=t,i=new Date(r),s=Number(n)||1;let a=`BEGIN:VCALENDAR
VERSION:2.0
`;e.forEach(f=>{const p=jP(f.frequency);for(let g=0;g<s;g++)for(let m=0;m<p;m++){const w=new Date(i.getTime()+g*24*60*60*1e3+m*(24/p)*60*60*1e3).toISOString().replace(/[-:]/g,"").replace(/\..+/,"");a+=`BEGIN:VEVENT
SUMMARY:Take ${f.name}
DESCRIPTION:Dosage: ${f.dosage||""} (${f.frequency||""})
DTSTART:${w}
DTEND:${w}
END:VEVENT
`}}),a+="END:VCALENDAR";const o=new Blob([a],{type:"text/calendar"}),l=URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download="prescription.ics",c.click(),URL.revokeObjectURL(l)}function kY(t){if(localStorage.setItem("prescriptionAlarms",JSON.stringify(t)),"indexedDB"in window){const e=indexedDB.open("HealthAppDB",1);e.onupgradeneeded=r=>{const n=r.target.result;n.objectStoreNames.contains("alarms")||n.createObjectStore("alarms",{keyPath:"id"})},e.onsuccess=r=>{const s=r.target.result.transaction("alarms","readwrite").objectStore("alarms");t.forEach(a=>s.put(a))}}}function TY(){const{user:t}=Jn(),[e,r]=z.useState([]),[n,i]=z.useState(!1);if(z.useEffect(()=>{if(!t)return;async function o(){await N7({customerId:t.uid});const l=Vr(xr(Et,"prescriptions"),Wr("customerId","==",t.uid));let f=(await ci(l)).docs.map(p=>({id:p.id,...p.data()}));f=f.sort((p,g)=>new Date(g.startDate)-new Date(p.startDate)),r(f),Notification.permission==="granted"&&f.forEach(EY),kY(f)}o()},[t]),z.useEffect(()=>{"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()},[]),!t)return null;const s=e.length,a=n?e:e.slice(0,1);return d.jsxs("div",{className:"w-full",children:[d.jsxs("div",{className:"text-[18px] font-light font-poppins text-black mb-2 tracking-tight",children:["My Prescriptions",e.length>0&&d.jsx("button",{className:"ml-4 px-3 py-1 rounded-full bg-green-100 text-green-700 text-xs font-medium",onClick:()=>e.forEach(SY),children:"Add to Calendar"})]}),e.length===0?d.jsx("div",{className:"text-zinc-400 text-[12px] font-light",children:"No prescriptions found."}):d.jsxs(d.Fragment,{children:[d.jsx(L7,{prescriptions:a,userId:t.uid,chatThreadId:null}),s>1&&!n&&d.jsxs("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-700 text-xs font-medium",onClick:()=>i(!0),children:["See more (",s,")"]}),n&&s>1&&d.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-zinc-100 text-zinc-700 text-xs font-medium",onClick:()=>i(!1),children:"See less"})]})]})}class AY{constructor(){this.audio=null,this.permissionRequested=!1,this.notificationQueue=[],this.isProcessing=!1,this.initializeAudio(),this.requestPermissionOnUserInteraction()}initializeAudio(){try{this.audio=new Audio("/src/assets/message-tone.mp3"),this.audio.volume=.6,this.audio.preload="auto"}catch(e){console.warn("Notification audio not available:",e)}}requestPermissionOnUserInteraction(){if(!("Notification"in window)){console.warn("This browser does not support notifications");return}const e=()=>{!this.permissionRequested&&Notification.permission==="default"&&(this.permissionRequested=!0,Notification.requestPermission().then(r=>{console.log("Notification permission:",r)}))};document.addEventListener("click",e,{once:!0}),document.addEventListener("keydown",e,{once:!0}),document.addEventListener("touchstart",e,{once:!0})}playSound(){if(this.audio)try{this.audio.currentTime=0,this.audio.play().catch(e=>{console.warn("Could not play notification sound:",e)})}catch(e){console.warn("Audio playback error:",e)}}showNotification(e,r={}){if(!("Notification"in window)||Notification.permission!=="granted")return null;const n={icon:"/favicon.ico",badge:"/favicon.ico",requireInteraction:!1,silent:!1,...r};try{const i=new Notification(e,n);return n.requireInteraction||setTimeout(()=>{i&&i.close()},8e3),i.onclick=()=>{window.focus(),i.close(),r.onClick&&r.onClick()},i}catch(i){return console.error("Error showing notification:",i),null}}queueNotification(e){this.notificationQueue.push(e),this.processQueue()}async processQueue(){if(!(this.isProcessing||this.notificationQueue.length===0)){for(this.isProcessing=!0;this.notificationQueue.length>0;){const e=this.notificationQueue.shift();await this.processNotification(e),this.notificationQueue.length>0&&await new Promise(r=>setTimeout(r,1e3))}this.isProcessing=!1}}async processNotification(e){const{type:r,data:n,options:i={}}=e,s=document.hidden||i.force;switch(s&&this.playSound(),r){case"order_received":return this.handleOrderReceived(n,s);case"order_status_updated":return this.handleOrderStatusUpdated(n,s);case"message_received":return this.handleMessageReceived(n,s);case"prescription_ready":return this.handlePrescriptionReady(n,s);default:console.warn("Unknown notification type:",r)}}handleOrderReceived(e,r){const n=" New Order Received!",i=`Order #${e.id?.slice(-8)} - ${(e.total||0).toLocaleString()} from ${e.customerName||"Customer"}`;if(r)return this.showNotification(n,{body:i,tag:"order-received",icon:"/favicon.ico",onClick:()=>{window.location.hash="#/orders"}})}handleOrderStatusUpdated(e,r){const i={confirmed:" Order Confirmed",preparing:" Order Being Prepared",ready:" Order Ready for Pickup",completed:" Order Completed",cancelled:" Order Cancelled"}[e.status]||" Order Updated",s=`Order #${e.id?.slice(-8)} - ${e.pharmacyName||"Pharmacy"}`;if(r)return this.showNotification(i,{body:s,tag:"order-status",icon:"/favicon.ico",onClick:()=>{window.location.hash="#/orders"}})}handleMessageReceived(e,r){const n=` ${e.senderName||"New Message"}`,i=e.text?.slice(0,100)+(e.text?.length>100?"...":"")||"Sent an attachment";if(r)return this.showNotification(n,{body:i,tag:"message",icon:"/favicon.ico",onClick:()=>{window.location.hash="#/messages"}})}handlePrescriptionReady(e,r){const n=" Prescription Ready",i=`Your prescription is ready for pickup at ${e.pharmacyName}`;if(r)return this.showNotification(n,{body:i,tag:"prescription",icon:"/favicon.ico",requireInteraction:!0,onClick:()=>{window.location.hash="#/orders"}})}notifyOrderReceived(e){this.queueNotification({type:"order_received",data:e})}notifyOrderStatusUpdated(e){this.queueNotification({type:"order_status_updated",data:e})}notifyMessageReceived(e){this.queueNotification({type:"message_received",data:e})}notifyPrescriptionReady(e){this.queueNotification({type:"prescription_ready",data:e})}get isSupported(){return"Notification"in window}get isPermitted(){return this.isSupported&&Notification.permission==="granted"}get permissionStatus(){return this.isSupported?Notification.permission:"not-supported"}}const Mc=new AY;function MP(){const[t,e]=z.useState(Mc.permissionStatus),[r,n]=z.useState(!1);z.useEffect(()=>{e(Mc.permissionStatus);const f=setInterval(()=>{e(Mc.permissionStatus)},1e3);return()=>clearInterval(f)},[]);const i=async()=>{if(!Mc.isSupported){alert("Notifications are not supported in this browser");return}try{const c=await Notification.requestPermission();e(c)}catch(c){console.error("Error requesting notification permission:",c)}},s=()=>{if(!Mc.isPermitted){alert("Please enable notifications first");return}Mc.showNotification(" Test Notification",{body:"This is a test notification from PharmaSeaHealth",tag:"test",requireInteraction:!1}),n(!0),setTimeout(()=>n(!1),3e3)},a=()=>{switch(t){case"granted":return d.jsx(F0,{className:"h-5 w-5 text-green-500"});case"denied":return d.jsx(BH,{className:"h-5 w-5 text-red-500"});case"default":return d.jsx(Bx,{className:"h-5 w-5 text-yellow-500"});default:return d.jsx(UH,{className:"h-5 w-5 text-gray-500"})}},o=()=>{switch(t){case"granted":return"Notifications enabled";case"denied":return"Notifications blocked";case"default":return"Permission not requested";case"not-supported":return"Not supported in this browser";default:return"Unknown status"}},l=()=>{switch(t){case"granted":return"You will receive notifications for new orders, messages, and order updates.";case"denied":return"Notifications are blocked. You can enable them in your browser settings.";case"default":return"Click the button below to enable notifications for orders and messages.";case"not-supported":return"Your browser does not support push notifications.";default:return"Unable to determine notification status."}};return d.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx(Bx,{className:"h-6 w-6 text-blue-600"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notification Settings"})]}),d.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a(),d.jsx("span",{className:"font-medium text-gray-900",children:o()})]}),d.jsx("p",{className:"text-sm text-gray-600",children:l()})]}),d.jsxs("div",{className:"space-y-3",children:[t==="default"&&d.jsxs("button",{onClick:i,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[d.jsx(Bx,{className:"h-4 w-4"}),"Enable Notifications"]}),t==="granted"&&d.jsx("button",{onClick:s,disabled:r,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 ${r?"bg-green-100 text-green-800 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:r?d.jsxs(d.Fragment,{children:[d.jsx(F0,{className:"h-4 w-4"}),"Test Sent!"]}):d.jsxs(d.Fragment,{children:[d.jsx(Bx,{className:"h-4 w-4"}),"Send Test Notification"]})}),t==="denied"&&d.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(qH,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),d.jsxs("div",{className:"text-sm",children:[d.jsx("p",{className:"font-medium text-red-800 mb-1",children:"How to enable notifications:"}),d.jsxs("ol",{className:"text-red-700 space-y-1 list-decimal list-inside",children:[d.jsx("li",{children:"Click the lock icon in your browser's address bar"}),d.jsx("li",{children:'Select "Allow" for notifications'}),d.jsx("li",{children:"Refresh the page"})]})]})]})})]}),d.jsxs("div",{className:"mt-6 pt-6 border-t",children:[d.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"You'll be notified about:"}),d.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(F0,{className:"h-4 w-4 text-green-500"}),d.jsx("span",{children:"New orders received (Pharmacies)"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(F0,{className:"h-4 w-4 text-green-500"}),d.jsx("span",{children:"Order status updates (Customers)"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(F0,{className:"h-4 w-4 text-green-500"}),d.jsx("span",{children:"New messages in chats"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(F0,{className:"h-4 w-4 text-green-500"}),d.jsx("span",{children:"Prescription ready for pickup"})]})]})]})]})}function NY(){const{user:t,logout:e}=Jn(),[r,n]=z.useState(!1),[i,s]=z.useState(""),[a,o]=z.useState(""),[l,c]=z.useState(""),[f,p]=z.useState(""),[g,m]=z.useState(!1),[_,w]=z.useState(0),[b,k]=z.useState(0),[R,C]=z.useState([]),[j,X]=z.useState({displayName:t?.displayName||"Customer",address:"Kuje, Abuja, Nigeria",phone:t?.phoneNumber||"",email:t?.email||""}),[K,P]=z.useState(""),[A,T]=z.useState(!1),[O,I]=z.useState("all"),[D,B]=z.useState([]),[re,_e]=z.useState(null),[Ce,we]=z.useState(null),ce=$i();z.useEffect(()=>{if(!t)return;ci(xr(Et,"users",t.uid,"cart")).then(N=>{w(N.size)}),ci(Vr(xr(Et,"threads"),Wr("customerId","==",t.uid))).then(N=>{k(N.size)}),ci(Vr(xr(Et,"orders"),Wr("customerId","==",t.uid))).then(async N=>{const U={};for(const Y of N.docs){const ae=Y.data();for(const pe of ae.items||[]){const he=pe.productId;if(!U[he]){let ke=pe.name;if(!ke&&he){const Fe=await Aa(kr(Et,"products",he));ke=Fe.exists()?Fe.data().name:he}U[he]={name:ke,count:0,lastDate:ae.createdAt?.toDate?.()||null}}U[he].count+=Number(pe.qty||pe.quantity||1);const xe=ae.createdAt?.toDate?.()||null;xe&&(!U[he].lastDate||xe>U[he].lastDate)&&(U[he].lastDate=xe)}}const W=Object.values(U).sort((Y,ae)=>(ae.lastDate||0)-(Y.lastDate||0));C(W)});const te=kr(Et,"users",t.uid),J=pi(te,N=>{if(N&&N.exists()){const U=N.data();X(W=>{let Y=U.phoneNumber??U.phone??W.phone??"";return typeof Y=="string"&&Y.includes("@")&&(Y=W.phone??""),{displayName:U.displayName||t.displayName||W.displayName,address:U.address||W.address||"",phone:Y,email:U.email||t.email||W.email||""}})}},()=>{});return()=>J&&J()},[t]),z.useEffect(()=>{!r&&j&&(s(j.displayName||""),o(j.phone||""),c(j.address||"Kuje, Abuja, Nigeria"))},[j,r]);async function H(){const te=(K||"").trim().toLowerCase();if(!te){B([]);return}const J=[];if((O==="drugs"||O==="all")&&(R||[]).forEach(N=>{`${N.name||""}`.toLowerCase().includes(te)&&J.push({type:"drug",title:N.name,subtitle:`Bought ${N.count||0} times`,item:N})}),O==="orders"||O==="all"){let N=re;N||(N=(await ci(Vr(xr(Et,"orders"),Wr("customerId","==",t.uid)))).docs.map(W=>({id:W.id,...W.data()})),_e(N)),(N||[]).forEach(U=>{`${U.id} ${(U.items||[]).map(Y=>Y.name).join(" ")} ${U.total||""}`.toLowerCase().includes(te)&&J.push({type:"order",title:`Order ${U.id}`,subtitle:`${U.items?.length||0} items  ${Number(U.total||0).toLocaleString()}`,item:U})})}if(O==="prescriptions"||O==="all"){let N=Ce;N||(N=(await ci(Vr(xr(Et,"prescriptions"),Wr("customerId","==",t.uid)))).docs.map(W=>({id:W.id,...W.data()})),we(N)),(N||[]).forEach(U=>{const W=(U.medicines||[]).join(" ");`${U.id} ${W} ${U.note||""} ${U.pharmacyName||""}`.toLowerCase().includes(te)&&J.push({type:"prescription",title:`Prescription ${U.id}`,subtitle:U.note||"",item:U})})}B(J)}return z.useEffect(()=>{if(!A)return;function te(J){J.key==="Escape"&&(T(!1),P(""),B([]))}return window.addEventListener("keydown",te),()=>window.removeEventListener("keydown",te)},[A]),z.useEffect(()=>{if(!A)return;if(!(K||"").trim()){B([]);return}const J=setTimeout(()=>{H()},300);return()=>clearTimeout(J)},[K,O,A]),t?d.jsxs("div",{className:"pt-10 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen animate-fadeInUp",children:[d.jsx("div",{className:"sticky top-0 z-20 bg-white/90 backdrop-blur-md pb-2 pt-4 -mx-4 sm:-mx-5 md:-mx-8 lg:-mx-12 xl:-mx-0 px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 transition-all duration-200",children:d.jsxs("div",{className:"w-full flex items-center justify-between",children:[d.jsxs("div",{className:"text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-light font-poppins leading-none animate-slideInLeft",children:["My",d.jsx("br",{}),"Profile"]}),d.jsx("div",{className:"flex items-center gap-2 animate-slideInRight",children:d.jsx("button",{onClick:()=>T(!0),"aria-label":"Open search",className:"rounded-full p-2 hover:bg-sky-50 btn-interactive icon-interactive transition-all duration-200",children:d.jsx(Zf,{className:"h-5 w-5 text-sky-600"})})})]})}),A&&d.jsx("div",{onClick:()=>{T(!1),P(""),B([])},className:"fixed inset-0 z-50 flex items-start justify-center pt-24 bg-black bg-opacity-30 animate-fadeInScale",role:"dialog","aria-modal":"true","aria-label":"Search modal",children:d.jsxs("div",{onClick:te=>te.stopPropagation(),className:"bg-white rounded-3xl w-[min(920px,95%)] p-4 shadow-xl border border-[#9ED3FF] max-h-[80vh] overflow-hidden modal-backdrop animate-bounceIn",children:[d.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[d.jsx("div",{className:"flex-1 min-w-0",children:d.jsxs("div",{className:"flex items-center bg-[#F0FAFF] border border-[#9ED3FF] rounded-full px-3 py-2 w-full overflow-hidden input-interactive",children:[d.jsx(Zf,{className:"h-4 w-4 text-sky-600 mr-2 flex-shrink-0"}),d.jsx("input",{autoFocus:!0,value:K,onChange:te=>P(te.target.value),onKeyDown:te=>{te.key==="Enter"&&H()},placeholder:"Search prescriptions, orders, drugs...",className:"flex-1 min-w-0 bg-transparent text-sm outline-none truncate","aria-label":"Search query"})]})}),d.jsx("div",{className:"flex items-center gap-2",children:d.jsxs("select",{value:O,onChange:te=>I(te.target.value),className:"rounded-full border border-[#9ED3FF] px-3 py-2 text-sm bg-white w-36 input-interactive",children:[d.jsx("option",{value:"prescriptions",children:"Prescriptions"}),d.jsx("option",{value:"orders",children:"Orders"}),d.jsx("option",{value:"drugs",children:"Drugs"}),d.jsx("option",{value:"all",children:"All"})]})})]}),d.jsx("div",{className:"border-t",style:{borderColor:"#E6F7FF"}}),d.jsx("div",{className:"mt-4 max-h-[60vh] overflow-auto px-1 py-2",children:D.length===0?d.jsx("div",{className:"text-zinc-500 p-4",children:"No results yet. Enter a query."}):d.jsx("ul",{className:"space-y-2",children:D.map((te,J)=>d.jsxs("li",{className:"p-2 rounded-2xl border border-[#9ED3FF] bg-white hover:bg-[#E3F3FF] transition-all duration-200 flex items-center gap-3 justify-between animate-fadeInUp card-interactive hover:shadow-md",style:{animationDelay:`${J*.05}s`},children:[d.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${te.type==="order"?"bg-green-100":te.type==="prescription"?"bg-blue-100":"bg-purple-100"}`,children:te.type==="order"?d.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}):te.type==="prescription"?d.jsx("svg",{className:"h-4 w-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}):d.jsx("svg",{className:"h-4 w-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),d.jsxs("div",{className:"min-w-0",children:[d.jsx("div",{className:"font-semibold text-sm text-black truncate",children:te.title}),d.jsx("div",{className:"text-xs text-zinc-500 truncate",children:te.subtitle})]})]}),d.jsx("div",{className:"flex-shrink-0 flex items-center gap-2",children:te.type==="order"?d.jsx("button",{onClick:()=>{ce("/orders",{state:{highlightOrderId:te.item.id}}),T(!1),P(""),B([])},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 btn-interactive transition-all duration-200",children:"Open"}):te.type==="prescription"?d.jsx("button",{onClick:()=>{ce(`/prescriptions/${te.item.id}`),T(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 btn-interactive transition-all duration-200",children:"Open"}):d.jsx("button",{onClick:()=>{T(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 btn-interactive transition-all duration-200",children:"View"})})]},J))})})]})}),d.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-6",children:[d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] border-[#36A5FF] p-4 flex flex-col items-start",children:[d.jsx("div",{className:"w-20 h-20 rounded-full bg-zinc-200 flex items-center justify-center mb-3 overflow-hidden",children:t?.photoURL?d.jsx("img",{src:t.photoURL,alt:"avatar",className:"w-full h-full object-cover rounded-full"}):d.jsx("span",{className:"text-3xl text-zinc-400 font-light",children:j.displayName&&j.displayName[0]||"C"})}),d.jsxs("div",{className:"w-full flex items-center justify-between mt-1",children:[d.jsx("div",{className:"text-[20px] font-medium text-sky-600 tracking-tighter",children:j.displayName||"Customer"}),d.jsxs("button",{className:"ml-2 px-3 py-1 rounded-full border border-sky-200 text-sky-600 text-xs flex items-center gap-1 hover:bg-sky-50",onClick:()=>n(!0),children:[d.jsx(GH,{className:"h-4 w-4"})," Edit"]})]}),r&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 animate-fadeInScale",children:d.jsxs("div",{className:"bg-white border border-[#36A5FF] rounded-3xl p-5 w-[90vw] max-w-sm shadow-xl modal-backdrop animate-bounceIn",children:[d.jsx("div",{className:"text-[22px] font-light font-poppins text-sky-600 mb-2 tracking-tight animate-slideInLeft",children:"Edit Profile"}),d.jsxs("form",{className:"flex flex-col gap-4",onSubmit:async te=>{if(te.preventDefault(),i!==(j?.displayName||t?.displayName)||a!==(j?.phone||t?.phoneNumber)||l!==(j?.address||"Address missing")){if(!f){alert("Please enter your account password to save changes.");return}try{const J=Qd.credential(t.email,f);await zz(t,J),await WI(t,{displayName:i}),await Za(kr(Et,"users",t.uid),{displayName:i,phoneNumber:a,address:l}),n(!1),window.location.reload()}catch(J){alert("Failed to update profile: "+J.message)}}else n(!1)},children:[d.jsx("label",{className:"text-[12px] text-zinc-500 font-light animate-fadeInUp",style:{animationDelay:"0.1s"}}),d.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 transition-all input-interactive animate-fadeInUp",style:{animationDelay:"0.2s",boxShadow:"none"},value:i,placeholder:"Name",onChange:te=>s(te.target.value)}),d.jsx("label",{className:"text-[12px] text-zinc-500 font-light"}),d.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 transition-all",value:a,placeholder:"Phone Number",onChange:te=>o(te.target.value),style:{boxShadow:"none"}}),d.jsx("label",{className:"text-[12px] text-zinc-500 font-light"}),d.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 transition-all",value:l,placeholder:"Address",onChange:te=>c(te.target.value),style:{boxShadow:"none"}}),d.jsx("label",{className:"text-[12px] text-zinc-500 font-light"}),d.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 transition-all",type:"password",placeholder:"Account Password (required to save)",onChange:te=>p(te.target.value),required:!0,style:{boxShadow:"none"}}),d.jsxs("div",{className:"flex gap-2 mt-4",children:[d.jsx("button",{type:"button",className:"px-4 py-2 rounded-full bg-zinc-100 text-[12px] font-light",onClick:()=>n(!1),children:"Cancel"}),d.jsx("button",{type:"submit",className:"px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light",children:"Save"})]})]})]})}),d.jsx("div",{className:"text-zinc-500 mt-1 text-[12px] font-light w-full pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:j.email}),d.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 mt-2 text-[12px] font-light w-full pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[d.jsx(ac,{className:"h-2.5 w-2.5"})," ",j.address||"Kuje, Abuja, Nigeria"]}),d.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 mt-1 text-[12px] font-light w-full",children:[d.jsx(Lp,{className:"h-2.5 w-2.5"})," ",j.phone||"phone number missing"]})]}),d.jsx("div",{children:d.jsxs("button",{onClick:()=>{e(),window.location.href="/auth/landing"},className:"rounded-full border border-red-300 text-red-600 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:[d.jsx(p_,{className:"h-4 w-4"})," Log Out"]})})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] border-[#36A5FF] p-4 flex flex-col items-start",children:[d.jsx("div",{className:"text-[18px] font-light font-poppins text-black mb-2 tracking-tight",children:"My Activity"}),d.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[d.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:"Items in Cart"}),d.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:_??0})]}),d.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[d.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:"Active Chats"}),d.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:b??0})]}),d.jsxs("div",{className:"w-full flex items-center justify-between mt-3 mb-1",children:[d.jsx("span",{className:"text-[14px] font-light text-zinc-800",children:"Drugs Bought"}),d.jsx("button",{className:"text-[12px] text-sky-600 font-light px-2 py-1 rounded-full hover:bg-sky-50",onClick:()=>m(!0),children:"See more"})]}),d.jsx("div",{className:"w-full flex flex-col gap-2",children:R.slice(0,3).map((te,J)=>d.jsxs("div",{className:"w-full flex items-center pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[d.jsx("span",{className:"text-[12px] text-zinc-500 font-light w-1/3 text-left",children:te.name}),d.jsx("span",{className:"text-[12px] text-zinc-400 font-light w-1/3 flex justify-center",children:te.date}),d.jsx("span",{className:"text-[12px] text-zinc-500 font-light w-1/3 text-right",children:te.count??1})]},te.id||J))}),g&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:d.jsxs("div",{className:"bg-white border border-[#36A5FF] rounded-3xl p-5 w-[90vw] max-w-sm shadow-xl",children:[d.jsx("div",{className:"text-[18px] font-light font-poppins text-sky-600 mb-2 tracking-tight",children:"All Drugs Bought"}),d.jsx("div",{className:"flex flex-col gap-2 max-h-[60vh] overflow-y-auto",children:R.map((te,J)=>d.jsxs("div",{className:"w-full flex items-center pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[d.jsx("span",{className:"text-[12px] text-zinc-500 font-light w-1/3 text-left",children:te.name}),d.jsx("span",{className:"text-[12px] text-zinc-400 font-light w-1/3 flex justify-center",children:te.date}),d.jsx("span",{className:"text-[12px] text-zinc-500 font-light w-1/3 text-right",children:te.count??1})]},te.id||J))}),d.jsx("button",{className:"mt-4 px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light w-full",onClick:()=>m(!1),children:"Close"})]})})]}),d.jsx("div",{className:"rounded-3xl border bg-[#F7F7F7] border-[#36A5FF] p-4 flex flex-col items-start",children:d.jsx(TY,{})}),d.jsx("div",{className:"rounded-3xl border bg-[#F7F7F7] border-[#36A5FF] p-4 flex flex-col items-start",children:d.jsx(MP,{})})]})]})]}):d.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[d.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:"Please sign in to continue"}),d.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>ce("/auth/landing"),children:"Sign In / Sign Up"})]})}function CY({className:t="",...e}){return d.jsx("textarea",{className:`w-full rounded-2xl border px-3 py-2 outline-none ${t}`,...e})}function BP({pharmacyId:t,onClose:e}){const[r,n]=z.useState({name:"",price:"",category:"OvertheCounter",stock:0,sku:"",image:"",description:""}),[i,s]=z.useState(null),[a,o]=z.useState(!1),l=async()=>{if(!r.name||!r.price)return alert("Name and price required");o(!0);try{let c=r.image;if(!c&&i){const p=`products/${t}/${Date.now()}_${i.name}`,g=xH(EH,p);await mH(g,i),c=await gH(g)}const f=(r.tags||"").split(",").map(p=>p.trim()).filter(Boolean);await b7({...r,image:c,price:Number(r.price),pharmacyId:t,tags:f}),e()}catch(c){alert(c.message)}finally{o(!1)}};return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 backdrop-blur-sm animate-fade-in",children:d.jsxs("div",{className:"bg-white rounded-3xl p-6 w-[90vw] max-w-sm shadow-xl border border-[#9ED3FF] animate-bounce-in card-interactive hover:shadow-2xl transition-all duration-300",children:[d.jsx("div",{className:"text-lg font-light font-poppins mb-4 text-black animate-text-reveal",children:"Add Product"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none focus:border-sky-500 transition-colors duration-200 hover:border-sky-400",placeholder:"Name",value:r.name,onChange:c=>n({...r,name:c.target.value})}),d.jsxs("select",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none bg-white focus:border-sky-500 transition-colors duration-200 hover:border-sky-400",value:r.category,onChange:c=>n({...r,category:c.target.value}),children:[d.jsx("option",{value:"Prescription",children:"Prescription"}),d.jsx("option",{value:"Over-the-counter",children:"Over-the-counter"}),d.jsx("option",{value:"Syrup",children:"Syrup"}),d.jsx("option",{value:"Therapeutic",children:"Therapeutic"}),d.jsx("option",{value:"Controlled",children:"Controlled"}),d.jsx("option",{value:"Target System",children:"Target System"}),d.jsx("option",{value:"Others",children:"Others"})]}),d.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none focus:border-sky-500 transition-colors duration-200 hover:border-sky-400",placeholder:"Stock",type:"number",value:r.stock,onChange:c=>n({...r,stock:c.target.value})}),d.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none focus:border-sky-500 transition-colors duration-200 hover:border-sky-400",placeholder:"SKU",value:r.sku,onChange:c=>n({...r,sku:c.target.value})}),d.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none focus:border-sky-500 transition-colors duration-200 hover:border-sky-400",placeholder:"Price",type:"number",value:r.price,onChange:c=>n({...r,price:c.target.value})}),d.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none focus:border-sky-500 transition-colors duration-200 hover:border-sky-400",placeholder:"Tags (comma separated, e.g. pain relief, children)",value:r.tags||"",onChange:c=>n({...r,tags:c.target.value})}),d.jsxs("div",{className:"flex flex-col gap-2 pt-2 animate-fade-in",style:{animationDelay:"0.2s"},children:[d.jsx("label",{className:"text-[13px] font-light text-zinc-500",children:"Product Image"}),d.jsx("input",{type:"file",accept:"image/*",className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 focus:border-sky-500 transition-colors duration-200 hover:border-sky-400",onChange:c=>s(c.target.files?.[0]||null)}),d.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none focus:border-sky-500 transition-colors duration-200 hover:border-sky-400",placeholder:"Or paste image link here",value:r.image,onChange:c=>n({...r,image:c.target.value})})]})]}),d.jsx("div",{className:"mt-3 animate-fade-in",style:{animationDelay:"0.3s"},children:d.jsx(CY,{rows:3,placeholder:"Description",value:r.description,onChange:c=>n({...r,description:c.target.value}),className:"focus:border-sky-500 transition-colors duration-200 hover:border-sky-400"})}),d.jsxs("div",{className:"flex gap-2 mt-6 animate-fade-in-up",style:{animationDelay:"0.4s"},children:[d.jsx("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700 btn-interactive hover:scale-105 active:scale-95 transition-all duration-200",disabled:a,onClick:l,children:a?"Uploading":"Add"}),d.jsx("button",{className:"flex-1 rounded-full border border-zinc-300 text-zinc-500 text-[13px] font-light py-2 btn-interactive hover:border-zinc-400 hover:scale-105 active:scale-95 transition-all duration-200",onClick:e,children:"Cancel"})]})]})})}var T2={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var IY=T2.exports,Lk;function PY(){return Lk||(Lk=1,(function(t,e){((r,n)=>{t.exports=n()})(IY,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},i,s=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},l=0,c={};function f(A){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(T){var O=X(T);O.chunkSize=parseInt(O.chunkSize),T.step||T.chunk||(O.chunkSize=null),this._handle=new w(O),(this._handle.streamer=this)._config=O}).call(this,A),this.parseChunk=function(T,O){var I=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<I){let B=this._config.newline;B||(D=this._config.quoteChar||'"',B=this._handle.guessLineEndings(T,D)),T=[...T.split(B).slice(I)].join(B)}this.isFirstChunk&&P(this._config.beforeFirstChunk)&&(D=this._config.beforeFirstChunk(T))!==void 0&&(T=D),this.isFirstChunk=!1,this._halted=!1;var I=this._partialLine+T,D=(this._partialLine="",this._handle.parse(I,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(T=D.meta.cursor,I=(this._finished||(this._partialLine=I.substring(T-this._baseIndex),this._baseIndex=T),D&&D.data&&(this._rowCount+=D.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)n.postMessage({results:D,workerId:c.WORKER_ID,finished:I});else if(P(this._config.chunk)&&!O){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=D=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!I||!P(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),I||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(T){P(this._config.error)?this._config.error(T):a&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:T,finished:!1})}}function p(A){var T;(A=A||{}).chunkSize||(A.chunkSize=c.RemoteChunkSize),f.call(this,A),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(O){this._input=O,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(T=new XMLHttpRequest,this._config.withCredentials&&(T.withCredentials=this._config.withCredentials),s||(T.onload=K(this._chunkLoaded,this),T.onerror=K(this._chunkError,this)),T.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var O,I=this._config.downloadRequestHeaders;for(O in I)T.setRequestHeader(O,I[O])}var D;this._config.chunkSize&&(D=this._start+this._config.chunkSize-1,T.setRequestHeader("Range","bytes="+this._start+"-"+D));try{T.send(this._config.downloadRequestBody)}catch(B){this._chunkError(B.message)}s&&T.status===0&&this._chunkError()}},this._chunkLoaded=function(){T.readyState===4&&(T.status<200||400<=T.status?this._chunkError():(this._start+=this._config.chunkSize||T.responseText.length,this._finished=!this._config.chunkSize||this._start>=(O=>(O=O.getResponseHeader("Content-Range"))!==null?parseInt(O.substring(O.lastIndexOf("/")+1)):-1)(T),this.parseChunk(T.responseText)))},this._chunkError=function(O){O=T.statusText||O,this._sendError(new Error(O))}}function g(A){(A=A||{}).chunkSize||(A.chunkSize=c.LocalChunkSize),f.call(this,A);var T,O,I=typeof FileReader<"u";this.stream=function(D){this._input=D,O=D.slice||D.webkitSlice||D.mozSlice,I?((T=new FileReader).onload=K(this._chunkLoaded,this),T.onerror=K(this._chunkError,this)):T=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var D=this._input,B=(this._config.chunkSize&&(B=Math.min(this._start+this._config.chunkSize,this._input.size),D=O.call(D,this._start,B)),T.readAsText(D,this._config.encoding));I||this._chunkLoaded({target:{result:B}})},this._chunkLoaded=function(D){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(D.target.result)},this._chunkError=function(){this._sendError(T.error)}}function m(A){var T;f.call(this,A=A||{}),this.stream=function(O){return T=O,this._nextChunk()},this._nextChunk=function(){var O,I;if(!this._finished)return O=this._config.chunkSize,T=O?(I=T.substring(0,O),T.substring(O)):(I=T,""),this._finished=!T,this.parseChunk(I)}}function _(A){f.call(this,A=A||{});var T=[],O=!0,I=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(D){this._input=D,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){I&&T.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),T.length?this.parseChunk(T.shift()):O=!0},this._streamData=K(function(D){try{T.push(typeof D=="string"?D:D.toString(this._config.encoding)),O&&(O=!1,this._checkIsFinished(),this.parseChunk(T.shift()))}catch(B){this._streamError(B)}},this),this._streamError=K(function(D){this._streamCleanUp(),this._sendError(D)},this),this._streamEnd=K(function(){this._streamCleanUp(),I=!0,this._streamData("")},this),this._streamCleanUp=K(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function w(A){var T,O,I,D,B=Math.pow(2,53),re=-B,_e=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Ce=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,we=this,ce=0,H=0,te=!1,J=!1,N=[],U={data:[],errors:[],meta:{}};function W(he){return A.skipEmptyLines==="greedy"?he.join("").trim()==="":he.length===1&&he[0].length===0}function Y(){if(U&&I&&(pe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),I=!1),A.skipEmptyLines&&(U.data=U.data.filter(function(Fe){return!W(Fe)})),ae()){let Fe=function(oe,Ze){P(A.transformHeader)&&(oe=A.transformHeader(oe,Ze)),N.push(oe)};if(U)if(Array.isArray(U.data[0])){for(var he=0;ae()&&he<U.data.length;he++)U.data[he].forEach(Fe);U.data.splice(0,1)}else U.data.forEach(Fe)}function xe(Fe,oe){for(var Ze=A.header?{}:[],Re=0;Re<Fe.length;Re++){var fe=Re,ut=Fe[Re],ut=((rt,lt)=>(le=>(A.dynamicTypingFunction&&A.dynamicTyping[le]===void 0&&(A.dynamicTyping[le]=A.dynamicTypingFunction(le)),(A.dynamicTyping[le]||A.dynamicTyping)===!0))(rt)?lt==="true"||lt==="TRUE"||lt!=="false"&&lt!=="FALSE"&&((le=>{if(_e.test(le)&&(le=parseFloat(le),re<le&&le<B))return 1})(lt)?parseFloat(lt):Ce.test(lt)?new Date(lt):lt===""?null:lt):lt)(fe=A.header?Re>=N.length?"__parsed_extra":N[Re]:fe,ut=A.transform?A.transform(ut,fe):ut);fe==="__parsed_extra"?(Ze[fe]=Ze[fe]||[],Ze[fe].push(ut)):Ze[fe]=ut}return A.header&&(Re>N.length?pe("FieldMismatch","TooManyFields","Too many fields: expected "+N.length+" fields but parsed "+Re,H+oe):Re<N.length&&pe("FieldMismatch","TooFewFields","Too few fields: expected "+N.length+" fields but parsed "+Re,H+oe)),Ze}var ke;U&&(A.header||A.dynamicTyping||A.transform)&&(ke=1,!U.data.length||Array.isArray(U.data[0])?(U.data=U.data.map(xe),ke=U.data.length):U.data=xe(U.data,0),A.header&&U.meta&&(U.meta.fields=N),H+=ke)}function ae(){return A.header&&N.length===0}function pe(he,xe,ke,Fe){he={type:he,code:xe,message:ke},Fe!==void 0&&(he.row=Fe),U.errors.push(he)}P(A.step)&&(D=A.step,A.step=function(he){U=he,ae()?Y():(Y(),U.data.length!==0&&(ce+=he.data.length,A.preview&&ce>A.preview?O.abort():(U.data=U.data[0],D(U,we))))}),this.parse=function(he,xe,ke){var Fe=A.quoteChar||'"',Fe=(A.newline||(A.newline=this.guessLineEndings(he,Fe)),I=!1,A.delimiter?P(A.delimiter)&&(A.delimiter=A.delimiter(he),U.meta.delimiter=A.delimiter):((Fe=((oe,Ze,Re,fe,ut)=>{var rt,lt,le,je;ut=ut||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var ft=0;ft<ut.length;ft++){for(var Ie,Be=ut[ft],tt=0,ot=0,ht=0,Pt=(le=void 0,new k({comments:fe,delimiter:Be,newline:Ze,preview:10}).parse(oe)),Ft=0;Ft<Pt.data.length;Ft++)Re&&W(Pt.data[Ft])?ht++:(Ie=Pt.data[Ft].length,ot+=Ie,le===void 0?le=Ie:0<Ie&&(tt+=Math.abs(Ie-le),le=Ie));0<Pt.data.length&&(ot/=Pt.data.length-ht),(lt===void 0||tt<=lt)&&(je===void 0||je<ot)&&1.99<ot&&(lt=tt,rt=Be,je=ot)}return{successful:!!(A.delimiter=rt),bestDelimiter:rt}})(he,A.newline,A.skipEmptyLines,A.comments,A.delimitersToGuess)).successful?A.delimiter=Fe.bestDelimiter:(I=!0,A.delimiter=c.DefaultDelimiter),U.meta.delimiter=A.delimiter),X(A));return A.preview&&A.header&&Fe.preview++,T=he,O=new k(Fe),U=O.parse(T,xe,ke),Y(),te?{meta:{paused:!0}}:U||{meta:{paused:!1}}},this.paused=function(){return te},this.pause=function(){te=!0,O.abort(),T=P(A.chunk)?"":T.substring(O.getCharIndex())},this.resume=function(){we.streamer._halted?(te=!1,we.streamer.parseChunk(T,!0)):setTimeout(we.resume,3)},this.aborted=function(){return J},this.abort=function(){J=!0,O.abort(),U.meta.aborted=!0,P(A.complete)&&A.complete(U),T=""},this.guessLineEndings=function(oe,Fe){oe=oe.substring(0,1048576);var Fe=new RegExp(b(Fe)+"([^]*?)"+b(Fe),"gm"),ke=(oe=oe.replace(Fe,"")).split("\r"),Fe=oe.split(`
`),oe=1<Fe.length&&Fe[0].length<ke[0].length;if(ke.length===1||oe)return`
`;for(var Ze=0,Re=0;Re<ke.length;Re++)ke[Re][0]===`
`&&Ze++;return Ze>=ke.length/2?`\r
`:"\r"}}function b(A){return A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function k(A){var T=(A=A||{}).delimiter,O=A.newline,I=A.comments,D=A.step,B=A.preview,re=A.fastMode,_e=null,Ce=!1,we=A.quoteChar==null?'"':A.quoteChar,ce=we;if(A.escapeChar!==void 0&&(ce=A.escapeChar),(typeof T!="string"||-1<c.BAD_DELIMITERS.indexOf(T))&&(T=","),I===T)throw new Error("Comment character same as delimiter");I===!0?I="#":(typeof I!="string"||-1<c.BAD_DELIMITERS.indexOf(I))&&(I=!1),O!==`
`&&O!=="\r"&&O!==`\r
`&&(O=`
`);var H=0,te=!1;this.parse=function(J,N,U){if(typeof J!="string")throw new Error("Input must be a string");var W=J.length,Y=T.length,ae=O.length,pe=I.length,he=P(D),xe=[],ke=[],Fe=[],oe=H=0;if(!J)return tt();if(re||re!==!1&&J.indexOf(we)===-1){for(var Ze=J.split(O),Re=0;Re<Ze.length;Re++){if(Fe=Ze[Re],H+=Fe.length,Re!==Ze.length-1)H+=O.length;else if(U)return tt();if(!I||Fe.substring(0,pe)!==I){if(he){if(xe=[],je(Fe.split(T)),ot(),te)return tt()}else je(Fe.split(T));if(B&&B<=Re)return xe=xe.slice(0,B),tt(!0)}}return tt()}for(var fe=J.indexOf(T,H),ut=J.indexOf(O,H),rt=new RegExp(b(ce)+b(we),"g"),lt=J.indexOf(we,H);;)if(J[H]===we)for(lt=H,H++;;){if((lt=J.indexOf(we,lt+1))===-1)return U||ke.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:xe.length,index:H}),Ie();if(lt===W-1)return Ie(J.substring(H,lt).replace(rt,we));if(we===ce&&J[lt+1]===ce)lt++;else if(we===ce||lt===0||J[lt-1]!==ce){fe!==-1&&fe<lt+1&&(fe=J.indexOf(T,lt+1));var le=ft((ut=ut!==-1&&ut<lt+1?J.indexOf(O,lt+1):ut)===-1?fe:Math.min(fe,ut));if(J.substr(lt+1+le,Y)===T){Fe.push(J.substring(H,lt).replace(rt,we)),J[H=lt+1+le+Y]!==we&&(lt=J.indexOf(we,H)),fe=J.indexOf(T,H),ut=J.indexOf(O,H);break}if(le=ft(ut),J.substring(lt+1+le,lt+1+le+ae)===O){if(Fe.push(J.substring(H,lt).replace(rt,we)),Be(lt+1+le+ae),fe=J.indexOf(T,H),lt=J.indexOf(we,H),he&&(ot(),te))return tt();if(B&&xe.length>=B)return tt(!0);break}ke.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:xe.length,index:H}),lt++}}else if(I&&Fe.length===0&&J.substring(H,H+pe)===I){if(ut===-1)return tt();H=ut+ae,ut=J.indexOf(O,H),fe=J.indexOf(T,H)}else if(fe!==-1&&(fe<ut||ut===-1))Fe.push(J.substring(H,fe)),H=fe+Y,fe=J.indexOf(T,H);else{if(ut===-1)break;if(Fe.push(J.substring(H,ut)),Be(ut+ae),he&&(ot(),te))return tt();if(B&&xe.length>=B)return tt(!0)}return Ie();function je(ht){xe.push(ht),oe=H}function ft(ht){var Pt=0;return Pt=ht!==-1&&(ht=J.substring(lt+1,ht))&&ht.trim()===""?ht.length:Pt}function Ie(ht){return U||(ht===void 0&&(ht=J.substring(H)),Fe.push(ht),H=W,je(Fe),he&&ot()),tt()}function Be(ht){H=ht,je(Fe),Fe=[],ut=J.indexOf(O,H)}function tt(ht){if(A.header&&!N&&xe.length&&!Ce){var Pt=xe[0],Ft=Object.create(null),jt=new Set(Pt);let wt=!1;for(let At=0;At<Pt.length;At++){let Xt=Pt[At];if(Ft[Xt=P(A.transformHeader)?A.transformHeader(Xt,At):Xt]){let Gt,qt=Ft[Xt];for(;Gt=Xt+"_"+qt,qt++,jt.has(Gt););jt.add(Gt),Pt[At]=Gt,Ft[Xt]++,wt=!0,(_e=_e===null?{}:_e)[Gt]=Xt}else Ft[Xt]=1,Pt[At]=Xt;jt.add(Xt)}wt&&console.warn("Duplicate headers found and renamed."),Ce=!0}return{data:xe,errors:ke,meta:{delimiter:T,linebreak:O,aborted:te,truncated:!!ht,cursor:oe+(N||0),renamedHeaders:_e}}}function ot(){D(tt()),xe=[],ke=[]}},this.abort=function(){te=!0},this.getCharIndex=function(){return H}}function R(A){var T=A.data,O=o[T.workerId],I=!1;if(T.error)O.userError(T.error,T.file);else if(T.results&&T.results.data){var D={abort:function(){I=!0,C(T.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(P(O.userStep)){for(var B=0;B<T.results.data.length&&(O.userStep({data:T.results.data[B],errors:T.results.errors,meta:T.results.meta},D),!I);B++);delete T.results}else P(O.userChunk)&&(O.userChunk(T.results,D,T.file),delete T.results)}T.finished&&!I&&C(T.workerId,T.results)}function C(A,T){var O=o[A];P(O.userComplete)&&O.userComplete(T),O.terminate(),delete o[A]}function j(){throw new Error("Not implemented.")}function X(A){if(typeof A!="object"||A===null)return A;var T,O=Array.isArray(A)?[]:{};for(T in A)O[T]=X(A[T]);return O}function K(A,T){return function(){A.apply(T,arguments)}}function P(A){return typeof A=="function"}return c.parse=function(A,T){var O=(T=T||{}).dynamicTyping||!1;if(P(O)&&(T.dynamicTypingFunction=O,O={}),T.dynamicTyping=O,T.transform=!!P(T.transform)&&T.transform,!T.worker||!c.WORKERS_SUPPORTED)return O=null,c.NODE_STREAM_INPUT,typeof A=="string"?(A=(I=>I.charCodeAt(0)!==65279?I:I.slice(1))(A),O=new(T.download?p:m)(T)):A.readable===!0&&P(A.read)&&P(A.on)?O=new _(T):(n.File&&A instanceof File||A instanceof Object)&&(O=new g(T)),O.stream(A);(O=(()=>{var I;return!!c.WORKERS_SUPPORTED&&(I=(()=>{var D=n.URL||n.webkitURL||null,B=r.toString();return c.BLOB_URL||(c.BLOB_URL=D.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",B,")();"],{type:"text/javascript"})))})(),(I=new n.Worker(I)).onmessage=R,I.id=l++,o[I.id]=I)})()).userStep=T.step,O.userChunk=T.chunk,O.userComplete=T.complete,O.userError=T.error,T.step=P(T.step),T.chunk=P(T.chunk),T.complete=P(T.complete),T.error=P(T.error),delete T.worker,O.postMessage({input:A,config:T,workerId:O.id})},c.unparse=function(A,T){var O=!1,I=!0,D=",",B=`\r
`,re='"',_e=re+re,Ce=!1,we=null,ce=!1,H=((()=>{if(typeof T=="object"){if(typeof T.delimiter!="string"||c.BAD_DELIMITERS.filter(function(N){return T.delimiter.indexOf(N)!==-1}).length||(D=T.delimiter),typeof T.quotes!="boolean"&&typeof T.quotes!="function"&&!Array.isArray(T.quotes)||(O=T.quotes),typeof T.skipEmptyLines!="boolean"&&typeof T.skipEmptyLines!="string"||(Ce=T.skipEmptyLines),typeof T.newline=="string"&&(B=T.newline),typeof T.quoteChar=="string"&&(re=T.quoteChar),typeof T.header=="boolean"&&(I=T.header),Array.isArray(T.columns)){if(T.columns.length===0)throw new Error("Option columns is empty");we=T.columns}T.escapeChar!==void 0&&(_e=T.escapeChar+re),T.escapeFormulae instanceof RegExp?ce=T.escapeFormulae:typeof T.escapeFormulae=="boolean"&&T.escapeFormulae&&(ce=/^[=+\-@\t\r].*$/)}})(),new RegExp(b(re),"g"));if(typeof A=="string"&&(A=JSON.parse(A)),Array.isArray(A)){if(!A.length||Array.isArray(A[0]))return te(null,A,Ce);if(typeof A[0]=="object")return te(we||Object.keys(A[0]),A,Ce)}else if(typeof A=="object")return typeof A.data=="string"&&(A.data=JSON.parse(A.data)),Array.isArray(A.data)&&(A.fields||(A.fields=A.meta&&A.meta.fields||we),A.fields||(A.fields=Array.isArray(A.data[0])?A.fields:typeof A.data[0]=="object"?Object.keys(A.data[0]):[]),Array.isArray(A.data[0])||typeof A.data[0]=="object"||(A.data=[A.data])),te(A.fields||[],A.data||[],Ce);throw new Error("Unable to serialize unrecognized input");function te(N,U,W){var Y="",ae=(typeof N=="string"&&(N=JSON.parse(N)),typeof U=="string"&&(U=JSON.parse(U)),Array.isArray(N)&&0<N.length),pe=!Array.isArray(U[0]);if(ae&&I){for(var he=0;he<N.length;he++)0<he&&(Y+=D),Y+=J(N[he],he);0<U.length&&(Y+=B)}for(var xe=0;xe<U.length;xe++){var ke=(ae?N:U[xe]).length,Fe=!1,oe=ae?Object.keys(U[xe]).length===0:U[xe].length===0;if(W&&!ae&&(Fe=W==="greedy"?U[xe].join("").trim()==="":U[xe].length===1&&U[xe][0].length===0),W==="greedy"&&ae){for(var Ze=[],Re=0;Re<ke;Re++){var fe=pe?N[Re]:Re;Ze.push(U[xe][fe])}Fe=Ze.join("").trim()===""}if(!Fe){for(var ut=0;ut<ke;ut++){0<ut&&!oe&&(Y+=D);var rt=ae&&pe?N[ut]:ut;Y+=J(U[xe][rt],ut)}xe<U.length-1&&(!W||0<ke&&!oe)&&(Y+=B)}}return Y}function J(N,U){var W,Y;return N==null?"":N.constructor===Date?JSON.stringify(N).slice(1,25):(Y=!1,ce&&typeof N=="string"&&ce.test(N)&&(N="'"+N,Y=!0),W=N.toString().replace(H,_e),(Y=Y||O===!0||typeof O=="function"&&O(N,U)||Array.isArray(O)&&O[U]||((ae,pe)=>{for(var he=0;he<pe.length;he++)if(-1<ae.indexOf(pe[he]))return!0;return!1})(W,c.BAD_DELIMITERS)||-1<W.indexOf(D)||W.charAt(0)===" "||W.charAt(W.length-1)===" ")?re+W+re:W)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!s&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=k,c.ParserHandle=w,c.NetworkStreamer=p,c.FileStreamer=g,c.StringStreamer=m,c.ReadableStreamStreamer=_,n.jQuery&&((i=n.jQuery).fn.parse=function(A){var T=A.config||{},O=[];return this.each(function(B){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var re=0;re<this.files.length;re++)O.push({file:this.files[re],inputElem:this,instanceConfig:i.extend({},T)})}),I(),this;function I(){if(O.length===0)P(A.complete)&&A.complete();else{var B,re,_e,Ce,we=O[0];if(P(A.before)){var ce=A.before(we.file,we.inputElem);if(typeof ce=="object"){if(ce.action==="abort")return B="AbortError",re=we.file,_e=we.inputElem,Ce=ce.reason,void(P(A.error)&&A.error({name:B},re,_e,Ce));if(ce.action==="skip")return void D();typeof ce.config=="object"&&(we.instanceConfig=i.extend(we.instanceConfig,ce.config))}else if(ce==="skip")return void D()}var H=we.instanceConfig.complete;we.instanceConfig.complete=function(te){P(H)&&H(te,we.file,we.inputElem),D()},c.parse(we.file,we.instanceConfig)}}function D(){O.splice(0,1),I()}}),a&&(n.onmessage=function(A){A=A.data,c.WORKER_ID===void 0&&A&&(c.WORKER_ID=A.workerId),typeof A.input=="string"?n.postMessage({workerId:c.WORKER_ID,results:c.parse(A.input,A.config),finished:!0}):(n.File&&A.input instanceof File||A.input instanceof Object)&&(A=c.parse(A.input,A.config))&&n.postMessage({workerId:c.WORKER_ID,results:A,finished:!0})}),(p.prototype=Object.create(f.prototype)).constructor=p,(g.prototype=Object.create(f.prototype)).constructor=g,(m.prototype=Object.create(m.prototype)).constructor=m,(_.prototype=Object.create(f.prototype)).constructor=_,c})})(T2)),T2.exports}var RY=PY();const VP=dN(RY);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var hv={};hv.version="0.18.5";var UP=1252,FY=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Ub={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},zb=function(t){FY.indexOf(t)!=-1&&(UP=Ub[0]=t)};function LY(){zb(1252)}var oc=function(t){zb(t)};function $b(){oc(1200),LY()}function Dk(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function DY(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function zP(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var s1=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?DY(t.slice(2)):e==254&&r==255?zP(t.slice(2)):e==65279?t.slice(1):t},Hx=function(e){return String.fromCharCode(e)},Ok=function(e){return String.fromCharCode(e)},K1,Gf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function X1(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0,l=0,c=0;c<t.length;)r=t.charCodeAt(c++),s=r>>2,n=t.charCodeAt(c++),a=(r&3)<<4|n>>4,i=t.charCodeAt(c++),o=(n&15)<<2|i>>6,l=i&63,isNaN(n)?o=l=64:isNaN(i)&&(l=64),e+=Gf.charAt(s)+Gf.charAt(a)+Gf.charAt(o)+Gf.charAt(l);return e}function ul(t){var e="",r=0,n=0,i=0,s=0,a=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)s=Gf.indexOf(t.charAt(c++)),a=Gf.indexOf(t.charAt(c++)),r=s<<2|a>>4,e+=String.fromCharCode(r),o=Gf.indexOf(t.charAt(c++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=Gf.indexOf(t.charAt(c++)),i=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var Xr=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),ef=(function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function gh(t){return Xr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function jk(t){return Xr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var nl=function(e){return Xr?ef(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function vy(t){if(typeof ArrayBuffer>"u")return nl(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function Ph(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function OY(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function qb(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return qb(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var sa=Xr?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:ef(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),i=0;for(e=0,r=0;e<t.length;r+=i,++e)if(i=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function jY(t){for(var e=[],r=0,n=t.length+250,i=gh(t.length+255),s=0;s<t.length;++s){var a=t.charCodeAt(s);if(a<128)i[r++]=a;else if(a<2048)i[r++]=192|a>>6&31,i[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++s)&1023;i[r++]=240|a>>8&7,i[r++]=128|a>>2&63,i[r++]=128|o>>6&15|(a&3)<<4,i[r++]=128|o&63}else i[r++]=224|a>>12&15,i[r++]=128|a>>6&63,i[r++]=128|a&63;r>n&&(e.push(i.slice(0,r)),r=0,i=gh(65535),n=65530)}return e.push(i.slice(0,r)),sa(e)}var wo=/\u0000/g,a1=/[\u0001-\u0006]/g;function lp(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function lc(t,e){var r=""+t;return r.length>=e?r:Qi("0",e-r.length)+r}function Hb(t,e){var r=""+t;return r.length>=e?r:Qi(" ",e-r.length)+r}function dv(t,e){var r=""+t;return r.length>=e?r:r+Qi(" ",e-r.length)}function MY(t,e){var r=""+Math.round(t);return r.length>=e?r:Qi("0",e-r.length)+r}function BY(t,e){var r=""+t;return r.length>=e?r:Qi("0",e-r.length)+r}var Mk=Math.pow(2,32);function D0(t,e){if(t>Mk||t<-Mk)return MY(t,e);var r=Math.round(t);return BY(r,e)}function pv(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var Bk=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Yw=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function VY(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Tr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Vk={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},UY={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function mv(t,e,r){for(var n=t<0?-1:1,i=t*n,s=0,a=1,o=0,l=1,c=0,f=0,p=Math.floor(i);c<e&&(p=Math.floor(i),o=p*a+s,f=p*c+l,!(i-p<5e-8));)i=1/(i-p),s=a,a=o,l=c,c=f;if(f>e&&(c>e?(f=l,o=s):(f=c,o=a)),!r)return[0,n*o,f];var g=Math.floor(n*o/f);return[g,n*o-g*f,f]}function pd(t,e,r){if(t>2958465||t<0)return null;var n=t|0,i=Math.floor(86400*(t-n)),s=0,a=[],o={D:n,T:i,u:86400*(t-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=GY(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var $P=new Date(1899,11,31,0,0,0),zY=$P.getTime(),$Y=new Date(1900,2,1,0,0,0);function qP(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=$Y&&(r+=1440*60*1e3),(r-(zY+(t.getTimezoneOffset()-$P.getTimezoneOffset())*6e4))/(1440*60*1e3)}function Wb(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function qY(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function HY(t){var e=t<0?12:11,r=Wb(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function WY(t){var e=Wb(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function Y1(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=HY(t):e===10?r=t.toFixed(10).substr(0,12):r=WY(t),Wb(qY(r.toUpperCase()))}function Bd(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Y1(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Ol(14,qP(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function GY(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function KY(t,e,r,n){var i="",s=0,a=0,o=r.y,l,c=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,c=e.length;break;case 3:return Yw[r.m-1][1];case 5:return Yw[r.m-1][0];default:return Yw[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,c=e.length;break;case 3:return Bk[r.q][0];default:return Bk[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?lc(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,s=Math.round(a*(r.S+r.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=lc(s,2+n),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var f=c>0?lc(l,c):"";return f}function Kf(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var HP=/%/g;function XY(t,e,r){var n=e.replace(HP,""),i=e.length-n.length;return Mu(t,n,r*Math.pow(10,2*i))+Qi("%",i)}function YY(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Mu(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function WP(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+WP(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,f){return l+c+f.substr(0,(i+s)%i)+"."+f.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var GP=/# (\?+)( ?)\/( ?)(\d+)/;function QY(t,e,r){var n=parseInt(t[4],10),i=Math.round(e*n),s=Math.floor(i/n),a=i-s*n,o=n;return r+(s===0?"":""+s)+" "+(a===0?Qi(" ",t[1].length+1+t[4].length):Hb(a,t[1].length)+t[2]+"/"+t[3]+lc(o,t[4].length))}function JY(t,e,r){return r+(e===0?"":""+e)+Qi(" ",t[1].length+2+t[4].length)}var KP=/^#*0*\.([0#]+)/,XP=/\).*[0#]/,YP=/\(###\) ###\\?-####/;function xo(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function Uk(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function zk(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function ZY(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function eQ(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Nl(t,e,r){if(t.charCodeAt(0)===40&&!e.match(XP)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Nl("n",n,r):"("+Nl("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return YY(t,e,r);if(e.indexOf("%")!==-1)return XY(t,e,r);if(e.indexOf("E")!==-1)return WP(e,r);if(e.charCodeAt(0)===36)return"$"+Nl(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+D0(l,e.length);if(e.match(/^[#?]+$/))return i=D0(r,0),i==="0"&&(i=""),i.length>e.length?i:xo(e.substr(0,e.length-i.length))+i;if(s=e.match(GP))return QY(s,l,c);if(e.match(/^#+0+$/))return c+D0(l,e.length-e.indexOf("0"));if(s=e.match(KP))return i=Uk(r,s[1].length).replace(/^([^\.]+)$/,"$1."+xo(s[1])).replace(/\.$/,"."+xo(s[1])).replace(/\.(\d*)$/,function(_,w){return"."+w+Qi("0",xo(s[1]).length-w.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+Uk(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+Kf(D0(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Nl(t,e,-r):Kf(""+(Math.floor(r)+ZY(r,s[1].length)))+"."+lc(zk(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Nl(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=lp(Nl(t,e.replace(/[\\-]/g,""),r)),a=0,lp(lp(e.replace(/\\/g,"")).replace(/[0#]/g,function(_){return a<i.length?i.charAt(a++):_==="0"?"0":""}));if(e.match(YP))return i=Nl(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var f="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=mv(l,Math.pow(10,a)-1,!1),i=""+c,f=Mu("n",s[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),i+=f+s[2]+"/"+s[3],f=dv(o[2],a),f.length<s[4].length&&(f=xo(s[4].substr(s[4].length-f.length))+f),i+=f,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=mv(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Hb(o[1],a)+s[2]+"/"+s[3]+dv(o[2],a):Qi(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=D0(r,0),e.length<=i.length?i:xo(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var p=e.indexOf(".")-a,g=e.length-i.length-p;return xo(e.substr(0,p)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=zk(r,s[1].length),r<0?"-"+Nl(t,e,-r):Kf(eQ(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(_){return"00,"+(_.length<3?lc(0,3-_.length):"")+_})+"."+lc(a,s[1].length);switch(e){case"###,##0.00":return Nl(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=Kf(D0(l,0));return m!=="0"?c+m:"";case"###,###.00":return Nl(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Nl(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function tQ(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Mu(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function rQ(t,e,r){var n=e.replace(HP,""),i=e.length-n.length;return Mu(t,n,r*Math.pow(10,2*i))+Qi("%",i)}function QP(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+QP(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,f){return l+c+f.substr(0,(i+s)%i)+"."+f.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Dc(t,e,r){if(t.charCodeAt(0)===40&&!e.match(XP)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Dc("n",n,r):"("+Dc("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return tQ(t,e,r);if(e.indexOf("%")!==-1)return rQ(t,e,r);if(e.indexOf("E")!==-1)return QP(e,r);if(e.charCodeAt(0)===36)return"$"+Dc(t,e.substr(e.charAt(1)==" "?2:1),r);var i,s,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+lc(l,e.length);if(e.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>e.length?i:xo(e.substr(0,e.length-i.length))+i;if(s=e.match(GP))return JY(s,l,c);if(e.match(/^#+0+$/))return c+lc(l,e.length-e.indexOf("0"));if(s=e.match(KP))return i=(""+r).replace(/^([^\.]+)$/,"$1."+xo(s[1])).replace(/\.$/,"."+xo(s[1])),i=i.replace(/\.(\d*)$/,function(_,w){return"."+w+Qi("0",xo(s[1]).length-w.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+Kf(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Dc(t,e,-r):Kf(""+r)+"."+Qi("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Dc(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=lp(Dc(t,e.replace(/[\\-]/g,""),r)),a=0,lp(lp(e.replace(/\\/g,"")).replace(/[0#]/g,function(_){return a<i.length?i.charAt(a++):_==="0"?"0":""}));if(e.match(YP))return i=Dc(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var f="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=mv(l,Math.pow(10,a)-1,!1),i=""+c,f=Mu("n",s[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),i+=f+s[2]+"/"+s[3],f=dv(o[2],a),f.length<s[4].length&&(f=xo(s[4].substr(s[4].length-f.length))+f),i+=f,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=mv(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Hb(o[1],a)+s[2]+"/"+s[3]+dv(o[2],a):Qi(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+r,e.length<=i.length?i:xo(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var p=e.indexOf(".")-a,g=e.length-i.length-p;return xo(e.substr(0,p)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Dc(t,e,-r):Kf(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(_){return"00,"+(_.length<3?lc(0,3-_.length):"")+_})+"."+lc(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var m=Kf(""+l);return m!=="0"?c+m:"";default:if(e.match(/\.[0#?]*$/))return Dc(t,e.slice(0,e.lastIndexOf(".")),r)+xo(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Mu(t,e,r){return(r|0)===r?Dc(t,e,r):Nl(t,e,r)}function nQ(t){for(var e=[],r=!1,n=0,i=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(i,n-i),i=n+1}if(e[e.length]=t.substr(i),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var JP=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function am(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":pv(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(JP))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function iQ(t,e,r,n){for(var i=[],s="",a=0,o="",l="t",c,f,p,g="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!pv(t,a))throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(p=t.charCodeAt(++a))!==34&&a<t.length;)s+=String.fromCharCode(p);i[i.length]={t:"t",v:s},++a;break;case"\\":var m=t.charAt(++a),_=m==="("||m===")"?m:"t";i[i.length]={t:_,v:m},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(c==null&&(c=pd(e,r,t.charAt(a+1)==="2"),c==null))return"";i[i.length]={t:"X",v:t.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=pd(e,r),c==null))return"";for(s=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=g),i[i.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var w={t:o,v:o};if(c==null&&(c=pd(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(w.v=c.H>=12?"P":"A"),w.t="T",g="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(w.v=c.H>=12?"PM":"AM"),w.t="T",a+=5,g="h"):t.substr(a,5).toUpperCase()==="/"?(c!=null&&(w.v=c.H>=12?"":""),w.t="T",a+=5,g="h"):(w.t="t",++a),c==null&&w.t==="T")return"";i[i.length]=w,l=o;break;case"[":for(s=o;t.charAt(a++)!=="]"&&a<t.length;)s+=t.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(JP)){if(c==null&&(c=pd(e,r),c==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",am(t)||(i[i.length]={t:"t",v:s}));break;case".":if(c!=null){for(s=o;++a<t.length&&(o=t.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;t.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},l=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)s+=t.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"t",v:o},++a;break}var b=0,k=0,R;for(a=i.length-1,l="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=g,l="h",b<1&&(b=1);break;case"s":(R=i[a].v.match(/\.0+$/))&&(k=Math.max(k,R[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":l=i[a].t;break;case"m":l==="s"&&(i[a].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&i[a].v.match(/[Hh]/)&&(b=1),b<2&&i[a].v.match(/[Mm]/)&&(b=2),b<3&&i[a].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var C="",j;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=KY(i[a].t.charCodeAt(0),i[a].v,c,k),i[a].t="t";break;case"n":case"?":for(j=a+1;i[j]!=null&&((o=i[j].t)==="?"||o==="D"||(o===" "||o==="t")&&i[j+1]!=null&&(i[j+1].t==="?"||i[j+1].t==="t"&&i[j+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[j].v==="/"||i[j].v===" "&&i[j+1]!=null&&i[j+1].t=="?"));)i[a].v+=i[j].v,i[j]={v:"",t:";"},++j;C+=i[a].v,a=j-1;break;case"G":i[a].t="t",i[a].v=Bd(e,r);break}var X="",K,P;if(C.length>0){C.charCodeAt(0)==40?(K=e<0&&C.charCodeAt(0)===45?-e:e,P=Mu("n",C,K)):(K=e<0&&n>1?-e:e,P=Mu("n",C,K),K<0&&i[0]&&i[0].t=="t"&&(P=P.substr(1),i[0].v="-"+i[0].v)),j=P.length-1;var A=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){A=a;break}var T=i.length;if(A===i.length&&P.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(j>=i[a].v.length-1?(j-=i[a].v.length,i[a].v=P.substr(j+1,i[a].v.length)):j<0?i[a].v="":(i[a].v=P.substr(0,j+1),j=-1),i[a].t="t",T=a);j>=0&&T<i.length&&(i[T].v=P.substr(0,j+1)+i[T].v)}else if(A!==i.length&&P.indexOf("E")===-1){for(j=P.indexOf(".")-1,a=A;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(f=i[a].v.indexOf(".")>-1&&a===A?i[a].v.indexOf(".")-1:i[a].v.length-1,X=i[a].v.substr(f+1);f>=0;--f)j>=0&&(i[a].v.charAt(f)==="0"||i[a].v.charAt(f)==="#")&&(X=P.charAt(j--)+X);i[a].v=X,i[a].t="t",T=a}for(j>=0&&T<i.length&&(i[T].v=P.substr(0,j+1)+i[T].v),j=P.indexOf(".")+1,a=A;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==A)){for(f=i[a].v.indexOf(".")>-1&&a===A?i[a].v.indexOf(".")+1:0,X=i[a].v.substr(0,f);f<i[a].v.length;++f)j<P.length&&(X+=P.charAt(j++));i[a].v=X,i[a].t="t",T=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(K=n>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Mu(i[a].t,i[a].v,K),i[a].t="t");var O="";for(a=0;a!==i.length;++a)i[a]!=null&&(O+=i[a].v);return O}var $k=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function qk(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function sQ(t,e){var r=nQ(t),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match($k),o=r[1].match($k);return qk(e,a)?[n,r[0]]:qk(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,s]}function Ol(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Tr)[t],n==null&&(n=r.table&&r.table[Vk[t]]||Tr[Vk[t]]),n==null&&(n=UY[t]||"General");break}if(pv(n,0))return Bd(e,r);e instanceof Date&&(e=qP(e,r.date1904));var i=sQ(n,e);if(pv(i[1]))return Bd(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return iQ(i[1],e,r,i[0])}function Bu(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Tr[r]==null){e<0&&(e=r);continue}if(Tr[r]==t){e=r;break}}e<0&&(e=391)}return Tr[e]=t,e}function yy(t){for(var e=0;e!=392;++e)t[e]!==void 0&&Bu(t[e],e)}function om(){Tr=VY()}var aQ={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},ZP=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function oQ(t){var e=typeof t=="number"?Tr[t]:t;return e=e.replace(ZP,"(\\d+)"),new RegExp("^"+e+"$")}function lQ(t,e,r){var n=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(e.match(ZP)||[]).forEach(function(p,g){var m=parseInt(r[g+1],10);switch(p.toLowerCase().charAt(0)){case"y":n=m;break;case"d":s=m;break;case"h":a=m;break;case"s":l=m;break;case"m":a>=0?o=m:i=m;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var f=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:n==-1&&i==-1&&s==-1?f:c+"T"+f}var cQ=(function(){var t={};t.version="1.2.0";function e(){for(var P=0,A=new Array(256),T=0;T!=256;++T)P=T,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,A[T]=P;return typeof Int32Array<"u"?new Int32Array(A):A}var r=e();function n(P){var A=0,T=0,O=0,I=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(O=0;O!=256;++O)I[O]=P[O];for(O=0;O!=256;++O)for(T=P[O],A=256+O;A<4096;A+=256)T=I[A]=T>>>8^P[T&255];var D=[];for(O=1;O!=16;++O)D[O-1]=typeof Int32Array<"u"?I.subarray(O*256,O*256+256):I.slice(O*256,O*256+256);return D}var i=n(r),s=i[0],a=i[1],o=i[2],l=i[3],c=i[4],f=i[5],p=i[6],g=i[7],m=i[8],_=i[9],w=i[10],b=i[11],k=i[12],R=i[13],C=i[14];function j(P,A){for(var T=A^-1,O=0,I=P.length;O<I;)T=T>>>8^r[(T^P.charCodeAt(O++))&255];return~T}function X(P,A){for(var T=A^-1,O=P.length-15,I=0;I<O;)T=C[P[I++]^T&255]^R[P[I++]^T>>8&255]^k[P[I++]^T>>16&255]^b[P[I++]^T>>>24]^w[P[I++]]^_[P[I++]]^m[P[I++]]^g[P[I++]]^p[P[I++]]^f[P[I++]]^c[P[I++]]^l[P[I++]]^o[P[I++]]^a[P[I++]]^s[P[I++]]^r[P[I++]];for(O+=15;I<O;)T=T>>>8^r[(T^P[I++])&255];return~T}function K(P,A){for(var T=A^-1,O=0,I=P.length,D=0,B=0;O<I;)D=P.charCodeAt(O++),D<128?T=T>>>8^r[(T^D)&255]:D<2048?(T=T>>>8^r[(T^(192|D>>6&31))&255],T=T>>>8^r[(T^(128|D&63))&255]):D>=55296&&D<57344?(D=(D&1023)+64,B=P.charCodeAt(O++)&1023,T=T>>>8^r[(T^(240|D>>8&7))&255],T=T>>>8^r[(T^(128|D>>2&63))&255],T=T>>>8^r[(T^(128|B>>6&15|(D&3)<<4))&255],T=T>>>8^r[(T^(128|B&63))&255]):(T=T>>>8^r[(T^(224|D>>12&15))&255],T=T>>>8^r[(T^(128|D>>6&63))&255],T=T>>>8^r[(T^(128|D&63))&255]);return~T}return t.table=r,t.bstr=j,t.buf=X,t.str=K,t})(),yr=(function(){var e={};e.version="1.2.1";function r(ne,Te){for(var ve=ne.split("/"),ye=Te.split("/"),Ae=0,Ne=0,He=Math.min(ve.length,ye.length);Ae<He;++Ae){if(Ne=ve[Ae].length-ye[Ae].length)return Ne;if(ve[Ae]!=ye[Ae])return ve[Ae]<ye[Ae]?-1:1}return ve.length-ye.length}function n(ne){if(ne.charAt(ne.length-1)=="/")return ne.slice(0,-1).indexOf("/")===-1?ne:n(ne.slice(0,-1));var Te=ne.lastIndexOf("/");return Te===-1?ne:ne.slice(0,Te+1)}function i(ne){if(ne.charAt(ne.length-1)=="/")return i(ne.slice(0,-1));var Te=ne.lastIndexOf("/");return Te===-1?ne:ne.slice(Te+1)}function s(ne,Te){typeof Te=="string"&&(Te=new Date(Te));var ve=Te.getHours();ve=ve<<6|Te.getMinutes(),ve=ve<<5|Te.getSeconds()>>>1,ne.write_shift(2,ve);var ye=Te.getFullYear()-1980;ye=ye<<4|Te.getMonth()+1,ye=ye<<5|Te.getDate(),ne.write_shift(2,ye)}function a(ne){var Te=ne.read_shift(2)&65535,ve=ne.read_shift(2)&65535,ye=new Date,Ae=ve&31;ve>>>=5;var Ne=ve&15;ve>>>=4,ye.setMilliseconds(0),ye.setFullYear(ve+1980),ye.setMonth(Ne-1),ye.setDate(Ae);var He=Te&31;Te>>>=5;var nt=Te&63;return Te>>>=6,ye.setHours(Te),ye.setMinutes(nt),ye.setSeconds(He<<1),ye}function o(ne){Sa(ne,0);for(var Te={},ve=0;ne.l<=ne.length-4;){var ye=ne.read_shift(2),Ae=ne.read_shift(2),Ne=ne.l+Ae,He={};switch(ye){case 21589:ve=ne.read_shift(1),ve&1&&(He.mtime=ne.read_shift(4)),Ae>5&&(ve&2&&(He.atime=ne.read_shift(4)),ve&4&&(He.ctime=ne.read_shift(4))),He.mtime&&(He.mt=new Date(He.mtime*1e3));break}ne.l=Ne,Te[ye]=He}return Te}var l;function c(){return l||(l={})}function f(ne,Te){if(ne[0]==80&&ne[1]==75)return rr(ne,Te);if((ne[0]|32)==109&&(ne[1]|32)==105)return ir(ne,Te);if(ne.length<512)throw new Error("CFB file size "+ne.length+" < 512");var ve=3,ye=512,Ae=0,Ne=0,He=0,nt=0,Ke=0,Xe=[],Je=ne.slice(0,512);Sa(Je,0);var _t=p(Je);switch(ve=_t[0],ve){case 3:ye=512;break;case 4:ye=4096;break;case 0:if(_t[1]==0)return rr(ne,Te);default:throw new Error("Major Version: Expected 3 or 4 saw "+ve)}ye!==512&&(Je=ne.slice(0,ye),Sa(Je,28));var Dt=ne.slice(0,ye);g(Je,ve);var Ht=Je.read_shift(4,"i");if(ve===3&&Ht!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ht);Je.l+=4,He=Je.read_shift(4,"i"),Je.l+=4,Je.chk("00100000","Mini Stream Cutoff Size: "),nt=Je.read_shift(4,"i"),Ae=Je.read_shift(4,"i"),Ke=Je.read_shift(4,"i"),Ne=Je.read_shift(4,"i");for(var Lt=-1,Tt=0;Tt<109&&(Lt=Je.read_shift(4,"i"),!(Lt<0));++Tt)Xe[Tt]=Lt;var br=m(ne,ye);b(Ke,Ne,br,ye,Xe);var on=R(br,He,Xe,ye);on[He].name="!Directory",Ae>0&&nt!==B&&(on[nt].name="!MiniFAT"),on[Xe[0]].name="!FAT",on.fat_addrs=Xe,on.ssz=ye;var Dr={},fn=[],Na=[],Ca=[];C(He,on,br,fn,Ae,Dr,Na,nt),_(Na,Ca,fn),fn.shift();var Ws={FileIndex:Na,FullPaths:Ca};return Te&&Te.raw&&(Ws.raw={header:Dt,sectors:br}),Ws}function p(ne){if(ne[ne.l]==80&&ne[ne.l+1]==75)return[0,0];ne.chk(re,"Header Signature: "),ne.l+=16;var Te=ne.read_shift(2,"u");return[ne.read_shift(2,"u"),Te]}function g(ne,Te){var ve=9;switch(ne.l+=2,ve=ne.read_shift(2)){case 9:if(Te!=3)throw new Error("Sector Shift: Expected 9 saw "+ve);break;case 12:if(Te!=4)throw new Error("Sector Shift: Expected 12 saw "+ve);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ve)}ne.chk("0600","Mini Sector Shift: "),ne.chk("000000000000","Reserved: ")}function m(ne,Te){for(var ve=Math.ceil(ne.length/Te)-1,ye=[],Ae=1;Ae<ve;++Ae)ye[Ae-1]=ne.slice(Ae*Te,(Ae+1)*Te);return ye[ve-1]=ne.slice(ve*Te),ye}function _(ne,Te,ve){for(var ye=0,Ae=0,Ne=0,He=0,nt=0,Ke=ve.length,Xe=[],Je=[];ye<Ke;++ye)Xe[ye]=Je[ye]=ye,Te[ye]=ve[ye];for(;nt<Je.length;++nt)ye=Je[nt],Ae=ne[ye].L,Ne=ne[ye].R,He=ne[ye].C,Xe[ye]===ye&&(Ae!==-1&&Xe[Ae]!==Ae&&(Xe[ye]=Xe[Ae]),Ne!==-1&&Xe[Ne]!==Ne&&(Xe[ye]=Xe[Ne])),He!==-1&&(Xe[He]=ye),Ae!==-1&&ye!=Xe[ye]&&(Xe[Ae]=Xe[ye],Je.lastIndexOf(Ae)<nt&&Je.push(Ae)),Ne!==-1&&ye!=Xe[ye]&&(Xe[Ne]=Xe[ye],Je.lastIndexOf(Ne)<nt&&Je.push(Ne));for(ye=1;ye<Ke;++ye)Xe[ye]===ye&&(Ne!==-1&&Xe[Ne]!==Ne?Xe[ye]=Xe[Ne]:Ae!==-1&&Xe[Ae]!==Ae&&(Xe[ye]=Xe[Ae]));for(ye=1;ye<Ke;++ye)if(ne[ye].type!==0){if(nt=ye,nt!=Xe[nt])do nt=Xe[nt],Te[ye]=Te[nt]+"/"+Te[ye];while(nt!==0&&Xe[nt]!==-1&&nt!=Xe[nt]);Xe[ye]=-1}for(Te[0]+="/",ye=1;ye<Ke;++ye)ne[ye].type!==2&&(Te[ye]+="/")}function w(ne,Te,ve){for(var ye=ne.start,Ae=ne.size,Ne=[],He=ye;ve&&Ae>0&&He>=0;)Ne.push(Te.slice(He*D,He*D+D)),Ae-=D,He=cd(ve,He*4);return Ne.length===0?mt(0):sa(Ne).slice(0,ne.size)}function b(ne,Te,ve,ye,Ae){var Ne=B;if(ne===B){if(Te!==0)throw new Error("DIFAT chain shorter than expected")}else if(ne!==-1){var He=ve[ne],nt=(ye>>>2)-1;if(!He)return;for(var Ke=0;Ke<nt&&(Ne=cd(He,Ke*4))!==B;++Ke)Ae.push(Ne);b(cd(He,ye-4),Te-1,ve,ye,Ae)}}function k(ne,Te,ve,ye,Ae){var Ne=[],He=[];Ae||(Ae=[]);var nt=ye-1,Ke=0,Xe=0;for(Ke=Te;Ke>=0;){Ae[Ke]=!0,Ne[Ne.length]=Ke,He.push(ne[Ke]);var Je=ve[Math.floor(Ke*4/ye)];if(Xe=Ke*4&nt,ye<4+Xe)throw new Error("FAT boundary crossed: "+Ke+" 4 "+ye);if(!ne[Je])break;Ke=cd(ne[Je],Xe)}return{nodes:Ne,data:rT([He])}}function R(ne,Te,ve,ye){var Ae=ne.length,Ne=[],He=[],nt=[],Ke=[],Xe=ye-1,Je=0,_t=0,Dt=0,Ht=0;for(Je=0;Je<Ae;++Je)if(nt=[],Dt=Je+Te,Dt>=Ae&&(Dt-=Ae),!He[Dt]){Ke=[];var Lt=[];for(_t=Dt;_t>=0;){Lt[_t]=!0,He[_t]=!0,nt[nt.length]=_t,Ke.push(ne[_t]);var Tt=ve[Math.floor(_t*4/ye)];if(Ht=_t*4&Xe,ye<4+Ht)throw new Error("FAT boundary crossed: "+_t+" 4 "+ye);if(!ne[Tt]||(_t=cd(ne[Tt],Ht),Lt[_t]))break}Ne[Dt]={nodes:nt,data:rT([Ke])}}return Ne}function C(ne,Te,ve,ye,Ae,Ne,He,nt){for(var Ke=0,Xe=ye.length?2:0,Je=Te[ne].data,_t=0,Dt=0,Ht;_t<Je.length;_t+=128){var Lt=Je.slice(_t,_t+128);Sa(Lt,64),Dt=Lt.read_shift(2),Ht=Zb(Lt,0,Dt-Xe),ye.push(Ht);var Tt={name:Ht,type:Lt.read_shift(1),color:Lt.read_shift(1),L:Lt.read_shift(4,"i"),R:Lt.read_shift(4,"i"),C:Lt.read_shift(4,"i"),clsid:Lt.read_shift(16),state:Lt.read_shift(4,"i"),start:0,size:0},br=Lt.read_shift(2)+Lt.read_shift(2)+Lt.read_shift(2)+Lt.read_shift(2);br!==0&&(Tt.ct=j(Lt,Lt.l-8));var on=Lt.read_shift(2)+Lt.read_shift(2)+Lt.read_shift(2)+Lt.read_shift(2);on!==0&&(Tt.mt=j(Lt,Lt.l-8)),Tt.start=Lt.read_shift(4,"i"),Tt.size=Lt.read_shift(4,"i"),Tt.size<0&&Tt.start<0&&(Tt.size=Tt.type=0,Tt.start=B,Tt.name=""),Tt.type===5?(Ke=Tt.start,Ae>0&&Ke!==B&&(Te[Ke].name="!StreamData")):Tt.size>=4096?(Tt.storage="fat",Te[Tt.start]===void 0&&(Te[Tt.start]=k(ve,Tt.start,Te.fat_addrs,Te.ssz)),Te[Tt.start].name=Tt.name,Tt.content=Te[Tt.start].data.slice(0,Tt.size)):(Tt.storage="minifat",Tt.size<0?Tt.size=0:Ke!==B&&Tt.start!==B&&Te[Ke]&&(Tt.content=w(Tt,Te[Ke].data,(Te[nt]||{}).data))),Tt.content&&Sa(Tt.content,0),Ne[Ht]=Tt,He.push(Tt)}}function j(ne,Te){return new Date((rl(ne,Te+4)/1e7*Math.pow(2,32)+rl(ne,Te)/1e7-11644473600)*1e3)}function X(ne,Te){return c(),f(l.readFileSync(ne),Te)}function K(ne,Te){var ve=Te&&Te.type;switch(ve||Xr&&Buffer.isBuffer(ne)&&(ve="buffer"),ve||"base64"){case"file":return X(ne,Te);case"base64":return f(nl(ul(ne)),Te);case"binary":return f(nl(ne),Te)}return f(ne,Te)}function P(ne,Te){var ve=Te||{},ye=ve.root||"Root Entry";if(ne.FullPaths||(ne.FullPaths=[]),ne.FileIndex||(ne.FileIndex=[]),ne.FullPaths.length!==ne.FileIndex.length)throw new Error("inconsistent CFB structure");ne.FullPaths.length===0&&(ne.FullPaths[0]=ye+"/",ne.FileIndex[0]={name:ye,type:5}),ve.CLSID&&(ne.FileIndex[0].clsid=ve.CLSID),A(ne)}function A(ne){var Te="Sh33tJ5";if(!yr.find(ne,"/"+Te)){var ve=mt(4);ve[0]=55,ve[1]=ve[3]=50,ve[2]=54,ne.FileIndex.push({name:Te,type:2,content:ve,size:4,L:69,R:69,C:69}),ne.FullPaths.push(ne.FullPaths[0]+Te),T(ne)}}function T(ne,Te){P(ne);for(var ve=!1,ye=!1,Ae=ne.FullPaths.length-1;Ae>=0;--Ae){var Ne=ne.FileIndex[Ae];switch(Ne.type){case 0:ye?ve=!0:(ne.FileIndex.pop(),ne.FullPaths.pop());break;case 1:case 2:case 5:ye=!0,isNaN(Ne.R*Ne.L*Ne.C)&&(ve=!0),Ne.R>-1&&Ne.L>-1&&Ne.R==Ne.L&&(ve=!0);break;default:ve=!0;break}}if(!(!ve&&!Te)){var He=new Date(1987,1,19),nt=0,Ke=Object.create?Object.create(null):{},Xe=[];for(Ae=0;Ae<ne.FullPaths.length;++Ae)Ke[ne.FullPaths[Ae]]=!0,ne.FileIndex[Ae].type!==0&&Xe.push([ne.FullPaths[Ae],ne.FileIndex[Ae]]);for(Ae=0;Ae<Xe.length;++Ae){var Je=n(Xe[Ae][0]);ye=Ke[Je],ye||(Xe.push([Je,{name:i(Je).replace("/",""),type:1,clsid:Ce,ct:He,mt:He,content:null}]),Ke[Je]=!0)}for(Xe.sort(function(Ht,Lt){return r(Ht[0],Lt[0])}),ne.FullPaths=[],ne.FileIndex=[],Ae=0;Ae<Xe.length;++Ae)ne.FullPaths[Ae]=Xe[Ae][0],ne.FileIndex[Ae]=Xe[Ae][1];for(Ae=0;Ae<Xe.length;++Ae){var _t=ne.FileIndex[Ae],Dt=ne.FullPaths[Ae];if(_t.name=i(Dt).replace("/",""),_t.L=_t.R=_t.C=-(_t.color=1),_t.size=_t.content?_t.content.length:0,_t.start=0,_t.clsid=_t.clsid||Ce,Ae===0)_t.C=Xe.length>1?1:-1,_t.size=0,_t.type=5;else if(Dt.slice(-1)=="/"){for(nt=Ae+1;nt<Xe.length&&n(ne.FullPaths[nt])!=Dt;++nt);for(_t.C=nt>=Xe.length?-1:nt,nt=Ae+1;nt<Xe.length&&n(ne.FullPaths[nt])!=n(Dt);++nt);_t.R=nt>=Xe.length?-1:nt,_t.type=1}else n(ne.FullPaths[Ae+1]||"")==n(Dt)&&(_t.R=Ae+1),_t.type=2}}}function O(ne,Te){var ve=Te||{};if(ve.fileType=="mad")return qr(ne,ve);switch(T(ne),ve.fileType){case"zip":return ur(ne,ve)}var ye=(function(Ht){for(var Lt=0,Tt=0,br=0;br<Ht.FileIndex.length;++br){var on=Ht.FileIndex[br];if(on.content){var Dr=on.content.length;Dr>0&&(Dr<4096?Lt+=Dr+63>>6:Tt+=Dr+511>>9)}}for(var fn=Ht.FullPaths.length+3>>2,Na=Lt+7>>3,Ca=Lt+127>>7,Ws=Na+Tt+fn+Ca,ii=Ws+127>>7,Bo=ii<=109?0:Math.ceil((ii-109)/127);Ws+ii+Bo+127>>7>ii;)Bo=++ii<=109?0:Math.ceil((ii-109)/127);var En=[1,Bo,ii,Ca,fn,Tt,Lt,0];return Ht.FileIndex[0].size=Lt<<6,En[7]=(Ht.FileIndex[0].start=En[0]+En[1]+En[2]+En[3]+En[4]+En[5])+(En[6]+7>>3),En})(ne),Ae=mt(ye[7]<<9),Ne=0,He=0;{for(Ne=0;Ne<8;++Ne)Ae.write_shift(1,_e[Ne]);for(Ne=0;Ne<8;++Ne)Ae.write_shift(2,0);for(Ae.write_shift(2,62),Ae.write_shift(2,3),Ae.write_shift(2,65534),Ae.write_shift(2,9),Ae.write_shift(2,6),Ne=0;Ne<3;++Ne)Ae.write_shift(2,0);for(Ae.write_shift(4,0),Ae.write_shift(4,ye[2]),Ae.write_shift(4,ye[0]+ye[1]+ye[2]+ye[3]-1),Ae.write_shift(4,0),Ae.write_shift(4,4096),Ae.write_shift(4,ye[3]?ye[0]+ye[1]+ye[2]-1:B),Ae.write_shift(4,ye[3]),Ae.write_shift(-4,ye[1]?ye[0]-1:B),Ae.write_shift(4,ye[1]),Ne=0;Ne<109;++Ne)Ae.write_shift(-4,Ne<ye[2]?ye[1]+Ne:-1)}if(ye[1])for(He=0;He<ye[1];++He){for(;Ne<236+He*127;++Ne)Ae.write_shift(-4,Ne<ye[2]?ye[1]+Ne:-1);Ae.write_shift(-4,He===ye[1]-1?B:He+1)}var nt=function(Ht){for(He+=Ht;Ne<He-1;++Ne)Ae.write_shift(-4,Ne+1);Ht&&(++Ne,Ae.write_shift(-4,B))};for(He=Ne=0,He+=ye[1];Ne<He;++Ne)Ae.write_shift(-4,we.DIFSECT);for(He+=ye[2];Ne<He;++Ne)Ae.write_shift(-4,we.FATSECT);nt(ye[3]),nt(ye[4]);for(var Ke=0,Xe=0,Je=ne.FileIndex[0];Ke<ne.FileIndex.length;++Ke)Je=ne.FileIndex[Ke],Je.content&&(Xe=Je.content.length,!(Xe<4096)&&(Je.start=He,nt(Xe+511>>9)));for(nt(ye[6]+7>>3);Ae.l&511;)Ae.write_shift(-4,we.ENDOFCHAIN);for(He=Ne=0,Ke=0;Ke<ne.FileIndex.length;++Ke)Je=ne.FileIndex[Ke],Je.content&&(Xe=Je.content.length,!(!Xe||Xe>=4096)&&(Je.start=He,nt(Xe+63>>6)));for(;Ae.l&511;)Ae.write_shift(-4,we.ENDOFCHAIN);for(Ne=0;Ne<ye[4]<<2;++Ne){var _t=ne.FullPaths[Ne];if(!_t||_t.length===0){for(Ke=0;Ke<17;++Ke)Ae.write_shift(4,0);for(Ke=0;Ke<3;++Ke)Ae.write_shift(4,-1);for(Ke=0;Ke<12;++Ke)Ae.write_shift(4,0);continue}Je=ne.FileIndex[Ne],Ne===0&&(Je.start=Je.size?Je.start-1:B);var Dt=Ne===0&&ve.root||Je.name;if(Xe=2*(Dt.length+1),Ae.write_shift(64,Dt,"utf16le"),Ae.write_shift(2,Xe),Ae.write_shift(1,Je.type),Ae.write_shift(1,Je.color),Ae.write_shift(-4,Je.L),Ae.write_shift(-4,Je.R),Ae.write_shift(-4,Je.C),Je.clsid)Ae.write_shift(16,Je.clsid,"hex");else for(Ke=0;Ke<4;++Ke)Ae.write_shift(4,0);Ae.write_shift(4,Je.state||0),Ae.write_shift(4,0),Ae.write_shift(4,0),Ae.write_shift(4,0),Ae.write_shift(4,0),Ae.write_shift(4,Je.start),Ae.write_shift(4,Je.size),Ae.write_shift(4,0)}for(Ne=1;Ne<ne.FileIndex.length;++Ne)if(Je=ne.FileIndex[Ne],Je.size>=4096)if(Ae.l=Je.start+1<<9,Xr&&Buffer.isBuffer(Je.content))Je.content.copy(Ae,Ae.l,0,Je.size),Ae.l+=Je.size+511&-512;else{for(Ke=0;Ke<Je.size;++Ke)Ae.write_shift(1,Je.content[Ke]);for(;Ke&511;++Ke)Ae.write_shift(1,0)}for(Ne=1;Ne<ne.FileIndex.length;++Ne)if(Je=ne.FileIndex[Ne],Je.size>0&&Je.size<4096)if(Xr&&Buffer.isBuffer(Je.content))Je.content.copy(Ae,Ae.l,0,Je.size),Ae.l+=Je.size+63&-64;else{for(Ke=0;Ke<Je.size;++Ke)Ae.write_shift(1,Je.content[Ke]);for(;Ke&63;++Ke)Ae.write_shift(1,0)}if(Xr)Ae.l=Ae.length;else for(;Ae.l<Ae.length;)Ae.write_shift(1,0);return Ae}function I(ne,Te){var ve=ne.FullPaths.map(function(Ke){return Ke.toUpperCase()}),ye=ve.map(function(Ke){var Xe=Ke.split("/");return Xe[Xe.length-(Ke.slice(-1)=="/"?2:1)]}),Ae=!1;Te.charCodeAt(0)===47?(Ae=!0,Te=ve[0].slice(0,-1)+Te):Ae=Te.indexOf("/")!==-1;var Ne=Te.toUpperCase(),He=Ae===!0?ve.indexOf(Ne):ye.indexOf(Ne);if(He!==-1)return ne.FileIndex[He];var nt=!Ne.match(a1);for(Ne=Ne.replace(wo,""),nt&&(Ne=Ne.replace(a1,"!")),He=0;He<ve.length;++He)if((nt?ve[He].replace(a1,"!"):ve[He]).replace(wo,"")==Ne||(nt?ye[He].replace(a1,"!"):ye[He]).replace(wo,"")==Ne)return ne.FileIndex[He];return null}var D=64,B=-2,re="d0cf11e0a1b11ae1",_e=[208,207,17,224,161,177,26,225],Ce="00000000000000000000000000000000",we={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:B,FREESECT:-1,HEADER_SIGNATURE:re,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Ce,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ce(ne,Te,ve){c();var ye=O(ne,ve);l.writeFileSync(Te,ye)}function H(ne){for(var Te=new Array(ne.length),ve=0;ve<ne.length;++ve)Te[ve]=String.fromCharCode(ne[ve]);return Te.join("")}function te(ne,Te){var ve=O(ne,Te);switch(Te&&Te.type||"buffer"){case"file":return c(),l.writeFileSync(Te.filename,ve),ve;case"binary":return typeof ve=="string"?ve:H(ve);case"base64":return X1(typeof ve=="string"?ve:H(ve));case"buffer":if(Xr)return Buffer.isBuffer(ve)?ve:ef(ve);case"array":return typeof ve=="string"?nl(ve):ve}return ve}var J;function N(ne){try{var Te=ne.InflateRaw,ve=new Te;if(ve._processChunk(new Uint8Array([3,0]),ve._finishFlushFlag),ve.bytesRead)J=ne;else throw new Error("zlib does not expose bytesRead")}catch(ye){console.error("cannot use native zlib: "+(ye.message||ye))}}function U(ne,Te){if(!J)return Mt(ne,Te);var ve=J.InflateRaw,ye=new ve,Ae=ye._processChunk(ne.slice(ne.l),ye._finishFlushFlag);return ne.l+=ye.bytesRead,Ae}function W(ne){return J?J.deflateRawSync(ne):wt(ne)}var Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],pe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function he(ne){var Te=(ne<<1|ne<<11)&139536|(ne<<5|ne<<15)&558144;return(Te>>16|Te>>8|Te)&255}for(var xe=typeof Uint8Array<"u",ke=xe?new Uint8Array(256):[],Fe=0;Fe<256;++Fe)ke[Fe]=he(Fe);function oe(ne,Te){var ve=ke[ne&255];return Te<=8?ve>>>8-Te:(ve=ve<<8|ke[ne>>8&255],Te<=16?ve>>>16-Te:(ve=ve<<8|ke[ne>>16&255],ve>>>24-Te))}function Ze(ne,Te){var ve=Te&7,ye=Te>>>3;return(ne[ye]|(ve<=6?0:ne[ye+1]<<8))>>>ve&3}function Re(ne,Te){var ve=Te&7,ye=Te>>>3;return(ne[ye]|(ve<=5?0:ne[ye+1]<<8))>>>ve&7}function fe(ne,Te){var ve=Te&7,ye=Te>>>3;return(ne[ye]|(ve<=4?0:ne[ye+1]<<8))>>>ve&15}function ut(ne,Te){var ve=Te&7,ye=Te>>>3;return(ne[ye]|(ve<=3?0:ne[ye+1]<<8))>>>ve&31}function rt(ne,Te){var ve=Te&7,ye=Te>>>3;return(ne[ye]|(ve<=1?0:ne[ye+1]<<8))>>>ve&127}function lt(ne,Te,ve){var ye=Te&7,Ae=Te>>>3,Ne=(1<<ve)-1,He=ne[Ae]>>>ye;return ve<8-ye||(He|=ne[Ae+1]<<8-ye,ve<16-ye)||(He|=ne[Ae+2]<<16-ye,ve<24-ye)||(He|=ne[Ae+3]<<24-ye),He&Ne}function le(ne,Te,ve){var ye=Te&7,Ae=Te>>>3;return ye<=5?ne[Ae]|=(ve&7)<<ye:(ne[Ae]|=ve<<ye&255,ne[Ae+1]=(ve&7)>>8-ye),Te+3}function je(ne,Te,ve){var ye=Te&7,Ae=Te>>>3;return ve=(ve&1)<<ye,ne[Ae]|=ve,Te+1}function ft(ne,Te,ve){var ye=Te&7,Ae=Te>>>3;return ve<<=ye,ne[Ae]|=ve&255,ve>>>=8,ne[Ae+1]=ve,Te+8}function Ie(ne,Te,ve){var ye=Te&7,Ae=Te>>>3;return ve<<=ye,ne[Ae]|=ve&255,ve>>>=8,ne[Ae+1]=ve&255,ne[Ae+2]=ve>>>8,Te+16}function Be(ne,Te){var ve=ne.length,ye=2*ve>Te?2*ve:Te+5,Ae=0;if(ve>=Te)return ne;if(Xr){var Ne=jk(ye);if(ne.copy)ne.copy(Ne);else for(;Ae<ne.length;++Ae)Ne[Ae]=ne[Ae];return Ne}else if(xe){var He=new Uint8Array(ye);if(He.set)He.set(ne);else for(;Ae<ve;++Ae)He[Ae]=ne[Ae];return He}return ne.length=ye,ne}function tt(ne){for(var Te=new Array(ne),ve=0;ve<ne;++ve)Te[ve]=0;return Te}function ot(ne,Te,ve){var ye=1,Ae=0,Ne=0,He=0,nt=0,Ke=ne.length,Xe=xe?new Uint16Array(32):tt(32);for(Ne=0;Ne<32;++Ne)Xe[Ne]=0;for(Ne=Ke;Ne<ve;++Ne)ne[Ne]=0;Ke=ne.length;var Je=xe?new Uint16Array(Ke):tt(Ke);for(Ne=0;Ne<Ke;++Ne)Xe[Ae=ne[Ne]]++,ye<Ae&&(ye=Ae),Je[Ne]=0;for(Xe[0]=0,Ne=1;Ne<=ye;++Ne)Xe[Ne+16]=nt=nt+Xe[Ne-1]<<1;for(Ne=0;Ne<Ke;++Ne)nt=ne[Ne],nt!=0&&(Je[Ne]=Xe[nt+16]++);var _t=0;for(Ne=0;Ne<Ke;++Ne)if(_t=ne[Ne],_t!=0)for(nt=oe(Je[Ne],ye)>>ye-_t,He=(1<<ye+4-_t)-1;He>=0;--He)Te[nt|He<<_t]=_t&15|Ne<<4;return ye}var ht=xe?new Uint16Array(512):tt(512),Pt=xe?new Uint16Array(32):tt(32);if(!xe){for(var Ft=0;Ft<512;++Ft)ht[Ft]=0;for(Ft=0;Ft<32;++Ft)Pt[Ft]=0}(function(){for(var ne=[],Te=0;Te<32;Te++)ne.push(5);ot(ne,Pt,32);var ve=[];for(Te=0;Te<=143;Te++)ve.push(8);for(;Te<=255;Te++)ve.push(9);for(;Te<=279;Te++)ve.push(7);for(;Te<=287;Te++)ve.push(8);ot(ve,ht,288)})();var jt=(function(){for(var Te=xe?new Uint8Array(32768):[],ve=0,ye=0;ve<pe.length-1;++ve)for(;ye<pe[ve+1];++ye)Te[ye]=ve;for(;ye<32768;++ye)Te[ye]=29;var Ae=xe?new Uint8Array(259):[];for(ve=0,ye=0;ve<ae.length-1;++ve)for(;ye<ae[ve+1];++ye)Ae[ye]=ve;function Ne(nt,Ke){for(var Xe=0;Xe<nt.length;){var Je=Math.min(65535,nt.length-Xe),_t=Xe+Je==nt.length;for(Ke.write_shift(1,+_t),Ke.write_shift(2,Je),Ke.write_shift(2,~Je&65535);Je-- >0;)Ke[Ke.l++]=nt[Xe++]}return Ke.l}function He(nt,Ke){for(var Xe=0,Je=0,_t=xe?new Uint16Array(32768):[];Je<nt.length;){var Dt=Math.min(65535,nt.length-Je);if(Dt<10){for(Xe=le(Ke,Xe,+(Je+Dt==nt.length)),Xe&7&&(Xe+=8-(Xe&7)),Ke.l=Xe/8|0,Ke.write_shift(2,Dt),Ke.write_shift(2,~Dt&65535);Dt-- >0;)Ke[Ke.l++]=nt[Je++];Xe=Ke.l*8;continue}Xe=le(Ke,Xe,+(Je+Dt==nt.length)+2);for(var Ht=0;Dt-- >0;){var Lt=nt[Je];Ht=(Ht<<5^Lt)&32767;var Tt=-1,br=0;if((Tt=_t[Ht])&&(Tt|=Je&-32768,Tt>Je&&(Tt-=32768),Tt<Je))for(;nt[Tt+br]==nt[Je+br]&&br<250;)++br;if(br>2){Lt=Ae[br],Lt<=22?Xe=ft(Ke,Xe,ke[Lt+1]>>1)-1:(ft(Ke,Xe,3),Xe+=5,ft(Ke,Xe,ke[Lt-23]>>5),Xe+=3);var on=Lt<8?0:Lt-4>>2;on>0&&(Ie(Ke,Xe,br-ae[Lt]),Xe+=on),Lt=Te[Je-Tt],Xe=ft(Ke,Xe,ke[Lt]>>3),Xe-=3;var Dr=Lt<4?0:Lt-2>>1;Dr>0&&(Ie(Ke,Xe,Je-Tt-pe[Lt]),Xe+=Dr);for(var fn=0;fn<br;++fn)_t[Ht]=Je&32767,Ht=(Ht<<5^nt[Je])&32767,++Je;Dt-=br-1}else Lt<=143?Lt=Lt+48:Xe=je(Ke,Xe,1),Xe=ft(Ke,Xe,ke[Lt]),_t[Ht]=Je&32767,++Je}Xe=ft(Ke,Xe,0)-1}return Ke.l=(Xe+7)/8|0,Ke.l}return function(Ke,Xe){return Ke.length<8?Ne(Ke,Xe):He(Ke,Xe)}})();function wt(ne){var Te=mt(50+Math.floor(ne.length*1.1)),ve=jt(ne,Te);return Te.slice(0,ve)}var At=xe?new Uint16Array(32768):tt(32768),Xt=xe?new Uint16Array(32768):tt(32768),Gt=xe?new Uint16Array(128):tt(128),qt=1,wr=1;function rn(ne,Te){var ve=ut(ne,Te)+257;Te+=5;var ye=ut(ne,Te)+1;Te+=5;var Ae=fe(ne,Te)+4;Te+=4;for(var Ne=0,He=xe?new Uint8Array(19):tt(19),nt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ke=1,Xe=xe?new Uint8Array(8):tt(8),Je=xe?new Uint8Array(8):tt(8),_t=He.length,Dt=0;Dt<Ae;++Dt)He[Y[Dt]]=Ne=Re(ne,Te),Ke<Ne&&(Ke=Ne),Xe[Ne]++,Te+=3;var Ht=0;for(Xe[0]=0,Dt=1;Dt<=Ke;++Dt)Je[Dt]=Ht=Ht+Xe[Dt-1]<<1;for(Dt=0;Dt<_t;++Dt)(Ht=He[Dt])!=0&&(nt[Dt]=Je[Ht]++);var Lt=0;for(Dt=0;Dt<_t;++Dt)if(Lt=He[Dt],Lt!=0){Ht=ke[nt[Dt]]>>8-Lt;for(var Tt=(1<<7-Lt)-1;Tt>=0;--Tt)Gt[Ht|Tt<<Lt]=Lt&7|Dt<<3}var br=[];for(Ke=1;br.length<ve+ye;)switch(Ht=Gt[rt(ne,Te)],Te+=Ht&7,Ht>>>=3){case 16:for(Ne=3+Ze(ne,Te),Te+=2,Ht=br[br.length-1];Ne-- >0;)br.push(Ht);break;case 17:for(Ne=3+Re(ne,Te),Te+=3;Ne-- >0;)br.push(0);break;case 18:for(Ne=11+rt(ne,Te),Te+=7;Ne-- >0;)br.push(0);break;default:br.push(Ht),Ke<Ht&&(Ke=Ht);break}var on=br.slice(0,ve),Dr=br.slice(ve);for(Dt=ve;Dt<286;++Dt)on[Dt]=0;for(Dt=ye;Dt<30;++Dt)Dr[Dt]=0;return qt=ot(on,At,286),wr=ot(Dr,Xt,30),Te}function Me(ne,Te){if(ne[0]==3&&!(ne[1]&3))return[gh(Te),2];for(var ve=0,ye=0,Ae=jk(Te||1<<18),Ne=0,He=Ae.length>>>0,nt=0,Ke=0;(ye&1)==0;){if(ye=Re(ne,ve),ve+=3,ye>>>1)ye>>1==1?(nt=9,Ke=5):(ve=rn(ne,ve),nt=qt,Ke=wr);else{ve&7&&(ve+=8-(ve&7));var Xe=ne[ve>>>3]|ne[(ve>>>3)+1]<<8;if(ve+=32,Xe>0)for(!Te&&He<Ne+Xe&&(Ae=Be(Ae,Ne+Xe),He=Ae.length);Xe-- >0;)Ae[Ne++]=ne[ve>>>3],ve+=8;continue}for(;;){!Te&&He<Ne+32767&&(Ae=Be(Ae,Ne+32767),He=Ae.length);var Je=lt(ne,ve,nt),_t=ye>>>1==1?ht[Je]:At[Je];if(ve+=_t&15,_t>>>=4,(_t>>>8&255)===0)Ae[Ne++]=_t;else{if(_t==256)break;_t-=257;var Dt=_t<8?0:_t-4>>2;Dt>5&&(Dt=0);var Ht=Ne+ae[_t];Dt>0&&(Ht+=lt(ne,ve,Dt),ve+=Dt),Je=lt(ne,ve,Ke),_t=ye>>>1==1?Pt[Je]:Xt[Je],ve+=_t&15,_t>>>=4;var Lt=_t<4?0:_t-2>>1,Tt=pe[_t];for(Lt>0&&(Tt+=lt(ne,ve,Lt),ve+=Lt),!Te&&He<Ht&&(Ae=Be(Ae,Ht+100),He=Ae.length);Ne<Ht;)Ae[Ne]=Ae[Ne-Tt],++Ne}}}return Te?[Ae,ve+7>>>3]:[Ae.slice(0,Ne),ve+7>>>3]}function Mt(ne,Te){var ve=ne.slice(ne.l||0),ye=Me(ve,Te);return ne.l+=ye[1],ye[0]}function Vt(ne,Te){if(ne)typeof console<"u"&&console.error(Te);else throw new Error(Te)}function rr(ne,Te){var ve=ne;Sa(ve,0);var ye=[],Ae=[],Ne={FileIndex:ye,FullPaths:Ae};P(Ne,{root:Te.root});for(var He=ve.length-4;(ve[He]!=80||ve[He+1]!=75||ve[He+2]!=5||ve[He+3]!=6)&&He>=0;)--He;ve.l=He+4,ve.l+=4;var nt=ve.read_shift(2);ve.l+=6;var Ke=ve.read_shift(4);for(ve.l=Ke,He=0;He<nt;++He){ve.l+=20;var Xe=ve.read_shift(4),Je=ve.read_shift(4),_t=ve.read_shift(2),Dt=ve.read_shift(2),Ht=ve.read_shift(2);ve.l+=8;var Lt=ve.read_shift(4),Tt=o(ve.slice(ve.l+_t,ve.l+_t+Dt));ve.l+=_t+Dt+Ht;var br=ve.l;ve.l=Lt+4,ar(ve,Xe,Je,Ne,Tt),ve.l=br}return Ne}function ar(ne,Te,ve,ye,Ae){ne.l+=2;var Ne=ne.read_shift(2),He=ne.read_shift(2),nt=a(ne);if(Ne&8257)throw new Error("Unsupported ZIP encryption");for(var Ke=ne.read_shift(4),Xe=ne.read_shift(4),Je=ne.read_shift(4),_t=ne.read_shift(2),Dt=ne.read_shift(2),Ht="",Lt=0;Lt<_t;++Lt)Ht+=String.fromCharCode(ne[ne.l++]);if(Dt){var Tt=o(ne.slice(ne.l,ne.l+Dt));(Tt[21589]||{}).mt&&(nt=Tt[21589].mt),((Ae||{})[21589]||{}).mt&&(nt=Ae[21589].mt)}ne.l+=Dt;var br=ne.slice(ne.l,ne.l+Xe);switch(He){case 8:br=U(ne,Je);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+He)}var on=!1;Ne&8&&(Ke=ne.read_shift(4),Ke==134695760&&(Ke=ne.read_shift(4),on=!0),Xe=ne.read_shift(4),Je=ne.read_shift(4)),Xe!=Te&&Vt(on,"Bad compressed size: "+Te+" != "+Xe),Je!=ve&&Vt(on,"Bad uncompressed size: "+ve+" != "+Je),Dn(ye,Ht,br,{unsafe:!0,mt:nt})}function ur(ne,Te){var ve=Te||{},ye=[],Ae=[],Ne=mt(1),He=ve.compression?8:0,nt=0,Ke=0,Xe=0,Je=0,_t=0,Dt=ne.FullPaths[0],Ht=Dt,Lt=ne.FileIndex[0],Tt=[],br=0;for(Ke=1;Ke<ne.FullPaths.length;++Ke)if(Ht=ne.FullPaths[Ke].slice(Dt.length),Lt=ne.FileIndex[Ke],!(!Lt.size||!Lt.content||Ht=="Sh33tJ5")){var on=Je,Dr=mt(Ht.length);for(Xe=0;Xe<Ht.length;++Xe)Dr.write_shift(1,Ht.charCodeAt(Xe)&127);Dr=Dr.slice(0,Dr.l),Tt[_t]=cQ.buf(Lt.content,0);var fn=Lt.content;He==8&&(fn=W(fn)),Ne=mt(30),Ne.write_shift(4,67324752),Ne.write_shift(2,20),Ne.write_shift(2,nt),Ne.write_shift(2,He),Lt.mt?s(Ne,Lt.mt):Ne.write_shift(4,0),Ne.write_shift(-4,Tt[_t]),Ne.write_shift(4,fn.length),Ne.write_shift(4,Lt.content.length),Ne.write_shift(2,Dr.length),Ne.write_shift(2,0),Je+=Ne.length,ye.push(Ne),Je+=Dr.length,ye.push(Dr),Je+=fn.length,ye.push(fn),Ne=mt(46),Ne.write_shift(4,33639248),Ne.write_shift(2,0),Ne.write_shift(2,20),Ne.write_shift(2,nt),Ne.write_shift(2,He),Ne.write_shift(4,0),Ne.write_shift(-4,Tt[_t]),Ne.write_shift(4,fn.length),Ne.write_shift(4,Lt.content.length),Ne.write_shift(2,Dr.length),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(4,0),Ne.write_shift(4,on),br+=Ne.l,Ae.push(Ne),br+=Dr.length,Ae.push(Dr),++_t}return Ne=mt(22),Ne.write_shift(4,101010256),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(2,_t),Ne.write_shift(2,_t),Ne.write_shift(4,br),Ne.write_shift(4,Je),Ne.write_shift(2,0),sa([sa(ye),sa(Ae),Ne])}var Jt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function mr(ne,Te){if(ne.ctype)return ne.ctype;var ve=ne.name||"",ye=ve.match(/\.([^\.]+)$/);return ye&&Jt[ye[1]]||Te&&(ye=(ve=Te).match(/[\.\\]([^\.\\])+$/),ye&&Jt[ye[1]])?Jt[ye[1]]:"application/octet-stream"}function an(ne){for(var Te=X1(ne),ve=[],ye=0;ye<Te.length;ye+=76)ve.push(Te.slice(ye,ye+76));return ve.join(`\r
`)+`\r
`}function zr(ne){var Te=ne.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Xe){var Je=Xe.charCodeAt(0).toString(16).toUpperCase();return"="+(Je.length==1?"0"+Je:Je)});Te=Te.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Te.charAt(0)==`
`&&(Te="=0D"+Te.slice(1)),Te=Te.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ve=[],ye=Te.split(`\r
`),Ae=0;Ae<ye.length;++Ae){var Ne=ye[Ae];if(Ne.length==0){ve.push("");continue}for(var He=0;He<Ne.length;){var nt=76,Ke=Ne.slice(He,He+nt);Ke.charAt(nt-1)=="="?nt--:Ke.charAt(nt-2)=="="?nt-=2:Ke.charAt(nt-3)=="="&&(nt-=3),Ke=Ne.slice(He,He+nt),He+=nt,He<Ne.length&&(Ke+="="),ve.push(Ke)}}return ve.join(`\r
`)}function Nn(ne){for(var Te=[],ve=0;ve<ne.length;++ve){for(var ye=ne[ve];ve<=ne.length&&ye.charAt(ye.length-1)=="=";)ye=ye.slice(0,ye.length-1)+ne[++ve];Te.push(ye)}for(var Ae=0;Ae<Te.length;++Ae)Te[Ae]=Te[Ae].replace(/[=][0-9A-Fa-f]{2}/g,function(Ne){return String.fromCharCode(parseInt(Ne.slice(1),16))});return nl(Te.join(`\r
`))}function Cn(ne,Te,ve){for(var ye="",Ae="",Ne="",He,nt=0;nt<10;++nt){var Ke=Te[nt];if(!Ke||Ke.match(/^\s*$/))break;var Xe=Ke.match(/^(.*?):\s*([^\s].*)$/);if(Xe)switch(Xe[1].toLowerCase()){case"content-location":ye=Xe[2].trim();break;case"content-type":Ne=Xe[2].trim();break;case"content-transfer-encoding":Ae=Xe[2].trim();break}}switch(++nt,Ae.toLowerCase()){case"base64":He=nl(ul(Te.slice(nt).join("")));break;case"quoted-printable":He=Nn(Te.slice(nt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ae)}var Je=Dn(ne,ye.slice(ve.length),He,{unsafe:!0});Ne&&(Je.ctype=Ne)}function ir(ne,Te){if(H(ne.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ve=Te&&Te.root||"",ye=(Xr&&Buffer.isBuffer(ne)?ne.toString("binary"):H(ne)).split(`\r
`),Ae=0,Ne="";for(Ae=0;Ae<ye.length;++Ae)if(Ne=ye[Ae],!!/^Content-Location:/i.test(Ne)&&(Ne=Ne.slice(Ne.indexOf("file")),ve||(ve=Ne.slice(0,Ne.lastIndexOf("/")+1)),Ne.slice(0,ve.length)!=ve))for(;ve.length>0&&(ve=ve.slice(0,ve.length-1),ve=ve.slice(0,ve.lastIndexOf("/")+1),Ne.slice(0,ve.length)!=ve););var He=(ye[1]||"").match(/boundary="(.*?)"/);if(!He)throw new Error("MAD cannot find boundary");var nt="--"+(He[1]||""),Ke=[],Xe=[],Je={FileIndex:Ke,FullPaths:Xe};P(Je);var _t,Dt=0;for(Ae=0;Ae<ye.length;++Ae){var Ht=ye[Ae];Ht!==nt&&Ht!==nt+"--"||(Dt++&&Cn(Je,ye.slice(_t,Ae),ve),_t=Ae)}return Je}function qr(ne,Te){var ve=Te||{},ye=ve.boundary||"SheetJS";ye="------="+ye;for(var Ae=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ye.slice(2)+'"',"","",""],Ne=ne.FullPaths[0],He=Ne,nt=ne.FileIndex[0],Ke=1;Ke<ne.FullPaths.length;++Ke)if(He=ne.FullPaths[Ke].slice(Ne.length),nt=ne.FileIndex[Ke],!(!nt.size||!nt.content||He=="Sh33tJ5")){He=He.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(br){return"_x"+br.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(br){return"_u"+br.charCodeAt(0).toString(16)+"_"});for(var Xe=nt.content,Je=Xr&&Buffer.isBuffer(Xe)?Xe.toString("binary"):H(Xe),_t=0,Dt=Math.min(1024,Je.length),Ht=0,Lt=0;Lt<=Dt;++Lt)(Ht=Je.charCodeAt(Lt))>=32&&Ht<128&&++_t;var Tt=_t>=Dt*4/5;Ae.push(ye),Ae.push("Content-Location: "+(ve.root||"file:///C:/SheetJS/")+He),Ae.push("Content-Transfer-Encoding: "+(Tt?"quoted-printable":"base64")),Ae.push("Content-Type: "+mr(nt,He)),Ae.push(""),Ae.push(Tt?zr(Je):an(Je))}return Ae.push(ye+`--\r
`),Ae.join(`\r
`)}function is(ne){var Te={};return P(Te,ne),Te}function Dn(ne,Te,ve,ye){var Ae=ye&&ye.unsafe;Ae||P(ne);var Ne=!Ae&&yr.find(ne,Te);if(!Ne){var He=ne.FullPaths[0];Te.slice(0,He.length)==He?He=Te:(He.slice(-1)!="/"&&(He+="/"),He=(He+Te).replace("//","/")),Ne={name:i(Te),type:2},ne.FileIndex.push(Ne),ne.FullPaths.push(He),Ae||yr.utils.cfb_gc(ne)}return Ne.content=ve,Ne.size=ve?ve.length:0,ye&&(ye.CLSID&&(Ne.clsid=ye.CLSID),ye.mt&&(Ne.mt=ye.mt),ye.ct&&(Ne.ct=ye.ct)),Ne}function qi(ne,Te){P(ne);var ve=yr.find(ne,Te);if(ve){for(var ye=0;ye<ne.FileIndex.length;++ye)if(ne.FileIndex[ye]==ve)return ne.FileIndex.splice(ye,1),ne.FullPaths.splice(ye,1),!0}return!1}function bn(ne,Te,ve){P(ne);var ye=yr.find(ne,Te);if(ye){for(var Ae=0;Ae<ne.FileIndex.length;++Ae)if(ne.FileIndex[Ae]==ye)return ne.FileIndex[Ae].name=i(ve),ne.FullPaths[Ae]=ve,!0}return!1}function Zn(ne){T(ne,!0)}return e.find=I,e.read=K,e.parse=f,e.write=te,e.writeFile=ce,e.utils={cfb_new:is,cfb_add:Dn,cfb_del:qi,cfb_mov:bn,cfb_gc:Zn,ReadShift:v1,CheckField:_R,prep_blob:Sa,bconcat:sa,use_zlib:N,_deflateRaw:wt,_inflateRaw:Mt,consts:we},e})();function uQ(t){return typeof t=="string"?vy(t):Array.isArray(t)?OY(t):t}function Og(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=vy(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?qc(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var i=new Blob([uQ(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=t,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Ph(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function fQ(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function ts(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function Hk(t,e){for(var r=[],n=ts(t),i=0;i!==n.length;++i)r[t[n[i]][e]]==null&&(r[t[n[i]][e]]=n[i]);return r}function wy(t){for(var e=[],r=ts(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function _y(t){for(var e=[],r=ts(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function hQ(t){for(var e=[],r=ts(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var gv=new Date(1899,11,30,0,0,0);function qs(t,e){var r=t.getTime(),n=gv.getTime()+(t.getTimezoneOffset()-gv.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var eR=new Date,dQ=gv.getTime()+(eR.getTimezoneOffset()-gv.getTimezoneOffset())*6e4,Wk=eR.getTimezoneOffset();function by(t){var e=new Date;return e.setTime(t*24*60*60*1e3+dQ),e.getTimezoneOffset()!==Wk&&e.setTime(e.getTime()+(e.getTimezoneOffset()-Wk)*6e4),e}function pQ(t){var e=0,r=0,n=!1,i=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=i.length;++s)if(i[s]){switch(r=1,s>3&&(n=!0),i[s].slice(i[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[s].slice(i[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(i[s],10)}return e}var Gk=new Date("2017-02-19T19:06:09.000Z"),tR=isNaN(Gk.getFullYear())?new Date("2/19/17"):Gk,mQ=tR.getFullYear()==2017;function yi(t,e){var r=new Date(t);if(mQ)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(tR.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Vd(t,e){if(Xr&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return qc(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return qc(zP(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return qc(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return qc(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],i=0;i!=t.length;++i)n.push(String.fromCharCode(t[i]));return n.join("")}function wi(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=wi(t[r]));return e}function Qi(t,e){for(var r="";r.length<e;)r+=t;return r}function uc(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var gQ=["january","february","march","april","may","june","july","august","september","october","november","december"];function Op(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&gQ.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return n<0||n>8099?r:(i>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var xQ=(function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,i){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),a=[s[0]],o=1;o<s.length;++o)a.push(i),a.push(s[o]);return a}})();function rR(t){return t?t.content&&t.type?Vd(t.content,!0):t.data?s1(t.data):t.asNodeBuffer&&Xr?s1(t.asNodeBuffer().toString("binary")):t.asBinary?s1(t.asBinary()):t._data&&t._data.getContent?s1(Vd(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function nR(t){if(!t)return null;if(t.data)return Dk(t.data);if(t.asNodeBuffer&&Xr)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?Dk(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function vQ(t){return t&&t.name.slice(-4)===".bin"?nR(t):rR(t)}function Rl(t,e){for(var r=t.FullPaths||ts(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),i=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var a=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==a||i==a)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function Gb(t,e){var r=Rl(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Ns(t,e,r){if(!r)return vQ(Gb(t,e));if(!e)return null;try{return Ns(t,e)}catch{return null}}function il(t,e,r){if(!r)return rR(Gb(t,e));if(!e)return null;try{return il(t,e)}catch{return null}}function yQ(t,e,r){return nR(Gb(t,e))}function Kk(t){for(var e=t.FullPaths||ts(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function $r(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Xr?n=ef(r):n=jY(r),yr.utils.cfb_add(t,e,n)}yr.utils.cfb_add(t,e,r)}else t.file(e,r)}function Kb(){return yr.utils.cfb_new()}function iR(t,e){switch(e.type){case"base64":return yr.read(t,{type:"base64"});case"binary":return yr.read(t,{type:"binary"});case"buffer":case"array":return yr.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function o1(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var i=n.shift();i===".."?r.pop():i!=="."&&r.push(i)}return r.join("/")}var ys=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,wQ=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,Xk=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,_Q=/<[^>]*>/g,co=ys.match(Xk)?Xk:_Q,bQ=/<\w*:/,EQ=/<(\/?)\w+:/;function Ir(t,e,r){for(var n={},i=0,s=0;i!==t.length&&!((s=t.charCodeAt(i))===32||s===10||s===13);++i);if(e||(n[0]=t.slice(0,i)),i===t.length)return n;var a=t.match(wQ),o=0,l="",c=0,f="",p="",g=1;if(a)for(c=0;c!=a.length;++c){for(p=a[c],s=0;s!=p.length&&p.charCodeAt(s)!==61;++s);for(f=p.slice(0,s).trim();p.charCodeAt(s+1)==32;)++s;for(g=(i=p.charCodeAt(s+1))==34||i==39?1:0,l=p.slice(s+1+g,p.length-g),o=0;o!=f.length&&f.charCodeAt(o)!==58;++o);if(o===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),n[f]=l,n[f.toLowerCase()]=l;else{var m=(o===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(o+1);if(n[m]&&f.slice(o-3,o)=="ext")continue;n[m]=l,n[m.toLowerCase()]=l}}return n}function ou(t){return t.replace(EQ,"<$1")}var sR={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Xb=wy(sR),wn=(function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var i=n+"",s=i.indexOf("<![CDATA[");if(s==-1)return i.replace(t,function(o,l){return sR[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var a=i.indexOf("]]>");return r(i.slice(0,s))+i.slice(s+9,a)+r(i.slice(a+3))}})(),Yb=/[&<>'"]/g,SQ=/[\u0000-\u0008\u000b-\u001f]/g;function qn(t){var e=t+"";return e.replace(Yb,function(r){return Xb[r]}).replace(SQ,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Yk(t){return qn(t).replace(/ /g,"_x0020_")}var aR=/[\u0000-\u001f]/g;function Qb(t){var e=t+"";return e.replace(Yb,function(r){return Xb[r]}).replace(/\n/g,"<br/>").replace(aR,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function kQ(t){var e=t+"";return e.replace(Yb,function(r){return Xb[r]}).replace(aR,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var Qk=(function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}})();function TQ(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function mi(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Qw(t){for(var e="",r=0,n=0,i=0,s=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(i=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(i&63)<<6|s&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function Jk(t){var e=gh(2*t.length),r,n,i=1,s=0,a=0,o;for(n=0;n<t.length;n+=i)i=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),i=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),i=3):(i=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function Zk(t){return ef(t,"binary").toString("utf8")}var Wx="foo bar baz",Xn=Xr&&(Zk(Wx)==Qw(Wx)&&Zk||Jk(Wx)==Qw(Wx)&&Jk)||Qw,qc=Xr?function(t){return ef(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,i=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},Q1=(function(){var t={};return function(r,n){var i=r+"|"+(n||"");return t[i]?t[i]:t[i]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),oR=(function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)n=n.replace(t[i][0],t[i][1]);return n}})(),AQ=(function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),NQ=/<\/?(?:vt:)?variant>/g,CQ=/<(?:vt:)([^>]*)>([\s\S]*)</;function eT(t,e){var r=Ir(t),n=t.match(AQ(r.baseType))||[],i=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return i}return n.forEach(function(s){var a=s.replace(NQ,"").match(CQ);a&&i.push({v:Xn(a[2]),t:a[1]})}),i}var lR=/(^\s|\s$|\n)/;function Ta(t,e){return"<"+t+(e.match(lR)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function J1(t){return ts(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Bt(t,e,r){return"<"+t+(r!=null?J1(r):"")+(e!=null?(e.match(lR)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function N_(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function IQ(t,e){switch(typeof t){case"string":var r=Bt("vt:lpwstr",qn(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Bt((t|0)==t?"vt:i4":"vt:r8",qn(String(t)));case"boolean":return Bt("vt:bool",t?"true":"false")}if(t instanceof Date)return Bt("vt:filetime",N_(t));throw new Error("Unable to serialize "+t)}function Jb(t){if(Xr&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Xn(Ph(qb(t)));throw new Error("Bad input format: expected Buffer or string")}var Z1=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,zs={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Jd=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],tl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function PQ(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,s=5;s>=0;--s)i=i*256+t[e+s];return n==2047?i==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}function RQ(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=n?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)t[r+o]=s&255;t[r+6]=(i&15)<<4|s&15,t[r+7]=i>>4|n}var tT=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var i=0,s=t[0][n].length;i<s;i+=r)e.push.apply(e,t[0][n].slice(i,i+r));return e},rT=Xr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:ef(e)})):tT(t)}:tT,nT=function(t,e,r){for(var n=[],i=e;i<r;i+=2)n.push(String.fromCharCode(Du(t,i)));return n.join("").replace(wo,"")},Zb=Xr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(wo,""):nT(t,e,r)}:nT,iT=function(t,e,r){for(var n=[],i=e;i<e+r;++i)n.push(("0"+t[i].toString(16)).slice(-2));return n.join("")},cR=Xr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):iT(t,e,r)}:iT,sT=function(t,e,r){for(var n=[],i=e;i<r;i++)n.push(String.fromCharCode(H0(t,i)));return n.join("")},jg=Xr?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):sT(e,r,n)}:sT,uR=function(t,e){var r=rl(t,e);return r>0?jg(t,e+4,e+4+r-1):""},fR=uR,hR=function(t,e){var r=rl(t,e);return r>0?jg(t,e+4,e+4+r-1):""},dR=hR,pR=function(t,e){var r=2*rl(t,e);return r>0?jg(t,e+4,e+4+r-1):""},mR=pR,gR=function(e,r){var n=rl(e,r);return n>0?Zb(e,r+4,r+4+n):""},xR=gR,vR=function(t,e){var r=rl(t,e);return r>0?jg(t,e+4,e+4+r):""},yR=vR,wR=function(t,e){return PQ(t,e)},xv=wR,e3=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Xr&&(fR=function(e,r){if(!Buffer.isBuffer(e))return uR(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},dR=function(e,r){if(!Buffer.isBuffer(e))return hR(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},mR=function(e,r){if(!Buffer.isBuffer(e))return pR(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},xR=function(e,r){if(!Buffer.isBuffer(e))return gR(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},yR=function(e,r){if(!Buffer.isBuffer(e))return vR(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},xv=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):wR(e,r)},e3=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var H0=function(t,e){return t[e]},Du=function(t,e){return t[e+1]*256+t[e]},FQ=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},rl=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},cd=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},LQ=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function v1(t,e){var r="",n,i,s=[],a,o,l,c;switch(e){case"dbcs":if(c=this.l,Xr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(Du(this,c)),c+=2;t*=2;break;case"utf8":r=jg(this,this.l,this.l+t);break;case"utf16le":t*=2,r=Zb(this,this.l,this.l+t);break;case"wstr":return v1.call(this,t,"dbcs");case"lpstr-ansi":r=fR(this,this.l),t=4+rl(this,this.l);break;case"lpstr-cp":r=dR(this,this.l),t=4+rl(this,this.l);break;case"lpwstr":r=mR(this,this.l),t=4+2*rl(this,this.l);break;case"lpp4":t=4+rl(this,this.l),r=xR(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+rl(this,this.l),r=yR(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=H0(this,this.l+t++))!==0;)s.push(Hx(a));r=s.join("");break;case"_wstr":for(t=0,r="";(a=Du(this,this.l+t))!==0;)s.push(Hx(a)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=H0(this,c),this.l=c+1,o=v1.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(Hx(Du(this,c))),c+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=H0(this,c),this.l=c+1,o=v1.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(Hx(H0(this,c))),c+=1}r=s.join("");break;default:switch(t){case 1:return n=H0(this,this.l),this.l++,n;case 2:return n=(e==="i"?FQ:Du)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?cd:LQ)(this,this.l),this.l+=4,n):(i=rl(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=xv(this,this.l):i=xv([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:r=cR(this,this.l,t);break}}return this.l+=t,r}var DQ=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},OQ=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},jQ=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function MQ(t,e,r){var n=0,i=0;if(r==="dbcs"){for(i=0;i!=e.length;++i)jQ(this,e.charCodeAt(i),this.l+2*i);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;n=e.length}else if(r==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,DQ(this,e,this.l);break;case 8:if(n=8,r==="f"){RQ(this,e,this.l);break}case 16:break;case-4:n=4,OQ(this,e,this.l);break}return this.l+=n,this}function _R(t,e){var r=cR(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Sa(t,e){t.l=e,t.read_shift=v1,t.chk=_R,t.write_shift=MQ}function lo(t,e){t.l+=e}function mt(t){var e=gh(t);return Sa(e,0),e}function tf(t,e,r){if(t){var n,i,s;Sa(t,t.l||0);for(var a=t.length,o=0,l=0;t.l<a;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var c=sg[o]||sg[65535];for(n=t.read_shift(1),s=n&127,i=1;i<4&&n&128;++i)s+=((n=t.read_shift(1))&127)<<7*i;l=t.l+s;var f=c.f&&c.f(t,s,r);if(t.l=l,e(f,c,o))return}}}function Oo(){var t=[],e=Xr?256:2048,r=function(c){var f=mt(c);return Sa(f,0),f},n=r(e),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(c){return n&&c<n.length-n.l?n:(i(),n=r(Math.max(c+1,e)))},a=function(){return i(),sa(t)},o=function(c){i(),n=c,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:o,end:a,_bufs:t}}function bt(t,e,r,n){var i=+e,s;if(!isNaN(i)){n||(n=sg[i].p||(r||[]).length||0),s=1+(i>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var a=t.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(n>=128)a.write_shift(1,(n&127)+128),n>>=7;else{a.write_shift(1,n);break}n>0&&e3(r)&&t.push(r)}}function y1(t,e,r){var n=wi(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function aT(t,e,r){var n=wi(t);return n.s=y1(n.s,e.s,r),n.e=y1(n.e,e.s,r),n}function w1(t,e){if(t.cRel&&t.c<0)for(t=wi(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=wi(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Cr(t);return!t.cRel&&t.cRel!=null&&(r=UQ(r)),!t.rRel&&t.rRel!=null&&(r=BQ(r)),r}function Jw(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Vi(t.s.c)+":"+(t.e.cRel?"":"$")+Vi(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+vs(t.s.r)+":"+(t.e.rRel?"":"$")+vs(t.e.r):w1(t.s,e.biff)+":"+w1(t.e,e.biff)}function t3(t){return parseInt(VQ(t),10)-1}function vs(t){return""+(t+1)}function BQ(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function VQ(t){return t.replace(/\$(\d+)$/,"$1")}function r3(t){for(var e=zQ(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Vi(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function UQ(t){return t.replace(/^([A-Z])/,"$$$1")}function zQ(t){return t.replace(/^\$([A-Z])/,"$1")}function $Q(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ui(t){for(var e=0,r=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:e-1}}function Cr(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function jo(t){var e=t.indexOf(":");return e==-1?{s:Ui(t),e:Ui(t)}:{s:Ui(t.slice(0,e)),e:Ui(t.slice(e+1))}}function Ur(t,e){return typeof e>"u"||typeof e=="number"?Ur(t.s,t.e):(typeof t!="string"&&(t=Cr(t)),typeof e!="string"&&(e=Cr(e)),t==e?t:t+":"+e)}function _n(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,s=t.length;for(r=0;n<s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.s.c=--r,r=0;n<s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(e.s.r=--r,n===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.e.c=--r,r=0;n!=s&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return e.e.r=--r,e}function oT(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Ol(t.z,r?qs(e):e)}catch{}try{return t.w=Ol((t.XF||{}).numFmtId||(r?14:0),r?qs(e):e)}catch{return""+e}}function Hu(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?rf[t.v]||t.v:e==null?oT(t,t.v):oT(t,e))}function Rh(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function bR(t,e,r){var n=r||{},i=t?Array.isArray(t):n.dense,s=t||(i?[]:{}),a=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?Ui(n.origin):n.origin;a=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var f=_n(s["!ref"]);c.s.c=f.s.c,c.s.r=f.s.r,c.e.c=Math.max(c.e.c,f.e.c),c.e.r=Math.max(c.e.r,f.e.r),a==-1&&(c.e.r=a=f.e.r+1)}for(var p=0;p!=e.length;++p)if(e[p]){if(!Array.isArray(e[p]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=e[p].length;++g)if(!(typeof e[p][g]>"u")){var m={v:e[p][g]},_=a+p,w=o+g;if(c.s.r>_&&(c.s.r=_),c.s.c>w&&(c.s.c=w),c.e.r<_&&(c.e.r=_),c.e.c<w&&(c.e.c=w),e[p][g]&&typeof e[p][g]=="object"&&!Array.isArray(e[p][g])&&!(e[p][g]instanceof Date))m=e[p][g];else if(Array.isArray(m.v)&&(m.f=e[p][g][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Tr[14],n.cellDates?(m.t="d",m.w=Ol(m.z,qs(m.v))):(m.t="n",m.v=qs(m.v),m.w=Ol(m.z,m.v))):m.t="s";if(i)s[_]||(s[_]=[]),s[_][w]&&s[_][w].z&&(m.z=s[_][w].z),s[_][w]=m;else{var b=Cr({c:w,r:_});s[b]&&s[b].z&&(m.z=s[b].z),s[b]=m}}}return c.s.c<1e7&&(s["!ref"]=Ur(c)),s}function lm(t,e){return bR(null,t,e)}function qQ(t){return t.read_shift(4,"i")}function fc(t,e){return e||(e=mt(4)),e.write_shift(4,t),e}function oo(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function aa(t,e){var r=!1;return e==null&&(r=!0,e=mt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function HQ(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function WQ(t,e){return e||(e=mt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function n3(t,e){var r=t.l,n=t.read_shift(1),i=oo(t),s=[],a={t:i,h:i};if((n&1)!==0){for(var o=t.read_shift(4),l=0;l!=o;++l)s.push(HQ(t));a.r=s}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}function GQ(t,e){var r=!1;return e==null&&(r=!0,e=mt(15+4*t.t.length)),e.write_shift(1,0),aa(t.t,e),r?e.slice(0,e.l):e}var KQ=n3;function XQ(t,e){var r=!1;return e==null&&(r=!0,e=mt(23+4*t.t.length)),e.write_shift(1,1),aa(t.t,e),e.write_shift(4,1),WQ({},e),r?e.slice(0,e.l):e}function Ul(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Zd(t,e){return e==null&&(e=mt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function e0(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function t0(t,e){return e==null&&(e=mt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var YQ=oo,ER=aa;function i3(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function vv(t,e){var r=!1;return e==null&&(r=!0,e=mt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var QQ=oo,C_=i3,s3=vv;function a3(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var i=n===0?xv([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):cd(e,0)>>2;return r?i/100:i}function SR(t,e){e==null&&(e=mt(4));var r=0,n=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?i:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function kR(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function JQ(t,e){return e||(e=mt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var r0=kR,cm=JQ;function io(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Ud(t,e){return(e||mt(8)).write_shift(8,t,"f")}function ZQ(t){var e={},r=t.read_shift(1),n=r>>>1,i=t.read_shift(1),s=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=i;var c=vd[i];c&&(e.rgb=tg(c));break;case 2:e.rgb=tg([a,o,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function yv(t,e){if(e||(e=mt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function eJ(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function tJ(t,e){e||(e=mt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function TR(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function rJ(t){return TR(t,1)}function nJ(t){return TR(t,2)}var o3=2,Ro=3,Gx=11,lT=12,wv=19,Kx=64,iJ=65,sJ=71,aJ=4108,oJ=4126,ra=80,AR=81,lJ=[ra,AR],I_={1:{n:"CodePage",t:o3},2:{n:"Category",t:ra},3:{n:"PresentationFormat",t:ra},4:{n:"ByteCount",t:Ro},5:{n:"LineCount",t:Ro},6:{n:"ParagraphCount",t:Ro},7:{n:"SlideCount",t:Ro},8:{n:"NoteCount",t:Ro},9:{n:"HiddenCount",t:Ro},10:{n:"MultimediaClipCount",t:Ro},11:{n:"ScaleCrop",t:Gx},12:{n:"HeadingPairs",t:aJ},13:{n:"TitlesOfParts",t:oJ},14:{n:"Manager",t:ra},15:{n:"Company",t:ra},16:{n:"LinksUpToDate",t:Gx},17:{n:"CharacterCount",t:Ro},19:{n:"SharedDoc",t:Gx},22:{n:"HyperlinksChanged",t:Gx},23:{n:"AppVersion",t:Ro,p:"version"},24:{n:"DigSig",t:iJ},26:{n:"ContentType",t:ra},27:{n:"ContentStatus",t:ra},28:{n:"Language",t:ra},29:{n:"Version",t:ra},255:{},2147483648:{n:"Locale",t:wv},2147483651:{n:"Behavior",t:wv},1919054434:{}},P_={1:{n:"CodePage",t:o3},2:{n:"Title",t:ra},3:{n:"Subject",t:ra},4:{n:"Author",t:ra},5:{n:"Keywords",t:ra},6:{n:"Comments",t:ra},7:{n:"Template",t:ra},8:{n:"LastAuthor",t:ra},9:{n:"RevNumber",t:ra},10:{n:"EditTime",t:Kx},11:{n:"LastPrinted",t:Kx},12:{n:"CreatedDate",t:Kx},13:{n:"ModifiedDate",t:Kx},14:{n:"PageCount",t:Ro},15:{n:"WordCount",t:Ro},16:{n:"CharCount",t:Ro},17:{n:"Thumbnail",t:sJ},18:{n:"Application",t:ra},19:{n:"DocSecurity",t:Ro},255:{},2147483648:{n:"Locale",t:wv},2147483651:{n:"Behavior",t:wv},1919054434:{}},cT={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},cJ=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function uJ(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var fJ=uJ([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),vd=wi(fJ),rf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},NR={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},R_={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Xx={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function l3(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function hJ(t){var e=l3();if(!t||!t.match)return e;var r={};if((t.match(co)||[]).forEach(function(n){var i=Ir(n);switch(i[0].replace(bQ,"<")){case"<?xml":break;case"<Types":e.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[i.Extension]=i.ContentType;break;case"<Override":e[R_[i.ContentType]]!==void 0&&e[R_[i.ContentType]].push(i.PartName);break}}),e.xmlns!==zs.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function CR(t,e){var r=hQ(R_),n=[],i;n[n.length]=ys,n[n.length]=Bt("Types",null,{xmlns:zs.CT,"xmlns:xsd":zs.xsd,"xmlns:xsi":zs.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Bt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){t[l]&&t[l].length>0&&(i=t[l][0],n[n.length]=Bt("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:Xx[l][e.bookType]||Xx[l].xlsx}))},a=function(l){(t[l]||[]).forEach(function(c){n[n.length]=Bt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:Xx[l][e.bookType]||Xx[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(c){n[n.length]=Bt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:r[l][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var en={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function eg(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function _1(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(co)||[]).forEach(function(i){var s=Ir(i);if(s[0]==="<Relationship"){var a={};a.Type=s.Type,a.Target=s.Target,a.Id=s.Id,s.TargetMode&&(a.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:o1(s.Target,e);r[o]=a,n[s.Id]=a}}),r["!id"]=n,r}function cp(t){var e=[ys,Bt("Relationships",null,{xmlns:zs.RELS})];return ts(t["!id"]).forEach(function(r){e[e.length]=Bt("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Un(t,e,r,n,i,s){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=n,i.Target=r,[en.HLINK,en.XPATH,en.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}var dJ="application/vnd.oasis.opendocument.spreadsheet";function pJ(t,e){for(var r=Jb(t),n,i;n=Z1.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(i=Ir(n[0],!1),i.path=="/"&&i.type!==dJ)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function mJ(t){var e=[ys];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function uT(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function gJ(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function xJ(t){var e=[ys];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(uT(t[r][0],t[r][1])),e.push(gJ("",t[r][0]));return e.push(uT("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function IR(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+hv.version+"</meta:generator></office:meta></office:document-meta>"}var Ll=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],vJ=(function(){for(var t=new Array(Ll.length),e=0;e<Ll.length;++e){var r=Ll[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t})();function PR(t){var e={};t=Xn(t);for(var r=0;r<Ll.length;++r){var n=Ll[r],i=t.match(vJ[r]);i!=null&&i.length>0&&(e[n[1]]=wn(i[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=yi(e[n[1]]))}return e}function Zw(t,e,r,n,i){i[t]!=null||e==null||e===""||(i[t]=e,e=qn(e),n[n.length]=r?Bt(t,e,r):Ta(t,e))}function RR(t,e){var r=e||{},n=[ys,Bt("cp:coreProperties",null,{"xmlns:cp":zs.CORE_PROPS,"xmlns:dc":zs.dc,"xmlns:dcterms":zs.dcterms,"xmlns:dcmitype":zs.dcmitype,"xmlns:xsi":zs.xsi})],i={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&Zw("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:N_(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),t.ModifiedDate!=null&&Zw("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:N_(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var s=0;s!=Ll.length;++s){var a=Ll[s],o=r.Props&&r.Props[a[1]]!=null?r.Props[a[1]]:t?t[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&Zw(a[0],o,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var yd=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],FR=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function LR(t,e,r,n){var i=[];if(typeof t=="string")i=eT(t,n);else for(var s=0;s<t.length;++s)i=i.concat(t[s].map(function(f){return{v:f}}));var a=typeof e=="string"?eT(e,n).map(function(f){return f.v}):e,o=0,l=0;if(a.length>0)for(var c=0;c!==i.length;c+=2){switch(l=+i[c+1].v,i[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=a.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=a.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=a.slice(o,o+l);break}o+=l}}function yJ(t,e,r){var n={};return e||(e={}),t=Xn(t),yd.forEach(function(i){var s=(t.match(Q1(i[0]))||[])[1];switch(i[2]){case"string":s&&(e[i[1]]=wn(s));break;case"bool":e[i[1]]=s==="true";break;case"raw":var a=t.match(new RegExp("<"+i[0]+"[^>]*>([\\s\\S]*?)</"+i[0]+">"));a&&a.length>0&&(n[i[1]]=a[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&LR(n.HeadingPairs,n.TitlesOfParts,e,r),e}function DR(t){var e=[],r=Bt;return t||(t={}),t.Application="SheetJS",e[e.length]=ys,e[e.length]=Bt("Properties",null,{xmlns:zs.EXT_PROPS,"xmlns:vt":zs.vt}),yd.forEach(function(n){if(t[n[1]]!==void 0){var i;switch(n[2]){case"string":i=qn(String(t[n[1]]));break;case"bool":i=t[n[1]]?"true":"false";break}i!==void 0&&(e[e.length]=r(n[0],i))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+qn(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var wJ=/<[^>]+>[^<]*/g;function _J(t,e){var r={},n="",i=t.match(wJ);if(i)for(var s=0;s!=i.length;++s){var a=i[s],o=Ir(a);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=wn(o.name);break;case"</property>":n=null;break;default:if(a.indexOf("<vt:")===0){var l=a.split(">"),c=l[0].slice(4),f=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=wn(f);break;case"bool":r[n]=mi(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(f);break;case"filetime":case"date":r[n]=yi(f);break;case"cy":case"error":r[n]=wn(f);break;default:if(c.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",a,c,l)}}else if(a.slice(0,2)!=="</"){if(e.WTF)throw new Error(a)}}}return r}function OR(t){var e=[ys,Bt("Properties",null,{xmlns:zs.CUST_PROPS,"xmlns:vt":zs.vt})];if(!t)return e.join("");var r=1;return ts(t).forEach(function(i){++r,e[e.length]=Bt("property",IQ(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:qn(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var F_={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},e5;function bJ(t,e,r){e5||(e5=wy(F_)),e=e5[e]||e,t[e]=r}function EJ(t,e){var r=[];return ts(F_).map(function(n){for(var i=0;i<Ll.length;++i)if(Ll[i][1]==n)return Ll[i];for(i=0;i<yd.length;++i)if(yd[i][1]==n)return yd[i];throw n}).forEach(function(n){if(t[n[1]]!=null){var i=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push(Ta(F_[n[1]]||n[1],i))}}),Bt("DocumentProperties",r.join(""),{xmlns:tl.o})}function SJ(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return t&&ts(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var a=0;a<Ll.length;++a)if(s==Ll[a][1])return;for(a=0;a<yd.length;++a)if(s==yd[a][1])return;for(a=0;a<r.length;++a)if(s==r[a])return;var o=t[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(Bt(Yk(s),o,{"dt:dt":l}))}}),e&&ts(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(Bt(Yk(s),a,{"dt:dt":o}))}}),"<"+n+' xmlns="'+tl.o+'">'+i.join("")+"</"+n+">"}function c3(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function kJ(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),i=(r-n)/Math.pow(2,32);n*=1e7,i*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),i+=s);var a=mt(8);return a.write_shift(4,n),a.write_shift(4,i),a}function jR(t,e,r){var n=t.l,i=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return i}function MR(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function BR(t,e,r){return e===31?MR(t):jR(t,e,r)}function L_(t,e,r){return BR(t,e,r===!1?0:4)}function TJ(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return BR(t,e,0)}function AJ(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var i=t.l;r[n]=t.read_shift(0,"lpwstr").replace(wo,""),t.l-i&2&&(t.l+=2)}return r}function NJ(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(wo,"");return r}function CJ(t){var e=t.l,r=_v(t,AR);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=_v(t,Ro);return[r,n]}function IJ(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(CJ(t));return r}function fT(t,e){for(var r=t.read_shift(4),n={},i=0;i!=r;++i){var s=t.read_shift(4),a=t.read_shift(4);n[s]=t.read_shift(a,e===1200?"utf16le":"utf8").replace(wo,"").replace(a1,"!"),e===1200&&a%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function VR(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function PJ(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function _v(t,e,r){var n=t.read_shift(2),i,s=r||{};if(t.l+=2,e!==lT&&n!==e&&lJ.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===lT?n:e){case 2:return i=t.read_shift(2,"i"),s.raw||(t.l+=2),i;case 3:return i=t.read_shift(4,"i"),i;case 11:return t.read_shift(4)!==0;case 19:return i=t.read_shift(4),i;case 30:return jR(t,n,4).replace(wo,"");case 31:return MR(t);case 64:return c3(t);case 65:return VR(t);case 71:return PJ(t);case 80:return L_(t,n,!s.raw).replace(wo,"");case 81:return TJ(t,n).replace(wo,"");case 4108:return IJ(t);case 4126:case 4127:return n==4127?AJ(t):NJ(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function hT(t,e){var r=mt(4),n=mt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=mt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=kJ(e);break;case 31:case 80:for(n=mt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return sa([r,n])}function dT(t,e){var r=t.l,n=t.read_shift(4),i=t.read_shift(4),s=[],a=0,o=0,l=-1,c={};for(a=0;a!=i;++a){var f=t.read_shift(4),p=t.read_shift(4);s[a]=[f,p+r]}s.sort(function(R,C){return R[1]-C[1]});var g={};for(a=0;a!=i;++a){if(t.l!==s[a][1]){var m=!0;if(a>0&&e)switch(e[s[a-1][0]].t){case 2:t.l+2===s[a][1]&&(t.l+=2,m=!1);break;case 80:t.l<=s[a][1]&&(t.l=s[a][1],m=!1);break;case 4108:t.l<=s[a][1]&&(t.l=s[a][1],m=!1);break}if((!e||a==0)&&t.l<=s[a][1]&&(m=!1,t.l=s[a][1]),m)throw new Error("Read Error: Expected address "+s[a][1]+" at "+t.l+" :"+a)}if(e){var _=e[s[a][0]];if(g[_.n]=_v(t,_.t,{raw:!0}),_.p==="version"&&(g[_.n]=String(g[_.n]>>16)+"."+("0000"+String(g[_.n]&65535)).slice(-4)),_.n=="CodePage")switch(g[_.n]){case 0:g[_.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:oc(o=g[_.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+g[_.n])}}else if(s[a][0]===1){if(o=g.CodePage=_v(t,o3),oc(o),l!==-1){var w=t.l;t.l=s[l][1],c=fT(t,o),t.l=w}}else if(s[a][0]===0){if(o===0){l=a,t.l=s[a+1][1];continue}c=fT(t,o)}else{var b=c[s[a][0]],k;switch(t[t.l]){case 65:t.l+=4,k=VR(t);break;case 30:t.l+=4,k=L_(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,k=L_(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,k=t.read_shift(4,"i");break;case 19:t.l+=4,k=t.read_shift(4);break;case 5:t.l+=4,k=t.read_shift(8,"f");break;case 11:t.l+=4,k=fs(t,4);break;case 64:t.l+=4,k=yi(c3(t));break;default:throw new Error("unparsed value: "+t[t.l])}g[b]=k}}return t.l=r+n,g}var UR=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function RJ(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function pT(t,e,r){var n=mt(8),i=[],s=[],a=8,o=0,l=mt(8),c=mt(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),i.push(c),a+=8+l.length,!e){c=mt(8),c.write_shift(4,0),i.unshift(c);var f=[mt(4)];for(f[0].write_shift(4,t.length),o=0;o<t.length;++o){var p=t[o][0];for(l=mt(8+2*(p.length+1)+(p.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,p.length+1),l.write_shift(0,p,"dbcs");l.l!=l.length;)l.write_shift(1,0);f.push(l)}l=sa(f),s.unshift(l),a+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(UR.indexOf(t[o][0])>-1||FR.indexOf(t[o][0])>-1)&&t[o][1]!=null){var g=t[o][1],m=0;if(e){m=+e[t[o][0]];var _=r[m];if(_.p=="version"&&typeof g=="string"){var w=g.split(".");g=(+w[0]<<16)+(+w[1]||0)}l=hT(_.t,g)}else{var b=RJ(g);b==-1&&(b=31,g=String(g)),l=hT(b,g)}s.push(l),c=mt(8),c.write_shift(4,e?m:2+o),i.push(c),a+=8+l.length}var k=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,k),k+=s[o].length;return n.write_shift(4,a),n.write_shift(4,s.length),sa([n].concat(i).concat(s))}function mT(t,e,r){var n=t.content;if(!n)return{};Sa(n,0);var i,s,a,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),f=n.read_shift(16);if(f!==yr.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(i=n.read_shift(4),i!==1&&i!==2)throw new Error("Unrecognized #Sets: "+i);if(s=n.read_shift(16),o=n.read_shift(4),i===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);i===2&&(a=n.read_shift(16),l=n.read_shift(4));var p=dT(n,e),g={SystemIdentifier:c};for(var m in p)g[m]=p[m];if(g.FMTID=s,i===1)return g;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var _;try{_=dT(n,null)}catch{}for(m in _)g[m]=_[m];return g.FMTID=[s,a],g}function gT(t,e,r,n,i,s){var a=mt(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,yr.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var l=pT(t,r,n);if(o.push(l),i){var c=pT(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+l.length),o.push(c)}return sa(o)}function Ff(t,e){return t.read_shift(e),null}function FJ(t,e){e||(e=mt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function LJ(t,e,r){for(var n=[],i=t.l+e;t.l<i;)n.push(r(t,i-t.l));if(i!==t.l)throw new Error("Slurp error");return n}function fs(t,e){return t.read_shift(e)===1}function vo(t,e){return e||(e=mt(2)),e.write_shift(2,+!!t),e}function Cs(t){return t.read_shift(2,"u")}function Fl(t,e){return e||(e=mt(2)),e.write_shift(2,t),e}function zR(t,e){return LJ(t,e,Cs)}function DJ(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function $R(t,e,r){return r||(r=mt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function Mg(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var a=n?t.read_shift(n,i):"";return a}function OJ(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,i=r&8,s=1+(r&1),a=0,o,l={};i&&(a=t.read_shift(2)),n&&(o=t.read_shift(4));var c=s==2?"dbcs-cont":"sbcs-cont",f=e===0?"":t.read_shift(e,c);return i&&(t.l+=4*a),n&&(t.l+=o),l.t=f,i||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function jJ(t){var e=t.t||"",r=mt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=mt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var i=[r,n];return sa(i)}function zd(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Bg(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):zd(t,n,r)}function n0(t,e,r){if(r.biff>5)return Bg(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function qR(t,e,r){return r||(r=mt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function MJ(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function BJ(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var i=t.read_shift((n?e-24:e)>>1,"utf16le").replace(wo,"");return n&&(t.l+=24),i}function VJ(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var i=t.read_shift(4);if(i===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=t.read_shift(s>>1,"utf16le").replace(wo,"");return r+a}function UJ(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return BJ(t);case"0303000000000000c000000000000046":return VJ(t);default:throw new Error("Unsupported Moniker "+r)}}function Yx(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(wo,""):"";return r}function xT(t,e){e||(e=mt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function zJ(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var i=t.read_shift(2);t.l+=2;var s,a,o,l,c="",f,p;i&16&&(s=Yx(t,r-t.l)),i&128&&(a=Yx(t,r-t.l)),(i&257)===257&&(o=Yx(t,r-t.l)),(i&257)===1&&(l=UJ(t,r-t.l)),i&8&&(c=Yx(t,r-t.l)),i&32&&(f=t.read_shift(16)),i&64&&(p=c3(t)),t.l=r;var g=a||o||l||"";g&&c&&(g+="#"+c),g||(g="#"+c),i&2&&g.charAt(0)=="/"&&g.charAt(1)!="/"&&(g="file://"+g);var m={Target:g};return f&&(m.guid=f),p&&(m.time=p),s&&(m.Tooltip=s),m}function $J(t){var e=mt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),s=i>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(r=0;r<a.length;++r)e.write_shift(4,a[r]);if(s==28)n=n.slice(1),xT(n,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));var o=i>-1?n.slice(0,i):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),s&8&&xT(i>-1?n.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function HR(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),i=t.read_shift(1);return[e,r,n,i]}function WR(t,e){var r=HR(t);return r[3]=0,r}function lu(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function $d(t,e,r,n){return n||(n=mt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function qJ(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function HJ(t,e,r){return e===0?"":n0(t,e,r)}function WJ(t,e,r){var n=r.biff>8?4:2,i=t.read_shift(n),s=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[i,s,a]}function GR(t){var e=t.read_shift(2),r=a3(t);return[e,r]}function GJ(t,e,r){t.l+=4,e-=4;var n=t.l+e,i=Mg(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,i}function Ey(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);return{s:{c:n,r:e},e:{c:i,r}}}function KR(t,e){return e||(e=mt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function XR(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),i=t.read_shift(1);return{s:{c:n,r:e},e:{c:i,r}}}var KJ=XR;function YR(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function XJ(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function YJ(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Ga(t){t.l+=2,t.l+=t.read_shift(2)}var QJ={0:Ga,4:Ga,5:Ga,6:Ga,7:YJ,8:Ga,9:Ga,10:Ga,11:Ga,12:Ga,13:XJ,14:Ga,15:Ga,16:Ga,17:Ga,18:Ga,19:Ga,20:Ga,21:YR};function JJ(t,e){for(var r=t.l+e,n=[];t.l<r;){var i=t.read_shift(2);t.l-=2;try{n.push(QJ[i](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function Qx(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function u3(t,e,r){var n=1536,i=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=mt(i);return s.write_shift(2,n),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function ZJ(t,e){return e===0||t.read_shift(2),1200}function eZ(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,i=n0(t,0,r);return t.read_shift(e+n-t.l),i}function tZ(t,e){var r=!e||e.biff==8,n=mt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function rZ(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function nZ(t,e,r){var n=t.read_shift(4),i=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var a=Mg(t,0,r);return a.length===0&&(a="Sheet1"),{pos:n,hs:i,dt:s,name:a}}function iZ(t,e){var r=!e||e.biff>=8?2:1,n=mt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function sZ(t,e){for(var r=t.l+e,n=t.read_shift(4),i=t.read_shift(4),s=[],a=0;a!=i&&t.l<r;++a)s.push(OJ(t));return s.Count=n,s.Unique=i,s}function aZ(t,e){var r=mt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],i=0;i<t.length;++i)n[i]=jJ(t[i]);var s=sa([r].concat(n));return s.parts=[r.length].concat(n.map(function(a){return a.length})),s}function oZ(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function lZ(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function cZ(t){var e=qJ(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function uZ(t){return t.read_shift(2),t.read_shift(4)}function vT(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var i=t.read_shift(2);r&&r.biff==2&&(n=1-(i>>15),i&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,i]}function fZ(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2);return{Pos:[e,r],Dim:[n,i],Flags:s,CurTab:a,FirstTab:o,Selected:l,TabRatio:c}}function hZ(){var t=mt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function dZ(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function pZ(t){var e=mt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function mZ(){}function gZ(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Mg(t,0,r),n}function xZ(t,e){var r=t.name||"Arial",n=e&&e.biff==5,i=n?15+r.length:16+2*r.length,s=mt(i);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function vZ(t){var e=lu(t);return e.isst=t.read_shift(4),e}function yZ(t,e,r,n){var i=mt(10);return $d(t,e,n,i),i.write_shift(4,r),i}function wZ(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,i=lu(t);r.biff==2&&t.l++;var s=Bg(t,n-t.l,r);return i.val=s,i}function _Z(t,e,r,n,i){var s=!i||i.biff==8,a=mt(8+ +s+(1+s)*r.length);return $d(t,e,n,a),a.write_shift(2,r.length),s&&a.write_shift(1,1),a.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),a}function bZ(t,e,r){var n=t.read_shift(2),i=n0(t,0,r);return[n,i]}function EZ(t,e,r,n){var i=r&&r.biff==5;n||(n=mt(i?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(i?1:2,e.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var SZ=n0;function yT(t,e,r){var n=t.l+e,i=r.biff==8||!r.biff?4:2,s=t.read_shift(i),a=t.read_shift(i),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:s,c:o},e:{r:a,c:l}}}function kZ(t,e){var r=e.biff==8||!e.biff?4:2,n=mt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function TZ(t){var e=t.read_shift(2),r=t.read_shift(2),n=GR(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function AZ(t,e){for(var r=t.l+e-2,n=t.read_shift(2),i=t.read_shift(2),s=[];t.l<r;)s.push(GR(t));if(t.l!==r)throw new Error("MulRK read error");var a=t.read_shift(2);if(s.length!=a-i+1)throw new Error("MulRK length mismatch");return{r:n,c:i,C:a,rkrec:s}}function NZ(t,e){for(var r=t.l+e-2,n=t.read_shift(2),i=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var a=t.read_shift(2);if(s.length!=a-i+1)throw new Error("MulBlank length mismatch");return{r:n,c:i,C:a,ixfe:s}}function CZ(t,e,r,n){var i={},s=t.read_shift(4),a=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return i.patternType=cJ[o>>26],n.cellStyles&&(i.alc=s&7,i.fWrap=s>>3&1,i.alcV=s>>4&7,i.fJustLast=s>>7&1,i.trot=s>>8&255,i.cIndent=s>>16&15,i.fShrinkToFit=s>>20&1,i.iReadOrder=s>>22&2,i.fAtrNum=s>>26&1,i.fAtrFnt=s>>27&1,i.fAtrAlc=s>>28&1,i.fAtrBdr=s>>29&1,i.fAtrPat=s>>30&1,i.fAtrProt=s>>31&1,i.dgLeft=a&15,i.dgRight=a>>4&15,i.dgTop=a>>8&15,i.dgBottom=a>>12&15,i.icvLeft=a>>16&127,i.icvRight=a>>23&127,i.grbitDiag=a>>30&3,i.icvTop=o&127,i.icvBottom=o>>7&127,i.icvDiag=o>>14&127,i.dgDiag=o>>21&15,i.icvFore=l&127,i.icvBack=l>>7&127,i.fsxButton=l>>14&1),i}function IZ(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=CZ(t,e,n.fStyle,r),n}function wT(t,e,r,n){var i=r&&r.biff==5;n||(n=mt(i?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&i&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function PZ(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function RZ(t){var e=mt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function _T(t,e,r){var n=lu(t);(r.biff==2||e==9)&&++t.l;var i=DJ(t);return n.val=i,n.t=i===!0||i===!1?"b":"e",n}function FZ(t,e,r,n,i,s){var a=mt(8);return $d(t,e,n,a),$R(r,s,a),a}function LZ(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=lu(t),i=io(t);return n.val=i,n}function DZ(t,e,r,n){var i=mt(14);return $d(t,e,n,i),Ud(r,i),i}var bT=HJ;function OZ(t,e,r){var n=t.l+e,i=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,i];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var a=zd(t,s),o=[];n>t.l;)o.push(Bg(t));return[s,i,a,o]}function ET(t,e,r){var n=t.read_shift(2),i,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(i=GJ(t,e-2,r)),s.body=i||t.read_shift(e-2),typeof i=="string"&&(s.Name=i),s}var jZ=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function ST(t,e,r){var n=t.l+e,i=t.read_shift(2),s=t.read_shift(1),a=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var c=zd(t,a,r);i&32&&(c=jZ[c.charCodeAt(0)]);var f=n-t.l;r&&r.biff==2&&--f;var p=n==t.l||o===0||!(f>0)?[]:Jne(t,f,r,o);return{chKey:s,Name:c,itab:l,rgce:p}}function QR(t,e,r){if(r.biff<8)return MZ(t,e,r);for(var n=[],i=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(WJ(t,r.biff>8?12:6,r));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return n}function MZ(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Mg(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function BZ(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),i=t.read_shift(2),s=zd(t,n,r),a=zd(t,i,r);return[s,a]}function VZ(t,e,r){var n=XR(t);t.l++;var i=t.read_shift(1);return e-=8,[Zne(t,e,r),i,n]}function kT(t,e,r){var n=KJ(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,Yne(t,e,r)]}function UZ(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function zZ(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),o=n0(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:i},o,a,s]}}function $Z(t,e,r){return zZ(t,e,r)}function qZ(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(Ey(t));return r}function HZ(t){var e=mt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)KR(t[r],e);return e}function WZ(t,e,r){if(r&&r.biff<8)return KZ(t,e,r);var n=YR(t),i=JJ(t,e-22,n[1]);return{cmo:n,ft:i}}var GZ={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var i=t.read_shift(1);return t.l+=i,t.l=r,{fmt:n}}};function KZ(t,e,r){t.l+=4;var n=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var a=[];return a.push((GZ[n]||lo)(t,e,r)),{cmo:[i,n,s],ft:a}}function XZ(t,e,r){var n=t.l,i="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:a=MJ(t,6,r);var o=t.read_shift(2);t.read_shift(2),Cs(t,2);var l=t.read_shift(2);t.l+=l;for(var c=1;c<t.lens.length-1;++c){if(t.l-n!=t.lens[c])throw new Error("TxO: bad continue record");var f=t[t.l],p=zd(t,t.lens[c+1]-t.lens[c]-1);if(i+=p,i.length>=(f?o:2*o))break}if(i.length!==o&&i.length!==o*2)throw new Error("cchText: "+o+" != "+i.length);return t.l=n+e,{t:i}}catch{return t.l=n+e,{t:i}}}function YZ(t,e){var r=Ey(t);t.l+=16;var n=zJ(t,e-24);return[r,n]}function QZ(t){var e=mt(24),r=Ui(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(n[i],16));return sa([e,$J(t[1])])}function JZ(t,e){t.read_shift(2);var r=Ey(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(wo,""),[r,n]}function ZZ(t){var e=t[1].Tooltip,r=mt(10+2*(e.length+1));r.write_shift(2,2048);var n=Ui(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var i=0;i<e.length;++i)r.write_shift(2,e.charCodeAt(i));return r.write_shift(2,0),r}function eee(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=cT[r]||r,r=t.read_shift(2),e[1]=cT[r]||r,e}function tee(t){return t||(t=mt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function ree(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(WR(t));return r}function nee(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(WR(t));return r}function iee(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function JR(t,e,r){if(!r.cellStyles)return lo(t,e);var n=r&&r.biff>=12?4:2,i=t.read_shift(n),s=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var c={s:i,e:s,w:a,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function see(t,e){var r=mt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function aee(t,e){var r={};return e<32||(t.l+=16,r.header=io(t),r.footer=io(t),t.l+=2),r}function oee(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var i=t.read_shift(1);return t.l+=3,i&16&&(n.area=!0),n}function lee(t){for(var e=mt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var cee=lu,uee=zR,fee=Bg;function hee(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,i}function dee(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=lu(t);++t.l;var i=n0(t,e-7,r);return n.t="str",n.val=i,n}function pee(t){var e=lu(t);++t.l;var r=io(t);return e.t="n",e.val=r,e}function mee(t,e,r){var n=mt(15);return $g(n,t,e),n.write_shift(8,r,"f"),n}function gee(t){var e=lu(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function xee(t,e,r){var n=mt(9);return $g(n,t,e),n.write_shift(2,r),n}function vee(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function yee(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function wee(t,e,r){var n=t.l+e,i=lu(t),s=t.read_shift(2),a=zd(t,s,r);return t.l=n,i.t="str",i.val=a,i}var _ee=[2,3,48,49,131,139,140,245],D_=(function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=wy({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],f=gh(1);switch(l.type){case"base64":f=nl(ul(o));break;case"binary":f=nl(o);break;case"buffer":case"array":f=o;break}Sa(f,0);var p=f.read_shift(1),g=!!(p&136),m=!1,_=!1;switch(p){case 2:break;case 3:break;case 48:m=!0,g=!0;break;case 49:m=!0,g=!0;break;case 131:break;case 139:break;case 140:_=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+p.toString(16))}var w=0,b=521;p==2&&(w=f.read_shift(2)),f.l+=3,p!=2&&(w=f.read_shift(4)),w>1048576&&(w=1e6),p!=2&&(b=f.read_shift(2));var k=f.read_shift(2),R=l.codepage||1252;p!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(R=t[f[f.l]]),f.l+=1,f.l+=2),_&&(f.l+=36);for(var C=[],j={},X=Math.min(f.length,p==2?521:b-10-(m?264:0)),K=_?32:11;f.l<X&&f[f.l]!=13;)switch(j={},j.name=K1.utils.decode(R,f.slice(f.l,f.l+K)).replace(/[\u0000\r\n].*$/g,""),f.l+=K,j.type=String.fromCharCode(f.read_shift(1)),p!=2&&!_&&(j.offset=f.read_shift(4)),j.len=f.read_shift(1),p==2&&(j.offset=f.read_shift(2)),j.dec=f.read_shift(1),j.name.length&&C.push(j),p!=2&&(f.l+=_?13:14),j.type){case"B":(!m||j.len!=8)&&l.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+j.type)}if(f[f.l]!==13&&(f.l=b-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=b;var P=0,A=0;for(c[0]=[],A=0;A!=C.length;++A)c[0][A]=C[A].name;for(;w-- >0;){if(f[f.l]===42){f.l+=k;continue}for(++f.l,c[++P]=[],A=0,A=0;A!=C.length;++A){var T=f.slice(f.l,f.l+C[A].len);f.l+=C[A].len,Sa(T,0);var O=K1.utils.decode(R,T);switch(C[A].type){case"C":O.trim().length&&(c[P][A]=O.replace(/\s+$/,""));break;case"D":O.length===8?c[P][A]=new Date(+O.slice(0,4),+O.slice(4,6)-1,+O.slice(6,8)):c[P][A]=O;break;case"F":c[P][A]=parseFloat(O.trim());break;case"+":case"I":c[P][A]=_?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(O.trim().toUpperCase()){case"Y":case"T":c[P][A]=!0;break;case"N":case"F":c[P][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+O+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+p.toString(16));c[P][A]="##MEMO##"+(_?parseInt(O.trim(),10):T.read_shift(4));break;case"N":O=O.replace(/\u0000/g,"").trim(),O&&O!="."&&(c[P][A]=+O||0);break;case"@":c[P][A]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":c[P][A]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":c[P][A]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[P][A]=-T.read_shift(-8,"f");break;case"B":if(m&&C[A].len==8){c[P][A]=T.read_shift(8,"f");break}case"G":case"P":T.l+=C[A].len;break;case"0":if(C[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+C[A].type)}}}if(p!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=C,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var f=lm(r(o,c),c);return f["!cols"]=c.DBF.map(function(p){return{wch:p.len,DBF:p}}),delete c.DBF,f}function i(o,l){try{return Rh(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var c=l||{};if(+c.codepage>=0&&oc(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var f=Oo(),p=Sv(o,{header:1,raw:!0,cellDates:!0}),g=p[0],m=p.slice(1),_=o["!cols"]||[],w=0,b=0,k=0,R=1;for(w=0;w<g.length;++w){if(((_[w]||{}).DBF||{}).name){g[w]=_[w].DBF.name,++k;continue}if(g[w]!=null){if(++k,typeof g[w]=="number"&&(g[w]=g[w].toString(10)),typeof g[w]!="string")throw new Error("DBF Invalid column name "+g[w]+" |"+typeof g[w]+"|");if(g.indexOf(g[w])!==w){for(b=0;b<1024;++b)if(g.indexOf(g[w]+"_"+b)==-1){g[w]+="_"+b;break}}}}var C=_n(o["!ref"]),j=[],X=[],K=[];for(w=0;w<=C.e.c-C.s.c;++w){var P="",A="",T=0,O=[];for(b=0;b<m.length;++b)m[b][w]!=null&&O.push(m[b][w]);if(O.length==0||g[w]==null){j[w]="?";continue}for(b=0;b<O.length;++b){switch(typeof O[b]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=O[b]instanceof Date?"D":"C";break;default:A="C"}T=Math.max(T,String(O[b]).length),P=P&&P!=A?"C":A}T>250&&(T=250),A=((_[w]||{}).DBF||{}).type,A=="C"&&_[w].DBF.len>T&&(T=_[w].DBF.len),P=="B"&&A=="N"&&(P="N",K[w]=_[w].DBF.dec,T=_[w].DBF.len),X[w]=P=="C"||A=="N"?T:s[P]||0,R+=X[w],j[w]=P}var I=f.next(32);for(I.write_shift(4,318902576),I.write_shift(4,m.length),I.write_shift(2,296+32*k),I.write_shift(2,R),w=0;w<4;++w)I.write_shift(4,0);for(I.write_shift(4,0|(+e[UP]||3)<<8),w=0,b=0;w<g.length;++w)if(g[w]!=null){var D=f.next(32),B=(g[w].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);D.write_shift(1,B,"sbcs"),D.write_shift(1,j[w]=="?"?"C":j[w],"sbcs"),D.write_shift(4,b),D.write_shift(1,X[w]||s[j[w]]||0),D.write_shift(1,K[w]||0),D.write_shift(1,2),D.write_shift(4,0),D.write_shift(1,0),D.write_shift(4,0),D.write_shift(4,0),b+=X[w]||s[j[w]]||0}var re=f.next(264);for(re.write_shift(4,13),w=0;w<65;++w)re.write_shift(4,0);for(w=0;w<m.length;++w){var _e=f.next(R);for(_e.write_shift(1,0),b=0;b<g.length;++b)if(g[b]!=null)switch(j[b]){case"L":_e.write_shift(1,m[w][b]==null?63:m[w][b]?84:70);break;case"B":_e.write_shift(8,m[w][b]||0,"f");break;case"N":var Ce="0";for(typeof m[w][b]=="number"&&(Ce=m[w][b].toFixed(K[b]||0)),k=0;k<X[b]-Ce.length;++k)_e.write_shift(1,32);_e.write_shift(1,Ce,"sbcs");break;case"D":m[w][b]?(_e.write_shift(4,("0000"+m[w][b].getFullYear()).slice(-4),"sbcs"),_e.write_shift(2,("00"+(m[w][b].getMonth()+1)).slice(-2),"sbcs"),_e.write_shift(2,("00"+m[w][b].getDate()).slice(-2),"sbcs")):_e.write_shift(8,"00000000","sbcs");break;case"C":var we=String(m[w][b]!=null?m[w][b]:"").slice(0,X[b]);for(_e.write_shift(1,we,"sbcs"),k=0;k<X[b]-we.length;++k)_e.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:i,to_sheet:n,from_sheet:a}})(),ZR=(function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+ts(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(g,m){var _=t[m];return typeof _=="number"?Ok(_):_},n=function(g,m,_){var w=m.charCodeAt(0)-32<<4|_.charCodeAt(0)-48;return w==59?g:Ok(w)};t["|"]=254;function i(g,m){switch(m.type){case"base64":return s(ul(g),m);case"binary":return s(g,m);case"buffer":return s(Xr&&Buffer.isBuffer(g)?g.toString("binary"):Ph(g),m);case"array":return s(Vd(g),m)}throw new Error("Unrecognized type "+m.type)}function s(g,m){var _=g.split(/[\n\r]+/),w=-1,b=-1,k=0,R=0,C=[],j=[],X=null,K={},P=[],A=[],T=[],O=0,I;for(+m.codepage>=0&&oc(+m.codepage);k!==_.length;++k){O=0;var D=_[k].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),B=D.replace(/;;/g,"\0").split(";").map(function(Y){return Y.replace(/\u0000/g,";")}),re=B[0],_e;if(D.length>0)switch(re){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":B[1].charAt(0)=="P"&&j.push(D.slice(3).replace(/;;/g,";"));break;case"C":var Ce=!1,we=!1,ce=!1,H=!1,te=-1,J=-1;for(R=1;R<B.length;++R)switch(B[R].charAt(0)){case"A":break;case"X":b=parseInt(B[R].slice(1))-1,we=!0;break;case"Y":for(w=parseInt(B[R].slice(1))-1,we||(b=0),I=C.length;I<=w;++I)C[I]=[];break;case"K":_e=B[R].slice(1),_e.charAt(0)==='"'?_e=_e.slice(1,_e.length-1):_e==="TRUE"?_e=!0:_e==="FALSE"?_e=!1:isNaN(uc(_e))?isNaN(Op(_e).getDate())||(_e=yi(_e)):(_e=uc(_e),X!==null&&am(X)&&(_e=by(_e))),Ce=!0;break;case"E":H=!0;var N=up(B[R].slice(1),{r:w,c:b});C[w][b]=[C[w][b],N];break;case"S":ce=!0,C[w][b]=[C[w][b],"S5S"];break;case"G":break;case"R":te=parseInt(B[R].slice(1))-1;break;case"C":J=parseInt(B[R].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+D)}if(Ce&&(C[w][b]&&C[w][b].length==2?C[w][b][0]=_e:C[w][b]=_e,X=null),ce){if(H)throw new Error("SYLK shared formula cannot have own formula");var U=te>-1&&C[te][J];if(!U||!U[1])throw new Error("SYLK shared formula cannot find base");C[w][b][1]=x9(U[1],{r:w-te,c:b-J})}break;case"F":var W=0;for(R=1;R<B.length;++R)switch(B[R].charAt(0)){case"X":b=parseInt(B[R].slice(1))-1,++W;break;case"Y":for(w=parseInt(B[R].slice(1))-1,I=C.length;I<=w;++I)C[I]=[];break;case"M":O=parseInt(B[R].slice(1))/20;break;case"F":break;case"G":break;case"P":X=j[parseInt(B[R].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=B[R].slice(1).split(" "),I=parseInt(T[0],10);I<=parseInt(T[1],10);++I)O=parseInt(T[2],10),A[I-1]=O===0?{hidden:!0}:{wch:O},xh(A[I-1]);break;case"C":b=parseInt(B[R].slice(1))-1,A[b]||(A[b]={});break;case"R":w=parseInt(B[R].slice(1))-1,P[w]||(P[w]={}),O>0?(P[w].hpt=O,P[w].hpx=Mp(O)):O===0&&(P[w].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+D)}W<1&&(X=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+D)}}return P.length>0&&(K["!rows"]=P),A.length>0&&(K["!cols"]=A),m&&m.sheetRows&&(C=C.slice(0,m.sheetRows)),[C,K]}function a(g,m){var _=i(g,m),w=_[0],b=_[1],k=lm(w,m);return ts(b).forEach(function(R){k[R]=b[R]}),k}function o(g,m){return Rh(a(g,m),m)}function l(g,m,_,w){var b="C;Y"+(_+1)+";X"+(w+1)+";K";switch(g.t){case"n":b+=g.v||0,g.f&&!g.F&&(b+=";E"+g3(g.f,{r:_,c:w}));break;case"b":b+=g.v?"TRUE":"FALSE";break;case"e":b+=g.w||g.v;break;case"d":b+='"'+(g.w||g.v)+'"';break;case"s":b+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function c(g,m){m.forEach(function(_,w){var b="F;W"+(w+1)+" "+(w+1)+" ";_.hidden?b+="0":(typeof _.width=="number"&&!_.wpx&&(_.wpx=rg(_.width)),typeof _.wpx=="number"&&!_.wch&&(_.wch=ng(_.wpx)),typeof _.wch=="number"&&(b+=Math.round(_.wch))),b.charAt(b.length-1)!=" "&&g.push(b)})}function f(g,m){m.forEach(function(_,w){var b="F;";_.hidden?b+="M0;":_.hpt?b+="M"+20*_.hpt+";":_.hpx&&(b+="M"+20*ig(_.hpx)+";"),b.length>2&&g.push(b+"R"+(w+1))})}function p(g,m){var _=["ID;PWXL;N;E"],w=[],b=_n(g["!ref"]),k,R=Array.isArray(g),C=`\r
`;_.push("P;PGeneral"),_.push("F;P0;DG0G8;M255"),g["!cols"]&&c(_,g["!cols"]),g["!rows"]&&f(_,g["!rows"]),_.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var j=b.s.r;j<=b.e.r;++j)for(var X=b.s.c;X<=b.e.c;++X){var K=Cr({r:j,c:X});k=R?(g[j]||[])[X]:g[K],!(!k||k.v==null&&(!k.f||k.F))&&w.push(l(k,g,j,X))}return _.join(C)+C+w.join(C)+C+"E"+C}return{to_workbook:o,to_sheet:a,from_sheet:p}})(),e9=(function(){function t(s,a){switch(a.type){case"base64":return e(ul(s),a);case"binary":return e(s,a);case"buffer":return e(Xr&&Buffer.isBuffer(s)?s.toString("binary"):Ph(s),a);case"array":return e(Vd(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),l=-1,c=-1,f=0,p=[];f!==o.length;++f){if(o[f].trim()==="BOT"){p[++l]=[],c=0;continue}if(!(l<0)){var g=o[f].trim().split(","),m=g[0],_=g[1];++f;for(var w=o[f]||"";(w.match(/["]/g)||[]).length&1&&f<o.length-1;)w+=`
`+o[++f];switch(w=w.trim(),+m){case-1:if(w==="BOT"){p[++l]=[],c=0;continue}else if(w!=="EOD")throw new Error("Unrecognized DIF special command "+w);break;case 0:w==="TRUE"?p[l][c]=!0:w==="FALSE"?p[l][c]=!1:isNaN(uc(_))?isNaN(Op(_).getDate())?p[l][c]=_:p[l][c]=yi(_):p[l][c]=uc(_),++c;break;case 1:w=w.slice(1,w.length-1),w=w.replace(/""/g,'"'),w&&w.match(/^=".*"$/)&&(w=w.slice(2,-1)),p[l][c++]=w!==""?w:null;break}if(w==="EOD")break}}return a&&a.sheetRows&&(p=p.slice(0,a.sheetRows)),p}function r(s,a){return lm(t(s,a),a)}function n(s,a){return Rh(r(s,a),a)}var i=(function(){var s=function(l,c,f,p,g){l.push(c),l.push(f+","+p),l.push('"'+g.replace(/"/g,'""')+'"')},a=function(l,c,f,p){l.push(c+","+f),l.push(c==1?'"'+p.replace(/"/g,'""')+'"':p)};return function(l){var c=[],f=_n(l["!ref"]),p,g=Array.isArray(l);s(c,"TABLE",0,1,"sheetjs"),s(c,"VECTORS",0,f.e.r-f.s.r+1,""),s(c,"TUPLES",0,f.e.c-f.s.c+1,""),s(c,"DATA",0,0,"");for(var m=f.s.r;m<=f.e.r;++m){a(c,-1,0,"BOT");for(var _=f.s.c;_<=f.e.c;++_){var w=Cr({r:m,c:_});if(p=g?(l[m]||[])[_]:l[w],!p){a(c,1,0,"");continue}switch(p.t){case"n":var b=p.w;!b&&p.v!=null&&(b=p.v),b==null?p.f&&!p.F?a(c,1,0,"="+p.f):a(c,1,0,""):a(c,0,b,"V");break;case"b":a(c,0,p.v?1:0,p.v?"TRUE":"FALSE");break;case"s":a(c,1,0,isNaN(p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=Ol(p.z||Tr[14],qs(yi(p.v)))),a(c,0,p.w,"V");break;default:a(c,1,0,"")}}}a(c,-1,0,"EOD");var k=`\r
`,R=c.join(k);return R}})();return{to_workbook:n,to_sheet:r,from_sheet:i}})(),t9=(function(){function t(p){return p.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(p){return p.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(p,g){for(var m=p.split(`
`),_=-1,w=-1,b=0,k=[];b!==m.length;++b){var R=m[b].trim().split(":");if(R[0]==="cell"){var C=Ui(R[1]);if(k.length<=C.r)for(_=k.length;_<=C.r;++_)k[_]||(k[_]=[]);switch(_=C.r,w=C.c,R[2]){case"t":k[_][w]=t(R[3]);break;case"v":k[_][w]=+R[3];break;case"vtf":var j=R[R.length-1];case"vtc":switch(R[3]){case"nl":k[_][w]=!!+R[4];break;default:k[_][w]=+R[4];break}R[2]=="vtf"&&(k[_][w]=[k[_][w],j])}}}return g&&g.sheetRows&&(k=k.slice(0,g.sheetRows)),k}function n(p,g){return lm(r(p,g),g)}function i(p,g){return Rh(n(p,g),g)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(p){if(!p||!p["!ref"])return"";for(var g=[],m=[],_,w="",b=jo(p["!ref"]),k=Array.isArray(p),R=b.s.r;R<=b.e.r;++R)for(var C=b.s.c;C<=b.e.c;++C)if(w=Cr({r:R,c:C}),_=k?(p[R]||[])[C]:p[w],!(!_||_.v==null||_.t==="z")){switch(m=["cell",w,"t"],_.t){case"s":case"str":m.push(e(_.v));break;case"n":_.f?(m[2]="vtf",m[3]="n",m[4]=_.v,m[5]=e(_.f)):(m[2]="v",m[3]=_.v);break;case"b":m[2]="vt"+(_.f?"f":"c"),m[3]="nl",m[4]=_.v?"1":"0",m[5]=e(_.f||(_.v?"TRUE":"FALSE"));break;case"d":var j=qs(yi(_.v));m[2]="vtc",m[3]="nd",m[4]=""+j,m[5]=_.w||Ol(_.z||Tr[14],j);break;case"e":continue}g.push(m.join(":"))}return g.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function f(p){return[s,a,o,a,c(p),l].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:f}})(),jp=(function(){function t(f,p,g,m,_){_.raw?p[g][m]=f:f===""||(f==="TRUE"?p[g][m]=!0:f==="FALSE"?p[g][m]=!1:isNaN(uc(f))?isNaN(Op(f).getDate())?p[g][m]=f:p[g][m]=yi(f):p[g][m]=uc(f))}function e(f,p){var g=p||{},m=[];if(!f||f.length===0)return m;for(var _=f.split(/[\r\n]/),w=_.length-1;w>=0&&_[w].length===0;)--w;for(var b=10,k=0,R=0;R<=w;++R)k=_[R].indexOf(" "),k==-1?k=_[R].length:k++,b=Math.max(b,k);for(R=0;R<=w;++R){m[R]=[];var C=0;for(t(_[R].slice(0,b).trim(),m,R,C,g),C=1;C<=(_[R].length-b)/10+1;++C)t(_[R].slice(b+(C-1)*10,b+C*10).trim(),m,R,C,g)}return g.sheetRows&&(m=m.slice(0,g.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(f){for(var p={},g=!1,m=0,_=0;m<f.length;++m)(_=f.charCodeAt(m))==34?g=!g:!g&&_ in r&&(p[_]=(p[_]||0)+1);_=[];for(m in p)Object.prototype.hasOwnProperty.call(p,m)&&_.push([p[m],m]);if(!_.length){p=n;for(m in p)Object.prototype.hasOwnProperty.call(p,m)&&_.push([p[m],m])}return _.sort(function(w,b){return w[0]-b[0]||n[w[1]]-n[b[1]]}),r[_.pop()[1]]||44}function s(f,p){var g=p||{},m="",_=g.dense?[]:{},w={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(m=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(m=f.charAt(4),f=f.slice(6)):m=i(f.slice(0,1024)):g&&g.FS?m=g.FS:m=i(f.slice(0,1024));var b=0,k=0,R=0,C=0,j=0,X=m.charCodeAt(0),K=!1,P=0,A=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var T=g.dateNF!=null?oQ(g.dateNF):null;function O(){var I=f.slice(C,j),D={};if(I.charAt(0)=='"'&&I.charAt(I.length-1)=='"'&&(I=I.slice(1,-1).replace(/""/g,'"')),I.length===0)D.t="z";else if(g.raw)D.t="s",D.v=I;else if(I.trim().length===0)D.t="s",D.v=I;else if(I.charCodeAt(0)==61)I.charCodeAt(1)==34&&I.charCodeAt(I.length-1)==34?(D.t="s",D.v=I.slice(2,-1).replace(/""/g,'"')):Ore(I)?(D.t="n",D.f=I.slice(1)):(D.t="s",D.v=I);else if(I=="TRUE")D.t="b",D.v=!0;else if(I=="FALSE")D.t="b",D.v=!1;else if(!isNaN(R=uc(I)))D.t="n",g.cellText!==!1&&(D.w=I),D.v=R;else if(!isNaN(Op(I).getDate())||T&&I.match(T)){D.z=g.dateNF||Tr[14];var B=0;T&&I.match(T)&&(I=lQ(I,g.dateNF,I.match(T)||[]),B=1),g.cellDates?(D.t="d",D.v=yi(I,B)):(D.t="n",D.v=qs(yi(I,B))),g.cellText!==!1&&(D.w=Ol(D.z,D.v instanceof Date?qs(D.v):D.v)),g.cellNF||delete D.z}else D.t="s",D.v=I;if(D.t=="z"||(g.dense?(_[b]||(_[b]=[]),_[b][k]=D):_[Cr({c:k,r:b})]=D),C=j+1,A=f.charCodeAt(C),w.e.c<k&&(w.e.c=k),w.e.r<b&&(w.e.r=b),P==X)++k;else if(k=0,++b,g.sheetRows&&g.sheetRows<=b)return!0}e:for(;j<f.length;++j)switch(P=f.charCodeAt(j)){case 34:A===34&&(K=!K);break;case X:case 10:case 13:if(!K&&O())break e;break}return j-C>0&&O(),_["!ref"]=Ur(w),_}function a(f,p){return!(p&&p.PRN)||p.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?s(f,p):lm(e(f,p),p)}function o(f,p){var g="",m=p.type=="string"?[0,0,0,0]:S3(f,p);switch(p.type){case"base64":g=ul(f);break;case"binary":g=f;break;case"buffer":p.codepage==65001?g=f.toString("utf8"):p.codepage&&typeof K1<"u"||(g=Xr&&Buffer.isBuffer(f)?f.toString("binary"):Ph(f));break;case"array":g=Vd(f);break;case"string":g=f;break;default:throw new Error("Unrecognized type "+p.type)}return m[0]==239&&m[1]==187&&m[2]==191?g=Xn(g.slice(3)):p.type!="string"&&p.type!="buffer"&&p.codepage==65001?g=Xn(g):p.type=="binary"&&typeof K1<"u",g.slice(0,19)=="socialcalc:version:"?t9.to_sheet(p.type=="string"?g:Xn(g),p):a(g,p)}function l(f,p){return Rh(o(f,p),p)}function c(f){for(var p=[],g=_n(f["!ref"]),m,_=Array.isArray(f),w=g.s.r;w<=g.e.r;++w){for(var b=[],k=g.s.c;k<=g.e.c;++k){var R=Cr({r:w,c:k});if(m=_?(f[w]||[])[k]:f[R],!m||m.v==null){b.push("          ");continue}for(var C=(m.w||(Hu(m),m.w)||"").slice(0,10);C.length<10;)C+=" ";b.push(C+(k===0?" ":""))}p.push(b.join(""))}return p.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}})();function bee(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var i=ZR.to_workbook(t,r);return r.WTF=n,i}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return jp.to_workbook(t,e)}}var wd=(function(){function t(N,U,W){if(N){Sa(N,N.l||0);for(var Y=W.Enum||te;N.l<N.length;){var ae=N.read_shift(2),pe=Y[ae]||Y[65535],he=N.read_shift(2),xe=N.l+he,ke=pe.f&&pe.f(N,he,W);if(N.l=xe,U(ke,pe,ae))return}}}function e(N,U){switch(U.type){case"base64":return r(nl(ul(N)),U);case"binary":return r(nl(N),U);case"buffer":case"array":return r(N,U)}throw"Unsupported type "+U.type}function r(N,U){if(!N)return N;var W=U||{},Y=W.dense?[]:{},ae="Sheet1",pe="",he=0,xe={},ke=[],Fe=[],oe={s:{r:0,c:0},e:{r:0,c:0}},Ze=W.sheetRows||0;if(N[2]==0&&(N[3]==8||N[3]==9)&&N.length>=16&&N[14]==5&&N[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(N[2]==2)W.Enum=te,t(N,function(rt,lt,le){switch(le){case 0:W.vers=rt,rt>=4096&&(W.qpro=!0);break;case 6:oe=rt;break;case 204:rt&&(pe=rt);break;case 222:pe=rt;break;case 15:case 51:W.qpro||(rt[1].v=rt[1].v.slice(1));case 13:case 14:case 16:le==14&&(rt[2]&112)==112&&(rt[2]&15)>1&&(rt[2]&15)<15&&(rt[1].z=W.dateNF||Tr[14],W.cellDates&&(rt[1].t="d",rt[1].v=by(rt[1].v))),W.qpro&&rt[3]>he&&(Y["!ref"]=Ur(oe),xe[ae]=Y,ke.push(ae),Y=W.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},he=rt[3],ae=pe||"Sheet"+(he+1),pe="");var je=W.dense?(Y[rt[0].r]||[])[rt[0].c]:Y[Cr(rt[0])];if(je){je.t=rt[1].t,je.v=rt[1].v,rt[1].z!=null&&(je.z=rt[1].z),rt[1].f!=null&&(je.f=rt[1].f);break}W.dense?(Y[rt[0].r]||(Y[rt[0].r]=[]),Y[rt[0].r][rt[0].c]=rt[1]):Y[Cr(rt[0])]=rt[1];break}},W);else if(N[2]==26||N[2]==14)W.Enum=J,N[2]==14&&(W.qpro=!0,N.l=0),t(N,function(rt,lt,le){switch(le){case 204:ae=rt;break;case 22:rt[1].v=rt[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(rt[3]>he&&(Y["!ref"]=Ur(oe),xe[ae]=Y,ke.push(ae),Y=W.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},he=rt[3],ae="Sheet"+(he+1)),Ze>0&&rt[0].r>=Ze)break;W.dense?(Y[rt[0].r]||(Y[rt[0].r]=[]),Y[rt[0].r][rt[0].c]=rt[1]):Y[Cr(rt[0])]=rt[1],oe.e.c<rt[0].c&&(oe.e.c=rt[0].c),oe.e.r<rt[0].r&&(oe.e.r=rt[0].r);break;case 27:rt[14e3]&&(Fe[rt[14e3][0]]=rt[14e3][1]);break;case 1537:Fe[rt[0]]=rt[1],rt[0]==he&&(ae=rt[1]);break}},W);else throw new Error("Unrecognized LOTUS BOF "+N[2]);if(Y["!ref"]=Ur(oe),xe[pe||ae]=Y,ke.push(pe||ae),!Fe.length)return{SheetNames:ke,Sheets:xe};for(var Re={},fe=[],ut=0;ut<Fe.length;++ut)xe[ke[ut]]?(fe.push(Fe[ut]||ke[ut]),Re[Fe[ut]]=xe[Fe[ut]]||xe[ke[ut]]):(fe.push(Fe[ut]),Re[Fe[ut]]={"!ref":"A1"});return{SheetNames:fe,Sheets:Re}}function n(N,U){var W=U||{};if(+W.codepage>=0&&oc(+W.codepage),W.type=="string")throw new Error("Cannot write WK1 to JS string");var Y=Oo(),ae=_n(N["!ref"]),pe=Array.isArray(N),he=[];Ut(Y,0,s(1030)),Ut(Y,6,l(ae));for(var xe=Math.min(ae.e.r,8191),ke=ae.s.r;ke<=xe;++ke)for(var Fe=vs(ke),oe=ae.s.c;oe<=ae.e.c;++oe){ke===ae.s.r&&(he[oe]=Vi(oe));var Ze=he[oe]+Fe,Re=pe?(N[ke]||[])[oe]:N[Ze];if(!(!Re||Re.t=="z"))if(Re.t=="n")(Re.v|0)==Re.v&&Re.v>=-32768&&Re.v<=32767?Ut(Y,13,m(ke,oe,Re.v)):Ut(Y,14,w(ke,oe,Re.v));else{var fe=Hu(Re);Ut(Y,15,p(ke,oe,fe.slice(0,239)))}}return Ut(Y,1),Y.end()}function i(N,U){var W=U||{};if(+W.codepage>=0&&oc(+W.codepage),W.type=="string")throw new Error("Cannot write WK3 to JS string");var Y=Oo();Ut(Y,0,a(N));for(var ae=0,pe=0;ae<N.SheetNames.length;++ae)(N.Sheets[N.SheetNames[ae]]||{})["!ref"]&&Ut(Y,27,H(N.SheetNames[ae],pe++));var he=0;for(ae=0;ae<N.SheetNames.length;++ae){var xe=N.Sheets[N.SheetNames[ae]];if(!(!xe||!xe["!ref"])){for(var ke=_n(xe["!ref"]),Fe=Array.isArray(xe),oe=[],Ze=Math.min(ke.e.r,8191),Re=ke.s.r;Re<=Ze;++Re)for(var fe=vs(Re),ut=ke.s.c;ut<=ke.e.c;++ut){Re===ke.s.r&&(oe[ut]=Vi(ut));var rt=oe[ut]+fe,lt=Fe?(xe[Re]||[])[ut]:xe[rt];if(!(!lt||lt.t=="z"))if(lt.t=="n")Ut(Y,23,O(Re,ut,he,lt.v));else{var le=Hu(lt);Ut(Y,22,P(Re,ut,he,le.slice(0,239)))}}++he}}return Ut(Y,1),Y.end()}function s(N){var U=mt(2);return U.write_shift(2,N),U}function a(N){var U=mt(26);U.write_shift(2,4096),U.write_shift(2,4),U.write_shift(4,0);for(var W=0,Y=0,ae=0,pe=0;pe<N.SheetNames.length;++pe){var he=N.SheetNames[pe],xe=N.Sheets[he];if(!(!xe||!xe["!ref"])){++ae;var ke=jo(xe["!ref"]);W<ke.e.r&&(W=ke.e.r),Y<ke.e.c&&(Y=ke.e.c)}}return W>8191&&(W=8191),U.write_shift(2,W),U.write_shift(1,ae),U.write_shift(1,Y),U.write_shift(2,0),U.write_shift(2,0),U.write_shift(1,1),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(4,0),U}function o(N,U,W){var Y={s:{c:0,r:0},e:{c:0,r:0}};return U==8&&W.qpro?(Y.s.c=N.read_shift(1),N.l++,Y.s.r=N.read_shift(2),Y.e.c=N.read_shift(1),N.l++,Y.e.r=N.read_shift(2),Y):(Y.s.c=N.read_shift(2),Y.s.r=N.read_shift(2),U==12&&W.qpro&&(N.l+=2),Y.e.c=N.read_shift(2),Y.e.r=N.read_shift(2),U==12&&W.qpro&&(N.l+=2),Y.s.c==65535&&(Y.s.c=Y.e.c=Y.s.r=Y.e.r=0),Y)}function l(N){var U=mt(8);return U.write_shift(2,N.s.c),U.write_shift(2,N.s.r),U.write_shift(2,N.e.c),U.write_shift(2,N.e.r),U}function c(N,U,W){var Y=[{c:0,r:0},{t:"n",v:0},0,0];return W.qpro&&W.vers!=20768?(Y[0].c=N.read_shift(1),Y[3]=N.read_shift(1),Y[0].r=N.read_shift(2),N.l+=2):(Y[2]=N.read_shift(1),Y[0].c=N.read_shift(2),Y[0].r=N.read_shift(2)),Y}function f(N,U,W){var Y=N.l+U,ae=c(N,U,W);if(ae[1].t="s",W.vers==20768){N.l++;var pe=N.read_shift(1);return ae[1].v=N.read_shift(pe,"utf8"),ae}return W.qpro&&N.l++,ae[1].v=N.read_shift(Y-N.l,"cstr"),ae}function p(N,U,W){var Y=mt(7+W.length);Y.write_shift(1,255),Y.write_shift(2,U),Y.write_shift(2,N),Y.write_shift(1,39);for(var ae=0;ae<Y.length;++ae){var pe=W.charCodeAt(ae);Y.write_shift(1,pe>=128?95:pe)}return Y.write_shift(1,0),Y}function g(N,U,W){var Y=c(N,U,W);return Y[1].v=N.read_shift(2,"i"),Y}function m(N,U,W){var Y=mt(7);return Y.write_shift(1,255),Y.write_shift(2,U),Y.write_shift(2,N),Y.write_shift(2,W,"i"),Y}function _(N,U,W){var Y=c(N,U,W);return Y[1].v=N.read_shift(8,"f"),Y}function w(N,U,W){var Y=mt(13);return Y.write_shift(1,255),Y.write_shift(2,U),Y.write_shift(2,N),Y.write_shift(8,W,"f"),Y}function b(N,U,W){var Y=N.l+U,ae=c(N,U,W);if(ae[1].v=N.read_shift(8,"f"),W.qpro)N.l=Y;else{var pe=N.read_shift(2);j(N.slice(N.l,N.l+pe),ae),N.l+=pe}return ae}function k(N,U,W){var Y=U&32768;return U&=-32769,U=(Y?N:0)+(U>=8192?U-16384:U),(Y?"":"$")+(W?Vi(U):vs(U))}var R={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},C=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function j(N,U){Sa(N,0);for(var W=[],Y=0,ae="",pe="",he="",xe="";N.l<N.length;){var ke=N[N.l++];switch(ke){case 0:W.push(N.read_shift(8,"f"));break;case 1:pe=k(U[0].c,N.read_shift(2),!0),ae=k(U[0].r,N.read_shift(2),!1),W.push(pe+ae);break;case 2:{var Fe=k(U[0].c,N.read_shift(2),!0),oe=k(U[0].r,N.read_shift(2),!1);pe=k(U[0].c,N.read_shift(2),!0),ae=k(U[0].r,N.read_shift(2),!1),W.push(Fe+oe+":"+pe+ae)}break;case 3:if(N.l<N.length){console.error("WK1 premature formula end");return}break;case 4:W.push("("+W.pop()+")");break;case 5:W.push(N.read_shift(2));break;case 6:{for(var Ze="";ke=N[N.l++];)Ze+=String.fromCharCode(ke);W.push('"'+Ze.replace(/"/g,'""')+'"')}break;case 8:W.push("-"+W.pop());break;case 23:W.push("+"+W.pop());break;case 22:W.push("NOT("+W.pop()+")");break;case 20:case 21:xe=W.pop(),he=W.pop(),W.push(["AND","OR"][ke-20]+"("+he+","+xe+")");break;default:if(ke<32&&C[ke])xe=W.pop(),he=W.pop(),W.push(he+C[ke]+xe);else if(R[ke]){if(Y=R[ke][1],Y==69&&(Y=N[N.l++]),Y>W.length){console.error("WK1 bad formula parse 0x"+ke.toString(16)+":|"+W.join("|")+"|");return}var Re=W.slice(-Y);W.length-=Y,W.push(R[ke][0]+"("+Re.join(",")+")")}else return ke<=7?console.error("WK1 invalid opcode "+ke.toString(16)):ke<=24?console.error("WK1 unsupported op "+ke.toString(16)):ke<=30?console.error("WK1 invalid opcode "+ke.toString(16)):ke<=115?console.error("WK1 unsupported function opcode "+ke.toString(16)):console.error("WK1 unrecognized opcode "+ke.toString(16))}}W.length==1?U[1].f=""+W[0]:console.error("WK1 bad formula parse |"+W.join("|")+"|")}function X(N){var U=[{c:0,r:0},{t:"n",v:0},0];return U[0].r=N.read_shift(2),U[3]=N[N.l++],U[0].c=N[N.l++],U}function K(N,U){var W=X(N);return W[1].t="s",W[1].v=N.read_shift(U-4,"cstr"),W}function P(N,U,W,Y){var ae=mt(6+Y.length);ae.write_shift(2,N),ae.write_shift(1,W),ae.write_shift(1,U),ae.write_shift(1,39);for(var pe=0;pe<Y.length;++pe){var he=Y.charCodeAt(pe);ae.write_shift(1,he>=128?95:he)}return ae.write_shift(1,0),ae}function A(N,U){var W=X(N);W[1].v=N.read_shift(2);var Y=W[1].v>>1;if(W[1].v&1)switch(Y&7){case 0:Y=(Y>>3)*5e3;break;case 1:Y=(Y>>3)*500;break;case 2:Y=(Y>>3)/20;break;case 3:Y=(Y>>3)/200;break;case 4:Y=(Y>>3)/2e3;break;case 5:Y=(Y>>3)/2e4;break;case 6:Y=(Y>>3)/16;break;case 7:Y=(Y>>3)/64;break}return W[1].v=Y,W}function T(N,U){var W=X(N),Y=N.read_shift(4),ae=N.read_shift(4),pe=N.read_shift(2);if(pe==65535)return Y===0&&ae===3221225472?(W[1].t="e",W[1].v=15):Y===0&&ae===3489660928?(W[1].t="e",W[1].v=42):W[1].v=0,W;var he=pe&32768;return pe=(pe&32767)-16446,W[1].v=(1-he*2)*(ae*Math.pow(2,pe+32)+Y*Math.pow(2,pe)),W}function O(N,U,W,Y){var ae=mt(14);if(ae.write_shift(2,N),ae.write_shift(1,W),ae.write_shift(1,U),Y==0)return ae.write_shift(4,0),ae.write_shift(4,0),ae.write_shift(2,65535),ae;var pe=0,he=0,xe=0,ke=0;return Y<0&&(pe=1,Y=-Y),he=Math.log2(Y)|0,Y/=Math.pow(2,he-31),ke=Y>>>0,(ke&2147483648)==0&&(Y/=2,++he,ke=Y>>>0),Y-=ke,ke|=2147483648,ke>>>=0,Y*=Math.pow(2,32),xe=Y>>>0,ae.write_shift(4,xe),ae.write_shift(4,ke),he+=16383+(pe?32768:0),ae.write_shift(2,he),ae}function I(N,U){var W=T(N);return N.l+=U-14,W}function D(N,U){var W=X(N),Y=N.read_shift(4);return W[1].v=Y>>6,W}function B(N,U){var W=X(N),Y=N.read_shift(8,"f");return W[1].v=Y,W}function re(N,U){var W=B(N);return N.l+=U-10,W}function _e(N,U){return N[N.l+U-1]==0?N.read_shift(U,"cstr"):""}function Ce(N,U){var W=N[N.l++];W>U-1&&(W=U-1);for(var Y="";Y.length<W;)Y+=String.fromCharCode(N[N.l++]);return Y}function we(N,U,W){if(!(!W.qpro||U<21)){var Y=N.read_shift(1);N.l+=17,N.l+=1,N.l+=2;var ae=N.read_shift(U-21,"cstr");return[Y,ae]}}function ce(N,U){for(var W={},Y=N.l+U;N.l<Y;){var ae=N.read_shift(2);if(ae==14e3){for(W[ae]=[0,""],W[ae][0]=N.read_shift(2);N[N.l];)W[ae][1]+=String.fromCharCode(N[N.l]),N.l++;N.l++}}return W}function H(N,U){var W=mt(5+N.length);W.write_shift(2,14e3),W.write_shift(2,U);for(var Y=0;Y<N.length;++Y){var ae=N.charCodeAt(Y);W[W.l++]=ae>127?95:ae}return W[W.l++]=0,W}var te={0:{n:"BOF",f:Cs},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:_},15:{n:"LABEL",f},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:_e},222:{n:"SHEETNAMELP",f:Ce},65535:{n:""}},J={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:K},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:I},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ce},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:D},38:{n:"??"},39:{n:"NUMBER27",f:B},40:{n:"FORMULA28",f:re},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:_e},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:we},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:e}})();function Eee(t){var e={},r=t.match(co),n=0,i=!1;if(r)for(;n!=r.length;++n){var s=Ir(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=Ub[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s[0].charCodeAt(1)!==47&&!i)throw new Error("Unrecognized rich format "+s[0])}}return e}var See=(function(){var t=Q1("t"),e=Q1("rPr");function r(s){var a=s.match(t);if(!a)return{t:"s",v:""};var o={t:"s",v:wn(a[1])},l=s.match(e);return l&&(o.s=Eee(l[1])),o}var n=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(a){return a.replace(n,"").split(i).map(r).filter(function(o){return o.v})}})(),kee=(function(){var e=/(\r\n|\n)/g;function r(i,s,a){var o=[];i.u&&o.push("text-decoration: underline;"),i.uval&&o.push("text-underline-style:"+i.uval+";"),i.sz&&o.push("font-size:"+i.sz+"pt;"),i.outline&&o.push("text-effect: outline;"),i.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),i.b&&(s.push("<b>"),a.push("</b>")),i.i&&(s.push("<i>"),a.push("</i>")),i.strike&&(s.push("<s>"),a.push("</s>"));var l=i.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(s.push("<"+l+">"),a.push("</"+l+">")),a.push("</span>"),i}function n(i){var s=[[],i.v,[]];return i.v?(i.s&&r(i.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}})(),Tee=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Aee=/<(?:\w+:)?r>/,Nee=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function f3(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=wn(Xn(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Xn(t),r&&(n.h=Qb(n.t))):t.match(Aee)&&(n.r=Xn(t),n.t=wn(Xn((t.replace(Nee,"").match(Tee)||[]).join("").replace(co,""))),r&&(n.h=kee(See(n.r)))),n):{t:""}}var Cee=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Iee=/<(?:\w+:)?(?:si|sstItem)>/g,Pee=/<\/(?:\w+:)?(?:si|sstItem)>/;function Ree(t,e){var r=[],n="";if(!t)return r;var i=t.match(Cee);if(i){n=i[2].replace(Iee,"").split(Pee);for(var s=0;s!=n.length;++s){var a=f3(n[s].trim(),e);a!=null&&(r[r.length]=a)}i=Ir(i[1]),r.Count=i.count,r.Unique=i.uniqueCount}return r}var Fee=/^\s|\s$|[\t\n\r]/;function r9(t,e){if(!e.bookSST)return"";var r=[ys];r[r.length]=Bt("sst",null,{xmlns:Jd[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var i=t[n],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(Fee)&&(s+=' xml:space="preserve"'),s+=">"+qn(i.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Lee(t){return[t.read_shift(4),t.read_shift(4)]}function Dee(t,e){var r=[],n=!1;return tf(t,function(s,a,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(a.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Oee(t,e){return e||(e=mt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var jee=GQ;function Mee(t){var e=Oo();bt(e,159,Oee(t));for(var r=0;r<t.length;++r)bt(e,19,jee(t[r]));return bt(e,160),e.end()}function n9(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function Vu(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function Bee(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=Vu(t,4),e.U=Vu(t,4),e.W=Vu(t,4),e}function Vee(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},i=t.read_shift(4),s=[];i-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function Uee(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(Vee(t));return e}function zee(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function $ee(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=Vu(t,4),e.U=Vu(t,4),e.W=Vu(t,4),e}function qee(t){var e=$ee(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function i9(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var i=!1;switch(n.AlgID){case 26126:case 26127:case 26128:i=n.Flags==36;break;case 26625:i=n.Flags==4;break;case 0:i=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function s9(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function Hee(t){var e=Vu(t);switch(e.Minor){case 2:return[e.Minor,Wee(t)];case 3:return[e.Minor,Gee()];case 4:return[e.Minor,Kee(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function Wee(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=i9(t,r),i=s9(t,t.length-t.l);return{t:"Std",h:n,v:i}}function Gee(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Kee(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(co,function(s){var a=Ir(s);switch(ou(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=a[o]});break;case"<dataIntegrity":n.encryptedHmacKey=a.encryptedHmacKey,n.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(a);break;default:throw a[0]}}),n}function Xee(t,e){var r={},n=r.EncryptionVersionInfo=Vu(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var i=t.read_shift(4);return e-=4,r.EncryptionHeader=i9(t,i),e-=i,r.EncryptionVerifier=s9(t,e),r}function Yee(t){var e={},r=e.EncryptionVersionInfo=Vu(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function h3(t){var e=0,r,n=n9(t),i=n.length+1,s,a,o,l,c;for(r=gh(i),r[0]=n.length,s=1;s!=i;++s)r[s]=n[s-1];for(s=i-1;s>=0;--s)a=r[s],o=(e&16384)===0?0:1,l=e<<1&32767,c=o|l,e=c^a;return e^52811}var a9=(function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(a){return(a/2|a*128)&255},i=function(a,o){return n(a^o)},s=function(a){for(var o=e[a.length-1],l=104,c=a.length-1;c>=0;--c)for(var f=a[c],p=0;p!=7;++p)f&64&&(o^=r[l]),f*=2,--l;return o};return function(a){for(var o=n9(a),l=s(o),c=o.length,f=gh(16),p=0;p!=16;++p)f[p]=0;var g,m,_;for((c&1)===1&&(g=l>>8,f[c]=i(t[0],g),--c,g=l&255,m=o[o.length-1],f[c]=i(m,g));c>0;)--c,g=l>>8,f[c]=i(o[c],g),--c,g=l&255,f[c]=i(o[c],g);for(c=15,_=15-o.length;_>0;)g=l>>8,f[c]=i(t[_],g),--c,--_,g=l&255,f[c]=i(o[c],g),--c,--_;return f}})(),Qee=function(t,e,r,n,i){i||(i=e),n||(n=a9(t));var s,a;for(s=0;s!=e.length;++s)a=e[s],a^=n[r],a=(a>>5|a<<3)&255,i[s]=a,++r;return[i,r,n]},Jee=function(t){var e=0,r=a9(t);return function(n){var i=Qee("",n,e,r);return e=i[1],i[0]}};function Zee(t,e,r,n){var i={key:Cs(t),verificationBytes:Cs(t)};return r.password&&(i.verifier=h3(r.password)),n.valid=i.verificationBytes===i.verifier,n.valid&&(n.insitu=Jee(r.password)),i}function ete(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=Yee(t):n.Data=Xee(t,e),n}function tte(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?ete(t,e-2,n):Zee(t,r.biff>=8?e:e-2,r,n),n}var o9=(function(){function t(i,s){switch(s.type){case"base64":return e(ul(i),s);case"binary":return e(i,s);case"buffer":return e(Xr&&Buffer.isBuffer(i)?i.toString("binary"):Ph(i),s);case"array":return e(Vd(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(f,p){Array.isArray(o)&&(o[p]=[]);for(var g=/\\\w+\b/g,m=0,_,w=-1;_=g.exec(f);){switch(_[0]){case"\\cell":var b=f.slice(m,g.lastIndex-_[0].length);if(b[0]==" "&&(b=b.slice(1)),++w,b.length){var k={v:b,t:"s"};Array.isArray(o)?o[p][w]=k:o[Cr({r:p,c:w})]=k}break}m=g.lastIndex}w>c.e.c&&(c.e.c=w)}),o["!ref"]=Ur(c),o}function r(i,s){return Rh(t(i,s),s)}function n(i){for(var s=["{\\rtf1\\ansi"],a=_n(i["!ref"]),o,l=Array.isArray(i),c=a.s.r;c<=a.e.r;++c){s.push("\\trowd\\trautofit1");for(var f=a.s.c;f<=a.e.c;++f)s.push("\\cellx"+(f+1));for(s.push("\\pard\\intbl"),f=a.s.c;f<=a.e.c;++f){var p=Cr({r:c,c:f});o=l?(i[c]||[])[f]:i[p],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(Hu(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}})();function rte(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function tg(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function nte(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(e,r,n),s=Math.min(e,r,n),a=i-s;if(a===0)return[0,0,e];var o=0,l=0,c=i+s;switch(l=a/(c>1?2-c:c),i){case e:o=((r-n)/a+6)%6;break;case r:o=(n-e)/a+2;break;case n:o=(e-r)/a+4;break}return[o/6,l,c/2]}function ite(t){var e=t[0],r=t[1],n=t[2],i=r*2*(n<.5?n:1-n),s=n-i/2,a=[s,s,s],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=i*o,a[0]+=i,a[1]+=l;break;case 1:l=i*(2-o),a[0]+=l,a[1]+=i;break;case 2:l=i*(o-2),a[1]+=i,a[2]+=l;break;case 3:l=i*(4-o),a[1]+=l,a[2]+=i;break;case 4:l=i*(o-4),a[2]+=i,a[0]+=l;break;case 5:l=i*(6-o),a[2]+=l,a[0]+=i;break}for(var c=0;c!=3;++c)a[c]=Math.round(a[c]*255);return a}function bv(t,e){if(e===0)return t;var r=nte(rte(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),tg(ite(r))}var l9=6,ste=15,ate=1,no=l9;function rg(t){return Math.floor((t+Math.round(128/no)/256)*no)}function ng(t){return Math.floor((t-5)/no*100+.5)/100}function Ev(t){return Math.round((t*no+5)/no*256)/256}function t5(t){return Ev(ng(rg(t)))}function d3(t){var e=Math.abs(t-t5(t)),r=no;if(e>.005)for(no=ate;no<ste;++no)Math.abs(t-t5(t))<=e&&(e=Math.abs(t-t5(t)),r=no);no=r}function xh(t){t.width?(t.wpx=rg(t.width),t.wch=ng(t.wpx),t.MDW=no):t.wpx?(t.wch=ng(t.wpx),t.width=Ev(t.wch),t.MDW=no):typeof t.wch=="number"&&(t.width=Ev(t.wch),t.wpx=rg(t.width),t.MDW=no),t.customWidth&&delete t.customWidth}var ote=96,c9=ote;function ig(t){return t*96/c9}function Mp(t){return t*c9/96}var lte={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function cte(t,e,r,n){e.Borders=[];var i={},s=!1;(t[0].match(co)||[]).forEach(function(a){var o=Ir(a);switch(ou(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":i={},o.diagonalUp&&(i.diagonalUp=mi(o.diagonalUp)),o.diagonalDown&&(i.diagonalDown=mi(o.diagonalDown)),e.Borders.push(i);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function ute(t,e,r,n){e.Fills=[];var i={},s=!1;(t[0].match(co)||[]).forEach(function(a){var o=Ir(a);switch(ou(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":i={},e.Fills.push(i);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":o.patternType&&(i.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":i.bgColor||(i.bgColor={}),o.indexed&&(i.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(i.bgColor.theme=parseInt(o.theme,10)),o.tint&&(i.bgColor.tint=parseFloat(o.tint)),o.rgb&&(i.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":i.fgColor||(i.fgColor={}),o.theme&&(i.fgColor.theme=parseInt(o.theme,10)),o.tint&&(i.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(i.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function fte(t,e,r,n){e.Fonts=[];var i={},s=!1;(t[0].match(co)||[]).forEach(function(a){var o=Ir(a);switch(ou(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(i),i={};break;case"<name":o.val&&(i.name=Xn(o.val));break;case"<name/>":case"</name>":break;case"<b":i.bold=o.val?mi(o.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=o.val?mi(o.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(o.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34;break}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=o.val?mi(o.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=o.val?mi(o.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=o.val?mi(o.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=o.val?mi(o.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=o.val?mi(o.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":o.val&&(i.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(i.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(i.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(i.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=Ub[parseInt(o.val,10)];break;case"<color":if(i.color||(i.color={}),o.auto&&(i.color.auto=mi(o.auto)),o.rgb)i.color.rgb=o.rgb.slice(-6);else if(o.indexed){i.color.index=parseInt(o.indexed,10);var l=vd[i.color.index];i.color.index==81&&(l=vd[1]),l||(l=vd[1]),i.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(i.color.theme=parseInt(o.theme,10),o.tint&&(i.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(i.color.rgb=bv(r.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function hte(t,e,r){e.NumberFmt=[];for(var n=ts(Tr),i=0;i<n.length;++i)e.NumberFmt[n[i]]=Tr[n[i]];var s=t[0].match(co);if(s)for(i=0;i<s.length;++i){var a=Ir(s[i]);switch(ou(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=wn(Xn(a.formatCode)),l=parseInt(a.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}Bu(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}function dte(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Bt("numFmt",null,{numFmtId:n,formatCode:qn(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Bt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Jx=["numFmtId","fillId","fontId","borderId","xfId"],Zx=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function pte(t,e,r){e.CellXf=[];var n,i=!1;(t[0].match(co)||[]).forEach(function(s){var a=Ir(s),o=0;switch(ou(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=a,delete n[0],o=0;o<Jx.length;++o)n[Jx[o]]&&(n[Jx[o]]=parseInt(n[Jx[o]],10));for(o=0;o<Zx.length;++o)n[Zx[o]]&&(n[Zx[o]]=mi(n[Zx[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};a.vertical&&(l.vertical=a.vertical),a.horizontal&&(l.horizontal=a.horizontal),a.textRotation!=null&&(l.textRotation=a.textRotation),a.indent&&(l.indent=a.indent),a.wrapText&&(l.wrapText=mi(a.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}function mte(t){var e=[];return e[e.length]=Bt("cellXfs",null),t.forEach(function(r){e[e.length]=Bt("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Bt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var gte=(function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,i=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var f={};if(!o)return f;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var p;return(p=o.match(e))&&hte(p,f,c),(p=o.match(i))&&fte(p,f,l,c),(p=o.match(n))&&ute(p,f,l,c),(p=o.match(s))&&cte(p,f,l,c),(p=o.match(r))&&pte(p,f,c),f}})();function u9(t,e){var r=[ys,Bt("styleSheet",null,{xmlns:Jd[0],"xmlns:vt":zs.vt})],n;return t.SSF&&(n=dte(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=mte(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function xte(t,e){var r=t.read_shift(2),n=oo(t);return[r,n]}function vte(t,e,r){r||(r=mt(6+4*e.length)),r.write_shift(2,t),aa(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function yte(t,e,r){var n={};n.sz=t.read_shift(2)/20;var i=eJ(t);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=ZQ(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=oo(t),n}function wte(t,e){e||(e=mt(153)),e.write_shift(2,t.sz*20),tJ(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),yv(t.color,e);var n=0;return n=2,e.write_shift(1,n),aa(t.name,e),e.length>e.l?e.slice(0,e.l):e}var _te=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],r5,bte=lo;function TT(t,e){e||(e=mt(84)),r5||(r5=wy(_te));var r=r5[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(yv({auto:1},e),yv({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function Ete(t,e){var r=t.l+e,n=t.read_shift(2),i=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:i}}function f9(t,e,r){r||(r=mt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Gm(t,e){return e||(e=mt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Ste=lo;function kte(t,e){return e||(e=mt(51)),e.write_shift(1,0),Gm(null,e),Gm(null,e),Gm(null,e),Gm(null,e),Gm(null,e),e.length>e.l?e.slice(0,e.l):e}function Tte(t,e){return e||(e=mt(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),vv(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function Ate(t,e,r){var n=mt(2052);return n.write_shift(4,t),vv(e,n),vv(r,n),n.length>n.l?n.slice(0,n.l):n}function Nte(t,e,r){var n={};n.NumberFmt=[];for(var i in Tr)n.NumberFmt[i]=Tr[i];n.CellXf=[],n.Fonts=[];var s=[],a=!1;return tf(t,function(l,c,f){switch(f){case 44:n.NumberFmt[l[0]]=l[1],Bu(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=bv(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:s.push(f),a=!0;break;case 38:s.pop(),a=!1;break;default:if(c.T>0)s.push(f);else if(c.T<0)s.pop();else if(!a||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),n}function Cte(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&++r}),r!=0&&(bt(t,615,fc(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&bt(t,44,vte(i,e[i]))}),bt(t,616))}}function Ite(t){var e=1;bt(t,611,fc(e)),bt(t,43,wte({sz:12,color:{theme:1},name:"Calibri",family:2})),bt(t,612)}function Pte(t){var e=2;bt(t,603,fc(e)),bt(t,45,TT({patternType:"none"})),bt(t,45,TT({patternType:"gray125"})),bt(t,604)}function Rte(t){var e=1;bt(t,613,fc(e)),bt(t,46,kte()),bt(t,614)}function Fte(t){var e=1;bt(t,626,fc(e)),bt(t,47,f9({numFmtId:0},65535)),bt(t,627)}function Lte(t,e){bt(t,617,fc(e.length)),e.forEach(function(r){bt(t,47,f9(r,0))}),bt(t,618)}function Dte(t){var e=1;bt(t,619,fc(e)),bt(t,48,Tte({xfId:0,name:"Normal"})),bt(t,620)}function Ote(t){var e=0;bt(t,505,fc(e)),bt(t,506)}function jte(t){var e=0;bt(t,508,Ate(e,"TableStyleMedium9","PivotStyleMedium4")),bt(t,509)}function Mte(t,e){var r=Oo();return bt(r,278),Cte(r,t.SSF),Ite(r),Pte(r),Rte(r),Fte(r),Lte(r,e.cellXfs),Dte(r),Ote(r),jte(r),bt(r,279),r.end()}var Bte=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Vte(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(co)||[]).forEach(function(i){var s=Ir(i);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[Bte.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function Ute(){}function zte(){}var $te=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,qte=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Hte=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Wte(t,e,r){e.themeElements={};var n;[["clrScheme",$te,Vte],["fontScheme",qte,Ute],["fmtScheme",Hte,zte]].forEach(function(i){if(!(n=t.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](n,e,r)})}var Gte=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function h9(t,e){(!t||t.length===0)&&(t=p3());var r,n={};if(!(r=t.match(Gte)))throw new Error("themeElements not found in theme");return Wte(r[0],n,e),n.raw=t,n}function p3(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[ys];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Kte(t,e,r){var n=t.l+e,i=t.read_shift(4);if(i!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var a;try{a=iR(s,{type:"array"})}catch{return}var o=il(a,"theme/theme/theme1.xml",!0);if(o)return h9(o,r)}}function Xte(t){return t.read_shift(4)}function Yte(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=Qte(t,4);break;case 2:e.xclrValue=HR(t);break;case 3:e.xclrValue=Xte(t);break;case 4:t.l+=4;break}return t.l+=8,e}function Qte(t,e){return lo(t,e)}function Jte(t,e){return lo(t,e)}function Zte(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Yte(t);break;case 6:n[1]=Jte(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function ere(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var i=t.read_shift(2),s=[];i-- >0;)s.push(Zte(t,r-t.l));return{ixfe:n,ext:s}}function tre(t,e){e.forEach(function(r){r[0]})}function rre(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:oo(t)}}function nre(t){var e=mt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),aa(t.name,e),e.slice(0,e.l)}function ire(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function sre(t){var e=mt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function are(t,e){var r=mt(8+2*e.length);return r.write_shift(4,t),aa(e,r),r.slice(0,r.l)}function ore(t){return t.l+=4,t.read_shift(4)!=0}function lre(t,e){var r=mt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function cre(t,e,r){var n={Types:[],Cell:[],Value:[]},i=r||{},s=[],a=!1,o=2;return tf(t,function(l,c,f){switch(f){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(p){o==1?n.Cell.push({type:n.Types[p[0]-1].name,index:p[1]}):o==0&&n.Value.push({type:n.Types[p[0]-1].name,index:p[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:s.push(f),a=!0;break;case 36:s.pop(),a=!1;break;default:if(!c.T){if(!a||i.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),n}function ure(){var t=Oo();return bt(t,332),bt(t,334,fc(1)),bt(t,335,nre({name:"XLDAPR",version:12e4,flags:3496657072})),bt(t,336),bt(t,339,are(1,"XLDAPR")),bt(t,52),bt(t,35,fc(514)),bt(t,4096,fc(0)),bt(t,4097,Fl(1)),bt(t,36),bt(t,53),bt(t,340),bt(t,337,lre(1)),bt(t,51,sre([[1,0]])),bt(t,338),bt(t,333),t.end()}function fre(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var i=!1,s=2,a;return t.replace(co,function(o){var l=Ir(o);switch(ou(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(a=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):s==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+l.i);break;default:if(!i&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function d9(){var t=[ys];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function hre(t){var e=[];if(!t)return e;var r=1;return(t.match(co)||[]).forEach(function(n){var i=Ir(n);switch(i[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?r=i.i:i.i=r,e.push(i);break}}),e}function dre(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Cr(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function pre(t,e,r){var n=[];return tf(t,function(s,a,o){switch(o){case 63:n.push(s);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function mre(t,e,r,n){if(!t)return t;var i=n||{},s=!1;tf(t,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!l.T){if(!s||i.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},i)}function gre(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var Q0=1024;function p9(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[Bt("xml",null,{"xmlns:v":tl.v,"xmlns:o":tl.o,"xmlns:x":tl.x,"xmlns:mv":tl.mv}).replace(/\/>/,">"),Bt("o:shapelayout",Bt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Bt("v:shapetype",[Bt("v:stroke",null,{joinstyle:"miter"}),Bt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Q0<t*1e3;)Q0+=1e3;return e.forEach(function(s){var a=Ui(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Bt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=Bt("v:fill",l,o),f={on:"t",obscured:"t"};++Q0,i=i.concat(["<v:shape"+J1({id:"_x0000_s"+Q0,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,Bt("v:shadow",null,f),Bt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ta("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),Ta("x:AutoFill","False"),Ta("x:Row",String(a.r)),Ta("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function AT(t,e,r,n){var i=Array.isArray(t),s;e.forEach(function(a){var o=Ui(a.ref);if(i?(t[o.r]||(t[o.r]=[]),s=t[o.r][o.c]):s=t[a.ref],!s){s={t:"z"},i?t[o.r][o.c]=s:t[a.ref]=s;var l=_n(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=Ur(l);c!==t["!ref"]&&(t["!ref"]=c)}s.c||(s.c=[]);var f={a:a.author,t:a.t,r:a.r,T:r};a.h&&(f.h=a.h);for(var p=s.c.length-1;p>=0;--p){if(!r&&s.c[p].T)return;r&&!s.c[p].T&&s.c.splice(p,1)}if(r&&n){for(p=0;p<n.length;++p)if(f.a==n[p].id){f.a=n[p].name||f.a;break}}s.c.push(f)})}function xre(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],i=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Ir(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},f=Ui(l.ref);if(!(e.sheetRows&&e.sheetRows<=f.r)){var p=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),g=!!p&&!!p[1]&&f3(p[1])||{r:"",t:"",h:""};c.r=g.r,g.r=="<t></t>"&&(g.t=g.h=""),c.t=(g.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(c.h=g.h),n.push(c)}}}}),n}function m9(t){var e=[ys,Bt("comments",null,{xmlns:Jd[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(i){var s=qn(i.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&r.indexOf("tc="+i.ID)==-1&&(r.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var i=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?i=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(i=r.indexOf(qn(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(Ta("t",qn(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(Ta("t",qn(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function vre(t,e){var r=[],n=!1,i={},s=0;return t.replace(co,function(o,l){var c=Ir(o);switch(ou(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":i={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":i.t!=null&&r.push(i);break;case"<text>":case"<text":s=l+o.length;break;case"</text>":i.t=t.slice(s,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function yre(t,e,r){var n=[ys,Bt("ThreadedComments",null,{xmlns:zs.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),n.push(Bt("threadedComment",Ta("text",a.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function wre(t,e){var r=[],n=!1;return t.replace(co,function(s){var a=Ir(s);switch(ou(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return s}),r}function _re(t){var e=[ys,Bt("personList",null,{xmlns:zs.TCMNT,"xmlns:x":Jd[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Bt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function bre(t){var e={};e.iauthor=t.read_shift(4);var r=r0(t);return e.rfx=r.s,e.ref=Cr(r.s),t.l+=16,e}function Ere(t,e){return e==null&&(e=mt(36)),e.write_shift(4,t[1].iauthor),cm(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var Sre=oo;function kre(t){return aa(t.slice(0,54))}function Tre(t,e){var r=[],n=[],i={},s=!1;return tf(t,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:i=o;break;case 637:i.t=o.t,i.h=o.h,i.r=o.r;break;case 636:if(i.author=n[i.iauthor],delete i.iauthor,e.sheetRows&&i.rfx&&e.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,r.push(i);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}function Are(t){var e=Oo(),r=[];return bt(e,628),bt(e,630),t.forEach(function(n){n[1].forEach(function(i){r.indexOf(i.a)>-1||(r.push(i.a.slice(0,54)),bt(e,632,kre(i.a)))})}),bt(e,631),bt(e,633),t.forEach(function(n){n[1].forEach(function(i){i.iauthor=r.indexOf(i.a);var s={s:Ui(n[0]),e:Ui(n[0])};bt(e,635,Ere([s,i])),i.t&&i.t.length>0&&bt(e,637,XQ(i)),bt(e,636),delete i.iauthor})}),bt(e,634),bt(e,629),e.end()}var Nre="application/vnd.ms-office.vbaProject";function Cre(t){var e=yr.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var i=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");yr.utils.cfb_add(e,i,t.FileIndex[n].content)}}),yr.write(e)}function Ire(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&yr.utils.cfb_add(t,i,e.FileIndex[n].content)}})}var g9=["xlsb","xlsm","xlam","biff8","xla"];function Pre(){return{"!type":"dialog"}}function Rre(){return{"!type":"dialog"}}function Fre(){return{"!type":"macro"}}function Lre(){return{"!type":"macro"}}var up=(function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,i,s,a){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=s.length>0?parseInt(s,10)|0:0,f=a.length>0?parseInt(a,10)|0:0;return o?f+=e.c:--f,l?c+=e.r:--c,i+(o?"":"$")+Vi(f)+(l?"":"$")+vs(c)}return function(i,s){return e=s,i.replace(t,r)}})(),m3=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,g3=(function(){return function(e,r){return e.replace(m3,function(n,i,s,a,o,l){var c=r3(a)-(s?0:r.c),f=t3(l)-(o?0:r.r),p=f==0?"":o?f+1:"["+f+"]",g=c==0?"":s?c+1:"["+c+"]";return i+"R"+p+"C"+g})}})();function x9(t,e){return t.replace(m3,function(r,n,i,s,a,o){return n+(i=="$"?i+s:Vi(r3(s)+e.c))+(a=="$"?a+o:vs(t3(o)+e.r))})}function Dre(t,e,r){var n=jo(e),i=n.s,s=Ui(r),a={r:s.r-i.r,c:s.c-i.c};return x9(t,a)}function Ore(t){return t.length!=1}function NT(t){return t.replace(/_xlfn\./g,"")}function Ts(t){t.l+=1}function vh(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function v9(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return y9(t);r.biff==12&&(n=4)}var i=t.read_shift(n),s=t.read_shift(n),a=vh(t),o=vh(t);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function y9(t){var e=vh(t),r=vh(t),n=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function jre(t,e,r){if(r.biff<8)return y9(t);var n=t.read_shift(r.biff==12?4:2),i=t.read_shift(r.biff==12?4:2),s=vh(t),a=vh(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function w9(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return Mre(t);var n=t.read_shift(r&&r.biff==12?4:2),i=vh(t);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function Mre(t){var e=vh(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function Bre(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Vre(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Ure(t);var i=t.read_shift(n>=12?4:2),s=t.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function Ure(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),i==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:i,rRel:n}}function zre(t,e,r){var n=(t[t.l++]&96)>>5,i=v9(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,i]}function $re(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var a=v9(t,s,r);return[n,i,a]}function qre(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Hre(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,i]}function Wre(t,e,r){var n=(t[t.l++]&96)>>5,i=jre(t,e-1,r);return[n,i]}function Gre(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function CT(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function Kre(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),i=[],s=0;s<=n;++s)i.push(t.read_shift(r&&r.biff==2?1:2));return i}function Xre(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Yre(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Qre(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function Jre(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function _9(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function Zre(t){return t.read_shift(2),_9(t)}function ene(t){return t.read_shift(2),_9(t)}function tne(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=w9(t,0,r);return[n,i]}function rne(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=Vre(t,0,r);return[n,i]}function nne(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=w9(t,0,r);return[n,i,s]}function ine(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(r&&r.biff<=3?1:2);return[oie[i],S9[i],n]}function sne(t,e,r){var n=t[t.l++],i=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:ane(t);return[i,(s[0]===0?S9:aie)[s[1]]]}function ane(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function one(t,e,r){t.l+=r&&r.biff==2?3:4}function lne(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function cne(t){return t.l++,rf[t.read_shift(1)]}function une(t){return t.l++,t.read_shift(2)}function fne(t){return t.l++,t.read_shift(1)!==0}function hne(t){return t.l++,io(t)}function dne(t,e,r){return t.l++,Mg(t,e-1,r)}function pne(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=fs(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=rf[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=io(t);break;case 2:r[1]=n0(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function mne(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),i=[],s=0;s!=n;++s)i.push((r.biff==12?r0:Ey)(t));return i}function gne(t,e,r){var n=0,i=0;r.biff==12?(n=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--i==0&&(i=256));for(var s=0,a=[];s!=n&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=pne(t,r.biff);return a}function xne(t,e,r){var n=t.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,s=t.read_shift(i);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function vne(t,e,r){if(r.biff==5)return yne(t);var n=t.read_shift(1)>>>5&3,i=t.read_shift(2),s=t.read_shift(4);return[n,i,s]}function yne(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function wne(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function _ne(t,e,r){var n=t.read_shift(1)>>>5&3,i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function bne(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function Ene(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,i]}var Sne=lo,kne=lo,Tne=lo;function Vg(t,e,r){return t.l+=2,[Bre(t)]}function x3(t){return t.l+=6,[]}var Ane=Vg,Nne=x3,Cne=x3,Ine=Vg;function b9(t){return t.l+=2,[Cs(t),t.read_shift(2)&1]}var Pne=Vg,Rne=b9,Fne=x3,Lne=Vg,Dne=Vg,One=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function jne(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i=t.read_shift(2),s=t.read_shift(2),a=One[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:i,C:s}}function Mne(t){return t.l+=2,[t.read_shift(4)]}function Bne(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function Vne(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Une(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function zne(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function $ne(t){return t.l+=4,[0,0]}var IT={1:{n:"PtgExp",f:lne},2:{n:"PtgTbl",f:Tne},3:{n:"PtgAdd",f:Ts},4:{n:"PtgSub",f:Ts},5:{n:"PtgMul",f:Ts},6:{n:"PtgDiv",f:Ts},7:{n:"PtgPower",f:Ts},8:{n:"PtgConcat",f:Ts},9:{n:"PtgLt",f:Ts},10:{n:"PtgLe",f:Ts},11:{n:"PtgEq",f:Ts},12:{n:"PtgGe",f:Ts},13:{n:"PtgGt",f:Ts},14:{n:"PtgNe",f:Ts},15:{n:"PtgIsect",f:Ts},16:{n:"PtgUnion",f:Ts},17:{n:"PtgRange",f:Ts},18:{n:"PtgUplus",f:Ts},19:{n:"PtgUminus",f:Ts},20:{n:"PtgPercent",f:Ts},21:{n:"PtgParen",f:Ts},22:{n:"PtgMissArg",f:Ts},23:{n:"PtgStr",f:dne},26:{n:"PtgSheet",f:Bne},27:{n:"PtgEndSheet",f:Vne},28:{n:"PtgErr",f:cne},29:{n:"PtgBool",f:fne},30:{n:"PtgInt",f:une},31:{n:"PtgNum",f:hne},32:{n:"PtgArray",f:Gre},33:{n:"PtgFunc",f:ine},34:{n:"PtgFuncVar",f:sne},35:{n:"PtgName",f:xne},36:{n:"PtgRef",f:tne},37:{n:"PtgArea",f:zre},38:{n:"PtgMemArea",f:wne},39:{n:"PtgMemErr",f:Sne},40:{n:"PtgMemNoMem",f:kne},41:{n:"PtgMemFunc",f:_ne},42:{n:"PtgRefErr",f:bne},43:{n:"PtgAreaErr",f:qre},44:{n:"PtgRefN",f:rne},45:{n:"PtgAreaN",f:Wre},46:{n:"PtgMemAreaN",f:Une},47:{n:"PtgMemNoMemN",f:zne},57:{n:"PtgNameX",f:vne},58:{n:"PtgRef3d",f:nne},59:{n:"PtgArea3d",f:$re},60:{n:"PtgRefErr3d",f:Ene},61:{n:"PtgAreaErr3d",f:Hre},255:{}},qne={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Hne={1:{n:"PtgElfLel",f:b9},2:{n:"PtgElfRw",f:Lne},3:{n:"PtgElfCol",f:Ane},6:{n:"PtgElfRwV",f:Dne},7:{n:"PtgElfColV",f:Ine},10:{n:"PtgElfRadical",f:Pne},11:{n:"PtgElfRadicalS",f:Fne},13:{n:"PtgElfColS",f:Nne},15:{n:"PtgElfColSV",f:Cne},16:{n:"PtgElfRadicalLel",f:Rne},25:{n:"PtgList",f:jne},29:{n:"PtgSxName",f:Mne},255:{}},Wne={0:{n:"PtgAttrNoop",f:$ne},1:{n:"PtgAttrSemi",f:Jre},2:{n:"PtgAttrIf",f:Yre},4:{n:"PtgAttrChoose",f:Kre},8:{n:"PtgAttrGoto",f:Xre},16:{n:"PtgAttrSum",f:one},32:{n:"PtgAttrBaxcel",f:CT},33:{n:"PtgAttrBaxcel",f:CT},64:{n:"PtgAttrSpace",f:Zre},65:{n:"PtgAttrSpaceSemi",f:ene},128:{n:"PtgAttrIfError",f:Qre},255:{}};function Ug(t,e,r,n){if(n.biff<8)return lo(t,e);for(var i=t.l+e,s=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=gne(t,0,n),s.push(r[a][1]);break;case"PtgMemArea":r[a][2]=mne(t,r[a][1],n),s.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),s.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=i-t.l,e!==0&&s.push(lo(t,e)),s}function zg(t,e,r){for(var n=t.l+e,i,s,a=[];n!=t.l;)e=n-t.l,s=t[t.l],i=IT[s]||IT[qne[s]],(s===24||s===25)&&(i=(s===24?Hne:Wne)[t[t.l+1]]),!i||!i.f?lo(t,e):a.push([i.n,i.f(t,e,r)]);return a}function Gne(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],i=[],s=0;s<n.length;++s){var a=n[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var Kne={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Xne(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function E9(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(t[n[0]][0]){case 357:return i=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(i=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function PT(t,e,r){var n=E9(t,e,r);return n=="#REF"?n:Xne(n,r)}function to(t,e,r,n,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],l,c,f,p=0,g=0,m,_="";if(!t[0]||!t[0][0])return"";for(var w=-1,b="",k=0,R=t[0].length;k<R;++k){var C=t[0][k];switch(C[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),w>=0){switch(t[0][w][1][0]){case 0:b=Qi(" ",t[0][w][1][1]);break;case 1:b=Qi("\r",t[0][w][1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][w][1][0])}c=c+b,w=-1}o.push(c+Kne[C[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=y1(C[1][1],a,i),o.push(w1(f,s));break;case"PtgRefN":f=r?y1(C[1][1],r,i):C[1][1],o.push(w1(f,s));break;case"PtgRef3d":p=C[1][1],f=y1(C[1][2],a,i),_=PT(n,p,i),o.push(_+"!"+w1(f,s));break;case"PtgFunc":case"PtgFuncVar":var j=C[1][0],X=C[1][1];j||(j=0),j&=127;var K=j==0?[]:o.slice(-j);o.length-=j,X==="User"&&(X=K.shift()),o.push(X+"("+K.join(",")+")");break;case"PtgBool":o.push(C[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(C[1]);break;case"PtgNum":o.push(String(C[1]));break;case"PtgStr":o.push('"'+C[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(C[1]);break;case"PtgAreaN":m=aT(C[1][1],r?{s:r}:a,i),o.push(Jw(m,i));break;case"PtgArea":m=aT(C[1][1],a,i),o.push(Jw(m,i));break;case"PtgArea3d":p=C[1][1],m=C[1][2],_=PT(n,p,i),o.push(_+"!"+Jw(m,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=C[1][2];var P=(n.names||[])[g-1]||(n[0]||[])[g],A=P?P.Name:"SH33TJSNAME"+String(g);A&&A.slice(0,6)=="_xlfn."&&!i.xlfn&&(A=A.slice(6)),o.push(A);break;case"PtgNameX":var T=C[1][1];g=C[1][2];var O;if(i.biff<=5)T<0&&(T=-T),n[T]&&(O=n[T][g]);else{var I="";if(((n[T]||[])[0]||[])[0]==14849||(((n[T]||[])[0]||[])[0]==1025?n[T][g]&&n[T][g].itab>0&&(I=n.SheetNames[n[T][g].itab-1]+"!"):I=n.SheetNames[g-1]+"!"),n[T]&&n[T][g])I+=n[T][g].Name;else if(n[0]&&n[0][g])I+=n[0][g].Name;else{var D=(E9(n,T,i)||"").split(";;");D[g-1]?I=D[g-1]:I+="SH33TJSERRX"}o.push(I);break}O||(O={Name:"SH33TJSERRY"}),o.push(O.Name);break;case"PtgParen":var B="(",re=")";if(w>=0){switch(b="",t[0][w][1][0]){case 2:B=Qi(" ",t[0][w][1][1])+B;break;case 3:B=Qi("\r",t[0][w][1][1])+B;break;case 4:re=Qi(" ",t[0][w][1][1])+re;break;case 5:re=Qi("\r",t[0][w][1][1])+re;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][w][1][0])}w=-1}o.push(B+o.pop()+re);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":f={c:C[1][1],r:C[1][0]};var _e={c:r.c,r:r.r};if(n.sharedf[Cr(f)]){var Ce=n.sharedf[Cr(f)];o.push(to(Ce,a,_e,n,i))}else{var we=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(f.c<c[0].s.c||f.c>c[0].e.c)&&!(f.r<c[0].s.r||f.r>c[0].e.r)){o.push(to(c[1],a,_e,n,i)),we=!0;break}we||o.push(C[1])}break;case"PtgArray":o.push("{"+Gne(C[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":w=k;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+C[1].idx+"[#"+C[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(C));default:throw new Error("Unrecognized Formula Token: "+String(C))}var ce=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&w>=0&&ce.indexOf(t[0][k][0])==-1){C=t[0][w];var H=!0;switch(C[1][0]){case 4:H=!1;case 0:b=Qi(" ",C[1][1]);break;case 5:H=!1;case 1:b=Qi("\r",C[1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+C[1][0])}o.push((H?b:"")+o.pop()+(H?"":b)),w=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function Yne(t,e,r){var n=t.l+e,i=r.biff==2?1:2,s,a=t.read_shift(i);if(a==65535)return[[],lo(t,e-2)];var o=zg(t,a,r);return e!==a+i&&(s=Ug(t,e-a-i,o,r)),t.l=n,[o,s]}function Qne(t,e,r){var n=t.l+e,i=r.biff==2?1:2,s,a=t.read_shift(i);if(a==65535)return[[],lo(t,e-2)];var o=zg(t,a,r);return e!==a+i&&(s=Ug(t,e-a-i,o,r)),t.l=n,[o,s]}function Jne(t,e,r,n){var i=t.l+e,s=zg(t,n,r),a;return i!==t.l&&(a=Ug(t,i-t.l,s,r)),[s,a]}function Zne(t,e,r){var n=t.l+e,i,s=t.read_shift(2),a=zg(t,s,r);return s==65535?[[],lo(t,e-2)]:(e!==s+2&&(i=Ug(t,n-s-2,a,r)),[a,i])}function eie(t){var e;if(Du(t,t.l+6)!==65535)return[io(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function tie(t){if(t==null){var e=mt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Ud(t);return Ud(0)}function n5(t,e,r){var n=t.l+e,i=lu(t);r.biff==2&&++t.l;var s=eie(t),a=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=Qne(t,n-t.l,r);return{cell:i,val:s[0],formula:o,shared:a>>3&1,tt:s[1]}}function rie(t,e,r,n,i){var s=$d(e,r,i),a=tie(t.v),o=mt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var c=mt(t.bf.length),f=0;f<t.bf.length;++f)c[f]=t.bf[f];var p=sa([s,a,o,c]);return p}function Sy(t,e,r){var n=t.read_shift(4),i=zg(t,n,r),s=t.read_shift(4),a=s>0?Ug(t,s,i,r):null;return[i,a]}var nie=Sy,ky=Sy,iie=Sy,sie=Sy,aie={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},S9={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},oie={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function RT(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function lie(t){var e="of:="+t.replace(m3,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function i5(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function cie(t){return t.replace(/\./,"!")}var b1={},fp={},E1=typeof Map<"u";function v3(t,e,r){var n=0,i=t.length;if(r){if(E1?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=E1?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<i;++n)if(t[n].t===e)return t.Count++,n;return t[i]={t:e},t.Count++,t.Unique++,r&&(E1?(r.has(e)||r.set(e,[]),r.get(e).push(i)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(i))),i}function Ty(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(no=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=ng(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=Ev(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function _d(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Fh(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],i=60,s=t.length;if(n==null&&r.ssf){for(;i<392;++i)if(r.ssf[i]==null){Bu(e.z,i),r.ssf[i]=e.z,r.revssf[e.z]=n=i;break}}for(i=0;i!=s;++i)if(t[i].numFmtId===n)return i;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function k9(t,e,r,n,i,s){try{n.cellNF&&(t.z=Tr[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=yi(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Tr[e]==null&&Bu(aQ[e]||"General",e),t.t==="e")t.w=t.w||rf[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Y1(t.v);else if(t.t==="d"){var a=qs(t.v);(a|0)===a?t.w=a.toString(10):t.w=Y1(a)}else{if(t.v===void 0)return"";t.w=Bd(t.v,fp)}else t.t==="d"?t.w=Ol(e,qs(t.v),fp):t.w=Ol(e,t.v,fp)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=bv(i.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=i.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=bv(i.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=i.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function uie(t,e,r){if(t&&t["!ref"]){var n=_n(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function fie(t,e){var r=_n(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Ur(r))}var hie=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,die=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,pie=/<(?:\w:)?hyperlink [^>]*>/mg,mie=/"(\w*:\w*)"/,gie=/<(?:\w:)?col\b[^>]*[\/]?>/g,xie=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,vie=/<(?:\w:)?pageMargins[^>]*\/>/g,T9=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,yie=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,wie=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function _ie(t,e,r,n,i,s,a){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",f="",p=t.match(die);p?(c=t.slice(0,p.index),f=t.slice(p.index+p[0].length)):c=f=t;var g=c.match(T9);g?y3(g[0],o,i,r):(g=c.match(yie))&&Eie(g[0],g[1]||"",o,i,r);var m=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var _=c.slice(m,m+50).match(mie);_&&fie(o,_[1])}var w=c.match(wie);w&&w[1]&&Oie(w[1],i);var b=[];if(e.cellStyles){var k=c.match(gie);k&&Pie(b,k)}p&&Bie(p[1],o,e,l,s,a);var R=f.match(xie);R&&(o["!autofilter"]=Fie(R[0]));var C=[],j=f.match(hie);if(j)for(m=0;m!=j.length;++m)C[m]=_n(j[m].slice(j[m].indexOf('"')+1));var X=f.match(pie);X&&Nie(o,X,n);var K=f.match(vie);if(K&&(o["!margins"]=Cie(Ir(K[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Ur(l)),e.sheetRows>0&&o["!ref"]){var P=_n(o["!ref"]);e.sheetRows<=+P.e.r&&(P.e.r=e.sheetRows-1,P.e.r>l.e.r&&(P.e.r=l.e.r),P.e.r<P.s.r&&(P.s.r=P.e.r),P.e.c>l.e.c&&(P.e.c=l.e.c),P.e.c<P.s.c&&(P.s.c=P.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Ur(P))}return b.length>0&&(o["!cols"]=b),C.length>0&&(o["!merges"]=C),o}function bie(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Ur(t[r])+'"/>';return e+"</mergeCells>"}function y3(t,e,r,n){var i=Ir(t);r.Sheets[n]||(r.Sheets[n]={}),i.codeName&&(r.Sheets[n].CodeName=wn(Xn(i.codeName)))}function Eie(t,e,r,n,i){y3(t.slice(0,t.indexOf(">")),r,n,i)}function Sie(t,e,r,n,i){var s=!1,a={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}s=!0,a.codeName=qc(qn(l))}if(t&&t["!outline"]){var c={summaryBelow:1,summaryRight:1};t["!outline"].above&&(c.summaryBelow=0),t["!outline"].left&&(c.summaryRight=0),o=(o||"")+Bt("outlinePr",null,c)}!s&&!o||(i[i.length]=Bt("sheetPr",o,a))}var kie=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Tie=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Aie(t){var e={sheet:1};return kie.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),Tie.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=h3(t.password).toString(16).toUpperCase()),Bt("sheetProtection",null,e)}function Nie(t,e,r){for(var n=Array.isArray(t),i=0;i!=e.length;++i){var s=Ir(Xn(e[i]),!0);if(!s.ref)return;var a=((r||{})["!id"]||[])[s.id];a?(s.Target=a.Target,s.location&&(s.Target+="#"+wn(s.location))):(s.Target="#"+wn(s.location),a={Target:s.Target,TargetMode:"Internal"}),s.Rel=a,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=_n(s.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var f=Cr({c,r:l});n?(t[l]||(t[l]=[]),t[l][c]||(t[l][c]={t:"z",v:void 0}),t[l][c].l=s):(t[f]||(t[f]={t:"z",v:void 0}),t[f].l=s)}}}function Cie(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function Iie(t){return _d(t),Bt("pageMargins",null,t)}function Pie(t,e){for(var r=!1,n=0;n!=e.length;++n){var i=Ir(e[n],!0);i.hidden&&(i.hidden=mi(i.hidden));var s=parseInt(i.min,10)-1,a=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!r&&i.width&&(r=!0,d3(i.width)),xh(i);s<=a;)t[s++]=wi(i)}}function Rie(t,e){for(var r=["<cols>"],n,i=0;i!=e.length;++i)(n=e[i])&&(r[r.length]=Bt("col",null,Ty(i,n)));return r[r.length]="</cols>",r.join("")}function Fie(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function Lie(t,e,r,n){var i=typeof t.ref=="string"?t.ref:Ur(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,a=jo(i);a.s.r==a.e.r&&(a.e.r=jo(e["!ref"]).e.r,i=Ur(a));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Bt("autoFilter",null,{ref:i})}var Die=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Oie(t,e){e.Views||(e.Views=[{}]),(t.match(Die)||[]).forEach(function(r,n){var i=Ir(r);e.Views[n]||(e.Views[n]={}),+i.zoomScale&&(e.Views[n].zoom=+i.zoomScale),mi(i.rightToLeft)&&(e.Views[n].RTL=!0)})}function jie(t,e,r,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Bt("sheetViews",Bt("sheetView",null,i),{})}function Mie(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",s=t.t,a=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=rf[t.v];break;case"d":n&&n.cellDates?i=yi(t.v,-1).toISOString():(t=wi(t),t.t="n",i=""+(t.v=qs(yi(t.v)))),typeof t.z>"u"&&(t.z=Tr[14]);break;default:i=t.v;break}var o=Ta("v",qn(i)),l={r:e},c=Fh(n.cellXfs,t,n);switch(c!==0&&(l.s=c),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=Ta("v",""+v3(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=s&&(t.t=s,t.v=a),typeof t.f=="string"&&t.f){var f=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Bt("f",qn(t.f),f)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),Bt("c",o,l)}var Bie=(function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,s=Q1("v"),a=Q1("f");return function(l,c,f,p,g,m){for(var _=0,w="",b=[],k=[],R=0,C=0,j=0,X="",K,P,A=0,T=0,O,I,D=0,B=0,re=Array.isArray(m.CellXf),_e,Ce=[],we=[],ce=Array.isArray(c),H=[],te={},J=!1,N=!!f.sheetStubs,U=l.split(e),W=0,Y=U.length;W!=Y;++W){w=U[W].trim();var ae=w.length;if(ae!==0){var pe=0;e:for(_=0;_<ae;++_)switch(w[_]){case">":if(w[_-1]!="/"){++_;break e}if(f&&f.cellStyles){if(P=Ir(w.slice(pe,_),!0),A=P.r!=null?parseInt(P.r,10):A+1,T=-1,f.sheetRows&&f.sheetRows<A)continue;te={},J=!1,P.ht&&(J=!0,te.hpt=parseFloat(P.ht),te.hpx=Mp(te.hpt)),P.hidden=="1"&&(J=!0,te.hidden=!0),P.outlineLevel!=null&&(J=!0,te.level=+P.outlineLevel),J&&(H[A-1]=te)}break;case"<":pe=_;break}if(pe>=_)break;if(P=Ir(w.slice(pe,_),!0),A=P.r!=null?parseInt(P.r,10):A+1,T=-1,!(f.sheetRows&&f.sheetRows<A)){p.s.r>A-1&&(p.s.r=A-1),p.e.r<A-1&&(p.e.r=A-1),f&&f.cellStyles&&(te={},J=!1,P.ht&&(J=!0,te.hpt=parseFloat(P.ht),te.hpx=Mp(te.hpt)),P.hidden=="1"&&(J=!0,te.hidden=!0),P.outlineLevel!=null&&(J=!0,te.level=+P.outlineLevel),J&&(H[A-1]=te)),b=w.slice(_).split(t);for(var he=0;he!=b.length&&b[he].trim().charAt(0)=="<";++he);for(b=b.slice(he),_=0;_!=b.length;++_)if(w=b[_].trim(),w.length!==0){if(k=w.match(r),R=_,C=0,j=0,w="<c "+(w.slice(0,1)=="<"?">":"")+w,k!=null&&k.length===2){for(R=0,X=k[1],C=0;C!=X.length&&!((j=X.charCodeAt(C)-64)<1||j>26);++C)R=26*R+j;--R,T=R}else++T;for(C=0;C!=w.length&&w.charCodeAt(C)!==62;++C);if(++C,P=Ir(w.slice(0,C),!0),P.r||(P.r=Cr({r:A-1,c:T})),X=w.slice(C),K={t:""},(k=X.match(s))!=null&&k[1]!==""&&(K.v=wn(k[1])),f.cellFormula){if((k=X.match(a))!=null&&k[1]!==""){if(K.f=wn(Xn(k[1])).replace(/\r\n/g,`
`),f.xlfn||(K.f=NT(K.f)),k[0].indexOf('t="array"')>-1)K.F=(X.match(i)||[])[1],K.F.indexOf(":")>-1&&Ce.push([_n(K.F),K.F]);else if(k[0].indexOf('t="shared"')>-1){I=Ir(k[0]);var xe=wn(Xn(k[1]));f.xlfn||(xe=NT(xe)),we[parseInt(I.si,10)]=[I,xe,P.r]}}else(k=X.match(/<f[^>]*\/>/))&&(I=Ir(k[0]),we[I.si]&&(K.f=Dre(we[I.si][1],we[I.si][2],P.r)));var ke=Ui(P.r);for(C=0;C<Ce.length;++C)ke.r>=Ce[C][0].s.r&&ke.r<=Ce[C][0].e.r&&ke.c>=Ce[C][0].s.c&&ke.c<=Ce[C][0].e.c&&(K.F=Ce[C][1])}if(P.t==null&&K.v===void 0)if(K.f||K.F)K.v=0,K.t="n";else if(N)K.t="z";else continue;else K.t=P.t||"n";switch(p.s.c>T&&(p.s.c=T),p.e.c<T&&(p.e.c=T),K.t){case"n":if(K.v==""||K.v==null){if(!N)continue;K.t="z"}else K.v=parseFloat(K.v);break;case"s":if(typeof K.v>"u"){if(!N)continue;K.t="z"}else O=b1[parseInt(K.v,10)],K.v=O.t,K.r=O.r,f.cellHTML&&(K.h=O.h);break;case"str":K.t="s",K.v=K.v!=null?Xn(K.v):"",f.cellHTML&&(K.h=Qb(K.v));break;case"inlineStr":k=X.match(n),K.t="s",k!=null&&(O=f3(k[1]))?(K.v=O.t,f.cellHTML&&(K.h=O.h)):K.v="";break;case"b":K.v=mi(K.v);break;case"d":f.cellDates?K.v=yi(K.v,1):(K.v=qs(yi(K.v,1)),K.t="n");break;case"e":(!f||f.cellText!==!1)&&(K.w=K.v),K.v=NR[K.v];break}if(D=B=0,_e=null,re&&P.s!==void 0&&(_e=m.CellXf[P.s],_e!=null&&(_e.numFmtId!=null&&(D=_e.numFmtId),f.cellStyles&&_e.fillId!=null&&(B=_e.fillId))),k9(K,D,B,f,g,m),f.cellDates&&re&&K.t=="n"&&am(Tr[D])&&(K.t="d",K.v=by(K.v)),P.cm&&f.xlmeta){var Fe=(f.xlmeta.Cell||[])[+P.cm-1];Fe&&Fe.type=="XLDAPR"&&(K.D=!0)}if(ce){var oe=Ui(P.r);c[oe.r]||(c[oe.r]=[]),c[oe.r][oe.c]=K}else c[P.r]=K}}}}H.length>0&&(c["!rows"]=H)}})();function Vie(t,e,r,n){var i=[],s=[],a=_n(t["!ref"]),o="",l,c="",f=[],p=0,g=0,m=t["!rows"],_=Array.isArray(t),w={r:c},b,k=-1;for(g=a.s.c;g<=a.e.c;++g)f[g]=Vi(g);for(p=a.s.r;p<=a.e.r;++p){for(s=[],c=vs(p),g=a.s.c;g<=a.e.c;++g){l=f[g]+c;var R=_?(t[p]||[])[g]:t[l];R!==void 0&&(o=Mie(R,l,t,e))!=null&&s.push(o)}(s.length>0||m&&m[p])&&(w={r:c},m&&m[p]&&(b=m[p],b.hidden&&(w.hidden=1),k=-1,b.hpx?k=ig(b.hpx):b.hpt&&(k=b.hpt),k>-1&&(w.ht=k,w.customHeight=1),b.level&&(w.outlineLevel=b.level)),i[i.length]=Bt("row",s.join(""),w))}if(m)for(;p<m.length;++p)m&&m[p]&&(w={r:p+1},b=m[p],b.hidden&&(w.hidden=1),k=-1,b.hpx?k=ig(b.hpx):b.hpt&&(k=b.hpt),k>-1&&(w.ht=k,w.customHeight=1),b.level&&(w.outlineLevel=b.level),i[i.length]=Bt("row","",w));return i.join("")}function A9(t,e,r,n){var i=[ys,Bt("worksheet",null,{xmlns:Jd[0],"xmlns:r":zs.r})],s=r.SheetNames[t],a=0,o="",l=r.Sheets[s];l==null&&(l={});var c=l["!ref"]||"A1",f=_n(c);if(f.e.c>16383||f.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),c=Ur(f)}n||(n={}),l["!comments"]=[];var p=[];Sie(l,r,t,e,i),i[i.length]=Bt("dimension",null,{ref:c}),i[i.length]=jie(l,e,t,r),e.sheetFormat&&(i[i.length]=Bt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=Rie(l,l["!cols"])),i[a=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=Vie(l,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),l["!protect"]&&(i[i.length]=Aie(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=Lie(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=bie(l["!merges"]));var g=-1,m,_=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(w){w[1].Target&&(m={ref:w[0]},w[1].Target.charAt(0)!="#"&&(_=Un(n,-1,qn(w[1].Target).replace(/#.*$/,""),en.HLINK),m["r:id"]="rId"+_),(g=w[1].Target.indexOf("#"))>-1&&(m.location=qn(w[1].Target.slice(g+1))),w[1].Tooltip&&(m.tooltip=qn(w[1].Tooltip)),i[i.length]=Bt("hyperlink",null,m))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=Iie(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=Ta("ignoredErrors",Bt("ignoredError",null,{numberStoredAsText:1,sqref:c}))),p.length>0&&(_=Un(n,-1,"../drawings/drawing"+(t+1)+".xml",en.DRAW),i[i.length]=Bt("drawing",null,{"r:id":"rId"+_}),l["!drawing"]=p),l["!comments"].length>0&&(_=Un(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",en.VML),i[i.length]=Bt("legacyDrawing",null,{"r:id":"rId"+_}),l["!legacy"]=_),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function Uie(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=i/20),r}function zie(t,e,r){var n=mt(145),i=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;i.hpx?s=ig(i.hpx)*20:i.hpt&&(s=i.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),n.write_shift(1,a),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var c={r:t,c:0},f=0;f<16;++f)if(!(e.s.c>f+1<<10||e.e.c<f<<10)){for(var p=-1,g=-1,m=f<<10;m<f+1<<10;++m){c.c=m;var _=Array.isArray(r)?(r[c.r]||[])[c.c]:r[Cr(c)];_&&(p<0&&(p=m),g=m)}p<0||(++o,n.write_shift(4,p),n.write_shift(4,g))}var w=n.l;return n.l=l,n.write_shift(4,o),n.l=w,n.length>n.l?n.slice(0,n.l):n}function $ie(t,e,r,n){var i=zie(n,r,e);(i.length>17||(e["!rows"]||[])[n])&&bt(t,0,i)}var qie=r0,Hie=cm;function Wie(){}function Gie(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=YQ(t),r}function Kie(t,e,r){r==null&&(r=mt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var i=1;i<3;++i)r.write_shift(1,0);return yv({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),ER(t,r),r.slice(0,r.l)}function Xie(t){var e=Ul(t);return[e]}function Yie(t,e,r){return r==null&&(r=mt(8)),Zd(e,r)}function Qie(t){var e=e0(t);return[e]}function Jie(t,e,r){return r==null&&(r=mt(4)),t0(e,r)}function Zie(t){var e=Ul(t),r=t.read_shift(1);return[e,r,"b"]}function ese(t,e,r){return r==null&&(r=mt(9)),Zd(e,r),r.write_shift(1,t.v?1:0),r}function tse(t){var e=e0(t),r=t.read_shift(1);return[e,r,"b"]}function rse(t,e,r){return r==null&&(r=mt(5)),t0(e,r),r.write_shift(1,t.v?1:0),r}function nse(t){var e=Ul(t),r=t.read_shift(1);return[e,r,"e"]}function ise(t,e,r){return r==null&&(r=mt(9)),Zd(e,r),r.write_shift(1,t.v),r}function sse(t){var e=e0(t),r=t.read_shift(1);return[e,r,"e"]}function ase(t,e,r){return r==null&&(r=mt(8)),t0(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function ose(t){var e=Ul(t),r=t.read_shift(4);return[e,r,"s"]}function lse(t,e,r){return r==null&&(r=mt(12)),Zd(e,r),r.write_shift(4,e.v),r}function cse(t){var e=e0(t),r=t.read_shift(4);return[e,r,"s"]}function use(t,e,r){return r==null&&(r=mt(8)),t0(e,r),r.write_shift(4,e.v),r}function fse(t){var e=Ul(t),r=io(t);return[e,r,"n"]}function hse(t,e,r){return r==null&&(r=mt(16)),Zd(e,r),Ud(t.v,r),r}function N9(t){var e=e0(t),r=io(t);return[e,r,"n"]}function dse(t,e,r){return r==null&&(r=mt(12)),t0(e,r),Ud(t.v,r),r}function pse(t){var e=Ul(t),r=a3(t);return[e,r,"n"]}function mse(t,e,r){return r==null&&(r=mt(12)),Zd(e,r),SR(t.v,r),r}function gse(t){var e=e0(t),r=a3(t);return[e,r,"n"]}function xse(t,e,r){return r==null&&(r=mt(8)),t0(e,r),SR(t.v,r),r}function vse(t){var e=Ul(t),r=n3(t);return[e,r,"is"]}function yse(t){var e=Ul(t),r=oo(t);return[e,r,"str"]}function wse(t,e,r){return r==null&&(r=mt(12+4*t.v.length)),Zd(e,r),aa(t.v,r),r.length>r.l?r.slice(0,r.l):r}function _se(t){var e=e0(t),r=oo(t);return[e,r,"str"]}function bse(t,e,r){return r==null&&(r=mt(8+4*t.v.length)),t0(e,r),aa(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Ese(t,e,r){var n=t.l+e,i=Ul(t);i.r=r["!row"];var s=t.read_shift(1),a=[i,s,"b"];if(r.cellFormula){t.l+=2;var o=ky(t,n-t.l,r);a[3]=to(o,null,i,r.supbooks,r)}else t.l=n;return a}function Sse(t,e,r){var n=t.l+e,i=Ul(t);i.r=r["!row"];var s=t.read_shift(1),a=[i,s,"e"];if(r.cellFormula){t.l+=2;var o=ky(t,n-t.l,r);a[3]=to(o,null,i,r.supbooks,r)}else t.l=n;return a}function kse(t,e,r){var n=t.l+e,i=Ul(t);i.r=r["!row"];var s=io(t),a=[i,s,"n"];if(r.cellFormula){t.l+=2;var o=ky(t,n-t.l,r);a[3]=to(o,null,i,r.supbooks,r)}else t.l=n;return a}function Tse(t,e,r){var n=t.l+e,i=Ul(t);i.r=r["!row"];var s=oo(t),a=[i,s,"str"];if(r.cellFormula){t.l+=2;var o=ky(t,n-t.l,r);a[3]=to(o,null,i,r.supbooks,r)}else t.l=n;return a}var Ase=r0,Nse=cm;function Cse(t,e){return e==null&&(e=mt(4)),e.write_shift(4,t),e}function Ise(t,e){var r=t.l+e,n=r0(t),i=i3(t),s=oo(t),a=oo(t),o=oo(t);t.l=r;var l={rfx:n,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}function Pse(t,e){var r=mt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));cm({s:Ui(t[0]),e:Ui(t[0])},r),s3("rId"+e,r);var n=t[1].Target.indexOf("#"),i=n==-1?"":t[1].Target.slice(n+1);return aa(i||"",r),aa(t[1].Tooltip||"",r),aa("",r),r.slice(0,r.l)}function Rse(){}function Fse(t,e,r){var n=t.l+e,i=kR(t),s=t.read_shift(1),a=[i];if(a[2]=s,r.cellFormula){var o=nie(t,n-t.l,r);a[1]=o}else t.l=n;return a}function Lse(t,e,r){var n=t.l+e,i=r0(t),s=[i];if(r.cellFormula){var a=sie(t,n-t.l,r);s[1]=a,t.l=n}else t.l=n;return s}function Dse(t,e,r){r==null&&(r=mt(18));var n=Ty(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),r.write_shift(2,i),r}var C9=["left","right","top","bottom","header","footer"];function Ose(t){var e={};return C9.forEach(function(r){e[r]=io(t)}),e}function jse(t,e){return e==null&&(e=mt(48)),_d(t),C9.forEach(function(r){Ud(t[r],e)}),e}function Mse(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Bse(t,e,r){r==null&&(r=mt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Vse(t){var e=mt(24);return e.write_shift(4,4),e.write_shift(4,1),cm(t,e),e}function Use(t,e){return e==null&&(e=mt(66)),e.write_shift(2,t.password?h3(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function zse(){}function $se(){}function qse(t,e,r,n,i,s,a){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},p=!1,g=!1,m,_,w,b,k,R,C,j,X,K=[];o.biff=12,o["!row"]=0;var P=0,A=!1,T=[],O={},I=o.supbooks||i.supbooks||[[]];if(I.sharedf=O,I.arrayf=T,I.SheetNames=i.SheetNames||i.Sheets.map(function(ce){return ce.name}),!o.supbooks&&(o.supbooks=I,i.Names))for(var D=0;D<i.Names.length;++D)I[0][D+1]=i.Names[D];var B=[],re=[],_e=!1;sg[16]={n:"BrtShortReal",f:N9};var Ce;if(tf(t,function(H,te,J){if(!g)switch(J){case 148:c=H;break;case 0:m=H,o.sheetRows&&o.sheetRows<=m.r&&(g=!0),j=vs(b=m.r),o["!row"]=m.r,(H.hidden||H.hpt||H.level!=null)&&(H.hpt&&(H.hpx=Mp(H.hpt)),re[H.r]=H);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(_={t:H[2]},H[2]){case"n":_.v=H[1];break;case"s":C=b1[H[1]],_.v=C.t,_.r=C.r;break;case"b":_.v=!!H[1];break;case"e":_.v=H[1],o.cellText!==!1&&(_.w=rf[_.v]);break;case"str":_.t="s",_.v=H[1];break;case"is":_.t="s",_.v=H[1].t;break}if((w=a.CellXf[H[0].iStyleRef])&&k9(_,w.numFmtId,null,o,s,a),k=H[0].c==-1?k+1:H[0].c,o.dense?(l[b]||(l[b]=[]),l[b][k]=_):l[Vi(k)+j]=_,o.cellFormula){for(A=!1,P=0;P<T.length;++P){var N=T[P];m.r>=N[0].s.r&&m.r<=N[0].e.r&&k>=N[0].s.c&&k<=N[0].e.c&&(_.F=Ur(N[0]),A=!0)}!A&&H.length>3&&(_.f=H[3])}if(f.s.r>m.r&&(f.s.r=m.r),f.s.c>k&&(f.s.c=k),f.e.r<m.r&&(f.e.r=m.r),f.e.c<k&&(f.e.c=k),o.cellDates&&w&&_.t=="n"&&am(Tr[w.numFmtId])){var U=pd(_.v);U&&(_.t="d",_.v=new Date(U.y,U.m-1,U.d,U.H,U.M,U.S,U.u))}Ce&&(Ce.type=="XLDAPR"&&(_.D=!0),Ce=void 0);break;case 1:case 12:if(!o.sheetStubs||p)break;_={t:"z",v:void 0},k=H[0].c==-1?k+1:H[0].c,o.dense?(l[b]||(l[b]=[]),l[b][k]=_):l[Vi(k)+j]=_,f.s.r>m.r&&(f.s.r=m.r),f.s.c>k&&(f.s.c=k),f.e.r<m.r&&(f.e.r=m.r),f.e.c<k&&(f.e.c=k),Ce&&(Ce.type=="XLDAPR"&&(_.D=!0),Ce=void 0);break;case 176:K.push(H);break;case 49:Ce=((o.xlmeta||{}).Cell||[])[H-1];break;case 494:var W=n["!id"][H.relId];for(W?(H.Target=W.Target,H.loc&&(H.Target+="#"+H.loc),H.Rel=W):H.relId==""&&(H.Target="#"+H.loc),b=H.rfx.s.r;b<=H.rfx.e.r;++b)for(k=H.rfx.s.c;k<=H.rfx.e.c;++k)o.dense?(l[b]||(l[b]=[]),l[b][k]||(l[b][k]={t:"z",v:void 0}),l[b][k].l=H):(R=Cr({c:k,r:b}),l[R]||(l[R]={t:"z",v:void 0}),l[R].l=H);break;case 426:if(!o.cellFormula)break;T.push(H),X=o.dense?l[b][k]:l[Vi(k)+j],X.f=to(H[1],f,{r:m.r,c:k},I,o),X.F=Ur(H[0]);break;case 427:if(!o.cellFormula)break;O[Cr(H[0].s)]=H[1],X=o.dense?l[b][k]:l[Vi(k)+j],X.f=to(H[1],f,{r:m.r,c:k},I,o);break;case 60:if(!o.cellStyles)break;for(;H.e>=H.s;)B[H.e--]={width:H.w/256,hidden:!!(H.flags&1),level:H.level},_e||(_e=!0,d3(H.w/256)),xh(B[H.e+1]);break;case 161:l["!autofilter"]={ref:Ur(H)};break;case 476:l["!margins"]=H;break;case 147:i.Sheets[r]||(i.Sheets[r]={}),H.name&&(i.Sheets[r].CodeName=H.name),(H.above||H.left)&&(l["!outline"]={above:H.above,left:H.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),H.RTL&&(i.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:p=!0;break;case 36:p=!1;break;case 37:p=!0;break;case 38:p=!1;break;default:if(!te.T){if(!p||o.WTF)throw new Error("Unexpected record 0x"+J.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(f.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=Ur(c||f)),o.sheetRows&&l["!ref"]){var we=_n(l["!ref"]);o.sheetRows<=+we.e.r&&(we.e.r=o.sheetRows-1,we.e.r>f.e.r&&(we.e.r=f.e.r),we.e.r<we.s.r&&(we.s.r=we.e.r),we.e.c>f.e.c&&(we.e.c=f.e.c),we.e.c<we.s.c&&(we.s.c=we.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Ur(we))}return K.length>0&&(l["!merges"]=K),B.length>0&&(l["!cols"]=B),re.length>0&&(l["!rows"]=re),l}function Hse(t,e,r,n,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=wi(e),e.z=e.z||Tr[14],e.v=qs(yi(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=Fh(i.cellXfs,e,i),e.l&&s["!links"].push([Cr(l),e.l]),e.c&&s["!comments"].push([Cr(l),e.c]),e.t){case"s":case"str":return i.bookSST?(o=v3(i.Strings,e.v,i.revStrings),l.t="s",l.v=o,a?bt(t,18,use(e,l)):bt(t,7,lse(e,l))):(l.t="str",a?bt(t,17,bse(e,l)):bt(t,6,wse(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?bt(t,13,xse(e,l)):bt(t,2,mse(e,l)):a?bt(t,16,dse(e,l)):bt(t,5,hse(e,l)),!0;case"b":return l.t="b",a?bt(t,15,rse(e,l)):bt(t,4,ese(e,l)),!0;case"e":return l.t="e",a?bt(t,14,ase(e,l)):bt(t,3,ise(e,l)),!0}return a?bt(t,12,Jie(e,l)):bt(t,1,Yie(e,l)),!0}function Wse(t,e,r,n){var i=_n(e["!ref"]||"A1"),s,a="",o=[];bt(t,145);var l=Array.isArray(e),c=i.e.r;e["!rows"]&&(c=Math.max(i.e.r,e["!rows"].length-1));for(var f=i.s.r;f<=c;++f){a=vs(f),$ie(t,e,i,f);var p=!1;if(f<=i.e.r)for(var g=i.s.c;g<=i.e.c;++g){f===i.s.r&&(o[g]=Vi(g)),s=o[g]+a;var m=l?(e[f]||[])[g]:e[s];if(!m){p=!1;continue}p=Hse(t,m,f,g,n,e,p)}}bt(t,146)}function Gse(t,e){!e||!e["!merges"]||(bt(t,177,Cse(e["!merges"].length)),e["!merges"].forEach(function(r){bt(t,176,Nse(r))}),bt(t,178))}function Kse(t,e){!e||!e["!cols"]||(bt(t,390),e["!cols"].forEach(function(r,n){r&&bt(t,60,Dse(n,r))}),bt(t,391))}function Xse(t,e){!e||!e["!ref"]||(bt(t,648),bt(t,649,Vse(_n(e["!ref"]))),bt(t,650))}function Yse(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var i=Un(r,-1,n[1].Target.replace(/#.*$/,""),en.HLINK);bt(t,494,Pse(n,i))}}),delete e["!links"]}function Qse(t,e,r,n){if(e["!comments"].length>0){var i=Un(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",en.VML);bt(t,551,s3("rId"+i)),e["!legacy"]=i}}function Jse(t,e,r,n){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Ur(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,o=jo(s);o.s.r==o.e.r&&(o.e.r=jo(e["!ref"]).e.r,s=Ur(o));for(var l=0;l<a.length;++l){var c=a[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),bt(t,161,cm(_n(s))),bt(t,162)}}function Zse(t,e,r){bt(t,133),bt(t,137,Bse(e,r)),bt(t,138),bt(t,134)}function eae(t,e){e["!protect"]&&bt(t,535,Use(e["!protect"]))}function tae(t,e,r,n){var i=Oo(),s=r.SheetNames[t],a=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=_n(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],bt(i,129),(r.vbaraw||a["!outline"])&&bt(i,147,Kie(o,a["!outline"])),bt(i,148,Hie(l)),Zse(i,a,r.Workbook),Kse(i,a),Wse(i,a,t,e),eae(i,a),Jse(i,a,r,t),Gse(i,a),Yse(i,a,n),a["!margins"]&&bt(i,476,jse(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Xse(i,a),Qse(i,a,t,n),bt(i,130),i.end()}function rae(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var a=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(e[+a[1]]=r?+a[2]:a[2])});var i=wn((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,i,n]}function nae(t,e,r,n,i,s){var a=s||{"!type":"chart"};if(!t)return s;var o=0,l=0,c="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(p){var g=rae(p);f.s.r=f.s.c=0,f.e.c=o,c=Vi(o),g[0].forEach(function(m,_){a[c+vs(_)]={t:"n",v:m,z:g[1]},l=_}),f.e.r<l&&(f.e.r=l),++o}),o>0&&(a["!ref"]=Ur(f)),a}function iae(t,e,r,n,i){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a,o=t.match(T9);return o&&y3(o[0],s,i,r),(a=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=a[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function sae(t,e){t.l+=10;var r=oo(t);return{name:r}}function aae(t,e,r,n,i){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a=!1;return tf(t,function(l,c,f){switch(f){case 550:s["!rel"]=l;break;case 651:i.Sheets[r]||(i.Sheets[r]={}),l.name&&(i.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!a||e.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var w3=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],oae=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],lae=[],cae=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function FT(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],i=0;i!=e.length;++i){var s=e[i];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=mi(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function LT(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=mi(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function I9(t){LT(t.WBProps,w3),LT(t.CalcPr,cae),FT(t.WBView,oae),FT(t.Sheets,lae),fp.date1904=mi(t.WBProps.date1904)}function uae(t){return!t.Workbook||!t.Workbook.WBProps?"false":mi(t.Workbook.WBProps.date1904)?"true":"false"}var fae="][*?/\\".split("");function P9(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return fae.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function hae(t,e,r){t.forEach(function(n,i){P9(n);for(var s=0;s<i;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var a=e&&e[i]&&e[i].CodeName||n;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function dae(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];hae(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)uie(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var pae=/<\w+:workbook/;function mae(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,i="xmlns",s={},a=0;if(t.replace(co,function(l,c){var f=Ir(l);switch(ou(f[0])){case"<?xml":break;case"<workbook":l.match(pae)&&(i="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=f[i];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":w3.forEach(function(p){if(f[p[0]]!=null)switch(p[2]){case"bool":r.WBProps[p[0]]=mi(f[p[0]]);break;case"int":r.WBProps[p[0]]=parseInt(f[p[0]],10);break;default:r.WBProps[p[0]]=f[p[0]]}}),f.codeName&&(r.WBProps.CodeName=Xn(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=wn(Xn(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Xn(f.name),f.comment&&(s.Comment=f.comment),f.localSheetId&&(s.Sheet=+f.localSheetId),mi(f.hidden||"0")&&(s.Hidden=!0),a=c+l.length;break;case"</definedName>":s.Ref=wn(Xn(t.slice(a,c))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return l}),Jd.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return I9(r),r}function R9(t){var e=[ys];e[e.length]=Bt("workbook",null,{xmlns:Jd[0],"xmlns:r":zs.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(w3.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Bt("workbookPr",null,n);var i=t.Workbook&&t.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var a={name:qn(t.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=Bt("sheet",null,a)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Bt("definedName",qn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function gae(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=C_(t),r.name=oo(t),r}function xae(t,e){return e||(e=mt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),s3(t.strRelID,e),aa(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function vae(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var i=e>8?oo(t):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function yae(t,e){e||(e=mt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),ER(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function wae(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function _ae(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var i=t.read_shift(4),s=QQ(t),a=iie(t,0,r),o=i3(t);t.l=n;var l={Name:s,Ptg:a};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function bae(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],i=!1;e||(e={}),e.biff=12;var s=[],a=[[]];return a.SheetNames=[],a.XTI=[],sg[16]={n:"BrtFRTArchID$",f:wae},tf(t,function(l,c,f){switch(f){case 156:a.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=to(l.Ptg,null,null,a,e),delete e.SID,delete l.Ptg,s.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([f,l]):a[0]=[f,l],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(l),a.XTI=a.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(f),i=!0;break;case 36:n.pop(),i=!1;break;case 37:n.push(f),i=!0;break;case 38:n.pop(),i=!1;break;case 16:break;default:if(!c.T){if(!i||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},e),I9(r),r.Names=s,r.supbooks=a,r}function Eae(t,e){bt(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,i={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};bt(t,156,xae(i))}bt(t,144)}function Sae(t,e){e||(e=mt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return aa("SheetJS",e),aa(hv.version,e),aa(hv.version,e),aa("7262",e),e.length>e.l?e.slice(0,e.l):e}function kae(t,e){e||(e=mt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function Tae(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,i=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&i==-1?i=n:r[n].Hidden==1&&s==-1&&(s=n);s>i||(bt(t,135),bt(t,158,kae(i)),bt(t,136))}}function Aae(t,e){var r=Oo();return bt(r,131),bt(r,128,Sae()),bt(r,153,yae(t.Workbook&&t.Workbook.WBProps||null)),Tae(r,t),Eae(r,t),bt(r,132),r.end()}function Nae(t,e,r){return e.slice(-4)===".bin"?bae(t,r):mae(t,r)}function Cae(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?qse(t,n,r,i,s,a,o):_ie(t,n,r,i,s,a,o)}function Iae(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?aae(t,n,r,i,s):iae(t,n,r,i,s)}function Pae(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?Fre():Lre()}function Rae(t,e,r,n,i,s,a,o){return e.slice(-4)===".bin"?Pre():Rre()}function Fae(t,e,r,n){return e.slice(-4)===".bin"?Nte(t,r,n):gte(t,r,n)}function Lae(t,e,r){return h9(t,r)}function Dae(t,e,r){return e.slice(-4)===".bin"?Dee(t,r):Ree(t,r)}function Oae(t,e,r){return e.slice(-4)===".bin"?Tre(t,r):xre(t,r)}function jae(t,e,r){return e.slice(-4)===".bin"?pre(t):hre(t)}function Mae(t,e,r,n){return r.slice(-4)===".bin"?mre(t,e,r,n):void 0}function Bae(t,e,r){return e.slice(-4)===".bin"?cre(t,e,r):fre(t,e,r)}function Vae(t,e,r){return(e.slice(-4)===".bin"?Aae:R9)(t)}function Uae(t,e,r,n,i){return(e.slice(-4)===".bin"?tae:A9)(t,r,n,i)}function zae(t,e,r){return(e.slice(-4)===".bin"?Mte:u9)(t,r)}function $ae(t,e,r){return(e.slice(-4)===".bin"?Mee:r9)(t,r)}function qae(t,e,r){return(e.slice(-4)===".bin"?Are:m9)(t)}function Hae(t){return(t.slice(-4)===".bin"?ure:d9)()}var F9=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,L9=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function ic(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var i=t.match(F9),s,a,o,l;if(i)for(l=0;l!=i.length;++l)s=i[l].match(L9),(a=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(a+1),n[o]=s[2].slice(1,s[2].length-1));return n}function Wae(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(F9),i,s,a,o;if(n)for(o=0;o!=n.length;++o)i=n[o].match(L9),(s=i[1].indexOf(":"))===-1?r[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?a="xmlns"+i[1].slice(6):a=i[1].slice(s+1),r[a]=i[2].slice(1,i[2].length-1));return r}var S1;function Gae(t,e){var r=S1[t]||wn(t);return r==="General"?Bd(e):Ol(r,e)}function Kae(t,e,r,n){var i=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=mi(n);break;case"i2":case"int":i=parseInt(n,10);break;case"r4":case"float":i=parseFloat(n);break;case"date":case"dateTime.tz":i=yi(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[wn(e)]=i}function Xae(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||rf[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Y1(t.v):t.w=Bd(t.v):t.w=Gae(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=S1[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&am(n)){var i=pd(t.v);i&&(t.t="d",t.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(s){if(r.WTF)throw s}}}function Yae(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=lte[n.Pattern]||n.Pattern)}t[e.ID]=e}function Qae(t,e,r,n,i,s,a,o,l,c){var f="General",p=n.StyleID,g={};c=c||{};var m=[],_=0;for(p===void 0&&o&&(p=o.StyleID),p===void 0&&a&&(p=a.StyleID);s[p]!==void 0&&(s[p].nf&&(f=s[p].nf),s[p].Interior&&m.push(s[p].Interior),!!s[p].Parent);)p=s[p].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=mi(t);break;case"String":n.t="s",n.r=Qk(wn(t)),n.v=t.indexOf("<")>-1?wn(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(yi(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=wn(t):n.v<60&&(n.v=n.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=NR[t],c.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=Qk(e||t));break}if(Xae(n,f,c),c.cellFormula!==!1)if(n.Formula){var w=wn(n.Formula);w.charCodeAt(0)==61&&(w=w.slice(1)),n.f=up(w,i),delete n.Formula,n.ArrayRange=="RC"?n.F=up("RC:RC",i):n.ArrayRange&&(n.F=up(n.ArrayRange,i),l.push([_n(n.F),n.F]))}else for(_=0;_<l.length;++_)i.r>=l[_][0].s.r&&i.r<=l[_][0].e.r&&i.c>=l[_][0].s.c&&i.c<=l[_][0].e.c&&(n.F=l[_][1]);c.cellStyles&&(m.forEach(function(b){!g.patternType&&b.patternType&&(g.patternType=b.patternType)}),n.s=g),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Jae(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function s5(t,e){var r=e||{};om();var n=s1(Jb(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Xn(n));var i=n.slice(0,1024).toLowerCase(),s=!1;if(i=i.replace(/".*?"/g,""),(i.indexOf(">")&1023)>Math.min(i.indexOf(",")&1023,i.indexOf(";")&1023)){var a=wi(r);return a.type="string",jp.to_workbook(n,a)}if(i.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(lt){i.indexOf("<"+lt)>=0&&(s=!0)}),s)return joe(n,r);S1={"General Number":"General","General Date":Tr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Tr[15],"Short Date":Tr[14],"Long Time":Tr[19],"Medium Time":Tr[18],"Short Time":Tr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Tr[2],Standard:Tr[4],Percent:Tr[10],Scientific:Tr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,f={},p=[],g=r.dense?[]:{},m="",_={},w={},b=ic('<Data ss:Type="String">'),k=0,R=0,C=0,j={s:{r:2e6,c:2e6},e:{r:0,c:0}},X={},K={},P="",A=0,T=[],O={},I={},D=0,B=[],re=[],_e={},Ce=[],we,ce=!1,H=[],te=[],J={},N=0,U=0,W={Sheets:[],WBProps:{date1904:!1}},Y={};Z1.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ae="";o=Z1.exec(n);)switch(o[3]=(ae=o[3]).toLowerCase()){case"data":if(ae=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?Qae(n.slice(k,o.index),P,b,l[l.length-1][0]=="comment"?_e:_,{c:R,r:C},X,Ce[R],w,H,r):(P="",b=ic(o[0]),k=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(re.length>0&&(_.c=re),(!r.sheetRows||r.sheetRows>C)&&_.v!==void 0&&(r.dense?(g[C]||(g[C]=[]),g[C][R]=_):g[Vi(R)+vs(C)]=_),_.HRef&&(_.l={Target:wn(_.HRef)},_.HRefScreenTip&&(_.l.Tooltip=_.HRefScreenTip),delete _.HRef,delete _.HRefScreenTip),(_.MergeAcross||_.MergeDown)&&(N=R+(parseInt(_.MergeAcross,10)|0),U=C+(parseInt(_.MergeDown,10)|0),T.push({s:{c:R,r:C},e:{c:N,r:U}})),!r.sheetStubs)_.MergeAcross?R=N+1:++R;else if(_.MergeAcross||_.MergeDown){for(var pe=R;pe<=N;++pe)for(var he=C;he<=U;++he)(pe>R||he>C)&&(r.dense?(g[he]||(g[he]=[]),g[he][pe]={t:"z"}):g[Vi(pe)+vs(he)]={t:"z"});R=N+1}else++R;else _=Wae(o[0]),_.Index&&(R=+_.Index-1),R<j.s.c&&(j.s.c=R),R>j.e.c&&(j.e.c=R),o[0].slice(-2)==="/>"&&++R,re=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(C<j.s.r&&(j.s.r=C),C>j.e.r&&(j.e.r=C),o[0].slice(-2)==="/>"&&(w=ic(o[0]),w.Index&&(C=+w.Index-1)),R=0,++C):(w=ic(o[0]),w.Index&&(C=+w.Index-1),J={},(w.AutoFitHeight=="0"||w.Height)&&(J.hpx=parseInt(w.Height,10),J.hpt=ig(J.hpx),te[C]=J),w.Hidden=="1"&&(J.hidden=!0,te[C]=J));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));p.push(m),j.s.r<=j.e.r&&j.s.c<=j.e.c&&(g["!ref"]=Ur(j),r.sheetRows&&r.sheetRows<=j.e.r&&(g["!fullref"]=g["!ref"],j.e.r=r.sheetRows-1,g["!ref"]=Ur(j))),T.length&&(g["!merges"]=T),Ce.length>0&&(g["!cols"]=Ce),te.length>0&&(g["!rows"]=te),f[m]=g}else j={s:{r:2e6,c:2e6},e:{r:0,c:0}},C=R=0,l.push([o[3],!1]),c=ic(o[0]),m=wn(c.Name),g=r.dense?[]:{},T=[],H=[],te=[],Y={name:m,Hidden:0},W.Sheets.push(Y);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),Ce=[],ce=!1}break;case"style":o[1]==="/"?Yae(X,K,r):K=ic(o[0]);break;case"numberformat":K.nf=wn(ic(o[0]).Format||"General"),S1[K.nf]&&(K.nf=S1[K.nf]);for(var xe=0;xe!=392&&Tr[xe]!=K.nf;++xe);if(xe==392){for(xe=57;xe!=392;++xe)if(Tr[xe]==null){Bu(K.nf,xe);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(we=ic(o[0]),we.Hidden&&(we.hidden=!0,delete we.Hidden),we.Width&&(we.wpx=parseInt(we.Width,10)),!ce&&we.wpx>10){ce=!0,no=l9;for(var ke=0;ke<Ce.length;++ke)Ce[ke]&&xh(Ce[ke])}ce&&xh(we),Ce[we.Index-1||Ce.length]=we;for(var Fe=0;Fe<+we.Span;++Fe)Ce[Ce.length]=wi(we);break;case"namedrange":if(o[1]==="/")break;W.Names||(W.Names=[]);var oe=Ir(o[0]),Ze={Name:oe.Name,Ref:up(oe.RefersTo.slice(1),{r:0,c:0})};W.Sheets.length>0&&(Ze.Sheet=W.Sheets.length-1),W.Names.push(Ze);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?P+=n.slice(A,o.index):A=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;K.Interior=ic(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?bJ(O,ae,n.slice(D,o.index)):D=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));Jae(_e),re.push(_e)}else l.push([o[3],!1]),c=ic(o[0]),_e={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Re=ic(o[0]);g["!autofilter"]={ref:up(Re.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return BT(n,r);var fe=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:fe=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:fe=!1}break;case"excelworkbook":switch(o[3]){case"date1904":W.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:fe=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:fe=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(D,o.index)){case"SheetHidden":Y.Hidden=1;break;case"SheetVeryHidden":Y.Hidden=2;break}else D=o.index+o[0].length;break;case"header":g["!margins"]||_d(g["!margins"]={},"xlml"),isNaN(+Ir(o[0]).Margin)||(g["!margins"].header=+Ir(o[0]).Margin);break;case"footer":g["!margins"]||_d(g["!margins"]={},"xlml"),isNaN(+Ir(o[0]).Margin)||(g["!margins"].footer=+Ir(o[0]).Margin);break;case"pagemargins":var ut=Ir(o[0]);g["!margins"]||_d(g["!margins"]={},"xlml"),isNaN(+ut.Top)||(g["!margins"].top=+ut.Top),isNaN(+ut.Left)||(g["!margins"].left=+ut.Left),isNaN(+ut.Right)||(g["!margins"].right=+ut.Right),isNaN(+ut.Bottom)||(g["!margins"].bottom=+ut.Bottom);break;case"displayrighttoleft":W.Views||(W.Views=[]),W.Views[0]||(W.Views[0]={}),W.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":g["!outline"]||(g["!outline"]={}),g["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":g["!outline"]||(g["!outline"]={}),g["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:fe=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:fe=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:fe=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:fe=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:fe=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:fe=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:fe=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:fe=!1}break;case"smarttags":break;default:fe=!1;break}if(fe||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Kae(I,ae,B,n.slice(D,o.index)):(B=o,D=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var rt={};return!r.bookSheets&&!r.bookProps&&(rt.Sheets=f),rt.SheetNames=p,rt.Workbook=W,rt.SSF=wi(Tr),rt.Props=O,rt.Custprops=I,rt}function O_(t,e){switch(b3(e=e||{}),e.type||"base64"){case"base64":return s5(ul(t),e);case"binary":case"buffer":case"file":return s5(t,e);case"array":return s5(Ph(t),e)}}function Zae(t,e){var r=[];return t.Props&&r.push(EJ(t.Props,e)),t.Custprops&&r.push(SJ(t.Props,t.Custprops)),r.join("")}function eoe(){return""}function toe(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,i){var s=[];s.push(Bt("NumberFormat",null,{"ss:Format":qn(Tr[n.numFmtId])}));var a={"ss:ID":"s"+(21+i)};r.push(Bt("Style",s.join(""),a))}),Bt("Styles",r.join(""))}function D9(t){return Bt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+g3(t.Ref,{r:0,c:0})})}function roe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var i=e[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||r.push(D9(i)))}return Bt("Names",r.join(""))}function noe(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(D9(o)))}return s.join("")}function ioe(t,e,r,n){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(Bt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(Bt("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(Bt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)i.push(Bt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(Ta("ProtectContents","True")),t["!protect"].objects&&i.push(Ta("ProtectObjects","True")),t["!protect"].scenarios&&i.push(Ta("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(Ta("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(Ta("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){t["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":Bt("WorksheetOptions",i.join(""),{xmlns:tl.x})}function soe(t){return t.map(function(e){var r=TQ(e.t||""),n=Bt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Bt("Comment",n,{"ss:Author":e.a})}).join("")}function aoe(t,e,r,n,i,s,a){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+qn(g3(t.f,a))),t.F&&t.F.slice(0,e.length)==e){var l=Ui(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=qn(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=qn(t.l.Tooltip))),r["!merges"])for(var c=r["!merges"],f=0;f!=c.length;++f)c[f].s.c!=a.c||c[f].s.r!=a.r||(c[f].e.c>c[f].s.c&&(o["ss:MergeAcross"]=c[f].e.c-c[f].s.c),c[f].e.r>c[f].s.r&&(o["ss:MergeDown"]=c[f].e.r-c[f].s.r));var p="",g="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":p="Number",g=String(t.v);break;case"b":p="Boolean",g=t.v?"1":"0";break;case"e":p="Error",g=rf[t.v];break;case"d":p="DateTime",g=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Tr[14]);break;case"s":p="String",g=kQ(t.v||"");break}var m=Fh(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+m),o["ss:Index"]=a.c+1;var _=t.v!=null?g:"",w=t.t=="z"?"":'<Data ss:Type="'+p+'">'+_+"</Data>";return(t.c||[]).length>0&&(w+=soe(t.c)),Bt("Cell",w,o)}function ooe(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Mp(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function loe(t,e,r,n){if(!t["!ref"])return"";var i=_n(t["!ref"]),s=t["!merges"]||[],a=0,o=[];t["!cols"]&&t["!cols"].forEach(function(b,k){xh(b);var R=!!b.width,C=Ty(k,b),j={"ss:Index":k+1};R&&(j["ss:Width"]=rg(C.width)),b.hidden&&(j["ss:Hidden"]="1"),o.push(Bt("Column",null,j))});for(var l=Array.isArray(t),c=i.s.r;c<=i.e.r;++c){for(var f=[ooe(c,(t["!rows"]||[])[c])],p=i.s.c;p<=i.e.c;++p){var g=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>p)&&!(s[a].s.r>c)&&!(s[a].e.c<p)&&!(s[a].e.r<c)){(s[a].s.c!=p||s[a].s.r!=c)&&(g=!0);break}if(!g){var m={r:c,c:p},_=Cr(m),w=l?(t[c]||[])[p]:t[_];f.push(aoe(w,_,t,e,r,n,m))}}f.push("</Row>"),f.length>2&&o.push(f.join(""))}return o.join("")}function coe(t,e,r){var n=[],i=r.SheetNames[t],s=r.Sheets[i],a=s?noe(s,e,t,r):"";return a.length>0&&n.push("<Names>"+a+"</Names>"),a=s?loe(s,e,t,r):"",a.length>0&&n.push("<Table>"+a+"</Table>"),n.push(ioe(s,e,t,r)),n.join("")}function uoe(t,e){e||(e={}),t.SSF||(t.SSF=wi(Tr)),t.SSF&&(om(),yy(t.SSF),e.revssf=_y(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Fh(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Zae(t,e)),r.push(eoe()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Bt("Worksheet",coe(n,e,t),{"ss:Name":qn(t.SheetNames[n])}));return r[2]=toe(t,e),r[3]=roe(t),ys+Bt("Workbook",r.join(""),{xmlns:tl.ss,"xmlns:o":tl.o,"xmlns:x":tl.x,"xmlns:ss":tl.ss,"xmlns:dt":tl.dt,"xmlns:html":tl.html})}function foe(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=rJ(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=nJ(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var hoe=[60,1084,2066,2165,2175];function doe(t,e,r,n,i){var s=n,a=[],o=r.slice(r.l,r.l+s);if(i&&i.enc&&i.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:i.enc.insitu(o)}a.push(o),r.l+=s;for(var l=Du(r,r.l),c=j_[l],f=0;c!=null&&hoe.indexOf(l)>-1;)s=Du(r,r.l+2),f=r.l+4,l==2066?f+=4:(l==2165||l==2175)&&(f+=12),o=r.slice(f,r.l+4+s),a.push(o),r.l+=4+s,c=j_[l=Du(r,r.l)];var p=sa(a);Sa(p,0);var g=0;p.lens=[];for(var m=0;m<a.length;++m)p.lens.push(g),g+=a[m].length;if(p.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+p.length+" < "+n;return e.f(p,p.length,i)}function Rc(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Tr[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||rf[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Y1(t.v):t.w=Bd(t.v):t.w=Ol(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&am(Tr[n]||String(n))){var i=pd(t.v);i&&(t.t="d",t.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function e2(t,e,r){return{v:t,ixfe:e,t:r}}function poe(t,e){var r={opts:{}},n={},i=e.dense?[]:{},s={},a={},o=null,l=[],c="",f={},p,g="",m,_,w,b,k={},R=[],C,j,X=[],K=[],P={Sheets:[],WBProps:{date1904:!1},Views:[{}]},A={},T=function(wt){return wt<8?vd[wt]:wt<64&&K[wt-8]||vd[wt]},O=function(wt,At,Xt){var Gt=At.XF.data;if(!(!Gt||!Gt.patternType||!Xt||!Xt.cellStyles)){At.s={},At.s.patternType=Gt.patternType;var qt;(qt=tg(T(Gt.icvFore)))&&(At.s.fgColor={rgb:qt}),(qt=tg(T(Gt.icvBack)))&&(At.s.bgColor={rgb:qt})}},I=function(wt,At,Xt){if(!(J>1)&&!(Xt.sheetRows&&wt.r>=Xt.sheetRows)){if(Xt.cellStyles&&At.XF&&At.XF.data&&O(wt,At,Xt),delete At.ixfe,delete At.XF,p=wt,g=Cr(wt),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),wt.r<a.s.r&&(a.s.r=wt.r),wt.c<a.s.c&&(a.s.c=wt.c),wt.r+1>a.e.r&&(a.e.r=wt.r+1),wt.c+1>a.e.c&&(a.e.c=wt.c+1),Xt.cellFormula&&At.f){for(var Gt=0;Gt<R.length;++Gt)if(!(R[Gt][0].s.c>wt.c||R[Gt][0].s.r>wt.r)&&!(R[Gt][0].e.c<wt.c||R[Gt][0].e.r<wt.r)){At.F=Ur(R[Gt][0]),(R[Gt][0].s.c!=wt.c||R[Gt][0].s.r!=wt.r)&&delete At.f,At.f&&(At.f=""+to(R[Gt][1],a,wt,H,D));break}}Xt.dense?(i[wt.r]||(i[wt.r]=[]),i[wt.r][wt.c]=At):i[g]=At}},D={enc:!1,sbcch:0,snames:[],sharedf:k,arrayf:R,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(D.password=e.password);var B,re=[],_e=[],Ce=[],we=[],ce=!1,H=[];H.SheetNames=D.snames,H.sharedf=D.sharedf,H.arrayf=D.arrayf,H.names=[],H.XTI=[];var te=0,J=0,N=0,U=[],W=[],Y;D.codepage=1200,oc(1200);for(var ae=!1;t.l<t.length-1;){var pe=t.l,he=t.read_shift(2);if(he===0&&te===10)break;var xe=t.l===t.length?0:t.read_shift(2),ke=j_[he];if(ke&&ke.f){if(e.bookSheets&&te===133&&he!==133)break;if(te=he,ke.r===2||ke.r==12){var Fe=t.read_shift(2);if(xe-=2,!D.enc&&Fe!==he&&((Fe&255)<<8|Fe>>8)!==he)throw new Error("rt mismatch: "+Fe+"!="+he);ke.r==12&&(t.l+=10,xe-=10)}var oe={};if(he===10?oe=ke.f(t,xe,D):oe=doe(he,ke,t,xe,D),J==0&&[9,521,1033,2057].indexOf(te)===-1)continue;switch(he){case 34:r.opts.Date1904=P.WBProps.date1904=oe;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(D.enc||(t.l=0),D.enc=oe,!e.password)throw new Error("File is password-protected");if(oe.valid==null)throw new Error("Encryption scheme unsupported");if(!oe.valid)throw new Error("Password is incorrect");break;case 92:D.lastuser=oe;break;case 66:var Ze=Number(oe);switch(Ze){case 21010:Ze=1200;break;case 32768:Ze=1e4;break;case 32769:Ze=1252;break}oc(D.codepage=Ze),ae=!0;break;case 317:D.rrtabid=oe;break;case 25:D.winlocked=oe;break;case 439:r.opts.RefreshAll=oe;break;case 12:r.opts.CalcCount=oe;break;case 16:r.opts.CalcDelta=oe;break;case 17:r.opts.CalcIter=oe;break;case 13:r.opts.CalcMode=oe;break;case 14:r.opts.CalcPrecision=oe;break;case 95:r.opts.CalcSaveRecalc=oe;break;case 15:D.CalcRefMode=oe;break;case 2211:r.opts.FullCalc=oe;break;case 129:oe.fDialog&&(i["!type"]="dialog"),oe.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),oe.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 224:X.push(oe);break;case 430:H.push([oe]),H[H.length-1].XTI=[];break;case 35:case 547:H[H.length-1].push(oe);break;case 24:case 536:Y={Name:oe.Name,Ref:to(oe.rgce,a,null,H,D)},oe.itab>0&&(Y.Sheet=oe.itab-1),H.names.push(Y),H[0]||(H[0]=[],H[0].XTI=[]),H[H.length-1].push(oe),oe.Name=="_xlnm._FilterDatabase"&&oe.itab>0&&oe.rgce&&oe.rgce[0]&&oe.rgce[0][0]&&oe.rgce[0][0][0]=="PtgArea3d"&&(W[oe.itab-1]={ref:Ur(oe.rgce[0][0][1][2])});break;case 22:D.ExternCount=oe;break;case 23:H.length==0&&(H[0]=[],H[0].XTI=[]),H[H.length-1].XTI=H[H.length-1].XTI.concat(oe),H.XTI=H.XTI.concat(oe);break;case 2196:if(D.biff<8)break;Y!=null&&(Y.Comment=oe[1]);break;case 18:i["!protect"]=oe;break;case 19:oe!==0&&D.WTF&&console.error("Password verifier: "+oe);break;case 133:s[oe.pos]=oe,D.snames.push(oe.name);break;case 10:{if(--J)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,i["!ref"]=Ur(a),e.sheetRows&&e.sheetRows<=a.e.r){var Re=a.e.r;a.e.r=e.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=Ur(a),a.e.r=Re}a.e.r++,a.e.c++}re.length>0&&(i["!merges"]=re),_e.length>0&&(i["!objects"]=_e),Ce.length>0&&(i["!cols"]=Ce),we.length>0&&(i["!rows"]=we),P.Sheets.push(A)}c===""?f=i:n[c]=i,i=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(D.biff===8&&(D.biff={9:2,521:3,1033:4}[he]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[oe.BIFFVer]||8),D.biffguess=oe.BIFFVer==0,oe.BIFFVer==0&&oe.dt==4096&&(D.biff=5,ae=!0,oc(D.codepage=28591)),D.biff==8&&oe.BIFFVer==0&&oe.dt==16&&(D.biff=2),J++)break;if(i=e.dense?[]:{},D.biff<8&&!ae&&(ae=!0,oc(D.codepage=e.codepage||1252)),D.biff<5||oe.BIFFVer==0&&oe.dt==4096){c===""&&(c="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var fe={pos:t.l-xe,name:c};s[fe.pos]=fe,D.snames.push(c)}else c=(s[pe]||{name:""}).name;oe.dt==32&&(i["!type"]="chart"),oe.dt==64&&(i["!type"]="macro"),re=[],_e=[],D.arrayf=R=[],Ce=[],we=[],ce=!1,A={Hidden:(s[pe]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:i["!type"]=="chart"&&(e.dense?(i[oe.r]||[])[oe.c]:i[Cr({c:oe.c,r:oe.r})])&&++oe.c,C={ixfe:oe.ixfe,XF:X[oe.ixfe]||{},v:oe.val,t:"n"},N>0&&(C.z=U[C.ixfe>>8&63]),Rc(C,e,r.opts.Date1904),I({c:oe.c,r:oe.r},C,e);break;case 5:case 517:C={ixfe:oe.ixfe,XF:X[oe.ixfe],v:oe.val,t:oe.t},N>0&&(C.z=U[C.ixfe>>8&63]),Rc(C,e,r.opts.Date1904),I({c:oe.c,r:oe.r},C,e);break;case 638:C={ixfe:oe.ixfe,XF:X[oe.ixfe],v:oe.rknum,t:"n"},N>0&&(C.z=U[C.ixfe>>8&63]),Rc(C,e,r.opts.Date1904),I({c:oe.c,r:oe.r},C,e);break;case 189:for(var ut=oe.c;ut<=oe.C;++ut){var rt=oe.rkrec[ut-oe.c][0];C={ixfe:rt,XF:X[rt],v:oe.rkrec[ut-oe.c][1],t:"n"},N>0&&(C.z=U[C.ixfe>>8&63]),Rc(C,e,r.opts.Date1904),I({c:ut,r:oe.r},C,e)}break;case 6:case 518:case 1030:{if(oe.val=="String"){o=oe;break}if(C=e2(oe.val,oe.cell.ixfe,oe.tt),C.XF=X[C.ixfe],e.cellFormula){var lt=oe.formula;if(lt&&lt[0]&&lt[0][0]&&lt[0][0][0]=="PtgExp"){var le=lt[0][0][1][0],je=lt[0][0][1][1],ft=Cr({r:le,c:je});k[ft]?C.f=""+to(oe.formula,a,oe.cell,H,D):C.F=((e.dense?(i[le]||[])[je]:i[ft])||{}).F}else C.f=""+to(oe.formula,a,oe.cell,H,D)}N>0&&(C.z=U[C.ixfe>>8&63]),Rc(C,e,r.opts.Date1904),I(oe.cell,C,e),o=oe}break;case 7:case 519:if(o)o.val=oe,C=e2(oe,o.cell.ixfe,"s"),C.XF=X[C.ixfe],e.cellFormula&&(C.f=""+to(o.formula,a,o.cell,H,D)),N>0&&(C.z=U[C.ixfe>>8&63]),Rc(C,e,r.opts.Date1904),I(o.cell,C,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{R.push(oe);var Ie=Cr(oe[0].s);if(m=e.dense?(i[oe[0].s.r]||[])[oe[0].s.c]:i[Ie],e.cellFormula&&m){if(!o||!Ie||!m)break;m.f=""+to(oe[1],a,oe[0],H,D),m.F=Ur(oe[0])}}break;case 1212:{if(!e.cellFormula)break;if(g){if(!o)break;k[Cr(o.cell)]=oe[0],m=e.dense?(i[o.cell.r]||[])[o.cell.c]:i[Cr(o.cell)],(m||{}).f=""+to(oe[0],a,p,H,D)}}break;case 253:C=e2(l[oe.isst].t,oe.ixfe,"s"),l[oe.isst].h&&(C.h=l[oe.isst].h),C.XF=X[C.ixfe],N>0&&(C.z=U[C.ixfe>>8&63]),Rc(C,e,r.opts.Date1904),I({c:oe.c,r:oe.r},C,e);break;case 513:e.sheetStubs&&(C={ixfe:oe.ixfe,XF:X[oe.ixfe],t:"z"},N>0&&(C.z=U[C.ixfe>>8&63]),Rc(C,e,r.opts.Date1904),I({c:oe.c,r:oe.r},C,e));break;case 190:if(e.sheetStubs)for(var Be=oe.c;Be<=oe.C;++Be){var tt=oe.ixfe[Be-oe.c];C={ixfe:tt,XF:X[tt],t:"z"},N>0&&(C.z=U[C.ixfe>>8&63]),Rc(C,e,r.opts.Date1904),I({c:Be,r:oe.r},C,e)}break;case 214:case 516:case 4:C=e2(oe.val,oe.ixfe,"s"),C.XF=X[C.ixfe],N>0&&(C.z=U[C.ixfe>>8&63]),Rc(C,e,r.opts.Date1904),I({c:oe.c,r:oe.r},C,e);break;case 0:case 512:J===1&&(a=oe);break;case 252:l=oe;break;case 1054:if(D.biff==4){U[N++]=oe[1];for(var ot=0;ot<N+163&&Tr[ot]!=oe[1];++ot);ot>=163&&Bu(oe[1],N+163)}else Bu(oe[1],oe[0]);break;case 30:{U[N++]=oe;for(var ht=0;ht<N+163&&Tr[ht]!=oe;++ht);ht>=163&&Bu(oe,N+163)}break;case 229:re=re.concat(oe);break;case 93:_e[oe.cmo[0]]=D.lastobj=oe;break;case 438:D.lastobj.TxO=oe;break;case 127:D.lastobj.ImData=oe;break;case 440:for(b=oe[0].s.r;b<=oe[0].e.r;++b)for(w=oe[0].s.c;w<=oe[0].e.c;++w)m=e.dense?(i[b]||[])[w]:i[Cr({c:w,r:b})],m&&(m.l=oe[1]);break;case 2048:for(b=oe[0].s.r;b<=oe[0].e.r;++b)for(w=oe[0].s.c;w<=oe[0].e.c;++w)m=e.dense?(i[b]||[])[w]:i[Cr({c:w,r:b})],m&&m.l&&(m.l.Tooltip=oe[1]);break;case 28:{if(D.biff<=5&&D.biff>=2)break;m=e.dense?(i[oe[0].r]||[])[oe[0].c]:i[Cr(oe[0])];var Pt=_e[oe[2]];m||(e.dense?(i[oe[0].r]||(i[oe[0].r]=[]),m=i[oe[0].r][oe[0].c]={t:"z"}):m=i[Cr(oe[0])]={t:"z"},a.e.r=Math.max(a.e.r,oe[0].r),a.s.r=Math.min(a.s.r,oe[0].r),a.e.c=Math.max(a.e.c,oe[0].c),a.s.c=Math.min(a.s.c,oe[0].c)),m.c||(m.c=[]),_={a:oe[1],t:Pt.TxO.t},m.c.push(_)}break;case 2173:tre(X[oe.ixfe],oe.ext);break;case 125:{if(!D.cellStyles)break;for(;oe.e>=oe.s;)Ce[oe.e--]={width:oe.w/256,level:oe.level||0,hidden:!!(oe.flags&1)},ce||(ce=!0,d3(oe.w/256)),xh(Ce[oe.e+1])}break;case 520:{var Ft={};oe.level!=null&&(we[oe.r]=Ft,Ft.level=oe.level),oe.hidden&&(we[oe.r]=Ft,Ft.hidden=!0),oe.hpt&&(we[oe.r]=Ft,Ft.hpt=oe.hpt,Ft.hpx=Mp(oe.hpt))}break;case 38:case 39:case 40:case 41:i["!margins"]||_d(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[he]]=oe;break;case 161:i["!margins"]||_d(i["!margins"]={}),i["!margins"].header=oe.header,i["!margins"].footer=oe.footer;break;case 574:oe.RTL&&(P.Views[0].RTL=!0);break;case 146:K=oe;break;case 2198:B=oe;break;case 140:j=oe;break;case 442:c?A.CodeName=oe||A.name:P.WBProps.CodeName=oe||"ThisWorkbook";break}}else ke||console.error("Missing Info for XLS Record 0x"+he.toString(16)),t.l+=xe}return r.SheetNames=ts(s).sort(function(jt,wt){return Number(jt)-Number(wt)}).map(function(jt){return s[jt].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&W.forEach(function(jt,wt){r.Sheets[r.SheetNames[wt]]["!autofilter"]=jt}),r.Strings=l,r.SSF=wi(Tr),D.enc&&(r.Encryption=D.enc),B&&(r.Themes=B),r.Metadata={},j!==void 0&&(r.Metadata.Country=j),H.names.length>0&&(P.Names=H.names),r.Workbook=P,r}var k1={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function moe(t,e,r){var n=yr.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var i=mT(n,I_,k1.DSI);for(var s in i)e[s]=i[s]}catch(c){if(r.WTF)throw c}var a=yr.find(t,"/!SummaryInformation");if(a&&a.size>0)try{var o=mT(a,P_,k1.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(c){if(r.WTF)throw c}e.HeadingPairs&&e.TitlesOfParts&&(LR(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function goe(t,e){var r=[],n=[],i=[],s=0,a,o=Hk(I_,"n"),l=Hk(P_,"n");if(t.Props)for(a=ts(t.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(l,a[s])?n:i).push([a[s],t.Props[a[s]]]);if(t.Custprops)for(a=ts(t.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(l,a[s])?n:i).push([a[s],t.Custprops[a[s]]]);var c=[];for(s=0;s<i.length;++s)UR.indexOf(i[s][0])>-1||FR.indexOf(i[s][0])>-1||i[s][1]!=null&&c.push(i[s]);n.length&&yr.utils.cfb_add(e,"/SummaryInformation",gT(n,k1.SI,l,P_)),(r.length||c.length)&&yr.utils.cfb_add(e,"/DocumentSummaryInformation",gT(r,k1.DSI,o,I_,c.length?c:null,k1.UDI))}function O9(t,e){e||(e={}),b3(e),$b(),e.codepage&&zb(e.codepage);var r,n;if(t.FullPaths){if(yr.find(t,"/encryption"))throw new Error("File is password-protected");r=yr.find(t,"!CompObj"),n=yr.find(t,"/Workbook")||yr.find(t,"/Book")}else{switch(e.type){case"base64":t=nl(ul(t));break;case"binary":t=nl(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Sa(t,0),n={content:t}}var i,s;if(r&&foe(r),e.bookProps&&!e.bookSheets)i={};else{var a=Xr?"buffer":"array";if(n&&n.content)i=poe(n.content,e);else if((s=yr.find(t,"PerfectOffice_MAIN"))&&s.content)i=wd.to_workbook(s.content,(e.type=a,e));else if((s=yr.find(t,"NativeContent_MAIN"))&&s.content)i=wd.to_workbook(s.content,(e.type=a,e));else throw(s=yr.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&yr.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=Cre(t))}var o={};return t.FullPaths&&moe(t,o,e),i.Props=i.Custprops=o,e.bookFiles&&(i.cfb=t),i}function xoe(t,e){var r=e||{},n=yr.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return yr.utils.cfb_add(n,i,j9(t,r)),r.biff==8&&(t.Props||t.Custprops)&&goe(t,n),r.biff==8&&t.vbaraw&&Ire(n,yr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var sg={0:{f:Uie},1:{f:Xie},2:{f:pse},3:{f:nse},4:{f:Zie},5:{f:fse},6:{f:yse},7:{f:ose},8:{f:Tse},9:{f:kse},10:{f:Ese},11:{f:Sse},12:{f:Qie},13:{f:gse},14:{f:sse},15:{f:tse},16:{f:N9},17:{f:_se},18:{f:cse},19:{f:n3},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:_ae},40:{},42:{},43:{f:yte},44:{f:xte},45:{f:bte},46:{f:Ste},47:{f:Ete},48:{},49:{f:qQ},50:{},51:{f:ire},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:JR},62:{f:vse},63:{f:dre},64:{f:zse},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:lo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Mse},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Gie},148:{f:qie,p:16},151:{f:Rse},152:{},153:{f:vae},154:{},155:{},156:{f:gae},157:{},158:{},159:{T:1,f:Lee},160:{T:-1},161:{T:1,f:r0},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Ase},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:rre},336:{T:-1},337:{f:ore,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:C_},357:{},358:{},359:{},360:{T:1},361:{},362:{f:QR},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Fse},427:{f:Lse},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Ose},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Wie},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Ise},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:C_},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Sre},633:{T:1},634:{T:-1},635:{T:1,f:bre},636:{T:-1},637:{f:KQ},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:sae},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:$se},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},j_={6:{f:n5},10:{f:Ff},12:{f:Cs},13:{f:Cs},14:{f:fs},15:{f:fs},16:{f:io},17:{f:fs},18:{f:fs},19:{f:Cs},20:{f:bT},21:{f:bT},23:{f:QR},24:{f:ST},25:{f:fs},26:{},27:{},28:{f:$Z},29:{},34:{f:fs},35:{f:ET},38:{f:io},39:{f:io},40:{f:io},41:{f:io},42:{f:fs},43:{f:fs},47:{f:tte},49:{f:gZ},51:{f:Cs},60:{},61:{f:fZ},64:{f:fs},65:{f:mZ},66:{f:Cs},77:{},80:{},81:{},82:{},85:{f:Cs},89:{},90:{},91:{},92:{f:eZ},93:{f:WZ},94:{},95:{f:fs},96:{},97:{},99:{f:fs},125:{f:JR},128:{f:PZ},129:{f:rZ},130:{f:Cs},131:{f:fs},132:{f:fs},133:{f:nZ},134:{},140:{f:eee},141:{f:Cs},144:{},146:{f:nee},151:{},152:{},153:{},154:{},155:{},156:{f:Cs},157:{},158:{},160:{f:uee},161:{f:aee},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:AZ},190:{f:NZ},193:{f:Ff},197:{},198:{},199:{},200:{},201:{},202:{f:fs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Cs},220:{},221:{f:fs},222:{},224:{f:IZ},225:{f:ZJ},226:{f:Ff},227:{},229:{f:qZ},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:sZ},253:{f:vZ},255:{f:oZ},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:zR},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:fs},353:{f:Ff},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:OZ},431:{f:fs},432:{},433:{},434:{},437:{},438:{f:XZ},439:{f:fs},440:{f:YZ},441:{},442:{f:Bg},443:{},444:{f:Cs},445:{},446:{},448:{f:Ff},449:{f:uZ,r:2},450:{f:Ff},512:{f:yT},513:{f:cee},515:{f:LZ},516:{f:wZ},517:{f:_T},519:{f:fee},520:{f:lZ},523:{},545:{f:kT},549:{f:vT},566:{},574:{f:dZ},638:{f:TZ},659:{},1048:{},1054:{f:bZ},1084:{},1212:{f:VZ},2048:{f:JZ},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Qx},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Ff},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:iee,r:12},2173:{f:ere,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:fs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:BZ,r:12},2197:{},2198:{f:Kte,r:12},2199:{},2200:{},2201:{},2202:{f:UZ,r:12},2203:{f:Ff},2204:{},2205:{},2206:{},2207:{},2211:{f:cZ},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Cs},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:oee},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:ree},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:yT},1:{},2:{f:gee},3:{f:pee},4:{f:dee},5:{f:_T},7:{f:vee},8:{},9:{f:Qx},11:{},22:{f:Cs},30:{f:SZ},31:{},32:{},33:{f:kT},36:{},37:{f:vT},50:{f:yee},62:{},52:{},67:{},68:{f:Cs},69:{},86:{},126:{},127:{f:hee},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:wee},223:{},234:{},354:{},421:{},518:{f:n5},521:{f:Qx},536:{f:ST},547:{f:ET},561:{},579:{},1030:{f:n5},1033:{f:Qx},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Ut(t,e,r,n){var i=e;if(!isNaN(i)){var s=n||(r||[]).length||0,a=t.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&e3(r)&&t.push(r)}}function voe(t,e,r,n){var i=(r||[]).length||0;if(i<=8224)return Ut(t,e,r,i);var s=e;if(!isNaN(s)){for(var a=r.parts||[],o=0,l=0,c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;var f=t.next(4);for(f.write_shift(2,s),f.write_shift(2,c),t.push(r.slice(l,l+c)),l+=c;l<i;){for(f=t.next(4),f.write_shift(2,60),c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;f.write_shift(2,c),t.push(r.slice(l,l+c)),l+=c}}}function $g(t,e,r){return t||(t=mt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function yoe(t,e,r,n){var i=mt(9);return $g(i,t,e),$R(r,n||"b",i),i}function woe(t,e,r){var n=mt(8+2*r.length);return $g(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function _oe(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?qs(yi(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?Ut(t,2,xee(r,n,i)):Ut(t,3,mee(r,n,i));return;case"b":case"e":Ut(t,5,yoe(r,n,e.v,e.t));return;case"s":case"str":Ut(t,4,woe(r,n,(e.v||"").slice(0,255)));return}Ut(t,1,$g(null,r,n))}function boe(t,e,r,n){var i=Array.isArray(e),s=_n(e["!ref"]||"A1"),a,o="",l=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=Ur(s)}for(var c=s.s.r;c<=s.e.r;++c){o=vs(c);for(var f=s.s.c;f<=s.e.c;++f){c===s.s.r&&(l[f]=Vi(f)),a=l[f]+o;var p=i?(e[c]||[])[f]:e[a];p&&_oe(t,p,c,f)}}}function Eoe(t,e){for(var r=e||{},n=Oo(),i=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(i=s);if(i==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Ut(n,r.biff==4?1033:r.biff==3?521:9,u3(t,16,r)),boe(n,t.Sheets[t.SheetNames[i]],i,r),Ut(n,10),n.end()}function Soe(t,e,r){Ut(t,49,xZ({sz:12,name:"Arial"},r))}function koe(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&Ut(t,1054,EZ(i,e[i],r))})}function Toe(t,e){var r=mt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Ut(t,2151,r),r=mt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),KR(_n(e["!ref"]||"A1"),r),r.write_shift(4,4),Ut(t,2152,r)}function Aoe(t,e){for(var r=0;r<16;++r)Ut(t,224,wT({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Ut(t,224,wT(n,0,e))})}function Noe(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Ut(t,440,QZ(n)),n[1].Tooltip&&Ut(t,2048,ZZ(n))}delete e["!links"]}function Coe(t,e){if(e){var r=0;e.forEach(function(n,i){++r<=256&&n&&Ut(t,125,see(Ty(i,n),i))})}}function Ioe(t,e,r,n,i){var s=16+Fh(i.cellXfs,e,i);if(e.v==null&&!e.bf){Ut(t,513,$d(r,n,s));return}if(e.bf)Ut(t,6,rie(e,r,n,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?qs(yi(e.v)):e.v;Ut(t,515,DZ(r,n,a,s));break;case"b":case"e":Ut(t,517,FZ(r,n,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=v3(i.Strings,e.v,i.revStrings);Ut(t,253,yZ(r,n,o,s))}else Ut(t,516,_Z(r,n,(e.v||"").slice(0,255),s,i));break;default:Ut(t,513,$d(r,n,s))}}function Poe(t,e,r){var n=Oo(),i=r.SheetNames[t],s=r.Sheets[i]||{},a=(r||{}).Workbook||{},o=(a.Sheets||[])[t]||{},l=Array.isArray(s),c=e.biff==8,f,p="",g=[],m=_n(s["!ref"]||"A1"),_=c?65536:16384;if(m.e.c>255||m.e.r>=_){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,_-1)}Ut(n,2057,u3(r,16,e)),Ut(n,13,Fl(1)),Ut(n,12,Fl(100)),Ut(n,15,vo(!0)),Ut(n,17,vo(!1)),Ut(n,16,Ud(.001)),Ut(n,95,vo(!0)),Ut(n,42,vo(!1)),Ut(n,43,vo(!1)),Ut(n,130,Fl(1)),Ut(n,128,RZ()),Ut(n,131,vo(!1)),Ut(n,132,vo(!1)),c&&Coe(n,s["!cols"]),Ut(n,512,kZ(m,e)),c&&(s["!links"]=[]);for(var w=m.s.r;w<=m.e.r;++w){p=vs(w);for(var b=m.s.c;b<=m.e.c;++b){w===m.s.r&&(g[b]=Vi(b)),f=g[b]+p;var k=l?(s[w]||[])[b]:s[f];k&&(Ioe(n,k,w,b,e),c&&k.l&&s["!links"].push([f,k.l]))}}var R=o.CodeName||o.name||i;return c&&Ut(n,574,pZ((a.Views||[])[0])),c&&(s["!merges"]||[]).length&&Ut(n,229,HZ(s["!merges"])),c&&Noe(n,s),Ut(n,442,qR(R)),c&&Toe(n,s),Ut(n,10),n.end()}function Roe(t,e,r){var n=Oo(),i=(t||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=r.biff==8,l=r.biff==5;if(Ut(n,2057,u3(t,5,r)),r.bookType=="xla"&&Ut(n,135),Ut(n,225,o?Fl(1200):null),Ut(n,193,FJ(2)),l&&Ut(n,191),l&&Ut(n,192),Ut(n,226),Ut(n,92,tZ("SheetJS",r)),Ut(n,66,Fl(o?1200:1252)),o&&Ut(n,353,Fl(0)),o&&Ut(n,448),Ut(n,317,lee(t.SheetNames.length)),o&&t.vbaraw&&Ut(n,211),o&&t.vbaraw){var c=a.CodeName||"ThisWorkbook";Ut(n,442,qR(c))}Ut(n,156,Fl(17)),Ut(n,25,vo(!1)),Ut(n,18,vo(!1)),Ut(n,19,Fl(0)),o&&Ut(n,431,vo(!1)),o&&Ut(n,444,Fl(0)),Ut(n,61,hZ()),Ut(n,64,vo(!1)),Ut(n,141,Fl(0)),Ut(n,34,vo(uae(t)=="true")),Ut(n,14,vo(!0)),o&&Ut(n,439,vo(!1)),Ut(n,218,Fl(0)),Soe(n,t,r),koe(n,t.SSF,r),Aoe(n,r),o&&Ut(n,352,vo(!1));var f=n.end(),p=Oo();o&&Ut(p,140,tee()),o&&r.Strings&&voe(p,252,aZ(r.Strings)),Ut(p,10);var g=p.end(),m=Oo(),_=0,w=0;for(w=0;w<t.SheetNames.length;++w)_+=(o?12:11)+(o?2:1)*t.SheetNames[w].length;var b=f.length+_+g.length;for(w=0;w<t.SheetNames.length;++w){var k=s[w]||{};Ut(m,133,iZ({pos:b,hs:k.Hidden||0,dt:0,name:t.SheetNames[w]},r)),b+=e[w].length}var R=m.end();if(_!=R.length)throw new Error("BS8 "+_+" != "+R.length);var C=[];return f.length&&C.push(f),R.length&&C.push(R),g.length&&C.push(g),sa(C)}function Foe(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=wi(Tr)),t&&t.SSF&&(om(),yy(t.SSF),r.revssf=_y(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,E3(r),r.cellXfs=[],Fh(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)n[n.length]=Poe(i,r,t);return n.unshift(Roe(t,n,r)),sa(n)}function j9(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var i=jo(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return Foe(t,e);case 4:case 3:case 2:return Eoe(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function DT(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var i=t.match(/<table/i);if(!i)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),a=i.index,o=s&&s.index||t.length,l=xQ(t.slice(a,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,f=0,p=0,g=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},_=[];for(a=0;a<l.length;++a){var w=l[a].trim(),b=w.slice(0,3).toLowerCase();if(b=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}f=0;continue}if(!(b!="<td"&&b!="<th")){var k=w.split(/<\/t[dh]>/i);for(o=0;o<k.length;++o){var R=k[o].trim();if(R.match(/<t[dh]/i)){for(var C=R,j=0;C.charAt(0)=="<"&&(j=C.indexOf(">"))>-1;)C=C.slice(j+1);for(var X=0;X<_.length;++X){var K=_[X];K.s.c==f&&K.s.r<c&&c<=K.e.r&&(f=K.e.c+1,X=-1)}var P=Ir(R.slice(0,R.indexOf(">")));g=P.colspan?+P.colspan:1,((p=+P.rowspan)>1||g>1)&&_.push({s:{r:c,c:f},e:{r:c+(p||1)-1,c:f+g-1}});var A=P.t||P["data-t"]||"";if(!C.length){f+=g;continue}if(C=oR(C),m.s.r>c&&(m.s.r=c),m.e.r<c&&(m.e.r=c),m.s.c>f&&(m.s.c=f),m.e.c<f&&(m.e.c=f),!C.length){f+=g;continue}var T={t:"s",v:C};r.raw||!C.trim().length||A=="s"||(C==="TRUE"?T={t:"b",v:!0}:C==="FALSE"?T={t:"b",v:!1}:isNaN(uc(C))?isNaN(Op(C).getDate())||(T={t:"d",v:yi(C)},r.cellDates||(T={t:"n",v:qs(T.v)}),T.z=r.dateNF||Tr[14]):T={t:"n",v:uc(C)}),r.dense?(n[c]||(n[c]=[]),n[c][f]=T):n[Cr({r:c,c:f})]=T,f+=g}}}}return n["!ref"]=Ur(m),_.length&&(n["!merges"]=_),n}function Loe(t,e,r,n){for(var i=t["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>r||i[c].s.c>a)&&!(i[c].e.r<r||i[c].e.c<a)){if(i[c].s.r<r||i[c].s.c<a){o=-1;break}o=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(o<0)){var f=Cr({r,c:a}),p=n.dense?(t[r]||[])[a]:t[f],g=p&&p.v!=null&&(p.h||Qb(p.w||(Hu(p),p.w)||""))||"",m={};o>1&&(m.rowspan=o),l>1&&(m.colspan=l),n.editable?g='<span contenteditable="true">'+g+"</span>":p&&(m["data-t"]=p&&p.t||"z",p.v!=null&&(m["data-v"]=p.v),p.z!=null&&(m["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+p.l.Target+'">'+g+"</a>")),m.id=(n.id||"sjs")+"-"+f,s.push(Bt("td",g,m))}}var _="<tr>";return _+s.join("")+"</tr>"}var Doe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Ooe="</body></html>";function joe(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Rh(DT(r[0],e),e);var n=T3();return r.forEach(function(i,s){A3(n,DT(i,e),"Sheet"+(s+1))}),n}function Moe(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function M9(t,e){var r=e||{},n=r.header!=null?r.header:Doe,i=r.footer!=null?r.footer:Ooe,s=[n],a=jo(t["!ref"]);r.dense=Array.isArray(t),s.push(Moe(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)s.push(Loe(t,a,o,r));return s.push("</table>"+i),s.join("")}function B9(t,e,r){var n=r||{},i=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var a=typeof n.origin=="string"?Ui(n.origin):n.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:i,c:s}};if(t["!ref"]){var f=jo(t["!ref"]);c.s.r=Math.min(c.s.r,f.s.r),c.s.c=Math.min(c.s.c,f.s.c),c.e.r=Math.max(c.e.r,f.e.r),c.e.c=Math.max(c.e.c,f.e.c),i==-1&&(c.e.r=i=f.e.r+1)}var p=[],g=0,m=t["!rows"]||(t["!rows"]=[]),_=0,w=0,b=0,k=0,R=0,C=0;for(t["!cols"]||(t["!cols"]=[]);_<o.length&&w<l;++_){var j=o[_];if(OT(j)){if(n.display)continue;m[w]={hidden:!0}}var X=j.children;for(b=k=0;b<X.length;++b){var K=X[b];if(!(n.display&&OT(K))){var P=K.hasAttribute("data-v")?K.getAttribute("data-v"):K.hasAttribute("v")?K.getAttribute("v"):oR(K.innerHTML),A=K.getAttribute("data-z")||K.getAttribute("z");for(g=0;g<p.length;++g){var T=p[g];T.s.c==k+s&&T.s.r<w+i&&w+i<=T.e.r&&(k=T.e.c+1-s,g=-1)}C=+K.getAttribute("colspan")||1,((R=+K.getAttribute("rowspan")||1)>1||C>1)&&p.push({s:{r:w+i,c:k+s},e:{r:w+i+(R||1)-1,c:k+s+(C||1)-1}});var O={t:"s",v:P},I=K.getAttribute("data-t")||K.getAttribute("t")||"";P!=null&&(P.length==0?O.t=I||"z":n.raw||P.trim().length==0||I=="s"||(P==="TRUE"?O={t:"b",v:!0}:P==="FALSE"?O={t:"b",v:!1}:isNaN(uc(P))?isNaN(Op(P).getDate())||(O={t:"d",v:yi(P)},n.cellDates||(O={t:"n",v:qs(O.v)}),O.z=n.dateNF||Tr[14]):O={t:"n",v:uc(P)})),O.z===void 0&&A!=null&&(O.z=A);var D="",B=K.getElementsByTagName("A");if(B&&B.length)for(var re=0;re<B.length&&!(B[re].hasAttribute("href")&&(D=B[re].getAttribute("href"),D.charAt(0)!="#"));++re);D&&D.charAt(0)!="#"&&(O.l={Target:D}),n.dense?(t[w+i]||(t[w+i]=[]),t[w+i][k+s]=O):t[Cr({c:k+s,r:w+i})]=O,c.e.c<k+s&&(c.e.c=k+s),k+=C}}++w}return p.length&&(t["!merges"]=(t["!merges"]||[]).concat(p)),c.e.r=Math.max(c.e.r,w-1+i),t["!ref"]=Ur(c),w>=l&&(t["!fullref"]=Ur((c.e.r=o.length-_+w-1+i,c))),t}function V9(t,e){var r=e||{},n=r.dense?[]:{};return B9(n,t,e)}function Boe(t,e){return Rh(V9(t,e),e)}function OT(t){var e="",r=Voe(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function Voe(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Uoe(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,i){return Array(parseInt(i,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=wn(e.replace(/<[^>]*>/g,""));return[r]}var jT={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function U9(t,e){var r=e||{},n=Jb(t),i=[],s,a,o={name:""},l="",c=0,f,p,g={},m=[],_=r.dense?[]:{},w,b,k={value:""},R="",C=0,j=[],X=-1,K=-1,P={s:{r:1e6,c:1e7},e:{r:0,c:0}},A=0,T={},O=[],I={},D=0,B=0,re=[],_e=1,Ce=1,we=[],ce={Names:[]},H={},te=["",""],J=[],N={},U="",W=0,Y=!1,ae=!1,pe=0;for(Z1.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");w=Z1.exec(n);)switch(w[3]=w[3].replace(/_.*$/,"")){case"table":case"":w[1]==="/"?(P.e.c>=P.s.c&&P.e.r>=P.s.r?_["!ref"]=Ur(P):_["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=P.e.r&&(_["!fullref"]=_["!ref"],P.e.r=r.sheetRows-1,_["!ref"]=Ur(P)),O.length&&(_["!merges"]=O),re.length&&(_["!rows"]=re),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),m.push(f.name),g[f.name]=_,ae=!1):w[0].charAt(w[0].length-2)!=="/"&&(f=Ir(w[0],!1),X=K=-1,P.s.r=P.s.c=1e7,P.e.r=P.e.c=0,_=r.dense?[]:{},O=[],re=[],ae=!0);break;case"table-row-group":w[1]==="/"?--A:++A;break;case"table-row":case"":if(w[1]==="/"){X+=_e,_e=1;break}if(p=Ir(w[0],!1),p.?X=p.-1:X==-1&&(X=0),_e=+p["number-rows-repeated"]||1,_e<10)for(pe=0;pe<_e;++pe)A>0&&(re[X+pe]={level:A});K=-1;break;case"covered-table-cell":w[1]!=="/"&&++K,r.sheetStubs&&(r.dense?(_[X]||(_[X]=[]),_[X][K]={t:"z"}):_[Cr({r:X,c:K})]={t:"z"}),R="",j=[];break;case"table-cell":case"":if(w[0].charAt(w[0].length-2)==="/")++K,k=Ir(w[0],!1),Ce=parseInt(k["number-columns-repeated"]||"1",10),b={t:"z",v:null},k.formula&&r.cellFormula!=!1&&(b.f=RT(wn(k.formula))),(k.||k["value-type"])=="string"&&(b.t="s",b.v=wn(k["string-value"]||""),r.dense?(_[X]||(_[X]=[]),_[X][K]=b):_[Cr({r:X,c:K})]=b),K+=Ce-1;else if(w[1]!=="/"){++K,R="",C=0,j=[],Ce=1;var he=_e?X+_e-1:X;if(K>P.e.c&&(P.e.c=K),K<P.s.c&&(P.s.c=K),X<P.s.r&&(P.s.r=X),he>P.e.r&&(P.e.r=he),k=Ir(w[0],!1),J=[],N={},b={t:k.||k["value-type"],v:null},r.cellFormula)if(k.formula&&(k.formula=wn(k.formula)),k["number-matrix-columns-spanned"]&&k["number-matrix-rows-spanned"]&&(D=parseInt(k["number-matrix-rows-spanned"],10)||0,B=parseInt(k["number-matrix-columns-spanned"],10)||0,I={s:{r:X,c:K},e:{r:X+D-1,c:K+B-1}},b.F=Ur(I),we.push([I,b.F])),k.formula)b.f=RT(k.formula);else for(pe=0;pe<we.length;++pe)X>=we[pe][0].s.r&&X<=we[pe][0].e.r&&K>=we[pe][0].s.c&&K<=we[pe][0].e.c&&(b.F=we[pe][1]);switch((k["number-columns-spanned"]||k["number-rows-spanned"])&&(D=parseInt(k["number-rows-spanned"],10)||0,B=parseInt(k["number-columns-spanned"],10)||0,I={s:{r:X,c:K},e:{r:X+D-1,c:K+B-1}},O.push(I)),k["number-columns-repeated"]&&(Ce=parseInt(k["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=mi(k["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(k.value);break;case"percentage":b.t="n",b.v=parseFloat(k.value);break;case"currency":b.t="n",b.v=parseFloat(k.value);break;case"date":b.t="d",b.v=yi(k["date-value"]),r.cellDates||(b.t="n",b.v=qs(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=pQ(k["time-value"])/86400,r.cellDates&&(b.t="d",b.v=by(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(k.);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",k["string-value"]!=null&&(R=wn(k["string-value"]),j=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(Y=!1,b.t==="s"&&(b.v=R||"",j.length&&(b.R=j),Y=C==0),H.Target&&(b.l=H),J.length>0&&(b.c=J,J=[]),R&&r.cellText!==!1&&(b.w=R),Y&&(b.t="z",delete b.v),(!Y||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=X))for(var xe=0;xe<_e;++xe){if(Ce=parseInt(k["number-columns-repeated"]||"1",10),r.dense)for(_[X+xe]||(_[X+xe]=[]),_[X+xe][K]=xe==0?b:wi(b);--Ce>0;)_[X+xe][K+Ce]=wi(b);else for(_[Cr({r:X+xe,c:K})]=b;--Ce>0;)_[Cr({r:X+xe,c:K+Ce})]=wi(b);P.e.c<=K&&(P.e.c=K)}Ce=parseInt(k["number-columns-repeated"]||"1",10),K+=Ce-1,Ce=0,b={},R="",j=[]}H={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(w[1]==="/"){if((s=i.pop())[0]!==w[3])throw"Bad state: "+s}else w[0].charAt(w[0].length-2)!=="/"&&i.push([w[3],!0]);break;case"annotation":if(w[1]==="/"){if((s=i.pop())[0]!==w[3])throw"Bad state: "+s;N.t=R,j.length&&(N.R=j),N.a=U,J.push(N)}else w[0].charAt(w[0].length-2)!=="/"&&i.push([w[3],!1]);U="",W=0,R="",C=0,j=[];break;case"creator":w[1]==="/"?U=n.slice(W,w.index):W=w.index+w[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(w[1]==="/"){if((s=i.pop())[0]!==w[3])throw"Bad state: "+s}else w[0].charAt(w[0].length-2)!=="/"&&i.push([w[3],!1]);R="",C=0,j=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(w[1]==="/"){if(T[o.name]=l,(s=i.pop())[0]!==w[3])throw"Bad state: "+s}else w[0].charAt(w[0].length-2)!=="/"&&(l="",o=Ir(w[0],!1),i.push([w[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(i[i.length-1][0]){case"time-style":case"date-style":a=Ir(w[0],!1),l+=jT[w[3]][a.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(i[i.length-1][0]){case"time-style":case"date-style":a=Ir(w[0],!1),l+=jT[w[3]][a.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(w[0].slice(-2)==="/>")break;if(w[1]==="/")switch(i[i.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,w.index);break}else c=w.index+w[0].length;break;case"named-range":a=Ir(w[0],!1),te=i5(a["cell-range-address"]);var ke={Name:a.name,Ref:te[0]+"!"+te[1]};ae&&(ke.Sheet=m.length),ce.Names.push(ke);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(i[i.length-1][0])>-1)break;if(w[1]==="/"&&(!k||!k["string-value"])){var Fe=Uoe(n.slice(C,w.index));R=(R.length>0?R+`
`:"")+Fe[0]}else Ir(w[0],!1),C=w.index+w[0].length;break;case"s":break;case"database-range":if(w[1]==="/")break;try{te=i5(Ir(w[0])["target-range-address"]),g[te[0]]["!autofilter"]={ref:te[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(w[1]!=="/"){if(H=Ir(w[0],!1),!H.href)break;H.Target=wn(H.href),delete H.href,H.Target.charAt(0)=="#"&&H.Target.indexOf(".")>-1?(te=i5(H.Target.slice(1)),H.Target="#"+te[0]+"!"+te[1]):H.Target.match(/^\.\.[\\\/]/)&&(H.Target=H.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(w[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(w)}}var oe={Sheets:g,SheetNames:m,Workbook:ce};return r.bookSheets&&delete oe.Sheets,oe}function MT(t,e){e=e||{},Rl(t,"META-INF/manifest.xml")&&pJ(Ns(t,"META-INF/manifest.xml"),e);var r=il(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=U9(Xn(r),e);return Rl(t,"meta.xml")&&(n.Props=PR(Ns(t,"meta.xml"))),n}function BT(t,e){return U9(t,e)}var zoe=(function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+J1({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return ys+e}})(),VT=(function(){var t=function(s){return qn(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,a,o){var l=[];l.push('      <table:table table:name="'+qn(a.SheetNames[o])+`" table:style-name="ta1">
`);var c=0,f=0,p=jo(s["!ref"]||"A1"),g=s["!merges"]||[],m=0,_=Array.isArray(s);if(s["!cols"])for(f=0;f<=p.e.c;++f)l.push("        <table:table-column"+(s["!cols"][f]?' table:style-name="co'+s["!cols"][f].ods+'"':"")+`></table:table-column>
`);var w="",b=s["!rows"]||[];for(c=0;c<p.s.r;++c)w=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+w+`></table:table-row>
`);for(;c<=p.e.r;++c){for(w=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+w+`>
`),f=0;f<p.s.c;++f)l.push(e);for(;f<=p.e.c;++f){var k=!1,R={},C="";for(m=0;m!=g.length;++m)if(!(g[m].s.c>f)&&!(g[m].s.r>c)&&!(g[m].e.c<f)&&!(g[m].e.r<c)){(g[m].s.c!=f||g[m].s.r!=c)&&(k=!0),R["table:number-columns-spanned"]=g[m].e.c-g[m].s.c+1,R["table:number-rows-spanned"]=g[m].e.r-g[m].s.r+1;break}if(k){l.push(r);continue}var j=Cr({r:c,c:f}),X=_?(s[c]||[])[f]:s[j];if(X&&X.f&&(R["table:formula"]=qn(lie(X.f)),X.F&&X.F.slice(0,j.length)==j)){var K=jo(X.F);R["table:number-matrix-columns-spanned"]=K.e.c-K.s.c+1,R["table:number-matrix-rows-spanned"]=K.e.r-K.s.r+1}if(!X){l.push(e);continue}switch(X.t){case"b":C=X.v?"TRUE":"FALSE",R["office:value-type"]="boolean",R["office:boolean-value"]=X.v?"true":"false";break;case"n":C=X.w||String(X.v||0),R["office:value-type"]="float",R["office:value"]=X.v||0;break;case"s":case"str":C=X.v==null?"":X.v,R["office:value-type"]="string";break;case"d":C=X.w||yi(X.v).toISOString(),R["office:value-type"]="date",R["office:date-value"]=yi(X.v).toISOString(),R["table:style-name"]="ce1";break;default:l.push(e);continue}var P=t(C);if(X.l&&X.l.Target){var A=X.l.Target;A=A.charAt(0)=="#"?"#"+cie(A.slice(1)):A,A.charAt(0)!="#"&&!A.match(/^\w+:/)&&(A="../"+A),P=Bt("text:a",P,{"xlink:href":A.replace(/&/g,"&amp;")})}l.push("          "+Bt("table:table-cell",Bt("text:p",P,{}),R)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(c){return a.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var f=0;f<c["!cols"].length;++f)if(c["!cols"][f]){var p=c["!cols"][f];if(p.width==null&&p.wpx==null&&p.wch==null)continue;xh(p),p.ods=o;var g=c["!cols"][f].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;a.SheetNames.map(function(c){return a.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var f=0;f<c["!rows"].length;++f)if(c["!rows"][f]){c["!rows"][f].ods=l;var p=c["!rows"][f].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+p+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var l=[ys],c=J1({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=J1({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+c+f+`>
`),l.push(IR().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),i(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var p=0;p!=a.SheetNames.length;++p)l.push(n(a.Sheets[a.SheetNames[p]],a,p));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function z9(t,e){if(e.bookType=="fods")return VT(t,e);var r=Kb(),n="",i=[],s=[];return n="mimetype",$r(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",$r(r,n,VT(t,e)),i.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",$r(r,n,zoe(t,e)),i.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",$r(r,n,ys+IR()),i.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",$r(r,n,xJ(s)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",$r(r,n,mJ(i)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function qd(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function M_(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Xn(Ph(t))}function $oe(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):nl(qc(t))}function qoe(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function yh(t){var e=t.reduce(function(i,s){return i+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(i){r.set(i,n),n+=i.length}),r}function UT(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function Hoe(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,i=e+13;i>=e;--i)n=n*256+t[i];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function Woe(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,i=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;i>=1;++s,i/=256)t[e+s]=i&255;t[e+15]|=r>=0?0:128}function ag(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function Vn(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Zi(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function kn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],i=ag(t,r),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:a=4,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=ag(t,r),o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(n))}var c={data:o,type:s};e[i]==null?e[i]=[c]:e[i].push(c)}return e}function wa(t){var e=[];return t.forEach(function(r,n){r.forEach(function(i){i.data&&(e.push(Vn(n*8+i.type)),i.type==2&&e.push(Vn(i.data.length)),e.push(i.data))})}),yh(e)}function _3(t,e){return t?.map(function(r){return e(r.data)})||[]}function Cl(t){for(var e,r=[],n=[0];n[0]<t.length;){var i=ag(t,n),s=kn(t.slice(n[0],n[0]+i));n[0]+=i;var a={id:Zi(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=kn(o.data),c=Zi(l[3][0].data);a.messages.push({meta:l,data:t.slice(n[0],n[0]+c)}),n[0]+=c}),(e=s[3])!=null&&e[0]&&(a.merge=Zi(s[3][0].data)>>>0>0),r.push(a)}return r}function O0(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:Vn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Vn(+!!r.merge),type:0}]);var i=[];r.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:Vn(a.data.length)}],n[2].push({data:wa(a.meta),type:2})});var s=wa(n);e.push(Vn(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),yh(e)}function Goe(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=ag(e,r),i=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[r[0]],o>1&&(a|=e[r[0]+1]<<8),o>2&&(a|=e[r[0]+2]<<16),o>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}i.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var l=0,c=0;if(s==1?(c=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(c=(e[r[0]++]>>2)+1,s==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),i=[yh(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(i.push(i[0].slice(-l)),c-=l;c>=i[i.length-1].length;)i.push(i[i.length-1]),c-=i[i.length-1].length;i.push(i[0].slice(-l,-l+c))}}var f=yh(i);if(f.length!=n)throw new Error("Unexpected length: ".concat(f.length," != ").concat(n));return f}function Il(t){for(var e=[],r=0;r<t.length;){var n=t[r++],i=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(Goe(n,t.slice(r,r+i))),r+=i}if(r!==t.length)throw new Error("data is not a valid framed stream!");return yh(e)}function j0(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),i=new Uint8Array(4);e.push(i);var s=Vn(n),a=s.length;e.push(s),n<=60?(a++,e.push(new Uint8Array([n-1<<2]))):n<=256?(a+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(a+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(a+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(a+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),a+=n,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,r+=n}return yh(e)}function Koe(t,e,r,n){var i=qd(t),s=i.getUint32(4,!0),a=(n>1?12:8)+UT(s&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,f=new Date(2001,0,1);s&512&&(o=i.getUint32(a,!0),a+=4),a+=UT(s&(n>1?12288:4096))*4,s&16&&(l=i.getUint32(a,!0),a+=4),s&32&&(c=i.getFloat64(a,!0),a+=8),s&64&&(f.setTime(f.getTime()+i.getFloat64(a,!0)*1e3),a+=8);var p;switch(t[2]){case 0:break;case 2:p={t:"n",v:c};break;case 3:p={t:"s",v:e[l]};break;case 5:p={t:"d",v:f};break;case 6:p={t:"b",v:c>0};break;case 7:p={t:"n",v:c/86400};break;case 8:p={t:"e",v:0};break;case 9:if(o>-1)p={t:"s",v:r[o]};else if(l>-1)p={t:"s",v:e[l]};else if(!isNaN(c))p={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return p}function Xoe(t,e,r){var n=qd(t),i=n.getUint32(8,!0),s=12,a=-1,o=-1,l=NaN,c=NaN,f=new Date(2001,0,1);i&1&&(l=Hoe(t,s),s+=16),i&2&&(c=n.getFloat64(s,!0),s+=8),i&4&&(f.setTime(f.getTime()+n.getFloat64(s,!0)*1e3),s+=8),i&8&&(o=n.getUint32(s,!0),s+=4),i&16&&(a=n.getUint32(s,!0),s+=4);var p;switch(t[1]){case 0:break;case 2:p={t:"n",v:l};break;case 3:p={t:"s",v:e[o]};break;case 5:p={t:"d",v:f};break;case 6:p={t:"b",v:c>0};break;case 7:p={t:"n",v:c/86400};break;case 8:p={t:"e",v:0};break;case 9:if(a>-1)p={t:"s",v:r[a]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(i&31," : ").concat(t.slice(0,4)));break;case 10:p={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(i&31," : ").concat(t.slice(0,4)))}return p}function a5(t,e){var r=new Uint8Array(32),n=qd(r),i=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,Woe(r,i,t.v),s|=1,i+=16;break;case"b":r[1]=6,n.setFloat64(i,t.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(i,e.indexOf(t.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,i)}function o5(t,e){var r=new Uint8Array(32),n=qd(r),i=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(i,t.v,!0),s|=32,i+=8;break;case"b":r[2]=6,n.setFloat64(i,t.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(i,e.indexOf(t.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,i)}function Yoe(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return Koe(t,e,r,t[0]);case 5:return Xoe(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function eo(t){var e=kn(t);return ag(e[1][0].data)}function zT(t,e){var r=kn(e.data),n=Zi(r[1][0].data),i=r[3],s=[];return(i||[]).forEach(function(a){var o=kn(a.data),l=Zi(o[1][0].data)>>>0;switch(n){case 1:s[l]=M_(o[3][0].data);break;case 8:{var c=t[eo(o[9][0].data)][0],f=kn(c.data),p=t[eo(f[1][0].data)][0],g=Zi(p.meta[1][0].data);if(g!=2001)throw new Error("2000 unexpected reference to ".concat(g));var m=kn(p.data);s[l]=m[3].map(function(_){return M_(_.data)}).join("")}break}}),s}function Qoe(t,e){var r,n,i,s,a,o,l,c,f,p,g,m,_,w,b=kn(t),k=Zi(b[1][0].data)>>>0,R=Zi(b[2][0].data)>>>0,C=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&Zi(b[8][0].data)>0||!1,j,X;if((s=(i=b[7])==null?void 0:i[0])!=null&&s.data&&e!=0)j=(o=(a=b[7])==null?void 0:a[0])==null?void 0:o.data,X=(c=(l=b[6])==null?void 0:l[0])==null?void 0:c.data;else if((p=(f=b[4])==null?void 0:f[0])!=null&&p.data&&e!=1)j=(m=(g=b[4])==null?void 0:g[0])==null?void 0:m.data,X=(w=(_=b[3])==null?void 0:_[0])==null?void 0:w.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var K=C?4:1,P=qd(j),A=[],T=0;T<j.length/2;++T){var O=P.getUint16(T*2,!0);O<65535&&A.push([T,O])}if(A.length!=R)throw"Expected ".concat(R," cells, found ").concat(A.length);var I=[];for(T=0;T<A.length-1;++T)I[A[T][0]]=X.subarray(A[T][1]*K,A[T+1][1]*K);return A.length>=1&&(I[A[A.length-1][0]]=X.subarray(A[A.length-1][1]*K)),{R:k,cells:I}}function Joe(t,e){var r,n=kn(e.data),i=(r=n?.[7])!=null&&r[0]?Zi(n[7][0].data)>>>0>0?1:0:-1,s=_3(n[5],function(a){return Qoe(a,i)});return{nrows:Zi(n[4][0].data)>>>0,data:s.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(l,c){if(a[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));a[o.R][c]=l}),a},[])}}function Zoe(t,e,r){var n,i=kn(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Zi(i[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(i[6][0].data));if(s.e.c=(Zi(i[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(i[7][0].data));r["!ref"]=Ur(s);var a=kn(i[4][0].data),o=zT(t,t[eo(a[4][0].data)][0]),l=(n=a[17])!=null&&n[0]?zT(t,t[eo(a[17][0].data)][0]):[],c=kn(a[3][0].data),f=0;c[1].forEach(function(p){var g=kn(p.data),m=t[eo(g[2][0].data)][0],_=Zi(m.meta[1][0].data);if(_!=6002)throw new Error("6001 unexpected reference to ".concat(_));var w=Joe(t,m);w.data.forEach(function(b,k){b.forEach(function(R,C){var j=Cr({r:f+k,c:C}),X=Yoe(R,o,l);X&&(r[j]=X)})}),f+=w.nrows})}function ele(t,e){var r=kn(e.data),n={"!ref":"A1"},i=t[eo(r[2][0].data)],s=Zi(i[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return Zoe(t,i[0],n),n}function tle(t,e){var r,n=kn(e.data),i={name:(r=n[1])!=null&&r[0]?M_(n[1][0].data):"",sheets:[]},s=_3(n[2],eo);return s.forEach(function(a){t[a].forEach(function(o){var l=Zi(o.meta[1][0].data);l==6e3&&i.sheets.push(ele(t,o))})}),i}function rle(t,e){var r=T3(),n=kn(e.data),i=_3(n[1],eo);if(i.forEach(function(s){t[s].forEach(function(a){var o=Zi(a.meta[1][0].data);if(o==2){var l=tle(t,a);l.sheets.forEach(function(c,f){A3(r,c,f==0?l.name:l.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function l5(t){var e,r,n,i,s={},a=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=Il(l.content)}catch(p){return console.log("?? "+l.content.length+" "+(p.message||p))}var f;try{f=Cl(c)}catch(p){return console.log("## "+(p.message||p))}f.forEach(function(p){s[p.id]=p.messages,a.push(p.id)})}}),!a.length)throw new Error("File has no messages");var o=((i=(n=(r=(e=s?.[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:i[0].data)&&Zi(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||a.forEach(function(l){s[l].forEach(function(c){var f=Zi(c.meta[1][0].data)>>>0;if(f==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return rle(s,o)}function nle(t,e,r){var n,i,s,a;if(!((n=t[6])!=null&&n[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=t[8])==null?void 0:s[0])==null?void 0:a.data)&&Zi(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,c=qd(t[7][0].data),f=0,p=[],g=qd(t[4][0].data),m=0,_=[],w=0;w<e.length;++w){if(e[w]==null){c.setUint16(w*2,65535,!0),g.setUint16(w*2,65535);continue}c.setUint16(w*2,f,!0),g.setUint16(w*2,m,!0);var b,k;switch(typeof e[w]){case"string":b=a5({t:"s",v:e[w]},r),k=o5({t:"s",v:e[w]},r);break;case"number":b=a5({t:"n",v:e[w]},r),k=o5({t:"n",v:e[w]},r);break;case"boolean":b=a5({t:"b",v:e[w]},r),k=o5({t:"b",v:e[w]},r);break;default:throw new Error("Unsupported value "+e[w])}p.push(b),f+=b.length,_.push(k),m+=k.length,++l}for(t[2][0].data=Vn(l);w<t[7][0].data.length/2;++w)c.setUint16(w*2,65535,!0),g.setUint16(w*2,65535,!0);return t[6][0].data=yh(p),t[3][0].data=yh(_),l}function ile(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=jo(r["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Ur(n)));var s=Sv(r,{range:n,header:1}),a=["~Sh33tJ5~"];s.forEach(function(U){return U.forEach(function(W){typeof W=="string"&&a.push(W)})});var o={},l=[],c=yr.read(e.numbers,{type:"base64"});c.FileIndex.map(function(U,W){return[U,c.FullPaths[W]]}).forEach(function(U){var W=U[0],Y=U[1];if(W.type==2&&W.name.match(/\.iwa/)){var ae=W.content,pe=Il(ae),he=Cl(pe);he.forEach(function(xe){l.push(xe.id),o[xe.id]={deps:[],location:Y,type:Zi(xe.messages[0].meta[1][0].data)}})}}),l.sort(function(U,W){return U-W});var f=l.filter(function(U){return U>1}).map(function(U){return[U,Vn(U)]});c.FileIndex.map(function(U,W){return[U,c.FullPaths[W]]}).forEach(function(U){var W=U[0];if(U[1],!!W.name.match(/\.iwa/)){var Y=Cl(Il(W.content));Y.forEach(function(ae){ae.messages.forEach(function(pe){f.forEach(function(he){ae.messages.some(function(xe){return Zi(xe.meta[1][0].data)!=11006&&qoe(xe.data,he[1])})&&o[he[0]].deps.push(ae.id)})})})}});for(var p=yr.find(c,o[1].location),g=Cl(Il(p.content)),m,_=0;_<g.length;++_){var w=g[_];w.id==1&&(m=w)}var b=eo(kn(m.messages[0].data)[1][0].data);for(p=yr.find(c,o[b].location),g=Cl(Il(p.content)),_=0;_<g.length;++_)w=g[_],w.id==b&&(m=w);for(b=eo(kn(m.messages[0].data)[2][0].data),p=yr.find(c,o[b].location),g=Cl(Il(p.content)),_=0;_<g.length;++_)w=g[_],w.id==b&&(m=w);for(b=eo(kn(m.messages[0].data)[2][0].data),p=yr.find(c,o[b].location),g=Cl(Il(p.content)),_=0;_<g.length;++_)w=g[_],w.id==b&&(m=w);var k=kn(m.messages[0].data);{k[6][0].data=Vn(n.e.r+1),k[7][0].data=Vn(n.e.c+1);var R=eo(k[46][0].data),C=yr.find(c,o[R].location),j=Cl(Il(C.content));{for(var X=0;X<j.length&&j[X].id!=R;++X);if(j[X].id!=R)throw"Bad ColumnRowUIDMapArchive";var K=kn(j[X].messages[0].data);K[1]=[],K[2]=[],K[3]=[];for(var P=0;P<=n.e.c;++P){var A=[];A[1]=A[2]=[{type:0,data:Vn(P+420690)}],K[1].push({type:2,data:wa(A)}),K[2].push({type:0,data:Vn(P)}),K[3].push({type:0,data:Vn(P)})}K[4]=[],K[5]=[],K[6]=[];for(var T=0;T<=n.e.r;++T)A=[],A[1]=A[2]=[{type:0,data:Vn(T+726270)}],K[4].push({type:2,data:wa(A)}),K[5].push({type:0,data:Vn(T)}),K[6].push({type:0,data:Vn(T)});j[X].messages[0].data=wa(K)}C.content=j0(O0(j)),C.size=C.content.length,delete k[46];var O=kn(k[4][0].data);{O[7][0].data=Vn(n.e.r+1);var I=kn(O[1][0].data),D=eo(I[2][0].data);C=yr.find(c,o[D].location),j=Cl(Il(C.content));{if(j[0].id!=D)throw"Bad HeaderStorageBucket";var B=kn(j[0].messages[0].data);for(T=0;T<s.length;++T){var re=kn(B[2][0].data);re[1][0].data=Vn(T),re[4][0].data=Vn(s[T].length),B[2][T]={type:B[2][0].type,data:wa(re)}}j[0].messages[0].data=wa(B)}C.content=j0(O0(j)),C.size=C.content.length;var _e=eo(O[2][0].data);C=yr.find(c,o[_e].location),j=Cl(Il(C.content));{if(j[0].id!=_e)throw"Bad HeaderStorageBucket";for(B=kn(j[0].messages[0].data),P=0;P<=n.e.c;++P)re=kn(B[2][0].data),re[1][0].data=Vn(P),re[4][0].data=Vn(n.e.r+1),B[2][P]={type:B[2][0].type,data:wa(re)};j[0].messages[0].data=wa(B)}C.content=j0(O0(j)),C.size=C.content.length;var Ce=eo(O[4][0].data);(function(){for(var U=yr.find(c,o[Ce].location),W=Cl(Il(U.content)),Y,ae=0;ae<W.length;++ae){var pe=W[ae];pe.id==Ce&&(Y=pe)}var he=kn(Y.messages[0].data);{he[3]=[];var xe=[];a.forEach(function(oe,Ze){xe[1]=[{type:0,data:Vn(Ze)}],xe[2]=[{type:0,data:Vn(1)}],xe[3]=[{type:2,data:$oe(oe)}],he[3].push({type:2,data:wa(xe)})})}Y.messages[0].data=wa(he);var ke=O0(W),Fe=j0(ke);U.content=Fe,U.size=U.content.length})();var we=kn(O[3][0].data);{var ce=we[1][0];delete we[2];var H=kn(ce.data);{var te=eo(H[2][0].data);(function(){for(var U=yr.find(c,o[te].location),W=Cl(Il(U.content)),Y,ae=0;ae<W.length;++ae){var pe=W[ae];pe.id==te&&(Y=pe)}var he=kn(Y.messages[0].data);{delete he[6],delete we[7];var xe=new Uint8Array(he[5][0].data);he[5]=[];for(var ke=0,Fe=0;Fe<=n.e.r;++Fe){var oe=kn(xe);ke+=nle(oe,s[Fe],a),oe[1][0].data=Vn(Fe),he[5].push({data:wa(oe),type:2})}he[1]=[{type:0,data:Vn(n.e.c+1)}],he[2]=[{type:0,data:Vn(n.e.r+1)}],he[3]=[{type:0,data:Vn(ke)}],he[4]=[{type:0,data:Vn(n.e.r+1)}]}Y.messages[0].data=wa(he);var Ze=O0(W),Re=j0(Ze);U.content=Re,U.size=U.content.length})()}ce.data=wa(H)}O[3][0].data=wa(we)}k[4][0].data=wa(O)}m.messages[0].data=wa(k);var J=O0(g),N=j0(J);return p.content=N,p.size=p.content.length,c}function $9(t){return function(r){for(var n=0;n!=t.length;++n){var i=t[n];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function b3(t){$9([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function E3(t){$9([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function sle(t){return en.WS.indexOf(t)>-1?"sheet":t==en.CS?"chart":t==en.DS?"dialog":t==en.MS?"macro":t&&t.length?t:"sheet"}function ale(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,sle(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function ole(t,e,r,n,i,s,a,o,l,c,f,p){try{s[n]=_1(il(t,r,!0),e);var g=Ns(t,e),m;switch(o){case"sheet":m=Cae(g,e,i,l,s[n],c,f,p);break;case"chart":if(m=Iae(g,e,i,l,s[n],c,f,p),!m||!m["!drawel"])break;var _=o1(m["!drawel"].Target,e),w=eg(_),b=gre(il(t,_,!0),_1(il(t,w,!0),_)),k=o1(b,_),R=eg(k);m=nae(il(t,k,!0),k,l,_1(il(t,R,!0),k),c,m);break;case"macro":m=Pae(g,e,i,l,s[n],c,f,p);break;case"dialog":m=Rae(g,e,i,l,s[n],c,f,p);break;default:throw new Error("Unrecognized sheet type "+o)}a[n]=m;var C=[];s&&s[n]&&ts(s[n]).forEach(function(j){var X="";if(s[n][j].Type==en.CMNT){X=o1(s[n][j].Target,e);var K=Oae(Ns(t,X,!0),X,l);if(!K||!K.length)return;AT(m,K,!1)}s[n][j].Type==en.TCMNT&&(X=o1(s[n][j].Target,e),C=C.concat(vre(Ns(t,X,!0),l)))}),C&&C.length&&AT(m,C,!0,l.people||[])}catch(j){if(l.WTF)throw j}}function Al(t){return t.charAt(0)=="/"?t.slice(1):t}function lle(t,e){if(om(),e=e||{},b3(e),Rl(t,"META-INF/manifest.xml")||Rl(t,"objectdata.xml"))return MT(t,e);if(Rl(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof l5<"u"){if(t.FileIndex)return l5(t);var r=yr.utils.cfb_new();return Kk(t).forEach(function(re){$r(r,re,yQ(t,re))}),l5(r)}throw new Error("Unsupported NUMBERS file")}if(!Rl(t,"[Content_Types].xml"))throw Rl(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Rl(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=Kk(t),i=hJ(il(t,"[Content_Types].xml")),s=!1,a,o;if(i.workbooks.length===0&&(o="xl/workbook.xml",Ns(t,o,!0)&&i.workbooks.push(o)),i.workbooks.length===0){if(o="xl/workbook.bin",!Ns(t,o,!0))throw new Error("Could not find workbook");i.workbooks.push(o),s=!0}i.workbooks[0].slice(-3)=="bin"&&(s=!0);var l={},c={};if(!e.bookSheets&&!e.bookProps){if(b1=[],i.sst)try{b1=Dae(Ns(t,Al(i.sst)),i.sst,e)}catch(re){if(e.WTF)throw re}e.cellStyles&&i.themes.length&&(l=Lae(il(t,i.themes[0].replace(/^\//,""),!0)||"",i.themes[0],e)),i.style&&(c=Fae(Ns(t,Al(i.style)),i.style,l,e))}i.links.map(function(re){try{var _e=_1(il(t,eg(Al(re))),re);return Mae(Ns(t,Al(re)),_e,re,e)}catch{}});var f=Nae(Ns(t,Al(i.workbooks[0])),i.workbooks[0],e),p={},g="";i.coreprops.length&&(g=Ns(t,Al(i.coreprops[0]),!0),g&&(p=PR(g)),i.extprops.length!==0&&(g=Ns(t,Al(i.extprops[0]),!0),g&&yJ(g,p,e)));var m={};(!e.bookSheets||e.bookProps)&&i.custprops.length!==0&&(g=il(t,Al(i.custprops[0]),!0),g&&(m=_J(g,e)));var _={};if((e.bookSheets||e.bookProps)&&(f.Sheets?a=f.Sheets.map(function(_e){return _e.name}):p.Worksheets&&p.SheetNames.length>0&&(a=p.SheetNames),e.bookProps&&(_.Props=p,_.Custprops=m),e.bookSheets&&typeof a<"u"&&(_.SheetNames=a),e.bookSheets?_.SheetNames:e.bookProps))return _;a={};var w={};e.bookDeps&&i.calcchain&&(w=jae(Ns(t,Al(i.calcchain)),i.calcchain));var b=0,k={},R,C;{var j=f.Sheets;p.Worksheets=j.length,p.SheetNames=[];for(var X=0;X!=j.length;++X)p.SheetNames[X]=j[X].name}var K=s?"bin":"xml",P=i.workbooks[0].lastIndexOf("/"),A=(i.workbooks[0].slice(0,P+1)+"_rels/"+i.workbooks[0].slice(P+1)+".rels").replace(/^\//,"");Rl(t,A)||(A="xl/_rels/workbook."+K+".rels");var T=_1(il(t,A,!0),A.replace(/_rels.*/,"s5s"));(i.metadata||[]).length>=1&&(e.xlmeta=Bae(Ns(t,Al(i.metadata[0])),i.metadata[0],e)),(i.people||[]).length>=1&&(e.people=wre(Ns(t,Al(i.people[0])),e)),T&&(T=ale(T,f.Sheets));var O=Ns(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=p.Worksheets;++b){var I="sheet";if(T&&T[b]?(R="xl/"+T[b][1].replace(/[\/]?xl\//,""),Rl(t,R)||(R=T[b][1]),Rl(t,R)||(R=A.replace(/_rels\/.*$/,"")+T[b][1]),I=T[b][2]):(R="xl/worksheets/sheet"+(b+1-O)+"."+K,R=R.replace(/sheet0\./,"sheet.")),C=R.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(b!=e.sheets)continue e;break;case"string":if(p.SheetNames[b].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var D=!1,B=0;B!=e.sheets.length;++B)typeof e.sheets[B]=="number"&&e.sheets[B]==b&&(D=1),typeof e.sheets[B]=="string"&&e.sheets[B].toLowerCase()==p.SheetNames[b].toLowerCase()&&(D=1);if(!D)continue e}}ole(t,R,C,p.SheetNames[b],b,k,a,I,e,f,l,c)}return _={Directory:i,Workbook:f,Props:p,Custprops:m,Deps:w,Sheets:a,SheetNames:p.SheetNames,Strings:b1,Styles:c,Themes:l,SSF:wi(Tr)},e&&e.bookFiles&&(t.files?(_.keys=n,_.files=t.files):(_.keys=[],_.files={},t.FullPaths.forEach(function(re,_e){re=re.replace(/^Root Entry[\/]/,""),_.keys.push(re),_.files[re]=t.FileIndex[_e]}))),e&&e.bookVBA&&(i.vba.length>0?_.vbaraw=Ns(t,Al(i.vba[0]),!0):i.defaults&&i.defaults.bin===Nre&&(_.vbaraw=Ns(t,"xl/vbaProject.bin",!0))),_}function cle(t,e){var r=e||{},n="Workbook",i=yr.find(t,n);try{if(n="/!DataSpaces/Version",i=yr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Bee(i.content),n="/!DataSpaces/DataSpaceMap",i=yr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=Uee(i.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",i=yr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=zee(i.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",i=yr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);qee(i.content)}catch{}if(n="/EncryptionInfo",i=yr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=Hee(i.content);if(n="/EncryptedPackage",i=yr.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],i.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],i.content,r.password||"",r);throw new Error("File is password-protected")}function ule(t,e){return e.bookType=="ods"?z9(t,e):e.bookType=="numbers"?ile(t,e):e.bookType=="xlsb"?fle(t,e):hle(t,e)}function fle(t,e){Q0=1024,t&&!t.SSF&&(t.SSF=wi(Tr)),t&&t.SSF&&(om(),yy(t.SSF),e.revssf=_y(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,E1?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=g9.indexOf(e.bookType)>-1,i=l3();E3(e=e||{});var s=Kb(),a="",o=0;if(e.cellXfs=[],Fh(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",$r(s,a,RR(t.Props,e)),i.coreprops.push(a),Un(e.rels,2,a,en.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,$r(s,a,DR(t.Props)),i.extprops.push(a),Un(e.rels,3,a,en.EXT_PROPS),t.Custprops!==t.Props&&ts(t.Custprops||{}).length>0&&(a="docProps/custom.xml",$r(s,a,OR(t.Custprops)),i.custprops.push(a),Un(e.rels,4,a,en.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var f={"!id":{}},p=t.Sheets[t.SheetNames[o-1]],g=(p||{})["!type"]||"sheet";switch(g){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,$r(s,a,Uae(o-1,a,e,t,f)),i.sheets.push(a),Un(e.wbrels,-1,"worksheets/sheet"+o+"."+r,en.WS[0])}if(p){var m=p["!comments"],_=!1,w="";m&&m.length>0&&(w="xl/comments"+o+"."+r,$r(s,w,qae(m,w)),i.comments.push(w),Un(f,-1,"../comments"+o+"."+r,en.CMNT),_=!0),p["!legacy"]&&_&&$r(s,"xl/drawings/vmlDrawing"+o+".vml",p9(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}f["!id"].rId1&&$r(s,eg(a),cp(f))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,$r(s,a,$ae(e.Strings,a,e)),i.strs.push(a),Un(e.wbrels,-1,"sharedStrings."+r,en.SST)),a="xl/workbook."+r,$r(s,a,Vae(t,a)),i.workbooks.push(a),Un(e.rels,1,a,en.WB),a="xl/theme/theme1.xml",$r(s,a,p3(t.Themes,e)),i.themes.push(a),Un(e.wbrels,-1,"theme/theme1.xml",en.THEME),a="xl/styles."+r,$r(s,a,zae(t,a,e)),i.styles.push(a),Un(e.wbrels,-1,"styles."+r,en.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",$r(s,a,t.vbaraw),i.vba.push(a),Un(e.wbrels,-1,"vbaProject.bin",en.VBA)),a="xl/metadata."+r,$r(s,a,Hae(a)),i.metadata.push(a),Un(e.wbrels,-1,"metadata."+r,en.XLMETA),$r(s,"[Content_Types].xml",CR(i,e)),$r(s,"_rels/.rels",cp(e.rels)),$r(s,"xl/_rels/workbook."+r+".rels",cp(e.wbrels)),delete e.revssf,delete e.ssf,s}function hle(t,e){Q0=1024,t&&!t.SSF&&(t.SSF=wi(Tr)),t&&t.SSF&&(om(),yy(t.SSF),e.revssf=_y(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,E1?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=g9.indexOf(e.bookType)>-1,i=l3();E3(e=e||{});var s=Kb(),a="",o=0;if(e.cellXfs=[],Fh(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",$r(s,a,RR(t.Props,e)),i.coreprops.push(a),Un(e.rels,2,a,en.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,$r(s,a,DR(t.Props)),i.extprops.push(a),Un(e.rels,3,a,en.EXT_PROPS),t.Custprops!==t.Props&&ts(t.Custprops||{}).length>0&&(a="docProps/custom.xml",$r(s,a,OR(t.Custprops)),i.custprops.push(a),Un(e.rels,4,a,en.CUST_PROPS));var f=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var p={"!id":{}},g=t.Sheets[t.SheetNames[o-1]],m=(g||{})["!type"]||"sheet";switch(m){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,$r(s,a,A9(o-1,e,t,p)),i.sheets.push(a),Un(e.wbrels,-1,"worksheets/sheet"+o+"."+r,en.WS[0])}if(g){var _=g["!comments"],w=!1,b="";if(_&&_.length>0){var k=!1;_.forEach(function(R){R[1].forEach(function(C){C.T==!0&&(k=!0)})}),k&&(b="xl/threadedComments/threadedComment"+o+"."+r,$r(s,b,yre(_,f,e)),i.threadedcomments.push(b),Un(p,-1,"../threadedComments/threadedComment"+o+"."+r,en.TCMNT)),b="xl/comments"+o+"."+r,$r(s,b,m9(_)),i.comments.push(b),Un(p,-1,"../comments"+o+"."+r,en.CMNT),w=!0}g["!legacy"]&&w&&$r(s,"xl/drawings/vmlDrawing"+o+".vml",p9(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}p["!id"].rId1&&$r(s,eg(a),cp(p))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,$r(s,a,r9(e.Strings,e)),i.strs.push(a),Un(e.wbrels,-1,"sharedStrings."+r,en.SST)),a="xl/workbook."+r,$r(s,a,R9(t)),i.workbooks.push(a),Un(e.rels,1,a,en.WB),a="xl/theme/theme1.xml",$r(s,a,p3(t.Themes,e)),i.themes.push(a),Un(e.wbrels,-1,"theme/theme1.xml",en.THEME),a="xl/styles."+r,$r(s,a,u9(t,e)),i.styles.push(a),Un(e.wbrels,-1,"styles."+r,en.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",$r(s,a,t.vbaraw),i.vba.push(a),Un(e.wbrels,-1,"vbaProject.bin",en.VBA)),a="xl/metadata."+r,$r(s,a,d9()),i.metadata.push(a),Un(e.wbrels,-1,"metadata."+r,en.XLMETA),f.length>1&&(a="xl/persons/person.xml",$r(s,a,_re(f)),i.people.push(a),Un(e.wbrels,-1,"persons/person.xml",en.PEOPLE)),$r(s,"[Content_Types].xml",CR(i,e)),$r(s,"_rels/.rels",cp(e.rels)),$r(s,"xl/_rels/workbook."+r+".rels",cp(e.wbrels)),delete e.revssf,delete e.ssf,s}function S3(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=ul(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function dle(t,e){return yr.find(t,"EncryptedPackage")?cle(t,e):O9(t,e)}function ple(t,e){var r,n=t,i=e||{};return i.type||(i.type=Xr&&Buffer.isBuffer(t)?"buffer":"base64"),r=iR(n,i),lle(r,i)}function q9(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return O_(t.slice(r),e);default:break e}return jp.to_workbook(t,e)}function mle(t,e){var r="",n=S3(t,e);switch(e.type){case"base64":r=ul(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Vd(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Xn(r)),e.type="binary",q9(r,e)}function gle(t,e){var r=t;return e.type=="base64"&&(r=ul(r)),r=K1.utils.decode(1200,r.slice(2),"str"),e.type="binary",q9(r,e)}function xle(t){return t.match(/[^\x00-\x7F]/)?qc(t):t}function c5(t,e,r,n){return n?(r.type="string",jp.to_workbook(t,r)):jp.to_workbook(e,r)}function B_(t,e){$b();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return B_(new Uint8Array(t),(r=wi(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,i=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),fp={},r.dateNF&&(fp.dateNF=r.dateNF),r.type||(r.type=Xr&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Xr?"buffer":"binary",n=fQ(t),typeof Uint8Array<"u"&&!Xr&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=xle(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return r=wi(r),r.type="array",B_(qb(n),r)}switch((i=S3(n,r))[0]){case 208:if(i[1]===207&&i[2]===17&&i[3]===224&&i[4]===161&&i[5]===177&&i[6]===26&&i[7]===225)return dle(yr.read(n,r),r);break;case 9:if(i[1]<=8)return O9(n,r);break;case 60:return O_(n,r);case 73:if(i[1]===73&&i[2]===42&&i[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(i[1]===68)return bee(n,r);break;case 84:if(i[1]===65&&i[2]===66&&i[3]===76)return e9.to_workbook(n,r);break;case 80:return i[1]===75&&i[2]<9&&i[3]<9?ple(n,r):c5(t,n,r,s);case 239:return i[3]===60?O_(n,r):c5(t,n,r,s);case 255:if(i[1]===254)return gle(n,r);if(i[1]===0&&i[2]===2&&i[3]===0)return wd.to_workbook(n,r);break;case 0:if(i[1]===0&&(i[2]>=2&&i[3]===0||i[2]===0&&(i[3]===8||i[3]===9)))return wd.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return D_.to_workbook(n,r);case 123:if(i[1]===92&&i[2]===114&&i[3]===116)return o9.to_workbook(n,r);break;case 10:case 13:case 32:return mle(n,r);case 137:if(i[1]===80&&i[2]===78&&i[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return _ee.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?D_.to_workbook(n,r):c5(t,n,r,s)}function H9(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Og(e.file,yr.write(t,{type:Xr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return yr.write(t,e)}function vle(t,e){var r=wi(e||{}),n=ule(t,r);return yle(n,r)}function yle(t,e){var r={},n=Xr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?yr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(vy(i))}return e.password&&typeof encrypt_agile<"u"?H9(encrypt_agile(i,e.password),e):e.type==="file"?Og(e.file,i):e.type=="string"?Xn(i):i}function wle(t,e){var r=e||{},n=xoe(t,r);return H9(n,r)}function Oc(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return X1(qc(n));case"binary":return qc(n);case"string":return t;case"file":return Og(e.file,n,"utf8");case"buffer":return Xr?ef(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Oc(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function _le(t,e){switch(e.type){case"base64":return X1(t);case"binary":return t;case"string":return t;case"file":return Og(e.file,t,"binary");case"buffer":return Xr?ef(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function t2(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?X1(r):e.type=="string"?Xn(r):r;case"file":return Og(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function W9(t,e){$b(),dae(t);var r=wi(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=W9(t,r);return r.type="array",vy(n)}var i=0;if(r.sheet&&(typeof r.sheet=="number"?i=r.sheet:i=t.SheetNames.indexOf(r.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Oc(uoe(t,r),r);case"slk":case"sylk":return Oc(ZR.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"htm":case"html":return Oc(M9(t.Sheets[t.SheetNames[i]],r),r);case"txt":return _le(G9(t.Sheets[t.SheetNames[i]],r),r);case"csv":return Oc(k3(t.Sheets[t.SheetNames[i]],r),r,"\uFEFF");case"dif":return Oc(e9.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"dbf":return t2(D_.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"prn":return Oc(jp.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"rtf":return Oc(o9.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"eth":return Oc(t9.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"fods":return Oc(z9(t,r),r);case"wk1":return t2(wd.sheet_to_wk1(t.Sheets[t.SheetNames[i]],r),r);case"wk3":return t2(wd.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),t2(j9(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),wle(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return vle(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function ble(t,e,r,n,i,s,a,o){var l=vs(r),c=o.defval,f=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),p=!0,g=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:r,enumerable:!1})}catch{g.__rowNum__=r}else g.__rowNum__=r;if(!a||t[r])for(var m=e.s.c;m<=e.e.c;++m){var _=a?t[r][m]:t[n[m]+l];if(_===void 0||_.t===void 0){if(c===void 0)continue;s[m]!=null&&(g[s[m]]=c);continue}var w=_.v;switch(_.t){case"z":if(w==null)break;continue;case"e":w=w==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+_.t)}if(s[m]!=null){if(w==null)if(_.t=="e"&&w===null)g[s[m]]=null;else if(c!==void 0)g[s[m]]=c;else if(f&&w===null)g[s[m]]=null;else continue;else g[s[m]]=f&&(_.t!=="n"||_.t==="n"&&o.rawNumbers!==!1)?w:Hu(_,w,o);w!=null&&(p=!1)}}return{row:g,isempty:p}}function Sv(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},f=c.range!=null?c.range:t["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof f){case"string":l=_n(f);break;case"number":l=_n(t["!ref"]),l.s.r=f;break;default:l=f}n>0&&(i=0);var p=vs(l.s.r),g=[],m=[],_=0,w=0,b=Array.isArray(t),k=l.s.r,R=0,C={};b&&!t[k]&&(t[k]=[]);var j=c.skipHidden&&t["!cols"]||[],X=c.skipHidden&&t["!rows"]||[];for(R=l.s.c;R<=l.e.c;++R)if(!(j[R]||{}).hidden)switch(g[R]=Vi(R),r=b?t[k][R]:t[g[R]+p],n){case 1:s[R]=R-l.s.c;break;case 2:s[R]=g[R];break;case 3:s[R]=c.header[R-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=Hu(r,null,c),w=C[a]||0,!w)C[a]=1;else{do o=a+"_"+w++;while(C[o]);C[a]=w,C[o]=1}s[R]=o}for(k=l.s.r+i;k<=l.e.r;++k)if(!(X[k]||{}).hidden){var K=ble(t,l,k,g,n,s,b,c);(K.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(m[_++]=K.row)}return m.length=_,m}var $T=/"/g;function Ele(t,e,r,n,i,s,a,o){for(var l=!0,c=[],f="",p=vs(r),g=e.s.c;g<=e.e.c;++g)if(n[g]){var m=o.dense?(t[r]||[])[g]:t[n[g]+p];if(m==null)f="";else if(m.v!=null){l=!1,f=""+(o.rawNumbers&&m.t=="n"?m.v:Hu(m,null,o));for(var _=0,w=0;_!==f.length;++_)if((w=f.charCodeAt(_))===i||w===s||w===34||o.forceQuotes){f='"'+f.replace($T,'""')+'"';break}f=="ID"&&(f='"ID"')}else m.f!=null&&!m.F?(l=!1,f="="+m.f,f.indexOf(",")>=0&&(f='"'+f.replace($T,'""')+'"')):f="";c.push(f)}return o.blankrows===!1&&l?null:c.join(a)}function k3(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var i=_n(t["!ref"]),s=n.FS!==void 0?n.FS:",",a=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((s=="|"?"\\|":s)+"+$"),f="",p=[];n.dense=Array.isArray(t);for(var g=n.skipHidden&&t["!cols"]||[],m=n.skipHidden&&t["!rows"]||[],_=i.s.c;_<=i.e.c;++_)(g[_]||{}).hidden||(p[_]=Vi(_));for(var w=0,b=i.s.r;b<=i.e.r;++b)(m[b]||{}).hidden||(f=Ele(t,i,b,p,a,l,s,n),f!=null&&(n.strip&&(f=f.replace(c,"")),(f||n.blankrows!==!1)&&r.push((w++?o:"")+f)));return delete n.dense,r.join("")}function G9(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=k3(t,e);return r}function Sle(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var i=_n(t["!ref"]),s="",a=[],o,l=[],c=Array.isArray(t);for(o=i.s.c;o<=i.e.c;++o)a[o]=Vi(o);for(var f=i.s.r;f<=i.e.r;++f)for(s=vs(f),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,r=c?(t[f]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function K9(t,e,r){var n=r||{},i=+!n.skipHeader,s=t||{},a=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?Ui(n.origin):n.origin;a=l.r,o=l.c}var c,f={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var p=_n(s["!ref"]);f.e.c=Math.max(f.e.c,p.e.c),f.e.r=Math.max(f.e.r,p.e.r),a==-1&&(a=p.e.r+1,f.e.r=a+e.length-1+i)}else a==-1&&(a=0,f.e.r=e.length-1+i);var g=n.header||[],m=0;e.forEach(function(w,b){ts(w).forEach(function(k){(m=g.indexOf(k))==-1&&(g[m=g.length]=k);var R=w[k],C="z",j="",X=Cr({c:o+m,r:a+b+i});c=og(s,X),R&&typeof R=="object"&&!(R instanceof Date)?s[X]=R:(typeof R=="number"?C="n":typeof R=="boolean"?C="b":typeof R=="string"?C="s":R instanceof Date?(C="d",n.cellDates||(C="n",R=qs(R)),j=n.dateNF||Tr[14]):R===null&&n.nullError&&(C="e",R=0),c?(c.t=C,c.v=R,delete c.w,delete c.R,j&&(c.z=j)):s[X]=c={t:C,v:R},j&&(c.z=j))})}),f.e.c=Math.max(f.e.c,o+g.length-1);var _=vs(a);if(i)for(m=0;m<g.length;++m)s[Vi(m+o)+_]={t:"s",v:g[m]};return s["!ref"]=Ur(f),s}function kle(t,e){return K9(null,t,e)}function og(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Ui(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?og(t,Cr(e)):og(t,Cr({r:e,c:r||0}))}function Tle(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function T3(){return{SheetNames:[],Sheets:{}}}function A3(t,e,r,n){var i=1;if(!r)for(;i<=65535&&t.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||r;for(++i;i<=65535&&t.SheetNames.indexOf(r=a+i)!=-1;++i);}if(P9(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Ale(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=Tle(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Nle(t,e){return t.z=e,t}function X9(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Cle(t,e,r){return X9(t,"#"+e,r)}function Ile(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function Ple(t,e,r,n){for(var i=typeof e!="string"?e:_n(e),s=typeof e=="string"?e:Ur(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=og(t,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=r,n&&(l.D=!0))}return t}var A2={encode_col:Vi,encode_row:vs,encode_cell:Cr,encode_range:Ur,decode_col:r3,decode_row:t3,split_cell:$Q,decode_cell:Ui,decode_range:jo,format_cell:Hu,sheet_add_aoa:bR,sheet_add_json:K9,sheet_add_dom:B9,aoa_to_sheet:lm,json_to_sheet:kle,table_to_sheet:V9,table_to_book:Boe,sheet_to_csv:k3,sheet_to_txt:G9,sheet_to_json:Sv,sheet_to_html:M9,sheet_to_formulae:Sle,sheet_to_row_object_array:Sv,sheet_get_cell:og,book_new:T3,book_append_sheet:A3,book_set_sheet_visibility:Ale,cell_set_number_format:Nle,cell_set_hyperlink:X9,cell_set_internal_link:Cle,cell_add_comment:Ile,sheet_set_array_formula:Ple,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Rle=t=>new Promise((e,r)=>{VP.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>e(n.data),error:r})}),Fle=async t=>{const e=await t.arrayBuffer(),r=B_(e,{type:"array"}),n=r.Sheets[r.SheetNames[0]];return A2.sheet_to_json(n)};function Y9({pharmacyId:t,onClose:e}){const[r,n]=z.useState(""),i=()=>{const a=[{name:"Paracetamol",price:800,description:"OTC analgesic",image:"https://...",category:"OvertheCounter",stock:50,sku:"PAR-500"},{name:"Ibuprofen",price:1200,description:"NSAID",image:"https://...",category:"OvertheCounter",stock:30,sku:"IBU-200"}],o=Object.keys(a[0]),l=[o.join(","),...a.map(g=>o.map(m=>g[m]).join(","))].join(`
`),c=new Blob([l],{type:"text/csv;charset=utf-8;"}),f=URL.createObjectURL(c),p=document.createElement("a");p.href=f,p.download="pharmasea_inventory_template.csv",p.click(),URL.revokeObjectURL(f)},s=async a=>{try{n("");const o=a?.[0];if(!o)return;let l=[];o.name.endsWith(".csv")?l=await Rle(o):l=await Fle(o);const c=l.map(f=>({name:f.name,price:Number(f.price),description:f.description||"",image:f.image||"",category:f.category||"OvertheCounter",stock:Number(f.stock||0),sku:f.sku||""})).filter(f=>f.name&&f.price);if(!c.length)throw new Error("No valid rows found. Expect headers: name, price, description, image, category, stock, sku");await E7(c,t),e()}catch(o){n(o.message||"Failed to parse file")}};return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 backdrop-blur-sm animate-fade-in",children:d.jsxs("div",{className:"bg-white rounded-3xl p-6 w-[90vw] max-w-sm shadow-xl border border-[#9ED3FF] animate-bounce-in card-interactive hover:shadow-2xl transition-all duration-300",children:[d.jsx("div",{className:"text-lg font-light font-poppins mb-4 text-black animate-text-reveal",children:"Bulk Upload Products"}),d.jsx("div",{className:"space-y-3 animate-fade-in",style:{animationDelay:"0.1s"},children:d.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none focus:border-sky-500 transition-colors duration-200 hover:border-sky-400",placeholder:"CSV File",type:"file",onChange:a=>s(a.target.files),accept:".csv,.xlsx"})}),d.jsxs("div",{className:"flex gap-2 mt-6 animate-fade-in-up",style:{animationDelay:"0.2s"},children:[d.jsx("button",{onClick:i,className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700 btn-interactive hover:scale-105 active:scale-95 transition-all duration-200",children:"Download CSV template"}),d.jsx("button",{className:"flex-1 rounded-full border border-zinc-300 text-zinc-500 text-[13px] font-light py-2 btn-interactive hover:border-zinc-400 hover:scale-105 active:scale-95 transition-all duration-200",onClick:e,children:"Cancel"})]}),r&&d.jsx("div",{className:"mt-3 text-red-600 text-sm animate-shake animate-fade-in",children:r})]})})}function zn(t){"@babel/helpers - typeof";return zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zn(t)}var pc=Uint8Array,al=Uint16Array,N3=Int32Array,C3=new pc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),I3=new pc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),qT=new pc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Q9=function(t,e){for(var r=new al(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new N3(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)i[s]=s-r[n]<<5|n;return{b:r,r:i}},J9=Q9(C3,2),Lle=J9.b,V_=J9.r;Lle[28]=258,V_[258]=28;var Dle=Q9(I3,0),HT=Dle.r,U_=new al(32768);for(var vi=0;vi<32768;++vi){var Lf=(vi&43690)>>1|(vi&21845)<<1;Lf=(Lf&52428)>>2|(Lf&13107)<<2,Lf=(Lf&61680)>>4|(Lf&3855)<<4,U_[vi]=((Lf&65280)>>8|(Lf&255)<<8)>>1}var T1=(function(t,e,r){for(var n=t.length,i=0,s=new al(e);i<n;++i)t[i]&&++s[t[i]-1];var a=new al(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(r){o=new al(1<<e);var l=15-e;for(i=0;i<n;++i)if(t[i])for(var c=i<<4|t[i],f=e-t[i],p=a[t[i]-1]++<<f,g=p|(1<<f)-1;p<=g;++p)o[U_[p]>>l]=c}else for(o=new al(n),i=0;i<n;++i)t[i]&&(o[i]=U_[a[t[i]-1]++]>>15-t[i]);return o}),Hd=new pc(288);for(var vi=0;vi<144;++vi)Hd[vi]=8;for(var vi=144;vi<256;++vi)Hd[vi]=9;for(var vi=256;vi<280;++vi)Hd[vi]=7;for(var vi=280;vi<288;++vi)Hd[vi]=8;var kv=new pc(32);for(var vi=0;vi<32;++vi)kv[vi]=5;var Ole=T1(Hd,9,0),jle=T1(kv,5,0),Z9=function(t){return(t+7)/8|0},Mle=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new pc(t.subarray(e,r))},Au=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Km=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},u5=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,s=r.slice();if(!i)return{t:tF,l:0};if(i==1){var a=new pc(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(X,K){return X.f-K.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],c=0,f=1,p=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};f!=i-1;)o=r[r[c].f<r[p].f?c++:p++],l=r[c!=f&&r[c].f<r[p].f?c++:p++],r[f++]={s:-1,f:o.f+l.f,l:o,r:l};for(var g=s[0].s,n=1;n<i;++n)s[n].s>g&&(g=s[n].s);var m=new al(g+1),_=z_(r[f-1],m,0);if(_>e){var n=0,w=0,b=_-e,k=1<<b;for(s.sort(function(K,P){return m[P.s]-m[K.s]||K.f-P.f});n<i;++n){var R=s[n].s;if(m[R]>e)w+=k-(1<<_-m[R]),m[R]=e;else break}for(w>>=b;w>0;){var C=s[n].s;m[C]<e?w-=1<<e-m[C]++-1:++n}for(;n>=0&&w;--n){var j=s[n].s;m[j]==e&&(--m[j],++w)}_=e}return{t:new pc(m),l:_}},z_=function(t,e,r){return t.s==-1?Math.max(z_(t.l,e,r+1),z_(t.r,e,r+1)):e[t.s]=r},WT=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new al(++e),n=0,i=t[0],s=1,a=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=t[o]}return{c:r.subarray(0,n),n:e}},Xm=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},eF=function(t,e,r){var n=r.length,i=Z9(e+2);t[i]=n&255,t[i+1]=n>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<n;++s)t[i+s+4]=r[s];return(i+4+n)*8},GT=function(t,e,r,n,i,s,a,o,l,c,f){Au(e,f++,r),++i[256];for(var p=u5(i,15),g=p.t,m=p.l,_=u5(s,15),w=_.t,b=_.l,k=WT(g),R=k.c,C=k.n,j=WT(w),X=j.c,K=j.n,P=new al(19),A=0;A<R.length;++A)++P[R[A]&31];for(var A=0;A<X.length;++A)++P[X[A]&31];for(var T=u5(P,7),O=T.t,I=T.l,D=19;D>4&&!O[qT[D-1]];--D);var B=c+5<<3,re=Xm(i,Hd)+Xm(s,kv)+a,_e=Xm(i,g)+Xm(s,w)+a+14+3*D+Xm(P,O)+2*P[16]+3*P[17]+7*P[18];if(l>=0&&B<=re&&B<=_e)return eF(e,f,t.subarray(l,l+c));var Ce,we,ce,H;if(Au(e,f,1+(_e<re)),f+=2,_e<re){Ce=T1(g,m,0),we=g,ce=T1(w,b,0),H=w;var te=T1(O,I,0);Au(e,f,C-257),Au(e,f+5,K-1),Au(e,f+10,D-4),f+=14;for(var A=0;A<D;++A)Au(e,f+3*A,O[qT[A]]);f+=3*D;for(var J=[R,X],N=0;N<2;++N)for(var U=J[N],A=0;A<U.length;++A){var W=U[A]&31;Au(e,f,te[W]),f+=O[W],W>15&&(Au(e,f,U[A]>>5&127),f+=U[A]>>12)}}else Ce=Ole,we=Hd,ce=jle,H=kv;for(var A=0;A<o;++A){var Y=n[A];if(Y>255){var W=Y>>18&31;Km(e,f,Ce[W+257]),f+=we[W+257],W>7&&(Au(e,f,Y>>23&31),f+=C3[W]);var ae=Y&31;Km(e,f,ce[ae]),f+=H[ae],ae>3&&(Km(e,f,Y>>5&8191),f+=I3[ae])}else Km(e,f,Ce[Y]),f+=we[Y]}return Km(e,f,Ce[256]),f+we[256]},Ble=new N3([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),tF=new pc(0),Vle=function(t,e,r,n,i,s){var a=s.z||t.length,o=new pc(n+a+5*(1+Math.ceil(a/7e3))+i),l=o.subarray(n,o.length-i),c=s.l,f=(s.r||0)&7;if(e){f&&(l[0]=s.r>>3);for(var p=Ble[e-1],g=p>>13,m=p&8191,_=(1<<r)-1,w=s.p||new al(32768),b=s.h||new al(_+1),k=Math.ceil(r/3),R=2*k,C=function(Re){return(t[Re]^t[Re+1]<<k^t[Re+2]<<R)&_},j=new N3(25e3),X=new al(288),K=new al(32),P=0,A=0,T=s.i||0,O=0,I=s.w||0,D=0;T+2<a;++T){var B=C(T),re=T&32767,_e=b[B];if(w[re]=_e,b[B]=re,I<=T){var Ce=a-T;if((P>7e3||O>24576)&&(Ce>423||!c)){f=GT(t,l,0,j,X,K,A,O,D,T-D,f),O=P=A=0,D=T;for(var we=0;we<286;++we)X[we]=0;for(var we=0;we<30;++we)K[we]=0}var ce=2,H=0,te=m,J=re-_e&32767;if(Ce>2&&B==C(T-J))for(var N=Math.min(g,Ce)-1,U=Math.min(32767,T),W=Math.min(258,Ce);J<=U&&--te&&re!=_e;){if(t[T+ce]==t[T+ce-J]){for(var Y=0;Y<W&&t[T+Y]==t[T+Y-J];++Y);if(Y>ce){if(ce=Y,H=J,Y>N)break;for(var ae=Math.min(J,Y-2),pe=0,we=0;we<ae;++we){var he=T-J+we&32767,xe=w[he],ke=he-xe&32767;ke>pe&&(pe=ke,_e=he)}}}re=_e,_e=w[re],J+=re-_e&32767}if(H){j[O++]=268435456|V_[ce]<<18|HT[H];var Fe=V_[ce]&31,oe=HT[H]&31;A+=C3[Fe]+I3[oe],++X[257+Fe],++K[oe],I=T+ce,++P}else j[O++]=t[T],++X[t[T]]}}for(T=Math.max(T,I);T<a;++T)j[O++]=t[T],++X[t[T]];f=GT(t,l,c,j,X,K,A,O,D,T-D,f),c||(s.r=f&7|l[f/8|0]<<3,f-=7,s.h=b,s.p=w,s.i=T,s.w=I)}else{for(var T=s.w||0;T<a+c;T+=65535){var Ze=T+65535;Ze>=a&&(l[f/8|0]=c,Ze=a),f=eF(l,f+1,t.subarray(T,Ze))}s.i=a}return Mle(o,0,n+Z9(f)+i)},rF=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,s=r.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=n+=r[a];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}t=n,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Ule=function(t,e,r,n,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new pc(s.length+t.length);a.set(s),a.set(t,s.length),t=a,i.w=s.length}return Vle(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,i)},nF=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},zle=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=rF();i.p(e.dictionary),nF(t,2,i.d())}};function $_(t,e){e||(e={});var r=rF();r.p(t);var n=Ule(t,e,e.dictionary?6:2,4);return zle(n,e),nF(n,n.length-4,r.d()),n}var $le=typeof TextDecoder<"u"&&new TextDecoder,qle=0;try{$le.decode(tF,{stream:!0}),qle=1}catch{}function Hle(t){if(Array.isArray(t))return t}function Wle(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function KT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Gle(t,e){if(t){if(typeof t=="string")return KT(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?KT(t,e):void 0}}function Kle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XT(t,e){return Hle(t)||Wle(t,e)||Gle(t,e)||Kle()}function YT(t,e="utf8"){return new TextDecoder(e).decode(t)}const Xle=new TextEncoder;function Yle(t){return Xle.encode(t)}const Qle=1024*8,Jle=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),f5={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class P3{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=Qle,r={}){let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=r.offset?r.offset>>>0:0,s=e.byteLength-i;let a=i;(ArrayBuffer.isView(e)||e instanceof P3)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=f5[r].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+n);if(this.littleEndian===Jle&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+n));o.reverse();const l=new f5[r](o.buffer);return this.offset+=n,l.reverse(),l}const a=new f5[r](s);return this.offset+=n,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return YT(this.readBytes(e))}decodeText(e=1,r="utf8"){return YT(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(Yle(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function um(t){let e=t.length;for(;--e>=0;)t[e]=0}const Zle=3,ece=258,iF=29,tce=256,rce=tce+1+iF,sF=30,nce=512,ice=new Array((rce+2)*2);um(ice);const sce=new Array(sF*2);um(sce);const ace=new Array(nce);um(ace);const oce=new Array(ece-Zle+1);um(oce);const lce=new Array(iF);um(lce);const cce=new Array(sF);um(cce);const uce=(t,e,r,n)=>{let i=t&65535|0,s=t>>>16&65535|0,a=0;for(;r!==0;){a=r>2e3?2e3:r,r-=a;do i=i+e[n++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0};var q_=uce;const fce=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},hce=new Uint32Array(fce()),dce=(t,e,r,n)=>{const i=hce,s=n+r;t^=-1;for(let a=n;a<s;a++)t=t>>>8^i[(t^e[a])&255];return t^-1};var Fc=dce,H_={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},aF={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const pce=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var mce=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)pce(r,n)&&(t[n]=r[n])}}return t},gce=t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,i=0,s=t.length;n<s;n++){let a=t[n];r.set(a,i),i+=a.length}return r},oF={assign:mce,flattenChunks:gce};let lF=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{lF=!1}const lg=new Uint8Array(256);for(let t=0;t<256;t++)lg[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;lg[254]=lg[254]=1;var xce=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,i,s,a=t.length,o=0;for(i=0;i<a;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),s=0,i=0;s<o;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const vce=(t,e)=>{if(e<65534&&t.subarray&&lF)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var yce=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,i;const s=new Array(r*2);for(i=0,n=0;n<r;){let a=t[n++];if(a<128){s[i++]=a;continue}let o=lg[a];if(o>4){s[i++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<r;)a=a<<6|t[n++]&63,o--;if(o>1){s[i++]=65533;continue}a<65536?s[i++]=a:(a-=65536,s[i++]=55296|a>>10&1023,s[i++]=56320|a&1023)}return vce(s,i)},wce=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+lg[t[r]]>e?r:e},W_={string2buf:xce,buf2string:yce,utf8border:wce};function _ce(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var bce=_ce;const r2=16209,Ece=16191;var Sce=function(e,r){let n,i,s,a,o,l,c,f,p,g,m,_,w,b,k,R,C,j,X,K,P,A,T,O;const I=e.state;n=e.next_in,T=e.input,i=n+(e.avail_in-5),s=e.next_out,O=e.output,a=s-(r-e.avail_out),o=s+(e.avail_out-257),l=I.dmax,c=I.wsize,f=I.whave,p=I.wnext,g=I.window,m=I.hold,_=I.bits,w=I.lencode,b=I.distcode,k=(1<<I.lenbits)-1,R=(1<<I.distbits)-1;e:do{_<15&&(m+=T[n++]<<_,_+=8,m+=T[n++]<<_,_+=8),C=w[m&k];t:for(;;){if(j=C>>>24,m>>>=j,_-=j,j=C>>>16&255,j===0)O[s++]=C&65535;else if(j&16){X=C&65535,j&=15,j&&(_<j&&(m+=T[n++]<<_,_+=8),X+=m&(1<<j)-1,m>>>=j,_-=j),_<15&&(m+=T[n++]<<_,_+=8,m+=T[n++]<<_,_+=8),C=b[m&R];r:for(;;){if(j=C>>>24,m>>>=j,_-=j,j=C>>>16&255,j&16){if(K=C&65535,j&=15,_<j&&(m+=T[n++]<<_,_+=8,_<j&&(m+=T[n++]<<_,_+=8)),K+=m&(1<<j)-1,K>l){e.msg="invalid distance too far back",I.mode=r2;break e}if(m>>>=j,_-=j,j=s-a,K>j){if(j=K-j,j>f&&I.sane){e.msg="invalid distance too far back",I.mode=r2;break e}if(P=0,A=g,p===0){if(P+=c-j,j<X){X-=j;do O[s++]=g[P++];while(--j);P=s-K,A=O}}else if(p<j){if(P+=c+p-j,j-=p,j<X){X-=j;do O[s++]=g[P++];while(--j);if(P=0,p<X){j=p,X-=j;do O[s++]=g[P++];while(--j);P=s-K,A=O}}}else if(P+=p-j,j<X){X-=j;do O[s++]=g[P++];while(--j);P=s-K,A=O}for(;X>2;)O[s++]=A[P++],O[s++]=A[P++],O[s++]=A[P++],X-=3;X&&(O[s++]=A[P++],X>1&&(O[s++]=A[P++]))}else{P=s-K;do O[s++]=O[P++],O[s++]=O[P++],O[s++]=O[P++],X-=3;while(X>2);X&&(O[s++]=O[P++],X>1&&(O[s++]=O[P++]))}}else if((j&64)===0){C=b[(C&65535)+(m&(1<<j)-1)];continue r}else{e.msg="invalid distance code",I.mode=r2;break e}break}}else if((j&64)===0){C=w[(C&65535)+(m&(1<<j)-1)];continue t}else if(j&32){I.mode=Ece;break e}else{e.msg="invalid literal/length code",I.mode=r2;break e}break}}while(n<i&&s<o);X=_>>3,n-=X,_-=X<<3,m&=(1<<_)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=s<o?257+(o-s):257-(s-o),I.hold=m,I.bits=_};const M0=15,QT=852,JT=592,ZT=0,h5=1,eA=2,kce=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Tce=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ace=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Nce=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Cce=(t,e,r,n,i,s,a,o)=>{const l=o.bits;let c=0,f=0,p=0,g=0,m=0,_=0,w=0,b=0,k=0,R=0,C,j,X,K,P,A=null,T;const O=new Uint16Array(M0+1),I=new Uint16Array(M0+1);let D=null,B,re,_e;for(c=0;c<=M0;c++)O[c]=0;for(f=0;f<n;f++)O[e[r+f]]++;for(m=l,g=M0;g>=1&&O[g]===0;g--);if(m>g&&(m=g),g===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,o.bits=1,0;for(p=1;p<g&&O[p]===0;p++);for(m<p&&(m=p),b=1,c=1;c<=M0;c++)if(b<<=1,b-=O[c],b<0)return-1;if(b>0&&(t===ZT||g!==1))return-1;for(I[1]=0,c=1;c<M0;c++)I[c+1]=I[c]+O[c];for(f=0;f<n;f++)e[r+f]!==0&&(a[I[e[r+f]]++]=f);if(t===ZT?(A=D=a,T=20):t===h5?(A=kce,D=Tce,T=257):(A=Ace,D=Nce,T=0),R=0,f=0,c=p,P=s,_=m,w=0,X=-1,k=1<<m,K=k-1,t===h5&&k>QT||t===eA&&k>JT)return 1;for(;;){B=c-w,a[f]+1<T?(re=0,_e=a[f]):a[f]>=T?(re=D[a[f]-T],_e=A[a[f]-T]):(re=96,_e=0),C=1<<c-w,j=1<<_,p=j;do j-=C,i[P+(R>>w)+j]=B<<24|re<<16|_e|0;while(j!==0);for(C=1<<c-1;R&C;)C>>=1;if(C!==0?(R&=C-1,R+=C):R=0,f++,--O[c]===0){if(c===g)break;c=e[r+a[f]]}if(c>m&&(R&K)!==X){for(w===0&&(w=m),P+=p,_=c-w,b=1<<_;_+w<g&&(b-=O[_+w],!(b<=0));)_++,b<<=1;if(k+=1<<_,t===h5&&k>QT||t===eA&&k>JT)return 1;X=R&K,i[X]=m<<24|_<<16|P-s|0}}return R!==0&&(i[P+R]=c-w<<24|64<<16|0),o.bits=m,0};var A1=Cce;const Ice=0,cF=1,uF=2,{Z_FINISH:tA,Z_BLOCK:Pce,Z_TREES:n2,Z_OK:Wd,Z_STREAM_END:Rce,Z_NEED_DICT:Fce,Z_STREAM_ERROR:jl,Z_DATA_ERROR:fF,Z_MEM_ERROR:hF,Z_BUF_ERROR:Lce,Z_DEFLATED:rA}=aF,Ay=16180,nA=16181,iA=16182,sA=16183,aA=16184,oA=16185,lA=16186,cA=16187,uA=16188,fA=16189,Tv=16190,Nu=16191,d5=16192,hA=16193,p5=16194,dA=16195,pA=16196,mA=16197,gA=16198,i2=16199,s2=16200,xA=16201,vA=16202,yA=16203,wA=16204,_A=16205,m5=16206,bA=16207,EA=16208,Ai=16209,dF=16210,pF=16211,Dce=852,Oce=592,jce=15,Mce=jce,SA=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function Bce(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const i0=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Ay||e.mode>pF?1:0},mF=t=>{if(i0(t))return jl;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Ay,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Dce),e.distcode=e.distdyn=new Int32Array(Oce),e.sane=1,e.back=-1,Wd},gF=t=>{if(i0(t))return jl;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,mF(t)},xF=(t,e)=>{let r;if(i0(t))return jl;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?jl:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,gF(t))},vF=(t,e)=>{if(!t)return jl;const r=new Bce;t.state=r,r.strm=t,r.window=null,r.mode=Ay;const n=xF(t,e);return n!==Wd&&(t.state=null),n},Vce=t=>vF(t,Mce);let kA=!0,g5,x5;const Uce=t=>{if(kA){g5=new Int32Array(512),x5=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(A1(cF,t.lens,0,288,g5,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;A1(uF,t.lens,0,32,x5,0,t.work,{bits:5}),kA=!1}t.lencode=g5,t.lenbits=9,t.distcode=x5,t.distbits=5},yF=(t,e,r,n)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(e.subarray(r-n,r-n+i),s.wnext),n-=i,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},zce=(t,e)=>{let r,n,i,s,a,o,l,c,f,p,g,m,_,w,b=0,k,R,C,j,X,K,P,A;const T=new Uint8Array(4);let O,I;const D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(i0(t)||!t.output||!t.input&&t.avail_in!==0)return jl;r=t.state,r.mode===Nu&&(r.mode=d5),a=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,c=r.hold,f=r.bits,p=o,g=l,A=Wd;e:for(;;)switch(r.mode){case Ay:if(r.wrap===0){r.mode=d5;break}for(;f<16;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if(r.wrap&2&&c===35615){r.wbits===0&&(r.wbits=15),r.check=0,T[0]=c&255,T[1]=c>>>8&255,r.check=Fc(r.check,T,2,0),c=0,f=0,r.mode=nA;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=Ai;break}if((c&15)!==rA){t.msg="unknown compression method",r.mode=Ai;break}if(c>>>=4,f-=4,P=(c&15)+8,r.wbits===0&&(r.wbits=P),P>15||P>r.wbits){t.msg="invalid window size",r.mode=Ai;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=c&512?fA:Nu,c=0,f=0;break;case nA:for(;f<16;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if(r.flags=c,(r.flags&255)!==rA){t.msg="unknown compression method",r.mode=Ai;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Ai;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&r.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,r.check=Fc(r.check,T,2,0)),c=0,f=0,r.mode=iA;case iA:for(;f<32;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}r.head&&(r.head.time=c),r.flags&512&&r.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,r.check=Fc(r.check,T,4,0)),c=0,f=0,r.mode=sA;case sA:for(;f<16;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&r.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,r.check=Fc(r.check,T,2,0)),c=0,f=0,r.mode=aA;case aA:if(r.flags&1024){for(;f<16;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&r.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,r.check=Fc(r.check,T,2,0)),c=0,f=0}else r.head&&(r.head.extra=null);r.mode=oA;case oA:if(r.flags&1024&&(m=r.length,m>o&&(m=o),m&&(r.head&&(P=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+m),P)),r.flags&512&&r.wrap&4&&(r.check=Fc(r.check,n,m,s)),o-=m,s+=m,r.length-=m),r.length))break e;r.length=0,r.mode=lA;case lA:if(r.flags&2048){if(o===0)break e;m=0;do P=n[s+m++],r.head&&P&&r.length<65536&&(r.head.name+=String.fromCharCode(P));while(P&&m<o);if(r.flags&512&&r.wrap&4&&(r.check=Fc(r.check,n,m,s)),o-=m,s+=m,P)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=cA;case cA:if(r.flags&4096){if(o===0)break e;m=0;do P=n[s+m++],r.head&&P&&r.length<65536&&(r.head.comment+=String.fromCharCode(P));while(P&&m<o);if(r.flags&512&&r.wrap&4&&(r.check=Fc(r.check,n,m,s)),o-=m,s+=m,P)break e}else r.head&&(r.head.comment=null);r.mode=uA;case uA:if(r.flags&512){for(;f<16;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if(r.wrap&4&&c!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Ai;break}c=0,f=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Nu;break;case fA:for(;f<32;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}t.adler=r.check=SA(c),c=0,f=0,r.mode=Tv;case Tv:if(r.havedict===0)return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=c,r.bits=f,Fce;t.adler=r.check=1,r.mode=Nu;case Nu:if(e===Pce||e===n2)break e;case d5:if(r.last){c>>>=f&7,f-=f&7,r.mode=m5;break}for(;f<3;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}switch(r.last=c&1,c>>>=1,f-=1,c&3){case 0:r.mode=hA;break;case 1:if(Uce(r),r.mode=i2,e===n2){c>>>=2,f-=2;break e}break;case 2:r.mode=pA;break;case 3:t.msg="invalid block type",r.mode=Ai}c>>>=2,f-=2;break;case hA:for(c>>>=f&7,f-=f&7;f<32;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Ai;break}if(r.length=c&65535,c=0,f=0,r.mode=p5,e===n2)break e;case p5:r.mode=dA;case dA:if(m=r.length,m){if(m>o&&(m=o),m>l&&(m=l),m===0)break e;i.set(n.subarray(s,s+m),a),o-=m,s+=m,l-=m,a+=m,r.length-=m;break}r.mode=Nu;break;case pA:for(;f<14;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if(r.nlen=(c&31)+257,c>>>=5,f-=5,r.ndist=(c&31)+1,c>>>=5,f-=5,r.ncode=(c&15)+4,c>>>=4,f-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Ai;break}r.have=0,r.mode=mA;case mA:for(;r.have<r.ncode;){for(;f<3;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}r.lens[D[r.have++]]=c&7,c>>>=3,f-=3}for(;r.have<19;)r.lens[D[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,O={bits:r.lenbits},A=A1(Ice,r.lens,0,19,r.lencode,0,r.work,O),r.lenbits=O.bits,A){t.msg="invalid code lengths set",r.mode=Ai;break}r.have=0,r.mode=gA;case gA:for(;r.have<r.nlen+r.ndist;){for(;b=r.lencode[c&(1<<r.lenbits)-1],k=b>>>24,R=b>>>16&255,C=b&65535,!(k<=f);){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if(C<16)c>>>=k,f-=k,r.lens[r.have++]=C;else{if(C===16){for(I=k+2;f<I;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if(c>>>=k,f-=k,r.have===0){t.msg="invalid bit length repeat",r.mode=Ai;break}P=r.lens[r.have-1],m=3+(c&3),c>>>=2,f-=2}else if(C===17){for(I=k+3;f<I;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}c>>>=k,f-=k,P=0,m=3+(c&7),c>>>=3,f-=3}else{for(I=k+7;f<I;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}c>>>=k,f-=k,P=0,m=11+(c&127),c>>>=7,f-=7}if(r.have+m>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Ai;break}for(;m--;)r.lens[r.have++]=P}}if(r.mode===Ai)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Ai;break}if(r.lenbits=9,O={bits:r.lenbits},A=A1(cF,r.lens,0,r.nlen,r.lencode,0,r.work,O),r.lenbits=O.bits,A){t.msg="invalid literal/lengths set",r.mode=Ai;break}if(r.distbits=6,r.distcode=r.distdyn,O={bits:r.distbits},A=A1(uF,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,O),r.distbits=O.bits,A){t.msg="invalid distances set",r.mode=Ai;break}if(r.mode=i2,e===n2)break e;case i2:r.mode=s2;case s2:if(o>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=c,r.bits=f,Sce(t,g),a=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,c=r.hold,f=r.bits,r.mode===Nu&&(r.back=-1);break}for(r.back=0;b=r.lencode[c&(1<<r.lenbits)-1],k=b>>>24,R=b>>>16&255,C=b&65535,!(k<=f);){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if(R&&(R&240)===0){for(j=k,X=R,K=C;b=r.lencode[K+((c&(1<<j+X)-1)>>j)],k=b>>>24,R=b>>>16&255,C=b&65535,!(j+k<=f);){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}c>>>=j,f-=j,r.back+=j}if(c>>>=k,f-=k,r.back+=k,r.length=C,R===0){r.mode=_A;break}if(R&32){r.back=-1,r.mode=Nu;break}if(R&64){t.msg="invalid literal/length code",r.mode=Ai;break}r.extra=R&15,r.mode=xA;case xA:if(r.extra){for(I=r.extra;f<I;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=vA;case vA:for(;b=r.distcode[c&(1<<r.distbits)-1],k=b>>>24,R=b>>>16&255,C=b&65535,!(k<=f);){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if((R&240)===0){for(j=k,X=R,K=C;b=r.distcode[K+((c&(1<<j+X)-1)>>j)],k=b>>>24,R=b>>>16&255,C=b&65535,!(j+k<=f);){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}c>>>=j,f-=j,r.back+=j}if(c>>>=k,f-=k,r.back+=k,R&64){t.msg="invalid distance code",r.mode=Ai;break}r.offset=C,r.extra=R&15,r.mode=yA;case yA:if(r.extra){for(I=r.extra;f<I;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Ai;break}r.mode=wA;case wA:if(l===0)break e;if(m=g-l,r.offset>m){if(m=r.offset-m,m>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Ai;break}m>r.wnext?(m-=r.wnext,_=r.wsize-m):_=r.wnext-m,m>r.length&&(m=r.length),w=r.window}else w=i,_=a-r.offset,m=r.length;m>l&&(m=l),l-=m,r.length-=m;do i[a++]=w[_++];while(--m);r.length===0&&(r.mode=s2);break;case _A:if(l===0)break e;i[a++]=r.length,l--,r.mode=s2;break;case m5:if(r.wrap){for(;f<32;){if(o===0)break e;o--,c|=n[s++]<<f,f+=8}if(g-=l,t.total_out+=g,r.total+=g,r.wrap&4&&g&&(t.adler=r.check=r.flags?Fc(r.check,i,g,a-g):q_(r.check,i,g,a-g)),g=l,r.wrap&4&&(r.flags?c:SA(c))!==r.check){t.msg="incorrect data check",r.mode=Ai;break}c=0,f=0}r.mode=bA;case bA:if(r.wrap&&r.flags){for(;f<32;){if(o===0)break e;o--,c+=n[s++]<<f,f+=8}if(r.wrap&4&&c!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Ai;break}c=0,f=0}r.mode=EA;case EA:A=Rce;break e;case Ai:A=fF;break e;case dF:return hF;case pF:default:return jl}return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=c,r.bits=f,(r.wsize||g!==t.avail_out&&r.mode<Ai&&(r.mode<m5||e!==tA))&&yF(t,t.output,t.next_out,g-t.avail_out),p-=t.avail_in,g-=t.avail_out,t.total_in+=p,t.total_out+=g,r.total+=g,r.wrap&4&&g&&(t.adler=r.check=r.flags?Fc(r.check,i,g,t.next_out-g):q_(r.check,i,g,t.next_out-g)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Nu?128:0)+(r.mode===i2||r.mode===p5?256:0),(p===0&&g===0||e===tA)&&A===Wd&&(A=Lce),A},$ce=t=>{if(i0(t))return jl;let e=t.state;return e.window&&(e.window=null),t.state=null,Wd},qce=(t,e)=>{if(i0(t))return jl;const r=t.state;return(r.wrap&2)===0?jl:(r.head=e,e.done=!1,Wd)},Hce=(t,e)=>{const r=e.length;let n,i,s;return i0(t)||(n=t.state,n.wrap!==0&&n.mode!==Tv)?jl:n.mode===Tv&&(i=1,i=q_(i,e,r,0),i!==n.check)?fF:(s=yF(t,e,r,r),s?(n.mode=dF,hF):(n.havedict=1,Wd))};var Wce=gF,Gce=xF,Kce=mF,Xce=Vce,Yce=vF,Qce=zce,Jce=$ce,Zce=qce,eue=Hce,tue="pako inflate (from Nodeca project)",Cu={inflateReset:Wce,inflateReset2:Gce,inflateResetKeep:Kce,inflateInit:Xce,inflateInit2:Yce,inflate:Qce,inflateEnd:Jce,inflateGetHeader:Zce,inflateSetDictionary:eue,inflateInfo:tue};function rue(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var nue=rue;const wF=Object.prototype.toString,{Z_NO_FLUSH:iue,Z_FINISH:sue,Z_OK:cg,Z_STREAM_END:v5,Z_NEED_DICT:y5,Z_STREAM_ERROR:aue,Z_DATA_ERROR:TA,Z_MEM_ERROR:oue}=aF;function qg(t){this.options=oF.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new bce,this.strm.avail_out=0;let r=Cu.inflateInit2(this.strm,e.windowBits);if(r!==cg)throw new Error(H_[r]);if(this.header=new nue,Cu.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=W_.string2buf(e.dictionary):wF.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Cu.inflateSetDictionary(this.strm,e.dictionary),r!==cg)))throw new Error(H_[r])}qg.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?sue:iue,wF.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=Cu.inflate(r,a),s===y5&&i&&(s=Cu.inflateSetDictionary(r,i),s===cg?s=Cu.inflate(r,a):s===TA&&(s=y5));r.avail_in>0&&s===v5&&r.state.wrap>0&&t[r.next_in]!==0;)Cu.inflateReset(r),s=Cu.inflate(r,a);switch(s){case aue:case TA:case y5:case oue:return this.onEnd(s),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||s===v5))if(this.options.to==="string"){let l=W_.utf8border(r.output,r.next_out),c=r.next_out-l,f=W_.buf2string(r.output,l);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(l,l+c),0),this.onData(f)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===cg&&o===0)){if(s===v5)return s=Cu.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};qg.prototype.onData=function(t){this.chunks.push(t)};qg.prototype.onEnd=function(t){t===cg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=oF.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function lue(t,e){const r=new qg(e);if(r.push(t),r.err)throw r.msg||H_[r.err];return r.result}var cue=qg,uue=lue,fue={Inflate:cue,inflate:uue};const{Inflate:hue,inflate:due}=fue;var AA=hue,pue=due;const _F=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;_F[t]=e}const NA=4294967295;function mue(t,e,r){let n=t;for(let i=0;i<r;i++)n=_F[(n^e[i])&255]^n>>>8;return n}function gue(t,e){return(mue(NA,t,e)^NA)>>>0}function CA(t,e,r){const n=t.readUint32(),i=gue(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function bF(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function EF(t,e,r,n){let i=0;for(;i<n;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+e[i-n]&255}function SF(t,e,r,n){let i=0;if(r.length===0)for(;i<n;i++)e[i]=t[i];else for(;i<n;i++)e[i]=t[i]+r[i]&255}function kF(t,e,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-i]+r[s]>>1)&255}}function TF(t,e,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+xue(e[s-i],r[s],r[s-i])&255}}function xue(t,e,r){const n=t+e-r,i=Math.abs(n-t),s=Math.abs(n-e),a=Math.abs(n-r);return i<=s&&i<=a?t:s<=a?e:r}function vue(t,e,r,n,i,s){switch(t){case 0:bF(e,r,i);break;case 1:EF(e,r,i,s);break;case 2:SF(e,r,n,i);break;case 3:kF(e,r,n,i,s);break;case 4:TF(e,r,n,i,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const yue=new Uint16Array([255]),wue=new Uint8Array(yue.buffer),_ue=wue[0]===255;function bue(t){const{data:e,width:r,height:n,channels:i,depth:s}=t,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*i,l=new Uint8Array(n*r*o);let c=0;for(let f=0;f<7;f++){const p=a[f],g=Math.ceil((r-p.x)/p.xStep),m=Math.ceil((n-p.y)/p.yStep);if(g<=0||m<=0)continue;const _=g*o,w=new Uint8Array(_);for(let b=0;b<m;b++){const k=e[c++],R=e.subarray(c,c+_);c+=_;const C=new Uint8Array(_);vue(k,R,C,w,_,o),w.set(C);for(let j=0;j<g;j++){const X=p.x+j*p.xStep,K=p.y+b*p.yStep;if(!(X>=r||K>=n))for(let P=0;P<o;P++)l[(K*r+X)*o+P]=C[j*o+P]}}}if(s===16){const f=new Uint16Array(l.buffer);if(_ue)for(let p=0;p<f.length;p++)f[p]=Eue(f[p]);return f}else return l}function Eue(t){return(t&255)<<8|t>>8&255}const Sue=new Uint16Array([255]),kue=new Uint8Array(Sue.buffer),Tue=kue[0]===255,Aue=new Uint8Array(0);function IA(t){const{data:e,width:r,height:n,channels:i,depth:s}=t,a=Math.ceil(s/8)*i,o=Math.ceil(s/8*i*r),l=new Uint8Array(n*o);let c=Aue,f=0,p,g;for(let m=0;m<n;m++){switch(p=e.subarray(f+1,f+1+o),g=l.subarray(m*o,(m+1)*o),e[f]){case 0:bF(p,g,o);break;case 1:EF(p,g,o,a);break;case 2:SF(p,g,c,o);break;case 3:kF(p,g,c,o,a);break;case 4:TF(p,g,c,o,a);break;default:throw new Error(`Unsupported filter: ${e[f]}`)}c=g,f+=o+1}if(s===16){const m=new Uint16Array(l.buffer);if(Tue)for(let _=0;_<m.length;_++)m[_]=Nue(m[_]);return m}else return l}function Nue(t){return(t&255)<<8|t>>8&255}const N2=Uint8Array.of(137,80,78,71,13,10,26,10);function PA(t){if(!Cue(t.readBytes(N2.length)))throw new Error("wrong PNG signature")}function Cue(t){if(t.length<N2.length)return!1;for(let e=0;e<N2.length;e++)if(t[e]!==N2[e])return!1;return!0}const Iue="tEXt",Pue=0,AF=new TextDecoder("latin1");function Rue(t){if(Lue(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const Fue=/^[\u0000-\u00FF]*$/;function Lue(t){if(!Fue.test(t))throw new Error("invalid latin1 text")}function Due(t,e,r){const n=NF(e);t[n]=Oue(e,r-n.length-1)}function NF(t){for(t.mark();t.readByte()!==Pue;);const e=t.offset;t.reset();const r=AF.decode(t.readBytes(e-t.offset-1));return t.skip(1),Rue(r),r}function Oue(t,e){return AF.decode(t.readBytes(e))}const el={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},w5={UNKNOWN:-1,DEFLATE:0},RA={UNKNOWN:-1,ADAPTIVE:0},_5={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},a2={NONE:0,BACKGROUND:1,PREVIOUS:2},b5={SOURCE:0,OVER:1};class jue extends P3{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,r={}){super(e);const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new AA,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=w5.UNKNOWN,this._filterMethod=RA.UNKNOWN,this._interlaceMethod=_5.UNKNOWN,this._colorType=el.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(PA(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeChunk(e,r)}return this.decodeImage(),this._png}decodeApng(){for(PA(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(e,r)}return this.decodeApngImage(),this._apng}decodeChunk(e,r){const n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case Iue:Due(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?CA(this,e+4,r):this.skip(4)}decodeApngChunk(e,r){const n=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,r),this.offset=n+e;break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?CA(this,e+4,r):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Mue(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case el.GREYSCALE:n=1;break;case el.TRUECOLOUR:n=3;break;case el.INDEXED_COLOUR:n=1;break;case el.GREYSCALE_ALPHA:n=2;break;case el.TRUECOLOUR_ALPHA:n=4;break;case el.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==w5.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const r=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let i=0;i<r;i++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const r=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let r=e,n=this.offset+this.byteOffset;if(n+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case el.GREYSCALE:case el.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let r=0;r<e/2;r++)this._transparency[r]=this.readUint16();break}case el.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let r=0;for(;r<e;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case el.UNKNOWN:case el.GREYSCALE_ALPHA:case el.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const r=NF(this),n=this.readUint8();if(n!==w5.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const i=this.readBytes(e-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:pue(i)}}decodepHYs(){const e=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:r,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const r={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=IA({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)r.data=n.data;else{const i=this._apng.frames.at(e-1);this.disposeFrame(n,i,r),this.addFrameDataToCanvas(r,n)}this._apng.frames.push(r)}}return this._apng}disposeFrame(e,r,n){switch(e.disposeOp){case a2.NONE:break;case a2.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let s=0;s<this._png.width;s++){const a=(i*e.width+s)*this._png.channels;for(let o=0;o<this._png.channels;o++)n.data[a+o]=0}break;case a2.PREVIOUS:n.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,r){const n=1<<this._png.depth,i=(s,a)=>{const o=((s+r.yOffset)*this._png.width+r.xOffset+a)*this._png.channels,l=(s*r.width+a)*this._png.channels;return{index:o,frameIndex:l}};switch(r.blendOp){case b5.SOURCE:for(let s=0;s<r.height;s++)for(let a=0;a<r.width;a++){const{index:o,frameIndex:l}=i(s,a);for(let c=0;c<this._png.channels;c++)e.data[o+c]=r.data[l+c]}break;case b5.OVER:for(let s=0;s<r.height;s++)for(let a=0;a<r.width;a++){const{index:o,frameIndex:l}=i(s,a);for(let c=0;c<this._png.channels;c++){const f=r.data[l+this._png.channels-1]/n,p=c%(this._png.channels-1)===0?1:r.data[l+c],g=Math.floor(f*p+(1-f)*e.data[o+c]);e.data[o+c]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==RA.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===_5.NO_INTERLACE)this._png.data=IA({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===_5.ADAM7)this._png.data=bue({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,r=this._frames.at(-1);r?r.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:a2.NONE,blendOp:b5.SOURCE,data:e}),this._inflator=new AA,this._writingDataChunks=!1}}function Mue(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var FA;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(FA||(FA={}));function Bue(t,e){return new jue(t,e).decode()}var Fr=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function E5(){Fr.console&&typeof Fr.console.log=="function"&&Fr.console.log.apply(Fr.console,arguments)}var ri={log:E5,warn:function(t){Fr.console&&(typeof Fr.console.warn=="function"?Fr.console.warn.apply(Fr.console,arguments):E5.call(null,arguments))},error:function(t){Fr.console&&(typeof Fr.console.error=="function"?Fr.console.error.apply(Fr.console,arguments):E5(t))}};function S5(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){id(n.response,e,r)},n.onerror=function(){ri.error("could not download file")},n.send()}function LA(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function o2(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var id=Fr.saveAs||((typeof window>"u"?"undefined":zn(window))!=="object"||window!==Fr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Fr.URL||Fr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?LA(i.href)?S5(t,e,r):o2(i,i.target="_blank"):o2(i)):(i.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){o2(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(LA(t))S5(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){o2(n)})}else navigator.msSaveOrOpenBlob((function(i,s){return s===void 0?s={autoBom:!1}:zn(s)!=="object"&&(ri.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return S5(t,e,r);var i=t.type==="application/octet-stream",s=/constructor/i.test(Fr.HTMLElement)||Fr.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":zn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var f=o.result;f=a?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},o.readAsDataURL(t)}else{var l=Fr.URL||Fr.webkitURL,c=l.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function CF(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,s=r[n].process,a=i.exec(t);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}var C2=Fr.atob.bind(Fr),DA=Fr.btoa.bind(Fr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function k5(t,e){var r=t[0],n=t[1],i=t[2],s=t[3];r=Ka(r,n,i,s,e[0],7,-680876936),s=Ka(s,r,n,i,e[1],12,-389564586),i=Ka(i,s,r,n,e[2],17,606105819),n=Ka(n,i,s,r,e[3],22,-1044525330),r=Ka(r,n,i,s,e[4],7,-176418897),s=Ka(s,r,n,i,e[5],12,1200080426),i=Ka(i,s,r,n,e[6],17,-1473231341),n=Ka(n,i,s,r,e[7],22,-45705983),r=Ka(r,n,i,s,e[8],7,1770035416),s=Ka(s,r,n,i,e[9],12,-1958414417),i=Ka(i,s,r,n,e[10],17,-42063),n=Ka(n,i,s,r,e[11],22,-1990404162),r=Ka(r,n,i,s,e[12],7,1804603682),s=Ka(s,r,n,i,e[13],12,-40341101),i=Ka(i,s,r,n,e[14],17,-1502002290),r=Xa(r,n=Ka(n,i,s,r,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Xa(s,r,n,i,e[6],9,-1069501632),i=Xa(i,s,r,n,e[11],14,643717713),n=Xa(n,i,s,r,e[0],20,-373897302),r=Xa(r,n,i,s,e[5],5,-701558691),s=Xa(s,r,n,i,e[10],9,38016083),i=Xa(i,s,r,n,e[15],14,-660478335),n=Xa(n,i,s,r,e[4],20,-405537848),r=Xa(r,n,i,s,e[9],5,568446438),s=Xa(s,r,n,i,e[14],9,-1019803690),i=Xa(i,s,r,n,e[3],14,-187363961),n=Xa(n,i,s,r,e[8],20,1163531501),r=Xa(r,n,i,s,e[13],5,-1444681467),s=Xa(s,r,n,i,e[2],9,-51403784),i=Xa(i,s,r,n,e[7],14,1735328473),r=Ya(r,n=Xa(n,i,s,r,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Ya(s,r,n,i,e[8],11,-2022574463),i=Ya(i,s,r,n,e[11],16,1839030562),n=Ya(n,i,s,r,e[14],23,-35309556),r=Ya(r,n,i,s,e[1],4,-1530992060),s=Ya(s,r,n,i,e[4],11,1272893353),i=Ya(i,s,r,n,e[7],16,-155497632),n=Ya(n,i,s,r,e[10],23,-1094730640),r=Ya(r,n,i,s,e[13],4,681279174),s=Ya(s,r,n,i,e[0],11,-358537222),i=Ya(i,s,r,n,e[3],16,-722521979),n=Ya(n,i,s,r,e[6],23,76029189),r=Ya(r,n,i,s,e[9],4,-640364487),s=Ya(s,r,n,i,e[12],11,-421815835),i=Ya(i,s,r,n,e[15],16,530742520),r=Qa(r,n=Ya(n,i,s,r,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Qa(s,r,n,i,e[7],10,1126891415),i=Qa(i,s,r,n,e[14],15,-1416354905),n=Qa(n,i,s,r,e[5],21,-57434055),r=Qa(r,n,i,s,e[12],6,1700485571),s=Qa(s,r,n,i,e[3],10,-1894986606),i=Qa(i,s,r,n,e[10],15,-1051523),n=Qa(n,i,s,r,e[1],21,-2054922799),r=Qa(r,n,i,s,e[8],6,1873313359),s=Qa(s,r,n,i,e[15],10,-30611744),i=Qa(i,s,r,n,e[6],15,-1560198380),n=Qa(n,i,s,r,e[13],21,1309151649),r=Qa(r,n,i,s,e[4],6,-145523070),s=Qa(s,r,n,i,e[11],10,-1120210379),i=Qa(i,s,r,n,e[2],15,718787259),n=Qa(n,i,s,r,e[9],21,-343485551),t[0]=Xf(r,t[0]),t[1]=Xf(n,t[1]),t[2]=Xf(i,t[2]),t[3]=Xf(s,t[3])}function Ny(t,e,r,n,i,s){return e=Xf(Xf(e,t),Xf(n,s)),Xf(e<<i|e>>>32-i,r)}function Ka(t,e,r,n,i,s,a){return Ny(e&r|~e&n,t,e,i,s,a)}function Xa(t,e,r,n,i,s,a){return Ny(e&n|r&~n,t,e,i,s,a)}function Ya(t,e,r,n,i,s,a){return Ny(e^r^n,t,e,i,s,a)}function Qa(t,e,r,n,i,s,a){return Ny(r^(e|~n),t,e,i,s,a)}function IF(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)k5(n,Vue(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(k5(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*r,k5(n,i),n}function Vue(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var OA="0123456789abcdef".split("");function Uue(t){for(var e="",r=0;r<4;r++)e+=OA[t>>8*r+4&15]+OA[t>>8*r&15];return e}function zue(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function G_(t){return IF(t).map(zue).join("")}var $ue=(function(t){for(var e=0;e<t.length;e++)t[e]=Uue(t[e]);return t.join("")})(IF("hello"))!="5d41402abc4b2a76b9719d911017c592";function Xf(t,e){if($ue){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function K_(t,e){var r,n,i,s;if(t!==r){for(var a=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var f=o[l];c=(c+f+a.charCodeAt(l))%256,o[l]=o[c],o[c]=f}r=t,n=o}else o=n;var p=e.length,g=0,m=0,_="";for(l=0;l<p;l++)m=(m+(f=o[g=(g+1)%256]))%256,o[g]=o[m],o[m]=f,a=o[(o[g]+o[m])%256],_+=String.fromCharCode(e.charCodeAt(l)^a);return _}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var jA={print:4,modify:8,copy:16,"annot-forms":32};function W0(t,e,r,n){this.v=1,this.r=2;var i=192;t.forEach(function(o){if(jA.perm!==void 0)throw new Error("Invalid permission: "+o);i+=jA[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=G_(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=K_(this.encryptionKey,this.padding)}function G0(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var i=t.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[n]}return e}function MA(t){if(zn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!i],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[r]){var a=e[r][s];try{a[0].apply(t,n)}catch(o){Fr.console&&ri.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Av(t){if(!(this instanceof Av))return new Av(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function PF(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function ud(t,e,r,n,i){if(!(this instanceof ud))return new ud(t,e,r,n,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,PF.call(this,n,i)}function J0(t,e,r,n,i){if(!(this instanceof J0))return new J0(t,e,r,n,i);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,PF.call(this,n,i)}function gr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,l=16,c="S",f=null;zn(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,i=t.format||i,s=t.compress||t.compressPdf||s,(f=t.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(s===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,g={},m={internal:{},__private__:{}};m.__private__.PubSub=MA;var _="1.3",w=m.__private__.getPdfVersion=function(){return _};m.__private__.setPdfVersion=function(L){_=L};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return b};var k=m.__private__.getPageFormat=function(L){return b[L]};i=i||"a4";var R="compat",C="advanced",j=R;function X(){this.saveGraphicsState(),fe(new ir(wt,0,0,-wt,0,_s()*wt).toString()+" cm"),this.setFontSize(this.getFontSize()/wt),c="n",j=C}function K(){this.restoreGraphicsState(),c="S",j=R}var P=m.__private__.combineFontStyleAndFontWeight=function(L,Z){if(L=="bold"&&Z=="normal"||L=="bold"&&Z==400||L=="normal"&&Z=="italic"||L=="bold"&&Z=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Z&&(L=Z==400||Z==="normal"?L==="italic"?"italic":"normal":Z!=700&&Z!=="bold"||L!=="normal"?(Z==700?"bold":Z)+""+L:"bold"),L};m.advancedAPI=function(L){var Z=j===R;return Z&&X.call(this),typeof L!="function"||(L(this),Z&&K.call(this)),this},m.compatAPI=function(L){var Z=j===C;return Z&&K.call(this),typeof L!="function"||(L(this),Z&&X.call(this)),this},m.isAdvancedAPI=function(){return j===C};var A,T=function(L){if(j!==C)throw new Error(L+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=m.roundToPrecision=m.__private__.roundToPrecision=function(L,Z){var Ee=e||Z;if(isNaN(L)||isNaN(Ee))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return L.toFixed(Ee).replace(/0+$/,"")};A=m.hpf=m.__private__.hpf=typeof l=="number"?function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.hpf");return O(L,l)}:l==="smart"?function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.hpf");return O(L,L>-1&&L<1?16:5)}:function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.hpf");return O(L,16)};var I=m.f2=m.__private__.f2=function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.f2");return O(L,2)},D=m.__private__.f3=function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.f3");return O(L,3)},B=m.scale=m.__private__.scale=function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.scale");return j===R?L*wt:j===C?L:void 0},re=function(L){return B((function(Z){return j===R?_s()-Z:j===C?Z:void 0})(L))};m.__private__.setPrecision=m.setPrecision=function(L){typeof parseInt(L,10)=="number"&&(e=parseInt(L,10))};var _e,Ce="00000000000000000000000000000000",we=m.__private__.getFileId=function(){return Ce},ce=m.__private__.setFileId=function(L){return Ce=L!==void 0&&/^[a-fA-F0-9]{32}$/.test(L)?L.toUpperCase():Ce.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Tn=new W0(f.userPermissions,f.userPassword,f.ownerPassword,Ce)),Ce};m.setFileId=function(L){return ce(L),this},m.getFileId=function(){return we()};var H=m.__private__.convertDateToPDFDate=function(L){var Z=L.getTimezoneOffset(),Ee=Z<0?"+":"-",Le=Math.floor(Math.abs(Z/60)),ze=Math.abs(Z%60),gt=[Ee,W(Le),"'",W(ze),"'"].join("");return["D:",L.getFullYear(),W(L.getMonth()+1),W(L.getDate()),W(L.getHours()),W(L.getMinutes()),W(L.getSeconds()),gt].join("")},te=m.__private__.convertPDFDateToDate=function(L){var Z=parseInt(L.substr(2,4),10),Ee=parseInt(L.substr(6,2),10)-1,Le=parseInt(L.substr(8,2),10),ze=parseInt(L.substr(10,2),10),gt=parseInt(L.substr(12,2),10),yt=parseInt(L.substr(14,2),10);return new Date(Z,Ee,Le,ze,gt,yt,0)},J=m.__private__.setCreationDate=function(L){var Z;if(L===void 0&&(L=new Date),L instanceof Date)Z=H(L);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(L))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Z=L}return _e=Z},N=m.__private__.getCreationDate=function(L){var Z=_e;return L==="jsDate"&&(Z=te(_e)),Z};m.setCreationDate=function(L){return J(L),this},m.getCreationDate=function(L){return N(L)};var U,W=m.__private__.padd2=function(L){return("0"+parseInt(L)).slice(-2)},Y=m.__private__.padd2Hex=function(L){return("00"+(L=L.toString())).substr(L.length)},ae=0,pe=[],he=[],xe=0,ke=[],Fe=[],oe=!1,Ze=he;m.__private__.setCustomOutputDestination=function(L){oe=!0,Ze=L};var Re=function(L){oe||(Ze=L)};m.__private__.resetCustomOutputDestination=function(){oe=!1,Ze=he};var fe=m.__private__.out=function(L){return L=L.toString(),xe+=L.length+1,Ze.push(L),Ze},ut=m.__private__.write=function(L){return fe(arguments.length===1?L.toString():Array.prototype.join.call(arguments," "))},rt=m.__private__.getArrayBuffer=function(L){for(var Z=L.length,Ee=new ArrayBuffer(Z),Le=new Uint8Array(Ee);Z--;)Le[Z]=L.charCodeAt(Z);return Ee},lt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return lt};var le=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(L){return le=j===C?L/wt:L,this};var je,ft=m.__private__.getFontSize=m.getFontSize=function(){return j===R?le:le*wt},Ie=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(L){return Ie=L,this},m.__private__.getR2L=m.getR2L=function(){return Ie};var Be,tt=m.__private__.setZoomMode=function(L){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(L))je=L;else if(isNaN(L)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(L)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+L+'" is not recognized.');je=L}else je=parseInt(L,10)};m.__private__.getZoomMode=function(){return je};var ot,ht=m.__private__.setPageMode=function(L){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(L)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+L+'" is not recognized.');Be=L};m.__private__.getPageMode=function(){return Be};var Pt=m.__private__.setLayoutMode=function(L){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(L)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+L+'" is not recognized.');ot=L};m.__private__.getLayoutMode=function(){return ot},m.__private__.setDisplayMode=m.setDisplayMode=function(L,Z,Ee){return tt(L),Pt(Z),ht(Ee),this};var Ft={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(L){if(Object.keys(Ft).indexOf(L)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ft[L]},m.__private__.getDocumentProperties=function(){return Ft},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(L){for(var Z in Ft)Ft.hasOwnProperty(Z)&&L[Z]&&(Ft[Z]=L[Z]);return this},m.__private__.setDocumentProperty=function(L,Z){if(Object.keys(Ft).indexOf(L)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ft[L]=Z};var jt,wt,At,Xt,Gt,qt={},wr={},rn=[],Me={},Mt={},Vt={},rr={},ar=null,ur=0,Jt=[],mr=new MA(m),an=t.hotfixes||[],zr={},Nn={},Cn=[],ir=function L(Z,Ee,Le,ze,gt,yt){if(!(this instanceof L))return new L(Z,Ee,Le,ze,gt,yt);isNaN(Z)&&(Z=1),isNaN(Ee)&&(Ee=0),isNaN(Le)&&(Le=0),isNaN(ze)&&(ze=1),isNaN(gt)&&(gt=0),isNaN(yt)&&(yt=0),this._matrix=[Z,Ee,Le,ze,gt,yt]};Object.defineProperty(ir.prototype,"sx",{get:function(){return this._matrix[0]},set:function(L){this._matrix[0]=L}}),Object.defineProperty(ir.prototype,"shy",{get:function(){return this._matrix[1]},set:function(L){this._matrix[1]=L}}),Object.defineProperty(ir.prototype,"shx",{get:function(){return this._matrix[2]},set:function(L){this._matrix[2]=L}}),Object.defineProperty(ir.prototype,"sy",{get:function(){return this._matrix[3]},set:function(L){this._matrix[3]=L}}),Object.defineProperty(ir.prototype,"tx",{get:function(){return this._matrix[4]},set:function(L){this._matrix[4]=L}}),Object.defineProperty(ir.prototype,"ty",{get:function(){return this._matrix[5]},set:function(L){this._matrix[5]=L}}),Object.defineProperty(ir.prototype,"a",{get:function(){return this._matrix[0]},set:function(L){this._matrix[0]=L}}),Object.defineProperty(ir.prototype,"b",{get:function(){return this._matrix[1]},set:function(L){this._matrix[1]=L}}),Object.defineProperty(ir.prototype,"c",{get:function(){return this._matrix[2]},set:function(L){this._matrix[2]=L}}),Object.defineProperty(ir.prototype,"d",{get:function(){return this._matrix[3]},set:function(L){this._matrix[3]=L}}),Object.defineProperty(ir.prototype,"e",{get:function(){return this._matrix[4]},set:function(L){this._matrix[4]=L}}),Object.defineProperty(ir.prototype,"f",{get:function(){return this._matrix[5]},set:function(L){this._matrix[5]=L}}),Object.defineProperty(ir.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ir.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ir.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ir.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ir.prototype.join=function(L){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(L)},ir.prototype.multiply=function(L){var Z=L.sx*this.sx+L.shy*this.shx,Ee=L.sx*this.shy+L.shy*this.sy,Le=L.shx*this.sx+L.sy*this.shx,ze=L.shx*this.shy+L.sy*this.sy,gt=L.tx*this.sx+L.ty*this.shx+this.tx,yt=L.tx*this.shy+L.ty*this.sy+this.ty;return new ir(Z,Ee,Le,ze,gt,yt)},ir.prototype.decompose=function(){var L=this.sx,Z=this.shy,Ee=this.shx,Le=this.sy,ze=this.tx,gt=this.ty,yt=Math.sqrt(L*L+Z*Z),Kt=(L/=yt)*Ee+(Z/=yt)*Le;Ee-=L*Kt,Le-=Z*Kt;var Zt=Math.sqrt(Ee*Ee+Le*Le);return Kt/=Zt,L*(Le/=Zt)<Z*(Ee/=Zt)&&(L=-L,Z=-Z,Kt=-Kt,yt=-yt),{scale:new ir(yt,0,0,Zt,0,0),translate:new ir(1,0,0,1,ze,gt),rotate:new ir(L,Z,-Z,L,0,0),skew:new ir(1,0,Kt,1,0,0)}},ir.prototype.toString=function(L){return this.join(" ")},ir.prototype.inversed=function(){var L=this.sx,Z=this.shy,Ee=this.shx,Le=this.sy,ze=this.tx,gt=this.ty,yt=1/(L*Le-Z*Ee),Kt=Le*yt,Zt=-Z*yt,vr=-Ee*yt,Ar=L*yt;return new ir(Kt,Zt,vr,Ar,-Kt*ze-vr*gt,-Zt*ze-Ar*gt)},ir.prototype.applyToPoint=function(L){var Z=L.x*this.sx+L.y*this.shx+this.tx,Ee=L.x*this.shy+L.y*this.sy+this.ty;return new uo(Z,Ee)},ir.prototype.applyToRectangle=function(L){var Z=this.applyToPoint(L),Ee=this.applyToPoint(new uo(L.x+L.w,L.y+L.h));return new pl(Z.x,Z.y,Ee.x-Z.x,Ee.y-Z.y)},ir.prototype.clone=function(){var L=this.sx,Z=this.shy,Ee=this.shx,Le=this.sy,ze=this.tx,gt=this.ty;return new ir(L,Z,Ee,Le,ze,gt)},m.Matrix=ir;var qr=m.matrixMult=function(L,Z){return Z.multiply(L)},is=new ir(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=is;var Dn=function(L,Z){if(!Mt[L]){var Ee=(Z instanceof ud?"Sh":"P")+(Object.keys(Me).length+1).toString(10);Z.id=Ee,Mt[L]=Ee,Me[Ee]=Z,mr.publish("addPattern",Z)}};m.ShadingPattern=ud,m.TilingPattern=J0,m.addShadingPattern=function(L,Z){return T("addShadingPattern()"),Dn(L,Z),this},m.beginTilingPattern=function(L){T("beginTilingPattern()"),js(L.boundingBox[0],L.boundingBox[1],L.boundingBox[2]-L.boundingBox[0],L.boundingBox[3]-L.boundingBox[1],L.matrix)},m.endTilingPattern=function(L,Z){T("endTilingPattern()"),Z.stream=Fe[U].join(`
`),Dn(L,Z),mr.publish("endTilingPattern",Z),Cn.pop().restore()};var qi,bn=m.__private__.newObject=function(){var L=Zn();return ne(L,!0),L},Zn=m.__private__.newObjectDeferred=function(){return ae++,pe[ae]=function(){return xe},ae},ne=function(L,Z){return Z=typeof Z=="boolean"&&Z,pe[L]=xe,Z&&fe(L+" 0 obj"),L},Te=m.__private__.newAdditionalObject=function(){var L={objId:Zn(),content:""};return ke.push(L),L},ve=Zn(),ye=Zn(),Ae=m.__private__.decodeColorString=function(L){var Z=L.split(" ");if(Z.length!==2||Z[1]!=="g"&&Z[1]!=="G")Z.length!==5||Z[4]!=="k"&&Z[4]!=="K"||(Z=[(1-Z[0])*(1-Z[3]),(1-Z[1])*(1-Z[3]),(1-Z[2])*(1-Z[3]),"r"]);else{var Ee=parseFloat(Z[0]);Z=[Ee,Ee,Ee,"r"]}for(var Le="#",ze=0;ze<3;ze++)Le+=("0"+Math.floor(255*parseFloat(Z[ze])).toString(16)).slice(-2);return Le},Ne=m.__private__.encodeColorString=function(L){var Z;typeof L=="string"&&(L={ch1:L});var Ee=L.ch1,Le=L.ch2,ze=L.ch3,gt=L.ch4,yt=L.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ee=="string"&&Ee.charAt(0)!=="#"){var Kt=new CF(Ee);if(Kt.ok)Ee=Kt.toHex();else if(!/^\d*\.?\d*$/.test(Ee))throw new Error('Invalid color "'+Ee+'" passed to jsPDF.encodeColorString.')}if(typeof Ee=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ee)&&(Ee="#"+Ee[1]+Ee[1]+Ee[2]+Ee[2]+Ee[3]+Ee[3]),typeof Ee=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ee)){var Zt=parseInt(Ee.substr(1),16);Ee=Zt>>16&255,Le=Zt>>8&255,ze=255&Zt}if(Le===void 0||gt===void 0&&Ee===Le&&Le===ze)Z=typeof Ee=="string"?Ee+" "+yt[0]:L.precision===2?I(Ee/255)+" "+yt[0]:D(Ee/255)+" "+yt[0];else if(gt===void 0||zn(gt)==="object"){if(gt&&!isNaN(gt.a)&&gt.a===0)return["1.","1.","1.",yt[1]].join(" ");Z=typeof Ee=="string"?[Ee,Le,ze,yt[1]].join(" "):L.precision===2?[I(Ee/255),I(Le/255),I(ze/255),yt[1]].join(" "):[D(Ee/255),D(Le/255),D(ze/255),yt[1]].join(" ")}else Z=typeof Ee=="string"?[Ee,Le,ze,gt,yt[2]].join(" "):L.precision===2?[I(Ee),I(Le),I(ze),I(gt),yt[2]].join(" "):[D(Ee),D(Le),D(ze),D(gt),yt[2]].join(" ");return Z},He=m.__private__.getFilters=function(){return a},nt=m.__private__.putStream=function(L){var Z=(L=L||{}).data||"",Ee=L.filters||He(),Le=L.alreadyAppliedFilters||[],ze=L.addLength1||!1,gt=Z.length,yt=L.objectId,Kt=function(bi){return bi};if(f!==null&&yt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(Kt=Tn.encryptor(yt,0));var Zt={};Ee===!0&&(Ee=["FlateEncode"]);var vr=L.additionalKeyValues||[],Ar=(Zt=gr.API.processDataByFilters!==void 0?gr.API.processDataByFilters(Z,Ee):{data:Z,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(Zt.data.length!==0&&(vr.push({key:"Length",value:Zt.data.length}),ze===!0&&vr.push({key:"Length1",value:gt})),Ar.length!=0)if(Ar.split("/").length-1==1)vr.push({key:"Filter",value:Ar});else{vr.push({key:"Filter",value:"["+Ar+"]"});for(var nn=0;nn<vr.length;nn+=1)if(vr[nn].key==="DecodeParms"){for(var Hn=[],ei=0;ei<Zt.reverseChain.split("/").length-1;ei+=1)Hn.push("null");Hn.push(vr[nn].value),vr[nn].value="["+Hn.join(" ")+"]"}}fe("<<");for(var hn=0;hn<vr.length;hn++)fe("/"+vr[hn].key+" "+vr[hn].value);fe(">>"),Zt.data.length!==0&&(fe("stream"),fe(Kt(Zt.data)),fe("endstream"))},Ke=m.__private__.putPage=function(L){var Z=L.number,Ee=L.data,Le=L.objId,ze=L.contentsObjId;ne(Le,!0),fe("<</Type /Page"),fe("/Parent "+L.rootDictionaryObjId+" 0 R"),fe("/Resources "+L.resourceDictionaryObjId+" 0 R"),fe("/MediaBox ["+parseFloat(A(L.mediaBox.bottomLeftX))+" "+parseFloat(A(L.mediaBox.bottomLeftY))+" "+A(L.mediaBox.topRightX)+" "+A(L.mediaBox.topRightY)+"]"),L.cropBox!==null&&fe("/CropBox ["+A(L.cropBox.bottomLeftX)+" "+A(L.cropBox.bottomLeftY)+" "+A(L.cropBox.topRightX)+" "+A(L.cropBox.topRightY)+"]"),L.bleedBox!==null&&fe("/BleedBox ["+A(L.bleedBox.bottomLeftX)+" "+A(L.bleedBox.bottomLeftY)+" "+A(L.bleedBox.topRightX)+" "+A(L.bleedBox.topRightY)+"]"),L.trimBox!==null&&fe("/TrimBox ["+A(L.trimBox.bottomLeftX)+" "+A(L.trimBox.bottomLeftY)+" "+A(L.trimBox.topRightX)+" "+A(L.trimBox.topRightY)+"]"),L.artBox!==null&&fe("/ArtBox ["+A(L.artBox.bottomLeftX)+" "+A(L.artBox.bottomLeftY)+" "+A(L.artBox.topRightX)+" "+A(L.artBox.topRightY)+"]"),typeof L.userUnit=="number"&&L.userUnit!==1&&fe("/UserUnit "+L.userUnit),mr.publish("putPage",{objId:Le,pageContext:Jt[Z],pageNumber:Z,page:Ee}),fe("/Contents "+ze+" 0 R"),fe(">>"),fe("endobj");var gt=Ee.join(`
`);return j===C&&(gt+=`
Q`),ne(ze,!0),nt({data:gt,filters:He(),objectId:ze}),fe("endobj"),Le},Xe=m.__private__.putPages=function(){var L,Z,Ee=[];for(L=1;L<=ur;L++)Jt[L].objId=Zn(),Jt[L].contentsObjId=Zn();for(L=1;L<=ur;L++)Ee.push(Ke({number:L,data:Fe[L],objId:Jt[L].objId,contentsObjId:Jt[L].contentsObjId,mediaBox:Jt[L].mediaBox,cropBox:Jt[L].cropBox,bleedBox:Jt[L].bleedBox,trimBox:Jt[L].trimBox,artBox:Jt[L].artBox,userUnit:Jt[L].userUnit,rootDictionaryObjId:ve,resourceDictionaryObjId:ye}));ne(ve,!0),fe("<</Type /Pages");var Le="/Kids [";for(Z=0;Z<ur;Z++)Le+=Ee[Z]+" 0 R ";fe(Le+"]"),fe("/Count "+ur),fe(">>"),fe("endobj"),mr.publish("postPutPages")},Je=function(L){mr.publish("putFont",{font:L,out:fe,newObject:bn,putStream:nt}),L.isAlreadyPutted!==!0&&(L.objectNumber=bn(),fe("<<"),fe("/Type /Font"),fe("/BaseFont /"+G0(L.postScriptName)),fe("/Subtype /Type1"),typeof L.encoding=="string"&&fe("/Encoding /"+L.encoding),fe("/FirstChar 32"),fe("/LastChar 255"),fe(">>"),fe("endobj"))},_t=function(L){L.objectNumber=bn();var Z=[];Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Form"}),Z.push({key:"BBox",value:"["+[A(L.x),A(L.y),A(L.x+L.width),A(L.y+L.height)].join(" ")+"]"}),Z.push({key:"Matrix",value:"["+L.matrix.toString()+"]"});var Ee=L.pages[1].join(`
`);nt({data:Ee,additionalKeyValues:Z,objectId:L.objectNumber}),fe("endobj")},Dt=function(L,Z){Z||(Z=21);var Ee=bn(),Le=(function(yt,Kt){var Zt,vr=[],Ar=1/(Kt-1);for(Zt=0;Zt<1;Zt+=Ar)vr.push(Zt);if(vr.push(1),yt[0].offset!=0){var nn={offset:0,color:yt[0].color};yt.unshift(nn)}if(yt[yt.length-1].offset!=1){var Hn={offset:1,color:yt[yt.length-1].color};yt.push(Hn)}for(var ei="",hn=0,bi=0;bi<vr.length;bi++){for(Zt=vr[bi];Zt>yt[hn+1].offset;)hn++;var Pn=yt[hn].offset,Hi=(Zt-Pn)/(yt[hn+1].offset-Pn),So=yt[hn].color,Ho=yt[hn+1].color;ei+=Y(Math.round((1-Hi)*So[0]+Hi*Ho[0]).toString(16))+Y(Math.round((1-Hi)*So[1]+Hi*Ho[1]).toString(16))+Y(Math.round((1-Hi)*So[2]+Hi*Ho[2]).toString(16))}return ei.trim()})(L.colors,Z),ze=[];ze.push({key:"FunctionType",value:"0"}),ze.push({key:"Domain",value:"[0.0 1.0]"}),ze.push({key:"Size",value:"["+Z+"]"}),ze.push({key:"BitsPerSample",value:"8"}),ze.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ze.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nt({data:Le,additionalKeyValues:ze,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ee}),fe("endobj"),L.objectNumber=bn(),fe("<< /ShadingType "+L.type),fe("/ColorSpace /DeviceRGB");var gt="/Coords ["+A(parseFloat(L.coords[0]))+" "+A(parseFloat(L.coords[1]))+" ";L.type===2?gt+=A(parseFloat(L.coords[2]))+" "+A(parseFloat(L.coords[3])):gt+=A(parseFloat(L.coords[2]))+" "+A(parseFloat(L.coords[3]))+" "+A(parseFloat(L.coords[4]))+" "+A(parseFloat(L.coords[5])),fe(gt+="]"),L.matrix&&fe("/Matrix ["+L.matrix.toString()+"]"),fe("/Function "+Ee+" 0 R"),fe("/Extend [true true]"),fe(">>"),fe("endobj")},Ht=function(L,Z){var Ee=Zn(),Le=bn();Z.push({resourcesOid:Ee,objectOid:Le}),L.objectNumber=Le;var ze=[];ze.push({key:"Type",value:"/Pattern"}),ze.push({key:"PatternType",value:"1"}),ze.push({key:"PaintType",value:"1"}),ze.push({key:"TilingType",value:"1"}),ze.push({key:"BBox",value:"["+L.boundingBox.map(A).join(" ")+"]"}),ze.push({key:"XStep",value:A(L.xStep)}),ze.push({key:"YStep",value:A(L.yStep)}),ze.push({key:"Resources",value:Ee+" 0 R"}),L.matrix&&ze.push({key:"Matrix",value:"["+L.matrix.toString()+"]"}),nt({data:L.stream,additionalKeyValues:ze,objectId:L.objectNumber}),fe("endobj")},Lt=function(L){for(var Z in L.objectNumber=bn(),fe("<<"),L)switch(Z){case"opacity":fe("/ca "+I(L[Z]));break;case"stroke-opacity":fe("/CA "+I(L[Z]))}fe(">>"),fe("endobj")},Tt=function(L){ne(L.resourcesOid,!0),fe("<<"),fe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var Z in fe("/Font <<"),qt)qt.hasOwnProperty(Z)&&(p===!1||p===!0&&g.hasOwnProperty(Z))&&fe("/"+Z+" "+qt[Z].objectNumber+" 0 R");fe(">>")})(),(function(){if(Object.keys(Me).length>0){for(var Z in fe("/Shading <<"),Me)Me.hasOwnProperty(Z)&&Me[Z]instanceof ud&&Me[Z].objectNumber>=0&&fe("/"+Z+" "+Me[Z].objectNumber+" 0 R");mr.publish("putShadingPatternDict"),fe(">>")}})(),(function(Z){if(Object.keys(Me).length>0){for(var Ee in fe("/Pattern <<"),Me)Me.hasOwnProperty(Ee)&&Me[Ee]instanceof m.TilingPattern&&Me[Ee].objectNumber>=0&&Me[Ee].objectNumber<Z&&fe("/"+Ee+" "+Me[Ee].objectNumber+" 0 R");mr.publish("putTilingPatternDict"),fe(">>")}})(L.objectOid),(function(){if(Object.keys(Vt).length>0){var Z;for(Z in fe("/ExtGState <<"),Vt)Vt.hasOwnProperty(Z)&&Vt[Z].objectNumber>=0&&fe("/"+Z+" "+Vt[Z].objectNumber+" 0 R");mr.publish("putGStateDict"),fe(">>")}})(),(function(){for(var Z in fe("/XObject <<"),zr)zr.hasOwnProperty(Z)&&zr[Z].objectNumber>=0&&fe("/"+Z+" "+zr[Z].objectNumber+" 0 R");mr.publish("putXobjectDict"),fe(">>")})(),fe(">>"),fe("endobj")},br=function(L){wr[L.fontName]=wr[L.fontName]||{},wr[L.fontName][L.fontStyle]=L.id},on=function(L,Z,Ee,Le,ze){var gt={id:"F"+(Object.keys(qt).length+1).toString(10),postScriptName:L,fontName:Z,fontStyle:Ee,encoding:Le,isStandardFont:ze||!1,metadata:{}};return mr.publish("addFont",{font:gt,instance:this}),qt[gt.id]=gt,br(gt),gt.id},Dr=m.__private__.pdfEscape=m.pdfEscape=function(L,Z){return(function(Ee,Le){var ze,gt,yt,Kt,Zt,vr,Ar,nn,Hn;if(yt=(Le=Le||{}).sourceEncoding||"Unicode",Zt=Le.outputEncoding,(Le.autoencode||Zt)&&qt[jt].metadata&&qt[jt].metadata[yt]&&qt[jt].metadata[yt].encoding&&(Kt=qt[jt].metadata[yt].encoding,!Zt&&qt[jt].encoding&&(Zt=qt[jt].encoding),!Zt&&Kt.codePages&&(Zt=Kt.codePages[0]),typeof Zt=="string"&&(Zt=Kt[Zt]),Zt)){for(Ar=!1,vr=[],ze=0,gt=Ee.length;ze<gt;ze++)(nn=Zt[Ee.charCodeAt(ze)])?vr.push(String.fromCharCode(nn)):vr.push(Ee[ze]),vr[ze].charCodeAt(0)>>8&&(Ar=!0);Ee=vr.join("")}for(ze=Ee.length;Ar===void 0&&ze!==0;)Ee.charCodeAt(ze-1)>>8&&(Ar=!0),ze--;if(!Ar)return Ee;for(vr=Le.noBOM?[]:[254,255],ze=0,gt=Ee.length;ze<gt;ze++){if((Hn=(nn=Ee.charCodeAt(ze))>>8)>>8)throw new Error("Character at position "+ze+" of string '"+Ee+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");vr.push(Hn),vr.push(nn-(Hn<<8))}return String.fromCharCode.apply(void 0,vr)})(L,Z).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},fn=m.__private__.beginPage=function(L){Fe[++ur]=[],Jt[ur]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(L[0]),topRightY:Number(L[1])}},Ws(ur),Re(Fe[U])},Na=function(L,Z){var Ee,Le,ze;switch(r=Z||r,typeof L=="string"&&(Ee=k(L.toLowerCase()),Array.isArray(Ee)&&(Le=Ee[0],ze=Ee[1])),Array.isArray(L)&&(Le=L[0]*wt,ze=L[1]*wt),isNaN(Le)&&(Le=i[0],ze=i[1]),(Le>14400||ze>14400)&&(ri.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),ze=Math.min(14400,ze)),i=[Le,ze],r.substr(0,1)){case"l":ze>Le&&(i=[ze,Le]);break;case"p":Le>ze&&(i=[ze,Le])}fn(i),Ra(fa),fe(bo),In!==0&&fe(In+" J"),hu!==0&&fe(hu+" j"),mr.publish("addPage",{pageNumber:ur})},Ca=function(L){L>0&&L<=ur&&(Fe.splice(L,1),Jt.splice(L,1),ur--,U>ur&&(U=ur),this.setPage(U))},Ws=function(L){L>0&&L<=ur&&(U=L)},ii=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Fe.length-1},Bo=function(L,Z,Ee){var Le,ze=void 0;return Ee=Ee||{},L=L!==void 0?L:qt[jt].fontName,Z=Z!==void 0?Z:qt[jt].fontStyle,Le=L.toLowerCase(),wr[Le]!==void 0&&wr[Le][Z]!==void 0?ze=wr[Le][Z]:wr[L]!==void 0&&wr[L][Z]!==void 0?ze=wr[L][Z]:Ee.disableWarning===!1&&ri.warn("Unable to look up font label for font '"+L+"', '"+Z+"'. Refer to getFontList() for available fonts."),ze||Ee.noFallback||(ze=wr.times[Z])==null&&(ze=wr.times.normal),ze},En=m.__private__.putInfo=function(){var L=bn(),Z=function(Le){return Le};for(var Ee in f!==null&&(Z=Tn.encryptor(L,0)),fe("<<"),fe("/Producer ("+Dr(Z("jsPDF "+gr.version))+")"),Ft)Ft.hasOwnProperty(Ee)&&Ft[Ee]&&fe("/"+Ee.substr(0,1).toUpperCase()+Ee.substr(1)+" ("+Dr(Z(Ft[Ee]))+")");fe("/CreationDate ("+Dr(Z(_e))+")"),fe(">>"),fe("endobj")},uu=m.__private__.putCatalog=function(L){var Z=(L=L||{}).rootDictionaryObjId||ve;switch(bn(),fe("<<"),fe("/Type /Catalog"),fe("/Pages "+Z+" 0 R"),je||(je="fullwidth"),je){case"fullwidth":fe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":fe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":fe("/OpenAction [3 0 R /Fit]");break;case"original":fe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ee=""+je;Ee.substr(Ee.length-1)==="%"&&(je=parseInt(je)/100),typeof je=="number"&&fe("/OpenAction [3 0 R /XYZ null null "+I(je)+"]")}switch(ot||(ot="continuous"),ot){case"continuous":fe("/PageLayout /OneColumn");break;case"single":fe("/PageLayout /SinglePage");break;case"two":case"twoleft":fe("/PageLayout /TwoColumnLeft");break;case"tworight":fe("/PageLayout /TwoColumnRight")}Be&&fe("/PageMode /"+Be),mr.publish("putCatalog"),fe(">>"),fe("endobj")},fi=m.__private__.putTrailer=function(){fe("trailer"),fe("<<"),fe("/Size "+(ae+1)),fe("/Root "+ae+" 0 R"),fe("/Info "+(ae-1)+" 0 R"),f!==null&&fe("/Encrypt "+Tn.oid+" 0 R"),fe("/ID [ <"+Ce+"> <"+Ce+"> ]"),fe(">>")},fu=m.__private__.putHeader=function(){fe("%PDF-"+_),fe("%")},zl=m.__private__.putXRef=function(){var L="0000000000";fe("xref"),fe("0 "+(ae+1)),fe("0000000000 65535 f ");for(var Z=1;Z<=ae;Z++)typeof pe[Z]=="function"?fe((L+pe[Z]()).slice(-10)+" 00000 n "):pe[Z]!==void 0?fe((L+pe[Z]).slice(-10)+" 00000 n "):fe("0000000000 00000 n ")},Ia=m.__private__.buildDocument=function(){var L;ae=0,xe=0,he=[],pe=[],ke=[],ve=Zn(),ye=Zn(),Re(he),mr.publish("buildDocument"),fu(),Xe(),(function(){mr.publish("putAdditionalObjects");for(var Ee=0;Ee<ke.length;Ee++){var Le=ke[Ee];ne(Le.objId,!0),fe(Le.content),fe("endobj")}mr.publish("postPutAdditionalObjects")})(),L=[],(function(){for(var Ee in qt)qt.hasOwnProperty(Ee)&&(p===!1||p===!0&&g.hasOwnProperty(Ee))&&Je(qt[Ee])})(),(function(){var Ee;for(Ee in Vt)Vt.hasOwnProperty(Ee)&&Lt(Vt[Ee])})(),(function(){for(var Ee in zr)zr.hasOwnProperty(Ee)&&_t(zr[Ee])})(),(function(Ee){var Le;for(Le in Me)Me.hasOwnProperty(Le)&&(Me[Le]instanceof ud?Dt(Me[Le]):Me[Le]instanceof J0&&Ht(Me[Le],Ee))})(L),mr.publish("putResources"),L.forEach(Tt),Tt({resourcesOid:ye,objectOid:Number.MAX_SAFE_INTEGER}),mr.publish("postPutResources"),f!==null&&(Tn.oid=bn(),fe("<<"),fe("/Filter /Standard"),fe("/V "+Tn.v),fe("/R "+Tn.r),fe("/U <"+Tn.toHexString(Tn.U)+">"),fe("/O <"+Tn.toHexString(Tn.O)+">"),fe("/P "+Tn.P),fe(">>"),fe("endobj")),En(),uu();var Z=xe;return zl(),fi(),fe("startxref"),fe(""+Z),fe("%%EOF"),Re(Fe[U]),he.join(`
`)},Pa=m.__private__.getBlob=function(L){return new Blob([rt(L)],{type:"application/pdf"})},Rs=m.output=m.__private__.output=(qi=function(L,Z){switch(typeof(Z=Z||{})=="string"?Z={filename:Z}:Z.filename=Z.filename||"generated.pdf",L){case void 0:return Ia();case"save":m.save(Z.filename);break;case"arraybuffer":return rt(Ia());case"blob":return Pa(Ia());case"bloburi":case"bloburl":if(Fr.URL!==void 0&&typeof Fr.URL.createObjectURL=="function")return Fr.URL&&Fr.URL.createObjectURL(Pa(Ia()))||void 0;ri.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ee="",Le=Ia();try{Ee=DA(Le)}catch{Ee=DA(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+Z.filename+";base64,"+Ee;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Fr)==="[object Window]"){var ze="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",gt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Z.pdfObjectUrl&&(ze=Z.pdfObjectUrl,gt="");var yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ze+'"'+gt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Z)+");<\/script></body></html>",Kt=Fr.open();return Kt!==null&&Kt.document.write(yt),Kt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Fr)==="[object Window]"){var Zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Z.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Z.filename+'" width="500px" height="400px" /></body></html>',vr=Fr.open();if(vr!==null){vr.document.write(Zt);var Ar=this;vr.document.documentElement.querySelector("#pdfViewer").onload=function(){vr.document.title=Z.filename,vr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ar.output("bloburl"))}}return vr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Fr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var nn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Z)+'"></iframe></body></html>',Hn=Fr.open();if(Hn!==null&&(Hn.document.write(nn),Hn.document.title=Z.filename),Hn||typeof safari>"u")return Hn;break;case"datauri":case"dataurl":return Fr.document.location.href=this.output("datauristring",Z);default:return null}},qi.foo=function(){try{return qi.apply(this,arguments)}catch(Ee){var L=Ee.stack||"";~L.indexOf(" at ")&&(L=L.split(" at ")[1]);var Z="Error in function "+L.split(`
`)[0].split("<")[0]+": "+Ee.message;if(!Fr.console)throw new Error(Z);Fr.console.error(Z,Ee),Fr.alert&&alert(Z)}},qi.foo.bar=qi,qi.foo),$l=function(L){return Array.isArray(an)===!0&&an.indexOf(L)>-1};switch(n){case"pt":wt=1;break;case"mm":wt=72/25.4;break;case"cm":wt=72/2.54;break;case"in":wt=72;break;case"px":wt=$l("px_scaling")==1?.75:96/72;break;case"pc":case"em":wt=12;break;case"ex":wt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);wt=n}var Tn=null;J(),ce();var Fs=m.__private__.getPageInfo=m.getPageInfo=function(L){if(isNaN(L)||L%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Jt[L].objId,pageNumber:L,pageContext:Jt[L]}},ql=m.__private__.getPageInfoByObjId=function(L){if(isNaN(L)||L%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Z in Jt)if(Jt[Z].objId===L)break;return Fs(Z)},fl=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Jt[U].objId,pageNumber:U,pageContext:Jt[U]}};m.addPage=function(){return Na.apply(this,arguments),this},m.setPage=function(){return Ws.apply(this,arguments),Re.call(this,Fe[U]),this},m.insertPage=function(L){return this.addPage(),this.movePage(U,L),this},m.movePage=function(L,Z){var Ee,Le;if(L>Z){Ee=Fe[L],Le=Jt[L];for(var ze=L;ze>Z;ze--)Fe[ze]=Fe[ze-1],Jt[ze]=Jt[ze-1];Fe[Z]=Ee,Jt[Z]=Le,this.setPage(Z)}else if(L<Z){Ee=Fe[L],Le=Jt[L];for(var gt=L;gt<Z;gt++)Fe[gt]=Fe[gt+1],Jt[gt]=Jt[gt+1];Fe[Z]=Ee,Jt[Z]=Le,this.setPage(Z)}return this},m.deletePage=function(){return Ca.apply(this,arguments),this},m.__private__.text=m.text=function(L,Z,Ee,Le,ze){var gt,yt,Kt,Zt,vr,Ar,nn,Hn,ei,hn=(Le=Le||{}).scope||this;if(typeof L=="number"&&typeof Z=="number"&&(typeof Ee=="string"||Array.isArray(Ee))){var bi=Ee;Ee=Z,Z=L,L=bi}if(arguments[3]instanceof ir==0?(Kt=arguments[4],Zt=arguments[5],zn(nn=arguments[3])==="object"&&nn!==null||(typeof Kt=="string"&&(Zt=Kt,Kt=null),typeof nn=="string"&&(Zt=nn,nn=null),typeof nn=="number"&&(Kt=nn,nn=null),Le={flags:nn,angle:Kt,align:Zt})):(T("The transform parameter of text() with a Matrix value"),ei=ze),isNaN(Z)||isNaN(Ee)||L==null)throw new Error("Invalid arguments passed to jsPDF.text");if(L.length===0)return hn;var Pn,Hi="",So=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:Ds,Ho=hn.internal.scaleFactor;function du(Wn){return Wn=Wn.split("	").join(Array(Le.TabLen||9).join(" ")),Dr(Wn,nn)}function Wl(Wn){for(var Gn,Fi=Wn.concat(),Li=[],os=Fi.length;os--;)typeof(Gn=Fi.shift())=="string"?Li.push(Gn):Array.isArray(Wn)&&(Gn.length===1||Gn[1]===void 0&&Gn[2]===void 0)?Li.push(Gn[0]):Li.push([Gn[0],Gn[1],Gn[2]]);return Li}function Ri(Wn,Gn){var Fi;if(typeof Wn=="string")Fi=Gn(Wn)[0];else if(Array.isArray(Wn)){for(var Li,os,vl=Wn.concat(),Go=[],ff=vl.length;ff--;)typeof(Li=vl.shift())=="string"?Go.push(Gn(Li)[0]):Array.isArray(Li)&&typeof Li[0]=="string"&&(os=Gn(Li[0],Li[1],Li[2]),Go.push([os[0],os[1],os[2]]));Fi=Go}return Fi}var La=!1,_c=!0;if(typeof L=="string")La=!0;else if(Array.isArray(L)){var ha=L.concat();yt=[];for(var y,V=ha.length;V--;)(typeof(y=ha.shift())!="string"||Array.isArray(y)&&typeof y[0]!="string")&&(_c=!1);La=_c}if(La===!1)throw new Error('Type of text must be string or Array. "'+L+'" is not recognized.');typeof L=="string"&&(L=L.match(/[\r?\n]/)?L.split(/\r\n|\r|\n/g):[L]);var Q=le/hn.internal.scaleFactor,me=Q*(So-1);switch(Le.baseline){case"bottom":Ee-=me;break;case"top":Ee+=Q-me;break;case"hanging":Ee+=Q-2*me;break;case"middle":Ee+=Q/2-me}if((Ar=Le.maxWidth||0)>0&&(typeof L=="string"?L=hn.splitTextToSize(L,Ar):Object.prototype.toString.call(L)==="[object Array]"&&(L=L.reduce(function(Wn,Gn){return Wn.concat(hn.splitTextToSize(Gn,Ar))},[]))),gt={text:L,x:Z,y:Ee,options:Le,mutex:{pdfEscape:Dr,activeFontKey:jt,fonts:qt,activeFontSize:le}},mr.publish("preProcessText",gt),L=gt.text,Kt=(Le=gt.options).angle,ei instanceof ir==0&&Kt&&typeof Kt=="number"){Kt*=Math.PI/180,Le.rotationDirection===0&&(Kt=-Kt),j===C&&(Kt=-Kt);var $e=Math.cos(Kt),at=Math.sin(Kt);ei=new ir($e,at,-at,$e,0,0)}else Kt&&Kt instanceof ir&&(ei=Kt);j!==C||ei||(ei=is),(vr=Le.charSpace||Fa)!==void 0&&(Hi+=A(B(vr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Hn=Le.horizontalScale)!==void 0&&(Hi+=A(100*Hn)+` Tz
`),Le.lang;var It=-1,dn=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,si=hn.internal.getCurrentPageInfo().pageContext;switch(dn){case 0:case!1:case"fill":It=0;break;case 1:case!0:case"stroke":It=1;break;case 2:case"fillThenStroke":It=2;break;case 3:case"invisible":It=3;break;case 4:case"fillAndAddForClipping":It=4;break;case 5:case"strokeAndAddPathForClipping":It=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":It=6;break;case 7:case"addToPathForClipping":It=7}var Gr=si.usedRenderingMode!==void 0?si.usedRenderingMode:-1;It!==-1?Hi+=It+` Tr
`:Gr!==-1&&(Hi+=`0 Tr
`),It!==-1&&(si.usedRenderingMode=It),Zt=Le.align||"left";var Qr,gn=le*So,Ks=hn.internal.pageSize.getWidth(),Ms=qt[jt];vr=Le.charSpace||Fa,Ar=Le.maxWidth||0,nn=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var Da=[],Wo=function(Wn){return hn.getStringUnitWidth(Wn,{font:Ms,charSpace:vr,fontSize:le,doKerning:!1})*le/Ho};if(Object.prototype.toString.call(L)==="[object Array]"){var da;yt=Wl(L),Zt!=="left"&&(Qr=yt.map(Wo));var pa,bc=0;if(Zt==="right"){Z-=Qr[0],L=[],V=yt.length;for(var ma=0;ma<V;ma++)ma===0?(pa=_i(Z),da=zo(Ee)):(pa=B(bc-Qr[ma]),da=-gn),L.push([yt[ma],pa,da]),bc=Qr[ma]}else if(Zt==="center"){Z-=Qr[0]/2,L=[],V=yt.length;for(var Ec=0;Ec<V;Ec++)Ec===0?(pa=_i(Z),da=zo(Ee)):(pa=B((bc-Qr[Ec])/2),da=-gn),L.push([yt[Ec],pa,da]),bc=Qr[Ec]}else if(Zt==="left"){L=[],V=yt.length;for(var Dh=0;Dh<V;Dh++)L.push(yt[Dh])}else if(Zt==="justify"&&Ms.encoding==="Identity-H"){L=[],V=yt.length,Ar=Ar!==0?Ar:Ks;for(var Sc=0,Ei=0;Ei<V;Ei++)if(da=Ei===0?zo(Ee):-gn,pa=Ei===0?_i(Z):Sc,Ei<V-1){var a0=B((Ar-Qr[Ei])/(yt[Ei].split(" ").length-1)),Oa=yt[Ei].split(" ");L.push([Oa[0]+" ",pa,da]),Sc=0;for(var ja=1;ja<Oa.length;ja++){var lf=(Wo(Oa[ja-1]+" "+Oa[ja])-Wo(Oa[ja]))*Ho+a0;ja==Oa.length-1?L.push([Oa[ja],lf,0]):L.push([Oa[ja]+" ",lf,0]),Sc-=lf}}else L.push([yt[Ei],pa,da]);L.push(["",Sc,0])}else{if(Zt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(L=[],V=yt.length,Ar=Ar!==0?Ar:Ks,Ei=0;Ei<V;Ei++)da=Ei===0?zo(Ee):-gn,pa=Ei===0?_i(Z):0,Ei<V-1?Da.push(A(B((Ar-Qr[Ei])/(yt[Ei].split(" ").length-1)))):Da.push(0),L.push([yt[Ei],pa,da])}}(typeof Le.R2L=="boolean"?Le.R2L:Ie)===!0&&(L=Ri(L,function(Wn,Gn,Fi){return[Wn.split("").reverse().join(""),Gn,Fi]})),gt={text:L,x:Z,y:Ee,options:Le,mutex:{pdfEscape:Dr,activeFontKey:jt,fonts:qt,activeFontSize:le}},mr.publish("postProcessText",gt),L=gt.text,Pn=gt.mutex.isHex||!1;var kc=qt[jt].encoding;kc!=="WinAnsiEncoding"&&kc!=="StandardEncoding"||(L=Ri(L,function(Wn,Gn,Fi){return[du(Wn),Gn,Fi]})),yt=Wl(L),L=[];for(var cf,pu,Gl,Kl=Array.isArray(yt[0])?1:0,gl="",uf=function(Wn,Gn,Fi){var Li="";return Fi instanceof ir?(Fi=typeof Le.angle=="number"?qr(Fi,new ir(1,0,0,1,Wn,Gn)):qr(new ir(1,0,0,1,Wn,Gn),Fi),j===C&&(Fi=qr(new ir(1,0,0,-1,0,0),Fi)),Li=Fi.join(" ")+` Tm
`):Li=A(Wn)+" "+A(Gn)+` Td
`,Li},Ma=0;Ma<yt.length;Ma++){switch(gl="",Kl){case 1:Gl=(Pn?"<":"(")+yt[Ma][0]+(Pn?">":")"),cf=parseFloat(yt[Ma][1]),pu=parseFloat(yt[Ma][2]);break;case 0:Gl=(Pn?"<":"(")+yt[Ma]+(Pn?">":")"),cf=_i(Z),pu=zo(Ee)}Da!==void 0&&Da[Ma]!==void 0&&(gl=Da[Ma]+` Tw
`),Ma===0?L.push(gl+uf(cf,pu,ei)+Gl):Kl===0?L.push(gl+Gl):Kl===1&&L.push(gl+uf(cf,pu,ei)+Gl)}L=Kl===0?L.join(` Tj
T* `):L.join(` Tj
`),L+=` Tj
`;var xl=`BT
/`;return xl+=jt+" "+le+` Tf
`,xl+=A(le*So)+` TL
`,xl+=Os+`
`,xl+=Hi,xl+=L,fe(xl+="ET"),g[jt]=!0,hn};var hl=m.__private__.clip=m.clip=function(L){return fe(L==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return hl("evenodd")},m.__private__.discardPath=m.discardPath=function(){return fe("n"),this};var Yr=m.__private__.isValidStyle=function(L){var Z=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(L)!==-1&&(Z=!0),Z};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(L){return Yr(L)&&(c=L),this};var Vo=m.__private__.getStyle=m.getStyle=function(L){var Z=c;switch(L){case"D":case"S":Z="S";break;case"F":Z="f";break;case"FD":case"DF":Z="B";break;case"f":case"f*":case"B":case"B*":Z=L}return Z},Hr=m.close=function(){return fe("h"),this};m.stroke=function(){return fe("S"),this},m.fill=function(L){return ua("f",L),this},m.fillEvenOdd=function(L){return ua("f*",L),this},m.fillStroke=function(L){return ua("B",L),this},m.fillStrokeEvenOdd=function(L){return ua("B*",L),this};var ua=function(L,Z){zn(Z)==="object"?nf(Z,L):fe(L)},xc=function(L){L===null||j===C&&L===void 0||(L=Vo(L),fe(L))};function vc(L,Z,Ee,Le,ze){var gt=new J0(Z||this.boundingBox,Ee||this.xStep,Le||this.yStep,this.gState,ze||this.matrix);gt.stream=this.stream;var yt=L+"$$"+this.cloneIndex+++"$$";return Dn(yt,gt),gt}var nf=function(L,Z){var Ee=Mt[L.key],Le=Me[Ee];if(Le instanceof ud)fe("q"),fe(sf(Z)),Le.gState&&m.setGState(Le.gState),fe(L.matrix.toString()+" cm"),fe("/"+Ee+" sh"),fe("Q");else if(Le instanceof J0){var ze=new ir(1,0,0,-1,0,_s());L.matrix&&(ze=ze.multiply(L.matrix||is),Ee=vc.call(Le,L.key,L.boundingBox,L.xStep,L.yStep,ze).id),fe("q"),fe("/Pattern cs"),fe("/"+Ee+" scn"),Le.gState&&m.setGState(Le.gState),fe(Z),fe("Q")}},sf=function(L){switch(L){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},yc=m.moveTo=function(L,Z){return fe(A(B(L))+" "+A(re(Z))+" m"),this},Uo=m.lineTo=function(L,Z){return fe(A(B(L))+" "+A(re(Z))+" l"),this},Ls=m.curveTo=function(L,Z,Ee,Le,ze,gt){return fe([A(B(L)),A(re(Z)),A(B(Ee)),A(re(Le)),A(B(ze)),A(re(gt)),"c"].join(" ")),this};m.__private__.line=m.line=function(L,Z,Ee,Le,ze){if(isNaN(L)||isNaN(Z)||isNaN(Ee)||isNaN(Le)||!Yr(ze))throw new Error("Invalid arguments passed to jsPDF.line");return j===R?this.lines([[Ee-L,Le-Z]],L,Z,[1,1],ze||"S"):this.lines([[Ee-L,Le-Z]],L,Z,[1,1]).stroke()},m.__private__.lines=m.lines=function(L,Z,Ee,Le,ze,gt){var yt,Kt,Zt,vr,Ar,nn,Hn,ei,hn,bi,Pn,Hi;if(typeof L=="number"&&(Hi=Ee,Ee=Z,Z=L,L=Hi),Le=Le||[1,1],gt=gt||!1,isNaN(Z)||isNaN(Ee)||!Array.isArray(L)||!Array.isArray(Le)||!Yr(ze)||typeof gt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(yc(Z,Ee),yt=Le[0],Kt=Le[1],vr=L.length,bi=Z,Pn=Ee,Zt=0;Zt<vr;Zt++)(Ar=L[Zt]).length===2?(bi=Ar[0]*yt+bi,Pn=Ar[1]*Kt+Pn,Uo(bi,Pn)):(nn=Ar[0]*yt+bi,Hn=Ar[1]*Kt+Pn,ei=Ar[2]*yt+bi,hn=Ar[3]*Kt+Pn,bi=Ar[4]*yt+bi,Pn=Ar[5]*Kt+Pn,Ls(nn,Hn,ei,hn,bi,Pn));return gt&&Hr(),xc(ze),this},m.path=function(L){for(var Z=0;Z<L.length;Z++){var Ee=L[Z],Le=Ee.c;switch(Ee.op){case"m":yc(Le[0],Le[1]);break;case"l":Uo(Le[0],Le[1]);break;case"c":Ls.apply(this,Le);break;case"h":Hr()}}return this},m.__private__.rect=m.rect=function(L,Z,Ee,Le,ze){if(isNaN(L)||isNaN(Z)||isNaN(Ee)||isNaN(Le)||!Yr(ze))throw new Error("Invalid arguments passed to jsPDF.rect");return j===R&&(Le=-Le),fe([A(B(L)),A(re(Z)),A(B(Ee)),A(B(Le)),"re"].join(" ")),xc(ze),this},m.__private__.triangle=m.triangle=function(L,Z,Ee,Le,ze,gt,yt){if(isNaN(L)||isNaN(Z)||isNaN(Ee)||isNaN(Le)||isNaN(ze)||isNaN(gt)||!Yr(yt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ee-L,Le-Z],[ze-Ee,gt-Le],[L-ze,Z-gt]],L,Z,[1,1],yt,!0),this},m.__private__.roundedRect=m.roundedRect=function(L,Z,Ee,Le,ze,gt,yt){if(isNaN(L)||isNaN(Z)||isNaN(Ee)||isNaN(Le)||isNaN(ze)||isNaN(gt)||!Yr(yt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Kt=4/3*(Math.SQRT2-1);return ze=Math.min(ze,.5*Ee),gt=Math.min(gt,.5*Le),this.lines([[Ee-2*ze,0],[ze*Kt,0,ze,gt-gt*Kt,ze,gt],[0,Le-2*gt],[0,gt*Kt,-ze*Kt,gt,-ze,gt],[2*ze-Ee,0],[-ze*Kt,0,-ze,-gt*Kt,-ze,-gt],[0,2*gt-Le],[0,-gt*Kt,ze*Kt,-gt,ze,-gt]],L+ze,Z,[1,1],yt,!0),this},m.__private__.ellipse=m.ellipse=function(L,Z,Ee,Le,ze){if(isNaN(L)||isNaN(Z)||isNaN(Ee)||isNaN(Le)||!Yr(ze))throw new Error("Invalid arguments passed to jsPDF.ellipse");var gt=4/3*(Math.SQRT2-1)*Ee,yt=4/3*(Math.SQRT2-1)*Le;return yc(L+Ee,Z),Ls(L+Ee,Z-yt,L+gt,Z-Le,L,Z-Le),Ls(L-gt,Z-Le,L-Ee,Z-yt,L-Ee,Z),Ls(L-Ee,Z+yt,L-gt,Z+Le,L,Z+Le),Ls(L+gt,Z+Le,L+Ee,Z+yt,L+Ee,Z),xc(ze),this},m.__private__.circle=m.circle=function(L,Z,Ee,Le){if(isNaN(L)||isNaN(Z)||isNaN(Ee)||!Yr(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(L,Z,Ee,Ee,Le)},m.setFont=function(L,Z,Ee){return Ee&&(Z=P(Z,Ee)),jt=Bo(L,Z,{disableWarning:!1}),this};var ss=m.__private__.getFont=m.getFont=function(){return qt[Bo.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var L,Z,Ee={};for(L in wr)if(wr.hasOwnProperty(L))for(Z in Ee[L]=[],wr[L])wr[L].hasOwnProperty(Z)&&Ee[L].push(Z);return Ee},m.addFont=function(L,Z,Ee,Le,ze){var gt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&gt.indexOf(arguments[3])!==-1?ze=arguments[3]:arguments[3]&&gt.indexOf(arguments[3])==-1&&(Ee=P(Ee,Le)),on.call(this,L,Z,Ee,ze=ze||"Identity-H")};var Ds,fa=t.lineWidth||.200025,_r=m.__private__.getLineWidth=m.getLineWidth=function(){return fa},Ra=m.__private__.setLineWidth=m.setLineWidth=function(L){return fa=L,fe(A(B(L))+" w"),this};m.__private__.setLineDash=gr.API.setLineDash=gr.API.setLineDashPattern=function(L,Z){if(L=L||[],Z=Z||0,isNaN(Z)||!Array.isArray(L))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return L=L.map(function(Ee){return A(B(Ee))}).join(" "),Z=A(B(Z)),fe("["+L+"] "+Z+" d"),this};var _o=m.__private__.getLineHeight=m.getLineHeight=function(){return le*Ds};m.__private__.getLineHeight=m.getLineHeight=function(){return le*Ds};var Lh=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(L){return typeof(L=L||1.15)=="number"&&(Ds=L),this},af=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Ds};Lh(t.lineHeight);var _i=m.__private__.getHorizontalCoordinate=function(L){return B(L)},zo=m.__private__.getVerticalCoordinate=function(L){return j===C?L:Jt[U].mediaBox.topRightY-Jt[U].mediaBox.bottomLeftY-B(L)},of=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(L){return A(_i(L))},$o=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(L){return A(zo(L))},bo=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Ae(bo)},m.__private__.setStrokeColor=m.setDrawColor=function(L,Z,Ee,Le){return bo=Ne({ch1:L,ch2:Z,ch3:Ee,ch4:Le,pdfColorType:"draw",precision:2}),fe(bo),this};var wc=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Ae(wc)},m.__private__.setFillColor=m.setFillColor=function(L,Z,Ee,Le){return wc=Ne({ch1:L,ch2:Z,ch3:Ee,ch4:Le,pdfColorType:"fill",precision:2}),fe(wc),this};var Os=t.textColor||"0 g",Gs=m.__private__.getTextColor=m.getTextColor=function(){return Ae(Os)};m.__private__.setTextColor=m.setTextColor=function(L,Z,Ee,Le){return Os=Ne({ch1:L,ch2:Z,ch3:Ee,ch4:Le,pdfColorType:"text",precision:3}),this};var Fa=t.charSpace,dl=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Fa||0)};m.__private__.setCharSpace=m.setCharSpace=function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Fa=L,this};var In=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(L){var Z=m.CapJoinStyles[L];if(Z===void 0)throw new Error("Line cap style of '"+L+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return In=Z,fe(Z+" J"),this};var hu=0;m.__private__.setLineJoin=m.setLineJoin=function(L){var Z=m.CapJoinStyles[L];if(Z===void 0)throw new Error("Line join style of '"+L+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return hu=Z,fe(Z+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(L){if(L=L||0,isNaN(L))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return fe(A(B(L))+" M"),this},m.GState=Av,m.setGState=function(L){(L=typeof L=="string"?Vt[rr[L]]:qo(null,L)).equals(ar)||(fe("/"+L.id+" gs"),ar=L)};var qo=function(L,Z){if(!L||!rr[L]){var Ee=!1;for(var Le in Vt)if(Vt.hasOwnProperty(Le)&&Vt[Le].equals(Z)){Ee=!0;break}if(Ee)Z=Vt[Le];else{var ze="GS"+(Object.keys(Vt).length+1).toString(10);Vt[ze]=Z,Z.id=ze}return L&&(rr[L]=Z.id),mr.publish("addGState",Z),Z}};m.addGState=function(L,Z){return qo(L,Z),this},m.saveGraphicsState=function(){return fe("q"),rn.push({key:jt,size:le,color:Os}),this},m.restoreGraphicsState=function(){fe("Q");var L=rn.pop();return jt=L.key,le=L.size,Os=L.color,ar=null,this},m.setCurrentTransformationMatrix=function(L){return fe(L.toString()+" cm"),this},m.comment=function(L){return fe("#"+L),this};var uo=function(L,Z){var Ee=L||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ee},set:function(gt){isNaN(gt)||(Ee=parseFloat(gt))}});var Le=Z||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(gt){isNaN(gt)||(Le=parseFloat(gt))}});var ze="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ze},set:function(gt){ze=gt.toString()}}),this},pl=function(L,Z,Ee,Le){uo.call(this,L,Z),this.type="rect";var ze=Ee||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ze},set:function(yt){isNaN(yt)||(ze=parseFloat(yt))}});var gt=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return gt},set:function(yt){isNaN(yt)||(gt=parseFloat(yt))}}),this},ml=function(){this.page=ur,this.currentPage=U,this.pages=Fe.slice(0),this.pagesContext=Jt.slice(0),this.x=At,this.y=Xt,this.matrix=Gt,this.width=ws(U),this.height=_s(U),this.outputDestination=Ze,this.id="",this.objectNumber=-1};ml.prototype.restore=function(){ur=this.page,U=this.currentPage,Jt=this.pagesContext,Fe=this.pages,At=this.x,Xt=this.y,Gt=this.matrix,Hl(U,this.width),as(U,this.height),Ze=this.outputDestination};var js=function(L,Z,Ee,Le,ze){Cn.push(new ml),ur=U=0,Fe=[],At=L,Xt=Z,Gt=ze,fn([Ee,Le])};for(var Eo in m.beginFormObject=function(L,Z,Ee,Le,ze){return js(L,Z,Ee,Le,ze),this},m.endFormObject=function(L){return(function(Z){if(Nn[Z])Cn.pop().restore();else{var Ee=new ml,Le="Xo"+(Object.keys(zr).length+1).toString(10);Ee.id=Le,Nn[Z]=Le,zr[Le]=Ee,mr.publish("addFormObject",Ee),Cn.pop().restore()}})(L),this},m.doFormObject=function(L,Z){var Ee=zr[Nn[L]];return fe("q"),fe(Z.toString()+" cm"),fe("/"+Ee.id+" Do"),fe("Q"),this},m.getFormObject=function(L){var Z=zr[Nn[L]];return{x:Z.x,y:Z.y,width:Z.width,height:Z.height,matrix:Z.matrix}},m.save=function(L,Z){return L=L||"generated.pdf",(Z=Z||{}).returnPromise=Z.returnPromise||!1,Z.returnPromise===!1?(id(Pa(Ia()),L),typeof id.unload=="function"&&Fr.setTimeout&&setTimeout(id.unload,911),this):new Promise(function(Ee,Le){try{var ze=id(Pa(Ia()),L);typeof id.unload=="function"&&Fr.setTimeout&&setTimeout(id.unload,911),Ee(ze)}catch(gt){Le(gt.message)}})},gr.API)gr.API.hasOwnProperty(Eo)&&(Eo==="events"&&gr.API.events.length?(function(L,Z){var Ee,Le,ze;for(ze=Z.length-1;ze!==-1;ze--)Ee=Z[ze][0],Le=Z[ze][1],L.subscribe.apply(L,[Ee].concat(typeof Le=="function"?[Le]:Le))})(mr,gr.API.events):m[Eo]=gr.API[Eo]);var ws=m.getPageWidth=function(L){return(Jt[L=L||U].mediaBox.topRightX-Jt[L].mediaBox.bottomLeftX)/wt},Hl=m.setPageWidth=function(L,Z){Jt[L].mediaBox.topRightX=Z*wt+Jt[L].mediaBox.bottomLeftX},_s=m.getPageHeight=function(L){return(Jt[L=L||U].mediaBox.topRightY-Jt[L].mediaBox.bottomLeftY)/wt},as=m.setPageHeight=function(L,Z){Jt[L].mediaBox.topRightY=Z*wt+Jt[L].mediaBox.bottomLeftY};return m.internal={pdfEscape:Dr,getStyle:Vo,getFont:ss,getFontSize:ft,getCharSpace:dl,getTextColor:Gs,getLineHeight:_o,getLineHeightFactor:af,getLineWidth:_r,write:ut,getHorizontalCoordinate:_i,getVerticalCoordinate:zo,getCoordinateString:of,getVerticalCoordinateString:$o,collections:{},newObject:bn,newAdditionalObject:Te,newObjectDeferred:Zn,newObjectDeferredBegin:ne,getFilters:He,putStream:nt,events:mr,scaleFactor:wt,pageSize:{getWidth:function(){return ws(U)},setWidth:function(L){Hl(U,L)},getHeight:function(){return _s(U)},setHeight:function(L){as(U,L)}},encryptionOptions:f,encryption:Tn,getEncryptor:function(L){return f!==null?Tn.encryptor(L,0):function(Z){return Z}},output:Rs,getNumberOfPages:ii,pages:Fe,out:fe,f2:I,f3:D,getPageInfo:Fs,getPageInfoByObjId:ql,getCurrentPageInfo:fl,getPDFVersion:w,Point:uo,Rectangle:pl,Matrix:ir,hasHotfix:$l},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ws(U)},set:function(L){Hl(U,L)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return _s(U)},set:function(L){as(U,L)},enumerable:!0,configurable:!0}),(function(L){for(var Z=0,Ee=lt.length;Z<Ee;Z++){var Le=on.call(this,L[Z][0],L[Z][1],L[Z][2],lt[Z][3],!0);p===!1&&(g[Le]=!0);var ze=L[Z][0].split("-");br({id:Le,fontName:ze[0],fontStyle:ze[1]||""})}mr.publish("addFonts",{fonts:qt,dictionary:wr})}).call(m,lt),jt="F1",Na(i,r),mr.publish("initialized"),m}W0.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},W0.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},W0.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},W0.prototype.processOwnerPassword=function(t,e){return K_(G_(e).substr(0,5),t)},W0.prototype.encryptor=function(t,e){var r=G_(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return K_(r,n)}},Av.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||zn(t)!==zn(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},gr.API={events:[]},gr.version="3.0.2";var Yi=gr.API,R3=1,s0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},B0=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Mr=function(t){return t.toFixed(2)},Df=function(t){return t.toFixed(5)};Yi.__acroform__={};var Mo=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},BA=function(t){return t*R3},jc=function(t){var e=new FF,r=lr.internal.getHeight(t)||0,n=lr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Mr(n)),Number(Mr(r))],e},que=Yi.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},Hue=Yi.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},Wue=Yi.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},hs=Yi.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Wue(t,e-1)},ds=Yi.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return que(t,e-1)},ps=Yi.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Hue(t,e-1)},Gue=Yi.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=t[0],s=t[1],a=t[2],o=t[3],l={};return l.lowerLeft_X=r(i)||0,l.lowerLeft_Y=n(s+o)||0,l.upperRight_X=r(i+a)||0,l.upperRight_Y=n(s)||0,[Number(Mr(l.lowerLeft_X)),Number(Mr(l.lowerLeft_Y)),Number(Mr(l.upperRight_X)),Number(Mr(l.upperRight_Y))]},Kue=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=X_(t,r),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Mr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=jc(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},X_=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(I){return I.split(`
`)}):i.map(function(I){return[I]});var s=r,a=lr.internal.getHeight(t)||0;a=a<0?-a:a;var o=lr.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(I,D,B){if(I+1<i.length){var re=D+" "+i[I+1][0];return l2(re,t,B).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var c,f,p=l2("3",t,s).height,g=t.multiline?a-s:(a-p)/2,m=g+=2,_=0,w=0,b=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+l2(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var k="",R=0,C=0;C<i.length;C++)if(i.hasOwnProperty(C)){var j=!1;if(i[C].length!==1&&b!==i[C].length-1){if((p+2)*(R+2)+2>a)continue e;k+=i[C][b],j=!0,w=C,C--}else{k=(k+=i[C][b]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var X=parseInt(C),K=l(X,k,s),P=C>=i.length-1;if(K&&!P){k+=" ",b=0;continue}if(K||P){if(P)w=X;else if(t.multiline&&(p+2)*(R+2)+2>a)continue e}else{if(!t.multiline||(p+2)*(R+2)+2>a)continue e;w=X}}for(var A="",T=_;T<=w;T++){var O=i[T];if(t.multiline){if(T===w){A+=O[b]+" ",b=(b+1)%O.length;continue}if(T===_){A+=O[O.length-1]+" ";continue}}A+=O[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,f=l2(A,t,s).width,t.textAlign){case"right":c=o-f-2;break;case"center":c=(o-f)/2;break;default:c=2}e+=Mr(c)+" "+Mr(m)+` Td
`,e+="("+s0(A)+`) Tj
`,e+=-Mr(c)+` 0 Td
`,m=-(s+2),f=0,_=j?w:w+1,R++,k=""}break}return n.text=e,n.fontSize=s,n},l2=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},Xue={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Yue=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Que=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(mc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Xue)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");R3=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new LF,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.objId=void 0,s.hasAnnotation&&Yue(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,i){var s=!n;for(var a in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],l=[],c=o.Rect;if(o.Rect&&(o.Rect=Gue(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=lr.createDefaultAppearanceStream(o),zn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var f=Kue(o);l.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(o.appearanceStreamContent){var p="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var m=o.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var a in m)if(m.hasOwnProperty(a)){var _=m[a];typeof _=="function"&&(_=_.call(i,o)),p+="/"+a+" "+_+" ",i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_)}}else typeof(_=m)=="function"&&(_=_.call(i,o)),p+="/"+a+" "+_,i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}s&&(function(w,b){for(var k in w)if(w.hasOwnProperty(k)){var R=k,C=w[k];b.internal.newObjectDeferredBegin(C.objId,!0),zn(C)==="object"&&typeof C.putStream=="function"&&C.putStream(),delete w[R]}})(i.internal.acroformPlugin.xForms,i)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},RF=Yi.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),zn(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),i+="("+s0(n(t[s].toString()))+")"):i+=t[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},T5=function(t,e,r){var n=function(i){return i};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+s0(n(t))+")"},Hc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Hc.prototype.toString=function(){return this.objId+" 0 R"},Hc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Hc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],i=this[n];i&&(Array.isArray(i)?t.push({key:n,value:RF(i,this.objId,this.scope)}):i instanceof Hc?(i.scope=this.scope,t.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:n,value:i}))}return t};var FF=function(){Hc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Mo(FF,Hc);var LF=function(){Hc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+s0(r(t))+")"}},set:function(r){t=r}})};Mo(LF,Hc);var mc=function t(){Hc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');e=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!hs(e,3)},set:function(k){k?this.F=ds(e,3):this.F=ps(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');r=k}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(k){n=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(k){n[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(k){n[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(k){n[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(k){n[3]=k}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Nv)return;s="FieldObject"+t.FieldNum++}var k=function(R){return R};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+s0(k(s))+")"},set:function(k){s=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(k){s=k}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(k){a=k}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(k){o=k}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(k){l=k}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/R3:c},set:function(k){c=k}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(k){f=k}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Nv||this instanceof bd))return T5(p,this.objId,this.scope)},set:function(k){k=k.toString(),p=k}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof ia==0?T5(g,this.objId,this.scope):g},set:function(k){k=k.toString(),g=this instanceof ia==0?k.substr(0,1)==="("?B0(k.substr(1,k.length-2)):B0(k):k}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ia==1?B0(g.substr(1,g.length-1)):g},set:function(k){k=k.toString(),g=this instanceof ia==1?"/"+k:k}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ia==0?T5(m,this.objId,this.scope):m},set:function(k){k=k.toString(),m=this instanceof ia==0?k.substr(0,1)==="("?B0(k.substr(1,k.length-2)):B0(k):k}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ia==1?B0(m.substr(1,m.length-1)):m},set:function(k){k=k.toString(),m=this instanceof ia==1?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(k){k=!!k,w=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(k){_=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,1)},set:function(k){k?this.Ff=ds(this.Ff,1):this.Ff=ps(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,2)},set:function(k){k?this.Ff=ds(this.Ff,2):this.Ff=ps(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,3)},set:function(k){k?this.Ff=ds(this.Ff,3):this.Ff=ps(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');b=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(b){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:b=2;break;case"center":case 1:b=1;break;default:b=0}}})};Mo(mc,Hc);var hp=function(){mc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return RF(e,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=(function(s,a,o){o||(o=1);for(var l,c=[];l=a.exec(s);)c.push(l[o]);return c})(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,18)},set:function(r){r?this.Ff=ds(this.Ff,18):this.Ff=ps(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ds(this.Ff,19):this.Ff=ps(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,20)},set:function(r){r?(this.Ff=ds(this.Ff,20),e.sort()):this.Ff=ps(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,22)},set:function(r){r?this.Ff=ds(this.Ff,22):this.Ff=ps(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,23)},set:function(r){r?this.Ff=ds(this.Ff,23):this.Ff=ps(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,27)},set:function(r){r?this.Ff=ds(this.Ff,27):this.Ff=ps(this.Ff,27)}}),this.hasAppearanceStream=!1};Mo(hp,mc);var dp=function(){hp.call(this),this.fontName="helvetica",this.combo=!1};Mo(dp,hp);var pp=function(){dp.call(this),this.combo=!0};Mo(pp,dp);var I2=function(){pp.call(this),this.edit=!0};Mo(I2,pp);var ia=function(){mc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,15)},set:function(r){r?this.Ff=ds(this.Ff,15):this.Ff=ps(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,16)},set:function(r){r?this.Ff=ds(this.Ff,16):this.Ff=ps(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,17)},set:function(r){r?this.Ff=ds(this.Ff,17):this.Ff=ps(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,26)},set:function(r){r?this.Ff=ds(this.Ff,26):this.Ff=ps(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+s0(r(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){zn(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Mo(ia,mc);var P2=function(){ia.call(this),this.pushButton=!0};Mo(P2,ia);var mp=function(){ia.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Mo(mp,ia);var Nv=function(){var t,e;mc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),n)a.push("/"+s+" ("+s0(i(n[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){zn(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=lr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Mo(Nv,mc),mp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},mp.prototype.createOption=function(t){var e=new Nv;return e.Parent=this,e.optionName=t,this.Kids.push(e),Jue.call(this.scope,e),e};var R2=function(){ia.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=lr.CheckBox.createAppearanceStream()};Mo(R2,ia);var bd=function(){mc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,13)},set:function(e){e?this.Ff=ds(this.Ff,13):this.Ff=ps(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,21)},set:function(e){e?this.Ff=ds(this.Ff,21):this.Ff=ps(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,23)},set:function(e){e?this.Ff=ds(this.Ff,23):this.Ff=ps(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,24)},set:function(e){e?this.Ff=ds(this.Ff,24):this.Ff=ps(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,25)},set:function(e){e?this.Ff=ds(this.Ff,25):this.Ff=ps(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,26)},set:function(e){e?this.Ff=ds(this.Ff,26):this.Ff=ps(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Mo(bd,mc);var F2=function(){bd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,14)},set:function(t){t?this.Ff=ds(this.Ff,14):this.Ff=ps(this.Ff,14)}}),this.password=!0};Mo(F2,bd);var lr={CheckBox:{createAppearanceStream:function(){return{N:{On:lr.CheckBox.YesNormal},D:{On:lr.CheckBox.YesPushDown,Off:lr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=X_(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Mr(lr.internal.getWidth(t))+" "+Mr(lr.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Mr(s.fontSize)+" Tf "+i),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=[],s=lr.internal.getHeight(t),a=lr.internal.getWidth(t),o=X_(t,t.caption);return i.push("1 g"),i.push("0 0 "+Mr(a)+" "+Mr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Mr(a-1)+" "+Mr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+Mr(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Mr(lr.internal.getWidth(t))+" "+Mr(lr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:lr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=lr.RadioButton.Circle.YesNormal,e.D[t]=lr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var r=[],n=lr.internal.getWidth(t)<=lr.internal.getHeight(t)?lr.internal.getWidth(t)/4:lr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=lr.internal.Bezier_C,s=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Df(lr.internal.getWidth(t)/2)+" "+Df(lr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var r=[],n=lr.internal.getWidth(t)<=lr.internal.getHeight(t)?lr.internal.getWidth(t)/4:lr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*lr.internal.Bezier_C).toFixed(5)),a=Number((n*lr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Df(lr.internal.getWidth(t)/2)+" "+Df(lr.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Df(lr.internal.getWidth(t)/2)+" "+Df(lr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var r=[],n=lr.internal.getWidth(t)<=lr.internal.getHeight(t)?lr.internal.getWidth(t)/4:lr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*lr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Df(lr.internal.getWidth(t)/2)+" "+Df(lr.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:lr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=lr.RadioButton.Cross.YesNormal,e.D[t]=lr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var r=[],n=lr.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Mr(lr.internal.getWidth(t)-2)+" "+Mr(lr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Mr(n.x1.x)+" "+Mr(n.x1.y)+" m"),r.push(Mr(n.x2.x)+" "+Mr(n.x2.y)+" l"),r.push(Mr(n.x4.x)+" "+Mr(n.x4.y)+" m"),r.push(Mr(n.x3.x)+" "+Mr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var r=lr.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Mr(lr.internal.getWidth(t))+" "+Mr(lr.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Mr(lr.internal.getWidth(t)-2)+" "+Mr(lr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Mr(r.x1.x)+" "+Mr(r.x1.y)+" m"),n.push(Mr(r.x2.x)+" "+Mr(r.x2.y)+" l"),n.push(Mr(r.x4.x)+" "+Mr(r.x4.y)+" m"),n.push(Mr(r.x3.x)+" "+Mr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Mr(lr.internal.getWidth(t))+" "+Mr(lr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};lr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=lr.internal.getWidth(t),r=lr.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},lr.internal.getWidth=function(t){var e=0;return zn(t)==="object"&&(e=BA(t.Rect[2])),e},lr.internal.getHeight=function(t){var e=0;return zn(t)==="object"&&(e=BA(t.Rect[3])),e};var Jue=Yi.addField=function(t){if(Que(this,t),!(t instanceof mc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Yi.AcroFormChoiceField=hp,Yi.AcroFormListBox=dp,Yi.AcroFormComboBox=pp,Yi.AcroFormEditBox=I2,Yi.AcroFormButton=ia,Yi.AcroFormPushButton=P2,Yi.AcroFormRadioButton=mp,Yi.AcroFormCheckBox=R2,Yi.AcroFormTextField=bd,Yi.AcroFormPasswordField=F2,Yi.AcroFormAppearance=lr,Yi.AcroForm={ChoiceField:hp,ListBox:dp,ComboBox:pp,EditBox:I2,Button:ia,PushButton:P2,RadioButton:mp,CheckBox:R2,TextField:bd,PasswordField:F2,Appearance:lr},gr.AcroForm={ChoiceField:hp,ListBox:dp,ComboBox:pp,EditBox:I2,Button:ia,PushButton:P2,RadioButton:mp,CheckBox:R2,TextField:bd,PasswordField:F2,Appearance:lr};gr.AcroForm;function DF(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(I,D){var B,re,_e,Ce,we,ce=r;if((D=D||r)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(K(I))for(we in n)for(_e=n[we],B=0;B<_e.length;B+=1){for(Ce=!0,re=0;re<_e[B].length;re+=1)if(_e[B][re]!==void 0&&_e[B][re]!==I[re]){Ce=!1;break}if(Ce===!0){ce=we;break}}else for(we in n)for(_e=n[we],B=0;B<_e.length;B+=1){for(Ce=!0,re=0;re<_e[B].length;re+=1)if(_e[B][re]!==void 0&&_e[B][re]!==I.charCodeAt(re)){Ce=!1;break}if(Ce===!0){ce=we;break}}return ce===r&&D!==r&&(ce=D),ce},s=function I(D){for(var B=this.internal.write,re=this.internal.putStream,_e=(0,this.internal.getFilters)();_e.indexOf("FlateEncode")!==-1;)_e.splice(_e.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var Ce=[];if(Ce.push({key:"Type",value:"/XObject"}),Ce.push({key:"Subtype",value:"/Image"}),Ce.push({key:"Width",value:D.width}),Ce.push({key:"Height",value:D.height}),D.colorSpace===k.INDEXED?Ce.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(Ce.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===k.DEVICE_CMYK&&Ce.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ce.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&Ce.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)){for(var we="",ce=0,H=D.transparency.length;ce<H;ce++)we+=D.transparency[ce]+" "+D.transparency[ce]+" ";Ce.push({key:"Mask",value:"["+we+"]"})}D.sMask!==void 0&&Ce.push({key:"SMask",value:D.objectId+1+" 0 R"});var te=D.filter!==void 0?["/"+D.filter]:void 0;if(re({data:D.data,additionalKeyValues:Ce,alreadyAppliedFilters:te,objectId:D.objectId}),B("endobj"),"sMask"in D&&D.sMask!==void 0){var J=(D.predictor!=null?"/Predictor "+D.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+D.width,N={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:D.bitsPerComponent,decodeParameters:J,data:D.sMask};"filter"in D&&(N.filter=D.filter),I.call(this,N)}if(D.colorSpace===k.INDEXED){var U=this.internal.newObject();re({data:A(new Uint8Array(D.palette)),objectId:U}),B("endobj")}},a=function(){var I=this.internal.collections[e+"images"];for(var D in I)s.call(this,I[D])},o=function(){var I,D=this.internal.collections[e+"images"],B=this.internal.write;for(var re in D)B("/I"+(I=D[re]).index,I.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var I=this.internal.collections[e+"images"];return l.call(this),I},f=function(){return Object.keys(this.internal.collections[e+"images"]).length},p=function(I){return typeof t["process"+I.toUpperCase()]=="function"},g=function(I){return zn(I)==="object"&&I.nodeType===1},m=function(I,D){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var B=""+I.getAttribute("src");if(B.indexOf("data:image/")===0)return C2(unescape(B).split("base64,").pop());var re=t.loadFile(B,!0);if(re!==void 0)return re}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var _e;switch(D){case"PNG":_e="image/png";break;case"WEBP":_e="image/webp";break;default:_e="image/jpeg"}return C2(I.toDataURL(_e,1).split("base64,").pop())}},_=function(I){var D=this.internal.collections[e+"images"];if(D){for(var B in D)if(I===D[B].alias)return D[B]}},w=function(I,D,B){return I||D||(I=-96,D=-96),I<0&&(I=-1*B.width*72/I/this.internal.scaleFactor),D<0&&(D=-1*B.height*72/D/this.internal.scaleFactor),I===0&&(I=D*B.width/B.height),D===0&&(D=I*B.height/B.width),[I,D]},b=function(I,D,B,re,_e,Ce){var we=w.call(this,B,re,_e),ce=this.internal.getCoordinateString,H=this.internal.getVerticalCoordinateString,te=c.call(this);if(B=we[0],re=we[1],te[_e.index]=_e,Ce){Ce*=Math.PI/180;var J=Math.cos(Ce),N=Math.sin(Ce),U=function(Y){return Y.toFixed(4)},W=[U(J),U(N),U(-1*N),U(J),0,0,"cm"]}this.internal.write("q"),Ce?(this.internal.write([1,"0","0",1,ce(I),H(D+re),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([ce(B),"0","0",ce(re),"0","0","cm"].join(" "))):this.internal.write([ce(B),"0","0",ce(re),ce(I),H(D+re),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+_e.index+" Do"),this.internal.write("Q")},k=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var R=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=t.__addimage__.sHashCode=function(I){var D,B,re=0;if(typeof I=="string")for(B=I.length,D=0;D<B;D++)re=(re<<5)-re+I.charCodeAt(D),re|=0;else if(K(I))for(B=I.byteLength/2,D=0;D<B;D++)re=(re<<5)-re+I[D],re|=0;return re},j=t.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var D=!0;return I.length===0&&(D=!1),I.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(D=!1),D},X=t.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var D=I.indexOf(",");return D<0?null:I.substring(0,D).trim().endsWith("base64")?I.substring(D+1):null};t.__addimage__.isArrayBuffer=function(I){return I instanceof ArrayBuffer};var K=t.__addimage__.isArrayBufferView=function(I){return I instanceof Int8Array||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array},P=t.__addimage__.binaryStringToUint8Array=function(I){for(var D=I.length,B=new Uint8Array(D),re=0;re<D;re++)B[re]=I.charCodeAt(re);return B},A=t.__addimage__.arrayBufferToBinaryString=function(I){for(var D="",B=K(I)?I:new Uint8Array(I),re=0;re<B.length;re+=8192)D+=String.fromCharCode.apply(null,B.subarray(re,re+8192));return D};t.addImage=function(){var I,D,B,re,_e,Ce,we,ce,H;if(typeof arguments[1]=="number"?(D=r,B=arguments[1],re=arguments[2],_e=arguments[3],Ce=arguments[4],we=arguments[5],ce=arguments[6],H=arguments[7]):(D=arguments[1],B=arguments[2],re=arguments[3],_e=arguments[4],Ce=arguments[5],we=arguments[6],ce=arguments[7],H=arguments[8]),zn(I=arguments[0])==="object"&&!g(I)&&"imageData"in I){var te=I;I=te.imageData,D=te.format||D||r,B=te.x||B||0,re=te.y||re||0,_e=te.w||te.width||_e,Ce=te.h||te.height||Ce,we=te.alias||we,ce=te.compression||ce,H=te.rotation||te.angle||H}var J=this.internal.getFilters();if(ce===void 0&&J.indexOf("FlateEncode")!==-1&&(ce="SLOW"),isNaN(B)||isNaN(re))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var N=T.call(this,I,D,we,ce);return b.call(this,B,re,_e,Ce,N,H),this};var T=function(I,D,B,re){var _e,Ce,we;if(typeof I=="string"&&i(I)===r){I=unescape(I);var ce=O(I,!1);(ce!==""||(ce=t.loadFile(I,!0))!==void 0)&&(I=ce)}if(g(I)&&(I=m(I,D)),D=i(I,D),!p(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(((we=B)==null||we.length===0)&&(B=(function(H){return typeof H=="string"||K(H)?C(H):K(H.data)?C(H.data):null})(I)),(_e=_.call(this,B))||(I instanceof Uint8Array||D==="RGBA"||(Ce=I,I=P(I)),_e=this["process"+D.toUpperCase()](I,f.call(this),B,(function(H){return H&&typeof H=="string"&&(H=H.toUpperCase()),H in t.image_compression?H:R.NONE})(re),Ce)),!_e)throw new Error("An unknown error occurred whilst processing the image.");return _e},O=t.__addimage__.convertBase64ToBinaryString=function(I,D){D=typeof D!="boolean"||D;var B,re="";if(typeof I=="string"){var _e;B=(_e=X(I))!==null&&_e!==void 0?_e:I;try{re=C2(B)}catch(Ce){if(D)throw j(B)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ce.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return re};t.getImageProperties=function(I){var D,B,re="";if(g(I)&&(I=m(I)),typeof I=="string"&&i(I)===r&&((re=O(I,!1))===""&&(re=t.loadFile(I)||""),I=re),B=i(I),!p(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(I instanceof Uint8Array||(I=P(I)),!(D=this["process"+B.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=B,D}})(gr.API),(function(t){var e=function(r){if(r!==void 0&&r!="")return!0};gr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,f=!1,p=0;p<c.length&&!f;p++)switch((n=c[p]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var g=0;g<c.length;g++){n=c[g];var m=this.internal.pdfEscape,_=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(w.objId),R=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+m(k(n.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(k(R))+") >>",w.content=s;var C=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+C,n.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(w.objId,"0 R",b.objId,"0 R");break;case"freetext":i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var j=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(_(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var X=this.annotations._nameMap[n.options.name];n.options.pageNumber=X.page,n.options.top=X.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(_(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var K=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+K+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,i,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:c(n),w:l(r+i),h:c(n+s)},options:a,type:"link"})},t.textWithLink=function(r,n,i,s){var a,o,l=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var f=this.splitTextToSize(r,o).length;a=Math.ceil(c*f)}else o=l,a=c;return this.text(r,n,i,s),i+=.2*c,s.align==="center"&&(n-=l/2),s.align==="right"&&(n-=l),this.link(n,i-c,o,a,s),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(gr.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},o=t.__arabicParser__.isArabicEndLetter=function(w){return a(w)&&s(w)&&e[w.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(w){return a(w)&&i.indexOf(w.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return a(w)&&s(w)&&e[w.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(w){return a(w)&&s(w)&&e[w.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(w){return a(w)&&s(w)&&e[w.charCodeAt(0)].length>=3};var f=t.__arabicParser__.arabicLetterHasMedialForm=function(w){return a(w)&&s(w)&&e[w.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(w){var b=0,k=r,R="",C=0;for(b=0;b<w.length;b+=1)k[w.charCodeAt(b)]!==void 0?(C++,typeof(k=k[w.charCodeAt(b)])=="number"&&(R+=String.fromCharCode(k),k=r,C=0),b===w.length-1&&(k=r,R+=w.charAt(b-(C-1)),b-=C-1,C=0)):(k=r,R+=w.charAt(b-C),b-=C,C=0);return R};t.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&n[w.charCodeAt(0)]!==void 0};var g=t.__arabicParser__.getCorrectForm=function(w,b,k){return a(w)?s(w)===!1?-1:!c(w)||!a(b)&&!a(k)||!a(k)&&o(b)||o(w)&&!a(b)||o(w)&&l(b)||o(w)&&o(b)?0:f(w)&&a(b)&&!o(b)&&a(k)&&c(k)?3:o(w)||!a(k)?1:2:-1},m=function(w){var b=0,k=0,R=0,C="",j="",X="",K=(w=w||"").split("\\s+"),P=[];for(b=0;b<K.length;b+=1){for(P.push(""),k=0;k<K[b].length;k+=1)C=K[b][k],j=K[b][k-1],X=K[b][k+1],a(C)?(R=g(C,j,X),P[b]+=R!==-1?String.fromCharCode(e[C.charCodeAt(0)][R]):C):P[b]+=C;P[b]=p(P[b])}return P.join(" ")},_=t.__arabicParser__.processArabic=t.processArabic=function(){var w,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(b)){var R=0;for(k=[],R=0;R<b.length;R+=1)Array.isArray(b[R])?k.push([m(b[R][0]),b[R][1],b[R][2]]):k.push([m(b[R])]);w=k}else w=m(b);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};t.events.push(["preProcessText",_])})(gr.API),gr.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(gr.API),(function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(w){_=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){n.call(this);var f=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),g=c.scaleFactor||this.internal.scaleFactor,m=0,_=0,w=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var k=c.maxWidth;k>0?typeof l=="string"?l=this.splitTextToSize(l,k):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(C,j){return C.concat(b.splitTextToSize(j,k))},[])):l=Array.isArray(l)?l:[l];for(var R=0;R<l.length;R++)m<(w=this.getStringUnitWidth(l[R],{font:p})*f)&&(m=w);return m!==0&&(_=l.length),{w:m/=g,h:Math.max((_*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/g,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,m&&g&&(this.printHeaderRow(l.lineNumber,!0),l.y+=g[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-f,l.y+f,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+f,{align:"center",baseline:"top",maxWidth:l.width-f-f}):this.text(l.text,l.x+f,l.y+f,{align:"left",baseline:"top",maxWidth:l.width-f-f})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,f,p,g){if(n.call(this),!f)throw new Error("No data for PDF table.");var m,_,w,b,k=[],R=[],C=[],j={},X={},K=[],P=[],A=(g=g||{}).autoSize||!1,T=g.printHeaders!==!1,O=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,I=g.margins||Object.assign({width:this.getPageWidth()},e),D=typeof g.padding=="number"?g.padding:3,B=g.headerBackgroundColor||"#c8c8c8",re=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=re,this.setFontSize(O),p==null)R=k=Object.keys(f[0]),C=k.map(function(){return"left"});else if(Array.isArray(p)&&zn(p[0])==="object")for(k=p.map(function(te){return te.name}),R=p.map(function(te){return te.prompt||te.name||""}),C=p.map(function(te){return te.align||"left"}),m=0;m<p.length;m+=1)X[p[m].name]=.7499990551181103*p[m].width;else Array.isArray(p)&&typeof p[0]=="string"&&(R=k=p,C=k.map(function(){return"left"}));if(A||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<k.length;m+=1){for(j[b=k[m]]=f.map(function(te){return te[b]}),this.setFont(void 0,"bold"),K.push(this.getTextDimensions(R[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=j[b],this.setFont(void 0,"normal"),w=0;w<_.length;w+=1)K.push(this.getTextDimensions(_[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);X[b]=Math.max.apply(null,K)+D+D,K=[]}if(T){var _e={};for(m=0;m<k.length;m+=1)_e[k[m]]={},_e[k[m]].text=R[m],_e[k[m]].align=C[m];var Ce=o.call(this,_e,X);P=k.map(function(te){return new s(l,c,X[te],Ce,_e[te].text,void 0,_e[te].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var we=p.reduce(function(te,J){return te[J.name]=J.align,te},{});for(m=0;m<f.length;m+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:m,data:f[m]},this);var ce=o.call(this,f[m],X);for(w=0;w<k.length;w+=1){var H=f[m][k[w]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:m,col:w,data:H},this),a.call(this,new s(l,c,X[k[w]],ce,H,m+2,we[k[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var f=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(l).map(function(m){var _=l[m];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,c[m]-f-f)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/g+f+f},this).reduce(function(m,_){return Math.max(m,_)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){f=this.internal.__cell__.tableHeaderRow[m].clone(),c&&(f.y=this.internal.__cell__.margins.top||0,g.push(f)),f.lineNumber=l;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,f),this.setTextColor(_)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),r=!1}})(gr.API);var OF={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},jF=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Y_=DF(jF),MF=[100,200,300,400,500,600,700,800,900],Zue=DF(MF);function A5(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=(function(s){return OF[s=s||"normal"]?s:"normal"})(t.style),n=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(t.weight),i=(function(s){return typeof Y_[s=s||"normal"]=="number"?s:"normal"})(t.stretch);return{family:e,style:r,weight:n,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,n].join(" ")}}}function VA(t,e,r,n){var i;for(i=r;i>=0&&i<e.length;i+=n)if(t[e[i]])return t[e[i]];for(i=r;i>=0&&i<e.length;i-=n)if(t[e[i]])return t[e[i]]}var efe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},UA={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function zA(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function $A(t){return t.trimLeft()}function tfe(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function rfe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var c2,qA,HA,V0,u2,WA,GA,KA,N5=["times"];function XA(t,e,r,n){var i=4,s=QA;switch(n){case gr.API.image_compression.FAST:i=1,s=YA;break;case gr.API.image_compression.MEDIUM:i=6,s=JA;break;case gr.API.image_compression.SLOW:i=9,s=ZA}t=(function(o,l,c,f){for(var p,g=o.length/l,m=new Uint8Array(o.length+g),_=[nfe,YA,QA,JA,ZA],w=0;w<g;w+=1){var b=w*l,k=o.subarray(b,b+l);if(f)m.set(f(k,c,p),b+w);else{for(var R=_.length,C=[],j=0;j<R;j+=1)C[j]=_[j](k,c,p);var X=sfe(C.concat());m.set(C[X],b+w)}p=k}return m})(t,e,r,s);var a=$_(t,{level:i});return gr.API.__addimage__.arrayBufferToBinaryString(a)}function nfe(t){var e=Array.apply([],t);return e.unshift(0),e}function YA(t,e){var r=t.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var s=t[i-e]||0;n[i+1]=t[i]-s+256&255}return n}function QA(t,e,r){var n=t.length,i=[];i[0]=2;for(var s=0;s<n;s+=1){var a=r&&r[s]||0;i[s+1]=t[s]-a+256&255}return i}function JA(t,e,r){var n=t.length,i=[];i[0]=3;for(var s=0;s<n;s+=1){var a=t[s-e]||0,o=r&&r[s]||0;i[s+1]=t[s]+256-(a+o>>>1)&255}return i}function ZA(t,e,r){var n=t.length,i=[];i[0]=4;for(var s=0;s<n;s+=1){var a=ife(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);i[s+1]=t[s]-a+256&255}return i}function ife(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),i=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=i&&n<=s?t:i<=s?e:r}function sfe(t){var e=t.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function C5(t,e,r){var n=e*r,i=Math.floor(n/8),s=16-(n-8*i+r),a=(1<<r)-1;return BF(t,i)>>s&a}function eN(t,e,r,n){var i=r*n,s=Math.floor(i/8),a=16-(i-8*s+n),o=(1<<n)-1,l=(e&o)<<a;(function(c,f,p){if(f+1<c.byteLength)c.setUint16(f,p,!1);else{var g=p>>8&255;c.setUint8(f,g)}})(t,s,BF(t,s)&~(o<<a)&65535|l)}function BF(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function afe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,a=1<<1+(7&i);t[e++],t[e++];var o=null,l=null;s&&(o=e,l=a,e+=3*a);var c=!0,f=[],p=0,g=null,m=0,_=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,_=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=t[e++];p=t[e++]|t[e++]<<8,g=t[e++],1&w||(g=null),m=w>>2&7,e++;break;case 254:for(;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var b=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,R=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,j=t[e++],X=j>>6&1,K=1<<1+(7&j),P=o,A=l,T=!1;j>>7&&(T=!0,P=e,A=K,e+=3*K);var O=e;for(e++;;){var I;if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}f.push({x:b,y:k,width:R,height:C,has_local_palette:T,palette_offset:P,palette_size:A,data_offset:O,data_length:e-O,transparent_index:g,interlaced:!!X,delay:p,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return _},this.frameInfo=function(D){if(D<0||D>=f.length)throw new Error("Frame index out of range.");return f[D]},this.decodeAndBlitFrameBGRA=function(D,B){var re=this.frameInfo(D),_e=re.width*re.height,Ce=new Uint8Array(_e);tN(t,re.data_offset,Ce,_e);var we=re.palette_offset,ce=re.transparent_index;ce===null&&(ce=256);var H=re.width,te=r-H,J=H,N=4*(re.y*r+re.x),U=4*((re.y+re.height)*r+re.x),W=N,Y=4*te;re.interlaced===!0&&(Y+=4*r*7);for(var ae=8,pe=0,he=Ce.length;pe<he;++pe){var xe=Ce[pe];if(J===0&&(J=H,(W+=Y)>=U&&(Y=4*te+4*r*(ae-1),W=N+(H+te)*(ae<<1),ae>>=1)),xe===ce)W+=4;else{var ke=t[we+3*xe],Fe=t[we+3*xe+1],oe=t[we+3*xe+2];B[W++]=oe,B[W++]=Fe,B[W++]=ke,B[W++]=255}--J}},this.decodeAndBlitFrameRGBA=function(D,B){var re=this.frameInfo(D),_e=re.width*re.height,Ce=new Uint8Array(_e);tN(t,re.data_offset,Ce,_e);var we=re.palette_offset,ce=re.transparent_index;ce===null&&(ce=256);var H=re.width,te=r-H,J=H,N=4*(re.y*r+re.x),U=4*((re.y+re.height)*r+re.x),W=N,Y=4*te;re.interlaced===!0&&(Y+=4*r*7);for(var ae=8,pe=0,he=Ce.length;pe<he;++pe){var xe=Ce[pe];if(J===0&&(J=H,(W+=Y)>=U&&(Y=4*te+4*r*(ae-1),W=N+(H+te)*(ae<<1),ae>>=1)),xe===ce)W+=4;else{var ke=t[we+3*xe],Fe=t[we+3*xe+1],oe=t[we+3*xe+2];B[W++]=ke,B[W++]=Fe,B[W++]=oe,B[W++]=255}--J}}}function tN(t,e,r,n){for(var i=t[e++],s=1<<i,a=s+1,o=a+1,l=i+1,c=(1<<l)-1,f=0,p=0,g=0,m=t[e++],_=new Int32Array(4096),w=null;;){for(;f<16&&m!==0;)p|=t[e++]<<f,f+=8,m===1?m=t[e++]:--m;if(f<l)break;var b=p&c;if(p>>=l,f-=l,b!==s){if(b===a)break;for(var k=b<o?b:w,R=0,C=k;C>s;)C=_[C]>>8,++R;var j=C;if(g+R+(k!==b?1:0)>n)return void ri.log("Warning, gif stream longer than expected.");r[g++]=j;var X=g+=R;for(k!==b&&(r[g++]=j),C=k;R--;)C=_[C],r[--X]=255&C,C>>=8;w!==null&&o<4096&&(_[o++]=w<<8|j,o>=c+1&&l<12&&(++l,c=c<<1|1)),w=b}else o=a+1,c=(1<<(l=i+1))-1,w=null}return g!==n&&ri.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function I5(t){var e,r,n,i,s,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),f=new Array(64),p=new Array(65535),g=new Array(65535),m=new Array(64),_=new Array(64),w=[],b=0,k=7,R=new Array(64),C=new Array(64),j=new Array(64),X=new Array(256),K=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],re=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],_e=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ce(N,U){for(var W=0,Y=0,ae=new Array,pe=1;pe<=16;pe++){for(var he=1;he<=N[pe];he++)ae[U[Y]]=[],ae[U[Y]][0]=W,ae[U[Y]][1]=pe,Y++,W++;W*=2}return ae}function we(N){for(var U=N[0],W=N[1]-1;W>=0;)U&1<<W&&(b|=1<<k),W--,--k<0&&(b==255?(ce(255),ce(0)):ce(b),k=7,b=0)}function ce(N){w.push(N)}function H(N){ce(N>>8&255),ce(255&N)}function te(N,U,W,Y,ae){for(var pe,he=ae[0],xe=ae[240],ke=(function(le,je){var ft,Ie,Be,tt,ot,ht,Pt,Ft,jt,wt,At=0;for(jt=0;jt<8;++jt){ft=le[At],Ie=le[At+1],Be=le[At+2],tt=le[At+3],ot=le[At+4],ht=le[At+5],Pt=le[At+6];var Xt=ft+(Ft=le[At+7]),Gt=ft-Ft,qt=Ie+Pt,wr=Ie-Pt,rn=Be+ht,Me=Be-ht,Mt=tt+ot,Vt=tt-ot,rr=Xt+Mt,ar=Xt-Mt,ur=qt+rn,Jt=qt-rn;le[At]=rr+ur,le[At+4]=rr-ur;var mr=.707106781*(Jt+ar);le[At+2]=ar+mr,le[At+6]=ar-mr;var an=.382683433*((rr=Vt+Me)-(Jt=wr+Gt)),zr=.5411961*rr+an,Nn=1.306562965*Jt+an,Cn=.707106781*(ur=Me+wr),ir=Gt+Cn,qr=Gt-Cn;le[At+5]=qr+zr,le[At+3]=qr-zr,le[At+1]=ir+Nn,le[At+7]=ir-Nn,At+=8}for(At=0,jt=0;jt<8;++jt){ft=le[At],Ie=le[At+8],Be=le[At+16],tt=le[At+24],ot=le[At+32],ht=le[At+40],Pt=le[At+48];var is=ft+(Ft=le[At+56]),Dn=ft-Ft,qi=Ie+Pt,bn=Ie-Pt,Zn=Be+ht,ne=Be-ht,Te=tt+ot,ve=tt-ot,ye=is+Te,Ae=is-Te,Ne=qi+Zn,He=qi-Zn;le[At]=ye+Ne,le[At+32]=ye-Ne;var nt=.707106781*(He+Ae);le[At+16]=Ae+nt,le[At+48]=Ae-nt;var Ke=.382683433*((ye=ve+ne)-(He=bn+Dn)),Xe=.5411961*ye+Ke,Je=1.306562965*He+Ke,_t=.707106781*(Ne=ne+bn),Dt=Dn+_t,Ht=Dn-_t;le[At+40]=Ht+Xe,le[At+24]=Ht-Xe,le[At+8]=Dt+Je,le[At+56]=Dt-Je,At++}for(jt=0;jt<64;++jt)wt=le[jt]*je[jt],m[jt]=wt>0?wt+.5|0:wt-.5|0;return m})(N,U),Fe=0;Fe<64;++Fe)_[P[Fe]]=ke[Fe];var oe=_[0]-W;W=_[0],oe==0?we(Y[0]):(we(Y[g[pe=32767+oe]]),we(p[pe]));for(var Ze=63;Ze>0&&_[Ze]==0;)Ze--;if(Ze==0)return we(he),W;for(var Re,fe=1;fe<=Ze;){for(var ut=fe;_[fe]==0&&fe<=Ze;)++fe;var rt=fe-ut;if(rt>=16){Re=rt>>4;for(var lt=1;lt<=Re;++lt)we(xe);rt&=15}pe=32767+_[fe],we(ae[(rt<<4)+g[pe]]),we(p[pe]),fe++}return Ze!=63&&we(he),W}function J(N){N=Math.min(Math.max(N,1),100),s!=N&&((function(U){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Y=0;Y<64;Y++){var ae=a((W[Y]*U+50)/100);ae=Math.min(Math.max(ae,1),255),o[P[Y]]=ae}for(var pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var xe=a((pe[he]*U+50)/100);xe=Math.min(Math.max(xe,1),255),l[P[he]]=xe}for(var ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Fe=0,oe=0;oe<8;oe++)for(var Ze=0;Ze<8;Ze++)c[Fe]=1/(o[P[Fe]]*ke[oe]*ke[Ze]*8),f[Fe]=1/(l[P[Fe]]*ke[oe]*ke[Ze]*8),Fe++})(N<50?Math.floor(5e3/N):Math.floor(200-2*N)),s=N)}this.encode=function(N,U){U&&J(U),w=new Array,b=0,k=7,H(65496),H(65504),H(16),ce(74),ce(70),ce(73),ce(70),ce(0),ce(1),ce(1),ce(0),H(1),H(1),ce(0),ce(0),(function(){H(65499),H(132),ce(0);for(var Ie=0;Ie<64;Ie++)ce(o[Ie]);ce(1);for(var Be=0;Be<64;Be++)ce(l[Be])})(),(function(Ie,Be){H(65472),H(17),ce(8),H(Be),H(Ie),ce(3),ce(1),ce(17),ce(0),ce(2),ce(17),ce(1),ce(3),ce(17),ce(1)})(N.width,N.height),(function(){H(65476),H(418),ce(0);for(var Ie=0;Ie<16;Ie++)ce(A[Ie+1]);for(var Be=0;Be<=11;Be++)ce(T[Be]);ce(16);for(var tt=0;tt<16;tt++)ce(O[tt+1]);for(var ot=0;ot<=161;ot++)ce(I[ot]);ce(1);for(var ht=0;ht<16;ht++)ce(D[ht+1]);for(var Pt=0;Pt<=11;Pt++)ce(B[Pt]);ce(17);for(var Ft=0;Ft<16;Ft++)ce(re[Ft+1]);for(var jt=0;jt<=161;jt++)ce(_e[jt])})(),H(65498),H(12),ce(3),ce(1),ce(0),ce(2),ce(17),ce(3),ce(17),ce(0),ce(63),ce(0);var W=0,Y=0,ae=0;b=0,k=7,this.encode.displayName="_encode_";for(var pe,he,xe,ke,Fe,oe,Ze,Re,fe,ut=N.data,rt=N.width,lt=N.height,le=4*rt,je=0;je<lt;){for(pe=0;pe<le;){for(Fe=le*je+pe,Ze=-1,Re=0,fe=0;fe<64;fe++)oe=Fe+(Re=fe>>3)*le+(Ze=4*(7&fe)),je+Re>=lt&&(oe-=le*(je+1+Re-lt)),pe+Ze>=le&&(oe-=pe+Ze-le+4),he=ut[oe++],xe=ut[oe++],ke=ut[oe++],R[fe]=(K[he]+K[xe+256|0]+K[ke+512|0]>>16)-128,C[fe]=(K[he+768|0]+K[xe+1024|0]+K[ke+1280|0]>>16)-128,j[fe]=(K[he+1280|0]+K[xe+1536|0]+K[ke+1792|0]>>16)-128;W=te(R,c,W,e,n),Y=te(C,f,Y,r,i),ae=te(j,f,ae,r,i),pe+=32}je+=8}if(k>=0){var ft=[];ft[1]=k+1,ft[0]=(1<<k+1)-1,we(ft)}return H(65497),new Uint8Array(w)},t=t||50,(function(){for(var N=String.fromCharCode,U=0;U<256;U++)X[U]=N(U)})(),e=Ce(A,T),r=Ce(D,B),n=Ce(O,I),i=Ce(re,_e),(function(){for(var N=1,U=2,W=1;W<=15;W++){for(var Y=N;Y<U;Y++)g[32767+Y]=W,p[32767+Y]=[],p[32767+Y][1]=W,p[32767+Y][0]=Y;for(var ae=-(U-1);ae<=-N;ae++)g[32767+ae]=W,p[32767+ae]=[],p[32767+ae][1]=W,p[32767+ae][0]=U-1+ae;N<<=1,U<<=1}})(),(function(){for(var N=0;N<256;N++)K[N]=19595*N,K[N+256|0]=38470*N,K[N+512|0]=7471*N+32768,K[N+768|0]=-11059*N,K[N+1024|0]=-21709*N,K[N+1280|0]=32768*N+8421375,K[N+1536|0]=-27439*N,K[N+1792|0]=-5329*N})(),J(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function sc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function rN(t){function e(T){if(!T)throw Error("assert :P")}function r(T,O,I){for(var D=0;4>D;D++)if(T[O+D]!=I.charCodeAt(D))return!0;return!1}function n(T,O,I,D,B){for(var re=0;re<B;re++)T[O+re]=I[D+re]}function i(T,O,I,D){for(var B=0;B<D;B++)T[O+B]=I}function s(T){return new Int32Array(T)}function a(T,O){for(var I=[],D=0;D<T;D++)I.push(new O);return I}function o(T,O){var I=[];return(function D(B,re,_e){for(var Ce=_e[re],we=0;we<Ce&&(B.push(_e.length>re+1?[]:new O),!(_e.length<re+1));we++)D(B[we],re+1,_e)})(I,0,T),I}var l=function(){var T=this;function O(v,S){for(var M=1<<S-1>>>0;v&M;)M>>>=1;return M?(v&M-1)+M:v}function I(v,S,M,G,ee){e(!(G%M));do v[S+(G-=M)]=ee;while(0<G)}function D(v,S,M,G,ee){if(e(2328>=ee),512>=ee)var se=s(512);else if((se=s(ee))==null)return 0;return(function(ue,de,ge,be,De,Ge){var Se,Ve,qe=de,pt=1<<ge,Qe=s(16),ct=s(16);for(e(De!=0),e(be!=null),e(ue!=null),e(0<ge),Ve=0;Ve<De;++Ve){if(15<be[Ve])return 0;++Qe[be[Ve]]}if(Qe[0]==De)return 0;for(ct[1]=0,Se=1;15>Se;++Se){if(Qe[Se]>1<<Se)return 0;ct[Se+1]=ct[Se]+Qe[Se]}for(Ve=0;Ve<De;++Ve)Se=be[Ve],0<be[Ve]&&(Ge[ct[Se]++]=Ve);if(ct[15]==1)return(be=new B).g=0,be.value=Ge[0],I(ue,qe,1,pt,be),pt;var dt,xt=-1,vt=pt-1,hr=0,er=1,Or=1,sr=1<<ge;for(Ve=0,Se=1,De=2;Se<=ge;++Se,De<<=1){if(er+=Or<<=1,0>(Or-=Qe[Se]))return 0;for(;0<Qe[Se];--Qe[Se])(be=new B).g=Se,be.value=Ge[Ve++],I(ue,qe+hr,De,sr,be),hr=O(hr,Se)}for(Se=ge+1,De=2;15>=Se;++Se,De<<=1){if(er+=Or<<=1,0>(Or-=Qe[Se]))return 0;for(;0<Qe[Se];--Qe[Se]){if(be=new B,(hr&vt)!=xt){for(qe+=sr,dt=1<<(xt=Se)-ge;15>xt&&!(0>=(dt-=Qe[xt]));)++xt,dt<<=1;pt+=sr=1<<(dt=xt-ge),ue[de+(xt=hr&vt)].g=dt+ge,ue[de+xt].value=qe-de-xt}be.g=Se-ge,be.value=Ge[Ve++],I(ue,qe+(hr>>ge),De,sr,be),hr=O(hr,Se)}}return er!=2*ct[15]-1?0:pt})(v,S,M,G,ee,se)}function B(){this.value=this.g=0}function re(){this.value=this.g=0}function _e(){this.G=a(5,B),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(ma,re)}function Ce(v,S,M,G){e(v!=null),e(S!=null),e(2147483648>G),v.Ca=254,v.I=0,v.b=-8,v.Ka=0,v.oa=S,v.pa=M,v.Jd=S,v.Yc=M+G,v.Zc=4<=G?M+G-4+1:M,he(v)}function we(v,S){for(var M=0;0<S--;)M|=ke(v,128)<<S;return M}function ce(v,S){var M=we(v,S);return xe(v)?-M:M}function H(v,S,M,G){var ee,se=0;for(e(v!=null),e(S!=null),e(4294967288>G),v.Sb=G,v.Ra=0,v.u=0,v.h=0,4<G&&(G=4),ee=0;ee<G;++ee)se+=S[M+ee]<<8*ee;v.Ra=se,v.bb=G,v.oa=S,v.pa=M}function te(v){for(;8<=v.u&&v.bb<v.Sb;)v.Ra>>>=8,v.Ra+=v.oa[v.pa+v.bb]<<Sc-8>>>0,++v.bb,v.u-=8;Y(v)&&(v.h=1,v.u=0)}function J(v,S){if(e(0<=S),!v.h&&S<=Dh){var M=W(v)&Ec[S];return v.u+=S,te(v),M}return v.h=1,v.u=0}function N(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function U(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(v){return v.Ra>>>(v.u&Sc-1)>>>0}function Y(v){return e(v.bb<=v.Sb),v.h||v.bb==v.Sb&&v.u>Sc}function ae(v,S){v.u=S,v.h=Y(v)}function pe(v){v.u>=Ei&&(e(v.u>=Ei),te(v))}function he(v){e(v!=null&&v.oa!=null),v.pa<v.Zc?(v.I=(v.oa[v.pa++]|v.I<<8)>>>0,v.b+=8):(e(v!=null&&v.oa!=null),v.pa<v.Yc?(v.b+=8,v.I=v.oa[v.pa++]|v.I<<8):v.Ka?v.b=0:(v.I<<=8,v.b+=8,v.Ka=1))}function xe(v){return we(v,1)}function ke(v,S){var M=v.Ca;0>v.b&&he(v);var G=v.b,ee=M*S>>>8,se=(v.I>>>G>ee)+0;for(se?(M-=ee,v.I-=ee+1<<G>>>0):M=ee+1,G=M,ee=0;256<=G;)ee+=8,G>>=8;return G=7^ee+a0[G],v.b-=G,v.Ca=(M<<G)-1,se}function Fe(v,S,M){v[S+0]=M>>24&255,v[S+1]=M>>16&255,v[S+2]=M>>8&255,v[S+3]=255&M}function oe(v,S){return v[S+0]|v[S+1]<<8}function Ze(v,S){return oe(v,S)|v[S+2]<<16}function Re(v,S){return oe(v,S)|oe(v,S+2)<<16}function fe(v,S){var M=1<<S;return e(v!=null),e(0<S),v.X=s(M),v.X==null?0:(v.Mb=32-S,v.Xa=S,1)}function ut(v,S){e(v!=null),e(S!=null),e(v.Xa==S.Xa),n(S.X,0,v.X,0,1<<S.Xa)}function rt(){this.X=[],this.Xa=this.Mb=0}function lt(v,S,M,G){e(M!=null),e(G!=null);var ee=M[0],se=G[0];return ee==0&&(ee=(v*se+S/2)/S),se==0&&(se=(S*ee+v/2)/v),0>=ee||0>=se?0:(M[0]=ee,G[0]=se,1)}function le(v,S){return v+(1<<S)-1>>>S}function je(v,S){return((4278255360&v)+(4278255360&S)>>>0&4278255360)+((16711935&v)+(16711935&S)>>>0&16711935)>>>0}function ft(v,S){T[S]=function(M,G,ee,se,ue,de,ge){var be;for(be=0;be<ue;++be){var De=T[v](de[ge+be-1],ee,se+be);de[ge+be]=je(M[G+be],De)}}}function Ie(){this.ud=this.hd=this.jd=0}function Be(v,S){return((4278124286&(v^S))>>>1)+(v&S)>>>0}function tt(v){return 0<=v&&256>v?v:0>v?0:255<v?255:void 0}function ot(v,S){return tt(v+(v-S+.5>>1))}function ht(v,S,M){return Math.abs(S-M)-Math.abs(v-M)}function Pt(v,S,M,G,ee,se,ue){for(G=se[ue-1],M=0;M<ee;++M)se[ue+M]=G=je(v[S+M],G)}function Ft(v,S,M,G,ee){var se;for(se=0;se<M;++se){var ue=v[S+se],de=ue>>8&255,ge=16711935&(ge=(ge=16711935&ue)+((de<<16)+de));G[ee+se]=(4278255360&ue)+ge>>>0}}function jt(v,S){S.jd=255&v,S.hd=v>>8&255,S.ud=v>>16&255}function wt(v,S,M,G,ee,se){var ue;for(ue=0;ue<G;++ue){var de=S[M+ue],ge=de>>>8,be=de,De=255&(De=(De=de>>>16)+((v.jd<<24>>24)*(ge<<24>>24)>>>5));be=255&(be=(be+=(v.hd<<24>>24)*(ge<<24>>24)>>>5)+((v.ud<<24>>24)*(De<<24>>24)>>>5)),ee[se+ue]=(4278255360&de)+(De<<16)+be}}function At(v,S,M,G,ee){T[S]=function(se,ue,de,ge,be,De,Ge,Se,Ve){for(ge=Ge;ge<Se;++ge)for(Ge=0;Ge<Ve;++Ge)be[De++]=ee(de[G(se[ue++])])},T[v]=function(se,ue,de,ge,be,De,Ge){var Se=8>>se.b,Ve=se.Ea,qe=se.K[0],pt=se.w;if(8>Se)for(se=(1<<se.b)-1,pt=(1<<Se)-1;ue<de;++ue){var Qe,ct=0;for(Qe=0;Qe<Ve;++Qe)Qe&se||(ct=G(ge[be++])),De[Ge++]=ee(qe[ct&pt]),ct>>=Se}else T["VP8LMapColor"+M](ge,be,qe,pt,De,Ge,ue,de,Ve)}}function Xt(v,S,M,G,ee){for(M=S+M;S<M;){var se=v[S++];G[ee++]=se>>16&255,G[ee++]=se>>8&255,G[ee++]=255&se}}function Gt(v,S,M,G,ee){for(M=S+M;S<M;){var se=v[S++];G[ee++]=se>>16&255,G[ee++]=se>>8&255,G[ee++]=255&se,G[ee++]=se>>24&255}}function qt(v,S,M,G,ee){for(M=S+M;S<M;){var se=(ue=v[S++])>>16&240|ue>>12&15,ue=240&ue|ue>>28&15;G[ee++]=se,G[ee++]=ue}}function wr(v,S,M,G,ee){for(M=S+M;S<M;){var se=(ue=v[S++])>>16&248|ue>>13&7,ue=ue>>5&224|ue>>3&31;G[ee++]=se,G[ee++]=ue}}function rn(v,S,M,G,ee){for(M=S+M;S<M;){var se=v[S++];G[ee++]=255&se,G[ee++]=se>>8&255,G[ee++]=se>>16&255}}function Me(v,S,M,G,ee,se){if(se==0)for(M=S+M;S<M;)Fe(G,((se=v[S++])[0]>>24|se[1]>>8&65280|se[2]<<8&16711680|se[3]<<24)>>>0),ee+=32;else n(G,ee,v,S,M)}function Mt(v,S){T[S][0]=T[v+"0"],T[S][1]=T[v+"1"],T[S][2]=T[v+"2"],T[S][3]=T[v+"3"],T[S][4]=T[v+"4"],T[S][5]=T[v+"5"],T[S][6]=T[v+"6"],T[S][7]=T[v+"7"],T[S][8]=T[v+"8"],T[S][9]=T[v+"9"],T[S][10]=T[v+"10"],T[S][11]=T[v+"11"],T[S][12]=T[v+"12"],T[S][13]=T[v+"13"],T[S][14]=T[v+"0"],T[S][15]=T[v+"0"]}function Vt(v){return v==pf||v==vu||v==Vh||v==Uh}function rr(){this.eb=[],this.size=this.A=this.fb=0}function ar(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ur(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new rr,this.f.kb=new ar,this.sd=null}function Jt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function mr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function an(v){return alert("todo:WebPSamplerProcessPlane"),v.T}function zr(v,S){var M=v.T,G=S.ba.f.RGBA,ee=G.eb,se=G.fb+v.ka*G.A,ue=Va[S.ba.S],de=v.y,ge=v.O,be=v.f,De=v.N,Ge=v.ea,Se=v.W,Ve=S.cc,qe=S.dc,pt=S.Mc,Qe=S.Nc,ct=v.ka,dt=v.ka+v.T,xt=v.U,vt=xt+1>>1;for(ct==0?ue(de,ge,null,null,be,De,Ge,Se,be,De,Ge,Se,ee,se,null,null,xt):(ue(S.ec,S.fc,de,ge,Ve,qe,pt,Qe,be,De,Ge,Se,ee,se-G.A,ee,se,xt),++M);ct+2<dt;ct+=2)Ve=be,qe=De,pt=Ge,Qe=Se,De+=v.Rc,Se+=v.Rc,se+=2*G.A,ue(de,(ge+=2*v.fa)-v.fa,de,ge,Ve,qe,pt,Qe,be,De,Ge,Se,ee,se-G.A,ee,se,xt);return ge+=v.fa,v.j+dt<v.o?(n(S.ec,S.fc,de,ge,xt),n(S.cc,S.dc,be,De,vt),n(S.Mc,S.Nc,Ge,Se,vt),M--):1&dt||ue(de,ge,null,null,be,De,Ge,Se,be,De,Ge,Se,ee,se+G.A,null,null,xt),M}function Nn(v,S,M){var G=v.F,ee=[v.J];if(G!=null){var se=v.U,ue=S.ba.S,de=ue==Bh||ue==Vh;S=S.ba.f.RGBA;var ge=[0],be=v.ka;ge[0]=v.T,v.Kb&&(be==0?--ge[0]:(--be,ee[0]-=v.width),v.j+v.ka+v.T==v.o&&(ge[0]=v.o-v.j-be));var De=S.eb;be=S.fb+be*S.A,v=jh(G,ee[0],v.width,se,ge,De,be+(de?0:3),S.A),e(M==ge),v&&Vt(ue)&&xu(De,be,de,se,ge,S.A)}return 0}function Cn(v){var S=v.ma,M=S.ba.S,G=11>M,ee=M==Tc||M==Mh||M==Bh||M==On||M==12||Vt(M);if(S.memory=null,S.Ib=null,S.Jb=null,S.Nd=null,!da(S.Oa,v,ee?11:12))return 0;if(ee&&Vt(M)&&_c(),v.da)alert("todo:use_scaling");else{if(G){if(S.Ib=an,v.Kb){if(M=v.U+1>>1,S.memory=s(v.U+2*M),S.memory==null)return 0;S.ec=S.memory,S.fc=0,S.cc=S.ec,S.dc=S.fc+v.U,S.Mc=S.cc,S.Nc=S.dc+M,S.Ib=zr,_c()}}else alert("todo:EmitYUV");ee&&(S.Jb=Nn,G&&Ri())}if(G&&!Bs){for(v=0;256>v;++v)Ua[v]=89858*(v-128)+Ko>>Xl,za[v]=-22014*(v-128)+Ko,vf[v]=-45773*(v-128),bu[v]=113618*(v-128)+Ko>>Xl;for(v=An;v<Rn;++v)S=76283*(v-16)+Ko>>Xl,p0[v-An]=Qr(S,255),Zg[v-An]=Qr(S+8>>4,15);Bs=1}return 1}function ir(v){var S=v.ma,M=v.U,G=v.T;return e(!(1&v.ka)),0>=M||0>=G?0:(M=S.Ib(v,S),S.Jb!=null&&S.Jb(v,S,M),S.Dc+=M,1)}function qr(v){v.ma.memory=null}function is(v,S,M,G){return J(v,8)!=47?0:(S[0]=J(v,14)+1,M[0]=J(v,14)+1,G[0]=J(v,1),J(v,3)!=0?0:!v.h)}function Dn(v,S){if(4>v)return v+1;var M=v-2>>1;return(2+(1&v)<<M)+J(S,M)+1}function qi(v,S){return 120<S?S-120:1<=(M=((M=Py[S-1])>>4)*v+(8-(15&M)))?M:1;var M}function bn(v,S,M){var G=W(M),ee=v[S+=255&G].g-8;return 0<ee&&(ae(M,M.u+8),G=W(M),S+=v[S].value,S+=G&(1<<ee)-1),ae(M,M.u+v[S].g),v[S].value}function Zn(v,S,M){return M.g+=v.g,M.value+=v.value<<S>>>0,e(8>=M.g),v.g}function ne(v,S,M){var G=v.xc;return e((S=G==0?0:v.vc[v.md*(M>>G)+(S>>G)])<v.Wb),v.Ya[S]}function Te(v,S,M,G){var ee=v.ab,se=v.c*S,ue=v.C;S=ue+S;var de=M,ge=G;for(G=v.Ta,M=v.Ua;0<ee--;){var be=v.gc[ee],De=ue,Ge=S,Se=de,Ve=ge,qe=(ge=G,de=M,be.Ea);switch(e(De<Ge),e(Ge<=be.nc),be.hc){case 2:lf(Se,Ve,(Ge-De)*qe,ge,de);break;case 0:var pt=De,Qe=Ge,ct=ge,dt=de,xt=(sr=be).Ea;pt==0&&(Oa(Se,Ve,null,null,1,ct,dt),Pt(Se,Ve+1,0,0,xt-1,ct,dt+1),Ve+=xt,dt+=xt,++pt);for(var vt=1<<sr.b,hr=vt-1,er=le(xt,sr.b),Or=sr.K,sr=sr.w+(pt>>sr.b)*er;pt<Qe;){var Jr=Or,Si=sr,jr=1;for(ja(Se,Ve,ct,dt-xt,1,ct,dt);jr<xt;){var tr=(jr&~hr)+vt;tr>xt&&(tr=xt),(0,Kl[Jr[Si++]>>8&15])(Se,Ve+ +jr,ct,dt+jr-xt,tr-jr,ct,dt+jr),jr=tr}Ve+=xt,dt+=xt,++pt&hr||(sr+=er)}Ge!=be.nc&&n(ge,de-qe,ge,de+(Ge-De-1)*qe,qe);break;case 1:for(qe=Se,Qe=Ve,xt=(Se=be.Ea)-(dt=Se&~(ct=(Ve=1<<be.b)-1)),pt=le(Se,be.b),vt=be.K,be=be.w+(De>>be.b)*pt;De<Ge;){for(hr=vt,er=be,Or=new Ie,sr=Qe+dt,Jr=Qe+Se;Qe<sr;)jt(hr[er++],Or),gl(Or,qe,Qe,Ve,ge,de),Qe+=Ve,de+=Ve;Qe<Jr&&(jt(hr[er++],Or),gl(Or,qe,Qe,xt,ge,de),Qe+=xt,de+=xt),++De&ct||(be+=pt)}break;case 3:if(Se==ge&&Ve==de&&0<be.b){for(Qe=ge,Se=qe=de+(Ge-De)*qe-(dt=(Ge-De)*le(be.Ea,be.b)),Ve=ge,ct=de,pt=[],dt=(xt=dt)-1;0<=dt;--dt)pt[dt]=Ve[ct+dt];for(dt=xt-1;0<=dt;--dt)Qe[Se+dt]=pt[dt];kc(be,De,Ge,ge,qe,ge,de)}else kc(be,De,Ge,Se,Ve,ge,de)}de=G,ge=M}ge!=M&&n(G,M,de,ge,se)}function ve(v,S){var M=v.V,G=v.Ba+v.c*v.C,ee=S-v.C;if(e(S<=v.l.o),e(16>=ee),0<ee){var se=v.l,ue=v.Ta,de=v.Ua,ge=se.width;if(Te(v,ee,M,G),ee=de=[de],e((M=v.C)<(G=S)),e(se.v<se.va),G>se.o&&(G=se.o),M<se.j){var be=se.j-M;M=se.j,ee[0]+=be*ge}if(M>=G?M=0:(ee[0]+=4*se.v,se.ka=M-se.j,se.U=se.va-se.v,se.T=G-M,M=1),M){if(de=de[0],11>(M=v.ca).S){var De=M.f.RGBA,Ge=(G=M.S,ee=se.U,se=se.T,be=De.eb,De.A),Se=se;for(De=De.fb+v.Ma*De.A;0<Se--;){var Ve=ue,qe=de,pt=ee,Qe=be,ct=De;switch(G){case u0:uf(Ve,qe,pt,Qe,ct);break;case Tc:Ma(Ve,qe,pt,Qe,ct);break;case pf:Ma(Ve,qe,pt,Qe,ct),xu(Qe,ct,0,pt,1,0);break;case Kg:Gn(Ve,qe,pt,Qe,ct);break;case Mh:Me(Ve,qe,pt,Qe,ct,1);break;case vu:Me(Ve,qe,pt,Qe,ct,1),xu(Qe,ct,0,pt,1,0);break;case Bh:Me(Ve,qe,pt,Qe,ct,0);break;case Vh:Me(Ve,qe,pt,Qe,ct,0),xu(Qe,ct,1,pt,1,0);break;case On:xl(Ve,qe,pt,Qe,ct);break;case Uh:xl(Ve,qe,pt,Qe,ct),mm(Qe,ct,pt,1,0);break;case f0:Wn(Ve,qe,pt,Qe,ct);break;default:e(0)}de+=ge,De+=Ge}v.Ma+=se}else alert("todo:EmitRescaledRowsYUVA");e(v.Ma<=M.height)}}v.C=S,e(v.C<=v.i)}function ye(v){var S;if(0<v.ua)return 0;for(S=0;S<v.Wb;++S){var M=v.Ya[S].G,G=v.Ya[S].H;if(0<M[1][G[1]+0].g||0<M[2][G[2]+0].g||0<M[3][G[3]+0].g)return 0}return 1}function Ae(v,S,M,G,ee,se){if(v.Z!=0){var ue=v.qd,de=v.rd;for(e(Xs[v.Z]!=null);S<M;++S)Xs[v.Z](ue,de,G,ee,G,ee,se),ue=G,de=ee,ee+=se;v.qd=ue,v.rd=de}}function Ne(v,S){var M=v.l.ma,G=M.Z==0||M.Z==1?v.l.j:v.C;if(G=v.C<G?G:v.C,e(S<=v.l.o),S>G){var ee=v.l.width,se=M.ca,ue=M.tb+ee*G,de=v.V,ge=v.Ba+v.c*G,be=v.gc;e(v.ab==1),e(be[0].hc==3),pu(be[0],G,S,de,ge,se,ue),Ae(M,G,S,se,ue,ee)}v.C=v.Ma=S}function He(v,S,M,G,ee,se,ue){var de=v.$/G,ge=v.$%G,be=v.m,De=v.s,Ge=M+v.$,Se=Ge;ee=M+G*ee;var Ve=M+G*se,qe=280+De.ua,pt=v.Pb?de:16777216,Qe=0<De.ua?De.Wa:null,ct=De.wc,dt=Ge<Ve?ne(De,ge,de):null;e(v.C<se),e(Ve<=ee);var xt=!1;e:for(;;){for(;xt||Ge<Ve;){var vt=0;if(de>=pt){var hr=Ge-M;e((pt=v).Pb),pt.wd=pt.m,pt.xd=hr,0<pt.s.ua&&ut(pt.s.Wa,pt.s.vb),pt=de+d0}if(ge&ct||(dt=ne(De,ge,de)),e(dt!=null),dt.Qb&&(S[Ge]=dt.qb,xt=!0),!xt)if(pe(be),dt.jc){vt=be,hr=S;var er=Ge,Or=dt.pd[W(vt)&ma-1];e(dt.jc),256>Or.g?(ae(vt,vt.u+Or.g),hr[er]=Or.value,vt=0):(ae(vt,vt.u+Or.g-256),e(256<=Or.value),vt=Or.value),vt==0&&(xt=!0)}else vt=bn(dt.G[0],dt.H[0],be);if(be.h)break;if(xt||256>vt){if(!xt)if(dt.nd)S[Ge]=(dt.qb|vt<<8)>>>0;else{if(pe(be),xt=bn(dt.G[1],dt.H[1],be),pe(be),hr=bn(dt.G[2],dt.H[2],be),er=bn(dt.G[3],dt.H[3],be),be.h)break;S[Ge]=(er<<24|xt<<16|vt<<8|hr)>>>0}if(xt=!1,++Ge,++ge>=G&&(ge=0,++de,ue!=null&&de<=se&&!(de%16)&&ue(v,de),Qe!=null))for(;Se<Ge;)vt=S[Se++],Qe.X[(506832829*vt&4294967295)>>>Qe.Mb]=vt}else if(280>vt){if(vt=Dn(vt-256,be),hr=bn(dt.G[4],dt.H[4],be),pe(be),hr=qi(G,hr=Dn(hr,be)),be.h)break;if(Ge-M<hr||ee-Ge<vt)break e;for(er=0;er<vt;++er)S[Ge+er]=S[Ge+er-hr];for(Ge+=vt,ge+=vt;ge>=G;)ge-=G,++de,ue!=null&&de<=se&&!(de%16)&&ue(v,de);if(e(Ge<=ee),ge&ct&&(dt=ne(De,ge,de)),Qe!=null)for(;Se<Ge;)vt=S[Se++],Qe.X[(506832829*vt&4294967295)>>>Qe.Mb]=vt}else{if(!(vt<qe))break e;for(xt=vt-280,e(Qe!=null);Se<Ge;)vt=S[Se++],Qe.X[(506832829*vt&4294967295)>>>Qe.Mb]=vt;vt=Ge,e(!(xt>>>(hr=Qe).Xa)),S[vt]=hr.X[xt],xt=!0}xt||e(be.h==Y(be))}if(v.Pb&&be.h&&Ge<ee)e(v.m.h),v.a=5,v.m=v.wd,v.$=v.xd,0<v.s.ua&&ut(v.s.vb,v.s.Wa);else{if(be.h)break e;ue?.(v,de>se?se:de),v.a=0,v.$=Ge-M}return 1}return v.a=3,0}function nt(v){e(v!=null),v.vc=null,v.yc=null,v.Ya=null;var S=v.Wa;S!=null&&(S.X=null),v.vb=null,e(v!=null)}function Ke(){var v=new Hn;return v==null?null:(v.a=0,v.xb=gf,Mt("Predictor","VP8LPredictors"),Mt("Predictor","VP8LPredictors_C"),Mt("PredictorAdd","VP8LPredictorsAdd"),Mt("PredictorAdd","VP8LPredictorsAdd_C"),lf=Ft,gl=wt,uf=Xt,Ma=Gt,xl=qt,Wn=wr,Gn=rn,T.VP8LMapColor32b=cf,T.VP8LMapColor8b=Gl,v)}function Xe(v,S,M,G,ee){var se=1,ue=[v],de=[S],ge=G.m,be=G.s,De=null,Ge=0;e:for(;;){if(M)for(;se&&J(ge,1);){var Se=ue,Ve=de,qe=G,pt=1,Qe=qe.m,ct=qe.gc[qe.ab],dt=J(Qe,2);if(qe.Oc&1<<dt)se=0;else{switch(qe.Oc|=1<<dt,ct.hc=dt,ct.Ea=Se[0],ct.nc=Ve[0],ct.K=[null],++qe.ab,e(4>=qe.ab),dt){case 0:case 1:ct.b=J(Qe,3)+2,pt=Xe(le(ct.Ea,ct.b),le(ct.nc,ct.b),0,qe,ct.K),ct.K=ct.K[0];break;case 3:var xt,vt=J(Qe,8)+1,hr=16<vt?0:4<vt?1:2<vt?2:3;if(Se[0]=le(ct.Ea,hr),ct.b=hr,xt=pt=Xe(vt,1,0,qe,ct.K)){var er,Or=vt,sr=ct,Jr=1<<(8>>sr.b),Si=s(Jr);if(Si==null)xt=0;else{var jr=sr.K[0],tr=sr.w;for(Si[0]=sr.K[0][0],er=1;er<1*Or;++er)Si[er]=je(jr[tr+er],Si[er-1]);for(;er<4*Jr;++er)Si[er]=0;sr.K[0]=null,sr.K[0]=Si,xt=1}}pt=xt;break;case 2:break;default:e(0)}se=pt}}if(ue=ue[0],de=de[0],se&&J(ge,1)&&!(se=1<=(Ge=J(ge,4))&&11>=Ge)){G.a=3;break e}var zt;if(zt=se)t:{var Di,Nr,Kr,Kn=G,bs=ue,Wi=de,hi=Ge,ls=M,Es=Kn.m,ai=Kn.s,sn=[null],xn=1,oi=0,vn=Yg[hi];r:for(;;){if(ls&&J(Es,1)){var ki=J(Es,3)+2,Ti=le(bs,ki),jn=le(Wi,ki),Ys=Ti*jn;if(!Xe(Ti,jn,0,Kn,sn))break r;for(sn=sn[0],ai.xc=ki,Di=0;Di<Ys;++Di){var Fn=sn[Di]>>8&65535;sn[Di]=Fn,Fn>=xn&&(xn=Fn+1)}}if(Es.h)break r;for(Nr=0;5>Nr;++Nr){var Mn=yu[Nr];!Nr&&0<hi&&(Mn+=1<<hi),oi<Mn&&(oi=Mn)}var Gi=a(xn*vn,B),Vs=xn,$a=a(Vs,_e);if($a==null)var Oi=null;else e(65536>=Vs),Oi=$a;var ji=s(oi);if(Oi==null||ji==null||Gi==null){Kn.a=1;break r}var Qs=Gi;for(Di=Kr=0;Di<xn;++Di){var Bn=Oi[Di],Js=Bn.G,Ao=Bn.H,Xo=0,Ss=1,Mi=0;for(Nr=0;5>Nr;++Nr){Mn=yu[Nr],Js[Nr]=Qs,Ao[Nr]=Kr,!Nr&&0<hi&&(Mn+=1<<hi);i:{var Cc,Ql=Mn,yf=Kn,_l=ji,tx=Qs,Am=Kr,ti=0,Yo=yf.m,Nm=J(Yo,1);if(i(_l,0,0,Ql),Nm){var Cm=J(Yo,1)+1,m0=J(Yo,1),g0=J(Yo,m0==0?1:8);_l[g0]=1,Cm==2&&(_l[g0=J(Yo,8)]=1);var bl=1}else{var li=s(19),Ki=J(Yo,4)+4;if(19<Ki){yf.a=3;var Bi=0;break i}for(Cc=0;Cc<Ki;++Cc)li[Iy[Cc]]=J(Yo,3);var wf=void 0,Jl=void 0,_f=yf,Oy=li,cs=Ql,x0=_l,Wh=0,El=_f.m,Qo=8,fo=a(128,B);n:for(;D(fo,0,7,Oy,19);){if(J(El,1)){var Gh=2+2*J(El,3);if((wf=2+J(El,Gh))>cs)break n}else wf=cs;for(Jl=0;Jl<cs&&wf--;){pe(El);var v0=fo[0+(127&W(El))];ae(El,El.u+v0.g);var Ic=v0.value;if(16>Ic)x0[Jl++]=Ic,Ic!=0&&(Qo=Ic);else{var rx=Ic==16,Im=Ic-16,nx=h0[Im],Pm=J(El,zh[Im])+nx;if(Jl+Pm>cs)break n;for(var ix=rx?Qo:0;0<Pm--;)x0[Jl++]=ix}}Wh=1;break n}Wh||(_f.a=3),bl=Wh}(bl=bl&&!Yo.h)&&(ti=D(tx,Am,8,_l,Ql)),bl&&ti!=0?Bi=ti:(yf.a=3,Bi=0)}if(Bi==0)break r;if(Ss&&Xg[Nr]==1&&(Ss=Qs[Kr].g==0),Xo+=Qs[Kr].g,Kr+=Bi,3>=Nr){var bf,y0=ji[0];for(bf=1;bf<Mn;++bf)ji[bf]>y0&&(y0=ji[bf]);Mi+=y0}}if(Bn.nd=Ss,Bn.Qb=0,Ss&&(Bn.qb=(Js[3][Ao[3]+0].value<<24|Js[1][Ao[1]+0].value<<16|Js[2][Ao[2]+0].value)>>>0,Xo==0&&256>Js[0][Ao[0]+0].value&&(Bn.Qb=1,Bn.qb+=Js[0][Ao[0]+0].value<<8)),Bn.jc=!Bn.Qb&&6>Mi,Bn.jc){var Kh,ho=Bn;for(Kh=0;Kh<ma;++Kh){var Zl=Kh,Jo=ho.pd[Zl],Su=ho.G[0][ho.H[0]+Zl];256<=Su.value?(Jo.g=Su.g+256,Jo.value=Su.value):(Jo.g=0,Jo.value=0,Zl>>=Zn(Su,8,Jo),Zl>>=Zn(ho.G[1][ho.H[1]+Zl],16,Jo),Zl>>=Zn(ho.G[2][ho.H[2]+Zl],0,Jo),Zn(ho.G[3][ho.H[3]+Zl],24,Jo))}}}ai.vc=sn,ai.Wb=xn,ai.Ya=Oi,ai.yc=Gi,zt=1;break t}zt=0}if(!(se=zt)){G.a=3;break e}if(0<Ge){if(be.ua=1<<Ge,!fe(be.Wa,Ge)){G.a=1,se=0;break e}}else be.ua=0;var w0=G,_0=ue,sx=de,b0=w0.s,E0=b0.xc;if(w0.c=_0,w0.i=sx,b0.md=le(_0,E0),b0.wc=E0==0?-1:(1<<E0)-1,M){G.xb=wl;break e}if((De=s(ue*de))==null){G.a=1,se=0;break e}se=(se=He(G,De,0,ue,de,de,null))&&!ge.h;break e}return se?(ee!=null?ee[0]=De:(e(De==null),e(M)),G.$=0,M||nt(be)):nt(be),se}function Je(v,S){var M=v.c*v.i,G=M+S+16*S;return e(v.c<=S),v.V=s(G),v.V==null?(v.Ta=null,v.Ua=0,v.a=1,0):(v.Ta=v.V,v.Ua=v.Ba+M+S,1)}function _t(v,S){var M=v.C,G=S-M,ee=v.V,se=v.Ba+v.c*M;for(e(S<=v.l.o);0<G;){var ue=16<G?16:G,de=v.l.ma,ge=v.l.width,be=ge*ue,De=de.ca,Ge=de.tb+ge*M,Se=v.Ta,Ve=v.Ua;Te(v,ue,ee,se),gm(Se,Ve,De,Ge,be),Ae(de,M,M+ue,De,Ge,ge),G-=ue,ee+=ue*v.c,M+=ue}e(M==S),v.C=v.Ma=S}function Dt(){this.ub=this.yd=this.td=this.Rb=0}function Ht(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Lt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Tt(){this.Yb=(function(){var v=[];return(function S(M,G,ee){for(var se=ee[G],ue=0;ue<se&&(M.push(ee.length>G+1?[]:0),!(ee.length<G+1));ue++)S(M[ue],G+1,ee)})(v,0,[3,11]),v})()}function br(){this.jb=s(3),this.Wc=o([4,8],Tt),this.Xc=o([4,17],Tt)}function on(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Dr(){this.ld=this.La=this.dd=this.tc=0}function fn(){this.Na=this.la=0}function Na(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ca(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ws(){this.uc=this.M=this.Nb=0,this.wa=Array(new Dr),this.Y=0,this.ya=Array(new Ca),this.aa=0,this.l=new En}function ii(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Bo(){this.cb=this.a=0,this.sc="",this.m=new N,this.Od=new Dt,this.Kc=new Ht,this.ed=new on,this.Qa=new Lt,this.Ic=this.$c=this.Aa=0,this.D=new Ws,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,N),this.ia=0,this.pb=a(4,Na),this.Pa=new br,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ii),this.Hd=0,this.rb=Array(new fn),this.sb=0,this.wa=Array(new Dr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ca),this.L=this.aa=0,this.gd=o([4,2],Dr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function En(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function uu(){var v=new Bo;return v!=null&&(v.a=0,v.sc="OK",v.cb=0,v.Xb=0,wu||(wu=Ia)),v}function fi(v,S,M){return v.a==0&&(v.a=S,v.sc=M,v.cb=0),0}function fu(v,S,M){return 3<=M&&v[S+0]==157&&v[S+1]==1&&v[S+2]==42}function zl(v,S){if(v==null)return 0;if(v.a=0,v.sc="OK",S==null)return fi(v,2,"null VP8Io passed to VP8GetHeaders()");var M=S.data,G=S.w,ee=S.ha;if(4>ee)return fi(v,7,"Truncated header.");var se=M[G+0]|M[G+1]<<8|M[G+2]<<16,ue=v.Od;if(ue.Rb=!(1&se),ue.td=se>>1&7,ue.yd=se>>4&1,ue.ub=se>>5,3<ue.td)return fi(v,3,"Incorrect keyframe parameters.");if(!ue.yd)return fi(v,4,"Frame not displayable.");G+=3,ee-=3;var de=v.Kc;if(ue.Rb){if(7>ee)return fi(v,7,"cannot parse picture header");if(!fu(M,G,ee))return fi(v,3,"Bad code word");de.c=16383&(M[G+4]<<8|M[G+3]),de.Td=M[G+4]>>6,de.i=16383&(M[G+6]<<8|M[G+5]),de.Ud=M[G+6]>>6,G+=7,ee-=7,v.za=de.c+15>>4,v.Ub=de.i+15>>4,S.width=de.c,S.height=de.i,S.Da=0,S.j=0,S.v=0,S.va=S.width,S.o=S.height,S.da=0,S.ib=S.width,S.hb=S.height,S.U=S.width,S.T=S.height,i((se=v.Pa).jb,0,255,se.jb.length),e((se=v.Qa)!=null),se.Cb=0,se.Bb=0,se.Fb=1,i(se.Zb,0,0,se.Zb.length),i(se.Lb,0,0,se.Lb)}if(ue.ub>ee)return fi(v,7,"bad partition length");Ce(se=v.m,M,G,ue.ub),G+=ue.ub,ee-=ue.ub,ue.Rb&&(de.Ld=xe(se),de.Kd=xe(se)),de=v.Qa;var ge,be=v.Pa;if(e(se!=null),e(de!=null),de.Cb=xe(se),de.Cb){if(de.Bb=xe(se),xe(se)){for(de.Fb=xe(se),ge=0;4>ge;++ge)de.Zb[ge]=xe(se)?ce(se,7):0;for(ge=0;4>ge;++ge)de.Lb[ge]=xe(se)?ce(se,6):0}if(de.Bb)for(ge=0;3>ge;++ge)be.jb[ge]=xe(se)?we(se,8):255}else de.Bb=0;if(se.Ka)return fi(v,3,"cannot parse segment header");if((de=v.ed).zd=xe(se),de.Tb=we(se,6),de.wb=we(se,3),de.Pc=xe(se),de.Pc&&xe(se)){for(be=0;4>be;++be)xe(se)&&(de.vd[be]=ce(se,6));for(be=0;4>be;++be)xe(se)&&(de.od[be]=ce(se,6))}if(v.L=de.Tb==0?0:de.zd?1:2,se.Ka)return fi(v,3,"cannot parse filter header");var De=ee;if(ee=ge=G,G=ge+De,de=De,v.Xb=(1<<we(v.m,2))-1,De<3*(be=v.Xb))M=7;else{for(ge+=3*be,de-=3*be,De=0;De<be;++De){var Ge=M[ee+0]|M[ee+1]<<8|M[ee+2]<<16;Ge>de&&(Ge=de),Ce(v.Jc[+De],M,ge,Ge),ge+=Ge,de-=Ge,ee+=3}Ce(v.Jc[+be],M,ge,de),M=ge<G?0:5}if(M!=0)return fi(v,M,"cannot parse partitions");for(M=we(ge=v.m,7),ee=xe(ge)?ce(ge,4):0,G=xe(ge)?ce(ge,4):0,de=xe(ge)?ce(ge,4):0,be=xe(ge)?ce(ge,4):0,ge=xe(ge)?ce(ge,4):0,De=v.Qa,Ge=0;4>Ge;++Ge){if(De.Cb){var Se=De.Zb[Ge];De.Fb||(Se+=M)}else{if(0<Ge){v.pb[Ge]=v.pb[0];continue}Se=M}var Ve=v.pb[Ge];Ve.Sc[0]=mf[Qr(Se+ee,127)],Ve.Sc[1]=$h[Qr(Se+0,127)],Ve.Eb[0]=2*mf[Qr(Se+G,127)],Ve.Eb[1]=101581*$h[Qr(Se+de,127)]>>16,8>Ve.Eb[1]&&(Ve.Eb[1]=8),Ve.Qc[0]=mf[Qr(Se+be,117)],Ve.Qc[1]=$h[Qr(Se+ge,127)],Ve.lc=Se+ge}if(!ue.Rb)return fi(v,4,"Not a key frame.");for(xe(se),ue=v.Pa,M=0;4>M;++M){for(ee=0;8>ee;++ee)for(G=0;3>G;++G)for(de=0;11>de;++de)be=ke(se,Fy[M][ee][G][de])?we(se,8):Jg[M][ee][G][de],ue.Wc[M][ee].Yb[G][de]=be;for(ee=0;17>ee;++ee)ue.Xc[M][ee]=ue.Wc[M][Sm[ee]]}return v.kc=xe(se),v.kc&&(v.Bd=we(se,8)),v.cb=1}function Ia(v,S,M,G,ee,se,ue){var de=S[ee].Yb[M];for(M=0;16>ee;++ee){if(!ke(v,de[M+0]))return ee;for(;!ke(v,de[M+1]);)if(de=S[++ee].Yb[0],M=0,ee==16)return 16;var ge=S[ee+1].Yb;if(ke(v,de[M+2])){var be=v,De=0;if(ke(be,(Se=de)[(Ge=M)+3]))if(ke(be,Se[Ge+6])){for(de=0,Ge=2*(De=ke(be,Se[Ge+8]))+(Se=ke(be,Se[Ge+9+De])),De=0,Se=bm[Ge];Se[de];++de)De+=De+ke(be,Se[de]);De+=3+(8<<Ge)}else ke(be,Se[Ge+7])?(De=7+2*ke(be,165),De+=ke(be,145)):De=5+ke(be,159);else De=ke(be,Se[Ge+4])?3+ke(be,Se[Ge+5]):2;de=ge[2]}else De=1,de=ge[1];ge=ue+Em[ee],0>(be=v).b&&he(be);var Ge,Se=be.b,Ve=(Ge=be.Ca>>1)-(be.I>>Se)>>31;--be.b,be.Ca+=Ve,be.Ca|=1,be.I-=(Ge+1&Ve)<<Se,se[ge]=((De^Ve)-Ve)*G[(0<ee)+0]}return 16}function Pa(v){var S=v.rb[v.sb-1];S.la=0,S.Na=0,i(v.zc,0,0,v.zc.length),v.ja=0}function Rs(v,S,M,G,ee){ee=v[S+M+32*G]+(ee>>3),v[S+M+32*G]=-256&ee?0>ee?0:255:ee}function $l(v,S,M,G,ee,se){Rs(v,S,0,M,G+ee),Rs(v,S,1,M,G+se),Rs(v,S,2,M,G-se),Rs(v,S,3,M,G-ee)}function Tn(v){return(20091*v>>16)+v}function Fs(v,S,M,G){var ee,se=0,ue=s(16);for(ee=0;4>ee;++ee){var de=v[S+0]+v[S+8],ge=v[S+0]-v[S+8],be=(35468*v[S+4]>>16)-Tn(v[S+12]),De=Tn(v[S+4])+(35468*v[S+12]>>16);ue[se+0]=de+De,ue[se+1]=ge+be,ue[se+2]=ge-be,ue[se+3]=de-De,se+=4,S++}for(ee=se=0;4>ee;++ee)de=(v=ue[se+0]+4)+ue[se+8],ge=v-ue[se+8],be=(35468*ue[se+4]>>16)-Tn(ue[se+12]),Rs(M,G,0,0,de+(De=Tn(ue[se+4])+(35468*ue[se+12]>>16))),Rs(M,G,1,0,ge+be),Rs(M,G,2,0,ge-be),Rs(M,G,3,0,de-De),se++,G+=32}function ql(v,S,M,G){var ee=v[S+0]+4,se=35468*v[S+4]>>16,ue=Tn(v[S+4]),de=35468*v[S+1]>>16;$l(M,G,0,ee+ue,v=Tn(v[S+1]),de),$l(M,G,1,ee+se,v,de),$l(M,G,2,ee-se,v,de),$l(M,G,3,ee-ue,v,de)}function fl(v,S,M,G,ee){Fs(v,S,M,G),ee&&Fs(v,S+16,M,G+4)}function hl(v,S,M,G){Li(v,S+0,M,G,1),Li(v,S+32,M,G+128,1)}function Yr(v,S,M,G){var ee;for(v=v[S+0]+4,ee=0;4>ee;++ee)for(S=0;4>S;++S)Rs(M,G,S,ee,v)}function Vo(v,S,M,G){v[S+0]&&Go(v,S+0,M,G),v[S+16]&&Go(v,S+16,M,G+4),v[S+32]&&Go(v,S+32,M,G+128),v[S+48]&&Go(v,S+48,M,G+128+4)}function Hr(v,S,M,G){var ee,se=s(16);for(ee=0;4>ee;++ee){var ue=v[S+0+ee]+v[S+12+ee],de=v[S+4+ee]+v[S+8+ee],ge=v[S+4+ee]-v[S+8+ee],be=v[S+0+ee]-v[S+12+ee];se[0+ee]=ue+de,se[8+ee]=ue-de,se[4+ee]=be+ge,se[12+ee]=be-ge}for(ee=0;4>ee;++ee)ue=(v=se[0+4*ee]+3)+se[3+4*ee],de=se[1+4*ee]+se[2+4*ee],ge=se[1+4*ee]-se[2+4*ee],be=v-se[3+4*ee],M[G+0]=ue+de>>3,M[G+16]=be+ge>>3,M[G+32]=ue-de>>3,M[G+48]=be-ge>>3,G+=64}function ua(v,S,M){var G,ee=S-32,se=ga,ue=255-v[ee-1];for(G=0;G<M;++G){var de,ge=se,be=ue+v[S-1];for(de=0;de<M;++de)v[S+de]=ge[be+v[ee+de]];S+=32}}function xc(v,S){ua(v,S,4)}function vc(v,S){ua(v,S,8)}function nf(v,S){ua(v,S,16)}function sf(v,S){var M;for(M=0;16>M;++M)n(v,S+32*M,v,S-32,16)}function yc(v,S){var M;for(M=16;0<M;--M)i(v,S,v[S-1],16),S+=32}function Uo(v,S,M){var G;for(G=0;16>G;++G)i(S,M+32*G,v,16)}function Ls(v,S){var M,G=16;for(M=0;16>M;++M)G+=v[S-1+32*M]+v[S+M-32];Uo(G>>5,v,S)}function ss(v,S){var M,G=8;for(M=0;16>M;++M)G+=v[S-1+32*M];Uo(G>>4,v,S)}function Ds(v,S){var M,G=8;for(M=0;16>M;++M)G+=v[S+M-32];Uo(G>>4,v,S)}function fa(v,S){Uo(128,v,S)}function _r(v,S,M){return v+2*S+M+2>>2}function Ra(v,S){var M,G=S-32;for(G=new Uint8Array([_r(v[G-1],v[G+0],v[G+1]),_r(v[G+0],v[G+1],v[G+2]),_r(v[G+1],v[G+2],v[G+3]),_r(v[G+2],v[G+3],v[G+4])]),M=0;4>M;++M)n(v,S+32*M,G,0,G.length)}function _o(v,S){var M=v[S-1],G=v[S-1+32],ee=v[S-1+64],se=v[S-1+96];Fe(v,S+0,16843009*_r(v[S-1-32],M,G)),Fe(v,S+32,16843009*_r(M,G,ee)),Fe(v,S+64,16843009*_r(G,ee,se)),Fe(v,S+96,16843009*_r(ee,se,se))}function Lh(v,S){var M,G=4;for(M=0;4>M;++M)G+=v[S+M-32]+v[S-1+32*M];for(G>>=3,M=0;4>M;++M)i(v,S+32*M,G,4)}function af(v,S){var M=v[S-1+0],G=v[S-1+32],ee=v[S-1+64],se=v[S-1-32],ue=v[S+0-32],de=v[S+1-32],ge=v[S+2-32],be=v[S+3-32];v[S+0+96]=_r(G,ee,v[S-1+96]),v[S+1+96]=v[S+0+64]=_r(M,G,ee),v[S+2+96]=v[S+1+64]=v[S+0+32]=_r(se,M,G),v[S+3+96]=v[S+2+64]=v[S+1+32]=v[S+0+0]=_r(ue,se,M),v[S+3+64]=v[S+2+32]=v[S+1+0]=_r(de,ue,se),v[S+3+32]=v[S+2+0]=_r(ge,de,ue),v[S+3+0]=_r(be,ge,de)}function _i(v,S){var M=v[S+1-32],G=v[S+2-32],ee=v[S+3-32],se=v[S+4-32],ue=v[S+5-32],de=v[S+6-32],ge=v[S+7-32];v[S+0+0]=_r(v[S+0-32],M,G),v[S+1+0]=v[S+0+32]=_r(M,G,ee),v[S+2+0]=v[S+1+32]=v[S+0+64]=_r(G,ee,se),v[S+3+0]=v[S+2+32]=v[S+1+64]=v[S+0+96]=_r(ee,se,ue),v[S+3+32]=v[S+2+64]=v[S+1+96]=_r(se,ue,de),v[S+3+64]=v[S+2+96]=_r(ue,de,ge),v[S+3+96]=_r(de,ge,ge)}function zo(v,S){var M=v[S-1+0],G=v[S-1+32],ee=v[S-1+64],se=v[S-1-32],ue=v[S+0-32],de=v[S+1-32],ge=v[S+2-32],be=v[S+3-32];v[S+0+0]=v[S+1+64]=se+ue+1>>1,v[S+1+0]=v[S+2+64]=ue+de+1>>1,v[S+2+0]=v[S+3+64]=de+ge+1>>1,v[S+3+0]=ge+be+1>>1,v[S+0+96]=_r(ee,G,M),v[S+0+64]=_r(G,M,se),v[S+0+32]=v[S+1+96]=_r(M,se,ue),v[S+1+32]=v[S+2+96]=_r(se,ue,de),v[S+2+32]=v[S+3+96]=_r(ue,de,ge),v[S+3+32]=_r(de,ge,be)}function of(v,S){var M=v[S+0-32],G=v[S+1-32],ee=v[S+2-32],se=v[S+3-32],ue=v[S+4-32],de=v[S+5-32],ge=v[S+6-32],be=v[S+7-32];v[S+0+0]=M+G+1>>1,v[S+1+0]=v[S+0+64]=G+ee+1>>1,v[S+2+0]=v[S+1+64]=ee+se+1>>1,v[S+3+0]=v[S+2+64]=se+ue+1>>1,v[S+0+32]=_r(M,G,ee),v[S+1+32]=v[S+0+96]=_r(G,ee,se),v[S+2+32]=v[S+1+96]=_r(ee,se,ue),v[S+3+32]=v[S+2+96]=_r(se,ue,de),v[S+3+64]=_r(ue,de,ge),v[S+3+96]=_r(de,ge,be)}function $o(v,S){var M=v[S-1+0],G=v[S-1+32],ee=v[S-1+64],se=v[S-1+96];v[S+0+0]=M+G+1>>1,v[S+2+0]=v[S+0+32]=G+ee+1>>1,v[S+2+32]=v[S+0+64]=ee+se+1>>1,v[S+1+0]=_r(M,G,ee),v[S+3+0]=v[S+1+32]=_r(G,ee,se),v[S+3+32]=v[S+1+64]=_r(ee,se,se),v[S+3+64]=v[S+2+64]=v[S+0+96]=v[S+1+96]=v[S+2+96]=v[S+3+96]=se}function bo(v,S){var M=v[S-1+0],G=v[S-1+32],ee=v[S-1+64],se=v[S-1+96],ue=v[S-1-32],de=v[S+0-32],ge=v[S+1-32],be=v[S+2-32];v[S+0+0]=v[S+2+32]=M+ue+1>>1,v[S+0+32]=v[S+2+64]=G+M+1>>1,v[S+0+64]=v[S+2+96]=ee+G+1>>1,v[S+0+96]=se+ee+1>>1,v[S+3+0]=_r(de,ge,be),v[S+2+0]=_r(ue,de,ge),v[S+1+0]=v[S+3+32]=_r(M,ue,de),v[S+1+32]=v[S+3+64]=_r(G,M,ue),v[S+1+64]=v[S+3+96]=_r(ee,G,M),v[S+1+96]=_r(se,ee,G)}function wc(v,S){var M;for(M=0;8>M;++M)n(v,S+32*M,v,S-32,8)}function Os(v,S){var M;for(M=0;8>M;++M)i(v,S,v[S-1],8),S+=32}function Gs(v,S,M){var G;for(G=0;8>G;++G)i(S,M+32*G,v,8)}function Fa(v,S){var M,G=8;for(M=0;8>M;++M)G+=v[S+M-32]+v[S-1+32*M];Gs(G>>4,v,S)}function dl(v,S){var M,G=4;for(M=0;8>M;++M)G+=v[S+M-32];Gs(G>>3,v,S)}function In(v,S){var M,G=4;for(M=0;8>M;++M)G+=v[S-1+32*M];Gs(G>>3,v,S)}function hu(v,S){Gs(128,v,S)}function qo(v,S,M){var G=v[S-M],ee=v[S+0],se=3*(ee-G)+yl[1020+v[S-2*M]-v[S+M]],ue=df[112+(se+4>>3)];v[S-M]=ga[255+G+df[112+(se+3>>3)]],v[S+0]=ga[255+ee-ue]}function uo(v,S,M,G){var ee=v[S+0],se=v[S+M];return ko[255+v[S-2*M]-v[S-M]]>G||ko[255+se-ee]>G}function pl(v,S,M,G){return 4*ko[255+v[S-M]-v[S+0]]+ko[255+v[S-2*M]-v[S+M]]<=G}function ml(v,S,M,G,ee){var se=v[S-3*M],ue=v[S-2*M],de=v[S-M],ge=v[S+0],be=v[S+M],De=v[S+2*M],Ge=v[S+3*M];return 4*ko[255+de-ge]+ko[255+ue-be]>G?0:ko[255+v[S-4*M]-se]<=ee&&ko[255+se-ue]<=ee&&ko[255+ue-de]<=ee&&ko[255+Ge-De]<=ee&&ko[255+De-be]<=ee&&ko[255+be-ge]<=ee}function js(v,S,M,G){var ee=2*G+1;for(G=0;16>G;++G)pl(v,S+G,M,ee)&&qo(v,S+G,M)}function Eo(v,S,M,G){var ee=2*G+1;for(G=0;16>G;++G)pl(v,S+G*M,1,ee)&&qo(v,S+G*M,1)}function ws(v,S,M,G){var ee;for(ee=3;0<ee;--ee)js(v,S+=4*M,M,G)}function Hl(v,S,M,G){var ee;for(ee=3;0<ee;--ee)Eo(v,S+=4,M,G)}function _s(v,S,M,G,ee,se,ue,de){for(se=2*se+1;0<ee--;){if(ml(v,S,M,se,ue))if(uo(v,S,M,de))qo(v,S,M);else{var ge=v,be=S,De=M,Ge=ge[be-2*De],Se=ge[be-De],Ve=ge[be+0],qe=ge[be+De],pt=ge[be+2*De],Qe=27*(dt=yl[1020+3*(Ve-Se)+yl[1020+Ge-qe]])+63>>7,ct=18*dt+63>>7,dt=9*dt+63>>7;ge[be-3*De]=ga[255+ge[be-3*De]+dt],ge[be-2*De]=ga[255+Ge+ct],ge[be-De]=ga[255+Se+Qe],ge[be+0]=ga[255+Ve-Qe],ge[be+De]=ga[255+qe-ct],ge[be+2*De]=ga[255+pt-dt]}S+=G}}function as(v,S,M,G,ee,se,ue,de){for(se=2*se+1;0<ee--;){if(ml(v,S,M,se,ue))if(uo(v,S,M,de))qo(v,S,M);else{var ge=v,be=S,De=M,Ge=ge[be-De],Se=ge[be+0],Ve=ge[be+De],qe=df[112+(4+(pt=3*(Se-Ge))>>3)],pt=df[112+(pt+3>>3)],Qe=qe+1>>1;ge[be-2*De]=ga[255+ge[be-2*De]+Qe],ge[be-De]=ga[255+Ge+pt],ge[be+0]=ga[255+Se-qe],ge[be+De]=ga[255+Ve-Qe]}S+=G}}function L(v,S,M,G,ee,se){_s(v,S,M,1,16,G,ee,se)}function Z(v,S,M,G,ee,se){_s(v,S,1,M,16,G,ee,se)}function Ee(v,S,M,G,ee,se){var ue;for(ue=3;0<ue;--ue)as(v,S+=4*M,M,1,16,G,ee,se)}function Le(v,S,M,G,ee,se){var ue;for(ue=3;0<ue;--ue)as(v,S+=4,1,M,16,G,ee,se)}function ze(v,S,M,G,ee,se,ue,de){_s(v,S,ee,1,8,se,ue,de),_s(M,G,ee,1,8,se,ue,de)}function gt(v,S,M,G,ee,se,ue,de){_s(v,S,1,ee,8,se,ue,de),_s(M,G,1,ee,8,se,ue,de)}function yt(v,S,M,G,ee,se,ue,de){as(v,S+4*ee,ee,1,8,se,ue,de),as(M,G+4*ee,ee,1,8,se,ue,de)}function Kt(v,S,M,G,ee,se,ue,de){as(v,S+4,1,ee,8,se,ue,de),as(M,G+4,1,ee,8,se,ue,de)}function Zt(){this.ba=new ur,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new mr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function vr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ar(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function nn(){this.ua=0,this.Wa=new rt,this.vb=new rt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new _e,this.yc=new B}function Hn(){this.xb=this.a=0,this.l=new En,this.ca=new ur,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new U,this.Pb=0,this.wd=new U,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new nn,this.ab=0,this.gc=a(4,Ar),this.Oc=0}function ei(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new En,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function hn(v,S,M,G,ee,se,ue){for(v=v==null?0:v[S+0],S=0;S<ue;++S)ee[se+S]=v+M[G+S]&255,v=ee[se+S]}function bi(v,S,M,G,ee,se,ue){var de;if(v==null)hn(null,null,M,G,ee,se,ue);else for(de=0;de<ue;++de)ee[se+de]=v[S+de]+M[G+de]&255}function Pn(v,S,M,G,ee,se,ue){if(v==null)hn(null,null,M,G,ee,se,ue);else{var de,ge=v[S+0],be=ge,De=ge;for(de=0;de<ue;++de)be=De+(ge=v[S+de])-be,De=M[G+de]+(-256&be?0>be?0:255:be)&255,be=ge,ee[se+de]=De}}function Hi(v,S,M,G){var ee=S.width,se=S.o;if(e(v!=null&&S!=null),0>M||0>=G||M+G>se)return null;if(!v.Cc){if(v.ga==null){var ue;if(v.ga=new ei,(ue=v.ga==null)||(ue=S.width*S.o,e(v.Gb.length==0),v.Gb=s(ue),v.Uc=0,v.Gb==null?ue=0:(v.mb=v.Gb,v.nb=v.Uc,v.rc=null,ue=1),ue=!ue),!ue){ue=v.ga;var de=v.Fa,ge=v.P,be=v.qc,De=v.mb,Ge=v.nb,Se=ge+1,Ve=be-1,qe=ue.l;if(e(de!=null&&De!=null&&S!=null),Xs[0]=null,Xs[1]=hn,Xs[2]=bi,Xs[3]=Pn,ue.ca=De,ue.tb=Ge,ue.c=S.width,ue.i=S.height,e(0<ue.c&&0<ue.i),1>=be)S=0;else if(ue.$a=3&de[ge+0],ue.Z=de[ge+0]>>2&3,ue.Lc=de[ge+0]>>4&3,ge=de[ge+0]>>6&3,0>ue.$a||1<ue.$a||4<=ue.Z||1<ue.Lc||ge)S=0;else if(qe.put=ir,qe.ac=Cn,qe.bc=qr,qe.ma=ue,qe.width=S.width,qe.height=S.height,qe.Da=S.Da,qe.v=S.v,qe.va=S.va,qe.j=S.j,qe.o=S.o,ue.$a)e:{e(ue.$a==1),S=Ke();t:for(;;){if(S==null){S=0;break e}if(e(ue!=null),ue.mc=S,S.c=ue.c,S.i=ue.i,S.l=ue.l,S.l.ma=ue,S.l.width=ue.c,S.l.height=ue.i,S.a=0,H(S.m,de,Se,Ve),!Xe(ue.c,ue.i,1,S,null)||(S.ab==1&&S.gc[0].hc==3&&ye(S.s)?(ue.ic=1,de=S.c*S.i,S.Ta=null,S.Ua=0,S.V=s(de),S.Ba=0,S.V==null?(S.a=1,S=0):S=1):(ue.ic=0,S=Je(S,ue.c)),!S))break t;S=1;break e}ue.mc=null,S=0}else S=Ve>=ue.c*ue.i;ue=!S}if(ue)return null;v.ga.Lc!=1?v.Ga=0:G=se-M}e(v.ga!=null),e(M+G<=se);e:{if(S=(de=v.ga).c,se=de.l.o,de.$a==0){if(Se=v.rc,Ve=v.Vc,qe=v.Fa,ge=v.P+1+M*S,be=v.mb,De=v.nb+M*S,e(ge<=v.P+v.qc),de.Z!=0)for(e(Xs[de.Z]!=null),ue=0;ue<G;++ue)Xs[de.Z](Se,Ve,qe,ge,be,De,S),Se=be,Ve=De,De+=S,ge+=S;else for(ue=0;ue<G;++ue)n(be,De,qe,ge,S),Se=be,Ve=De,De+=S,ge+=S;v.rc=Se,v.Vc=Ve}else{if(e(de.mc!=null),S=M+G,e((ue=de.mc)!=null),e(S<=ue.i),ue.C>=S)S=1;else if(de.ic||Ri(),de.ic){de=ue.V,Se=ue.Ba,Ve=ue.c;var pt=ue.i,Qe=(qe=1,ge=ue.$/Ve,be=ue.$%Ve,De=ue.m,Ge=ue.s,ue.$),ct=Ve*pt,dt=Ve*S,xt=Ge.wc,vt=Qe<dt?ne(Ge,be,ge):null;e(Qe<=ct),e(S<=pt),e(ye(Ge));t:for(;;){for(;!De.h&&Qe<dt;){if(be&xt||(vt=ne(Ge,be,ge)),e(vt!=null),pe(De),256>(pt=bn(vt.G[0],vt.H[0],De)))de[Se+Qe]=pt,++Qe,++be>=Ve&&(be=0,++ge<=S&&!(ge%16)&&Ne(ue,ge));else{if(!(280>pt)){qe=0;break t}pt=Dn(pt-256,De);var hr,er=bn(vt.G[4],vt.H[4],De);if(pe(De),!(Qe>=(er=qi(Ve,er=Dn(er,De)))&&ct-Qe>=pt)){qe=0;break t}for(hr=0;hr<pt;++hr)de[Se+Qe+hr]=de[Se+Qe+hr-er];for(Qe+=pt,be+=pt;be>=Ve;)be-=Ve,++ge<=S&&!(ge%16)&&Ne(ue,ge);Qe<dt&&be&xt&&(vt=ne(Ge,be,ge))}e(De.h==Y(De))}Ne(ue,ge>S?S:ge);break t}!qe||De.h&&Qe<ct?(qe=0,ue.a=De.h?5:3):ue.$=Qe,S=qe}else S=He(ue,ue.V,ue.Ba,ue.c,ue.i,S,_t);if(!S){G=0;break e}}M+G>=se&&(v.Cc=1),G=1}if(!G)return null;if(v.Cc&&((G=v.ga)!=null&&(G.mc=null),v.ga=null,0<v.Ga))return alert("todo:WebPDequantizeLevels"),null}return v.nb+M*ee}function So(v,S,M,G,ee,se){for(;0<ee--;){var ue,de=v,ge=S+(M?1:0),be=v,De=S+(M?0:3);for(ue=0;ue<G;++ue){var Ge=be[De+4*ue];Ge!=255&&(Ge*=32897,de[ge+4*ue+0]=de[ge+4*ue+0]*Ge>>23,de[ge+4*ue+1]=de[ge+4*ue+1]*Ge>>23,de[ge+4*ue+2]=de[ge+4*ue+2]*Ge>>23)}S+=se}}function Ho(v,S,M,G,ee){for(;0<G--;){var se;for(se=0;se<M;++se){var ue=v[S+2*se+0],de=15&(be=v[S+2*se+1]),ge=4369*de,be=(240&be|be>>4)*ge>>16;v[S+2*se+0]=(240&ue|ue>>4)*ge>>16&240|(15&ue|ue<<4)*ge>>16>>4&15,v[S+2*se+1]=240&be|de}S+=ee}}function du(v,S,M,G,ee,se,ue,de){var ge,be,De=255;for(be=0;be<ee;++be){for(ge=0;ge<G;++ge){var Ge=v[S+ge];se[ue+4*ge]=Ge,De&=Ge}S+=M,ue+=de}return De!=255}function Wl(v,S,M,G,ee){var se;for(se=0;se<ee;++se)M[G+se]=v[S+se]>>8}function Ri(){xu=So,mm=Ho,jh=du,gm=Wl}function La(v,S,M){T[v]=function(G,ee,se,ue,de,ge,be,De,Ge,Se,Ve,qe,pt,Qe,ct,dt,xt){var vt,hr=xt-1>>1,er=de[ge+0]|be[De+0]<<16,Or=Ge[Se+0]|Ve[qe+0]<<16;e(G!=null);var sr=3*er+Or+131074>>2;for(S(G[ee+0],255&sr,sr>>16,pt,Qe),se!=null&&(sr=3*Or+er+131074>>2,S(se[ue+0],255&sr,sr>>16,ct,dt)),vt=1;vt<=hr;++vt){var Jr=de[ge+vt]|be[De+vt]<<16,Si=Ge[Se+vt]|Ve[qe+vt]<<16,jr=er+Jr+Or+Si+524296,tr=jr+2*(Jr+Or)>>3;sr=tr+er>>1,er=(jr=jr+2*(er+Si)>>3)+Jr>>1,S(G[ee+2*vt-1],255&sr,sr>>16,pt,Qe+(2*vt-1)*M),S(G[ee+2*vt-0],255&er,er>>16,pt,Qe+(2*vt-0)*M),se!=null&&(sr=jr+Or>>1,er=tr+Si>>1,S(se[ue+2*vt-1],255&sr,sr>>16,ct,dt+(2*vt-1)*M),S(se[ue+2*vt+0],255&er,er>>16,ct,dt+(2*vt+0)*M)),er=Jr,Or=Si}1&xt||(sr=3*er+Or+131074>>2,S(G[ee+xt-1],255&sr,sr>>16,pt,Qe+(xt-1)*M),se!=null&&(sr=3*Or+er+131074>>2,S(se[ue+xt-1],255&sr,sr>>16,ct,dt+(xt-1)*M)))}}function _c(){Va[u0]=Ly,Va[Tc]=Ac,Va[Kg]=Dy,Va[Mh]=xf,Va[Bh]=_u,Va[On]=qh,Va[f0]=km,Va[pf]=Ac,Va[vu]=xf,Va[Vh]=_u,Va[Uh]=qh}function ha(v){return v&-16384?0>v?0:255:v>>Nc}function y(v,S){return ha((19077*v>>8)+(26149*S>>8)-14234)}function V(v,S,M){return ha((19077*v>>8)-(6419*S>>8)-(13320*M>>8)+8708)}function Q(v,S){return ha((19077*v>>8)+(33050*S>>8)-17685)}function me(v,S,M,G,ee){G[ee+0]=y(v,M),G[ee+1]=V(v,S,M),G[ee+2]=Q(v,S)}function $e(v,S,M,G,ee){G[ee+0]=Q(v,S),G[ee+1]=V(v,S,M),G[ee+2]=y(v,M)}function at(v,S,M,G,ee){var se=V(v,S,M);S=se<<3&224|Q(v,S)>>3,G[ee+0]=248&y(v,M)|se>>5,G[ee+1]=S}function It(v,S,M,G,ee){var se=240&Q(v,S)|15;G[ee+0]=240&y(v,M)|V(v,S,M)>>4,G[ee+1]=se}function dn(v,S,M,G,ee){G[ee+0]=255,me(v,S,M,G,ee+1)}function si(v,S,M,G,ee){$e(v,S,M,G,ee),G[ee+3]=255}function Gr(v,S,M,G,ee){me(v,S,M,G,ee),G[ee+3]=255}function Qr(v,S){return 0>v?0:v>S?S:v}function gn(v,S,M){T[v]=function(G,ee,se,ue,de,ge,be,De,Ge){for(var Se=De+(-2&Ge)*M;De!=Se;)S(G[ee+0],se[ue+0],de[ge+0],be,De),S(G[ee+1],se[ue+0],de[ge+0],be,De+M),ee+=2,++ue,++ge,De+=2*M;1&Ge&&S(G[ee+0],se[ue+0],de[ge+0],be,De)}}function Ks(v,S,M){return M==0?v==0?S==0?6:5:S==0?4:0:M}function Ms(v,S,M,G,ee){switch(v>>>30){case 3:Li(S,M,G,ee,0);break;case 2:os(S,M,G,ee);break;case 1:Go(S,M,G,ee)}}function Da(v,S){var M,G,ee=S.M,se=S.Nb,ue=v.oc,de=v.pc+40,ge=v.oc,be=v.pc+584,De=v.oc,Ge=v.pc+600;for(M=0;16>M;++M)ue[de+32*M-1]=129;for(M=0;8>M;++M)ge[be+32*M-1]=129,De[Ge+32*M-1]=129;for(0<ee?ue[de-1-32]=ge[be-1-32]=De[Ge-1-32]=129:(i(ue,de-32-1,127,21),i(ge,be-32-1,127,9),i(De,Ge-32-1,127,9)),G=0;G<v.za;++G){var Se=S.ya[S.aa+G];if(0<G){for(M=-1;16>M;++M)n(ue,de+32*M-4,ue,de+32*M+12,4);for(M=-1;8>M;++M)n(ge,be+32*M-4,ge,be+32*M+4,4),n(De,Ge+32*M-4,De,Ge+32*M+4,4)}var Ve=v.Gd,qe=v.Hd+G,pt=Se.ad,Qe=Se.Hc;if(0<ee&&(n(ue,de-32,Ve[qe].y,0,16),n(ge,be-32,Ve[qe].f,0,8),n(De,Ge-32,Ve[qe].ea,0,8)),Se.Za){var ct=ue,dt=de-32+16;for(0<ee&&(G>=v.za-1?i(ct,dt,Ve[qe].y[15],4):n(ct,dt,Ve[qe+1].y,0,4)),M=0;4>M;M++)ct[dt+128+M]=ct[dt+256+M]=ct[dt+384+M]=ct[dt+0+M];for(M=0;16>M;++M,Qe<<=2)ct=ue,dt=de+Tm[M],To[Se.Ob[M]](ct,dt),Ms(Qe,pt,16*+M,ct,dt)}else if(ct=Ks(G,ee,Se.Ob[0]),xa[ct](ue,de),Qe!=0)for(M=0;16>M;++M,Qe<<=2)Ms(Qe,pt,16*+M,ue,de+Tm[M]);for(M=Se.Gc,ct=Ks(G,ee,Se.Dd),Ba[ct](ge,be),Ba[ct](De,Ge),Qe=pt,ct=ge,dt=be,255&(Se=0|M)&&(170&Se?vl(Qe,256,ct,dt):ff(Qe,256,ct,dt)),Se=De,Qe=Ge,255&(M>>=8)&&(170&M?vl(pt,320,Se,Qe):ff(pt,320,Se,Qe)),ee<v.Ub-1&&(n(Ve[qe].y,0,ue,de+480,16),n(Ve[qe].f,0,ge,be+224,8),n(Ve[qe].ea,0,De,Ge+224,8)),M=8*se*v.B,Ve=v.sa,qe=v.ta+16*G+16*se*v.R,pt=v.qa,Se=v.ra+8*G+M,Qe=v.Ha,ct=v.Ia+8*G+M,M=0;16>M;++M)n(Ve,qe+M*v.R,ue,de+32*M,16);for(M=0;8>M;++M)n(pt,Se+M*v.B,ge,be+32*M,8),n(Qe,ct+M*v.B,De,Ge+32*M,8)}}function Wo(v,S,M,G,ee,se,ue,de,ge){var be=[0],De=[0],Ge=0,Se=ge!=null?ge.kd:0,Ve=ge??new vr;if(v==null||12>M)return 7;Ve.data=v,Ve.w=S,Ve.ha=M,S=[S],M=[M],Ve.gb=[Ve.gb];e:{var qe=S,pt=M,Qe=Ve.gb;if(e(v!=null),e(pt!=null),e(Qe!=null),Qe[0]=0,12<=pt[0]&&!r(v,qe[0],"RIFF")){if(r(v,qe[0]+8,"WEBP")){Qe=3;break e}var ct=Re(v,qe[0]+4);if(12>ct||4294967286<ct){Qe=3;break e}if(Se&&ct>pt[0]-8){Qe=7;break e}Qe[0]=ct,qe[0]+=12,pt[0]-=12}Qe=0}if(Qe!=0)return Qe;for(ct=0<Ve.gb[0],M=M[0];;){e:{var dt=v;pt=S,Qe=M;var xt=be,vt=De,hr=qe=[0];if((sr=Ge=[Ge])[0]=0,8>Qe[0])Qe=7;else{if(!r(dt,pt[0],"VP8X")){if(Re(dt,pt[0]+4)!=10){Qe=3;break e}if(18>Qe[0]){Qe=7;break e}var er=Re(dt,pt[0]+8),Or=1+Ze(dt,pt[0]+12);if(2147483648<=Or*(dt=1+Ze(dt,pt[0]+15))){Qe=3;break e}hr!=null&&(hr[0]=er),xt!=null&&(xt[0]=Or),vt!=null&&(vt[0]=dt),pt[0]+=18,Qe[0]-=18,sr[0]=1}Qe=0}}if(Ge=Ge[0],qe=qe[0],Qe!=0)return Qe;if(pt=!!(2&qe),!ct&&Ge)return 3;if(se!=null&&(se[0]=!!(16&qe)),ue!=null&&(ue[0]=pt),de!=null&&(de[0]=0),ue=be[0],qe=De[0],Ge&&pt&&ge==null){Qe=0;break}if(4>M){Qe=7;break}if(ct&&Ge||!ct&&!Ge&&!r(v,S[0],"ALPH")){M=[M],Ve.na=[Ve.na],Ve.P=[Ve.P],Ve.Sa=[Ve.Sa];e:{er=v,Qe=S,ct=M;var sr=Ve.gb;xt=Ve.na,vt=Ve.P,hr=Ve.Sa,Or=22,e(er!=null),e(ct!=null),dt=Qe[0];var Jr=ct[0];for(e(xt!=null),e(hr!=null),xt[0]=null,vt[0]=null,hr[0]=0;;){if(Qe[0]=dt,ct[0]=Jr,8>Jr){Qe=7;break e}var Si=Re(er,dt+4);if(4294967286<Si){Qe=3;break e}var jr=8+Si+1&-2;if(Or+=jr,0<sr&&Or>sr){Qe=3;break e}if(!r(er,dt,"VP8 ")||!r(er,dt,"VP8L")){Qe=0;break e}if(Jr[0]<jr){Qe=7;break e}r(er,dt,"ALPH")||(xt[0]=er,vt[0]=dt+8,hr[0]=Si),dt+=jr,Jr-=jr}}if(M=M[0],Ve.na=Ve.na[0],Ve.P=Ve.P[0],Ve.Sa=Ve.Sa[0],Qe!=0)break}M=[M],Ve.Ja=[Ve.Ja],Ve.xa=[Ve.xa];e:if(sr=v,Qe=S,ct=M,xt=Ve.gb[0],vt=Ve.Ja,hr=Ve.xa,er=Qe[0],dt=!r(sr,er,"VP8 "),Or=!r(sr,er,"VP8L"),e(sr!=null),e(ct!=null),e(vt!=null),e(hr!=null),8>ct[0])Qe=7;else{if(dt||Or){if(sr=Re(sr,er+4),12<=xt&&sr>xt-12){Qe=3;break e}if(Se&&sr>ct[0]-8){Qe=7;break e}vt[0]=sr,Qe[0]+=8,ct[0]-=8,hr[0]=Or}else hr[0]=5<=ct[0]&&sr[er+0]==47&&!(sr[er+4]>>5),vt[0]=ct[0];Qe=0}if(M=M[0],Ve.Ja=Ve.Ja[0],Ve.xa=Ve.xa[0],S=S[0],Qe!=0)break;if(4294967286<Ve.Ja)return 3;if(de==null||pt||(de[0]=Ve.xa?2:1),ue=[ue],qe=[qe],Ve.xa){if(5>M){Qe=7;break}de=ue,Se=qe,pt=se,v==null||5>M?v=0:5<=M&&v[S+0]==47&&!(v[S+4]>>5)?(ct=[0],sr=[0],xt=[0],H(vt=new U,v,S,M),is(vt,ct,sr,xt)?(de!=null&&(de[0]=ct[0]),Se!=null&&(Se[0]=sr[0]),pt!=null&&(pt[0]=xt[0]),v=1):v=0):v=0}else{if(10>M){Qe=7;break}de=qe,v==null||10>M||!fu(v,S+3,M-3)?v=0:(Se=v[S+0]|v[S+1]<<8|v[S+2]<<16,pt=16383&(v[S+7]<<8|v[S+6]),v=16383&(v[S+9]<<8|v[S+8]),1&Se||3<(Se>>1&7)||!(Se>>4&1)||Se>>5>=Ve.Ja||!pt||!v?v=0:(ue&&(ue[0]=pt),de&&(de[0]=v),v=1))}if(!v||(ue=ue[0],qe=qe[0],Ge&&(be[0]!=ue||De[0]!=qe)))return 3;ge!=null&&(ge[0]=Ve,ge.offset=S-ge.w,e(4294967286>S-ge.w),e(ge.offset==ge.ha-M));break}return Qe==0||Qe==7&&Ge&&ge==null?(se!=null&&(se[0]|=Ve.na!=null&&0<Ve.na.length),G!=null&&(G[0]=ue),ee!=null&&(ee[0]=qe),0):Qe}function da(v,S,M){var G=S.width,ee=S.height,se=0,ue=0,de=G,ge=ee;if(S.Da=v!=null&&0<v.Da,S.Da&&(de=v.cd,ge=v.bd,se=v.v,ue=v.j,11>M||(se&=-2,ue&=-2),0>se||0>ue||0>=de||0>=ge||se+de>G||ue+ge>ee))return 0;if(S.v=se,S.j=ue,S.va=se+de,S.o=ue+ge,S.U=de,S.T=ge,S.da=v!=null&&0<v.da,S.da){if(!lt(de,ge,M=[v.ib],se=[v.hb]))return 0;S.ib=M[0],S.hb=se[0]}return S.ob=v!=null&&v.ob,S.Kb=v==null||!v.Sd,S.da&&(S.ob=S.ib<3*G/4&&S.hb<3*ee/4,S.Kb=0),1}function pa(v){if(v==null)return 2;if(11>v.S){var S=v.f.RGBA;S.fb+=(v.height-1)*S.A,S.A=-S.A}else S=v.f.kb,v=v.height,S.O+=(v-1)*S.fa,S.fa=-S.fa,S.N+=(v-1>>1)*S.Ab,S.Ab=-S.Ab,S.W+=(v-1>>1)*S.Db,S.Db=-S.Db,S.F!=null&&(S.J+=(v-1)*S.lb,S.lb=-S.lb);return 0}function bc(v,S,M,G){if(G==null||0>=v||0>=S)return 2;if(M!=null){if(M.Da){var ee=M.cd,se=M.bd,ue=-2&M.v,de=-2&M.j;if(0>ue||0>de||0>=ee||0>=se||ue+ee>v||de+se>S)return 2;v=ee,S=se}if(M.da){if(!lt(v,S,ee=[M.ib],se=[M.hb]))return 2;v=ee[0],S=se[0]}}G.width=v,G.height=S;e:{var ge=G.width,be=G.height;if(v=G.S,0>=ge||0>=be||!(v>=u0&&13>v))v=2;else{if(0>=G.Rd&&G.sd==null){ue=se=ee=S=0;var De=(de=ge*Hh[v])*be;if(11>v||(se=(be+1)/2*(S=(ge+1)/2),v==12&&(ue=(ee=ge)*be)),(be=s(De+2*se+ue))==null){v=1;break e}G.sd=be,11>v?((ge=G.f.RGBA).eb=be,ge.fb=0,ge.A=de,ge.size=De):((ge=G.f.kb).y=be,ge.O=0,ge.fa=de,ge.Fd=De,ge.f=be,ge.N=0+De,ge.Ab=S,ge.Cd=se,ge.ea=be,ge.W=0+De+se,ge.Db=S,ge.Ed=se,v==12&&(ge.F=be,ge.J=0+De+2*se),ge.Tc=ue,ge.lb=ee)}if(S=1,ee=G.S,se=G.width,ue=G.height,ee>=u0&&13>ee)if(11>ee)v=G.f.RGBA,S&=(de=Math.abs(v.A))*(ue-1)+se<=v.size,S&=de>=se*Hh[ee],S&=v.eb!=null;else{v=G.f.kb,de=(se+1)/2,De=(ue+1)/2,ge=Math.abs(v.fa),be=Math.abs(v.Ab);var Ge=Math.abs(v.Db),Se=Math.abs(v.lb),Ve=Se*(ue-1)+se;S&=ge*(ue-1)+se<=v.Fd,S&=be*(De-1)+de<=v.Cd,S=(S&=Ge*(De-1)+de<=v.Ed)&ge>=se&be>=de&Ge>=de,S&=v.y!=null,S&=v.f!=null,S&=v.ea!=null,ee==12&&(S&=Se>=se,S&=Ve<=v.Tc,S&=v.F!=null)}else S=0;v=S?0:2}}return v!=0||M!=null&&M.fd&&(v=pa(G)),v}var ma=64,Ec=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Dh=24,Sc=32,Ei=8,a0=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ft("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(v){return v},T.Predictor2=function(v,S,M){return S[M+0]},T.Predictor3=function(v,S,M){return S[M+1]},T.Predictor4=function(v,S,M){return S[M-1]},T.Predictor5=function(v,S,M){return Be(Be(v,S[M+1]),S[M+0])},T.Predictor6=function(v,S,M){return Be(v,S[M-1])},T.Predictor7=function(v,S,M){return Be(v,S[M+0])},T.Predictor8=function(v,S,M){return Be(S[M-1],S[M+0])},T.Predictor9=function(v,S,M){return Be(S[M+0],S[M+1])},T.Predictor10=function(v,S,M){return Be(Be(v,S[M-1]),Be(S[M+0],S[M+1]))},T.Predictor11=function(v,S,M){var G=S[M+0];return 0>=ht(G>>24&255,v>>24&255,(S=S[M-1])>>24&255)+ht(G>>16&255,v>>16&255,S>>16&255)+ht(G>>8&255,v>>8&255,S>>8&255)+ht(255&G,255&v,255&S)?G:v},T.Predictor12=function(v,S,M){var G=S[M+0];return(tt((v>>24&255)+(G>>24&255)-((S=S[M-1])>>24&255))<<24|tt((v>>16&255)+(G>>16&255)-(S>>16&255))<<16|tt((v>>8&255)+(G>>8&255)-(S>>8&255))<<8|tt((255&v)+(255&G)-(255&S)))>>>0},T.Predictor13=function(v,S,M){var G=S[M-1];return(ot((v=Be(v,S[M+0]))>>24&255,G>>24&255)<<24|ot(v>>16&255,G>>16&255)<<16|ot(v>>8&255,G>>8&255)<<8|ot(255&v,255&G))>>>0};var Oa=T.PredictorAdd0;T.PredictorAdd1=Pt,ft("Predictor2","PredictorAdd2"),ft("Predictor3","PredictorAdd3"),ft("Predictor4","PredictorAdd4"),ft("Predictor5","PredictorAdd5"),ft("Predictor6","PredictorAdd6"),ft("Predictor7","PredictorAdd7"),ft("Predictor8","PredictorAdd8"),ft("Predictor9","PredictorAdd9"),ft("Predictor10","PredictorAdd10"),ft("Predictor11","PredictorAdd11"),ft("Predictor12","PredictorAdd12"),ft("Predictor13","PredictorAdd13");var ja=T.PredictorAdd2;At("ColorIndexInverseTransform","MapARGB","32b",function(v){return v>>8&255},function(v){return v}),At("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(v){return v},function(v){return v>>8&255});var lf,kc=T.ColorIndexInverseTransform,cf=T.MapARGB,pu=T.VP8LColorIndexInverseTransformAlpha,Gl=T.MapAlpha,Kl=T.VP8LPredictorsAdd=[];Kl.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var gl,uf,Ma,xl,Wn,Gn,Fi,Li,os,vl,Go,ff,hm,dm,o0,Wg,Gg,mu,l0,hf,c0,pm,Oh,gu,xu,mm,jh,gm,xm=s(511),vm=s(2041),ym=s(225),wm=s(767),_m=0,yl=vm,df=ym,ga=wm,ko=xm,u0=0,Tc=1,Kg=2,Mh=3,Bh=4,On=5,f0=6,pf=7,vu=8,Vh=9,Uh=10,zh=[2,3,7],h0=[3,3,11],yu=[280,256,256,256,40],Xg=[0,1,1,1,0],Iy=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Py=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Yg=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],d0=8,mf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],$h=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],wu=null,bm=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Em=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Qg=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Jg=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ry=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Fy=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Sm=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],xa=[],To=[],Ba=[],wl=1,gf=2,Xs=[],Va=[];La("UpsampleRgbLinePair",me,3),La("UpsampleBgrLinePair",$e,3),La("UpsampleRgbaLinePair",Gr,4),La("UpsampleBgraLinePair",si,4),La("UpsampleArgbLinePair",dn,4),La("UpsampleRgba4444LinePair",It,2),La("UpsampleRgb565LinePair",at,2);var Ly=T.UpsampleRgbLinePair,Dy=T.UpsampleBgrLinePair,Ac=T.UpsampleRgbaLinePair,xf=T.UpsampleBgraLinePair,_u=T.UpsampleArgbLinePair,qh=T.UpsampleRgba4444LinePair,km=T.UpsampleRgb565LinePair,Xl=16,Ko=1<<Xl-1,An=-227,Rn=482,Nc=6,Bs=0,Ua=s(256),bu=s(256),vf=s(256),za=s(256),p0=s(Rn-An),Zg=s(Rn-An);gn("YuvToRgbRow",me,3),gn("YuvToBgrRow",$e,3),gn("YuvToRgbaRow",Gr,4),gn("YuvToBgraRow",si,4),gn("YuvToArgbRow",dn,4),gn("YuvToRgba4444Row",It,2),gn("YuvToRgb565Row",at,2);var Tm=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Eu=[0,2,8],ex=[8,7,6,4,4,2,2,2,1,1,1,1],Yl=1;this.WebPDecodeRGBA=function(v,S,M,G,ee){var se=Tc,ue=new Zt,de=new ur;ue.ba=de,de.S=se,de.width=[de.width],de.height=[de.height];var ge=de.width,be=de.height,De=new Jt;if(De==null||v==null)var Ge=2;else e(De!=null),Ge=Wo(v,S,M,De.width,De.height,De.Pd,De.Qd,De.format,null);if(Ge!=0?ge=0:(ge!=null&&(ge[0]=De.width[0]),be!=null&&(be[0]=De.height[0]),ge=1),ge){de.width=de.width[0],de.height=de.height[0],G!=null&&(G[0]=de.width),ee!=null&&(ee[0]=de.height);e:{if(G=new En,(ee=new vr).data=v,ee.w=S,ee.ha=M,ee.kd=1,S=[0],e(ee!=null),((v=Wo(ee.data,ee.w,ee.ha,null,null,null,S,null,ee))==0||v==7)&&S[0]&&(v=4),(S=v)==0){if(e(ue!=null),G.data=ee.data,G.w=ee.w+ee.offset,G.ha=ee.ha-ee.offset,G.put=ir,G.ac=Cn,G.bc=qr,G.ma=ue,ee.xa){if((v=Ke())==null){ue=1;break e}if((function(Se,Ve){var qe=[0],pt=[0],Qe=[0];t:for(;;){if(Se==null)return 0;if(Ve==null)return Se.a=2,0;if(Se.l=Ve,Se.a=0,H(Se.m,Ve.data,Ve.w,Ve.ha),!is(Se.m,qe,pt,Qe)){Se.a=3;break t}if(Se.xb=gf,Ve.width=qe[0],Ve.height=pt[0],!Xe(qe[0],pt[0],1,Se,null))break t;return 1}return e(Se.a!=0),0})(v,G)){if(G=(S=bc(G.width,G.height,ue.Oa,ue.ba))==0){t:{G=v;r:for(;;){if(G==null){G=0;break t}if(e(G.s.yc!=null),e(G.s.Ya!=null),e(0<G.s.Wb),e((M=G.l)!=null),e((ee=M.ma)!=null),G.xb!=0){if(G.ca=ee.ba,G.tb=ee.tb,e(G.ca!=null),!da(ee.Oa,M,Mh)){G.a=2;break r}if(!Je(G,M.width)||M.da)break r;if((M.da||Vt(G.ca.S))&&Ri(),11>G.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),G.ca.f.kb.F!=null&&Ri()),G.Pb&&0<G.s.ua&&G.s.vb.X==null&&!fe(G.s.vb,G.s.Wa.Xa)){G.a=1;break r}G.xb=0}if(!He(G,G.V,G.Ba,G.c,G.i,M.o,ve))break r;ee.Dc=G.Ma,G=1;break t}e(G.a!=0),G=0}G=!G}G&&(S=v.a)}else S=v.a}else{if((v=new uu)==null){ue=1;break e}if(v.Fa=ee.na,v.P=ee.P,v.qc=ee.Sa,zl(v,G)){if((S=bc(G.width,G.height,ue.Oa,ue.ba))==0){if(v.Aa=0,M=ue.Oa,e((ee=v)!=null),M!=null){if(0<(ge=0>(ge=M.Md)?0:100<ge?255:255*ge/100)){for(be=De=0;4>be;++be)12>(Ge=ee.pb[be]).lc&&(Ge.ia=ge*ex[0>Ge.lc?0:Ge.lc]>>3),De|=Ge.ia;De&&(alert("todo:VP8InitRandom"),ee.ia=1)}ee.Ga=M.Id,100<ee.Ga?ee.Ga=100:0>ee.Ga&&(ee.Ga=0)}(function(Se,Ve){if(Se==null)return 0;if(Ve==null)return fi(Se,2,"NULL VP8Io parameter in VP8Decode().");if(!Se.cb&&!zl(Se,Ve))return 0;if(e(Se.cb),Ve.ac==null||Ve.ac(Ve)){Ve.ob&&(Se.L=0);var qe=Eu[Se.L];if(Se.L==2?(Se.yb=0,Se.zb=0):(Se.yb=Ve.v-qe>>4,Se.zb=Ve.j-qe>>4,0>Se.yb&&(Se.yb=0),0>Se.zb&&(Se.zb=0)),Se.Va=Ve.o+15+qe>>4,Se.Hb=Ve.va+15+qe>>4,Se.Hb>Se.za&&(Se.Hb=Se.za),Se.Va>Se.Ub&&(Se.Va=Se.Ub),0<Se.L){var pt=Se.ed;for(qe=0;4>qe;++qe){var Qe;if(Se.Qa.Cb){var ct=Se.Qa.Lb[qe];Se.Qa.Fb||(ct+=pt.Tb)}else ct=pt.Tb;for(Qe=0;1>=Qe;++Qe){var dt=Se.gd[qe][Qe],xt=ct;if(pt.Pc&&(xt+=pt.vd[0],Qe&&(xt+=pt.od[0])),0<(xt=0>xt?0:63<xt?63:xt)){var vt=xt;0<pt.wb&&(vt=4<pt.wb?vt>>2:vt>>1)>9-pt.wb&&(vt=9-pt.wb),1>vt&&(vt=1),dt.dd=vt,dt.tc=2*xt+vt,dt.ld=40<=xt?2:15<=xt?1:0}else dt.tc=0;dt.La=Qe}}}qe=0}else fi(Se,6,"Frame setup failed"),qe=Se.a;if(qe=qe==0){if(qe){Se.$c=0,0<Se.Aa||(Se.Ic=Yl);t:{qe=Se.Ic,pt=4*(vt=Se.za);var hr=32*vt,er=vt+1,Or=0<Se.L?vt*(0<Se.Aa?2:1):0,sr=(Se.Aa==2?2:1)*vt;if((dt=pt+832+(Qe=3*(16*qe+Eu[Se.L])/2*hr)+(ct=Se.Fa!=null&&0<Se.Fa.length?Se.Kc.c*Se.Kc.i:0))!=dt)qe=0;else{if(dt>Se.Vb){if(Se.Vb=0,Se.Ec=s(dt),Se.Fc=0,Se.Ec==null){qe=fi(Se,1,"no memory during frame initialization.");break t}Se.Vb=dt}dt=Se.Ec,xt=Se.Fc,Se.Ac=dt,Se.Bc=xt,xt+=pt,Se.Gd=a(hr,ii),Se.Hd=0,Se.rb=a(er+1,fn),Se.sb=1,Se.wa=Or?a(Or,Dr):null,Se.Y=0,Se.D.Nb=0,Se.D.wa=Se.wa,Se.D.Y=Se.Y,0<Se.Aa&&(Se.D.Y+=vt),e(!0),Se.oc=dt,Se.pc=xt,xt+=832,Se.ya=a(sr,Ca),Se.aa=0,Se.D.ya=Se.ya,Se.D.aa=Se.aa,Se.Aa==2&&(Se.D.aa+=vt),Se.R=16*vt,Se.B=8*vt,vt=(hr=Eu[Se.L])*Se.R,hr=hr/2*Se.B,Se.sa=dt,Se.ta=xt+vt,Se.qa=Se.sa,Se.ra=Se.ta+16*qe*Se.R+hr,Se.Ha=Se.qa,Se.Ia=Se.ra+8*qe*Se.B+hr,Se.$c=0,xt+=Qe,Se.mb=ct?dt:null,Se.nb=ct?xt:null,e(xt+ct<=Se.Fc+Se.Vb),Pa(Se),i(Se.Ac,Se.Bc,0,pt),qe=1}}if(qe){if(Ve.ka=0,Ve.y=Se.sa,Ve.O=Se.ta,Ve.f=Se.qa,Ve.N=Se.ra,Ve.ea=Se.Ha,Ve.Vd=Se.Ia,Ve.fa=Se.R,Ve.Rc=Se.B,Ve.F=null,Ve.J=0,!_m){for(qe=-255;255>=qe;++qe)xm[255+qe]=0>qe?-qe:qe;for(qe=-1020;1020>=qe;++qe)vm[1020+qe]=-128>qe?-128:127<qe?127:qe;for(qe=-112;112>=qe;++qe)ym[112+qe]=-16>qe?-16:15<qe?15:qe;for(qe=-255;510>=qe;++qe)wm[255+qe]=0>qe?0:255<qe?255:qe;_m=1}Fi=Hr,Li=fl,vl=hl,Go=Yr,ff=Vo,os=ql,hm=L,dm=Z,o0=ze,Wg=gt,Gg=Ee,mu=Le,l0=yt,hf=Kt,c0=js,pm=Eo,Oh=ws,gu=Hl,To[0]=Lh,To[1]=xc,To[2]=Ra,To[3]=_o,To[4]=af,To[5]=zo,To[6]=_i,To[7]=of,To[8]=bo,To[9]=$o,xa[0]=Ls,xa[1]=nf,xa[2]=sf,xa[3]=yc,xa[4]=ss,xa[5]=Ds,xa[6]=fa,Ba[0]=Fa,Ba[1]=vc,Ba[2]=wc,Ba[3]=Os,Ba[4]=In,Ba[5]=dl,Ba[6]=hu,qe=1}else qe=0}qe&&(qe=(function(Jr,Si){for(Jr.M=0;Jr.M<Jr.Va;++Jr.M){var jr,tr=Jr.Jc[Jr.M&Jr.Xb],zt=Jr.m,Di=Jr;for(jr=0;jr<Di.za;++jr){var Nr=zt,Kr=Di,Kn=Kr.Ac,bs=Kr.Bc+4*jr,Wi=Kr.zc,hi=Kr.ya[Kr.aa+jr];if(Kr.Qa.Bb?hi.$b=ke(Nr,Kr.Pa.jb[0])?2+ke(Nr,Kr.Pa.jb[2]):ke(Nr,Kr.Pa.jb[1]):hi.$b=0,Kr.kc&&(hi.Ad=ke(Nr,Kr.Bd)),hi.Za=!ke(Nr,145)+0,hi.Za){var ls=hi.Ob,Es=0;for(Kr=0;4>Kr;++Kr){var ai,sn=Wi[0+Kr];for(ai=0;4>ai;++ai){sn=Ry[Kn[bs+ai]][sn];for(var xn=Qg[ke(Nr,sn[0])];0<xn;)xn=Qg[2*xn+ke(Nr,sn[xn])];sn=-xn,Kn[bs+ai]=sn}n(ls,Es,Kn,bs,4),Es+=4,Wi[0+Kr]=sn}}else sn=ke(Nr,156)?ke(Nr,128)?1:3:ke(Nr,163)?2:0,hi.Ob[0]=sn,i(Kn,bs,sn,4),i(Wi,0,sn,4);hi.Dd=ke(Nr,142)?ke(Nr,114)?ke(Nr,183)?1:3:2:0}if(Di.m.Ka)return fi(Jr,7,"Premature end-of-partition0 encountered.");for(;Jr.ja<Jr.za;++Jr.ja){if(Di=tr,Nr=(zt=Jr).rb[zt.sb-1],Kn=zt.rb[zt.sb+zt.ja],jr=zt.ya[zt.aa+zt.ja],bs=zt.kc?jr.Ad:0)Nr.la=Kn.la=0,jr.Za||(Nr.Na=Kn.Na=0),jr.Hc=0,jr.Gc=0,jr.ia=0;else{var oi,vn;if(Nr=Kn,Kn=Di,bs=zt.Pa.Xc,Wi=zt.ya[zt.aa+zt.ja],hi=zt.pb[Wi.$b],Kr=Wi.ad,ls=0,Es=zt.rb[zt.sb-1],sn=ai=0,i(Kr,ls,0,384),Wi.Za)var ki=0,Ti=bs[3];else{xn=s(16);var jn=Nr.Na+Es.Na;if(jn=wu(Kn,bs[1],jn,hi.Eb,0,xn,0),Nr.Na=Es.Na=(0<jn)+0,1<jn)Fi(xn,0,Kr,ls);else{var Ys=xn[0]+3>>3;for(xn=0;256>xn;xn+=16)Kr[ls+xn]=Ys}ki=1,Ti=bs[0]}var Fn=15&Nr.la,Mn=15&Es.la;for(xn=0;4>xn;++xn){var Gi=1&Mn;for(Ys=vn=0;4>Ys;++Ys)Fn=Fn>>1|(Gi=(jn=wu(Kn,Ti,jn=Gi+(1&Fn),hi.Sc,ki,Kr,ls))>ki)<<7,vn=vn<<2|(3<jn?3:1<jn?2:Kr[ls+0]!=0),ls+=16;Fn>>=4,Mn=Mn>>1|Gi<<7,ai=(ai<<8|vn)>>>0}for(Ti=Fn,ki=Mn>>4,oi=0;4>oi;oi+=2){for(vn=0,Fn=Nr.la>>4+oi,Mn=Es.la>>4+oi,xn=0;2>xn;++xn){for(Gi=1&Mn,Ys=0;2>Ys;++Ys)jn=Gi+(1&Fn),Fn=Fn>>1|(Gi=0<(jn=wu(Kn,bs[2],jn,hi.Qc,0,Kr,ls)))<<3,vn=vn<<2|(3<jn?3:1<jn?2:Kr[ls+0]!=0),ls+=16;Fn>>=2,Mn=Mn>>1|Gi<<5}sn|=vn<<4*oi,Ti|=Fn<<4<<oi,ki|=(240&Mn)<<oi}Nr.la=Ti,Es.la=ki,Wi.Hc=ai,Wi.Gc=sn,Wi.ia=43690&sn?0:hi.ia,bs=!(ai|sn)}if(0<zt.L&&(zt.wa[zt.Y+zt.ja]=zt.gd[jr.$b][jr.Za],zt.wa[zt.Y+zt.ja].La|=!bs),Di.Ka)return fi(Jr,7,"Premature end-of-file encountered.")}if(Pa(Jr),zt=Si,Di=1,jr=(tr=Jr).D,Nr=0<tr.L&&tr.M>=tr.zb&&tr.M<=tr.Va,tr.Aa==0)t:{if(jr.M=tr.M,jr.uc=Nr,Da(tr,jr),Di=1,jr=(vn=tr.D).Nb,Nr=(sn=Eu[tr.L])*tr.R,Kn=sn/2*tr.B,xn=16*jr*tr.R,Ys=8*jr*tr.B,bs=tr.sa,Wi=tr.ta-Nr+xn,hi=tr.qa,Kr=tr.ra-Kn+Ys,ls=tr.Ha,Es=tr.Ia-Kn+Ys,Mn=(Fn=vn.M)==0,ai=Fn>=tr.Va-1,tr.Aa==2&&Da(tr,vn),vn.uc)for(Gi=(jn=tr).D.M,e(jn.D.uc),vn=jn.yb;vn<jn.Hb;++vn){ki=vn,Ti=Gi;var Vs=($a=(Mi=jn).D).Nb;oi=Mi.R;var $a=$a.wa[$a.Y+ki],Oi=Mi.sa,ji=Mi.ta+16*Vs*oi+16*ki,Qs=$a.dd,Bn=$a.tc;if(Bn!=0)if(e(3<=Bn),Mi.L==1)0<ki&&pm(Oi,ji,oi,Bn+4),$a.La&&gu(Oi,ji,oi,Bn),0<Ti&&c0(Oi,ji,oi,Bn+4),$a.La&&Oh(Oi,ji,oi,Bn);else{var Js=Mi.B,Ao=Mi.qa,Xo=Mi.ra+8*Vs*Js+8*ki,Ss=Mi.Ha,Mi=Mi.Ia+8*Vs*Js+8*ki;Vs=$a.ld,0<ki&&(dm(Oi,ji,oi,Bn+4,Qs,Vs),Wg(Ao,Xo,Ss,Mi,Js,Bn+4,Qs,Vs)),$a.La&&(mu(Oi,ji,oi,Bn,Qs,Vs),hf(Ao,Xo,Ss,Mi,Js,Bn,Qs,Vs)),0<Ti&&(hm(Oi,ji,oi,Bn+4,Qs,Vs),o0(Ao,Xo,Ss,Mi,Js,Bn+4,Qs,Vs)),$a.La&&(Gg(Oi,ji,oi,Bn,Qs,Vs),l0(Ao,Xo,Ss,Mi,Js,Bn,Qs,Vs))}}if(tr.ia&&alert("todo:DitherRow"),zt.put!=null){if(vn=16*Fn,Fn=16*(Fn+1),Mn?(zt.y=tr.sa,zt.O=tr.ta+xn,zt.f=tr.qa,zt.N=tr.ra+Ys,zt.ea=tr.Ha,zt.W=tr.Ia+Ys):(vn-=sn,zt.y=bs,zt.O=Wi,zt.f=hi,zt.N=Kr,zt.ea=ls,zt.W=Es),ai||(Fn-=sn),Fn>zt.o&&(Fn=zt.o),zt.F=null,zt.J=null,tr.Fa!=null&&0<tr.Fa.length&&vn<Fn&&(zt.J=Hi(tr,zt,vn,Fn-vn),zt.F=tr.mb,zt.F==null&&zt.F.length==0)){Di=fi(tr,3,"Could not decode alpha data.");break t}vn<zt.j&&(sn=zt.j-vn,vn=zt.j,e(!(1&sn)),zt.O+=tr.R*sn,zt.N+=tr.B*(sn>>1),zt.W+=tr.B*(sn>>1),zt.F!=null&&(zt.J+=zt.width*sn)),vn<Fn&&(zt.O+=zt.v,zt.N+=zt.v>>1,zt.W+=zt.v>>1,zt.F!=null&&(zt.J+=zt.v),zt.ka=vn-zt.j,zt.U=zt.va-zt.v,zt.T=Fn-vn,Di=zt.put(zt))}jr+1!=tr.Ic||ai||(n(tr.sa,tr.ta-Nr,bs,Wi+16*tr.R,Nr),n(tr.qa,tr.ra-Kn,hi,Kr+8*tr.B,Kn),n(tr.Ha,tr.Ia-Kn,ls,Es+8*tr.B,Kn))}if(!Di)return fi(Jr,6,"Output aborted.")}return 1})(Se,Ve)),Ve.bc!=null&&Ve.bc(Ve),qe&=1}return qe?(Se.cb=0,qe):0})(v,G)||(S=v.a)}}else S=v.a}S==0&&ue.Oa!=null&&ue.Oa.fd&&(S=pa(ue.ba))}ue=S}se=ue!=0?null:11>se?de.f.RGBA.eb:de.f.kb.y}else se=null;return se};var Hh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(T,O){for(var I="",D=0;D<4;D++)I+=String.fromCharCode(T[O++]);return I}function f(T,O){return T[O+0]|T[O+1]<<8}function p(T,O){return(T[O+0]|T[O+1]<<8|T[O+2]<<16)>>>0}function g(T,O){return(T[O+0]|T[O+1]<<8|T[O+2]<<16|T[O+3]<<24)>>>0}new l;var m=[0],_=[0],w=[],b=new l,k=t,R=(function(T,O){var I={},D=0,B=!1,re=0,_e=0;if(I.frames=[],!(function(N,U){for(var W=0;W<4;W++)if(N[U+W]!="RIFF".charCodeAt(W))return!0;return!1})(T,O)){for(g(T,O+=4),O+=8;O<T.length;){var Ce=c(T,O),we=g(T,O+=4);O+=4;var ce=we+(1&we);switch(Ce){case"VP8 ":case"VP8L":I.frames[D]===void 0&&(I.frames[D]={}),(J=I.frames[D]).src_off=B?_e:O-8,J.src_size=re+we+8,D++,B&&(B=!1,re=0,_e=0);break;case"VP8X":(J=I.header={}).feature_flags=T[O];var H=O+4;J.canvas_width=1+p(T,H),H+=3,J.canvas_height=1+p(T,H),H+=3;break;case"ALPH":B=!0,re=ce+8,_e=O-8;break;case"ANIM":(J=I.header).bgcolor=g(T,O),H=O+4,J.loop_count=f(T,H),H+=2;break;case"ANMF":var te,J;(J=I.frames[D]={}).offset_x=2*p(T,O),O+=3,J.offset_y=2*p(T,O),O+=3,J.width=1+p(T,O),O+=3,J.height=1+p(T,O),O+=3,J.duration=p(T,O),O+=3,te=T[O++],J.dispose=1&te,J.blend=te>>1&1}Ce!="ANMF"&&(O+=ce)}return I}})(k,0);R.response=k,R.rgbaoutput=!0,R.dataurl=!1;var C=R.header?R.header:null,j=R.frames?R.frames:null;if(C){C.loop_counter=C.loop_count,m=[C.canvas_height],_=[C.canvas_width];for(var X=0;X<j.length&&j[X].blend!=0;X++);}var K=j[0],P=b.WebPDecodeRGBA(k,K.src_off,K.src_size,_,m);K.rgba=P,K.imgwidth=_[0],K.imgheight=m[0];for(var A=0;A<_[0]*m[0]*4;A++)w[A]=P[A];return this.width=_,this.height=m,this.data=w,this}(function(t){var e,r,n,i,s,a,o,l,c,f=function(N){return N=N||{},this.isStrokeTransparent=N.isStrokeTransparent||!1,this.strokeOpacity=N.strokeOpacity||1,this.strokeStyle=N.strokeStyle||"#000000",this.fillStyle=N.fillStyle||"#000000",this.isFillTransparent=N.isFillTransparent||!1,this.fillOpacity=N.fillOpacity||1,this.font=N.font||"10px sans-serif",this.textBaseline=N.textBaseline||"alphabetic",this.textAlign=N.textAlign||"left",this.lineWidth=N.lineWidth||1,this.lineJoin=N.lineJoin||"miter",this.lineCap=N.lineCap||"butt",this.path=N.path||[],this.transform=N.transform!==void 0?N.transform.clone():new l,this.globalCompositeOperation=N.globalCompositeOperation||"normal",this.globalAlpha=N.globalAlpha||1,this.clip_path=N.clip_path||[],this.currentPoint=N.currentPoint||new a,this.miterLimit=N.miterLimit||10,this.lastPoint=N.lastPoint||new a,this.lineDashOffset=N.lineDashOffset||0,this.lineDash=N.lineDash||[],this.margin=N.margin||[0,0,0,0],this.prevPageLastElemOffset=N.prevPageLastElemOffset||0,this.ignoreClearRect=typeof N.ignoreClearRect!="boolean"||N.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new f}]);var p=function(N){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=N;Object.defineProperty(this,"pdf",{get:function(){return U}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(Re){W=!!Re}});var Y=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Y},set:function(Re){Y=!!Re}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(Re){isNaN(Re)||(ae=Re)}});var pe=0;Object.defineProperty(this,"posY",{get:function(){return pe},set:function(Re){isNaN(Re)||(pe=Re)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Re){var fe;typeof Re=="number"?fe=[Re,Re,Re,Re]:((fe=new Array(4))[0]=Re[0],fe[1]=Re.length>=2?Re[1]:fe[0],fe[2]=Re.length>=3?Re[2]:fe[0],fe[3]=Re.length>=4?Re[3]:fe[1]),c.margin=fe}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(Re){he=Re}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(Re){xe=Re}});var ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ke},set:function(Re){ke=Re}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Re){Re instanceof f&&(c=Re)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Re){c.path=Re}});var Fe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Fe},set:function(Re){Fe=Re}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Re){var fe;fe=g(Re),this.ctx.fillStyle=fe.style,this.ctx.isFillTransparent=fe.a===0,this.ctx.fillOpacity=fe.a,this.pdf.setFillColor(fe.r,fe.g,fe.b,{a:fe.a}),this.pdf.setTextColor(fe.r,fe.g,fe.b,{a:fe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Re){var fe=g(Re);this.ctx.strokeStyle=fe.style,this.ctx.isStrokeTransparent=fe.a===0,this.ctx.strokeOpacity=fe.a,fe.a===0?this.pdf.setDrawColor(255,255,255):(fe.a,this.pdf.setDrawColor(fe.r,fe.g,fe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Re){["butt","round","square"].indexOf(Re)!==-1&&(this.ctx.lineCap=Re,this.pdf.setLineCap(Re))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Re){isNaN(Re)||(this.ctx.lineWidth=Re,this.pdf.setLineWidth(Re))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Re){["bevel","round","miter"].indexOf(Re)!==-1&&(this.ctx.lineJoin=Re,this.pdf.setLineJoin(Re))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Re){isNaN(Re)||(this.ctx.miterLimit=Re,this.pdf.setMiterLimit(Re))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Re){this.ctx.textBaseline=Re}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Re){["right","end","center","left","start"].indexOf(Re)!==-1&&(this.ctx.textAlign=Re)}});var oe=null,Ze=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ze},set:function(Re){oe=null,Ze=Re}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Re){var fe;if(this.ctx.font=Re,(fe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Re))!==null){var ut=fe[1];fe[2];var rt=fe[3],lt=fe[4];fe[5];var le=fe[6],je=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(lt)[2];lt=Math.floor(je==="px"?parseFloat(lt)*this.pdf.internal.scaleFactor:je==="em"?parseFloat(lt)*this.pdf.getFontSize():parseFloat(lt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(lt);var ft=(function(wt){var At,Xt,Gt=[],qt=wt.trim();if(qt==="")return N5;if(qt in UA)return[UA[qt]];for(;qt!=="";){switch(Xt=null,At=(qt=$A(qt)).charAt(0)){case'"':case"'":Xt=tfe(qt.substring(1),At);break;default:Xt=rfe(qt)}if(Xt===null||(Gt.push(Xt[0]),(qt=$A(Xt[1]))!==""&&qt.charAt(0)!==","))return N5;qt=qt.replace(/^,/,"")}return Gt})(le);if(this.fontFaces){var Ie=(function(wt,At){if(oe===null){var Xt=(function(Gt){var qt=[];return Object.keys(Gt).forEach(function(wr){Gt[wr].forEach(function(rn){var Me=null;switch(rn){case"bold":Me={family:wr,weight:"bold"};break;case"italic":Me={family:wr,style:"italic"};break;case"bolditalic":Me={family:wr,weight:"bold",style:"italic"};break;case"":case"normal":Me={family:wr}}Me!==null&&(Me.ref={name:wr,style:rn},qt.push(Me))})}),qt})(wt.getFontList());oe=(function(Gt){for(var qt={},wr=0;wr<Gt.length;++wr){var rn=A5(Gt[wr]),Me=rn.family,Mt=rn.stretch,Vt=rn.style,rr=rn.weight;qt[Me]=qt[Me]||{},qt[Me][Mt]=qt[Me][Mt]||{},qt[Me][Mt][Vt]=qt[Me][Mt][Vt]||{},qt[Me][Mt][Vt][rr]=rn}return qt})(Xt.concat(At))}return oe})(this.pdf,this.fontFaces),Be=ft.map(function(wt){return{family:wt,stretch:"normal",weight:rt,style:ut}}),tt=(function(wt,At,Xt){for(var Gt=(Xt=Xt||{}).defaultFontFamily||"times",qt=Object.assign({},efe,Xt.genericFontFamilies||{}),wr=null,rn=null,Me=0;Me<At.length;++Me)if(qt[(wr=A5(At[Me])).family]&&(wr.family=qt[wr.family]),wt.hasOwnProperty(wr.family)){rn=wt[wr.family];break}if(!(rn=rn||wt[Gt]))throw new Error("Could not find a font-family for the rule '"+zA(wr)+"' and default family '"+Gt+"'.");if(rn=(function(Mt,Vt){if(Vt[Mt])return Vt[Mt];var rr=Y_[Mt],ar=rr<=Y_.normal?-1:1,ur=VA(Vt,jF,rr,ar);if(!ur)throw new Error("Could not find a matching font-stretch value for "+Mt);return ur})(wr.stretch,rn),rn=(function(Mt,Vt){if(Vt[Mt])return Vt[Mt];for(var rr=OF[Mt],ar=0;ar<rr.length;++ar)if(Vt[rr[ar]])return Vt[rr[ar]];throw new Error("Could not find a matching font-style for "+Mt)})(wr.style,rn),!(rn=(function(Mt,Vt){if(Vt[Mt])return Vt[Mt];if(Mt===400&&Vt[500])return Vt[500];if(Mt===500&&Vt[400])return Vt[400];var rr=Zue[Mt],ar=VA(Vt,MF,rr,Mt<400?-1:1);if(!ar)throw new Error("Could not find a matching font-weight for value "+Mt);return ar})(wr.weight,rn)))throw new Error("Failed to resolve a font for the rule '"+zA(wr)+"'.");return rn})(Ie,Be);this.pdf.setFont(tt.ref.name,tt.ref.style)}else{var ot="";(rt==="bold"||parseInt(rt,10)>=700||ut==="bold")&&(ot="bold"),ut==="italic"&&(ot+="italic"),ot.length===0&&(ot="normal");for(var ht="",Pt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ft=0;Ft<ft.length;Ft++){if(this.pdf.internal.getFont(ft[Ft],ot,{noFallback:!0,disableWarning:!0})!==void 0){ht=ft[Ft];break}if(ot==="bolditalic"&&this.pdf.internal.getFont(ft[Ft],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ht=ft[Ft],ot="bold";else if(this.pdf.internal.getFont(ft[Ft],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ht=ft[Ft],ot="normal";break}}if(ht===""){for(var jt=0;jt<ft.length;jt++)if(Pt[ft[jt]]){ht=Pt[ft[jt]];break}}ht=ht===""?"Times":ht,this.pdf.setFont(ht,ot)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Re){this.ctx.globalCompositeOperation=Re}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Re){this.ctx.globalAlpha=Re}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Re){this.ctx.lineDashOffset=Re,J.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Re){this.ctx.lineDash=Re,J.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Re){this.ctx.ignoreClearRect=!!Re}})};p.prototype.setLineDash=function(N){this.lineDash=N},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){j.call(this,"fill",!1)},p.prototype.stroke=function(){j.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(N,U){if(isNaN(N)||isNaN(U))throw ri.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new a(N,U));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new a(N,U)},p.prototype.closePath=function(){var N=new a(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&zn(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){N=new a(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(N.x,N.y)},p.prototype.lineTo=function(N,U){if(isNaN(N)||isNaN(U))throw ri.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new a(N,U));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new a(W.x,W.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},p.prototype.quadraticCurveTo=function(N,U,W,Y){if(isNaN(W)||isNaN(Y)||isNaN(N)||isNaN(U))throw ri.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new a(W,Y)),pe=this.ctx.transform.applyToPoint(new a(N,U));this.path.push({type:"qct",x1:pe.x,y1:pe.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new a(ae.x,ae.y)},p.prototype.bezierCurveTo=function(N,U,W,Y,ae,pe){if(isNaN(ae)||isNaN(pe)||isNaN(N)||isNaN(U)||isNaN(W)||isNaN(Y))throw ri.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new a(ae,pe)),xe=this.ctx.transform.applyToPoint(new a(N,U)),ke=this.ctx.transform.applyToPoint(new a(W,Y));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:ke.x,y2:ke.y,x:he.x,y:he.y}),this.ctx.lastPoint=new a(he.x,he.y)},p.prototype.arc=function(N,U,W,Y,ae,pe){if(isNaN(N)||isNaN(U)||isNaN(W)||isNaN(Y)||isNaN(ae))throw ri.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pe=!!pe,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new a(N,U));N=he.x,U=he.y;var xe=this.ctx.transform.applyToPoint(new a(0,W)),ke=this.ctx.transform.applyToPoint(new a(0,0));W=Math.sqrt(Math.pow(xe.x-ke.x,2)+Math.pow(xe.y-ke.y,2))}Math.abs(ae-Y)>=2*Math.PI&&(Y=0,ae=2*Math.PI),this.path.push({type:"arc",x:N,y:U,radius:W,startAngle:Y,endAngle:ae,counterclockwise:pe})},p.prototype.arcTo=function(N,U,W,Y,ae){throw new Error("arcTo not implemented.")},p.prototype.rect=function(N,U,W,Y){if(isNaN(N)||isNaN(U)||isNaN(W)||isNaN(Y))throw ri.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(N,U),this.lineTo(N+W,U),this.lineTo(N+W,U+Y),this.lineTo(N,U+Y),this.lineTo(N,U),this.lineTo(N+W,U),this.lineTo(N,U)},p.prototype.fillRect=function(N,U,W,Y){if(isNaN(N)||isNaN(U)||isNaN(W)||isNaN(Y))throw ri.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(N,U,W,Y),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},p.prototype.strokeRect=function(N,U,W,Y){if(isNaN(N)||isNaN(U)||isNaN(W)||isNaN(Y))throw ri.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(N,U,W,Y),this.stroke())},p.prototype.clearRect=function(N,U,W,Y){if(isNaN(N)||isNaN(U)||isNaN(W)||isNaN(Y))throw ri.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(N,U,W,Y))},p.prototype.save=function(N){N=typeof N!="boolean"||N;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),N){this.ctx.fontSize=this.pdf.internal.getFontSize();var Y=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Y}},p.prototype.restore=function(N){N=typeof N!="boolean"||N;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(U),N&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(N){var U,W,Y,ae;if(N.isCanvasGradient===!0&&(N=N.getColor()),!N)return{r:0,g:0,b:0,a:0,style:N};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(N))U=0,W=0,Y=0,ae=0;else{var pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(N);if(pe!==null)U=parseInt(pe[1]),W=parseInt(pe[2]),Y=parseInt(pe[3]),ae=1;else if((pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(N))!==null)U=parseInt(pe[1]),W=parseInt(pe[2]),Y=parseInt(pe[3]),ae=parseFloat(pe[4]);else{if(ae=1,typeof N=="string"&&N.charAt(0)!=="#"){var he=new CF(N);N=he.ok?he.toHex():"#000000"}N.length===4?(U=N.substring(1,2),U+=U,W=N.substring(2,3),W+=W,Y=N.substring(3,4),Y+=Y):(U=N.substring(1,3),W=N.substring(3,5),Y=N.substring(5,7)),U=parseInt(U,16),W=parseInt(W,16),Y=parseInt(Y,16)}}return{r:U,g:W,b:Y,a:ae,style:N}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},_=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(N,U,W,Y){if(isNaN(U)||isNaN(W)||typeof N!="string")throw ri.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Y=isNaN(Y)?void 0:Y,!m.call(this)){var ae=ce(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;D.call(this,{text:N,x:U,y:W,scale:pe,angle:ae,align:this.textAlign,maxWidth:Y})}},p.prototype.strokeText=function(N,U,W,Y){if(isNaN(U)||isNaN(W)||typeof N!="string")throw ri.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){Y=isNaN(Y)?void 0:Y;var ae=ce(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;D.call(this,{text:N,x:U,y:W,scale:pe,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:Y})}},p.prototype.measureText=function(N){if(typeof N!="string")throw ri.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,W=this.pdf.internal.scaleFactor,Y=U.internal.getFontSize(),ae=U.getStringUnitWidth(N)*Y/U.internal.scaleFactor;return new function(pe){var he=(pe=pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this}({width:ae*=Math.round(96*W/72*1e4)/1e4})},p.prototype.scale=function(N,U){if(isNaN(N)||isNaN(U))throw ri.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new l(N,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},p.prototype.rotate=function(N){if(isNaN(N))throw ri.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new l(Math.cos(N),Math.sin(N),-Math.sin(N),Math.cos(N),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},p.prototype.translate=function(N,U){if(isNaN(N)||isNaN(U))throw ri.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new l(1,0,0,1,N,U);this.ctx.transform=this.ctx.transform.multiply(W)},p.prototype.transform=function(N,U,W,Y,ae,pe){if(isNaN(N)||isNaN(U)||isNaN(W)||isNaN(Y)||isNaN(ae)||isNaN(pe))throw ri.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new l(N,U,W,Y,ae,pe);this.ctx.transform=this.ctx.transform.multiply(he)},p.prototype.setTransform=function(N,U,W,Y,ae,pe){N=isNaN(N)?1:N,U=isNaN(U)?0:U,W=isNaN(W)?0:W,Y=isNaN(Y)?1:Y,ae=isNaN(ae)?0:ae,pe=isNaN(pe)?0:pe,this.ctx.transform=new l(N,U,W,Y,ae,pe)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(N,U,W,Y,ae,pe,he,xe,ke){var Fe=this.pdf.getImageProperties(N),oe=1,Ze=1,Re=1,fe=1;Y!==void 0&&xe!==void 0&&(Re=xe/Y,fe=ke/ae,oe=Fe.width/Y*xe/Y,Ze=Fe.height/ae*ke/ae),pe===void 0&&(pe=U,he=W,U=0,W=0),Y!==void 0&&xe===void 0&&(xe=Y,ke=ae),Y===void 0&&xe===void 0&&(xe=Fe.width,ke=Fe.height);for(var ut,rt=this.ctx.transform.decompose(),lt=ce(rt.rotate.shx),le=new l,je=(le=(le=(le=le.multiply(rt.translate)).multiply(rt.skew)).multiply(rt.scale)).applyToRectangle(new o(pe-U*Re,he-W*fe,Y*oe,ae*Ze)),ft=b.call(this,je),Ie=[],Be=0;Be<ft.length;Be+=1)Ie.indexOf(ft[Be])===-1&&Ie.push(ft[Be]);if(C(Ie),this.autoPaging)for(var tt=Ie[0],ot=Ie[Ie.length-1],ht=tt;ht<ot+1;ht++){this.pdf.setPage(ht);var Pt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ft=ht===1?this.posY+this.margin[0]:this.margin[0],jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],At=ht===1?0:jt+(ht-2)*wt;if(this.ctx.clip_path.length!==0){var Xt=this.path;ut=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(ut,this.posX+this.margin[3],-At+Ft+this.ctx.prevPageLastElemOffset),X.call(this,"fill",!0),this.path=Xt}var Gt=JSON.parse(JSON.stringify(je));Gt=R([Gt],this.posX+this.margin[3],-At+Ft+this.ctx.prevPageLastElemOffset)[0];var qt=(ht>tt||ht<ot)&&w.call(this);qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pt,wt,null).clip().discardPath()),this.pdf.addImage(N,"JPEG",Gt.x,Gt.y,Gt.w,Gt.h,null,null,lt),qt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(N,"JPEG",je.x,je.y,je.w,je.h,null,null,lt)};var b=function(N,U,W){var Y=[];U=U||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(N.type){default:case"mt":case"lt":Y.push(Math.floor((N.y+ae)/W)+1);break;case"arc":Y.push(Math.floor((N.y+ae-N.radius)/W)+1),Y.push(Math.floor((N.y+ae+N.radius)/W)+1);break;case"qct":var pe=H(this.ctx.lastPoint.x,this.ctx.lastPoint.y,N.x1,N.y1,N.x,N.y);Y.push(Math.floor((pe.y+ae)/W)+1),Y.push(Math.floor((pe.y+pe.h+ae)/W)+1);break;case"bct":var he=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,N.x1,N.y1,N.x2,N.y2,N.x,N.y);Y.push(Math.floor((he.y+ae)/W)+1),Y.push(Math.floor((he.y+he.h+ae)/W)+1);break;case"rect":Y.push(Math.floor((N.y+ae)/W)+1),Y.push(Math.floor((N.y+N.h+ae)/W)+1)}for(var xe=0;xe<Y.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<Y[xe];)k.call(this);return Y},k=function(){var N=this.fillStyle,U=this.strokeStyle,W=this.font,Y=this.lineCap,ae=this.lineWidth,pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=N,this.strokeStyle=U,this.font=W,this.lineCap=Y,this.lineWidth=ae,this.lineJoin=pe},R=function(N,U,W){for(var Y=0;Y<N.length;Y++)switch(N[Y].type){case"bct":N[Y].x2+=U,N[Y].y2+=W;case"qct":N[Y].x1+=U,N[Y].y1+=W;default:N[Y].x+=U,N[Y].y+=W}return N},C=function(N){return N.sort(function(U,W){return U-W})},j=function(N,U){for(var W,Y,ae=this.fillStyle,pe=this.strokeStyle,he=this.lineCap,xe=this.lineWidth,ke=Math.abs(xe*this.ctx.transform.scaleX),Fe=this.lineJoin,oe=JSON.parse(JSON.stringify(this.path)),Ze=JSON.parse(JSON.stringify(this.path)),Re=[],fe=0;fe<Ze.length;fe++)if(Ze[fe].x!==void 0)for(var ut=b.call(this,Ze[fe]),rt=0;rt<ut.length;rt+=1)Re.indexOf(ut[rt])===-1&&Re.push(ut[rt]);for(var lt=0;lt<Re.length;lt++)for(;this.pdf.internal.getNumberOfPages()<Re[lt];)k.call(this);if(C(Re),this.autoPaging)for(var le=Re[0],je=Re[Re.length-1],ft=le;ft<je+1;ft++){this.pdf.setPage(ft),this.fillStyle=ae,this.strokeStyle=pe,this.lineCap=he,this.lineWidth=ke,this.lineJoin=Fe;var Ie=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Be=ft===1?this.posY+this.margin[0]:this.margin[0],tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ht=ft===1?0:tt+(ft-2)*ot;if(this.ctx.clip_path.length!==0){var Pt=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(W,this.posX+this.margin[3],-ht+Be+this.ctx.prevPageLastElemOffset),X.call(this,N,!0),this.path=Pt}if(Y=JSON.parse(JSON.stringify(oe)),this.path=R(Y,this.posX+this.margin[3],-ht+Be+this.ctx.prevPageLastElemOffset),U===!1||ft===0){var Ft=(ft>le||ft<je)&&w.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ie,ot,null).clip().discardPath()),X.call(this,N,U),Ft&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=ke,X.call(this,N,U),this.lineWidth=xe;this.path=oe},X=function(N,U){if((N!=="stroke"||U||!_.call(this))&&(N==="stroke"||U||!m.call(this))){for(var W,Y,ae=[],pe=this.path,he=0;he<pe.length;he++){var xe=pe[he];switch(xe.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:xe,deltas:[],abs:[]});break;case"lt":var ke=ae.length;if(pe[he-1]&&!isNaN(pe[he-1].x)&&(W=[xe.x-pe[he-1].x,xe.y-pe[he-1].y],ke>0)){for(;ke>=0;ke--)if(ae[ke-1].close!==!0&&ae[ke-1].begin!==!0){ae[ke-1].deltas.push(W),ae[ke-1].abs.push(xe);break}}break;case"bct":W=[xe.x1-pe[he-1].x,xe.y1-pe[he-1].y,xe.x2-pe[he-1].x,xe.y2-pe[he-1].y,xe.x-pe[he-1].x,xe.y-pe[he-1].y],ae[ae.length-1].deltas.push(W);break;case"qct":var Fe=pe[he-1].x+2/3*(xe.x1-pe[he-1].x),oe=pe[he-1].y+2/3*(xe.y1-pe[he-1].y),Ze=xe.x+2/3*(xe.x1-xe.x),Re=xe.y+2/3*(xe.y1-xe.y),fe=xe.x,ut=xe.y;W=[Fe-pe[he-1].x,oe-pe[he-1].y,Ze-pe[he-1].x,Re-pe[he-1].y,fe-pe[he-1].x,ut-pe[he-1].y],ae[ae.length-1].deltas.push(W);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(xe)}}Y=U?null:N==="stroke"?"stroke":"fill";for(var rt=!1,lt=0;lt<ae.length;lt++)if(ae[lt].arc)for(var le=ae[lt].abs,je=0;je<le.length;je++){var ft=le[je];ft.type==="arc"?A.call(this,ft.x,ft.y,ft.radius,ft.startAngle,ft.endAngle,ft.counterclockwise,void 0,U,!rt):B.call(this,ft.x,ft.y),rt=!0}else if(ae[lt].close===!0)this.pdf.internal.out("h"),rt=!1;else if(ae[lt].begin!==!0){var Ie=ae[lt].start.x,Be=ae[lt].start.y;re.call(this,ae[lt].deltas,Ie,Be),rt=!0}Y&&T.call(this,Y),U&&O.call(this)}},K=function(N){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return N-W;case"top":return N+U-W;case"hanging":return N+U-2*W;case"middle":return N+U/2-W;default:return N}},P=function(N){return N+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var N=function(){};return N.colorStops=[],N.addColorStop=function(U,W){this.colorStops.push([U,W])},N.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},N.isCanvasGradient=!0,N},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(N,U,W,Y,ae,pe,he,xe,ke){for(var Fe=Ce.call(this,W,Y,ae,pe),oe=0;oe<Fe.length;oe++){var Ze=Fe[oe];oe===0&&(ke?I.call(this,Ze.x1+N,Ze.y1+U):B.call(this,Ze.x1+N,Ze.y1+U)),_e.call(this,N,U,Ze.x2,Ze.y2,Ze.x3,Ze.y3,Ze.x4,Ze.y4)}xe?O.call(this):T.call(this,he)},T=function(N){switch(N){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(N,U){this.pdf.internal.out(r(N)+" "+n(U)+" m")},D=function(N){var U;switch(N.align){case"right":case"end":U="right";break;case"center":U="center";break;default:U="left"}var W=this.pdf.getTextDimensions(N.text),Y=K.call(this,N.y),ae=P.call(this,Y)-W.h,pe=this.ctx.transform.applyToPoint(new a(N.x,Y)),he=this.ctx.transform.decompose(),xe=new l;xe=(xe=(xe=xe.multiply(he.translate)).multiply(he.skew)).multiply(he.scale);for(var ke,Fe,oe,Ze=this.ctx.transform.applyToRectangle(new o(N.x,Y,W.w,W.h)),Re=xe.applyToRectangle(new o(N.x,ae,W.w,W.h)),fe=b.call(this,Re),ut=[],rt=0;rt<fe.length;rt+=1)ut.indexOf(fe[rt])===-1&&ut.push(fe[rt]);if(C(ut),this.autoPaging)for(var lt=ut[0],le=ut[ut.length-1],je=lt;je<le+1;je++){this.pdf.setPage(je);var ft=je===1?this.posY+this.margin[0]:this.margin[0],Ie=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Be=this.pdf.internal.pageSize.height-this.margin[2],tt=Be-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],ht=ot-this.margin[3],Pt=je===1?0:Ie+(je-2)*tt;if(this.ctx.clip_path.length!==0){var Ft=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(ke,this.posX+this.margin[3],-1*Pt+ft),X.call(this,"fill",!0),this.path=Ft}var jt=R([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-Pt+ft+this.ctx.prevPageLastElemOffset)[0];N.scale>=.01&&(Fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Fe*N.scale),oe=this.lineWidth,this.lineWidth=oe*N.scale);var wt=this.autoPaging!=="text";if(wt||jt.y+jt.h<=Be){if(wt||jt.y>=ft&&jt.x<=ot){var At=wt?N.text:this.pdf.splitTextToSize(N.text,N.maxWidth||ot-jt.x)[0],Xt=R([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-Pt+ft+this.ctx.prevPageLastElemOffset)[0],Gt=wt&&(je>lt||je<le)&&w.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ht,tt,null).clip().discardPath()),this.pdf.text(At,Xt.x,Xt.y,{angle:N.angle,align:U,renderingMode:N.renderingMode}),Gt&&this.pdf.restoreGraphicsState()}}else jt.y<Be&&(this.ctx.prevPageLastElemOffset+=Be-jt.y);N.scale>=.01&&(this.pdf.setFontSize(Fe),this.lineWidth=oe)}else N.scale>=.01&&(Fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Fe*N.scale),oe=this.lineWidth,this.lineWidth=oe*N.scale),this.pdf.text(N.text,pe.x+this.posX,pe.y+this.posY,{angle:N.angle,align:U,renderingMode:N.renderingMode,maxWidth:N.maxWidth}),N.scale>=.01&&(this.pdf.setFontSize(Fe),this.lineWidth=oe)},B=function(N,U,W,Y){W=W||0,Y=Y||0,this.pdf.internal.out(r(N+W)+" "+n(U+Y)+" l")},re=function(N,U,W){return this.pdf.lines(N,U,W,null,null)},_e=function(N,U,W,Y,ae,pe,he,xe){this.pdf.internal.out([e(i(W+N)),e(s(Y+U)),e(i(ae+N)),e(s(pe+U)),e(i(he+N)),e(s(xe+U)),"c"].join(" "))},Ce=function(N,U,W,Y){for(var ae=2*Math.PI,pe=Math.PI/2;U>W;)U-=ae;var he=Math.abs(W-U);he<ae&&Y&&(he=ae-he);for(var xe=[],ke=Y?-1:1,Fe=U;he>1e-5;){var oe=Fe+ke*Math.min(he,pe);xe.push(we.call(this,N,Fe,oe)),he-=Math.abs(oe-Fe),Fe=oe}return xe},we=function(N,U,W){var Y=(W-U)/2,ae=N*Math.cos(Y),pe=N*Math.sin(Y),he=ae,xe=-pe,ke=he*he+xe*xe,Fe=ke+he*ae+xe*pe,oe=4/3*(Math.sqrt(2*ke*Fe)-Fe)/(he*pe-xe*ae),Ze=he-oe*xe,Re=xe+oe*he,fe=Ze,ut=-Re,rt=Y+U,lt=Math.cos(rt),le=Math.sin(rt);return{x1:N*Math.cos(U),y1:N*Math.sin(U),x2:Ze*lt-Re*le,y2:Ze*le+Re*lt,x3:fe*lt-ut*le,y3:fe*le+ut*lt,x4:N*Math.cos(W),y4:N*Math.sin(W)}},ce=function(N){return 180*N/Math.PI},H=function(N,U,W,Y,ae,pe){var he=N+.5*(W-N),xe=U+.5*(Y-U),ke=ae+.5*(W-ae),Fe=pe+.5*(Y-pe),oe=Math.min(N,ae,he,ke),Ze=Math.max(N,ae,he,ke),Re=Math.min(U,pe,xe,Fe),fe=Math.max(U,pe,xe,Fe);return new o(oe,Re,Ze-oe,fe-Re)},te=function(N,U,W,Y,ae,pe,he,xe){var ke,Fe,oe,Ze,Re,fe,ut,rt,lt,le,je,ft,Ie,Be,tt=W-N,ot=Y-U,ht=ae-W,Pt=pe-Y,Ft=he-ae,jt=xe-pe;for(Fe=0;Fe<41;Fe++)lt=(ut=(oe=N+(ke=Fe/40)*tt)+ke*((Re=W+ke*ht)-oe))+ke*(Re+ke*(ae+ke*Ft-Re)-ut),le=(rt=(Ze=U+ke*ot)+ke*((fe=Y+ke*Pt)-Ze))+ke*(fe+ke*(pe+ke*jt-fe)-rt),Fe==0?(je=lt,ft=le,Ie=lt,Be=le):(je=Math.min(je,lt),ft=Math.min(ft,le),Ie=Math.max(Ie,lt),Be=Math.max(Be,le));return new o(Math.round(je),Math.round(ft),Math.round(Ie-je),Math.round(Be-ft))},J=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var N,U,W=(N=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:N,lineDashOffset:U}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(gr.API),(function(t){var e=function(a){var o,l,c,f,p,g,m,_,w,b;for(l=[],c=0,f=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;f>c;c+=4)(p=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(g=(p=((p=((p=((p=(p-(b=p%85))/85)-(w=p%85))/85)-(_=p%85))/85)-(m=p%85))/85)%85,l.push(g+33,m+33,_+33,w+33,b+33)):l.push(122);return(function(k,R){for(var C=R;C>0;C--)k.pop()})(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(a){var o,l,c,f,p,g=String,m="length",_=255,w="charCodeAt",b="slice",k="replace";for(a[b](-2),a=a[b](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),c=[],f=0,p=(a+=o="uuuuu"[b](a[m]%5||5))[m];p>f;f+=5)l=52200625*(a[w](f)-33)+614125*(a[w](f+1)-33)+7225*(a[w](f+2)-33)+85*(a[w](f+3)-33)+(a[w](f+4)-33),c.push(_&l>>24,_&l>>16,_&l>>8,_&l);return(function(R,C){for(var j=C;j>0;j--)R.pop()})(c,o[m]),g.fromCharCode.apply(g,c)},n=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var l="",c=0;c<a.length;c+=2)l+=String.fromCharCode("0x"+(a[c]+a[c+1]));return l},s=function(a){for(var o=new Uint8Array(a.length),l=a.length;l--;)o[l]=a.charCodeAt(l);return(o=$_(o)).reduce(function(c,f){return c+String.fromCharCode(f)},"")};t.processDataByFilters=function(a,o){var l=0,c=a||"",f=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=n(c),f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:f.reverse().join(" ")}}})(gr.API),(function(t){t.loadFile=function(e,r,n){return(function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=(function(l,c,f){var p=new XMLHttpRequest,g=0,m=function(_){var w=_.length,b=[],k=String.fromCharCode;for(g=0;g<w;g+=1)b.push(k(255&_.charCodeAt(g)));return b.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?f(m(this.responseText)):f(void 0)}),p.send(null),c&&p.status===200)return m(p.responseText)})(i,s,a)}catch{}return o})(e,r,n)},t.loadImageFile=t.loadFile})(gr.API),(function(t){function e(){return(Fr.html2canvas?Promise.resolve(Fr.html2canvas):sp(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Fr.DOMPurify?Promise.resolve(Fr.DOMPurify):sp(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=zn(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var c=document.createElement(o);for(var f in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[f]=l.style[f];return c},s=function o(l,c){for(var f=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),p=l.firstChild;p;p=p.nextSibling)c!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||f.appendChild(o(p,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(f.width=l.width,f.height=l.height,f.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(f.value=l.value),f.addEventListener("load",function(){f.scrollTop=l.scrollTop,f.scrollLeft=l.scrollLeft},!0)),f},a=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),f=o.convert(Promise.resolve(),c);return(f=f.setProgress(1,o,1,[o])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,l){return o.__proto__=l||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,l){return this.then(function(){switch(l=l||(function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),l){case"string":return this.then(r).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=this.opt.jsPDF,f=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=f,f)for(var m=0;m<f.length;++m){var _=f[m],w=_.src.find(function(b){return b.format==="truetype"});w&&c.addFont(w.url,_.ref.name,_.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,c.context2d.save(!0),l(this.prop.container,g)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},a.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(o,l){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function l(c,f){return Math.floor(c*f/72*96)}return this.then(function(){(o=o||gr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,l,c,f){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,l,c,f){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,f?this.progress.stack.concat(f):null)},a.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(f,p){return c.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(g){return c.updateProgress(null,f),g}).then(f,p).then(function(g){return c.updateProgress(1),g})})},a.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then;var f=this;o&&(o=o.bind(f)),l&&(l=l.bind(f));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?f:a.convert(Object.assign({},f),Promise.prototype),g=c.call(p,o,l);return a.convert(g,f.__proto__)},a.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},a.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},a.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return a.convert(l,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,gr.getPageSize=function(o,l,c){if(zn(o)==="object"){var f=o;o=f.orientation,l=f.unit||l,c=f.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var p,g=(""+c).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var _,w=0,b=0;if(m.hasOwnProperty(g))w=m[g][1]/p,b=m[g][0]/p;else try{w=c[1],b=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",b>w&&(_=b,b=w,w=_);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",w>b&&(_=b,b=w,w=_)}return{width:b,height:w,unit:l,k:p,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(A5):null;var c=new a(l);return l.worker?c:c.from(o).doCallback()}})(gr.API),gr.API.addJS=function(t){return HA=t,this.internal.events.subscribe("postPutResources",function(){c2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(c2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),qA=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+HA+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){c2!==void 0&&qA!==void 0&&this.internal.out("/Names <</JavaScript "+c2+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=n.exec(a);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,f=[];for(s=0;s<c;s++){var p=r.internal.newObject();f.push(p);var g=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<f.length;s++)r.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,s){var a={title:i,options:s,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var a=n.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var s=0;s<i.children.length;s++)n.count++,this.count_r(n,i.children[s]);return n.count}}])})(gr.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,i,s,a,o){var l,c=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,l=(function(p){for(var g,m=256*p.charCodeAt(4)+p.charCodeAt(5),_=p.length,w={width:0,height:0,numcomponents:1},b=4;b<_;b+=2){if(b+=m,e.indexOf(p.charCodeAt(b+1))!==-1){g=256*p.charCodeAt(b+5)+p.charCodeAt(b+6),w={width:256*p.charCodeAt(b+7)+p.charCodeAt(b+8),height:g,numcomponents:p.charCodeAt(b+9)};break}m=256*p.charCodeAt(b+2)+p.charCodeAt(b+3)}return w})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}f={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:i}}return f}})(gr.API),gr.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,s=Bue(t,{checkCrc:!0}),a=s.width,o=s.height,l=s.channels,c=s.palette,f=s.depth;i=c&&l===1?(function(P){for(var A=P.width,T=P.height,O=P.data,I=P.palette,D=P.depth,B=!1,re=[],_e=[],Ce=void 0,we=!1,ce=0,H=0;H<I.length;H++){var te=XT(I[H],4),J=te[0],N=te[1],U=te[2],W=te[3];re.push(J,N,U),W!=null&&(W===0?(ce++,_e.length<1&&_e.push(H)):W<255&&(we=!0))}if(we||ce>1){B=!0,_e=void 0;var Y=A*T;Ce=new Uint8Array(Y);for(var ae=new DataView(O.buffer),pe=0;pe<Y;pe++){var he=C5(ae,pe,D),xe=XT(I[he],4)[3];Ce[pe]=xe}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:O,alphaBytes:Ce,needSMask:B,palette:re,mask:_e}})(s):l===2||l===4?(function(P){for(var A=P.data,T=P.width,O=P.height,I=P.channels,D=P.depth,B=I===2?"DeviceGray":"DeviceRGB",re=I-1,_e=T*O,Ce=re,we=_e*Ce,ce=1*_e,H=Math.ceil(we*D/8),te=Math.ceil(ce*D/8),J=new Uint8Array(H),N=new Uint8Array(te),U=new DataView(A.buffer),W=new DataView(J.buffer),Y=new DataView(N.buffer),ae=!1,pe=0;pe<_e;pe++){for(var he=pe*I,xe=0;xe<Ce;xe++)eN(W,C5(U,he+xe,D),pe*Ce+xe,D);var ke=C5(U,he+Ce,D);ke<(1<<D)-1&&(ae=!0),eN(Y,ke,1*pe,D)}return{colorSpace:B,colorsPerPixel:re,colorBytes:J,alphaBytes:N,needSMask:ae}})(s):(function(P){var A=P.data,T=P.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:T,colorsPerPixel:T==="DeviceGray"?1:3,colorBytes:A instanceof Uint8Array?A:new Uint8Array(A.buffer),needSMask:!1}})(s);var p,g,m,_=i,w=_.colorSpace,b=_.colorsPerPixel,k=_.colorBytes,R=_.alphaBytes,C=_.needSMask,j=_.palette,X=_.mask,K=null;return n!==gr.API.image_compression.NONE&&typeof $_=="function"?(K=(function(P){var A;switch(P){case gr.API.image_compression.FAST:A=11;break;case gr.API.image_compression.MEDIUM:A=13;break;case gr.API.image_compression.SLOW:A=14;break;default:A=12}return A})(n),p=this.decode.FLATE_DECODE,g="/Predictor ".concat(K," "),t=XA(k,a*b,b,n),C&&(m=XA(R,a,1,n))):(p=void 0,g="",t=k,C&&(m=R)),g+="/Colors ".concat(b," /BitsPerComponent ").concat(f," /Columns ").concat(a),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:r,data:t,index:e,filter:p,decodeParameters:g,transparency:X,palette:j,sMask:m,predictor:K,width:a,height:o,bitsPerComponent:f,colorSpace:w}}},(function(t){t.processGIF89A=function(e,r,n,i){var s=new afe(e),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},f=new I5(100).encode(c,100);return t.processJPEG.call(this,f,r,n,i)},t.processGIF87A=t.processGIF89A})(gr.API),sc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},sc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){ri.log("bit decode error:"+r)}},sc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}r!==0&&(this.pos+=4-r)}},sc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*i*4,o=s>>4,l=15&s,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},sc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},sc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,f=n*this.width*4+4*i;this.data[f]=l,this.data[f+1]=o,this.data[f+2]=a,this.data[f+3]=c}this.pos+=t}},sc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&r)/r*255|0,c=(a>>11)/e*255|0,f=i*this.width*4+4*s;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=o,this.data[f+3]=255}this.pos+=t}},sc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},sc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=a}},sc.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,r,n,i){var s=new sc(e,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new I5(100).encode(l,100);return t.processJPEG.call(this,c,r,n,i)}})(gr.API),rN.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,r,n,i){var s=new rN(e),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new I5(100).encode(l,100);return t.processJPEG.call(this,c,r,n,i)}})(gr.API),gr.API.processRGBA=function(t,e,r){for(var n=t.data,i=n.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,l=0,c=0;c<i;c+=4){var f=n[c],p=n[c+1],g=n[c+2],m=n[c+3];s[o++]=f,s[o++]=p,s[o++]=g,a[l++]=m}var _=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:_,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},gr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},V0=gr.API,u2=V0.getCharWidthsArray=function(t,e){var r,n,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,f=c.fof?c.fof:1,p=e.doKerning!==!1,g=0,m=t.length,_=0,w=o[0]||l,b=[];for(r=0;r<m;r++)n=t.charCodeAt(r),typeof i.metadata.widthOfString=="function"?b.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+a*(1e3/s)||0)/1e3):(g=p&&zn(c[n])==="object"&&!isNaN(parseInt(c[n][_],10))?c[n][_]/f:0,b.push((o[n]||w)/l+g)),_=n;return b},WA=V0.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return V0.processArabic&&(t=V0.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,i)/r:u2.apply(this,arguments).reduce(function(s,a){return s+a},0)},GA=function(t,e,r,n){for(var i=[],s=0,a=t.length,o=0;s!==a&&o+e[s]<r;)o+=e[s],s++;i.push(t.slice(0,s));var l=s;for(o=0;s!==a;)o+e[s]>n&&(i.push(t.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},KA=function(t,e,r){r||(r={});var n,i,s,a,o,l,c,f=[],p=[f],g=r.textIndent||0,m=0,_=0,w=t.split(" "),b=u2.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?w[0].length+2:r.lineIndent||0){var k=Array(l).join(" "),R=[];w.map(function(j){(j=j.split(/\s*\n/)).length>1?R=R.concat(j.map(function(X,K){return(K&&X.length?`
`:"")+X})):R.push(j[0])}),w=R,l=WA.apply(this,[k,r])}for(s=0,a=w.length;s<a;s++){var C=0;if(n=w[s],l&&n[0]==`
`&&(n=n.substr(1),C=1),g+m+(_=(i=u2.apply(this,[n,r])).reduce(function(j,X){return j+X},0))>e||C){if(_>e){for(o=GA.apply(this,[n,i,e-(g+m),e]),f.push(o.shift()),f=[o.pop()];o.length;)p.push([o.shift()]);_=i.slice(n.length-(f[0]?f[0].length:0)).reduce(function(j,X){return j+X},0)}else f=[n];p.push(f),g=_+l,m=b}else f.push(n),g+=m+_,m=b}return c=l?function(j,X){return(X?k:"")+j.join(" ")}:function(j){return j.join(" ")},p.map(c)},V0.splitTextToSize=function(t,e,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var p=this.internal.getFont(f.fontName,f.fontStyle),g="Unicode";return p.metadata[g]?{widths:p.metadata[g].widths||{0:1},kerning:p.metadata[g].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=r.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(KA.apply(this,[n[o],a,s]));return c},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},s=0;s<16;s++)n[r[s]]=e[s],i[e[s]]=r[s];var a=function(g){return"0x"+parseInt(g,10).toString(16)},o=t.__fontmetrics__.compress=function(g){var m,_,w,b,k=["{"];for(var R in g){if(m=g[R],isNaN(parseInt(R,10))?_="'"+R+"'":(R=parseInt(R,10),_=(_=a(R).slice(2)).slice(0,-1)+i[_.slice(-1)]),typeof m=="number")m<0?(w=a(m).slice(3),b="-"):(w=a(m).slice(2),b=""),w=b+w.slice(0,-1)+i[w.slice(-1)];else{if(zn(m)!=="object")throw new Error("Don't know what to do with value type "+zn(m)+".");w=o(m)}k.push(_+w)}return k.push("}"),k.join("")},l=t.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,_,w,b,k={},R=1,C=k,j=[],X="",K="",P=g.length-1,A=1;A<P;A+=1)(b=g[A])=="'"?m?(w=m.join(""),m=void 0):m=[]:m?m.push(b):b=="{"?(j.push([C,w]),C={},w=void 0):b=="}"?((_=j.pop())[0][_[1]]=C,w=void 0,C=_[0]):b=="-"?R=-1:w===void 0?n.hasOwnProperty(b)?(X+=n[b],w=parseInt(X,16)*R,R=1,X=""):X+=b:n.hasOwnProperty(b)?(K+=n[b],C[w]=parseInt(K,16)*R,R=1,w=void 0,K=""):K+=b;return k},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(g){var m=g.font,_=p.Unicode[m.postScriptName];_&&(m.metadata.Unicode={},m.metadata.Unicode.widths=_.widths,m.metadata.Unicode.kerning=_.kerning);var w=f.Unicode[m.postScriptName];w&&(m.metadata.Unicode.encoding=w,m.encoding=w.codePages[0])}])})(gr.API),(function(t){var e=function(r){for(var n=r.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=r.charCodeAt(s);return i};t.API.events.push(["addFont",function(r){var n=void 0,i=r.font,s=r.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(C2(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,n)}}])})(gr),gr.API.addSvgAsImage=function(t,e,r,n,i,s,a,o){if(isNaN(e)||isNaN(r))throw ri.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw ri.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=n,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(Fr.canvg?Promise.resolve(Fr.canvg):sp(()=>import("./index.es-DGLAgVXq.js"),[])).catch(function(g){return Promise.reject(new Error("Could not load canvg: "+g))}).then(function(g){return g.default?g.default:g}).then(function(g){return g.fromString(c,t,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(f)}).then(function(){p.addImage(l.toDataURL("image/jpeg",1),e,r,n,i,a,o)})},gr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,r);return this},gr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,f=0,p=0;function g(_,w){var b,k=!1;for(b=0;b<_.length;b+=1)_[b]===w&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=o.length;for(p=0;p<m;p+=1)r[o[p]].value=r[o[p]].defaultValue,r[o[p]].explicitSet=!1}if(zn(t)==="object"){for(i in t)if(s=t[i],g(o,i)&&s!==void 0){if(r[i].type==="boolean"&&typeof s=="boolean")r[i].value=s;else if(r[i].type==="name"&&g(r[i].valueSet,s))r[i].value=s;else if(r[i].type==="integer"&&Number.isInteger(s))r[i].value=s;else if(r[i].type==="array"){for(c=0;c<s.length;c+=1)if(n=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(f=0;f<s[c].length;f+=1)typeof s[c][f]!="number"&&(n=!1);n===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}r[i].value="["+l.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var _,w=[];for(_ in r)r[_].explicitSet===!0&&(r[_].type==="name"?w.push("/"+_+" /"+r[_].value):w.push("/"+_+" "+r[_].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+a.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}})(gr.API),(function(t){var e=t.API,r=e.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],f=[""],p=0,g=s.length;p<g;++p){if(o=a.metadata.characterToGlyph(s.charCodeAt(p)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(p),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return f.join("");o=o.toString(16),f.push(c[4-o.length],o)}return f.join("")},n=function(s){var a,o,l,c,f,p,g;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,g=(o=Object.keys(s).sort(function(m,_){return m-_})).length;p<g;p++)a=o[p],l.length>=100&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(c=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),f+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,f=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var p=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),m="",_=0;_<g.length;_++)m+=String.fromCharCode(g[_]);var w=c();f({data:m,addLength1:!0,objectId:w}),l("endobj");var b=c();f({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var k=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+G0(o.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var R=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+G0(o.fontName)),l("/FontDescriptor "+k+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+G0(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+R+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,f=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var p=o.metadata.rawData,g="",m=0;m<p.length;m++)g+=String.fromCharCode(p[m]);var _=c();f({data:g,addLength1:!0,objectId:_}),l("endobj");var w=c();f({data:n(o.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var b=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+_+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+G0(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var k=0;k<o.metadata.hmtx.widths.length;k++)o.metadata.hmtx.widths[k]=parseInt(o.metadata.hmtx.widths[k]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+G0(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",l=s.x,c=s.y,f=s.options||{},p=s.mutex||{},g=p.pdfEscape,m=p.activeFontKey,_=p.fonts,w=m,b="",k=0,R="",C=_[w].encoding;if(_[w].encoding!=="Identity-H")return{text:o,x:l,y:c,options:f,mutex:p};for(R=o,w=m,Array.isArray(o)&&(R=o[0]),k=0;k<R.length;k+=1)_[w].metadata.hasOwnProperty("cmap")&&(a=_[w].metadata.cmap.unicode.codeMap[R[k].charCodeAt(0)]),a||R[k].charCodeAt(0)<256&&_[w].metadata.hasOwnProperty("Unicode")?b+=R[k]:b+="";var j="";return parseInt(w.slice(1))<14||C==="WinAnsiEncoding"?j=g(b,w).split("").map(function(X){return X.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(j=r(b,_[w])),p.isHex=!0,{text:j,x:l,y:c,options:f,mutex:p}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([i(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(i(Object.assign({},l,{text:a[c]})).text);s.text=o}else s.text=i(Object.assign({},l,{text:a})).text}])})(gr),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(gr.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var i,s,a,o,l,c,f,p=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),R=!1,C=0;this.__bidiEngine__={};var j=function(I){var D=I.charCodeAt(),B=D>>8,re=w[B];return re!==void 0?p[256*re+(255&D)]:B===252||B===253?"AL":k.test(B)?"L":B===8?"R":"N"},X=function(I){for(var D,B=0;B<I.length;B++){if((D=j(I.charAt(B)))==="L")return!1;if(D==="R")return!0}return!1},K=function(I,D,B,re){var _e,Ce,we,ce,H=D[re];switch(H){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":R=!1;break;case"N":case"AN":break;case"EN":R&&(H="AN");break;case"AL":R=!0,H="R";break;case"WS":case"BN":H="N";break;case"CS":re<1||re+1>=D.length||(_e=B[re-1])!=="EN"&&_e!=="AN"||(Ce=D[re+1])!=="EN"&&Ce!=="AN"?H="N":R&&(Ce="AN"),H=Ce===_e?Ce:"N";break;case"ES":H=(_e=re>0?B[re-1]:"B")==="EN"&&re+1<D.length&&D[re+1]==="EN"?"EN":"N";break;case"ET":if(re>0&&B[re-1]==="EN"){H="EN";break}if(R){H="N";break}for(we=re+1,ce=D.length;we<ce&&D[we]==="ET";)we++;H=we<ce&&D[we]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(ce=D.length,we=re+1;we<ce&&D[we]==="NSM";)we++;if(we<ce){var te=I[re],J=te>=1425&&te<=2303||te===64286;if(_e=D[we],J&&(_e==="R"||_e==="AL")){H="R";break}}}H=re<1||(_e=D[re-1])==="B"?"N":B[re-1];break;case"B":R=!1,i=!0,H=C;break;case"S":s=!0,H="N"}return H},P=function(I,D,B){var re=I.split("");return B&&A(re,B,{hiLevel:C}),re.reverse(),D&&D.reverse(),re.join("")},A=function(I,D,B){var re,_e,Ce,we,ce,H=-1,te=I.length,J=0,N=[],U=C?m:g,W=[];for(R=!1,i=!1,s=!1,_e=0;_e<te;_e++)W[_e]=j(I[_e]);for(Ce=0;Ce<te;Ce++){if(ce=J,N[Ce]=K(I,W,N,Ce),re=240&(J=U[ce][_[N[Ce]]]),J&=15,D[Ce]=we=U[J][5],re>0)if(re===16){for(_e=H;_e<Ce;_e++)D[_e]=1;H=-1}else H=-1;if(U[J][6])H===-1&&(H=Ce);else if(H>-1){for(_e=H;_e<Ce;_e++)D[_e]=we;H=-1}W[Ce]==="B"&&(D[Ce]=0),B.hiLevel|=we}s&&(function(Y,ae,pe){for(var he=0;he<pe;he++)if(Y[he]==="S"){ae[he]=C;for(var xe=he-1;xe>=0&&Y[xe]==="WS";xe--)ae[xe]=C}})(W,D,te)},T=function(I,D,B,re,_e){if(!(_e.hiLevel<I)){if(I===1&&C===1&&!i)return D.reverse(),void(B&&B.reverse());for(var Ce,we,ce,H,te=D.length,J=0;J<te;){if(re[J]>=I){for(ce=J+1;ce<te&&re[ce]>=I;)ce++;for(H=J,we=ce-1;H<we;H++,we--)Ce=D[H],D[H]=D[we],D[we]=Ce,B&&(Ce=B[H],B[H]=B[we],B[we]=Ce);J=ce}J++}}},O=function(I,D,B){var re=I.split(""),_e={hiLevel:C};return B||(B=[]),A(re,B,_e),(function(Ce,we,ce){if(ce.hiLevel!==0&&f)for(var H,te=0;te<Ce.length;te++)we[te]===1&&(H=b.indexOf(Ce[te]))>=0&&(Ce[te]=b[H+1])})(re,B,_e),T(2,re,D,B,_e),T(1,re,D,B,_e),re.join("")};return this.__bidiEngine__.doBidiReorder=function(I,D,B){if((function(_e,Ce){if(Ce)for(var we=0;we<_e.length;we++)Ce[we]=we;o===void 0&&(o=X(_e)),c===void 0&&(c=X(_e))})(I,D),a||!l||c)if(a&&l&&o^c)C=o?1:0,I=P(I,D,B);else if(!a&&l&&c)C=o?1:0,I=O(I,D,B),I=P(I,D);else if(!a||o||l||c){if(a&&!l&&o^c)I=P(I,D),o?(C=0,I=O(I,D,B)):(C=1,I=O(I,D,B),I=P(I,D));else if(a&&o&&!l&&c)C=1,I=O(I,D,B),I=P(I,D);else if(!a&&!l&&o^c){var re=f;o?(C=1,I=O(I,D,B),C=0,f=!1,I=O(I,D,B),f=re):(C=0,I=O(I,D,B),I=P(I,D),C=1,f=!1,I=O(I,D,B),f=re,I=P(I,D))}}else C=0,I=O(I,D,B);else C=o?1:0,I=O(I,D,B);return I},this.__bidiEngine__.setOptions=function(I){I&&(a=I.isInputVisual,l=I.isOutputVisual,o=I.isInputRtl,c=I.isOutputRtl,f=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([r.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([r.doBidiReorder(i[o])]);n.text=a}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])})(gr),gr.API.TTFFont=(function(){function t(e){var r;if(this.rawData=e,r=this.contents=new wh(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new _fe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new ofe(this.contents),this.head=new cfe(this),this.name=new pfe(this),this.cmap=new VF(this),this.toUnicode={},this.hhea=new ufe(this),this.maxp=new mfe(this),this.hmtx=new gfe(this),this.post=new hfe(this),this.os2=new ffe(this),this.loca=new wfe(this),this.glyf=new xfe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,c;for(c=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t})();var gc,wh=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,i;for(i=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(e.charCodeAt(r)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,i,s,a,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*i+16777216*s+65536*a+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,i,s;for(s=[],n=0,i=e.length;n<i;n++)r=e[n],s.push(this.writeByte(r));return s},t})(),ofe=(function(){var t;function e(r){var n,i,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,i,s,a,o,l,c,f,p,g,m,_,w;for(w in m=Object.keys(r).length,l=Math.log(2),p=16*Math.floor(Math.log(m)/l),a=Math.floor(p/l),f=16*m-p,(i=new wh).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(a),i.writeShort(f),s=16*m,c=i.pos+s,o=null,_=[],r)for(g=r[w],i.writeString(w),i.writeInt(t(g)),i.writeInt(c),i.writeInt(g.length),_=_.concat(g),w==="head"&&(o=c),c+=g.length;c%4;)_.push(0),c++;return i.write(_),n=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(n),i.data},t=function(r){var n,i,s,a;for(r=UF.call(r);r.length%4;)r.push(0);for(s=new wh(r),i=0,n=0,a=r.length;n<a;n=n+=4)i+=s.readUInt32();return 4294967295&i},e})(),lfe={}.hasOwnProperty,cu=function(t,e){for(var r in e)lfe.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};gc=(function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var cfe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return cu(t,gc),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new wh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t})(),nN=(function(){function t(e,r){var n,i,s,a,o,l,c,f,p,g,m,_,w,b,k,R,C;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),g=m/2,e.pos+=6,s=(function(){var j,X;for(X=[],l=j=0;0<=g?j<g:j>g;l=0<=g?++j:--j)X.push(e.readUInt16());return X})(),e.pos+=2,w=(function(){var j,X;for(X=[],l=j=0;0<=g?j<g:j>g;l=0<=g?++j:--j)X.push(e.readUInt16());return X})(),c=(function(){var j,X;for(X=[],l=j=0;0<=g?j<g:j>g;l=0<=g?++j:--j)X.push(e.readUInt16());return X})(),f=(function(){var j,X;for(X=[],l=j=0;0<=g?j<g:j>g;l=0<=g?++j:--j)X.push(e.readUInt16());return X})(),i=(this.length-e.pos+this.offset)/2,o=(function(){var j,X;for(X=[],l=j=0;0<=i?j<i:j>i;l=0<=i?++j:--j)X.push(e.readUInt16());return X})(),l=k=0,C=s.length;k<C;l=++k)for(b=s[l],n=R=_=w[l];_<=b?R<=b:R>=b;n=_<=b?++R:--R)f[l]===0?a=n+c[l]:(a=o[f[l]/2+(n-_)-(g-l)]||0)!==0&&(a+=c[l]),this.codeMap[n]=65535&a}e.pos=p}return t.encode=function(e,r){var n,i,s,a,o,l,c,f,p,g,m,_,w,b,k,R,C,j,X,K,P,A,T,O,I,D,B,re,_e,Ce,we,ce,H,te,J,N,U,W,Y,ae,pe,he,xe,ke,Fe,oe;switch(re=new wh,a=Object.keys(e).sort(function(Ze,Re){return Ze-Re}),r){case"macroman":for(w=0,b=(function(){var Ze=[];for(_=0;_<256;++_)Ze.push(0);return Ze})(),R={0:0},s={},_e=0,H=a.length;_e<H;_e++)R[xe=e[i=a[_e]]]==null&&(R[xe]=++w),s[i]={old:e[i],new:R[e[i]]},b[i]=R[e[i]];return re.writeUInt16(1),re.writeUInt16(0),re.writeUInt32(12),re.writeUInt16(0),re.writeUInt16(262),re.writeUInt16(0),re.write(b),{charMap:s,subtable:re.data,maxGlyphID:w+1};case"unicode":for(D=[],p=[],C=0,R={},n={},k=c=null,Ce=0,te=a.length;Ce<te;Ce++)R[X=e[i=a[Ce]]]==null&&(R[X]=++C),n[i]={old:X,new:R[X]},o=R[X]-i,k!=null&&o===c||(k&&p.push(k),D.push(i),c=o),k=i;for(k&&p.push(k),p.push(65535),D.push(65535),O=2*(T=D.length),A=2*Math.pow(Math.log(T)/Math.LN2,2),g=Math.log(A/2)/Math.LN2,P=2*T-A,l=[],K=[],m=[],_=we=0,J=D.length;we<J;_=++we){if(I=D[_],f=p[_],I===65535){l.push(0),K.push(0);break}if(I-(B=n[I].new)>=32768)for(l.push(0),K.push(2*(m.length+T-_)),i=ce=I;I<=f?ce<=f:ce>=f;i=I<=f?++ce:--ce)m.push(n[i].new);else l.push(B-I),K.push(0)}for(re.writeUInt16(3),re.writeUInt16(1),re.writeUInt32(12),re.writeUInt16(4),re.writeUInt16(16+8*T+2*m.length),re.writeUInt16(0),re.writeUInt16(O),re.writeUInt16(A),re.writeUInt16(g),re.writeUInt16(P),pe=0,N=p.length;pe<N;pe++)i=p[pe],re.writeUInt16(i);for(re.writeUInt16(0),he=0,U=D.length;he<U;he++)i=D[he],re.writeUInt16(i);for(ke=0,W=l.length;ke<W;ke++)o=l[ke],re.writeUInt16(o);for(Fe=0,Y=K.length;Fe<Y;Fe++)j=K[Fe],re.writeUInt16(j);for(oe=0,ae=m.length;oe<ae;oe++)w=m[oe],re.writeUInt16(w);return{charMap:n,subtable:re.data,maxGlyphID:C+1}}},t})(),VF=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return cu(t,gc),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new nN(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,i;return r==null&&(r="macroman"),n=nN.encode(e,r),(i=new wh).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t})(),ufe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return cu(t,gc),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),ffe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return cu(t,gc),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),hfe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return cu(t,gc),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)r=e.readByte(),i.push(this.names.push(e.readString(r)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var a,o,l;for(l=[],s=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;s=0<=o?++a:--a)l.push(e.readUInt32());return l}).call(this)}},t})(),dfe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pfe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return cu(t,gc),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,i,s,a,o,l,c,f,p,g;for(e.pos=this.offset,e.readShort(),r=e.readShort(),o=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(l={},s=f=0,p=n.length;f<p;s=++f)i=n[s],e.pos=i.offset,c=e.readString(i.length),a=new dfe(c,i),l[g=i.nameID]==null&&(l[g]=[]),l[i.nameID].push(a);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t})(),mfe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return cu(t,gc),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),gfe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return cu(t,gc),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,i,s,a,o,l;for(e.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var c,f;for(f=[],r=c=0;0<=i?c<i:c>i;r=0<=i?++c:--c)f.push(e.readInt16());return f})(),this.widths=(function(){var c,f,p,g;for(g=[],c=0,f=(p=this.metrics).length;c<f;c++)s=p[c],g.push(s.advance);return g}).call(this),n=this.widths[this.widths.length-1],l=[],r=a=0;0<=i?a<i:a>i;r=0<=i?++a:--a)l.push(this.widths.push(n));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),UF=[].slice,xfe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return cu(t,gc),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,i,s,a,o,l,c,f,p;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,a=(o=new wh(r.read(i))).readShort(),c=o.readShort(),p=o.readShort(),l=o.readShort(),f=o.readShort(),this.cache[e]=a===-1?new yfe(o,c,p,l,f):new vfe(o,a,c,p,l,f),this.cache[e]))},t.prototype.encode=function(e,r,n){var i,s,a,o,l;for(a=[],s=[],o=0,l=r.length;o<l;o++)i=e[r[o]],s.push(a.length),i&&(a=a.concat(i.encode(n)));return s.push(a.length),{table:a,offsets:s}},t})(),vfe=(function(){function t(e,r,n,i,s,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),yfe=(function(){function t(e,r,n,i,s){var a,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new wh(UF.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t})(),wfe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return cu(t,gc),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),i=0,s=0,a=0;a<n.length;++a)if(n[a]=i,s<r.length&&r[s]==a){++s,n[a]=i;var o=this.offsets[a],l=this.offsets[a+1]-o;l>0&&(i+=l)}for(var c=new Array(4*n.length),f=0;f<n.length;++f)c[4*f+3]=255&n[f],c[4*f+2]=(65280&n[f])>>8,c[4*f+1]=(16711680&n[f])>>16,c[4*f]=(4278190080&n[f])>>24;return c},t})(),_fe=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,i,s;for(r in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=i[n];return e},t.prototype.glyphsFor=function(e){var r,n,i,s,a,o,l;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in r=[],i)(n=i[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in l=this.glyphsFor(r))n=l[s],i[s]=n;return i},t.prototype.encode=function(e,r){var n,i,s,a,o,l,c,f,p,g,m,_,w,b,k;for(i in n=VF.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),m={0:0},k=n.charMap)m[(l=k[i]).old]=l.new;for(_ in g=n.maxGlyphID,a)_ in m||(m[_]=g++);return f=(function(R){var C,j;for(C in j={},R)j[R[C]]=C;return j})(m),p=Object.keys(f).sort(function(R,C){return R-C}),w=(function(){var R,C,j;for(j=[],R=0,C=p.length;R<C;R++)o=p[R],j.push(f[o]);return j})(),s=this.font.glyf.encode(a,w,m),c=this.font.loca.encode(s.offsets,w),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},t})();gr.API.PDFObject=(function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,i,s,a;if(Array.isArray(r))return"["+(function(){var o,l,c;for(c=[],o=0,l=r.length;o<l;o++)n=r[o],c.push(e.convert(n));return c})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in s=["<<"],r)a=r[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+r},e})();function zF(t,e,r,n,i){n=n||{};var s=1.15,a=i.internal.scaleFactor,o=i.internal.getFontSize()/a,l=i.getLineHeightFactor?i.getLineHeightFactor():s,c=o*l,f=/\r\n|\r|\n/g,p="",g=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(p=typeof t=="string"?t.split(f):t,g=p.length||1),r+=o*(2-s),n.valign==="middle"?r-=g/2*c:n.valign==="bottom"&&(r-=g*c),n.halign==="center"||n.halign==="right"){var m=o;if(n.halign==="center"&&(m*=.5),p&&g>=1){for(var _=0;_<p.length;_++)i.text(p[_],e-i.getStringUnitWidth(p[_])*m,r),r+=c;return i}e-=i.getStringUnitWidth(t)*m}return n.halign==="justify"?i.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(t,e,r),i}var iN={},gp=(function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:iN=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,i,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,l=a.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var f=t.unifyColor(e.fillColor);f&&(n=this.jsPDFDocument).setFillColor.apply(n,f),f=t.unifyColor(e.textColor),f&&(i=this.jsPDFDocument).setTextColor.apply(i,f),f=t.unifyColor(e.lineColor),f&&(s=this.jsPDFDocument).setDrawColor.apply(s,f),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,i,s){return this.jsPDFDocument.rect(e,r,n,i,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return iN||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t})(),Q_=function(t,e){return Q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Q_(t,e)};function $F(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Q_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var qF=(function(t){$F(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e})(Array);function bfe(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Efe(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Cv(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],i=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,a){return Math.max(s,a)},0);return i}function HF(t,e,r,n){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:s});var a=WF(i,!1);a&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,a)}function WF(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function Cy(t,e){var r,n,i,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function GF(t,e){var r=Cy(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function Sfe(t,e,r,n,i){var s={},a=1.3333333333333333,o=P5(e,function(C){return i.getComputedStyle(C).backgroundColor});o!=null&&(s.fillColor=o);var l=P5(e,function(C){return i.getComputedStyle(C).color});l!=null&&(s.textColor=l);var c=Tfe(n,r);c&&(s.cellPadding=c);var f="borderTopColor",p=a*r,g=n.borderTopWidth;if(n.borderBottomWidth===g&&n.borderRightWidth===g&&n.borderLeftWidth===g){var m=(parseFloat(g)||0)/p;m&&(s.lineWidth=m)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/p,right:(parseFloat(n.borderRightWidth)||0)/p,bottom:(parseFloat(n.borderBottomWidth)||0)/p,left:(parseFloat(n.borderLeftWidth)||0)/p},s.lineWidth.top||(s.lineWidth.right?f="borderRightColor":s.lineWidth.bottom?f="borderBottomColor":s.lineWidth.left&&(f="borderLeftColor"));var _=P5(e,function(C){return i.getComputedStyle(C)[f]});_!=null&&(s.lineColor=_);var w=["left","right","center","justify"];w.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),w=["middle","bottom","top"],w.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var b=parseInt(n.fontSize||"");isNaN(b)||(s.fontSize=b/a);var k=kfe(n);k&&(s.fontStyle=k);var R=(n.fontFamily||"").toLowerCase();return t.indexOf(R)!==-1&&(s.font=R),s}function kfe(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function P5(t,e){var r=KF(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function KF(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:KF(t.parentElement,e):r}function Tfe(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(o){return parseInt(o||"0")/n}),a=Cy(s,0);return i>a.top&&(a.top=i),i>a.bottom&&(a.bottom=i),a}function XF(t,e,r,n,i){var s,a;n===void 0&&(n=!1),i===void 0&&(i=!1);var o;typeof e=="string"?o=r.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),c=t.scaleFactor(),f=[],p=[],g=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:f,body:p,foot:g};for(var m=0;m<o.rows.length;m++){var _=o.rows[m],w=(a=(s=_?.parentElement)===null||s===void 0?void 0:s.tagName)===null||a===void 0?void 0:a.toLowerCase(),b=Afe(l,c,r,_,n,i);b&&(w==="thead"?f.push(b):w==="tfoot"?g.push(b):p.push(b))}return{head:f,body:p,foot:g}}function Afe(t,e,r,n,i,s){for(var a=new qF(n),o=0;o<n.cells.length;o++){var l=n.cells[o],c=r.getComputedStyle(l);if(i||c.display!=="none"){var f=void 0;s&&(f=Sfe(t,l,e,c,r)),a.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:f,_element:l,content:Nfe(l)})}}var p=r.getComputedStyle(n);if(a.length>0&&(i||p.display!=="none"))return a}function Nfe(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function Cfe(t,e,r){for(var n=0,i=[t,e,r];n<i.length;n++){var s=i[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Ou(t,e,r,n,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}function YF(t,e){var r=new gp(t),n=r.getDocumentOptions(),i=r.getGlobalOptions();Cfe(i,n,e);var s=Ou({},i,n,e),a;typeof window<"u"&&(a=window);var o=Ife(i,n,e),l=Pfe(i,n,e),c=Rfe(r,s),f=Lfe(r,s,a);return{id:e.tableId,content:f,hooks:l,styles:o,settings:c}}function Ife(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var c=t[l],f=e[l],p=r[l];n.columnStyles=Ou({},c,f,p)}else{var g=[t,e,r],m=g.map(function(_){return _[l]||{}});n[l]=Ou({},m[0],m[1],m[2])}},s=0,a=Object.keys(n);s<a.length;s++){var o=a[s];i(o)}return n}function Pfe(t,e,r){for(var n=[t,e,r],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,a=n;s<a.length;s++){var o=a[s];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function Rfe(t,e){var r,n,i,s,a,o,l,c,f,p,g,m,_=Cy(e.margin,40/t.scaleFactor()),w=(r=Ffe(t,e.startY))!==null&&r!==void 0?r:_.top,b;e.showFoot===!0?b="everyPage":e.showFoot===!1?b="never":b=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var k;e.showHead===!0?k="everyPage":e.showHead===!1?k="never":k=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var R=(s=e.useCss)!==null&&s!==void 0?s:!1,C=e.theme||(R?"plain":"striped"),j=!!e.horizontalPageBreak,X=(a=e.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:R,theme:C,startY:w,margin:_,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=e.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(f=e.tableWidth)!==null&&f!==void 0?f:"auto",showHead:k,showFoot:b,tableLineWidth:(p=e.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(g=e.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:j,horizontalPageBreakRepeat:X,horizontalPageBreakBehaviour:(m=e.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function Ffe(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),i=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var a=r.startPageNumber+r.pageNumber-1;s=a===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&r?.finalY!=null?r.finalY+20/n:null}function Lfe(t,e,r){var n=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var a=e.includeHiddenHtml;if(r){var o=XF(t,e.html,r,a,e.useCss)||{};n=o.head||n,i=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||Dfe(n,i,s);return{columns:l,head:n,body:i,foot:s}}function Dfe(t,e,r){var n=t[0]||e[0]||r[0]||[],i=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var a=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(a=o?.colSpan||1);for(var l=0;l<a;l++){var c=void 0;Array.isArray(n)?c=i.length:c=s+(l>0?"_".concat(l):"");var f={dataKey:c};i.push(f)}}),i}var J_=(function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t})(),Ofe=(function(t){$F(e,t);function e(r,n,i,s,a,o){var l=t.call(this,r,n,o)||this;return l.cell=i,l.row=s,l.column=a,l.section=s.section,l}return e})(J_),jfe=(function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,i,s,a){for(var o=0,l=r;o<l.length;o++){var c=l[o],f=new Ofe(e,this,n,i,s,a),p=c(f)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],p)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var s=i[n];s(new J_(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var s=i[n];s(new J_(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t})(),QF=(function(){function t(e,r,n,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof qF&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=i,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,i){var s;return Math.max(n,((s=r.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var i=r.cells[n.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(i,s){var a=n.cells[s.index];if(!a)return 0;var o=r.getLineHeight(a.styles.fontSize),l=a.padding("vertical"),c=l+o;return c>i?c:i},0)},t})(),JF=(function(){function t(e,r,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var a=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=a.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*r,s=n*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=Cy(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t})(),Mfe=(function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,i=e.allRows();n<i.length;n++){var s=i[n],a=s.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(r=Math.max(r,a.styles.cellWidth))}return r},t})();function Bfe(t,e){Vfe(t,e);var r=[],n=0;e.columns.forEach(function(s){var a=s.getMaxCustomCellWidth(e);a?s.width=a:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var i=e.getWidth(t.pageSize().width)-n;i&&(i=Z_(r,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=Z_(r,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),zfe(e),$fe(e,t),Ufe(e)}function Vfe(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,i=GF(t,e);e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],c=s.cells[l.index];if(c){var f=e.hooks.didParseCell;e.callCellHooks(t,f,c,s,l,null);var p=c.padding("horizontal");c.contentWidth=Cv(c.text,c.styles,t)+p;var g=Cv(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,t);if(c.minReadableWidth=g+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||n===!0)c.contentWidth>i?(c.minWidth=i,c.wrappedWidth=i):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var m=10/r;c.minWidth=c.styles.minCellWidth||m,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],c=s.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var f=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},p=f.cellWidth||f.minCellWidth;p&&typeof p=="number"&&(l.minWidth=p,l.wrappedWidth=p)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function Z_(t,e,r){for(var n=e,i=t.reduce(function(m,_){return m+_.wrappedWidth},0),s=0;s<t.length;s++){var a=t[s],o=a.wrappedWidth/i,l=n*o,c=a.width+l,f=r(a),p=c<f?f:c;e-=p-a.width,a.width=p}if(e=Math.round(e*1e10)/1e10,e){var g=t.filter(function(m){return e<0?m.width>r(m):!0});g.length&&(e=Z_(g,e,r))}return e}function Ufe(t){for(var e={},r=1,n=t.allRows(),i=0;i<n.length;i++)for(var s=n[i],a=0,o=t.columns;a<o.length;a++){var l=o[a],c=e[l.index];if(r>1)r--,delete s.cells[l.index];else if(c)c.cell.height+=s.height,r=c.cell.colSpan,delete s.cells[l.index],c.left--,c.left<=1&&delete e[l.index];else{var f=s.cells[l.index];if(!f)continue;if(f.height=s.height,f.rowSpan>1){var p=n.length-i,g=f.rowSpan>p?p:f.rowSpan;e[l.index]={cell:f,left:g,row:s}}}}}function zfe(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],i=null,s=0,a=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(a-=1,a>1&&t.columns[o+1])s+=l.width,delete n.cells[l.index];else if(i){var c=i;delete n.cells[l.index],i=null,c.width=l.width+s}else{var c=n.cells[l.index];if(!c)continue;if(a=c.colSpan,s=0,c.colSpan>1){i=c,s+=l.width;continue}c.width=l.width+s}}}function $fe(t,e){for(var r={count:0,height:0},n=0,i=t.allRows();n<i.length;n++){for(var s=i[n],a=0,o=t.columns;a<o.length;a++){var l=o[a],c=s.cells[l.index];if(c){e.applyStyles(c.styles,!0);var f=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=e.splitTextToSize(c.text,f+1/e.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=sN(c.text,f,c.styles,e,"...");else if(c.styles.overflow==="hidden")c.text=sN(c.text,f,c.styles,e,"");else if(typeof c.styles.overflow=="function"){var p=c.styles.overflow(c.text,f);typeof p=="string"?c.text=[p]:c.text=p}c.contentHeight=c.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var g=c.contentHeight/c.rowSpan;c.rowSpan>1&&r.count*r.height<g*c.rowSpan?r={height:g,count:c.rowSpan}:r&&r.count>0&&r.height>g&&(g=r.height),g>s.height&&(s.height=g)}}r.count--}}function sN(t,e,r,n,i){return t.map(function(s){return qfe(s,e,r,n,i)})}function qfe(t,e,r,n,i){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=Cv(t,r,n))return t;for(;e<Cv(t+i,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function ZF(t,e){var r=new gp(t),n=Hfe(e,r.scaleFactor()),i=new jfe(e,n);return Bfe(r,i),r.applyStyles(r.userStyles),i}function Hfe(t,e){var r=t.content,n=Gfe(r.columns);if(r.head.length===0){var i=aN(n,"head");i&&r.head.push(i)}if(r.foot.length===0){var i=aN(n,"foot");i&&r.foot.push(i)}var s=t.settings.theme,a=t.styles;return{columns:n,head:R5("head",r.head,n,a,s,e),body:R5("body",r.body,n,a,s,e),foot:R5("foot",r.foot,n,a,s,e)}}function R5(t,e,r,n,i,s){var a={},o=e.map(function(l,c){for(var f=0,p={},g=0,m=0,_=0,w=r;_<w.length;_++){var b=w[_];if(a[b.index]==null||a[b.index].left===0)if(m===0){var k=void 0;Array.isArray(l)?k=l[b.index-g-f]:k=l[b.dataKey];var R={};typeof k=="object"&&!Array.isArray(k)&&(R=k?.styles||{});var C=Kfe(t,b,c,i,n,s,R),j=new JF(k,C,t);p[b.dataKey]=j,p[b.index]=j,m=j.colSpan-1,a[b.index]={left:j.rowSpan-1,times:m}}else m--,g++;else a[b.index].left--,m=a[b.index].times,f++}return new QF(l,c,t,p)});return o}function aN(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var i=Wfe(e,n.raw);i!=null&&(r[n.dataKey]=i)}}),Object.keys(r).length>0?r:null}function Wfe(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function Gfe(t){return t.map(function(e,r){var n,i;return typeof e=="object"?i=(n=e.dataKey)!==null&&n!==void 0?n:r:i=r,new Mfe(i,e,r)})}function Kfe(t,e,r,n,i,s,a){var o=Efe(n),l;t==="head"?l=i.headStyles:t==="body"?l=i.bodyStyles:t==="foot"&&(l=i.footStyles);var c=Ou({},o.table,o[t],i.styles,l),f=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},p=t==="body"?f:{},g=t==="body"&&r%2===0?Ou({},o.alternateRow,i.alternateRowStyles):{},m=bfe(s),_=Ou({},m,c,g,p);return Ou(_,a)}function Xfe(t,e,r){var n;r===void 0&&(r={});var i=GF(t,e),s=new Map,a=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(g){var m=e.columns.find(function(_){return _.dataKey===g||_.index===g});m&&!s.has(m.index)&&(s.set(m.index,!0),a.push(m.index),o.push(e.columns[m.index]),i-=m.wrappedWidth)});for(var c=!0,f=(n=r?.start)!==null&&n!==void 0?n:0;f<e.columns.length;){if(s.has(f)){f++;continue}var p=e.columns[f].wrappedWidth;if(c||i>=p)c=!1,a.push(f),o.push(e.columns[f]),i-=p;else break;f++}return{colIndexes:a,columns:o,lastIndex:f-1}}function Yfe(t,e){for(var r=[],n=0;n<e.columns.length;n++){var i=Xfe(t,e,{start:n});i.columns.length&&(r.push(i),n=i.lastIndex)}return r}function eL(t,e){var r=e.settings,n=r.startY,i=r.margin,s={x:i.left,y:n},a=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+i.bottom+a;if(r.pageBreak==="avoid"){var l=e.body,c=l.reduce(function(g,m){return g+m.height},0);o+=c}var f=new gp(t);(r.pageBreak==="always"||r.startY!=null&&o>f.pageSize().height)&&(rL(f),s.y=i.top),e.callWillDrawPageHooks(f,s);var p=Ou({},s);e.startPageNumber=f.pageNumber(),r.horizontalPageBreak?Qfe(f,e,p,s):(f.applyStyles(f.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(g){return Wu(f,e,g,s,e.columns)}),f.applyStyles(f.userStyles),e.body.forEach(function(g,m){var _=m===e.body.length-1;Iv(f,e,g,_,p,s,e.columns)}),f.applyStyles(f.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(g){return Wu(f,e,g,s,e.columns)})),HF(f,e,p,s),e.callEndPageHooks(f,s),e.finalY=s.y,t.lastAutoTable=e,f.applyStyles(f.userStyles)}function Qfe(t,e,r,n){var i=Yfe(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(c,f){t.applyStyles(t.userStyles),f>0?N1(t,e,r,n,c.columns,!0):oN(t,e,n,c.columns),Jfe(t,e,r,n,c.columns),F5(t,e,n,c.columns)});else for(var a=-1,o=i[0],l=function(){var c=a;if(o){t.applyStyles(t.userStyles);var f=o.columns;a>=0?N1(t,e,r,n,f,!0):oN(t,e,n,f),c=lN(t,e,a+1,n,f),F5(t,e,n,f)}var p=c-a;i.slice(1).forEach(function(g){t.applyStyles(t.userStyles),N1(t,e,r,n,g.columns,!0),lN(t,e,a+1,n,g.columns,p),F5(t,e,n,g.columns)}),a=c};a<e.body.length-1;)l()}function oN(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return Wu(t,e,s,r,n)})}function Jfe(t,e,r,n,i){t.applyStyles(t.userStyles),e.body.forEach(function(s,a){var o=a===e.body.length-1;Iv(t,e,s,o,r,n,i)})}function lN(t,e,r,n,i,s){t.applyStyles(t.userStyles),s=s??e.body.length;var a=Math.min(r+s,e.body.length),o=-1;return e.body.slice(r,a).forEach(function(l,c){var f=r+c===e.body.length-1,p=tL(t,e,f,n);l.canEntireRowFit(p,i)&&(Wu(t,e,l,n,i),o=r+c)}),o}function F5(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return Wu(t,e,s,r,n)})}function Zfe(t,e,r){var n=r.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),s=Math.floor((e-i)/n);return Math.max(0,s)}function ehe(t,e,r,n){var i={};t.spansMultiplePages=!0,t.height=0;for(var s=0,a=0,o=r.columns;a<o.length;a++){var l=o[a],c=t.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var f=new JF(c.raw,c.styles,c.section);f=Ou(f,c),f.text=[];var p=Zfe(c,e,n);c.text.length>p&&(f.text=c.text.splice(p,c.text.length));var g=n.scaleFactor(),m=n.getLineHeightFactor();c.contentHeight=c.getContentHeight(g,m),c.contentHeight>=e&&(c.contentHeight=e,f.styles.minCellHeight-=e),c.contentHeight>t.height&&(t.height=c.contentHeight),f.contentHeight=f.getContentHeight(g,m),f.contentHeight>s&&(s=f.contentHeight),i[l.index]=f}}var _=new QF(t.raw,-1,t.section,i,!0);_.height=s;for(var w=0,b=r.columns;w<b.length;w++){var l=b[w],f=_.cells[l.index];f&&(f.height=_.height);var c=t.cells[l.index];c&&(c.height=t.height)}return _}function the(t,e,r,n){var i=t.pageSize().height,s=n.settings.margin,a=s.top+s.bottom,o=i-a;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,t),c=l<r;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var f=e.hasRowSpan(n.columns),p=e.getMaxCellHeight(n.columns)>o;return p?(f&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(f||n.settings.rowPageBreak==="avoid")}function Iv(t,e,r,n,i,s,a){var o=tL(t,e,n,s);if(r.canEntireRowFit(o,a))Wu(t,e,r,s,a);else if(the(t,r,o,e)){var l=ehe(r,o,e,t);Wu(t,e,r,s,a),N1(t,e,i,s,a),Iv(t,e,l,n,i,s,a)}else N1(t,e,i,s,a),Iv(t,e,r,n,i,s,a)}function Wu(t,e,r,n,i){n.x=e.settings.margin.left;for(var s=0,a=i;s<a.length;s++){var o=a[s],l=r.cells[o.index];if(!l){n.x+=o.width;continue}t.applyStyles(l.styles),l.x=n.x,l.y=n.y;var c=e.callCellHooks(t,e.hooks.willDrawCell,l,r,o,n);if(c===!1){n.x+=o.width;continue}rhe(t,l,n);var f=l.getTextPos();zF(l.text,f.x,f.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function rhe(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=WF(n.lineWidth,n.fillColor);i&&t.rect(e.x,r.y,e.width,e.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),nhe(t,e,r,n.lineWidth))}function nhe(t,e,r,n){var i,s,a,o;n.top&&(i=r.x,s=r.y,a=r.x+e.width,o=r.y,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),l(n.top,i,s,a,o)),n.bottom&&(i=r.x,s=r.y+e.height,a=r.x+e.width,o=r.y+e.height,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),l(n.bottom,i,s,a,o)),n.left&&(i=r.x,s=r.y,a=r.x,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,i,s,a,o)),n.right&&(i=r.x+e.width,s=r.y,a=r.x+e.width,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,i,s,a,o));function l(c,f,p,g,m){t.getDocument().setLineWidth(c),t.getDocument().line(f,p,g,m,"S")}}function tL(t,e,r,n){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-i}function N1(t,e,r,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(o){return Wu(t,e,o,n,i)}),e.callEndPageHooks(t,n);var a=e.settings.margin;HF(t,e,r,n),rL(t),e.pageNumber++,n.x=a.left,n.y=a.top,r.y=a.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return Wu(t,e,o,n,i)}),t.applyStyles(t.userStyles))}function rL(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function ihe(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],i=YF(this,n),s=ZF(this,i);return eL(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,i){zF(e,r,n,i,this)},t.API.autoTableSetDefaults=function(e){return gp.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){gp.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new gp(this),s=XF(i,e,window,r,!1),a=s.head,o=s.body,l=((n=a[0])===null||n===void 0?void 0:n.map(function(c){return c.content}))||[];return{columns:l,rows:o,data:o}}}var L5;function cN(t,e){var r=YF(t,e),n=ZF(t,r);eL(t,n)}try{if(typeof window<"u"&&window){var uN=window,fN=uN.jsPDF||((L5=uN.jspdf)===null||L5===void 0?void 0:L5.jsPDF);fN&&ihe(fN)}}catch(t){console.error("Could not apply autoTable plugin",t)}async function she(t){const e=new gr;e.setFont("helvetica","normal"),e.setFontSize(16),e.text("Pharmacy Profile Report",20,20),e.setFontSize(12),e.text(`Name: ${t?.displayName||"Pharmacy"}`,20,35),e.text(`Email: ${t?.email||""}`,20,45);const r=await Aa(doc(Et,"pharmacies",t.uid)),n=r.exists()?r.data():{};e.text(`Address: ${n.address||""}`,20,55),e.text(`Phone: ${n.phone||""}`,20,65);const s=(await ci(Vr(xr(Et,"products"),Wr("pharmacyId","==",t.uid)))).docs.map(c=>({id:c.id,...c.data()}));cN(e,{startY:75,head:[["Product Name","Category","Stock","SKU","Price"]],body:s.map(c=>[c.name,c.category,c.stock,c.sku,`${Number(c.price).toLocaleString()}`]),theme:"striped",headStyles:{fillColor:[54,165,255]},styles:{fontSize:10}});const o=(await ci(Vr(xr(Et,"orders"),Wr("pharmacyId","==",t.uid)))).docs.map(c=>({id:c.id,...c.data()}));let l=e.lastAutoTable?e.lastAutoTable.finalY+10:100;e.setFontSize(14),e.text("Orders",20,l),l+=6,cN(e,{startY:l,head:[["Order ID","Date","Total","Items"]],body:o.map(c=>[c.id.slice(0,8),c.createdAt?.toDate?.().toLocaleString?.()||"",`${Number(c.total).toLocaleString()}`,(c.items||[]).map(f=>`${f.name||f.productId} x${f.qty||f.quantity||1}`).join(", ")]),theme:"striped",headStyles:{fillColor:[54,165,255]},styles:{fontSize:9}}),e.save("pharmacy-profile-report.pdf")}function ahe({onSwitchToCustomer:t}){const{user:e,logout:r,profile:n}=Jn(),[i,s]=z.useState([]),[a,o]=z.useState(!1),[l,c]=z.useState(!1),[f,p]=z.useState(0),[g,m]=z.useState(0),[_,w]=z.useState(0),[b,k]=z.useState(null),[R,C]=z.useState(""),[j,X]=z.useState(""),[K,P]=z.useState(""),[A,T]=z.useState(""),[O,I]=z.useState(""),[D,B]=z.useState(""),[re,_e]=z.useState(null),[Ce,we]=z.useState(!1),[ce,H]=z.useState(!1),[te,J]=z.useState(!1),[N,U]=z.useState(new Set),[W,Y]=z.useState({displayName:e?.displayName||"Pharmacy",address:"",phone:"",email:e?.email||""}),[ae,pe]=z.useState(""),[he,xe]=z.useState(""),[ke,Fe]=z.useState(!1),[oe,Ze]=z.useState("products");z.useEffect(()=>{e&&e.role==="pharmacy"&&Ze("all")},[e]);const[Re,fe]=z.useState(null),[ut,rt]=z.useState([]),[lt,le]=z.useState(null),[je,ft]=z.useState(null),[Ie,Be]=z.useState(null),tt=40;function ot(Me){if(!Me)return null;if(Me.latitude&&Me.longitude)return{lat:Number(Me.latitude),lng:Number(Me.longitude)};if(Me.lat&&Me.lng)return{lat:Number(Me.lat),lng:Number(Me.lng)};if(Me.lat&&Me.lon)return{lat:Number(Me.lat),lng:Number(Me.lon)};if(Me.location&&typeof Me.location=="object"){if(Me.location.lat&&Me.location.lng)return{lat:Number(Me.location.lat),lng:Number(Me.location.lng)};if(Me.location.latitude&&Me.location.longitude)return{lat:Number(Me.location.latitude),lng:Number(Me.location.longitude)}}if(Me.coords&&typeof Me.coords=="object"){if(Me.coords.latitude&&Me.coords.longitude)return{lat:Number(Me.coords.latitude),lng:Number(Me.coords.longitude)};if(Me.coords.lat&&Me.coords.lng)return{lat:Number(Me.coords.lat),lng:Number(Me.coords.lng)}}return null}function ht(Me,Mt){if(!Me||!Mt)return null;const Vt=ir=>ir*Math.PI/180,rr=6371,ar=Vt(Mt.lat-Me.lat),ur=Vt(Mt.lng-Me.lng),Jt=Vt(Me.lat),mr=Vt(Mt.lat),an=Math.sin(ar/2),zr=Math.sin(ur/2),Nn=an*an+Math.cos(Jt)*Math.cos(mr)*zr*zr,Cn=2*Math.atan2(Math.sqrt(Nn),Math.sqrt(1-Nn));return rr*Cn}function Pt(Me,Mt){if(Me==null||Mt==null||Mt<=0)return null;const Vt=Me/Mt,rr=Math.round(Vt*60);if(rr<60)return`${rr} min`;const ar=Math.floor(rr/60),ur=rr%60;return`${ar}h ${ur}m`}z.useEffect(()=>{if(je||!("geolocation"in navigator))return;let Me=!0;return navigator.geolocation.getCurrentPosition(Mt=>{Me&&ft({lat:Mt.coords.latitude,lng:Mt.coords.longitude})},Mt=>{console.debug("[ProfilePharmacy] geolocation error",Mt)},{enableHighAccuracy:!1,timeout:1e4}),()=>{Me=!1}},[]),z.useEffect(()=>{if(!lt)return Be(null);const Me=ot(lt.data);if(!Me){Be(null);return}let Mt=je||null;if(!Mt&&lt&&lt.source==="users"){const ar=ot(lt.data);ar&&(Mt=ar)}if(!Mt){Be(null);return}const Vt=ht(Mt,Me);if(Vt==null){Be(null);return}const rr=Pt(Vt,tt);Be({distanceKm:Vt,eta:rr,speedKmh:tt,pharmCoords:Me,custCoords:Mt})},[lt,je]);const Ft=$i();z.useEffect(()=>{const Me=n?.uid||e?.uid;if(Me)return ay(s,Me)},[n,e]),z.useEffect(()=>{const Me=n?.uid||e?.uid;if(!Me)return;ci(Vr(xr(Et,"orders"),Wr("pharmacyId","==",Me))).then(an=>{let zr=0;an.forEach(Nn=>{const Cn=Nn.data();zr+=(Cn.items||[]).reduce((ir,qr)=>ir+(qr.count||qr.qty||qr.quantity||1),0)}),p(zr)}).catch(()=>{}),ci(Vr(xr(Et,"threads"),Wr("vendorId","==",Me))).then(an=>{m(an.size)}).catch(()=>{}),ci(Vr(xr(Et,"reviews"),Wr("pharmacyId","==",Me))).then(an=>{w(an.size)}).catch(()=>{});const Mt=kr(Et,"pharmacies",Me),Vt=kr(Et,"users",Me);let rr=null,ar=null;const ur=()=>{const an=zr=>{if(!zr)return"";const Nn=String(zr).trim();return!Nn||Nn.includes("@")||Nn.replace(/\D/g,"").length<6?"":Nn};try{console.debug("[ProfilePharmacy] refreshProfile - pharmData:",rr,"userData:",ar)}catch{}Y(zr=>{const Nn=rr&&rr.displayName||ar&&ar.displayName||e.displayName||zr.displayName,Cn=rr&&rr.address||ar&&ar.address||zr.address||"",ir=rr&&rr.phone||ar&&ar.phone||zr.phone||"",qr=an(ir),is=rr&&rr.email||ar&&ar.email||e.email||zr.email||"";try{console.debug("[ProfilePharmacy] computed profile ->",{displayName:Nn,address:Cn,rawPhone:ir,phone:qr,email:is})}catch{}return{displayName:Nn,address:Cn,phone:qr,email:is}})},Jt=pi(Mt,an=>{rr=an&&an.exists?an.data():null,ur()},()=>{}),mr=pi(Vt,an=>{ar=an&&an.exists?an.data():null,ur()},()=>{});return ur(),()=>{try{Jt&&Jt()}catch{}try{mr&&mr()}catch{}}},[n,e]);async function jt(){await she(n||e)}async function wt(){if(!b)return;let Me=D;await Za(kr(Et,"products",b.id),{name:R,category:j,stock:Number(K),sku:A,price:Number(O),image:Me||b.image||"",description:ae}),k(null)}function At(){k(null)}z.useEffect(()=>{b&&(C(b.name||""),X(b.category||""),P(b.stock||""),T(b.sku||""),I(b.price||""),B(b.image||""),_e(null),pe(b.description||""))},[b]);async function Xt(){const Me=(he||"").trim().toLowerCase();if(!Me){rt([]);return}const Mt=[];if((oe==="products"||oe==="all")&&i.forEach(Vt=>{`${Vt.name||""} ${Vt.category||""} ${Vt.sku||""}`.toLowerCase().includes(Me)&&Mt.push({type:"product",title:Vt.name||"Untitled",subtitle:`${Vt.category||"Uncategorized"}  SKU: ${Vt.sku||""}`,item:Vt})}),oe==="orders"||oe==="all"){let Vt=Re;Vt||(Vt=(await ci(Vr(xr(Et,"orders"),Wr("pharmacyId","==",n?.uid||e?.uid)))).docs.map(ar=>({id:ar.id,...ar.data()})),fe(Vt)),(Vt||[]).forEach(rr=>{`${rr.id} ${(rr.items||[]).map(ur=>ur.name).join(" ")} ${rr.customerName||""}`.toLowerCase().includes(Me)&&Mt.push({type:"order",title:`Order ${rr.id}`,subtitle:`${rr.items?.length||0} items  ${Number(rr.total||0).toLocaleString()}`,item:rr})})}rt(Mt)}z.useEffect(()=>{if(!ke)return;function Me(Mt){Mt.key==="Escape"&&(Fe(!1),xe(""),rt([]))}return window.addEventListener("keydown",Me),()=>window.removeEventListener("keydown",Me)},[ke]),z.useEffect(()=>{if(!ke)return;if(!(he||"").trim()){rt([]);return}const Mt=setTimeout(()=>{Xt()},300);return()=>clearTimeout(Mt)},[he,oe,ke]);function Gt(Me){try{return Me&&Me.toDate?Me.toDate().toISOString():Me||""}catch{return""}}function qt(){if(!i||i.length===0){alert("No products to export");return}const Me=i.map(ur=>({id:ur.id,name:ur.name||"",category:ur.category||"",sku:ur.sku||"",price:Number(ur.price||0),stock:Number(ur.stock||0),description:ur.description||"",image:ur.image||"",createdAt:Gt(ur.createdAt)})),Mt=VP.unparse(Me),Vt=new Blob([Mt],{type:"text/csv;charset=utf-8;"}),rr=URL.createObjectURL(Vt),ar=document.createElement("a");ar.href=rr,ar.download=`pharmacy-inventory-${e?.uid||"inventory"}.csv`,document.body.appendChild(ar),ar.click(),ar.remove(),URL.revokeObjectURL(rr)}function wr(){if(!i||i.length===0){alert("No products to export");return}const Me=i.map(mr=>({id:mr.id,name:mr.name||"",category:mr.category||"",sku:mr.sku||"",price:Number(mr.price||0),stock:Number(mr.stock||0),description:mr.description||"",image:mr.image||"",createdAt:Gt(mr.createdAt)})),Mt=A2.json_to_sheet(Me),Vt=A2.book_new();A2.book_append_sheet(Vt,Mt,"Inventory");const rr=W9(Vt,{bookType:"xlsx",type:"array"}),ar=new Blob([rr],{type:"application/octet-stream"}),ur=URL.createObjectURL(ar),Jt=document.createElement("a");Jt.href=ur,Jt.download=`pharmacy-inventory-${e?.uid||"inventory"}.xlsx`,document.body.appendChild(Jt),Jt.click(),Jt.remove(),URL.revokeObjectURL(ur)}if(!e)return d.jsx(q1,{lines:4,className:"my-8"});function rn({user:Me}){return!Me||Me.role!=="superuser"?null:d.jsxs("div",{className:"mt-8 rounded-3xl border bg-yellow-50 border-yellow-400 p-4 flex flex-col items-start relative",children:[d.jsx("div",{className:"text-[20px] font-bold text-yellow-700 mb-2",children:"Superuser Dashboard"}),d.jsxs("ul",{className:"space-y-2 text-[15px] text-yellow-900",children:[d.jsx("li",{children:"Manage all users (view, edit, suspend, delete)"}),d.jsx("li",{children:"Product oversight (add, edit, remove, approve/reject)"}),d.jsx("li",{children:"Prescription management"}),d.jsx("li",{children:"Analytics & reports"}),d.jsx("li",{children:"Moderation (reviews, chats, reported content)"}),d.jsx("li",{children:"System settings"}),d.jsx("li",{children:"Bulk operations"}),d.jsx("li",{children:"Audit logs"}),d.jsx("li",{children:"Impersonate users"})]}),d.jsx("div",{className:"mt-4 text-[13px] text-yellow-700",children:"(Feature scaffolding: UI and logic for each capability can be expanded here.)"})]})}return d.jsxs("div",{className:"pt-10 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col animate-fadeInUp",children:[d.jsx(rn,{user:e}),d.jsx("div",{className:"sticky top-0 z-20 bg-white/90 backdrop-blur-md pb-2 pt-4 -mx-4 sm:-mx-5 md:-mx-8 lg:-mx-12 xl:-mx-0 px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 transition-all duration-200",children:d.jsxs("div",{className:"w-full flex items-center justify-between",children:[d.jsxs("div",{className:"text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-light font-poppins leading-none animate-slideInLeft",children:["Pharmacy",d.jsx("br",{}),"Profile"]}),d.jsxs("div",{className:"flex items-center gap-3 animate-slideInRight",children:[d.jsxs("div",{className:"hidden sm:flex items-center border-b px-2 py-1 w-[min(420px,40vw)] max-w-[520px] input-interactive",children:[d.jsx("input",{value:he,onChange:Me=>xe(Me.target.value),onKeyDown:Me=>{Me.key==="Enter"&&(Xt(),Fe(!0))},placeholder:"Search products, orders, customers...",className:"flex-1 text-sm font-light outline-none truncate","aria-label":"Search products or orders"}),d.jsx("button",{onClick:()=>{Xt(),Fe(!0)},"aria-label":"Search",className:"ml-2 rounded-full p-2 text-sky-600",children:d.jsx(Zf,{className:"h-4 w-4"})})]}),d.jsx("button",{onClick:()=>Fe(!0),"aria-label":"Open search",className:"ml-2 rounded-full p-2 hover:bg-sky-50 sm:hidden",children:d.jsx(Zf,{className:"h-5 w-5 text-sky-600"})})]})]})}),ke&&d.jsx("div",{onClick:()=>{Fe(!1),xe(""),rt([])},className:"fixed inset-0 z-50 flex items-start justify-center pt-24 bg-black bg-opacity-30",role:"dialog","aria-modal":"true","aria-label":"Search modal",children:d.jsxs("div",{onClick:Me=>Me.stopPropagation(),className:"bg-white rounded-3xl w-[min(920px,95%)] p-4 shadow-xl border border-[#9ED3FF] max-h-[80vh] overflow-hidden",children:[d.jsxs("div",{className:"mb-3",children:[d.jsxs("div",{className:"flex items-center gap-3 w-full",children:[d.jsx("div",{className:"flex-1 min-w-0",children:d.jsxs("div",{className:"flex items-center bg-[#F0FAFF] border border-[#9ED3FF] rounded-full px-3 py-2 w-full overflow-hidden",children:[d.jsx(Zf,{className:"h-4 w-4 text-sky-600 mr-2 flex-shrink-0"}),d.jsx("input",{autoFocus:!0,value:he,onChange:Me=>xe(Me.target.value),onKeyDown:Me=>{Me.key==="Enter"&&Xt()},placeholder:"Search products, orders, customers...",className:"flex-1 min-w-0 bg-transparent text-sm outline-none truncate","aria-label":"Search query"})]})}),d.jsx("div",{className:"flex items-center gap-2",children:d.jsxs("select",{value:oe,onChange:Me=>Ze(Me.target.value),className:"rounded-full border border-[#9ED3FF] px-3 py-2 text-sm bg-white w-36",children:[d.jsx("option",{value:"products",children:"Products"}),d.jsx("option",{value:"orders",children:"Orders"}),d.jsx("option",{value:"all",children:"All"})]})})]}),d.jsx("div",{className:"w-full border-t mt-3",style:{borderColor:"#E6F7FF"}})]}),d.jsx("div",{className:"mt-4 max-h-[60vh] overflow-auto px-1 py-2",children:ut.length===0?d.jsx("div",{className:"text-zinc-500 p-4",children:"No results yet. Enter a query."}):d.jsx("ul",{className:"space-y-2",children:ut.map((Me,Mt)=>d.jsxs("li",{className:"p-2 rounded-2xl border border-[#9ED3FF] bg-white hover:bg-[#E3F3FF] transition-all duration-200 flex items-center gap-3 justify-between animate-fadeInUp card-interactive hover:shadow-md",style:{animationDelay:`${Mt*.05}s`},children:[d.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[d.jsx("div",{className:"flex-shrink-0",children:Me.type==="product"?d.jsx(dh,{name:Me.item?.name,image:Me.item?.image,category:Me.item?.category,size:48,className:"rounded-lg"}):d.jsx("div",{className:"h-12 w-12 rounded-lg bg-[#fff7ed] flex items-center justify-center border border-[#ffd7a8] animate-pulse-gentle",children:d.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",className:"text-orange-500",children:d.jsx("path",{d:"M3 7h18M3 12h18M3 17h18",stroke:"#f59e0b",strokeWidth:"1.5",strokeLinecap:"round"})})})}),d.jsxs("div",{className:"min-w-0",children:[d.jsx("div",{className:"font-semibold text-sm text-black truncate",children:Me.title}),d.jsx("div",{className:"text-xs text-zinc-500 truncate",children:Me.subtitle})]})]}),d.jsx("div",{className:"flex-shrink-0 flex items-center gap-2",children:Me.type==="product"?d.jsx("button",{onClick:()=>{k(Me.item),Fe(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 btn-interactive transition-all duration-200",children:"Edit"}):d.jsx("button",{onClick:()=>{Ft("/orders",{state:{highlightOrderId:Me.item.id}}),Fe(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 btn-interactive transition-all duration-200",children:"Open"})})]},Mt))})})]})}),d.jsxs("div",{className:"mt-8 w-full grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-6 items-start",children:[d.jsx("aside",{className:"min-w-0 lg:pr-2",children:d.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] border-[#36A5FF] p-4 flex flex-col items-start relative lg:sticky lg:top-24 overflow-hidden",children:[d.jsx("div",{className:"mb-2",children:e?.photoURL?d.jsx("img",{src:e.photoURL,alt:"Avatar",className:"h-16 w-16 rounded-full object-cover border border-[#9ED3FF] shadow"}):d.jsx("div",{className:"h-16 w-16 rounded-full bg-[#E3F3FF] flex items-center justify-center border border-[#9ED3FF] shadow",children:d.jsx("span",{className:"text-sky-600 text-2xl font-light",children:W.displayName&&W.displayName.charAt?W.displayName.charAt(0):"P"})})}),d.jsx("div",{className:"text-3xl font-light font-poppins text-sky-600 mb-1 tracking-tight truncate w-full",children:W.displayName||"Pharmacy"}),d.jsx("div",{className:"w-full border-b mb-2",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"}}),d.jsx("div",{className:"text-[13px] text-zinc-500 font-light mb-1 truncate w-full",children:W.email||e?.email}),W.address&&d.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 flex items-center truncate w-full",children:[d.jsx(ac,{className:"h-4 w-4 mr-1 flex-shrink-0"}),d.jsx("span",{className:"truncate",children:W.address})]}),W.phone&&d.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 flex items-center truncate w-full",children:[d.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mr-1 flex-shrink-0",children:d.jsx("path",{d:"M2.41333 5.19333C3.37333 7.08 4.92 8.62667 6.80667 9.58667L8.27333 8.12C8.46 7.93333 8.72 7.88 8.95333 7.95333C9.7 8.2 10.5 8.33333 11.3333 8.33333C11.5101 8.33333 11.6797 8.40357 11.8047 8.5286C11.9298 8.65362 12 8.82319 12 9V11.3333C12 11.5101 11.9298 11.6797 11.8047 11.8047C11.6797 11.9298 11.5101 12 11.3333 12C8.32755 12 5.44487 10.806 3.31946 8.68054C1.19404 6.55513 0 3.67245 0 0.666667C0 0.489856 0.0702379 0.320286 0.195262 0.195262C0.320286 0.0702379 0.489856 0 0.666667 0H3C3.17681 0 3.34638 0.0702379 3.4714 0.195262C3.59643 0.320286 3.66667 0.489856 3.66667 0.666667C3.66667 1.5 3.8 2.3 4.04667 3.04667C4.12 3.28 4.06667 3.54 3.88 3.72667L2.41333 5.19333Z",fill:"#7D7D7D"})}),d.jsx("span",{className:"truncate",children:W.phone})]}),Ie&&d.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 w-full truncate",children:["ETA: ",d.jsx("span",{className:"text-sky-600 font-medium",children:Ie.eta}),"  ",Ie.distanceKm.toFixed(2)," km"]}),d.jsx("div",{className:"w-full mt-4 hidden lg:flex justify-start",children:d.jsxs("button",{onClick:async()=>{await r(),window.location.href="/auth/landing"},className:"rounded-full border border-red-300 text-red-600 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:[d.jsx(p_,{className:"h-4 w-4"})," Log Out"]})})]})}),d.jsxs("section",{className:"min-w-0 space-y-6 lg:max-h-[calc(100vh-7rem)] lg:overflow-auto lg:pr-1",children:[d.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] border-[#36A5FF] p-4 flex flex-col items-start relative overflow-hidden",children:[d.jsx("div",{className:"text-[18px] font-light font-poppins text-black mb-2 tracking-tight",children:"Storefront Preview"}),d.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[d.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:"Inventory"}),d.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:i.length})]}),d.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[d.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:"Products Sold"}),d.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:f})]}),d.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[d.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:"Active Chats"}),d.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:g})]}),d.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[d.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:"Reviews"}),d.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:_})]}),d.jsx("div",{className:"w-full flex justify-end mt-4",children:d.jsxs("button",{className:"px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light flex items-center gap-1 shadow hover:bg-sky-700",onClick:jt,children:[d.jsx(zH,{className:"h-4 w-4"})," Download report"]})})]}),d.jsxs("div",{className:"flex gap-2 w-full",children:[d.jsx("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700",onClick:()=>o(!0),children:"+ Add Product"}),d.jsx("button",{className:"flex-1 rounded-full border border-sky-600 text-sky-600 text-[13px] font-light py-2 hover:bg-[#E3F3FF]",onClick:()=>c(!0),children:"Bulk Upload"})]}),d.jsxs("div",{className:"rounded-3xl border bg-[#F7F7F7] border-[#36A5FF] p-4 relative overflow-hidden",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("div",{className:"text-[17px] font-light font-poppins text-black tracking-tight",children:"Products"}),i.length>3&&d.jsx("button",{className:"text-sky-600 text-[13px] font-light px-3 py-1 rounded-full hover:bg-[#E3F3FF]",onClick:()=>J(Me=>!Me),children:te?"See less":"See more"})]}),d.jsxs("div",{className:"space-y-3",children:[(te?i:i.slice(0,3)).map(Me=>d.jsxs("button",{className:"w-full text-left rounded-2xl border border-[#9ED3FF] p-3 flex items-center gap-3 bg-white hover:bg-[#E3F3FF] transition shadow-sm min-w-0 overflow-hidden",onClick:()=>k(Me),type:"button",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx(dh,{name:Me.name,image:Me.image,category:Me.category,size:30,className:"border border-[#9ED3FF]",roundedClass:"rounded-xl"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"font-semibold text-[15px] text-black truncate",children:Me.name}),d.jsxs("div",{className:"text-zinc-500 text-[12px] font-light truncate",children:[Me.category,"  Stock: ",Me.stock,"  SKU: ",Me.sku]})]}),d.jsxs("div",{className:"text-[15px] font-semibold text-sky-600 ml-3 flex-shrink-0 whitespace-nowrap",children:["",Number(Me.price).toLocaleString()]})]},Me.id)),i.length===0&&d.jsx("div",{className:"text-zinc-500",children:"No products yet. Use the buttons above to add or bulkupload."})]}),d.jsxs("div",{className:"w-full flex justify-end mt-3",children:[d.jsx("button",{onClick:qt,className:"mr-2 px-4 py-2 rounded-full border border-sky-600 text-sky-600 text-[13px] font-light hover:bg-[#E3F3FF]",children:"Download CSV"}),d.jsx("button",{onClick:wr,className:"px-4 py-2 rounded-full bg-sky-600 text-white text-[13px] font-light hover:bg-sky-700",children:"Download Excel"})]})]})]})]}),a&&d.jsx(BP,{pharmacyId:n?.uid||e?.uid,onClose:()=>o(!1)}),l&&d.jsx(Y9,{pharmacyId:n?.uid||e?.uid,onClose:()=>c(!1)}),b&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 backdrop-blur-sm",children:d.jsxs("div",{className:"bg-white rounded-3xl p-6 w-[90vw] max-w-sm shadow-xl border border-[#9ED3FF] relative overflow-hidden",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4 relative",children:[d.jsx("div",{className:"text-lg font-medium font-poppins text-black",children:"Edit Product"}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{className:"rounded-full border border-zinc-300 text-zinc-500 py-2 flex items-center justify-center ml-2",style:{width:"36px",height:"36px"},onClick:Me=>{Me.stopPropagation(),we(Mt=>!Mt)},children:d.jsx($H,{className:"h-4 w-4"})}),Ce&&d.jsx("div",{className:"absolute right-0 top-full mt-2 bg-white border border-[#9ED3FF] rounded-xl shadow p-2 z-10 overflow-hidden",onClick:Me=>Me.stopPropagation(),children:d.jsxs("button",{className:"flex items-center gap-2 text-red-600 text-[13px] font-light px-2 py-1 hover:bg-red-50 rounded",onClick:()=>{H(!0),we(!1)},children:[d.jsx(XH,{className:"h-4 w-4"})," Delete"]})})]})]}),d.jsxs("div",{className:"space-y-3",onClick:()=>Ce&&we(!1),children:[d.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",value:R,onChange:Me=>C(Me.target.value),placeholder:"Name"}),d.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",value:j,onChange:Me=>X(Me.target.value),placeholder:"Category"}),d.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",value:K,onChange:Me=>P(Me.target.value),placeholder:"Stock",type:"number"}),d.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",value:A,onChange:Me=>T(Me.target.value),placeholder:"SKU"}),d.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",value:O,onChange:Me=>I(Me.target.value),placeholder:"Price",type:"number"}),d.jsxs("div",{className:"flex flex-col gap-1",children:[d.jsx("label",{className:"text-[12px] text-zinc-500 font-light",children:"Product Image"}),d.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none",value:D,onChange:Me=>{B(Me.target.value),_e(null)},placeholder:"Image URL (or choose file below)",type:"text"}),d.jsx("input",{type:"file",accept:"image/*",className:"mt-1",onChange:Me=>{Me.target.files&&Me.target.files[0]&&(_e(Me.target.files[0]),B(""))}}),(D||re)&&d.jsx("img",{src:re?URL.createObjectURL(re):D,alt:"Preview",className:"h-16 w-16 object-cover rounded-xl border mt-2"})]}),d.jsxs("div",{className:"flex flex-col gap-1",children:[d.jsx("label",{className:"text-[12px] text-zinc-500 font-light",children:"Product Description"}),d.jsx("textarea",{className:"w-full border rounded p-2 text-sm",rows:4,value:ae,onChange:Me=>pe(Me.target.value),placeholder:"Enter product description"})]})]}),d.jsxs("div",{className:"flex gap-2 mt-6 items-center",children:[d.jsx("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[12px] font-light py-2 shadow hover:bg-sky-700",onClick:wt,children:"Save"}),d.jsx("button",{className:"flex-1 rounded-full border border-zinc-300 text-zinc-500 text-[12px] font-light py-2",onClick:()=>k(null),children:"Cancel"})]}),ce&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 rounded-3xl",onClick:()=>H(!1),children:d.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-xl border border-[#9ED3FF] text-center overflow-hidden",onClick:Me=>Me.stopPropagation(),children:[d.jsx("div",{className:"text-[15px] font-light mb-4",children:"Are you sure you want to delete this item?"}),d.jsxs("div",{className:"flex gap-2 justify-center",children:[d.jsx("button",{className:"rounded-full bg-red-600 text-white text-[12px] font-light px-4 py-2",onClick:At,children:"Yes, Delete"}),d.jsx("button",{className:"rounded-full border border-zinc-300 text-zinc-500 text-[12px] font-light px-4 py-2",onClick:()=>H(!1),children:"Cancel"})]})]})})]})}),d.jsx("div",{className:"mt-6",children:d.jsx(MP,{})}),d.jsx("div",{className:"mt-6 lg:hidden",children:d.jsxs("button",{onClick:async()=>{await r(),window.location.href="/auth/landing"},className:"rounded-full border border-red-300 text-red-600 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:[d.jsx(p_,{className:"h-4 w-4"})," Log Out"]})})]})}function td({children:t}){const{user:e,loading:r}=Jn();return r?d.jsx("div",{className:"p-6",children:"Loading"}):e?t:d.jsx("div",{className:"p-6",children:"Please sign in to continue."})}const ohe=t=>Array.from(new Set(t.map(r=>r.label.includes("/")?r.label.split("/").pop():r.label))).sort(),lhe=(t,e)=>Array.from(new Set(t.filter(n=>n.label.endsWith("/"+e)).map(n=>n.label.split("/")[0]))).sort((n,i)=>Number(n)-Number(i));function che({data:t,filter:e,onFilterChange:r,topPeriod:n}){const[i,s]=z.useState(null),[a,o]=z.useState([]);z.useEffect(()=>{if(t.length>0){const g=Math.max(...t.map(m=>m.value))||1;o(t.map(m=>m.value/g*100))}},[t]);let l=ohe(t),c=e.type==="month"?lhe(t,e.year||l[0]):[];const f=Math.max(...t.map(g=>g.value))||1,p=t.reduce((g,m)=>g+m.value,0);return d.jsxs("div",{className:"bg-gradient-to-br from-[#F7F7F7] to-[#F0F8FF] rounded-2xl border border-sky-500 p-6 mt-8 overflow-hidden min-w-0 relative",role:"region","aria-label":"Revenue",children:[d.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-sky-100/30 to-transparent rounded-full -translate-y-16 translate-x-16"}),d.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-blue-100/20 to-transparent rounded-full translate-y-12 -translate-x-12"}),d.jsxs("div",{className:"flex items-center justify-between mb-4 min-w-0 relative z-0",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-black font-light text-xl tracking-tight mb-1",children:"Revenue Analytics"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"text-2xl font-semibold text-sky-700",children:["",p.toLocaleString()]}),d.jsx("div",{className:"px-2 py-1 bg-sky-100 rounded-full text-xs text-sky-700 font-medium",children:"Total"})]})]}),d.jsx("div",{className:"flex flex-col gap-2",children:d.jsxs("select",{className:"rounded-xl border-2 border-sky-200 bg-white px-3 py-2 text-sm text-sky-700 focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md",value:e.type,onChange:g=>r({...e,type:g.target.value}),children:[d.jsx("option",{value:"month",children:" By Month"}),d.jsx("option",{value:"year",children:" By Year"})]})})]}),d.jsxs("div",{className:"flex gap-2 mb-6 min-w-0 relative z-0",children:[e.type==="year"&&d.jsx("select",{className:"rounded-lg border border-sky-200 px-3 py-2 text-sm text-sky-700 bg-white focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md min-w-0 max-w-[140px]",value:e.year||l[0]||"",onChange:g=>r({...e,year:g.target.value}),children:l.map(g=>d.jsx("option",{value:g,children:g},g))}),e.type==="month"&&d.jsxs(d.Fragment,{children:[d.jsx("select",{className:"rounded-lg border border-sky-200 px-3 py-2 text-sm text-sky-700 bg-white focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md min-w-0 max-w-[120px]",value:e.year||l[0]||"",onChange:g=>r({...e,year:g.target.value}),children:l.map(g=>d.jsx("option",{value:g,children:g},g))}),d.jsx("select",{className:"rounded-lg border border-sky-200 px-3 py-2 text-sm text-sky-700 bg-white focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md min-w-0 max-w-[120px]",value:e.month||c[0]||"",onChange:g=>r({...e,month:g.target.value}),children:c.map(g=>d.jsxs("option",{value:g,children:["Month ",g]},g))})]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 flex flex-col justify-between opacity-20",children:[...Array(5)].map((g,m)=>d.jsx("div",{className:"border-t border-sky-300 border-dashed"},m))}),d.jsx("div",{className:"w-full h-32 flex items-end gap-3 mt-2 min-w-0 overflow-hidden relative z-0",children:t.length===0?d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-4xl mb-2",children:""}),d.jsx("div",{className:"text-zinc-400 text-sm",children:"No revenue data available"}),d.jsx("div",{className:"text-xs text-zinc-400 mt-1",children:"Start making sales to see your revenue analytics"})]})}):t.map((g,m)=>d.jsxs("div",{className:"flex flex-col items-center flex-1 min-w-0 relative group",onMouseEnter:()=>s(m),onMouseLeave:()=>s(null),children:[i===m&&d.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-white border border-sky-200 rounded-lg px-3 py-2 shadow-lg z-20 whitespace-nowrap",children:[d.jsx("div",{className:"text-xs font-medium text-gray-700",children:g.label}),d.jsxs("div",{className:"text-sm font-semibold text-sky-600",children:["",g.value.toLocaleString()]}),d.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",children:d.jsx("div",{className:"w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-white"})})]}),d.jsxs("div",{className:"relative w-8 flex flex-col items-center",children:[d.jsxs("div",{className:"w-full h-32 bg-sky-100/50 rounded-t-lg relative overflow-hidden",children:[d.jsx("div",{className:`absolute bottom-0 w-full rounded-t-lg transition-all duration-1000 ease-out cursor-pointer transform ${i===m?"scale-105":"scale-100"}`,style:{height:`${a[m]||0}%`,background:i===m?"linear-gradient(135deg, #36A5FF 0%, #2563EB 50%, #1D4ED8 100%)":"linear-gradient(135deg, #36A5FF 0%, #3B82F6 100%)",boxShadow:i===m?"0 8px 25px rgba(54, 165, 255, 0.4), 0 4px 10px rgba(54, 165, 255, 0.3)":"0 4px 15px rgba(54, 165, 255, 0.2)"},children:d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-20 transform -skew-x-12 animate-pulse"})}),d.jsx("div",{className:"absolute w-full h-1 bg-white/40 rounded-full transition-all duration-1000",style:{bottom:`${a[m]||0}%`}})]}),i===m&&d.jsxs("div",{className:"absolute -top-6 bg-sky-600 text-white text-xs px-2 py-1 rounded font-medium",children:["",g.value.toLocaleString()]})]}),d.jsx("span",{className:`text-[11px] mt-2 truncate max-w-[40px] transition-colors duration-200 ${i===m?"text-sky-600 font-medium":"text-zinc-500"}`,children:g.label})]},m))}),t.length>0&&d.jsxs("div",{className:"absolute left-0 top-0 h-32 flex flex-col justify-between text-xs text-zinc-400 -ml-12",children:[d.jsxs("span",{children:["",f.toLocaleString()]}),d.jsxs("span",{children:["",Math.round(f*.75).toLocaleString()]}),d.jsxs("span",{children:["",Math.round(f*.5).toLocaleString()]}),d.jsxs("span",{children:["",Math.round(f*.25).toLocaleString()]}),d.jsx("span",{children:"0"})]})]}),n&&d.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-sky-50 to-blue-50 rounded-xl border border-sky-200 relative z-0",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-sky-400 to-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:""}),d.jsxs("div",{children:[d.jsxs("div",{className:"text-sm font-medium text-sky-700",children:["Best Performing ",e.type==="month"?"Month":"Year"]}),d.jsxs("div",{className:"text-lg font-semibold text-sky-800",children:[n.label,"  ",n.value.toLocaleString()]})]})]})})]})}function uhe({cards:t}){return d.jsxs("div",{className:"w-full overflow-x-auto py-2",style:{overflowY:"hidden"},children:[d.jsx("div",{className:"flex gap-3",style:{minWidth:180,scrollbarWidth:"none",msOverflowStyle:"none"},children:t.map((e,r)=>d.jsx("div",{className:"min-w-[120px] max-w-[150px] h-[80px] bg-[#F7F7F7] rounded-xl border border-sky-500 p-3 flex flex-col items-start justify-center shadow-sm",children:e},r))}),d.jsx("style",{children:`
        .w-full.overflow-x-auto::-webkit-scrollbar { display: none; }
      `})]})}function fhe({data:t}){const[e,r]=z.useState(null);if(!t||t.length===0)return d.jsx("div",{className:"bg-[#F7F7F7] rounded-2xl border border-sky-500 p-5 mt-8 text-zinc-400 text-sm text-center",children:"No sales trend data."});const n=Math.max(...t.map(p=>p.value))||1,i=25,s=280,a=120,o=[];for(let p=0;p<=4;p++){const g=i+p/4*(a-2*i);o.push(d.jsx("line",{x1:i,y1:g,x2:s-i,y2:g,stroke:"#E5F3FF",strokeWidth:"1",strokeDasharray:"3,3"},p))}const l=t.map((p,g)=>{const m=i+g/(t.length-1)*(s-2*i),_=a-i-p.value/n*(a-2*i);return{x:m,y:_,value:p.value,label:p.label}}),c=l.map((p,g)=>`${g===0?"M":"L"} ${p.x} ${p.y}`).join(" "),f=`${c} L ${l[l.length-1].x} ${a-i} L ${l[0].x} ${a-i} Z`;return d.jsxs("div",{className:"bg-[#F7F7F7] rounded-2xl border border-sky-500 p-5 mt-8 relative overflow-hidden",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"text-black font-light text-lg tracking-tight",children:"Sales Trends"}),d.jsx("div",{className:"text-xs text-zinc-500",children:"Last 6 months"})]}),d.jsxs("div",{className:"relative",children:[d.jsxs("svg",{width:s,height:a,className:"block mx-auto overflow-visible",style:{filter:"drop-shadow(0 2px 4px rgba(54, 165, 255, 0.1))"},children:[d.jsxs("defs",{children:[d.jsxs("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[d.jsx("stop",{offset:"0%",stopColor:"#36A5FF",stopOpacity:"0.2"}),d.jsx("stop",{offset:"100%",stopColor:"#36A5FF",stopOpacity:"0.02"})]}),d.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[d.jsx("stop",{offset:"0%",stopColor:"#36A5FF"}),d.jsx("stop",{offset:"50%",stopColor:"#2563EB"}),d.jsx("stop",{offset:"100%",stopColor:"#1D4ED8"})]})]}),o,d.jsx("path",{d:f,fill:"url(#areaGradient)",className:"transition-all duration-300"}),d.jsx("path",{d:c,fill:"none",stroke:"url(#lineGradient)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-300",style:{filter:"drop-shadow(0 2px 4px rgba(54, 165, 255, 0.3))"}}),l.map((p,g)=>d.jsxs("g",{children:[d.jsx("circle",{cx:p.x,cy:p.y,r:e===g?"8":"6",fill:"rgba(54, 165, 255, 0.2)",className:"transition-all duration-200"}),d.jsx("circle",{cx:p.x,cy:p.y,r:e===g?"4":"3",fill:"#36A5FF",stroke:"white",strokeWidth:"2",className:"cursor-pointer transition-all duration-200 hover:r-4",onMouseEnter:()=>r(g),onMouseLeave:()=>r(null),style:{filter:e===g?"drop-shadow(0 4px 8px rgba(54, 165, 255, 0.4))":"drop-shadow(0 2px 4px rgba(54, 165, 255, 0.2))"}})]},g))]}),e!==null&&d.jsxs("div",{className:"absolute bg-white border border-sky-200 rounded-lg px-3 py-2 shadow-lg z-10 transition-all duration-200",style:{left:l[e].x-30,top:l[e].y-50,transform:"translateX(-50%)"},children:[d.jsx("div",{className:"text-xs font-medium text-gray-700",children:t[e].label}),d.jsxs("div",{className:"text-sm font-semibold text-sky-600",children:[t[e].value," orders"]}),d.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full",children:d.jsx("div",{className:"w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-white"})})]})]}),d.jsx("div",{className:"flex justify-between mt-3 px-6",children:t.map((p,g)=>d.jsx("span",{className:`text-xs transition-colors duration-200 ${e===g?"text-sky-600 font-medium":"text-zinc-500"}`,children:p.label},g))}),d.jsxs("div",{className:"absolute left-1 top-12 h-24 flex flex-col justify-between text-xs text-zinc-400",children:[d.jsx("span",{children:n}),d.jsx("span",{children:Math.round(n*.75)}),d.jsx("span",{children:Math.round(n*.5)}),d.jsx("span",{children:Math.round(n*.25)}),d.jsx("span",{children:"0"})]}),d.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-sky-100/50 to-transparent rounded-full -translate-y-10 translate-x-10"})]})}function hhe({threads:t,unreadCount:e,onThreadClick:r}){const n=$i(),i=()=>{n("/messages")};return d.jsxs("div",{className:"relative bg-[#F7F7F7] rounded-2xl border border-sky-500 p-5 mt-8",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2 cursor-pointer hover:bg-sky-50 -mx-2 px-2 py-1 rounded-lg transition-colors",onClick:i,children:[d.jsx("h2",{className:"text-black font-light text-lg tracking-tight",children:"Recent Messages"}),e>0&&d.jsx("span",{className:"bg-sky-400 text-white text-xs rounded-full px-2 py-0.5 font-bold",children:e})]}),d.jsx("div",{children:t.length===0?d.jsx("div",{className:"text-zinc-400 text-sm",children:"No recent messages."}):d.jsx("ul",{className:"divide-y divide-sky-100",children:t.map(s=>d.jsxs("li",{className:"py-2 rounded-lg px-2 flex items-center cursor-pointer hover:bg-sky-50 transition-colors",onClick:()=>r&&r(s),children:[d.jsx("span",{className:"font-light text-[13px] text-black flex-1 truncate",children:s.customerName||s.customerId}),s.unread>0&&d.jsx("span",{className:"ml-2 bg-sky-400 text-white text-xs rounded-full px-2 py-0.5 font-bold",children:s.unread})]},s.id))})})]})}function dhe(){const[t,e]=z.useState([]),{profile:r,user:n}=Jn(),[i,s]=z.useState(!1),[a,o]=z.useState(!1),[l,c]=z.useState([]),[f,p]=z.useState({type:"month",value:""}),[g,m]=z.useState(null),[_,w]=z.useState(0),[b,k]=z.useState(0),[R,C]=z.useState(0),[j,X]=z.useState([]),[K,P]=z.useState([]),[A,T]=z.useState([]),[O,I]=z.useState(0),[D,B]=z.useState(!1),[re,_e]=z.useState(0),[Ce,we]=z.useState(0),[ce,H]=z.useState(0),[te,J]=z.useState(0),[N,U]=z.useState(0),[W,Y]=z.useState(0),ae=$i();return z.useEffect(()=>{async function pe(){if(r&&r.role==="pharmacy"){const he=await k7(5,r.uid);e(he)}else e([])}pe()},[r]),z.useEffect(()=>{async function pe(){if(!r||r.role!=="pharmacy")return c([]);const he=Vr(xr(Et,"orders"),Wr("pharmacyId","==",r.uid)),ke=(await ci(he)).docs.map(Re=>Re.data());let Fe={},oe=Re=>"";f.type==="date"?oe=Re=>{const fe=Re.createdAt?.toDate?.()||new Date(Re.createdAt);return fe?fe.toLocaleDateString("en-GB"):""}:f.type==="month"?oe=Re=>{const fe=Re.createdAt?.toDate?.()||new Date(Re.createdAt);return fe?`${fe.getMonth()+1}/${fe.getFullYear()}`:""}:f.type==="year"&&(oe=Re=>{const fe=Re.createdAt?.toDate?.()||new Date(Re.createdAt);return fe?`${fe.getFullYear()}`:""}),ke.forEach(Re=>{const fe=oe(Re);fe&&(f.value&&!fe.startsWith(f.value)||(Fe[fe]=(Fe[fe]||0)+(Re.total||0)))});const Ze=Object.entries(Fe).map(([Re,fe])=>({label:Re,value:fe}));if(Ze.sort((Re,fe)=>Re.label.localeCompare(fe.label)),c(Ze),Ze.length>0){const Re=Ze.reduce((fe,ut)=>ut.value>fe.value?ut:fe,Ze[0]);m(Re)}else m(null)}pe()},[r,f]),z.useEffect(()=>{async function pe(){if(!r||r.role!=="pharmacy")return;const he=r.uid||n?.uid;if(!he)return;const xe=await ci(Vr(xr(Et,"products"),Wr("pharmacyId","==",he)));w(xe.size);const ke=xe.docs.filter(Be=>{const tt=Be.data(),ot=tt.stock||0,ht=tt.lowStockThreshold||10;return ot<=ht});J(ke.length);const Fe=await ci(Vr(xr(Et,"orders"),Wr("pharmacyId","==",he)));k(Fe.size);let oe=0,Ze=[];const Re=new Date().getMonth(),fe=new Date().getFullYear(),ut=Re===0?11:Re-1,rt=Re===0?fe-1:fe;let lt=0,le=0,je=0;const ft=new Set,Ie=[];if(Fe.forEach(Be=>{const tt=Be.data();oe+=tt.total||0,Ze.push({id:Be.id,...tt});const ot=tt.createdAt?.toDate?.()||new Date(tt.createdAt),ht=ot.getMonth(),Pt=ot.getFullYear();ht===Re&&Pt===fe&&lt++,ht===ut&&Pt===rt&&le++,(tt.status==="pending"||tt.status==="processing")&&je++,ht===Re&&Pt===fe&&tt.customerId&&ft.add(tt.customerId),(tt.status==="completed"||tt.status==="delivered")&&Ie.push(tt)}),C(oe),U(lt),Y(le),H(je),_e(ft.size),Ie.length>0){const Be=Ie.reduce((tt,ot)=>tt+(ot.total||0),0);we(Be/Ie.length)}else we(0);Ze.sort((Be,tt)=>(tt.createdAt?.toMillis?.()||0)-(Be.createdAt?.toMillis?.()||0)),X(Ze.slice(0,3))}pe()},[r,n]),z.useEffect(()=>{async function pe(){if(!r||r.role!=="pharmacy"){P([]);return}const he=r.uid||n?.uid;if(!he)return;const xe=Vr(xr(Et,"orders"),Wr("pharmacyId","==",he)),Fe=(await ci(xe)).docs.map(fe=>fe.data()),oe=new Date,Ze=[];for(let fe=5;fe>=0;fe--){const ut=new Date(oe.getFullYear(),oe.getMonth()-fe,1);Ze.push({label:ut.toLocaleString("default",{month:"short"}),year:ut.getFullYear(),month:ut.getMonth()+1})}const Re=Ze.map(({label:fe,year:ut,month:rt})=>{const lt=Fe.filter(le=>{const je=le.createdAt?.toDate?.()||new Date(le.createdAt);return je.getFullYear()===ut&&je.getMonth()+1===rt}).length;return{label:fe,value:lt}});P(Re)}pe()},[r,n]),z.useEffect(()=>{async function pe(){if(!r||r.role!=="pharmacy"){T([]),I(0);return}const he=r.uid||n?.uid;if(!he)return;const xe=Vr(xr(Et,"threads"),Wr("vendorId","==",he),Dl("lastAt","desc"),kg(3)),Fe=(await ci(xe)).docs.map(Ze=>({id:Ze.id,...Ze.data()}));T(Fe.map(Ze=>({...Ze,unread:Ze.unread?.[he]||0})));const oe=Fe.reduce((Ze,Re)=>Ze+(Re.unread?.[he]||0),0);I(oe)}pe()},[r,n]),d.jsxs("div",{className:"pt-10 pb-32 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-0 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col animate-fadeInUp",children:[d.jsx("header",{className:"sticky top-0 z-20 bg-white/90 backdrop-blur-md pb-2 pt-4 -mx-auto sm:-mx-5 md:-mx-8 lg:-mx-12 xl:-mx-0 px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 transition-all duration-200",children:d.jsxs("h1",{className:"text-[25px] font-light text-black leading-none animate-slideInLeft",children:["My",d.jsx("br",{}),"Dashboard"]})}),d.jsxs("main",{className:"flex-1 px-3 sm:px-4 py-6 relative w-full mb-4",children:[d.jsxs("div",{className:"w-full grid grid-cols-1 lg:grid-cols-[1fr_420px] gap-6 items-start pb-16",children:[d.jsxs("div",{className:"flex flex-col gap-6",children:[d.jsxs("div",{className:"bg-gradient-to-br from-[#F7F7F7] to-[#F0F8FF] rounded-2xl border border-sky-500 p-6 relative overflow-hidden card-interactive animate-fadeInUp",style:{animationDelay:"0.1s"},children:[d.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-sky-100/40 to-transparent rounded-full -translate-y-10 translate-x-10"}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"text-black font-light text-xl tracking-tight animate-slideInLeft",style:{animationDelay:"0.2s"},children:"Top Products"}),d.jsx("div",{className:"px-3 py-1 bg-sky-100 rounded-full text-xs text-sky-700 font-medium animate-bounceIn",style:{animationDelay:"0.3s"},children:" Best Sellers"})]}),t.length===0?d.jsxs("div",{className:"text-center py-8 animate-fadeInUp",style:{animationDelay:"0.4s"},children:[d.jsx("div",{className:"text-4xl mb-3",children:""}),d.jsx("div",{className:"text-zinc-400 text-sm",children:"No sales data yet"}),d.jsx("div",{className:"text-xs text-zinc-400 mt-1",children:"Start selling products to see your top performers"})]}):d.jsx("div",{className:"flex flex-col gap-4",children:t.map((pe,he)=>d.jsxs("div",{className:"group hover:bg-white/50 rounded-xl p-3 transition-all duration-200 relative",children:[d.jsx("div",{className:`absolute -left-2 -top-2 w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold ${he===0?"bg-gradient-to-br from-yellow-400 to-yellow-600":he===1?"bg-gradient-to-br from-gray-400 to-gray-600":he===2?"bg-gradient-to-br from-orange-400 to-orange-600":"bg-gradient-to-br from-sky-400 to-sky-600"}`,children:he+1}),d.jsxs("div",{className:"flex items-center justify-between ml-4",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"font-medium text-[14px] text-zinc-800 truncate max-w-[140px] group-hover:text-sky-700 transition-colors",children:pe.name}),d.jsxs("div",{className:"text-xs text-zinc-500 mt-1",children:[pe.sold," units sold"]})]}),d.jsx("div",{className:"flex-1 mx-4 relative",children:d.jsxs("div",{className:"h-4 bg-gradient-to-r from-sky-100 to-blue-100 rounded-full relative overflow-hidden",children:[d.jsx("div",{className:`h-4 rounded-full transition-all duration-1000 ease-out relative ${he===0?"bg-gradient-to-r from-yellow-400 to-yellow-500":he===1?"bg-gradient-to-r from-gray-400 to-gray-500":he===2?"bg-gradient-to-r from-orange-400 to-orange-500":"bg-gradient-to-r from-sky-400 to-sky-500"}`,style:{width:`${Math.max(15,pe.sold/(t[0]?.sold||1)*100)}%`,boxShadow:"0 2px 8px rgba(54, 165, 255, 0.3)"},children:d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 transform -skew-x-12 animate-pulse"})}),d.jsxs("div",{className:"absolute top-0 right-2 h-4 flex items-center text-xs font-medium text-white",style:{left:`${Math.max(15,pe.sold/(t[0]?.sold||1)*100)}%`,transform:"translateX(-100%)"},children:[Math.round(pe.sold/(t[0]?.sold||1)*100),"%"]})]})}),d.jsxs("div",{className:"text-right min-w-[50px]",children:[d.jsx("span",{className:`font-bold text-lg ${he===0?"text-yellow-600":he===1?"text-gray-600":he===2?"text-orange-600":"text-sky-600"}`,children:pe.sold}),d.jsx("div",{className:"text-xs text-zinc-400",children:"units"})]})]}),d.jsx("div",{className:"absolute inset-0 rounded-xl border-2 border-transparent group-hover:border-sky-200 transition-all duration-200"})]},pe.id||he))})]})]}),d.jsxs("div",{className:"flex gap-2 w-full",children:[d.jsx("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700",onClick:()=>s(!0),children:"+ Add Product"}),d.jsx("button",{className:"flex-1 rounded-full border border-sky-600 text-sky-600 text-[13px] font-light py-2 hover:bg-[#E3F3FF]",onClick:()=>o(!0),children:"Bulk Upload"})]}),i&&d.jsx(BP,{pharmacyId:r?.uid||n?.uid,onClose:()=>s(!1)}),a&&d.jsx(Y9,{pharmacyId:r?.uid||n?.uid,onClose:()=>o(!1)}),d.jsx("div",{children:d.jsx(fhe,{data:K})})]}),d.jsxs("div",{className:"flex flex-col gap-6 pb-8 relative z-0",children:[d.jsx("div",{className:"relative z-0",children:d.jsx(che,{data:l,filter:f,onFilterChange:p,topPeriod:g})}),d.jsx("div",{children:d.jsx(uhe,{cards:[d.jsxs("div",{children:[d.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Total Products"}),d.jsx("div",{className:"text-[19px] font-semibold text-sky-700 tracking-tight",children:_})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Total Orders"}),d.jsx("div",{className:"text-[19px] font-semibold text-sky-700 tracking-tight",children:b})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Total Revenue"}),d.jsxs("div",{className:"text-[19px] font-semibold text-sky-700 tracking-tight",children:["",R.toLocaleString()]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Active Customers"}),d.jsx("div",{className:"text-[19px] font-semibold text-emerald-600 tracking-tight",children:re}),d.jsx("div",{className:"text-[10px] text-zinc-400 mt-0.5",children:"This Month"})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Avg Order Value"}),d.jsxs("div",{className:"text-[19px] font-semibold text-purple-600 tracking-tight",children:["",Ce.toLocaleString(void 0,{maximumFractionDigits:0})]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Pending Orders"}),d.jsx("div",{className:"text-[19px] font-semibold text-orange-600 tracking-tight",children:ce}),d.jsx("div",{className:"text-[10px] text-zinc-400 mt-0.5",children:"Awaiting"})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Low Stock Items"}),d.jsx("div",{className:"text-[19px] font-semibold text-red-600 tracking-tight",children:te}),d.jsx("div",{className:"text-[10px] text-zinc-400 mt-0.5",children:"Need Restock"})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Orders This Month"}),d.jsx("div",{className:"text-[19px] font-semibold text-blue-600 tracking-tight",children:N}),d.jsx("div",{className:"text-[10px] text-zinc-400 mt-0.5",children:W>0?N>=W?d.jsxs("span",{className:"text-emerald-600",children:[" +",((N-W)/W*100).toFixed(0),"%"]}):d.jsxs("span",{className:"text-red-500",children:[" -",((W-N)/W*100).toFixed(0),"%"]}):d.jsx("span",{className:"text-gray-400",children:"No comparison"})})]})]})}),te>0&&d.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-2xl p-4",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-white text-sm font-bold",children:"!"})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-red-700 font-medium text-sm",children:"Low Stock Alert"}),d.jsxs("div",{className:"text-red-600 text-xs",children:[te," item",te>1?"s":""," need restocking"]})]})]}),d.jsx("div",{className:"text-xs text-red-600 bg-red-100 rounded-lg px-3 py-2",children:" Check your inventory to avoid running out of popular products"})]}),d.jsx("div",{children:d.jsx(hhe,{threads:A,unreadCount:O,onThreadClick:pe=>ae(`/messages/${pe.id}`)})})]})]}),d.jsx("button",{className:"fixed bottom-24 right-8 z-50 bg-sky-400 text-white rounded-full shadow-lg w-10 h-10 flex items-center justify-center disabled:opacity-0 disabled:cursor-not-allowed","aria-label":"Add Product",onClick:()=>s(!0),disabled:i,children:d.jsx("span",{className:"text-3xl font-bold leading-none",children:"+"})})]})]})}function phe(){const{user:t,profile:e}=Jn(),r=nu(),n=z.useRef({});return z.useEffect(()=>{if(!(!t?.uid||!e?.role))return sy({uid:t.uid,role:e.role},i=>{i.forEach(s=>{if(!s.id)return;const a=Vr(xr(Et,"threads",s.id,"messages"),Dl("createdAt","desc"),kg(1));pi(a,o=>{if(o.empty)return;const l={id:o.docs[0].id,...o.docs[0].data()},c=l.senderId===t.uid;let f=!1;if(r.pathname.startsWith("/chat/")){const p=r.pathname.split("/chat/")[1]?.split("/")[0];e.role==="customer"?s.id===`${p}__${t.uid}`&&(f=!0):s.id.startsWith(`${t.uid}__`)&&(f=!0)}if(r.pathname==="/messages"){const g=new URLSearchParams(r.search).get("chat");g&&(e.role==="customer"?s.id===`${g}__${t.uid}`&&(f=!0):s.id===`${t.uid}__${g}`&&(f=!0))}if(!c&&n.current[s.id]!==l.id&&!f){const p=e.role==="customer"?s.pharmacyName||"Pharmacy":s.customerName||"Customer",g={...l,senderName:p,threadId:s.id};Mc.notifyMessageReceived(g)}n.current[s.id]=l.id})})},i=>console.error("GlobalMessageNotifier error:",i))},[t?.uid,e?.role,r.pathname,r.search]),null}function mhe(){const{user:t,profile:e}=Jn(),r=z.useRef({}),n=z.useRef(!1);return z.useEffect(()=>{if(!t?.uid||!e||e.role!=="customer")return;const i=e.uid||t.uid,s=Vr(xr(Et,"orders"),Wr("customerId","==",i),Dl("updatedAt","desc")),a=pi(s,o=>{if(!n.current){o.docs.forEach(l=>{const c={id:l.id,...l.data()};r.current[c.id]=c.status}),n.current=!0;return}o.docChanges().forEach(l=>{if(l.type==="modified"){const c={id:l.doc.id,...l.doc.data()},f=r.current[c.id];f&&f!==c.status&&(Mc.notifyOrderStatusUpdated(c),c.status==="ready"&&c.type==="prescription"&&Mc.notifyPrescriptionReady({...c,pharmacyName:c.pharmacyName||"Pharmacy"})),r.current[c.id]=c.status}if(l.type==="added"){const c={id:l.doc.id,...l.doc.data()};r.current[c.id]=c.status}})},o=>{console.error("Error listening for customer order notifications:",o)});return()=>a()},[t,e]),null}function ghe(){const{profile:t}=Jn();return d.jsxs(d.Fragment,{children:[d.jsx(phe,{}),t?.role==="customer"&&d.jsx(mhe,{})]})}function xhe({order:t,isOpen:e,onClose:r,onViewOrder:n}){const[i,s]=z.useState(!1),{profile:a}=Jn();z.useEffect(()=>{if(e){s(!0);const c=setTimeout(()=>{o()},1e4);return()=>clearTimeout(c)}else s(!1)},[e]);const o=()=>{s(!1),setTimeout(()=>r(),300)},l=()=>{n(t),o()};return!e||!t?null:d.jsx(d.Fragment,{children:d.jsx("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-300 ${i?"translate-y-0 opacity-100 scale-100":"-translate-y-4 opacity-0 scale-95"}`,children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-blue-200 mx-4 overflow-hidden card-interactive hover:shadow-3xl transition-all duration-300",style:{width:"393px"},children:[d.jsxs("div",{className:"bg-gradient-to-r from-sky-300 to-sky-600 px-6 py-4 relative overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-white/10 animate-pulse"}),d.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center animate-bounce",children:d.jsx("span",{className:"text-white text-lg",children:""})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-semibold text-lg animate-text-reveal",children:"New Order Received!"}),d.jsx("p",{className:"text-green-100 text-sm animate-fade-in",style:{animationDelay:"0.1s"},children:"You have a new customer order"})]})]})]}),d.jsxs("div",{className:"px-4 py-3 animate-fade-in-up",style:{animationDelay:"0.2s"},children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-start gap-3",children:[d.jsxs("div",{className:"flex-1 min-w-0 animate-slide-up",style:{animationDelay:"0.3s"},children:[d.jsx("p",{className:"text-gray-600 text-xs",children:"Order ID"}),d.jsxs("p",{className:"font-medium text-gray-900 text-sm truncate",children:["#",t.id?.slice(-8)||"N/A"]})]}),d.jsxs("div",{className:"flex-1 min-w-0 animate-slide-up",style:{animationDelay:"0.4s"},children:[d.jsx("p",{className:"text-gray-600 text-xs",children:"Customer"}),d.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:t.customerName||"Unknown Customer"})]}),d.jsxs("div",{className:"text-right flex-shrink-0 animate-slide-up",style:{animationDelay:"0.5s"},children:[d.jsx("p",{className:"text-gray-600 text-xs",children:"Total"}),d.jsxs("p",{className:"font-bold text-green-600 text-sm animate-pulse-slow",children:["",(t.total||0).toLocaleString()]})]})]}),t.items&&t.items.length>0||t.orderItems&&t.orderItems.length>0||t.products&&t.products.length>0?d.jsxs("div",{className:"border-t pt-3 animate-fade-in",style:{animationDelay:"0.6s"},children:[d.jsxs("p",{className:"text-gray-600 text-xs mb-2",children:["Items (",t.items?.length||t.orderItems?.length||t.products?.length||0,")"]}),d.jsxs("div",{className:"max-h-24 overflow-y-auto space-y-1",children:[(t.items||t.orderItems||t.products||[]).slice(0,3).map((c,f)=>d.jsxs("div",{className:"flex justify-between items-center text-xs gap-2 py-0.5 animate-fadeInUp",style:{animationDelay:`${.7+f*.1}s`},children:[d.jsx("span",{className:"text-gray-700 flex-1 leading-tight font-medium truncate",children:c.name||c.productName||c.title||c.itemName||`Item ${f+1}`}),d.jsxs("span",{className:"text-gray-600 text-right whitespace-nowrap font-semibold bg-gray-100 px-1.5 py-0.5 rounded text-xs flex-shrink-0 hover:bg-gray-200 transition-colors duration-200",children:["x",c.quantity||c.qty||c.amount||1]})]},f)),(t.items?.length||t.orderItems?.length||t.products?.length||0)>3&&d.jsxs("p",{className:"text-xs text-gray-500 italic mt-1 text-center bg-gray-50 py-0.5 rounded animate-fade-in",children:["+",(t.items?.length||t.orderItems?.length||t.products?.length||0)-3," more items"]})]})]}):d.jsxs("div",{className:"border-t pt-3 animate-fade-in",style:{animationDelay:"0.6s"},children:[d.jsx("p",{className:"text-gray-600 text-xs mb-2",children:"Items"}),d.jsx("p",{className:"text-gray-500 text-xs italic",children:"No items found"})]}),d.jsxs("div",{className:"border-t pt-2 flex justify-between items-center animate-fade-in",style:{animationDelay:"0.8s"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-600 text-xs",children:"Status"}),d.jsx("span",{className:"inline-block px-2 py-0.5 bg-orange-100 text-orange-700 text-xs rounded-full font-medium mt-0.5 animate-bounce-gentle",children:t.status||"Pending"})]}),d.jsx("div",{className:"text-right text-xs text-gray-500",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),d.jsxs("div",{className:"flex gap-2 mt-4 pt-3 border-t animate-fade-in-up",style:{animationDelay:"0.9s"},children:[d.jsx("button",{onClick:l,className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium text-xs transition-all duration-200 shadow-lg hover:shadow-xl btn-interactive hover:scale-105 active:scale-95",children:"View Details"}),d.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium text-xs transition-all duration-200 btn-interactive hover:scale-105 active:scale-95",children:"Dismiss"})]})]}),d.jsx("button",{onClick:o,className:"absolute top-3 right-3 w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center text-white transition-all duration-200 hover:scale-110 active:scale-95",children:d.jsx("span",{className:"text-lg",children:""})}),d.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-gray-200 w-full",children:d.jsx("div",{className:"h-full bg-green-500 transition-all duration-[10000ms] ease-linear animate-progress-bar",style:{width:i?"0%":"100%"}})})]})})})}function vhe(){const[t,e]=z.useState(null),[r,n]=z.useState(!1),{profile:i,user:s}=Jn(),a=z.useRef(null),o=z.useRef(!0);return z.useEffect(()=>{if(!i||i.role!=="pharmacy")return;const f=i.uid||s?.uid;if(!f)return;o.current&&(a.current=new Date,o.current=!1);const p=Vr(xr(Et,"orders"),Wr("pharmacyId","==",f),Dl("createdAt","desc"),kg(1)),g=pi(p,m=>{m.empty||m.docChanges().forEach(_=>{if(_.type==="added"){const w={id:_.doc.id,..._.doc.data()},b=w.createdAt?.toDate()||new Date;a.current&&b>a.current&&(Mc.notifyOrderReceived(w),e(w),n(!0))}})},m=>{console.error("Error listening for order notifications:",m)});return()=>g()},[i,s]),{newOrder:t,showNotification:r,clearNotification:()=>{n(!1),e(null)},viewOrder:f=>f}}const f2=[{key:"users",label:"Users"},{key:"products",label:"Products"},{key:"prescriptions",label:"Prescriptions"},{key:"orders",label:"Orders"},{key:"carts",label:"Carts"},{key:"analytics",label:"Analytics"},{key:"moderation",label:"Moderation"},{key:"export",label:"Export"},{key:"infoCards",label:"Info Cards"}],Ym=3;function yhe(){const{user:t,logout:e}=Jn(),[r,n]=z.useState([]),[i,s]=z.useState([]),[a,o]=z.useState([]),[l,c]=z.useState([]),[f,p]=z.useState([]),[g,m]=z.useState([]),[_,w]=z.useState(!0),[b,k]=z.useState(!1),[R,C]=z.useState(!1),[j,X]=z.useState(null),[K,P]=z.useState(!1),[A,T]=z.useState(null),[O,I]=z.useState(null),[D,B]=z.useState(!1),[re,_e]=z.useState({displayName:"",email:"",address:"",phone:"",role:"",suspended:!1,password:""}),[Ce,we]=z.useState({name:"",image:"",description:"",stock:"",price:"",sku:"",category:""}),[ce,H]=z.useState({header:"",preview:"",link:"",linkText:"",image:"",fullImage:"",bgColor:"#f0f8ff"}),[te,J]=z.useState("users"),[N,U]=z.useState("profile"),[W,Y]=z.useState([]),[ae,pe]=z.useState([]),[he,xe]=z.useState([]),[ke,Fe]=z.useState([]),[oe,Ze]=z.useState(0),[Re,fe]=z.useState(""),[ut,rt]=z.useState(""),lt=z.useRef(null);return $i(),z.useEffect(()=>{if(!t)return;w(!0);const le=pi(xr(Et,"users"),ot=>{n(ot.docs.map(ht=>({id:ht.id,...ht.data()}))),w(!1)}),je=pi(xr(Et,"products"),ot=>{s(ot.docs.map(ht=>({id:ht.id,...ht.data()})))}),ft=pi(xr(Et,"prescriptions"),ot=>{o(ot.docs.map(ht=>({id:ht.id,...ht.data()})))}),Ie=pi(xr(Et,"orders"),ot=>{c(ot.docs.map(ht=>({id:ht.id,...ht.data()})))}),Be=pi(xr(Et,"carts"),ot=>{p(ot.docs.map(ht=>({id:ht.id,...ht.data()})))}),tt=pi(xr(Et,"infoCards"),ot=>{m(ot.docs.map(ht=>({id:ht.id,...ht.data()})))});return()=>{le(),je(),ft(),Ie(),Be(),tt()}},[t]),z.useEffect(()=>{let le=null,je=null,ft=null;return j&&j.id?(_e({displayName:j.displayName||"",email:j.email||"",address:j.address||"",phone:j.phone||"",role:j.role||"",suspended:j.role==="suspended",password:""}),le=pi(Vr(xr(Et,"prescriptions"),Wr("userId","==",j.id)),Ie=>{Y(Ie.docs.map(Be=>({id:Be.id,...Be.data()})))}),je=pi(Vr(xr(Et,"orders"),Wr("userId","==",j.id)),Ie=>{pe(Ie.docs.map(Be=>({id:Be.id,...Be.data()})))}),ft=pi(Vr(xr(Et,"carts"),Wr("userId","==",j.id)),Ie=>{xe(Ie.docs.map(Be=>({id:Be.id,...Be.data()})))})):(_e({displayName:"",email:"",address:"",phone:"",role:"",suspended:!1,password:""}),Y([]),pe([]),xe([])),()=>{le&&le(),je&&je(),ft&&ft()}},[j&&j.id]),z.useEffect(()=>{A&&we({name:A.name||"",image:A.image||"",description:A.description||"",stock:A.stock||"",price:A.price||"",sku:A.sku||"",category:A.category||""})},[A]),z.useEffect(()=>{O&&H({header:O.header||"",preview:O.preview||"",link:O.link||"",linkText:O.linkText||"",image:O.image||"",fullImage:O.fullImage||"",bgColor:O.bgColor||"#f0f8ff"})},[O]),z.useEffect(()=>{if(typeof O<"u"&&O&&H){H({header:O.header||"",preview:O.preview||"",link:O.link||"",linkText:O.linkText||"",image:O.image||"",fullImage:O.fullImage||"",bgColor:O.bgColor||"#f0f8ff",headerColor:O.headerColor||"#0ea5e9",previewColor:O.previewColor||"#475569",linkColor:O.linkColor||O.linkTextColor||"#0ea5e9",linkTextColor:O.linkTextColor||O.linkColor||"#0ea5e9",headerFontSize:O.headerFontSize||16,previewFontSize:O.previewFontSize||13,linkFontSize:O.linkFontSize||13,linkTextFontSize:O.linkTextFontSize||13});try{B(!1)}catch{}}},[O]),z.useEffect(()=>{if(!lt.current)return;const le=f2.findIndex(ft=>ft.key===te),je=Math.floor(le/Ym);Ze(je),lt.current.scrollTo({left:je*lt.current.offsetWidth,behavior:"smooth"})},[te]),t?_?d.jsx(q1,{lines:8,className:"my-8"}):d.jsxs("div",{className:"pt-10 pb-28 w-full max-w-4xl mx-auto px-4 min-h-screen flex flex-col",children:[d.jsxs("div",{className:"relative mb-8 flex items-center justify-center",children:[d.jsx("button",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-white border border-sky-100 shadow text-sky-500 hover:bg-sky-100 transition absolute left-0 top-1/2 -translate-y-1/2",style:{display:oe>0?"flex":"none"},onClick:()=>Ze(le=>Math.max(0,le-1)),"aria-label":"Previous tabs",children:d.jsx("span",{className:"text-lg",children:"<"})}),d.jsx("div",{className:"flex gap-2 px-8 w-full justify-center",children:f2.slice(oe*Ym,(oe+1)*Ym).map(le=>d.jsx("button",{className:`min-w-[110px] px-3 py-2 font-semibold tracking-wide text-[13px] rounded-t-lg transition-colors duration-150
                ${te===le.key?"border-b-2 border-sky-500 text-sky-500 bg-sky-50":"text-zinc-400 bg-white hover:bg-sky-50"}`,onClick:()=>{J(le.key),Fe([])},children:le.label},le.key))}),d.jsx("button",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-white border border-sky-100 shadow text-sky-500 hover:bg-sky-100 transition absolute right-0 top-1/2 -translate-y-1/2",style:{display:oe<Math.ceil(f2.length/Ym)-1?"flex":"none"},onClick:()=>Ze(le=>Math.min(Math.ceil(f2.length/Ym)-1,le+1)),"aria-label":"Next tabs",children:d.jsx("span",{className:"text-lg",children:">"})})]}),te==="users"&&d.jsxs("div",{className:"mb-8",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("div",{className:"text-[15px] font-semibold tracking-wide text-sky-500",children:"Users"}),d.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium shadow hover:bg-sky-600",onClick:()=>{_e({displayName:"",email:"",address:"",phone:"",role:"customer",suspended:!1}),P(!0)},children:"Add User"})]}),d.jsx("div",{className:"space-y-2",children:(b?r:r.slice(0,3)).map(le=>d.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:ke.includes(le.id),onChange:je=>Fe(ft=>je.target.checked?[...ft,le.id]:ft.filter(Ie=>Ie!==le.id))}),d.jsxs("div",{className:"flex-1",onClick:je=>{je.target.tagName!=="BUTTON"&&X(le)},children:[d.jsx("div",{className:"font-semibold text-[13px] text-sky-500",children:le.displayName||le.email}),d.jsx("div",{className:"text-[12px] text-zinc-500",children:le.email}),d.jsxs("div",{className:"text-[11px] text-zinc-400",children:["Role: ",le.role||"customer"]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{className:"px-2 py-1 rounded bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:async je=>{je.stopPropagation(),await Za(kr(Et,"users",le.id),{role:"suspended"})},children:"Suspend"}),d.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-600 text-[12px] font-medium",onClick:async je=>{je.stopPropagation(),await Pl(kr(Et,"users",le.id))},children:"Delete"})]})]},le.id))}),ke.length>0&&d.jsxs("div",{className:"flex gap-2 mt-2",children:[d.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-[12px] font-medium",onClick:async()=>{for(const le of ke)await Pl(kr(Et,"users",le));Fe([])},children:"Delete Selected"}),d.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium",onClick:async()=>{for(const le of ke)await Za(kr(Et,"users",le),{role:"suspended"});Fe([])},children:"Suspend Selected"})]}),r.length>3&&!b&&d.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>k(!0),children:"See more"}),r.length>3&&b&&d.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>k(!1),children:"See less"})]}),te==="products"&&d.jsxs("div",{className:"mb-8",children:[d.jsx("div",{className:"text-xl font-semibold mb-2",children:"Products"}),d.jsx("div",{className:"space-y-2",children:(R?i:i.slice(0,3)).map(le=>d.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",onClick:je=>{je.target.tagName!=="BUTTON"&&T(le)},children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"font-bold",children:le.name}),d.jsx("div",{className:"text-sm text-zinc-500",children:le.category}),d.jsxs("div",{className:"text-xs text-zinc-400",children:["Vendor: ",le.vendorId]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{className:"px-2 py-1 rounded bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:async je=>{je.stopPropagation(),await Za(kr(Et,"products",le.id),{approved:!0}),s(i.map(ft=>ft.id===le.id?{...ft,approved:!0}:ft))},children:"Approve"}),d.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-600 text-[12px] font-medium",onClick:async je=>{je.stopPropagation(),await Pl(kr(Et,"products",le.id)),s(i.filter(ft=>ft.id!==le.id))},children:"Delete"})]})]},le.id))}),i.length>3&&!R&&d.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>C(!0),children:"See more"}),i.length>3&&R&&d.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>C(!1),children:"See less"})]}),te==="prescriptions"&&d.jsxs("div",{className:"mb-8",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("div",{className:"text-xl font-semibold",children:"Prescriptions"}),d.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium shadow hover:bg-sky-600",onClick:()=>{},children:"Add Prescription"})]}),d.jsx("div",{className:"space-y-2",children:a.map(le=>d.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:ke.includes(le.id),onChange:je=>Fe(ft=>je.target.checked?[...ft,le.id]:ft.filter(Ie=>Ie!==le.id))}),d.jsxs("div",{className:"flex-1",onClick:()=>{},children:[d.jsx("div",{className:"font-bold",children:le.title||le.id}),d.jsx("div",{className:"text-xs text-zinc-500",children:le.createdAt?new Date(le.createdAt.seconds*1e3).toLocaleString():""}),d.jsxs("div",{className:"text-xs text-zinc-400",children:["Drugs: ",Array.isArray(le.drugs)?le.drugs.join(", "):le.drugs]})]}),d.jsx("div",{className:"flex gap-2",children:d.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-700 text-xs",onClick:async je=>{je.stopPropagation(),await Pl(kr(Et,"prescriptions",le.id))},children:"Delete"})})]},le.id))}),ke.length>0&&d.jsx("div",{className:"flex gap-2 mt-2",children:d.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const le of ke)await Pl(kr(Et,"prescriptions",le));Fe([])},children:"Delete Selected"})})]}),te==="orders"&&d.jsxs("div",{className:"mb-8",children:[d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("div",{className:"text-xl font-semibold",children:"Orders"})}),d.jsx("div",{className:"space-y-2",children:l.map(le=>d.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:ke.includes(le.id),onChange:je=>Fe(ft=>je.target.checked?[...ft,le.id]:ft.filter(Ie=>Ie!==le.id))}),d.jsxs("div",{className:"flex-1",onClick:()=>{},children:[d.jsxs("div",{className:"font-bold",children:["Order #",le.id]}),d.jsx("div",{className:"text-xs text-zinc-500",children:le.createdAt?new Date(le.createdAt.seconds*1e3).toLocaleString():""}),d.jsxs("div",{className:"text-xs text-zinc-400",children:["Products: ",Array.isArray(le.products)?le.products.map(je=>je.name).join(", "):""]})]}),d.jsx("div",{className:"flex gap-2",children:d.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-700 text-xs",onClick:async je=>{je.stopPropagation(),await Pl(kr(Et,"orders",le.id))},children:"Delete"})})]},le.id))}),ke.length>0&&d.jsx("div",{className:"flex gap-2 mt-2",children:d.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const le of ke)await Pl(kr(Et,"orders",le));Fe([])},children:"Delete Selected"})})]}),te==="carts"&&d.jsxs("div",{className:"mb-8",children:[d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("div",{className:"text-xl font-semibold",children:"Carts"})}),d.jsx("div",{className:"space-y-2",children:f.map(le=>d.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:ke.includes(le.id),onChange:je=>Fe(ft=>je.target.checked?[...ft,le.id]:ft.filter(Ie=>Ie!==le.id))}),d.jsxs("div",{className:"flex-1",onClick:()=>{},children:[d.jsxs("div",{className:"font-bold",children:["Cart #",le.id]}),d.jsx("div",{className:"text-xs text-zinc-500",children:le.updatedAt?new Date(le.updatedAt.seconds*1e3).toLocaleString():""}),d.jsxs("div",{className:"text-xs text-zinc-400",children:["Products: ",Array.isArray(le.products)?le.products.map(je=>je.name).join(", "):""]})]}),d.jsx("div",{className:"flex gap-2",children:d.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-700 text-xs",onClick:async je=>{je.stopPropagation(),await Pl(kr(Et,"carts",le.id))},children:"Delete"})})]},le.id))}),ke.length>0&&d.jsx("div",{className:"flex gap-2 mt-2",children:d.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const le of ke)await Pl(kr(Et,"carts",le));Fe([])},children:"Delete Selected"})})]}),te==="analytics"&&d.jsxs("div",{className:"mb-8",children:[d.jsx("div",{className:"text-xl font-semibold mb-4",children:"Analytics"}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[d.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[d.jsx("div",{className:"text-2xl font-bold",children:r.length}),d.jsx("div",{className:"text-xs text-zinc-600",children:"Users"})]}),d.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[d.jsx("div",{className:"text-2xl font-bold",children:i.length}),d.jsx("div",{className:"text-xs text-zinc-600",children:"Products"})]}),d.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[d.jsx("div",{className:"text-2xl font-bold",children:a.length}),d.jsx("div",{className:"text-xs text-zinc-600",children:"Prescriptions"})]}),d.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[d.jsx("div",{className:"text-2xl font-bold",children:l.length}),d.jsx("div",{className:"text-xs text-zinc-600",children:"Orders"})]}),d.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[d.jsx("div",{className:"text-2xl font-bold",children:f.length}),d.jsx("div",{className:"text-xs text-zinc-600",children:"Carts"})]})]}),d.jsx("div",{className:"mt-4 text-zinc-500 text-xs",children:"Charts and advanced analytics coming soon."})]}),te==="moderation"&&d.jsxs("div",{className:"mb-8",children:[d.jsx("div",{className:"text-xl font-semibold mb-4",children:"Moderation"}),d.jsx("div",{className:"text-zinc-500 mb-4",children:"No flagged items yet. Moderation features coming soon."}),ke.length>0&&d.jsx("div",{className:"flex gap-2 mt-2",children:d.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const le of ke);Fe([])},children:"Delete Selected"})})]}),te==="export"&&d.jsxs("div",{className:"mb-8",children:[d.jsx("div",{className:"text-xl font-semibold mb-4",children:"Export Data"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(r,"users"),children:"Export Users TSV"}),d.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(i,"products"),children:"Export Products TSV"}),d.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(a,"prescriptions"),children:"Export Prescriptions TSV"}),d.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(l,"orders"),children:"Export Orders TSV"}),d.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(f,"carts"),children:"Export Carts TSV"})]})]}),d.jsx("div",{className:"mt-6",children:d.jsx("button",{onClick:async()=>{await e(),window.location.href="/auth/landing"},className:"rounded-full border border-red-300 text-red-600 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:"Log Out"})}),(j||K)&&d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-2xl max-w-md w-full border border-sky-100",children:[d.jsx("div",{className:"text-[16px] font-semibold tracking-wide text-sky-500 mb-4",children:K?"Add User":"Edit User"}),Re&&d.jsx("div",{className:"text-red-500 text-xs mb-2",children:Re}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:re.displayName,onChange:le=>_e(je=>({...je,displayName:le.target.value})),placeholder:"Name"}),d.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:re.email,onChange:le=>_e(je=>({...je,email:le.target.value})),placeholder:"Email"}),K&&d.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",type:"password",value:re.password,onChange:le=>_e(je=>({...je,password:le.target.value})),placeholder:"Password"}),d.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:re.address,onChange:le=>_e(je=>({...je,address:le.target.value})),placeholder:"Address"}),d.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:re.phone,onChange:le=>_e(je=>({...je,phone:le.target.value})),placeholder:"Phone Number"}),d.jsxs("select",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:re.role,onChange:le=>_e(je=>({...je,role:le.target.value})),children:[d.jsx("option",{value:"customer",children:"Customer"}),d.jsx("option",{value:"pharmacy",children:"Pharmacy"}),d.jsx("option",{value:"superuser",children:"Superuser"}),d.jsx("option",{value:"suspended",children:"Suspended"})]}),d.jsxs("div",{className:"flex gap-2 mt-4",children:[d.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium text-[13px] shadow hover:bg-sky-600",onClick:async()=>{if(fe(""),K){const le=n7();try{const je=await HI(le,re.email,re.password),ft={...re};delete ft.password;const Ie=await sp(()=>Promise.resolve().then(()=>vI),void 0).then(Be=>Be.addDoc(xr(Et,"users"),{...ft,uid:je.user.uid}));n([...r,{id:Ie.id,...ft,uid:je.user.uid}]),P(!1)}catch(je){fe(je.message||"Failed to create user. Check email, password, and permissions.")}}else try{await Za(kr(Et,"users",j.id),{displayName:re.displayName,email:re.email,address:re.address,phone:re.phone,role:re.role}),n(r.map(le=>le.id===j.id?{...le,...re}:le)),X(null)}catch(le){fe(le.message||"Failed to update user.")}},children:K?"Add":"Save"}),!K&&(re.role==="suspended"?d.jsx("button",{className:"px-4 py-2 rounded bg-green-500 text-white font-medium text-[13px] shadow hover:bg-green-600",onClick:async()=>{await Za(kr(Et,"users",j.id),{role:"customer"}),n(r.map(le=>le.id===j.id?{...le,role:"customer"}:le)),X(null)},children:"Lift Suspension"}):d.jsx("button",{className:"px-4 py-2 rounded bg-red-500 text-white font-medium text-[13px] shadow hover:bg-red-600",onClick:async()=>{await Za(kr(Et,"users",j.id),{role:"suspended"}),n(r.map(le=>le.id===j.id?{...le,role:"suspended"}:le)),X(null)},children:"Suspend"})),d.jsx("button",{className:"px-4 py-2 rounded bg-zinc-100 text-zinc-700 font-medium text-[13px] shadow hover:bg-zinc-200",onClick:()=>{X(null),P(!1),fe("")},children:"Cancel"})]})]})]})}),A&&d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl max-w-md w-full border border-sky-100",children:[d.jsx("div",{className:"text-[16px] font-semibold tracking-wide text-sky-500 mb-4",children:"Edit Product"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:Ce.name,onChange:le=>we(je=>({...je,name:le.target.value})),placeholder:"Product Name"}),d.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:Ce.sku,onChange:le=>we(je=>({...je,sku:le.target.value})),placeholder:"SKU"}),d.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:Ce.price,onChange:le=>we(je=>({...je,price:le.target.value})),placeholder:"Price"}),d.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:Ce.stock,onChange:le=>we(je=>({...je,stock:le.target.value})),placeholder:"Stock"}),d.jsx("textarea",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:Ce.description,onChange:le=>we(je=>({...je,description:le.target.value})),placeholder:"Description",rows:"2"}),d.jsxs("div",{className:"flex gap-2 mt-4",children:[d.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium text-[13px] shadow hover:bg-sky-600",onClick:async()=>{await Za(kr(Et,"products",A.id),{name:Ce.name,sku:Ce.sku,price:Ce.price,stock:Ce.stock,description:Ce.description}),s(i.map(le=>le.id===A.id?{...le,...Ce}:le)),T(null)},children:"Save"}),d.jsx("button",{className:"px-4 py-2 rounded bg-zinc-100 text-zinc-700 font-medium text-[13px] shadow hover:bg-zinc-200",onClick:()=>T(null),children:"Cancel"})]})]})]})}),te==="infoCards"&&d.jsxs("div",{className:"mb-8",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("div",{className:"text-xl font-semibold text-sky-500",children:"Info Cards"}),d.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium shadow hover:bg-sky-600",onClick:()=>{try{I(null)}catch{}try{B(!0)}catch{}try{H({header:"",preview:"",link:"",linkText:"",image:"",fullImage:"",bgColor:"#f0f8ff",headerColor:"#0ea5e9",previewColor:"#475569",linkColor:"#0ea5e9",linkTextColor:"#0ea5e9",headerFontSize:16,previewFontSize:13,linkFontSize:13,linkTextFontSize:13})}catch{}},children:"Add Info Card"})]}),d.jsx("div",{className:"space-y-4",children:g.map(le=>d.jsxs("div",{className:"border border-sky-100 rounded-lg p-4 flex items-center justify-between group hover:shadow-md transition cursor-pointer",style:{background:le.bgColor||"#ffffff"},children:[d.jsxs("div",{className:"flex-1",onClick:()=>{I(le),H({header:le.header||"",preview:le.preview||"",link:le.link||"",linkText:le.linkText||"",image:le.image||"",fullImage:le.fullImage||"",bgColor:le.bgColor||"#f0f8ff",headerColor:le.headerColor||"#0ea5e9",previewColor:le.previewColor||"#475569",linkColor:le.linkColor||le.linkTextColor||"#0ea5e9",linkTextColor:le.linkTextColor||le.linkColor||"#0ea5e9",headerFontSize:le.headerFontSize||16,previewFontSize:le.previewFontSize||13,linkFontSize:le.linkFontSize||13,linkTextFontSize:le.linkTextFontSize||13})},children:[d.jsx("div",{style:{color:le.headerColor||"#0ea5e9",fontSize:(le.headerFontSize||16)+"px",fontWeight:600},children:le.header}),d.jsx("div",{style:{color:le.previewColor||"#475569",fontSize:(le.previewFontSize||13)+"px"},className:"mt-1",children:le.preview}),le.link&&le.linkText&&d.jsx("a",{href:le.link,style:{color:le.linkColor||"#0ea5e9",fontSize:(le.linkFontSize||13)+"px"},className:"underline",target:"_blank",rel:"noopener noreferrer",children:le.linkText}),le.image&&d.jsx("img",{src:le.image,alt:"Info",className:"mt-2 rounded-lg",style:{maxWidth:"120px",maxHeight:"60px"}}),le.fullImage&&d.jsx("img",{src:le.fullImage,alt:"Full",className:"mt-2 rounded-lg",style:{maxWidth:"180px",maxHeight:"100px"}}),d.jsxs("div",{className:"text-[11px] text-zinc-400 mt-2",children:["BG: ",le.bgColor]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{className:"px-2 py-1 rounded bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:je=>{je.stopPropagation(),I(le),B(!1),H({header:le.header||"",preview:le.preview||"",link:le.link||"",linkText:le.linkText||"",image:le.image||"",fullImage:le.fullImage||"",bgColor:le.bgColor||"#f0f8ff",headerColor:le.headerColor||"#0ea5e9",previewColor:le.previewColor||"#475569",linkColor:le.linkColor||le.linkTextColor||"#0ea5e9",linkTextColor:le.linkTextColor||le.linkColor||"#0ea5e9",headerFontSize:le.headerFontSize||16,previewFontSize:le.previewFontSize||13,linkFontSize:le.linkFontSize||13,linkTextFontSize:le.linkTextFontSize||13})},children:"Edit"}),d.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-600 text-[12px] font-medium",onClick:async je=>{je.stopPropagation(),await Pl(kr(Et,"infoCards",le.id))},children:"Delete"})]})]},le.id))}),(O||D)&&d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-2xl max-w-md w-full border border-sky-100",children:[d.jsx("div",{className:"text-[16px] font-semibold tracking-wide text-sky-500 mb-4",children:D?"Add Info Card":"Edit Info Card"}),ut&&d.jsx("div",{className:"text-red-500 text-xs mb-2",children:ut}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:ce.header,onChange:le=>H(je=>({...je,header:le.target.value})),placeholder:"Header"}),d.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:ce.preview,onChange:le=>H(je=>({...je,preview:le.target.value})),placeholder:"Preview text"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{className:"flex-1 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:ce.link,onChange:le=>H(je=>({...je,link:le.target.value})),placeholder:"Link (optional)"}),d.jsx("input",{className:"w-36 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:ce.linkText,onChange:le=>H(je=>({...je,linkText:le.target.value})),placeholder:"Link Text"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{className:"flex-1 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:ce.image,onChange:le=>H(je=>({...je,image:le.target.value})),placeholder:"Image URL (right side, optional)"}),d.jsx("input",{className:"w-36 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:ce.fullImage,onChange:le=>H(je=>({...je,fullImage:le.target.value})),placeholder:"Full Image URL"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("label",{className:"text-xs text-zinc-500",children:["Header Color",d.jsx("input",{type:"color",value:ce.headerColor||"#0ea5e9",onChange:le=>H(je=>({...je,headerColor:le.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),d.jsxs("label",{className:"text-xs text-zinc-500",children:["Header Size",d.jsx("input",{type:"range",min:"12",max:"28",value:ce.headerFontSize||16,onChange:le=>H(je=>({...je,headerFontSize:parseInt(le.target.value)})),className:"w-full mt-1"})]}),d.jsxs("label",{className:"text-xs text-zinc-500",children:["Preview Color",d.jsx("input",{type:"color",value:ce.previewColor||"#475569",onChange:le=>H(je=>({...je,previewColor:le.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),d.jsxs("label",{className:"text-xs text-zinc-500",children:["Preview Size",d.jsx("input",{type:"range",min:"10",max:"22",value:ce.previewFontSize||13,onChange:le=>H(je=>({...je,previewFontSize:parseInt(le.target.value)})),className:"w-full mt-1"})]}),d.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Color",d.jsx("input",{type:"color",value:ce.linkColor||"#0ea5e9",onChange:le=>H(je=>({...je,linkColor:le.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),d.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Size",d.jsx("input",{type:"range",min:"10",max:"22",value:ce.linkFontSize||13,onChange:le=>H(je=>({...je,linkFontSize:parseInt(le.target.value)})),className:"w-full mt-1"})]}),d.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Text Color",d.jsx("input",{type:"color",value:ce.linkTextColor||"#0ea5e9",onChange:le=>H(je=>({...je,linkTextColor:le.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),d.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Text Size",d.jsx("input",{type:"range",min:"10",max:"22",value:ce.linkTextFontSize||13,onChange:le=>H(je=>({...je,linkTextFontSize:parseInt(le.target.value)})),className:"w-full mt-1"})]})]}),d.jsxs("div",{className:"mt-2",children:[d.jsx("label",{className:"text-xs text-zinc-500",children:"Background Color"}),d.jsx("input",{type:"color",value:ce.bgColor||"#f0f8ff",onChange:le=>H(je=>({...je,bgColor:le.target.value})),className:"w-full h-10 mt-1 p-0 border-0"})]}),d.jsxs("div",{className:"mt-3",children:[d.jsx("div",{className:"text-xs text-zinc-500 mb-2",children:"Live preview"}),d.jsxs("div",{style:{background:ce.bgColor||"#f8fafc",padding:12,borderRadius:10,display:"flex",gap:12,alignItems:"center"},children:[d.jsxs("div",{style:{flex:1},children:[d.jsx("div",{style:{color:ce.headerColor||"#0ea5e9",fontSize:(ce.headerFontSize||16)+"px",fontWeight:700},children:ce.header||"Header"}),d.jsx("div",{style:{color:ce.previewColor||"#475569",fontSize:(ce.previewFontSize||13)+"px",marginTop:4},children:ce.preview||"Preview text goes here"}),ce.linkText&&d.jsx("div",{style:{marginTop:6},children:d.jsx("a",{style:{color:ce.linkTextColor||ce.linkColor||"#0ea5e9",fontSize:(ce.linkTextFontSize||13)+"px"},href:ce.link||"#",children:ce.linkText})})]}),ce.image&&d.jsx("img",{src:ce.image,alt:"Preview",style:{width:80,height:60,objectFit:"cover",borderRadius:6}})]})]}),d.jsxs("div",{className:"flex gap-2 mt-4",children:[d.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium text-[13px] shadow hover:bg-sky-600",onClick:async()=>{if(rt(""),D)try{await Zp(xr(Et,"infoCards"),ce),B(!1)}catch(le){rt(le.message||"Failed to add info card.")}else if(O)try{await Za(kr(Et,"infoCards",O.id),ce),I(null)}catch(le){rt(le.message||"Failed to save info card.")}},children:D?"Add":"Save"}),d.jsx("button",{className:"px-4 py-2 rounded bg-zinc-100 text-zinc-700 font-medium text-[13px] shadow hover:bg-zinc-200",onClick:()=>{I(null),B(!1),rt("")},children:"Cancel"})]})]})]})})]})]}):d.jsx(q1,{lines:4,className:"my-8"})}function whe({className:t="h-4 w-4",...e}){return d.jsxs("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...e,children:[d.jsx("path",{d:"M3 9V1M17 17V14M3 17V13M17 10V1M10 4V1M10 17V8",stroke:"currentColor",strokeLinecap:"round"}),d.jsx("path",{d:"M3 13C4.10457 13 5 12.1046 5 11C5 9.89543 4.10457 9 3 9C1.89543 9 1 9.89543 1 11C1 12.1046 1.89543 13 3 13Z",stroke:"currentColor",strokeLinecap:"round"}),d.jsx("path",{d:"M10 8C11.1046 8 12 7.10457 12 6C12 4.89543 11.1046 4 10 4C8.89543 4 8 4.89543 8 6C8 7.10457 8.89543 8 10 8Z",stroke:"currentColor",strokeLinecap:"round"}),d.jsx("path",{d:"M17 14C18.1046 14 19 13.1046 19 12C19 10.8954 18.1046 10 17 10C15.8954 10 15 10.8954 15 12C15 13.1046 15.8954 14 17 14Z",stroke:"currentColor",strokeLinecap:"round"})]})}function _he(){const t=$i(),{profile:e}=Jn(),{userCoords:r,location:n,isLoading:i}=cy(),[s,a]=z.useState([]),[o,l]=z.useState(!0),[c,f]=z.useState(null),[p,g]=z.useState([]),[m,_]=z.useState(""),[w,b]=z.useState(!1),[k,R]=z.useState("all"),[C,j]=z.useState(!1),[X,K]=z.useState([]),[P,A]=z.useState(-1);z.useEffect(()=>{e&&e.role!=="customer"&&t("/")},[e,t]),z.useEffect(()=>{async function H(){try{const te=await iv();a(te||[])}catch(te){console.error("Error loading pharmacies:",te)}finally{l(!1)}}H()},[]),z.useEffect(()=>{if(!r||s.length===0){g(s);return}let H=s.map(te=>{const J=kb(te,r,"driving"),N=T(te),U=N?Sb(r.latitude,r.longitude,N.latitude,N.longitude):1/0;return{...te,distance:U,eta:J,coords:N}}).filter(te=>te.coords);if(k!=="all"){const te=parseInt(k);H=H.filter(J=>J.distance<=te)}if(m.trim()){const te=m.toLowerCase();H=H.filter(J=>J.name?.toLowerCase().includes(te)||J.address?.toLowerCase().includes(te))}H.sort((te,J)=>te.distance-J.distance),g(H),H.length>0&&(!c||!H.find(te=>te.id===c.id))&&f(H[0])},[r,s,c,m,k]),z.useEffect(()=>{if(!m.trim()||m.length<2){K([]),j(!1);return}const H=m.toLowerCase(),te=s.filter(J=>J.name?.toLowerCase().includes(H)||J.address?.toLowerCase().includes(H)).slice(0,5).map(J=>({id:J.id,name:J.name,address:J.address,type:J.name?.toLowerCase().includes(H)?"name":"address"}));K(te),j(te.length>0),A(-1)},[m,s]);function T(H){return H?H.coordinates?.latitude&&H.coordinates?.longitude?{latitude:Number(H.coordinates.latitude),longitude:Number(H.coordinates.longitude)}:H.latitude&&H.longitude?{latitude:Number(H.latitude),longitude:Number(H.longitude)}:H.lat&&H.lng?{latitude:Number(H.lat),longitude:Number(H.lng)}:null:null}const O=H=>{H.phone&&(window.location.href=`tel:${H.phone}`)},I=H=>{const te=T(H);if(te&&r){const J=`https://www.google.com/maps/dir/${r.latitude},${r.longitude}/${te.latitude},${te.longitude}`;window.open(J,"_blank")}},D=H=>{f(H)},B=H=>{(H.vendorId||H.id)&&t(`/vendor/${H.vendorId||H.id}`)},re=H=>{_(H),A(-1)},_e=H=>{_(H.name),j(!1),A(-1);const te=s.find(J=>J.id===H.id);te&&(f(te),setTimeout(()=>{const J=document.getElementById(`pharmacy-${te.id}`);J&&J.scrollIntoView({behavior:"smooth",block:"center"})},100))},Ce=()=>{X.length>0&&m.length>=2&&j(!0)},we=()=>{setTimeout(()=>{j(!1),A(-1)},200)},ce=H=>{if(!(!C||X.length===0))switch(H.key){case"ArrowDown":H.preventDefault(),A(te=>te<X.length-1?te+1:0);break;case"ArrowUp":H.preventDefault(),A(te=>te>0?te-1:X.length-1);break;case"Enter":H.preventDefault(),P>=0&&P<X.length&&_e(X[P]);break;case"Escape":j(!1),A(-1);break}};return o||i?d.jsx("div",{className:"min-h-screen bg-gray-50 px-4 py-6",children:d.jsxs("div",{className:"max-w-md mx-auto",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[d.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:d.jsx($1,{className:"h-5 w-5"})}),d.jsx("h1",{className:"text-[25px] font-light",children:"Nearby Pharmacies"})]}),d.jsx(q1,{lines:8,className:"space-y-4"})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsx("div",{className:"bg-white shadow-sm px-4 py-4 sticky top-0 z-50",children:d.jsx("div",{className:"max-w-md mx-auto",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:d.jsx($1,{className:"h-5 w-5"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-light",children:"Nearby Pharmacies"}),d.jsx("p",{className:"text-sm text-gray-400",children:r?`${p.length} pharmacies found near you`:"Loading location..."})]})]})})}),d.jsxs("div",{className:"max-w-md mx-auto px-4 py-6",children:[d.jsx("div",{className:"bg-white rounded-lg p-4 mb-4 shadow-sm",children:d.jsx("div",{className:"flex items-center gap-3",children:r?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Your Location"}),d.jsx("p",{className:"text-xs text-gray-600 truncate",children:n})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full animate-pulse"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-sm font-medium text-gray-900",children:i?"Getting your location...":"Location access needed"}),d.jsx("p",{className:"text-xs text-gray-600",children:i?"Please allow location access for accurate ETAs":"Enable location services to see nearby pharmacies"})]})]})})}),d.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4 shadow-sm",children:[d.jsxs("div",{className:"flex gap-2 mb-3",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(Zf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),d.jsx("input",{type:"text",placeholder:"Search pharmacies...",value:m,onChange:H=>re(H.target.value),onFocus:Ce,onBlur:we,onKeyDown:ce,className:"w-full pl-10 pr-4 py-2 border-b border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",autoComplete:"off"}),C&&m.length>=2&&d.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto animate-fade-in",children:[X.length>0?X.map((H,te)=>d.jsx("button",{onClick:()=>_e(H),className:`w-full text-left px-4 py-3 focus:outline-none transition-colors duration-200 border-b border-gray-100 last:border-b-0 animate-fadeInUp ${te===P?"bg-blue-100 border-blue-200":"hover:bg-blue-50 focus:bg-blue-50"}`,style:{animationDelay:`${te*.05}s`},children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 transition-colors duration-200 ${te===P?"bg-blue-200":"bg-blue-100"}`,children:d.jsx(ac,{className:`h-4 w-4 ${te===P?"text-blue-700":"text-blue-600"}`})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"font-medium text-sm text-gray-900 truncate",children:H.type==="name"?d.jsx("span",{children:H.name.split(new RegExp(`(${m})`,"gi")).map((J,N)=>J.toLowerCase()===m.toLowerCase()?d.jsx("span",{className:"bg-yellow-200 px-1 rounded",children:J},N):J)}):H.name}),d.jsx("div",{className:"text-xs text-gray-500 truncate mt-1",children:H.type==="address"?d.jsx("span",{children:H.address.split(new RegExp(`(${m})`,"gi")).map((J,N)=>J.toLowerCase()===m.toLowerCase()?d.jsx("span",{className:"bg-yellow-200 px-1 rounded",children:J},N):J)}):H.address})]}),d.jsx("div",{className:"text-xs text-blue-600 font-medium flex-shrink-0",children:H.type==="name"?"Name":"Address"})]})},H.id)):d.jsxs("div",{className:"px-4 py-6 text-center text-gray-500 animate-fade-in",children:[d.jsx(ac,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),d.jsx("p",{className:"text-sm",children:"No pharmacies found"}),d.jsx("p",{className:"text-xs mt-1",children:"Try a different search term"})]}),X.length>0&&d.jsx("div",{className:"px-4 py-2 border-t border-gray-100 bg-gray-50 text-xs text-gray-400 text-center",children:"Use  arrow keys to navigate, Enter to select, Esc to close"})]})]}),d.jsx("button",{onClick:()=>b(!w),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 ${w?"bg-blue-500 text-white border-blue-500":"text-gray-700"}`,children:d.jsx(whe,{className:"h-4 w-4"})})]}),w&&d.jsxs("div",{className:"border-t pt-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Distance"}),d.jsx("div",{className:"flex gap-2 flex-wrap",children:[{value:"all",label:"All"},{value:"5",label:"Within 5km"},{value:"10",label:"Within 10km"},{value:"20",label:"Within 20km"}].map(H=>d.jsx("button",{onClick:()=>R(H.value),className:`px-3 py-1 rounded-full text-sm transition-colors ${k===H.value?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:H.label},H.value))})]})]}),d.jsx("div",{className:"bg-white rounded-lg mb-4 shadow-sm overflow-hidden",children:d.jsxs("div",{className:"h-80 bg-gradient-to-br from-green-50 via-blue-50 to-indigo-100 relative",children:[d.jsx("div",{className:"absolute inset-0 opacity-10",children:d.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("defs",{children:d.jsx("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:d.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"#6B7280",strokeWidth:"1"})})}),d.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),d.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 320",children:[d.jsx("path",{d:"M0 160 Q200 120 400 160",stroke:"#E5E7EB",strokeWidth:"8",fill:"none"}),d.jsx("path",{d:"M200 0 Q200 160 200 320",stroke:"#E5E7EB",strokeWidth:"6",fill:"none"}),d.jsx("path",{d:"M0 80 Q100 60 200 80",stroke:"#F3F4F6",strokeWidth:"4",fill:"none"}),d.jsx("path",{d:"M200 240 Q300 220 400 240",stroke:"#F3F4F6",strokeWidth:"4",fill:"none"})]}),r&&d.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"w-4 h-4 bg-blue-600 rounded-full border-2 border-white shadow-lg animate-pulse"}),d.jsx("div",{className:"absolute -inset-2 bg-blue-400 rounded-full opacity-30 animate-ping"})]}),d.jsx("span",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-xs bg-white px-2 py-1 rounded shadow-md whitespace-nowrap",children:"You are here"})]}),p.slice(0,8).map((H,te)=>{const J=te*45*(Math.PI/180),N=80+te*10,U=50+Math.cos(J)*N/4,W=50+Math.sin(J)*N/6;return d.jsx("div",{className:`absolute transform -translate-x-1/2 -translate-y-full cursor-pointer transition-all duration-200 hover:scale-125 z-20 ${c?.id===H.id?"scale-125 z-30":""}`,style:{left:`${Math.max(10,Math.min(90,U))}%`,top:`${Math.max(15,Math.min(85,W))}%`},onClick:()=>D(H),children:d.jsxs("div",{className:"relative group",children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold shadow-lg border-2 border-white transition-colors ${c?.id===H.id?"bg-red-500 shadow-red-200":"bg-blue-500 shadow-blue-200"}`,children:te+1}),d.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none",children:d.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 whitespace-nowrap shadow-lg",children:[d.jsx("div",{className:"font-medium",children:H.name}),d.jsxs("div",{className:"text-gray-300",children:[H.eta?.formatted,"  ",H.distance?.toFixed(1),"km"]}),d.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900"})]})})]})},H.id||te)}),d.jsx("div",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-sm",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ac,{className:"h-5 w-5 text-blue-600"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Pharmacy Locations"}),d.jsxs("p",{className:"text-xs text-gray-600",children:[p.length," pharmacies  Sorted by distance"]})]})]})}),d.jsx("div",{className:"absolute bottom-4 right-4 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-sm",children:d.jsxs("div",{className:"space-y-2 text-xs",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full border border-white"}),d.jsx("span",{className:"text-gray-700",children:"Your location"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full border border-white"}),d.jsx("span",{className:"text-gray-700",children:"Pharmacy"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full border border-white"}),d.jsx("span",{className:"text-gray-700",children:"Selected"})]})]})})]})}),c&&d.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-3 mb-4 shadow-sm border border-blue-200",children:[d.jsxs("div",{className:"flex items-start justify-between mb-2",children:[d.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[d.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-bold shadow-lg flex-shrink-0",children:p.findIndex(H=>H.id===c.id)+1}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"font-semibold text-gray-900 text-base truncate",children:c.name}),d.jsx("p",{className:"text-xs text-gray-600 mb-2 truncate",children:c.address}),d.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 flex-wrap",children:[d.jsxs("div",{className:"flex items-center gap-1 bg-white rounded-full px-2 py-1",children:[d.jsx(av,{className:"h-3 w-3 text-blue-500 flex-shrink-0"}),d.jsx("span",{className:"font-medium whitespace-nowrap",children:c.eta?.formatted||"Calculating..."})]}),d.jsxs("div",{className:"flex items-center gap-1 bg-white rounded-full px-2 py-1",children:[d.jsx(ac,{className:"h-3 w-3 text-green-500 flex-shrink-0"}),d.jsxs("span",{className:"font-medium whitespace-nowrap",children:[c.distance?.toFixed(1)||"0"," km"]})]}),c.phone&&d.jsxs("div",{className:"flex items-center gap-1 bg-white rounded-full px-2 py-1",children:[d.jsx(Lp,{className:"h-3 w-3 text-purple-500 flex-shrink-0"}),d.jsx("span",{className:"font-medium text-xs truncate max-w-[80px]",children:c.phone})]})]})]})]}),d.jsx("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full font-medium shadow-sm flex-shrink-0 ml-2",children:"Closest"})]}),d.jsxs("div",{className:"flex gap-1.5",children:[d.jsxs("button",{onClick:()=>I(c),className:"flex-1 bg-blue-600 text-white py-2 px-3 rounded-full text-xs font-medium hover:bg-blue-700 transition-all duration-200 flex items-center justify-center gap-1 shadow-sm btn-interactive",children:[d.jsx(KS,{className:"h-3 w-3"}),d.jsx("span",{className:"hidden sm:inline",children:"Get Directions"}),d.jsx("span",{className:"sm:hidden",children:"Get Directions"})]}),c.phone&&d.jsxs("button",{onClick:()=>O(c),className:"bg-green-600 text-white py-2 px-3 rounded-full text-xs font-medium hover:bg-green-700 transition-all duration-200 flex items-center justify-center gap-1 shadow-sm btn-interactive",title:"Call pharmacy",children:[d.jsx(Lp,{className:"h-3 w-3"}),d.jsx("span",{className:"hidden sm:inline",children:"Call"})]}),d.jsxs("button",{onClick:()=>B(c),className:"flex-1 bg-white text-blue-600 py-2 px-3 rounded-full text-xs font-medium hover:bg-blue-50 transition-all duration-200 border border-blue-200 shadow-sm btn-interactive",children:[d.jsx("span",{className:"hidden sm:inline",children:"View Products"}),d.jsx("span",{className:"sm:hidden",children:"View Products"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:m?d.jsxs(d.Fragment,{children:[d.jsx("span",{children:"Search Results"}),d.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full animate-pulse-slow",children:['"',m,'"']})]}):"All Pharmacies"}),d.jsxs("span",{className:"text-sm text-gray-500",children:[p.length," found"]})]}),p.length===0?d.jsxs("div",{className:"bg-white rounded-lg p-8 text-center shadow-sm",children:[d.jsx(ac,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),d.jsx("p",{className:"text-gray-600",children:m?"No pharmacies found matching your search":"No pharmacies found"}),d.jsx("p",{className:"text-sm text-gray-500",children:m?"Try adjusting your search terms":"Try adjusting your location or check back later"}),m&&d.jsx("button",{onClick:()=>_(""),className:"mt-3 text-blue-600 hover:text-blue-700 text-sm font-medium hover:scale-105 active:scale-95 transition-all duration-200 px-3 py-1 rounded-full hover:bg-blue-50",children:"Clear search"})]}):p.map((H,te)=>d.jsx("div",{id:`pharmacy-${H.id}`,className:`bg-white rounded-lg p-3 shadow-sm border cursor-pointer transition-all duration-200 card-interactive animate-fadeInUp ${c?.id===H.id?"border-blue-300 bg-blue-50 shadow-blue-100 scale-102":"border-gray-200 hover:border-gray-300 hover:shadow-md"}`,style:{animationDelay:`${te*.1}s`},onClick:()=>D(H),children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[d.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-bold shadow-sm flex-shrink-0 ${c?.id===H.id?"bg-blue-500":"bg-gray-400"}`,children:te+1}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:H.name}),te===0&&d.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-0.5 rounded-full font-medium flex-shrink-0",children:"Closest"})]}),d.jsx("p",{className:"text-xs text-gray-600 mb-2 truncate",children:H.address}),d.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[d.jsxs("div",{className:"flex items-center gap-1 text-blue-600",children:[d.jsx(av,{className:"h-3 w-3 flex-shrink-0"}),d.jsx("span",{className:"font-medium whitespace-nowrap",children:H.eta?.formatted||"Calculating..."})]}),d.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[d.jsx(ac,{className:"h-3 w-3 flex-shrink-0"}),d.jsxs("span",{className:"font-medium whitespace-nowrap",children:[H.distance?.toFixed(1)||"0"," km"]})]})]})]})]}),d.jsx("button",{onClick:J=>{J.stopPropagation(),I(H)},className:"text-blue-600 hover:text-blue-700 transition-colors p-1.5 hover:bg-blue-50 rounded-full flex-shrink-0 ml-2",title:"Get directions",children:d.jsx(KS,{className:"h-4 w-4"})})]})},H.id||te))]}),C&&X.length>0&&d.jsx("div",{className:"absolute z-50 w-full max-w-md mx-auto mt-2 bg-white rounded-lg shadow-lg",children:d.jsx("div",{className:"flex flex-col divide-y divide-gray-200",children:X.map(H=>d.jsxs("button",{onClick:()=>_e(H),className:"flex items-center justify-between w-full px-4 py-2 text-left text-gray-900 hover:bg-blue-50 transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(ac,{className:"h-5 w-5 text-blue-600"}),d.jsxs("div",{className:"flex flex-col text-sm",children:[d.jsx("span",{className:"font-medium",children:H.name}),d.jsx("span",{className:"text-gray-500 truncate",children:H.address})]})]}),d.jsx("span",{className:"text-xs text-gray-400",children:p.findIndex(te=>te.id===H.id)+1})]},H.id))})})]})]})}const bhe="/assets/PharmaseaLogo-DHy81Ybs.png";function fm({children:t}){return d.jsx("div",{className:"min-h-screen bg-white",children:d.jsxs("div",{className:"max-w-md mx-auto px-6 pt-14 pb-10",children:[d.jsxs("div",{className:"flex flex-col items-center mb-10",children:[d.jsx("img",{src:bhe,alt:"Pharmasea",className:"w-40 h-15 object-contain"}),d.jsx("div",{className:"mt-3 text-zinc-600 text-[13px]"})]}),t]})})}function Ehe(){const[t,e]=z.useState("customer"),r=$i();return d.jsxs(fm,{children:[d.jsxs("div",{className:"mt-4 font-poppins text-[32px] sm:text-[38px] md:text-[42px] lg:text-[54px] font-thin tracking-tight leading-[109%] text-left",children:["HealthCare at",d.jsx("br",{}),"Your Doorstep"]}),d.jsx("p",{className:"mt-1 text-black text-[13px] sm:text-[14px] md:text-[16px] tracking-tight font-thin leading-[154%] font-poppins text-left",children:"Pick up and deliver medical prescribed medications and, over-the-counter items from pharmacies to your doorstep."}),d.jsxs("div",{className:"mt-8 flex flex-row gap-4 w-full max-w-[350px] mx-0",children:[d.jsxs("button",{onClick:()=>e("customer"),className:`relative rounded-3xl p-0 text-left border-[1] font-poppins bg-[#F7F7F7] w-[169px] h-[169px] border-[1px] ${t==="customer"?"border-[#36A5FF] border-[1.5px] ring-2 ring-[#36A5FF]":"border-[#36A5FF]"}`,children:[d.jsxs("div",{className:"absolute left-[9px] top-[80px] text-[20px] sm:text-[25px] font-light tracking-tight leading-[109%] font-poppins",children:["Im a",d.jsx("br",{}),"customer"]}),d.jsx("div",{className:"absolute left-[9px] top-[127px] text-black text-[12px] sm:text-[13px] font-extralight tracking-tight leading-[109%] font-poppins",children:"Sign Up or Login as a customer"})]}),d.jsxs("button",{onClick:()=>e("pharmacy"),className:`relative rounded-3xl p-0 text-left border-[2] font-poppins bg-[#F7F7F7] w-[169px] h-[169px] border-[1px] ${t==="pharmacy"?"border-[#36A5FF] border-[1.5px] ring-2 ring-[#36A5FF]":"border-[#36A5FF]"}`,children:[d.jsxs("div",{className:"absolute left-[9px] top-[80px] text-[20px] sm:text-[25px] font-light tracking-tight leading-[109%] font-poppins",children:["Im a",d.jsx("br",{}),"pharmacy"]}),d.jsx("div",{className:"absolute left-[9px] top-[127px] text-black text-[12px] sm:text-[13px] font-extralight tracking-tight leading-[109%] font-poppins",children:"Sign Up or Login as a pharmacy"})]})]}),d.jsx("div",{className:"flex justify-start w-full max-w-[350px] mx-0",children:d.jsx("button",{onClick:()=>r(t==="customer"?"/auth/customer/signin":"/auth/pharmacy/signin"),disabled:!t,className:`mt-8 w-full h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] font-light ${t?"border-[#36A5FF] text-[#000000] cursor-pointer bg-white":"border-zinc-300 text-zinc-400 cursor-not-allowed bg-white"} flex items-center justify-center`,children:"Continue"})}),d.jsxs("div",{className:"fixed bottom-0 left-1/2 transform -translate-x-1/2 flex flex-row gap-0 justify-center z-10",children:[d.jsx("div",{className:"flex flex-col items-center",children:d.jsx("svg",{width:"91",height:"152",viewBox:"0 0 91 152",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-30 h-40",children:d.jsx("path",{d:"M17.9558 53.3893L8.27792 64.6462C6.66938 66.5171 5.41493 68.6715 4.57719 71.0016L2.02085 78.1119C1.34548 79.9904 1 81.9738 1 83.9727V144.038C1 145.898 2.49116 147.406 4.33061 147.406M17.9558 53.3893V48.6425M17.9558 53.3893L34.6089 64.4141M53.3814 18.7837L54.3809 16.3407C55.821 12.8205 54.0914 8.79384 50.5647 7.4562L47.3257 6.2277L32.2398 1.3232C31.0192 0.92638 29.7113 0.894269 28.4731 1.23072L23.0885 2.69388C15.4164 4.77859 10.0835 11.8129 10.0835 19.8478V25.8211C10.0835 26.8331 10.3089 27.832 10.7429 28.7438L17.2964 42.5105C17.7304 43.4223 17.9558 44.4213 17.9558 45.4332V48.6425M53.3814 18.7837L44.7483 21.5411C42.9395 22.1189 41.5043 23.5227 40.873 25.3318L39.9367 28.0151C39.0833 30.4607 36.1645 31.416 34.0563 29.9399C32.1107 28.5775 29.4231 29.2739 28.3648 31.4147L27.1285 33.9155C26.5328 35.1206 26.7663 36.576 27.7082 37.5287C29.0866 38.9229 28.8627 41.2433 27.2438 42.3416L17.9558 48.6425M53.3814 18.7837V25.8478C53.3814 26.8426 53.5992 27.8251 54.0192 28.7247L57.1065 35.3372C57.8674 36.9669 57.0683 38.9047 55.3879 39.5045C54.1855 39.9338 53.3814 41.0833 53.3814 42.373V45.3402C53.3814 47.4234 52.4286 49.3894 50.8006 50.6655L49.8214 51.4331C48.2553 52.6607 46.1993 53.0475 44.3015 52.4717C40.9857 51.4656 37.5042 53.4323 36.6123 56.8154L34.6089 64.4141M34.6089 64.4141L45.9226 79.1266C46.832 80.3093 47.3257 81.7647 47.3257 83.263V112.494M47.3257 112.494L57.378 114.673C58.9322 115.01 60.0426 116.399 60.0426 118.007M47.3257 112.494L39.2526 111.134C36.4692 110.664 34.2802 108.472 33.7884 105.662L28.5532 75.7452M5.84452 90.4449L16.5969 122.799C17.4252 125.291 19.6115 127.069 22.1963 127.351L44.9035 129.829M44.9035 129.829L58.4183 131.304C59.2857 131.399 60.0426 130.712 60.0426 129.829M44.9035 129.829V144.344C44.9035 146.035 43.5479 147.406 41.8756 147.406M4.33061 147.406V152M4.33061 147.406H41.8756M41.8756 147.406V152M60.0426 118.007L74.9597 115.396C75.4962 115.302 76.0484 115.39 76.5296 115.648L77.5323 116.185C78.9238 116.93 78.8663 118.966 77.435 119.629C75.9577 120.314 75.9577 122.437 77.435 123.122L80.026 124.323C80.6177 124.597 81.2779 124.683 81.9188 124.569L89.2869 123.253C89.8746 123.149 90.2421 123.876 89.8139 124.296L83.029 130.688C81.8106 132.153 79.7275 132.829 77.6711 132.516L60.0426 129.829M60.0426 118.007V129.829",stroke:t==="customer"?"#36A5FF":"#9C9C9C",strokeWidth:"1"})})}),d.jsx("div",{className:"flex flex-col items-center -mr-4",children:d.jsx("svg",{width:"124",height:"154",viewBox:"0 0 124 154",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-34 h-50",children:d.jsx("path",{d:"M91.0549 25.0462L73.1047 18.9491L69.7581 17.6418M91.0549 25.0462V15.9124C91.0549 12.2404 89.4035 8.76383 86.5593 6.44828L84.0113 4.37386C82.2516 2.94119 80.1275 2.02961 77.8784 1.74191L72.8466 1.09826C69.1654 0.627362 65.4709 1.86534 62.8128 4.46045L55.1546 11.9374M91.0549 25.0462L86.187 39.6793M55.1546 11.9374L42.0162 13.7096C40.4803 13.9168 39.3342 15.2303 39.3342 16.7831C39.3342 18.0841 40.1446 19.2469 41.3636 19.6948L45.7766 21.3161C47.53 21.9603 49.4304 22.0904 51.255 21.6911L53.3292 21.2372M55.1546 11.9374L69.7581 17.6418M69.7581 17.6418L53.3292 21.2372M86.187 39.6793L84.1073 37.9861C82.3434 36.55 81.3192 34.3938 81.3192 32.1164V29.8544C81.3192 28.0625 80.2099 26.4585 78.5355 25.8293C77.2288 25.3383 75.7654 25.5149 74.6123 26.3026L74.4142 26.438C71.9808 28.1005 68.6396 27.1674 67.4151 24.4834L66.8363 23.2147C65.6954 20.7139 62.9904 19.3251 60.2983 19.8579L53.3292 21.2372M86.187 39.6793V42.3816C86.187 47.066 83.509 51.3364 79.2968 53.3686L69.7581 57.9706M53.3292 29.619L50.776 32.8169C49.6344 34.2468 50.2196 36.3768 51.9308 37.0198C52.8004 37.3466 53.4399 38.1002 53.6221 39.0127L54.6658 44.2419C54.9838 45.8349 55.789 47.2892 56.9697 48.4027C59.0405 50.3557 62.0076 51.0253 64.7141 50.1505L65.0424 50.0443M65.0424 50.0443L69.7581 48.5201M65.0424 50.0443L69.7581 57.9706M69.7581 57.9706L58.4277 73.5484C57.2767 75.1309 56.523 76.9678 56.2302 78.9039L55.2919 85.1091C55.2005 85.7137 55.1546 86.3243 55.1546 86.9358V105.833M86.187 51.5686L94.7057 60.4094M94.7057 60.4094L97.2251 68.7403C97.5719 69.8869 97.7481 71.0785 97.7481 72.2767V117.417M94.7057 60.4094L86.5047 58.9153C83.1962 58.3125 79.7862 59.1084 77.0841 61.1141L76.4306 61.5991C74.274 63.1998 72.706 65.4699 71.9705 68.0562L66.3979 87.6526C65.643 90.3072 67.1319 93.082 69.7581 93.915M94.7057 60.4094C96.5984 57.3751 99.9175 55.5317 103.489 55.5317H110.691C116.582 55.5317 121.628 59.7609 122.669 65.5717L122.809 66.3525C122.936 67.0635 123 67.7844 123 68.5068V114.611C123 116.438 122.439 118.22 121.394 119.717C119.731 122.097 117.014 123.514 114.114 123.514H98.3397M97.7481 117.417L98.3397 123.514M97.7481 117.417L84.4731 103.089M56.6758 119.856V136.318C56.6758 138.33 58.3187 139.953 60.3267 139.925M56.6758 119.856L71.2748 118.208C75.606 117.719 79.3455 114.946 81.0785 110.939L84.4731 103.089M56.6758 119.856L51.8317 119.407C49.6266 119.202 47.4077 119.604 45.4139 120.57L41.0962 122.661C39.944 123.219 38.6602 123.447 37.3868 123.319L30.7529 122.655C29.0361 122.483 28.0373 120.626 28.8379 119.094M86.187 99.126L94.7057 79.9202M86.187 99.126L69.7581 93.915M86.187 99.126L84.4731 103.089M98.3397 123.514L99.3773 134.208C99.6467 136.986 97.4902 139.401 94.7057 139.44M55.1546 105.833L53.3508 106.408C50.2244 107.405 46.8289 107.094 43.934 105.547L39.3342 103.089M55.1546 105.833L60.1247 104.684C64.3874 103.698 67.7941 100.495 69.0476 96.2957L69.7581 93.915M39.3342 103.089H32.8489C32.3189 103.089 31.8032 103.261 31.3792 103.58C29.9657 104.642 30.1054 106.809 31.6436 107.68L31.8803 107.814M39.3342 103.089V85.7124C39.3342 82.5134 36.7461 79.9202 33.5536 79.9202M18.6459 113.759H29.0173C29.7889 113.759 30.5391 113.505 31.152 113.035L32.1866 112.242C33.6989 111.083 33.5377 108.753 31.8803 107.814M18.6459 113.759L20.9268 116.299C22.9188 118.516 25.8982 119.569 28.8379 119.094M18.6459 113.759H13.1696C6.44851 113.759 1 108.3 1 101.565V86.9318C1 83.0594 4.13289 79.9202 7.99751 79.9202M28.8379 119.094L33.5536 118.332M7.99751 79.9202L8.39241 78.1395C8.92777 75.7255 10.1829 73.5317 11.9914 71.849L13.4738 70.4696M7.99751 79.9202H33.5536M7.99751 79.9202V100.65M13.4738 70.4696H13.1696C10.9852 70.4696 9.21446 68.6953 9.21446 66.5065C9.21446 64.3178 10.9852 62.5434 13.1696 62.5434H28.0773C30.2617 62.5434 32.0324 64.3178 32.0324 66.5065V66.8114C32.0324 68.8318 30.3979 70.4696 28.3815 70.4696M13.4738 70.4696H28.3815M28.3815 70.4696L30.207 74.4328L33.5536 79.9202M33.5536 79.9202V88.4561C33.5536 95.1908 28.1051 100.65 21.384 100.65H7.99751M7.99751 100.65C7.99751 104.684 11.2741 107.946 15.2991 107.92L31.8803 107.814M60.3267 139.925V154M60.3267 139.925L94.7057 139.44M94.7057 139.44V154M20.7756 83.5784V89.9804M20.7756 89.9804V96.3824M20.7756 89.9804H26.5561M20.7756 89.9804H14.3865",stroke:t==="pharmacy"?"#36A5FF":"#989898",strokeWidth:"1"})})})]})]})}function Hg({to:t}){const e=$i();return d.jsx("button",{onClick:()=>e(t||-1),className:"mb-5 w-[70px] h-[20px] font-poppins font-extralight tracking-tight text-[12px] flex items-center justify-center rounded-full bg-white border border-zinc-300",children:" Back"})}function nL({email:t}){return d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:d.jsxs("div",{className:"bg-white p-8 max-w-md w-full text-center",children:[d.jsxs("h2",{className:"text-xl font-thin mb-2",children:["Registration",d.jsx("br",{}),"Successful!"]}),d.jsxs("p",{className:"mb-4 text-zinc-600 text-[13px]",children:["A verification link has been sent to ",d.jsx("b",{children:t}),".",d.jsx("br",{}),"Please check your inbox and verify your email to continue."]}),d.jsx(th,{to:"/auth/customer/signin",className:"mt-4 inline-block px-4 py-2 bg-sky-600 text-white rounded-full",children:"Go to Sign In"})]})})}function She(){const{signUp:t}=Jn(),[e,r]=z.useState({name:"",email:"",phone:"",password:"",address:""}),[n,i]=z.useState(!1),[s,a]=z.useState(null),[o,l]=z.useState([]),[c,f]=z.useState(null),p=z.useRef(),[g,m]=z.useState(!1);$i();const _=async R=>{if(!R)return l([]);const j=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(R)}&addressdetails=1&limit=5`)).json();l(j)},w=R=>{const C=R.target.value;r({...e,address:C}),f(null),clearTimeout(p.current),p.current=setTimeout(()=>_(C),400)},b=R=>{r({...e,address:R.display_name}),f(R),l([])},k=async R=>{R.preventDefault(),i(!0);try{if(!e.address)throw new Error("Address is required");const C=await t({email:e.email,password:e.password,displayName:e.name,role:"customer",address:e.address,lat:c?.lat,lon:c?.lon});a(e.email)}catch(C){alert(C.message)}finally{i(!1)}};return s?d.jsx(nL,{email:s}):d.jsxs(fm,{children:[d.jsx(Hg,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),d.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left",children:["I'm a",d.jsx("br",{}),"Customer"]}),d.jsxs("form",{onSubmit:k,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[d.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Full Name",value:e.name,onChange:R=>r({...e,name:R.target.value})}),d.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:e.email,onChange:R=>r({...e,email:R.target.value})}),d.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Phone Number",value:e.phone,onChange:R=>r({...e,phone:R.target.value})}),d.jsxs("div",{className:"relative mb-4",children:[d.jsx("input",{className:"w-full px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Address (required)",value:e.address||"",onChange:w,required:!0,autoComplete:"off"}),o.length>0&&d.jsx("div",{className:"absolute left-0 right-0 bg-white border border-zinc-200 rounded shadow-lg z-10 max-h-40 overflow-y-auto animate-fade-in",children:o.map((R,C)=>d.jsxs("div",{className:"px-4 py-2 hover:bg-sky-50 cursor-pointer text-[13px] transition-colors duration-200 animate-fadeInUp border-b border-gray-100 last:border-b-0 flex items-center gap-3",style:{animationDelay:`${C*.05}s`},onClick:()=>b(R),children:[d.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-blue-100 flex-shrink-0",children:d.jsxs("svg",{className:"h-3 w-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),d.jsx("div",{className:"flex-1 min-w-0",children:d.jsx("div",{className:"text-sm text-gray-900 truncate",children:R.display_name})}),d.jsx("div",{className:"text-xs text-blue-600 font-medium flex-shrink-0",children:"Address"})]},R.place_id))})]}),d.jsxs("div",{className:"relative mb-4",children:[d.jsx("input",{type:g?"text":"password",className:"w-full mb-0 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Choose a password",value:e.password,onChange:R=>r({...e,password:R.target.value})}),d.jsx("button",{type:"button",onClick:()=>m(R=>!R),"aria-pressed":g,"aria-label":g?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500",children:g?d.jsx(oy,{className:"h-5 w-5"}):d.jsx(ly,{className:"h-5 w-5"})})]}),d.jsx("div",{className:"flex justify-center w-full",children:d.jsx("button",{disabled:n,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] text-[#36A5FF] bg-white mt-4 flex items-center justify-center",children:n?"Registering":"Register"})})]}),d.jsxs("div",{className:"mt-6 text-center text-zinc-500 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Already have an account? ",d.jsx(th,{to:"/auth/customer/signin",className:"text-sky-600 font-medium",children:"Sign In"})]})]})}function iL({message:t,onRetry:e}){return d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:d.jsxs("div",{className:"bg-white p-8 max-w-md w-full text-center",children:[d.jsx("h2",{className:"text-xl font-light mb-2 text-red-600",children:"Login Failed"}),d.jsx("p",{className:"mb-4 text-zinc-600",children:t||"Invalid credentials or account not found."}),d.jsx("button",{className:"mt-4 px-4 py-2 bg-sky-600 text-[12px] font-light text-white rounded",onClick:e,children:"Try Again"}),d.jsx(th,{to:"/auth/forgot-password",className:"block mt-4 text-sky-600 underline",children:"Forgot password?"})]})})}function khe(){const{signIn:t}=Jn(),[e,r]=z.useState({email:"",password:""}),[n,i]=z.useState(!1),[s,a]=z.useState(null),[o,l]=z.useState(!1),c=$i(),f=async p=>{p.preventDefault(),i(!0),a(null);try{await t(e.email,e.password),c("/")}catch(g){a(g.message||"Login failed.")}finally{i(!1)}};return s?d.jsx(iL,{message:s,onRetry:()=>a(null)}):d.jsxs(fm,{children:[d.jsx(Hg,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),d.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left",children:["I'm a",d.jsx("br",{}),"Customer"]}),d.jsxs("form",{onSubmit:f,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[d.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:e.email,onChange:p=>r({...e,email:p.target.value})}),d.jsxs("div",{className:"relative mb-4",children:[d.jsx("input",{type:o?"text":"password",className:"w-full px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Password",value:e.password,onChange:p=>r({...e,password:p.target.value}),"aria-label":"Password"}),d.jsx("button",{type:"button",onClick:()=>l(p=>!p),"aria-pressed":o,"aria-label":o?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500",children:o?d.jsx(oy,{className:"h-5 w-5"}):d.jsx(ly,{className:"h-5 w-5"})})]}),d.jsx("div",{className:"flex justify-center w-full",children:d.jsx("button",{disabled:n,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] text-[#36A5FF] bg-white mt-4 flex items-center justify-center",children:n?"Signing in":"Sign In"})})]}),d.jsx("div",{className:"mt-6 text-center text-zinc-500 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:d.jsx(th,{to:"/auth/forgot-password",className:"text-sky-600 font-medium",children:"Forgot password?"})}),d.jsxs("div",{className:"mt-2 text-center text-zinc-500 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Dont have an account? ",d.jsx(th,{to:"/auth/customer/register",className:"text-sky-600 font-medium",children:"Register"})]})]})}function The(){const{signUp:t}=Jn(),[e,r]=z.useState({name:"",email:"",phone:"",address:"",password:""}),[n,i]=z.useState(!1),[s,a]=z.useState([]),[o,l]=z.useState(null),[c,f]=z.useState(null),p=z.useRef(),[g,m]=z.useState(!1);$i();const _=async R=>{if(!R)return a([]);const j=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(R)}&addressdetails=1&limit=5`)).json();a(j)},w=R=>{const C=R.target.value;r({...e,address:C}),l(null),clearTimeout(p.current),p.current=setTimeout(()=>_(C),400)},b=R=>{r({...e,address:R.display_name}),l(R),a([])},k=async R=>{R.preventDefault(),i(!0);try{await t({email:e.email,password:e.password,displayName:e.name,role:"pharmacy"});const C=X0.currentUser?.uid;C&&await Rp(kr(Et,"pharmacies",C),{id:C,name:e.name,email:e.email,address:e.address,lat:o?.lat||null,lon:o?.lon||null,etaMins:25,phone:e.phone}),f(e.email)}catch(C){alert(C.message)}finally{i(!1)}};return c?d.jsx(nL,{email:c}):d.jsxs(fm,{children:[d.jsx(Hg,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),d.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left",children:["I'm a",d.jsx("br",{}),"Pharmacy"]}),d.jsxs("form",{onSubmit:k,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[d.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Pharmacy Name",value:e.name,onChange:R=>r({...e,name:R.target.value})}),d.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:e.email,onChange:R=>r({...e,email:R.target.value})}),d.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Phone Number",value:e.phone,onChange:R=>r({...e,phone:R.target.value})}),d.jsxs("div",{className:"relative mb-4",children:[d.jsx("input",{className:"w-full px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Address",value:e.address,onChange:w}),s.length>0&&d.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-48 overflow-y-auto animate-fade-in",children:s.map((R,C)=>d.jsxs("div",{onClick:()=>b(R),className:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-[13px] sm:text-[14px] md:text-[16px] font-poppins text-gray-800 transition-colors duration-200 animate-fadeInUp border-b border-gray-100 last:border-b-0 flex items-center gap-3",style:{animationDelay:`${C*.05}s`},children:[d.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-blue-100 flex-shrink-0",children:d.jsxs("svg",{className:"h-3 w-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),d.jsx("div",{className:"flex-1 min-w-0",children:d.jsx("div",{className:"text-sm text-gray-900 truncate",children:R.display_name})}),d.jsx("div",{className:"text-xs text-blue-600 font-medium flex-shrink-0",children:"Address"})]},C))})]}),d.jsxs("div",{className:"relative mb-4",children:[d.jsx("input",{type:g?"text":"password",className:"w-full mb-0 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Choose a password",value:e.password,onChange:R=>r({...e,password:R.target.value})}),d.jsx("button",{type:"button",onClick:()=>m(R=>!R),"aria-pressed":g,"aria-label":g?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500",children:g?d.jsx(oy,{className:"h-5 w-5"}):d.jsx(ly,{className:"h-5 w-5"})})]}),d.jsx("div",{className:"flex justify-center w-full",children:d.jsx("button",{disabled:n,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] text-[#36A5FF] bg-white mt-4 flex items-center justify-center",children:n?"Registering":"Register"})})]}),d.jsxs("div",{className:"mt-6 text-center text-zinc-500 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Already have an account? ",d.jsx(th,{to:"/auth/pharmacy/signin",className:"text-sky-600 font-medium",children:"Sign In"})]})]})}function Ahe(){const{signIn:t}=Jn(),[e,r]=z.useState({email:"",password:""}),[n,i]=z.useState(!1),[s,a]=z.useState(null),[o,l]=z.useState(!1),c=$i(),f=async p=>{p.preventDefault(),i(!0),a(null);try{await t(e.email,e.password),c("/")}catch(g){a(g.message||"Login failed.")}finally{i(!1)}};return s?d.jsx(iL,{message:s,onRetry:()=>a(null)}):d.jsxs(fm,{children:[d.jsx(Hg,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),d.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left",children:["I'm a",d.jsx("br",{}),"Pharmacy"]}),d.jsxs("form",{onSubmit:f,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[d.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:e.email,onChange:p=>r({...e,email:p.target.value})}),d.jsxs("div",{className:"relative mb-4",children:[d.jsx("input",{type:o?"text":"password",className:"w-full px-4 py-2 border-b border-zinc-300 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left focus:outline-none focus:border-[#36A5FF]",placeholder:"Password",value:e.password,onChange:p=>r({...e,password:p.target.value}),"aria-label":"Password"}),d.jsx("button",{type:"button",onClick:()=>l(p=>!p),"aria-pressed":o,"aria-label":o?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500",children:o?d.jsx(oy,{className:"h-5 w-5"}):d.jsx(ly,{className:"h-5 w-5"})})]}),d.jsx("div",{className:"flex justify-center w-full",children:d.jsx("button",{disabled:n,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] text-[#36A5FF] bg-white mt-4 flex items-center justify-center",children:n?"Signing in":"Sign In"})})]}),d.jsx("div",{className:"mt-6 text-center text-zinc-500 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:d.jsx(th,{to:"/auth/forgot-password",className:"text-sky-600 font-medium",children:"Forgot password?"})}),d.jsxs("div",{className:"mt-2 text-center text-zinc-500 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Dont have an account? ",d.jsx(th,{to:"/auth/pharmacy/register",className:"text-sky-600 font-medium",children:"Register"})]})]})}function Nhe(){const{user:t,logout:e}=Jn(),[r,n]=z.useState(!1),[i,s]=z.useState(!1),a=$i();if(z.useEffect(()=>{t&&t.emailVerified},[t]),!t||t.emailVerified)return null;const o=async()=>{s(!0),await C7(t),n(!0),s(!1)},l=async()=>{try{await e()}catch{}window.history&&window.history.length>1?a(-1):a("/auth/landing")};return d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:d.jsxs("div",{className:"bg-white p-8 max-w-md w-full text-center",children:[d.jsx("h2",{className:"text-xl font-light mb-2",children:"Verify your email"}),d.jsxs("p",{className:"mb-4 text-zinc-600 text-[14px] font-thin",children:["A verification link has been sent to ",d.jsx("b",{children:t.email}),".",d.jsx("br",{}),"Please check your inbox and click the link to activate your account."]}),d.jsx("button",{className:"px-4 py-2 bg-sky-600 text-white rounded-full text-[12px] font-light disabled:opacity-50",onClick:o,disabled:i||r,children:r?"Verification Sent!":i?"Sending...":"Resend Email"}),d.jsx("button",{className:"block mt-4 mx-auto text-sm text-zinc-500 underline",onClick:l,children:"Back"})]})})}function Che(){const[t,e]=z.useState(""),[r,n]=z.useState(!1),[i,s]=z.useState(""),[a,o]=z.useState(!1),l=async c=>{c.preventDefault(),o(!0),s("");try{await PH(t),n(!0)}catch(f){s(f.message||"Failed to send reset email.")}o(!1)};return d.jsxs(fm,{children:[d.jsx(Hg,{to:"/auth/landing"}),d.jsxs("div",{className:"w-full max-w-md text-center bg-white rounded-2xl  p-8",children:[d.jsx("img",{src:"/ForgotPasswordIllustration.png",alt:"Forgot Password",className:"mx-auto mb-4 w-28 h-28 object-contain"}),d.jsx("h2",{className:"text-xl font-light mb-4",children:"Forgot Password?"}),r?d.jsx("p",{className:"text-green-600 font-thin text-[14px]",children:"A password reset link has been sent to your email."}):d.jsxs("form",{onSubmit:l,className:"space-y-4 text-left",children:[d.jsx("input",{type:"email",className:"w-full border-b border-zinc-300 text-[12px] mt-2 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-200 focus:border-sky-400",placeholder:"Enter your email",value:t,onChange:c=>e(c.target.value),required:!0}),i&&d.jsx("div",{className:"text-red-500 text-sm",children:i}),d.jsxs("button",{type:"submit",disabled:a,className:"w-full rounded-full bg-sky-600 text-white text-[13px] font-light py-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[a&&d.jsx("span",{className:"inline-block h-4 w-4 border-2 border-white/70 border-t-transparent rounded-full animate-spin"}),a?"Sending":"Send Reset Link"]})]})]})]})}function Ihe(){const{id:t}=_N(),{userCoords:e}=cy(),[r,n]=z.useState(null),[i,s]=z.useState([]),[a,o]=z.useState(!1),[l,c]=z.useState(null),[f,p]=z.useState(!1);z.useEffect(()=>{if(typeof window>"u")return;const k=window.matchMedia("(orientation: portrait)"),R=C=>p(C.matches);return p(k.matches),k.addEventListener?k.addEventListener("change",R):k.addListener(R),()=>{k.removeEventListener?k.removeEventListener("change",R):k.removeListener(R)}},[]);const g=f,m=$i(),{user:_,profile:w}=Jn();z.useEffect(()=>{async function k(){const R=await Aa(kr(Et,"pharmacies",t));n(R.data())}return k(),ay(s,t)},[t]),z.useEffect(()=>{if(r&&e){const k=kb(r,e,"driving");c(k)}else c(null)},[r,e]);const b=async()=>{if(!_||!_.uid){m("/auth/landing");return}if(w?.role!=="customer"){alert("Only customers can start a chat with a pharmacy.");return}try{await Eb({vendorId:t,customerId:_.uid,role:"customer"}),m("/messages")}catch(k){console.error(k),alert("Could not start chat thread.")}};return d.jsxs("div",{className:"min-h-screen bg-white/80 backdrop-blur-md w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 pt-8 pb-28",children:[d.jsxs("div",{className:"sticky top-0 z-20 bg-white/90 backdrop-blur-md pb-2 pt-4 -mx-4 sm:-mx-5 md:-mx-8 lg:-mx-12 xl:-mx-0 px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 flex items-center gap-3 animate-slide-down-fade",children:[d.jsxs("button",{onClick:()=>m(-1),className:"w-[72px] h-[25px] font-poppins font-extralight tracking-tight text-[14px] flex items-center justify-center rounded-full bg-white border border-zinc-300 mr-1 hover:scale-105 hover:shadow-md transition-all duration-200 active:scale-95",children:[d.jsx($1,{className:"h-3 w-3 mr-0"})," Back"]}),d.jsx("div",{className:"-ml-1 text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-light font-poppins leading-none animate-text-reveal",children:"VendorProfile"})]}),d.jsx("div",{className:"w-full mx-auto mt-6",children:d.jsxs("div",{className:`flex flex-col ${g?"":"md:grid md:grid-cols-3"} gap-6`,children:[d.jsxs("div",{className:`order-2 ${g?"":"md:order-2 md:col-span-2"} animate-fade-in-up`,children:[d.jsxs("div",{className:`border border-zinc-200 rounded-2xl bg-white shadow-sm p-4 mb-4 flex items-center justify-between ${g?"":"md:sticky md:top-20 md:bg-white/90 md:backdrop-blur-sm md:z-20"} animate-slide-down-fade`,children:[d.jsxs("div",{children:[d.jsxs("div",{className:"text-[18px] font-poppins font-medium",children:["Products by",d.jsx("br",{}),r?.name||"Vendor"]}),d.jsxs("div",{className:"text-zinc-500 text-[13px] font-poppins font-light",children:[i.length," items"]})]}),d.jsxs("div",{children:[i.length>3&&!a&&d.jsx("button",{className:"text-sky-600 text-[12px] font-poppins font-light px-3 py-1 rounded-full hover:bg-sky-50 transition-all duration-200 hover:scale-105 active:scale-95",onClick:()=>o(!0),children:"See more"}),i.length>3&&a&&d.jsx("button",{className:"text-sky-600 text-[13px] font-poppins font-light px-3 py-1 rounded-full hover:bg-sky-50 transition-all duration-200 hover:scale-105 active:scale-95",onClick:()=>o(!1),children:"See less"})]})]}),d.jsx("div",{className:`${g?"":"md:max-h-[calc(100vh-12rem)] md:overflow-y-auto md:pr-4"}`,children:d.jsxs("div",{className:"space-y-3 px-0",children:[(a?i:i.slice(0,3)).map((k,R)=>d.jsxs("div",{className:"rounded-2xl border border-zinc-200 p-3 flex items-center gap-3 bg-white shadow-sm cursor-pointer hover:bg-sky-50 transition-all duration-200 overflow-hidden card-interactive animate-fadeInUp hover:scale-102 hover:shadow-lg",style:{animationDelay:`${R*.1}s`},onClick:()=>m(`/product/${k.id}`),children:[d.jsx("div",{className:"flex-shrink-0 animate-bounce-gentle",children:d.jsx(dh,{name:k.name,image:k.image,category:k.category,size:30})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"font-poppins font-medium text-[15px] tracking-tight mb-1 truncate",title:k.name,children:k.name}),d.jsxs("div",{className:"text-zinc-500 text-[12px] font-poppins font-light truncate",title:`${k.category}  Stock: ${k.stock}  SKU: ${k.sku}`,children:[k.category,"  Stock: ",k.stock,"  SKU: ",k.sku]})]}),d.jsxs("div",{className:"text-[15px] font-poppins font-medium text-sky-600 ml-3 flex-shrink-0 animate-pulse-slow",children:["",Number(k.price).toLocaleString()]})]},k.id)),i.length===0&&d.jsx("div",{className:"text-zinc-500 text-[13px] font-poppins font-light animate-fade-in",children:"No products yet."})]})})]}),d.jsxs("aside",{className:`order-1 ${g?"":"md:order-1 md:col-span-1 md:self-start md:sticky md:top-20"} animate-fade-in-left`,children:[d.jsxs("div",{className:"border border-zinc-200 rounded-2xl bg-white shadow-sm p-5 mb-4 w-full flex flex-col items-start card-interactive hover:shadow-lg transition-all duration-300",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 flex items-center justify-center mb-2 animate-bounce-gentle hover:scale-110 transition-transform duration-200",children:d.jsx("span",{className:"text-[32px] font-poppins font-light text-sky-600",children:r?.name?.charAt(0)||"V"})}),d.jsx("div",{className:"text-[22px] font-poppins font-medium tracking-tight text-sky-600 mb-1 animate-text-reveal",children:r?.name||"Vendor"}),d.jsx("div",{className:"text-zinc-500 text-[13px] font-poppins font-light mb-1 animate-fade-in",style:{animationDelay:"0.1s"},children:r?.email||""}),d.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 text-[13px] font-poppins font-light mb-1 animate-fade-in",style:{animationDelay:"0.2s"},children:[d.jsx(ac,{className:"h-3 w-3"})," ",r?.address||""]}),d.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 text-[13px] font-poppins font-light mb-1 animate-fade-in",style:{animationDelay:"0.3s"},children:[d.jsx(av,{className:"h-3 w-3"}),l?`${l.formatted} to ${r?.name||"vendor"}`:e?"Calculating ETA...":"Fetching location..."]}),d.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 text-[13px] font-poppins font-light animate-fade-in",style:{animationDelay:"0.4s"},children:[d.jsx(Lp,{className:"h-3 w-3"})," ",r?.phone||""]})]}),d.jsx("div",{className:"w-full mb-4 animate-fade-in-up",style:{animationDelay:"0.5s"},children:d.jsxs("button",{onClick:b,className:"w-full rounded-full bg-sky-600 text-white h-[37px] text-[12px] font-poppins font-light flex items-center justify-center gap-2 btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200",children:[d.jsx(HH,{className:"h-4 w-4"})," Message Vendor"]})})]})]})})]})}function Phe(){const t=nu(),e=$i(),{user:r,profile:n}=Jn(),[i,s]=z.useState(t.pathname),[a,o]=z.useState(0),[l,c]=z.useState(0),[f,p]=z.useState(0),{newOrder:g,showNotification:m,clearNotification:_}=vhe();z.useEffect(()=>s(t.pathname),[t.pathname]),z.useEffect(()=>{if(!r||n&&n.role==="pharmacy")return o(0);const C=Vr(xr(Et,"users",r.uid,"cart"));return pi(C,X=>o(X.size))},[r,n]),z.useEffect(()=>{if(!r||!n||n.role!=="pharmacy")return p(0);const C=n.uid||r.uid,j=Vr(xr(Et,"orders"),Wr("pharmacyId","==",C));return pi(j,K=>{const P=K.docs.filter(A=>{const O=A.data().status?.toLowerCase()||"pending";return!["processing","shipped","fulfilled","cancelled"].includes(O)});p(P.length)})},[r,n]),z.useEffect(()=>{if(!r||!n?.role)return c(0);const C=sy({uid:r.uid,role:n.role},j=>{try{const X=j.reduce((K,P)=>{const A=P?.unread?.[r.uid];return K+(typeof A=="number"?A:0)},0);c(X),console.debug("[AppLayout] unread total from listenUserThreads",{sum:X,count:j.length})}catch(X){console.error("[AppLayout] error computing unread from threads",X)}},j=>console.error("[AppLayout] listenUserThreads error",j));return()=>C&&C()},[r,n?.role]);const b=!!new URLSearchParams(t.search).get("chat"),k=typeof window<"u"&&new URLSearchParams(window.location.search).get("debugBottomNav")==="1";z.useEffect(()=>{k&&console.debug("[AppLayout] render",{chatModalOpen:b,unreadMessages:l,tab:i,cartCount:a})},[k,b,l,i,a]);const R=C=>{e("/orders")};return d.jsxs("div",{className:`min-h-screen bg-white w-full flex flex-col items-center px-2 md:px-8 lg:px-16 xl:px-32 ${b?"":"pb-24"}`,children:[d.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto flex-1 flex flex-col",children:d.jsx(TN,{})}),!b&&d.jsx(d.Fragment,{children:d.jsx(FH,{tab:i,setTab:C=>e(C),cartCount:a,unreadMessages:l,ordersCount:f})}),k&&d.jsxs("div",{className:"fixed bottom-24 right-4 z-60 bg-black/80 text-white text-xs px-3 py-1 rounded",children:["AppDebug: chatModalOpen=",String(b)," unread=",String(l)]}),d.jsx(xhe,{order:g,isOpen:m,onClose:_,onViewOrder:R})]})}function hN(){return d.jsx("div",{className:"min-h-screen bg-white w-full flex flex-col items-center px-2 md:px-8 lg:px-16 xl:px-32",children:d.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto flex-1 flex flex-col",children:d.jsx(TN,{})})})}function Rhe(){const{id:t}=_N(),[e,r]=z.useState(null),[n,i]=z.useState(null);return z.useEffect(()=>{async function s(){const o=(await Aa(kr(Et,"products",t))).data();if(r(o?{id:t,...o}:null),o?.pharmacyId){const l=await Aa(kr(Et,"pharmacies",o.pharmacyId));i(l.data())}}s()},[t]),e?d.jsx(ZH,{product:e,pharmacy:n}):null}function Fhe(){const{profile:t}=Jn();return t?t.role==="pharmacy"?d.jsx(ahe,{onSwitchToCustomer:()=>{}}):d.jsx(NY,{onSwitchToPharmacy:()=>{}}):null}function Lhe(){const{user:t,profile:e}=Jn(),r=nu(),n=new URLSearchParams(r.search),i=n.get("scrollTo")?parseInt(n.get("scrollTo"),10):void 0;return t&&e===void 0?d.jsx(LoadingSkeleton,{lines:4,className:"my-8"}):t&&!t.emailVerified?d.jsxs(XE,{children:[d.jsx(di,{path:"/verify-email",element:d.jsx(Nhe,{})}),d.jsx(di,{path:"*",element:d.jsx(Bm,{to:"/verify-email",replace:!0})})]}):e&&e.role==="superuser"&&r.pathname==="/"?d.jsx(Bm,{to:"/superuser",replace:!0}):d.jsxs(XE,{children:[d.jsxs(di,{element:d.jsx(hN,{}),children:[d.jsx(di,{path:"/auth/landing",element:d.jsx(Ehe,{})}),d.jsx(di,{path:"/auth/customer/register",element:d.jsx(She,{})}),d.jsx(di,{path:"/auth/customer/signin",element:d.jsx(khe,{})}),d.jsx(di,{path:"/auth/pharmacy/register",element:d.jsx(The,{})}),d.jsx(di,{path:"/auth/pharmacy/signin",element:d.jsx(Ahe,{})}),d.jsx(di,{path:"/auth/forgot-password",element:d.jsx(Che,{})}),d.jsx(di,{path:"/auth",element:d.jsx(Bm,{to:"/auth/landing",replace:!0})}),d.jsx(di,{path:"/chat/:vendorId",element:d.jsx(td,{children:d.jsx(OP,{scrollTo:i,onBackRoute:"/messages"})})})]}),d.jsx(di,{element:d.jsx(hN,{}),children:d.jsx(di,{path:"/superuser",element:d.jsx(td,{children:d.jsx(yhe,{})})})}),d.jsxs(di,{element:d.jsx(Phe,{}),children:[e&&e.role==="pharmacy"?d.jsx(di,{path:"/",element:d.jsx(dhe,{})}):e&&e.role==="customer"?d.jsx(di,{path:"/",element:d.jsx(JH,{})}):null,d.jsx(di,{path:"/vendor/:id",element:d.jsx(Ihe,{})}),d.jsx(di,{path:"/product/:id",element:d.jsx(Rhe,{})}),d.jsx(di,{path:"/pharmacy-map",element:d.jsx(td,{children:d.jsx(_he,{})})}),d.jsx(di,{path:"/messages",element:d.jsx(td,{children:d.jsx(yY,{})})}),d.jsx(di,{path:"/cart",element:d.jsx(td,{children:e&&e.role==="pharmacy"?d.jsx(Bm,{to:"/"}):d.jsx(_Y,{})})}),d.jsx(di,{path:"/orders",element:d.jsx(td,{children:d.jsx(bY,{})})}),d.jsx(di,{path:"/profile",element:d.jsx(td,{children:d.jsx(Fhe,{})})})]}),d.jsx(di,{path:"*",element:d.jsx(Bm,{to:"/",replace:!0})})]})}function Dhe(){return d.jsxs(RH,{children:[d.jsx(ghe,{}),d.jsx(Lhe,{})]})}HL.createRoot(document.getElementById("root")).render(d.jsx(qD,{children:d.jsx(Dhe,{})}));export{zn as _,Ohe as c,dN as g};
